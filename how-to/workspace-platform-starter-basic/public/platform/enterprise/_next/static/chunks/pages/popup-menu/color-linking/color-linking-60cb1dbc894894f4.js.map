{"version":3,"file":"static/chunks/pages/popup-menu/color-linking/color-linking-60cb1dbc894894f4.js","mappings":"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","sources":["webpack://_N_E/?120c","webpack://_N_E/../common/src/hooks/useLanguageChange.ts","webpack://_N_E/../common/src/styles/svg-icons.ts","webpack://_N_E/../common/src/utils/menu.ts","webpack://_N_E/./src/components/Callout/Callout.tsx","webpack://_N_E/./src/components/ControlBar/BaseButton/ExtendedButton.tsx","webpack://_N_E/./src/components/ControlBar/BaseButton/PopupButton.tsx","webpack://_N_E/./src/components/ControlBar/MenuButton/MenuButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/ColorLinkingButton/ColorLinkingButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/MenuButtonIcon.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/utils.ts","webpack://_N_E/./src/pages/popup-menu/color-linking/color-linking.tsx","webpack://_N_E/../node_modules/title-case/dist.es2015/index.js","webpack://_N_E/../node_modules/@swc/helpers/esm/_tagged_template_literal.js"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/popup-menu/color-linking/color-linking\",\n      function () {\n        return require(\"private-next-pages/popup-menu/color-linking/color-linking.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/popup-menu/color-linking/color-linking\"])\n      });\n    }\n  ","import { useEffect } from 'react';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport { Locale } from '@client-platform/shapes';\n\nexport const useLanguageChange = (onLanguageChange: (language: Locale) => void) => {\n    const { i18n } = useTranslation();\n\n    useEffect(() => {\n        const eventHandler = () => {\n            onLanguageChange(i18n.language as Locale);\n        };\n        i18n.on('languageChanged', eventHandler);\n\n        return () => {\n            i18n.off('languageChanged', eventHandler);\n        };\n    }, [i18n, onLanguageChange]);\n};\n","import styled from 'styled-components';\n\nimport { Icon } from '@openfin/ui-library';\n\nexport const StyledIcon = styled(Icon)<{ disabled?: boolean; isEnterprise?: boolean; windowFocused?: boolean }>`\n    svg path {\n        color: ${({ theme, disabled, isEnterprise, windowFocused }) =>\n            disabled && (!isEnterprise || windowFocused) ? theme.palette.textInactive : ''};\n        opacity: ${({ isEnterprise, windowFocused }) => (isEnterprise && !windowFocused ? 0.5 : 'none')};\n    }\n    .icons-large & {\n        --px-icon: ${({ theme }) => theme.iconSize.large};\n        --px-container: ${({ theme }) => theme.iconSize.large};\n    }\n`;\n\nexport const ThemedSVG = styled.svg`\n    path {\n        fill: ${({ theme }) => theme.palette.inputColor};\n    }\n`;\n","import { SaveModalType } from '@client-platform/shapes';\n\nexport enum Menu {\n    SAVE = 'SAVE_MENU',\n    SHARE = 'SHARE_MENU',\n    COLOR_LINK = 'COLOR_LINK_MENU',\n    LAYOUT = 'LAYOUT_MENU'\n}\nexport interface UserMenuParams {\n    [Menu.SAVE]: {\n        id: string;\n        menuType: SaveModalType;\n        invocationId?: string;\n    };\n    [Menu.SHARE]: { id: string; title: string };\n    [Menu.LAYOUT]: null;\n    [Menu.COLOR_LINK]: { selectedViews: string } | null;\n}\n","import { memo, PropsWithChildren } from 'react';\n\nimport styled from 'styled-components';\n\nimport { useIsWindows } from '@enterprise/hooks/useIsWindows';\n\nconst Callout: React.FC<PropsWithChildren<{ isEnterprise?: boolean }>> = ({ children, isEnterprise }) => {\n    const isWindows = useIsWindows();\n    return (\n        <Container>\n            <Content isEnterprise={isEnterprise} isWindows={isWindows}>\n                {children}\n            </Content>\n        </Container>\n    );\n};\n\nexport default memo(Callout);\n\nconst Container = styled.div`\n    background: ${({ theme }) => theme.palette.background1};\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    overflow-x: hidden;\n`;\n\nconst Content = styled.div<{ isEnterprise: boolean; isWindows: boolean }>`\n    align-items: center;\n    background: ${({ theme }) => theme.palette.background4};\n    display: flex;\n    height: 100%;\n    justify-content: space-between;\n    padding: 0;\n    position: relative;\n    overflow: hidden;\n    border: ${({ theme, isEnterprise, isWindows }) =>\n        (!isEnterprise || isWindows) && `1px solid ${theme.palette.background5}`};\n`;\n","import styled, { css } from 'styled-components';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nconst ExtendedButton = styled(BaseButton)<{ active: boolean }>`\n    ${(props) =>\n        props.active &&\n        css`\n            background-color: ${({ theme }) => theme.palette.statusActive};\n\n            &:hover {\n                background-color: ${({ theme }) => theme.palette.statusActive};\n            }\n        `}\n`;\n\nexport default ExtendedButton;\n","import styled from 'styled-components';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nconst PopupButton = styled(BaseButton)`\n    height: ${({ theme }) => theme.px.xxxlarge};\n    width: ${({ theme }) => theme.px.xxxlarge};\n\n    &:hover:not([disabled]) {\n        background-color: ${({ theme }) => theme.palette.background1};\n    }\n\n    &:active:not([disabled]) {\n        background-color: ${({ theme }) => theme.palette.statusActive};\n    }\n`;\n\nexport default PopupButton;\n","import React, { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Menu, UserMenuParams } from '@common/utils/menu';\nimport { RightMenuConfig } from '@common/utils/menu-config';\nimport { showModalWin } from '@common/utils/popup-window';\n\nimport { closeActiveMenu, openMenu, selectActiveMenu } from '@enterprise/slices/menu';\n\nimport ExtendedButton from '../BaseButton/ExtendedButton';\n\ninterface Props<M extends Menu> {\n    'type': M;\n    'config': RightMenuConfig;\n    'params': UserMenuParams[M];\n    'disabled'?: boolean;\n    'tooltip'?: string;\n    'data-testid'?: string;\n}\n\n/**\n * Generic element for displaying a button that opens a popup menu\n */\nconst MenuButton = <M extends Menu>({\n    params,\n    type,\n    config,\n    disabled,\n    children,\n    tooltip,\n    'data-testid': dataTestId\n}: React.PropsWithChildren<Props<M>>): React.ReactElement => {\n    const dispatch = useDispatch();\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const activeMenu = useSelector(selectActiveMenu);\n    const isActive = useRef<boolean>(false);\n    isActive.current = activeMenu.type === type && !!activeMenu.type;\n\n    const { windowOptions, windowOffset } = config;\n\n    const onClickHandler = () => {\n        if (!buttonRef.current) {\n            throw new Error('Button ref is undefined');\n        }\n\n        const { bottom, left } = buttonRef.current.getBoundingClientRect();\n        const offsetX = (windowOffset?.x || 0) + buttonRef.current.offsetWidth / 2;\n        (async () => {\n            const windowOpts = {\n                x: left + offsetX - windowOptions.defaultWidth / 2,\n                y: bottom,\n                ...windowOptions\n            };\n\n            // Menu needs update state on blur, setup here prior to showing window so there is no chance of a timing issue\n            const win = fin.Window.wrapSync({ uuid: fin.me.uuid, name: windowOpts.name });\n            let hasBeenFocused = false;\n            const blurredListenerPromise = win.once('blurred', () => {\n                if (hasBeenFocused) {\n                    dispatch(closeActiveMenu());\n                }\n            });\n            const focusedListenerPromise = win.once('focused', () => {\n                // Only change the window button state once the menu has been shown & focused\n                dispatch(openMenu(type, params));\n                // Ensure that the window has been focused once so there is no timing issue\n                hasBeenFocused = true;\n            });\n            await Promise.all([blurredListenerPromise, focusedListenerPromise]);\n\n            await showModalWin(params, windowOpts);\n        })();\n    };\n    return (\n        <ExtendedButton\n            title={tooltip}\n            disabled={disabled ?? false}\n            onClick={onClickHandler}\n            active={isActive.current}\n            ref={buttonRef}\n            data-testid={dataTestId}\n        >\n            {children}\n        </ExtendedButton>\n    );\n};\n\nexport default MenuButton;\n","import { Dispatch, FC, MutableRefObject, useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport type OpenFin from '@openfin/core';\n\nimport { showInfo, showSuccess } from '@common/utils/indicators/showIndicator';\nimport { Menu } from '@common/utils/menu';\nimport { RightMenuConfig } from '@common/utils/menu-config';\n\nimport { t } from '@common/api/i18next';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { highlightAllInteropViews, updateContextGroup } from '@enterprise/api/color-linking';\nimport { raiseJoinContextGroupAnalytics, raiseLeaveContextGroupAnalytics } from '@enterprise/api/controls';\n\nimport {\n    selectLayoutsWithSelectedViews,\n    selectShowAllContextGroups,\n    toggleContextGroupOutlines\n} from '@enterprise/slices/tab-focus';\n\nimport { BrowserButtonType } from '@client-platform/shapes';\nimport { useLanguageChange } from '@common/hooks/useLanguageChange';\n\nimport MenuButton from '../../../../MenuButton/MenuButton';\nimport { defaultButtonPropMap } from '../../../utils';\nimport { getColorLinkingMenu } from '../../menus/menuConfig';\nimport { PredefinedIconUrl } from '../MenuButtonIcon';\n\nexport enum ColorLinkingChannelTypes {\n    JOIN_GROUP = 'join-group',\n    LEAVE_GROUP = 'leave-group',\n    SHOW_HIDE_GROUPS = 'show-hide-groups'\n}\n\nexport type ColorLinkingChannelMessageData =\n    | {\n          type: ColorLinkingChannelTypes.JOIN_GROUP | ColorLinkingChannelTypes.LEAVE_GROUP;\n          channelId: string;\n          colorName: string;\n      }\n    | {\n          type: ColorLinkingChannelTypes.SHOW_HIDE_GROUPS;\n      };\n\ninterface Props {\n    tooltip?: string;\n    iconUrl?: string;\n}\n\nconst MENU_TYPE: Menu = Menu.COLOR_LINK;\n\nconst makeColorLinkingMenuHandler =\n    (dispatchRef: MutableRefObject<Dispatch<unknown>>, selectedViewsRef: MutableRefObject<OpenFin.Identity[]>) =>\n    async (ev: MessageEvent<ColorLinkingChannelMessageData>) => {\n        switch (ev.data.type) {\n            case ColorLinkingChannelTypes.JOIN_GROUP:\n                try {\n                    const colorName = ev.data.colorName;\n                    await updateContextGroup(selectedViewsRef.current, ev.data.channelId);\n                    fin.Window.getCurrentSync().focus();\n                    showSuccess({\n                        message: t('successIndicator.namedContextGroupApplied', { colorName: colorName }),\n                        parentBrowserName: fin.me.name\n                    });\n                    selectedViewsRef.current.forEach((view) => raiseJoinContextGroupAnalytics(colorName, view));\n                } catch (e) {\n                    console.warn(e);\n                    // Grab focus to close color linking menu\n                    fin.Window.getCurrentSync().focus();\n                    showInfo({\n                        message: t('infoIndicator.colorLinkAttempt'),\n                        parentBrowserName: fin.me.name\n                    });\n                }\n                break;\n            case ColorLinkingChannelTypes.LEAVE_GROUP: {\n                const colorName = ev.data.colorName;\n                await updateContextGroup(selectedViewsRef.current, ev.data.channelId);\n                fin.Window.getCurrentSync().focus();\n                showSuccess({\n                    message:\n                        selectedViewsRef.current.length > 1\n                            ? t('successIndicator.viewRemoved')\n                            : t('successIndicator.viewsRemoved'),\n                    parentBrowserName: fin.me.name\n                });\n                selectedViewsRef.current.forEach((view) => raiseLeaveContextGroupAnalytics(colorName, view));\n                break;\n            }\n            case ColorLinkingChannelTypes.SHOW_HIDE_GROUPS:\n                dispatchRef.current(toggleContextGroupOutlines());\n        }\n    };\n\nconst makeLayoutReadyHandler = (showAllContextGroupsRef: MutableRefObject<boolean>) => () => {\n    if (showAllContextGroupsRef.current) {\n        highlightAllInteropViews();\n    }\n};\n\nconst ColorLinkingButton: FC<Props> = ({ tooltip, iconUrl }) => {\n    const dispatch = useDispatch();\n    const dispatchRef = useRef(dispatch);\n    dispatchRef.current = dispatch;\n    const activePage = useSelector(selectActivePage);\n\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViews = layoutsWithSelectedViews[activePage.layoutContainerKey];\n    const selectedViewsRef = useRef(selectedViews);\n    selectedViewsRef.current = selectedViews;\n\n    const showAllContextGroups = useSelector(selectShowAllContextGroups);\n    const showAllContextGroupsRef = useRef(showAllContextGroups);\n    showAllContextGroupsRef.current = showAllContextGroups;\n\n    const [menuButtonConfig, setMenuButtonConfig] = useState<RightMenuConfig | null>(null);\n\n    const disabled = !!activePage.isLocked;\n\n    const onLanguageChange = useCallback(() => {\n        Promise.all([getColorLinkingMenu(t('toolbar.colorLinking')), fin.me.interop.getContextGroups()] as const).then(\n            ([menu, groups]) => {\n                setMenuButtonConfig({\n                    ...menu,\n                    windowOptions: {\n                        ...menu.windowOptions,\n                        defaultWidth: 32 * Math.min(groups.length + 1, 10) + 4 // buttonWidth * buttons# + 4 px to account for margins\n                    }\n                });\n            }\n        );\n    }, []);\n\n    useLanguageChange(onLanguageChange);\n\n    useEffect(() => {\n        const channelToMenu = new BroadcastChannel(`color-linking-${fin.me.name}`);\n        channelToMenu.onmessage = makeColorLinkingMenuHandler(dispatchRef, selectedViewsRef);\n\n        const handleLayoutReady = makeLayoutReadyHandler(showAllContextGroupsRef);\n\n        // When new layout is applied, golden-layout will re-create some elements.\n        // Re-apply color-linking styles when this happens.\n        (fin.me as OpenFin.Window).on('layout-ready', handleLayoutReady);\n\n        return () => {\n            (fin.me as OpenFin.Window).removeListener('layout-ready', handleLayoutReady);\n            channelToMenu.close();\n        };\n    }, []);\n\n    const customToolTip = tooltip || menuButtonConfig?.title;\n    const defaultIcon = defaultButtonPropMap[BrowserButtonType.ColorLinking].iconProps.icon;\n\n    if (!menuButtonConfig) {\n        return null;\n    }\n\n    return (\n        <MenuButton\n            type={MENU_TYPE}\n            config={menuButtonConfig}\n            params={{ selectedViews: JSON.stringify(selectedViews) }}\n            tooltip={customToolTip}\n            disabled={disabled}\n        >\n            <PredefinedIconUrl customIconUrl={iconUrl} uiLibIcon={defaultIcon} disabled={disabled} />\n        </MenuButton>\n    );\n};\n\nexport default ColorLinkingButton;\n","import React, { FC } from 'react';\n\nimport { IconSizeType, IconType } from '@openfin/ui-library';\n\nimport { CustomIcon } from '@common/components/Icon/CustomIcon';\n\nimport { StyledIcon } from '@common/styles/svg-icons';\ninterface Props {\n    'customIconUrl'?: string;\n    'uiLibIcon'?: IconType;\n    'disabled'?: boolean;\n    'size'?: IconSizeType;\n    'data-testid'?: string;\n}\nexport const PredefinedIconUrl: FC<Props> = ({ customIconUrl, uiLibIcon, disabled, size, ...rest }) => {\n    return customIconUrl ? (\n        <CustomIcon iconURL={customIconUrl} size={size} {...rest} />\n    ) : (\n        <StyledIcon disabled={disabled} icon={uiLibIcon} size={size} {...rest} />\n    );\n};\n","import OpenFin from '@openfin/core';\n\nimport type { IconProps } from '@openfin/ui-library';\n\nimport { showSuccess } from '@common/utils/indicators/showIndicator';\nimport { currentOFIdentity, getCurrentOFWindow } from '@common/utils/window';\n\nimport { t } from '@common/api/i18next';\nimport { getTabsHandler } from '@common/api/tabs';\n\nimport { BrowserButtonType, ToolbarOptions, WindowStateButtonOptions } from '@client-platform/shapes';\n\nexport const handleMinimizeClick = () => {\n    getCurrentOFWindow()\n        .minimize()\n        .catch((err) => {\n            console.error(`RightControlsContainer: Failed to minimize: ${err}`);\n        });\n};\n\nexport const handleShowHideTabs = async (layoutIdentity: OpenFin.LayoutIdentity) => {\n    const tabHandler = getTabsHandler(layoutIdentity);\n    const isShowing = await tabHandler.isShowingTabs();\n    if (isShowing) {\n        await tabHandler.hide();\n    } else {\n        await tabHandler.show();\n    }\n    showSuccess({\n        message: t(isShowing ? 'successIndicator.hidden' : 'successIndicator.shown'),\n        parentBrowserName: currentOFIdentity.name\n    });\n    await fin.me.focus();\n};\n\nenum DefaultIconStrings {\n    ColorLinking = 'TargetIcon',\n    PresetLayouts = 'GridIcon',\n    ShowHideTabs = 'LightBulbOutlinedIcon',\n    LockUnlockPage = 'LockOpen1Icon',\n    SaveMenu = 'FloppyDiskIcon'\n}\n\nexport const defaultButtonPropMap: {\n    [key in Exclude<BrowserButtonType, 'Custom' | 'Maximise'>]: {\n        iconProps: IconProps;\n        macIcon?: any;\n        macIconHover?: any;\n        macIconInactive?: any;\n        tooltipKey?: string;\n    };\n} = {\n    [BrowserButtonType.ColorLinking]: {\n        iconProps: { icon: DefaultIconStrings.ColorLinking, size: 'small' }\n    },\n    [BrowserButtonType.PresetLayouts]: {\n        iconProps: { icon: DefaultIconStrings.PresetLayouts, size: 'small' }\n    },\n    [BrowserButtonType.SaveMenu]: { iconProps: { icon: DefaultIconStrings.SaveMenu, size: 'small' } },\n    // Pls keep me for backwards compatibility with < v7\n    [BrowserButtonType.SavePage]: { iconProps: { icon: DefaultIconStrings.SaveMenu, size: 'small' } },\n\n    [BrowserButtonType.ShowHideTabs]: {\n        iconProps: { icon: DefaultIconStrings.ShowHideTabs, size: 'small' }\n    },\n    [BrowserButtonType.LockUnlockPage]: {\n        iconProps: { icon: DefaultIconStrings.LockUnlockPage, size: 'small' }\n    },\n    [BrowserButtonType.Minimise]: {\n        tooltipKey: 'toolbar.minimizeWindow',\n        iconProps: { icon: 'DividerHorizontalIcon', size: 'small' }\n    },\n    [BrowserButtonType.Close]: {\n        tooltipKey: 'contextMenu.closeWindow',\n        iconProps: { icon: 'Cross1Icon', size: 'small' }\n    }\n} as const;\n\nexport const defaultToolbarButtonConfig: ToolbarOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.ShowHideTabs\n        },\n        {\n            type: BrowserButtonType.ColorLinking\n        },\n        {\n            type: BrowserButtonType.PresetLayouts\n        },\n        {\n            type: BrowserButtonType.LockUnlockPage\n        },\n        {\n            type: BrowserButtonType.SaveMenu\n        }\n    ]\n};\n\nexport const defaultWindowStateButtonConfig: WindowStateButtonOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.Minimise\n        },\n        {\n            type: BrowserButtonType.Maximise\n        },\n        {\n            type: BrowserButtonType.Close\n        }\n    ]\n};\n\nexport const defaultMacWindowStateButtonConfig: WindowStateButtonOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.Close\n        },\n        {\n            type: BrowserButtonType.Minimise\n        },\n        {\n            type: BrowserButtonType.Maximise\n        }\n    ]\n};\n","import { FC, useEffect, useRef, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport type OpenFin from '@openfin/core';\n\nimport { Icon } from '@openfin/ui-library';\n\nimport { getUrlParams, Router, withRouter } from '@common/utils/router';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport { getContextGroupColorForView } from '@enterprise/api/color-linking';\n\nimport Callout from '@enterprise/components/Callout/Callout';\nimport PopupButton from '@enterprise/components/ControlBar/BaseButton/PopupButton';\nimport { ColorLinkingChannelTypes } from '@enterprise/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/ColorLinkingButton/ColorLinkingButton';\n\ninterface Props {\n    router: Router;\n}\n\nconst ColorLinkingPopup: FC<Props> = ({ router }) => {\n    const urlParams = getUrlParams(router.asPath);\n    const parentName = urlParams.parentName ?? '';\n    const invocationId = urlParams.invocationId ?? '';\n    const [selectedView, setSelectedView] = useState<OpenFin.Identity[]>([]);\n    const [contextGroups, setContextGroups] = useState([]);\n    const [currentColor, setCurrentColor] = useState('');\n    const channelToParent = useRef<BroadcastChannel>();\n    const { t } = useTranslation();\n\n    useEffect(() => {\n        const params = getUrlParams(router.asPath);\n\n        if (typeof params.selectedViews === 'string' && params.selectedViews !== 'undefined') {\n            const routerSelectedView: OpenFin.Identity[] = JSON.parse(params.selectedViews ?? '[]');\n            setSelectedView(routerSelectedView);\n            updateCurrentColor(routerSelectedView);\n        }\n    }, [router]);\n\n    const updateCurrentColor = async (currentViews: OpenFin.Identity[]) => {\n        if (currentViews.length > 1) {\n            const p = await Promise.all(currentViews.map((v) => getContextGroupColorForView(v)));\n            if (p.length > 0 && p.every((c) => c?.name === p?.[0]?.name)) {\n                setCurrentColor(p[0].name);\n            } else {\n                setCurrentColor('');\n            }\n        } else {\n            setCurrentColor((await getContextGroupColorForView(currentViews[0] || selectedView[0]))?.name);\n        }\n    };\n\n    const applyContextGroup = async (name: string, id: string) => {\n        const colorName = name[0].toUpperCase() + name.substring(1);\n\n        if (name === currentColor) {\n            channelToParent.current.postMessage({\n                type: ColorLinkingChannelTypes.LEAVE_GROUP,\n                channelId: id,\n                colorName\n            });\n        } else {\n            channelToParent.current.postMessage({\n                type: ColorLinkingChannelTypes.JOIN_GROUP,\n                channelId: id,\n                colorName\n            });\n        }\n\n        // Blur the window so that it is hidden by logic in MenuWindow\n        fin.Window.getCurrentSync().blur();\n    };\n\n    useEffect(() => {\n        fin.me.interop.getContextGroups().then((groups) => setContextGroups(groups));\n    }, [invocationId]);\n\n    useEffect(() => {\n        channelToParent.current = new BroadcastChannel(`color-linking-${parentName}`);\n\n        return () => {\n            channelToParent.current.close();\n        };\n    }, [parentName]);\n\n    return (\n        <Callout aria-label={t('aria.closeContextGroup')}>\n            <PopupButton\n                title={t('aria.colorLinking')}\n                aria-label={t('aria.colorLinking')}\n                onClick={() => {\n                    channelToParent.current.postMessage({\n                        type: ColorLinkingChannelTypes.SHOW_HIDE_GROUPS\n                    });\n                }}\n            >\n                <Icon icon=\"EyeOpenIcon\" />\n            </PopupButton>\n\n            {contextGroups.map(({ id, displayMetadata: { color, name } }) => (\n                <PopupButton\n                    disabled={selectedView.length === 0}\n                    key={id}\n                    withTitleCase={false}\n                    title={selectedView.length === 0 ? t('aria.applyColorLinking') : name}\n                    icon=\"\"\n                    aria-label={\n                        selectedView.length === 0\n                            ? t('aria.applyColorLinking')\n                            : name === currentColor\n                            ? selectedView.length > 1\n                                ? t('aria.assignColorLinkingCurrentView', { name })\n                                : t('aria.assignColorLinkingCurrentViews', { name })\n                            : selectedView.length > 1\n                            ? t('aria.setColorLinkingActiveView')\n                            : t('aria.setColorLinkingActiveViews')\n                    }\n                    onClick={() => applyContextGroup(name, id)}\n                >\n                    <ColorIcon style={{ backgroundColor: color }} />\n                </PopupButton>\n            ))}\n        </Callout>\n    );\n};\n\nexport default withRouter(ColorLinkingPopup);\n\nconst ColorIcon = styled.div`\n    border-radius: ${({ theme }) => theme.radius.round};\n    height: ${({ theme }) => theme.px.base};\n    width: ${({ theme }) => theme.px.base};\n    margin: 10px;\n`;\n","var SMALL_WORDS = /\\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\\.?|versus|via|when|with|without|yet)\\b/i;\nvar TOKENS = /[^\\s:–—-]+|./g;\nvar WHITESPACE = /\\s/;\nvar IS_MANUAL_CASE = /.(?=[A-Z]|\\..)/;\nvar ALPHANUMERIC_PATTERN = /[A-Za-z0-9\\u00C0-\\u00FF]/;\nexport function titleCase(input) {\n    var result = \"\";\n    var m;\n    // tslint:disable-next-line\n    while ((m = TOKENS.exec(input)) !== null) {\n        var token = m[0], index = m.index;\n        if (\n        // Ignore already capitalized words.\n        !IS_MANUAL_CASE.test(token) &&\n            // Ignore small words except at beginning or end.\n            (!SMALL_WORDS.test(token) ||\n                index === 0 ||\n                index + token.length === input.length) &&\n            // Ignore URLs.\n            (input.charAt(index + token.length) !== \":\" ||\n                WHITESPACE.test(input.charAt(index + token.length + 1)))) {\n            // Find and uppercase first word character, skips over *modifiers*.\n            result += token.replace(ALPHANUMERIC_PATTERN, function (m) { return m.toUpperCase(); });\n            continue;\n        }\n        result += token;\n    }\n    return result;\n}\n//# sourceMappingURL=index.js.map","export function _tagged_template_literal(strings, raw) {\n    if (!raw) raw = strings.slice(0);\n\n    return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));\n}\nexport { _tagged_template_literal as _ };\n"],"names":["window","__NEXT_P","push","__webpack_require__","useLanguageChange","i18n","useTranslation","useEffect","eventHandler","onLanguageChange","language","on","off","StyledIcon","styled","Icon","theme","disabled","isEnterprise","windowFocused","param","palette","textInactive","iconSize","large","svg","withConfig","inputColor","Menu","__webpack_exports__","Z","memo","children","isWindows","useIsWindows","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Container","Content","div","background1","background4","concat","background5","ExtendedButton","BaseButton","props","active","css","statusActive","PopupButton","px","xxxlarge","params","type","config","tooltip","dataTestId","dispatch","useDispatch","buttonRef","useRef","activeMenu","useSelector","selectActiveMenu","isActive","current","windowOptions","windowOffset","title","onClick","bottom","left","getBoundingClientRect","offsetX","x","offsetWidth","windowOpts","defaultWidth","y","win","fin","Window","wrapSync","uuid","me","name","hasBeenFocused","blurredListenerPromise","once","closeActiveMenu","focusedListenerPromise","openMenu","Promise","all","showModalWin","ref","data-testid","ColorLinkingChannelTypes","MENU_TYPE","COLOR_LINK","makeColorLinkingMenuHandler","dispatchRef","selectedViewsRef","ev","data","colorName","updateContextGroup","channelId","getCurrentSync","focus","showSuccess","message","t","parentBrowserName","forEach","raiseJoinContextGroupAnalytics","view","e","console","warn","showInfo","length","raiseLeaveContextGroupAnalytics","toggleContextGroupOutlines","makeLayoutReadyHandler","showAllContextGroupsRef","highlightAllInteropViews","iconUrl","activePage","selectActivePage","selectedViews","layoutsWithSelectedViews","selectLayoutsWithSelectedViews","layoutContainerKey","showAllContextGroups","selectShowAllContextGroups","menuButtonConfig","setMenuButtonConfig","useState","isLocked","useCallback","getColorLinkingMenu","interop","getContextGroups","then","menu","groups","Math","min","channelToMenu","BroadcastChannel","onmessage","handleLayoutReady","removeListener","close","customToolTip","defaultIcon","defaultButtonPropMap","BrowserButtonType","ColorLinking","iconProps","icon","MenuButton","JSON","stringify","PredefinedIconUrl","customIconUrl","uiLibIcon","size","rest","CustomIcon","iconURL","DefaultIconStrings","handleMinimizeClick","getCurrentOFWindow","minimize","catch","error","err","handleShowHideTabs","layoutIdentity","tabHandler","getTabsHandler","isShowing","isShowingTabs","hide","show","currentOFIdentity","PresetLayouts","SaveMenu","SavePage","ShowHideTabs","LockUnlockPage","Minimise","tooltipKey","Close","defaultToolbarButtonConfig","buttons","defaultWindowStateButtonConfig","Maximise","defaultMacWindowStateButtonConfig","withRouter","urlParams","router","getUrlParams","asPath","parentName","invocationId","selectedView","setSelectedView","contextGroups","setContextGroups","currentColor","setCurrentColor","channelToParent","routerSelectedView","parse","updateCurrentColor","currentViews","p","map","getContextGroupColorForView","v","every","c","_this","applyContextGroup","id","toUpperCase","substring","postMessage","LEAVE_GROUP","JOIN_GROUP","blur","jsxs","Callout","aria-label","SHOW_HIDE_GROUPS","displayMetadata","color","withTitleCase","ColorIcon","style","backgroundColor","radius","round","base","SMALL_WORDS","TOKENS","WHITESPACE","IS_MANUAL_CASE","ALPHANUMERIC_PATTERN","titleCase","input","m","result","exec","token","index","test","charAt","replace","_tagged_template_literal","strings","raw","slice","Object","freeze","defineProperties","value"],"sourceRoot":""}