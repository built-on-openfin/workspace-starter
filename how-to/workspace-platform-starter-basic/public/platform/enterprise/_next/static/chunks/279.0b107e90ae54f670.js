"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{281:function(e,t,r){r.d(t,{C:function(){return s},u:function(){return c}});var a=r(5191),n=r(3198),i=r.n(n);let o=e=>{let t=e.querySelectorAll(".lm_tab"),r="",{width:a}=t[0].getBoundingClientRect();24===a?r="view-tab-condensed-sm":a<44?r="view-tab-condensed-md":a<=56&&(r="view-tab-condensed-lg"),t.forEach(e=>{e.classList.forEach(t=>t.includes("view-tab-")&&e.classList.remove(t)),r&&e.classList.add(r)})},l=e=>{let{deltaX:t,deltaY:r}=e,a=e.target.closest(".lm_tabs");Math.abs(r)>Math.abs(t)&&(a.scrollLeft+=r-t)},d=e=>{let t=e.target.closest(".lm_header").querySelector(".lm_tabs");if(t.querySelector(".lm_drop_tab_placeholder")){let r=t.getBoundingClientRect();e.clientX<r.left+12&&t.scrollBy({left:-1}),e.clientX>r.right-12&&t.scrollBy({left:1})}},s=i()(e=>{e.querySelectorAll(".lm_header").forEach(e=>{let t=e.querySelector(".lm_tabs"),r=t.querySelectorAll(".scroll-shadow"),a=e.querySelector(".newTabButton"),n=e.querySelector(".lm_controls");e.style.paddingRight="".concat(null==n?void 0:n.offsetWidth,"px");let i=t.querySelectorAll(".lm_tab");if(t.scrollWidth>t.clientWidth&&i.length>1){(null==a?void 0:a.parentElement.classList.contains("lm_tabs"))&&e.insertBefore(a,t);let i=Array.from(r).find(e=>e.classList.contains("right-scroll-shadow"));if(!r.length){let r=document.createElement("div");r.classList.add("scroll-shadow","left-scroll-shadow"),(i=document.createElement("div")).classList.add("scroll-shadow","right-scroll-shadow"),t.appendChild(r),t.appendChild(i),t.addEventListener("wheel",l),e.addEventListener("drag",d)}a&&(a.style.right="".concat(n.offsetWidth,"px")),i.style.right="".concat(((null==n?void 0:n.offsetWidth)||0)+(a?28:0),"px")}else t.scrollWidth<=t.clientWidth&&((null==a?void 0:a.parentElement.classList.contains("lm_header"))&&a.remove(),r.length&&(r[0].remove(),r[1].remove()));o(t)})},100),c=(e,t,r,n)=>{let i=t?r?"background5":"background3":r?"background3":"background1";return n?(0,a.css)(["background:linear-gradient( 90deg,rgb(from "," r g b / 0%) 0%,rgb(from "," r g b / 50%) 28%,rgb(from "," r g b / 100%) 45% );"],e.palette[i],e.palette[i],e.palette[i]):(0,a.css)(["background:linear-gradient( 90deg,rgb(from "," r g b / 0%) 50%,rgb(from "," r g b / 50%) 75%,rgb(from "," r g b / 100%) 90% );"],e.palette[i],e.palette[i],e.palette[i])}},248:function(e,t,r){let a;r.r(t),r.d(t,{default:function(){return H}});var n=r(4246),i=r(6125),o=r(4861),l=r(6525),d=r(2539),s=r(4039),c=r(2228),u=r(328),g=r(5757),p=r(7378),h=r(8946),m=r(6676),b=r(4824),y=r(1584),f=r(5802),w=r(1610),v=r(8115),x=r(6733),_=r(6075),k=r(5439),C=r(7490),I=r(5401),L=r(7473);let P=new Map,A=async(e,t)=>{let r=(0,b.Bf)((0,L.y0)()),a=(0,b.AB)((0,L.y0)());console.debug("handleDirtyEvent","isDetachingPages",r,"isActivePageChanging",a);let n=(0,b.es)((0,L.y0)(),t);if(r||a||!n.isLayoutReady)return;let[i,o]=(0,b.eT)((0,L.y0)(),n.pageId),l=await fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:t}).getConfig(),{hasUnsavedChanges:d}=await (0,k.H1)({page:{...n,layout:l},identity:f.Gi,eventDetails:e});if(r=(0,b.Bf)((0,L.y0)()),a=(0,b.AB)((0,L.y0)()),r||a){console.debug("Not marking page with id ".concat(n.pageId," as dirty as active page changed"));return}(0,L.WI)((0,b.Qm)({index:o,page:{hasUnsavedChanges:d}}))},S=async e=>{let{isInitialized:t,detail:r,type:a}=e;if(console.debug("handling page dirty event caused by layout DOM event"),"tab-created"===a&&!t)return;let n=r.originalElement.id;"tab-closed"!==a||t||h.lD.set(n,!0),await A({type:"tab-created"==a?I.jQ.ViewAdded:I.jQ.ViewRemoved,viewIdentity:{name:r.name,uuid:r.uuid}},n)},z=async e=>{let t=fin.View.wrapSync(e);if((await t.getCurrentWindow()).identity.name!==f.Gi.name)return;let r=await (0,h.c6)(e.name,f.Gi);if(!r){console.warn("No page found for view ".concat(e.name));return}let a=(0,b.Zp)((0,L.y0)(),r.pageId);return null==a?void 0:a.layoutContainerKey},W=async(e,t)=>{let r=(0,x.T6)(e);(0,C.JZ)(t).querySelector(".tab-icon").style.display=r?"none":"inherit"},B=async e=>{let{viewIdentity:t}=e;console.debug("handling page dirty event caused by view-url-changed event for view with identity:",t);let r=fin.View.wrapSync(t),a=await r.getInfo();if(P.get(t.name)&&P.get(t.name)!==a.url)window.requestAnimationFrame(()=>W(a.url,t.name)),console.debug("View url has changed, marking page as dirty, viewIdAndUrlMap: ".concat(P.get(t.name),", opts.url: ").concat(a.url));else{console.debug("Ignoring view-url-changed updated event as the view hasn't finished loading");return}P.set(t.name,a.url),await A({type:I.jQ.UrlChange,viewIdentity:t,urlBefore:P.get(t.name),urlAfter:a.url},await z(t))},E=async e=>{let{viewIdentity:t}=e,r=fin.View.wrapSync(t),a=await r.getInfo();P.set(t.name,a.url)},F=()=>{(0,h.uA)("tab-created",S),(0,h.uA)("tab-closed",S),(0,_.o)(_.NB.JoinedContextGroup,async e=>{let{viewIdentity:t,contextGroupId:r}=e;return A({viewIdentity:t,type:I.jQ.PageContextAdded,contextId:r},await z(t))}),(0,_.o)(_.NB.RemovedFromContextGroup,async e=>{let{viewIdentity:t}=e;return A({viewIdentity:t,type:I.jQ.PageContextRemoved},await z(t))})},j=async()=>{let e=(0,f.lQ)();e.addListener("view-did-finish-load",E),e.addListener("view-url-changed",B),e.addListener("view-attached",async e=>{try{let t=fin.View.wrapSync(e.viewIdentity),r=await t.getInfo();P.set(e.viewIdentity.name,r.url)}catch(e){console.warn("Error while handling view-attached event in page detection logic",e)}})};var q=r(6433);let D=(e,t)=>r=>{class a extends r{async applyLayoutSnapshot(t){e((0,b.hF)((0,q.m)(t)))}async showLayout(e){let{layoutName:r}=e,a=(0,b.es)(t(),r);(null==a?void 0:a.pageId)||console.debug("layoutManager::showLayout - calling selectPageByLayoutContainerKey() returned an undefined page",r),(0,v.dl)({identity:fin.me.identity,pageId:a.pageId})}resolveLayoutIdentity(e){if(!e){let[r]=(0,b.BF)(t());return(null==r?void 0:r.pageId)||console.debug("layoutManager::resolveLayoutIdentity - calling selectActivePageWithIndex() returned an undefined page",e),{...fin.me.identity,layoutName:r.layoutContainerKey}}return super.resolveLayoutIdentity(e)}async removeLayout(e){let{layoutName:r}=e,a=(0,b.es)(t(),r);(null==a?void 0:a.pageId)||console.debug("layoutManager::removeLayout - calling selectPageByLayoutContainerKey() returned an undefined page",r),await (0,v._v)({identity:fin.me.identity,pageIds:[a.pageId]})}}return a};var G=r(2426),M=r(5550);let Q=e=>{let t=e(),{attachedPages:r}=t.attachedPages,{layoutsWithSelectedViews:a}=t.tabFocus,n=r.find(e=>e.isActive);return r.map(e=>({pageId:e.pageId,layoutContainerKey:e.layoutContainerKey,selectedViews:a[e.layoutContainerKey],isActive:(null==n?void 0:n.pageId)===e.pageId}))};var R=r(1489),T=r(8615);let V=e=>{e.register(m.yz.CloseBrowserWindow,M.r9),e.register(m.yz.AddToChannel,M.xF),e.register(m.yz.RemoveFromChannel,M.uO),e.register(m.yz.ClosePage,M.jq),e.register(m.yz.OpenSaveModalInternal,M.aM),e.register(m.yz.DuplicatePage,M.yW),e.register(m.yz.ShowBrowserIndicator,M._V)};async function O(e){let t=e.findIndex(e=>e.isActive);-1===t&&(t=0);let r=e[t];if(null==r?void 0:r.isLocked){let e=fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:r.layoutContainerKey}),a=await e.getConfig();await (0,G.w)(a,r),(0,L.WI)((0,b.Qm)({index:t,page:{...r,isLayoutCreated:!0}}))}return r}async function K(e,t,r){var a,n;let i=[],o=(0,f.lQ)(),l=(0,T.a)().Browser.wrapSync(f.Gi),d=!!(null===(n=fin.__internal_.initialOptions)||void 0===n?void 0:null===(a=n.workspacePlatform)||void 0===a?void 0:a.disableMultiplePages);(0,L.SQ)(t),(0,L.mV)(r),e.register(m.yz.GetPages,v.UQ),e.register(m.yz.GetActivePageForWindow,v.RC),e.register(m.yz.UpdatePageForWindow,v.r1),e.register(m.yz.UpdatePagesWindowOptions,v.EC),e.register(m.yz.IsDetachingPages,v.cI),e.register(m.yz.IsActivePageChanging,v.fu),e.register(m.yz.DetachPagesFromWindow,v._v),e.register(m.yz.SetSelectedScheme,e=>t((0,s.fu)(e))),e.register(m.yz.SetSelectedLanguage,w.Wh),e.register(m.yz.SetActivePageForWindow,v.dl),e.register(m.yz.GetLayoutsWithSelectedViewsInternal,()=>Q(r)),i.push(o.addListener("view-detached",R.Pv)),i.push(o.addListener("view-crashed",v.Am)),i.push(o.addListener("view-attached",v.o_)),i.push(o.addListener("close-requested",e=>(0,M.r9)())),d?e.setDefaultAction(()=>{throw Error("This API cannot be called on this browser window as pages have been disabled.")}):(e.register(m.yz.AttachPagesToWindow,v.KW),e.register(m.yz.RenamePage,v.$7),e.register(m.yz.ReorderPagesForWindow,v.iX)),await j(),await o.once("layout-ready",async()=>{let e=r().attachedPages.attachedPages,t=await O(e);i.push(l.setActivePage(t.pageId)),i.push((0,v.EC)()),(0,y.Qb)(e,"Open Page"),i.push((0,R.Sc)(e.find(e=>e.isActive).panels)),d||F(),await Promise.all(i),fin.InterApplicationBus.publish("browser-window-ready",{name:fin.me.name})}),await fin.Platform.Layout.init({layoutManagerOverride:D(t,r)})}let N=()=>{let e=(0,i.oR)();(0,p.useEffect)(()=>{(async()=>{a||(a=(0,m.xp)(),(0,h.E0)(),a.then(t=>{K(t,e.dispatch,e.getState).then(()=>{e.dispatch((0,b.Tc)(!0))}).catch(e=>console.error("useBrowserProtocol: failed to init pages",e)),V(t)}))})()},[e])};var Z=r(5191),U=r(281),X=r(9221);let J=(0,Z.createGlobalStyle)(["#layout_container{display:flex;position:relative;flex-direction:column;align-items:flex-start;gap:",";flex:1 0 auto;background:",";","}.lm_goldenlayout{background:transparent;.lm_splitter{opacity:100%;visibility:visible;flex-shrink:0;background:transparent;&.lm_dragging,&:hover{background:",';}}.lm_header{border-bottom:0;height:28px !important;[class^="lm_"]{box-sizing:border-box !important;}.lm_tabs{position:static;display:flex;flex-direction:row;gap:',";background:unset;padding:0px 0px 0px 1px;align-items:center;border-top-left-radius:unset;border-top-right-radius:unset;overflow:scroll;scroll-timeline:--scroll-effect x;&::-webkit-scrollbar{width:0px;height:0px}@keyframes opacityAnimation{0%{opacity:0;}100%{opacity:1;}}--scroll-shadow-gradient:",";.scroll-shadow{height:24px;width:12px;position:absolute;pointer-events:none;z-index:101;animation:opacityAnimation linear both;animation-timeline:--scroll-effect;}.left-scroll-shadow{left:0;background:linear-gradient(270deg,var(--scroll-shadow-gradient));animation-range:0px 8px;}.right-scroll-shadow{right:28px;background:linear-gradient(90deg,var(--scroll-shadow-gradient));animation-range:calc(100% - 8px) 100%;animation-direction:reverse;}div.newTabButton{top:unset;right:unset;position:relative;}}.lm_tab{background:none;align-items:center;border-radius:",";display:flex;max-width:160px;min-width:",";opacity:1;padding:0px ",";height:",";border:1.5px solid transparent;justify-content:space-between;width:100% !important;box-sizing:border-box !important;overflow:hidden;border:1.5px solid transparent;cursor:default;margin:0px !important;.tab-icon{width:",";height:",";margin-right:7px;z-index:2;}.lm_title{line-height:",";white-space:nowrap;text-overflow:unset;flex:1 1 auto;margin-right:0;margin-left:0;color:",";}.lm_title,.lm_close_tab,.tab-icon{opacity:0.85;&:hover{opacity:1;}}.lm_close_tab{height:",";top:5px;width:0px;opacity:0;margin-left:0;position:static;background-image:none;border-radius:",";flex:0 0 auto;z-index:2;&:after{content:\"\";mask:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='none'%3E%3Cg opacity='0.9'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.45394 3.25356C9.64921 3.0583 9.64921 2.74172 9.45394 2.54646C9.25868 2.35119 8.9421 2.35119 8.74684 2.54646L6.00039 5.2929L3.25394 2.54646C3.05868 2.35119 2.7421 2.35119 2.54684 2.54646C2.35158 2.74172 2.35158 3.0583 2.54684 3.25356L5.29328 6.00001L2.54684 8.74646C2.35158 8.94172 2.35158 9.2583 2.54684 9.45356C2.7421 9.64882 3.05868 9.64882 3.25394 9.45356L6.00039 6.70712L8.74684 9.45356C8.9421 9.64882 9.25868 9.64882 9.45394 9.45356C9.64921 9.2583 9.64921 8.94172 9.45394 8.74646L6.7075 6.00001L9.45394 3.25356Z' fill='white'/%3E%3C/g%3E%3C/svg%3E\");height:",";width:",";display:block;background:center center ",";;position:relative;top:2px;left:2px;}}&:hover{background:",";border:1.5px solid transparent;opacity:1;.lm_close_tab{width:",";min-width:",";&:hover{background-color:",";}}.lm_title{margin:0;}.lm_title,.lm_close_tab,.tab-icon{opacity:1;}}&.lm_active{background:",";&:hover{opacity:1;}&:after{","}}&.inactiveWindow{opacity:0.5;}&.lm_active.highlight{border:1.5px solid ",";.lm_close_tab{width:",";min-width:",";}.lm_title,.lm_close_tab,.tab-icon{opacity:1;}.showInteropGroups &{border-style:solid;border-width:1.5px;}&::after{","}}.showInteropGroups &:not(.highlight){border-bottom-style:hidden;border-color:transparent;}&::after{content:'';display:block;position:absolute;right:0px;height:",";width:44px;z-index:1;","}&:hover:after{","}&.view-tab-condensed-sm,&.view-tab-condensed-md,&.view-tab-condensed-lg{&:not(.highlight) .lm_close_tab{display:none !important;}&.lm_active:after{","}&:hover:after{","}}&.view-tab-condensed-md,&.view-tab-condensed-lg{&:after{","}&.lm_active.highlight:after{",'}}&.view-tab-condensed-sm,&.view-tab-condensed-md{&.highlight .tab-icon{display:none !important;}}&.view-tab-condensed-sm{padding:0;.tab-icon{margin:0 auto;}.tab-icon:not([style*="display: none;"]) ~ .lm_title,&.highlight .lm_title{display:none !important;}&.highlight .lm_close_tab{margin:0 auto;}}}div.newTabButton{padding:0px;margin:0px;width:',";min-width:",";height:",';background:none;filter:unset;cursor:default;position:absolute;top:0px;right:0px;& ~ .lm_tabs{width:calc(100% - 28px);div.newTabButton{display:none;}}&::before,&::after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:',";}&::before{height:11px;border-left:1px solid;}&::after{width:11px;border-top:1px solid;}&:hover{background-color:",";border-radius:",";&::before,&::after{color:",";}}&.inactiveWindow{&::before,&::after{opacity:0.5;}}}}.lm_item_container{box-sizing:border-box;max-height:100%;max-width:100%;border:none !important;& > *{overflow:hidden;}.openfin_default_background{display:none;}.showInteropGroups &{border-color:transparent;&.highlight{border-color:",";}}}}.lm_drop_tab_placeholder{width:100%;max-width:160px;min-width:",";}.lm_tabdropdown,.lm_tabdropdown_list{display:none;}.lm_dropTargetIndicator{border:2px solid ",";.lm_inner{background:",";opacity:0.25;}}.lm_content{background:",";}.lm_popout,.lm_maximise,.lm_close{filter:",";}"],e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.palette.background3},e=>{let{isWindows:t}=e;return!t&&(0,Z.css)(["border-bottom-left-radius:",";border-bottom-right-radius:",";"],X.Y,X.Y)},e=>{let{theme:t}=e;return t.palette.textInactive},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t,isSchemeDark:r}=e;return(0,Z.css)(["rgb(from "," r g b / 0%) 0%,rgb(from "," r g b / 50%) 50%,rgb(from "," r g b / 100%) 100%"],r?t.palette.background3:t.palette.background1,r?t.palette.background3:t.palette.background1,t.palette.background5)},e=>{let{theme:t}=e;return t.radius.small},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t,isSchemeDark:r}=e;return r?t.palette.background5:t.palette.background3},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t,isSchemeDark:r}=e;return r?t.palette.background6:t.palette.background5},e=>{let{theme:t,isSchemeDark:r}=e;return r?t.palette.background5:t.palette.background3},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!1)},e=>{let{theme:t}=e;return t.palette.inputFocused},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!0)},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!1,!1)},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!0)},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!1)},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!1)},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!1,!1)},e=>{let{theme:t,isSchemeDark:r}=e;return(0,U.u)(t,r,!0,!0)},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t,isSchemeDark:r}=e;return r?t.palette.background5:t.palette.background3},e=>{let{theme:t}=e;return t.radius.small},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.palette.inputFocused},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.background3},e=>{let{scheme:t}=e;return t===o.ColorScheme.dark?"invert(100%)":"unset"}),Y=()=>{let e=(0,i.v9)(s.E0),t=(0,i.v9)(d.z_),{isSchemeDark:r}=(0,g.Z)();return(0,n.jsx)(J,{scheme:e===o.ColorScheme.dark?o.ColorScheme.dark:o.ColorScheme.light,isWindows:t,isSchemeDark:r})};var H=e=>(N(),(0,n.jsx)(u._9,{children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(Y,{}),(0,n.jsx)(l.ZP,{...e})]})}))},8100:function(e,t,r){r.d(t,{Q:function(){return d}});var a=/\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i,n=/[^\s:–—-]+|./g,i=/\s/,o=/.(?=[A-Z]|\..)/,l=/[A-Za-z0-9\u00C0-\u00FF]/;function d(e){for(var t,r="";null!==(t=n.exec(e));){var d=t[0],s=t.index;if(!o.test(d)&&(!a.test(d)||0===s||s+d.length===e.length)&&(":"!==e.charAt(s+d.length)||i.test(e.charAt(s+d.length+1)))){r+=d.replace(l,function(e){return e.toUpperCase()});continue}r+=d}return r}},851:function(e,t,r){r.d(t,{_:function(){return a}});function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}}}]);
//# sourceMappingURL=279.0b107e90ae54f670.js.map