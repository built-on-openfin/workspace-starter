(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{9341:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookmark-dialog",function(){return r(1565)}])},643:function(e,t,r){"use strict";var n=r(4246);r(7378);var a=r(5191),o=r(4861);let l=a.default.button.withConfig({componentId:"sc-4f0d3ffc-0"})(["position:absolute;background:transparent;right:",";border-radius:",";svg path{color:",";}&:hover{background:",";svg path{color:",";}}"],e=>{let{theme:t,isEnterprise:r}=e;return!0===r?t.px.small:t.px.large},e=>{let{theme:t}=e;return t.radius.small},e=>{let{theme:t}=e;return t.palette.textHelp},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.textDefault});t.Z=e=>{let{onAction:t,isEnterprise:r}=e;return(0,n.jsx)(l,{isEnterprise:r,onClick:()=>t({name:"close-button"}),"aria-label":"close-button",type:"button",children:(0,n.jsx)(o.Icon,{icon:"Cross2Icon",size:"base"})})}},9221:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});let n="10px"},5633:function(e,t,r){"use strict";r.d(t,{K:function(){return s},a:function(){return u}});var n=r(8751),a=r(1610),o=r(8615),l=r(5401),i=r(5660);let u=(e,t,r)=>e.reduce((e,a)=>{let o=a.title===i.L0,u=a.title===i.DO;return e.push({type:n.UI.Checkbox,label:(0,i.YP)(a.title),checked:t===a.id,data:{type:l.FS.Move,folderId:a.id}}),((null==r?void 0:r.afterAllBookmarks)&&o||(null==r?void 0:r.afterFavorites)&&u)&&e.push({type:"separator"}),e},[]),d=async(e,t)=>{let r=(0,o.a)().Browser.wrapSync(e),n=await r._bookmarks._getBookmarkNode();return u((0,i.lt)(n),t,{afterAllBookmarks:!0,afterFavorites:!0})},s=async(e,t)=>{var r;let u=(0,o.a)().Browser.wrapSync(e),s=await u._bookmarks._getBookmarkNode(t);return(null===(r=s.url)||void 0===r?void 0:r.startsWith(i.zh))?[{type:n.UI.Label,label:(0,a.t)("global.delete"),data:{type:l.FS.Delete}}]:[{type:n.UI.Label,label:(0,a.t)("bookmarks.editName"),data:{type:l.FS.EditName}},...s.url?[{type:n.UI.Submenu,label:(0,a.t)("bookmarks.move"),submenu:await d(e,s.parentId)}]:[],{type:n.UI.Separator,data:void 0},{type:n.UI.Label,label:(0,a.t)("global.delete"),data:{type:l.FS.Delete}}]}},5660:function(e,t,r){"use strict";r.d(t,{DO:function(){return l},L0:function(){return o},YP:function(){return u},Z5:function(){return f},aB:function(){return s},lE:function(){return d},lt:function(){return p},zh:function(){return i}});var n=r(1610),a=r(8615);let o="_ALL_BOOKMARKS_",l="_FAVORITES_",i="dock-favorite-bookmark:",u=e=>{switch(e){case o:return(0,n.t)("bookmarks.allBookmarks");case l:return(0,n.t)("bookmarks.favorites");default:return e}},d=(e,t)=>e.reduce((e,r)=>(r.parentId===t?e.bookmarksInFolder.push(r):e.bookmarksOutsideFolder.push(r),e),{bookmarksInFolder:[],bookmarksOutsideFolder:[]}),s=(e,t)=>e.url||e.title!==o?t.url||t.title!==o?e.url||e.title!==l?t.url||t.title!==l?!e.url&&t.url?-1:e.url&&!t.url?1:t.dateCreated-e.dateCreated:1:-1:1:-1,c=e=>e.reduce((e,t)=>(t.url||e.push({id:t.id,title:t.title}),t.children&&e.push(...c(t.children)),e),[]).sort(s),p=e=>c([e]),f=async(e,t)=>{let r=await t.getInfo(),n=r.favicons.length?r.favicons[0]:"",o=(0,a.a)().Browser.wrapSync(fin.Window.getCurrentSync().identity),l=await o._bookmarks._searchBookmarkNodes(e);if(!l.length){console.debug("consolidate icon: bookmark not found");return}await o._bookmarks._updateBookmarkNode({id:l[0].id,changes:{favIcon:n}}),console.debug("consolidate icon update: bookmark ".concat(e," updated with icon"),n),await (0,a.a)()._refreshBookmarksInternal()}},7769:function(e,t,r){"use strict";r.d(t,{h:function(){return a},t:function(){return o}});var n=r(8615);let a=async()=>{let e=(0,n.a)(),t=fin.View.wrapSync(fin.me.identity),r=await t.getCurrentWindow();return e.Browser.wrapSync(r.identity)},o=async e=>(0,n.a)().Browser.wrapSync(null!=e?e:fin.me.identity)},264:function(e,t,r){"use strict";function n(e){return e?e.replace(/^(?:https?:\/\/)?(?:www\.)?/,"").replace(/\/+/g,"/").replace(/\/$/,""):e}r.d(t,{p:function(){return n}})},1272:function(e,t,r){"use strict";r.d(t,{$k:function(){return b},VX:function(){return c},_$:function(){return k},b7:function(){return u},iD:function(){return d},o2:function(){return f},uH:function(){return p},wC:function(){return m}});var n=r(7769),a=r(264),o=r(5802),l=r(1610),i=r(8615);let u=40,d=33,s=e=>({id:e.id,url:e.url,type:"website",icon:e.icon,title:e.title}),c=async()=>{let e=(0,i.a)().Browser.wrapSync(o.Gi),t=await e._getRecentlyVisitedSites(),r=[];return t.forEach(e=>{r.push(s(e))}),r},p=e=>{let{host:t,pathname:r,hash:n,search:a}=new URL(e),[o,...l]=r.split("/").filter(e=>e.length);return l.length?"".concat(t,"/").concat(o,"/…"):"".concat(t).concat("/"===r?"":r).concat(a).concat(n)},f=(e,t)=>{let{type:r,subTitle:n}=e;if(n)return n;if("website"===r){let{url:r}=e;return t(r)}return"page"===r?(0,l.t)("global.supertab"):"collection"===r?"Collection":(null==r?void 0:r.charAt(0).toUpperCase())+(null==r?void 0:r.slice(1))},m=(e,t)=>e.length>t?"".concat(e.substring(0,t).trim(),"…"):e,k=async(e,t,r)=>{if(!e){r(!1);return}let n=await e.getInfo();r((0,a.p)(n.url)===t)},b=async(e,t)=>{let r=await (0,n.t)(t);return(await r._bookmarks._searchBookmarkNodes((0,a.p)(e))).filter(t=>(0,a.p)(t.url)===(0,a.p)(e))[0]}},7548:function(e,t,r){"use strict";r.d(t,{h:function(){return p},v:function(){return c}});var n=r(4246);r(7378);var a=r(5191),o=r(4861);let l=(0,a.css)(["background-color:",";border:unset;&:hover{background-color:#cc3939;}"],e=>{let{theme:t}=e;return t.palette.statusCritical}),i=(0,a.css)(["background-color:",";border:1px solid ",";color:",";&:hover{background-color:",";}"],e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.palette.background2}),u=(0,a.css)(["background-color:",";&:hover{background-color:",";filter:brightness(1.25);}"],e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary}),d=(0,a.default)(o.Button).withConfig({componentId:"sc-63609882-0"})(["cursor:'default' !important;padding:"," ",";&:focus{border:1px solid ",";}",";"],e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.inputFocused},e=>{let{variant:t}=e;switch(t){case"critical":return l;case"outline":return i;case"submit":return u}}),s=e=>{let{label:t,id:r,type:a,variant:o,disabled:l,onAction:i,dataTestId:u}=e;return(0,n.jsx)(d,{type:"primary"===a?"submit":"button",kind:a,variant:null!=o?o:"primary"===a?"submit":"outline",label:t,"aria-label":t,"data-testid":u,"data-id":r,onClick:"primary"===a?void 0:()=>i({name:r}),disabled:"primary"===a&&l})},c=(0,a.default)(o.Box).withConfig({componentId:"sc-5ab4c193-0"})(["margin-top:",";justify-content:space-between;padding:0 "," "," ",";"],e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),p=e=>{let{buttons:t,align:r,gap:a,hasError:l,onAction:i}=e;return(0,n.jsx)(o.Box,{gap:null!=a?a:"small",role:"group","aria-label":r,children:(t||[]).map(e=>(0,n.jsx)(s,{disabled:l,onAction:i,...e},e.id))})}},3325:function(e,t,r){"use strict";r.d(t,{i:function(){return a}});var n=r(7378);let a=(e,t)=>{let r=(0,n.useRef)();r.current=(0,n.useCallback)(async()=>{e||(t&&t(),await fin.me.hide())},[e,t]),(0,n.useEffect)(()=>{let e=async()=>{r.current&&r.current()};return(async()=>{await fin.me.on("blurred",e),await fin.me.on("hidden",e)})(),()=>{fin.me.removeListener("blurred",e),fin.me.removeListener("hidden",e)}},[])}},6774:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(7378),a=r(1171);let o=()=>{let[e,t]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{t(await (0,a.O)())})()},[]),e}},2320:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7378),a=r(1230),o=r(5802);let l=(e,t,r,l)=>{let i=(0,n.useRef)(null),[u,d]=(0,n.useState)(null),s=(0,n.useCallback)(async e=>{let t=fin.me;await t.isShowing()&&e.type!==a.Yo.ZoomControls&&await t.blur(),d(e)},[]),c=(0,n.useCallback)(async t=>{if(!u)return;let n=fin.Window.wrapSync({name:e,uuid:fin.me.uuid}),s=fin.Window.wrapSync(u.parentIdentity);if(await n.updateOptions({experimental:{parentIdentity:u.parentIdentity}}),await n.prependOnceListener("hidden",async()=>{u.parentIdentity.name!==o.IA.EnterpriseBookmarkDialogWindow&&await n.updateOptions({experimental:{parentIdentity:{uuid:"__NON_EXISTENT",name:"__NON_EXISTENT"}}})}),r){await r(t);return}try{var c,p,f;let{height:r,width:n,top:o,left:m}=t;fin.me.once("blurred",()=>d(null));let k=await s.showPopupWindow({name:e,resultDispatchBehavior:"hide",blurBehavior:null!==(p=null==l?void 0:l.blurBehavior)&&void 0!==p?p:"hide",hideOnClose:!0,focus:!0,height:r,width:n,x:m,y:o,additionalOptions:{alwaysOnTop:!0,contextMenuOptions:{enabled:!0,template:["inspect"]}}}),b="requestId"in u&&(u.type===a.Yo.ContextMenu||u.type===a.Yo.GlobalMenu)?"response-".concat(u.requestId):"response";await (null===(c=i.current)||void 0===c?void 0:c.dispatch(u.responseIdentity,b,k)),(null==l?void 0:l.forwardTopicName)&&(null===(f=i.current)||void 0===f||f.publish(l.forwardTopicName,k))}catch(e){console.error("Error showing popup:",e)}},[u]),p=(0,n.useCallback)(async e=>{try{if(null==l?void 0:l.dispatchDirectlyToChannel){if(u){var t,r;await (null===(t=i.current)||void 0===t?void 0:t.dispatch(u.responseIdentity,"response",e)),l.forwardTopicName&&Promise.all(null===(r=i.current)||void 0===r?void 0:r.publish(l.forwardTopicName,e)).catch(()=>{})}("cancel"===e.type||"dropdown-blurred"===e.type)&&d(null)}else await (0,o.lQ)().dispatchPopupResult(e),u&&(fin.Window.wrapSync(u.parentIdentity).focus(),d(null))}catch(e){console.error("Error handling response:",e)}},[u]);return(0,n.useEffect)(()=>{let e=async()=>{let e=await t();e.register("open",s),i.current=e};try{e()}catch(e){console.error("Error setting up channel:",e)}return()=>{i.current&&(i.current.destroy(),i.current=null)}},[s,t]),{channelRef:i,payload:u,showPopup:c,onResponse:p}}},1565:function(e,t,r){"use strict";r.r(t),r.d(t,{BookmarkDialogPopup:function(){return L},default:function(){return Y}});var n=r(4246),a=r(7378),o=r(6677),l=r(7885),i=r(9894),u=r(5802),d=r(8191),s=r(5191),c=r(4861),p=r(5633),f=r(5660),m=r(643),k=r(7769),b=r(6596),h=r(1610),w=r(1272);let g=(e,t,r,n,o)=>{let{t:l}=(0,h.$G)(),[i,u]=(0,a.useState)(!1),[d,s]=(0,a.useState)(),[c,p]=(0,a.useState)({title:"",folderId:"",favIcon:""}),[m,g]=(0,a.useState)(""),[y,v]=(0,a.useState)();(0,a.useEffect)(()=>{(async()=>{if(!(null==e?void 0:e.selectedViewIdentity))return;let n=fin.View.wrapSync(e.selectedViewIdentity),a=await n.getInfo(),l=a.title,i=a.favicons[0],d=a.url,c=(await n.getCurrentWindow()).identity,f=await (0,w.$k)(d,c);if(!f){u(!0);let e=await (0,k.t)(c);f=await e._bookmarks._createBookmarkNode({url:d,title:l,favIcon:i,parentId:null==r?void 0:r.id}),t({type:"bookmark-created"})}v(c),s(f),p({title:f.title,folderId:f.parentId,favIcon:i}),g(f.parentId),null==o||o.current.select()})()},[e,null==r?void 0:r.id,t,o]);let x=(0,a.useCallback)(()=>{p({title:"",folderId:"",favIcon:""}),s(void 0),u(!1),t&&t({type:"cancel"})},[t]),I=(0,a.useCallback)(()=>{let e=null==n?void 0:n.find(e=>e.id===c.folderId);e&&(i||m!==c.folderId)&&(0,b.s$)({message:l(i?"bookmarks.bookmarkAddedTitle":"bookmarks.bookmarkEditedTitle"),parentBrowserName:y.name,secondaryMessage:l("bookmarks.bookmarkAddedToFolder",{folderName:(0,f.YP)(null==e?void 0:e.title)}),icon:"BookmarkFilled"})},[n,y,c.folderId,m,i,l]),C=(0,a.useCallback)(async()=>{if(!d)return;let e=await (0,k.t)(y);await e._bookmarks._updateBookmarkNode({id:d.id,changes:{title:c.title,parentId:c.folderId}}),I(),t&&t({type:"bookmark-updated"}),x()},[null==d?void 0:d.id,c.title,c.favIcon,c.folderId,t,x,m]),B=(0,a.useCallback)(async()=>{let e=await (0,k.t)();d&&(await e._bookmarks._deleteBookmarkNode(d.id),t&&t({type:"bookmark-removed"})),x()},[d,t,x]);return(0,a.useMemo)(()=>({title:c.title,setTitle:e=>{p(t=>({...t,title:e}))},folderId:c.folderId,setFolderId:e=>{p(t=>({...t,folderId:e}))},saveBookmark:C,removeBookmark:B,resetForm:x,isNewBookmark:i}),[c.title,c.folderId,C,B,x,i])};var y=r(7548),v=r(9221),x=r(6676);let I=e=>{let[t,r]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let t=()=>{(0,k.t)().then(async e=>e._bookmarks._getBookmarkNode().then(e=>r((0,f.lt)(e))))};t(),(async()=>{(null==e?void 0:e.current)&&e.current.register(x.yz.RefreshBookmarksInternal,t)})()},[null==e?void 0:e.current]),t};var C=r(1230),B=r(9055);let _=(e,t,r,n)=>{let[o,i]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),s=(0,a.useRef)(null);return(0,a.useEffect)(()=>((async()=>{s.current||(s.current=await (0,l.gv)(),d(!0))})(),()=>{s.current&&(s.current.disconnect(),s.current=null,d(!1))}),[]),(0,a.useEffect)(()=>{if(u){var e;return null===(e=s.current)||void 0===e||e.register("response",e=>{"dropdown-blurred"!==e.type||(n?n():document.hasFocus()||(fin.me.focus(),fin.me.hide())),"value-changed"===e.type&&r(e.data),fin.me.focus(),i(!1)}),()=>{s.current&&s.current.remove("response")}}},[u,r,n]),{isShown:o,showDropdown:(0,a.useCallback)(async()=>{var r;if(!e.current||!u)return;i(!0);let n=await (await fin.Window.getCurrent()).getBounds(),a=e.current.getBoundingClientRect();await (null===(r=s.current)||void 0===r?void 0:r.dispatch("open",{parentIdentity:fin.me.identity,type:C.Yo.DropdownMenu,anchorBehavior:B.Kn.Center,responseIdentity:fin.me.identity,x:n.left+a.left,y:n.top+a.top+a.height+5,payload:{template:t,width:a.width}}))},[e,t,u])}};var S=r(3325),E=r(6774);let N=e=>{let{showPopup:t,messageData:r,onResponse:o,channelRef:l}=e,{t:i}=(0,d.$G)(),u=(0,E.C)(),s=(0,a.useRef)(),k=(0,a.useRef)(),b=(0,a.useRef)(),h=null==r?void 0:r.payload,w=I(l),v=g(h,o,w[0],w,k),{selectedFolder:x,menuTemplate:C}=(0,a.useMemo)(()=>{var e;let t=null!==(e=w.find(e=>e.id===v.folderId))&&void 0!==e?e:w[0],r=(0,p.a)(w,null==t?void 0:t.id,{afterFavorites:!0});return{selectedFolder:t,menuTemplate:r}},[w,v.folderId]),{showDropdown:B,isShown:N}=_(b,C,e=>{let{folderId:t}=e;return v.setFolderId(t)});(0,a.useEffect)(()=>{r&&(async()=>{let{x:e,y:n}=r,{height:a,width:o}=s.current.getBoundingClientRect();t({height:a,width:o,left:e,top:n})})()},[r,t]),(0,a.useEffect)(()=>{b.current&&(b.current.type="button",b.current.style.cursor="default")},[b]);let A=async e=>{"remove"===e.name&&(await v.removeBookmark(),fin.me.hide())},z=async()=>{await v.saveBookmark(),o&&o({type:"cancel"}),fin.me.hide()},W=async e=>{e.preventDefault(),await v.saveBookmark(),fin.me.hide()};return(0,S.i)(N,z),(0,n.jsxs)(j,{ref:s,isWindows:u,children:[(0,n.jsx)(m.Z,{onAction:z}),(0,n.jsx)(F,{children:i(r&&v.isNewBookmark?"bookmarks.bookmarkAdded":"bookmarks.editBookmark")}),(0,n.jsxs)("form",{onSubmit:W,children:[(0,n.jsxs)(D,{children:[(0,n.jsx)(T,{htmlFor:"name-input",children:"Name"}),(0,n.jsx)(O,{id:"name-input",ref:k,value:null==v?void 0:v.title,onChange:e=>v.setTitle(e.target.value)})]}),(0,n.jsxs)(D,{applyBottomPadding:!0,children:[(0,n.jsx)(T,{htmlFor:"folder-dropdown",children:"Folder"}),(0,n.jsx)(R,{children:(0,n.jsx)(c.DropdownButton,{ref:b,expanded:N,handleClick:()=>!N&&B(),placeholder:(0,f.YP)(null==x?void 0:x.title),name:"folder-dropdown"})})]}),(0,n.jsx)(P,{role:"group","aria-label":"buttons",children:(0,n.jsx)(y.h,{align:"right",gap:"base",buttons:[{label:i("bookmarks.remove"),type:"secondary",id:"remove",variant:"outline"},{label:i("bookmarks.done"),type:"primary",id:"done",variant:"submit"}],hasError:!1,onAction:A})})]})]})},j=s.default.div.withConfig({componentId:"sc-d79bd786-0"})(["width:320px;height:216px;flex-direction:column;padding:",";row-gap:",";background-color:",";border:1px solid ",";",""],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background5},e=>{let{isWindows:t}=e;return!t&&(0,s.css)(["border-radius:",";box-shadow:none;"],v.Y)}),F=(0,s.default)(c.H2).withConfig({componentId:"sc-d79bd786-1"})(["display:flex;align-items:center;justify-content:flex-start;font-size:",";line-height:1.5;"],e=>{let{theme:t}=e;return t.fontSize.xlarge}),T=s.default.label.withConfig({componentId:"sc-d79bd786-2"})(["color:",";font-size:",";"],e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontSize.large}),D=s.default.div.withConfig({componentId:"sc-d79bd786-3"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-top:",";padding-bottom:",";"],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t,applyBottomPadding:r}=e;return r?t.px.large:"0px"}),O=(0,s.default)(c.TextInput).withConfig({componentId:"sc-d79bd786-4"})(["height:",";width:","px;color:",";font-size:",";background-color:",";box-shadow:unset;"],e=>{let{theme:t}=e;return t.px.xxxlarge},220,e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontSize.large},e=>{let{theme:t}=e;return t.palette.background3}),R=s.default.div.withConfig({componentId:"sc-d79bd786-5"})(["width:","px !important;button{height:",";background-color:",";span{color:",";font-size:",";}}"],220,e=>{let{theme:t}=e;return t.px.xxxlarge},e=>{let{theme:t}=e;return t.palette.background3},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontSize.large}),P=s.default.div.withConfig({componentId:"sc-d79bd786-6"})(["padding-top:",";border-top:1px solid ",";margin-left:-",";margin-right:-",";padding-right:",";padding-left:",";div{float:right;}"],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.palette.background5},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large});var A=r(2228),z=r(328),W=r(2320);let L=()=>{let e=(0,a.useCallback)(async e=>{let t=fin.me;await t.setBounds(await (0,i.nt)(e)),await t.show(),await t.bringToFront(),await t.focus()},[]),{channelRef:t,payload:r,showPopup:o,onResponse:d}=(0,W.C)(u.IA.EnterpriseBookmarkDialogWindow,l.nt,e,{dispatchDirectlyToChannel:!0,forwardTopicName:"bookmark-dialog-action"});return(0,n.jsx)(A.Z,{children:(0,n.jsx)(z.B6.Provider,{value:{isEnterprise:!0},children:(0,n.jsx)(N,{channelRef:t,messageData:r,showPopup:o,onResponse:d})})})};var Y=(0,o.withRouter)(L)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9341)}),_N_E=e.O()}]);
//# sourceMappingURL=bookmark-dialog-fb21f2d12d60c276.js.map