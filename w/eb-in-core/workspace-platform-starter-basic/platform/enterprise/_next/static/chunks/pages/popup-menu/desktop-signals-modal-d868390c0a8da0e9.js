(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{3277:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/popup-menu/desktop-signals-modal",function(){return n(9811)}])},9811:function(e,t,n){"use strict";n.r(t),n.d(t,{DesktopSignalsModal:function(){return k},default:function(){return X}});var r=n(4246),o=n(7378),l=n(5191),i=n(4861),a=n(9869),s=n(5802),c=n(4201),d=n(1542);let p=Array.from(a.a.entries()),u=(0,l.default)(i.Box).withConfig({componentId:"sc-2fa895b-0"})(["position:relative;display:inline-block;"]),h=(0,l.default)(e=>{let{className:t,isOpen:n}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:t,style:{transform:n?"rotate(180deg)":"none"},children:(0,r.jsx)("path",{d:"M8.687 4.653a.75.75 0 0 1 1.027 1.094l-3.2 3a.75.75 0 0 1-1.026 0l-3.2-3a.75.75 0 1 1 1.025-1.094L6 7.172z",className:"icon-path"})})}).withConfig({componentId:"sc-2fa895b-1"})(["& > .icon-path{fill:",";}transition:transform 0.2s ease-in-out;"],e=>{let{theme:t}=e;return t.palette.textDefault}),x=(0,l.default)(i.Button).withConfig({componentId:"sc-2fa895b-2"})(["height:24px;min-width:48px;border-radius:4px;font-weight:500;padding:",";color:",";justify-content:center;align-items:center;gap:4px;background-color:transparent !important;border:0 none !important;"],e=>{let{theme:t}=e;return"".concat(t.px.xsmall," ").concat(t.px.small)},e=>{let{theme:t}=e;return t.palette.textDefault}),f=(0,l.default)(i.Box).withConfig({componentId:"sc-2fa895b-3"})(["position:fixed;flex-direction:row;align-items:center;border-radius:4px;border:1px solid ",";background:",";box-shadow:-0.5px -0.5px 1px 0 #78797a inset,0.5px 0.5px 1px 0 #78797a inset,0 0 20px 0 rgba(0,0,0,0.15);backdrop-filter:blur(40px);padding:",";gap:",";z-index:9999;"],e=>{let{theme:t}=e;return t.palette.background3},e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.small}),g=(0,l.default)(i.Button).withConfig({componentId:"sc-2fa895b-4"})(["border-radius:4px;color:",";border:"," !important;width:16px;height:16px;padding:0;margin:0;gap:0;justify-content:center;background-color:"," !important;"],e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{isUnlink:t,theme:n}=e;return t?"1px solid ".concat(n.palette.background3):"0 none"},e=>{let{color:t,isSelected:n}=e;return n?"transparent":t}),m=(0,l.default)(e=>{let{color:t,...n}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...n,children:(0,r.jsx)("path",{d:"M13 0a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3zm-.723 3.905a.75.75 0 0 0-1.038.218L7.187 10.32 4.905 8.245l-.06-.049a.75.75 0 0 0-1.003 1.105l.054.053 2.933 2.668a.75.75 0 0 0 1.133-.145l4.533-6.934a.75.75 0 0 0-.218-1.038",fill:t})})}).withConfig({componentId:"sc-2fa895b-5"})([""]),b=(0,l.default)(e=>{let{className:t}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:t,children:(0,r.jsx)("path",{d:"M10.046 1.247a.5.5 0 0 1 .707.707l-8.8 8.8a.5.5 0 0 1-.707-.707zm.654 2.705c.27.306.464.678.55 1.093.051.248.049.535.049.956s.002.708-.049.956c-.201.969-.985 1.71-1.967 1.897-.251.048-.543.046-.984.046h-.7a.5.5 0 0 1 0-1h.7c.487 0 .662-.001.797-.027.604-.116 1.06-.566 1.175-1.12.026-.122.028-.282.028-.752s-.002-.631-.027-.754a1.4 1.4 0 0 0-.28-.586zM4.5 3.11a.5.5 0 0 1 0 .98l-.1.01h-.7c-.488 0-.663.003-.798.029-.604.116-1.06.565-1.174 1.118-.026.123-.029.283-.029.754 0 .47.003.63.029.753.044.216.142.416.279.587l-.708.709a2.4 2.4 0 0 1-.55-1.093C.696 6.709.698 6.422.698 6s-.002-.708.05-.956c.2-.97.984-1.71 1.966-1.899.251-.048.543-.046.984-.046h.7z",fill:"currentColor",opacity:".9"})})}).withConfig({componentId:"sc-2fa895b-6"})(["& > .icon-path{fill:",";}"],e=>{let{theme:t}=e;return t.palette.textDefault});var w=e=>{let{value:t,onChange:n,disabled:l}=e,[i,s]=(0,o.useState)(!1),c=(0,o.useRef)(null),w=(0,o.useRef)(null),[C,j]=(0,o.useState)({top:0,right:0});(0,o.useEffect)(()=>{let e=()=>{if(w.current){let e=w.current.getBoundingClientRect();j({top:e.bottom+2,right:window.innerWidth-e.right})}},t=e=>{c.current&&w.current&&!c.current.contains(e.target)&&!w.current.contains(e.target)&&s(!1)};return i&&(e(),document.addEventListener("mousedown",t),window.addEventListener("resize",e),window.addEventListener("scroll",e)),()=>{document.removeEventListener("mousedown",t),window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[i]);let k=e=>{n(e),s(!1)},v=a.a.get(t)||{name:"None"};return(0,r.jsxs)(u,{ref:w,children:[(0,r.jsxs)(x,{disabled:l,onClick:()=>{s(!i)},children:[v.name,(0,r.jsx)(h,{isOpen:i})]}),i&&(0,d.createPortal)((0,r.jsxs)(f,{ref:c,style:{top:"".concat(C.top,"px"),right:"".concat(C.right,"px")},children:[p.map(e=>{let[n,o]=e;return(0,r.jsx)(g,{disabled:l,onClick:()=>k(n),color:o.color,isSelected:t===n,children:t===n&&(0,r.jsx)(m,{color:o.color})},n)}),(0,r.jsx)(g,{onClick:()=>k("none"),color:"transparent",isSelected:"none"===t||!t,isUnlink:!0,children:(0,r.jsx)(b,{})})]}),document.body)]})};let C=(0,l.default)(e=>{let{className:t}=e;return(0,r.jsxs)("svg",{width:"60",height:"65",viewBox:"0 0 60 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.457 1.403a6.346 6.346 0 0 1 6.346 6.343v36.662a6.346 6.346 0 0 1-6.346 6.346H26.213L9.376 63.179l.196-12.425H1.196V7.746a6.344 6.344 0 0 1 6.343-6.343zM17.749 14.56a5.445 5.445 0 1 0 .003 10.89 5.445 5.445 0 0 0-.003-10.89Zm24.504 0a5.445 5.445 0 1 0-.002 10.89 5.445 5.445 0 0 0 .002-10.89Z",fillOpacity:".16",strokeWidth:"1.35",className:"icon-path1"}),(0,r.jsx)("path",{d:"M45.629 42.205a.68.68 0 0 1-.482-.2c-8.487-8.487-21.785-8.487-30.273 0a.681.681 0 0 1-.962-.963c9.026-9.026 23.17-9.026 32.199 0a.681.681 0 0 1-.482 1.163",className:"icon-path2"})]})}).withConfig({componentId:"sc-4a3e516c-0"})(["& > .icon-path1{fill:",";stroke:",";}& > .icon-path2{fill:",";}"],e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary}),j=()=>{let e=(0,o.useRef)(null),[t,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)(!0),[i,a]=(0,o.useState)([]),[s,c]=(0,o.useState)([]),[d,p]=(0,o.useState)([]),u=e=>{Array.isArray(e)?(a(e),c(e),p([])):console.error("Invalid payload received for desktop app signals:",e)},h=(0,o.useCallback)((e,t)=>{if(!i.some(t=>t.appKey===e)){console.error("Provider with id ".concat(e," not found"));return}c(n=>n.map(n=>n.appKey===e?{...n,selectedColorChannel:t}:n));let n=i.find(t=>t.appKey===e),r=null==n?void 0:n.selectedColorChannel;p(n=>{let o=n.filter(t=>t.appKey!==e);return t===r?o:[...o,{appKey:e,selectedColorChannel:t}]})},[i]),x=(0,o.useCallback)(async()=>{if(t&&d.length>0){try{var n;await (null===(n=e.current)||void 0===n?void 0:n.dispatch("set-desktop-app-signals",s.map(e=>({appKey:e.appKey,selectedColorChannel:e.selectedColorChannel})))),a(s)}catch(e){return console.error("Failed to save desktop app signals:",e),!1}p([])}return!0},[d,t,s]);return(0,o.useEffect)(()=>{t&&(async()=>{var t;u(await (null===(t=e.current)||void 0===t?void 0:t.dispatch("get-desktop-app-signals"))),l(!1)})()},[t]),(0,o.useEffect)(()=>((async()=>{e.current||(e.current=await fin.InterApplicationBus.Channel.connect("".concat(fin.me.identity.uuid).concat("-enterprise-component-bridge"),{wait:!0}),e.current.setDefaultAction(()=>!1),n(!0))})(),()=>{e.current&&(e.current.disconnect(),e.current=null)}),[]),{isLoading:r,desktopAppSignals:s,pendingUpdates:d,setColorChannel:h,saveChanges:x}},k=()=>{let{isLoading:e,desktopAppSignals:t,pendingUpdates:n,setColorChannel:l,saveChanges:a}=j(),[d,p]=(0,o.useState)(!1),u=(0,o.useRef)(null);(0,o.useEffect)(()=>{u.current&&(async()=>{let n=await fin.me.getBounds(),r=0!==t.length||e?Math.max(240,Math.min(484,63*t.length+150)):360;n.height!==r&&await fin.me.setBounds({top:n.top+Math.round((n.height-r)/2),height:r})})()},[t.length,e]);let h=(e,t)=>{l(e,t)},x=()=>{(0,s.lQ)().close()},f=async()=>{p(!0);let e=(0,s.lQ)();await e.updateOptions({customContext:"submitting"}),await a()||console.error("Error saving desktop signals"),e.close()};return(0,r.jsxs)(v,{ref:u,children:[(0,r.jsxs)(y,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(S,{size:"xlarge",weight:"bold",children:"Manage Desktop Signals"}),(0,r.jsx)(E,{size:"large",children:"Select a color channel for sharing Signals with running desktop apps."})]}),(0,r.jsx)(B,{children:(0,r.jsx)(z,{onClick:x,children:"\xd7"})})]}),(0,r.jsx)(D,{children:e?(0,r.jsxs)(N,{children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)(i.Text,{size:"large",children:"Fetching Data..."})]}):0===t.length?(0,r.jsxs)(M,{children:[(0,r.jsx)(_,{children:(0,r.jsx)(C,{})}),(0,r.jsxs)(L,{children:[(0,r.jsx)(R,{size:"large",children:"No desktop apps configured for Signals"}),(0,r.jsx)(T,{size:"base",children:"Contact your administrator to learn more."})]})]}):(0,r.jsx)(P,{children:t.map((e,n)=>(0,r.jsxs)(K,{isLastItem:n===t.length-1,children:[(0,r.jsx)(H,{color:e.selectedColorChannel||"none"}),(0,r.jsx)(A,{children:e.icon?(0,r.jsx)(O,{src:e.icon,alt:e.title}):(0,r.jsx)(Z,{children:e.title[0]})}),(0,r.jsx)(W,{children:e.title}),(0,r.jsx)(w,{value:e.selectedColorChannel||"none",onChange:t=>h(e.appKey,t),disabled:d})]},"".concat(e.title,"-").concat(n)))})}),(0,r.jsxs)(F,{children:[(0,r.jsx)(Q,{size:"large",kind:"secondary",onClick:x,disabled:d,children:"Cancel"}),(0,r.jsx)(V,{size:"large",onClick:f,disabled:d||e||0===n.length,children:"Save"})]})]})},v=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-0"})(["flex-direction:column;background-color:",";height:100%;"],e=>{let{theme:t}=e;return t.palette.background1}),y=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-1"})(["flex-direction:row;align-items:flex-start;padding:",";align-self:stretch;"],e=>{let{theme:t}=e;return t.px.large}),I=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-2"})(["flex-direction:column;align-items:flex-start;gap:",";flex:1 0 0;"],e=>{let{theme:t}=e;return t.px.xsmall}),B=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-3"})(["flex-direction:row;justify-content:flex-end;align-items:flex-start;padding-left:",";"],e=>{let{theme:t}=e;return t.px.small}),S=(0,l.default)(i.Text).withConfig({componentId:"sc-8b17b78e-4"})(["line-height:",";color:",";"],e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.palette.textDefault}),z=l.default.span.withConfig({componentId:"sc-8b17b78e-5"})(["font-size:24px;cursor:pointer;line-height:1;color:",";"],e=>{let{theme:t}=e;return t.palette.textDefault}),E=(0,l.default)(i.Text).withConfig({componentId:"sc-8b17b78e-6"})(["color:",";line-height:",";"],e=>{let{theme:t}=e;return t.palette.textHelp},e=>{let{theme:t}=e;return t.px.xxlarge}),D=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-7"})(["flex-direction:column;align-items:flex-start;align-self:stretch;padding:0 ",";flex:1;overflow-y:auto;"],e=>{let{theme:t}=e;return t.px.large}),N=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-8"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;gap:16px;& > ","{font-weight:600;color:",";}"],i.Text,e=>{let{theme:t}=e;return t.palette.textDefault}),M=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-9"})(["flex-direction:column;align-items:center;align-self:stretch;padding:"," 0;gap:",";margin-bottom:",";"],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),_=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-10"})(["align-items:center;justify-content:center;padding:4px 6px 3px;"]),L=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-11"})(["flex-direction:column;align-items:center;padding:0 ",";"],e=>{let{theme:t}=e;return t.px.large}),R=(0,l.default)(i.Text).withConfig({componentId:"sc-8b17b78e-12"})(["font-size:",";line-height:",";color:",";"],e=>{let{theme:t}=e;return t.fontSize.large},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.palette.textDefault}),T=(0,l.default)(i.Text).withConfig({componentId:"sc-8b17b78e-13"})(["color:",";line-height:",";"],e=>{let{theme:t}=e;return t.palette.textHelp},e=>{let{theme:t}=e;return t.px.large}),P=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-14"})(["flex-direction:column;width:100%;gap:",";"],e=>{let{theme:t}=e;return t.px.small}),K=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-15"})(["flex-direction:row;align-items:center;padding:",";"," width:100%;"],e=>{let{theme:t}=e;return t.px.base},e=>{let{isLastItem:t,theme:n}=e;return!t&&"border-bottom: 1px solid ".concat(n.palette.background3,";")}),H=l.default.div.withConfig({componentId:"sc-8b17b78e-16"})(["width:4px;height:24px;background-color:",";margin-right:",";border-radius:2px;"],e=>{var t;return(null===(t=a.a.get(e.color))||void 0===t?void 0:t.color)||"transparent"},e=>{let{theme:t}=e;return t.px.small}),A=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-17"})(["width:24px;height:24px;align-items:center;justify-content:center;margin-right:",";border-radius:4px;overflow:hidden;"],e=>{let{theme:t}=e;return t.px.base}),O=l.default.img.withConfig({componentId:"sc-8b17b78e-18"})(["width:24px;height:24px;"]),Z=l.default.div.withConfig({componentId:"sc-8b17b78e-19"})(["width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-weight:bold;color:",";"],e=>{let{theme:t}=e;return t.palette.textDefault}),W=l.default.div.withConfig({componentId:"sc-8b17b78e-20"})(["flex:1;color:",";font-size:",";"],e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontSize.large}),F=(0,l.default)(i.Box).withConfig({componentId:"sc-8b17b78e-21"})(["flex-direction:row;justify-content:flex-end;padding:",";gap:",";border-top:1px solid ",";"],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.background3}),Q=(0,l.default)(i.Button).withConfig({componentId:"sc-8b17b78e-22"})(["background-color:transparent;border-radius:4px;border:1px solid ",";color:",";padding:",";font-weight:500;min-width:48px;justify-content:center;align-items:center;&:hover{color:",";}}"],e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return"".concat(t.px.small," ").concat(t.px.base)},e=>{let{theme:t}=e;return t.palette.brandSecondaryText}),V=(0,l.default)(i.Button).withConfig({componentId:"sc-8b17b78e-23"})(["background-color:",";color:",";border:1px solid ",";border-radius:4px;padding:",";font-weight:500;min-width:48px;justify-content:center;align-items:center;"],e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimaryText},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return"".concat(t.px.small," ").concat(t.px.base)});var X=k},4201:function(e,t,n){"use strict";var r=n(4246);n(7378);let o=n(5191).default.svg.withConfig({componentId:"sc-53009a12-0"})(["width:","px;height:","px;stroke:",";"],e=>{let{size:t}=e;return t||16},e=>{let{size:t}=e;return t||16},e=>{let{theme:t}=e;return t.palette.textHelp});t.Z=e=>{let{size:t=16,thickness:n=1.5}=e;return(0,r.jsxs)(o,{size:t,strokeWidth:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("style",{children:"\n                .spinnerRotation {\n                    transform-origin: center;\n                    animation: rotateSpinner 2s linear infinite;\n                }\n                .spinnerRotation circle {\n                    stroke-linecap: round;\n                    stroke-width: ".concat(n,";\n                    animation: animateStroke 1.5s ease-in-out infinite;\n                }\n                @keyframes rotateSpinner {\n                    100% {\n                        transform: rotate(360deg);\n                    }\n                }\n                @keyframes animateStroke {\n                    0% {\n                        stroke-dasharray: 0 150;\n                        stroke-dashoffset: 0;\n                    }\n                    47.5% {\n                        stroke-dasharray: 42 150;\n                        stroke-dashoffset: -16;\n                    }\n                    95%, 100% {\n                        stroke-dasharray: 42 150;\n                        stroke-dashoffset: -59;\n                    }\n                }\n            ")}),(0,r.jsx)("g",{className:"spinnerRotation",children:(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9.5",fill:"none"})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3277)}),_N_E=e.O()}]);
//# sourceMappingURL=desktop-signals-modal-d868390c0a8da0e9.js.map