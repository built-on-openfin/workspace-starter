(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{838:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/popup-menu/intents-resolver-modal",function(){return n(3923)}])},9221:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});let r="10px"},7548:function(e,t,n){"use strict";n.d(t,{h:function(){return p},v:function(){return u}});var r=n(4246);n(7378);var l=n(5191),o=n(4861);let i=(0,l.css)(["background-color:",";border:unset;&:hover{background-color:#cc3939;}"],e=>{let{theme:t}=e;return t.palette.statusCritical}),a=(0,l.css)(["background-color:",";border:1px solid ",";color:",";&:hover{background-color:",";}"],e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.palette.background2}),s=(0,l.css)(["background-color:",";&:hover{background-color:",";filter:brightness(1.25);}"],e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary}),d=(0,l.default)(o.Button).withConfig({componentId:"sc-63609882-0"})(["cursor:'default' !important;padding:"," ",";&:focus{border:1px solid ",";}",";"],e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.inputFocused},e=>{let{variant:t}=e;switch(t){case"critical":return i;case"outline":return a;case"submit":return s}}),c=e=>{let{label:t,id:n,type:l,variant:o,disabled:i,onAction:a,dataTestId:s}=e;return(0,r.jsx)(d,{type:"primary"===l?"submit":"button",kind:l,variant:null!=o?o:"primary"===l?"submit":"outline",label:t,"aria-label":t,"data-testid":s,"data-id":n,onClick:"primary"===l?void 0:()=>a({name:n}),disabled:"primary"===l&&i})},u=(0,l.default)(o.Box).withConfig({componentId:"sc-5ab4c193-0"})(["margin-top:",";justify-content:space-between;padding:0 "," "," ",";"],e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),p=e=>{let{buttons:t,align:n,gap:l,hasError:i,onAction:a}=e;return(0,r.jsx)(o.Box,{gap:null!=l?l:"small",role:"group","aria-label":n,children:(t||[]).map(e=>(0,r.jsx)(c,{disabled:i,onAction:a,...e},e.id))})}},6774:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(7378),l=n(1171);let o=()=>{let[e,t]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{t(await (0,l.O)())})()},[]),e}},3923:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(4246),l=n(7378),o=n(802),i=n(1739),a=n(6931),s=n(5191),d=n(4861),c=n(7548),u=n(9221),p=n(6774);let g="above",x={title:"New Tab",value:""},f=e=>{let{options:t,onAppSelected:n,selectedApp:l}=e;return(0,r.jsx)(r.Fragment,{children:t.map(e=>(0,r.jsxs)(I,{selected:l.value.appId===e.value.appId,onClick:()=>n(e),children:[(0,r.jsx)(C,{children:e.value.icon?(0,r.jsx)("img",{src:e.value.icon,alt:e.value.icon}):(0,r.jsx)(_,{icon:"StackIcon"})}),(0,r.jsx)(E,{children:(0,r.jsx)(S,{children:e.value.name})})]},e.value.appId))})};function h(e,t){switch(t.type){case"setMenuOptions":return{selected:t.selected||t.options[0],options:t.options};case"setSelectedOption":return{...e,selected:t.selected};default:return e}}let m=e=>{var t;let{apps:n,intents:o,timeoutMs:i=45e3,preselected:a,onAction:s,invocationId:u}=e,[p,m]=(0,l.useReducer)(h,{options:[x]}),[b,v]=(0,l.useReducer)(h,{options:[]}),[w,y]=(0,l.useReducer)(h,{options:[]}),[k,I]=(0,l.useState)(Math.floor(i/1e3));(0,l.useEffect)(()=>{y({type:"setMenuOptions",options:(o||[]).map(e=>({title:e.displayName||e.name,value:e}))})},[o]),(0,l.useEffect)(()=>{if(w.options.length>0){var e;v({type:"setMenuOptions",options:(null===(e=w.selected)||void 0===e?void 0:e.value).apps.map(e=>({title:e.name,value:e}))})}else v({type:"setMenuOptions",options:n.map(e=>({title:e.name,value:e}))})},[n,w.selected,w.options]),(0,l.useEffect)(()=>{var e;let t=[x,...((null===(e=b.selected)||void 0===e?void 0:e.value.instances)||[]).map(e=>({title:e.instanceName,value:e.instanceId,iconUrl:e.icon}))],n=(null==a?void 0:a.instanceId)||x.value;m({type:"setMenuOptions",options:t,selected:t.find(e=>e.value===n)||t[0]})},[b,null==a?void 0:a.instanceId]),(0,l.useEffect)(()=>{console.info("Intent Picker Invocation ID changed to ".concat(u,". Resetting timer.")),I(Math.floor(i/1e3))},[u,i]),(0,l.useEffect)(()=>{if(k>0){let e=setTimeout(()=>{I(k-1)},1e3);return()=>clearTimeout(e)}k<=0&&s({type:"cancel"})},[k,s]);let C=(0,l.useCallback)(()=>{var e,t;s({type:"open",data:{appId:b.selected.value.appId,instanceId:(null===(e=p.selected)||void 0===e?void 0:e.value)||"",intentName:null===(t=w.selected)||void 0===t?void 0:t.value.name,rememberSelection:!1}})},[s,b,p,w]);(0,l.useEffect)(()=>{let e=e=>{"Enter"===e.key&&b.selected&&C()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[C,b.selected]);let E=e=>{"open"===e.name&&b.selected.value.appId?C():s({type:"cancel"})},S="210px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{children:(0,r.jsx)(f,{onAppSelected:e=>{v({type:"setSelectedOption",selected:e})},selectedApp:b.selected,options:b.options})}),(0,r.jsx)(O,{children:(0,r.jsx)(d.DropdownMenu,{label:"Open in:",onChange:e=>{m({type:"setSelectedOption",selected:e})},selected:p.selected,options:[p.options],menuPosition:g,maxHeight:S})}),w.options.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{}),(0,r.jsx)(O,{children:(0,r.jsx)(d.DropdownMenu,{label:"What would you like to do?",onChange:e=>{y({type:"setSelectedOption",selected:e})},selected:w.selected,options:[w.options],menuPosition:g,maxHeight:S})})]}),(0,r.jsx)(N,{className:"without-margin"}),(0,r.jsx)(M,{children:(0,r.jsxs)(z,{onSubmit:e=>{e.preventDefault(),b.selected&&E({name:"open"})},children:[(0,r.jsx)(c.h,{align:"left",buttons:[{label:"Cancel",type:"secondary",id:"cancel"}],onAction:E}),(0,r.jsx)(c.h,{align:"right",buttons:[{label:"Open",type:"primary",id:"open"}],onAction:E,hasError:!(null===(t=b.selected)||void 0===t?void 0:t.value.appId)})]})})]})},b=e=>{let{title:t,apps:n=[],intents:o,timeoutMs:i=45e3,preselected:a,onAction:s,invocationId:d}=e,c=0===n.length&&(null==o?void 0:o.length)===0,u=(0,p.C)(),g=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=new ResizeObserver(e=>{for(let t of e)if(t.target===g.current){fin.me.isWindow&&fin.me.setBounds({height:g.current.offsetHeight});return}});return g.current&&e.observe(g.current),()=>{e.disconnect()}},[d]),(0,r.jsxs)(v,{isWindows:u,ref:g,children:[(0,r.jsxs)(w,{children:[(0,r.jsx)(k,{children:t}),(0,r.jsx)(y,{tabIndex:0,"aria-label":"Close intent picker dialog",onClick:()=>s({type:"cancel"})})]}),c&&(0,r.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,r.jsx)("h3",{children:"No applications or intents available"}),(0,r.jsx)("p",{children:"No applications or intents are available to handle this request."})]}),!c&&(0,r.jsx)(m,{apps:n,intents:o,timeoutMs:i,preselected:a,onAction:s,invocationId:d})]})},v=(0,s.default)(d.Box).withConfig({componentId:"sc-3a886d1d-0"})(["position:relative;background:",";border:1px solid ",";"," display:flex;flex-direction:column;overflow:visible;"],e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background5},e=>{let{isWindows:t}=e;return!t&&(0,s.css)(["border-radius:",";box-shadow:none;"],u.Y)}),w=s.default.div.withConfig({componentId:"sc-3a886d1d-1"})(["display:flex;justify-content:space-between;align-items:center;margin:0 ",";h2{line-height:56px;font-size:",";"],e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.fontSize.xlarge}),y=(0,s.default)(d.Icon).attrs({icon:"Cross2Icon",size:"base"}).withConfig({componentId:"sc-3a886d1d-2"})(["cursor:pointer;width:",";height:",";border-radius:",";&:hover{background:",";}"],e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.palette.background4}),k=(0,s.default)(d.Heading).attrs({level:2,size:"large"}).withConfig({componentId:"sc-3a886d1d-3"})(["margin:0;color:",";font-weight:",";font-size:",";"],e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontWeight.bold},e=>{let{theme:t}=e;return t.fontSize.xlarge}),j=s.default.div.withConfig({componentId:"sc-3a886d1d-4"})(["border:1px solid ",";border-radius:",";background:",";padding:",";margin:0 "," ",";display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;height:166px;scrollbar-width:none !important;-ms-overflow-style:none !important;&::-webkit-scrollbar{width:0 !important;height:0 !important;display:none !important;}&::-webkit-scrollbar-track{display:none !important;}&::-webkit-scrollbar-thumb{display:none !important;}"],e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.small}),I=s.default.div.withConfig({componentId:"sc-3a886d1d-5"})(["display:flex;align-items:center;padding:",";cursor:pointer;position:relative;background:",";border-radius:",";transition:background-color 0.2s ease;div:first-child{margin-right:",";}&:hover{background:",";}"],e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t,selected:n}=e;return n?t.palette.background4:"transparent"},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.palette.background4}),C=s.default.div.withConfig({componentId:"sc-3a886d1d-6"})(["width:",";height:",";margin-right:",";display:flex;align-items:center;justify-content:center;border-radius:",";background:",";img{width:",";height:",";object-fit:contain;}"],e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.palette.background2},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),E=s.default.div.withConfig({componentId:"sc-3a886d1d-7"})(["flex:1;display:flex;flex-direction:column;gap:",";"],e=>{let{theme:t}=e;return t.px.xsmall}),S=s.default.div.withConfig({componentId:"sc-3a886d1d-8"})(["overflow:hidden;color:",";text-overflow:ellipsis;font-family:Inter;font-size:",";font-style:normal;font-weight:500;line-height:",";"],e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.fontSize.base},e=>{let{theme:t}=e;return t.px.large}),O=s.default.div.withConfig({componentId:"sc-3a886d1d-9"})(["display:flex;flex-direction:column;gap:",";margin:0 "," ",";div:first-child{gap:0;}label span{line-height:",";font-size:",";}#dropdown-listbox{border:1px solid ",";background-color:",";border-radius:",";padding-top:",";padding-bottom:",";}button{padding:6px inherit;height:",";background-color:",";:hover{background-color:",";}&[aria-selected='true']{border:none;}img{width:",";height:",";object-fit:contain;}}"],e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.xxlarge},e=>{let{theme:t}=e;return t.fontSize.large},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.background2},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.xxxlarge},e=>{let{theme:t}=e;return t.palette.background3},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),N=s.default.div.withConfig({componentId:"sc-3a886d1d-10"})(["height:1px;border-top:1px solid ",";margin:0 "," ",";&.without-margin{margin:0;}"],e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),M=s.default.div.withConfig({componentId:"sc-3a886d1d-11"})(["display:flex;align-items:center;justify-content:space-between;margin:0 ",";height:62px;"],e=>{let{theme:t}=e;return t.px.large}),z=s.default.form.withConfig({componentId:"sc-3a886d1d-12"})(["display:flex;align-items:center;gap:",";button{font-weight:500;font-size:",";}"],e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.fontSize.large}),_=(0,s.default)(d.Icon).attrs({icon:"StackIcon",size:"large"}).withConfig({componentId:"sc-3a886d1d-13"})(["margin-left:4px;"]);var P=n(328);let A=e=>{let{error:t}=e;return(0,l.useEffect)(()=>{i.sS&&D({type:"error",error:{message:t.message,name:t.name,stack:t.stack,cause:t.cause},modalIdentity:fin.me.identity})},[t]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Client-side exception has occurred"}),(0,r.jsx)("p",{children:t.message})]})},D=e=>i.sS&&fin.me.dispatchPopupResult(e);var R=(0,a.EN)(()=>{let[e,t]=(0,l.useState)(window.location.hash),n=(0,l.useMemo)(()=>(0,a.DP)(e),[e]);(0,l.useEffect)(()=>{let e=()=>t(window.location.hash);return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);let i=function(e){try{if(!e.title||!(e.apps||e.intents))return console.warn("Missing required parameters (title or apps or intents)"),null;return{title:e.title,identity:{name:e.parentName||"",uuid:""},...e.apps&&{apps:JSON.parse(e.apps)},...e.intents&&{intents:JSON.parse(e.intents)},...e.context&&{context:JSON.parse(e.context)},...e.timeoutMs&&{timeoutMs:parseInt(e.timeoutMs,10)},...e.preselected&&{preselected:JSON.parse(e.preselected)}}}catch(e){return console.error("Failed to parse URL parameters:",e),null}}(n),s=async e=>{try{await D(e)}catch(e){console.error("Error sending intent resolver response:",e),await D({type:"cancel"})}};return i?(0,r.jsx)(P.B6.Provider,{value:{isEnterprise:!0},children:(0,r.jsx)(o.ErrorBoundary,{errorComponent:A,children:(0,r.jsx)(b,{title:i.title,apps:"apps"in i?i.apps:void 0,intents:"intents"in i?i.intents:void 0,context:i.context,timeoutMs:i.timeoutMs,preselected:i.preselected,onAction:s,invocationId:n.invocationId})})}):(0,r.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,r.jsx)("h3",{children:"Unable to load modal content"}),(0,r.jsx)("p",{children:"The modal content could not be parsed. Please check the console for details."}),(0,r.jsx)("button",{onClick:()=>s({type:"cancel"}),children:"Close"})]})})}},function(e){e.O(0,[802,888,774,179],function(){return e(e.s=838)}),_N_E=e.O()}]);
//# sourceMappingURL=intents-resolver-modal-44dd9746d78d5055.js.map