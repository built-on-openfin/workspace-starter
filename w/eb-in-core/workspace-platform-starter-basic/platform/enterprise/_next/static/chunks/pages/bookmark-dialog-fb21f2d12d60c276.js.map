{"version":3,"file":"static/chunks/pages/bookmark-dialog-fb21f2d12d60c276.js","mappings":"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","sources":["webpack://_N_E/?8948","webpack://_N_E/../common/src/components/CloseButton/CloseButton.tsx","webpack://_N_E/../common/src/mixins/padding-border.tsx","webpack://_N_E/../common/src/utils/bookmark-item-context-menu.ts","webpack://_N_E/../common/src/utils/bookmarks.ts","webpack://_N_E/../common/src/utils/get-browser-window.ts","webpack://_N_E/../common/src/utils/url.ts","webpack://_N_E/./src/components/ControlBar/SearchMenu/utils.ts","webpack://_N_E/./src/components/ModalContent/Button.tsx","webpack://_N_E/./src/components/ModalContent/ButtonGroup.tsx","webpack://_N_E/./src/hooks/useHideWindowOnBlur.ts","webpack://_N_E/./src/hooks/useIsWindows.ts","webpack://_N_E/./src/hooks/useManagePopupWindow.ts","webpack://_N_E/./src/components/App/ContextMenu/useBookmarkDialogForm.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useBookmarkFolders.ts","webpack://_N_E/./src/hooks/useDropdownMenu.ts","webpack://_N_E/./src/components/App/ContextMenu/BookmarkDialog.tsx","webpack://_N_E/./src/pages/bookmark-dialog.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/bookmark-dialog\",\n      function () {\n        return require(\"private-next-pages/bookmark-dialog.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/bookmark-dialog\"])\n      });\n    }\n  ","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Icon } from '@openfin/ui-library';\n\nexport type ResponseModalActionHandler = (action: { name: string; data?: { textInputValue?: string } }) => void;\n\ntype CloseButtonProps = {\n    onAction: ResponseModalActionHandler;\n    isEnterprise?: boolean;\n};\nconst CloseButton: React.FC<CloseButtonProps> = ({ onAction, isEnterprise }) => {\n    return (\n        <CloseButtonContainer\n            isEnterprise={isEnterprise}\n            onClick={() => onAction({ name: 'close-button' })}\n            aria-label=\"close-button\"\n            type=\"button\"\n        >\n            <Icon icon=\"Cross2Icon\" size=\"base\" />\n        </CloseButtonContainer>\n    );\n};\n\nconst CloseButtonContainer = styled.button<{ isEnterprise: boolean }>`\n    position: absolute;\n    background: transparent;\n    right: ${({ theme, isEnterprise }) => (isEnterprise === true ? theme.px.small : theme.px.large)};\n    border-radius: ${({ theme }) => theme.radius.small};\n\n    svg path {\n        color: ${({ theme }) => theme.palette.textHelp};\n    }\n\n    &:hover {\n        background: ${({ theme }) => theme.palette.background4};\n\n        svg path {\n            color: ${({ theme }) => theme.palette.textDefault};\n        }\n    }\n`;\n\nexport default CloseButton;\n","import { css } from 'styled-components';\n\nexport const MAC_WINDOW_BORDER_RADIUS = '10px';\n\ntype BorderProps = {\n    size?: number;\n    dimensions?: { top?: number | false; bottom?: number | false; right?: number | false; left?: number | false };\n    borderColor: string;\n    backgroundColor?: string;\n};\n\nconst getDimension = (defaultSize = 0, size?: number | false) => {\n    if (size === false) {\n        return 0;\n    }\n    if (size >= 0) {\n        return size;\n    }\n    return defaultSize;\n};\n\nexport const PaddingBorderMixin = ({ size, dimensions = {}, borderColor, backgroundColor }: BorderProps) => css`\n    background-color: ${borderColor};\n    padding-left: ${getDimension(size, dimensions.left)}px;\n    padding-right: ${getDimension(size, dimensions.right)}px;\n    padding-top: ${getDimension(size, dimensions.top)}px;\n    padding-bottom: ${getDimension(size, dimensions.bottom)}px;\n    > * {\n        ${backgroundColor\n            ? css`\n                  background-color: ${backgroundColor};\n              `\n            : ''}\n    }\n`;\n","import { OpenFin } from '@openfin/core';\n\nimport { MenuItemType } from '@common/utils/context-menu';\n\nimport { t } from '@common/api/i18next';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport { BookmarkItemContextMenuItemTemplate, BookmarkItemContextMenuOptionType } from '@client-platform/shapes';\n\nimport {\n    ALL_BOOKMARKS_FOLDER_TITLE,\n    BookmarkFolder,\n    DOCK_FAVORITE_BOOKMARK_PREFIX,\n    FAVORITES_FOLDER_TITLE,\n    getBookmarkFoldersList,\n    getBookmarkNodeTitle\n} from './bookmarks';\n\nexport const getSortedBookmarkFoldersContextMenuOptions = (\n    bookmarkFolders: BookmarkFolder[],\n    checkedNodeId: string,\n    separators?: {\n        afterAllBookmarks?: boolean;\n        afterFavorites?: boolean;\n    }\n) => {\n    const menuTemplate = bookmarkFolders.reduce(\n        (template: BookmarkItemContextMenuItemTemplate[], folder: BookmarkFolder) => {\n            const isAllBookmarksFolder = folder.title === ALL_BOOKMARKS_FOLDER_TITLE;\n            const isFavoritesFolder = folder.title === FAVORITES_FOLDER_TITLE;\n\n            template.push({\n                type: MenuItemType.Checkbox,\n                label: getBookmarkNodeTitle(folder.title),\n                checked: checkedNodeId === folder.id,\n                data: {\n                    type: BookmarkItemContextMenuOptionType.Move,\n                    folderId: folder.id\n                }\n            });\n\n            if (\n                (separators?.afterAllBookmarks && isAllBookmarksFolder) ||\n                (separators?.afterFavorites && isFavoritesFolder)\n            ) {\n                template.push({ type: 'separator' });\n            }\n\n            return template;\n        },\n        []\n    );\n\n    return menuTemplate;\n};\n\nconst getBookmarkFoldersContextMenuOptions = async (\n    callerIdentity: OpenFin.Identity,\n    checkedNodeId: string\n): Promise<BookmarkItemContextMenuItemTemplate[]> => {\n    const browser = getCurrentSync().Browser.wrapSync(callerIdentity);\n\n    // eslint-disable-next-line no-underscore-dangle\n    const rootNode = await browser._bookmarks._getBookmarkNode();\n    const bookmarkFolders = getBookmarkFoldersList(rootNode);\n\n    return getSortedBookmarkFoldersContextMenuOptions(bookmarkFolders, checkedNodeId, {\n        afterAllBookmarks: true,\n        afterFavorites: true\n    });\n};\n\nexport const getBookmarkItemContextMenuTemplate = async (\n    callerIdentity: OpenFin.Identity,\n    bookmarkId: string\n): Promise<BookmarkItemContextMenuItemTemplate[]> => {\n    const browser = getCurrentSync().Browser.wrapSync(callerIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    const targetNode = await browser._bookmarks._getBookmarkNode(bookmarkId);\n\n    // Dock favorites can't be moved out of favorites folder or renamed\n    if (targetNode.url?.startsWith(DOCK_FAVORITE_BOOKMARK_PREFIX)) {\n        return [\n            {\n                type: MenuItemType.Label,\n                label: t('global.delete'),\n                data: {\n                    type: BookmarkItemContextMenuOptionType.Delete\n                }\n            }\n        ];\n    }\n\n    return [\n        {\n            type: MenuItemType.Label,\n            label: t('bookmarks.editName'),\n            data: {\n                type: BookmarkItemContextMenuOptionType.EditName\n            }\n        },\n        ...(targetNode.url\n            ? [\n                  {\n                      type: MenuItemType.Submenu,\n                      label: t('bookmarks.move'),\n                      submenu: await getBookmarkFoldersContextMenuOptions(callerIdentity, targetNode.parentId)\n                  }\n              ]\n            : []),\n        { type: MenuItemType.Separator, data: undefined },\n        {\n            type: MenuItemType.Label,\n            label: t('global.delete'),\n            data: {\n                type: BookmarkItemContextMenuOptionType.Delete\n            }\n        }\n    ];\n};\n","import OpenFin from '@openfin/core';\n\nimport { t } from '@common/api/i18next';\nimport { BookmarkNode } from '@common/api/pages/shapes';\n\nimport { getCurrentSync } from '@client-platform/api';\n\nexport const ALL_BOOKMARKS_FOLDER_TITLE = '_ALL_BOOKMARKS_';\n\nexport const FAVORITES_FOLDER_TITLE = '_FAVORITES_';\n\nexport const DOCK_FAVORITE_BOOKMARK_PREFIX = 'dock-favorite-bookmark:';\n\nexport type BookmarkFolder = { id: string; title: string };\n\nexport type CategorizedBookmarkSearchResults = {\n    bookmarksInFolder: BookmarkNode[];\n    bookmarksOutsideFolder: BookmarkNode[];\n};\n\nexport const getBookmarkNodeTitle = (title: string) => {\n    switch (title) {\n        case ALL_BOOKMARKS_FOLDER_TITLE:\n            return t('bookmarks.allBookmarks');\n        case FAVORITES_FOLDER_TITLE:\n            return t('bookmarks.favorites');\n        default:\n            return title;\n    }\n};\n\nexport const categorizeSearchResults = (\n    bookmarks: BookmarkNode[],\n    folderId: string\n): CategorizedBookmarkSearchResults => {\n    return bookmarks.reduce(\n        (accum, bookmark) => {\n            if (bookmark.parentId === folderId) {\n                accum.bookmarksInFolder.push(bookmark);\n            } else {\n                accum.bookmarksOutsideFolder.push(bookmark);\n            }\n            return accum;\n        },\n        {\n            bookmarksInFolder: [],\n            bookmarksOutsideFolder: []\n        } as CategorizedBookmarkSearchResults\n    );\n};\n\nexport const sortBookmarks = (a: BookmarkNode, b: BookmarkNode) => {\n    // Prioritize \"All Bookmarks\" folder first\n    if (!a.url && a.title === ALL_BOOKMARKS_FOLDER_TITLE) {\n        return -1;\n    } else if (!b.url && b.title === ALL_BOOKMARKS_FOLDER_TITLE) {\n        return 1;\n    }\n\n    // Fallback to prioritizing \"Favorites\" folder if \"All Bookmarks\" isn't prioritized\n    if (!a.url && a.title === FAVORITES_FOLDER_TITLE) {\n        return -1;\n    } else if (!b.url && b.title === FAVORITES_FOLDER_TITLE) {\n        return 1;\n    }\n\n    // Handle sorting folders over bookmarks\n    if (!a.url && b.url) {\n        return -1;\n    } else if (a.url && !b.url) {\n        return 1;\n    }\n\n    // Sort by creation date for all remaining items\n    return b.dateCreated - a.dateCreated;\n};\n\nexport const collectFolders = (nodes: BookmarkNode[]): BookmarkFolder[] =>\n    nodes\n        .reduce((acc: BookmarkFolder[], node) => {\n            if (!node.url) {\n                acc.push({ id: node.id, title: node.title });\n            }\n            if (node.children) {\n                acc.push(...collectFolders(node.children));\n            }\n            return acc;\n        }, [])\n        .sort(sortBookmarks);\n\nexport const getBookmarkFoldersList = (rootNode: BookmarkNode) => collectFolders([rootNode]);\n\nexport const updateBookmarkFavIcon = async (url: string, selectedView: OpenFin.View | null) => {\n    const viewInfo = await selectedView.getInfo();\n    const favIcon = viewInfo.favicons.length ? viewInfo.favicons[0] : '';\n    const browserApi = getCurrentSync().Browser.wrapSync(fin.Window.getCurrentSync().identity);\n    // eslint-disable-next-line no-underscore-dangle\n    const result = await browserApi._bookmarks._searchBookmarkNodes(url);\n    if (!result.length) {\n        console.debug('consolidate icon: bookmark not found');\n        return;\n    }\n    // eslint-disable-next-line no-underscore-dangle\n    await browserApi._bookmarks._updateBookmarkNode({ id: result[0].id, changes: { favIcon } });\n    console.debug(`consolidate icon update: bookmark ${url} updated with icon`, favIcon);\n    // eslint-disable-next-line no-underscore-dangle\n    await getCurrentSync()._refreshBookmarksInternal();\n};\n","import OpenFin from '@openfin/core';\n\nimport { getCurrentSync } from '@client-platform/api';\n\nexport const getBrowserWindow = async () => {\n    const platform = getCurrentSync();\n    const view = fin.View.wrapSync(fin.me.identity);\n    const w = await view.getCurrentWindow();\n    return platform.Browser.wrapSync(w.identity);\n};\n\nexport const getBrowserWindowWithoutView = async (browserIdentity?: OpenFin.Identity) => {\n    const platform = getCurrentSync();\n    return platform.Browser.wrapSync(browserIdentity ?? fin.me.identity);\n};\n","export function trimUrl(url: string): string {\n    if (!url) return url;\n    return url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/, '')\n        .replace(/\\/+/g, '/')\n        .replace(/\\/$/, '');\n}\n","import OpenFin from '@openfin/core';\n\nimport { getBrowserWindowWithoutView } from '@common/utils/get-browser-window';\nimport { trimUrl } from '@common/utils/url';\nimport { showAndFocus } from '@common/utils/window';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { t } from '@common/api/i18next';\nimport { BookmarkNode } from '@common/api/pages/shapes';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport { AttachedPage, Site } from '@client-platform/index';\n\nexport const COMMAND_BAR_HEIGHT = 40;\nexport const SEARCH_PROVIDER_TAB_HEIGHT = 33;\n\nexport const handleAlreadyOpenPage = (attachedPages: AttachedPage[], site?: Site): boolean => {\n    if (!site || site?.type !== 'page' || !site?.id) {\n        return false;\n    }\n    const pageId = site.id;\n    for (const page of attachedPages) {\n        if (pageId === page.pageId) {\n            const bw = getCurrentSync().Browser.wrapSync(page.parentIdentity);\n            showAndFocus(bw.identity);\n            bw.setActivePage(site.id);\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const convertSiteData = (result: any): Site => {\n    return {\n        id: result.id,\n        url: result.url,\n        type: 'website',\n        icon: result.icon,\n        title: result.title\n    };\n};\n\nexport const getRecentlyVisitedSites = async () => {\n    const platform = getCurrentSync();\n    const browserWin = platform.Browser.wrapSync(currentOFIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    const getRecentlylVisited = await browserWin._getRecentlyVisitedSites();\n    const recentlylVisitedSites: Site[] = [];\n    getRecentlylVisited.forEach((result) => {\n        recentlylVisitedSites.push(convertSiteData(result));\n    });\n    return recentlylVisitedSites;\n};\n\nexport const formatRecentUrl = (url: string): string => {\n    const { host, pathname, hash, search } = new URL(url);\n    const [pathRoot, ...restOfPath] = pathname.split('/').filter((value) => value.length);\n    if (restOfPath.length) {\n        return `${host}/${pathRoot}/…`;\n    }\n    return `${host}${pathname === '/' ? '' : pathname}${search}${hash}`;\n};\n\nexport const getSiteSubTitle = (site: Site, urlFormatter: (value: string) => string): string => {\n    const { type, subTitle } = site;\n    if (subTitle) {\n        return subTitle;\n    }\n    if (type === 'website') {\n        const { url } = site;\n        return urlFormatter(url);\n    }\n    const appOrSupertab =\n        type === 'page'\n            ? t('global.supertab')\n            : type === 'collection'\n            ? 'Collection'\n            : type?.charAt(0).toUpperCase() + type?.slice(1);\n    return appOrSupertab;\n};\n\nexport const trimWithEllipsis = (str: string, characters: number) => {\n    if (str.length > characters) {\n        return `${str.substring(0, characters).trim()}…`;\n    } else {\n        return str;\n    }\n};\n\nexport const checkViewUrl = async (\n    view: OpenFin.View | null,\n    url: string,\n    setViewNavigatedToUrl: (value: boolean) => void\n) => {\n    if (!view) {\n        setViewNavigatedToUrl(false);\n        return;\n    }\n\n    const viewInfo = await view.getInfo();\n    setViewNavigatedToUrl(trimUrl(viewInfo.url) === url);\n};\n\nexport const searchBookmark = async (\n    url: string,\n    browserIdentity?: OpenFin.Identity\n): Promise<BookmarkNode | undefined> => {\n    const browserWindow = await getBrowserWindowWithoutView(browserIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    const potentialMatching = (await browserWindow._bookmarks._searchBookmarkNodes(trimUrl(url))) as BookmarkNode[];\n\n    const bookmarks = potentialMatching.filter((bookmark) => {\n        return trimUrl(bookmark.url) === trimUrl(url);\n    });\n\n    return bookmarks[0];\n};\n","import React from 'react';\n\nimport styled, { css } from 'styled-components';\n\nimport { Button as BaseButton } from '@openfin/ui-library';\n\nimport { ButtonConfig } from '@common/utils/menu-config';\n\nimport { ResponseModalActionHandler } from '@enterprise/components/ModalContent/ResponseModal';\n\nexport type CustomButtonProps = ButtonConfig & {\n    disabled?: boolean;\n    onAction: ResponseModalActionHandler;\n};\n\nconst CriticalButtonStyles = css`\n    background-color: ${({ theme }) => theme.palette.statusCritical};\n    border: unset;\n\n    &:hover {\n        /* Critical hover color from Figma */\n        background-color: #cc3939;\n    }\n`;\n\nconst OutlineButtonStyles = css`\n    background-color: ${({ theme }) => theme.palette.background1};\n    border: 1px solid ${({ theme }) => theme.palette.background4};\n    color: ${({ theme }) => theme.palette.textDefault};\n    &:hover {\n        background-color: ${({ theme }) => theme.palette.background2};\n    }\n`;\n\nconst SubmitButtonStyles = css`\n    background-color: ${({ theme }) => theme.palette.brandPrimary};\n    &:hover {\n        background-color: ${({ theme }) => theme.palette.brandPrimary};\n        filter: brightness(1.25);\n    }\n`;\n\nconst StyledButton = styled(BaseButton)<{\n    variant?: ButtonConfig['variant'];\n}>`\n    cursor: 'default' !important;\n    padding: ${({ theme }) => theme.px.small} ${({ theme }) => theme.px.base};\n\n    &:focus {\n        border: 1px solid ${({ theme }) => theme.palette.inputFocused};\n    }\n\n    ${({ variant }) => {\n        switch (variant) {\n            case 'critical':\n                return CriticalButtonStyles;\n            case 'outline':\n                return OutlineButtonStyles;\n            case 'submit':\n                return SubmitButtonStyles;\n        }\n    }};\n`;\n\nexport const Button: React.FC<CustomButtonProps> = ({ label, id, type, variant, disabled, onAction, dataTestId }) => {\n    return (\n        <StyledButton\n            type={type === 'primary' ? 'submit' : 'button'}\n            kind={type}\n            variant={variant ?? (type === 'primary' ? 'submit' : 'outline')}\n            label={label}\n            aria-label={label}\n            data-testid={dataTestId}\n            /** Had to add data-id because JSDOM still has a bug and doesn't provide ariaLabel. */\n            data-id={id}\n            onClick={type === 'primary' ? undefined : () => onAction({ name: id })}\n            disabled={type === 'primary' && disabled}\n        />\n    );\n};\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Box, BoxProps } from '@openfin/ui-library';\n\nimport { ButtonConfig } from '@common/utils/menu-config';\n\nimport { Button } from '@enterprise/components/ModalContent/Button';\nimport { ResponseModalActionHandler } from '@enterprise/components/ModalContent/ResponseModal';\n\ntype ButtonGroupProps = {\n    buttons: ButtonConfig[];\n    align: 'left' | 'right';\n    gap?: BoxProps['gap'];\n    hasError?: boolean;\n    onAction: ResponseModalActionHandler;\n};\n\nexport const ButtonsRow = styled(Box)`\n    margin-top: ${({ theme }) => theme.px.xsmall};\n    justify-content: space-between;\n    padding: 0 ${({ theme }) => theme.px.large} ${({ theme }) => theme.px.large} ${({ theme }) => theme.px.large};\n`;\n\nexport const ButtonGroup: React.FC<ButtonGroupProps> = ({ buttons, align, gap, hasError, onAction }) => {\n    return (\n        <Box gap={gap ?? 'small'} role=\"group\" aria-label={align}>\n            {(buttons || []).map((config) => (\n                <Button key={config.id} disabled={hasError} onAction={onAction} {...config} />\n            ))}\n        </Box>\n    );\n};\n","import { useCallback, useEffect, useRef } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nexport const useHideWindowOnBlur = (disable?: boolean, onHide?: () => void) => {\n    const onWindowBlurRef = useRef<() => void>();\n\n    onWindowBlurRef.current = useCallback(async () => {\n        if (disable) {\n            return;\n        }\n\n        onHide && onHide();\n        await (fin.me as OpenFin.Window).hide();\n    }, [disable, onHide]);\n\n    useEffect(() => {\n        const handleBlur = async () => {\n            if (onWindowBlurRef.current) {\n                onWindowBlurRef.current();\n            }\n        };\n\n        (async () => {\n            await (fin.me as OpenFin.Window).on('blurred', handleBlur);\n            await (fin.me as OpenFin.Window).on('hidden', handleBlur);\n        })();\n\n        return () => {\n            // TODO WRK-4956: Unawaited promises in react hook disposers can cause global rejections\n            (fin.me as OpenFin.Window).removeListener('blurred', handleBlur);\n            (fin.me as OpenFin.Window).removeListener('hidden', handleBlur);\n        };\n    }, []);\n};\n","import { useEffect, useState } from 'react';\n\nimport { isOSWindows } from '@common/utils/os';\n\n/**\n * Custom hook that determines if the operating system is Windows.\n *\n * NOTE: This hook should only be used in non-browser window components.\n * Otherwise, opt for the selectIsWindows selector to access the Redux store.\n *\n * @returns {boolean} - Returns `true` if the operating system is Windows, otherwise `false`.\n */\nexport const useIsWindows = () => {\n    const [isWindows, setIsWindows] = useState(true);\n\n    useEffect(() => {\n        (async () => {\n            setIsWindows(await isOSWindows());\n        })();\n    }, []);\n\n    return isWindows;\n};\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport {\n    BaseEnterpriseMenuChannelMessage,\n    ContextMenuChannelMessage,\n    EnterpriseMenuType,\n    RenameSupertabChannelMessage\n} from '@common/utils/popup-window';\nimport { getCurrentOFWindow, WindowName } from '@common/utils/window';\n\nexport type ContextMenuWindowMessage = ContextMenuChannelMessage | RenameSupertabChannelMessage;\n\n/*\n * This hook is used to manage the popup window state and show the popup window.\n * @param windowName - The name of the popup window.\n * @param createChannel - The function to create the channel.\n * @param showPopupOverride - The function to show the popup window. If not provided, the default behavior will be used to show the popup window.\n * @param options - An object containing optional parameters.\n * @param options.blurBehavior - The behavior of the popup window when it loses focus. Can be 'hide' or 'modal'. Defaults to 'hide'.\n * @param options.dispatchDirectlyToChannel - If true, the response will be dispatched directly to the channel. If false, the response will be dispatched to the parent window.\n * @param options.forwardTopicName - The topic name to forward the response to.\n */\nexport const useManagePopupWindow = <T extends BaseEnterpriseMenuChannelMessage>(\n    windowName: string,\n    createChannel: () => Promise<OpenFin.ChannelProvider>,\n    showPopupOverride?: (bounds: OpenFin.Bounds) => Promise<void>,\n    options?: {\n        blurBehavior?: 'hide' | 'modal';\n        dispatchDirectlyToChannel?: boolean;\n        forwardTopicName?: string;\n    }\n) => {\n    const channelToParent = useRef<OpenFin.ChannelProvider | null>(null);\n    const [payload, setPayload] = useState<T | null>(null);\n\n    const handlePopupRequest = useCallback(async (ev: T) => {\n        const window = fin.me as OpenFin.Window;\n\n        // Assuming a popup window is currently active, if a user attempts to activate the popup window elsewhere, we want to\n        // first blur the popup window to emit a response for the first invocation before setting the payload to re-show.\n        if (await window.isShowing()) {\n            // Do not blur the zoom controls dialog in this instance. The dialog should stay open on successive show calls.\n            if (ev.type !== EnterpriseMenuType.ZoomControls) {\n                await window.blur();\n            }\n        }\n        setPayload(ev);\n    }, []);\n\n    const showPopup = useCallback(\n        async (bounds: OpenFin.Bounds) => {\n            if (!payload) return;\n            const popupWindow = fin.Window.wrapSync({ name: windowName, uuid: fin.me.uuid });\n            const parentWindow = fin.Window.wrapSync(payload.parentIdentity);\n\n            // SAAS-2980 - Windows Limitation:\n            // - when showTaskbarIcon: false - the window is visible on all desktops\n            // - to prevent this, we set a parentIdentity on the popupWindow\n            // - we need to keep it alive after the parent window is closed,\n            // so on hidden we set the parentIdentity to a non-existent window identity\n            // which in core will unset the parent.\n\n            // always set the parent identity during showPopup\n            await popupWindow.updateOptions({\n                // @ts-expect-error type mismatch\n                experimental: { parentIdentity: payload.parentIdentity }\n            });\n\n            await popupWindow.prependOnceListener('hidden', async () => {\n                // bookmarks dialog \"child\" popup window has a parent of the bookmarks dialog,\n                // skip it for that case\n                if (payload.parentIdentity.name !== WindowName.EnterpriseBookmarkDialogWindow) {\n                    await popupWindow.updateOptions({\n                        // @ts-expect-error type mismatch\n                        experimental: { parentIdentity: { uuid: '__NON_EXISTENT', name: '__NON_EXISTENT' } }\n                    });\n                }\n            });\n\n            if (showPopupOverride) {\n                await showPopupOverride(bounds);\n                return;\n            }\n\n            try {\n                const { height, width, top, left } = bounds;\n\n                (fin.me as OpenFin.Window).once('blurred', () => setPayload(null));\n                const response = await parentWindow.showPopupWindow({\n                    name: windowName,\n                    resultDispatchBehavior: 'hide',\n                    blurBehavior: options?.blurBehavior ?? 'hide',\n                    hideOnClose: true,\n                    focus: true,\n                    height,\n                    width,\n                    x: left,\n                    y: top,\n                    additionalOptions: {\n                        alwaysOnTop: true,\n                        contextMenuOptions: {\n                            enabled: true,\n                            template: ['inspect']\n                        }\n                    }\n                });\n\n                const shouldTargetRequestId =\n                    'requestId' in payload &&\n                    (payload.type === EnterpriseMenuType.ContextMenu || payload.type === EnterpriseMenuType.GlobalMenu);\n\n                // Context menu invocations coming from the provider window should target a topic with a specific requestId.\n                const responseTopic = shouldTargetRequestId ? `response-${payload.requestId}` : 'response';\n                await channelToParent.current?.dispatch(payload.responseIdentity, responseTopic, response);\n\n                if (options?.forwardTopicName) {\n                    channelToParent.current?.publish(options.forwardTopicName, response);\n                }\n            } catch (error) {\n                console.error('Error showing popup:', error);\n            }\n        },\n        [payload]\n    );\n\n    const onResponse = useCallback(\n        async (data?: any) => {\n            try {\n                if (options?.dispatchDirectlyToChannel) {\n                    if (payload) {\n                        await channelToParent.current?.dispatch(payload.responseIdentity, 'response', data);\n\n                        if (options.forwardTopicName) {\n                            Promise.all(channelToParent.current?.publish(options.forwardTopicName, data)).catch(() => {\n                                /* Channel that listens to forwarding messages is not open */\n                            });\n                        }\n                    }\n\n                    if (data.type === 'cancel' || data.type === 'dropdown-blurred') {\n                        setPayload(null);\n                    }\n                } else {\n                    await getCurrentOFWindow().dispatchPopupResult(data);\n\n                    if (payload) {\n                        fin.Window.wrapSync(payload.parentIdentity).focus();\n                        setPayload(null);\n                    }\n                }\n            } catch (error) {\n                console.error('Error handling response:', error);\n            }\n        },\n        [payload]\n    );\n\n    useEffect(() => {\n        const setupChannel = async () => {\n            const channel = await createChannel();\n            channel.register('open', handlePopupRequest);\n            channelToParent.current = channel;\n        };\n\n        try {\n            setupChannel();\n        } catch (error) {\n            console.error('Error setting up channel:', error);\n        }\n\n        return () => {\n            if (channelToParent.current) {\n                channelToParent.current.destroy();\n                channelToParent.current = null;\n            }\n        };\n    }, [handlePopupRequest, createChannel]);\n\n    return {\n        channelRef: channelToParent,\n        payload,\n        showPopup,\n        onResponse\n    };\n};\n","import { MutableRefObject, useCallback, useEffect, useMemo, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport { BookmarkFolder, getBookmarkNodeTitle } from '@common/utils/bookmarks';\nimport { getBrowserWindowWithoutView } from '@common/utils/get-browser-window';\nimport { showSuccess } from '@common/utils/indicators/showIndicator';\nimport { BookmarkButtonPayload } from '@common/utils/popup-window';\n\nimport { useTranslation } from '@common/api/i18next';\nimport { BookmarkNode } from '@common/api/pages/shapes';\n\nimport { searchBookmark } from '@enterprise/components/ControlBar/SearchMenu/utils';\n\ntype UpdatableFields = {\n    title: string;\n    folderId: string;\n    favIcon: string;\n};\n\n/**\n * This hook is used to manage the form state of the bookmark dialog.\n * It is used to create, update, and delete bookmarks.\n * It is used in the bookmark dialog.\n *\n * @param {BookmarkButtonPayload} bookmarkPayload - The payload of the bookmark button.\n * @param {Function} onResponse - The callback function to call when the dialog is closed.\n * @param {BookmarkFolder} defaultBookmarkFolder - The default bookmark folder.\n * @param {BookmarkFolder[]} bookmarkFolders - The list of bookmark folders.\n * @param {MutableRefObject<HTMLInputElement>} [titleInputRef] - The reference to the title input element.\n *\n * @returns {Object} The state and handlers for the bookmark dialog form.\n */\nexport const useBookmarkDialogForm = (\n    bookmarkPayload: BookmarkButtonPayload,\n    onResponse: (data?: any) => void,\n    defaultBookmarkFolder: BookmarkFolder,\n    bookmarkFolders: BookmarkFolder[],\n    titleInputRef?: MutableRefObject<HTMLInputElement>\n) => {\n    const { t } = useTranslation();\n    const [isNewBookmark, setIsNewBookmark] = useState<boolean>(false);\n    const [existingBookmark, setExistingBookmark] = useState<BookmarkNode>();\n    const [fields, setFields] = useState<UpdatableFields>({\n        title: '',\n        folderId: '',\n        favIcon: ''\n    });\n    const [initialFolder, setInitialFolder] = useState<string>('');\n    const [browserIdentity, setBrowserIdentity] = useState<OpenFin.Identity>();\n\n    useEffect(() => {\n        (async () => {\n            if (!bookmarkPayload?.selectedViewIdentity) {\n                return;\n            }\n            const view = fin.View.wrapSync(bookmarkPayload.selectedViewIdentity);\n\n            const viewInfo = await view.getInfo();\n            const viewTitle = viewInfo.title;\n            const viewFavIcon = viewInfo.favicons[0];\n            const viewUrl = viewInfo.url;\n            const viewBrowserIdentity = (await view.getCurrentWindow()).identity;\n\n            let bookmark = await searchBookmark(viewUrl, viewBrowserIdentity);\n\n            if (!bookmark) {\n                setIsNewBookmark(true);\n                const browserWindow = await getBrowserWindowWithoutView(viewBrowserIdentity);\n                // eslint-disable-next-line no-underscore-dangle\n                bookmark = await browserWindow._bookmarks._createBookmarkNode({\n                    url: viewUrl,\n                    title: viewTitle,\n                    favIcon: viewFavIcon,\n                    parentId: defaultBookmarkFolder?.id\n                });\n                onResponse({ type: 'bookmark-created' });\n            }\n\n            setBrowserIdentity(viewBrowserIdentity);\n            setExistingBookmark(bookmark);\n            setFields({\n                title: bookmark.title,\n                folderId: bookmark.parentId,\n                favIcon: viewFavIcon\n            });\n            setInitialFolder(bookmark.parentId);\n\n            titleInputRef?.current.select();\n        })();\n    }, [bookmarkPayload, defaultBookmarkFolder?.id, onResponse, titleInputRef]);\n\n    const resetForm = useCallback(() => {\n        setFields({\n            title: '',\n            folderId: '',\n            favIcon: ''\n        });\n        setExistingBookmark(undefined);\n        setIsNewBookmark(false);\n        onResponse && onResponse({ type: 'cancel' });\n    }, [onResponse]);\n\n    const showSuccessIndicator = useCallback(() => {\n        const bookmarkFolder = bookmarkFolders?.find((folder) => folder.id === fields.folderId);\n        if (bookmarkFolder) {\n            if (isNewBookmark || initialFolder !== fields.folderId) {\n                showSuccess({\n                    message: t(isNewBookmark ? 'bookmarks.bookmarkAddedTitle' : 'bookmarks.bookmarkEditedTitle'),\n                    parentBrowserName: browserIdentity.name,\n                    secondaryMessage: t('bookmarks.bookmarkAddedToFolder', {\n                        folderName: getBookmarkNodeTitle(bookmarkFolder?.title)\n                    }),\n                    icon: 'BookmarkFilled'\n                });\n            }\n        }\n    }, [bookmarkFolders, browserIdentity, fields.folderId, initialFolder, isNewBookmark, t]);\n\n    const saveBookmark = useCallback(async () => {\n        if (!existingBookmark) {\n            return;\n        }\n        const browserWindow = await getBrowserWindowWithoutView(browserIdentity);\n        // eslint-disable-next-line no-underscore-dangle\n        await browserWindow._bookmarks._updateBookmarkNode({\n            id: existingBookmark.id,\n            changes: {\n                title: fields.title,\n                // We DO NOT update the favicon here, as it is not guaranteed to be correct here\n                // favIcon: fields.favIcon,\n                parentId: fields.folderId\n            }\n        });\n\n        showSuccessIndicator();\n        onResponse && onResponse({ type: 'bookmark-updated' });\n        resetForm();\n    }, [existingBookmark?.id, fields.title, fields.favIcon, fields.folderId, onResponse, resetForm, initialFolder]);\n\n    const removeBookmark = useCallback(async () => {\n        const browserWindow = await getBrowserWindowWithoutView();\n        if (existingBookmark) {\n            // eslint-disable-next-line no-underscore-dangle\n            await browserWindow._bookmarks._deleteBookmarkNode(existingBookmark.id);\n            onResponse && onResponse({ type: 'bookmark-removed' });\n        }\n        resetForm();\n    }, [existingBookmark, onResponse, resetForm]);\n\n    return useMemo(\n        () => ({\n            title: fields.title,\n            setTitle: (title: string) => {\n                setFields((prevFields) => ({\n                    ...prevFields,\n                    title\n                }));\n            },\n            folderId: fields.folderId,\n            setFolderId: (folderId: string) => {\n                setFields((prevFields) => ({\n                    ...prevFields,\n                    folderId\n                }));\n            },\n            saveBookmark,\n            removeBookmark,\n            resetForm,\n            isNewBookmark\n        }),\n        [fields.title, fields.folderId, saveBookmark, removeBookmark, resetForm, isNewBookmark]\n    );\n};\n","import { MutableRefObject, useEffect, useState } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { BookmarkFolder, getBookmarkFoldersList } from '@common/utils/bookmarks';\nimport { getBrowserWindowWithoutView } from '@common/utils/get-browser-window';\n\nimport { BrowserChannelAction } from '@common/api/protocol/browser';\n\n/*\n * This hook is used to get all bookmark folders.\n */\nexport const useBookmarkFolders = (channel?: MutableRefObject<OpenFin.ChannelProvider>): Array<BookmarkFolder> => {\n    const [folders, setFolders] = useState<Array<BookmarkFolder>>([]);\n\n    useEffect(() => {\n        const refreshBookmarkFolders = () => {\n            getBrowserWindowWithoutView().then(async (browserWin) =>\n                // eslint-disable-next-line no-underscore-dangle\n                browserWin._bookmarks\n                    ._getBookmarkNode()\n                    .then((bookmarkRootNode) => setFolders(getBookmarkFoldersList(bookmarkRootNode)))\n            );\n        };\n\n        refreshBookmarkFolders();\n\n        (async () => {\n            if (channel?.current) {\n                channel.current.register(BrowserChannelAction.RefreshBookmarksInternal, refreshBookmarkFolders);\n            }\n        })();\n    }, [channel?.current]);\n\n    return folders;\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport { connectDropdownMenuChannel } from '@common/utils/enterprise-channels';\nimport { DropdownMenuChannelMessage, EnterpriseMenuType } from '@common/utils/popup-window';\n\nimport { AnchorBehavior } from '@client-platform/api/context-menu';\n\nimport { DropdownMenuResponseData } from '@enterprise/components/App/ContextMenu/DropdownMenu';\n\n/*\n * This hook is used to manage the dropdown menu state and show the dropdown menu when the dropdown button is clicked.\n * @param dropdownButtonRef - The ref of the dropdown button.\n * @param dropdownOptions - The options to display in the dropdown menu.\n * @param onValueChange - The function to call when the dropdown value changes.\n * @param onDropdownBlurred - The function to call when the dropdown menu is blurred.\n */\nexport const useDropdownMenu = (\n    dropdownButtonRef: React.MutableRefObject<HTMLButtonElement>,\n    dropdownOptions: Array<OpenFin.MenuItemTemplate>,\n    onValueChange: (response: any) => void,\n    onDropdownBlurred?: () => void\n) => {\n    const [isShown, setIsShown] = useState(false);\n    const [isChannelInitialized, setIsChannelInitialized] = useState(false);\n    const channelRef = useRef<OpenFin.ChannelClient | null>(null);\n\n    useEffect(() => {\n        const initializeChannel = async () => {\n            if (!channelRef.current) {\n                channelRef.current = await connectDropdownMenuChannel();\n                setIsChannelInitialized(true);\n            }\n        };\n\n        initializeChannel();\n\n        return () => {\n            if (channelRef.current) {\n                channelRef.current.disconnect();\n                channelRef.current = null;\n                setIsChannelInitialized(false);\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        if (isChannelInitialized) {\n            const registerHandlers = () => {\n                channelRef.current?.register('response', (e: DropdownMenuResponseData) => {\n                    if (e.type === 'dropdown-blurred') {\n                        if (onDropdownBlurred) {\n                            onDropdownBlurred();\n                        } else {\n                            if (!document.hasFocus()) {\n                                // if dropdown is shown and you click back in EB, this dialog's blur does not fire\n                                // the next time around. Avoid this by explicitly focusing before we hide it.\n                                fin.me.focus();\n                                fin.me.hide();\n                            }\n                        }\n                    }\n                    if (e.type === 'value-changed') {\n                        onValueChange(e.data);\n                    }\n                    (fin.me as OpenFin.Window).focus();\n                    setIsShown(false);\n                });\n            };\n\n            registerHandlers();\n\n            return () => {\n                if (channelRef.current) {\n                    channelRef.current.remove('response');\n                }\n            };\n        }\n    }, [isChannelInitialized, onValueChange, onDropdownBlurred]);\n\n    const showDropdown = useCallback(async () => {\n        if (!dropdownButtonRef.current || !isChannelInitialized) {\n            return;\n        }\n\n        setIsShown(true);\n\n        const parentWindowBounds = await (await fin.Window.getCurrent()).getBounds();\n        const dropdownIconRect = dropdownButtonRef.current.getBoundingClientRect();\n\n        await channelRef.current?.dispatch('open', {\n            parentIdentity: fin.me.identity,\n            type: EnterpriseMenuType.DropdownMenu,\n            anchorBehavior: AnchorBehavior.Center,\n            responseIdentity: fin.me.identity,\n            x: parentWindowBounds.left + dropdownIconRect.left,\n            y: parentWindowBounds.top + dropdownIconRect.top + dropdownIconRect.height + 5,\n            payload: { template: dropdownOptions, width: dropdownIconRect.width }\n        } as DropdownMenuChannelMessage);\n    }, [dropdownButtonRef, dropdownOptions, isChannelInitialized]);\n\n    return {\n        isShown,\n        showDropdown\n    };\n};\n","import React, { FC, MutableRefObject, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport styled, { css } from 'styled-components';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { DropdownButton, H2, TextInput } from '@openfin/ui-library';\n\nimport { getSortedBookmarkFoldersContextMenuOptions } from '@common/utils/bookmark-item-context-menu';\nimport { getBookmarkNodeTitle } from '@common/utils/bookmarks';\nimport { BookmarkButtonPayload, BookmarkDialogChannelMessage } from '@common/utils/popup-window';\n\nimport CloseButton from '@common/components/CloseButton/CloseButton';\n\nimport { ContextMenuProps } from '@enterprise/components/App/ContextMenu/ContextMenu';\nimport { useBookmarkDialogForm } from '@enterprise/components/App/ContextMenu/useBookmarkDialogForm';\nimport { ButtonGroup } from '@enterprise/components/ModalContent/ButtonGroup';\n\nimport { BookmarkItemContextMenuItemData } from '@client-platform/index';\nimport { MAC_WINDOW_BORDER_RADIUS } from '@common/mixins/padding-border';\nimport { useBookmarkFolders } from '@enterprise/hooks/EnterpriseSearchMenu/useBookmarkFolders';\nimport { useDropdownMenu } from '@enterprise/hooks/useDropdownMenu';\nimport { useHideWindowOnBlur } from '@enterprise/hooks/useHideWindowOnBlur';\nimport { useIsWindows } from '@enterprise/hooks/useIsWindows';\n\ninterface BookmarkDialogProps extends ContextMenuProps<BookmarkDialogChannelMessage> {\n    channelRef: MutableRefObject<OpenFin.ChannelProvider>;\n}\n\nexport const BookmarkDialog: FC<BookmarkDialogProps> = ({ showPopup, messageData, onResponse, channelRef }) => {\n    const { t } = useTranslation();\n    const isWindows = useIsWindows();\n\n    const containerRef = useRef<HTMLDivElement>();\n    const titleInputRef = useRef<HTMLInputElement>();\n    const dropdownMenuRef = useRef<HTMLButtonElement>();\n\n    const payload = messageData?.payload as BookmarkButtonPayload;\n    const bookmarkFolders = useBookmarkFolders(channelRef);\n    const form = useBookmarkDialogForm(payload, onResponse, bookmarkFolders[0], bookmarkFolders, titleInputRef);\n\n    const { selectedFolder, menuTemplate } = useMemo(() => {\n        const selected = bookmarkFolders.find((folder) => folder.id === form.folderId) ?? bookmarkFolders[0];\n        const template = getSortedBookmarkFoldersContextMenuOptions(bookmarkFolders, selected?.id, {\n            afterFavorites: true\n        });\n\n        return { selectedFolder: selected, menuTemplate: template };\n    }, [bookmarkFolders, form.folderId]);\n\n    const { showDropdown, isShown } = useDropdownMenu(\n        dropdownMenuRef,\n        menuTemplate,\n        ({ folderId }: BookmarkItemContextMenuItemData) => form.setFolderId(folderId)\n    );\n\n    useEffect(() => {\n        if (messageData) {\n            (async () => {\n                const { x, y } = messageData;\n                const { height, width } = containerRef.current.getBoundingClientRect();\n                showPopup({ height, width, left: x, top: y });\n            })();\n        }\n    }, [messageData, showPopup]);\n\n    useEffect(() => {\n        if (dropdownMenuRef.current) {\n            // so that dropdown menu does not trigger form submission\n            dropdownMenuRef.current.type = 'button';\n            dropdownMenuRef.current.style.cursor = 'default';\n        }\n    }, [dropdownMenuRef]);\n\n    const handleButtonGroupActions = async (e: any) => {\n        if (e.name === 'remove') {\n            await form.removeBookmark();\n            fin.me.hide();\n        }\n    };\n\n    const handleHideAndCancel = async () => {\n        await form.saveBookmark();\n        onResponse && onResponse({ type: 'cancel' });\n        fin.me.hide();\n    };\n\n    const handleSubmit = async (e: any) => {\n        e.preventDefault();\n        await form.saveBookmark();\n        fin.me.hide();\n    };\n\n    useHideWindowOnBlur(isShown, handleHideAndCancel);\n\n    return (\n        <DialogContainer ref={containerRef} isWindows={isWindows}>\n            <CloseButton onAction={handleHideAndCancel} />\n            <DialogTitle>\n                {messageData && form.isNewBookmark ? t('bookmarks.bookmarkAdded') : t('bookmarks.editBookmark')}\n            </DialogTitle>\n            <form onSubmit={handleSubmit}>\n                <Row>\n                    <Label htmlFor=\"name-input\">Name</Label>\n                    <TextInputStyled\n                        id=\"name-input\"\n                        ref={titleInputRef}\n                        value={form?.title}\n                        onChange={(e) => form.setTitle(e.target.value)}\n                    />\n                </Row>\n                <Row applyBottomPadding={true}>\n                    <Label htmlFor=\"folder-dropdown\">Folder</Label>\n                    <DropdownButtonContainer>\n                        <DropdownButton\n                            ref={dropdownMenuRef}\n                            expanded={isShown}\n                            handleClick={() => !isShown && showDropdown()}\n                            placeholder={getBookmarkNodeTitle(selectedFolder?.title)}\n                            name=\"folder-dropdown\"\n                        />\n                    </DropdownButtonContainer>\n                </Row>\n                <BookmarksButtonsRow role=\"group\" aria-label=\"buttons\">\n                    <ButtonGroup\n                        align=\"right\"\n                        gap=\"base\"\n                        buttons={[\n                            {\n                                label: t('bookmarks.remove'),\n                                type: 'secondary',\n                                id: 'remove',\n                                variant: 'outline'\n                            },\n                            { label: t('bookmarks.done'), type: 'primary', id: 'done', variant: 'submit' }\n                        ]}\n                        hasError={false}\n                        onAction={handleButtonGroupActions}\n                    />\n                </BookmarksButtonsRow>\n            </form>\n        </DialogContainer>\n    );\n};\n\nconst DialogContainer = styled.div<{ isWindows: boolean }>`\n    width: 320px;\n    height: 216px;\n    flex-direction: column;\n    padding: ${({ theme }) => theme.px.large};\n    row-gap: ${({ theme }) => theme.px.base};\n    background-color: ${({ theme }) => theme.palette.background1};\n    border: 1px solid ${({ theme }) => theme.palette.background5};\n    ${({ isWindows }) =>\n        !isWindows &&\n        css`\n            border-radius: ${MAC_WINDOW_BORDER_RADIUS};\n            box-shadow: none;\n        `}\n`;\n\nconst DialogTitle = styled(H2)`\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    font-size: ${({ theme }) => theme.fontSize.xlarge};\n    line-height: 1.5;\n`;\n\nconst Label = styled.label`\n    color: ${({ theme }) => theme.palette.textDefault};\n    font-size: ${({ theme }) => theme.fontSize.large};\n`;\n\nconst Row = styled.div<{ applyBottomPadding?: boolean }>`\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: ${({ theme }) => theme.px.large};\n    padding-bottom: ${({ theme, applyBottomPadding }) => (applyBottomPadding ? theme.px.large : '0px')};\n`;\n\nconst InputWidth = 220;\n\nconst TextInputStyled = styled(TextInput)`\n    height: ${({ theme }) => theme.px.xxxlarge};\n    width: ${InputWidth}px;\n\n    color: ${({ theme }) => theme.palette.textDefault};\n    font-size: ${({ theme }) => theme.fontSize.large};\n    background-color: ${({ theme }) => theme.palette.background3};\n    box-shadow: unset;\n`;\n\nconst DropdownButtonContainer = styled.div`\n    width: ${InputWidth}px !important;\n\n    button {\n        height: ${({ theme }) => theme.px.xxxlarge};\n        background-color: ${({ theme }) => theme.palette.background3};\n\n        span {\n            color: ${({ theme }) => theme.palette.textDefault};\n            font-size: ${({ theme }) => theme.fontSize.large};\n        }\n    }\n`;\n\nconst BookmarksButtonsRow = styled.div`\n    padding-top: ${({ theme }) => theme.px.large};\n    border-top: 1px solid ${({ theme }) => theme.palette.background5};\n    margin-left: -${({ theme }) => theme.px.large};\n    margin-right: -${({ theme }) => theme.px.large};\n    padding-right: ${({ theme }) => theme.px.large};\n    padding-left: ${({ theme }) => theme.px.large};\n\n    div {\n        float: right;\n    }\n`;\n","import { FC, useCallback } from 'react';\n\nimport { withRouter } from 'next/router';\n\nimport OpenFin from '@openfin/core';\n\nimport { createBookmarkDialogChannel } from '@common/utils/enterprise-channels';\nimport { getClosestBoundsIfModalBoundsOffscreen } from '@common/utils/modal-bounds';\nimport { BookmarkDialogChannelMessage } from '@common/utils/popup-window';\nimport { Router } from '@common/utils/router';\nimport { WindowName } from '@common/utils/window';\n\nimport { BookmarkDialog } from '@enterprise/components/App/ContextMenu/BookmarkDialog';\nimport BrowserThemeProvider from '@enterprise/components/App/ThemeProvider/BrowserThemeProvider';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\nimport { useManagePopupWindow } from '@enterprise/hooks/useManagePopupWindow';\n\ninterface Props {\n    router: Router;\n}\n\nexport const BookmarkDialogPopup: FC<Props> = () => {\n    const showPopupOverride = useCallback(async (bounds: OpenFin.Bounds) => {\n        const window = fin.me as OpenFin.Window;\n        await window.setBounds(await getClosestBoundsIfModalBoundsOffscreen(bounds));\n        await window.show();\n        await window.bringToFront();\n        await window.focus();\n    }, []);\n\n    const { channelRef, payload, showPopup, onResponse } = useManagePopupWindow<BookmarkDialogChannelMessage>(\n        WindowName.EnterpriseBookmarkDialogWindow,\n        createBookmarkDialogChannel,\n        showPopupOverride,\n        {\n            dispatchDirectlyToChannel: true,\n            forwardTopicName: 'bookmark-dialog-action'\n        }\n    );\n\n    return (\n        <BrowserThemeProvider>\n            <BrowserTypeContext.Provider value={{ isEnterprise: true }}>\n                <BookmarkDialog\n                    channelRef={channelRef}\n                    messageData={payload}\n                    showPopup={showPopup}\n                    onResponse={onResponse}\n                />\n            </BrowserTypeContext.Provider>\n        </BrowserThemeProvider>\n    );\n};\n\nexport default withRouter(BookmarkDialogPopup);\n"],"names":["window","__NEXT_P","push","__webpack_require__","CloseButtonContainer","styled","button","withConfig","theme","isEnterprise","param","px","small","large","radius","palette","textHelp","background4","textDefault","__webpack_exports__","Z","onAction","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","onClick","name","aria-label","type","Icon","icon","size","MAC_WINDOW_BORDER_RADIUS","getSortedBookmarkFoldersContextMenuOptions","bookmarkFolders","checkedNodeId","separators","reduce","template","folder","isAllBookmarksFolder","title","ALL_BOOKMARKS_FOLDER_TITLE","isFavoritesFolder","FAVORITES_FOLDER_TITLE","MenuItemType","Checkbox","label","getBookmarkNodeTitle","checked","id","data","BookmarkItemContextMenuOptionType","Move","folderId","afterAllBookmarks","afterFavorites","getBookmarkFoldersContextMenuOptions","callerIdentity","browser","getCurrentSync","Browser","wrapSync","rootNode","_bookmarks","_getBookmarkNode","getBookmarkFoldersList","getBookmarkItemContextMenuTemplate","bookmarkId","targetNode","url","startsWith","DOCK_FAVORITE_BOOKMARK_PREFIX","Label","t","Delete","EditName","Submenu","submenu","parentId","Separator","undefined","categorizeSearchResults","bookmarks","accum","bookmark","bookmarksInFolder","bookmarksOutsideFolder","sortBookmarks","a","b","dateCreated","collectFolders","nodes","acc","node","children","sort","updateBookmarkFavIcon","selectedView","viewInfo","getInfo","favIcon","favicons","length","browserApi","fin","Window","identity","result","_searchBookmarkNodes","console","debug","_updateBookmarkNode","changes","concat","_refreshBookmarksInternal","getBrowserWindow","platform","view","View","me","w","getCurrentWindow","getBrowserWindowWithoutView","browserIdentity","trimUrl","replace","COMMAND_BAR_HEIGHT","SEARCH_PROVIDER_TAB_HEIGHT","convertSiteData","getRecentlyVisitedSites","browserWin","currentOFIdentity","getRecentlylVisited","_getRecentlyVisitedSites","recentlylVisitedSites","forEach","formatRecentUrl","host","pathname","hash","search","URL","pathRoot","restOfPath","split","filter","value","getSiteSubTitle","site","urlFormatter","subTitle","charAt","toUpperCase","slice","trimWithEllipsis","str","characters","substring","trim","checkViewUrl","setViewNavigatedToUrl","searchBookmark","browserWindow","CriticalButtonStyles","css","statusCritical","OutlineButtonStyles","background1","background2","SubmitButtonStyles","brandPrimary","StyledButton","BaseButton","base","inputFocused","variant","Button","disabled","dataTestId","jsx_runtime","kind","data-testid","data-id","ButtonsRow","Box","xsmall","ButtonGroup","buttons","align","gap","hasError","role","map","config","useHideWindowOnBlur","disable","onHide","onWindowBlurRef","useRef","current","useCallback","hide","useEffect","handleBlur","on","removeListener","useIsWindows","isWindows","setIsWindows","useState","isOSWindows","useManagePopupWindow","windowName","createChannel","showPopupOverride","options","channelToParent","payload","setPayload","handlePopupRequest","ev","isShowing","EnterpriseMenuType","ZoomControls","blur","showPopup","bounds","popupWindow","uuid","parentWindow","parentIdentity","updateOptions","experimental","prependOnceListener","WindowName","EnterpriseBookmarkDialogWindow","height","width","top","left","once","response","showPopupWindow","resultDispatchBehavior","blurBehavior","hideOnClose","focus","x","y","additionalOptions","alwaysOnTop","contextMenuOptions","enabled","responseTopic","shouldTargetRequestId","ContextMenu","GlobalMenu","requestId","dispatch","responseIdentity","forwardTopicName","publish","error","onResponse","dispatchDirectlyToChannel","Promise","all","catch","getCurrentOFWindow","dispatchPopupResult","setupChannel","channel","register","destroy","channelRef","useBookmarkDialogForm","bookmarkPayload","defaultBookmarkFolder","titleInputRef","useTranslation","isNewBookmark","setIsNewBookmark","existingBookmark","setExistingBookmark","fields","setFields","initialFolder","setInitialFolder","setBrowserIdentity","selectedViewIdentity","viewTitle","viewFavIcon","viewUrl","viewBrowserIdentity","_createBookmarkNode","select","resetForm","showSuccessIndicator","bookmarkFolder","find","showSuccess","message","parentBrowserName","secondaryMessage","folderName","saveBookmark","removeBookmark","_deleteBookmarkNode","useMemo","setTitle","prevFields","setFolderId","useBookmarkFolders","folders","setFolders","refreshBookmarkFolders","then","bookmarkRootNode","BrowserChannelAction","RefreshBookmarksInternal","useDropdownMenu","dropdownButtonRef","dropdownOptions","onValueChange","onDropdownBlurred","isShown","setIsShown","isChannelInitialized","setIsChannelInitialized","initializeChannel","connectDropdownMenuChannel","disconnect","e","document","hasFocus","remove","showDropdown","parentWindowBounds","getCurrent","getBounds","dropdownIconRect","getBoundingClientRect","DropdownMenu","anchorBehavior","AnchorBehavior","Center","BookmarkDialog","messageData","containerRef","dropdownMenuRef","form","selectedFolder","menuTemplate","selected","style","cursor","handleButtonGroupActions","handleHideAndCancel","handleSubmit","preventDefault","jsxs","DialogContainer","ref","CloseButton","DialogTitle","onSubmit","Row","htmlFor","TextInputStyled","onChange","target","applyBottomPadding","DropdownButtonContainer","DropdownButton","expanded","handleClick","placeholder","BookmarksButtonsRow","div","background5","H2","fontSize","xlarge","TextInput","xxxlarge","background3","BookmarkDialogPopup","setBounds","getClosestBoundsIfModalBoundsOffscreen","show","bringToFront","createBookmarkDialogChannel","BrowserThemeProvider","BrowserTypeContext","Provider","bookmark_dialog","withRouter"],"sourceRoot":""}