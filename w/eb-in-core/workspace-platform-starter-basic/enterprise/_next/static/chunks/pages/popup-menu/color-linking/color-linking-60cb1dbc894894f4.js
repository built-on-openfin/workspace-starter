(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{3723:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/popup-menu/color-linking/color-linking",function(){return n(4996)}])},7805:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(7378),o=n(1610);let r=e=>{let{i18n:t}=(0,o.$G)();(0,i.useEffect)(()=>{let n=()=>{e(t.language)};return t.on("languageChanged",n),()=>{t.off("languageChanged",n)}},[t,e])}},7347:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(5191),o=n(4861);let r=(0,i.default)(o.Icon).withConfig({componentId:"sc-44a19e81-0"})(["svg path{color:",";opacity:",";}.icons-large &{--px-icon:",";--px-container:",";}"],e=>{let{theme:t,disabled:n,isEnterprise:i,windowFocused:o}=e;return n&&(!i||o)?t.palette.textInactive:""},e=>{let{isEnterprise:t,windowFocused:n}=e;return t&&!n?.5:"none"},e=>{let{theme:t}=e;return t.iconSize.large},e=>{let{theme:t}=e;return t.iconSize.large});i.default.svg.withConfig({componentId:"sc-44a19e81-1"})(["path{fill:",";}"],e=>{let{theme:t}=e;return t.palette.inputColor})},4672:function(e,t,n){"use strict";var i,o;n.d(t,{v:function(){return i}}),(o=i||(i={})).SAVE="SAVE_MENU",o.SHARE="SHARE_MENU",o.COLOR_LINK="COLOR_LINK_MENU",o.LAYOUT="LAYOUT_MENU"},2344:function(e,t,n){"use strict";var i=n(4246),o=n(7378),r=n(5191),a=n(6774);t.Z=(0,o.memo)(e=>{let{children:t,isEnterprise:n}=e,o=(0,a.C)();return(0,i.jsx)(s,{children:(0,i.jsx)(c,{isEnterprise:n,isWindows:o,children:t})})});let s=r.default.div.withConfig({componentId:"sc-8f6f584b-0"})(["background:",";display:flex;flex-direction:column;height:100%;overflow-x:hidden;"],e=>{let{theme:t}=e;return t.palette.background1}),c=r.default.div.withConfig({componentId:"sc-8f6f584b-1"})(["align-items:center;background:",";display:flex;height:100%;justify-content:space-between;padding:0;position:relative;overflow:hidden;border:",";"],e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t,isEnterprise:n,isWindows:i}=e;return(!n||i)&&"1px solid ".concat(t.palette.background5)})},3144:function(e,t,n){"use strict";var i=n(5191),o=n(3377);let r=(0,i.default)(o.Z).withConfig({componentId:"sc-4aba060c-0"})(["",""],e=>e.active&&(0,i.css)(["background-color:",";&:hover{background-color:",";}"],e=>{let{theme:t}=e;return t.palette.statusActive},e=>{let{theme:t}=e;return t.palette.statusActive}));t.Z=r},7955:function(e,t,n){"use strict";var i=n(5191),o=n(3377);let r=(0,i.default)(o.Z).withConfig({componentId:"sc-73f6397d-0"})(["height:",";width:",";&:hover:not([disabled]){background-color:",";}&:active:not([disabled]){background-color:",";}"],e=>{let{theme:t}=e;return t.px.xxxlarge},e=>{let{theme:t}=e;return t.px.xxxlarge},e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.statusActive});t.Z=r},1893:function(e,t,n){"use strict";var i=n(4246),o=n(7378),r=n(6125),a=n(1230),s=n(694),c=n(3144);t.Z=e=>{let{params:t,type:n,config:l,disabled:u,children:d,tooltip:p,"data-testid":f}=e,g=(0,r.I0)(),h=(0,o.useRef)(null),m=(0,r.v9)(s.VL),v=(0,o.useRef)(!1);v.current=m.type===n&&!!m.type;let{windowOptions:w,windowOffset:b}=l;return(0,i.jsx)(c.Z,{title:p,disabled:null!=u&&u,onClick:()=>{if(!h.current)throw Error("Button ref is undefined");let{bottom:e,left:i}=h.current.getBoundingClientRect(),o=((null==b?void 0:b.x)||0)+h.current.offsetWidth/2;(async()=>{let r={x:i+o-w.defaultWidth/2,y:e,...w},c=fin.Window.wrapSync({uuid:fin.me.uuid,name:r.name}),l=!1,u=c.once("blurred",()=>{l&&g((0,s.Ds)())}),d=c.once("focused",()=>{g((0,s.qn)(n,t)),l=!0});await Promise.all([u,d]),await (0,a.PM)(t,r)})()},active:v.current,ref:h,"data-testid":f,children:d})}},9258:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var i,o,r=n(4246),a=n(7378),s=n(6125),c=n(6596),l=n(4672),u=n(1610),d=n(4824),p=n(183),f=n(5550),g=n(1485),h=n(5401),m=n(7805),v=n(1893),w=n(2236),b=n(7166),y=n(1687);(i=o||(o={})).JOIN_GROUP="join-group",i.LEAVE_GROUP="leave-group",i.SHOW_HIDE_GROUPS="show-hide-groups";let C=l.v.COLOR_LINK,k=(e,t)=>async n=>{switch(n.data.type){case"join-group":try{let e=n.data.colorName;await (0,p.Gu)(t.current,n.data.channelId),fin.Window.getCurrentSync().focus(),(0,c.s$)({message:(0,u.t)("successIndicator.namedContextGroupApplied",{colorName:e}),parentBrowserName:fin.me.name}),t.current.forEach(t=>(0,f.VR)(e,t))}catch(e){console.warn(e),fin.Window.getCurrentSync().focus(),(0,c.JQ)({message:(0,u.t)("infoIndicator.colorLinkAttempt"),parentBrowserName:fin.me.name})}break;case"leave-group":{let e=n.data.colorName;await (0,p.Gu)(t.current,n.data.channelId),fin.Window.getCurrentSync().focus(),(0,c.s$)({message:t.current.length>1?(0,u.t)("successIndicator.viewRemoved"):(0,u.t)("successIndicator.viewsRemoved"),parentBrowserName:fin.me.name}),t.current.forEach(t=>(0,f.Qr)(e,t));break}case"show-hide-groups":e.current((0,g._R)())}},I=e=>()=>{e.current&&(0,p.Fh)()};t.Z=e=>{let{tooltip:t,iconUrl:n}=e,i=(0,s.I0)(),o=(0,a.useRef)(i);o.current=i;let c=(0,s.v9)(d.Dg),l=(0,s.v9)(g.UI)[c.layoutContainerKey],p=(0,a.useRef)(l);p.current=l;let f=(0,s.v9)(g.pW),x=(0,a.useRef)(f);x.current=f;let[L,P]=(0,a.useState)(null),O=!!c.isLocked,E=(0,a.useCallback)(()=>{Promise.all([(0,b.hL)((0,u.t)("toolbar.colorLinking")),fin.me.interop.getContextGroups()]).then(e=>{let[t,n]=e;P({...t,windowOptions:{...t.windowOptions,defaultWidth:32*Math.min(n.length+1,10)+4}})})},[]);(0,m.b)(E),(0,a.useEffect)(()=>{let e=new BroadcastChannel("color-linking-".concat(fin.me.name));e.onmessage=k(o,p);let t=I(x);return fin.me.on("layout-ready",t),()=>{fin.me.removeListener("layout-ready",t),e.close()}},[]);let H=t||(null==L?void 0:L.title),S=w.Sj[h.dH.ColorLinking].iconProps.icon;return L?(0,r.jsx)(v.Z,{type:C,config:L,params:{selectedViews:JSON.stringify(l)},tooltip:H,disabled:O,children:(0,r.jsx)(y.i,{customIconUrl:n,uiLibIcon:S,disabled:O})}):null}},1687:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var i=n(4246);n(7378);var o=n(5988),r=n(7347);let a=e=>{let{customIconUrl:t,uiLibIcon:n,disabled:a,size:s,...c}=e;return t?(0,i.jsx)(o.d,{iconURL:t,size:s,...c}):(0,i.jsx)(r.x,{disabled:a,icon:n,size:s,...c})}},2236:function(e,t,n){"use strict";n.d(t,{BE:function(){return h},QK:function(){return u},Sj:function(){return p},UH:function(){return f},qM:function(){return d},w9:function(){return g}});var i,o,r=n(6596),a=n(5802),s=n(1610),c=n(586),l=n(5401);let u=()=>{(0,a.lQ)().minimize().catch(e=>{console.error("RightControlsContainer: Failed to minimize: ".concat(e))})},d=async e=>{let t=(0,c.e)(e),n=await t.isShowingTabs();n?await t.hide():await t.show(),(0,r.s$)({message:(0,s.t)(n?"successIndicator.hidden":"successIndicator.shown"),parentBrowserName:a.Gi.name}),await fin.me.focus()};(i=o||(o={})).ColorLinking="TargetIcon",i.PresetLayouts="GridIcon",i.ShowHideTabs="LightBulbOutlinedIcon",i.LockUnlockPage="LockOpen1Icon",i.SaveMenu="FloppyDiskIcon";let p={[l.dH.ColorLinking]:{iconProps:{icon:"TargetIcon",size:"small"}},[l.dH.PresetLayouts]:{iconProps:{icon:"GridIcon",size:"small"}},[l.dH.SaveMenu]:{iconProps:{icon:"FloppyDiskIcon",size:"small"}},[l.dH.SavePage]:{iconProps:{icon:"FloppyDiskIcon",size:"small"}},[l.dH.ShowHideTabs]:{iconProps:{icon:"LightBulbOutlinedIcon",size:"small"}},[l.dH.LockUnlockPage]:{iconProps:{icon:"LockOpen1Icon",size:"small"}},[l.dH.Minimise]:{tooltipKey:"toolbar.minimizeWindow",iconProps:{icon:"DividerHorizontalIcon",size:"small"}},[l.dH.Close]:{tooltipKey:"contextMenu.closeWindow",iconProps:{icon:"Cross1Icon",size:"small"}}},f={buttons:[{type:l.dH.ShowHideTabs},{type:l.dH.ColorLinking},{type:l.dH.PresetLayouts},{type:l.dH.LockUnlockPage},{type:l.dH.SaveMenu}]},g={buttons:[{type:l.dH.Minimise},{type:l.dH.Maximise},{type:l.dH.Close}]},h={buttons:[{type:l.dH.Close},{type:l.dH.Minimise},{type:l.dH.Maximise}]}},4996:function(e,t,n){"use strict";n.r(t);var i=n(4246),o=n(7378),r=n(5191),a=n(4861),s=n(6931),c=n(1610),l=n(183),u=n(2344),d=n(7955),p=n(9258);t.default=(0,s.EN)(e=>{var t,n;let{router:r}=e,g=(0,s.DP)(r.asPath),h=null!==(t=g.parentName)&&void 0!==t?t:"",m=null!==(n=g.invocationId)&&void 0!==n?n:"",[v,w]=(0,o.useState)([]),[b,y]=(0,o.useState)([]),[C,k]=(0,o.useState)(""),I=(0,o.useRef)(),{t:x}=(0,c.$G)();(0,o.useEffect)(()=>{let e=(0,s.DP)(r.asPath);if("string"==typeof e.selectedViews&&"undefined"!==e.selectedViews){var t;let n=JSON.parse(null!==(t=e.selectedViews)&&void 0!==t?t:"[]");w(n),L(n)}},[r]);let L=async e=>{if(e.length>1){let t=await Promise.all(e.map(e=>(0,l.ei)(e)));t.length>0&&t.every(e=>{var n;return(null==e?void 0:e.name)===(null==t?void 0:null===(n=t[0])||void 0===n?void 0:n.name)})?k(t[0].name):k("")}else{var t;k(null===(t=await (0,l.ei)(e[0]||v[0]))||void 0===t?void 0:t.name)}},P=async(e,t)=>{let n=e[0].toUpperCase()+e.substring(1);e===C?I.current.postMessage({type:p.N.LEAVE_GROUP,channelId:t,colorName:n}):I.current.postMessage({type:p.N.JOIN_GROUP,channelId:t,colorName:n}),fin.Window.getCurrentSync().blur()};return(0,o.useEffect)(()=>{fin.me.interop.getContextGroups().then(e=>y(e))},[m]),(0,o.useEffect)(()=>(I.current=new BroadcastChannel("color-linking-".concat(h)),()=>{I.current.close()}),[h]),(0,i.jsxs)(u.Z,{"aria-label":x("aria.closeContextGroup"),children:[(0,i.jsx)(d.Z,{title:x("aria.colorLinking"),"aria-label":x("aria.colorLinking"),onClick:()=>{I.current.postMessage({type:p.N.SHOW_HIDE_GROUPS})},children:(0,i.jsx)(a.Icon,{icon:"EyeOpenIcon"})}),b.map(e=>{let{id:t,displayMetadata:{color:n,name:o}}=e;return(0,i.jsx)(d.Z,{disabled:0===v.length,withTitleCase:!1,title:0===v.length?x("aria.applyColorLinking"):o,icon:"","aria-label":0===v.length?x("aria.applyColorLinking"):o===C?v.length>1?x("aria.assignColorLinkingCurrentView",{name:o}):x("aria.assignColorLinkingCurrentViews",{name:o}):v.length>1?x("aria.setColorLinkingActiveView"):x("aria.setColorLinkingActiveViews"),onClick:()=>P(o,t),children:(0,i.jsx)(f,{style:{backgroundColor:n}})},t)})]})});let f=r.default.div.withConfig({componentId:"sc-e77187dc-0"})(["border-radius:",";height:",";width:",";margin:10px;"],e=>{let{theme:t}=e;return t.radius.round},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.px.base})},8100:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var i=/\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i,o=/[^\s:–—-]+|./g,r=/\s/,a=/.(?=[A-Z]|\..)/,s=/[A-Za-z0-9\u00C0-\u00FF]/;function c(e){for(var t,n="";null!==(t=o.exec(e));){var c=t[0],l=t.index;if(!a.test(c)&&(!i.test(c)||0===l||l+c.length===e.length)&&(":"!==e.charAt(l+c.length)||r.test(e.charAt(l+c.length+1)))){n+=c.replace(s,function(e){return e.toUpperCase()});continue}n+=c}return n}},851:function(e,t,n){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{_:function(){return i}})}},function(e){e.O(0,[304,550,888,774,179],function(){return e(e.s=3723)}),_N_E=e.O()}]);
//# sourceMappingURL=color-linking-60cb1dbc894894f4.js.map