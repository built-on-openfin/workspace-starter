{"version":3,"file":"static/chunks/pages/index-bb4e33308e73f4a8.js","mappings":"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","sources":["webpack://_N_E/","webpack://_N_E/../common/src/components/Accessibility/ScreenReaderAnnouncement.tsx","webpack://_N_E/../common/src/hooks/useLanguageChange.ts","webpack://_N_E/../common/src/styles/svg-icons.ts","webpack://_N_E/../common/src/utils/get-browser-window.ts","webpack://_N_E/../common/src/utils/menu.ts","webpack://_N_E/../common/src/utils/url.ts","webpack://_N_E/../common/src/utils/view-tab-overflow.ts","webpack://_N_E/./src/components/ControlBar/BaseButton/ExtendedButton.tsx","webpack://_N_E/./src/components/ControlBar/MenuButton/MenuButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/ColorLinkingButton/ColorLinkingButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/MenuButtonIcon.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/utils.ts","webpack://_N_E/./src/components/ControlBar/SearchMenu/utils.ts","webpack://_N_E/./src/components/ControlBar/Tablist/TextSpan.ts","webpack://_N_E/./src/components/ControlBar/utils.ts","webpack://_N_E/./src/components/LandingPage/BrandIcon.tsx","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/AdjustSearchMenuDimensions/getDimensions.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/AdjustSearchMenuDimensions/useAdjustSearchMenuViewDimensions.ts","webpack://_N_E/./src/hooks/useCallbackOnAPIReady.ts","webpack://_N_E/./src/utils/spinner.svg.ts","webpack://_N_E/./src/context/SearchMenu/WindowSearchMenuContext.tsx","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useInitChannelToSearchMenuView.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useUpdateViewExpansionState.ts","webpack://_N_E/./src/components/LayoutContainer/useOnLayoutCreated.ts","webpack://_N_E/./src/components/LayoutContainer/usePropagateLayoutContainerEventsToParent.ts","webpack://_N_E/./src/hooks/useAddViewsToInteropContextGroups.ts","webpack://_N_E/./src/hooks/useSingleViewPage.tsx","webpack://_N_E/./src/hooks/useTabLoadingState.ts","webpack://_N_E/./src/components/LayoutContainer/LayoutContainer.analytics.ts","webpack://_N_E/./src/components/LayoutContainer/LayoutContainer.contextMenu.ts","webpack://_N_E/./src/components/LayoutContainer/LayoutContainer.tsx","webpack://_N_E/./src/components/LayoutContainer/LayoutContainerWrapper.tsx","webpack://_N_E/./src/components/ContentContainer/ContentContainer.tsx","webpack://_N_E/./src/hooks/useFocusedView.ts","webpack://_N_E/./src/hooks/useFocusedViewListeners.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/usePostMessageToSearchMenuView.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useSearchMenuViewLifecycleManager.ts","webpack://_N_E/./src/hooks/useEnterpriseHotkeys.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useUpdateInputExpansionState.ts","webpack://_N_E/./src/components/ControlBar/SearchMenu/SecureIcon.tsx","webpack://_N_E/./src/components/ControlBar/SearchMenu/UrlInput.tsx","webpack://_N_E/./src/assets/icons/bookmark-filled.svg","webpack://_N_E/./src/assets/icons/bookmark-outline.svg","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useIsBookmarked.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useIsSelectedViewNavigated.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useListenForFavIconUpdates.ts","webpack://_N_E/./src/hooks/EnterpriseSearchMenu/useEnterpriseBookmarkDialogWindow.ts","webpack://_N_E/./src/hooks/useAddEditBookmarkDialog.ts","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/Buttons/IconContainer.tsx","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/Buttons/BookmarkButton.tsx","webpack://_N_E/./src/hooks/useSetUpZoomHotkeys.ts","webpack://_N_E/./src/hooks/useZoomControlsDialog.ts","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/Buttons/ZoomButton.tsx","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/Buttons/AddressBarButtons.tsx","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBarInput.tsx","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBar.tsx","webpack://_N_E/./src/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/EnterpriseNavigationContainer.tsx","webpack://_N_E/./src/styles/buttons.tsx","webpack://_N_E/./src/components/ControlBar/AICompanionShortcutButton/AICompanionShortcutButton.tsx","webpack://_N_E/./src/components/ControlBar/BookmarksPanelButton/BookmarksPanelButton.tsx","webpack://_N_E/./src/components/ControlBar/EnterpriseGlobalMenu/EnterpriseGlobalMenu.tsx","webpack://_N_E/./src/hooks/usePlatformOptionsChange.tsx","webpack://_N_E/../common/src/components/ControlButtons/MacWindowStateButton.tsx","webpack://_N_E/../common/src/components/ControlButtons/MaximizeButton.tsx","webpack://_N_E/../common/src/components/CustomButton/CustomButton.tsx","webpack://_N_E/../common/src/hooks/useWindowState.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/RightControlsButton/EnterpriseMaximizeButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/LayoutsMenuButton/LayoutsMenuButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/LockUnlockPageButton/LockUnlockPageButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/SaveButton/SaveButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/ShowHideTabsButton/ShowHideTabsButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/RightControlsButton/RightControlsButton.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/ToolbarContainer/ToolbarContainer.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/WindowStateContainer/WindowStateContainer.tsx","webpack://_N_E/./src/components/ControlBar/RightControlsContainer/RightControlsContainer.tsx","webpack://_N_E/../common/src/utils/page-drag.ts","webpack://_N_E/./src/components/ControlBar/Tablist/useManagePageViewCount.ts","webpack://_N_E/./src/hooks/useGetContextGroups.ts","webpack://_N_E/./src/hooks/usePageDrag.tsx","webpack://_N_E/./src/hooks/usePageIcon.ts","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/useSingleViewTitle.ts","webpack://_N_E/./src/hooks/useWindowTitle.ts","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/styles.ts","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/CloseButton.tsx","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/PageButtonContainer.tsx","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/usePageLoadingEvents.ts","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/PageIcon.tsx","webpack://_N_E/./src/components/ControlBar/Tablist/PageButton/PageButton.tsx","webpack://_N_E/./src/components/ControlBar/Tablist/WithDropIndicator.tsx","webpack://_N_E/./src/components/ControlBar/Tablist/Tablist.tsx","webpack://_N_E/./src/components/ControlBar/ControlBar.tsx","webpack://_N_E/./src/hooks/useDetachViewsFromInteropContextGroups.ts","webpack://_N_E/./src/hooks/useDocumentTitle.tsx","webpack://_N_E/./src/hooks/useDropdownMenuWindow.ts","webpack://_N_E/./src/hooks/useIntentsModalMenuWindow.ts","webpack://_N_E/./src/hooks/useBrowserTaskbarIcon.ts","webpack://_N_E/./src/pages/index.tsx","webpack://_N_E/./src/styles/ThemedSVG.tsx","webpack://_N_E/./src/utils/SpinnerSVG.tsx","webpack://_N_E/./src/utils/zoom-controls.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  ","import { AriaAttributes, AriaRole } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nnamespace ScreenReaderAnnouncement {\n    export interface Props {\n        message: string;\n        ariaAttributes?: AriaAttributes;\n        ariaRole?: AriaRole;\n    }\n}\n\n/**\n * A hidden component that announces screen reader messages to the user.\n *\n * Props:\n * - message: The message to announce to the user.\n * - ariaAttributes: Additional aria attributes to apply to the component. Default attributes are { aria-live: 'polite', aria-atomic: 'true' }\n * - ariaRole: The role to apply to the component. Defaults to 'status'.\n */\nexport const ScreenReaderAnnouncement = ({ message, ariaAttributes, ariaRole }: ScreenReaderAnnouncement.Props) => {\n    return (\n        <div\n            aria-live=\"polite\"\n            aria-atomic=\"true\"\n            role={ariaRole || 'status'}\n            tabIndex={-1}\n            style={{\n                clip: 'rect(0 0 0 0)',\n                clipPath: 'inset(50%)',\n                height: '1px',\n                overflow: 'hidden',\n                position: 'absolute',\n                whiteSpace: 'nowrap',\n                width: '1px'\n            }}\n            {...ariaAttributes}\n        >\n            {message}\n        </div>\n    );\n};\n","import { useEffect } from 'react';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport { Locale } from '@client-platform/shapes';\n\nexport const useLanguageChange = (onLanguageChange: (language: Locale) => void) => {\n    const { i18n } = useTranslation();\n\n    useEffect(() => {\n        const eventHandler = () => {\n            onLanguageChange(i18n.language as Locale);\n        };\n        i18n.on('languageChanged', eventHandler);\n\n        return () => {\n            i18n.off('languageChanged', eventHandler);\n        };\n    }, [i18n, onLanguageChange]);\n};\n","import styled from 'styled-components';\n\nimport { Icon } from '@openfin/ui-library';\n\nexport const StyledIcon = styled(Icon)<{ disabled?: boolean; isEnterprise?: boolean; windowFocused?: boolean }>`\n    svg path {\n        color: ${({ theme, disabled, isEnterprise, windowFocused }) =>\n            disabled && (!isEnterprise || windowFocused) ? theme.palette.textInactive : ''};\n        opacity: ${({ isEnterprise, windowFocused }) => (isEnterprise && !windowFocused ? 0.5 : 'none')};\n    }\n    .icons-large & {\n        --px-icon: ${({ theme }) => theme.iconSize.large};\n        --px-container: ${({ theme }) => theme.iconSize.large};\n    }\n`;\n\nexport const ThemedSVG = styled.svg`\n    path {\n        fill: ${({ theme }) => theme.palette.inputColor};\n    }\n`;\n","import OpenFin from '@openfin/core';\n\nimport { getCurrentSync } from '@client-platform/api';\n\nexport const getBrowserWindow = async () => {\n    const platform = getCurrentSync();\n    const view = fin.View.wrapSync(fin.me.identity);\n    const w = await view.getCurrentWindow();\n    return platform.Browser.wrapSync(w.identity);\n};\n\nexport const getBrowserWindowWithoutView = async (browserIdentity?: OpenFin.Identity) => {\n    const platform = getCurrentSync();\n    return platform.Browser.wrapSync(browserIdentity ?? fin.me.identity);\n};\n","import { SaveModalType } from '@client-platform/shapes';\n\nexport enum Menu {\n    SAVE = 'SAVE_MENU',\n    SHARE = 'SHARE_MENU',\n    COLOR_LINK = 'COLOR_LINK_MENU',\n    LAYOUT = 'LAYOUT_MENU'\n}\nexport interface UserMenuParams {\n    [Menu.SAVE]: {\n        id: string;\n        menuType: SaveModalType;\n        invocationId?: string;\n    };\n    [Menu.SHARE]: { id: string; title: string };\n    [Menu.LAYOUT]: null;\n    [Menu.COLOR_LINK]: { selectedViews: string } | null;\n}\n","export function trimUrl(url: string): string {\n    if (!url) return url;\n    return url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/, '')\n        .replace(/\\/+/g, '/')\n        .replace(/\\/$/, '');\n}\n","import { css, DefaultTheme } from 'styled-components';\n\nimport debounce from 'lodash.debounce';\n\nconst applyCondensedTabClassNames = (tabGroup: Element) => {\n    const tabs = tabGroup.querySelectorAll('.lm_tab');\n    let condensedTabClassName = '';\n    const { width } = tabs[0].getBoundingClientRect();\n\n    if (width === 24) {\n        condensedTabClassName = 'view-tab-condensed-sm';\n    } else if (width < 44) {\n        condensedTabClassName = 'view-tab-condensed-md';\n    } else if (width <= 56) {\n        condensedTabClassName = 'view-tab-condensed-lg';\n    }\n\n    tabs.forEach((tab) => {\n        tab.classList.forEach((className) => className.includes('view-tab-') && tab.classList.remove(className));\n        if (condensedTabClassName) {\n            tab.classList.add(condensedTabClassName);\n        }\n    });\n};\n\n// Enables horizontal scroll on tabs\nconst handleTabContainerScroll = (event: WheelEvent) => {\n    const { deltaX, deltaY } = event;\n    const tabHeader = (event.target as HTMLElement).closest('.lm_tabs');\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\n        tabHeader.scrollLeft += deltaY - deltaX;\n    }\n};\n\n// Scrolls tab container when mouse nears edge of tab header\nconst handleAutoScrollOnTabDrag = (event: MouseEvent) => {\n    const tabHeader = (event.target as Element).closest('.lm_header');\n    const tabGroup = tabHeader.querySelector('.lm_tabs') as HTMLDivElement;\n    const isDraggingTab = !!tabGroup.querySelector('.lm_drop_tab_placeholder');\n\n    if (isDraggingTab) {\n        const tabGroupRect = tabGroup.getBoundingClientRect();\n        if (event.clientX < tabGroupRect.left + 12) {\n            tabGroup.scrollBy({ left: -1 });\n        }\n        if (event.clientX > tabGroupRect.right - 12) {\n            tabGroup.scrollBy({ left: 1 });\n        }\n    }\n};\n\nconst toggleScrollShadows = (containerRef: HTMLDivElement) => {\n    const tabHeaders = containerRef.querySelectorAll('.lm_header');\n    tabHeaders.forEach((tabHeader: HTMLDivElement) => {\n        const tabGroup = tabHeader.querySelector('.lm_tabs');\n        const scrollShadows = tabGroup.querySelectorAll('.scroll-shadow');\n        const newTabButton: HTMLDivElement = tabHeader.querySelector('.newTabButton');\n        const controlsContainer: HTMLDivElement = tabHeader.querySelector('.lm_controls');\n\n        // Create space for of absolute-positioned controls container (e.g. popout icon)\n        tabHeader.style.paddingRight = `${controlsContainer?.offsetWidth}px`;\n\n        // tabs.length > 1 prevents scroll shadows when moving tab from\n        // tab header that only has ONE tab\n        const tabs = tabGroup.querySelectorAll('.lm_tab');\n        if (tabGroup.scrollWidth > tabGroup.clientWidth && tabs.length > 1) {\n            // Move new tab button from tab list to tab header so\n            // 1) Plus button doesn't move since it's not part of the tab list\n            // 2) New tabs can properly scroll into view\n            // Golden layouts will automatically re-add a plus button into the tab list\n            // but we will hide it using CSS in the presence of this button.\n            if (newTabButton?.parentElement.classList.contains('lm_tabs')) {\n                tabHeader.insertBefore(newTabButton, tabGroup);\n            }\n\n            let tabGroupRightScrollShadow = Array.from(scrollShadows).find((element) =>\n                element.classList.contains('right-scroll-shadow')\n            ) as HTMLDivElement;\n            // Apply scroll shadows\n            if (!scrollShadows.length) {\n                const tabGroupLeftScrollShadow = document.createElement('div');\n                tabGroupLeftScrollShadow.classList.add('scroll-shadow', 'left-scroll-shadow');\n                tabGroupRightScrollShadow = document.createElement('div');\n                tabGroupRightScrollShadow.classList.add('scroll-shadow', 'right-scroll-shadow');\n\n                tabGroup.appendChild(tabGroupLeftScrollShadow);\n                tabGroup.appendChild(tabGroupRightScrollShadow);\n\n                tabGroup.addEventListener('wheel', handleTabContainerScroll);\n                tabHeader.addEventListener('drag', handleAutoScrollOnTabDrag);\n            }\n\n            // Offset absolute positioned newTab button and scroll shadow if there is a visible controls container (e.g. popout button)\n            if (newTabButton) {\n                newTabButton.style.right = `${controlsContainer.offsetWidth}px`;\n            }\n            tabGroupRightScrollShadow.style.right = `${\n                (controlsContainer?.offsetWidth || 0) + (newTabButton ? 28 : 0)\n            }px`;\n        } else if (tabGroup.scrollWidth <= tabGroup.clientWidth) {\n            // Remove the tab header plus button we inserted for the scrolling case\n            if (newTabButton?.parentElement.classList.contains('lm_header')) {\n                newTabButton.remove();\n            }\n\n            if (scrollShadows.length) {\n                scrollShadows[0].remove();\n                scrollShadows[1].remove();\n            }\n        }\n\n        applyCondensedTabClassNames(tabGroup);\n    });\n};\n\nexport const debouncedToggleScrollShadows = debounce(toggleScrollShadows, 100);\n\nexport const getViewTabTitleOverflowShadow = (\n    theme: DefaultTheme,\n    isSchemeDark: boolean,\n    isTabHoveredOrActive: boolean,\n    isCloseButtonShowing: boolean\n) => {\n    const colorToken = isSchemeDark\n        ? isTabHoveredOrActive\n            ? 'background5'\n            : 'background3'\n        : isTabHoveredOrActive\n        ? 'background3'\n        : 'background1';\n\n    if (isCloseButtonShowing) {\n        return css`\n            background: linear-gradient(\n                90deg,\n                rgb(from ${theme.palette[colorToken]} r g b / 0%) 0%,\n                rgb(from ${theme.palette[colorToken]} r g b / 50%) 28%,\n                rgb(from ${theme.palette[colorToken]} r g b / 100%) 45%\n            );\n        `;\n    } else {\n        return css`\n            background: linear-gradient(\n                90deg,\n                rgb(from ${theme.palette[colorToken]} r g b / 0%) 50%,\n                rgb(from ${theme.palette[colorToken]} r g b / 50%) 75%,\n                rgb(from ${theme.palette[colorToken]} r g b / 100%) 90%\n            );\n        `;\n    }\n};\n","import styled, { css } from 'styled-components';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nconst ExtendedButton = styled(BaseButton)<{ active: boolean }>`\n    ${(props) =>\n        props.active &&\n        css`\n            background-color: ${({ theme }) => theme.palette.statusActive};\n\n            &:hover {\n                background-color: ${({ theme }) => theme.palette.statusActive};\n            }\n        `}\n`;\n\nexport default ExtendedButton;\n","import React, { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Menu, UserMenuParams } from '@common/utils/menu';\nimport { RightMenuConfig } from '@common/utils/menu-config';\nimport { showModalWin } from '@common/utils/popup-window';\n\nimport { closeActiveMenu, openMenu, selectActiveMenu } from '@enterprise/slices/menu';\n\nimport ExtendedButton from '../BaseButton/ExtendedButton';\n\ninterface Props<M extends Menu> {\n    'type': M;\n    'config': RightMenuConfig;\n    'params': UserMenuParams[M];\n    'disabled'?: boolean;\n    'tooltip'?: string;\n    'data-testid'?: string;\n}\n\n/**\n * Generic element for displaying a button that opens a popup menu\n */\nconst MenuButton = <M extends Menu>({\n    params,\n    type,\n    config,\n    disabled,\n    children,\n    tooltip,\n    'data-testid': dataTestId\n}: React.PropsWithChildren<Props<M>>): React.ReactElement => {\n    const dispatch = useDispatch();\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const activeMenu = useSelector(selectActiveMenu);\n    const isActive = useRef<boolean>(false);\n    isActive.current = activeMenu.type === type && !!activeMenu.type;\n\n    const { windowOptions, windowOffset } = config;\n\n    const onClickHandler = () => {\n        if (!buttonRef.current) {\n            throw new Error('Button ref is undefined');\n        }\n\n        const { bottom, left } = buttonRef.current.getBoundingClientRect();\n        const offsetX = (windowOffset?.x || 0) + buttonRef.current.offsetWidth / 2;\n        (async () => {\n            const windowOpts = {\n                x: left + offsetX - windowOptions.defaultWidth / 2,\n                y: bottom,\n                ...windowOptions\n            };\n\n            // Menu needs update state on blur, setup here prior to showing window so there is no chance of a timing issue\n            const win = fin.Window.wrapSync({ uuid: fin.me.uuid, name: windowOpts.name });\n            let hasBeenFocused = false;\n            const blurredListenerPromise = win.once('blurred', () => {\n                if (hasBeenFocused) {\n                    dispatch(closeActiveMenu());\n                }\n            });\n            const focusedListenerPromise = win.once('focused', () => {\n                // Only change the window button state once the menu has been shown & focused\n                dispatch(openMenu(type, params));\n                // Ensure that the window has been focused once so there is no timing issue\n                hasBeenFocused = true;\n            });\n            await Promise.all([blurredListenerPromise, focusedListenerPromise]);\n\n            await showModalWin(params, windowOpts);\n        })();\n    };\n    return (\n        <ExtendedButton\n            title={tooltip}\n            disabled={disabled ?? false}\n            onClick={onClickHandler}\n            active={isActive.current}\n            ref={buttonRef}\n            data-testid={dataTestId}\n        >\n            {children}\n        </ExtendedButton>\n    );\n};\n\nexport default MenuButton;\n","import { Dispatch, FC, MutableRefObject, useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport type OpenFin from '@openfin/core';\n\nimport { showInfo, showSuccess } from '@common/utils/indicators/showIndicator';\nimport { Menu } from '@common/utils/menu';\nimport { RightMenuConfig } from '@common/utils/menu-config';\n\nimport { t } from '@common/api/i18next';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { highlightAllInteropViews, updateContextGroup } from '@enterprise/api/color-linking';\nimport { raiseJoinContextGroupAnalytics, raiseLeaveContextGroupAnalytics } from '@enterprise/api/controls';\n\nimport {\n    selectLayoutsWithSelectedViews,\n    selectShowAllContextGroups,\n    toggleContextGroupOutlines\n} from '@enterprise/slices/tab-focus';\n\nimport { BrowserButtonType } from '@client-platform/shapes';\nimport { useLanguageChange } from '@common/hooks/useLanguageChange';\n\nimport MenuButton from '../../../../MenuButton/MenuButton';\nimport { defaultButtonPropMap } from '../../../utils';\nimport { getColorLinkingMenu } from '../../menus/menuConfig';\nimport { PredefinedIconUrl } from '../MenuButtonIcon';\n\nexport enum ColorLinkingChannelTypes {\n    JOIN_GROUP = 'join-group',\n    LEAVE_GROUP = 'leave-group',\n    SHOW_HIDE_GROUPS = 'show-hide-groups'\n}\n\nexport type ColorLinkingChannelMessageData =\n    | {\n          type: ColorLinkingChannelTypes.JOIN_GROUP | ColorLinkingChannelTypes.LEAVE_GROUP;\n          channelId: string;\n          colorName: string;\n      }\n    | {\n          type: ColorLinkingChannelTypes.SHOW_HIDE_GROUPS;\n      };\n\ninterface Props {\n    tooltip?: string;\n    iconUrl?: string;\n}\n\nconst MENU_TYPE: Menu = Menu.COLOR_LINK;\n\nconst makeColorLinkingMenuHandler =\n    (dispatchRef: MutableRefObject<Dispatch<unknown>>, selectedViewsRef: MutableRefObject<OpenFin.Identity[]>) =>\n    async (ev: MessageEvent<ColorLinkingChannelMessageData>) => {\n        switch (ev.data.type) {\n            case ColorLinkingChannelTypes.JOIN_GROUP:\n                try {\n                    const colorName = ev.data.colorName;\n                    await updateContextGroup(selectedViewsRef.current, ev.data.channelId);\n                    fin.Window.getCurrentSync().focus();\n                    showSuccess({\n                        message: t('successIndicator.namedContextGroupApplied', { colorName: colorName }),\n                        parentBrowserName: fin.me.name\n                    });\n                    selectedViewsRef.current.forEach((view) => raiseJoinContextGroupAnalytics(colorName, view));\n                } catch (e) {\n                    console.warn(e);\n                    // Grab focus to close color linking menu\n                    fin.Window.getCurrentSync().focus();\n                    showInfo({\n                        message: t('infoIndicator.colorLinkAttempt'),\n                        parentBrowserName: fin.me.name\n                    });\n                }\n                break;\n            case ColorLinkingChannelTypes.LEAVE_GROUP: {\n                const colorName = ev.data.colorName;\n                await updateContextGroup(selectedViewsRef.current, ev.data.channelId);\n                fin.Window.getCurrentSync().focus();\n                showSuccess({\n                    message:\n                        selectedViewsRef.current.length > 1\n                            ? t('successIndicator.viewRemoved')\n                            : t('successIndicator.viewsRemoved'),\n                    parentBrowserName: fin.me.name\n                });\n                selectedViewsRef.current.forEach((view) => raiseLeaveContextGroupAnalytics(colorName, view));\n                break;\n            }\n            case ColorLinkingChannelTypes.SHOW_HIDE_GROUPS:\n                dispatchRef.current(toggleContextGroupOutlines());\n        }\n    };\n\nconst makeLayoutReadyHandler = (showAllContextGroupsRef: MutableRefObject<boolean>) => () => {\n    if (showAllContextGroupsRef.current) {\n        highlightAllInteropViews();\n    }\n};\n\nconst ColorLinkingButton: FC<Props> = ({ tooltip, iconUrl }) => {\n    const dispatch = useDispatch();\n    const dispatchRef = useRef(dispatch);\n    dispatchRef.current = dispatch;\n    const activePage = useSelector(selectActivePage);\n\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViews = layoutsWithSelectedViews[activePage.layoutContainerKey];\n    const selectedViewsRef = useRef(selectedViews);\n    selectedViewsRef.current = selectedViews;\n\n    const showAllContextGroups = useSelector(selectShowAllContextGroups);\n    const showAllContextGroupsRef = useRef(showAllContextGroups);\n    showAllContextGroupsRef.current = showAllContextGroups;\n\n    const [menuButtonConfig, setMenuButtonConfig] = useState<RightMenuConfig | null>(null);\n\n    const disabled = !!activePage.isLocked;\n\n    const onLanguageChange = useCallback(() => {\n        Promise.all([getColorLinkingMenu(t('toolbar.colorLinking')), fin.me.interop.getContextGroups()] as const).then(\n            ([menu, groups]) => {\n                setMenuButtonConfig({\n                    ...menu,\n                    windowOptions: {\n                        ...menu.windowOptions,\n                        defaultWidth: 32 * Math.min(groups.length + 1, 10) + 4 // buttonWidth * buttons# + 4 px to account for margins\n                    }\n                });\n            }\n        );\n    }, []);\n\n    useLanguageChange(onLanguageChange);\n\n    useEffect(() => {\n        const channelToMenu = new BroadcastChannel(`color-linking-${fin.me.name}`);\n        channelToMenu.onmessage = makeColorLinkingMenuHandler(dispatchRef, selectedViewsRef);\n\n        const handleLayoutReady = makeLayoutReadyHandler(showAllContextGroupsRef);\n\n        // When new layout is applied, golden-layout will re-create some elements.\n        // Re-apply color-linking styles when this happens.\n        (fin.me as OpenFin.Window).on('layout-ready', handleLayoutReady);\n\n        return () => {\n            (fin.me as OpenFin.Window).removeListener('layout-ready', handleLayoutReady);\n            channelToMenu.close();\n        };\n    }, []);\n\n    const customToolTip = tooltip || menuButtonConfig?.title;\n    const defaultIcon = defaultButtonPropMap[BrowserButtonType.ColorLinking].iconProps.icon;\n\n    if (!menuButtonConfig) {\n        return null;\n    }\n\n    return (\n        <MenuButton\n            type={MENU_TYPE}\n            config={menuButtonConfig}\n            params={{ selectedViews: JSON.stringify(selectedViews) }}\n            tooltip={customToolTip}\n            disabled={disabled}\n        >\n            <PredefinedIconUrl customIconUrl={iconUrl} uiLibIcon={defaultIcon} disabled={disabled} />\n        </MenuButton>\n    );\n};\n\nexport default ColorLinkingButton;\n","import React, { FC } from 'react';\n\nimport { IconSizeType, IconType } from '@openfin/ui-library';\n\nimport { CustomIcon } from '@common/components/Icon/CustomIcon';\n\nimport { StyledIcon } from '@common/styles/svg-icons';\ninterface Props {\n    'customIconUrl'?: string;\n    'uiLibIcon'?: IconType;\n    'disabled'?: boolean;\n    'size'?: IconSizeType;\n    'data-testid'?: string;\n}\nexport const PredefinedIconUrl: FC<Props> = ({ customIconUrl, uiLibIcon, disabled, size, ...rest }) => {\n    return customIconUrl ? (\n        <CustomIcon iconURL={customIconUrl} size={size} {...rest} />\n    ) : (\n        <StyledIcon disabled={disabled} icon={uiLibIcon} size={size} {...rest} />\n    );\n};\n","import OpenFin from '@openfin/core';\n\nimport type { IconProps } from '@openfin/ui-library';\n\nimport { showSuccess } from '@common/utils/indicators/showIndicator';\nimport { currentOFIdentity, getCurrentOFWindow } from '@common/utils/window';\n\nimport { t } from '@common/api/i18next';\nimport { getTabsHandler } from '@common/api/tabs';\n\nimport { BrowserButtonType, ToolbarOptions, WindowStateButtonOptions } from '@client-platform/shapes';\n\nexport const handleMinimizeClick = () => {\n    getCurrentOFWindow()\n        .minimize()\n        .catch((err) => {\n            console.error(`RightControlsContainer: Failed to minimize: ${err}`);\n        });\n};\n\nexport const handleShowHideTabs = async (layoutIdentity: OpenFin.LayoutIdentity) => {\n    const tabHandler = getTabsHandler(layoutIdentity);\n    const isShowing = await tabHandler.isShowingTabs();\n    if (isShowing) {\n        await tabHandler.hide();\n    } else {\n        await tabHandler.show();\n    }\n    showSuccess({\n        message: t(isShowing ? 'successIndicator.hidden' : 'successIndicator.shown'),\n        parentBrowserName: currentOFIdentity.name\n    });\n    await fin.me.focus();\n};\n\nenum DefaultIconStrings {\n    ColorLinking = 'TargetIcon',\n    PresetLayouts = 'GridIcon',\n    ShowHideTabs = 'LightBulbOutlinedIcon',\n    LockUnlockPage = 'LockOpen1Icon',\n    SaveMenu = 'FloppyDiskIcon'\n}\n\nexport const defaultButtonPropMap: {\n    [key in Exclude<BrowserButtonType, 'Custom' | 'Maximise'>]: {\n        iconProps: IconProps;\n        macIcon?: any;\n        macIconHover?: any;\n        macIconInactive?: any;\n        tooltipKey?: string;\n    };\n} = {\n    [BrowserButtonType.ColorLinking]: {\n        iconProps: { icon: DefaultIconStrings.ColorLinking, size: 'small' }\n    },\n    [BrowserButtonType.PresetLayouts]: {\n        iconProps: { icon: DefaultIconStrings.PresetLayouts, size: 'small' }\n    },\n    [BrowserButtonType.SaveMenu]: { iconProps: { icon: DefaultIconStrings.SaveMenu, size: 'small' } },\n    // Pls keep me for backwards compatibility with < v7\n    [BrowserButtonType.SavePage]: { iconProps: { icon: DefaultIconStrings.SaveMenu, size: 'small' } },\n\n    [BrowserButtonType.ShowHideTabs]: {\n        iconProps: { icon: DefaultIconStrings.ShowHideTabs, size: 'small' }\n    },\n    [BrowserButtonType.LockUnlockPage]: {\n        iconProps: { icon: DefaultIconStrings.LockUnlockPage, size: 'small' }\n    },\n    [BrowserButtonType.Minimise]: {\n        tooltipKey: 'toolbar.minimizeWindow',\n        iconProps: { icon: 'DividerHorizontalIcon', size: 'small' }\n    },\n    [BrowserButtonType.Close]: {\n        tooltipKey: 'contextMenu.closeWindow',\n        iconProps: { icon: 'Cross1Icon', size: 'small' }\n    }\n} as const;\n\nexport const defaultToolbarButtonConfig: ToolbarOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.ShowHideTabs\n        },\n        {\n            type: BrowserButtonType.ColorLinking\n        },\n        {\n            type: BrowserButtonType.PresetLayouts\n        },\n        {\n            type: BrowserButtonType.LockUnlockPage\n        },\n        {\n            type: BrowserButtonType.SaveMenu\n        }\n    ]\n};\n\nexport const defaultWindowStateButtonConfig: WindowStateButtonOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.Minimise\n        },\n        {\n            type: BrowserButtonType.Maximise\n        },\n        {\n            type: BrowserButtonType.Close\n        }\n    ]\n};\n\nexport const defaultMacWindowStateButtonConfig: WindowStateButtonOptions = {\n    buttons: [\n        {\n            type: BrowserButtonType.Close\n        },\n        {\n            type: BrowserButtonType.Minimise\n        },\n        {\n            type: BrowserButtonType.Maximise\n        }\n    ]\n};\n","import OpenFin from '@openfin/core';\n\nimport { getBrowserWindowWithoutView } from '@common/utils/get-browser-window';\nimport { trimUrl } from '@common/utils/url';\nimport { showAndFocus } from '@common/utils/window';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { t } from '@common/api/i18next';\nimport { BookmarkNode } from '@common/api/pages/shapes';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport { AttachedPage, Site } from '@client-platform/index';\n\nexport const COMMAND_BAR_HEIGHT = 40;\nexport const SEARCH_PROVIDER_TAB_HEIGHT = 33;\n\nexport const handleAlreadyOpenPage = (attachedPages: AttachedPage[], site?: Site): boolean => {\n    if (!site || site?.type !== 'page' || !site?.id) {\n        return false;\n    }\n    const pageId = site.id;\n    for (const page of attachedPages) {\n        if (pageId === page.pageId) {\n            const bw = getCurrentSync().Browser.wrapSync(page.parentIdentity);\n            showAndFocus(bw.identity);\n            bw.setActivePage(site.id);\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const convertSiteData = (result: any): Site => {\n    return {\n        id: result.id,\n        url: result.url,\n        type: 'website',\n        icon: result.icon,\n        title: result.title\n    };\n};\n\nexport const getRecentlyVisitedSites = async () => {\n    const platform = getCurrentSync();\n    const browserWin = platform.Browser.wrapSync(currentOFIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    const getRecentlylVisited = await browserWin._getRecentlyVisitedSites();\n    const recentlylVisitedSites: Site[] = [];\n    getRecentlylVisited.forEach((result) => {\n        recentlylVisitedSites.push(convertSiteData(result));\n    });\n    return recentlylVisitedSites;\n};\n\nexport const formatRecentUrl = (url: string): string => {\n    const { host, pathname, hash, search } = new URL(url);\n    const [pathRoot, ...restOfPath] = pathname.split('/').filter((value) => value.length);\n    if (restOfPath.length) {\n        return `${host}/${pathRoot}/`;\n    }\n    return `${host}${pathname === '/' ? '' : pathname}${search}${hash}`;\n};\n\nexport const getSiteSubTitle = (site: Site, urlFormatter: (value: string) => string): string => {\n    const { type, subTitle } = site;\n    if (subTitle) {\n        return subTitle;\n    }\n    if (type === 'website') {\n        const { url } = site;\n        return urlFormatter(url);\n    }\n    const appOrSupertab =\n        type === 'page'\n            ? t('global.supertab')\n            : type === 'collection'\n            ? 'Collection'\n            : type?.charAt(0).toUpperCase() + type?.slice(1);\n    return appOrSupertab;\n};\n\nexport const trimWithEllipsis = (str: string, characters: number) => {\n    if (str.length > characters) {\n        return `${str.substring(0, characters).trim()}`;\n    } else {\n        return str;\n    }\n};\n\nexport const checkViewUrl = async (\n    view: OpenFin.View | null,\n    url: string,\n    setViewNavigatedToUrl: (value: boolean) => void\n) => {\n    if (!view) {\n        setViewNavigatedToUrl(false);\n        return;\n    }\n\n    const viewInfo = await view.getInfo();\n    setViewNavigatedToUrl(trimUrl(viewInfo.url) === url);\n};\n\nexport const searchBookmark = async (\n    url: string,\n    browserIdentity?: OpenFin.Identity\n): Promise<BookmarkNode | undefined> => {\n    const browserWindow = await getBrowserWindowWithoutView(browserIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    const potentialMatching = (await browserWindow._bookmarks._searchBookmarkNodes(trimUrl(url))) as BookmarkNode[];\n\n    const bookmarks = potentialMatching.filter((bookmark) => {\n        return trimUrl(bookmark.url) === trimUrl(url);\n    });\n\n    return bookmarks[0];\n};\n","import styled from 'styled-components';\n\nconst TextSpan = styled.span`\n    font-size: ${({ theme }) => theme.fontSize.base};\n    font-family: ${({ theme }) => theme.fontFamily};\n    color: ${({ theme }) => theme.palette.textDefault};\n    user-select: none;\n`;\n\nexport default TextSpan;\n","export const CONTROL_BAR_HEIGHT = 40;\n","import { FC, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { enterpriseCustomIconId } from '@common/utils/test-ids';\n\nimport { selectTargetTheming } from '@common/slices/target-theming';\n\nimport { CustomIcon } from '@common/components/Icon/CustomIcon';\n\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\n\ntype BrandLogoContainerProps = {\n    size: 'small' | 'large';\n};\n\nconst Icon = styled(CustomIcon)`\n    min-width: 100%;\n    min-height: 100%;\n    width: 100%;\n    height: 100%;\n`;\n\nconst BrandIcon: FC<BrandLogoContainerProps> = ({ size }) => {\n    const theme = useSelector(selectTargetTheming);\n    const { isSchemeDark } = useSystemSchemeCheck();\n\n    const currentTheme = useMemo(() => {\n        if (theme) {\n            return isSchemeDark ? theme.theme.dark : theme.theme.light;\n        }\n    }, [theme, isSchemeDark]);\n\n    const iconUrl = useMemo(() => currentTheme?.brand?.icons?.symbol, [currentTheme]);\n\n    return (\n        <>\n            {iconUrl && (\n                <span\n                    role=\"img\"\n                    aria-label={`Company Logo`}\n                    style={{ display: 'inline-block', width: '100%', height: '100%' }}\n                >\n                    <Icon size={size} iconURL={iconUrl} testId={enterpriseCustomIconId} />\n                </span>\n            )}\n        </>\n    );\n};\n\nexport default BrandIcon;\n","import { COMMAND_BAR_HEIGHT, SEARCH_PROVIDER_TAB_HEIGHT } from '@enterprise/components/ControlBar/SearchMenu/utils';\n\nimport { MENU_BOUNDS } from './useAdjustSearchMenuViewDimensions';\n\n/**\n * @description Get the width of the search menu based on the parent window width and the expanded state of the menu\n * @param parentWindowWidth - The width of the parent window\n * @returns {number} The calculated width of the search menu\n */\nexport const getSearchMenuWidth = (parentWindowWidth: number): number => {\n    let expandedWidth = parentWindowWidth * MENU_BOUNDS.percentOfParentWidth;\n    if (expandedWidth > MENU_BOUNDS.expanded.maxWidth) {\n        expandedWidth = MENU_BOUNDS.expanded.maxWidth;\n    } else if (expandedWidth < MENU_BOUNDS.expanded.minWidth) {\n        expandedWidth = MENU_BOUNDS.expanded.minWidth;\n    }\n    return Math.ceil(expandedWidth);\n};\n\n/**\n * @description Get the height of the search menu based on the parent window height, the expanded state of the menu, and the UI state of the menu\n * @param parentWindowHeight - The height of the parent window\n * @param shouldShowEmptySearchInputContainer - Whether the empty search input UI should be shown\n * @param container - The container for the search menu\n * @returns {number} The calculated height of the search menu\n */\nexport const getSearchMenuHeight = (\n    parentWindowHeight: number,\n    shouldShowEmptySearchInputContainer: boolean,\n    container: HTMLElement\n): number => {\n    const resultsContainer = document.getElementById('results-container');\n    const emptySearchInputContainer = document.getElementById('empty-search-input-container');\n\n    const resultContainerMaxHeight =\n        resultsContainer !== null\n            ? Math.max(\n                  container.scrollHeight,\n                  // Heights of all of the contents of the Result Container UI.\n                  resultsContainer.scrollHeight + COMMAND_BAR_HEIGHT + SEARCH_PROVIDER_TAB_HEIGHT\n              )\n            : container.scrollHeight;\n\n    const emptySearchInputContainerHeight =\n        emptySearchInputContainer !== null\n            ? Math.min(\n                  MENU_BOUNDS.emptySearchInputContainer.maxHeight,\n                  // Heights of all of the contents of the Empty Search Input UI\n                  emptySearchInputContainer.scrollHeight + SEARCH_PROVIDER_TAB_HEIGHT\n              )\n            : Math.min(container.scrollHeight, MENU_BOUNDS.emptySearchInputContainer.maxHeight);\n\n    let height;\n    /**\n     * Remark: There always needs to be parentWindowHeightOffset amount of space between the search menu view and the bottom of the browser window.\n     *\n     * The code below does the following:\n     *   - If the EmptySearchInputContainer is shown\n     *     - If the browser window is not tall enough to show the entire EmptySearchInputContainer, then the height of the view\n     *         is set to the maximum of the available space dictated by the browser window and the min height of the EmptySearchInputContainer.\n     *         This ensures that the minimum height of the EmptySearchInputContainer is respected.\n     *     - Else if the browser window is tall enough to show the entire EmptySearchInputContainer, then the height of the view\n     *         is set to the height that the EmptySearchInputContainer needs to be to show all its content (Search Provider Tab, Feature Content, and Recents), without exceed the EmptySearchInputContainer max height.\n     *   - Else if the ResultsContainer is shown\n     *      - We set the the height of the view to the maximum height needed to show all the content of the ResultsContainer (Search Provider Tab, Results List, and Command Bar),\n     *          while respecting the height bounds for the ResultsContainer and the height of the parent window.\n     */\n    if (shouldShowEmptySearchInputContainer) {\n        const emptySearchContainerExceedsParentHeight =\n            parentWindowHeight - MENU_BOUNDS.parentWindowHeightOffset < MENU_BOUNDS.emptySearchInputContainer.maxHeight;\n        const emptySearchContainerContentMeetsMinHeight =\n            emptySearchInputContainerHeight > MENU_BOUNDS.emptySearchInputContainer.minHeight;\n\n        if (emptySearchContainerExceedsParentHeight && emptySearchContainerContentMeetsMinHeight) {\n            height = Math.max(\n                parentWindowHeight - MENU_BOUNDS.parentWindowHeightOffset,\n                MENU_BOUNDS.emptySearchInputContainer.minHeight\n            );\n        } else {\n            height = emptySearchInputContainerHeight;\n        }\n    } else {\n        height = Math.min(\n            resultContainerMaxHeight,\n            MENU_BOUNDS.resultsContainerMaxHeight,\n            parentWindowHeight - MENU_BOUNDS.parentWindowHeightOffset\n        );\n    }\n\n    return height;\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport debounce from 'lodash.debounce';\n\nimport { SearchMenuChannelResponse } from '@common/utils/popup-window';\nimport { getOFWindow, WindowName } from '@common/utils/window';\n\nimport { COMMAND_BAR_HEIGHT, SEARCH_PROVIDER_TAB_HEIGHT } from '@enterprise/components/ControlBar/SearchMenu/utils';\nimport { CONTROL_BAR_HEIGHT } from '@enterprise/components/ControlBar/utils';\n\nimport { useIsWindows } from '@enterprise/hooks/useIsWindows';\n\nimport { getSearchMenuHeight, getSearchMenuWidth } from './getDimensions';\n\n/* Static values coming from design spec. */\nexport const MENU_BOUNDS = {\n    expanded: {\n        minWidth: 376,\n        maxWidth: 728\n    },\n    emptySearchInputContainer: {\n        minHeight: 408,\n        maxHeight: 518 + SEARCH_PROVIDER_TAB_HEIGHT\n    },\n    percentOfParentWidth: 0.7,\n    resultsContainerMaxHeight: 475 + COMMAND_BAR_HEIGHT + SEARCH_PROVIDER_TAB_HEIGHT, // total height should be 588 - 40 (height of the search input container)\n    parentWindowHeightOffset: 40 + CONTROL_BAR_HEIGHT\n};\n\n/**\n * Custom hook to adjust the dimensions of the search menu view based on various conditions. The search menu will expand and collapse when opened or closed.\n * When open, the search menu will expand to include all of the content (either results or curated content) until the height reaches the maximum.\n * The search menu dimensions are sent to the browser window, where the view is resized accordingly.\n *\n * This hook also listens for resize events on the parent window to adjust the search menu view dimensions accordingly.\n *\n * @param {React.RefObject<HTMLElement>} containerRef - Ref object pointing to the container element of the search menu.\n * @param {boolean} shouldExpand - Boolean indicating if the search results view should expand.\n * @param {React.RefObject<BroadcastChannel>} searchMenuChannel - Ref object for the broadcast channel used to communicate with the browser window.\n * @param {boolean} shouldShowEmptySearchContainer - Boolean indicating if the emptySearchInputContainer container should be shown.\n * @param {number} offsetLeft - Number indicating the left offset for the search menu view derived from browser input container ref.\n */\nconst useAdjustSearchMenuViewDimensions = (\n    containerRef: React.RefObject<HTMLElement>,\n    shouldExpand: boolean,\n    searchMenuChannel: React.RefObject<BroadcastChannel>,\n    shouldShowEmptySearchContainer: boolean,\n    offsetLeft: number\n) => {\n    // Windows has 1px window border, so we need an extra 1px from the top\n    const isWindows = useIsWindows();\n    const offsetTop = CONTROL_BAR_HEIGHT + (isWindows ? 2 : 1);\n    const [viewBounds, setViewBounds] = useState<{ height: number; width: number }>({ height: 0, width: 0 });\n\n    const adjustViewDimensions = useCallback(\n        async (container: HTMLElement) => {\n            if (searchMenuChannel.current && shouldExpand) {\n                const parentName = fin.me.name.replace(WindowName.BrowserAddressSearchPrefix, '');\n                const { width: parentWindowWidth, height: parentWindowHeight } = await getOFWindow({\n                    uuid: fin.me.uuid,\n                    name: parentName\n                }).getBounds({ boundsType: 'current' });\n\n                const width = getSearchMenuWidth(parentWindowWidth);\n                const height = getSearchMenuHeight(parentWindowHeight, shouldShowEmptySearchContainer, container);\n                setViewBounds({ height, width });\n            }\n        },\n        [searchMenuChannel, shouldShowEmptySearchContainer, shouldExpand]\n    );\n\n    useEffect(() => {\n        const container = containerRef.current;\n        if (container) {\n            // Call adjustViewDimensions immediately to set the initial dimensions\n            adjustViewDimensions(container);\n\n            // Reduces flickering when resizing the view\n            const debounceAdjustViewDimensions = debounce(() => adjustViewDimensions(container), 100, {\n                leading: true\n            });\n\n            const menuResizeObserver = new ResizeObserver(debounceAdjustViewDimensions);\n            menuResizeObserver.observe(container);\n\n            return () => menuResizeObserver.disconnect();\n        }\n    }, [containerRef, adjustViewDimensions]);\n\n    useEffect(() => {\n        if (shouldExpand) {\n            (async () => {\n                await (fin.me as OpenFin.View).showAt(\n                    { ...viewBounds, top: offsetTop, left: offsetLeft },\n                    { bringToFront: true }\n                );\n\n                searchMenuChannel.current.postMessage({\n                    type: 'resize-view',\n                    width: viewBounds.width\n                } as SearchMenuChannelResponse);\n            })();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [viewBounds]);\n\n    useEffect(() => {\n        const parentName = fin.me.name.replace(WindowName.BrowserAddressSearchPrefix, '');\n        const parentWindow = getOFWindow({\n            uuid: fin.me.uuid,\n            name: parentName\n        });\n\n        const resizeHandler = async () => {\n            await adjustViewDimensions(containerRef.current);\n        };\n\n        const setUpResizeListener = async () => {\n            await parentWindow.addListener('bounds-changed', resizeHandler);\n        };\n        setUpResizeListener();\n\n        return () => {\n            parentWindow.removeListener('bounds-changed', resizeHandler);\n        };\n    }, [adjustViewDimensions]);\n};\n\nexport default useAdjustSearchMenuViewDimensions;\n","import { useEffect } from 'react';\n\nexport const useCallbackOnAPIReady = (callback: () => Promise<void>) => {\n    useEffect(() => {\n        fin.Platform.getCurrentSync().on('platform-api-ready', callback);\n\n        return () => {\n            fin.Platform.getCurrentSync().removeListener('platform-api-ready', callback);\n        };\n    }, [callback]);\n};\n","const spinner = `<svg width=\"16\" height=\"16\" stroke=\"black\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><style>.spinner_V8m1{transform-origin:center;animation:spinner_zKoa 2s linear infinite}.spinner_V8m1 circle{stroke-linecap:round;animation:spinner_YpZS 1.5s ease-in-out infinite}@keyframes spinner_zKoa{100%{transform:rotate(360deg)}}@keyframes spinner_YpZS{0%{stroke-dasharray:0 150;stroke-dashoffset:0}47.5%{stroke-dasharray:42 150;stroke-dashoffset:-16}95%,100%{stroke-dasharray:42 150;stroke-dashoffset:-59}}</style><g class=\"spinner_V8m1\"><circle cx=\"12\" cy=\"12\" r=\"9.5\" fill=\"none\" stroke-width=\"1.25\"></circle></g></svg>`;\n\nexport const createSpinner = (): SVGElement => {\n    const parser = new DOMParser();\n    return parser.parseFromString(spinner, 'image/svg+xml').firstChild as SVGElement;\n};\n","import { createContext, useState } from 'react';\n\nexport type SearchViewExpansionState = {\n    method?: 'click' | 'keystroke';\n    shouldExpand: boolean;\n};\n\ntype WindowSearchMenuContextType = {\n    shouldExpandMenu: SearchViewExpansionState;\n    setShouldExpandMenu: (shouldExpandMenu: SearchViewExpansionState) => void;\n};\n\nexport const WindowSearchMenuContext = createContext<WindowSearchMenuContextType>({\n    shouldExpandMenu: { shouldExpand: false },\n    setShouldExpandMenu: () => {\n        return;\n    }\n});\n\nexport const WindowSearchMenuContextProvider = ({ children }: { children?: React.ReactNode }) => {\n    const [shouldExpandMenu, setShouldExpandMenu] = useState<SearchViewExpansionState>({ shouldExpand: false });\n\n    return (\n        <WindowSearchMenuContext.Provider value={{ shouldExpandMenu, setShouldExpandMenu }}>\n            {children}\n        </WindowSearchMenuContext.Provider>\n    );\n};\n","import { Dispatch, SetStateAction, useCallback, useContext, useEffect, useRef } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport {\n    BrowserSearchMenuKeyboardEvent,\n    SearchMenuChannelMessage,\n    SearchMenuChannelResponse\n} from '@common/utils/popup-window';\nimport { getCurrentOFWindow } from '@common/utils/window';\n\nimport { SearchMenuChannel } from '@enterprise/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBar';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport { NavigationRequest, Site, SiteAction } from '@client-platform/shapes';\nimport { WindowSearchMenuContext } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\n\n/**\n * Promise that resolves when the channel is ready to receive messages.\n */\nexport const searchViewReady = (() => {\n    let resolve: () => void;\n    const promise = new Promise<void>((res) => {\n        resolve = res;\n    });\n\n    return { promise, resolve };\n})();\n\n/**\n * Custom hook that initializes a channel between the browser window and the search view to receive communications from the search view.\n * These messages include navigation requests, keyboard events to modify the search text while the search view is focused, and view resize requests,\n *\n * @param selectedViews - Array of currently selected views in the browser window.\n * @param selectedViewUrl - The URL of the currently selected view.\n * @param searchMenuChannel - Object containing a function to send messages to the search view.\n * @param setAddressBarWidth - Function that updates the width in pixels of the address input bar in its expanded state.\n * @param setShouldExpandMenu - Function that updates whether the menu should expand and the method of expansion.\n * @param setSearchText - Function that updates the search text in the address input.\n * @param resetAddressBarToSelectedViewUrl - Function that resets the address bar to the URL of the selected view.\n */\nexport const useInitChannelToSearchMenuView = (\n    selectedViews: OpenFin.Identity[],\n    selectedViewUrl: string,\n    searchMenuChannel: SearchMenuChannel,\n    setAddressBarWidth: Dispatch<SetStateAction<number>>,\n    setSearchText: Dispatch<SetStateAction<string>>,\n    resetAddressBarToSelectedViewUrl: () => void\n) => {\n    const { setShouldExpandMenu } = useContext(WindowSearchMenuContext);\n    const broadcastChannel = useRef<BroadcastChannel | null>(null);\n\n    const handleNavigation = useCallback(\n        async (input: Site | string, view: OpenFin.Identity, trigger?: SiteAction) => {\n            const navigationRequest: NavigationRequest =\n                typeof input === 'string'\n                    ? {\n                          windowIdentity: fin.me.identity,\n                          viewIdentity: view,\n                          action: 'search-input',\n                          query: input,\n                          queryId: '',\n                          providerId: ''\n                      }\n                    : {\n                          windowIdentity: fin.me.identity,\n                          viewIdentity: view,\n                          action: 'result-selected',\n                          site: input,\n                          trigger: trigger\n                      };\n\n            if (selectedViews && selectedViews.length > 0) {\n                const platform = getCurrentSync();\n                const browserWin = platform.Browser.wrapSync(fin.me.identity);\n                // eslint-disable-next-line no-underscore-dangle\n                await browserWin._handleRequestNavigation(navigationRequest);\n            } else {\n                console.warn('`handleNavigation` was called without any selected views');\n            }\n        },\n        [selectedViews]\n    );\n\n    const handleKeyFromView = useCallback(async (event: BrowserSearchMenuKeyboardEvent) => {\n        await getCurrentOFWindow().focus();\n\n        const { key, metaKey, ctrlKey, altKey } = event.options;\n        if (key.length === 1) {\n            setSearchText((searchText) => searchText + key);\n        } else if (key === 'Backspace' && !metaKey && !ctrlKey && !altKey) {\n            setSearchText((searchText) => searchText.slice(0, -1));\n        } else if (key === 'Escape') {\n            setShouldExpandMenu({ shouldExpand: false });\n        }\n    }, []);\n\n    useEffect(() => {\n        broadcastChannel.current ||= new BroadcastChannel(`search-menu-${fin.me.identity.name}`);\n        searchMenuChannel.postMessage = async (message: SearchMenuChannelMessage) => {\n            await searchViewReady.promise; // Wait for the channel to be ready before sending messages\n            broadcastChannel.current.postMessage(message);\n        };\n        broadcastChannel.current.postMessage({ type: 'ready' } as SearchMenuChannelMessage);\n\n        return () => {\n            broadcastChannel.current?.close();\n            broadcastChannel.current = null;\n        };\n    }, []);\n\n    useEffect(() => {\n        broadcastChannel.current.onmessage = (ev: MessageEvent<SearchMenuChannelResponse>) => {\n            searchViewReady.resolve(); // after the first message is received, the channel is ready to send messages (sent by `useInitChannelToBrowserWindow.ts`)\n            if (ev.data.type === 'search-response') {\n                if (ev.data.handled) {\n                    setShouldExpandMenu({ shouldExpand: false });\n                } else if (ev.data.selectedSite) {\n                    resetAddressBarToSelectedViewUrl();\n                    setShouldExpandMenu({ shouldExpand: false });\n                    handleNavigation(ev.data.selectedSite, ev.data.selectedView, ev.data.trigger);\n                }\n            } else if (ev.data.type === 'keyboard-event') {\n                handleKeyFromView(ev.data.keyboardEvent);\n            } else if (ev.data.type === 'resize-view') {\n                setAddressBarWidth(ev.data.width);\n            } else if (ev.data.type === 'search-provider-changed') {\n                setSearchText((text) => (text === selectedViewUrl ? '' : text));\n            }\n        };\n    }, [broadcastChannel.current, selectedViewUrl, resetAddressBarToSelectedViewUrl]);\n};\n","import { Dispatch, SetStateAction, useContext, useEffect, useRef } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport debounce from 'lodash.debounce';\n\nimport { isLandingPageOrEmpty } from '@common/utils/enterpriseBrowser';\nimport { getCurrentOFWindow, showAndFocus, WindowName } from '@common/utils/window';\n\nimport { BrowserChannelAction, getBrowserChannelClient } from '@common/api/protocol/browser';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport { WindowSearchMenuContext } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\nimport store from '@enterprise/store';\n\nimport { getSearchMenuWidth } from './AdjustSearchMenuDimensions/getDimensions';\nimport { searchViewReady } from './useInitChannelToSearchMenuView';\n\ntype WindowBlurredOrViewFocusedEvent =\n    | Extract<OpenFin.WindowEvents.WindowEvent, { type: 'view-focused' }>\n    | OpenFin.WebContentsEvents.BlurredEvent;\n\nexport let lastViewEvent: { viewIdentity: OpenFin.Identity; type: 'view-focused' | 'tab-created' } = null;\n\nexport const resetLastFocusedView = () => {\n    lastViewEvent = null;\n};\n\nlet focusSearchViewAfterWindowBlurTimeout: NodeJS.Timeout = null;\n\nconst getAddressBarInputElement = () => {\n    return document.querySelector('#address-bar-url-input') as HTMLInputElement;\n};\n\n/**\n * This function enables the following behaviors:\n *  - When a new view tab is created via the new tab button that is on the landing page, the address input will focus.\n *  - When a user clicks on an inactive view tab on the landing page, the address input will focus.\n *  - When a user clicks on an active view tab on the landing page while the address input bar is focused, the view will focus.\n *\n * Returns true if address bar input is focused, false otherwise.\n */\n\nexport const debouncedHandleAddressFocusOnLandingPage = debounce(\n    async ({ viewIdentity, type }: typeof lastViewEvent) => {\n        const addressBarInput = getAddressBarInputElement();\n        const isEventOnSameView = lastViewEvent?.viewIdentity.name === viewIdentity.name;\n\n        // If there is no lastViewEvent, or if the event wasn't on the same view\n        if (!lastViewEvent || !isEventOnSameView) {\n            lastViewEvent = { viewIdentity, type };\n            const { url } = await fin.View.wrapSync(viewIdentity).getInfo();\n\n            if (isLandingPageOrEmpty(url)) {\n                getCurrentOFWindow().focus();\n                addressBarInput.focus();\n                return true;\n            }\n        } else if (!viewIdentity.name.startsWith(WindowName.BrowserAddressSearchPrefix)) {\n            // Focusing on a view doesn't change the document.activeElement, so we must explicitly blur the input.\n            // This will prevent the address bar from refocusing if a user tabs away from and then back to the browser window.\n            addressBarInput.blur();\n        }\n        return false;\n    },\n    150\n);\n\n/**\n * This function enables the following behaviors:\n *  - When a user re-organizes a view tab on the landing page in a layout, the address input will focus.\n *  - When a user drags a page tab that is on the landing page into a layout, the address input will focus.\n *  - When a user drags out a view or page tab on the landing page to create a new window, the address input will focus (from 'tab-created' event).\n */\nexport const resetLastFocusedViewAndHandleViewFocused = async (event: typeof lastViewEvent) => {\n    lastViewEvent = null;\n    return debouncedHandleAddressFocusOnLandingPage(event);\n};\n\n/**\n * This function handles the blurring of search view when a user blurs the browser window.\n * NOTE: This function is only being exported to prevent typecheck error. It is not currently used, but we will preserve\n * it in case any requirements change in the behavior of the search menu on window blur.\n */\nexport const handleBrowserWindowBlurred = (event: WindowBlurredOrViewFocusedEvent, callback: () => void) => {\n    if (event.type === 'blurred') {\n        focusSearchViewAfterWindowBlurTimeout = setTimeout(() => {\n            callback();\n        }, 150);\n    } else if (event.type === 'view-focused') {\n        clearTimeout(focusSearchViewAfterWindowBlurTimeout);\n    }\n};\n\n/**\n * Custom hook that responds to updates to view expansion state updates, handles view focus events, and controls focus on the search input.\n *\n * @param {Dispatch<SetStateAction<number>>} setAddressBarWidth - Function that updates the width in pixels of the address input bar in its expanded state.\n * @param {() => void} resetAddressBarToSelectedViewUrl - Function to reset the address bar with the selected view's URL.\n */\nexport const useUpdateViewExpansionState = (\n    setAddressBarWidth: Dispatch<SetStateAction<number>>,\n    resetAddressBarToSelectedViewUrl: () => void\n) => {\n    const { shouldExpandMenu, setShouldExpandMenu } = useContext(WindowSearchMenuContext);\n    const isSearchShortcutInvoked = useRef<boolean>(false);\n\n    useEffect(() => {\n        const focusInputAndExpandSearchView = async () => {\n            isSearchShortcutInvoked.current = true;\n\n            // Calling window focus via the API will implicitly trigger a view-focus event. Reset the last focused view\n            // tracker before calling focus to avoid an immediate search menu blur from the viewFocusListener below.\n            resetLastFocusedView();\n\n            // Promise resolves when search menu completes handshake with browser window. Avoids race condition.\n            await searchViewReady.promise;\n\n            getAddressBarInputElement().focus();\n            setShouldExpandMenu({ shouldExpand: true, method: 'click' });\n            await showAndFocus(fin.me);\n        };\n\n        const initializeChannel = async () => {\n            const browserChannel = await getBrowserChannelClient();\n            browserChannel.register(BrowserChannelAction.FocusAndExpandSearchInternal, focusInputAndExpandSearchView);\n        };\n\n        initializeChannel();\n    }, []);\n\n    useEffect(() => {\n        const viewFocusListener = async (\n            event: Extract<OpenFin.WindowEvents.WindowEvent, { type: 'view-focused' }>\n        ) => {\n            const activePage = selectActivePage(store.getState());\n            const selectedViews = selectSelectedViewsForPage(store.getState(), activePage.pageId);\n\n            // In some cases, when dragging out a view from an active page to create a new page level tab, the newly focused view\n            // from the now previously active page will fire a view-focus event. We want to ignore these events.\n            if (!selectedViews.some(({ name }) => name === event.viewIdentity.name)) return;\n\n            // After calling focusInputAndExpandSearchView, this handler will get invoked with the landing page view identity.\n            // Since we cleared the last focused view tracker to avoid the immediate blur, we should set it again with this view\n            // identity because debouncedHandleAddressFocusOnLandingPage depends on it to accurately determine focus state.\n            if (isSearchShortcutInvoked.current) {\n                lastViewEvent = event;\n                isSearchShortcutInvoked.current = false;\n            }\n\n            if (!event.viewIdentity.name.startsWith(WindowName.BrowserAddressSearchPrefix)) {\n                // Focusing on a view doesn't change the document.activeElement, so we must explicitly close the view.\n                // Whether the address bar should blur is determined in debouncedHandleAddressFocusOnLandingPage().\n                setShouldExpandMenu({ shouldExpand: false });\n\n                // Reset the address bar text to the selected view's URL when refocusing on the selected view\n                // or if the last selected view was the search menu.\n                if (\n                    lastViewEvent?.viewIdentity.name === event.viewIdentity.name ||\n                    lastViewEvent?.viewIdentity.name.startsWith(WindowName.BrowserAddressSearchPrefix)\n                ) {\n                    resetAddressBarToSelectedViewUrl();\n                }\n            }\n\n            debouncedHandleAddressFocusOnLandingPage(event);\n        };\n\n        const window = getCurrentOFWindow();\n        window.addListener('view-focused', viewFocusListener);\n\n        return () => {\n            // TODO WRK-4956: Unawaited promises in react hook disposers can cause global rejections\n            window.removeListener('view-focused', viewFocusListener);\n        };\n    }, [shouldExpandMenu.shouldExpand, resetAddressBarToSelectedViewUrl]);\n\n    useEffect(() => {\n        if (shouldExpandMenu.shouldExpand) {\n            (async () => {\n                const { width: parentWindowWidth } = await getCurrentOFWindow().getBounds();\n                setAddressBarWidth(getSearchMenuWidth(parentWindowWidth));\n            })();\n        }\n    }, [shouldExpandMenu.shouldExpand]);\n};\n","import { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { getLayoutConfig, mapContentComponentState, updateTabStateBasedOnViewCount } from '@common/utils/layout';\n\nimport { AttachedPageInternal, ReparentAttachedPage } from '@common/api/pages/shapes';\n\nimport { updatePageAtIndex } from '@enterprise/slices/pages/attached';\n\nimport { resetLastFocusedView } from '@enterprise/hooks/EnterpriseSearchMenu/useUpdateViewExpansionState';\n\nexport const useOnLayoutCreated = () => {\n    const dispatch = useDispatch();\n    return useCallback(\n        async (page: AttachedPageInternal, pageIndex: number) => {\n            // It may be a reparent request, in which case we handle that logic and delete the extra data\n            // thereafter returning the page to the AttachedPage type\n            if ((page as ReparentAttachedPage).multiInstanceViewBehavior === 'reparent') {\n                dispatch(\n                    updatePageAtIndex({\n                        index: pageIndex,\n                        page: {\n                            multiInstanceViewBehavior: undefined,\n                            isLayoutCreated: true\n                        } as Partial<AttachedPageInternal>\n                    })\n                );\n            }\n\n            const currentLayout = await getLayoutConfig(page.layoutContainerKey);\n\n            const componentStates = currentLayout.content ? mapContentComponentState(currentLayout.content) : [];\n            const viewCount = componentStates.length;\n\n            if (viewCount > 1 && page.attachedPageType !== 'multiView') {\n                dispatch(\n                    updatePageAtIndex({\n                        index: pageIndex,\n                        page: {\n                            attachedPageType: 'multiView',\n                            singleViewName: undefined\n                        }\n                    })\n                );\n            } else if (viewCount === 1) {\n                // For single-view pages, always ensure both attachedPageType and singleViewName are set\n                const actualViewName = componentStates[0].name;\n                dispatch(\n                    updatePageAtIndex({\n                        index: pageIndex,\n                        page: {\n                            attachedPageType: 'singleView',\n                            singleViewName: actualViewName\n                        }\n                    })\n                );\n            }\n\n            await updateTabStateBasedOnViewCount(page, viewCount);\n\n            // Ignore extraneous view-focused events before a layout is created.\n            // Enables evaluating search input focus for views that get dragged out to create page level tabs.\n            resetLastFocusedView();\n        },\n        [dispatch]\n    );\n};\n","import { useEffect } from 'react';\n\nconst eventsToPropagate = ['tab-created', 'tab-dropped', 'container-created', 'tab-closed'];\n\nexport const usePropagateLayoutContainerEventsToParent = (containerRef: React.MutableRefObject<HTMLDivElement>) => {\n    useEffect(() => {\n        const container = containerRef.current;\n        if (!container) {\n            return;\n        }\n\n        const propagateEventToParent = (event: any) => {\n            event.stopPropagation();\n            const customEventForParent = new CustomEvent(event.type, {\n                detail: { ...event.detail, originalElement: event.srcElement },\n                bubbles: true\n            });\n            container.parentNode.dispatchEvent(customEventForParent);\n        };\n\n        eventsToPropagate.forEach((e) => container.addEventListener(e, propagateEventToParent));\n\n        return () => {\n            eventsToPropagate.forEach((e) => container.removeEventListener(e, propagateEventToParent));\n        };\n    }, [containerRef]);\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { LayoutDOMEvent, mapContentComponentState } from '@common/utils/layout';\n\nimport type { AttachedPageInternal } from '@common/api/pages/enterprise-shapes';\n\n/**\n * Adds views to the interop context group 'CONTEXT_GROUP_PAGE' when a tab is created.\n *\n * @param containerId The id of the container element\n */\nexport const useAddViewsToInteropContextGroups = (containerId: string, page: AttachedPageInternal) => {\n    const addViewContextGroups = useCallback(\n        async (event: Extract<LayoutDOMEvent, { type: 'tab-created' | 'tab-closed' }>) => {\n            try {\n                const viewIdentity = { uuid: fin.me.uuid, name: event.detail.name };\n                console.debug('addViewContextGroups:', viewIdentity.name, page.contextGroup ?? 'CONTEXT_GROUP_PAGE');\n                fin.me.interop.joinContextGroup(page.contextGroup ?? 'CONTEXT_GROUP_PAGE', viewIdentity);\n            } catch (err) {\n                console.warn(err);\n                // Either fin is not injected or we are too early\n                // onClientConnected in the interopoverride will handle when we are too early\n            }\n        },\n        [page.contextGroup]\n    );\n    useEffect(() => {\n        const container: any = document.getElementById(containerId);\n        container.addEventListener('tab-created', addViewContextGroups);\n\n        (async () => {\n            const layout = fin.Platform.Layout.wrapSync({\n                layoutName: page.layoutContainerKey,\n                name: fin.me.name,\n                uuid: fin.me.uuid\n            });\n            let layoutConfig;\n            try {\n                layoutConfig = await layout.getConfig();\n            } catch (error) {\n                // may error if not yet created, we can ignore this\n            }\n\n            if (layoutConfig) {\n                const views = mapContentComponentState(layoutConfig.content);\n                views.forEach((view) => {\n                    const viewIdentity = { uuid: fin.me.uuid, name: view.name };\n                    console.debug(\n                        'Adding view to context group:',\n                        viewIdentity.name,\n                        page.contextGroup ?? 'CONTEXT_GROUP_PAGE'\n                    );\n                    fin.me.interop.joinContextGroup(page.contextGroup ?? 'CONTEXT_GROUP_PAGE', viewIdentity);\n                });\n            }\n        })();\n\n        return () => {\n            container.removeEventListener('tab-created', addViewContextGroups);\n        };\n    }, [addViewContextGroups, containerId, page.contextGroup, page.layoutContainerKey]);\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { isLandingPage } from '@common/utils/enterpriseBrowser';\nimport { countViews } from '@common/utils/layout';\n\nimport type { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport { type AttachedPagesRootState, selectActivePage, selectPage } from '@enterprise/slices/pages/attached';\n\nconst isPageSingleView = (page?: AttachedPageInternal): boolean => {\n    if (page?.layout?.content) {\n        return countViews(page?.layout?.content) === 1;\n    }\n    return false;\n};\n\nexport const useIsPageSingleView = (pageId: string): boolean => {\n    const page = useSelector<AttachedPagesRootState, AttachedPageInternal>((state) => selectPage(state, pageId));\n    return useMemo(() => isPageSingleView(page), [page]);\n};\n\nexport const useIsActivePageSingleView = (): boolean => {\n    const activePage = useSelector(selectActivePage);\n    return useMemo(() => isPageSingleView(activePage), [activePage]);\n};\n\n/**\n * This hook returns true if the active page is a single view on the landing page or if its multi view page.\n * This is used to determine if the bottom border of the page button should be shown.\n * @param page: AttachedPageInternal\n * @returns boolean\n */\nexport const useIsSingleViewLandingPageOrMultiViewPage = (page: AttachedPageInternal): boolean => {\n    // Default set to true to hide the bottom border and mitigate the bottom border flashing\n    const [shouldHideBottomBorder, setShouldHideBottomBorder] = useState(true);\n    const [view, setView] = useState<OpenFin.View>();\n\n    const checkIsLandingFromUrlChangedEvent = (e: OpenFin.Events.WebContentsEvents.UrlChangedEvent) => {\n        setShouldHideBottomBorder(isLandingPage(e.url));\n    };\n\n    const checkIsLandingFromUrl = (url: string) => {\n        setShouldHideBottomBorder(isLandingPage(url));\n    };\n\n    useEffect(() => {\n        if (page?.singleViewName) {\n            (async () => {\n                const v = fin.View.wrapSync({ uuid: fin.me.uuid, name: page.singleViewName });\n                setView(v);\n                v.on('url-changed', checkIsLandingFromUrlChangedEvent);\n                const url = (await v.getInfo()).url;\n                checkIsLandingFromUrl(url);\n            })();\n        } else if (view) {\n            // when not single view: clean up listener, to prevent memory leak, and reset state\n            view.removeListener('url-changed', checkIsLandingFromUrlChangedEvent);\n            setView(undefined);\n            setShouldHideBottomBorder(true);\n        }\n        return () => {\n            if (view) {\n                view.removeListener('url-changed', checkIsLandingFromUrlChangedEvent);\n            }\n        };\n    }, [page?.singleViewName]);\n\n    return shouldHideBottomBorder;\n};\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { getEnterpriseLandingUrl } from '@common/utils/browser-base-url';\n\nimport { removeViewIcon, viewStartedLoading, viewStoppedLoading } from '@enterprise/slices/view-tab-icons';\n\nexport function useTabLoadingEvents() {\n    const dispatch = useDispatch();\n    const currentWindow = fin.Window.getCurrentSync();\n\n    useEffect(() => {\n        // Handle URL changes in the view\n        async function handleViewUrlChanged(\n            e: OpenFin.WindowEvents.ByType<'view-url-changed'> & { viewIdentity: OpenFin.Identity }\n        ) {\n            try {\n                const view = fin.View.wrapSync(e.viewIdentity);\n                const LANDING_PAGE_URL = await getEnterpriseLandingUrl();\n                if (!e.isInPage) {\n                    const info = await view.getInfo();\n                    const newUrl = info.url || '';\n                    if (LANDING_PAGE_URL && newUrl.startsWith(LANDING_PAGE_URL)) {\n                        handleDidStopLoading(e as any);\n                    } else {\n                        dispatch(viewStartedLoading({ viewName: e.viewIdentity.name }));\n                    }\n                }\n            } catch (err) {\n                console.warn('Could not get view info:', err);\n            }\n        }\n        // Handle the event when a view has stopped loading\n        function handleDidStopLoading(\n            e: OpenFin.WindowEvents.ByType<'view-did-finish-load'> & { viewIdentity: OpenFin.Identity }\n        ) {\n            dispatch(viewStoppedLoading({ viewName: e.viewIdentity.name }));\n        }\n\n        // Handle the event when a view fails to load (equivalent to `did-finish-load`, but triggered on failure)\n        function handleDidFailLoad(\n            e: OpenFin.WindowEvents.ByType<'view-did-fail-load'> & { viewIdentity: OpenFin.Identity }\n        ) {\n            dispatch(viewStoppedLoading({ viewName: e.viewIdentity.name }));\n        }\n        function handleViewDetached(\n            e: OpenFin.WindowEvents.ByType<'view-detached'> & { viewIdentity: OpenFin.Identity }\n        ) {\n            dispatch(removeViewIcon({ viewName: e.viewIdentity.name }));\n        }\n\n        currentWindow.addListener('view-url-changed', handleViewUrlChanged);\n        currentWindow.addListener('view-did-finish-load', handleDidStopLoading);\n        currentWindow.addListener('view-did-fail-load', handleDidFailLoad);\n        currentWindow.addListener('view-detached', handleViewDetached);\n\n        return () => {\n            currentWindow.removeListener('view-url-changed', handleViewUrlChanged);\n            currentWindow.removeListener('view-did-finish-load', handleDidStopLoading);\n            currentWindow.removeListener('view-did-fail-load', handleDidFailLoad);\n            currentWindow.addListener('view-detached', handleViewDetached);\n        };\n    }, [dispatch]);\n}\n","import type OpenFin from '@openfin/core';\n\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\n\nimport { getViewUrl } from './utils';\n\nexport const raiseBrowserFocusViewAnalyticsEvent = async (\n    identity: OpenFin.Identity,\n    selectedViews: OpenFin.Identity[]\n) => {\n    if (selectedViews.every((id) => !(id.name === identity.name && id.uuid === identity.uuid))) {\n        raiseBrowserAnalytics({\n            type: 'View',\n            action: 'Focus View',\n            value: identity.name,\n            data: { uuid: identity.uuid, url: await getViewUrl(identity) }\n        });\n    }\n};\n\nexport const raiseBrowserBlurViewAnalyticsEvent = (identity: OpenFin.Identity, selectedViews: OpenFin.Identity[]) => {\n    selectedViews.forEach(async (id: OpenFin.Identity) => {\n        if (!(id.name === identity.name && id.uuid === identity.uuid)) {\n            raiseBrowserAnalytics({\n                type: 'View',\n                action: 'Blur View',\n                value: id.name,\n                data: { uuid: id.uuid, url: await getViewUrl(id) }\n            });\n        }\n    });\n};\n","import type OpenFin from '@openfin/core';\n\nimport { getPrintOption, MenuItemType, Separator } from '@common/utils/context-menu';\nimport { checkHasNewTabUrl } from '@common/utils/landing-page';\n\nimport { t } from '@common/api/i18next';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport { getCurrentSync, ViewTabContextMenuTemplate } from '@client-platform/index';\nimport { ViewTabMenuData, ViewTabMenuOptionType } from '@client-platform/shapes';\n\nimport store from '../../store';\n\nlet currentViewsIdentities: OpenFin.Identity[] = [];\n\nconst getNewViewOption = async (enabled: boolean): Promise<ViewTabContextMenuTemplate> => ({\n    type: MenuItemType.Label,\n    label: t('enterpriseContextMenu.newTab'),\n    data: { type: ViewTabMenuOptionType.NewView } as ViewTabMenuData,\n    enabled\n});\n\nconst getReloadViewsOption = async (): Promise<ViewTabContextMenuTemplate> => ({\n    type: MenuItemType.Label,\n    label: t('contextMenu.reload'),\n    data: { type: ViewTabMenuOptionType.ReloadViews } as ViewTabMenuData\n});\n\nconst getDuplicateViewsOption = async (enabled: boolean): Promise<ViewTabContextMenuTemplate> => ({\n    type: MenuItemType.Label,\n    label: t('contextMenu.duplicate'),\n    data: { type: ViewTabMenuOptionType.DuplicateViews } as ViewTabMenuData,\n    enabled\n});\n\nconst getCloseViewsOption = async (selectedViewIdentities: OpenFin.Identity[]): Promise<ViewTabContextMenuTemplate> => {\n    const optsForSelectedViews = await Promise.all(\n        selectedViewIdentities.map((viewIdentity) => fin.View.wrapSync(viewIdentity).getOptions())\n    );\n    const parentWin = await fin.View.wrapSync(selectedViewIdentities[0]).getCurrentWindow();\n    const activePage = (await getCurrentSync().Browser.wrapSync(parentWin.identity).getPages()).find(\n        (page) => page.isActive\n    );\n\n    const canCloseAllSelectedViews =\n        !optsForSelectedViews.some((viewOpts) => !viewOpts.isClosable) && !activePage.isLocked;\n    return {\n        type: MenuItemType.Label,\n        label: t('contextMenu.closeTab'),\n        enabled: canCloseAllSelectedViews,\n        data: { type: ViewTabMenuOptionType.CloseViews } as ViewTabMenuData\n    };\n};\n\nexport async function getMenuTemplate(): Promise<ViewTabContextMenuTemplate[]> {\n    const activePage = selectActivePage(store.getState());\n    currentViewsIdentities = selectSelectedViewsForPage(store.getState(), activePage.pageId);\n    const isPageUnlocked = !activePage.isLocked;\n    const hasNewTabUrl = await checkHasNewTabUrl();\n\n    return [\n        ...(hasNewTabUrl ? [await getNewViewOption(isPageUnlocked)] : []),\n        // TODO: remove cast once @openfin/core updates their types\n        Separator as ViewTabContextMenuTemplate,\n        await getReloadViewsOption(),\n        await getDuplicateViewsOption(isPageUnlocked),\n        (await getPrintOption()) as ViewTabContextMenuTemplate,\n        // TODO: remove cast once @openfin/core updates their types\n        Separator as ViewTabContextMenuTemplate,\n        await getCloseViewsOption(currentViewsIdentities)\n    ];\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport type OpenFin from '@openfin/core';\n\nimport { isDefaultEnterpriseView } from '@common/utils/enterpriseBrowser';\nimport {\n    addLayoutEventListener,\n    containerId,\n    countViews,\n    findViewInLayout,\n    getFirstActiveViewFromLayout,\n    getLockedPageLayout,\n    hideFavIconForLandingPage,\n    LayoutDOMEvent,\n    layoutNameInitializedMap,\n    updatePageForViewCount\n} from '@common/utils/layout';\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\nimport { debouncedToggleScrollShadows } from '@common/utils/view-tab-overflow';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { useTranslation } from '@common/api/i18next';\nimport { ReparentAttachedPage } from '@common/api/pages/shapes';\n\nimport { getEnvironment, selectIsWindows } from '@common/slices/environment';\n\nimport { getState } from '@enterprise/api/pages/state';\nimport {\n    AttachedPagesRootState,\n    selectActivePage,\n    selectPageByLayoutContainerKey,\n    selectPageWithIndex,\n    updatePageAtIndex\n} from '@enterprise/slices/pages/attached';\n\nimport { createSpinner } from '@enterprise/utils/spinner.svg';\n\nimport { requestClosePage } from '@enterprise/api/controls';\nimport { makeNewView } from '@enterprise/api/view';\n\nimport {\n    addSelectedView,\n    selectSelectedViewsForLayoutContainerKey,\n    selectSelectedViewsForPage,\n    selectView,\n    selectViewForLayoutContainerKey,\n    selectViewReducer\n} from '@enterprise/slices/tab-focus';\nimport { addViewIcon } from '@enterprise/slices/view-tab-icons';\n\nimport { useOnLayoutCreated } from '@enterprise/components/LayoutContainer/useOnLayoutCreated';\nimport { usePropagateLayoutContainerEventsToParent } from '@enterprise/components/LayoutContainer/usePropagateLayoutContainerEventsToParent';\n\nimport { AttachedPage, getCurrentSync } from '@client-platform/index';\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport { useWithWindowStyleOverride } from '@common/hooks/useWindowFocusState';\nimport { resetLastFocusedViewAndHandleViewFocused } from '@enterprise/hooks/EnterpriseSearchMenu/useUpdateViewExpansionState';\nimport { useAddViewsToInteropContextGroups } from '@enterprise/hooks/useAddViewsToInteropContextGroups';\nimport { usePanelBounds } from '@enterprise/hooks/usePanelBounds';\nimport { useIsPageSingleView } from '@enterprise/hooks/useSingleViewPage';\nimport { useTabLoadingEvents } from '@enterprise/hooks/useTabLoadingState';\nimport store from '@enterprise/store';\n\nimport { PaddingBorderMixin } from '../mixins/padding-border';\n\nimport { raiseBrowserBlurViewAnalyticsEvent, raiseBrowserFocusViewAnalyticsEvent } from './LayoutContainer.analytics';\nimport { getMenuTemplate } from './LayoutContainer.contextMenu';\nimport { addViewTabGroupEventListener, getViewNameFromClickEvent, getViewTabHat, getViewUrl } from './utils';\n\nconst BrowserLayout = styled.div<{\n    active: boolean;\n    isSchemeDark: boolean;\n    isSingleView: boolean;\n}>`\n    flex: 1;\n    /* This overflow is !super important! GL cant seem to calculate its dimensions without it! */\n    overflow: hidden;\n    padding: 2px;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: ${({ theme, isSchemeDark }) => (isSchemeDark ? theme.palette.background3 : theme.palette.background1)};\n    ${({ active }) => !active && `display: none;`};\n\n    &.enterprise-layout {\n        .lm_item_container {\n            ${({ theme, isSingleView }) =>\n                PaddingBorderMixin({\n                    size: isSingleView ? 0 : 1,\n                    borderColor: theme.palette.background5,\n                    backgroundColor: `var(--workspace-palette-selectedTab)`\n                })}\n        }\n        &.layout--inactive {\n            display: none;\n        }\n\n        &.layout--padding {\n            padding: 4px 4px 4px;\n        }\n\n        &.layout--no--padding {\n            padding: 0px;\n        }\n    }\n    .content-loading {\n        .tab-icon {\n            width: 16px !important;\n            height: 16px !important;\n            padding: 1px;\n            border-radius: 50%;\n            position: relative;\n        }\n        .spinner-svg {\n            visibility: visible;\n        }\n    }\n    .spinner-svg {\n        width: 20px;\n        height: 20px;\n        position: absolute;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        margin-left: 8px;\n        visibility: hidden;\n    }\n`;\n\ntype LayoutContainerProps = {\n    active: boolean;\n    pageId: AttachedPage['pageId'];\n    pageIndex: number;\n    layoutContainerKey: string;\n};\n\n/**\n * Container component for a Platforms layout instance.\n *\n * This will load and initialize the Platform, and handle any required eventing for that instance.\n */\nconst LayoutContainer: React.FC<LayoutContainerProps> = (props: LayoutContainerProps) => {\n    const dispatch = useDispatch<any>();\n    const [isLayoutCreated, setIsLayoutCreated] = useState(false);\n    const onLayoutCreated = useOnLayoutCreated();\n    const isWindows = useSelector(selectIsWindows);\n    const page = useSelector((s) =>\n        selectPageByLayoutContainerKey(s as AttachedPagesRootState, props.layoutContainerKey)\n    );\n    const { pageId: activePageId } = useSelector(selectActivePage);\n    const { t } = useTranslation();\n    const hideLayoutPadding = countViews(page.layout.content) === 1;\n\n    const isHandlingTabClick: React.MutableRefObject<boolean> = useRef(false);\n    const cssBounds = usePanelBounds('Center');\n\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const { isSchemeDark } = useSystemSchemeCheck();\n\n    const isSingleView = useIsPageSingleView(props.pageId);\n\n    useEffect(() => {\n        dispatch(getEnvironment());\n    }, [dispatch]);\n\n    /**\n     * Updates UI in response to 'view-focused' events. Catches clicks on View content.\n     * @param event OpenFin's 'view-focused' event\n     */\n    const viewFocusHandler = useCallback(\n        async (event: Extract<OpenFin.WindowEvents.WindowEvent, { type: 'view-focused' }>) => {\n            // sometimes the view's page isn't yet active when the event fires, need to check that view belongs to the layout\n            const tab = getViewTabHat(event.viewIdentity.name, containerRef.current);\n\n            if (!tab) return;\n            if (isDefaultEnterpriseView(event.viewIdentity)) return;\n            if (props.pageId !== activePageId) return;\n\n            if (isHandlingTabClick.current) {\n                // `handleMouseUp` is already handling.\n                isHandlingTabClick.current = false;\n                return;\n            }\n\n            tab.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\n            const selectedViews = selectSelectedViewsForPage(store.getState(), activePageId);\n            raiseBrowserBlurViewAnalyticsEvent(event.viewIdentity, selectedViews);\n            raiseBrowserFocusViewAnalyticsEvent(event.viewIdentity, selectedViews);\n            dispatch(selectView({ viewId: event.viewIdentity, pageId: activePageId }));\n        },\n        [dispatch, activePageId, props.pageId]\n    );\n\n    const layoutReadyHandler = useCallback(\n        async (payload: OpenFin.Events.WindowEvents.LayoutReadyEvent) => {\n            if (payload.layoutIdentity.layoutName !== props.layoutContainerKey) {\n                return;\n            }\n\n            // Set layout ready for the page to true so dirty events can be handled.\n            const [_, index] = selectPageWithIndex(getState(), props.pageId);\n            dispatch(updatePageAtIndex({ index, page: { isLayoutReady: true } }));\n\n            const layoutId = payload.layoutIdentity;\n            const viewIdentity = await getFirstActiveViewFromLayout(layoutId);\n            if (viewIdentity) {\n                const layoutContainerKey = layoutId.layoutName;\n                // This is a unique case where the layout is getting ready and the active page is not yet set. So we need to use the layoutContainerKey to get the selected views.\n                const pageSelectedViews = selectSelectedViewsForLayoutContainerKey(layoutContainerKey)(\n                    store.getState()\n                );\n                if (!pageSelectedViews?.length) {\n                    // If there are no selected views, select the first view in the layout. ex: when a new page is created\n                    dispatch(selectViewReducer({ viewId: viewIdentity, layoutContainerKey }));\n                } else {\n                    const activePage = store.getState().attachedPages.attachedPages.find((p) => p.isActive === true);\n                    if (activePage) {\n                        const views = findViewInLayout(activePage.layout, pageSelectedViews[0]);\n                        if (!views.length) {\n                            console.debug('Enterprise missing selected view, auto-select default view', viewIdentity);\n                            dispatch(selectViewForLayoutContainerKey({ viewId: viewIdentity, layoutContainerKey }));\n                        }\n                    }\n                }\n            }\n        },\n        [dispatch, props.pageId, props.layoutContainerKey]\n    );\n\n    /**\n     * Handles modified clicks on tab hats. We handle this way because\n     * 'view-focused' events do not expose currently-pressed modifier keys.\n     * We handle on 'mouseup' because golden-layout swallows some 'click' events.\n     */\n    const handleMouseUp = useCallback(\n        async (event: React.MouseEvent) => {\n            // on mac ctrl + click is used for accessing the context menu\n            // instead use command + click to select multiple views\n            if (isWindows ? !event.ctrlKey : !event.metaKey) {\n                // Only handle modified clicks. Else delegate to `viewFocusHandler`\n                return;\n            }\n\n            const viewName = getViewNameFromClickEvent(event as any as MouseEvent);\n            if (viewName) {\n                // Prevent `viewFocusHandler` from also acting on this selection\n                isHandlingTabClick.current = true;\n                const viewIdentity = { uuid: fin.me.uuid, name: viewName };\n                const selectedViews = selectSelectedViewsForPage(store.getState(), activePageId);\n                raiseBrowserFocusViewAnalyticsEvent(viewIdentity, selectedViews);\n                dispatch(addSelectedView({ viewId: viewIdentity, pageId: activePageId }));\n            }\n        },\n        [isWindows, activePageId, dispatch]\n    );\n\n    const withWindowStyleOverride = useWithWindowStyleOverride();\n\n    /**\n     * Handles context menu requests\n     * @param event The contextmenu event\n     */\n    const handleContextMenuRequest = useCallback(\n        async (e: MouseEvent) => {\n            const viewName = getViewNameFromClickEvent(e);\n            if (!viewName) {\n                // Click was not on a tab hat\n                return;\n            }\n\n            e.preventDefault();\n\n            // This handler is attached to the document once, so useSelector won't update\n            // We need to get the state each time\n            const currentViewsIdentities = selectSelectedViewsForPage(store.getState(), activePageId);\n            const thisViewIdentity = { uuid: fin.me.uuid, name: viewName };\n\n            const isClickOnSelectedView = currentViewsIdentities.some(\n                (identity) => identity.name === thisViewIdentity.name\n            );\n\n            if (currentViewsIdentities.length === 0 || !isClickOnSelectedView) {\n                const pageId = selectActivePage(store.getState())?.pageId;\n                dispatch(selectView({ viewId: thisViewIdentity, pageId }));\n            }\n\n            withWindowStyleOverride('focused', async () => {\n                // eslint-disable-next-line no-underscore-dangle\n                await getCurrentSync()\n                    .Browser.wrapSync(currentOFIdentity)\n                    ._openViewTabContextMenu({\n                        x: e.clientX,\n                        y: e.clientY,\n                        template: await getMenuTemplate(),\n                        selectedViews: selectSelectedViewsForPage(store.getState(), activePageId)\n                    });\n            });\n        },\n        [activePageId, dispatch]\n    );\n\n    const setTabAccessibility = useCallback(\n        (tab: HTMLElement, closeButton: HTMLElement | null) => {\n            const isActive = tab.classList.contains('lm_active');\n            const title = tab.getAttribute('title');\n            tab.setAttribute('aria-label', title);\n            tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\n            if (closeButton) {\n                closeButton.setAttribute('aria-label', t('aria.closeTab', { title }));\n            }\n        },\n        [t]\n    );\n\n    /**\n     * Used to update the aria-selected attribute on a tab when it is activated\n     * @param mutations\n     */\n    const handleMutation: MutationCallback = useCallback(\n        (mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.attributeName === 'class') {\n                    const target = mutation.target as HTMLElement;\n                    const isActive = target.classList.contains('lm_active');\n                    const tabsInGroup: [] | NodeListOf<HTMLElement> =\n                        target.parentElement?.querySelectorAll('.lm_tab') || [];\n                    tabsInGroup.forEach((tab) => {\n                        tab.setAttribute('aria-selected', 'false');\n                    });\n                    target.setAttribute('aria-selected', isActive.toString());\n                    setTabAccessibility(target, target.querySelector('.lm_close_tab') as HTMLElement | null);\n                }\n            });\n        },\n        [setTabAccessibility]\n    );\n\n    /**\n     * Is called whenever a golden layout tab is dropped.\n     * Is used to focus newly dropped tab.\n     */\n    const handleTabDropped = useCallback(\n        (e: CustomEvent<OpenFin.LayoutDOMEvents.TabDroppedEvent>) => {\n            const viewIdentity = { uuid: fin.me.uuid, name: e.detail.name };\n            resetLastFocusedViewAndHandleViewFocused({ viewIdentity, type: 'tab-created' });\n            dispatch(\n                selectViewForLayoutContainerKey({\n                    viewId: viewIdentity,\n                    layoutContainerKey: props.layoutContainerKey\n                })\n            );\n        },\n        [dispatch, resetLastFocusedViewAndHandleViewFocused]\n    );\n\n    /**\n     * Is called whenever a golden layout tab is created.\n     * @param event TabCreatedEvent\n     */\n    const handleTabCreated = useCallback(\n        async (event: Extract<LayoutDOMEvent, { type: 'tab-created' | 'tab-closed' }>) => {\n            if (!containerRef.current || (event.detail as any).originalElement !== containerRef?.current) {\n                return;\n            }\n            const viewIdentity = { uuid: event.detail.uuid, name: event.detail.name };\n\n            const view = fin.View.wrapSync(viewIdentity);\n            const containerSelector = event.detail.containerSelector;\n            const tabSelector = event.detail.tabSelector;\n\n            const tab = document.getElementById(tabSelector);\n            const container = document.getElementById(containerSelector);\n            const tabGroups = containerRef.current.querySelectorAll('.lm_tabs');\n            const webContainers = containerRef.current.querySelectorAll('.lm_items');\n            const closeButton = tab?.querySelector('.lm_close_tab') as HTMLElement | null;\n            const viewTabs = containerRef.current.querySelectorAll('.lm_tab');\n\n            /**\n             * Short term workaround for https://openfin.jira.com/browse/WAAS-1481, Can be removed once CORE ARD (https://openfin.jira.com/wiki/spaces/ARD/pages/1323040822/Core+Remove+Platforms+Navigation-Rejected+Error+Screen)\n             * is completed.\n             *\n             * See PR description for more info.\n             */\n            const elems = container.getElementsByClassName('openfin_default_background');\n            if (elems.length) {\n                container.removeChild(elems[0]);\n            } else {\n                console.warn(`Failed to hide layout error screen, this could cause flicker on failed navigations`);\n            }\n\n            const observer = new MutationObserver(handleMutation);\n\n            // make sure all tab lists have correct role and tabindex\n            if (tabGroups) {\n                tabGroups.forEach((tabGroup, i) => {\n                    tabGroup.setAttribute('role', 'tablist');\n                    tabGroup.setAttribute('id', `tab-group-${i}`);\n                });\n            }\n\n            // make sure all view tabs have the correct tabindex\n            if (viewTabs) {\n                viewTabs.forEach((viewTab) => {\n                    viewTab.classList.contains('lm_active')\n                        ? viewTab.setAttribute('tabindex', '0')\n                        : viewTab.setAttribute('tabindex', '-1');\n                });\n            }\n\n            // set up a11y on new container\n            if (container) {\n                container.setAttribute('role', 'tabpanel');\n                container.setAttribute('tabindex', '-1');\n                container.setAttribute('aria-labelledby', tabSelector);\n            }\n\n            // set tabindex for web content containers\n            if (webContainers) {\n                webContainers.forEach((webContainer) => {\n                    webContainer.setAttribute('tabindex', '0');\n                });\n            }\n\n            // set up a11y on each new tab and close button\n            if (tab) {\n                observer.observe(tab, { attributes: true });\n                tab.setAttribute('role', 'tab');\n                tab.setAttribute('aria-controls', containerSelector);\n                tab.classList.contains('lm_active')\n                    ? tab.setAttribute('tabindex', '0')\n                    : tab.setAttribute('tabindex', '-1');\n                if (closeButton) {\n                    closeButton.setAttribute('role', 'button');\n                    closeButton.setAttribute('tabindex', '-1');\n                }\n\n                // allow keyboard navigation of tabs and close buttons\n                tab.addEventListener('keyup', async (e: KeyboardEvent) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                        await view.focus();\n                    }\n                });\n\n                if (closeButton) {\n                    closeButton.addEventListener('keyup', async (e: KeyboardEvent) => {\n                        if (e.key === 'Enter' || e.key === ' ') {\n                            const tabsCount = containerRef.current.querySelectorAll('.lm_tab').length;\n                            // if closing the last view in the layout, need to go through page close logic\n                            if (tabsCount === 1) {\n                                // get from store because it's possible for pageId to change without causing handleTabCreated to be called again\n                                const activePage = selectActivePage(store.getState());\n                                await requestClosePage({ pageId: activePage.pageId, closeType: 'view' });\n                            } else {\n                                const platform = getCurrentSync();\n                                await platform.closeView(viewIdentity);\n                                const activeTab = document.getElementsByClassName('lm_active')[0] as HTMLElement;\n                                activeTab.setAttribute('tabindex', '0');\n                                activeTab.dataset.activeNode = 'true';\n                            }\n                        }\n                    });\n                    closeButton.addEventListener('mouseup', async (e: MouseEvent) => {\n                        const tabsCount = containerRef.current.querySelectorAll('.lm_tab').length;\n                        // if closing the last view in the layout, need to go through page close logic\n                        if (e.button === 0 && tabsCount === 1) {\n                            e.stopPropagation();\n                            // get from store because it's possible for pageId to change without causing handleTabCreated to be called again\n                            const activePage = selectActivePage(store.getState());\n                            await requestClosePage({ pageId: activePage.pageId, closeType: 'view' });\n                        }\n                    });\n                }\n\n                tab.addEventListener('dragstart', async () => {\n                    raiseBrowserAnalytics({\n                        type: 'View Tab',\n                        action: 'Drag View',\n                        value: viewIdentity.name,\n                        data: { uuid: viewIdentity.uuid, url: await getViewUrl(viewIdentity) }\n                    });\n                });\n                window.requestAnimationFrame(() => hideFavIconForLandingPage(view, tab));\n\n                debouncedToggleScrollShadows(containerRef.current);\n\n                /**\n                 * TODO: See if we can remove this timeout with a requestAnimationFrame()\n                 * Strongly dislike this timeout but it is necessary\n                 * when tab is created it is not immediately ready to get title or display status\n                 * */\n                setTimeout(() => {\n                    setTabAccessibility(tab, closeButton as HTMLElement | null);\n                    const tabGroup = tab.parentElement;\n                    const addViewButton: HTMLElement = tabGroup?.querySelector('.newTabButton');\n                    const raiseBrowserSelectNewViewAnalyticsEvent = () => {\n                        raiseBrowserAnalytics({\n                            type: 'View Section',\n                            action: 'Select New View',\n                            value: 'New View',\n                            skipValueHashing: true\n                        });\n                    };\n\n                    if (addViewButton) {\n                        if (addViewButton.getAttribute('listener') !== 'keyup') {\n                            addViewButton.addEventListener('keyup', async (e: KeyboardEvent) => {\n                                if (e.key === 'Enter' || e.key === ' ') {\n                                    raiseBrowserSelectNewViewAnalyticsEvent();\n                                    await makeNewView(view);\n                                    addViewButton.dataset.activeNode = 'false';\n                                }\n                            });\n                            addViewButton.addEventListener('click', async (e: MouseEvent) => {\n                                if (e.button === 0) {\n                                    raiseBrowserSelectNewViewAnalyticsEvent();\n                                }\n                                // if user is able to add a tab, everything is already set up, don't need to wait for layout-initialized\n                                layoutNameInitializedMap.set(props.layoutContainerKey, true);\n                            });\n                        }\n                        addViewButton.setAttribute('role', 'button');\n                        addViewButton.setAttribute('tabindex', '-1');\n                        addViewButton.setAttribute('aria-label', t('enterpriseContextMenu.newTab'));\n                        addViewButton.setAttribute('listener', 'keyup');\n                        addViewButton.setAttribute('title', t('enterpriseContextMenu.newTab'));\n\n                        // Sets up a11y on view tab group and view tabs. Since the addViewButton exists we know the Page is not locked\n                        addViewTabGroupEventListener(tabGroup, false);\n                    } else {\n                        // addViewButton doesn't exist, so the Page is locked\n                        addViewTabGroupEventListener(tabGroup, true);\n                    }\n                }, 600);\n            }\n        },\n        [props.layoutContainerKey, handleMutation, setTabAccessibility, t]\n    );\n\n    const maintainAttachedPageTypeBasedOnViewCount = useCallback(() => {\n        updatePageForViewCount(page).catch((e) => {\n            console.error('Error updating page for view count', e);\n        });\n    }, [page]);\n\n    /**\n     *  Handles the view-removed-from-layout event\n     *  (view-detached is window-level this fires when a view changes layouts in the same window)\n     */\n    const handleViewDetached = useCallback(\n        async (event: OpenFin.WindowEvents.ByType<'view-removed-from-layout'>) => {\n            if (isDefaultEnterpriseView(event.viewIdentity)) return;\n            // Only handle views being detached from this layout.\n            if (event.layoutIdentity.layoutName !== props.layoutContainerKey) return;\n            debouncedToggleScrollShadows(containerRef.current);\n            maintainAttachedPageTypeBasedOnViewCount();\n            const newlySelectedViewIdentity = await getFirstActiveViewFromLayout({\n                uuid: fin.me.uuid,\n                name: fin.me.name,\n                layoutName: props.layoutContainerKey\n            });\n            dispatch(\n                selectViewForLayoutContainerKey({\n                    viewId: newlySelectedViewIdentity,\n                    layoutContainerKey: props.layoutContainerKey\n                })\n            );\n        },\n        [dispatch, maintainAttachedPageTypeBasedOnViewCount]\n    );\n\n    /**\n     * Handles the container-resized and tabs-list-resized events\n     */\n    const handleLayoutsResized = useCallback(() => {\n        debouncedToggleScrollShadows(containerRef.current);\n    }, []);\n\n    useAddViewsToInteropContextGroups(props.layoutContainerKey, page);\n\n    // Add the necessary listeners\n    useEffect(() => {\n        (fin.me as OpenFin.Window).on('layout-ready', layoutReadyHandler);\n        (fin.me as OpenFin.Window).on('view-focused', viewFocusHandler);\n        (fin.me as OpenFin.Window).addListener('view-removed-from-layout', handleViewDetached);\n        containerRef.current.addEventListener('contextmenu', handleContextMenuRequest);\n        containerRef.current.addEventListener('tab-dropped', handleTabDropped);\n        const container: any = document.getElementById(containerId);\n        container.addEventListener('tab-created', handleTabCreated);\n        container.addEventListener('container-resized', handleLayoutsResized);\n        addLayoutEventListener('tabs-list-resized', handleLayoutsResized);\n\n        const cleanupRef = containerRef.current;\n        return () => {\n            (fin.me as OpenFin.Window).removeListener('layout-ready', layoutReadyHandler);\n            (fin.me as OpenFin.Window).removeListener('view-focused', viewFocusHandler);\n            (fin.me as OpenFin.Window).removeListener('view-removed-from-layout', handleViewDetached);\n            cleanupRef.removeEventListener('tab-dropped', handleTabDropped);\n            container.removeEventListener('tab-created', handleTabCreated);\n            container.removeEventListener('container-resized', handleLayoutsResized);\n            cleanupRef.removeEventListener('contextmenu', handleContextMenuRequest);\n        };\n    }, [\n        handleContextMenuRequest,\n        viewFocusHandler,\n        layoutReadyHandler,\n        handleTabCreated,\n        handleViewDetached,\n        handleLayoutsResized,\n        handleTabDropped\n    ]);\n\n    // Use the container API to create the Layout\n    useEffect(() => {\n        if (isLayoutCreated) {\n            return;\n        }\n        if (!props.active && (page as ReparentAttachedPage).multiInstanceViewBehavior !== 'reparent') {\n            if (!page.singleViewName) {\n                // Load single views upfront so that they have the correct title\n                return;\n            }\n        }\n        const layoutOptions = page.isLocked ? getLockedPageLayout(page.layout) : page.layout;\n        setIsLayoutCreated(true);\n        fin.Platform.Layout.create({\n            layoutName: page.layoutContainerKey,\n            layout: {\n                ...layoutOptions,\n                settings: {\n                    ...(layoutOptions.settings || {}),\n                    pageId: page.pageId,\n                    // Internal property, disables GL putting tabs into dropdown menu\n                    disableTabOverflowDropdown: true\n                }\n            },\n            container: containerRef.current,\n            multiInstanceViewBehavior: (page as ReparentAttachedPage).multiInstanceViewBehavior\n        }).then(() => onLayoutCreated(page, props.pageIndex));\n        // Cleanup exists below in its own useEffect so that it only runs once\n    }, [props.active, isLayoutCreated, props.pageIndex, page, onLayoutCreated]);\n\n    useEffect(() => {\n        // Make sure that cleanup ONLY runs once - when the component is destroyed\n        return () => {\n            const layoutIdentity = { layoutName: page.layoutContainerKey, ...fin.me.identity };\n            fin.Platform.Layout.destroy(layoutIdentity).catch(() => {\n                // Expected error, destroy called without creating\n            });\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    usePropagateLayoutContainerEventsToParent(containerRef);\n\n    useEffect(() => {\n        (containerRef?.current.addEventListener as any)(\n            'tab-created',\n            (e: { detail: OpenFin.LayoutDOMEvents.TabCreatedEvent }) => {\n                const tabEl = document.getElementById(e.detail.tabSelector) as HTMLImageElement;\n                const existingSpinner = tabEl.querySelector('.spinner-svg');\n                if (!existingSpinner) {\n                    const spinnerSvg = createSpinner();\n                    const id = `spinner-${e.detail.name}`;\n                    dispatch(addViewIcon({ viewName: e.detail.name, spinnerRef: id }));\n                    spinnerSvg.setAttribute('id', id);\n                    spinnerSvg.setAttribute('class', 'spinner-svg');\n                    spinnerSvg.setAttribute('stroke', 'var(--workspace-palette-textHelp)');\n                    tabEl.prepend(spinnerSvg);\n                }\n            }\n        );\n    }, [containerRef.current, dispatch]);\n    useTabLoadingEvents();\n\n    const getEnterpriseClassNames = () => {\n        let classNames = 'enterprise-layout';\n        if (!props.active) {\n            classNames += ' layout--inactive';\n        }\n        if (hideLayoutPadding) {\n            classNames += ' layout--no--padding';\n        } else {\n            classNames += ' layout--padding';\n        }\n        return classNames;\n    };\n\n    return (\n        <BrowserLayout\n            ref={containerRef}\n            id={`${props.layoutContainerKey}`}\n            className={getEnterpriseClassNames()}\n            active={props.active}\n            onMouseUp={handleMouseUp}\n            style={cssBounds}\n            isSchemeDark={isSchemeDark}\n            isSingleView={isSingleView}\n        />\n    );\n};\n\nexport default LayoutContainer;\n","import { useContext } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { containerId } from '@common/utils/layout';\n\nimport { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport { selectActivePage, selectPages } from '@enterprise/slices/pages/attached';\n\nimport { BrowserLayoutDragContext } from '@common/hooks/context';\n\nimport LayoutContainer from './LayoutContainer';\n\nconst ContainerContainer = styled.div`\n    flex: 1;\n    /* This overflow is !super important! GL cant seem to calculate its dimensions without it! */\n    overflow: hidden;\n    padding: 0px;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n`;\n\nexport default function LayoutContainerWrapper() {\n    const pages: AttachedPageInternal[] = useSelector(selectPages);\n    const activePage = useSelector(selectActivePage);\n\n    const { isAcceptingLayoutDrag } = useContext(BrowserLayoutDragContext);\n\n    const onDragBlockerDragOver = (event: React.DragEvent<HTMLDivElement>) => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    return (\n        <ContainerContainer id={containerId}>\n            {pages.map((page, index) => {\n                return (\n                    <LayoutContainer\n                        key={page.layoutContainerKey}\n                        layoutContainerKey={page.layoutContainerKey}\n                        pageId={page.pageId}\n                        pageIndex={index}\n                        active={page.pageId === activePage.pageId}\n                    />\n                );\n            })}\n            {!isAcceptingLayoutDrag && <DragBlockerOverlay onDragOver={onDragBlockerDragOver}></DragBlockerOverlay>}\n        </ContainerContainer>\n    );\n}\n\nconst DragBlockerOverlay = styled.div`\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled, { css } from 'styled-components';\n\nimport { PanelPosition } from '@common/api/pages/shapes';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport { MAC_WINDOW_BORDER_RADIUS } from '@common/mixins/padding-border';\n\nimport LayoutContainerWrapper from '../LayoutContainer/LayoutContainerWrapper';\nimport PanelContainer from '../PanelContainer/PanelContainer';\n\nconst ContentContainer: React.FC = () => {\n    const isWindows = useSelector(selectIsWindows);\n\n    return (\n        <Container isWindows={isWindows}>\n            <LayoutContainerWrapper />\n            <PanelContainer position={PanelPosition.Right} />\n        </Container>\n    );\n};\n\nexport default ContentContainer;\n\nconst Container = styled.div<{ isWindows: boolean }>`\n    position: relative;\n    flex-grow: 1;\n\n    ${({ isWindows }) =>\n        !isWindows &&\n        css`\n            border-bottom-left-radius: ${MAC_WINDOW_BORDER_RADIUS};\n            border-bottom-right-radius: ${MAC_WINDOW_BORDER_RADIUS};\n        `}\n`;\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport OpenFin from '@openfin/core';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectLayoutsWithSelectedViews } from '@enterprise/slices/tab-focus';\n\nimport {\n    getViewWithInfo,\n    ViewInfo\n} from '@enterprise/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/EnterpriseNavigationContainer';\n\nconst useFocusedView = () => {\n    const activePage = useSelector(selectActivePage);\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViewsIdentities = layoutsWithSelectedViews[activePage.layoutContainerKey];\n    const [viewInfo, setViewInfo] = useState<ViewInfo | null>();\n\n    useEffect(() => {\n        if (selectedViewsIdentities?.length === 1) {\n            getViewWithInfo(selectedViewsIdentities[0]).then(({ view, info }) => setViewInfo({ view, info }));\n        } else {\n            setViewInfo(null);\n        }\n    }, [selectedViewsIdentities]);\n\n    useEffect(() => {\n        const win = fin.Window.getCurrentSync();\n        const urlChangedListener: OpenFin.BaseEvents.EventHandler<\n            OpenFin.Events.WindowEvents.WindowEvent,\n            'view-url-changed'\n        > = async ({ viewIdentity }) => {\n            if (\n                selectedViewsIdentities &&\n                selectedViewsIdentities.length > 0 &&\n                selectedViewsIdentities[0].name === viewIdentity.name\n            ) {\n                const updates = await getViewWithInfo(viewIdentity);\n                setViewInfo(updates);\n            }\n        };\n        win.addListener('view-url-changed', urlChangedListener);\n\n        return () => {\n            win.removeListener('view-url-changed', urlChangedListener);\n        };\n    }, [selectedViewsIdentities]);\n\n    return viewInfo;\n};\n\nexport default useFocusedView;\n","import { useEffect, useRef, useState } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nconst useFocusedViewListeners = (focusedView: { view: OpenFin.View } | null) => {\n    const viewRef = useRef<OpenFin.View | null>(null);\n    const [isContentLoading, setIsContentLoading] = useState<boolean>(false);\n\n    const onFinishLoad = () => {\n        setIsContentLoading(false);\n    };\n\n    const onUrlChange = (e: OpenFin.WebContentsEvents.UrlChangedEvent) => {\n        if (!e.isInPage) {\n            setIsContentLoading(true);\n        }\n    };\n\n    useEffect(() => {\n        if (!focusedView) return;\n\n        const selectedView = focusedView.view;\n        if (!selectedView) return;\n\n        if (viewRef.current?.identity.name === selectedView.identity.name) {\n            return;\n        }\n\n        // clean up listeners from previous view\n        if (viewRef.current) {\n            viewRef.current.removeListener('did-finish-load', onFinishLoad);\n            viewRef.current.removeListener('url-changed', onUrlChange);\n        }\n\n        // attach new listeners\n        selectedView.addListener('did-finish-load', onFinishLoad);\n        selectedView.addListener('url-changed', onUrlChange);\n\n        // update ref\n        viewRef.current = selectedView;\n\n        return () => {\n            if (viewRef.current) {\n                viewRef.current.removeListener('did-finish-load', onFinishLoad);\n                viewRef.current.removeListener('url-changed', onUrlChange);\n                viewRef.current = null;\n            }\n        };\n        // depend on view identity to avoid unnecessary renders\n    }, [focusedView?.view.identity.name]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return { isContentLoading, setIsContentLoading };\n};\n\nexport default useFocusedViewListeners;\n","import { MutableRefObject, useCallback, useContext, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport OpenFin from '@openfin/core';\n\nimport debounce from 'lodash.debounce';\n\nimport { mapContentComponentState } from '@common/utils/layout';\nimport { BrowserSearchMenuKeyboardEvent, SearchMenuChannelMessage } from '@common/utils/popup-window';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport type { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport { selectIsActivePageChanging } from '@enterprise/slices/pages/attached';\n\nimport { SearchMenuChannel } from '@enterprise/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBar';\n\nimport {\n    SearchViewExpansionState,\n    WindowSearchMenuContext\n} from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\n\n/**\n * Custom hook that sends messages to the search view with updates about the browser window's views, search text changes, and whether\n * the address search view should expand.\n *\n * @param selectedViews - Array of currently selected views in the browser window.\n * @param searchMenuChannel - Ref object containing a function to send messages to the search view.\n * @param activePage - Object representing the currently active page in the browser window.\n * @param searchText - String representing the current text in the address input.\n * @param inputContainerRef - Ref object pointing to the input container element.\n * @returns Object containing a function to send keyboard events to the search menu view.\n */\nexport const usePostMessageToSearchMenuView = (\n    selectedViews: OpenFin.Identity[],\n    searchMenuChannel: SearchMenuChannel,\n    activePage: AttachedPageInternal,\n    searchText: string,\n    inputContainerRef: MutableRefObject<HTMLDivElement>\n) => {\n    const { shouldExpandMenu } = useContext(WindowSearchMenuContext);\n    const isActivePageChanging = useSelector(selectIsActivePageChanging);\n    const SEARCH_DEBOUNCE_MS = 150;\n\n    useEffect(() => {\n        (async () => {\n            if (!isActivePageChanging && activePage.layoutContainerKey && selectedViews?.length) {\n                const layout = fin.Platform.Layout.wrapSync({\n                    ...fin.me.identity,\n                    layoutName: activePage.layoutContainerKey\n                });\n                const layoutConfig = await layout.getConfig();\n                const openViews = mapContentComponentState(layoutConfig.content).map((viewOptions) => {\n                    return fin.View.wrapSync({ name: viewOptions.name, uuid: currentOFIdentity.uuid }).identity;\n                });\n\n                searchMenuChannel.postMessage({\n                    type: 'update-search-menu-state',\n                    selectedViews,\n                    openViews,\n                    windowId: fin.me.identity,\n                    offsetLeft: inputContainerRef.current.offsetLeft\n                } as SearchMenuChannelMessage);\n            }\n        })();\n    }, [\n        isActivePageChanging,\n        selectedViews,\n        searchText,\n        activePage.layoutContainerKey,\n        searchMenuChannel,\n        inputContainerRef\n    ]);\n\n    const debouncedSendSearchUpdate = useCallback(\n        debounce(\n            (payload: {\n                text?: string;\n                shouldExpand?: SearchViewExpansionState;\n                keyboardEvent?: BrowserSearchMenuKeyboardEvent;\n                offsetLeft?: number;\n            }) => {\n                const { text, shouldExpand, keyboardEvent } = payload;\n                searchMenuChannel.postMessage({\n                    type: 'update-search-menu-state',\n                    shouldExpandMenu: shouldExpand,\n                    searchText: text,\n                    keyboardEvent,\n                    offsetLeft: payload.offsetLeft\n                } as SearchMenuChannelMessage);\n            },\n            SEARCH_DEBOUNCE_MS,\n            { leading: true, trailing: true }\n        ),\n        [searchMenuChannel]\n    );\n\n    useEffect(() => {\n        const { offsetLeft } = inputContainerRef.current;\n        debouncedSendSearchUpdate({ text: searchText, shouldExpand: shouldExpandMenu, offsetLeft });\n\n        if (!shouldExpandMenu.shouldExpand) {\n            debouncedSendSearchUpdate.flush();\n        }\n    }, [debouncedSendSearchUpdate, shouldExpandMenu.shouldExpand, searchText, searchMenuChannel, inputContainerRef]);\n\n    const sendKeyboardEventToSearchMenuView = useCallback(\n        async (keyboardEvent: BrowserSearchMenuKeyboardEvent) => {\n            if (keyboardEvent.options.key === 'Enter') {\n                debouncedSendSearchUpdate.flush();\n            }\n            debouncedSendSearchUpdate({ keyboardEvent });\n        },\n        [debouncedSendSearchUpdate]\n    );\n\n    return { sendKeyboardEventToSearchMenuView };\n};\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport type OpenFin from '@openfin/core';\n\nimport { isLandingPageOrEmpty } from '@common/utils/enterpriseBrowser';\nimport { trimUrl } from '@common/utils/url';\n\nimport { SecureIconState } from '@enterprise/components/ControlBar/LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBar';\n\n/**\n * Custom hook that manages the contents of the address input as users interact with the browser and navigate views.\n * This hook handles the auto-focusing the address input on the landing page, registers handlers for view URL changes,\n * and manages the state of the secure icon displayed next to valid addresses.\n *\n * @param searchText - String representing the current text in the address input.\n * @param selectedViews - Array of currently selected views in the browser window.\n * @param addressBarInputRef - Ref object associated with the address input DOM element.\n * @param isSecure - Object describing whether the currently focused view's site is secure and whether to show an icon in the address bar.\n * @param setSearchText - Function that updates the search text.\n * @param setIsSecure - Function that updates whether the currently focused view's site is secure and whether to show an icon in the address bar.\n * @returns Object containing the selected URL and a function to update the address bar with the selected view's URL.\n */\nconst useSearchMenuViewLifecycleManager = (\n    searchText: string,\n    selectedViews: OpenFin.Identity[],\n    addressBarInputRef: React.MutableRefObject<HTMLInputElement>,\n    isSecure: SecureIconState,\n    setSearchText: React.Dispatch<React.SetStateAction<string>>,\n    setIsSecure: React.Dispatch<React.SetStateAction<SecureIconState>>\n) => {\n    const selectedViewRef = useRef<OpenFin.View>(null);\n    const [selectedViewUrl, setSelectedViewUrl] = useState<string>('');\n\n    const updateAddressBarWithUrl = useCallback((url: string) => {\n        const isLanding = isLandingPageOrEmpty(url);\n        setIsSecure({ isSecureSite: url.startsWith('https'), shouldShow: !isLanding });\n        setSelectedViewUrl(url);\n        setSearchText(isLanding ? '' : url);\n    }, []);\n\n    const resetAddressBarToSelectedViewUrl = useCallback(() => {\n        if (addressBarInputRef.current?.value !== trimUrl(selectedViewUrl) || !isSecure.shouldShow) {\n            updateAddressBarWithUrl(selectedViewUrl);\n        }\n    }, [selectedViewUrl, isSecure.shouldShow]);\n\n    const handleViewUrlChanged = useCallback(\n        (event: OpenFin.WebContentsEvents.UrlChangedEvent & { viewIdentity?: OpenFin.Identity }) => {\n            updateAddressBarWithUrl(event.url);\n\n            if (!isLandingPageOrEmpty(event.url)) {\n                // Focuses view when navigating from landing page to a site\n                fin.View.wrapSync(event.viewIdentity).focus();\n            }\n        },\n        []\n    );\n\n    const initializeAddressBar = useCallback(async () => {\n        if (selectedViews && selectedViews.length > 0) {\n            const selectedView = await fin.View.wrap(selectedViews[0]);\n            if (selectedViewRef.current?.identity.name !== selectedView.identity.name && selectedView) {\n                selectedViewRef.current = selectedView;\n                selectedViewRef.current.addListener('url-changed', handleViewUrlChanged);\n\n                // Update the address bar content with newly selected view's URL\n                const { url } = await selectedViewRef.current.getInfo();\n                updateAddressBarWithUrl(url);\n            }\n        }\n    }, [selectedViews, addressBarInputRef, selectedViewRef]);\n\n    useEffect(() => {\n        const previouslySelectedView = selectedViewRef.current;\n        if (\n            selectedViews?.length &&\n            selectedViews[0] &&\n            previouslySelectedView?.identity.name !== selectedViews[0].name\n        ) {\n            previouslySelectedView?.removeListener('url-changed', handleViewUrlChanged);\n        }\n\n        initializeAddressBar();\n    }, [selectedViews, initializeAddressBar, handleViewUrlChanged]);\n\n    useEffect(() => {\n        const { shouldShow, isSecureSite } = isSecure;\n        if (searchText !== selectedViewUrl && shouldShow) {\n            // Hide secure icon when user modifies contents of address bar in any way\n            setIsSecure({ isSecureSite, shouldShow: false });\n        }\n    }, [searchText]);\n\n    return { selectedViewUrl, resetAddressBarToSelectedViewUrl };\n};\n\nexport default useSearchMenuViewLifecycleManager;\n","import { useCallback, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport type OpenFin from '@openfin/core';\n\nimport { makeNewLandingPage } from '@common/utils/landing-page';\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport { savePageAsHandler, savePageHandler } from '@client-platform/api/context-menu/utils';\nimport { requestCloseBrowserWindow } from '@enterprise/api/controls';\n\nimport { BrowserCreateWindowRequest, getCurrentSync } from '@client-platform/index';\n\nconst createNewTab = async () => {\n    const newPage = await makeNewLandingPage();\n    const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n    await browser.addPage(newPage);\n    await browser.setActivePage(newPage.pageId);\n    raiseBrowserAnalytics({\n        type: 'HotKey',\n        action: 'NewPage',\n        entityId: currentOFIdentity\n    });\n};\n\nconst createNewWindow = async () => {\n    const page = await makeNewLandingPage();\n    const pages = [page];\n    const options: BrowserCreateWindowRequest = {\n        workspacePlatform: {\n            pages,\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            windowType: 'enterprise'\n        }\n    };\n    console.debug('createNewWindow', options);\n    const platform = getCurrentSync();\n    await platform.Browser.createWindow(options);\n    raiseBrowserAnalytics({\n        type: 'HotKey',\n        action: 'NewWindow',\n        entityId: currentOFIdentity\n    });\n};\n\nconst restoreTab = async () => {\n    const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n    // eslint-disable-next-line no-underscore-dangle\n    browser._restoreRemovedTab();\n    raiseBrowserAnalytics({\n        type: 'HotKey',\n        action: 'RestorePage',\n        entityId: currentOFIdentity\n    });\n};\n\nconst savePage = async () => {\n    await savePageHandler(currentOFIdentity);\n};\n\nconst savePageAs = async () => {\n    await savePageAsHandler(currentOFIdentity);\n};\n\nexport const processHotKeys = (\n    e: OpenFin.Events.ViewEvents.HotkeyEvent,\n    isOsWindows: boolean,\n    viewId?: OpenFin.Identity\n) => {\n    if (e.inputType === 'keyDown') {\n        switch (e.code) {\n            case 'KeyT':\n                e.shiftKey ? restoreTab() : createNewTab();\n                break;\n            case 'KeyS':\n                e.shiftKey ? savePageAs() : savePage();\n                break;\n            case 'KeyN':\n                createNewWindow();\n                break;\n            case 'KeyW':\n                requestCloseBrowserWindow();\n                break;\n            case 'BracketRight':\n                if (!isOsWindows) {\n                    const view = viewId ? fin.View.wrapSync(viewId) : undefined;\n                    view && view.navigateForward();\n                }\n                break;\n            case 'BracketLeft':\n                if (!isOsWindows) {\n                    const view = viewId ? fin.View.wrapSync(viewId) : undefined;\n                    view && view.navigateBack();\n                }\n                break;\n            default:\n                break;\n        }\n    }\n};\n\nconst useEnterpriseHotkeys = (viewId?: OpenFin.Identity) => {\n    const isWindows = useSelector(selectIsWindows);\n    const onHotKeys = useCallback(\n        (e: any) => {\n            processHotKeys(e, isWindows, viewId);\n        },\n        [isWindows, viewId]\n    );\n\n    useEffect(() => {\n        const win = fin.Window.wrapSync(currentOFIdentity);\n        win.addListener('hotkey', onHotKeys);\n        return () => {\n            win.removeListener('hotkey', onHotKeys);\n        };\n    }, [onHotKeys]);\n};\n\nexport default useEnterpriseHotkeys;\n","import { FocusEventHandler, MutableRefObject, useCallback, useContext } from 'react';\n\nimport isEmpty from 'lodash.isempty';\n\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\n\nimport { WindowSearchMenuContext } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\n\n/**\n * Custom hook that returns action handlers for the address input DOM element that update the search view expansion state.\n *\n * @param {MutableRefObject<HTMLInputElement>} addressBarInputRef - Ref object pointing to the address input element.\n * @param {React.Dispatch<React.SetStateAction<string>>} setSearchText - Function that updates the search text.\n * @param {React.Dispatch<React.SetStateAction<boolean>>} setInputFocus - Function that updates the input focus state.\n * @param {() => void} resetAddressBarToSelectedViewUrl - Function to reset the address bar with the selected view's URL.\n *\n * @returns Object containing functions to handle input change, click, and blur events.\n */\nexport const useUpdateInputExpansionState = (\n    addressBarInputRef: MutableRefObject<HTMLInputElement>,\n    setSearchText: React.Dispatch<React.SetStateAction<string>>,\n    setInputFocus: React.Dispatch<React.SetStateAction<boolean>>,\n    resetAddressBarToSelectedViewUrl: () => void\n) => {\n    const { shouldExpandMenu, setShouldExpandMenu } = useContext(WindowSearchMenuContext);\n\n    const onChange: React.ChangeEventHandler<HTMLInputElement> = useCallback((event) => {\n        if (isEmpty(event.target.value)) {\n            raiseBrowserAnalytics({\n                action: 'Clear Search',\n                type: 'Search'\n            });\n        }\n        setShouldExpandMenu({ shouldExpand: true, method: 'keystroke' });\n        setSearchText(event.target.value);\n    }, []);\n\n    const onClick: React.MouseEventHandler<HTMLInputElement> = useCallback(() => {\n        if (!shouldExpandMenu.shouldExpand) {\n            setShouldExpandMenu({ shouldExpand: true, method: 'click' });\n        }\n    }, [shouldExpandMenu.shouldExpand]);\n\n    const onBlur: FocusEventHandler<HTMLInputElement> = useCallback(() => {\n        setInputFocus(false);\n\n        if (document.activeElement !== addressBarInputRef.current) {\n            raiseBrowserAnalytics({\n                action: 'Blur Search',\n                type: 'Search'\n            });\n            setShouldExpandMenu({ shouldExpand: false });\n            resetAddressBarToSelectedViewUrl();\n        }\n    }, [addressBarInputRef, resetAddressBarToSelectedViewUrl]);\n\n    return { onChange, onClick, onBlur };\n};\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { ThemedSVG } from '@enterprise/styles/ThemedSVG';\n\nimport { SecureIconState } from '../LeftControlsContainer/EnterpriseNavigationContainer/AddressBar/AddressBar';\n\nconst LockContainer = styled(Box)`\n    padding: 4px 2px;\n    border-radius: ${({ theme }) => theme.radius.small};\n    svg {\n        fill: ${({ theme }) => theme.palette.textDefault};\n\n        path {\n            fill: ${({ theme }) => theme.palette.textDefault};\n        }\n    }\n`;\n\nexport const SecureIcon: React.FC<{ isSecure: SecureIconState }> = ({ isSecure }) => {\n    const Icon = isSecure.shouldShow ? (isSecure.isSecureSite ? LockIcon : DangerIcon) : React.Fragment;\n    return (\n        <LockContainer title={isSecure.isSecureSite ? '' : 'Insecure content'}>\n            <Icon />\n        </LockContainer>\n    );\n};\n\nconst LockIcon = () => {\n    return (\n        <ThemedSVG width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M5.97502 5.70882C5.97502 5.00378 6.17006 4.47313 6.49629 4.12185C6.81883 3.77456 7.3112 3.55765 8.00114 3.55765C8.69144 3.55765 9.18313 3.77411 9.50493 4.12066C9.83045 4.47122 10.025 5.00121 10.025 5.70661V7.19998H5.97502V5.70882ZM5.22502 7.19998V5.70882C5.22502 4.86966 5.45845 4.13723 5.94673 3.61147C6.43871 3.08173 7.1469 2.80765 8.00114 2.80765C8.85522 2.80765 9.56297 3.08097 10.0545 3.61031C10.5423 4.13564 10.775 4.86763 10.775 5.70661V7.19998H11.25C11.6642 7.19998 12 7.53577 12 7.94998V12.05C12 12.4642 11.6642 12.8 11.25 12.8H4.75C4.33579 12.8 4 12.4642 4 12.05V7.94998C4 7.53577 4.33579 7.19998 4.75 7.19998H5.22502Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n\nconst DangerIcon = () => {\n    return (\n        <ThemedSVG width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M8.92517 4.07633L12.405 11.1653C12.5461 11.4525 12.5291 11.7921 12.3598 12.0637C12.1906 12.3352 11.8932 12.5002 11.5735 12.5H4.42671C4.10675 12.5002 3.80936 12.3352 3.64014 12.0637C3.47092 11.7921 3.45385 11.4525 3.59491 11.1655L7.07481 4.07633C7.2481 3.72353 7.60694 3.5 7.99999 3.5C8.39304 3.5 8.75188 3.72353 8.92517 4.07633ZM8.59892 8.94417V6.57346C8.59892 6.31458 8.38905 6.10471 8.13018 6.10471C7.8713 6.10471 7.66143 6.31458 7.66143 6.57346V8.94417C7.66143 9.20306 7.8713 9.41292 8.13018 9.41292C8.38905 9.41292 8.59892 9.20306 8.59892 8.94417ZM8.13018 11.0253C8.44083 11.0253 8.69267 10.7734 8.69267 10.4628C8.69267 10.1521 8.44083 9.90028 8.13018 9.90028C7.81952 9.90028 7.56768 10.1521 7.56768 10.4628C7.56768 10.7734 7.81952 11.0253 8.13018 11.0253Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n","import styled from 'styled-components';\n\nexport const UrlInput = styled.input<{ expanded?: boolean }>`\n    width: 100%;\n    height: 100%;\n    border: unset;\n    border-radius: ${({ theme }) => theme.radius.small};\n\n    background: transparent;\n    color: ${({ theme }) => theme.palette.inputColor};\n\n    font-size: ${({ theme }) => theme.fontSize.base};\n    font: var(--openfin-ui-globalTypography);\n\n    &:focus {\n        outline: none;\n    }\n\n    &::placeholder {\n        color: ${({ theme }) => theme.palette.inputPlaceholder};\n    }\n`;\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgBookmarkFilled = function SvgBookmarkFilled(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 12,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M2.8 1.176a.5.5 0 0 0-.5.5v8.8a.5.5 0 0 0 .808.394l2.738-2.14a.25.25 0 0 1 .308 0l2.738 2.14a.5.5 0 0 0 .808-.394v-8.8a.5.5 0 0 0-.5-.5H2.8Z\",\n    fill: \"#fff\"\n  })));\n};\nexport default SvgBookmarkFilled;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nvar SvgBookmarkOutline = function SvgBookmarkOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 12,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M2.3 1.676a.5.5 0 0 1 .5-.5h6.4a.5.5 0 0 1 .5.5v8.8a.5.5 0 0 1-.808.394L6.154 8.73a.25.25 0 0 0-.308 0l-2.738 2.14a.5.5 0 0 1-.808-.394v-8.8Zm1 .5V9.45l1.93-1.509a1.25 1.25 0 0 1 1.54 0L8.7 9.451V2.176H3.3Z\",\n    fill: \"#fff\"\n  })));\n};\nexport default SvgBookmarkOutline;","import { useEffect, useMemo, useState } from 'react';\n\nimport { searchBookmark } from '@enterprise/components/ControlBar/SearchMenu/utils';\n\nconst combineBeacons = (beacons: (any | undefined)[]): string => {\n    return beacons.map((beacon) => beacon).join('-');\n};\n\nexport const useIsBookmarked = (url?: string, ...beacons: (any | undefined)[]) => {\n    const [isBookmarked, setIsBookmarked] = useState(false);\n    const combinedBeacons = useMemo(() => combineBeacons(beacons), [beacons]);\n\n    useEffect(() => {\n        if (url) {\n            searchBookmark(url).then((e) => setIsBookmarked(!!e));\n        } else {\n            setIsBookmarked(false);\n        }\n    }, [url, combinedBeacons]);\n\n    return isBookmarked;\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport OpenFin from '@openfin/core';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport { checkViewUrl } from '@enterprise/components/ControlBar/SearchMenu/utils';\n\nimport store from '@enterprise/store';\n\n/*\n * This hook checks if the selected view is navigated to the provided URL.\n */\nexport const useIsSelectedViewNavigated = ({ url }: { url: string }) => {\n    const [isViewNavigatedToUrl, setIsViewNavigatedToUrl] = useState<boolean>(false);\n    const [selectedView, setSelectedView] = useState<OpenFin.View | null>(null);\n    const { pageId } = useSelector(selectActivePage);\n    const selectedViews = selectSelectedViewsForPage(store.getState(), pageId);\n\n    const checkViewUrlCallback = useCallback(\n        (view: OpenFin.View | null) => checkViewUrl(view, url, setIsViewNavigatedToUrl),\n        [url]\n    );\n\n    useEffect(() => {\n        if (!selectedView) {\n            return;\n        }\n\n        const handleUrlChange = () => {\n            checkViewUrlCallback(selectedView);\n        };\n\n        selectedView.addListener('url-changed', handleUrlChange);\n        return () => {\n            selectedView.removeListener('url-changed', handleUrlChange);\n        };\n    }, [selectedView, checkViewUrlCallback]);\n\n    useEffect(() => {\n        const initializeSelectedView = async () => {\n            if (selectedViews.length === 0) {\n                setSelectedView(null);\n                return;\n            }\n\n            const view = await fin.View.wrap(selectedViews[0]);\n            setSelectedView(view);\n            checkViewUrlCallback(view);\n        };\n\n        initializeSelectedView();\n    }, [selectedViews, checkViewUrlCallback]);\n\n    return { isViewNavigatedToUrl, selectedView };\n};\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { updateBookmarkFavIcon } from '@common/utils/bookmarks';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport store from '@enterprise/store';\n\n/**\n * This hook listens for favicon updates on the selected view and updates the bookmark favicon.\n */\nexport const useListenForFavIconUpdates = ({ url }: { url: string }) => {\n    const { pageId } = useSelector(selectActivePage);\n    const selectedViews = selectSelectedViewsForPage(store.getState(), pageId);\n    const [selectedView, setSelectedView] = useState<OpenFin.View | null>(null);\n    /**\n     * This ref tracks the identity of the current view across renders.\n     * It's necessary because the Redux selector (selectSelectedViewsForPage) returns\n     * a new array reference on every state change, even when the actual view identity\n     * hasn't changed. Using this ref prevents unnecessary removal and re-attachment\n     * of event listeners when the component re-renders but the view hasn't actually\n     * changed, improving performance and preventing potential memory leaks.\n     */\n    const viewIdentityRef = useRef<OpenFin.Identity>(null);\n\n    /*\n     * This handler is used to update the favicon of a bookmark after the view has loaded and favicons are updated.\n     * This is necessary because the favicons are stale when url-changed event is fired,\n     * this is a workaround to update the bookmark favicon to appropriate one.\n     */\n    const trailingFavIconUpdateHandler = useCallback(async () => {\n        if (selectedView && url) {\n            await updateBookmarkFavIcon(url, selectedView);\n        }\n    }, [url, selectedView]);\n\n    useEffect(() => {\n        const setupViewListener = async () => {\n            if (!selectedViews.length || !url) {\n                return;\n            }\n            if (selectedViews[0].name === viewIdentityRef.current?.name) {\n                return;\n            }\n\n            if (selectedView) {\n                await selectedView.removeListener('page-favicon-updated', trailingFavIconUpdateHandler);\n            }\n\n            const view = await fin.View.wrap(selectedViews[0]);\n            viewIdentityRef.current = view.identity;\n            setSelectedView(view);\n            await view.addListener('page-favicon-updated', trailingFavIconUpdateHandler);\n        };\n\n        setupViewListener();\n\n        return () => {\n            (async () => {\n                if (selectedView) {\n                    await selectedView.removeListener('page-favicon-updated', trailingFavIconUpdateHandler);\n                }\n            })();\n        };\n    }, [selectedViews, url, trailingFavIconUpdateHandler, selectedView]);\n};\n","import { useContext } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport Route from '@common/utils/route';\nimport { WindowName } from '@common/utils/window';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\nimport usePreloadedWindow from '@common/hooks/usePreloadedWindow';\n\nexport const useEnterpriseBookmarkDialogWindow = (): OpenFin.Window | null =>\n    usePreloadedWindow({\n        windowName: WindowName.EnterpriseBookmarkDialogWindow,\n        route: Route.EnterpriseBookmarkDialog,\n        shouldPreload: useContext(BrowserTypeContext).isEnterprise\n    });\n","import { MutableRefObject, useCallback, useEffect, useRef, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport { connectToBookmarkDialogChannel } from '@common/utils/enterprise-channels';\nimport { BookmarkDialogChannelMessage, EnterpriseMenuType } from '@common/utils/popup-window';\nimport { getWindowBounds } from '@common/utils/window';\n\nimport { useEnterpriseBookmarkDialogWindow } from '@enterprise/hooks/EnterpriseSearchMenu/useEnterpriseBookmarkDialogWindow';\n\n/*\n * This hook is used to show the Add/Edit Bookmark dialog when the user clicks on the bookmark icon in the search view.\n * It also listens for the response from the dialog and updates the state to indicate if the bookmark was updated or created.\n * @param bookmarkIconRef - The ref of the bookmark icon element\n * @param selectedView - The selected view to bookmark\n * @returns {showDialog, isDialogShown, bookmarkUpdatedOrCreated}\n */\nexport const useAddEditBookmarkDialog = (\n    bookmarkIconRef: MutableRefObject<HTMLElement | null>,\n    selectedView?: OpenFin.View\n) => {\n    const [isDialogShown, setIsDialogShown] = useState(false);\n    const [isBookmarkUpdatedOrCreated, setIsBookmarkUpdatedOrCreated] = useState(false);\n    const channelRef = useRef<OpenFin.ChannelClient | null>(null);\n\n    useEffect(() => {\n        setIsBookmarkUpdatedOrCreated(false);\n    }, [selectedView]);\n\n    useEnterpriseBookmarkDialogWindow();\n\n    const showDialog = useCallback(async () => {\n        if (!bookmarkIconRef.current || !selectedView || isDialogShown) {\n            return;\n        }\n\n        if (!channelRef.current) {\n            channelRef.current = await connectToBookmarkDialogChannel();\n            channelRef.current.register('response', (e: any) => {\n                if (e.type !== 'cancel') {\n                    setIsBookmarkUpdatedOrCreated((prev) => !prev);\n                }\n                if (e.type !== 'bookmark-created') {\n                    // when bookmark is created the dialog is still shown\n                    setIsDialogShown(false);\n                }\n            });\n        }\n\n        const bookmarkIconRect = bookmarkIconRef.current.getBoundingClientRect();\n        const browserWindow = fin.Window.getCurrentSync();\n        const browserWindowBounds = await getWindowBounds(browserWindow);\n        await channelRef.current.dispatch('open', {\n            parentIdentity: fin.me.identity,\n            type: EnterpriseMenuType.AddEditBookmark,\n            responseIdentity: fin.me.identity,\n            x: browserWindowBounds.left + bookmarkIconRect.left,\n            y: browserWindowBounds.top + bookmarkIconRect.top + bookmarkIconRect.height,\n            payload: { selectedViewIdentity: selectedView?.identity }\n        } as BookmarkDialogChannelMessage);\n\n        setIsDialogShown(true);\n    }, [bookmarkIconRef, selectedView, isDialogShown]);\n\n    useEffect(() => {\n        // Cleanup function to disconnect from the channel when the component unmounts\n        return () => {\n            if (channelRef.current) {\n                channelRef.current.disconnect();\n                channelRef.current = null; // Clean up the ref\n            }\n        };\n    }, []);\n\n    return { showDialog, isDialogShown, isBookmarkUpdatedOrCreated };\n};\n","import styled from 'styled-components';\n\nexport const IconContainer = styled.div<{ isSchemeDark: boolean; isDialogShown: boolean; shouldRender?: boolean }>`\n    svg {\n        z-index: 100;\n        fill: ${({ theme }) => theme.palette.textDefault};\n\n        path {\n            fill: ${({ theme }) => theme.palette.textDefault};\n        }\n    }\n    z-index: 99;\n\n    width: ${({ theme, shouldRender }) => (shouldRender ? theme.px.large : '0px')};\n    height: ${({ theme }) => theme.px.large};\n    border-radius: ${({ theme }) => theme.radius.xsmall};\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    opacity: ${({ shouldRender }) => (shouldRender ? 1 : 0)};\n\n    // Hover effect on the outline when the icon container is hovered\n    &:hover {\n        background-color: ${({ theme, isSchemeDark }) =>\n            isSchemeDark ? theme.palette.background4 : theme.palette.background2};\n    }\n\n    ${({ isDialogShown, theme, isSchemeDark }) =>\n        isDialogShown &&\n        `background-color: ${isSchemeDark ? theme.palette.background5 : theme.palette.background4} !important;`}\n`;\n","import { useContext, useEffect } from 'react';\n\nimport { enterpriseNavigationTestIds } from '@common/utils/test-ids';\n\nimport BookmarkFilledSvg from '@enterprise/assets/icons/bookmark-filled.svg';\nimport BookmarkOutlinedSvg from '@enterprise/assets/icons/bookmark-outline.svg';\n\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport { BookmarksContext } from '@enterprise/context/BookmarksContext';\nimport { useIsBookmarked } from '@enterprise/hooks/EnterpriseSearchMenu/useIsBookmarked';\nimport { useIsSelectedViewNavigated } from '@enterprise/hooks/EnterpriseSearchMenu/useIsSelectedViewNavigated';\nimport { useListenForFavIconUpdates } from '@enterprise/hooks/EnterpriseSearchMenu/useListenForFavIconUpdates';\nimport { useAddEditBookmarkDialog } from '@enterprise/hooks/useAddEditBookmarkDialog';\n\nimport { IconContainer } from './IconContainer';\n\ntype BookmarkIconProps = {\n    url?: string;\n    isSecureShowing?: boolean;\n    bookmarkButtonRef: React.MutableRefObject<HTMLDivElement>;\n    onRenderChange?: (isRendered: boolean) => void;\n    isMenuExpanded?: boolean;\n};\n\nexport const BookmarkButton = ({\n    url,\n    isSecureShowing,\n    bookmarkButtonRef,\n    onRenderChange,\n    isMenuExpanded\n}: BookmarkIconProps) => {\n    const { isSchemeDark } = useSystemSchemeCheck();\n    useListenForFavIconUpdates({ url });\n    const { selectedView, isViewNavigatedToUrl } = useIsSelectedViewNavigated({ url });\n    const { showDialog, isDialogShown, isBookmarkUpdatedOrCreated } = useAddEditBookmarkDialog(\n        bookmarkButtonRef,\n        selectedView\n    );\n\n    const { mostRecentlyUpdated } = useContext(BookmarksContext);\n    const isBookmarked = useIsBookmarked(url, isBookmarkUpdatedOrCreated, mostRecentlyUpdated);\n    const shouldRender = isViewNavigatedToUrl && isSecureShowing && !isMenuExpanded;\n\n    useEffect(() => {\n        onRenderChange?.(shouldRender);\n    }, [shouldRender, onRenderChange]);\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            showDialog();\n        }\n    };\n\n    return (\n        shouldRender && (\n            <IconContainer\n                isSchemeDark={isSchemeDark}\n                onClick={showDialog}\n                onKeyDown={handleKeyDown}\n                isDialogShown={isDialogShown}\n                ref={bookmarkButtonRef}\n                shouldRender={shouldRender}\n                tabIndex={0}\n                role=\"button\"\n                aria-label=\"Add or edit bookmark\"\n                data-testid={enterpriseNavigationTestIds.bookmarkButton}\n            >\n                {isBookmarked ? <BookmarkFilledSvg /> : <BookmarkOutlinedSvg />}\n            </IconContainer>\n        )\n    );\n};\n","import { MutableRefObject, useCallback, useEffect } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { mapContentComponentState } from '@common/utils/layout';\nimport { currentOFIdentity, getCurrentOFWindow } from '@common/utils/window';\n\nimport { getActivePageForWindow } from '@enterprise/api/pages/attached';\n\nimport { zoomViewIn, zoomViewOut } from '@enterprise/utils/zoom-controls';\n\nimport { useIsWindows } from './useIsWindows';\n\ninterface UseSetUpZoomHotkeysProps {\n    selectedView: OpenFin.View;\n    zoomPercentRef: MutableRefObject<number>;\n    showDialog: () => void;\n}\n\n/**\n * This hook is used to set up the zoom hotkeys for the selected view and the current window.\n */\nexport const useSetUpZoomHotkeys = ({ selectedView, zoomPercentRef, showDialog }: UseSetUpZoomHotkeysProps) => {\n    const isWindows = useIsWindows();\n\n    const handleZoomSupertabHotkey = useCallback(\n        async (e: OpenFin.Events.WindowEvents.HotkeyEvent | OpenFin.Events.ViewEvents.HotkeyEvent) => {\n            const activeLayout = (await getActivePageForWindow()).layout;\n            const views = mapContentComponentState(activeLayout.content).map((viewOptions) => {\n                return fin.View.wrapSync({ name: viewOptions.name, uuid: currentOFIdentity.uuid });\n            });\n            switch (e.key) {\n                // Windows uses (+) when the shift key is pressed and mac uses (=)\n                case '=':\n                case '+':\n                    views.forEach(async (view) => {\n                        if (\n                            view.identity.uuid === selectedView.identity.uuid &&\n                            view.identity.name === selectedView.identity.name\n                        ) {\n                            // Need to set the zoom percent for the selected view bc the ZoomButton determines if its renders\n                            // based on if the zoom percent is 100 or not\n                            zoomPercentRef.current = await zoomViewIn(view);\n                        } else {\n                            await zoomViewIn(view);\n                        }\n                        showDialog();\n                    });\n                    break;\n                // Windows uses (_) when the shift key is pressed and mac uses (-)\n                case '-':\n                case '_':\n                    views.forEach(async (view) => {\n                        if (\n                            view.identity.uuid === selectedView.identity.uuid &&\n                            view.identity.name === selectedView.identity.name\n                        ) {\n                            zoomPercentRef.current = await zoomViewOut(view);\n                        } else {\n                            await zoomViewOut(view);\n                        }\n                        showDialog();\n                    });\n                    break;\n            }\n        },\n        [selectedView, showDialog]\n    );\n\n    const handleZoomViewHotkey = useCallback(\n        async (e: OpenFin.Events.WindowEvents.HotkeyEvent | OpenFin.Events.ViewEvents.HotkeyEvent) => {\n            switch (e.key) {\n                case '=':\n                    zoomPercentRef.current = await zoomViewIn(selectedView);\n                    showDialog();\n                    break;\n                case '-':\n                    zoomPercentRef.current = await zoomViewOut(selectedView);\n                    showDialog();\n                    break;\n            }\n        },\n        [showDialog, zoomPercentRef, selectedView]\n    );\n\n    const handleWindowHotkey = useCallback(\n        async (e: OpenFin.Events.WindowEvents.HotkeyEvent) => {\n            if (e.inputType === 'keyDown' && (isWindows ? e.ctrlKey : e.metaKey)) {\n                if (e.shiftKey) {\n                    handleZoomSupertabHotkey(e);\n                } else {\n                    handleZoomViewHotkey(e);\n                }\n            }\n        },\n        [isWindows, handleZoomSupertabHotkey]\n    );\n\n    const handleViewHotkey = useCallback(\n        async (e: OpenFin.Events.ViewEvents.HotkeyEvent) => {\n            if (e.inputType === 'keyDown' && (isWindows ? e.ctrlKey : e.metaKey)) {\n                if (e.shiftKey) {\n                    handleZoomSupertabHotkey(e);\n                } else {\n                    handleZoomViewHotkey(e);\n                }\n            }\n        },\n        [isWindows, handleZoomSupertabHotkey, handleZoomViewHotkey]\n    );\n\n    useEffect(() => {\n        if (selectedView) {\n            selectedView.addListener('hotkey', handleViewHotkey);\n        }\n        return () => {\n            if (selectedView) {\n                selectedView.removeListener('hotkey', handleViewHotkey);\n            }\n        };\n    }, [selectedView, handleViewHotkey]);\n\n    useEffect(() => {\n        const window = getCurrentOFWindow();\n        window.addListener('hotkey', handleWindowHotkey);\n        return () => {\n            window.removeListener('hotkey', handleWindowHotkey);\n        };\n    }, [handleWindowHotkey]);\n};\n","import { MutableRefObject, useCallback, useContext, useEffect, useRef, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport { connectToZoomControlsDialogChannel } from '@common/utils/enterprise-channels';\nimport { EnterpriseMenuType, ZoomControlsDialogChannelMessage } from '@common/utils/popup-window';\nimport Route from '@common/utils/route';\nimport { getWindowBounds, WindowName } from '@common/utils/window';\n\nimport { ZoomUtils } from '@enterprise/utils/zoom-controls';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\nimport usePreloadedWindow from '@common/hooks/usePreloadedWindow';\nimport { useWithWindowStyleOverride } from '@common/hooks/useWindowFocusState';\n\nimport { useIsWindows } from './useIsWindows';\n\nconst ZOOM_DIALOG_WINDOW_DIMENSIONS = {\n    defaultWidth: 193,\n    defaultHeight: 48\n};\n\n/**\n * One of the requirements for the zoom dialog is that the window must not be focused when the dialog is opened, unless the user interacts with it.\n * Mac and Windows handle this behavior differently of having a window open but not focused.\n * On Mac, the behavior mirrors the behavior as if the window is focused. So when you click anywhere but the zoom dialog window, the dialog window is blurred.\n * On Windows, when the dialog is open and not focused, clicks outside of the dialog window do not trigger the blur event. So we have to set up our own listeners for these events.\n *\n * This function sets up the necessary listeners to hide the dialog window when the user interacts outside of it.\n *\n * @param zoomWindow\n * @param browserWindow\n * @param selectedView\n * @param resolve\n */\nconst setUpBlurListenersForWindows = async (\n    zoomWindow: OpenFin.Window,\n    browserWindow: OpenFin.Window,\n    selectedView: OpenFin.View,\n    resolve: () => void\n) => {\n    const hideZoomWindow = async () => {\n        await zoomWindow.hide();\n    };\n\n    const blurListener = async () => {\n        const currentFocusedWindow = await fin.System.getFocusedWindow();\n        // hide the zoom window ony if it isn't already focused or no window in this runtime is focused\n        if (!currentFocusedWindow || currentFocusedWindow.name !== WindowName.ZoomControlsDialog) {\n            hideZoomWindow();\n        }\n    };\n\n    await zoomWindow.once('hidden', () => {\n        resolve();\n        window.removeEventListener('mousedown', hideZoomWindow);\n        browserWindow.removeListener('bounds-changing', hideZoomWindow);\n        browserWindow.removeListener('maximized', hideZoomWindow);\n        browserWindow.removeListener('minimized', hideZoomWindow);\n        browserWindow.removeListener('restored', hideZoomWindow);\n        browserWindow.removeListener('blurred', blurListener);\n        selectedView.removeListener('blurred', blurListener);\n    });\n\n    window.addEventListener('mousedown', hideZoomWindow);\n    browserWindow.addListener('bounds-changing', hideZoomWindow);\n    browserWindow.addListener('maximized', hideZoomWindow);\n    browserWindow.addListener('minimized', hideZoomWindow);\n    browserWindow.addListener('restored', hideZoomWindow);\n\n    // ensure that we hide the zoom window when browserWindow or selected view is blurred\n    browserWindow.on('blurred', blurListener);\n    selectedView.on('blurred', blurListener);\n};\n\n/*\n * This hook is used to show the zoom controls dialog when the user clicks on the zoom button in the address bar..\n * @param zoomButtonRef - The ref of the zoom button element\n * @param selectedView - The selected view to zoom\n * @param zoomPercentRef - The ref of the zoom percent\n * @returns {showDialog, isDialogShown}\n */\nexport const useZoomControlsDialog = (\n    zoomButtonRef: MutableRefObject<HTMLElement | null>,\n    selectedView: OpenFin.View,\n    zoomPercentRef: MutableRefObject<number>,\n    isMenuExpanded: boolean\n) => {\n    const [isDialogShown, setIsDialogShown] = useState(false);\n    const channelRef = useRef<OpenFin.ChannelClient | null>(null);\n    const withWindowStyleOverride = useWithWindowStyleOverride();\n    const isWindows = useIsWindows();\n\n    usePreloadedWindow({\n        windowName: WindowName.ZoomControlsDialog,\n        route: Route.ZoomControlsDialog,\n        shouldPreload: useContext(BrowserTypeContext).isEnterprise,\n        windowCreationOptions: {\n            ...ZOOM_DIALOG_WINDOW_DIMENSIONS,\n            alwaysOnTop: isWindows && true,\n            cornerRounding: isWindows && {\n                height: 4,\n                width: 4\n            }\n        }\n    });\n\n    const showDialog = useCallback(async () => {\n        if (isMenuExpanded) return;\n\n        if (!channelRef.current) {\n            channelRef.current = await connectToZoomControlsDialogChannel();\n            channelRef.current.register('response', (e: { type: string; payload: { zoomPercent: number } }) => {\n                if (e.type === 'cancel') {\n                    setIsDialogShown(false);\n                    zoomPercentRef.current = e.payload.zoomPercent;\n                }\n            });\n        }\n\n        const zoomWindow = fin.Window.wrapSync({ uuid: fin.me.identity.uuid, name: WindowName.ZoomControlsDialog });\n\n        const browserWindow = fin.Window.getCurrentSync();\n        const browserWindowBounds = await getWindowBounds(browserWindow);\n\n        const zoomButtonRect = zoomButtonRef.current.getBoundingClientRect();\n        const dialogCoordinates = {\n            x: browserWindowBounds.left + zoomButtonRect.right - ZOOM_DIALOG_WINDOW_DIMENSIONS.defaultWidth,\n            y: browserWindowBounds.top + zoomButtonRect.top + zoomButtonRect.height\n        };\n\n        const setUpBlurListenerAndOpenDialog = async (resolve: () => void) => {\n            /**\n             * Each time one of the zoom hotkey is pressed, showDialog is called.\n             * So if the dialog is already open, we do not want to set up these listeners again.\n             */\n            if (!isDialogShown) {\n                if (isWindows) {\n                    await setUpBlurListenersForWindows(zoomWindow, browserWindow, selectedView, resolve);\n                } else {\n                    await zoomWindow.once('blurred', () => {\n                        resolve();\n                    });\n                }\n            }\n\n            await channelRef.current.dispatch('open', {\n                parentIdentity: fin.me.identity,\n                type: EnterpriseMenuType.ZoomControls,\n                responseIdentity: fin.me.identity,\n                x: dialogCoordinates.x,\n                y: dialogCoordinates.y,\n                payload: { selectedViewIdentity: selectedView?.identity, zoomPercent: zoomPercentRef.current }\n            } as ZoomControlsDialogChannelMessage);\n        };\n\n        // withWindowStyleOverride will style the browser window as focused until the promise resolves (when the dialog is hidden)\n        withWindowStyleOverride('focused', async () => {\n            await new Promise<void>((resolve) => {\n                setUpBlurListenerAndOpenDialog(resolve);\n            });\n        });\n\n        setIsDialogShown(true);\n    }, [\n        isMenuExpanded,\n        selectedView,\n        isDialogShown,\n        withWindowStyleOverride,\n        zoomButtonRef,\n        zoomPercentRef,\n        isWindows\n    ]);\n\n    useEffect(() => {\n        const checkZoomLevel = async () => {\n            if (selectedView) {\n                const level = await selectedView.getZoomLevel();\n                zoomPercentRef.current = ZoomUtils.levelToPercent(level);\n            }\n        };\n\n        const checkZoomLevelWithOptions = async () => {\n            if (selectedView) {\n                const opts = await selectedView.getOptions();\n                zoomPercentRef.current = ZoomUtils.levelToPercent(opts.zoomLevel);\n            }\n        };\n\n        checkZoomLevel();\n\n        if (selectedView) {\n            // This listener gets the correct zoom level on a newly opened view.\n            // getZoomLevel() does not get the correct zoom level until it is applied which can be after the view is loaded.\n            // This is a workaround until we get zoom eventing from core.\n            selectedView.once('did-finish-load', checkZoomLevelWithOptions);\n        }\n\n        return () => {\n            if (selectedView) {\n                selectedView.removeListener('did-finish-load', checkZoomLevelWithOptions);\n            }\n        };\n    }, [selectedView]);\n\n    useEffect(() => {\n        // Cleanup function to disconnect from the channel when the component unmounts\n        return () => {\n            if (channelRef.current) {\n                channelRef.current.disconnect();\n                channelRef.current = null; // Clean up the ref\n            }\n        };\n    }, []);\n\n    return { showDialog, isDialogShown };\n};\n","import { useEffect, useRef } from 'react';\n\nimport { Icon } from '@openfin/ui-library';\n\nimport { enterpriseNavigationTestIds } from '@common/utils/test-ids';\n\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport { useIsSelectedViewNavigated } from '@enterprise/hooks/EnterpriseSearchMenu/useIsSelectedViewNavigated';\nimport { useSetUpZoomHotkeys } from '@enterprise/hooks/useSetUpZoomHotkeys';\nimport { useZoomControlsDialog } from '@enterprise/hooks/useZoomControlsDialog';\n\nimport { IconContainer } from './IconContainer';\n\ntype ZoomButtonProps = {\n    url?: string;\n    isMenuExpanded?: boolean;\n    zoomButtonRef: React.MutableRefObject<HTMLDivElement>;\n    onRenderChange?: (isRendered: boolean) => void;\n};\n\nexport const ZoomButton = ({ url, onRenderChange, isMenuExpanded, zoomButtonRef }: ZoomButtonProps) => {\n    const zoomPercentRef = useRef(100);\n    const { isSchemeDark } = useSystemSchemeCheck();\n    const { selectedView } = useIsSelectedViewNavigated({ url });\n    const { showDialog, isDialogShown } = useZoomControlsDialog(\n        zoomButtonRef,\n        selectedView,\n        zoomPercentRef,\n        isMenuExpanded\n    );\n    useSetUpZoomHotkeys({ selectedView, zoomPercentRef, showDialog });\n\n    const shouldRender = (isDialogShown || zoomPercentRef.current !== 100) && !isMenuExpanded;\n\n    useEffect(() => {\n        onRenderChange?.(shouldRender);\n    }, [shouldRender, onRenderChange]);\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            showDialog();\n        }\n    };\n\n    return (\n        <IconContainer\n            isSchemeDark={isSchemeDark}\n            onClick={showDialog}\n            onKeyDown={handleKeyDown}\n            isDialogShown={isDialogShown}\n            ref={zoomButtonRef}\n            shouldRender={shouldRender}\n            tabIndex={shouldRender ? 0 : -1}\n            role=\"button\"\n            aria-label=\"Open zoom controls\"\n            data-testid={enterpriseNavigationTestIds.zoomButton}\n        >\n            <Icon icon=\"ZoomInIcon\" />\n        </IconContainer>\n    );\n};\n","import { useRef, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { BookmarkButton } from './BookmarkButton';\nimport { ZoomButton } from './ZoomButton';\n\ntype AddressBarButtonsProps = {\n    onGradientClick: () => void;\n    isSchemeDark: boolean;\n    url: string;\n    isMenuExpanded: boolean;\n    isSecureShowing: boolean;\n    inputContainerRef: React.MutableRefObject<HTMLDivElement>;\n};\n\nexport const AddressBarButtons = ({\n    onGradientClick,\n    isSchemeDark,\n    url,\n    isMenuExpanded,\n    isSecureShowing\n}: AddressBarButtonsProps) => {\n    const zoomButtonRef = useRef<HTMLDivElement>(null);\n    const bookmarkButtonRef = useRef<HTMLDivElement>(null);\n    const [isZoomButtonRendered, setIsZoomButtonRendered] = useState(false);\n    const [isBookmarkButtonRendered, setIsBookmarkButtonRendered] = useState(false);\n\n    const shouldRenderGradient = isZoomButtonRendered || isBookmarkButtonRendered;\n\n    return (\n        <ButtonsContainer>\n            {shouldRenderGradient && (\n                <ButtonsLeftGradient\n                    onClick={onGradientClick}\n                    isSchemeDark={isSchemeDark}\n                    shouldRenderZoomButton={isZoomButtonRendered}\n                />\n            )}\n            <ZoomButton\n                url={url}\n                isMenuExpanded={isMenuExpanded}\n                zoomButtonRef={zoomButtonRef}\n                onRenderChange={setIsZoomButtonRendered}\n            />\n            <BookmarkButton\n                url={url}\n                isMenuExpanded={isMenuExpanded}\n                isSecureShowing={isSecureShowing}\n                bookmarkButtonRef={bookmarkButtonRef}\n                onRenderChange={setIsBookmarkButtonRendered}\n            />\n        </ButtonsContainer>\n    );\n};\n\nconst ButtonsContainer = styled(Box)`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding-right: 2px;\n`;\n\nconst ButtonsLeftGradient = styled.div<{ isSchemeDark: boolean; shouldRenderZoomButton: boolean }>`\n    width: ${({ shouldRenderZoomButton }) => (shouldRenderZoomButton ? '56px' : '40px')};\n    height: 18px;\n    background: ${({ isSchemeDark, theme }) =>\n        isSchemeDark\n            ? `linear-gradient(to right, transparent 0%, ${theme.palette.background3} 20px, ${theme.palette.background3} 40px)`\n            : `linear-gradient(to right, transparent 0%, ${theme.palette.background1} 20px, ${theme.palette.background1} 40px)`};\n\n    position: absolute;\n    margin-right: ${({ shouldRenderZoomButton }) => (shouldRenderZoomButton ? '-38px' : '-20px')};\n    right: ${({ shouldRenderZoomButton }) => (shouldRenderZoomButton ? '38px' : '20px')};\n`;\n","import {\n    Dispatch,\n    FocusEventHandler,\n    MutableRefObject,\n    SetStateAction,\n    useCallback,\n    useContext,\n    useEffect,\n    useState\n} from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled, { css } from 'styled-components';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { BrowserSearchMenuKeyboardEvent } from '@common/utils/popup-window';\nimport { enterpriseNavigationTestIds } from '@common/utils/test-ids';\nimport { trimUrl } from '@common/utils/url';\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport { CONTROL_BAR_HEIGHT } from '@enterprise/components/ControlBar/utils';\n\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport { WindowSearchMenuContext } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\nimport { useUpdateInputExpansionState } from '@enterprise/hooks/EnterpriseSearchMenu/useUpdateInputExpansionState';\n\nimport { SecureIcon } from '../../../SearchMenu/SecureIcon';\nimport { UrlInput } from '../../../SearchMenu/UrlInput';\n\nimport { AddressBarButtons } from './Buttons/AddressBarButtons';\nimport { SecureIconState } from './AddressBar';\n\ntype AddressBarInputProps = {\n    addressSearchResultsViewIdentity: OpenFin.Identity;\n    addressBarInputRef: MutableRefObject<HTMLInputElement>;\n    inputContainerRef: MutableRefObject<HTMLDivElement>;\n    addressBarWidth: number;\n    isSecure: SecureIconState;\n    setSearchText: Dispatch<SetStateAction<string>>;\n    searchText: string;\n    sendKeyboardEventToSearchMenuView: (keyboardEvent: BrowserSearchMenuKeyboardEvent) => void;\n    resetAddressBarToSelectedViewUrl: () => void;\n};\n\nexport const AddressBarInput: React.FC<AddressBarInputProps> = ({\n    addressSearchResultsViewIdentity,\n    addressBarInputRef,\n    inputContainerRef,\n    addressBarWidth,\n    isSecure,\n    setSearchText,\n    searchText,\n    sendKeyboardEventToSearchMenuView,\n    resetAddressBarToSelectedViewUrl\n}) => {\n    const { shouldExpandMenu, setShouldExpandMenu } = useContext(WindowSearchMenuContext);\n\n    const isWindows = useSelector(selectIsWindows);\n    const { isSchemeDark } = useSystemSchemeCheck();\n    const [inputFocus, setInputFocus] = useState<boolean>();\n\n    const { onChange, onClick, onBlur } = useUpdateInputExpansionState(\n        addressBarInputRef,\n        setSearchText,\n        setInputFocus,\n        resetAddressBarToSelectedViewUrl\n    );\n\n    useEffect(() => {\n        if (shouldExpandMenu.method === 'click' && addressBarInputRef.current.value) {\n            addressBarInputRef.current.select();\n        }\n    }, [addressBarInputRef, shouldExpandMenu.method]);\n\n    const onFocus: FocusEventHandler<HTMLInputElement> = useCallback(() => {\n        raiseBrowserAnalytics({\n            type: 'Search',\n            action: 'Focus Search'\n        });\n        setInputFocus(true);\n    }, []);\n\n    const sendKeyboardEventCallback = useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            const { type, key, metaKey, ctrlKey, altKey } = event;\n            sendKeyboardEventToSearchMenuView({\n                type,\n                options: {\n                    key,\n                    metaKey,\n                    ctrlKey,\n                    altKey\n                }\n            });\n        },\n        [sendKeyboardEventToSearchMenuView]\n    );\n\n    const handleKeyDown: React.KeyboardEventHandler<HTMLInputElement> = useCallback(\n        async (event) => {\n            const addressSearchResultsView = fin.View.wrapSync(addressSearchResultsViewIdentity);\n            if (shouldExpandMenu.shouldExpand) {\n                switch (event.key) {\n                    case 'Escape':\n                        setShouldExpandMenu({ shouldExpand: false });\n                        break;\n                    case 'Tab':\n                        // if tab key is pressed and the results view is showing, give focus to the first tabbable element results view;\n                        event.preventDefault();\n                        await addressSearchResultsView.focus();\n                        sendKeyboardEventCallback(event);\n                        break;\n                    case 'ArrowDown':\n                    case 'ArrowUp':\n                        if (event.ctrlKey || event.metaKey) {\n                            break;\n                        }\n                    // fall through\n                    case 'Home':\n                    case 'End':\n                    case 'Enter':\n                        event.preventDefault();\n                        sendKeyboardEventCallback(event);\n                        break;\n                }\n            }\n        },\n        [\n            shouldExpandMenu.shouldExpand,\n            addressSearchResultsViewIdentity,\n            setShouldExpandMenu,\n            sendKeyboardEventCallback\n        ]\n    );\n\n    const onGradientClick = () => setShouldExpandMenu({ shouldExpand: true, method: 'click' });\n\n    return (\n        <Container>\n            <InputContainer\n                isSchemeDark={isSchemeDark}\n                expanded={shouldExpandMenu.shouldExpand}\n                ref={inputContainerRef}\n                addressBarWidth={addressBarWidth}\n                isWindows={isWindows}\n                data-testid={enterpriseNavigationTestIds.addressBarContainer}\n            >\n                {!shouldExpandMenu.shouldExpand && <SecureIcon isSecure={isSecure} />}\n                <UrlInput\n                    id=\"address-bar-url-input\"\n                    aria-label=\"Search or enter web address\"\n                    data-testid={enterpriseNavigationTestIds.addressBarInput}\n                    autoComplete=\"off\"\n                    placeholder=\"Search or enter web address\"\n                    onKeyDown={handleKeyDown}\n                    onChange={onChange}\n                    onClick={onClick}\n                    value={\n                        shouldExpandMenu.shouldExpand || !isSecure.shouldShow || inputFocus\n                            ? searchText\n                            : trimUrl(searchText)\n                    }\n                    onFocus={onFocus}\n                    onBlur={onBlur}\n                    ref={addressBarInputRef}\n                    expanded={shouldExpandMenu.shouldExpand}\n                />\n                <AddressBarButtons\n                    onGradientClick={onGradientClick}\n                    isSchemeDark={isSchemeDark}\n                    url={trimUrl(searchText)}\n                    isMenuExpanded={shouldExpandMenu.shouldExpand}\n                    isSecureShowing={isSecure.shouldShow}\n                    inputContainerRef={inputContainerRef}\n                />\n            </InputContainer>\n        </Container>\n    );\n};\n\nconst Container = styled(Box)`\n    height: ${CONTROL_BAR_HEIGHT}px;\n    min-width: 240px;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    -webkit-app-region: unset;\n`;\n\nconst InputContainer = styled(Box)<{\n    expanded: boolean;\n    isSchemeDark: boolean;\n    addressBarWidth: number;\n    isWindows: boolean;\n}>`\n    border-radius: ${({ theme }) => theme.radius.small};\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    -webkit-app-region: no-drag;\n    user-select: auto;\n\n    ${({ expanded, theme, isSchemeDark, addressBarWidth, isWindows }) =>\n        expanded\n            ? css`\n                  // Extra 1px height on Windows to account for window border\n                  height: ${CONTROL_BAR_HEIGHT + (isWindows ? 1 : 0)}px;\n                  width: ${addressBarWidth}px;\n                  border-radius: 0;\n\n                  border: 1px solid ${theme.palette.background5};\n                  border-bottom: 1px solid ${theme.palette.background1};\n                  border-top: unset;\n\n                  // bottom-border is a better solution on Windows because the container height\n                  // bleeds into the chrome border from the \"top\" attribute, but on Mac this isn't applicable\n                  ${!isWindows &&\n                  css`\n                      border-bottom: unset;\n                      box-shadow: 0px 2px 0px -1px ${theme.palette.background1};\n                  `}\n\n                  background-color: ${theme.palette.background1};\n\n                  padding: 0px ${theme.px.large};\n\n                  z-index: 100; // Has to be higher than BookmarksPanel\n                  position: absolute;\n\n                  // Explicit 1px offset from top on Windows because this container's flex parent has\n                  // an even height (40px) but attempts to center a child with an odd height (41px)\n                  top: ${isWindows ? '1px' : undefined};\n              `\n            : css`\n                  height: 24px;\n                  width: 240px;\n                  border: 1px solid ${theme.palette.inputBorder};\n                  background-color: ${isSchemeDark ? theme.palette.background3 : theme.palette.background1};\n                  position: relative;\n                  &:focus,\n                  &:hover {\n                      border: 1px solid ${theme.palette.inputFocused};\n                  }\n              `}\n`;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { SearchMenuChannelMessage } from '@common/utils/popup-window';\nimport { currentOFIdentity, WindowName } from '@common/utils/window';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectLayoutsWithSelectedViews } from '@enterprise/slices/tab-focus';\n\nimport { useInitChannelToSearchMenuView } from '@enterprise/hooks/EnterpriseSearchMenu/useInitChannelToSearchMenuView';\nimport { usePostMessageToSearchMenuView } from '@enterprise/hooks/EnterpriseSearchMenu/usePostMessageToSearchMenuView';\nimport useSearchMenuViewLifecycleManager from '@enterprise/hooks/EnterpriseSearchMenu/useSearchMenuViewLifecycleManager';\nimport { useUpdateViewExpansionState } from '@enterprise/hooks/EnterpriseSearchMenu/useUpdateViewExpansionState';\nimport useEnterpriseHotkeys from '@enterprise/hooks/useEnterpriseHotkeys';\n\nimport { AddressBarInput } from './AddressBarInput';\n\nexport const searchMenuIdentity = {\n    uuid: currentOFIdentity.uuid,\n    name: WindowName.BrowserAddressSearchPrefix + currentOFIdentity.name\n};\n\nexport type SecureIconState = { shouldShow: boolean; isSecureSite: boolean };\n\nexport type SearchMenuChannel = {\n    postMessage: (message: SearchMenuChannelMessage) => void;\n};\n\nconst AddressBar: React.FC = () => {\n    // Active Page and Views\n    const activePage = useSelector(selectActivePage);\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViews = layoutsWithSelectedViews[activePage.layoutContainerKey];\n\n    // Search view communication and state\n    const searchMenuChannel = useRef<SearchMenuChannel>({\n        postMessage: (message) => console.warn('Attempted to send message before search menu was ready:', message)\n    });\n    const [addressBarWidth, setAddressBarWidth] = useState<number>(null);\n\n    // Address bar content\n    const addressBarInputRef = useRef<HTMLInputElement>(null);\n    const inputContainerRef = useRef<HTMLDivElement>(null);\n    const [searchText, setSearchText] = useState<string>('');\n    const [isSecure, setIsSecure] = useState<SecureIconState>({ shouldShow: true, isSecureSite: true });\n\n    useEffect(() => {\n        (async () => {\n            const addressSearchResultsView = fin.View.wrapSync(searchMenuIdentity);\n            await addressSearchResultsView.setBounds({ top: 0, left: 0, width: 0, height: 0 });\n            await addressSearchResultsView.attach({ uuid: fin.me.uuid, name: fin.me.name });\n            await addressSearchResultsView.hide();\n        })();\n    }, [searchMenuIdentity]);\n\n    const { sendKeyboardEventToSearchMenuView } = usePostMessageToSearchMenuView(\n        selectedViews,\n        searchMenuChannel.current,\n        activePage,\n        searchText,\n        inputContainerRef\n    );\n\n    useEnterpriseHotkeys(selectedViews && selectedViews.length > 0 ? selectedViews[0] : undefined);\n\n    const { selectedViewUrl, resetAddressBarToSelectedViewUrl } = useSearchMenuViewLifecycleManager(\n        searchText,\n        selectedViews,\n        addressBarInputRef,\n        isSecure,\n        setSearchText,\n        setIsSecure\n    );\n\n    useInitChannelToSearchMenuView(\n        selectedViews,\n        selectedViewUrl,\n        searchMenuChannel.current,\n        setAddressBarWidth,\n        setSearchText,\n        resetAddressBarToSelectedViewUrl\n    );\n\n    useUpdateViewExpansionState(setAddressBarWidth, resetAddressBarToSelectedViewUrl);\n\n    return (\n        <AddressBarInput\n            addressSearchResultsViewIdentity={searchMenuIdentity}\n            addressBarInputRef={addressBarInputRef}\n            inputContainerRef={inputContainerRef}\n            addressBarWidth={addressBarWidth}\n            isSecure={isSecure}\n            setSearchText={setSearchText}\n            searchText={searchText}\n            sendKeyboardEventToSearchMenuView={sendKeyboardEventToSearchMenuView}\n            resetAddressBarToSelectedViewUrl={resetAddressBarToSelectedViewUrl}\n        />\n    );\n};\n\nexport default AddressBar;\n\nexport const AddressBarHotKey: React.FC = () => {\n    // Active Page and Views\n    const activePage = useSelector(selectActivePage);\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViews = layoutsWithSelectedViews[activePage.layoutContainerKey];\n\n    useEnterpriseHotkeys(selectedViews && selectedViews.length > 0 ? selectedViews[0] : undefined);\n\n    return <div />;\n};\n","import React, { useEffect, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport type OpenFin from '@openfin/core';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { enterpriseNavigationTestIds } from '@common/utils/test-ids';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport useFocusedView from '@enterprise/hooks/useFocusedView';\nimport useFocusedViewListeners from '@enterprise/hooks/useFocusedViewListeners';\nimport { ThemedSVG } from '@enterprise/styles/ThemedSVG';\n\nimport AddressBar, { AddressBarHotKey } from './AddressBar/AddressBar';\n\n/**\n * Top level container component for Browsers left hand navigation buttons.\n */\nconst EnterpriseNavigationContainer: React.FC = () => {\n    const windowFocused = useWindowFocusState();\n    const [isAddressBarEnabled, setIsAddressBarEnabled] = useState<boolean>(false);\n\n    useEffect(() => {\n        applyWindowFocusStyles(windowFocused);\n    }, [windowFocused]);\n\n    useEffect(() => {\n        (async () => {\n            const browserWindowOptions = await (fin.me as OpenFin.Window).getOptions();\n            setIsAddressBarEnabled(!!browserWindowOptions.workspacePlatform.isAddressBarEnabled);\n        })();\n    }, []);\n\n    return (\n        <Container data-testid=\"enterprise-nav\">\n            <NavContainer windowFocused={windowFocused}>\n                <NavBack />\n                <NavForward />\n                <NavReloadStop />\n            </NavContainer>\n            {isAddressBarEnabled && <AddressBar />}\n            {!isAddressBarEnabled && <AddressBarHotKey />}\n        </Container>\n    );\n};\n\nexport default EnterpriseNavigationContainer;\n\nconst Container = styled(Box)`\n    flex-direction: row;\n    padding: 0px;\n    row-gap: ${({ theme }) => theme.px.small};\n    padding: 0px ${({ theme }) => theme.px.small} 0px 0px;\n    gap: 0px;\n    align-items: center;\n    border-right: 1px solid ${({ theme }) => theme.palette.background5};\n    border-bottom: 1px solid ${({ theme }) => theme.palette.background5};\n`;\n\nconst NavContainer = styled(Box)<{ windowFocused: boolean }>`\n    position: relative;\n\n    padding: 0px;\n    padding: 0px ${({ theme }) => theme.px.base};\n    opacity: ${({ windowFocused }) => (windowFocused ? 1 : 0.6)};\n\n    flex-direction: row;\n    gap: 0px;\n    align-items: center;\n\n    -webkit-app-region: no-drag;\n    user-select: auto;\n`;\n\nexport type ViewInfo = {\n    view: OpenFin.View;\n    info: OpenFin.ViewInfo;\n};\n\nexport const getViewWithInfo = async (identity: OpenFin.Identity): Promise<ViewInfo> => {\n    const view = fin.View.wrapSync(identity);\n    const info = await view.getInfo();\n    return { view, info };\n};\n\nfunction applyWindowFocusStyles(focus: boolean): void {\n    const selectedTabs = document.querySelectorAll('.lm_tab');\n    const newTabButtons = document.querySelectorAll('.newTabButton');\n    selectedTabs?.forEach((tab) =>\n        focus ? tab.classList.remove('inactiveWindow') : tab.classList.add('inactiveWindow')\n    );\n    newTabButtons?.forEach((tab) =>\n        focus ? tab.classList.remove('inactiveWindow') : tab.classList.add('inactiveWindow')\n    );\n}\n\nconst NavigateButton = styled(BaseButton).attrs({ customContentSize: true })<{ disabled?: boolean }>`\n    opacity: ${({ disabled }) => (disabled ? '0.5' : '1')};\n    padding: ${({ theme }) => theme.px.xsmall};\n    width: ${({ theme }) => theme.px.xxlarge};\n    height: ${({ theme }) => theme.px.xxlarge};\n\n    &:hover {\n        border-radius: 4px;\n    }\n`;\n\nconst NavigateBackIcon = () => {\n    return (\n        <ThemedSVG width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M13.4939 7.27729C13.7457 7.51337 13.7584 7.90889 13.5224 8.16071L9.92311 11.9999L13.5224 15.8391C13.7584 16.0909 13.7457 16.4865 13.4939 16.7225C13.242 16.9586 12.8465 16.9459 12.6104 16.694L8.61045 12.4274C8.38506 12.187 8.38506 11.8129 8.61045 11.5725L12.6104 7.30578C12.8465 7.05396 13.242 7.04121 13.4939 7.27729Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n\nconst NavBack = (): JSX.Element => {\n    const [canGoBack, setCanGoBack] = useState<boolean>(false);\n    const focusedView = useFocusedView();\n\n    const goback = async () => {\n        if (focusedView) {\n            focusedView.view.navigateBack();\n        }\n    };\n\n    useEffect(() => {\n        const checkNav = async () => {\n            if (focusedView) {\n                setCanGoBack(focusedView.info.canNavigateBack);\n            } else {\n                setCanGoBack(false);\n            }\n        };\n        checkNav();\n    }, [focusedView]);\n\n    return (\n        <NavigateButton\n            title=\"Click to go back\"\n            onClick={goback}\n            data-testid={enterpriseNavigationTestIds.backButton}\n            disabled={!canGoBack}\n        >\n            <NavigateBackIcon />\n        </NavigateButton>\n    );\n};\n\nconst NavigateForwardIcon = () => {\n    return (\n        <ThemedSVG width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M10.5061 7.27718C10.758 7.0411 11.1535 7.05386 11.3896 7.30568L15.3896 11.5723C15.6149 11.8128 15.6149 12.1869 15.3896 12.4273L11.3896 16.6939C11.1535 16.9458 10.758 16.9585 10.5061 16.7224C10.2543 16.4864 10.2416 16.0908 10.4776 15.839L14.0769 11.9998L10.4776 8.16061C10.2416 7.90879 10.2543 7.51326 10.5061 7.27718Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n\nconst NavForward = (): JSX.Element => {\n    const [canGoForward, setCanGoForward] = useState<boolean>(false);\n    const focusedView = useFocusedView();\n\n    const goforward = async () => {\n        if (focusedView) {\n            focusedView.view.navigateForward();\n        }\n    };\n\n    useEffect(() => {\n        const checkNav = async () => {\n            if (focusedView) {\n                setCanGoForward(focusedView.info.canNavigateForward);\n            } else {\n                setCanGoForward(false);\n            }\n        };\n        checkNav();\n    }, [focusedView]);\n\n    return (\n        <NavigateButton\n            title=\"Click to go forward\"\n            onClick={goforward}\n            data-testid={enterpriseNavigationTestIds.forwardButton}\n            disabled={!canGoForward}\n        >\n            <NavigateForwardIcon />\n        </NavigateButton>\n    );\n};\n\nconst NavReloadStop: React.FC = () => {\n    const focusedView = useFocusedView();\n    const { isContentLoading, setIsContentLoading } = useFocusedViewListeners(focusedView);\n\n    const reload = async () => {\n        if (focusedView) {\n            setIsContentLoading(true);\n            focusedView.view.reload();\n        }\n    };\n\n    const stop = async () => {\n        if (focusedView) {\n            focusedView.view.stopNavigation();\n            setIsContentLoading(false);\n        }\n    };\n\n    return isContentLoading ? (\n        <NavigateButton\n            title=\"Stop loading this tab\"\n            onClick={stop}\n            data-testid={enterpriseNavigationTestIds.stopButton}\n        >\n            <NavigateStopIcon />\n        </NavigateButton>\n    ) : (\n        <NavigateButton title=\"Reload this tab\" onClick={reload} data-testid={enterpriseNavigationTestIds.reloadButton}>\n            <NavigateReloadIcon />\n        </NavigateButton>\n    );\n};\n\nconst NavigateReloadIcon = () => {\n    return (\n        <ThemedSVG width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M7.28906 12C7.28906 9.52256 9.21924 7.07111 12.218 7.07111C13.2468 7.07111 14.089 7.5329 14.7981 8.16308C15.3013 8.6103 15.7088 9.11422 16.0563 9.56889H14.7147C14.3695 9.56889 14.0897 9.84871 14.0897 10.1939C14.0897 10.5391 14.3695 10.8189 14.7147 10.8189H17.4239C17.7691 10.8189 18.0489 10.5391 18.0489 10.1939V7.48466C18.0489 7.13949 17.7691 6.85966 17.4239 6.85966C17.0788 6.85966 16.7989 7.13949 16.7989 7.48466V8.48788C16.4748 8.08222 16.0837 7.6333 15.6285 7.22873C14.7818 6.47635 13.6563 5.82111 12.218 5.82111C8.44094 5.82111 6.03906 8.92356 6.03906 12C6.03906 15.0765 8.44094 18.1789 12.218 18.1789C14.0218 18.1789 15.5274 17.4643 16.5993 16.3736C17.1726 15.7903 17.62 15.1015 17.9249 14.3605C18.0563 14.0413 17.904 13.6761 17.5848 13.5447C17.2656 13.4133 16.9004 13.5656 16.769 13.8848C16.5237 14.4809 16.1646 15.0327 15.7078 15.4975C14.8614 16.3586 13.6733 16.9289 12.218 16.9289C9.21924 16.9289 7.28906 14.4775 7.28906 12Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n\nconst NavigateStopIcon = () => {\n    return (\n        <ThemedSVG width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g opacity=\"0.9\">\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M16.5758 8.30864C16.8199 8.06456 16.8199 7.66884 16.5758 7.42476C16.3317 7.18068 15.936 7.18068 15.6919 7.42476L12.0005 11.1161L8.30913 7.42476C8.06505 7.18068 7.66932 7.18068 7.42525 7.42476C7.18117 7.66884 7.18117 8.06456 7.42525 8.30864L11.1166 12L7.42525 15.6914C7.18117 15.9355 7.18117 16.3312 7.42525 16.5753C7.66932 16.8194 8.06505 16.8194 8.30913 16.5753L12.0005 12.8839L15.6919 16.5753C15.936 16.8194 16.3317 16.8194 16.5758 16.5753C16.8199 16.3312 16.8199 15.9355 16.5758 15.6914L12.8844 12L16.5758 8.30864Z\"\n                    fill=\"white\"\n                />\n            </g>\n        </ThemedSVG>\n    );\n};\n","import styled from 'styled-components';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nexport const IconButtonContainer = styled(BaseButton).attrs({ customContentSize: true, isEnterprise: true })<{\n    windowFocused: boolean;\n}>`\n    -webkit-app-region: no-drag;\n    user-select: auto;\n\n    padding: ${({ theme }) => theme.px.xsmall};\n    width: ${({ theme }) => theme.px.xxlarge};\n    height: ${({ theme }) => theme.px.xxlarge};\n\n    opacity: ${({ windowFocused }) => !windowFocused && '0.5'};\n\n    svg path {\n        fill: ${({ theme }) => theme.palette.textDefault};\n    }\n`;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { enterpriseToolbarTestIds } from '@common/utils/test-ids';\n\nimport AICompanionIcon from '@enterprise/assets/icons/ai-companion.svg';\n\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { SidePanelComponent, useSidePanelContext } from '@enterprise/context/SidePanelContext';\nimport { IconButtonContainer } from '@enterprise/styles/buttons';\n\nconst AICompanionShortcutButton = () => {\n    const { t } = useTranslation();\n    const windowFocused = useWindowFocusState();\n    const { isSidePanelOpen, activeComponent, toggleSidePanelComponent } = useSidePanelContext();\n\n    return (\n        <IconButtonContainer\n            title={t('sidePanel.openAiCenter')}\n            windowFocused={windowFocused}\n            onClick={() => toggleSidePanelComponent(SidePanelComponent.AICompanion)}\n            selected={isSidePanelOpen && activeComponent === SidePanelComponent.AICompanion}\n            data-testid={enterpriseToolbarTestIds.aiCompanionButton}\n        >\n            <AICompanionIcon />\n        </IconButtonContainer>\n    );\n};\n\nexport default AICompanionShortcutButton;\n","import React from 'react';\n\nimport { Icon } from '@openfin/ui-library';\n\nimport { enterpriseToolbarTestIds } from '@common/utils/test-ids';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { SidePanelComponent, useSidePanelContext } from '@enterprise/context/SidePanelContext';\nimport { IconButtonContainer } from '@enterprise/styles/buttons';\n\nconst BookmarksPanelButton: React.FC = () => {\n    const windowFocused = useWindowFocusState();\n    const { t } = useTranslation();\n    const { isSidePanelOpen, activeComponent, toggleSidePanelComponent } = useSidePanelContext();\n\n    return (\n        <IconButtonContainer\n            title={t('bookmarks.bookmarksPanel')}\n            onClick={() => toggleSidePanelComponent(SidePanelComponent.Bookmarks)}\n            windowFocused={windowFocused}\n            selected={isSidePanelOpen && activeComponent === SidePanelComponent.Bookmarks}\n            data-testid={enterpriseToolbarTestIds.bookmarksPanelButton}\n        >\n            <Icon icon=\"BookmarkFilled\" />\n        </IconButtonContainer>\n    );\n};\n\nexport default BookmarksPanelButton;\n","import React, { MutableRefObject, useRef, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport type OpenFin from '@openfin/core';\n\nimport { enterpriseToolbarTestIds } from '@common/utils/test-ids';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport BrandIcon from '@enterprise/components/LandingPage/BrandIcon';\n\nimport { getCurrentSync, InternalOpenGlobalContextMenuRequest } from '@client-platform/index';\nimport useWindowFocusState, { useWithWindowStyleOverride } from '@common/hooks/useWindowFocusState';\nimport { NoDragWrapper } from '@common/styles/helpers';\nimport store from '@enterprise/store';\n\nconst EnterpriseGlobalMenu = () => {\n    const windowFocused = useWindowFocusState();\n    const { t } = useTranslation();\n    const enterpriseMenuButtonRef = useRef<HTMLButtonElement>() as MutableRefObject<HTMLButtonElement>;\n    const [isGlobalMenuActive, setIsGlobalMenuActive] = useState<boolean>(false);\n\n    const withWindowStyleOverride = useWithWindowStyleOverride();\n    const onMenuClick = async (event: React.MouseEvent) => {\n        const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n        const activePageId = selectActivePage(store.getState()).pageId;\n        withWindowStyleOverride('focused', async () => {\n            setIsGlobalMenuActive(true);\n            // eslint-disable-next-line no-underscore-dangle\n            await browser._openGlobalContextMenu({\n                x: event.clientX,\n                y: event.clientY,\n                selectedViews: selectSelectedViewsForPage(store.getState(), activePageId),\n                rect: enterpriseMenuButtonRef.current.getBoundingClientRect()\n            } as InternalOpenGlobalContextMenuRequest & { contextGroups: OpenFin.ContextGroupInfo[] });\n            setIsGlobalMenuActive(false);\n        });\n    };\n\n    return (\n        <MenuButtonContainer windowFocused={windowFocused}>\n            <EnterpriseMenuButton\n                ref={enterpriseMenuButtonRef}\n                onClick={onMenuClick}\n                title={t('aria.openBrowser')}\n                selected={isGlobalMenuActive}\n                aria-expanded={isGlobalMenuActive}\n                data-testid={enterpriseToolbarTestIds.globalMenuButton}\n            >\n                <BrandIcon size=\"small\" />\n            </EnterpriseMenuButton>\n        </MenuButtonContainer>\n    );\n};\n\nconst MenuButtonContainer = styled(NoDragWrapper)<{ windowFocused: boolean }>`\n    display: flex;\n    align-items: center;\n    button {\n        opacity: ${({ windowFocused }) => !windowFocused && '0.5'};\n    }\n`;\n\nconst EnterpriseMenuButton = styled(BaseButton).attrs({ isEnterprise: true, customContentSize: true })`\n    padding: 4px;\n    width: 24px;\n    height: 24px;\n    margin-right: ${({ theme }) => theme.px.small};\n\n    // Use a responsive width for BaseButton's container\n    > div {\n        width: 100%;\n    }\n`;\nexport default EnterpriseGlobalMenu;\n","import { useEffect } from 'react';\n\nimport type OpenFin from '@openfin/core';\n\nexport const usePlatformOptionsChange = (\n    setPlatformOptions: (options: OpenFin.WorkspacePlatformOptions) => void,\n    onPlatformOptionsChange: (newValue: OpenFin.WorkspacePlatformOptions) => void\n) => {\n    useEffect(() => {\n        const win = fin.Window.getCurrentSync();\n        win.getOptions().then(({ workspacePlatform }) => {\n            return setPlatformOptions(workspacePlatform);\n        });\n\n        const onWindowOptionChange = (payload: OpenFin.WindowEvents.WindowOptionsChangedEvent) => {\n            const workspacePlatformChange = payload.diff?.workspacePlatform;\n            if (workspacePlatformChange) {\n                onPlatformOptionsChange(workspacePlatformChange?.newVal);\n            }\n        };\n        // Performance:  This causes UI to be rendered based on every change to workspacePlatform options\n        // We save pages in this object so any change to a window's page data will cause it to render\n        // If it becomes an issue we can check properties OR choose to only update when the updateButton API is called\n        win.on('options-changed', onWindowOptionChange);\n        return () => {\n            win.removeListener('options-changed', onWindowOptionChange);\n        };\n    }, [setPlatformOptions, onPlatformOptionsChange]);\n};\n","import styled from 'styled-components';\n\nimport BaseButton from '../BaseButton/BaseButton';\n\nconst MacWindowStateButton = styled(BaseButton)`\n    &:active svg {\n        filter: saturate(1.2) contrast(1.3);\n    }\n`;\n\nexport default MacWindowStateButton;\n","import { currentOFIdentity, maxOrRestore } from '@common/utils/window';\n\nimport { StyledIcon } from '@common/styles/svg-icons';\n\nimport BaseButton from '../BaseButton/BaseButton';\nimport { CustomIcon } from '../Icon/CustomIcon';\n\nexport const toggleMaximize = () => {\n    maxOrRestore(currentOFIdentity).catch((err) => {\n        console.error(`failed to maximize or restore: ${err}`);\n    });\n};\n\nexport type MaximizeButtonProps = {\n    disabled?: boolean;\n    tooltip: string;\n    iconUrl?: string;\n    analyticsCallback?: (action: string, windowName?: string) => void;\n};\n\nexport const MaximizeButton = ({ disabled = false, iconUrl, tooltip, analyticsCallback }: MaximizeButtonProps) => {\n    const onClick = analyticsCallback\n        ? () => {\n              analyticsCallback(tooltip, currentOFIdentity.name);\n              toggleMaximize();\n          }\n        : toggleMaximize;\n\n    return (\n        <BaseButton title={tooltip} onClick={onClick} disabled={disabled}>\n            {iconUrl ? (\n                <CustomIcon iconURL={iconUrl} size=\"small\" />\n            ) : (\n                <StyledIcon disabled={disabled} icon=\"SizeIcon\" size=\"small\" />\n            )}\n        </BaseButton>\n    );\n};\n","import React, { PropsWithChildren, useCallback } from 'react';\n\nimport type OpenFin from '@openfin/core';\n\nimport { BaseCustomButtonStyleProps } from '@common/utils/base-button-props';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { getCurrentSync, wrapSync } from '@client-platform/api';\nimport { CustomActionCallerType, CustomButtonActionPayload } from '@client-platform/shapes';\n\nimport { CustomButtonConfig } from '../../api/action';\n\nimport BaseCustomButton from './BaseCustomButton';\n\ninterface Props extends CustomButtonConfig {\n    customTarget?: OpenFin.Identity;\n    analyticsCallback?: (action: CustomButtonConfig['action']) => any;\n    dragging?: boolean;\n    onContextMenu?: (event: React.MouseEvent) => void;\n}\n\n/**\n * A button that dispatches custom actions to the platform\n */\nexport const CustomButton: React.FC<\n    PropsWithChildren<Props & BaseCustomButtonStyleProps & Exclude<Parameters<typeof BaseCustomButton>[0], 'childern'>>\n> = ({ action, customTarget, children, analyticsCallback, dragging, ...props }) => {\n    const callback = useCallback(\n        async (event: React.MouseEvent) => {\n            if (dragging) {\n                return;\n            }\n            const payload: CustomButtonActionPayload = {\n                windowIdentity: currentOFIdentity,\n                x: event.clientX,\n                y: event.clientY,\n                customData: action.customData,\n                callerType: CustomActionCallerType.CustomButton\n            };\n\n            if (analyticsCallback) {\n                analyticsCallback(action);\n            }\n\n            const target = customTarget ? wrapSync(customTarget) : getCurrentSync();\n            // eslint-disable-next-line no-underscore-dangle\n            return target._invokeCustomAction(action.id, payload);\n        },\n        [action, customTarget, analyticsCallback, dragging]\n    );\n\n    return (\n        <BaseCustomButton {...props} onClick={callback}>\n            {children}\n        </BaseCustomButton>\n    );\n};\n","import { useEffect, useState } from 'react';\n\nexport type WindowState = 'maximized' | 'minimized' | 'normal';\n\nexport const useWindowState = (): WindowState => {\n    const [windowState, setWindowState] = useState<WindowState>('normal');\n\n    useEffect(() => {\n        if (!fin) return;\n\n        const currentWindow = fin.Window.getCurrentSync();\n\n        const handleWindowStateChanged = async () => {\n            const newState = await currentWindow.getState();\n            setWindowState(newState);\n        };\n\n        currentWindow.on('maximized', handleWindowStateChanged);\n        currentWindow.on('minimized', handleWindowStateChanged);\n        currentWindow.on('restored', handleWindowStateChanged);\n\n        handleWindowStateChanged();\n\n        return () => {\n            currentWindow.removeListener('maximized', handleWindowStateChanged);\n            currentWindow.removeListener('minimized', handleWindowStateChanged);\n            currentWindow.removeListener('restored', handleWindowStateChanged);\n        };\n    }, []);\n\n    return windowState;\n};\n","import { useSelector } from 'react-redux';\n\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\nimport MacWindowStateButton from '@common/components/ControlButtons/MacWindowStateButton';\nimport { MaximizeButtonProps, toggleMaximize } from '@common/components/ControlButtons/MaximizeButton';\nimport { CustomIcon } from '@common/components/Icon/CustomIcon';\n\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { useWindowState } from '@common/hooks/useWindowState';\nimport { StyledIcon } from '@common/styles/svg-icons';\nimport { ThemedSVG } from '@enterprise/styles/ThemedSVG';\n\nexport const EnterpriseMaximizeButton = ({\n    disabled = false,\n    iconUrl,\n    tooltip,\n    parentHover,\n    analyticsCallback\n}: MaximizeButtonProps & {\n    parentHover?: boolean;\n}) => {\n    const windowState = useWindowState();\n    const windowFocused = useWindowFocusState();\n    const isWindows = useSelector(selectIsWindows);\n    const windowStateToolip = windowState === 'maximized' ? 'Restore Window' : 'Maximize Window';\n    const icon = windowState === 'maximized' ? 'CopyIcon' : 'SquareIcon';\n    const buttonTitle = tooltip ?? (disabled ? 'Disabled' : windowStateToolip);\n\n    const onClick = analyticsCallback\n        ? () => {\n              analyticsCallback(tooltip, currentOFIdentity.name);\n              toggleMaximize();\n          }\n        : toggleMaximize;\n\n    if (isWindows) {\n        return (\n            <BaseButton title={buttonTitle} onClick={onClick} disabled={disabled} width={24} height={24}>\n                {iconUrl && <CustomIcon iconURL={iconUrl} size=\"small\" />}\n                {!iconUrl && windowState === 'maximized' ? (\n                    <StyledIcon disabled={disabled} isEnterprise={true} windowFocused={windowFocused}>\n                        <RestoreIcon />\n                    </StyledIcon>\n                ) : (\n                    <StyledIcon\n                        disabled={disabled}\n                        isEnterprise={true}\n                        windowFocused={windowFocused}\n                        icon={icon}\n                        size=\"small\"\n                    />\n                )}\n            </BaseButton>\n        );\n    } else {\n        return (\n            <MacWindowStateButton\n                title={buttonTitle}\n                onClick={onClick}\n                disabled={disabled}\n                width={12}\n                height={12}\n                hoverless\n            >\n                {windowFocused ? parentHover ? <MacExpandIconHover /> : <MacExpandIcon /> : <MacInactiveIcon />}\n            </MacWindowStateButton>\n        );\n    }\n};\n\nconst MacExpandIconHover = () => {\n    return (\n        <svg width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"6.38364\" cy=\"6.01047\" r=\"5.98953\" fill=\"#62C554\" />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M3.6769 2.79613C3.39623 2.79533 3.1685 3.02306 3.1693 3.30373L3.18099 7.40988C3.1812 7.48492 3.27193 7.52235 3.325 7.46929L7.84246 2.95183C7.89552 2.89876 7.85809 2.80803 7.78305 2.80782L3.6769 2.79613ZM9.10118 9.2356C9.38185 9.23639 9.60958 9.00867 9.60878 8.728L9.59709 4.62185C9.59688 4.54681 9.50614 4.50937 9.45308 4.56243L4.93562 9.0799C4.88255 9.13296 4.91999 9.2237 4.99503 9.22391L9.10118 9.2356Z\"\n                fill=\"#296018\"\n            />\n        </svg>\n    );\n};\n\nconst MacExpandIcon = () => {\n    return (\n        <svg width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"6.38364\" cy=\"6.01047\" r=\"5.98953\" fill=\"#62C554\" />\n        </svg>\n    );\n};\n\nconst MacInactiveIcon = () => {\n    return (\n        <ThemedSVG width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12Z\"\n                fill=\"white\"\n                fillOpacity=\"0.1\"\n            />\n        </ThemedSVG>\n    );\n};\n\nconst RestoreIcon = () => {\n    return (\n        <ThemedSVG width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                d=\"M8.84211 4C7.94442 4 7.16649 4.51453 6.78207 5.26316H17.6842C18.2648 5.26316 18.7368 5.73516 18.7368 6.31579V17.2179C19.4855 16.8339 20 16.0556 20 15.1579V6.31579C20 5.03916 18.9608 4 17.6842 4H8.84211ZM6.31579 6.52632C5.04431 6.52632 4 7.57062 4 8.84211V17.6842C4 18.9557 5.04431 20 6.31579 20H15.1579C16.4294 20 17.4737 18.9557 17.4737 17.6842V8.84211C17.4737 7.57062 16.4294 6.52632 15.1579 6.52632H6.31579ZM6.31579 7.78947H15.1579C15.7466 7.78947 16.2105 8.25338 16.2105 8.84211V17.6842C16.2105 18.2729 15.7466 18.7368 15.1579 18.7368H6.31579C5.72706 18.7368 5.26316 18.2729 5.26316 17.6842V8.84211C5.26316 8.25338 5.72706 7.78947 6.31579 7.78947Z\"\n                fill=\"white\"\n            />\n        </ThemedSVG>\n    );\n};\n","import React, { FC, useCallback, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { Menu } from '@common/utils/menu';\nimport { RightMenuConfig } from '@common/utils/menu-config';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { BrowserButtonType } from '@client-platform/shapes';\nimport { useLanguageChange } from '@common/hooks/useLanguageChange';\n\nimport MenuButton from '../../../../MenuButton/MenuButton';\nimport { defaultButtonPropMap } from '../../../utils';\nimport { getLayoutsMenu } from '../../menus/menuConfig';\nimport { PredefinedIconUrl } from '../MenuButtonIcon';\n\ninterface Props {\n    tooltip?: string;\n    iconUrl?: string;\n}\n\nconst LayoutsMenuButton: FC<Props> = ({ tooltip, iconUrl }) => {\n    const [menuConfig, setMenuConfig] = useState<RightMenuConfig | null>(null);\n    const customToolTip = tooltip || menuConfig?.title;\n    const defaultIcon = defaultButtonPropMap[BrowserButtonType.PresetLayouts].iconProps.icon;\n    const activePage = useSelector(selectActivePage);\n    const disabled = !!activePage?.isLocked;\n    const { t } = useTranslation();\n\n    const onLanguageChange = useCallback(() => {\n        const title = t('toolbar.changeLayout');\n        getLayoutsMenu(title).then((menu) => setMenuConfig(menu));\n    }, []);\n\n    useLanguageChange(onLanguageChange);\n\n    if (!menuConfig) {\n        return null;\n    }\n\n    return (\n        <MenuButton type={Menu.LAYOUT} config={menuConfig} params={null} tooltip={customToolTip} disabled={disabled}>\n            <PredefinedIconUrl customIconUrl={iconUrl} uiLibIcon={defaultIcon} disabled={disabled} />\n        </MenuButton>\n    );\n};\n\nexport default LayoutsMenuButton;\n","import { FC, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { showSuccess } from '@common/utils/indicators/showIndicator';\nimport { getUnlockedLayout } from '@common/utils/layout';\nimport { browserLockButtonLockedState, browserLockButtonUnLockedState } from '@common/utils/test-ids';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nimport { selectActivePageWithIndex, updatePageAtIndex } from '@enterprise/slices/pages/attached';\n\nimport { replaceLayout } from '@enterprise/utils/layout';\n\nimport { PredefinedIconUrl } from '@enterprise/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/MenuButtonIcon';\n\nconst LockUnlockButton: FC<{\n    lockedIconUrl: string;\n    unlockedIconUrl: string;\n}> = ({ lockedIconUrl, unlockedIconUrl }) => {\n    const dispatch = useDispatch();\n    const [activePage, activePageIndex] = useSelector(selectActivePageWithIndex);\n    const windowName = activePage.parentIdentity;\n    const buttonRef = useRef<HTMLButtonElement>(null);\n    const { t } = useTranslation();\n\n    const handleClick = async () => {\n        const layout = fin.Platform.Layout.getCurrentSync();\n        const layoutConfig = await layout.getConfig();\n        // We always want to store the unlocked layout of the page in memory, this helps to make locking reversible\n        const unlockedLayout = activePage.isLocked ? getUnlockedLayout(layoutConfig, activePage.layout) : layoutConfig;\n\n        const updatedPage = {\n            ...activePage,\n            isLocked: !activePage.isLocked,\n            layout: unlockedLayout\n        };\n        dispatch(\n            updatePageAtIndex({\n                index: activePageIndex,\n                page: updatedPage\n            })\n        );\n        await replaceLayout(unlockedLayout, updatedPage);\n        await fin.me.focus();\n        buttonRef.current?.focus();\n\n        showSuccess({\n            message: t(activePage.isLocked ? 'successIndicator.unlocked' : 'successIndicator.locked'),\n            parentBrowserName: windowName.name\n        });\n    };\n\n    return (\n        <BaseButton\n            ref={buttonRef}\n            title={t(activePage.isLocked ? 'toolbar.unlock' : 'toolbar.lock')}\n            onClick={handleClick}\n        >\n            {activePage.isLocked ? (\n                <PredefinedIconUrl\n                    customIconUrl={lockedIconUrl}\n                    uiLibIcon=\"LockClosedIcon\"\n                    data-testid={browserLockButtonLockedState}\n                />\n            ) : (\n                <PredefinedIconUrl\n                    customIconUrl={unlockedIconUrl}\n                    uiLibIcon=\"LockOpen1Icon\"\n                    data-testid={browserLockButtonUnLockedState}\n                />\n            )}\n        </BaseButton>\n    );\n};\n\nexport default LockUnlockButton;\n","import { FC, memo, useCallback, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { RightMenuConfig } from '@common/utils/menu-config';\nimport { enterpriseToolbarTestIds } from '@common/utils/test-ids';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport ExtendedButton from '@enterprise/components/ControlBar/BaseButton/ExtendedButton';\n\nimport * as WP from '@client-platform/index';\nimport { BrowserButtonType } from '@client-platform/shapes';\nimport { useLanguageChange } from '@common/hooks/useLanguageChange';\n\nimport { defaultButtonPropMap } from '../../../utils';\nimport { getSaveMenu } from '../../menus/menuConfig';\nimport { PredefinedIconUrl } from '../MenuButtonIcon';\n\ninterface Props {\n    tooltip?: string;\n    iconUrl?: string;\n}\n\nconst ContextMenuWidth = 150;\n\nconst SaveButton: FC<Props> = ({ tooltip, iconUrl }) => {\n    const [menuConfig, setMenuConfig] = useState<RightMenuConfig | null>(null);\n    const customToolTip = tooltip || menuConfig?.title;\n    const defaultIcon = defaultButtonPropMap[BrowserButtonType.SaveMenu].iconProps.icon;\n\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const [isActive, setIsActive] = useState(false);\n\n    const activePage = useSelector(selectActivePage);\n\n    const onLanguageChange = useCallback(() => {\n        getSaveMenu().then((menu) => setMenuConfig(menu));\n    }, []);\n\n    useLanguageChange(onLanguageChange);\n\n    const onClickHandler = async () => {\n        if (!buttonRef.current) {\n            throw new Error('Unable to open Save Menu (SaveButton): buttonRef.current is null');\n        }\n\n        setIsActive(true);\n\n        const currOFWindow = fin.Window.getCurrentSync();\n\n        const { bottom: buttonBottom, left: buttonLeft } = buttonRef.current.getBoundingClientRect();\n\n        // eslint-disable-next-line no-underscore-dangle\n        await WP.getCurrentSync()\n            .Browser.wrapSync(currOFWindow.identity)\n            ._openSaveButtonContextMenu({\n                x: buttonLeft + buttonRef.current.offsetWidth / 2 - ContextMenuWidth / 2,\n                y: buttonBottom,\n                buttonLeft,\n                buttonWidth: buttonRef.current.offsetWidth,\n                pageId: activePage.pageId\n            });\n        setIsActive(false);\n    };\n\n    return (\n        <ExtendedButton\n            title={customToolTip}\n            active={isActive}\n            onClick={onClickHandler}\n            ref={buttonRef}\n            data-testid={enterpriseToolbarTestIds.saveButton}\n        >\n            <PredefinedIconUrl customIconUrl={iconUrl} uiLibIcon={defaultIcon} />\n        </ExtendedButton>\n    );\n};\n\nexport default memo(SaveButton);\n","import React, { FC, useCallback, useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { Icon } from '@openfin/ui-library';\n\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { useTranslation } from '@common/api/i18next';\nimport { getTabsHandler } from '@common/api/tabs';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { PredefinedIconUrl } from '@enterprise/components/ControlBar/RightControlsContainer/ToolbarContainer/buttons/MenuButtonIcon';\nimport { handleShowHideTabs } from '@enterprise/components/ControlBar/RightControlsContainer/utils';\n\nimport { ShowHideTabsConfig } from '@client-platform/index';\n\nconst ShowHideTabsButton: FC<ShowHideTabsConfig> = ({ tabsHiddenIconUrl, tabsShownIconUrl }) => {\n    const [isShowingTabs, setIsShowingTabs] = useState(true);\n    const activePage = useSelector(selectActivePage);\n    const pageIsLocked = !!activePage.isLocked;\n    const buttonRef = useRef<HTMLButtonElement>(null);\n    const { t } = useTranslation();\n\n    useEffect(() => {\n        const win = fin.Window.getCurrentSync();\n        const updateIsShowingTabs = async () => {\n            const tabHandler = getTabsHandler({ ...currentOFIdentity, layoutName: activePage.layoutContainerKey });\n            const isShowing = await tabHandler.isShowingTabs();\n            setIsShowingTabs(isShowing);\n        };\n        win.addListener('layout-ready', updateIsShowingTabs);\n        return () => {\n            win.removeListener('layout-ready', updateIsShowingTabs);\n        };\n    }, [activePage]);\n\n    const tabTitle = t(isShowingTabs ? 'toolbar.hideTabs' : 'toolbar.showTabs');\n\n    const getDisabledShowHideButton = () =>\n        isShowingTabs ? (\n            <PredefinedIconUrl\n                customIconUrl={tabsShownIconUrl?.disabled}\n                disabled={true}\n                uiLibIcon=\"LightBulbOutlinedIcon\"\n                size=\"small\"\n            />\n        ) : (\n            <PredefinedIconUrl\n                customIconUrl={tabsHiddenIconUrl?.disabled}\n                disabled={true}\n                uiLibIcon=\"LightBulbFilledIcon\"\n                size=\"small\"\n            />\n        );\n\n    const getEnabledShowHideButton = () =>\n        isShowingTabs ? (\n            <PredefinedIconUrl\n                customIconUrl={tabsShownIconUrl?.enabled}\n                uiLibIcon=\"LightBulbOutlinedIcon\"\n                size=\"small\"\n            />\n        ) : tabsShownIconUrl?.enabled ? (\n            <PredefinedIconUrl\n                customIconUrl={tabsHiddenIconUrl?.enabled}\n                uiLibIcon=\"LightBulbFilledIcon\"\n                size=\"small\"\n            />\n        ) : (\n            <LightBulbFilledIcon />\n        );\n\n    const onClickShowHideButton = useCallback(async () => {\n        await handleShowHideTabs({ ...currentOFIdentity, layoutName: activePage.layoutContainerKey });\n        buttonRef.current?.focus();\n    }, [activePage]);\n\n    return (\n        <BaseButton ref={buttonRef} title={tabTitle} disabled={pageIsLocked} onClick={onClickShowHideButton}>\n            {pageIsLocked ? getDisabledShowHideButton() : getEnabledShowHideButton()}\n        </BaseButton>\n    );\n};\n\nconst LightBulbFilledIcon = styled(Icon).attrs({ icon: 'LightBulbFilledIcon', size: 'small' })`\n    svg path {\n        color: ${({ theme }) => theme.palette.statusActive};\n    }\n`;\n\nexport default ShowHideTabsButton;\n","import React, { FC, useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { useTranslation } from '@common/api/i18next';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport BaseButton from '@common/components/BaseButton/BaseButton';\nimport MacWindowStateButton from '@common/components/ControlButtons/MacWindowStateButton';\nimport { MaximizeButton } from '@common/components/ControlButtons/MaximizeButton';\nimport { CustomButton } from '@common/components/CustomButton/CustomButton';\n\nimport { requestCloseBrowserWindow } from '@enterprise/api/controls';\n\nimport { EnterpriseMaximizeButton } from '@enterprise/components/ControlBar/RightControlsContainer/RightControlsButton/EnterpriseMaximizeButton';\n\nimport { BrowserButtonType, PreDefinedButtonConfig, ToolbarButton } from '@client-platform/shapes';\nimport { useLanguageChange } from '@common/hooks/useLanguageChange';\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { WindowState } from '@common/hooks/useWindowState';\nimport { NoDragWrapper } from '@common/styles/helpers';\nimport { StyledIcon } from '@common/styles/svg-icons';\nimport { ThemedSVG } from '@enterprise/styles/ThemedSVG';\n\nimport ColorLinkingButton from '../ToolbarContainer/buttons/ColorLinkingButton/ColorLinkingButton';\nimport LayoutsMenuButton from '../ToolbarContainer/buttons/LayoutsMenuButton/LayoutsMenuButton';\nimport LockUnlockButton from '../ToolbarContainer/buttons/LockUnlockPageButton/LockUnlockPageButton';\nimport { PredefinedIconUrl as CustomIcon } from '../ToolbarContainer/buttons/MenuButtonIcon';\nimport SaveMenuButton from '../ToolbarContainer/buttons/SaveButton/SaveButton';\nimport ShowHideTabsButton from '../ToolbarContainer/buttons/ShowHideTabsButton/ShowHideTabsButton';\nimport { defaultButtonPropMap, handleMinimizeClick } from '../utils';\n\nconst disabledNoop = () => {\n    // noop on purpose\n};\n\ninterface windowButtonAnalyticsType {\n    analyticsCallback?: (action: string, windowName: string) => void;\n}\n\n// eslint-disable-next-line react/display-name\nconst getWindowStateOrDisabledButton =\n    (\n        type: Exclude<BrowserButtonType, 'Custom' | 'Maximise'>,\n        isWindows = true\n    ): React.FC<PreDefinedButtonConfig & windowButtonAnalyticsType> =>\n    // eslint-disable-next-line react/display-name\n    (prop: PreDefinedButtonConfig & windowButtonAnalyticsType) => {\n        if (!defaultButtonPropMap[type]) return undefined;\n        const dispatch = useDispatch();\n        const windowFocused = useWindowFocusState();\n        const { disabled } = prop;\n        const { t } = useTranslation();\n        const isEnterprise = true;\n\n        const handleCloseClick = useCallback(() => {\n            requestCloseBrowserWindow();\n        }, [dispatch]);\n\n        const [defaultCallbackMap] = useState<{\n            [key in BrowserButtonType]?: (arg0: any) => void;\n        }>({\n            [BrowserButtonType.Minimise]: prop.analyticsCallback\n                ? () => {\n                      prop.analyticsCallback('Minimize Window', currentOFIdentity.name);\n                      handleMinimizeClick();\n                  }\n                : handleMinimizeClick,\n            [BrowserButtonType.Close]: handleCloseClick\n        });\n\n        const onClick = disabled ? disabledNoop : defaultCallbackMap[prop.type];\n\n        const getButtonTooltip = () => {\n            return prop.tooltip || (disabled ? 'Disabled' : t(defaultButtonPropMap[type].tooltipKey));\n        };\n        const [buttonTooltip, setButtonTooltip] = useState(getButtonTooltip());\n\n        const onLanguageChange = useCallback(() => {\n            setButtonTooltip(getButtonTooltip());\n        }, []);\n\n        useLanguageChange(onLanguageChange);\n\n        const buttonIconUrl = prop.iconUrl;\n\n        if (isWindows) {\n            const size = 24;\n            return (\n                <BaseButton title={buttonTooltip} disabled={disabled} onClick={onClick} width={size} height={size}>\n                    {buttonIconUrl ? (\n                        <CustomIcon customIconUrl={buttonIconUrl} />\n                    ) : (\n                        <StyledIcon\n                            disabled={disabled}\n                            isEnterprise={isEnterprise}\n                            windowFocused={windowFocused}\n                            {...defaultButtonPropMap[type].iconProps}\n                        />\n                    )}\n                </BaseButton>\n            );\n        } else {\n            // Enterprise on Mac\n            const MacIcon = () => {\n                let TypeIcon: any;\n                if (windowFocused) {\n                    TypeIcon = prop.parentHover\n                        ? defaultButtonPropMap[type].macIconHover\n                        : defaultButtonPropMap[type].macIcon;\n                } else {\n                    TypeIcon = defaultButtonPropMap[type].macIconInactive;\n                }\n                return <TypeIcon />;\n            };\n            return (\n                <MacWindowStateButton\n                    title={buttonTooltip}\n                    disabled={disabled}\n                    onClick={onClick}\n                    width={12}\n                    height={12}\n                    hoverless\n                >\n                    <MacIcon />\n                </MacWindowStateButton>\n            );\n        }\n    };\n\nconst defaultButtonsMap = {\n    [BrowserButtonType.ColorLinking]: ColorLinkingButton,\n    [BrowserButtonType.PresetLayouts]: LayoutsMenuButton,\n    [BrowserButtonType.SaveMenu]: SaveMenuButton,\n    // Pls keep me for backwards compatibility with < v7\n    [BrowserButtonType.SavePage]: SaveMenuButton,\n    [BrowserButtonType.ShowHideTabs]: ShowHideTabsButton,\n    [BrowserButtonType.LockUnlockPage]: LockUnlockButton,\n    [BrowserButtonType.Minimise]: getWindowStateOrDisabledButton(BrowserButtonType.Minimise),\n    [BrowserButtonType.Maximise]: MaximizeButton,\n    [BrowserButtonType.Close]: getWindowStateOrDisabledButton(BrowserButtonType.Close)\n};\n\nexport const RightControlsButton: FC<ToolbarButton & { windowState?: WindowState }> = (config) => {\n    const { t } = useTranslation();\n    const isWindows = useSelector(selectIsWindows);\n\n    useEffect(() => {\n        defaultButtonsMap[BrowserButtonType.Minimise] = getWindowStateOrDisabledButton(\n            BrowserButtonType.Minimise,\n            isWindows\n        );\n        defaultButtonsMap[BrowserButtonType.Close] = getWindowStateOrDisabledButton(BrowserButtonType.Close, isWindows);\n    }, [isWindows]);\n\n    const analytics = useCallback((action: { id: string }) => {\n        raiseBrowserAnalytics({\n            type: 'Toolbar',\n            action: 'Select Toolbar Item',\n            value: action.id,\n            data: { uuid: currentOFIdentity.uuid }\n        });\n    }, []);\n\n    const windowButtonAnalytics = useCallback((action: string, windowName: string) => {\n        raiseBrowserAnalytics({\n            type: 'Window',\n            action: action,\n            value: windowName\n        });\n    }, []);\n\n    if (config.type === BrowserButtonType.Custom) {\n        return (\n            <NoDragWrapper>\n                <CustomButton\n                    tooltip={config.tooltip}\n                    iconUrl={config.iconUrl}\n                    action={config.action}\n                    disabled={config.disabled}\n                    analyticsCallback={analytics}\n                />\n            </NoDragWrapper>\n        );\n    }\n\n    if (config.type === BrowserButtonType.Maximise) {\n        const defaultTooltipTranslation =\n            config.windowState === 'maximized' ? t('toolbar.restoreWindow') : t('toolbar.maximizeWindow');\n\n        return (\n            <NoDragWrapper>\n                <EnterpriseMaximizeButton\n                    disabled={config.disabled}\n                    iconUrl={config.iconUrl}\n                    tooltip={config.tooltip ?? defaultTooltipTranslation}\n                    analyticsCallback={windowButtonAnalytics}\n                    parentHover={config.parentHover}\n                />\n            </NoDragWrapper>\n        );\n    }\n\n    let DefaultButton;\n    if (config.disabled) {\n        DefaultButton = getWindowStateOrDisabledButton(config.type, isWindows);\n    } else {\n        DefaultButton = defaultButtonsMap[config.type] || ((): null => null);\n    }\n\n    return (\n        <NoDragWrapper>\n            <DefaultButton {...(config as any)} />\n        </NoDragWrapper>\n    );\n};\n\nconst MacExitIcon = () => {\n    return (\n        <svg width=\"12\" height=\"13\" viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"5.98953\" cy=\"6.01047\" r=\"5.98953\" fill=\"#EC6A5F\" />\n        </svg>\n    );\n};\n\nconst MacExitIconHover = () => {\n    return (\n        <svg width=\"12\" height=\"13\" viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"5.98953\" cy=\"6.01047\" r=\"5.98953\" fill=\"#EC6A5F\" />\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M3.35407 3.375C3.17287 3.5562 3.17287 3.84997 3.35407 4.03117L5.29274 5.96984L3.35407 7.90851C3.17287 8.0897 3.17287 8.38348 3.35407 8.56467C3.53526 8.74587 3.82904 8.74587 4.01023 8.56467L5.9489 6.626L7.88756 8.56466C8.06876 8.74585 8.36253 8.74585 8.54373 8.56466C8.72492 8.38347 8.72492 8.08969 8.54372 7.9085L6.60506 5.96984L8.54373 4.03118C8.72492 3.84998 8.72492 3.55621 8.54373 3.37501C8.36253 3.19382 8.06876 3.19382 7.88756 3.37501L5.9489 5.31367L4.01023 3.375C3.82904 3.19381 3.53526 3.19381 3.35407 3.375Z\"\n                fill=\"#8C1A11\"\n            />\n        </svg>\n    );\n};\n\nconst MacInactive = () => {\n    return (\n        <ThemedSVG width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12Z\"\n                fillOpacity=\"0.1\"\n            />\n        </ThemedSVG>\n    );\n};\n\nconst MacMinimizeIcon = () => {\n    return (\n        <svg width=\"12\" height=\"13\" viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"5.98953\" cy=\"6.01047\" r=\"5.98953\" fill=\"#F4BF4F\" />\n        </svg>\n    );\n};\n\nconst MacMinimizeIconHover = () => {\n    return (\n        <svg width=\"12\" height=\"13\" viewBox=\"0 0 12 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"5.98953\" cy=\"6.01047\" r=\"5.98953\" fill=\"#F4BF4F\" />\n            <rect x=\"2.36212\" y=\"5.58865\" width=\"7.33929\" height=\"0.927956\" rx=\"0.463978\" fill=\"#8F5A1D\" />\n        </svg>\n    );\n};\n\ndefaultButtonPropMap[BrowserButtonType.Minimise] = {\n    ...defaultButtonPropMap[BrowserButtonType.Minimise],\n    macIcon: MacMinimizeIcon,\n    macIconHover: MacMinimizeIconHover,\n    macIconInactive: MacInactive\n};\n\ndefaultButtonPropMap[BrowserButtonType.Close] = {\n    ...defaultButtonPropMap[BrowserButtonType.Close],\n    macIcon: MacExitIcon,\n    macIconHover: MacExitIconHover,\n    macIconInactive: MacInactive\n};\n","import React, { useCallback, useState } from 'react';\n\nimport type { OpenFin } from '@openfin/core';\n\nimport type { ToolbarOptions } from '@client-platform/shapes';\n\nimport { usePlatformOptionsChange } from '../../../../hooks/usePlatformOptionsChange';\nimport { RightControlsButton } from '../RightControlsButton/RightControlsButton';\nimport { defaultToolbarButtonConfig } from '../utils';\n\n/**\n * Top level container component for Browsers Icons.\n */\nconst ToolbarContainer: React.FC = () => {\n    const [toolbarButtonConfig, setToolbarButtonConfig] = useState<ToolbarOptions['buttons']>([]);\n\n    const getToolbarButtonOptions = useCallback((toolbarOptions?: ToolbarOptions): ToolbarOptions => {\n        // if the user does not specific the toolbar options, use our defaults\n        return toolbarOptions && typeof toolbarOptions === 'object' && toolbarOptions.buttons\n            ? toolbarOptions\n            : defaultToolbarButtonConfig;\n    }, []);\n\n    const setPlatformOptions = useCallback(\n        (workspacePlatform: OpenFin.WorkspacePlatformOptions) => {\n            const { toolbarOptions } = workspacePlatform;\n            const buttonOptions = getToolbarButtonOptions(toolbarOptions);\n            return setToolbarButtonConfig(buttonOptions.buttons);\n        },\n        [getToolbarButtonOptions, setToolbarButtonConfig]\n    );\n\n    const updateToolbarOptions = useCallback(\n        (newVal: OpenFin.WorkspacePlatformOptions) => {\n            const newToolbarOptions = newVal?.toolbarOptions;\n            if (newToolbarOptions && typeof newToolbarOptions === 'object') {\n                const buttonOptions = getToolbarButtonOptions(newToolbarOptions);\n                setToolbarButtonConfig(buttonOptions.buttons);\n            }\n        },\n        [getToolbarButtonOptions, setToolbarButtonConfig]\n    );\n\n    usePlatformOptionsChange(setPlatformOptions, updateToolbarOptions);\n\n    return (\n        <>\n            {toolbarButtonConfig.map((config, index) => {\n                return <RightControlsButton {...config} key={index} />;\n            })}\n        </>\n    );\n};\n\nexport default ToolbarContainer;\n","import React, { useCallback, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport type { OpenFin } from '@openfin/core';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport { WindowStateButton, WindowStateButtonOptions } from '@client-platform/shapes';\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { useWindowState } from '@common/hooks/useWindowState';\nimport { usePlatformOptionsChange } from '@enterprise/hooks/usePlatformOptionsChange';\n\nimport { RightControlsButton } from '../RightControlsButton/RightControlsButton';\nimport { defaultMacWindowStateButtonConfig, defaultWindowStateButtonConfig } from '../utils';\n\n/**\n * Top level container component for Window State Icons.\n */\nconst WindowStateContainer: React.FC = () => {\n    const [windowStateButtonConfig, setWindowStateButtonConfig] = useState<WindowStateButtonOptions['buttons']>([]);\n    const [hover, setHover] = useState<boolean>(false);\n    const windowFocused = useWindowFocusState();\n    const isWindows = useSelector(selectIsWindows);\n\n    const getWindowStateButtonOptions = useCallback(\n        (windowStateButtonOptions: any): WindowStateButtonOptions => {\n            // if the user does not specificify the window state options, use our defaults\n            return windowStateButtonOptions &&\n                typeof windowStateButtonOptions === 'object' &&\n                windowStateButtonOptions.buttons\n                ? windowStateButtonOptions\n                : isWindows\n                ? defaultWindowStateButtonConfig\n                : defaultMacWindowStateButtonConfig;\n        },\n        [isWindows]\n    );\n\n    const setPlatformOptions = useCallback(\n        (workspacePlatform: OpenFin.WorkspacePlatformOptions) => {\n            const { windowStateButtonOptions } = workspacePlatform;\n            const buttonOptions = getWindowStateButtonOptions(windowStateButtonOptions);\n            return setWindowStateButtonConfig(buttonOptions.buttons);\n        },\n        [getWindowStateButtonOptions, setWindowStateButtonConfig]\n    );\n    const updateWindowStateButtonOptions = useCallback(\n        (newVal: OpenFin.WorkspacePlatformOptions) => {\n            const newWindowStateButtonOptions = newVal?.windowStateButtonOptions;\n            if (newWindowStateButtonOptions && typeof newWindowStateButtonOptions === 'object') {\n                const buttonOptions = getWindowStateButtonOptions(newWindowStateButtonOptions);\n                setWindowStateButtonConfig(buttonOptions.buttons);\n            }\n        },\n        [getWindowStateButtonOptions, setWindowStateButtonConfig]\n    );\n\n    usePlatformOptionsChange(setPlatformOptions, updateWindowStateButtonOptions);\n\n    const onMouseOver = useCallback(() => {\n        setHover(true);\n    }, []);\n    const onMouseOut = useCallback(() => {\n        setHover(false);\n    }, []);\n\n    const windowState = useWindowState();\n\n    return (\n        <Container\n            onMouseOver={onMouseOver}\n            onMouseLeave={onMouseOut}\n            windowFocused={windowFocused}\n            isWindows={isWindows}\n            data-testid=\"enterprise-window-state\"\n        >\n            {windowStateButtonConfig.map((config: WindowStateButton, index) => (\n                <RightControlsButton windowState={windowState} {...config} key={index} parentHover={hover} />\n            ))}\n        </Container>\n    );\n};\n\nexport default WindowStateContainer;\n\nconst Container = styled(Box)<{ windowFocused: boolean; isWindows: boolean }>`\n    flex-direction: row;\n    padding: 0px 12px 0px 12px;\n    row-gap: ${({ theme }) => theme.px.small};\n    gap: ${({ theme }) => theme.px.small};\n    align-items: center;\n    border-right: ${({ theme, isWindows }) => (isWindows ? 'none' : `1px solid ${theme.palette.background4}`)};\n    border-bottom: ${({ theme, isWindows }) => !isWindows && `1px solid ${theme.palette.background5}`};\n`;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { enterpriseToolbarTestIds } from '@common/utils/test-ids';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport NotificationsButton from '@common/components/NotificationsButton/NotificationsButton';\n\nimport AICompanionShortcutButton from '@enterprise/components/ControlBar/AICompanionShortcutButton/AICompanionShortcutButton';\nimport BookmarksPanelButton from '@enterprise/components/ControlBar/BookmarksPanelButton/BookmarksPanelButton';\nimport EnterpriseGlobalMenu from '@enterprise/components/ControlBar/EnterpriseGlobalMenu/EnterpriseGlobalMenu';\n\nimport useIsNotificationsRunning from '@common/hooks/useIsNotificationsRunning';\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport { useSidePanelContext } from '@enterprise/context/SidePanelContext';\n\nimport ToolbarContainer from './ToolbarContainer/ToolbarContainer';\nimport WindowStateContainer from './WindowStateContainer/WindowStateContainer';\nimport { useBookmarksContext } from '@enterprise/context/BookmarksContext';\n\n/**\n * Top level container component for Browsers navigation buttons.\n */\nconst RightControlsContainer: React.FC = () => {\n    const isWindows = useSelector(selectIsWindows);\n    const windowFocused = useWindowFocusState();\n\n    const isNotificationsRunning = useIsNotificationsRunning();\n    const { isAICompanionEnabled } = useSidePanelContext();\n    const { isBookmarksEnabled } = useBookmarksContext();\n\n    return (\n        <Container>\n            <ToolbarContainer />\n            {isNotificationsRunning && (\n                <NotificationsButton\n                    windowFocused={windowFocused}\n                    data-testid={enterpriseToolbarTestIds.notificationsButton}\n                />\n            )}\n            {isAICompanionEnabled && <AICompanionShortcutButton />}\n            {isBookmarksEnabled && <BookmarksPanelButton />}\n            <EnterpriseGlobalMenu />\n            {/* Window state buttons on top-right for Windows */}\n            {isWindows && <WindowStateContainer />}\n        </Container>\n    );\n};\n\nexport default RightControlsContainer;\n\nconst Container = styled(Box)`\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n\n    margin-right: 0px;\n    border-bottom: ${({ theme }) => `1px solid ${theme.palette.background5}`};\n`;\n","import * as base32 from 'hi-base32';\n\nimport * as namespacedLocalStorage from '@common/utils/namespaced-local-storage';\n\nimport { AttachedPage } from '@client-platform/shapes';\n\nimport LocalStorageKey from './local-storage-key';\nimport { currentOFIdentity } from './window';\n/**\n * Determines if a given DragEvent is within the bounds of a specified parent element.\n *\n * @param {DragEvent} event - The DragEvent to check.\n * @param {DOMRect} parentBounds - The bounding rectangle of the parent element.\n * @returns {boolean} true if the event is within the parent bounds, false otherwise.\n */\nexport const isWithinParentBounds = (event: DragEvent, parentBounds: DOMRect) => {\n    return (\n        event.pageX >= parentBounds.left &&\n        event.pageX <= parentBounds.right &&\n        event.pageY >= parentBounds.top &&\n        event.pageY <= parentBounds.bottom\n    );\n};\n\n/** Determines the action to be taken once page is dropped */\ntype DragState = 'reorder' | 'reparent' | 'popout' | null;\n\nexport const getDragState = (): DragState => {\n    return namespacedLocalStorage.getItem(LocalStorageKey.PageDragState) as DragState;\n};\n\nexport const setDragState = (value: DragState) => {\n    if (value !== null) {\n        namespacedLocalStorage.setItem(LocalStorageKey.PageDragState, value);\n    } else {\n        namespacedLocalStorage.removeItem(LocalStorageKey.PageDragState);\n    }\n};\n\nexport const hideSingleView = async () => {\n    const views = await fin.Platform.Layout.getCurrentSync().getCurrentViews();\n    if (views.length === 1) {\n        fin.View.wrapSync(views[0].identity).hide();\n    }\n};\n\nexport const getViewTabPayload = (event: React.DragEvent) => {\n    const payload = event.dataTransfer.getData('view-identity');\n    if (!payload) return null;\n    const infoArray = JSON.parse(payload);\n    const viewOptions = JSON.parse(infoArray[0]);\n    return viewOptions;\n};\n\nexport const isSingleViewDrag = (event: React.DragEvent) => {\n    return event.dataTransfer.types.some((type) => type.startsWith('view-identity'));\n};\n\n/**\n * Returns an array of pages where page corresponding to currentDragPageId is moved to index targetPositionIndex.\n */\nexport function getReorderedPages(pages: AttachedPage[], currentDragPageId: string, targetPositionIndex: number) {\n    return pages.flatMap((page, index) => {\n        const subarray = page.pageId === currentDragPageId ? [] : [page.pageId];\n        if (index === targetPositionIndex) {\n            subarray.unshift(currentDragPageId);\n        } else if (index === pages.length - 1 && targetPositionIndex === index + 1) {\n            subarray.push(currentDragPageId);\n        }\n        return subarray;\n    });\n}\n\n/**\n * Our custom drag and drop data transfer type.\n * This is used to determine that it is a page being dropped on our window, and not anything else.\n *\n * Note: This must be lowercase! DnD eventing will automatically lowercase it in flight.\n */\nexport const getDragPayloadType = (isEnterprise?: boolean) =>\n    base32.encode(`fin${isEnterprise ? '/enterprise' : ''}/page/uuid:${currentOFIdentity.uuid}`).toLowerCase();\n\ntype TabDragPayload = {\n    sourceIdentity: {\n        uuid: string;\n        name: string;\n    };\n    settings: {\n        preventDragOut: boolean;\n    };\n};\nexport const decodeDragPayload = (payload: string): TabDragPayload => {\n    const tabDragData = payload.replace('payload:', '').toUpperCase();\n    return JSON.parse(base32.decode(tabDragData));\n};\n\nexport const encodeDragPayload = (payload: TabDragPayload): string => {\n    return `payload:${base32.encode(JSON.stringify(payload))}`;\n};\n","import { useEffect } from 'react';\n\nimport { getCurrentOFWindow } from '@common/utils/window';\n\nimport { AttachedPageInternal } from '@common/api/pages/shapes';\n\nexport const useManagePageViewCount = (\n    updatePageForViewCountListener: () => void,\n    activePage: AttachedPageInternal,\n    isEnterprise: boolean,\n    isDetachingPages: boolean\n) => {\n    useEffect(() => {\n        if (isEnterprise) {\n            const win = getCurrentOFWindow();\n            win.addListener('view-attached', updatePageForViewCountListener);\n            win.addListener('view-detached', updatePageForViewCountListener);\n\n            return () => {\n                win.removeListener('view-attached', updatePageForViewCountListener);\n                win.removeListener('view-detached', updatePageForViewCountListener);\n            };\n        }\n    }, [isEnterprise, updatePageForViewCountListener]);\n\n    useEffect(() => {\n        if (isEnterprise) {\n            updatePageForViewCountListener();\n        }\n        // Run effect only when the activePage key changes, not on every change in the activePage\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isDetachingPages, activePage.layoutContainerKey]);\n};\n","import { useEffect, useState } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nexport const useGetContextGroups = () => {\n    const [contextGroups, setContextGroups] = useState<OpenFin.ContextGroupInfo[]>([]);\n\n    useEffect(() => {\n        fin.me.interop.getContextGroups().then((groups) => setContextGroups(groups));\n    }, []);\n\n    return contextGroups;\n};\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport debounce from 'lodash.debounce';\n\nimport { decodeDragPayload, getDragPayloadType, isSingleViewDrag } from '@common/utils/page-drag';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport { getCurrentSync } from '@client-platform/index';\n\n/**\n * Manages an dragging items within, out of, and into a list of pages. Uses dragover event to determine position of drop indicator.\n */\nexport const usePageDrag = (pages: AttachedPageInternal[]) => {\n    const [dropIndicatorPosition, setIndicatorPosition] = useState(null);\n    const [hoveredPageIndex, setHoveredPageIndex] = useState(null);\n    const [isShowingDropIndicator, setIsShowingDropIndicator] = useState(false);\n    const mouseCoordRef = useRef({ x: 0, y: 0 });\n    const hasSetActivePageRef = useRef(false);\n\n    const setActivePageHelper = useCallback(\n        async (pageId: string) => {\n            hasSetActivePageRef.current = true;\n            await getCurrentSync()\n                .Browser.wrapSync(currentOFIdentity)\n                .setActivePage(pageId)\n                .finally(() => {\n                    hasSetActivePageRef.current = false;\n                });\n        },\n        [hasSetActivePageRef]\n    );\n\n    // leading debounced function ensures we don't repeatedly call setActivePage during drag\n    const debouncedSetActivePage = useMemo(\n        () => debounce(setActivePageHelper, 500, { leading: true, trailing: false }),\n        [setActivePageHelper]\n    );\n\n    const onPageDragOver = useCallback(\n        async (e: React.DragEvent<HTMLDivElement>, { pageId, isActive }: AttachedPageInternal) => {\n            const pageDropType = e.dataTransfer.types.find((type) => type.startsWith(getDragPayloadType(true)));\n            // we don't want to show indicator for some reason (e.g. unsupported drag)\n            if (!isShowingDropIndicator) {\n                return;\n            }\n\n            const pageButtonBoundingRect = (e.currentTarget as HTMLDivElement).getBoundingClientRect();\n            const mouseX = e.pageX;\n            const mouseY = e.pageY;\n\n            const targetPageIndex = pages.findIndex((page) => page.pageId === pageId);\n            const pageElement = e.currentTarget;\n\n            const isWithinActivationBounds = (x: number, y: number, areaRect: DOMRect) => {\n                const pageX30pct = areaRect.left + areaRect.width * 0.3;\n                const pageX70pct = areaRect.left + areaRect.width * 0.7;\n                return x > pageX30pct && x < pageX70pct && y > areaRect.top && y < areaRect.bottom;\n            };\n            const isViewDrag = isSingleViewDrag(e);\n            if (isViewDrag && isWithinActivationBounds(mouseX, mouseY, pageButtonBoundingRect)) {\n                const viewDropType = e.dataTransfer.types.find((type) => type.startsWith('payload'));\n                const viewDragMetadata = viewDropType ? decodeDragPayload(viewDropType) : null;\n                /** There is a Container bug where tab drag\n                 * from one layout into another in the same window doesn't work.\n                 * This restricts that scenario until the bug is fixed.\n                 * Container bug: https://openfin.jira.com/browse/CORE-1895 */\n                const shouldActivatePage =\n                    viewDragMetadata?.sourceIdentity?.name !== currentOFIdentity.name || pageDropType;\n\n                setTimeout(async () => {\n                    const currentPageRect = pageElement?.getBoundingClientRect();\n                    // check if we are still within activation bounds of the page tab\n                    if (\n                        currentPageRect &&\n                        isWithinActivationBounds(mouseCoordRef.current.x, mouseCoordRef.current.y, currentPageRect)\n                    ) {\n                        setIndicatorPosition(null);\n                        setHoveredPageIndex(targetPageIndex);\n\n                        if (!isActive && shouldActivatePage && !hasSetActivePageRef.current) {\n                            debouncedSetActivePage(pageId);\n                        }\n                        mouseCoordRef.current = { x: 0, y: 0 };\n                    }\n                }, 500);\n\n                return;\n            } else {\n                setHoveredPageIndex(null);\n                // Get horizontal middle\n                const pageMiddleX = (pageButtonBoundingRect.left + pageButtonBoundingRect.right) / 2;\n                // Only perform the move when the mouse has crossed half of the page tab's width\n                if (dropIndicatorPosition !== targetPageIndex && mouseX < pageMiddleX) {\n                    // show drop indicator before hovered page\n                    setIndicatorPosition(targetPageIndex);\n                } else if (dropIndicatorPosition !== targetPageIndex + 1 && mouseX > pageMiddleX) {\n                    // show drop indicator after hovered page\n                    setIndicatorPosition(targetPageIndex + 1);\n                }\n            }\n        },\n        [isShowingDropIndicator, pages, dropIndicatorPosition, debouncedSetActivePage, hasSetActivePageRef]\n    );\n    useEffect(() => {\n        const dragOverListener = (event: DragEvent) => {\n            mouseCoordRef.current = { x: event.clientX, y: event.clientY };\n        };\n        document.addEventListener('dragover', dragOverListener, { capture: true });\n\n        return () => document.removeEventListener('dragover', dragOverListener, { capture: true });\n    }, []);\n\n    return {\n        onPageDragOver,\n        dropIndicatorPosition,\n        isShowingDropIndicator,\n        setIsShowingDropIndicator,\n        hoveredPageIndex\n    };\n};\n","import { useEffect } from 'react';\n\nimport OpenFin from '@openfin/core';\n\nimport { dispatch, getState } from '@enterprise/api/pages/state';\nimport { selectPages, updatePageAtIndex } from '@enterprise/slices/pages/attached';\n\n/**\n * This hook is used to update the supertab icons for single view supertabs. It utilizes the window event 'view-page-favicon-updated'\n * to listen for favicon updates and update the icon in the corresponding supertab.\n */\nexport const usePageIcon = () => {\n    useEffect(() => {\n        const finWindow = fin.Window.getCurrentSync();\n\n        const updatePageIcon = (event: OpenFin.WindowEvents.ByType<'view-page-favicon-updated'>) => {\n            const pages = selectPages(getState());\n            const matchIndex = pages.findIndex((page) => page?.singleViewName === event.viewIdentity.name);\n            if (matchIndex !== -1) {\n                const updatedPage = pages[matchIndex];\n                const newIcon = event.favicons[0];\n                console.debug('Updating Page Icon for:', { pageId: updatedPage.pageId, newIcon });\n                dispatch(\n                    updatePageAtIndex({\n                        index: matchIndex,\n                        page: { ...updatedPage, pageIcon: newIcon }\n                    })\n                );\n            }\n        };\n\n        finWindow.addListener('view-page-favicon-updated', updatePageIcon);\n\n        return () => {\n            finWindow.removeListener('view-page-favicon-updated', updatePageIcon);\n        };\n    }, []);\n};\n","import { useEffect, useState } from 'react';\n\nimport { AttachedPageInternal } from '@common/api/pages/shapes';\n\nconst useSingleViewTitle = (page: AttachedPageInternal) => {\n    const [singleViewTitle, setSingleViewTitle] = useState<string>('');\n\n    useEffect(() => {\n        if (page.singleViewName) {\n            const finView = fin.View.wrapSync({ uuid: fin.me.uuid, name: page.singleViewName });\n            const onPageTitleUpdated = (event: { title: string }) => {\n                setSingleViewTitle(event.title);\n            };\n            finView.on('page-title-updated', onPageTitleUpdated);\n            finView.getInfo().then(({ title }) => setSingleViewTitle(title));\n            return () => {\n                finView.removeListener('page-title-updated', onPageTitleUpdated);\n            };\n        } else {\n            setSingleViewTitle(null);\n        }\n    }, [page.layoutContainerKey, page.singleViewName]);\n\n    if (!(page as AttachedPageInternal).attachedPageType) {\n        // if page type does not exist yet, return empty string\n        return '';\n    }\n\n    return page.singleViewName ? singleViewTitle : page.title;\n};\n\nexport default useSingleViewTitle;\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport type OpenFin from '@openfin/core';\n\nimport { getCurrentOFWindow } from '@common/utils/window';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport {\n    selectFirstViewIdForLayoutContainerKey,\n    selectFirstViewNameForLayoutContainerKey\n} from '@enterprise/slices/tab-focus';\n\nimport useSingleViewTitle from '@enterprise/components/ControlBar/Tablist/PageButton/useSingleViewTitle';\n\nimport { AttachedPage, WindowTitle } from '@client-platform/index';\n\nexport const getDocumentTitle = async (\n    windowTitle: string | WindowTitle,\n    activePage: AttachedPage,\n    selectedView: OpenFin.Identity | null\n) => {\n    switch (typeof windowTitle) {\n        case 'string': {\n            console.warn(\n                '[DEPRECATED] Type String has been deprecated for workspacePlatform.title. Please use the WindowTitle Type.'\n            );\n            return windowTitle;\n        }\n        case 'object': {\n            switch (windowTitle.type) {\n                case 'custom':\n                    return windowTitle.value;\n                case 'view-title': {\n                    if (selectedView) {\n                        const view = fin.View.wrapSync(selectedView);\n                        const viewInfo = await view.getInfo();\n                        return viewInfo.title;\n                    } else {\n                        return '';\n                    }\n                }\n                case 'page-title': {\n                    return activePage.title;\n                }\n                default:\n                    return '';\n            }\n        }\n        default:\n            return '';\n    }\n};\n\nexport default function useWindowTitle() {\n    const [windowTitle, setWindowTitle] = useState('');\n    const [selectedView, setSelectedView] = useState<OpenFin.Identity | null>(null);\n    const activePage = useSelector(selectActivePage);\n    const viewName = useSelector(selectFirstViewNameForLayoutContainerKey(activePage.layoutContainerKey));\n    const viewId = useSelector(selectFirstViewIdForLayoutContainerKey(activePage.layoutContainerKey));\n\n    const enterpriseWindowTitle = useSingleViewTitle(activePage) + ' - Here';\n\n    useEffect(() => {\n        if (viewName && viewId) {\n            setSelectedView({ name: viewName, uuid: viewId });\n        } else {\n            setSelectedView(null);\n        }\n    }, [viewName, viewId]);\n\n    useEffect(() => {\n        const updateWindowTitle = async () => {\n            setWindowTitle(enterpriseWindowTitle);\n        };\n\n        const win = getCurrentOFWindow();\n\n        // Event handler for changes in workspacePlatform title\n        const handleWorkspacePlatformTitleChange = (payload: OpenFin.WindowEvents.WindowOptionsChangedEvent) => {\n            if (!payload.diff.workspacePlatform) return;\n            const { oldVal, newVal } = payload.diff.workspacePlatform;\n            if (oldVal?.title?.type !== newVal?.title?.type) {\n                updateWindowTitle();\n            }\n        };\n\n        // Event handler for changes in the View URL\n        const handleViewUrlChange = () => {\n            updateWindowTitle();\n        };\n\n        // Initial update of document title\n        updateWindowTitle();\n\n        // Subscribe to changes in workspacePlatform title\n        win.on('options-changed', handleWorkspacePlatformTitleChange);\n\n        // Subscribe to updates in the page title\n        win.on('view-page-title-updated', handleViewUrlChange);\n\n        // Cleanup: remove event listeners and subscriptions\n        return () => {\n            win.removeListener('options-changed', handleWorkspacePlatformTitleChange);\n            win.removeListener('view-page-title-updated', handleViewUrlChange);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [activePage?.pageId, activePage?.title, selectedView?.name, enterpriseWindowTitle]);\n\n    return windowTitle;\n}\n","import styled, { css } from 'styled-components';\n\nimport { Icon, IconSizeType } from '@openfin/ui-library';\n\nimport { CustomIcon } from '@common/components/Icon/CustomIcon';\n\n// PageIcon styled-components\n\ninterface LargeCustomIconProps {\n    isLoading?: boolean;\n    applyThemeColor?: boolean;\n    iconURL?: string;\n    size?: IconSizeType;\n}\n\nexport const LargeCustomIcon = styled(CustomIcon)<LargeCustomIconProps>`\n    height: ${({ theme }) => theme.px.large};\n    width: ${({ theme }) => theme.px.large};\n    ${({ isLoading }) =>\n        isLoading &&\n        css`\n            height: 12px;\n            width: 12px;\n            border-radius: 50%;\n        `}\n`;\n\nexport const UnsavedChangesIcon = styled(Icon).attrs({ icon: 'DotFilledIcon', size: 'large' })``;\n\n// TitleButton styled-components\nexport const EnterpriseTitleButton = styled.button<{\n    blurredText: boolean;\n    dragDisabled?: boolean;\n}>`\n    background: transparent;\n    display: flex;\n    align-items: center;\n    overflow: hidden;\n    flex-grow: 1;\n    cursor: default;\n`;\n\n// CloseButtonBase styled-components\nexport const CloseIconWrapper = styled.button<{\n    disabled?: boolean;\n    isEnterprise: boolean;\n    isSchemeDark: boolean;\n    hideCloseButton: boolean;\n}>`\n    width: ${({ theme }) => theme.px.large};\n    margin-right: ${({ theme }) => theme.px.small};\n\n    background: transparent;\n    opacity: ${({ disabled }) => (disabled ? '0.5' : undefined)};\n    z-index: 1;\n\n    ${({ theme, isEnterprise, isSchemeDark, hideCloseButton }) =>\n        isEnterprise &&\n        css`\n            cursor: default;\n            border-radius: ${theme.px.xsmall};\n            height: ${theme.px.large};\n            flex-shrink: 0;\n\n            div {\n                margin: auto;\n            }\n\n            ${UnsavedChangesIcon} svg {\n                margin-top: -${theme.px.xsmall};\n                margin-left: -${theme.px.xsmall};\n\n                opacity: 0.9;\n            }\n\n            :hover {\n                background-color: ${!hideCloseButton &&\n                (isSchemeDark ? theme.palette.background5 : theme.palette.background3)};\n            }\n        `}\n`;\n\nexport const PageIconContainer = styled.div`\n    width: ${({ theme }) => theme.px.large};\n    min-width: ${({ theme }) => theme.px.large};\n    margin-right: ${({ theme }) => theme.px.xsmall};\n    align-items: center;\n    justify-content: center;\n`;\n","import React from 'react';\n\nimport { Box, Icon } from '@openfin/ui-library';\n\nimport { countViews } from '@common/utils/layout';\n\nimport type { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport { CloseIconWrapper, LargeCustomIcon, UnsavedChangesIcon } from './styles';\n\ninterface CloseButtonProps extends React.ButtonHTMLAttributes<unknown> {\n    options?: AttachedPageInternal['closeButton'];\n    parentHover: boolean;\n    page: AttachedPageInternal;\n    pageActive: boolean;\n    isEnterprise: boolean;\n    isSchemeDark: boolean;\n    hideCloseButton: boolean;\n}\n\nconst CloseButton: React.FC<CloseButtonProps> = ({\n    options,\n    parentHover,\n    page,\n    pageActive,\n    isEnterprise,\n    hideCloseButton,\n    ...rest\n}) => {\n    if (options?.hidden) return <Box padding=\"xsmall\" />;\n\n    const { hasUnsavedChanges, unsavedIconUrl } = page;\n    const viewCount = countViews(page.layout.content);\n\n    if (isEnterprise && viewCount > 1 && hasUnsavedChanges && (!parentHover || hideCloseButton)) {\n        return (\n            <CloseIconWrapper isEnterprise hideCloseButton={hideCloseButton} {...rest}>\n                {unsavedIconUrl ? (\n                    <LargeCustomIcon iconURL={unsavedIconUrl} data-testid=\"unsavedChangesIcon\" />\n                ) : (\n                    <UnsavedChangesIcon data-testid=\"unsavedChangesIcon\" />\n                )}\n            </CloseIconWrapper>\n        );\n    }\n    if (!isEnterprise || pageActive || (parentHover && !hideCloseButton)) {\n        return (\n            <CloseIconWrapper isEnterprise={isEnterprise} hideCloseButton={hideCloseButton} {...rest}>\n                <Icon icon=\"Cross2Icon\" size=\"small\" />\n            </CloseIconWrapper>\n        );\n    }\n    return <></>;\n};\n\nexport default CloseButton;\n","import styled, { css, DefaultTheme } from 'styled-components';\n\nimport { CloseIconWrapper, EnterpriseTitleButton, PageIconContainer } from './styles';\n\ninterface ContainerProps {\n    isActive: boolean;\n    isSingleView: boolean;\n    windowFocused: boolean;\n    pageHasUnsavedChanges: boolean;\n    dragDisabled?: boolean;\n    isSchemeDark?: boolean;\n    isDragging?: boolean;\n    isDropRegion?: boolean;\n    shouldHideBottomBorder?: boolean;\n}\n\nexport const getPageTabTitleOverflowShadow = (\n    theme: DefaultTheme,\n    isSchemeDark: boolean,\n    isTabHoveredOrActive: boolean,\n    isCloseButtonShowing: boolean\n) => {\n    const colorToken = isSchemeDark\n        ? isTabHoveredOrActive\n            ? 'background3'\n            : 'background1'\n        : isTabHoveredOrActive\n        ? 'background1'\n        : 'background2';\n\n    if (isCloseButtonShowing) {\n        return css`\n            background: linear-gradient(\n                90deg,\n                rgb(from ${theme.palette[colorToken]} r g b / 0%) 0%,\n                rgb(from ${theme.palette[colorToken]} r g b / 50%) 24%,\n                rgb(from ${theme.palette[colorToken]} r g b / 100%) 46%\n            );\n        `;\n    } else {\n        return css`\n            background: linear-gradient(\n                90deg,\n                rgb(from ${theme.palette[colorToken]} r g b / 0%) 52%,\n                rgb(from ${theme.palette[colorToken]} r g b / 50%) 74%,\n                rgb(from ${theme.palette[colorToken]} r g b / 100%) 92%\n            );\n        `;\n    }\n};\n\n// Container styled-components\nconst BaseContainer = styled.div<ContainerProps>`\n    align-items: center;\n    border: 0;\n    display: ${({ isDragging }) => (isDragging ? 'none' : 'flex')};\n    flex-shrink: 0;\n    max-height: 100%;\n`;\nconst EnterpriseContainer = styled(BaseContainer)`\n    /* Flex */\n    flex: 1 1 100%;\n    align-items: center;\n    justify-content: center;\n\n    /* Border styling */\n    border-right: 1px solid ${({ theme }) => theme.palette.background5};\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n    border-bottom-color: ${({ theme, isActive, isSchemeDark, shouldHideBottomBorder }) =>\n        !isActive\n            ? theme.palette.background5\n            : shouldHideBottomBorder\n            ? isSchemeDark\n                ? theme.palette.background3\n                : theme.palette.background1\n            : theme.palette.background5};\n\n    background-color: ${({ theme, isActive, isSchemeDark }) =>\n        isActive\n            ? isSchemeDark\n                ? theme.palette.background3\n                : theme.palette.background1\n            : isSchemeDark\n            ? theme.palette.background1\n            : theme.palette.background2};\n    background-clip: ${({ isSingleView }) => isSingleView && 'padding-box'};\n\n    position: relative;\n    padding-left: ${({ theme }) => theme.px.base};\n    gap: ${({ theme }) => theme.px.xsmall};\n    min-width: 40px;\n    max-width: 180px;\n    width: 180px;\n    overflow: hidden;\n    white-space: nowrap;\n\n    ${({ isDropRegion }) =>\n        isDropRegion\n            ? css`\n                  border: 2px solid ${({ theme }) => theme.palette.statusActive};\n              `\n            : css<ContainerProps>`\n                  border-right: 1px solid ${({ theme }) => theme.palette.background5};\n                  border-bottom-width: 1px;\n                  border-bottom-style: solid;\n                  border-bottom-color: ${({ theme, isActive, isSchemeDark, shouldHideBottomBorder }) =>\n                      !isActive\n                          ? theme.palette.background5\n                          : shouldHideBottomBorder\n                          ? isSchemeDark\n                              ? theme.palette.background3\n                              : theme.palette.background1\n                          : theme.palette.background5};\n              `}\n\n    & > * {\n        opacity: ${({ windowFocused }) => !windowFocused && '0.5'};\n    }\n\n    &:hover span {\n        opacity: 1;\n    }\n\n    &:hover {\n        background-color: ${({ theme, isActive, isSchemeDark }) =>\n            !isActive && (isSchemeDark ? theme.palette.background3 : theme.palette.background1)};\n    }\n\n    &::before {\n        content: '';\n        display: ${({ isDropRegion }) => (isDropRegion ? 'block' : 'none')};\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        right: 0;\n        left: 0;\n        top: 0;\n        background-color: ${({ theme }) => theme.palette.statusActive};\n        opacity: 0.25;\n        z-index: 2;\n    }\n\n    &::after {\n        content: '';\n        display: block;\n        position: absolute;\n        right: 0px;\n        height: ${({ theme }) => theme.px.large};\n        width: ${({ theme }) => theme.px.xxxxlarge};\n        ${({ theme, isSchemeDark, isActive, pageHasUnsavedChanges }) =>\n            getPageTabTitleOverflowShadow(theme, isSchemeDark, isActive, isActive || pageHasUnsavedChanges)}\n    }\n\n    &:hover:after {\n        ${({ theme, isSchemeDark }) => getPageTabTitleOverflowShadow(theme, isSchemeDark, true, true)}\n    }\n\n    &.dragging-page-clone:after {\n        ${({ theme, isSchemeDark }) => getPageTabTitleOverflowShadow(theme, isSchemeDark, false, true)}\n    }\n\n    &.page-tab-condensed-sm {\n        padding: 0 6px;\n\n        ${PageIconContainer} {\n            margin-right: unset;\n            display: ${({ isActive, pageHasUnsavedChanges }) => (isActive || pageHasUnsavedChanges) && 'none'};\n        }\n\n        /* If there is no page icon, show the title instead */\n        ${EnterpriseTitleButton}:only-child {\n            display: ${({ isActive }) => !isActive && 'inherit'};\n        }\n\n        ${EnterpriseTitleButton} {\n            display: none;\n        }\n\n        ${CloseIconWrapper} {\n            margin-right: 0;\n            display: ${({ isActive, pageHasUnsavedChanges }) => !(isActive || pageHasUnsavedChanges) && 'none'};\n        }\n\n        &::after {\n            display: none;\n        }\n\n        &:hover:after {\n            ${({ theme, isSchemeDark, isActive, pageHasUnsavedChanges }) =>\n                getPageTabTitleOverflowShadow(theme, isSchemeDark, true, isActive || pageHasUnsavedChanges)}\n        }\n    }\n\n    &.page-tab-condensed-md,\n    &.page-tab-condensed-lg {\n        /* If there is no page icon; show the title instead */\n        div:empty + ${EnterpriseTitleButton} {\n            display: inherit;\n        }\n\n        /* Show x button when tab active; always show dirty indicator */\n        ${CloseIconWrapper} {\n            display: ${({ isActive, pageHasUnsavedChanges }) => !(isActive || pageHasUnsavedChanges) && 'none'};\n        }\n    }\n\n    /* Hide page icon when tab active; show dirty indicator instead of page icon */\n    &.page-tab-condensed-md ${PageIconContainer} {\n        display: ${({ isActive, pageHasUnsavedChanges }) => (isActive || pageHasUnsavedChanges) && 'none'};\n    }\n\n    &.page-tab-condensed-md,\n    &.page-tab-condensed-lg {\n        &:hover:after {\n            ${({ theme, isSchemeDark, isActive, pageHasUnsavedChanges }) =>\n                getPageTabTitleOverflowShadow(theme, isSchemeDark, true, isActive || pageHasUnsavedChanges)}\n        }\n    }\n`;\n\nexport default EnterpriseContainer;\n","import { useEffect, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { OpenFin } from '@openfin/core';\n\nimport type { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport {\n    onViewStoppedLoading,\n    onViewUrlChanged,\n    removePageState,\n    setPageSingleViewState\n} from '@enterprise/slices/pages-loading';\n\nexport function usePageLoadingEvents(page: AttachedPageInternal) {\n    const dispatch = useDispatch();\n    const { layoutContainerKey } = page;\n\n    useEffect(() => {\n        return () => {\n            dispatch(removePageState({ layoutContainerKey }));\n        };\n    }, [layoutContainerKey, dispatch]);\n\n    const singleViewIdentity = useMemo(\n        () => (page.singleViewName ? { uuid: fin.me.uuid, name: page.singleViewName } : null),\n        [page.singleViewName]\n    );\n\n    useEffect(() => {\n        // Only run when it's a single view page\n        if (!singleViewIdentity) {\n            return;\n        }\n\n        let identityChanged = false;\n\n        // getCurrentSync returns a View object that represents the current view\n        // Since we are not only interested in the current view, but also in the loading events of other views,\n        // we need to get the information about any existing views\n        const view = fin.View.wrapSync(singleViewIdentity);\n        const viewName = singleViewIdentity.name;\n\n        // Stopping an event listener for the view => decrement the loading count\n        function handleDidStopLoading() {\n            dispatch(onViewStoppedLoading({ layoutContainerKey, viewName }));\n        }\n\n        // Equivalent to did-finish-load, but triggered when the page fails to load\n        function handleDidFailLoad() {\n            dispatch(onViewStoppedLoading({ layoutContainerKey, viewName }));\n        }\n\n        /**\n         * If the user navigates to a new URL and it is NOT the landing page,\n         * we consider it \"loading.\" If it *is* the landing page, we remove from store to avoid a spinner.\n         */\n        async function handleUrlChanged(e: OpenFin.Events.WebContentsEvents.UrlChangedEvent) {\n            try {\n                /**\n                 * Determines whether a navigation event is a full page load or an in-page navigation.\n                 *\n                 * - `isInPage: true`  The navigation happened **within the same page** without a full reload.\n                 *   Examples: clicking an anchor link (`#section`), `window.location.hash`, or `history.pushState()`.\n                 * - `isInPage: false`  A **full navigation or page reload** occurred.\n                 *   Examples: entering a new URL, clicking a standard `<a>` link, refreshing the page, or a server redirect.\n                 *\n                 * This distinction helps avoid unnecessary loading indicators for in-page changes.\n                 *\n                 * Reference: OpenFin API - WebContentsEvents.UrlChangedEvent\n                 * https://developers.openfin.co/docs/api/v27.91.67/webcontents#event-url-changed\n                 */\n\n                if (!e.isInPage) {\n                    dispatch(onViewUrlChanged({ layoutContainerKey, viewName, url: e.url }));\n                }\n            } catch (err) {\n                console.warn('Could not get view info:', err);\n            }\n        }\n\n        // Attach the event listeners\n        Promise.all([\n            view.addListener('url-changed', handleUrlChanged),\n            view.addListener('did-finish-load', handleDidStopLoading),\n            view.addListener('did-fail-load', handleDidFailLoad)\n        ]).then(async () => {\n            // If the single view identity hasn't changed, check the view url just in case we missed the initial `url-changed`\n            if (!identityChanged) {\n                const info = await fin.View.wrapSync(singleViewIdentity).getInfo();\n                // Views can have undefined URLS when initially created\n                if (info.url.length) {\n                    dispatch(\n                        setPageSingleViewState({ layoutContainerKey, viewName: singleViewIdentity.name, url: info.url })\n                    );\n                }\n            }\n        });\n\n        // Cleanup the event listeners\n        return () => {\n            identityChanged = true;\n            view.removeListener('url-changed', handleUrlChanged);\n            view.removeListener('did-finish-load', handleDidStopLoading);\n            view.removeListener('did-fail-load', handleDidFailLoad);\n        };\n    }, [dispatch, singleViewIdentity, layoutContainerKey]);\n}\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { Icon } from '@openfin/ui-library';\n\nimport { AttachedPageInternal } from '@common/api/pages/shapes';\n\nimport SpinnerSVG from '@enterprise/utils/SpinnerSVG';\n\nimport { selectPageTabState } from '@enterprise/slices/pages-loading';\n\nimport { LargeCustomIcon, PageIconContainer } from './styles';\nimport { usePageLoadingEvents } from './usePageLoadingEvents';\n\ninterface PageIconProps {\n    page: AttachedPageInternal;\n}\n\nconst SIZE = 16;\nconst THICKNESS = 1.25;\nexport const PageIcon: React.FC<PageIconProps> = ({ page }) => {\n    const iconUrl = page.pageIcon;\n    // Attach the event listeners for the page loading events\n    usePageLoadingEvents(page);\n\n    // Determine if this page is currently loading from the redux store\n    const pageState = useSelector(selectPageTabState(page.layoutContainerKey));\n\n    const isSingleView = page.attachedPageType === 'singleView';\n    const canShow = !!pageState?.canShow || iconUrl || page.attachedPageType === 'multiView';\n    const isNewTab = isSingleView && pageState?.currentView?.isNewTab;\n    const isLoading = isSingleView && pageState?.currentView?.isLoading;\n\n    const content: React.ReactNode = useMemo(() => {\n        if (isSingleView) {\n            if (iconUrl && !isLoading) {\n                return (\n                    <LargeCustomIcon applyThemeColor={false} iconURL={iconUrl} data-testid=\"pageIcon\" size=\"small\" />\n                );\n            }\n            return (\n                <StyledIcon\n                    icon=\"EnterpriseGlobeIcon\"\n                    $isLoading={isSingleView ? isLoading : false}\n                    data-testid=\"pageIcon\"\n                />\n            );\n        }\n        return <Icon icon=\"SupertabIcon\" data-testid=\"pageIcon\" />;\n    }, [iconUrl, isSingleView, isLoading]);\n\n    return (\n        <>\n            {canShow && !isNewTab && (\n                <PageIconContainer>\n                    <IconWrapper>\n                        {isSingleView && isLoading && (\n                            <SpinnerWrapper>\n                                <SpinnerSVG size={SIZE * 1.1} thickness={THICKNESS} />\n                            </SpinnerWrapper>\n                        )}\n                        {content}\n                    </IconWrapper>\n                </PageIconContainer>\n            )}\n        </>\n    );\n};\n\nconst IconWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n`;\n\nconst SpinnerWrapper = styled.div`\n    display: flex;\n    position: absolute;\n`;\n\nconst StyledIcon = styled(Icon)<{ $isLoading?: boolean }>`\n    ${({ $isLoading }) =>\n        $isLoading &&\n        `\n        width: 12px;\n        height: 12px;\n    `}\n`;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport type { OpenFin } from '@openfin/core';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { enterprisePageTestIds } from '@common/utils/test-ids';\n\nimport { useTranslation } from '@common/api/i18next';\nimport type { AttachedPageInternal } from '@common/api/pages/enterprise-shapes';\n\nimport { requestClosePage } from '@enterprise/api/controls';\n\nimport CloseButton from '@enterprise/components/ControlBar/Tablist/PageButton/CloseButton';\nimport PageButtonContainer from '@enterprise/components/ControlBar/Tablist/PageButton/PageButtonContainer';\nimport { EnterpriseTitleButton } from '@enterprise/components/ControlBar/Tablist/PageButton/styles';\nimport useSingleViewTitle from '@enterprise/components/ControlBar/Tablist/PageButton/useSingleViewTitle';\nimport TextSpan from '@enterprise/components/ControlBar/Tablist/TextSpan';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport useWindowFocusState, { useWithWindowStyleOverride } from '@common/hooks/useWindowFocusState';\nimport { useIsPageSingleView, useIsSingleViewLandingPageOrMultiViewPage } from '@enterprise/hooks/useSingleViewPage';\n\nimport { PageIcon } from './PageIcon';\n\ninterface Props {\n    page: AttachedPageInternal;\n    onClick: React.MouseEventHandler<HTMLDivElement>;\n    onDragStart?: React.DragEventHandler<HTMLDivElement>;\n    onDragEnd?: React.DragEventHandler<HTMLDivElement>;\n    onDragOver?: React.DragEventHandler<HTMLDivElement>;\n    onCloseClick: () => void;\n    dragDisabled?: boolean;\n    isBeingReordered?: boolean;\n    isDropRegion?: boolean;\n    colorChannel?: OpenFin.ContextGroupInfo;\n}\n\nconst PageButton = ({\n    page,\n    onClick,\n    onDragStart,\n    onDragEnd,\n    onCloseClick,\n    dragDisabled,\n    onDragOver,\n    isBeingReordered,\n    isDropRegion,\n    colorChannel\n}: Props): JSX.Element => {\n    const isEnterprise = true;\n    const { t } = useTranslation();\n\n    /* Styling */\n    const { isSchemeDark } = useSystemSchemeCheck();\n    const windowFocused = useWindowFocusState();\n\n    const [hover, setHover] = useState<boolean>(false);\n    const isSingleView = useIsPageSingleView(page.pageId);\n    const { isActive } = page;\n    const [condensedTabClassName, setCondensedTabClassName] = useState('');\n    const hideCloseButton = !isActive && !!condensedTabClassName;\n    const shouldHideBottomBorder = useIsSingleViewLandingPageOrMultiViewPage(page);\n\n    const pageTitle = useSingleViewTitle(page);\n\n    const pageButtonRef = useRef<HTMLDivElement>();\n\n    useEffect(() => {\n        const pageButton = pageButtonRef.current;\n        if (pageButton) {\n            const resizeObserver = new ResizeObserver(() => {\n                if (pageButton.offsetWidth === 40) {\n                    setCondensedTabClassName('page-tab-condensed-sm');\n                } else if (pageButton.offsetWidth < 60) {\n                    setCondensedTabClassName('page-tab-condensed-md');\n                } else if (pageButton.offsetWidth <= 72) {\n                    setCondensedTabClassName('page-tab-condensed-lg');\n                } else if (pageButton.offsetWidth > 72) {\n                    setCondensedTabClassName('');\n                }\n            });\n            resizeObserver.observe(pageButton);\n            return () => {\n                resizeObserver.unobserve(pageButton);\n            };\n        }\n    }, []);\n\n    const withWindowStyleOverride = useWithWindowStyleOverride();\n\n    const onContextMenuHandler = useCallback(\n        async (e: React.MouseEvent<HTMLDivElement>) => {\n            e.preventDefault();\n\n            const { clientX, clientY } = e;\n            withWindowStyleOverride('focused', async () => {\n                // eslint-disable-next-line no-underscore-dangle\n                await getCurrentSync().Browser.wrapSync(fin.me.identity)._openPageTabContextMenu({\n                    x: clientX,\n                    y: clientY,\n                    pageId: page.pageId,\n                    rect: pageButtonRef.current.getBoundingClientRect()\n                });\n            });\n        },\n        [withWindowStyleOverride]\n    );\n\n    const onAuxClick = async (e: React.MouseEvent<HTMLDivElement>) => {\n        if (e.button === 1) {\n            // Enterprise, middle button\n            requestClosePage({ pageId: page.pageId });\n        }\n    };\n\n    const onMouseOver = useCallback(() => {\n        setHover(true);\n    }, []);\n    const onMouseOut = useCallback(() => {\n        setHover(false);\n    }, []);\n\n    return (\n        <PageButtonContainer\n            className={condensedTabClassName}\n            id={page.pageId}\n            title={pageTitle}\n            data-testid={enterprisePageTestIds.pageTabButton}\n            aria-selected={isActive}\n            onAuxClick={onAuxClick}\n            draggable={true}\n            onClick={onClick}\n            onDragStart={onDragStart}\n            onDragOver={onDragOver}\n            onDragEnd={onDragEnd}\n            onMouseOver={onMouseOver}\n            onMouseLeave={onMouseOut}\n            onContextMenu={onContextMenuHandler}\n            dragDisabled={dragDisabled}\n            windowFocused={windowFocused}\n            isSchemeDark={isSchemeDark}\n            isActive={isActive}\n            pageHasUnsavedChanges={page.hasUnsavedChanges && !isSingleView}\n            isSingleView={isSingleView}\n            isDragging={isBeingReordered}\n            isDropRegion={isDropRegion}\n            shouldHideBottomBorder={shouldHideBottomBorder}\n            ref={pageButtonRef}\n        >\n            {colorChannel && <ContextGroupIndicator color={colorChannel.displayMetadata.color} />}\n            {/**\n             * TODO: WRK-5042\n             * There's a bug where creating a new tab, a page is created with a unique id, and no attachedPageType value.\n             * This page is then replaced with the actual tab and page id, and removed from state. However due to this issue,\n             * the undefined attachedPageType means we should not render the icon, as otherwise there could potentially be layout shift\n             * and an incorrect icon shown.\n             */}\n            {page.attachedPageType !== undefined && <PageIcon page={page} />}\n\n            <EnterpriseTitleButton\n                aria-label={t('aria.viewTab', {\n                    title: pageTitle\n                })}\n                blurredText={!isActive}\n                dragDisabled={dragDisabled}\n                role=\"tab\"\n            >\n                <PageTextSpan isActive={isActive}>{pageTitle}</PageTextSpan>\n            </EnterpriseTitleButton>\n\n            <CloseButton\n                data-testid={enterprisePageTestIds.pageTabCloseButton}\n                aria-label={t('aria.closePage', {\n                    title: pageTitle\n                })}\n                role=\"button\"\n                page={page}\n                options={page.closeButton}\n                onClick={(event) => {\n                    if (!hideCloseButton) {\n                        event.stopPropagation();\n                        onCloseClick();\n                    }\n                }}\n                parentHover={hover}\n                pageActive={isActive}\n                isEnterprise={isEnterprise}\n                isSchemeDark={isSchemeDark}\n                hideCloseButton={hideCloseButton}\n            />\n        </PageButtonContainer>\n    );\n};\n\n// PageButton styled-components\nconst PageTextSpan = styled(TextSpan)<{ isActive: boolean }>`\n    white-space: nowrap;\n    overflow: hidden;\n    opacity: ${({ isActive }) => (isActive ? '1' : '0.65')};\n`;\n\nconst ContextGroupIndicator = styled(Box)<{ color: string }>`\n    width: 4px;\n    height: 16px;\n    background: ${({ color }) => color};\n    border-radius: 2px;\n    flex: 0 0 auto;\n`;\n\nexport default PageButton;\n","import { Children, FC, useContext } from 'react';\n\nimport styled, { css } from 'styled-components';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\n\nimport { COMMAND_BAR_HEIGHT } from '../SearchMenu/utils';\n\n/**\n * Renders a drop indicator between pages at given index\n */\nconst WithDropIndicator: FC<{ indicatorPosition: number; shouldShowIndicator: boolean; children: React.ReactNode }> = ({\n    indicatorPosition,\n    children,\n    shouldShowIndicator\n}) => {\n    const { isEnterprise } = useContext(BrowserTypeContext);\n\n    const pageTabs = Children.toArray(children);\n    return (\n        <>\n            {pageTabs.flatMap((pageTab, i) => {\n                const isDropIndicatorAtEnd = i === pageTabs.length - 1;\n                const dropIndicator = (\n                    <DropIndicator isEnterprise={isEnterprise} shouldHideRightBorder={isDropIndicatorAtEnd} />\n                );\n\n                if (shouldShowIndicator) {\n                    if (indicatorPosition === i) {\n                        return [dropIndicator, pageTab];\n                    } else if (indicatorPosition === i + 1 && i === pageTabs.length - 1) {\n                        // show drop indicator after last tab\n                        return [pageTab, dropIndicator];\n                    }\n                }\n                return pageTab;\n            })}\n        </>\n    );\n};\n\nexport const DropIndicatorStyles = css<{ isEnterprise: boolean; shouldHideRightBorder?: boolean }>`\n    background-color: ${({ theme }) => css`rgb(from ${theme.palette.brandPrimary} r g b / 30%)`};\n    border: 1px solid ${({ theme }) => theme.palette.brandPrimary};\n    border-radius: ${({ theme }) => theme.radius.small};\n    min-width: 0;\n    width: 12px;\n    max-width: 12px;\n    padding: 0;\n    box-sizing: border-box;\n    position: relative;\n    overflow: visible;\n    margin: ${({ isEnterprise }) => isEnterprise && '2px 3px 0px 2px'};\n    height: ${({ isEnterprise, theme }) => (isEnterprise ? '36px' : theme.px.xxlarge)};\n    flex-shrink: 0;\n\n    * {\n        display: none;\n    }\n\n    ${({ theme, shouldHideRightBorder }) =>\n        css`\n            &::before,\n            &::after {\n                content: '';\n                position: absolute;\n                box-sizing: content-box;\n            }\n            &::before {\n                border-bottom: 1px solid ${theme.palette.background5};\n                height: ${COMMAND_BAR_HEIGHT}px;\n                width: 17px;\n                left: -3px;\n                bottom: -4px;\n            }\n            &::after {\n                display: ${shouldHideRightBorder && 'none'};\n                border-right: 1px solid ${theme.palette.background5};\n                height: ${COMMAND_BAR_HEIGHT}px;\n                right: -4px;\n                bottom: -3px;\n            }\n            &:last-child::after {\n                display: none;\n            }\n        `}\n`;\n\nconst DropIndicator = styled.div<{ isEnterprise: boolean; shouldHideRightBorder?: boolean }>`\n    ${DropIndicatorStyles}\n`;\n\nexport default WithDropIndicator;\n","import React, { forwardRef, useCallback, useContext, useEffect, useRef, useState, WheelEvent } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport type OpenFin from '@openfin/core';\n\nimport { Box, Icon, Mixins } from '@openfin/ui-library';\n\nimport { getLandingPageUrls, makeNewLandingPage } from '@common/utils/landing-page';\nimport { debouncedUpdatePageForViewCount, getLayoutWithSingleView, updatePageForViewCount } from '@common/utils/layout';\nimport {\n    decodeDragPayload,\n    encodeDragPayload,\n    getDragPayloadType,\n    getDragState,\n    getReorderedPages,\n    getViewTabPayload,\n    hideSingleView,\n    isSingleViewDrag,\n    isWithinParentBounds,\n    setDragState\n} from '@common/utils/page-drag';\nimport { enterprisePageTestIds } from '@common/utils/test-ids';\nimport { raiseBrowserAnalytics } from '@common/utils/usage-register';\nimport { currentOFIdentity } from '@common/utils/window';\n\nimport { useTranslation } from '@common/api/i18next';\nimport { makePage } from '@common/api/pages';\nimport type { AttachedPage, AttachedPageInternal, Page, ReparentAttachedPage } from '@common/api/pages/shapes';\n\nimport { ScreenReaderAnnouncement } from '@common/components/Accessibility/ScreenReaderAnnouncement';\nimport BaseButton from '@common/components/BaseButton/BaseButton';\nimport { scrollbarStyles, ScrollShadow } from '@common/components/Scroll/Scroll';\n\nimport { getPageWithLayout } from '@enterprise/api/pages/attached';\nimport { dispatch, getState } from '@enterprise/api/pages/state';\nimport {\n    selectActivePage,\n    selectIsActivePageChanging,\n    selectIsDetachingPages,\n    selectIsInitialized,\n    selectPages,\n    updatePageAtIndex\n} from '@enterprise/slices/pages/attached';\n\nimport { requestClosePage } from '@enterprise/api/controls';\n\nimport { selectSelectedViewsForPage } from '@enterprise/slices/tab-focus';\n\nimport { useManagePageViewCount } from '@enterprise/components/ControlBar/Tablist/useManagePageViewCount';\n\nimport { getCurrentSync } from '@client-platform/api';\nimport { BrowserWorkspacePlatformWindowOptions } from '@client-platform/shapes';\nimport { BrowserLayoutDragContext } from '@common/hooks/context';\nimport useWindowFocusState from '@common/hooks/useWindowFocusState';\nimport {\n    debouncedHandleAddressFocusOnLandingPage,\n    resetLastFocusedView\n} from '@enterprise/hooks/EnterpriseSearchMenu/useUpdateViewExpansionState';\nimport { useGetContextGroups } from '@enterprise/hooks/useGetContextGroups';\nimport { usePageDrag } from '@enterprise/hooks/usePageDrag';\nimport { usePageIcon } from '@enterprise/hooks/usePageIcon';\nimport { usePlatformOptionsChange } from '@enterprise/hooks/usePlatformOptionsChange';\nimport useWindowTitle from '@enterprise/hooks/useWindowTitle';\nimport { BrowserRootState } from '@enterprise/store';\n\nimport PageButton from './PageButton/PageButton';\nimport TextSpan from './TextSpan';\nimport { getNextActivePageOnRemoval } from './utils';\nimport WithDropIndicator, { DropIndicatorStyles } from './WithDropIndicator';\nconst SCROLL_SHADOW_OFFSET = 32;\n\nconst workspaceWindowOptsReducer = (state: any, newOpts: BrowserWorkspacePlatformWindowOptions) => {\n    return {\n        isLocked: !!newOpts?.isLocked,\n        preventPageDragIn: !!newOpts?.preventPageDragIn,\n        preventPageDragOut: !!newOpts?.preventPageDragOut,\n        preventPageDrag: !!newOpts?.preventPageDrag,\n        preventPageClose: !!newOpts?.preventPageClose,\n        disableMultiplePages: !!newOpts?.disableMultiplePages,\n        documentTitle: newOpts?.title || '',\n        isNewPageButtonEnabled: !!newOpts?.newPageUrl\n    };\n};\n\nconst Tablist = (): JSX.Element => {\n    const isEnterprise = true;\n    const { t } = useTranslation();\n\n    const windowFocused = useWindowFocusState();\n    const singlePageWindowTabTitle = useWindowTitle();\n\n    /* Pages */\n    const pages = useSelector(selectPages);\n    const isDetachingPages = useSelector(selectIsDetachingPages);\n    const isActivePageChanging = useSelector(selectIsActivePageChanging);\n    const activePage: AttachedPageInternal | undefined = useSelector(selectActivePage);\n\n    const focusedViewInActivePage = useSelector((state: BrowserRootState) =>\n        selectSelectedViewsForPage(state, activePage?.pageId)\n    ).at(0);\n    const focusedViewInActivePageName = focusedViewInActivePage?.name;\n\n    const isPagesInitialized = useSelector(selectIsInitialized);\n    const {\n        onPageDragOver,\n        dropIndicatorPosition,\n        isShowingDropIndicator,\n        setIsShowingDropIndicator,\n        hoveredPageIndex\n    } = usePageDrag(pages);\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const tabContainerRef = useRef<HTMLDivElement>(null);\n    const plusButtonBlock = React.useRef<boolean>(false);\n\n    /**\n     * When there are enough page tabs that the tab container becomes scrollable, render the scroll shadows.\n     */\n    const [shouldShowScrollShadows, setShouldShowScrollShadows] = useState<boolean>(false);\n    /**\n     * Keeps track of the current page, if any, is being dragged around.\n     * This will only be set if the drag is from our window, not for any in flight 'drag overs' from other windows.\n     */\n    const [currentDragPageId, setCurrentDragPageId] = React.useState<string | null>(null);\n    const [screenReaderAnnouncement, setScreenReaderAnnouncement] = useState<string>('');\n\n    const { setIsAcceptingLayoutDrag } = useContext(BrowserLayoutDragContext);\n\n    const [workspaceWindowOptions, dispatchWorkspaceWinOpts] = React.useReducer(workspaceWindowOptsReducer, {\n        isLocked: false,\n        preventPageDragIn: false,\n        preventPageDragOut: false,\n        preventPageDrag: false,\n        preventPageClose: false,\n        disableMultiplePages: false,\n        documentTitle: '',\n        isNewPageButtonEnabled: false\n    });\n\n    const updateTablistAttrs = useCallback(() => {\n        setShouldShowScrollShadows(tabContainerRef.current.clientWidth < tabContainerRef.current.scrollWidth);\n    }, []);\n\n    useEffect(() => {\n        window.addEventListener('resize', updateTablistAttrs);\n        return () => window.removeEventListener('resize', updateTablistAttrs);\n    }, [updateTablistAttrs]);\n\n    useEffect(() => {\n        updateTablistAttrs();\n    }, [pages.length, updateTablistAttrs]);\n\n    useEffect(() => {\n        document.getElementById(activePage.pageId)?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n        console.log(focusedViewInActivePage);\n        if (focusedViewInActivePage) {\n            debouncedHandleAddressFocusOnLandingPage({ viewIdentity: focusedViewInActivePage, type: 'view-focused' });\n        } else {\n            // Reset last focused view if there's a moment where there's no focused view in the active page.\n            // This allows us to re-evaluate focus when a focused view tab on the landing page gets torn\n            // out into a page level tab or a window (otherwise, address bar will be blurred).\n            resetLastFocusedView();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [focusedViewInActivePageName]);\n\n    const updatePageForViewCountListener = useCallback(async () => {\n        if (activePage && !isDetachingPages && !isActivePageChanging) {\n            await debouncedUpdatePageForViewCount(activePage);\n        }\n    }, [isDetachingPages, isActivePageChanging, activePage]);\n\n    const bringWindowToFront = async () => await fin.Window.getCurrentSync().bringToFront();\n\n    useManagePageViewCount(updatePageForViewCountListener, activePage, isEnterprise, isDetachingPages);\n\n    const onPageClickHandler = useCallback(\n        async (page: Page) => {\n            if (activePage?.pageId !== page.pageId) {\n                await getCurrentSync().Browser.wrapSync(currentOFIdentity).setActivePage(page.pageId);\n            }\n        },\n        [activePage]\n    );\n\n    /**\n     * This is a workaround to hide golden layouts drag indicators when dragging a view into a high level tab.\n     * This should only happen in the enterprise version.\n     */\n    const hideGoldenLayoutsDragIndicators = () => {\n        const goldenLayoutsTargetIndicator = document.getElementsByClassName('lm_dropTargetIndicator');\n        const goldenLayoutsTransitionIndicator = document.getElementsByClassName('lm_transition_indicator');\n        if (goldenLayoutsTargetIndicator) {\n            for (let i = 0; i < goldenLayoutsTargetIndicator.length; i++) {\n                goldenLayoutsTargetIndicator[i].setAttribute('style', '');\n            }\n        }\n        if (goldenLayoutsTransitionIndicator) {\n            for (let i = 0; i < goldenLayoutsTransitionIndicator.length; i++) {\n                goldenLayoutsTransitionIndicator[i].setAttribute('style', '');\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (currentDragPageId === activePage.pageId) {\n            setIsAcceptingLayoutDrag(false);\n        } else {\n            setIsAcceptingLayoutDrag(true);\n        }\n    }, [activePage?.pageId, currentDragPageId]);\n\n    const onPlusClickHandler = useCallback(async () => {\n        if (plusButtonBlock.current) return;\n\n        plusButtonBlock.current = true;\n        const newPage = await makeNewLandingPage();\n        const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n        const { newPageUrl } = await getLandingPageUrls();\n        // Ensure that actualNewPageUrl is undefined if newPageUrl is false\n        const actualNewPageUrl = newPageUrl ? newPageUrl : undefined;\n\n        try {\n            setScreenReaderAnnouncement(\n                `New tab ${newPage.title ? newPage.title : ''} added. The tab group now has ${pages.length + 1} tabs.`\n            );\n            // eslint-disable-next-line no-underscore-dangle\n            await browser._addDefaultPage({ identity: currentOFIdentity, page: newPage, newPageUrl: actualNewPageUrl });\n            raiseBrowserAnalytics({\n                type: 'Page Section',\n                action: 'Select New Page',\n                value: 'New Page',\n                skipValueHashing: true\n            });\n        } catch (error) {\n            console.error('Failed to add new page', error);\n        } finally {\n            // if page add has failed we still want to allow to add new pages.\n            plusButtonBlock.current = false;\n        }\n    }, [pages.length]);\n\n    const onPageDragStartHandler = useCallback(\n        async (event: React.DragEvent<HTMLDivElement>, page: Page) => {\n            if (workspaceWindowOptions.preventPageDrag) {\n                event.preventDefault();\n                return;\n            }\n\n            if (selectPages(getState()).length > 1 && !workspaceWindowOptions.preventPageDragOut) {\n                const original = event.target as HTMLElement;\n                const originalRect = original.getBoundingClientRect();\n\n                // Create a clone of the element\n                // This is used as the drag image\n                const clone = (event.target as HTMLElement).cloneNode(true) as HTMLElement;\n                clone.style.cssText = `\n                    position: absolute;\n                    top: -99999px; /* Hide the clone from the viewport */\n                    height: ${originalRect.height}px;\n                    width: ${originalRect.width}px;\n                `;\n                if (activePage.pageId !== page.pageId && original.scrollWidth > 72) {\n                    clone.classList.add('dragging-page-clone');\n                }\n                document.body.appendChild(clone);\n\n                // Use the clone as the drag image\n                event.dataTransfer.setDragImage(clone, 0, 0);\n                // Add a class to the original element to indicate it is being dragged\n                // Needed to add a delay to ensure the resize of the original element does not affect the drag operation\n                // Without it, if your mouse grabs the tab outside of the resized area, the item is dropped and the drag state is frozen\n\n                // Remove the clone from the document after the drag operation is complete\n                setTimeout(() => document.body.removeChild(clone), 0);\n            }\n\n            if (!workspaceWindowOptions.preventPageDragOut) {\n                event.dataTransfer.setData(\n                    getDragPayloadType(isEnterprise),\n                    JSON.stringify({ identity: fin.me.identity, id: page.pageId })\n                );\n            }\n\n            // Enterprise: Prepare single-view page for dragging into layout\n            if ('content' in page.layout.content[0] && page.layout.content.length === 1) {\n                const component = page.layout.content[0].content[0];\n                if (\n                    'componentState' in component &&\n                    'componentName' in component &&\n                    component.componentName === 'view'\n                ) {\n                    const viewOptions = component.componentState;\n                    const identityString = JSON.stringify([\n                        JSON.stringify(viewOptions),\n                        currentOFIdentity.uuid,\n                        viewOptions.name\n                    ]);\n                    event.dataTransfer.effectAllowed = 'linkMove';\n                    event.dataTransfer.setData('view-identity', identityString);\n\n                    const layoutSettings = page.layout.settings;\n                    const encodedJson = encodeDragPayload({\n                        sourceIdentity: { uuid: currentOFIdentity.uuid, name: viewOptions.name },\n                        settings: {\n                            preventDragOut: layoutSettings.preventDragOut || viewOptions.preventDragOut\n                        }\n                    });\n\n                    event.dataTransfer.setData(encodedJson, 'true');\n                }\n            }\n\n            // reset to reorder at the beginning of a drag\n            setDragState('reorder');\n            /**\n             * To accept layout drags when hovering over views, need to have views ignore mouse events.\n             * The events will instead be passed to parent window.\n             */\n            fin.me.wire.sendAction('set-ignore-all-view-mouse-events', {\n                enabled: true\n            });\n            // this hides the dragging element in the DOM, need to do this in a timeout otherwise drag operation will be stopped\n            setTimeout(() => {\n                setCurrentDragPageId(page.pageId);\n            }, 0);\n\n            event.dataTransfer.setData('of-drag-cursor-name', 'pointer');\n            raiseBrowserAnalytics({\n                type: 'Page Tab',\n                action: 'Drag Page',\n                value: page.title,\n                data: { uuid: page.pageId }\n            });\n        },\n        [\n            activePage?.pageId,\n            workspaceWindowOptions.preventPageDrag,\n            workspaceWindowOptions.preventPageDragOut,\n            isEnterprise\n        ]\n    );\n\n    const onDragEnterHandler = useCallback(\n        (event: React.DragEvent<HTMLDivElement>) => {\n            event.stopPropagation();\n            event.preventDefault();\n            bringWindowToFront();\n            let encodedDropType = undefined;\n            const viewTabPayload = event.dataTransfer.types.find((type) => type.startsWith('payload'));\n            const highLevelTabPayload = event.dataTransfer.types.find((type) =>\n                type.startsWith(getDragPayloadType(isEnterprise))\n            );\n            if (viewTabPayload) {\n                encodedDropType = decodeDragPayload(viewTabPayload);\n                hideGoldenLayoutsDragIndicators();\n            }\n\n            if (!workspaceWindowOptions.isLocked && (highLevelTabPayload || encodedDropType)) {\n                setIsShowingDropIndicator(true);\n                // a page from another window is being dragged\n                if (!currentDragPageId && !workspaceWindowOptions.preventPageDragIn) {\n                    setDragState('reparent');\n                } else if (currentDragPageId) {\n                    // dragging a page from current window\n                    setDragState('reorder');\n                }\n            }\n        },\n        [\n            workspaceWindowOptions.isLocked,\n            workspaceWindowOptions.preventPageDragIn,\n            isEnterprise,\n            setIsShowingDropIndicator,\n            currentDragPageId\n        ]\n    );\n\n    const onDragLeaveHandler = useCallback(\n        (event: React.DragEvent<HTMLDivElement>) => {\n            const isViewDrag = isSingleViewDrag(event);\n            const encodedDropType = event.dataTransfer.types.find((type) =>\n                type.startsWith(getDragPayloadType(isEnterprise))\n            );\n            if ((isViewDrag || encodedDropType) && !workspaceWindowOptions.isLocked) {\n                // dragleave will fire when dragging over child elements, need to filter out those events\n                const isActuallyLeaving = !containerRef.current.contains(event.relatedTarget as HTMLElement);\n                if (isActuallyLeaving) {\n                    if (isViewDrag) {\n                        // Is an enterprise drag that has only one View in it so can be dragged into gl container\n                        hideSingleView();\n                    }\n                    setIsShowingDropIndicator(false);\n                    if (encodedDropType) {\n                        // Is a page drag from enterprise (and not a view tab drag)\n                        setDragState('popout');\n                    }\n                }\n            }\n        },\n        [workspaceWindowOptions.isLocked, isEnterprise, setIsShowingDropIndicator]\n    );\n\n    const onDragOverHandler = useCallback(\n        (event: React.DragEvent<HTMLDivElement>) => {\n            event.stopPropagation();\n            event.preventDefault();\n        },\n        [workspaceWindowOptions.isLocked]\n    );\n\n    const onDragDropHandler = useCallback(\n        async (event: React.DragEvent<HTMLDivElement>) => {\n            if (!activePage) {\n                console.debug(`TabList::onDragDropHandler - activePage is undefined`);\n            }\n            // Don't stop propogation for Workspace SDK so Tablist doesn't break view drags\n            event.preventDefault();\n            event.stopPropagation();\n\n            setIsShowingDropIndicator(false);\n            if (workspaceWindowOptions.preventPageDragIn || workspaceWindowOptions.isLocked) {\n                return;\n            }\n            const viewOptionsFromDrag = getViewTabPayload(event);\n            if (currentDragPageId && dropIndicatorPosition !== null) {\n                // Reordering a page within current window\n                const items = getReorderedPages(pages, currentDragPageId, dropIndicatorPosition);\n                await handleSortableSetList(items.map((item) => ({ id: item })));\n                getCurrentSync().Browser.wrapSync(currentOFIdentity).setActivePage(currentDragPageId);\n                setCurrentDragPageId(null);\n                return;\n            }\n\n            const isPageDropType = event.dataTransfer.types.find((type) =>\n                type.startsWith(getDragPayloadType(isEnterprise))\n            );\n            if (isPageDropType && !currentDragPageId) {\n                // dropping a page from a different window\n                const { id } = JSON.parse(event.dataTransfer.getData(getDragPayloadType(isEnterprise)));\n\n                const currentBw = getCurrentSync().Browser.wrapSync(fin.me.identity);\n                // eslint-disable-next-line no-underscore-dangle\n                await currentBw._reparentPage({ pageId: id, index: dropIndicatorPosition });\n                await currentBw.setActivePage(id);\n                return;\n            }\n\n            // Dropping a view or a single view page tab into the tablist\n            if (viewOptionsFromDrag) {\n                if (dropIndicatorPosition === null && hoveredPageIndex !== null) {\n                    // dropIndicatorPosition and hoveredPageIndex are null, so we're dropping a view on a page tab to auto-layout\n                    const targetPage = pages[hoveredPageIndex];\n                    const targetLayout = fin.Platform.Layout.wrapSync({\n                        ...currentOFIdentity,\n                        layoutName: targetPage.layoutContainerKey\n                    });\n                    await getCurrentSync().Browser.wrapSync(currentOFIdentity).setActivePage(targetPage.pageId);\n                    const root = await targetLayout.getRootItem();\n                    await root.createAdjacentStack([viewOptionsFromDrag], { position: 'right' });\n\n                    if (targetPage.pageId !== activePage.pageId) {\n                        // If targetPage and activePage are the same, updatePageForViewCountListener will handle this update\n                        // Update activePage before targetPage so that activePage can give up its default name before targetPage gets one\n                        await updatePageForViewCount(activePage);\n                        await updatePageForViewCount(targetPage);\n                    }\n                } else {\n                    // dropIndicatorPosition is a real index, so we are creating a page at that index\n                    const view = await fin.View.wrap({\n                        uuid: viewOptionsFromDrag.uuid,\n                        name: viewOptionsFromDrag.name\n                    });\n                    const viewInfo = await view.getInfo();\n                    const updatedViewOptions = {\n                        ...viewOptionsFromDrag,\n                        url: viewInfo.url,\n                        title: viewInfo.title\n                    };\n                    const config = await getLayoutWithSingleView(\n                        updatedViewOptions.title,\n                        updatedViewOptions.url,\n                        currentOFIdentity\n                    );\n                    config.content[0].content[0].componentState = updatedViewOptions;\n\n                    // Do not assign the new page a title, as the tab will automatically use the view title\n                    const newPage = await makePage(null, config);\n                    const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n                    // eslint-disable-next-line no-underscore-dangle\n                    await browser._addPage(newPage, {\n                        index: dropIndicatorPosition,\n                        multiInstanceViewBehavior: 'reparent'\n                    });\n\n                    // Update the page icon for the new page\n                    const updatedPages = selectPages(getState());\n                    const matchIndex = updatedPages.findIndex((page) => page?.pageId === newPage.pageId);\n                    if (matchIndex !== -1) {\n                        dispatch(\n                            updatePageAtIndex({\n                                index: matchIndex,\n                                page: { ...updatedPages[matchIndex], pageIcon: viewInfo.favicons[0] }\n                            })\n                        );\n                    }\n\n                    if (activePage) {\n                        await updatePageForViewCount(activePage);\n                    }\n                }\n            }\n        },\n        [\n            workspaceWindowOptions.isLocked,\n            workspaceWindowOptions.preventPageDragIn,\n            isEnterprise,\n            dropIndicatorPosition,\n            hoveredPageIndex,\n            setIsShowingDropIndicator,\n            activePage,\n            currentDragPageId\n        ]\n    );\n\n    const onPageDragEndHandler = useCallback(\n        async (event: DragEvent) => {\n            // This needs to be done before anything else to ensure views can receive mouse events if code below errors for some reason\n            await fin.me.wire.sendAction('set-ignore-all-view-mouse-events', {\n                enabled: false\n            });\n            const draggedPageId = currentDragPageId;\n            // Reset these as a safety measure at the end of any page drag\n            setCurrentDragPageId(null);\n            setIsShowingDropIndicator(false);\n\n            const browser = getCurrentSync().Browser.wrapSync(currentOFIdentity);\n            const isOnlyPage = pages.length === 1;\n            const isReparenting = getDragState() === 'reparent';\n            const isWithinTablist = isWithinParentBounds(event, containerRef.current?.getBoundingClientRect());\n            const isReordering = getDragState() === 'reorder' && isWithinTablist;\n\n            const draggedPage = await getPageWithLayout(draggedPageId);\n            const draggedPageIndex = pages.findIndex((page) => page.pageId === draggedPage?.pageId);\n            const isLayoutCreated = draggedPage?.isLayoutCreated;\n\n            // Enterprise: Detect if page is creating or dropping into existing multi-view layout\n            const isDraggingIntoLayout =\n                event.dataTransfer.dropEffect === 'move' && event.dataTransfer.effectAllowed === 'linkMove';\n\n            if (\n                (workspaceWindowOptions.preventPageDragOut && !isOnlyPage) ||\n                !draggedPageId ||\n                isReparenting ||\n                isReordering ||\n                isDraggingIntoLayout\n            ) {\n                await updatePageForViewCountListener();\n\n                // draggedPage may be null if page is already removed through layout override method\n                if (!isLayoutCreated && !isReordering && draggedPage) {\n                    await browser.removePage(draggedPage.pageId);\n                }\n                return;\n            }\n\n            // elementOffset is used to find the middle of the dragged page button\n            const target = event.target as EventTarget & { offsetWidth?: number; offsetHeight: number };\n            const elementOffsetX = target?.offsetWidth || 0;\n            const elementOffsetY = target?.offsetHeight || 0;\n\n            if (isOnlyPage) {\n                // Edge case in window with only two page tabs\n                // Don't move when dragging out inactive tab into another window's layout\n                if (activePage.pageId === draggedPageId) {\n                    // If it is the last page, rather than destroy and re-create a window - move it\n                    const moveX = Math.floor(event.offsetX - elementOffsetX / 2);\n                    const moveY = Math.floor(event.offsetY - elementOffsetY / 2);\n                    (fin.me as OpenFin.Window).moveBy(moveX, moveY);\n                }\n            } else {\n                const defaultTop = Math.floor(event.screenY - elementOffsetY / 2);\n                const defaultLeft = Math.floor(event.screenX - elementOffsetX / 2);\n\n                // If page we drag out is active, need to switch to another page to hide layout destruction from user\n                if (draggedPage.isActive) {\n                    const remainingPages = pages.filter((attachedPage) => attachedPage.pageId !== draggedPage.pageId);\n                    const nextActivePage = getNextActivePageOnRemoval(draggedPageIndex, remainingPages);\n                    await browser.setActivePage(nextActivePage.pageId);\n                }\n\n                await getCurrentSync().Browser.createWindow({\n                    workspacePlatform: {\n                        pages: [{ ...draggedPage, multiInstanceViewBehavior: 'reparent' } as ReparentAttachedPage],\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        windowType: 'enterprise'\n                    },\n                    defaultLeft,\n                    defaultTop,\n                    x: defaultLeft,\n                    y: defaultTop,\n                    reason: isLayoutCreated ? 'tearout' : undefined\n                });\n                if (!isLayoutCreated) {\n                    await browser.removePage(draggedPage.pageId);\n                }\n            }\n        },\n        [\n            activePage?.pageId,\n            workspaceWindowOptions.preventPageDragOut,\n            setIsShowingDropIndicator,\n            updatePageForViewCountListener,\n            currentDragPageId,\n            pages\n        ]\n    );\n\n    const handleSortableSetList = useCallback(\n        async (items: { id: string }[]) => {\n            // The event is fired even when clicking from one page to another,\n            // We only care about changes in order\n            const didOrderingChange = () => {\n                return items.some(({ id }, index) => id !== pages[index]?.pageId);\n            };\n            if (!isPagesInitialized || !didOrderingChange()) return;\n            await getCurrentSync()\n                .Browser.wrapSync(currentOFIdentity)\n                .reorderPages({ pageIds: items.map(({ id }) => id) });\n        },\n        [isPagesInitialized, pages]\n    );\n\n    const handleTabContainerScroll = (event: WheelEvent<HTMLDivElement>) => {\n        const { deltaX, deltaY } = event;\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\n            event.currentTarget.scrollLeft += deltaY - deltaX;\n        }\n    };\n\n    const onWorkspaceWinOptionsReceived = useCallback((workspacePlatform: BrowserWorkspacePlatformWindowOptions) => {\n        dispatchWorkspaceWinOpts(workspacePlatform);\n    }, []);\n\n    usePlatformOptionsChange(onWorkspaceWinOptionsReceived, onWorkspaceWinOptionsReceived);\n\n    const processPageGivenWindowOptions = useCallback(\n        (page: AttachedPage): AttachedPage => {\n            return workspaceWindowOptions.preventPageClose || workspaceWindowOptions.isLocked\n                ? {\n                      ...page,\n                      closeButton: {\n                          hidden: true\n                      }\n                  }\n                : page;\n        },\n        [workspaceWindowOptions.preventPageClose, workspaceWindowOptions.isLocked]\n    );\n\n    const contextGroups = useGetContextGroups();\n    usePageIcon();\n\n    return !workspaceWindowOptions.disableMultiplePages ? (\n        <Container\n            ref={containerRef}\n            onDrop={onDragDropHandler}\n            onDragEnter={onDragEnterHandler}\n            onDragLeave={onDragLeaveHandler}\n            onDragOver={onDragOverHandler}\n            isEnterprise={isEnterprise}\n        >\n            <ScreenReaderAnnouncement message={screenReaderAnnouncement} />\n\n            <TabContainer\n                ref={tabContainerRef}\n                isEnterprise={isEnterprise}\n                onWheel={handleTabContainerScroll}\n                aria-label={t('aria.browserTabs')}\n                role=\"tablist\"\n                data-testid={enterprisePageTestIds.tabContainer}\n            >\n                {shouldShowScrollShadows && <ScrollShadow shadowWidth=\"small\" />}\n                <WithDropIndicator\n                    indicatorPosition={dropIndicatorPosition}\n                    shouldShowIndicator={isShowingDropIndicator}\n                >\n                    {pages.map((page, index) => (\n                        <PageButton\n                            page={processPageGivenWindowOptions(page)}\n                            key={page.pageId}\n                            onClick={() => onPageClickHandler(page)}\n                            onDragStart={(event) => onPageDragStartHandler(event, page)}\n                            onDragEnd={(event) => onPageDragEndHandler(event.nativeEvent)}\n                            onCloseClick={() => requestClosePage({ pageId: page.pageId })}\n                            dragDisabled={workspaceWindowOptions.isLocked || workspaceWindowOptions.preventPageDrag}\n                            onDragOver={(event) => onPageDragOver(event, page)}\n                            isBeingReordered={currentDragPageId === page.pageId && pages.length > 1}\n                            isDropRegion={isShowingDropIndicator && hoveredPageIndex === index}\n                            colorChannel={\n                                page.contextGroup && contextGroups.find((group) => group.id === page.contextGroup)\n                            }\n                        />\n                    ))}\n                </WithDropIndicator>\n                {shouldShowScrollShadows && <ScrollShadow shadowWidth=\"small\" offset={SCROLL_SHADOW_OFFSET} right />}\n            </TabContainer>\n            {!workspaceWindowOptions.isLocked &&\n                workspaceWindowOptions.isNewPageButtonEnabled &&\n                isPagesInitialized && (\n                    <PlusButtonContainer windowFocused={windowFocused}>\n                        <BaseButton\n                            title={t('enterpriseContextMenu.newTab')}\n                            onClick={onPlusClickHandler}\n                            className={'plusButtonOB1'}\n                            data-testid={enterprisePageTestIds.newPageButton}\n                            width={24}\n                            height={24}\n                            isEnterprise={isEnterprise}\n                        >\n                            <Icon icon=\"PlusIcon\" />\n                        </BaseButton>\n                    </PlusButtonContainer>\n                )}\n        </Container>\n    ) : (\n        <Container isEnterprise={isEnterprise}>\n            <TabContainer isEnterprise={isEnterprise}>\n                <TextContainer isActive={false}>\n                    <TextSpan>{singlePageWindowTabTitle}</TextSpan>\n                </TextContainer>\n            </TabContainer>\n        </Container>\n    );\n};\n\nconst Container = forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement> & {\n        isEnterprise: boolean;\n        ref?: React.MutableRefObject<HTMLDivElement>;\n    }\n>(({ isEnterprise, ...props }, ref) => {\n    const Component = EnterpriseContainer;\n    return <Component ref={ref} {...props} />;\n});\n\nContainer.displayName = 'Container';\n\nconst BaseContainer = styled(Box)`\n    -webkit-app-region: no-drag;\n    user-select: auto;\n    display: inline-flex;\n    overflow: hidden;\n    position: relative;\n\n    .plusButton {\n        flex-shrink: 0;\n    }\n`;\n\nconst EnterpriseContainer = styled(BaseContainer)`\n    align-items: center;\n\n    .plusButton {\n        width: ${({ theme }) => theme.px.xxlarge};\n\n        /// special casing?? yes or no ask product....\n        height: 100%;\n        margin-left: 0px;\n        padding-left: ${({ theme }) => theme.px.xsmall};\n        border-bottom: 1px solid ${({ theme }) => theme.palette.background5};\n\n        &:hover {\n            cursor: pointer;\n            background-color: ${({ theme }) => theme.palette.background4};\n            border-radius: ${({ theme }) => theme.px.xsmall};\n        }\n    }\n\n    .plusButtonOB1 {\n        border-top: rgba(255, 255, 255, 0.1);\n        border-bottom: rgba(255, 255, 255, 0.26);\n\n        svg {\n            height: 16px;\n            width: 16px;\n        }\n    }\n`;\n\nconst DROP_INDICATOR_CLASS = 'dropzone';\n\nconst TabContainer = styled(Box).attrs((_props) => ({ role: 'tablist' }))`\n    ${Mixins.scrollbar.small}\n    overflow: auto;\n    padding: 0px;\n    height: 100%;\n    gap: 0px;\n\n    /* Defining scroll-timeline name for scroll shadow animation */\n    ${() => scrollbarStyles({ scrollbarSize: '0px' })}\n\n    // Override the dragging item to be a dropzone\n\n    .${DROP_INDICATOR_CLASS} {\n        ${DropIndicatorStyles}\n    }\n`;\n\nconst PlusButtonContainer = styled.div<{ windowFocused: boolean }>`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    padding-left: 8px;\n    width: ${({ theme }) => theme.px.xxxlarge};\n    height: 100%;\n    border-bottom: 1px solid ${({ theme }) => theme.palette.background5};\n\n    button {\n        opacity: ${({ windowFocused }) => !windowFocused && '0.5'};\n\n        &:active {\n            background: ${({ theme }) => theme.palette.background4};\n        }\n    }\n`;\n\nconst TextContainer = styled.div<{ isActive: boolean }>`\n    align-items: center;\n    border: 0;\n    border-radius: ${({ theme }) => theme.radius.small};\n    box-sizing: border-box;\n    display: flex;\n    flex-shrink: 0;\n    max-height: 100%;\n    -webkit-app-region: drag;\n`;\n\nexport default Tablist;\n","import React, { FC, useContext } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled, { css } from 'styled-components';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport { selectActivePage } from '@enterprise/slices/pages/attached';\n\nimport { selectLayoutsWithSelectedViews } from '@enterprise/slices/tab-focus';\n\nimport useSystemSchemeCheck from '@common/hooks/useSystemSchemeCheck';\nimport { MAC_WINDOW_BORDER_RADIUS } from '@common/mixins/padding-border';\nimport { WindowSearchMenuContext } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\n\nimport NavigationContainer from './LeftControlsContainer/EnterpriseNavigationContainer/EnterpriseNavigationContainer';\nimport RightControlsContainer from './RightControlsContainer/RightControlsContainer';\nimport WindowStateContainer from './RightControlsContainer/WindowStateContainer/WindowStateContainer';\nimport Tablist from './Tablist/Tablist';\nimport { CONTROL_BAR_HEIGHT } from './utils';\n\n/**\n * Top level container component for the browsers control surface.\n *\n * Contains the primary drag region, and navigation buttons container.\n */\nconst ControlBar: FC = () => {\n    const activePage = useSelector(selectActivePage);\n    const layoutsWithSelectedViews = useSelector(selectLayoutsWithSelectedViews);\n    const selectedViews = layoutsWithSelectedViews[activePage.layoutContainerKey];\n    const isWindows = useSelector(selectIsWindows);\n    const { isSchemeDark } = useSystemSchemeCheck();\n\n    const { shouldExpandMenu } = useContext(WindowSearchMenuContext);\n    const isDragRegion = !shouldExpandMenu.shouldExpand;\n\n    const onAuxClick = async (e: React.MouseEvent<HTMLDivElement>) => {\n        if (e.button === 3) {\n            if (selectedViews.length > 0) {\n                const view = await fin.View.wrap(selectedViews[0]);\n                view.navigateBack();\n            }\n        } else if (e.button === 4) {\n            if (selectedViews.length > 0) {\n                const view = await fin.View.wrap(selectedViews[0]);\n                view.navigateForward();\n            }\n        }\n    };\n\n    return (\n        <Container\n            onAuxClick={onAuxClick}\n            isSchemeDark={isSchemeDark}\n            isWindows={isWindows}\n            isDragRegion={isDragRegion}\n        >\n            {/* Window state buttons on top-left on Enterprise for Mac */}\n            {!isWindows && <WindowStateContainer />}\n            <NavigationContainer />\n            <Tablist />\n            <DragRegion />\n            <RightControlsContainer />\n        </Container>\n    );\n};\n\nexport default ControlBar;\n\nconst Container = styled.div<{ height?: string; isSchemeDark: boolean; isWindows: boolean; isDragRegion: boolean }>`\n    -webkit-app-region: ${({ isDragRegion }) => isDragRegion && 'drag'};\n    user-select: none;\n    background-color: ${({ theme, isSchemeDark }) =>\n        isSchemeDark ? theme.palette.background1 : theme.palette.background2};\n    display: flex;\n\n    height: ${CONTROL_BAR_HEIGHT + 1}px;\n\n    ${({ isWindows }) =>\n        !isWindows &&\n        css`\n            border-top-left-radius: ${MAC_WINDOW_BORDER_RADIUS};\n            border-top-right-radius: ${MAC_WINDOW_BORDER_RADIUS};\n        `}\n`;\n\nconst DragRegion = styled.div`\n    user-select: none;\n    flex: 1;\n    padding-left: 2px;\n    min-width: 20px;\n    border-bottom: ${({ theme }) => `1px solid ${theme.palette.background5}`};\n`;\n","import { useCallback, useEffect } from 'react';\n\nimport { OpenFin } from '@openfin/core';\n\nimport { WindowName } from '@common/utils/window';\n\n/**\n * Removes a view from the interop context group 'CONTEXT_GROUP_PAGE' when it is detached.\n *\n */\nexport const useDetachViewsFromInteropContextGroups = () => {\n    const handleViewDetached = useCallback(\n        async (event: Extract<OpenFin.WindowEvents.Event, { type: 'view-detached' }>) => {\n            if (event.viewIdentity.name.startsWith(WindowName.BrowserAddressSearchPrefix)) return;\n\n            console.log('view-detached', event);\n            if (event.target) {\n                fin.me.interop.removeFromContextGroup(event.viewIdentity);\n            }\n        },\n        []\n    );\n\n    useEffect(() => {\n        (fin.me as OpenFin.Window).addListener('view-detached', handleViewDetached);\n        return () => {\n            (fin.me as OpenFin.Window).removeListener('view-detached', handleViewDetached);\n        };\n    }, [handleViewDetached]);\n};\n","import { useEffect } from 'react';\n\nimport useWindowTitle from './useWindowTitle';\n\nexport default function useDocumentTitle() {\n    const windowTitle = useWindowTitle();\n    useEffect(() => {\n        if (windowTitle) {\n            document.title = windowTitle;\n        }\n    }, [windowTitle]);\n}\n","import { useContext } from 'react';\n\nimport Route from '@common/utils/route';\nimport { WindowName } from '@common/utils/window';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\nimport usePreloadedWindow from '@common/hooks/usePreloadedWindow';\n\nexport const useDropdownMenuWindow = () =>\n    usePreloadedWindow({\n        windowName: WindowName.DropdownMenu,\n        route: Route.DropdownMenu,\n        shouldPreload: useContext(BrowserTypeContext).isEnterprise,\n        windowCreationOptions: {\n            defaultWidth: 10,\n            defaultHeight: 10\n        }\n    });\n\nexport default useDropdownMenuWindow;\n","import { useContext } from 'react';\n\nimport Route from '@common/utils/route';\nimport { WindowName } from '@common/utils/window';\n\nimport { BrowserTypeContext } from '@common/hooks/context';\nimport usePreloadedWindow from '@common/hooks/usePreloadedWindow';\n\nexport const useIntentsModalMenuWindow = () =>\n    usePreloadedWindow({\n        windowName: WindowName.IntentsResolverModal,\n        route: Route.IntentsResolverModal,\n        shouldPreload: useContext(BrowserTypeContext).isEnterprise,\n        windowCreationOptions: {\n            defaultWidth: 10,\n            defaultHeight: 10\n        }\n    });\n\nexport default useIntentsModalMenuWindow;\n","import { useEffect, useState } from 'react';\n\nimport type { BrowserWorkspacePlatformWindowOptions } from '@client-platform/index';\nimport { type ThemedTaskbarIconProps, useUpdateTaskbarIcon } from '@common/hooks/useUpdateTaskbarIcon';\n\nexport const useBrowserTaskbarIcon = () => {\n    const [taskbarIcon, setTaskbarIcon] = useState<ThemedTaskbarIconProps | undefined>(undefined);\n\n    useEffect(() => {\n        fin.Window.getCurrentSync()\n            .getOptions()\n            .then((options) => {\n                const icon = (options.workspacePlatform as BrowserWorkspacePlatformWindowOptions)?.icon;\n                const lightIcon = typeof icon === 'object' ? icon.light : icon || options.icon;\n                const darkIcon = typeof icon === 'object' ? icon.dark : icon || options.icon;\n                // ensure that a non-empty string is passed into `useUpdateTaskbarIcon`\n                // if an empty string is passed, the taskbar icon will be likely fallback to the window's favicon\n                if (lightIcon || darkIcon) {\n                    setTaskbarIcon({\n                        light: lightIcon || darkIcon,\n                        dark: darkIcon || lightIcon,\n                        custom: true\n                    });\n                }\n            });\n    }, []);\n\n    useUpdateTaskbarIcon(taskbarIcon);\n};\n","import { DragEventHandler } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport { Box } from '@openfin/ui-library';\n\nimport { updateActivePage } from '@common/utils/snapshot';\n\nimport { selectIsWindows } from '@common/slices/environment';\n\nimport ContentContainer from '@enterprise/components/ContentContainer/ContentContainer';\nimport ControlBar from '@enterprise/components/ControlBar/ControlBar';\nimport { PaddingBorderMixin } from '@enterprise/components/mixins/padding-border';\n\nimport { WindowStateProvider } from '@common/hooks/useWindowFocusState';\nimport { BookmarksContextProvider } from '@enterprise/context/BookmarksContext';\nimport { WindowSearchMenuContextProvider } from '@enterprise/context/SearchMenu/WindowSearchMenuContext';\nimport { SidePanelContextProvider } from '@enterprise/context/SidePanelContext';\nimport { useCallbackOnAPIReady } from '@enterprise/hooks/useCallbackOnAPIReady';\nimport { useDetachViewsFromInteropContextGroups } from '@enterprise/hooks/useDetachViewsFromInteropContextGroups';\nimport useDocumentTitle from '@enterprise/hooks/useDocumentTitle';\nimport useDropdownMenuWindow from '@enterprise/hooks/useDropdownMenuWindow';\nimport useEnterpriseContextMenu from '@enterprise/hooks/useEnterpriseContextMenu';\nimport useIntentsModalMenuWindow from '@enterprise/hooks/useIntentsModalMenuWindow';\n\nimport { useBrowserTaskbarIcon } from '../hooks/useBrowserTaskbarIcon';\n\nfunction BrowserPage() {\n    useDocumentTitle();\n    useEnterpriseContextMenu();\n    useBrowserTaskbarIcon();\n    useIntentsModalMenuWindow();\n    useDropdownMenuWindow();\n    useDetachViewsFromInteropContextGroups();\n\n    const isWindows = useSelector(selectIsWindows);\n\n    useCallbackOnAPIReady(async () => {\n        const updatedOptions = updateActivePage(await fin.Window.getCurrentSync().getOptions());\n        console.log('updatedOptions', updatedOptions);\n        await fin.Window.getCurrentSync().updateOptions(updatedOptions);\n        fin.me.reload();\n    });\n    const onDragEnter = () => fin.Window.getCurrentSync().bringToFront();\n\n    const onDropHandler: DragEventHandler<HTMLDivElement> = async (e) => {\n        e.preventDefault();\n        // find and remove dropzone class\n        const dropzone = document.querySelector('.dropzone');\n        if (dropzone) {\n            dropzone.classList.remove('dropzone');\n        }\n    };\n\n    return (\n        <Container flexDirection=\"column\" onDragEnter={onDragEnter} onDropCapture={onDropHandler} isMac={!isWindows}>\n            <WindowStateProvider>\n                <SidePanelContextProvider>\n                    <BookmarksContextProvider>\n                        <WindowSearchMenuContextProvider>\n                            <ControlBar />\n                            <ContentContainer />\n                        </WindowSearchMenuContextProvider>\n                    </BookmarksContextProvider>\n                </SidePanelContextProvider>\n            </WindowStateProvider>\n        </Container>\n    );\n}\n\nexport default BrowserPage;\n\nconst Container = styled(Box)<{ isMac: boolean }>`\n    height: 100vh;\n    width: 100%;\n    font-family: ${({ theme }) => theme.fontFamily};\n\n    * {\n        font-family: ${({ theme }) => theme.fontFamily};\n    }\n\n    ${({ theme }) => {\n        return PaddingBorderMixin({ size: 1, borderColor: theme.palette.background5 });\n    }}\n`;\n","import styled from 'styled-components';\n\nexport const ThemedSVG = styled.svg`\n    path {\n        fill: ${({ theme }) => theme.palette.textDefault};\n    }\n`;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\ninterface SpinnerSVGProps {\n    size?: number;\n    thickness?: number;\n}\n\nconst StyledSVG = styled.svg<SpinnerSVGProps>`\n    width: ${({ size }) => size || 16}px;\n    height: ${({ size }) => size || 16}px;\n    stroke: ${({ theme }) => theme.palette.textHelp};\n`;\n\nconst SpinnerSVG: React.FC<SpinnerSVGProps> = ({ size = 16, thickness = 1.5 }) => (\n    <StyledSVG size={size} strokeWidth={thickness} viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <style>\n            {`\n                .spinnerRotation {\n                    transform-origin: center;\n                    animation: rotateSpinner 2s linear infinite;\n                }\n                .spinnerRotation circle {\n                    stroke-linecap: round;\n                    stroke-width: ${thickness};\n                    animation: animateStroke 1.5s ease-in-out infinite;\n                }\n                @keyframes rotateSpinner {\n                    100% {\n                        transform: rotate(360deg);\n                    }\n                }\n                @keyframes animateStroke {\n                    0% {\n                        stroke-dasharray: 0 150;\n                        stroke-dashoffset: 0;\n                    }\n                    47.5% {\n                        stroke-dasharray: 42 150;\n                        stroke-dashoffset: -16;\n                    }\n                    95%, 100% {\n                        stroke-dasharray: 42 150;\n                        stroke-dashoffset: -59;\n                    }\n                }\n            `}\n        </style>\n        <g className=\"spinnerRotation\">\n            <circle cx=\"12\" cy=\"12\" r=\"9.5\" fill=\"none\"></circle>\n        </g>\n    </StyledSVG>\n);\n\nexport default SpinnerSVG;\n","import { OpenFin } from '@openfin/core';\n\nexport const ZoomUtils = {\n    // Converts a zoom percentage (e.g., 125) to a Chromium/Here zoom level (e.g., ~0.73).\n    percentToLevel(percent: number) {\n        try {\n            const p = Math.log(percent / 100) / Math.log(1.2);\n            // Round to two decimal places\n            return Math.round(p * 100) / 100;\n        } catch (e) {\n            console.error('Error converting percent to level:', e);\n            // Default to 0 if there's an error\n            return 0;\n        }\n    },\n    // Converts a Chromium/Here zoom level (e.g., 1) to a zoom percentage (e.g., 120).\n    levelToPercent(level: number) {\n        try {\n            const l = Math.pow(1.2, level);\n            // Round to the nearest whole number\n            return Math.round(l * 100);\n        } catch (e) {\n            console.error('Error converting level to percent:', e);\n            // Default to 100% if there's an error\n            return 100;\n        }\n    }\n};\n\nconst ZOOM_CONTROLS_MAP = [25, 33, 50, 67, 75, 80, 90, 100, 110, 125, 150, 175, 200, 250, 300, 400, 500];\nconst MAX_ZOOM = ZOOM_CONTROLS_MAP[ZOOM_CONTROLS_MAP.length - 1];\nconst MIN_ZOOM = ZOOM_CONTROLS_MAP[0];\n\nexport async function zoomViewIn(view: OpenFin.View) {\n    const currentZoom = ZoomUtils.levelToPercent(await view.getZoomLevel());\n\n    if (currentZoom >= MAX_ZOOM) {\n        return currentZoom;\n    }\n\n    const index = ZOOM_CONTROLS_MAP.indexOf(currentZoom);\n    let nextZoomLevel: number;\n\n    if (index === -1) {\n        // if current zoom isnt in our interal list, find nearest zoom level\n        nextZoomLevel = ZOOM_CONTROLS_MAP.find((zoom) => zoom > currentZoom);\n    } else {\n        nextZoomLevel = ZOOM_CONTROLS_MAP[index + 1];\n    }\n\n    await view.setZoomLevel(ZoomUtils.percentToLevel(nextZoomLevel));\n    return nextZoomLevel;\n}\n\nexport async function zoomViewOut(view: OpenFin.View) {\n    const currentZoom = ZoomUtils.levelToPercent(await view.getZoomLevel());\n\n    if (currentZoom <= MIN_ZOOM) {\n        return currentZoom;\n    }\n\n    const index = ZOOM_CONTROLS_MAP.indexOf(currentZoom);\n    let nextZoomLevel: number;\n\n    if (index === -1) {\n        for (let i = ZOOM_CONTROLS_MAP.length - 1; i >= 0; i--) {\n            if (ZOOM_CONTROLS_MAP[i] < currentZoom) {\n                nextZoomLevel = ZOOM_CONTROLS_MAP[i];\n                break;\n            }\n        }\n    } else {\n        nextZoomLevel = ZOOM_CONTROLS_MAP[index - 1];\n    }\n\n    await view.setZoomLevel(ZoomUtils.percentToLevel(nextZoomLevel));\n    return nextZoomLevel;\n}\n\nexport async function resetViewZoom(view: OpenFin.View) {\n    await view.setZoomLevel(ZoomUtils.percentToLevel(100));\n}\n"],"names":["window","__NEXT_P","push","__webpack_require__","ScreenReaderAnnouncement","message","ariaAttributes","ariaRole","param","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","div","aria-live","aria-atomic","role","tabIndex","style","clip","clipPath","height","overflow","position","whiteSpace","width","useLanguageChange","i18n","useTranslation","useEffect","eventHandler","onLanguageChange","language","on","off","StyledIcon","styled","Icon","theme","disabled","isEnterprise","windowFocused","palette","textInactive","iconSize","large","svg","withConfig","inputColor","getBrowserWindow","platform","getCurrentSync","view","fin","View","wrapSync","me","identity","w","getCurrentWindow","Browser","getBrowserWindowWithoutView","browserIdentity","Menu","trimUrl","url","replace","applyCondensedTabClassNames","tabs","tabGroup","querySelectorAll","condensedTabClassName","getBoundingClientRect","forEach","tab","classList","className","includes","remove","add","handleTabContainerScroll","deltaX","deltaY","event","tabHeader","target","closest","Math","abs","scrollLeft","handleAutoScrollOnTabDrag","querySelector","tabGroupRect","clientX","left","scrollBy","right","debouncedToggleScrollShadows","debounce","tabHeaders","scrollShadows","newTabButton","controlsContainer","paddingRight","concat","offsetWidth","scrollWidth","clientWidth","length","parentElement","contains","insertBefore","tabGroupRightScrollShadow","Array","from","find","element","tabGroupLeftScrollShadow","document","createElement","appendChild","addEventListener","getViewTabTitleOverflowShadow","isSchemeDark","isTabHoveredOrActive","isCloseButtonShowing","colorToken","css","ExtendedButton","BaseButton","props","active","statusActive","__webpack_exports__","Z","params","type","config","children","tooltip","dataTestId","dispatch","useDispatch","buttonRef","useRef","activeMenu","useSelector","selectActiveMenu","isActive","current","windowOptions","windowOffset","title","onClick","bottom","offsetX","x","windowOpts","defaultWidth","y","win","Window","uuid","name","hasBeenFocused","blurredListenerPromise","once","closeActiveMenu","focusedListenerPromise","openMenu","Promise","all","showModalWin","ref","data-testid","ColorLinkingChannelTypes","MENU_TYPE","COLOR_LINK","makeColorLinkingMenuHandler","dispatchRef","selectedViewsRef","ev","data","colorName","updateContextGroup","channelId","focus","showSuccess","t","parentBrowserName","raiseJoinContextGroupAnalytics","e","console","warn","showInfo","raiseLeaveContextGroupAnalytics","toggleContextGroupOutlines","makeLayoutReadyHandler","showAllContextGroupsRef","highlightAllInteropViews","iconUrl","activePage","selectActivePage","selectedViews","layoutsWithSelectedViews","selectLayoutsWithSelectedViews","layoutContainerKey","showAllContextGroups","selectShowAllContextGroups","menuButtonConfig","setMenuButtonConfig","useState","isLocked","useCallback","getColorLinkingMenu","interop","getContextGroups","then","menu","groups","min","channelToMenu","BroadcastChannel","onmessage","handleLayoutReady","removeListener","close","customToolTip","defaultIcon","defaultButtonPropMap","BrowserButtonType","ColorLinking","iconProps","icon","MenuButton","JSON","stringify","PredefinedIconUrl","customIconUrl","uiLibIcon","size","rest","CustomIcon","iconURL","DefaultIconStrings","handleMinimizeClick","getCurrentOFWindow","minimize","catch","error","err","handleShowHideTabs","layoutIdentity","tabHandler","getTabsHandler","isShowing","isShowingTabs","hide","show","currentOFIdentity","PresetLayouts","SaveMenu","SavePage","ShowHideTabs","LockUnlockPage","Minimise","tooltipKey","Close","defaultToolbarButtonConfig","buttons","defaultWindowStateButtonConfig","Maximise","defaultMacWindowStateButtonConfig","COMMAND_BAR_HEIGHT","SEARCH_PROVIDER_TAB_HEIGHT","convertSiteData","id","result","getRecentlyVisitedSites","browserWin","getRecentlylVisited","_getRecentlyVisitedSites","recentlylVisitedSites","formatRecentUrl","host","pathname","hash","search","URL","pathRoot","restOfPath","split","filter","value","getSiteSubTitle","site","urlFormatter","subTitle","charAt","toUpperCase","slice","trimWithEllipsis","str","characters","substring","trim","checkViewUrl","setViewNavigatedToUrl","viewInfo","getInfo","searchBookmark","browserWindow","bookmarks","_bookmarks","_searchBookmarkNodes","bookmark","TextSpan","span","fontSize","base","fontFamily","textDefault","CONTROL_BAR_HEIGHT","selectTargetTheming","useSystemSchemeCheck","currentTheme","useMemo","dark","light","brand","icons","symbol","Fragment","aria-label","display","testId","enterpriseCustomIconId","getSearchMenuWidth","expandedWidth","parentWindowWidth","MENU_BOUNDS","percentOfParentWidth","expanded","maxWidth","minWidth","ceil","getSearchMenuHeight","parentWindowHeight","shouldShowEmptySearchInputContainer","container","resultsContainer","getElementById","emptySearchInputContainer","resultContainerMaxHeight","max","scrollHeight","emptySearchInputContainerHeight","maxHeight","emptySearchContainerExceedsParentHeight","parentWindowHeightOffset","emptySearchContainerContentMeetsMinHeight","minHeight","resultsContainerMaxHeight","containerRef","shouldExpand","searchMenuChannel","shouldShowEmptySearchContainer","offsetLeft","isWindows","useIsWindows","offsetTop","viewBounds","setViewBounds","adjustViewDimensions","parentName","WindowName","BrowserAddressSearchPrefix","getOFWindow","getBounds","boundsType","menuResizeObserver","ResizeObserver","leading","observe","disconnect","showAt","top","bringToFront","postMessage","parentWindow","resizeHandler","setUpResizeListener","addListener","useCallbackOnAPIReady","Platform","callback","resolve","_path","bookmark_outline_path","createSpinner","parser","DOMParser","parseFromString","firstChild","WindowSearchMenuContext","createContext","shouldExpandMenu","setShouldExpandMenu","WindowSearchMenuContextProvider","jsx_runtime","Provider","searchViewReady","promise","res","useInitChannelToSearchMenuView","selectedViewUrl","setAddressBarWidth","setSearchText","resetAddressBarToSelectedViewUrl","useContext","broadcastChannel","handleNavigation","input","trigger","navigationRequest","windowIdentity","viewIdentity","action","query","queryId","providerId","_handleRequestNavigation","handleKeyFromView","key","metaKey","ctrlKey","altKey","options","searchText","handled","selectedSite","selectedView","keyboardEvent","text","lastViewEvent","resetLastFocusedView","getAddressBarInputElement","debouncedHandleAddressFocusOnLandingPage","addressBarInput","isEventOnSameView","startsWith","blur","isLandingPageOrEmpty","resetLastFocusedViewAndHandleViewFocused","useUpdateViewExpansionState","isSearchShortcutInvoked","focusInputAndExpandSearchView","method","showAndFocus","initializeChannel","browserChannel","getBrowserChannelClient","register","BrowserChannelAction","FocusAndExpandSearchInternal","viewFocusListener","store","getState","selectSelectedViewsForPage","pageId","some","useOnLayoutCreated","page","pageIndex","multiInstanceViewBehavior","updatePageAtIndex","index","undefined","isLayoutCreated","currentLayout","getLayoutConfig","componentStates","content","mapContentComponentState","viewCount","attachedPageType","singleViewName","actualViewName","updateTabStateBasedOnViewCount","eventsToPropagate","usePropagateLayoutContainerEventsToParent","propagateEventToParent","stopPropagation","customEventForParent","CustomEvent","detail","originalElement","srcElement","bubbles","parentNode","dispatchEvent","removeEventListener","useAddViewsToInteropContextGroups","containerId","addViewContextGroups","debug","contextGroup","joinContextGroup","layoutConfig","layout","Layout","layoutName","getConfig","views","isPageSingleView","countViews","useIsPageSingleView","selectPage","state","useIsSingleViewLandingPageOrMultiViewPage","shouldHideBottomBorder","setShouldHideBottomBorder","setView","checkIsLandingFromUrlChangedEvent","isLandingPage","checkIsLandingFromUrl","v","raiseBrowserFocusViewAnalyticsEvent","every","raiseBrowserAnalytics","getViewUrl","raiseBrowserBlurViewAnalyticsEvent","currentViewsIdentities","getNewViewOption","enabled","MenuItemType","Label","label","ViewTabMenuOptionType","NewView","getReloadViewsOption","ReloadViews","getDuplicateViewsOption","DuplicateViews","getCloseViewsOption","selectedViewIdentities","optsForSelectedViews","map","getOptions","parentWin","getPages","canCloseAllSelectedViews","viewOpts","isClosable","CloseViews","getMenuTemplate","isPageUnlocked","hasNewTabUrl","checkHasNewTabUrl","Separator","getPrintOption","BrowserLayout","background3","background1","isSingleView","PaddingBorderMixin","borderColor","background5","backgroundColor","LayoutContainer_LayoutContainer","classNames","setIsLayoutCreated","onLayoutCreated","selectIsWindows","selectPageByLayoutContainerKey","s","activePageId","hideLayoutPadding","isHandlingTabClick","cssBounds","usePanelBounds","getEnvironment","viewFocusHandler","getViewTabHat","isDefaultEnterpriseView","scrollIntoView","behavior","block","selectView","viewId","layoutReadyHandler","payload","_","selectPageWithIndex","isLayoutReady","layoutId","getFirstActiveViewFromLayout","pageSelectedViews","selectSelectedViewsForLayoutContainerKey","attachedPages","p","findViewInLayout","selectViewForLayoutContainerKey","selectViewReducer","handleMouseUp","viewName","getViewNameFromClickEvent","addSelectedView","withWindowStyleOverride","useWithWindowStyleOverride","handleContextMenuRequest","preventDefault","thisViewIdentity","isClickOnSelectedView","_openViewTabContextMenu","clientY","template","setTabAccessibility","closeButton","getAttribute","setAttribute","handleMutation","mutations","mutation","attributeName","tabsInGroup","toString","handleTabDropped","handleTabCreated","containerSelector","tabSelector","tabGroups","webContainers","viewTabs","elems","getElementsByClassName","removeChild","observer","MutationObserver","i","viewTab","webContainer","attributes","tabsCount","requestClosePage","closeType","closeView","activeTab","dataset","activeNode","button","requestAnimationFrame","hideFavIconForLandingPage","setTimeout","addViewButton","raiseBrowserSelectNewViewAnalyticsEvent","skipValueHashing","makeNewView","layoutNameInitializedMap","set","addViewTabGroupEventListener","maintainAttachedPageTypeBasedOnViewCount","updatePageForViewCount","handleViewDetached","newlySelectedViewIdentity","handleLayoutsResized","addLayoutEventListener","cleanupRef","layoutOptions","getLockedPageLayout","create","settings","disableTabOverflowDropdown","destroy","tabEl","spinnerSvg","addViewIcon","spinnerRef","prepend","useTabLoadingEvents","currentWindow","handleViewUrlChanged","LANDING_PAGE_URL","getEnterpriseLandingUrl","isInPage","newUrl","info","handleDidStopLoading","viewStartedLoading","viewStoppedLoading","handleDidFailLoad","removeViewIcon","onMouseUp","ContainerContainer","LayoutContainerWrapper","pages","selectPages","isAcceptingLayoutDrag","BrowserLayoutDragContext","jsxs","LayoutContainer","DragBlockerOverlay","onDragOver","ContentContainer_ContentContainer","Container","PanelContainer","PanelPosition","Right","MAC_WINDOW_BORDER_RADIUS","hooks_useFocusedView","selectedViewsIdentities","setViewInfo","getViewWithInfo","urlChangedListener","hooks_useFocusedViewListeners","viewRef","isContentLoading","setIsContentLoading","onFinishLoad","onUrlChange","focusedView","usePostMessageToSearchMenuView","inputContainerRef","isActivePageChanging","selectIsActivePageChanging","openViews","viewOptions","windowId","debouncedSendSearchUpdate","trailing","flush","sendKeyboardEventToSearchMenuView","EnterpriseSearchMenu_useSearchMenuViewLifecycleManager","addressBarInputRef","isSecure","setIsSecure","selectedViewRef","setSelectedViewUrl","updateAddressBarWithUrl","isLanding","isSecureSite","shouldShow","initializeAddressBar","wrap","previouslySelectedView","createNewTab","newPage","makeNewLandingPage","browser","addPage","setActivePage","entityId","createNewWindow","workspacePlatform","windowType","createWindow","restoreTab","_restoreRemovedTab","savePage","savePageHandler","savePageAs","savePageAsHandler","processHotKeys","isOsWindows","inputType","code","shiftKey","requestCloseBrowserWindow","navigateForward","navigateBack","hooks_useEnterpriseHotkeys","onHotKeys","useUpdateInputExpansionState","setInputFocus","onChange","isEmpty","onBlur","activeElement","LockContainer","Box","radius","small","SecureIcon","LockIcon","DangerIcon","React","ThemedSVG","viewBox","fill","xmlns","g","opacity","path","fillRule","clipRule","d","UrlInput","inputPlaceholder","_extends","Object","assign","bind","n","arguments","r","hasOwnProperty","call","apply","bookmark_filled","react","bookmark_outline_extends","bookmark_outline","combineBeacons","beacons","beacon","join","useIsBookmarked","isBookmarked","setIsBookmarked","combinedBeacons","useIsSelectedViewNavigated","isViewNavigatedToUrl","setIsViewNavigatedToUrl","setSelectedView","checkViewUrlCallback","handleUrlChange","initializeSelectedView","useListenForFavIconUpdates","viewIdentityRef","trailingFavIconUpdateHandler","updateBookmarkFavIcon","setupViewListener","useEnterpriseBookmarkDialogWindow","usePreloadedWindow","windowName","EnterpriseBookmarkDialogWindow","route","Route","EnterpriseBookmarkDialog","shouldPreload","BrowserTypeContext","useAddEditBookmarkDialog","bookmarkIconRef","isDialogShown","setIsDialogShown","isBookmarkUpdatedOrCreated","setIsBookmarkUpdatedOrCreated","channelRef","showDialog","connectToBookmarkDialogChannel","prev","bookmarkIconRect","browserWindowBounds","getWindowBounds","parentIdentity","EnterpriseMenuType","AddEditBookmark","responseIdentity","selectedViewIdentity","IconContainer","shouldRender","px","xsmall","background4","background2","BookmarkButton","isSecureShowing","bookmarkButtonRef","onRenderChange","isMenuExpanded","mostRecentlyUpdated","BookmarksContext","onKeyDown","enterpriseNavigationTestIds","bookmarkButton","BookmarkFilledSvg","BookmarkOutlinedSvg","useSetUpZoomHotkeys","zoomPercentRef","handleZoomSupertabHotkey","activeLayout","getActivePageForWindow","zoomViewIn","zoomViewOut","handleZoomViewHotkey","handleWindowHotkey","handleViewHotkey","ZOOM_DIALOG_WINDOW_DIMENSIONS","defaultHeight","setUpBlurListenersForWindows","zoomWindow","hideZoomWindow","blurListener","currentFocusedWindow","System","getFocusedWindow","ZoomControlsDialog","useZoomControlsDialog","zoomButtonRef","windowCreationOptions","alwaysOnTop","cornerRounding","connectToZoomControlsDialogChannel","zoomPercent","zoomButtonRect","dialogCoordinates","setUpBlurListenerAndOpenDialog","ZoomControls","checkZoomLevelWithOptions","opts","ZoomUtils","levelToPercent","zoomLevel","checkZoomLevel","level","getZoomLevel","ZoomButton","zoomButton","AddressBarButtons","onGradientClick","isZoomButtonRendered","setIsZoomButtonRendered","isBookmarkButtonRendered","setIsBookmarkButtonRendered","shouldRenderGradient","ButtonsContainer","ButtonsLeftGradient","shouldRenderZoomButton","AddressBarInput","addressSearchResultsViewIdentity","addressBarWidth","inputFocus","select","onFocus","sendKeyboardEventCallback","handleKeyDown","addressSearchResultsView","InputContainer","addressBarContainer","autoComplete","placeholder","inputBorder","inputFocused","searchMenuIdentity","AddressBar_AddressBar","setBounds","attach","useEnterpriseHotkeys","useSearchMenuViewLifecycleManager","AddressBarHotKey","EnterpriseNavigationContainer_EnterpriseNavigationContainer","useWindowFocusState","isAddressBarEnabled","setIsAddressBarEnabled","applyWindowFocusStyles","selectedTabs","newTabButtons","browserWindowOptions","NavContainer","NavBack","NavForward","NavReloadStop","AddressBar","NavigateButton","attrs","customContentSize","xxlarge","NavigateBackIcon","canGoBack","setCanGoBack","useFocusedView","goback","checkNav","canNavigateBack","backButton","NavigateForwardIcon","canGoForward","setCanGoForward","goforward","canNavigateForward","forwardButton","useFocusedViewListeners","reload","stop","stopNavigation","stopButton","NavigateStopIcon","reloadButton","NavigateReloadIcon","IconButtonContainer","AICompanionShortcutButton_AICompanionShortcutButton","isSidePanelOpen","activeComponent","toggleSidePanelComponent","useSidePanelContext","SidePanelComponent","AICompanion","selected","enterpriseToolbarTestIds","aiCompanionButton","AICompanionIcon","BookmarksPanelButton_BookmarksPanelButton","Bookmarks","bookmarksPanelButton","MenuButtonContainer","NoDragWrapper","EnterpriseMenuButton","EnterpriseGlobalMenu_EnterpriseGlobalMenu","enterpriseMenuButtonRef","isGlobalMenuActive","setIsGlobalMenuActive","onMenuClick","_openGlobalContextMenu","rect","aria-expanded","globalMenuButton","BrandIcon","usePlatformOptionsChange","setPlatformOptions","onPlatformOptionsChange","onWindowOptionChange","workspacePlatformChange","diff","newVal","MacWindowStateButton","toggleMaximize","maxOrRestore","CustomButton","customTarget","analyticsCallback","dragging","customData","callerType","CustomActionCallerType","_invokeCustomAction","BaseCustomButton","useWindowState","windowState","setWindowState","handleWindowStateChanged","EnterpriseMaximizeButton","parentHover","buttonTitle","RestoreIcon","hoverless","MacExpandIconHover","MacExpandIcon","MacInactiveIcon","circle","cx","cy","fillOpacity","SaveButton_SaveButton","memo","menuConfig","setMenuConfig","setIsActive","getSaveMenu","onClickHandler","currOFWindow","buttonBottom","buttonLeft","WP","_openSaveButtonContextMenu","ContextMenuWidth","buttonWidth","saveButton","LightBulbFilledIcon","disabledNoop","getWindowStateOrDisabledButton","prop","handleCloseClick","defaultCallbackMap","getButtonTooltip","buttonTooltip","setButtonTooltip","buttonIconUrl","TypeIcon","macIconHover","macIcon","macIconInactive","MacIcon","defaultButtonsMap","ColorLinkingButton","getLayoutsMenu","LAYOUT","SaveMenuButton","tabsHiddenIconUrl","tabsShownIconUrl","setIsShowingTabs","pageIsLocked","updateIsShowingTabs","tabTitle","onClickShowHideButton","lockedIconUrl","unlockedIconUrl","activePageIndex","selectActivePageWithIndex","handleClick","unlockedLayout","getUnlockedLayout","updatedPage","replaceLayout","browserLockButtonLockedState","browserLockButtonUnLockedState","RightControlsButton","DefaultButton","analytics","windowButtonAnalytics","Custom","defaultTooltipTranslation","MacInactive","rx","ToolbarContainer_ToolbarContainer","toolbarButtonConfig","setToolbarButtonConfig","getToolbarButtonOptions","toolbarOptions","buttonOptions","newToolbarOptions","WindowStateContainer_WindowStateContainer","windowStateButtonConfig","setWindowStateButtonConfig","hover","setHover","getWindowStateButtonOptions","windowStateButtonOptions","newWindowStateButtonOptions","onMouseOver","onMouseOut","onMouseLeave","RightControlsContainer_RightControlsContainer","isNotificationsRunning","useIsNotificationsRunning","isAICompanionEnabled","isBookmarksEnabled","useBookmarksContext","ToolbarContainer","NotificationsButton","notificationsButton","AICompanionShortcutButton","BookmarksPanelButton","EnterpriseGlobalMenu","WindowStateContainer","isWithinParentBounds","parentBounds","pageX","pageY","getDragState","namespacedLocalStorage","LocalStorageKey","PageDragState","setDragState","hideSingleView","getCurrentViews","getViewTabPayload","dataTransfer","getData","parse","infoArray","isSingleViewDrag","types","getDragPayloadType","base32","toLowerCase","decodeDragPayload","tabDragData","encodeDragPayload","useManagePageViewCount","updatePageForViewCountListener","isDetachingPages","useGetContextGroups","contextGroups","setContextGroups","usePageDrag","dropIndicatorPosition","setIndicatorPosition","hoveredPageIndex","setHoveredPageIndex","isShowingDropIndicator","setIsShowingDropIndicator","mouseCoordRef","hasSetActivePageRef","setActivePageHelper","finally","debouncedSetActivePage","onPageDragOver","pageDropType","pageButtonBoundingRect","currentTarget","mouseX","mouseY","targetPageIndex","findIndex","pageElement","isWithinActivationBounds","areaRect","pageX30pct","pageX70pct","isViewDrag","viewDragMetadata","viewDropType","shouldActivatePage","sourceIdentity","currentPageRect","pageMiddleX","dragOverListener","capture","usePageIcon","finWindow","updatePageIcon","matchIndex","newIcon","favicons","pageIcon","PageButton_useSingleViewTitle","singleViewTitle","setSingleViewTitle","finView","onPageTitleUpdated","useWindowTitle","windowTitle","setWindowTitle","selectFirstViewNameForLayoutContainerKey","selectFirstViewIdForLayoutContainerKey","enterpriseWindowTitle","useSingleViewTitle","updateWindowTitle","handleWorkspacePlatformTitleChange","oldVal","handleViewUrlChange","LargeCustomIcon","isLoading","UnsavedChangesIcon","EnterpriseTitleButton","CloseIconWrapper","hideCloseButton","PageIconContainer","PageButton_CloseButton","pageActive","hidden","padding","hasUnsavedChanges","unsavedIconUrl","getPageTabTitleOverflowShadow","BaseContainer","isDragging","EnterpriseContainer","isDropRegion","xxxxlarge","pageHasUnsavedChanges","PageIcon","pageState","usePageLoadingEvents","removePageState","singleViewIdentity","identityChanged","onViewStoppedLoading","handleUrlChanged","onViewUrlChanged","setPageSingleViewState","selectPageTabState","canShow","isNewTab","currentView","applyThemeColor","$isLoading","IconWrapper","SpinnerWrapper","SpinnerSVG","SIZE","thickness","PageTextSpan","ContextGroupIndicator","color","PageButton_PageButton","onDragStart","onDragEnd","onCloseClick","dragDisabled","isBeingReordered","colorChannel","setCondensedTabClassName","pageTitle","pageButtonRef","pageButton","resizeObserver","unobserve","onContextMenuHandler","_openPageTabContextMenu","onAuxClick","PageButtonContainer","enterprisePageTestIds","pageTabButton","aria-selected","draggable","onContextMenu","displayMetadata","blurredText","CloseButton","pageTabCloseButton","DropIndicatorStyles","brandPrimary","shouldHideRightBorder","DropIndicator","Tablist_WithDropIndicator","indicatorPosition","shouldShowIndicator","pageTabs","Children","toArray","flatMap","pageTab","isDropIndicatorAtEnd","dropIndicator","workspaceWindowOptsReducer","newOpts","preventPageDragIn","preventPageDragOut","preventPageDrag","preventPageClose","disableMultiplePages","documentTitle","isNewPageButtonEnabled","newPageUrl","forwardRef","Component","displayName","TabContainer","Mixins","scrollbar","scrollbarStyles","scrollbarSize","PlusButtonContainer","xxxlarge","TextContainer","Tablist_Tablist","singlePageWindowTabTitle","selectIsDetachingPages","focusedViewInActivePage","at","focusedViewInActivePageName","isPagesInitialized","selectIsInitialized","tabContainerRef","plusButtonBlock","shouldShowScrollShadows","setShouldShowScrollShadows","currentDragPageId","setCurrentDragPageId","screenReaderAnnouncement","setScreenReaderAnnouncement","setIsAcceptingLayoutDrag","workspaceWindowOptions","dispatchWorkspaceWinOpts","updateTablistAttrs","log","debouncedUpdatePageForViewCount","bringWindowToFront","onPageClickHandler","hideGoldenLayoutsDragIndicators","goldenLayoutsTargetIndicator","goldenLayoutsTransitionIndicator","onPlusClickHandler","getLandingPageUrls","_addDefaultPage","onPageDragStartHandler","original","originalRect","clone","cloneNode","cssText","body","setDragImage","setData","component","componentName","componentState","identityString","effectAllowed","layoutSettings","encodedJson","preventDragOut","wire","sendAction","onDragEnterHandler","encodedDropType","viewTabPayload","highLevelTabPayload","onDragLeaveHandler","relatedTarget","onDragOverHandler","onDragDropHandler","viewOptionsFromDrag","items","subarray","unshift","targetPositionIndex","handleSortableSetList","item","isPageDropType","currentBw","_reparentPage","targetPage","targetLayout","root","getRootItem","createAdjacentStack","updatedViewOptions","getLayoutWithSingleView","makePage","_addPage","updatedPages","onPageDragEndHandler","isOnlyPage","isReparenting","isWithinTablist","isReordering","draggedPage","getPageWithLayout","draggedPageIndex","isDraggingIntoLayout","dropEffect","removePage","elementOffsetX","elementOffsetY","offsetHeight","moveX","floor","moveY","offsetY","moveBy","defaultTop","screenY","defaultLeft","screenX","remainingPages","attachedPage","nextActivePage","getNextActivePageOnRemoval","reason","reorderPages","pageIds","onWorkspaceWinOptionsReceived","processPageGivenWindowOptions","onDrop","onDragEnter","onDragLeave","onWheel","tabContainer","ScrollShadow","shadowWidth","WithDropIndicator","PageButton","nativeEvent","group","offset","newPageButton","ControlBar_ControlBar","isDragRegion","NavigationContainer","Tablist","DragRegion","RightControlsContainer","useDetachViewsFromInteropContextGroups","removeFromContextGroup","hooks_useDropdownMenuWindow","DropdownMenu","hooks_useIntentsModalMenuWindow","IntentsResolverModal","useBrowserTaskbarIcon","taskbarIcon","setTaskbarIcon","_options_workspacePlatform","lightIcon","darkIcon","custom","useUpdateTaskbarIcon","useDocumentTitle","useEnterpriseContextMenu","useIntentsModalMenuWindow","useDropdownMenuWindow","updatedOptions","updateActivePage","updateOptions","onDropHandler","dropzone","flexDirection","onDropCapture","isMac","WindowStateProvider","SidePanelContextProvider","BookmarksContextProvider","ControlBar","ContentContainer","StyledSVG","textHelp","strokeWidth","percentToLevel","percent","round","l","pow","ZOOM_CONTROLS_MAP","MAX_ZOOM","MIN_ZOOM","nextZoomLevel","currentZoom","indexOf","zoom","setZoomLevel","resetViewZoom"],"sourceRoot":""}