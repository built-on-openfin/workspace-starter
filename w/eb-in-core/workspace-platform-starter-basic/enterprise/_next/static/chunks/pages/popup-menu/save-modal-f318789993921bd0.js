(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{8799:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/popup-menu/save-modal",function(){return a(6694)}])},9221:function(e,t,a){"use strict";a.d(t,{Y:function(){return n}});let n="10px"},1015:function(e,t,a){"use strict";a.d(t,{H$:function(){return d},LI:function(){return r},PR:function(){return p},QW:function(){return c},Wx:function(){return o},X0:function(){return l},_Q:function(){return i},cy:function(){return n},if:function(){return s},z9:function(){return u}});let n="enterprise-logo-custom-icon",r="lock-button-locked-state",o="lock-button-unlocked-state",s="bookmark-panel-container",i={backButton:"enterprise-nav-back-button",forwardButton:"enterprise-nav-forward-button",reloadButton:"enterprise-nav-reload-button",stopButton:"enterprise-nav-stop-button",addressBarInput:"enterprise-nav-address-bar-input",addressBarContainer:"enterprise-nav-address-bar-container",zoomButton:"enterprise-nav-zoom-button",bookmarkButton:"enterprise-nav-bookmark-button"},l={saveButton:"enterprise-toolbar-save-button",globalMenuButton:"enterprise-toolbar-global-menu-button",bookmarksPanelButton:"enterprise-toolbar-bookmarks-panel-button",aiCompanionButton:"enterprise-toolbar-ai-companion-button",notificationsButton:"enterprise-toolbar-notifications-button"},c={pageTabButton:"enterprise-page-tab-button",pageTabCloseButton:"enterprise-page-tab-close-button",newPageButton:"enterprise-page-new-page-button",tabContainer:"enterprise-page-tab-container"},u={container:"enterprise-landing-page-container",recentSitesContainer:"enterprise-landing-page-recent-sites-container",brandLogoContainer:"enterprise-landing-page-brand-logo-container",timeContainer:"enterprise-landing-page-time-container",siteGridContainer:"enterprise-landing-page-site-grid-container"},d={searchResultItem:"enterprise-search-result-item",viewMoreResultsButton:"enterprise-search-view-more-results-button",searchFilterButton:"enterprise-search-filter-button",clearFiltersButton:"enterprise-search-clear-filters-button",noResultsContainer:"enterprise-search-no-results-container",resultsContainer:"enterprise-search-results-container"},p={responseModalContainer:"enterprise-modal-response-container",responseModalTitle:"enterprise-modal-response-title",responseModalBody:"enterprise-modal-response-body",responseModalCloseButton:"enterprise-modal-response-close-button",responseModalTextInput:"enterprise-modal-response-text-input",saveModalContainer:"enterprise-modal-save-container",saveModalInput:"enterprise-modal-save-input",saveModalSaveButton:"enterprise-modal-save-save-button",saveModalCancelButton:"enterprise-modal-save-cancel-button"}},2344:function(e,t,a){"use strict";var n=a(4246),r=a(7378),o=a(5191),s=a(6774);t.Z=(0,r.memo)(e=>{let{children:t,isEnterprise:a}=e,r=(0,s.C)();return(0,n.jsx)(i,{children:(0,n.jsx)(l,{isEnterprise:a,isWindows:r,children:t})})});let i=o.default.div.withConfig({componentId:"sc-8f6f584b-0"})(["background:",";display:flex;flex-direction:column;height:100%;overflow-x:hidden;"],e=>{let{theme:t}=e;return t.palette.background1}),l=o.default.div.withConfig({componentId:"sc-8f6f584b-1"})(["align-items:center;background:",";display:flex;height:100%;justify-content:space-between;padding:0;position:relative;overflow:hidden;border:",";"],e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t,isEnterprise:a,isWindows:n}=e;return(!a||n)&&"1px solid ".concat(t.palette.background5)})},7548:function(e,t,a){"use strict";a.d(t,{h:function(){return p},v:function(){return d}});var n=a(4246);a(7378);var r=a(5191),o=a(4861);let s=(0,r.css)(["background-color:",";border:unset;&:hover{background-color:#cc3939;}"],e=>{let{theme:t}=e;return t.palette.statusCritical}),i=(0,r.css)(["background-color:",";border:1px solid ",";color:",";&:hover{background-color:",";}"],e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background4},e=>{let{theme:t}=e;return t.palette.textDefault},e=>{let{theme:t}=e;return t.palette.background2}),l=(0,r.css)(["background-color:",";&:hover{background-color:",";filter:brightness(1.25);}"],e=>{let{theme:t}=e;return t.palette.brandPrimary},e=>{let{theme:t}=e;return t.palette.brandPrimary}),c=(0,r.default)(o.Button).withConfig({componentId:"sc-63609882-0"})(["cursor:'default' !important;padding:"," ",";&:focus{border:1px solid ",";}",";"],e=>{let{theme:t}=e;return t.px.small},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.inputFocused},e=>{let{variant:t}=e;switch(t){case"critical":return s;case"outline":return i;case"submit":return l}}),u=e=>{let{label:t,id:a,type:r,variant:o,disabled:s,onAction:i,dataTestId:l}=e;return(0,n.jsx)(c,{type:"primary"===r?"submit":"button",kind:r,variant:null!=o?o:"primary"===r?"submit":"outline",label:t,"aria-label":t,"data-testid":l,"data-id":a,onClick:"primary"===r?void 0:()=>i({name:a}),disabled:"primary"===r&&s})},d=(0,r.default)(o.Box).withConfig({componentId:"sc-5ab4c193-0"})(["margin-top:",";justify-content:space-between;padding:0 "," "," ",";"],e=>{let{theme:t}=e;return t.px.xsmall},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large},e=>{let{theme:t}=e;return t.px.large}),p=e=>{let{buttons:t,align:a,gap:r,hasError:s,onAction:i}=e;return(0,n.jsx)(o.Box,{gap:null!=r?r:"small",role:"group","aria-label":a,children:(t||[]).map(e=>(0,n.jsx)(u,{disabled:s,onAction:i,...e},e.id))})}},6774:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var n=a(7378),r=a(1171);let o=()=>{let[e,t]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{t(await (0,r.O)())})()},[]),e}},6694:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return X}});var n=a(4246),r=a(8038),o=a.n(r),s=a(6931),i=a(2344),l=a(7378),c=a(1739),u=a(6596),d=a(5802),p=a(1610),g=a(2203),f=a(5439),m=a(8615),w=a(5191),b=a(4861),v=a(1015),h=a(7548),x=a(9221),k=a(6774);let S="error-message";(0,w.default)(b.Box).withConfig({componentId:"sc-f902c36d-0"})(["width:100%;flex-direction:column;padding:",";row-gap:",";background-color:",";border:1px solid ",";",""],e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background5},e=>{let{isWindows:t}=e;return!t&&(0,w.css)(["border-radius:",";box-shadow:none;"],x.Y)});let y=(0,w.default)(b.H2).withConfig({componentId:"sc-f902c36d-1"})(["&&{display:flex;align-items:center;font-size:",";font-weight:normal;justify-content:flex-start;line-height:1;}"],e=>{let{theme:t}=e;return t.px.base}),I=(0,w.default)(b.Icon).withConfig({componentId:"sc-f902c36d-2"})(["display:inline-block;margin-right:",";"],e=>{let{theme:t}=e;return t.px.small}),C=w.default.p.withConfig({componentId:"sc-f902c36d-3"})(["font-size:",";line-height:",";color:",";"],e=>{let{theme:t}=e;return t.fontSize.small},e=>{let{theme:t}=e;return t.fontSize.base},e=>{let{theme:t}=e;return t.palette.textHelp}),B=(0,w.default)(C).withConfig({componentId:"sc-f902c36d-4"})(["color:",";padding-left:3px;font-weight:normal;"],e=>{let{theme:t}=e;return t.palette.textHelp}),E=(0,w.default)(b.TextInput).withConfig({componentId:"sc-f902c36d-5"})(["width:100%;background-color:",";color:",";"],e=>{let{theme:t}=e;return t.palette.inputBackground},e=>{let{theme:t}=e;return t.palette.inputColor}),P=(0,w.default)(b.Button).withConfig({componentId:"sc-f902c36d-6"})(["font-weight:",";"],e=>{let{theme:t}=e;return t.fontWeight.normal}),M=(0,w.default)(b.Box).withConfig({componentId:"sc-f902c36d-7"})(["margin-top:",";height:28px;& ","{margin-left:",";}"],e=>{let{theme:t}=e;return t.px.base},P,e=>{let{theme:t}=e;return t.px.small}),A=w.default.div.withConfig({componentId:"sc-f902c36d-8"})(["&&{margin-top:",";display:",";align-items:center;}"],e=>{let{message:t,theme:a}=e;return t?a.px.small:"none"},e=>{let{message:t}=e;return t?"flex":"none"}),j=(0,w.default)(b.Box).withConfig({componentId:"sc-f902c36d-9"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;"]),_=w.default.div.withConfig({componentId:"sc-f902c36d-10"})(["background:",";border:1px solid ",";"," padding:",";row-gap:",";display:flex;flex-direction:column;width:100%;"],e=>{let{theme:t}=e;return t.palette.background1},e=>{let{theme:t}=e;return t.palette.background5},e=>{let{isWindows:t}=e;return!t&&(0,w.css)(["border-radius:",";box-shadow:none;"],x.Y)},e=>{let{theme:t}=e;return t.px.base},e=>{let{theme:t}=e;return t.px.base});var W=(0,l.memo)(e=>{let{onSubmit:t,onCancel:a,placeholder:r,icon:o,bodyText:s,errorMessage:i,setErrorMessage:c,modalTitle:u,clearErrorMessage:d}=e,[g,f]=(0,l.useState)(r),m=(0,l.useRef)(null),w=(0,l.useRef)(r),x=(0,l.useRef)(null),{t:P}=(0,p.$G)(),W=(0,k.C)();(0,l.useEffect)(()=>{x.current&&fin.me.setBounds({height:x.current.scrollHeight})}),(0,l.useEffect)(()=>{let e=fin.Window.getCurrentSync(),t=()=>a&&a();return e.addListener("blurred",t),()=>{e.removeListener("blurred",t)}},[]),(0,l.useEffect)(()=>{let e=()=>{let e=m.current;null==e||e.focus(),f(w.current)};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[m]),(0,l.useEffect)(()=>{f(r),w.current=r},[r]);let N=async()=>{i&&(null==d||d()),await (null==a?void 0:a())},R=async e=>{e.preventDefault(),await t(g)},$={right:[{id:"cancel",label:P("global.cancel"),type:"secondary",dataTestId:v.PR.saveModalCancelButton},{id:"save",label:P("global.save"),type:"primary",dataTestId:v.PR.saveModalSaveButton}]},F=async e=>{let{name:t}=e;"cancel"===t&&await N()};return(0,n.jsx)(j,{ref:x,"data-testid":v.PR.saveModalContainer,children:(0,n.jsxs)(_,{isWindows:W,children:[(0,n.jsxs)(y,{children:[(0,n.jsx)(I,{icon:o,size:"small"})," ",u]}),s&&(0,n.jsx)(C,{children:s}),(0,n.jsxs)("form",{onSubmit:R,children:[(0,n.jsx)(E,{autoFocus:!0,name:"title",value:g,maxLength:250,onChange:e=>{i&&(null==d||d()),f(e.target.value)},status:i?"critical":void 0,ref:m,"aria-label":P("aria.title"),"data-testid":v.PR.saveModalInput,"aria-errormessage":S,"aria-invalid":!!i,required:!0,onInvalid:e=>{c(P("saveModal.pleaseEnterValidName")),e.preventDefault()}}),(0,n.jsxs)(A,{message:i,children:[(0,n.jsx)(b.Icon,{icon:i?"ExclamationCircledFilledIcon":null,size:"base",secondaryColor:b.Color.white,color:b.Color.functional7}),(0,n.jsx)(B,{id:S,"aria-live":"assertive",children:i})]}),(0,n.jsx)(M,{justifyContent:"flex-end",children:(0,n.jsx)(h.h,{align:"right",buttons:$.right,onAction:F})})]})]})})});let N=async(e,t,a,n)=>{t.title=e,await (0,m.a)().Storage.savePage((0,g.QO)(t)),await a.updatePage({pageId:t.pageId,page:{hasUnsavedChanges:!1}}),await (0,u.s$)({message:n?(0,p.t)("enterpriseSuccessIndicator.supertabSaved"):(0,p.t)("successIndicator.pageSaved"),parentBrowserName:a.identity.name,secondaryMessage:n?(0,p.t)("enterpriseSuccessIndicator.supertabHasBeenSaved",{title:e}):(0,p.t)("successIndicator.pageHasBeenSaved",{title:e}),isEnterprise:n})},R=async(e,t,a,n)=>{let r=await (0,f.nT)({page:t,reason:"save-as",identity:a.identity}),o={...(0,g.QO)(r),title:e};await (0,m.a)().Storage.savePage(o),delete r.layout,delete r.panels,await a.updatePage({pageId:t.pageId,page:{...r,title:e,hasUnsavedChanges:!1}}),await (0,u.s$)({message:n?(0,p.t)("enterpriseSuccessIndicator.supertabSaved"):(0,p.t)("successIndicator.pageCopySaved",{title:e}),parentBrowserName:a.identity.name,secondaryMessage:n?(0,p.t)("enterpriseSuccessIndicator.supertabHasBeenSaved",{title:e}):(0,p.t)("successIndicator.pageCopySaved",{title:e}),isEnterprise:n})},$=async(e,t,a)=>{let n=await (0,m.a)(),r=await n.Storage.getPage(t.pageId);await n.Storage.updatePage({pageId:t.pageId,page:{...r,title:e}}),await a.updatePage({pageId:t.pageId,page:{title:e}}),await (0,u.s$)({message:(0,p.t)("successIndicator.pageRenamed"),parentBrowserName:a.identity.name})};var F=e=>{let{parentWindowName:t,pageId:a,saveAs:r,rename:o,modalInvocationId:s,isEnterprise:i}=e,[g,f]=(0,l.useState)(""),[w,b]=(0,l.useState)(""),[v,h]=(0,l.useState)(""),{t:x}=(0,p.$G)(),k=async()=>{h("")},S=async e=>{console.log("%chandling submit, initializing variables....","color: purple");let n=await (0,m.a)().Storage.getPages(),s=null==n?void 0:n.find(t=>(null==t?void 0:t.title)===e),l=s&&s.pageId!==a,p=(0,d.lQ)();if(console.log("%cupdating modal windows otpions...","color: purple"),await p.updateOptions({customContext:l?"error":"submitting"}),l){h(x("saveModal.alreadyExists",{title:e}));return}console.log("%chiding modal...","color: purple"),await p.hide();try{console.log("%cgetting platform and the browser...","color: purple");let n=(0,m.a)(),s=n.Browser.wrapSync({name:t,uuid:c.AB}),l=await s.getPage(a);l||(console.log("%cpage isn't attached to current window (e.g. Rename called from landing page)","color: purple"),l=await n.Storage.getPage(a));let u=r;u&&l.title===e&&(u=!1),u?(console.log("%csavePageCopy","color: purple"),await R(e,l,s,i)):o?(console.log("%cranme","color: purple"),await $(e,l,s)):(console.log("%cregular...","color: purple"),await N(e,l,s,i))}catch(e){console.error("SavePage: page failed to save: ",e),(0,u.x2)({message:x("errorIndicator.pageSaveFailed"),parentBrowserName:t})}};return(0,l.useEffect)(()=>{(async()=>{i?b(r?x("enterpriseSaveMenu.saveSupertabAs"):x(o?"enterpriseSaveModal.renameSupertab":"enterpriseContextMenu.saveSupertab")):b(r?x("saveMenu.savePageAs"):x(o?"saveModal.renamePage":"contextMenu.savePage"))})()},[x,r,o,t]),(0,l.useEffect)(()=>{(async()=>{let e=(0,m.a)(),n=e.Browser.wrapSync({name:t,uuid:c.AB}),r=await n.getPage(a);r||(r=await e.Storage.getPage(a)),f(r.title)})()},[a,s,t]),(0,n.jsx)(W,{clearErrorMessage:()=>{h("")},onSubmit:S,onCancel:k,icon:"StackIcon",placeholder:g,errorMessage:v,setErrorMessage:h,modalTitle:w})},O=a(6064),T=a(9894),z=a(1654),G=a(3569),H=a(6758);let V=async(e,t,a,n)=>{t.title=e;let r=(0,m.a)();await (0,G.DF)(t,r),await r.setActiveWorkspace(t),await (0,u.s$)({message:n?(0,p.t)("successIndicator.workspaceSavedAs",{workspace:e}):(0,p.t)("successIndicator.workspaceSaved"),parentBrowserName:a.identity.name})},D=async(e,t,a)=>{let n={...t,title:e,workspaceId:(0,z.H)()},r=(0,m.a)();await (0,G.DF)(n,r),await r.setActiveWorkspace(n),await (0,u.s$)({message:(0,p.t)("successIndicator.workspaceSavedAs",{workspace:e}),parentBrowserName:a.identity.name})},L=async(e,t,a)=>{let n=await (0,m.a)(),r=await n.Storage.getWorkspace(t.workspaceId);await (0,G.FJ)({...r,title:e},n),await n.setActiveWorkspace({...t,title:e}),await (0,u.s$)({message:(0,p.t)("successIndicator.workspaceRenamed"),parentBrowserName:a.identity.name})},Q=async e=>{let{windowOptions:t,content:a}=await (0,H.F1)(e),{top:n,left:r}=await (0,T.VD)(t),o={...t,top:n,left:r};return await (0,O.Iw)({options:o,content:a})};var K=e=>{let{parentWindowName:t,saveAs:a,rename:r,modalInvocationId:o}=e,[s,i]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),{t:w}=(0,p.$G)(),b=async()=>{f("")},v=async e=>{let n=(0,m.a)(),o=await n.Storage.getWorkspacesMetadata(),s=null==o?void 0:o.find(t=>(null==t?void 0:t.title)===e),i=await n.getCurrentWorkspace(),l=s&&s.workspaceId!==i.workspaceId,p=(0,d.lQ)();if(await p.updateOptions({customContext:l?"error":"submitting"}),r&&l){f(w("saveModal.alreadyExists",{title:e}));return}let g=a;g&&i.title===e&&(g=!1),await p.hide();try{let o=n.Browser.wrapSync({name:t,uuid:c.AB});if(g){if(s){let t=await Q(e);if("Replace"!==t.data.actionName)return;await n.Storage.deleteWorkspace(s.workspaceId)}await D(e,i,o)}else if(r)await L(e,i,o);else{if(s){let t=await Q(e);if("Replace"!==t.data.actionName)return}await V(e,i,o,null!=a&&a)}}catch(e){console.error("SaveWorkspace: workspace failed to save: ",e),(0,u.x2)({message:w("errorIndicator.workspaceSaveFailed"),parentBrowserName:t})}};return(0,l.useEffect)(()=>{(async()=>{let e=(0,m.a)();i((await e.getCurrentWorkspace({skipSnapshotUpdate:!0})).title)})()},[o,t]),(0,n.jsx)(W,{onSubmit:v,onCancel:b,clearErrorMessage:()=>{f("")},icon:"StackIcon",placeholder:s,errorMessage:g,setErrorMessage:f,modalTitle:a?w("saveMenu.saveWorkspaceAs"):r?w("contextMenu.renameWorkspace"):w("contextMenu.saveWorkspace")})},U=a(9555),X=(0,s.EN)(e=>{let{router:t}=e,{id:a,parentName:r,menuType:l,invocationId:c,isEnterprise:u}=(0,s.DP)(t.asPath),d="true"===u;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{children:(0,n.jsx)("title",{children:"Browser Save Workspace/Page Popup"})}),(0,n.jsx)(i.Z,{isEnterprise:d,children:(()=>{switch(l){case U.$.SAVE_PAGE:case U.$.SAVE_PAGE_AS:case U.$.RENAME_PAGE:return(0,n.jsx)(F,{pageId:a,parentWindowName:r,saveAs:l===U.$.SAVE_PAGE_AS,rename:l===U.$.RENAME_PAGE,modalInvocationId:Number(c),isEnterprise:d});case U.$.SAVE_WORKSPACE:case U.$.SAVE_WORKSPACE_AS:case U.$.RENAME_WORKSPACE:return(0,n.jsx)(K,{parentWindowName:r,modalInvocationId:Number(c),saveAs:l===U.$.SAVE_WORKSPACE_AS,rename:l===U.$.RENAME_WORKSPACE});default:return console.warn("Unsupported save modal type"),(0,n.jsx)(n.Fragment,{})}})()})]})})},8038:function(e,t,a){e.exports=a(8762)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8799)}),_N_E=e.O()}]);
//# sourceMappingURL=save-modal-f318789993921bd0.js.map