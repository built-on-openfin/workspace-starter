/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs":
/*!*******************************************************************!*\
  !*** ../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiError: () => (/* binding */ Y),
/* harmony export */   AppNotAuthorizedError: () => (/* binding */ H),
/* harmony export */   InteropError: () => (/* binding */ Q),
/* harmony export */   TerminalCommandError: () => (/* binding */ K),
/* harmony export */   TerminalConnectionError: () => (/* binding */ X),
/* harmony export */   connect: () => (/* binding */ ee),
/* harmony export */   disableLogging: () => (/* binding */ te),
/* harmony export */   enableLogging: () => (/* binding */ ne),
/* harmony export */   getDefaultActions: () => (/* binding */ re),
/* harmony export */   isBloombergTerminalReady: () => (/* binding */ se),
/* harmony export */   isCusip: () => (/* binding */ oe),
/* harmony export */   isEquity: () => (/* binding */ ie),
/* harmony export */   isFigi: () => (/* binding */ ce),
/* harmony export */   isIsin: () => (/* binding */ ae)
/* harmony export */ });
var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{MS:()=>ApiError,xc:()=>AppNotAuthorizedError,BT:()=>InteropError,ez:()=>TerminalCommandError,yW:()=>TerminalConnectionError,$j:()=>Z,U$:()=>i,U7:()=>c,U5:()=>D,GS:()=>M,hN:()=>y,Yc:()=>v,eE:()=>E,C1:()=>S});const n=e=>{if(e instanceof ApiError)return e;switch(!0){case e?.message?.indexOf("APPLICATION_VALIDATION")>=0:return new AppNotAuthorizedError;case e?.message?.indexOf("INVALID_COMMAND")>=0:case e?.message?.indexOf("INVALID_GROUP_VALUE")>=0:case e?.message?.indexOf("MNEMONIC_NOT_ALLOWED")>=0:return new TerminalCommandError(void 0,e);case"Connection Error"===e?.message:return new TerminalConnectionError;default:return new ApiError(void 0,e)}};class ApiError extends Error{constructor(e="An unexpected error has occurred",t){super(e),t&&(this.innerError=t),this.stack=this.stack?.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class AppNotAuthorizedError extends ApiError{constructor(e="App not authorized to use Terminal Connect API",t){super(e,t)}}class InteropError extends ApiError{constructor(e="Failed to execute the interop function",t){super(e,t)}}class TerminalCommandError extends ApiError{constructor(e="Failed to execute the terminal command",t){super(e,t)}}class TerminalConnectionError extends ApiError{constructor(e="Failed to connect to local terminal service",t){super(e,t)}}const r="1.2.0";let s=!1;const o="[@openfin/bloomberg]",i=()=>{s=!1},c=()=>{s=!0,u(`v${r}`)},a=(e,t)=>{s&&(e.innerError?console.error(t?`${o} ${t}`:o,e,"\n\n(inner)",e.innerError):console.error(t?`${o} ${t}`:o,e))},u=(...e)=>{s&&console.log(o,...e)},l=(...e)=>{s&&console.warn(o,...e)};"undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Bloomberg:{enableLogging:c,disableLogging:i}}});class p{constructor(e,t,n){this._lastUpdate=0,this._securityCacheExpiration=15e3,this._securityCache="",this._name=t,this._type=n,this._terminalProxy=e}get name(){return this._name}get type(){return this._type}getSecurity(){return new Promise(((e,t)=>{this._terminalProxy.getAllGroups((n=>{const r=n.find((e=>e.name===this._name));r?(this._securityCache=r.security,this._lastUpdate=(new Date).getTime(),e(this._securityCache)):t(new Error(`Group ${name} is not found.`))}),((e,n)=>{t(this.getErrorFromErrorMessage(e,n))}))}))}getCachedSecurity(){return new Promise((async(e,t)=>{const n=(new Date).getTime();(!this._securityCache||!this._lastUpdate||n-this._lastUpdate>this._securityCacheExpiration)&&await this.getSecurity(),e(this._securityCache)}))}setSecurity(e,t){return new Promise(((n,r)=>{this._terminalProxy.setGroupSecurity((()=>{this._securityCache=e,this._lastUpdate=(new Date).getTime(),n()}),((e,t)=>{r(this.getErrorFromErrorMessage(e,t))}),this._name,e,t)}))}}function d(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,s,o,i,c,a,u="",l=0;for(;l<e.length;)n=e.charCodeAt(l++),r=e.charCodeAt(l++),s=e.charCodeAt(l++),o=n>>2,i=(3&n)<<4|r>>4,c=(15&r)<<2|s>>6,a=63&s,isNaN(r)?c=a=64:isNaN(s)&&(a=64),u=u+t.charAt(o)+t.charAt(i)+t.charAt(c)+t.charAt(a);return u}class g{constructor(){this._seqNumber=0,this._isConnecting=!1,this._isConnected=!1,this._isRegistered=!1,this._sessionId="",this._queuedRequests=[],this._pendingRequests={},this._minPortRange=51800,this._maxPortRange=51800,this._currentPort=51800,this._responseTimeout=15e3,this._disconnectEventSubscriptions={},this._groupEventSubscriptions={},this.sendRemoteMessage=(e,t,n,r)=>{if(this._isRegistered||e.register||this.sendRemoteMessage({register:{}},12,null,console.error),this._sessionId||(this._sessionId=`{${function(){const e="0123456789ABCDEF".split("");let t,n=[],r=Math.random;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(var s=0;s<36;s++)n[s]||(t=0|16*r(),n[s]=e[19==s?3&t|8:15&t]);return n.join("")}()}}`),e.setGroupValue&&!e.setGroupValue.cookie&&(e.setGroupValue.cookie=this._sessionId),e.subscribeGroupEvents){const t=e.subscribeGroupEvents.subId;delete e.subscribeGroupEvents.subId,r=e=>{delete this._groupEventSubscriptions[t],r&&r(e)}}const s={sessionId:this._sessionId,correlationId:++this._seqNumber,request:e},o=JSON.stringify(s),i=t>12,c=i?{appId:s.appId,sessionId:s.sessionId,correlationId:s.correlationId,payloadSchemaName:"ap3g_internal",payloadSchemaVersion:2,payloadMsgType:t,payload:d(o)}:void 0,a={envelope:{schemaName:i?"blp_lpad_msg":"blp_remote_controller",schemaVersion:2,message:i?JSON.stringify(c):o},correlationId:s.correlationId,expectResponse:!0,onsuccess:n,onerror:r};this._pendingRequests[s.correlationId]=a,this._isConnected?this.sendRequest(a):(this._queuedRequests.push(a),this.connect())}}addEventListener(e){const t=Object.keys(this._groupEventSubscriptions).length+1;return this._groupEventSubscriptions[t]=e,t}removeEventListener(e){return delete this._groupEventSubscriptions[e],Object.keys(this._groupEventSubscriptions).length}addDisconnectEventListener(e){const t=Object.keys(this._disconnectEventSubscriptions).length+1;return this._disconnectEventSubscriptions[t]=e,t}removeDisconnectEventListener(e){const t=Object.keys(this._disconnectEventSubscriptions).length;delete this._disconnectEventSubscriptions[e];return t!==Object.keys(this._disconnectEventSubscriptions).length}sendRequest(e){const t=JSON.stringify(e.envelope);this._webSocket&&this._webSocket.send(t),e.expectResponse?setTimeout((()=>{this._pendingRequests[e.correlationId]&&(delete this._pendingRequests[e.correlationId],e.onerror&&e.onerror(0,"Response Timeout"))}),this._responseTimeout):delete this._pendingRequests[e.correlationId]}connect(){try{if(this._isConnecting)return;this._isConnecting=!0,this._webSocket=new WebSocket("ws://localhost:"+this._currentPort,"terminal_api"),this._webSocket.onopen=this.onWebSocketOpen.bind(this),this._webSocket.onmessage=this.onWebSocketMessage.bind(this),this._webSocket.onclose=this.onWebSocketClose.bind(this),this._webSocket.onerror=this.onWebSocketError.bind(this)}catch(e){this._webSocket=void 0,this._queuedRequests=[],this.cancelPendingRequests("WebSocket Exception "+e),console.error(e)}}cancelPendingRequests(e){this._isConnected=!1,this._isConnecting=!1,this._isRegistered=!1,this._sessionId="";for(let t=0;t<this._queuedRequests.length;t+=1){const n=this._queuedRequests[t];n&&n.onerror&&n.onerror(0,e)}this._queuedRequests=[];for(let t in this._pendingRequests){const n=this._pendingRequests[t];n&&n.onerror&&n.onerror(0,e)}this._pendingRequests={}}onWebSocketClose(e){if(console.log("WebSocket Closed; Reason: "+e.reason+", Code: "+e.code+", WasClean: "+e.wasClean),this._isConnected){const t={};e&&void 0!==e.reason&&(t.reason=e.reason),e&&void 0!==e.code&&(t.code=e.code),e&&void 0!==e.wasClean&&(t.wasClean=e.wasClean),this._currentPort=this._minPortRange,this.cancelPendingRequests({status:"error",message:"Connection Closed",details:t});for(let e in this._disconnectEventSubscriptions){const t=this._disconnectEventSubscriptions[e];t&&t(e)}}}onWebSocketError(){if(console.log("WebSocket Error;  readyState: "+(this._webSocket&&this._webSocket.readyState)),this._isConnecting=!1,this._currentPort<this._maxPortRange)this._currentPort+=1,this.connect();else{this._currentPort=this._minPortRange;const e={readyState:this._webSocket&&this._webSocket.readyState};this.cancelPendingRequests({status:"error",message:"Connection Error",details:e})}}onWebSocketOpen(){for(this._isConnected=!0,this._isConnecting=!1;this._queuedRequests.length>0;)this.sendRequest(this._queuedRequests.shift())}onWebSocketMessage(e){var t=e&&e.data?e.data:"null",n=JSON.parse(t),r=n?JSON.parse(n.message):null,s=r&&r.response?this._pendingRequests[r.correlationId]:null;s&&delete this._pendingRequests[r.correlationId],this.processResponse(s,r.response)}getGroupInfo(e){return e?{name:e.name,type:e.type,security:"security"===e.type&&e.value?e.value:void 0}:{}}processResponse(e,t){if(t.success)e.onsuccess&&e.onsuccess();else if(t.registrationComplete)this._isRegistered=!0,console.log("Registration Complete; Session: "+this._sessionId),e.onsuccess&&e.onsuccess();else if(t.getAllGroups){const n=t.getAllGroups.group;e.onsuccess&&e.onsuccess(n?n.map(this.getGroupInfo):[])}else if(t.groupValue)e.onsuccess&&e.onsuccess(this.getGroupInfo(t.groupValue.group));else if(t.groupEvent){if(t.groupEvent.valueChanged){const e=t.groupEvent.valueChanged.group,n=t.groupEvent.valueChanged.cookie===this._sessionId?void 0:t.groupEvent.valueChanged.cookie;for(let t in this._groupEventSubscriptions){const r=this._groupEventSubscriptions[t];r&&r(e,n)}}}else e.onerror&&e.onerror(t.failure&&t.failure.code||0,t.failure?`${t.failure.message} ${t.failure.humanMessage}`:"Unknown Response")}}class h{constructor(){this._webSocket=new g}runFunction(e,t,n,r,s,o,i,c){let a="";if(n&&n.length?1!==r&&2!==r&&3!==r&&4!==r&&5!==r&&(a="Invalid Or Missing Parameter: panel"):a="Invalid Or Missing Parameter: mnemonic",a)return console.error("runFunctionInPanel error: "+a),void(t&&t(0,a));const u={runFunctionInPanel:{mnemonic:n,panel:r}};if(s){const e=[];e.push(s),o&&e.push(o),u.runFunctionInPanel.securities=e}i&&(u.runFunctionInPanel.tails=i),c&&(u.runFunctionInPanel.applicationProperties=c),this._webSocket.sendRemoteMessage(u,0,e,t)}getAllGroups(e,t){this._webSocket.sendRemoteMessage({getAllGroups:{}},13,e,t)}getGroup(e,t,n){if(!n||!n.length){const e="Invalid Or Missing Parameter: name";return console.error(e),void(t&&t(0,e))}this._webSocket.sendRemoteMessage({getGroupValue:{name:n}},15,e,t)}setGroupSecurity(e,t,n,r,s){let o="";if(n&&n.length?r&&r.length||(o="Invalid Or Missing Parameter: security"):o="Invalid Or Missing Parameter: name",o)return console.error("setGroupContext error: "+o),void(t&&t(0,o));this._webSocket.sendRemoteMessage({setGroupValue:{name:n,value:r,cookie:s}},14,e,t)}subscribeGroupEvents(e,t,n){if(!n){const e="Invalid Or Missing Parameter: callback";return console.error("subscribeGroupEvents error: "+e),void(t&&t(0,e))}const r=this._webSocket.addEventListener(n);1===r?this._webSocket.sendRemoteMessage({subscribeGroupEvents:{subId:r}},16,(()=>{e&&e(r)}),(e=>{t&&t(0,e)})):e&&e(r)}unsubscribeGroupEvents(e,t,n){if(!n){const e="Invalid Or Missing Parameter: cookie";return console.error("unsubscribeGroupEvents error: "+e),void(t&&t(0,e))}0===this._webSocket.removeEventListener(n)?this._webSocket.sendRemoteMessage({unsubscribeGroupEvents:{}},17,e,t):e&&e()}subscribeDisconnectEvent(e,t,n){if(!n){const e="Invalid Or Missing Parameter: callback";return console.error("subscribeDisconnectEvent error: "+e),t&&t(0,e),null}const r=this._webSocket.addDisconnectEventListener(n);return e&&e(r),r}unsubscribeDisconnectEvent(e,t,n){if(!n){const e="Invalid Or Missing Parameter: cookie";return console.error("unsubscribeDisconnectEvent error: "+e),t&&t(0,e),!1}return this._webSocket.removeDisconnectEventListener(n)?(e&&e(),!0):(t&&t(0,"Invalid Subscription"),!1)}}class m{constructor(){this.runFunction=window.bb.apps.tc.runFunction,this.getGroup=window.bb.apps.tc.getGroup,this.setGroupSecurity=window.bb.apps.tc.setGroupSecurity,this.getAllGroups=window.bb.apps.tc.getAllGroups,this.subscribeGroupEvents=window.bb.apps.tc.subscribeGroupEvents,this.unsubscribeGroupEvents=window.bb.apps.tc.unsubscribeGroupEvents}subscribeDisconnectEvent(e,t,n){}unsubscribeDisconnectEvent(e,t,n){}}class b{constructor(e=!function(){return!!(window.bb&&window.bb.apps&&window.bb.apps.app&&window.bb.apps.event)}()){this._helperSetGroupValues=e=>{const t=new p(this._terminalProxy,e.name,e.type);return t._securityCache=e.security,t._lastUpdate=(new Date).getTime(),t},this._terminalProxy=e?new h:new m}runFunction(e,t,n,r,s){return new Promise(((o,i)=>{this._terminalProxy.runFunction(o,((e,t)=>{i(this.getErrorFromErrorMessage(e,t))}),e,t,n||null,r||null,s||null)}))}getAllGroups(){return new Promise(((e,t)=>{this._terminalProxy.getAllGroups((t=>{e(Array.from(t,this._helperSetGroupValues))}),((e,n)=>{t(this.getErrorFromErrorMessage(e,n))}))}))}getErrorFromErrorMessage(e,t){let n=null;if("object"==typeof t)if(t.stack)n=t;else{const{details:e,message:r}=t;n=new Error(r??"Unknown error"),e&&(n.details=e)}else n="string"==typeof t?new Error(t):new Error("Unknown error");return n.code=e,n}getGroup(e){return new Promise(((t,n)=>{this._terminalProxy.getAllGroups((r=>{const s=r.find((t=>t.name===e));s?t(this._helperSetGroupValues(s)):n(new Error(`Group ${e} is not found.`))}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}))}))}subscribeGroupEvents(e){return new Promise(((t,n)=>{this._terminalProxy.subscribeGroupEvents((e=>{t(e)}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}),((t,n)=>{e(this._helperSetGroupValues(t),n)}))}))}unsubscribeGroupEvents(e){return new Promise(((t,n)=>{this._terminalProxy.unsubscribeGroupEvents((()=>{t()}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}),e)}))}}const f=(window.BB=window.BB||{},window.BB.Apps=window.BB.Apps||{},window.BB.Apps.Terminal=window.BB.Apps.Terminal||new b,window.BB.Apps.Terminal),w="fdc3.contact",_="fdc3.instrument",y=e=>!!e&&/^([A-Z0-9]{5})([A-Z0-9*@#]{3})(\d)$/i.test(e),v=e=>!!e&&/\b(EQUITY)$/i.test(e),E=e=>!!e&&/^(?!B[SM]|G[GBH]|KY|VG)([A-Z]{2})(G)(((?![AEIOU_])\w){8})(\d)$/i.test(e),S=e=>!!e&&/^([A-Z]{2})([A-Z0-9]{9})(\d)$/i.test(e),I="OF_BBG_API",A=(e,t,r)=>async(s,o)=>{if(void 0===(s?.name??void 0)){const e=new ApiError(void 0,"Group event source is undefined");throw a(e),r?.(e),e}if("*"!==e&&s.name!==e||o===I)return;let i;try{i=await s.getSecurity()}catch(e){const t=n(e);throw a(t),r?.(t),t}u(`Launchpad group ${s.name} security changed to:`,i);const c=(e=>{const t={type:_,id:{BBG:e}},n=(e=>{if(e?.trim())return(e.match(/^\w+/)??[])[0]})(e);if(!n)return t;switch(!0){case y(n):t.id.CUSIP=n;break;case E(n):t.id.FIGI=n;break;case S(n):t.id.ISIN=n;break;case v(e):t.id.ticker=n}return t})(i);c.openfinBbgApi=!0,t?.(c),u("Setting new context: ",c);try{await fin.me.interop.setContext(c)}catch(e){const t=new InteropError(void 0,e);a(t),r?.(t)}},M=async()=>{let e=!0;try{await f.getAllGroups()}catch(t){const r=n(t);if(!(r instanceof TerminalConnectionError))throw a(r),r;e=!1}return u("Bloomberg terminal ready: ",e),e},C=async(e,t,r,s,o)=>{if("number"==typeof e){u(`Running terminal function in panel ${e}: `,t,r,s,o);try{await f.runFunction(t,e,r,s,o)}catch(e){const t=n(e);throw a(t),t}}else u(`Unable to run function as target ${e} is not a panel`,t,r,s,o)},G={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};G.defaultMerge;function k(e,t){return t}function O(e){return"object"!=typeof e||null===e?0:Array.isArray(e)?2:function(e){if(!F.has(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(void 0===t)return!0;const n=t.prototype;if(null===n||"object"!=typeof n||!F.has(Object.prototype.toString.call(n)))return!1;if(!n.hasOwnProperty("isPrototypeOf"))return!1;return!0}(e)?1:e instanceof Set?3:e instanceof Map?4:5}function P(e){const t=new Set;for(const n of e)for(const e of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(e);return t}function R(e,t){return"object"==typeof e&&Object.prototype.propertyIsEnumerable.call(e,t)}function x(e){return{*[Symbol.iterator](){for(const t of e)for(const e of t)yield e}}}const F=new Set(["[object Object]","[object Module]"]);function q(e){return e.at(-1)}var N=Object.freeze({__proto__:null,mergeArrays:function(e){return e.flat()},mergeMaps:function(e){return new Map(x(e))},mergeOthers:q,mergeRecords:function(e,t,n){const r={};for(const s of P(e)){const o=[];for(const t of e)R(t,s)&&o.push(t[s]);if(0===o.length)continue;const i=t.metaDataUpdater(n,{key:s,parents:e}),c=B(o,t,i);c!==G.skip&&("__proto__"===s?Object.defineProperty(r,s,{value:c,configurable:!0,enumerable:!0,writable:!0}):r[s]=c)}return r},mergeSets:function(e){return new Set(x(e))}});function T(...e){return function(e,t){const n=function(e,t){return{defaultMergeFunctions:N,mergeFunctions:{...N,...Object.fromEntries(Object.entries(e).filter((([e,t])=>Object.hasOwn(N,e))).map((([e,t])=>!1===t?[e,q]:[e,t])))},metaDataUpdater:e.metaDataUpdater??k,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,actions:G}}(e,r);function r(...e){return B(e,n,t)}return r}({})(...e)}function B(e,t,n){if(0===e.length)return;if(1===e.length)return $(e,t,n);const r=O(e[0]);if(0!==r&&5!==r)for(let s=1;s<e.length;s++)if(O(e[s])!==r)return $(e,t,n);switch(r){case 1:return function(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords)return t.defaultMergeFunctions.mergeRecords(e,t,n);return r}(e,t,n);case 2:return function(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays)return t.defaultMergeFunctions.mergeArrays(e);return r}(e,t,n);case 3:return function(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets)return t.defaultMergeFunctions.mergeSets(e);return r}(e,t,n);case 4:return function(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps)return t.defaultMergeFunctions.mergeMaps(e);return r}(e,t,n);default:return $(e,t,n)}}function $(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const D=()=>{const e=new Map,t=new Map,n={target:1,mnemonic:"DES"},r={target:1,mnemonic:"GP"},s={target:1,mnemonic:"Q"},o={target:1,mnemonic:"BIO"},i={target:1,mnemonic:"SEAR"};e.set(_,{...n}),e.set(w,{...o}),e.set("fdc3.organization",{...i});const c=new Map;c.set(_,{...r}),t.set("ViewChart",c);const a=new Map;a.set(w,{...o}),t.set("ViewContact",a);const u=new Map;u.set(_,{...n}),t.set("ViewInstrument",u);const l=new Map;return l.set(_,{...s}),t.set("ViewQuote",l),{contexts:e,intents:t}},U=async(e,t,n)=>{const r=D(),s=(e=>{const t=e=>{const[t]=e;return!!(t??"").trim()},n=[...e?.contexts?.entries()??[]].filter(t),r=[...e?.intents?.entries()??[]].filter((e=>{const[n,r]=e,s=[...r?.entries()??[]].filter(t);return!!(n??"").trim()&&s.length>0}));return{contexts:new Map(n),intents:new Map(r)}})(e),o=T(r,s),i=o.contexts,c=o.intents,p=[];let d;p.push(fin.me.interop.addContextHandler(((e,t,n)=>async r=>{r?await j(r,e,t,n):u("No context info provided, ignoring")})(i,t,n))),c.forEach(((e,r)=>{p.push(fin.me.interop.registerIntentHandler(((e,t,n)=>async r=>{u("Intent received",r);const{context:s}=r;s?e?await j(s,e,t,n):l(`No actions have been provided for intent ${r.name}, ignoring`):l("No context info provided with intent, ignoring")})(e,t,n),r))}));try{d=await Promise.all(p)}catch(e){const t=new ApiError("Failed to register interop handlers",e);throw a(t),t}return d},j=async(e,t,n,r)=>{if(n?.(e),!0===e.openfinBbgApi)return;if(u("Processing context",e),!t.has(e.type)||!t.get(e.type))return void l(`No action has been defined for context type ${e.type}, ignoring`);const s=t.get(e.type);try{switch(!0){case e.type.toUpperCase().endsWith("CONTACT"):await V(e,s);break;case e.type.toUpperCase().endsWith("INSTRUMENT"):await L(e,s);break;case e.type.toUpperCase().endsWith("ORGANIZATION"):await W(e,s);break;default:l(`Context type ${e.type} is not supported, ignoring`)}}catch(e){let t;e instanceof ApiError?t=e:(t=new ApiError(void 0,e),a(t)),r?.(t)}},V=async(e,t)=>{const{name:n}=e;if(!n)return void l("Contact context did not include a name, ignoring");if("string"==typeof t)return void l("Contact context is not compatible with group actions, ignoring");const{mnemonic:r,tails:s,target:o}=t,i=`${n} ${s??""}`.trim();await C(o,r,void 0,void 0,i)},L=async(e,t)=>{const r=(e=>{const{BBG:t,ticker:n}=e.id;return t||(n?`${n} US Equity`:void u("Instrument context does not contain a supported id",e))})(e);if(!r)return void l("Instrument context did not contain a valid security, ignoring");if("string"==typeof t)return void await(async(e,t)=>{if(u(`Setting ${"*"===e?"every group":`group ${e}`} security to ${t}`),"*"===e){const e=await f.getAllGroups();await Promise.all(e.map((e=>e.setSecurity(t,I))))}else try{const n=await f.getGroup(e);await n.setSecurity(t,I)}catch(e){const t=n(e);throw a(t),t}})(t,r);const{mnemonic:s,tails:o,target:i}=t;await C(i,s,r,void 0,o)},W=async(e,t)=>{const{name:n}=e;if(!n)return void l("Organization context did not include a name, ignoring");if("string"==typeof t)return void l("Organization context is not compatible with group actions, ignoring");const{mnemonic:r,tails:s,target:o}=t,i=`${n} ${s??""}`.trim();await C(o,r,void 0,void 0,i)};var z;!function(e){e.Bloomberg="BLOOMBERG"}(z||(z={}));const Z=async e=>{(async e=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:r,componentName:e}})}catch(t){l(`Unable to register usage for feature ${e}: ${t?.message}`)}})(z.Bloomberg);const{group:t,actions:n,onContextChanged:s,onError:o}=e??{};if(u("Creating interop connection",t,n),!await M()){const e=new TerminalConnectionError;throw a(e),e}let i;void 0!==(t??void 0)&&(i=await f.subscribeGroupEvents(A(t,s,o)),u("Launchpad group subscription created: ",i));const c=await U(n,s,o);return{disconnect:J(c,i)}},J=(e,t)=>async()=>{if(u("Disconnecting interop connection"),e&&await Promise.all(e.map((async e=>{await e.unsubscribe()}))),void 0!==(t??void 0))try{await f.unsubscribeGroupEvents(t)}catch(e){const t=new TerminalConnectionError("An error occurred during disconnection",e);a(t)}};var Y=t.MS,H=t.xc,Q=t.BT,K=t.ez,X=t.yW,ee=t.$j,te=t.U$,ne=t.U7,re=t.U5,se=t.GS,oe=t.hN,ie=t.Yc,ce=t.eE,ae=t.C1;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!*******************************!*\
  !*** ./client/src/bbgtest.ts ***!
  \*******************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/bloomberg */ "../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs");

let bbgConnection;
let selectedIntentType = "";
let selectedIntentValue = "";
let fdc3Denomination = "";
let bbgMnemonic = "";
let btnConnect;
let btnDisconnect;
let btnClearLogs;
let btnQuery;
let intentTypeElement;
let intentValueElement;
let logOutput;
window.addEventListener("DOMContentLoaded", async () => {
    // Enable logging in the BBG package
    (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
    // Initialize the DOM elements.
    initializeDOM();
});
/**
 * Initialize the DOM.
 */
function initializeDOM() {
    btnConnect = document.querySelector("#btnConnect");
    btnDisconnect = document.querySelector("#btnDisconnect");
    btnClearLogs = document.querySelector("#btnClear");
    btnQuery = document.querySelector("#btnQuery");
    intentTypeElement = document.querySelector("#intentType");
    intentValueElement = document.querySelector("#intentValue");
    logOutput = document.querySelector("#logOutput");
    if (btnConnect) {
        btnConnect.addEventListener("click", async () => {
            if (btnConnect) {
                btnConnect.disabled = true;
            }
            await connectToBBGTerminal();
            updateState();
        });
    }
    if (btnDisconnect) {
        btnDisconnect.addEventListener("click", async () => {
            if (btnDisconnect) {
                btnDisconnect.disabled = true;
            }
            await disconnectFromBBGTerminal();
            updateState();
        });
    }
    if (btnClearLogs) {
        btnClearLogs.addEventListener("click", clearLogs);
    }
    if (btnQuery) {
        btnQuery.addEventListener("click", fireIntentForBBG);
    }
    if (intentTypeElement) {
        intentTypeElement.addEventListener("change", (event) => {
            if (intentTypeElement?.value) {
                if (btnQuery) {
                    btnQuery.disabled = true;
                }
                switch (intentTypeElement?.value) {
                    case "ViewChart":
                        logInformation("Intent to be fired is ViewChart. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: GP");
                        selectedIntentType = "ViewChart";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "GP";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                    case "ViewContact":
                        logInformation("Intent to be fired is ViewContact. Content Type is fdc3.contact. Bloomberg Terminal Mnemonic: BIO");
                        selectedIntentType = "ViewContact";
                        fdc3Denomination = "fdc3.contact";
                        bbgMnemonic = "BIO";
                        populateSelect(intentValueElement, [
                            {
                                value: "William Henry Gates",
                                label: "William Henry Gates"
                            },
                            {
                                value: "Larry Ellison",
                                label: "Larry Ellison"
                            },
                            {
                                value: "Robert Iger",
                                label: "Robert Iger"
                            }
                        ]);
                        break;
                    case "ViewInstrument":
                        logInformation("Intent to be fired is ViewInstrument. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: DES");
                        selectedIntentType = "ViewInstrument";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "DES";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                    case "ViewQuote":
                        logInformation("Intent to be fired is ViewQuote. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: Q");
                        selectedIntentType = "ViewQuote";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "Q";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                }
                updateState();
            }
        });
    }
    if (intentValueElement) {
        intentValueElement.addEventListener("change", () => {
            if (intentValueElement) {
                selectedIntentValue = intentValueElement.value;
                if (selectedIntentValue.length > 0) {
                    logInformation(`action: ${selectedIntentType}, type: ${fdc3Denomination}, bbg mnemonic: ${bbgMnemonic}, search value: ${selectedIntentValue}`);
                }
                updateState();
            }
        });
    }
    updateState();
}
/**
 * Connect to Bloomberg Terminal.
 */
async function connectToBBGTerminal() {
    try {
        logInformation("Checking Bloomberg Terminal Status");
        if (!(await (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.isBloombergTerminalReady)())) {
            const error = new Error("Failed to connect to Bloomberg terminal.");
            console.log(error);
            logInformation("Failed to connect to Bloomberg terminal.");
            throw error;
        }
        bbgConnection = await (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.connect)();
        logInformation("Connection successful");
    }
    catch (error) {
        bbgConnection = undefined;
        console.log(error);
        logInformation(errorToString(error));
    }
}
/**
 * Disconnect from Bloomberg Terminal.
 */
async function disconnectFromBBGTerminal() {
    if (bbgConnection) {
        try {
            logInformation("Disconnecting from Bloomberg Terminal");
            await bbgConnection.disconnect();
        }
        finally {
            bbgConnection = undefined;
            logInformation("Disconnected from Bloomberg Terminal");
        }
    }
}
/**
 * Fire an intent.
 */
async function fireIntentForBBG() {
    if (bbgConnection) {
        try {
            logInformation(`action: ${selectedIntentType}, type: ${fdc3Denomination}, bbg mnemonic: ${bbgMnemonic}, search value: ${selectedIntentValue}`);
            let intent;
            switch (selectedIntentType) {
                case "ViewContact":
                    intent = {
                        name: selectedIntentType,
                        context: {
                            type: fdc3Denomination,
                            name: selectedIntentValue,
                            id: {}
                        }
                    };
                    break;
                default:
                    intent = {
                        name: selectedIntentType,
                        context: {
                            type: fdc3Denomination,
                            id: {
                                ticker: selectedIntentValue
                            }
                        }
                    };
                    break;
            }
            await fin.me.interop.fireIntent(intent);
        }
        catch (error) {
            logInformation(`Error while trying to raise intent: ${errorToString(error)}`);
        }
    }
    else {
        logInformation("Not connected to the Bloomberg Terminal. Please check your status or log in again.");
    }
}
/**
 * Update the state of the DOM.
 */
function updateState() {
    const isConnected = bbgConnection !== undefined;
    if (btnConnect) {
        btnConnect.disabled = isConnected;
    }
    if (btnDisconnect) {
        btnDisconnect.disabled = !isConnected;
    }
    if (intentTypeElement) {
        intentTypeElement.disabled = !isConnected;
    }
    if (intentValueElement) {
        intentValueElement.disabled = !isConnected || selectedIntentType.length === 0;
    }
    if (btnQuery) {
        btnQuery.disabled = !isConnected || selectedIntentValue.length === 0;
    }
}
/**
 * Log information to the output element.
 * @param info The information to log.
 */
function logInformation(info) {
    if (logOutput) {
        logOutput.textContent = `${logOutput.textContent}${info}\n\n`;
        logOutput.scrollTop = logOutput.scrollHeight;
    }
}
/**
 * Convert and error to a string.
 * @param err The error to convert.
 * @returns The error as a string.
 */
function errorToString(err) {
    if (err instanceof Error) {
        return err.message;
    }
    else if (typeof err === "string") {
        return err;
    }
    return JSON.stringify(err);
}
/**
 * Clear the logs.
 */
function clearLogs() {
    if (logOutput) {
        logOutput.textContent = "";
        logOutput.scrollTop = 0;
    }
}
/**
 * Populate a select control with a list of items.
 * @param select The select element to populate.
 * @param values The values to populate the element with.
 */
function populateSelect(select, values) {
    if (select) {
        select.innerHTML = "";
        const opt = document.createElement("option");
        opt.value = "";
        opt.text = "Please select value";
        opt.disabled = true;
        opt.selected = true;
        select.append(opt);
        for (const val of values) {
            const optVal = document.createElement("option");
            optVal.value = val.value;
            optVal.text = val.label;
            select.append(optVal);
        }
    }
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLEdBQUcsQ0FBQyxJQUFJLEdBQUcscUJBQXFCLENBQUM7UUFDakMsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDcEIsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDcEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVuQixLQUFLLE1BQU0sR0FBRyxJQUFJLE1BQU0sRUFBRTtZQUN6QixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUN6QixNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDeEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUN0QjtLQUNEO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ludGVncmF0ZS13aXRoLWJsb29tYmVyZy1iYXNpYy8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vYmxvb21iZXJnL29wZW5maW4uYmxvb21iZXJnLm1qcyIsIndlYnBhY2s6Ly9pbnRlZ3JhdGUtd2l0aC1ibG9vbWJlcmctYmFzaWMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRlLXdpdGgtYmxvb21iZXJnLWJhc2ljL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9pbnRlZ3JhdGUtd2l0aC1ibG9vbWJlcmctYmFzaWMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9pbnRlZ3JhdGUtd2l0aC1ibG9vbWJlcmctYmFzaWMvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9pbnRlZ3JhdGUtd2l0aC1ibG9vbWJlcmctYmFzaWMvLi9jbGllbnQvc3JjL2JiZ3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGU9e2Q6KHQsbik9Pntmb3IodmFyIHIgaW4gbillLm8obixyKSYmIWUubyh0LHIpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtlbnVtZXJhYmxlOiEwLGdldDpuW3JdfSl9LG86KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0PXt9O2UuZCh0LHtNUzooKT0+QXBpRXJyb3IseGM6KCk9PkFwcE5vdEF1dGhvcml6ZWRFcnJvcixCVDooKT0+SW50ZXJvcEVycm9yLGV6OigpPT5UZXJtaW5hbENvbW1hbmRFcnJvcix5VzooKT0+VGVybWluYWxDb25uZWN0aW9uRXJyb3IsJGo6KCk9PlosVSQ6KCk9PmksVTc6KCk9PmMsVTU6KCk9PkQsR1M6KCk9Pk0saE46KCk9PnksWWM6KCk9PnYsZUU6KCk9PkUsQzE6KCk9PlN9KTtjb25zdCBuPWU9PntpZihlIGluc3RhbmNlb2YgQXBpRXJyb3IpcmV0dXJuIGU7c3dpdGNoKCEwKXtjYXNlIGU/Lm1lc3NhZ2U/LmluZGV4T2YoXCJBUFBMSUNBVElPTl9WQUxJREFUSU9OXCIpPj0wOnJldHVybiBuZXcgQXBwTm90QXV0aG9yaXplZEVycm9yO2Nhc2UgZT8ubWVzc2FnZT8uaW5kZXhPZihcIklOVkFMSURfQ09NTUFORFwiKT49MDpjYXNlIGU/Lm1lc3NhZ2U/LmluZGV4T2YoXCJJTlZBTElEX0dST1VQX1ZBTFVFXCIpPj0wOmNhc2UgZT8ubWVzc2FnZT8uaW5kZXhPZihcIk1ORU1PTklDX05PVF9BTExPV0VEXCIpPj0wOnJldHVybiBuZXcgVGVybWluYWxDb21tYW5kRXJyb3Iodm9pZCAwLGUpO2Nhc2VcIkNvbm5lY3Rpb24gRXJyb3JcIj09PWU/Lm1lc3NhZ2U6cmV0dXJuIG5ldyBUZXJtaW5hbENvbm5lY3Rpb25FcnJvcjtkZWZhdWx0OnJldHVybiBuZXcgQXBpRXJyb3Iodm9pZCAwLGUpfX07Y2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlPVwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWRcIix0KXtzdXBlcihlKSx0JiYodGhpcy5pbm5lckVycm9yPXQpLHRoaXMuc3RhY2s9dGhpcy5zdGFjaz8ucmVwbGFjZSgvXihcXHcqRXJyb3IpLyxgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9fWNsYXNzIEFwcE5vdEF1dGhvcml6ZWRFcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKGU9XCJBcHAgbm90IGF1dGhvcml6ZWQgdG8gdXNlIFRlcm1pbmFsIENvbm5lY3QgQVBJXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgSW50ZXJvcEVycm9yIGV4dGVuZHMgQXBpRXJyb3J7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byBleGVjdXRlIHRoZSBpbnRlcm9wIGZ1bmN0aW9uXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgVGVybWluYWxDb21tYW5kRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3RvcihlPVwiRmFpbGVkIHRvIGV4ZWN1dGUgdGhlIHRlcm1pbmFsIGNvbW1hbmRcIix0KXtzdXBlcihlLHQpfX1jbGFzcyBUZXJtaW5hbENvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gY29ubmVjdCB0byBsb2NhbCB0ZXJtaW5hbCBzZXJ2aWNlXCIsdCl7c3VwZXIoZSx0KX19Y29uc3Qgcj1cIjEuMi4wXCI7bGV0IHM9ITE7Y29uc3Qgbz1cIltAb3BlbmZpbi9ibG9vbWJlcmddXCIsaT0oKT0+e3M9ITF9LGM9KCk9PntzPSEwLHUoYHYke3J9YCl9LGE9KGUsdCk9PntzJiYoZS5pbm5lckVycm9yP2NvbnNvbGUuZXJyb3IodD9gJHtvfSAke3R9YDpvLGUsXCJcXG5cXG4oaW5uZXIpXCIsZS5pbm5lckVycm9yKTpjb25zb2xlLmVycm9yKHQ/YCR7b30gJHt0fWA6byxlKSl9LHU9KC4uLmUpPT57cyYmY29uc29sZS5sb2cobywuLi5lKX0sbD0oLi4uZSk9PntzJiZjb25zb2xlLndhcm4obywuLi5lKX07XCJ1bmRlZmluZWRcIj09dHlwZW9mIGZpbiYmT2JqZWN0LmFzc2lnbih3aW5kb3cse2Zpbjp7fX0pLE9iamVjdC5hc3NpZ24oZmluLHtJbnRlZ3JhdGlvbnM6e0Jsb29tYmVyZzp7ZW5hYmxlTG9nZ2luZzpjLGRpc2FibGVMb2dnaW5nOml9fX0pO2NsYXNzIHB7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMuX2xhc3RVcGRhdGU9MCx0aGlzLl9zZWN1cml0eUNhY2hlRXhwaXJhdGlvbj0xNWUzLHRoaXMuX3NlY3VyaXR5Q2FjaGU9XCJcIix0aGlzLl9uYW1lPXQsdGhpcy5fdHlwZT1uLHRoaXMuX3Rlcm1pbmFsUHJveHk9ZX1nZXQgbmFtZSgpe3JldHVybiB0aGlzLl9uYW1lfWdldCB0eXBlKCl7cmV0dXJuIHRoaXMuX3R5cGV9Z2V0U2VjdXJpdHkoKXtyZXR1cm4gbmV3IFByb21pc2UoKChlLHQpPT57dGhpcy5fdGVybWluYWxQcm94eS5nZXRBbGxHcm91cHMoKG49Pntjb25zdCByPW4uZmluZCgoZT0+ZS5uYW1lPT09dGhpcy5fbmFtZSkpO3I/KHRoaXMuX3NlY3VyaXR5Q2FjaGU9ci5zZWN1cml0eSx0aGlzLl9sYXN0VXBkYXRlPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGUodGhpcy5fc2VjdXJpdHlDYWNoZSkpOnQobmV3IEVycm9yKGBHcm91cCAke25hbWV9IGlzIG5vdCBmb3VuZC5gKSl9KSwoKGUsbik9Pnt0KHRoaXMuZ2V0RXJyb3JGcm9tRXJyb3JNZXNzYWdlKGUsbikpfSkpfSkpfWdldENhY2hlZFNlY3VyaXR5KCl7cmV0dXJuIG5ldyBQcm9taXNlKChhc3luYyhlLHQpPT57Y29uc3Qgbj0obmV3IERhdGUpLmdldFRpbWUoKTsoIXRoaXMuX3NlY3VyaXR5Q2FjaGV8fCF0aGlzLl9sYXN0VXBkYXRlfHxuLXRoaXMuX2xhc3RVcGRhdGU+dGhpcy5fc2VjdXJpdHlDYWNoZUV4cGlyYXRpb24pJiZhd2FpdCB0aGlzLmdldFNlY3VyaXR5KCksZSh0aGlzLl9zZWN1cml0eUNhY2hlKX0pKX1zZXRTZWN1cml0eShlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4scik9Pnt0aGlzLl90ZXJtaW5hbFByb3h5LnNldEdyb3VwU2VjdXJpdHkoKCgpPT57dGhpcy5fc2VjdXJpdHlDYWNoZT1lLHRoaXMuX2xhc3RVcGRhdGU9KG5ldyBEYXRlKS5nZXRUaW1lKCksbigpfSksKChlLHQpPT57cih0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpKX0pLHRoaXMuX25hbWUsZSx0KX0pKX19ZnVuY3Rpb24gZChlKXtjb25zdCB0PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtsZXQgbixyLHMsbyxpLGMsYSx1PVwiXCIsbD0wO2Zvcig7bDxlLmxlbmd0aDspbj1lLmNoYXJDb2RlQXQobCsrKSxyPWUuY2hhckNvZGVBdChsKyspLHM9ZS5jaGFyQ29kZUF0KGwrKyksbz1uPj4yLGk9KDMmbik8PDR8cj4+NCxjPSgxNSZyKTw8MnxzPj42LGE9NjMmcyxpc05hTihyKT9jPWE9NjQ6aXNOYU4ocykmJihhPTY0KSx1PXUrdC5jaGFyQXQobykrdC5jaGFyQXQoaSkrdC5jaGFyQXQoYykrdC5jaGFyQXQoYSk7cmV0dXJuIHV9Y2xhc3MgZ3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3NlcU51bWJlcj0wLHRoaXMuX2lzQ29ubmVjdGluZz0hMSx0aGlzLl9pc0Nvbm5lY3RlZD0hMSx0aGlzLl9pc1JlZ2lzdGVyZWQ9ITEsdGhpcy5fc2Vzc2lvbklkPVwiXCIsdGhpcy5fcXVldWVkUmVxdWVzdHM9W10sdGhpcy5fcGVuZGluZ1JlcXVlc3RzPXt9LHRoaXMuX21pblBvcnRSYW5nZT01MTgwMCx0aGlzLl9tYXhQb3J0UmFuZ2U9NTE4MDAsdGhpcy5fY3VycmVudFBvcnQ9NTE4MDAsdGhpcy5fcmVzcG9uc2VUaW1lb3V0PTE1ZTMsdGhpcy5fZGlzY29ubmVjdEV2ZW50U3Vic2NyaXB0aW9ucz17fSx0aGlzLl9ncm91cEV2ZW50U3Vic2NyaXB0aW9ucz17fSx0aGlzLnNlbmRSZW1vdGVNZXNzYWdlPShlLHQsbixyKT0+e2lmKHRoaXMuX2lzUmVnaXN0ZXJlZHx8ZS5yZWdpc3Rlcnx8dGhpcy5zZW5kUmVtb3RlTWVzc2FnZSh7cmVnaXN0ZXI6e319LDEyLG51bGwsY29uc29sZS5lcnJvciksdGhpcy5fc2Vzc2lvbklkfHwodGhpcy5fc2Vzc2lvbklkPWB7JHtmdW5jdGlvbigpe2NvbnN0IGU9XCIwMTIzNDU2Nzg5QUJDREVGXCIuc3BsaXQoXCJcIik7bGV0IHQsbj1bXSxyPU1hdGgucmFuZG9tO25bOF09blsxM109blsxOF09blsyM109XCItXCIsblsxNF09XCI0XCI7Zm9yKHZhciBzPTA7czwzNjtzKyspbltzXXx8KHQ9MHwxNipyKCksbltzXT1lWzE5PT1zPzMmdHw4OjE1JnRdKTtyZXR1cm4gbi5qb2luKFwiXCIpfSgpfX1gKSxlLnNldEdyb3VwVmFsdWUmJiFlLnNldEdyb3VwVmFsdWUuY29va2llJiYoZS5zZXRHcm91cFZhbHVlLmNvb2tpZT10aGlzLl9zZXNzaW9uSWQpLGUuc3Vic2NyaWJlR3JvdXBFdmVudHMpe2NvbnN0IHQ9ZS5zdWJzY3JpYmVHcm91cEV2ZW50cy5zdWJJZDtkZWxldGUgZS5zdWJzY3JpYmVHcm91cEV2ZW50cy5zdWJJZCxyPWU9PntkZWxldGUgdGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnNbdF0sciYmcihlKX19Y29uc3Qgcz17c2Vzc2lvbklkOnRoaXMuX3Nlc3Npb25JZCxjb3JyZWxhdGlvbklkOisrdGhpcy5fc2VxTnVtYmVyLHJlcXVlc3Q6ZX0sbz1KU09OLnN0cmluZ2lmeShzKSxpPXQ+MTIsYz1pP3thcHBJZDpzLmFwcElkLHNlc3Npb25JZDpzLnNlc3Npb25JZCxjb3JyZWxhdGlvbklkOnMuY29ycmVsYXRpb25JZCxwYXlsb2FkU2NoZW1hTmFtZTpcImFwM2dfaW50ZXJuYWxcIixwYXlsb2FkU2NoZW1hVmVyc2lvbjoyLHBheWxvYWRNc2dUeXBlOnQscGF5bG9hZDpkKG8pfTp2b2lkIDAsYT17ZW52ZWxvcGU6e3NjaGVtYU5hbWU6aT9cImJscF9scGFkX21zZ1wiOlwiYmxwX3JlbW90ZV9jb250cm9sbGVyXCIsc2NoZW1hVmVyc2lvbjoyLG1lc3NhZ2U6aT9KU09OLnN0cmluZ2lmeShjKTpvfSxjb3JyZWxhdGlvbklkOnMuY29ycmVsYXRpb25JZCxleHBlY3RSZXNwb25zZTohMCxvbnN1Y2Nlc3M6bixvbmVycm9yOnJ9O3RoaXMuX3BlbmRpbmdSZXF1ZXN0c1tzLmNvcnJlbGF0aW9uSWRdPWEsdGhpcy5faXNDb25uZWN0ZWQ/dGhpcy5zZW5kUmVxdWVzdChhKToodGhpcy5fcXVldWVkUmVxdWVzdHMucHVzaChhKSx0aGlzLmNvbm5lY3QoKSl9fWFkZEV2ZW50TGlzdGVuZXIoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyh0aGlzLl9ncm91cEV2ZW50U3Vic2NyaXB0aW9ucykubGVuZ3RoKzE7cmV0dXJuIHRoaXMuX2dyb3VwRXZlbnRTdWJzY3JpcHRpb25zW3RdPWUsdH1yZW1vdmVFdmVudExpc3RlbmVyKGUpe3JldHVybiBkZWxldGUgdGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnNbZV0sT2JqZWN0LmtleXModGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnMpLmxlbmd0aH1hZGREaXNjb25uZWN0RXZlbnRMaXN0ZW5lcihlKXtjb25zdCB0PU9iamVjdC5rZXlzKHRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnMpLmxlbmd0aCsxO3JldHVybiB0aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zW3RdPWUsdH1yZW1vdmVEaXNjb25uZWN0RXZlbnRMaXN0ZW5lcihlKXtjb25zdCB0PU9iamVjdC5rZXlzKHRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnMpLmxlbmd0aDtkZWxldGUgdGhpcy5fZGlzY29ubmVjdEV2ZW50U3Vic2NyaXB0aW9uc1tlXTtyZXR1cm4gdCE9PU9iamVjdC5rZXlzKHRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnMpLmxlbmd0aH1zZW5kUmVxdWVzdChlKXtjb25zdCB0PUpTT04uc3RyaW5naWZ5KGUuZW52ZWxvcGUpO3RoaXMuX3dlYlNvY2tldCYmdGhpcy5fd2ViU29ja2V0LnNlbmQodCksZS5leHBlY3RSZXNwb25zZT9zZXRUaW1lb3V0KCgoKT0+e3RoaXMuX3BlbmRpbmdSZXF1ZXN0c1tlLmNvcnJlbGF0aW9uSWRdJiYoZGVsZXRlIHRoaXMuX3BlbmRpbmdSZXF1ZXN0c1tlLmNvcnJlbGF0aW9uSWRdLGUub25lcnJvciYmZS5vbmVycm9yKDAsXCJSZXNwb25zZSBUaW1lb3V0XCIpKX0pLHRoaXMuX3Jlc3BvbnNlVGltZW91dCk6ZGVsZXRlIHRoaXMuX3BlbmRpbmdSZXF1ZXN0c1tlLmNvcnJlbGF0aW9uSWRdfWNvbm5lY3QoKXt0cnl7aWYodGhpcy5faXNDb25uZWN0aW5nKXJldHVybjt0aGlzLl9pc0Nvbm5lY3Rpbmc9ITAsdGhpcy5fd2ViU29ja2V0PW5ldyBXZWJTb2NrZXQoXCJ3czovL2xvY2FsaG9zdDpcIit0aGlzLl9jdXJyZW50UG9ydCxcInRlcm1pbmFsX2FwaVwiKSx0aGlzLl93ZWJTb2NrZXQub25vcGVuPXRoaXMub25XZWJTb2NrZXRPcGVuLmJpbmQodGhpcyksdGhpcy5fd2ViU29ja2V0Lm9ubWVzc2FnZT10aGlzLm9uV2ViU29ja2V0TWVzc2FnZS5iaW5kKHRoaXMpLHRoaXMuX3dlYlNvY2tldC5vbmNsb3NlPXRoaXMub25XZWJTb2NrZXRDbG9zZS5iaW5kKHRoaXMpLHRoaXMuX3dlYlNvY2tldC5vbmVycm9yPXRoaXMub25XZWJTb2NrZXRFcnJvci5iaW5kKHRoaXMpfWNhdGNoKGUpe3RoaXMuX3dlYlNvY2tldD12b2lkIDAsdGhpcy5fcXVldWVkUmVxdWVzdHM9W10sdGhpcy5jYW5jZWxQZW5kaW5nUmVxdWVzdHMoXCJXZWJTb2NrZXQgRXhjZXB0aW9uIFwiK2UpLGNvbnNvbGUuZXJyb3IoZSl9fWNhbmNlbFBlbmRpbmdSZXF1ZXN0cyhlKXt0aGlzLl9pc0Nvbm5lY3RlZD0hMSx0aGlzLl9pc0Nvbm5lY3Rpbmc9ITEsdGhpcy5faXNSZWdpc3RlcmVkPSExLHRoaXMuX3Nlc3Npb25JZD1cIlwiO2ZvcihsZXQgdD0wO3Q8dGhpcy5fcXVldWVkUmVxdWVzdHMubGVuZ3RoO3QrPTEpe2NvbnN0IG49dGhpcy5fcXVldWVkUmVxdWVzdHNbdF07biYmbi5vbmVycm9yJiZuLm9uZXJyb3IoMCxlKX10aGlzLl9xdWV1ZWRSZXF1ZXN0cz1bXTtmb3IobGV0IHQgaW4gdGhpcy5fcGVuZGluZ1JlcXVlc3RzKXtjb25zdCBuPXRoaXMuX3BlbmRpbmdSZXF1ZXN0c1t0XTtuJiZuLm9uZXJyb3ImJm4ub25lcnJvcigwLGUpfXRoaXMuX3BlbmRpbmdSZXF1ZXN0cz17fX1vbldlYlNvY2tldENsb3NlKGUpe2lmKGNvbnNvbGUubG9nKFwiV2ViU29ja2V0IENsb3NlZDsgUmVhc29uOiBcIitlLnJlYXNvbitcIiwgQ29kZTogXCIrZS5jb2RlK1wiLCBXYXNDbGVhbjogXCIrZS53YXNDbGVhbiksdGhpcy5faXNDb25uZWN0ZWQpe2NvbnN0IHQ9e307ZSYmdm9pZCAwIT09ZS5yZWFzb24mJih0LnJlYXNvbj1lLnJlYXNvbiksZSYmdm9pZCAwIT09ZS5jb2RlJiYodC5jb2RlPWUuY29kZSksZSYmdm9pZCAwIT09ZS53YXNDbGVhbiYmKHQud2FzQ2xlYW49ZS53YXNDbGVhbiksdGhpcy5fY3VycmVudFBvcnQ9dGhpcy5fbWluUG9ydFJhbmdlLHRoaXMuY2FuY2VsUGVuZGluZ1JlcXVlc3RzKHtzdGF0dXM6XCJlcnJvclwiLG1lc3NhZ2U6XCJDb25uZWN0aW9uIENsb3NlZFwiLGRldGFpbHM6dH0pO2ZvcihsZXQgZSBpbiB0aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zKXtjb25zdCB0PXRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnNbZV07dCYmdChlKX19fW9uV2ViU29ja2V0RXJyb3IoKXtpZihjb25zb2xlLmxvZyhcIldlYlNvY2tldCBFcnJvcjsgIHJlYWR5U3RhdGU6IFwiKyh0aGlzLl93ZWJTb2NrZXQmJnRoaXMuX3dlYlNvY2tldC5yZWFkeVN0YXRlKSksdGhpcy5faXNDb25uZWN0aW5nPSExLHRoaXMuX2N1cnJlbnRQb3J0PHRoaXMuX21heFBvcnRSYW5nZSl0aGlzLl9jdXJyZW50UG9ydCs9MSx0aGlzLmNvbm5lY3QoKTtlbHNle3RoaXMuX2N1cnJlbnRQb3J0PXRoaXMuX21pblBvcnRSYW5nZTtjb25zdCBlPXtyZWFkeVN0YXRlOnRoaXMuX3dlYlNvY2tldCYmdGhpcy5fd2ViU29ja2V0LnJlYWR5U3RhdGV9O3RoaXMuY2FuY2VsUGVuZGluZ1JlcXVlc3RzKHtzdGF0dXM6XCJlcnJvclwiLG1lc3NhZ2U6XCJDb25uZWN0aW9uIEVycm9yXCIsZGV0YWlsczplfSl9fW9uV2ViU29ja2V0T3Blbigpe2Zvcih0aGlzLl9pc0Nvbm5lY3RlZD0hMCx0aGlzLl9pc0Nvbm5lY3Rpbmc9ITE7dGhpcy5fcXVldWVkUmVxdWVzdHMubGVuZ3RoPjA7KXRoaXMuc2VuZFJlcXVlc3QodGhpcy5fcXVldWVkUmVxdWVzdHMuc2hpZnQoKSl9b25XZWJTb2NrZXRNZXNzYWdlKGUpe3ZhciB0PWUmJmUuZGF0YT9lLmRhdGE6XCJudWxsXCIsbj1KU09OLnBhcnNlKHQpLHI9bj9KU09OLnBhcnNlKG4ubWVzc2FnZSk6bnVsbCxzPXImJnIucmVzcG9uc2U/dGhpcy5fcGVuZGluZ1JlcXVlc3RzW3IuY29ycmVsYXRpb25JZF06bnVsbDtzJiZkZWxldGUgdGhpcy5fcGVuZGluZ1JlcXVlc3RzW3IuY29ycmVsYXRpb25JZF0sdGhpcy5wcm9jZXNzUmVzcG9uc2UocyxyLnJlc3BvbnNlKX1nZXRHcm91cEluZm8oZSl7cmV0dXJuIGU/e25hbWU6ZS5uYW1lLHR5cGU6ZS50eXBlLHNlY3VyaXR5Olwic2VjdXJpdHlcIj09PWUudHlwZSYmZS52YWx1ZT9lLnZhbHVlOnZvaWQgMH06e319cHJvY2Vzc1Jlc3BvbnNlKGUsdCl7aWYodC5zdWNjZXNzKWUub25zdWNjZXNzJiZlLm9uc3VjY2VzcygpO2Vsc2UgaWYodC5yZWdpc3RyYXRpb25Db21wbGV0ZSl0aGlzLl9pc1JlZ2lzdGVyZWQ9ITAsY29uc29sZS5sb2coXCJSZWdpc3RyYXRpb24gQ29tcGxldGU7IFNlc3Npb246IFwiK3RoaXMuX3Nlc3Npb25JZCksZS5vbnN1Y2Nlc3MmJmUub25zdWNjZXNzKCk7ZWxzZSBpZih0LmdldEFsbEdyb3Vwcyl7Y29uc3Qgbj10LmdldEFsbEdyb3Vwcy5ncm91cDtlLm9uc3VjY2VzcyYmZS5vbnN1Y2Nlc3Mobj9uLm1hcCh0aGlzLmdldEdyb3VwSW5mbyk6W10pfWVsc2UgaWYodC5ncm91cFZhbHVlKWUub25zdWNjZXNzJiZlLm9uc3VjY2Vzcyh0aGlzLmdldEdyb3VwSW5mbyh0Lmdyb3VwVmFsdWUuZ3JvdXApKTtlbHNlIGlmKHQuZ3JvdXBFdmVudCl7aWYodC5ncm91cEV2ZW50LnZhbHVlQ2hhbmdlZCl7Y29uc3QgZT10Lmdyb3VwRXZlbnQudmFsdWVDaGFuZ2VkLmdyb3VwLG49dC5ncm91cEV2ZW50LnZhbHVlQ2hhbmdlZC5jb29raWU9PT10aGlzLl9zZXNzaW9uSWQ/dm9pZCAwOnQuZ3JvdXBFdmVudC52YWx1ZUNoYW5nZWQuY29va2llO2ZvcihsZXQgdCBpbiB0aGlzLl9ncm91cEV2ZW50U3Vic2NyaXB0aW9ucyl7Y29uc3Qgcj10aGlzLl9ncm91cEV2ZW50U3Vic2NyaXB0aW9uc1t0XTtyJiZyKGUsbil9fX1lbHNlIGUub25lcnJvciYmZS5vbmVycm9yKHQuZmFpbHVyZSYmdC5mYWlsdXJlLmNvZGV8fDAsdC5mYWlsdXJlP2Ake3QuZmFpbHVyZS5tZXNzYWdlfSAke3QuZmFpbHVyZS5odW1hbk1lc3NhZ2V9YDpcIlVua25vd24gUmVzcG9uc2VcIil9fWNsYXNzIGh7Y29uc3RydWN0b3IoKXt0aGlzLl93ZWJTb2NrZXQ9bmV3IGd9cnVuRnVuY3Rpb24oZSx0LG4scixzLG8saSxjKXtsZXQgYT1cIlwiO2lmKG4mJm4ubGVuZ3RoPzEhPT1yJiYyIT09ciYmMyE9PXImJjQhPT1yJiY1IT09ciYmKGE9XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBwYW5lbFwiKTphPVwiSW52YWxpZCBPciBNaXNzaW5nIFBhcmFtZXRlcjogbW5lbW9uaWNcIixhKXJldHVybiBjb25zb2xlLmVycm9yKFwicnVuRnVuY3Rpb25JblBhbmVsIGVycm9yOiBcIithKSx2b2lkKHQmJnQoMCxhKSk7Y29uc3QgdT17cnVuRnVuY3Rpb25JblBhbmVsOnttbmVtb25pYzpuLHBhbmVsOnJ9fTtpZihzKXtjb25zdCBlPVtdO2UucHVzaChzKSxvJiZlLnB1c2gobyksdS5ydW5GdW5jdGlvbkluUGFuZWwuc2VjdXJpdGllcz1lfWkmJih1LnJ1bkZ1bmN0aW9uSW5QYW5lbC50YWlscz1pKSxjJiYodS5ydW5GdW5jdGlvbkluUGFuZWwuYXBwbGljYXRpb25Qcm9wZXJ0aWVzPWMpLHRoaXMuX3dlYlNvY2tldC5zZW5kUmVtb3RlTWVzc2FnZSh1LDAsZSx0KX1nZXRBbGxHcm91cHMoZSx0KXt0aGlzLl93ZWJTb2NrZXQuc2VuZFJlbW90ZU1lc3NhZ2Uoe2dldEFsbEdyb3Vwczp7fX0sMTMsZSx0KX1nZXRHcm91cChlLHQsbil7aWYoIW58fCFuLmxlbmd0aCl7Y29uc3QgZT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IG5hbWVcIjtyZXR1cm4gY29uc29sZS5lcnJvcihlKSx2b2lkKHQmJnQoMCxlKSl9dGhpcy5fd2ViU29ja2V0LnNlbmRSZW1vdGVNZXNzYWdlKHtnZXRHcm91cFZhbHVlOntuYW1lOm59fSwxNSxlLHQpfXNldEdyb3VwU2VjdXJpdHkoZSx0LG4scixzKXtsZXQgbz1cIlwiO2lmKG4mJm4ubGVuZ3RoP3ImJnIubGVuZ3RofHwobz1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IHNlY3VyaXR5XCIpOm89XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBuYW1lXCIsbylyZXR1cm4gY29uc29sZS5lcnJvcihcInNldEdyb3VwQ29udGV4dCBlcnJvcjogXCIrbyksdm9pZCh0JiZ0KDAsbykpO3RoaXMuX3dlYlNvY2tldC5zZW5kUmVtb3RlTWVzc2FnZSh7c2V0R3JvdXBWYWx1ZTp7bmFtZTpuLHZhbHVlOnIsY29va2llOnN9fSwxNCxlLHQpfXN1YnNjcmliZUdyb3VwRXZlbnRzKGUsdCxuKXtpZighbil7Y29uc3QgZT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IGNhbGxiYWNrXCI7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJzdWJzY3JpYmVHcm91cEV2ZW50cyBlcnJvcjogXCIrZSksdm9pZCh0JiZ0KDAsZSkpfWNvbnN0IHI9dGhpcy5fd2ViU29ja2V0LmFkZEV2ZW50TGlzdGVuZXIobik7MT09PXI/dGhpcy5fd2ViU29ja2V0LnNlbmRSZW1vdGVNZXNzYWdlKHtzdWJzY3JpYmVHcm91cEV2ZW50czp7c3ViSWQ6cn19LDE2LCgoKT0+e2UmJmUocil9KSwoZT0+e3QmJnQoMCxlKX0pKTplJiZlKHIpfXVuc3Vic2NyaWJlR3JvdXBFdmVudHMoZSx0LG4pe2lmKCFuKXtjb25zdCBlPVwiSW52YWxpZCBPciBNaXNzaW5nIFBhcmFtZXRlcjogY29va2llXCI7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1bnN1YnNjcmliZUdyb3VwRXZlbnRzIGVycm9yOiBcIitlKSx2b2lkKHQmJnQoMCxlKSl9MD09PXRoaXMuX3dlYlNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKG4pP3RoaXMuX3dlYlNvY2tldC5zZW5kUmVtb3RlTWVzc2FnZSh7dW5zdWJzY3JpYmVHcm91cEV2ZW50czp7fX0sMTcsZSx0KTplJiZlKCl9c3Vic2NyaWJlRGlzY29ubmVjdEV2ZW50KGUsdCxuKXtpZighbil7Y29uc3QgZT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IGNhbGxiYWNrXCI7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJzdWJzY3JpYmVEaXNjb25uZWN0RXZlbnQgZXJyb3I6IFwiK2UpLHQmJnQoMCxlKSxudWxsfWNvbnN0IHI9dGhpcy5fd2ViU29ja2V0LmFkZERpc2Nvbm5lY3RFdmVudExpc3RlbmVyKG4pO3JldHVybiBlJiZlKHIpLHJ9dW5zdWJzY3JpYmVEaXNjb25uZWN0RXZlbnQoZSx0LG4pe2lmKCFuKXtjb25zdCBlPVwiSW52YWxpZCBPciBNaXNzaW5nIFBhcmFtZXRlcjogY29va2llXCI7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1bnN1YnNjcmliZURpc2Nvbm5lY3RFdmVudCBlcnJvcjogXCIrZSksdCYmdCgwLGUpLCExfXJldHVybiB0aGlzLl93ZWJTb2NrZXQucmVtb3ZlRGlzY29ubmVjdEV2ZW50TGlzdGVuZXIobik/KGUmJmUoKSwhMCk6KHQmJnQoMCxcIkludmFsaWQgU3Vic2NyaXB0aW9uXCIpLCExKX19Y2xhc3MgbXtjb25zdHJ1Y3Rvcigpe3RoaXMucnVuRnVuY3Rpb249d2luZG93LmJiLmFwcHMudGMucnVuRnVuY3Rpb24sdGhpcy5nZXRHcm91cD13aW5kb3cuYmIuYXBwcy50Yy5nZXRHcm91cCx0aGlzLnNldEdyb3VwU2VjdXJpdHk9d2luZG93LmJiLmFwcHMudGMuc2V0R3JvdXBTZWN1cml0eSx0aGlzLmdldEFsbEdyb3Vwcz13aW5kb3cuYmIuYXBwcy50Yy5nZXRBbGxHcm91cHMsdGhpcy5zdWJzY3JpYmVHcm91cEV2ZW50cz13aW5kb3cuYmIuYXBwcy50Yy5zdWJzY3JpYmVHcm91cEV2ZW50cyx0aGlzLnVuc3Vic2NyaWJlR3JvdXBFdmVudHM9d2luZG93LmJiLmFwcHMudGMudW5zdWJzY3JpYmVHcm91cEV2ZW50c31zdWJzY3JpYmVEaXNjb25uZWN0RXZlbnQoZSx0LG4pe311bnN1YnNjcmliZURpc2Nvbm5lY3RFdmVudChlLHQsbil7fX1jbGFzcyBie2NvbnN0cnVjdG9yKGU9IWZ1bmN0aW9uKCl7cmV0dXJuISEod2luZG93LmJiJiZ3aW5kb3cuYmIuYXBwcyYmd2luZG93LmJiLmFwcHMuYXBwJiZ3aW5kb3cuYmIuYXBwcy5ldmVudCl9KCkpe3RoaXMuX2hlbHBlclNldEdyb3VwVmFsdWVzPWU9Pntjb25zdCB0PW5ldyBwKHRoaXMuX3Rlcm1pbmFsUHJveHksZS5uYW1lLGUudHlwZSk7cmV0dXJuIHQuX3NlY3VyaXR5Q2FjaGU9ZS5zZWN1cml0eSx0Ll9sYXN0VXBkYXRlPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHR9LHRoaXMuX3Rlcm1pbmFsUHJveHk9ZT9uZXcgaDpuZXcgbX1ydW5GdW5jdGlvbihlLHQsbixyLHMpe3JldHVybiBuZXcgUHJvbWlzZSgoKG8saSk9Pnt0aGlzLl90ZXJtaW5hbFByb3h5LnJ1bkZ1bmN0aW9uKG8sKChlLHQpPT57aSh0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpKX0pLGUsdCxufHxudWxsLHJ8fG51bGwsc3x8bnVsbCl9KSl9Z2V0QWxsR3JvdXBzKCl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMuX3Rlcm1pbmFsUHJveHkuZ2V0QWxsR3JvdXBzKCh0PT57ZShBcnJheS5mcm9tKHQsdGhpcy5faGVscGVyU2V0R3JvdXBWYWx1ZXMpKX0pLCgoZSxuKT0+e3QodGhpcy5nZXRFcnJvckZyb21FcnJvck1lc3NhZ2UoZSxuKSl9KSl9KSl9Z2V0RXJyb3JGcm9tRXJyb3JNZXNzYWdlKGUsdCl7bGV0IG49bnVsbDtpZihcIm9iamVjdFwiPT10eXBlb2YgdClpZih0LnN0YWNrKW49dDtlbHNle2NvbnN0e2RldGFpbHM6ZSxtZXNzYWdlOnJ9PXQ7bj1uZXcgRXJyb3Iocj8/XCJVbmtub3duIGVycm9yXCIpLGUmJihuLmRldGFpbHM9ZSl9ZWxzZSBuPVwic3RyaW5nXCI9PXR5cGVvZiB0P25ldyBFcnJvcih0KTpuZXcgRXJyb3IoXCJVbmtub3duIGVycm9yXCIpO3JldHVybiBuLmNvZGU9ZSxufWdldEdyb3VwKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbik9Pnt0aGlzLl90ZXJtaW5hbFByb3h5LmdldEFsbEdyb3Vwcygocj0+e2NvbnN0IHM9ci5maW5kKCh0PT50Lm5hbWU9PT1lKSk7cz90KHRoaXMuX2hlbHBlclNldEdyb3VwVmFsdWVzKHMpKTpuKG5ldyBFcnJvcihgR3JvdXAgJHtlfSBpcyBub3QgZm91bmQuYCkpfSksKChlLHQpPT57bih0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpKX0pKX0pKX1zdWJzY3JpYmVHcm91cEV2ZW50cyhlKXtyZXR1cm4gbmV3IFByb21pc2UoKCh0LG4pPT57dGhpcy5fdGVybWluYWxQcm94eS5zdWJzY3JpYmVHcm91cEV2ZW50cygoZT0+e3QoZSl9KSwoKGUsdCk9PntuKHRoaXMuZ2V0RXJyb3JGcm9tRXJyb3JNZXNzYWdlKGUsdCkpfSksKCh0LG4pPT57ZSh0aGlzLl9oZWxwZXJTZXRHcm91cFZhbHVlcyh0KSxuKX0pKX0pKX11bnN1YnNjcmliZUdyb3VwRXZlbnRzKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbik9Pnt0aGlzLl90ZXJtaW5hbFByb3h5LnVuc3Vic2NyaWJlR3JvdXBFdmVudHMoKCgpPT57dCgpfSksKChlLHQpPT57bih0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpKX0pLGUpfSkpfX1jb25zdCBmPSh3aW5kb3cuQkI9d2luZG93LkJCfHx7fSx3aW5kb3cuQkIuQXBwcz13aW5kb3cuQkIuQXBwc3x8e30sd2luZG93LkJCLkFwcHMuVGVybWluYWw9d2luZG93LkJCLkFwcHMuVGVybWluYWx8fG5ldyBiLHdpbmRvdy5CQi5BcHBzLlRlcm1pbmFsKSx3PVwiZmRjMy5jb250YWN0XCIsXz1cImZkYzMuaW5zdHJ1bWVudFwiLHk9ZT0+ISFlJiYvXihbQS1aMC05XXs1fSkoW0EtWjAtOSpAI117M30pKFxcZCkkL2kudGVzdChlKSx2PWU9PiEhZSYmL1xcYihFUVVJVFkpJC9pLnRlc3QoZSksRT1lPT4hIWUmJi9eKD8hQltTTV18R1tHQkhdfEtZfFZHKShbQS1aXXsyfSkoRykoKCg/IVtBRUlPVV9dKVxcdyl7OH0pKFxcZCkkL2kudGVzdChlKSxTPWU9PiEhZSYmL14oW0EtWl17Mn0pKFtBLVowLTldezl9KShcXGQpJC9pLnRlc3QoZSksST1cIk9GX0JCR19BUElcIixBPShlLHQscik9PmFzeW5jKHMsbyk9PntpZih2b2lkIDA9PT0ocz8ubmFtZT8/dm9pZCAwKSl7Y29uc3QgZT1uZXcgQXBpRXJyb3Iodm9pZCAwLFwiR3JvdXAgZXZlbnQgc291cmNlIGlzIHVuZGVmaW5lZFwiKTt0aHJvdyBhKGUpLHI/LihlKSxlfWlmKFwiKlwiIT09ZSYmcy5uYW1lIT09ZXx8bz09PUkpcmV0dXJuO2xldCBpO3RyeXtpPWF3YWl0IHMuZ2V0U2VjdXJpdHkoKX1jYXRjaChlKXtjb25zdCB0PW4oZSk7dGhyb3cgYSh0KSxyPy4odCksdH11KGBMYXVuY2hwYWQgZ3JvdXAgJHtzLm5hbWV9IHNlY3VyaXR5IGNoYW5nZWQgdG86YCxpKTtjb25zdCBjPShlPT57Y29uc3QgdD17dHlwZTpfLGlkOntCQkc6ZX19LG49KGU9PntpZihlPy50cmltKCkpcmV0dXJuKGUubWF0Y2goL15cXHcrLyk/P1tdKVswXX0pKGUpO2lmKCFuKXJldHVybiB0O3N3aXRjaCghMCl7Y2FzZSB5KG4pOnQuaWQuQ1VTSVA9bjticmVhaztjYXNlIEUobik6dC5pZC5GSUdJPW47YnJlYWs7Y2FzZSBTKG4pOnQuaWQuSVNJTj1uO2JyZWFrO2Nhc2UgdihlKTp0LmlkLnRpY2tlcj1ufXJldHVybiB0fSkoaSk7Yy5vcGVuZmluQmJnQXBpPSEwLHQ/LihjKSx1KFwiU2V0dGluZyBuZXcgY29udGV4dDogXCIsYyk7dHJ5e2F3YWl0IGZpbi5tZS5pbnRlcm9wLnNldENvbnRleHQoYyl9Y2F0Y2goZSl7Y29uc3QgdD1uZXcgSW50ZXJvcEVycm9yKHZvaWQgMCxlKTthKHQpLHI/Lih0KX19LE09YXN5bmMoKT0+e2xldCBlPSEwO3RyeXthd2FpdCBmLmdldEFsbEdyb3VwcygpfWNhdGNoKHQpe2NvbnN0IHI9bih0KTtpZighKHIgaW5zdGFuY2VvZiBUZXJtaW5hbENvbm5lY3Rpb25FcnJvcikpdGhyb3cgYShyKSxyO2U9ITF9cmV0dXJuIHUoXCJCbG9vbWJlcmcgdGVybWluYWwgcmVhZHk6IFwiLGUpLGV9LEM9YXN5bmMoZSx0LHIscyxvKT0+e2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXt1KGBSdW5uaW5nIHRlcm1pbmFsIGZ1bmN0aW9uIGluIHBhbmVsICR7ZX06IGAsdCxyLHMsbyk7dHJ5e2F3YWl0IGYucnVuRnVuY3Rpb24odCxlLHIscyxvKX1jYXRjaChlKXtjb25zdCB0PW4oZSk7dGhyb3cgYSh0KSx0fX1lbHNlIHUoYFVuYWJsZSB0byBydW4gZnVuY3Rpb24gYXMgdGFyZ2V0ICR7ZX0gaXMgbm90IGEgcGFuZWxgLHQscixzLG8pfSxHPXtkZWZhdWx0TWVyZ2U6U3ltYm9sKFwiZGVlcG1lcmdlLXRzOiBkZWZhdWx0IG1lcmdlXCIpLHNraXA6U3ltYm9sKFwiZGVlcG1lcmdlLXRzOiBza2lwXCIpfTtHLmRlZmF1bHRNZXJnZTtmdW5jdGlvbiBrKGUsdCl7cmV0dXJuIHR9ZnVuY3Rpb24gTyhlKXtyZXR1cm5cIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWU/MDpBcnJheS5pc0FycmF5KGUpPzI6ZnVuY3Rpb24oZSl7aWYoIUYuaGFzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkpcmV0dXJuITE7Y29uc3R7Y29uc3RydWN0b3I6dH09ZTtpZih2b2lkIDA9PT10KXJldHVybiEwO2NvbnN0IG49dC5wcm90b3R5cGU7aWYobnVsbD09PW58fFwib2JqZWN0XCIhPXR5cGVvZiBufHwhRi5oYXMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4pKSlyZXR1cm4hMTtpZighbi5oYXNPd25Qcm9wZXJ0eShcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITE7cmV0dXJuITB9KGUpPzE6ZSBpbnN0YW5jZW9mIFNldD8zOmUgaW5zdGFuY2VvZiBNYXA/NDo1fWZ1bmN0aW9uIFAoZSl7Y29uc3QgdD1uZXcgU2V0O2Zvcihjb25zdCBuIG9mIGUpZm9yKGNvbnN0IGUgb2ZbLi4uT2JqZWN0LmtleXMobiksLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhuKV0pdC5hZGQoZSk7cmV0dXJuIHR9ZnVuY3Rpb24gUihlLHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSx0KX1mdW5jdGlvbiB4KGUpe3JldHVybnsqW1N5bWJvbC5pdGVyYXRvcl0oKXtmb3IoY29uc3QgdCBvZiBlKWZvcihjb25zdCBlIG9mIHQpeWllbGQgZX19fWNvbnN0IEY9bmV3IFNldChbXCJbb2JqZWN0IE9iamVjdF1cIixcIltvYmplY3QgTW9kdWxlXVwiXSk7ZnVuY3Rpb24gcShlKXtyZXR1cm4gZS5hdCgtMSl9dmFyIE49T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsbWVyZ2VBcnJheXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmxhdCgpfSxtZXJnZU1hcHM6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNYXAoeChlKSl9LG1lcmdlT3RoZXJzOnEsbWVyZ2VSZWNvcmRzOmZ1bmN0aW9uKGUsdCxuKXtjb25zdCByPXt9O2Zvcihjb25zdCBzIG9mIFAoZSkpe2NvbnN0IG89W107Zm9yKGNvbnN0IHQgb2YgZSlSKHQscykmJm8ucHVzaCh0W3NdKTtpZigwPT09by5sZW5ndGgpY29udGludWU7Y29uc3QgaT10Lm1ldGFEYXRhVXBkYXRlcihuLHtrZXk6cyxwYXJlbnRzOmV9KSxjPUIobyx0LGkpO2MhPT1HLnNraXAmJihcIl9fcHJvdG9fX1wiPT09cz9PYmplY3QuZGVmaW5lUHJvcGVydHkocixzLHt2YWx1ZTpjLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6cltzXT1jKX1yZXR1cm4gcn0sbWVyZ2VTZXRzOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgU2V0KHgoZSkpfX0pO2Z1bmN0aW9uIFQoLi4uZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1mdW5jdGlvbihlLHQpe3JldHVybntkZWZhdWx0TWVyZ2VGdW5jdGlvbnM6TixtZXJnZUZ1bmN0aW9uczp7Li4uTiwuLi5PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZSkuZmlsdGVyKCgoW2UsdF0pPT5PYmplY3QuaGFzT3duKE4sZSkpKS5tYXAoKChbZSx0XSk9PiExPT09dD9bZSxxXTpbZSx0XSkpKX0sbWV0YURhdGFVcGRhdGVyOmUubWV0YURhdGFVcGRhdGVyPz9rLGRlZXBtZXJnZTp0LHVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmc6ZS5lbmFibGVJbXBsaWNpdERlZmF1bHRNZXJnaW5nPz8hMSxhY3Rpb25zOkd9fShlLHIpO2Z1bmN0aW9uIHIoLi4uZSl7cmV0dXJuIEIoZSxuLHQpfXJldHVybiByfSh7fSkoLi4uZSl9ZnVuY3Rpb24gQihlLHQsbil7aWYoMD09PWUubGVuZ3RoKXJldHVybjtpZigxPT09ZS5sZW5ndGgpcmV0dXJuICQoZSx0LG4pO2NvbnN0IHI9TyhlWzBdKTtpZigwIT09ciYmNSE9PXIpZm9yKGxldCBzPTE7czxlLmxlbmd0aDtzKyspaWYoTyhlW3NdKSE9PXIpcmV0dXJuICQoZSx0LG4pO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtjb25zdCByPXQubWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzKGUsdCxuKTtpZihyPT09Ry5kZWZhdWx0TWVyZ2V8fHQudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyYmdm9pZCAwPT09ciYmdC5tZXJnZUZ1bmN0aW9ucy5tZXJnZVJlY29yZHMhPT10LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZVJlY29yZHMpcmV0dXJuIHQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3JkcyhlLHQsbik7cmV0dXJuIHJ9KGUsdCxuKTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtjb25zdCByPXQubWVyZ2VGdW5jdGlvbnMubWVyZ2VBcnJheXMoZSx0LG4pO2lmKHI9PT1HLmRlZmF1bHRNZXJnZXx8dC51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nJiZ2b2lkIDA9PT1yJiZ0Lm1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzIT09dC5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VBcnJheXMpcmV0dXJuIHQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzKGUpO3JldHVybiByfShlLHQsbik7Y2FzZSAzOnJldHVybiBmdW5jdGlvbihlLHQsbil7Y29uc3Qgcj10Lm1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cyhlLHQsbik7aWYocj09PUcuZGVmYXVsdE1lcmdlfHx0LnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcmJnZvaWQgMD09PXImJnQubWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzIT09dC5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzKXJldHVybiB0LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZVNldHMoZSk7cmV0dXJuIHJ9KGUsdCxuKTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtjb25zdCByPXQubWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzKGUsdCxuKTtpZihyPT09Ry5kZWZhdWx0TWVyZ2V8fHQudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyYmdm9pZCAwPT09ciYmdC5tZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHMhPT10LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHMpcmV0dXJuIHQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlTWFwcyhlKTtyZXR1cm4gcn0oZSx0LG4pO2RlZmF1bHQ6cmV0dXJuICQoZSx0LG4pfX1mdW5jdGlvbiAkKGUsdCxuKXtjb25zdCByPXQubWVyZ2VGdW5jdGlvbnMubWVyZ2VPdGhlcnMoZSx0LG4pO3JldHVybiByPT09Ry5kZWZhdWx0TWVyZ2V8fHQudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyYmdm9pZCAwPT09ciYmdC5tZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycyE9PXQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzP3QuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzKGUpOnJ9Y29uc3QgRD0oKT0+e2NvbnN0IGU9bmV3IE1hcCx0PW5ldyBNYXAsbj17dGFyZ2V0OjEsbW5lbW9uaWM6XCJERVNcIn0scj17dGFyZ2V0OjEsbW5lbW9uaWM6XCJHUFwifSxzPXt0YXJnZXQ6MSxtbmVtb25pYzpcIlFcIn0sbz17dGFyZ2V0OjEsbW5lbW9uaWM6XCJCSU9cIn0saT17dGFyZ2V0OjEsbW5lbW9uaWM6XCJTRUFSXCJ9O2Uuc2V0KF8sey4uLm59KSxlLnNldCh3LHsuLi5vfSksZS5zZXQoXCJmZGMzLm9yZ2FuaXphdGlvblwiLHsuLi5pfSk7Y29uc3QgYz1uZXcgTWFwO2Muc2V0KF8sey4uLnJ9KSx0LnNldChcIlZpZXdDaGFydFwiLGMpO2NvbnN0IGE9bmV3IE1hcDthLnNldCh3LHsuLi5vfSksdC5zZXQoXCJWaWV3Q29udGFjdFwiLGEpO2NvbnN0IHU9bmV3IE1hcDt1LnNldChfLHsuLi5ufSksdC5zZXQoXCJWaWV3SW5zdHJ1bWVudFwiLHUpO2NvbnN0IGw9bmV3IE1hcDtyZXR1cm4gbC5zZXQoXyx7Li4uc30pLHQuc2V0KFwiVmlld1F1b3RlXCIsbCkse2NvbnRleHRzOmUsaW50ZW50czp0fX0sVT1hc3luYyhlLHQsbik9Pntjb25zdCByPUQoKSxzPShlPT57Y29uc3QgdD1lPT57Y29uc3RbdF09ZTtyZXR1cm4hISh0Pz9cIlwiKS50cmltKCl9LG49Wy4uLmU/LmNvbnRleHRzPy5lbnRyaWVzKCk/P1tdXS5maWx0ZXIodCkscj1bLi4uZT8uaW50ZW50cz8uZW50cmllcygpPz9bXV0uZmlsdGVyKChlPT57Y29uc3RbbixyXT1lLHM9Wy4uLnI/LmVudHJpZXMoKT8/W11dLmZpbHRlcih0KTtyZXR1cm4hIShuPz9cIlwiKS50cmltKCkmJnMubGVuZ3RoPjB9KSk7cmV0dXJue2NvbnRleHRzOm5ldyBNYXAobiksaW50ZW50czpuZXcgTWFwKHIpfX0pKGUpLG89VChyLHMpLGk9by5jb250ZXh0cyxjPW8uaW50ZW50cyxwPVtdO2xldCBkO3AucHVzaChmaW4ubWUuaW50ZXJvcC5hZGRDb250ZXh0SGFuZGxlcigoKGUsdCxuKT0+YXN5bmMgcj0+e3I/YXdhaXQgaihyLGUsdCxuKTp1KFwiTm8gY29udGV4dCBpbmZvIHByb3ZpZGVkLCBpZ25vcmluZ1wiKX0pKGksdCxuKSkpLGMuZm9yRWFjaCgoKGUscik9PntwLnB1c2goZmluLm1lLmludGVyb3AucmVnaXN0ZXJJbnRlbnRIYW5kbGVyKCgoZSx0LG4pPT5hc3luYyByPT57dShcIkludGVudCByZWNlaXZlZFwiLHIpO2NvbnN0e2NvbnRleHQ6c309cjtzP2U/YXdhaXQgaihzLGUsdCxuKTpsKGBObyBhY3Rpb25zIGhhdmUgYmVlbiBwcm92aWRlZCBmb3IgaW50ZW50ICR7ci5uYW1lfSwgaWdub3JpbmdgKTpsKFwiTm8gY29udGV4dCBpbmZvIHByb3ZpZGVkIHdpdGggaW50ZW50LCBpZ25vcmluZ1wiKX0pKGUsdCxuKSxyKSl9KSk7dHJ5e2Q9YXdhaXQgUHJvbWlzZS5hbGwocCl9Y2F0Y2goZSl7Y29uc3QgdD1uZXcgQXBpRXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgaW50ZXJvcCBoYW5kbGVyc1wiLGUpO3Rocm93IGEodCksdH1yZXR1cm4gZH0saj1hc3luYyhlLHQsbixyKT0+e2lmKG4/LihlKSwhMD09PWUub3BlbmZpbkJiZ0FwaSlyZXR1cm47aWYodShcIlByb2Nlc3NpbmcgY29udGV4dFwiLGUpLCF0LmhhcyhlLnR5cGUpfHwhdC5nZXQoZS50eXBlKSlyZXR1cm4gdm9pZCBsKGBObyBhY3Rpb24gaGFzIGJlZW4gZGVmaW5lZCBmb3IgY29udGV4dCB0eXBlICR7ZS50eXBlfSwgaWdub3JpbmdgKTtjb25zdCBzPXQuZ2V0KGUudHlwZSk7dHJ5e3N3aXRjaCghMCl7Y2FzZSBlLnR5cGUudG9VcHBlckNhc2UoKS5lbmRzV2l0aChcIkNPTlRBQ1RcIik6YXdhaXQgVihlLHMpO2JyZWFrO2Nhc2UgZS50eXBlLnRvVXBwZXJDYXNlKCkuZW5kc1dpdGgoXCJJTlNUUlVNRU5UXCIpOmF3YWl0IEwoZSxzKTticmVhaztjYXNlIGUudHlwZS50b1VwcGVyQ2FzZSgpLmVuZHNXaXRoKFwiT1JHQU5JWkFUSU9OXCIpOmF3YWl0IFcoZSxzKTticmVhaztkZWZhdWx0OmwoYENvbnRleHQgdHlwZSAke2UudHlwZX0gaXMgbm90IHN1cHBvcnRlZCwgaWdub3JpbmdgKX19Y2F0Y2goZSl7bGV0IHQ7ZSBpbnN0YW5jZW9mIEFwaUVycm9yP3Q9ZToodD1uZXcgQXBpRXJyb3Iodm9pZCAwLGUpLGEodCkpLHI/Lih0KX19LFY9YXN5bmMoZSx0KT0+e2NvbnN0e25hbWU6bn09ZTtpZighbilyZXR1cm4gdm9pZCBsKFwiQ29udGFjdCBjb250ZXh0IGRpZCBub3QgaW5jbHVkZSBhIG5hbWUsIGlnbm9yaW5nXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiB2b2lkIGwoXCJDb250YWN0IGNvbnRleHQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBncm91cCBhY3Rpb25zLCBpZ25vcmluZ1wiKTtjb25zdHttbmVtb25pYzpyLHRhaWxzOnMsdGFyZ2V0Om99PXQsaT1gJHtufSAke3M/P1wiXCJ9YC50cmltKCk7YXdhaXQgQyhvLHIsdm9pZCAwLHZvaWQgMCxpKX0sTD1hc3luYyhlLHQpPT57Y29uc3Qgcj0oZT0+e2NvbnN0e0JCRzp0LHRpY2tlcjpufT1lLmlkO3JldHVybiB0fHwobj9gJHtufSBVUyBFcXVpdHlgOnZvaWQgdShcIkluc3RydW1lbnQgY29udGV4dCBkb2VzIG5vdCBjb250YWluIGEgc3VwcG9ydGVkIGlkXCIsZSkpfSkoZSk7aWYoIXIpcmV0dXJuIHZvaWQgbChcIkluc3RydW1lbnQgY29udGV4dCBkaWQgbm90IGNvbnRhaW4gYSB2YWxpZCBzZWN1cml0eSwgaWdub3JpbmdcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIHZvaWQgYXdhaXQoYXN5bmMoZSx0KT0+e2lmKHUoYFNldHRpbmcgJHtcIipcIj09PWU/XCJldmVyeSBncm91cFwiOmBncm91cCAke2V9YH0gc2VjdXJpdHkgdG8gJHt0fWApLFwiKlwiPT09ZSl7Y29uc3QgZT1hd2FpdCBmLmdldEFsbEdyb3VwcygpO2F3YWl0IFByb21pc2UuYWxsKGUubWFwKChlPT5lLnNldFNlY3VyaXR5KHQsSSkpKSl9ZWxzZSB0cnl7Y29uc3Qgbj1hd2FpdCBmLmdldEdyb3VwKGUpO2F3YWl0IG4uc2V0U2VjdXJpdHkodCxJKX1jYXRjaChlKXtjb25zdCB0PW4oZSk7dGhyb3cgYSh0KSx0fX0pKHQscik7Y29uc3R7bW5lbW9uaWM6cyx0YWlsczpvLHRhcmdldDppfT10O2F3YWl0IEMoaSxzLHIsdm9pZCAwLG8pfSxXPWFzeW5jKGUsdCk9Pntjb25zdHtuYW1lOm59PWU7aWYoIW4pcmV0dXJuIHZvaWQgbChcIk9yZ2FuaXphdGlvbiBjb250ZXh0IGRpZCBub3QgaW5jbHVkZSBhIG5hbWUsIGlnbm9yaW5nXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiB2b2lkIGwoXCJPcmdhbml6YXRpb24gY29udGV4dCBpcyBub3QgY29tcGF0aWJsZSB3aXRoIGdyb3VwIGFjdGlvbnMsIGlnbm9yaW5nXCIpO2NvbnN0e21uZW1vbmljOnIsdGFpbHM6cyx0YXJnZXQ6b309dCxpPWAke259ICR7cz8/XCJcIn1gLnRyaW0oKTthd2FpdCBDKG8scix2b2lkIDAsdm9pZCAwLGkpfTt2YXIgejshZnVuY3Rpb24oZSl7ZS5CbG9vbWJlcmc9XCJCTE9PTUJFUkdcIn0oenx8KHo9e30pKTtjb25zdCBaPWFzeW5jIGU9PnsoYXN5bmMgZT0+e3RyeXthd2FpdCBmaW4uU3lzdGVtLnJlZ2lzdGVyVXNhZ2Uoe3R5cGU6XCJpbnRlZ3JhdGlvbi1mZWF0dXJlXCIsZGF0YTp7YXBpVmVyc2lvbjpyLGNvbXBvbmVudE5hbWU6ZX19KX1jYXRjaCh0KXtsKGBVbmFibGUgdG8gcmVnaXN0ZXIgdXNhZ2UgZm9yIGZlYXR1cmUgJHtlfTogJHt0Py5tZXNzYWdlfWApfX0pKHouQmxvb21iZXJnKTtjb25zdHtncm91cDp0LGFjdGlvbnM6bixvbkNvbnRleHRDaGFuZ2VkOnMsb25FcnJvcjpvfT1lPz97fTtpZih1KFwiQ3JlYXRpbmcgaW50ZXJvcCBjb25uZWN0aW9uXCIsdCxuKSwhYXdhaXQgTSgpKXtjb25zdCBlPW5ldyBUZXJtaW5hbENvbm5lY3Rpb25FcnJvcjt0aHJvdyBhKGUpLGV9bGV0IGk7dm9pZCAwIT09KHQ/P3ZvaWQgMCkmJihpPWF3YWl0IGYuc3Vic2NyaWJlR3JvdXBFdmVudHMoQSh0LHMsbykpLHUoXCJMYXVuY2hwYWQgZ3JvdXAgc3Vic2NyaXB0aW9uIGNyZWF0ZWQ6IFwiLGkpKTtjb25zdCBjPWF3YWl0IFUobixzLG8pO3JldHVybntkaXNjb25uZWN0OkooYyxpKX19LEo9KGUsdCk9PmFzeW5jKCk9PntpZih1KFwiRGlzY29ubmVjdGluZyBpbnRlcm9wIGNvbm5lY3Rpb25cIiksZSYmYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jIGU9Pnthd2FpdCBlLnVuc3Vic2NyaWJlKCl9KSkpLHZvaWQgMCE9PSh0Pz92b2lkIDApKXRyeXthd2FpdCBmLnVuc3Vic2NyaWJlR3JvdXBFdmVudHModCl9Y2F0Y2goZSl7Y29uc3QgdD1uZXcgVGVybWluYWxDb25uZWN0aW9uRXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgZGlzY29ubmVjdGlvblwiLGUpO2EodCl9fTt2YXIgWT10Lk1TLEg9dC54YyxRPXQuQlQsSz10LmV6LFg9dC55VyxlZT10LiRqLHRlPXQuVSQsbmU9dC5VNyxyZT10LlU1LHNlPXQuR1Msb2U9dC5oTixpZT10LlljLGNlPXQuZUUsYWU9dC5DMTtleHBvcnR7WSBhcyBBcGlFcnJvcixIIGFzIEFwcE5vdEF1dGhvcml6ZWRFcnJvcixRIGFzIEludGVyb3BFcnJvcixLIGFzIFRlcm1pbmFsQ29tbWFuZEVycm9yLFggYXMgVGVybWluYWxDb25uZWN0aW9uRXJyb3IsZWUgYXMgY29ubmVjdCx0ZSBhcyBkaXNhYmxlTG9nZ2luZyxuZSBhcyBlbmFibGVMb2dnaW5nLHJlIGFzIGdldERlZmF1bHRBY3Rpb25zLHNlIGFzIGlzQmxvb21iZXJnVGVybWluYWxSZWFkeSxvZSBhcyBpc0N1c2lwLGllIGFzIGlzRXF1aXR5LGNlIGFzIGlzRmlnaSxhZSBhcyBpc0lzaW59OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHtcblx0Y29ubmVjdCxcblx0ZW5hYmxlTG9nZ2luZyxcblx0aXNCbG9vbWJlcmdUZXJtaW5hbFJlYWR5LFxuXHR0eXBlIEJsb29tYmVyZ0Nvbm5lY3Rpb25cbn0gZnJvbSBcIkBvcGVuZmluL2Jsb29tYmVyZ1wiO1xuaW1wb3J0IHR5cGUgT3BlbkZpbiBmcm9tIFwiQG9wZW5maW4vY29yZVwiO1xuXG5sZXQgYmJnQ29ubmVjdGlvbjogQmxvb21iZXJnQ29ubmVjdGlvbiB8IHVuZGVmaW5lZDtcblxubGV0IHNlbGVjdGVkSW50ZW50VHlwZTogc3RyaW5nID0gXCJcIjtcbmxldCBzZWxlY3RlZEludGVudFZhbHVlOiBzdHJpbmcgPSBcIlwiO1xubGV0IGZkYzNEZW5vbWluYXRpb246IHN0cmluZyA9IFwiXCI7XG5sZXQgYmJnTW5lbW9uaWM6IHN0cmluZyA9IFwiXCI7XG5cbmxldCBidG5Db25uZWN0OiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XG5sZXQgYnRuRGlzY29ubmVjdDogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsO1xubGV0IGJ0bkNsZWFyTG9nczogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsO1xubGV0IGJ0blF1ZXJ5OiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGw7XG5sZXQgaW50ZW50VHlwZUVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbDtcbmxldCBpbnRlbnRWYWx1ZUVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbDtcbmxldCBsb2dPdXRwdXQ6IEhUTUxQcmVFbGVtZW50IHwgbnVsbDtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGFzeW5jICgpID0+IHtcblx0Ly8gRW5hYmxlIGxvZ2dpbmcgaW4gdGhlIEJCRyBwYWNrYWdlXG5cdGVuYWJsZUxvZ2dpbmcoKTtcblxuXHQvLyBJbml0aWFsaXplIHRoZSBET00gZWxlbWVudHMuXG5cdGluaXRpYWxpemVET00oKTtcbn0pO1xuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIERPTS5cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZURPTSgpOiB2b2lkIHtcblx0YnRuQ29ubmVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFwiI2J0bkNvbm5lY3RcIik7XG5cdGJ0bkRpc2Nvbm5lY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcIiNidG5EaXNjb25uZWN0XCIpO1xuXHRidG5DbGVhckxvZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcIiNidG5DbGVhclwiKTtcblx0YnRuUXVlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcIiNidG5RdWVyeVwiKTtcblx0aW50ZW50VHlwZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcIiNpbnRlbnRUeXBlXCIpO1xuXHRpbnRlbnRWYWx1ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcIiNpbnRlbnRWYWx1ZVwiKTtcblx0bG9nT3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MUHJlRWxlbWVudD4oXCIjbG9nT3V0cHV0XCIpO1xuXG5cdGlmIChidG5Db25uZWN0KSB7XG5cdFx0YnRuQ29ubmVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGJ0bkNvbm5lY3QpIHtcblx0XHRcdFx0YnRuQ29ubmVjdC5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBjb25uZWN0VG9CQkdUZXJtaW5hbCgpO1xuXHRcdFx0dXBkYXRlU3RhdGUoKTtcblx0XHR9KTtcblx0fVxuXHRpZiAoYnRuRGlzY29ubmVjdCkge1xuXHRcdGJ0bkRpc2Nvbm5lY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChidG5EaXNjb25uZWN0KSB7XG5cdFx0XHRcdGJ0bkRpc2Nvbm5lY3QuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgZGlzY29ubmVjdEZyb21CQkdUZXJtaW5hbCgpO1xuXHRcdFx0dXBkYXRlU3RhdGUoKTtcblx0XHR9KTtcblx0fVxuXHRpZiAoYnRuQ2xlYXJMb2dzKSB7XG5cdFx0YnRuQ2xlYXJMb2dzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGVhckxvZ3MpO1xuXHR9XG5cdGlmIChidG5RdWVyeSkge1xuXHRcdGJ0blF1ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmaXJlSW50ZW50Rm9yQkJHKTtcblx0fVxuXG5cdGlmIChpbnRlbnRUeXBlRWxlbWVudCkge1xuXHRcdGludGVudFR5cGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoaW50ZW50VHlwZUVsZW1lbnQ/LnZhbHVlKSB7XG5cdFx0XHRcdGlmIChidG5RdWVyeSkge1xuXHRcdFx0XHRcdGJ0blF1ZXJ5LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzd2l0Y2ggKGludGVudFR5cGVFbGVtZW50Py52YWx1ZSkge1xuXHRcdFx0XHRcdGNhc2UgXCJWaWV3Q2hhcnRcIjpcblx0XHRcdFx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRcdFx0XHRcIkludGVudCB0byBiZSBmaXJlZCBpcyBWaWV3Q2hhcnQuIENvbnRlbnQgVHlwZSBpcyBmZGMzLmluc3RydW1lbnQuIEJsb29tYmVyZyBUZXJtaW5hbCBNbmVtb25pYzogR1BcIlxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHNlbGVjdGVkSW50ZW50VHlwZSA9IFwiVmlld0NoYXJ0XCI7XG5cdFx0XHRcdFx0XHRmZGMzRGVub21pbmF0aW9uID0gXCJmZGMzLmluc3RydW1lbnRcIjtcblx0XHRcdFx0XHRcdGJiZ01uZW1vbmljID0gXCJHUFwiO1xuXHRcdFx0XHRcdFx0cG9wdWxhdGVTZWxlY3QoaW50ZW50VmFsdWVFbGVtZW50LCBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJPUkNMXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiT3JhY2xlIENvcnBcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiTVNGVFwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIk1pY3Jvc29mdFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJJQk1cIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJJQk1cIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJWaWV3Q29udGFjdFwiOlxuXHRcdFx0XHRcdFx0bG9nSW5mb3JtYXRpb24oXG5cdFx0XHRcdFx0XHRcdFwiSW50ZW50IHRvIGJlIGZpcmVkIGlzIFZpZXdDb250YWN0LiBDb250ZW50IFR5cGUgaXMgZmRjMy5jb250YWN0LiBCbG9vbWJlcmcgVGVybWluYWwgTW5lbW9uaWM6IEJJT1wiXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWRJbnRlbnRUeXBlID0gXCJWaWV3Q29udGFjdFwiO1xuXHRcdFx0XHRcdFx0ZmRjM0Rlbm9taW5hdGlvbiA9IFwiZmRjMy5jb250YWN0XCI7XG5cdFx0XHRcdFx0XHRiYmdNbmVtb25pYyA9IFwiQklPXCI7XG5cdFx0XHRcdFx0XHRwb3B1bGF0ZVNlbGVjdChpbnRlbnRWYWx1ZUVsZW1lbnQsIFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIldpbGxpYW0gSGVucnkgR2F0ZXNcIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJXaWxsaWFtIEhlbnJ5IEdhdGVzXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIkxhcnJ5IEVsbGlzb25cIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJMYXJyeSBFbGxpc29uXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIlJvYmVydCBJZ2VyXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiUm9iZXJ0IElnZXJcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJWaWV3SW5zdHJ1bWVudFwiOlxuXHRcdFx0XHRcdFx0bG9nSW5mb3JtYXRpb24oXG5cdFx0XHRcdFx0XHRcdFwiSW50ZW50IHRvIGJlIGZpcmVkIGlzIFZpZXdJbnN0cnVtZW50LiBDb250ZW50IFR5cGUgaXMgZmRjMy5pbnN0cnVtZW50LiBCbG9vbWJlcmcgVGVybWluYWwgTW5lbW9uaWM6IERFU1wiXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWRJbnRlbnRUeXBlID0gXCJWaWV3SW5zdHJ1bWVudFwiO1xuXHRcdFx0XHRcdFx0ZmRjM0Rlbm9taW5hdGlvbiA9IFwiZmRjMy5pbnN0cnVtZW50XCI7XG5cdFx0XHRcdFx0XHRiYmdNbmVtb25pYyA9IFwiREVTXCI7XG5cdFx0XHRcdFx0XHRwb3B1bGF0ZVNlbGVjdChpbnRlbnRWYWx1ZUVsZW1lbnQsIFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIk9SQ0xcIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJPcmFjbGUgQ29ycFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJNU0ZUXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiTWljcm9zb2Z0XCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIklCTVwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIklCTVwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdF0pO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIlZpZXdRdW90ZVwiOlxuXHRcdFx0XHRcdFx0bG9nSW5mb3JtYXRpb24oXG5cdFx0XHRcdFx0XHRcdFwiSW50ZW50IHRvIGJlIGZpcmVkIGlzIFZpZXdRdW90ZS4gQ29udGVudCBUeXBlIGlzIGZkYzMuaW5zdHJ1bWVudC4gQmxvb21iZXJnIFRlcm1pbmFsIE1uZW1vbmljOiBRXCJcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZEludGVudFR5cGUgPSBcIlZpZXdRdW90ZVwiO1xuXHRcdFx0XHRcdFx0ZmRjM0Rlbm9taW5hdGlvbiA9IFwiZmRjMy5pbnN0cnVtZW50XCI7XG5cdFx0XHRcdFx0XHRiYmdNbmVtb25pYyA9IFwiUVwiO1xuXHRcdFx0XHRcdFx0cG9wdWxhdGVTZWxlY3QoaW50ZW50VmFsdWVFbGVtZW50LCBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJPUkNMXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiT3JhY2xlIENvcnBcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiTVNGVFwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIk1pY3Jvc29mdFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJJQk1cIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJJQk1cIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHVwZGF0ZVN0YXRlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoaW50ZW50VmFsdWVFbGVtZW50KSB7XG5cdFx0aW50ZW50VmFsdWVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0aWYgKGludGVudFZhbHVlRWxlbWVudCkge1xuXHRcdFx0XHRzZWxlY3RlZEludGVudFZhbHVlID0gaW50ZW50VmFsdWVFbGVtZW50LnZhbHVlO1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWRJbnRlbnRWYWx1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0bG9nSW5mb3JtYXRpb24oXG5cdFx0XHRcdFx0XHRgYWN0aW9uOiAke3NlbGVjdGVkSW50ZW50VHlwZX0sIHR5cGU6ICR7ZmRjM0Rlbm9taW5hdGlvbn0sIGJiZyBtbmVtb25pYzogJHtiYmdNbmVtb25pY30sIHNlYXJjaCB2YWx1ZTogJHtzZWxlY3RlZEludGVudFZhbHVlfWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHVwZGF0ZVN0YXRlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVTdGF0ZSgpO1xufVxuXG4vKipcbiAqIENvbm5lY3QgdG8gQmxvb21iZXJnIFRlcm1pbmFsLlxuICovXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0VG9CQkdUZXJtaW5hbCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0dHJ5IHtcblx0XHRsb2dJbmZvcm1hdGlvbihcIkNoZWNraW5nIEJsb29tYmVyZyBUZXJtaW5hbCBTdGF0dXNcIik7XG5cblx0XHRpZiAoIShhd2FpdCBpc0Jsb29tYmVyZ1Rlcm1pbmFsUmVhZHkoKSkpIHtcblx0XHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQmxvb21iZXJnIHRlcm1pbmFsLlwiKTtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdGxvZ0luZm9ybWF0aW9uKFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQmxvb21iZXJnIHRlcm1pbmFsLlwiKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblxuXHRcdGJiZ0Nvbm5lY3Rpb24gPSBhd2FpdCBjb25uZWN0KCk7XG5cdFx0bG9nSW5mb3JtYXRpb24oXCJDb25uZWN0aW9uIHN1Y2Nlc3NmdWxcIik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0YmJnQ29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcblx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0bG9nSW5mb3JtYXRpb24oZXJyb3JUb1N0cmluZyhlcnJvcikpO1xuXHR9XG59XG5cbi8qKlxuICogRGlzY29ubmVjdCBmcm9tIEJsb29tYmVyZyBUZXJtaW5hbC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGlzY29ubmVjdEZyb21CQkdUZXJtaW5hbCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKGJiZ0Nvbm5lY3Rpb24pIHtcblx0XHR0cnkge1xuXHRcdFx0bG9nSW5mb3JtYXRpb24oXCJEaXNjb25uZWN0aW5nIGZyb20gQmxvb21iZXJnIFRlcm1pbmFsXCIpO1xuXHRcdFx0YXdhaXQgYmJnQ29ubmVjdGlvbi5kaXNjb25uZWN0KCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdGJiZ0Nvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG5cdFx0XHRsb2dJbmZvcm1hdGlvbihcIkRpc2Nvbm5lY3RlZCBmcm9tIEJsb29tYmVyZyBUZXJtaW5hbFwiKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBGaXJlIGFuIGludGVudC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZmlyZUludGVudEZvckJCRygpOiBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKGJiZ0Nvbm5lY3Rpb24pIHtcblx0XHR0cnkge1xuXHRcdFx0bG9nSW5mb3JtYXRpb24oXG5cdFx0XHRcdGBhY3Rpb246ICR7c2VsZWN0ZWRJbnRlbnRUeXBlfSwgdHlwZTogJHtmZGMzRGVub21pbmF0aW9ufSwgYmJnIG1uZW1vbmljOiAke2JiZ01uZW1vbmljfSwgc2VhcmNoIHZhbHVlOiAke3NlbGVjdGVkSW50ZW50VmFsdWV9YFxuXHRcdFx0KTtcblxuXHRcdFx0bGV0IGludGVudDogT3BlbkZpbi5JbnRlbnQ7XG5cblx0XHRcdHN3aXRjaCAoc2VsZWN0ZWRJbnRlbnRUeXBlKSB7XG5cdFx0XHRcdGNhc2UgXCJWaWV3Q29udGFjdFwiOlxuXHRcdFx0XHRcdGludGVudCA9IHtcblx0XHRcdFx0XHRcdG5hbWU6IHNlbGVjdGVkSW50ZW50VHlwZSxcblx0XHRcdFx0XHRcdGNvbnRleHQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogZmRjM0Rlbm9taW5hdGlvbixcblx0XHRcdFx0XHRcdFx0bmFtZTogc2VsZWN0ZWRJbnRlbnRWYWx1ZSxcblx0XHRcdFx0XHRcdFx0aWQ6IHt9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRpbnRlbnQgPSB7XG5cdFx0XHRcdFx0XHRuYW1lOiBzZWxlY3RlZEludGVudFR5cGUsXG5cdFx0XHRcdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IGZkYzNEZW5vbWluYXRpb24sXG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dGlja2VyOiBzZWxlY3RlZEludGVudFZhbHVlXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRhd2FpdCBmaW4ubWUuaW50ZXJvcC5maXJlSW50ZW50KGludGVudCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxvZ0luZm9ybWF0aW9uKGBFcnJvciB3aGlsZSB0cnlpbmcgdG8gcmFpc2UgaW50ZW50OiAke2Vycm9yVG9TdHJpbmcoZXJyb3IpfWApO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRsb2dJbmZvcm1hdGlvbihcIk5vdCBjb25uZWN0ZWQgdG8gdGhlIEJsb29tYmVyZyBUZXJtaW5hbC4gUGxlYXNlIGNoZWNrIHlvdXIgc3RhdHVzIG9yIGxvZyBpbiBhZ2Fpbi5cIik7XG5cdH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgdGhlIHN0YXRlIG9mIHRoZSBET00uXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVN0YXRlKCk6IHZvaWQge1xuXHRjb25zdCBpc0Nvbm5lY3RlZCA9IGJiZ0Nvbm5lY3Rpb24gIT09IHVuZGVmaW5lZDtcblx0aWYgKGJ0bkNvbm5lY3QpIHtcblx0XHRidG5Db25uZWN0LmRpc2FibGVkID0gaXNDb25uZWN0ZWQ7XG5cdH1cblx0aWYgKGJ0bkRpc2Nvbm5lY3QpIHtcblx0XHRidG5EaXNjb25uZWN0LmRpc2FibGVkID0gIWlzQ29ubmVjdGVkO1xuXHR9XG5cdGlmIChpbnRlbnRUeXBlRWxlbWVudCkge1xuXHRcdGludGVudFR5cGVFbGVtZW50LmRpc2FibGVkID0gIWlzQ29ubmVjdGVkO1xuXHR9XG5cdGlmIChpbnRlbnRWYWx1ZUVsZW1lbnQpIHtcblx0XHRpbnRlbnRWYWx1ZUVsZW1lbnQuZGlzYWJsZWQgPSAhaXNDb25uZWN0ZWQgfHwgc2VsZWN0ZWRJbnRlbnRUeXBlLmxlbmd0aCA9PT0gMDtcblx0fVxuXHRpZiAoYnRuUXVlcnkpIHtcblx0XHRidG5RdWVyeS5kaXNhYmxlZCA9ICFpc0Nvbm5lY3RlZCB8fCBzZWxlY3RlZEludGVudFZhbHVlLmxlbmd0aCA9PT0gMDtcblx0fVxufVxuXG4vKipcbiAqIExvZyBpbmZvcm1hdGlvbiB0byB0aGUgb3V0cHV0IGVsZW1lbnQuXG4gKiBAcGFyYW0gaW5mbyBUaGUgaW5mb3JtYXRpb24gdG8gbG9nLlxuICovXG5mdW5jdGlvbiBsb2dJbmZvcm1hdGlvbihpbmZvOiBzdHJpbmcpOiB2b2lkIHtcblx0aWYgKGxvZ091dHB1dCkge1xuXHRcdGxvZ091dHB1dC50ZXh0Q29udGVudCA9IGAke2xvZ091dHB1dC50ZXh0Q29udGVudH0ke2luZm99XFxuXFxuYDtcblx0XHRsb2dPdXRwdXQuc2Nyb2xsVG9wID0gbG9nT3V0cHV0LnNjcm9sbEhlaWdodDtcblx0fVxufVxuXG4vKipcbiAqIENvbnZlcnQgYW5kIGVycm9yIHRvIGEgc3RyaW5nLlxuICogQHBhcmFtIGVyciBUaGUgZXJyb3IgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIFRoZSBlcnJvciBhcyBhIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZXJyb3JUb1N0cmluZyhlcnI6IHVua25vd24pOiBzdHJpbmcge1xuXHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRyZXR1cm4gZXJyLm1lc3NhZ2U7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGVyciA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybiBlcnI7XG5cdH1cblxuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyKTtcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgbG9ncy5cbiAqL1xuZnVuY3Rpb24gY2xlYXJMb2dzKCk6IHZvaWQge1xuXHRpZiAobG9nT3V0cHV0KSB7XG5cdFx0bG9nT3V0cHV0LnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRsb2dPdXRwdXQuc2Nyb2xsVG9wID0gMDtcblx0fVxufVxuXG4vKipcbiAqIFBvcHVsYXRlIGEgc2VsZWN0IGNvbnRyb2wgd2l0aCBhIGxpc3Qgb2YgaXRlbXMuXG4gKiBAcGFyYW0gc2VsZWN0IFRoZSBzZWxlY3QgZWxlbWVudCB0byBwb3B1bGF0ZS5cbiAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBwb3B1bGF0ZSB0aGUgZWxlbWVudCB3aXRoLlxuICovXG5mdW5jdGlvbiBwb3B1bGF0ZVNlbGVjdChzZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbCwgdmFsdWVzOiB7IHZhbHVlOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfVtdKTogdm9pZCB7XG5cdGlmIChzZWxlY3QpIHtcblx0XHRzZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXHRcdG9wdC52YWx1ZSA9IFwiXCI7XG5cdFx0b3B0LnRleHQgPSBcIlBsZWFzZSBzZWxlY3QgdmFsdWVcIjtcblx0XHRvcHQuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdG9wdC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0c2VsZWN0LmFwcGVuZChvcHQpO1xuXG5cdFx0Zm9yIChjb25zdCB2YWwgb2YgdmFsdWVzKSB7XG5cdFx0XHRjb25zdCBvcHRWYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXHRcdFx0b3B0VmFsLnZhbHVlID0gdmFsLnZhbHVlO1xuXHRcdFx0b3B0VmFsLnRleHQgPSB2YWwubGFiZWw7XG5cdFx0XHRzZWxlY3QuYXBwZW5kKG9wdFZhbCk7XG5cdFx0fVxuXHR9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=