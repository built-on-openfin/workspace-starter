/******/ var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/salesforce/openfin.salesforce.js":
/*!********************************************************************!*\
  !*** ../../node_modules/@openfin/salesforce/openfin.salesforce.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ApiError": () => (/* binding */ r),
/* harmony export */   "AuthorizationError": () => (/* binding */ o),
/* harmony export */   "ConnectionError": () => (/* binding */ s),
/* harmony export */   "ObjectDataError": () => (/* binding */ a),
/* harmony export */   "ParameterError": () => (/* binding */ c),
/* harmony export */   "QueryError": () => (/* binding */ d),
/* harmony export */   "RestApiError": () => (/* binding */ h),
/* harmony export */   "SearchError": () => (/* binding */ l),
/* harmony export */   "WorkspaceError": () => (/* binding */ u),
/* harmony export */   "connect": () => (/* binding */ p),
/* harmony export */   "disableLogging": () => (/* binding */ w),
/* harmony export */   "enableLogging": () => (/* binding */ f),
/* harmony export */   "getConnection": () => (/* binding */ y)
/* harmony export */ });
var e={9421:(e,t,n)=>{e.exports=n(8448)},994:(e,t,n)=>{var i=n(8446),r=n(8322),o=n(2058),s=n(8982),a=n(5063),c=n(9541),d=n(6497),h=n(2751),l=n(8916),u=n(5142),p=n(5822);e.exports=function(e){return new Promise((function(t,n){var w,f=e.data,y=e.headers,g=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}i.isFormData(f)&&i.isStandardBrowserEnv()&&delete y["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var C=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(C+":"+E)}var x=a(e.baseURL,e.url);function A(){if(v){var i="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:i,config:e,request:v};r((function(e){t(e),m()}),(function(e){n(e),m()}),o),v=null}}if(v.open(e.method.toUpperCase(),s(x,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=A:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(A)},v.onabort=function(){v&&(n(new l("Request aborted",l.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new l("Network Error",l.ERR_NETWORK,e,v,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||h;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new l(t,i.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,e,v)),v=null},i.isStandardBrowserEnv()){var I=(e.withCredentials||d(x))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;I&&(y[e.xsrfHeaderName]=I)}"setRequestHeader"in v&&i.forEach(y,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete y[t]:v.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(w=function(e){v&&(n(!e||e&&e.type?new u:e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w))),f||(f=null);var b=p(x);b&&-1===["http","https","file"].indexOf(b)?n(new l("Unsupported protocol "+b+":",l.ERR_BAD_REQUEST,e)):v.send(f)}))}},8448:(e,t,n)=>{var i=n(8446),r=n(8962),o=n(5495),s=n(6149),a=function e(t){var n=new o(t),a=r(o.prototype.request,n);return i.extend(a,o.prototype,n),i.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(1586));a.Axios=o,a.CanceledError=n(5142),a.CancelToken=n(543),a.isCancel=n(3452),a.VERSION=n(4474).version,a.toFormData=n(7452),a.AxiosError=n(8916),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(9067),a.isAxiosError=n(1726),e.exports=a,e.exports.default=a},543:(e,t,n)=>{var i=n(5142);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},5142:(e,t,n)=>{var i=n(8916);function r(e){i.call(this,null==e?"canceled":e,i.ERR_CANCELED),this.name="CanceledError"}n(8446).inherits(r,i,{__CANCEL__:!0}),e.exports=r},3452:e=>{e.exports=function(e){return!(!e||!e.__CANCEL__)}},5495:(e,t,n)=>{var i=n(8446),r=n(8982),o=n(9582),s=n(6862),a=n(6149),c=n(5063),d=n(1166),h=d.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&d.assertOptions(n,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!r){var l=[s,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(c),o=Promise.resolve(t);l.length;)o=o.then(l.shift(),l.shift());return o}for(var u=t;i.length;){var p=i.shift(),w=i.shift();try{u=p(u)}catch(e){w(e);break}}try{o=s(u)}catch(e){return Promise.reject(e)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},l.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return r(t,e.params,e.paramsSerializer)},i.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(a(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)})),e.exports=l},8916:(e,t,n)=>{var i=n(8446);function r(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}i.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=r.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(r,s),Object.defineProperty(o,"isAxiosError",{value:!0}),r.from=function(e,t,n,s,a,c){var d=Object.create(o);return i.toFlatObject(e,d,(function(e){return e!==Error.prototype})),r.call(d,e.message,t,n,s,a),d.name=e.name,c&&Object.assign(d,c),d},e.exports=r},9582:(e,t,n)=>{var i=n(8446);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},5063:(e,t,n)=>{var i=n(6452),r=n(1123);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},6862:(e,t,n)=>{var i=n(8446),r=n(5255),o=n(3452),s=n(1586),a=n(5142);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6149:(e,t,n)=>{var i=n(8446);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function o(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function c(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var d={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=d[e]||o,r=t(e);i.isUndefined(r)&&t!==c||(n[e]=r)})),n}},8322:(e,t,n)=>{var i=n(8916);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new i("Request failed with status code "+n.status,[i.ERR_BAD_REQUEST,i.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},5255:(e,t,n)=>{var i=n(8446),r=n(1586);e.exports=function(e,t,n){var o=this||r;return i.forEach(n,(function(n){e=n.call(o,e,t)})),e}},1586:(e,t,n)=>{var i=n(8446),r=n(1964),o=n(8916),s=n(2751),a=n(7452),c={"Content-Type":"application/x-www-form-urlencoded"};function d(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var h,l={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(h=n(994)),h),transformRequest:[function(e,t){if(r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e))return e;if(i.isArrayBufferView(e))return e.buffer;if(i.isURLSearchParams(e))return d(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,o=i.isObject(e),s=t&&t["Content-Type"];if((n=i.isFileList(e))||o&&"multipart/form-data"===s){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return o||"application/json"===s?(d(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o.from(e,o.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3313)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(c)})),e.exports=l},2751:e=>{e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},4474:e=>{e.exports={version:"0.27.2"}},8962:e=>{e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},8982:(e,t,n)=>{var i=n(8446);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},1123:e=>{e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},2058:(e,t,n)=>{var i=n(8446);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},6452:e=>{e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},1726:(e,t,n)=>{var i=n(8446);e.exports=function(e){return i.isObject(e)&&!0===e.isAxiosError}},6497:(e,t,n)=>{var i=n(8446);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},1964:(e,t,n)=>{var i=n(8446);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},3313:e=>{e.exports=null},9541:(e,t,n)=>{var i=n(8446),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},5822:e=>{e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},9067:e=>{e.exports=function(e){return function(t){return e.apply(null,t)}}},7452:(e,t,n)=>{var i=n(8446);e.exports=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":i.isDate(e)?e.toISOString():i.isArrayBuffer(e)||i.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(o,s){if(i.isPlainObject(o)||i.isArray(o)){if(-1!==n.indexOf(o))throw Error("Circular reference detected in "+s);n.push(o),i.forEach(o,(function(n,o){if(!i.isUndefined(n)){var a,c=s?s+"."+o:o;if(n&&!s&&"object"==typeof n)if(i.endsWith(o,"{}"))n=JSON.stringify(n);else if(i.endsWith(o,"[]")&&(a=i.toArray(n)))return void a.forEach((function(e){!i.isUndefined(e)&&t.append(c,r(e))}));e(n,c)}})),n.pop()}else t.append(s,r(o))}(e),t}},1166:(e,t,n)=>{var i=n(4474).version,r=n(8916),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new r(o(i," has been removed"+(t?" in "+t:"")),r.ERR_DEPRECATED);return t&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),o=i.length;o-- >0;){var s=i[o],a=t[s];if(a){var c=e[s],d=void 0===c||a(c,s,e);if(!0!==d)throw new r("option "+s+" must be "+d,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+s,r.ERR_BAD_OPTION)}},validators:o}},8446:(e,t,n)=>{var i,r=n(8962),o=Object.prototype.toString,s=(i=Object.create(null),function(e){var t=o.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function d(e){return void 0===e}var h=a("ArrayBuffer");function l(e){return null!==e&&"object"==typeof e}function u(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),w=a("File"),f=a("Blob"),y=a("FileList");function g(e){return"[object Function]"===o.call(e)}var m=a("URLSearchParams");function v(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var C,E=(C="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return C&&e instanceof C});e.exports={isArray:c,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||o.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:u,isUndefined:d,isDate:p,isFile:w,isBlob:f,isFunction:g,isStream:function(e){return l(e)&&g(e.pipe)},isURLSearchParams:m,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:v,merge:function e(){var t={};function n(n,i){u(t[i])&&u(n)?t[i]=e(t[i],n):u(n)?t[i]=e({},n):c(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)v(arguments[i],n);return t},extend:function(e,t,n){return v(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,r,o,s={};t=t||{};do{for(r=(i=Object.getOwnPropertyNames(e)).length;r-- >0;)s[o=i[r]]||(t[o]=e[o],s[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(d(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:E,isFileList:y}},3885:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4794);class s extends i.Base{async wrap(e){this.wire.sendAction("wrap-application").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch((e=>{})),this._create(e)}async start(e){this.wire.sendAction("start-application").catch((e=>{}));const t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e){return this.wire.sendAction("run-applications",{applications:e}).then((()=>{}))}getCurrent(){return this.wire.sendAction("get-current-application").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch((e=>{}));const n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch((e=>{})),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then((({payload:e})=>{const t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})})).then((t=>(t._manifestUrl=e,t)))}}t.default=s},4794:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=n(9659),r=n(4997),o=n(4169);class s extends i.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new r._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){const t=[];return e.forEach((e=>{t.push(new r._Window(this.wire,{uuid:e.uuid,name:e.name}))})),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then((({payload:e})=>e.data))}async quit(e=!1){await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}_close(e=!1){return this.wire.sendAction("close-application",{force:e,...this.identity}).then((()=>{}))}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch((e=>{})),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then((({payload:e})=>{const t=[];return e.data.forEach((e=>{t.push({uuid:this.identity.uuid,name:e})})),this.windowListFromIdentityList(t)}))}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then((({payload:e})=>e.data))}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then((({payload:e})=>e.data))}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then((({payload:e})=>e.data))}async getViews(){const{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then((({payload:e})=>e.data))}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch((e=>{})),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then((()=>{}))}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then((()=>{}))}restart(){return this.wire.sendAction("restart-application",this.identity).then((()=>{}))}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch((e=>{})),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then((()=>{}))}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then((()=>{}))}async sendApplicationLog(){const{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then((()=>{}))}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then((()=>{}))}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then((()=>{}))}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then((({payload:e})=>e.data))}terminate(){return this.wire.sendAction("terminate-application",this.identity).then((()=>{}))}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-info",this.identity).then((({payload:e})=>e.data))}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){await this.wire.sendAction("set-file-download-location",{downloadLocation:e,...this.identity})}}t.Application=s},7264:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3885);r(n(4794),t),t.default=o.default},9659:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=t.EmitterBase=t.Base=void 0;const s=n(3442),a=n(8068);class c{constructor(e){this.isNodeEnvironment=()=>"NodeEnvironment"===this.wire.environment.constructor.name,this.isOpenFinEnvironment=()=>"OpenFinEnvironment"===this.wire.environment.constructor.name,this.wire=e}get fin(){return a.getFin(this.wire)}get me(){return this.wire.me}}t.Base=c,t.EmitterBase=class extends c{constructor(e,t,...n){super(e),this.topic=t,i.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(o(this,i)),this.getOrCreateEmitter=()=>this.wire.eventAggregator.getOrCreate(o(this,i)),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,i)=>{const r={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},o=this.getOrCreateEmitter();n(o);try{await this.wire.sendAction("subscribe-to-desktop-event",r)}catch(e){throw i(o),this.deleteEmitterIfNothingRegistered(o),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){const n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch((()=>null)),this.getOrCreateEmitter()}return Promise.resolve()},this.on=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.on(e,t)}),(n=>{n.removeListener(e,t)})),this),this.addListener=this.on,this.once=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.once(e,i),n.once(e,t)}),(n=>{n.removeListener(e,i),n.removeListener(e,t)})),this},this.prependListener=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.prependListener(e,t)}),(n=>{n.removeListener(e,t)})),this),this.prependOnceListener=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.prependOnceListener(e,t),n.once(e,i)}),(n=>{n.removeListener(e,t),n.removeListener(e,i)})),this},this.removeListener=async(e,t,n)=>{const i=await this.deregisterEventListener(e,n);return i&&(i.removeListener(e,t),this.deleteEmitterIfNothingRegistered(i)),this},this.deregisterAllListeners=async e=>{const t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){const e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),i=[];for(let e=0;e<n;e++)i.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch((()=>null)));return await Promise.all(i),e}},this.removeAllListeners=async e=>{const t=async e=>{const t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await t(e);else if(this.hasEmitter()){const e=this.getOrCreateEmitter().eventNames();await s.promiseMap(e,t)}return this},r(this,i,[t,...n]),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[]}deleteEmitterIfNothingRegistered(e){0===e.eventNames().length&&this.wire.eventAggregator.delete(o(this,i))}},i=new WeakMap,t.Reply=class{}},3427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.Base{writeText(e){return this.wire.sendAction("clipboard-write-text",e).then((()=>{}))}readText(e){return this.wire.sendAction("clipboard-read-text",e).then((({payload:e})=>e.data))}writeHtml(e){return this.wire.sendAction("clipboard-write-html",e).then((()=>{}))}readHtml(e){return this.wire.sendAction("clipboard-read-html",e).then((({payload:e})=>e.data))}writeRtf(e){return this.wire.sendAction("clipboard-write-rtf",e).then((()=>{}))}readRtf(e){return this.wire.sendAction("clipboard-read-rtf",e).then((({payload:e})=>e.data))}write(e){return this.wire.sendAction("clipboard-write",e).then((()=>{}))}getAvailableFormats(e){return this.wire.sendAction("clipboard-read-formats",e).then((({payload:e})=>e.data))}}t.default=r},7813:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitterMap=void 0;const i=n(6465);function r(e){return Buffer.from(e).toString("base64")}t.EmitterMap=class{constructor(){this.storage=new Map}hashKeys(e){return e.map(r).join("/")}getOrCreate(e){const t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new i.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){const t=this.hashKeys(e);return this.storage.delete(t)}}},2734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(7813);class r extends i.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if(function(e){return"process-desktop-event"===e.action}(e)){const{payload:t}=e,n=function(e){const{topic:t}=e;if("frame"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("window"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("application"===t){const{uuid:n}=e;return[t,n]}if("view"===t){const{uuid:n,name:i}=e;return[t,n,i]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}t.default=r},7168:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(8298);class o extends i.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch((e=>{})),Promise.resolve(new r.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch((e=>{})),new r.ExternalApplication(this.wire,{uuid:e})}}t.default=o},8298:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplication=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then((({payload:e})=>e.data))}}t.ExternalApplication=r},9021:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7168);t.default=o.default,r(n(8298),t)},6545:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(6465),r=n(3641),o=n(4997),s=n(7264),a=n(8347),c=n(3427),d=n(9021),h=n(6720),l=n(9211),u=n(4169),p=n(609),w=n(9641),f=n(8068),y=n(8706),g=n(7153);class m extends i.EventEmitter{constructor(e){super(),f.registerFin(e,this),this.wire=e,this.System=new r.default(e),this.Window=new o.default(e),this.Application=new s.default(e),this.InterApplicationBus=new a.default(e),this.Clipboard=new c.default(e),this.ExternalApplication=new d.default(e),this.Frame=new h.default(e),this.GlobalHotkey=new l.default(e),this.Platform=new p.default(e,this.InterApplicationBus.Channel),this.View=new u.default(e),this.Interop=new y.default(e),this.SnapshotSource=new g.default(e),this.me=w.getMe(e),e.on("disconnected",(()=>{this.emit("disconnected")}))}}t.default=m},1778:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(8161);class s extends i.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch((e=>{})),Promise.resolve(new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch((e=>{})),new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}t.default=s},8161:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Frame=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then((({payload:e})=>e.data))}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then((({payload:e})=>e.data))}}t._Frame=r},6720:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1778);t.default=o.default,r(n(8161),t)},9211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter((e=>!("registered"===e||"unregistered"===e))).map((e=>this.removeAllListeners(e)))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){const{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t.default=r},7539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelBase=t.ProtectedItems=void 0;const n=e=>(t,n,i)=>{const r=e(t,n,i);return void 0===r?n:r};t.ProtectedItems=class{constructor(e,t){this.providerIdentity=e,this.wire=t}};class i{constructor(){this.subscriptions=new Map}static defaultAction(e){throw new Error(`No action registered at target for ${e}`)}async processAction(e,t,n){try{const r=this.subscriptions.has(e)?this.subscriptions.get(e):(t,n)=>{var r;return(null!==(r=this.defaultAction)&&void 0!==r?r:i.defaultAction)(e,t,n)},o=this.preAction?await this.preAction(e,t,n):t,s=await r(o,n);return this.postAction?await this.postAction(e,s,n):s}catch(t){if(this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw new Error("Already registered beforeAction middleware");this.preAction=n(e)}onError(e){if(this.errorMiddleware)throw new Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw new Error("Already registered afterAction middleware");this.postAction=n(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw new Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw new Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}t.ChannelBase=i},8378:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const c=n(7539),d=new Map;class h extends c.ChannelBase{constructor(e,t,n){super(),i.set(this,void 0),r.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),o.set(this,(()=>{d.delete(this.endpointId),a(this,r).close()})),s(this,i,new c.ProtectedItems(e,t)),this.disconnectListener=()=>{},this.endpointId=e.endpointId,s(this,r,n),d.set(this.endpointId,this),n.receive(this.processAction)}static closeChannelByEndpointId(e){const t=d.get(e);t&&a(t,o).call(t)}static handleProviderDisconnect(e,t){e.disconnectListener(t),a(e,o).call(e)}get providerIdentity(){return a(this,i).providerIdentity}async dispatch(e,t){if(a(this,r).isEndpointConnected(this.providerIdentity.channelId))return a(this,r).send(this.providerIdentity.channelId,e,t);throw new Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw new Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){const e=a(this,i),{channelName:t,uuid:n,name:r}=e.providerIdentity;await e.wire.sendAction("disconnect-from-channel",{channelName:t,uuid:n,name:r,endpointId:this.endpointId}),a(this,o).call(this)}}t.default=h,i=new WeakMap,r=new WeakMap,o=new WeakMap},6711:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const a=n(3917),c=n(9659),d=n(1046),h=n(3870),l=n(569),u=n(2942),p=n(3749),w=n(3037),f=n(7113);class y extends c.Base{constructor(e){super(e),i.set(this,void 0),r.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new w.ProtocolManager(this.isNodeEnvironment()?["classic"]:["rtc","classic"]),o(this,i,new p.MessageReceiver(e)),o(this,r,new l.RTCICEManager(e)),e.registerMessageHandler(this.onmessage.bind(this))}static getProtocolOptionsFromStrings(e){return e.map((e=>{switch(e){case"rtc":return h.RTCInfo;case"classic":return d.ClassicInfo;default:return a.exhaustiveCheck(e,["rtc","classic"])}}))}createProvider(e,t){const n=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),r=this.protocolManager.getProviderProtocols(null==n?void 0:n.protocols),o=r.map((e=>{switch(e){case"rtc":return new h.RTCStrategy;case"classic":return new d.ClassicStrategy(this.wire,s(this,i),t.channelId,t);default:return a.exhaustiveCheck(e,["rtc","classic"])}}));let c;if(2===o.length){const[e,t]=o;c=f.default.combine(e,t)}else{if(1!==o.length)throw new Error("failed to combine strategies");[c]=o}const l=new u.ChannelProvider(t,this.wire,c),p=t.channelId;return this.providerMap.set(p,{provider:l,strategy:c,supportedProtocols:y.getProtocolOptionsFromStrings(r)}),u.ChannelProvider.setProviderRemoval(l,this.removeChannelFromProviderMap.bind(this)),l}async createClientOffer(e){const t=this.protocolManager.getClientProtocols(null==e?void 0:e.protocols);let n;return{offer:{supportedProtocols:await Promise.all(t.map((async e=>{switch(e){case"rtc":{const{rtcClient:e,channels:t,offer:i,rtcConnectionId:o,channelsOpened:a}=await s(this,r).startClientOffer();return n={rtcClient:e,channels:t,channelsOpened:a},{type:"rtc",version:h.RTCInfo.version,payload:{offer:i,rtcConnectionId:o}}}case"classic":return{type:"classic",version:d.ClassicInfo.version};default:return a.exhaustiveCheck(e,["rtc","classic"])}}))),maxProtocols:2},rtc:n}}async createClientStrategy(e,t){var n;t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),s(this,i).checkForPreviousClientConnection(t.channelId));const o=null!==(n=t.answer)&&void 0!==n?n:{supportedProtocols:[{type:"classic",version:1}]},a=(await Promise.all(o.supportedProtocols.map((async n=>"rtc"===n.type&&e?(await s(this,r).finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new h.RTCStrategy):"classic"===n.type?new d.ClassicStrategy(this.wire,s(this,i),t.endpointId,t):null)))).filter((e=>null!==e));let c;if(e&&!a.some((e=>e instanceof h.RTCStrategy))&&e&&e.rtcClient.close(),a.length>=2)c=f.default.combine(a[0],a[1]);else{if(!a.length)throw new Error("No compatible protocols");[c]=a}const l={endpointIdentity:t,rtc:e};return c.addEndpoint(t.channelId,l),c}async processChannelConnection(e){const{clientIdentity:t,providerIdentity:n,ackToSender:i,payload:o,offer:a}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);const c=n.channelId,l=this.providerMap.get(c);if(!l)return i.payload.success=!1,i.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(i);const{provider:p,strategy:w,supportedProtocols:f}=l;try{if(!(p instanceof u.ChannelProvider))throw Error("Cannot connect to a channel client");const e=null!=a?a:{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1},n=this.protocolManager.getCompatibleProtocols(f,e);if(!n.length)throw new Error("This provider does not support any of the offered protocols.");const c=await p.processConnection(t,o);i.payload.payload=i.payload.payload||{};let l={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return l=await n.reduce((async(e,t)=>{const n=await e;if("rtc"===t.type){const{answer:e,rtcClient:i,channels:o}=await s(this,r).createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:h.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then((e=>o.then((t=>({...e,rtc:{rtcClient:i,channels:t}})))))}else n.supportedProtocols.push({type:"classic",version:d.ClassicInfo.version});return n}),Promise.resolve(l)),l.endpointPayloadPromise.then((e=>w.addEndpoint(t.endpointId,e))),i.payload.payload.result=c,i.payload.payload.answer=l,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,this.wire.sendRaw(i)}}}t.ConnectionManager=y,i=new WeakMap,r=new WeakMap},7722:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const s=n(8378),a=n(2942),c=n(9659),d=n(6711),h=()=>{};class l extends c.EmitterBase{constructor(e){super(e,"channel"),i.set(this,void 0),r(this,i,new d.ConnectionManager(e))}async getAllChannels(){return this.wire.sendAction("get-all-channels").then((({payload:e})=>e.data))}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async connect(e,t){if(!e||"string"!=typeof e)throw new Error("Please provide a channelName string to connect to a channel.");const n=Object.assign(this.wire.environment.getDefaultChannelOptions().connect,t||{});let r=h,a=h;const c=new Promise((t=>{r=t,a=i=>{e===i.channelName&&(this.removeListener("connected",a),t(this.connect(e,n)))},this.on("connected",a)}));try{const{offer:t,rtc:c}=await o(this,i).createClientOffer(n),d=await this.wire.sendAction("connect-to-channel",{channelName:e,...n,offer:t}),{payload:{data:h}}=d;r&&r(),this.removeListener("connected",a);const l=await o(this,i).createClientStrategy(c,h),u=new s.default(h,this.wire,l);return l.onEndpointDisconnect(h.channelId,(async()=>{try{await u.disconnect()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${h.uuid} / name: ${h.name} / endpointId: ${h.endpointId}.`)}finally{s.default.handleProviderDisconnect(u,h)}})),this.on("disconnected",(t=>{t.channelName===e&&s.default.handleProviderDisconnect(u,t)})),u}catch(t){const i="internal-nack";if({wait:!0,...n}.wait&&t.message&&t.message.includes(i))return console.warn(`Channel not found for channelName: ${e}, waiting for channel connection.`),c;throw t.message===i?new Error(`No channel found for channelName: ${e}`):new Error(t)}}async create(e,t){if(!e)throw new Error("Please provide a channelName to create a channel");const{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),r=o(this,i).createProvider(t,n);return this.on("client-disconnected",(t=>{t.channelName===e&&a.ChannelProvider.handleClientDisconnection(r,t)})),r}}t.Channel=l,i=new WeakMap},3749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiver=void 0;const i=n(8378),r=n(9659);class o extends r.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){var t,n;const{senderIdentity:i,providerIdentity:r,action:o,ackToSender:s,payload:a,intendedTargetIdentity:c}=e.payload,d=null!==(n=null!==(t=c.channelId)&&void 0!==t?t:c.endpointId)&&void 0!==n?n:this.latestEndpointIdByChannelId.get(r.channelId),h=this.endpointMap.get(d);if(!h)return s.payload.success=!1,s.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${d} no longer connected.`,this.wire.sendRaw(s);try{const e=await h(o,a,i);return s.payload.payload=s.payload.payload||{},s.payload.payload.result=e,this.wire.sendRaw(s)}catch(e){return s.payload.success=!1,s.payload.reason=e.message,this.wire.sendRaw(s)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){const t=this.latestEndpointIdByChannelId.get(e);t&&(i.default.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}t.MessageReceiver=o},1046:function(e,t){var n,i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicInfo=t.ClassicStrategy=void 0,t.ClassicStrategy=class{constructor(e,t,s,a){this.messageReceiver=t,this.endpointId=s,this.providerIdentity=a,n.set(this,void 0),i.set(this,new Map),this.send=async(e,t,r)=>{const s=o(this,i).get(e);if(!s)throw new Error(`Could not locate routing info for endpoint ${e}`);const a={...s};return a.isLocalEndpointId&&delete a.endpointId,delete a.isLocalEndpointId,(await o(this,n).sendAction("send-channel-message",{...a,providerIdentity:this.providerIdentity,action:t,payload:r}).catch((e=>{throw new Error(e.message)}))).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),r(this,i,new Map)},r(this,n,e)}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){o(this,i).delete(e)}isEndpointConnected(e){return o(this,i).has(e)}addEndpoint(e,t){o(this,i).set(e,t.endpointIdentity)}isValidEndpointPayload(e){var t,n;return"string"==typeof(null===(t=null==e?void 0:e.endpointIdentity)||void 0===t?void 0:t.endpointId)||"string"==typeof(null===(n=null==e?void 0:e.endpointIdentity)||void 0===n?void 0:n.channelId)}},n=new WeakMap,i=new WeakMap,t.ClassicInfo={version:5,minimumVersion:0,type:"classic"}},7113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.primary=e,this.secondary=t}static combine(e,t){return new n(e,t)}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,(()=>{this.secondary.isEndpointConnected(e)||t()})),this.secondary.onEndpointDisconnect(e,(()=>{this.primary.isEndpointConnected(e)||t()}))}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}t.default=n},3037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolManager=void 0,t.ProtocolManager=class{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultClientProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultProviderProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter((t=>e.some((e=>{var n;return e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(null!==(n=t.minimumVersion)&&void 0!==n?n:0)})))).slice(0,t.maxProtocols)}}},8776:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCEndpoint=void 0;const a=n(2366);t.RTCEndpoint=class{constructor(e,t){this.rtc=e,this.endpointIdentity=t,this.responseMap=new Map,i.set(this,null),r.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),o(this,r)&&o(this,r).call(this))},this.send=async(e,t)=>{const n=`message-${Math.random()}`,i=new Promise(((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})}));return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),i},this.close=()=>{this.responseMap.forEach((e=>e.reject("Connection has closed."))),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc.channels.response.addEventListener("message",(e=>{var t;const{messageId:n,payload:i,success:r,error:o}=JSON.parse(e.data),{resolve:s,reject:a}=null!==(t=this.responseMap.get(n))&&void 0!==t?t:{};s&&a?(this.responseMap.delete(n),r?s(i):a(o)):(console.log("Could not find id in responseMap."),console.log(e))})),this.rtc.channels.request.addEventListener("message",(async e=>{const{messageId:n,action:r,payload:s}=JSON.parse(e.data);if(o(this,i))try{const e=await o(this,i).call(this,r,s,t);this.rtc.channels.response.send(JSON.stringify({messageId:n,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,error:a.errorToPOJO(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,success:!1,error:"Connection not ready."}))})),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach((e=>{e.onclose=e=>{[...this.responseMap.values()].forEach((e=>e.reject(new Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB.")))),this.close(),o(this,r)&&o(this,r).call(this)}}))}onDisconnect(e){if(o(this,r))throw new Error("RTCEndpoint disconnectListener cannot be set twice.");s(this,r,e)}receive(e){if(o(this,i))throw new Error("You have already set a listener for this RTC Endpoint.");s(this,i,e)}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},i=new WeakMap,r=new WeakMap},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTCICEManager=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise(((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){const n=()=>{e.removeEventListener("open",n),t()};e.addEventListener("open",n)}else n(new Error("This Channel has already closed"))}))}static createDataChannelPromise(e,t){let n;const i=new Promise((e=>{n=e})),r=i=>{const o=()=>{i.channel.removeEventListener("open",o),n(i.channel)};i.channel.label===e&&(i.channel.addEventListener("open",o),t.removeEventListener("datachannel",r))};return t.addEventListener("datachannel",r),i}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){const e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseClientIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForProviderIce(e,(async e=>{await t.addIceCandidate(e.candidate)}));const n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},i=await t.createOffer();await t.setLocalDescription(i);const r=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then((()=>{}));return{rtcClient:t,channels:n,offer:i,rtcConnectionId:e,channelsOpened:r}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){const n=this.createRtcPeer(),i=r.createDataChannelPromise("request",n),o=r.createDataChannelPromise("response",n);n.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseProviderIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForClientIce(e,(async e=>{await n.addIceCandidate(e.candidate)})),await n.setRemoteDescription(t);const s=await n.createAnswer();await n.setLocalDescription(s);const a=Promise.all([i,o]).then((([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n})));return{rtcClient:n,answer:s,channels:a}}}t.RTCICEManager=r},3870:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCInfo=t.RTCStrategy=void 0;const c=n(8776);t.RTCStrategy=class{constructor(){i.set(this,null),r.set(this,new Map),o.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{s(this,o)&&(s(this,r).forEach((e=>e.close())),a(this,r,new Map)),a(this,o,!1)}}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(s(this,i))throw new Error("You have already set a listener for this RTC Strategy");a(this,i,e),s(this,r).forEach((e=>e.receive(s(this,i))))}getEndpointById(e){const t=s(this,r).get(e);if(!t)throw new Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return s(this,o)}isEndpointConnected(e){return s(this,r).has(e)}addEndpoint(e,t){if(!s(this,o))return void console.warn("Adding endpoint to disconnected RTC Strategy");const n=new c.RTCEndpoint(t.rtc,t.endpointIdentity);s(this,i)&&n.receive(s(this,i)),s(this,r).set(e,n)}async closeEndpoint(e){s(this,r).delete(e)}isValidEndpointPayload(e){const t=e=>"object"==typeof e&&null!==e;return t(e)&&t(e.endpointIdentity)&&t(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}},i=new WeakMap,r=new WeakMap,o=new WeakMap,t.RTCInfo={version:1,minimumVersion:0,type:"rtc"}},2942:function(e,t,n){var i=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelProvider=void 0;const o=n(7539),s=n(2300);let a=(()=>{var e,t,n,a,c;class d extends o.ChannelBase{constructor(h,l,u){super(),e.set(this,void 0),t.set(this,void 0),n.set(this,void 0),a.set(this,(t=>{const o=this.connections.filter((e=>e.endpointId!==t.endpointId));r(this,n).closeEndpoint(t.endpointId),i(this,e,o)})),this.processAction=async(e,t,n)=>(d.clientIsMultiRuntime(n)&&!s.runtimeUuidMeetsMinimumRuntimeVersion(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),c.set(this,(()=>{r(this,n).close();const e=d.removalMap.get(this);e&&e()})),i(this,t,new o.ProtectedItems(h,l)),this.connectListener=()=>{},this.disconnectListener=()=>{},i(this,e,[]),i(this,n,u),u.receive(this.processAction)}get connections(){return[...r(this,e)]}static handleClientDisconnection(e,t){const n=e.connections.find((e=>e.endpointId===t.endpointId));n?r(e,a).call(e,n):e.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name)).forEach(r(e,a)),e.disconnectListener(t)}static setProviderRemoval(e,t){d.removalMap.set(e,t)}dispatch(e,t,i){var o;const s=null!==(o=e.endpointId)&&void 0!==o?o:this.getEndpointIdForOpenFinId(e,t);return s&&r(this,n).isEndpointConnected(s)?r(this,n).send(s,t,i):Promise.reject(new Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${s} no longer connected.`))}async processConnection(t,n){return r(this,e).push(t),this.connectListener(t,n)}publish(e,t){return this.connections.map((i=>r(this,n).send(i.endpointId,e,t)))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){const n=r(this,t),{channelName:o}=n.providerIdentity;i(this,e,[]),await n.wire.sendAction("destroy-channel",{channelName:o}),r(this,c).call(this)}checkForClientConnection(e){if(!this.isClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider.\n                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return d.clientIdentityIncludesEndpointId(e)?this.connections.some((t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name)):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some((t=>t.uuid===e.uuid&&t.name===e.name))}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider. Client Identity:\n                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,n){var i;const o=this.connections.filter((t=>t.name===e.name&&t.uuid===e.uuid));if(o.length>=2){const i=r(this,t),{uuid:o,name:s}=e,a=null==i?void 0:i.providerIdentity.uuid,c=null==i?void 0:i.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the\n                "endpointId" parameter. The identity you are dispatching to ({uuid: ${o}, name: ${s}})\n                has multiple channelClients for this channel. Your dispatched action: (${n}) from the provider:\n                ({uuid: ${a}, name: ${c}}) will only be processed by the most recently-created client.`)}return null===(i=o.pop())||void 0===i?void 0:i.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}}return e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,c=new WeakMap,d.removalMap=new WeakMap,d})();t.ChannelProvider=a},8347:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterAppPayload=void 0;const i=n(6465),r=n(9659),o=n(3127),s=n(7722),a=n(4999);class c extends r.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new o.default,this.Channel=new s.Channel(e),this.emitter=new i.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}publish(e,t){return this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name}).then((()=>{}))}async send(e,t,n){const i=a.validateIdentity(e);if(i)throw new Error(i);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){const i=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(i,n),this.refCounter.actOnFirst(i,(()=>this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})),(()=>Promise.resolve()))}unsubscribe(e,t,n){const i=e.name||"*",r=this.createSubscriptionKey(e.uuid,i,t);return this.emitter.removeListener(r,n),this.refCounter.actOnLast(r,(()=>this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:i,topic:t,destinationWindowName:this.me.name})),(()=>new Promise((e=>e)).then((()=>{}))))}processMessage(e){const{payload:{message:t,sourceWindowName:n,sourceUuid:i,topic:r}}=e,o=[this.createSubscriptionKey(i,n,r),this.createSubscriptionKey(i,"*",r),this.createSubscriptionKey("*","*",r)],s={uuid:i,name:n};o.forEach((e=>{this.emitter.emit(e,t,s)}))}emitSubscriverEvent(e,t){const{payload:{targetName:n,uuid:i,topic:r}}=t,o={name:n,uuid:i,topic:r};this.emitter.emit(e,o)}createSubscriptionKey(e,t,n){const i=t||"*";if(!(e&&i&&n))throw new Error("Missing uuid, name, or topic string");return function(...e){return e.map((e=>Buffer.from(`${e}`).toString("base64"))).join("/")}(e,i,n)}onmessage(e){const{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}t.default=c,t.InterAppPayload=class{}},2977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2057),o=n(7138),s=(e,...t)=>new e(...t);class a extends i.Base{async init(e,t=s){this.wire.sendAction("interop-init").catch((e=>{}));const n=await this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`),i=await this.fin.Application.getCurrentSync().getInfo();return t(r.InteropBroker,this.wire,n,i.initialOptions.interopBrokerConfiguration||{})}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch((e=>{})),new o.InteropClient(this.wire,e,t)}}t.default=a},2057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InteropBroker=void 0;const i=n(9659),r=n(7115),o=n(1787);let s=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class a extends i.Base{constructor(e,t,n){super(e),this.channel=t,this.interopClients=new Map,this.contextGroupsById=new Map,n.contextGroups&&(s=n.contextGroups),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,this.setContextGroupMap(),this.wireChannel(t)}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch((e=>{}));const n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?new Error("You must join a context group before you can set context."):new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{const{contextGroupId:t}=n;if(!this.contextGroupsById.has(t))throw new Error(`Client has a context group that isn't in the context group mapping: ${t}.`);const i=a.checkContextIntegrity(e);if(!1===i.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${i.reason}. Context: ${JSON.stringify(e)}`);const r=this.contextGroupsById.get(t),o=e.type;r.set(o,e),this.lastContextMap.set(t,o),Array.from(this.interopClients.values()).filter((e=>e.contextGroupId===t)).forEach((t=>{for(const[,n]of t.contextHandlers)a.isContextTypeCompatible(o,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)}))}}getCurrentContext(e,t){var n;this.wire.sendAction("interop-broker-get-current-context").catch((e=>{}));const i=this.getClientState(t);if(!(null==i?void 0:i.contextGroupId))throw new Error("You must be a member of a context group to call getCurrentContext");const{contextGroupId:r}=i,o=this.contextGroupsById.get(r),s=this.lastContextMap.get(r),a=null!==(n=null==e?void 0:e.contextType)&&void 0!==n?n:s;return o&&a?o.get(a):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch((e=>{})),t){a.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);const n=this.channel.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name));if(!n.length)throw new Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);const i=[];for(const t of n)i.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(i)}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch((e=>{}));const n=this.getClientState(t);if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find((t=>t.id===e)))throw new Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await a.setCurrentContextGroupInClientOptions(t,e);const i=this.contextGroupsById.get(e);for(const[,e]of n.contextHandlers){const{contextType:n,handlerId:r}=e;if(void 0===n)i.forEach(((e,n)=>{this.invokeContextHandler(t,r,e)}));else if(i.has(n)){const e=i.get(n);e&&this.invokeContextHandler(t,r,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch((e=>{})),e){a.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);const t=this.channel.connections.filter((t=>t.uuid===e.uuid&&t.name===e.name));if(!t.length)throw new Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);const n=[];for(const e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch((e=>{}));const t=this.getClientState(e);t&&(t.contextGroupId=void 0),await a.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch((e=>{})),s.map((e=>({...e})))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch((e=>{})),this.getContextGroups().find((t=>t.id===e))}getAllClientsInContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch((e=>{})),Array.from(this.interopClients.values()).filter((t=>t.contextGroupId===e)).map((e=>e.clientIdentity))}async handleFiredIntent(e,t){const n=o.generateOverrideWarning("interopClient.fireIntent","fdc3.raiseIntent","InteropBroker.handleFiredIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch((e=>{}));const n=this.intentClientMap.get(t.name),i=`intent-handler-${e.name}`;if(n){const t=n.get(i);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){const{clientIdentity:e,pendingIntents:n}=t;try{const r=n[n.length-1];await this.channel.dispatch(e,i,r),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(i,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);const n=this.intentClientMap.get(t.name);n&&n.set(i,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntent","fdc3.findIntent","InteropBroker.handleInfoForIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntentsByContext","fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){const n=o.generateOverrideWarning("interopClient.fireIntentForContext","fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntentForContext)}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){var n;const i=null===(n=null==e?void 0:e.interopSnapshotDetails)||void 0===n?void 0:n.contextGroupStates;i&&((null==t?void 0:t.closeExistingWindows)||this.updateExistingClients(i),this.rehydrateContextGroupStates(i))}updateExistingClients(e){this.interopClients.forEach((t=>{const{clientIdentity:n,contextGroupId:i,contextHandlers:r}=t;if(i){const t=e[i];for(const[,e]of Object.entries(t))r.forEach((t=>{const{handlerId:i,contextType:r}=t;a.isContextTypeCompatible(e.type,r)&&this.invokeContextHandler(n,i,e)}))}}))}getContextGroupStates(){return a.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){const t=Object.entries(e);for(const[e,n]of t){const t=Object.entries(n);for(const[n,i]of t)this.contextGroupsById.has(e)?this.contextGroupsById.get(e).set(n,i):console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${e}`)}}contextHandlerRegistered({contextType:e,handlerId:t},n){const i={contextType:e,handlerId:t},r=this.getClientState(n);if(null==r||r.contextHandlers.set(t,i),r&&r.contextGroupId){const{contextGroupId:i}=r,o=this.contextGroupsById.get(i);if(void 0===e)o.forEach(((e,i)=>{this.invokeContextHandler(n,t,e)}));else if(o.has(e)){const i=o.get(e);i&&this.invokeContextHandler(n,t,i)}}}async intentHandlerRegistered(e,t){const{handlerId:n}=e,i=this.intentClientMap.get(t.name),r=null==i?void 0:i.get(n);if(i)if(r){const{pendingIntents:e}=r;r.clientIdentity=t,r.isReady=!0;try{if(e.length>0){const i=e[e.length-1];await this.channel.dispatch(t,n,i),r.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else i.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);const e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}invokeContextHandler(e,t,n){this.channel.dispatch(e,t,n).catch((i=>{console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,i)}))}removeContextHandler({handlerId:e},t){const n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw new Error("Failed to join session context group: must specify group id.");const n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{const n=new r.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw new Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){const t=Object.fromEntries(e),n={};return Object.entries(t).forEach((([e,t])=>{const i=Object.fromEntries(t);n[e]=i})),n}static checkContextIntegrity(e){if(!e)return{isValid:!1,reason:"No context supplied"};if("object"!=typeof e)return{isValid:!1,reason:"Context must be an Object"};if(!e.type)return{isValid:!1,reason:"Context must have a type property"};if(e.id&&"object"!=typeof e.id)return{isValid:!1,reason:"Context id must be an Object populated with key-value identifiers (if set)"};if(e.id){const{id:t}=e,n=Object.keys(t);let i=!1;if(!n.length)return{isValid:!1,reason:"Context id must have at least one key-value identifier"};if(n.forEach((e=>{"string"==typeof e&&"string"==typeof t[e]||(i=!0)})),i)return{isValid:!1,reason:"Context id key-value identifiers must be of type string"}}return e.name&&"string"!=typeof e.name?{isValid:!1,reason:"Context name must be of string type (if set)"}:{isValid:!0}}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(const e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}static async setCurrentContextGroupInClientOptions(e,t){const n=await fin.System.getEntityInfo(e.uuid,e.name);let i;"view"===n.entityType?i=await fin.View.wrap(e):"window"===n.entityType&&(i=await fin.Window.wrap(e)),i?await i.updateOptions({interop:{currentContextGroup:t}}):console.warn(`Setting Current Context Group: Entity with identity ${e.uuid}, ${e.name} is not a window or view. It is a ${n.entityType} instead.`)}wireChannel(e){e.onConnection(((e,t)=>{if(!this.isConnectionAuthorized(e,t))throw new Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw new Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");const n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};(null==t?void 0:t.currentContextGroup)&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=null==t?void 0:t.currentContextGroup),this.interopClients.set(e.endpointId,n)})),e.onDisconnection((e=>{this.interopClients.delete(e.endpointId);const t=this.intentClientMap.get(e.name);t&&e.uuid===fin.me.identity.uuid&&t.forEach((e=>{e.isReady=!1})),this.sessionContextGroupMap.forEach((t=>{t.onDisconnection(e)}))})),e.beforeAction(((e,t,n)=>{if(!this.isActionAuthorized(e,t,n))throw new Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);console.log(e,t,n)})),e.afterAction(console.log),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this))}async isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch((e=>{})),!0}async isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch((e=>{})),!0}}t.InteropBroker=a},7138:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropClient=void 0;const a=n(9659),c=n(822),d=n(1787);class h extends a.Base{constructor(e,t,n){super(e),i.set(this,void 0),r.set(this,void 0),o(this,r,new Map),o(this,i,this.wire.environment.whenReady().then((()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${t}`,{payload:n}))))}async setContext(e){return this.wire.sendAction("interop-client-set-context").catch((e=>{})),(await s(this,i)).dispatch("setContext",{context:e})}async addContextHandler(e,t){this.wire.sendAction("interop-client-add-context-handler").catch((e=>{}));const n=await s(this,i);let r;t?(r=`invokeContextHandler-${t}-${d.generateId()}`,console.warn(`Warning: By providing a contextType (${t}), you are using the experimental addContextHandler. To avoid issues, make sure you are adding your context handlers at the top level in your application.`)):r="invokeContextHandler";const o=d.wrapContextHandler(e,r);return n.register(r,o),await n.dispatch("contextHandlerRegistered",{handlerId:r,contextType:t}),{unsubscribe:async()=>{n.remove(r),await n.dispatch("removeContextHandler",{handlerId:r})}}}async getContextGroups(){return this.wire.sendAction("interop-client-get-context-groups").catch((e=>{})),(await s(this,i)).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch((e=>{}));const n=await s(this,i);if(!e)throw new Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){return this.wire.sendAction("interop-client-remove-from-context-group").catch((e=>{})),(await s(this,i)).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){return this.wire.sendAction("interop-client-fire-intent").catch((e=>{})),(await s(this,i)).dispatch("fireIntent",e)}async registerIntentHandler(e,t){this.wire.sendAction("interop-client-register-intent-handler").catch((e=>{}));const n=await s(this,i),r=`intent-handler-${t}`,o=this.wrapIntentHandler(e,r);try{await n.register(r,o),await n.dispatch("intentHandlerRegistered",{handlerId:r})}catch(e){throw new Error("Unable to register intent handler")}return{unsubscribe:async()=>{n.remove(r)}}}async getCurrentContext(e){return this.wire.sendAction("interop-client-get-current-context").catch((e=>{})),(await s(this,i)).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){return this.wire.sendAction("interop-client-get-info-for-intent").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){return this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){return this.wire.sendAction("interop-client-fire-intent-for-context").catch((e=>{})),(await s(this,i)).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{const t=s(this,r).get(e);if(t)return t.getUserInstance();const n=await s(this,i),{hasConflict:o}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});o&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);const a=new c.default(this.wire,s(this,i),e);return s(this,r).set(e,a),a.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}wrapIntentHandler(e,t){return async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}}}}t.InteropClient=h,i=new WeakMap,r=new WeakMap},7115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(8706);t.default=class{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){const{context:n}=e,r=i.InteropBroker.checkContextIntegrity(n);if(!1===r.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach((e=>{var t;null===(t=e.contextHandlers.get(n.type))||void 0===t||t.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getClientState(e){return this.clients.get(e.endpointId)}handlerAdded(e,t){const{handlerId:n,contextType:i}=e,r=this.getClientState(t);if(!r)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(i){const e=r.contextHandlers.get(i)||[];r.contextHandlers.set(i,[...e,n]);const o=this.contextGroupMap.get(i);o&&this.provider.dispatch(t,n,o)}else r.globalHandler=n,[...this.contextGroupMap.keys()].forEach((e=>{const i=this.contextGroupMap.get(e);i&&this.provider.dispatch(t,n,i)}))}handlerRemoved(e,t){const{handlerId:n}=e,i=this.clients.get(t.endpointId);i?(Array.from(i.contextHandlers).forEach((([,e])=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)})),i.globalHandler===n&&(i.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}}},822:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(9659),a=n(1787);class c extends s.Base{constructor(e,t,n){super(e),i.set(this,void 0),this.id=n,r(this,i,t)}async setContext(e){return this.wire.sendAction("interop-session-context-group-set-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){return this.wire.sendAction("interop-session-context-group-get-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){this.wire.sendAction("interop-session-context-group-add-handler").catch((e=>{}));const n=await o(this,i);let r;return r=t?`sessionContextHandler:invoke-${this.id}-${t}-${a.generateId()}`:`sessionContextHandler:invoke-${this.id}`,n.register(r,a.wrapContextHandler(e,r)),n.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:r,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(r)}}async createUnsubscribeCb(e){const t=await o(this,i);return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:a.wrapInTryCatch(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:a.wrapInTryCatch(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:a.wrapInTryCatch(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}t.default=c,i=new WeakMap},8706:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2977);t.default=o.default,r(n(7138),t),r(n(2057),t)},1787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BROKER_ERRORS=t.generateOverrideWarning=t.generateOverrideError=t.wrapContextHandler=t.wrapInTryCatch=t.generateId=void 0,t.generateId=()=>`${Math.random()}${Date.now()}`,t.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw new Error((t||"")+e)}},t.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}},t.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`,t.generateOverrideWarning=(e,t,n,i)=>{const{uuid:r,name:o}=i;return`Entity with identity: ${r}/${o} has called ${e} or ${t} but ${n} has not been overridden.`},t.BROKER_ERRORS={fireIntent:t.generateOverrideError("fireIntent","handleFiredIntent"),fireIntentForContext:t.generateOverrideError("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:t.generateOverrideError("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:t.generateOverrideError("getInfoForIntentsByContext","handleInfoForIntentsByContext")}},9641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.getBaseMe=t.environmentUnsupportedMessage=void 0;const i=n(4169),r=n(6720),o=n(4997);function s(e,t,n){return{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e,uuid:t,name:n,entityType:e}}t.environmentUnsupportedMessage="You are not running in OpenFin.",t.getBaseMe=s,t.getMe=function(e){const{uuid:n,name:a,entityType:c}=e.me,d={setContext(){throw new Error(t.environmentUnsupportedMessage)},addContextHandler(){throw new Error(t.environmentUnsupportedMessage)},getContextGroups(){throw new Error(t.environmentUnsupportedMessage)},joinContextGroup(){throw new Error(t.environmentUnsupportedMessage)},removeFromContextGroup(){throw new Error(t.environmentUnsupportedMessage)},getAllClientsInContextGroup(){throw new Error(t.environmentUnsupportedMessage)},getInfoForContextGroup(){throw new Error(t.environmentUnsupportedMessage)}},h="Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.",l={setContext(){throw new Error(h)},addContextHandler(){throw new Error(h)},getContextGroups(){throw new Error(h)},joinContextGroup(){throw new Error(h)},removeFromContextGroup(){throw new Error(h)},getAllClientsInContextGroup(){throw new Error(h)},getInfoForContextGroup(){throw new Error(h)}},u={eventNames:()=>{throw new Error(t.environmentUnsupportedMessage)},emit:()=>{throw new Error(t.environmentUnsupportedMessage)},listeners:()=>{throw new Error(t.environmentUnsupportedMessage)},listenerCount:()=>{throw new Error(t.environmentUnsupportedMessage)},on:()=>{throw new Error(t.environmentUnsupportedMessage)},addListener:()=>{throw new Error(t.environmentUnsupportedMessage)},once:()=>{throw new Error(t.environmentUnsupportedMessage)},prependListener:()=>{throw new Error(t.environmentUnsupportedMessage)},prependOnceListener:()=>{throw new Error(t.environmentUnsupportedMessage)},removeListener:()=>{throw new Error(t.environmentUnsupportedMessage)},removeAllListeners:()=>{throw new Error(t.environmentUnsupportedMessage)}};switch(c){case"view":return Object.assign(new i.View(e,{uuid:n,name:a}),s(c,n,a),{interop:l,isOpenFin:!0});case"window":return Object.assign(new o._Window(e,{uuid:n,name:a}),s(c,n,a),{interop:l,isOpenFin:!0});case"iframe":return Object.assign(new r._Frame(e,{uuid:n,name:a}),s(c,n,a),{interop:l,isOpenFin:!0});default:return{...s(c,n,a),...u,interop:d,isOpenFin:!1}}}},7283:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(6394),o=n(9872);class s extends i.Base{constructor(e,t){super(e),this._channel=t,this._initializer=(...e)=>this.wire.environment.getProviderInitializer().then((t=>t(this.wire.environment)(...e))),this.Layout=new r.LayoutModule(this.wire)}async init(e){const t=null==e?void 0:e.overrideCallback,n=await this.fin.Interop.init(this.fin.me.uuid,null==e?void 0:e.interopOverride);return window.interopBroker=n,this._initializer(t,n)}async wrap(e){return this.wire.sendAction("platform-wrap").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}async getCurrent(){return this.wire.sendAction("platform-get-current").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch((e=>{})),new Promise((async(t,n)=>{try{const{uuid:n}=e,i=await this.fin.Application._create({...e,isPlatformController:!0});i.once("platform-api-ready",(()=>t(this.wrapSync({uuid:n})))),i._run({uuid:n})}catch(e){n(e)}}))}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch((e=>{})),new Promise((async(n,i)=>{try{const i=await this.fin.Application._createFromManifest(e);i.once("platform-api-ready",(()=>n(this.wrapSync({uuid:i.identity.uuid})))),i._run(t)}catch(e){i(e)}}))}}t.default=s},9872:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const o=n(9659),s=n(4999),a=new Map;class c extends o.EmitterBase{constructor(e,t){super(t.wire,"application",e.uuid),this.getClient=e=>{this.wire.sendAction("platform-get-client",this.identity).catch((e=>{}));const t=e||this.identity,{uuid:n}=t;if(!a.has(n)){const e=r(this,i).call(this,n);a.set(n,e)}return a.get(n)},i.set(this,(async e=>{try{const t=`custom-frame-${e}`,n=await this._channel.connect(t,{wait:!1});return n.onDisconnection((()=>{a.delete(e)})),n}catch(t){throw a.delete(e),new Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}})),this.launchLegacyManifest=this.launchContentManifest;const n=s.validateIdentity(e);if(n)throw new Error(n);this._channel=t,this.identity={uuid:e.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch((e=>{}));const i=await this.getClient(),r=await i.dispatch("create-view",{target:t,opts:e,targetView:n});if(!r||s.validateIdentity(r.identity))throw new Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(r)}`);return this.fin.View.wrapSync(r.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch((e=>{}));const t=await this.getClient();e.reason||(e.reason="api-call");const n=await t.dispatch("create-view-container",e);if(!n||s.validateIdentity(n.identity))throw new Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);const{identity:i}=n,r=this.fin.Window.wrapSync(i);return r.name=i.name,r.uuid=i.uuid,r}async quit(){return this.wire.sendAction("platform-quit",this.identity).catch((e=>{})),(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch((e=>{}));const t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){var n;console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch((e=>{}));const i={...e,uuid:null!==(n=e.uuid)&&void 0!==n?n:this.identity.uuid},r=await this.fin.View.wrap(i),o=await r.getOptions();return this.createView(o,t)}async getSnapshot(){return this.wire.sendAction("platform-get-snapshot",this.identity).catch((e=>{})),(await this.getClient()).dispatch("get-snapshot")}async applySnapshot(e,t){this.wire.sendAction("platform-apply-snapshot",this.identity).catch((e=>{}));const n="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";let i;if("string"==typeof e)try{i=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw new Error(`${n}: ${e}`)}else i=e;if(!i.windows)throw new Error(n);const r=await this.getClient();return await r.dispatch("apply-snapshot",{snapshot:i,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch((e=>{}));const t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch((e=>{})),!e)throw new Error("Please provide a serializable object or string to set the context.");const n=await this.getClient(),{entityType:i}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:i,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch((e=>{}));const t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}async closeWindow(e,t={skipBeforeUnload:!1}){return this.wire.sendAction("platform-close-window",this.identity).catch((e=>{})),(await this.getClient()).dispatch("close-window",{windowId:e,options:t})}}t.Platform=c,i=new WeakMap},4386:(e,t)=>{function n(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPresetType=void 0,t.isValidPresetType=n,t.default={isValidPresetType:n}},609:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7283);t.default=o.default,r(n(9872),t)},4210:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0;const s=n(8111),a=n(9659);class c extends a.Base{constructor(){super(...arguments),i.set(this,void 0),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch((e=>{})),!this.fin.me.isWindow)throw new Error("Layout.init can only be called from a Window context.");if(r(this,i))throw new Error("Layout for this window already initialized, please use Layout.replace call to replace the layout.");const t=await this.wire.environment.getManagerConstructor();o(this,i,new t);let{layout:n,containerId:s}=e;n&&console.warn("We recommend using a layout in window options.\n                This layout has not been sanitized and unexpected behavior can occur."),n=n||(await this.fin.Window.getCurrentSync().getOptions()).layout,s=s||"layout-container";const a=document.getElementById(s);return await r(this,i).initManager(),await r(this,i).createLayout(n,a),Object.assign(this.getCurrentSync(),{layoutManager:r(this,i)})}}async wrap(e){return this.wire.sendAction("layout-wrap").catch((e=>{})),new s.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch((e=>{})),new s.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}}t.LayoutModule=c,i=new WeakMap},8111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;const i=n(4999),r=n(4386),o=n(9659);class s extends o.Base{constructor(e,t){super(t),this.replace=async e=>{this.wire.sendAction("layout-replace").catch((e=>{}));const t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch((e=>{}));const n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch((e=>{}));const t=await this.platform.getClient(),{presetType:n}=e;if(!n||!r.isValidPresetType(n))throw new Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};const n=i.validateIdentity(e);if(n)throw new Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){return this.wire.sendAction("layout-get-config").catch((e=>{})),(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}}t.Layout=s},6394:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4210),t),r(n(8111),t)},1746:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2878),o=n(6215);class s extends i.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch((e=>{})),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw new Error("you must pass in a valid SnapshotProvider");const t=await this.fin.InterApplicationBus.Channel.create(o.getSnapshotSourceChannelName(fin.me.identity));t.register("get-snapshot",(async()=>({snapshot:await e.getSnapshot()}))),t.register("apply-snapshot",(({snapshot:t})=>e.applySnapshot(t)))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch((e=>{})),new r.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch((e=>{})),this.wrapSync(e)}}t.default=s},2878:function(e,t,n){var i,r,o,s,a,c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSource=void 0;const h=n(9659),l=n(6215),u=new Map;class p extends h.Base{constructor(e,t){super(e),i.set(this,void 0),r.set(this,(()=>(u.has(this.identity.uuid)||u.set(this.identity.uuid,{eventFired:null,clientPromise:null}),u.get(this.identity.uuid)))),o.set(this,(()=>(d(this,r).call(this).clientPromise||(d(this,r).call(this).clientPromise=d(this,s).call(this)),d(this,r).call(this).clientPromise))),s.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);try{d(this,r).call(this).eventFired||await d(this,a).call(this);const t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection((()=>{d(this,r).call(this).clientPromise=null,d(this,r).call(this).eventFired=null})),t}catch(e){throw d(this,r).call(this).clientPromise=null,new Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}})),a.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);let t,n;const i=new Promise(((e,i)=>{t=e,n=i}));d(this,r).call(this).eventFired=i;const o=async i=>{try{i.channelName===e&&(t(),await this.fin.InterApplicationBus.Channel.removeListener("connected",o))}catch(e){n(e)}};await this.fin.InterApplicationBus.Channel.on("connected",o)})),c(this,i,t)}get identity(){return d(this,i)}async ready(){this.wire.sendAction("snapshot-source-ready").catch((e=>{}));try{await d(this,o).call(this)}catch(e){await d(this,r).call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch((e=>{}));const e=await d(this,o).call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){return this.wire.sendAction("snapshot-source-apply-snapshot").catch((e=>{})),(await d(this,o).call(this)).dispatch("apply-snapshot",{snapshot:e})}}t.SnapshotSource=p,i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap},7153:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1746);t.default=o.default,r(n(2878),t)},6215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSnapshotSourceChannelName=void 0,t.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`},3641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(5007),o=n(4997);class s extends i.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise(((n,i)=>{const r="external-process-exited";let s,a,c,d;"function"==typeof t.listener&&(c=e=>{const n=e||{};a={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},s===e.processUuid&&(t.listener(a),d.removeListener(r,c))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),d=new o._Window(this.wire,this.wire.me),d.on(r,c)),this.wire.sendAction(e,t).then((({payload:e})=>{s=e.data.uuid,n(e.data),a&&s===a.uuid&&(t.listener(a),d.removeListener(r,c))})).catch((e=>{d&&d.removeListener(r,c),i(e)}))}))}getVersion(){return this.wire.sendAction("get-version").then((({payload:e})=>e.data))}clearCache(e){return this.wire.sendAction("clear-cache",e).then((()=>{}))}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then((()=>{}))}exit(){return this.wire.sendAction("exit-desktop").then((()=>{}))}async fetchManifest(e){const{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then((()=>{}))}getAllWindows(){return this.wire.sendAction("get-all-windows").then((({payload:e})=>e.data))}getAllApplications(){return this.wire.sendAction("get-all-applications").then((({payload:e})=>e.data))}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then((({payload:e})=>e.data))}async getCrashReporterState(){const{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){const t=e,n={...t,diagnosticMode:t.diagnosticsMode||t.diagnosticMode},{payload:{data:{diagnosticMode:i,isRunning:r}}}=await this.wire.sendAction("start-crash-reporter",n);return{diagnosticMode:i,diagnosticsMode:i,isRunning:r}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then((({payload:e})=>e.data))}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then((({payload:e})=>e.data))}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then((({payload:e})=>e.data))}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then((({payload:e})=>e.data))}async isAppCertified(e){const{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then((({payload:e})=>e.data.runtimes))}async getInstalledApps(){const{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then((({payload:e})=>e.data))}getMachineId(){return this.wire.sendAction("get-machine-id").then((({payload:e})=>e.data))}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then((({payload:e})=>e.data))}getLogList(){return this.wire.sendAction("list-logs").then((({payload:e})=>e.data))}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then((({payload:e})=>e.data))}getMousePosition(){return this.wire.sendAction("get-mouse-position").then((({payload:e})=>e.data))}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then((({payload:e})=>e.data))}async getAllProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then((({payload:e})=>e.data))}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then((({payload:e})=>e.data))}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then((({payload:e})=>e.data))}getHostSpecs(){return this.wire.sendAction("get-host-specs").then((({payload:e})=>e.data))}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then((()=>{}))}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then((()=>{}))}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then((()=>{}))}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then((()=>{}))}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then((()=>{}))}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then((()=>{}))}downloadAsset(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadAsset only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`asset-download-progress-${o}`,a=`asset-download-error-${o}`,c=`asset-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-asset",l).catch((e=>{h(),i(e)}))}))}downloadRuntime(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`runtime-download-progress-${o}`,a=`runtime-download-error-${o}`,c=`runtime-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-runtime",l).catch((e=>{h(),i(e)}))}))}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then((({payload:e})=>e.data))}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then((({payload:e})=>e.data))}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then((({payload:e})=>e.data))}getCookies(e){const t=this.wire.environment.getUrl(),n=Object.assign(e,{url:t});return this.wire.sendAction("get-cookies",n).then((({payload:e})=>e.data))}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then((()=>{}))}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then((({payload:e})=>e.data))}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then((({payload:e})=>e.data))}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then((({payload:e})=>e.data))}async getServiceConfiguration(e){if("string"!=typeof e.name)throw new Error("Must provide an object with a `name` property having a string value");const{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then((({payload:e})=>e.data))}async getSystemAppConfig(e){if("string"!=typeof e)throw new Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then((({payload:e})=>e.data))}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then((({payload:e})=>e.data))}async launchManifest(e,t){return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:t})).payload.data.manifest}async queryPermissionForCurrentContext(e){const t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){const{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}}t.default=s},240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4169);class s extends i.Base{async create(e){const{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw new Error("Please provide a name property as a string in order to create a View.");return this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap");const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},3163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(4636),r=n(4997);class o extends i.WebContents{constructor(e,t){super(e,t,"view"),this.identity=t,this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout",{...this.identity}).catch((()=>{})),(await this.getCurrentWindow()).getLayout()),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then((({payload:e})=>e.data)),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then((()=>{})),this.getCurrentWindow=async()=>{const{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new r._Window(this.wire,e)},this.triggerBeforeUnload=async()=>(await this.wire.sendAction("trigger-before-unload",{...this.identity})).payload.data}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){const t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}t.View=o},4169:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(240);t.default=o.default,r(n(3163),t)},4636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebContents=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then((({payload:e})=>e.data))}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then((({payload:e})=>e.data))}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then((({payload:e})=>e.data))}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then((()=>{}))}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then((()=>{}))}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then((()=>{}))}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then((()=>{}))}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then((()=>{}))}print(e){return this.wire.sendAction("print",{...this.identity,options:e}).then((()=>{}))}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then((({payload:e})=>e.data))}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then((()=>{}))}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then((({payload:e})=>e.data))}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then((({payload:e})=>e.data))}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}async showPopupWindow(e){if(this.wire.sendAction(`${this.entityType}-show-popup-window`,this.identity).catch((()=>{})),null==e?void 0:e.onPopupReady){const t=async({popupName:t})=>{try{const n=this.fin.Window.wrapSync({uuid:this.fin.me.uuid,name:t});await e.onPopupReady(n)}catch(e){throw new Error(`Something went wrong during onPopupReady execution: ${e}`)}};await this.once("popup-ready",t)}const{payload:t}=await this.wire.sendAction("try-create-popup-window",{options:{...e,hasResultCallback:!!(null==e?void 0:e.onPopupResult),hasReadyCallback:!!(null==e?void 0:e.onPopupReady)},...this.identity}),{data:{willOpen:n,options:i}}=t;if(n&&await this.wire.environment.createChildContent({options:i.initialOptions,entityType:"window"}),null==e?void 0:e.onPopupResult){const t=async t=>{await e.onPopupResult((e=>{const{name:t,uuid:n,result:i,data:r}=e,o={identity:{name:t,uuid:n},result:i};return r&&(o.data=r),o})(t))},n=async()=>{await this.removeListener("popup-result",t)};await this.on("popup-result",t),await this.once("popup-teardown",n)}const{payload:r}=await this.wire.sendAction("show-popup-window",{options:i,...this.identity});return r.data}}t.WebContents=r},2163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(5047);class s extends i.Base{async wrap(e){this.wire.sendAction("window-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}create(e){return this.wire.sendAction("create-window").catch((e=>{})),new o._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},5047:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Window=void 0;const i=n(7264),r=n(4636),o=n(4169);class s extends r.WebContents{constructor(e,t){super(e,t,"window"),this.identity=t}createWindow(e){return this.wire.sendAction("window-create-window",this.identity).catch((e=>{})),new Promise(((t,n)=>{const i="fire-constructor-callback",r=new Promise((e=>{this.on(i,(function t(n){let r;const{success:o}=n,s=n.data,{message:a}=s;r=o?{httpResponseCode:s.httpResponseCode,apiInjected:s.apiInjected}:{message:s.message,networkErrorCode:s.networkErrorCode,stack:s.stack},this.removeListener(i,t),e({message:a,cbPayload:r,success:o})}))}));void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0);const o=this.wire.environment.createChildContent({entityType:"window",options:e});Promise.all([r,o]).then((e=>{const i=e[0];i.success?t(this):n(i);try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}})).catch(n)}))}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then((({payload:e})=>e.data))}getBounds(){return this.wire.sendAction("get-window-bounds",this.identity).then((({payload:e})=>e.data))}center(){return this.wire.sendAction("center-window",this.identity).then((()=>{}))}blur(){return this.wire.sendAction("blur-window",this.identity).then((()=>{}))}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then((()=>{}))}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then((()=>{}))}hide(){return this.wire.sendAction("hide-window",this.identity).then((()=>{}))}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then((()=>{Object.setPrototypeOf(this,null)}))}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then((()=>{}))}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then((({payload:e})=>e.data))}async getCurrentViews(){const{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}flash(){return this.wire.sendAction("flash-window",this.identity).then((()=>{}))}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then((({payload:e})=>e.data))}async getLayout(){if(this.wire.sendAction("window-get-layout",this.identity).catch((e=>{})),!(await this.getOptions()).layout)throw new Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then((({payload:e})=>e.data))}getParentApplication(){return this.wire.sendAction("window-get-parent-application",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity)).then((e=>e.getWindow()))}async getSnapshot(e){const t={area:e,...this.identity};return console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage"),(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then((({payload:e})=>e.data))}getWebWindow(){return this.wire.sendAction("window-get-web-window",this.identity).catch((e=>{})),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window",this.identity).catch((e=>{})),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then((({payload:e})=>e.data))}maximize(){return this.wire.sendAction("maximize-window",this.identity).then((()=>{}))}minimize(){return this.wire.sendAction("minimize-window",this.identity).then((()=>{}))}moveBy(e,t){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,...this.identity}).then((()=>{}))}moveTo(e,t){return this.wire.sendAction("move-window",{left:e,top:t,...this.identity}).then((()=>{}))}resizeBy(e,t,n){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}resizeTo(e,t,n){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}restore(){return this.wire.sendAction("restore-window",this.identity).then((()=>{}))}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then((()=>{}))}setBounds(e){return this.wire.sendAction("set-window-bounds",{...e,...this.identity}).then((()=>{}))}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then((()=>{}))}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then((()=>{}))}updateOptions(e){return this.wire.sendAction("update-window-options",{options:e,...this.identity}).then((()=>{}))}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then((()=>{}))}async showPopupMenu(e){const{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then((()=>{}))}async dispatchPopupResult(e){this.wire.sendAction("window-dispatch-popup-result",this.identity).catch((e=>{})),await this.wire.sendAction("dispatch-popup-result",{data:e,...this.identity})}}t._Window=s},4997:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2163);t.default=o.default,r(n(5047),t)},1681:(e,t,n)=>{var i;t.H=void 0;const r=n(6465),o=n(6545),s=n(9298),a=n(9641);class c extends r.EventEmitter{connect(e){throw new Error("You are not running in OpenFin.")}connectSync(){throw new Error("You are not running in OpenFin.")}send(e){throw new Error("You are not running in OpenFin.")}shutdown(){throw new Error("You are not running in OpenFin.")}constructor(){super()}}class d{constructor(){this.childViews=!0}getDefaultChannelOptions(){throw new Error(a.environmentUnsupportedMessage)}getRtcPeer(){throw new Error(a.environmentUnsupportedMessage)}getManagerConstructor(){throw new Error(a.environmentUnsupportedMessage)}getProviderInitializer(){throw new Error(a.environmentUnsupportedMessage)}writeToken(e,t){throw new Error(a.environmentUnsupportedMessage)}retrievePort(e){throw new Error(a.environmentUnsupportedMessage)}getNextMessageId(){throw new Error(a.environmentUnsupportedMessage)}getRandomId(){throw new Error(a.environmentUnsupportedMessage)}createChildContent(e){throw new Error(a.environmentUnsupportedMessage)}getWebWindow(e){throw new Error(a.environmentUnsupportedMessage)}getCurrentEntityIdentity(){throw new Error(a.environmentUnsupportedMessage)}getCurrentEntityType(){return"unknown"}raiseEvent(e,t){throw new Error(a.environmentUnsupportedMessage)}getUrl(){throw new Error(a.environmentUnsupportedMessage)}whenReady(){throw new Error(a.environmentUnsupportedMessage)}}t.H="undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.fin)||(()=>{const e=new d,t=new s.default(c,e,{uuid:"",name:""});return new o.default(t)})()},8068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFin=t.registerFin=void 0;const n=new WeakMap;t.registerFin=function(e,t){n.set(e,t)},t.getFin=function(e){const t=n.get(e);if(!t)throw new Error("Could not locate fin api for given transport");return t}},5007:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.NotSupportedError=t.NotImplementedError=t.NoAckError=t.DuplicateCorrelationError=t.UnexpectedActionError=t.DisconnectedError=void 0;class n extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}t.DisconnectedError=n;class i extends Error{}t.UnexpectedActionError=i;class r extends Error{}t.DuplicateCorrelationError=r;class o extends Error{}t.NoAckError=o;class s extends Error{}t.NotImplementedError=s;class a extends Error{}t.NotSupportedError=a;class c extends Error{constructor(e){const t=e.payload||e,{reason:n,error:i}=t;super(n),this.name="RuntimeError",(null==i?void 0:i.stack)&&(this.stack=i.stack)}}t.RuntimeError=c},9298:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(6465),a=n(8624),c=n(5007),d=n(2734),h=n(9641);class l extends s.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new d.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],i.set(this,void 0),this.connectSync=()=>{o(this,i).connectSync()},this.getPort=()=>{if("NodeEnvironment"!==this.environment.constructor.name)throw new c.NotImplementedError("Not Implemented");return o(this,i).wire.url.split(":").slice(-1)[0]},r(this,i,new e(this.onmessage.bind(this))),this.environment=t,this.sendRaw=o(this,i).send.bind(o(this,i)),this.registerMessageHandler(this.handleMessage.bind(this)),o(this,i).on("disconnected",(()=>{for(const[,{reject:e}]of this.wireListeners)e("Remote connection has closed");this.wireListeners.clear(),this.emit("disconnected")}));const{uuid:s,name:a}=n,l=this.environment.getCurrentEntityType();this.me=h.getBaseMe(l,s,a)}shutdown(){return o(this,i).shutdown()}async connect(e){if(a.isExistingConnectConfig(e))return this.connectByPort(e);if(a.isNewConnectConfig(e)){const t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectByPort(e){const{address:t,uuid:n}=e,r={...e,type:"file-token"},s=o(this,i);await s.connect(t);const a=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==a.action)throw new c.UnexpectedActionError(a.action);const{token:d}=a.payload;await this.environment.writeToken(a.payload.file,a.payload.token);const h=await this.sendAction("request-authorization",r,!0);if("authorization-response"!==h.action)throw new c.UnexpectedActionError(h.action);if(!0!==h.payload.success)throw new c.RuntimeError(h.payload);return d}sendAction(e,t={},n=!1){return new Promise(((r,s)=>{const a=this.environment.getNextMessageId(),c={action:e,payload:t,messageId:a},d=o(this,i);return this.addWireListener(a,r,s,n),d.send(c).catch(s)}))}ferryAction(e){return new Promise(((t,n)=>{const r=this.environment.getNextMessageId();e.messageId=r;const s=e=>{t(e.payload)};return o(this,i).send(e).then((()=>this.addWireListener(r,s,n,!1))).catch(n)}))}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,i){i?this.uncorrelatedListener=t:this.wireListeners.has(e)?n(new c.DuplicateCorrelationError(String(e))):this.wireListeners.set(e,{resolve:t,reject:n})}onmessage(e){for(const t of this.messageHandlers)t.call(null,e)}handleMessage(e){const t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{const{resolve:n,reject:i}=this.wireListeners.get(t);"ack"!==e.action?i(new c.NoAckError(e.action)):"payload"in e?e.payload.success?n.call(null,e):i(new c.RuntimeError(e.payload)):i(new c.RuntimeError(e)),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}i=new WeakMap,t.default=l},8624:(e,t)=>{function n(e){return"string"==typeof e.manifestUrl}function i(e){return r(e)&&"string"==typeof e.address}function r(e){return"string"==typeof e.uuid}function o(e){return e.runtime&&"string"==typeof e.runtime.version}function s(e){return r(e)&&o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalConnectConfig=t.isPortDiscoveryConfig=t.isNewConnectConfig=t.isExistingConnectConfig=t.isExternalConfig=void 0,t.isExternalConfig=n,t.isExistingConnectConfig=i,t.isNewConnectConfig=s,t.isPortDiscoveryConfig=function(e){return n(e)&&o(e)||s(e)},t.isInternalConnectConfig=function(e){return i(e)||s(e)}},2366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPOJO=void 0,t.errorToPOJO=function(e){return{stack:e.stack,message:e.message,toString:e.toString}}},3917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustiveCheck=void 0,t.exhaustiveCheck=function(e,t){throw new Error(`Unsupported value: ${e}${t?`\n Supported values are: ${t.join("")}`:""}`)}},3442:(e,t)=>{async function n(e){const t=[];for(const n of e){const e=await n();t.push(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMapSerial=t.serial=t.promiseMap=t.promisify=void 0,t.promisify=function(e){return(...t)=>new Promise(((n,i)=>{e(...t,((e,t)=>e?i(e):n(t)))}))},t.promiseMap=async function(e,t){return Promise.all(e.map(t))},t.serial=n,t.promiseMapSerial=async function(e,t){return n(e.map(((e,n,i)=>()=>t(e,n,i))))}},3127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.topicRefMap=new Map}incRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t+1;n=i,this.topicRefMap.set(e,i)}else this.topicRefMap.set(e,1),n=1;return n}decRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t-1;this.topicRefMap.set(e,i),n=i}else n=-1;return n}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}}},2300:(e,t)=>{function n(e){return[...e.split(".").reverse().entries()].reduce(((e,[t,n])=>e+ +n*1e4**t),0)}function i(e,t){return n(e)>=n(t)}function r(e){return e.split("/")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeUuidMeetsMinimumRuntimeVersion=t.parseRuntimeUuid=t.meetsMinimumRuntimeVersion=void 0,t.meetsMinimumRuntimeVersion=i,t.parseRuntimeUuid=r,t.runtimeUuidMeetsMinimumRuntimeVersion=function(e,t){return i(r(e),t)}},4999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateIdentity=void 0,t.validateIdentity=function(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t}},6465:e=>{var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,d;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(e))>0&&s.length>r&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,d=h,console&&console.warn&&console.warn(d)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function u(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):w(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var d=c.length,h=w(c,d);for(n=0;n<d;++n)i(h[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{n.d(i,{MS:()=>o,M_:()=>s,hY:()=>a,G4:()=>c,_W:()=>d,o:()=>h,C3:()=>u,fB:()=>l,if:()=>p,$j:()=>_,U$:()=>y,U7:()=>g,B5:()=>T});var e=n(1681),t=n(9421),r=n.n(t);class o extends Error{constructor(e="An unexpected error has occurred",t){var n;super(e),t&&(this.innerError=t&&t),this.stack=null===(n=this.stack)||void 0===n?void 0:n.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class s extends o{constructor(e="Unable to authorize connection to Salesforce",t){var n,i,r;super(e,t),t&&t.isAxiosError&&(t.message=null!==(r=null===(i=null===(n=t.response)||void 0===n?void 0:n.data)||void 0===i?void 0:i.error_description)&&void 0!==r?r:t.message)}}class a extends o{constructor(e="Not connected to Salesforce",t){super(e,t)}}class c extends o{constructor(e="Retrieve Salesforce object data failed",t){super(e,t)}}class d extends o{constructor(e="Invalid parameter detected",t){super(e,t)}}class h extends o{constructor(e="Execute Salesforce query failed",t){super(e,t)}}class l extends o{constructor(e="Unable to retrieve search results from Salesforce",t){super(e,t)}}class u extends o{constructor(e,t="Execute Salesforce REST API request failed"){var n,i,r,o,s;super(t,null!=e?e:void 0),this.restApiErrorCode="",this.restApiErrorDescription="",this.restApiResponseStatus=void 0;const a=e;if(null==a?void 0:a.isAxiosError){if(this.restApiResponseStatus=null===(n=a.response)||void 0===n?void 0:n.status,!(null===(r=null===(i=a.response)||void 0===i?void 0:i.data)||void 0===r?void 0:r.length))return;const e=null===(s=null===(o=a.response)||void 0===o?void 0:o.data)||void 0===s?void 0:s[0];if(e){const{errorCode:t,message:n}=e;this.restApiErrorCode=t,this.restApiErrorDescription=n}}}}class p extends o{constructor(e="An unexpected error occurred",t){super(e,t)}}let w=!1;const f="[@openfin/salesforce]",y=()=>{w=!1},g=()=>{w=!0,v("v2.1.5")},m=e=>{if(w&&(e.innerError?console.error(f,e,"\n\n(inner)",e.innerError):console.error(f,e),e instanceof u)){const{restApiErrorCode:t,restApiErrorDescription:n}=e;if(n){const e=n.replace(/\n/g," ").trim(),i=t?`${t}: ${e}`:e;console.warn(f,i)}}},v=(...e)=>{w&&console.log(f,...e)},C=(...e)=>{w&&console.warn(f,...e)};e.H||Object.assign(window,{fin:{}}),Object.assign(e.H,{Integrations:{Salesforce:{enableLogging:g,disableLogging:y}}});const E="54.0",x=/vXX\.X/i,A=e=>(Array.isArray(e)?e:Object.entries(e)).reduce(((e,t)=>{const n=Array.isArray(e)?t:t[1];let i;switch(!0){case null==n:i=n;break;case"string"==typeof n:i=n.replace(x,"v54.0");break;case Array.isArray(n):case"object"==typeof n:i=A(n);break;default:i=n}return Array.isArray(e)?e.push(i):e[t[0]]=i,e}),Array.isArray(e)?[]:{}),I="salesforce-auth",b="https://login.salesforce.com/services/oauth2/success",P=(e,t,n)=>{e.accessToken&&window.localStorage.setItem(k(t,n),e.accessToken),e.refreshToken&&window.localStorage.setItem(F(t,n),e.refreshToken)},_=async(t,n)=>{let i;try{i=new URL(t).origin}catch(e){throw new d("Invalid Salesforce URL")}if(!/salesforce.com$/i.test(i))throw new d("Invalid Salesforce URL");if(void 0===(null!=n?n:void 0)||""===n.trim())throw new d("Consumer key not provided");v(`Connecting to ${i} using key ${n}`);const r=await T(t,n);if(r)return r;v("No existing connection found, starting auth flow");const o=(await e.H.Application.getCurrentSync().getChildWindows()).find((e=>e.identity.name===I));o&&await o.close(!0);const c=(new Date).getTime().toString(),h=R(),l=await S(h),u=`${i}/services/oauth2/authorize?\n    client_id=${n}&\n    redirect_uri=${b}&\n    response_type=code&\n    scope=api+refresh_token&\n    state=${c}&\n    code_challenge=${l}&\n    display=popup&\n    prompt=select_account\n    `.replace(/\s/g,""),p=await e.H.Window.create({alwaysOnTop:!0,maximizable:!1,minimizable:!1,autoShow:!1,defaultCentered:!0,defaultHeight:700,defaultWidth:600,includeInSnapshots:!1,name:I,resizable:!1,saveWindowState:!1,showTaskbarIcon:!1,url:u}),w=await new Promise(((e,t)=>{let n;const i=window.setTimeout((()=>{window.clearInterval(n),window.clearTimeout(i),p.removeAllListeners(),p.close(!0);const e=new s("Authorization timed out");m(e),t(e)}),3e5);p.addListener("closing",(async()=>{v("User closed auth window"),window.clearInterval(n),window.clearTimeout(i),p.removeAllListeners();const e=new s("Failed to complete authorization");m(e),t(e)})),n=window.setInterval((()=>(async(e,t,n,i,r,o)=>{let a;try{a=await e.getInfo()}catch(e){window.clearInterval(t),window.clearTimeout(n);const i=new s("Could not locate oauth flow window");return m(i),o(i)}const c=new URL(a.url);if(0===new URL(a.url).href.toLowerCase().indexOf(b.toLowerCase())){if(window.clearInterval(t),window.clearTimeout(n),e.removeAllListeners(),e.close(!0),c.searchParams.get("state")!==i){const e=new s("State mismatch");return m(e),o(e)}const a=c.searchParams.get("code");if(!a){const e=new s("Authorization code missing");return m(e),o(e)}return v("Authorization code received"),r(a)}const d=await e.executeJavaScript("window.document.body.innerText"),h=new URLSearchParams(d).get("error_description");if(h){window.clearInterval(t),window.clearTimeout(n),e.removeAllListeners(),e.close(!0);const i=h[0].toUpperCase()+h.slice(1),r=new s(i);m(r),o(r)}else await e.isShowing()||(v("Showing auth window"),await e.show(!0),await e.focus())})(p,n,i,c,e,t)),500)})),f=await O(w,h,i,n);if(v("Checking connection with new access token"),!await U(f.accessToken,i)){const e=new a("Invalid Salesforce org URL or access token");throw m(e),e}return v("Connection established"),P(f,i,n),{consumerKey:n,disconnect:M(i,n),getAuthTokens:()=>L(i,n),orgUrl:i,executeApiRequest:j(i,n)}},M=(e,t)=>async()=>{v("Disconnecting from Salesforce");let n=window.localStorage.getItem(F(e,t));if(n)v("Revoking refresh token");else{if(n=window.localStorage.getItem(k(e,t)),!n)return void v("No tokens found in storage");v("Revoking access token")}try{await r().get(`${e}/services/oauth2/revoke?token=${n}`)}catch(e){C("Failed to revoke tokens",null==e?void 0:e.message)}N(e,t)},O=async(e,t,n,i)=>{v("Exchanging auth code for tokens");const o=`${n}/services/oauth2/token`,a=`\n    grant_type=authorization_code&\n    client_id=${i}&\n    code=${e}&\n    code_verifier=${t}&\n    redirect_uri=${b}\n    `.replace(/\s/g,"");let c;try{c=(await r().post(o,a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(e){const t=new s("Failed to exchange authorization code for auth tokens",e);throw m(t),t}const{access_token:d,refresh_token:h}=c;if(!d||!h)throw new s("Missing access token or refresh token during code exchange");return v("Tokens received"),{accessToken:d,refreshToken:h}},S=async e=>{const t=(new TextEncoder).encode(e),n=await window.crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(n)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+\$/,"")},R=()=>{const e=new Uint32Array(64);return window.crypto.getRandomValues(e),Array.from(e,(e=>`0${e.toString(16)}`.substr(-2))).join("")},k=(e,t)=>`access-token_#_${new URL(e).hostname}_#_${t}`,L=(e,t)=>({accessToken:window.localStorage.getItem(k(e,t)),refreshToken:window.localStorage.getItem(F(e,t))}),T=async(e,t)=>{let n;if(v("Checking for existing connection"),!e||!t)return null;try{n=new URL(e).origin}catch(e){return null}const{accessToken:i}=L(n,t);if(!i)return null;if(!await U(i,n))try{await B(n,t)}catch(e){return null}return v(`Connection exists to ${e}`),{consumerKey:t,disconnect:M(n,t),getAuthTokens:()=>L(n,t),orgUrl:n,executeApiRequest:j(n,t)}},j=(e,t)=>async(n,i,o,s,c)=>{const{accessToken:h}=L(e,t);if(!h){const e=new a;throw m(e),e}const l=t=>(async(e,t,n,i="GET",o={},s={},a=!0)=>{var c,h;if(!n)throw new d("API endpoint not provided");let l;if(n=(h=n).startsWith("/")?h:`/${h}`,/^\/services\/data\/\w+/i.test(n)){const e=null===(c=/\/v(\w{2}\.\w)\//.exec(n))||void 0===c?void 0:c[1];if(!e)throw new u(null,"REST API version not specified");x.test(n)?n=n.replace(e,E):e!==E&&C(`Requested REST API version (${e}) is different to the current supported version (54.0). Using an API version other than current supported version may cause errors.`),l=new RegExp("/services/data/v54.0/composite","i").test(n)?A(o):o}else l=o;v(`Executing ${i.toUpperCase()} API request to ${n}`,l,s),a&&Object.assign(s,{Authorization:`Bearer ${t}`});try{let t;switch(i.toUpperCase()){case"DELETE":t=await r().delete(`${e}${n}`,{headers:s});break;case"GET":t=await r().get(`${e}${n}`,{headers:s});break;case"HEAD":t=await r().head(`${e}${n}`,{headers:s});break;case"PATCH":t=await r().patch(`${e}${n}`,o,{headers:s});break;case"POST":t=await r().post(`${e}${n}`,l,{headers:s});break;default:throw new u(null,"Invalid HTTP method")}return{data:t.data,status:t.status}}catch(e){if(e instanceof u)throw e;throw new u(e)}})(e,t,n,i,o,s,c);let p;try{p=await l(h)}catch(n){if(!(n instanceof u))throw m(n),n;return await $(n,e,t,h,l)}return p},F=(e,t)=>`refresh-token_#_${new URL(e).hostname}_#_${t}`,$=async(e,t,n,i,r)=>{if(m(e),await G(e,t,i))try{const e=await B(t,n);return v("Retrying request"),await r(e.accessToken)}catch(e){throw m(e),e}throw e},B=async(e,t)=>{var n,i;const{refreshToken:o}=L(e,t);if(!o)throw N(e,t),new a("No refresh token available");v("Refreshing access token");const s=`${e}/services/oauth2/token`,c=`\n    grant_type=refresh_token&\n    client_id=${t}&\n    refresh_token=${o}\n    `.replace(/\s/g,"");let d;try{d=(await r().post(s,c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(r){const o=null===(i=null===(n=r.response)||void 0===n?void 0:n.data)||void 0===i?void 0:i.error_description,s="Failed to refresh access token";throw v(o?`${s}: ${o}`:s),N(e,t),new a(s)}const{access_token:h}=d;if(!h)throw new a("Missing access token after refreshing");const l={accessToken:h,refreshToken:o};return P(l,e,t),l},N=(e,t)=>{window.localStorage.removeItem(k(e,t)),window.localStorage.removeItem(F(e,t))},G=async(e,t,n)=>{var i;return("Network Error"===(null===(i=e.innerError)||void 0===i?void 0:i.message)||"Network Error"===e.message)&&!await U(n,t)},U=async(e,t)=>{try{await r().get(`${t}/services/oauth2/userinfo?oauth_token=${e}`)}catch(e){return!1}return!0}})();var r=i.MS,o=i.M_,s=i.hY,a=i.G4,c=i._W,d=i.o,h=i.C3,l=i.fB,u=i.if,p=i.$j,w=i.U$,f=i.U7,y=i.B5;

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module) => {

(()=>{"use strict";var e={703:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>l.Pt,CLIFilterOptionType:()=>l.el,CLITemplate:()=>l.yW,deregister:()=>et,hide:()=>nt,register:()=>Ye,show:()=>tt});var o={};n.r(o),n.d(o,{subscribe:()=>ae});var r={};n.r(r),n.d(r,{create:()=>He});var i=n(678),s=n(532),a=n(436);const c="home";var d;!function(e){e.Commands="home-commands"}(d||(d={}));var u,p=n(806),l=(n(298),n(758));n(114),n(109),n(427);!function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(u||(u={}));var f=n(316);const w="all",g="0",h="5",y="6",v=()=>{};function m(e,t){return e?`${e}-${t}`:t}function S(e){return`__search-${e}-topic__`}const P=new Map;function C(e,t){P.has(e)||P.set(e,new Set),P.get(e).add(t)}function k(e,t){const n=P.get(e);n&&n.delete(t)}const W=new Map;function R(e,t){W.has(e)||W.set(e,new Set),W.get(e).add(t)}function T(e,t){const n=W.get(e);n&&n.delete(t)}const I=new Map;async function b(e,t){I.has(e)||I.set(e,new Map),I.get(e).set(t.id,t);const n=P.get(e);if(!n)return;const o=[...n].map((e=>e()));await Promise.all(o)}async function D(e,t){const n=I.get(e);if(!n)return;n.delete(t);const o=W.get(e);if(!o)return;const r=[...o].map((e=>e()));await Promise.all(r)}function B(e){return I.get(e)?[...I.get(e).values()]:[]}function F(e){const t=I.get(e);t&&t.clear()}function L(e,t){const n=I.get(e);return n?n.get(t):null}function A(e,t,n){return{...e,action:n||{...e.actions[0],trigger:f.px.UserAction},dispatcherIdentity:t}}function O(e,t,n="ascending"){const o=e||[];if(!t?.length)return o;const r=[],i=new Map;t.forEach((e=>{if(e.key)return i.set(e.key,e);r.push(e)}));let s=o.map((e=>{const{key:t}=e;if(t&&i.has(t)){const e=i.get(t);return i.delete(t),e}return e}));return s.push(...i.values(),...r),s="ascending"===n?s.sort(((e,t)=>(null!==e.score&&void 0!==e.score?e.score:1/0)-(null!==t.score&&void 0!==t.score?t.score:1/0))):s.sort(((e,t)=>(null!==t.score&&void 0!==t.score?t.score:1/0)-(null!==e.score&&void 0!==e.score?e.score:1/0))),s}function x(e){const t={};let n=[];let o=[];let r=u.Initial;t.getStatus=()=>r,t.getResultBuffer=()=>n,t.setResultBuffer=e=>{n=e,n?.length&&t.onChange()},t.getRevokedBuffer=()=>o,t.setRevokedBuffer=e=>{o=e,o?.length&&t.onChange()},t.onChange=v;const i={};return t.res=i,i.close=()=>{r!==u.Close&&(r=u.Close,t.onChange())},i.open=()=>{r!==u.Open&&(r=u.Open,t.onChange())},i.respond=n=>{const o=O(t.getResultBuffer(),n,e);t.setResultBuffer(o)},i.revoke=(...e)=>{const n=new Set(e),o=t.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));t.setResultBuffer(o),n.size&&(t.getRevokedBuffer().forEach((e=>n.add(e))),t.setRevokedBuffer([...n]))},t}function E(e,t,n){const o=new Set;let r=!1;return{close:()=>{r=!0;for(const e of o)e()},req:{id:t,topic:e,...n,context:n?.context||{},onClose:e=>{o.add(e),r&&e()},removeListener:e=>{o.delete(e)}}}}function V(){return{name:fin.me.name,uuid:fin.me.uuid}}function M(){let e;try{const t=fin.Platform.getCurrentSync();if(!t?.identity)return;e=t.identity.uuid}catch(e){}return e}const _="deregistered or does not exist",$=new Error(`provider ${_}`),q=new Error("provider with name already exists"),G=new Error("bad payload"),H=new Error("subscription rejected"),N=new Error(`channel ${_}`),U=new Map;function j(e){const t=X(e);if(t)return t;throw N}function X(e){const t=U.get(e);if(t)return t}function K(e,t){U.set(e,t)}const J=new Map;function z(e){J.has(e)||J.set(e,new Map);const t=J.get(e);return{getRequestsForIdentity:e=>{const n=function(e){return`${e.uuid}:${e.name}`}(e);return t.has(n)||t.set(n,new Map),t.get(n)}}}async function Z(e,t){return(await j(e)).dispatch(g,t)}function Q({namespacedTopic:e,topic:t}){const n=L.bind(null,e),o=z(e),r=Z.bind(null,e);return async(e,i)=>{if(!e||!e.id||!e.providerId){const e=G;return{error:e.message}}const{id:s,providerId:a}=e,c=n(a);if(!c){const e=$;return{error:e.message}}const d=o.getRequestsForIdentity(i);let u=d.get(e.id);u||(u=E(t,s,e),d.set(e.id,u));const p=x(),l=()=>{const e=p.getResultBuffer();p.setResultBuffer([]);const t=p.getRevokedBuffer();p.setRevokedBuffer([]);const n=p.getStatus();r({id:s,providerId:a,results:e,revoked:t,status:n})};let f=!0,w=!1;p.onChange=()=>{if(f)return f=!1,void l();w||(w=!0,setTimeout((()=>{w=!1,l()}),100))};try{const{results:e,context:t}=await c.onUserInput(u.req,p.res),n=p.getStatus();return{id:s,providerId:a,status:n,results:e,context:t}}catch(e){return{id:s,providerId:a,error:e.message}}}}async function Y(e,t,n){const o=n||await j(e),r=V(),i={identity:r,...t,onUserInput:void 0,onResultDispatch:void 0},s=await o.dispatch("2",i);return await b(e,{identity:r,...t}),s}async function ee(e,t){const n=await j(e);return await n.dispatch("3",t),D(e,t)}async function te(e,t,n,o){const r=A(n,V(),o),i=L(e,t);if(i){const{onResultDispatch:e}=i;if(!e)return;return e(r)}const s={providerId:t,result:r};return(await j(e)).dispatch(h,s)}async function ne(e,t){const n={...t,context:t?.context||{}},o={},r=async function*(e,t,{setState:n}){const o=await j(e);for(;;){const e=await o.dispatch("1",t),r=e.error;if(r)throw new Error(r);const i=e;if(t.id=i.id,n(i.state),i.done)return i.value;yield i.value}}(e,n,{setState:e=>{o.state=e}});let i=await r.next();return o.id=n.id,o.close=()=>{!async function(e,t){(await j(e)).dispatch(y,{id:t})}(e,o.id)},o.next=()=>{if(i){const e=i;return i=void 0,e}return r.next()},o}async function oe(e){return(await j(e)).dispatch("4",null)}async function re(e){const t=await j(e);var n;n=e,U.delete(n),F(e),await t.disconnect()}function ie(e){const{namespacedTopic:t}=e,n=z(t);return async o=>{if(!X(t))return;const r=n.getRequestsForIdentity(o);for(const{req:e,close:t}of r.values())t(),r.delete(e.id);K(t,(async e=>{const{namespacedTopic:t}=e,n=await se(e);for(const e of B(t))await Y(t,e,n);return n})(e))}}async function se(e){const{namespacedTopic:t}=e,n=S(t),o=await async function(e){for(let t=0;t<50;t++)try{return await fin.InterApplicationBus.Channel.connect(e,{wait:!1})}catch(e){if(49===t)throw e;await new Promise((e=>setTimeout(e,1e3)))}}(n);return o.register(g,Q(e)),o.register(y,function(e){const t=z(e);return(e,n)=>{const o=t.getRequestsForIdentity(n),r=o.get(e.id);r&&(r.close(),o.delete(e.id))}}(t)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)return;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o.onDisconnection(ie(e)),o}async function ae(e){const t=("string"==typeof e?e:e?.topic)||w,n=("string"==typeof e?null:e?.uuid)||M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=X(o);return i||(i=se(r),K(o,i),await i),{getAllProviders:oe.bind(null,o),register:Y.bind(null,o),search:ne.bind(null,o),deregister:ee.bind(null,o),dispatch:te.bind(null,o),disconnect:re.bind(null,o)}}const ce=new Map;function de(e){const t=ue(e);if(t)return t;throw N}function ue(e){const t=ce.get(e);if(t)return t}const pe=new Map;function le(e,t){pe.has(e)||pe.set(e,new Set),pe.get(e).add(t)}function fe(e,t){const n=pe.get(e);n&&n.delete(t)}function we(e){return[...B(e)].map((e=>({...e,onUserInput:void 0,onResultDispatch:void 0})))}async function ge(e,t){if(L(e,t.id))throw new Error("provider with name already exists");const n=V();await b(e,{identity:n,...t})}function he(e,t){D(e,t)}async function ye(e,t,n,o){const r=L(e,t);if(!r)throw $;const{onResultDispatch:i}=r;if(!i)return;return i(A(n,V(),o))}async function*ve(e,t,n){const o=function(e,t){const n=[],o=[],r=[],i=[];for(const s of e){const e=x(s.scoreOrder),a={results:[],provider:{id:s.id,identity:s.identity,title:s.title,scoreOrder:s.scoreOrder,icon:s.icon,dispatchFocusEvents:s.dispatchFocusEvents}};n.push(a),o.push(e);const c=(async()=>{try{const{results:n,context:o}=await s.onUserInput(t,e.res);a.results=O(a.results,n),a.context={...a.context,...o}}catch(e){a.error=e}})();c.finally((()=>{c.done=!0})),i.push(c),r.push(r.length)}return{providerResponses:n,listenerResponses:o,openListenerResponses:r,initialResponsePromises:i}}(t.targets?t.targets.map((t=>L(e,t))).filter((e=>!!e)):[...B(e).filter((e=>!e.hidden))],t),{providerResponses:r,listenerResponses:i}=o;let{openListenerResponses:s,initialResponsePromises:a}=o,c=f.De.Fetching;const d=e=>{c=e,n.setState(c)};let p,l=!1;t.onClose((()=>{l=!0,p&&p()}));do{let e=!1;if(a.length){const t=[];for(const n of a)n.done?e=!0:t.push(n);a=t,a.length||(d(f.De.Fetched),e=!0)}let t,n=!1;const o=()=>{n=!0,t&&t()},w=[];for(const t of s){const n=i[t],s=r[t],a=n.getStatus();(a===u.Open||c===f.De.Fetching&&a===u.Initial)&&(w.push(t),n.onChange=o);const d=n.getResultBuffer();d.length&&(n.setResultBuffer([]),s.results=O(s.results,d),e=!0);const p=n.getRevokedBuffer();if(p.length){n.setRevokedBuffer([]);const t=new Set(p);s.results=s.results.filter((({key:e})=>!t.has(e))),e=!0}}if(s=w,e&&(yield r),l)break;n||(s.length||a.length)&&await Promise.race([...a,new Promise((e=>{t=e})),new Promise((e=>{p=e}))])}while(s.length||a.length);return d(f.De.Complete),r}let me=0;function Se({namespacedTopic:e,topic:t},n){me+=1;const o=E(t,me.toString(),n),r=ve(e,o.req,{setState:e=>{r.state=e}});return r.id=me.toString(),r.close=o.close,r.state=f.De.Fetching,r}const Pe=new Map;function Ce(e,t){return`${e}:${t}`}function ke(e){return async(t,...n)=>{if(!t)return{error:G.message};let o;if(t.id)o=Ce(e.namespacedTopic,t.id);else{const n=Se(e,t);o=Ce(e.namespacedTopic,n.id),t.id=n.id,Pe.set(o,{generator:n})}const r=Pe.get(o);clearTimeout(r.timeout);const i=await r.generator.next();return r.timeout=function(e){return window.setTimeout((()=>{Pe.delete(e)}),1e4)}(o),{...i,id:t.id,state:r.generator.state}}}function We(e,t,n){return de(e).dispatch(t,y,{id:n})}function Re(e){return t=>function(e,t){const n=Ce(e,t),o=Pe.get(n);o&&o.generator.close()}(e,t.id)}async function Te(e,t,{id:n,query:o,context:r,targets:i}){const s=de(e),a={id:n,query:o,context:r,targets:i,providerId:t.id},c=await s.dispatch(t.identity,g,a),d=c.error;if(d)throw new Error(d);return c}const Ie=new Map;function be(e,t,n){return`${e}:${t.name}:${t.uuid}:${n}`}const De=new Map;function Be(e,t,n){return`${e}:${t}:${n}`}function Fe(e,t){const n=be.bind(null,e,t.identity),o=We.bind(null,e,t.identity),r=Te.bind(null,e,t);return async(i,s)=>{const a=n(i.id);if(!Ie.has(a)){const e=()=>{o(i.id),Ie.delete(a)};Ie.set(a,e),i.onClose(e)}const c=Be(e,t.id,i.id),d=()=>{De.delete(c),s.close()};i.onClose(d),De.set(c,(e=>{e.results?.length&&s.respond(e.results),e.revoked?.length&&s.revoke(...e.revoked),e.status===u.Open&&s.open(),e.status===u.Close&&d()}));const p=await r(i);return p.status===u.Open&&s.open(),p.status!==u.Close&&p.status!==u.Initial||d(),p}}function Le(e,t){return async n=>{const o=de(e),r={providerId:t.id,result:n};return o.dispatch(t.identity,h,r)}}const Ae=new Map;function Oe(e,t){return`${e}-${t.name}-${t.uuid}`}function xe(e){return async(t,n)=>{if(!t||!t.id)return void new Error(JSON.stringify(t));if(L(e,t.id))throw q;return t.identity=n,await async function(e,t){const n=Oe(e,t.identity);Ae.has(n)||Ae.set(n,[]),Ae.get(n).push(t.id),await b(e,{...t,onUserInput:Fe(e,t),onResultDispatch:Le(e,t)})}(e,t),{workspaceVersion:i.u0,clientAPIVersion:t.clientAPIVersion}}}function Ee(e){return t=>{t&&function(e,t){const n=L(e,t);if(!n)return;const o=Oe(e,n.identity),r=Ae.get(o);if(r){const n=r.findIndex((e=>e===t));-1!==n&&(r.splice(n,1),D(e,t))}}(e,t)}}const Ve=new Map;function Me(e,t){Ve.has(e)||Ve.set(e,new Set),Ve.get(e).add(t)}function _e(e,t){const n=Ve.get(e);n&&n.delete(t)}function $e(e){return async t=>{!function(e,t){const n=Oe(e,t),o=Ae.get(n);if(o){for(const t of o)D(e,t);Ae.delete(n)}}(e,t);const n=Ve.get(e);n&&n.forEach((e=>e(t)))}}async function qe(e){const{namespacedTopic:t}=e,n=S(e.namespacedTopic),o=await(r=n,fin.InterApplicationBus.Channel.create(r));var r;return o.onConnection(function({namespacedTopic:e}){return async t=>{const n=pe.get(e);if(n)for(const e of n)if(!await e(t))throw H}}(e)),o.onDisconnection($e(t)),o.register(y,Re(t)),o.register(g,function(e){return t=>{const n=Be(e,t.providerId,t.id),o=De.get(n);o&&o(t)}}(t)),o.register("2",xe(t)),o.register("3",Ee(t)),o.register("4",function(e){return async()=>we(e)}(t)),o.register("1",ke(e)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)throw $;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o}async function Ge(e){const t=de(e);var n;n=e,ce.delete(n),await t.destroy(),F(e)}async function He(e){const t=("string"==typeof e?e:e?.topic)||w,n=M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=ue(o);i||(i=await qe(r),function(e,t){ce.set(e,t)}(o,i));const s=fe.bind(null,o),a=_e.bind(null,o),c=k.bind(null,o),d=T.bind(null,o);return{getAllProviders:we.bind(null,o),search:Se.bind(null,r),register:ge.bind(null,o),deregister:he.bind(null,o),onSubscription:le.bind(null,o),onDisconnect:Me.bind(null,o),onRegister:C.bind(null,o),onDeregister:R.bind(null,o),dispatch:ye.bind(null,r),disconnect:Ge.bind(null,o),removeListener:e=>{s(e),a(e),c(e),d(e)}}}const{create:Ne}=r,{subscribe:Ue}=o,je={create:Ne,subscribe:Ue,defaultTopic:"all"},Xe=()=>{window.search=je},Ke=e=>{const t=()=>{Xe(),window.removeEventListener(e,t)};return t};if("undefined"!=typeof window){Xe();const e="load",t=Ke(e);window.addEventListener(e,t);const n="DOMContentLoaded",o=Ke(n);window.addEventListener(n,o)}const Je=new Map;async function ze(){await async function(e){Je.set(e,await Ue({topic:e,uuid:p.q9.Workspace}))}(c)}let Ze;async function Qe(e){return await async function(){return Ze||(Ze=ze()),Ze}(),Je.get(e)}const Ye=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);await(0,a.aB)();const t=await Qe(c);try{e.clientAPIVersion=i.u0;const n=await t.register(e);return(0,s.ck)({allowed:!0,componentVersion:n?.workspaceVersion}),n}catch(e){throw(0,s.ck)({allowed:!1,rejectionCode:e.message}),e}},et=async e=>{await(0,a.aB)();return(await Qe(c)).deregister(e)};async function tt(){return(await(0,a.Xl)()).dispatch(a.WF.ShowHome,void 0)}async function nt(){return(await(0,a.Xl)()).dispatch(a.WF.HideHome,void 0)}},298:(e,t,n)=>{n.d(t,{p:()=>o.px,w:()=>o.wt});var o=n(316)},427:(e,t,n)=>{var o;n.d(t,{v:()=>o}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(o||(o={}))},758:(e,t,n)=>{var o,r,i;n.d(t,{Pt:()=>o,el:()=>i,yW:()=>r}),function(e){e.Suggestion="suggestion"}(o||(o={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(i||(i={}))},114:(e,t,n)=>{var o,r;n.d(t,{L:()=>o,T:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(o||(o={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},109:(e,t,n)=>{n.d(t,{Go:()=>r,ZJ:()=>s,bI:()=>i,p6:()=>o});const o={Container:"Container",Button:"Button"},r={Text:"Text",Image:"Image",List:"List"},i={...o,...r};var s;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(s||(s={}))},528:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>s.L,StorefrontTemplate:()=>s.T,deregister:()=>g,hide:()=>h,register:()=>w,show:()=>y});var o=n(532),r=n(436),i=n(82),s=n(114),a=n(678);let c,d=!1;async function u(e,t,n){const o=await(0,r.Dm)();try{return await o.dispatch(e.action,e.payload)}catch(r){if(-1!==r.toString().indexOf(e.action))return d=!0,await o.dispatch(t.action,t.payload),n;throw r}}const p=new Map,l=e=>{if(!p.has(e))throw new Error(`Storefront Provider with id ${e} is not registered`);return p.get(e)},f=async e=>{const t=await(0,r.Xl)();if(p.has(e.id))throw new Error(`Storefront provider with id ${e.id} already registered`);return p.set(e.id,e),(e=>{e.isStorefrontActionsRegistered||(e.isStorefrontActionsRegistered=!0,e.register(r.WF.GetStorefrontProviderApps,(e=>l(e).getApps())),e.register(r.WF.GetStorefrontProviderFooter,(e=>l(e).getFooter())),e.register(r.WF.GetStorefrontProviderLandingPage,(e=>l(e).getLandingPage())),e.register(r.WF.GetStorefrontProviderNavigation,(e=>l(e).getNavigation())),e.register(r.WF.LaunchStorefrontProviderApp,(({id:e,app:t})=>l(e).launchApp(t))))})(t),e.clientAPIVersion=a.u0,u({action:r.WF.RegisterProvider,payload:{providerType:i.lP.Storefront,info:e}},{action:r.WF.RegisterStorefrontProvider,payload:e},{workspaceVersion:"unknown"})},w=e=>(c=new Promise((async(t,n)=>{try{const n=await f(e);(0,o.d9)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:a.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,o.d9)({allowed:!1,rejectionCode:e.message}),n(e)}})),c),g=async e=>(await c,p.delete(e),await(0,r.aB)(),u({action:r.WF.DeregisterProvider,payload:{providerType:i.lP.Storefront,id:e}},{action:r.WF.DeregisterStorefrontProvider,payload:e})),h=async()=>(await c,await(0,r.aB)(),u({action:r.WF.HideProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.HideStorefront})),y=async()=>(await c,await(0,r.aB)(),u({action:r.WF.ShowProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.ShowStorefront}))},436:(e,t,n)=>{n.d(t,{WF:()=>s,Dm:()=>a,Xl:()=>p,aB:()=>u});var o=n(678);const r=o.Ax&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));var i=n(121);var s;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(s||(s={}));const a=function(e){let t;return()=>{if(!o.sS)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const n={clientAPIVersion:o.u0},i=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return i.onDisconnection((async()=>{t=void 0})),i})().then((e=>e)).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}("__of_workspace_protocol__"),c="isLaunchedViaLib",d=e=>{const t=new URL(e);return t.searchParams.append(c,"true"),t.toString()},u=async()=>{if(!await(0,i.JV)(i.iW))return(o.ZK||-1===navigator.userAgent.indexOf("Win"))&&await fin.Application.startFromManifest(d(o.aW)),fin.System.openUrlWithBrowser(d(o.GX))},p=async()=>(await u(),a())},82:(e,t,n)=>{n.d(t,{R8:()=>s,X_:()=>i,lP:()=>o});var o,r=n(436);!function(e){e.Storefront="storefront",e.Dock="dock"}(o||(o={}));const i=async e=>(await(0,r.Dm)()).dispatch(r.WF.ShowProviderWindow,{providerType:e}),s=async e=>(await(0,r.Dm)()).dispatch(r.WF.HideProviderWindow,{providerType:e})},806:(e,t,n)=>{n.d(t,{q9:()=>o});var o,r,i,s=n(678);!function(e){e.Workspace="openfin-browser"}(o||(o={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(i||(i={}));s.AB,o.Workspace},678:(e,t,n)=>{var o;n.d(t,{AB:()=>a,Ax:()=>i,GX:()=>u,ZK:()=>d,aW:()=>p,oC:()=>c,sS:()=>r,u0:()=>f}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(o||(o={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,i=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),s=i?window.origin:o.Local,a=r&&fin.me.uuid,c=r&&fin.me.name,d=(r&&fin.me.entityType,"prod"===o.Local),u=(o.Dev,o.Staging,o.Prod,"fins://system-apps/workspace"),p="https://cdn.openfin.co/workspace/9.0.4/app.json",l=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,f=(l("https://cdn.openfin.co/workspace/9.0.4"),l("https://cdn.openfin.co/workspace/9.0.4"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&l(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&l(WORKSPACE_DOCS_CLIENT_URL),"9.0.4")},532:(e,t,n)=>{n.d(t,{Wn:()=>d,ck:()=>a,d9:()=>c});var o,r=n(678),i=n(121);!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(o||(o={}));const s=async(e,t)=>{const n={apiVersion:t.apiVersion||r.u0,componentName:e,componentVersion:t.componentVersion||r.u0,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:n})},a=async e=>{i.OI.uuid===i.Gi.uuid&&i.OI.name===i.Gi.name||s(o.Home,e)},c=async e=>{s(o.Storefront,e)},d=async e=>{s(o.Dock,e)}},121:(e,t,n)=>{n.d(t,{Gi:()=>c,JV:()=>p,OI:()=>d,iW:()=>u});var o,r,i=n(806),s=n(678);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(o||(o={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(r||(r={}));function a(e){if(!s.sS)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:s.oC,uuid:s.AB};const d={name:o.Home,uuid:i.q9.Workspace},u=(o.Dock,i.q9.Workspace,o.Storefront,i.q9.Workspace,{name:i.q9.Workspace,uuid:i.q9.Workspace});const p=e=>a(e).getOptions().then((()=>!0)).catch((()=>!1))},316:(e,t,n)=>{var o,r,i;n.d(t,{De:()=>o,px:()=>r,wt:()=>i}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(o||(o={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(i||(i={}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{ActionTrigger:()=>P.p,AppManifestType:()=>W.L,ButtonStyle:()=>C.ZJ,CLIAction:()=>k.Pt,CLIFilterOptionType:()=>k.el,CLITemplate:()=>k.yW,ContainerTemplateFragmentNames:()=>C.p6,Dock:()=>e,DockButtonNames:()=>c.v,Home:()=>h,Legacy:()=>t,PresentationTemplateFragmentNames:()=>C.Go,SearchTagBackground:()=>P.w,Storefront:()=>S,StorefrontTemplate:()=>W.T,TemplateFragmentTypes:()=>C.bI});var e={};n.r(e),n.d(e,{DockButtonNames:()=>c.v,deregister:()=>l,minimize:()=>f,register:()=>p,show:()=>w});var t={};n.r(t),n.d(t,{getPages:()=>v,getWorkspaces:()=>m});var r=n(678),i=n(532),s=n(436),a=n(82),c=n(427);let d,u=!1;const p=e=>(d=new Promise((async(t,n)=>{try{const n=await(async e=>{const t=await(0,s.Xl)();if(u)throw new Error("A dock provider for the platform is already registered.");return u=!0,e.clientAPIVersion=r.u0,t.dispatch(s.WF.RegisterProvider,{providerType:a.lP.Dock,info:e})})(e);(0,i.Wn)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:r.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,i.Wn)({allowed:!1,rejectionCode:e.message}),n(e),d=null}})),d),l=async()=>{await d,u=!1;return(await(0,s.Xl)()).dispatch(s.WF.DeregisterProvider,{providerType:a.lP.Dock})},f=async()=>{await d,await(0,s.aB)(),await(0,a.R8)(a.lP.Dock)},w=async()=>{await d,await(0,s.aB)(),await(0,a.X_)(a.lP.Dock)};var g,h=n(703);n(121);!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(g||(g={}));new Map;var y;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition"}(y||(y={}));const v=()=>async function(){return(await(0,s.Dm)()).dispatch(s.WF.GetLegacyPages,void 0)}(),m=()=>(async()=>(await(0,s.Dm)()).dispatch(s.WF.GetLegacyWorkspaces,void 0))();var S=n(528),P=n(298),C=n(109),k=n(758),W=n(114)})(),module.exports=o})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./client/src/modules/integrations/salesforce/integration-provider.ts":
/*!****************************************************************************!*\
  !*** ./client/src/modules/integrations/salesforce/integration-provider.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SalesForceIntegrationProvider": () => (/* binding */ SalesForceIntegrationProvider)
/* harmony export */ });
/* harmony import */ var _openfin_salesforce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/salesforce */ "../../node_modules/@openfin/salesforce/openfin.salesforce.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Implement the integration provider for SalesForce.
 */
class SalesForceIntegrationProvider {
    /**
     * The module is being registered.
     * @param integrationManager The manager for the integration.
     * @param integration The integration details.
     * @returns Nothing.
     */
    async register(integrationManager, integration) {
        this._integrationManager = integrationManager;
        console.log("Registering SalesForce");
        try {
            await this.openConnection(integration);
        }
        catch (err) {
            console.error("Error connecting to SalesForce", err);
        }
    }
    /**
     * The module is being deregistered.
     * @param integration The integration details.
     * @returns Nothing.
     */
    async deregister(integration) {
        await this.closeConnection();
    }
    /**
     * An entry has been selected.
     * @param integration The integration details.
     * @param result The dispatched result.
     * @param lastResponse The last response.
     * @returns True if the item was handled.
     */
    async itemSelection(integration, result, lastResponse) {
        // if the user clicked the reconnect result, reconnect to salesforce and re-run query
        if (result.key === SalesForceIntegrationProvider._NOT_CONNECTED_SEARCH_RESULT_KEY) {
            await this.openConnection(integration);
            if (result.data?.query) {
                const results = await this.getSearchResults(integration, result.data?.query, result.data?.filters, lastResponse);
                if (lastResponse) {
                    lastResponse.revoke(SalesForceIntegrationProvider._NOT_CONNECTED_SEARCH_RESULT_KEY);
                    lastResponse.respond(results.results);
                }
            }
            return true;
        }
        // otherwise open the result page url in browser
        const data = result.data;
        if (data !== undefined && this._integrationManager && this._integrationManager.launchView) {
            const preload = integration?.data?.preload;
            const viewOptions = {
                url: data.pageUrl,
                fdc3InteropApi: "1.2",
                interop: {
                    currentContextGroup: "green"
                },
                customData: { buttonLabel: "Process Participant" },
                preloadScripts: [{ url: preload }],
                target: { name: "", url: "", uuid: "" }
            };
            await this._integrationManager.launchView(viewOptions);
            return true;
        }
        return false;
    }
    /**
     * Get a list of search results based on the query and filters.
     * @param integration The integration details.
     * @param query The query to search for.
     * @param filters The filters to apply.
     * @param lastResponse The last search response used for updating existing results.
     * @returns The list of results and new filters.
     */
    async getSearchResults(integration, query, filters, lastResponse) {
        const response = {
            results: await this.getDefaultEntries(integration, query)
        };
        if (this._salesForceConnection) {
            let searchResults;
            let selectedObjects = [];
            if (Array.isArray(filters) && filters.length > 0) {
                const objectsFilter = filters.find((x) => x.id === SalesForceIntegrationProvider._OBJECTS_FILTER_ID);
                if (objectsFilter) {
                    selectedObjects = (Array.isArray(objectsFilter.options) ? objectsFilter.options : [objectsFilter.options])
                        .filter((x) => Boolean(x.isSelected))
                        .map((x) => (x.value === "Note" ? "ContentNote" : x.value));
                }
            }
            try {
                searchResults = await this.getApiSearchResults(query, selectedObjects);
                const results = searchResults.map((searchResult) => {
                    if ("Website" in searchResult) {
                        return {
                            actions: [{ name: "View", hotkey: "enter" }],
                            label: searchResult.attributes.type,
                            key: searchResult.Id,
                            title: searchResult.Name,
                            icon: integration?.data?.iconMap.account,
                            data: {
                                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                                pageUrl: this.getObjectUrl(searchResult.Id, integration.data?.orgUrl),
                                tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                            },
                            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Contact,
                            templateContent: {
                                name: searchResult.Name,
                                title: searchResult.Industry,
                                details: [
                                    [
                                        ["Phone", searchResult.Phone],
                                        ["Type", searchResult.Type],
                                        ["Website", searchResult.Website]
                                    ]
                                ]
                            }
                        };
                    }
                    else if ("Email" in searchResult) {
                        return {
                            actions: [{ name: "View", hotkey: "enter" }],
                            label: searchResult.attributes.type,
                            key: searchResult.Id,
                            title: searchResult.Name,
                            icon: integration?.data?.iconMap.contact,
                            data: {
                                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                                pageUrl: this.getObjectUrl(searchResult.Id, integration.data?.orgUrl),
                                tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                            },
                            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Contact,
                            templateContent: {
                                name: searchResult.Name,
                                title: searchResult.Title,
                                useInitials: true,
                                details: [
                                    [
                                        ["Department", searchResult.Department],
                                        ["Email", searchResult.Email],
                                        ["Work #", searchResult.Phone]
                                    ]
                                ]
                            }
                        };
                    }
                    else if ("Description" in searchResult) {
                        return {
                            actions: [{ name: "View", hotkey: "enter" }],
                            label: searchResult.attributes.type,
                            key: searchResult.Id,
                            title: searchResult.Subject,
                            icon: integration?.data?.iconMap.task,
                            data: {
                                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                                pageUrl: this.getObjectUrl(searchResult.Id, integration.data?.orgUrl),
                                tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                            },
                            template: "List",
                            templateContent: [
                                ["Subject", searchResult.Subject],
                                ["Comments", searchResult.Description]
                            ]
                        };
                    }
                    else if ("TextPreview" in searchResult) {
                        return {
                            actions: [{ name: "View", hotkey: "enter" }],
                            label: "Note",
                            key: searchResult.Id,
                            title: searchResult.Title,
                            icon: integration?.data?.iconMap.note,
                            data: {
                                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                                pageUrl: this.getObjectUrl(searchResult.Id, integration.data?.orgUrl),
                                tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                            },
                            template: "List",
                            templateContent: [
                                ["Title", searchResult.Title],
                                ["Content", searchResult?.TextPreview]
                            ]
                        };
                    }
                    else if ("actor" in searchResult &&
                        (searchResult.type === "TextPost" || searchResult.type === "ContentPost")) {
                        return {
                            actions: [{ name: "View", hotkey: "enter" }],
                            label: "Chatter",
                            key: searchResult.id,
                            title: searchResult.actor?.displayName,
                            icon: integration?.data?.iconMap.chatter,
                            data: {
                                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                                pageUrl: this.getObjectUrl(searchResult.id, integration.data?.orgUrl),
                                tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                            },
                            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Contact,
                            templateContent: {
                                name: searchResult.actor?.displayName,
                                useInitials: true,
                                details: [
                                    [
                                        ["Header", searchResult?.header?.text],
                                        ["Note", searchResult?.body?.text]
                                    ]
                                ]
                            }
                        };
                    }
                    // in this case we are only searching for accounts, contacts, tasks, content notes and chatter
                });
                const filteredResults = results.filter(Boolean);
                // eslint-disable-next-line no-confusing-arrow
                const objects = searchResults.map((result) => "attributes" in result ? result.attributes.type : "Chatter");
                response.results.push(...filteredResults);
                response.context = {
                    filters: this.getSearchFilters(objects.map((c) => (c === "ContentNote" ? "Note" : c)))
                };
            }
            catch (err) {
                await this.closeConnection();
                if (err instanceof _openfin_salesforce__WEBPACK_IMPORTED_MODULE_0__.ConnectionError) {
                    response.results.push(this.getReconnectSearchResult(integration, query, filters));
                }
                console.error("Error retrieving SalesForce search results", err);
            }
        }
        return response;
    }
    /**
     * Get a list of the default application entries.
     * @param integration The integration details.
     * @param query The query to search for.
     * @returns The list of application entries.
     */
    async getDefaultEntries(integration, query) {
        const results = [];
        if (integration?.data?.orgUrl) {
            const title = "Browse Salesforce";
            if (query === undefined ||
                query === null ||
                query === "" ||
                title.toLowerCase().includes(query.toLowerCase())) {
                results.push({
                    actions: [{ name: "Browse", hotkey: "enter" }],
                    data: {
                        providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                        pageUrl: integration?.data?.orgUrl,
                        tags: [SalesForceIntegrationProvider._PROVIDER_ID]
                    },
                    icon: integration.icon,
                    key: SalesForceIntegrationProvider._BROWSE_SEARCH_RESULT_KEY,
                    template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Plain,
                    templateContent: undefined,
                    title
                });
            }
            if (!this._salesForceConnection && (query === undefined || query === null || query === "")) {
                results.push(this.getReconnectSearchResult(integration));
            }
        }
        return results;
    }
    /**
     * Open the connection to SaleForce.
     * @param integration The integration details.
     * @internal
     */
    async openConnection(integration) {
        if (integration?.data?.orgUrl && !this._salesForceConnection) {
            (0,_openfin_salesforce__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
            this._salesForceConnection = await (0,_openfin_salesforce__WEBPACK_IMPORTED_MODULE_0__.connect)(integration?.data.orgUrl, integration?.data.consumerKey);
        }
    }
    /**
     * Close the connection to SalesForce.
     * @internal
     */
    async closeConnection() {
        if (this._salesForceConnection) {
            try {
                await this._salesForceConnection.disconnect();
            }
            catch (err) {
                console.error("Error disconnecting SalesForce", err);
            }
            finally {
                this._salesForceConnection = undefined;
            }
        }
    }
    /**
     * Create the object url from the if and origin.
     * @param objectId The object id.
     * @param salesforceOrgOrigin The origin url.
     * @returns Then object url.
     * @internal
     */
    getObjectUrl(objectId, salesforceOrgOrigin) {
        if (!salesforceOrgOrigin) {
            return "";
        }
        return `${salesforceOrgOrigin}/${objectId}`;
    }
    /**
     * Get results from the API using a query.
     * @param query The query to call the API with.
     * @param selectedObjects The selected filters.
     * @returns The search result objects from the API.
     * @internal
     */
    async getApiSearchResults(query, selectedObjects) {
        const accountFieldSpec = "Account(Id, Industry, Name, Phone, Type, Website)";
        const contactFieldSpec = "Contact(Department, Email, Id, Name, Phone, Title)";
        const taskFieldSpec = "Task(Id, Subject, Description)";
        const contentNoteFieldSpec = "ContentNote(Id, Title, Content, TextPreview)";
        const fieldSpecMap = new Map([
            ["Account", accountFieldSpec],
            ["Contact", contactFieldSpec],
            ["Task", taskFieldSpec],
            ["ContentNote", contentNoteFieldSpec]
        ]);
        const fieldSpecs = [...fieldSpecMap]
            .filter((x) => {
            if (Array.isArray(selectedObjects) && selectedObjects.length > 0) {
                return selectedObjects.includes(x[0]);
            }
            return true;
        })
            .map((x) => x[1]);
        const batch = fieldSpecs.map((fieldSpec) => {
            const salesforceSearchQuery = `FIND {${this.escapeQuery(query)}} IN ALL FIELDS RETURNING ${fieldSpec} LIMIT 10`;
            return {
                method: "GET",
                url: `/services/data/vXX.X/search?q=${encodeURIComponent(salesforceSearchQuery)}`
            };
        });
        const includeChatter = !selectedObjects?.length || selectedObjects.includes("Chatter");
        if (includeChatter) {
            batch.push({
                method: "GET",
                url: `/services/data/vXX.X/chatter/feed-elements?q=${query}&pageSize=25&sort=LastModifiedDateDesc`
            });
        }
        const batchedResults = await this.getBatchedResults(batch);
        let results = [];
        if (batchedResults.length > 0) {
            let idx = 0;
            for (; idx < fieldSpecs.length; idx++) {
                const searchResponse = batchedResults[idx];
                if (searchResponse?.searchRecords?.length) {
                    results = results.concat(searchResponse.searchRecords);
                }
            }
            if (includeChatter) {
                const chatterResponse = batchedResults[idx++];
                if (chatterResponse?.elements?.length) {
                    results = results.concat(chatterResponse.elements);
                }
            }
        }
        return results;
    }
    /**
     * Get batched results from SalesForce api.
     * @param batchRequests The batch requests to send.
     * @returns The results from the batch request.
     * @internal
     */
    async getBatchedResults(batchRequests) {
        if (batchRequests.length === 0 || !this._salesForceConnection) {
            return [];
        }
        const batch = { batchRequests, haltOnError: false };
        const response = await this._salesForceConnection.executeApiRequest("/services/data/vXX.X/composite/batch/", "POST", batch, { "Content-Type": "application/json" });
        return response.data?.results.map((r) => r.result) ?? [];
    }
    /**
     * Escape any characters needed in SalesForce API calls.
     * @param query The query to escape.
     * @returns The escaped query.
     * @internal
     */
    escapeQuery(query) {
        // There are some reserved characters for queries so we need to escape them
        // https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_sosl_find.htm
        return query.replace(/[!"&'()*+:?[\\\]^{|}~-]/gm, "\\$&");
    }
    /**
     * Get the search result to display when SalesForce needs to reconnect.
     * @param integration The integration details.
     * @param query The query that needs to reconnect.
     * @param filters The filter for the reconnect.
     * @returns The search result entry.
     * @internal
     */
    getReconnectSearchResult(integration, query, filters) {
        return {
            actions: [{ name: "Reconnect", hotkey: "enter" }],
            key: SalesForceIntegrationProvider._NOT_CONNECTED_SEARCH_RESULT_KEY,
            icon: integration?.icon,
            title: "Reconnect to Salesforce",
            data: {
                providerId: SalesForceIntegrationProvider._PROVIDER_ID,
                query,
                filters
            }
        };
    }
    /**
     * Get the search filters based on the results.
     * @param objects The object types to create the filters from.
     * @returns The filters.
     * @internal
     */
    getSearchFilters(objects) {
        if (Array.isArray(objects) && objects.length > 0) {
            const filters = [];
            const uniqueObjects = [...new Set(objects.sort())];
            const objectFilter = {
                id: SalesForceIntegrationProvider._OBJECTS_FILTER_ID,
                title: "Objects",
                type: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLIFilterOptionType.MultiSelect,
                options: []
            };
            for (const object of uniqueObjects) {
                if (Array.isArray(objectFilter.options)) {
                    objectFilter.options.push({
                        value: object,
                        isSelected: false
                    });
                }
            }
            filters.push(objectFilter);
            return filters;
        }
        return [];
    }
}
/**
 * Provider id.
 * @internal
 */
SalesForceIntegrationProvider._PROVIDER_ID = "salesforce";
/**
 * The key to use for a SalesForce result.
 * @internal
 */
SalesForceIntegrationProvider._BROWSE_SEARCH_RESULT_KEY = "browse-salesforce";
/**
 * The id for the SaleForce filters.
 * @internal
 */
SalesForceIntegrationProvider._OBJECTS_FILTER_ID = "salesforce-objects";
/**
 * The id of the not connected result.
 * @internal
 */
SalesForceIntegrationProvider._NOT_CONNECTED_SEARCH_RESULT_KEY = "salesforce-not-connected-result";


/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!*************************************************************!*\
  !*** ./client/src/modules/integrations/salesforce/index.ts ***!
  \*************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "integration": () => (/* binding */ integration)
/* harmony export */ });
/* harmony import */ var _integration_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./integration-provider */ "./client/src/modules/integrations/salesforce/integration-provider.ts");

const integration = new _integration_provider__WEBPACK_IMPORTED_MODULE_0__.SalesForceIntegrationProvider();

})();

var __webpack_exports__integration = __webpack_exports__.integration;
export { __webpack_exports__integration as integration };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtTQUNBO1NBQ0E7U0FDQTtTQUNBO1NBQ0E7U0FDQTs7U0FFQTtTQUNBOztTQUVBO1NBQ0E7U0FDQTs7Ozs7VUN0QkE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBLGlDQUFpQyxXQUFXO1VBQzVDO1VBQ0E7Ozs7O1VDUEE7VUFDQTtVQUNBO1VBQ0E7VUFDQSx5Q0FBeUMsd0NBQXdDO1VBQ2pGO1VBQ0E7VUFDQTs7Ozs7VUNQQTs7Ozs7VUNBQTtVQUNBO1VBQ0E7VUFDQSx1REFBdUQsaUJBQWlCO1VBQ3hFO1VBQ0EsZ0RBQWdELGFBQWE7VUFDN0Q7Ozs7Ozs7Ozs7Ozs7OztBQ051RTtBQUVoRSxNQUFNLFdBQVcsR0FBRyxJQUFJLGdGQUE2QixFQUFFLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vc2FsZXNmb3JjZS9vcGVuZmluLnNhbGVzZm9yY2UuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWN1c3RvbWl6ZS13b3Jrc3BhY2UvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS8uL2NsaWVudC9zcmMvbW9kdWxlcy9pbnRlZ3JhdGlvbnMvc2FsZXNmb3JjZS9pbnRlZ3JhdGlvbi1wcm92aWRlci50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWN1c3RvbWl6ZS13b3Jrc3BhY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tY3VzdG9taXplLXdvcmtzcGFjZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1jdXN0b21pemUtd29ya3NwYWNlLy4vY2xpZW50L3NyYy9tb2R1bGVzL2ludGVncmF0aW9ucy9zYWxlc2ZvcmNlL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBlPXs5NDIxOihlLHQsbik9PntlLmV4cG9ydHM9big4NDQ4KX0sOTk0OihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpLHI9big4MzIyKSxvPW4oMjA1OCkscz1uKDg5ODIpLGE9big1MDYzKSxjPW4oOTU0MSksZD1uKDY0OTcpLGg9bigyNzUxKSxsPW4oODkxNiksdT1uKDUxNDIpLHA9big1ODIyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciB3LGY9ZS5kYXRhLHk9ZS5oZWFkZXJzLGc9ZS5yZXNwb25zZVR5cGU7ZnVuY3Rpb24gbSgpe2UuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUodyksZS5zaWduYWwmJmUuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHcpfWkuaXNGb3JtRGF0YShmKSYmaS5pc1N0YW5kYXJkQnJvd3NlckVudigpJiZkZWxldGUgeVtcIkNvbnRlbnQtVHlwZVwiXTt2YXIgdj1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZS5hdXRoKXt2YXIgQz1lLmF1dGgudXNlcm5hbWV8fFwiXCIsRT1lLmF1dGgucGFzc3dvcmQ/dW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGUuYXV0aC5wYXNzd29yZCkpOlwiXCI7eS5BdXRob3JpemF0aW9uPVwiQmFzaWMgXCIrYnRvYShDK1wiOlwiK0UpfXZhciB4PWEoZS5iYXNlVVJMLGUudXJsKTtmdW5jdGlvbiBBKCl7aWYodil7dmFyIGk9XCJnZXRBbGxSZXNwb25zZUhlYWRlcnNcImluIHY/Yyh2LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTpudWxsLG89e2RhdGE6ZyYmXCJ0ZXh0XCIhPT1nJiZcImpzb25cIiE9PWc/di5yZXNwb25zZTp2LnJlc3BvbnNlVGV4dCxzdGF0dXM6di5zdGF0dXMsc3RhdHVzVGV4dDp2LnN0YXR1c1RleHQsaGVhZGVyczppLGNvbmZpZzplLHJlcXVlc3Q6dn07cigoZnVuY3Rpb24oZSl7dChlKSxtKCl9KSwoZnVuY3Rpb24oZSl7bihlKSxtKCl9KSxvKSx2PW51bGx9fWlmKHYub3BlbihlLm1ldGhvZC50b1VwcGVyQ2FzZSgpLHMoeCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLCEwKSx2LnRpbWVvdXQ9ZS50aW1lb3V0LFwib25sb2FkZW5kXCJpbiB2P3Yub25sb2FkZW5kPUE6di5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt2JiY0PT09di5yZWFkeVN0YXRlJiYoMCE9PXYuc3RhdHVzfHx2LnJlc3BvbnNlVVJMJiYwPT09di5yZXNwb25zZVVSTC5pbmRleE9mKFwiZmlsZTpcIikpJiZzZXRUaW1lb3V0KEEpfSx2Lm9uYWJvcnQ9ZnVuY3Rpb24oKXt2JiYobihuZXcgbChcIlJlcXVlc3QgYWJvcnRlZFwiLGwuRUNPTk5BQk9SVEVELGUsdikpLHY9bnVsbCl9LHYub25lcnJvcj1mdW5jdGlvbigpe24obmV3IGwoXCJOZXR3b3JrIEVycm9yXCIsbC5FUlJfTkVUV09SSyxlLHYsdikpLHY9bnVsbH0sdi5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgdD1lLnRpbWVvdXQ/XCJ0aW1lb3V0IG9mIFwiK2UudGltZW91dCtcIm1zIGV4Y2VlZGVkXCI6XCJ0aW1lb3V0IGV4Y2VlZGVkXCIsaT1lLnRyYW5zaXRpb25hbHx8aDtlLnRpbWVvdXRFcnJvck1lc3NhZ2UmJih0PWUudGltZW91dEVycm9yTWVzc2FnZSksbihuZXcgbCh0LGkuY2xhcmlmeVRpbWVvdXRFcnJvcj9sLkVUSU1FRE9VVDpsLkVDT05OQUJPUlRFRCxlLHYpKSx2PW51bGx9LGkuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIEk9KGUud2l0aENyZWRlbnRpYWxzfHxkKHgpKSYmZS54c3JmQ29va2llTmFtZT9vLnJlYWQoZS54c3JmQ29va2llTmFtZSk6dm9pZCAwO0kmJih5W2UueHNyZkhlYWRlck5hbWVdPUkpfVwic2V0UmVxdWVzdEhlYWRlclwiaW4gdiYmaS5mb3JFYWNoKHksKGZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09ZiYmXCJjb250ZW50LXR5cGVcIj09PXQudG9Mb3dlckNhc2UoKT9kZWxldGUgeVt0XTp2LnNldFJlcXVlc3RIZWFkZXIodCxlKX0pKSxpLmlzVW5kZWZpbmVkKGUud2l0aENyZWRlbnRpYWxzKXx8KHYud2l0aENyZWRlbnRpYWxzPSEhZS53aXRoQ3JlZGVudGlhbHMpLGcmJlwianNvblwiIT09ZyYmKHYucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uRG93bmxvYWRQcm9ncmVzcyYmdi5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixlLm9uRG93bmxvYWRQcm9ncmVzcyksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblVwbG9hZFByb2dyZXNzJiZ2LnVwbG9hZCYmdi51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZS5vblVwbG9hZFByb2dyZXNzKSwoZS5jYW5jZWxUb2tlbnx8ZS5zaWduYWwpJiYodz1mdW5jdGlvbihlKXt2JiYobighZXx8ZSYmZS50eXBlP25ldyB1OmUpLHYuYWJvcnQoKSx2PW51bGwpfSxlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnN1YnNjcmliZSh3KSxlLnNpZ25hbCYmKGUuc2lnbmFsLmFib3J0ZWQ/dygpOmUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHcpKSksZnx8KGY9bnVsbCk7dmFyIGI9cCh4KTtiJiYtMT09PVtcImh0dHBcIixcImh0dHBzXCIsXCJmaWxlXCJdLmluZGV4T2YoYik/bihuZXcgbChcIlVuc3VwcG9ydGVkIHByb3RvY29sIFwiK2IrXCI6XCIsbC5FUlJfQkFEX1JFUVVFU1QsZSkpOnYuc2VuZChmKX0pKX19LDg0NDg6KGUsdCxuKT0+e3ZhciBpPW4oODQ0Nikscj1uKDg5NjIpLG89big1NDk1KSxzPW4oNjE0OSksYT1mdW5jdGlvbiBlKHQpe3ZhciBuPW5ldyBvKHQpLGE9cihvLnByb3RvdHlwZS5yZXF1ZXN0LG4pO3JldHVybiBpLmV4dGVuZChhLG8ucHJvdG90eXBlLG4pLGkuZXh0ZW5kKGEsbiksYS5jcmVhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGUocyh0LG4pKX0sYX0obigxNTg2KSk7YS5BeGlvcz1vLGEuQ2FuY2VsZWRFcnJvcj1uKDUxNDIpLGEuQ2FuY2VsVG9rZW49big1NDMpLGEuaXNDYW5jZWw9bigzNDUyKSxhLlZFUlNJT049big0NDc0KS52ZXJzaW9uLGEudG9Gb3JtRGF0YT1uKDc0NTIpLGEuQXhpb3NFcnJvcj1uKDg5MTYpLGEuQ2FuY2VsPWEuQ2FuY2VsZWRFcnJvcixhLmFsbD1mdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5hbGwoZSl9LGEuc3ByZWFkPW4oOTA2NyksYS5pc0F4aW9zRXJyb3I9bigxNzI2KSxlLmV4cG9ydHM9YSxlLmV4cG9ydHMuZGVmYXVsdD1hfSw1NDM6KGUsdCxuKT0+e3ZhciBpPW4oNTE0Mik7ZnVuY3Rpb24gcihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3ZhciB0O3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dD1lfSkpO3ZhciBuPXRoaXM7dGhpcy5wcm9taXNlLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKG4uX2xpc3RlbmVycyl7dmFyIHQsaT1uLl9saXN0ZW5lcnMubGVuZ3RoO2Zvcih0PTA7dDxpO3QrKyluLl9saXN0ZW5lcnNbdF0oZSk7bi5fbGlzdGVuZXJzPW51bGx9fSkpLHRoaXMucHJvbWlzZS50aGVuPWZ1bmN0aW9uKGUpe3ZhciB0LGk9bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe24uc3Vic2NyaWJlKGUpLHQ9ZX0pKS50aGVuKGUpO3JldHVybiBpLmNhbmNlbD1mdW5jdGlvbigpe24udW5zdWJzY3JpYmUodCl9LGl9LGUoKGZ1bmN0aW9uKGUpe24ucmVhc29ufHwobi5yZWFzb249bmV3IGkoZSksdChuLnJlYXNvbikpfSkpfXIucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYXNvbil0aHJvdyB0aGlzLnJlYXNvbn0sci5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3RoaXMucmVhc29uP2UodGhpcy5yZWFzb24pOnRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxyLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLl9saXN0ZW5lcnMpe3ZhciB0PXRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZSh0LDEpfX0sci5zb3VyY2U9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm57dG9rZW46bmV3IHIoKGZ1bmN0aW9uKHQpe2U9dH0pKSxjYW5jZWw6ZX19LGUuZXhwb3J0cz1yfSw1MTQyOihlLHQsbik9Pnt2YXIgaT1uKDg5MTYpO2Z1bmN0aW9uIHIoZSl7aS5jYWxsKHRoaXMsbnVsbD09ZT9cImNhbmNlbGVkXCI6ZSxpLkVSUl9DQU5DRUxFRCksdGhpcy5uYW1lPVwiQ2FuY2VsZWRFcnJvclwifW4oODQ0NikuaW5oZXJpdHMocixpLHtfX0NBTkNFTF9fOiEwfSksZS5leHBvcnRzPXJ9LDM0NTI6ZT0+e2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4hKCFlfHwhZS5fX0NBTkNFTF9fKX19LDU0OTU6KGUsdCxuKT0+e3ZhciBpPW4oODQ0Nikscj1uKDg5ODIpLG89big5NTgyKSxzPW4oNjg2MiksYT1uKDYxNDkpLGM9big1MDYzKSxkPW4oMTE2NiksaD1kLnZhbGlkYXRvcnM7ZnVuY3Rpb24gbChlKXt0aGlzLmRlZmF1bHRzPWUsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IG8scmVzcG9uc2U6bmV3IG99fWwucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtcInN0cmluZ1wiPT10eXBlb2YgZT8odD10fHx7fSkudXJsPWU6dD1lfHx7fSwodD1hKHRoaXMuZGVmYXVsdHMsdCkpLm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9XCJnZXRcIjt2YXIgbj10LnRyYW5zaXRpb25hbDt2b2lkIDAhPT1uJiZkLmFzc2VydE9wdGlvbnMobix7c2lsZW50SlNPTlBhcnNpbmc6aC50cmFuc2l0aW9uYWwoaC5ib29sZWFuKSxmb3JjZWRKU09OUGFyc2luZzpoLnRyYW5zaXRpb25hbChoLmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6aC50cmFuc2l0aW9uYWwoaC5ib29sZWFuKX0sITEpO3ZhciBpPVtdLHI9ITA7dGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJ1bldoZW4mJiExPT09ZS5ydW5XaGVuKHQpfHwocj1yJiZlLnN5bmNocm9ub3VzLGkudW5zaGlmdChlLmZ1bGZpbGxlZCxlLnJlamVjdGVkKSl9KSk7dmFyIG8sYz1bXTtpZih0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKChmdW5jdGlvbihlKXtjLnB1c2goZS5mdWxmaWxsZWQsZS5yZWplY3RlZCl9KSksIXIpe3ZhciBsPVtzLHZvaWQgMF07Zm9yKEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGwsaSksbD1sLmNvbmNhdChjKSxvPVByb21pc2UucmVzb2x2ZSh0KTtsLmxlbmd0aDspbz1vLnRoZW4obC5zaGlmdCgpLGwuc2hpZnQoKSk7cmV0dXJuIG99Zm9yKHZhciB1PXQ7aS5sZW5ndGg7KXt2YXIgcD1pLnNoaWZ0KCksdz1pLnNoaWZ0KCk7dHJ5e3U9cCh1KX1jYXRjaChlKXt3KGUpO2JyZWFrfX10cnl7bz1zKHUpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX1mb3IoO2MubGVuZ3RoOylvPW8udGhlbihjLnNoaWZ0KCksYy5zaGlmdCgpKTtyZXR1cm4gb30sbC5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe2U9YSh0aGlzLmRlZmF1bHRzLGUpO3ZhciB0PWMoZS5iYXNlVVJMLGUudXJsKTtyZXR1cm4gcih0LGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplcil9LGkuZm9yRWFjaChbXCJkZWxldGVcIixcImdldFwiLFwiaGVhZFwiLFwib3B0aW9uc1wiXSwoZnVuY3Rpb24oZSl7bC5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KGEobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6KG58fHt9KS5kYXRhfSkpfX0pKSxpLmZvckVhY2goW1wicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiXSwoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24obixpLHIpe3JldHVybiB0aGlzLnJlcXVlc3QoYShyfHx7fSx7bWV0aG9kOmUsaGVhZGVyczp0P3tcIkNvbnRlbnQtVHlwZVwiOlwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwifTp7fSx1cmw6bixkYXRhOml9KSl9fWwucHJvdG90eXBlW2VdPXQoKSxsLnByb3RvdHlwZVtlK1wiRm9ybVwiXT10KCEwKX0pKSxlLmV4cG9ydHM9bH0sODkxNjooZSx0LG4pPT57dmFyIGk9big4NDQ2KTtmdW5jdGlvbiByKGUsdCxuLGkscil7RXJyb3IuY2FsbCh0aGlzKSx0aGlzLm1lc3NhZ2U9ZSx0aGlzLm5hbWU9XCJBeGlvc0Vycm9yXCIsdCYmKHRoaXMuY29kZT10KSxuJiYodGhpcy5jb25maWc9biksaSYmKHRoaXMucmVxdWVzdD1pKSxyJiYodGhpcy5yZXNwb25zZT1yKX1pLmluaGVyaXRzKHIsRXJyb3Ise3RvSlNPTjpmdW5jdGlvbigpe3JldHVybnttZXNzYWdlOnRoaXMubWVzc2FnZSxuYW1lOnRoaXMubmFtZSxkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLG51bWJlcjp0aGlzLm51bWJlcixmaWxlTmFtZTp0aGlzLmZpbGVOYW1lLGxpbmVOdW1iZXI6dGhpcy5saW5lTnVtYmVyLGNvbHVtbk51bWJlcjp0aGlzLmNvbHVtbk51bWJlcixzdGFjazp0aGlzLnN0YWNrLGNvbmZpZzp0aGlzLmNvbmZpZyxjb2RlOnRoaXMuY29kZSxzdGF0dXM6dGhpcy5yZXNwb25zZSYmdGhpcy5yZXNwb25zZS5zdGF0dXM/dGhpcy5yZXNwb25zZS5zdGF0dXM6bnVsbH19fSk7dmFyIG89ci5wcm90b3R5cGUscz17fTtbXCJFUlJfQkFEX09QVElPTl9WQUxVRVwiLFwiRVJSX0JBRF9PUFRJT05cIixcIkVDT05OQUJPUlRFRFwiLFwiRVRJTUVET1VUXCIsXCJFUlJfTkVUV09SS1wiLFwiRVJSX0ZSX1RPT19NQU5ZX1JFRElSRUNUU1wiLFwiRVJSX0RFUFJFQ0FURURcIixcIkVSUl9CQURfUkVTUE9OU0VcIixcIkVSUl9CQURfUkVRVUVTVFwiLFwiRVJSX0NBTkNFTEVEXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3NbZV09e3ZhbHVlOmV9fSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHIscyksT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJpc0F4aW9zRXJyb3JcIix7dmFsdWU6ITB9KSxyLmZyb209ZnVuY3Rpb24oZSx0LG4scyxhLGMpe3ZhciBkPU9iamVjdC5jcmVhdGUobyk7cmV0dXJuIGkudG9GbGF0T2JqZWN0KGUsZCwoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1FcnJvci5wcm90b3R5cGV9KSksci5jYWxsKGQsZS5tZXNzYWdlLHQsbixzLGEpLGQubmFtZT1lLm5hbWUsYyYmT2JqZWN0LmFzc2lnbihkLGMpLGR9LGUuZXhwb3J0cz1yfSw5NTgyOihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpO2Z1bmN0aW9uIHIoKXt0aGlzLmhhbmRsZXJzPVtdfXIucHJvdG90eXBlLnVzZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuaGFuZGxlcnMucHVzaCh7ZnVsZmlsbGVkOmUscmVqZWN0ZWQ6dCxzeW5jaHJvbm91czohIW4mJm4uc3luY2hyb25vdXMscnVuV2hlbjpuP24ucnVuV2hlbjpudWxsfSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sci5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LHIucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7aS5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsKGZ1bmN0aW9uKHQpe251bGwhPT10JiZlKHQpfSkpfSxlLmV4cG9ydHM9cn0sNTA2MzooZSx0LG4pPT57dmFyIGk9big2NDUyKSxyPW4oMTEyMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJiFpKHQpP3IoZSx0KTp0fX0sNjg2MjooZSx0LG4pPT57dmFyIGk9big4NDQ2KSxyPW4oNTI1NSksbz1uKDM0NTIpLHM9bigxNTg2KSxhPW4oNTE0Mik7ZnVuY3Rpb24gYyhlKXtpZihlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxlLnNpZ25hbCYmZS5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgYX1lLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSksZS5oZWFkZXJzPWUuaGVhZGVyc3x8e30sZS5kYXRhPXIuY2FsbChlLGUuZGF0YSxlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXF1ZXN0KSxlLmhlYWRlcnM9aS5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLGkuZm9yRWFjaChbXCJkZWxldGVcIixcImdldFwiLFwiaGVhZFwiLFwicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiLFwiY29tbW9uXCJdLChmdW5jdGlvbih0KXtkZWxldGUgZS5oZWFkZXJzW3RdfSkpLChlLmFkYXB0ZXJ8fHMuYWRhcHRlcikoZSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGMoZSksdC5kYXRhPXIuY2FsbChlLHQuZGF0YSx0LmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSksdH0pLChmdW5jdGlvbih0KXtyZXR1cm4gbyh0KXx8KGMoZSksdCYmdC5yZXNwb25zZSYmKHQucmVzcG9uc2UuZGF0YT1yLmNhbGwoZSx0LnJlc3BvbnNlLmRhdGEsdC5yZXNwb25zZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpKSksUHJvbWlzZS5yZWplY3QodCl9KSl9fSw2MTQ5OihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49e307ZnVuY3Rpb24gcihlLHQpe3JldHVybiBpLmlzUGxhaW5PYmplY3QoZSkmJmkuaXNQbGFpbk9iamVjdCh0KT9pLm1lcmdlKGUsdCk6aS5pc1BsYWluT2JqZWN0KHQpP2kubWVyZ2Uoe30sdCk6aS5pc0FycmF5KHQpP3Quc2xpY2UoKTp0fWZ1bmN0aW9uIG8obil7cmV0dXJuIGkuaXNVbmRlZmluZWQodFtuXSk/aS5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cihlW25dLHRbbl0pfWZ1bmN0aW9uIHMoZSl7aWYoIWkuaXNVbmRlZmluZWQodFtlXSkpcmV0dXJuIHIodm9pZCAwLHRbZV0pfWZ1bmN0aW9uIGEobil7cmV0dXJuIGkuaXNVbmRlZmluZWQodFtuXSk/aS5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cih2b2lkIDAsdFtuXSl9ZnVuY3Rpb24gYyhuKXtyZXR1cm4gbiBpbiB0P3IoZVtuXSx0W25dKTpuIGluIGU/cih2b2lkIDAsZVtuXSk6dm9pZCAwfXZhciBkPXt1cmw6cyxtZXRob2Q6cyxkYXRhOnMsYmFzZVVSTDphLHRyYW5zZm9ybVJlcXVlc3Q6YSx0cmFuc2Zvcm1SZXNwb25zZTphLHBhcmFtc1NlcmlhbGl6ZXI6YSx0aW1lb3V0OmEsdGltZW91dE1lc3NhZ2U6YSx3aXRoQ3JlZGVudGlhbHM6YSxhZGFwdGVyOmEscmVzcG9uc2VUeXBlOmEseHNyZkNvb2tpZU5hbWU6YSx4c3JmSGVhZGVyTmFtZTphLG9uVXBsb2FkUHJvZ3Jlc3M6YSxvbkRvd25sb2FkUHJvZ3Jlc3M6YSxkZWNvbXByZXNzOmEsbWF4Q29udGVudExlbmd0aDphLG1heEJvZHlMZW5ndGg6YSxiZWZvcmVSZWRpcmVjdDphLHRyYW5zcG9ydDphLGh0dHBBZ2VudDphLGh0dHBzQWdlbnQ6YSxjYW5jZWxUb2tlbjphLHNvY2tldFBhdGg6YSxyZXNwb25zZUVuY29kaW5nOmEsdmFsaWRhdGVTdGF0dXM6Y307cmV0dXJuIGkuZm9yRWFjaChPYmplY3Qua2V5cyhlKS5jb25jYXQoT2JqZWN0LmtleXModCkpLChmdW5jdGlvbihlKXt2YXIgdD1kW2VdfHxvLHI9dChlKTtpLmlzVW5kZWZpbmVkKHIpJiZ0IT09Y3x8KG5bZV09cil9KSksbn19LDgzMjI6KGUsdCxuKT0+e3ZhciBpPW4oODkxNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztuLnN0YXR1cyYmciYmIXIobi5zdGF0dXMpP3QobmV3IGkoXCJSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlIFwiK24uc3RhdHVzLFtpLkVSUl9CQURfUkVRVUVTVCxpLkVSUl9CQURfUkVTUE9OU0VdW01hdGguZmxvb3Iobi5zdGF0dXMvMTAwKS00XSxuLmNvbmZpZyxuLnJlcXVlc3QsbikpOmUobil9fSw1MjU1OihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpLHI9bigxNTg2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPXRoaXN8fHI7cmV0dXJuIGkuZm9yRWFjaChuLChmdW5jdGlvbihuKXtlPW4uY2FsbChvLGUsdCl9KSksZX19LDE1ODY6KGUsdCxuKT0+e3ZhciBpPW4oODQ0Nikscj1uKDE5NjQpLG89big4OTE2KSxzPW4oMjc1MSksYT1uKDc0NTIpLGM9e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn07ZnVuY3Rpb24gZChlLHQpeyFpLmlzVW5kZWZpbmVkKGUpJiZpLmlzVW5kZWZpbmVkKGVbXCJDb250ZW50LVR5cGVcIl0pJiYoZVtcIkNvbnRlbnQtVHlwZVwiXT10KX12YXIgaCxsPXt0cmFuc2l0aW9uYWw6cyxhZGFwdGVyOigoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0fHxcInVuZGVmaW5lZFwiIT10eXBlb2YgcHJvY2VzcyYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykpJiYoaD1uKDk5NCkpLGgpLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGUsdCl7aWYocih0LFwiQWNjZXB0XCIpLHIodCxcIkNvbnRlbnQtVHlwZVwiKSxpLmlzRm9ybURhdGEoZSl8fGkuaXNBcnJheUJ1ZmZlcihlKXx8aS5pc0J1ZmZlcihlKXx8aS5pc1N0cmVhbShlKXx8aS5pc0ZpbGUoZSl8fGkuaXNCbG9iKGUpKXJldHVybiBlO2lmKGkuaXNBcnJheUJ1ZmZlclZpZXcoZSkpcmV0dXJuIGUuYnVmZmVyO2lmKGkuaXNVUkxTZWFyY2hQYXJhbXMoZSkpcmV0dXJuIGQodCxcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpLGUudG9TdHJpbmcoKTt2YXIgbixvPWkuaXNPYmplY3QoZSkscz10JiZ0W1wiQ29udGVudC1UeXBlXCJdO2lmKChuPWkuaXNGaWxlTGlzdChlKSl8fG8mJlwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiPT09cyl7dmFyIGM9dGhpcy5lbnYmJnRoaXMuZW52LkZvcm1EYXRhO3JldHVybiBhKG4/e1wiZmlsZXNbXVwiOmV9OmUsYyYmbmV3IGMpfXJldHVybiBvfHxcImFwcGxpY2F0aW9uL2pzb25cIj09PXM/KGQodCxcImFwcGxpY2F0aW9uL2pzb25cIiksZnVuY3Rpb24oZSx0LG4pe2lmKGkuaXNTdHJpbmcoZSkpdHJ5e3JldHVybigwLEpTT04ucGFyc2UpKGUpLGkudHJpbShlKX1jYXRjaChlKXtpZihcIlN5bnRheEVycm9yXCIhPT1lLm5hbWUpdGhyb3cgZX1yZXR1cm4oMCxKU09OLnN0cmluZ2lmeSkoZSl9KGUpKTplfV0sdHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNpdGlvbmFsfHxsLnRyYW5zaXRpb25hbCxuPXQmJnQuc2lsZW50SlNPTlBhcnNpbmcscj10JiZ0LmZvcmNlZEpTT05QYXJzaW5nLHM9IW4mJlwianNvblwiPT09dGhpcy5yZXNwb25zZVR5cGU7aWYoc3x8ciYmaS5pc1N0cmluZyhlKSYmZS5sZW5ndGgpdHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKGUpe2lmKHMpe2lmKFwiU3ludGF4RXJyb3JcIj09PWUubmFtZSl0aHJvdyBvLmZyb20oZSxvLkVSUl9CQURfUkVTUE9OU0UsdGhpcyxudWxsLHRoaXMucmVzcG9uc2UpO3Rocm93IGV9fXJldHVybiBlfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLHhzcmZIZWFkZXJOYW1lOlwiWC1YU1JGLVRPS0VOXCIsbWF4Q29udGVudExlbmd0aDotMSxtYXhCb2R5TGVuZ3RoOi0xLGVudjp7Rm9ybURhdGE6bigzMzEzKX0sdmFsaWRhdGVTdGF0dXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTIwMCYmZTwzMDB9LGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qXCJ9fX07aS5mb3JFYWNoKFtcImRlbGV0ZVwiLFwiZ2V0XCIsXCJoZWFkXCJdLChmdW5jdGlvbihlKXtsLmhlYWRlcnNbZV09e319KSksaS5mb3JFYWNoKFtcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIl0sKGZ1bmN0aW9uKGUpe2wuaGVhZGVyc1tlXT1pLm1lcmdlKGMpfSkpLGUuZXhwb3J0cz1sfSwyNzUxOmU9PntlLmV4cG9ydHM9e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9fSw0NDc0OmU9PntlLmV4cG9ydHM9e3ZlcnNpb246XCIwLjI3LjJcIn19LDg5NjI6ZT0+e2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksaT0wO2k8bi5sZW5ndGg7aSsrKW5baV09YXJndW1lbnRzW2ldO3JldHVybiBlLmFwcGx5KHQsbil9fX0sODk4MjooZSx0LG4pPT57dmFyIGk9big4NDQ2KTtmdW5jdGlvbiByKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMjQvZyxcIiRcIikucmVwbGFjZSgvJTJDL2dpLFwiLFwiKS5yZXBsYWNlKC8lMjAvZyxcIitcIikucmVwbGFjZSgvJTVCL2dpLFwiW1wiKS5yZXBsYWNlKC8lNUQvZ2ksXCJdXCIpfWUuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7aWYoIXQpcmV0dXJuIGU7dmFyIG87aWYobilvPW4odCk7ZWxzZSBpZihpLmlzVVJMU2VhcmNoUGFyYW1zKHQpKW89dC50b1N0cmluZygpO2Vsc2V7dmFyIHM9W107aS5mb3JFYWNoKHQsKGZ1bmN0aW9uKGUsdCl7bnVsbCE9ZSYmKGkuaXNBcnJheShlKT90Kz1cIltdXCI6ZT1bZV0saS5mb3JFYWNoKGUsKGZ1bmN0aW9uKGUpe2kuaXNEYXRlKGUpP2U9ZS50b0lTT1N0cmluZygpOmkuaXNPYmplY3QoZSkmJihlPUpTT04uc3RyaW5naWZ5KGUpKSxzLnB1c2gocih0KStcIj1cIityKGUpKX0pKSl9KSksbz1zLmpvaW4oXCImXCIpfWlmKG8pe3ZhciBhPWUuaW5kZXhPZihcIiNcIik7LTEhPT1hJiYoZT1lLnNsaWNlKDAsYSkpLGUrPSgtMT09PWUuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIpK299cmV0dXJuIGV9fSwxMTIzOmU9PntlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9lLnJlcGxhY2UoL1xcLyskLyxcIlwiKStcIi9cIit0LnJlcGxhY2UoL15cXC8rLyxcIlwiKTplfX0sMjA1ODooZSx0LG4pPT57dmFyIGk9big4NDQ2KTtlLmV4cG9ydHM9aS5pc1N0YW5kYXJkQnJvd3NlckVudigpP3t3cml0ZTpmdW5jdGlvbihlLHQsbixyLG8scyl7dmFyIGE9W107YS5wdXNoKGUrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKSxpLmlzTnVtYmVyKG4pJiZhLnB1c2goXCJleHBpcmVzPVwiK25ldyBEYXRlKG4pLnRvR01UU3RyaW5nKCkpLGkuaXNTdHJpbmcocikmJmEucHVzaChcInBhdGg9XCIrciksaS5pc1N0cmluZyhvKSYmYS5wdXNoKFwiZG9tYWluPVwiK28pLCEwPT09cyYmYS5wdXNoKFwic2VjdXJlXCIpLGRvY3VtZW50LmNvb2tpZT1hLmpvaW4oXCI7IFwiKX0scmVhZDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cChcIihefDtcXFxccyopKFwiK2UrXCIpPShbXjtdKilcIikpO3JldHVybiB0P2RlY29kZVVSSUNvbXBvbmVudCh0WzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZShlLFwiXCIsRGF0ZS5ub3coKS04NjRlNSl9fTp7d3JpdGU6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0scmVtb3ZlOmZ1bmN0aW9uKCl7fX19LDY0NTI6ZT0+e2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4vXihbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvL2kudGVzdChlKX19LDE3MjY6KGUsdCxuKT0+e3ZhciBpPW4oODQ0Nik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpLmlzT2JqZWN0KGUpJiYhMD09PWUuaXNBeGlvc0Vycm9yfX0sNjQ5NzooZSx0LG4pPT57dmFyIGk9big4NDQ2KTtlLmV4cG9ydHM9aS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7dmFyIGUsdD0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZnVuY3Rpb24gcihlKXt2YXIgaT1lO3JldHVybiB0JiYobi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsaSksaT1uLmhyZWYpLG4uc2V0QXR0cmlidXRlKFwiaHJlZlwiLGkpLHtocmVmOm4uaHJlZixwcm90b2NvbDpuLnByb3RvY29sP24ucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpuLmhvc3Qsc2VhcmNoOm4uc2VhcmNoP24uc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpuLmhhc2g/bi5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOm4uaG9zdG5hbWUscG9ydDpuLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1uLnBhdGhuYW1lLmNoYXJBdCgwKT9uLnBhdGhuYW1lOlwiL1wiK24ucGF0aG5hbWV9fXJldHVybiBlPXIod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHQpe3ZhciBuPWkuaXNTdHJpbmcodCk/cih0KTp0O3JldHVybiBuLnByb3RvY29sPT09ZS5wcm90b2NvbCYmbi5ob3N0PT09ZS5ob3N0fX0oKTpmdW5jdGlvbigpe3JldHVybiEwfX0sMTk2NDooZSx0LG4pPT57dmFyIGk9big4NDQ2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpLmZvckVhY2goZSwoZnVuY3Rpb24obixpKXtpIT09dCYmaS50b1VwcGVyQ2FzZSgpPT09dC50b1VwcGVyQ2FzZSgpJiYoZVt0XT1uLGRlbGV0ZSBlW2ldKX0pKX19LDMzMTM6ZT0+e2UuZXhwb3J0cz1udWxsfSw5NTQxOihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpLHI9W1wiYWdlXCIsXCJhdXRob3JpemF0aW9uXCIsXCJjb250ZW50LWxlbmd0aFwiLFwiY29udGVudC10eXBlXCIsXCJldGFnXCIsXCJleHBpcmVzXCIsXCJmcm9tXCIsXCJob3N0XCIsXCJpZi1tb2RpZmllZC1zaW5jZVwiLFwiaWYtdW5tb2RpZmllZC1zaW5jZVwiLFwibGFzdC1tb2RpZmllZFwiLFwibG9jYXRpb25cIixcIm1heC1mb3J3YXJkc1wiLFwicHJveHktYXV0aG9yaXphdGlvblwiLFwicmVmZXJlclwiLFwicmV0cnktYWZ0ZXJcIixcInVzZXItYWdlbnRcIl07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxzPXt9O3JldHVybiBlPyhpLmZvckVhY2goZS5zcGxpdChcIlxcblwiKSwoZnVuY3Rpb24oZSl7aWYobz1lLmluZGV4T2YoXCI6XCIpLHQ9aS50cmltKGUuc3Vic3RyKDAsbykpLnRvTG93ZXJDYXNlKCksbj1pLnRyaW0oZS5zdWJzdHIobysxKSksdCl7aWYoc1t0XSYmci5pbmRleE9mKHQpPj0wKXJldHVybjtzW3RdPVwic2V0LWNvb2tpZVwiPT09dD8oc1t0XT9zW3RdOltdKS5jb25jYXQoW25dKTpzW3RdP3NbdF0rXCIsIFwiK246bn19KSkscyk6c319LDU4MjI6ZT0+e2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD0vXihbLStcXHddezEsMjV9KSg6P1xcL1xcL3w6KS8uZXhlYyhlKTtyZXR1cm4gdCYmdFsxXXx8XCJcIn19LDkwNjc6ZT0+e2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkobnVsbCx0KX19fSw3NDUyOihlLHQsbik9Pnt2YXIgaT1uKDg0NDYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3Q9dHx8bmV3IEZvcm1EYXRhO3ZhciBuPVtdO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIG51bGw9PT1lP1wiXCI6aS5pc0RhdGUoZSk/ZS50b0lTT1N0cmluZygpOmkuaXNBcnJheUJ1ZmZlcihlKXx8aS5pc1R5cGVkQXJyYXkoZSk/XCJmdW5jdGlvblwiPT10eXBlb2YgQmxvYj9uZXcgQmxvYihbZV0pOkJ1ZmZlci5mcm9tKGUpOmV9cmV0dXJuIGZ1bmN0aW9uIGUobyxzKXtpZihpLmlzUGxhaW5PYmplY3Qobyl8fGkuaXNBcnJheShvKSl7aWYoLTEhPT1uLmluZGV4T2YobykpdGhyb3cgRXJyb3IoXCJDaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQgaW4gXCIrcyk7bi5wdXNoKG8pLGkuZm9yRWFjaChvLChmdW5jdGlvbihuLG8pe2lmKCFpLmlzVW5kZWZpbmVkKG4pKXt2YXIgYSxjPXM/cytcIi5cIitvOm87aWYobiYmIXMmJlwib2JqZWN0XCI9PXR5cGVvZiBuKWlmKGkuZW5kc1dpdGgobyxcInt9XCIpKW49SlNPTi5zdHJpbmdpZnkobik7ZWxzZSBpZihpLmVuZHNXaXRoKG8sXCJbXVwiKSYmKGE9aS50b0FycmF5KG4pKSlyZXR1cm4gdm9pZCBhLmZvckVhY2goKGZ1bmN0aW9uKGUpeyFpLmlzVW5kZWZpbmVkKGUpJiZ0LmFwcGVuZChjLHIoZSkpfSkpO2UobixjKX19KSksbi5wb3AoKX1lbHNlIHQuYXBwZW5kKHMscihvKSl9KGUpLHR9fSwxMTY2OihlLHQsbik9Pnt2YXIgaT1uKDQ0NzQpLnZlcnNpb24scj1uKDg5MTYpLG89e307W1wib2JqZWN0XCIsXCJib29sZWFuXCIsXCJudW1iZXJcIixcImZ1bmN0aW9uXCIsXCJzdHJpbmdcIixcInN5bWJvbFwiXS5mb3JFYWNoKChmdW5jdGlvbihlLHQpe29bZV09ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT09ZXx8XCJhXCIrKHQ8MT9cIm4gXCI6XCIgXCIpK2V9fSkpO3ZhciBzPXt9O28udHJhbnNpdGlvbmFsPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBvKGUsdCl7cmV0dXJuXCJbQXhpb3MgdlwiK2krXCJdIFRyYW5zaXRpb25hbCBvcHRpb24gJ1wiK2UrXCInXCIrdCsobj9cIi4gXCIrbjpcIlwiKX1yZXR1cm4gZnVuY3Rpb24obixpLGEpe2lmKCExPT09ZSl0aHJvdyBuZXcgcihvKGksXCIgaGFzIGJlZW4gcmVtb3ZlZFwiKyh0P1wiIGluIFwiK3Q6XCJcIikpLHIuRVJSX0RFUFJFQ0FURUQpO3JldHVybiB0JiYhc1tpXSYmKHNbaV09ITAsY29uc29sZS53YXJuKG8oaSxcIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHZcIit0K1wiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlXCIpKSksIWV8fGUobixpLGEpfX0sZS5leHBvcnRzPXthc3NlcnRPcHRpb25zOmZ1bmN0aW9uKGUsdCxuKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBuZXcgcihcIm9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3RcIixyLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTtmb3IodmFyIGk9T2JqZWN0LmtleXMoZSksbz1pLmxlbmd0aDtvLS0gPjA7KXt2YXIgcz1pW29dLGE9dFtzXTtpZihhKXt2YXIgYz1lW3NdLGQ9dm9pZCAwPT09Y3x8YShjLHMsZSk7aWYoITAhPT1kKXRocm93IG5ldyByKFwib3B0aW9uIFwiK3MrXCIgbXVzdCBiZSBcIitkLHIuRVJSX0JBRF9PUFRJT05fVkFMVUUpfWVsc2UgaWYoITAhPT1uKXRocm93IG5ldyByKFwiVW5rbm93biBvcHRpb24gXCIrcyxyLkVSUl9CQURfT1BUSU9OKX19LHZhbGlkYXRvcnM6b319LDg0NDY6KGUsdCxuKT0+e3ZhciBpLHI9big4OTYyKSxvPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcscz0oaT1PYmplY3QuY3JlYXRlKG51bGwpLGZ1bmN0aW9uKGUpe3ZhciB0PW8uY2FsbChlKTtyZXR1cm4gaVt0XXx8KGlbdF09dC5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpKX0pO2Z1bmN0aW9uIGEoZSl7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3JldHVybiBzKHQpPT09ZX19ZnVuY3Rpb24gYyhlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX1mdW5jdGlvbiBkKGUpe3JldHVybiB2b2lkIDA9PT1lfXZhciBoPWEoXCJBcnJheUJ1ZmZlclwiKTtmdW5jdGlvbiBsKGUpe3JldHVybiBudWxsIT09ZSYmXCJvYmplY3RcIj09dHlwZW9mIGV9ZnVuY3Rpb24gdShlKXtpZihcIm9iamVjdFwiIT09cyhlKSlyZXR1cm4hMTt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT10fHx0PT09T2JqZWN0LnByb3RvdHlwZX12YXIgcD1hKFwiRGF0ZVwiKSx3PWEoXCJGaWxlXCIpLGY9YShcIkJsb2JcIikseT1hKFwiRmlsZUxpc3RcIik7ZnVuY3Rpb24gZyhlKXtyZXR1cm5cIltvYmplY3QgRnVuY3Rpb25dXCI9PT1vLmNhbGwoZSl9dmFyIG09YShcIlVSTFNlYXJjaFBhcmFtc1wiKTtmdW5jdGlvbiB2KGUsdCl7aWYobnVsbCE9ZSlpZihcIm9iamVjdFwiIT10eXBlb2YgZSYmKGU9W2VdKSxjKGUpKWZvcih2YXIgbj0wLGk9ZS5sZW5ndGg7bjxpO24rKyl0LmNhbGwobnVsbCxlW25dLG4sZSk7ZWxzZSBmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmdC5jYWxsKG51bGwsZVtyXSxyLGUpfXZhciBDLEU9KEM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJk9iamVjdC5nZXRQcm90b3R5cGVPZihVaW50OEFycmF5KSxmdW5jdGlvbihlKXtyZXR1cm4gQyYmZSBpbnN0YW5jZW9mIEN9KTtlLmV4cG9ydHM9e2lzQXJyYXk6Yyxpc0FycmF5QnVmZmVyOmgsaXNCdWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiYhZChlKSYmbnVsbCE9PWUuY29uc3RydWN0b3ImJiFkKGUuY29uc3RydWN0b3IpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZlLmNvbnN0cnVjdG9yLmlzQnVmZmVyKGUpfSxpc0Zvcm1EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PVwiW29iamVjdCBGb3JtRGF0YV1cIjtyZXR1cm4gZSYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEZvcm1EYXRhJiZlIGluc3RhbmNlb2YgRm9ybURhdGF8fG8uY2FsbChlKT09PXR8fGcoZS50b1N0cmluZykmJmUudG9TdHJpbmcoKT09PXQpfSxpc0FycmF5QnVmZmVyVmlldzpmdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJkFycmF5QnVmZmVyLmlzVmlldz9BcnJheUJ1ZmZlci5pc1ZpZXcoZSk6ZSYmZS5idWZmZXImJmgoZS5idWZmZXIpfSxpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0saXNOdW1iZXI6ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9LGlzT2JqZWN0OmwsaXNQbGFpbk9iamVjdDp1LGlzVW5kZWZpbmVkOmQsaXNEYXRlOnAsaXNGaWxlOncsaXNCbG9iOmYsaXNGdW5jdGlvbjpnLGlzU3RyZWFtOmZ1bmN0aW9uKGUpe3JldHVybiBsKGUpJiZnKGUucGlwZSl9LGlzVVJMU2VhcmNoUGFyYW1zOm0saXNTdGFuZGFyZEJyb3dzZXJFbnY6ZnVuY3Rpb24oKXtyZXR1cm4oXCJ1bmRlZmluZWRcIj09dHlwZW9mIG5hdmlnYXRvcnx8XCJSZWFjdE5hdGl2ZVwiIT09bmF2aWdhdG9yLnByb2R1Y3QmJlwiTmF0aXZlU2NyaXB0XCIhPT1uYXZpZ2F0b3IucHJvZHVjdCYmXCJOU1wiIT09bmF2aWdhdG9yLnByb2R1Y3QpJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnR9LGZvckVhY2g6dixtZXJnZTpmdW5jdGlvbiBlKCl7dmFyIHQ9e307ZnVuY3Rpb24gbihuLGkpe3UodFtpXSkmJnUobik/dFtpXT1lKHRbaV0sbik6dShuKT90W2ldPWUoe30sbik6YyhuKT90W2ldPW4uc2xpY2UoKTp0W2ldPW59Zm9yKHZhciBpPTAscj1hcmd1bWVudHMubGVuZ3RoO2k8cjtpKyspdihhcmd1bWVudHNbaV0sbik7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHYodCwoZnVuY3Rpb24odCxpKXtlW2ldPW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/cih0LG4pOnR9KSksZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltP2UudHJpbSgpOmUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sc3RyaXBCT006ZnVuY3Rpb24oZSl7cmV0dXJuIDY1Mjc5PT09ZS5jaGFyQ29kZUF0KDApJiYoZT1lLnNsaWNlKDEpKSxlfSxpbmhlcml0czpmdW5jdGlvbihlLHQsbixpKXtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlLGkpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsbiYmT2JqZWN0LmFzc2lnbihlLnByb3RvdHlwZSxuKX0sdG9GbGF0T2JqZWN0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scz17fTt0PXR8fHt9O2Rve2ZvcihyPShpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpKS5sZW5ndGg7ci0tID4wOylzW289aVtyXV18fCh0W29dPWVbb10sc1tvXT0hMCk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9d2hpbGUoZSYmKCFufHxuKGUsdCkpJiZlIT09T2JqZWN0LnByb3RvdHlwZSk7cmV0dXJuIHR9LGtpbmRPZjpzLGtpbmRPZlRlc3Q6YSxlbmRzV2l0aDpmdW5jdGlvbihlLHQsbil7ZT1TdHJpbmcoZSksKHZvaWQgMD09PW58fG4+ZS5sZW5ndGgpJiYobj1lLmxlbmd0aCksbi09dC5sZW5ndGg7dmFyIGk9ZS5pbmRleE9mKHQsbik7cmV0dXJuLTEhPT1pJiZpPT09bn0sdG9BcnJheTpmdW5jdGlvbihlKXtpZighZSlyZXR1cm4gbnVsbDt2YXIgdD1lLmxlbmd0aDtpZihkKHQpKXJldHVybiBudWxsO2Zvcih2YXIgbj1uZXcgQXJyYXkodCk7dC0tID4wOyluW3RdPWVbdF07cmV0dXJuIG59LGlzVHlwZWRBcnJheTpFLGlzRmlsZUxpc3Q6eX19LDM4ODU6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDQ3OTQpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLkFwcGxpY2F0aW9uKHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb24tc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uQXBwbGljYXRpb24odGhpcy53aXJlLGUpfWFzeW5jIF9jcmVhdGUoZSl7cmV0dXJuIHZvaWQgMD09PWUud2FpdEZvclBhZ2VMb2FkJiYoZS53YWl0Rm9yUGFnZUxvYWQ9ITEpLHZvaWQgMD09PWUuYXV0b1Nob3cmJnZvaWQgMD09PWUuaXNQbGF0Zm9ybUNvbnRyb2xsZXImJihlLmF1dG9TaG93PSEwKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS1hcHBsaWNhdGlvblwiLGUpLHRoaXMud3JhcCh7dXVpZDplLnV1aWR9KX1jcmVhdGUoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGVcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy5fY3JlYXRlKGUpfWFzeW5jIHN0YXJ0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic3RhcnQtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLl9jcmVhdGUoZSk7cmV0dXJuIGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse3V1aWQ6ZS51dWlkfSksdH1hc3luYyBzdGFydE1hbnlNYW5pZmVzdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uc1wiLHthcHBsaWNhdGlvbnM6ZX0pLnRoZW4oKCgpPT57fSkpfWdldEN1cnJlbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY3VycmVudC1hcHBsaWNhdGlvblwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXAoe3V1aWQ6dGhpcy53aXJlLm1lLnV1aWR9KX1nZXRDdXJyZW50U3luYygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LWFwcGxpY2F0aW9uLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy53cmFwU3luYyh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWFzeW5jIHN0YXJ0RnJvbU1hbmlmZXN0KGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1zdGFydC1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5fY3JlYXRlRnJvbU1hbmlmZXN0KGUpO3JldHVybiBhd2FpdCBuLl9ydW4odCksbn1jcmVhdGVGcm9tTWFuaWZlc3QoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGVGcm9tTWFuaWZlc3QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3RcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGUtZnJvbS1tYW5pZmVzdFwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSl9X2NyZWF0ZUZyb21NYW5pZmVzdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9Pntjb25zdCB0PWUuZGF0YS5wbGF0Zm9ybT9lLmRhdGEucGxhdGZvcm0udXVpZDplLmRhdGEuc3RhcnR1cF9hcHAudXVpZDtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOnR9KX0pKS50aGVuKCh0PT4odC5fbWFuaWZlc3RVcmw9ZSx0KSkpfX10LmRlZmF1bHQ9c30sNDc5NDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5BcHBsaWNhdGlvbj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk3KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLFwiYXBwbGljYXRpb25cIix0LnV1aWQpLHRoaXMuaWRlbnRpdHk9dCx0aGlzLndpbmRvdz1uZXcgci5fV2luZG93KHRoaXMud2lyZSx7dXVpZDp0aGlzLmlkZW50aXR5LnV1aWQsbmFtZTp0aGlzLmlkZW50aXR5LnV1aWR9KX13aW5kb3dMaXN0RnJvbUlkZW50aXR5TGlzdChlKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2goKGU9Pnt0LnB1c2gobmV3IHIuX1dpbmRvdyh0aGlzLndpcmUse3V1aWQ6ZS51dWlkLG5hbWU6ZS5uYW1lfSkpfSkpLHR9aXNSdW5uaW5nKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaXMtYXBwbGljYXRpb24tcnVubmluZ1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIHF1aXQoZT0hMSl7YXdhaXQgdGhpcy5fY2xvc2UoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkZXN0cm95LWFwcGxpY2F0aW9uXCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pfV9jbG9zZShlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS1hcHBsaWNhdGlvblwiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1jbG9zZShlPSExKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogQXBwbGljYXRpb24uY2xvc2UgaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIEFwcGxpY2F0aW9uLnF1aXRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jbG9zZVwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX2Nsb3NlKGUpfWdldENoaWxkV2luZG93cygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jaGlsZC13aW5kb3dzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+e2NvbnN0IHQ9W107cmV0dXJuIGUuZGF0YS5mb3JFYWNoKChlPT57dC5wdXNoKHt1dWlkOnRoaXMuaWRlbnRpdHkudXVpZCxuYW1lOmV9KX0pKSx0aGlzLndpbmRvd0xpc3RGcm9tSWRlbnRpdHlMaXN0KHQpfSkpfWdldE1hbmlmZXN0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLW1hbmlmZXN0XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50VXVpZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRTaG9ydGN1dHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc2hvcnRjdXRzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0Vmlld3MoKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXZpZXdzXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGUuZGF0YS5tYXAoKGU9Pm5ldyBvLlZpZXcodGhpcy53aXJlLGUpKSl9Z2V0Wm9vbUxldmVsKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLXpvb20tbGV2ZWxcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1nZXQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKHRoaXMud2luZG93KX1yZWdpc3RlclVzZXIoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWdpc3Rlci11c2VyXCIse3VzZXJOYW1lOmUsYXBwTmFtZTp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZW1vdmVUcmF5SWNvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlbW92ZS10cmF5LWljb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1yZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzdGFydC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXJ1bigpe3JldHVybiBjb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiBXYXJuaW5nOiBBcHBsaWNhdGlvbi5ydW4gaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGZpbi5BcHBsaWNhdGlvbi5zdGFydFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLXJ1blwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX3J1bigpfV9ydW4oZT17fSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse21hbmlmZXN0VXJsOnRoaXMuX21hbmlmZXN0VXJsLG9wdHM6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9c2NoZWR1bGVSZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVsYXVuY2gtb24tY2xvc2VcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZW5kQXBwbGljYXRpb25Mb2coKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1hcHBsaWNhdGlvbi1sb2dcIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZS5kYXRhfWFzeW5jIHNldEp1bXBMaXN0KGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWp1bXAtbGlzdFwiLHtjb25maWc6ZSwuLi50aGlzLmlkZW50aXR5fSl9c2V0VHJheUljb24oZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXRyYXktaWNvblwiLHtlbmFibGVkSWNvbjplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zZXRTaG9ydGN1dHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXNob3J0Y3V0c1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNldFNob3J0Y3V0UXVlcnlQYXJhbXMoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtc2hvcnRjdXQtcXVlcnktYXJnc1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pfXNldFpvb21MZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtYXBwbGljYXRpb24tem9vbS1sZXZlbFwiLHtsZXZlbDplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZXRBcHBMb2dVc2VybmFtZShlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1hcHAtbG9nLXVzZXJuYW1lXCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSl9Z2V0VHJheUljb25JbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXRyYXktaWNvbi1pbmZvXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9dGVybWluYXRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidGVybWluYXRlLWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9d2FpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndhaXQtZm9yLWh1bmctYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1nZXRJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRQcm9jZXNzSW5mbygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXByb2Nlc3MtaW5mb1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlfWFzeW5jIHNldEZpbGVEb3dubG9hZExvY2F0aW9uKGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWZpbGUtZG93bmxvYWQtbG9jYXRpb25cIix7ZG93bmxvYWRMb2NhdGlvbjplLC4uLnRoaXMuaWRlbnRpdHl9KX19dC5BcHBsaWNhdGlvbj1zfSw3MjY0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMzg4NSk7cihuKDQ3OTQpLHQpLHQuZGVmYXVsdD1vLmRlZmF1bHR9LDk2NTk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUmVwbHk9dC5FbWl0dGVyQmFzZT10LkJhc2U9dm9pZCAwO2NvbnN0IHM9bigzNDQyKSxhPW4oODA2OCk7Y2xhc3MgY3tjb25zdHJ1Y3RvcihlKXt0aGlzLmlzTm9kZUVudmlyb25tZW50PSgpPT5cIk5vZGVFbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUsdGhpcy5pc09wZW5GaW5FbnZpcm9ubWVudD0oKT0+XCJPcGVuRmluRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lLHRoaXMud2lyZT1lfWdldCBmaW4oKXtyZXR1cm4gYS5nZXRGaW4odGhpcy53aXJlKX1nZXQgbWUoKXtyZXR1cm4gdGhpcy53aXJlLm1lfX10LkJhc2U9Yyx0LkVtaXR0ZXJCYXNlPWNsYXNzIGV4dGVuZHMgY3tjb25zdHJ1Y3RvcihlLHQsLi4ubil7c3VwZXIoZSksdGhpcy50b3BpYz10LGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmV2ZW50TmFtZXM9KCk9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkuZXZlbnROYW1lcygpOltdLHRoaXMuZW1pdD0oZSx0LC4uLm4pPT4hIXRoaXMuaGFzRW1pdHRlcigpJiZ0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmVtaXQoZSx0LC4uLm4pLHRoaXMuaGFzRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5oYXMobyh0aGlzLGkpKSx0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5nZXRPckNyZWF0ZShvKHRoaXMsaSkpLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdLHRoaXMubGlzdGVuZXJDb3VudD1lPT50aGlzLmhhc0VtaXR0ZXIoKT90aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmxpc3RlbmVyQ291bnQoZSk6MCx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30sbixpKT0+e2NvbnN0IHI9ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfSxvPXRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCk7bihvKTt0cnl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdWJzY3JpYmUtdG8tZGVza3RvcC1ldmVudFwiLHIpfWNhdGNoKGUpe3Rocm93IGkobyksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChvKSxlfX0sdGhpcy5kZXJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30pPT57aWYodGhpcy5oYXNFbWl0dGVyKCkpe2NvbnN0IG49ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfTtyZXR1cm4gYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZS10by1kZXNrdG9wLWV2ZW50XCIsbikuY2F0Y2goKCgpPT5udWxsKSksdGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9LHRoaXMub249YXN5bmMoZSx0LG4pPT4oYXdhaXQgdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoZSxuLChuPT57bi5vbihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5hZGRMaXN0ZW5lcj10aGlzLm9uLHRoaXMub25jZT1hc3luYyhlLHQsbik9Pntjb25zdCBpPSgpPT50aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUpO3JldHVybiBhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLm9uY2UoZSxpKSxuLm9uY2UoZSx0KX0pLChuPT57bi5yZW1vdmVMaXN0ZW5lcihlLGkpLG4ucmVtb3ZlTGlzdGVuZXIoZSx0KX0pKSx0aGlzfSx0aGlzLnByZXBlbmRMaXN0ZW5lcj1hc3luYyhlLHQsbik9Pihhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLnByZXBlbmRMaXN0ZW5lcihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5wcmVwZW5kT25jZUxpc3RlbmVyPWFzeW5jKGUsdCxuKT0+e2NvbnN0IGk9KCk9PnRoaXMuZGVyZWdpc3RlckV2ZW50TGlzdGVuZXIoZSk7cmV0dXJuIGF3YWl0IHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbiwobj0+e24ucHJlcGVuZE9uY2VMaXN0ZW5lcihlLHQpLG4ub25jZShlLGkpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCksbi5yZW1vdmVMaXN0ZW5lcihlLGkpfSkpLHRoaXN9LHRoaXMucmVtb3ZlTGlzdGVuZXI9YXN5bmMoZSx0LG4pPT57Y29uc3QgaT1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbik7cmV0dXJuIGkmJihpLnJlbW92ZUxpc3RlbmVyKGUsdCksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChpKSksdGhpc30sdGhpcy5kZXJlZ2lzdGVyQWxsTGlzdGVuZXJzPWFzeW5jIGU9Pntjb25zdCB0PXsuLi50aGlzLmlkZW50aXR5LHR5cGU6ZSx0b3BpYzp0aGlzLnRvcGljfTtpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLG49ZS5saXN0ZW5lckNvdW50KHQudHlwZSksaT1bXTtmb3IobGV0IGU9MDtlPG47ZSsrKWkucHVzaCh0aGlzLndpcmUuc2VuZEFjdGlvbihcInVuc3Vic2NyaWJlLXRvLWRlc2t0b3AtZXZlbnRcIix0KS5jYXRjaCgoKCk9Pm51bGwpKSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKGkpLGV9fSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycz1hc3luYyBlPT57Y29uc3QgdD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJBbGxMaXN0ZW5lcnMoZSk7dCYmKHQucmVtb3ZlQWxsTGlzdGVuZXJzKGUpLHRoaXMuZGVsZXRlRW1pdHRlcklmTm90aGluZ1JlZ2lzdGVyZWQodCkpfTtpZihlKWF3YWl0IHQoZSk7ZWxzZSBpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmV2ZW50TmFtZXMoKTthd2FpdCBzLnByb21pc2VNYXAoZSx0KX1yZXR1cm4gdGhpc30scih0aGlzLGksW3QsLi4ubl0pLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdfWRlbGV0ZUVtaXR0ZXJJZk5vdGhpbmdSZWdpc3RlcmVkKGUpezA9PT1lLmV2ZW50TmFtZXMoKS5sZW5ndGgmJnRoaXMud2lyZS5ldmVudEFnZ3JlZ2F0b3IuZGVsZXRlKG8odGhpcyxpKSl9fSxpPW5ldyBXZWFrTWFwLHQuUmVwbHk9Y2xhc3N7fX0sMzQyNzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkJhc2V7d3JpdGVUZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZS10ZXh0XCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXJlYWQtdGV4dFwiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXdyaXRlSHRtbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtaHRtbFwiLGUpLnRoZW4oKCgpPT57fSkpfXJlYWRIdG1sKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWh0bWxcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZVJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtcnRmXCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtcmVhZC1ydGZcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGVcIixlKS50aGVuKCgoKT0+e30pKX1nZXRBdmFpbGFibGVGb3JtYXRzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWZvcm1hdHNcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX19dC5kZWZhdWx0PXJ9LDc4MTM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRW1pdHRlck1hcD12b2lkIDA7Y29uc3QgaT1uKDY0NjUpO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIEJ1ZmZlci5mcm9tKGUpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfXQuRW1pdHRlck1hcD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuc3RvcmFnZT1uZXcgTWFwfWhhc2hLZXlzKGUpe3JldHVybiBlLm1hcChyKS5qb2luKFwiL1wiKX1nZXRPckNyZWF0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5oYXModCl8fHRoaXMuc3RvcmFnZS5zZXQodCxuZXcgaS5FdmVudEVtaXR0ZXIpLHRoaXMuc3RvcmFnZS5nZXQodCl9aGFzKGUpe3JldHVybiB0aGlzLnN0b3JhZ2UuaGFzKHRoaXMuaGFzaEtleXMoZSkpfWRlbGV0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5kZWxldGUodCl9fX0sMjczNDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDc4MTMpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJNYXB7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZGlzcGF0Y2hFdmVudD1lPT57aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJwcm9jZXNzLWRlc2t0b3AtZXZlbnRcIj09PWUuYWN0aW9ufShlKSl7Y29uc3R7cGF5bG9hZDp0fT1lLG49ZnVuY3Rpb24oZSl7Y29uc3R7dG9waWM6dH09ZTtpZihcImZyYW1lXCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19aWYoXCJ3aW5kb3dcIj09PXQpe2NvbnN0e3V1aWQ6bixuYW1lOml9PWU7cmV0dXJuW3QsbixpXX1pZihcImFwcGxpY2F0aW9uXCI9PT10KXtjb25zdHt1dWlkOm59PWU7cmV0dXJuW3Qsbl19aWYoXCJ2aWV3XCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19cmV0dXJuW3RdfSh0KTtpZih0aGlzLmhhcyhuKSlyZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShuKS5lbWl0KHQudHlwZSx0KSwhMH1yZXR1cm4hMX19fXQuZGVmYXVsdD1yfSw3MTY4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDgyOTgpO2NsYXNzIG8gZXh0ZW5kcyBpLkJhc2V7d3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleHRlcm5hbC1hcHBsaWNhdGlvbi13cmFwXCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSkpfXdyYXBTeW5jKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4dGVybmFsLWFwcGxpY2F0aW9uLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSl9fXQuZGVmYXVsdD1vfSw4Mjk4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkV4dGVybmFsQXBwbGljYXRpb249dm9pZCAwO2NvbnN0IGk9big5NjU5KTtjbGFzcyByIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsXCJleHRlcm5hbC1hcHBsaWNhdGlvblwiLHQudXVpZCksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZXh0ZXJuYWwtYXBwbGljYXRpb24taW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfX10LkV4dGVybmFsQXBwbGljYXRpb249cn0sOTAyMTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDcxNjgpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDgyOTgpLHQpfSw2NTQ1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oNjQ2NSkscj1uKDM2NDEpLG89big0OTk3KSxzPW4oNzI2NCksYT1uKDgzNDcpLGM9bigzNDI3KSxkPW4oOTAyMSksaD1uKDY3MjApLGw9big5MjExKSx1PW4oNDE2OSkscD1uKDYwOSksdz1uKDk2NDEpLGY9big4MDY4KSx5PW4oODcwNiksZz1uKDcxNTMpO2NsYXNzIG0gZXh0ZW5kcyBpLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLGYucmVnaXN0ZXJGaW4oZSx0aGlzKSx0aGlzLndpcmU9ZSx0aGlzLlN5c3RlbT1uZXcgci5kZWZhdWx0KGUpLHRoaXMuV2luZG93PW5ldyBvLmRlZmF1bHQoZSksdGhpcy5BcHBsaWNhdGlvbj1uZXcgcy5kZWZhdWx0KGUpLHRoaXMuSW50ZXJBcHBsaWNhdGlvbkJ1cz1uZXcgYS5kZWZhdWx0KGUpLHRoaXMuQ2xpcGJvYXJkPW5ldyBjLmRlZmF1bHQoZSksdGhpcy5FeHRlcm5hbEFwcGxpY2F0aW9uPW5ldyBkLmRlZmF1bHQoZSksdGhpcy5GcmFtZT1uZXcgaC5kZWZhdWx0KGUpLHRoaXMuR2xvYmFsSG90a2V5PW5ldyBsLmRlZmF1bHQoZSksdGhpcy5QbGF0Zm9ybT1uZXcgcC5kZWZhdWx0KGUsdGhpcy5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwpLHRoaXMuVmlldz1uZXcgdS5kZWZhdWx0KGUpLHRoaXMuSW50ZXJvcD1uZXcgeS5kZWZhdWx0KGUpLHRoaXMuU25hcHNob3RTb3VyY2U9bmV3IGcuZGVmYXVsdChlKSx0aGlzLm1lPXcuZ2V0TWUoZSksZS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e3RoaXMuZW1pdChcImRpc2Nvbm5lY3RlZFwiKX0pKX19dC5kZWZhdWx0PW19LDE3Nzg6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDgxNjEpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9d3JhcFN5bmMoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmcmFtZS13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9Z2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSkpfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZnJhbWUtZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSl9fXQuZGVmYXVsdD1zfSw4MTYxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Ll9GcmFtZT12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSxcImZyYW1lXCIsdC51dWlkLHQubmFtZSksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZnJhbWUtaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFBhcmVudFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9fXQuX0ZyYW1lPXJ9LDY3MjA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigxNzc4KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig4MTYxKSx0KX0sOTIxMTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJnbG9iYWwtaG90a2V5XCIpfWFzeW5jIHJlZ2lzdGVyKGUsdCl7YXdhaXQgdGhpcy5vbihlLHQpLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1yZWdpc3RlclwiLHtob3RrZXk6ZX0pfWFzeW5jIHVucmVnaXN0ZXIoZSl7YXdhaXQgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnbG9iYWwtaG90a2V5LXVucmVnaXN0ZXJcIix7aG90a2V5OmV9KX1hc3luYyB1bnJlZ2lzdGVyQWxsKCl7YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5ldmVudE5hbWVzKCkuZmlsdGVyKChlPT4hKFwicmVnaXN0ZXJlZFwiPT09ZXx8XCJ1bnJlZ2lzdGVyZWRcIj09PWUpKSkubWFwKChlPT50aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKSkpKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdsb2JhbC1ob3RrZXktdW5yZWdpc3Rlci1hbGxcIix7fSl9YXN5bmMgaXNSZWdpc3RlcmVkKGUpe2NvbnN0e3BheWxvYWQ6e2RhdGE6dH19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1pcy1yZWdpc3RlcmVkXCIse2hvdGtleTplfSk7cmV0dXJuIHR9fXQuZGVmYXVsdD1yfSw3NTM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5DaGFubmVsQmFzZT10LlByb3RlY3RlZEl0ZW1zPXZvaWQgMDtjb25zdCBuPWU9Pih0LG4saSk9Pntjb25zdCByPWUodCxuLGkpO3JldHVybiB2b2lkIDA9PT1yP246cn07dC5Qcm90ZWN0ZWRJdGVtcz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucHJvdmlkZXJJZGVudGl0eT1lLHRoaXMud2lyZT10fX07Y2xhc3MgaXtjb25zdHJ1Y3Rvcigpe3RoaXMuc3Vic2NyaXB0aW9ucz1uZXcgTWFwfXN0YXRpYyBkZWZhdWx0QWN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihgTm8gYWN0aW9uIHJlZ2lzdGVyZWQgYXQgdGFyZ2V0IGZvciAke2V9YCl9YXN5bmMgcHJvY2Vzc0FjdGlvbihlLHQsbil7dHJ5e2NvbnN0IHI9dGhpcy5zdWJzY3JpcHRpb25zLmhhcyhlKT90aGlzLnN1YnNjcmlwdGlvbnMuZ2V0KGUpOih0LG4pPT57dmFyIHI7cmV0dXJuKG51bGwhPT0ocj10aGlzLmRlZmF1bHRBY3Rpb24pJiZ2b2lkIDAhPT1yP3I6aS5kZWZhdWx0QWN0aW9uKShlLHQsbil9LG89dGhpcy5wcmVBY3Rpb24/YXdhaXQgdGhpcy5wcmVBY3Rpb24oZSx0LG4pOnQscz1hd2FpdCByKG8sbik7cmV0dXJuIHRoaXMucG9zdEFjdGlvbj9hd2FpdCB0aGlzLnBvc3RBY3Rpb24oZSxzLG4pOnN9Y2F0Y2godCl7aWYodGhpcy5lcnJvck1pZGRsZXdhcmUpcmV0dXJuIHRoaXMuZXJyb3JNaWRkbGV3YXJlKGUsdCxuKTt0aHJvdyB0fX1iZWZvcmVBY3Rpb24oZSl7aWYodGhpcy5wcmVBY3Rpb24pdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSByZWdpc3RlcmVkIGJlZm9yZUFjdGlvbiBtaWRkbGV3YXJlXCIpO3RoaXMucHJlQWN0aW9uPW4oZSl9b25FcnJvcihlKXtpZih0aGlzLmVycm9yTWlkZGxld2FyZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgZXJyb3IgbWlkZGxld2FyZVwiKTt0aGlzLmVycm9yTWlkZGxld2FyZT1lfWFmdGVyQWN0aW9uKGUpe2lmKHRoaXMucG9zdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgYWZ0ZXJBY3Rpb24gbWlkZGxld2FyZVwiKTt0aGlzLnBvc3RBY3Rpb249bihlKX1yZW1vdmUoZSl7dGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShlKX1zZXREZWZhdWx0QWN0aW9uKGUpe2lmKHRoaXMuZGVmYXVsdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJkZWZhdWx0IGFjdGlvbiBjYW4gb25seSBiZSBzZXQgb25jZVwiKTt0aGlzLmRlZmF1bHRBY3Rpb249ZX1yZWdpc3RlcihlLHQpe2lmKHRoaXMuc3Vic2NyaXB0aW9ucy5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdWJzY3JpcHRpb24gYWxyZWFkeSByZWdpc3RlcmVkIGZvciBhY3Rpb246ICR7ZX0uIFVuc3Vic2NyaWJlIGJlZm9yZSBhZGRpbmcgbmV3IHN1YnNjcmlwdGlvbmApO3JldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KGUsdCksITB9fXQuQ2hhbm5lbEJhc2U9aX0sODM3ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LGE9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGM9big3NTM5KSxkPW5ldyBNYXA7Y2xhc3MgaCBleHRlbmRzIGMuQ2hhbm5lbEJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksaS5zZXQodGhpcyx2b2lkIDApLHIuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLnByb2Nlc3NBY3Rpb249KGUsdCxuKT0+c3VwZXIucHJvY2Vzc0FjdGlvbihlLHQsbiksby5zZXQodGhpcywoKCk9PntkLmRlbGV0ZSh0aGlzLmVuZHBvaW50SWQpLGEodGhpcyxyKS5jbG9zZSgpfSkpLHModGhpcyxpLG5ldyBjLlByb3RlY3RlZEl0ZW1zKGUsdCkpLHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSx0aGlzLmVuZHBvaW50SWQ9ZS5lbmRwb2ludElkLHModGhpcyxyLG4pLGQuc2V0KHRoaXMuZW5kcG9pbnRJZCx0aGlzKSxuLnJlY2VpdmUodGhpcy5wcm9jZXNzQWN0aW9uKX1zdGF0aWMgY2xvc2VDaGFubmVsQnlFbmRwb2ludElkKGUpe2NvbnN0IHQ9ZC5nZXQoZSk7dCYmYSh0LG8pLmNhbGwodCl9c3RhdGljIGhhbmRsZVByb3ZpZGVyRGlzY29ubmVjdChlLHQpe2UuZGlzY29ubmVjdExpc3RlbmVyKHQpLGEoZSxvKS5jYWxsKGUpfWdldCBwcm92aWRlcklkZW50aXR5KCl7cmV0dXJuIGEodGhpcyxpKS5wcm92aWRlcklkZW50aXR5fWFzeW5jIGRpc3BhdGNoKGUsdCl7aWYoYSh0aGlzLHIpLmlzRW5kcG9pbnRDb25uZWN0ZWQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCkpcmV0dXJuIGEodGhpcyxyKS5zZW5kKHRoaXMucHJvdmlkZXJJZGVudGl0eS5jaGFubmVsSWQsZSx0KTt0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2xpZW50IHlvdSBhcmUgdHJ5aW5nIHRvIGRpc3BhdGNoIGZyb20gaXMgZGlzY29ubmVjdGVkIGZyb20gdGhlIHRhcmdldCBwcm92aWRlci5cIil9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPXQ9Pnt0cnl7ZSh0KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHdoaWxlIGNhbGxpbmcgdGhlIG9uRGlzY29ubmVjdGlvbiBjYWxsYmFjazogJHtlLm1lc3NhZ2V9YCl9ZmluYWxseXt0aGlzLmRpc2Nvbm5lY3RMaXN0ZW5lcj0oKT0+e319fX1hc3luYyBkaXNjb25uZWN0KCl7Y29uc3QgZT1hKHRoaXMsaSkse2NoYW5uZWxOYW1lOnQsdXVpZDpuLG5hbWU6cn09ZS5wcm92aWRlcklkZW50aXR5O2F3YWl0IGUud2lyZS5zZW5kQWN0aW9uKFwiZGlzY29ubmVjdC1mcm9tLWNoYW5uZWxcIix7Y2hhbm5lbE5hbWU6dCx1dWlkOm4sbmFtZTpyLGVuZHBvaW50SWQ6dGhpcy5lbmRwb2ludElkfSksYSh0aGlzLG8pLmNhbGwodGhpcyl9fXQuZGVmYXVsdD1oLGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwfSw2NzExOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29ubmVjdGlvbk1hbmFnZXI9dm9pZCAwO2NvbnN0IGE9bigzOTE3KSxjPW4oOTY1OSksZD1uKDEwNDYpLGg9bigzODcwKSxsPW4oNTY5KSx1PW4oMjk0MikscD1uKDM3NDkpLHc9bigzMDM3KSxmPW4oNzExMyk7Y2xhc3MgeSBleHRlbmRzIGMuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcD1lPT57dGhpcy5wcm92aWRlck1hcC5kZWxldGUoZSl9LHRoaXMub25tZXNzYWdlPWU9PlwicHJvY2Vzcy1jaGFubmVsLWNvbm5lY3Rpb25cIj09PWUuYWN0aW9uJiYodGhpcy5wcm9jZXNzQ2hhbm5lbENvbm5lY3Rpb24oZSksITApLHRoaXMucHJvdmlkZXJNYXA9bmV3IE1hcCx0aGlzLnByb3RvY29sTWFuYWdlcj1uZXcgdy5Qcm90b2NvbE1hbmFnZXIodGhpcy5pc05vZGVFbnZpcm9ubWVudCgpP1tcImNsYXNzaWNcIl06W1wicnRjXCIsXCJjbGFzc2ljXCJdKSxvKHRoaXMsaSxuZXcgcC5NZXNzYWdlUmVjZWl2ZXIoZSkpLG8odGhpcyxyLG5ldyBsLlJUQ0lDRU1hbmFnZXIoZSkpLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKX1zdGF0aWMgZ2V0UHJvdG9jb2xPcHRpb25zRnJvbVN0cmluZ3MoZSl7cmV0dXJuIGUubWFwKChlPT57c3dpdGNoKGUpe2Nhc2VcInJ0Y1wiOnJldHVybiBoLlJUQ0luZm87Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBkLkNsYXNzaWNJbmZvO2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSl9Y3JlYXRlUHJvdmlkZXIoZSx0KXtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNyZWF0ZSxlfHx7fSkscj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRQcm92aWRlclByb3RvY29scyhudWxsPT1uP3ZvaWQgMDpuLnByb3RvY29scyksbz1yLm1hcCgoZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjpyZXR1cm4gbmV3IGguUlRDU3RyYXRlZ3k7Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBuZXcgZC5DbGFzc2ljU3RyYXRlZ3kodGhpcy53aXJlLHModGhpcyxpKSx0LmNoYW5uZWxJZCx0KTtkZWZhdWx0OnJldHVybiBhLmV4aGF1c3RpdmVDaGVjayhlLFtcInJ0Y1wiLFwiY2xhc3NpY1wiXSl9fSkpO2xldCBjO2lmKDI9PT1vLmxlbmd0aCl7Y29uc3RbZSx0XT1vO2M9Zi5kZWZhdWx0LmNvbWJpbmUoZSx0KX1lbHNle2lmKDEhPT1vLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gY29tYmluZSBzdHJhdGVnaWVzXCIpO1tjXT1vfWNvbnN0IGw9bmV3IHUuQ2hhbm5lbFByb3ZpZGVyKHQsdGhpcy53aXJlLGMpLHA9dC5jaGFubmVsSWQ7cmV0dXJuIHRoaXMucHJvdmlkZXJNYXAuc2V0KHAse3Byb3ZpZGVyOmwsc3RyYXRlZ3k6YyxzdXBwb3J0ZWRQcm90b2NvbHM6eS5nZXRQcm90b2NvbE9wdGlvbnNGcm9tU3RyaW5ncyhyKX0pLHUuQ2hhbm5lbFByb3ZpZGVyLnNldFByb3ZpZGVyUmVtb3ZhbChsLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcC5iaW5kKHRoaXMpKSxsfWFzeW5jIGNyZWF0ZUNsaWVudE9mZmVyKGUpe2NvbnN0IHQ9dGhpcy5wcm90b2NvbE1hbmFnZXIuZ2V0Q2xpZW50UHJvdG9jb2xzKG51bGw9PWU/dm9pZCAwOmUucHJvdG9jb2xzKTtsZXQgbjtyZXR1cm57b2ZmZXI6e3N1cHBvcnRlZFByb3RvY29sczphd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjp7Y29uc3R7cnRjQ2xpZW50OmUsY2hhbm5lbHM6dCxvZmZlcjppLHJ0Y0Nvbm5lY3Rpb25JZDpvLGNoYW5uZWxzT3BlbmVkOmF9PWF3YWl0IHModGhpcyxyKS5zdGFydENsaWVudE9mZmVyKCk7cmV0dXJuIG49e3J0Y0NsaWVudDplLGNoYW5uZWxzOnQsY2hhbm5lbHNPcGVuZWQ6YX0se3R5cGU6XCJydGNcIix2ZXJzaW9uOmguUlRDSW5mby52ZXJzaW9uLHBheWxvYWQ6e29mZmVyOmkscnRjQ29ubmVjdGlvbklkOm99fX1jYXNlXCJjbGFzc2ljXCI6cmV0dXJue3R5cGU6XCJjbGFzc2ljXCIsdmVyc2lvbjpkLkNsYXNzaWNJbmZvLnZlcnNpb259O2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSkpLG1heFByb3RvY29sczoyfSxydGM6bn19YXN5bmMgY3JlYXRlQ2xpZW50U3RyYXRlZ3koZSx0KXt2YXIgbjt0LmVuZHBvaW50SWR8fCh0LmVuZHBvaW50SWQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKSxzKHRoaXMsaSkuY2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24odC5jaGFubmVsSWQpKTtjb25zdCBvPW51bGwhPT0obj10LmFuc3dlcikmJnZvaWQgMCE9PW4/bjp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XX0sYT0oYXdhaXQgUHJvbWlzZS5hbGwoby5zdXBwb3J0ZWRQcm90b2NvbHMubWFwKChhc3luYyBuPT5cInJ0Y1wiPT09bi50eXBlJiZlPyhhd2FpdCBzKHRoaXMscikuZmluaXNoQ2xpZW50T2ZmZXIoZS5ydGNDbGllbnQsbi5wYXlsb2FkLmFuc3dlcixlLmNoYW5uZWxzT3BlbmVkKSxuZXcgaC5SVENTdHJhdGVneSk6XCJjbGFzc2ljXCI9PT1uLnR5cGU/bmV3IGQuQ2xhc3NpY1N0cmF0ZWd5KHRoaXMud2lyZSxzKHRoaXMsaSksdC5lbmRwb2ludElkLHQpOm51bGwpKSkpLmZpbHRlcigoZT0+bnVsbCE9PWUpKTtsZXQgYztpZihlJiYhYS5zb21lKChlPT5lIGluc3RhbmNlb2YgaC5SVENTdHJhdGVneSkpJiZlJiZlLnJ0Y0NsaWVudC5jbG9zZSgpLGEubGVuZ3RoPj0yKWM9Zi5kZWZhdWx0LmNvbWJpbmUoYVswXSxhWzFdKTtlbHNle2lmKCFhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wYXRpYmxlIHByb3RvY29sc1wiKTtbY109YX1jb25zdCBsPXtlbmRwb2ludElkZW50aXR5OnQscnRjOmV9O3JldHVybiBjLmFkZEVuZHBvaW50KHQuY2hhbm5lbElkLGwpLGN9YXN5bmMgcHJvY2Vzc0NoYW5uZWxDb25uZWN0aW9uKGUpe2NvbnN0e2NsaWVudElkZW50aXR5OnQscHJvdmlkZXJJZGVudGl0eTpuLGFja1RvU2VuZGVyOmkscGF5bG9hZDpvLG9mZmVyOmF9PWUucGF5bG9hZDt0LmVuZHBvaW50SWQ/dC5pc0xvY2FsRW5kcG9pbnRJZD0hMToodC5lbmRwb2ludElkPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksdC5pc0xvY2FsRW5kcG9pbnRJZD0hMCk7Y29uc3QgYz1uLmNoYW5uZWxJZCxsPXRoaXMucHJvdmlkZXJNYXAuZ2V0KGMpO2lmKCFsKXJldHVybiBpLnBheWxvYWQuc3VjY2Vzcz0hMSxpLnBheWxvYWQucmVhc29uPWBDaGFubmVsIFwiJHtuLmNoYW5uZWxOYW1lfVwiIGhhcyBiZWVuIGRlc3Ryb3llZC5gLHRoaXMud2lyZS5zZW5kUmF3KGkpO2NvbnN0e3Byb3ZpZGVyOnAsc3RyYXRlZ3k6dyxzdXBwb3J0ZWRQcm90b2NvbHM6Zn09bDt0cnl7aWYoIShwIGluc3RhbmNlb2YgdS5DaGFubmVsUHJvdmlkZXIpKXRocm93IEVycm9yKFwiQ2Fubm90IGNvbm5lY3QgdG8gYSBjaGFubmVsIGNsaWVudFwiKTtjb25zdCBlPW51bGwhPWE/YTp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XSxtYXhQcm90b2NvbHM6MX0sbj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRDb21wYXRpYmxlUHJvdG9jb2xzKGYsZSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRoaXMgcHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBhbnkgb2YgdGhlIG9mZmVyZWQgcHJvdG9jb2xzLlwiKTtjb25zdCBjPWF3YWl0IHAucHJvY2Vzc0Nvbm5lY3Rpb24odCxvKTtpLnBheWxvYWQucGF5bG9hZD1pLnBheWxvYWQucGF5bG9hZHx8e307bGV0IGw9e3N1cHBvcnRlZFByb3RvY29sczpbXSxlbmRwb2ludFBheWxvYWRQcm9taXNlOlByb21pc2UucmVzb2x2ZSh7ZW5kcG9pbnRJZGVudGl0eTp0fSl9O3JldHVybiBsPWF3YWl0IG4ucmVkdWNlKChhc3luYyhlLHQpPT57Y29uc3Qgbj1hd2FpdCBlO2lmKFwicnRjXCI9PT10LnR5cGUpe2NvbnN0e2Fuc3dlcjplLHJ0Y0NsaWVudDppLGNoYW5uZWxzOm99PWF3YWl0IHModGhpcyxyKS5jcmVhdGVQcm92aWRlckFuc3dlcih0LnBheWxvYWQucnRjQ29ubmVjdGlvbklkLHQucGF5bG9hZC5vZmZlcik7bi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcInJ0Y1wiLHZlcnNpb246aC5SVENJbmZvLnZlcnNpb24scGF5bG9hZDp7YW5zd2VyOmV9fSksbi5lbmRwb2ludFBheWxvYWRQcm9taXNlPW4uZW5kcG9pbnRQYXlsb2FkUHJvbWlzZS50aGVuKChlPT5vLnRoZW4oKHQ9Pih7Li4uZSxydGM6e3J0Y0NsaWVudDppLGNoYW5uZWxzOnR9fSkpKSkpfWVsc2Ugbi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOmQuQ2xhc3NpY0luZm8udmVyc2lvbn0pO3JldHVybiBufSksUHJvbWlzZS5yZXNvbHZlKGwpKSxsLmVuZHBvaW50UGF5bG9hZFByb21pc2UudGhlbigoZT0+dy5hZGRFbmRwb2ludCh0LmVuZHBvaW50SWQsZSkpKSxpLnBheWxvYWQucGF5bG9hZC5yZXN1bHQ9YyxpLnBheWxvYWQucGF5bG9hZC5hbnN3ZXI9bCx0aGlzLndpcmUuc2VuZFJhdyhpKX1jYXRjaChlKXtyZXR1cm4gaS5wYXlsb2FkLnN1Y2Nlc3M9ITEsaS5wYXlsb2FkLnJlYXNvbj1lLm1lc3NhZ2UsdGhpcy53aXJlLnNlbmRSYXcoaSl9fX10LkNvbm5lY3Rpb25NYW5hZ2VyPXksaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3NzIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWw9dm9pZCAwO2NvbnN0IHM9big4Mzc4KSxhPW4oMjk0MiksYz1uKDk2NTkpLGQ9big2NzExKSxoPSgpPT57fTtjbGFzcyBsIGV4dGVuZHMgYy5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLFwiY2hhbm5lbFwiKSxpLnNldCh0aGlzLHZvaWQgMCkscih0aGlzLGksbmV3IGQuQ29ubmVjdGlvbk1hbmFnZXIoZSkpfWFzeW5jIGdldEFsbENoYW5uZWxzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1jaGFubmVsc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBvbkNoYW5uZWxDb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJjb25uZWN0ZWRcIixlKX1hc3luYyBvbkNoYW5uZWxEaXNjb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIixlKX1hc3luYyBjb25uZWN0KGUsdCl7aWYoIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGEgY2hhbm5lbE5hbWUgc3RyaW5nIHRvIGNvbm5lY3QgdG8gYSBjaGFubmVsLlwiKTtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNvbm5lY3QsdHx8e30pO2xldCByPWgsYT1oO2NvbnN0IGM9bmV3IFByb21pc2UoKHQ9PntyPXQsYT1pPT57ZT09PWkuY2hhbm5lbE5hbWUmJih0aGlzLnJlbW92ZUxpc3RlbmVyKFwiY29ubmVjdGVkXCIsYSksdCh0aGlzLmNvbm5lY3QoZSxuKSkpfSx0aGlzLm9uKFwiY29ubmVjdGVkXCIsYSl9KSk7dHJ5e2NvbnN0e29mZmVyOnQscnRjOmN9PWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRPZmZlcihuKSxkPWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY29ubmVjdC10by1jaGFubmVsXCIse2NoYW5uZWxOYW1lOmUsLi4ubixvZmZlcjp0fSkse3BheWxvYWQ6e2RhdGE6aH19PWQ7ciYmcigpLHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixhKTtjb25zdCBsPWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRTdHJhdGVneShjLGgpLHU9bmV3IHMuZGVmYXVsdChoLHRoaXMud2lyZSxsKTtyZXR1cm4gbC5vbkVuZHBvaW50RGlzY29ubmVjdChoLmNoYW5uZWxJZCwoYXN5bmMoKT0+e3RyeXthd2FpdCB1LmRpc2Nvbm5lY3QoKX1jYXRjaChlKXtjb25zb2xlLndhcm4oYFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBkaXNjb25uZWN0IGZvciBjbGllbnQgd2l0aCB1dWlkOiAke2gudXVpZH0gLyBuYW1lOiAke2gubmFtZX0gLyBlbmRwb2ludElkOiAke2guZW5kcG9pbnRJZH0uYCl9ZmluYWxseXtzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsaCl9fSkpLHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsdCl9KSksdX1jYXRjaCh0KXtjb25zdCBpPVwiaW50ZXJuYWwtbmFja1wiO2lmKHt3YWl0OiEwLC4uLm59LndhaXQmJnQubWVzc2FnZSYmdC5tZXNzYWdlLmluY2x1ZGVzKGkpKXJldHVybiBjb25zb2xlLndhcm4oYENoYW5uZWwgbm90IGZvdW5kIGZvciBjaGFubmVsTmFtZTogJHtlfSwgd2FpdGluZyBmb3IgY2hhbm5lbCBjb25uZWN0aW9uLmApLGM7dGhyb3cgdC5tZXNzYWdlPT09aT9uZXcgRXJyb3IoYE5vIGNoYW5uZWwgZm91bmQgZm9yIGNoYW5uZWxOYW1lOiAke2V9YCk6bmV3IEVycm9yKHQpfX1hc3luYyBjcmVhdGUoZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIGNoYW5uZWxOYW1lIHRvIGNyZWF0ZSBhIGNoYW5uZWxcIik7Y29uc3R7cGF5bG9hZDp7ZGF0YTpufX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtY2hhbm5lbFwiLHtjaGFubmVsTmFtZTplfSkscj1vKHRoaXMsaSkuY3JlYXRlUHJvdmlkZXIodCxuKTtyZXR1cm4gdGhpcy5vbihcImNsaWVudC1kaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZhLkNoYW5uZWxQcm92aWRlci5oYW5kbGVDbGllbnREaXNjb25uZWN0aW9uKHIsdCl9KSkscn19dC5DaGFubmVsPWwsaT1uZXcgV2Vha01hcH0sMzc0OTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5NZXNzYWdlUmVjZWl2ZXI9dm9pZCAwO2NvbnN0IGk9big4Mzc4KSxyPW4oOTY1OSk7Y2xhc3MgbyBleHRlbmRzIHIuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm9ubWVzc2FnZT1lPT5cInByb2Nlc3MtY2hhbm5lbC1tZXNzYWdlXCI9PT1lLmFjdGlvbiYmKHRoaXMucHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpLCEwKSx0aGlzLmVuZHBvaW50TWFwPW5ldyBNYXAsdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQ9bmV3IE1hcCxlLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSl9YXN5bmMgcHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpe3ZhciB0LG47Y29uc3R7c2VuZGVySWRlbnRpdHk6aSxwcm92aWRlcklkZW50aXR5OnIsYWN0aW9uOm8sYWNrVG9TZW5kZXI6cyxwYXlsb2FkOmEsaW50ZW5kZWRUYXJnZXRJZGVudGl0eTpjfT1lLnBheWxvYWQsZD1udWxsIT09KG49bnVsbCE9PSh0PWMuY2hhbm5lbElkKSYmdm9pZCAwIT09dD90OmMuZW5kcG9pbnRJZCkmJnZvaWQgMCE9PW4/bjp0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoci5jaGFubmVsSWQpLGg9dGhpcy5lbmRwb2ludE1hcC5nZXQoZCk7aWYoIWgpcmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249YENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHt0aGlzLndpcmUubWUudXVpZH0gLyBuYW1lOiAke3RoaXMud2lyZS5tZS5uYW1lfSAvIGVuZHBvaW50SWQ6ICR7ZH0gbm8gbG9uZ2VyIGNvbm5lY3RlZC5gLHRoaXMud2lyZS5zZW5kUmF3KHMpO3RyeXtjb25zdCBlPWF3YWl0IGgobyxhLGkpO3JldHVybiBzLnBheWxvYWQucGF5bG9hZD1zLnBheWxvYWQucGF5bG9hZHx8e30scy5wYXlsb2FkLnBheWxvYWQucmVzdWx0PWUsdGhpcy53aXJlLnNlbmRSYXcocyl9Y2F0Y2goZSl7cmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249ZS5tZXNzYWdlLHRoaXMud2lyZS5zZW5kUmF3KHMpfX1hZGRFbmRwb2ludChlLHQsbil7dGhpcy5lbmRwb2ludE1hcC5zZXQobixlKSx0IT09biYmdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQuc2V0KHQsbil9cmVtb3ZlRW5kcG9pbnQoZSx0KXt0aGlzLmVuZHBvaW50TWFwLmRlbGV0ZSh0KSx0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk9PT10JiZ0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5kZWxldGUoZSl9Y2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24oZSl7Y29uc3QgdD10aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk7dCYmKGkuZGVmYXVsdC5jbG9zZUNoYW5uZWxCeUVuZHBvaW50SWQodCksY29uc29sZS53YXJuKFwiWW91IGhhdmUgY3JlYXRlZCBhIHNlY29uZCBjb25uZWN0aW9uIHRvIGFuIG9sZGVyIHByb3ZpZGVyLiBGaXJzdCBjb25uZWN0aW9uIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgY2xpZW50TWFwXCIpLGNvbnNvbGUud2FybihcIklmIHRoZSBwcm92aWRlciBjYWxscyBwdWJsaXNoKCksIHlvdSBtYXkgcmVjZWl2ZSBtdWx0aXBsZSBtZXNzYWdlcy5cIikpfX10Lk1lc3NhZ2VSZWNlaXZlcj1vfSwxMDQ2OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNsYXNzaWNJbmZvPXQuQ2xhc3NpY1N0cmF0ZWd5PXZvaWQgMCx0LkNsYXNzaWNTdHJhdGVneT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQscyxhKXt0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LHRoaXMuZW5kcG9pbnRJZD1zLHRoaXMucHJvdmlkZXJJZGVudGl0eT1hLG4uc2V0KHRoaXMsdm9pZCAwKSxpLnNldCh0aGlzLG5ldyBNYXApLHRoaXMuc2VuZD1hc3luYyhlLHQscik9Pntjb25zdCBzPW8odGhpcyxpKS5nZXQoZSk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9jYXRlIHJvdXRpbmcgaW5mbyBmb3IgZW5kcG9pbnQgJHtlfWApO2NvbnN0IGE9ey4uLnN9O3JldHVybiBhLmlzTG9jYWxFbmRwb2ludElkJiZkZWxldGUgYS5lbmRwb2ludElkLGRlbGV0ZSBhLmlzTG9jYWxFbmRwb2ludElkLChhd2FpdCBvKHRoaXMsbikuc2VuZEFjdGlvbihcInNlbmQtY2hhbm5lbC1tZXNzYWdlXCIsey4uLmEscHJvdmlkZXJJZGVudGl0eTp0aGlzLnByb3ZpZGVySWRlbnRpdHksYWN0aW9uOnQscGF5bG9hZDpyfSkuY2F0Y2goKGU9Pnt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX0pKSkucGF5bG9hZC5kYXRhLnJlc3VsdH0sdGhpcy5jbG9zZT1hc3luYygpPT57dGhpcy5tZXNzYWdlUmVjZWl2ZXIucmVtb3ZlRW5kcG9pbnQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpLHIodGhpcyxpLG5ldyBNYXApfSxyKHRoaXMsbixlKX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe31yZWNlaXZlKGUpe3RoaXMubWVzc2FnZVJlY2VpdmVyLmFkZEVuZHBvaW50KGUsdGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7byh0aGlzLGkpLmRlbGV0ZShlKX1pc0VuZHBvaW50Q29ubmVjdGVkKGUpe3JldHVybiBvKHRoaXMsaSkuaGFzKGUpfWFkZEVuZHBvaW50KGUsdCl7byh0aGlzLGkpLnNldChlLHQuZW5kcG9pbnRJZGVudGl0eSl9aXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXt2YXIgdCxuO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludElkZW50aXR5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5lbmRwb2ludElkKXx8XCJzdHJpbmdcIj09dHlwZW9mKG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50SWRlbnRpdHkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNoYW5uZWxJZCl9fSxuPW5ldyBXZWFrTWFwLGk9bmV3IFdlYWtNYXAsdC5DbGFzc2ljSW5mbz17dmVyc2lvbjo1LG1pbmltdW1WZXJzaW9uOjAsdHlwZTpcImNsYXNzaWNcIn19LDcxMTM6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjbGFzcyBue2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcmltYXJ5PWUsdGhpcy5zZWNvbmRhcnk9dH1zdGF0aWMgY29tYmluZShlLHQpe3JldHVybiBuZXcgbihlLHQpfW9uRW5kcG9pbnREaXNjb25uZWN0KGUsdCl7dGhpcy5wcmltYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5zZWNvbmRhcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKXx8dCgpfSkpLHRoaXMuc2Vjb25kYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHQoKX0pKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe3JldHVybiB0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXx8dGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKX1hc3luYyBjbG9zZUVuZHBvaW50KGUpe2F3YWl0IHRoaXMucHJpbWFyeS5jbG9zZUVuZHBvaW50KGUpLGF3YWl0IHRoaXMuc2Vjb25kYXJ5LmNsb3NlRW5kcG9pbnQoZSl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gdGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHRoaXMuc2Vjb25kYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl9YXN5bmMgYWRkRW5kcG9pbnQoZSx0KXt0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5wcmltYXJ5LmFkZEVuZHBvaW50KGUsdCksdGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5zZWNvbmRhcnkuYWRkRW5kcG9pbnQoZSx0KX1yZWNlaXZlKGUpe3RoaXMucHJpbWFyeS5yZWNlaXZlKGUpLHRoaXMuc2Vjb25kYXJ5LnJlY2VpdmUoZSl9c2VuZChlLHQsbil7cmV0dXJuIHRoaXMucHJpbWFyeS5pc0VuZHBvaW50Q29ubmVjdGVkKGUpP3RoaXMucHJpbWFyeS5zZW5kKGUsdCxuKTp0aGlzLnNlY29uZGFyeS5zZW5kKGUsdCxuKX1hc3luYyBjbG9zZSgpe2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLnByaW1hcnkuY2xvc2UoKSx0aGlzLnNlY29uZGFyeS5jbG9zZSgpXSl9fXQuZGVmYXVsdD1ufSwzMDM3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Qcm90b2NvbE1hbmFnZXI9dm9pZCAwLHQuUHJvdG9jb2xNYW5hZ2VyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXI9ZSx0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM9W1wiY2xhc3NpY1wiXSx0aGlzLkRlZmF1bHRQcm92aWRlclByb3RvY29scz1bXCJjbGFzc2ljXCJdLHRoaXMuZ2V0Q2xpZW50UHJvdG9jb2xzPWU9Pntjb25zdCB0PWU/dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5maWx0ZXIoKHQ9PmUuaW5jbHVkZXModCkpKTp0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRQcm92aWRlclByb3RvY29scz1lPT57Y29uc3QgdD1lP3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuZmlsdGVyKCh0PT5lLmluY2x1ZGVzKHQpKSk6dGhpcy5EZWZhdWx0UHJvdmlkZXJQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRDb21wYXRpYmxlUHJvdG9jb2xzPShlLHQpPT50LnN1cHBvcnRlZFByb3RvY29scy5maWx0ZXIoKHQ9PmUuc29tZSgoZT0+e3ZhciBuO3JldHVybiBlLnR5cGU9PT10LnR5cGUmJnQudmVyc2lvbj49ZS5taW5pbXVtVmVyc2lvbiYmZS52ZXJzaW9uPj0obnVsbCE9PShuPXQubWluaW11bVZlcnNpb24pJiZ2b2lkIDAhPT1uP246MCl9KSkpKS5zbGljZSgwLHQubWF4UHJvdG9jb2xzKX19fSw4Nzc2OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDRW5kcG9pbnQ9dm9pZCAwO2NvbnN0IGE9bigyMzY2KTt0LlJUQ0VuZHBvaW50PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5ydGM9ZSx0aGlzLmVuZHBvaW50SWRlbnRpdHk9dCx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsaS5zZXQodGhpcyxudWxsKSxyLnNldCh0aGlzLHZvaWQgMCksdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyPWU9PntcImNvbm5lY3RlZFwiIT09dGhpcy5ydGMucnRjQ2xpZW50LmNvbm5lY3Rpb25TdGF0ZSYmKHRoaXMucnRjLnJ0Y0NsaWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyKSx0aGlzLmNsb3NlKCksbyh0aGlzLHIpJiZvKHRoaXMscikuY2FsbCh0aGlzKSl9LHRoaXMuc2VuZD1hc3luYyhlLHQpPT57Y29uc3Qgbj1gbWVzc2FnZS0ke01hdGgucmFuZG9tKCl9YCxpPW5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMucmVzcG9uc2VNYXAuc2V0KG4se3Jlc29sdmU6ZSxyZWplY3Q6dH0pfSkpO3JldHVybiB0aGlzLnJ0Yy5jaGFubmVscy5yZXF1ZXN0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbjplLHBheWxvYWQ6dCxtZXNzYWdlSWQ6bn0pKSxpfSx0aGlzLmNsb3NlPSgpPT57dGhpcy5yZXNwb25zZU1hcC5mb3JFYWNoKChlPT5lLnJlamVjdChcIkNvbm5lY3Rpb24gaGFzIGNsb3NlZC5cIikpKSx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5jbG9zZSgpLHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmNsb3NlKCksdGhpcy5ydGMucnRjQ2xpZW50LmNsb3NlKCl9LHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGU9Pnt2YXIgdDtjb25zdHttZXNzYWdlSWQ6bixwYXlsb2FkOmksc3VjY2VzczpyLGVycm9yOm99PUpTT04ucGFyc2UoZS5kYXRhKSx7cmVzb2x2ZTpzLHJlamVjdDphfT1udWxsIT09KHQ9dGhpcy5yZXNwb25zZU1hcC5nZXQobikpJiZ2b2lkIDAhPT10P3Q6e307cyYmYT8odGhpcy5yZXNwb25zZU1hcC5kZWxldGUobikscj9zKGkpOmEobykpOihjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCBmaW5kIGlkIGluIHJlc3BvbnNlTWFwLlwiKSxjb25zb2xlLmxvZyhlKSl9KSksdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLChhc3luYyBlPT57Y29uc3R7bWVzc2FnZUlkOm4sYWN0aW9uOnIscGF5bG9hZDpzfT1KU09OLnBhcnNlKGUuZGF0YSk7aWYobyh0aGlzLGkpKXRyeXtjb25zdCBlPWF3YWl0IG8odGhpcyxpKS5jYWxsKHRoaXMscixzLHQpO3RoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHBheWxvYWQ6ZSxzdWNjZXNzOiEwfSkpfWNhdGNoKGUpe1wib3BlblwiPT09dGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UucmVhZHlTdGF0ZSYmdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2Uuc2VuZChKU09OLnN0cmluZ2lmeSh7bWVzc2FnZUlkOm4sZXJyb3I6YS5lcnJvclRvUE9KTyhlKSxzdWNjZXNzOiExfSkpfWVsc2VcIm9wZW5cIj09PXRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnJlYWR5U3RhdGUmJnRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHN1Y2Nlc3M6ITEsZXJyb3I6XCJDb25uZWN0aW9uIG5vdCByZWFkeS5cIn0pKX0pKSx0aGlzLnJ0Yy5ydGNDbGllbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuY29ubmVjdGlvblN0YXRlQ2hhbmdlSGFuZGxlciksT2JqZWN0LnZhbHVlcyh0aGlzLnJ0Yy5jaGFubmVscykuZm9yRWFjaCgoZT0+e2Uub25jbG9zZT1lPT57Wy4uLnRoaXMucmVzcG9uc2VNYXAudmFsdWVzKCldLmZvckVhY2goKGU9PmUucmVqZWN0KG5ldyBFcnJvcihcIlJUQ0RhdGFDaGFubmVsIGNsb3NlZCB1bmV4cGVjdGVkbHksIHRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgbWVzc2FnZSBzaXplLiBOb3RlOiBSVEMgQ2hhbm5lbHMgaGF2ZSBhIG1lc3NhZ2Ugc2l6ZSBsaW1pdCBvZiB+MjU1a0IuXCIpKSkpLHRoaXMuY2xvc2UoKSxvKHRoaXMscikmJm8odGhpcyxyKS5jYWxsKHRoaXMpfX0pKX1vbkRpc2Nvbm5lY3QoZSl7aWYobyh0aGlzLHIpKXRocm93IG5ldyBFcnJvcihcIlJUQ0VuZHBvaW50IGRpc2Nvbm5lY3RMaXN0ZW5lciBjYW5ub3QgYmUgc2V0IHR3aWNlLlwiKTtzKHRoaXMscixlKX1yZWNlaXZlKGUpe2lmKG8odGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBFbmRwb2ludC5cIik7cyh0aGlzLGksZSl9Z2V0IGNvbm5lY3RlZCgpe3JldHVyblwiY29ubmVjdGVkXCI9PT10aGlzLnJ0Yy5ydGNDbGllbnQuY29ubmVjdGlvblN0YXRlfX0saT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw1Njk6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDSUNFTWFuYWdlcj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJjaGFubmVsXCIpLHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZD1lPT5uZXcgUHJvbWlzZSgoKHQsbik9PntpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSl0KCk7ZWxzZSBpZihcImNvbm5lY3RpbmdcIj09PWUucmVhZHlTdGF0ZSl7Y29uc3Qgbj0oKT0+e2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKSx0KCl9O2UuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKX1lbHNlIG4obmV3IEVycm9yKFwiVGhpcyBDaGFubmVsIGhhcyBhbHJlYWR5IGNsb3NlZFwiKSl9KSl9c3RhdGljIGNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShlLHQpe2xldCBuO2NvbnN0IGk9bmV3IFByb21pc2UoKGU9PntuPWV9KSkscj1pPT57Y29uc3Qgbz0oKT0+e2kuY2hhbm5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLG4oaS5jaGFubmVsKX07aS5jaGFubmVsLmxhYmVsPT09ZSYmKGkuY2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRhdGFjaGFubmVsXCIscikpfTtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyKFwiZGF0YWNoYW5uZWxcIixyKSxpfWFzeW5jIGxpc3RlbkZvclByb3ZpZGVySWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpLHQse3RpbWVzdGFtcDpEYXRlLm5vdygpfSl9YXN5bmMgcmFpc2VQcm92aWRlckljZShlLHQpe2F3YWl0IHRoaXMud2lyZS5lbnZpcm9ubWVudC5yYWlzZUV2ZW50KHRoaXMuY3JlYXRlUm91dGVTdHJpbmcodGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSksdCl9YXN5bmMgbGlzdGVuRm9yQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSx0LHt0aW1lc3RhbXA6RGF0ZS5ub3coKX0pfWFzeW5jIHJhaXNlQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LnJhaXNlRXZlbnQodGhpcy5jcmVhdGVSb3V0ZVN0cmluZyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdCl9Y2xlYW51cEljZUxpc3RlbmVycyhlKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnModGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSl9Y3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpe3JldHVybmBpY2UtY2xpZW50LSR7ZX1gfWNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpe3JldHVybmBpY2UtcHJvdmlkZXItJHtlfWB9Y3JlYXRlUm91dGVTdHJpbmcoZSl7cmV0dXJuYGNoYW5uZWwvJHtlfWB9Y3JlYXRlUnRjUGVlcigpe3JldHVybiB0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0UnRjUGVlcigpfWFzeW5jIHN0YXJ0Q2xpZW50T2ZmZXIoKXtjb25zdCBlPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0PXRoaXMuY3JlYXRlUnRjUGVlcigpO3QuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLChhc3luYyB0PT57dmFyIG47dC5jYW5kaWRhdGUmJmF3YWl0IHRoaXMucmFpc2VDbGllbnRJY2UoZSx7Y2FuZGlkYXRlOm51bGw9PT0obj10LmNhbmRpZGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4udG9KU09OKCl9KX0pKSxhd2FpdCB0aGlzLmxpc3RlbkZvclByb3ZpZGVySWNlKGUsKGFzeW5jIGU9Pnthd2FpdCB0LmFkZEljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSl9KSk7Y29uc3Qgbj17cmVxdWVzdDp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVxdWVzdFwiKSxyZXNwb25zZTp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVzcG9uc2VcIil9LGk9YXdhaXQgdC5jcmVhdGVPZmZlcigpO2F3YWl0IHQuc2V0TG9jYWxEZXNjcmlwdGlvbihpKTtjb25zdCByPVByb21pc2UuYWxsKFtuLnJlcXVlc3Qsbi5yZXNwb25zZV0ubWFwKHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZCkpLnRoZW4oKCgpPT57fSkpO3JldHVybntydGNDbGllbnQ6dCxjaGFubmVsczpuLG9mZmVyOmkscnRjQ29ubmVjdGlvbklkOmUsY2hhbm5lbHNPcGVuZWQ6cn19YXN5bmMgZmluaXNoQ2xpZW50T2ZmZXIoZSx0LG4pe3JldHVybiBhd2FpdCBlLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpLGF3YWl0IG4sITB9YXN5bmMgY3JlYXRlUHJvdmlkZXJBbnN3ZXIoZSx0KXtjb25zdCBuPXRoaXMuY3JlYXRlUnRjUGVlcigpLGk9ci5jcmVhdGVEYXRhQ2hhbm5lbFByb21pc2UoXCJyZXF1ZXN0XCIsbiksbz1yLmNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShcInJlc3BvbnNlXCIsbik7bi5hZGRFdmVudExpc3RlbmVyKFwiaWNlY2FuZGlkYXRlXCIsKGFzeW5jIHQ9Pnt2YXIgbjt0LmNhbmRpZGF0ZSYmYXdhaXQgdGhpcy5yYWlzZVByb3ZpZGVySWNlKGUse2NhbmRpZGF0ZTpudWxsPT09KG49dC5jYW5kaWRhdGUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnRvSlNPTigpfSl9KSksYXdhaXQgdGhpcy5saXN0ZW5Gb3JDbGllbnRJY2UoZSwoYXN5bmMgZT0+e2F3YWl0IG4uYWRkSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKX0pKSxhd2FpdCBuLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpO2NvbnN0IHM9YXdhaXQgbi5jcmVhdGVBbnN3ZXIoKTthd2FpdCBuLnNldExvY2FsRGVzY3JpcHRpb24ocyk7Y29uc3QgYT1Qcm9taXNlLmFsbChbaSxvXSkudGhlbigoKFt0LG5dKT0+KHRoaXMuY2xlYW51cEljZUxpc3RlbmVycyhlKSx7cmVxdWVzdDp0LHJlc3BvbnNlOm59KSkpO3JldHVybntydGNDbGllbnQ6bixhbnN3ZXI6cyxjaGFubmVsczphfX19dC5SVENJQ0VNYW5hZ2VyPXJ9LDM4NzA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxzPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfSxhPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJUQ0luZm89dC5SVENTdHJhdGVneT12b2lkIDA7Y29uc3QgYz1uKDg3NzYpO3QuUlRDU3RyYXRlZ3k9Y2xhc3N7Y29uc3RydWN0b3IoKXtpLnNldCh0aGlzLG51bGwpLHIuc2V0KHRoaXMsbmV3IE1hcCksby5zZXQodGhpcywhMCksdGhpcy5zZW5kPWFzeW5jKGUsdCxuKT0+dGhpcy5nZXRFbmRwb2ludEJ5SWQoZSkuc2VuZCh0LG4pLHRoaXMuY2xvc2U9YXN5bmMoKT0+e3ModGhpcyxvKSYmKHModGhpcyxyKS5mb3JFYWNoKChlPT5lLmNsb3NlKCkpKSxhKHRoaXMscixuZXcgTWFwKSksYSh0aGlzLG8sITEpfX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe3RoaXMuZ2V0RW5kcG9pbnRCeUlkKGUpLm9uRGlzY29ubmVjdCh0KX1yZWNlaXZlKGUpe2lmKHModGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBTdHJhdGVneVwiKTthKHRoaXMsaSxlKSxzKHRoaXMscikuZm9yRWFjaCgoZT0+ZS5yZWNlaXZlKHModGhpcyxpKSkpKX1nZXRFbmRwb2ludEJ5SWQoZSl7Y29uc3QgdD1zKHRoaXMscikuZ2V0KGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggZW5kcG9pbnQgaWQgJHtlfSBpcyBub3QgY29ubmVjdGVkYCk7cmV0dXJuIHR9Z2V0IGNvbm5lY3RlZCgpe3JldHVybiBzKHRoaXMsbyl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gcyh0aGlzLHIpLmhhcyhlKX1hZGRFbmRwb2ludChlLHQpe2lmKCFzKHRoaXMsbykpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiQWRkaW5nIGVuZHBvaW50IHRvIGRpc2Nvbm5lY3RlZCBSVEMgU3RyYXRlZ3lcIik7Y29uc3Qgbj1uZXcgYy5SVENFbmRwb2ludCh0LnJ0Yyx0LmVuZHBvaW50SWRlbnRpdHkpO3ModGhpcyxpKSYmbi5yZWNlaXZlKHModGhpcyxpKSkscyh0aGlzLHIpLnNldChlLG4pfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7cyh0aGlzLHIpLmRlbGV0ZShlKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe2NvbnN0IHQ9ZT0+XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lO3JldHVybiB0KGUpJiZ0KGUuZW5kcG9pbnRJZGVudGl0eSkmJnQoZS5ydGMpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5lbmRwb2ludElkZW50aXR5LmVuZHBvaW50SWR9fSxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcCx0LlJUQ0luZm89e3ZlcnNpb246MSxtaW5pbXVtVmVyc2lvbjowLHR5cGU6XCJydGNcIn19LDI5NDI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWxQcm92aWRlcj12b2lkIDA7Y29uc3Qgbz1uKDc1MzkpLHM9bigyMzAwKTtsZXQgYT0oKCk9Pnt2YXIgZSx0LG4sYSxjO2NsYXNzIGQgZXh0ZW5kcyBvLkNoYW5uZWxCYXNle2NvbnN0cnVjdG9yKGgsbCx1KXtzdXBlcigpLGUuc2V0KHRoaXMsdm9pZCAwKSx0LnNldCh0aGlzLHZvaWQgMCksbi5zZXQodGhpcyx2b2lkIDApLGEuc2V0KHRoaXMsKHQ9Pntjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLmVuZHBvaW50SWQhPT10LmVuZHBvaW50SWQpKTtyKHRoaXMsbikuY2xvc2VFbmRwb2ludCh0LmVuZHBvaW50SWQpLGkodGhpcyxlLG8pfSkpLHRoaXMucHJvY2Vzc0FjdGlvbj1hc3luYyhlLHQsbik9PihkLmNsaWVudElzTXVsdGlSdW50aW1lKG4pJiYhcy5ydW50aW1lVXVpZE1lZXRzTWluaW11bVJ1bnRpbWVWZXJzaW9uKG4ucnVudGltZVV1aWQsXCIxOC44Ny41Ni4wXCIpP3RoaXMuaGFuZGxlTXVsdGlSdW50aW1lTGVnYWN5Q2xpZW50KG4pOnRoaXMuY2hlY2tGb3JDbGllbnRDb25uZWN0aW9uKG4pLHN1cGVyLnByb2Nlc3NBY3Rpb24oZSx0LG4pKSxjLnNldCh0aGlzLCgoKT0+e3IodGhpcyxuKS5jbG9zZSgpO2NvbnN0IGU9ZC5yZW1vdmFsTWFwLmdldCh0aGlzKTtlJiZlKCl9KSksaSh0aGlzLHQsbmV3IG8uUHJvdGVjdGVkSXRlbXMoaCxsKSksdGhpcy5jb25uZWN0TGlzdGVuZXI9KCk9Pnt9LHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSxpKHRoaXMsZSxbXSksaSh0aGlzLG4sdSksdS5yZWNlaXZlKHRoaXMucHJvY2Vzc0FjdGlvbil9Z2V0IGNvbm5lY3Rpb25zKCl7cmV0dXJuWy4uLnIodGhpcyxlKV19c3RhdGljIGhhbmRsZUNsaWVudERpc2Nvbm5lY3Rpb24oZSx0KXtjb25zdCBuPWUuY29ubmVjdGlvbnMuZmluZCgoZT0+ZS5lbmRwb2ludElkPT09dC5lbmRwb2ludElkKSk7bj9yKGUsYSkuY2FsbChlLG4pOmUuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLnV1aWQ9PT10LnV1aWQmJmUubmFtZT09PXQubmFtZSkpLmZvckVhY2gocihlLGEpKSxlLmRpc2Nvbm5lY3RMaXN0ZW5lcih0KX1zdGF0aWMgc2V0UHJvdmlkZXJSZW1vdmFsKGUsdCl7ZC5yZW1vdmFsTWFwLnNldChlLHQpfWRpc3BhdGNoKGUsdCxpKXt2YXIgbztjb25zdCBzPW51bGwhPT0obz1lLmVuZHBvaW50SWQpJiZ2b2lkIDAhPT1vP286dGhpcy5nZXRFbmRwb2ludElkRm9yT3BlbkZpbklkKGUsdCk7cmV0dXJuIHMmJnIodGhpcyxuKS5pc0VuZHBvaW50Q29ubmVjdGVkKHMpP3IodGhpcyxuKS5zZW5kKHMsdCxpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHtlLnV1aWR9IC8gbmFtZTogJHtlLm5hbWV9IC8gZW5kcG9pbnRJZDogJHtzfSBubyBsb25nZXIgY29ubmVjdGVkLmApKX1hc3luYyBwcm9jZXNzQ29ubmVjdGlvbih0LG4pe3JldHVybiByKHRoaXMsZSkucHVzaCh0KSx0aGlzLmNvbm5lY3RMaXN0ZW5lcih0LG4pfXB1Ymxpc2goZSx0KXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5tYXAoKGk9PnIodGhpcyxuKS5zZW5kKGkuZW5kcG9pbnRJZCxlLHQpKSl9b25Db25uZWN0aW9uKGUpe3RoaXMuY29ubmVjdExpc3RlbmVyPWV9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPWV9YXN5bmMgZGVzdHJveSgpe2NvbnN0IG49cih0aGlzLHQpLHtjaGFubmVsTmFtZTpvfT1uLnByb3ZpZGVySWRlbnRpdHk7aSh0aGlzLGUsW10pLGF3YWl0IG4ud2lyZS5zZW5kQWN0aW9uKFwiZGVzdHJveS1jaGFubmVsXCIse2NoYW5uZWxOYW1lOm99KSxyKHRoaXMsYykuY2FsbCh0aGlzKX1jaGVja0ZvckNsaWVudENvbm5lY3Rpb24oZSl7aWYoIXRoaXMuaXNDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuXFxuICAgICAgICAgICAgICAgICAgICBDbGllbnQgSWRlbnRpdHk6IHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWlzQ2xpZW50Q29ubmVjdGVkKGUpe3JldHVybiBkLmNsaWVudElkZW50aXR5SW5jbHVkZXNFbmRwb2ludElkKGUpP3RoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC5lbmRwb2ludElkPT09ZS5lbmRwb2ludElkJiZ0LnV1aWQ9PT1lLnV1aWQmJnQubmFtZT09PWUubmFtZSkpOnRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl9aXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl7cmV0dXJuIHRoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKX1oYW5kbGVNdWx0aVJ1bnRpbWVMZWdhY3lDbGllbnQoZSl7aWYoIXRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuIENsaWVudCBJZGVudGl0eTpcXG4gICAgICAgICAgICAgICAgICAgIHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWdldEVuZHBvaW50SWRGb3JPcGVuRmluSWQoZSxuKXt2YXIgaTtjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKCh0PT50Lm5hbWU9PT1lLm5hbWUmJnQudXVpZD09PWUudXVpZCkpO2lmKG8ubGVuZ3RoPj0yKXtjb25zdCBpPXIodGhpcyx0KSx7dXVpZDpvLG5hbWU6c309ZSxhPW51bGw9PWk/dm9pZCAwOmkucHJvdmlkZXJJZGVudGl0eS51dWlkLGM9bnVsbD09aT92b2lkIDA6aS5wcm92aWRlcklkZW50aXR5Lm5hbWU7Y29uc29sZS53YXJuKGBXQVJOSU5HOiBEaXNwYXRjaCBjYWxsIG1heSBoYXZlIHVuaW50ZW5kZWQgcmVzdWx0cy4gVGhlIFwidG9cIiBhcmd1bWVudCBvZiB5b3VyIGRpc3BhdGNoIGNhbGwgaXMgbWlzc2luZyB0aGVcXG4gICAgICAgICAgICAgICAgXCJlbmRwb2ludElkXCIgcGFyYW1ldGVyLiBUaGUgaWRlbnRpdHkgeW91IGFyZSBkaXNwYXRjaGluZyB0byAoe3V1aWQ6ICR7b30sIG5hbWU6ICR7c319KVxcbiAgICAgICAgICAgICAgICBoYXMgbXVsdGlwbGUgY2hhbm5lbENsaWVudHMgZm9yIHRoaXMgY2hhbm5lbC4gWW91ciBkaXNwYXRjaGVkIGFjdGlvbjogKCR7bn0pIGZyb20gdGhlIHByb3ZpZGVyOlxcbiAgICAgICAgICAgICAgICAoe3V1aWQ6ICR7YX0sIG5hbWU6ICR7Y319KSB3aWxsIG9ubHkgYmUgcHJvY2Vzc2VkIGJ5IHRoZSBtb3N0IHJlY2VudGx5LWNyZWF0ZWQgY2xpZW50LmApfXJldHVybiBudWxsPT09KGk9by5wb3AoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SWRlbnRpdHlJbmNsdWRlc0VuZHBvaW50SWQoZSl7cmV0dXJuIHZvaWQgMCE9PWUuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SXNNdWx0aVJ1bnRpbWUoZSl7cmV0dXJuIHZvaWQgMCE9PWUucnVudGltZVV1aWR9fXJldHVybiBlPW5ldyBXZWFrTWFwLHQ9bmV3IFdlYWtNYXAsbj1uZXcgV2Vha01hcCxhPW5ldyBXZWFrTWFwLGM9bmV3IFdlYWtNYXAsZC5yZW1vdmFsTWFwPW5ldyBXZWFrTWFwLGR9KSgpO3QuQ2hhbm5lbFByb3ZpZGVyPWF9LDgzNDc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJBcHBQYXlsb2FkPXZvaWQgMDtjb25zdCBpPW4oNjQ2NSkscj1uKDk2NTkpLG89bigzMTI3KSxzPW4oNzcyMiksYT1uKDQ5OTkpO2NsYXNzIGMgZXh0ZW5kcyByLkJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5ldmVudHM9e3N1YnNjcmliZXJBZGRlZDpcInN1YnNjcmliZXItYWRkZWRcIixzdWJzY3JpYmVyUmVtb3ZlZDpcInN1YnNjcmliZXItcmVtb3ZlZFwifSx0aGlzLnJlZkNvdW50ZXI9bmV3IG8uZGVmYXVsdCx0aGlzLkNoYW5uZWw9bmV3IHMuQ2hhbm5lbChlKSx0aGlzLmVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKSx0aGlzLm9uPXRoaXMuZW1pdHRlci5vbi5iaW5kKHRoaXMuZW1pdHRlciksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnM9dGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycy5iaW5kKHRoaXMuZW1pdHRlcil9cHVibGlzaChlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInB1Ymxpc2gtbWVzc2FnZVwiLHt0b3BpYzplLG1lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNlbmQoZSx0LG4pe2NvbnN0IGk9YS52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKGkpdGhyb3cgbmV3IEVycm9yKGkpO2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1tZXNzYWdlXCIse2Rlc3RpbmF0aW9uVXVpZDplLnV1aWQsZGVzdGluYXRpb25XaW5kb3dOYW1lOmUubmFtZSx0b3BpYzp0LG1lc3NhZ2U6bixzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pfXN1YnNjcmliZShlLHQsbil7Y29uc3QgaT10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsZS5uYW1lfHxcIipcIix0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLm9uKGksbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uRmlyc3QoaSwoKCk9PnRoaXMud2lyZS5zZW5kQWN0aW9uKFwic3Vic2NyaWJlXCIse3NvdXJjZVV1aWQ6ZS51dWlkLHNvdXJjZVdpbmRvd05hbWU6ZS5uYW1lfHxcIipcIix0b3BpYzp0LGRlc3RpbmF0aW9uV2luZG93TmFtZTp0aGlzLm1lLm5hbWV9KSksKCgpPT5Qcm9taXNlLnJlc29sdmUoKSkpfXVuc3Vic2NyaWJlKGUsdCxuKXtjb25zdCBpPWUubmFtZXx8XCIqXCIscj10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsaSx0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLnJlbW92ZUxpc3RlbmVyKHIsbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uTGFzdChyLCgoKT0+dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZVwiLHtzb3VyY2VVdWlkOmUudXVpZCxzb3VyY2VXaW5kb3dOYW1lOmksdG9waWM6dCxkZXN0aW5hdGlvbldpbmRvd05hbWU6dGhpcy5tZS5uYW1lfSkpLCgoKT0+bmV3IFByb21pc2UoKGU9PmUpKS50aGVuKCgoKT0+e30pKSkpfXByb2Nlc3NNZXNzYWdlKGUpe2NvbnN0e3BheWxvYWQ6e21lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOm4sc291cmNlVXVpZDppLHRvcGljOnJ9fT1lLG89W3RoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGksbixyKSx0aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShpLFwiKlwiLHIpLHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KFwiKlwiLFwiKlwiLHIpXSxzPXt1dWlkOmksbmFtZTpufTtvLmZvckVhY2goKGU9Pnt0aGlzLmVtaXR0ZXIuZW1pdChlLHQscyl9KSl9ZW1pdFN1YnNjcml2ZXJFdmVudChlLHQpe2NvbnN0e3BheWxvYWQ6e3RhcmdldE5hbWU6bix1dWlkOmksdG9waWM6cn19PXQsbz17bmFtZTpuLHV1aWQ6aSx0b3BpYzpyfTt0aGlzLmVtaXR0ZXIuZW1pdChlLG8pfWNyZWF0ZVN1YnNjcmlwdGlvbktleShlLHQsbil7Y29uc3QgaT10fHxcIipcIjtpZighKGUmJmkmJm4pKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgdXVpZCwgbmFtZSwgb3IgdG9waWMgc3RyaW5nXCIpO3JldHVybiBmdW5jdGlvbiguLi5lKXtyZXR1cm4gZS5tYXAoKGU9PkJ1ZmZlci5mcm9tKGAke2V9YCkudG9TdHJpbmcoXCJiYXNlNjRcIikpKS5qb2luKFwiL1wiKX0oZSxpLG4pfW9ubWVzc2FnZShlKXtjb25zdHthY3Rpb246dH09ZTtzd2l0Y2godCl7Y2FzZVwicHJvY2Vzcy1tZXNzYWdlXCI6dGhpcy5wcm9jZXNzTWVzc2FnZShlKTticmVhaztjYXNlIHRoaXMuZXZlbnRzLnN1YnNjcmliZXJBZGRlZDp0aGlzLmVtaXRTdWJzY3JpdmVyRXZlbnQodGhpcy5ldmVudHMuc3Vic2NyaWJlckFkZGVkLGUpO2JyZWFrO2Nhc2UgdGhpcy5ldmVudHMuc3Vic2NyaWJlclJlbW92ZWQ6dGhpcy5lbWl0U3Vic2NyaXZlckV2ZW50KHRoaXMuZXZlbnRzLnN1YnNjcmliZXJSZW1vdmVkLGUpfXJldHVybiEwfX10LmRlZmF1bHQ9Yyx0LkludGVyQXBwUGF5bG9hZD1jbGFzc3t9fSwyOTc3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDIwNTcpLG89big3MTM4KSxzPShlLC4uLnQpPT5uZXcgZSguLi50KTtjbGFzcyBhIGV4dGVuZHMgaS5CYXNle2FzeW5jIGluaXQoZSx0PXMpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1pbml0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShgaW50ZXJvcC1icm9rZXItJHtlfWApLGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRJbmZvKCk7cmV0dXJuIHQoci5JbnRlcm9wQnJva2VyLHRoaXMud2lyZSxuLGkuaW5pdGlhbE9wdGlvbnMuaW50ZXJvcEJyb2tlckNvbmZpZ3VyYXRpb258fHt9KX1jb25uZWN0U3luYyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY29ubmVjdC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLkludGVyb3BDbGllbnQodGhpcy53aXJlLGUsdCl9fXQuZGVmYXVsdD1hfSwyMDU3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkludGVyb3BCcm9rZXI9dm9pZCAwO2NvbnN0IGk9big5NjU5KSxyPW4oNzExNSksbz1uKDE3ODcpO2xldCBzPVt7aWQ6XCJncmVlblwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjMDBDQzg4XCIsbmFtZTpcImdyZWVuXCJ9fSx7aWQ6XCJwdXJwbGVcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiIzhDNjFGRlwiLG5hbWU6XCJwdXJwbGVcIn19LHtpZDpcIm9yYW5nZVwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjRkY4QzRDXCIsbmFtZTpcIm9yYW5nZVwifX0se2lkOlwicmVkXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjVFNjBcIixuYW1lOlwicmVkXCJ9fSx7aWQ6XCJwaW5rXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjhGQjhcIixuYW1lOlwicGlua1wifX0se2lkOlwieWVsbG93XCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNFOUZGOEZcIixuYW1lOlwieWVsbG93XCJ9fV07Y2xhc3MgYSBleHRlbmRzIGkuQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSksdGhpcy5jaGFubmVsPXQsdGhpcy5pbnRlcm9wQ2xpZW50cz1uZXcgTWFwLHRoaXMuY29udGV4dEdyb3Vwc0J5SWQ9bmV3IE1hcCxuLmNvbnRleHRHcm91cHMmJihzPW4uY29udGV4dEdyb3VwcyksdGhpcy5pbnRlbnRDbGllbnRNYXA9bmV3IE1hcCx0aGlzLmxhc3RDb250ZXh0TWFwPW5ldyBNYXAsdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5zZXRDb250ZXh0R3JvdXBNYXAoKSx0aGlzLndpcmVDaGFubmVsKHQpfXNldENvbnRleHQoe2NvbnRleHQ6ZX0sdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIW58fCFuLmNvbnRleHRHcm91cElkKXRocm93IG4/bmV3IEVycm9yKFwiWW91IG11c3Qgam9pbiBhIGNvbnRleHQgZ3JvdXAgYmVmb3JlIHlvdSBjYW4gc2V0IGNvbnRleHQuXCIpOm5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIENsaWVudCBTdGF0ZSBNYXBgKTt7Y29uc3R7Y29udGV4dEdyb3VwSWQ6dH09bjtpZighdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModCkpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgaGFzIGEgY29udGV4dCBncm91cCB0aGF0IGlzbid0IGluIHRoZSBjb250ZXh0IGdyb3VwIG1hcHBpbmc6ICR7dH0uYCk7Y29uc3QgaT1hLmNoZWNrQ29udGV4dEludGVncml0eShlKTtpZighMT09PWkuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7aS5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGUpfWApO2NvbnN0IHI9dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQodCksbz1lLnR5cGU7ci5zZXQobyxlKSx0aGlzLmxhc3RDb250ZXh0TWFwLnNldCh0LG8pLEFycmF5LmZyb20odGhpcy5pbnRlcm9wQ2xpZW50cy52YWx1ZXMoKSkuZmlsdGVyKChlPT5lLmNvbnRleHRHcm91cElkPT09dCkpLmZvckVhY2goKHQ9Pntmb3IoY29uc3RbLG5db2YgdC5jb250ZXh0SGFuZGxlcnMpYS5pc0NvbnRleHRUeXBlQ29tcGF0aWJsZShvLG4uY29udGV4dFR5cGUpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQuY2xpZW50SWRlbnRpdHksbi5oYW5kbGVySWQsZSl9KSl9fWdldEN1cnJlbnRDb250ZXh0KGUsdCl7dmFyIG47dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY3VycmVudC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IGk9dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighKG51bGw9PWk/dm9pZCAwOmkuY29udGV4dEdyb3VwSWQpKXRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGJlIGEgbWVtYmVyIG9mIGEgY29udGV4dCBncm91cCB0byBjYWxsIGdldEN1cnJlbnRDb250ZXh0XCIpO2NvbnN0e2NvbnRleHRHcm91cElkOnJ9PWksbz10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChyKSxzPXRoaXMubGFzdENvbnRleHRNYXAuZ2V0KHIpLGE9bnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuY29udGV4dFR5cGUpJiZ2b2lkIDAhPT1uP246cztyZXR1cm4gbyYmYT9vLmdldChhKTp2b2lkIDB9YXN5bmMgam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZSx0YXJnZXQ6dH0sbil7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1qb2luLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksdCl7YS5oYXNFbmRwb2ludElkKHQpJiZhd2FpdCB0aGlzLmFkZENsaWVudFRvQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSx0KTtjb25zdCBuPXRoaXMuY2hhbm5lbC5jb25uZWN0aW9ucy5maWx0ZXIoKGU9PmUudXVpZD09PXQudXVpZCYmZS5uYW1lPT09dC5uYW1lKSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgR2l2ZW4gSWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfSBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm9wIEJyb2tlci5gKTtuLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oYE1vcmUgdGhhbiBvbmUgY29ubmVjdGlvbiBmb3VuZCBmb3IgaWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfWApO2NvbnN0IGk9W107Zm9yKGNvbnN0IHQgb2YgbilpLnB1c2godGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sdCkpO2F3YWl0IFByb21pc2UuYWxsKGkpfWVsc2UgYXdhaXQgdGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sbil9YXN5bmMgYWRkQ2xpZW50VG9Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmV9LHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItYWRkLWNsaWVudC10by1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighbil0aHJvdyBuZXcgRXJyb3IoYENsaWVudCB3aXRoIElkZW50aXR5OiAke3QudXVpZH0gJHt0Lm5hbWV9IG5vdCBpbiBDbGllbnQgU3RhdGUgTWFwYCk7aWYoIXRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSkpdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0aW5nIHRvIGpvaW4gYSBjb250ZXh0IGdyb3VwIHRoYXQgZG9lcyBub3QgZXhpc3Q6ICR7ZX0uIFlvdSBtYXkgb25seSBqb2luIGV4aXN0aW5nIGNvbnRleHQgZ3JvdXBzLmApO2lmKG4uY29udGV4dEdyb3VwSWQhPT1lKXtuLmNvbnRleHRHcm91cElkPWUsYXdhaXQgYS5zZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKHQsZSk7Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChlKTtmb3IoY29uc3RbLGVdb2Ygbi5jb250ZXh0SGFuZGxlcnMpe2NvbnN0e2NvbnRleHRUeXBlOm4saGFuZGxlcklkOnJ9PWU7aWYodm9pZCAwPT09bilpLmZvckVhY2goKChlLG4pPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcih0LHIsZSl9KSk7ZWxzZSBpZihpLmhhcyhuKSl7Y29uc3QgZT1pLmdldChuKTtlJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQscixlKX19fX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKHt0YXJnZXQ6ZX0sdCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1yZW1vdmUtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLGUpe2EuaGFzRW5kcG9pbnRJZChlKSYmYXdhaXQgdGhpcy5yZW1vdmVDbGllbnRGcm9tQ29udGV4dEdyb3VwKGUpO2NvbnN0IHQ9dGhpcy5jaGFubmVsLmNvbm5lY3Rpb25zLmZpbHRlcigodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKTtpZighdC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBObyBjb25uZWN0aW9uIGZvdW5kIGZvciBnaXZlbiBJZGVudGl0eSAke2UudXVpZH0gJHtlLm5hbWV9YCk7dC5sZW5ndGg+MSYmY29uc29sZS53YXJuKGBNb3JlIHRoYW4gb25lIGNvbm5lY3Rpb24gZm91bmQgZm9yIGlkZW50aXR5ICR7ZS51dWlkfSAke2UubmFtZX1gKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIHQpbi5wdXNoKHRoaXMucmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKSk7YXdhaXQgUHJvbWlzZS5hbGwobil9ZWxzZSBhd2FpdCB0aGlzLnJlbW92ZUNsaWVudEZyb21Db250ZXh0R3JvdXAodCl9YXN5bmMgcmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXJlbW92ZS1jbGllbnQtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9dGhpcy5nZXRDbGllbnRTdGF0ZShlKTt0JiYodC5jb250ZXh0R3JvdXBJZD12b2lkIDApLGF3YWl0IGEuc2V0Q3VycmVudENvbnRleHRHcm91cEluQ2xpZW50T3B0aW9ucyhlLG51bGwpfWdldENvbnRleHRHcm91cHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY29udGV4dC1ncm91cHNcIikuY2F0Y2goKGU9Pnt9KSkscy5tYXAoKGU9Pih7Li4uZX0pKSl9Z2V0SW5mb0ZvckNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0pe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWdldC1pbmZvLWZvci1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLHRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSl9Z2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksQXJyYXkuZnJvbSh0aGlzLmludGVyb3BDbGllbnRzLnZhbHVlcygpKS5maWx0ZXIoKHQ9PnQuY29udGV4dEdyb3VwSWQ9PT1lKSkubWFwKChlPT5lLmNsaWVudElkZW50aXR5KSl9YXN5bmMgaGFuZGxlRmlyZWRJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmZpcmVJbnRlbnRcIixcImZkYzMucmFpc2VJbnRlbnRcIixcIkludGVyb3BCcm9rZXIuaGFuZGxlRmlyZWRJbnRlbnRcIix0KTt0aHJvdyBjb25zb2xlLndhcm4obiksbmV3IEVycm9yKG8uQlJPS0VSX0VSUk9SUy5maXJlSW50ZW50KX1hc3luYyBzZXRJbnRlbnRUYXJnZXQoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXNldC1pbnRlbnQtdGFyZ2V0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSksaT1gaW50ZW50LWhhbmRsZXItJHtlLm5hbWV9YDtpZihuKXtjb25zdCB0PW4uZ2V0KGkpO2lmKHQpe2lmKHQucGVuZGluZ0ludGVudHMucHVzaChlKSx0LmNsaWVudElkZW50aXR5JiZ0LmlzUmVhZHkpe2NvbnN0e2NsaWVudElkZW50aXR5OmUscGVuZGluZ0ludGVudHM6bn09dDt0cnl7Y29uc3Qgcj1uW24ubGVuZ3RoLTFdO2F3YWl0IHRoaXMuY2hhbm5lbC5kaXNwYXRjaChlLGksciksdC5wZW5kaW5nSW50ZW50cz1bXX1jYXRjaChuKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlciBmb3IgY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCksdC5pc1JlYWR5PSExfX19ZWxzZSBuLnNldChpLHtpc1JlYWR5OiExLHBlbmRpbmdJbnRlbnRzOltlXX0pfWVsc2V7dGhpcy5pbnRlbnRDbGllbnRNYXAuc2V0KHQubmFtZSxuZXcgTWFwKTtjb25zdCBuPXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldCh0Lm5hbWUpO24mJm4uc2V0KGkse2lzUmVhZHk6ITEscGVuZGluZ0ludGVudHM6W2VdfSl9fWFzeW5jIGhhbmRsZUluZm9Gb3JJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRcIixcImZkYzMuZmluZEludGVudFwiLFwiSW50ZXJvcEJyb2tlci5oYW5kbGVJbmZvRm9ySW50ZW50XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudCl9YXN5bmMgaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsXCJmZGMzLmZpbmRJbnRlbnRzQnlDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQpfWFzeW5jIGhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZmlyZUludGVudEZvckNvbnRleHRcIixcImZkYzMucmFpc2VJbnRlbnRGb3JDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dFwiLHQpO3Rocm93IGNvbnNvbGUud2FybihuKSxuZXcgRXJyb3Ioby5CUk9LRVJfRVJST1JTLmZpcmVJbnRlbnRGb3JDb250ZXh0KX1kZWNvcmF0ZVNuYXBzaG90KGUpe3JldHVybnsuLi5lLGludGVyb3BTbmFwc2hvdERldGFpbHM6e2NvbnRleHRHcm91cFN0YXRlczp0aGlzLmdldENvbnRleHRHcm91cFN0YXRlcygpfX19YXBwbHlTbmFwc2hvdChlLHQpe3ZhciBuO2NvbnN0IGk9bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuaW50ZXJvcFNuYXBzaG90RGV0YWlscyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY29udGV4dEdyb3VwU3RhdGVzO2kmJigobnVsbD09dD92b2lkIDA6dC5jbG9zZUV4aXN0aW5nV2luZG93cyl8fHRoaXMudXBkYXRlRXhpc3RpbmdDbGllbnRzKGkpLHRoaXMucmVoeWRyYXRlQ29udGV4dEdyb3VwU3RhdGVzKGkpKX11cGRhdGVFeGlzdGluZ0NsaWVudHMoZSl7dGhpcy5pbnRlcm9wQ2xpZW50cy5mb3JFYWNoKCh0PT57Y29uc3R7Y2xpZW50SWRlbnRpdHk6bixjb250ZXh0R3JvdXBJZDppLGNvbnRleHRIYW5kbGVyczpyfT10O2lmKGkpe2NvbnN0IHQ9ZVtpXTtmb3IoY29uc3RbLGVdb2YgT2JqZWN0LmVudHJpZXModCkpci5mb3JFYWNoKCh0PT57Y29uc3R7aGFuZGxlcklkOmksY29udGV4dFR5cGU6cn09dDthLmlzQ29udGV4dFR5cGVDb21wYXRpYmxlKGUudHlwZSxyKSYmdGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLGksZSl9KSl9fSkpfWdldENvbnRleHRHcm91cFN0YXRlcygpe3JldHVybiBhLnRvT2JqZWN0KHRoaXMuY29udGV4dEdyb3Vwc0J5SWQpfXJlaHlkcmF0ZUNvbnRleHRHcm91cFN0YXRlcyhlKXtjb25zdCB0PU9iamVjdC5lbnRyaWVzKGUpO2Zvcihjb25zdFtlLG5db2YgdCl7Y29uc3QgdD1PYmplY3QuZW50cmllcyhuKTtmb3IoY29uc3RbbixpXW9mIHQpdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXMoZSk/dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoZSkuc2V0KG4saSk6Y29uc29sZS53YXJuKGBBdHRlbXB0aW5nIHRvIHNldCBhIGNvbnRleHQgZ3JvdXAgdGhhdCBpc24ndCBpbiB0aGUgY29udGV4dCBncm91cCBtYXBwaW5nLiBTa2lwcGluZyBjb250ZXh0IGdyb3VwIHJlaHlkcmF0aW9uIGZvcjogJHtlfWApfX1jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQoe2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LG4pe2NvbnN0IGk9e2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LHI9dGhpcy5nZXRDbGllbnRTdGF0ZShuKTtpZihudWxsPT1yfHxyLmNvbnRleHRIYW5kbGVycy5zZXQodCxpKSxyJiZyLmNvbnRleHRHcm91cElkKXtjb25zdHtjb250ZXh0R3JvdXBJZDppfT1yLG89dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoaSk7aWYodm9pZCAwPT09ZSlvLmZvckVhY2goKChlLGkpPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLHQsZSl9KSk7ZWxzZSBpZihvLmhhcyhlKSl7Y29uc3QgaT1vLmdldChlKTtpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKG4sdCxpKX19fWFzeW5jIGludGVudEhhbmRsZXJSZWdpc3RlcmVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm59PWUsaT10aGlzLmludGVudENsaWVudE1hcC5nZXQodC5uYW1lKSxyPW51bGw9PWk/dm9pZCAwOmkuZ2V0KG4pO2lmKGkpaWYocil7Y29uc3R7cGVuZGluZ0ludGVudHM6ZX09cjtyLmNsaWVudElkZW50aXR5PXQsci5pc1JlYWR5PSEwO3RyeXtpZihlLmxlbmd0aD4wKXtjb25zdCBpPWVbZS5sZW5ndGgtMV07YXdhaXQgdGhpcy5jaGFubmVsLmRpc3BhdGNoKHQsbixpKSxyLnBlbmRpbmdJbnRlbnRzPVtdfX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlcjogJHtufSBmb3IgY2xpZW50ICR7dC51dWlkfS8ke3QubmFtZX0vJHt0LmVuZHBvaW50SWR9YCl9fWVsc2UgaS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSk7ZWxzZXt0aGlzLmludGVudENsaWVudE1hcC5zZXQodC5uYW1lLG5ldyBNYXApO2NvbnN0IGU9dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSk7ZSYmZS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSl9fWludm9rZUNvbnRleHRIYW5kbGVyKGUsdCxuKXt0aGlzLmNoYW5uZWwuZGlzcGF0Y2goZSx0LG4pLmNhdGNoKChpPT57Y29uc29sZS5lcnJvcihgRXJyb3IgaW52b2tpbmcgY29udGV4dCBoYW5kbGVyICR7dH0gZm9yIGNvbnRleHQgdHlwZSAke24udHlwZX0gaW4gY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCxpKX0pKX1yZW1vdmVDb250ZXh0SGFuZGxlcih7aGFuZGxlcklkOmV9LHQpe2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtuJiZuLmNvbnRleHRIYW5kbGVycy5kZWxldGUoZSl9aGFuZGxlSm9pblNlc3Npb25Db250ZXh0R3JvdXAoe3Nlc3Npb25Db250ZXh0R3JvdXBJZDplfSx0KXt0cnl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGpvaW4gc2Vzc2lvbiBjb250ZXh0IGdyb3VwOiBtdXN0IHNwZWNpZnkgZ3JvdXAgaWQuXCIpO2NvbnN0IG49dGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmdldChlKTtpZihuKW4ucmVnaXN0ZXJOZXdDbGllbnQodCk7ZWxzZXtjb25zdCBuPW5ldyByLmRlZmF1bHQodGhpcy5jaGFubmVsLGUpO24ucmVnaXN0ZXJOZXdDbGllbnQodCksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLnNldChlLG4pfXJldHVybntoYXNDb25mbGljdDp0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyhlKX19Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGUpfX1nZXRDbGllbnRTdGF0ZShlKXtyZXR1cm4gdGhpcy5pbnRlcm9wQ2xpZW50cy5nZXQoZS5lbmRwb2ludElkKX1zdGF0aWMgdG9PYmplY3QoZSl7Y29uc3QgdD1PYmplY3QuZnJvbUVudHJpZXMoZSksbj17fTtyZXR1cm4gT2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoKFtlLHRdKT0+e2NvbnN0IGk9T2JqZWN0LmZyb21FbnRyaWVzKHQpO25bZV09aX0pKSxufXN0YXRpYyBjaGVja0NvbnRleHRJbnRlZ3JpdHkoZSl7aWYoIWUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiTm8gY29udGV4dCBzdXBwbGllZFwifTtpZihcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IG11c3QgYmUgYW4gT2JqZWN0XCJ9O2lmKCFlLnR5cGUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBtdXN0IGhhdmUgYSB0eXBlIHByb3BlcnR5XCJ9O2lmKGUuaWQmJlwib2JqZWN0XCIhPXR5cGVvZiBlLmlkKXJldHVybntpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgaWQgbXVzdCBiZSBhbiBPYmplY3QgcG9wdWxhdGVkIHdpdGgga2V5LXZhbHVlIGlkZW50aWZpZXJzIChpZiBzZXQpXCJ9O2lmKGUuaWQpe2NvbnN0e2lkOnR9PWUsbj1PYmplY3Qua2V5cyh0KTtsZXQgaT0hMTtpZighbi5sZW5ndGgpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGtleS12YWx1ZSBpZGVudGlmaWVyXCJ9O2lmKG4uZm9yRWFjaCgoZT0+e1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgdFtlXXx8KGk9ITApfSkpLGkpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBrZXktdmFsdWUgaWRlbnRpZmllcnMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wifX1yZXR1cm4gZS5uYW1lJiZcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lP3tpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgbmFtZSBtdXN0IGJlIG9mIHN0cmluZyB0eXBlIChpZiBzZXQpXCJ9Ontpc1ZhbGlkOiEwfX1zdGF0aWMgaGFzRW5kcG9pbnRJZChlKXtyZXR1cm4gdm9pZCAwIT09ZS5lbmRwb2ludElkfXN0YXRpYyBpc0NvbnRleHRUeXBlQ29tcGF0aWJsZShlLHQpe3JldHVybiB2b2lkIDA9PT10fHxlPT09dH1zZXRDb250ZXh0R3JvdXBNYXAoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdldENvbnRleHRHcm91cHMoKSl0aGlzLmNvbnRleHRHcm91cHNCeUlkLnNldChlLmlkLG5ldyBNYXApfXN0YXRpYyBhc3luYyBzZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKGUsdCl7Y29uc3Qgbj1hd2FpdCBmaW4uU3lzdGVtLmdldEVudGl0eUluZm8oZS51dWlkLGUubmFtZSk7bGV0IGk7XCJ2aWV3XCI9PT1uLmVudGl0eVR5cGU/aT1hd2FpdCBmaW4uVmlldy53cmFwKGUpOlwid2luZG93XCI9PT1uLmVudGl0eVR5cGUmJihpPWF3YWl0IGZpbi5XaW5kb3cud3JhcChlKSksaT9hd2FpdCBpLnVwZGF0ZU9wdGlvbnMoe2ludGVyb3A6e2N1cnJlbnRDb250ZXh0R3JvdXA6dH19KTpjb25zb2xlLndhcm4oYFNldHRpbmcgQ3VycmVudCBDb250ZXh0IEdyb3VwOiBFbnRpdHkgd2l0aCBpZGVudGl0eSAke2UudXVpZH0sICR7ZS5uYW1lfSBpcyBub3QgYSB3aW5kb3cgb3Igdmlldy4gSXQgaXMgYSAke24uZW50aXR5VHlwZX0gaW5zdGVhZC5gKX13aXJlQ2hhbm5lbChlKXtlLm9uQ29ubmVjdGlvbigoKGUsdCk9PntpZighdGhpcy5pc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCkpdGhyb3cgbmV3IEVycm9yKGBDb25uZWN0aW9uIG5vdCBhdXRob3JpemVkIGZvciAke2UudXVpZH0sICR7ZS5uYW1lfWApO2lmKCFlLmVuZHBvaW50SWQpdGhyb3cgbmV3IEVycm9yKFwiVmVyc2lvbiB0b28gb2xkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBJbnRlcm9wLiBQbGVhc2UgdXBncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYSBtb3JlIHJlY2VudCB2ZXJzaW9uLlwiKTtjb25zdCBuPXtjb250ZXh0R3JvdXBJZDp2b2lkIDAsY29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZX07KG51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCkmJnRoaXMuY29udGV4dEdyb3Vwc0J5SWQuaGFzKHQuY3VycmVudENvbnRleHRHcm91cCkmJihuLmNvbnRleHRHcm91cElkPW51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCksdGhpcy5pbnRlcm9wQ2xpZW50cy5zZXQoZS5lbmRwb2ludElkLG4pfSkpLGUub25EaXNjb25uZWN0aW9uKChlPT57dGhpcy5pbnRlcm9wQ2xpZW50cy5kZWxldGUoZS5lbmRwb2ludElkKTtjb25zdCB0PXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldChlLm5hbWUpO3QmJmUudXVpZD09PWZpbi5tZS5pZGVudGl0eS51dWlkJiZ0LmZvckVhY2goKGU9PntlLmlzUmVhZHk9ITF9KSksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmZvckVhY2goKHQ9Pnt0Lm9uRGlzY29ubmVjdGlvbihlKX0pKX0pKSxlLmJlZm9yZUFjdGlvbigoKGUsdCxuKT0+e2lmKCF0aGlzLmlzQWN0aW9uQXV0aG9yaXplZChlLHQsbikpdGhyb3cgbmV3IEVycm9yKGBBY3Rpb24gKCR7ZX0pIG5vdCBhdXRob3JpemVkIGZvciAke24udXVpZH0sICR7bi5uYW1lfWApO2NvbnNvbGUubG9nKGUsdCxuKX0pKSxlLmFmdGVyQWN0aW9uKGNvbnNvbGUubG9nKSxlLnJlZ2lzdGVyKFwic2V0Q29udGV4dFwiLHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZmlyZUludGVudFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImdldEN1cnJlbnRDb250ZXh0XCIsdGhpcy5nZXRDdXJyZW50Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudFwiLHRoaXMuaGFuZGxlSW5mb0ZvckludGVudC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHRcIix0aGlzLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnRGb3JDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRDb250ZXh0R3JvdXBzXCIsdGhpcy5nZXRDb250ZXh0R3JvdXBzLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJqb2luQ29udGV4dEdyb3VwXCIsdGhpcy5qb2luQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIsdGhpcy5yZW1vdmVGcm9tQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXBcIix0aGlzLmdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckNvbnRleHRHcm91cFwiLHRoaXMuZ2V0SW5mb0ZvckNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImludGVudEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5pbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwicmVtb3ZlQ29udGV4dEhhbmRsZXJcIix0aGlzLnJlbW92ZUNvbnRleHRIYW5kbGVyLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJzZXNzaW9uQ29udGV4dEdyb3VwOmNyZWF0ZUlmTmVlZGVkXCIsdGhpcy5oYW5kbGVKb2luU2Vzc2lvbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKX1hc3luYyBpc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtY29ubmVjdGlvbi1hdXRob3JpemVkXCIpLmNhdGNoKChlPT57fSkpLCEwfWFzeW5jIGlzQWN0aW9uQXV0aG9yaXplZChlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtYWN0aW9uLWF1dGhvcml6ZWRcIikuY2F0Y2goKGU9Pnt9KSksITB9fXQuSW50ZXJvcEJyb2tlcj1hfSw3MTM4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJvcENsaWVudD12b2lkIDA7Y29uc3QgYT1uKDk2NTkpLGM9big4MjIpLGQ9bigxNzg3KTtjbGFzcyBoIGV4dGVuZHMgYS5CYXNle2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLG8odGhpcyxyLG5ldyBNYXApLG8odGhpcyxpLHRoaXMud2lyZS5lbnZpcm9ubWVudC53aGVuUmVhZHkoKS50aGVuKCgoKT0+dGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoYGludGVyb3AtYnJva2VyLSR7dH1gLHtwYXlsb2FkOm59KSkpKX1hc3luYyBzZXRDb250ZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXNldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwic2V0Q29udGV4dFwiLHtjb250ZXh0OmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtYWRkLWNvbnRleHQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKTtsZXQgcjt0PyhyPWBpbnZva2VDb250ZXh0SGFuZGxlci0ke3R9LSR7ZC5nZW5lcmF0ZUlkKCl9YCxjb25zb2xlLndhcm4oYFdhcm5pbmc6IEJ5IHByb3ZpZGluZyBhIGNvbnRleHRUeXBlICgke3R9KSwgeW91IGFyZSB1c2luZyB0aGUgZXhwZXJpbWVudGFsIGFkZENvbnRleHRIYW5kbGVyLiBUbyBhdm9pZCBpc3N1ZXMsIG1ha2Ugc3VyZSB5b3UgYXJlIGFkZGluZyB5b3VyIGNvbnRleHQgaGFuZGxlcnMgYXQgdGhlIHRvcCBsZXZlbCBpbiB5b3VyIGFwcGxpY2F0aW9uLmApKTpyPVwiaW52b2tlQ29udGV4dEhhbmRsZXJcIjtjb25zdCBvPWQud3JhcENvbnRleHRIYW5kbGVyKGUscik7cmV0dXJuIG4ucmVnaXN0ZXIocixvKSxhd2FpdCBuLmRpc3BhdGNoKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIse2hhbmRsZXJJZDpyLGNvbnRleHRUeXBlOnR9KSx7dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpLGF3YWl0IG4uZGlzcGF0Y2goXCJyZW1vdmVDb250ZXh0SGFuZGxlclwiLHtoYW5kbGVySWQ6cn0pfX19YXN5bmMgZ2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1jb250ZXh0LWdyb3Vwc1wiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldENvbnRleHRHcm91cHNcIil9YXN5bmMgam9pbkNvbnRleHRHcm91cChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtam9pbi1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIGNvbnRleHRHcm91cElkIHNwZWNpZmllZCBmb3Igam9pbkNvbnRleHRHcm91cC5cIik7cmV0dXJuIG4uZGlzcGF0Y2goXCJqb2luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmUsdGFyZ2V0OnR9KX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXJlbW92ZS1mcm9tLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIse3RhcmdldDplfSl9YXN5bmMgZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAuXCIpO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmV9KX1hc3luYyBnZXRJbmZvRm9yQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRJbmZvRm9yQ29udGV4dEdyb3VwLlwiKTtyZXR1cm4gdC5kaXNwYXRjaChcImdldEluZm9Gb3JDb250ZXh0R3JvdXBcIix7Y29udGV4dEdyb3VwSWQ6ZX0pfWFzeW5jIGZpcmVJbnRlbnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50XCIsZSl9YXN5bmMgcmVnaXN0ZXJJbnRlbnRIYW5kbGVyKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1yZWdpc3Rlci1pbnRlbnQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSxyPWBpbnRlbnQtaGFuZGxlci0ke3R9YCxvPXRoaXMud3JhcEludGVudEhhbmRsZXIoZSxyKTt0cnl7YXdhaXQgbi5yZWdpc3RlcihyLG8pLGF3YWl0IG4uZGlzcGF0Y2goXCJpbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZFwiLHtoYW5kbGVySWQ6cn0pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZWdpc3RlciBpbnRlbnQgaGFuZGxlclwiKX1yZXR1cm57dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpfX19YXN5bmMgZ2V0Q3VycmVudENvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWN1cnJlbnQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEN1cnJlbnRDb250ZXh0XCIse2NvbnRleHRUeXBlOmV9KX1hc3luYyBnZXRJbmZvRm9ySW50ZW50KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1pbmZvLWZvci1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJnZXRJbmZvRm9ySW50ZW50XCIsZSl9YXN5bmMgZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWludGVudHMtYnktY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsZSl9YXN5bmMgZmlyZUludGVudEZvckNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnQtZm9yLWNvbnRleHRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLGUpfWFzeW5jIGpvaW5TZXNzaW9uQ29udGV4dEdyb3VwKGUpe3RyeXtjb25zdCB0PXModGhpcyxyKS5nZXQoZSk7aWYodClyZXR1cm4gdC5nZXRVc2VySW5zdGFuY2UoKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSx7aGFzQ29uZmxpY3Q6b309YXdhaXQgbi5kaXNwYXRjaChcInNlc3Npb25Db250ZXh0R3JvdXA6Y3JlYXRlSWZOZWVkZWRcIix7c2Vzc2lvbkNvbnRleHRHcm91cElkOmV9KTtvJiZjb25zb2xlLndhcm4oYEEgKG5vbi1zZXNzaW9uKSBjb250ZXh0IGdyb3VwIHdpdGggdGhlIG5hbWUgXCIke2V9XCIgYWxyZWFkeSBleGlzdHMuIElmIHlvdSBhcmUgdHJ5aW5nIHRvIGpvaW4gYSBDb250ZXh0IEdyb3VwLCBjYWxsIGpvaW5Db250ZXh0R3JvdXAgaW5zdGVhZC5gKTtjb25zdCBhPW5ldyBjLmRlZmF1bHQodGhpcy53aXJlLHModGhpcyxpKSxlKTtyZXR1cm4gcyh0aGlzLHIpLnNldChlLGEpLGEuZ2V0VXNlckluc3RhbmNlKCl9Y2F0Y2godCl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIHRyeWluZyB0byBjcmVhdGUgU2Vzc2lvbiBDb250ZXh0IEdyb3VwIHdpdGggaWQgXCIke2V9XCI6ICR7dH1gKSx0fX13cmFwSW50ZW50SGFuZGxlcihlLHQpe3JldHVybiBhc3luYyBuPT57dHJ5e2F3YWl0IGUobil9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIGJ5IGhhbmRsZXIgJHt0fTogJHtlfWApLGV9fX19dC5JbnRlcm9wQ2xpZW50PWgsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3MTE1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oODcwNik7dC5kZWZhdWx0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcm92aWRlcj1lLHRoaXMuaWQ9dCx0aGlzLmxhc3RDb250ZXh0PXZvaWQgMCx0aGlzLmNvbnRleHRHcm91cE1hcD1uZXcgTWFwLHRoaXMuY2xpZW50cz1uZXcgTWFwLHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKX1yZWdpc3Rlckxpc3RlbmVycygpe3RoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6Z2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLmdldEN1cnJlbnRDb250ZXh0LmJpbmQodGhpcykpLHRoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6c2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLnNldENvbnRleHQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyQWRkZWQtJHt0aGlzLmlkfWAsdGhpcy5oYW5kbGVyQWRkZWQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyUmVtb3ZlZC0ke3RoaXMuaWR9YCx0aGlzLmhhbmRsZXJSZW1vdmVkLmJpbmQodGhpcykpfWdldEN1cnJlbnRDb250ZXh0KGUpe3JldHVybiBlLnR5cGU/dGhpcy5jb250ZXh0R3JvdXBNYXAuZ2V0KGUudHlwZSk6dGhpcy5sYXN0Q29udGV4dH1zZXRDb250ZXh0KGUsdCl7Y29uc3R7Y29udGV4dDpufT1lLHI9aS5JbnRlcm9wQnJva2VyLmNoZWNrQ29udGV4dEludGVncml0eShuKTtpZighMT09PXIuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7ci5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2lmKCF0aGlzLmdldENsaWVudFN0YXRlKHQpKXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIFNlc3Npb24gQ2xpZW50IFN0YXRlIE1hcGApO3RoaXMuY29udGV4dEdyb3VwTWFwLnNldChuLnR5cGUsbiksdGhpcy5sYXN0Q29udGV4dD1uLEFycmF5LmZyb20odGhpcy5jbGllbnRzLnZhbHVlcygpKS5mb3JFYWNoKChlPT57dmFyIHQ7bnVsbD09PSh0PWUuY29udGV4dEhhbmRsZXJzLmdldChuLnR5cGUpKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKCh0PT57dGhpcy5wcm92aWRlci5kaXNwYXRjaChlLmNsaWVudElkZW50aXR5LHQsbil9KSksZS5nbG9iYWxIYW5kbGVyJiZ0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKGUuY2xpZW50SWRlbnRpdHksZS5nbG9iYWxIYW5kbGVyLG4pfSkpfWdldENsaWVudFN0YXRlKGUpe3JldHVybiB0aGlzLmNsaWVudHMuZ2V0KGUuZW5kcG9pbnRJZCl9aGFuZGxlckFkZGVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm4sY29udGV4dFR5cGU6aX09ZSxyPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgd2l0aCBJZGVudGl0eTogJHt0LnV1aWR9ICR7dC5uYW1lfSBub3QgaW4gQ2xpZW50IFN0YXRlIE1hcGApO2lmKGkpe2NvbnN0IGU9ci5jb250ZXh0SGFuZGxlcnMuZ2V0KGkpfHxbXTtyLmNvbnRleHRIYW5kbGVycy5zZXQoaSxbLi4uZSxuXSk7Y29uc3Qgbz10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoaSk7byYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4sbyl9ZWxzZSByLmdsb2JhbEhhbmRsZXI9bixbLi4udGhpcy5jb250ZXh0R3JvdXBNYXAua2V5cygpXS5mb3JFYWNoKChlPT57Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoZSk7aSYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4saSl9KSl9aGFuZGxlclJlbW92ZWQoZSx0KXtjb25zdHtoYW5kbGVySWQ6bn09ZSxpPXRoaXMuY2xpZW50cy5nZXQodC5lbmRwb2ludElkKTtpPyhBcnJheS5mcm9tKGkuY29udGV4dEhhbmRsZXJzKS5mb3JFYWNoKCgoWyxlXSk9Pntjb25zdCB0PWUuaW5kZXhPZihuKTt0Pi0xJiZlLnNwbGljZSh0LDEpfSkpLGkuZ2xvYmFsSGFuZGxlcj09PW4mJihpLmdsb2JhbEhhbmRsZXI9dm9pZCAwKSk6Y29uc29sZS53YXJuKGBUcnlpbmcgdG8gcmVtb3ZlIGEgaGFuZGxlciBmcm9tIGEgY2xpZW50IHRoYXQgaXNuJ3QgbWFwcGVkLiBoYW5kbGVySWQ6ICR7bn0uIGNsaWVudElkZW50aXR5OiAke3R9YCl9cmVnaXN0ZXJOZXdDbGllbnQoZSl7aWYoIXRoaXMuY2xpZW50cy5oYXMoZS5lbmRwb2ludElkKSl7Y29uc3QgdD17Y29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZSxnbG9iYWxIYW5kbGVyOnZvaWQgMH07dGhpcy5jbGllbnRzLnNldChlLmVuZHBvaW50SWQsdCl9fW9uRGlzY29ubmVjdGlvbihlKXt0aGlzLmNsaWVudHMuZGVsZXRlKGUuZW5kcG9pbnRJZCl9fX0sODIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBzPW4oOTY1OSksYT1uKDE3ODcpO2NsYXNzIGMgZXh0ZW5kcyBzLkJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUpLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmlkPW4scih0aGlzLGksdCl9YXN5bmMgc2V0Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpzZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCxjb250ZXh0OmV9KX1hc3luYyBnZXRDdXJyZW50Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1nZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpnZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCx0eXBlOmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1zZXNzaW9uLWNvbnRleHQtZ3JvdXAtYWRkLWhhbmRsZXJcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCBvKHRoaXMsaSk7bGV0IHI7cmV0dXJuIHI9dD9gc2Vzc2lvbkNvbnRleHRIYW5kbGVyOmludm9rZS0ke3RoaXMuaWR9LSR7dH0tJHthLmdlbmVyYXRlSWQoKX1gOmBzZXNzaW9uQ29udGV4dEhhbmRsZXI6aW52b2tlLSR7dGhpcy5pZH1gLG4ucmVnaXN0ZXIocixhLndyYXBDb250ZXh0SGFuZGxlcihlLHIpKSxuLmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJBZGRlZC0ke3RoaXMuaWR9YCx7aGFuZGxlcklkOnIsY29udGV4dFR5cGU6dH0pLHt1bnN1YnNjcmliZTphd2FpdCB0aGlzLmNyZWF0ZVVuc3Vic2NyaWJlQ2Iocil9fWFzeW5jIGNyZWF0ZVVuc3Vic2NyaWJlQ2IoZSl7Y29uc3QgdD1hd2FpdCBvKHRoaXMsaSk7cmV0dXJuIGFzeW5jKCk9Pnt0LnJlbW92ZShlKSxhd2FpdCB0LmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJSZW1vdmVkLSR7dGhpcy5pZH1gLHtoYW5kbGVySWQ6ZX0pfX1nZXRVc2VySW5zdGFuY2UoKXtyZXR1cm57aWQ6dGhpcy5pZCxzZXRDb250ZXh0OmEud3JhcEluVHJ5Q2F0Y2godGhpcy5zZXRDb250ZXh0LmJpbmQodGhpcyksXCJGYWlsZWQgdG8gc2V0IGNvbnRleHQ6IFwiKSxnZXRDdXJyZW50Q29udGV4dDphLndyYXBJblRyeUNhdGNoKHRoaXMuZ2V0Q3VycmVudENvbnRleHQuYmluZCh0aGlzKSxcIkZhaWxlZCB0byBnZXQgY29udGV4dDogXCIpLGFkZENvbnRleHRIYW5kbGVyOmEud3JhcEluVHJ5Q2F0Y2godGhpcy5hZGRDb250ZXh0SGFuZGxlci5iaW5kKHRoaXMpLFwiRmFpbGVkIHRvIGFkZCBjb250ZXh0IGhhbmRsZXI6IFwiKX19fXQuZGVmYXVsdD1jLGk9bmV3IFdlYWtNYXB9LDg3MDY6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyOTc3KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig3MTM4KSx0KSxyKG4oMjA1NyksdCl9LDE3ODc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkJST0tFUl9FUlJPUlM9dC5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZz10LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcj10LndyYXBDb250ZXh0SGFuZGxlcj10LndyYXBJblRyeUNhdGNoPXQuZ2VuZXJhdGVJZD12b2lkIDAsdC5nZW5lcmF0ZUlkPSgpPT5gJHtNYXRoLnJhbmRvbSgpfSR7RGF0ZS5ub3coKX1gLHQud3JhcEluVHJ5Q2F0Y2g9KGUsdCk9PiguLi5uKT0+e3RyeXtyZXR1cm4gZSguLi5uKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoKHR8fFwiXCIpK2UpfX0sdC53cmFwQ29udGV4dEhhbmRsZXI9KGUsdCk9PmFzeW5jIG49Pnt0cnl7YXdhaXQgZShuKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKGBFcnJvciB0aHJvd24gYnkgaGFuZGxlciAke3R9IGZvciBjb250ZXh0IHR5cGUgJHtuLnR5cGV9OiAke2V9YCksZX19LHQuZ2VuZXJhdGVPdmVycmlkZUVycm9yPShlLHQpPT5gWW91IGhhdmUgdHJpZWQgdG8gdG8gdXNlICR7ZX0gYnV0ICR7dH0gaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gaW4gdGhlIEludGVyb3AgQnJva2VyLiBQbGVhc2Ugb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbi4gUmVmZXIgdG8gb3VyIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mby5gLHQuZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmc9KGUsdCxuLGkpPT57Y29uc3R7dXVpZDpyLG5hbWU6b309aTtyZXR1cm5gRW50aXR5IHdpdGggaWRlbnRpdHk6ICR7cn0vJHtvfSBoYXMgY2FsbGVkICR7ZX0gb3IgJHt0fSBidXQgJHtufSBoYXMgbm90IGJlZW4gb3ZlcnJpZGRlbi5gfSx0LkJST0tFUl9FUlJPUlM9e2ZpcmVJbnRlbnQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJmaXJlSW50ZW50XCIsXCJoYW5kbGVGaXJlZEludGVudFwiKSxmaXJlSW50ZW50Rm9yQ29udGV4dDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImZpcmVJbnRlbnRGb3JDb250ZXh0XCIsXCJoYW5kbGVGaXJlZEludGVudEZvckNvbnRleHRcIiksZ2V0SW5mb0ZvckludGVudDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImdldEluZm9Gb3JJbnRlbnRcIixcImhhbmRsZUluZm9Gb3JJbnRlbnRcIiksZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dFwiLFwiaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHRcIil9fSw5NjQxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1lPXQuZ2V0QmFzZU1lPXQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2U9dm9pZCAwO2NvbnN0IGk9big0MTY5KSxyPW4oNjcyMCksbz1uKDQ5OTcpO2Z1bmN0aW9uIHMoZSx0LG4pe3JldHVybntpc1ZpZXc6XCJ2aWV3XCI9PT1lLGlzV2luZG93Olwid2luZG93XCI9PT1lLGlzRnJhbWU6XCJpZnJhbWVcIj09PWUsaXNFeHRlcm5hbDpcImV4dGVybmFsIGNvbm5lY3Rpb25cIj09PWUsdXVpZDp0LG5hbWU6bixlbnRpdHlUeXBlOmV9fXQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2U9XCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIsdC5nZXRCYXNlTWU9cyx0LmdldE1lPWZ1bmN0aW9uKGUpe2NvbnN0e3V1aWQ6bixuYW1lOmEsZW50aXR5VHlwZTpjfT1lLm1lLGQ9e3NldENvbnRleHQoKXt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9LGFkZENvbnRleHRIYW5kbGVyKCl7dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxnZXRDb250ZXh0R3JvdXBzKCl7dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxqb2luQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxyZW1vdmVGcm9tQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9LGdldEluZm9Gb3JDb250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9fSxoPVwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIixsPXtzZXRDb250ZXh0KCl7dGhyb3cgbmV3IEVycm9yKGgpfSxhZGRDb250ZXh0SGFuZGxlcigpe3Rocm93IG5ldyBFcnJvcihoKX0sZ2V0Q29udGV4dEdyb3Vwcygpe3Rocm93IG5ldyBFcnJvcihoKX0sam9pbkNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihoKX0scmVtb3ZlRnJvbUNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihoKX0sZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKGgpfSxnZXRJbmZvRm9yQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKGgpfX0sdT17ZXZlbnROYW1lczooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX0sZW1pdDooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX0sbGlzdGVuZXJzOigpPT57dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxsaXN0ZW5lckNvdW50OigpPT57dGhyb3cgbmV3IEVycm9yKHQuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfSxvbjooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX0sYWRkTGlzdGVuZXI6KCk9Pnt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9LG9uY2U6KCk9Pnt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9LHByZXBlbmRMaXN0ZW5lcjooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX0scHJlcGVuZE9uY2VMaXN0ZW5lcjooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX0scmVtb3ZlTGlzdGVuZXI6KCk9Pnt0aHJvdyBuZXcgRXJyb3IodC5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9LHJlbW92ZUFsbExpc3RlbmVyczooKT0+e3Rocm93IG5ldyBFcnJvcih0LmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX19O3N3aXRjaChjKXtjYXNlXCJ2aWV3XCI6cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IGkuVmlldyhlLHt1dWlkOm4sbmFtZTphfSkscyhjLG4sYSkse2ludGVyb3A6bCxpc09wZW5GaW46ITB9KTtjYXNlXCJ3aW5kb3dcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgby5fV2luZG93KGUse3V1aWQ6bixuYW1lOmF9KSxzKGMsbixhKSx7aW50ZXJvcDpsLGlzT3BlbkZpbjohMH0pO2Nhc2VcImlmcmFtZVwiOnJldHVybiBPYmplY3QuYXNzaWduKG5ldyByLl9GcmFtZShlLHt1dWlkOm4sbmFtZTphfSkscyhjLG4sYSkse2ludGVyb3A6bCxpc09wZW5GaW46ITB9KTtkZWZhdWx0OnJldHVybnsuLi5zKGMsbixhKSwuLi51LGludGVyb3A6ZCxpc09wZW5GaW46ITF9fX19LDcyODM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNjM5NCksbz1uKDk4NzIpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl9jaGFubmVsPXQsdGhpcy5faW5pdGlhbGl6ZXI9KC4uLmUpPT50aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0UHJvdmlkZXJJbml0aWFsaXplcigpLnRoZW4oKHQ9PnQodGhpcy53aXJlLmVudmlyb25tZW50KSguLi5lKSkpLHRoaXMuTGF5b3V0PW5ldyByLkxheW91dE1vZHVsZSh0aGlzLndpcmUpfWFzeW5jIGluaXQoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLm92ZXJyaWRlQ2FsbGJhY2ssbj1hd2FpdCB0aGlzLmZpbi5JbnRlcm9wLmluaXQodGhpcy5maW4ubWUudXVpZCxudWxsPT1lP3ZvaWQgMDplLmludGVyb3BPdmVycmlkZSk7cmV0dXJuIHdpbmRvdy5pbnRlcm9wQnJva2VyPW4sdGhpcy5faW5pdGlhbGl6ZXIodCxuKX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uUGxhdGZvcm0oe3V1aWQ6ZS51dWlkfSx0aGlzLl9jaGFubmVsKX13cmFwU3luYyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uUGxhdGZvcm0oe3V1aWQ6ZS51dWlkfSx0aGlzLl9jaGFubmVsKX1hc3luYyBnZXRDdXJyZW50KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy53cmFwKHt1dWlkOnRoaXMud2lyZS5tZS51dWlkfSl9Z2V0Q3VycmVudFN5bmMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtY3VycmVudC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcFN5bmMoe3V1aWQ6dGhpcy53aXJlLm1lLnV1aWR9KX1zdGFydChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zdGFydFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgUHJvbWlzZSgoYXN5bmModCxuKT0+e3RyeXtjb25zdHt1dWlkOm59PWUsaT1hd2FpdCB0aGlzLmZpbi5BcHBsaWNhdGlvbi5fY3JlYXRlKHsuLi5lLGlzUGxhdGZvcm1Db250cm9sbGVyOiEwfSk7aS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT50KHRoaXMud3JhcFN5bmMoe3V1aWQ6bn0pKSkpLGkuX3J1bih7dXVpZDpufSl9Y2F0Y2goZSl7bihlKX19KSl9c3RhcnRGcm9tTWFuaWZlc3QoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zdGFydC1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpLG5ldyBQcm9taXNlKChhc3luYyhuLGkpPT57dHJ5e2NvbnN0IGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uX2NyZWF0ZUZyb21NYW5pZmVzdChlKTtpLm9uY2UoXCJwbGF0Zm9ybS1hcGktcmVhZHlcIiwoKCk9Pm4odGhpcy53cmFwU3luYyh7dXVpZDppLmlkZW50aXR5LnV1aWR9KSkpKSxpLl9ydW4odCl9Y2F0Y2goZSl7aShlKX19KSl9fXQuZGVmYXVsdD1zfSw5ODcyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBsYXRmb3JtPXZvaWQgMDtjb25zdCBvPW4oOTY1OSkscz1uKDQ5OTkpLGE9bmV3IE1hcDtjbGFzcyBjIGV4dGVuZHMgby5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQud2lyZSxcImFwcGxpY2F0aW9uXCIsZS51dWlkKSx0aGlzLmdldENsaWVudD1lPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtY2xpZW50XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1lfHx0aGlzLmlkZW50aXR5LHt1dWlkOm59PXQ7aWYoIWEuaGFzKG4pKXtjb25zdCBlPXIodGhpcyxpKS5jYWxsKHRoaXMsbik7YS5zZXQobixlKX1yZXR1cm4gYS5nZXQobil9LGkuc2V0KHRoaXMsKGFzeW5jIGU9Pnt0cnl7Y29uc3QgdD1gY3VzdG9tLWZyYW1lLSR7ZX1gLG49YXdhaXQgdGhpcy5fY2hhbm5lbC5jb25uZWN0KHQse3dhaXQ6ITF9KTtyZXR1cm4gbi5vbkRpc2Nvbm5lY3Rpb24oKCgpPT57YS5kZWxldGUoZSl9KSksbn1jYXRjaCh0KXt0aHJvdyBhLmRlbGV0ZShlKSxuZXcgRXJyb3IoXCJUaGUgdGFyZ2V0ZWQgUGxhdGZvcm0gaXMgbm90IGN1cnJlbnRseSBydW5uaW5nLiBMaXN0ZW4gZm9yIGFwcGxpY2F0aW9uLXN0YXJ0ZWQgZXZlbnQgZm9yIHRoZSBnaXZlbiBVdWlkLlwiKX19KSksdGhpcy5sYXVuY2hMZWdhY3lNYW5pZmVzdD10aGlzLmxhdW5jaENvbnRlbnRNYW5pZmVzdDtjb25zdCBuPXMudmFsaWRhdGVJZGVudGl0eShlKTtpZihuKXRocm93IG5ldyBFcnJvcihuKTt0aGlzLl9jaGFubmVsPXQsdGhpcy5pZGVudGl0eT17dXVpZDplLnV1aWR9LHRoaXMuTGF5b3V0PXRoaXMuZmluLlBsYXRmb3JtLkxheW91dCx0aGlzLkFwcGxpY2F0aW9uPXRoaXMuZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKHRoaXMuaWRlbnRpdHkpfWFzeW5jIGNyZWF0ZVZpZXcoZSx0LG4pe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY3JlYXRlLXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBpPWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkscj1hd2FpdCBpLmRpc3BhdGNoKFwiY3JlYXRlLXZpZXdcIix7dGFyZ2V0OnQsb3B0czplLHRhcmdldFZpZXc6bn0pO2lmKCFyfHxzLnZhbGlkYXRlSWRlbnRpdHkoci5pZGVudGl0eSkpdGhyb3cgbmV3IEVycm9yKGBXaGVuIG92ZXJ3cml0aW5nIHRoZSBjcmVhdGVWaWV3IGNhbGwsIHBsZWFzZSByZXR1cm4gYW4gb2JqZWN0IHRoYXQgaGFzIGEgdmFsaWQgJ2lkZW50aXR5JyBwcm9wZXJ0eTogJHtKU09OLnN0cmluZ2lmeShyKX1gKTtyZXR1cm4gdGhpcy5maW4uVmlldy53cmFwU3luYyhyLmlkZW50aXR5KX1hc3luYyBjcmVhdGVXaW5kb3coZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1jcmVhdGUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpO2UucmVhc29ufHwoZS5yZWFzb249XCJhcGktY2FsbFwiKTtjb25zdCBuPWF3YWl0IHQuZGlzcGF0Y2goXCJjcmVhdGUtdmlldy1jb250YWluZXJcIixlKTtpZighbnx8cy52YWxpZGF0ZUlkZW50aXR5KG4uaWRlbnRpdHkpKXRocm93IG5ldyBFcnJvcihgV2hlbiBvdmVyd3JpdGluZyB0aGUgY3JlYXRlV2luZG93IGNhbGwsIHBsZWFzZSByZXR1cm4gYW4gb2JqZWN0IHRoYXQgaGFzIGEgdmFsaWQgJ2lkZW50aXR5JyBwcm9wZXJ0eTogJHtKU09OLnN0cmluZ2lmeShuKX1gKTtjb25zdHtpZGVudGl0eTppfT1uLHI9dGhpcy5maW4uV2luZG93LndyYXBTeW5jKGkpO3JldHVybiByLm5hbWU9aS5uYW1lLHIudXVpZD1pLnV1aWQscn1hc3luYyBxdWl0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tcXVpdFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLmdldENsaWVudCgpKS5kaXNwYXRjaChcInF1aXRcIil9YXN5bmMgY2xvc2VWaWV3KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY2xvc2Utdmlld1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKTthd2FpdCB0LmRpc3BhdGNoKFwiY2xvc2Utdmlld1wiLHt2aWV3OmV9KX1hc3luYyByZXBhcmVudFZpZXcoZSx0KXt2YXIgbjtjb25zb2xlLndhcm4oXCJQbGF0Zm9ybS5yZXBhcmVudFZpZXcgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQbGF0Zm9ybS5jcmVhdGVWaWV3XCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tcmVwYXJlbnQtdmlld1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IGk9ey4uLmUsdXVpZDpudWxsIT09KG49ZS51dWlkKSYmdm9pZCAwIT09bj9uOnRoaXMuaWRlbnRpdHkudXVpZH0scj1hd2FpdCB0aGlzLmZpbi5WaWV3LndyYXAoaSksbz1hd2FpdCByLmdldE9wdGlvbnMoKTtyZXR1cm4gdGhpcy5jcmVhdGVWaWV3KG8sdCl9YXN5bmMgZ2V0U25hcHNob3QoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtc25hcHNob3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJnZXQtc25hcHNob3RcIil9YXN5bmMgYXBwbHlTbmFwc2hvdChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tYXBwbHktc25hcHNob3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPVwiUmVxdWVzdGVkIHNuYXBzaG90IG11c3QgYmUgYSB2YWxpZCBTbmFwc2hvdCBvYmplY3QsIG9yIGEgdXJsIG9yIGZpbGVwYXRoIHRvIHN1Y2ggYW4gb2JqZWN0LlwiO2xldCBpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRyeXtpPShhd2FpdCB0aGlzLl9jaGFubmVsLndpcmUuc2VuZEFjdGlvbihcImdldC1hcHBsaWNhdGlvbi1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSkpLnBheWxvYWQuZGF0YX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYCR7bn06ICR7ZX1gKX1lbHNlIGk9ZTtpZighaS53aW5kb3dzKXRocm93IG5ldyBFcnJvcihuKTtjb25zdCByPWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7cmV0dXJuIGF3YWl0IHIuZGlzcGF0Y2goXCJhcHBseS1zbmFwc2hvdFwiLHtzbmFwc2hvdDppLG9wdGlvbnM6dH0pLHRoaXN9YXN5bmMgZmV0Y2hNYW5pZmVzdChlKXtyZXR1cm4oYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJwbGF0Zm9ybS1mZXRjaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSl9YXN5bmMgbGF1bmNoQ29udGVudE1hbmlmZXN0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tbGF1bmNoLWNvbnRlbnQtbWFuaWZlc3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCksbj1hd2FpdCB0aGlzLmZldGNoTWFuaWZlc3QoZSk7cmV0dXJuIHQuZGlzcGF0Y2goXCJsYXVuY2gtaW50by1wbGF0Zm9ybVwiLHttYW5pZmVzdDpufSksdGhpc31hc3luYyBzZXRXaW5kb3dDb250ZXh0KGU9e30sdCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zZXQtd2luZG93LWNvbnRleHRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwhZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIHNlcmlhbGl6YWJsZSBvYmplY3Qgb3Igc3RyaW5nIHRvIHNldCB0aGUgY29udGV4dC5cIik7Y29uc3Qgbj1hd2FpdCB0aGlzLmdldENsaWVudCgpLHtlbnRpdHlUeXBlOml9PXQ/YXdhaXQgdGhpcy5maW4uU3lzdGVtLmdldEVudGl0eUluZm8odC51dWlkLHQubmFtZSk6dGhpcy5maW4ubWU7YXdhaXQgbi5kaXNwYXRjaChcInNldC13aW5kb3ctY29udGV4dFwiLHtjb250ZXh0OmUsZW50aXR5VHlwZTppLHRhcmdldDp0fHx7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dGhpcy5maW4ubWUubmFtZX19KX1hc3luYyBnZXRXaW5kb3dDb250ZXh0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LXdpbmRvdy1jb250ZXh0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpLHtlbnRpdHlUeXBlOm59PWU/YXdhaXQgdGhpcy5maW4uU3lzdGVtLmdldEVudGl0eUluZm8oZS51dWlkLGUubmFtZSk6dGhpcy5maW4ubWU7cmV0dXJuIHQuZGlzcGF0Y2goXCJnZXQtd2luZG93LWNvbnRleHRcIix7dGFyZ2V0OmV8fHt1dWlkOnRoaXMuZmluLm1lLnV1aWQsbmFtZTp0aGlzLmZpbi5tZS5uYW1lfSxlbnRpdHlUeXBlOm59KX1hc3luYyBjbG9zZVdpbmRvdyhlLHQ9e3NraXBCZWZvcmVVbmxvYWQ6ITF9KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1jbG9zZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJjbG9zZS13aW5kb3dcIix7d2luZG93SWQ6ZSxvcHRpb25zOnR9KX19dC5QbGF0Zm9ybT1jLGk9bmV3IFdlYWtNYXB9LDQzODY6KGUsdCk9PntmdW5jdGlvbiBuKGUpe3N3aXRjaChlKXtjYXNlXCJjb2x1bW5zXCI6Y2FzZVwiZ3JpZFwiOmNhc2VcInJvd3NcIjpjYXNlXCJ0YWJzXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5pc1ZhbGlkUHJlc2V0VHlwZT12b2lkIDAsdC5pc1ZhbGlkUHJlc2V0VHlwZT1uLHQuZGVmYXVsdD17aXNWYWxpZFByZXNldFR5cGU6bn19LDYwOTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDcyODMpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDk4NzIpLHQpfSw0MjEwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkxheW91dE1vZHVsZT12b2lkIDA7Y29uc3Qgcz1uKDgxMTEpLGE9big5NjU5KTtjbGFzcyBjIGV4dGVuZHMgYS5CYXNle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSxpLnNldCh0aGlzLHZvaWQgMCksdGhpcy5pbml0PWFzeW5jKGU9e30pPT57aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtaW5pdFwiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiTGF5b3V0LmluaXQgY2FuIG9ubHkgYmUgY2FsbGVkIGZyb20gYSBXaW5kb3cgY29udGV4dC5cIik7aWYocih0aGlzLGkpKXRocm93IG5ldyBFcnJvcihcIkxheW91dCBmb3IgdGhpcyB3aW5kb3cgYWxyZWFkeSBpbml0aWFsaXplZCwgcGxlYXNlIHVzZSBMYXlvdXQucmVwbGFjZSBjYWxsIHRvIHJlcGxhY2UgdGhlIGxheW91dC5cIik7Y29uc3QgdD1hd2FpdCB0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0TWFuYWdlckNvbnN0cnVjdG9yKCk7byh0aGlzLGksbmV3IHQpO2xldHtsYXlvdXQ6bixjb250YWluZXJJZDpzfT1lO24mJmNvbnNvbGUud2FybihcIldlIHJlY29tbWVuZCB1c2luZyBhIGxheW91dCBpbiB3aW5kb3cgb3B0aW9ucy5cXG4gICAgICAgICAgICAgICAgVGhpcyBsYXlvdXQgaGFzIG5vdCBiZWVuIHNhbml0aXplZCBhbmQgdW5leHBlY3RlZCBiZWhhdmlvciBjYW4gb2NjdXIuXCIpLG49bnx8KGF3YWl0IHRoaXMuZmluLldpbmRvdy5nZXRDdXJyZW50U3luYygpLmdldE9wdGlvbnMoKSkubGF5b3V0LHM9c3x8XCJsYXlvdXQtY29udGFpbmVyXCI7Y29uc3QgYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKTtyZXR1cm4gYXdhaXQgcih0aGlzLGkpLmluaXRNYW5hZ2VyKCksYXdhaXQgcih0aGlzLGkpLmNyZWF0ZUxheW91dChuLGEpLE9iamVjdC5hc3NpZ24odGhpcy5nZXRDdXJyZW50U3luYygpLHtsYXlvdXRNYW5hZ2VyOnIodGhpcyxpKX0pfX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC13cmFwXCIpLmNhdGNoKChlPT57fSkpLG5ldyBzLkxheW91dChlLHRoaXMud2lyZSl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgcy5MYXlvdXQoZSx0aGlzLndpcmUpfWFzeW5jIGdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1nZXQtY3VycmVudFwiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dC4gIE9ubHkgV2luZG93cyBjYW4gaGF2ZSBhIExheW91dC5cIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy5maW4ubWU7cmV0dXJuIHRoaXMud3JhcCh7dXVpZDplLG5hbWU6dH0pfWdldEN1cnJlbnRTeW5jKCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dC4gIE9ubHkgV2luZG93cyBjYW4gaGF2ZSBhIExheW91dC5cIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy5maW4ubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5MYXlvdXRNb2R1bGU9YyxpPW5ldyBXZWFrTWFwfSw4MTExOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkxheW91dD12b2lkIDA7Y29uc3QgaT1uKDQ5OTkpLHI9big0Mzg2KSxvPW4oOTY1OSk7Y2xhc3MgcyBleHRlbmRzIG8uQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQpLHRoaXMucmVwbGFjZT1hc3luYyBlPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtcmVwbGFjZVwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMucGxhdGZvcm0uZ2V0Q2xpZW50KCk7YXdhaXQgdC5kaXNwYXRjaChcInJlcGxhY2UtbGF5b3V0XCIse3RhcmdldDp0aGlzLmlkZW50aXR5LG9wdHM6e2xheW91dDplfX0pfSx0aGlzLnJlcGxhY2VWaWV3PWFzeW5jKGUsdCk9Pnt0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1yZXBsYWNlLXZpZXdcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpO2F3YWl0IG4uZGlzcGF0Y2goXCJyZXBsYWNlLXZpZXdcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHksb3B0czp7dmlld1RvUmVwbGFjZTplLG5ld1ZpZXc6dH19KX0sdGhpcy5hcHBseVByZXNldD1hc3luYyBlPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtYXBwbHktcHJlc2V0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKSx7cHJlc2V0VHlwZTpufT1lO2lmKCFufHwhci5pc1ZhbGlkUHJlc2V0VHlwZShuKSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYXBwbHkgcHJlc2V0IGxheW91dCwgcGxlYXNlIGluY2x1ZGUgYW4gYXBwbGljYWJsZSBwcmVzZXRUeXBlIHByb3BlcnR5IGluIHRoZSBQcmVzZXRMYXlvdXRPcHRpb25zLlwiKTthd2FpdCB0LmRpc3BhdGNoKFwiYXBwbHktcHJlc2V0LWxheW91dFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eSxvcHRzOntwcmVzZXRUeXBlOm59fSl9O2NvbnN0IG49aS52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKG4pdGhyb3cgbmV3IEVycm9yKG4pO3RoaXMuaWRlbnRpdHk9ZSx0aGlzLnBsYXRmb3JtPXRoaXMuZmluLlBsYXRmb3JtLndyYXBTeW5jKHt1dWlkOmUudXVpZH0pLGUudXVpZD09PXRoaXMuZmluLm1lLnV1aWQmJmUubmFtZT09PXRoaXMuZmluLm1lLm5hbWUmJih0aGlzLmluaXQ9dGhpcy5maW4uUGxhdGZvcm0uTGF5b3V0LmluaXQpfWFzeW5jIGdldENvbmZpZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1nZXQtY29uZmlnXCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpKS5kaXNwYXRjaChcImdldC1mcmFtZS1zbmFwc2hvdFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eX0pfX10LkxheW91dD1zfSw2Mzk0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyKG4oNDIxMCksdCkscihuKDgxMTEpLHQpfSwxNzQ2OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDI4NzgpLG89big2MjE1KTtjbGFzcyBzIGV4dGVuZHMgaS5CYXNle2FzeW5jIGluaXQoZSl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2UtaW5pdFwiKS5jYXRjaCgoZT0+e30pKSxcIm9iamVjdFwiIT10eXBlb2YgZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS5nZXRTbmFwc2hvdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS5hcHBseVNuYXBzaG90KXRocm93IG5ldyBFcnJvcihcInlvdSBtdXN0IHBhc3MgaW4gYSB2YWxpZCBTbmFwc2hvdFByb3ZpZGVyXCIpO2NvbnN0IHQ9YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShvLmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWUoZmluLm1lLmlkZW50aXR5KSk7dC5yZWdpc3RlcihcImdldC1zbmFwc2hvdFwiLChhc3luYygpPT4oe3NuYXBzaG90OmF3YWl0IGUuZ2V0U25hcHNob3QoKX0pKSksdC5yZWdpc3RlcihcImFwcGx5LXNuYXBzaG90XCIsKCh7c25hcHNob3Q6dH0pPT5lLmFwcGx5U25hcHNob3QodCkpKX13cmFwU3luYyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2Utd3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyByLlNuYXBzaG90U291cmNlKHRoaXMud2lyZSxlKX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS13cmFwXCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcFN5bmMoZSl9fXQuZGVmYXVsdD1zfSwyODc4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxhLGM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LGQ9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU25hcHNob3RTb3VyY2U9dm9pZCAwO2NvbnN0IGg9big5NjU5KSxsPW4oNjIxNSksdT1uZXcgTWFwO2NsYXNzIHAgZXh0ZW5kcyBoLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcywoKCk9Pih1Lmhhcyh0aGlzLmlkZW50aXR5LnV1aWQpfHx1LnNldCh0aGlzLmlkZW50aXR5LnV1aWQse2V2ZW50RmlyZWQ6bnVsbCxjbGllbnRQcm9taXNlOm51bGx9KSx1LmdldCh0aGlzLmlkZW50aXR5LnV1aWQpKSkpLG8uc2V0KHRoaXMsKCgpPT4oZCh0aGlzLHIpLmNhbGwodGhpcykuY2xpZW50UHJvbWlzZXx8KGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9ZCh0aGlzLHMpLmNhbGwodGhpcykpLGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2UpKSkscy5zZXQodGhpcywoYXN5bmMoKT0+e2NvbnN0IGU9bC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lKHRoaXMuaWRlbnRpdHkpO3RyeXtkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkfHxhd2FpdCBkKHRoaXMsYSkuY2FsbCh0aGlzKTtjb25zdCB0PWF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3dhaXQ6ITF9KTtyZXR1cm4gdC5vbkRpc2Nvbm5lY3Rpb24oKCgpPT57ZCh0aGlzLHIpLmNhbGwodGhpcykuY2xpZW50UHJvbWlzZT1udWxsLGQodGhpcyxyKS5jYWxsKHRoaXMpLmV2ZW50RmlyZWQ9bnVsbH0pKSx0fWNhdGNoKGUpe3Rocm93IGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9bnVsbCxuZXcgRXJyb3IoXCJUaGUgdGFyZ2V0ZWQgU25hcHNob3RTb3VyY2UgaXMgbm90IGN1cnJlbnRseSBpbml0aWFsaXplZC4gQXdhaXQgdGhpcyBvYmplY3QncyByZWFkeSgpIG1ldGhvZC5cIil9fSkpLGEuc2V0KHRoaXMsKGFzeW5jKCk9Pntjb25zdCBlPWwuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZSh0aGlzLmlkZW50aXR5KTtsZXQgdCxuO2NvbnN0IGk9bmV3IFByb21pc2UoKChlLGkpPT57dD1lLG49aX0pKTtkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkPWk7Y29uc3Qgbz1hc3luYyBpPT57dHJ5e2kuY2hhbm5lbE5hbWU9PT1lJiYodCgpLGF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5yZW1vdmVMaXN0ZW5lcihcImNvbm5lY3RlZFwiLG8pKX1jYXRjaChlKXtuKGUpfX07YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLm9uKFwiY29ubmVjdGVkXCIsbyl9KSksYyh0aGlzLGksdCl9Z2V0IGlkZW50aXR5KCl7cmV0dXJuIGQodGhpcyxpKX1hc3luYyByZWFkeSgpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLXJlYWR5XCIpLmNhdGNoKChlPT57fSkpO3RyeXthd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKX1jYXRjaChlKXthd2FpdCBkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkfX1hc3luYyBnZXRTbmFwc2hvdCgpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWdldC1zbmFwc2hvdFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBlPWF3YWl0IGQodGhpcyxvKS5jYWxsKHRoaXMpLHQ9YXdhaXQgZS5kaXNwYXRjaChcImdldC1zbmFwc2hvdFwiKTtyZXR1cm4oYXdhaXQgdCkuc25hcHNob3R9YXN5bmMgYXBwbHlTbmFwc2hvdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2UtYXBwbHktc25hcHNob3RcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IGQodGhpcyxvKS5jYWxsKHRoaXMpKS5kaXNwYXRjaChcImFwcGx5LXNuYXBzaG90XCIse3NuYXBzaG90OmV9KX19dC5TbmFwc2hvdFNvdXJjZT1wLGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwLHM9bmV3IFdlYWtNYXAsYT1uZXcgV2Vha01hcH0sNzE1MzpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDE3NDYpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDI4NzgpLHQpfSw2MjE1OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lPXZvaWQgMCx0LmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWU9ZT0+YHNuYXBzaG90LXNvdXJjZS1wcm92aWRlci0ke2UudXVpZH1gfSwzNjQxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDUwMDcpLG89big0OTk3KTtjbGFzcyBzIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLFwic3lzdGVtXCIpfXNlbmRFeHRlcm5hbFByb2Nlc3NSZXF1ZXN0KGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKCgobixpKT0+e2NvbnN0IHI9XCJleHRlcm5hbC1wcm9jZXNzLWV4aXRlZFwiO2xldCBzLGEsYyxkO1wiZnVuY3Rpb25cIj09dHlwZW9mIHQubGlzdGVuZXImJihjPWU9Pntjb25zdCBuPWV8fHt9O2E9e3RvcGljOlwiZXhpdGVkXCIsdXVpZDpuLnByb2Nlc3NVdWlkfHxcIlwiLGV4aXRDb2RlOm4uZXhpdENvZGV8fDB9LHM9PT1lLnByb2Nlc3NVdWlkJiYodC5saXN0ZW5lcihhKSxkLnJlbW92ZUxpc3RlbmVyKHIsYykpfSx0aGlzLndpcmUubWUubmFtZXx8KHRoaXMud2lyZS5tZS5uYW1lPXRoaXMud2lyZS5tZS51dWlkKSxkPW5ldyBvLl9XaW5kb3codGhpcy53aXJlLHRoaXMud2lyZS5tZSksZC5vbihyLGMpKSx0aGlzLndpcmUuc2VuZEFjdGlvbihlLHQpLnRoZW4oKCh7cGF5bG9hZDplfSk9PntzPWUuZGF0YS51dWlkLG4oZS5kYXRhKSxhJiZzPT09YS51dWlkJiYodC5saXN0ZW5lcihhKSxkLnJlbW92ZUxpc3RlbmVyKHIsYykpfSkpLmNhdGNoKChlPT57ZCYmZC5yZW1vdmVMaXN0ZW5lcihyLGMpLGkoZSl9KSl9KSl9Z2V0VmVyc2lvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12ZXJzaW9uXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWNsZWFyQ2FjaGUoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xlYXItY2FjaGVcIixlKS50aGVuKCgoKT0+e30pKX1kZWxldGVDYWNoZU9uRXhpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRlbGV0ZS1jYWNoZS1yZXF1ZXN0XCIpLnRoZW4oKCgpPT57fSkpfWV4aXQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleGl0LWRlc2t0b3BcIikudGhlbigoKCk9Pnt9KSl9YXN5bmMgZmV0Y2hNYW5pZmVzdChlKXtjb25zdHtwYXlsb2FkOntkYXRhOnR9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZldGNoLW1hbmlmZXN0XCIse21hbmlmZXN0VXJsOmV9KTtyZXR1cm4gdH1mbHVzaENvb2tpZVN0b3JlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZmx1c2gtY29va2llLXN0b3JlXCIpLnRoZW4oKCgpPT57fSkpfWdldEFsbFdpbmRvd3MoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYWxsLXdpbmRvd3NcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0QWxsQXBwbGljYXRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1hcHBsaWNhdGlvbnNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Q29tbWFuZExpbmVBcmd1bWVudHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY29tbWFuZC1saW5lLWFyZ3VtZW50c1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRDcmFzaFJlcG9ydGVyU3RhdGUoKXtjb25zdHtwYXlsb2FkOntkYXRhOntkaWFnbm9zdGljTW9kZTplLGlzUnVubmluZzp0fX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNyYXNoLXJlcG9ydGVyLXN0YXRlXCIpO3JldHVybiBjb25zb2xlLndhcm4oXCJkaWFnbm9zdGljTW9kZSBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvblwiKSx7ZGlhZ25vc3RpY01vZGU6ZSxkaWFnbm9zdGljc01vZGU6ZSxpc1J1bm5pbmc6dH19YXN5bmMgc3RhcnRDcmFzaFJlcG9ydGVyKGUpe2NvbnN0IHQ9ZSxuPXsuLi50LGRpYWdub3N0aWNNb2RlOnQuZGlhZ25vc3RpY3NNb2RlfHx0LmRpYWdub3N0aWNNb2RlfSx7cGF5bG9hZDp7ZGF0YTp7ZGlhZ25vc3RpY01vZGU6aSxpc1J1bm5pbmc6cn19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0YXJ0LWNyYXNoLXJlcG9ydGVyXCIsbik7cmV0dXJue2RpYWdub3N0aWNNb2RlOmksZGlhZ25vc3RpY3NNb2RlOmksaXNSdW5uaW5nOnJ9fWdldFVuaXF1ZVVzZXJJZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC11bmlxdWUtdXNlci1pZFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRFbnRpdHlJbmZvKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWVudGl0eS1pbmZvXCIse3V1aWQ6ZSxuYW1lOnR9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRFbnZpcm9ubWVudFZhcmlhYmxlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1lbnZpcm9ubWVudC12YXJpYWJsZVwiLHtlbnZpcm9ubWVudFZhcmlhYmxlczplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Rm9jdXNlZFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1mb2N1c2VkLXdpbmRvd1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBpc0FwcENlcnRpZmllZChlKXtjb25zdHtwYXlsb2FkOntkYXRhOntjZXJ0aWZpZWRJbmZvOnR9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpcy1hcHAtY2VydGlmaWVkXCIse21hbmlmZXN0VXJsOmV9KTtyZXR1cm4gdH1nZXRJbnN0YWxsZWRSdW50aW1lcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1pbnN0YWxsZWQtcnVudGltZXNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhLnJ1bnRpbWVzKSl9YXN5bmMgZ2V0SW5zdGFsbGVkQXBwcygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6e2luc3RhbGxlZEFwcHM6ZX19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1pbnN0YWxsZWQtYXBwc1wiKTtyZXR1cm4gZX1nZXRMb2coZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1sb2dcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNYWNoaW5lSWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbWFjaGluZS1pZFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNaW5Mb2dMZXZlbCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1taW4tbG9nLWxldmVsXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldExvZ0xpc3QoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsaXN0LWxvZ3NcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TW9uaXRvckluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbW9uaXRvci1pbmZvXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldE1vdXNlUG9zaXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbW91c2UtcG9zaXRpb25cIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UHJvY2Vzc0xpc3QoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiU3lzdGVtLmdldFByb2Nlc3NMaXN0IGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSBjb25zaWRlciB1c2luZyBvdXIgbmV3IHByb2Nlc3MgQVBJczogV2luZG93LmdldFByb2Nlc3NJbmZvLCBWaWV3LmdldFByb2Nlc3NJbmZvLCBBcHBsaWNhdGlvbi5nZXRQcm9jZXNzSW5mbywgU3lzdGVtLmdldEFsbFByb2Nlc3NJbmZvXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicHJvY2Vzcy1zbmFwc2hvdFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRBbGxQcm9jZXNzSW5mbygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1wcm9jZXNzLWluZm9cIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZX1nZXRQcm94eVNldHRpbmdzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXByb3h5LXNldHRpbmdzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFJ1bnRpbWVJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXJ1bnRpbWUtaW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRSdm1JbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXJ2bS1pbmZvXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEhvc3RTcGVjcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ob3N0LXNwZWNzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWxhdW5jaEV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy5zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChcImxhdW5jaC1leHRlcm5hbC1wcm9jZXNzXCIsZSl9bW9uaXRvckV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy5zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChcIm1vbml0b3ItZXh0ZXJuYWwtcHJvY2Vzc1wiLGUpfWxvZyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyaXRlLXRvLWxvZ1wiLHtsZXZlbDplLG1lc3NhZ2U6dH0pLnRoZW4oKCgpPT57fSkpfW9wZW5VcmxXaXRoQnJvd3NlcihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJvcGVuLXVybC13aXRoLWJyb3dzZXJcIix7dXJsOmV9KS50aGVuKCgoKT0+e30pKX1yZWxlYXNlRXh0ZXJuYWxQcm9jZXNzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlbGVhc2UtZXh0ZXJuYWwtcHJvY2Vzc1wiLHt1dWlkOmV9KS50aGVuKCgoKT0+e30pKX1zaG93RGV2ZWxvcGVyVG9vbHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2hvdy1kZXZlbG9wZXItdG9vbHNcIixlKS50aGVuKCgoKT0+e30pKX10ZXJtaW5hdGVFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidGVybWluYXRlLWV4dGVybmFsLXByb2Nlc3NcIixlKS50aGVuKCgoKT0+e30pKX11cGRhdGVQcm94eVNldHRpbmdzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS1wcm94eVwiLGUpLnRoZW4oKCgpPT57fSkpfWRvd25sb2FkQXNzZXQoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKChuLGkpPT57aWYoXCJOb2RlRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lKXJldHVybiB2b2lkIGkobmV3IHIuTm90U3VwcG9ydGVkRXJyb3IoXCJkb3dubG9hZEFzc2V0IG9ubHkgc3VwcG9ydGVkIGluIGFuIE9wZW5GaW4gUmVuZGVyIHByb2Nlc3NcIikpO2NvbnN0IG89dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKS50b1N0cmluZygpLHM9YGFzc2V0LWRvd25sb2FkLXByb2dyZXNzLSR7b31gLGE9YGFzc2V0LWRvd25sb2FkLWVycm9yLSR7b31gLGM9YGFzc2V0LWRvd25sb2FkLWNvbXBsZXRlLSR7b31gLGQ9ZT0+e2NvbnN0IG49e2Rvd25sb2FkZWRCeXRlczplLmRvd25sb2FkZWRCeXRlcyx0b3RhbEJ5dGVzOmUudG90YWxCeXRlc307dChuKX0saD0oKT0+e3RoaXMucmVtb3ZlTGlzdGVuZXIocyxkKX07dGhpcy5vbihzLGQpLHRoaXMub25jZShhLCgoZSx0KT0+e2NvbnN0IG49dHx8ZTtoKCksaShuZXcgci5SdW50aW1lRXJyb3IobikpfSkpLHRoaXMub25jZShjLCgoKT0+e2goKSxuKCl9KSk7Y29uc3QgbD1PYmplY3QuYXNzaWduKGUse2Rvd25sb2FkSWQ6b30pO3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiZG93bmxvYWQtYXNzZXRcIixsKS5jYXRjaCgoZT0+e2goKSxpKGUpfSkpfSkpfWRvd25sb2FkUnVudGltZShlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4saSk9PntpZihcIk5vZGVFbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUpcmV0dXJuIHZvaWQgaShuZXcgci5Ob3RTdXBwb3J0ZWRFcnJvcihcImRvd25sb2FkUnVudGltZSBvbmx5IHN1cHBvcnRlZCBpbiBhbiBPcGVuRmluIFJlbmRlciBwcm9jZXNzXCIpKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCkudG9TdHJpbmcoKSxzPWBydW50aW1lLWRvd25sb2FkLXByb2dyZXNzLSR7b31gLGE9YHJ1bnRpbWUtZG93bmxvYWQtZXJyb3ItJHtvfWAsYz1gcnVudGltZS1kb3dubG9hZC1jb21wbGV0ZS0ke299YCxkPWU9Pntjb25zdCBuPXtkb3dubG9hZGVkQnl0ZXM6ZS5kb3dubG9hZGVkQnl0ZXMsdG90YWxCeXRlczplLnRvdGFsQnl0ZXN9O3Qobil9LGg9KCk9Pnt0aGlzLnJlbW92ZUxpc3RlbmVyKHMsZCl9O3RoaXMub24ocyxkKSx0aGlzLm9uY2UoYSwoKGUsdCk9Pntjb25zdCBuPXR8fGU7aCgpLGkobmV3IHIuUnVudGltZUVycm9yKG4pKX0pKSx0aGlzLm9uY2UoYywoKCk9PntoKCksbigpfSkpO2NvbnN0IGw9T2JqZWN0LmFzc2lnbihlLHtkb3dubG9hZElkOm99KTt0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLXJ1bnRpbWVcIixsKS5jYXRjaCgoZT0+e2goKSxpKGUpfSkpfSkpfWRvd25sb2FkUHJlbG9hZFNjcmlwdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZG93bmxvYWQtcHJlbG9hZC1zY3JpcHRzXCIse3NjcmlwdHM6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFsbEV4dGVybmFsQXBwbGljYXRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1leHRlcm5hbC1hcHBsaWNhdGlvbnNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0QXBwQXNzZXRJbmZvKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hcHAtYXNzZXQtaW5mb1wiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldENvb2tpZXMoZSl7Y29uc3QgdD10aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0VXJsKCksbj1PYmplY3QuYXNzaWduKGUse3VybDp0fSk7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNvb2tpZXNcIixuKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zZXRNaW5Mb2dMZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtbWluLWxvZy1sZXZlbFwiLHtsZXZlbDplfSkudGhlbigoKCk9Pnt9KSl9cmVzb2x2ZVV1aWQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzb2x2ZS11dWlkXCIse2VudGl0eUtleTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9ZXhlY3V0ZU9uUmVtb3RlKGUsdCl7cmV0dXJuIHQucmVxdWVzdGluZ0lkZW50aXR5PWUsdGhpcy53aXJlLmZlcnJ5QWN0aW9uKHQpfXJlYWRSZWdpc3RyeVZhbHVlKGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWFkLXJlZ2lzdHJ5LXZhbHVlXCIse3Jvb3RLZXk6ZSxzdWJrZXk6dCx2YWx1ZTpufSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9cmVnaXN0ZXJFeHRlcm5hbENvbm5lY3Rpb24oZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVnaXN0ZXItZXh0ZXJuYWwtY29ubmVjdGlvblwiLHt1dWlkOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRTZXJ2aWNlQ29uZmlndXJhdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lKXRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBhbiBvYmplY3Qgd2l0aCBhIGBuYW1lYCBwcm9wZXJ0eSBoYXZpbmcgYSBzdHJpbmcgdmFsdWVcIik7Y29uc3R7bmFtZTp0fT1lO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zZXJ2aWNlLWNvbmZpZ3VyYXRpb25cIix7bmFtZTp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0U3lzdGVtQXBwQ29uZmlnKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBhIHN0cmluZyB2YWx1ZSBmb3IgbmFtZSBvZiBzeXN0ZW0gYXBwXCIpO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zeXN0ZW0tYXBwLWNvbmZpZ3VyYXRpb25cIix7bmFtZTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9cnVuUnZtSGVhbHRoQ2hlY2soKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJydW4tcnZtLWhlYWx0aC1jaGVja1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBsYXVuY2hNYW5pZmVzdChlLHQpe3JldHVybihhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxhdW5jaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplLG9wdHM6dH0pKS5wYXlsb2FkLmRhdGEubWFuaWZlc3R9YXN5bmMgcXVlcnlQZXJtaXNzaW9uRm9yQ3VycmVudENvbnRleHQoZSl7Y29uc3QgdD17dXVpZDp0aGlzLndpcmUubWUudXVpZCxuYW1lOnRoaXMud2lyZS5tZS5uYW1lfTtyZXR1cm4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJxdWVyeS1wZXJtaXNzaW9uLWZvci1jdXJyZW50LWNvbnRleHRcIix7YXBpTmFtZTplLGlkZW50aXR5OnR9KSkucGF5bG9hZC5kYXRhfWFzeW5jIGVuYWJsZU5hdGl2ZVdpbmRvd0ludGVncmF0aW9uUHJvdmlkZXIoZSl7Y29uc3R7cGF5bG9hZDp0fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS1uYXRpdmUtd2luZG93LWludGVncmF0aW9uLXByb3ZpZGVyXCIse3Blcm1pc3Npb25zOmV9KTtyZXR1cm4gdC5kYXRhfWFzeW5jIHJlZ2lzdGVyVXNhZ2Uoe2RhdGE6ZSx0eXBlOnR9KXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlZ2lzdGVyLXVzYWdlXCIse2RhdGE6ZSx0eXBlOnR9KX19dC5kZWZhdWx0PXN9LDI0MDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyBjcmVhdGUoZSl7Y29uc3R7dXVpZDp0fT10aGlzLndpcmUubWU7aWYoIWUubmFtZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIG5hbWUgcHJvcGVydHkgYXMgYSBzdHJpbmcgaW4gb3JkZXIgdG8gY3JlYXRlIGEgVmlldy5cIik7cmV0dXJuIHRoaXMud2lyZS5lbnZpcm9ubWVudC5jaGlsZFZpZXdzP2F3YWl0IHRoaXMud2lyZS5lbnZpcm9ubWVudC5jcmVhdGVDaGlsZENvbnRlbnQoe2VudGl0eVR5cGU6XCJ2aWV3XCIsb3B0aW9uczp7Li4uZSx1dWlkOnR9fSk6YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtdmlld1wiLHsuLi5lLHV1aWQ6dH0pLHRoaXMud3JhcFN5bmMoe3V1aWQ6dCxuYW1lOmUubmFtZX0pfWFzeW5jIHdyYXAoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ2aWV3LXdyYXBcIik7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLlZpZXcodGhpcy53aXJlLGUpfXdyYXBTeW5jKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLlZpZXcodGhpcy53aXJlLGUpfWdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1ZpZXcpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBWaWV3IGNvbnRleHRcIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy53aXJlLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1nZXQtY3VycmVudC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNWaWV3KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgVmlldyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwU3luYyh7dXVpZDplLG5hbWU6dH0pfX10LmRlZmF1bHQ9c30sMzE2MzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5WaWV3PXZvaWQgMDtjb25zdCBpPW4oNDYzNikscj1uKDQ5OTcpO2NsYXNzIG8gZXh0ZW5kcyBpLldlYkNvbnRlbnRze2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx0LFwidmlld1wiKSx0aGlzLmlkZW50aXR5PXQsdGhpcy5hdHRhY2g9YXN5bmMgZT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXR0YWNoLXZpZXdcIix7dGFyZ2V0OmUsLi4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmRlc3Ryb3k9YXN5bmMoKT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGVzdHJveS12aWV3XCIsey4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5zaG93PWFzeW5jKCk9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctdmlld1wiLHsuLi50aGlzLmlkZW50aXR5fSl9LHRoaXMuaGlkZT1hc3luYygpPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJoaWRlLXZpZXdcIix7Li4udGhpcy5pZGVudGl0eX0pfSx0aGlzLnNldEJvdW5kcz1hc3luYyBlPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtdmlldy1ib3VuZHNcIix7Ym91bmRzOmUsLi4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmdldEJvdW5kcz1hc3luYygpPT4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmlldy1ib3VuZHNcIix7Li4udGhpcy5pZGVudGl0eX0pKS5wYXlsb2FkLmRhdGEsdGhpcy5nZXRJbmZvPWFzeW5jKCk9Pihhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12aWV3LWluZm9cIix7Li4udGhpcy5pZGVudGl0eX0pKS5wYXlsb2FkLmRhdGEsdGhpcy5nZXRQYXJlbnRMYXlvdXQ9YXN5bmMoKT0+KHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1nZXQtcGFyZW50LWxheW91dFwiLHsuLi50aGlzLmlkZW50aXR5fSkuY2F0Y2goKCgpPT57fSkpLChhd2FpdCB0aGlzLmdldEN1cnJlbnRXaW5kb3coKSkuZ2V0TGF5b3V0KCkpLHRoaXMuZ2V0T3B0aW9ucz1hc3luYygpPT50aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12aWV3LW9wdGlvbnNcIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpLHRoaXMudXBkYXRlT3B0aW9ucz1hc3luYyBlPT50aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS12aWV3LW9wdGlvbnNcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKSx0aGlzLmdldEN1cnJlbnRXaW5kb3c9YXN5bmMoKT0+e2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctd2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHl9KTtyZXR1cm4gbmV3IHIuX1dpbmRvdyh0aGlzLndpcmUsZSl9LHRoaXMudHJpZ2dlckJlZm9yZVVubG9hZD1hc3luYygpPT4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ0cmlnZ2VyLWJlZm9yZS11bmxvYWRcIix7Li4udGhpcy5pZGVudGl0eX0pKS5wYXlsb2FkLmRhdGF9YXN5bmMgZm9jdXMoe2VtaXRTeW50aEZvY3VzZWQ6ZX09e2VtaXRTeW50aEZvY3VzZWQ6ITB9KXtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q3VycmVudFdpbmRvdygpO2F3YWl0IHQuZm9jdXNlZFdlYlZpZXdXYXNDaGFuZ2VkKCksYXdhaXQgc3VwZXIuZm9jdXMoe2VtaXRTeW50aEZvY3VzZWQ6ZX0pfX10LlZpZXc9b30sNDE2OTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDI0MCk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oMzE2MyksdCl9LDQ2MzY6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuV2ViQ29udGVudHM9dm9pZCAwO2NvbnN0IGk9big5NjU5KTtjbGFzcyByIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSxuLHQudXVpZCx0Lm5hbWUpLHRoaXMuZW50aXR5VHlwZT1ufWNhcHR1cmVQYWdlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNhcHR1cmUtcGFnZVwiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWV4ZWN1dGVKYXZhU2NyaXB0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4ZWN1dGUtamF2YXNjcmlwdC1pbi13aW5kb3dcIix7Li4udGhpcy5pZGVudGl0eSxjb2RlOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRab29tTGV2ZWwoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtem9vbS1sZXZlbFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXNldFpvb21MZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtem9vbS1sZXZlbFwiLHsuLi50aGlzLmlkZW50aXR5LGxldmVsOmV9KS50aGVuKCgoKT0+e30pKX1uYXZpZ2F0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3dcIix7Li4udGhpcy5pZGVudGl0eSx1cmw6ZX0pLnRoZW4oKCgpPT57fSkpfW5hdmlnYXRlQmFjaygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm5hdmlnYXRlLXdpbmRvdy1iYWNrXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBuYXZpZ2F0ZUZvcndhcmQoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm5hdmlnYXRlLXdpbmRvdy1mb3J3YXJkXCIsey4uLnRoaXMuaWRlbnRpdHl9KX1zdG9wTmF2aWdhdGlvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0b3Atd2luZG93LW5hdmlnYXRpb25cIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlbG9hZChlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWxvYWQtd2luZG93XCIse2lnbm9yZUNhY2hlOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXByaW50KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInByaW50XCIsey4uLnRoaXMuaWRlbnRpdHksb3B0aW9uczplfSkudGhlbigoKCk9Pnt9KSl9ZmluZEluUGFnZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZpbmQtaW4tcGFnZVwiLHsuLi50aGlzLmlkZW50aXR5LHNlYXJjaFRlcm06ZSxvcHRpb25zOnR9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zdG9wRmluZEluUGFnZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLWZpbmQtaW4tcGFnZVwiLHsuLi50aGlzLmlkZW50aXR5LGFjdGlvbjplfSkudGhlbigoKCk9Pnt9KSl9Z2V0UHJpbnRlcnMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtcHJpbnRlcnNcIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9PXtlbWl0U3ludGhGb2N1c2VkOiEwfSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmb2N1cy13aW5kb3dcIix7ZW1pdFN5bnRoRm9jdXNlZDplLC4uLnRoaXMuaWRlbnRpdHl9KX1hc3luYyBzaG93RGV2ZWxvcGVyVG9vbHMoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctZGV2ZWxvcGVyLXRvb2xzXCIsdGhpcy5pZGVudGl0eSl9YXN5bmMgZ2V0UHJvY2Vzc0luZm8oKXtjb25zdHtwYXlsb2FkOntkYXRhOmV9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wcm9jZXNzLWluZm9cIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZX1hc3luYyBnZXRTaGFyZWRXb3JrZXJzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXNoYXJlZC13b3JrZXJzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgaW5zcGVjdFNoYXJlZFdvcmtlcigpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW5zcGVjdC1zaGFyZWQtd29ya2VyXCIsey4uLnRoaXMuaWRlbnRpdHl9KX1hc3luYyBpbnNwZWN0U2hhcmVkV29ya2VyQnlJZChlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2hhcmVkLXdvcmtlci1ieS1pZFwiLHsuLi50aGlzLmlkZW50aXR5LHdvcmtlcklkOmV9KX1hc3luYyBpbnNwZWN0U2VydmljZVdvcmtlcigpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW5zcGVjdC1zZXJ2aWNlLXdvcmtlclwiLHsuLi50aGlzLmlkZW50aXR5fSl9YXN5bmMgc2hvd1BvcHVwV2luZG93KGUpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKGAke3RoaXMuZW50aXR5VHlwZX0tc2hvdy1wb3B1cC13aW5kb3dgLHRoaXMuaWRlbnRpdHkpLmNhdGNoKCgoKT0+e30pKSxudWxsPT1lP3ZvaWQgMDplLm9uUG9wdXBSZWFkeSl7Y29uc3QgdD1hc3luYyh7cG9wdXBOYW1lOnR9KT0+e3RyeXtjb25zdCBuPXRoaXMuZmluLldpbmRvdy53cmFwU3luYyh7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dH0pO2F3YWl0IGUub25Qb3B1cFJlYWR5KG4pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihgU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIG9uUG9wdXBSZWFkeSBleGVjdXRpb246ICR7ZX1gKX19O2F3YWl0IHRoaXMub25jZShcInBvcHVwLXJlYWR5XCIsdCl9Y29uc3R7cGF5bG9hZDp0fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInRyeS1jcmVhdGUtcG9wdXAtd2luZG93XCIse29wdGlvbnM6ey4uLmUsaGFzUmVzdWx0Q2FsbGJhY2s6ISEobnVsbD09ZT92b2lkIDA6ZS5vblBvcHVwUmVzdWx0KSxoYXNSZWFkeUNhbGxiYWNrOiEhKG51bGw9PWU/dm9pZCAwOmUub25Qb3B1cFJlYWR5KX0sLi4udGhpcy5pZGVudGl0eX0pLHtkYXRhOnt3aWxsT3BlbjpuLG9wdGlvbnM6aX19PXQ7aWYobiYmYXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LmNyZWF0ZUNoaWxkQ29udGVudCh7b3B0aW9uczppLmluaXRpYWxPcHRpb25zLGVudGl0eVR5cGU6XCJ3aW5kb3dcIn0pLG51bGw9PWU/dm9pZCAwOmUub25Qb3B1cFJlc3VsdCl7Y29uc3QgdD1hc3luYyB0PT57YXdhaXQgZS5vblBvcHVwUmVzdWx0KChlPT57Y29uc3R7bmFtZTp0LHV1aWQ6bixyZXN1bHQ6aSxkYXRhOnJ9PWUsbz17aWRlbnRpdHk6e25hbWU6dCx1dWlkOm59LHJlc3VsdDppfTtyZXR1cm4gciYmKG8uZGF0YT1yKSxvfSkodCkpfSxuPWFzeW5jKCk9Pnthd2FpdCB0aGlzLnJlbW92ZUxpc3RlbmVyKFwicG9wdXAtcmVzdWx0XCIsdCl9O2F3YWl0IHRoaXMub24oXCJwb3B1cC1yZXN1bHRcIix0KSxhd2FpdCB0aGlzLm9uY2UoXCJwb3B1cC10ZWFyZG93blwiLG4pfWNvbnN0e3BheWxvYWQ6cn09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXBvcHVwLXdpbmRvd1wiLHtvcHRpb25zOmksLi4udGhpcy5pZGVudGl0eX0pO3JldHVybiByLmRhdGF9fXQuV2ViQ29udGVudHM9cn0sMjE2MzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oNTA0Nyk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LXdyYXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9XaW5kb3codGhpcy53aXJlLGUpfXdyYXBTeW5jKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uX1dpbmRvdyh0aGlzLndpcmUsZSl9Y3JlYXRlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS13aW5kb3dcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uX1dpbmRvdyh0aGlzLndpcmUse3V1aWQ6dGhpcy5tZS51dWlkLG5hbWU6ZS5uYW1lfSkuY3JlYXRlV2luZG93KGUpfWdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LXdpbmRvd1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy53aXJlLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHRcIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy53aXJlLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWN1cnJlbnQtd2luZG93LXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1dpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFdpbmRvdyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwU3luYyh7dXVpZDplLG5hbWU6dH0pfX10LmRlZmF1bHQ9c30sNTA0NzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5fV2luZG93PXZvaWQgMDtjb25zdCBpPW4oNzI2NCkscj1uKDQ2MzYpLG89big0MTY5KTtjbGFzcyBzIGV4dGVuZHMgci5XZWJDb250ZW50c3tjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCxcIndpbmRvd1wiKSx0aGlzLmlkZW50aXR5PXR9Y3JlYXRlV2luZG93KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1jcmVhdGUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksbmV3IFByb21pc2UoKCh0LG4pPT57Y29uc3QgaT1cImZpcmUtY29uc3RydWN0b3ItY2FsbGJhY2tcIixyPW5ldyBQcm9taXNlKChlPT57dGhpcy5vbihpLChmdW5jdGlvbiB0KG4pe2xldCByO2NvbnN0e3N1Y2Nlc3M6b309bixzPW4uZGF0YSx7bWVzc2FnZTphfT1zO3I9bz97aHR0cFJlc3BvbnNlQ29kZTpzLmh0dHBSZXNwb25zZUNvZGUsYXBpSW5qZWN0ZWQ6cy5hcGlJbmplY3RlZH06e21lc3NhZ2U6cy5tZXNzYWdlLG5ldHdvcmtFcnJvckNvZGU6cy5uZXR3b3JrRXJyb3JDb2RlLHN0YWNrOnMuc3RhY2t9LHRoaXMucmVtb3ZlTGlzdGVuZXIoaSx0KSxlKHttZXNzYWdlOmEsY2JQYXlsb2FkOnIsc3VjY2VzczpvfSl9KSl9KSk7dm9pZCAwPT09ZS53YWl0Rm9yUGFnZUxvYWQmJihlLndhaXRGb3JQYWdlTG9hZD0hMSksdm9pZCAwPT09ZS5hdXRvU2hvdyYmKGUuYXV0b1Nob3c9ITApO2NvbnN0IG89dGhpcy53aXJlLmVudmlyb25tZW50LmNyZWF0ZUNoaWxkQ29udGVudCh7ZW50aXR5VHlwZTpcIndpbmRvd1wiLG9wdGlvbnM6ZX0pO1Byb21pc2UuYWxsKFtyLG9dKS50aGVuKChlPT57Y29uc3QgaT1lWzBdO2kuc3VjY2Vzcz90KHRoaXMpOm4oaSk7dHJ5e3RoaXMuZ2V0V2ViV2luZG93KCkuZmluLl9faW50ZXJuYWxfLm9wZW5lclN1Y2Nlc3NDQkNhbGxlZCgpfWNhdGNoKGUpe319KSkuY2F0Y2gobil9KSl9Z2V0QWxsRnJhbWVzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1mcmFtZXNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRCb3VuZHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LWJvdW5kc1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWNlbnRlcigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNlbnRlci13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1ibHVyKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYmx1ci13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1icmluZ1RvRnJvbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJicmluZy13aW5kb3ctdG8tZnJvbnRcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1hbmltYXRlKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYW5pbWF0ZS13aW5kb3dcIix7dHJhbnNpdGlvbnM6ZSxvcHRpb25zOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWhpZGUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJoaWRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWNsb3NlKGU9ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsb3NlLXdpbmRvd1wiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e09iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG51bGwpfSkpfWZvY3VzZWRXZWJWaWV3V2FzQ2hhbmdlZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZvY3VzZWQtd2Vidmlldy1jaGFuZ2VkXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Z2V0TmF0aXZlSWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LW5hdGl2ZS1pZFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldEN1cnJlbnRWaWV3cygpe2NvbnN0e3BheWxvYWQ6ZX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXZpZXdzXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGUuZGF0YS5tYXAoKGU9Pm5ldyBvLlZpZXcodGhpcy53aXJlLGUpKSl9ZGlzYWJsZUZyYW1lKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIkZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQ7IHVzZSBkaXNhYmxlVXNlck1vdmVtZW50IGluc3RlYWQuXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGlzYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1kaXNhYmxlVXNlck1vdmVtZW50KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGlzYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1lbmFibGVGcmFtZSgpe3JldHVybiBjb25zb2xlLndhcm4oXCJGdW5jdGlvbiBpcyBkZXByZWNhdGVkOyB1c2UgZW5hYmxlVXNlck1vdmVtZW50IGluc3RlYWQuXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZW5hYmxlLXdpbmRvdy1mcmFtZVwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWVuYWJsZVVzZXJNb3ZlbWVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1mbGFzaCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZsYXNoLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXN0b3BGbGFzaGluZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0b3AtZmxhc2gtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Z2V0SW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldExheW91dCgpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC1sYXlvdXRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwhKGF3YWl0IHRoaXMuZ2V0T3B0aW9ucygpKS5sYXlvdXQpdGhyb3cgbmV3IEVycm9yKFwiV2luZG93IGRvZXMgbm90IGhhdmUgYSBMYXlvdXRcIik7cmV0dXJuIHRoaXMuZmluLlBsYXRmb3JtLkxheW91dC53cmFwKHRoaXMuaWRlbnRpdHkpfWdldE9wdGlvbnMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LW9wdGlvbnNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRQYXJlbnRBcHBsaWNhdGlvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtcGFyZW50LWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyBpLkFwcGxpY2F0aW9uKHRoaXMud2lyZSx0aGlzLmlkZW50aXR5KSl9Z2V0UGFyZW50V2luZG93KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC1wYXJlbnQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyBpLkFwcGxpY2F0aW9uKHRoaXMud2lyZSx0aGlzLmlkZW50aXR5KSkudGhlbigoZT0+ZS5nZXRXaW5kb3coKSkpfWFzeW5jIGdldFNuYXBzaG90KGUpe2NvbnN0IHQ9e2FyZWE6ZSwuLi50aGlzLmlkZW50aXR5fTtyZXR1cm4gY29uc29sZS53YXJuKFwiV2luZG93LmdldFNuYXBzaG90IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgV2luZG93LmNhcHR1cmVQYWdlXCIpLChhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctc25hcHNob3RcIix0KSkucGF5bG9hZC5kYXRhfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1zdGF0ZVwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFdlYldpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtd2ViLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRXZWJXaW5kb3codGhpcy5pZGVudGl0eSl9aXNNYWluV2luZG93KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWlzLW1haW4td2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksdGhpcy5tZS51dWlkPT09dGhpcy5tZS5uYW1lfWlzU2hvd2luZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImlzLXdpbmRvdy1zaG93aW5nXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9bWF4aW1pemUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtYXhpbWl6ZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1taW5pbWl6ZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1pbmltaXplLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfW1vdmVCeShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1vdmUtd2luZG93LWJ5XCIse2RlbHRhTGVmdDplLGRlbHRhVG9wOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfW1vdmVUbyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1vdmUtd2luZG93XCIse2xlZnQ6ZSx0b3A6dCwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9cmVzaXplQnkoZSx0LG4pe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlc2l6ZS13aW5kb3ctYnlcIix7ZGVsdGFXaWR0aDpNYXRoLmZsb29yKGUpLGRlbHRhSGVpZ2h0Ok1hdGguZmxvb3IodCksYW5jaG9yOm4sLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc2l6ZVRvKGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXNpemUtd2luZG93XCIse3dpZHRoOk1hdGguZmxvb3IoZSksaGVpZ2h0Ok1hdGguZmxvb3IodCksYW5jaG9yOm4sLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc3RvcmUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXN0b3JlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXNldEFzRm9yZWdyb3VuZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1mb3JlZ3JvdW5kLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXNldEJvdW5kcyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtd2luZG93LWJvdW5kc1wiLHsuLi5lLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zaG93KGU9ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctd2luZG93XCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXNob3dBdChlLHQsbj0hMSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2hvdy1hdC13aW5kb3dcIix7Zm9yY2U6bixsZWZ0Ok1hdGguZmxvb3IoZSksdG9wOk1hdGguZmxvb3IodCksLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXVwZGF0ZU9wdGlvbnMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidXBkYXRlLXdpbmRvdy1vcHRpb25zXCIse29wdGlvbnM6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9YXV0aGVudGljYXRlKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWF1dGhlbnRpY2F0ZVwiLHt1c2VyTmFtZTplLHBhc3N3b3JkOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNob3dQb3B1cE1lbnUoZSl7Y29uc3R7cGF5bG9hZDp0fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctcG9wdXAtbWVudVwiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pO3JldHVybiB0LmRhdGF9YXN5bmMgY2xvc2VQb3B1cE1lbnUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS1wb3B1cC1tZW51XCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBkaXNwYXRjaFBvcHVwUmVzdWx0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWRpc3BhdGNoLXBvcHVwLXJlc3VsdFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGlzcGF0Y2gtcG9wdXAtcmVzdWx0XCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSl9fXQuX1dpbmRvdz1zfSw0OTk3OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMjE2Myk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oNTA0NyksdCl9LDE2ODE6KGUsdCxuKT0+e3ZhciBpO3QuSD12b2lkIDA7Y29uc3Qgcj1uKDY0NjUpLG89big2NTQ1KSxzPW4oOTI5OCksYT1uKDk2NDEpO2NsYXNzIGMgZXh0ZW5kcyByLkV2ZW50RW1pdHRlcntjb25uZWN0KGUpe3Rocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IHJ1bm5pbmcgaW4gT3BlbkZpbi5cIil9Y29ubmVjdFN5bmMoKXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIpfXNlbmQoZSl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1zaHV0ZG93bigpe3Rocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IHJ1bm5pbmcgaW4gT3BlbkZpbi5cIil9Y29uc3RydWN0b3IoKXtzdXBlcigpfX1jbGFzcyBke2NvbnN0cnVjdG9yKCl7dGhpcy5jaGlsZFZpZXdzPSEwfWdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpe3Rocm93IG5ldyBFcnJvcihhLmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX1nZXRSdGNQZWVyKCl7dGhyb3cgbmV3IEVycm9yKGEuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfWdldE1hbmFnZXJDb25zdHJ1Y3Rvcigpe3Rocm93IG5ldyBFcnJvcihhLmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX1nZXRQcm92aWRlckluaXRpYWxpemVyKCl7dGhyb3cgbmV3IEVycm9yKGEuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfXdyaXRlVG9rZW4oZSx0KXt0aHJvdyBuZXcgRXJyb3IoYS5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9cmV0cmlldmVQb3J0KGUpe3Rocm93IG5ldyBFcnJvcihhLmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX1nZXROZXh0TWVzc2FnZUlkKCl7dGhyb3cgbmV3IEVycm9yKGEuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfWdldFJhbmRvbUlkKCl7dGhyb3cgbmV3IEVycm9yKGEuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfWNyZWF0ZUNoaWxkQ29udGVudChlKXt0aHJvdyBuZXcgRXJyb3IoYS5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9Z2V0V2ViV2luZG93KGUpe3Rocm93IG5ldyBFcnJvcihhLmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX1nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKXt0aHJvdyBuZXcgRXJyb3IoYS5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9Z2V0Q3VycmVudEVudGl0eVR5cGUoKXtyZXR1cm5cInVua25vd25cIn1yYWlzZUV2ZW50KGUsdCl7dGhyb3cgbmV3IEVycm9yKGEuZW52aXJvbm1lbnRVbnN1cHBvcnRlZE1lc3NhZ2UpfWdldFVybCgpe3Rocm93IG5ldyBFcnJvcihhLmVudmlyb25tZW50VW5zdXBwb3J0ZWRNZXNzYWdlKX13aGVuUmVhZHkoKXt0aHJvdyBuZXcgRXJyb3IoYS5lbnZpcm9ubWVudFVuc3VwcG9ydGVkTWVzc2FnZSl9fXQuSD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYobnVsbD09PShpPXdpbmRvdyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZmluKXx8KCgpPT57Y29uc3QgZT1uZXcgZCx0PW5ldyBzLmRlZmF1bHQoYyxlLHt1dWlkOlwiXCIsbmFtZTpcIlwifSk7cmV0dXJuIG5ldyBvLmRlZmF1bHQodCl9KSgpfSw4MDY4OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRGaW49dC5yZWdpc3RlckZpbj12b2lkIDA7Y29uc3Qgbj1uZXcgV2Vha01hcDt0LnJlZ2lzdGVyRmluPWZ1bmN0aW9uKGUsdCl7bi5zZXQoZSx0KX0sdC5nZXRGaW49ZnVuY3Rpb24oZSl7Y29uc3QgdD1uLmdldChlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9jYXRlIGZpbiBhcGkgZm9yIGdpdmVuIHRyYW5zcG9ydFwiKTtyZXR1cm4gdH19LDUwMDc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJ1bnRpbWVFcnJvcj10Lk5vdFN1cHBvcnRlZEVycm9yPXQuTm90SW1wbGVtZW50ZWRFcnJvcj10Lk5vQWNrRXJyb3I9dC5EdXBsaWNhdGVDb3JyZWxhdGlvbkVycm9yPXQuVW5leHBlY3RlZEFjdGlvbkVycm9yPXQuRGlzY29ubmVjdGVkRXJyb3I9dm9pZCAwO2NsYXNzIG4gZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihgRXhwZWN0ZWQgd2Vic29ja2V0IHN0YXRlIE9QRU4gYnV0IGZvdW5kICR7ZX1gKSx0aGlzLnJlYWR5U3RhdGU9ZX19dC5EaXNjb25uZWN0ZWRFcnJvcj1uO2NsYXNzIGkgZXh0ZW5kcyBFcnJvcnt9dC5VbmV4cGVjdGVkQWN0aW9uRXJyb3I9aTtjbGFzcyByIGV4dGVuZHMgRXJyb3J7fXQuRHVwbGljYXRlQ29ycmVsYXRpb25FcnJvcj1yO2NsYXNzIG8gZXh0ZW5kcyBFcnJvcnt9dC5Ob0Fja0Vycm9yPW87Y2xhc3MgcyBleHRlbmRzIEVycm9ye310Lk5vdEltcGxlbWVudGVkRXJyb3I9cztjbGFzcyBhIGV4dGVuZHMgRXJyb3J7fXQuTm90U3VwcG9ydGVkRXJyb3I9YTtjbGFzcyBjIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1lLnBheWxvYWR8fGUse3JlYXNvbjpuLGVycm9yOml9PXQ7c3VwZXIobiksdGhpcy5uYW1lPVwiUnVudGltZUVycm9yXCIsKG51bGw9PWk/dm9pZCAwOmkuc3RhY2spJiYodGhpcy5zdGFjaz1pLnN0YWNrKX19dC5SdW50aW1lRXJyb3I9Y30sOTI5ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgcz1uKDY0NjUpLGE9big4NjI0KSxjPW4oNTAwNyksZD1uKDI3MzQpLGg9big5NjQxKTtjbGFzcyBsIGV4dGVuZHMgcy5FdmVudEVtaXR0ZXJ7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksdGhpcy53aXJlTGlzdGVuZXJzPW5ldyBNYXAsdGhpcy50b3BpY1JlZk1hcD1uZXcgTWFwLHRoaXMuZXZlbnRBZ2dyZWdhdG9yPW5ldyBkLmRlZmF1bHQsdGhpcy5tZXNzYWdlSGFuZGxlcnM9W3RoaXMuZXZlbnRBZ2dyZWdhdG9yLmRpc3BhdGNoRXZlbnRdLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmNvbm5lY3RTeW5jPSgpPT57byh0aGlzLGkpLmNvbm5lY3RTeW5jKCl9LHRoaXMuZ2V0UG9ydD0oKT0+e2lmKFwiTm9kZUVudmlyb25tZW50XCIhPT10aGlzLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUpdGhyb3cgbmV3IGMuTm90SW1wbGVtZW50ZWRFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtyZXR1cm4gbyh0aGlzLGkpLndpcmUudXJsLnNwbGl0KFwiOlwiKS5zbGljZSgtMSlbMF19LHIodGhpcyxpLG5ldyBlKHRoaXMub25tZXNzYWdlLmJpbmQodGhpcykpKSx0aGlzLmVudmlyb25tZW50PXQsdGhpcy5zZW5kUmF3PW8odGhpcyxpKS5zZW5kLmJpbmQobyh0aGlzLGkpKSx0aGlzLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5oYW5kbGVNZXNzYWdlLmJpbmQodGhpcykpLG8odGhpcyxpKS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e2Zvcihjb25zdFsse3JlamVjdDplfV1vZiB0aGlzLndpcmVMaXN0ZW5lcnMpZShcIlJlbW90ZSBjb25uZWN0aW9uIGhhcyBjbG9zZWRcIik7dGhpcy53aXJlTGlzdGVuZXJzLmNsZWFyKCksdGhpcy5lbWl0KFwiZGlzY29ubmVjdGVkXCIpfSkpO2NvbnN0e3V1aWQ6cyxuYW1lOmF9PW4sbD10aGlzLmVudmlyb25tZW50LmdldEN1cnJlbnRFbnRpdHlUeXBlKCk7dGhpcy5tZT1oLmdldEJhc2VNZShsLHMsYSl9c2h1dGRvd24oKXtyZXR1cm4gbyh0aGlzLGkpLnNodXRkb3duKCl9YXN5bmMgY29ubmVjdChlKXtpZihhLmlzRXhpc3RpbmdDb25uZWN0Q29uZmlnKGUpKXJldHVybiB0aGlzLmNvbm5lY3RCeVBvcnQoZSk7aWYoYS5pc05ld0Nvbm5lY3RDb25maWcoZSkpe2NvbnN0IHQ9YXdhaXQgdGhpcy5lbnZpcm9ubWVudC5yZXRyaWV2ZVBvcnQoZSk7cmV0dXJuIHRoaXMuY29ubmVjdEJ5UG9ydCh7Li4uZSxhZGRyZXNzOmB3czovL2xvY2FsaG9zdDoke3R9YH0pfX1hc3luYyBjb25uZWN0QnlQb3J0KGUpe2NvbnN0e2FkZHJlc3M6dCx1dWlkOm59PWUscj17Li4uZSx0eXBlOlwiZmlsZS10b2tlblwifSxzPW8odGhpcyxpKTthd2FpdCBzLmNvbm5lY3QodCk7Y29uc3QgYT1hd2FpdCB0aGlzLnNlbmRBY3Rpb24oXCJyZXF1ZXN0LWV4dGVybmFsLWF1dGhvcml6YXRpb25cIix7dXVpZDpuLHR5cGU6XCJmaWxlLXRva2VuXCJ9LCEwKTtpZihcImV4dGVybmFsLWF1dGhvcml6YXRpb24tcmVzcG9uc2VcIiE9PWEuYWN0aW9uKXRocm93IG5ldyBjLlVuZXhwZWN0ZWRBY3Rpb25FcnJvcihhLmFjdGlvbik7Y29uc3R7dG9rZW46ZH09YS5wYXlsb2FkO2F3YWl0IHRoaXMuZW52aXJvbm1lbnQud3JpdGVUb2tlbihhLnBheWxvYWQuZmlsZSxhLnBheWxvYWQudG9rZW4pO2NvbnN0IGg9YXdhaXQgdGhpcy5zZW5kQWN0aW9uKFwicmVxdWVzdC1hdXRob3JpemF0aW9uXCIsciwhMCk7aWYoXCJhdXRob3JpemF0aW9uLXJlc3BvbnNlXCIhPT1oLmFjdGlvbil0aHJvdyBuZXcgYy5VbmV4cGVjdGVkQWN0aW9uRXJyb3IoaC5hY3Rpb24pO2lmKCEwIT09aC5wYXlsb2FkLnN1Y2Nlc3MpdGhyb3cgbmV3IGMuUnVudGltZUVycm9yKGgucGF5bG9hZCk7cmV0dXJuIGR9c2VuZEFjdGlvbihlLHQ9e30sbj0hMSl7cmV0dXJuIG5ldyBQcm9taXNlKCgocixzKT0+e2NvbnN0IGE9dGhpcy5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksYz17YWN0aW9uOmUscGF5bG9hZDp0LG1lc3NhZ2VJZDphfSxkPW8odGhpcyxpKTtyZXR1cm4gdGhpcy5hZGRXaXJlTGlzdGVuZXIoYSxyLHMsbiksZC5zZW5kKGMpLmNhdGNoKHMpfSkpfWZlcnJ5QWN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbik9Pntjb25zdCByPXRoaXMuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpO2UubWVzc2FnZUlkPXI7Y29uc3Qgcz1lPT57dChlLnBheWxvYWQpfTtyZXR1cm4gbyh0aGlzLGkpLnNlbmQoZSkudGhlbigoKCk9PnRoaXMuYWRkV2lyZUxpc3RlbmVyKHIscyxuLCExKSkpLmNhdGNoKG4pfSkpfXJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoZSl7dGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChlKX1hZGRXaXJlTGlzdGVuZXIoZSx0LG4saSl7aT90aGlzLnVuY29ycmVsYXRlZExpc3RlbmVyPXQ6dGhpcy53aXJlTGlzdGVuZXJzLmhhcyhlKT9uKG5ldyBjLkR1cGxpY2F0ZUNvcnJlbGF0aW9uRXJyb3IoU3RyaW5nKGUpKSk6dGhpcy53aXJlTGlzdGVuZXJzLnNldChlLHtyZXNvbHZlOnQscmVqZWN0Om59KX1vbm1lc3NhZ2UoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5tZXNzYWdlSGFuZGxlcnMpdC5jYWxsKG51bGwsZSl9aGFuZGxlTWVzc2FnZShlKXtjb25zdCB0PWUuY29ycmVsYXRpb25JZHx8TmFOO2lmKFwiY29ycmVsYXRpb25JZFwiaW4gZSl7aWYoIXRoaXMud2lyZUxpc3RlbmVycy5oYXModCkpcmV0dXJuITE7e2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09dGhpcy53aXJlTGlzdGVuZXJzLmdldCh0KTtcImFja1wiIT09ZS5hY3Rpb24/aShuZXcgYy5Ob0Fja0Vycm9yKGUuYWN0aW9uKSk6XCJwYXlsb2FkXCJpbiBlP2UucGF5bG9hZC5zdWNjZXNzP24uY2FsbChudWxsLGUpOmkobmV3IGMuUnVudGltZUVycm9yKGUucGF5bG9hZCkpOmkobmV3IGMuUnVudGltZUVycm9yKGUpKSx0aGlzLndpcmVMaXN0ZW5lcnMuZGVsZXRlKHQpfX1lbHNlIHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXImJnRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXIuY2FsbChudWxsLGUpLHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXI9KCk9Pnt9O3JldHVybiEwfX1pPW5ldyBXZWFrTWFwLHQuZGVmYXVsdD1sfSw4NjI0OihlLHQpPT57ZnVuY3Rpb24gbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5tYW5pZmVzdFVybH1mdW5jdGlvbiBpKGUpe3JldHVybiByKGUpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5hZGRyZXNzfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUudXVpZH1mdW5jdGlvbiBvKGUpe3JldHVybiBlLnJ1bnRpbWUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnJ1bnRpbWUudmVyc2lvbn1mdW5jdGlvbiBzKGUpe3JldHVybiByKGUpJiZvKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXNJbnRlcm5hbENvbm5lY3RDb25maWc9dC5pc1BvcnREaXNjb3ZlcnlDb25maWc9dC5pc05ld0Nvbm5lY3RDb25maWc9dC5pc0V4aXN0aW5nQ29ubmVjdENvbmZpZz10LmlzRXh0ZXJuYWxDb25maWc9dm9pZCAwLHQuaXNFeHRlcm5hbENvbmZpZz1uLHQuaXNFeGlzdGluZ0Nvbm5lY3RDb25maWc9aSx0LmlzTmV3Q29ubmVjdENvbmZpZz1zLHQuaXNQb3J0RGlzY292ZXJ5Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZvKGUpfHxzKGUpfSx0LmlzSW50ZXJuYWxDb25uZWN0Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfHxzKGUpfX0sMjM2NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZXJyb3JUb1BPSk89dm9pZCAwLHQuZXJyb3JUb1BPSk89ZnVuY3Rpb24oZSl7cmV0dXJue3N0YWNrOmUuc3RhY2ssbWVzc2FnZTplLm1lc3NhZ2UsdG9TdHJpbmc6ZS50b1N0cmluZ319fSwzOTE3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5leGhhdXN0aXZlQ2hlY2s9dm9pZCAwLHQuZXhoYXVzdGl2ZUNoZWNrPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCB2YWx1ZTogJHtlfSR7dD9gXFxuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlOiAke3Quam9pbihcIlwiKX1gOlwiXCJ9YCl9fSwzNDQyOihlLHQpPT57YXN5bmMgZnVuY3Rpb24gbihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGUpe2NvbnN0IGU9YXdhaXQgbigpO3QucHVzaChlKX1yZXR1cm4gdH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnByb21pc2VNYXBTZXJpYWw9dC5zZXJpYWw9dC5wcm9taXNlTWFwPXQucHJvbWlzaWZ5PXZvaWQgMCx0LnByb21pc2lmeT1mdW5jdGlvbihlKXtyZXR1cm4oLi4udCk9Pm5ldyBQcm9taXNlKCgobixpKT0+e2UoLi4udCwoKGUsdCk9PmU/aShlKTpuKHQpKSl9KSl9LHQucHJvbWlzZU1hcD1hc3luYyBmdW5jdGlvbihlLHQpe3JldHVybiBQcm9taXNlLmFsbChlLm1hcCh0KSl9LHQuc2VyaWFsPW4sdC5wcm9taXNlTWFwU2VyaWFsPWFzeW5jIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oZS5tYXAoKChlLG4saSk9PigpPT50KGUsbixpKSkpKX19LDMxMjc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnRvcGljUmVmTWFwPW5ldyBNYXB9aW5jUmVmQ291bnQoZSl7Y29uc3QgdD10aGlzLnRvcGljUmVmTWFwLmdldChlKTtsZXQgbjtpZih0KXtjb25zdCBpPXQrMTtuPWksdGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKX1lbHNlIHRoaXMudG9waWNSZWZNYXAuc2V0KGUsMSksbj0xO3JldHVybiBufWRlY1JlZkNvdW50KGUpe2NvbnN0IHQ9dGhpcy50b3BpY1JlZk1hcC5nZXQoZSk7bGV0IG47aWYodCl7Y29uc3QgaT10LTE7dGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKSxuPWl9ZWxzZSBuPS0xO3JldHVybiBufWFjdE9uRmlyc3QoZSx0LG4pe3JldHVybiAxPT09dGhpcy5pbmNSZWZDb3VudChlKT90KCk6bigpfWFjdE9uTGFzdChlLHQsbil7cmV0dXJuIDA9PT10aGlzLmRlY1JlZkNvdW50KGUpP3QoKTpuKCl9fX0sMjMwMDooZSx0KT0+e2Z1bmN0aW9uIG4oZSl7cmV0dXJuWy4uLmUuc3BsaXQoXCIuXCIpLnJldmVyc2UoKS5lbnRyaWVzKCldLnJlZHVjZSgoKGUsW3Qsbl0pPT5lKyArbioxZTQqKnQpLDApfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbihlKT49bih0KX1mdW5jdGlvbiByKGUpe3JldHVybiBlLnNwbGl0KFwiL1wiKVswXX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dC5wYXJzZVJ1bnRpbWVVdWlkPXQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dm9pZCAwLHQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249aSx0LnBhcnNlUnVudGltZVV1aWQ9cix0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShyKGUpLHQpfX0sNDk5OTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmFsaWRhdGVJZGVudGl0eT12b2lkIDAsdC52YWxpZGF0ZUlkZW50aXR5PWZ1bmN0aW9uKGUpe2xldCB0O3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS51dWlkfHwodD1cIk5vdCBhIHZhbGlkIGlkZW50aXR5IG9iamVjdFwiKSx0fX0sNjQ2NTplPT57dmFyIHQsbj1cIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdD9SZWZsZWN0Om51bGwsaT1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmFwcGx5P24uYXBwbHk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChlLHQsbil9O3Q9biYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5vd25LZXlzP24ub3duS2V5czpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP2Z1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKX07dmFyIHI9TnVtYmVyLmlzTmFOfHxmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZX07ZnVuY3Rpb24gbygpe28uaW5pdC5jYWxsKHRoaXMpfWUuZXhwb3J0cz1vLGUuZXhwb3J0cy5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLGkpe2Z1bmN0aW9uIHIobil7ZS5yZW1vdmVMaXN0ZW5lcih0LG8pLGkobil9ZnVuY3Rpb24gbygpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVtb3ZlTGlzdGVuZXImJmUucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLHIpLG4oW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKX1mKGUsdCxvLHtvbmNlOiEwfSksXCJlcnJvclwiIT09dCYmZnVuY3Rpb24oZSx0LG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUub24mJmYoZSxcImVycm9yXCIsdCx7b25jZTohMH0pfShlLHIpfSkpfSxvLkV2ZW50RW1pdHRlcj1vLG8ucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLG8ucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLG8ucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBzPTEwO2Z1bmN0aW9uIGEoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX1mdW5jdGlvbiBjKGUpe3JldHVybiB2b2lkIDA9PT1lLl9tYXhMaXN0ZW5lcnM/by5kZWZhdWx0TWF4TGlzdGVuZXJzOmUuX21heExpc3RlbmVyc31mdW5jdGlvbiBkKGUsdCxuLGkpe3ZhciByLG8scyxkO2lmKGEobiksdm9pZCAwPT09KG89ZS5fZXZlbnRzKT8obz1lLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxlLl9ldmVudHNDb3VudD0wKToodm9pZCAwIT09by5uZXdMaXN0ZW5lciYmKGUuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksbz1lLl9ldmVudHMpLHM9b1t0XSksdm9pZCAwPT09cylzPW9bdF09biwrK2UuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcz9zPW9bdF09aT9bbixzXTpbcyxuXTppP3MudW5zaGlmdChuKTpzLnB1c2gobiksKHI9YyhlKSk+MCYmcy5sZW5ndGg+ciYmIXMud2FybmVkKXtzLndhcm5lZD0hMDt2YXIgaD1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK3MubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO2gubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGguZW1pdHRlcj1lLGgudHlwZT10LGguY291bnQ9cy5sZW5ndGgsZD1oLGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGQpfXJldHVybiBlfWZ1bmN0aW9uIGgoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDplLHR5cGU6dCxsaXN0ZW5lcjpufSxyPWguYmluZChpKTtyZXR1cm4gci5saXN0ZW5lcj1uLGkud3JhcEZuPXIscn1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgaT1lLl9ldmVudHM7aWYodm9pZCAwPT09aSlyZXR1cm5bXTt2YXIgcj1pW3RdO3JldHVybiB2b2lkIDA9PT1yP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIHI/bj9bci5saXN0ZW5lcnx8cl06W3JdOm4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7KytuKXRbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXTtyZXR1cm4gdH0ocik6dyhyLHIubGVuZ3RoKX1mdW5jdGlvbiBwKGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT10KXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gdyhlLHQpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCksaT0wO2k8dDsrK2kpbltpXT1lW2ldO3JldHVybiBufWZ1bmN0aW9uIGYoZSx0LG4saSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbilpLm9uY2U/ZS5vbmNlKHQsbik6ZS5vbih0LG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpO2UuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbiByKG8pe2kub25jZSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsciksbihvKX0pKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZTwwfHxyKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKTtzPWV9fSksby5pbml0PWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHMhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH0sby5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPDB8fHIoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2UrXCIuXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxvLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gYyh0aGlzKX0sby5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7dmFyIHI9XCJlcnJvclwiPT09ZSxvPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1vKXI9ciYmdm9pZCAwPT09by5lcnJvcjtlbHNlIGlmKCFyKXJldHVybiExO2lmKHIpe3ZhciBzO2lmKHQubGVuZ3RoPjAmJihzPXRbMF0pLHMgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBzO3ZhciBhPW5ldyBFcnJvcihcIlVuaGFuZGxlZCBlcnJvci5cIisocz9cIiAoXCIrcy5tZXNzYWdlK1wiKVwiOlwiXCIpKTt0aHJvdyBhLmNvbnRleHQ9cyxhfXZhciBjPW9bZV07aWYodm9pZCAwPT09YylyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKWkoYyx0aGlzLHQpO2Vsc2V7dmFyIGQ9Yy5sZW5ndGgsaD13KGMsZCk7Zm9yKG49MDtuPGQ7KytuKWkoaFtuXSx0aGlzLHQpfXJldHVybiEwfSxvLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBkKHRoaXMsZSx0LCExKX0sby5wcm90b3R5cGUub249by5wcm90b3R5cGUuYWRkTGlzdGVuZXIsby5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQodGhpcyxlLHQsITApfSxvLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5vbihlLGwodGhpcyxlLHQpKSx0aGlzfSxvLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5wcmVwZW5kTGlzdGVuZXIoZSxsKHRoaXMsZSx0KSksdGhpc30sby5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxzO2lmKGEodCksdm9pZCAwPT09KGk9dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT0obj1pW2VdKSlyZXR1cm4gdGhpcztpZihuPT09dHx8bi5saXN0ZW5lcj09PXQpMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTooZGVsZXRlIGlbZV0saS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLG4ubGlzdGVuZXJ8fHQpKTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pe2ZvcihyPS0xLG89bi5sZW5ndGgtMTtvPj0wO28tLSlpZihuW29dPT09dHx8bltvXS5saXN0ZW5lcj09PXQpe3M9bltvXS5saXN0ZW5lcixyPW87YnJlYWt9aWYocjwwKXJldHVybiB0aGlzOzA9PT1yP24uc2hpZnQoKTpmdW5jdGlvbihlLHQpe2Zvcig7dCsxPGUubGVuZ3RoO3QrKyllW3RdPWVbdCsxXTtlLnBvcCgpfShuLHIpLDE9PT1uLmxlbmd0aCYmKGlbZV09blswXSksdm9pZCAwIT09aS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHN8fHQpfXJldHVybiB0aGlzfSxvLnByb3RvdHlwZS5vZmY9by5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsby5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZih2b2lkIDA9PT0obj10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PW4ucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKTp2b2lkIDAhPT1uW2VdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTpkZWxldGUgbltlXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHIsbz1PYmplY3Qua2V5cyhuKTtmb3IoaT0wO2k8by5sZW5ndGg7KytpKVwicmVtb3ZlTGlzdGVuZXJcIiE9PShyPW9baV0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhyKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wLHRoaXN9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YodD1uW2VdKSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdCk7ZWxzZSBpZih2b2lkIDAhPT10KWZvcihpPXQubGVuZ3RoLTE7aT49MDtpLS0pdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHRbaV0pO3JldHVybiB0aGlzfSxvLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHUodGhpcyxlLCEwKX0sby5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiB1KHRoaXMsZSwhMSl9LG8ubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUubGlzdGVuZXJDb3VudD9lLmxpc3RlbmVyQ291bnQodCk6cC5jYWxsKGUsdCl9LG8ucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9cCxvLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/dCh0aGlzLl9ldmVudHMpOltdfX19LHQ9e307ZnVuY3Rpb24gbihpKXt2YXIgcj10W2ldO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgbz10W2ldPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmV4cG9ydHN9bi5uPWU9Pnt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/KCk9PmUuZGVmYXVsdDooKT0+ZTtyZXR1cm4gbi5kKHQse2E6dH0pLHR9LG4uZD0oZSx0KT0+e2Zvcih2YXIgaSBpbiB0KW4ubyh0LGkpJiYhbi5vKGUsaSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OnRbaV19KX0sbi5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KTt2YXIgaT17fTsoKCk9PntuLmQoaSx7TVM6KCk9Pm8sTV86KCk9PnMsaFk6KCk9PmEsRzQ6KCk9PmMsX1c6KCk9PmQsbzooKT0+aCxDMzooKT0+dSxmQjooKT0+bCxpZjooKT0+cCwkajooKT0+XyxVJDooKT0+eSxVNzooKT0+ZyxCNTooKT0+VH0pO3ZhciBlPW4oMTY4MSksdD1uKDk0MjEpLHI9bi5uKHQpO2NsYXNzIG8gZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlPVwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWRcIix0KXt2YXIgbjtzdXBlcihlKSx0JiYodGhpcy5pbm5lckVycm9yPXQmJnQpLHRoaXMuc3RhY2s9bnVsbD09PShuPXRoaXMuc3RhY2spfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnJlcGxhY2UoL14oXFx3KkVycm9yKS8sYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWApfX1jbGFzcyBzIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlPVwiVW5hYmxlIHRvIGF1dGhvcml6ZSBjb25uZWN0aW9uIHRvIFNhbGVzZm9yY2VcIix0KXt2YXIgbixpLHI7c3VwZXIoZSx0KSx0JiZ0LmlzQXhpb3NFcnJvciYmKHQubWVzc2FnZT1udWxsIT09KHI9bnVsbD09PShpPW51bGw9PT0obj10LnJlc3BvbnNlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5kYXRhKXx8dm9pZCAwPT09aT92b2lkIDA6aS5lcnJvcl9kZXNjcmlwdGlvbikmJnZvaWQgMCE9PXI/cjp0Lm1lc3NhZ2UpfX1jbGFzcyBhIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlPVwiTm90IGNvbm5lY3RlZCB0byBTYWxlc2ZvcmNlXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgYyBleHRlbmRzIG97Y29uc3RydWN0b3IoZT1cIlJldHJpZXZlIFNhbGVzZm9yY2Ugb2JqZWN0IGRhdGEgZmFpbGVkXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgZCBleHRlbmRzIG97Y29uc3RydWN0b3IoZT1cIkludmFsaWQgcGFyYW1ldGVyIGRldGVjdGVkXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgaCBleHRlbmRzIG97Y29uc3RydWN0b3IoZT1cIkV4ZWN1dGUgU2FsZXNmb3JjZSBxdWVyeSBmYWlsZWRcIix0KXtzdXBlcihlLHQpfX1jbGFzcyBsIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlPVwiVW5hYmxlIHRvIHJldHJpZXZlIHNlYXJjaCByZXN1bHRzIGZyb20gU2FsZXNmb3JjZVwiLHQpe3N1cGVyKGUsdCl9fWNsYXNzIHUgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKGUsdD1cIkV4ZWN1dGUgU2FsZXNmb3JjZSBSRVNUIEFQSSByZXF1ZXN0IGZhaWxlZFwiKXt2YXIgbixpLHIsbyxzO3N1cGVyKHQsbnVsbCE9ZT9lOnZvaWQgMCksdGhpcy5yZXN0QXBpRXJyb3JDb2RlPVwiXCIsdGhpcy5yZXN0QXBpRXJyb3JEZXNjcmlwdGlvbj1cIlwiLHRoaXMucmVzdEFwaVJlc3BvbnNlU3RhdHVzPXZvaWQgMDtjb25zdCBhPWU7aWYobnVsbD09YT92b2lkIDA6YS5pc0F4aW9zRXJyb3Ipe2lmKHRoaXMucmVzdEFwaVJlc3BvbnNlU3RhdHVzPW51bGw9PT0obj1hLnJlc3BvbnNlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdGF0dXMsIShudWxsPT09KHI9bnVsbD09PShpPWEucmVzcG9uc2UpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmRhdGEpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmxlbmd0aCkpcmV0dXJuO2NvbnN0IGU9bnVsbD09PShzPW51bGw9PT0obz1hLnJlc3BvbnNlKXx8dm9pZCAwPT09bz92b2lkIDA6by5kYXRhKXx8dm9pZCAwPT09cz92b2lkIDA6c1swXTtpZihlKXtjb25zdHtlcnJvckNvZGU6dCxtZXNzYWdlOm59PWU7dGhpcy5yZXN0QXBpRXJyb3JDb2RlPXQsdGhpcy5yZXN0QXBpRXJyb3JEZXNjcmlwdGlvbj1ufX19fWNsYXNzIHAgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKGU9XCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkXCIsdCl7c3VwZXIoZSx0KX19bGV0IHc9ITE7Y29uc3QgZj1cIltAb3BlbmZpbi9zYWxlc2ZvcmNlXVwiLHk9KCk9Pnt3PSExfSxnPSgpPT57dz0hMCx2KFwidjIuMS41XCIpfSxtPWU9PntpZih3JiYoZS5pbm5lckVycm9yP2NvbnNvbGUuZXJyb3IoZixlLFwiXFxuXFxuKGlubmVyKVwiLGUuaW5uZXJFcnJvcik6Y29uc29sZS5lcnJvcihmLGUpLGUgaW5zdGFuY2VvZiB1KSl7Y29uc3R7cmVzdEFwaUVycm9yQ29kZTp0LHJlc3RBcGlFcnJvckRlc2NyaXB0aW9uOm59PWU7aWYobil7Y29uc3QgZT1uLnJlcGxhY2UoL1xcbi9nLFwiIFwiKS50cmltKCksaT10P2Ake3R9OiAke2V9YDplO2NvbnNvbGUud2FybihmLGkpfX19LHY9KC4uLmUpPT57dyYmY29uc29sZS5sb2coZiwuLi5lKX0sQz0oLi4uZSk9Pnt3JiZjb25zb2xlLndhcm4oZiwuLi5lKX07ZS5IfHxPYmplY3QuYXNzaWduKHdpbmRvdyx7ZmluOnt9fSksT2JqZWN0LmFzc2lnbihlLkgse0ludGVncmF0aW9uczp7U2FsZXNmb3JjZTp7ZW5hYmxlTG9nZ2luZzpnLGRpc2FibGVMb2dnaW5nOnl9fX0pO2NvbnN0IEU9XCI1NC4wXCIseD0vdlhYXFwuWC9pLEE9ZT0+KEFycmF5LmlzQXJyYXkoZSk/ZTpPYmplY3QuZW50cmllcyhlKSkucmVkdWNlKCgoZSx0KT0+e2NvbnN0IG49QXJyYXkuaXNBcnJheShlKT90OnRbMV07bGV0IGk7c3dpdGNoKCEwKXtjYXNlIG51bGw9PW46aT1uO2JyZWFrO2Nhc2VcInN0cmluZ1wiPT10eXBlb2YgbjppPW4ucmVwbGFjZSh4LFwidjU0LjBcIik7YnJlYWs7Y2FzZSBBcnJheS5pc0FycmF5KG4pOmNhc2VcIm9iamVjdFwiPT10eXBlb2YgbjppPUEobik7YnJlYWs7ZGVmYXVsdDppPW59cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZS5wdXNoKGkpOmVbdFswXV09aSxlfSksQXJyYXkuaXNBcnJheShlKT9bXTp7fSksST1cInNhbGVzZm9yY2UtYXV0aFwiLGI9XCJodHRwczovL2xvZ2luLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL29hdXRoMi9zdWNjZXNzXCIsUD0oZSx0LG4pPT57ZS5hY2Nlc3NUb2tlbiYmd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGsodCxuKSxlLmFjY2Vzc1Rva2VuKSxlLnJlZnJlc2hUb2tlbiYmd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEYodCxuKSxlLnJlZnJlc2hUb2tlbil9LF89YXN5bmModCxuKT0+e2xldCBpO3RyeXtpPW5ldyBVUkwodCkub3JpZ2lufWNhdGNoKGUpe3Rocm93IG5ldyBkKFwiSW52YWxpZCBTYWxlc2ZvcmNlIFVSTFwiKX1pZighL3NhbGVzZm9yY2UuY29tJC9pLnRlc3QoaSkpdGhyb3cgbmV3IGQoXCJJbnZhbGlkIFNhbGVzZm9yY2UgVVJMXCIpO2lmKHZvaWQgMD09PShudWxsIT1uP246dm9pZCAwKXx8XCJcIj09PW4udHJpbSgpKXRocm93IG5ldyBkKFwiQ29uc3VtZXIga2V5IG5vdCBwcm92aWRlZFwiKTt2KGBDb25uZWN0aW5nIHRvICR7aX0gdXNpbmcga2V5ICR7bn1gKTtjb25zdCByPWF3YWl0IFQodCxuKTtpZihyKXJldHVybiByO3YoXCJObyBleGlzdGluZyBjb25uZWN0aW9uIGZvdW5kLCBzdGFydGluZyBhdXRoIGZsb3dcIik7Y29uc3Qgbz0oYXdhaXQgZS5ILkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0Q2hpbGRXaW5kb3dzKCkpLmZpbmQoKGU9PmUuaWRlbnRpdHkubmFtZT09PUkpKTtvJiZhd2FpdCBvLmNsb3NlKCEwKTtjb25zdCBjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLnRvU3RyaW5nKCksaD1SKCksbD1hd2FpdCBTKGgpLHU9YCR7aX0vc2VydmljZXMvb2F1dGgyL2F1dGhvcml6ZT9cXG4gICAgY2xpZW50X2lkPSR7bn0mXFxuICAgIHJlZGlyZWN0X3VyaT0ke2J9JlxcbiAgICByZXNwb25zZV90eXBlPWNvZGUmXFxuICAgIHNjb3BlPWFwaStyZWZyZXNoX3Rva2VuJlxcbiAgICBzdGF0ZT0ke2N9JlxcbiAgICBjb2RlX2NoYWxsZW5nZT0ke2x9JlxcbiAgICBkaXNwbGF5PXBvcHVwJlxcbiAgICBwcm9tcHQ9c2VsZWN0X2FjY291bnRcXG4gICAgYC5yZXBsYWNlKC9cXHMvZyxcIlwiKSxwPWF3YWl0IGUuSC5XaW5kb3cuY3JlYXRlKHthbHdheXNPblRvcDohMCxtYXhpbWl6YWJsZTohMSxtaW5pbWl6YWJsZTohMSxhdXRvU2hvdzohMSxkZWZhdWx0Q2VudGVyZWQ6ITAsZGVmYXVsdEhlaWdodDo3MDAsZGVmYXVsdFdpZHRoOjYwMCxpbmNsdWRlSW5TbmFwc2hvdHM6ITEsbmFtZTpJLHJlc2l6YWJsZTohMSxzYXZlV2luZG93U3RhdGU6ITEsc2hvd1Rhc2tiYXJJY29uOiExLHVybDp1fSksdz1hd2FpdCBuZXcgUHJvbWlzZSgoKGUsdCk9PntsZXQgbjtjb25zdCBpPXdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e3dpbmRvdy5jbGVhckludGVydmFsKG4pLHdpbmRvdy5jbGVhclRpbWVvdXQoaSkscC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSxwLmNsb3NlKCEwKTtjb25zdCBlPW5ldyBzKFwiQXV0aG9yaXphdGlvbiB0aW1lZCBvdXRcIik7bShlKSx0KGUpfSksM2U1KTtwLmFkZExpc3RlbmVyKFwiY2xvc2luZ1wiLChhc3luYygpPT57dihcIlVzZXIgY2xvc2VkIGF1dGggd2luZG93XCIpLHdpbmRvdy5jbGVhckludGVydmFsKG4pLHdpbmRvdy5jbGVhclRpbWVvdXQoaSkscC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtjb25zdCBlPW5ldyBzKFwiRmFpbGVkIHRvIGNvbXBsZXRlIGF1dGhvcml6YXRpb25cIik7bShlKSx0KGUpfSkpLG49d2luZG93LnNldEludGVydmFsKCgoKT0+KGFzeW5jKGUsdCxuLGkscixvKT0+e2xldCBhO3RyeXthPWF3YWl0IGUuZ2V0SW5mbygpfWNhdGNoKGUpe3dpbmRvdy5jbGVhckludGVydmFsKHQpLHdpbmRvdy5jbGVhclRpbWVvdXQobik7Y29uc3QgaT1uZXcgcyhcIkNvdWxkIG5vdCBsb2NhdGUgb2F1dGggZmxvdyB3aW5kb3dcIik7cmV0dXJuIG0oaSksbyhpKX1jb25zdCBjPW5ldyBVUkwoYS51cmwpO2lmKDA9PT1uZXcgVVJMKGEudXJsKS5ocmVmLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihiLnRvTG93ZXJDYXNlKCkpKXtpZih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0KSx3aW5kb3cuY2xlYXJUaW1lb3V0KG4pLGUucmVtb3ZlQWxsTGlzdGVuZXJzKCksZS5jbG9zZSghMCksYy5zZWFyY2hQYXJhbXMuZ2V0KFwic3RhdGVcIikhPT1pKXtjb25zdCBlPW5ldyBzKFwiU3RhdGUgbWlzbWF0Y2hcIik7cmV0dXJuIG0oZSksbyhlKX1jb25zdCBhPWMuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIik7aWYoIWEpe2NvbnN0IGU9bmV3IHMoXCJBdXRob3JpemF0aW9uIGNvZGUgbWlzc2luZ1wiKTtyZXR1cm4gbShlKSxvKGUpfXJldHVybiB2KFwiQXV0aG9yaXphdGlvbiBjb2RlIHJlY2VpdmVkXCIpLHIoYSl9Y29uc3QgZD1hd2FpdCBlLmV4ZWN1dGVKYXZhU2NyaXB0KFwid2luZG93LmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0XCIpLGg9bmV3IFVSTFNlYXJjaFBhcmFtcyhkKS5nZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiKTtpZihoKXt3aW5kb3cuY2xlYXJJbnRlcnZhbCh0KSx3aW5kb3cuY2xlYXJUaW1lb3V0KG4pLGUucmVtb3ZlQWxsTGlzdGVuZXJzKCksZS5jbG9zZSghMCk7Y29uc3QgaT1oWzBdLnRvVXBwZXJDYXNlKCkraC5zbGljZSgxKSxyPW5ldyBzKGkpO20ociksbyhyKX1lbHNlIGF3YWl0IGUuaXNTaG93aW5nKCl8fCh2KFwiU2hvd2luZyBhdXRoIHdpbmRvd1wiKSxhd2FpdCBlLnNob3coITApLGF3YWl0IGUuZm9jdXMoKSl9KShwLG4saSxjLGUsdCkpLDUwMCl9KSksZj1hd2FpdCBPKHcsaCxpLG4pO2lmKHYoXCJDaGVja2luZyBjb25uZWN0aW9uIHdpdGggbmV3IGFjY2VzcyB0b2tlblwiKSwhYXdhaXQgVShmLmFjY2Vzc1Rva2VuLGkpKXtjb25zdCBlPW5ldyBhKFwiSW52YWxpZCBTYWxlc2ZvcmNlIG9yZyBVUkwgb3IgYWNjZXNzIHRva2VuXCIpO3Rocm93IG0oZSksZX1yZXR1cm4gdihcIkNvbm5lY3Rpb24gZXN0YWJsaXNoZWRcIiksUChmLGksbikse2NvbnN1bWVyS2V5Om4sZGlzY29ubmVjdDpNKGksbiksZ2V0QXV0aFRva2VuczooKT0+TChpLG4pLG9yZ1VybDppLGV4ZWN1dGVBcGlSZXF1ZXN0OmooaSxuKX19LE09KGUsdCk9PmFzeW5jKCk9Pnt2KFwiRGlzY29ubmVjdGluZyBmcm9tIFNhbGVzZm9yY2VcIik7bGV0IG49d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEYoZSx0KSk7aWYobil2KFwiUmV2b2tpbmcgcmVmcmVzaCB0b2tlblwiKTtlbHNle2lmKG49d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGsoZSx0KSksIW4pcmV0dXJuIHZvaWQgdihcIk5vIHRva2VucyBmb3VuZCBpbiBzdG9yYWdlXCIpO3YoXCJSZXZva2luZyBhY2Nlc3MgdG9rZW5cIil9dHJ5e2F3YWl0IHIoKS5nZXQoYCR7ZX0vc2VydmljZXMvb2F1dGgyL3Jldm9rZT90b2tlbj0ke259YCl9Y2F0Y2goZSl7QyhcIkZhaWxlZCB0byByZXZva2UgdG9rZW5zXCIsbnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKX1OKGUsdCl9LE89YXN5bmMoZSx0LG4saSk9Pnt2KFwiRXhjaGFuZ2luZyBhdXRoIGNvZGUgZm9yIHRva2Vuc1wiKTtjb25zdCBvPWAke259L3NlcnZpY2VzL29hdXRoMi90b2tlbmAsYT1gXFxuICAgIGdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlJlxcbiAgICBjbGllbnRfaWQ9JHtpfSZcXG4gICAgY29kZT0ke2V9JlxcbiAgICBjb2RlX3ZlcmlmaWVyPSR7dH0mXFxuICAgIHJlZGlyZWN0X3VyaT0ke2J9XFxuICAgIGAucmVwbGFjZSgvXFxzL2csXCJcIik7bGV0IGM7dHJ5e2M9KGF3YWl0IHIoKS5wb3N0KG8sYSx7aGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwifX0pKS5kYXRhfWNhdGNoKGUpe2NvbnN0IHQ9bmV3IHMoXCJGYWlsZWQgdG8gZXhjaGFuZ2UgYXV0aG9yaXphdGlvbiBjb2RlIGZvciBhdXRoIHRva2Vuc1wiLGUpO3Rocm93IG0odCksdH1jb25zdHthY2Nlc3NfdG9rZW46ZCxyZWZyZXNoX3Rva2VuOmh9PWM7aWYoIWR8fCFoKXRocm93IG5ldyBzKFwiTWlzc2luZyBhY2Nlc3MgdG9rZW4gb3IgcmVmcmVzaCB0b2tlbiBkdXJpbmcgY29kZSBleGNoYW5nZVwiKTtyZXR1cm4gdihcIlRva2VucyByZWNlaXZlZFwiKSx7YWNjZXNzVG9rZW46ZCxyZWZyZXNoVG9rZW46aH19LFM9YXN5bmMgZT0+e2NvbnN0IHQ9KG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKGUpLG49YXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLHQpO3JldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KG4pKSkpLnJlcGxhY2UoL1xcKy9nLFwiLVwiKS5yZXBsYWNlKC9cXC8vZyxcIl9cIikucmVwbGFjZSgvPStcXCQvLFwiXCIpfSxSPSgpPT57Y29uc3QgZT1uZXcgVWludDMyQXJyYXkoNjQpO3JldHVybiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhlKSxBcnJheS5mcm9tKGUsKGU9PmAwJHtlLnRvU3RyaW5nKDE2KX1gLnN1YnN0cigtMikpKS5qb2luKFwiXCIpfSxrPShlLHQpPT5gYWNjZXNzLXRva2VuXyNfJHtuZXcgVVJMKGUpLmhvc3RuYW1lfV8jXyR7dH1gLEw9KGUsdCk9Pih7YWNjZXNzVG9rZW46d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGsoZSx0KSkscmVmcmVzaFRva2VuOndpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShGKGUsdCkpfSksVD1hc3luYyhlLHQpPT57bGV0IG47aWYodihcIkNoZWNraW5nIGZvciBleGlzdGluZyBjb25uZWN0aW9uXCIpLCFlfHwhdClyZXR1cm4gbnVsbDt0cnl7bj1uZXcgVVJMKGUpLm9yaWdpbn1jYXRjaChlKXtyZXR1cm4gbnVsbH1jb25zdHthY2Nlc3NUb2tlbjppfT1MKG4sdCk7aWYoIWkpcmV0dXJuIG51bGw7aWYoIWF3YWl0IFUoaSxuKSl0cnl7YXdhaXQgQihuLHQpfWNhdGNoKGUpe3JldHVybiBudWxsfXJldHVybiB2KGBDb25uZWN0aW9uIGV4aXN0cyB0byAke2V9YCkse2NvbnN1bWVyS2V5OnQsZGlzY29ubmVjdDpNKG4sdCksZ2V0QXV0aFRva2VuczooKT0+TChuLHQpLG9yZ1VybDpuLGV4ZWN1dGVBcGlSZXF1ZXN0Omoobix0KX19LGo9KGUsdCk9PmFzeW5jKG4saSxvLHMsYyk9Pntjb25zdHthY2Nlc3NUb2tlbjpofT1MKGUsdCk7aWYoIWgpe2NvbnN0IGU9bmV3IGE7dGhyb3cgbShlKSxlfWNvbnN0IGw9dD0+KGFzeW5jKGUsdCxuLGk9XCJHRVRcIixvPXt9LHM9e30sYT0hMCk9Pnt2YXIgYyxoO2lmKCFuKXRocm93IG5ldyBkKFwiQVBJIGVuZHBvaW50IG5vdCBwcm92aWRlZFwiKTtsZXQgbDtpZihuPShoPW4pLnN0YXJ0c1dpdGgoXCIvXCIpP2g6YC8ke2h9YCwvXlxcL3NlcnZpY2VzXFwvZGF0YVxcL1xcdysvaS50ZXN0KG4pKXtjb25zdCBlPW51bGw9PT0oYz0vXFwvdihcXHd7Mn1cXC5cXHcpXFwvLy5leGVjKG4pKXx8dm9pZCAwPT09Yz92b2lkIDA6Y1sxXTtpZighZSl0aHJvdyBuZXcgdShudWxsLFwiUkVTVCBBUEkgdmVyc2lvbiBub3Qgc3BlY2lmaWVkXCIpO3gudGVzdChuKT9uPW4ucmVwbGFjZShlLEUpOmUhPT1FJiZDKGBSZXF1ZXN0ZWQgUkVTVCBBUEkgdmVyc2lvbiAoJHtlfSkgaXMgZGlmZmVyZW50IHRvIHRoZSBjdXJyZW50IHN1cHBvcnRlZCB2ZXJzaW9uICg1NC4wKS4gVXNpbmcgYW4gQVBJIHZlcnNpb24gb3RoZXIgdGhhbiBjdXJyZW50IHN1cHBvcnRlZCB2ZXJzaW9uIG1heSBjYXVzZSBlcnJvcnMuYCksbD1uZXcgUmVnRXhwKFwiL3NlcnZpY2VzL2RhdGEvdjU0LjAvY29tcG9zaXRlXCIsXCJpXCIpLnRlc3Qobik/QShvKTpvfWVsc2UgbD1vO3YoYEV4ZWN1dGluZyAke2kudG9VcHBlckNhc2UoKX0gQVBJIHJlcXVlc3QgdG8gJHtufWAsbCxzKSxhJiZPYmplY3QuYXNzaWduKHMse0F1dGhvcml6YXRpb246YEJlYXJlciAke3R9YH0pO3RyeXtsZXQgdDtzd2l0Y2goaS50b1VwcGVyQ2FzZSgpKXtjYXNlXCJERUxFVEVcIjp0PWF3YWl0IHIoKS5kZWxldGUoYCR7ZX0ke259YCx7aGVhZGVyczpzfSk7YnJlYWs7Y2FzZVwiR0VUXCI6dD1hd2FpdCByKCkuZ2V0KGAke2V9JHtufWAse2hlYWRlcnM6c30pO2JyZWFrO2Nhc2VcIkhFQURcIjp0PWF3YWl0IHIoKS5oZWFkKGAke2V9JHtufWAse2hlYWRlcnM6c30pO2JyZWFrO2Nhc2VcIlBBVENIXCI6dD1hd2FpdCByKCkucGF0Y2goYCR7ZX0ke259YCxvLHtoZWFkZXJzOnN9KTticmVhaztjYXNlXCJQT1NUXCI6dD1hd2FpdCByKCkucG9zdChgJHtlfSR7bn1gLGwse2hlYWRlcnM6c30pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IHUobnVsbCxcIkludmFsaWQgSFRUUCBtZXRob2RcIil9cmV0dXJue2RhdGE6dC5kYXRhLHN0YXR1czp0LnN0YXR1c319Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIHUpdGhyb3cgZTt0aHJvdyBuZXcgdShlKX19KShlLHQsbixpLG8scyxjKTtsZXQgcDt0cnl7cD1hd2FpdCBsKGgpfWNhdGNoKG4pe2lmKCEobiBpbnN0YW5jZW9mIHUpKXRocm93IG0obiksbjtyZXR1cm4gYXdhaXQgJChuLGUsdCxoLGwpfXJldHVybiBwfSxGPShlLHQpPT5gcmVmcmVzaC10b2tlbl8jXyR7bmV3IFVSTChlKS5ob3N0bmFtZX1fI18ke3R9YCwkPWFzeW5jKGUsdCxuLGkscik9PntpZihtKGUpLGF3YWl0IEcoZSx0LGkpKXRyeXtjb25zdCBlPWF3YWl0IEIodCxuKTtyZXR1cm4gdihcIlJldHJ5aW5nIHJlcXVlc3RcIiksYXdhaXQgcihlLmFjY2Vzc1Rva2VuKX1jYXRjaChlKXt0aHJvdyBtKGUpLGV9dGhyb3cgZX0sQj1hc3luYyhlLHQpPT57dmFyIG4saTtjb25zdHtyZWZyZXNoVG9rZW46b309TChlLHQpO2lmKCFvKXRocm93IE4oZSx0KSxuZXcgYShcIk5vIHJlZnJlc2ggdG9rZW4gYXZhaWxhYmxlXCIpO3YoXCJSZWZyZXNoaW5nIGFjY2VzcyB0b2tlblwiKTtjb25zdCBzPWAke2V9L3NlcnZpY2VzL29hdXRoMi90b2tlbmAsYz1gXFxuICAgIGdyYW50X3R5cGU9cmVmcmVzaF90b2tlbiZcXG4gICAgY2xpZW50X2lkPSR7dH0mXFxuICAgIHJlZnJlc2hfdG9rZW49JHtvfVxcbiAgICBgLnJlcGxhY2UoL1xccy9nLFwiXCIpO2xldCBkO3RyeXtkPShhd2FpdCByKCkucG9zdChzLGMse2hlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn19KSkuZGF0YX1jYXRjaChyKXtjb25zdCBvPW51bGw9PT0oaT1udWxsPT09KG49ci5yZXNwb25zZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZGF0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZXJyb3JfZGVzY3JpcHRpb24scz1cIkZhaWxlZCB0byByZWZyZXNoIGFjY2VzcyB0b2tlblwiO3Rocm93IHYobz9gJHtzfTogJHtvfWA6cyksTihlLHQpLG5ldyBhKHMpfWNvbnN0e2FjY2Vzc190b2tlbjpofT1kO2lmKCFoKXRocm93IG5ldyBhKFwiTWlzc2luZyBhY2Nlc3MgdG9rZW4gYWZ0ZXIgcmVmcmVzaGluZ1wiKTtjb25zdCBsPXthY2Nlc3NUb2tlbjpoLHJlZnJlc2hUb2tlbjpvfTtyZXR1cm4gUChsLGUsdCksbH0sTj0oZSx0KT0+e3dpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKGUsdCkpLHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShGKGUsdCkpfSxHPWFzeW5jKGUsdCxuKT0+e3ZhciBpO3JldHVybihcIk5ldHdvcmsgRXJyb3JcIj09PShudWxsPT09KGk9ZS5pbm5lckVycm9yKXx8dm9pZCAwPT09aT92b2lkIDA6aS5tZXNzYWdlKXx8XCJOZXR3b3JrIEVycm9yXCI9PT1lLm1lc3NhZ2UpJiYhYXdhaXQgVShuLHQpfSxVPWFzeW5jKGUsdCk9Pnt0cnl7YXdhaXQgcigpLmdldChgJHt0fS9zZXJ2aWNlcy9vYXV0aDIvdXNlcmluZm8/b2F1dGhfdG9rZW49JHtlfWApfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEwfX0pKCk7dmFyIHI9aS5NUyxvPWkuTV8scz1pLmhZLGE9aS5HNCxjPWkuX1csZD1pLm8saD1pLkMzLGw9aS5mQix1PWkuaWYscD1pLiRqLHc9aS5VJCxmPWkuVTcseT1pLkI1O2V4cG9ydHtyIGFzIEFwaUVycm9yLG8gYXMgQXV0aG9yaXphdGlvbkVycm9yLHMgYXMgQ29ubmVjdGlvbkVycm9yLGEgYXMgT2JqZWN0RGF0YUVycm9yLGMgYXMgUGFyYW1ldGVyRXJyb3IsZCBhcyBRdWVyeUVycm9yLGggYXMgUmVzdEFwaUVycm9yLGwgYXMgU2VhcmNoRXJyb3IsdSBhcyBXb3Jrc3BhY2VFcnJvcixwIGFzIGNvbm5lY3QsdyBhcyBkaXNhYmxlTG9nZ2luZyxmIGFzIGVuYWJsZUxvZ2dpbmcseSBhcyBnZXRDb25uZWN0aW9ufTsiLCIoKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17NzAzOihlLHQsbik9PntuLnIodCksbi5kKHQse0NMSUFjdGlvbjooKT0+bC5QdCxDTElGaWx0ZXJPcHRpb25UeXBlOigpPT5sLmVsLENMSVRlbXBsYXRlOigpPT5sLnlXLGRlcmVnaXN0ZXI6KCk9PmV0LGhpZGU6KCk9Pm50LHJlZ2lzdGVyOigpPT5ZZSxzaG93OigpPT50dH0pO3ZhciBvPXt9O24ucihvKSxuLmQobyx7c3Vic2NyaWJlOigpPT5hZX0pO3ZhciByPXt9O24ucihyKSxuLmQocix7Y3JlYXRlOigpPT5IZX0pO3ZhciBpPW4oNjc4KSxzPW4oNTMyKSxhPW4oNDM2KTtjb25zdCBjPVwiaG9tZVwiO3ZhciBkOyFmdW5jdGlvbihlKXtlLkNvbW1hbmRzPVwiaG9tZS1jb21tYW5kc1wifShkfHwoZD17fSkpO3ZhciB1LHA9big4MDYpLGw9KG4oMjk4KSxuKDc1OCkpO24oMTE0KSxuKDEwOSksbig0MjcpOyFmdW5jdGlvbihlKXtlW2UuSW5pdGlhbD0wXT1cIkluaXRpYWxcIixlW2UuT3Blbj0xXT1cIk9wZW5cIixlW2UuQ2xvc2U9Ml09XCJDbG9zZVwifSh1fHwodT17fSkpO3ZhciBmPW4oMzE2KTtjb25zdCB3PVwiYWxsXCIsZz1cIjBcIixoPVwiNVwiLHk9XCI2XCIsdj0oKT0+e307ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlP2Ake2V9LSR7dH1gOnR9ZnVuY3Rpb24gUyhlKXtyZXR1cm5gX19zZWFyY2gtJHtlfS10b3BpY19fYH1jb25zdCBQPW5ldyBNYXA7ZnVuY3Rpb24gQyhlLHQpe1AuaGFzKGUpfHxQLnNldChlLG5ldyBTZXQpLFAuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBrKGUsdCl7Y29uc3Qgbj1QLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBXPW5ldyBNYXA7ZnVuY3Rpb24gUihlLHQpe1cuaGFzKGUpfHxXLnNldChlLG5ldyBTZXQpLFcuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBUKGUsdCl7Y29uc3Qgbj1XLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBJPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gYihlLHQpe0kuaGFzKGUpfHxJLnNldChlLG5ldyBNYXApLEkuZ2V0KGUpLnNldCh0LmlkLHQpO2NvbnN0IG49UC5nZXQoZSk7aWYoIW4pcmV0dXJuO2NvbnN0IG89Wy4uLm5dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwobyl9YXN5bmMgZnVuY3Rpb24gRChlLHQpe2NvbnN0IG49SS5nZXQoZSk7aWYoIW4pcmV0dXJuO24uZGVsZXRlKHQpO2NvbnN0IG89Vy5nZXQoZSk7aWYoIW8pcmV0dXJuO2NvbnN0IHI9Wy4uLm9dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwocil9ZnVuY3Rpb24gQihlKXtyZXR1cm4gSS5nZXQoZSk/Wy4uLkkuZ2V0KGUpLnZhbHVlcygpXTpbXX1mdW5jdGlvbiBGKGUpe2NvbnN0IHQ9SS5nZXQoZSk7dCYmdC5jbGVhcigpfWZ1bmN0aW9uIEwoZSx0KXtjb25zdCBuPUkuZ2V0KGUpO3JldHVybiBuP24uZ2V0KHQpOm51bGx9ZnVuY3Rpb24gQShlLHQsbil7cmV0dXJuey4uLmUsYWN0aW9uOm58fHsuLi5lLmFjdGlvbnNbMF0sdHJpZ2dlcjpmLnB4LlVzZXJBY3Rpb259LGRpc3BhdGNoZXJJZGVudGl0eTp0fX1mdW5jdGlvbiBPKGUsdCxuPVwiYXNjZW5kaW5nXCIpe2NvbnN0IG89ZXx8W107aWYoIXQ/Lmxlbmd0aClyZXR1cm4gbztjb25zdCByPVtdLGk9bmV3IE1hcDt0LmZvckVhY2goKGU9PntpZihlLmtleSlyZXR1cm4gaS5zZXQoZS5rZXksZSk7ci5wdXNoKGUpfSkpO2xldCBzPW8ubWFwKChlPT57Y29uc3R7a2V5OnR9PWU7aWYodCYmaS5oYXModCkpe2NvbnN0IGU9aS5nZXQodCk7cmV0dXJuIGkuZGVsZXRlKHQpLGV9cmV0dXJuIGV9KSk7cmV0dXJuIHMucHVzaCguLi5pLnZhbHVlcygpLC4uLnIpLHM9XCJhc2NlbmRpbmdcIj09PW4/cy5zb3J0KCgoZSx0KT0+KG51bGwhPT1lLnNjb3JlJiZ2b2lkIDAhPT1lLnNjb3JlP2Uuc2NvcmU6MS8wKS0obnVsbCE9PXQuc2NvcmUmJnZvaWQgMCE9PXQuc2NvcmU/dC5zY29yZToxLzApKSk6cy5zb3J0KCgoZSx0KT0+KG51bGwhPT10LnNjb3JlJiZ2b2lkIDAhPT10LnNjb3JlP3Quc2NvcmU6MS8wKS0obnVsbCE9PWUuc2NvcmUmJnZvaWQgMCE9PWUuc2NvcmU/ZS5zY29yZToxLzApKSksc31mdW5jdGlvbiB4KGUpe2NvbnN0IHQ9e307bGV0IG49W107bGV0IG89W107bGV0IHI9dS5Jbml0aWFsO3QuZ2V0U3RhdHVzPSgpPT5yLHQuZ2V0UmVzdWx0QnVmZmVyPSgpPT5uLHQuc2V0UmVzdWx0QnVmZmVyPWU9PntuPWUsbj8ubGVuZ3RoJiZ0Lm9uQ2hhbmdlKCl9LHQuZ2V0UmV2b2tlZEJ1ZmZlcj0oKT0+byx0LnNldFJldm9rZWRCdWZmZXI9ZT0+e289ZSxvPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5vbkNoYW5nZT12O2NvbnN0IGk9e307cmV0dXJuIHQucmVzPWksaS5jbG9zZT0oKT0+e3IhPT11LkNsb3NlJiYocj11LkNsb3NlLHQub25DaGFuZ2UoKSl9LGkub3Blbj0oKT0+e3IhPT11Lk9wZW4mJihyPXUuT3Blbix0Lm9uQ2hhbmdlKCkpfSxpLnJlc3BvbmQ9bj0+e2NvbnN0IG89Tyh0LmdldFJlc3VsdEJ1ZmZlcigpLG4sZSk7dC5zZXRSZXN1bHRCdWZmZXIobyl9LGkucmV2b2tlPSguLi5lKT0+e2NvbnN0IG49bmV3IFNldChlKSxvPXQuZ2V0UmVzdWx0QnVmZmVyKCkuZmlsdGVyKCgoe2tleTplfSk9Pntjb25zdCB0PW4uaGFzKGUpO3JldHVybiB0JiZuLmRlbGV0ZShlKSwhdH0pKTt0LnNldFJlc3VsdEJ1ZmZlcihvKSxuLnNpemUmJih0LmdldFJldm9rZWRCdWZmZXIoKS5mb3JFYWNoKChlPT5uLmFkZChlKSkpLHQuc2V0UmV2b2tlZEJ1ZmZlcihbLi4ubl0pKX0sdH1mdW5jdGlvbiBFKGUsdCxuKXtjb25zdCBvPW5ldyBTZXQ7bGV0IHI9ITE7cmV0dXJue2Nsb3NlOigpPT57cj0hMDtmb3IoY29uc3QgZSBvZiBvKWUoKX0scmVxOntpZDp0LHRvcGljOmUsLi4ubixjb250ZXh0Om4/LmNvbnRleHR8fHt9LG9uQ2xvc2U6ZT0+e28uYWRkKGUpLHImJmUoKX0scmVtb3ZlTGlzdGVuZXI6ZT0+e28uZGVsZXRlKGUpfX19fWZ1bmN0aW9uIFYoKXtyZXR1cm57bmFtZTpmaW4ubWUubmFtZSx1dWlkOmZpbi5tZS51dWlkfX1mdW5jdGlvbiBNKCl7bGV0IGU7dHJ5e2NvbnN0IHQ9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7aWYoIXQ/LmlkZW50aXR5KXJldHVybjtlPXQuaWRlbnRpdHkudXVpZH1jYXRjaChlKXt9cmV0dXJuIGV9Y29uc3QgXz1cImRlcmVnaXN0ZXJlZCBvciBkb2VzIG5vdCBleGlzdFwiLCQ9bmV3IEVycm9yKGBwcm92aWRlciAke199YCkscT1uZXcgRXJyb3IoXCJwcm92aWRlciB3aXRoIG5hbWUgYWxyZWFkeSBleGlzdHNcIiksRz1uZXcgRXJyb3IoXCJiYWQgcGF5bG9hZFwiKSxIPW5ldyBFcnJvcihcInN1YnNjcmlwdGlvbiByZWplY3RlZFwiKSxOPW5ldyBFcnJvcihgY2hhbm5lbCAke199YCksVT1uZXcgTWFwO2Z1bmN0aW9uIGooZSl7Y29uc3QgdD1YKGUpO2lmKHQpcmV0dXJuIHQ7dGhyb3cgTn1mdW5jdGlvbiBYKGUpe2NvbnN0IHQ9VS5nZXQoZSk7aWYodClyZXR1cm4gdH1mdW5jdGlvbiBLKGUsdCl7VS5zZXQoZSx0KX1jb25zdCBKPW5ldyBNYXA7ZnVuY3Rpb24geihlKXtKLmhhcyhlKXx8Si5zZXQoZSxuZXcgTWFwKTtjb25zdCB0PUouZ2V0KGUpO3JldHVybntnZXRSZXF1ZXN0c0ZvcklkZW50aXR5OmU9Pntjb25zdCBuPWZ1bmN0aW9uKGUpe3JldHVybmAke2UudXVpZH06JHtlLm5hbWV9YH0oZSk7cmV0dXJuIHQuaGFzKG4pfHx0LnNldChuLG5ldyBNYXApLHQuZ2V0KG4pfX19YXN5bmMgZnVuY3Rpb24gWihlLHQpe3JldHVybihhd2FpdCBqKGUpKS5kaXNwYXRjaChnLHQpfWZ1bmN0aW9uIFEoe25hbWVzcGFjZWRUb3BpYzplLHRvcGljOnR9KXtjb25zdCBuPUwuYmluZChudWxsLGUpLG89eihlKSxyPVouYmluZChudWxsLGUpO3JldHVybiBhc3luYyhlLGkpPT57aWYoIWV8fCFlLmlkfHwhZS5wcm92aWRlcklkKXtjb25zdCBlPUc7cmV0dXJue2Vycm9yOmUubWVzc2FnZX19Y29uc3R7aWQ6cyxwcm92aWRlcklkOmF9PWUsYz1uKGEpO2lmKCFjKXtjb25zdCBlPSQ7cmV0dXJue2Vycm9yOmUubWVzc2FnZX19Y29uc3QgZD1vLmdldFJlcXVlc3RzRm9ySWRlbnRpdHkoaSk7bGV0IHU9ZC5nZXQoZS5pZCk7dXx8KHU9RSh0LHMsZSksZC5zZXQoZS5pZCx1KSk7Y29uc3QgcD14KCksbD0oKT0+e2NvbnN0IGU9cC5nZXRSZXN1bHRCdWZmZXIoKTtwLnNldFJlc3VsdEJ1ZmZlcihbXSk7Y29uc3QgdD1wLmdldFJldm9rZWRCdWZmZXIoKTtwLnNldFJldm9rZWRCdWZmZXIoW10pO2NvbnN0IG49cC5nZXRTdGF0dXMoKTtyKHtpZDpzLHByb3ZpZGVySWQ6YSxyZXN1bHRzOmUscmV2b2tlZDp0LHN0YXR1czpufSl9O2xldCBmPSEwLHc9ITE7cC5vbkNoYW5nZT0oKT0+e2lmKGYpcmV0dXJuIGY9ITEsdm9pZCBsKCk7d3x8KHc9ITAsc2V0VGltZW91dCgoKCk9Pnt3PSExLGwoKX0pLDEwMCkpfTt0cnl7Y29uc3R7cmVzdWx0czplLGNvbnRleHQ6dH09YXdhaXQgYy5vblVzZXJJbnB1dCh1LnJlcSxwLnJlcyksbj1wLmdldFN0YXR1cygpO3JldHVybntpZDpzLHByb3ZpZGVySWQ6YSxzdGF0dXM6bixyZXN1bHRzOmUsY29udGV4dDp0fX1jYXRjaChlKXtyZXR1cm57aWQ6cyxwcm92aWRlcklkOmEsZXJyb3I6ZS5tZXNzYWdlfX19fWFzeW5jIGZ1bmN0aW9uIFkoZSx0LG4pe2NvbnN0IG89bnx8YXdhaXQgaihlKSxyPVYoKSxpPXtpZGVudGl0eTpyLC4uLnQsb25Vc2VySW5wdXQ6dm9pZCAwLG9uUmVzdWx0RGlzcGF0Y2g6dm9pZCAwfSxzPWF3YWl0IG8uZGlzcGF0Y2goXCIyXCIsaSk7cmV0dXJuIGF3YWl0IGIoZSx7aWRlbnRpdHk6ciwuLi50fSksc31hc3luYyBmdW5jdGlvbiBlZShlLHQpe2NvbnN0IG49YXdhaXQgaihlKTtyZXR1cm4gYXdhaXQgbi5kaXNwYXRjaChcIjNcIix0KSxEKGUsdCl9YXN5bmMgZnVuY3Rpb24gdGUoZSx0LG4sbyl7Y29uc3Qgcj1BKG4sVigpLG8pLGk9TChlLHQpO2lmKGkpe2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6ZX09aTtpZighZSlyZXR1cm47cmV0dXJuIGUocil9Y29uc3Qgcz17cHJvdmlkZXJJZDp0LHJlc3VsdDpyfTtyZXR1cm4oYXdhaXQgaihlKSkuZGlzcGF0Y2goaCxzKX1hc3luYyBmdW5jdGlvbiBuZShlLHQpe2NvbnN0IG49ey4uLnQsY29udGV4dDp0Py5jb250ZXh0fHx7fX0sbz17fSxyPWFzeW5jIGZ1bmN0aW9uKihlLHQse3NldFN0YXRlOm59KXtjb25zdCBvPWF3YWl0IGooZSk7Zm9yKDs7KXtjb25zdCBlPWF3YWl0IG8uZGlzcGF0Y2goXCIxXCIsdCkscj1lLmVycm9yO2lmKHIpdGhyb3cgbmV3IEVycm9yKHIpO2NvbnN0IGk9ZTtpZih0LmlkPWkuaWQsbihpLnN0YXRlKSxpLmRvbmUpcmV0dXJuIGkudmFsdWU7eWllbGQgaS52YWx1ZX19KGUsbix7c2V0U3RhdGU6ZT0+e28uc3RhdGU9ZX19KTtsZXQgaT1hd2FpdCByLm5leHQoKTtyZXR1cm4gby5pZD1uLmlkLG8uY2xvc2U9KCk9PnshYXN5bmMgZnVuY3Rpb24oZSx0KXsoYXdhaXQgaihlKSkuZGlzcGF0Y2goeSx7aWQ6dH0pfShlLG8uaWQpfSxvLm5leHQ9KCk9PntpZihpKXtjb25zdCBlPWk7cmV0dXJuIGk9dm9pZCAwLGV9cmV0dXJuIHIubmV4dCgpfSxvfWFzeW5jIGZ1bmN0aW9uIG9lKGUpe3JldHVybihhd2FpdCBqKGUpKS5kaXNwYXRjaChcIjRcIixudWxsKX1hc3luYyBmdW5jdGlvbiByZShlKXtjb25zdCB0PWF3YWl0IGooZSk7dmFyIG47bj1lLFUuZGVsZXRlKG4pLEYoZSksYXdhaXQgdC5kaXNjb25uZWN0KCl9ZnVuY3Rpb24gaWUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj16KHQpO3JldHVybiBhc3luYyBvPT57aWYoIVgodCkpcmV0dXJuO2NvbnN0IHI9bi5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KG8pO2Zvcihjb25zdHtyZXE6ZSxjbG9zZTp0fW9mIHIudmFsdWVzKCkpdCgpLHIuZGVsZXRlKGUuaWQpO0sodCwoYXN5bmMgZT0+e2NvbnN0e25hbWVzcGFjZWRUb3BpYzp0fT1lLG49YXdhaXQgc2UoZSk7Zm9yKGNvbnN0IGUgb2YgQih0KSlhd2FpdCBZKHQsZSxuKTtyZXR1cm4gbn0pKGUpKX19YXN5bmMgZnVuY3Rpb24gc2UoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1TKHQpLG89YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7Zm9yKGxldCB0PTA7dDw1MDt0KyspdHJ5e3JldHVybiBhd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7d2FpdDohMX0pfWNhdGNoKGUpe2lmKDQ5PT09dCl0aHJvdyBlO2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsMWUzKSkpfX0obik7cmV0dXJuIG8ucmVnaXN0ZXIoZyxRKGUpKSxvLnJlZ2lzdGVyKHksZnVuY3Rpb24oZSl7Y29uc3QgdD16KGUpO3JldHVybihlLG4pPT57Y29uc3Qgbz10LmdldFJlcXVlc3RzRm9ySWRlbnRpdHkobikscj1vLmdldChlLmlkKTtyJiYoci5jbG9zZSgpLG8uZGVsZXRlKGUuaWQpKX19KHQpKSxvLnJlZ2lzdGVyKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCBvPUwoZSx0LnByb3ZpZGVySWQpO2lmKCFvKXJldHVybjtjb25zdHtvblJlc3VsdERpc3BhdGNoOnJ9PW87cmV0dXJuIHI/KHQucmVzdWx0LmRpc3BhdGNoZXJJZGVudGl0eT1uLHIodC5yZXN1bHQpKTp2b2lkIDB9fSh0KSksby5vbkRpc2Nvbm5lY3Rpb24oaWUoZSkpLG99YXN5bmMgZnVuY3Rpb24gYWUoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fHcsbj0oXCJzdHJpbmdcIj09dHlwZW9mIGU/bnVsbDplPy51dWlkKXx8TSgpLG89bShuLHQpLHI9e3RvcGljOnQsbmFtZXNwYWNlOm4sbmFtZXNwYWNlZFRvcGljOm99O2xldCBpPVgobyk7cmV0dXJuIGl8fChpPXNlKHIpLEsobyxpKSxhd2FpdCBpKSx7Z2V0QWxsUHJvdmlkZXJzOm9lLmJpbmQobnVsbCxvKSxyZWdpc3RlcjpZLmJpbmQobnVsbCxvKSxzZWFyY2g6bmUuYmluZChudWxsLG8pLGRlcmVnaXN0ZXI6ZWUuYmluZChudWxsLG8pLGRpc3BhdGNoOnRlLmJpbmQobnVsbCxvKSxkaXNjb25uZWN0OnJlLmJpbmQobnVsbCxvKX19Y29uc3QgY2U9bmV3IE1hcDtmdW5jdGlvbiBkZShlKXtjb25zdCB0PXVlKGUpO2lmKHQpcmV0dXJuIHQ7dGhyb3cgTn1mdW5jdGlvbiB1ZShlKXtjb25zdCB0PWNlLmdldChlKTtpZih0KXJldHVybiB0fWNvbnN0IHBlPW5ldyBNYXA7ZnVuY3Rpb24gbGUoZSx0KXtwZS5oYXMoZSl8fHBlLnNldChlLG5ldyBTZXQpLHBlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gZmUoZSx0KXtjb25zdCBuPXBlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1mdW5jdGlvbiB3ZShlKXtyZXR1cm5bLi4uQihlKV0ubWFwKChlPT4oey4uLmUsb25Vc2VySW5wdXQ6dm9pZCAwLG9uUmVzdWx0RGlzcGF0Y2g6dm9pZCAwfSkpKX1hc3luYyBmdW5jdGlvbiBnZShlLHQpe2lmKEwoZSx0LmlkKSl0aHJvdyBuZXcgRXJyb3IoXCJwcm92aWRlciB3aXRoIG5hbWUgYWxyZWFkeSBleGlzdHNcIik7Y29uc3Qgbj1WKCk7YXdhaXQgYihlLHtpZGVudGl0eTpuLC4uLnR9KX1mdW5jdGlvbiBoZShlLHQpe0QoZSx0KX1hc3luYyBmdW5jdGlvbiB5ZShlLHQsbixvKXtjb25zdCByPUwoZSx0KTtpZighcil0aHJvdyAkO2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6aX09cjtpZighaSlyZXR1cm47cmV0dXJuIGkoQShuLFYoKSxvKSl9YXN5bmMgZnVuY3Rpb24qdmUoZSx0LG4pe2NvbnN0IG89ZnVuY3Rpb24oZSx0KXtjb25zdCBuPVtdLG89W10scj1bXSxpPVtdO2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9eChzLnNjb3JlT3JkZXIpLGE9e3Jlc3VsdHM6W10scHJvdmlkZXI6e2lkOnMuaWQsaWRlbnRpdHk6cy5pZGVudGl0eSx0aXRsZTpzLnRpdGxlLHNjb3JlT3JkZXI6cy5zY29yZU9yZGVyLGljb246cy5pY29uLGRpc3BhdGNoRm9jdXNFdmVudHM6cy5kaXNwYXRjaEZvY3VzRXZlbnRzfX07bi5wdXNoKGEpLG8ucHVzaChlKTtjb25zdCBjPShhc3luYygpPT57dHJ5e2NvbnN0e3Jlc3VsdHM6bixjb250ZXh0Om99PWF3YWl0IHMub25Vc2VySW5wdXQodCxlLnJlcyk7YS5yZXN1bHRzPU8oYS5yZXN1bHRzLG4pLGEuY29udGV4dD17Li4uYS5jb250ZXh0LC4uLm99fWNhdGNoKGUpe2EuZXJyb3I9ZX19KSgpO2MuZmluYWxseSgoKCk9PntjLmRvbmU9ITB9KSksaS5wdXNoKGMpLHIucHVzaChyLmxlbmd0aCl9cmV0dXJue3Byb3ZpZGVyUmVzcG9uc2VzOm4sbGlzdGVuZXJSZXNwb25zZXM6byxvcGVuTGlzdGVuZXJSZXNwb25zZXM6cixpbml0aWFsUmVzcG9uc2VQcm9taXNlczppfX0odC50YXJnZXRzP3QudGFyZ2V0cy5tYXAoKHQ9PkwoZSx0KSkpLmZpbHRlcigoZT0+ISFlKSk6Wy4uLkIoZSkuZmlsdGVyKChlPT4hZS5oaWRkZW4pKV0sdCkse3Byb3ZpZGVyUmVzcG9uc2VzOnIsbGlzdGVuZXJSZXNwb25zZXM6aX09bztsZXR7b3Blbkxpc3RlbmVyUmVzcG9uc2VzOnMsaW5pdGlhbFJlc3BvbnNlUHJvbWlzZXM6YX09byxjPWYuRGUuRmV0Y2hpbmc7Y29uc3QgZD1lPT57Yz1lLG4uc2V0U3RhdGUoYyl9O2xldCBwLGw9ITE7dC5vbkNsb3NlKCgoKT0+e2w9ITAscCYmcCgpfSkpO2Rve2xldCBlPSExO2lmKGEubGVuZ3RoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGEpbi5kb25lP2U9ITA6dC5wdXNoKG4pO2E9dCxhLmxlbmd0aHx8KGQoZi5EZS5GZXRjaGVkKSxlPSEwKX1sZXQgdCxuPSExO2NvbnN0IG89KCk9PntuPSEwLHQmJnQoKX0sdz1bXTtmb3IoY29uc3QgdCBvZiBzKXtjb25zdCBuPWlbdF0scz1yW3RdLGE9bi5nZXRTdGF0dXMoKTsoYT09PXUuT3Blbnx8Yz09PWYuRGUuRmV0Y2hpbmcmJmE9PT11LkluaXRpYWwpJiYody5wdXNoKHQpLG4ub25DaGFuZ2U9byk7Y29uc3QgZD1uLmdldFJlc3VsdEJ1ZmZlcigpO2QubGVuZ3RoJiYobi5zZXRSZXN1bHRCdWZmZXIoW10pLHMucmVzdWx0cz1PKHMucmVzdWx0cyxkKSxlPSEwKTtjb25zdCBwPW4uZ2V0UmV2b2tlZEJ1ZmZlcigpO2lmKHAubGVuZ3RoKXtuLnNldFJldm9rZWRCdWZmZXIoW10pO2NvbnN0IHQ9bmV3IFNldChwKTtzLnJlc3VsdHM9cy5yZXN1bHRzLmZpbHRlcigoKHtrZXk6ZX0pPT4hdC5oYXMoZSkpKSxlPSEwfX1pZihzPXcsZSYmKHlpZWxkIHIpLGwpYnJlYWs7bnx8KHMubGVuZ3RofHxhLmxlbmd0aCkmJmF3YWl0IFByb21pc2UucmFjZShbLi4uYSxuZXcgUHJvbWlzZSgoZT0+e3Q9ZX0pKSxuZXcgUHJvbWlzZSgoZT0+e3A9ZX0pKV0pfXdoaWxlKHMubGVuZ3RofHxhLmxlbmd0aCk7cmV0dXJuIGQoZi5EZS5Db21wbGV0ZSkscn1sZXQgbWU9MDtmdW5jdGlvbiBTZSh7bmFtZXNwYWNlZFRvcGljOmUsdG9waWM6dH0sbil7bWUrPTE7Y29uc3Qgbz1FKHQsbWUudG9TdHJpbmcoKSxuKSxyPXZlKGUsby5yZXEse3NldFN0YXRlOmU9PntyLnN0YXRlPWV9fSk7cmV0dXJuIHIuaWQ9bWUudG9TdHJpbmcoKSxyLmNsb3NlPW8uY2xvc2Usci5zdGF0ZT1mLkRlLkZldGNoaW5nLHJ9Y29uc3QgUGU9bmV3IE1hcDtmdW5jdGlvbiBDZShlLHQpe3JldHVybmAke2V9OiR7dH1gfWZ1bmN0aW9uIGtlKGUpe3JldHVybiBhc3luYyh0LC4uLm4pPT57aWYoIXQpcmV0dXJue2Vycm9yOkcubWVzc2FnZX07bGV0IG87aWYodC5pZClvPUNlKGUubmFtZXNwYWNlZFRvcGljLHQuaWQpO2Vsc2V7Y29uc3Qgbj1TZShlLHQpO289Q2UoZS5uYW1lc3BhY2VkVG9waWMsbi5pZCksdC5pZD1uLmlkLFBlLnNldChvLHtnZW5lcmF0b3I6bn0pfWNvbnN0IHI9UGUuZ2V0KG8pO2NsZWFyVGltZW91dChyLnRpbWVvdXQpO2NvbnN0IGk9YXdhaXQgci5nZW5lcmF0b3IubmV4dCgpO3JldHVybiByLnRpbWVvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e1BlLmRlbGV0ZShlKX0pLDFlNCl9KG8pLHsuLi5pLGlkOnQuaWQsc3RhdGU6ci5nZW5lcmF0b3Iuc3RhdGV9fX1mdW5jdGlvbiBXZShlLHQsbil7cmV0dXJuIGRlKGUpLmRpc3BhdGNoKHQseSx7aWQ6bn0pfWZ1bmN0aW9uIFJlKGUpe3JldHVybiB0PT5mdW5jdGlvbihlLHQpe2NvbnN0IG49Q2UoZSx0KSxvPVBlLmdldChuKTtvJiZvLmdlbmVyYXRvci5jbG9zZSgpfShlLHQuaWQpfWFzeW5jIGZ1bmN0aW9uIFRlKGUsdCx7aWQ6bixxdWVyeTpvLGNvbnRleHQ6cix0YXJnZXRzOml9KXtjb25zdCBzPWRlKGUpLGE9e2lkOm4scXVlcnk6byxjb250ZXh0OnIsdGFyZ2V0czppLHByb3ZpZGVySWQ6dC5pZH0sYz1hd2FpdCBzLmRpc3BhdGNoKHQuaWRlbnRpdHksZyxhKSxkPWMuZXJyb3I7aWYoZCl0aHJvdyBuZXcgRXJyb3IoZCk7cmV0dXJuIGN9Y29uc3QgSWU9bmV3IE1hcDtmdW5jdGlvbiBiZShlLHQsbil7cmV0dXJuYCR7ZX06JHt0Lm5hbWV9OiR7dC51dWlkfToke259YH1jb25zdCBEZT1uZXcgTWFwO2Z1bmN0aW9uIEJlKGUsdCxuKXtyZXR1cm5gJHtlfToke3R9OiR7bn1gfWZ1bmN0aW9uIEZlKGUsdCl7Y29uc3Qgbj1iZS5iaW5kKG51bGwsZSx0LmlkZW50aXR5KSxvPVdlLmJpbmQobnVsbCxlLHQuaWRlbnRpdHkpLHI9VGUuYmluZChudWxsLGUsdCk7cmV0dXJuIGFzeW5jKGkscyk9Pntjb25zdCBhPW4oaS5pZCk7aWYoIUllLmhhcyhhKSl7Y29uc3QgZT0oKT0+e28oaS5pZCksSWUuZGVsZXRlKGEpfTtJZS5zZXQoYSxlKSxpLm9uQ2xvc2UoZSl9Y29uc3QgYz1CZShlLHQuaWQsaS5pZCksZD0oKT0+e0RlLmRlbGV0ZShjKSxzLmNsb3NlKCl9O2kub25DbG9zZShkKSxEZS5zZXQoYywoZT0+e2UucmVzdWx0cz8ubGVuZ3RoJiZzLnJlc3BvbmQoZS5yZXN1bHRzKSxlLnJldm9rZWQ/Lmxlbmd0aCYmcy5yZXZva2UoLi4uZS5yZXZva2VkKSxlLnN0YXR1cz09PXUuT3BlbiYmcy5vcGVuKCksZS5zdGF0dXM9PT11LkNsb3NlJiZkKCl9KSk7Y29uc3QgcD1hd2FpdCByKGkpO3JldHVybiBwLnN0YXR1cz09PXUuT3BlbiYmcy5vcGVuKCkscC5zdGF0dXMhPT11LkNsb3NlJiZwLnN0YXR1cyE9PXUuSW5pdGlhbHx8ZCgpLHB9fWZ1bmN0aW9uIExlKGUsdCl7cmV0dXJuIGFzeW5jIG49Pntjb25zdCBvPWRlKGUpLHI9e3Byb3ZpZGVySWQ6dC5pZCxyZXN1bHQ6bn07cmV0dXJuIG8uZGlzcGF0Y2godC5pZGVudGl0eSxoLHIpfX1jb25zdCBBZT1uZXcgTWFwO2Z1bmN0aW9uIE9lKGUsdCl7cmV0dXJuYCR7ZX0tJHt0Lm5hbWV9LSR7dC51dWlkfWB9ZnVuY3Rpb24geGUoZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQuaWQpcmV0dXJuIHZvaWQgbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHQpKTtpZihMKGUsdC5pZCkpdGhyb3cgcTtyZXR1cm4gdC5pZGVudGl0eT1uLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1PZShlLHQuaWRlbnRpdHkpO0FlLmhhcyhuKXx8QWUuc2V0KG4sW10pLEFlLmdldChuKS5wdXNoKHQuaWQpLGF3YWl0IGIoZSx7Li4udCxvblVzZXJJbnB1dDpGZShlLHQpLG9uUmVzdWx0RGlzcGF0Y2g6TGUoZSx0KX0pfShlLHQpLHt3b3Jrc3BhY2VWZXJzaW9uOmkudTAsY2xpZW50QVBJVmVyc2lvbjp0LmNsaWVudEFQSVZlcnNpb259fX1mdW5jdGlvbiBFZShlKXtyZXR1cm4gdD0+e3QmJmZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1MKGUsdCk7aWYoIW4pcmV0dXJuO2NvbnN0IG89T2UoZSxuLmlkZW50aXR5KSxyPUFlLmdldChvKTtpZihyKXtjb25zdCBuPXIuZmluZEluZGV4KChlPT5lPT09dCkpOy0xIT09biYmKHIuc3BsaWNlKG4sMSksRChlLHQpKX19KGUsdCl9fWNvbnN0IFZlPW5ldyBNYXA7ZnVuY3Rpb24gTWUoZSx0KXtWZS5oYXMoZSl8fFZlLnNldChlLG5ldyBTZXQpLFZlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gX2UoZSx0KXtjb25zdCBuPVZlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1mdW5jdGlvbiAkZShlKXtyZXR1cm4gYXN5bmMgdD0+eyFmdW5jdGlvbihlLHQpe2NvbnN0IG49T2UoZSx0KSxvPUFlLmdldChuKTtpZihvKXtmb3IoY29uc3QgdCBvZiBvKUQoZSx0KTtBZS5kZWxldGUobil9fShlLHQpO2NvbnN0IG49VmUuZ2V0KGUpO24mJm4uZm9yRWFjaCgoZT0+ZSh0KSkpfX1hc3luYyBmdW5jdGlvbiBxZShlKXtjb25zdHtuYW1lc3BhY2VkVG9waWM6dH09ZSxuPVMoZS5uYW1lc3BhY2VkVG9waWMpLG89YXdhaXQocj1uLGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY3JlYXRlKHIpKTt2YXIgcjtyZXR1cm4gby5vbkNvbm5lY3Rpb24oZnVuY3Rpb24oe25hbWVzcGFjZWRUb3BpYzplfSl7cmV0dXJuIGFzeW5jIHQ9Pntjb25zdCBuPXBlLmdldChlKTtpZihuKWZvcihjb25zdCBlIG9mIG4paWYoIWF3YWl0IGUodCkpdGhyb3cgSH19KGUpKSxvLm9uRGlzY29ubmVjdGlvbigkZSh0KSksby5yZWdpc3Rlcih5LFJlKHQpKSxvLnJlZ2lzdGVyKGcsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9Pntjb25zdCBuPUJlKGUsdC5wcm92aWRlcklkLHQuaWQpLG89RGUuZ2V0KG4pO28mJm8odCl9fSh0KSksby5yZWdpc3RlcihcIjJcIix4ZSh0KSksby5yZWdpc3RlcihcIjNcIixFZSh0KSksby5yZWdpc3RlcihcIjRcIixmdW5jdGlvbihlKXtyZXR1cm4gYXN5bmMoKT0+d2UoZSl9KHQpKSxvLnJlZ2lzdGVyKFwiMVwiLGtlKGUpKSxvLnJlZ2lzdGVyKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCBvPUwoZSx0LnByb3ZpZGVySWQpO2lmKCFvKXRocm93ICQ7Y29uc3R7b25SZXN1bHREaXNwYXRjaDpyfT1vO3JldHVybiByPyh0LnJlc3VsdC5kaXNwYXRjaGVySWRlbnRpdHk9bixyKHQucmVzdWx0KSk6dm9pZCAwfX0odCkpLG99YXN5bmMgZnVuY3Rpb24gR2UoZSl7Y29uc3QgdD1kZShlKTt2YXIgbjtuPWUsY2UuZGVsZXRlKG4pLGF3YWl0IHQuZGVzdHJveSgpLEYoZSl9YXN5bmMgZnVuY3Rpb24gSGUoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fHcsbj1NKCksbz1tKG4sdCkscj17dG9waWM6dCxuYW1lc3BhY2U6bixuYW1lc3BhY2VkVG9waWM6b307bGV0IGk9dWUobyk7aXx8KGk9YXdhaXQgcWUociksZnVuY3Rpb24oZSx0KXtjZS5zZXQoZSx0KX0obyxpKSk7Y29uc3Qgcz1mZS5iaW5kKG51bGwsbyksYT1fZS5iaW5kKG51bGwsbyksYz1rLmJpbmQobnVsbCxvKSxkPVQuYmluZChudWxsLG8pO3JldHVybntnZXRBbGxQcm92aWRlcnM6d2UuYmluZChudWxsLG8pLHNlYXJjaDpTZS5iaW5kKG51bGwscikscmVnaXN0ZXI6Z2UuYmluZChudWxsLG8pLGRlcmVnaXN0ZXI6aGUuYmluZChudWxsLG8pLG9uU3Vic2NyaXB0aW9uOmxlLmJpbmQobnVsbCxvKSxvbkRpc2Nvbm5lY3Q6TWUuYmluZChudWxsLG8pLG9uUmVnaXN0ZXI6Qy5iaW5kKG51bGwsbyksb25EZXJlZ2lzdGVyOlIuYmluZChudWxsLG8pLGRpc3BhdGNoOnllLmJpbmQobnVsbCxyKSxkaXNjb25uZWN0OkdlLmJpbmQobnVsbCxvKSxyZW1vdmVMaXN0ZW5lcjplPT57cyhlKSxhKGUpLGMoZSksZChlKX19fWNvbnN0e2NyZWF0ZTpOZX09cix7c3Vic2NyaWJlOlVlfT1vLGplPXtjcmVhdGU6TmUsc3Vic2NyaWJlOlVlLGRlZmF1bHRUb3BpYzpcImFsbFwifSxYZT0oKT0+e3dpbmRvdy5zZWFyY2g9amV9LEtlPWU9Pntjb25zdCB0PSgpPT57WGUoKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfTtyZXR1cm4gdH07aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyl7WGUoKTtjb25zdCBlPVwibG9hZFwiLHQ9S2UoZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZSx0KTtjb25zdCBuPVwiRE9NQ29udGVudExvYWRlZFwiLG89S2Uobik7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIobixvKX1jb25zdCBKZT1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIHplKCl7YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7SmUuc2V0KGUsYXdhaXQgVWUoe3RvcGljOmUsdXVpZDpwLnE5LldvcmtzcGFjZX0pKX0oYyl9bGV0IFplO2FzeW5jIGZ1bmN0aW9uIFFlKGUpe3JldHVybiBhd2FpdCBhc3luYyBmdW5jdGlvbigpe3JldHVybiBaZXx8KFplPXplKCkpLFplfSgpLEplLmdldChlKX1jb25zdCBZZT1hc3luYyBlPT57aWYoIWUuaWNvbil0aHJvdyBuZXcgRXJyb3IoYCR7ZS5pZH0gcHJvdmlkZXIgbmVlZHMgdG8gaGF2ZSBpY29uIHByb3BlcnR5IGRlZmluZWQuYCk7YXdhaXQoMCxhLmFCKSgpO2NvbnN0IHQ9YXdhaXQgUWUoYyk7dHJ5e2UuY2xpZW50QVBJVmVyc2lvbj1pLnUwO2NvbnN0IG49YXdhaXQgdC5yZWdpc3RlcihlKTtyZXR1cm4oMCxzLmNrKSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOm4/LndvcmtzcGFjZVZlcnNpb259KSxufWNhdGNoKGUpe3Rocm93KDAscy5jaykoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplLm1lc3NhZ2V9KSxlfX0sZXQ9YXN5bmMgZT0+e2F3YWl0KDAsYS5hQikoKTtyZXR1cm4oYXdhaXQgUWUoYykpLmRlcmVnaXN0ZXIoZSl9O2FzeW5jIGZ1bmN0aW9uIHR0KCl7cmV0dXJuKGF3YWl0KDAsYS5YbCkoKSkuZGlzcGF0Y2goYS5XRi5TaG93SG9tZSx2b2lkIDApfWFzeW5jIGZ1bmN0aW9uIG50KCl7cmV0dXJuKGF3YWl0KDAsYS5YbCkoKSkuZGlzcGF0Y2goYS5XRi5IaWRlSG9tZSx2b2lkIDApfX0sMjk4OihlLHQsbik9PntuLmQodCx7cDooKT0+by5weCx3OigpPT5vLnd0fSk7dmFyIG89bigzMTYpfSw0Mjc6KGUsdCxuKT0+e3ZhciBvO24uZCh0LHt2OigpPT5vfSksZnVuY3Rpb24oZSl7ZS5BY3Rpb25CdXR0b249XCJBY3Rpb25CdXR0b25cIixlLkRyb3Bkb3duQnV0dG9uPVwiRHJvcGRvd25CdXR0b25cIn0ob3x8KG89e30pKX0sNzU4OihlLHQsbik9Pnt2YXIgbyxyLGk7bi5kKHQse1B0OigpPT5vLGVsOigpPT5pLHlXOigpPT5yfSksZnVuY3Rpb24oZSl7ZS5TdWdnZXN0aW9uPVwic3VnZ2VzdGlvblwifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuQ29udGFjdD1cIkNvbnRhY3RcIixlLkN1c3RvbT1cIkN1c3RvbVwiLGUuTGlzdD1cIkxpc3RcIixlLlBsYWluPVwiUGxhaW5cIixlLlNpbXBsZVRleHQ9XCJTaW1wbGVUZXh0XCIsZS5Mb2FkaW5nPVwiTG9hZGluZ1wiLGUuRXJyb3I9XCJFcnJvclwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuTXVsdGlTZWxlY3Q9XCJNdWx0aVNlbGVjdFwifShpfHwoaT17fSkpfSwxMTQ6KGUsdCxuKT0+e3ZhciBvLHI7bi5kKHQse0w6KCk9Pm8sVDooKT0+cn0pLGZ1bmN0aW9uKGUpe2UuU25hcHNob3Q9XCJzbmFwc2hvdFwiLGUuTWFuaWZlc3Q9XCJtYW5pZmVzdFwiLGUuVmlldz1cInZpZXdcIixlLkV4dGVybmFsPVwiZXh0ZXJuYWxcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLkxhbmRpbmdQYWdlPVwibGFuZGluZ1BhZ2VcIixlLkFwcEdyaWQ9XCJhcHBHcmlkXCJ9KHJ8fChyPXt9KSl9LDEwOTooZSx0LG4pPT57bi5kKHQse0dvOigpPT5yLFpKOigpPT5zLGJJOigpPT5pLHA2OigpPT5vfSk7Y29uc3Qgbz17Q29udGFpbmVyOlwiQ29udGFpbmVyXCIsQnV0dG9uOlwiQnV0dG9uXCJ9LHI9e1RleHQ6XCJUZXh0XCIsSW1hZ2U6XCJJbWFnZVwiLExpc3Q6XCJMaXN0XCJ9LGk9ey4uLm8sLi4ucn07dmFyIHM7IWZ1bmN0aW9uKGUpe2UuUHJpbWFyeT1cInByaW1hcnlcIixlLlNlY29uZGFyeT1cInNlY29uZGFyeVwiLGUuVGV4dE9ubHk9XCJ0ZXh0T25seVwifShzfHwocz17fSkpfSw1Mjg6KGUsdCxuKT0+e24ucih0KSxuLmQodCx7QXBwTWFuaWZlc3RUeXBlOigpPT5zLkwsU3RvcmVmcm9udFRlbXBsYXRlOigpPT5zLlQsZGVyZWdpc3RlcjooKT0+ZyxoaWRlOigpPT5oLHJlZ2lzdGVyOigpPT53LHNob3c6KCk9Pnl9KTt2YXIgbz1uKDUzMikscj1uKDQzNiksaT1uKDgyKSxzPW4oMTE0KSxhPW4oNjc4KTtsZXQgYyxkPSExO2FzeW5jIGZ1bmN0aW9uIHUoZSx0LG4pe2NvbnN0IG89YXdhaXQoMCxyLkRtKSgpO3RyeXtyZXR1cm4gYXdhaXQgby5kaXNwYXRjaChlLmFjdGlvbixlLnBheWxvYWQpfWNhdGNoKHIpe2lmKC0xIT09ci50b1N0cmluZygpLmluZGV4T2YoZS5hY3Rpb24pKXJldHVybiBkPSEwLGF3YWl0IG8uZGlzcGF0Y2godC5hY3Rpb24sdC5wYXlsb2FkKSxuO3Rocm93IHJ9fWNvbnN0IHA9bmV3IE1hcCxsPWU9PntpZighcC5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IFByb3ZpZGVyIHdpdGggaWQgJHtlfSBpcyBub3QgcmVnaXN0ZXJlZGApO3JldHVybiBwLmdldChlKX0sZj1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCgwLHIuWGwpKCk7aWYocC5oYXMoZS5pZCkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IHByb3ZpZGVyIHdpdGggaWQgJHtlLmlkfSBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtyZXR1cm4gcC5zZXQoZS5pZCxlKSwoZT0+e2UuaXNTdG9yZWZyb250QWN0aW9uc1JlZ2lzdGVyZWR8fChlLmlzU3RvcmVmcm9udEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzLChlPT5sKGUpLmdldEFwcHMoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXIsKGU9PmwoZSkuZ2V0Rm9vdGVyKCkpKSxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2UsKGU9PmwoZSkuZ2V0TGFuZGluZ1BhZ2UoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uLChlPT5sKGUpLmdldE5hdmlnYXRpb24oKSkpLGUucmVnaXN0ZXIoci5XRi5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHAsKCh7aWQ6ZSxhcHA6dH0pPT5sKGUpLmxhdW5jaEFwcCh0KSkpKX0pKHQpLGUuY2xpZW50QVBJVmVyc2lvbj1hLnUwLHUoe2FjdGlvbjpyLldGLlJlZ2lzdGVyUHJvdmlkZXIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOmkubFAuU3RvcmVmcm9udCxpbmZvOmV9fSx7YWN0aW9uOnIuV0YuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXIscGF5bG9hZDplfSx7d29ya3NwYWNlVmVyc2lvbjpcInVua25vd25cIn0pfSx3PWU9PihjPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQgZihlKTsoMCxvLmQ5KSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOm4/LndvcmtzcGFjZVZlcnNpb259KSx0KHtjbGllbnRBUElWZXJzaW9uOmEudTAsd29ya3NwYWNlVmVyc2lvbjpuLndvcmtzcGFjZVZlcnNpb258fFwiXCJ9KX1jYXRjaChlKXsoMCxvLmQ5KSh7YWxsb3dlZDohMSxyZWplY3Rpb25Db2RlOmUubWVzc2FnZX0pLG4oZSl9fSkpLGMpLGc9YXN5bmMgZT0+KGF3YWl0IGMscC5kZWxldGUoZSksYXdhaXQoMCxyLmFCKSgpLHUoe2FjdGlvbjpyLldGLkRlcmVnaXN0ZXJQcm92aWRlcixwYXlsb2FkOntwcm92aWRlclR5cGU6aS5sUC5TdG9yZWZyb250LGlkOmV9fSx7YWN0aW9uOnIuV0YuRGVyZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcixwYXlsb2FkOmV9KSksaD1hc3luYygpPT4oYXdhaXQgYyxhd2FpdCgwLHIuYUIpKCksdSh7YWN0aW9uOnIuV0YuSGlkZVByb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuSGlkZVN0b3JlZnJvbnR9KSkseT1hc3luYygpPT4oYXdhaXQgYyxhd2FpdCgwLHIuYUIpKCksdSh7YWN0aW9uOnIuV0YuU2hvd1Byb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuU2hvd1N0b3JlZnJvbnR9KSl9LDQzNjooZSx0LG4pPT57bi5kKHQse1dGOigpPT5zLERtOigpPT5hLFhsOigpPT5wLGFCOigpPT51fSk7dmFyIG89big2NzgpO2NvbnN0IHI9by5BeCYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7dmFyIGk9bigxMjEpO3ZhciBzOyFmdW5jdGlvbihlKXtlLlJlZ2lzdGVyUHJvdmlkZXI9XCJyZWdpc3Rlci1wcm92aWRlclwiLGUuRGVyZWdpc3RlclByb3ZpZGVyPVwiZGVyZWdpc3Rlci1wcm92aWRlclwiLGUuQ3JlYXRlUHJvdmlkZXJXaW5kb3c9XCJjcmVhdGUtcHJvdmlkZXItd2luZG93XCIsZS5HZXRQcm92aWRlcnM9XCJnZXQtcHJvdmlkZXJzXCIsZS5TaG93UHJvdmlkZXJXaW5kb3c9XCJzaG93LXByb3ZpZGVyLXdpbmRvd1wiLGUuSGlkZVByb3ZpZGVyV2luZG93PVwiaGlkZS1wcm92aWRlci13aW5kb3dcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckFwcHM9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1hcHBzXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJMYW5kaW5nUGFnZT1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWxhbmRpbmctcGFnZVwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyRm9vdGVyPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItZm9vdGVyXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbmF2aWdhdGlvblwiLGUuTGF1bmNoU3RvcmVmcm9udFByb3ZpZGVyQXBwPVwibGF1bmNoLXN0b3JlZnJvbnQtcHJvdmlkZXItYXBwXCIsZS5TaG93SG9tZT1cInNob3ctaG9tZVwiLGUuSGlkZUhvbWU9XCJoaWRlLWhvbWVcIixlLkFzc2lnbkhvbWVTZWFyY2hDb250ZXh0PVwiYXNzaWduLWhvbWUtc2VhcmNoLWNvbnRleHRcIixlLkdldExlZ2FjeVBhZ2VzPVwiZ2V0LWxlZ2FjeS1wYWdlc1wiLGUuR2V0TGVnYWN5V29ya3NwYWNlcz1cImdldC1sZWdhY3ktd29ya3NwYWNlc1wiLGUuR2V0Q29tcHV0ZWRQbGF0Zm9ybVRoZW1lPVwiZ2V0LWNvbXB1dGVkLXBsYXRmb3JtLXRoZW1lXCIsZS5SZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcj1cInJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJkZXJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkhpZGVTdG9yZWZyb250PVwiaGlkZS1zdG9yZWZyb250XCIsZS5TaG93U3RvcmVmcm9udD1cInNob3ctc3RvcmVmcm9udFwifShzfHwocz17fSkpO2NvbnN0IGE9ZnVuY3Rpb24oZSl7bGV0IHQ7cmV0dXJuKCk9PntpZighby5zUyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRDaGFubmVsQ2xpZW50IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gdHx8KHQ9KGFzeW5jKCk9Pnthd2FpdCByO2NvbnN0IG49e2NsaWVudEFQSVZlcnNpb246by51MH0saT1hd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7cGF5bG9hZDpufSk7cmV0dXJuIGkub25EaXNjb25uZWN0aW9uKChhc3luYygpPT57dD12b2lkIDB9KSksaX0pKCkudGhlbigoZT0+ZSkpLmNhdGNoKChuPT57dGhyb3cgdD12b2lkIDAsbmV3IEVycm9yKGBmYWlsZWQgdG8gY29ubmVjdCB0byBjaGFubmVsIHByb3ZpZGVyICR7ZX06ICR7bn1gKX0pKSksdH19KFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKSxjPVwiaXNMYXVuY2hlZFZpYUxpYlwiLGQ9ZT0+e2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4gdC5zZWFyY2hQYXJhbXMuYXBwZW5kKGMsXCJ0cnVlXCIpLHQudG9TdHJpbmcoKX0sdT1hc3luYygpPT57aWYoIWF3YWl0KDAsaS5KVikoaS5pVykpcmV0dXJuKG8uWkt8fC0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luXCIpKSYmYXdhaXQgZmluLkFwcGxpY2F0aW9uLnN0YXJ0RnJvbU1hbmlmZXN0KGQoby5hVykpLGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGQoby5HWCkpfSxwPWFzeW5jKCk9Pihhd2FpdCB1KCksYSgpKX0sODI6KGUsdCxuKT0+e24uZCh0LHtSODooKT0+cyxYXzooKT0+aSxsUDooKT0+b30pO3ZhciBvLHI9big0MzYpOyFmdW5jdGlvbihlKXtlLlN0b3JlZnJvbnQ9XCJzdG9yZWZyb250XCIsZS5Eb2NrPVwiZG9ja1wifShvfHwobz17fSkpO2NvbnN0IGk9YXN5bmMgZT0+KGF3YWl0KDAsci5EbSkoKSkuZGlzcGF0Y2goci5XRi5TaG93UHJvdmlkZXJXaW5kb3cse3Byb3ZpZGVyVHlwZTplfSkscz1hc3luYyBlPT4oYXdhaXQoMCxyLkRtKSgpKS5kaXNwYXRjaChyLldGLkhpZGVQcm92aWRlcldpbmRvdyx7cHJvdmlkZXJUeXBlOmV9KX0sODA2OihlLHQsbik9PntuLmQodCx7cTk6KCk9Pm99KTt2YXIgbyxyLGkscz1uKDY3OCk7IWZ1bmN0aW9uKGUpe2UuV29ya3NwYWNlPVwib3BlbmZpbi1icm93c2VyXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5SdW5SZXF1ZXN0ZWQ9XCJydW4tcmVxdWVzdGVkXCIsZS5XaW5kb3dPcHRpb25zQ2hhbmdlZD1cIndpbmRvdy1vcHRpb25zLWNoYW5nZWRcIixlLldpbmRvd0Nsb3NlZD1cIndpbmRvdy1jbG9zZWRcIixlLldpbmRvd0NyZWF0ZWQ9XCJ3aW5kb3ctY3JlYXRlZFwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuRmluUHJvdG9jb2w9XCJmaW4tcHJvdG9jb2xcIn0oaXx8KGk9e30pKTtzLkFCLG8uV29ya3NwYWNlfSw2Nzg6KGUsdCxuKT0+e3ZhciBvO24uZCh0LHtBQjooKT0+YSxBeDooKT0+aSxHWDooKT0+dSxaSzooKT0+ZCxhVzooKT0+cCxvQzooKT0+YyxzUzooKT0+cix1MDooKT0+Zn0pLGZ1bmN0aW9uKGUpe2UuTG9jYWw9XCJsb2NhbFwiLGUuRGV2PVwiZGV2XCIsZS5TdGFnaW5nPVwic3RhZ2luZ1wiLGUuUHJvZD1cInByb2RcIn0ob3x8KG89e30pKTtjb25zdCByPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4saT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHByb2Nlc3N8fHByb2Nlc3MuZW52Py5KRVNUX1dPUktFUl9JRCxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSxzPWk/d2luZG93Lm9yaWdpbjpvLkxvY2FsLGE9ciYmZmluLm1lLnV1aWQsYz1yJiZmaW4ubWUubmFtZSxkPShyJiZmaW4ubWUuZW50aXR5VHlwZSxcInByb2RcIj09PW8uTG9jYWwpLHU9KG8uRGV2LG8uU3RhZ2luZyxvLlByb2QsXCJmaW5zOi8vc3lzdGVtLWFwcHMvd29ya3NwYWNlXCIpLHA9XCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuNC9hcHAuanNvblwiLGw9ZT0+ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik/ZTpzK2UsZj0obChcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzkuMC40XCIpLGwoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuNFwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgV09SS1NQQUNFX0RPQ1NfUExBVEZPUk1fVVJMJiZsKFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwmJmwoV09SS1NQQUNFX0RPQ1NfQ0xJRU5UX1VSTCksXCI5LjAuNFwiKX0sNTMyOihlLHQsbik9PntuLmQodCx7V246KCk9PmQsY2s6KCk9PmEsZDk6KCk9PmN9KTt2YXIgbyxyPW4oNjc4KSxpPW4oMTIxKTshZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiQnJvd3NlclwiLGUuRG9jaz1cIkRvY2tcIixlLkhvbWU9XCJIb21lXCIsZS5Ob3RpZmljYXRpb249XCJOb3RpZmljYXRpb25cIixlLlN0b3JlZnJvbnQ9XCJTdG9yZWZyb250XCIsZS5QbGF0Zm9ybT1cIlBsYXRmb3JtXCIsZS5UaGVtaW5nPVwiVGhlbWluZ1wifShvfHwobz17fSkpO2NvbnN0IHM9YXN5bmMoZSx0KT0+e2NvbnN0IG49e2FwaVZlcnNpb246dC5hcGlWZXJzaW9ufHxyLnUwLGNvbXBvbmVudE5hbWU6ZSxjb21wb25lbnRWZXJzaW9uOnQuY29tcG9uZW50VmVyc2lvbnx8ci51MCxhbGxvd2VkOnQuYWxsb3dlZCxyZWplY3Rpb25Db2RlOnQucmVqZWN0aW9uQ29kZX07ZmluLlN5c3RlbS5yZWdpc3RlclVzYWdlKHt0eXBlOlwid29ya3NwYWNlLWxpY2Vuc2luZ1wiLGRhdGE6bn0pfSxhPWFzeW5jIGU9PntpLk9JLnV1aWQ9PT1pLkdpLnV1aWQmJmkuT0kubmFtZT09PWkuR2kubmFtZXx8cyhvLkhvbWUsZSl9LGM9YXN5bmMgZT0+e3Moby5TdG9yZWZyb250LGUpfSxkPWFzeW5jIGU9PntzKG8uRG9jayxlKX19LDEyMTooZSx0LG4pPT57bi5kKHQse0dpOigpPT5jLEpWOigpPT5wLE9JOigpPT5kLGlXOigpPT51fSk7dmFyIG8scixpPW4oODA2KSxzPW4oNjc4KTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwib3BlbmZpbi1ob21lXCIsZS5Eb2NrPVwib3BlbmZpbi1kb2NrXCIsZS5TdG9yZWZyb250PVwib3BlbmZpbi1zdG9yZWZyb250XCIsZS5Ib21lSW50ZXJuYWw9XCJvcGVuZmluLWhvbWUtaW50ZXJuYWxcIixlLkJyb3dzZXJNZW51PVwib3BlbmZpbi1icm93c2VyLW1lbnVcIixlLkJyb3dzZXJJbmRpY2F0b3I9XCJvcGVuZmluLWJyb3dzZXItaW5kaWNhdG9yXCIsZS5Ccm93c2VyV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLXdpbmRvd1wifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuU2hvd249XCJzaG93blwiLGUuQm91bmRzQ2hhbmdlZD1cImJvdW5kcy1jaGFuZ2VkXCIsZS5MYXlvdXRSZWFkeT1cImxheW91dC1yZWFkeVwiLGUuRW5kVXNlckJvdW5kc0NoYW5naW5nPVwiZW5kLXVzZXItYm91bmRzLWNoYW5naW5nXCIsZS5CbHVycmVkPVwiYmx1cnJlZFwiLGUuQ2xvc2VkPVwiY2xvc2VkXCIsZS5DbG9zZVJlcXVlc3RlZD1cImNsb3NlLXJlcXVlc3RlZFwiLGUuRm9jdXNlZD1cImZvY3VzZWRcIixlLlNob3dSZXF1ZXN0ZWQ9XCJzaG93LXJlcXVlc3RlZFwiLGUuVmlld0NyYXNoZWQ9XCJ2aWV3LWNyYXNoZWRcIixlLlZpZXdBdHRhY2hlZD1cInZpZXctYXR0YWNoZWRcIixlLlZpZXdEZXRhY2hlZD1cInZpZXctZGV0YWNoZWRcIixlLlZpZXdQYWdlVGl0bGVVcGRhdGVkPVwidmlldy1wYWdlLXRpdGxlLXVwZGF0ZWRcIixlLlZpZXdEZXN0cm95ZWQ9XCJ2aWV3LWRlc3Ryb3llZFwiLGUuT3B0aW9uc0NoYW5nZWQ9XCJvcHRpb25zLWNoYW5nZWRcIn0ocnx8KHI9e30pKTtmdW5jdGlvbiBhKGUpe2lmKCFzLnNTKXRocm93IG5ldyBFcnJvcihcImdldE9GV2luZG93IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKGUpfWNvbnN0IGM9e25hbWU6cy5vQyx1dWlkOnMuQUJ9O2NvbnN0IGQ9e25hbWU6by5Ib21lLHV1aWQ6aS5xOS5Xb3Jrc3BhY2V9LHU9KG8uRG9jayxpLnE5LldvcmtzcGFjZSxvLlN0b3JlZnJvbnQsaS5xOS5Xb3Jrc3BhY2Use25hbWU6aS5xOS5Xb3Jrc3BhY2UsdXVpZDppLnE5LldvcmtzcGFjZX0pO2NvbnN0IHA9ZT0+YShlKS5nZXRPcHRpb25zKCkudGhlbigoKCk9PiEwKSkuY2F0Y2goKCgpPT4hMSkpfSwzMTY6KGUsdCxuKT0+e3ZhciBvLHIsaTtuLmQodCx7RGU6KCk9Pm8scHg6KCk9PnIsd3Q6KCk9Pml9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0oaXx8KGk9e30pKX19LHQ9e307ZnVuY3Rpb24gbihvKXt2YXIgcj10W29dO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgaT10W29dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtvXShpLGkuZXhwb3J0cyxuKSxpLmV4cG9ydHN9bi5kPShlLHQpPT57Zm9yKHZhciBvIGluIHQpbi5vKHQsbykmJiFuLm8oZSxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtvXX0pfSxuLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLG4ucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIG89e307KCgpPT57bi5yKG8pLG4uZChvLHtBY3Rpb25UcmlnZ2VyOigpPT5QLnAsQXBwTWFuaWZlc3RUeXBlOigpPT5XLkwsQnV0dG9uU3R5bGU6KCk9PkMuWkosQ0xJQWN0aW9uOigpPT5rLlB0LENMSUZpbHRlck9wdGlvblR5cGU6KCk9PmsuZWwsQ0xJVGVtcGxhdGU6KCk9PmsueVcsQ29udGFpbmVyVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLnA2LERvY2s6KCk9PmUsRG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsSG9tZTooKT0+aCxMZWdhY3k6KCk9PnQsUHJlc2VudGF0aW9uVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLkdvLFNlYXJjaFRhZ0JhY2tncm91bmQ6KCk9PlAudyxTdG9yZWZyb250OigpPT5TLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+Vy5ULFRlbXBsYXRlRnJhZ21lbnRUeXBlczooKT0+Qy5iSX0pO3ZhciBlPXt9O24ucihlKSxuLmQoZSx7RG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsZGVyZWdpc3RlcjooKT0+bCxtaW5pbWl6ZTooKT0+ZixyZWdpc3RlcjooKT0+cCxzaG93OigpPT53fSk7dmFyIHQ9e307bi5yKHQpLG4uZCh0LHtnZXRQYWdlczooKT0+dixnZXRXb3Jrc3BhY2VzOigpPT5tfSk7dmFyIHI9big2NzgpLGk9big1MzIpLHM9big0MzYpLGE9big4MiksYz1uKDQyNyk7bGV0IGQsdT0hMTtjb25zdCBwPWU9PihkPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQoMCxzLlhsKSgpO2lmKHUpdGhyb3cgbmV3IEVycm9yKFwiQSBkb2NrIHByb3ZpZGVyIGZvciB0aGUgcGxhdGZvcm0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLlwiKTtyZXR1cm4gdT0hMCxlLmNsaWVudEFQSVZlcnNpb249ci51MCx0LmRpc3BhdGNoKHMuV0YuUmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9jayxpbmZvOmV9KX0pKGUpOygwLGkuV24pKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbn0pLHQoe2NsaWVudEFQSVZlcnNpb246ci51MCx3b3Jrc3BhY2VWZXJzaW9uOm4ud29ya3NwYWNlVmVyc2lvbnx8XCJcIn0pfWNhdGNoKGUpeygwLGkuV24pKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZS5tZXNzYWdlfSksbihlKSxkPW51bGx9fSkpLGQpLGw9YXN5bmMoKT0+e2F3YWl0IGQsdT0hMTtyZXR1cm4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLkRlcmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9ja30pfSxmPWFzeW5jKCk9Pnthd2FpdCBkLGF3YWl0KDAscy5hQikoKSxhd2FpdCgwLGEuUjgpKGEubFAuRG9jayl9LHc9YXN5bmMoKT0+e2F3YWl0IGQsYXdhaXQoMCxzLmFCKSgpLGF3YWl0KDAsYS5YXykoYS5sUC5Eb2NrKX07dmFyIGcsaD1uKDcwMyk7bigxMjEpOyFmdW5jdGlvbihlKXtlLlRhYkNyZWF0ZWQ9XCJ0YWItY3JlYXRlZFwiLGUuQ29udGFpbmVyQ3JlYXRlZD1cImNvbnRhaW5lci1jcmVhdGVkXCIsZS5Db250YWluZXJSZXNpemVkPVwiY29udGFpbmVyLXJlc2l6ZWRcIn0oZ3x8KGc9e30pKTtuZXcgTWFwO3ZhciB5OyFmdW5jdGlvbihlKXtlLkN1cnJlbnRXb3Jrc3BhY2VJZD1cImN1cnJlbnRXb3Jrc3BhY2VJZFwiLGUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwibGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5NYWNoaW5lTmFtZT1cIm1hY2hpbmVOYW1lXCIsZS5OZXdUYWJQYWdlTGF5b3V0PVwiTmV3VGFiUGFnZUxheW91dFwiLGUuTmV3VGFiUGFnZVNvcnQ9XCJOZXdUYWJQYWdlU29ydFwiLGUuRG9ja1Bvc2l0aW9uPVwiRG9ja1Bvc2l0aW9uXCJ9KHl8fCh5PXt9KSk7Y29uc3Qgdj0oKT0+YXN5bmMgZnVuY3Rpb24oKXtyZXR1cm4oYXdhaXQoMCxzLkRtKSgpKS5kaXNwYXRjaChzLldGLkdldExlZ2FjeVBhZ2VzLHZvaWQgMCl9KCksbT0oKT0+KGFzeW5jKCk9Pihhd2FpdCgwLHMuRG0pKCkpLmRpc3BhdGNoKHMuV0YuR2V0TGVnYWN5V29ya3NwYWNlcyx2b2lkIDApKSgpO3ZhciBTPW4oNTI4KSxQPW4oMjk4KSxDPW4oMTA5KSxrPW4oNzU4KSxXPW4oMTE0KX0pKCksbW9kdWxlLmV4cG9ydHM9b30pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQge1xuXHRjb25uZWN0LFxuXHRDb25uZWN0aW9uRXJyb3IsXG5cdGVuYWJsZUxvZ2dpbmcsXG5cdHR5cGUgU2FsZXNmb3JjZUNvbm5lY3Rpb24sXG5cdHR5cGUgU2FsZXNmb3JjZVJlc3RBcGlTZWFyY2hSZXNwb25zZVxufSBmcm9tIFwiQG9wZW5maW4vc2FsZXNmb3JjZVwiO1xuaW1wb3J0IHtcblx0Q0xJRmlsdGVyT3B0aW9uVHlwZSxcblx0Q0xJVGVtcGxhdGUsXG5cdHR5cGUgQ0xJRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0dHlwZSBDTElGaWx0ZXIsXG5cdHR5cGUgQ0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0dHlwZSBDTElTZWFyY2hSZXN1bHRDb250YWN0LFxuXHR0eXBlIENMSVNlYXJjaFJlc3VsdExpc3QsXG5cdHR5cGUgQ0xJU2VhcmNoUmVzdWx0UGxhaW4sXG5cdHR5cGUgQ0xJU2VhcmNoUmVzdWx0U2ltcGxlVGV4dCxcblx0dHlwZSBIb21lU2VhcmNoUmVzcG9uc2UsXG5cdHR5cGUgSG9tZVNlYXJjaFJlc3VsdFxufSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgdHlwZSB7IEludGVncmF0aW9uLCBJbnRlZ3JhdGlvbk1hbmFnZXIsIEludGVncmF0aW9uTW9kdWxlIH0gZnJvbSBcIi4uLy4uLy4uL2ludGVncmF0aW9ucy1zaGFwZXNcIjtcbmltcG9ydCB0eXBlIHtcblx0U2FsZXNmb3JjZUFjY291bnQsXG5cdFNhbGVzZm9yY2VCYXRjaFJlcXVlc3QsXG5cdFNhbGVzZm9yY2VCYXRjaFJlcXVlc3RJdGVtLFxuXHRTYWxlc2ZvcmNlQmF0Y2hSZXNwb25zZSxcblx0U2FsZXNmb3JjZUNvbnRhY3QsXG5cdFNhbGVzZm9yY2VDb250ZW50Tm90ZSxcblx0U2FsZXNmb3JjZUZlZWRFbGVtZW50UGFnZSxcblx0U2FsZXNmb3JjZUZlZWRJdGVtLFxuXHRTYWxlc2ZvcmNlUmVzdWx0RGF0YSxcblx0U2FsZXNmb3JjZVNldHRpbmdzLFxuXHRTYWxlc2ZvcmNlVGFza1xufSBmcm9tIFwiLi9zaGFwZXNcIjtcblxuLyoqXG4gKiBJbXBsZW1lbnQgdGhlIGludGVncmF0aW9uIHByb3ZpZGVyIGZvciBTYWxlc0ZvcmNlLlxuICovXG5leHBvcnQgY2xhc3MgU2FsZXNGb3JjZUludGVncmF0aW9uUHJvdmlkZXIgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbk1vZHVsZTxTYWxlc2ZvcmNlU2V0dGluZ3M+IHtcblx0LyoqXG5cdCAqIFByb3ZpZGVyIGlkLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9QUk9WSURFUl9JRCA9IFwic2FsZXNmb3JjZVwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBTYWxlc0ZvcmNlIHJlc3VsdC5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQlJPV1NFX1NFQVJDSF9SRVNVTFRfS0VZID0gXCJicm93c2Utc2FsZXNmb3JjZVwiO1xuXG5cdC8qKlxuXHQgKiBUaGUgaWQgZm9yIHRoZSBTYWxlRm9yY2UgZmlsdGVycy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfT0JKRUNUU19GSUxURVJfSUQgPSBcInNhbGVzZm9yY2Utb2JqZWN0c1wiO1xuXG5cdC8qKlxuXHQgKiBUaGUgaWQgb2YgdGhlIG5vdCBjb25uZWN0ZWQgcmVzdWx0LlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9OT1RfQ09OTkVDVEVEX1NFQVJDSF9SRVNVTFRfS0VZID0gXCJzYWxlc2ZvcmNlLW5vdC1jb25uZWN0ZWQtcmVzdWx0XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBpbnRlZ3JhdGlvbiBtYW5hZ2VyLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX2ludGVncmF0aW9uTWFuYWdlcjogSW50ZWdyYXRpb25NYW5hZ2VyIHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBUaGUgY29ubmVjdGlvbiB0byBTYWxlc0ZvcmNlLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX3NhbGVzRm9yY2VDb25uZWN0aW9uOiBTYWxlc2ZvcmNlQ29ubmVjdGlvbiB8IHVuZGVmaW5lZDtcblxuXHQvKipcblx0ICogVGhlIG1vZHVsZSBpcyBiZWluZyByZWdpc3RlcmVkLlxuXHQgKiBAcGFyYW0gaW50ZWdyYXRpb25NYW5hZ2VyIFRoZSBtYW5hZ2VyIGZvciB0aGUgaW50ZWdyYXRpb24uXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQHJldHVybnMgTm90aGluZy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyByZWdpc3Rlcihcblx0XHRpbnRlZ3JhdGlvbk1hbmFnZXI6IEludGVncmF0aW9uTWFuYWdlcixcblx0XHRpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248U2FsZXNmb3JjZVNldHRpbmdzPlxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLl9pbnRlZ3JhdGlvbk1hbmFnZXIgPSBpbnRlZ3JhdGlvbk1hbmFnZXI7XG5cdFx0Y29uc29sZS5sb2coXCJSZWdpc3RlcmluZyBTYWxlc0ZvcmNlXCIpO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLm9wZW5Db25uZWN0aW9uKGludGVncmF0aW9uKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb25uZWN0aW5nIHRvIFNhbGVzRm9yY2VcIiwgZXJyKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVGhlIG1vZHVsZSBpcyBiZWluZyBkZXJlZ2lzdGVyZWQuXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQHJldHVybnMgTm90aGluZy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBkZXJlZ2lzdGVyKGludGVncmF0aW9uOiBJbnRlZ3JhdGlvbjxTYWxlc2ZvcmNlU2V0dGluZ3M+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5jbG9zZUNvbm5lY3Rpb24oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBbiBlbnRyeSBoYXMgYmVlbiBzZWxlY3RlZC5cblx0ICogQHBhcmFtIGludGVncmF0aW9uIFRoZSBpbnRlZ3JhdGlvbiBkZXRhaWxzLlxuXHQgKiBAcGFyYW0gcmVzdWx0IFRoZSBkaXNwYXRjaGVkIHJlc3VsdC5cblx0ICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCByZXNwb25zZS5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaXRlbSB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBpdGVtU2VsZWN0aW9uKFxuXHRcdGludGVncmF0aW9uOiBJbnRlZ3JhdGlvbjxTYWxlc2ZvcmNlU2V0dGluZ3M+LFxuXHRcdHJlc3VsdDogQ0xJRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0XHRsYXN0UmVzcG9uc2U6IENMSVNlYXJjaExpc3RlbmVyUmVzcG9uc2Vcblx0KTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Ly8gaWYgdGhlIHVzZXIgY2xpY2tlZCB0aGUgcmVjb25uZWN0IHJlc3VsdCwgcmVjb25uZWN0IHRvIHNhbGVzZm9yY2UgYW5kIHJlLXJ1biBxdWVyeVxuXHRcdGlmIChyZXN1bHQua2V5ID09PSBTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlci5fTk9UX0NPTk5FQ1RFRF9TRUFSQ0hfUkVTVUxUX0tFWSkge1xuXHRcdFx0YXdhaXQgdGhpcy5vcGVuQ29ubmVjdGlvbihpbnRlZ3JhdGlvbik7XG5cblx0XHRcdGlmIChyZXN1bHQuZGF0YT8ucXVlcnkpIHtcblx0XHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuZ2V0U2VhcmNoUmVzdWx0cyhcblx0XHRcdFx0XHRpbnRlZ3JhdGlvbixcblx0XHRcdFx0XHRyZXN1bHQuZGF0YT8ucXVlcnkgYXMgc3RyaW5nLFxuXHRcdFx0XHRcdHJlc3VsdC5kYXRhPy5maWx0ZXJzIGFzIENMSUZpbHRlcltdLFxuXHRcdFx0XHRcdGxhc3RSZXNwb25zZVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAobGFzdFJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0bGFzdFJlc3BvbnNlLnJldm9rZShTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlci5fTk9UX0NPTk5FQ1RFRF9TRUFSQ0hfUkVTVUxUX0tFWSk7XG5cdFx0XHRcdFx0bGFzdFJlc3BvbnNlLnJlc3BvbmQocmVzdWx0cy5yZXN1bHRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gb3RoZXJ3aXNlIG9wZW4gdGhlIHJlc3VsdCBwYWdlIHVybCBpbiBicm93c2VyXG5cdFx0Y29uc3QgZGF0YSA9IHJlc3VsdC5kYXRhIGFzIFNhbGVzZm9yY2VSZXN1bHREYXRhO1xuXHRcdGlmIChkYXRhICE9PSB1bmRlZmluZWQgJiYgdGhpcy5faW50ZWdyYXRpb25NYW5hZ2VyICYmIHRoaXMuX2ludGVncmF0aW9uTWFuYWdlci5sYXVuY2hWaWV3KSB7XG5cdFx0XHRjb25zdCBwcmVsb2FkID0gaW50ZWdyYXRpb24/LmRhdGE/LnByZWxvYWQ7XG5cdFx0XHRjb25zdCB2aWV3T3B0aW9ucyA9IHtcblx0XHRcdFx0dXJsOiBkYXRhLnBhZ2VVcmwsXG5cdFx0XHRcdGZkYzNJbnRlcm9wQXBpOiBcIjEuMlwiLFxuXHRcdFx0XHRpbnRlcm9wOiB7XG5cdFx0XHRcdFx0Y3VycmVudENvbnRleHRHcm91cDogXCJncmVlblwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGN1c3RvbURhdGE6IHsgYnV0dG9uTGFiZWw6IFwiUHJvY2VzcyBQYXJ0aWNpcGFudFwiIH0sXG5cdFx0XHRcdHByZWxvYWRTY3JpcHRzOiBbeyB1cmw6IHByZWxvYWQgfV0sXG5cdFx0XHRcdHRhcmdldDogeyBuYW1lOiBcIlwiLCB1cmw6IFwiXCIsIHV1aWQ6IFwiXCIgfVxuXHRcdFx0fTtcblx0XHRcdGF3YWl0IHRoaXMuX2ludGVncmF0aW9uTWFuYWdlci5sYXVuY2hWaWV3KHZpZXdPcHRpb25zKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGEgbGlzdCBvZiBzZWFyY2ggcmVzdWx0cyBiYXNlZCBvbiB0aGUgcXVlcnkgYW5kIGZpbHRlcnMuXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcGFyYW0gZmlsdGVycyBUaGUgZmlsdGVycyB0byBhcHBseS5cblx0ICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCBzZWFyY2ggcmVzcG9uc2UgdXNlZCBmb3IgdXBkYXRpbmcgZXhpc3RpbmcgcmVzdWx0cy5cblx0ICogQHJldHVybnMgVGhlIGxpc3Qgb2YgcmVzdWx0cyBhbmQgbmV3IGZpbHRlcnMuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgZ2V0U2VhcmNoUmVzdWx0cyhcblx0XHRpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248U2FsZXNmb3JjZVNldHRpbmdzPixcblx0XHRxdWVyeTogc3RyaW5nLFxuXHRcdGZpbHRlcnM6IENMSUZpbHRlcltdLFxuXHRcdGxhc3RSZXNwb25zZTogQ0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZVxuXHQpOiBQcm9taXNlPEhvbWVTZWFyY2hSZXNwb25zZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlOiBIb21lU2VhcmNoUmVzcG9uc2UgPSB7XG5cdFx0XHRyZXN1bHRzOiBhd2FpdCB0aGlzLmdldERlZmF1bHRFbnRyaWVzKGludGVncmF0aW9uLCBxdWVyeSlcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuX3NhbGVzRm9yY2VDb25uZWN0aW9uKSB7XG5cdFx0XHRsZXQgc2VhcmNoUmVzdWx0czogKFxuXHRcdFx0XHR8IFNhbGVzZm9yY2VBY2NvdW50XG5cdFx0XHRcdHwgU2FsZXNmb3JjZUNvbnRhY3Rcblx0XHRcdFx0fCBTYWxlc2ZvcmNlVGFza1xuXHRcdFx0XHR8IFNhbGVzZm9yY2VDb250ZW50Tm90ZVxuXHRcdFx0XHR8IFNhbGVzZm9yY2VGZWVkSXRlbVxuXHRcdFx0KVtdO1xuXG5cdFx0XHRsZXQgc2VsZWN0ZWRPYmplY3RzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZmlsdGVycykgJiYgZmlsdGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9iamVjdHNGaWx0ZXIgPSBmaWx0ZXJzLmZpbmQoKHgpID0+IHguaWQgPT09IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9PQkpFQ1RTX0ZJTFRFUl9JRCk7XG5cdFx0XHRcdGlmIChvYmplY3RzRmlsdGVyKSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWRPYmplY3RzID0gKFxuXHRcdFx0XHRcdFx0QXJyYXkuaXNBcnJheShvYmplY3RzRmlsdGVyLm9wdGlvbnMpID8gb2JqZWN0c0ZpbHRlci5vcHRpb25zIDogW29iamVjdHNGaWx0ZXIub3B0aW9uc11cblx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQuZmlsdGVyKCh4KSA9PiBCb29sZWFuKHguaXNTZWxlY3RlZCkpXG5cdFx0XHRcdFx0XHQubWFwKCh4KSA9PiAoeC52YWx1ZSA9PT0gXCJOb3RlXCIgPyBcIkNvbnRlbnROb3RlXCIgOiB4LnZhbHVlKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c2VhcmNoUmVzdWx0cyA9IGF3YWl0IHRoaXMuZ2V0QXBpU2VhcmNoUmVzdWx0cyhxdWVyeSwgc2VsZWN0ZWRPYmplY3RzKTtcblxuXHRcdFx0XHRjb25zdCByZXN1bHRzID0gc2VhcmNoUmVzdWx0cy5tYXAoKHNlYXJjaFJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdGlmIChcIldlYnNpdGVcIiBpbiBzZWFyY2hSZXN1bHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdGFjdGlvbnM6IFt7IG5hbWU6IFwiVmlld1wiLCBob3RrZXk6IFwiZW50ZXJcIiB9XSxcblx0XHRcdFx0XHRcdFx0bGFiZWw6IHNlYXJjaFJlc3VsdC5hdHRyaWJ1dGVzLnR5cGUsXG5cdFx0XHRcdFx0XHRcdGtleTogc2VhcmNoUmVzdWx0LklkLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogc2VhcmNoUmVzdWx0Lk5hbWUsXG5cdFx0XHRcdFx0XHRcdGljb246IGludGVncmF0aW9uPy5kYXRhPy5pY29uTWFwLmFjY291bnQsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0XHRwcm92aWRlcklkOiBTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlci5fUFJPVklERVJfSUQsXG5cdFx0XHRcdFx0XHRcdFx0cGFnZVVybDogdGhpcy5nZXRPYmplY3RVcmwoc2VhcmNoUmVzdWx0LklkLCBpbnRlZ3JhdGlvbi5kYXRhPy5vcmdVcmwpLFxuXHRcdFx0XHRcdFx0XHRcdHRhZ3M6IFtTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlci5fUFJPVklERVJfSURdXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5Db250YWN0LFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiBzZWFyY2hSZXN1bHQuTmFtZSxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogc2VhcmNoUmVzdWx0LkluZHVzdHJ5LFxuXHRcdFx0XHRcdFx0XHRcdGRldGFpbHM6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHRcdFx0W1wiUGhvbmVcIiwgc2VhcmNoUmVzdWx0LlBob25lXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0W1wiVHlwZVwiLCBzZWFyY2hSZXN1bHQuVHlwZV0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFtcIldlYnNpdGVcIiwgc2VhcmNoUmVzdWx0LldlYnNpdGVdXG5cdFx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGFzIENMSVNlYXJjaFJlc3VsdENvbnRhY3Q7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChcIkVtYWlsXCIgaW4gc2VhcmNoUmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRhY3Rpb25zOiBbeyBuYW1lOiBcIlZpZXdcIiwgaG90a2V5OiBcImVudGVyXCIgfV0sXG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBzZWFyY2hSZXN1bHQuYXR0cmlidXRlcy50eXBlLFxuXHRcdFx0XHRcdFx0XHRrZXk6IHNlYXJjaFJlc3VsdC5JZCxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IHNlYXJjaFJlc3VsdC5OYW1lLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBpbnRlZ3JhdGlvbj8uZGF0YT8uaWNvbk1hcC5jb250YWN0LFxuXHRcdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0cHJvdmlkZXJJZDogU2FsZXNGb3JjZUludGVncmF0aW9uUHJvdmlkZXIuX1BST1ZJREVSX0lELFxuXHRcdFx0XHRcdFx0XHRcdHBhZ2VVcmw6IHRoaXMuZ2V0T2JqZWN0VXJsKHNlYXJjaFJlc3VsdC5JZCwgaW50ZWdyYXRpb24uZGF0YT8ub3JnVXJsKSxcblx0XHRcdFx0XHRcdFx0XHR0YWdzOiBbU2FsZXNGb3JjZUludGVncmF0aW9uUHJvdmlkZXIuX1BST1ZJREVSX0lEXVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ29udGFjdCxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogc2VhcmNoUmVzdWx0Lk5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0dGl0bGU6IHNlYXJjaFJlc3VsdC5UaXRsZSxcblx0XHRcdFx0XHRcdFx0XHR1c2VJbml0aWFsczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZXRhaWxzOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFtcIkRlcGFydG1lbnRcIiwgc2VhcmNoUmVzdWx0LkRlcGFydG1lbnRdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRbXCJFbWFpbFwiLCBzZWFyY2hSZXN1bHQuRW1haWxdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRbXCJXb3JrICNcIiwgc2VhcmNoUmVzdWx0LlBob25lXVxuXHRcdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBhcyBDTElTZWFyY2hSZXN1bHRDb250YWN0O1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoXCJEZXNjcmlwdGlvblwiIGluIHNlYXJjaFJlc3VsdCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uczogW3sgbmFtZTogXCJWaWV3XCIsIGhvdGtleTogXCJlbnRlclwiIH1dLFxuXHRcdFx0XHRcdFx0XHRsYWJlbDogc2VhcmNoUmVzdWx0LmF0dHJpYnV0ZXMudHlwZSxcblx0XHRcdFx0XHRcdFx0a2V5OiBzZWFyY2hSZXN1bHQuSWQsXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBzZWFyY2hSZXN1bHQuU3ViamVjdCxcblx0XHRcdFx0XHRcdFx0aWNvbjogaW50ZWdyYXRpb24/LmRhdGE/Lmljb25NYXAudGFzayxcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0XHRcdFx0XHRwYWdlVXJsOiB0aGlzLmdldE9iamVjdFVybChzZWFyY2hSZXN1bHQuSWQsIGludGVncmF0aW9uLmRhdGE/Lm9yZ1VybCksXG5cdFx0XHRcdFx0XHRcdFx0dGFnczogW1NhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRF1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6IFwiTGlzdFwiLFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IFtcblx0XHRcdFx0XHRcdFx0XHRbXCJTdWJqZWN0XCIsIHNlYXJjaFJlc3VsdC5TdWJqZWN0XSxcblx0XHRcdFx0XHRcdFx0XHRbXCJDb21tZW50c1wiLCBzZWFyY2hSZXN1bHQuRGVzY3JpcHRpb25dXG5cdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdH0gYXMgQ0xJU2VhcmNoUmVzdWx0TGlzdDtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFwiVGV4dFByZXZpZXdcIiBpbiBzZWFyY2hSZXN1bHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdGFjdGlvbnM6IFt7IG5hbWU6IFwiVmlld1wiLCBob3RrZXk6IFwiZW50ZXJcIiB9XSxcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiTm90ZVwiLFxuXHRcdFx0XHRcdFx0XHRrZXk6IHNlYXJjaFJlc3VsdC5JZCxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IHNlYXJjaFJlc3VsdC5UaXRsZSxcblx0XHRcdFx0XHRcdFx0aWNvbjogaW50ZWdyYXRpb24/LmRhdGE/Lmljb25NYXAubm90ZSxcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0XHRcdFx0XHRwYWdlVXJsOiB0aGlzLmdldE9iamVjdFVybChzZWFyY2hSZXN1bHQuSWQsIGludGVncmF0aW9uLmRhdGE/Lm9yZ1VybCksXG5cdFx0XHRcdFx0XHRcdFx0dGFnczogW1NhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRF1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6IFwiTGlzdFwiLFxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IFtcblx0XHRcdFx0XHRcdFx0XHRbXCJUaXRsZVwiLCBzZWFyY2hSZXN1bHQuVGl0bGVdLFxuXHRcdFx0XHRcdFx0XHRcdFtcIkNvbnRlbnRcIiwgc2VhcmNoUmVzdWx0Py5UZXh0UHJldmlld11cblx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0fSBhcyBDTElTZWFyY2hSZXN1bHRMaXN0O1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdFx0XHRcImFjdG9yXCIgaW4gc2VhcmNoUmVzdWx0ICYmXG5cdFx0XHRcdFx0XHQoc2VhcmNoUmVzdWx0LnR5cGUgPT09IFwiVGV4dFBvc3RcIiB8fCBzZWFyY2hSZXN1bHQudHlwZSA9PT0gXCJDb250ZW50UG9zdFwiKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uczogW3sgbmFtZTogXCJWaWV3XCIsIGhvdGtleTogXCJlbnRlclwiIH1dLFxuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJDaGF0dGVyXCIsXG5cdFx0XHRcdFx0XHRcdGtleTogc2VhcmNoUmVzdWx0LmlkLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogc2VhcmNoUmVzdWx0LmFjdG9yPy5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdFx0aWNvbjogaW50ZWdyYXRpb24/LmRhdGE/Lmljb25NYXAuY2hhdHRlcixcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0XHRcdFx0XHRwYWdlVXJsOiB0aGlzLmdldE9iamVjdFVybChzZWFyY2hSZXN1bHQuaWQsIGludGVncmF0aW9uLmRhdGE/Lm9yZ1VybCksXG5cdFx0XHRcdFx0XHRcdFx0dGFnczogW1NhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRF1cblx0XHRcdFx0XHRcdFx0fSBhcyBTYWxlc2ZvcmNlUmVzdWx0RGF0YSxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkNvbnRhY3QsXG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlQ29udGVudDoge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHNlYXJjaFJlc3VsdC5hY3Rvcj8uZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0dXNlSW5pdGlhbHM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGV0YWlsczogW1xuXHRcdFx0XHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRbXCJIZWFkZXJcIiwgc2VhcmNoUmVzdWx0Py5oZWFkZXI/LnRleHRdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRbXCJOb3RlXCIsIHNlYXJjaFJlc3VsdD8uYm9keT8udGV4dF1cblx0XHRcdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gYXMgQ0xJU2VhcmNoUmVzdWx0Q29udGFjdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gaW4gdGhpcyBjYXNlIHdlIGFyZSBvbmx5IHNlYXJjaGluZyBmb3IgYWNjb3VudHMsIGNvbnRhY3RzLCB0YXNrcywgY29udGVudCBub3RlcyBhbmQgY2hhdHRlclxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCBmaWx0ZXJlZFJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihCb29sZWFuKSBhcyBDTElTZWFyY2hSZXN1bHRDb250YWN0W107XG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcblx0XHRcdFx0Y29uc3Qgb2JqZWN0cyA9IHNlYXJjaFJlc3VsdHMubWFwKChyZXN1bHQpID0+XG5cdFx0XHRcdFx0XCJhdHRyaWJ1dGVzXCIgaW4gcmVzdWx0ID8gcmVzdWx0LmF0dHJpYnV0ZXMudHlwZSA6IFwiQ2hhdHRlclwiXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHJlc3BvbnNlLnJlc3VsdHMucHVzaCguLi5maWx0ZXJlZFJlc3VsdHMpO1xuXHRcdFx0XHRyZXNwb25zZS5jb250ZXh0ID0ge1xuXHRcdFx0XHRcdGZpbHRlcnM6IHRoaXMuZ2V0U2VhcmNoRmlsdGVycyhvYmplY3RzLm1hcCgoYykgPT4gKGMgPT09IFwiQ29udGVudE5vdGVcIiA/IFwiTm90ZVwiIDogYykpKVxuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuY2xvc2VDb25uZWN0aW9uKCk7XG5cdFx0XHRcdGlmIChlcnIgaW5zdGFuY2VvZiBDb25uZWN0aW9uRXJyb3IpIHtcblx0XHRcdFx0XHRyZXNwb25zZS5yZXN1bHRzLnB1c2godGhpcy5nZXRSZWNvbm5lY3RTZWFyY2hSZXN1bHQoaW50ZWdyYXRpb24sIHF1ZXJ5LCBmaWx0ZXJzKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgU2FsZXNGb3JjZSBzZWFyY2ggcmVzdWx0c1wiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYSBsaXN0IG9mIHRoZSBkZWZhdWx0IGFwcGxpY2F0aW9uIGVudHJpZXMuXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcmV0dXJucyBUaGUgbGlzdCBvZiBhcHBsaWNhdGlvbiBlbnRyaWVzLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBnZXREZWZhdWx0RW50cmllcyhcblx0XHRpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248U2FsZXNmb3JjZVNldHRpbmdzPixcblx0XHRxdWVyeTogc3RyaW5nXG5cdCk6IFByb21pc2U8SG9tZVNlYXJjaFJlc3VsdFtdPiB7XG5cdFx0Y29uc3QgcmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdID0gW107XG5cdFx0aWYgKGludGVncmF0aW9uPy5kYXRhPy5vcmdVcmwpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gXCJCcm93c2UgU2FsZXNmb3JjZVwiO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRxdWVyeSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdHF1ZXJ5ID09PSBudWxsIHx8XG5cdFx0XHRcdHF1ZXJ5ID09PSBcIlwiIHx8XG5cdFx0XHRcdHRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcblx0XHRcdCkge1xuXHRcdFx0XHRyZXN1bHRzLnB1c2goe1xuXHRcdFx0XHRcdGFjdGlvbnM6IFt7IG5hbWU6IFwiQnJvd3NlXCIsIGhvdGtleTogXCJlbnRlclwiIH1dLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0XHRcdHBhZ2VVcmw6IGludGVncmF0aW9uPy5kYXRhPy5vcmdVcmwsXG5cdFx0XHRcdFx0XHR0YWdzOiBbU2FsZXNGb3JjZUludGVncmF0aW9uUHJvdmlkZXIuX1BST1ZJREVSX0lEXVxuXHRcdFx0XHRcdH0gYXMgU2FsZXNmb3JjZVJlc3VsdERhdGEsXG5cdFx0XHRcdFx0aWNvbjogaW50ZWdyYXRpb24uaWNvbixcblx0XHRcdFx0XHRrZXk6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9CUk9XU0VfU0VBUkNIX1JFU1VMVF9LRVksXG5cdFx0XHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLlBsYWluLFxuXHRcdFx0XHRcdHRlbXBsYXRlQ29udGVudDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdHRpdGxlXG5cdFx0XHRcdH0gYXMgQ0xJU2VhcmNoUmVzdWx0UGxhaW4pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF0aGlzLl9zYWxlc0ZvcmNlQ29ubmVjdGlvbiAmJiAocXVlcnkgPT09IHVuZGVmaW5lZCB8fCBxdWVyeSA9PT0gbnVsbCB8fCBxdWVyeSA9PT0gXCJcIikpIHtcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHRoaXMuZ2V0UmVjb25uZWN0U2VhcmNoUmVzdWx0KGludGVncmF0aW9uKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cblxuXHQvKipcblx0ICogT3BlbiB0aGUgY29ubmVjdGlvbiB0byBTYWxlRm9yY2UuXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIG9wZW5Db25uZWN0aW9uKGludGVncmF0aW9uOiBJbnRlZ3JhdGlvbjxTYWxlc2ZvcmNlU2V0dGluZ3M+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKGludGVncmF0aW9uPy5kYXRhPy5vcmdVcmwgJiYgIXRoaXMuX3NhbGVzRm9yY2VDb25uZWN0aW9uKSB7XG5cdFx0XHRlbmFibGVMb2dnaW5nKCk7XG5cdFx0XHR0aGlzLl9zYWxlc0ZvcmNlQ29ubmVjdGlvbiA9IGF3YWl0IGNvbm5lY3QoaW50ZWdyYXRpb24/LmRhdGEub3JnVXJsLCBpbnRlZ3JhdGlvbj8uZGF0YS5jb25zdW1lcktleSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIFNhbGVzRm9yY2UuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjbG9zZUNvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuX3NhbGVzRm9yY2VDb25uZWN0aW9uKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLl9zYWxlc0ZvcmNlQ29ubmVjdGlvbi5kaXNjb25uZWN0KCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGRpc2Nvbm5lY3RpbmcgU2FsZXNGb3JjZVwiLCBlcnIpO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0dGhpcy5fc2FsZXNGb3JjZUNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgb2JqZWN0IHVybCBmcm9tIHRoZSBpZiBhbmQgb3JpZ2luLlxuXHQgKiBAcGFyYW0gb2JqZWN0SWQgVGhlIG9iamVjdCBpZC5cblx0ICogQHBhcmFtIHNhbGVzZm9yY2VPcmdPcmlnaW4gVGhlIG9yaWdpbiB1cmwuXG5cdCAqIEByZXR1cm5zIFRoZW4gb2JqZWN0IHVybC5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIGdldE9iamVjdFVybChvYmplY3RJZDogc3RyaW5nLCBzYWxlc2ZvcmNlT3JnT3JpZ2luPzogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoIXNhbGVzZm9yY2VPcmdPcmlnaW4pIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRyZXR1cm4gYCR7c2FsZXNmb3JjZU9yZ09yaWdpbn0vJHtvYmplY3RJZH1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCByZXN1bHRzIGZyb20gdGhlIEFQSSB1c2luZyBhIHF1ZXJ5LlxuXHQgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIGNhbGwgdGhlIEFQSSB3aXRoLlxuXHQgKiBAcGFyYW0gc2VsZWN0ZWRPYmplY3RzIFRoZSBzZWxlY3RlZCBmaWx0ZXJzLlxuXHQgKiBAcmV0dXJucyBUaGUgc2VhcmNoIHJlc3VsdCBvYmplY3RzIGZyb20gdGhlIEFQSS5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGdldEFwaVNlYXJjaFJlc3VsdHMoXG5cdFx0cXVlcnk6IHN0cmluZyxcblx0XHRzZWxlY3RlZE9iamVjdHM/OiBzdHJpbmdbXVxuXHQpOiBQcm9taXNlPFxuXHRcdChTYWxlc2ZvcmNlQ29udGFjdCB8IFNhbGVzZm9yY2VBY2NvdW50IHwgU2FsZXNmb3JjZVRhc2sgfCBTYWxlc2ZvcmNlQ29udGVudE5vdGUgfCBTYWxlc2ZvcmNlRmVlZEl0ZW0pW11cblx0PiB7XG5cdFx0Y29uc3QgYWNjb3VudEZpZWxkU3BlYyA9IFwiQWNjb3VudChJZCwgSW5kdXN0cnksIE5hbWUsIFBob25lLCBUeXBlLCBXZWJzaXRlKVwiO1xuXHRcdGNvbnN0IGNvbnRhY3RGaWVsZFNwZWMgPSBcIkNvbnRhY3QoRGVwYXJ0bWVudCwgRW1haWwsIElkLCBOYW1lLCBQaG9uZSwgVGl0bGUpXCI7XG5cdFx0Y29uc3QgdGFza0ZpZWxkU3BlYyA9IFwiVGFzayhJZCwgU3ViamVjdCwgRGVzY3JpcHRpb24pXCI7XG5cdFx0Y29uc3QgY29udGVudE5vdGVGaWVsZFNwZWMgPSBcIkNvbnRlbnROb3RlKElkLCBUaXRsZSwgQ29udGVudCwgVGV4dFByZXZpZXcpXCI7XG5cdFx0Y29uc3QgZmllbGRTcGVjTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oW1xuXHRcdFx0W1wiQWNjb3VudFwiLCBhY2NvdW50RmllbGRTcGVjXSxcblx0XHRcdFtcIkNvbnRhY3RcIiwgY29udGFjdEZpZWxkU3BlY10sXG5cdFx0XHRbXCJUYXNrXCIsIHRhc2tGaWVsZFNwZWNdLFxuXHRcdFx0W1wiQ29udGVudE5vdGVcIiwgY29udGVudE5vdGVGaWVsZFNwZWNdXG5cdFx0XSk7XG5cdFx0Y29uc3QgZmllbGRTcGVjcyA9IFsuLi5maWVsZFNwZWNNYXBdXG5cdFx0XHQuZmlsdGVyKCh4KSA9PiB7XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHNlbGVjdGVkT2JqZWN0cykgJiYgc2VsZWN0ZWRPYmplY3RzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gc2VsZWN0ZWRPYmplY3RzLmluY2x1ZGVzKHhbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSlcblx0XHRcdC5tYXAoKHgpID0+IHhbMV0pO1xuXG5cdFx0Y29uc3QgYmF0Y2g6IFNhbGVzZm9yY2VCYXRjaFJlcXVlc3RJdGVtW10gPSBmaWVsZFNwZWNzLm1hcCgoZmllbGRTcGVjKSA9PiB7XG5cdFx0XHRjb25zdCBzYWxlc2ZvcmNlU2VhcmNoUXVlcnkgPSBgRklORCB7JHt0aGlzLmVzY2FwZVF1ZXJ5KFxuXHRcdFx0XHRxdWVyeVxuXHRcdFx0KX19IElOIEFMTCBGSUVMRFMgUkVUVVJOSU5HICR7ZmllbGRTcGVjfSBMSU1JVCAxMGA7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0dXJsOiBgL3NlcnZpY2VzL2RhdGEvdlhYLlgvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQoc2FsZXNmb3JjZVNlYXJjaFF1ZXJ5KX1gXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0Y29uc3QgaW5jbHVkZUNoYXR0ZXIgPSAhc2VsZWN0ZWRPYmplY3RzPy5sZW5ndGggfHwgc2VsZWN0ZWRPYmplY3RzLmluY2x1ZGVzKFwiQ2hhdHRlclwiKTtcblx0XHRpZiAoaW5jbHVkZUNoYXR0ZXIpIHtcblx0XHRcdGJhdGNoLnB1c2goe1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdHVybDogYC9zZXJ2aWNlcy9kYXRhL3ZYWC5YL2NoYXR0ZXIvZmVlZC1lbGVtZW50cz9xPSR7cXVlcnl9JnBhZ2VTaXplPTI1JnNvcnQ9TGFzdE1vZGlmaWVkRGF0ZURlc2NgXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCBiYXRjaGVkUmVzdWx0cyA9IGF3YWl0IHRoaXMuZ2V0QmF0Y2hlZFJlc3VsdHM8XG5cdFx0XHR8IFNhbGVzZm9yY2VSZXN0QXBpU2VhcmNoUmVzcG9uc2U8XG5cdFx0XHRcdFx0U2FsZXNmb3JjZUFjY291bnQgfCBTYWxlc2ZvcmNlQ29udGFjdCB8IFNhbGVzZm9yY2VUYXNrIHwgU2FsZXNmb3JjZUNvbnRlbnROb3RlXG5cdFx0XHQgID5cblx0XHRcdHwgU2FsZXNmb3JjZUZlZWRFbGVtZW50UGFnZVxuXHRcdD4oYmF0Y2gpO1xuXG5cdFx0bGV0IHJlc3VsdHM6IChcblx0XHRcdHwgU2FsZXNmb3JjZUFjY291bnRcblx0XHRcdHwgU2FsZXNmb3JjZUNvbnRhY3Rcblx0XHRcdHwgU2FsZXNmb3JjZVRhc2tcblx0XHRcdHwgU2FsZXNmb3JjZUNvbnRlbnROb3RlXG5cdFx0XHR8IFNhbGVzZm9yY2VGZWVkSXRlbVxuXHRcdClbXSA9IFtdO1xuXG5cdFx0aWYgKGJhdGNoZWRSZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGxldCBpZHggPSAwO1xuXHRcdFx0Zm9yICg7IGlkeCA8IGZpZWxkU3BlY3MubGVuZ3RoOyBpZHgrKykge1xuXHRcdFx0XHRjb25zdCBzZWFyY2hSZXNwb25zZSA9IGJhdGNoZWRSZXN1bHRzW2lkeF0gYXMgU2FsZXNmb3JjZVJlc3RBcGlTZWFyY2hSZXNwb25zZTxcblx0XHRcdFx0XHRTYWxlc2ZvcmNlQWNjb3VudCB8IFNhbGVzZm9yY2VDb250YWN0IHwgU2FsZXNmb3JjZVRhc2sgfCBTYWxlc2ZvcmNlQ29udGVudE5vdGVcblx0XHRcdFx0Pjtcblx0XHRcdFx0aWYgKHNlYXJjaFJlc3BvbnNlPy5zZWFyY2hSZWNvcmRzPy5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXN1bHRzID0gcmVzdWx0cy5jb25jYXQoc2VhcmNoUmVzcG9uc2Uuc2VhcmNoUmVjb3Jkcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGluY2x1ZGVDaGF0dGVyKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXR0ZXJSZXNwb25zZSA9IGJhdGNoZWRSZXN1bHRzW2lkeCsrXSBhcyBTYWxlc2ZvcmNlRmVlZEVsZW1lbnRQYWdlO1xuXHRcdFx0XHRpZiAoY2hhdHRlclJlc3BvbnNlPy5lbGVtZW50cz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cmVzdWx0cyA9IHJlc3VsdHMuY29uY2F0KGNoYXR0ZXJSZXNwb25zZS5lbGVtZW50cyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgYmF0Y2hlZCByZXN1bHRzIGZyb20gU2FsZXNGb3JjZSBhcGkuXG5cdCAqIEBwYXJhbSBiYXRjaFJlcXVlc3RzIFRoZSBiYXRjaCByZXF1ZXN0cyB0byBzZW5kLlxuXHQgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBmcm9tIHRoZSBiYXRjaCByZXF1ZXN0LlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgYXN5bmMgZ2V0QmF0Y2hlZFJlc3VsdHM8VD4oYmF0Y2hSZXF1ZXN0czogU2FsZXNmb3JjZUJhdGNoUmVxdWVzdEl0ZW1bXSk6IFByb21pc2U8VFtdPiB7XG5cdFx0aWYgKGJhdGNoUmVxdWVzdHMubGVuZ3RoID09PSAwIHx8ICF0aGlzLl9zYWxlc0ZvcmNlQ29ubmVjdGlvbikge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0XHRjb25zdCBiYXRjaDogU2FsZXNmb3JjZUJhdGNoUmVxdWVzdCA9IHsgYmF0Y2hSZXF1ZXN0cywgaGFsdE9uRXJyb3I6IGZhbHNlIH07XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3NhbGVzRm9yY2VDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PFNhbGVzZm9yY2VCYXRjaFJlc3BvbnNlPihcblx0XHRcdFwiL3NlcnZpY2VzL2RhdGEvdlhYLlgvY29tcG9zaXRlL2JhdGNoL1wiLFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRiYXRjaCxcblx0XHRcdHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfVxuXHRcdCk7XG5cblx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YT8ucmVzdWx0cy5tYXAoKHIpID0+IHIucmVzdWx0IGFzIFQpID8/IFtdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVzY2FwZSBhbnkgY2hhcmFjdGVycyBuZWVkZWQgaW4gU2FsZXNGb3JjZSBBUEkgY2FsbHMuXG5cdCAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gZXNjYXBlLlxuXHQgKiBAcmV0dXJucyBUaGUgZXNjYXBlZCBxdWVyeS5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIGVzY2FwZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdC8vIFRoZXJlIGFyZSBzb21lIHJlc2VydmVkIGNoYXJhY3RlcnMgZm9yIHF1ZXJpZXMgc28gd2UgbmVlZCB0byBlc2NhcGUgdGhlbVxuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLnNhbGVzZm9yY2UuY29tL2RvY3MvYXRsYXMuZW4tdXMuc29xbF9zb3NsLm1ldGEvc29xbF9zb3NsL3Nmb3JjZV9hcGlfY2FsbHNfc29zbF9maW5kLmh0bVxuXHRcdHJldHVybiBxdWVyeS5yZXBsYWNlKC9bIVwiJicoKSorOj9bXFxcXFxcXV57fH1+LV0vZ20sIFwiXFxcXCQmXCIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgc2VhcmNoIHJlc3VsdCB0byBkaXNwbGF5IHdoZW4gU2FsZXNGb3JjZSBuZWVkcyB0byByZWNvbm5lY3QuXG5cdCAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0aGF0IG5lZWRzIHRvIHJlY29ubmVjdC5cblx0ICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlciBmb3IgdGhlIHJlY29ubmVjdC5cblx0ICogQHJldHVybnMgVGhlIHNlYXJjaCByZXN1bHQgZW50cnkuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBnZXRSZWNvbm5lY3RTZWFyY2hSZXN1bHQoXG5cdFx0aW50ZWdyYXRpb246IEludGVncmF0aW9uPFNhbGVzZm9yY2VTZXR0aW5ncz4sXG5cdFx0cXVlcnk/OiBzdHJpbmcsXG5cdFx0ZmlsdGVycz86IENMSUZpbHRlcltdXG5cdCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRhY3Rpb25zOiBbeyBuYW1lOiBcIlJlY29ubmVjdFwiLCBob3RrZXk6IFwiZW50ZXJcIiB9XSxcblx0XHRcdGtleTogU2FsZXNGb3JjZUludGVncmF0aW9uUHJvdmlkZXIuX05PVF9DT05ORUNURURfU0VBUkNIX1JFU1VMVF9LRVksXG5cdFx0XHRpY29uOiBpbnRlZ3JhdGlvbj8uaWNvbixcblx0XHRcdHRpdGxlOiBcIlJlY29ubmVjdCB0byBTYWxlc2ZvcmNlXCIsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IFNhbGVzRm9yY2VJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0cXVlcnksXG5cdFx0XHRcdGZpbHRlcnNcblx0XHRcdH1cblx0XHR9IGFzIENMSVNlYXJjaFJlc3VsdFNpbXBsZVRleHQ7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBzZWFyY2ggZmlsdGVycyBiYXNlZCBvbiB0aGUgcmVzdWx0cy5cblx0ICogQHBhcmFtIG9iamVjdHMgVGhlIG9iamVjdCB0eXBlcyB0byBjcmVhdGUgdGhlIGZpbHRlcnMgZnJvbS5cblx0ICogQHJldHVybnMgVGhlIGZpbHRlcnMuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBnZXRTZWFyY2hGaWx0ZXJzKG9iamVjdHM6IHN0cmluZ1tdKTogQ0xJRmlsdGVyW10ge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KG9iamVjdHMpICYmIG9iamVjdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgZmlsdGVyczogQ0xJRmlsdGVyW10gPSBbXTtcblx0XHRcdGNvbnN0IHVuaXF1ZU9iamVjdHMgPSBbLi4ubmV3IFNldChvYmplY3RzLnNvcnQoKSldO1xuXHRcdFx0Y29uc3Qgb2JqZWN0RmlsdGVyOiBDTElGaWx0ZXIgPSB7XG5cdFx0XHRcdGlkOiBTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlci5fT0JKRUNUU19GSUxURVJfSUQsXG5cdFx0XHRcdHRpdGxlOiBcIk9iamVjdHNcIixcblx0XHRcdFx0dHlwZTogQ0xJRmlsdGVyT3B0aW9uVHlwZS5NdWx0aVNlbGVjdCxcblx0XHRcdFx0b3B0aW9uczogW11cblx0XHRcdH07XG5cblx0XHRcdGZvciAoY29uc3Qgb2JqZWN0IG9mIHVuaXF1ZU9iamVjdHMpIHtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqZWN0RmlsdGVyLm9wdGlvbnMpKSB7XG5cdFx0XHRcdFx0b2JqZWN0RmlsdGVyLm9wdGlvbnMucHVzaCh7XG5cdFx0XHRcdFx0XHR2YWx1ZTogb2JqZWN0LFxuXHRcdFx0XHRcdFx0aXNTZWxlY3RlZDogZmFsc2Vcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmaWx0ZXJzLnB1c2gob2JqZWN0RmlsdGVyKTtcblx0XHRcdHJldHVybiBmaWx0ZXJzO1xuXHRcdH1cblx0XHRyZXR1cm4gW107XG5cdH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlciB9IGZyb20gXCIuL2ludGVncmF0aW9uLXByb3ZpZGVyXCI7XG5cbmV4cG9ydCBjb25zdCBpbnRlZ3JhdGlvbiA9IG5ldyBTYWxlc0ZvcmNlSW50ZWdyYXRpb25Qcm92aWRlcigpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9