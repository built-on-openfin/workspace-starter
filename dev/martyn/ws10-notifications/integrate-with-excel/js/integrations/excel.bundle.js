/******/ var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/excel/openfin.excel.js":
/*!**********************************************************!*\
  !*** ../../node_modules/@openfin/excel/openfin.excel.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AdapterError": () => (/* binding */ r),
/* harmony export */   "ApiError": () => (/* binding */ o),
/* harmony export */   "EventError": () => (/* binding */ s),
/* harmony export */   "ExcelCellBorderLineStyle": () => (/* binding */ a),
/* harmony export */   "ExcelCellHorizontalAlignment": () => (/* binding */ c),
/* harmony export */   "ExcelCellPattern": () => (/* binding */ d),
/* harmony export */   "ExcelCellVerticalAlignment": () => (/* binding */ h),
/* harmony export */   "ExcelFilterOperator": () => (/* binding */ l),
/* harmony export */   "InitializationError": () => (/* binding */ u),
/* harmony export */   "ParameterError": () => (/* binding */ p),
/* harmony export */   "disableLogging": () => (/* binding */ w),
/* harmony export */   "enableLogging": () => (/* binding */ y),
/* harmony export */   "getExcelApplication": () => (/* binding */ f)
/* harmony export */ });
var e={3885:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4794);class s extends i.Base{async wrap(e){this.wire.sendAction("wrap-application").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch((e=>{})),this._create(e)}async start(e){this.wire.sendAction("start-application").catch((e=>{}));const t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e){return this.wire.sendAction("run-applications",{applications:e}).then((()=>{}))}getCurrent(){return this.wire.sendAction("get-current-application").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch((e=>{}));const n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch((e=>{})),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then((({payload:e})=>{const t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})})).then((t=>(t._manifestUrl=e,t)))}}t.default=s},4794:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=n(9659),r=n(4997),o=n(4169);class s extends i.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new r._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){const t=[];return e.forEach((e=>{t.push(new r._Window(this.wire,{uuid:e.uuid,name:e.name}))})),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then((({payload:e})=>e.data))}async quit(e=!1){await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}_close(e=!1){return this.wire.sendAction("close-application",{force:e,...this.identity}).then((()=>{}))}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch((e=>{})),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then((({payload:e})=>{const t=[];return e.data.forEach((e=>{t.push({uuid:this.identity.uuid,name:e})})),this.windowListFromIdentityList(t)}))}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then((({payload:e})=>e.data))}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then((({payload:e})=>e.data))}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then((({payload:e})=>e.data))}async getViews(){const{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then((({payload:e})=>e.data))}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch((e=>{})),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then((()=>{}))}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then((()=>{}))}restart(){return this.wire.sendAction("restart-application",this.identity).then((()=>{}))}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch((e=>{})),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then((()=>{}))}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then((()=>{}))}async sendApplicationLog(){const{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then((()=>{}))}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then((()=>{}))}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then((()=>{}))}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then((({payload:e})=>e.data))}terminate(){return this.wire.sendAction("terminate-application",this.identity).then((()=>{}))}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-info",this.identity).then((({payload:e})=>e.data))}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){await this.wire.sendAction("set-file-download-location",{downloadLocation:e,...this.identity})}}t.Application=s},7264:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3885);r(n(4794),t),t.default=o.default},9659:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=t.EmitterBase=t.Base=void 0;const s=n(3442),a=n(8068);class c{constructor(e){this.isNodeEnvironment=()=>"NodeEnvironment"===this.wire.environment.constructor.name,this.isOpenFinEnvironment=()=>"OpenFinEnvironment"===this.wire.environment.constructor.name,this.wire=e}get fin(){return a.getFin(this.wire)}get me(){return this.wire.me}}t.Base=c,t.EmitterBase=class extends c{constructor(e,t,...n){super(e),this.topic=t,i.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(o(this,i)),this.getOrCreateEmitter=()=>this.wire.eventAggregator.getOrCreate(o(this,i)),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,i)=>{const r={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},o=this.getOrCreateEmitter();n(o);try{await this.wire.sendAction("subscribe-to-desktop-event",r)}catch(e){throw i(o),this.deleteEmitterIfNothingRegistered(o),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){const n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch((()=>null)),this.getOrCreateEmitter()}return Promise.resolve()},this.on=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.on(e,t)}),(n=>{n.removeListener(e,t)})),this),this.addListener=this.on,this.once=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.once(e,i),n.once(e,t)}),(n=>{n.removeListener(e,i),n.removeListener(e,t)})),this},this.prependListener=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.prependListener(e,t)}),(n=>{n.removeListener(e,t)})),this),this.prependOnceListener=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.prependOnceListener(e,t),n.once(e,i)}),(n=>{n.removeListener(e,t),n.removeListener(e,i)})),this},this.removeListener=async(e,t,n)=>{const i=await this.deregisterEventListener(e,n);return i&&(i.removeListener(e,t),this.deleteEmitterIfNothingRegistered(i)),this},this.deregisterAllListeners=async e=>{const t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){const e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),i=[];for(let e=0;e<n;e++)i.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch((()=>null)));return await Promise.all(i),e}},this.removeAllListeners=async e=>{const t=async e=>{const t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await t(e);else if(this.hasEmitter()){const e=this.getOrCreateEmitter().eventNames();await s.promiseMap(e,t)}return this},r(this,i,[t,...n]),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[]}deleteEmitterIfNothingRegistered(e){0===e.eventNames().length&&this.wire.eventAggregator.delete(o(this,i))}},i=new WeakMap,t.Reply=class{}},3427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.Base{writeText(e){return this.wire.sendAction("clipboard-write-text",e).then((()=>{}))}readText(e){return this.wire.sendAction("clipboard-read-text",e).then((({payload:e})=>e.data))}writeHtml(e){return this.wire.sendAction("clipboard-write-html",e).then((()=>{}))}readHtml(e){return this.wire.sendAction("clipboard-read-html",e).then((({payload:e})=>e.data))}writeRtf(e){return this.wire.sendAction("clipboard-write-rtf",e).then((()=>{}))}readRtf(e){return this.wire.sendAction("clipboard-read-rtf",e).then((({payload:e})=>e.data))}write(e){return this.wire.sendAction("clipboard-write",e).then((()=>{}))}getAvailableFormats(e){return this.wire.sendAction("clipboard-read-formats",e).then((({payload:e})=>e.data))}}t.default=r},7813:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitterMap=void 0;const i=n(6465);function r(e){return Buffer.from(e).toString("base64")}t.EmitterMap=class{constructor(){this.storage=new Map}hashKeys(e){return e.map(r).join("/")}getOrCreate(e){const t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new i.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){const t=this.hashKeys(e);return this.storage.delete(t)}}},2734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(7813);class r extends i.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if(function(e){return"process-desktop-event"===e.action}(e)){const{payload:t}=e,n=function(e){const{topic:t}=e;if("frame"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("window"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("application"===t){const{uuid:n}=e;return[t,n]}if("view"===t){const{uuid:n,name:i}=e;return[t,n,i]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}t.default=r},7168:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(8298);class o extends i.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch((e=>{})),Promise.resolve(new r.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch((e=>{})),new r.ExternalApplication(this.wire,{uuid:e})}}t.default=o},8298:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplication=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then((({payload:e})=>e.data))}}t.ExternalApplication=r},9021:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7168);t.default=o.default,r(n(8298),t)},6545:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(6465),r=n(3641),o=n(4997),s=n(7264),a=n(8347),c=n(3427),d=n(9021),h=n(6720),l=n(9211),u=n(4169),p=n(609),w=n(9641),y=n(8068),f=n(8706),g=n(7153);class m extends i.EventEmitter{constructor(e){super(),y.registerFin(e,this),this.wire=e,this.System=new r.default(e),this.Window=new o.default(e),this.Application=new s.default(e),this.InterApplicationBus=new a.default(e),this.Clipboard=new c.default(e),this.ExternalApplication=new d.default(e),this.Frame=new h.default(e),this.GlobalHotkey=new l.default(e),this.Platform=new p.default(e,this.InterApplicationBus.Channel),this.View=new u.default(e),this.Interop=new f.default(e),this.SnapshotSource=new g.default(e),this.me=w.getMe(e),e.on("disconnected",(()=>{this.emit("disconnected")}))}}t.default=m},1778:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(8161);class s extends i.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch((e=>{})),Promise.resolve(new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch((e=>{})),new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}t.default=s},8161:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Frame=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then((({payload:e})=>e.data))}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then((({payload:e})=>e.data))}}t._Frame=r},6720:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1778);t.default=o.default,r(n(8161),t)},9211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter((e=>!("registered"===e||"unregistered"===e))).map((e=>this.removeAllListeners(e)))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){const{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t.default=r},7539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelBase=t.ProtectedItems=void 0;const n=e=>(t,n,i)=>{const r=e(t,n,i);return void 0===r?n:r};t.ProtectedItems=class{constructor(e,t){this.providerIdentity=e,this.wire=t}};class i{constructor(){this.subscriptions=new Map}static defaultAction(e){throw new Error(`No action registered at target for ${e}`)}async processAction(e,t,n){try{const r=this.subscriptions.has(e)?this.subscriptions.get(e):(t,n)=>{var r;return(null!==(r=this.defaultAction)&&void 0!==r?r:i.defaultAction)(e,t,n)},o=this.preAction?await this.preAction(e,t,n):t,s=await r(o,n);return this.postAction?await this.postAction(e,s,n):s}catch(t){if(this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw new Error("Already registered beforeAction middleware");this.preAction=n(e)}onError(e){if(this.errorMiddleware)throw new Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw new Error("Already registered afterAction middleware");this.postAction=n(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw new Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw new Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}t.ChannelBase=i},8378:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const c=n(7539),d=new Map;class h extends c.ChannelBase{constructor(e,t,n){super(),i.set(this,void 0),r.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),o.set(this,(()=>{d.delete(this.endpointId),a(this,r).close()})),s(this,i,new c.ProtectedItems(e,t)),this.disconnectListener=()=>{},this.endpointId=e.endpointId,s(this,r,n),d.set(this.endpointId,this),n.receive(this.processAction)}static closeChannelByEndpointId(e){const t=d.get(e);t&&a(t,o).call(t)}static handleProviderDisconnect(e,t){e.disconnectListener(t),a(e,o).call(e)}get providerIdentity(){return a(this,i).providerIdentity}async dispatch(e,t){if(a(this,r).isEndpointConnected(this.providerIdentity.channelId))return a(this,r).send(this.providerIdentity.channelId,e,t);throw new Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw new Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){const e=a(this,i),{channelName:t,uuid:n,name:r}=e.providerIdentity;await e.wire.sendAction("disconnect-from-channel",{channelName:t,uuid:n,name:r,endpointId:this.endpointId}),a(this,o).call(this)}}t.default=h,i=new WeakMap,r=new WeakMap,o=new WeakMap},6711:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const a=n(3917),c=n(9659),d=n(1046),h=n(3870),l=n(569),u=n(2942),p=n(3749),w=n(3037),y=n(7113);class f extends c.Base{constructor(e){super(e),i.set(this,void 0),r.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new w.ProtocolManager(this.isNodeEnvironment()?["classic"]:["rtc","classic"]),o(this,i,new p.MessageReceiver(e)),o(this,r,new l.RTCICEManager(e)),e.registerMessageHandler(this.onmessage.bind(this))}static getProtocolOptionsFromStrings(e){return e.map((e=>{switch(e){case"rtc":return h.RTCInfo;case"classic":return d.ClassicInfo;default:return a.exhaustiveCheck(e,["rtc","classic"])}}))}createProvider(e,t){const n=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),r=this.protocolManager.getProviderProtocols(null==n?void 0:n.protocols),o=r.map((e=>{switch(e){case"rtc":return new h.RTCStrategy;case"classic":return new d.ClassicStrategy(this.wire,s(this,i),t.channelId,t);default:return a.exhaustiveCheck(e,["rtc","classic"])}}));let c;if(2===o.length){const[e,t]=o;c=y.default.combine(e,t)}else{if(1!==o.length)throw new Error("failed to combine strategies");[c]=o}const l=new u.ChannelProvider(t,this.wire,c),p=t.channelId;return this.providerMap.set(p,{provider:l,strategy:c,supportedProtocols:f.getProtocolOptionsFromStrings(r)}),u.ChannelProvider.setProviderRemoval(l,this.removeChannelFromProviderMap.bind(this)),l}async createClientOffer(e){const t=this.protocolManager.getClientProtocols(null==e?void 0:e.protocols);let n;return{offer:{supportedProtocols:await Promise.all(t.map((async e=>{switch(e){case"rtc":{const{rtcClient:e,channels:t,offer:i,rtcConnectionId:o,channelsOpened:a}=await s(this,r).startClientOffer();return n={rtcClient:e,channels:t,channelsOpened:a},{type:"rtc",version:h.RTCInfo.version,payload:{offer:i,rtcConnectionId:o}}}case"classic":return{type:"classic",version:d.ClassicInfo.version};default:return a.exhaustiveCheck(e,["rtc","classic"])}}))),maxProtocols:2},rtc:n}}async createClientStrategy(e,t){var n;t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),s(this,i).checkForPreviousClientConnection(t.channelId));const o=null!==(n=t.answer)&&void 0!==n?n:{supportedProtocols:[{type:"classic",version:1}]},a=(await Promise.all(o.supportedProtocols.map((async n=>"rtc"===n.type&&e?(await s(this,r).finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new h.RTCStrategy):"classic"===n.type?new d.ClassicStrategy(this.wire,s(this,i),t.endpointId,t):null)))).filter((e=>null!==e));let c;if(e&&!a.some((e=>e instanceof h.RTCStrategy))&&e&&e.rtcClient.close(),a.length>=2)c=y.default.combine(a[0],a[1]);else{if(!a.length)throw new Error("No compatible protocols");[c]=a}const l={endpointIdentity:t,rtc:e};return c.addEndpoint(t.channelId,l),c}async processChannelConnection(e){const{clientIdentity:t,providerIdentity:n,ackToSender:i,payload:o,offer:a}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);const c=n.channelId,l=this.providerMap.get(c);if(!l)return i.payload.success=!1,i.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(i);const{provider:p,strategy:w,supportedProtocols:y}=l;try{if(!(p instanceof u.ChannelProvider))throw Error("Cannot connect to a channel client");const e=null!=a?a:{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1},n=this.protocolManager.getCompatibleProtocols(y,e);if(!n.length)throw new Error("This provider does not support any of the offered protocols.");const c=await p.processConnection(t,o);i.payload.payload=i.payload.payload||{};let l={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return l=await n.reduce((async(e,t)=>{const n=await e;if("rtc"===t.type){const{answer:e,rtcClient:i,channels:o}=await s(this,r).createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:h.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then((e=>o.then((t=>({...e,rtc:{rtcClient:i,channels:t}})))))}else n.supportedProtocols.push({type:"classic",version:d.ClassicInfo.version});return n}),Promise.resolve(l)),l.endpointPayloadPromise.then((e=>w.addEndpoint(t.endpointId,e))),i.payload.payload.result=c,i.payload.payload.answer=l,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,this.wire.sendRaw(i)}}}t.ConnectionManager=f,i=new WeakMap,r=new WeakMap},7722:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const s=n(8378),a=n(2942),c=n(9659),d=n(6711),h=()=>{};class l extends c.EmitterBase{constructor(e){super(e,"channel"),i.set(this,void 0),r(this,i,new d.ConnectionManager(e))}async getAllChannels(){return this.wire.sendAction("get-all-channels").then((({payload:e})=>e.data))}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async connect(e,t){if(!e||"string"!=typeof e)throw new Error("Please provide a channelName string to connect to a channel.");const n=Object.assign(this.wire.environment.getDefaultChannelOptions().connect,t||{});let r=h,a=h;const c=new Promise((t=>{r=t,a=i=>{e===i.channelName&&(this.removeListener("connected",a),this.connect(e,n).then((e=>{t(e)})))},this.on("connected",a)}));try{const{offer:t,rtc:c}=await o(this,i).createClientOffer(n),d=await this.wire.sendAction("connect-to-channel",{channelName:e,...n,offer:t}),{payload:{data:h}}=d;r&&r(),this.removeListener("connected",a);const l=await o(this,i).createClientStrategy(c,h),u=new s.default(h,this.wire,l);return l.onEndpointDisconnect(h.channelId,(async()=>{try{await u.disconnect()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${h.uuid} / name: ${h.name} / endpointId: ${h.endpointId}.`)}finally{s.default.handleProviderDisconnect(u,h)}})),this.on("disconnected",(t=>{t.channelName===e&&s.default.handleProviderDisconnect(u,t)})),u}catch(t){const i="internal-nack";if({wait:!0,...n}.wait&&t.message&&t.message.includes(i))return console.warn(`Channel not found for channelName: ${e}, waiting for channel connection.`),c;throw t.message===i?new Error(`No channel found for channelName: ${e}`):new Error(t)}}async create(e,t){if(!e)throw new Error("Please provide a channelName to create a channel");const{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),r=o(this,i).createProvider(t,n);return this.on("client-disconnected",(t=>{t.channelName===e&&a.ChannelProvider.handleClientDisconnection(r,t)})),r}}t.Channel=l,i=new WeakMap},3749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiver=void 0;const i=n(8378),r=n(9659);class o extends r.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){var t,n;const{senderIdentity:i,providerIdentity:r,action:o,ackToSender:s,payload:a,intendedTargetIdentity:c}=e.payload,d=null!==(n=null!==(t=c.channelId)&&void 0!==t?t:c.endpointId)&&void 0!==n?n:this.latestEndpointIdByChannelId.get(r.channelId),h=this.endpointMap.get(d);if(!h)return s.payload.success=!1,s.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${d} no longer connected.`,this.wire.sendRaw(s);try{const e=await h(o,a,i);return s.payload.payload=s.payload.payload||{},s.payload.payload.result=e,this.wire.sendRaw(s)}catch(e){return s.payload.success=!1,s.payload.reason=e.message,this.wire.sendRaw(s)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){const t=this.latestEndpointIdByChannelId.get(e);t&&(i.default.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}t.MessageReceiver=o},1046:function(e,t){var n,i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicInfo=t.ClassicStrategy=void 0,t.ClassicStrategy=class{constructor(e,t,s,a){this.messageReceiver=t,this.endpointId=s,this.providerIdentity=a,n.set(this,void 0),i.set(this,new Map),this.send=async(e,t,r)=>{const s=o(this,i).get(e);if(!s)throw new Error(`Could not locate routing info for endpoint ${e}`);const a={...s};return a.isLocalEndpointId&&delete a.endpointId,delete a.isLocalEndpointId,(await o(this,n).sendAction("send-channel-message",{...a,providerIdentity:this.providerIdentity,action:t,payload:r}).catch((e=>{throw new Error(e.message)}))).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),r(this,i,new Map)},r(this,n,e)}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){o(this,i).delete(e)}isEndpointConnected(e){return o(this,i).has(e)}addEndpoint(e,t){o(this,i).set(e,t.endpointIdentity)}isValidEndpointPayload(e){var t,n;return"string"==typeof(null===(t=null==e?void 0:e.endpointIdentity)||void 0===t?void 0:t.endpointId)||"string"==typeof(null===(n=null==e?void 0:e.endpointIdentity)||void 0===n?void 0:n.channelId)}},n=new WeakMap,i=new WeakMap,t.ClassicInfo={version:5,minimumVersion:0,type:"classic"}},7113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.primary=e,this.secondary=t}static combine(e,t){return new n(e,t)}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,(()=>{this.secondary.isEndpointConnected(e)||t()})),this.secondary.onEndpointDisconnect(e,(()=>{this.primary.isEndpointConnected(e)||t()}))}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}t.default=n},3037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolManager=void 0,t.ProtocolManager=class{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultClientProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultProviderProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter((t=>e.some((e=>{var n;return e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(null!==(n=t.minimumVersion)&&void 0!==n?n:0)})))).slice(0,t.maxProtocols)}}},8776:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCEndpoint=void 0;const a=n(2366);t.RTCEndpoint=class{constructor(e,t){this.rtc=e,this.endpointIdentity=t,this.responseMap=new Map,i.set(this,null),r.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),o(this,r)&&o(this,r).call(this))},this.send=async(e,t)=>{const n=`message-${Math.random()}`,i=new Promise(((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})}));return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),i},this.close=()=>{this.responseMap.forEach((e=>e.reject("Connection has closed."))),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc.channels.response.addEventListener("message",(e=>{var t;const{messageId:n,payload:i,success:r,error:o}=JSON.parse(e.data),{resolve:s,reject:a}=null!==(t=this.responseMap.get(n))&&void 0!==t?t:{};s&&a?(this.responseMap.delete(n),r?s(i):a(o)):(console.log("Could not find id in responseMap."),console.log(e))})),this.rtc.channels.request.addEventListener("message",(async e=>{const{messageId:n,action:r,payload:s}=JSON.parse(e.data);if(o(this,i))try{const e=await o(this,i).call(this,r,s,t);this.rtc.channels.response.send(JSON.stringify({messageId:n,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,error:a.errorToPOJO(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,success:!1,error:"Connection not ready."}))})),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach((e=>{e.onclose=e=>{[...this.responseMap.values()].forEach((e=>e.reject(new Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB.")))),this.close(),o(this,r)&&o(this,r).call(this)}}))}onDisconnect(e){if(o(this,r))throw new Error("RTCEndpoint disconnectListener cannot be set twice.");s(this,r,e)}receive(e){if(o(this,i))throw new Error("You have already set a listener for this RTC Endpoint.");s(this,i,e)}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},i=new WeakMap,r=new WeakMap},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTCICEManager=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise(((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){const n=()=>{e.removeEventListener("open",n),t()};e.addEventListener("open",n)}else n(new Error("This Channel has already closed"))}))}static createDataChannelPromise(e,t){let n;const i=new Promise((e=>{n=e})),r=i=>{const o=()=>{i.channel.removeEventListener("open",o),n(i.channel)};i.channel.label===e&&(i.channel.addEventListener("open",o),t.removeEventListener("datachannel",r))};return t.addEventListener("datachannel",r),i}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){const e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseClientIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForProviderIce(e,(async e=>{await t.addIceCandidate(e.candidate)}));const n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},i=await t.createOffer();await t.setLocalDescription(i);const r=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then((()=>{}));return{rtcClient:t,channels:n,offer:i,rtcConnectionId:e,channelsOpened:r}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){const n=this.createRtcPeer(),i=r.createDataChannelPromise("request",n),o=r.createDataChannelPromise("response",n);n.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseProviderIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForClientIce(e,(async e=>{await n.addIceCandidate(e.candidate)})),await n.setRemoteDescription(t);const s=await n.createAnswer();await n.setLocalDescription(s);const a=Promise.all([i,o]).then((([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n})));return{rtcClient:n,answer:s,channels:a}}}t.RTCICEManager=r},3870:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCInfo=t.RTCStrategy=void 0;const c=n(8776);t.RTCStrategy=class{constructor(){i.set(this,null),r.set(this,new Map),o.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{s(this,o)&&(s(this,r).forEach((e=>e.close())),a(this,r,new Map)),a(this,o,!1)}}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(s(this,i))throw new Error("You have already set a listener for this RTC Strategy");a(this,i,e),s(this,r).forEach((e=>e.receive(s(this,i))))}getEndpointById(e){const t=s(this,r).get(e);if(!t)throw new Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return s(this,o)}isEndpointConnected(e){return s(this,r).has(e)}addEndpoint(e,t){if(!s(this,o))return void console.warn("Adding endpoint to disconnected RTC Strategy");const n=new c.RTCEndpoint(t.rtc,t.endpointIdentity);s(this,i)&&n.receive(s(this,i)),s(this,r).set(e,n)}async closeEndpoint(e){s(this,r).delete(e)}isValidEndpointPayload(e){const t=e=>"object"==typeof e&&null!==e;return t(e)&&t(e.endpointIdentity)&&t(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}},i=new WeakMap,r=new WeakMap,o=new WeakMap,t.RTCInfo={version:1,minimumVersion:0,type:"rtc"}},2942:function(e,t,n){var i=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelProvider=void 0;const o=n(7539),s=n(2300);let a=(()=>{var e,t,n,a,c;class d extends o.ChannelBase{constructor(h,l,u){super(),e.set(this,void 0),t.set(this,void 0),n.set(this,void 0),a.set(this,(t=>{const o=this.connections.filter((e=>e.endpointId!==t.endpointId));r(this,n).closeEndpoint(t.endpointId),i(this,e,o)})),this.processAction=async(e,t,n)=>(d.clientIsMultiRuntime(n)&&!s.runtimeUuidMeetsMinimumRuntimeVersion(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),c.set(this,(()=>{r(this,n).close();const e=d.removalMap.get(this);e&&e()})),i(this,t,new o.ProtectedItems(h,l)),this.connectListener=()=>{},this.disconnectListener=()=>{},i(this,e,[]),i(this,n,u),u.receive(this.processAction)}get connections(){return[...r(this,e)]}static handleClientDisconnection(e,t){const n=e.connections.find((e=>e.endpointId===t.endpointId));n?r(e,a).call(e,n):e.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name)).forEach(r(e,a)),e.disconnectListener(t)}static setProviderRemoval(e,t){d.removalMap.set(e,t)}dispatch(e,t,i){var o;const s=null!==(o=e.endpointId)&&void 0!==o?o:this.getEndpointIdForOpenFinId(e,t);return s&&r(this,n).isEndpointConnected(s)?r(this,n).send(s,t,i):Promise.reject(new Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${s} no longer connected.`))}async processConnection(t,n){return r(this,e).push(t),this.connectListener(t,n)}publish(e,t){return this.connections.map((i=>r(this,n).send(i.endpointId,e,t)))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){const n=r(this,t),{channelName:o}=n.providerIdentity;i(this,e,[]),await n.wire.sendAction("destroy-channel",{channelName:o}),r(this,c).call(this)}checkForClientConnection(e){if(!this.isClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider.\n                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return d.clientIdentityIncludesEndpointId(e)?this.connections.some((t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name)):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some((t=>t.uuid===e.uuid&&t.name===e.name))}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider. Client Identity:\n                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,n){var i;const o=this.connections.filter((t=>t.name===e.name&&t.uuid===e.uuid));if(o.length>=2){const i=r(this,t),{uuid:o,name:s}=e,a=null==i?void 0:i.providerIdentity.uuid,c=null==i?void 0:i.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the\n                "endpointId" parameter. The identity you are dispatching to ({uuid: ${o}, name: ${s}})\n                has multiple channelClients for this channel. Your dispatched action: (${n}) from the provider:\n                ({uuid: ${a}, name: ${c}}) will only be processed by the most recently-created client.`)}return null===(i=o.pop())||void 0===i?void 0:i.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}}return e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,c=new WeakMap,d.removalMap=new WeakMap,d})();t.ChannelProvider=a},8347:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterAppPayload=void 0;const i=n(6465),r=n(9659),o=n(3127),s=n(7722),a=n(4999);class c extends r.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new o.default,this.Channel=new s.Channel(e),this.emitter=new i.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}publish(e,t){return this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name}).then((()=>{}))}async send(e,t,n){const i=a.validateIdentity(e);if(i)throw new Error(i);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){const i=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(i,n),this.refCounter.actOnFirst(i,(()=>this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})),(()=>Promise.resolve()))}unsubscribe(e,t,n){const i=e.name||"*",r=this.createSubscriptionKey(e.uuid,i,t);return this.emitter.removeListener(r,n),this.refCounter.actOnLast(r,(()=>this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:i,topic:t,destinationWindowName:this.me.name})),(()=>new Promise((e=>e)).then((()=>{}))))}processMessage(e){const{payload:{message:t,sourceWindowName:n,sourceUuid:i,topic:r}}=e,o=[this.createSubscriptionKey(i,n,r),this.createSubscriptionKey(i,"*",r),this.createSubscriptionKey("*","*",r)],s={uuid:i,name:n};o.forEach((e=>{this.emitter.emit(e,t,s)}))}emitSubscriverEvent(e,t){const{payload:{targetName:n,uuid:i,topic:r}}=t,o={name:n,uuid:i,topic:r};this.emitter.emit(e,o)}createSubscriptionKey(e,t,n){const i=t||"*";if(!(e&&i&&n))throw new Error("Missing uuid, name, or topic string");return function(...e){return e.map((e=>Buffer.from(`${e}`).toString("base64"))).join("/")}(e,i,n)}onmessage(e){const{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}t.default=c,t.InterAppPayload=class{}},2977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2057),o=n(7138),s=(e,...t)=>new e(...t);class a extends i.Base{async init(e,t=s){this.wire.sendAction("interop-init").catch((e=>{}));const n=await this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`),i=await this.fin.Application.getCurrentSync().getInfo();return t(r.InteropBroker,this.wire,n,i.initialOptions.interopBrokerConfiguration||{})}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch((e=>{})),new o.InteropClient(this.wire,e,t)}}t.default=a},2057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InteropBroker=void 0;const i=n(9659),r=n(7115),o=n(1787);let s=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class a extends i.Base{constructor(e,t,n){super(e),this.channel=t,this.interopClients=new Map,this.contextGroupsById=new Map,n.contextGroups&&(s=n.contextGroups),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,this.setContextGroupMap(),this.wireChannel(t)}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch((e=>{}));const n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?new Error("You must join a context group before you can set context."):new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{const{contextGroupId:t}=n;if(!this.contextGroupsById.has(t))throw new Error(`Client has a context group that isn't in the context group mapping: ${t}.`);const i=a.checkContextIntegrity(e);if(!1===i.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${i.reason}. Context: ${JSON.stringify(e)}`);const r=this.contextGroupsById.get(t),o=e.type;r.set(o,e),this.lastContextMap.set(t,o),Array.from(this.interopClients.values()).filter((e=>e.contextGroupId===t)).forEach((t=>{for(const[,n]of t.contextHandlers)a.isContextTypeCompatible(o,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)}))}}getCurrentContext(e,t){var n;this.wire.sendAction("interop-broker-get-current-context").catch((e=>{}));const i=this.getClientState(t);if(!(null==i?void 0:i.contextGroupId))throw new Error("You must be a member of a context group to call getCurrentContext");const{contextGroupId:r}=i,o=this.contextGroupsById.get(r),s=this.lastContextMap.get(r),a=null!==(n=null==e?void 0:e.contextType)&&void 0!==n?n:s;return o&&a?o.get(a):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch((e=>{})),t){a.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);const n=this.channel.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name));if(!n.length)throw new Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);const i=[];for(const t of n)i.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(i)}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch((e=>{}));const n=this.getClientState(t);if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find((t=>t.id===e)))throw new Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await a.setCurrentContextGroupInClientOptions(t,e);const i=this.contextGroupsById.get(e);for(const[,e]of n.contextHandlers){const{contextType:n,handlerId:r}=e;if(void 0===n)i.forEach(((e,n)=>{this.invokeContextHandler(t,r,e)}));else if(i.has(n)){const e=i.get(n);e&&this.invokeContextHandler(t,r,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch((e=>{})),e){a.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);const t=this.channel.connections.filter((t=>t.uuid===e.uuid&&t.name===e.name));if(!t.length)throw new Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);const n=[];for(const e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch((e=>{}));const t=this.getClientState(e);t&&(t.contextGroupId=void 0),await a.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch((e=>{})),s.map((e=>({...e})))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch((e=>{})),this.getContextGroups().find((t=>t.id===e))}getAllClientsInContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch((e=>{})),Array.from(this.interopClients.values()).filter((t=>t.contextGroupId===e)).map((e=>e.clientIdentity))}async handleFiredIntent(e,t){const n=o.generateOverrideWarning("interopClient.fireIntent","fdc3.raiseIntent","InteropBroker.handleFiredIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch((e=>{}));const n=this.intentClientMap.get(t.name),i=`intent-handler-${e.name}`;if(n){const t=n.get(i);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){const{clientIdentity:e,pendingIntents:n}=t;try{const r=n[n.length-1];await this.channel.dispatch(e,i,r),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(i,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);const n=this.intentClientMap.get(t.name);n&&n.set(i,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntent","fdc3.findIntent","InteropBroker.handleInfoForIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntentsByContext","fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){const n=o.generateOverrideWarning("interopClient.fireIntentForContext","fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntentForContext)}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){var n;const i=null===(n=null==e?void 0:e.interopSnapshotDetails)||void 0===n?void 0:n.contextGroupStates;i&&((null==t?void 0:t.closeExistingWindows)||this.updateExistingClients(i),this.rehydrateContextGroupStates(i))}updateExistingClients(e){this.interopClients.forEach((t=>{const{clientIdentity:n,contextGroupId:i,contextHandlers:r}=t;if(i){const t=e[i];for(const[,e]of Object.entries(t))r.forEach((t=>{const{handlerId:i,contextType:r}=t;a.isContextTypeCompatible(e.type,r)&&this.invokeContextHandler(n,i,e)}))}}))}getContextGroupStates(){return a.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){const t=Object.entries(e);for(const[e,n]of t){const t=Object.entries(n);for(const[n,i]of t)this.contextGroupsById.has(e)?this.contextGroupsById.get(e).set(n,i):console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${e}`)}}contextHandlerRegistered({contextType:e,handlerId:t},n){const i={contextType:e,handlerId:t},r=this.getClientState(n);if(null==r||r.contextHandlers.set(t,i),r&&r.contextGroupId){const{contextGroupId:i}=r,o=this.contextGroupsById.get(i);if(void 0===e)o.forEach(((e,i)=>{this.invokeContextHandler(n,t,e)}));else if(o.has(e)){const i=o.get(e);i&&this.invokeContextHandler(n,t,i)}}}async intentHandlerRegistered(e,t){const{handlerId:n}=e,i=this.intentClientMap.get(t.name),r=null==i?void 0:i.get(n);if(i)if(r){const{pendingIntents:e}=r;r.clientIdentity=t,r.isReady=!0;try{if(e.length>0){const i=e[e.length-1];await this.channel.dispatch(t,n,i),r.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else i.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);const e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}invokeContextHandler(e,t,n){this.channel.dispatch(e,t,n).catch((i=>{console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,i)}))}removeContextHandler({handlerId:e},t){const n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw new Error("Failed to join session context group: must specify group id.");const n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{const n=new r.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw new Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){const t=Object.fromEntries(e),n={};return Object.entries(t).forEach((([e,t])=>{const i=Object.fromEntries(t);n[e]=i})),n}static checkContextIntegrity(e){if(!e)return{isValid:!1,reason:"No context supplied"};if("object"!=typeof e)return{isValid:!1,reason:"Context must be an Object"};if(!e.type)return{isValid:!1,reason:"Context must have a type property"};if(e.id&&"object"!=typeof e.id)return{isValid:!1,reason:"Context id must be an Object populated with key-value identifiers (if set)"};if(e.id){const{id:t}=e,n=Object.keys(t);let i=!1;if(!n.length)return{isValid:!1,reason:"Context id must have at least one key-value identifier"};if(n.forEach((e=>{"string"==typeof e&&"string"==typeof t[e]||(i=!0)})),i)return{isValid:!1,reason:"Context id key-value identifiers must be of type string"}}return e.name&&"string"!=typeof e.name?{isValid:!1,reason:"Context name must be of string type (if set)"}:{isValid:!0}}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(const e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}static async setCurrentContextGroupInClientOptions(e,t){const n=await fin.System.getEntityInfo(e.uuid,e.name);let i;"view"===n.entityType?i=await fin.View.wrap(e):"window"===n.entityType&&(i=await fin.Window.wrap(e)),i?await i.updateOptions({interop:{currentContextGroup:t}}):console.warn(`Setting Current Context Group: Entity with identity ${e.uuid}, ${e.name} is not a window or view. It is a ${n.entityType} instead.`)}wireChannel(e){e.onConnection(((e,t)=>{if(!this.isConnectionAuthorized(e,t))throw new Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw new Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");const n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};(null==t?void 0:t.currentContextGroup)&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=null==t?void 0:t.currentContextGroup),this.interopClients.set(e.endpointId,n)})),e.onDisconnection((e=>{this.interopClients.delete(e.endpointId);const t=this.intentClientMap.get(e.name);t&&e.uuid===fin.me.identity.uuid&&t.forEach((e=>{e.isReady=!1})),this.sessionContextGroupMap.forEach((t=>{t.onDisconnection(e)}))})),e.beforeAction(((e,t,n)=>{if(!this.isActionAuthorized(e,t,n))throw new Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);console.log(e,t,n)})),e.afterAction(console.log),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this))}async isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch((e=>{})),!0}async isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch((e=>{})),!0}}t.InteropBroker=a},7138:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropClient=void 0;const a=n(9659),c=n(822),d=n(1787);class h extends a.Base{constructor(e,t,n){super(e),i.set(this,void 0),r.set(this,void 0),o(this,r,new Map),o(this,i,this.wire.environment.whenReady().then((()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${t}`,{payload:n}))))}async setContext(e){return this.wire.sendAction("interop-client-set-context").catch((e=>{})),(await s(this,i)).dispatch("setContext",{context:e})}async addContextHandler(e,t){this.wire.sendAction("interop-client-add-context-handler").catch((e=>{}));const n=await s(this,i);let r;t?(r=`invokeContextHandler-${t}-${d.generateId()}`,console.warn(`Warning: By providing a contextType (${t}), you are using the experimental addContextHandler. To avoid issues, make sure you are adding your context handlers at the top level in your application.`)):r="invokeContextHandler";const o=d.wrapContextHandler(e,r);return n.register(r,o),await n.dispatch("contextHandlerRegistered",{handlerId:r,contextType:t}),{unsubscribe:async()=>{n.remove(r),await n.dispatch("removeContextHandler",{handlerId:r})}}}async getContextGroups(){return this.wire.sendAction("interop-client-get-context-groups").catch((e=>{})),(await s(this,i)).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch((e=>{}));const n=await s(this,i);if(!e)throw new Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){return this.wire.sendAction("interop-client-remove-from-context-group").catch((e=>{})),(await s(this,i)).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){return this.wire.sendAction("interop-client-fire-intent").catch((e=>{})),(await s(this,i)).dispatch("fireIntent",e)}async registerIntentHandler(e,t){this.wire.sendAction("interop-client-register-intent-handler").catch((e=>{}));const n=await s(this,i),r=`intent-handler-${t}`,o=this.wrapIntentHandler(e,r);try{await n.register(r,o),await n.dispatch("intentHandlerRegistered",{handlerId:r})}catch(e){throw new Error("Unable to register intent handler")}return{unsubscribe:async()=>{n.remove(r)}}}async getCurrentContext(e){return this.wire.sendAction("interop-client-get-current-context").catch((e=>{})),(await s(this,i)).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){return this.wire.sendAction("interop-client-get-info-for-intent").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){return this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){return this.wire.sendAction("interop-client-fire-intent-for-context").catch((e=>{})),(await s(this,i)).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{const t=s(this,r).get(e);if(t)return t.getUserInstance();const n=await s(this,i),{hasConflict:o}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});o&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);const a=new c.default(this.wire,s(this,i),e);return s(this,r).set(e,a),a.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}wrapIntentHandler(e,t){return async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}}}}t.InteropClient=h,i=new WeakMap,r=new WeakMap},7115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(8706);t.default=class{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){const{context:n}=e,r=i.InteropBroker.checkContextIntegrity(n);if(!1===r.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach((e=>{var t;null===(t=e.contextHandlers.get(n.type))||void 0===t||t.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getClientState(e){return this.clients.get(e.endpointId)}handlerAdded(e,t){const{handlerId:n,contextType:i}=e,r=this.getClientState(t);if(!r)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(i){const e=r.contextHandlers.get(i)||[];r.contextHandlers.set(i,[...e,n]);const o=this.contextGroupMap.get(i);o&&this.provider.dispatch(t,n,o)}else r.globalHandler=n,[...this.contextGroupMap.keys()].forEach((e=>{const i=this.contextGroupMap.get(e);i&&this.provider.dispatch(t,n,i)}))}handlerRemoved(e,t){const{handlerId:n}=e,i=this.clients.get(t.endpointId);i?(Array.from(i.contextHandlers).forEach((([,e])=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)})),i.globalHandler===n&&(i.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}}},822:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(9659),a=n(1787);class c extends s.Base{constructor(e,t,n){super(e),i.set(this,void 0),this.id=n,r(this,i,t)}async setContext(e){return this.wire.sendAction("interop-session-context-group-set-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){return this.wire.sendAction("interop-session-context-group-get-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){this.wire.sendAction("interop-session-context-group-add-handler").catch((e=>{}));const n=await o(this,i);let r;return r=t?`sessionContextHandler:invoke-${this.id}-${t}-${a.generateId()}`:`sessionContextHandler:invoke-${this.id}`,n.register(r,a.wrapContextHandler(e,r)),n.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:r,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(r)}}async createUnsubscribeCb(e){const t=await o(this,i);return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:a.wrapInTryCatch(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:a.wrapInTryCatch(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:a.wrapInTryCatch(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}t.default=c,i=new WeakMap},8706:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2977);t.default=o.default,r(n(7138),t),r(n(2057),t)},1787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BROKER_ERRORS=t.generateOverrideWarning=t.generateOverrideError=t.wrapContextHandler=t.wrapInTryCatch=t.generateId=void 0,t.generateId=()=>`${Math.random()}${Date.now()}`,t.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw new Error((t||"")+e)}},t.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}},t.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`,t.generateOverrideWarning=(e,t,n,i)=>{const{uuid:r,name:o}=i;return`Entity with identity: ${r}/${o} has called ${e} or ${t} but ${n} has not been overridden.`},t.BROKER_ERRORS={fireIntent:t.generateOverrideError("fireIntent","handleFiredIntent"),fireIntentForContext:t.generateOverrideError("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:t.generateOverrideError("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:t.generateOverrideError("getInfoForIntentsByContext","handleInfoForIntentsByContext")}},9641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.getBaseMe=void 0;const i=n(4169),r=n(6720),o=n(4997);function s(e,t,n){return{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e,uuid:t,name:n,entityType:e}}t.getBaseMe=s,t.getMe=function(e){const{uuid:t,name:n,entityType:a}=e.me,c={setContext(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},addContextHandler(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getContextGroups(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},joinContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},removeFromContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getAllClientsInContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getInfoForContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")}};switch(a){case"view":return Object.assign(new i.View(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"window":return Object.assign(new o._Window(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"iframe":return Object.assign(new r._Frame(e,{uuid:t,name:n}),s(a,t,n),{interop:c});default:return{...s(a,t,n)}}}},7283:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(6394),o=n(9872);class s extends i.Base{constructor(e,t){super(e),this._channel=t,this._initializer=(...e)=>this.wire.environment.getProviderInitializer().then((t=>t(this.wire.environment)(...e))),this.Layout=new r.LayoutModule(this.wire)}async init(e){const t=null==e?void 0:e.overrideCallback,n=await this.fin.Interop.init(this.fin.me.uuid,null==e?void 0:e.interopOverride);return window.interopBroker=n,this._initializer(t,n)}async wrap(e){return this.wire.sendAction("platform-wrap").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}async getCurrent(){return this.wire.sendAction("platform-get-current").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch((e=>{})),new Promise((async(t,n)=>{try{const{uuid:n}=e,i=await this.fin.Application._create({...e,isPlatformController:!0});i.once("platform-api-ready",(()=>t(this.wrapSync({uuid:n})))),i._run({uuid:n})}catch(e){n(e)}}))}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch((e=>{})),new Promise((async(n,i)=>{try{const i=await this.fin.Application._createFromManifest(e);i.once("platform-api-ready",(()=>n(this.wrapSync({uuid:i.identity.uuid})))),i._run(t)}catch(e){i(e)}}))}}t.default=s},9872:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const o=n(9659),s=n(4999),a=new Map;class c extends o.EmitterBase{constructor(e,t){super(t.wire,"application",e.uuid),this.getClient=e=>{this.wire.sendAction("platform-get-client",this.identity).catch((e=>{}));const t=e||this.identity,{uuid:n}=t;if(!a.has(n)){const e=r(this,i).call(this,n);a.set(n,e)}return a.get(n)},i.set(this,(async e=>{try{const t=`custom-frame-${e}`,n=await this._channel.connect(t,{wait:!1});return n.onDisconnection((()=>{a.delete(e)})),n}catch(t){throw a.delete(e),new Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}})),this.launchLegacyManifest=this.launchContentManifest;const n=s.validateIdentity(e);if(n)throw new Error(n);this._channel=t,this.identity={uuid:e.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch((e=>{}));const i=await this.getClient(),r=await i.dispatch("create-view",{target:t,opts:e,targetView:n});if(!r||s.validateIdentity(r.identity))throw new Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(r)}`);return this.fin.View.wrapSync(r.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch((e=>{}));const t=await this.getClient();e.reason||(e.reason="api-call");const n=await t.dispatch("create-view-container",e);if(!n||s.validateIdentity(n.identity))throw new Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);const{identity:i}=n,r=this.fin.Window.wrapSync(i);return r.name=i.name,r.uuid=i.uuid,r}async quit(){return this.wire.sendAction("platform-quit",this.identity).catch((e=>{})),(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch((e=>{}));const t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){var n;console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch((e=>{}));const i={...e,uuid:null!==(n=e.uuid)&&void 0!==n?n:this.identity.uuid},r=await this.fin.View.wrap(i),o=await r.getOptions();return this.createView(o,t)}async getSnapshot(){return this.wire.sendAction("platform-get-snapshot",this.identity).catch((e=>{})),(await this.getClient()).dispatch("get-snapshot")}async applySnapshot(e,t){this.wire.sendAction("platform-apply-snapshot",this.identity).catch((e=>{}));const n="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";let i;if("string"==typeof e)try{i=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw new Error(`${n}: ${e}`)}else i=e;if(!i.windows)throw new Error(n);const r=await this.getClient();return await r.dispatch("apply-snapshot",{snapshot:i,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch((e=>{}));const t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch((e=>{})),!e)throw new Error("Please provide a serializable object or string to set the context.");const n=await this.getClient(),{entityType:i}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:i,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch((e=>{}));const t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}}t.Platform=c,i=new WeakMap},4386:(e,t)=>{function n(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPresetType=void 0,t.isValidPresetType=n,t.default={isValidPresetType:n}},609:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7283);t.default=o.default,r(n(9872),t)},4210:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0;const s=n(8111),a=n(9659);class c extends a.Base{constructor(){super(...arguments),i.set(this,void 0),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch((e=>{})),!this.fin.me.isWindow)throw new Error("Layout.init can only be called from a Window context.");if(r(this,i))throw new Error("Layout for this window already initialized, please use Layout.replace call to replace the layout.");const t=await this.wire.environment.getManagerConstructor();o(this,i,new t);let{layout:n,containerId:s}=e;n&&console.warn("We recommend using a layout in window options.\n                This layout has not been sanitized and unexpected behavior can occur."),n=n||(await this.fin.Window.getCurrentSync().getOptions()).layout,s=s||"layout-container";const a=document.getElementById(s);return await r(this,i).initManager(),await r(this,i).createLayout(n,a),Object.assign(this.getCurrentSync(),{layoutManager:r(this,i)})}}async wrap(e){return this.wire.sendAction("layout-wrap").catch((e=>{})),new s.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch((e=>{})),new s.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}}t.LayoutModule=c,i=new WeakMap},8111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;const i=n(4999),r=n(4386),o=n(9659);class s extends o.Base{constructor(e,t){super(t),this.replace=async e=>{this.wire.sendAction("layout-replace").catch((e=>{}));const t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch((e=>{}));const n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch((e=>{}));const t=await this.platform.getClient(),{presetType:n}=e;if(!n||!r.isValidPresetType(n))throw new Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};const n=i.validateIdentity(e);if(n)throw new Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){return this.wire.sendAction("layout-get-config").catch((e=>{})),(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}}t.Layout=s},6394:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4210),t),r(n(8111),t)},1746:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2878),o=n(6215);class s extends i.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch((e=>{})),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw new Error("you must pass in a valid SnapshotProvider");const t=await this.fin.InterApplicationBus.Channel.create(o.getSnapshotSourceChannelName(fin.me.identity));t.register("get-snapshot",(async()=>({snapshot:await e.getSnapshot()}))),t.register("apply-snapshot",(({snapshot:t})=>e.applySnapshot(t)))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch((e=>{})),new r.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch((e=>{})),this.wrapSync(e)}}t.default=s},2878:function(e,t,n){var i,r,o,s,a,c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSource=void 0;const h=n(9659),l=n(6215),u=new Map;class p extends h.Base{constructor(e,t){super(e),i.set(this,void 0),r.set(this,(()=>(u.has(this.identity.uuid)||u.set(this.identity.uuid,{eventFired:null,clientPromise:null}),u.get(this.identity.uuid)))),o.set(this,(()=>(d(this,r).call(this).clientPromise||(d(this,r).call(this).clientPromise=d(this,s).call(this)),d(this,r).call(this).clientPromise))),s.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);try{d(this,r).call(this).eventFired||await d(this,a).call(this);const t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection((()=>{d(this,r).call(this).clientPromise=null,d(this,r).call(this).eventFired=null})),t}catch(e){throw d(this,r).call(this).clientPromise=null,new Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}})),a.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);let t,n;const i=new Promise(((e,i)=>{t=e,n=i}));d(this,r).call(this).eventFired=i;const o=async i=>{try{i.channelName===e&&(t(),await this.fin.InterApplicationBus.Channel.removeListener("connected",o))}catch(e){n(e)}};await this.fin.InterApplicationBus.Channel.on("connected",o)})),c(this,i,t)}get identity(){return d(this,i)}async ready(){this.wire.sendAction("snapshot-source-ready").catch((e=>{}));try{await d(this,o).call(this)}catch(e){await d(this,r).call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch((e=>{}));const e=await d(this,o).call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){return this.wire.sendAction("snapshot-source-apply-snapshot").catch((e=>{})),(await d(this,o).call(this)).dispatch("apply-snapshot",{snapshot:e})}}t.SnapshotSource=p,i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap},7153:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1746);t.default=o.default,r(n(2878),t)},6215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSnapshotSourceChannelName=void 0,t.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`},3641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(5007),o=n(4997);class s extends i.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise(((n,i)=>{const r="external-process-exited";let s,a,c,d;"function"==typeof t.listener&&(c=e=>{const n=e||{};a={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},s===e.processUuid&&(t.listener(a),d.removeListener(r,c))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),d=new o._Window(this.wire,this.wire.me),d.on(r,c)),this.wire.sendAction(e,t).then((({payload:e})=>{s=e.data.uuid,n(e.data),a&&s===a.uuid&&(t.listener(a),d.removeListener(r,c))})).catch((e=>{d&&d.removeListener(r,c),i(e)}))}))}getVersion(){return this.wire.sendAction("get-version").then((({payload:e})=>e.data))}clearCache(e){return this.wire.sendAction("clear-cache",e).then((()=>{}))}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then((()=>{}))}exit(){return this.wire.sendAction("exit-desktop").then((()=>{}))}async fetchManifest(e){const{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then((()=>{}))}getAllWindows(){return this.wire.sendAction("get-all-windows").then((({payload:e})=>e.data))}getAllApplications(){return this.wire.sendAction("get-all-applications").then((({payload:e})=>e.data))}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then((({payload:e})=>e.data))}async getCrashReporterState(){const{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){const t=e,n={...t,diagnosticMode:t.diagnosticsMode||t.diagnosticMode},{payload:{data:{diagnosticMode:i,isRunning:r}}}=await this.wire.sendAction("start-crash-reporter",n);return{diagnosticMode:i,diagnosticsMode:i,isRunning:r}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then((({payload:e})=>e.data))}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then((({payload:e})=>e.data))}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then((({payload:e})=>e.data))}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then((({payload:e})=>e.data))}async isAppCertified(e){const{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then((({payload:e})=>e.data.runtimes))}async getInstalledApps(){const{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then((({payload:e})=>e.data))}getMachineId(){return this.wire.sendAction("get-machine-id").then((({payload:e})=>e.data))}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then((({payload:e})=>e.data))}getLogList(){return this.wire.sendAction("list-logs").then((({payload:e})=>e.data))}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then((({payload:e})=>e.data))}getMousePosition(){return this.wire.sendAction("get-mouse-position").then((({payload:e})=>e.data))}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then((({payload:e})=>e.data))}async getAllProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then((({payload:e})=>e.data))}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then((({payload:e})=>e.data))}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then((({payload:e})=>e.data))}getHostSpecs(){return this.wire.sendAction("get-host-specs").then((({payload:e})=>e.data))}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then((()=>{}))}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then((()=>{}))}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then((()=>{}))}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then((()=>{}))}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then((()=>{}))}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then((()=>{}))}downloadAsset(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadAsset only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`asset-download-progress-${o}`,a=`asset-download-error-${o}`,c=`asset-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-asset",l).catch((e=>{h(),i(e)}))}))}downloadRuntime(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`runtime-download-progress-${o}`,a=`runtime-download-error-${o}`,c=`runtime-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-runtime",l).catch((e=>{h(),i(e)}))}))}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then((({payload:e})=>e.data))}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then((({payload:e})=>e.data))}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then((({payload:e})=>e.data))}getCookies(e){const t=this.wire.environment.getUrl(),n=Object.assign(e,{url:t});return this.wire.sendAction("get-cookies",n).then((({payload:e})=>e.data))}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then((()=>{}))}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then((({payload:e})=>e.data))}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then((({payload:e})=>e.data))}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then((({payload:e})=>e.data))}async getServiceConfiguration(e){if("string"!=typeof e.name)throw new Error("Must provide an object with a `name` property having a string value");const{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then((({payload:e})=>e.data))}async getSystemAppConfig(e){if("string"!=typeof e)throw new Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then((({payload:e})=>e.data))}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then((({payload:e})=>e.data))}async launchManifest(e,t){return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:t})).payload.data.manifest}async queryPermissionForCurrentContext(e){const t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){const{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}}t.default=s},240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4169);class s extends i.Base{async create(e){const{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw new Error("Please provide a name property as a string in order to create a View.");return this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap");const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},3163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(4636),r=n(4997);class o extends i.WebContents{constructor(e,t){super(e,t,"view"),this.identity=t,this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout",{...this.identity}).catch((e=>{})),(await this.getCurrentWindow()).getLayout()),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then((({payload:e})=>e.data)),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then((()=>{})),this.getCurrentWindow=async()=>{const{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new r._Window(this.wire,e)}}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){const t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}t.View=o},4169:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(240);t.default=o.default,r(n(3163),t)},4636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebContents=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then((({payload:e})=>e.data))}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then((({payload:e})=>e.data))}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then((({payload:e})=>e.data))}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then((()=>{}))}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then((()=>{}))}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then((()=>{}))}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then((()=>{}))}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then((()=>{}))}print(e){return this.wire.sendAction("print",{...this.identity,options:e}).then((()=>{}))}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then((({payload:e})=>e.data))}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then((()=>{}))}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then((({payload:e})=>e.data))}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then((({payload:e})=>e.data))}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}}t.WebContents=r},2163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(5047);class s extends i.Base{async wrap(e){this.wire.sendAction("window-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}create(e){return this.wire.sendAction("create-window").catch((e=>{})),new o._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},5047:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Window=void 0;const i=n(7264),r=n(4636),o=n(4169);class s extends r.WebContents{constructor(e,t){super(e,t,"window"),this.identity=t}createWindow(e){return this.wire.sendAction("window-create-window",this.identity).catch((e=>{})),new Promise(((t,n)=>{const i="fire-constructor-callback",r=new Promise((e=>{this.on(i,(function t(n){let r;const{success:o}=n,s=n.data,{message:a}=s;r=o?{httpResponseCode:s.httpResponseCode,apiInjected:s.apiInjected}:{message:s.message,networkErrorCode:s.networkErrorCode,stack:s.stack},this.removeListener(i,t),e({message:a,cbPayload:r,success:o})}))}));void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0);const o=this.wire.environment.createChildContent({entityType:"window",options:e});Promise.all([r,o]).then((e=>{const i=e[0];i.success?t(this):n(i);try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}})).catch(n)}))}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then((({payload:e})=>e.data))}getBounds(){return this.wire.sendAction("get-window-bounds",this.identity).then((({payload:e})=>e.data))}center(){return this.wire.sendAction("center-window",this.identity).then((()=>{}))}blur(){return this.wire.sendAction("blur-window",this.identity).then((()=>{}))}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then((()=>{}))}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then((()=>{}))}hide(){return this.wire.sendAction("hide-window",this.identity).then((()=>{}))}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then((()=>{Object.setPrototypeOf(this,null)}))}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then((()=>{}))}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then((({payload:e})=>e.data))}async getCurrentViews(){const{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}flash(){return this.wire.sendAction("flash-window",this.identity).then((()=>{}))}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then((({payload:e})=>e.data))}async getLayout(){if(this.wire.sendAction("window-get-layout",this.identity).catch((e=>{})),!(await this.getOptions()).layout)throw new Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then((({payload:e})=>e.data))}getParentApplication(){return this.wire.sendAction("window-get-parent-application",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity)).then((e=>e.getWindow()))}async getSnapshot(e){const t={area:e,...this.identity};return console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage"),(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then((({payload:e})=>e.data))}getWebWindow(){return this.wire.sendAction("window-get-web-window",this.identity).catch((e=>{})),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window",this.identity).catch((e=>{})),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then((({payload:e})=>e.data))}maximize(){return this.wire.sendAction("maximize-window",this.identity).then((()=>{}))}minimize(){return this.wire.sendAction("minimize-window",this.identity).then((()=>{}))}moveBy(e,t){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,...this.identity}).then((()=>{}))}moveTo(e,t){return this.wire.sendAction("move-window",{left:e,top:t,...this.identity}).then((()=>{}))}resizeBy(e,t,n){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}resizeTo(e,t,n){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}restore(){return this.wire.sendAction("restore-window",this.identity).then((()=>{}))}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then((()=>{}))}setBounds(e){return this.wire.sendAction("set-window-bounds",{...e,...this.identity}).then((()=>{}))}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then((()=>{}))}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then((()=>{}))}updateOptions(e){return this.wire.sendAction("update-window-options",{options:e,...this.identity}).then((()=>{}))}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then((()=>{}))}async showPopupMenu(e){const{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then((()=>{}))}}t._Window=s},4997:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2163);t.default=o.default,r(n(5047),t)},1681:(e,t,n)=>{var i;t.H=void 0;const r=n(6465),o=n(6545),s=n(9298);class a extends r.EventEmitter{connect(e){throw new Error("You are not running in OpenFin.")}connectSync(){throw new Error("You are not running in OpenFin.")}send(e){throw new Error("You are not running in OpenFin.")}shutdown(){throw new Error("You are not running in OpenFin.")}constructor(){super()}}class c{constructor(){this.childViews=!0}getDefaultChannelOptions(){throw new Error("Method not implemented.")}getRtcPeer(){throw new Error("Method not implemented.")}getManagerConstructor(){throw new Error("Method not implemented.")}getProviderInitializer(){throw new Error("Method not implemented.")}writeToken(e,t){throw new Error("Method not implemented.")}retrievePort(e){throw new Error("Method not implemented.")}getNextMessageId(){throw new Error("Method not implemented.")}getRandomId(){throw new Error("Method not implemented.")}createChildContent(e){throw new Error("Method not implemented.")}getWebWindow(e){throw new Error("Method not implemented.")}getCurrentEntityIdentity(){throw new Error("Method not implemented.")}getCurrentEntityType(){return"unknown"}raiseEvent(e,t){throw new Error("Method not implemented.")}getUrl(){throw new Error("Method not implemented.")}whenReady(){throw new Error("Method not implemented.")}}t.H="undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.fin)||(()=>{const e=new c,t=new s.default(a,e,{uuid:"",name:""});return new o.default(t)})()},8068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFin=t.registerFin=void 0;const n=new WeakMap;t.registerFin=function(e,t){n.set(e,t)},t.getFin=function(e){const t=n.get(e);if(!t)throw new Error("Could not locate fin api for given transport");return t}},5007:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.NotSupportedError=t.NotImplementedError=t.NoAckError=t.DuplicateCorrelationError=t.UnexpectedActionError=t.DisconnectedError=void 0;class n extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}t.DisconnectedError=n;class i extends Error{}t.UnexpectedActionError=i;class r extends Error{}t.DuplicateCorrelationError=r;class o extends Error{}t.NoAckError=o;class s extends Error{}t.NotImplementedError=s;class a extends Error{}t.NotSupportedError=a;class c extends Error{constructor(e){const t=e.payload||e,{reason:n,error:i}=t;super(n),this.name="RuntimeError",(null==i?void 0:i.stack)&&(this.stack=i.stack)}}t.RuntimeError=c},9298:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(6465),a=n(8624),c=n(5007),d=n(2734),h=n(9641);class l extends s.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new d.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],i.set(this,void 0),this.connectSync=()=>{o(this,i).connectSync()},this.getPort=()=>{if("NodeEnvironment"!==this.environment.constructor.name)throw new c.NotImplementedError("Not Implemented");return o(this,i).wire.url.split(":").slice(-1)[0]},r(this,i,new e(this.onmessage.bind(this))),this.environment=t,this.sendRaw=o(this,i).send.bind(o(this,i)),this.registerMessageHandler(this.handleMessage.bind(this)),o(this,i).on("disconnected",(()=>{for(const[,{reject:e}]of this.wireListeners)e("Remote connection has closed");this.wireListeners.clear(),this.emit("disconnected")}));const{uuid:s,name:a}=n,l=this.environment.getCurrentEntityType();this.me=h.getBaseMe(l,s,a)}shutdown(){return o(this,i).shutdown()}async connect(e){if(a.isExistingConnectConfig(e))return this.connectByPort(e);if(a.isNewConnectConfig(e)){const t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectByPort(e){const{address:t,uuid:n}=e,r={...e,type:"file-token"},s=o(this,i);await s.connect(t);const a=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==a.action)throw new c.UnexpectedActionError(a.action);const{token:d}=a.payload;await this.environment.writeToken(a.payload.file,a.payload.token);const h=await this.sendAction("request-authorization",r,!0);if("authorization-response"!==h.action)throw new c.UnexpectedActionError(h.action);if(!0!==h.payload.success)throw new c.RuntimeError(h.payload);return d}sendAction(e,t={},n=!1){return new Promise(((r,s)=>{const a=this.environment.getNextMessageId(),c={action:e,payload:t,messageId:a},d=o(this,i);return this.addWireListener(a,r,s,n),d.send(c).catch(s)}))}ferryAction(e){return new Promise(((t,n)=>{const r=this.environment.getNextMessageId();e.messageId=r;const s=e=>{t(e.payload)};return o(this,i).send(e).then((()=>this.addWireListener(r,s,n,!1))).catch(n)}))}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,i){i?this.uncorrelatedListener=t:this.wireListeners.has(e)?n(new c.DuplicateCorrelationError(String(e))):this.wireListeners.set(e,{resolve:t,reject:n})}onmessage(e){for(const t of this.messageHandlers)t.call(null,e)}handleMessage(e){const t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{const{resolve:n,reject:i}=this.wireListeners.get(t);"ack"!==e.action?i(new c.NoAckError(e.action)):"payload"in e?e.payload.success?n.call(null,e):i(new c.RuntimeError(e.payload)):i(new c.RuntimeError(e)),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}i=new WeakMap,t.default=l},8624:(e,t)=>{function n(e){return"string"==typeof e.manifestUrl}function i(e){return r(e)&&"string"==typeof e.address}function r(e){return"string"==typeof e.uuid}function o(e){return e.runtime&&"string"==typeof e.runtime.version}function s(e){return r(e)&&o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalConnectConfig=t.isPortDiscoveryConfig=t.isNewConnectConfig=t.isExistingConnectConfig=t.isExternalConfig=void 0,t.isExternalConfig=n,t.isExistingConnectConfig=i,t.isNewConnectConfig=s,t.isPortDiscoveryConfig=function(e){return n(e)&&o(e)||s(e)},t.isInternalConnectConfig=function(e){return i(e)||s(e)}},2366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPOJO=void 0,t.errorToPOJO=function(e){return{stack:e.stack,message:e.message,toString:e.toString}}},3917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustiveCheck=void 0,t.exhaustiveCheck=function(e,t){throw new Error(`Unsupported value: ${e}${t?`\n Supported values are: ${t.join("")}`:""}`)}},3442:(e,t)=>{async function n(e){const t=[];for(const n of e){const e=await n();t.push(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMapSerial=t.serial=t.promiseMap=t.promisify=void 0,t.promisify=function(e){return(...t)=>new Promise(((n,i)=>{e(...t,((e,t)=>e?i(e):n(t)))}))},t.promiseMap=async function(e,t){return Promise.all(e.map(t))},t.serial=n,t.promiseMapSerial=async function(e,t){return n(e.map(((e,n,i)=>()=>t(e,n,i))))}},3127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.topicRefMap=new Map}incRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t+1;n=i,this.topicRefMap.set(e,i)}else this.topicRefMap.set(e,1),n=1;return n}decRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t-1;this.topicRefMap.set(e,i),n=i}else n=-1;return n}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}}},2300:(e,t)=>{function n(e){return[...e.split(".").reverse().entries()].reduce(((e,[t,n])=>e+ +n*1e4**t),0)}function i(e,t){return n(e)>=n(t)}function r(e){return e.split("/")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeUuidMeetsMinimumRuntimeVersion=t.parseRuntimeUuid=t.meetsMinimumRuntimeVersion=void 0,t.meetsMinimumRuntimeVersion=i,t.parseRuntimeUuid=r,t.runtimeUuidMeetsMinimumRuntimeVersion=function(e,t){return i(r(e),t)}},4999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateIdentity=void 0,t.validateIdentity=function(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t}},6465:e=>{var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,d;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(e))>0&&s.length>r&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,d=h,console&&console.warn&&console.warn(d)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function u(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):w(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var d=c.length,h=w(c,d);for(n=0;n<d;++n)i(h[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{n.d(i,{dq:()=>a,MS:()=>s,xQ:()=>c,sO:()=>fe,Zu:()=>ge,I3:()=>me,$U:()=>ve,i0:()=>Ce,cX:()=>d,_W:()=>h,U$:()=>w,U7:()=>y,rd:()=>pe});var e,t,r,o=n(1681);class s extends Error{constructor(e="An unexpected error has occurred",t){var n;super(e),t&&(this.innerError=t&&t),this.stack=null===(n=this.stack)||void 0===n?void 0:n.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class a extends s{constructor(e="Failed to execute adapter function",t){super(e,t)}}class c extends s{constructor(e="Failed to raise event",t){super(e,t)}}class d extends s{constructor(e="Failed to initialize adapter",t){super(e,t)}}class h extends s{constructor(e="Invalid parameter value",t){super(e,t)}}!function(e){e.ActivateWorkbook="ActivateWorkbook",e.ActivateWorksheet="ActivateWorksheet",e.AddWorksheet="AddWorksheet",e.CalculateWorkbook="CalculateWorkbook",e.CalculateWorksheet="CalculateWorksheet",e.ClearAllCells="ClearAllCells",e.ClearAllCellValues="ClearAllCellValues",e.ClearAllCellFormatting="ClearAllCellFormatting",e.ClearCellValues="ClearCellValues",e.ClearCellFormatting="ClearCellFormatting",e.ClearCells="ClearCells",e.CloseWorkbook="CloseWorkbook",e.CreateWorkbook="CreateWorkbook",e.DeleteWorksheet="DeleteWorksheet",e.DeregisterEvent="DeregisterEvent",e.EventFired="EventFired",e.GetCalculationMode="GetCalculationMode",e.GetCells="GetCells",e.GetWorkbookById="GetWorkbookById",e.GetWorkbookName="GetWorkbookName",e.GetWorkbooks="GetWorkbooks",e.GetWorksheetById="GetWorksheetById",e.GetWorksheetByName="GetWorksheetByName",e.GetWorksheetName="GetWorksheetName",e.GetWorksheets="GetWorksheets",e.LogMessage="LogMessage",e.OpenWorkbook="OpenWorkbook",e.ProtectWorksheet="ProtectWorksheet",e.RegisterEvent="RegisterEvent",e.SaveWorkbook="SaveWorkbook",e.SaveWorkbookAs="SaveWorkbookAs",e.SetCellValues="SetCellValues",e.SetCellFormatting="SetCellFormatting",e.SetCellName="SetCellName",e.SetWorksheetName="SetWorksheetName",e.FilterCells="FilterCells",e.QuitApplication="QuitApplication"}(e||(e={})),function(e){e.Activate="Activate",e.AddWorksheet="AddWorksheet",e.Change="Change",e.Close="Close",e.Deactivate="Deactivate",e.DeleteWorksheet="DeleteWorksheet"}(t||(t={})),function(e){e.Workbook="Workbook",e.Worksheet="Worksheet"}(r||(r={}));const l="1.3.0";let u=!1;const p="[@openfin/excel]",w=()=>{u=!1},y=()=>{u=!0,g("v1.3.0")},f=(e,t)=>{u&&(e.innerError?console.error(t?`${p} ${t}`:p,e,"\n\n(inner)",e.innerError):console.error(t?`${p} ${t}`:p,e))},g=(...e)=>{u&&console.log(p,...e)},m=(...e)=>{u&&console.warn(p,...e)};o.H||Object.assign(window,{fin:{}}),Object.assign(o.H,{Integrations:{Excel:{enableLogging:y,disableLogging:w}}});const v=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),C=new Map,I=(t,n)=>async()=>{g(`Worksheet: Activate (${n})`);try{await t.dispatch(e.ActivateWorksheet,n)}catch(e){throw new a}},x=(t,n)=>async()=>{g(`Worksheet: Calculate (${n})`);try{await t.dispatch(e.CalculateWorksheet,n)}catch(e){throw new a}},A=(t,n)=>async()=>{g(`Worksheet: Clear all cell values (${n})`);try{await t.dispatch(e.ClearAllCellValues,n)}catch(e){throw new a}},b=(t,n)=>async()=>{g(`Worksheet: Clear all cell formatting (${n})`);try{await t.dispatch(e.ClearAllCellFormatting,n)}catch(e){throw new a}},E=(t,n)=>async()=>{g(`Worksheet: Clear all cells (${n})`);try{await t.dispatch(e.ClearAllCells,n)}catch(e){throw new a}},P=(t,n)=>async i=>{g(`Worksheet: Clear cell values; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellValues,r)}catch(e){throw new a}},k=(t,n)=>async i=>{g(`Worksheet: Clear cell formatting; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellFormatting,r)}catch(e){throw new a}},M=(t,n)=>async i=>{g(`Worksheet: Clear cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCells,r)}catch(e){throw new a}},_=(e,t)=>(n,i,r=1e3)=>{if(Number.isNaN(r)||r<=0)throw new s("Update interval must be a positive number");const o=v();g(`Worksheet: Create data stream; streamId:${o}; cellRange:${n}; updateInterval:${r} (${t})`);const a={close:()=>{g(`Closed stream (${o})`),(e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(t=n.timer)&&void 0!==t?t:void 0)&&T(e),C.delete(e)}catch(e){throw f(e),e}})(o)},cellRange:n,id:o,start:()=>{g(`Started streaming (${o})`),B(o,i,e,t)},stop:()=>{g(`Stopped streaming (${o})`),T(o)},updateInterval:r,worksheetId:t};return C.set(o,{dataStream:a}),a},S=(e,t,n,i)=>{const o={eventTarget:r.Worksheet,objectId:t};return{objectId:t,activate:I(e,t),addEventListener:n(e,o),calculate:x(e,t),clearAllCellFormatting:b(e,t),clearAllCells:E(e,t),clearAllCellValues:A(e,t),clearCellFormatting:k(e,t),clearCells:M(e,t),clearCellValues:P(e,t),createDataStream:_(e,t),delete:O(e,t),filterCells:W(e,t),getCells:F(e,t),getName:L(e,t),protect:R(e,t),removeEventListener:i(e),setCellFormatting:$(e,t),setCellName:G(e,t),setCellValues:j(e,t),setName:N(e,t)}},O=(t,n)=>async()=>{g(`Worksheet: Delete (${n})`);try{await t.dispatch(e.DeleteWorksheet,n)}catch(e){throw new a}},W=(t,n)=>async(i,r,o,s,c,d=!0)=>{g(`Worksheet: Filter cells; cellRange:${i} (${n})`,{columnIndex:r,filterOperator:o,criteria1:s,criteria2:c,visibleDropDown:d});const h={cellRange:i,criteria1:s,criteria2:c,columnIndex:r,filterOperator:o,objectId:n,visibleDropDown:d};try{await t.dispatch(e.FilterCells,h)}catch(e){throw new a}},F=(t,n)=>async i=>{g(`Worksheet: Get cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};let o=[];try{o=await t.dispatch(e.GetCells,r),g(`${i}:`,o)}catch(e){throw new a}return o},L=(t,n)=>async()=>{g(`Worksheet: Get name (${n})`);try{return await t.dispatch(e.GetWorksheetName,n)}catch(e){throw new a}},R=(t,n)=>async()=>{g(`Worksheet: Protect (${n})`);try{await t.dispatch(e.ProtectWorksheet,n)}catch(e){throw new a}},$=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell formatting; cellRange:${i} (${n})`,r);const o={cellRange:i,formatting:r,objectId:n};try{await t.dispatch(e.SetCellFormatting,o)}catch(e){throw new a}},G=(t,n)=>async(i,r)=>{const o=r.trim();let s;if(!o)throw s=new h("Cell range name cannot be an empty string"),f(s),s;if(o.length>255)throw s=new h("Cell range name must be 255 characters or less"),f(s),s;if(/[^a-z0-9_.?\\"']/.test(o))throw s=new h("Cell range name contains invalid characters"),f(s),s;if(/^\d|\d$/.test(o))throw s=new h("Cell range name must not start or end with a number"),f(s),s;g(`Worksheet: Set cell name; cellRange:${i}; newCellRangeName:${o} (${n})`);const c={cellRange:i,name:o,objectId:n};try{await t.dispatch(e.SetCellName,c)}catch(e){throw new a}},j=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell values; cellRange:${i} (${n})`,r);const o={cellRange:i,objectId:n,valuesMap:r};try{await t.dispatch(e.SetCellValues,o)}catch(e){throw new a}},N=(t,n)=>async i=>{const r=i.trim();let o;if(!r)throw o=new h("Worksheet name cannot be an empty string"),f(o),o;if(r.length>31)throw o=new h("Worksheet name must be 31 characters or less"),f(o),o;g(`Worksheet: Set name; newWorksheetName:${r} (${n})`);const s={newWorksheetName:r,objectId:n};try{return await t.dispatch(e.SetWorksheetName,s)}catch(e){throw new a}},B=(e,t,n,i)=>{var r;try{const o=C.get(e);if(!o)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(r=o.timer)&&void 0!==r?r:void 0)&&T(e);const{cellRange:a,updateInterval:c}=o.dataStream,d=async()=>{const r=await t();try{await j(n,i)(a,[[r]])}catch(t){m(`Unable to update cell range for stream with id ${e}: ${null==t?void 0:t.message}`)}},h=window.setInterval(d,c);o.timer=h}catch(e){throw f(e),e}},T=e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);if(void 0===(null!==(t=n.timer)&&void 0!==t?t:void 0))return;window.clearInterval(n.timer),n.timer=void 0}catch(e){throw f(e),e}},D=new Map,V=(n,i)=>async(r,o)=>{if(!i||!i.eventTarget||!i.objectId){const e=new c("Event registration missing required values");throw f(e),e}const s=Object.keys(t).find((e=>e.toLowerCase()===r.toLowerCase()));if(!s){const e=new c(`Unsupported event name: ${r}`);throw f(e),e}i.eventName=t[s],g("Registering event",i);try{const t=await n.dispatch(e.RegisterEvent,i);D.set(t,o)}catch(e){throw new a(void 0,e)}},H=t=>async n=>{let i;for(const[e,t]of D)if(t===n){i=e;break}if(!i)throw new c;g("Deregistering event:",i);try{await t.dispatch(e.DeregisterEvent,i),D.delete(i)}catch(e){throw new a}},U=(t,n)=>async()=>{g(`Workbook: Activate (${n})`);try{return await t.dispatch(e.ActivateWorkbook,n)}catch(e){throw new a}},z=(t,n,i,r)=>async()=>{let o;g(`Workbook: Add worksheet (${n})`);try{o=await t.dispatch(e.AddWorksheet,n)}catch(e){throw new a}return S(t,o,i,r)},q=(t,n)=>async()=>{g(`Workbook: Calculate (${n})`);try{await t.dispatch(e.CalculateWorkbook,n)}catch(e){throw new a}},J=(t,n)=>async()=>{g(`Workbook: Close (${n})`);try{return await t.dispatch(e.CloseWorkbook,n)}catch(e){throw new a}},K=(e,t,n,i)=>{const o={eventTarget:r.Workbook,objectId:t};return{objectId:t,activate:U(e,t),addWorksheet:z(e,t,n,i),addEventListener:n(e,o),calculate:q(e,t),close:J(e,t),getCalculationMode:Y(e,t),getName:Q(e,t),getWorksheetByName:Z(e,t,n,i),getWorksheets:X(e,t,n,i),removeEventListener:i(e),save:ee(e,t),saveAs:te(e,t)}},Y=(t,n)=>async()=>{g("Workbook: Get calculation mode");try{return await t.dispatch(e.GetCalculationMode,n)}catch(e){throw new a}},Q=(t,n)=>async()=>{g(`Workbook: Get name (${n})`);try{return await t.dispatch(e.GetWorkbookName,n)}catch(e){throw new a}},Z=(t,n,i,r)=>async o=>{let s;g(`Workbook: Get worksheet by name: ${o} (${n})`);try{if(s=await t.dispatch(e.GetWorksheetByName,{objectId:n,worksheetName:o}),null===s)return null}catch(e){throw new a}return S(t,s,i,r)},X=(t,n,i,r)=>async()=>{let o;g(`Workbook: Get worksheets (${n})`);try{o=await t.dispatch(e.GetWorksheets,n)}catch(e){throw new a}return o.map((e=>S(t,e,i,r)))},ee=(t,n)=>async()=>{g(`Workbook: Save (${n})`);try{return await t.dispatch(e.SaveWorkbook,n)}catch(e){throw new a}},te=(t,n)=>async i=>{g(`Workbook: Save as; filePath:${i} (${n})`);try{return await t.dispatch(e.SaveWorkbookAs,{filePath:i,objectId:n})}catch(e){throw new a}},ne=t=>async()=>{let n;g("Application: Create workbook");try{n=await t.dispatch(e.CreateWorkbook)}catch(e){throw new a}return K(t,n,V,H)},ie=t=>async n=>{let i;g(`Application: Get workbook; id:${n}`);try{i=await t.dispatch(e.GetWorkbookById,n)}catch(e){throw new a}return K(t,i,V,H)},re=t=>async()=>{let n;g("Application: Get workbooks");try{n=await t.dispatch(e.GetWorkbooks)}catch(e){throw new a}return n.map((e=>K(t,e,V,H)))},oe=t=>async n=>{g(`Application: Get worksheet; id:${n}`);try{n=await t.dispatch(e.GetWorksheetById,n)}catch(e){throw new a}return S(t,n,V,H)},se=t=>async n=>{let i;g(`Application: Open workbook; filePath:${n}`);try{i=await t.dispatch(e.OpenWorkbook,n)}catch(e){throw new a}return K(t,i,V,H)},ae=t=>async(n=!0)=>{g(`Application: Quit; displayAlerts:${n}`);try{return await t.dispatch(e.QuitApplication,n)}catch(e){throw new a}};var ce;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(ce||(ce={}));const de="excel-adapter",he=v();let le,ue;const pe=async()=>{try{if(!le||!await(async e=>(await o.H.InterApplicationBus.Channel.getAllChannels()).some((t=>t.channelName===e)))(he)){await(async()=>{var e;const t=null===(e=(await o.H.Application.getCurrentSync().getManifest()).appAssets)||void 0===e?void 0:e.find((e=>e.alias===de));if(t)return void m("Detected adapter package in app manifest appAssets",t);if(await ye())return void g("Using existing adapter package");const n={alias:de,src:"https://cdn.openfin.co/release/integrations/excel/1.3.0/OpenFin.Excel.zip",target:"OpenFin.Excel.exe",version:l};g("Downloading adapter package",n);try{await o.H.System.downloadAsset(n,(()=>{}))}catch(e){throw f("Unable to download adapter package"),e}})();const e=await o.H.System.getRuntimeInfo(),t=o.H.Application.me.uuid,n=e.version,i=e.securityRealm;g("Initializing adapter",{appId:t,channelName:he,runtimeVersion:n,securityRealm:i}),le=await o.H.System.launchExternalProcess({alias:de,arguments:`${t} ${n} ${i} ${he}`}),g(`Adapter running with uuid ${le.uuid}`)}const i=o.H.InterApplicationBus.Channel.connect(he,{payload:{version:l}}),s=new Promise((e=>{setTimeout(e,2e4)})).then((()=>{throw new Error("Connection to adapter timed out")}));ue=await Promise.race([i,s]),g(`Connected to adapter on channel ${he}`),ue.register(e.LogMessage,we),ue.register(e.EventFired,(n=ue,e=>{const{eventRegistrationId:i}=e,o=D.get(i);if(!o)throw new c(`No registered event listener found for id: ${i}`);g("Event payload received",e),((e,n,i)=>{var o,s;switch(i.eventTarget){case r.Workbook:switch(null===(o=i.eventName)||void 0===o?void 0:o.toUpperCase()){case t.Activate.toUpperCase():case t.Close.toUpperCase():case t.Deactivate.toUpperCase():return e();case t.AddWorksheet.toUpperCase():case t.DeleteWorksheet.toUpperCase():return e(S(n,i.worksheetObjectId,V,H));default:throw new c(`Unexpected workbook event: ${i.eventName}`)}case r.Worksheet:switch(null===(s=i.eventName)||void 0===s?void 0:s.toUpperCase()){case t.Activate.toUpperCase():return e();case t.Change.toUpperCase():return e(i.changedCells);case t.Deactivate.toUpperCase():return e();default:throw new c(`Unexpected worksheet event: ${i.eventName}`)}default:throw new c(`Unexpected event target: ${i.eventTarget}`)}})(o,n,e)}))}catch(e){const t=new d(void 0,e);throw f(t),t}var n;return{adapter:{channelName:he,version:l},createWorkbook:ne(ue),getWorkbookById:ie(ue),getWorkbooks:re(ue),getWorksheetById:oe(ue),openWorkbook:se(ue),quit:ae(ue)}},we=e=>{const{message:t,type:n}=e,i="[adapter]";switch(n){case ce.Error:f(t,i);break;case ce.Info:g(i,t);break;case ce.Warn:m(i,t)}},ye=async()=>{try{const e=await o.H.System.getAppAssetInfo({alias:de});return e&&e.version===l}catch(e){return!1}};var fe,ge,me,ve,Ce;!function(e){e.Continuous="Continuous",e.Dash="Dash",e.DashDot="DashDot",e.DashDotDot="DashDotDot",e.Dot="Dot",e.Double="Double",e.SlantDashDot="SlantDashDot",e.None="None"}(fe||(fe={})),function(e){e.Center="Center",e.CenterAcrossSelection="CenterAcrossSelection",e.Distributed="Distributed",e.Fill="Fill",e.General="General",e.Justify="Justify",e.Left="Left",e.Right="Right"}(ge||(ge={})),function(e){e.Automatic="Automatic",e.Checker="Checker",e.CrissCross="CrissCross",e.Down="Down",e.Gray16="Gray16",e.Gray25="Gray25",e.Gray50="Gray50",e.Gray75="Gray75",e.Gray8="Gray8",e.Grid="Grid",e.Horizontal="Horizontal",e.LightDown="LightDown",e.LightHorizontal="LightHorizontal",e.LightUp="LightUp",e.LightVertical="LightVertical",e.LinearGradient="LinearGradient",e.None="None",e.RectangularGradient="RectangularGradient",e.SemiGray75="SemiGray75",e.Solid="Solid",e.Up="Up",e.Vertical="Vertical"}(me||(me={})),function(e){e.Bottom="Bottom",e.Center="Center",e.Distributed="Distributed",e.Justify="Justify",e.Top="Top"}(ve||(ve={})),function(e){e.And="And",e.Or="Or",e.Top10Items="Top10Items",e.Bottom10Items="Bottom10Items",e.Top10Percent="Top10Percent",e.Bottom10Percent="Bottom10Percent",e.FilterValues="FilterValues"}(Ce||(Ce={}))})();var r=i.dq,o=i.MS,s=i.xQ,a=i.sO,c=i.Zu,d=i.I3,h=i.$U,l=i.i0,u=i.cX,p=i._W,w=i.U$,y=i.U7,f=i.rd;

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module) => {

(()=>{"use strict";var e={703:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>p.Pt,CLIFilterOptionType:()=>p.el,CLITemplate:()=>p.yW,deregister:()=>tt,hide:()=>ot,register:()=>et,show:()=>nt});var o={};n.r(o),n.d(o,{subscribe:()=>ce});var r={};n.r(r),n.d(r,{create:()=>Ue});var i=n(678),a=n(532),s=n(150);const c="home";var d;!function(e){e.Commands="home-commands"}(d||(d={}));var u,l=n(806),p=(n(298),n(758));n(114),n(109),n(427);!function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(u||(u={}));var f=n(316);const g="all",w="0",h="5",v="6",y=()=>{};function m(e,t){return e?`${e}-${t}`:t}function S(e){return`__search-${e}-topic__`}const P=new Map;function W(e,t){P.has(e)||P.set(e,new Set),P.get(e).add(t)}function k(e,t){const n=P.get(e);n&&n.delete(t)}const C=new Map;function I(e,t){C.has(e)||C.set(e,new Set),C.get(e).add(t)}function T(e,t){const n=C.get(e);n&&n.delete(t)}const b=new Map;async function A(e,t){b.has(e)||b.set(e,new Map),b.get(e).set(t.id,t);const n=P.get(e);if(!n)return;const o=[...n].map((e=>e()));await Promise.all(o)}async function F(e,t){const n=b.get(e);if(!n)return;n.delete(t);const o=C.get(e);if(!o)return;const r=[...o].map((e=>e()));await Promise.all(r)}function R(e){const t=b.get(e);return t?[...t.values()]:[]}function D(e){const t=b.get(e);t&&t.clear()}function B(e,t){const n=b.get(e);return n?n.get(t):null}function L(e,t,n){return{...e,action:n||{...e.actions[0],trigger:f.px.UserAction},dispatcherIdentity:t}}function x(e,t,n="ascending"){const o=e||[];if(!t?.length)return o;const r=[],i=new Map;t.forEach((e=>{if(e.key)return i.set(e.key,e);r.push(e)}));let a=o.map((e=>{const{key:t}=e;if(t&&i.has(t)){const e=i.get(t);return i.delete(t),e}return e}));return a.push(...i.values(),...r),a="ascending"===n?a.sort(((e,t)=>(e?.score??1/0)-(t?.score??1/0))):a.sort(((e,t)=>(t?.score??1/0)-(e?.score??1/0))),a}function O(e){const t={};let n=[];let o=[];let r=u.Initial;t.getStatus=()=>r,t.getResultBuffer=()=>n,t.setResultBuffer=e=>{n=e,n?.length&&t.onChange()},t.getRevokedBuffer=()=>o,t.setRevokedBuffer=e=>{o=e,o?.length&&t.onChange()},t.onChange=y;const i={};return t.res=i,i.close=()=>{r!==u.Close&&(r=u.Close,t.onChange())},i.open=()=>{r!==u.Open&&(r=u.Open,t.onChange())},i.respond=n=>{const o=x(t.getResultBuffer(),n,e);t.setResultBuffer(o)},i.revoke=(...e)=>{const n=new Set(e),o=t.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));t.setResultBuffer(o),n.size&&(t.getRevokedBuffer().forEach((e=>n.add(e))),t.setRevokedBuffer([...n]))},t}function M(e,t,n){const o=new Set;let r=!1;return{close:()=>{r=!0;for(const e of o)e()},req:{id:t,topic:e,...n,context:n?.context||{},onClose:e=>{o.add(e),r&&e()},removeListener:e=>{o.delete(e)}}}}function E(){return{name:fin.me.name,uuid:fin.me.uuid}}function V(){let e;try{e=fin.Platform.getCurrentSync().identity.uuid}catch(e){}return e}const G="deregistered or does not exist",q=new Error(`provider ${G}`),_=new Error("provider with name already exists"),H=new Error("bad payload"),$=new Error("subscription rejected"),U=new Error(`channel ${G}`),N=new Map;function j(e){const t=X(e);if(t)return t;throw U}function X(e){const t=N.get(e);if(t)return t}function K(e,t){N.set(e,t)}function z(e){console.error("OpenFin Search API: ",e)}const J=new Map;function Q(e){J.has(e)||J.set(e,new Map);const t=J.get(e);return{getRequestsForIdentity:e=>{const n=function(e){return`${e.uuid}:${e.name}`}(e);return t.has(n)||t.set(n,new Map),t.get(n)}}}async function Z(e,t){return(await j(e)).dispatch(w,t)}function Y({namespacedTopic:e,topic:t}){const n=B.bind(null,e),o=Q(e),r=Z.bind(null,e);return async(e,i)=>{if(!e||!e.id||!e.providerId){const e=H;return z(e),{error:e.message}}const{id:a,providerId:s}=e,c=n(s);if(!c){const e=q;return z(e),{error:e.message}}const d=o.getRequestsForIdentity(i);let u=d.get(e.id);u||(u=M(t,a,e),d.set(e.id,u));const l=O(),p=()=>{const e=l.getResultBuffer();l.setResultBuffer([]);const t=l.getRevokedBuffer();l.setRevokedBuffer([]);const n=l.getStatus();r({id:a,providerId:s,results:e,revoked:t,status:n})};let f=!0,g=!1;l.onChange=()=>{if(f)return f=!1,void p();g||(g=!0,setTimeout((()=>{g=!1,p()}),100))};try{const{results:e,context:t}=await c.onUserInput(u.req,l.res),n=l.getStatus();return{id:a,providerId:s,status:n,results:e,context:t}}catch(e){return z(e),{id:a,providerId:s,error:e?.message}}}}async function ee(e,t,n){const o=n||await j(e),r=E(),i={...t,identity:r,onResultDispatch:void 0},a=await o.dispatch("2",i);return await A(e,{identity:r,...t}),a}async function te(e,t){const n=await j(e);return await n.dispatch("3",t),F(e,t)}async function ne(e,t,n,o){const r=L(n,E(),o),i=B(e,t);if(i){const{onResultDispatch:e}=i;if(!e)return;return e(r)}const a={providerId:t,result:r};return(await j(e)).dispatch(h,a)}async function oe(e,t){const n={...t,context:t?.context||{}},o={},r=async function*(e,t,{setState:n}){const o=await j(e);for(;;){const e=await o.dispatch("1",t),r=e.error;if(r)throw new Error(r);const i=e;if(t.id=i.id,n(i.state),i.done)return i.value;yield i.value}}(e,n,{setState:e=>{o.state=e}});let i=await r.next();return o.id=n.id||"",o.close=()=>{!async function(e,t){(await j(e)).dispatch(v,{id:t})}(e,o.id)},o.next=()=>{if(i){const e=i;return i=void 0,e}return r.next()},o}async function re(e){return(await j(e)).dispatch("4",null)}async function ie(e){const t=await j(e);var n;n=e,N.delete(n),D(e),await t.disconnect()}function ae(e){const{namespacedTopic:t}=e,n=Q(t);return async o=>{if(!X(t))return;const r=n.getRequestsForIdentity(o);for(const{req:e,close:t}of r.values())t(),r.delete(e.id);K(t,(async e=>{const{namespacedTopic:t}=e,n=await se(e);for(const e of R(t))await ee(t,e,n);return n})(e))}}async function se(e){const{namespacedTopic:t}=e,n=S(t),o=await async function(e){for(let t=0;t<50;t++)try{return await fin.InterApplicationBus.Channel.connect(e,{wait:!1})}catch(e){if(49===t)throw e;await new Promise((e=>setTimeout(e,1e3)))}}(n);return o.register(w,Y(e)),o.register(v,function(e){const t=Q(e);return(e,n)=>{const o=t.getRequestsForIdentity(n),r=o.get(e.id);r&&(r.close(),o.delete(e.id))}}(t)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return void z(H);const o=B(e,t.providerId);if(!o)return void z(q);const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o.onDisconnection(ae(e)),o}async function ce(e){const t="string"==typeof e?e:e.topic,n="string"==typeof e?void 0:e.uuid,o=t||g,r=n||V()||"",i=m(r,o),a={topic:o,namespace:r,namespacedTopic:i};let s=X(i);return s||(s=se(a),K(i,s),await s),{getAllProviders:re.bind(null,i),register:ee.bind(null,i),search:oe.bind(null,i),deregister:te.bind(null,i),dispatch:ne.bind(null,i),disconnect:ie.bind(null,i)}}const de=new Map;function ue(e){const t=le(e);if(t)return t;throw U}function le(e){const t=de.get(e);if(t)return t}const pe=new Map;function fe(e,t){pe.has(e)||pe.set(e,new Set),pe.get(e).add(t)}function ge(e,t){const n=pe.get(e);n&&n.delete(t)}async function we(e){return[...R(e)].map((e=>({...e,onUserInput:void 0,onResultDispatch:void 0})))}async function he(e,t){if(B(e,t.id))throw new Error("provider with name already exists");const n=E();return await A(e,{identity:n,...t}),{workspaceVersion:i.u0||"",clientAPIVersion:t.clientAPIVersion||""}}async function ve(e,t){await F(e,t)}async function ye(e,t,n,o){const r=B(e,t);if(!r)throw q;const{onResultDispatch:i}=r;if(!i)return;return i(L(n,E(),o))}async function*me(e,t,n){const o=function(e,t){const n=[],o=[],r=[],i=[];for(const a of e){const e=O(a.scoreOrder),s={results:[],provider:{id:a.id,identity:a.identity,title:a.title,scoreOrder:a.scoreOrder,icon:a.icon,dispatchFocusEvents:a.dispatchFocusEvents}};n.push(s),o.push(e);const c=(async()=>{try{const{results:n,context:o}=await a.onUserInput(t,e.res);s.results=x(s.results||[],n),s.context={...s.context,...o}}catch(e){s.error=e}})();c.finally((()=>{c.done=!0})),i.push(c),r.push(r.length)}return{providerResponses:n,listenerResponses:o,openListenerResponses:r,initialResponsePromises:i}}(t.targets?t.targets.map((t=>B(e,t))).filter((e=>!!e)):[...R(e).filter((e=>!e.hidden))],t),{providerResponses:r,listenerResponses:i}=o;let{openListenerResponses:a,initialResponsePromises:s}=o,c=f.De.Fetching;const d=e=>{c=e,n.setState(c)};let l,p=!1;t.onClose((()=>{p=!0,l&&l()}));do{let e=!1;if(s.length){const t=[];for(const n of s)n.done?e=!0:t.push(n);s=t,s.length||(d(f.De.Fetched),e=!0)}let t,n=!1;const o=()=>{n=!0,t&&t()},g=[];for(const t of a){const n=i[t],a=r[t],s=n.getStatus();(s===u.Open||c===f.De.Fetching&&s===u.Initial)&&(g.push(t),n.onChange=o);const d=n.getResultBuffer();d.length&&(n.setResultBuffer([]),a.results=x(a.results||[],d),e=!0);const l=n.getRevokedBuffer();if(l.length){n.setRevokedBuffer([]);const t=new Set(l);a.results=(a.results||[]).filter((({key:e})=>!t.has(e))),e=!0}}if(a=g,e&&(yield r),p)break;n||(a.length||s.length)&&await Promise.race([...s,new Promise((e=>{t=e})),new Promise((e=>{l=e}))])}while(a.length||s.length);return d(f.De.Complete),r}let Se=0;async function Pe({namespacedTopic:e,topic:t},n){Se+=1;const o=M(t,Se.toString(),n),r=me(e,o.req,{setState:e=>{r.state=e}});return r.id=Se.toString(),r.close=o.close,r.state=f.De.Fetching,r}const We=new Map;function ke(e,t){return`${e}:${t}`}function Ce(e){return async t=>{if(!t)return z(H),{error:H.message};let n;if(t.id)n=ke(e.namespacedTopic,t.id);else{const o=await Pe(e,t);n=ke(e.namespacedTopic,o.id),t.id=o.id,We.set(n,{generator:o})}const o=We.get(n);clearTimeout(o.timeout);const r=await o.generator.next();return o.timeout=function(e){return window.setTimeout((()=>{We.delete(e)}),1e4)}(n),{...r,id:t.id,state:o.generator.state}}}function Ie(e,t,n){return ue(e).dispatch(t,v,{id:n})}function Te(e){return t=>function(e,t){const n=ke(e,t),o=We.get(n);o&&o.generator.close()}(e,t.id)}async function be(e,t,{id:n,query:o,context:r,targets:i=[]}){const a=ue(e),s={id:n,query:o,context:r,targets:i,providerId:t.id},c=await a.dispatch(t.identity,w,s),d=c.error;if(d)throw new Error(d);return c}const Ae=new Map;function Fe(e,t,n){return`${e}:${t.name}:${t.uuid}:${n}`}const Re=new Map;function De(e,t,n){return`${e}:${t}:${n}`}function Be(e,t){const n=Fe.bind(null,e,t.identity),o=Ie.bind(null,e,t.identity),r=be.bind(null,e,t);return async(i,a)=>{const s=n(i.id);if(!Ae.has(s)){const e=()=>{o(i.id),Ae.delete(s)};Ae.set(s,e),i.onClose(e)}const c=De(e,t.id,i.id),d=()=>{Re.delete(c),a.close()};i.onClose(d),Re.set(c,(e=>{e.results?.length&&a.respond(e.results),e.revoked?.length&&a.revoke(...e.revoked),e.status===u.Open&&a.open(),e.status===u.Close&&d()}));const l=await r(i);return l.status===u.Open&&a.open(),l.status!==u.Close&&l.status!==u.Initial||d(),l}}function Le(e,t){return async n=>{const o=ue(e),r={providerId:t.id,result:n};return o.dispatch(t.identity,h,r)}}const xe=new Map;function Oe(e,t){return`${e}-${t.name}-${t.uuid}`}function Me(e){return async(t,n)=>{if(!t||!t.id)return z(new Error(JSON.stringify(t))),void z(H);if(B(e,t.id))throw _;return t.identity=n,await async function(e,t){const n=Oe(e,t.identity);xe.has(n)||xe.set(n,[]),xe.get(n).push(t.id),await A(e,{...t,onUserInput:Be(e,t),onResultDispatch:Le(e,t)})}(e,t),{workspaceVersion:i.u0||"",clientAPIVersion:t.clientAPIVersion||""}}}function Ee(e){return t=>{t?function(e,t){const n=B(e,t);if(!n)return;const o=Oe(e,n.identity),r=xe.get(o);if(r){const n=r.findIndex((e=>e===t));-1!==n&&(r.splice(n,1),F(e,t))}}(e,t):z(H)}}const Ve=new Map;function Ge(e,t){Ve.has(e)||Ve.set(e,new Set),Ve.get(e).add(t)}function qe(e,t){const n=Ve.get(e);n&&n.delete(t)}function _e(e){return async t=>{!function(e,t){const n=Oe(e,t),o=xe.get(n);if(o){for(const t of o)F(e,t);xe.delete(n)}}(e,t);const n=Ve.get(e);n&&n.forEach((e=>e(t)))}}async function He(e){const{namespacedTopic:t}=e,n=S(e.namespacedTopic),o=await(r=n,fin.InterApplicationBus.Channel.create(r));var r;return o.onConnection(function({namespacedTopic:e}){return async t=>{const n=pe.get(e);if(n)for(const e of n)if(!await e(t))throw $}}(e)),o.onDisconnection(_e(t)),o.register(v,Te(t)),o.register(w,function(e){return t=>{const n=De(e,t.providerId,t.id),o=Re.get(n);o&&o(t)}}(t)),o.register("2",Me(t)),o.register("3",Ee(t)),o.register("4",function(e){return async()=>we(e)}(t)),o.register("1",Ce(e)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return void z(H);const o=B(e,t.providerId);if(!o)throw q;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o}async function $e(e){const t=ue(e);var n;n=e,de.delete(n),await t.destroy(),D(e)}async function Ue(e){const t=("string"==typeof e?e:e?.topic||"")||g,n=V()||"",o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=le(o);i||(i=await He(r),function(e,t){de.set(e,t)}(o,i));const a=ge.bind(null,o),s=qe.bind(null,o),c=k.bind(null,o),d=T.bind(null,o);return{getAllProviders:we.bind(null,o),search:Pe.bind(null,r),register:he.bind(null,o),deregister:ve.bind(null,o),onSubscription:fe.bind(null,o),onDisconnect:Ge.bind(null,o),onRegister:W.bind(null,o),onDeregister:I.bind(null,o),dispatch:ye.bind(null,o),disconnect:$e.bind(null,o),removeListener:e=>{a(e),s(e),c(e),d(e)}}}const{create:Ne}=r,{subscribe:je}=o,Xe={create:Ne,subscribe:je,defaultTopic:"all"},Ke=()=>{window.search=Xe},ze=e=>{const t=()=>{Ke(),window.removeEventListener(e,t)};return t};if("undefined"!=typeof window){Ke();const e="load",t=ze(e);window.addEventListener(e,t);const n="DOMContentLoaded",o=ze(n);window.addEventListener(n,o)}const Je=new Map;async function Qe(){await async function(e){Je.set(e,await je({topic:e,uuid:l.q9.Workspace}))}(c)}let Ze;async function Ye(e){return await async function(){return Ze||(Ze=Qe()),Ze}(),Je.get(e)}const et=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);await(0,s.aB)();const t=await Ye(c);try{e.clientAPIVersion=i.u0;const n=await t.register(e);return(0,a.ck)({allowed:!0,componentVersion:n?.workspaceVersion}),n?.workspaceVersion,i.u0,{...n,setSearchQuery:async t=>(await(0,s.Xl)()).dispatch(s.WF.SetSearchQuery,{query:t,providerID:e.id})}}catch(e){throw(0,a.ck)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),e}},tt=async e=>{await(0,s.aB)();return(await Ye(c)).deregister(e)};async function nt(){return(await(0,s.Xl)()).dispatch(s.WF.ShowHome,void 0)}async function ot(){return(await(0,s.Xl)()).dispatch(s.WF.HideHome,void 0)}},298:(e,t,n)=>{n.d(t,{p:()=>o.px,w:()=>o.wt});var o=n(316)},427:(e,t,n)=>{var o;n.d(t,{v:()=>o}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(o||(o={}))},758:(e,t,n)=>{var o,r,i;n.d(t,{Pt:()=>o,el:()=>i,yW:()=>r}),function(e){e.Suggestion="suggestion"}(o||(o={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(i||(i={}))},114:(e,t,n)=>{var o,r;n.d(t,{L:()=>o,T:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(o||(o={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},109:(e,t,n)=>{n.d(t,{Go:()=>r,ZJ:()=>a,bI:()=>i,p6:()=>o});const o={Container:"Container",Button:"Button"},r={Text:"Text",Image:"Image",List:"List"},i={...o,...r};var a;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(a||(a={}))},528:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>a.L,StorefrontTemplate:()=>a.T,deregister:()=>h,hide:()=>v,register:()=>w,show:()=>y});var o=n(532),r=n(150),i=n(82),a=n(114),s=n(678),c=n(438);let d,u=!1;async function l(e,t,n){const o=await(0,r.Dm)();try{return await o.dispatch(e.action,e.payload)}catch(r){if(-1!==r.toString().indexOf(e.action))return u||console.warn("You are using a newer version of the Workspace client library that is not supported by the currently running workspace provider. Please upgrade the Workspace to version 9.0 or later."),u=!0,await o.dispatch(t.action,t.payload),n;throw r}}const p=new Map,f=e=>{if(!p.has(e))throw new Error(`Storefront Provider with id ${e} is not registered`);return p.get(e)},g=async e=>{await(0,c.Hh)(fin.me.identity);const t=await(0,r.Xl)();if(p.has(e.id))throw new Error(`Storefront provider with id ${e.id} already registered`);return p.set(e.id,e),(e=>{e.isStorefrontActionsRegistered||(e.isStorefrontActionsRegistered=!0,e.register(r.WF.GetStorefrontProviderApps,(e=>f(e).getApps())),e.register(r.WF.GetStorefrontProviderFooter,(e=>f(e).getFooter())),e.register(r.WF.GetStorefrontProviderLandingPage,(e=>f(e).getLandingPage())),e.register(r.WF.GetStorefrontProviderNavigation,(e=>f(e).getNavigation())),e.register(r.WF.LaunchStorefrontProviderApp,(({id:e,app:t})=>f(e).launchApp(t))))})(t),e.clientAPIVersion=s.u0,l({action:r.WF.RegisterProvider,payload:{providerType:i.lP.Storefront,info:e}},{action:r.WF.RegisterStorefrontProvider,payload:e},{workspaceVersion:"unknown"})},w=e=>(d=new Promise((async(t,n)=>{try{const n=await g(e);(0,o.d9)({allowed:!0,componentVersion:n?.workspaceVersion}),n?.workspaceVersion,s.u0,t({clientAPIVersion:s.u0,workspaceVersion:n?.workspaceVersion??""})}catch(e){(0,o.d9)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),n(e)}})),d),h=async e=>(await d,p.delete(e),await(0,r.aB)(),l({action:r.WF.DeregisterProvider,payload:{providerType:i.lP.Storefront,id:e}},{action:r.WF.DeregisterStorefrontProvider,payload:e})),v=async()=>(await d,await(0,r.aB)(),l({action:r.WF.HideProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.HideStorefront})),y=async()=>(await d,await(0,r.aB)(),l({action:r.WF.ShowProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.ShowStorefront}))},438:(e,t,n)=>{var o;n.d(t,{Hh:()=>i}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.SharePage="sharePage",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized"}(o||(o={}));const r=async e=>fin.Platform.wrapSync(e).getClient(),i=async e=>{const t=await r(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let o;try{o=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof o&&o)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),o;if("object"==typeof o&&o.isWorkspacePlatform)return o;throw new Error(n)}},150:(e,t,n)=>{n.d(t,{Dm:()=>s,WF:()=>a,Xl:()=>l,aB:()=>u});var o=n(117),r=n(678),i=n(121);var a;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.SetSearchQuery="set-search-query",e.OpenHomeAndSetSearchQuery="open-home-and-set-search-query",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.SetSelectedScheme="set-selected-scheme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(a||(a={}));const s=(0,o.Z)("__of_workspace_protocol__"),c="isLaunchedViaLib",d=e=>{const t=new URL(e);return t.searchParams.append(c,"true"),t.toString()},u=async()=>{await(0,i.JV)(i.iW)||((r.ZK||-1===navigator.userAgent.indexOf("Win"))&&await fin.Application.startFromManifest(d(r.aW)),await fin.System.openUrlWithBrowser(d(r.GX)))},l=async()=>(await u(),s())},82:(e,t,n)=>{n.d(t,{R8:()=>a,X_:()=>i,lP:()=>o});var o,r=n(150);!function(e){e.Storefront="storefront",e.Dock="dock"}(o||(o={}));const i=async e=>(await(0,r.Dm)()).dispatch(r.WF.ShowProviderWindow,{providerType:e}),a=async e=>(await(0,r.Dm)()).dispatch(r.WF.HideProviderWindow,{providerType:e})},806:(e,t,n)=>{n.d(t,{q9:()=>o});var o,r,i,a=n(678);!function(e){e.Workspace="openfin-browser"}(o||(o={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(i||(i={}));a.AB,o.Workspace},117:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(678);const r=o.Ax&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function i(e){let t;return()=>{if(!o.sS)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const n={clientAPIVersion:o.u0},i=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return i.onDisconnection((async()=>{console.warn(`disconnected from channel provider ${e}`),t=void 0})),i})().then((e=>e)).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}},678:(e,t,n)=>{var o;n.d(t,{AB:()=>s,Ax:()=>i,GX:()=>u,ZK:()=>d,aW:()=>l,oC:()=>c,sS:()=>r,u0:()=>f}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(o||(o={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,i=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),a=i?window.origin:o.Local,s=r&&fin.me.uuid,c=r&&fin.me.name,d=(r&&fin.me.entityType,"prod"===o.Local),u=(o.Dev,o.Staging,o.Prod,"fins://system-apps/workspace"),l="https://cdn.openfin.co/workspace/9.6.0/app.json",p=e=>e.startsWith("http://")||e.startsWith("https://")?e:a+e,f=(p("https://cdn.openfin.co/workspace/9.6.0"),p("https://cdn.openfin.co/workspace/9.6.0"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&p(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&p(WORKSPACE_DOCS_CLIENT_URL),"9.6.0")},532:(e,t,n)=>{n.d(t,{Wn:()=>d,ck:()=>s,d9:()=>c});var o,r=n(678),i=n(121);!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(o||(o={}));const a=async(e,t)=>{const n={apiVersion:t.apiVersion||r.u0,componentName:e,componentVersion:t.componentVersion||r.u0,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:n})},s=async e=>{i.OI.uuid===i.Gi.uuid&&i.OI.name===i.Gi.name||a(o.Home,e)},c=async e=>{a(o.Storefront,e)},d=async e=>{a(o.Dock,e)}},121:(e,t,n)=>{n.d(t,{Gi:()=>d,JV:()=>p,OI:()=>u,iW:()=>l});var o,r,i,a=n(806),s=n(678);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window"}(o||(o={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(r||(r={})),function(e){e.BeforeUnload="beforeunload"}(i||(i={}));function c(e){if(!s.sS)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const d={name:s.oC,uuid:s.AB};const u={name:o.Home,uuid:a.q9.Workspace},l=(o.Dock,a.q9.Workspace,o.Storefront,a.q9.Workspace,{name:a.q9.Workspace,uuid:a.q9.Workspace});const p=e=>c(e).getOptions().then((()=>!0)).catch((()=>!1))},316:(e,t,n)=>{var o,r,i;n.d(t,{De:()=>o,px:()=>r,wt:()=>i}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(o||(o={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(i||(i={}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{ActionTrigger:()=>W.p,AppManifestType:()=>I.L,ButtonStyle:()=>k.ZJ,CLIAction:()=>C.Pt,CLIFilterOptionType:()=>C.el,CLITemplate:()=>C.yW,ContainerTemplateFragmentNames:()=>k.p6,Dock:()=>e,DockButtonNames:()=>d.v,Home:()=>v,Legacy:()=>t,PresentationTemplateFragmentNames:()=>k.Go,SearchTagBackground:()=>W.w,Storefront:()=>P,StorefrontTemplate:()=>I.T,TemplateFragmentTypes:()=>k.bI});var e={};n.r(e),n.d(e,{DockButtonNames:()=>d.v,deregister:()=>f,minimize:()=>g,register:()=>p,show:()=>w});var t={};n.r(t),n.d(t,{getPages:()=>m,getWorkspaces:()=>S});var r=n(678),i=n(532),a=n(150),s=n(438),c=n(82),d=n(427);let u,l=!1;const p=e=>(u=new Promise((async(t,n)=>{try{const n=await(async e=>{await(0,s.Hh)(fin.me.identity);const t=await(0,a.Xl)();if(l)throw new Error("A dock provider for the platform is already registered.");return l=!0,e.clientAPIVersion=r.u0,t.dispatch(a.WF.RegisterProvider,{providerType:c.lP.Dock,info:e})})(e);(0,i.Wn)({allowed:!0,componentVersion:n?.workspaceVersion}),n?.workspaceVersion,r.u0,t({clientAPIVersion:r.u0,workspaceVersion:n?.workspaceVersion??""})}catch(e){(0,i.Wn)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),n(e),u=null}})),u),f=async()=>{await u,l=!1;return(await(0,a.Xl)()).dispatch(a.WF.DeregisterProvider,{providerType:c.lP.Dock})},g=async()=>{await u,await(0,a.aB)(),await(0,c.R8)(c.lP.Dock)},w=async()=>{await u,await(0,a.aB)(),await(0,c.X_)(c.lP.Dock)};var h,v=n(703);n(121);!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(h||(h={}));new Map;var y;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.HasMovedStore="HasMovedStore"}(y||(y={}));const m=()=>async function(){return(await(0,a.Dm)()).dispatch(a.WF.GetLegacyPages,void 0)}(),S=()=>(async()=>(await(0,a.Dm)()).dispatch(a.WF.GetLegacyWorkspaces,void 0))();var P=n(528),W=n(298),k=n(109),C=n(758),I=n(114)})(),module.exports=o})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./client/src/integrations/excel/integration-provider.ts":
/*!***************************************************************!*\
  !*** ./client/src/integrations/excel/integration-provider.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExcelIntegrationProvider": () => (/* binding */ ExcelIntegrationProvider)
/* harmony export */ });
/* harmony import */ var _openfin_excel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/excel */ "../../node_modules/@openfin/excel/openfin.excel.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Implement the integration provider for Excel.
 */
class ExcelIntegrationProvider {
    /**
     * Initialize the module.
     * @param definition The definition of the module from configuration include custom options.
     * @param loggerCreator For logging entries.
     * @param helpers Helper methods for the module to interact with the application core.
     * @returns Nothing.
     */
    async initialize(definition, loggerCreator, helpers) {
        this._integrationHelpers = helpers;
        this._moduleDefinition = definition;
        this._settings = definition.data;
        const brokerClient = fin.Interop.connectSync(fin.me.identity.uuid, {});
        const contextGroups = await brokerClient.getContextGroups();
        this._interopClients = {};
        for (const contextGroup of contextGroups) {
            const contextClient = fin.Interop.connectSync(fin.me.identity.uuid, {});
            await contextClient.joinContextGroup(contextGroup.id);
            await contextClient.addContextHandler(async (ctx) => {
                await this.handleContext(contextGroup.id, ctx);
            });
            this._interopClients[contextGroup.id] = contextClient;
        }
        (0,_openfin_excel__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
    }
    /**
     * The module is being deregistered.
     * @returns Nothing.
     */
    async closedown() {
        for (const client in this._interopClients) {
            await this._interopClients[client].removeFromContextGroup();
        }
        this._interopClients = {};
    }
    /**
     * An entry has been selected.
     * @param result The dispatched result.
     * @param lastResponse The last response.
     * @returns True if the item was handled.
     */
    async itemSelection(result, lastResponse) {
        if (result.action.name === ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION &&
            result.data.workbook &&
            this._integrationHelpers.launchAsset) {
            const excelAsset = result.data;
            await this._integrationHelpers.launchAsset({
                alias: excelAsset.workbook
            });
            const excel = await this.getExcel();
            if (excel) {
                const workbooks = await excel.getWorkbooks();
                for (const workbook of workbooks) {
                    const name = await workbook.getName();
                    if (name === excelAsset.workbook) {
                        for (const worksheetSettings of excelAsset.worksheets) {
                            const worksheet = await workbook.getWorksheetByName(worksheetSettings.name);
                            await worksheet.addEventListener("change", async (cells) => {
                                await this.handleCellChanges(excelAsset, worksheetSettings, cells);
                            });
                        }
                    }
                }
                return true;
            }
        }
        return false;
    }
    /**
     * Get a list of search results based on the query and filters.
     * @param query The query to search for.
     * @param filters The filters to apply.
     * @param lastResponse The last search response used for updating existing results.
     * @returns The list of results and new filters.
     */
    async getSearchResults(query, filters, lastResponse) {
        const results = this._settings?.assets.map((a) => this.createResult(a));
        return {
            results
        };
    }
    /**
     * Create a search result.
     * @param excelAsset The excel document asset alias.
     * @returns The search result.
     */
    createResult(excelAsset) {
        return {
            key: `excel-${excelAsset.workbook}`,
            title: excelAsset.title,
            label: "Excel",
            icon: this._moduleDefinition.icon,
            actions: [
                {
                    name: ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: ExcelIntegrationProvider._PROVIDER_ID,
                ...excelAsset
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.SimpleText,
            templateContent: excelAsset.description
        };
    }
    /**
     * Get the excel application.
     * @returns The application.
     * @internal
     */
    async getExcel() {
        try {
            this._excel = await (0,_openfin_excel__WEBPACK_IMPORTED_MODULE_0__.getExcelApplication)();
            return this._excel;
        }
        catch (err) {
            console.error("Error getting Excel application", err);
        }
    }
    /**
     * Handle the cell changes.
     * @param excelAsset The asset to use for processing the cell changes.
     * @param worksheetName The asset to use for processing the cell changes.
     * @param cells The cells that have changed.
     */
    async handleCellChanges(excelAsset, worksheet, cells) {
        if (worksheet.cellHandlers) {
            for (const cell of cells) {
                const cellHandler = worksheet.cellHandlers.find((c) => c.cell === cell.address);
                if (cellHandler) {
                    const client = this._interopClients[cellHandler.contextGroup];
                    if (client &&
                        (cellHandler.types.includes("instrument") || cellHandler.types.includes("fdc3.instrument"))) {
                        await client.setContext({
                            type: "fdc3.instrument",
                            id: {
                                ticker: cell.value,
                                _source: `excel.${excelAsset.workbook}.${worksheet.name}`
                            }
                        });
                    }
                }
            }
        }
    }
    /**
     * Handle a context.
     * @param contextGroup The group receiving the context.
     * @param context The context being received.
     */
    async handleContext(contextGroup, context) {
        if (this._settings?.assets) {
            const excel = await this.getExcel();
            if (excel) {
                const workbooks = await excel.getWorkbooks();
                for (const workbook of workbooks) {
                    const workbookName = await workbook.getName();
                    const connectedWorkbook = this._settings?.assets.find((a) => a.workbook === workbookName);
                    if (connectedWorkbook?.worksheets) {
                        for (const worksheetSettings of connectedWorkbook.worksheets) {
                            if (worksheetSettings.cellHandlers) {
                                const incomingSource = `excel.${workbookName}.${worksheetSettings.name}`;
                                if (incomingSource !== context?.id?._source) {
                                    const cellHandlers = worksheetSettings.cellHandlers?.filter((ch) => ch.contextGroup === contextGroup && ch.types.includes(context.type));
                                    for (const cellHandler of cellHandlers) {
                                        const worksheet = await workbook.getWorksheetByName(worksheetSettings.name);
                                        let cellValue;
                                        if (context.type === "fdc3.instrument" || context.type === "instrument") {
                                            cellValue = context.id?.ticker;
                                        }
                                        if (cellValue !== undefined) {
                                            await worksheet.setCellValues(cellHandler.cell, [[cellValue]]);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
/**
 * Provider id.
 * @internal
 */
ExcelIntegrationProvider._PROVIDER_ID = "excel";
/**
 * The key to use for a sheet open action.
 * @internal
 */
ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION = "Open Excel";


/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!************************************************!*\
  !*** ./client/src/integrations/excel/index.ts ***!
  \************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "entryPoints": () => (/* binding */ entryPoints)
/* harmony export */ });
/* harmony import */ var _integration_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./integration-provider */ "./client/src/integrations/excel/integration-provider.ts");

const entryPoints = {
    integrations: new _integration_provider__WEBPACK_IMPORTED_MODULE_0__.ExcelIntegrationProvider()
};

})();

var __webpack_exports__entryPoints = __webpack_exports__.entryPoints;
export { __webpack_exports__entryPoints as entryPoints };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxZQUFZLEVBQUU7NENBQ3hFLFNBQVMsR0FBRyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQzt5Q0FDL0I7d0NBQ0QsSUFBSSxTQUFTLEtBQUssU0FBUyxFQUFFOzRDQUM1QixNQUFNLFNBQVMsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO3lDQUMvRDtxQ0FDRDtpQ0FDRDs2QkFDRDt5QkFDRDtxQkFDRDtpQkFDRDthQUNEO1NBQ0Q7SUFDRixDQUFDOztBQXBRRDs7O0dBR0c7QUFDcUIscUNBQVksR0FBRyxPQUFPLENBQUM7QUFFL0M7OztHQUdHO0FBQ3FCLHdEQUErQixHQUFHLFlBQVksQ0FBQzs7Ozs7OztTQzNCeEU7U0FDQTs7U0FFQTtTQUNBO1NBQ0E7U0FDQTtTQUNBO1NBQ0E7U0FDQTtTQUNBO1NBQ0E7U0FDQTtTQUNBO1NBQ0E7U0FDQTs7U0FFQTtTQUNBOztTQUVBO1NBQ0E7U0FDQTs7Ozs7VUN0QkE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBLGlDQUFpQyxXQUFXO1VBQzVDO1VBQ0E7Ozs7O1VDUEE7VUFDQTtVQUNBO1VBQ0E7VUFDQSx5Q0FBeUMsd0NBQXdDO1VBQ2pGO1VBQ0E7VUFDQTs7Ozs7VUNQQTs7Ozs7VUNBQTtVQUNBO1VBQ0E7VUFDQSx1REFBdUQsaUJBQWlCO1VBQ3hFO1VBQ0EsZ0RBQWdELGFBQWE7VUFDN0Q7Ozs7Ozs7Ozs7Ozs7OztBQ05rRTtBQUUzRCxNQUFNLFdBQVcsR0FBK0M7SUFDdEUsWUFBWSxFQUFFLElBQUksMkVBQXdCLEVBQUU7Q0FDNUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vZXhjZWwvb3BlbmZpbi5leGNlbC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi9jbGllbnQvc3JjL2ludGVncmF0aW9ucy9leGNlbC9pbnRlZ3JhdGlvbi1wcm92aWRlci50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4vY2xpZW50L3NyYy9pbnRlZ3JhdGlvbnMvZXhjZWwvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGU9ezM4ODU6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDQ3OTQpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLkFwcGxpY2F0aW9uKHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyYXAtYXBwbGljYXRpb24tc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uQXBwbGljYXRpb24odGhpcy53aXJlLGUpfWFzeW5jIF9jcmVhdGUoZSl7cmV0dXJuIHZvaWQgMD09PWUud2FpdEZvclBhZ2VMb2FkJiYoZS53YWl0Rm9yUGFnZUxvYWQ9ITEpLHZvaWQgMD09PWUuYXV0b1Nob3cmJnZvaWQgMD09PWUuaXNQbGF0Zm9ybUNvbnRyb2xsZXImJihlLmF1dG9TaG93PSEwKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS1hcHBsaWNhdGlvblwiLGUpLHRoaXMud3JhcCh7dXVpZDplLnV1aWR9KX1jcmVhdGUoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGVcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy5fY3JlYXRlKGUpfWFzeW5jIHN0YXJ0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic3RhcnQtYXBwbGljYXRpb25cIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLl9jcmVhdGUoZSk7cmV0dXJuIGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse3V1aWQ6ZS51dWlkfSksdH1hc3luYyBzdGFydE1hbnlNYW5pZmVzdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uc1wiLHthcHBsaWNhdGlvbnM6ZX0pLnRoZW4oKCgpPT57fSkpfWdldEN1cnJlbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY3VycmVudC1hcHBsaWNhdGlvblwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXAoe3V1aWQ6dGhpcy53aXJlLm1lLnV1aWR9KX1nZXRDdXJyZW50U3luYygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LWFwcGxpY2F0aW9uLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy53cmFwU3luYyh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWFzeW5jIHN0YXJ0RnJvbU1hbmlmZXN0KGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1zdGFydC1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5fY3JlYXRlRnJvbU1hbmlmZXN0KGUpO3JldHVybiBhd2FpdCBuLl9ydW4odCksbn1jcmVhdGVGcm9tTWFuaWZlc3QoZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IGZpbi5BcHBsaWNhdGlvbi5jcmVhdGVGcm9tTWFuaWZlc3QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3RcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jcmVhdGUtZnJvbS1tYW5pZmVzdFwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSl9X2NyZWF0ZUZyb21NYW5pZmVzdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9Pntjb25zdCB0PWUuZGF0YS5wbGF0Zm9ybT9lLmRhdGEucGxhdGZvcm0udXVpZDplLmRhdGEuc3RhcnR1cF9hcHAudXVpZDtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOnR9KX0pKS50aGVuKCh0PT4odC5fbWFuaWZlc3RVcmw9ZSx0KSkpfX10LmRlZmF1bHQ9c30sNDc5NDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5BcHBsaWNhdGlvbj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk3KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLFwiYXBwbGljYXRpb25cIix0LnV1aWQpLHRoaXMuaWRlbnRpdHk9dCx0aGlzLndpbmRvdz1uZXcgci5fV2luZG93KHRoaXMud2lyZSx7dXVpZDp0aGlzLmlkZW50aXR5LnV1aWQsbmFtZTp0aGlzLmlkZW50aXR5LnV1aWR9KX13aW5kb3dMaXN0RnJvbUlkZW50aXR5TGlzdChlKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2goKGU9Pnt0LnB1c2gobmV3IHIuX1dpbmRvdyh0aGlzLndpcmUse3V1aWQ6ZS51dWlkLG5hbWU6ZS5uYW1lfSkpfSkpLHR9aXNSdW5uaW5nKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaXMtYXBwbGljYXRpb24tcnVubmluZ1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIHF1aXQoZT0hMSl7YXdhaXQgdGhpcy5fY2xvc2UoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkZXN0cm95LWFwcGxpY2F0aW9uXCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pfV9jbG9zZShlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS1hcHBsaWNhdGlvblwiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1jbG9zZShlPSExKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogQXBwbGljYXRpb24uY2xvc2UgaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIEFwcGxpY2F0aW9uLnF1aXRcIiksdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1jbG9zZVwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX2Nsb3NlKGUpfWdldENoaWxkV2luZG93cygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jaGlsZC13aW5kb3dzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+e2NvbnN0IHQ9W107cmV0dXJuIGUuZGF0YS5mb3JFYWNoKChlPT57dC5wdXNoKHt1dWlkOnRoaXMuaWRlbnRpdHkudXVpZCxuYW1lOmV9KX0pKSx0aGlzLndpbmRvd0xpc3RGcm9tSWRlbnRpdHlMaXN0KHQpfSkpfWdldE1hbmlmZXN0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLW1hbmlmZXN0XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50VXVpZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRTaG9ydGN1dHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc2hvcnRjdXRzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0Vmlld3MoKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXZpZXdzXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGUuZGF0YS5tYXAoKGU9Pm5ldyBvLlZpZXcodGhpcy53aXJlLGUpKSl9Z2V0Wm9vbUxldmVsKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFwcGxpY2F0aW9uLXpvb20tbGV2ZWxcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1nZXQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKHRoaXMud2luZG93KX1yZWdpc3RlclVzZXIoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWdpc3Rlci11c2VyXCIse3VzZXJOYW1lOmUsYXBwTmFtZTp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZW1vdmVUcmF5SWNvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlbW92ZS10cmF5LWljb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1yZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzdGFydC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXJ1bigpe3JldHVybiBjb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiBXYXJuaW5nOiBBcHBsaWNhdGlvbi5ydW4gaXMgZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGZpbi5BcHBsaWNhdGlvbi5zdGFydFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLXJ1blwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMuX3J1bigpfV9ydW4oZT17fSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLWFwcGxpY2F0aW9uXCIse21hbmlmZXN0VXJsOnRoaXMuX21hbmlmZXN0VXJsLG9wdHM6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9c2NoZWR1bGVSZXN0YXJ0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVsYXVuY2gtb24tY2xvc2VcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZW5kQXBwbGljYXRpb25Mb2coKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1hcHBsaWNhdGlvbi1sb2dcIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZS5kYXRhfWFzeW5jIHNldEp1bXBMaXN0KGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWp1bXAtbGlzdFwiLHtjb25maWc6ZSwuLi50aGlzLmlkZW50aXR5fSl9c2V0VHJheUljb24oZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXRyYXktaWNvblwiLHtlbmFibGVkSWNvbjplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zZXRTaG9ydGN1dHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXNob3J0Y3V0c1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNldFNob3J0Y3V0UXVlcnlQYXJhbXMoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtc2hvcnRjdXQtcXVlcnktYXJnc1wiLHtkYXRhOmUsLi4udGhpcy5pZGVudGl0eX0pfXNldFpvb21MZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtYXBwbGljYXRpb24tem9vbS1sZXZlbFwiLHtsZXZlbDplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBzZXRBcHBMb2dVc2VybmFtZShlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1hcHAtbG9nLXVzZXJuYW1lXCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSl9Z2V0VHJheUljb25JbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXRyYXktaWNvbi1pbmZvXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9dGVybWluYXRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidGVybWluYXRlLWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9d2FpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndhaXQtZm9yLWh1bmctYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1nZXRJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRQcm9jZXNzSW5mbygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tZ2V0LXByb2Nlc3MtaW5mb1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlfWFzeW5jIHNldEZpbGVEb3dubG9hZExvY2F0aW9uKGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWZpbGUtZG93bmxvYWQtbG9jYXRpb25cIix7ZG93bmxvYWRMb2NhdGlvbjplLC4uLnRoaXMuaWRlbnRpdHl9KX19dC5BcHBsaWNhdGlvbj1zfSw3MjY0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMzg4NSk7cihuKDQ3OTQpLHQpLHQuZGVmYXVsdD1vLmRlZmF1bHR9LDk2NTk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUmVwbHk9dC5FbWl0dGVyQmFzZT10LkJhc2U9dm9pZCAwO2NvbnN0IHM9bigzNDQyKSxhPW4oODA2OCk7Y2xhc3MgY3tjb25zdHJ1Y3RvcihlKXt0aGlzLmlzTm9kZUVudmlyb25tZW50PSgpPT5cIk5vZGVFbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUsdGhpcy5pc09wZW5GaW5FbnZpcm9ubWVudD0oKT0+XCJPcGVuRmluRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lLHRoaXMud2lyZT1lfWdldCBmaW4oKXtyZXR1cm4gYS5nZXRGaW4odGhpcy53aXJlKX1nZXQgbWUoKXtyZXR1cm4gdGhpcy53aXJlLm1lfX10LkJhc2U9Yyx0LkVtaXR0ZXJCYXNlPWNsYXNzIGV4dGVuZHMgY3tjb25zdHJ1Y3RvcihlLHQsLi4ubil7c3VwZXIoZSksdGhpcy50b3BpYz10LGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmV2ZW50TmFtZXM9KCk9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkuZXZlbnROYW1lcygpOltdLHRoaXMuZW1pdD0oZSx0LC4uLm4pPT4hIXRoaXMuaGFzRW1pdHRlcigpJiZ0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmVtaXQoZSx0LC4uLm4pLHRoaXMuaGFzRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5oYXMobyh0aGlzLGkpKSx0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcj0oKT0+dGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5nZXRPckNyZWF0ZShvKHRoaXMsaSkpLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdLHRoaXMubGlzdGVuZXJDb3VudD1lPT50aGlzLmhhc0VtaXR0ZXIoKT90aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmxpc3RlbmVyQ291bnQoZSk6MCx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30sbixpKT0+e2NvbnN0IHI9ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfSxvPXRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCk7bihvKTt0cnl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdWJzY3JpYmUtdG8tZGVza3RvcC1ldmVudFwiLHIpfWNhdGNoKGUpe3Rocm93IGkobyksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChvKSxlfX0sdGhpcy5kZXJlZ2lzdGVyRXZlbnRMaXN0ZW5lcj1hc3luYyhlLHQ9e30pPT57aWYodGhpcy5oYXNFbWl0dGVyKCkpe2NvbnN0IG49ey4uLnRoaXMuaWRlbnRpdHksdGltZXN0YW1wOnQudGltZXN0YW1wfHxEYXRlLm5vdygpLHRvcGljOnRoaXMudG9waWMsdHlwZTplfTtyZXR1cm4gYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZS10by1kZXNrdG9wLWV2ZW50XCIsbikuY2F0Y2goKCgpPT5udWxsKSksdGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9LHRoaXMub249YXN5bmMoZSx0LG4pPT4oYXdhaXQgdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoZSxuLChuPT57bi5vbihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5hZGRMaXN0ZW5lcj10aGlzLm9uLHRoaXMub25jZT1hc3luYyhlLHQsbik9Pntjb25zdCBpPSgpPT50aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUpO3JldHVybiBhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLm9uY2UoZSxpKSxuLm9uY2UoZSx0KX0pLChuPT57bi5yZW1vdmVMaXN0ZW5lcihlLGkpLG4ucmVtb3ZlTGlzdGVuZXIoZSx0KX0pKSx0aGlzfSx0aGlzLnByZXBlbmRMaXN0ZW5lcj1hc3luYyhlLHQsbik9Pihhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLnByZXBlbmRMaXN0ZW5lcihlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCl9KSksdGhpcyksdGhpcy5wcmVwZW5kT25jZUxpc3RlbmVyPWFzeW5jKGUsdCxuKT0+e2NvbnN0IGk9KCk9PnRoaXMuZGVyZWdpc3RlckV2ZW50TGlzdGVuZXIoZSk7cmV0dXJuIGF3YWl0IHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbiwobj0+e24ucHJlcGVuZE9uY2VMaXN0ZW5lcihlLHQpLG4ub25jZShlLGkpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsdCksbi5yZW1vdmVMaXN0ZW5lcihlLGkpfSkpLHRoaXN9LHRoaXMucmVtb3ZlTGlzdGVuZXI9YXN5bmMoZSx0LG4pPT57Y29uc3QgaT1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbik7cmV0dXJuIGkmJihpLnJlbW92ZUxpc3RlbmVyKGUsdCksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZChpKSksdGhpc30sdGhpcy5kZXJlZ2lzdGVyQWxsTGlzdGVuZXJzPWFzeW5jIGU9Pntjb25zdCB0PXsuLi50aGlzLmlkZW50aXR5LHR5cGU6ZSx0b3BpYzp0aGlzLnRvcGljfTtpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLG49ZS5saXN0ZW5lckNvdW50KHQudHlwZSksaT1bXTtmb3IobGV0IGU9MDtlPG47ZSsrKWkucHVzaCh0aGlzLndpcmUuc2VuZEFjdGlvbihcInVuc3Vic2NyaWJlLXRvLWRlc2t0b3AtZXZlbnRcIix0KS5jYXRjaCgoKCk9Pm51bGwpKSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKGkpLGV9fSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycz1hc3luYyBlPT57Y29uc3QgdD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCB0aGlzLmRlcmVnaXN0ZXJBbGxMaXN0ZW5lcnMoZSk7dCYmKHQucmVtb3ZlQWxsTGlzdGVuZXJzKGUpLHRoaXMuZGVsZXRlRW1pdHRlcklmTm90aGluZ1JlZ2lzdGVyZWQodCkpfTtpZihlKWF3YWl0IHQoZSk7ZWxzZSBpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3QgZT10aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpLmV2ZW50TmFtZXMoKTthd2FpdCBzLnByb21pc2VNYXAoZSx0KX1yZXR1cm4gdGhpc30scih0aGlzLGksW3QsLi4ubl0pLHRoaXMubGlzdGVuZXJzPWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJzKGUpOltdfWRlbGV0ZUVtaXR0ZXJJZk5vdGhpbmdSZWdpc3RlcmVkKGUpezA9PT1lLmV2ZW50TmFtZXMoKS5sZW5ndGgmJnRoaXMud2lyZS5ldmVudEFnZ3JlZ2F0b3IuZGVsZXRlKG8odGhpcyxpKSl9fSxpPW5ldyBXZWFrTWFwLHQuUmVwbHk9Y2xhc3N7fX0sMzQyNzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkJhc2V7d3JpdGVUZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZS10ZXh0XCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXJlYWQtdGV4dFwiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXdyaXRlSHRtbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtaHRtbFwiLGUpLnRoZW4oKCgpPT57fSkpfXJlYWRIdG1sKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWh0bWxcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZVJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGUtcnRmXCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZFJ0ZihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtcmVhZC1ydGZcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX13cml0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtd3JpdGVcIixlKS50aGVuKCgoKT0+e30pKX1nZXRBdmFpbGFibGVGb3JtYXRzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLWZvcm1hdHNcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX19dC5kZWZhdWx0PXJ9LDc4MTM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRW1pdHRlck1hcD12b2lkIDA7Y29uc3QgaT1uKDY0NjUpO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIEJ1ZmZlci5mcm9tKGUpLnRvU3RyaW5nKFwiYmFzZTY0XCIpfXQuRW1pdHRlck1hcD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuc3RvcmFnZT1uZXcgTWFwfWhhc2hLZXlzKGUpe3JldHVybiBlLm1hcChyKS5qb2luKFwiL1wiKX1nZXRPckNyZWF0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5oYXModCl8fHRoaXMuc3RvcmFnZS5zZXQodCxuZXcgaS5FdmVudEVtaXR0ZXIpLHRoaXMuc3RvcmFnZS5nZXQodCl9aGFzKGUpe3JldHVybiB0aGlzLnN0b3JhZ2UuaGFzKHRoaXMuaGFzaEtleXMoZSkpfWRlbGV0ZShlKXtjb25zdCB0PXRoaXMuaGFzaEtleXMoZSk7cmV0dXJuIHRoaXMuc3RvcmFnZS5kZWxldGUodCl9fX0sMjczNDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDc4MTMpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJNYXB7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuZGlzcGF0Y2hFdmVudD1lPT57aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJwcm9jZXNzLWRlc2t0b3AtZXZlbnRcIj09PWUuYWN0aW9ufShlKSl7Y29uc3R7cGF5bG9hZDp0fT1lLG49ZnVuY3Rpb24oZSl7Y29uc3R7dG9waWM6dH09ZTtpZihcImZyYW1lXCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19aWYoXCJ3aW5kb3dcIj09PXQpe2NvbnN0e3V1aWQ6bixuYW1lOml9PWU7cmV0dXJuW3QsbixpXX1pZihcImFwcGxpY2F0aW9uXCI9PT10KXtjb25zdHt1dWlkOm59PWU7cmV0dXJuW3Qsbl19aWYoXCJ2aWV3XCI9PT10KXtjb25zdHt1dWlkOm4sbmFtZTppfT1lO3JldHVyblt0LG4saV19cmV0dXJuW3RdfSh0KTtpZih0aGlzLmhhcyhuKSlyZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShuKS5lbWl0KHQudHlwZSx0KSwhMH1yZXR1cm4hMX19fXQuZGVmYXVsdD1yfSw3MTY4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDgyOTgpO2NsYXNzIG8gZXh0ZW5kcyBpLkJhc2V7d3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleHRlcm5hbC1hcHBsaWNhdGlvbi13cmFwXCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSkpfXdyYXBTeW5jKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4dGVybmFsLWFwcGxpY2F0aW9uLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgci5FeHRlcm5hbEFwcGxpY2F0aW9uKHRoaXMud2lyZSx7dXVpZDplfSl9fXQuZGVmYXVsdD1vfSw4Mjk4OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkV4dGVybmFsQXBwbGljYXRpb249dm9pZCAwO2NvbnN0IGk9big5NjU5KTtjbGFzcyByIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsXCJleHRlcm5hbC1hcHBsaWNhdGlvblwiLHQudXVpZCksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZXh0ZXJuYWwtYXBwbGljYXRpb24taW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfX10LkV4dGVybmFsQXBwbGljYXRpb249cn0sOTAyMTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDcxNjgpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDgyOTgpLHQpfSw2NTQ1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oNjQ2NSkscj1uKDM2NDEpLG89big0OTk3KSxzPW4oNzI2NCksYT1uKDgzNDcpLGM9bigzNDI3KSxkPW4oOTAyMSksaD1uKDY3MjApLGw9big5MjExKSx1PW4oNDE2OSkscD1uKDYwOSksdz1uKDk2NDEpLHk9big4MDY4KSxmPW4oODcwNiksZz1uKDcxNTMpO2NsYXNzIG0gZXh0ZW5kcyBpLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHkucmVnaXN0ZXJGaW4oZSx0aGlzKSx0aGlzLndpcmU9ZSx0aGlzLlN5c3RlbT1uZXcgci5kZWZhdWx0KGUpLHRoaXMuV2luZG93PW5ldyBvLmRlZmF1bHQoZSksdGhpcy5BcHBsaWNhdGlvbj1uZXcgcy5kZWZhdWx0KGUpLHRoaXMuSW50ZXJBcHBsaWNhdGlvbkJ1cz1uZXcgYS5kZWZhdWx0KGUpLHRoaXMuQ2xpcGJvYXJkPW5ldyBjLmRlZmF1bHQoZSksdGhpcy5FeHRlcm5hbEFwcGxpY2F0aW9uPW5ldyBkLmRlZmF1bHQoZSksdGhpcy5GcmFtZT1uZXcgaC5kZWZhdWx0KGUpLHRoaXMuR2xvYmFsSG90a2V5PW5ldyBsLmRlZmF1bHQoZSksdGhpcy5QbGF0Zm9ybT1uZXcgcC5kZWZhdWx0KGUsdGhpcy5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwpLHRoaXMuVmlldz1uZXcgdS5kZWZhdWx0KGUpLHRoaXMuSW50ZXJvcD1uZXcgZi5kZWZhdWx0KGUpLHRoaXMuU25hcHNob3RTb3VyY2U9bmV3IGcuZGVmYXVsdChlKSx0aGlzLm1lPXcuZ2V0TWUoZSksZS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e3RoaXMuZW1pdChcImRpc2Nvbm5lY3RlZFwiKX0pKX19dC5kZWZhdWx0PW19LDE3Nzg6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDgxNjEpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9d3JhcFN5bmMoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmcmFtZS13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsZSl9Z2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSkpfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZnJhbWUtZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgby5fRnJhbWUodGhpcy53aXJlLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKSl9fXQuZGVmYXVsdD1zfSw4MTYxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Ll9GcmFtZT12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSxcImZyYW1lXCIsdC51dWlkLHQubmFtZSksdGhpcy5pZGVudGl0eT10fWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZnJhbWUtaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFBhcmVudFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wYXJlbnQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9fXQuX0ZyYW1lPXJ9LDY3MjA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigxNzc4KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig4MTYxKSx0KX0sOTIxMTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJnbG9iYWwtaG90a2V5XCIpfWFzeW5jIHJlZ2lzdGVyKGUsdCl7YXdhaXQgdGhpcy5vbihlLHQpLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1yZWdpc3RlclwiLHtob3RrZXk6ZX0pfWFzeW5jIHVucmVnaXN0ZXIoZSl7YXdhaXQgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZSksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnbG9iYWwtaG90a2V5LXVucmVnaXN0ZXJcIix7aG90a2V5OmV9KX1hc3luYyB1bnJlZ2lzdGVyQWxsKCl7YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5ldmVudE5hbWVzKCkuZmlsdGVyKChlPT4hKFwicmVnaXN0ZXJlZFwiPT09ZXx8XCJ1bnJlZ2lzdGVyZWRcIj09PWUpKSkubWFwKChlPT50aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKSkpKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdsb2JhbC1ob3RrZXktdW5yZWdpc3Rlci1hbGxcIix7fSl9YXN5bmMgaXNSZWdpc3RlcmVkKGUpe2NvbnN0e3BheWxvYWQ6e2RhdGE6dH19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS1pcy1yZWdpc3RlcmVkXCIse2hvdGtleTplfSk7cmV0dXJuIHR9fXQuZGVmYXVsdD1yfSw3NTM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5DaGFubmVsQmFzZT10LlByb3RlY3RlZEl0ZW1zPXZvaWQgMDtjb25zdCBuPWU9Pih0LG4saSk9Pntjb25zdCByPWUodCxuLGkpO3JldHVybiB2b2lkIDA9PT1yP246cn07dC5Qcm90ZWN0ZWRJdGVtcz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMucHJvdmlkZXJJZGVudGl0eT1lLHRoaXMud2lyZT10fX07Y2xhc3MgaXtjb25zdHJ1Y3Rvcigpe3RoaXMuc3Vic2NyaXB0aW9ucz1uZXcgTWFwfXN0YXRpYyBkZWZhdWx0QWN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihgTm8gYWN0aW9uIHJlZ2lzdGVyZWQgYXQgdGFyZ2V0IGZvciAke2V9YCl9YXN5bmMgcHJvY2Vzc0FjdGlvbihlLHQsbil7dHJ5e2NvbnN0IHI9dGhpcy5zdWJzY3JpcHRpb25zLmhhcyhlKT90aGlzLnN1YnNjcmlwdGlvbnMuZ2V0KGUpOih0LG4pPT57dmFyIHI7cmV0dXJuKG51bGwhPT0ocj10aGlzLmRlZmF1bHRBY3Rpb24pJiZ2b2lkIDAhPT1yP3I6aS5kZWZhdWx0QWN0aW9uKShlLHQsbil9LG89dGhpcy5wcmVBY3Rpb24/YXdhaXQgdGhpcy5wcmVBY3Rpb24oZSx0LG4pOnQscz1hd2FpdCByKG8sbik7cmV0dXJuIHRoaXMucG9zdEFjdGlvbj9hd2FpdCB0aGlzLnBvc3RBY3Rpb24oZSxzLG4pOnN9Y2F0Y2godCl7aWYodGhpcy5lcnJvck1pZGRsZXdhcmUpcmV0dXJuIHRoaXMuZXJyb3JNaWRkbGV3YXJlKGUsdCxuKTt0aHJvdyB0fX1iZWZvcmVBY3Rpb24oZSl7aWYodGhpcy5wcmVBY3Rpb24pdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSByZWdpc3RlcmVkIGJlZm9yZUFjdGlvbiBtaWRkbGV3YXJlXCIpO3RoaXMucHJlQWN0aW9uPW4oZSl9b25FcnJvcihlKXtpZih0aGlzLmVycm9yTWlkZGxld2FyZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgZXJyb3IgbWlkZGxld2FyZVwiKTt0aGlzLmVycm9yTWlkZGxld2FyZT1lfWFmdGVyQWN0aW9uKGUpe2lmKHRoaXMucG9zdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgYWZ0ZXJBY3Rpb24gbWlkZGxld2FyZVwiKTt0aGlzLnBvc3RBY3Rpb249bihlKX1yZW1vdmUoZSl7dGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShlKX1zZXREZWZhdWx0QWN0aW9uKGUpe2lmKHRoaXMuZGVmYXVsdEFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJkZWZhdWx0IGFjdGlvbiBjYW4gb25seSBiZSBzZXQgb25jZVwiKTt0aGlzLmRlZmF1bHRBY3Rpb249ZX1yZWdpc3RlcihlLHQpe2lmKHRoaXMuc3Vic2NyaXB0aW9ucy5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdWJzY3JpcHRpb24gYWxyZWFkeSByZWdpc3RlcmVkIGZvciBhY3Rpb246ICR7ZX0uIFVuc3Vic2NyaWJlIGJlZm9yZSBhZGRpbmcgbmV3IHN1YnNjcmlwdGlvbmApO3JldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMuc2V0KGUsdCksITB9fXQuQ2hhbm5lbEJhc2U9aX0sODM3ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LGE9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGM9big3NTM5KSxkPW5ldyBNYXA7Y2xhc3MgaCBleHRlbmRzIGMuQ2hhbm5lbEJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksaS5zZXQodGhpcyx2b2lkIDApLHIuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLnByb2Nlc3NBY3Rpb249KGUsdCxuKT0+c3VwZXIucHJvY2Vzc0FjdGlvbihlLHQsbiksby5zZXQodGhpcywoKCk9PntkLmRlbGV0ZSh0aGlzLmVuZHBvaW50SWQpLGEodGhpcyxyKS5jbG9zZSgpfSkpLHModGhpcyxpLG5ldyBjLlByb3RlY3RlZEl0ZW1zKGUsdCkpLHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSx0aGlzLmVuZHBvaW50SWQ9ZS5lbmRwb2ludElkLHModGhpcyxyLG4pLGQuc2V0KHRoaXMuZW5kcG9pbnRJZCx0aGlzKSxuLnJlY2VpdmUodGhpcy5wcm9jZXNzQWN0aW9uKX1zdGF0aWMgY2xvc2VDaGFubmVsQnlFbmRwb2ludElkKGUpe2NvbnN0IHQ9ZC5nZXQoZSk7dCYmYSh0LG8pLmNhbGwodCl9c3RhdGljIGhhbmRsZVByb3ZpZGVyRGlzY29ubmVjdChlLHQpe2UuZGlzY29ubmVjdExpc3RlbmVyKHQpLGEoZSxvKS5jYWxsKGUpfWdldCBwcm92aWRlcklkZW50aXR5KCl7cmV0dXJuIGEodGhpcyxpKS5wcm92aWRlcklkZW50aXR5fWFzeW5jIGRpc3BhdGNoKGUsdCl7aWYoYSh0aGlzLHIpLmlzRW5kcG9pbnRDb25uZWN0ZWQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCkpcmV0dXJuIGEodGhpcyxyKS5zZW5kKHRoaXMucHJvdmlkZXJJZGVudGl0eS5jaGFubmVsSWQsZSx0KTt0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2xpZW50IHlvdSBhcmUgdHJ5aW5nIHRvIGRpc3BhdGNoIGZyb20gaXMgZGlzY29ubmVjdGVkIGZyb20gdGhlIHRhcmdldCBwcm92aWRlci5cIil9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPXQ9Pnt0cnl7ZSh0KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHdoaWxlIGNhbGxpbmcgdGhlIG9uRGlzY29ubmVjdGlvbiBjYWxsYmFjazogJHtlLm1lc3NhZ2V9YCl9ZmluYWxseXt0aGlzLmRpc2Nvbm5lY3RMaXN0ZW5lcj0oKT0+e319fX1hc3luYyBkaXNjb25uZWN0KCl7Y29uc3QgZT1hKHRoaXMsaSkse2NoYW5uZWxOYW1lOnQsdXVpZDpuLG5hbWU6cn09ZS5wcm92aWRlcklkZW50aXR5O2F3YWl0IGUud2lyZS5zZW5kQWN0aW9uKFwiZGlzY29ubmVjdC1mcm9tLWNoYW5uZWxcIix7Y2hhbm5lbE5hbWU6dCx1dWlkOm4sbmFtZTpyLGVuZHBvaW50SWQ6dGhpcy5lbmRwb2ludElkfSksYSh0aGlzLG8pLmNhbGwodGhpcyl9fXQuZGVmYXVsdD1oLGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwfSw2NzExOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29ubmVjdGlvbk1hbmFnZXI9dm9pZCAwO2NvbnN0IGE9bigzOTE3KSxjPW4oOTY1OSksZD1uKDEwNDYpLGg9bigzODcwKSxsPW4oNTY5KSx1PW4oMjk0MikscD1uKDM3NDkpLHc9bigzMDM3KSx5PW4oNzExMyk7Y2xhc3MgZiBleHRlbmRzIGMuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcD1lPT57dGhpcy5wcm92aWRlck1hcC5kZWxldGUoZSl9LHRoaXMub25tZXNzYWdlPWU9PlwicHJvY2Vzcy1jaGFubmVsLWNvbm5lY3Rpb25cIj09PWUuYWN0aW9uJiYodGhpcy5wcm9jZXNzQ2hhbm5lbENvbm5lY3Rpb24oZSksITApLHRoaXMucHJvdmlkZXJNYXA9bmV3IE1hcCx0aGlzLnByb3RvY29sTWFuYWdlcj1uZXcgdy5Qcm90b2NvbE1hbmFnZXIodGhpcy5pc05vZGVFbnZpcm9ubWVudCgpP1tcImNsYXNzaWNcIl06W1wicnRjXCIsXCJjbGFzc2ljXCJdKSxvKHRoaXMsaSxuZXcgcC5NZXNzYWdlUmVjZWl2ZXIoZSkpLG8odGhpcyxyLG5ldyBsLlJUQ0lDRU1hbmFnZXIoZSkpLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKX1zdGF0aWMgZ2V0UHJvdG9jb2xPcHRpb25zRnJvbVN0cmluZ3MoZSl7cmV0dXJuIGUubWFwKChlPT57c3dpdGNoKGUpe2Nhc2VcInJ0Y1wiOnJldHVybiBoLlJUQ0luZm87Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBkLkNsYXNzaWNJbmZvO2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSl9Y3JlYXRlUHJvdmlkZXIoZSx0KXtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNyZWF0ZSxlfHx7fSkscj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRQcm92aWRlclByb3RvY29scyhudWxsPT1uP3ZvaWQgMDpuLnByb3RvY29scyksbz1yLm1hcCgoZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjpyZXR1cm4gbmV3IGguUlRDU3RyYXRlZ3k7Y2FzZVwiY2xhc3NpY1wiOnJldHVybiBuZXcgZC5DbGFzc2ljU3RyYXRlZ3kodGhpcy53aXJlLHModGhpcyxpKSx0LmNoYW5uZWxJZCx0KTtkZWZhdWx0OnJldHVybiBhLmV4aGF1c3RpdmVDaGVjayhlLFtcInJ0Y1wiLFwiY2xhc3NpY1wiXSl9fSkpO2xldCBjO2lmKDI9PT1vLmxlbmd0aCl7Y29uc3RbZSx0XT1vO2M9eS5kZWZhdWx0LmNvbWJpbmUoZSx0KX1lbHNle2lmKDEhPT1vLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gY29tYmluZSBzdHJhdGVnaWVzXCIpO1tjXT1vfWNvbnN0IGw9bmV3IHUuQ2hhbm5lbFByb3ZpZGVyKHQsdGhpcy53aXJlLGMpLHA9dC5jaGFubmVsSWQ7cmV0dXJuIHRoaXMucHJvdmlkZXJNYXAuc2V0KHAse3Byb3ZpZGVyOmwsc3RyYXRlZ3k6YyxzdXBwb3J0ZWRQcm90b2NvbHM6Zi5nZXRQcm90b2NvbE9wdGlvbnNGcm9tU3RyaW5ncyhyKX0pLHUuQ2hhbm5lbFByb3ZpZGVyLnNldFByb3ZpZGVyUmVtb3ZhbChsLHRoaXMucmVtb3ZlQ2hhbm5lbEZyb21Qcm92aWRlck1hcC5iaW5kKHRoaXMpKSxsfWFzeW5jIGNyZWF0ZUNsaWVudE9mZmVyKGUpe2NvbnN0IHQ9dGhpcy5wcm90b2NvbE1hbmFnZXIuZ2V0Q2xpZW50UHJvdG9jb2xzKG51bGw9PWU/dm9pZCAwOmUucHJvdG9jb2xzKTtsZXQgbjtyZXR1cm57b2ZmZXI6e3N1cHBvcnRlZFByb3RvY29sczphd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgZT0+e3N3aXRjaChlKXtjYXNlXCJydGNcIjp7Y29uc3R7cnRjQ2xpZW50OmUsY2hhbm5lbHM6dCxvZmZlcjppLHJ0Y0Nvbm5lY3Rpb25JZDpvLGNoYW5uZWxzT3BlbmVkOmF9PWF3YWl0IHModGhpcyxyKS5zdGFydENsaWVudE9mZmVyKCk7cmV0dXJuIG49e3J0Y0NsaWVudDplLGNoYW5uZWxzOnQsY2hhbm5lbHNPcGVuZWQ6YX0se3R5cGU6XCJydGNcIix2ZXJzaW9uOmguUlRDSW5mby52ZXJzaW9uLHBheWxvYWQ6e29mZmVyOmkscnRjQ29ubmVjdGlvbklkOm99fX1jYXNlXCJjbGFzc2ljXCI6cmV0dXJue3R5cGU6XCJjbGFzc2ljXCIsdmVyc2lvbjpkLkNsYXNzaWNJbmZvLnZlcnNpb259O2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSkpLG1heFByb3RvY29sczoyfSxydGM6bn19YXN5bmMgY3JlYXRlQ2xpZW50U3RyYXRlZ3koZSx0KXt2YXIgbjt0LmVuZHBvaW50SWR8fCh0LmVuZHBvaW50SWQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKSxzKHRoaXMsaSkuY2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24odC5jaGFubmVsSWQpKTtjb25zdCBvPW51bGwhPT0obj10LmFuc3dlcikmJnZvaWQgMCE9PW4/bjp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XX0sYT0oYXdhaXQgUHJvbWlzZS5hbGwoby5zdXBwb3J0ZWRQcm90b2NvbHMubWFwKChhc3luYyBuPT5cInJ0Y1wiPT09bi50eXBlJiZlPyhhd2FpdCBzKHRoaXMscikuZmluaXNoQ2xpZW50T2ZmZXIoZS5ydGNDbGllbnQsbi5wYXlsb2FkLmFuc3dlcixlLmNoYW5uZWxzT3BlbmVkKSxuZXcgaC5SVENTdHJhdGVneSk6XCJjbGFzc2ljXCI9PT1uLnR5cGU/bmV3IGQuQ2xhc3NpY1N0cmF0ZWd5KHRoaXMud2lyZSxzKHRoaXMsaSksdC5lbmRwb2ludElkLHQpOm51bGwpKSkpLmZpbHRlcigoZT0+bnVsbCE9PWUpKTtsZXQgYztpZihlJiYhYS5zb21lKChlPT5lIGluc3RhbmNlb2YgaC5SVENTdHJhdGVneSkpJiZlJiZlLnJ0Y0NsaWVudC5jbG9zZSgpLGEubGVuZ3RoPj0yKWM9eS5kZWZhdWx0LmNvbWJpbmUoYVswXSxhWzFdKTtlbHNle2lmKCFhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wYXRpYmxlIHByb3RvY29sc1wiKTtbY109YX1jb25zdCBsPXtlbmRwb2ludElkZW50aXR5OnQscnRjOmV9O3JldHVybiBjLmFkZEVuZHBvaW50KHQuY2hhbm5lbElkLGwpLGN9YXN5bmMgcHJvY2Vzc0NoYW5uZWxDb25uZWN0aW9uKGUpe2NvbnN0e2NsaWVudElkZW50aXR5OnQscHJvdmlkZXJJZGVudGl0eTpuLGFja1RvU2VuZGVyOmkscGF5bG9hZDpvLG9mZmVyOmF9PWUucGF5bG9hZDt0LmVuZHBvaW50SWQ/dC5pc0xvY2FsRW5kcG9pbnRJZD0hMToodC5lbmRwb2ludElkPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksdC5pc0xvY2FsRW5kcG9pbnRJZD0hMCk7Y29uc3QgYz1uLmNoYW5uZWxJZCxsPXRoaXMucHJvdmlkZXJNYXAuZ2V0KGMpO2lmKCFsKXJldHVybiBpLnBheWxvYWQuc3VjY2Vzcz0hMSxpLnBheWxvYWQucmVhc29uPWBDaGFubmVsIFwiJHtuLmNoYW5uZWxOYW1lfVwiIGhhcyBiZWVuIGRlc3Ryb3llZC5gLHRoaXMud2lyZS5zZW5kUmF3KGkpO2NvbnN0e3Byb3ZpZGVyOnAsc3RyYXRlZ3k6dyxzdXBwb3J0ZWRQcm90b2NvbHM6eX09bDt0cnl7aWYoIShwIGluc3RhbmNlb2YgdS5DaGFubmVsUHJvdmlkZXIpKXRocm93IEVycm9yKFwiQ2Fubm90IGNvbm5lY3QgdG8gYSBjaGFubmVsIGNsaWVudFwiKTtjb25zdCBlPW51bGwhPWE/YTp7c3VwcG9ydGVkUHJvdG9jb2xzOlt7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOjF9XSxtYXhQcm90b2NvbHM6MX0sbj10aGlzLnByb3RvY29sTWFuYWdlci5nZXRDb21wYXRpYmxlUHJvdG9jb2xzKHksZSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRoaXMgcHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBhbnkgb2YgdGhlIG9mZmVyZWQgcHJvdG9jb2xzLlwiKTtjb25zdCBjPWF3YWl0IHAucHJvY2Vzc0Nvbm5lY3Rpb24odCxvKTtpLnBheWxvYWQucGF5bG9hZD1pLnBheWxvYWQucGF5bG9hZHx8e307bGV0IGw9e3N1cHBvcnRlZFByb3RvY29sczpbXSxlbmRwb2ludFBheWxvYWRQcm9taXNlOlByb21pc2UucmVzb2x2ZSh7ZW5kcG9pbnRJZGVudGl0eTp0fSl9O3JldHVybiBsPWF3YWl0IG4ucmVkdWNlKChhc3luYyhlLHQpPT57Y29uc3Qgbj1hd2FpdCBlO2lmKFwicnRjXCI9PT10LnR5cGUpe2NvbnN0e2Fuc3dlcjplLHJ0Y0NsaWVudDppLGNoYW5uZWxzOm99PWF3YWl0IHModGhpcyxyKS5jcmVhdGVQcm92aWRlckFuc3dlcih0LnBheWxvYWQucnRjQ29ubmVjdGlvbklkLHQucGF5bG9hZC5vZmZlcik7bi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcInJ0Y1wiLHZlcnNpb246aC5SVENJbmZvLnZlcnNpb24scGF5bG9hZDp7YW5zd2VyOmV9fSksbi5lbmRwb2ludFBheWxvYWRQcm9taXNlPW4uZW5kcG9pbnRQYXlsb2FkUHJvbWlzZS50aGVuKChlPT5vLnRoZW4oKHQ9Pih7Li4uZSxydGM6e3J0Y0NsaWVudDppLGNoYW5uZWxzOnR9fSkpKSkpfWVsc2Ugbi5zdXBwb3J0ZWRQcm90b2NvbHMucHVzaCh7dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOmQuQ2xhc3NpY0luZm8udmVyc2lvbn0pO3JldHVybiBufSksUHJvbWlzZS5yZXNvbHZlKGwpKSxsLmVuZHBvaW50UGF5bG9hZFByb21pc2UudGhlbigoZT0+dy5hZGRFbmRwb2ludCh0LmVuZHBvaW50SWQsZSkpKSxpLnBheWxvYWQucGF5bG9hZC5yZXN1bHQ9YyxpLnBheWxvYWQucGF5bG9hZC5hbnN3ZXI9bCx0aGlzLndpcmUuc2VuZFJhdyhpKX1jYXRjaChlKXtyZXR1cm4gaS5wYXlsb2FkLnN1Y2Nlc3M9ITEsaS5wYXlsb2FkLnJlYXNvbj1lLm1lc3NhZ2UsdGhpcy53aXJlLnNlbmRSYXcoaSl9fX10LkNvbm5lY3Rpb25NYW5hZ2VyPWYsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3NzIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWw9dm9pZCAwO2NvbnN0IHM9big4Mzc4KSxhPW4oMjk0MiksYz1uKDk2NTkpLGQ9big2NzExKSxoPSgpPT57fTtjbGFzcyBsIGV4dGVuZHMgYy5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLFwiY2hhbm5lbFwiKSxpLnNldCh0aGlzLHZvaWQgMCkscih0aGlzLGksbmV3IGQuQ29ubmVjdGlvbk1hbmFnZXIoZSkpfWFzeW5jIGdldEFsbENoYW5uZWxzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1jaGFubmVsc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBvbkNoYW5uZWxDb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJjb25uZWN0ZWRcIixlKX1hc3luYyBvbkNoYW5uZWxEaXNjb25uZWN0KGUpe2F3YWl0IHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIixlKX1hc3luYyBjb25uZWN0KGUsdCl7aWYoIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGEgY2hhbm5lbE5hbWUgc3RyaW5nIHRvIGNvbm5lY3QgdG8gYSBjaGFubmVsLlwiKTtjb25zdCBuPU9iamVjdC5hc3NpZ24odGhpcy53aXJlLmVudmlyb25tZW50LmdldERlZmF1bHRDaGFubmVsT3B0aW9ucygpLmNvbm5lY3QsdHx8e30pO2xldCByPWgsYT1oO2NvbnN0IGM9bmV3IFByb21pc2UoKHQ9PntyPXQsYT1pPT57ZT09PWkuY2hhbm5lbE5hbWUmJih0aGlzLnJlbW92ZUxpc3RlbmVyKFwiY29ubmVjdGVkXCIsYSksdGhpcy5jb25uZWN0KGUsbikudGhlbigoZT0+e3QoZSl9KSkpfSx0aGlzLm9uKFwiY29ubmVjdGVkXCIsYSl9KSk7dHJ5e2NvbnN0e29mZmVyOnQscnRjOmN9PWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRPZmZlcihuKSxkPWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY29ubmVjdC10by1jaGFubmVsXCIse2NoYW5uZWxOYW1lOmUsLi4ubixvZmZlcjp0fSkse3BheWxvYWQ6e2RhdGE6aH19PWQ7ciYmcigpLHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixhKTtjb25zdCBsPWF3YWl0IG8odGhpcyxpKS5jcmVhdGVDbGllbnRTdHJhdGVneShjLGgpLHU9bmV3IHMuZGVmYXVsdChoLHRoaXMud2lyZSxsKTtyZXR1cm4gbC5vbkVuZHBvaW50RGlzY29ubmVjdChoLmNoYW5uZWxJZCwoYXN5bmMoKT0+e3RyeXthd2FpdCB1LmRpc2Nvbm5lY3QoKX1jYXRjaChlKXtjb25zb2xlLndhcm4oYFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBkaXNjb25uZWN0IGZvciBjbGllbnQgd2l0aCB1dWlkOiAke2gudXVpZH0gLyBuYW1lOiAke2gubmFtZX0gLyBlbmRwb2ludElkOiAke2guZW5kcG9pbnRJZH0uYCl9ZmluYWxseXtzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsaCl9fSkpLHRoaXMub24oXCJkaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZzLmRlZmF1bHQuaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KHUsdCl9KSksdX1jYXRjaCh0KXtjb25zdCBpPVwiaW50ZXJuYWwtbmFja1wiO2lmKHt3YWl0OiEwLC4uLm59LndhaXQmJnQubWVzc2FnZSYmdC5tZXNzYWdlLmluY2x1ZGVzKGkpKXJldHVybiBjb25zb2xlLndhcm4oYENoYW5uZWwgbm90IGZvdW5kIGZvciBjaGFubmVsTmFtZTogJHtlfSwgd2FpdGluZyBmb3IgY2hhbm5lbCBjb25uZWN0aW9uLmApLGM7dGhyb3cgdC5tZXNzYWdlPT09aT9uZXcgRXJyb3IoYE5vIGNoYW5uZWwgZm91bmQgZm9yIGNoYW5uZWxOYW1lOiAke2V9YCk6bmV3IEVycm9yKHQpfX1hc3luYyBjcmVhdGUoZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIGNoYW5uZWxOYW1lIHRvIGNyZWF0ZSBhIGNoYW5uZWxcIik7Y29uc3R7cGF5bG9hZDp7ZGF0YTpufX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtY2hhbm5lbFwiLHtjaGFubmVsTmFtZTplfSkscj1vKHRoaXMsaSkuY3JlYXRlUHJvdmlkZXIodCxuKTtyZXR1cm4gdGhpcy5vbihcImNsaWVudC1kaXNjb25uZWN0ZWRcIiwodD0+e3QuY2hhbm5lbE5hbWU9PT1lJiZhLkNoYW5uZWxQcm92aWRlci5oYW5kbGVDbGllbnREaXNjb25uZWN0aW9uKHIsdCl9KSkscn19dC5DaGFubmVsPWwsaT1uZXcgV2Vha01hcH0sMzc0OTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5NZXNzYWdlUmVjZWl2ZXI9dm9pZCAwO2NvbnN0IGk9big4Mzc4KSxyPW4oOTY1OSk7Y2xhc3MgbyBleHRlbmRzIHIuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm9ubWVzc2FnZT1lPT5cInByb2Nlc3MtY2hhbm5lbC1tZXNzYWdlXCI9PT1lLmFjdGlvbiYmKHRoaXMucHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpLCEwKSx0aGlzLmVuZHBvaW50TWFwPW5ldyBNYXAsdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQ9bmV3IE1hcCxlLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSl9YXN5bmMgcHJvY2Vzc0NoYW5uZWxNZXNzYWdlKGUpe3ZhciB0LG47Y29uc3R7c2VuZGVySWRlbnRpdHk6aSxwcm92aWRlcklkZW50aXR5OnIsYWN0aW9uOm8sYWNrVG9TZW5kZXI6cyxwYXlsb2FkOmEsaW50ZW5kZWRUYXJnZXRJZGVudGl0eTpjfT1lLnBheWxvYWQsZD1udWxsIT09KG49bnVsbCE9PSh0PWMuY2hhbm5lbElkKSYmdm9pZCAwIT09dD90OmMuZW5kcG9pbnRJZCkmJnZvaWQgMCE9PW4/bjp0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoci5jaGFubmVsSWQpLGg9dGhpcy5lbmRwb2ludE1hcC5nZXQoZCk7aWYoIWgpcmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249YENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHt0aGlzLndpcmUubWUudXVpZH0gLyBuYW1lOiAke3RoaXMud2lyZS5tZS5uYW1lfSAvIGVuZHBvaW50SWQ6ICR7ZH0gbm8gbG9uZ2VyIGNvbm5lY3RlZC5gLHRoaXMud2lyZS5zZW5kUmF3KHMpO3RyeXtjb25zdCBlPWF3YWl0IGgobyxhLGkpO3JldHVybiBzLnBheWxvYWQucGF5bG9hZD1zLnBheWxvYWQucGF5bG9hZHx8e30scy5wYXlsb2FkLnBheWxvYWQucmVzdWx0PWUsdGhpcy53aXJlLnNlbmRSYXcocyl9Y2F0Y2goZSl7cmV0dXJuIHMucGF5bG9hZC5zdWNjZXNzPSExLHMucGF5bG9hZC5yZWFzb249ZS5tZXNzYWdlLHRoaXMud2lyZS5zZW5kUmF3KHMpfX1hZGRFbmRwb2ludChlLHQsbil7dGhpcy5lbmRwb2ludE1hcC5zZXQobixlKSx0IT09biYmdGhpcy5sYXRlc3RFbmRwb2ludElkQnlDaGFubmVsSWQuc2V0KHQsbil9cmVtb3ZlRW5kcG9pbnQoZSx0KXt0aGlzLmVuZHBvaW50TWFwLmRlbGV0ZSh0KSx0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk9PT10JiZ0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5kZWxldGUoZSl9Y2hlY2tGb3JQcmV2aW91c0NsaWVudENvbm5lY3Rpb24oZSl7Y29uc3QgdD10aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5nZXQoZSk7dCYmKGkuZGVmYXVsdC5jbG9zZUNoYW5uZWxCeUVuZHBvaW50SWQodCksY29uc29sZS53YXJuKFwiWW91IGhhdmUgY3JlYXRlZCBhIHNlY29uZCBjb25uZWN0aW9uIHRvIGFuIG9sZGVyIHByb3ZpZGVyLiBGaXJzdCBjb25uZWN0aW9uIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgY2xpZW50TWFwXCIpLGNvbnNvbGUud2FybihcIklmIHRoZSBwcm92aWRlciBjYWxscyBwdWJsaXNoKCksIHlvdSBtYXkgcmVjZWl2ZSBtdWx0aXBsZSBtZXNzYWdlcy5cIikpfX10Lk1lc3NhZ2VSZWNlaXZlcj1vfSwxMDQ2OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNsYXNzaWNJbmZvPXQuQ2xhc3NpY1N0cmF0ZWd5PXZvaWQgMCx0LkNsYXNzaWNTdHJhdGVneT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQscyxhKXt0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LHRoaXMuZW5kcG9pbnRJZD1zLHRoaXMucHJvdmlkZXJJZGVudGl0eT1hLG4uc2V0KHRoaXMsdm9pZCAwKSxpLnNldCh0aGlzLG5ldyBNYXApLHRoaXMuc2VuZD1hc3luYyhlLHQscik9Pntjb25zdCBzPW8odGhpcyxpKS5nZXQoZSk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9jYXRlIHJvdXRpbmcgaW5mbyBmb3IgZW5kcG9pbnQgJHtlfWApO2NvbnN0IGE9ey4uLnN9O3JldHVybiBhLmlzTG9jYWxFbmRwb2ludElkJiZkZWxldGUgYS5lbmRwb2ludElkLGRlbGV0ZSBhLmlzTG9jYWxFbmRwb2ludElkLChhd2FpdCBvKHRoaXMsbikuc2VuZEFjdGlvbihcInNlbmQtY2hhbm5lbC1tZXNzYWdlXCIsey4uLmEscHJvdmlkZXJJZGVudGl0eTp0aGlzLnByb3ZpZGVySWRlbnRpdHksYWN0aW9uOnQscGF5bG9hZDpyfSkuY2F0Y2goKGU9Pnt0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKX0pKSkucGF5bG9hZC5kYXRhLnJlc3VsdH0sdGhpcy5jbG9zZT1hc3luYygpPT57dGhpcy5tZXNzYWdlUmVjZWl2ZXIucmVtb3ZlRW5kcG9pbnQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpLHIodGhpcyxpLG5ldyBNYXApfSxyKHRoaXMsbixlKX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe31yZWNlaXZlKGUpe3RoaXMubWVzc2FnZVJlY2VpdmVyLmFkZEVuZHBvaW50KGUsdGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCx0aGlzLmVuZHBvaW50SWQpfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7byh0aGlzLGkpLmRlbGV0ZShlKX1pc0VuZHBvaW50Q29ubmVjdGVkKGUpe3JldHVybiBvKHRoaXMsaSkuaGFzKGUpfWFkZEVuZHBvaW50KGUsdCl7byh0aGlzLGkpLnNldChlLHQuZW5kcG9pbnRJZGVudGl0eSl9aXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXt2YXIgdCxuO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludElkZW50aXR5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5lbmRwb2ludElkKXx8XCJzdHJpbmdcIj09dHlwZW9mKG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50SWRlbnRpdHkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNoYW5uZWxJZCl9fSxuPW5ldyBXZWFrTWFwLGk9bmV3IFdlYWtNYXAsdC5DbGFzc2ljSW5mbz17dmVyc2lvbjo1LG1pbmltdW1WZXJzaW9uOjAsdHlwZTpcImNsYXNzaWNcIn19LDcxMTM6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjbGFzcyBue2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcmltYXJ5PWUsdGhpcy5zZWNvbmRhcnk9dH1zdGF0aWMgY29tYmluZShlLHQpe3JldHVybiBuZXcgbihlLHQpfW9uRW5kcG9pbnREaXNjb25uZWN0KGUsdCl7dGhpcy5wcmltYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5zZWNvbmRhcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKXx8dCgpfSkpLHRoaXMuc2Vjb25kYXJ5Lm9uRW5kcG9pbnREaXNjb25uZWN0KGUsKCgpPT57dGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHQoKX0pKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe3JldHVybiB0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKXx8dGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZChlKX1hc3luYyBjbG9zZUVuZHBvaW50KGUpe2F3YWl0IHRoaXMucHJpbWFyeS5jbG9zZUVuZHBvaW50KGUpLGF3YWl0IHRoaXMuc2Vjb25kYXJ5LmNsb3NlRW5kcG9pbnQoZSl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gdGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl8fHRoaXMuc2Vjb25kYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSl9YXN5bmMgYWRkRW5kcG9pbnQoZSx0KXt0aGlzLnByaW1hcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5wcmltYXJ5LmFkZEVuZHBvaW50KGUsdCksdGhpcy5zZWNvbmRhcnkuaXNWYWxpZEVuZHBvaW50UGF5bG9hZCh0KSYmYXdhaXQgdGhpcy5zZWNvbmRhcnkuYWRkRW5kcG9pbnQoZSx0KX1yZWNlaXZlKGUpe3RoaXMucHJpbWFyeS5yZWNlaXZlKGUpLHRoaXMuc2Vjb25kYXJ5LnJlY2VpdmUoZSl9c2VuZChlLHQsbil7cmV0dXJuIHRoaXMucHJpbWFyeS5pc0VuZHBvaW50Q29ubmVjdGVkKGUpP3RoaXMucHJpbWFyeS5zZW5kKGUsdCxuKTp0aGlzLnNlY29uZGFyeS5zZW5kKGUsdCxuKX1hc3luYyBjbG9zZSgpe2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLnByaW1hcnkuY2xvc2UoKSx0aGlzLnNlY29uZGFyeS5jbG9zZSgpXSl9fXQuZGVmYXVsdD1ufSwzMDM3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Qcm90b2NvbE1hbmFnZXI9dm9pZCAwLHQuUHJvdG9jb2xNYW5hZ2VyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXI9ZSx0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM9W1wiY2xhc3NpY1wiXSx0aGlzLkRlZmF1bHRQcm92aWRlclByb3RvY29scz1bXCJjbGFzc2ljXCJdLHRoaXMuZ2V0Q2xpZW50UHJvdG9jb2xzPWU9Pntjb25zdCB0PWU/dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5maWx0ZXIoKHQ9PmUuaW5jbHVkZXModCkpKTp0aGlzLkRlZmF1bHRDbGllbnRQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRQcm92aWRlclByb3RvY29scz1lPT57Y29uc3QgdD1lP3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuZmlsdGVyKCh0PT5lLmluY2x1ZGVzKHQpKSk6dGhpcy5EZWZhdWx0UHJvdmlkZXJQcm90b2NvbHM7aWYoIXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgTm8gdmFsaWQgcHJvdG9jb2xzIHdlcmUgcGFzc2VkIGluLiBBY2NlcHRlZCB2YWx1ZXMgYXJlOiAke3RoaXMuUHJvdG9jb2xzSW5QcmVmZXJlbmNlT3JkZXIuam9pbihcIiwgXCIpfS5gKTtyZXR1cm4gdH0sdGhpcy5nZXRDb21wYXRpYmxlUHJvdG9jb2xzPShlLHQpPT50LnN1cHBvcnRlZFByb3RvY29scy5maWx0ZXIoKHQ9PmUuc29tZSgoZT0+e3ZhciBuO3JldHVybiBlLnR5cGU9PT10LnR5cGUmJnQudmVyc2lvbj49ZS5taW5pbXVtVmVyc2lvbiYmZS52ZXJzaW9uPj0obnVsbCE9PShuPXQubWluaW11bVZlcnNpb24pJiZ2b2lkIDAhPT1uP246MCl9KSkpKS5zbGljZSgwLHQubWF4UHJvdG9jb2xzKX19fSw4Nzc2OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDRW5kcG9pbnQ9dm9pZCAwO2NvbnN0IGE9bigyMzY2KTt0LlJUQ0VuZHBvaW50PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5ydGM9ZSx0aGlzLmVuZHBvaW50SWRlbnRpdHk9dCx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsaS5zZXQodGhpcyxudWxsKSxyLnNldCh0aGlzLHZvaWQgMCksdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyPWU9PntcImNvbm5lY3RlZFwiIT09dGhpcy5ydGMucnRjQ2xpZW50LmNvbm5lY3Rpb25TdGF0ZSYmKHRoaXMucnRjLnJ0Y0NsaWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyKSx0aGlzLmNsb3NlKCksbyh0aGlzLHIpJiZvKHRoaXMscikuY2FsbCh0aGlzKSl9LHRoaXMuc2VuZD1hc3luYyhlLHQpPT57Y29uc3Qgbj1gbWVzc2FnZS0ke01hdGgucmFuZG9tKCl9YCxpPW5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMucmVzcG9uc2VNYXAuc2V0KG4se3Jlc29sdmU6ZSxyZWplY3Q6dH0pfSkpO3JldHVybiB0aGlzLnJ0Yy5jaGFubmVscy5yZXF1ZXN0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbjplLHBheWxvYWQ6dCxtZXNzYWdlSWQ6bn0pKSxpfSx0aGlzLmNsb3NlPSgpPT57dGhpcy5yZXNwb25zZU1hcC5mb3JFYWNoKChlPT5lLnJlamVjdChcIkNvbm5lY3Rpb24gaGFzIGNsb3NlZC5cIikpKSx0aGlzLnJlc3BvbnNlTWFwPW5ldyBNYXAsdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5jbG9zZSgpLHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmNsb3NlKCksdGhpcy5ydGMucnRjQ2xpZW50LmNsb3NlKCl9LHRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGU9Pnt2YXIgdDtjb25zdHttZXNzYWdlSWQ6bixwYXlsb2FkOmksc3VjY2VzczpyLGVycm9yOm99PUpTT04ucGFyc2UoZS5kYXRhKSx7cmVzb2x2ZTpzLHJlamVjdDphfT1udWxsIT09KHQ9dGhpcy5yZXNwb25zZU1hcC5nZXQobikpJiZ2b2lkIDAhPT10P3Q6e307cyYmYT8odGhpcy5yZXNwb25zZU1hcC5kZWxldGUobikscj9zKGkpOmEobykpOihjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCBmaW5kIGlkIGluIHJlc3BvbnNlTWFwLlwiKSxjb25zb2xlLmxvZyhlKSl9KSksdGhpcy5ydGMuY2hhbm5lbHMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLChhc3luYyBlPT57Y29uc3R7bWVzc2FnZUlkOm4sYWN0aW9uOnIscGF5bG9hZDpzfT1KU09OLnBhcnNlKGUuZGF0YSk7aWYobyh0aGlzLGkpKXRyeXtjb25zdCBlPWF3YWl0IG8odGhpcyxpKS5jYWxsKHRoaXMscixzLHQpO3RoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHBheWxvYWQ6ZSxzdWNjZXNzOiEwfSkpfWNhdGNoKGUpe1wib3BlblwiPT09dGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UucmVhZHlTdGF0ZSYmdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2Uuc2VuZChKU09OLnN0cmluZ2lmeSh7bWVzc2FnZUlkOm4sZXJyb3I6YS5lcnJvclRvUE9KTyhlKSxzdWNjZXNzOiExfSkpfWVsc2VcIm9wZW5cIj09PXRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnJlYWR5U3RhdGUmJnRoaXMucnRjLmNoYW5uZWxzLnJlc3BvbnNlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2VJZDpuLHN1Y2Nlc3M6ITEsZXJyb3I6XCJDb25uZWN0aW9uIG5vdCByZWFkeS5cIn0pKX0pKSx0aGlzLnJ0Yy5ydGNDbGllbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuY29ubmVjdGlvblN0YXRlQ2hhbmdlSGFuZGxlciksT2JqZWN0LnZhbHVlcyh0aGlzLnJ0Yy5jaGFubmVscykuZm9yRWFjaCgoZT0+e2Uub25jbG9zZT1lPT57Wy4uLnRoaXMucmVzcG9uc2VNYXAudmFsdWVzKCldLmZvckVhY2goKGU9PmUucmVqZWN0KG5ldyBFcnJvcihcIlJUQ0RhdGFDaGFubmVsIGNsb3NlZCB1bmV4cGVjdGVkbHksIHRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgbWVzc2FnZSBzaXplLiBOb3RlOiBSVEMgQ2hhbm5lbHMgaGF2ZSBhIG1lc3NhZ2Ugc2l6ZSBsaW1pdCBvZiB+MjU1a0IuXCIpKSkpLHRoaXMuY2xvc2UoKSxvKHRoaXMscikmJm8odGhpcyxyKS5jYWxsKHRoaXMpfX0pKX1vbkRpc2Nvbm5lY3QoZSl7aWYobyh0aGlzLHIpKXRocm93IG5ldyBFcnJvcihcIlJUQ0VuZHBvaW50IGRpc2Nvbm5lY3RMaXN0ZW5lciBjYW5ub3QgYmUgc2V0IHR3aWNlLlwiKTtzKHRoaXMscixlKX1yZWNlaXZlKGUpe2lmKG8odGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBFbmRwb2ludC5cIik7cyh0aGlzLGksZSl9Z2V0IGNvbm5lY3RlZCgpe3JldHVyblwiY29ubmVjdGVkXCI9PT10aGlzLnJ0Yy5ydGNDbGllbnQuY29ubmVjdGlvblN0YXRlfX0saT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw1Njk6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDSUNFTWFuYWdlcj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJjaGFubmVsXCIpLHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZD1lPT5uZXcgUHJvbWlzZSgoKHQsbik9PntpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSl0KCk7ZWxzZSBpZihcImNvbm5lY3RpbmdcIj09PWUucmVhZHlTdGF0ZSl7Y29uc3Qgbj0oKT0+e2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKSx0KCl9O2UuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIixuKX1lbHNlIG4obmV3IEVycm9yKFwiVGhpcyBDaGFubmVsIGhhcyBhbHJlYWR5IGNsb3NlZFwiKSl9KSl9c3RhdGljIGNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShlLHQpe2xldCBuO2NvbnN0IGk9bmV3IFByb21pc2UoKGU9PntuPWV9KSkscj1pPT57Y29uc3Qgbz0oKT0+e2kuY2hhbm5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLG4oaS5jaGFubmVsKX07aS5jaGFubmVsLmxhYmVsPT09ZSYmKGkuY2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRhdGFjaGFubmVsXCIscikpfTtyZXR1cm4gdC5hZGRFdmVudExpc3RlbmVyKFwiZGF0YWNoYW5uZWxcIixyKSxpfWFzeW5jIGxpc3RlbkZvclByb3ZpZGVySWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpLHQse3RpbWVzdGFtcDpEYXRlLm5vdygpfSl9YXN5bmMgcmFpc2VQcm92aWRlckljZShlLHQpe2F3YWl0IHRoaXMud2lyZS5lbnZpcm9ubWVudC5yYWlzZUV2ZW50KHRoaXMuY3JlYXRlUm91dGVTdHJpbmcodGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSksdCl9YXN5bmMgbGlzdGVuRm9yQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy5vbih0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSx0LHt0aW1lc3RhbXA6RGF0ZS5ub3coKX0pfWFzeW5jIHJhaXNlQ2xpZW50SWNlKGUsdCl7YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LnJhaXNlRXZlbnQodGhpcy5jcmVhdGVSb3V0ZVN0cmluZyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdCl9Y2xlYW51cEljZUxpc3RlbmVycyhlKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0aGlzLmNyZWF0ZUNsaWVudEV2ZW50TmFtZShlKSksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnModGhpcy5jcmVhdGVQcm92aWRlckV2ZW50TmFtZShlKSl9Y3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpe3JldHVybmBpY2UtY2xpZW50LSR7ZX1gfWNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpe3JldHVybmBpY2UtcHJvdmlkZXItJHtlfWB9Y3JlYXRlUm91dGVTdHJpbmcoZSl7cmV0dXJuYGNoYW5uZWwvJHtlfWB9Y3JlYXRlUnRjUGVlcigpe3JldHVybiB0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0UnRjUGVlcigpfWFzeW5jIHN0YXJ0Q2xpZW50T2ZmZXIoKXtjb25zdCBlPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSx0PXRoaXMuY3JlYXRlUnRjUGVlcigpO3QuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLChhc3luYyB0PT57dmFyIG47dC5jYW5kaWRhdGUmJmF3YWl0IHRoaXMucmFpc2VDbGllbnRJY2UoZSx7Y2FuZGlkYXRlOm51bGw9PT0obj10LmNhbmRpZGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4udG9KU09OKCl9KX0pKSxhd2FpdCB0aGlzLmxpc3RlbkZvclByb3ZpZGVySWNlKGUsKGFzeW5jIGU9Pnthd2FpdCB0LmFkZEljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSl9KSk7Y29uc3Qgbj17cmVxdWVzdDp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVxdWVzdFwiKSxyZXNwb25zZTp0LmNyZWF0ZURhdGFDaGFubmVsKFwicmVzcG9uc2VcIil9LGk9YXdhaXQgdC5jcmVhdGVPZmZlcigpO2F3YWl0IHQuc2V0TG9jYWxEZXNjcmlwdGlvbihpKTtjb25zdCByPVByb21pc2UuYWxsKFtuLnJlcXVlc3Qsbi5yZXNwb25zZV0ubWFwKHRoaXMuZW5zdXJlQ2hhbm5lbE9wZW5lZCkpLnRoZW4oKCgpPT57fSkpO3JldHVybntydGNDbGllbnQ6dCxjaGFubmVsczpuLG9mZmVyOmkscnRjQ29ubmVjdGlvbklkOmUsY2hhbm5lbHNPcGVuZWQ6cn19YXN5bmMgZmluaXNoQ2xpZW50T2ZmZXIoZSx0LG4pe3JldHVybiBhd2FpdCBlLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpLGF3YWl0IG4sITB9YXN5bmMgY3JlYXRlUHJvdmlkZXJBbnN3ZXIoZSx0KXtjb25zdCBuPXRoaXMuY3JlYXRlUnRjUGVlcigpLGk9ci5jcmVhdGVEYXRhQ2hhbm5lbFByb21pc2UoXCJyZXF1ZXN0XCIsbiksbz1yLmNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShcInJlc3BvbnNlXCIsbik7bi5hZGRFdmVudExpc3RlbmVyKFwiaWNlY2FuZGlkYXRlXCIsKGFzeW5jIHQ9Pnt2YXIgbjt0LmNhbmRpZGF0ZSYmYXdhaXQgdGhpcy5yYWlzZVByb3ZpZGVySWNlKGUse2NhbmRpZGF0ZTpudWxsPT09KG49dC5jYW5kaWRhdGUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnRvSlNPTigpfSl9KSksYXdhaXQgdGhpcy5saXN0ZW5Gb3JDbGllbnRJY2UoZSwoYXN5bmMgZT0+e2F3YWl0IG4uYWRkSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKX0pKSxhd2FpdCBuLnNldFJlbW90ZURlc2NyaXB0aW9uKHQpO2NvbnN0IHM9YXdhaXQgbi5jcmVhdGVBbnN3ZXIoKTthd2FpdCBuLnNldExvY2FsRGVzY3JpcHRpb24ocyk7Y29uc3QgYT1Qcm9taXNlLmFsbChbaSxvXSkudGhlbigoKFt0LG5dKT0+KHRoaXMuY2xlYW51cEljZUxpc3RlbmVycyhlKSx7cmVxdWVzdDp0LHJlc3BvbnNlOm59KSkpO3JldHVybntydGNDbGllbnQ6bixhbnN3ZXI6cyxjaGFubmVsczphfX19dC5SVENJQ0VNYW5hZ2VyPXJ9LDM4NzA6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxzPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfSxhPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJUQ0luZm89dC5SVENTdHJhdGVneT12b2lkIDA7Y29uc3QgYz1uKDg3NzYpO3QuUlRDU3RyYXRlZ3k9Y2xhc3N7Y29uc3RydWN0b3IoKXtpLnNldCh0aGlzLG51bGwpLHIuc2V0KHRoaXMsbmV3IE1hcCksby5zZXQodGhpcywhMCksdGhpcy5zZW5kPWFzeW5jKGUsdCxuKT0+dGhpcy5nZXRFbmRwb2ludEJ5SWQoZSkuc2VuZCh0LG4pLHRoaXMuY2xvc2U9YXN5bmMoKT0+e3ModGhpcyxvKSYmKHModGhpcyxyKS5mb3JFYWNoKChlPT5lLmNsb3NlKCkpKSxhKHRoaXMscixuZXcgTWFwKSksYSh0aGlzLG8sITEpfX1vbkVuZHBvaW50RGlzY29ubmVjdChlLHQpe3RoaXMuZ2V0RW5kcG9pbnRCeUlkKGUpLm9uRGlzY29ubmVjdCh0KX1yZWNlaXZlKGUpe2lmKHModGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCBhIGxpc3RlbmVyIGZvciB0aGlzIFJUQyBTdHJhdGVneVwiKTthKHRoaXMsaSxlKSxzKHRoaXMscikuZm9yRWFjaCgoZT0+ZS5yZWNlaXZlKHModGhpcyxpKSkpKX1nZXRFbmRwb2ludEJ5SWQoZSl7Y29uc3QgdD1zKHRoaXMscikuZ2V0KGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggZW5kcG9pbnQgaWQgJHtlfSBpcyBub3QgY29ubmVjdGVkYCk7cmV0dXJuIHR9Z2V0IGNvbm5lY3RlZCgpe3JldHVybiBzKHRoaXMsbyl9aXNFbmRwb2ludENvbm5lY3RlZChlKXtyZXR1cm4gcyh0aGlzLHIpLmhhcyhlKX1hZGRFbmRwb2ludChlLHQpe2lmKCFzKHRoaXMsbykpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiQWRkaW5nIGVuZHBvaW50IHRvIGRpc2Nvbm5lY3RlZCBSVEMgU3RyYXRlZ3lcIik7Y29uc3Qgbj1uZXcgYy5SVENFbmRwb2ludCh0LnJ0Yyx0LmVuZHBvaW50SWRlbnRpdHkpO3ModGhpcyxpKSYmbi5yZWNlaXZlKHModGhpcyxpKSkscyh0aGlzLHIpLnNldChlLG4pfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7cyh0aGlzLHIpLmRlbGV0ZShlKX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe2NvbnN0IHQ9ZT0+XCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lO3JldHVybiB0KGUpJiZ0KGUuZW5kcG9pbnRJZGVudGl0eSkmJnQoZS5ydGMpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5lbmRwb2ludElkZW50aXR5LmVuZHBvaW50SWR9fSxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcCx0LlJUQ0luZm89e3ZlcnNpb246MSxtaW5pbXVtVmVyc2lvbjowLHR5cGU6XCJydGNcIn19LDI5NDI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWxQcm92aWRlcj12b2lkIDA7Y29uc3Qgbz1uKDc1MzkpLHM9bigyMzAwKTtsZXQgYT0oKCk9Pnt2YXIgZSx0LG4sYSxjO2NsYXNzIGQgZXh0ZW5kcyBvLkNoYW5uZWxCYXNle2NvbnN0cnVjdG9yKGgsbCx1KXtzdXBlcigpLGUuc2V0KHRoaXMsdm9pZCAwKSx0LnNldCh0aGlzLHZvaWQgMCksbi5zZXQodGhpcyx2b2lkIDApLGEuc2V0KHRoaXMsKHQ9Pntjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLmVuZHBvaW50SWQhPT10LmVuZHBvaW50SWQpKTtyKHRoaXMsbikuY2xvc2VFbmRwb2ludCh0LmVuZHBvaW50SWQpLGkodGhpcyxlLG8pfSkpLHRoaXMucHJvY2Vzc0FjdGlvbj1hc3luYyhlLHQsbik9PihkLmNsaWVudElzTXVsdGlSdW50aW1lKG4pJiYhcy5ydW50aW1lVXVpZE1lZXRzTWluaW11bVJ1bnRpbWVWZXJzaW9uKG4ucnVudGltZVV1aWQsXCIxOC44Ny41Ni4wXCIpP3RoaXMuaGFuZGxlTXVsdGlSdW50aW1lTGVnYWN5Q2xpZW50KG4pOnRoaXMuY2hlY2tGb3JDbGllbnRDb25uZWN0aW9uKG4pLHN1cGVyLnByb2Nlc3NBY3Rpb24oZSx0LG4pKSxjLnNldCh0aGlzLCgoKT0+e3IodGhpcyxuKS5jbG9zZSgpO2NvbnN0IGU9ZC5yZW1vdmFsTWFwLmdldCh0aGlzKTtlJiZlKCl9KSksaSh0aGlzLHQsbmV3IG8uUHJvdGVjdGVkSXRlbXMoaCxsKSksdGhpcy5jb25uZWN0TGlzdGVuZXI9KCk9Pnt9LHRoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fSxpKHRoaXMsZSxbXSksaSh0aGlzLG4sdSksdS5yZWNlaXZlKHRoaXMucHJvY2Vzc0FjdGlvbil9Z2V0IGNvbm5lY3Rpb25zKCl7cmV0dXJuWy4uLnIodGhpcyxlKV19c3RhdGljIGhhbmRsZUNsaWVudERpc2Nvbm5lY3Rpb24oZSx0KXtjb25zdCBuPWUuY29ubmVjdGlvbnMuZmluZCgoZT0+ZS5lbmRwb2ludElkPT09dC5lbmRwb2ludElkKSk7bj9yKGUsYSkuY2FsbChlLG4pOmUuY29ubmVjdGlvbnMuZmlsdGVyKChlPT5lLnV1aWQ9PT10LnV1aWQmJmUubmFtZT09PXQubmFtZSkpLmZvckVhY2gocihlLGEpKSxlLmRpc2Nvbm5lY3RMaXN0ZW5lcih0KX1zdGF0aWMgc2V0UHJvdmlkZXJSZW1vdmFsKGUsdCl7ZC5yZW1vdmFsTWFwLnNldChlLHQpfWRpc3BhdGNoKGUsdCxpKXt2YXIgbztjb25zdCBzPW51bGwhPT0obz1lLmVuZHBvaW50SWQpJiZ2b2lkIDAhPT1vP286dGhpcy5nZXRFbmRwb2ludElkRm9yT3BlbkZpbklkKGUsdCk7cmV0dXJuIHMmJnIodGhpcyxuKS5pc0VuZHBvaW50Q29ubmVjdGVkKHMpP3IodGhpcyxuKS5zZW5kKHMsdCxpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYENsaWVudCBjb25uZWN0aW9uIHdpdGggaWRlbnRpdHkgdXVpZDogJHtlLnV1aWR9IC8gbmFtZTogJHtlLm5hbWV9IC8gZW5kcG9pbnRJZDogJHtzfSBubyBsb25nZXIgY29ubmVjdGVkLmApKX1hc3luYyBwcm9jZXNzQ29ubmVjdGlvbih0LG4pe3JldHVybiByKHRoaXMsZSkucHVzaCh0KSx0aGlzLmNvbm5lY3RMaXN0ZW5lcih0LG4pfXB1Ymxpc2goZSx0KXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5tYXAoKGk9PnIodGhpcyxuKS5zZW5kKGkuZW5kcG9pbnRJZCxlLHQpKSl9b25Db25uZWN0aW9uKGUpe3RoaXMuY29ubmVjdExpc3RlbmVyPWV9b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPWV9YXN5bmMgZGVzdHJveSgpe2NvbnN0IG49cih0aGlzLHQpLHtjaGFubmVsTmFtZTpvfT1uLnByb3ZpZGVySWRlbnRpdHk7aSh0aGlzLGUsW10pLGF3YWl0IG4ud2lyZS5zZW5kQWN0aW9uKFwiZGVzdHJveS1jaGFubmVsXCIse2NoYW5uZWxOYW1lOm99KSxyKHRoaXMsYykuY2FsbCh0aGlzKX1jaGVja0ZvckNsaWVudENvbm5lY3Rpb24oZSl7aWYoIXRoaXMuaXNDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuXFxuICAgICAgICAgICAgICAgICAgICBDbGllbnQgSWRlbnRpdHk6IHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWlzQ2xpZW50Q29ubmVjdGVkKGUpe3JldHVybiBkLmNsaWVudElkZW50aXR5SW5jbHVkZXNFbmRwb2ludElkKGUpP3RoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC5lbmRwb2ludElkPT09ZS5lbmRwb2ludElkJiZ0LnV1aWQ9PT1lLnV1aWQmJnQubmFtZT09PWUubmFtZSkpOnRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl9aXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSl7cmV0dXJuIHRoaXMuY29ubmVjdGlvbnMuc29tZSgodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKX1oYW5kbGVNdWx0aVJ1bnRpbWVMZWdhY3lDbGllbnQoZSl7aWYoIXRoaXMuaXNMZWdhY3lDbGllbnRDb25uZWN0ZWQoZSkpdGhyb3cgbmV3IEVycm9yKGBUaGlzIGFjdGlvbiB3YXMgc2VudCBmcm9tIGEgY2xpZW50IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcHJvdmlkZXIuIENsaWVudCBJZGVudGl0eTpcXG4gICAgICAgICAgICAgICAgICAgIHt1dWlkOiAke2UudXVpZH0sIG5hbWU6ICR7ZS5uYW1lfSwgZW5kcG9pbnRJZDogJHtlLmVuZHBvaW50SWR9fWApfWdldEVuZHBvaW50SWRGb3JPcGVuRmluSWQoZSxuKXt2YXIgaTtjb25zdCBvPXRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKCh0PT50Lm5hbWU9PT1lLm5hbWUmJnQudXVpZD09PWUudXVpZCkpO2lmKG8ubGVuZ3RoPj0yKXtjb25zdCBpPXIodGhpcyx0KSx7dXVpZDpvLG5hbWU6c309ZSxhPW51bGw9PWk/dm9pZCAwOmkucHJvdmlkZXJJZGVudGl0eS51dWlkLGM9bnVsbD09aT92b2lkIDA6aS5wcm92aWRlcklkZW50aXR5Lm5hbWU7Y29uc29sZS53YXJuKGBXQVJOSU5HOiBEaXNwYXRjaCBjYWxsIG1heSBoYXZlIHVuaW50ZW5kZWQgcmVzdWx0cy4gVGhlIFwidG9cIiBhcmd1bWVudCBvZiB5b3VyIGRpc3BhdGNoIGNhbGwgaXMgbWlzc2luZyB0aGVcXG4gICAgICAgICAgICAgICAgXCJlbmRwb2ludElkXCIgcGFyYW1ldGVyLiBUaGUgaWRlbnRpdHkgeW91IGFyZSBkaXNwYXRjaGluZyB0byAoe3V1aWQ6ICR7b30sIG5hbWU6ICR7c319KVxcbiAgICAgICAgICAgICAgICBoYXMgbXVsdGlwbGUgY2hhbm5lbENsaWVudHMgZm9yIHRoaXMgY2hhbm5lbC4gWW91ciBkaXNwYXRjaGVkIGFjdGlvbjogKCR7bn0pIGZyb20gdGhlIHByb3ZpZGVyOlxcbiAgICAgICAgICAgICAgICAoe3V1aWQ6ICR7YX0sIG5hbWU6ICR7Y319KSB3aWxsIG9ubHkgYmUgcHJvY2Vzc2VkIGJ5IHRoZSBtb3N0IHJlY2VudGx5LWNyZWF0ZWQgY2xpZW50LmApfXJldHVybiBudWxsPT09KGk9by5wb3AoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SWRlbnRpdHlJbmNsdWRlc0VuZHBvaW50SWQoZSl7cmV0dXJuIHZvaWQgMCE9PWUuZW5kcG9pbnRJZH1zdGF0aWMgY2xpZW50SXNNdWx0aVJ1bnRpbWUoZSl7cmV0dXJuIHZvaWQgMCE9PWUucnVudGltZVV1aWR9fXJldHVybiBlPW5ldyBXZWFrTWFwLHQ9bmV3IFdlYWtNYXAsbj1uZXcgV2Vha01hcCxhPW5ldyBXZWFrTWFwLGM9bmV3IFdlYWtNYXAsZC5yZW1vdmFsTWFwPW5ldyBXZWFrTWFwLGR9KSgpO3QuQ2hhbm5lbFByb3ZpZGVyPWF9LDgzNDc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJBcHBQYXlsb2FkPXZvaWQgMDtjb25zdCBpPW4oNjQ2NSkscj1uKDk2NTkpLG89bigzMTI3KSxzPW4oNzcyMiksYT1uKDQ5OTkpO2NsYXNzIGMgZXh0ZW5kcyByLkJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5ldmVudHM9e3N1YnNjcmliZXJBZGRlZDpcInN1YnNjcmliZXItYWRkZWRcIixzdWJzY3JpYmVyUmVtb3ZlZDpcInN1YnNjcmliZXItcmVtb3ZlZFwifSx0aGlzLnJlZkNvdW50ZXI9bmV3IG8uZGVmYXVsdCx0aGlzLkNoYW5uZWw9bmV3IHMuQ2hhbm5lbChlKSx0aGlzLmVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKSx0aGlzLm9uPXRoaXMuZW1pdHRlci5vbi5iaW5kKHRoaXMuZW1pdHRlciksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnM9dGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycy5iaW5kKHRoaXMuZW1pdHRlcil9cHVibGlzaChlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInB1Ymxpc2gtbWVzc2FnZVwiLHt0b3BpYzplLG1lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNlbmQoZSx0LG4pe2NvbnN0IGk9YS52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKGkpdGhyb3cgbmV3IEVycm9yKGkpO2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2VuZC1tZXNzYWdlXCIse2Rlc3RpbmF0aW9uVXVpZDplLnV1aWQsZGVzdGluYXRpb25XaW5kb3dOYW1lOmUubmFtZSx0b3BpYzp0LG1lc3NhZ2U6bixzb3VyY2VXaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pfXN1YnNjcmliZShlLHQsbil7Y29uc3QgaT10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsZS5uYW1lfHxcIipcIix0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLm9uKGksbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uRmlyc3QoaSwoKCk9PnRoaXMud2lyZS5zZW5kQWN0aW9uKFwic3Vic2NyaWJlXCIse3NvdXJjZVV1aWQ6ZS51dWlkLHNvdXJjZVdpbmRvd05hbWU6ZS5uYW1lfHxcIipcIix0b3BpYzp0LGRlc3RpbmF0aW9uV2luZG93TmFtZTp0aGlzLm1lLm5hbWV9KSksKCgpPT5Qcm9taXNlLnJlc29sdmUoKSkpfXVuc3Vic2NyaWJlKGUsdCxuKXtjb25zdCBpPWUubmFtZXx8XCIqXCIscj10aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShlLnV1aWQsaSx0KTtyZXR1cm4gdGhpcy5lbWl0dGVyLnJlbW92ZUxpc3RlbmVyKHIsbiksdGhpcy5yZWZDb3VudGVyLmFjdE9uTGFzdChyLCgoKT0+dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1bnN1YnNjcmliZVwiLHtzb3VyY2VVdWlkOmUudXVpZCxzb3VyY2VXaW5kb3dOYW1lOmksdG9waWM6dCxkZXN0aW5hdGlvbldpbmRvd05hbWU6dGhpcy5tZS5uYW1lfSkpLCgoKT0+bmV3IFByb21pc2UoKGU9PmUpKS50aGVuKCgoKT0+e30pKSkpfXByb2Nlc3NNZXNzYWdlKGUpe2NvbnN0e3BheWxvYWQ6e21lc3NhZ2U6dCxzb3VyY2VXaW5kb3dOYW1lOm4sc291cmNlVXVpZDppLHRvcGljOnJ9fT1lLG89W3RoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGksbixyKSx0aGlzLmNyZWF0ZVN1YnNjcmlwdGlvbktleShpLFwiKlwiLHIpLHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KFwiKlwiLFwiKlwiLHIpXSxzPXt1dWlkOmksbmFtZTpufTtvLmZvckVhY2goKGU9Pnt0aGlzLmVtaXR0ZXIuZW1pdChlLHQscyl9KSl9ZW1pdFN1YnNjcml2ZXJFdmVudChlLHQpe2NvbnN0e3BheWxvYWQ6e3RhcmdldE5hbWU6bix1dWlkOmksdG9waWM6cn19PXQsbz17bmFtZTpuLHV1aWQ6aSx0b3BpYzpyfTt0aGlzLmVtaXR0ZXIuZW1pdChlLG8pfWNyZWF0ZVN1YnNjcmlwdGlvbktleShlLHQsbil7Y29uc3QgaT10fHxcIipcIjtpZighKGUmJmkmJm4pKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgdXVpZCwgbmFtZSwgb3IgdG9waWMgc3RyaW5nXCIpO3JldHVybiBmdW5jdGlvbiguLi5lKXtyZXR1cm4gZS5tYXAoKGU9PkJ1ZmZlci5mcm9tKGAke2V9YCkudG9TdHJpbmcoXCJiYXNlNjRcIikpKS5qb2luKFwiL1wiKX0oZSxpLG4pfW9ubWVzc2FnZShlKXtjb25zdHthY3Rpb246dH09ZTtzd2l0Y2godCl7Y2FzZVwicHJvY2Vzcy1tZXNzYWdlXCI6dGhpcy5wcm9jZXNzTWVzc2FnZShlKTticmVhaztjYXNlIHRoaXMuZXZlbnRzLnN1YnNjcmliZXJBZGRlZDp0aGlzLmVtaXRTdWJzY3JpdmVyRXZlbnQodGhpcy5ldmVudHMuc3Vic2NyaWJlckFkZGVkLGUpO2JyZWFrO2Nhc2UgdGhpcy5ldmVudHMuc3Vic2NyaWJlclJlbW92ZWQ6dGhpcy5lbWl0U3Vic2NyaXZlckV2ZW50KHRoaXMuZXZlbnRzLnN1YnNjcmliZXJSZW1vdmVkLGUpfXJldHVybiEwfX10LmRlZmF1bHQ9Yyx0LkludGVyQXBwUGF5bG9hZD1jbGFzc3t9fSwyOTc3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDIwNTcpLG89big3MTM4KSxzPShlLC4uLnQpPT5uZXcgZSguLi50KTtjbGFzcyBhIGV4dGVuZHMgaS5CYXNle2FzeW5jIGluaXQoZSx0PXMpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1pbml0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShgaW50ZXJvcC1icm9rZXItJHtlfWApLGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRJbmZvKCk7cmV0dXJuIHQoci5JbnRlcm9wQnJva2VyLHRoaXMud2lyZSxuLGkuaW5pdGlhbE9wdGlvbnMuaW50ZXJvcEJyb2tlckNvbmZpZ3VyYXRpb258fHt9KX1jb25uZWN0U3luYyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY29ubmVjdC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLkludGVyb3BDbGllbnQodGhpcy53aXJlLGUsdCl9fXQuZGVmYXVsdD1hfSwyMDU3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkludGVyb3BCcm9rZXI9dm9pZCAwO2NvbnN0IGk9big5NjU5KSxyPW4oNzExNSksbz1uKDE3ODcpO2xldCBzPVt7aWQ6XCJncmVlblwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjMDBDQzg4XCIsbmFtZTpcImdyZWVuXCJ9fSx7aWQ6XCJwdXJwbGVcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiIzhDNjFGRlwiLG5hbWU6XCJwdXJwbGVcIn19LHtpZDpcIm9yYW5nZVwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjRkY4QzRDXCIsbmFtZTpcIm9yYW5nZVwifX0se2lkOlwicmVkXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjVFNjBcIixuYW1lOlwicmVkXCJ9fSx7aWQ6XCJwaW5rXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjhGQjhcIixuYW1lOlwicGlua1wifX0se2lkOlwieWVsbG93XCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNFOUZGOEZcIixuYW1lOlwieWVsbG93XCJ9fV07Y2xhc3MgYSBleHRlbmRzIGkuQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSksdGhpcy5jaGFubmVsPXQsdGhpcy5pbnRlcm9wQ2xpZW50cz1uZXcgTWFwLHRoaXMuY29udGV4dEdyb3Vwc0J5SWQ9bmV3IE1hcCxuLmNvbnRleHRHcm91cHMmJihzPW4uY29udGV4dEdyb3VwcyksdGhpcy5pbnRlbnRDbGllbnRNYXA9bmV3IE1hcCx0aGlzLmxhc3RDb250ZXh0TWFwPW5ldyBNYXAsdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5zZXRDb250ZXh0R3JvdXBNYXAoKSx0aGlzLndpcmVDaGFubmVsKHQpfXNldENvbnRleHQoe2NvbnRleHQ6ZX0sdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIW58fCFuLmNvbnRleHRHcm91cElkKXRocm93IG4/bmV3IEVycm9yKFwiWW91IG11c3Qgam9pbiBhIGNvbnRleHQgZ3JvdXAgYmVmb3JlIHlvdSBjYW4gc2V0IGNvbnRleHQuXCIpOm5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIENsaWVudCBTdGF0ZSBNYXBgKTt7Y29uc3R7Y29udGV4dEdyb3VwSWQ6dH09bjtpZighdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModCkpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgaGFzIGEgY29udGV4dCBncm91cCB0aGF0IGlzbid0IGluIHRoZSBjb250ZXh0IGdyb3VwIG1hcHBpbmc6ICR7dH0uYCk7Y29uc3QgaT1hLmNoZWNrQ29udGV4dEludGVncml0eShlKTtpZighMT09PWkuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7aS5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KGUpfWApO2NvbnN0IHI9dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQodCksbz1lLnR5cGU7ci5zZXQobyxlKSx0aGlzLmxhc3RDb250ZXh0TWFwLnNldCh0LG8pLEFycmF5LmZyb20odGhpcy5pbnRlcm9wQ2xpZW50cy52YWx1ZXMoKSkuZmlsdGVyKChlPT5lLmNvbnRleHRHcm91cElkPT09dCkpLmZvckVhY2goKHQ9Pntmb3IoY29uc3RbLG5db2YgdC5jb250ZXh0SGFuZGxlcnMpYS5pc0NvbnRleHRUeXBlQ29tcGF0aWJsZShvLG4uY29udGV4dFR5cGUpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQuY2xpZW50SWRlbnRpdHksbi5oYW5kbGVySWQsZSl9KSl9fWdldEN1cnJlbnRDb250ZXh0KGUsdCl7dmFyIG47dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY3VycmVudC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IGk9dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighKG51bGw9PWk/dm9pZCAwOmkuY29udGV4dEdyb3VwSWQpKXRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGJlIGEgbWVtYmVyIG9mIGEgY29udGV4dCBncm91cCB0byBjYWxsIGdldEN1cnJlbnRDb250ZXh0XCIpO2NvbnN0e2NvbnRleHRHcm91cElkOnJ9PWksbz10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChyKSxzPXRoaXMubGFzdENvbnRleHRNYXAuZ2V0KHIpLGE9bnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuY29udGV4dFR5cGUpJiZ2b2lkIDAhPT1uP246cztyZXR1cm4gbyYmYT9vLmdldChhKTp2b2lkIDB9YXN5bmMgam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZSx0YXJnZXQ6dH0sbil7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1qb2luLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksdCl7YS5oYXNFbmRwb2ludElkKHQpJiZhd2FpdCB0aGlzLmFkZENsaWVudFRvQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSx0KTtjb25zdCBuPXRoaXMuY2hhbm5lbC5jb25uZWN0aW9ucy5maWx0ZXIoKGU9PmUudXVpZD09PXQudXVpZCYmZS5uYW1lPT09dC5uYW1lKSk7aWYoIW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihgR2l2ZW4gSWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfSBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBJbnRlcm9wIEJyb2tlci5gKTtuLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oYE1vcmUgdGhhbiBvbmUgY29ubmVjdGlvbiBmb3VuZCBmb3IgaWRlbnRpdHkgJHt0LnV1aWR9ICR7dC5uYW1lfWApO2NvbnN0IGk9W107Zm9yKGNvbnN0IHQgb2YgbilpLnB1c2godGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sdCkpO2F3YWl0IFByb21pc2UuYWxsKGkpfWVsc2UgYXdhaXQgdGhpcy5hZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sbil9YXN5bmMgYWRkQ2xpZW50VG9Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmV9LHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItYWRkLWNsaWVudC10by1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighbil0aHJvdyBuZXcgRXJyb3IoYENsaWVudCB3aXRoIElkZW50aXR5OiAke3QudXVpZH0gJHt0Lm5hbWV9IG5vdCBpbiBDbGllbnQgU3RhdGUgTWFwYCk7aWYoIXRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSkpdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0aW5nIHRvIGpvaW4gYSBjb250ZXh0IGdyb3VwIHRoYXQgZG9lcyBub3QgZXhpc3Q6ICR7ZX0uIFlvdSBtYXkgb25seSBqb2luIGV4aXN0aW5nIGNvbnRleHQgZ3JvdXBzLmApO2lmKG4uY29udGV4dEdyb3VwSWQhPT1lKXtuLmNvbnRleHRHcm91cElkPWUsYXdhaXQgYS5zZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKHQsZSk7Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChlKTtmb3IoY29uc3RbLGVdb2Ygbi5jb250ZXh0SGFuZGxlcnMpe2NvbnN0e2NvbnRleHRUeXBlOm4saGFuZGxlcklkOnJ9PWU7aWYodm9pZCAwPT09bilpLmZvckVhY2goKChlLG4pPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcih0LHIsZSl9KSk7ZWxzZSBpZihpLmhhcyhuKSl7Y29uc3QgZT1pLmdldChuKTtlJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQscixlKX19fX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKHt0YXJnZXQ6ZX0sdCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1yZW1vdmUtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLGUpe2EuaGFzRW5kcG9pbnRJZChlKSYmYXdhaXQgdGhpcy5yZW1vdmVDbGllbnRGcm9tQ29udGV4dEdyb3VwKGUpO2NvbnN0IHQ9dGhpcy5jaGFubmVsLmNvbm5lY3Rpb25zLmZpbHRlcigodD0+dC51dWlkPT09ZS51dWlkJiZ0Lm5hbWU9PT1lLm5hbWUpKTtpZighdC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBObyBjb25uZWN0aW9uIGZvdW5kIGZvciBnaXZlbiBJZGVudGl0eSAke2UudXVpZH0gJHtlLm5hbWV9YCk7dC5sZW5ndGg+MSYmY29uc29sZS53YXJuKGBNb3JlIHRoYW4gb25lIGNvbm5lY3Rpb24gZm91bmQgZm9yIGlkZW50aXR5ICR7ZS51dWlkfSAke2UubmFtZX1gKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIHQpbi5wdXNoKHRoaXMucmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKSk7YXdhaXQgUHJvbWlzZS5hbGwobil9ZWxzZSBhd2FpdCB0aGlzLnJlbW92ZUNsaWVudEZyb21Db250ZXh0R3JvdXAodCl9YXN5bmMgcmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXJlbW92ZS1jbGllbnQtZnJvbS1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9dGhpcy5nZXRDbGllbnRTdGF0ZShlKTt0JiYodC5jb250ZXh0R3JvdXBJZD12b2lkIDApLGF3YWl0IGEuc2V0Q3VycmVudENvbnRleHRHcm91cEluQ2xpZW50T3B0aW9ucyhlLG51bGwpfWdldENvbnRleHRHcm91cHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtY29udGV4dC1ncm91cHNcIikuY2F0Y2goKGU9Pnt9KSkscy5tYXAoKGU9Pih7Li4uZX0pKSl9Z2V0SW5mb0ZvckNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0pe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWdldC1pbmZvLWZvci1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpLHRoaXMuZ2V0Q29udGV4dEdyb3VwcygpLmZpbmQoKHQ9PnQuaWQ9PT1lKSl9Z2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksQXJyYXkuZnJvbSh0aGlzLmludGVyb3BDbGllbnRzLnZhbHVlcygpKS5maWx0ZXIoKHQ9PnQuY29udGV4dEdyb3VwSWQ9PT1lKSkubWFwKChlPT5lLmNsaWVudElkZW50aXR5KSl9YXN5bmMgaGFuZGxlRmlyZWRJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmZpcmVJbnRlbnRcIixcImZkYzMucmFpc2VJbnRlbnRcIixcIkludGVyb3BCcm9rZXIuaGFuZGxlRmlyZWRJbnRlbnRcIix0KTt0aHJvdyBjb25zb2xlLndhcm4obiksbmV3IEVycm9yKG8uQlJPS0VSX0VSUk9SUy5maXJlSW50ZW50KX1hc3luYyBzZXRJbnRlbnRUYXJnZXQoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXNldC1pbnRlbnQtdGFyZ2V0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSksaT1gaW50ZW50LWhhbmRsZXItJHtlLm5hbWV9YDtpZihuKXtjb25zdCB0PW4uZ2V0KGkpO2lmKHQpe2lmKHQucGVuZGluZ0ludGVudHMucHVzaChlKSx0LmNsaWVudElkZW50aXR5JiZ0LmlzUmVhZHkpe2NvbnN0e2NsaWVudElkZW50aXR5OmUscGVuZGluZ0ludGVudHM6bn09dDt0cnl7Y29uc3Qgcj1uW24ubGVuZ3RoLTFdO2F3YWl0IHRoaXMuY2hhbm5lbC5kaXNwYXRjaChlLGksciksdC5wZW5kaW5nSW50ZW50cz1bXX1jYXRjaChuKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlciBmb3IgY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCksdC5pc1JlYWR5PSExfX19ZWxzZSBuLnNldChpLHtpc1JlYWR5OiExLHBlbmRpbmdJbnRlbnRzOltlXX0pfWVsc2V7dGhpcy5pbnRlbnRDbGllbnRNYXAuc2V0KHQubmFtZSxuZXcgTWFwKTtjb25zdCBuPXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldCh0Lm5hbWUpO24mJm4uc2V0KGkse2lzUmVhZHk6ITEscGVuZGluZ0ludGVudHM6W2VdfSl9fWFzeW5jIGhhbmRsZUluZm9Gb3JJbnRlbnQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRcIixcImZkYzMuZmluZEludGVudFwiLFwiSW50ZXJvcEJyb2tlci5oYW5kbGVJbmZvRm9ySW50ZW50XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudCl9YXN5bmMgaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHQoZSx0KXtjb25zdCBuPW8uZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmcoXCJpbnRlcm9wQ2xpZW50LmdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsXCJmZGMzLmZpbmRJbnRlbnRzQnlDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQpfWFzeW5jIGhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZmlyZUludGVudEZvckNvbnRleHRcIixcImZkYzMucmFpc2VJbnRlbnRGb3JDb250ZXh0XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dFwiLHQpO3Rocm93IGNvbnNvbGUud2FybihuKSxuZXcgRXJyb3Ioby5CUk9LRVJfRVJST1JTLmZpcmVJbnRlbnRGb3JDb250ZXh0KX1kZWNvcmF0ZVNuYXBzaG90KGUpe3JldHVybnsuLi5lLGludGVyb3BTbmFwc2hvdERldGFpbHM6e2NvbnRleHRHcm91cFN0YXRlczp0aGlzLmdldENvbnRleHRHcm91cFN0YXRlcygpfX19YXBwbHlTbmFwc2hvdChlLHQpe3ZhciBuO2NvbnN0IGk9bnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuaW50ZXJvcFNuYXBzaG90RGV0YWlscyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY29udGV4dEdyb3VwU3RhdGVzO2kmJigobnVsbD09dD92b2lkIDA6dC5jbG9zZUV4aXN0aW5nV2luZG93cyl8fHRoaXMudXBkYXRlRXhpc3RpbmdDbGllbnRzKGkpLHRoaXMucmVoeWRyYXRlQ29udGV4dEdyb3VwU3RhdGVzKGkpKX11cGRhdGVFeGlzdGluZ0NsaWVudHMoZSl7dGhpcy5pbnRlcm9wQ2xpZW50cy5mb3JFYWNoKCh0PT57Y29uc3R7Y2xpZW50SWRlbnRpdHk6bixjb250ZXh0R3JvdXBJZDppLGNvbnRleHRIYW5kbGVyczpyfT10O2lmKGkpe2NvbnN0IHQ9ZVtpXTtmb3IoY29uc3RbLGVdb2YgT2JqZWN0LmVudHJpZXModCkpci5mb3JFYWNoKCh0PT57Y29uc3R7aGFuZGxlcklkOmksY29udGV4dFR5cGU6cn09dDthLmlzQ29udGV4dFR5cGVDb21wYXRpYmxlKGUudHlwZSxyKSYmdGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLGksZSl9KSl9fSkpfWdldENvbnRleHRHcm91cFN0YXRlcygpe3JldHVybiBhLnRvT2JqZWN0KHRoaXMuY29udGV4dEdyb3Vwc0J5SWQpfXJlaHlkcmF0ZUNvbnRleHRHcm91cFN0YXRlcyhlKXtjb25zdCB0PU9iamVjdC5lbnRyaWVzKGUpO2Zvcihjb25zdFtlLG5db2YgdCl7Y29uc3QgdD1PYmplY3QuZW50cmllcyhuKTtmb3IoY29uc3RbbixpXW9mIHQpdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXMoZSk/dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoZSkuc2V0KG4saSk6Y29uc29sZS53YXJuKGBBdHRlbXB0aW5nIHRvIHNldCBhIGNvbnRleHQgZ3JvdXAgdGhhdCBpc24ndCBpbiB0aGUgY29udGV4dCBncm91cCBtYXBwaW5nLiBTa2lwcGluZyBjb250ZXh0IGdyb3VwIHJlaHlkcmF0aW9uIGZvcjogJHtlfWApfX1jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQoe2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LG4pe2NvbnN0IGk9e2NvbnRleHRUeXBlOmUsaGFuZGxlcklkOnR9LHI9dGhpcy5nZXRDbGllbnRTdGF0ZShuKTtpZihudWxsPT1yfHxyLmNvbnRleHRIYW5kbGVycy5zZXQodCxpKSxyJiZyLmNvbnRleHRHcm91cElkKXtjb25zdHtjb250ZXh0R3JvdXBJZDppfT1yLG89dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5nZXQoaSk7aWYodm9pZCAwPT09ZSlvLmZvckVhY2goKChlLGkpPT57dGhpcy5pbnZva2VDb250ZXh0SGFuZGxlcihuLHQsZSl9KSk7ZWxzZSBpZihvLmhhcyhlKSl7Y29uc3QgaT1vLmdldChlKTtpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKG4sdCxpKX19fWFzeW5jIGludGVudEhhbmRsZXJSZWdpc3RlcmVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm59PWUsaT10aGlzLmludGVudENsaWVudE1hcC5nZXQodC5uYW1lKSxyPW51bGw9PWk/dm9pZCAwOmkuZ2V0KG4pO2lmKGkpaWYocil7Y29uc3R7cGVuZGluZ0ludGVudHM6ZX09cjtyLmNsaWVudElkZW50aXR5PXQsci5pc1JlYWR5PSEwO3RyeXtpZihlLmxlbmd0aD4wKXtjb25zdCBpPWVbZS5sZW5ndGgtMV07YXdhaXQgdGhpcy5jaGFubmVsLmRpc3BhdGNoKHQsbixpKSxyLnBlbmRpbmdJbnRlbnRzPVtdfX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBpbnRlbnQgaGFuZGxlcjogJHtufSBmb3IgY2xpZW50ICR7dC51dWlkfS8ke3QubmFtZX0vJHt0LmVuZHBvaW50SWR9YCl9fWVsc2UgaS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSk7ZWxzZXt0aGlzLmludGVudENsaWVudE1hcC5zZXQodC5uYW1lLG5ldyBNYXApO2NvbnN0IGU9dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSk7ZSYmZS5zZXQobix7aXNSZWFkeTohMCxwZW5kaW5nSW50ZW50czpbXSxjbGllbnRJZGVudGl0eTp0fSl9fWludm9rZUNvbnRleHRIYW5kbGVyKGUsdCxuKXt0aGlzLmNoYW5uZWwuZGlzcGF0Y2goZSx0LG4pLmNhdGNoKChpPT57Y29uc29sZS5lcnJvcihgRXJyb3IgaW52b2tpbmcgY29udGV4dCBoYW5kbGVyICR7dH0gZm9yIGNvbnRleHQgdHlwZSAke24udHlwZX0gaW4gY2xpZW50ICR7ZS51dWlkfS8ke2UubmFtZX0vJHtlLmVuZHBvaW50SWR9YCxpKX0pKX1yZW1vdmVDb250ZXh0SGFuZGxlcih7aGFuZGxlcklkOmV9LHQpe2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtuJiZuLmNvbnRleHRIYW5kbGVycy5kZWxldGUoZSl9aGFuZGxlSm9pblNlc3Npb25Db250ZXh0R3JvdXAoe3Nlc3Npb25Db250ZXh0R3JvdXBJZDplfSx0KXt0cnl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGpvaW4gc2Vzc2lvbiBjb250ZXh0IGdyb3VwOiBtdXN0IHNwZWNpZnkgZ3JvdXAgaWQuXCIpO2NvbnN0IG49dGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmdldChlKTtpZihuKW4ucmVnaXN0ZXJOZXdDbGllbnQodCk7ZWxzZXtjb25zdCBuPW5ldyByLmRlZmF1bHQodGhpcy5jaGFubmVsLGUpO24ucmVnaXN0ZXJOZXdDbGllbnQodCksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLnNldChlLG4pfXJldHVybntoYXNDb25mbGljdDp0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyhlKX19Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGUpfX1nZXRDbGllbnRTdGF0ZShlKXtyZXR1cm4gdGhpcy5pbnRlcm9wQ2xpZW50cy5nZXQoZS5lbmRwb2ludElkKX1zdGF0aWMgdG9PYmplY3QoZSl7Y29uc3QgdD1PYmplY3QuZnJvbUVudHJpZXMoZSksbj17fTtyZXR1cm4gT2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoKFtlLHRdKT0+e2NvbnN0IGk9T2JqZWN0LmZyb21FbnRyaWVzKHQpO25bZV09aX0pKSxufXN0YXRpYyBjaGVja0NvbnRleHRJbnRlZ3JpdHkoZSl7aWYoIWUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiTm8gY29udGV4dCBzdXBwbGllZFwifTtpZihcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IG11c3QgYmUgYW4gT2JqZWN0XCJ9O2lmKCFlLnR5cGUpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBtdXN0IGhhdmUgYSB0eXBlIHByb3BlcnR5XCJ9O2lmKGUuaWQmJlwib2JqZWN0XCIhPXR5cGVvZiBlLmlkKXJldHVybntpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgaWQgbXVzdCBiZSBhbiBPYmplY3QgcG9wdWxhdGVkIHdpdGgga2V5LXZhbHVlIGlkZW50aWZpZXJzIChpZiBzZXQpXCJ9O2lmKGUuaWQpe2NvbnN0e2lkOnR9PWUsbj1PYmplY3Qua2V5cyh0KTtsZXQgaT0hMTtpZighbi5sZW5ndGgpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGtleS12YWx1ZSBpZGVudGlmaWVyXCJ9O2lmKG4uZm9yRWFjaCgoZT0+e1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgdFtlXXx8KGk9ITApfSkpLGkpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBrZXktdmFsdWUgaWRlbnRpZmllcnMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wifX1yZXR1cm4gZS5uYW1lJiZcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lP3tpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgbmFtZSBtdXN0IGJlIG9mIHN0cmluZyB0eXBlIChpZiBzZXQpXCJ9Ontpc1ZhbGlkOiEwfX1zdGF0aWMgaGFzRW5kcG9pbnRJZChlKXtyZXR1cm4gdm9pZCAwIT09ZS5lbmRwb2ludElkfXN0YXRpYyBpc0NvbnRleHRUeXBlQ29tcGF0aWJsZShlLHQpe3JldHVybiB2b2lkIDA9PT10fHxlPT09dH1zZXRDb250ZXh0R3JvdXBNYXAoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdldENvbnRleHRHcm91cHMoKSl0aGlzLmNvbnRleHRHcm91cHNCeUlkLnNldChlLmlkLG5ldyBNYXApfXN0YXRpYyBhc3luYyBzZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKGUsdCl7Y29uc3Qgbj1hd2FpdCBmaW4uU3lzdGVtLmdldEVudGl0eUluZm8oZS51dWlkLGUubmFtZSk7bGV0IGk7XCJ2aWV3XCI9PT1uLmVudGl0eVR5cGU/aT1hd2FpdCBmaW4uVmlldy53cmFwKGUpOlwid2luZG93XCI9PT1uLmVudGl0eVR5cGUmJihpPWF3YWl0IGZpbi5XaW5kb3cud3JhcChlKSksaT9hd2FpdCBpLnVwZGF0ZU9wdGlvbnMoe2ludGVyb3A6e2N1cnJlbnRDb250ZXh0R3JvdXA6dH19KTpjb25zb2xlLndhcm4oYFNldHRpbmcgQ3VycmVudCBDb250ZXh0IEdyb3VwOiBFbnRpdHkgd2l0aCBpZGVudGl0eSAke2UudXVpZH0sICR7ZS5uYW1lfSBpcyBub3QgYSB3aW5kb3cgb3Igdmlldy4gSXQgaXMgYSAke24uZW50aXR5VHlwZX0gaW5zdGVhZC5gKX13aXJlQ2hhbm5lbChlKXtlLm9uQ29ubmVjdGlvbigoKGUsdCk9PntpZighdGhpcy5pc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCkpdGhyb3cgbmV3IEVycm9yKGBDb25uZWN0aW9uIG5vdCBhdXRob3JpemVkIGZvciAke2UudXVpZH0sICR7ZS5uYW1lfWApO2lmKCFlLmVuZHBvaW50SWQpdGhyb3cgbmV3IEVycm9yKFwiVmVyc2lvbiB0b28gb2xkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBJbnRlcm9wLiBQbGVhc2UgdXBncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYSBtb3JlIHJlY2VudCB2ZXJzaW9uLlwiKTtjb25zdCBuPXtjb250ZXh0R3JvdXBJZDp2b2lkIDAsY29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZX07KG51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCkmJnRoaXMuY29udGV4dEdyb3Vwc0J5SWQuaGFzKHQuY3VycmVudENvbnRleHRHcm91cCkmJihuLmNvbnRleHRHcm91cElkPW51bGw9PXQ/dm9pZCAwOnQuY3VycmVudENvbnRleHRHcm91cCksdGhpcy5pbnRlcm9wQ2xpZW50cy5zZXQoZS5lbmRwb2ludElkLG4pfSkpLGUub25EaXNjb25uZWN0aW9uKChlPT57dGhpcy5pbnRlcm9wQ2xpZW50cy5kZWxldGUoZS5lbmRwb2ludElkKTtjb25zdCB0PXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldChlLm5hbWUpO3QmJmUudXVpZD09PWZpbi5tZS5pZGVudGl0eS51dWlkJiZ0LmZvckVhY2goKGU9PntlLmlzUmVhZHk9ITF9KSksdGhpcy5zZXNzaW9uQ29udGV4dEdyb3VwTWFwLmZvckVhY2goKHQ9Pnt0Lm9uRGlzY29ubmVjdGlvbihlKX0pKX0pKSxlLmJlZm9yZUFjdGlvbigoKGUsdCxuKT0+e2lmKCF0aGlzLmlzQWN0aW9uQXV0aG9yaXplZChlLHQsbikpdGhyb3cgbmV3IEVycm9yKGBBY3Rpb24gKCR7ZX0pIG5vdCBhdXRob3JpemVkIGZvciAke24udXVpZH0sICR7bi5uYW1lfWApO2NvbnNvbGUubG9nKGUsdCxuKX0pKSxlLmFmdGVyQWN0aW9uKGNvbnNvbGUubG9nKSxlLnJlZ2lzdGVyKFwic2V0Q29udGV4dFwiLHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZmlyZUludGVudFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImdldEN1cnJlbnRDb250ZXh0XCIsdGhpcy5nZXRDdXJyZW50Q29udGV4dC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudFwiLHRoaXMuaGFuZGxlSW5mb0ZvckludGVudC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHRcIix0aGlzLmhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLHRoaXMuaGFuZGxlRmlyZWRJbnRlbnRGb3JDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRDb250ZXh0R3JvdXBzXCIsdGhpcy5nZXRDb250ZXh0R3JvdXBzLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJqb2luQ29udGV4dEdyb3VwXCIsdGhpcy5qb2luQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIsdGhpcy5yZW1vdmVGcm9tQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXBcIix0aGlzLmdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0SW5mb0ZvckNvbnRleHRHcm91cFwiLHRoaXMuZ2V0SW5mb0ZvckNvbnRleHRHcm91cC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5jb250ZXh0SGFuZGxlclJlZ2lzdGVyZWQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImludGVudEhhbmRsZXJSZWdpc3RlcmVkXCIsdGhpcy5pbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwicmVtb3ZlQ29udGV4dEhhbmRsZXJcIix0aGlzLnJlbW92ZUNvbnRleHRIYW5kbGVyLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJzZXNzaW9uQ29udGV4dEdyb3VwOmNyZWF0ZUlmTmVlZGVkXCIsdGhpcy5oYW5kbGVKb2luU2Vzc2lvbkNvbnRleHRHcm91cC5iaW5kKHRoaXMpKX1hc3luYyBpc0Nvbm5lY3Rpb25BdXRob3JpemVkKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtY29ubmVjdGlvbi1hdXRob3JpemVkXCIpLmNhdGNoKChlPT57fSkpLCEwfWFzeW5jIGlzQWN0aW9uQXV0aG9yaXplZChlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItaXMtYWN0aW9uLWF1dGhvcml6ZWRcIikuY2F0Y2goKGU9Pnt9KSksITB9fXQuSW50ZXJvcEJyb2tlcj1hfSw3MTM4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJvcENsaWVudD12b2lkIDA7Y29uc3QgYT1uKDk2NTkpLGM9big4MjIpLGQ9bigxNzg3KTtjbGFzcyBoIGV4dGVuZHMgYS5CYXNle2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLG8odGhpcyxyLG5ldyBNYXApLG8odGhpcyxpLHRoaXMud2lyZS5lbnZpcm9ubWVudC53aGVuUmVhZHkoKS50aGVuKCgoKT0+dGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoYGludGVyb3AtYnJva2VyLSR7dH1gLHtwYXlsb2FkOm59KSkpKX1hc3luYyBzZXRDb250ZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXNldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwic2V0Q29udGV4dFwiLHtjb250ZXh0OmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtYWRkLWNvbnRleHQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKTtsZXQgcjt0PyhyPWBpbnZva2VDb250ZXh0SGFuZGxlci0ke3R9LSR7ZC5nZW5lcmF0ZUlkKCl9YCxjb25zb2xlLndhcm4oYFdhcm5pbmc6IEJ5IHByb3ZpZGluZyBhIGNvbnRleHRUeXBlICgke3R9KSwgeW91IGFyZSB1c2luZyB0aGUgZXhwZXJpbWVudGFsIGFkZENvbnRleHRIYW5kbGVyLiBUbyBhdm9pZCBpc3N1ZXMsIG1ha2Ugc3VyZSB5b3UgYXJlIGFkZGluZyB5b3VyIGNvbnRleHQgaGFuZGxlcnMgYXQgdGhlIHRvcCBsZXZlbCBpbiB5b3VyIGFwcGxpY2F0aW9uLmApKTpyPVwiaW52b2tlQ29udGV4dEhhbmRsZXJcIjtjb25zdCBvPWQud3JhcENvbnRleHRIYW5kbGVyKGUscik7cmV0dXJuIG4ucmVnaXN0ZXIocixvKSxhd2FpdCBuLmRpc3BhdGNoKFwiY29udGV4dEhhbmRsZXJSZWdpc3RlcmVkXCIse2hhbmRsZXJJZDpyLGNvbnRleHRUeXBlOnR9KSx7dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpLGF3YWl0IG4uZGlzcGF0Y2goXCJyZW1vdmVDb250ZXh0SGFuZGxlclwiLHtoYW5kbGVySWQ6cn0pfX19YXN5bmMgZ2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1jb250ZXh0LWdyb3Vwc1wiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldENvbnRleHRHcm91cHNcIil9YXN5bmMgam9pbkNvbnRleHRHcm91cChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtam9pbi1jb250ZXh0LWdyb3VwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk5vIGNvbnRleHRHcm91cElkIHNwZWNpZmllZCBmb3Igam9pbkNvbnRleHRHcm91cC5cIik7cmV0dXJuIG4uZGlzcGF0Y2goXCJqb2luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmUsdGFyZ2V0OnR9KX1hc3luYyByZW1vdmVGcm9tQ29udGV4dEdyb3VwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXJlbW92ZS1mcm9tLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJyZW1vdmVGcm9tQ29udGV4dEdyb3VwXCIse3RhcmdldDplfSl9YXN5bmMgZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWFsbC1jbGllbnRzLWluLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAuXCIpO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwXCIse2NvbnRleHRHcm91cElkOmV9KX1hc3luYyBnZXRJbmZvRm9yQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBnZXRJbmZvRm9yQ29udGV4dEdyb3VwLlwiKTtyZXR1cm4gdC5kaXNwYXRjaChcImdldEluZm9Gb3JDb250ZXh0R3JvdXBcIix7Y29udGV4dEdyb3VwSWQ6ZX0pfWFzeW5jIGZpcmVJbnRlbnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50XCIsZSl9YXN5bmMgcmVnaXN0ZXJJbnRlbnRIYW5kbGVyKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1yZWdpc3Rlci1pbnRlbnQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSxyPWBpbnRlbnQtaGFuZGxlci0ke3R9YCxvPXRoaXMud3JhcEludGVudEhhbmRsZXIoZSxyKTt0cnl7YXdhaXQgbi5yZWdpc3RlcihyLG8pLGF3YWl0IG4uZGlzcGF0Y2goXCJpbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZFwiLHtoYW5kbGVySWQ6cn0pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byByZWdpc3RlciBpbnRlbnQgaGFuZGxlclwiKX1yZXR1cm57dW5zdWJzY3JpYmU6YXN5bmMoKT0+e24ucmVtb3ZlKHIpfX19YXN5bmMgZ2V0Q3VycmVudENvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWN1cnJlbnQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEN1cnJlbnRDb250ZXh0XCIse2NvbnRleHRUeXBlOmV9KX1hc3luYyBnZXRJbmZvRm9ySW50ZW50KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LWdldC1pbmZvLWZvci1pbnRlbnRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJnZXRJbmZvRm9ySW50ZW50XCIsZSl9YXN5bmMgZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWludGVudHMtYnktY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsZSl9YXN5bmMgZmlyZUludGVudEZvckNvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZmlyZS1pbnRlbnQtZm9yLWNvbnRleHRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJmaXJlSW50ZW50Rm9yQ29udGV4dFwiLGUpfWFzeW5jIGpvaW5TZXNzaW9uQ29udGV4dEdyb3VwKGUpe3RyeXtjb25zdCB0PXModGhpcyxyKS5nZXQoZSk7aWYodClyZXR1cm4gdC5nZXRVc2VySW5zdGFuY2UoKTtjb25zdCBuPWF3YWl0IHModGhpcyxpKSx7aGFzQ29uZmxpY3Q6b309YXdhaXQgbi5kaXNwYXRjaChcInNlc3Npb25Db250ZXh0R3JvdXA6Y3JlYXRlSWZOZWVkZWRcIix7c2Vzc2lvbkNvbnRleHRHcm91cElkOmV9KTtvJiZjb25zb2xlLndhcm4oYEEgKG5vbi1zZXNzaW9uKSBjb250ZXh0IGdyb3VwIHdpdGggdGhlIG5hbWUgXCIke2V9XCIgYWxyZWFkeSBleGlzdHMuIElmIHlvdSBhcmUgdHJ5aW5nIHRvIGpvaW4gYSBDb250ZXh0IEdyb3VwLCBjYWxsIGpvaW5Db250ZXh0R3JvdXAgaW5zdGVhZC5gKTtjb25zdCBhPW5ldyBjLmRlZmF1bHQodGhpcy53aXJlLHModGhpcyxpKSxlKTtyZXR1cm4gcyh0aGlzLHIpLnNldChlLGEpLGEuZ2V0VXNlckluc3RhbmNlKCl9Y2F0Y2godCl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIHRyeWluZyB0byBjcmVhdGUgU2Vzc2lvbiBDb250ZXh0IEdyb3VwIHdpdGggaWQgXCIke2V9XCI6ICR7dH1gKSx0fX13cmFwSW50ZW50SGFuZGxlcihlLHQpe3JldHVybiBhc3luYyBuPT57dHJ5e2F3YWl0IGUobil9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihgRXJyb3IgdGhyb3duIGJ5IGhhbmRsZXIgJHt0fTogJHtlfWApLGV9fX19dC5JbnRlcm9wQ2xpZW50PWgsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwfSw3MTE1OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oODcwNik7dC5kZWZhdWx0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcm92aWRlcj1lLHRoaXMuaWQ9dCx0aGlzLmxhc3RDb250ZXh0PXZvaWQgMCx0aGlzLmNvbnRleHRHcm91cE1hcD1uZXcgTWFwLHRoaXMuY2xpZW50cz1uZXcgTWFwLHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKX1yZWdpc3Rlckxpc3RlbmVycygpe3RoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6Z2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLmdldEN1cnJlbnRDb250ZXh0LmJpbmQodGhpcykpLHRoaXMucHJvdmlkZXIucmVnaXN0ZXIoYHNlc3Npb25Db250ZXh0R3JvdXA6c2V0Q29udGV4dC0ke3RoaXMuaWR9YCx0aGlzLnNldENvbnRleHQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyQWRkZWQtJHt0aGlzLmlkfWAsdGhpcy5oYW5kbGVyQWRkZWQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpoYW5kbGVyUmVtb3ZlZC0ke3RoaXMuaWR9YCx0aGlzLmhhbmRsZXJSZW1vdmVkLmJpbmQodGhpcykpfWdldEN1cnJlbnRDb250ZXh0KGUpe3JldHVybiBlLnR5cGU/dGhpcy5jb250ZXh0R3JvdXBNYXAuZ2V0KGUudHlwZSk6dGhpcy5sYXN0Q29udGV4dH1zZXRDb250ZXh0KGUsdCl7Y29uc3R7Y29udGV4dDpufT1lLHI9aS5JbnRlcm9wQnJva2VyLmNoZWNrQ29udGV4dEludGVncml0eShuKTtpZighMT09PXIuaXNWYWxpZCl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZXQgQ29udGV4dCAtIGJhZCBDb250ZXh0LiBSZWFzb246ICR7ci5yZWFzb259LiBDb250ZXh0OiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2lmKCF0aGlzLmdldENsaWVudFN0YXRlKHQpKXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIFNlc3Npb24gQ2xpZW50IFN0YXRlIE1hcGApO3RoaXMuY29udGV4dEdyb3VwTWFwLnNldChuLnR5cGUsbiksdGhpcy5sYXN0Q29udGV4dD1uLEFycmF5LmZyb20odGhpcy5jbGllbnRzLnZhbHVlcygpKS5mb3JFYWNoKChlPT57dmFyIHQ7bnVsbD09PSh0PWUuY29udGV4dEhhbmRsZXJzLmdldChuLnR5cGUpKXx8dm9pZCAwPT09dHx8dC5mb3JFYWNoKCh0PT57dGhpcy5wcm92aWRlci5kaXNwYXRjaChlLmNsaWVudElkZW50aXR5LHQsbil9KSksZS5nbG9iYWxIYW5kbGVyJiZ0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKGUuY2xpZW50SWRlbnRpdHksZS5nbG9iYWxIYW5kbGVyLG4pfSkpfWdldENsaWVudFN0YXRlKGUpe3JldHVybiB0aGlzLmNsaWVudHMuZ2V0KGUuZW5kcG9pbnRJZCl9aGFuZGxlckFkZGVkKGUsdCl7Y29uc3R7aGFuZGxlcklkOm4sY29udGV4dFR5cGU6aX09ZSxyPXRoaXMuZ2V0Q2xpZW50U3RhdGUodCk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgd2l0aCBJZGVudGl0eTogJHt0LnV1aWR9ICR7dC5uYW1lfSBub3QgaW4gQ2xpZW50IFN0YXRlIE1hcGApO2lmKGkpe2NvbnN0IGU9ci5jb250ZXh0SGFuZGxlcnMuZ2V0KGkpfHxbXTtyLmNvbnRleHRIYW5kbGVycy5zZXQoaSxbLi4uZSxuXSk7Y29uc3Qgbz10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoaSk7byYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4sbyl9ZWxzZSByLmdsb2JhbEhhbmRsZXI9bixbLi4udGhpcy5jb250ZXh0R3JvdXBNYXAua2V5cygpXS5mb3JFYWNoKChlPT57Y29uc3QgaT10aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoZSk7aSYmdGhpcy5wcm92aWRlci5kaXNwYXRjaCh0LG4saSl9KSl9aGFuZGxlclJlbW92ZWQoZSx0KXtjb25zdHtoYW5kbGVySWQ6bn09ZSxpPXRoaXMuY2xpZW50cy5nZXQodC5lbmRwb2ludElkKTtpPyhBcnJheS5mcm9tKGkuY29udGV4dEhhbmRsZXJzKS5mb3JFYWNoKCgoWyxlXSk9Pntjb25zdCB0PWUuaW5kZXhPZihuKTt0Pi0xJiZlLnNwbGljZSh0LDEpfSkpLGkuZ2xvYmFsSGFuZGxlcj09PW4mJihpLmdsb2JhbEhhbmRsZXI9dm9pZCAwKSk6Y29uc29sZS53YXJuKGBUcnlpbmcgdG8gcmVtb3ZlIGEgaGFuZGxlciBmcm9tIGEgY2xpZW50IHRoYXQgaXNuJ3QgbWFwcGVkLiBoYW5kbGVySWQ6ICR7bn0uIGNsaWVudElkZW50aXR5OiAke3R9YCl9cmVnaXN0ZXJOZXdDbGllbnQoZSl7aWYoIXRoaXMuY2xpZW50cy5oYXMoZS5lbmRwb2ludElkKSl7Y29uc3QgdD17Y29udGV4dEhhbmRsZXJzOm5ldyBNYXAsY2xpZW50SWRlbnRpdHk6ZSxnbG9iYWxIYW5kbGVyOnZvaWQgMH07dGhpcy5jbGllbnRzLnNldChlLmVuZHBvaW50SWQsdCl9fW9uRGlzY29ubmVjdGlvbihlKXt0aGlzLmNsaWVudHMuZGVsZXRlKGUuZW5kcG9pbnRJZCl9fX0sODIyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBzPW4oOTY1OSksYT1uKDE3ODcpO2NsYXNzIGMgZXh0ZW5kcyBzLkJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUpLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmlkPW4scih0aGlzLGksdCl9YXN5bmMgc2V0Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1zZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpzZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCxjb250ZXh0OmV9KX1hc3luYyBnZXRDdXJyZW50Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1nZXQtY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgbyh0aGlzLGkpKS5kaXNwYXRjaChgc2Vzc2lvbkNvbnRleHRHcm91cDpnZXRDb250ZXh0LSR7dGhpcy5pZH1gLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6dGhpcy5pZCx0eXBlOmV9KX1hc3luYyBhZGRDb250ZXh0SGFuZGxlcihlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1zZXNzaW9uLWNvbnRleHQtZ3JvdXAtYWRkLWhhbmRsZXJcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCBvKHRoaXMsaSk7bGV0IHI7cmV0dXJuIHI9dD9gc2Vzc2lvbkNvbnRleHRIYW5kbGVyOmludm9rZS0ke3RoaXMuaWR9LSR7dH0tJHthLmdlbmVyYXRlSWQoKX1gOmBzZXNzaW9uQ29udGV4dEhhbmRsZXI6aW52b2tlLSR7dGhpcy5pZH1gLG4ucmVnaXN0ZXIocixhLndyYXBDb250ZXh0SGFuZGxlcihlLHIpKSxuLmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJBZGRlZC0ke3RoaXMuaWR9YCx7aGFuZGxlcklkOnIsY29udGV4dFR5cGU6dH0pLHt1bnN1YnNjcmliZTphd2FpdCB0aGlzLmNyZWF0ZVVuc3Vic2NyaWJlQ2Iocil9fWFzeW5jIGNyZWF0ZVVuc3Vic2NyaWJlQ2IoZSl7Y29uc3QgdD1hd2FpdCBvKHRoaXMsaSk7cmV0dXJuIGFzeW5jKCk9Pnt0LnJlbW92ZShlKSxhd2FpdCB0LmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJSZW1vdmVkLSR7dGhpcy5pZH1gLHtoYW5kbGVySWQ6ZX0pfX1nZXRVc2VySW5zdGFuY2UoKXtyZXR1cm57aWQ6dGhpcy5pZCxzZXRDb250ZXh0OmEud3JhcEluVHJ5Q2F0Y2godGhpcy5zZXRDb250ZXh0LmJpbmQodGhpcyksXCJGYWlsZWQgdG8gc2V0IGNvbnRleHQ6IFwiKSxnZXRDdXJyZW50Q29udGV4dDphLndyYXBJblRyeUNhdGNoKHRoaXMuZ2V0Q3VycmVudENvbnRleHQuYmluZCh0aGlzKSxcIkZhaWxlZCB0byBnZXQgY29udGV4dDogXCIpLGFkZENvbnRleHRIYW5kbGVyOmEud3JhcEluVHJ5Q2F0Y2godGhpcy5hZGRDb250ZXh0SGFuZGxlci5iaW5kKHRoaXMpLFwiRmFpbGVkIHRvIGFkZCBjb250ZXh0IGhhbmRsZXI6IFwiKX19fXQuZGVmYXVsdD1jLGk9bmV3IFdlYWtNYXB9LDg3MDY6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyOTc3KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig3MTM4KSx0KSxyKG4oMjA1NyksdCl9LDE3ODc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkJST0tFUl9FUlJPUlM9dC5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZz10LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcj10LndyYXBDb250ZXh0SGFuZGxlcj10LndyYXBJblRyeUNhdGNoPXQuZ2VuZXJhdGVJZD12b2lkIDAsdC5nZW5lcmF0ZUlkPSgpPT5gJHtNYXRoLnJhbmRvbSgpfSR7RGF0ZS5ub3coKX1gLHQud3JhcEluVHJ5Q2F0Y2g9KGUsdCk9PiguLi5uKT0+e3RyeXtyZXR1cm4gZSguLi5uKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoKHR8fFwiXCIpK2UpfX0sdC53cmFwQ29udGV4dEhhbmRsZXI9KGUsdCk9PmFzeW5jIG49Pnt0cnl7YXdhaXQgZShuKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKGBFcnJvciB0aHJvd24gYnkgaGFuZGxlciAke3R9IGZvciBjb250ZXh0IHR5cGUgJHtuLnR5cGV9OiAke2V9YCksZX19LHQuZ2VuZXJhdGVPdmVycmlkZUVycm9yPShlLHQpPT5gWW91IGhhdmUgdHJpZWQgdG8gdG8gdXNlICR7ZX0gYnV0ICR7dH0gaGFzIG5vdCBiZWVuIG92ZXJyaWRkZW4gaW4gdGhlIEludGVyb3AgQnJva2VyLiBQbGVhc2Ugb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbi4gUmVmZXIgdG8gb3VyIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mby5gLHQuZ2VuZXJhdGVPdmVycmlkZVdhcm5pbmc9KGUsdCxuLGkpPT57Y29uc3R7dXVpZDpyLG5hbWU6b309aTtyZXR1cm5gRW50aXR5IHdpdGggaWRlbnRpdHk6ICR7cn0vJHtvfSBoYXMgY2FsbGVkICR7ZX0gb3IgJHt0fSBidXQgJHtufSBoYXMgbm90IGJlZW4gb3ZlcnJpZGRlbi5gfSx0LkJST0tFUl9FUlJPUlM9e2ZpcmVJbnRlbnQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJmaXJlSW50ZW50XCIsXCJoYW5kbGVGaXJlZEludGVudFwiKSxmaXJlSW50ZW50Rm9yQ29udGV4dDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImZpcmVJbnRlbnRGb3JDb250ZXh0XCIsXCJoYW5kbGVGaXJlZEludGVudEZvckNvbnRleHRcIiksZ2V0SW5mb0ZvckludGVudDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImdldEluZm9Gb3JJbnRlbnRcIixcImhhbmRsZUluZm9Gb3JJbnRlbnRcIiksZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHQ6dC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3IoXCJnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dFwiLFwiaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHRcIil9fSw5NjQxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1lPXQuZ2V0QmFzZU1lPXZvaWQgMDtjb25zdCBpPW4oNDE2OSkscj1uKDY3MjApLG89big0OTk3KTtmdW5jdGlvbiBzKGUsdCxuKXtyZXR1cm57aXNWaWV3Olwidmlld1wiPT09ZSxpc1dpbmRvdzpcIndpbmRvd1wiPT09ZSxpc0ZyYW1lOlwiaWZyYW1lXCI9PT1lLGlzRXh0ZXJuYWw6XCJleHRlcm5hbCBjb25uZWN0aW9uXCI9PT1lLHV1aWQ6dCxuYW1lOm4sZW50aXR5VHlwZTplfX10LmdldEJhc2VNZT1zLHQuZ2V0TWU9ZnVuY3Rpb24oZSl7Y29uc3R7dXVpZDp0LG5hbWU6bixlbnRpdHlUeXBlOmF9PWUubWUsYz17c2V0Q29udGV4dCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxhZGRDb250ZXh0SGFuZGxlcigpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxnZXRDb250ZXh0R3JvdXBzKCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9LGpvaW5Db250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm9wIEFQSSBoYXMgbm90IGJlZW4gaW5zdGFudGlhdGVkLiBFaXRoZXIgY29ubmVjdGlvbiBoYXMgZmFpbGVkIG9yIHlvdSBoYXZlIG5vdCBkZWNsYXJlZCBpbnRlcm9wIGluIHlvdXIgY29uZmlnLlwiKX0scmVtb3ZlRnJvbUNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAoKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm9wIEFQSSBoYXMgbm90IGJlZW4gaW5zdGFudGlhdGVkLiBFaXRoZXIgY29ubmVjdGlvbiBoYXMgZmFpbGVkIG9yIHlvdSBoYXZlIG5vdCBkZWNsYXJlZCBpbnRlcm9wIGluIHlvdXIgY29uZmlnLlwiKX0sZ2V0SW5mb0ZvckNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfX07c3dpdGNoKGEpe2Nhc2VcInZpZXdcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgaS5WaWV3KGUse3V1aWQ6dCxuYW1lOm59KSxzKGEsdCxuKSx7aW50ZXJvcDpjfSk7Y2FzZVwid2luZG93XCI6cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IG8uX1dpbmRvdyhlLHt1dWlkOnQsbmFtZTpufSkscyhhLHQsbikse2ludGVyb3A6Y30pO2Nhc2VcImlmcmFtZVwiOnJldHVybiBPYmplY3QuYXNzaWduKG5ldyByLl9GcmFtZShlLHt1dWlkOnQsbmFtZTpufSkscyhhLHQsbikse2ludGVyb3A6Y30pO2RlZmF1bHQ6cmV0dXJuey4uLnMoYSx0LG4pfX19fSw3MjgzOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDYzOTQpLG89big5ODcyKTtjbGFzcyBzIGV4dGVuZHMgaS5CYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy5fY2hhbm5lbD10LHRoaXMuX2luaXRpYWxpemVyPSguLi5lKT0+dGhpcy53aXJlLmVudmlyb25tZW50LmdldFByb3ZpZGVySW5pdGlhbGl6ZXIoKS50aGVuKCh0PT50KHRoaXMud2lyZS5lbnZpcm9ubWVudCkoLi4uZSkpKSx0aGlzLkxheW91dD1uZXcgci5MYXlvdXRNb2R1bGUodGhpcy53aXJlKX1hc3luYyBpbml0KGUpe2NvbnN0IHQ9bnVsbD09ZT92b2lkIDA6ZS5vdmVycmlkZUNhbGxiYWNrLG49YXdhaXQgdGhpcy5maW4uSW50ZXJvcC5pbml0KHRoaXMuZmluLm1lLnV1aWQsbnVsbD09ZT92b2lkIDA6ZS5pbnRlcm9wT3ZlcnJpZGUpO3JldHVybiB3aW5kb3cuaW50ZXJvcEJyb2tlcj1uLHRoaXMuX2luaXRpYWxpemVyKHQsbil9YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS13cmFwXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLlBsYXRmb3JtKHt1dWlkOmUudXVpZH0sdGhpcy5fY2hhbm5lbCl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0td3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLlBsYXRmb3JtKHt1dWlkOmUudXVpZH0sdGhpcy5fY2hhbm5lbCl9YXN5bmMgZ2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcCh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXBTeW5jKHt1dWlkOnRoaXMud2lyZS5tZS51dWlkfSl9c3RhcnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc3RhcnRcIikuY2F0Y2goKGU9Pnt9KSksbmV3IFByb21pc2UoKGFzeW5jKHQsbik9Pnt0cnl7Y29uc3R7dXVpZDpufT1lLGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uX2NyZWF0ZSh7Li4uZSxpc1BsYXRmb3JtQ29udHJvbGxlcjohMH0pO2kub25jZShcInBsYXRmb3JtLWFwaS1yZWFkeVwiLCgoKT0+dCh0aGlzLndyYXBTeW5jKHt1dWlkOm59KSkpKSxpLl9ydW4oe3V1aWQ6bn0pfWNhdGNoKGUpe24oZSl9fSkpfXN0YXJ0RnJvbU1hbmlmZXN0KGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc3RhcnQtZnJvbS1tYW5pZmVzdFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgUHJvbWlzZSgoYXN5bmMobixpKT0+e3RyeXtjb25zdCBpPWF3YWl0IHRoaXMuZmluLkFwcGxpY2F0aW9uLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSk7aS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT5uKHRoaXMud3JhcFN5bmMoe3V1aWQ6aS5pZGVudGl0eS51dWlkfSkpKSksaS5fcnVuKHQpfWNhdGNoKGUpe2koZSl9fSkpfX10LmRlZmF1bHQ9c30sOTg3MjpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5QbGF0Zm9ybT12b2lkIDA7Y29uc3Qgbz1uKDk2NTkpLHM9big0OTk5KSxhPW5ldyBNYXA7Y2xhc3MgYyBleHRlbmRzIG8uRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcih0LndpcmUsXCJhcHBsaWNhdGlvblwiLGUudXVpZCksdGhpcy5nZXRDbGllbnQ9ZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWNsaWVudFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ZXx8dGhpcy5pZGVudGl0eSx7dXVpZDpufT10O2lmKCFhLmhhcyhuKSl7Y29uc3QgZT1yKHRoaXMsaSkuY2FsbCh0aGlzLG4pO2Euc2V0KG4sZSl9cmV0dXJuIGEuZ2V0KG4pfSxpLnNldCh0aGlzLChhc3luYyBlPT57dHJ5e2NvbnN0IHQ9YGN1c3RvbS1mcmFtZS0ke2V9YCxuPWF3YWl0IHRoaXMuX2NoYW5uZWwuY29ubmVjdCh0LHt3YWl0OiExfSk7cmV0dXJuIG4ub25EaXNjb25uZWN0aW9uKCgoKT0+e2EuZGVsZXRlKGUpfSkpLG59Y2F0Y2godCl7dGhyb3cgYS5kZWxldGUoZSksbmV3IEVycm9yKFwiVGhlIHRhcmdldGVkIFBsYXRmb3JtIGlzIG5vdCBjdXJyZW50bHkgcnVubmluZy4gTGlzdGVuIGZvciBhcHBsaWNhdGlvbi1zdGFydGVkIGV2ZW50IGZvciB0aGUgZ2l2ZW4gVXVpZC5cIil9fSkpLHRoaXMubGF1bmNoTGVnYWN5TWFuaWZlc3Q9dGhpcy5sYXVuY2hDb250ZW50TWFuaWZlc3Q7Y29uc3Qgbj1zLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYobil0aHJvdyBuZXcgRXJyb3Iobik7dGhpcy5fY2hhbm5lbD10LHRoaXMuaWRlbnRpdHk9e3V1aWQ6ZS51dWlkfSx0aGlzLkxheW91dD10aGlzLmZpbi5QbGF0Zm9ybS5MYXlvdXQsdGhpcy5BcHBsaWNhdGlvbj10aGlzLmZpbi5BcHBsaWNhdGlvbi53cmFwU3luYyh0aGlzLmlkZW50aXR5KX1hc3luYyBjcmVhdGVWaWV3KGUsdCxuKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWNyZWF0ZS12aWV3XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgaT1hd2FpdCB0aGlzLmdldENsaWVudCgpLHI9YXdhaXQgaS5kaXNwYXRjaChcImNyZWF0ZS12aWV3XCIse3RhcmdldDp0LG9wdHM6ZSx0YXJnZXRWaWV3Om59KTtpZighcnx8cy52YWxpZGF0ZUlkZW50aXR5KHIuaWRlbnRpdHkpKXRocm93IG5ldyBFcnJvcihgV2hlbiBvdmVyd3JpdGluZyB0aGUgY3JlYXRlVmlldyBjYWxsLCBwbGVhc2UgcmV0dXJuIGFuIG9iamVjdCB0aGF0IGhhcyBhIHZhbGlkICdpZGVudGl0eScgcHJvcGVydHk6ICR7SlNPTi5zdHJpbmdpZnkocil9YCk7cmV0dXJuIHRoaXMuZmluLlZpZXcud3JhcFN5bmMoci5pZGVudGl0eSl9YXN5bmMgY3JlYXRlV2luZG93KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY3JlYXRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKTtlLnJlYXNvbnx8KGUucmVhc29uPVwiYXBpLWNhbGxcIik7Y29uc3Qgbj1hd2FpdCB0LmRpc3BhdGNoKFwiY3JlYXRlLXZpZXctY29udGFpbmVyXCIsZSk7aWYoIW58fHMudmFsaWRhdGVJZGVudGl0eShuLmlkZW50aXR5KSl0aHJvdyBuZXcgRXJyb3IoYFdoZW4gb3ZlcndyaXRpbmcgdGhlIGNyZWF0ZVdpbmRvdyBjYWxsLCBwbGVhc2UgcmV0dXJuIGFuIG9iamVjdCB0aGF0IGhhcyBhIHZhbGlkICdpZGVudGl0eScgcHJvcGVydHk6ICR7SlNPTi5zdHJpbmdpZnkobil9YCk7Y29uc3R7aWRlbnRpdHk6aX09bixyPXRoaXMuZmluLldpbmRvdy53cmFwU3luYyhpKTtyZXR1cm4gci5uYW1lPWkubmFtZSxyLnV1aWQ9aS51dWlkLHJ9YXN5bmMgcXVpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXF1aXRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJxdWl0XCIpfWFzeW5jIGNsb3NlVmlldyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWNsb3NlLXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7YXdhaXQgdC5kaXNwYXRjaChcImNsb3NlLXZpZXdcIix7dmlldzplfSl9YXN5bmMgcmVwYXJlbnRWaWV3KGUsdCl7dmFyIG47Y29uc29sZS53YXJuKFwiUGxhdGZvcm0ucmVwYXJlbnRWaWV3IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgUGxhdGZvcm0uY3JlYXRlVmlld1wiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXJlcGFyZW50LXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBpPXsuLi5lLHV1aWQ6bnVsbCE9PShuPWUudXVpZCkmJnZvaWQgMCE9PW4/bjp0aGlzLmlkZW50aXR5LnV1aWR9LHI9YXdhaXQgdGhpcy5maW4uVmlldy53cmFwKGkpLG89YXdhaXQgci5nZXRPcHRpb25zKCk7cmV0dXJuIHRoaXMuY3JlYXRlVmlldyhvLHQpfWFzeW5jIGdldFNuYXBzaG90KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LXNuYXBzaG90XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkpLmRpc3BhdGNoKFwiZ2V0LXNuYXBzaG90XCIpfWFzeW5jIGFwcGx5U25hcHNob3QoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWFwcGx5LXNuYXBzaG90XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1cIlJlcXVlc3RlZCBzbmFwc2hvdCBtdXN0IGJlIGEgdmFsaWQgU25hcHNob3Qgb2JqZWN0LCBvciBhIHVybCBvciBmaWxlcGF0aCB0byBzdWNoIGFuIG9iamVjdC5cIjtsZXQgaTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0cnl7aT0oYXdhaXQgdGhpcy5fY2hhbm5lbC53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pKS5wYXlsb2FkLmRhdGF9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGAke259OiAke2V9YCl9ZWxzZSBpPWU7aWYoIWkud2luZG93cyl0aHJvdyBuZXcgRXJyb3Iobik7Y29uc3Qgcj1hd2FpdCB0aGlzLmdldENsaWVudCgpO3JldHVybiBhd2FpdCByLmRpc3BhdGNoKFwiYXBwbHktc25hcHNob3RcIix7c25hcHNob3Q6aSxvcHRpb25zOnR9KSx0aGlzfWFzeW5jIGZldGNoTWFuaWZlc3QoZSl7cmV0dXJuKGF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkpLmRpc3BhdGNoKFwicGxhdGZvcm0tZmV0Y2gtbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZX0pfWFzeW5jIGxhdW5jaENvbnRlbnRNYW5pZmVzdChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWxhdW5jaC1jb250ZW50LW1hbmlmZXN0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpLG49YXdhaXQgdGhpcy5mZXRjaE1hbmlmZXN0KGUpO3JldHVybiB0LmRpc3BhdGNoKFwibGF1bmNoLWludG8tcGxhdGZvcm1cIix7bWFuaWZlc3Q6bn0pLHRoaXN9YXN5bmMgc2V0V2luZG93Q29udGV4dChlPXt9LHQpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tc2V0LXdpbmRvdy1jb250ZXh0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksIWUpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgYSBzZXJpYWxpemFibGUgb2JqZWN0IG9yIHN0cmluZyB0byBzZXQgdGhlIGNvbnRleHQuXCIpO2NvbnN0IG49YXdhaXQgdGhpcy5nZXRDbGllbnQoKSx7ZW50aXR5VHlwZTppfT10P2F3YWl0IHRoaXMuZmluLlN5c3RlbS5nZXRFbnRpdHlJbmZvKHQudXVpZCx0Lm5hbWUpOnRoaXMuZmluLm1lO2F3YWl0IG4uZGlzcGF0Y2goXCJzZXQtd2luZG93LWNvbnRleHRcIix7Y29udGV4dDplLGVudGl0eVR5cGU6aSx0YXJnZXQ6dHx8e3V1aWQ6dGhpcy5maW4ubWUudXVpZCxuYW1lOnRoaXMuZmluLm1lLm5hbWV9fSl9YXN5bmMgZ2V0V2luZG93Q29udGV4dChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLWdldC13aW5kb3ctY29udGV4dFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKSx7ZW50aXR5VHlwZTpufT1lP2F3YWl0IHRoaXMuZmluLlN5c3RlbS5nZXRFbnRpdHlJbmZvKGUudXVpZCxlLm5hbWUpOnRoaXMuZmluLm1lO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0LXdpbmRvdy1jb250ZXh0XCIse3RhcmdldDplfHx7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dGhpcy5maW4ubWUubmFtZX0sZW50aXR5VHlwZTpufSl9fXQuUGxhdGZvcm09YyxpPW5ldyBXZWFrTWFwfSw0Mzg2OihlLHQpPT57ZnVuY3Rpb24gbihlKXtzd2l0Y2goZSl7Y2FzZVwiY29sdW1uc1wiOmNhc2VcImdyaWRcIjpjYXNlXCJyb3dzXCI6Y2FzZVwidGFic1wiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXNWYWxpZFByZXNldFR5cGU9dm9pZCAwLHQuaXNWYWxpZFByZXNldFR5cGU9bix0LmRlZmF1bHQ9e2lzVmFsaWRQcmVzZXRUeXBlOm59fSw2MDk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89big3MjgzKTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig5ODcyKSx0KX0sNDIxMDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5MYXlvdXRNb2R1bGU9dm9pZCAwO2NvbnN0IHM9big4MTExKSxhPW4oOTY1OSk7Y2xhc3MgYyBleHRlbmRzIGEuQmFzZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksaS5zZXQodGhpcyx2b2lkIDApLHRoaXMuaW5pdD1hc3luYyhlPXt9KT0+e2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWluaXRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIkxheW91dC5pbml0IGNhbiBvbmx5IGJlIGNhbGxlZCBmcm9tIGEgV2luZG93IGNvbnRleHQuXCIpO2lmKHIodGhpcyxpKSl0aHJvdyBuZXcgRXJyb3IoXCJMYXlvdXQgZm9yIHRoaXMgd2luZG93IGFscmVhZHkgaW5pdGlhbGl6ZWQsIHBsZWFzZSB1c2UgTGF5b3V0LnJlcGxhY2UgY2FsbCB0byByZXBsYWNlIHRoZSBsYXlvdXQuXCIpO2NvbnN0IHQ9YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LmdldE1hbmFnZXJDb25zdHJ1Y3RvcigpO28odGhpcyxpLG5ldyB0KTtsZXR7bGF5b3V0Om4sY29udGFpbmVySWQ6c309ZTtuJiZjb25zb2xlLndhcm4oXCJXZSByZWNvbW1lbmQgdXNpbmcgYSBsYXlvdXQgaW4gd2luZG93IG9wdGlvbnMuXFxuICAgICAgICAgICAgICAgIFRoaXMgbGF5b3V0IGhhcyBub3QgYmVlbiBzYW5pdGl6ZWQgYW5kIHVuZXhwZWN0ZWQgYmVoYXZpb3IgY2FuIG9jY3VyLlwiKSxuPW58fChhd2FpdCB0aGlzLmZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKS5nZXRPcHRpb25zKCkpLmxheW91dCxzPXN8fFwibGF5b3V0LWNvbnRhaW5lclwiO2NvbnN0IGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocyk7cmV0dXJuIGF3YWl0IHIodGhpcyxpKS5pbml0TWFuYWdlcigpLGF3YWl0IHIodGhpcyxpKS5jcmVhdGVMYXlvdXQobixhKSxPYmplY3QuYXNzaWduKHRoaXMuZ2V0Q3VycmVudFN5bmMoKSx7bGF5b3V0TWFuYWdlcjpyKHRoaXMsaSl9KX19YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtd3JhcFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgcy5MYXlvdXQoZSx0aGlzLndpcmUpfXdyYXBTeW5jKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksbmV3IHMuTGF5b3V0KGUsdGhpcy53aXJlKX1hc3luYyBnZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHQuICBPbmx5IFdpbmRvd3MgY2FuIGhhdmUgYSBMYXlvdXQuXCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMuZmluLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWdldC1jdXJyZW50LXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMuZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHQuICBPbmx5IFdpbmRvd3MgY2FuIGhhdmUgYSBMYXlvdXQuXCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMuZmluLm1lO3JldHVybiB0aGlzLndyYXBTeW5jKHt1dWlkOmUsbmFtZTp0fSl9fXQuTGF5b3V0TW9kdWxlPWMsaT1uZXcgV2Vha01hcH0sODExMTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5MYXlvdXQ9dm9pZCAwO2NvbnN0IGk9big0OTk5KSxyPW4oNDM4Niksbz1uKDk2NTkpO2NsYXNzIHMgZXh0ZW5kcyBvLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcih0KSx0aGlzLnJlcGxhY2U9YXN5bmMgZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LXJlcGxhY2VcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpO2F3YWl0IHQuZGlzcGF0Y2goXCJyZXBsYWNlLWxheW91dFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eSxvcHRzOntsYXlvdXQ6ZX19KX0sdGhpcy5yZXBsYWNlVmlldz1hc3luYyhlLHQpPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtcmVwbGFjZS12aWV3XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKTthd2FpdCBuLmRpc3BhdGNoKFwicmVwbGFjZS12aWV3XCIse3RhcmdldDp0aGlzLmlkZW50aXR5LG9wdHM6e3ZpZXdUb1JlcGxhY2U6ZSxuZXdWaWV3OnR9fSl9LHRoaXMuYXBwbHlQcmVzZXQ9YXN5bmMgZT0+e3RoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LWFwcGx5LXByZXNldFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMucGxhdGZvcm0uZ2V0Q2xpZW50KCkse3ByZXNldFR5cGU6bn09ZTtpZighbnx8IXIuaXNWYWxpZFByZXNldFR5cGUobikpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGFwcGx5IHByZXNldCBsYXlvdXQsIHBsZWFzZSBpbmNsdWRlIGFuIGFwcGxpY2FibGUgcHJlc2V0VHlwZSBwcm9wZXJ0eSBpbiB0aGUgUHJlc2V0TGF5b3V0T3B0aW9ucy5cIik7YXdhaXQgdC5kaXNwYXRjaChcImFwcGx5LXByZXNldC1sYXlvdXRcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHksb3B0czp7cHJlc2V0VHlwZTpufX0pfTtjb25zdCBuPWkudmFsaWRhdGVJZGVudGl0eShlKTtpZihuKXRocm93IG5ldyBFcnJvcihuKTt0aGlzLmlkZW50aXR5PWUsdGhpcy5wbGF0Zm9ybT10aGlzLmZpbi5QbGF0Zm9ybS53cmFwU3luYyh7dXVpZDplLnV1aWR9KSxlLnV1aWQ9PT10aGlzLmZpbi5tZS51dWlkJiZlLm5hbWU9PT10aGlzLmZpbi5tZS5uYW1lJiYodGhpcy5pbml0PXRoaXMuZmluLlBsYXRmb3JtLkxheW91dC5pbml0KX1hc3luYyBnZXRDb25maWcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWNvbmZpZ1wiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJnZXQtZnJhbWUtc25hcHNob3RcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHl9KX19dC5MYXlvdXQ9c30sNjM5NDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSkscihuKDQyMTApLHQpLHIobig4MTExKSx0KX0sMTc0NjooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9bigyODc4KSxvPW4oNjIxNSk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyBpbml0KGUpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWluaXRcIikuY2F0Y2goKGU9Pnt9KSksXCJvYmplY3RcIiE9dHlwZW9mIGV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuZ2V0U25hcHNob3R8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUuYXBwbHlTbmFwc2hvdCl0aHJvdyBuZXcgRXJyb3IoXCJ5b3UgbXVzdCBwYXNzIGluIGEgdmFsaWQgU25hcHNob3RQcm92aWRlclwiKTtjb25zdCB0PWF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jcmVhdGUoby5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lKGZpbi5tZS5pZGVudGl0eSkpO3QucmVnaXN0ZXIoXCJnZXQtc25hcHNob3RcIiwoYXN5bmMoKT0+KHtzbmFwc2hvdDphd2FpdCBlLmdldFNuYXBzaG90KCl9KSkpLHQucmVnaXN0ZXIoXCJhcHBseS1zbmFwc2hvdFwiLCgoe3NuYXBzaG90OnR9KT0+ZS5hcHBseVNuYXBzaG90KHQpKSl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgci5TbmFwc2hvdFNvdXJjZSh0aGlzLndpcmUsZSl9YXN5bmMgd3JhcChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2Utd3JhcFwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXBTeW5jKGUpfX10LmRlZmF1bHQ9c30sMjg3ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHMsYSxjPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxkPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlNuYXBzaG90U291cmNlPXZvaWQgMDtjb25zdCBoPW4oOTY1OSksbD1uKDYyMTUpLHU9bmV3IE1hcDtjbGFzcyBwIGV4dGVuZHMgaC5CYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksaS5zZXQodGhpcyx2b2lkIDApLHIuc2V0KHRoaXMsKCgpPT4odS5oYXModGhpcy5pZGVudGl0eS51dWlkKXx8dS5zZXQodGhpcy5pZGVudGl0eS51dWlkLHtldmVudEZpcmVkOm51bGwsY2xpZW50UHJvbWlzZTpudWxsfSksdS5nZXQodGhpcy5pZGVudGl0eS51dWlkKSkpKSxvLnNldCh0aGlzLCgoKT0+KGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2V8fChkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlPWQodGhpcyxzKS5jYWxsKHRoaXMpKSxkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlKSkpLHMuc2V0KHRoaXMsKGFzeW5jKCk9Pntjb25zdCBlPWwuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZSh0aGlzLmlkZW50aXR5KTt0cnl7ZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZHx8YXdhaXQgZCh0aGlzLGEpLmNhbGwodGhpcyk7Y29uc3QgdD1hd2FpdCB0aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHt3YWl0OiExfSk7cmV0dXJuIHQub25EaXNjb25uZWN0aW9uKCgoKT0+e2QodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9bnVsbCxkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkPW51bGx9KSksdH1jYXRjaChlKXt0aHJvdyBkKHRoaXMscikuY2FsbCh0aGlzKS5jbGllbnRQcm9taXNlPW51bGwsbmV3IEVycm9yKFwiVGhlIHRhcmdldGVkIFNuYXBzaG90U291cmNlIGlzIG5vdCBjdXJyZW50bHkgaW5pdGlhbGl6ZWQuIEF3YWl0IHRoaXMgb2JqZWN0J3MgcmVhZHkoKSBtZXRob2QuXCIpfX0pKSxhLnNldCh0aGlzLChhc3luYygpPT57Y29uc3QgZT1sLmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWUodGhpcy5pZGVudGl0eSk7bGV0IHQsbjtjb25zdCBpPW5ldyBQcm9taXNlKCgoZSxpKT0+e3Q9ZSxuPWl9KSk7ZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZD1pO2NvbnN0IG89YXN5bmMgaT0+e3RyeXtpLmNoYW5uZWxOYW1lPT09ZSYmKHQoKSxhd2FpdCB0aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixvKSl9Y2F0Y2goZSl7bihlKX19O2F3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5vbihcImNvbm5lY3RlZFwiLG8pfSkpLGModGhpcyxpLHQpfWdldCBpZGVudGl0eSgpe3JldHVybiBkKHRoaXMsaSl9YXN5bmMgcmVhZHkoKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS1yZWFkeVwiKS5jYXRjaCgoZT0+e30pKTt0cnl7YXdhaXQgZCh0aGlzLG8pLmNhbGwodGhpcyl9Y2F0Y2goZSl7YXdhaXQgZCh0aGlzLHIpLmNhbGwodGhpcykuZXZlbnRGaXJlZH19YXN5bmMgZ2V0U25hcHNob3QoKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS1nZXQtc25hcHNob3RcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgZT1hd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKSx0PWF3YWl0IGUuZGlzcGF0Y2goXCJnZXQtc25hcHNob3RcIik7cmV0dXJuKGF3YWl0IHQpLnNuYXBzaG90fWFzeW5jIGFwcGx5U25hcHNob3QoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWFwcGx5LXNuYXBzaG90XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKSkuZGlzcGF0Y2goXCJhcHBseS1zbmFwc2hvdFwiLHtzbmFwc2hvdDplfSl9fXQuU25hcHNob3RTb3VyY2U9cCxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXAsbz1uZXcgV2Vha01hcCxzPW5ldyBXZWFrTWFwLGE9bmV3IFdlYWtNYXB9LDcxNTM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigxNzQ2KTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobigyODc4KSx0KX0sNjIxNTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZT12b2lkIDAsdC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lPWU9PmBzbmFwc2hvdC1zb3VyY2UtcHJvdmlkZXItJHtlLnV1aWR9YH0sMzY0MTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big1MDA3KSxvPW4oNDk5Nyk7Y2xhc3MgcyBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxcInN5c3RlbVwiKX1zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4saSk9Pntjb25zdCByPVwiZXh0ZXJuYWwtcHJvY2Vzcy1leGl0ZWRcIjtsZXQgcyxhLGMsZDtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lmxpc3RlbmVyJiYoYz1lPT57Y29uc3Qgbj1lfHx7fTthPXt0b3BpYzpcImV4aXRlZFwiLHV1aWQ6bi5wcm9jZXNzVXVpZHx8XCJcIixleGl0Q29kZTpuLmV4aXRDb2RlfHwwfSxzPT09ZS5wcm9jZXNzVXVpZCYmKHQubGlzdGVuZXIoYSksZC5yZW1vdmVMaXN0ZW5lcihyLGMpKX0sdGhpcy53aXJlLm1lLm5hbWV8fCh0aGlzLndpcmUubWUubmFtZT10aGlzLndpcmUubWUudXVpZCksZD1uZXcgby5fV2luZG93KHRoaXMud2lyZSx0aGlzLndpcmUubWUpLGQub24ocixjKSksdGhpcy53aXJlLnNlbmRBY3Rpb24oZSx0KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT57cz1lLmRhdGEudXVpZCxuKGUuZGF0YSksYSYmcz09PWEudXVpZCYmKHQubGlzdGVuZXIoYSksZC5yZW1vdmVMaXN0ZW5lcihyLGMpKX0pKS5jYXRjaCgoZT0+e2QmJmQucmVtb3ZlTGlzdGVuZXIocixjKSxpKGUpfSkpfSkpfWdldFZlcnNpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmVyc2lvblwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1jbGVhckNhY2hlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsZWFyLWNhY2hlXCIsZSkudGhlbigoKCk9Pnt9KSl9ZGVsZXRlQ2FjaGVPbkV4aXQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkZWxldGUtY2FjaGUtcmVxdWVzdFwiKS50aGVuKCgoKT0+e30pKX1leGl0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZXhpdC1kZXNrdG9wXCIpLnRoZW4oKCgpPT57fSkpfWFzeW5jIGZldGNoTWFuaWZlc3QoZSl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp0fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmZXRjaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSk7cmV0dXJuIHR9Zmx1c2hDb29raWVTdG9yZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZsdXNoLWNvb2tpZS1zdG9yZVwiKS50aGVuKCgoKT0+e30pKX1nZXRBbGxXaW5kb3dzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC13aW5kb3dzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFsbEFwcGxpY2F0aW9ucygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtYXBwbGljYXRpb25zXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldENvbW1hbmRMaW5lQXJndW1lbnRzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNvbW1hbmQtbGluZS1hcmd1bWVudHNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0Q3Jhc2hSZXBvcnRlclN0YXRlKCl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp7ZGlhZ25vc3RpY01vZGU6ZSxpc1J1bm5pbmc6dH19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jcmFzaC1yZXBvcnRlci1zdGF0ZVwiKTtyZXR1cm4gY29uc29sZS53YXJuKFwiZGlhZ25vc3RpY01vZGUgcHJvcGVydHkgaXMgZGVwcmVjYXRlZC4gSXQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb25cIikse2RpYWdub3N0aWNNb2RlOmUsZGlhZ25vc3RpY3NNb2RlOmUsaXNSdW5uaW5nOnR9fWFzeW5jIHN0YXJ0Q3Jhc2hSZXBvcnRlcihlKXtjb25zdCB0PWUsbj17Li4udCxkaWFnbm9zdGljTW9kZTp0LmRpYWdub3N0aWNzTW9kZXx8dC5kaWFnbm9zdGljTW9kZX0se3BheWxvYWQ6e2RhdGE6e2RpYWdub3N0aWNNb2RlOmksaXNSdW5uaW5nOnJ9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdGFydC1jcmFzaC1yZXBvcnRlclwiLG4pO3JldHVybntkaWFnbm9zdGljTW9kZTppLGRpYWdub3N0aWNzTW9kZTppLGlzUnVubmluZzpyfX1nZXRVbmlxdWVVc2VySWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdW5pcXVlLXVzZXItaWRcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0RW50aXR5SW5mbyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1lbnRpdHktaW5mb1wiLHt1dWlkOmUsbmFtZTp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0RW52aXJvbm1lbnRWYXJpYWJsZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZW52aXJvbm1lbnQtdmFyaWFibGVcIix7ZW52aXJvbm1lbnRWYXJpYWJsZXM6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEZvY3VzZWRXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtZm9jdXNlZC13aW5kb3dcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgaXNBcHBDZXJ0aWZpZWQoZSl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp7Y2VydGlmaWVkSW5mbzp0fX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaXMtYXBwLWNlcnRpZmllZFwiLHttYW5pZmVzdFVybDplfSk7cmV0dXJuIHR9Z2V0SW5zdGFsbGVkUnVudGltZXMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaW5zdGFsbGVkLXJ1bnRpbWVzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YS5ydW50aW1lcykpfWFzeW5jIGdldEluc3RhbGxlZEFwcHMoKXtjb25zdHtwYXlsb2FkOntkYXRhOntpbnN0YWxsZWRBcHBzOmV9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaW5zdGFsbGVkLWFwcHNcIik7cmV0dXJuIGV9Z2V0TG9nKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctbG9nXCIsZSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TWFjaGluZUlkKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1hY2hpbmUtaWRcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TWluTG9nTGV2ZWwoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbWluLWxvZy1sZXZlbFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRMb2dMaXN0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGlzdC1sb2dzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldE1vbml0b3JJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1vbml0b3ItaW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNb3VzZVBvc2l0aW9uKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LW1vdXNlLXBvc2l0aW9uXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFByb2Nlc3NMaXN0KCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlN5c3RlbS5nZXRQcm9jZXNzTGlzdCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgY29uc2lkZXIgdXNpbmcgb3VyIG5ldyBwcm9jZXNzIEFQSXM6IFdpbmRvdy5nZXRQcm9jZXNzSW5mbywgVmlldy5nZXRQcm9jZXNzSW5mbywgQXBwbGljYXRpb24uZ2V0UHJvY2Vzc0luZm8sIFN5c3RlbS5nZXRBbGxQcm9jZXNzSW5mb1wiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcInByb2Nlc3Mtc25hcHNob3RcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0QWxsUHJvY2Vzc0luZm8oKXtjb25zdHtwYXlsb2FkOntkYXRhOmV9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtcHJvY2Vzcy1pbmZvXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGV9Z2V0UHJveHlTZXR0aW5ncygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wcm94eS1zZXR0aW5nc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRSdW50aW1lSW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ydW50aW1lLWluZm9cIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UnZtSW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ydm0taW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRIb3N0U3BlY3MoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaG9zdC1zcGVjc1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1sYXVuY2hFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMuc2VuZEV4dGVybmFsUHJvY2Vzc1JlcXVlc3QoXCJsYXVuY2gtZXh0ZXJuYWwtcHJvY2Vzc1wiLGUpfW1vbml0b3JFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMuc2VuZEV4dGVybmFsUHJvY2Vzc1JlcXVlc3QoXCJtb25pdG9yLWV4dGVybmFsLXByb2Nlc3NcIixlKX1sb2coZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3cml0ZS10by1sb2dcIix7bGV2ZWw6ZSxtZXNzYWdlOnR9KS50aGVuKCgoKT0+e30pKX1vcGVuVXJsV2l0aEJyb3dzZXIoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwib3Blbi11cmwtd2l0aC1icm93c2VyXCIse3VybDplfSkudGhlbigoKCk9Pnt9KSl9cmVsZWFzZUV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWxlYXNlLWV4dGVybmFsLXByb2Nlc3NcIix7dXVpZDplfSkudGhlbigoKCk9Pnt9KSl9c2hvd0RldmVsb3BlclRvb2xzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctZGV2ZWxvcGVyLXRvb2xzXCIsZSkudGhlbigoKCk9Pnt9KSl9dGVybWluYXRlRXh0ZXJuYWxQcm9jZXNzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInRlcm1pbmF0ZS1leHRlcm5hbC1wcm9jZXNzXCIsZSkudGhlbigoKCk9Pnt9KSl9dXBkYXRlUHJveHlTZXR0aW5ncyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ1cGRhdGUtcHJveHlcIixlKS50aGVuKCgoKT0+e30pKX1kb3dubG9hZEFzc2V0KGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKCgobixpKT0+e2lmKFwiTm9kZUVudmlyb25tZW50XCI9PT10aGlzLndpcmUuZW52aXJvbm1lbnQuY29uc3RydWN0b3IubmFtZSlyZXR1cm4gdm9pZCBpKG5ldyByLk5vdFN1cHBvcnRlZEVycm9yKFwiZG93bmxvYWRBc3NldCBvbmx5IHN1cHBvcnRlZCBpbiBhbiBPcGVuRmluIFJlbmRlciBwcm9jZXNzXCIpKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCkudG9TdHJpbmcoKSxzPWBhc3NldC1kb3dubG9hZC1wcm9ncmVzcy0ke299YCxhPWBhc3NldC1kb3dubG9hZC1lcnJvci0ke299YCxjPWBhc3NldC1kb3dubG9hZC1jb21wbGV0ZS0ke299YCxkPWU9Pntjb25zdCBuPXtkb3dubG9hZGVkQnl0ZXM6ZS5kb3dubG9hZGVkQnl0ZXMsdG90YWxCeXRlczplLnRvdGFsQnl0ZXN9O3Qobil9LGg9KCk9Pnt0aGlzLnJlbW92ZUxpc3RlbmVyKHMsZCl9O3RoaXMub24ocyxkKSx0aGlzLm9uY2UoYSwoKGUsdCk9Pntjb25zdCBuPXR8fGU7aCgpLGkobmV3IHIuUnVudGltZUVycm9yKG4pKX0pKSx0aGlzLm9uY2UoYywoKCk9PntoKCksbigpfSkpO2NvbnN0IGw9T2JqZWN0LmFzc2lnbihlLHtkb3dubG9hZElkOm99KTt0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLWFzc2V0XCIsbCkuY2F0Y2goKGU9PntoKCksaShlKX0pKX0pKX1kb3dubG9hZFJ1bnRpbWUoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKChuLGkpPT57aWYoXCJOb2RlRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lKXJldHVybiB2b2lkIGkobmV3IHIuTm90U3VwcG9ydGVkRXJyb3IoXCJkb3dubG9hZFJ1bnRpbWUgb25seSBzdXBwb3J0ZWQgaW4gYW4gT3BlbkZpbiBSZW5kZXIgcHJvY2Vzc1wiKSk7Y29uc3Qgbz10aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpLnRvU3RyaW5nKCkscz1gcnVudGltZS1kb3dubG9hZC1wcm9ncmVzcy0ke299YCxhPWBydW50aW1lLWRvd25sb2FkLWVycm9yLSR7b31gLGM9YHJ1bnRpbWUtZG93bmxvYWQtY29tcGxldGUtJHtvfWAsZD1lPT57Y29uc3Qgbj17ZG93bmxvYWRlZEJ5dGVzOmUuZG93bmxvYWRlZEJ5dGVzLHRvdGFsQnl0ZXM6ZS50b3RhbEJ5dGVzfTt0KG4pfSxoPSgpPT57dGhpcy5yZW1vdmVMaXN0ZW5lcihzLGQpfTt0aGlzLm9uKHMsZCksdGhpcy5vbmNlKGEsKChlLHQpPT57Y29uc3Qgbj10fHxlO2goKSxpKG5ldyByLlJ1bnRpbWVFcnJvcihuKSl9KSksdGhpcy5vbmNlKGMsKCgpPT57aCgpLG4oKX0pKTtjb25zdCBsPU9iamVjdC5hc3NpZ24oZSx7ZG93bmxvYWRJZDpvfSk7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJkb3dubG9hZC1ydW50aW1lXCIsbCkuY2F0Y2goKGU9PntoKCksaShlKX0pKX0pKX1kb3dubG9hZFByZWxvYWRTY3JpcHRzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLXByZWxvYWQtc2NyaXB0c1wiLHtzY3JpcHRzOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRBbGxFeHRlcm5hbEFwcGxpY2F0aW9ucygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtZXh0ZXJuYWwtYXBwbGljYXRpb25zXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFwcEFzc2V0SW5mbyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwLWFzc2V0LWluZm9cIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRDb29raWVzKGUpe2NvbnN0IHQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldFVybCgpLG49T2JqZWN0LmFzc2lnbihlLHt1cmw6dH0pO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jb29raWVzXCIsbikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9c2V0TWluTG9nTGV2ZWwoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LW1pbi1sb2ctbGV2ZWxcIix7bGV2ZWw6ZX0pLnRoZW4oKCgpPT57fSkpfXJlc29sdmVVdWlkKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlc29sdmUtdXVpZFwiLHtlbnRpdHlLZXk6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWV4ZWN1dGVPblJlbW90ZShlLHQpe3JldHVybiB0LnJlcXVlc3RpbmdJZGVudGl0eT1lLHRoaXMud2lyZS5mZXJyeUFjdGlvbih0KX1yZWFkUmVnaXN0cnlWYWx1ZShlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVhZC1yZWdpc3RyeS12YWx1ZVwiLHtyb290S2V5OmUsc3Via2V5OnQsdmFsdWU6bn0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXJlZ2lzdGVyRXh0ZXJuYWxDb25uZWN0aW9uKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlZ2lzdGVyLWV4dGVybmFsLWNvbm5lY3Rpb25cIix7dXVpZDplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0U2VydmljZUNvbmZpZ3VyYXRpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgYW4gb2JqZWN0IHdpdGggYSBgbmFtZWAgcHJvcGVydHkgaGF2aW5nIGEgc3RyaW5nIHZhbHVlXCIpO2NvbnN0e25hbWU6dH09ZTtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc2VydmljZS1jb25maWd1cmF0aW9uXCIse25hbWU6dH0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldFN5c3RlbUFwcENvbmZpZyhlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgYSBzdHJpbmcgdmFsdWUgZm9yIG5hbWUgb2Ygc3lzdGVtIGFwcFwiKTtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtc3lzdGVtLWFwcC1jb25maWd1cmF0aW9uXCIse25hbWU6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXJ1blJ2bUhlYWx0aENoZWNrKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicnVuLXJ2bS1oZWFsdGgtY2hlY2tcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgbGF1bmNoTWFuaWZlc3QoZSx0KXtyZXR1cm4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXVuY2gtbWFuaWZlc3RcIix7bWFuaWZlc3RVcmw6ZSxvcHRzOnR9KSkucGF5bG9hZC5kYXRhLm1hbmlmZXN0fWFzeW5jIHF1ZXJ5UGVybWlzc2lvbkZvckN1cnJlbnRDb250ZXh0KGUpe2NvbnN0IHQ9e3V1aWQ6dGhpcy53aXJlLm1lLnV1aWQsbmFtZTp0aGlzLndpcmUubWUubmFtZX07cmV0dXJuKGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicXVlcnktcGVybWlzc2lvbi1mb3ItY3VycmVudC1jb250ZXh0XCIse2FwaU5hbWU6ZSxpZGVudGl0eTp0fSkpLnBheWxvYWQuZGF0YX1hc3luYyBlbmFibGVOYXRpdmVXaW5kb3dJbnRlZ3JhdGlvblByb3ZpZGVyKGUpe2NvbnN0e3BheWxvYWQ6dH09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJlbmFibGUtbmF0aXZlLXdpbmRvdy1pbnRlZ3JhdGlvbi1wcm92aWRlclwiLHtwZXJtaXNzaW9uczplfSk7cmV0dXJuIHQuZGF0YX1hc3luYyByZWdpc3RlclVzYWdlKHtkYXRhOmUsdHlwZTp0fSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWdpc3Rlci11c2FnZVwiLHtkYXRhOmUsdHlwZTp0fSl9fXQuZGVmYXVsdD1zfSwyNDA6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDQxNjkpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgY3JlYXRlKGUpe2NvbnN0e3V1aWQ6dH09dGhpcy53aXJlLm1lO2lmKCFlLm5hbWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlLm5hbWUpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgYSBuYW1lIHByb3BlcnR5IGFzIGEgc3RyaW5nIGluIG9yZGVyIHRvIGNyZWF0ZSBhIFZpZXcuXCIpO3JldHVybiB0aGlzLndpcmUuZW52aXJvbm1lbnQuY2hpbGRWaWV3cz9hd2FpdCB0aGlzLndpcmUuZW52aXJvbm1lbnQuY3JlYXRlQ2hpbGRDb250ZW50KHtlbnRpdHlUeXBlOlwidmlld1wiLG9wdGlvbnM6ey4uLmUsdXVpZDp0fX0pOmF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY3JlYXRlLXZpZXdcIix7Li4uZSx1dWlkOnR9KSx0aGlzLndyYXBTeW5jKHt1dWlkOnQsbmFtZTplLm5hbWV9KX1hc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy13cmFwXCIpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5WaWV3KHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctd3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5WaWV3KHRoaXMud2lyZSxlKX1nZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ2aWV3LWdldC1jdXJyZW50XCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNWaWV3KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgVmlldyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOmUsbmFtZTp0fSl9Z2V0Q3VycmVudFN5bmMoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy53aXJlLm1lLmlzVmlldyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFZpZXcgY29udGV4dFwiKTtjb25zdHt1dWlkOmUsbmFtZTp0fT10aGlzLndpcmUubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5kZWZhdWx0PXN9LDMxNjM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVmlldz12b2lkIDA7Y29uc3QgaT1uKDQ2MzYpLHI9big0OTk3KTtjbGFzcyBvIGV4dGVuZHMgaS5XZWJDb250ZW50c3tjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCxcInZpZXdcIiksdGhpcy5pZGVudGl0eT10LHRoaXMuYXR0YWNoPWFzeW5jIGU9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImF0dGFjaC12aWV3XCIse3RhcmdldDplLC4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5kZXN0cm95PWFzeW5jKCk9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRlc3Ryb3ktdmlld1wiLHsuLi50aGlzLmlkZW50aXR5fSl9LHRoaXMuc2hvdz1hc3luYygpPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXZpZXdcIix7Li4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmhpZGU9YXN5bmMoKT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaGlkZS12aWV3XCIsey4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5zZXRCb3VuZHM9YXN5bmMgZT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXZpZXctYm91bmRzXCIse2JvdW5kczplLC4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5nZXRCb3VuZHM9YXN5bmMoKT0+KGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctYm91bmRzXCIsey4uLnRoaXMuaWRlbnRpdHl9KSkucGF5bG9hZC5kYXRhLHRoaXMuZ2V0SW5mbz1hc3luYygpPT4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmlldy1pbmZvXCIsey4uLnRoaXMuaWRlbnRpdHl9KSkucGF5bG9hZC5kYXRhLHRoaXMuZ2V0UGFyZW50TGF5b3V0PWFzeW5jKCk9Pih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LXBhcmVudC1sYXlvdXRcIix7Li4udGhpcy5pZGVudGl0eX0pLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLmdldEN1cnJlbnRXaW5kb3coKSkuZ2V0TGF5b3V0KCkpLHRoaXMuZ2V0T3B0aW9ucz1hc3luYygpPT50aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12aWV3LW9wdGlvbnNcIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpLHRoaXMudXBkYXRlT3B0aW9ucz1hc3luYyBlPT50aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS12aWV3LW9wdGlvbnNcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKSx0aGlzLmdldEN1cnJlbnRXaW5kb3c9YXN5bmMoKT0+e2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctd2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHl9KTtyZXR1cm4gbmV3IHIuX1dpbmRvdyh0aGlzLndpcmUsZSl9fWFzeW5jIGZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9PXtlbWl0U3ludGhGb2N1c2VkOiEwfSl7Y29uc3QgdD1hd2FpdCB0aGlzLmdldEN1cnJlbnRXaW5kb3coKTthd2FpdCB0LmZvY3VzZWRXZWJWaWV3V2FzQ2hhbmdlZCgpLGF3YWl0IHN1cGVyLmZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9KX19dC5WaWV3PW99LDQxNjk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyNDApO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDMxNjMpLHQpfSw0NjM2OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LldlYkNvbnRlbnRzPXZvaWQgMDtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUsbix0LnV1aWQsdC5uYW1lKSx0aGlzLmVudGl0eVR5cGU9bn1jYXB0dXJlUGFnZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjYXB0dXJlLXBhZ2VcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1leGVjdXRlSmF2YVNjcmlwdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleGVjdXRlLWphdmFzY3JpcHQtaW4td2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHksY29kZTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Wm9vbUxldmVsKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXpvb20tbGV2ZWxcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zZXRab29tTGV2ZWwoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXpvb20tbGV2ZWxcIix7Li4udGhpcy5pZGVudGl0eSxsZXZlbDplfSkudGhlbigoKCk9Pnt9KSl9bmF2aWdhdGUoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibmF2aWdhdGUtd2luZG93XCIsey4uLnRoaXMuaWRlbnRpdHksdXJsOmV9KS50aGVuKCgoKT0+e30pKX1uYXZpZ2F0ZUJhY2soKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3ctYmFja1wiLHsuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9YXN5bmMgbmF2aWdhdGVGb3J3YXJkKCl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3ctZm9yd2FyZFwiLHsuLi50aGlzLmlkZW50aXR5fSl9c3RvcE5hdmlnYXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLXdpbmRvdy1uYXZpZ2F0aW9uXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZWxvYWQoZT0hMSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVsb2FkLXdpbmRvd1wiLHtpZ25vcmVDYWNoZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1wcmludChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwcmludFwiLHsuLi50aGlzLmlkZW50aXR5LG9wdGlvbnM6ZX0pLnRoZW4oKCgpPT57fSkpfWZpbmRJblBhZ2UoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmaW5kLWluLXBhZ2VcIix7Li4udGhpcy5pZGVudGl0eSxzZWFyY2hUZXJtOmUsb3B0aW9uczp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9c3RvcEZpbmRJblBhZ2UoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic3RvcC1maW5kLWluLXBhZ2VcIix7Li4udGhpcy5pZGVudGl0eSxhY3Rpb246ZX0pLnRoZW4oKCgpPT57fSkpfWdldFByaW50ZXJzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXByaW50ZXJzXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBmb2N1cyh7ZW1pdFN5bnRoRm9jdXNlZDplfT17ZW1pdFN5bnRoRm9jdXNlZDohMH0pe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZm9jdXMtd2luZG93XCIse2VtaXRTeW50aEZvY3VzZWQ6ZSwuLi50aGlzLmlkZW50aXR5fSl9YXN5bmMgc2hvd0RldmVsb3BlclRvb2xzKCl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LWRldmVsb3Blci10b29sc1wiLHRoaXMuaWRlbnRpdHkpfWFzeW5jIGdldFByb2Nlc3NJbmZvKCl7Y29uc3R7cGF5bG9hZDp7ZGF0YTplfX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtcHJvY2Vzcy1pbmZvXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGV9YXN5bmMgZ2V0U2hhcmVkV29ya2Vycygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zaGFyZWQtd29ya2Vyc1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGluc3BlY3RTaGFyZWRXb3JrZXIoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2hhcmVkLXdvcmtlclwiLHsuLi50aGlzLmlkZW50aXR5fSl9YXN5bmMgaW5zcGVjdFNoYXJlZFdvcmtlckJ5SWQoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnNwZWN0LXNoYXJlZC13b3JrZXItYnktaWRcIix7Li4udGhpcy5pZGVudGl0eSx3b3JrZXJJZDplfSl9YXN5bmMgaW5zcGVjdFNlcnZpY2VXb3JrZXIoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2VydmljZS13b3JrZXJcIix7Li4udGhpcy5pZGVudGl0eX0pfX10LldlYkNvbnRlbnRzPXJ9LDIxNjM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNDk5OSksbz1uKDUwNDcpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgd3JhcChlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy13cmFwXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5fV2luZG93KHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9XaW5kb3codGhpcy53aXJlLGUpfWNyZWF0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtd2luZG93XCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLl9XaW5kb3codGhpcy53aXJlLHt1dWlkOnRoaXMubWUudXVpZCxuYW1lOmUubmFtZX0pLmNyZWF0ZVdpbmRvdyhlKX1nZXRDdXJyZW50KCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY3VycmVudC13aW5kb3dcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1dpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFdpbmRvdyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwKHt1dWlkOmUsbmFtZTp0fSl9Z2V0Q3VycmVudFN5bmMoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LXdpbmRvdy1zeW5jXCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dFwiKTtjb25zdHt1dWlkOmUsbmFtZTp0fT10aGlzLndpcmUubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5kZWZhdWx0PXN9LDUwNDc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuX1dpbmRvdz12b2lkIDA7Y29uc3QgaT1uKDcyNjQpLHI9big0NjM2KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIHIuV2ViQ29udGVudHN7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQsXCJ3aW5kb3dcIiksdGhpcy5pZGVudGl0eT10fWNyZWF0ZVdpbmRvdyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctY3JlYXRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLG5ldyBQcm9taXNlKCgodCxuKT0+e2NvbnN0IGk9XCJmaXJlLWNvbnN0cnVjdG9yLWNhbGxiYWNrXCIscj1uZXcgUHJvbWlzZSgoZT0+e3RoaXMub24oaSwoZnVuY3Rpb24gdChuKXtsZXQgcjtjb25zdHtzdWNjZXNzOm99PW4scz1uLmRhdGEse21lc3NhZ2U6YX09cztyPW8/e2h0dHBSZXNwb25zZUNvZGU6cy5odHRwUmVzcG9uc2VDb2RlLGFwaUluamVjdGVkOnMuYXBpSW5qZWN0ZWR9OnttZXNzYWdlOnMubWVzc2FnZSxuZXR3b3JrRXJyb3JDb2RlOnMubmV0d29ya0Vycm9yQ29kZSxzdGFjazpzLnN0YWNrfSx0aGlzLnJlbW92ZUxpc3RlbmVyKGksdCksZSh7bWVzc2FnZTphLGNiUGF5bG9hZDpyLHN1Y2Nlc3M6b30pfSkpfSkpO3ZvaWQgMD09PWUud2FpdEZvclBhZ2VMb2FkJiYoZS53YWl0Rm9yUGFnZUxvYWQ9ITEpLHZvaWQgMD09PWUuYXV0b1Nob3cmJihlLmF1dG9TaG93PSEwKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5jcmVhdGVDaGlsZENvbnRlbnQoe2VudGl0eVR5cGU6XCJ3aW5kb3dcIixvcHRpb25zOmV9KTtQcm9taXNlLmFsbChbcixvXSkudGhlbigoZT0+e2NvbnN0IGk9ZVswXTtpLnN1Y2Nlc3M/dCh0aGlzKTpuKGkpO3RyeXt0aGlzLmdldFdlYldpbmRvdygpLmZpbi5fX2ludGVybmFsXy5vcGVuZXJTdWNjZXNzQ0JDYWxsZWQoKX1jYXRjaChlKXt9fSkpLmNhdGNoKG4pfSkpfWdldEFsbEZyYW1lcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hbGwtZnJhbWVzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Qm91bmRzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1ib3VuZHNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1jZW50ZXIoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjZW50ZXItd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Ymx1cigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImJsdXItd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9YnJpbmdUb0Zyb250KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYnJpbmctd2luZG93LXRvLWZyb250XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9YW5pbWF0ZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImFuaW1hdGUtd2luZG93XCIse3RyYW5zaXRpb25zOmUsb3B0aW9uczp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1oaWRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaGlkZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1jbG9zZShlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS13aW5kb3dcIix7Zm9yY2U6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9PntPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxudWxsKX0pKX1mb2N1c2VkV2ViVmlld1dhc0NoYW5nZWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmb2N1c2VkLXdlYnZpZXctY2hhbmdlZFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWdldE5hdGl2ZUlkKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1uYXRpdmUtaWRcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRDdXJyZW50Vmlld3MoKXtjb25zdHtwYXlsb2FkOmV9PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC12aWV3c1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlLmRhdGEubWFwKChlPT5uZXcgby5WaWV3KHRoaXMud2lyZSxlKSkpfWRpc2FibGVGcmFtZSgpe3JldHVybiBjb25zb2xlLndhcm4oXCJGdW5jdGlvbiBpcyBkZXByZWNhdGVkOyB1c2UgZGlzYWJsZVVzZXJNb3ZlbWVudCBpbnN0ZWFkLlwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImRpc2FibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9ZGlzYWJsZVVzZXJNb3ZlbWVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRpc2FibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9ZW5hYmxlRnJhbWUoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRnVuY3Rpb24gaXMgZGVwcmVjYXRlZDsgdXNlIGVuYWJsZVVzZXJNb3ZlbWVudCBpbnN0ZWFkLlwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1lbmFibGVVc2VyTW92ZW1lbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJlbmFibGUtd2luZG93LWZyYW1lXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Zmxhc2goKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmbGFzaC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zdG9wRmxhc2hpbmcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLWZsYXNoLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRMYXlvdXQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtbGF5b3V0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksIShhd2FpdCB0aGlzLmdldE9wdGlvbnMoKSkubGF5b3V0KXRocm93IG5ldyBFcnJvcihcIldpbmRvdyBkb2VzIG5vdCBoYXZlIGEgTGF5b3V0XCIpO3JldHVybiB0aGlzLmZpbi5QbGF0Zm9ybS5MYXlvdXQud3JhcCh0aGlzLmlkZW50aXR5KX1nZXRPcHRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1vcHRpb25zXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50QXBwbGljYXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXBhcmVudC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgaS5BcHBsaWNhdGlvbih0aGlzLndpcmUsdGhpcy5pZGVudGl0eSkpfWdldFBhcmVudFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtcGFyZW50LXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLFByb21pc2UucmVzb2x2ZShuZXcgaS5BcHBsaWNhdGlvbih0aGlzLndpcmUsdGhpcy5pZGVudGl0eSkpLnRoZW4oKGU9PmUuZ2V0V2luZG93KCkpKX1hc3luYyBnZXRTbmFwc2hvdChlKXtjb25zdCB0PXthcmVhOmUsLi4udGhpcy5pZGVudGl0eX07cmV0dXJuIGNvbnNvbGUud2FybihcIldpbmRvdy5nZXRTbmFwc2hvdCBoYXMgYmVlbiBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFdpbmRvdy5jYXB0dXJlUGFnZVwiKSwoYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LXNuYXBzaG90XCIsdCkpLnBheWxvYWQuZGF0YX1nZXRTdGF0ZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctc3RhdGVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRXZWJXaW5kb3coKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXdlYi13aW5kb3dcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSx0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0V2ViV2luZG93KHRoaXMuaWRlbnRpdHkpfWlzTWFpbldpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1pcy1tYWluLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMubWUudXVpZD09PXRoaXMubWUubmFtZX1pc1Nob3dpbmcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpcy13aW5kb3ctc2hvd2luZ1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfW1heGltaXplKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibWF4aW1pemUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9bWluaW1pemUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtaW5pbWl6ZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1tb3ZlQnkoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtb3ZlLXdpbmRvdy1ieVwiLHtkZWx0YUxlZnQ6ZSxkZWx0YVRvcDp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1tb3ZlVG8oZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtb3ZlLXdpbmRvd1wiLHtsZWZ0OmUsdG9wOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc2l6ZUJ5KGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXNpemUtd2luZG93LWJ5XCIse2RlbHRhV2lkdGg6TWF0aC5mbG9vcihlKSxkZWx0YUhlaWdodDpNYXRoLmZsb29yKHQpLGFuY2hvcjpuLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZXNpemVUbyhlLHQsbil7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzaXplLXdpbmRvd1wiLHt3aWR0aDpNYXRoLmZsb29yKGUpLGhlaWdodDpNYXRoLmZsb29yKHQpLGFuY2hvcjpuLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1yZXN0b3JlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzdG9yZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zZXRBc0ZvcmVncm91bmQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtZm9yZWdyb3VuZC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1zZXRCb3VuZHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LXdpbmRvdy1ib3VuZHNcIix7Li4uZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9c2hvdyhlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXdpbmRvd1wiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zaG93QXQoZSx0LG49ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctYXQtd2luZG93XCIse2ZvcmNlOm4sbGVmdDpNYXRoLmZsb29yKGUpLHRvcDpNYXRoLmZsb29yKHQpLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX11cGRhdGVPcHRpb25zKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS13aW5kb3ctb3B0aW9uc1wiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWF1dGhlbnRpY2F0ZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1hdXRoZW50aWNhdGVcIix7dXNlck5hbWU6ZSxwYXNzd29yZDp0LC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBzaG93UG9wdXBNZW51KGUpe2NvbnN0e3BheWxvYWQ6dH09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzaG93LXBvcHVwLW1lbnVcIix7b3B0aW9uczplLC4uLnRoaXMuaWRlbnRpdHl9KTtyZXR1cm4gdC5kYXRhfWFzeW5jIGNsb3NlUG9wdXBNZW51KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xvc2UtcG9wdXAtbWVudVwiLHsuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9fXQuX1dpbmRvdz1zfSw0OTk3OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oMjE2Myk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oNTA0NyksdCl9LDE2ODE6KGUsdCxuKT0+e3ZhciBpO3QuSD12b2lkIDA7Y29uc3Qgcj1uKDY0NjUpLG89big2NTQ1KSxzPW4oOTI5OCk7Y2xhc3MgYSBleHRlbmRzIHIuRXZlbnRFbWl0dGVye2Nvbm5lY3QoZSl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1jb25uZWN0U3luYygpe3Rocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IHJ1bm5pbmcgaW4gT3BlbkZpbi5cIil9c2VuZChlKXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIpfXNodXRkb3duKCl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fWNsYXNzIGN7Y29uc3RydWN0b3IoKXt0aGlzLmNoaWxkVmlld3M9ITB9Z2V0RGVmYXVsdENoYW5uZWxPcHRpb25zKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0UnRjUGVlcigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldE1hbmFnZXJDb25zdHJ1Y3Rvcigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldFByb3ZpZGVySW5pdGlhbGl6ZXIoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX13cml0ZVRva2VuKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9cmV0cmlldmVQb3J0KGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldE5leHRNZXNzYWdlSWQoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRSYW5kb21JZCgpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWNyZWF0ZUNoaWxkQ29udGVudChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRXZWJXaW5kb3coZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0Q3VycmVudEVudGl0eUlkZW50aXR5KCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0Q3VycmVudEVudGl0eVR5cGUoKXtyZXR1cm5cInVua25vd25cIn1yYWlzZUV2ZW50KGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0VXJsKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9d2hlblJlYWR5KCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9fXQuSD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYobnVsbD09PShpPXdpbmRvdyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZmluKXx8KCgpPT57Y29uc3QgZT1uZXcgYyx0PW5ldyBzLmRlZmF1bHQoYSxlLHt1dWlkOlwiXCIsbmFtZTpcIlwifSk7cmV0dXJuIG5ldyBvLmRlZmF1bHQodCl9KSgpfSw4MDY4OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRGaW49dC5yZWdpc3RlckZpbj12b2lkIDA7Y29uc3Qgbj1uZXcgV2Vha01hcDt0LnJlZ2lzdGVyRmluPWZ1bmN0aW9uKGUsdCl7bi5zZXQoZSx0KX0sdC5nZXRGaW49ZnVuY3Rpb24oZSl7Y29uc3QgdD1uLmdldChlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9jYXRlIGZpbiBhcGkgZm9yIGdpdmVuIHRyYW5zcG9ydFwiKTtyZXR1cm4gdH19LDUwMDc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJ1bnRpbWVFcnJvcj10Lk5vdFN1cHBvcnRlZEVycm9yPXQuTm90SW1wbGVtZW50ZWRFcnJvcj10Lk5vQWNrRXJyb3I9dC5EdXBsaWNhdGVDb3JyZWxhdGlvbkVycm9yPXQuVW5leHBlY3RlZEFjdGlvbkVycm9yPXQuRGlzY29ubmVjdGVkRXJyb3I9dm9pZCAwO2NsYXNzIG4gZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihgRXhwZWN0ZWQgd2Vic29ja2V0IHN0YXRlIE9QRU4gYnV0IGZvdW5kICR7ZX1gKSx0aGlzLnJlYWR5U3RhdGU9ZX19dC5EaXNjb25uZWN0ZWRFcnJvcj1uO2NsYXNzIGkgZXh0ZW5kcyBFcnJvcnt9dC5VbmV4cGVjdGVkQWN0aW9uRXJyb3I9aTtjbGFzcyByIGV4dGVuZHMgRXJyb3J7fXQuRHVwbGljYXRlQ29ycmVsYXRpb25FcnJvcj1yO2NsYXNzIG8gZXh0ZW5kcyBFcnJvcnt9dC5Ob0Fja0Vycm9yPW87Y2xhc3MgcyBleHRlbmRzIEVycm9ye310Lk5vdEltcGxlbWVudGVkRXJyb3I9cztjbGFzcyBhIGV4dGVuZHMgRXJyb3J7fXQuTm90U3VwcG9ydGVkRXJyb3I9YTtjbGFzcyBjIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1lLnBheWxvYWR8fGUse3JlYXNvbjpuLGVycm9yOml9PXQ7c3VwZXIobiksdGhpcy5uYW1lPVwiUnVudGltZUVycm9yXCIsKG51bGw9PWk/dm9pZCAwOmkuc3RhY2spJiYodGhpcy5zdGFjaz1pLnN0YWNrKX19dC5SdW50aW1lRXJyb3I9Y30sOTI5ODpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgcz1uKDY0NjUpLGE9big4NjI0KSxjPW4oNTAwNyksZD1uKDI3MzQpLGg9big5NjQxKTtjbGFzcyBsIGV4dGVuZHMgcy5FdmVudEVtaXR0ZXJ7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKCksdGhpcy53aXJlTGlzdGVuZXJzPW5ldyBNYXAsdGhpcy50b3BpY1JlZk1hcD1uZXcgTWFwLHRoaXMuZXZlbnRBZ2dyZWdhdG9yPW5ldyBkLmRlZmF1bHQsdGhpcy5tZXNzYWdlSGFuZGxlcnM9W3RoaXMuZXZlbnRBZ2dyZWdhdG9yLmRpc3BhdGNoRXZlbnRdLGkuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmNvbm5lY3RTeW5jPSgpPT57byh0aGlzLGkpLmNvbm5lY3RTeW5jKCl9LHRoaXMuZ2V0UG9ydD0oKT0+e2lmKFwiTm9kZUVudmlyb25tZW50XCIhPT10aGlzLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUpdGhyb3cgbmV3IGMuTm90SW1wbGVtZW50ZWRFcnJvcihcIk5vdCBJbXBsZW1lbnRlZFwiKTtyZXR1cm4gbyh0aGlzLGkpLndpcmUudXJsLnNwbGl0KFwiOlwiKS5zbGljZSgtMSlbMF19LHIodGhpcyxpLG5ldyBlKHRoaXMub25tZXNzYWdlLmJpbmQodGhpcykpKSx0aGlzLmVudmlyb25tZW50PXQsdGhpcy5zZW5kUmF3PW8odGhpcyxpKS5zZW5kLmJpbmQobyh0aGlzLGkpKSx0aGlzLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIodGhpcy5oYW5kbGVNZXNzYWdlLmJpbmQodGhpcykpLG8odGhpcyxpKS5vbihcImRpc2Nvbm5lY3RlZFwiLCgoKT0+e2Zvcihjb25zdFsse3JlamVjdDplfV1vZiB0aGlzLndpcmVMaXN0ZW5lcnMpZShcIlJlbW90ZSBjb25uZWN0aW9uIGhhcyBjbG9zZWRcIik7dGhpcy53aXJlTGlzdGVuZXJzLmNsZWFyKCksdGhpcy5lbWl0KFwiZGlzY29ubmVjdGVkXCIpfSkpO2NvbnN0e3V1aWQ6cyxuYW1lOmF9PW4sbD10aGlzLmVudmlyb25tZW50LmdldEN1cnJlbnRFbnRpdHlUeXBlKCk7dGhpcy5tZT1oLmdldEJhc2VNZShsLHMsYSl9c2h1dGRvd24oKXtyZXR1cm4gbyh0aGlzLGkpLnNodXRkb3duKCl9YXN5bmMgY29ubmVjdChlKXtpZihhLmlzRXhpc3RpbmdDb25uZWN0Q29uZmlnKGUpKXJldHVybiB0aGlzLmNvbm5lY3RCeVBvcnQoZSk7aWYoYS5pc05ld0Nvbm5lY3RDb25maWcoZSkpe2NvbnN0IHQ9YXdhaXQgdGhpcy5lbnZpcm9ubWVudC5yZXRyaWV2ZVBvcnQoZSk7cmV0dXJuIHRoaXMuY29ubmVjdEJ5UG9ydCh7Li4uZSxhZGRyZXNzOmB3czovL2xvY2FsaG9zdDoke3R9YH0pfX1hc3luYyBjb25uZWN0QnlQb3J0KGUpe2NvbnN0e2FkZHJlc3M6dCx1dWlkOm59PWUscj17Li4uZSx0eXBlOlwiZmlsZS10b2tlblwifSxzPW8odGhpcyxpKTthd2FpdCBzLmNvbm5lY3QodCk7Y29uc3QgYT1hd2FpdCB0aGlzLnNlbmRBY3Rpb24oXCJyZXF1ZXN0LWV4dGVybmFsLWF1dGhvcml6YXRpb25cIix7dXVpZDpuLHR5cGU6XCJmaWxlLXRva2VuXCJ9LCEwKTtpZihcImV4dGVybmFsLWF1dGhvcml6YXRpb24tcmVzcG9uc2VcIiE9PWEuYWN0aW9uKXRocm93IG5ldyBjLlVuZXhwZWN0ZWRBY3Rpb25FcnJvcihhLmFjdGlvbik7Y29uc3R7dG9rZW46ZH09YS5wYXlsb2FkO2F3YWl0IHRoaXMuZW52aXJvbm1lbnQud3JpdGVUb2tlbihhLnBheWxvYWQuZmlsZSxhLnBheWxvYWQudG9rZW4pO2NvbnN0IGg9YXdhaXQgdGhpcy5zZW5kQWN0aW9uKFwicmVxdWVzdC1hdXRob3JpemF0aW9uXCIsciwhMCk7aWYoXCJhdXRob3JpemF0aW9uLXJlc3BvbnNlXCIhPT1oLmFjdGlvbil0aHJvdyBuZXcgYy5VbmV4cGVjdGVkQWN0aW9uRXJyb3IoaC5hY3Rpb24pO2lmKCEwIT09aC5wYXlsb2FkLnN1Y2Nlc3MpdGhyb3cgbmV3IGMuUnVudGltZUVycm9yKGgucGF5bG9hZCk7cmV0dXJuIGR9c2VuZEFjdGlvbihlLHQ9e30sbj0hMSl7cmV0dXJuIG5ldyBQcm9taXNlKCgocixzKT0+e2NvbnN0IGE9dGhpcy5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCksYz17YWN0aW9uOmUscGF5bG9hZDp0LG1lc3NhZ2VJZDphfSxkPW8odGhpcyxpKTtyZXR1cm4gdGhpcy5hZGRXaXJlTGlzdGVuZXIoYSxyLHMsbiksZC5zZW5kKGMpLmNhdGNoKHMpfSkpfWZlcnJ5QWN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbik9Pntjb25zdCByPXRoaXMuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpO2UubWVzc2FnZUlkPXI7Y29uc3Qgcz1lPT57dChlLnBheWxvYWQpfTtyZXR1cm4gbyh0aGlzLGkpLnNlbmQoZSkudGhlbigoKCk9PnRoaXMuYWRkV2lyZUxpc3RlbmVyKHIscyxuLCExKSkpLmNhdGNoKG4pfSkpfXJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoZSl7dGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChlKX1hZGRXaXJlTGlzdGVuZXIoZSx0LG4saSl7aT90aGlzLnVuY29ycmVsYXRlZExpc3RlbmVyPXQ6dGhpcy53aXJlTGlzdGVuZXJzLmhhcyhlKT9uKG5ldyBjLkR1cGxpY2F0ZUNvcnJlbGF0aW9uRXJyb3IoU3RyaW5nKGUpKSk6dGhpcy53aXJlTGlzdGVuZXJzLnNldChlLHtyZXNvbHZlOnQscmVqZWN0Om59KX1vbm1lc3NhZ2UoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5tZXNzYWdlSGFuZGxlcnMpdC5jYWxsKG51bGwsZSl9aGFuZGxlTWVzc2FnZShlKXtjb25zdCB0PWUuY29ycmVsYXRpb25JZHx8TmFOO2lmKFwiY29ycmVsYXRpb25JZFwiaW4gZSl7aWYoIXRoaXMud2lyZUxpc3RlbmVycy5oYXModCkpcmV0dXJuITE7e2NvbnN0e3Jlc29sdmU6bixyZWplY3Q6aX09dGhpcy53aXJlTGlzdGVuZXJzLmdldCh0KTtcImFja1wiIT09ZS5hY3Rpb24/aShuZXcgYy5Ob0Fja0Vycm9yKGUuYWN0aW9uKSk6XCJwYXlsb2FkXCJpbiBlP2UucGF5bG9hZC5zdWNjZXNzP24uY2FsbChudWxsLGUpOmkobmV3IGMuUnVudGltZUVycm9yKGUucGF5bG9hZCkpOmkobmV3IGMuUnVudGltZUVycm9yKGUpKSx0aGlzLndpcmVMaXN0ZW5lcnMuZGVsZXRlKHQpfX1lbHNlIHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXImJnRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXIuY2FsbChudWxsLGUpLHRoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXI9KCk9Pnt9O3JldHVybiEwfX1pPW5ldyBXZWFrTWFwLHQuZGVmYXVsdD1sfSw4NjI0OihlLHQpPT57ZnVuY3Rpb24gbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5tYW5pZmVzdFVybH1mdW5jdGlvbiBpKGUpe3JldHVybiByKGUpJiZcInN0cmluZ1wiPT10eXBlb2YgZS5hZGRyZXNzfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUudXVpZH1mdW5jdGlvbiBvKGUpe3JldHVybiBlLnJ1bnRpbWUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnJ1bnRpbWUudmVyc2lvbn1mdW5jdGlvbiBzKGUpe3JldHVybiByKGUpJiZvKGUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXNJbnRlcm5hbENvbm5lY3RDb25maWc9dC5pc1BvcnREaXNjb3ZlcnlDb25maWc9dC5pc05ld0Nvbm5lY3RDb25maWc9dC5pc0V4aXN0aW5nQ29ubmVjdENvbmZpZz10LmlzRXh0ZXJuYWxDb25maWc9dm9pZCAwLHQuaXNFeHRlcm5hbENvbmZpZz1uLHQuaXNFeGlzdGluZ0Nvbm5lY3RDb25maWc9aSx0LmlzTmV3Q29ubmVjdENvbmZpZz1zLHQuaXNQb3J0RGlzY292ZXJ5Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBuKGUpJiZvKGUpfHxzKGUpfSx0LmlzSW50ZXJuYWxDb25uZWN0Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfHxzKGUpfX0sMjM2NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZXJyb3JUb1BPSk89dm9pZCAwLHQuZXJyb3JUb1BPSk89ZnVuY3Rpb24oZSl7cmV0dXJue3N0YWNrOmUuc3RhY2ssbWVzc2FnZTplLm1lc3NhZ2UsdG9TdHJpbmc6ZS50b1N0cmluZ319fSwzOTE3OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5leGhhdXN0aXZlQ2hlY2s9dm9pZCAwLHQuZXhoYXVzdGl2ZUNoZWNrPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCB2YWx1ZTogJHtlfSR7dD9gXFxuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlOiAke3Quam9pbihcIlwiKX1gOlwiXCJ9YCl9fSwzNDQyOihlLHQpPT57YXN5bmMgZnVuY3Rpb24gbihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGUpe2NvbnN0IGU9YXdhaXQgbigpO3QucHVzaChlKX1yZXR1cm4gdH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnByb21pc2VNYXBTZXJpYWw9dC5zZXJpYWw9dC5wcm9taXNlTWFwPXQucHJvbWlzaWZ5PXZvaWQgMCx0LnByb21pc2lmeT1mdW5jdGlvbihlKXtyZXR1cm4oLi4udCk9Pm5ldyBQcm9taXNlKCgobixpKT0+e2UoLi4udCwoKGUsdCk9PmU/aShlKTpuKHQpKSl9KSl9LHQucHJvbWlzZU1hcD1hc3luYyBmdW5jdGlvbihlLHQpe3JldHVybiBQcm9taXNlLmFsbChlLm1hcCh0KSl9LHQuc2VyaWFsPW4sdC5wcm9taXNlTWFwU2VyaWFsPWFzeW5jIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4oZS5tYXAoKChlLG4saSk9PigpPT50KGUsbixpKSkpKX19LDMxMjc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnRvcGljUmVmTWFwPW5ldyBNYXB9aW5jUmVmQ291bnQoZSl7Y29uc3QgdD10aGlzLnRvcGljUmVmTWFwLmdldChlKTtsZXQgbjtpZih0KXtjb25zdCBpPXQrMTtuPWksdGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKX1lbHNlIHRoaXMudG9waWNSZWZNYXAuc2V0KGUsMSksbj0xO3JldHVybiBufWRlY1JlZkNvdW50KGUpe2NvbnN0IHQ9dGhpcy50b3BpY1JlZk1hcC5nZXQoZSk7bGV0IG47aWYodCl7Y29uc3QgaT10LTE7dGhpcy50b3BpY1JlZk1hcC5zZXQoZSxpKSxuPWl9ZWxzZSBuPS0xO3JldHVybiBufWFjdE9uRmlyc3QoZSx0LG4pe3JldHVybiAxPT09dGhpcy5pbmNSZWZDb3VudChlKT90KCk6bigpfWFjdE9uTGFzdChlLHQsbil7cmV0dXJuIDA9PT10aGlzLmRlY1JlZkNvdW50KGUpP3QoKTpuKCl9fX0sMjMwMDooZSx0KT0+e2Z1bmN0aW9uIG4oZSl7cmV0dXJuWy4uLmUuc3BsaXQoXCIuXCIpLnJldmVyc2UoKS5lbnRyaWVzKCldLnJlZHVjZSgoKGUsW3Qsbl0pPT5lKyArbioxZTQqKnQpLDApfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbihlKT49bih0KX1mdW5jdGlvbiByKGUpe3JldHVybiBlLnNwbGl0KFwiL1wiKVswXX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dC5wYXJzZVJ1bnRpbWVVdWlkPXQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249dm9pZCAwLHQubWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249aSx0LnBhcnNlUnVudGltZVV1aWQ9cix0LnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShyKGUpLHQpfX0sNDk5OTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudmFsaWRhdGVJZGVudGl0eT12b2lkIDAsdC52YWxpZGF0ZUlkZW50aXR5PWZ1bmN0aW9uKGUpe2xldCB0O3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS51dWlkfHwodD1cIk5vdCBhIHZhbGlkIGlkZW50aXR5IG9iamVjdFwiKSx0fX0sNjQ2NTplPT57dmFyIHQsbj1cIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdD9SZWZsZWN0Om51bGwsaT1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmFwcGx5P24uYXBwbHk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChlLHQsbil9O3Q9biYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5vd25LZXlzP24ub3duS2V5czpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP2Z1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKX07dmFyIHI9TnVtYmVyLmlzTmFOfHxmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZX07ZnVuY3Rpb24gbygpe28uaW5pdC5jYWxsKHRoaXMpfWUuZXhwb3J0cz1vLGUuZXhwb3J0cy5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLGkpe2Z1bmN0aW9uIHIobil7ZS5yZW1vdmVMaXN0ZW5lcih0LG8pLGkobil9ZnVuY3Rpb24gbygpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVtb3ZlTGlzdGVuZXImJmUucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLHIpLG4oW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKX15KGUsdCxvLHtvbmNlOiEwfSksXCJlcnJvclwiIT09dCYmZnVuY3Rpb24oZSx0LG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUub24mJnkoZSxcImVycm9yXCIsdCx7b25jZTohMH0pfShlLHIpfSkpfSxvLkV2ZW50RW1pdHRlcj1vLG8ucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLG8ucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLG8ucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBzPTEwO2Z1bmN0aW9uIGEoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX1mdW5jdGlvbiBjKGUpe3JldHVybiB2b2lkIDA9PT1lLl9tYXhMaXN0ZW5lcnM/by5kZWZhdWx0TWF4TGlzdGVuZXJzOmUuX21heExpc3RlbmVyc31mdW5jdGlvbiBkKGUsdCxuLGkpe3ZhciByLG8scyxkO2lmKGEobiksdm9pZCAwPT09KG89ZS5fZXZlbnRzKT8obz1lLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxlLl9ldmVudHNDb3VudD0wKToodm9pZCAwIT09by5uZXdMaXN0ZW5lciYmKGUuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksbz1lLl9ldmVudHMpLHM9b1t0XSksdm9pZCAwPT09cylzPW9bdF09biwrK2UuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcz9zPW9bdF09aT9bbixzXTpbcyxuXTppP3MudW5zaGlmdChuKTpzLnB1c2gobiksKHI9YyhlKSk+MCYmcy5sZW5ndGg+ciYmIXMud2FybmVkKXtzLndhcm5lZD0hMDt2YXIgaD1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK3MubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO2gubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLGguZW1pdHRlcj1lLGgudHlwZT10LGguY291bnQ9cy5sZW5ndGgsZD1oLGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGQpfXJldHVybiBlfWZ1bmN0aW9uIGgoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDplLHR5cGU6dCxsaXN0ZW5lcjpufSxyPWguYmluZChpKTtyZXR1cm4gci5saXN0ZW5lcj1uLGkud3JhcEZuPXIscn1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgaT1lLl9ldmVudHM7aWYodm9pZCAwPT09aSlyZXR1cm5bXTt2YXIgcj1pW3RdO3JldHVybiB2b2lkIDA9PT1yP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIHI/bj9bci5saXN0ZW5lcnx8cl06W3JdOm4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7KytuKXRbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXTtyZXR1cm4gdH0ocik6dyhyLHIubGVuZ3RoKX1mdW5jdGlvbiBwKGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT10KXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gdyhlLHQpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCksaT0wO2k8dDsrK2kpbltpXT1lW2ldO3JldHVybiBufWZ1bmN0aW9uIHkoZSx0LG4saSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbilpLm9uY2U/ZS5vbmNlKHQsbik6ZS5vbih0LG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpO2UuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbiByKG8pe2kub25jZSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsciksbihvKX0pKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZTwwfHxyKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKTtzPWV9fSksby5pbml0PWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHMhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH0sby5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPDB8fHIoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2UrXCIuXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxvLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gYyh0aGlzKX0sby5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7dmFyIHI9XCJlcnJvclwiPT09ZSxvPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1vKXI9ciYmdm9pZCAwPT09by5lcnJvcjtlbHNlIGlmKCFyKXJldHVybiExO2lmKHIpe3ZhciBzO2lmKHQubGVuZ3RoPjAmJihzPXRbMF0pLHMgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBzO3ZhciBhPW5ldyBFcnJvcihcIlVuaGFuZGxlZCBlcnJvci5cIisocz9cIiAoXCIrcy5tZXNzYWdlK1wiKVwiOlwiXCIpKTt0aHJvdyBhLmNvbnRleHQ9cyxhfXZhciBjPW9bZV07aWYodm9pZCAwPT09YylyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKWkoYyx0aGlzLHQpO2Vsc2V7dmFyIGQ9Yy5sZW5ndGgsaD13KGMsZCk7Zm9yKG49MDtuPGQ7KytuKWkoaFtuXSx0aGlzLHQpfXJldHVybiEwfSxvLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBkKHRoaXMsZSx0LCExKX0sby5wcm90b3R5cGUub249by5wcm90b3R5cGUuYWRkTGlzdGVuZXIsby5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQodGhpcyxlLHQsITApfSxvLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5vbihlLGwodGhpcyxlLHQpKSx0aGlzfSxvLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEodCksdGhpcy5wcmVwZW5kTGlzdGVuZXIoZSxsKHRoaXMsZSx0KSksdGhpc30sby5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxzO2lmKGEodCksdm9pZCAwPT09KGk9dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT0obj1pW2VdKSlyZXR1cm4gdGhpcztpZihuPT09dHx8bi5saXN0ZW5lcj09PXQpMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTooZGVsZXRlIGlbZV0saS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLG4ubGlzdGVuZXJ8fHQpKTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pe2ZvcihyPS0xLG89bi5sZW5ndGgtMTtvPj0wO28tLSlpZihuW29dPT09dHx8bltvXS5saXN0ZW5lcj09PXQpe3M9bltvXS5saXN0ZW5lcixyPW87YnJlYWt9aWYocjwwKXJldHVybiB0aGlzOzA9PT1yP24uc2hpZnQoKTpmdW5jdGlvbihlLHQpe2Zvcig7dCsxPGUubGVuZ3RoO3QrKyllW3RdPWVbdCsxXTtlLnBvcCgpfShuLHIpLDE9PT1uLmxlbmd0aCYmKGlbZV09blswXSksdm9pZCAwIT09aS5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHN8fHQpfXJldHVybiB0aGlzfSxvLnByb3RvdHlwZS5vZmY9by5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsby5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZih2b2lkIDA9PT0obj10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PW4ucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKTp2b2lkIDAhPT1uW2VdJiYoMD09LS10aGlzLl9ldmVudHNDb3VudD90aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTpkZWxldGUgbltlXSksdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHIsbz1PYmplY3Qua2V5cyhuKTtmb3IoaT0wO2k8by5sZW5ndGg7KytpKVwicmVtb3ZlTGlzdGVuZXJcIiE9PShyPW9baV0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhyKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wLHRoaXN9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YodD1uW2VdKSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdCk7ZWxzZSBpZih2b2lkIDAhPT10KWZvcihpPXQubGVuZ3RoLTE7aT49MDtpLS0pdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHRbaV0pO3JldHVybiB0aGlzfSxvLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHUodGhpcyxlLCEwKX0sby5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiB1KHRoaXMsZSwhMSl9LG8ubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUubGlzdGVuZXJDb3VudD9lLmxpc3RlbmVyQ291bnQodCk6cC5jYWxsKGUsdCl9LG8ucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9cCxvLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/dCh0aGlzLl9ldmVudHMpOltdfX19LHQ9e307ZnVuY3Rpb24gbihpKXt2YXIgcj10W2ldO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgbz10W2ldPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmV4cG9ydHN9bi5kPShlLHQpPT57Zm9yKHZhciBpIGluIHQpbi5vKHQsaSkmJiFuLm8oZSxpKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6dFtpXX0pfSxuLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO3ZhciBpPXt9OygoKT0+e24uZChpLHtkcTooKT0+YSxNUzooKT0+cyx4UTooKT0+YyxzTzooKT0+ZmUsWnU6KCk9PmdlLEkzOigpPT5tZSwkVTooKT0+dmUsaTA6KCk9PkNlLGNYOigpPT5kLF9XOigpPT5oLFUkOigpPT53LFU3OigpPT55LHJkOigpPT5wZX0pO3ZhciBlLHQscixvPW4oMTY4MSk7Y2xhc3MgcyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGU9XCJBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZFwiLHQpe3ZhciBuO3N1cGVyKGUpLHQmJih0aGlzLmlubmVyRXJyb3I9dCYmdCksdGhpcy5zdGFjaz1udWxsPT09KG49dGhpcy5zdGFjayl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucmVwbGFjZSgvXihcXHcqRXJyb3IpLyxgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9fWNsYXNzIGEgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gZXhlY3V0ZSBhZGFwdGVyIGZ1bmN0aW9uXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgYyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byByYWlzZSBldmVudFwiLHQpe3N1cGVyKGUsdCl9fWNsYXNzIGQgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhZGFwdGVyXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgaCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkludmFsaWQgcGFyYW1ldGVyIHZhbHVlXCIsdCl7c3VwZXIoZSx0KX19IWZ1bmN0aW9uKGUpe2UuQWN0aXZhdGVXb3JrYm9vaz1cIkFjdGl2YXRlV29ya2Jvb2tcIixlLkFjdGl2YXRlV29ya3NoZWV0PVwiQWN0aXZhdGVXb3Jrc2hlZXRcIixlLkFkZFdvcmtzaGVldD1cIkFkZFdvcmtzaGVldFwiLGUuQ2FsY3VsYXRlV29ya2Jvb2s9XCJDYWxjdWxhdGVXb3JrYm9va1wiLGUuQ2FsY3VsYXRlV29ya3NoZWV0PVwiQ2FsY3VsYXRlV29ya3NoZWV0XCIsZS5DbGVhckFsbENlbGxzPVwiQ2xlYXJBbGxDZWxsc1wiLGUuQ2xlYXJBbGxDZWxsVmFsdWVzPVwiQ2xlYXJBbGxDZWxsVmFsdWVzXCIsZS5DbGVhckFsbENlbGxGb3JtYXR0aW5nPVwiQ2xlYXJBbGxDZWxsRm9ybWF0dGluZ1wiLGUuQ2xlYXJDZWxsVmFsdWVzPVwiQ2xlYXJDZWxsVmFsdWVzXCIsZS5DbGVhckNlbGxGb3JtYXR0aW5nPVwiQ2xlYXJDZWxsRm9ybWF0dGluZ1wiLGUuQ2xlYXJDZWxscz1cIkNsZWFyQ2VsbHNcIixlLkNsb3NlV29ya2Jvb2s9XCJDbG9zZVdvcmtib29rXCIsZS5DcmVhdGVXb3JrYm9vaz1cIkNyZWF0ZVdvcmtib29rXCIsZS5EZWxldGVXb3Jrc2hlZXQ9XCJEZWxldGVXb3Jrc2hlZXRcIixlLkRlcmVnaXN0ZXJFdmVudD1cIkRlcmVnaXN0ZXJFdmVudFwiLGUuRXZlbnRGaXJlZD1cIkV2ZW50RmlyZWRcIixlLkdldENhbGN1bGF0aW9uTW9kZT1cIkdldENhbGN1bGF0aW9uTW9kZVwiLGUuR2V0Q2VsbHM9XCJHZXRDZWxsc1wiLGUuR2V0V29ya2Jvb2tCeUlkPVwiR2V0V29ya2Jvb2tCeUlkXCIsZS5HZXRXb3JrYm9va05hbWU9XCJHZXRXb3JrYm9va05hbWVcIixlLkdldFdvcmtib29rcz1cIkdldFdvcmtib29rc1wiLGUuR2V0V29ya3NoZWV0QnlJZD1cIkdldFdvcmtzaGVldEJ5SWRcIixlLkdldFdvcmtzaGVldEJ5TmFtZT1cIkdldFdvcmtzaGVldEJ5TmFtZVwiLGUuR2V0V29ya3NoZWV0TmFtZT1cIkdldFdvcmtzaGVldE5hbWVcIixlLkdldFdvcmtzaGVldHM9XCJHZXRXb3Jrc2hlZXRzXCIsZS5Mb2dNZXNzYWdlPVwiTG9nTWVzc2FnZVwiLGUuT3Blbldvcmtib29rPVwiT3Blbldvcmtib29rXCIsZS5Qcm90ZWN0V29ya3NoZWV0PVwiUHJvdGVjdFdvcmtzaGVldFwiLGUuUmVnaXN0ZXJFdmVudD1cIlJlZ2lzdGVyRXZlbnRcIixlLlNhdmVXb3JrYm9vaz1cIlNhdmVXb3JrYm9va1wiLGUuU2F2ZVdvcmtib29rQXM9XCJTYXZlV29ya2Jvb2tBc1wiLGUuU2V0Q2VsbFZhbHVlcz1cIlNldENlbGxWYWx1ZXNcIixlLlNldENlbGxGb3JtYXR0aW5nPVwiU2V0Q2VsbEZvcm1hdHRpbmdcIixlLlNldENlbGxOYW1lPVwiU2V0Q2VsbE5hbWVcIixlLlNldFdvcmtzaGVldE5hbWU9XCJTZXRXb3Jrc2hlZXROYW1lXCIsZS5GaWx0ZXJDZWxscz1cIkZpbHRlckNlbGxzXCIsZS5RdWl0QXBwbGljYXRpb249XCJRdWl0QXBwbGljYXRpb25cIn0oZXx8KGU9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2YXRlPVwiQWN0aXZhdGVcIixlLkFkZFdvcmtzaGVldD1cIkFkZFdvcmtzaGVldFwiLGUuQ2hhbmdlPVwiQ2hhbmdlXCIsZS5DbG9zZT1cIkNsb3NlXCIsZS5EZWFjdGl2YXRlPVwiRGVhY3RpdmF0ZVwiLGUuRGVsZXRlV29ya3NoZWV0PVwiRGVsZXRlV29ya3NoZWV0XCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZS5Xb3JrYm9vaz1cIldvcmtib29rXCIsZS5Xb3Jrc2hlZXQ9XCJXb3Jrc2hlZXRcIn0ocnx8KHI9e30pKTtjb25zdCBsPVwiMS4zLjBcIjtsZXQgdT0hMTtjb25zdCBwPVwiW0BvcGVuZmluL2V4Y2VsXVwiLHc9KCk9Pnt1PSExfSx5PSgpPT57dT0hMCxnKFwidjEuMy4wXCIpfSxmPShlLHQpPT57dSYmKGUuaW5uZXJFcnJvcj9jb25zb2xlLmVycm9yKHQ/YCR7cH0gJHt0fWA6cCxlLFwiXFxuXFxuKGlubmVyKVwiLGUuaW5uZXJFcnJvcik6Y29uc29sZS5lcnJvcih0P2Ake3B9ICR7dH1gOnAsZSkpfSxnPSguLi5lKT0+e3UmJmNvbnNvbGUubG9nKHAsLi4uZSl9LG09KC4uLmUpPT57dSYmY29uc29sZS53YXJuKHAsLi4uZSl9O28uSHx8T2JqZWN0LmFzc2lnbih3aW5kb3cse2Zpbjp7fX0pLE9iamVjdC5hc3NpZ24oby5ILHtJbnRlZ3JhdGlvbnM6e0V4Y2VsOntlbmFibGVMb2dnaW5nOnksZGlzYWJsZUxvZ2dpbmc6d319fSk7Y29uc3Qgdj0oKT0+XCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csKGU9Pntjb25zdCB0PTE2Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4oXCJ4XCI9PT1lP3Q6MyZ0fDgpLnRvU3RyaW5nKDE2KX0pKSxDPW5ldyBNYXAsST0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQWN0aXZhdGUgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5BY3RpdmF0ZVdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LHg9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENhbGN1bGF0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNhbGN1bGF0ZVdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEE9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGFsbCBjZWxsIHZhbHVlcyAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQWxsQ2VsbFZhbHVlcyxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LGI9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGFsbCBjZWxsIGZvcm1hdHRpbmcgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckFsbENlbGxGb3JtYXR0aW5nLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sRT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQ2xlYXIgYWxsIGNlbGxzICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJBbGxDZWxscyxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LFA9KHQsbik9PmFzeW5jIGk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGNlbGwgdmFsdWVzOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgKTtjb25zdCByPXtjZWxsUmFuZ2U6aSxvYmplY3RJZDpufTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQ2VsbFZhbHVlcyxyKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LGs9KHQsbik9PmFzeW5jIGk9PntnKGBXb3Jrc2hlZXQ6IENsZWFyIGNlbGwgZm9ybWF0dGluZzsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCk7Y29uc3Qgcj17Y2VsbFJhbmdlOmksb2JqZWN0SWQ6bn07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckNlbGxGb3JtYXR0aW5nLHIpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sTT0odCxuKT0+YXN5bmMgaT0+e2coYFdvcmtzaGVldDogQ2xlYXIgY2VsbHM7IGNlbGxSYW5nZToke2l9ICgke259KWApO2NvbnN0IHI9e2NlbGxSYW5nZTppLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJDZWxscyxyKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LF89KGUsdCk9PihuLGkscj0xZTMpPT57aWYoTnVtYmVyLmlzTmFOKHIpfHxyPD0wKXRocm93IG5ldyBzKFwiVXBkYXRlIGludGVydmFsIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7Y29uc3Qgbz12KCk7ZyhgV29ya3NoZWV0OiBDcmVhdGUgZGF0YSBzdHJlYW07IHN0cmVhbUlkOiR7b307IGNlbGxSYW5nZToke259OyB1cGRhdGVJbnRlcnZhbDoke3J9ICgke3R9KWApO2NvbnN0IGE9e2Nsb3NlOigpPT57ZyhgQ2xvc2VkIHN0cmVhbSAoJHtvfSlgKSwoZT0+e3ZhciB0O3RyeXtjb25zdCBuPUMuZ2V0KGUpO2lmKCFuKXRocm93IG5ldyBzKGBVbmFibGUgdG8gZmluZCByZWdpc3RlcmVkIGRhdGEgc3RyZWFtIHdpdGggaWQgJHtlfWApO3ZvaWQgMCE9PShudWxsIT09KHQ9bi50aW1lcikmJnZvaWQgMCE9PXQ/dDp2b2lkIDApJiZUKGUpLEMuZGVsZXRlKGUpfWNhdGNoKGUpe3Rocm93IGYoZSksZX19KShvKX0sY2VsbFJhbmdlOm4saWQ6byxzdGFydDooKT0+e2coYFN0YXJ0ZWQgc3RyZWFtaW5nICgke299KWApLEIobyxpLGUsdCl9LHN0b3A6KCk9PntnKGBTdG9wcGVkIHN0cmVhbWluZyAoJHtvfSlgKSxUKG8pfSx1cGRhdGVJbnRlcnZhbDpyLHdvcmtzaGVldElkOnR9O3JldHVybiBDLnNldChvLHtkYXRhU3RyZWFtOmF9KSxhfSxTPShlLHQsbixpKT0+e2NvbnN0IG89e2V2ZW50VGFyZ2V0OnIuV29ya3NoZWV0LG9iamVjdElkOnR9O3JldHVybntvYmplY3RJZDp0LGFjdGl2YXRlOkkoZSx0KSxhZGRFdmVudExpc3RlbmVyOm4oZSxvKSxjYWxjdWxhdGU6eChlLHQpLGNsZWFyQWxsQ2VsbEZvcm1hdHRpbmc6YihlLHQpLGNsZWFyQWxsQ2VsbHM6RShlLHQpLGNsZWFyQWxsQ2VsbFZhbHVlczpBKGUsdCksY2xlYXJDZWxsRm9ybWF0dGluZzprKGUsdCksY2xlYXJDZWxsczpNKGUsdCksY2xlYXJDZWxsVmFsdWVzOlAoZSx0KSxjcmVhdGVEYXRhU3RyZWFtOl8oZSx0KSxkZWxldGU6TyhlLHQpLGZpbHRlckNlbGxzOlcoZSx0KSxnZXRDZWxsczpGKGUsdCksZ2V0TmFtZTpMKGUsdCkscHJvdGVjdDpSKGUsdCkscmVtb3ZlRXZlbnRMaXN0ZW5lcjppKGUpLHNldENlbGxGb3JtYXR0aW5nOiQoZSx0KSxzZXRDZWxsTmFtZTpHKGUsdCksc2V0Q2VsbFZhbHVlczpqKGUsdCksc2V0TmFtZTpOKGUsdCl9fSxPPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBEZWxldGUgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5EZWxldGVXb3Jrc2hlZXQsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxXPSh0LG4pPT5hc3luYyhpLHIsbyxzLGMsZD0hMCk9PntnKGBXb3Jrc2hlZXQ6IEZpbHRlciBjZWxsczsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCx7Y29sdW1uSW5kZXg6cixmaWx0ZXJPcGVyYXRvcjpvLGNyaXRlcmlhMTpzLGNyaXRlcmlhMjpjLHZpc2libGVEcm9wRG93bjpkfSk7Y29uc3QgaD17Y2VsbFJhbmdlOmksY3JpdGVyaWExOnMsY3JpdGVyaWEyOmMsY29sdW1uSW5kZXg6cixmaWx0ZXJPcGVyYXRvcjpvLG9iamVjdElkOm4sdmlzaWJsZURyb3BEb3duOmR9O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuRmlsdGVyQ2VsbHMsaCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxGPSh0LG4pPT5hc3luYyBpPT57ZyhgV29ya3NoZWV0OiBHZXQgY2VsbHM7IGNlbGxSYW5nZToke2l9ICgke259KWApO2NvbnN0IHI9e2NlbGxSYW5nZTppLG9iamVjdElkOm59O2xldCBvPVtdO3RyeXtvPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRDZWxscyxyKSxnKGAke2l9OmAsbyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIG99LEw9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IEdldCBuYW1lICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldE5hbWUsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxSPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBQcm90ZWN0ICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuUHJvdGVjdFdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LCQ9KHQsbik9PmFzeW5jKGkscik9PntnKGBXb3Jrc2hlZXQ6IFNldCBjZWxsIGZvcm1hdHRpbmc7IGNlbGxSYW5nZToke2l9ICgke259KWAscik7Y29uc3Qgbz17Y2VsbFJhbmdlOmksZm9ybWF0dGluZzpyLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuU2V0Q2VsbEZvcm1hdHRpbmcsbyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxHPSh0LG4pPT5hc3luYyhpLHIpPT57Y29uc3Qgbz1yLnRyaW0oKTtsZXQgcztpZighbyl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIiksZihzKSxzO2lmKG8ubGVuZ3RoPjI1NSl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIG11c3QgYmUgMjU1IGNoYXJhY3RlcnMgb3IgbGVzc1wiKSxmKHMpLHM7aWYoL1teYS16MC05Xy4/XFxcXFwiJ10vLnRlc3QobykpdGhyb3cgcz1uZXcgaChcIkNlbGwgcmFuZ2UgbmFtZSBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnNcIiksZihzKSxzO2lmKC9eXFxkfFxcZCQvLnRlc3QobykpdGhyb3cgcz1uZXcgaChcIkNlbGwgcmFuZ2UgbmFtZSBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBhIG51bWJlclwiKSxmKHMpLHM7ZyhgV29ya3NoZWV0OiBTZXQgY2VsbCBuYW1lOyBjZWxsUmFuZ2U6JHtpfTsgbmV3Q2VsbFJhbmdlTmFtZToke299ICgke259KWApO2NvbnN0IGM9e2NlbGxSYW5nZTppLG5hbWU6byxvYmplY3RJZDpufTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLlNldENlbGxOYW1lLGMpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0saj0odCxuKT0+YXN5bmMoaSxyKT0+e2coYFdvcmtzaGVldDogU2V0IGNlbGwgdmFsdWVzOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgLHIpO2NvbnN0IG89e2NlbGxSYW5nZTppLG9iamVjdElkOm4sdmFsdWVzTWFwOnJ9O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuU2V0Q2VsbFZhbHVlcyxvKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LE49KHQsbik9PmFzeW5jIGk9Pntjb25zdCByPWkudHJpbSgpO2xldCBvO2lmKCFyKXRocm93IG89bmV3IGgoXCJXb3Jrc2hlZXQgbmFtZSBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nXCIpLGYobyksbztpZihyLmxlbmd0aD4zMSl0aHJvdyBvPW5ldyBoKFwiV29ya3NoZWV0IG5hbWUgbXVzdCBiZSAzMSBjaGFyYWN0ZXJzIG9yIGxlc3NcIiksZihvKSxvO2coYFdvcmtzaGVldDogU2V0IG5hbWU7IG5ld1dvcmtzaGVldE5hbWU6JHtyfSAoJHtufSlgKTtjb25zdCBzPXtuZXdXb3Jrc2hlZXROYW1lOnIsb2JqZWN0SWQ6bn07dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuU2V0V29ya3NoZWV0TmFtZSxzKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEI9KGUsdCxuLGkpPT57dmFyIHI7dHJ5e2NvbnN0IG89Qy5nZXQoZSk7aWYoIW8pdGhyb3cgbmV3IHMoYFVuYWJsZSB0byBmaW5kIHJlZ2lzdGVyZWQgZGF0YSBzdHJlYW0gd2l0aCBpZCAke2V9YCk7dm9pZCAwIT09KG51bGwhPT0ocj1vLnRpbWVyKSYmdm9pZCAwIT09cj9yOnZvaWQgMCkmJlQoZSk7Y29uc3R7Y2VsbFJhbmdlOmEsdXBkYXRlSW50ZXJ2YWw6Y309by5kYXRhU3RyZWFtLGQ9YXN5bmMoKT0+e2NvbnN0IHI9YXdhaXQgdCgpO3RyeXthd2FpdCBqKG4saSkoYSxbW3JdXSl9Y2F0Y2godCl7bShgVW5hYmxlIHRvIHVwZGF0ZSBjZWxsIHJhbmdlIGZvciBzdHJlYW0gd2l0aCBpZCAke2V9OiAke251bGw9PXQ/dm9pZCAwOnQubWVzc2FnZX1gKX19LGg9d2luZG93LnNldEludGVydmFsKGQsYyk7by50aW1lcj1ofWNhdGNoKGUpe3Rocm93IGYoZSksZX19LFQ9ZT0+e3ZhciB0O3RyeXtjb25zdCBuPUMuZ2V0KGUpO2lmKCFuKXRocm93IG5ldyBzKGBVbmFibGUgdG8gZmluZCByZWdpc3RlcmVkIGRhdGEgc3RyZWFtIHdpdGggaWQgJHtlfWApO2lmKHZvaWQgMD09PShudWxsIT09KHQ9bi50aW1lcikmJnZvaWQgMCE9PXQ/dDp2b2lkIDApKXJldHVybjt3aW5kb3cuY2xlYXJJbnRlcnZhbChuLnRpbWVyKSxuLnRpbWVyPXZvaWQgMH1jYXRjaChlKXt0aHJvdyBmKGUpLGV9fSxEPW5ldyBNYXAsVj0obixpKT0+YXN5bmMocixvKT0+e2lmKCFpfHwhaS5ldmVudFRhcmdldHx8IWkub2JqZWN0SWQpe2NvbnN0IGU9bmV3IGMoXCJFdmVudCByZWdpc3RyYXRpb24gbWlzc2luZyByZXF1aXJlZCB2YWx1ZXNcIik7dGhyb3cgZihlKSxlfWNvbnN0IHM9T2JqZWN0LmtleXModCkuZmluZCgoZT0+ZS50b0xvd2VyQ2FzZSgpPT09ci50b0xvd2VyQ2FzZSgpKSk7aWYoIXMpe2NvbnN0IGU9bmV3IGMoYFVuc3VwcG9ydGVkIGV2ZW50IG5hbWU6ICR7cn1gKTt0aHJvdyBmKGUpLGV9aS5ldmVudE5hbWU9dFtzXSxnKFwiUmVnaXN0ZXJpbmcgZXZlbnRcIixpKTt0cnl7Y29uc3QgdD1hd2FpdCBuLmRpc3BhdGNoKGUuUmVnaXN0ZXJFdmVudCxpKTtELnNldCh0LG8pfWNhdGNoKGUpe3Rocm93IG5ldyBhKHZvaWQgMCxlKX19LEg9dD0+YXN5bmMgbj0+e2xldCBpO2Zvcihjb25zdFtlLHRdb2YgRClpZih0PT09bil7aT1lO2JyZWFrfWlmKCFpKXRocm93IG5ldyBjO2coXCJEZXJlZ2lzdGVyaW5nIGV2ZW50OlwiLGkpO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuRGVyZWdpc3RlckV2ZW50LGkpLEQuZGVsZXRlKGkpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sVT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBBY3RpdmF0ZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5BY3RpdmF0ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sej0odCxuLGkscik9PmFzeW5jKCk9PntsZXQgbztnKGBXb3JrYm9vazogQWRkIHdvcmtzaGVldCAoJHtufSlgKTt0cnl7bz1hd2FpdCB0LmRpc3BhdGNoKGUuQWRkV29ya3NoZWV0LG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBTKHQsbyxpLHIpfSxxPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IENhbGN1bGF0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNhbGN1bGF0ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sSj0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBDbG9zZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5DbG9zZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sSz0oZSx0LG4saSk9Pntjb25zdCBvPXtldmVudFRhcmdldDpyLldvcmtib29rLG9iamVjdElkOnR9O3JldHVybntvYmplY3RJZDp0LGFjdGl2YXRlOlUoZSx0KSxhZGRXb3Jrc2hlZXQ6eihlLHQsbixpKSxhZGRFdmVudExpc3RlbmVyOm4oZSxvKSxjYWxjdWxhdGU6cShlLHQpLGNsb3NlOkooZSx0KSxnZXRDYWxjdWxhdGlvbk1vZGU6WShlLHQpLGdldE5hbWU6UShlLHQpLGdldFdvcmtzaGVldEJ5TmFtZTpaKGUsdCxuLGkpLGdldFdvcmtzaGVldHM6WChlLHQsbixpKSxyZW1vdmVFdmVudExpc3RlbmVyOmkoZSksc2F2ZTplZShlLHQpLHNhdmVBczp0ZShlLHQpfX0sWT0odCxuKT0+YXN5bmMoKT0+e2coXCJXb3JrYm9vazogR2V0IGNhbGN1bGF0aW9uIG1vZGVcIik7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuR2V0Q2FsY3VsYXRpb25Nb2RlLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sUT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtib29rOiBHZXQgbmFtZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3JrYm9va05hbWUsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxaPSh0LG4saSxyKT0+YXN5bmMgbz0+e2xldCBzO2coYFdvcmtib29rOiBHZXQgd29ya3NoZWV0IGJ5IG5hbWU6ICR7b30gKCR7bn0pYCk7dHJ5e2lmKHM9YXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldEJ5TmFtZSx7b2JqZWN0SWQ6bix3b3Jrc2hlZXROYW1lOm99KSxudWxsPT09cylyZXR1cm4gbnVsbH1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gUyh0LHMsaSxyKX0sWD0odCxuLGkscik9PmFzeW5jKCk9PntsZXQgbztnKGBXb3JrYm9vazogR2V0IHdvcmtzaGVldHMgKCR7bn0pYCk7dHJ5e289YXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtzaGVldHMsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIG8ubWFwKChlPT5TKHQsZSxpLHIpKSl9LGVlPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IFNhdmUgKCR7bn0pYCk7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuU2F2ZVdvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sdGU9KHQsbik9PmFzeW5jIGk9PntnKGBXb3JrYm9vazogU2F2ZSBhczsgZmlsZVBhdGg6JHtpfSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5TYXZlV29ya2Jvb2tBcyx7ZmlsZVBhdGg6aSxvYmplY3RJZDpufSl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxuZT10PT5hc3luYygpPT57bGV0IG47ZyhcIkFwcGxpY2F0aW9uOiBDcmVhdGUgd29ya2Jvb2tcIik7dHJ5e249YXdhaXQgdC5kaXNwYXRjaChlLkNyZWF0ZVdvcmtib29rKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gSyh0LG4sVixIKX0saWU9dD0+YXN5bmMgbj0+e2xldCBpO2coYEFwcGxpY2F0aW9uOiBHZXQgd29ya2Jvb2s7IGlkOiR7bn1gKTt0cnl7aT1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya2Jvb2tCeUlkLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBLKHQsaSxWLEgpfSxyZT10PT5hc3luYygpPT57bGV0IG47ZyhcIkFwcGxpY2F0aW9uOiBHZXQgd29ya2Jvb2tzXCIpO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3JrYm9va3MpfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBuLm1hcCgoZT0+Syh0LGUsVixIKSkpfSxvZT10PT5hc3luYyBuPT57ZyhgQXBwbGljYXRpb246IEdldCB3b3Jrc2hlZXQ7IGlkOiR7bn1gKTt0cnl7bj1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya3NoZWV0QnlJZCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gUyh0LG4sVixIKX0sc2U9dD0+YXN5bmMgbj0+e2xldCBpO2coYEFwcGxpY2F0aW9uOiBPcGVuIHdvcmtib29rOyBmaWxlUGF0aDoke259YCk7dHJ5e2k9YXdhaXQgdC5kaXNwYXRjaChlLk9wZW5Xb3JrYm9vayxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gSyh0LGksVixIKX0sYWU9dD0+YXN5bmMobj0hMCk9PntnKGBBcHBsaWNhdGlvbjogUXVpdDsgZGlzcGxheUFsZXJ0czoke259YCk7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuUXVpdEFwcGxpY2F0aW9uLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX07dmFyIGNlOyFmdW5jdGlvbihlKXtlW2UuSW5mbz0xXT1cIkluZm9cIixlW2UuV2Fybj0yXT1cIldhcm5cIixlW2UuRXJyb3I9M109XCJFcnJvclwifShjZXx8KGNlPXt9KSk7Y29uc3QgZGU9XCJleGNlbC1hZGFwdGVyXCIsaGU9digpO2xldCBsZSx1ZTtjb25zdCBwZT1hc3luYygpPT57dHJ5e2lmKCFsZXx8IWF3YWl0KGFzeW5jIGU9Pihhd2FpdCBvLkguSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmdldEFsbENoYW5uZWxzKCkpLnNvbWUoKHQ9PnQuY2hhbm5lbE5hbWU9PT1lKSkpKGhlKSl7YXdhaXQoYXN5bmMoKT0+e3ZhciBlO2NvbnN0IHQ9bnVsbD09PShlPShhd2FpdCBvLkguQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRNYW5pZmVzdCgpKS5hcHBBc3NldHMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmZpbmQoKGU9PmUuYWxpYXM9PT1kZSkpO2lmKHQpcmV0dXJuIHZvaWQgbShcIkRldGVjdGVkIGFkYXB0ZXIgcGFja2FnZSBpbiBhcHAgbWFuaWZlc3QgYXBwQXNzZXRzXCIsdCk7aWYoYXdhaXQgeWUoKSlyZXR1cm4gdm9pZCBnKFwiVXNpbmcgZXhpc3RpbmcgYWRhcHRlciBwYWNrYWdlXCIpO2NvbnN0IG49e2FsaWFzOmRlLHNyYzpcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vcmVsZWFzZS9pbnRlZ3JhdGlvbnMvZXhjZWwvMS4zLjAvT3BlbkZpbi5FeGNlbC56aXBcIix0YXJnZXQ6XCJPcGVuRmluLkV4Y2VsLmV4ZVwiLHZlcnNpb246bH07ZyhcIkRvd25sb2FkaW5nIGFkYXB0ZXIgcGFja2FnZVwiLG4pO3RyeXthd2FpdCBvLkguU3lzdGVtLmRvd25sb2FkQXNzZXQobiwoKCk9Pnt9KSl9Y2F0Y2goZSl7dGhyb3cgZihcIlVuYWJsZSB0byBkb3dubG9hZCBhZGFwdGVyIHBhY2thZ2VcIiksZX19KSgpO2NvbnN0IGU9YXdhaXQgby5ILlN5c3RlbS5nZXRSdW50aW1lSW5mbygpLHQ9by5ILkFwcGxpY2F0aW9uLm1lLnV1aWQsbj1lLnZlcnNpb24saT1lLnNlY3VyaXR5UmVhbG07ZyhcIkluaXRpYWxpemluZyBhZGFwdGVyXCIse2FwcElkOnQsY2hhbm5lbE5hbWU6aGUscnVudGltZVZlcnNpb246bixzZWN1cml0eVJlYWxtOml9KSxsZT1hd2FpdCBvLkguU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzcyh7YWxpYXM6ZGUsYXJndW1lbnRzOmAke3R9ICR7bn0gJHtpfSAke2hlfWB9KSxnKGBBZGFwdGVyIHJ1bm5pbmcgd2l0aCB1dWlkICR7bGUudXVpZH1gKX1jb25zdCBpPW8uSC5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChoZSx7cGF5bG9hZDp7dmVyc2lvbjpsfX0pLHM9bmV3IFByb21pc2UoKGU9PntzZXRUaW1lb3V0KGUsMmU0KX0pKS50aGVuKCgoKT0+e3Rocm93IG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gdG8gYWRhcHRlciB0aW1lZCBvdXRcIil9KSk7dWU9YXdhaXQgUHJvbWlzZS5yYWNlKFtpLHNdKSxnKGBDb25uZWN0ZWQgdG8gYWRhcHRlciBvbiBjaGFubmVsICR7aGV9YCksdWUucmVnaXN0ZXIoZS5Mb2dNZXNzYWdlLHdlKSx1ZS5yZWdpc3RlcihlLkV2ZW50RmlyZWQsKG49dWUsZT0+e2NvbnN0e2V2ZW50UmVnaXN0cmF0aW9uSWQ6aX09ZSxvPUQuZ2V0KGkpO2lmKCFvKXRocm93IG5ldyBjKGBObyByZWdpc3RlcmVkIGV2ZW50IGxpc3RlbmVyIGZvdW5kIGZvciBpZDogJHtpfWApO2coXCJFdmVudCBwYXlsb2FkIHJlY2VpdmVkXCIsZSksKChlLG4saSk9Pnt2YXIgbyxzO3N3aXRjaChpLmV2ZW50VGFyZ2V0KXtjYXNlIHIuV29ya2Jvb2s6c3dpdGNoKG51bGw9PT0obz1pLmV2ZW50TmFtZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9VcHBlckNhc2UoKSl7Y2FzZSB0LkFjdGl2YXRlLnRvVXBwZXJDYXNlKCk6Y2FzZSB0LkNsb3NlLnRvVXBwZXJDYXNlKCk6Y2FzZSB0LkRlYWN0aXZhdGUudG9VcHBlckNhc2UoKTpyZXR1cm4gZSgpO2Nhc2UgdC5BZGRXb3Jrc2hlZXQudG9VcHBlckNhc2UoKTpjYXNlIHQuRGVsZXRlV29ya3NoZWV0LnRvVXBwZXJDYXNlKCk6cmV0dXJuIGUoUyhuLGkud29ya3NoZWV0T2JqZWN0SWQsVixIKSk7ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCB3b3JrYm9vayBldmVudDogJHtpLmV2ZW50TmFtZX1gKX1jYXNlIHIuV29ya3NoZWV0OnN3aXRjaChudWxsPT09KHM9aS5ldmVudE5hbWUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpe2Nhc2UgdC5BY3RpdmF0ZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKCk7Y2FzZSB0LkNoYW5nZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKGkuY2hhbmdlZENlbGxzKTtjYXNlIHQuRGVhY3RpdmF0ZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKCk7ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCB3b3Jrc2hlZXQgZXZlbnQ6ICR7aS5ldmVudE5hbWV9YCl9ZGVmYXVsdDp0aHJvdyBuZXcgYyhgVW5leHBlY3RlZCBldmVudCB0YXJnZXQ6ICR7aS5ldmVudFRhcmdldH1gKX19KShvLG4sZSl9KSl9Y2F0Y2goZSl7Y29uc3QgdD1uZXcgZCh2b2lkIDAsZSk7dGhyb3cgZih0KSx0fXZhciBuO3JldHVybnthZGFwdGVyOntjaGFubmVsTmFtZTpoZSx2ZXJzaW9uOmx9LGNyZWF0ZVdvcmtib29rOm5lKHVlKSxnZXRXb3JrYm9va0J5SWQ6aWUodWUpLGdldFdvcmtib29rczpyZSh1ZSksZ2V0V29ya3NoZWV0QnlJZDpvZSh1ZSksb3Blbldvcmtib29rOnNlKHVlKSxxdWl0OmFlKHVlKX19LHdlPWU9Pntjb25zdHttZXNzYWdlOnQsdHlwZTpufT1lLGk9XCJbYWRhcHRlcl1cIjtzd2l0Y2gobil7Y2FzZSBjZS5FcnJvcjpmKHQsaSk7YnJlYWs7Y2FzZSBjZS5JbmZvOmcoaSx0KTticmVhaztjYXNlIGNlLldhcm46bShpLHQpfX0seWU9YXN5bmMoKT0+e3RyeXtjb25zdCBlPWF3YWl0IG8uSC5TeXN0ZW0uZ2V0QXBwQXNzZXRJbmZvKHthbGlhczpkZX0pO3JldHVybiBlJiZlLnZlcnNpb249PT1sfWNhdGNoKGUpe3JldHVybiExfX07dmFyIGZlLGdlLG1lLHZlLENlOyFmdW5jdGlvbihlKXtlLkNvbnRpbnVvdXM9XCJDb250aW51b3VzXCIsZS5EYXNoPVwiRGFzaFwiLGUuRGFzaERvdD1cIkRhc2hEb3RcIixlLkRhc2hEb3REb3Q9XCJEYXNoRG90RG90XCIsZS5Eb3Q9XCJEb3RcIixlLkRvdWJsZT1cIkRvdWJsZVwiLGUuU2xhbnREYXNoRG90PVwiU2xhbnREYXNoRG90XCIsZS5Ob25lPVwiTm9uZVwifShmZXx8KGZlPXt9KSksZnVuY3Rpb24oZSl7ZS5DZW50ZXI9XCJDZW50ZXJcIixlLkNlbnRlckFjcm9zc1NlbGVjdGlvbj1cIkNlbnRlckFjcm9zc1NlbGVjdGlvblwiLGUuRGlzdHJpYnV0ZWQ9XCJEaXN0cmlidXRlZFwiLGUuRmlsbD1cIkZpbGxcIixlLkdlbmVyYWw9XCJHZW5lcmFsXCIsZS5KdXN0aWZ5PVwiSnVzdGlmeVwiLGUuTGVmdD1cIkxlZnRcIixlLlJpZ2h0PVwiUmlnaHRcIn0oZ2V8fChnZT17fSkpLGZ1bmN0aW9uKGUpe2UuQXV0b21hdGljPVwiQXV0b21hdGljXCIsZS5DaGVja2VyPVwiQ2hlY2tlclwiLGUuQ3Jpc3NDcm9zcz1cIkNyaXNzQ3Jvc3NcIixlLkRvd249XCJEb3duXCIsZS5HcmF5MTY9XCJHcmF5MTZcIixlLkdyYXkyNT1cIkdyYXkyNVwiLGUuR3JheTUwPVwiR3JheTUwXCIsZS5HcmF5NzU9XCJHcmF5NzVcIixlLkdyYXk4PVwiR3JheThcIixlLkdyaWQ9XCJHcmlkXCIsZS5Ib3Jpem9udGFsPVwiSG9yaXpvbnRhbFwiLGUuTGlnaHREb3duPVwiTGlnaHREb3duXCIsZS5MaWdodEhvcml6b250YWw9XCJMaWdodEhvcml6b250YWxcIixlLkxpZ2h0VXA9XCJMaWdodFVwXCIsZS5MaWdodFZlcnRpY2FsPVwiTGlnaHRWZXJ0aWNhbFwiLGUuTGluZWFyR3JhZGllbnQ9XCJMaW5lYXJHcmFkaWVudFwiLGUuTm9uZT1cIk5vbmVcIixlLlJlY3Rhbmd1bGFyR3JhZGllbnQ9XCJSZWN0YW5ndWxhckdyYWRpZW50XCIsZS5TZW1pR3JheTc1PVwiU2VtaUdyYXk3NVwiLGUuU29saWQ9XCJTb2xpZFwiLGUuVXA9XCJVcFwiLGUuVmVydGljYWw9XCJWZXJ0aWNhbFwifShtZXx8KG1lPXt9KSksZnVuY3Rpb24oZSl7ZS5Cb3R0b209XCJCb3R0b21cIixlLkNlbnRlcj1cIkNlbnRlclwiLGUuRGlzdHJpYnV0ZWQ9XCJEaXN0cmlidXRlZFwiLGUuSnVzdGlmeT1cIkp1c3RpZnlcIixlLlRvcD1cIlRvcFwifSh2ZXx8KHZlPXt9KSksZnVuY3Rpb24oZSl7ZS5BbmQ9XCJBbmRcIixlLk9yPVwiT3JcIixlLlRvcDEwSXRlbXM9XCJUb3AxMEl0ZW1zXCIsZS5Cb3R0b20xMEl0ZW1zPVwiQm90dG9tMTBJdGVtc1wiLGUuVG9wMTBQZXJjZW50PVwiVG9wMTBQZXJjZW50XCIsZS5Cb3R0b20xMFBlcmNlbnQ9XCJCb3R0b20xMFBlcmNlbnRcIixlLkZpbHRlclZhbHVlcz1cIkZpbHRlclZhbHVlc1wifShDZXx8KENlPXt9KSl9KSgpO3ZhciByPWkuZHEsbz1pLk1TLHM9aS54USxhPWkuc08sYz1pLlp1LGQ9aS5JMyxoPWkuJFUsbD1pLmkwLHU9aS5jWCxwPWkuX1csdz1pLlUkLHk9aS5VNyxmPWkucmQ7ZXhwb3J0e3IgYXMgQWRhcHRlckVycm9yLG8gYXMgQXBpRXJyb3IscyBhcyBFdmVudEVycm9yLGEgYXMgRXhjZWxDZWxsQm9yZGVyTGluZVN0eWxlLGMgYXMgRXhjZWxDZWxsSG9yaXpvbnRhbEFsaWdubWVudCxkIGFzIEV4Y2VsQ2VsbFBhdHRlcm4saCBhcyBFeGNlbENlbGxWZXJ0aWNhbEFsaWdubWVudCxsIGFzIEV4Y2VsRmlsdGVyT3BlcmF0b3IsdSBhcyBJbml0aWFsaXphdGlvbkVycm9yLHAgYXMgUGFyYW1ldGVyRXJyb3IsdyBhcyBkaXNhYmxlTG9nZ2luZyx5IGFzIGVuYWJsZUxvZ2dpbmcsZiBhcyBnZXRFeGNlbEFwcGxpY2F0aW9ufTsiLCIoKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17NzAzOihlLHQsbik9PntuLnIodCksbi5kKHQse0NMSUFjdGlvbjooKT0+cC5QdCxDTElGaWx0ZXJPcHRpb25UeXBlOigpPT5wLmVsLENMSVRlbXBsYXRlOigpPT5wLnlXLGRlcmVnaXN0ZXI6KCk9PnR0LGhpZGU6KCk9Pm90LHJlZ2lzdGVyOigpPT5ldCxzaG93OigpPT5udH0pO3ZhciBvPXt9O24ucihvKSxuLmQobyx7c3Vic2NyaWJlOigpPT5jZX0pO3ZhciByPXt9O24ucihyKSxuLmQocix7Y3JlYXRlOigpPT5VZX0pO3ZhciBpPW4oNjc4KSxhPW4oNTMyKSxzPW4oMTUwKTtjb25zdCBjPVwiaG9tZVwiO3ZhciBkOyFmdW5jdGlvbihlKXtlLkNvbW1hbmRzPVwiaG9tZS1jb21tYW5kc1wifShkfHwoZD17fSkpO3ZhciB1LGw9big4MDYpLHA9KG4oMjk4KSxuKDc1OCkpO24oMTE0KSxuKDEwOSksbig0MjcpOyFmdW5jdGlvbihlKXtlW2UuSW5pdGlhbD0wXT1cIkluaXRpYWxcIixlW2UuT3Blbj0xXT1cIk9wZW5cIixlW2UuQ2xvc2U9Ml09XCJDbG9zZVwifSh1fHwodT17fSkpO3ZhciBmPW4oMzE2KTtjb25zdCBnPVwiYWxsXCIsdz1cIjBcIixoPVwiNVwiLHY9XCI2XCIseT0oKT0+e307ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlP2Ake2V9LSR7dH1gOnR9ZnVuY3Rpb24gUyhlKXtyZXR1cm5gX19zZWFyY2gtJHtlfS10b3BpY19fYH1jb25zdCBQPW5ldyBNYXA7ZnVuY3Rpb24gVyhlLHQpe1AuaGFzKGUpfHxQLnNldChlLG5ldyBTZXQpLFAuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBrKGUsdCl7Y29uc3Qgbj1QLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBDPW5ldyBNYXA7ZnVuY3Rpb24gSShlLHQpe0MuaGFzKGUpfHxDLnNldChlLG5ldyBTZXQpLEMuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBUKGUsdCl7Y29uc3Qgbj1DLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBiPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gQShlLHQpe2IuaGFzKGUpfHxiLnNldChlLG5ldyBNYXApLGIuZ2V0KGUpLnNldCh0LmlkLHQpO2NvbnN0IG49UC5nZXQoZSk7aWYoIW4pcmV0dXJuO2NvbnN0IG89Wy4uLm5dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwobyl9YXN5bmMgZnVuY3Rpb24gRihlLHQpe2NvbnN0IG49Yi5nZXQoZSk7aWYoIW4pcmV0dXJuO24uZGVsZXRlKHQpO2NvbnN0IG89Qy5nZXQoZSk7aWYoIW8pcmV0dXJuO2NvbnN0IHI9Wy4uLm9dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwocil9ZnVuY3Rpb24gUihlKXtjb25zdCB0PWIuZ2V0KGUpO3JldHVybiB0P1suLi50LnZhbHVlcygpXTpbXX1mdW5jdGlvbiBEKGUpe2NvbnN0IHQ9Yi5nZXQoZSk7dCYmdC5jbGVhcigpfWZ1bmN0aW9uIEIoZSx0KXtjb25zdCBuPWIuZ2V0KGUpO3JldHVybiBuP24uZ2V0KHQpOm51bGx9ZnVuY3Rpb24gTChlLHQsbil7cmV0dXJuey4uLmUsYWN0aW9uOm58fHsuLi5lLmFjdGlvbnNbMF0sdHJpZ2dlcjpmLnB4LlVzZXJBY3Rpb259LGRpc3BhdGNoZXJJZGVudGl0eTp0fX1mdW5jdGlvbiB4KGUsdCxuPVwiYXNjZW5kaW5nXCIpe2NvbnN0IG89ZXx8W107aWYoIXQ/Lmxlbmd0aClyZXR1cm4gbztjb25zdCByPVtdLGk9bmV3IE1hcDt0LmZvckVhY2goKGU9PntpZihlLmtleSlyZXR1cm4gaS5zZXQoZS5rZXksZSk7ci5wdXNoKGUpfSkpO2xldCBhPW8ubWFwKChlPT57Y29uc3R7a2V5OnR9PWU7aWYodCYmaS5oYXModCkpe2NvbnN0IGU9aS5nZXQodCk7cmV0dXJuIGkuZGVsZXRlKHQpLGV9cmV0dXJuIGV9KSk7cmV0dXJuIGEucHVzaCguLi5pLnZhbHVlcygpLC4uLnIpLGE9XCJhc2NlbmRpbmdcIj09PW4/YS5zb3J0KCgoZSx0KT0+KGU/LnNjb3JlPz8xLzApLSh0Py5zY29yZT8/MS8wKSkpOmEuc29ydCgoKGUsdCk9Pih0Py5zY29yZT8/MS8wKS0oZT8uc2NvcmU/PzEvMCkpKSxhfWZ1bmN0aW9uIE8oZSl7Y29uc3QgdD17fTtsZXQgbj1bXTtsZXQgbz1bXTtsZXQgcj11LkluaXRpYWw7dC5nZXRTdGF0dXM9KCk9PnIsdC5nZXRSZXN1bHRCdWZmZXI9KCk9Pm4sdC5zZXRSZXN1bHRCdWZmZXI9ZT0+e249ZSxuPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5nZXRSZXZva2VkQnVmZmVyPSgpPT5vLHQuc2V0UmV2b2tlZEJ1ZmZlcj1lPT57bz1lLG8/Lmxlbmd0aCYmdC5vbkNoYW5nZSgpfSx0Lm9uQ2hhbmdlPXk7Y29uc3QgaT17fTtyZXR1cm4gdC5yZXM9aSxpLmNsb3NlPSgpPT57ciE9PXUuQ2xvc2UmJihyPXUuQ2xvc2UsdC5vbkNoYW5nZSgpKX0saS5vcGVuPSgpPT57ciE9PXUuT3BlbiYmKHI9dS5PcGVuLHQub25DaGFuZ2UoKSl9LGkucmVzcG9uZD1uPT57Y29uc3Qgbz14KHQuZ2V0UmVzdWx0QnVmZmVyKCksbixlKTt0LnNldFJlc3VsdEJ1ZmZlcihvKX0saS5yZXZva2U9KC4uLmUpPT57Y29uc3Qgbj1uZXcgU2V0KGUpLG89dC5nZXRSZXN1bHRCdWZmZXIoKS5maWx0ZXIoKCh7a2V5OmV9KT0+e2NvbnN0IHQ9bi5oYXMoZSk7cmV0dXJuIHQmJm4uZGVsZXRlKGUpLCF0fSkpO3Quc2V0UmVzdWx0QnVmZmVyKG8pLG4uc2l6ZSYmKHQuZ2V0UmV2b2tlZEJ1ZmZlcigpLmZvckVhY2goKGU9Pm4uYWRkKGUpKSksdC5zZXRSZXZva2VkQnVmZmVyKFsuLi5uXSkpfSx0fWZ1bmN0aW9uIE0oZSx0LG4pe2NvbnN0IG89bmV3IFNldDtsZXQgcj0hMTtyZXR1cm57Y2xvc2U6KCk9PntyPSEwO2Zvcihjb25zdCBlIG9mIG8pZSgpfSxyZXE6e2lkOnQsdG9waWM6ZSwuLi5uLGNvbnRleHQ6bj8uY29udGV4dHx8e30sb25DbG9zZTplPT57by5hZGQoZSksciYmZSgpfSxyZW1vdmVMaXN0ZW5lcjplPT57by5kZWxldGUoZSl9fX19ZnVuY3Rpb24gRSgpe3JldHVybntuYW1lOmZpbi5tZS5uYW1lLHV1aWQ6ZmluLm1lLnV1aWR9fWZ1bmN0aW9uIFYoKXtsZXQgZTt0cnl7ZT1maW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5pZGVudGl0eS51dWlkfWNhdGNoKGUpe31yZXR1cm4gZX1jb25zdCBHPVwiZGVyZWdpc3RlcmVkIG9yIGRvZXMgbm90IGV4aXN0XCIscT1uZXcgRXJyb3IoYHByb3ZpZGVyICR7R31gKSxfPW5ldyBFcnJvcihcInByb3ZpZGVyIHdpdGggbmFtZSBhbHJlYWR5IGV4aXN0c1wiKSxIPW5ldyBFcnJvcihcImJhZCBwYXlsb2FkXCIpLCQ9bmV3IEVycm9yKFwic3Vic2NyaXB0aW9uIHJlamVjdGVkXCIpLFU9bmV3IEVycm9yKGBjaGFubmVsICR7R31gKSxOPW5ldyBNYXA7ZnVuY3Rpb24gaihlKXtjb25zdCB0PVgoZSk7aWYodClyZXR1cm4gdDt0aHJvdyBVfWZ1bmN0aW9uIFgoZSl7Y29uc3QgdD1OLmdldChlKTtpZih0KXJldHVybiB0fWZ1bmN0aW9uIEsoZSx0KXtOLnNldChlLHQpfWZ1bmN0aW9uIHooZSl7Y29uc29sZS5lcnJvcihcIk9wZW5GaW4gU2VhcmNoIEFQSTogXCIsZSl9Y29uc3QgSj1uZXcgTWFwO2Z1bmN0aW9uIFEoZSl7Si5oYXMoZSl8fEouc2V0KGUsbmV3IE1hcCk7Y29uc3QgdD1KLmdldChlKTtyZXR1cm57Z2V0UmVxdWVzdHNGb3JJZGVudGl0eTplPT57Y29uc3Qgbj1mdW5jdGlvbihlKXtyZXR1cm5gJHtlLnV1aWR9OiR7ZS5uYW1lfWB9KGUpO3JldHVybiB0LmhhcyhuKXx8dC5zZXQobixuZXcgTWFwKSx0LmdldChuKX19fWFzeW5jIGZ1bmN0aW9uIFooZSx0KXtyZXR1cm4oYXdhaXQgaihlKSkuZGlzcGF0Y2godyx0KX1mdW5jdGlvbiBZKHtuYW1lc3BhY2VkVG9waWM6ZSx0b3BpYzp0fSl7Y29uc3Qgbj1CLmJpbmQobnVsbCxlKSxvPVEoZSkscj1aLmJpbmQobnVsbCxlKTtyZXR1cm4gYXN5bmMoZSxpKT0+e2lmKCFlfHwhZS5pZHx8IWUucHJvdmlkZXJJZCl7Y29uc3QgZT1IO3JldHVybiB6KGUpLHtlcnJvcjplLm1lc3NhZ2V9fWNvbnN0e2lkOmEscHJvdmlkZXJJZDpzfT1lLGM9bihzKTtpZighYyl7Y29uc3QgZT1xO3JldHVybiB6KGUpLHtlcnJvcjplLm1lc3NhZ2V9fWNvbnN0IGQ9by5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KGkpO2xldCB1PWQuZ2V0KGUuaWQpO3V8fCh1PU0odCxhLGUpLGQuc2V0KGUuaWQsdSkpO2NvbnN0IGw9TygpLHA9KCk9Pntjb25zdCBlPWwuZ2V0UmVzdWx0QnVmZmVyKCk7bC5zZXRSZXN1bHRCdWZmZXIoW10pO2NvbnN0IHQ9bC5nZXRSZXZva2VkQnVmZmVyKCk7bC5zZXRSZXZva2VkQnVmZmVyKFtdKTtjb25zdCBuPWwuZ2V0U3RhdHVzKCk7cih7aWQ6YSxwcm92aWRlcklkOnMscmVzdWx0czplLHJldm9rZWQ6dCxzdGF0dXM6bn0pfTtsZXQgZj0hMCxnPSExO2wub25DaGFuZ2U9KCk9PntpZihmKXJldHVybiBmPSExLHZvaWQgcCgpO2d8fChnPSEwLHNldFRpbWVvdXQoKCgpPT57Zz0hMSxwKCl9KSwxMDApKX07dHJ5e2NvbnN0e3Jlc3VsdHM6ZSxjb250ZXh0OnR9PWF3YWl0IGMub25Vc2VySW5wdXQodS5yZXEsbC5yZXMpLG49bC5nZXRTdGF0dXMoKTtyZXR1cm57aWQ6YSxwcm92aWRlcklkOnMsc3RhdHVzOm4scmVzdWx0czplLGNvbnRleHQ6dH19Y2F0Y2goZSl7cmV0dXJuIHooZSkse2lkOmEscHJvdmlkZXJJZDpzLGVycm9yOmU/Lm1lc3NhZ2V9fX19YXN5bmMgZnVuY3Rpb24gZWUoZSx0LG4pe2NvbnN0IG89bnx8YXdhaXQgaihlKSxyPUUoKSxpPXsuLi50LGlkZW50aXR5OnIsb25SZXN1bHREaXNwYXRjaDp2b2lkIDB9LGE9YXdhaXQgby5kaXNwYXRjaChcIjJcIixpKTtyZXR1cm4gYXdhaXQgQShlLHtpZGVudGl0eTpyLC4uLnR9KSxhfWFzeW5jIGZ1bmN0aW9uIHRlKGUsdCl7Y29uc3Qgbj1hd2FpdCBqKGUpO3JldHVybiBhd2FpdCBuLmRpc3BhdGNoKFwiM1wiLHQpLEYoZSx0KX1hc3luYyBmdW5jdGlvbiBuZShlLHQsbixvKXtjb25zdCByPUwobixFKCksbyksaT1CKGUsdCk7aWYoaSl7Y29uc3R7b25SZXN1bHREaXNwYXRjaDplfT1pO2lmKCFlKXJldHVybjtyZXR1cm4gZShyKX1jb25zdCBhPXtwcm92aWRlcklkOnQscmVzdWx0OnJ9O3JldHVybihhd2FpdCBqKGUpKS5kaXNwYXRjaChoLGEpfWFzeW5jIGZ1bmN0aW9uIG9lKGUsdCl7Y29uc3Qgbj17Li4udCxjb250ZXh0OnQ/LmNvbnRleHR8fHt9fSxvPXt9LHI9YXN5bmMgZnVuY3Rpb24qKGUsdCx7c2V0U3RhdGU6bn0pe2NvbnN0IG89YXdhaXQgaihlKTtmb3IoOzspe2NvbnN0IGU9YXdhaXQgby5kaXNwYXRjaChcIjFcIix0KSxyPWUuZXJyb3I7aWYocil0aHJvdyBuZXcgRXJyb3Iocik7Y29uc3QgaT1lO2lmKHQuaWQ9aS5pZCxuKGkuc3RhdGUpLGkuZG9uZSlyZXR1cm4gaS52YWx1ZTt5aWVsZCBpLnZhbHVlfX0oZSxuLHtzZXRTdGF0ZTplPT57by5zdGF0ZT1lfX0pO2xldCBpPWF3YWl0IHIubmV4dCgpO3JldHVybiBvLmlkPW4uaWR8fFwiXCIsby5jbG9zZT0oKT0+eyFhc3luYyBmdW5jdGlvbihlLHQpeyhhd2FpdCBqKGUpKS5kaXNwYXRjaCh2LHtpZDp0fSl9KGUsby5pZCl9LG8ubmV4dD0oKT0+e2lmKGkpe2NvbnN0IGU9aTtyZXR1cm4gaT12b2lkIDAsZX1yZXR1cm4gci5uZXh0KCl9LG99YXN5bmMgZnVuY3Rpb24gcmUoZSl7cmV0dXJuKGF3YWl0IGooZSkpLmRpc3BhdGNoKFwiNFwiLG51bGwpfWFzeW5jIGZ1bmN0aW9uIGllKGUpe2NvbnN0IHQ9YXdhaXQgaihlKTt2YXIgbjtuPWUsTi5kZWxldGUobiksRChlKSxhd2FpdCB0LmRpc2Nvbm5lY3QoKX1mdW5jdGlvbiBhZShlKXtjb25zdHtuYW1lc3BhY2VkVG9waWM6dH09ZSxuPVEodCk7cmV0dXJuIGFzeW5jIG89PntpZighWCh0KSlyZXR1cm47Y29uc3Qgcj1uLmdldFJlcXVlc3RzRm9ySWRlbnRpdHkobyk7Zm9yKGNvbnN0e3JlcTplLGNsb3NlOnR9b2Ygci52YWx1ZXMoKSl0KCksci5kZWxldGUoZS5pZCk7Syh0LChhc3luYyBlPT57Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1hd2FpdCBzZShlKTtmb3IoY29uc3QgZSBvZiBSKHQpKWF3YWl0IGVlKHQsZSxuKTtyZXR1cm4gbn0pKGUpKX19YXN5bmMgZnVuY3Rpb24gc2UoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1TKHQpLG89YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7Zm9yKGxldCB0PTA7dDw1MDt0KyspdHJ5e3JldHVybiBhd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7d2FpdDohMX0pfWNhdGNoKGUpe2lmKDQ5PT09dCl0aHJvdyBlO2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsMWUzKSkpfX0obik7cmV0dXJuIG8ucmVnaXN0ZXIodyxZKGUpKSxvLnJlZ2lzdGVyKHYsZnVuY3Rpb24oZSl7Y29uc3QgdD1RKGUpO3JldHVybihlLG4pPT57Y29uc3Qgbz10LmdldFJlcXVlc3RzRm9ySWRlbnRpdHkobikscj1vLmdldChlLmlkKTtyJiYoci5jbG9zZSgpLG8uZGVsZXRlKGUuaWQpKX19KHQpKSxvLnJlZ2lzdGVyKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybiB2b2lkIHooSCk7Y29uc3Qgbz1CKGUsdC5wcm92aWRlcklkKTtpZighbylyZXR1cm4gdm9pZCB6KHEpO2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6cn09bztyZXR1cm4gcj8odC5yZXN1bHQuZGlzcGF0Y2hlcklkZW50aXR5PW4scih0LnJlc3VsdCkpOnZvaWQgMH19KHQpKSxvLm9uRGlzY29ubmVjdGlvbihhZShlKSksb31hc3luYyBmdW5jdGlvbiBjZShlKXtjb25zdCB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZS50b3BpYyxuPVwic3RyaW5nXCI9PXR5cGVvZiBlP3ZvaWQgMDplLnV1aWQsbz10fHxnLHI9bnx8VigpfHxcIlwiLGk9bShyLG8pLGE9e3RvcGljOm8sbmFtZXNwYWNlOnIsbmFtZXNwYWNlZFRvcGljOml9O2xldCBzPVgoaSk7cmV0dXJuIHN8fChzPXNlKGEpLEsoaSxzKSxhd2FpdCBzKSx7Z2V0QWxsUHJvdmlkZXJzOnJlLmJpbmQobnVsbCxpKSxyZWdpc3RlcjplZS5iaW5kKG51bGwsaSksc2VhcmNoOm9lLmJpbmQobnVsbCxpKSxkZXJlZ2lzdGVyOnRlLmJpbmQobnVsbCxpKSxkaXNwYXRjaDpuZS5iaW5kKG51bGwsaSksZGlzY29ubmVjdDppZS5iaW5kKG51bGwsaSl9fWNvbnN0IGRlPW5ldyBNYXA7ZnVuY3Rpb24gdWUoZSl7Y29uc3QgdD1sZShlKTtpZih0KXJldHVybiB0O3Rocm93IFV9ZnVuY3Rpb24gbGUoZSl7Y29uc3QgdD1kZS5nZXQoZSk7aWYodClyZXR1cm4gdH1jb25zdCBwZT1uZXcgTWFwO2Z1bmN0aW9uIGZlKGUsdCl7cGUuaGFzKGUpfHxwZS5zZXQoZSxuZXcgU2V0KSxwZS5nZXQoZSkuYWRkKHQpfWZ1bmN0aW9uIGdlKGUsdCl7Y29uc3Qgbj1wZS5nZXQoZSk7biYmbi5kZWxldGUodCl9YXN5bmMgZnVuY3Rpb24gd2UoZSl7cmV0dXJuWy4uLlIoZSldLm1hcCgoZT0+KHsuLi5lLG9uVXNlcklucHV0OnZvaWQgMCxvblJlc3VsdERpc3BhdGNoOnZvaWQgMH0pKSl9YXN5bmMgZnVuY3Rpb24gaGUoZSx0KXtpZihCKGUsdC5pZCkpdGhyb3cgbmV3IEVycm9yKFwicHJvdmlkZXIgd2l0aCBuYW1lIGFscmVhZHkgZXhpc3RzXCIpO2NvbnN0IG49RSgpO3JldHVybiBhd2FpdCBBKGUse2lkZW50aXR5Om4sLi4udH0pLHt3b3Jrc3BhY2VWZXJzaW9uOmkudTB8fFwiXCIsY2xpZW50QVBJVmVyc2lvbjp0LmNsaWVudEFQSVZlcnNpb258fFwiXCJ9fWFzeW5jIGZ1bmN0aW9uIHZlKGUsdCl7YXdhaXQgRihlLHQpfWFzeW5jIGZ1bmN0aW9uIHllKGUsdCxuLG8pe2NvbnN0IHI9QihlLHQpO2lmKCFyKXRocm93IHE7Y29uc3R7b25SZXN1bHREaXNwYXRjaDppfT1yO2lmKCFpKXJldHVybjtyZXR1cm4gaShMKG4sRSgpLG8pKX1hc3luYyBmdW5jdGlvbiptZShlLHQsbil7Y29uc3Qgbz1mdW5jdGlvbihlLHQpe2NvbnN0IG49W10sbz1bXSxyPVtdLGk9W107Zm9yKGNvbnN0IGEgb2YgZSl7Y29uc3QgZT1PKGEuc2NvcmVPcmRlcikscz17cmVzdWx0czpbXSxwcm92aWRlcjp7aWQ6YS5pZCxpZGVudGl0eTphLmlkZW50aXR5LHRpdGxlOmEudGl0bGUsc2NvcmVPcmRlcjphLnNjb3JlT3JkZXIsaWNvbjphLmljb24sZGlzcGF0Y2hGb2N1c0V2ZW50czphLmRpc3BhdGNoRm9jdXNFdmVudHN9fTtuLnB1c2gocyksby5wdXNoKGUpO2NvbnN0IGM9KGFzeW5jKCk9Pnt0cnl7Y29uc3R7cmVzdWx0czpuLGNvbnRleHQ6b309YXdhaXQgYS5vblVzZXJJbnB1dCh0LGUucmVzKTtzLnJlc3VsdHM9eChzLnJlc3VsdHN8fFtdLG4pLHMuY29udGV4dD17Li4ucy5jb250ZXh0LC4uLm99fWNhdGNoKGUpe3MuZXJyb3I9ZX19KSgpO2MuZmluYWxseSgoKCk9PntjLmRvbmU9ITB9KSksaS5wdXNoKGMpLHIucHVzaChyLmxlbmd0aCl9cmV0dXJue3Byb3ZpZGVyUmVzcG9uc2VzOm4sbGlzdGVuZXJSZXNwb25zZXM6byxvcGVuTGlzdGVuZXJSZXNwb25zZXM6cixpbml0aWFsUmVzcG9uc2VQcm9taXNlczppfX0odC50YXJnZXRzP3QudGFyZ2V0cy5tYXAoKHQ9PkIoZSx0KSkpLmZpbHRlcigoZT0+ISFlKSk6Wy4uLlIoZSkuZmlsdGVyKChlPT4hZS5oaWRkZW4pKV0sdCkse3Byb3ZpZGVyUmVzcG9uc2VzOnIsbGlzdGVuZXJSZXNwb25zZXM6aX09bztsZXR7b3Blbkxpc3RlbmVyUmVzcG9uc2VzOmEsaW5pdGlhbFJlc3BvbnNlUHJvbWlzZXM6c309byxjPWYuRGUuRmV0Y2hpbmc7Y29uc3QgZD1lPT57Yz1lLG4uc2V0U3RhdGUoYyl9O2xldCBsLHA9ITE7dC5vbkNsb3NlKCgoKT0+e3A9ITAsbCYmbCgpfSkpO2Rve2xldCBlPSExO2lmKHMubGVuZ3RoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIHMpbi5kb25lP2U9ITA6dC5wdXNoKG4pO3M9dCxzLmxlbmd0aHx8KGQoZi5EZS5GZXRjaGVkKSxlPSEwKX1sZXQgdCxuPSExO2NvbnN0IG89KCk9PntuPSEwLHQmJnQoKX0sZz1bXTtmb3IoY29uc3QgdCBvZiBhKXtjb25zdCBuPWlbdF0sYT1yW3RdLHM9bi5nZXRTdGF0dXMoKTsocz09PXUuT3Blbnx8Yz09PWYuRGUuRmV0Y2hpbmcmJnM9PT11LkluaXRpYWwpJiYoZy5wdXNoKHQpLG4ub25DaGFuZ2U9byk7Y29uc3QgZD1uLmdldFJlc3VsdEJ1ZmZlcigpO2QubGVuZ3RoJiYobi5zZXRSZXN1bHRCdWZmZXIoW10pLGEucmVzdWx0cz14KGEucmVzdWx0c3x8W10sZCksZT0hMCk7Y29uc3QgbD1uLmdldFJldm9rZWRCdWZmZXIoKTtpZihsLmxlbmd0aCl7bi5zZXRSZXZva2VkQnVmZmVyKFtdKTtjb25zdCB0PW5ldyBTZXQobCk7YS5yZXN1bHRzPShhLnJlc3VsdHN8fFtdKS5maWx0ZXIoKCh7a2V5OmV9KT0+IXQuaGFzKGUpKSksZT0hMH19aWYoYT1nLGUmJih5aWVsZCByKSxwKWJyZWFrO258fChhLmxlbmd0aHx8cy5sZW5ndGgpJiZhd2FpdCBQcm9taXNlLnJhY2UoWy4uLnMsbmV3IFByb21pc2UoKGU9Pnt0PWV9KSksbmV3IFByb21pc2UoKGU9PntsPWV9KSldKX13aGlsZShhLmxlbmd0aHx8cy5sZW5ndGgpO3JldHVybiBkKGYuRGUuQ29tcGxldGUpLHJ9bGV0IFNlPTA7YXN5bmMgZnVuY3Rpb24gUGUoe25hbWVzcGFjZWRUb3BpYzplLHRvcGljOnR9LG4pe1NlKz0xO2NvbnN0IG89TSh0LFNlLnRvU3RyaW5nKCksbikscj1tZShlLG8ucmVxLHtzZXRTdGF0ZTplPT57ci5zdGF0ZT1lfX0pO3JldHVybiByLmlkPVNlLnRvU3RyaW5nKCksci5jbG9zZT1vLmNsb3NlLHIuc3RhdGU9Zi5EZS5GZXRjaGluZyxyfWNvbnN0IFdlPW5ldyBNYXA7ZnVuY3Rpb24ga2UoZSx0KXtyZXR1cm5gJHtlfToke3R9YH1mdW5jdGlvbiBDZShlKXtyZXR1cm4gYXN5bmMgdD0+e2lmKCF0KXJldHVybiB6KEgpLHtlcnJvcjpILm1lc3NhZ2V9O2xldCBuO2lmKHQuaWQpbj1rZShlLm5hbWVzcGFjZWRUb3BpYyx0LmlkKTtlbHNle2NvbnN0IG89YXdhaXQgUGUoZSx0KTtuPWtlKGUubmFtZXNwYWNlZFRvcGljLG8uaWQpLHQuaWQ9by5pZCxXZS5zZXQobix7Z2VuZXJhdG9yOm99KX1jb25zdCBvPVdlLmdldChuKTtjbGVhclRpbWVvdXQoby50aW1lb3V0KTtjb25zdCByPWF3YWl0IG8uZ2VuZXJhdG9yLm5leHQoKTtyZXR1cm4gby50aW1lb3V0PWZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dCgoKCk9PntXZS5kZWxldGUoZSl9KSwxZTQpfShuKSx7Li4ucixpZDp0LmlkLHN0YXRlOm8uZ2VuZXJhdG9yLnN0YXRlfX19ZnVuY3Rpb24gSWUoZSx0LG4pe3JldHVybiB1ZShlKS5kaXNwYXRjaCh0LHYse2lkOm59KX1mdW5jdGlvbiBUZShlKXtyZXR1cm4gdD0+ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWtlKGUsdCksbz1XZS5nZXQobik7byYmby5nZW5lcmF0b3IuY2xvc2UoKX0oZSx0LmlkKX1hc3luYyBmdW5jdGlvbiBiZShlLHQse2lkOm4scXVlcnk6byxjb250ZXh0OnIsdGFyZ2V0czppPVtdfSl7Y29uc3QgYT11ZShlKSxzPXtpZDpuLHF1ZXJ5Om8sY29udGV4dDpyLHRhcmdldHM6aSxwcm92aWRlcklkOnQuaWR9LGM9YXdhaXQgYS5kaXNwYXRjaCh0LmlkZW50aXR5LHcscyksZD1jLmVycm9yO2lmKGQpdGhyb3cgbmV3IEVycm9yKGQpO3JldHVybiBjfWNvbnN0IEFlPW5ldyBNYXA7ZnVuY3Rpb24gRmUoZSx0LG4pe3JldHVybmAke2V9OiR7dC5uYW1lfToke3QudXVpZH06JHtufWB9Y29uc3QgUmU9bmV3IE1hcDtmdW5jdGlvbiBEZShlLHQsbil7cmV0dXJuYCR7ZX06JHt0fToke259YH1mdW5jdGlvbiBCZShlLHQpe2NvbnN0IG49RmUuYmluZChudWxsLGUsdC5pZGVudGl0eSksbz1JZS5iaW5kKG51bGwsZSx0LmlkZW50aXR5KSxyPWJlLmJpbmQobnVsbCxlLHQpO3JldHVybiBhc3luYyhpLGEpPT57Y29uc3Qgcz1uKGkuaWQpO2lmKCFBZS5oYXMocykpe2NvbnN0IGU9KCk9PntvKGkuaWQpLEFlLmRlbGV0ZShzKX07QWUuc2V0KHMsZSksaS5vbkNsb3NlKGUpfWNvbnN0IGM9RGUoZSx0LmlkLGkuaWQpLGQ9KCk9PntSZS5kZWxldGUoYyksYS5jbG9zZSgpfTtpLm9uQ2xvc2UoZCksUmUuc2V0KGMsKGU9PntlLnJlc3VsdHM/Lmxlbmd0aCYmYS5yZXNwb25kKGUucmVzdWx0cyksZS5yZXZva2VkPy5sZW5ndGgmJmEucmV2b2tlKC4uLmUucmV2b2tlZCksZS5zdGF0dXM9PT11Lk9wZW4mJmEub3BlbigpLGUuc3RhdHVzPT09dS5DbG9zZSYmZCgpfSkpO2NvbnN0IGw9YXdhaXQgcihpKTtyZXR1cm4gbC5zdGF0dXM9PT11Lk9wZW4mJmEub3BlbigpLGwuc3RhdHVzIT09dS5DbG9zZSYmbC5zdGF0dXMhPT11LkluaXRpYWx8fGQoKSxsfX1mdW5jdGlvbiBMZShlLHQpe3JldHVybiBhc3luYyBuPT57Y29uc3Qgbz11ZShlKSxyPXtwcm92aWRlcklkOnQuaWQscmVzdWx0Om59O3JldHVybiBvLmRpc3BhdGNoKHQuaWRlbnRpdHksaCxyKX19Y29uc3QgeGU9bmV3IE1hcDtmdW5jdGlvbiBPZShlLHQpe3JldHVybmAke2V9LSR7dC5uYW1lfS0ke3QudXVpZH1gfWZ1bmN0aW9uIE1lKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LmlkKXJldHVybiB6KG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeSh0KSkpLHZvaWQgeihIKTtpZihCKGUsdC5pZCkpdGhyb3cgXztyZXR1cm4gdC5pZGVudGl0eT1uLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1PZShlLHQuaWRlbnRpdHkpO3hlLmhhcyhuKXx8eGUuc2V0KG4sW10pLHhlLmdldChuKS5wdXNoKHQuaWQpLGF3YWl0IEEoZSx7Li4udCxvblVzZXJJbnB1dDpCZShlLHQpLG9uUmVzdWx0RGlzcGF0Y2g6TGUoZSx0KX0pfShlLHQpLHt3b3Jrc3BhY2VWZXJzaW9uOmkudTB8fFwiXCIsY2xpZW50QVBJVmVyc2lvbjp0LmNsaWVudEFQSVZlcnNpb258fFwiXCJ9fX1mdW5jdGlvbiBFZShlKXtyZXR1cm4gdD0+e3Q/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPUIoZSx0KTtpZighbilyZXR1cm47Y29uc3Qgbz1PZShlLG4uaWRlbnRpdHkpLHI9eGUuZ2V0KG8pO2lmKHIpe2NvbnN0IG49ci5maW5kSW5kZXgoKGU9PmU9PT10KSk7LTEhPT1uJiYoci5zcGxpY2UobiwxKSxGKGUsdCkpfX0oZSx0KTp6KEgpfX1jb25zdCBWZT1uZXcgTWFwO2Z1bmN0aW9uIEdlKGUsdCl7VmUuaGFzKGUpfHxWZS5zZXQoZSxuZXcgU2V0KSxWZS5nZXQoZSkuYWRkKHQpfWZ1bmN0aW9uIHFlKGUsdCl7Y29uc3Qgbj1WZS5nZXQoZSk7biYmbi5kZWxldGUodCl9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuIGFzeW5jIHQ9PnshZnVuY3Rpb24oZSx0KXtjb25zdCBuPU9lKGUsdCksbz14ZS5nZXQobik7aWYobyl7Zm9yKGNvbnN0IHQgb2YgbylGKGUsdCk7eGUuZGVsZXRlKG4pfX0oZSx0KTtjb25zdCBuPVZlLmdldChlKTtuJiZuLmZvckVhY2goKGU9PmUodCkpKX19YXN5bmMgZnVuY3Rpb24gSGUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1TKGUubmFtZXNwYWNlZFRvcGljKSxvPWF3YWl0KHI9bixmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShyKSk7dmFyIHI7cmV0dXJuIG8ub25Db25uZWN0aW9uKGZ1bmN0aW9uKHtuYW1lc3BhY2VkVG9waWM6ZX0pe3JldHVybiBhc3luYyB0PT57Y29uc3Qgbj1wZS5nZXQoZSk7aWYobilmb3IoY29uc3QgZSBvZiBuKWlmKCFhd2FpdCBlKHQpKXRocm93ICR9fShlKSksby5vbkRpc2Nvbm5lY3Rpb24oX2UodCkpLG8ucmVnaXN0ZXIodixUZSh0KSksby5yZWdpc3Rlcih3LGZ1bmN0aW9uKGUpe3JldHVybiB0PT57Y29uc3Qgbj1EZShlLHQucHJvdmlkZXJJZCx0LmlkKSxvPVJlLmdldChuKTtvJiZvKHQpfX0odCkpLG8ucmVnaXN0ZXIoXCIyXCIsTWUodCkpLG8ucmVnaXN0ZXIoXCIzXCIsRWUodCkpLG8ucmVnaXN0ZXIoXCI0XCIsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKCk9PndlKGUpfSh0KSksby5yZWdpc3RlcihcIjFcIixDZShlKSksby5yZWdpc3RlcihoLGZ1bmN0aW9uKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LnByb3ZpZGVySWR8fCF0LnJlc3VsdClyZXR1cm4gdm9pZCB6KEgpO2NvbnN0IG89QihlLHQucHJvdmlkZXJJZCk7aWYoIW8pdGhyb3cgcTtjb25zdHtvblJlc3VsdERpc3BhdGNoOnJ9PW87cmV0dXJuIHI/KHQucmVzdWx0LmRpc3BhdGNoZXJJZGVudGl0eT1uLHIodC5yZXN1bHQpKTp2b2lkIDB9fSh0KSksb31hc3luYyBmdW5jdGlvbiAkZShlKXtjb25zdCB0PXVlKGUpO3ZhciBuO249ZSxkZS5kZWxldGUobiksYXdhaXQgdC5kZXN0cm95KCksRChlKX1hc3luYyBmdW5jdGlvbiBVZShlKXtjb25zdCB0PShcInN0cmluZ1wiPT10eXBlb2YgZT9lOmU/LnRvcGljfHxcIlwiKXx8ZyxuPVYoKXx8XCJcIixvPW0obix0KSxyPXt0b3BpYzp0LG5hbWVzcGFjZTpuLG5hbWVzcGFjZWRUb3BpYzpvfTtsZXQgaT1sZShvKTtpfHwoaT1hd2FpdCBIZShyKSxmdW5jdGlvbihlLHQpe2RlLnNldChlLHQpfShvLGkpKTtjb25zdCBhPWdlLmJpbmQobnVsbCxvKSxzPXFlLmJpbmQobnVsbCxvKSxjPWsuYmluZChudWxsLG8pLGQ9VC5iaW5kKG51bGwsbyk7cmV0dXJue2dldEFsbFByb3ZpZGVyczp3ZS5iaW5kKG51bGwsbyksc2VhcmNoOlBlLmJpbmQobnVsbCxyKSxyZWdpc3RlcjpoZS5iaW5kKG51bGwsbyksZGVyZWdpc3Rlcjp2ZS5iaW5kKG51bGwsbyksb25TdWJzY3JpcHRpb246ZmUuYmluZChudWxsLG8pLG9uRGlzY29ubmVjdDpHZS5iaW5kKG51bGwsbyksb25SZWdpc3RlcjpXLmJpbmQobnVsbCxvKSxvbkRlcmVnaXN0ZXI6SS5iaW5kKG51bGwsbyksZGlzcGF0Y2g6eWUuYmluZChudWxsLG8pLGRpc2Nvbm5lY3Q6JGUuYmluZChudWxsLG8pLHJlbW92ZUxpc3RlbmVyOmU9PnthKGUpLHMoZSksYyhlKSxkKGUpfX19Y29uc3R7Y3JlYXRlOk5lfT1yLHtzdWJzY3JpYmU6amV9PW8sWGU9e2NyZWF0ZTpOZSxzdWJzY3JpYmU6amUsZGVmYXVsdFRvcGljOlwiYWxsXCJ9LEtlPSgpPT57d2luZG93LnNlYXJjaD1YZX0semU9ZT0+e2NvbnN0IHQ9KCk9PntLZSgpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl9O3JldHVybiB0fTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXtLZSgpO2NvbnN0IGU9XCJsb2FkXCIsdD16ZShlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihlLHQpO2NvbnN0IG49XCJET01Db250ZW50TG9hZGVkXCIsbz16ZShuKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihuLG8pfWNvbnN0IEplPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gUWUoKXthd2FpdCBhc3luYyBmdW5jdGlvbihlKXtKZS5zZXQoZSxhd2FpdCBqZSh7dG9waWM6ZSx1dWlkOmwucTkuV29ya3NwYWNlfSkpfShjKX1sZXQgWmU7YXN5bmMgZnVuY3Rpb24gWWUoZSl7cmV0dXJuIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7cmV0dXJuIFplfHwoWmU9UWUoKSksWmV9KCksSmUuZ2V0KGUpfWNvbnN0IGV0PWFzeW5jIGU9PntpZighZS5pY29uKXRocm93IG5ldyBFcnJvcihgJHtlLmlkfSBwcm92aWRlciBuZWVkcyB0byBoYXZlIGljb24gcHJvcGVydHkgZGVmaW5lZC5gKTthd2FpdCgwLHMuYUIpKCk7Y29uc3QgdD1hd2FpdCBZZShjKTt0cnl7ZS5jbGllbnRBUElWZXJzaW9uPWkudTA7Y29uc3Qgbj1hd2FpdCB0LnJlZ2lzdGVyKGUpO3JldHVybigwLGEuY2spKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbn0pLG4/LndvcmtzcGFjZVZlcnNpb24saS51MCx7Li4ubixzZXRTZWFyY2hRdWVyeTphc3luYyB0PT4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLlNldFNlYXJjaFF1ZXJ5LHtxdWVyeTp0LHByb3ZpZGVySUQ6ZS5pZH0pfX1jYXRjaChlKXt0aHJvdygwLGEuY2spKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZSBpbnN0YW5jZW9mIEVycm9yP2UubWVzc2FnZTpcInVua25vd25cIn0pLGV9fSx0dD1hc3luYyBlPT57YXdhaXQoMCxzLmFCKSgpO3JldHVybihhd2FpdCBZZShjKSkuZGVyZWdpc3RlcihlKX07YXN5bmMgZnVuY3Rpb24gbnQoKXtyZXR1cm4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLlNob3dIb21lLHZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gb3QoKXtyZXR1cm4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLkhpZGVIb21lLHZvaWQgMCl9fSwyOTg6KGUsdCxuKT0+e24uZCh0LHtwOigpPT5vLnB4LHc6KCk9Pm8ud3R9KTt2YXIgbz1uKDMxNil9LDQyNzooZSx0LG4pPT57dmFyIG87bi5kKHQse3Y6KCk9Pm99KSxmdW5jdGlvbihlKXtlLkFjdGlvbkJ1dHRvbj1cIkFjdGlvbkJ1dHRvblwiLGUuRHJvcGRvd25CdXR0b249XCJEcm9wZG93bkJ1dHRvblwifShvfHwobz17fSkpfSw3NTg6KGUsdCxuKT0+e3ZhciBvLHIsaTtuLmQodCx7UHQ6KCk9Pm8sZWw6KCk9PmkseVc6KCk9PnJ9KSxmdW5jdGlvbihlKXtlLlN1Z2dlc3Rpb249XCJzdWdnZXN0aW9uXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5Db250YWN0PVwiQ29udGFjdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCIsZS5MaXN0PVwiTGlzdFwiLGUuUGxhaW49XCJQbGFpblwiLGUuU2ltcGxlVGV4dD1cIlNpbXBsZVRleHRcIixlLkxvYWRpbmc9XCJMb2FkaW5nXCIsZS5FcnJvcj1cIkVycm9yXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5NdWx0aVNlbGVjdD1cIk11bHRpU2VsZWN0XCJ9KGl8fChpPXt9KSl9LDExNDooZSx0LG4pPT57dmFyIG8scjtuLmQodCx7TDooKT0+byxUOigpPT5yfSksZnVuY3Rpb24oZSl7ZS5TbmFwc2hvdD1cInNuYXBzaG90XCIsZS5NYW5pZmVzdD1cIm1hbmlmZXN0XCIsZS5WaWV3PVwidmlld1wiLGUuRXh0ZXJuYWw9XCJleHRlcm5hbFwifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuTGFuZGluZ1BhZ2U9XCJsYW5kaW5nUGFnZVwiLGUuQXBwR3JpZD1cImFwcEdyaWRcIn0ocnx8KHI9e30pKX0sMTA5OihlLHQsbik9PntuLmQodCx7R286KCk9PnIsWko6KCk9PmEsYkk6KCk9PmkscDY6KCk9Pm99KTtjb25zdCBvPXtDb250YWluZXI6XCJDb250YWluZXJcIixCdXR0b246XCJCdXR0b25cIn0scj17VGV4dDpcIlRleHRcIixJbWFnZTpcIkltYWdlXCIsTGlzdDpcIkxpc3RcIn0saT17Li4ubywuLi5yfTt2YXIgYTshZnVuY3Rpb24oZSl7ZS5QcmltYXJ5PVwicHJpbWFyeVwiLGUuU2Vjb25kYXJ5PVwic2Vjb25kYXJ5XCIsZS5UZXh0T25seT1cInRleHRPbmx5XCJ9KGF8fChhPXt9KSl9LDUyODooZSx0LG4pPT57bi5yKHQpLG4uZCh0LHtBcHBNYW5pZmVzdFR5cGU6KCk9PmEuTCxTdG9yZWZyb250VGVtcGxhdGU6KCk9PmEuVCxkZXJlZ2lzdGVyOigpPT5oLGhpZGU6KCk9PnYscmVnaXN0ZXI6KCk9Pncsc2hvdzooKT0+eX0pO3ZhciBvPW4oNTMyKSxyPW4oMTUwKSxpPW4oODIpLGE9bigxMTQpLHM9big2NzgpLGM9big0MzgpO2xldCBkLHU9ITE7YXN5bmMgZnVuY3Rpb24gbChlLHQsbil7Y29uc3Qgbz1hd2FpdCgwLHIuRG0pKCk7dHJ5e3JldHVybiBhd2FpdCBvLmRpc3BhdGNoKGUuYWN0aW9uLGUucGF5bG9hZCl9Y2F0Y2gocil7aWYoLTEhPT1yLnRvU3RyaW5nKCkuaW5kZXhPZihlLmFjdGlvbikpcmV0dXJuIHV8fGNvbnNvbGUud2FybihcIllvdSBhcmUgdXNpbmcgYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBXb3Jrc3BhY2UgY2xpZW50IGxpYnJhcnkgdGhhdCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50bHkgcnVubmluZyB3b3Jrc3BhY2UgcHJvdmlkZXIuIFBsZWFzZSB1cGdyYWRlIHRoZSBXb3Jrc3BhY2UgdG8gdmVyc2lvbiA5LjAgb3IgbGF0ZXIuXCIpLHU9ITAsYXdhaXQgby5kaXNwYXRjaCh0LmFjdGlvbix0LnBheWxvYWQpLG47dGhyb3cgcn19Y29uc3QgcD1uZXcgTWFwLGY9ZT0+e2lmKCFwLmhhcyhlKSl0aHJvdyBuZXcgRXJyb3IoYFN0b3JlZnJvbnQgUHJvdmlkZXIgd2l0aCBpZCAke2V9IGlzIG5vdCByZWdpc3RlcmVkYCk7cmV0dXJuIHAuZ2V0KGUpfSxnPWFzeW5jIGU9Pnthd2FpdCgwLGMuSGgpKGZpbi5tZS5pZGVudGl0eSk7Y29uc3QgdD1hd2FpdCgwLHIuWGwpKCk7aWYocC5oYXMoZS5pZCkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IHByb3ZpZGVyIHdpdGggaWQgJHtlLmlkfSBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtyZXR1cm4gcC5zZXQoZS5pZCxlKSwoZT0+e2UuaXNTdG9yZWZyb250QWN0aW9uc1JlZ2lzdGVyZWR8fChlLmlzU3RvcmVmcm9udEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzLChlPT5mKGUpLmdldEFwcHMoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXIsKGU9PmYoZSkuZ2V0Rm9vdGVyKCkpKSxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2UsKGU9PmYoZSkuZ2V0TGFuZGluZ1BhZ2UoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uLChlPT5mKGUpLmdldE5hdmlnYXRpb24oKSkpLGUucmVnaXN0ZXIoci5XRi5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHAsKCh7aWQ6ZSxhcHA6dH0pPT5mKGUpLmxhdW5jaEFwcCh0KSkpKX0pKHQpLGUuY2xpZW50QVBJVmVyc2lvbj1zLnUwLGwoe2FjdGlvbjpyLldGLlJlZ2lzdGVyUHJvdmlkZXIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOmkubFAuU3RvcmVmcm9udCxpbmZvOmV9fSx7YWN0aW9uOnIuV0YuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXIscGF5bG9hZDplfSx7d29ya3NwYWNlVmVyc2lvbjpcInVua25vd25cIn0pfSx3PWU9PihkPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQgZyhlKTsoMCxvLmQ5KSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOm4/LndvcmtzcGFjZVZlcnNpb259KSxuPy53b3Jrc3BhY2VWZXJzaW9uLHMudTAsdCh7Y2xpZW50QVBJVmVyc2lvbjpzLnUwLHdvcmtzcGFjZVZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbj8/XCJcIn0pfWNhdGNoKGUpeygwLG8uZDkpKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZSBpbnN0YW5jZW9mIEVycm9yP2UubWVzc2FnZTpcInVua25vd25cIn0pLG4oZSl9fSkpLGQpLGg9YXN5bmMgZT0+KGF3YWl0IGQscC5kZWxldGUoZSksYXdhaXQoMCxyLmFCKSgpLGwoe2FjdGlvbjpyLldGLkRlcmVnaXN0ZXJQcm92aWRlcixwYXlsb2FkOntwcm92aWRlclR5cGU6aS5sUC5TdG9yZWZyb250LGlkOmV9fSx7YWN0aW9uOnIuV0YuRGVyZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcixwYXlsb2FkOmV9KSksdj1hc3luYygpPT4oYXdhaXQgZCxhd2FpdCgwLHIuYUIpKCksbCh7YWN0aW9uOnIuV0YuSGlkZVByb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuSGlkZVN0b3JlZnJvbnR9KSkseT1hc3luYygpPT4oYXdhaXQgZCxhd2FpdCgwLHIuYUIpKCksbCh7YWN0aW9uOnIuV0YuU2hvd1Byb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuU2hvd1N0b3JlZnJvbnR9KSl9LDQzODooZSx0LG4pPT57dmFyIG87bi5kKHQse0hoOigpPT5pfSksZnVuY3Rpb24oZSl7ZS5MYXVuY2hBcHA9XCJsYXVuY2hBcHBcIixlLlNhdmVQYWdlPVwic2F2ZVBhZ2VcIixlLkdldFNhdmVkUGFnZT1cImdldFNhdmVkUGFnZVwiLGUuQ3JlYXRlU2F2ZWRQYWdlPVwiY3JlYXRlU2F2ZWRQYWdlXCIsZS5VcGRhdGVTYXZlZFBhZ2U9XCJ1cGRhdGVTYXZlZFBhZ2VcIixlLkRlbGV0ZVNhdmVkUGFnZT1cImRlbGV0ZVNhdmVkUGFnZVwiLGUuR2V0U2F2ZWRQYWdlcz1cImdldFNhdmVkUGFnZXNcIixlLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsPVwiY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlVwZGF0ZVNhdmVkUGFnZUludGVybmFsPVwidXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLkRlbGV0ZVNhdmVkUGFnZUludGVybmFsPVwiZGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlNoYXJlUGFnZT1cInNoYXJlUGFnZVwiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZVBhZ2VGb3JXaW5kb3dcIixlLkF0dGFjaFBhZ2VzVG9XaW5kb3c9XCJhdHRhY2hQYWdlc1RvV2luZG93XCIsZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3c9XCJkZXRhY2hQYWdlc0Zyb21XaW5kb3dcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXJQYWdlc0ZvcldpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZT1cInNldEFjdGl2ZVBhZ2VcIixlLkdldEFsbEF0dGFjaGVkUGFnZXM9XCJnZXRBbGxBdHRhY2hlZFBhZ2VzXCIsZS5HZXRBY3RpdmVQYWdlSWRGb3JXaW5kb3c9XCJnZXRBY3RpdmVQYWdlSWRGb3JXaW5kb3dcIixlLkdldFBhZ2VzRm9yV2luZG93PVwiZ2V0UGFnZXNGb3JXaW5kb3dcIixlLkdldFBhZ2VGb3JXaW5kb3c9XCJnZXRQYWdlRm9yV2luZG93XCIsZS5HZXRTYXZlZFBhZ2VNZXRhZGF0YT1cImdldFNhdmVkUGFnZU1ldGFkYXRhXCIsZS5HZXRVbmlxdWVQYWdlVGl0bGU9XCJnZXRVbmlxdWVQYWdlVGl0bGVcIixlLkdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1cImdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvd1wiLGUuR2V0VGhlbWVzPVwiZ2V0VGhlbWVzXCIsZS5HZXRTZWxlY3RlZFNjaGVtZT1cImdldFNlbGVjdGVkU2NoZW1lXCIsZS5TZXRTZWxlY3RlZFNjaGVtZT1cInNldFNlbGVjdGVkU2NoZW1lXCIsZS5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsPVwib3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsXCIsZS5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbD1cImludm9rZUN1c3RvbUFjdGlvbkludGVybmFsXCIsZS5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWw9XCJyZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWxcIixlLkdldFNhdmVkV29ya3NwYWNlPVwiZ2V0U2F2ZWRXb3Jrc3BhY2VcIixlLkNyZWF0ZVNhdmVkV29ya3NwYWNlPVwiY3JlYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLlVwZGF0ZVNhdmVkV29ya3NwYWNlPVwidXBkYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkRlbGV0ZVNhdmVkV29ya3NwYWNlPVwiZGVsZXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkdldFNhdmVkV29ya3NwYWNlcz1cImdldFNhdmVkV29ya3NwYWNlc1wiLGUuU2F2ZVdvcmtzcGFjZT1cInNhdmVXb3Jrc3BhY2VcIixlLkdldEN1cnJlbnRXb3Jrc3BhY2U9XCJnZXRDdXJyZW50V29ya3NwYWNlXCIsZS5BcHBseVdvcmtzcGFjZT1cImFwcGx5V29ya3NwYWNlXCIsZS5TZXRBY3RpdmVXb3Jrc3BhY2U9XCJzZXRBY3RpdmVXb3Jrc3BhY2VcIixlLklzQnJvd3NlckluaXRpYWxpemVkPVwiaXNCcm93c2VySW5pdGlhbGl6ZWRcIn0ob3x8KG89e30pKTtjb25zdCByPWFzeW5jIGU9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRDbGllbnQoKSxpPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHIoZSksbj1cIlRhcmdldCBpcyBub3QgYSBXb3Jrc3BhY2UgUGxhdGZvcm0uIFRhcmdldCBtdXN0IGNhbGwgV29ya3NwYWNlUGxhdGZvcm0uaW5pdFwiO2xldCBvO3RyeXtvPWF3YWl0IHQuZGlzcGF0Y2goXCJpc1dvcmtzcGFjZVBsYXRmb3JtXCIpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihuKX1pZihcImJvb2xlYW5cIj09dHlwZW9mIG8mJm8pcmV0dXJuIGNvbnNvbGUud2FybihcIllvdSBhcmUgdXNpbmcgYW4gb2xkZXIgdmVyc2lvbiBvZiB0aGUgd29ya3NwYWNlIHBsYXRmb3JtLiBQbGVhc2UgdXBkYXRlIHlvdXIgd29ya3NwYWNlIHBsYXRmb3JtLlwiKSxvO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBvJiZvLmlzV29ya3NwYWNlUGxhdGZvcm0pcmV0dXJuIG87dGhyb3cgbmV3IEVycm9yKG4pfX0sMTUwOihlLHQsbik9PntuLmQodCx7RG06KCk9PnMsV0Y6KCk9PmEsWGw6KCk9PmwsYUI6KCk9PnV9KTt2YXIgbz1uKDExNykscj1uKDY3OCksaT1uKDEyMSk7dmFyIGE7IWZ1bmN0aW9uKGUpe2UuUmVnaXN0ZXJQcm92aWRlcj1cInJlZ2lzdGVyLXByb3ZpZGVyXCIsZS5EZXJlZ2lzdGVyUHJvdmlkZXI9XCJkZXJlZ2lzdGVyLXByb3ZpZGVyXCIsZS5DcmVhdGVQcm92aWRlcldpbmRvdz1cImNyZWF0ZS1wcm92aWRlci13aW5kb3dcIixlLkdldFByb3ZpZGVycz1cImdldC1wcm92aWRlcnNcIixlLlNob3dQcm92aWRlcldpbmRvdz1cInNob3ctcHJvdmlkZXItd2luZG93XCIsZS5IaWRlUHJvdmlkZXJXaW5kb3c9XCJoaWRlLXByb3ZpZGVyLXdpbmRvd1wiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyQXBwcz1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcHNcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckxhbmRpbmdQYWdlPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbGFuZGluZy1wYWdlXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXI9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1mb290ZXJcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlck5hdmlnYXRpb249XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1uYXZpZ2F0aW9uXCIsZS5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHA9XCJsYXVuY2gtc3RvcmVmcm9udC1wcm92aWRlci1hcHBcIixlLlNob3dIb21lPVwic2hvdy1ob21lXCIsZS5IaWRlSG9tZT1cImhpZGUtaG9tZVwiLGUuQXNzaWduSG9tZVNlYXJjaENvbnRleHQ9XCJhc3NpZ24taG9tZS1zZWFyY2gtY29udGV4dFwiLGUuU2V0U2VhcmNoUXVlcnk9XCJzZXQtc2VhcmNoLXF1ZXJ5XCIsZS5PcGVuSG9tZUFuZFNldFNlYXJjaFF1ZXJ5PVwib3Blbi1ob21lLWFuZC1zZXQtc2VhcmNoLXF1ZXJ5XCIsZS5HZXRMZWdhY3lQYWdlcz1cImdldC1sZWdhY3ktcGFnZXNcIixlLkdldExlZ2FjeVdvcmtzcGFjZXM9XCJnZXQtbGVnYWN5LXdvcmtzcGFjZXNcIixlLkdldENvbXB1dGVkUGxhdGZvcm1UaGVtZT1cImdldC1jb21wdXRlZC1wbGF0Zm9ybS10aGVtZVwiLGUuU2V0U2VsZWN0ZWRTY2hlbWU9XCJzZXQtc2VsZWN0ZWQtc2NoZW1lXCIsZS5SZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcj1cInJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJkZXJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkhpZGVTdG9yZWZyb250PVwiaGlkZS1zdG9yZWZyb250XCIsZS5TaG93U3RvcmVmcm9udD1cInNob3ctc3RvcmVmcm9udFwifShhfHwoYT17fSkpO2NvbnN0IHM9KDAsby5aKShcIl9fb2Zfd29ya3NwYWNlX3Byb3RvY29sX19cIiksYz1cImlzTGF1bmNoZWRWaWFMaWJcIixkPWU9Pntjb25zdCB0PW5ldyBVUkwoZSk7cmV0dXJuIHQuc2VhcmNoUGFyYW1zLmFwcGVuZChjLFwidHJ1ZVwiKSx0LnRvU3RyaW5nKCl9LHU9YXN5bmMoKT0+e2F3YWl0KDAsaS5KVikoaS5pVyl8fCgoci5aS3x8LTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJXaW5cIikpJiZhd2FpdCBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3QoZChyLmFXKSksYXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIoZChyLkdYKSkpfSxsPWFzeW5jKCk9Pihhd2FpdCB1KCkscygpKX0sODI6KGUsdCxuKT0+e24uZCh0LHtSODooKT0+YSxYXzooKT0+aSxsUDooKT0+b30pO3ZhciBvLHI9bigxNTApOyFmdW5jdGlvbihlKXtlLlN0b3JlZnJvbnQ9XCJzdG9yZWZyb250XCIsZS5Eb2NrPVwiZG9ja1wifShvfHwobz17fSkpO2NvbnN0IGk9YXN5bmMgZT0+KGF3YWl0KDAsci5EbSkoKSkuZGlzcGF0Y2goci5XRi5TaG93UHJvdmlkZXJXaW5kb3cse3Byb3ZpZGVyVHlwZTplfSksYT1hc3luYyBlPT4oYXdhaXQoMCxyLkRtKSgpKS5kaXNwYXRjaChyLldGLkhpZGVQcm92aWRlcldpbmRvdyx7cHJvdmlkZXJUeXBlOmV9KX0sODA2OihlLHQsbik9PntuLmQodCx7cTk6KCk9Pm99KTt2YXIgbyxyLGksYT1uKDY3OCk7IWZ1bmN0aW9uKGUpe2UuV29ya3NwYWNlPVwib3BlbmZpbi1icm93c2VyXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5SdW5SZXF1ZXN0ZWQ9XCJydW4tcmVxdWVzdGVkXCIsZS5XaW5kb3dPcHRpb25zQ2hhbmdlZD1cIndpbmRvdy1vcHRpb25zLWNoYW5nZWRcIixlLldpbmRvd0Nsb3NlZD1cIndpbmRvdy1jbG9zZWRcIixlLldpbmRvd0NyZWF0ZWQ9XCJ3aW5kb3ctY3JlYXRlZFwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuRmluUHJvdG9jb2w9XCJmaW4tcHJvdG9jb2xcIn0oaXx8KGk9e30pKTthLkFCLG8uV29ya3NwYWNlfSwxMTc6KGUsdCxuKT0+e24uZCh0LHtaOigpPT5pfSk7dmFyIG89big2NzgpO2NvbnN0IHI9by5BeCYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7ZnVuY3Rpb24gaShlKXtsZXQgdDtyZXR1cm4oKT0+e2lmKCFvLnNTKXRocm93IG5ldyBFcnJvcihcImdldENoYW5uZWxDbGllbnQgY2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiB0fHwodD0oYXN5bmMoKT0+e2F3YWl0IHI7Y29uc3Qgbj17Y2xpZW50QVBJVmVyc2lvbjpvLnUwfSxpPWF3YWl0IGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHtwYXlsb2FkOm59KTtyZXR1cm4gaS5vbkRpc2Nvbm5lY3Rpb24oKGFzeW5jKCk9Pntjb25zb2xlLndhcm4oYGRpc2Nvbm5lY3RlZCBmcm9tIGNoYW5uZWwgcHJvdmlkZXIgJHtlfWApLHQ9dm9pZCAwfSkpLGl9KSgpLnRoZW4oKGU9PmUpKS5jYXRjaCgobj0+e3Rocm93IHQ9dm9pZCAwLG5ldyBFcnJvcihgZmFpbGVkIHRvIGNvbm5lY3QgdG8gY2hhbm5lbCBwcm92aWRlciAke2V9OiAke259YCl9KSkpLHR9fX0sNjc4OihlLHQsbik9Pnt2YXIgbztuLmQodCx7QUI6KCk9PnMsQXg6KCk9PmksR1g6KCk9PnUsWks6KCk9PmQsYVc6KCk9Pmwsb0M6KCk9PmMsc1M6KCk9PnIsdTA6KCk9PmZ9KSxmdW5jdGlvbihlKXtlLkxvY2FsPVwibG9jYWxcIixlLkRldj1cImRldlwiLGUuU3RhZ2luZz1cInN0YWdpbmdcIixlLlByb2Q9XCJwcm9kXCJ9KG98fChvPXt9KSk7Y29uc3Qgcj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluLGk9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwcm9jZXNzfHxwcm9jZXNzLmVudj8uSkVTVF9XT1JLRVJfSUQsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyksYT1pP3dpbmRvdy5vcmlnaW46by5Mb2NhbCxzPXImJmZpbi5tZS51dWlkLGM9ciYmZmluLm1lLm5hbWUsZD0ociYmZmluLm1lLmVudGl0eVR5cGUsXCJwcm9kXCI9PT1vLkxvY2FsKSx1PShvLkRldixvLlN0YWdpbmcsby5Qcm9kLFwiZmluczovL3N5c3RlbS1hcHBzL3dvcmtzcGFjZVwiKSxsPVwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby93b3Jrc3BhY2UvOS42LjAvYXBwLmpzb25cIixwPWU9PmUuc3RhcnRzV2l0aChcImh0dHA6Ly9cIil8fGUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpP2U6YStlLGY9KHAoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjYuMFwiKSxwKFwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby93b3Jrc3BhY2UvOS42LjBcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmcChXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZwKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiOS42LjBcIil9LDUzMjooZSx0LG4pPT57bi5kKHQse1duOigpPT5kLGNrOigpPT5zLGQ5OigpPT5jfSk7dmFyIG8scj1uKDY3OCksaT1uKDEyMSk7IWZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cIkJyb3dzZXJcIixlLkRvY2s9XCJEb2NrXCIsZS5Ib21lPVwiSG9tZVwiLGUuTm90aWZpY2F0aW9uPVwiTm90aWZpY2F0aW9uXCIsZS5TdG9yZWZyb250PVwiU3RvcmVmcm9udFwiLGUuUGxhdGZvcm09XCJQbGF0Zm9ybVwiLGUuVGhlbWluZz1cIlRoZW1pbmdcIn0ob3x8KG89e30pKTtjb25zdCBhPWFzeW5jKGUsdCk9Pntjb25zdCBuPXthcGlWZXJzaW9uOnQuYXBpVmVyc2lvbnx8ci51MCxjb21wb25lbnROYW1lOmUsY29tcG9uZW50VmVyc2lvbjp0LmNvbXBvbmVudFZlcnNpb258fHIudTAsYWxsb3dlZDp0LmFsbG93ZWQscmVqZWN0aW9uQ29kZTp0LnJlamVjdGlvbkNvZGV9O2Zpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTpcIndvcmtzcGFjZS1saWNlbnNpbmdcIixkYXRhOm59KX0scz1hc3luYyBlPT57aS5PSS51dWlkPT09aS5HaS51dWlkJiZpLk9JLm5hbWU9PT1pLkdpLm5hbWV8fGEoby5Ib21lLGUpfSxjPWFzeW5jIGU9PnthKG8uU3RvcmVmcm9udCxlKX0sZD1hc3luYyBlPT57YShvLkRvY2ssZSl9fSwxMjE6KGUsdCxuKT0+e24uZCh0LHtHaTooKT0+ZCxKVjooKT0+cCxPSTooKT0+dSxpVzooKT0+bH0pO3ZhciBvLHIsaSxhPW4oODA2KSxzPW4oNjc4KTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwib3BlbmZpbi1ob21lXCIsZS5Eb2NrPVwib3BlbmZpbi1kb2NrXCIsZS5TdG9yZWZyb250PVwib3BlbmZpbi1zdG9yZWZyb250XCIsZS5Ib21lSW50ZXJuYWw9XCJvcGVuZmluLWhvbWUtaW50ZXJuYWxcIixlLkJyb3dzZXJNZW51PVwib3BlbmZpbi1icm93c2VyLW1lbnVcIixlLkJyb3dzZXJJbmRpY2F0b3I9XCJvcGVuZmluLWJyb3dzZXItaW5kaWNhdG9yXCIsZS5Ccm93c2VyV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLXdpbmRvd1wiLGUuQ2xhc3NpY1dpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC1jbGFzc2ljLXdpbmRvd1wifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuU2hvd249XCJzaG93blwiLGUuQm91bmRzQ2hhbmdlZD1cImJvdW5kcy1jaGFuZ2VkXCIsZS5MYXlvdXRSZWFkeT1cImxheW91dC1yZWFkeVwiLGUuRW5kVXNlckJvdW5kc0NoYW5naW5nPVwiZW5kLXVzZXItYm91bmRzLWNoYW5naW5nXCIsZS5CbHVycmVkPVwiYmx1cnJlZFwiLGUuQ2xvc2VkPVwiY2xvc2VkXCIsZS5DbG9zZVJlcXVlc3RlZD1cImNsb3NlLXJlcXVlc3RlZFwiLGUuRm9jdXNlZD1cImZvY3VzZWRcIixlLlNob3dSZXF1ZXN0ZWQ9XCJzaG93LXJlcXVlc3RlZFwiLGUuVmlld0NyYXNoZWQ9XCJ2aWV3LWNyYXNoZWRcIixlLlZpZXdBdHRhY2hlZD1cInZpZXctYXR0YWNoZWRcIixlLlZpZXdEZXRhY2hlZD1cInZpZXctZGV0YWNoZWRcIixlLlZpZXdQYWdlVGl0bGVVcGRhdGVkPVwidmlldy1wYWdlLXRpdGxlLXVwZGF0ZWRcIixlLlZpZXdEZXN0cm95ZWQ9XCJ2aWV3LWRlc3Ryb3llZFwiLGUuT3B0aW9uc0NoYW5nZWQ9XCJvcHRpb25zLWNoYW5nZWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkJlZm9yZVVubG9hZD1cImJlZm9yZXVubG9hZFwifShpfHwoaT17fSkpO2Z1bmN0aW9uIGMoZSl7aWYoIXMuc1MpdGhyb3cgbmV3IEVycm9yKFwiZ2V0T0ZXaW5kb3cgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbiBPcGVuRmluIGVudi4gQXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIGZpbi5XaW5kb3cud3JhcFN5bmMoZSl9Y29uc3QgZD17bmFtZTpzLm9DLHV1aWQ6cy5BQn07Y29uc3QgdT17bmFtZTpvLkhvbWUsdXVpZDphLnE5LldvcmtzcGFjZX0sbD0oby5Eb2NrLGEucTkuV29ya3NwYWNlLG8uU3RvcmVmcm9udCxhLnE5LldvcmtzcGFjZSx7bmFtZTphLnE5LldvcmtzcGFjZSx1dWlkOmEucTkuV29ya3NwYWNlfSk7Y29uc3QgcD1lPT5jKGUpLmdldE9wdGlvbnMoKS50aGVuKCgoKT0+ITApKS5jYXRjaCgoKCk9PiExKSl9LDMxNjooZSx0LG4pPT57dmFyIG8scixpO24uZCh0LHtEZTooKT0+byxweDooKT0+cix3dDooKT0+aX0pLGZ1bmN0aW9uKGUpe2UuRmV0Y2hpbmc9XCJmZXRjaGluZ1wiLGUuRmV0Y2hlZD1cImZldGNoZWRcIixlLkNvbXBsZXRlPVwiY29tcGxldGVcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLlVzZXJBY3Rpb249XCJ1c2VyLWFjdGlvblwiLGUuRm9jdXNDaGFuZ2U9XCJmb2N1cy1jaGFuZ2VcIixlLlJlbG9hZD1cInJlbG9hZFwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuQWN0aXZlPVwiYWN0aXZlXCIsZS5EZWZhdWx0PVwiZGVmYXVsdFwifShpfHwoaT17fSkpfX0sdD17fTtmdW5jdGlvbiBuKG8pe3ZhciByPXRbb107aWYodm9pZCAwIT09cilyZXR1cm4gci5leHBvcnRzO3ZhciBpPXRbb109e2V4cG9ydHM6e319O3JldHVybiBlW29dKGksaS5leHBvcnRzLG4pLGkuZXhwb3J0c31uLmQ9KGUsdCk9Pntmb3IodmFyIG8gaW4gdCluLm8odCxvKSYmIW4ubyhlLG8pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtlbnVtZXJhYmxlOiEwLGdldDp0W29dfSl9LG4ubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCksbi5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgbz17fTsoKCk9PntuLnIobyksbi5kKG8se0FjdGlvblRyaWdnZXI6KCk9PlcucCxBcHBNYW5pZmVzdFR5cGU6KCk9PkkuTCxCdXR0b25TdHlsZTooKT0+ay5aSixDTElBY3Rpb246KCk9PkMuUHQsQ0xJRmlsdGVyT3B0aW9uVHlwZTooKT0+Qy5lbCxDTElUZW1wbGF0ZTooKT0+Qy55VyxDb250YWluZXJUZW1wbGF0ZUZyYWdtZW50TmFtZXM6KCk9PmsucDYsRG9jazooKT0+ZSxEb2NrQnV0dG9uTmFtZXM6KCk9PmQudixIb21lOigpPT52LExlZ2FjeTooKT0+dCxQcmVzZW50YXRpb25UZW1wbGF0ZUZyYWdtZW50TmFtZXM6KCk9PmsuR28sU2VhcmNoVGFnQmFja2dyb3VuZDooKT0+Vy53LFN0b3JlZnJvbnQ6KCk9PlAsU3RvcmVmcm9udFRlbXBsYXRlOigpPT5JLlQsVGVtcGxhdGVGcmFnbWVudFR5cGVzOigpPT5rLmJJfSk7dmFyIGU9e307bi5yKGUpLG4uZChlLHtEb2NrQnV0dG9uTmFtZXM6KCk9PmQudixkZXJlZ2lzdGVyOigpPT5mLG1pbmltaXplOigpPT5nLHJlZ2lzdGVyOigpPT5wLHNob3c6KCk9Pnd9KTt2YXIgdD17fTtuLnIodCksbi5kKHQse2dldFBhZ2VzOigpPT5tLGdldFdvcmtzcGFjZXM6KCk9PlN9KTt2YXIgcj1uKDY3OCksaT1uKDUzMiksYT1uKDE1MCkscz1uKDQzOCksYz1uKDgyKSxkPW4oNDI3KTtsZXQgdSxsPSExO2NvbnN0IHA9ZT0+KHU9bmV3IFByb21pc2UoKGFzeW5jKHQsbik9Pnt0cnl7Y29uc3Qgbj1hd2FpdChhc3luYyBlPT57YXdhaXQoMCxzLkhoKShmaW4ubWUuaWRlbnRpdHkpO2NvbnN0IHQ9YXdhaXQoMCxhLlhsKSgpO2lmKGwpdGhyb3cgbmV3IEVycm9yKFwiQSBkb2NrIHByb3ZpZGVyIGZvciB0aGUgcGxhdGZvcm0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLlwiKTtyZXR1cm4gbD0hMCxlLmNsaWVudEFQSVZlcnNpb249ci51MCx0LmRpc3BhdGNoKGEuV0YuUmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmMubFAuRG9jayxpbmZvOmV9KX0pKGUpOygwLGkuV24pKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbn0pLG4/LndvcmtzcGFjZVZlcnNpb24sci51MCx0KHtjbGllbnRBUElWZXJzaW9uOnIudTAsd29ya3NwYWNlVmVyc2lvbjpuPy53b3Jrc3BhY2VWZXJzaW9uPz9cIlwifSl9Y2F0Y2goZSl7KDAsaS5Xbikoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplIGluc3RhbmNlb2YgRXJyb3I/ZS5tZXNzYWdlOlwidW5rbm93blwifSksbihlKSx1PW51bGx9fSkpLHUpLGY9YXN5bmMoKT0+e2F3YWl0IHUsbD0hMTtyZXR1cm4oYXdhaXQoMCxhLlhsKSgpKS5kaXNwYXRjaChhLldGLkRlcmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmMubFAuRG9ja30pfSxnPWFzeW5jKCk9Pnthd2FpdCB1LGF3YWl0KDAsYS5hQikoKSxhd2FpdCgwLGMuUjgpKGMubFAuRG9jayl9LHc9YXN5bmMoKT0+e2F3YWl0IHUsYXdhaXQoMCxhLmFCKSgpLGF3YWl0KDAsYy5YXykoYy5sUC5Eb2NrKX07dmFyIGgsdj1uKDcwMyk7bigxMjEpOyFmdW5jdGlvbihlKXtlLlRhYkNyZWF0ZWQ9XCJ0YWItY3JlYXRlZFwiLGUuQ29udGFpbmVyQ3JlYXRlZD1cImNvbnRhaW5lci1jcmVhdGVkXCIsZS5Db250YWluZXJSZXNpemVkPVwiY29udGFpbmVyLXJlc2l6ZWRcIn0oaHx8KGg9e30pKTtuZXcgTWFwO3ZhciB5OyFmdW5jdGlvbihlKXtlLkN1cnJlbnRXb3Jrc3BhY2VJZD1cImN1cnJlbnRXb3Jrc3BhY2VJZFwiLGUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwibGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5NYWNoaW5lTmFtZT1cIm1hY2hpbmVOYW1lXCIsZS5OZXdUYWJQYWdlTGF5b3V0PVwiTmV3VGFiUGFnZUxheW91dFwiLGUuTmV3VGFiUGFnZVNvcnQ9XCJOZXdUYWJQYWdlU29ydFwiLGUuRG9ja1Bvc2l0aW9uPVwiRG9ja1Bvc2l0aW9uXCIsZS5TZWxlY3RlZENvbG9yU2NoZW1lPVwiU2VsZWN0ZWRDb2xvclNjaGVtZVwiLGUuSGFzTW92ZWRTdG9yZT1cIkhhc01vdmVkU3RvcmVcIn0oeXx8KHk9e30pKTtjb25zdCBtPSgpPT5hc3luYyBmdW5jdGlvbigpe3JldHVybihhd2FpdCgwLGEuRG0pKCkpLmRpc3BhdGNoKGEuV0YuR2V0TGVnYWN5UGFnZXMsdm9pZCAwKX0oKSxTPSgpPT4oYXN5bmMoKT0+KGF3YWl0KDAsYS5EbSkoKSkuZGlzcGF0Y2goYS5XRi5HZXRMZWdhY3lXb3Jrc3BhY2VzLHZvaWQgMCkpKCk7dmFyIFA9big1MjgpLFc9bigyOTgpLGs9bigxMDkpLEM9big3NTgpLEk9bigxMTQpfSkoKSxtb2R1bGUuZXhwb3J0cz1vfSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB0eXBlIHsgSW50ZXJvcENsaWVudCB9IGZyb20gXCJAb3BlbmZpbi9jb3JlL3NyYy9hcGkvaW50ZXJvcFwiO1xuaW1wb3J0IHsgQ2VsbCwgZW5hYmxlTG9nZ2luZywgRXhjZWxBcHBsaWNhdGlvbiwgZ2V0RXhjZWxBcHBsaWNhdGlvbiB9IGZyb20gXCJAb3BlbmZpbi9leGNlbFwiO1xuaW1wb3J0IHtcblx0Q0xJVGVtcGxhdGUsXG5cdHR5cGUgQ0xJRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0dHlwZSBDTElGaWx0ZXIsXG5cdHR5cGUgQ0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0dHlwZSBIb21lU2VhcmNoUmVzcG9uc2UsXG5cdHR5cGUgSG9tZVNlYXJjaFJlc3VsdFxufSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgdHlwZSB7IEludGVncmF0aW9uLCBJbnRlZ3JhdGlvbkhlbHBlcnMsIEludGVncmF0aW9uTW9kdWxlIH0gZnJvbSBcIi4uLy4uL2ludGVncmF0aW9ucy1zaGFwZXNcIjtcbmltcG9ydCB0eXBlIHsgRXhjZWxBc3NldFNldHRpbmdzLCBFeGNlbFNldHRpbmdzLCBFeGNlbFdvcmtzaGVldFNldHRpbmdzIH0gZnJvbSBcIi4vc2hhcGVzXCI7XG5cbi8qKlxuICogSW1wbGVtZW50IHRoZSBpbnRlZ3JhdGlvbiBwcm92aWRlciBmb3IgRXhjZWwuXG4gKi9cbmV4cG9ydCBjbGFzcyBFeGNlbEludGVncmF0aW9uUHJvdmlkZXIgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbk1vZHVsZTxFeGNlbFNldHRpbmdzPiB7XG5cdC8qKlxuXHQgKiBQcm92aWRlciBpZC5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfUFJPVklERVJfSUQgPSBcImV4Y2VsXCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIHNoZWV0IG9wZW4gYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9FWENFTF9QUk9WSURFUl9PUEVOX0tFWV9BQ1RJT04gPSBcIk9wZW4gRXhjZWxcIjtcblxuXHQvKipcblx0ICogVGhlIGludGVncmF0aW9uIGhlbHBlcnMuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBfaW50ZWdyYXRpb25IZWxwZXJzOiBJbnRlZ3JhdGlvbkhlbHBlcnMgfCB1bmRlZmluZWQ7XG5cblx0LyoqXG5cdCAqIFRoZSBtb2R1bGUgZGVmaW5pdGlvbiBmb3IgdGhlIGludGVncmF0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX21vZHVsZURlZmluaXRpb246IEludGVncmF0aW9uPEV4Y2VsU2V0dGluZ3M+IHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBUaGUgc2V0dGluZ3MgZm9yIHRoZSBpbnRlZ3JhdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIF9zZXR0aW5nczogRXhjZWxTZXR0aW5ncyB8IHVuZGVmaW5lZDtcblxuXHQvKipcblx0ICogVGhlIEV4Y2VsIGFwcGxpY2F0aW9uIGludGVyb3AuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBfZXhjZWw6IEV4Y2VsQXBwbGljYXRpb24gfCB1bmRlZmluZWQ7XG5cblx0LyoqXG5cdCAqIFRoZSBpbnRlcm9wIGNsaWVudHMgZm9yIHRoZSBkaWZmZXJlbnQgY29udGV4dHMuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBfaW50ZXJvcENsaWVudHM6IHsgW2lkOiBzdHJpbmddOiBJbnRlcm9wQ2xpZW50IH07XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIG1vZHVsZS5cblx0ICogQHBhcmFtIGRlZmluaXRpb24gVGhlIGRlZmluaXRpb24gb2YgdGhlIG1vZHVsZSBmcm9tIGNvbmZpZ3VyYXRpb24gaW5jbHVkZSBjdXN0b20gb3B0aW9ucy5cblx0ICogQHBhcmFtIGxvZ2dlckNyZWF0b3IgRm9yIGxvZ2dpbmcgZW50cmllcy5cblx0ICogQHBhcmFtIGhlbHBlcnMgSGVscGVyIG1ldGhvZHMgZm9yIHRoZSBtb2R1bGUgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgYXBwbGljYXRpb24gY29yZS5cblx0ICogQHJldHVybnMgTm90aGluZy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBpbml0aWFsaXplKFxuXHRcdGRlZmluaXRpb246IEludGVncmF0aW9uPEV4Y2VsU2V0dGluZ3M+LFxuXHRcdGxvZ2dlckNyZWF0b3I6ICgpID0+IHZvaWQsXG5cdFx0aGVscGVyczogSW50ZWdyYXRpb25IZWxwZXJzXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycyA9IGhlbHBlcnM7XG5cdFx0dGhpcy5fbW9kdWxlRGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG5cdFx0dGhpcy5fc2V0dGluZ3MgPSBkZWZpbml0aW9uLmRhdGE7XG5cblx0XHRjb25zdCBicm9rZXJDbGllbnQgPSBmaW4uSW50ZXJvcC5jb25uZWN0U3luYyhmaW4ubWUuaWRlbnRpdHkudXVpZCwge30pO1xuXHRcdGNvbnN0IGNvbnRleHRHcm91cHMgPSBhd2FpdCBicm9rZXJDbGllbnQuZ2V0Q29udGV4dEdyb3VwcygpO1xuXHRcdHRoaXMuX2ludGVyb3BDbGllbnRzID0ge307XG5cdFx0Zm9yIChjb25zdCBjb250ZXh0R3JvdXAgb2YgY29udGV4dEdyb3Vwcykge1xuXHRcdFx0Y29uc3QgY29udGV4dENsaWVudCA9IGZpbi5JbnRlcm9wLmNvbm5lY3RTeW5jKGZpbi5tZS5pZGVudGl0eS51dWlkLCB7fSk7XG5cdFx0XHRhd2FpdCBjb250ZXh0Q2xpZW50LmpvaW5Db250ZXh0R3JvdXAoY29udGV4dEdyb3VwLmlkKTtcblx0XHRcdGF3YWl0IGNvbnRleHRDbGllbnQuYWRkQ29udGV4dEhhbmRsZXIoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmhhbmRsZUNvbnRleHQoY29udGV4dEdyb3VwLmlkLCBjdHgpO1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLl9pbnRlcm9wQ2xpZW50c1tjb250ZXh0R3JvdXAuaWRdID0gY29udGV4dENsaWVudDtcblx0XHR9XG5cblx0XHRlbmFibGVMb2dnaW5nKCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIG1vZHVsZSBpcyBiZWluZyBkZXJlZ2lzdGVyZWQuXG5cdCAqIEByZXR1cm5zIE5vdGhpbmcuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgY2xvc2Vkb3duKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgY2xpZW50IGluIHRoaXMuX2ludGVyb3BDbGllbnRzKSB7XG5cdFx0XHRhd2FpdCB0aGlzLl9pbnRlcm9wQ2xpZW50c1tjbGllbnRdLnJlbW92ZUZyb21Db250ZXh0R3JvdXAoKTtcblx0XHR9XG5cdFx0dGhpcy5faW50ZXJvcENsaWVudHMgPSB7fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBbiBlbnRyeSBoYXMgYmVlbiBzZWxlY3RlZC5cblx0ICogQHBhcmFtIHJlc3VsdCBUaGUgZGlzcGF0Y2hlZCByZXN1bHQuXG5cdCAqIEBwYXJhbSBsYXN0UmVzcG9uc2UgVGhlIGxhc3QgcmVzcG9uc2UuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGl0ZW0gd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgaXRlbVNlbGVjdGlvbihcblx0XHRyZXN1bHQ6IENMSURpc3BhdGNoZWRTZWFyY2hSZXN1bHQsXG5cdFx0bGFzdFJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmIChcblx0XHRcdHJlc3VsdC5hY3Rpb24ubmFtZSA9PT0gRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyLl9FWENFTF9QUk9WSURFUl9PUEVOX0tFWV9BQ1RJT04gJiZcblx0XHRcdHJlc3VsdC5kYXRhLndvcmtib29rICYmXG5cdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMubGF1bmNoQXNzZXRcblx0XHQpIHtcblx0XHRcdGNvbnN0IGV4Y2VsQXNzZXQgPSByZXN1bHQuZGF0YSBhcyBFeGNlbEFzc2V0U2V0dGluZ3M7XG5cblx0XHRcdGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5sYXVuY2hBc3NldCh7XG5cdFx0XHRcdGFsaWFzOiBleGNlbEFzc2V0Lndvcmtib29rXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgZXhjZWwgPSBhd2FpdCB0aGlzLmdldEV4Y2VsKCk7XG5cdFx0XHRpZiAoZXhjZWwpIHtcblx0XHRcdFx0Y29uc3Qgd29ya2Jvb2tzID0gYXdhaXQgZXhjZWwuZ2V0V29ya2Jvb2tzKCk7XG5cdFx0XHRcdGZvciAoY29uc3Qgd29ya2Jvb2sgb2Ygd29ya2Jvb2tzKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmFtZSA9IGF3YWl0IHdvcmtib29rLmdldE5hbWUoKTtcblx0XHRcdFx0XHRpZiAobmFtZSA9PT0gZXhjZWxBc3NldC53b3JrYm9vaykge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCB3b3Jrc2hlZXRTZXR0aW5ncyBvZiBleGNlbEFzc2V0LndvcmtzaGVldHMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgd29ya3NoZWV0ID0gYXdhaXQgd29ya2Jvb2suZ2V0V29ya3NoZWV0QnlOYW1lKHdvcmtzaGVldFNldHRpbmdzLm5hbWUpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB3b3Jrc2hlZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoY2VsbHMpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmhhbmRsZUNlbGxDaGFuZ2VzKGV4Y2VsQXNzZXQsIHdvcmtzaGVldFNldHRpbmdzLCBjZWxscyk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGEgbGlzdCBvZiBzZWFyY2ggcmVzdWx0cyBiYXNlZCBvbiB0aGUgcXVlcnkgYW5kIGZpbHRlcnMuXG5cdCAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gc2VhcmNoIGZvci5cblx0ICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkuXG5cdCAqIEBwYXJhbSBsYXN0UmVzcG9uc2UgVGhlIGxhc3Qgc2VhcmNoIHJlc3BvbnNlIHVzZWQgZm9yIHVwZGF0aW5nIGV4aXN0aW5nIHJlc3VsdHMuXG5cdCAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIHJlc3VsdHMgYW5kIG5ldyBmaWx0ZXJzLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGdldFNlYXJjaFJlc3VsdHMoXG5cdFx0cXVlcnk6IHN0cmluZyxcblx0XHRmaWx0ZXJzOiBDTElGaWx0ZXJbXSxcblx0XHRsYXN0UmVzcG9uc2U6IENMSVNlYXJjaExpc3RlbmVyUmVzcG9uc2Vcblx0KTogUHJvbWlzZTxIb21lU2VhcmNoUmVzcG9uc2U+IHtcblx0XHRjb25zdCByZXN1bHRzID0gdGhpcy5fc2V0dGluZ3M/LmFzc2V0cy5tYXAoKGEpID0+IHRoaXMuY3JlYXRlUmVzdWx0KGEpKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN1bHRzXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBzZWFyY2ggcmVzdWx0LlxuXHQgKiBAcGFyYW0gZXhjZWxBc3NldCBUaGUgZXhjZWwgZG9jdW1lbnQgYXNzZXQgYWxpYXMuXG5cdCAqIEByZXR1cm5zIFRoZSBzZWFyY2ggcmVzdWx0LlxuXHQgKi9cblx0cHJpdmF0ZSBjcmVhdGVSZXN1bHQoZXhjZWxBc3NldDogRXhjZWxBc3NldFNldHRpbmdzKTogSG9tZVNlYXJjaFJlc3VsdCB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYGV4Y2VsLSR7ZXhjZWxBc3NldC53b3JrYm9va31gLFxuXHRcdFx0dGl0bGU6IGV4Y2VsQXNzZXQudGl0bGUsXG5cdFx0XHRsYWJlbDogXCJFeGNlbFwiLFxuXHRcdFx0aWNvbjogdGhpcy5fbW9kdWxlRGVmaW5pdGlvbi5pY29uLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyLl9FWENFTF9QUk9WSURFUl9PUEVOX0tFWV9BQ1RJT04sXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyLl9QUk9WSURFUl9JRCxcblx0XHRcdFx0Li4uZXhjZWxBc3NldFxuXHRcdFx0fSxcblx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5TaW1wbGVUZXh0LFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiBleGNlbEFzc2V0LmRlc2NyaXB0aW9uXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIGV4Y2VsIGFwcGxpY2F0aW9uLlxuXHQgKiBAcmV0dXJucyBUaGUgYXBwbGljYXRpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBnZXRFeGNlbCgpOiBQcm9taXNlPEV4Y2VsQXBwbGljYXRpb24+IHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fZXhjZWwgPSBhd2FpdCBnZXRFeGNlbEFwcGxpY2F0aW9uKCk7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZXhjZWw7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBFeGNlbCBhcHBsaWNhdGlvblwiLCBlcnIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgdGhlIGNlbGwgY2hhbmdlcy5cblx0ICogQHBhcmFtIGV4Y2VsQXNzZXQgVGhlIGFzc2V0IHRvIHVzZSBmb3IgcHJvY2Vzc2luZyB0aGUgY2VsbCBjaGFuZ2VzLlxuXHQgKiBAcGFyYW0gd29ya3NoZWV0TmFtZSBUaGUgYXNzZXQgdG8gdXNlIGZvciBwcm9jZXNzaW5nIHRoZSBjZWxsIGNoYW5nZXMuXG5cdCAqIEBwYXJhbSBjZWxscyBUaGUgY2VsbHMgdGhhdCBoYXZlIGNoYW5nZWQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGhhbmRsZUNlbGxDaGFuZ2VzKFxuXHRcdGV4Y2VsQXNzZXQ6IEV4Y2VsQXNzZXRTZXR0aW5ncyxcblx0XHR3b3Jrc2hlZXQ6IEV4Y2VsV29ya3NoZWV0U2V0dGluZ3MsXG5cdFx0Y2VsbHM6IENlbGxbXVxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAod29ya3NoZWV0LmNlbGxIYW5kbGVycykge1xuXHRcdFx0Zm9yIChjb25zdCBjZWxsIG9mIGNlbGxzKSB7XG5cdFx0XHRcdGNvbnN0IGNlbGxIYW5kbGVyID0gd29ya3NoZWV0LmNlbGxIYW5kbGVycy5maW5kKChjKSA9PiBjLmNlbGwgPT09IGNlbGwuYWRkcmVzcyk7XG5cblx0XHRcdFx0aWYgKGNlbGxIYW5kbGVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2xpZW50ID0gdGhpcy5faW50ZXJvcENsaWVudHNbY2VsbEhhbmRsZXIuY29udGV4dEdyb3VwXTtcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRjbGllbnQgJiZcblx0XHRcdFx0XHRcdChjZWxsSGFuZGxlci50eXBlcy5pbmNsdWRlcyhcImluc3RydW1lbnRcIikgfHwgY2VsbEhhbmRsZXIudHlwZXMuaW5jbHVkZXMoXCJmZGMzLmluc3RydW1lbnRcIikpXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBjbGllbnQuc2V0Q29udGV4dCh7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiZmRjMy5pbnN0cnVtZW50XCIsXG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dGlja2VyOiBjZWxsLnZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdF9zb3VyY2U6IGBleGNlbC4ke2V4Y2VsQXNzZXQud29ya2Jvb2t9LiR7d29ya3NoZWV0Lm5hbWV9YFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIGEgY29udGV4dC5cblx0ICogQHBhcmFtIGNvbnRleHRHcm91cCBUaGUgZ3JvdXAgcmVjZWl2aW5nIHRoZSBjb250ZXh0LlxuXHQgKiBAcGFyYW0gY29udGV4dCBUaGUgY29udGV4dCBiZWluZyByZWNlaXZlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlQ29udGV4dChjb250ZXh0R3JvdXA6IHN0cmluZywgY29udGV4dDogT3BlbkZpbi5Db250ZXh0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuX3NldHRpbmdzPy5hc3NldHMpIHtcblx0XHRcdGNvbnN0IGV4Y2VsID0gYXdhaXQgdGhpcy5nZXRFeGNlbCgpO1xuXHRcdFx0aWYgKGV4Y2VsKSB7XG5cdFx0XHRcdGNvbnN0IHdvcmtib29rcyA9IGF3YWl0IGV4Y2VsLmdldFdvcmtib29rcygpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHdvcmtib29rIG9mIHdvcmtib29rcykge1xuXHRcdFx0XHRcdGNvbnN0IHdvcmtib29rTmFtZSA9IGF3YWl0IHdvcmtib29rLmdldE5hbWUoKTtcblxuXHRcdFx0XHRcdGNvbnN0IGNvbm5lY3RlZFdvcmtib29rID0gdGhpcy5fc2V0dGluZ3M/LmFzc2V0cy5maW5kKChhKSA9PiBhLndvcmtib29rID09PSB3b3JrYm9va05hbWUpO1xuXHRcdFx0XHRcdGlmIChjb25uZWN0ZWRXb3JrYm9vaz8ud29ya3NoZWV0cykge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCB3b3Jrc2hlZXRTZXR0aW5ncyBvZiBjb25uZWN0ZWRXb3JrYm9vay53b3Jrc2hlZXRzKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh3b3Jrc2hlZXRTZXR0aW5ncy5jZWxsSGFuZGxlcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpbmNvbWluZ1NvdXJjZSA9IGBleGNlbC4ke3dvcmtib29rTmFtZX0uJHt3b3Jrc2hlZXRTZXR0aW5ncy5uYW1lfWA7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoaW5jb21pbmdTb3VyY2UgIT09IGNvbnRleHQ/LmlkPy5fc291cmNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjZWxsSGFuZGxlcnMgPSB3b3Jrc2hlZXRTZXR0aW5ncy5jZWxsSGFuZGxlcnM/LmZpbHRlcihcblx0XHRcdFx0XHRcdFx0XHRcdFx0KGNoKSA9PiBjaC5jb250ZXh0R3JvdXAgPT09IGNvbnRleHRHcm91cCAmJiBjaC50eXBlcy5pbmNsdWRlcyhjb250ZXh0LnR5cGUpXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjZWxsSGFuZGxlciBvZiBjZWxsSGFuZGxlcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgd29ya3NoZWV0ID0gYXdhaXQgd29ya2Jvb2suZ2V0V29ya3NoZWV0QnlOYW1lKHdvcmtzaGVldFNldHRpbmdzLm5hbWUpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBjZWxsVmFsdWU6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbnRleHQudHlwZSA9PT0gXCJmZGMzLmluc3RydW1lbnRcIiB8fCBjb250ZXh0LnR5cGUgPT09IFwiaW5zdHJ1bWVudFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2VsbFZhbHVlID0gY29udGV4dC5pZD8udGlja2VyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjZWxsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHdvcmtzaGVldC5zZXRDZWxsVmFsdWVzKGNlbGxIYW5kbGVyLmNlbGwsIFtbY2VsbFZhbHVlXV0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyIH0gZnJvbSBcIi4vaW50ZWdyYXRpb24tcHJvdmlkZXJcIjtcblxuZXhwb3J0IGNvbnN0IGVudHJ5UG9pbnRzOiB7IFtpZDogc3RyaW5nXTogRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyIH0gPSB7XG5cdGludGVncmF0aW9uczogbmV3IEV4Y2VsSW50ZWdyYXRpb25Qcm92aWRlcigpXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9