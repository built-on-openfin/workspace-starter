/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs":
/*!*******************************************************************!*\
  !*** ../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiError: () => (/* binding */ Y),
/* harmony export */   AppNotAuthorizedError: () => (/* binding */ H),
/* harmony export */   InteropError: () => (/* binding */ Q),
/* harmony export */   TerminalCommandError: () => (/* binding */ K),
/* harmony export */   TerminalConnectionError: () => (/* binding */ X),
/* harmony export */   connect: () => (/* binding */ ee),
/* harmony export */   disableLogging: () => (/* binding */ te),
/* harmony export */   enableLogging: () => (/* binding */ ne),
/* harmony export */   getDefaultActions: () => (/* binding */ re),
/* harmony export */   isBloombergTerminalReady: () => (/* binding */ se),
/* harmony export */   isCusip: () => (/* binding */ oe),
/* harmony export */   isEquity: () => (/* binding */ ie),
/* harmony export */   isFigi: () => (/* binding */ ce),
/* harmony export */   isIsin: () => (/* binding */ ae)
/* harmony export */ });
var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{MS:()=>ApiError,xc:()=>AppNotAuthorizedError,BT:()=>InteropError,ez:()=>TerminalCommandError,yW:()=>TerminalConnectionError,$j:()=>Z,U$:()=>i,U7:()=>c,U5:()=>D,GS:()=>M,hN:()=>y,Yc:()=>v,eE:()=>E,C1:()=>S});const n=e=>{if(e instanceof ApiError)return e;switch(!0){case e?.message?.indexOf("APPLICATION_VALIDATION")>=0:return new AppNotAuthorizedError;case e?.message?.indexOf("INVALID_COMMAND")>=0:case e?.message?.indexOf("INVALID_GROUP_VALUE")>=0:case e?.message?.indexOf("MNEMONIC_NOT_ALLOWED")>=0:return new TerminalCommandError(void 0,e);case"Connection Error"===e?.message:return new TerminalConnectionError;default:return new ApiError(void 0,e)}};class ApiError extends Error{constructor(e="An unexpected error has occurred",t){super(e),t&&(this.innerError=t),this.stack=this.stack?.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class AppNotAuthorizedError extends ApiError{constructor(e="App not authorized to use Terminal Connect API",t){super(e,t)}}class InteropError extends ApiError{constructor(e="Failed to execute the interop function",t){super(e,t)}}class TerminalCommandError extends ApiError{constructor(e="Failed to execute the terminal command",t){super(e,t)}}class TerminalConnectionError extends ApiError{constructor(e="Failed to connect to local terminal service",t){super(e,t)}}const r="1.2.0";let s=!1;const o="[@openfin/bloomberg]",i=()=>{s=!1},c=()=>{s=!0,u(`v${r}`)},a=(e,t)=>{s&&(e.innerError?console.error(t?`${o} ${t}`:o,e,"\n\n(inner)",e.innerError):console.error(t?`${o} ${t}`:o,e))},u=(...e)=>{s&&console.log(o,...e)},l=(...e)=>{s&&console.warn(o,...e)};"undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Bloomberg:{enableLogging:c,disableLogging:i}}});class p{constructor(e,t,n){this._lastUpdate=0,this._securityCacheExpiration=15e3,this._securityCache="",this._name=t,this._type=n,this._terminalProxy=e}get name(){return this._name}get type(){return this._type}getSecurity(){return new Promise(((e,t)=>{this._terminalProxy.getAllGroups((n=>{const r=n.find((e=>e.name===this._name));r?(this._securityCache=r.security,this._lastUpdate=(new Date).getTime(),e(this._securityCache)):t(new Error(`Group ${name} is not found.`))}),((e,n)=>{t(this.getErrorFromErrorMessage(e,n))}))}))}getCachedSecurity(){return new Promise((async(e,t)=>{const n=(new Date).getTime();(!this._securityCache||!this._lastUpdate||n-this._lastUpdate>this._securityCacheExpiration)&&await this.getSecurity(),e(this._securityCache)}))}setSecurity(e,t){return new Promise(((n,r)=>{this._terminalProxy.setGroupSecurity((()=>{this._securityCache=e,this._lastUpdate=(new Date).getTime(),n()}),((e,t)=>{r(this.getErrorFromErrorMessage(e,t))}),this._name,e,t)}))}}function d(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,s,o,i,c,a,u="",l=0;for(;l<e.length;)n=e.charCodeAt(l++),r=e.charCodeAt(l++),s=e.charCodeAt(l++),o=n>>2,i=(3&n)<<4|r>>4,c=(15&r)<<2|s>>6,a=63&s,isNaN(r)?c=a=64:isNaN(s)&&(a=64),u=u+t.charAt(o)+t.charAt(i)+t.charAt(c)+t.charAt(a);return u}class g{constructor(){this._seqNumber=0,this._isConnecting=!1,this._isConnected=!1,this._isRegistered=!1,this._sessionId="",this._queuedRequests=[],this._pendingRequests={},this._minPortRange=51800,this._maxPortRange=51800,this._currentPort=51800,this._responseTimeout=15e3,this._disconnectEventSubscriptions={},this._groupEventSubscriptions={},this.sendRemoteMessage=(e,t,n,r)=>{if(this._isRegistered||e.register||this.sendRemoteMessage({register:{}},12,null,console.error),this._sessionId||(this._sessionId=`{${function(){const e="0123456789ABCDEF".split("");let t,n=[],r=Math.random;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(var s=0;s<36;s++)n[s]||(t=0|16*r(),n[s]=e[19==s?3&t|8:15&t]);return n.join("")}()}}`),e.setGroupValue&&!e.setGroupValue.cookie&&(e.setGroupValue.cookie=this._sessionId),e.subscribeGroupEvents){const t=e.subscribeGroupEvents.subId;delete e.subscribeGroupEvents.subId,r=e=>{delete this._groupEventSubscriptions[t],r&&r(e)}}const s={sessionId:this._sessionId,correlationId:++this._seqNumber,request:e},o=JSON.stringify(s),i=t>12,c=i?{appId:s.appId,sessionId:s.sessionId,correlationId:s.correlationId,payloadSchemaName:"ap3g_internal",payloadSchemaVersion:2,payloadMsgType:t,payload:d(o)}:void 0,a={envelope:{schemaName:i?"blp_lpad_msg":"blp_remote_controller",schemaVersion:2,message:i?JSON.stringify(c):o},correlationId:s.correlationId,expectResponse:!0,onsuccess:n,onerror:r};this._pendingRequests[s.correlationId]=a,this._isConnected?this.sendRequest(a):(this._queuedRequests.push(a),this.connect())}}addEventListener(e){const t=Object.keys(this._groupEventSubscriptions).length+1;return this._groupEventSubscriptions[t]=e,t}removeEventListener(e){return delete this._groupEventSubscriptions[e],Object.keys(this._groupEventSubscriptions).length}addDisconnectEventListener(e){const t=Object.keys(this._disconnectEventSubscriptions).length+1;return this._disconnectEventSubscriptions[t]=e,t}removeDisconnectEventListener(e){const t=Object.keys(this._disconnectEventSubscriptions).length;delete this._disconnectEventSubscriptions[e];return t!==Object.keys(this._disconnectEventSubscriptions).length}sendRequest(e){const t=JSON.stringify(e.envelope);this._webSocket&&this._webSocket.send(t),e.expectResponse?setTimeout((()=>{this._pendingRequests[e.correlationId]&&(delete this._pendingRequests[e.correlationId],e.onerror&&e.onerror(0,"Response Timeout"))}),this._responseTimeout):delete this._pendingRequests[e.correlationId]}connect(){try{if(this._isConnecting)return;this._isConnecting=!0,this._webSocket=new WebSocket("ws://localhost:"+this._currentPort,"terminal_api"),this._webSocket.onopen=this.onWebSocketOpen.bind(this),this._webSocket.onmessage=this.onWebSocketMessage.bind(this),this._webSocket.onclose=this.onWebSocketClose.bind(this),this._webSocket.onerror=this.onWebSocketError.bind(this)}catch(e){this._webSocket=void 0,this._queuedRequests=[],this.cancelPendingRequests("WebSocket Exception "+e),console.error(e)}}cancelPendingRequests(e){this._isConnected=!1,this._isConnecting=!1,this._isRegistered=!1,this._sessionId="";for(let t=0;t<this._queuedRequests.length;t+=1){const n=this._queuedRequests[t];n&&n.onerror&&n.onerror(0,e)}this._queuedRequests=[];for(let t in this._pendingRequests){const n=this._pendingRequests[t];n&&n.onerror&&n.onerror(0,e)}this._pendingRequests={}}onWebSocketClose(e){if(console.log("WebSocket Closed; Reason: "+e.reason+", Code: "+e.code+", WasClean: "+e.wasClean),this._isConnected){const t={};e&&void 0!==e.reason&&(t.reason=e.reason),e&&void 0!==e.code&&(t.code=e.code),e&&void 0!==e.wasClean&&(t.wasClean=e.wasClean),this._currentPort=this._minPortRange,this.cancelPendingRequests({status:"error",message:"Connection Closed",details:t});for(let e in this._disconnectEventSubscriptions){const t=this._disconnectEventSubscriptions[e];t&&t(e)}}}onWebSocketError(){if(console.log("WebSocket Error;  readyState: "+(this._webSocket&&this._webSocket.readyState)),this._isConnecting=!1,this._currentPort<this._maxPortRange)this._currentPort+=1,this.connect();else{this._currentPort=this._minPortRange;const e={readyState:this._webSocket&&this._webSocket.readyState};this.cancelPendingRequests({status:"error",message:"Connection Error",details:e})}}onWebSocketOpen(){for(this._isConnected=!0,this._isConnecting=!1;this._queuedRequests.length>0;)this.sendRequest(this._queuedRequests.shift())}onWebSocketMessage(e){var t=e&&e.data?e.data:"null",n=JSON.parse(t),r=n?JSON.parse(n.message):null,s=r&&r.response?this._pendingRequests[r.correlationId]:null;s&&delete this._pendingRequests[r.correlationId],this.processResponse(s,r.response)}getGroupInfo(e){return e?{name:e.name,type:e.type,security:"security"===e.type&&e.value?e.value:void 0}:{}}processResponse(e,t){if(t.success)e.onsuccess&&e.onsuccess();else if(t.registrationComplete)this._isRegistered=!0,console.log("Registration Complete; Session: "+this._sessionId),e.onsuccess&&e.onsuccess();else if(t.getAllGroups){const n=t.getAllGroups.group;e.onsuccess&&e.onsuccess(n?n.map(this.getGroupInfo):[])}else if(t.groupValue)e.onsuccess&&e.onsuccess(this.getGroupInfo(t.groupValue.group));else if(t.groupEvent){if(t.groupEvent.valueChanged){const e=t.groupEvent.valueChanged.group,n=t.groupEvent.valueChanged.cookie===this._sessionId?void 0:t.groupEvent.valueChanged.cookie;for(let t in this._groupEventSubscriptions){const r=this._groupEventSubscriptions[t];r&&r(e,n)}}}else e.onerror&&e.onerror(t.failure&&t.failure.code||0,t.failure?`${t.failure.message} ${t.failure.humanMessage}`:"Unknown Response")}}class h{constructor(){this._webSocket=new g}runFunction(e,t,n,r,s,o,i,c){let a="";if(n&&n.length?1!==r&&2!==r&&3!==r&&4!==r&&5!==r&&(a="Invalid Or Missing Parameter: panel"):a="Invalid Or Missing Parameter: mnemonic",a)return console.error("runFunctionInPanel error: "+a),void(t&&t(0,a));const u={runFunctionInPanel:{mnemonic:n,panel:r}};if(s){const e=[];e.push(s),o&&e.push(o),u.runFunctionInPanel.securities=e}i&&(u.runFunctionInPanel.tails=i),c&&(u.runFunctionInPanel.applicationProperties=c),this._webSocket.sendRemoteMessage(u,0,e,t)}getAllGroups(e,t){this._webSocket.sendRemoteMessage({getAllGroups:{}},13,e,t)}getGroup(e,t,n){if(!n||!n.length){const e="Invalid Or Missing Parameter: name";return console.error(e),void(t&&t(0,e))}this._webSocket.sendRemoteMessage({getGroupValue:{name:n}},15,e,t)}setGroupSecurity(e,t,n,r,s){let o="";if(n&&n.length?r&&r.length||(o="Invalid Or Missing Parameter: security"):o="Invalid Or Missing Parameter: name",o)return console.error("setGroupContext error: "+o),void(t&&t(0,o));this._webSocket.sendRemoteMessage({setGroupValue:{name:n,value:r,cookie:s}},14,e,t)}subscribeGroupEvents(e,t,n){if(!n){const e="Invalid Or Missing Parameter: callback";return console.error("subscribeGroupEvents error: "+e),void(t&&t(0,e))}const r=this._webSocket.addEventListener(n);1===r?this._webSocket.sendRemoteMessage({subscribeGroupEvents:{subId:r}},16,(()=>{e&&e(r)}),(e=>{t&&t(0,e)})):e&&e(r)}unsubscribeGroupEvents(e,t,n){if(!n){const e="Invalid Or Missing Parameter: cookie";return console.error("unsubscribeGroupEvents error: "+e),void(t&&t(0,e))}0===this._webSocket.removeEventListener(n)?this._webSocket.sendRemoteMessage({unsubscribeGroupEvents:{}},17,e,t):e&&e()}subscribeDisconnectEvent(e,t,n){if(!n){const e="Invalid Or Missing Parameter: callback";return console.error("subscribeDisconnectEvent error: "+e),t&&t(0,e),null}const r=this._webSocket.addDisconnectEventListener(n);return e&&e(r),r}unsubscribeDisconnectEvent(e,t,n){if(!n){const e="Invalid Or Missing Parameter: cookie";return console.error("unsubscribeDisconnectEvent error: "+e),t&&t(0,e),!1}return this._webSocket.removeDisconnectEventListener(n)?(e&&e(),!0):(t&&t(0,"Invalid Subscription"),!1)}}class m{constructor(){this.runFunction=window.bb.apps.tc.runFunction,this.getGroup=window.bb.apps.tc.getGroup,this.setGroupSecurity=window.bb.apps.tc.setGroupSecurity,this.getAllGroups=window.bb.apps.tc.getAllGroups,this.subscribeGroupEvents=window.bb.apps.tc.subscribeGroupEvents,this.unsubscribeGroupEvents=window.bb.apps.tc.unsubscribeGroupEvents}subscribeDisconnectEvent(e,t,n){}unsubscribeDisconnectEvent(e,t,n){}}class b{constructor(e=!function(){return!!(window.bb&&window.bb.apps&&window.bb.apps.app&&window.bb.apps.event)}()){this._helperSetGroupValues=e=>{const t=new p(this._terminalProxy,e.name,e.type);return t._securityCache=e.security,t._lastUpdate=(new Date).getTime(),t},this._terminalProxy=e?new h:new m}runFunction(e,t,n,r,s){return new Promise(((o,i)=>{this._terminalProxy.runFunction(o,((e,t)=>{i(this.getErrorFromErrorMessage(e,t))}),e,t,n||null,r||null,s||null)}))}getAllGroups(){return new Promise(((e,t)=>{this._terminalProxy.getAllGroups((t=>{e(Array.from(t,this._helperSetGroupValues))}),((e,n)=>{t(this.getErrorFromErrorMessage(e,n))}))}))}getErrorFromErrorMessage(e,t){let n=null;if("object"==typeof t)if(t.stack)n=t;else{const{details:e,message:r}=t;n=new Error(r??"Unknown error"),e&&(n.details=e)}else n="string"==typeof t?new Error(t):new Error("Unknown error");return n.code=e,n}getGroup(e){return new Promise(((t,n)=>{this._terminalProxy.getAllGroups((r=>{const s=r.find((t=>t.name===e));s?t(this._helperSetGroupValues(s)):n(new Error(`Group ${e} is not found.`))}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}))}))}subscribeGroupEvents(e){return new Promise(((t,n)=>{this._terminalProxy.subscribeGroupEvents((e=>{t(e)}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}),((t,n)=>{e(this._helperSetGroupValues(t),n)}))}))}unsubscribeGroupEvents(e){return new Promise(((t,n)=>{this._terminalProxy.unsubscribeGroupEvents((()=>{t()}),((e,t)=>{n(this.getErrorFromErrorMessage(e,t))}),e)}))}}const f=(window.BB=window.BB||{},window.BB.Apps=window.BB.Apps||{},window.BB.Apps.Terminal=window.BB.Apps.Terminal||new b,window.BB.Apps.Terminal),w="fdc3.contact",_="fdc3.instrument",y=e=>!!e&&/^([A-Z0-9]{5})([A-Z0-9*@#]{3})(\d)$/i.test(e),v=e=>!!e&&/\b(EQUITY)$/i.test(e),E=e=>!!e&&/^(?!B[SM]|G[GBH]|KY|VG)([A-Z]{2})(G)(((?![AEIOU_])\w){8})(\d)$/i.test(e),S=e=>!!e&&/^([A-Z]{2})([A-Z0-9]{9})(\d)$/i.test(e),I="OF_BBG_API",A=(e,t,r)=>async(s,o)=>{if(void 0===(s?.name??void 0)){const e=new ApiError(void 0,"Group event source is undefined");throw a(e),r?.(e),e}if("*"!==e&&s.name!==e||o===I)return;let i;try{i=await s.getSecurity()}catch(e){const t=n(e);throw a(t),r?.(t),t}u(`Launchpad group ${s.name} security changed to:`,i);const c=(e=>{const t={type:_,id:{BBG:e}},n=(e=>{if(e?.trim())return(e.match(/^\w+/)??[])[0]})(e);if(!n)return t;switch(!0){case y(n):t.id.CUSIP=n;break;case E(n):t.id.FIGI=n;break;case S(n):t.id.ISIN=n;break;case v(e):t.id.ticker=n}return t})(i);c.openfinBbgApi=!0,t?.(c),u("Setting new context: ",c);try{await fin.me.interop.setContext(c)}catch(e){const t=new InteropError(void 0,e);a(t),r?.(t)}},M=async()=>{let e=!0;try{await f.getAllGroups()}catch(t){const r=n(t);if(!(r instanceof TerminalConnectionError))throw a(r),r;e=!1}return u("Bloomberg terminal ready: ",e),e},C=async(e,t,r,s,o)=>{if("number"==typeof e){u(`Running terminal function in panel ${e}: `,t,r,s,o);try{await f.runFunction(t,e,r,s,o)}catch(e){const t=n(e);throw a(t),t}}else u(`Unable to run function as target ${e} is not a panel`,t,r,s,o)},G={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};G.defaultMerge;function k(e,t){return t}function O(e){return"object"!=typeof e||null===e?0:Array.isArray(e)?2:function(e){if(!F.has(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(void 0===t)return!0;const n=t.prototype;if(null===n||"object"!=typeof n||!F.has(Object.prototype.toString.call(n)))return!1;if(!n.hasOwnProperty("isPrototypeOf"))return!1;return!0}(e)?1:e instanceof Set?3:e instanceof Map?4:5}function P(e){const t=new Set;for(const n of e)for(const e of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(e);return t}function R(e,t){return"object"==typeof e&&Object.prototype.propertyIsEnumerable.call(e,t)}function x(e){return{*[Symbol.iterator](){for(const t of e)for(const e of t)yield e}}}const F=new Set(["[object Object]","[object Module]"]);function q(e){return e.at(-1)}var N=Object.freeze({__proto__:null,mergeArrays:function(e){return e.flat()},mergeMaps:function(e){return new Map(x(e))},mergeOthers:q,mergeRecords:function(e,t,n){const r={};for(const s of P(e)){const o=[];for(const t of e)R(t,s)&&o.push(t[s]);if(0===o.length)continue;const i=t.metaDataUpdater(n,{key:s,parents:e}),c=B(o,t,i);c!==G.skip&&("__proto__"===s?Object.defineProperty(r,s,{value:c,configurable:!0,enumerable:!0,writable:!0}):r[s]=c)}return r},mergeSets:function(e){return new Set(x(e))}});function T(...e){return function(e,t){const n=function(e,t){return{defaultMergeFunctions:N,mergeFunctions:{...N,...Object.fromEntries(Object.entries(e).filter((([e,t])=>Object.hasOwn(N,e))).map((([e,t])=>!1===t?[e,q]:[e,t])))},metaDataUpdater:e.metaDataUpdater??k,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,actions:G}}(e,r);function r(...e){return B(e,n,t)}return r}({})(...e)}function B(e,t,n){if(0===e.length)return;if(1===e.length)return $(e,t,n);const r=O(e[0]);if(0!==r&&5!==r)for(let s=1;s<e.length;s++)if(O(e[s])!==r)return $(e,t,n);switch(r){case 1:return function(e,t,n){const r=t.mergeFunctions.mergeRecords(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords)return t.defaultMergeFunctions.mergeRecords(e,t,n);return r}(e,t,n);case 2:return function(e,t,n){const r=t.mergeFunctions.mergeArrays(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays)return t.defaultMergeFunctions.mergeArrays(e);return r}(e,t,n);case 3:return function(e,t,n){const r=t.mergeFunctions.mergeSets(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets)return t.defaultMergeFunctions.mergeSets(e);return r}(e,t,n);case 4:return function(e,t,n){const r=t.mergeFunctions.mergeMaps(e,t,n);if(r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps)return t.defaultMergeFunctions.mergeMaps(e);return r}(e,t,n);default:return $(e,t,n)}}function $(e,t,n){const r=t.mergeFunctions.mergeOthers(e,t,n);return r===G.defaultMerge||t.useImplicitDefaultMerging&&void 0===r&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):r}const D=()=>{const e=new Map,t=new Map,n={target:1,mnemonic:"DES"},r={target:1,mnemonic:"GP"},s={target:1,mnemonic:"Q"},o={target:1,mnemonic:"BIO"},i={target:1,mnemonic:"SEAR"};e.set(_,{...n}),e.set(w,{...o}),e.set("fdc3.organization",{...i});const c=new Map;c.set(_,{...r}),t.set("ViewChart",c);const a=new Map;a.set(w,{...o}),t.set("ViewContact",a);const u=new Map;u.set(_,{...n}),t.set("ViewInstrument",u);const l=new Map;return l.set(_,{...s}),t.set("ViewQuote",l),{contexts:e,intents:t}},U=async(e,t,n)=>{const r=D(),s=(e=>{const t=e=>{const[t]=e;return!!(t??"").trim()},n=[...e?.contexts?.entries()??[]].filter(t),r=[...e?.intents?.entries()??[]].filter((e=>{const[n,r]=e,s=[...r?.entries()??[]].filter(t);return!!(n??"").trim()&&s.length>0}));return{contexts:new Map(n),intents:new Map(r)}})(e),o=T(r,s),i=o.contexts,c=o.intents,p=[];let d;p.push(fin.me.interop.addContextHandler(((e,t,n)=>async r=>{r?await j(r,e,t,n):u("No context info provided, ignoring")})(i,t,n))),c.forEach(((e,r)=>{p.push(fin.me.interop.registerIntentHandler(((e,t,n)=>async r=>{u("Intent received",r);const{context:s}=r;s?e?await j(s,e,t,n):l(`No actions have been provided for intent ${r.name}, ignoring`):l("No context info provided with intent, ignoring")})(e,t,n),r))}));try{d=await Promise.all(p)}catch(e){const t=new ApiError("Failed to register interop handlers",e);throw a(t),t}return d},j=async(e,t,n,r)=>{if(n?.(e),!0===e.openfinBbgApi)return;if(u("Processing context",e),!t.has(e.type)||!t.get(e.type))return void l(`No action has been defined for context type ${e.type}, ignoring`);const s=t.get(e.type);try{switch(!0){case e.type.toUpperCase().endsWith("CONTACT"):await V(e,s);break;case e.type.toUpperCase().endsWith("INSTRUMENT"):await L(e,s);break;case e.type.toUpperCase().endsWith("ORGANIZATION"):await W(e,s);break;default:l(`Context type ${e.type} is not supported, ignoring`)}}catch(e){let t;e instanceof ApiError?t=e:(t=new ApiError(void 0,e),a(t)),r?.(t)}},V=async(e,t)=>{const{name:n}=e;if(!n)return void l("Contact context did not include a name, ignoring");if("string"==typeof t)return void l("Contact context is not compatible with group actions, ignoring");const{mnemonic:r,tails:s,target:o}=t,i=`${n} ${s??""}`.trim();await C(o,r,void 0,void 0,i)},L=async(e,t)=>{const r=(e=>{const{BBG:t,ticker:n}=e.id;return t||(n?`${n} US Equity`:void u("Instrument context does not contain a supported id",e))})(e);if(!r)return void l("Instrument context did not contain a valid security, ignoring");if("string"==typeof t)return void await(async(e,t)=>{if(u(`Setting ${"*"===e?"every group":`group ${e}`} security to ${t}`),"*"===e){const e=await f.getAllGroups();await Promise.all(e.map((e=>e.setSecurity(t,I))))}else try{const n=await f.getGroup(e);await n.setSecurity(t,I)}catch(e){const t=n(e);throw a(t),t}})(t,r);const{mnemonic:s,tails:o,target:i}=t;await C(i,s,r,void 0,o)},W=async(e,t)=>{const{name:n}=e;if(!n)return void l("Organization context did not include a name, ignoring");if("string"==typeof t)return void l("Organization context is not compatible with group actions, ignoring");const{mnemonic:r,tails:s,target:o}=t,i=`${n} ${s??""}`.trim();await C(o,r,void 0,void 0,i)};var z;!function(e){e.Bloomberg="BLOOMBERG"}(z||(z={}));const Z=async e=>{(async e=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:r,componentName:e}})}catch(t){l(`Unable to register usage for feature ${e}: ${t?.message}`)}})(z.Bloomberg);const{group:t,actions:n,onContextChanged:s,onError:o}=e??{};if(u("Creating interop connection",t,n),!await M()){const e=new TerminalConnectionError;throw a(e),e}let i;void 0!==(t??void 0)&&(i=await f.subscribeGroupEvents(A(t,s,o)),u("Launchpad group subscription created: ",i));const c=await U(n,s,o);return{disconnect:J(c,i)}},J=(e,t)=>async()=>{if(u("Disconnecting interop connection"),e&&await Promise.all(e.map((async e=>{await e.unsubscribe()}))),void 0!==(t??void 0))try{await f.unsubscribeGroupEvents(t)}catch(e){const t=new TerminalConnectionError("An error occurred during disconnection",e);a(t)}};var Y=t.MS,H=t.xc,Q=t.BT,K=t.ez,X=t.yW,ee=t.$j,te=t.U$,ne=t.U7,re=t.U5,se=t.GS,oe=t.hN,ie=t.Yc,ce=t.eE,ae=t.C1;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!*******************************!*\
  !*** ./client/src/bbgtest.ts ***!
  \*******************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/bloomberg */ "../../node_modules/@openfin/bloomberg/openfin.bloomberg.mjs");

let bbgConnection;
let selectedIntentType = "";
let selectedIntentValue = "";
let fdc3Denomination = "";
let bbgMnemonic = "";
let btnConnect;
let btnDisconnect;
let btnClearLogs;
let btnQuery;
let intentTypeElement;
let intentValueElement;
let logOutput;
window.addEventListener("DOMContentLoaded", async () => {
    // Enable logging in the BBG package
    (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
    // Initialize the DOM elements.
    initializeDOM();
});
/**
 * Initialize the DOM.
 */
function initializeDOM() {
    btnConnect = document.querySelector("#btnConnect");
    btnDisconnect = document.querySelector("#btnDisconnect");
    btnClearLogs = document.querySelector("#btnClear");
    btnQuery = document.querySelector("#btnQuery");
    intentTypeElement = document.querySelector("#intentType");
    intentValueElement = document.querySelector("#intentValue");
    logOutput = document.querySelector("#logOutput");
    if (btnConnect) {
        btnConnect.addEventListener("click", async () => {
            if (btnConnect) {
                btnConnect.disabled = true;
            }
            await connectToBBGTerminal();
            updateState();
        });
    }
    if (btnDisconnect) {
        btnDisconnect.addEventListener("click", async () => {
            if (btnDisconnect) {
                btnDisconnect.disabled = true;
            }
            await disconnectFromBBGTerminal();
            updateState();
        });
    }
    if (btnClearLogs) {
        btnClearLogs.addEventListener("click", clearLogs);
    }
    if (btnQuery) {
        btnQuery.addEventListener("click", fireIntentForBBG);
    }
    if (intentTypeElement) {
        intentTypeElement.addEventListener("change", (event) => {
            if (intentTypeElement?.value) {
                if (btnQuery) {
                    btnQuery.disabled = true;
                }
                switch (intentTypeElement?.value) {
                    case "ViewChart":
                        logInformation("Intent to be fired is ViewChart. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: GP");
                        selectedIntentType = "ViewChart";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "GP";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                    case "ViewContact":
                        logInformation("Intent to be fired is ViewContact. Content Type is fdc3.contact. Bloomberg Terminal Mnemonic: BIO");
                        selectedIntentType = "ViewContact";
                        fdc3Denomination = "fdc3.contact";
                        bbgMnemonic = "BIO";
                        populateSelect(intentValueElement, [
                            {
                                value: "William Henry Gates",
                                label: "William Henry Gates"
                            },
                            {
                                value: "Larry Ellison",
                                label: "Larry Ellison"
                            },
                            {
                                value: "Robert Iger",
                                label: "Robert Iger"
                            }
                        ]);
                        break;
                    case "ViewInstrument":
                        logInformation("Intent to be fired is ViewInstrument. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: DES");
                        selectedIntentType = "ViewInstrument";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "DES";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                    case "ViewQuote":
                        logInformation("Intent to be fired is ViewQuote. Content Type is fdc3.instrument. Bloomberg Terminal Mnemonic: Q");
                        selectedIntentType = "ViewQuote";
                        fdc3Denomination = "fdc3.instrument";
                        bbgMnemonic = "Q";
                        populateSelect(intentValueElement, [
                            {
                                value: "ORCL",
                                label: "Oracle Corp"
                            },
                            {
                                value: "MSFT",
                                label: "Microsoft"
                            },
                            {
                                value: "IBM",
                                label: "IBM"
                            }
                        ]);
                        break;
                }
                updateState();
            }
        });
    }
    if (intentValueElement) {
        intentValueElement.addEventListener("change", () => {
            if (intentValueElement) {
                selectedIntentValue = intentValueElement.value;
                if (selectedIntentValue.length > 0) {
                    logInformation(`action: ${selectedIntentType}, type: ${fdc3Denomination}, bbg mnemonic: ${bbgMnemonic}, search value: ${selectedIntentValue}`);
                }
                updateState();
            }
        });
    }
    updateState();
}
/**
 * Connect to Bloomberg Terminal.
 */
async function connectToBBGTerminal() {
    try {
        logInformation("Checking Bloomberg Terminal Status");
        if (!(await (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.isBloombergTerminalReady)())) {
            const error = new Error("Failed to connect to Bloomberg terminal.");
            console.log(error);
            logInformation("Failed to connect to Bloomberg terminal.");
            throw error;
        }
        bbgConnection = await (0,_openfin_bloomberg__WEBPACK_IMPORTED_MODULE_0__.connect)();
        logInformation("Connection successful");
    }
    catch (error) {
        bbgConnection = undefined;
        console.log(error);
        logInformation(errorToString(error));
    }
}
/**
 * Disconnect from Bloomberg Terminal.
 */
async function disconnectFromBBGTerminal() {
    if (bbgConnection) {
        try {
            logInformation("Disconnecting from Bloomberg Terminal");
            await bbgConnection.disconnect();
        }
        finally {
            bbgConnection = undefined;
            logInformation("Disconnected from Bloomberg Terminal");
        }
    }
}
/**
 * Fire an intent.
 */
async function fireIntentForBBG() {
    if (bbgConnection) {
        try {
            logInformation(`action: ${selectedIntentType}, type: ${fdc3Denomination}, bbg mnemonic: ${bbgMnemonic}, search value: ${selectedIntentValue}`);
            let intent;
            switch (selectedIntentType) {
                case "ViewContact":
                    intent = {
                        name: selectedIntentType,
                        context: {
                            type: fdc3Denomination,
                            name: selectedIntentValue,
                            id: {}
                        }
                    };
                    break;
                default:
                    intent = {
                        name: selectedIntentType,
                        context: {
                            type: fdc3Denomination,
                            id: {
                                ticker: selectedIntentValue
                            }
                        }
                    };
                    break;
            }
            await fin.me.interop.fireIntent(intent);
        }
        catch (error) {
            logInformation(`Error while trying to raise intent: ${errorToString(error)}`);
        }
    }
    else {
        logInformation("Not connected to the Bloomberg Terminal. Please check your status or log in again.");
    }
}
/**
 * Update the state of the DOM.
 */
function updateState() {
    const isConnected = bbgConnection !== undefined;
    if (btnConnect) {
        btnConnect.disabled = isConnected;
    }
    if (btnDisconnect) {
        btnDisconnect.disabled = !isConnected;
    }
    if (intentTypeElement) {
        intentTypeElement.disabled = !isConnected;
    }
    if (intentValueElement) {
        intentValueElement.disabled = !isConnected || selectedIntentType.length === 0;
    }
    if (btnQuery) {
        btnQuery.disabled = !isConnected || selectedIntentValue.length === 0;
    }
}
/**
 * Log information to the output element.
 * @param info The information to log.
 */
function logInformation(info) {
    if (logOutput) {
        logOutput.textContent = `${logOutput.textContent}${info}\n\n`;
        logOutput.scrollTop = logOutput.scrollHeight;
    }
}
/**
 * Convert and error to a string.
 * @param err The error to convert.
 * @returns The error as a string.
 */
function errorToString(err) {
    if (err instanceof Error) {
        return err.message;
    }
    else if (typeof err === "string") {
        return err;
    }
    return JSON.stringify(err);
}
/**
 * Clear the logs.
 */
function clearLogs() {
    if (logOutput) {
        logOutput.textContent = "";
        logOutput.scrollTop = 0;
    }
}
/**
 * Populate a select control with a list of items.
 * @param select The select element to populate.
 * @param values The values to populate the element with.
 */
function populateSelect(select, values) {
    if (select) {
        select.innerHTML = "";
        const opt = document.createElement("option");
        opt.value = "";
        opt.text = "Please select value";
        opt.disabled = true;
        opt.selected = true;
        select.append(opt);
        for (const val of values) {
            const optVal = document.createElement("option");
            optVal.value = val.value;
            optVal.text = val.label;
            select.append(optVal);
        }
    }
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmJndGVzdC5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsT0FBTyxVQUFVLCtEQUErRCx1QkFBdUIsRUFBRSxvREFBb0QsTUFBTSxPQUFPLDZNQUE2TSxFQUFFLFlBQVksa0NBQWtDLFdBQVcsdUZBQXVGLGdNQUFnTSx1RUFBdUUsd0NBQXdDLDZCQUE2QixvREFBb0QsZ0ZBQWdGLHNCQUFzQixJQUFJLDZDQUE2QyxrRUFBa0UsWUFBWSxvQ0FBb0MsMERBQTBELFlBQVksNENBQTRDLDBEQUEwRCxZQUFZLCtDQUErQywrREFBK0QsWUFBWSxnQkFBZ0IsU0FBUyxzQ0FBc0MsS0FBSyxRQUFRLFdBQVcsRUFBRSxHQUFHLFdBQVcsb0NBQW9DLEdBQUcsRUFBRSxFQUFFLHFEQUFxRCxHQUFHLEVBQUUsRUFBRSxRQUFRLFlBQVksdUJBQXVCLFlBQVkseUJBQXlCLCtDQUErQyxPQUFPLHFCQUFxQixjQUFjLFdBQVcsbUNBQW1DLEVBQUUsUUFBUSxtQkFBbUIsNkhBQTZILFdBQVcsa0JBQWtCLFdBQVcsa0JBQWtCLGNBQWMsNEJBQTRCLHNDQUFzQyx5Q0FBeUMscUhBQXFILE1BQU0saUJBQWlCLFdBQVcsc0NBQXNDLEdBQUcsR0FBRyxvQkFBb0IsaUNBQWlDLDZCQUE2Qiw2SUFBNkksR0FBRyxpQkFBaUIsNEJBQTRCLDJDQUEyQyxnRUFBZ0UsV0FBVyxzQ0FBc0Msa0JBQWtCLElBQUksY0FBYyw0RUFBNEUsMkJBQTJCLEtBQUssV0FBVyxpTUFBaU0sU0FBUyxRQUFRLGNBQWMsc0pBQXNKLDJJQUEySSxpQ0FBaUMsb0NBQW9DLDJEQUEyRCxZQUFZLDREQUE0RCxFQUFFLFdBQVcscUNBQXFDLHlCQUF5QixxQ0FBcUMsWUFBWSxLQUFLLGdEQUFnRCxrQkFBa0IsSUFBSSw4R0FBOEcscUNBQXFDLDBDQUEwQyxpREFBaUQsU0FBUyxvRUFBb0UsaUNBQWlDLHlKQUF5SixXQUFXLFVBQVUsa0dBQWtHLHdFQUF3RSw4SEFBOEgsb0JBQW9CLDREQUE0RCw0Q0FBNEMsdUJBQXVCLGlHQUFpRyw4QkFBOEIsaUVBQWlFLGlEQUFpRCxpQ0FBaUMsK0RBQStELDZDQUE2QyxrRUFBa0UsZUFBZSxtQ0FBbUMsMkVBQTJFLG1JQUFtSSx1RUFBdUUsVUFBVSxJQUFJLDZCQUE2Qiw4VUFBOFUsU0FBUyxzSEFBc0gseUJBQXlCLG9GQUFvRixZQUFZLDhCQUE4QixNQUFNLGdDQUFnQyw2QkFBNkIsd0JBQXdCLG9DQUFvQyxpQ0FBaUMsNkJBQTZCLHlCQUF5QixvQkFBb0Isa0NBQWtDLG1GQUFtRixXQUFXLCtMQUErTCxxREFBcUQsRUFBRSxpREFBaUQsOENBQThDLFVBQVUsbUJBQW1CLGtDQUFrQyw0SkFBNEosS0FBSyxxQ0FBcUMsU0FBUyx3REFBd0QsNEJBQTRCLG9EQUFvRCxHQUFHLGtCQUFrQiwrQ0FBK0MsOEJBQThCLGdEQUFnRCxzQkFBc0IseUlBQXlJLG9GQUFvRixnQkFBZ0IsVUFBVSw2RUFBNkUsSUFBSSxxQkFBcUIsd0NBQXdDLHlGQUF5Rix1REFBdUQsd0JBQXdCLDZCQUE2Qix3REFBd0QscUZBQXFGLHNCQUFzQiw4QkFBOEIscUlBQXFJLDRDQUE0Qyx5Q0FBeUMsWUFBWSxvRUFBb0UsbUJBQW1CLEVBQUUsdUJBQXVCLHVCQUF1QixRQUFRLGNBQWMsc0JBQXNCLDZCQUE2QixTQUFTLDhNQUE4TSxTQUFTLG9CQUFvQixxQkFBcUIsTUFBTSxXQUFXLHlEQUF5RCwrSEFBK0gsa0JBQWtCLG1DQUFtQyxnQkFBZ0IsU0FBUyxnQkFBZ0Isa0JBQWtCLDZDQUE2Qyx3Q0FBd0MsbUNBQW1DLGVBQWUsUUFBUSxTQUFTLDRCQUE0QixTQUFTLG9MQUFvTCxtQ0FBbUMsZUFBZSx5QkFBeUIsU0FBUyw0QkFBNEIsT0FBTyxpREFBaUQsdUVBQXVFLDRDQUE0Qyx5Q0FBeUMsc0JBQXNCLFNBQVMsVUFBVSxRQUFRLE9BQU8sVUFBVSxXQUFXLDhCQUE4QixPQUFPLCtDQUErQyx5RUFBeUUsOEVBQThFLDBCQUEwQixnQkFBZ0IsZ0NBQWdDLE9BQU8saURBQWlELDBFQUEwRSxzREFBc0QsaUJBQWlCLGtDQUFrQyxPQUFPLCtDQUErQywwRUFBMEUseUdBQXlHLFFBQVEsY0FBYyx3VUFBd1UsaUNBQWlDLG9DQUFvQyxRQUFRLDBCQUEwQiw4RUFBOEUsSUFBSSwrQkFBK0IsaURBQWlELHdFQUF3RSxtQ0FBbUMsdUJBQXVCLDRCQUE0QiwyQ0FBMkMsc0NBQXNDLCtCQUErQixHQUFHLGVBQWUsNEJBQTRCLHNDQUFzQyw0Q0FBNEMsV0FBVyxzQ0FBc0MsR0FBRyxHQUFHLDhCQUE4QixXQUFXLHFDQUFxQyxLQUFLLE1BQU0sb0JBQW9CLEdBQUcsaURBQWlELGtFQUFrRSxrQkFBa0IsWUFBWSw0QkFBNEIsc0NBQXNDLGdDQUFnQyx3REFBd0QsR0FBRyxpQkFBaUIsV0FBVyxzQ0FBc0MsR0FBRyxHQUFHLHdCQUF3Qiw0QkFBNEIsOENBQThDLEtBQUssV0FBVyxzQ0FBc0MsV0FBVyxtQ0FBbUMsR0FBRyxHQUFHLDBCQUEwQiw0QkFBNEIsaURBQWlELElBQUksV0FBVyxzQ0FBc0MsS0FBSyxJQUFJLGdDQUFnQyxrQ0FBa0MsNElBQTRJLEVBQUUsY0FBYyxFQUFFLDJGQUEyRixFQUFFLHNCQUFzQixFQUFFLG9DQUFvQyxFQUFFLFdBQVcsRUFBRSx3REFBd0QsK0JBQStCLCtEQUErRCxvQkFBb0IscUNBQXFDLE1BQU0sSUFBSSx3QkFBd0IsU0FBUyxhQUFhLG9CQUFvQixxQkFBcUIsUUFBUSx5QkFBeUIsYUFBYSxTQUFTLFdBQVcsT0FBTyxRQUFRLDRDQUE0QyxLQUFLLGVBQWUsV0FBVyx1QkFBdUIsTUFBTSxzQkFBc0IsTUFBTSxzQkFBc0IsTUFBTSx3QkFBd0IsU0FBUyxLQUFLLHVEQUF1RCxJQUFJLG1DQUFtQyxTQUFTLG1DQUFtQyxhQUFhLGFBQWEsU0FBUyxJQUFJLHVCQUF1QixTQUFTLGFBQWEsd0RBQXdELEtBQUssMkNBQTJDLHNCQUFzQix1QkFBdUIsd0NBQXdDLEVBQUUsYUFBYSxJQUFJLCtCQUErQixTQUFTLGFBQWEsY0FBYywyQ0FBMkMsR0FBRyx5QkFBeUIsSUFBSSxzRkFBc0YsZUFBZSxnQkFBZ0IsU0FBUyxjQUFjLG9FQUFvRSxzREFBc0QsTUFBTSxjQUFjLEdBQUcsdUJBQXVCLG9CQUFvQixvRkFBb0YsK0NBQStDLFNBQVMsOENBQThDLGNBQWMsZ0JBQWdCLCtGQUErRixTQUFTLGdCQUFnQiwwRUFBMEUsY0FBYyxPQUFPLHFCQUFxQiw0Q0FBNEMsdURBQXVELGNBQWMsZ0JBQWdCLHFCQUFxQix1Q0FBdUMsZ0JBQWdCLHVCQUF1QixxQkFBcUIsNENBQTRDLFdBQVcscUJBQXFCLFdBQVcsc0NBQXNDLHlCQUF5Qiw2QkFBNkIsZ0JBQWdCLGFBQWEsd0RBQXdELGtEQUFrRCxVQUFVLFNBQVMsdUJBQXVCLHNCQUFzQixFQUFFLGlCQUFpQixxQkFBcUIsc0JBQXNCLE9BQU8sd0NBQXdDLHVIQUF1SCwwSEFBMEgsTUFBTSxpQkFBaUIsZ0JBQWdCLFNBQVMsR0FBRyxRQUFRLGtCQUFrQix1QkFBdUIsZ0NBQWdDLGdCQUFnQiw0QkFBNEIsV0FBVyxtQ0FBbUMsVUFBVSw4QkFBOEIsNkNBQTZDLHdMQUF3TCxTQUFTLFFBQVEsOEJBQThCLDRDQUE0QyxpTEFBaUwsU0FBUyxRQUFRLDhCQUE4QiwwQ0FBMEMsMktBQTJLLFNBQVMsUUFBUSw4QkFBOEIsMENBQTBDLDJLQUEySyxTQUFTLFFBQVEseUJBQXlCLGtCQUFrQiw0Q0FBNEMsZ0xBQWdMLGFBQWEsNkJBQTZCLHdCQUF3QixJQUFJLHVCQUF1QixJQUFJLHNCQUFzQixJQUFJLHdCQUF3QixJQUFJLDBCQUEwQixTQUFTLEtBQUssV0FBVyxLQUFLLDZCQUE2QixLQUFLLEVBQUUsZ0JBQWdCLFNBQVMsS0FBSyx1QkFBdUIsZ0JBQWdCLFNBQVMsS0FBSyx5QkFBeUIsZ0JBQWdCLFNBQVMsS0FBSyw0QkFBNEIsZ0JBQWdCLGdCQUFnQixLQUFLLHdCQUF3QixzQkFBc0Isa0JBQWtCLG1CQUFtQixZQUFZLFdBQVcsdUJBQXVCLDBGQUEwRiwrQ0FBK0MsbUNBQW1DLEdBQUcsT0FBTyx3Q0FBd0MsNENBQTRDLE1BQU0sNERBQTRELDJEQUEyRCw4QkFBOEIsZ0VBQWdFLHVCQUF1QixNQUFNLFVBQVUsR0FBRyxtRUFBbUUsT0FBTyxpRUFBaUUsYUFBYSxHQUFHLElBQUksdUJBQXVCLFNBQVMsOERBQThELGFBQWEsU0FBUyxvQkFBb0Isc0NBQXNDLHlIQUF5SCxPQUFPLGFBQWEsc0JBQXNCLElBQUksV0FBVywyREFBMkQsTUFBTSw4REFBOEQsTUFBTSxnRUFBZ0UsTUFBTSwwQkFBMEIsUUFBUSw4QkFBOEIsU0FBUyxNQUFNLGtFQUFrRSxnQkFBZ0IsTUFBTSxPQUFPLEdBQUcsd0VBQXdFLHNHQUFzRyxNQUFNLDRCQUE0QixRQUFRLEdBQUcsRUFBRSxNQUFNLFNBQVMsNkJBQTZCLGdCQUFnQixhQUFhLE1BQU0sZUFBZSxNQUFNLGdCQUFnQixHQUFHLDJFQUEyRSxLQUFLLHFGQUFxRixxREFBcUQsZ0JBQWdCLCtCQUErQixFQUFFLEdBQUcsY0FBYyxFQUFFLFlBQVksK0JBQStCLGtEQUFrRCxTQUFTLDRCQUE0Qix5QkFBeUIsU0FBUyxhQUFhLGNBQWMsT0FBTyxNQUFNLDRCQUE0QixHQUFHLHdCQUF3QixnQkFBZ0IsTUFBTSxPQUFPLEdBQUcsNkVBQTZFLDJHQUEyRyxNQUFNLDRCQUE0QixRQUFRLEdBQUcsRUFBRSxNQUFNLFNBQVMsOEJBQThCLE1BQU0sYUFBYSx3QkFBd0IsU0FBUyxHQUFHLGtCQUFrQixXQUFXLElBQUksZ0NBQWdDLGlDQUFpQyw4QkFBOEIsRUFBRSxTQUFTLDBDQUEwQyxFQUFFLElBQUksV0FBVyxJQUFJLGVBQWUsTUFBTSwrQ0FBK0MsT0FBTyxvREFBb0Qsb0NBQW9DLGFBQWEsTUFBTSwrR0FBK0csdUJBQXVCLE9BQU8sbUJBQW1CLG9CQUFvQiwrRUFBK0Usc0JBQXNCLDZCQUE2QixrQ0FBa0MsU0FBUyxnRkFBZ0YsT0FBTzs7Ozs7O1VDQXh4cUI7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7OztBQ0Q0QjtBQUc1QixJQUFJLGFBQThDLENBQUM7QUFFbkQsSUFBSSxrQkFBa0IsR0FBVyxFQUFFLENBQUM7QUFDcEMsSUFBSSxtQkFBbUIsR0FBVyxFQUFFLENBQUM7QUFDckMsSUFBSSxnQkFBZ0IsR0FBVyxFQUFFLENBQUM7QUFDbEMsSUFBSSxXQUFXLEdBQVcsRUFBRSxDQUFDO0FBRTdCLElBQUksVUFBb0MsQ0FBQztBQUN6QyxJQUFJLGFBQXVDLENBQUM7QUFDNUMsSUFBSSxZQUFzQyxDQUFDO0FBQzNDLElBQUksUUFBa0MsQ0FBQztBQUN2QyxJQUFJLGlCQUEyQyxDQUFDO0FBQ2hELElBQUksa0JBQTRDLENBQUM7QUFDakQsSUFBSSxTQUFnQyxDQUFDO0FBRXJDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLElBQUksRUFBRTtJQUN0RCxvQ0FBb0M7SUFDcEMsaUVBQWEsRUFBRSxDQUFDO0lBRWhCLCtCQUErQjtJQUMvQixhQUFhLEVBQUUsQ0FBQztBQUNqQixDQUFDLENBQUMsQ0FBQztBQUVIOztHQUVHO0FBQ0gsU0FBUyxhQUFhO0lBQ3JCLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFvQixhQUFhLENBQUMsQ0FBQztJQUN0RSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBb0IsZ0JBQWdCLENBQUMsQ0FBQztJQUM1RSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBb0IsV0FBVyxDQUFDLENBQUM7SUFDdEUsUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFdBQVcsQ0FBQyxDQUFDO0lBQ2xFLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLGFBQWEsQ0FBQyxDQUFDO0lBQzdFLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLGNBQWMsQ0FBQyxDQUFDO0lBQy9FLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFpQixZQUFZLENBQUMsQ0FBQztJQUVqRSxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ2hCLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDL0MsSUFBSSxVQUFVLEVBQUUsQ0FBQztnQkFDaEIsVUFBVSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7WUFDNUIsQ0FBQztZQUNELE1BQU0sb0JBQW9CLEVBQUUsQ0FBQztZQUM3QixXQUFXLEVBQUUsQ0FBQztRQUNmLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUNELElBQUksYUFBYSxFQUFFLENBQUM7UUFDbkIsYUFBYSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsRCxJQUFJLGFBQWEsRUFBRSxDQUFDO2dCQUNuQixhQUFhLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUMvQixDQUFDO1lBQ0QsTUFBTSx5QkFBeUIsRUFBRSxDQUFDO1lBQ2xDLFdBQVcsRUFBRSxDQUFDO1FBQ2YsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBQ0QsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNsQixZQUFZLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFDRCxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ2QsUUFBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxJQUFJLGlCQUFpQixFQUFFLENBQUM7UUFDdkIsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDdEQsSUFBSSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQztnQkFDOUIsSUFBSSxRQUFRLEVBQUUsQ0FBQztvQkFDZCxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDMUIsQ0FBQztnQkFDRCxRQUFRLGlCQUFpQixFQUFFLEtBQUssRUFBRSxDQUFDO29CQUNsQyxLQUFLLFdBQVc7d0JBQ2YsY0FBYyxDQUNiLG1HQUFtRyxDQUNuRyxDQUFDO3dCQUNGLGtCQUFrQixHQUFHLFdBQVcsQ0FBQzt3QkFDakMsZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUM7d0JBQ3JDLFdBQVcsR0FBRyxJQUFJLENBQUM7d0JBQ25CLGNBQWMsQ0FBQyxrQkFBa0IsRUFBRTs0QkFDbEM7Z0NBQ0MsS0FBSyxFQUFFLE1BQU07Z0NBQ2IsS0FBSyxFQUFFLGFBQWE7NkJBQ3BCOzRCQUNEO2dDQUNDLEtBQUssRUFBRSxNQUFNO2dDQUNiLEtBQUssRUFBRSxXQUFXOzZCQUNsQjs0QkFDRDtnQ0FDQyxLQUFLLEVBQUUsS0FBSztnQ0FDWixLQUFLLEVBQUUsS0FBSzs2QkFDWjt5QkFDRCxDQUFDLENBQUM7d0JBQ0gsTUFBTTtvQkFDUCxLQUFLLGFBQWE7d0JBQ2pCLGNBQWMsQ0FDYixtR0FBbUcsQ0FDbkcsQ0FBQzt3QkFDRixrQkFBa0IsR0FBRyxhQUFhLENBQUM7d0JBQ25DLGdCQUFnQixHQUFHLGNBQWMsQ0FBQzt3QkFDbEMsV0FBVyxHQUFHLEtBQUssQ0FBQzt3QkFDcEIsY0FBYyxDQUFDLGtCQUFrQixFQUFFOzRCQUNsQztnQ0FDQyxLQUFLLEVBQUUscUJBQXFCO2dDQUM1QixLQUFLLEVBQUUscUJBQXFCOzZCQUM1Qjs0QkFDRDtnQ0FDQyxLQUFLLEVBQUUsZUFBZTtnQ0FDdEIsS0FBSyxFQUFFLGVBQWU7NkJBQ3RCOzRCQUNEO2dDQUNDLEtBQUssRUFBRSxhQUFhO2dDQUNwQixLQUFLLEVBQUUsYUFBYTs2QkFDcEI7eUJBQ0QsQ0FBQyxDQUFDO3dCQUNILE1BQU07b0JBQ1AsS0FBSyxnQkFBZ0I7d0JBQ3BCLGNBQWMsQ0FDYix5R0FBeUcsQ0FDekcsQ0FBQzt3QkFDRixrQkFBa0IsR0FBRyxnQkFBZ0IsQ0FBQzt3QkFDdEMsZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUM7d0JBQ3JDLFdBQVcsR0FBRyxLQUFLLENBQUM7d0JBQ3BCLGNBQWMsQ0FBQyxrQkFBa0IsRUFBRTs0QkFDbEM7Z0NBQ0MsS0FBSyxFQUFFLE1BQU07Z0NBQ2IsS0FBSyxFQUFFLGFBQWE7NkJBQ3BCOzRCQUNEO2dDQUNDLEtBQUssRUFBRSxNQUFNO2dDQUNiLEtBQUssRUFBRSxXQUFXOzZCQUNsQjs0QkFDRDtnQ0FDQyxLQUFLLEVBQUUsS0FBSztnQ0FDWixLQUFLLEVBQUUsS0FBSzs2QkFDWjt5QkFDRCxDQUFDLENBQUM7d0JBQ0gsTUFBTTtvQkFDUCxLQUFLLFdBQVc7d0JBQ2YsY0FBYyxDQUNiLGtHQUFrRyxDQUNsRyxDQUFDO3dCQUNGLGtCQUFrQixHQUFHLFdBQVcsQ0FBQzt3QkFDakMsZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUM7d0JBQ3JDLFdBQVcsR0FBRyxHQUFHLENBQUM7d0JBQ2xCLGNBQWMsQ0FBQyxrQkFBa0IsRUFBRTs0QkFDbEM7Z0NBQ0MsS0FBSyxFQUFFLE1BQU07Z0NBQ2IsS0FBSyxFQUFFLGFBQWE7NkJBQ3BCOzRCQUNEO2dDQUNDLEtBQUssRUFBRSxNQUFNO2dDQUNiLEtBQUssRUFBRSxXQUFXOzZCQUNsQjs0QkFDRDtnQ0FDQyxLQUFLLEVBQUUsS0FBSztnQ0FDWixLQUFLLEVBQUUsS0FBSzs2QkFDWjt5QkFDRCxDQUFDLENBQUM7d0JBQ0gsTUFBTTtnQkFDUixDQUFDO2dCQUNELFdBQVcsRUFBRSxDQUFDO1lBQ2YsQ0FBQztRQUNGLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksa0JBQWtCLEVBQUUsQ0FBQztRQUN4QixrQkFBa0IsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO1lBQ2xELElBQUksa0JBQWtCLEVBQUUsQ0FBQztnQkFDeEIsbUJBQW1CLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxDQUFDO2dCQUMvQyxJQUFJLG1CQUFtQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDcEMsY0FBYyxDQUNiLFdBQVcsa0JBQWtCLFdBQVcsZ0JBQWdCLG1CQUFtQixXQUFXLG1CQUFtQixtQkFBbUIsRUFBRSxDQUM5SCxDQUFDO2dCQUNILENBQUM7Z0JBQ0QsV0FBVyxFQUFFLENBQUM7WUFDZixDQUFDO1FBQ0YsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsV0FBVyxFQUFFLENBQUM7QUFDZixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxLQUFLLFVBQVUsb0JBQW9CO0lBQ2xDLElBQUksQ0FBQztRQUNKLGNBQWMsQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO1FBRXJELElBQUksQ0FBQyxDQUFDLE1BQU0sNEVBQXdCLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDekMsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQztZQUNwRSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25CLGNBQWMsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO1lBQzNELE1BQU0sS0FBSyxDQUFDO1FBQ2IsQ0FBQztRQUVELGFBQWEsR0FBRyxNQUFNLDJEQUFPLEVBQUUsQ0FBQztRQUNoQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNoQixhQUFhLEdBQUcsU0FBUyxDQUFDO1FBQzFCLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsY0FBYyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7QUFDRixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxLQUFLLFVBQVUseUJBQXlCO0lBQ3ZDLElBQUksYUFBYSxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDO1lBQ0osY0FBYyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7WUFDeEQsTUFBTSxhQUFhLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEMsQ0FBQztnQkFBUyxDQUFDO1lBQ1YsYUFBYSxHQUFHLFNBQVMsQ0FBQztZQUMxQixjQUFjLENBQUMsc0NBQXNDLENBQUMsQ0FBQztRQUN4RCxDQUFDO0lBQ0YsQ0FBQztBQUNGLENBQUM7QUFFRDs7R0FFRztBQUNILEtBQUssVUFBVSxnQkFBZ0I7SUFDOUIsSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUNuQixJQUFJLENBQUM7WUFDSixjQUFjLENBQ2IsV0FBVyxrQkFBa0IsV0FBVyxnQkFBZ0IsbUJBQW1CLFdBQVcsbUJBQW1CLG1CQUFtQixFQUFFLENBQzlILENBQUM7WUFFRixJQUFJLE1BQXNCLENBQUM7WUFFM0IsUUFBUSxrQkFBa0IsRUFBRSxDQUFDO2dCQUM1QixLQUFLLGFBQWE7b0JBQ2pCLE1BQU0sR0FBRzt3QkFDUixJQUFJLEVBQUUsa0JBQWtCO3dCQUN4QixPQUFPLEVBQUU7NEJBQ1IsSUFBSSxFQUFFLGdCQUFnQjs0QkFDdEIsSUFBSSxFQUFFLG1CQUFtQjs0QkFDekIsRUFBRSxFQUFFLEVBQUU7eUJBQ047cUJBQ0QsQ0FBQztvQkFDRixNQUFNO2dCQUNQO29CQUNDLE1BQU0sR0FBRzt3QkFDUixJQUFJLEVBQUUsa0JBQWtCO3dCQUN4QixPQUFPLEVBQUU7NEJBQ1IsSUFBSSxFQUFFLGdCQUFnQjs0QkFDdEIsRUFBRSxFQUFFO2dDQUNILE1BQU0sRUFBRSxtQkFBbUI7NkJBQzNCO3lCQUNEO3FCQUNELENBQUM7b0JBQ0YsTUFBTTtZQUNSLENBQUM7WUFFRCxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNoQixjQUFjLENBQUMsdUNBQXVDLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0UsQ0FBQztJQUNGLENBQUM7U0FBTSxDQUFDO1FBQ1AsY0FBYyxDQUFDLG9GQUFvRixDQUFDLENBQUM7SUFDdEcsQ0FBQztBQUNGLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsV0FBVztJQUNuQixNQUFNLFdBQVcsR0FBRyxhQUFhLEtBQUssU0FBUyxDQUFDO0lBQ2hELElBQUksVUFBVSxFQUFFLENBQUM7UUFDaEIsVUFBVSxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUM7SUFDbkMsQ0FBQztJQUNELElBQUksYUFBYSxFQUFFLENBQUM7UUFDbkIsYUFBYSxDQUFDLFFBQVEsR0FBRyxDQUFDLFdBQVcsQ0FBQztJQUN2QyxDQUFDO0lBQ0QsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZCLGlCQUFpQixDQUFDLFFBQVEsR0FBRyxDQUFDLFdBQVcsQ0FBQztJQUMzQyxDQUFDO0lBQ0QsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO1FBQ3hCLGtCQUFrQixDQUFDLFFBQVEsR0FBRyxDQUFDLFdBQVcsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFDRCxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ2QsUUFBUSxDQUFDLFFBQVEsR0FBRyxDQUFDLFdBQVcsSUFBSSxtQkFBbUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0lBQ3RFLENBQUM7QUFDRixDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsU0FBUyxjQUFjLENBQUMsSUFBWTtJQUNuQyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ2YsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLFNBQVMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxNQUFNLENBQUM7UUFDOUQsU0FBUyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDO0lBQzlDLENBQUM7QUFDRixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQVMsYUFBYSxDQUFDLEdBQVk7SUFDbEMsSUFBSSxHQUFHLFlBQVksS0FBSyxFQUFFLENBQUM7UUFDMUIsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDO0lBQ3BCLENBQUM7U0FBTSxJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsRUFBRSxDQUFDO1FBQ3BDLE9BQU8sR0FBRyxDQUFDO0lBQ1osQ0FBQztJQUVELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFTLFNBQVM7SUFDakIsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUNmLFNBQVMsQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7QUFDRixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILFNBQVMsY0FBYyxDQUFDLE1BQWdDLEVBQUUsTUFBMEM7SUFDbkcsSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUNaLE1BQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0MsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDZixHQUFHLENBQUMsSUFBSSxHQUFHLHFCQUFxQixDQUFDO1FBQ2pDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFbkIsS0FBSyxNQUFNLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUMxQixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUN6QixNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDeEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2QixDQUFDO0lBQ0YsQ0FBQztBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlZ3JhdGUtd2l0aC1ibG9vbWJlcmctYmFzaWMvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL2Jsb29tYmVyZy9vcGVuZmluLmJsb29tYmVyZy5tanMiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRlLXdpdGgtYmxvb21iZXJnLWJhc2ljL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2ludGVncmF0ZS13aXRoLWJsb29tYmVyZy1iYXNpYy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRlLXdpdGgtYmxvb21iZXJnLWJhc2ljL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRlLXdpdGgtYmxvb21iZXJnLWJhc2ljL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vaW50ZWdyYXRlLXdpdGgtYmxvb21iZXJnLWJhc2ljLy4vY2xpZW50L3NyYy9iYmd0ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBlPXtkOih0LG4pPT57Zm9yKHZhciByIGluIG4pZS5vKG4scikmJiFlLm8odCxyKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7ZW51bWVyYWJsZTohMCxnZXQ6bltyXX0pfSxvOihlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sdD17fTtlLmQodCx7TVM6KCk9PkFwaUVycm9yLHhjOigpPT5BcHBOb3RBdXRob3JpemVkRXJyb3IsQlQ6KCk9PkludGVyb3BFcnJvcixlejooKT0+VGVybWluYWxDb21tYW5kRXJyb3IseVc6KCk9PlRlcm1pbmFsQ29ubmVjdGlvbkVycm9yLCRqOigpPT5aLFUkOigpPT5pLFU3OigpPT5jLFU1OigpPT5ELEdTOigpPT5NLGhOOigpPT55LFljOigpPT52LGVFOigpPT5FLEMxOigpPT5TfSk7Y29uc3Qgbj1lPT57aWYoZSBpbnN0YW5jZW9mIEFwaUVycm9yKXJldHVybiBlO3N3aXRjaCghMCl7Y2FzZSBlPy5tZXNzYWdlPy5pbmRleE9mKFwiQVBQTElDQVRJT05fVkFMSURBVElPTlwiKT49MDpyZXR1cm4gbmV3IEFwcE5vdEF1dGhvcml6ZWRFcnJvcjtjYXNlIGU/Lm1lc3NhZ2U/LmluZGV4T2YoXCJJTlZBTElEX0NPTU1BTkRcIik+PTA6Y2FzZSBlPy5tZXNzYWdlPy5pbmRleE9mKFwiSU5WQUxJRF9HUk9VUF9WQUxVRVwiKT49MDpjYXNlIGU/Lm1lc3NhZ2U/LmluZGV4T2YoXCJNTkVNT05JQ19OT1RfQUxMT1dFRFwiKT49MDpyZXR1cm4gbmV3IFRlcm1pbmFsQ29tbWFuZEVycm9yKHZvaWQgMCxlKTtjYXNlXCJDb25uZWN0aW9uIEVycm9yXCI9PT1lPy5tZXNzYWdlOnJldHVybiBuZXcgVGVybWluYWxDb25uZWN0aW9uRXJyb3I7ZGVmYXVsdDpyZXR1cm4gbmV3IEFwaUVycm9yKHZvaWQgMCxlKX19O2NsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZT1cIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkXCIsdCl7c3VwZXIoZSksdCYmKHRoaXMuaW5uZXJFcnJvcj10KSx0aGlzLnN0YWNrPXRoaXMuc3RhY2s/LnJlcGxhY2UoL14oXFx3KkVycm9yKS8sYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWApfX1jbGFzcyBBcHBOb3RBdXRob3JpemVkRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3RvcihlPVwiQXBwIG5vdCBhdXRob3JpemVkIHRvIHVzZSBUZXJtaW5hbCBDb25uZWN0IEFQSVwiLHQpe3N1cGVyKGUsdCl9fWNsYXNzIEludGVyb3BFcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKGU9XCJGYWlsZWQgdG8gZXhlY3V0ZSB0aGUgaW50ZXJvcCBmdW5jdGlvblwiLHQpe3N1cGVyKGUsdCl9fWNsYXNzIFRlcm1pbmFsQ29tbWFuZEVycm9yIGV4dGVuZHMgQXBpRXJyb3J7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byBleGVjdXRlIHRoZSB0ZXJtaW5hbCBjb21tYW5kXCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgVGVybWluYWxDb25uZWN0aW9uRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3RvcihlPVwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gbG9jYWwgdGVybWluYWwgc2VydmljZVwiLHQpe3N1cGVyKGUsdCl9fWNvbnN0IHI9XCIxLjIuMFwiO2xldCBzPSExO2NvbnN0IG89XCJbQG9wZW5maW4vYmxvb21iZXJnXVwiLGk9KCk9PntzPSExfSxjPSgpPT57cz0hMCx1KGB2JHtyfWApfSxhPShlLHQpPT57cyYmKGUuaW5uZXJFcnJvcj9jb25zb2xlLmVycm9yKHQ/YCR7b30gJHt0fWA6byxlLFwiXFxuXFxuKGlubmVyKVwiLGUuaW5uZXJFcnJvcik6Y29uc29sZS5lcnJvcih0P2Ake299ICR7dH1gOm8sZSkpfSx1PSguLi5lKT0+e3MmJmNvbnNvbGUubG9nKG8sLi4uZSl9LGw9KC4uLmUpPT57cyYmY29uc29sZS53YXJuKG8sLi4uZSl9O1widW5kZWZpbmVkXCI9PXR5cGVvZiBmaW4mJk9iamVjdC5hc3NpZ24od2luZG93LHtmaW46e319KSxPYmplY3QuYXNzaWduKGZpbix7SW50ZWdyYXRpb25zOntCbG9vbWJlcmc6e2VuYWJsZUxvZ2dpbmc6YyxkaXNhYmxlTG9nZ2luZzppfX19KTtjbGFzcyBwe2NvbnN0cnVjdG9yKGUsdCxuKXt0aGlzLl9sYXN0VXBkYXRlPTAsdGhpcy5fc2VjdXJpdHlDYWNoZUV4cGlyYXRpb249MTVlMyx0aGlzLl9zZWN1cml0eUNhY2hlPVwiXCIsdGhpcy5fbmFtZT10LHRoaXMuX3R5cGU9bix0aGlzLl90ZXJtaW5hbFByb3h5PWV9Z2V0IG5hbWUoKXtyZXR1cm4gdGhpcy5fbmFtZX1nZXQgdHlwZSgpe3JldHVybiB0aGlzLl90eXBlfWdldFNlY3VyaXR5KCl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMuX3Rlcm1pbmFsUHJveHkuZ2V0QWxsR3JvdXBzKChuPT57Y29uc3Qgcj1uLmZpbmQoKGU9PmUubmFtZT09PXRoaXMuX25hbWUpKTtyPyh0aGlzLl9zZWN1cml0eUNhY2hlPXIuc2VjdXJpdHksdGhpcy5fbGFzdFVwZGF0ZT0obmV3IERhdGUpLmdldFRpbWUoKSxlKHRoaXMuX3NlY3VyaXR5Q2FjaGUpKTp0KG5ldyBFcnJvcihgR3JvdXAgJHtuYW1lfSBpcyBub3QgZm91bmQuYCkpfSksKChlLG4pPT57dCh0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLG4pKX0pKX0pKX1nZXRDYWNoZWRTZWN1cml0eSgpe3JldHVybiBuZXcgUHJvbWlzZSgoYXN5bmMoZSx0KT0+e2NvbnN0IG49KG5ldyBEYXRlKS5nZXRUaW1lKCk7KCF0aGlzLl9zZWN1cml0eUNhY2hlfHwhdGhpcy5fbGFzdFVwZGF0ZXx8bi10aGlzLl9sYXN0VXBkYXRlPnRoaXMuX3NlY3VyaXR5Q2FjaGVFeHBpcmF0aW9uKSYmYXdhaXQgdGhpcy5nZXRTZWN1cml0eSgpLGUodGhpcy5fc2VjdXJpdHlDYWNoZSl9KSl9c2V0U2VjdXJpdHkoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKChuLHIpPT57dGhpcy5fdGVybWluYWxQcm94eS5zZXRHcm91cFNlY3VyaXR5KCgoKT0+e3RoaXMuX3NlY3VyaXR5Q2FjaGU9ZSx0aGlzLl9sYXN0VXBkYXRlPShuZXcgRGF0ZSkuZ2V0VGltZSgpLG4oKX0pLCgoZSx0KT0+e3IodGhpcy5nZXRFcnJvckZyb21FcnJvck1lc3NhZ2UoZSx0KSl9KSx0aGlzLl9uYW1lLGUsdCl9KSl9fWZ1bmN0aW9uIGQoZSl7Y29uc3QgdD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7bGV0IG4scixzLG8saSxjLGEsdT1cIlwiLGw9MDtmb3IoO2w8ZS5sZW5ndGg7KW49ZS5jaGFyQ29kZUF0KGwrKykscj1lLmNoYXJDb2RlQXQobCsrKSxzPWUuY2hhckNvZGVBdChsKyspLG89bj4+MixpPSgzJm4pPDw0fHI+PjQsYz0oMTUmcik8PDJ8cz4+NixhPTYzJnMsaXNOYU4ocik/Yz1hPTY0OmlzTmFOKHMpJiYoYT02NCksdT11K3QuY2hhckF0KG8pK3QuY2hhckF0KGkpK3QuY2hhckF0KGMpK3QuY2hhckF0KGEpO3JldHVybiB1fWNsYXNzIGd7Y29uc3RydWN0b3IoKXt0aGlzLl9zZXFOdW1iZXI9MCx0aGlzLl9pc0Nvbm5lY3Rpbmc9ITEsdGhpcy5faXNDb25uZWN0ZWQ9ITEsdGhpcy5faXNSZWdpc3RlcmVkPSExLHRoaXMuX3Nlc3Npb25JZD1cIlwiLHRoaXMuX3F1ZXVlZFJlcXVlc3RzPVtdLHRoaXMuX3BlbmRpbmdSZXF1ZXN0cz17fSx0aGlzLl9taW5Qb3J0UmFuZ2U9NTE4MDAsdGhpcy5fbWF4UG9ydFJhbmdlPTUxODAwLHRoaXMuX2N1cnJlbnRQb3J0PTUxODAwLHRoaXMuX3Jlc3BvbnNlVGltZW91dD0xNWUzLHRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnM9e30sdGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnM9e30sdGhpcy5zZW5kUmVtb3RlTWVzc2FnZT0oZSx0LG4scik9PntpZih0aGlzLl9pc1JlZ2lzdGVyZWR8fGUucmVnaXN0ZXJ8fHRoaXMuc2VuZFJlbW90ZU1lc3NhZ2Uoe3JlZ2lzdGVyOnt9fSwxMixudWxsLGNvbnNvbGUuZXJyb3IpLHRoaXMuX3Nlc3Npb25JZHx8KHRoaXMuX3Nlc3Npb25JZD1geyR7ZnVuY3Rpb24oKXtjb25zdCBlPVwiMDEyMzQ1Njc4OUFCQ0RFRlwiLnNwbGl0KFwiXCIpO2xldCB0LG49W10scj1NYXRoLnJhbmRvbTtuWzhdPW5bMTNdPW5bMThdPW5bMjNdPVwiLVwiLG5bMTRdPVwiNFwiO2Zvcih2YXIgcz0wO3M8MzY7cysrKW5bc118fCh0PTB8MTYqcigpLG5bc109ZVsxOT09cz8zJnR8ODoxNSZ0XSk7cmV0dXJuIG4uam9pbihcIlwiKX0oKX19YCksZS5zZXRHcm91cFZhbHVlJiYhZS5zZXRHcm91cFZhbHVlLmNvb2tpZSYmKGUuc2V0R3JvdXBWYWx1ZS5jb29raWU9dGhpcy5fc2Vzc2lvbklkKSxlLnN1YnNjcmliZUdyb3VwRXZlbnRzKXtjb25zdCB0PWUuc3Vic2NyaWJlR3JvdXBFdmVudHMuc3ViSWQ7ZGVsZXRlIGUuc3Vic2NyaWJlR3JvdXBFdmVudHMuc3ViSWQscj1lPT57ZGVsZXRlIHRoaXMuX2dyb3VwRXZlbnRTdWJzY3JpcHRpb25zW3RdLHImJnIoZSl9fWNvbnN0IHM9e3Nlc3Npb25JZDp0aGlzLl9zZXNzaW9uSWQsY29ycmVsYXRpb25JZDorK3RoaXMuX3NlcU51bWJlcixyZXF1ZXN0OmV9LG89SlNPTi5zdHJpbmdpZnkocyksaT10PjEyLGM9aT97YXBwSWQ6cy5hcHBJZCxzZXNzaW9uSWQ6cy5zZXNzaW9uSWQsY29ycmVsYXRpb25JZDpzLmNvcnJlbGF0aW9uSWQscGF5bG9hZFNjaGVtYU5hbWU6XCJhcDNnX2ludGVybmFsXCIscGF5bG9hZFNjaGVtYVZlcnNpb246MixwYXlsb2FkTXNnVHlwZTp0LHBheWxvYWQ6ZChvKX06dm9pZCAwLGE9e2VudmVsb3BlOntzY2hlbWFOYW1lOmk/XCJibHBfbHBhZF9tc2dcIjpcImJscF9yZW1vdGVfY29udHJvbGxlclwiLHNjaGVtYVZlcnNpb246MixtZXNzYWdlOmk/SlNPTi5zdHJpbmdpZnkoYyk6b30sY29ycmVsYXRpb25JZDpzLmNvcnJlbGF0aW9uSWQsZXhwZWN0UmVzcG9uc2U6ITAsb25zdWNjZXNzOm4sb25lcnJvcjpyfTt0aGlzLl9wZW5kaW5nUmVxdWVzdHNbcy5jb3JyZWxhdGlvbklkXT1hLHRoaXMuX2lzQ29ubmVjdGVkP3RoaXMuc2VuZFJlcXVlc3QoYSk6KHRoaXMuX3F1ZXVlZFJlcXVlc3RzLnB1c2goYSksdGhpcy5jb25uZWN0KCkpfX1hZGRFdmVudExpc3RlbmVyKGUpe2NvbnN0IHQ9T2JqZWN0LmtleXModGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnMpLmxlbmd0aCsxO3JldHVybiB0aGlzLl9ncm91cEV2ZW50U3Vic2NyaXB0aW9uc1t0XT1lLHR9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlKXtyZXR1cm4gZGVsZXRlIHRoaXMuX2dyb3VwRXZlbnRTdWJzY3JpcHRpb25zW2VdLE9iamVjdC5rZXlzKHRoaXMuX2dyb3VwRXZlbnRTdWJzY3JpcHRpb25zKS5sZW5ndGh9YWRkRGlzY29ubmVjdEV2ZW50TGlzdGVuZXIoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyh0aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zKS5sZW5ndGgrMTtyZXR1cm4gdGhpcy5fZGlzY29ubmVjdEV2ZW50U3Vic2NyaXB0aW9uc1t0XT1lLHR9cmVtb3ZlRGlzY29ubmVjdEV2ZW50TGlzdGVuZXIoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyh0aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zKS5sZW5ndGg7ZGVsZXRlIHRoaXMuX2Rpc2Nvbm5lY3RFdmVudFN1YnNjcmlwdGlvbnNbZV07cmV0dXJuIHQhPT1PYmplY3Qua2V5cyh0aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zKS5sZW5ndGh9c2VuZFJlcXVlc3QoZSl7Y29uc3QgdD1KU09OLnN0cmluZ2lmeShlLmVudmVsb3BlKTt0aGlzLl93ZWJTb2NrZXQmJnRoaXMuX3dlYlNvY2tldC5zZW5kKHQpLGUuZXhwZWN0UmVzcG9uc2U/c2V0VGltZW91dCgoKCk9Pnt0aGlzLl9wZW5kaW5nUmVxdWVzdHNbZS5jb3JyZWxhdGlvbklkXSYmKGRlbGV0ZSB0aGlzLl9wZW5kaW5nUmVxdWVzdHNbZS5jb3JyZWxhdGlvbklkXSxlLm9uZXJyb3ImJmUub25lcnJvcigwLFwiUmVzcG9uc2UgVGltZW91dFwiKSl9KSx0aGlzLl9yZXNwb25zZVRpbWVvdXQpOmRlbGV0ZSB0aGlzLl9wZW5kaW5nUmVxdWVzdHNbZS5jb3JyZWxhdGlvbklkXX1jb25uZWN0KCl7dHJ5e2lmKHRoaXMuX2lzQ29ubmVjdGluZylyZXR1cm47dGhpcy5faXNDb25uZWN0aW5nPSEwLHRoaXMuX3dlYlNvY2tldD1uZXcgV2ViU29ja2V0KFwid3M6Ly9sb2NhbGhvc3Q6XCIrdGhpcy5fY3VycmVudFBvcnQsXCJ0ZXJtaW5hbF9hcGlcIiksdGhpcy5fd2ViU29ja2V0Lm9ub3Blbj10aGlzLm9uV2ViU29ja2V0T3Blbi5iaW5kKHRoaXMpLHRoaXMuX3dlYlNvY2tldC5vbm1lc3NhZ2U9dGhpcy5vbldlYlNvY2tldE1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLl93ZWJTb2NrZXQub25jbG9zZT10aGlzLm9uV2ViU29ja2V0Q2xvc2UuYmluZCh0aGlzKSx0aGlzLl93ZWJTb2NrZXQub25lcnJvcj10aGlzLm9uV2ViU29ja2V0RXJyb3IuYmluZCh0aGlzKX1jYXRjaChlKXt0aGlzLl93ZWJTb2NrZXQ9dm9pZCAwLHRoaXMuX3F1ZXVlZFJlcXVlc3RzPVtdLHRoaXMuY2FuY2VsUGVuZGluZ1JlcXVlc3RzKFwiV2ViU29ja2V0IEV4Y2VwdGlvbiBcIitlKSxjb25zb2xlLmVycm9yKGUpfX1jYW5jZWxQZW5kaW5nUmVxdWVzdHMoZSl7dGhpcy5faXNDb25uZWN0ZWQ9ITEsdGhpcy5faXNDb25uZWN0aW5nPSExLHRoaXMuX2lzUmVnaXN0ZXJlZD0hMSx0aGlzLl9zZXNzaW9uSWQ9XCJcIjtmb3IobGV0IHQ9MDt0PHRoaXMuX3F1ZXVlZFJlcXVlc3RzLmxlbmd0aDt0Kz0xKXtjb25zdCBuPXRoaXMuX3F1ZXVlZFJlcXVlc3RzW3RdO24mJm4ub25lcnJvciYmbi5vbmVycm9yKDAsZSl9dGhpcy5fcXVldWVkUmVxdWVzdHM9W107Zm9yKGxldCB0IGluIHRoaXMuX3BlbmRpbmdSZXF1ZXN0cyl7Y29uc3Qgbj10aGlzLl9wZW5kaW5nUmVxdWVzdHNbdF07biYmbi5vbmVycm9yJiZuLm9uZXJyb3IoMCxlKX10aGlzLl9wZW5kaW5nUmVxdWVzdHM9e319b25XZWJTb2NrZXRDbG9zZShlKXtpZihjb25zb2xlLmxvZyhcIldlYlNvY2tldCBDbG9zZWQ7IFJlYXNvbjogXCIrZS5yZWFzb24rXCIsIENvZGU6IFwiK2UuY29kZStcIiwgV2FzQ2xlYW46IFwiK2Uud2FzQ2xlYW4pLHRoaXMuX2lzQ29ubmVjdGVkKXtjb25zdCB0PXt9O2UmJnZvaWQgMCE9PWUucmVhc29uJiYodC5yZWFzb249ZS5yZWFzb24pLGUmJnZvaWQgMCE9PWUuY29kZSYmKHQuY29kZT1lLmNvZGUpLGUmJnZvaWQgMCE9PWUud2FzQ2xlYW4mJih0Lndhc0NsZWFuPWUud2FzQ2xlYW4pLHRoaXMuX2N1cnJlbnRQb3J0PXRoaXMuX21pblBvcnRSYW5nZSx0aGlzLmNhbmNlbFBlbmRpbmdSZXF1ZXN0cyh7c3RhdHVzOlwiZXJyb3JcIixtZXNzYWdlOlwiQ29ubmVjdGlvbiBDbG9zZWRcIixkZXRhaWxzOnR9KTtmb3IobGV0IGUgaW4gdGhpcy5fZGlzY29ubmVjdEV2ZW50U3Vic2NyaXB0aW9ucyl7Y29uc3QgdD10aGlzLl9kaXNjb25uZWN0RXZlbnRTdWJzY3JpcHRpb25zW2VdO3QmJnQoZSl9fX1vbldlYlNvY2tldEVycm9yKCl7aWYoY29uc29sZS5sb2coXCJXZWJTb2NrZXQgRXJyb3I7ICByZWFkeVN0YXRlOiBcIisodGhpcy5fd2ViU29ja2V0JiZ0aGlzLl93ZWJTb2NrZXQucmVhZHlTdGF0ZSkpLHRoaXMuX2lzQ29ubmVjdGluZz0hMSx0aGlzLl9jdXJyZW50UG9ydDx0aGlzLl9tYXhQb3J0UmFuZ2UpdGhpcy5fY3VycmVudFBvcnQrPTEsdGhpcy5jb25uZWN0KCk7ZWxzZXt0aGlzLl9jdXJyZW50UG9ydD10aGlzLl9taW5Qb3J0UmFuZ2U7Y29uc3QgZT17cmVhZHlTdGF0ZTp0aGlzLl93ZWJTb2NrZXQmJnRoaXMuX3dlYlNvY2tldC5yZWFkeVN0YXRlfTt0aGlzLmNhbmNlbFBlbmRpbmdSZXF1ZXN0cyh7c3RhdHVzOlwiZXJyb3JcIixtZXNzYWdlOlwiQ29ubmVjdGlvbiBFcnJvclwiLGRldGFpbHM6ZX0pfX1vbldlYlNvY2tldE9wZW4oKXtmb3IodGhpcy5faXNDb25uZWN0ZWQ9ITAsdGhpcy5faXNDb25uZWN0aW5nPSExO3RoaXMuX3F1ZXVlZFJlcXVlc3RzLmxlbmd0aD4wOyl0aGlzLnNlbmRSZXF1ZXN0KHRoaXMuX3F1ZXVlZFJlcXVlc3RzLnNoaWZ0KCkpfW9uV2ViU29ja2V0TWVzc2FnZShlKXt2YXIgdD1lJiZlLmRhdGE/ZS5kYXRhOlwibnVsbFwiLG49SlNPTi5wYXJzZSh0KSxyPW4/SlNPTi5wYXJzZShuLm1lc3NhZ2UpOm51bGwscz1yJiZyLnJlc3BvbnNlP3RoaXMuX3BlbmRpbmdSZXF1ZXN0c1tyLmNvcnJlbGF0aW9uSWRdOm51bGw7cyYmZGVsZXRlIHRoaXMuX3BlbmRpbmdSZXF1ZXN0c1tyLmNvcnJlbGF0aW9uSWRdLHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHMsci5yZXNwb25zZSl9Z2V0R3JvdXBJbmZvKGUpe3JldHVybiBlP3tuYW1lOmUubmFtZSx0eXBlOmUudHlwZSxzZWN1cml0eTpcInNlY3VyaXR5XCI9PT1lLnR5cGUmJmUudmFsdWU/ZS52YWx1ZTp2b2lkIDB9Ont9fXByb2Nlc3NSZXNwb25zZShlLHQpe2lmKHQuc3VjY2VzcyllLm9uc3VjY2VzcyYmZS5vbnN1Y2Nlc3MoKTtlbHNlIGlmKHQucmVnaXN0cmF0aW9uQ29tcGxldGUpdGhpcy5faXNSZWdpc3RlcmVkPSEwLGNvbnNvbGUubG9nKFwiUmVnaXN0cmF0aW9uIENvbXBsZXRlOyBTZXNzaW9uOiBcIit0aGlzLl9zZXNzaW9uSWQpLGUub25zdWNjZXNzJiZlLm9uc3VjY2VzcygpO2Vsc2UgaWYodC5nZXRBbGxHcm91cHMpe2NvbnN0IG49dC5nZXRBbGxHcm91cHMuZ3JvdXA7ZS5vbnN1Y2Nlc3MmJmUub25zdWNjZXNzKG4/bi5tYXAodGhpcy5nZXRHcm91cEluZm8pOltdKX1lbHNlIGlmKHQuZ3JvdXBWYWx1ZSllLm9uc3VjY2VzcyYmZS5vbnN1Y2Nlc3ModGhpcy5nZXRHcm91cEluZm8odC5ncm91cFZhbHVlLmdyb3VwKSk7ZWxzZSBpZih0Lmdyb3VwRXZlbnQpe2lmKHQuZ3JvdXBFdmVudC52YWx1ZUNoYW5nZWQpe2NvbnN0IGU9dC5ncm91cEV2ZW50LnZhbHVlQ2hhbmdlZC5ncm91cCxuPXQuZ3JvdXBFdmVudC52YWx1ZUNoYW5nZWQuY29va2llPT09dGhpcy5fc2Vzc2lvbklkP3ZvaWQgMDp0Lmdyb3VwRXZlbnQudmFsdWVDaGFuZ2VkLmNvb2tpZTtmb3IobGV0IHQgaW4gdGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnMpe2NvbnN0IHI9dGhpcy5fZ3JvdXBFdmVudFN1YnNjcmlwdGlvbnNbdF07ciYmcihlLG4pfX19ZWxzZSBlLm9uZXJyb3ImJmUub25lcnJvcih0LmZhaWx1cmUmJnQuZmFpbHVyZS5jb2RlfHwwLHQuZmFpbHVyZT9gJHt0LmZhaWx1cmUubWVzc2FnZX0gJHt0LmZhaWx1cmUuaHVtYW5NZXNzYWdlfWA6XCJVbmtub3duIFJlc3BvbnNlXCIpfX1jbGFzcyBoe2NvbnN0cnVjdG9yKCl7dGhpcy5fd2ViU29ja2V0PW5ldyBnfXJ1bkZ1bmN0aW9uKGUsdCxuLHIscyxvLGksYyl7bGV0IGE9XCJcIjtpZihuJiZuLmxlbmd0aD8xIT09ciYmMiE9PXImJjMhPT1yJiY0IT09ciYmNSE9PXImJihhPVwiSW52YWxpZCBPciBNaXNzaW5nIFBhcmFtZXRlcjogcGFuZWxcIik6YT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IG1uZW1vbmljXCIsYSlyZXR1cm4gY29uc29sZS5lcnJvcihcInJ1bkZ1bmN0aW9uSW5QYW5lbCBlcnJvcjogXCIrYSksdm9pZCh0JiZ0KDAsYSkpO2NvbnN0IHU9e3J1bkZ1bmN0aW9uSW5QYW5lbDp7bW5lbW9uaWM6bixwYW5lbDpyfX07aWYocyl7Y29uc3QgZT1bXTtlLnB1c2gocyksbyYmZS5wdXNoKG8pLHUucnVuRnVuY3Rpb25JblBhbmVsLnNlY3VyaXRpZXM9ZX1pJiYodS5ydW5GdW5jdGlvbkluUGFuZWwudGFpbHM9aSksYyYmKHUucnVuRnVuY3Rpb25JblBhbmVsLmFwcGxpY2F0aW9uUHJvcGVydGllcz1jKSx0aGlzLl93ZWJTb2NrZXQuc2VuZFJlbW90ZU1lc3NhZ2UodSwwLGUsdCl9Z2V0QWxsR3JvdXBzKGUsdCl7dGhpcy5fd2ViU29ja2V0LnNlbmRSZW1vdGVNZXNzYWdlKHtnZXRBbGxHcm91cHM6e319LDEzLGUsdCl9Z2V0R3JvdXAoZSx0LG4pe2lmKCFufHwhbi5sZW5ndGgpe2NvbnN0IGU9XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBuYW1lXCI7cmV0dXJuIGNvbnNvbGUuZXJyb3IoZSksdm9pZCh0JiZ0KDAsZSkpfXRoaXMuX3dlYlNvY2tldC5zZW5kUmVtb3RlTWVzc2FnZSh7Z2V0R3JvdXBWYWx1ZTp7bmFtZTpufX0sMTUsZSx0KX1zZXRHcm91cFNlY3VyaXR5KGUsdCxuLHIscyl7bGV0IG89XCJcIjtpZihuJiZuLmxlbmd0aD9yJiZyLmxlbmd0aHx8KG89XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBzZWN1cml0eVwiKTpvPVwiSW52YWxpZCBPciBNaXNzaW5nIFBhcmFtZXRlcjogbmFtZVwiLG8pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJzZXRHcm91cENvbnRleHQgZXJyb3I6IFwiK28pLHZvaWQodCYmdCgwLG8pKTt0aGlzLl93ZWJTb2NrZXQuc2VuZFJlbW90ZU1lc3NhZ2Uoe3NldEdyb3VwVmFsdWU6e25hbWU6bix2YWx1ZTpyLGNvb2tpZTpzfX0sMTQsZSx0KX1zdWJzY3JpYmVHcm91cEV2ZW50cyhlLHQsbil7aWYoIW4pe2NvbnN0IGU9XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBjYWxsYmFja1wiO3JldHVybiBjb25zb2xlLmVycm9yKFwic3Vic2NyaWJlR3JvdXBFdmVudHMgZXJyb3I6IFwiK2UpLHZvaWQodCYmdCgwLGUpKX1jb25zdCByPXRoaXMuX3dlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKG4pOzE9PT1yP3RoaXMuX3dlYlNvY2tldC5zZW5kUmVtb3RlTWVzc2FnZSh7c3Vic2NyaWJlR3JvdXBFdmVudHM6e3N1YklkOnJ9fSwxNiwoKCk9PntlJiZlKHIpfSksKGU9Pnt0JiZ0KDAsZSl9KSk6ZSYmZShyKX11bnN1YnNjcmliZUdyb3VwRXZlbnRzKGUsdCxuKXtpZighbil7Y29uc3QgZT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IGNvb2tpZVwiO3JldHVybiBjb25zb2xlLmVycm9yKFwidW5zdWJzY3JpYmVHcm91cEV2ZW50cyBlcnJvcjogXCIrZSksdm9pZCh0JiZ0KDAsZSkpfTA9PT10aGlzLl93ZWJTb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuKT90aGlzLl93ZWJTb2NrZXQuc2VuZFJlbW90ZU1lc3NhZ2Uoe3Vuc3Vic2NyaWJlR3JvdXBFdmVudHM6e319LDE3LGUsdCk6ZSYmZSgpfXN1YnNjcmliZURpc2Nvbm5lY3RFdmVudChlLHQsbil7aWYoIW4pe2NvbnN0IGU9XCJJbnZhbGlkIE9yIE1pc3NpbmcgUGFyYW1ldGVyOiBjYWxsYmFja1wiO3JldHVybiBjb25zb2xlLmVycm9yKFwic3Vic2NyaWJlRGlzY29ubmVjdEV2ZW50IGVycm9yOiBcIitlKSx0JiZ0KDAsZSksbnVsbH1jb25zdCByPXRoaXMuX3dlYlNvY2tldC5hZGREaXNjb25uZWN0RXZlbnRMaXN0ZW5lcihuKTtyZXR1cm4gZSYmZShyKSxyfXVuc3Vic2NyaWJlRGlzY29ubmVjdEV2ZW50KGUsdCxuKXtpZighbil7Y29uc3QgZT1cIkludmFsaWQgT3IgTWlzc2luZyBQYXJhbWV0ZXI6IGNvb2tpZVwiO3JldHVybiBjb25zb2xlLmVycm9yKFwidW5zdWJzY3JpYmVEaXNjb25uZWN0RXZlbnQgZXJyb3I6IFwiK2UpLHQmJnQoMCxlKSwhMX1yZXR1cm4gdGhpcy5fd2ViU29ja2V0LnJlbW92ZURpc2Nvbm5lY3RFdmVudExpc3RlbmVyKG4pPyhlJiZlKCksITApOih0JiZ0KDAsXCJJbnZhbGlkIFN1YnNjcmlwdGlvblwiKSwhMSl9fWNsYXNzIG17Y29uc3RydWN0b3IoKXt0aGlzLnJ1bkZ1bmN0aW9uPXdpbmRvdy5iYi5hcHBzLnRjLnJ1bkZ1bmN0aW9uLHRoaXMuZ2V0R3JvdXA9d2luZG93LmJiLmFwcHMudGMuZ2V0R3JvdXAsdGhpcy5zZXRHcm91cFNlY3VyaXR5PXdpbmRvdy5iYi5hcHBzLnRjLnNldEdyb3VwU2VjdXJpdHksdGhpcy5nZXRBbGxHcm91cHM9d2luZG93LmJiLmFwcHMudGMuZ2V0QWxsR3JvdXBzLHRoaXMuc3Vic2NyaWJlR3JvdXBFdmVudHM9d2luZG93LmJiLmFwcHMudGMuc3Vic2NyaWJlR3JvdXBFdmVudHMsdGhpcy51bnN1YnNjcmliZUdyb3VwRXZlbnRzPXdpbmRvdy5iYi5hcHBzLnRjLnVuc3Vic2NyaWJlR3JvdXBFdmVudHN9c3Vic2NyaWJlRGlzY29ubmVjdEV2ZW50KGUsdCxuKXt9dW5zdWJzY3JpYmVEaXNjb25uZWN0RXZlbnQoZSx0LG4pe319Y2xhc3MgYntjb25zdHJ1Y3RvcihlPSFmdW5jdGlvbigpe3JldHVybiEhKHdpbmRvdy5iYiYmd2luZG93LmJiLmFwcHMmJndpbmRvdy5iYi5hcHBzLmFwcCYmd2luZG93LmJiLmFwcHMuZXZlbnQpfSgpKXt0aGlzLl9oZWxwZXJTZXRHcm91cFZhbHVlcz1lPT57Y29uc3QgdD1uZXcgcCh0aGlzLl90ZXJtaW5hbFByb3h5LGUubmFtZSxlLnR5cGUpO3JldHVybiB0Ll9zZWN1cml0eUNhY2hlPWUuc2VjdXJpdHksdC5fbGFzdFVwZGF0ZT0obmV3IERhdGUpLmdldFRpbWUoKSx0fSx0aGlzLl90ZXJtaW5hbFByb3h5PWU/bmV3IGg6bmV3IG19cnVuRnVuY3Rpb24oZSx0LG4scixzKXtyZXR1cm4gbmV3IFByb21pc2UoKChvLGkpPT57dGhpcy5fdGVybWluYWxQcm94eS5ydW5GdW5jdGlvbihvLCgoZSx0KT0+e2kodGhpcy5nZXRFcnJvckZyb21FcnJvck1lc3NhZ2UoZSx0KSl9KSxlLHQsbnx8bnVsbCxyfHxudWxsLHN8fG51bGwpfSkpfWdldEFsbEdyb3Vwcygpe3JldHVybiBuZXcgUHJvbWlzZSgoKGUsdCk9Pnt0aGlzLl90ZXJtaW5hbFByb3h5LmdldEFsbEdyb3VwcygodD0+e2UoQXJyYXkuZnJvbSh0LHRoaXMuX2hlbHBlclNldEdyb3VwVmFsdWVzKSl9KSwoKGUsbik9Pnt0KHRoaXMuZ2V0RXJyb3JGcm9tRXJyb3JNZXNzYWdlKGUsbikpfSkpfSkpfWdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpe2xldCBuPW51bGw7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpaWYodC5zdGFjayluPXQ7ZWxzZXtjb25zdHtkZXRhaWxzOmUsbWVzc2FnZTpyfT10O249bmV3IEVycm9yKHI/P1wiVW5rbm93biBlcnJvclwiKSxlJiYobi5kZXRhaWxzPWUpfWVsc2Ugbj1cInN0cmluZ1wiPT10eXBlb2YgdD9uZXcgRXJyb3IodCk6bmV3IEVycm9yKFwiVW5rbm93biBlcnJvclwiKTtyZXR1cm4gbi5jb2RlPWUsbn1nZXRHcm91cChlKXtyZXR1cm4gbmV3IFByb21pc2UoKCh0LG4pPT57dGhpcy5fdGVybWluYWxQcm94eS5nZXRBbGxHcm91cHMoKHI9Pntjb25zdCBzPXIuZmluZCgodD0+dC5uYW1lPT09ZSkpO3M/dCh0aGlzLl9oZWxwZXJTZXRHcm91cFZhbHVlcyhzKSk6bihuZXcgRXJyb3IoYEdyb3VwICR7ZX0gaXMgbm90IGZvdW5kLmApKX0pLCgoZSx0KT0+e24odGhpcy5nZXRFcnJvckZyb21FcnJvck1lc3NhZ2UoZSx0KSl9KSl9KSl9c3Vic2NyaWJlR3JvdXBFdmVudHMoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxuKT0+e3RoaXMuX3Rlcm1pbmFsUHJveHkuc3Vic2NyaWJlR3JvdXBFdmVudHMoKGU9Pnt0KGUpfSksKChlLHQpPT57bih0aGlzLmdldEVycm9yRnJvbUVycm9yTWVzc2FnZShlLHQpKX0pLCgodCxuKT0+e2UodGhpcy5faGVscGVyU2V0R3JvdXBWYWx1ZXModCksbil9KSl9KSl9dW5zdWJzY3JpYmVHcm91cEV2ZW50cyhlKXtyZXR1cm4gbmV3IFByb21pc2UoKCh0LG4pPT57dGhpcy5fdGVybWluYWxQcm94eS51bnN1YnNjcmliZUdyb3VwRXZlbnRzKCgoKT0+e3QoKX0pLCgoZSx0KT0+e24odGhpcy5nZXRFcnJvckZyb21FcnJvck1lc3NhZ2UoZSx0KSl9KSxlKX0pKX19Y29uc3QgZj0od2luZG93LkJCPXdpbmRvdy5CQnx8e30sd2luZG93LkJCLkFwcHM9d2luZG93LkJCLkFwcHN8fHt9LHdpbmRvdy5CQi5BcHBzLlRlcm1pbmFsPXdpbmRvdy5CQi5BcHBzLlRlcm1pbmFsfHxuZXcgYix3aW5kb3cuQkIuQXBwcy5UZXJtaW5hbCksdz1cImZkYzMuY29udGFjdFwiLF89XCJmZGMzLmluc3RydW1lbnRcIix5PWU9PiEhZSYmL14oW0EtWjAtOV17NX0pKFtBLVowLTkqQCNdezN9KShcXGQpJC9pLnRlc3QoZSksdj1lPT4hIWUmJi9cXGIoRVFVSVRZKSQvaS50ZXN0KGUpLEU9ZT0+ISFlJiYvXig/IUJbU01dfEdbR0JIXXxLWXxWRykoW0EtWl17Mn0pKEcpKCgoPyFbQUVJT1VfXSlcXHcpezh9KShcXGQpJC9pLnRlc3QoZSksUz1lPT4hIWUmJi9eKFtBLVpdezJ9KShbQS1aMC05XXs5fSkoXFxkKSQvaS50ZXN0KGUpLEk9XCJPRl9CQkdfQVBJXCIsQT0oZSx0LHIpPT5hc3luYyhzLG8pPT57aWYodm9pZCAwPT09KHM/Lm5hbWU/P3ZvaWQgMCkpe2NvbnN0IGU9bmV3IEFwaUVycm9yKHZvaWQgMCxcIkdyb3VwIGV2ZW50IHNvdXJjZSBpcyB1bmRlZmluZWRcIik7dGhyb3cgYShlKSxyPy4oZSksZX1pZihcIipcIiE9PWUmJnMubmFtZSE9PWV8fG89PT1JKXJldHVybjtsZXQgaTt0cnl7aT1hd2FpdCBzLmdldFNlY3VyaXR5KCl9Y2F0Y2goZSl7Y29uc3QgdD1uKGUpO3Rocm93IGEodCkscj8uKHQpLHR9dShgTGF1bmNocGFkIGdyb3VwICR7cy5uYW1lfSBzZWN1cml0eSBjaGFuZ2VkIHRvOmAsaSk7Y29uc3QgYz0oZT0+e2NvbnN0IHQ9e3R5cGU6XyxpZDp7QkJHOmV9fSxuPShlPT57aWYoZT8udHJpbSgpKXJldHVybihlLm1hdGNoKC9eXFx3Ky8pPz9bXSlbMF19KShlKTtpZighbilyZXR1cm4gdDtzd2l0Y2goITApe2Nhc2UgeShuKTp0LmlkLkNVU0lQPW47YnJlYWs7Y2FzZSBFKG4pOnQuaWQuRklHST1uO2JyZWFrO2Nhc2UgUyhuKTp0LmlkLklTSU49bjticmVhaztjYXNlIHYoZSk6dC5pZC50aWNrZXI9bn1yZXR1cm4gdH0pKGkpO2Mub3BlbmZpbkJiZ0FwaT0hMCx0Py4oYyksdShcIlNldHRpbmcgbmV3IGNvbnRleHQ6IFwiLGMpO3RyeXthd2FpdCBmaW4ubWUuaW50ZXJvcC5zZXRDb250ZXh0KGMpfWNhdGNoKGUpe2NvbnN0IHQ9bmV3IEludGVyb3BFcnJvcih2b2lkIDAsZSk7YSh0KSxyPy4odCl9fSxNPWFzeW5jKCk9PntsZXQgZT0hMDt0cnl7YXdhaXQgZi5nZXRBbGxHcm91cHMoKX1jYXRjaCh0KXtjb25zdCByPW4odCk7aWYoIShyIGluc3RhbmNlb2YgVGVybWluYWxDb25uZWN0aW9uRXJyb3IpKXRocm93IGEocikscjtlPSExfXJldHVybiB1KFwiQmxvb21iZXJnIHRlcm1pbmFsIHJlYWR5OiBcIixlKSxlfSxDPWFzeW5jKGUsdCxyLHMsbyk9PntpZihcIm51bWJlclwiPT10eXBlb2YgZSl7dShgUnVubmluZyB0ZXJtaW5hbCBmdW5jdGlvbiBpbiBwYW5lbCAke2V9OiBgLHQscixzLG8pO3RyeXthd2FpdCBmLnJ1bkZ1bmN0aW9uKHQsZSxyLHMsbyl9Y2F0Y2goZSl7Y29uc3QgdD1uKGUpO3Rocm93IGEodCksdH19ZWxzZSB1KGBVbmFibGUgdG8gcnVuIGZ1bmN0aW9uIGFzIHRhcmdldCAke2V9IGlzIG5vdCBhIHBhbmVsYCx0LHIscyxvKX0sRz17ZGVmYXVsdE1lcmdlOlN5bWJvbChcImRlZXBtZXJnZS10czogZGVmYXVsdCBtZXJnZVwiKSxza2lwOlN5bWJvbChcImRlZXBtZXJnZS10czogc2tpcFwiKX07Ry5kZWZhdWx0TWVyZ2U7ZnVuY3Rpb24gayhlLHQpe3JldHVybiB0fWZ1bmN0aW9uIE8oZSl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIGV8fG51bGw9PT1lPzA6QXJyYXkuaXNBcnJheShlKT8yOmZ1bmN0aW9uKGUpe2lmKCFGLmhhcyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpKXJldHVybiExO2NvbnN0e2NvbnN0cnVjdG9yOnR9PWU7aWYodm9pZCAwPT09dClyZXR1cm4hMDtjb25zdCBuPXQucHJvdG90eXBlO2lmKG51bGw9PT1ufHxcIm9iamVjdFwiIT10eXBlb2Ygbnx8IUYuaGFzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuKSkpcmV0dXJuITE7aWYoIW4uaGFzT3duUHJvcGVydHkoXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExO3JldHVybiEwfShlKT8xOmUgaW5zdGFuY2VvZiBTZXQ/MzplIGluc3RhbmNlb2YgTWFwPzQ6NX1mdW5jdGlvbiBQKGUpe2NvbnN0IHQ9bmV3IFNldDtmb3IoY29uc3QgbiBvZiBlKWZvcihjb25zdCBlIG9mWy4uLk9iamVjdC5rZXlzKG4pLC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobildKXQuYWRkKGUpO3JldHVybiB0fWZ1bmN0aW9uIFIoZSx0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsdCl9ZnVuY3Rpb24geChlKXtyZXR1cm57KltTeW1ib2wuaXRlcmF0b3JdKCl7Zm9yKGNvbnN0IHQgb2YgZSlmb3IoY29uc3QgZSBvZiB0KXlpZWxkIGV9fX1jb25zdCBGPW5ldyBTZXQoW1wiW29iamVjdCBPYmplY3RdXCIsXCJbb2JqZWN0IE1vZHVsZV1cIl0pO2Z1bmN0aW9uIHEoZSl7cmV0dXJuIGUuYXQoLTEpfXZhciBOPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLG1lcmdlQXJyYXlzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmZsYXQoKX0sbWVyZ2VNYXBzOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTWFwKHgoZSkpfSxtZXJnZU90aGVyczpxLG1lcmdlUmVjb3JkczpmdW5jdGlvbihlLHQsbil7Y29uc3Qgcj17fTtmb3IoY29uc3QgcyBvZiBQKGUpKXtjb25zdCBvPVtdO2Zvcihjb25zdCB0IG9mIGUpUih0LHMpJiZvLnB1c2godFtzXSk7aWYoMD09PW8ubGVuZ3RoKWNvbnRpbnVlO2NvbnN0IGk9dC5tZXRhRGF0YVVwZGF0ZXIobix7a2V5OnMscGFyZW50czplfSksYz1CKG8sdCxpKTtjIT09Ry5za2lwJiYoXCJfX3Byb3RvX19cIj09PXM/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIscyx7dmFsdWU6Yyxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMH0pOnJbc109Yyl9cmV0dXJuIHJ9LG1lcmdlU2V0czpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFNldCh4KGUpKX19KTtmdW5jdGlvbiBUKC4uLmUpe3JldHVybiBmdW5jdGlvbihlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZGVmYXVsdE1lcmdlRnVuY3Rpb25zOk4sbWVyZ2VGdW5jdGlvbnM6ey4uLk4sLi4uT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGUpLmZpbHRlcigoKFtlLHRdKT0+T2JqZWN0Lmhhc093bihOLGUpKSkubWFwKCgoW2UsdF0pPT4hMT09PXQ/W2UscV06W2UsdF0pKSl9LG1ldGFEYXRhVXBkYXRlcjplLm1ldGFEYXRhVXBkYXRlcj8/ayxkZWVwbWVyZ2U6dCx1c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nOmUuZW5hYmxlSW1wbGljaXREZWZhdWx0TWVyZ2luZz8/ITEsYWN0aW9uczpHfX0oZSxyKTtmdW5jdGlvbiByKC4uLmUpe3JldHVybiBCKGUsbix0KX1yZXR1cm4gcn0oe30pKC4uLmUpfWZ1bmN0aW9uIEIoZSx0LG4pe2lmKDA9PT1lLmxlbmd0aClyZXR1cm47aWYoMT09PWUubGVuZ3RoKXJldHVybiAkKGUsdCxuKTtjb25zdCByPU8oZVswXSk7aWYoMCE9PXImJjUhPT1yKWZvcihsZXQgcz0xO3M8ZS5sZW5ndGg7cysrKWlmKE8oZVtzXSkhPT1yKXJldHVybiAkKGUsdCxuKTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihlLHQsbil7Y29uc3Qgcj10Lm1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3JkcyhlLHQsbik7aWYocj09PUcuZGVmYXVsdE1lcmdlfHx0LnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcmJnZvaWQgMD09PXImJnQubWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzIT09dC5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VSZWNvcmRzKXJldHVybiB0LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZVJlY29yZHMoZSx0LG4pO3JldHVybiByfShlLHQsbik7Y2FzZSAyOnJldHVybiBmdW5jdGlvbihlLHQsbil7Y29uc3Qgcj10Lm1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzKGUsdCxuKTtpZihyPT09Ry5kZWZhdWx0TWVyZ2V8fHQudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyYmdm9pZCAwPT09ciYmdC5tZXJnZUZ1bmN0aW9ucy5tZXJnZUFycmF5cyE9PXQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzKXJldHVybiB0LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZUFycmF5cyhlKTtyZXR1cm4gcn0oZSx0LG4pO2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24oZSx0LG4pe2NvbnN0IHI9dC5tZXJnZUZ1bmN0aW9ucy5tZXJnZVNldHMoZSx0LG4pO2lmKHI9PT1HLmRlZmF1bHRNZXJnZXx8dC51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nJiZ2b2lkIDA9PT1yJiZ0Lm1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cyE9PXQuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cylyZXR1cm4gdC5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VTZXRzKGUpO3JldHVybiByfShlLHQsbik7Y2FzZSA0OnJldHVybiBmdW5jdGlvbihlLHQsbil7Y29uc3Qgcj10Lm1lcmdlRnVuY3Rpb25zLm1lcmdlTWFwcyhlLHQsbik7aWYocj09PUcuZGVmYXVsdE1lcmdlfHx0LnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcmJnZvaWQgMD09PXImJnQubWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzIT09dC5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzKXJldHVybiB0LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU1hcHMoZSk7cmV0dXJuIHJ9KGUsdCxuKTtkZWZhdWx0OnJldHVybiAkKGUsdCxuKX19ZnVuY3Rpb24gJChlLHQsbil7Y29uc3Qgcj10Lm1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzKGUsdCxuKTtyZXR1cm4gcj09PUcuZGVmYXVsdE1lcmdlfHx0LnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcmJnZvaWQgMD09PXImJnQubWVyZ2VGdW5jdGlvbnMubWVyZ2VPdGhlcnMhPT10LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycz90LmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycyhlKTpyfWNvbnN0IEQ9KCk9Pntjb25zdCBlPW5ldyBNYXAsdD1uZXcgTWFwLG49e3RhcmdldDoxLG1uZW1vbmljOlwiREVTXCJ9LHI9e3RhcmdldDoxLG1uZW1vbmljOlwiR1BcIn0scz17dGFyZ2V0OjEsbW5lbW9uaWM6XCJRXCJ9LG89e3RhcmdldDoxLG1uZW1vbmljOlwiQklPXCJ9LGk9e3RhcmdldDoxLG1uZW1vbmljOlwiU0VBUlwifTtlLnNldChfLHsuLi5ufSksZS5zZXQodyx7Li4ub30pLGUuc2V0KFwiZmRjMy5vcmdhbml6YXRpb25cIix7Li4uaX0pO2NvbnN0IGM9bmV3IE1hcDtjLnNldChfLHsuLi5yfSksdC5zZXQoXCJWaWV3Q2hhcnRcIixjKTtjb25zdCBhPW5ldyBNYXA7YS5zZXQodyx7Li4ub30pLHQuc2V0KFwiVmlld0NvbnRhY3RcIixhKTtjb25zdCB1PW5ldyBNYXA7dS5zZXQoXyx7Li4ubn0pLHQuc2V0KFwiVmlld0luc3RydW1lbnRcIix1KTtjb25zdCBsPW5ldyBNYXA7cmV0dXJuIGwuc2V0KF8sey4uLnN9KSx0LnNldChcIlZpZXdRdW90ZVwiLGwpLHtjb250ZXh0czplLGludGVudHM6dH19LFU9YXN5bmMoZSx0LG4pPT57Y29uc3Qgcj1EKCkscz0oZT0+e2NvbnN0IHQ9ZT0+e2NvbnN0W3RdPWU7cmV0dXJuISEodD8/XCJcIikudHJpbSgpfSxuPVsuLi5lPy5jb250ZXh0cz8uZW50cmllcygpPz9bXV0uZmlsdGVyKHQpLHI9Wy4uLmU/LmludGVudHM/LmVudHJpZXMoKT8/W11dLmZpbHRlcigoZT0+e2NvbnN0W24scl09ZSxzPVsuLi5yPy5lbnRyaWVzKCk/P1tdXS5maWx0ZXIodCk7cmV0dXJuISEobj8/XCJcIikudHJpbSgpJiZzLmxlbmd0aD4wfSkpO3JldHVybntjb250ZXh0czpuZXcgTWFwKG4pLGludGVudHM6bmV3IE1hcChyKX19KShlKSxvPVQocixzKSxpPW8uY29udGV4dHMsYz1vLmludGVudHMscD1bXTtsZXQgZDtwLnB1c2goZmluLm1lLmludGVyb3AuYWRkQ29udGV4dEhhbmRsZXIoKChlLHQsbik9PmFzeW5jIHI9PntyP2F3YWl0IGoocixlLHQsbik6dShcIk5vIGNvbnRleHQgaW5mbyBwcm92aWRlZCwgaWdub3JpbmdcIil9KShpLHQsbikpKSxjLmZvckVhY2goKChlLHIpPT57cC5wdXNoKGZpbi5tZS5pbnRlcm9wLnJlZ2lzdGVySW50ZW50SGFuZGxlcigoKGUsdCxuKT0+YXN5bmMgcj0+e3UoXCJJbnRlbnQgcmVjZWl2ZWRcIixyKTtjb25zdHtjb250ZXh0OnN9PXI7cz9lP2F3YWl0IGoocyxlLHQsbik6bChgTm8gYWN0aW9ucyBoYXZlIGJlZW4gcHJvdmlkZWQgZm9yIGludGVudCAke3IubmFtZX0sIGlnbm9yaW5nYCk6bChcIk5vIGNvbnRleHQgaW5mbyBwcm92aWRlZCB3aXRoIGludGVudCwgaWdub3JpbmdcIil9KShlLHQsbikscikpfSkpO3RyeXtkPWF3YWl0IFByb21pc2UuYWxsKHApfWNhdGNoKGUpe2NvbnN0IHQ9bmV3IEFwaUVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGludGVyb3AgaGFuZGxlcnNcIixlKTt0aHJvdyBhKHQpLHR9cmV0dXJuIGR9LGo9YXN5bmMoZSx0LG4scik9PntpZihuPy4oZSksITA9PT1lLm9wZW5maW5CYmdBcGkpcmV0dXJuO2lmKHUoXCJQcm9jZXNzaW5nIGNvbnRleHRcIixlKSwhdC5oYXMoZS50eXBlKXx8IXQuZ2V0KGUudHlwZSkpcmV0dXJuIHZvaWQgbChgTm8gYWN0aW9uIGhhcyBiZWVuIGRlZmluZWQgZm9yIGNvbnRleHQgdHlwZSAke2UudHlwZX0sIGlnbm9yaW5nYCk7Y29uc3Qgcz10LmdldChlLnR5cGUpO3RyeXtzd2l0Y2goITApe2Nhc2UgZS50eXBlLnRvVXBwZXJDYXNlKCkuZW5kc1dpdGgoXCJDT05UQUNUXCIpOmF3YWl0IFYoZSxzKTticmVhaztjYXNlIGUudHlwZS50b1VwcGVyQ2FzZSgpLmVuZHNXaXRoKFwiSU5TVFJVTUVOVFwiKTphd2FpdCBMKGUscyk7YnJlYWs7Y2FzZSBlLnR5cGUudG9VcHBlckNhc2UoKS5lbmRzV2l0aChcIk9SR0FOSVpBVElPTlwiKTphd2FpdCBXKGUscyk7YnJlYWs7ZGVmYXVsdDpsKGBDb250ZXh0IHR5cGUgJHtlLnR5cGV9IGlzIG5vdCBzdXBwb3J0ZWQsIGlnbm9yaW5nYCl9fWNhdGNoKGUpe2xldCB0O2UgaW5zdGFuY2VvZiBBcGlFcnJvcj90PWU6KHQ9bmV3IEFwaUVycm9yKHZvaWQgMCxlKSxhKHQpKSxyPy4odCl9fSxWPWFzeW5jKGUsdCk9Pntjb25zdHtuYW1lOm59PWU7aWYoIW4pcmV0dXJuIHZvaWQgbChcIkNvbnRhY3QgY29udGV4dCBkaWQgbm90IGluY2x1ZGUgYSBuYW1lLCBpZ25vcmluZ1wiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdm9pZCBsKFwiQ29udGFjdCBjb250ZXh0IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggZ3JvdXAgYWN0aW9ucywgaWdub3JpbmdcIik7Y29uc3R7bW5lbW9uaWM6cix0YWlsczpzLHRhcmdldDpvfT10LGk9YCR7bn0gJHtzPz9cIlwifWAudHJpbSgpO2F3YWl0IEMobyxyLHZvaWQgMCx2b2lkIDAsaSl9LEw9YXN5bmMoZSx0KT0+e2NvbnN0IHI9KGU9Pntjb25zdHtCQkc6dCx0aWNrZXI6bn09ZS5pZDtyZXR1cm4gdHx8KG4/YCR7bn0gVVMgRXF1aXR5YDp2b2lkIHUoXCJJbnN0cnVtZW50IGNvbnRleHQgZG9lcyBub3QgY29udGFpbiBhIHN1cHBvcnRlZCBpZFwiLGUpKX0pKGUpO2lmKCFyKXJldHVybiB2b2lkIGwoXCJJbnN0cnVtZW50IGNvbnRleHQgZGlkIG5vdCBjb250YWluIGEgdmFsaWQgc2VjdXJpdHksIGlnbm9yaW5nXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiB2b2lkIGF3YWl0KGFzeW5jKGUsdCk9PntpZih1KGBTZXR0aW5nICR7XCIqXCI9PT1lP1wiZXZlcnkgZ3JvdXBcIjpgZ3JvdXAgJHtlfWB9IHNlY3VyaXR5IHRvICR7dH1gKSxcIipcIj09PWUpe2NvbnN0IGU9YXdhaXQgZi5nZXRBbGxHcm91cHMoKTthd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+ZS5zZXRTZWN1cml0eSh0LEkpKSkpfWVsc2UgdHJ5e2NvbnN0IG49YXdhaXQgZi5nZXRHcm91cChlKTthd2FpdCBuLnNldFNlY3VyaXR5KHQsSSl9Y2F0Y2goZSl7Y29uc3QgdD1uKGUpO3Rocm93IGEodCksdH19KSh0LHIpO2NvbnN0e21uZW1vbmljOnMsdGFpbHM6byx0YXJnZXQ6aX09dDthd2FpdCBDKGkscyxyLHZvaWQgMCxvKX0sVz1hc3luYyhlLHQpPT57Y29uc3R7bmFtZTpufT1lO2lmKCFuKXJldHVybiB2b2lkIGwoXCJPcmdhbml6YXRpb24gY29udGV4dCBkaWQgbm90IGluY2x1ZGUgYSBuYW1lLCBpZ25vcmluZ1wiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdm9pZCBsKFwiT3JnYW5pemF0aW9uIGNvbnRleHQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBncm91cCBhY3Rpb25zLCBpZ25vcmluZ1wiKTtjb25zdHttbmVtb25pYzpyLHRhaWxzOnMsdGFyZ2V0Om99PXQsaT1gJHtufSAke3M/P1wiXCJ9YC50cmltKCk7YXdhaXQgQyhvLHIsdm9pZCAwLHZvaWQgMCxpKX07dmFyIHo7IWZ1bmN0aW9uKGUpe2UuQmxvb21iZXJnPVwiQkxPT01CRVJHXCJ9KHp8fCh6PXt9KSk7Y29uc3QgWj1hc3luYyBlPT57KGFzeW5jIGU9Pnt0cnl7YXdhaXQgZmluLlN5c3RlbS5yZWdpc3RlclVzYWdlKHt0eXBlOlwiaW50ZWdyYXRpb24tZmVhdHVyZVwiLGRhdGE6e2FwaVZlcnNpb246cixjb21wb25lbnROYW1lOmV9fSl9Y2F0Y2godCl7bChgVW5hYmxlIHRvIHJlZ2lzdGVyIHVzYWdlIGZvciBmZWF0dXJlICR7ZX06ICR7dD8ubWVzc2FnZX1gKX19KSh6LkJsb29tYmVyZyk7Y29uc3R7Z3JvdXA6dCxhY3Rpb25zOm4sb25Db250ZXh0Q2hhbmdlZDpzLG9uRXJyb3I6b309ZT8/e307aWYodShcIkNyZWF0aW5nIGludGVyb3AgY29ubmVjdGlvblwiLHQsbiksIWF3YWl0IE0oKSl7Y29uc3QgZT1uZXcgVGVybWluYWxDb25uZWN0aW9uRXJyb3I7dGhyb3cgYShlKSxlfWxldCBpO3ZvaWQgMCE9PSh0Pz92b2lkIDApJiYoaT1hd2FpdCBmLnN1YnNjcmliZUdyb3VwRXZlbnRzKEEodCxzLG8pKSx1KFwiTGF1bmNocGFkIGdyb3VwIHN1YnNjcmlwdGlvbiBjcmVhdGVkOiBcIixpKSk7Y29uc3QgYz1hd2FpdCBVKG4scyxvKTtyZXR1cm57ZGlzY29ubmVjdDpKKGMsaSl9fSxKPShlLHQpPT5hc3luYygpPT57aWYodShcIkRpc2Nvbm5lY3RpbmcgaW50ZXJvcCBjb25uZWN0aW9uXCIpLGUmJmF3YWl0IFByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT57YXdhaXQgZS51bnN1YnNjcmliZSgpfSkpKSx2b2lkIDAhPT0odD8/dm9pZCAwKSl0cnl7YXdhaXQgZi51bnN1YnNjcmliZUdyb3VwRXZlbnRzKHQpfWNhdGNoKGUpe2NvbnN0IHQ9bmV3IFRlcm1pbmFsQ29ubmVjdGlvbkVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGRpc2Nvbm5lY3Rpb25cIixlKTthKHQpfX07dmFyIFk9dC5NUyxIPXQueGMsUT10LkJULEs9dC5leixYPXQueVcsZWU9dC4kaix0ZT10LlUkLG5lPXQuVTcscmU9dC5VNSxzZT10LkdTLG9lPXQuaE4saWU9dC5ZYyxjZT10LmVFLGFlPXQuQzE7ZXhwb3J0e1kgYXMgQXBpRXJyb3IsSCBhcyBBcHBOb3RBdXRob3JpemVkRXJyb3IsUSBhcyBJbnRlcm9wRXJyb3IsSyBhcyBUZXJtaW5hbENvbW1hbmRFcnJvcixYIGFzIFRlcm1pbmFsQ29ubmVjdGlvbkVycm9yLGVlIGFzIGNvbm5lY3QsdGUgYXMgZGlzYWJsZUxvZ2dpbmcsbmUgYXMgZW5hYmxlTG9nZ2luZyxyZSBhcyBnZXREZWZhdWx0QWN0aW9ucyxzZSBhcyBpc0Jsb29tYmVyZ1Rlcm1pbmFsUmVhZHksb2UgYXMgaXNDdXNpcCxpZSBhcyBpc0VxdWl0eSxjZSBhcyBpc0ZpZ2ksYWUgYXMgaXNJc2lufTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7XG5cdGNvbm5lY3QsXG5cdGVuYWJsZUxvZ2dpbmcsXG5cdGlzQmxvb21iZXJnVGVybWluYWxSZWFkeSxcblx0dHlwZSBCbG9vbWJlcmdDb25uZWN0aW9uXG59IGZyb20gXCJAb3BlbmZpbi9ibG9vbWJlcmdcIjtcbmltcG9ydCB0eXBlIE9wZW5GaW4gZnJvbSBcIkBvcGVuZmluL2NvcmVcIjtcblxubGV0IGJiZ0Nvbm5lY3Rpb246IEJsb29tYmVyZ0Nvbm5lY3Rpb24gfCB1bmRlZmluZWQ7XG5cbmxldCBzZWxlY3RlZEludGVudFR5cGU6IHN0cmluZyA9IFwiXCI7XG5sZXQgc2VsZWN0ZWRJbnRlbnRWYWx1ZTogc3RyaW5nID0gXCJcIjtcbmxldCBmZGMzRGVub21pbmF0aW9uOiBzdHJpbmcgPSBcIlwiO1xubGV0IGJiZ01uZW1vbmljOiBzdHJpbmcgPSBcIlwiO1xuXG5sZXQgYnRuQ29ubmVjdDogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsO1xubGV0IGJ0bkRpc2Nvbm5lY3Q6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbmxldCBidG5DbGVhckxvZ3M6IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbDtcbmxldCBidG5RdWVyeTogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsO1xubGV0IGludGVudFR5cGVFbGVtZW50OiBIVE1MU2VsZWN0RWxlbWVudCB8IG51bGw7XG5sZXQgaW50ZW50VmFsdWVFbGVtZW50OiBIVE1MU2VsZWN0RWxlbWVudCB8IG51bGw7XG5sZXQgbG9nT3V0cHV0OiBIVE1MUHJlRWxlbWVudCB8IG51bGw7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XG5cdC8vIEVuYWJsZSBsb2dnaW5nIGluIHRoZSBCQkcgcGFja2FnZVxuXHRlbmFibGVMb2dnaW5nKCk7XG5cblx0Ly8gSW5pdGlhbGl6ZSB0aGUgRE9NIGVsZW1lbnRzLlxuXHRpbml0aWFsaXplRE9NKCk7XG59KTtcblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBET00uXG4gKi9cbmZ1bmN0aW9uIGluaXRpYWxpemVET00oKTogdm9pZCB7XG5cdGJ0bkNvbm5lY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcIiNidG5Db25uZWN0XCIpO1xuXHRidG5EaXNjb25uZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCIjYnRuRGlzY29ubmVjdFwiKTtcblx0YnRuQ2xlYXJMb2dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCIjYnRuQ2xlYXJcIik7XG5cdGJ0blF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCIjYnRuUXVlcnlcIik7XG5cdGludGVudFR5cGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MU2VsZWN0RWxlbWVudD4oXCIjaW50ZW50VHlwZVwiKTtcblx0aW50ZW50VmFsdWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MU2VsZWN0RWxlbWVudD4oXCIjaW50ZW50VmFsdWVcIik7XG5cdGxvZ091dHB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTFByZUVsZW1lbnQ+KFwiI2xvZ091dHB1dFwiKTtcblxuXHRpZiAoYnRuQ29ubmVjdCkge1xuXHRcdGJ0bkNvbm5lY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChidG5Db25uZWN0KSB7XG5cdFx0XHRcdGJ0bkNvbm5lY3QuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgY29ubmVjdFRvQkJHVGVybWluYWwoKTtcblx0XHRcdHVwZGF0ZVN0YXRlKCk7XG5cdFx0fSk7XG5cdH1cblx0aWYgKGJ0bkRpc2Nvbm5lY3QpIHtcblx0XHRidG5EaXNjb25uZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoYnRuRGlzY29ubmVjdCkge1xuXHRcdFx0XHRidG5EaXNjb25uZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGF3YWl0IGRpc2Nvbm5lY3RGcm9tQkJHVGVybWluYWwoKTtcblx0XHRcdHVwZGF0ZVN0YXRlKCk7XG5cdFx0fSk7XG5cdH1cblx0aWYgKGJ0bkNsZWFyTG9ncykge1xuXHRcdGJ0bkNsZWFyTG9ncy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xlYXJMb2dzKTtcblx0fVxuXHRpZiAoYnRuUXVlcnkpIHtcblx0XHRidG5RdWVyeS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZmlyZUludGVudEZvckJCRyk7XG5cdH1cblxuXHRpZiAoaW50ZW50VHlwZUVsZW1lbnQpIHtcblx0XHRpbnRlbnRUeXBlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGludGVudFR5cGVFbGVtZW50Py52YWx1ZSkge1xuXHRcdFx0XHRpZiAoYnRuUXVlcnkpIHtcblx0XHRcdFx0XHRidG5RdWVyeS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3dpdGNoIChpbnRlbnRUeXBlRWxlbWVudD8udmFsdWUpIHtcblx0XHRcdFx0XHRjYXNlIFwiVmlld0NoYXJ0XCI6XG5cdFx0XHRcdFx0XHRsb2dJbmZvcm1hdGlvbihcblx0XHRcdFx0XHRcdFx0XCJJbnRlbnQgdG8gYmUgZmlyZWQgaXMgVmlld0NoYXJ0LiBDb250ZW50IFR5cGUgaXMgZmRjMy5pbnN0cnVtZW50LiBCbG9vbWJlcmcgVGVybWluYWwgTW5lbW9uaWM6IEdQXCJcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZEludGVudFR5cGUgPSBcIlZpZXdDaGFydFwiO1xuXHRcdFx0XHRcdFx0ZmRjM0Rlbm9taW5hdGlvbiA9IFwiZmRjMy5pbnN0cnVtZW50XCI7XG5cdFx0XHRcdFx0XHRiYmdNbmVtb25pYyA9IFwiR1BcIjtcblx0XHRcdFx0XHRcdHBvcHVsYXRlU2VsZWN0KGludGVudFZhbHVlRWxlbWVudCwgW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiT1JDTFwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIk9yYWNsZSBDb3JwXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIk1TRlRcIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJNaWNyb3NvZnRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiSUJNXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiSUJNXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiVmlld0NvbnRhY3RcIjpcblx0XHRcdFx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRcdFx0XHRcIkludGVudCB0byBiZSBmaXJlZCBpcyBWaWV3Q29udGFjdC4gQ29udGVudCBUeXBlIGlzIGZkYzMuY29udGFjdC4gQmxvb21iZXJnIFRlcm1pbmFsIE1uZW1vbmljOiBCSU9cIlxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHNlbGVjdGVkSW50ZW50VHlwZSA9IFwiVmlld0NvbnRhY3RcIjtcblx0XHRcdFx0XHRcdGZkYzNEZW5vbWluYXRpb24gPSBcImZkYzMuY29udGFjdFwiO1xuXHRcdFx0XHRcdFx0YmJnTW5lbW9uaWMgPSBcIkJJT1wiO1xuXHRcdFx0XHRcdFx0cG9wdWxhdGVTZWxlY3QoaW50ZW50VmFsdWVFbGVtZW50LCBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJXaWxsaWFtIEhlbnJ5IEdhdGVzXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiV2lsbGlhbSBIZW5yeSBHYXRlc1wiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJMYXJyeSBFbGxpc29uXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiTGFycnkgRWxsaXNvblwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJSb2JlcnQgSWdlclwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIlJvYmVydCBJZ2VyXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiVmlld0luc3RydW1lbnRcIjpcblx0XHRcdFx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRcdFx0XHRcIkludGVudCB0byBiZSBmaXJlZCBpcyBWaWV3SW5zdHJ1bWVudC4gQ29udGVudCBUeXBlIGlzIGZkYzMuaW5zdHJ1bWVudC4gQmxvb21iZXJnIFRlcm1pbmFsIE1uZW1vbmljOiBERVNcIlxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHNlbGVjdGVkSW50ZW50VHlwZSA9IFwiVmlld0luc3RydW1lbnRcIjtcblx0XHRcdFx0XHRcdGZkYzNEZW5vbWluYXRpb24gPSBcImZkYzMuaW5zdHJ1bWVudFwiO1xuXHRcdFx0XHRcdFx0YmJnTW5lbW9uaWMgPSBcIkRFU1wiO1xuXHRcdFx0XHRcdFx0cG9wdWxhdGVTZWxlY3QoaW50ZW50VmFsdWVFbGVtZW50LCBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJPUkNMXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiT3JhY2xlIENvcnBcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiTVNGVFwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIk1pY3Jvc29mdFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJJQk1cIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJJQk1cIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJWaWV3UXVvdGVcIjpcblx0XHRcdFx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRcdFx0XHRcIkludGVudCB0byBiZSBmaXJlZCBpcyBWaWV3UXVvdGUuIENvbnRlbnQgVHlwZSBpcyBmZGMzLmluc3RydW1lbnQuIEJsb29tYmVyZyBUZXJtaW5hbCBNbmVtb25pYzogUVwiXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWRJbnRlbnRUeXBlID0gXCJWaWV3UXVvdGVcIjtcblx0XHRcdFx0XHRcdGZkYzNEZW5vbWluYXRpb24gPSBcImZkYzMuaW5zdHJ1bWVudFwiO1xuXHRcdFx0XHRcdFx0YmJnTW5lbW9uaWMgPSBcIlFcIjtcblx0XHRcdFx0XHRcdHBvcHVsYXRlU2VsZWN0KGludGVudFZhbHVlRWxlbWVudCwgW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiT1JDTFwiLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcIk9yYWNsZSBDb3JwXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcIk1TRlRcIixcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJNaWNyb3NvZnRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiSUJNXCIsXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiSUJNXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHR1cGRhdGVTdGF0ZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0aWYgKGludGVudFZhbHVlRWxlbWVudCkge1xuXHRcdGludGVudFZhbHVlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdGlmIChpbnRlbnRWYWx1ZUVsZW1lbnQpIHtcblx0XHRcdFx0c2VsZWN0ZWRJbnRlbnRWYWx1ZSA9IGludGVudFZhbHVlRWxlbWVudC52YWx1ZTtcblx0XHRcdFx0aWYgKHNlbGVjdGVkSW50ZW50VmFsdWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRcdFx0YGFjdGlvbjogJHtzZWxlY3RlZEludGVudFR5cGV9LCB0eXBlOiAke2ZkYzNEZW5vbWluYXRpb259LCBiYmcgbW5lbW9uaWM6ICR7YmJnTW5lbW9uaWN9LCBzZWFyY2ggdmFsdWU6ICR7c2VsZWN0ZWRJbnRlbnRWYWx1ZX1gXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR1cGRhdGVTdGF0ZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0dXBkYXRlU3RhdGUoKTtcbn1cblxuLyoqXG4gKiBDb25uZWN0IHRvIEJsb29tYmVyZyBUZXJtaW5hbC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvQkJHVGVybWluYWwoKTogUHJvbWlzZTx2b2lkPiB7XG5cdHRyeSB7XG5cdFx0bG9nSW5mb3JtYXRpb24oXCJDaGVja2luZyBCbG9vbWJlcmcgVGVybWluYWwgU3RhdHVzXCIpO1xuXG5cdFx0aWYgKCEoYXdhaXQgaXNCbG9vbWJlcmdUZXJtaW5hbFJlYWR5KCkpKSB7XG5cdFx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjb25uZWN0IHRvIEJsb29tYmVyZyB0ZXJtaW5hbC5cIik7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRsb2dJbmZvcm1hdGlvbihcIkZhaWxlZCB0byBjb25uZWN0IHRvIEJsb29tYmVyZyB0ZXJtaW5hbC5cIik7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cblx0XHRiYmdDb25uZWN0aW9uID0gYXdhaXQgY29ubmVjdCgpO1xuXHRcdGxvZ0luZm9ybWF0aW9uKFwiQ29ubmVjdGlvbiBzdWNjZXNzZnVsXCIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGJiZ0Nvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG5cdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdGxvZ0luZm9ybWF0aW9uKGVycm9yVG9TdHJpbmcoZXJyb3IpKTtcblx0fVxufVxuXG4vKipcbiAqIERpc2Nvbm5lY3QgZnJvbSBCbG9vbWJlcmcgVGVybWluYWwuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRpc2Nvbm5lY3RGcm9tQkJHVGVybWluYWwoKTogUHJvbWlzZTx2b2lkPiB7XG5cdGlmIChiYmdDb25uZWN0aW9uKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGxvZ0luZm9ybWF0aW9uKFwiRGlzY29ubmVjdGluZyBmcm9tIEJsb29tYmVyZyBUZXJtaW5hbFwiKTtcblx0XHRcdGF3YWl0IGJiZ0Nvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRiYmdDb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuXHRcdFx0bG9nSW5mb3JtYXRpb24oXCJEaXNjb25uZWN0ZWQgZnJvbSBCbG9vbWJlcmcgVGVybWluYWxcIik7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogRmlyZSBhbiBpbnRlbnQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpcmVJbnRlbnRGb3JCQkcoKTogUHJvbWlzZTx2b2lkPiB7XG5cdGlmIChiYmdDb25uZWN0aW9uKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGxvZ0luZm9ybWF0aW9uKFxuXHRcdFx0XHRgYWN0aW9uOiAke3NlbGVjdGVkSW50ZW50VHlwZX0sIHR5cGU6ICR7ZmRjM0Rlbm9taW5hdGlvbn0sIGJiZyBtbmVtb25pYzogJHtiYmdNbmVtb25pY30sIHNlYXJjaCB2YWx1ZTogJHtzZWxlY3RlZEludGVudFZhbHVlfWBcblx0XHRcdCk7XG5cblx0XHRcdGxldCBpbnRlbnQ6IE9wZW5GaW4uSW50ZW50O1xuXG5cdFx0XHRzd2l0Y2ggKHNlbGVjdGVkSW50ZW50VHlwZSkge1xuXHRcdFx0XHRjYXNlIFwiVmlld0NvbnRhY3RcIjpcblx0XHRcdFx0XHRpbnRlbnQgPSB7XG5cdFx0XHRcdFx0XHRuYW1lOiBzZWxlY3RlZEludGVudFR5cGUsXG5cdFx0XHRcdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IGZkYzNEZW5vbWluYXRpb24sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHNlbGVjdGVkSW50ZW50VmFsdWUsXG5cdFx0XHRcdFx0XHRcdGlkOiB7fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0aW50ZW50ID0ge1xuXHRcdFx0XHRcdFx0bmFtZTogc2VsZWN0ZWRJbnRlbnRUeXBlLFxuXHRcdFx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBmZGMzRGVub21pbmF0aW9uLFxuXHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdHRpY2tlcjogc2VsZWN0ZWRJbnRlbnRWYWx1ZVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgZmluLm1lLmludGVyb3AuZmlyZUludGVudChpbnRlbnQpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRsb2dJbmZvcm1hdGlvbihgRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIHJhaXNlIGludGVudDogJHtlcnJvclRvU3RyaW5nKGVycm9yKX1gKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0bG9nSW5mb3JtYXRpb24oXCJOb3QgY29ubmVjdGVkIHRvIHRoZSBCbG9vbWJlcmcgVGVybWluYWwuIFBsZWFzZSBjaGVjayB5b3VyIHN0YXR1cyBvciBsb2cgaW4gYWdhaW4uXCIpO1xuXHR9XG59XG5cbi8qKlxuICogVXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgRE9NLlxuICovXG5mdW5jdGlvbiB1cGRhdGVTdGF0ZSgpOiB2b2lkIHtcblx0Y29uc3QgaXNDb25uZWN0ZWQgPSBiYmdDb25uZWN0aW9uICE9PSB1bmRlZmluZWQ7XG5cdGlmIChidG5Db25uZWN0KSB7XG5cdFx0YnRuQ29ubmVjdC5kaXNhYmxlZCA9IGlzQ29ubmVjdGVkO1xuXHR9XG5cdGlmIChidG5EaXNjb25uZWN0KSB7XG5cdFx0YnRuRGlzY29ubmVjdC5kaXNhYmxlZCA9ICFpc0Nvbm5lY3RlZDtcblx0fVxuXHRpZiAoaW50ZW50VHlwZUVsZW1lbnQpIHtcblx0XHRpbnRlbnRUeXBlRWxlbWVudC5kaXNhYmxlZCA9ICFpc0Nvbm5lY3RlZDtcblx0fVxuXHRpZiAoaW50ZW50VmFsdWVFbGVtZW50KSB7XG5cdFx0aW50ZW50VmFsdWVFbGVtZW50LmRpc2FibGVkID0gIWlzQ29ubmVjdGVkIHx8IHNlbGVjdGVkSW50ZW50VHlwZS5sZW5ndGggPT09IDA7XG5cdH1cblx0aWYgKGJ0blF1ZXJ5KSB7XG5cdFx0YnRuUXVlcnkuZGlzYWJsZWQgPSAhaXNDb25uZWN0ZWQgfHwgc2VsZWN0ZWRJbnRlbnRWYWx1ZS5sZW5ndGggPT09IDA7XG5cdH1cbn1cblxuLyoqXG4gKiBMb2cgaW5mb3JtYXRpb24gdG8gdGhlIG91dHB1dCBlbGVtZW50LlxuICogQHBhcmFtIGluZm8gVGhlIGluZm9ybWF0aW9uIHRvIGxvZy5cbiAqL1xuZnVuY3Rpb24gbG9nSW5mb3JtYXRpb24oaW5mbzogc3RyaW5nKTogdm9pZCB7XG5cdGlmIChsb2dPdXRwdXQpIHtcblx0XHRsb2dPdXRwdXQudGV4dENvbnRlbnQgPSBgJHtsb2dPdXRwdXQudGV4dENvbnRlbnR9JHtpbmZvfVxcblxcbmA7XG5cdFx0bG9nT3V0cHV0LnNjcm9sbFRvcCA9IGxvZ091dHB1dC5zY3JvbGxIZWlnaHQ7XG5cdH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuZCBlcnJvciB0byBhIHN0cmluZy5cbiAqIEBwYXJhbSBlcnIgVGhlIGVycm9yIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyBUaGUgZXJyb3IgYXMgYSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVycm9yVG9TdHJpbmcoZXJyOiB1bmtub3duKTogc3RyaW5nIHtcblx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0cmV0dXJuIGVyci5tZXNzYWdlO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBlcnIgPT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gZXJyO1xuXHR9XG5cblx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KGVycik7XG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIGxvZ3MuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyTG9ncygpOiB2b2lkIHtcblx0aWYgKGxvZ091dHB1dCkge1xuXHRcdGxvZ091dHB1dC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0bG9nT3V0cHV0LnNjcm9sbFRvcCA9IDA7XG5cdH1cbn1cblxuLyoqXG4gKiBQb3B1bGF0ZSBhIHNlbGVjdCBjb250cm9sIHdpdGggYSBsaXN0IG9mIGl0ZW1zLlxuICogQHBhcmFtIHNlbGVjdCBUaGUgc2VsZWN0IGVsZW1lbnQgdG8gcG9wdWxhdGUuXG4gKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gcG9wdWxhdGUgdGhlIGVsZW1lbnQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3Qoc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudCB8IG51bGwsIHZhbHVlczogeyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXSk6IHZvaWQge1xuXHRpZiAoc2VsZWN0KSB7XG5cdFx0c2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XG5cdFx0Y29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblx0XHRvcHQudmFsdWUgPSBcIlwiO1xuXHRcdG9wdC50ZXh0ID0gXCJQbGVhc2Ugc2VsZWN0IHZhbHVlXCI7XG5cdFx0b3B0LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRvcHQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdHNlbGVjdC5hcHBlbmQob3B0KTtcblxuXHRcdGZvciAoY29uc3QgdmFsIG9mIHZhbHVlcykge1xuXHRcdFx0Y29uc3Qgb3B0VmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblx0XHRcdG9wdFZhbC52YWx1ZSA9IHZhbC52YWx1ZTtcblx0XHRcdG9wdFZhbC50ZXh0ID0gdmFsLmxhYmVsO1xuXHRcdFx0c2VsZWN0LmFwcGVuZChvcHRWYWwpO1xuXHRcdH1cblx0fVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9