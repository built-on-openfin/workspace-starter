/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/workspace-platform/index.js":
/*!***************************************************************!*\
  !*** ../../node_modules/@openfin/workspace-platform/index.js ***!
  \***************************************************************/
/***/ ((module) => {

/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={525:e=>{var t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var i,s,c=o(e),d=1;d<arguments.length;d++){for(var p in i=Object(arguments[d]))a.call(i,p)&&(c[p]=i[p]);if(t){s=t(i);for(var l=0;l<s.length;l++)n.call(i,s[l])&&(c[s[l]]=i[s[l]])}}return c}},535:(e,t,a)=>{var n=a(525),o=60103,r=60106;var i=60109,s=60110,c=60112;var d=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var l=Symbol.for;o=l("react.element"),r=l("react.portal"),l("react.fragment"),l("react.strict_mode"),l("react.profiler"),i=l("react.provider"),s=l("react.context"),c=l("react.forward_ref"),l("react.suspense"),d=l("react.memo"),p=l("react.lazy")}var u="function"==typeof Symbol&&Symbol.iterator;function w(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function y(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||f}function h(){}function m(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(w(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=y.prototype;var v=m.prototype=new h;v.constructor=m,n(v,y.prototype),v.isPureReactComponent=!0;var S={current:null},P=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var n,r={},i=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)P.call(t,n)&&!b.hasOwnProperty(n)&&(r[n]=t[n]);var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];r.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===r[n]&&(r[n]=c[n]);return{$$typeof:o,type:e,key:i,ref:s,props:r,_owner:S.current}}function W(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var C=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case r:c=!0}}if(c)return i=i(c=e),e=""===n?"."+I(c,0):n,Array.isArray(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),A(i,t,a,"",(function(e){return e}))):null!=i&&(W(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(c=0,n=""===n?".":n+":",Array.isArray(e))for(var d=0;d<e.length;d++){var p=n+I(s=e[d],d);c+=A(s,t,a,p,i)}else if(p=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=u&&e[u]||e["@@iterator"])?e:null}(e),"function"==typeof p)for(e=p.call(e),d=0;!(s=e.next()).done;)c+=A(s=s.value,t,a,p=n+I(s,d++),i);else if("object"===s)throw t=""+e,Error(w(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function M(e,t,a){if(null==e)return e;var n=[],o=0;return A(e,n,"","",(function(e){return t.call(a,e,o++)})),n}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function E(){var e=T.current;if(null===e)throw Error(w(321));return e}},378:(e,t,a)=>{a(535)}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{var e,t,o,r,i,s,c,d;a.r(n),a.d(n,{AppManifestType:()=>c,BrowserButtonType:()=>g,CustomActionCallerType:()=>h,GlobalContextMenuOptionType:()=>u,PageTabContextMenuOptionType:()=>w,SaveButtonContextMenuOptionType:()=>y,SaveModalType:()=>m,ViewTabMenuOptionType:()=>f,getCurrentSync:()=>Ut,init:()=>Cn,wrapSync:()=>Dt}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(o||(o={})),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(i||(i={})),function(e){e.MultiSelect="MultiSelect"}(s||(s={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(c||(c={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(d||(d={}));var p,l,u,w,f,g,y,h,m,v;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(p||(p={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(l||(l={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.OpenStorefront="OpenStorefront",e.Quit="Quit",e.Custom="Custom"}(u||(u={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.Custom="Custom"}(w||(w={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Custom="Custom"}(f||(f={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(g||(g={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(y||(y={})),function(e){e.CustomButton="CustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(h||(h={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(m||(m={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(v||(v={}));const S="undefined"!=typeof window&&"undefined"!=typeof fin,P=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),b=P&&"undefined"!=typeof indexedDB,k=P?window.origin:v.Local,W=S&&fin.me.uuid,C=S&&fin.me.name,I=S&&fin.me.entityType,A=(v.Local,v.Dev,v.Staging,v.Prod,e=>e.startsWith("http://")||e.startsWith("https://")?e:k+e),M=(A("https://cdn.openfin.co/workspace/9.0.7"),A("https://cdn.openfin.co/workspace/9.0.7")),O=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&A(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&A(WORKSPACE_DOCS_CLIENT_URL),"26.102.71.5"),T="9.0.7";var E,B,x;!function(e){e.Workspace="openfin-browser"}(E||(E={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(B||(B={})),function(e){e.FinProtocol="fin-protocol"}(x||(x={}));const R={uuid:W},_=(E.Workspace,e=>{if(!S)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),L=()=>_(R);var V,D;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(V||(V={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(D||(D={}));function U(e){if(!S)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const F={name:C,uuid:W};function G(){return U(F)}V.Home,E.Workspace,V.Dock,E.Workspace;const $={name:V.Storefront,uuid:E.Workspace};E.Workspace,E.Workspace;async function N(e){const t=U(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.setAsForeground()}const j=e=>e.startsWith(V.BrowserWindow);async function H(){return(await fin.Application.getCurrentSync().getChildWindows()).filter((e=>j(e.identity.name)))}const q=e=>U(e).getOptions().then((()=>!0)).catch((()=>!1)),K=()=>q($);var Q;!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(Q||(Q={}));const z=async(e,t)=>{const a={apiVersion:t.apiVersion||T,componentName:e,componentVersion:t.componentVersion||T,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:a})};a(378);const J=e=>fin.System.getSystemAppConfig(e);let X;async function Y(){if(X)return X;if(!S)return{};const e=await async function(){if(S)try{let e=await J("workspace").catch((e=>{}));return e||(e=await J("home")),e}catch(e){}}(),t=await async function(){const{manifest:e,initialOptions:t}=await fin.Application.getCurrentSync().getInfo();return e?.workspace||e?.home||t?.workspace||t?.home,e?.workspace?e?.workspace:e?.home?e?.home:t?.workspace?t?.workspace:t?.home?t?.home:void 0}();return X={...t,...e},X}var Z;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition"}(Z||(Z={}));const ee=Z,te=(e,t)=>{localStorage.setItem(`${W}-${e}`,t)},ae=e=>localStorage.getItem(`${W}-${e}`);var ne;!function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.SharePage="sharePage",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetThemes="getThemes",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized"}(ne||(ne={}));const oe=async e=>fin.Platform.wrapSync(e).getClient(),re=async e=>{const t=await oe(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if(!0!==n?.isWorkspacePlatform)throw new Error(a);return n},ie=async e=>(await re(e),oe(e)),se=async e=>{if(!0!==(await re(e))?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return oe(e)},ce=(e,t)=>!t.find((t=>t===e)),de=(e,t)=>`${e} (${t})`,pe=(e,t)=>{let a=1;const n=e.replace(/ \(.+\)$/,"");for(;!ce(de(n,a),t);)a+=1;return de(n,a)};async function le(e){try{const t=Ut();await t.applySnapshot(e.snapshot,{closeExistingWindows:!0}),ue(e)}catch(e){}}function ue(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);te(ee.CurrentWorkspaceId,t)}catch(e){}}async function we(){if("undefined"==typeof localStorage)return;const e=Ut(),t=await e.getSnapshot();return{workspaceId:crypto.randomUUID(),title:await ye(),metadata:{APIVersion:T},snapshot:t}}async function fe(){if("undefined"==typeof localStorage)return;const e=ae(ee.CurrentWorkspaceId);if(!e)return we();const t=JSON.parse(e),a=Ut(),n=await a.getSnapshot();return{...t,metadata:{APIVersion:T},snapshot:n}}const ge=async e=>await(async e=>(await ie(F)).dispatch(ne.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await ie(F)).dispatch(ne.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await ie(F)).dispatch(ne.CreateSavedWorkspace,e))({workspace:e});async function ye(e="Untitled Workspace"){const t=(await(async()=>(await ie(F)).dispatch(ne.GetSavedWorkspaces,void 0))()).map((({title:e})=>e));return t.find((t=>t===e))?pe(e,t):e}async function he(){if("undefined"!=typeof localStorage)try{const e=ae(ee.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await q(t))return t}catch(e){throw new Error(`failed to get last focused browser window: ${e}`)}}function me(e=fin.me.identity){j(e.name)&&function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);te(ee.LastFocusedBrowserWindow,t)}catch(e){}}(e)}const ve=(e,t=0)=>{let a,n,o=!1;const r=async n=>{const i=await e(...n);if(o){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,o=!1,r(e)}return i};return(...e)=>(n?(o=!0,a=e):n=r(e).catch((e=>{throw e})).finally((()=>{n=void 0})),n)};var Se;!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(Se||(Se={}));const Pe=(e,t)=>e.content?{...e,content:e.content.map((e=>Pe(e,t)))}:{...e,componentState:t(e.componentState)},be=e=>({...e,name:e.name?e.name:crypto.randomUUID()}),ke=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=ke(e.content);t.push(...a)})),t},We=async(e,t,a=F)=>{let n;if(j(a.name)){n=(await U(a).getOptions()).layout||{settings:{}}}return{...n,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map;function Ce(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function Ie(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function Ae(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),o=(...e)=>{a(...e),n.delete(o)};n.add(o)}}function Me(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}const Oe=P&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function Te(e){let t;return()=>{if(!S)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await Oe;const a={clientAPIVersion:T},n=await fin.InterApplicationBus.Channel.connect(e,{payload:a});return n.onDisconnection((async()=>{t=void 0})),n})().then((e=>e)).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}const Ee=e=>`__browser_window__-${e.uuid}-${e.name}`,Be=new Map,xe=e=>{const t=Ee(e);return Be.has(t)||Be.set(t,Te(t)),Be.get(t)()};var Re,_e;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page"}(Re||(Re={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(_e||(_e={}));const Le={...Re,..._e};var Ve;!function(e){e.AttachedPagesToWindow="attached-pages-to-window",e.DetachedPagesFromWindow="detached-pages-from-window"}(Ve||(Ve={}));new Map;const De=async e=>{const t=await xe(e);return await t.dispatch(Le.GetPages)},Ue=async e=>(await xe(e.identity)).dispatch(Le.UpdatePageForWindow,e),Fe=async()=>{const e=await H();return(await Promise.all(e.map((async({identity:e})=>De(e))))).reduce(((e,t)=>e.concat(t)),[])},Ge=async()=>(await ie(F)).dispatch(ne.GetSavedPages,void 0),$e=async e=>(await ie(F)).dispatch(ne.GetSavedPage,e),Ne=async(e,t)=>{const a=await(async e=>(await Fe()).find((t=>t.pageId===e)))(e);return!a||a.title===t.title&&e===t.pageId||await Ue({identity:a.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),a},je=async({page:e})=>{await Ne(e.pageId,e),await(async e=>(await ie(F)).dispatch(ne.CreateSavedPage,e))({page:e})},He=async e=>{await $e(e)&&await(async e=>(await ie(F)).dispatch(ne.DeleteSavedPage,e))(e)},qe=async({pageId:e,page:t})=>{await Ne(e,t);return await(async e=>(await ie(F)).dispatch(ne.UpdateSavedPage,e))({pageId:e,page:t})},Ke=async e=>await $e(e.pageId)?qe({pageId:e.pageId,page:e}):je({page:e}),Qe=async e=>{await(async e=>(await xe(e.identity)).dispatch(Le.AttachPagesToWindow,e))(e)},ze=async e=>{await Ue(e)},Je=async e=>{await(async e=>(await xe(e.identity)).dispatch(Le.DetachPagesFromWindow,e))(e)},Xe=async e=>{await(async e=>(await xe(e.identity)).dispatch(Le.SetActivePageForWindow,e))(e)},Ye=e=>De(e),Ze=async({identity:e,pageId:t})=>(await Ye(e)).find((e=>e.pageId===t)),et=async e=>{await(async e=>(await xe(e.identity)).dispatch(Le.ReorderPagesForWindow,e))(e)};async function tt(e="Untitled Page"){const[t,a]=await Promise.all([Ge(),Fe()]),n=[...t,...a].map((({title:e})=>e));return n.find((t=>t===e))?pe(e,n):e}const at=new Map,nt=e=>`${e.uuid}-${e.name}`;const ot=ve((async function(){let e=[];try{e=await Fe()}catch(e){return void at.forEach(((e,t)=>{clearTimeout(e),at.delete(t)}))}const t=new Set;e.forEach((e=>{ke(e.layout.content).forEach((e=>{if(e.name){const a=nt(e);t.add(a)}}))}));const a=G();(await a.getCurrentViews()).forEach((({identity:e})=>{const a=nt(e);if(t.has(a)||at.has(a))return;const n=setTimeout((()=>{fin.View.wrapSync(e).destroy(),at.delete(a)}),5e3);at.set(a,n)})),at.forEach(((e,a)=>{t.has(a)&&(clearTimeout(e),at.delete(a))}))}),2500),rt=({name:e})=>{e&&j(e)&&ot().catch((()=>{}))};let it={};const st=({actionId:e,payload:t})=>{if("function"!=typeof it[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return it[e](t)};function ct(){return localStorage.getItem(ee.MachineName)}let dt;async function pt(){return dt||(dt=await fin.System.getMachineId()),dt}const lt=e=>{if(e.layout&&Array.isArray(e.workspacePlatform?.pages)){const t=e.workspacePlatform.pages.find((e=>e.isActive));if(t)if(t.isLocked){const a=((e,t)=>{const a=ke(t.content);return{...Pe(e,(e=>{const t=a.find((t=>t.name===e.name&&t.uuid===e.uuid)),n=t?t.isClosable:e.isClosable;return{...e,isClosable:n}})),settings:t.settings}})(e.layout,t.layout);t.layout=a,e.layout=a}else t.layout=e.layout}return e};async function ut(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const a=ct();return{...t,snapshotDetails:{...e.snapshotDetails,machineId:await pt(),machineName:a}}}function wt(e){return new Promise(((t,a)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>a(e.error)}))}function ft(e,t){const a=indexedDB.open(e);a.onupgradeneeded=()=>a.result.createObjectStore(t);const n=wt(a);return(e,a)=>n.then((n=>a(n.transaction(t,e).objectStore(t))))}let gt;function yt(){return gt||(gt=ft("keyval-store","keyval")),gt}function ht(e,t=yt()){return t("readonly",(t=>wt(t.get(e))))}function mt(e,t,a=yt()){return a("readwrite",(a=>(a.put(t,e),wt(a.transaction))))}function vt(e,t=yt()){return t("readwrite",(t=>(t.delete(e),wt(t.transaction))))}function St(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},wt(e.transaction)}function Pt(e=yt()){return e("readonly",(e=>{if(e.getAllKeys)return wt(e.getAllKeys());const t=[];return St(e,(e=>t.push(e.key))).then((()=>t))}))}const bt=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),kt=b&&ft("openfin-home-pages","pages");async function Wt(e){const t=await ht(e,kt);return t?(t.pageId=e.toString(),t.title=t.title||t.pageId,t):null}async function Ct(e){const t=await Pt(kt),a=await Promise.all(t.map((e=>Wt(e.toString()))));return e?a.filter((t=>bt(t.title,e))):a}async function It({page:e}){await mt(e.pageId,e,kt)}async function At(e){await vt(e,kt)}async function Mt({pageId:e,page:t}){if(void 0===await Wt(e))throw new Error("page not found");await It({page:t}),e!==t.pageId&&await At(e)}var Ot;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(Ot||(Ot={}));const Tt={type:Ot.Separator,data:void 0};var Et;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(Et||(Et={}));Te("__of_workspace_protocol__");const Bt=async(e,t)=>{const a=await(async e=>({...e,layoutDetails:{machineId:await pt(),machineName:ct()}}))(t);return{pageId:crypto.randomUUID(),title:e,layout:a,isReadOnly:!1,hasUnsavedChanges:!0}},xt=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),getPages:async()=>(await se(e)).dispatch(ne.GetPagesForWindow,e),getPage:async t=>(await se(e)).dispatch(ne.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>{const a=await se(e);t?.title||(t.title=await a.dispatch(ne.GetUniquePageTitle,void 0));const n=(await a.dispatch(ne.GetAllAttachedPages,void 0)).find((e=>e.pageId===t.pageId||e.title===t.title));if(n)throw n.pageId===t.pageId?new Error(`page with id ${t.pageId} is already attached to a browser window ${n.parentIdentity.name}`):new Error(`page with title ${t.title} is already attached to a browser window ${n.parentIdentity.name}`);const o={identity:e,pages:[t]};return a.dispatch(ne.AttachPagesToWindow,o)},removePage:async t=>(await se(e)).dispatch(ne.DetachPagesFromWindow,{identity:e,pageIds:[t]}),setActivePage:async t=>(await se(e)).dispatch(ne.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await se(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await se(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},_openViewTabContextMenu:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await se(e);return(await xe(e)).dispatch(Le.OpenSaveModalInternal,t)},_openSaveButtonContextMenu:async t=>{const a=await se(e);return t.identity=e,a.dispatch(ne.OpenSaveButtonContextMenuInternal,t)}});let Rt=!1;const _t=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>xt(e),createWindow:async a=>{await se(e),Rt||(Rt=!0,(async e=>{z(Q.Browser,e)})({allowed:!0}));const n=await t.createWindow(a);return xt(n.identity)},getAllAttachedPages:async()=>(await se(e)).dispatch(ne.GetAllAttachedPages,void 0),getAllWindows:async()=>{await se(e);return(await fin.Application.wrapSync(e).getChildWindows()).filter((e=>e.identity.name.includes("internal-generated-window-"))).map((e=>xt(e.identity)))},getUniquePageTitle:async t=>(await se(e)).dispatch(ne.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await se(e)).dispatch(ne.GetLastFocusedBrowserWindow,void 0)}},Lt=e=>({createPage:async t=>(await se(e)).dispatch(ne.CreateSavedPageInternal,t),deletePage:async t=>(await se(e)).dispatch(ne.DeleteSavedPageInternal,t),updatePage:async t=>(await se(e)).dispatch(ne.UpdateSavedPageInternal,t),getPage:async t=>(await se(e)).dispatch(ne.GetSavedPage,t),getPages:async t=>(await se(e)).dispatch(ne.GetSavedPages,t),savePage:async t=>(await se(e)).dispatch(ne.SavePage,t),createWorkspace:async t=>(await ie(e)).dispatch(ne.CreateSavedWorkspace,t),deleteWorkspace:async t=>(await ie(e)).dispatch(ne.DeleteSavedWorkspace,t),updateWorkspace:async t=>(await ie(e)).dispatch(ne.UpdateSavedWorkspace,t),getWorkspace:async t=>(await ie(e)).dispatch(ne.GetSavedWorkspace,t),getWorkspaces:async t=>(await ie(e)).dispatch(ne.GetSavedWorkspaces,t),saveWorkspace:async t=>(await ie(e)).dispatch(ne.SaveWorkspace,t)}),Vt=e=>({getThemes:async()=>(await ie(e)).dispatch(ne.GetThemes,void 0)}),Dt=e=>{const t=fin.Platform.wrapSync(e);return Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),launchApp:async t=>{t.target||(t.target={uuid:W,name:C,entityType:I||"unknown"});return(await ie(e)).dispatch(ne.LaunchApp,t)},_invokeCustomAction:async(t,a)=>{const n=await ie(e),o={actionId:t,payload:{...a,callerType:a.callerType||h.API}};return n.dispatch(ne.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await ie(e)).dispatch(ne.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await ie(e)).dispatch(ne.GetCurrentWorkspace,void 0),applyWorkspace:async t=>(await ie(e)).dispatch(ne.ApplyWorkspace,t),setActiveWorkspace:async t=>(await ie(e)).dispatch(ne.SetActiveWorkspace,t),Theme:Vt(e),Browser:_t(e),Storage:Lt(e)})},Ut=()=>Dt(fin.me.identity),Ft=async(e=F)=>{const{workspacePlatform:t}=await U(e).getOptions(),a=t?.newPageUrl,n=t?.newTabUrl;return{newPageUrl:a,newTabUrl:n}},Gt=async(e=F)=>{const t=await Ut().Browser.getUniquePageTitle("Untitled Page"),a=await(async(e=F)=>{const{newPageUrl:t}=await Ft(e);if(!t)throw new Error("Trying to create a new page without a newPageUrl set");return We("New Tab",t,e)})(e);return Bt(t,a)},$t={type:Ot.Label,label:"Close Window",data:{type:u.CloseWindow}},Nt={type:Ot.Label,label:"Open Storefront",data:{type:u.OpenStorefront}},jt={type:Ot.Label,label:"Quit Platform",data:{type:u.Quit}},Ht={type:Ot.Label,label:"New Window",data:{type:u.NewWindow}},qt={type:Ot.Label,label:"Save Page",data:{type:u.SavePage}},Kt={type:Ot.Label,label:"Save Page As...",data:{type:u.SavePageAs}},Qt={type:Ot.Label,label:"Restore to Last Saved Changes",data:{type:u.RestoreChanges}},zt={type:Ot.Label,label:"Save Workspace",data:{type:u.SaveWorkspace}},Jt={type:Ot.Label,label:"Save Workspace As...",data:{type:u.SaveWorkspaceAs}},Xt={type:Ot.Label,label:"Rename Workspace",data:{type:u.RenameWorkspace}},Yt="Switch Workspace",Zt="Delete Workspace",ea=[$t,Tt,Nt,Tt,jt],ta=[Tt,$t,Tt,jt],aa=(e,t,a)=>t.map((t=>{const n=t.workspaceId===e.workspaceId;return{label:t.title,type:Ot.Checkbox,enabled:!n,checked:n,data:{type:a,workspaceId:t.workspaceId}}})),na=async e=>{const t=await K(),{newPageUrl:a}=await Ft(e),n=await(async e=>{const t=U(e),{workspacePlatform:a}=await t.getOptions();return a?.disableMultiplePages})(e),o=await(async e=>{const t=U(e),{workspacePlatform:a}=await t.getOptions();return a?.isLocked})(e),r=[];var i;a&&(r.push(Ht),n||r.push((i=!o,{type:Ot.Label,label:"New Page",data:{type:u.NewPage},enabled:i}))),r.push(Tt);const s=Ut(),c=await s.getCurrentWorkspace(),d=await s.Storage.getWorkspaces(),p=d.find((e=>e.workspaceId===c.workspaceId));return p?r.push(Qt):r.push({label:Qt.label,enabled:!1}),r.push(zt,Jt),p?r.push(Xt):r.push({label:Xt.label,enabled:!1}),d.some((e=>e.workspaceId!==c.workspaceId))?r.push({label:Yt,submenu:aa(c,d,u.SwitchWorkspace)},{label:Zt,submenu:aa(c,d,u.DeleteWorkspace)}):r.push({label:Yt,enabled:!1},{label:Zt,enabled:!1}),r.push(Tt,qt,Kt),t?[...r,...ea]:[...r,...ta]};let oa="Platform";const ra=async()=>oa;var ia,sa,ca;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.BrowserPagesLanding="/browser/pages/landing/",e.HomeIndicator="/home/indicator/",e.Browser="/browser/",e.BrowserPopupMenu="/browser/popup-menu/",e.Provider="/provider/",e.BrowserPopupMenuSharePage="/browser/popup-menu/share-page/",e.BrowserPopupMenuSaveModal="/browser/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/browser/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/browser/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/browser/indicator/",e.ResponseModal="/browser/popup-menu/response-modal/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/"}(ia||(ia={})),function(e){e.IconOpenFinLogo="/icons/openfinlogo.svg",e.IconFilter="/icons/filter.svg"}(sa||(sa={})),function(e){e.Search="search"}(ca||(ca={}));const da={...sa,...ia};var pa;!function(e){e.Home="/home",e.Browser="/browser",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(pa||(pa={}));const la="/workspace/9.0.7";function ua(){return la.substring(0,la.length-"".length)}function wa(e){if(!P)throw new Error("getAbsoluteRoutePath can only be used in a window");return function(){if(!window)throw new Error("getAbsoluteBasePath can only be used in a window");return`${window.origin}${ua()}`}()+e}const fa={name:V.BrowserMenu,alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!0};function ga(e){const t={...fa,...e};return t.url=function(e){if(!P)throw new Error("resolveAbsolutePath can only be used in a window");return e.startsWith("http")?e:`${window.origin}${e}`}(t.url),t}var ya,ha;!function(e){e.Update="update",e.Response="response"}(ya||(ya={})),function(e){e.Canceled="canceled",e.Negative="negative",e.Affirmative="affirmative"}(ha||(ha={}));const ma=function(e){const t=new Map;return{emit:Ce(t,(t=>S&&fin.InterApplicationBus.publish(e,t))),addListener:Ie(t,(t=>S&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),removeListener:Me(t),once:Ae(t)}}("window.menu"),va=e=>ma.emit(ya.Response,e),Sa=ve((()=>L().getChildWindows()),500);const Pa=new Map;async function ba({options:e,parameters:t},a){const n=ga(e),{name:o}=n;let r=await async function(e){return(await Sa()).find((t=>t.identity.name===e))}(o);return r||(r=await async function(e){const t=ga(e);if(!Pa.has(t.name)){const e=(async()=>{const e=await fin.Platform.getCurrentSync().createWindow(t);return e.once("closed",(()=>{Pa.delete(t.name)})),e})();Pa.set(t.name,e)}return Pa.get(t.name)}(n)),await async function(e,t){const a=ga(e),{top:n,left:o,defaultWidth:r,defaultHeight:i}=a,s={top:n,left:o,width:r,height:i},c={parentName:fin.Window.getCurrentSync().identity.name};for(const[e,a]of Object.entries(c))t.set(e,a);const d=t.toString(),p=`${a.url}?${d}`;ma.emit(ya.Update,a.name,s,p),await va({name:a.name,data:ha.Canceled})}(e,t||new URLSearchParams),a&&r.center(),r}const ka=async(e,t,a)=>{const n=t?U(t):G();if(!a){await(async(e=fin.me.identity)=>{const t=U(e),a=await t.getBounds();(a.right>screen.availLeft+screen.width||a.left<screen.availLeft||a.bottom>screen.availTop+screen.height||a.top<screen.availTop)&&await t.center()})(n.identity);const t=(e=>({left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}))(await n.getBounds()),{defaultHeight:a,defaultWidth:o}=e;return((e,t)=>{const{height:a,width:n}=t,o=n/2,r=a/2;return{left:e.left-o,top:e.top-r}})(t,{height:a,width:o})}return await n.getBounds()},Wa=async({options:e,content:t},a)=>{const n=new URLSearchParams({...t});return await ba({options:e,parameters:n},a),new Promise((t=>{ma.once(ya.Response,(a=>{a.name===e.name&&t(a)}))}))},Ca=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>({title:"Switch Workspace",windowOptions:{url:M+da.ResponseModal,name:V.BrowserMenu,defaultHeight:112,defaultWidth:424,modalParentIdentity:e},content:{title:`Are you sure you want to switch to ${t}`,body:"Any unsaved changes will be discarded",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e,t),o=await ka(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return(await Wa({options:r,content:n})).data===ha.Affirmative},Ia=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>({title:"Delete Workspace",windowOptions:{url:M+da.ResponseModal,name:V.BrowserMenu,defaultHeight:144,defaultWidth:372,modalParentIdentity:e},content:{title:"Are you sure you want to permanently delete this workspace?",body:`${t}`,affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e,t),o=await ka(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return(await Wa({options:r,content:n})).data===ha.Affirmative},Aa=async(e,t,a)=>{const n=a?void 0:e,{windowOptions:o,content:r}=await(async(e,t)=>({title:"Platform Quit",windowOptions:{url:M+da.ResponseModal,name:V.BrowserMenu,defaultHeight:134,defaultWidth:474,modalParentIdentity:t},content:{title:`Close the ${"Platform"===e?"platform":`${e} Platform`}?`,body:"Closing a platform will close any workspaces, apps or any processes that are running.",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(t,n),i=await ka(o,o.modalParentIdentity),s={...o,top:i.top,left:i.left};return(await Wa({options:s,content:r},a)).data===ha.Affirmative},Ma=async e=>{const{windowOptions:t,content:a}=await(async e=>({title:"Restore Changes",windowOptions:{url:M+da.ResponseModal,name:V.BrowserMenu,defaultHeight:112,defaultWidth:424,modalParentIdentity:e},content:{title:"Are you sure you want to restore to last saved changes?",body:"Any unsaved changes will be discarded",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e),n=await ka(t,t.modalParentIdentity),o={...t,top:n.top,left:n.left};return(await Wa({options:o,content:a})).data===ha.Affirmative};var Oa;!function(e){e.ERROR="error",e.SUCCESS="success",e.INFO="info"}(Oa||(Oa={}));const Ta={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};var Ea;!function(e){e.Locked="LockClosedIcon",e.Unlocked="LockOpen1Icon"}(Ea||(Ea={}));const Ba=function(e=Ta){const t=new Map;return async(a,n,o,r)=>{if(t.has(a)){const{currentUrl:e,currentName:o}=t.get(a);if(e===n)return;const r=fin.Window.wrapSync({uuid:fin.me.uuid,name:o});await r.close()}const i=`${V.HomeInternal}-${Date.now()}${Math.random()}`;t.set(a,{currentUrl:n,currentName:i});const s=await fin.Platform.getCurrentSync().createWindow({...e,name:i,url:n});((e,t)=>{const a=document.createElement("div");a.setAttribute("aria-live",t||"polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(a),document.body.appendChild(a),setTimeout((()=>{a.innerHTML=e}),100),setTimeout((()=>{document.body.removeChild(a)}),1e3)})(`New ${r} indicator: ${o}`),s.once("closed",(()=>{t.delete(a)}))}}();async function xa(e,t,a,n){const o=new URLSearchParams;o.append("type",e),o.append("message",t),o.append("parentName",a||""),o.append("icon",n||"");const r=`${wa(da.BrowserIndicator)}?${o.toString()}`;return Ba("browser"+a,r,t,e)}function Ra(e,t,a){return xa(Oa.SUCCESS,e,t,a)}const _a=async e=>{const t=Ut(),a=await t.getCurrentWorkspace(),n=await t.Storage.getWorkspaces(),o=a.workspaceId;if(n.some((e=>e.workspaceId===o)))t.Storage.saveWorkspace(a),t.setActiveWorkspace(a),Ra("Workspace Saved",e.name);else{t.Browser.wrapSync(e)._openSaveModal({menuType:m.SAVE_WORKSPACE})}},La=e=>{Ut().Browser.wrapSync(e)._openSaveModal({menuType:m.SAVE_WORKSPACE_AS})},Va=async(e,t)=>{const a=Ut().Browser.wrapSync(e),n=await Ut().Storage.getPages(),o=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive)),r=n.some((e=>o.pageId===e.pageId));if(r)try{await Ut().Storage.savePage((d=o,{...d,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0})),await a.updatePage({pageId:o.pageId,page:{hasUnsavedChanges:!1}}),Ra("Page saved",o.parentIdentity.name)}catch{i="Page failed to save",s=o.parentIdentity.name,xa(Oa.ERROR,i,s,c)}else a._openSaveModal({id:o.pageId,menuType:m.SAVE_PAGE});var i,s,c,d},Da=async(e,t)=>{const a=Ut().Browser.wrapSync(e),n=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive));a._openSaveModal({id:n.pageId,menuType:m.SAVE_PAGE_AS})},Ua=async(e,t)=>{if(!e)return;const a=t.identity,n=await xe(a),o=Ut().Browser.wrapSync(t.identity);switch(e.type){case u.NewWindow:const{newPageUrl:t}=await Ft(a);if(!t)throw new Error("Trying to create a new empty window without a newPageUrl set");Ut().createView({target:void 0,url:t});break;case u.NewPage:await(async e=>{const t=Ut().Browser.wrapSync(e),a=await Gt(e);await t.addPage(a),await t.setActivePage(a.pageId)})(a);break;case u.CloseWindow:n.dispatch(Le.CloseBrowserWindow);break;case u.SaveWorkspace:await _a(a);break;case u.SavePage:await Va(a);break;case u.SavePageAs:await Da(a);break;case u.SaveWorkspaceAs:await La(a);break;case u.RenameWorkspace:o._openSaveModal({menuType:m.RENAME_WORKSPACE});break;case u.SwitchWorkspace:await(async(e,t)=>{const a=Ut(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n&&await Ca(e,n.title)&&(await a.applyWorkspace(n),Ra("Workspace Switched!",null))})(a,e);break;case u.DeleteWorkspace:await(async(e,t)=>{const a=Ut(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n&&await Ia(e,n.title)&&(await a.Storage.deleteWorkspace(t.workspaceId),Ra("Workspace Deleted!",e.name))})(a,e);break;case u.Quit:const r=await ra();await Aa(a,r)&&fin.Platform.getCurrentSync().quit();break;case u.OpenStorefront:(async()=>{await K()&&N($)})();break;case u.RestoreChanges:const i=await async function(){const e=Ut(),t=await e.getCurrentWorkspace();return(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId))}();await Ma(a)&&await le(i);break;case u.Custom:if(e.action){const t={callerType:h.GlobalContextMenu,windowIdentity:a,customData:e.action.customData};Ut()._invokeCustomAction(e.action.id,t)}}},Fa=async(e,t)=>{const a=await xe(t.identity),n=Ut();switch(e?.type){case w.Save:await Va(t.identity,t.pageId);break;case w.SaveAs:await Da(t.identity,t.pageId);break;case w.Rename:await n.Browser.wrapSync(t.identity)._openSaveModal({menuType:m.RENAME_PAGE,id:t.pageId});break;case w.Duplicate:a.dispatch(Le.DuplicatePage,t.pageId);break;case w.Close:a.dispatch(Le.ClosePage,t.pageId);break;case w.Custom:if(e.action){const a={callerType:h.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Ut()._invokeCustomAction(e.action.id,a)}}},Ga=async(e,t)=>{if(e?.type){const a=t.identity;switch(e.type){case y.SavePage:await Va(a);break;case y.SaveWorkspace:await _a(a);break;case y.SavePageAs:await Da(a);break;case y.SaveWorkspaceAs:await La(a);break;case y.Custom:if(e.action){const a={callerType:h.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Ut()._invokeCustomAction(e.action.id,a)}}}},$a=async(e,t)=>{const a=t.selectedViews[0],n=fin.View.wrapSync(a),o=await(async e=>{const{newTabUrl:t}=await Ft(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{...We("New View",t),url:t,target:e}})(e);await Ut().createView(o,e,n.identity)},Na=async(e,t)=>{const a=await(e=>Promise.all(e.map((async e=>fin.View.wrapSync(e).getInfo()))))(t),{newPageUrl:n,newTabUrl:o}=await Ft(e);a.forEach((async e=>{e.url!==n&&e.url!==o&&await fin.System.openUrlWithBrowser(e.url)}))},ja=(e,t)=>{t.forEach((async t=>{const a=fin.View.wrapSync(t);await(async(e,t)=>{const{url:a}=await t.getInfo(),n={...await t.getOptions(),url:a,target:e,name:void 0};await Ut().createView(n,e,t.identity)})(e,a)}))},Ha=async(e,t)=>{if(!e)return;const a=t.identity;switch(e.type){case f.CloseViews:await(async(e,t)=>{if((await fin.Window.wrapSync(e).getCurrentViews()).length!==t.length)t.forEach((async e=>{const t=fin.View.wrapSync(e);await t.destroy()}));else{const t=(await Ut().Browser.wrapSync(e).getPages()).find((e=>e.isActive));(await xe(e)).dispatch(Le.ClosePage,t?.pageId)}})(a,t.selectedViews);break;case f.OpenWithDefaultBrowser:await Na(a,t.selectedViews);break;case f.ReloadViews:t.selectedViews.forEach((async e=>{const t=fin.View.wrapSync(e);await t.reload()}));break;case f.NewView:await $a(a,t);break;case f.DuplicateViews:ja(a,t.selectedViews);break;case f.AddToChannel:(async(e,t,a)=>{const n={newChannelId:t,selectedViews:a};(await xe(e)).dispatch(Le.AddToChannel,n)})(a,e.option,t.selectedViews);break;case f.RemoveFromChannel:(async(e,t)=>{(await xe(e)).dispatch(Le.RemoveFromChannel,t)})(a,t.selectedViews);break;case f.Custom:if(e.action){const n={callerType:h.ViewTabContextMenu,windowIdentity:a,selectedViews:t.selectedViews,customData:e.action.customData};Ut()._invokeCustomAction(e.action.id,n)}}};async function qa(e,t){const a=await na(e.identity),n=await ra();a.find((e=>e.data?.type===u.Quit)).label=`Quit ${n}`;const o={...e,template:a,callback:Ua};await this.openGlobalContextMenu(o,t)}const Ka=async(e,t)=>{const{x:a,y:n,identity:o,template:r,callback:i}=e,{data:s}=await function(e,t){if(!S)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:a,y:n,template:r},fin.Window.wrapSync(o));i(s,e)};async function Qa(e,t){const a={...e,callback:Ha};await this.openViewTabContextMenu(a,t)}async function za(e,t){const a=await(async(e,t)=>{const a=await Ut().Storage.getPage(e),n=(await Fe()).find((t=>t.pageId===e)),{workspacePlatform:o}=await U(t).getOptions(),r=!(o.isLocked||o.preventPageClose||n.closeButton?.disabled||n.closeButton?.hidden);return[{type:Ot.Label,label:"Save Page",data:{type:w.Save}},{type:Ot.Label,label:"Save Page As",data:{type:w.SaveAs}},Tt,{type:Ot.Label,label:"Rename Page",data:{type:w.Rename},enabled:!!a},{type:Ot.Label,label:"Duplicate Page",data:{type:w.Duplicate},enabled:!o.isLocked},Tt,{type:Ot.Label,label:"Close Page",data:{type:w.Close},enabled:r}]})(e.pageId,e.identity),n={...e,template:a,callback:Fa};await this.openPageTabContextMenu(n,t)}async function Ja(e,t){const a={...e,template:await(async()=>[{type:Ot.Label,label:"Save Workspace",data:{type:y.SaveWorkspace}},{type:Ot.Label,label:"Save Workspace As",data:{type:y.SaveWorkspaceAs}},{type:Ot.Separator,data:void 0},{type:Ot.Label,label:"Save Page",data:{type:y.SavePage}},{type:Ot.Label,label:"Save Page As",data:{type:y.SavePageAs}}])(),callback:Ga};await this.openSaveButtonContextMenu(a,t)}const Xa=b&&ft("openfin-workspace-platform-workspaces","workspaces");async function Ya(e){const t=await ht(e,Xa);return t?(t.workspaceId=e.toString(),t.title=t.title||t.workspaceId,t):null}async function Za(e){const t=await Pt(Xa),a=await Promise.all(t.map((e=>Ya(e.toString()))));return e?a.filter((t=>bt(t.title,e))):a}async function en({workspace:e}){await mt(e.workspaceId,e,Xa)}async function tn(e){await vt(e,Xa)}async function an({workspaceId:e,workspace:t}){if(void 0===await Ya(e))throw new Error("workspace not found");await en({workspace:t}),e!==t.workspaceId&&await tn(e)}async function nn({app:e,target:t}){const a=fin.Platform.getCurrentSync();switch(e.manifestType){case c.Snapshot:return a.applySnapshot(e.manifest);case c.View:return async function(e,t){const a=fin.Platform.getCurrentSync();if("view"===t.entityType){const a=fin.View.wrapSync(t),n=await a.getParentLayout();return await n.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),a.destroy()}return a.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case c.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}const on=e=>e&&"object"==typeof e&&!Array.isArray(e);function rn(e,...t){if(!t.length)return e;const a=t.shift();return on(e)&&on(a)&&Object.entries(a).forEach((([t,a])=>{if(on(a))return e[t]||(e[t]={}),rn(e[t],a);e[t]=a})),rn(e,...t)}const sn=M+da.Browser;function cn(e,t){const a=rn({},t,e);return a.detachOnClose=!0,a}async function dn(e,t,a){const n=e.manifestUrl?await t({manifestUrl:e.manifestUrl},a):void 0;if(n?.interop&&e.interop){const t={...e,...n,interop:e.interop};return delete t.manifestUrl,t}return e}const pn=e=>{const t=e.name===V.Home,a=e.name?.startsWith(V.HomeInternal),n=e.name?.startsWith(V.BrowserMenu);return!t&&!a&&!n},ln=e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...a})=>({...a,workspacePlatform:{pages:t||e||null}}))(e),un={contextMenuSettings:{reload:!1},backgroundThrottling:!0,url:sn,contextMenu:!0,closeOnLastViewRemoved:!1,experimental:{showFavicons:!0,defaultFaviconUrl:`${M}/icons/defaultFavicon.svg`},permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}},wn={dimensions:{borderWidth:3,headerHeight:30}},fn=async(e,t)=>{const a=await Ut().Storage.getPages(),n=await Ut().Browser.getAllAttachedPages();return e.map((e=>{let o=e.title;void 0===e.pageId&&(e.pageId=crypto.randomUUID());const r=a.find((e=>e.title===o));return(r&&r.pageId!==e.pageId||n.find((e=>e.title===o)))&&(o=pe(e.title,[...a,...n].map((e=>e.title)))),n.push({...e,title:o}),{...t,...e,title:o,layout:(i=e.layout,Pe({...i},be))};var i}))};var gn;!function(e){e.Browser="browser",e.Platform="platform",e.Classic="classic",e.Mixed="mixed"}(gn||(gn={}));const yn=e=>{const t=fin.Window.wrapSync(e);return Promise.all([t.bringToFront(),t.restore(),t.focus()])};async function hn(e){const t=(await H()).map((async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await xe(e)).dispatch(Le.UpdatePagesWindowOptions))(e.identity)}));return await Promise.all(t),e?e():ut()}const mn=async e=>{await Aa(fin.me.identity,e.title??await ra(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()};let vn=[];const Sn=()=>vn;const Pn=(e,t)=>async a=>{const n=null!==e;class o extends a{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e}),this.addPage=this.attachPagesToWindow,this.detachPagesFromWindow=Je,this.getAllAttachedPages=Fe,this.getPagesForWindow=Ye,this.getPageForWindow=Ze,this.setActivePage=Xe,this.launchApp=nn,this.savePage=Ke,this.saveWorkspace=ge,this.createSavedPageInternal=je,this.updateSavedPageInternal=qe,this.deleteSavedPageInternal=He,this.reorderPagesForWindow=et,this.getUniquePageTitle=tt,this.updatePageForWindow=ze,this.getLastFocusedBrowserWindow=he,this.getThemes=Sn,this.invokeCustomActionInternal=st,this.requestQuitPlatformDialogInternal=mn,this.getCurrentWorkspace=fe,this.applyWorkspace=le,this.setActiveWorkspace=ue,this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this)}async getSnapshot(){const e=n?await hn((async()=>ut(await super.getSnapshot(void 0,fin.me.identity)))):await ut(await super.getSnapshot(void 0,fin.me.identity));return{...e,windows:e.windows.filter(pn).map(lt)}}async applySnapshot({snapshot:e,options:t}){const a=e=>super.applySnapshot({snapshot:e,options:{...t,closeExistingWindows:!1}});let o=e;"string"==typeof o&&(o=await super.fetchManifest({manifestUrl:o},fin.me.identity));const r=function(e){let t=!1,a=!1;for(const n of e.windows){if(t&&a)break;n.workspacePlatform?.pages?.length?a=!0:n.layout&&(t=!0)}return t&&a?gn.Mixed:t?gn.Platform:a?gn.Browser:e.windows.length?gn.Classic:null}(o);if(r===gn.Mixed)throw new Error("This snapshot cannot be applied as it contains a mixture of browser and platform windows.");if(n)gn.Platform;else if(r===gn.Browser)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return t?.closeExistingWindows&&await async function(){const e=await H();await Promise.all(e.map((e=>e.close(!0).catch((()=>{})))))}(),n?async function(e,t){const a=await Fe(),n=e.snapshotDetails?.monitorInfo||await fin.System.getMonitorInfo(),[o,r]=(e.windows||[]).reduce((([e,t],a)=>a?.workspacePlatform?.pages?.length?[[...e,a],t]:[e,[...t,a]]),[[],[]]),i=new Map;a.forEach((e=>i.set(e.pageId,e)));const s=[],c=o.map((async e=>{const t=ln(e),a=[],n=(e=>{let t=!1;const a=(e||[]).map((e=>{const a=function({id:e,name:t,...a}){return{pageId:e,title:t,...a}}(e);return t&&a.isActive&&(a.isActive=!1),a.isActive&&(t=!0),a}));return!t&&a.length&&(a[0].isActive=!0),a})(t?.workspacePlatform?.pages);if(!n?.length){const e=await tt();a.push(await Bt(e,t.layout))}let o;n.forEach((e=>{const t=i.get(e.pageId);t?o=t:a.push(e)})),o&&await Promise.all([Xe({identity:o.parentIdentity,pageId:o.pageId}),yn(o.parentIdentity)]),a.length&&s.push({...t,workspacePlatform:{...t.workspacePlatform,pages:a}})}));if(await Promise.all(c),!s.length&&!r.length)return;const d=fin.Platform.getCurrentSync();return(t||d.applySnapshot.bind(d))({...e,snapshotDetails:{...e.snapshotDetails,monitorInfo:n},windows:[...s,...r]})}(o,a):a(o)}async createWindow(t,a){t.workspacePlatform?.toolbarOptions?.buttons&&(e=>{const t=e.filter((e=>e.type!==g.Custom)),a=new Set;for(const e of t){if(a.has(e.type))throw new Error(`Encountered a duplicate of ${e.type} button. No more than one instance of a button type may be provided.`);a.add(e.type)}})(t.workspacePlatform.toolbarOptions.buttons);let o=ln(t);if(n){const t=this.getThemes();o=await(async(e,t,a)=>{let n=e;const o=n?.workspacePlatform?.pages;if(o){const e=o.find((e=>e.isActive));e?n.layout=e.layout:(o[0].isActive=!0,n.layout=o[0].layout)}if(n.layout){if(n=rn({},t.defaultWindowOptions,n,un),n.layout=rn(n.layout,wn),(n.icon||n.taskbarIcon)&&(n.taskbarIconGroup=n.taskbarIconGroup||fin.me.identity.uuid),!n.backgroundColor){const e=a?.palette;n.backgroundColor=e?.background2||e?.backgroundPrimary}const e=n.workspacePlatform.newTabUrl;if(e&&(n.layout.settings||(n.layout.settings={}),n.layout.settings.newTabButton={url:e}),n=((e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a})(n,!0),!n.workspacePlatform.pages?.length){const e=await tt("Untitled Page"),t={...await Bt(e,n.layout),isActive:!0};n.workspacePlatform.pages=[t]}}return n.workspacePlatform?.pages&&(n.workspacePlatform.pages=await fn(n.workspacePlatform.pages,t?.defaultPageOptions)),n.cornerRounding&&delete n.cornerRounding,n})(o,e,t[0])}o=await(async e=>{const t=await fin.System.getMonitorInfo(),a=t.primaryMonitor.availableRect.bottom-t.primaryMonitor.availableRect.top,n=t.primaryMonitor.availableRect.right-t.primaryMonitor.availableRect.left;return e.defaultHeight=e.defaultHeight||"800",e.defaultWidth=e.defaultWidth||"800",a<e.defaultHeight&&(e.defaultHeight=a),n<e.defaultWidth&&(e.defaultWidth=n),e})(o);const r=(e,t)=>super.createWindow(e,t),i=n?(e=>async(t,a)=>{let n=!1;const o=await e(t,a);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await o.addListener(D.ShowRequested,(async()=>{if(n)return;const e=await o.getOptions();await o.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),n=!0})),o):o})(r):r;return i(o,a)}async createView(t,a){return t.opts=cn(t.opts,e?.defaultViewOptions),t.opts=await dn(t.opts,this.fetchManifest,a),super.createView(t,a)}async replaceView(t,a){return t.opts.newView=await cn(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await dn(t.opts.newView,this.fetchManifest,a),super.replaceView(t,a)}async replaceLayout(e,t){return delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async closeView(e,t){const a=fin.View.wrapSync(e.view);await super.closeView(e,t),await a.destroy().catch((e=>e))}async getSavedPage(...e){return Wt.apply(this,e)}async getSavedPages(...e){return Ct.apply(this,e)}async createSavedPage(...e){return It.apply(this,e)}async deleteSavedPage(...e){return At.apply(this,e)}async updateSavedPage(...e){return Mt.apply(this,e)}async getSavedWorkspace(...e){return Ya.apply(this,e)}async getSavedWorkspaces(...e){return Za.apply(this,e)}async createSavedWorkspace(...e){return en.apply(this,e)}async deleteSavedWorkspace(...e){return tn.apply(this,e)}async updateSavedWorkspace(...e){return an.apply(this,e)}async attachPagesToWindow(t){t.pages=await fn(t.pages,e?.defaultPageOptions),await Qe(t)}async openGlobalContextMenuInternal(...e){return qa.apply(this,e)}async openGlobalContextMenu(...e){return Ka.apply(this,e)}async openViewTabContextMenuInternal(...e){return Qa.apply(this,e)}async openViewTabContextMenu(...e){return Ka.apply(this,e)}async openPageTabContextMenuInternal(...e){return za.apply(this,e)}async openPageTabContextMenu(...e){return Ka.apply(this,e)}async openSaveButtonContextMenu(...e){return Ka.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return Ja.apply(this,e)}}return"function"==typeof t?t(o):new o};async function bn(){!function(){const e=L();e.addListener(B.WindowOptionsChanged,ot),e.addListener(B.WindowClosed,rt),e.addListener(B.WindowCreated,rt),fin.InterApplicationBus.subscribe({uuid:fin.me.identity.uuid},"browser-window-ready",rt)}(),async function(){const e=fin.Application.getCurrentSync();await e.addListener("window-focused",me)}();ue(await we())}let kn;function Wn({overrideCallback:e,interopOverride:t,browser:a}){if(!S)throw new Error("Cannot be used outside an OpenFin env.");if(!kn){fin.Platform.getCurrentSync().once("platform-api-ready",(()=>bn())),a?.title&&(n=a.title,oa=n),kn=fin.Platform.init({overrideCallback:Pn(a,e||a?.overrideCallback),interopOverride:t||a?.interopOverride}),(async e=>{z(Q.Platform,e)})({allowed:!0})}var n;return kn}const Cn=async({theme:e,customActions:t,...a})=>{const n=O.split(".").map((e=>parseInt(e))),o=await(async e=>new Promise((async t=>{(await Y()).disableRuntimeValidation&&t(!0);const a=(await fin.System.getVersion()).split(".").map((e=>parseInt(e)));t(e.every(((t,n)=>!(n<3)||a[n]===e[n])))})))(n);var r;if(e&&((r=e).forEach((e=>{const t=e.palette.backgroundPrimary;if(!t.includes("#")&&!t.includes("rgb")&&!t.includes("hsl"))throw new Error("Background primary color is not the right format.")})),vn=r,(async e=>{z(Q.Theming,e)})({allowed:!0})),t&&(it=t),o)return Wn(a);throw new Error(`Runtime version is not supported.  ${n[0]}.${n[1]}.${n[2]}.* is required`)}})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module) => {

(()=>{"use strict";var e={703:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>l.Pt,CLIFilterOptionType:()=>l.el,CLITemplate:()=>l.yW,deregister:()=>et,hide:()=>nt,register:()=>Ye,show:()=>tt});var o={};n.r(o),n.d(o,{subscribe:()=>ae});var r={};n.r(r),n.d(r,{create:()=>He});var i=n(678),s=n(532),a=n(436);const c="home";var d;!function(e){e.Commands="home-commands"}(d||(d={}));var u,p=n(806),l=(n(298),n(758));n(114),n(109),n(427);!function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(u||(u={}));var f=n(316);const w="all",g="0",h="5",y="6",v=()=>{};function m(e,t){return e?`${e}-${t}`:t}function S(e){return`__search-${e}-topic__`}const P=new Map;function C(e,t){P.has(e)||P.set(e,new Set),P.get(e).add(t)}function k(e,t){const n=P.get(e);n&&n.delete(t)}const W=new Map;function R(e,t){W.has(e)||W.set(e,new Set),W.get(e).add(t)}function T(e,t){const n=W.get(e);n&&n.delete(t)}const I=new Map;async function b(e,t){I.has(e)||I.set(e,new Map),I.get(e).set(t.id,t);const n=P.get(e);if(!n)return;const o=[...n].map((e=>e()));await Promise.all(o)}async function D(e,t){const n=I.get(e);if(!n)return;n.delete(t);const o=W.get(e);if(!o)return;const r=[...o].map((e=>e()));await Promise.all(r)}function B(e){return I.get(e)?[...I.get(e).values()]:[]}function F(e){const t=I.get(e);t&&t.clear()}function L(e,t){const n=I.get(e);return n?n.get(t):null}function A(e,t,n){return{...e,action:n||{...e.actions[0],trigger:f.px.UserAction},dispatcherIdentity:t}}function O(e,t,n="ascending"){const o=e||[];if(!t?.length)return o;const r=[],i=new Map;t.forEach((e=>{if(e.key)return i.set(e.key,e);r.push(e)}));let s=o.map((e=>{const{key:t}=e;if(t&&i.has(t)){const e=i.get(t);return i.delete(t),e}return e}));return s.push(...i.values(),...r),s="ascending"===n?s.sort(((e,t)=>(null!==e.score&&void 0!==e.score?e.score:1/0)-(null!==t.score&&void 0!==t.score?t.score:1/0))):s.sort(((e,t)=>(null!==t.score&&void 0!==t.score?t.score:1/0)-(null!==e.score&&void 0!==e.score?e.score:1/0))),s}function x(e){const t={};let n=[];let o=[];let r=u.Initial;t.getStatus=()=>r,t.getResultBuffer=()=>n,t.setResultBuffer=e=>{n=e,n?.length&&t.onChange()},t.getRevokedBuffer=()=>o,t.setRevokedBuffer=e=>{o=e,o?.length&&t.onChange()},t.onChange=v;const i={};return t.res=i,i.close=()=>{r!==u.Close&&(r=u.Close,t.onChange())},i.open=()=>{r!==u.Open&&(r=u.Open,t.onChange())},i.respond=n=>{const o=O(t.getResultBuffer(),n,e);t.setResultBuffer(o)},i.revoke=(...e)=>{const n=new Set(e),o=t.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));t.setResultBuffer(o),n.size&&(t.getRevokedBuffer().forEach((e=>n.add(e))),t.setRevokedBuffer([...n]))},t}function E(e,t,n){const o=new Set;let r=!1;return{close:()=>{r=!0;for(const e of o)e()},req:{id:t,topic:e,...n,context:n?.context||{},onClose:e=>{o.add(e),r&&e()},removeListener:e=>{o.delete(e)}}}}function V(){return{name:fin.me.name,uuid:fin.me.uuid}}function M(){let e;try{const t=fin.Platform.getCurrentSync();if(!t?.identity)return;e=t.identity.uuid}catch(e){}return e}const _="deregistered or does not exist",$=new Error(`provider ${_}`),q=new Error("provider with name already exists"),G=new Error("bad payload"),H=new Error("subscription rejected"),N=new Error(`channel ${_}`),U=new Map;function j(e){const t=X(e);if(t)return t;throw N}function X(e){const t=U.get(e);if(t)return t}function K(e,t){U.set(e,t)}const J=new Map;function z(e){J.has(e)||J.set(e,new Map);const t=J.get(e);return{getRequestsForIdentity:e=>{const n=function(e){return`${e.uuid}:${e.name}`}(e);return t.has(n)||t.set(n,new Map),t.get(n)}}}async function Z(e,t){return(await j(e)).dispatch(g,t)}function Q({namespacedTopic:e,topic:t}){const n=L.bind(null,e),o=z(e),r=Z.bind(null,e);return async(e,i)=>{if(!e||!e.id||!e.providerId){const e=G;return{error:e.message}}const{id:s,providerId:a}=e,c=n(a);if(!c){const e=$;return{error:e.message}}const d=o.getRequestsForIdentity(i);let u=d.get(e.id);u||(u=E(t,s,e),d.set(e.id,u));const p=x(),l=()=>{const e=p.getResultBuffer();p.setResultBuffer([]);const t=p.getRevokedBuffer();p.setRevokedBuffer([]);const n=p.getStatus();r({id:s,providerId:a,results:e,revoked:t,status:n})};let f=!0,w=!1;p.onChange=()=>{if(f)return f=!1,void l();w||(w=!0,setTimeout((()=>{w=!1,l()}),100))};try{const{results:e,context:t}=await c.onUserInput(u.req,p.res),n=p.getStatus();return{id:s,providerId:a,status:n,results:e,context:t}}catch(e){return{id:s,providerId:a,error:e.message}}}}async function Y(e,t,n){const o=n||await j(e),r=V(),i={identity:r,...t,onUserInput:void 0,onResultDispatch:void 0},s=await o.dispatch("2",i);return await b(e,{identity:r,...t}),s}async function ee(e,t){const n=await j(e);return await n.dispatch("3",t),D(e,t)}async function te(e,t,n,o){const r=A(n,V(),o),i=L(e,t);if(i){const{onResultDispatch:e}=i;if(!e)return;return e(r)}const s={providerId:t,result:r};return(await j(e)).dispatch(h,s)}async function ne(e,t){const n={...t,context:t?.context||{}},o={},r=async function*(e,t,{setState:n}){const o=await j(e);for(;;){const e=await o.dispatch("1",t),r=e.error;if(r)throw new Error(r);const i=e;if(t.id=i.id,n(i.state),i.done)return i.value;yield i.value}}(e,n,{setState:e=>{o.state=e}});let i=await r.next();return o.id=n.id,o.close=()=>{!async function(e,t){(await j(e)).dispatch(y,{id:t})}(e,o.id)},o.next=()=>{if(i){const e=i;return i=void 0,e}return r.next()},o}async function oe(e){return(await j(e)).dispatch("4",null)}async function re(e){const t=await j(e);var n;n=e,U.delete(n),F(e),await t.disconnect()}function ie(e){const{namespacedTopic:t}=e,n=z(t);return async o=>{if(!X(t))return;const r=n.getRequestsForIdentity(o);for(const{req:e,close:t}of r.values())t(),r.delete(e.id);K(t,(async e=>{const{namespacedTopic:t}=e,n=await se(e);for(const e of B(t))await Y(t,e,n);return n})(e))}}async function se(e){const{namespacedTopic:t}=e,n=S(t),o=await async function(e){for(let t=0;t<50;t++)try{return await fin.InterApplicationBus.Channel.connect(e,{wait:!1})}catch(e){if(49===t)throw e;await new Promise((e=>setTimeout(e,1e3)))}}(n);return o.register(g,Q(e)),o.register(y,function(e){const t=z(e);return(e,n)=>{const o=t.getRequestsForIdentity(n),r=o.get(e.id);r&&(r.close(),o.delete(e.id))}}(t)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)return;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o.onDisconnection(ie(e)),o}async function ae(e){const t=("string"==typeof e?e:e?.topic)||w,n=("string"==typeof e?null:e?.uuid)||M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=X(o);return i||(i=se(r),K(o,i),await i),{getAllProviders:oe.bind(null,o),register:Y.bind(null,o),search:ne.bind(null,o),deregister:ee.bind(null,o),dispatch:te.bind(null,o),disconnect:re.bind(null,o)}}const ce=new Map;function de(e){const t=ue(e);if(t)return t;throw N}function ue(e){const t=ce.get(e);if(t)return t}const pe=new Map;function le(e,t){pe.has(e)||pe.set(e,new Set),pe.get(e).add(t)}function fe(e,t){const n=pe.get(e);n&&n.delete(t)}function we(e){return[...B(e)].map((e=>({...e,onUserInput:void 0,onResultDispatch:void 0})))}async function ge(e,t){if(L(e,t.id))throw new Error("provider with name already exists");const n=V();await b(e,{identity:n,...t})}function he(e,t){D(e,t)}async function ye(e,t,n,o){const r=L(e,t);if(!r)throw $;const{onResultDispatch:i}=r;if(!i)return;return i(A(n,V(),o))}async function*ve(e,t,n){const o=function(e,t){const n=[],o=[],r=[],i=[];for(const s of e){const e=x(s.scoreOrder),a={results:[],provider:{id:s.id,identity:s.identity,title:s.title,scoreOrder:s.scoreOrder,icon:s.icon,dispatchFocusEvents:s.dispatchFocusEvents}};n.push(a),o.push(e);const c=(async()=>{try{const{results:n,context:o}=await s.onUserInput(t,e.res);a.results=O(a.results,n),a.context={...a.context,...o}}catch(e){a.error=e}})();c.finally((()=>{c.done=!0})),i.push(c),r.push(r.length)}return{providerResponses:n,listenerResponses:o,openListenerResponses:r,initialResponsePromises:i}}(t.targets?t.targets.map((t=>L(e,t))).filter((e=>!!e)):[...B(e).filter((e=>!e.hidden))],t),{providerResponses:r,listenerResponses:i}=o;let{openListenerResponses:s,initialResponsePromises:a}=o,c=f.De.Fetching;const d=e=>{c=e,n.setState(c)};let p,l=!1;t.onClose((()=>{l=!0,p&&p()}));do{let e=!1;if(a.length){const t=[];for(const n of a)n.done?e=!0:t.push(n);a=t,a.length||(d(f.De.Fetched),e=!0)}let t,n=!1;const o=()=>{n=!0,t&&t()},w=[];for(const t of s){const n=i[t],s=r[t],a=n.getStatus();(a===u.Open||c===f.De.Fetching&&a===u.Initial)&&(w.push(t),n.onChange=o);const d=n.getResultBuffer();d.length&&(n.setResultBuffer([]),s.results=O(s.results,d),e=!0);const p=n.getRevokedBuffer();if(p.length){n.setRevokedBuffer([]);const t=new Set(p);s.results=s.results.filter((({key:e})=>!t.has(e))),e=!0}}if(s=w,e&&(yield r),l)break;n||(s.length||a.length)&&await Promise.race([...a,new Promise((e=>{t=e})),new Promise((e=>{p=e}))])}while(s.length||a.length);return d(f.De.Complete),r}let me=0;function Se({namespacedTopic:e,topic:t},n){me+=1;const o=E(t,me.toString(),n),r=ve(e,o.req,{setState:e=>{r.state=e}});return r.id=me.toString(),r.close=o.close,r.state=f.De.Fetching,r}const Pe=new Map;function Ce(e,t){return`${e}:${t}`}function ke(e){return async(t,...n)=>{if(!t)return{error:G.message};let o;if(t.id)o=Ce(e.namespacedTopic,t.id);else{const n=Se(e,t);o=Ce(e.namespacedTopic,n.id),t.id=n.id,Pe.set(o,{generator:n})}const r=Pe.get(o);clearTimeout(r.timeout);const i=await r.generator.next();return r.timeout=function(e){return window.setTimeout((()=>{Pe.delete(e)}),1e4)}(o),{...i,id:t.id,state:r.generator.state}}}function We(e,t,n){return de(e).dispatch(t,y,{id:n})}function Re(e){return t=>function(e,t){const n=Ce(e,t),o=Pe.get(n);o&&o.generator.close()}(e,t.id)}async function Te(e,t,{id:n,query:o,context:r,targets:i}){const s=de(e),a={id:n,query:o,context:r,targets:i,providerId:t.id},c=await s.dispatch(t.identity,g,a),d=c.error;if(d)throw new Error(d);return c}const Ie=new Map;function be(e,t,n){return`${e}:${t.name}:${t.uuid}:${n}`}const De=new Map;function Be(e,t,n){return`${e}:${t}:${n}`}function Fe(e,t){const n=be.bind(null,e,t.identity),o=We.bind(null,e,t.identity),r=Te.bind(null,e,t);return async(i,s)=>{const a=n(i.id);if(!Ie.has(a)){const e=()=>{o(i.id),Ie.delete(a)};Ie.set(a,e),i.onClose(e)}const c=Be(e,t.id,i.id),d=()=>{De.delete(c),s.close()};i.onClose(d),De.set(c,(e=>{e.results?.length&&s.respond(e.results),e.revoked?.length&&s.revoke(...e.revoked),e.status===u.Open&&s.open(),e.status===u.Close&&d()}));const p=await r(i);return p.status===u.Open&&s.open(),p.status!==u.Close&&p.status!==u.Initial||d(),p}}function Le(e,t){return async n=>{const o=de(e),r={providerId:t.id,result:n};return o.dispatch(t.identity,h,r)}}const Ae=new Map;function Oe(e,t){return`${e}-${t.name}-${t.uuid}`}function xe(e){return async(t,n)=>{if(!t||!t.id)return void new Error(JSON.stringify(t));if(L(e,t.id))throw q;return t.identity=n,await async function(e,t){const n=Oe(e,t.identity);Ae.has(n)||Ae.set(n,[]),Ae.get(n).push(t.id),await b(e,{...t,onUserInput:Fe(e,t),onResultDispatch:Le(e,t)})}(e,t),{workspaceVersion:i.u0,clientAPIVersion:t.clientAPIVersion}}}function Ee(e){return t=>{t&&function(e,t){const n=L(e,t);if(!n)return;const o=Oe(e,n.identity),r=Ae.get(o);if(r){const n=r.findIndex((e=>e===t));-1!==n&&(r.splice(n,1),D(e,t))}}(e,t)}}const Ve=new Map;function Me(e,t){Ve.has(e)||Ve.set(e,new Set),Ve.get(e).add(t)}function _e(e,t){const n=Ve.get(e);n&&n.delete(t)}function $e(e){return async t=>{!function(e,t){const n=Oe(e,t),o=Ae.get(n);if(o){for(const t of o)D(e,t);Ae.delete(n)}}(e,t);const n=Ve.get(e);n&&n.forEach((e=>e(t)))}}async function qe(e){const{namespacedTopic:t}=e,n=S(e.namespacedTopic),o=await(r=n,fin.InterApplicationBus.Channel.create(r));var r;return o.onConnection(function({namespacedTopic:e}){return async t=>{const n=pe.get(e);if(n)for(const e of n)if(!await e(t))throw H}}(e)),o.onDisconnection($e(t)),o.register(y,Re(t)),o.register(g,function(e){return t=>{const n=Be(e,t.providerId,t.id),o=De.get(n);o&&o(t)}}(t)),o.register("2",xe(t)),o.register("3",Ee(t)),o.register("4",function(e){return async()=>we(e)}(t)),o.register("1",ke(e)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)throw $;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o}async function Ge(e){const t=de(e);var n;n=e,ce.delete(n),await t.destroy(),F(e)}async function He(e){const t=("string"==typeof e?e:e?.topic)||w,n=M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=ue(o);i||(i=await qe(r),function(e,t){ce.set(e,t)}(o,i));const s=fe.bind(null,o),a=_e.bind(null,o),c=k.bind(null,o),d=T.bind(null,o);return{getAllProviders:we.bind(null,o),search:Se.bind(null,r),register:ge.bind(null,o),deregister:he.bind(null,o),onSubscription:le.bind(null,o),onDisconnect:Me.bind(null,o),onRegister:C.bind(null,o),onDeregister:R.bind(null,o),dispatch:ye.bind(null,r),disconnect:Ge.bind(null,o),removeListener:e=>{s(e),a(e),c(e),d(e)}}}const{create:Ne}=r,{subscribe:Ue}=o,je={create:Ne,subscribe:Ue,defaultTopic:"all"},Xe=()=>{window.search=je},Ke=e=>{const t=()=>{Xe(),window.removeEventListener(e,t)};return t};if("undefined"!=typeof window){Xe();const e="load",t=Ke(e);window.addEventListener(e,t);const n="DOMContentLoaded",o=Ke(n);window.addEventListener(n,o)}const Je=new Map;async function ze(){await async function(e){Je.set(e,await Ue({topic:e,uuid:p.q9.Workspace}))}(c)}let Ze;async function Qe(e){return await async function(){return Ze||(Ze=ze()),Ze}(),Je.get(e)}const Ye=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);await(0,a.aB)();const t=await Qe(c);try{e.clientAPIVersion=i.u0;const n=await t.register(e);return(0,s.ck)({allowed:!0,componentVersion:n?.workspaceVersion}),n}catch(e){throw(0,s.ck)({allowed:!1,rejectionCode:e.message}),e}},et=async e=>{await(0,a.aB)();return(await Qe(c)).deregister(e)};async function tt(){return(await(0,a.Xl)()).dispatch(a.WF.ShowHome,void 0)}async function nt(){return(await(0,a.Xl)()).dispatch(a.WF.HideHome,void 0)}},298:(e,t,n)=>{n.d(t,{p:()=>o.px,w:()=>o.wt});var o=n(316)},427:(e,t,n)=>{var o;n.d(t,{v:()=>o}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(o||(o={}))},758:(e,t,n)=>{var o,r,i;n.d(t,{Pt:()=>o,el:()=>i,yW:()=>r}),function(e){e.Suggestion="suggestion"}(o||(o={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(i||(i={}))},114:(e,t,n)=>{var o,r;n.d(t,{L:()=>o,T:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(o||(o={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},109:(e,t,n)=>{n.d(t,{Go:()=>r,ZJ:()=>s,bI:()=>i,p6:()=>o});const o={Container:"Container",Button:"Button"},r={Text:"Text",Image:"Image",List:"List"},i={...o,...r};var s;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(s||(s={}))},528:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>s.L,StorefrontTemplate:()=>s.T,deregister:()=>g,hide:()=>h,register:()=>w,show:()=>y});var o=n(532),r=n(436),i=n(82),s=n(114),a=n(678);let c,d=!1;async function u(e,t,n){const o=await(0,r.Dm)();try{return await o.dispatch(e.action,e.payload)}catch(r){if(-1!==r.toString().indexOf(e.action))return d=!0,await o.dispatch(t.action,t.payload),n;throw r}}const p=new Map,l=e=>{if(!p.has(e))throw new Error(`Storefront Provider with id ${e} is not registered`);return p.get(e)},f=async e=>{const t=await(0,r.Xl)();if(p.has(e.id))throw new Error(`Storefront provider with id ${e.id} already registered`);return p.set(e.id,e),(e=>{e.isStorefrontActionsRegistered||(e.isStorefrontActionsRegistered=!0,e.register(r.WF.GetStorefrontProviderApps,(e=>l(e).getApps())),e.register(r.WF.GetStorefrontProviderFooter,(e=>l(e).getFooter())),e.register(r.WF.GetStorefrontProviderLandingPage,(e=>l(e).getLandingPage())),e.register(r.WF.GetStorefrontProviderNavigation,(e=>l(e).getNavigation())),e.register(r.WF.LaunchStorefrontProviderApp,(({id:e,app:t})=>l(e).launchApp(t))))})(t),e.clientAPIVersion=a.u0,u({action:r.WF.RegisterProvider,payload:{providerType:i.lP.Storefront,info:e}},{action:r.WF.RegisterStorefrontProvider,payload:e},{workspaceVersion:"unknown"})},w=e=>(c=new Promise((async(t,n)=>{try{const n=await f(e);(0,o.d9)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:a.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,o.d9)({allowed:!1,rejectionCode:e.message}),n(e)}})),c),g=async e=>(await c,p.delete(e),await(0,r.aB)(),u({action:r.WF.DeregisterProvider,payload:{providerType:i.lP.Storefront,id:e}},{action:r.WF.DeregisterStorefrontProvider,payload:e})),h=async()=>(await c,await(0,r.aB)(),u({action:r.WF.HideProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.HideStorefront})),y=async()=>(await c,await(0,r.aB)(),u({action:r.WF.ShowProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.ShowStorefront}))},436:(e,t,n)=>{n.d(t,{WF:()=>s,Dm:()=>a,Xl:()=>p,aB:()=>u});var o=n(678);const r=o.Ax&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));var i=n(121);var s;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(s||(s={}));const a=function(e){let t;return()=>{if(!o.sS)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const n={clientAPIVersion:o.u0},i=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return i.onDisconnection((async()=>{t=void 0})),i})().then((e=>e)).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}("__of_workspace_protocol__"),c="isLaunchedViaLib",d=e=>{const t=new URL(e);return t.searchParams.append(c,"true"),t.toString()},u=async()=>{if(!await(0,i.JV)(i.iW))return(o.ZK||-1===navigator.userAgent.indexOf("Win"))&&await fin.Application.startFromManifest(d(o.aW)),fin.System.openUrlWithBrowser(d(o.GX))},p=async()=>(await u(),a())},82:(e,t,n)=>{n.d(t,{R8:()=>s,X_:()=>i,lP:()=>o});var o,r=n(436);!function(e){e.Storefront="storefront",e.Dock="dock"}(o||(o={}));const i=async e=>(await(0,r.Dm)()).dispatch(r.WF.ShowProviderWindow,{providerType:e}),s=async e=>(await(0,r.Dm)()).dispatch(r.WF.HideProviderWindow,{providerType:e})},806:(e,t,n)=>{n.d(t,{q9:()=>o});var o,r,i,s=n(678);!function(e){e.Workspace="openfin-browser"}(o||(o={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(i||(i={}));s.AB,o.Workspace},678:(e,t,n)=>{var o;n.d(t,{AB:()=>a,Ax:()=>i,GX:()=>u,ZK:()=>d,aW:()=>p,oC:()=>c,sS:()=>r,u0:()=>f}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(o||(o={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,i=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),s=i?window.origin:o.Local,a=r&&fin.me.uuid,c=r&&fin.me.name,d=(r&&fin.me.entityType,"prod"===o.Local),u=(o.Dev,o.Staging,o.Prod,"fins://system-apps/workspace"),p="https://cdn.openfin.co/workspace/9.0.7/app.json",l=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,f=(l("https://cdn.openfin.co/workspace/9.0.7"),l("https://cdn.openfin.co/workspace/9.0.7"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&l(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&l(WORKSPACE_DOCS_CLIENT_URL),"9.0.7")},532:(e,t,n)=>{n.d(t,{Wn:()=>d,ck:()=>a,d9:()=>c});var o,r=n(678),i=n(121);!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(o||(o={}));const s=async(e,t)=>{const n={apiVersion:t.apiVersion||r.u0,componentName:e,componentVersion:t.componentVersion||r.u0,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:n})},a=async e=>{i.OI.uuid===i.Gi.uuid&&i.OI.name===i.Gi.name||s(o.Home,e)},c=async e=>{s(o.Storefront,e)},d=async e=>{s(o.Dock,e)}},121:(e,t,n)=>{n.d(t,{Gi:()=>c,JV:()=>p,OI:()=>d,iW:()=>u});var o,r,i=n(806),s=n(678);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(o||(o={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(r||(r={}));function a(e){if(!s.sS)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:s.oC,uuid:s.AB};const d={name:o.Home,uuid:i.q9.Workspace},u=(o.Dock,i.q9.Workspace,o.Storefront,i.q9.Workspace,{name:i.q9.Workspace,uuid:i.q9.Workspace});const p=e=>a(e).getOptions().then((()=>!0)).catch((()=>!1))},316:(e,t,n)=>{var o,r,i;n.d(t,{De:()=>o,px:()=>r,wt:()=>i}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(o||(o={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(i||(i={}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{ActionTrigger:()=>P.p,AppManifestType:()=>W.L,ButtonStyle:()=>C.ZJ,CLIAction:()=>k.Pt,CLIFilterOptionType:()=>k.el,CLITemplate:()=>k.yW,ContainerTemplateFragmentNames:()=>C.p6,Dock:()=>e,DockButtonNames:()=>c.v,Home:()=>h,Legacy:()=>t,PresentationTemplateFragmentNames:()=>C.Go,SearchTagBackground:()=>P.w,Storefront:()=>S,StorefrontTemplate:()=>W.T,TemplateFragmentTypes:()=>C.bI});var e={};n.r(e),n.d(e,{DockButtonNames:()=>c.v,deregister:()=>l,minimize:()=>f,register:()=>p,show:()=>w});var t={};n.r(t),n.d(t,{getPages:()=>v,getWorkspaces:()=>m});var r=n(678),i=n(532),s=n(436),a=n(82),c=n(427);let d,u=!1;const p=e=>(d=new Promise((async(t,n)=>{try{const n=await(async e=>{const t=await(0,s.Xl)();if(u)throw new Error("A dock provider for the platform is already registered.");return u=!0,e.clientAPIVersion=r.u0,t.dispatch(s.WF.RegisterProvider,{providerType:a.lP.Dock,info:e})})(e);(0,i.Wn)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:r.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,i.Wn)({allowed:!1,rejectionCode:e.message}),n(e),d=null}})),d),l=async()=>{await d,u=!1;return(await(0,s.Xl)()).dispatch(s.WF.DeregisterProvider,{providerType:a.lP.Dock})},f=async()=>{await d,await(0,s.aB)(),await(0,a.R8)(a.lP.Dock)},w=async()=>{await d,await(0,s.aB)(),await(0,a.X_)(a.lP.Dock)};var g,h=n(703);n(121);!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(g||(g={}));new Map;var y;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition"}(y||(y={}));const v=()=>async function(){return(await(0,s.Dm)()).dispatch(s.WF.GetLegacyPages,void 0)}(),m=()=>(async()=>(await(0,s.Dm)()).dispatch(s.WF.GetLegacyWorkspaces,void 0))();var S=n(528),P=n(298),C=n(109),k=n(758),W=n(114)})(),module.exports=o})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./client/src/apps.ts":
/*!****************************!*\
  !*** ./client/src/apps.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getApp": () => (/* binding */ getApp),
/* harmony export */   "getApps": () => (/* binding */ getApps),
/* harmony export */   "getAppsByIntent": () => (/* binding */ getAppsByIntent),
/* harmony export */   "getAppsByTag": () => (/* binding */ getAppsByTag)
/* harmony export */ });
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");

let cachedApps;
async function validateEntries(apps) {
    let canLaunchExternalProcessResponse;
    try {
        canLaunchExternalProcessResponse = await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");
    }
    catch (error) {
        console.error("Error while querying for System.launchExternalProcess permission", error);
    }
    const canLaunchExternalProcess = canLaunchExternalProcessResponse?.granted;
    let canDownloadAppAssetsResponse;
    try {
        canDownloadAppAssetsResponse = await fin.System.queryPermissionForCurrentContext("System.downloadAsset");
    }
    catch (error) {
        console.error("Error while querying for System.downloadAsset permission", error);
    }
    const canDownloadAppAssets = canDownloadAppAssetsResponse?.granted;
    if (canLaunchExternalProcess && canDownloadAppAssets) {
        return apps;
    }
    const validatedApps = [];
    const rejectedAppIds = [];
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_0__.getSettings)();
    const appAssetTag = settings?.appProvider?.appAssetTag ?? "appasset";
    for (let i = 0; i < apps.length; i++) {
        if (apps[i].manifestType !== "external") {
            validatedApps.push(apps[i]);
        }
        else if (!canLaunchExternalProcess) {
            rejectedAppIds.push(apps[i].appId);
        }
        else if (Array.isArray(apps[i].tags) && apps[i].tags.includes(appAssetTag) && !canDownloadAppAssets) {
            rejectedAppIds.push(apps[i].appId);
        }
        else {
            validatedApps.push(apps[i]);
        }
    }
    if (rejectedAppIds.length > 0) {
        console.warn("Apps.ts: validateEntries: Not passing the following list of applications as they will not be able to run on this machine due to missing permissions. Alternatively this logic could be moved to the launch function where a selection is not launched but the user is presented with a modal saying they can't launch it due to permissions.", rejectedAppIds);
    }
    return validatedApps;
}
async function getRestEntries(url, credentials, cacheDuration) {
    const options = credentials !== undefined ? { credentials } : undefined;
    if (url === undefined) {
        return [];
    }
    const response = await fetch(url, options);
    const apps = await response.json();
    cachedApps = await validateEntries(apps);
    if (cacheDuration !== undefined) {
        const setTimeoutInMs = cacheDuration * 60 * 1000;
        setTimeout(() => {
            console.log("Clearing cache of apps as cache duration has passed.");
            cachedApps = undefined;
        }, setTimeoutInMs);
    }
    return cachedApps;
}
async function getApps() {
    console.log("Requesting apps.");
    try {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_0__.getSettings)();
        const apps = cachedApps ??
            (await getRestEntries(settings?.appProvider?.appsSourceUrl, settings?.appProvider?.includeCredentialOnSourceRequest, settings?.appProvider?.cacheDurationInMinutes));
        return apps;
    }
    catch (err) {
        console.error("Error retrieving apps. Returning empty list.", err);
        return [];
    }
}
async function getAppsByTag(tags, mustMatchAll = false) {
    const apps = await getApps();
    const filteredApps = apps.filter((value) => {
        if (value.tags === undefined) {
            return false;
        }
        let matchFound = false;
        for (let i = 0; i < tags.length; i++) {
            if (value.tags.includes(tags[i])) {
                if (mustMatchAll) {
                    matchFound = true;
                }
                else {
                    return true;
                }
            }
            else if (mustMatchAll) {
                return false;
            }
        }
        return matchFound;
    });
    return filteredApps;
}
async function getApp(requestedApp) {
    const apps = await getApps();
    let appId;
    if (requestedApp !== undefined) {
        if (typeof requestedApp === "string") {
            appId = requestedApp;
        }
        else {
            appId = requestedApp.appId;
        }
    }
    if (appId === undefined) {
        return undefined;
    }
    const app = apps.find((entry) => entry.appId === appId);
    return app;
}
async function getAppsByIntent(intent) {
    const apps = await getApps();
    const filteredApps = apps.filter((value) => {
        if (value.intents === undefined) {
            return false;
        }
        for (let i = 0; i < value.intents.length; i++) {
            if (value.intents[i].name.toLowerCase() === intent.toLowerCase()) {
                return true;
            }
        }
        return false;
    });
    return filteredApps;
}


/***/ }),

/***/ "./client/src/bootstrapper.ts":
/*!************************************!*\
  !*** ./client/src/bootstrapper.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "init": () => (/* binding */ init)
/* harmony export */ });
/* harmony import */ var _home__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./home */ "./client/src/home.ts");
/* harmony import */ var _integrations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./integrations */ "./client/src/integrations.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");



async function init() {
    // you can kick off your bootstrapping process here where you may decide to prompt for authentication,
    // gather reference data etc before starting workspace and interacting with it.
    console.log("Initialising the bootstrapper");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_2__.getSettings)();
    await (0,_home__WEBPACK_IMPORTED_MODULE_0__.register)();
    await (0,_integrations__WEBPACK_IMPORTED_MODULE_1__.register)({
        launchAsset: async (options) => fin.System.launchExternalProcess(options)
    }, settings.integrationProvider);
    const providerWindow = fin.Window.getCurrentSync();
    await providerWindow.once("close-requested", async (event) => {
        await (0,_integrations__WEBPACK_IMPORTED_MODULE_1__.deregister)(settings.integrationProvider);
        await (0,_home__WEBPACK_IMPORTED_MODULE_0__.deregister)();
        await fin.Platform.getCurrentSync().quit();
    });
}


/***/ }),

/***/ "./client/src/home.ts":
/*!****************************!*\
  !*** ./client/src/home.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deregister": () => (/* binding */ deregister),
/* harmony export */   "hide": () => (/* binding */ hide),
/* harmony export */   "register": () => (/* binding */ register),
/* harmony export */   "show": () => (/* binding */ show)
/* harmony export */ });
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apps */ "./client/src/apps.ts");
/* harmony import */ var _integrations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./integrations */ "./client/src/integrations.ts");
/* harmony import */ var _launch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./launch */ "./client/src/launch.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");





let isHomeRegistered = false;
async function register() {
    console.log("Initialising home.");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_4__.getSettings)();
    if (settings.homeProvider === undefined ||
        settings.homeProvider.id === undefined ||
        settings.homeProvider.title === undefined) {
        console.warn("homeProvider: not configured in the customSettings of your manifest correctly. Ensure you have the homeProvider object defined in customSettings with the following defined: id, title");
        return;
    }
    let lastResponse;
    const apps = await (0,_apps__WEBPACK_IMPORTED_MODULE_1__.getApps)();
    const onUserInput = async (request, response) => {
        const query = request.query.toLowerCase();
        if (lastResponse !== undefined) {
            lastResponse.close();
        }
        lastResponse = response;
        lastResponse.open();
        let appSearchEntries = mapAppEntriesToSearchEntries(apps).concat(await (0,_integrations__WEBPACK_IMPORTED_MODULE_2__.getAppSearchEntries)());
        if (query && query.length >= 3) {
            appSearchEntries = appSearchEntries.filter((app) => app.title.toLowerCase().includes(query.toLowerCase()));
        }
        const searchResults = {
            results: appSearchEntries,
            context: {
                filters: []
            }
        };
        const integrationResults = await (0,_integrations__WEBPACK_IMPORTED_MODULE_2__.getSearchResults)(query, undefined, lastResponse);
        if (Array.isArray(integrationResults.results)) {
            searchResults.results = searchResults.results.concat(integrationResults.results);
        }
        if (Array.isArray(integrationResults.context.filters)) {
            searchResults.context.filters = searchResults.context.filters.concat(integrationResults.context.filters);
        }
        return searchResults;
    };
    const onSelection = async (result) => {
        if (result.data !== undefined) {
            const handled = await (0,_integrations__WEBPACK_IMPORTED_MODULE_2__.itemSelection)(result, lastResponse);
            if (!handled) {
                await (0,_launch__WEBPACK_IMPORTED_MODULE_3__.launch)(result.data);
            }
            if (!handled) {
                console.warn(`Result not handled ${result.key}`, result.data);
            }
        }
        else {
            console.warn("Unable to execute result without data being passed");
        }
    };
    const cliProvider = {
        title: settings.homeProvider.title,
        id: settings.homeProvider.id,
        icon: settings.homeProvider.icon,
        onUserInput,
        onResultDispatch: onSelection
    };
    await _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.register(cliProvider);
    isHomeRegistered = true;
    console.log("Home configured.");
}
async function show() {
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.show();
}
async function hide() {
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.hide();
}
async function deregister() {
    if (isHomeRegistered) {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_4__.getSettings)();
        return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.deregister(settings.homeProvider.id);
    }
    console.warn("Unable to deregister home as there is an indication it was never registered");
}
function mapAppEntriesToSearchEntries(apps) {
    const appResults = [];
    if (Array.isArray(apps)) {
        for (let i = 0; i < apps.length; i++) {
            const action = { name: "Launch View", hotkey: "enter" };
            const entry = {
                key: apps[i].appId,
                title: apps[i].title,
                data: apps[i]
            };
            if (apps[i].manifestType === "view") {
                entry.label = "View";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "snapshot") {
                entry.label = "Snapshot";
                action.name = "Launch Snapshot";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "manifest") {
                entry.label = "App";
                action.name = "Launch App";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "external") {
                action.name = "Launch Native App";
                entry.actions = [action];
                entry.label = "Native App";
            }
            if (Array.isArray(apps[i].icons) && apps[i].icons.length > 0) {
                entry.icon = apps[i].icons[0].src;
            }
            if (apps[i].description !== undefined) {
                entry.description = apps[i].description;
                entry.shortDescription = apps[i].description;
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.SimpleText;
                entry.templateContent = apps[i].description;
            }
            else {
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.Plain;
            }
            appResults.push(entry);
        }
    }
    return appResults;
}


/***/ }),

/***/ "./client/src/integrations.ts":
/*!************************************!*\
  !*** ./client/src/integrations.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addKnownIntegrationProvider": () => (/* binding */ addKnownIntegrationProvider),
/* harmony export */   "deregister": () => (/* binding */ deregister),
/* harmony export */   "getAppSearchEntries": () => (/* binding */ getAppSearchEntries),
/* harmony export */   "getSearchResults": () => (/* binding */ getSearchResults),
/* harmony export */   "itemSelection": () => (/* binding */ itemSelection),
/* harmony export */   "register": () => (/* binding */ register)
/* harmony export */ });
const knownIntegrationProviders = {};
const homeIntegrations = [];
/**
 * Register all the workspace integrations.
 * @param integrationManager The integration manager.
 * @param integrationProvider The integration provider settings.
 */
async function register(integrationManager, integrationProvider) {
    const integrations = integrationProvider?.integrations;
    if (Array.isArray(integrations)) {
        for (const integration of integrations) {
            if (integration.enabled) {
                if (!knownIntegrationProviders[integration.id] && integration.moduleUrl) {
                    try {
                        const mod = await import(/* webpackIgnore: true */ integration.moduleUrl);
                        knownIntegrationProviders[integration.id] = mod.integration;
                    }
                    catch (err) {
                        console.error(`Error loading module ${integration.moduleUrl}`, err);
                    }
                }
                if (knownIntegrationProviders[integration.id]) {
                    const homeIntegration = knownIntegrationProviders[integration.id];
                    homeIntegrations.push({
                        module: homeIntegration,
                        integration
                    });
                    if (homeIntegration.register) {
                        await homeIntegration.register(integrationManager, integration);
                    }
                }
                else {
                    console.error("Missing module in integration providers", integration.id);
                }
            }
        }
    }
}
/**
 * Deregister all the integrations.
 * @param integrationProvider The integration provider.
 */
async function deregister(integrationProvider) {
    for (const homeIntegration of homeIntegrations) {
        if (homeIntegration.module.deregister) {
            await homeIntegration.module.deregister(homeIntegration.integration);
        }
    }
}
/**
 * Get the search results from all the integration providers.
 * @param query The query to get the search results for.
 * @param filters The filters to apply to the search results.
 * @param lastResponse The last search response used for updating existing results.
 * @returns The search results and new filters.
 */
async function getSearchResults(query, filters, lastResponse) {
    const homeResponse = {
        results: [],
        context: {
            filters: []
        }
    };
    const promises = [];
    for (const homeIntegration of homeIntegrations) {
        if (homeIntegration.module.getSearchResults) {
            promises.push(homeIntegration.module.getSearchResults(homeIntegration.integration, query, filters, lastResponse));
        }
    }
    const promiseResults = await Promise.allSettled(promises);
    for (const promiseResult of promiseResults) {
        if (promiseResult.status === "fulfilled") {
            if (Array.isArray(promiseResult.value.results)) {
                homeResponse.results = homeResponse.results.concat(promiseResult.value.results);
            }
            const newFilters = promiseResult.value.context?.filters;
            if (Array.isArray(newFilters) && homeResponse.context?.filters) {
                homeResponse.context.filters = homeResponse.context.filters.concat(newFilters);
            }
        }
        else {
            console.error(promiseResult.reason);
        }
    }
    return homeResponse;
}
/**
 * Get the app search entries for all the integration providers.
 * @returns The list of app entries.
 */
async function getAppSearchEntries() {
    let results = [];
    for (const homeIntegration of homeIntegrations) {
        if (homeIntegration.module.getAppSearchEntries) {
            const integrationResults = await homeIntegration.module.getAppSearchEntries(homeIntegration.integration);
            results = results.concat(integrationResults);
        }
    }
    return results;
}
/**
 * The item for one of the providers was selected.
 * @param result The result of the selection.
 * @param lastResponse The last response.
 * @returns True if the selection was handled.
 */
async function itemSelection(result, lastResponse) {
    if (result.data) {
        const foundIntegration = homeIntegrations.find((hi) => hi.integration.id === result.data?.providerId);
        if (foundIntegration?.module?.itemSelection) {
            const handled = await foundIntegration.module.itemSelection(foundIntegration.integration, result, lastResponse);
            if (!handled) {
                console.warn(`Error while trying to handle ${foundIntegration.integration.id} entry`, result.data);
            }
            return handled;
        }
    }
    return false;
}
/**
 * Add an integration module that was loaded manually.
 * @param id The id of the module.
 * @param module The module.
 */
function addKnownIntegrationProvider(id, module) {
    knownIntegrationProviders[id] = module;
}


/***/ }),

/***/ "./client/src/launch.ts":
/*!******************************!*\
  !*** ./client/src/launch.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "launch": () => (/* binding */ launch)
/* harmony export */ });
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");


async function launch(appEntry) {
    console.log("Application launch requested:", appEntry);
    if (appEntry.manifestType === "external") {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_1__.getSettings)();
        const appAssetTag = settings?.appProvider?.appAssetTag ?? "appasset";
        if (appEntry.tags?.includes(appAssetTag)) {
            console.log("Application requested is a native app with a tag of appasset so it is provided by this workspace platform. Managing request via platform and not Workspace.");
            const options = {};
            options.alias = appEntry.manifest;
            options.uuid = appEntry.appId;
            await fin.System.launchExternalProcess(options);
        }
        else {
            console.log("Application requested is a native app. Managing request via platform and not Workspace.");
            const options = {};
            options.path = appEntry.manifest;
            options.uuid = appEntry.appId;
            await fin.System.launchExternalProcess(options);
        }
    }
    else {
        const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
        await platform.launchApp({ app: appEntry });
    }
    console.log("Finished application launch request");
}


/***/ }),

/***/ "./client/src/platform.ts":
/*!********************************!*\
  !*** ./client/src/platform.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getDefaultWindowOptions": () => (/* binding */ getDefaultWindowOptions),
/* harmony export */   "init": () => (/* binding */ init)
/* harmony export */ });
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");


async function init() {
    console.log("Initialising platform");
    const browser = {
        defaultWindowOptions: await getDefaultWindowOptions()
    };
    await (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.init)({
        browser
    });
}
async function getDefaultWindowOptions() {
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_1__.getSettings)();
    return {
        icon: settings.browserProvider.windowOptions?.icon,
        workspacePlatform: {
            pages: [],
            favicon: settings.browserProvider.windowOptions?.icon
        }
    };
}


/***/ }),

/***/ "./client/src/settings.ts":
/*!********************************!*\
  !*** ./client/src/settings.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSettings": () => (/* binding */ getSettings)
/* harmony export */ });
let settings;
async function getConfiguredSettings() {
    const app = await fin.Application.getCurrent();
    const manifest = await app.getManifest();
    if (manifest.customSettings !== undefined) {
        settings = manifest.customSettings;
    }
    else {
        settings = {};
    }
    return settings;
}
async function getSettings() {
    if (settings === undefined) {
        settings = await getConfiguredSettings();
    }
    return settings;
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!********************************!*\
  !*** ./client/src/provider.ts ***!
  \********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bootstrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bootstrapper */ "./client/src/bootstrapper.ts");
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./platform */ "./client/src/platform.ts");


window.addEventListener("DOMContentLoaded", async () => {
    const platform = fin.Platform.getCurrentSync();
    await platform.once("platform-api-ready", async () => (0,_bootstrapper__WEBPACK_IMPORTED_MODULE_0__.init)());
    await (0,_platform__WEBPACK_IMPORTED_MODULE_1__.init)();
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUMvQyxNQUFNLFFBQVEsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQyxtREFBUyxFQUFFLENBQUMsQ0FBQztJQUNuRSxNQUFNLCtDQUFrQixFQUFFLENBQUM7QUFDNUIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi9jbGllbnQvc3JjL2FwcHMudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4vY2xpZW50L3NyYy9ib290c3RyYXBwZXIudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4vY2xpZW50L3NyYy9ob21lLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uL2NsaWVudC9zcmMvaW50ZWdyYXRpb25zLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uL2NsaWVudC9zcmMvbGF1bmNoLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uL2NsaWVudC9zcmMvcGxhdGZvcm0udHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4vY2xpZW50L3NyYy9zZXR0aW5ncy50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4vY2xpZW50L3NyYy9wcm92aWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgRm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gcGxlYXNlIHNlZSBpbmRleC5qcy5MSUNFTlNFLnR4dCAqL1xuKCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9ezUyNTplPT57dmFyIHQ9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbj1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO2Z1bmN0aW9uIG8oZSl7aWYobnVsbD09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWRcIik7cmV0dXJuIE9iamVjdChlKX1lLmV4cG9ydHM9ZnVuY3Rpb24oKXt0cnl7aWYoIU9iamVjdC5hc3NpZ24pcmV0dXJuITE7dmFyIGU9bmV3IFN0cmluZyhcImFiY1wiKTtpZihlWzVdPVwiZGVcIixcIjVcIj09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpWzBdKXJldHVybiExO2Zvcih2YXIgdD17fSxhPTA7YTwxMDthKyspdFtcIl9cIitTdHJpbmcuZnJvbUNoYXJDb2RlKGEpXT1hO2lmKFwiMDEyMzQ1Njc4OVwiIT09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pKS5qb2luKFwiXCIpKXJldHVybiExO3ZhciBuPXt9O3JldHVyblwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIi5zcGxpdChcIlwiKS5mb3JFYWNoKChmdW5jdGlvbihlKXtuW2VdPWV9KSksXCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiPT09T2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSxuKSkuam9pbihcIlwiKX1jYXRjaChlKXtyZXR1cm4hMX19KCk/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbihlLHIpe2Zvcih2YXIgaSxzLGM9byhlKSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKyl7Zm9yKHZhciBwIGluIGk9T2JqZWN0KGFyZ3VtZW50c1tkXSkpYS5jYWxsKGkscCkmJihjW3BdPWlbcF0pO2lmKHQpe3M9dChpKTtmb3IodmFyIGw9MDtsPHMubGVuZ3RoO2wrKyluLmNhbGwoaSxzW2xdKSYmKGNbc1tsXV09aVtzW2xdXSl9fXJldHVybiBjfX0sNTM1OihlLHQsYSk9Pnt2YXIgbj1hKDUyNSksbz02MDEwMyxyPTYwMTA2O3ZhciBpPTYwMTA5LHM9NjAxMTAsYz02MDExMjt2YXIgZD02MDExNSxwPTYwMTE2O2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLmZvcil7dmFyIGw9U3ltYm9sLmZvcjtvPWwoXCJyZWFjdC5lbGVtZW50XCIpLHI9bChcInJlYWN0LnBvcnRhbFwiKSxsKFwicmVhY3QuZnJhZ21lbnRcIiksbChcInJlYWN0LnN0cmljdF9tb2RlXCIpLGwoXCJyZWFjdC5wcm9maWxlclwiKSxpPWwoXCJyZWFjdC5wcm92aWRlclwiKSxzPWwoXCJyZWFjdC5jb250ZXh0XCIpLGM9bChcInJlYWN0LmZvcndhcmRfcmVmXCIpLGwoXCJyZWFjdC5zdXNwZW5zZVwiKSxkPWwoXCJyZWFjdC5tZW1vXCIpLHA9bChcInJlYWN0LmxhenlcIil9dmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3I7ZnVuY3Rpb24gdyhlKXtmb3IodmFyIHQ9XCJodHRwczovL3JlYWN0anMub3JnL2RvY3MvZXJyb3ItZGVjb2Rlci5odG1sP2ludmFyaWFudD1cIitlLGE9MTthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKXQrPVwiJmFyZ3NbXT1cIitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2FdKTtyZXR1cm5cIk1pbmlmaWVkIFJlYWN0IGVycm9yICNcIitlK1wiOyB2aXNpdCBcIit0K1wiIGZvciB0aGUgZnVsbCBtZXNzYWdlIG9yIHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgZnVsbCBlcnJvcnMgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy5cIn12YXIgZj17aXNNb3VudGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGVucXVldWVGb3JjZVVwZGF0ZTpmdW5jdGlvbigpe30sZW5xdWV1ZVJlcGxhY2VTdGF0ZTpmdW5jdGlvbigpe30sZW5xdWV1ZVNldFN0YXRlOmZ1bmN0aW9uKCl7fX0sZz17fTtmdW5jdGlvbiB5KGUsdCxhKXt0aGlzLnByb3BzPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5yZWZzPWcsdGhpcy51cGRhdGVyPWF8fGZ9ZnVuY3Rpb24gaCgpe31mdW5jdGlvbiBtKGUsdCxhKXt0aGlzLnByb3BzPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5yZWZzPWcsdGhpcy51cGRhdGVyPWF8fGZ9eS5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD17fSx5LnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihlLHQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT1lKXRocm93IEVycm9yKHcoODUpKTt0aGlzLnVwZGF0ZXIuZW5xdWV1ZVNldFN0YXRlKHRoaXMsZSx0LFwic2V0U3RhdGVcIil9LHkucHJvdG90eXBlLmZvcmNlVXBkYXRlPWZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcyxlLFwiZm9yY2VVcGRhdGVcIil9LGgucHJvdG90eXBlPXkucHJvdG90eXBlO3ZhciB2PW0ucHJvdG90eXBlPW5ldyBoO3YuY29uc3RydWN0b3I9bSxuKHYseS5wcm90b3R5cGUpLHYuaXNQdXJlUmVhY3RDb21wb25lbnQ9ITA7dmFyIFM9e2N1cnJlbnQ6bnVsbH0sUD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGI9e2tleTohMCxyZWY6ITAsX19zZWxmOiEwLF9fc291cmNlOiEwfTtmdW5jdGlvbiBrKGUsdCxhKXt2YXIgbixyPXt9LGk9bnVsbCxzPW51bGw7aWYobnVsbCE9dClmb3IobiBpbiB2b2lkIDAhPT10LnJlZiYmKHM9dC5yZWYpLHZvaWQgMCE9PXQua2V5JiYoaT1cIlwiK3Qua2V5KSx0KVAuY2FsbCh0LG4pJiYhYi5oYXNPd25Qcm9wZXJ0eShuKSYmKHJbbl09dFtuXSk7dmFyIGM9YXJndW1lbnRzLmxlbmd0aC0yO2lmKDE9PT1jKXIuY2hpbGRyZW49YTtlbHNlIGlmKDE8Yyl7Zm9yKHZhciBkPUFycmF5KGMpLHA9MDtwPGM7cCsrKWRbcF09YXJndW1lbnRzW3ArMl07ci5jaGlsZHJlbj1kfWlmKGUmJmUuZGVmYXVsdFByb3BzKWZvcihuIGluIGM9ZS5kZWZhdWx0UHJvcHMpdm9pZCAwPT09cltuXSYmKHJbbl09Y1tuXSk7cmV0dXJueyQkdHlwZW9mOm8sdHlwZTplLGtleTppLHJlZjpzLHByb3BzOnIsX293bmVyOlMuY3VycmVudH19ZnVuY3Rpb24gVyhlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJmUuJCR0eXBlb2Y9PT1vfXZhciBDPS9cXC8rL2c7ZnVuY3Rpb24gSShlLHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmbnVsbCE9ZS5rZXk/ZnVuY3Rpb24oZSl7dmFyIHQ9e1wiPVwiOlwiPTBcIixcIjpcIjpcIj0yXCJ9O3JldHVyblwiJFwiK2UucmVwbGFjZSgvWz06XS9nLChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pKX0oXCJcIitlLmtleSk6dC50b1N0cmluZygzNil9ZnVuY3Rpb24gQShlLHQsYSxuLGkpe3ZhciBzPXR5cGVvZiBlO1widW5kZWZpbmVkXCIhPT1zJiZcImJvb2xlYW5cIiE9PXN8fChlPW51bGwpO3ZhciBjPSExO2lmKG51bGw9PT1lKWM9ITA7ZWxzZSBzd2l0Y2gocyl7Y2FzZVwic3RyaW5nXCI6Y2FzZVwibnVtYmVyXCI6Yz0hMDticmVhaztjYXNlXCJvYmplY3RcIjpzd2l0Y2goZS4kJHR5cGVvZil7Y2FzZSBvOmNhc2UgcjpjPSEwfX1pZihjKXJldHVybiBpPWkoYz1lKSxlPVwiXCI9PT1uP1wiLlwiK0koYywwKTpuLEFycmF5LmlzQXJyYXkoaSk/KGE9XCJcIixudWxsIT1lJiYoYT1lLnJlcGxhY2UoQyxcIiQmL1wiKStcIi9cIiksQShpLHQsYSxcIlwiLChmdW5jdGlvbihlKXtyZXR1cm4gZX0pKSk6bnVsbCE9aSYmKFcoaSkmJihpPWZ1bmN0aW9uKGUsdCl7cmV0dXJueyQkdHlwZW9mOm8sdHlwZTplLnR5cGUsa2V5OnQscmVmOmUucmVmLHByb3BzOmUucHJvcHMsX293bmVyOmUuX293bmVyfX0oaSxhKyghaS5rZXl8fGMmJmMua2V5PT09aS5rZXk/XCJcIjooXCJcIitpLmtleSkucmVwbGFjZShDLFwiJCYvXCIpK1wiL1wiKStlKSksdC5wdXNoKGkpKSwxO2lmKGM9MCxuPVwiXCI9PT1uP1wiLlwiOm4rXCI6XCIsQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGQ9MDtkPGUubGVuZ3RoO2QrKyl7dmFyIHA9bitJKHM9ZVtkXSxkKTtjKz1BKHMsdCxhLHAsaSl9ZWxzZSBpZihwPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGU/bnVsbDpcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXUmJmVbdV18fGVbXCJAQGl0ZXJhdG9yXCJdKT9lOm51bGx9KGUpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHApZm9yKGU9cC5jYWxsKGUpLGQ9MDshKHM9ZS5uZXh0KCkpLmRvbmU7KWMrPUEocz1zLnZhbHVlLHQsYSxwPW4rSShzLGQrKyksaSk7ZWxzZSBpZihcIm9iamVjdFwiPT09cyl0aHJvdyB0PVwiXCIrZSxFcnJvcih3KDMxLFwiW29iamVjdCBPYmplY3RdXCI9PT10P1wib2JqZWN0IHdpdGgga2V5cyB7XCIrT2JqZWN0LmtleXMoZSkuam9pbihcIiwgXCIpK1wifVwiOnQpKTtyZXR1cm4gY31mdW5jdGlvbiBNKGUsdCxhKXtpZihudWxsPT1lKXJldHVybiBlO3ZhciBuPVtdLG89MDtyZXR1cm4gQShlLG4sXCJcIixcIlwiLChmdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKGEsZSxvKyspfSkpLG59ZnVuY3Rpb24gTyhlKXtpZigtMT09PWUuX3N0YXR1cyl7dmFyIHQ9ZS5fcmVzdWx0O3Q9dCgpLGUuX3N0YXR1cz0wLGUuX3Jlc3VsdD10LHQudGhlbigoZnVuY3Rpb24odCl7MD09PWUuX3N0YXR1cyYmKHQ9dC5kZWZhdWx0LGUuX3N0YXR1cz0xLGUuX3Jlc3VsdD10KX0pLChmdW5jdGlvbih0KXswPT09ZS5fc3RhdHVzJiYoZS5fc3RhdHVzPTIsZS5fcmVzdWx0PXQpfSkpfWlmKDE9PT1lLl9zdGF0dXMpcmV0dXJuIGUuX3Jlc3VsdDt0aHJvdyBlLl9yZXN1bHR9dmFyIFQ9e2N1cnJlbnQ6bnVsbH07ZnVuY3Rpb24gRSgpe3ZhciBlPVQuY3VycmVudDtpZihudWxsPT09ZSl0aHJvdyBFcnJvcih3KDMyMSkpO3JldHVybiBlfX0sMzc4OihlLHQsYSk9PnthKDUzNSl9fSx0PXt9O2Z1bmN0aW9uIGEobil7dmFyIG89dFtuXTtpZih2b2lkIDAhPT1vKXJldHVybiBvLmV4cG9ydHM7dmFyIHI9dFtuXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbbl0ocixyLmV4cG9ydHMsYSksci5leHBvcnRzfWEuZD0oZSx0KT0+e2Zvcih2YXIgbiBpbiB0KWEubyh0LG4pJiYhYS5vKGUsbikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6ITAsZ2V0OnRbbl19KX0sYS5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSxhLnI9ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9O3ZhciBuPXt9OygoKT0+e3ZhciBlLHQsbyxyLGkscyxjLGQ7YS5yKG4pLGEuZChuLHtBcHBNYW5pZmVzdFR5cGU6KCk9PmMsQnJvd3NlckJ1dHRvblR5cGU6KCk9PmcsQ3VzdG9tQWN0aW9uQ2FsbGVyVHlwZTooKT0+aCxHbG9iYWxDb250ZXh0TWVudU9wdGlvblR5cGU6KCk9PnUsUGFnZVRhYkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+dyxTYXZlQnV0dG9uQ29udGV4dE1lbnVPcHRpb25UeXBlOigpPT55LFNhdmVNb2RhbFR5cGU6KCk9Pm0sVmlld1RhYk1lbnVPcHRpb25UeXBlOigpPT5mLGdldEN1cnJlbnRTeW5jOigpPT5VdCxpbml0OigpPT5Dbix3cmFwU3luYzooKT0+RHR9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KGV8fChlPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0odHx8KHQ9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLlN1Z2dlc3Rpb249XCJzdWdnZXN0aW9uXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5Db250YWN0PVwiQ29udGFjdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCIsZS5MaXN0PVwiTGlzdFwiLGUuUGxhaW49XCJQbGFpblwiLGUuU2ltcGxlVGV4dD1cIlNpbXBsZVRleHRcIixlLkxvYWRpbmc9XCJMb2FkaW5nXCIsZS5FcnJvcj1cIkVycm9yXCJ9KGl8fChpPXt9KSksZnVuY3Rpb24oZSl7ZS5NdWx0aVNlbGVjdD1cIk11bHRpU2VsZWN0XCJ9KHN8fChzPXt9KSksZnVuY3Rpb24oZSl7ZS5TbmFwc2hvdD1cInNuYXBzaG90XCIsZS5NYW5pZmVzdD1cIm1hbmlmZXN0XCIsZS5WaWV3PVwidmlld1wiLGUuRXh0ZXJuYWw9XCJleHRlcm5hbFwifShjfHwoYz17fSkpLGZ1bmN0aW9uKGUpe2UuTGFuZGluZ1BhZ2U9XCJsYW5kaW5nUGFnZVwiLGUuQXBwR3JpZD1cImFwcEdyaWRcIn0oZHx8KGQ9e30pKTt2YXIgcCxsLHUsdyxmLGcseSxoLG0sdjshZnVuY3Rpb24oZSl7ZS5QcmltYXJ5PVwicHJpbWFyeVwiLGUuU2Vjb25kYXJ5PVwic2Vjb25kYXJ5XCIsZS5UZXh0T25seT1cInRleHRPbmx5XCJ9KHB8fChwPXt9KSksZnVuY3Rpb24oZSl7ZS5BY3Rpb25CdXR0b249XCJBY3Rpb25CdXR0b25cIixlLkRyb3Bkb3duQnV0dG9uPVwiRHJvcGRvd25CdXR0b25cIn0obHx8KGw9e30pKSxmdW5jdGlvbihlKXtlLk5ld1dpbmRvdz1cIk5ld1dpbmRvd1wiLGUuTmV3UGFnZT1cIk5ld1BhZ2VcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5DbG9zZVdpbmRvdz1cIkNsb3NlV2luZG93XCIsZS5SZXN0b3JlQ2hhbmdlcz1cIlJlc3RvcmVDaGFuZ2VzXCIsZS5TYXZlV29ya3NwYWNlPVwiU2F2ZVdvcmtzcGFjZVwiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5SZW5hbWVXb3Jrc3BhY2U9XCJSZW5hbWVXb3Jrc3BhY2VcIixlLlN3aXRjaFdvcmtzcGFjZT1cIlN3aXRjaFdvcmtzcGFjZVwiLGUuRGVsZXRlV29ya3NwYWNlPVwiRGVsZXRlV29ya3NwYWNlXCIsZS5PcGVuU3RvcmVmcm9udD1cIk9wZW5TdG9yZWZyb250XCIsZS5RdWl0PVwiUXVpdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KHV8fCh1PXt9KSksZnVuY3Rpb24oZSl7ZS5DbG9zZT1cIkNsb3NlXCIsZS5EdXBsaWNhdGU9XCJEdXBsaWNhdGVcIixlLlJlbmFtZT1cIlJlbmFtZVwiLGUuU2F2ZT1cIlNhdmVcIixlLlNhdmVBcz1cIlNhdmUgQXNcIixlLkN1c3RvbT1cIkN1c3RvbVwifSh3fHwodz17fSkpLGZ1bmN0aW9uKGUpe2UuTmV3Vmlldz1cIk5ld1ZpZXdcIixlLkR1cGxpY2F0ZVZpZXdzPVwiRHVwbGljYXRlVmlld1wiLGUuT3BlbldpdGhEZWZhdWx0QnJvd3Nlcj1cIk9wZW5XaXRoRGVmYXVsdEJyb3dzZXJcIixlLlJlbG9hZFZpZXdzPVwiUmVsb2FkVGFiXCIsZS5DbG9zZVZpZXdzPVwiQ2xvc2VUYWJcIixlLkFkZFRvQ2hhbm5lbD1cIkFkZFRvQ2hhbm5lbFwiLGUuUmVtb3ZlRnJvbUNoYW5uZWw9XCJSZW1vdmVGcm9tQ2hhbm5lbFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KGZ8fChmPXt9KSksZnVuY3Rpb24oZSl7ZS5TaG93SGlkZVRhYnM9XCJTaG93SGlkZVRhYnNcIixlLkNvbG9yTGlua2luZz1cIkNvbG9yTGlua2luZ1wiLGUuUHJlc2V0TGF5b3V0cz1cIlByZXNldExheW91dHNcIixlLkxvY2tVbmxvY2tQYWdlPVwiTG9ja1VubG9ja1BhZ2VcIixlLlNhdmVNZW51PVwiU2F2ZU1lbnVcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLk1pbmltaXNlPVwiTWluaW1pc2VcIixlLk1heGltaXNlPVwiTWF4aW1pc2VcIixlLkNsb3NlPVwiQ2xvc2VcIixlLkN1c3RvbT1cIkN1c3RvbVwifShnfHwoZz17fSkpLGZ1bmN0aW9uKGUpe2UuU2F2ZVBhZ2U9XCJTYXZlUGFnZVwiLGUuU2F2ZVdvcmtzcGFjZT1cIlNhdmVXb3Jrc3BhY2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLkN1c3RvbT1cIkN1c3RvbVwifSh5fHwoeT17fSkpLGZ1bmN0aW9uKGUpe2UuQ3VzdG9tQnV0dG9uPVwiQ3VzdG9tQnV0dG9uXCIsZS5DdXN0b21Ecm9wZG93bkl0ZW09XCJDdXN0b21Ecm9wZG93bkl0ZW1cIixlLkdsb2JhbENvbnRleHRNZW51PVwiR2xvYmFsQ29udGV4dE1lbnVcIixlLlZpZXdUYWJDb250ZXh0TWVudT1cIlZpZXdUYWJDb250ZXh0TWVudVwiLGUuUGFnZVRhYkNvbnRleHRNZW51PVwiUGFnZVRhYkNvbnRleHRNZW51XCIsZS5TYXZlQnV0dG9uQ29udGV4dE1lbnU9XCJTYXZlQnV0dG9uQ29udGV4dE1lbnVcIixlLkFQST1cIkFQSVwifShofHwoaD17fSkpLGZ1bmN0aW9uKGUpe2UuU0FWRV9QQUdFPVwiU0FWRV9QQUdFXCIsZS5TQVZFX1dPUktTUEFDRT1cIlNBVkVfV09SS1NQQUNFXCIsZS5TQVZFX1BBR0VfQVM9XCJTQVZFX1BBR0VfQVNcIixlLlNBVkVfV09SS1NQQUNFX0FTPVwiU0FWRV9XT1JLU1BBQ0VfQVNcIixlLlJFTkFNRV9QQUdFPVwiUkVOQU1FX1BBR0VcIixlLlJFTkFNRV9XT1JLU1BBQ0U9XCJSRU5BTUVfV09SS1NQQUNFXCJ9KG18fChtPXt9KSksZnVuY3Rpb24oZSl7ZS5Mb2NhbD1cImxvY2FsXCIsZS5EZXY9XCJkZXZcIixlLlN0YWdpbmc9XCJzdGFnaW5nXCIsZS5Qcm9kPVwicHJvZFwifSh2fHwodj17fSkpO2NvbnN0IFM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbixQPShcInVuZGVmaW5lZFwiPT10eXBlb2YgcHJvY2Vzc3x8cHJvY2Vzcy5lbnY/LkpFU1RfV09SS0VSX0lELFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpLGI9UCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGluZGV4ZWREQixrPVA/d2luZG93Lm9yaWdpbjp2LkxvY2FsLFc9UyYmZmluLm1lLnV1aWQsQz1TJiZmaW4ubWUubmFtZSxJPVMmJmZpbi5tZS5lbnRpdHlUeXBlLEE9KHYuTG9jYWwsdi5EZXYsdi5TdGFnaW5nLHYuUHJvZCxlPT5lLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpfHxlLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKT9lOmsrZSksTT0oQShcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzkuMC43XCIpLEEoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuN1wiKSksTz0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmQShXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZBKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiMjYuMTAyLjcxLjVcIiksVD1cIjkuMC43XCI7dmFyIEUsQix4OyFmdW5jdGlvbihlKXtlLldvcmtzcGFjZT1cIm9wZW5maW4tYnJvd3NlclwifShFfHwoRT17fSkpLGZ1bmN0aW9uKGUpe2UuUnVuUmVxdWVzdGVkPVwicnVuLXJlcXVlc3RlZFwiLGUuV2luZG93T3B0aW9uc0NoYW5nZWQ9XCJ3aW5kb3ctb3B0aW9ucy1jaGFuZ2VkXCIsZS5XaW5kb3dDbG9zZWQ9XCJ3aW5kb3ctY2xvc2VkXCIsZS5XaW5kb3dDcmVhdGVkPVwid2luZG93LWNyZWF0ZWRcIn0oQnx8KEI9e30pKSxmdW5jdGlvbihlKXtlLkZpblByb3RvY29sPVwiZmluLXByb3RvY29sXCJ9KHh8fCh4PXt9KSk7Y29uc3QgUj17dXVpZDpXfSxfPShFLldvcmtzcGFjZSxlPT57aWYoIVMpdGhyb3cgbmV3IEVycm9yKFwiZ2V0QXBwbGljYXRpb24gY2Fubm90IGJlIHVzZWQgaW4gYSBub24gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uQXBwbGljYXRpb24ud3JhcFN5bmMoZSl9KSxMPSgpPT5fKFIpO3ZhciBWLEQ7IWZ1bmN0aW9uKGUpe2UuSG9tZT1cIm9wZW5maW4taG9tZVwiLGUuRG9jaz1cIm9wZW5maW4tZG9ja1wiLGUuU3RvcmVmcm9udD1cIm9wZW5maW4tc3RvcmVmcm9udFwiLGUuSG9tZUludGVybmFsPVwib3BlbmZpbi1ob21lLWludGVybmFsXCIsZS5Ccm93c2VyTWVudT1cIm9wZW5maW4tYnJvd3Nlci1tZW51XCIsZS5Ccm93c2VySW5kaWNhdG9yPVwib3BlbmZpbi1icm93c2VyLWluZGljYXRvclwiLGUuQnJvd3NlcldpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC13aW5kb3dcIn0oVnx8KFY9e30pKSxmdW5jdGlvbihlKXtlLlNob3duPVwic2hvd25cIixlLkJvdW5kc0NoYW5nZWQ9XCJib3VuZHMtY2hhbmdlZFwiLGUuTGF5b3V0UmVhZHk9XCJsYXlvdXQtcmVhZHlcIixlLkVuZFVzZXJCb3VuZHNDaGFuZ2luZz1cImVuZC11c2VyLWJvdW5kcy1jaGFuZ2luZ1wiLGUuQmx1cnJlZD1cImJsdXJyZWRcIixlLkNsb3NlZD1cImNsb3NlZFwiLGUuQ2xvc2VSZXF1ZXN0ZWQ9XCJjbG9zZS1yZXF1ZXN0ZWRcIixlLkZvY3VzZWQ9XCJmb2N1c2VkXCIsZS5TaG93UmVxdWVzdGVkPVwic2hvdy1yZXF1ZXN0ZWRcIixlLlZpZXdDcmFzaGVkPVwidmlldy1jcmFzaGVkXCIsZS5WaWV3QXR0YWNoZWQ9XCJ2aWV3LWF0dGFjaGVkXCIsZS5WaWV3RGV0YWNoZWQ9XCJ2aWV3LWRldGFjaGVkXCIsZS5WaWV3UGFnZVRpdGxlVXBkYXRlZD1cInZpZXctcGFnZS10aXRsZS11cGRhdGVkXCIsZS5WaWV3RGVzdHJveWVkPVwidmlldy1kZXN0cm95ZWRcIixlLk9wdGlvbnNDaGFuZ2VkPVwib3B0aW9ucy1jaGFuZ2VkXCJ9KER8fChEPXt9KSk7ZnVuY3Rpb24gVShlKXtpZighUyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRPRldpbmRvdyBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gZW52LiBBdm9pZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLldpbmRvdy53cmFwU3luYyhlKX1jb25zdCBGPXtuYW1lOkMsdXVpZDpXfTtmdW5jdGlvbiBHKCl7cmV0dXJuIFUoRil9Vi5Ib21lLEUuV29ya3NwYWNlLFYuRG9jayxFLldvcmtzcGFjZTtjb25zdCAkPXtuYW1lOlYuU3RvcmVmcm9udCx1dWlkOkUuV29ya3NwYWNlfTtFLldvcmtzcGFjZSxFLldvcmtzcGFjZTthc3luYyBmdW5jdGlvbiBOKGUpe2NvbnN0IHQ9VShlKTtcIm1pbmltaXplZFwiPT09YXdhaXQgdC5nZXRTdGF0ZSgpJiZhd2FpdCB0LnJlc3RvcmUoKSxhd2FpdCB0LnNob3coKSxhd2FpdCB0LnNldEFzRm9yZWdyb3VuZCgpfWNvbnN0IGo9ZT0+ZS5zdGFydHNXaXRoKFYuQnJvd3NlcldpbmRvdyk7YXN5bmMgZnVuY3Rpb24gSCgpe3JldHVybihhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSkuZmlsdGVyKChlPT5qKGUuaWRlbnRpdHkubmFtZSkpKX1jb25zdCBxPWU9PlUoZSkuZ2V0T3B0aW9ucygpLnRoZW4oKCgpPT4hMCkpLmNhdGNoKCgoKT0+ITEpKSxLPSgpPT5xKCQpO3ZhciBROyFmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJCcm93c2VyXCIsZS5Eb2NrPVwiRG9ja1wiLGUuSG9tZT1cIkhvbWVcIixlLk5vdGlmaWNhdGlvbj1cIk5vdGlmaWNhdGlvblwiLGUuU3RvcmVmcm9udD1cIlN0b3JlZnJvbnRcIixlLlBsYXRmb3JtPVwiUGxhdGZvcm1cIixlLlRoZW1pbmc9XCJUaGVtaW5nXCJ9KFF8fChRPXt9KSk7Y29uc3Qgej1hc3luYyhlLHQpPT57Y29uc3QgYT17YXBpVmVyc2lvbjp0LmFwaVZlcnNpb258fFQsY29tcG9uZW50TmFtZTplLGNvbXBvbmVudFZlcnNpb246dC5jb21wb25lbnRWZXJzaW9ufHxULGFsbG93ZWQ6dC5hbGxvd2VkLHJlamVjdGlvbkNvZGU6dC5yZWplY3Rpb25Db2RlfTtmaW4uU3lzdGVtLnJlZ2lzdGVyVXNhZ2Uoe3R5cGU6XCJ3b3Jrc3BhY2UtbGljZW5zaW5nXCIsZGF0YTphfSl9O2EoMzc4KTtjb25zdCBKPWU9PmZpbi5TeXN0ZW0uZ2V0U3lzdGVtQXBwQ29uZmlnKGUpO2xldCBYO2FzeW5jIGZ1bmN0aW9uIFkoKXtpZihYKXJldHVybiBYO2lmKCFTKXJldHVybnt9O2NvbnN0IGU9YXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtpZihTKXRyeXtsZXQgZT1hd2FpdCBKKFwid29ya3NwYWNlXCIpLmNhdGNoKChlPT57fSkpO3JldHVybiBlfHwoZT1hd2FpdCBKKFwiaG9tZVwiKSksZX1jYXRjaChlKXt9fSgpLHQ9YXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtjb25zdHttYW5pZmVzdDplLGluaXRpYWxPcHRpb25zOnR9PWF3YWl0IGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldEluZm8oKTtyZXR1cm4gZT8ud29ya3NwYWNlfHxlPy5ob21lfHx0Py53b3Jrc3BhY2V8fHQ/LmhvbWUsZT8ud29ya3NwYWNlP2U/LndvcmtzcGFjZTplPy5ob21lP2U/LmhvbWU6dD8ud29ya3NwYWNlP3Q/LndvcmtzcGFjZTp0Py5ob21lP3Q/LmhvbWU6dm9pZCAwfSgpO3JldHVybiBYPXsuLi50LC4uLmV9LFh9dmFyIFo7IWZ1bmN0aW9uKGUpe2UuQ3VycmVudFdvcmtzcGFjZUlkPVwiY3VycmVudFdvcmtzcGFjZUlkXCIsZS5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJsYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLk1hY2hpbmVOYW1lPVwibWFjaGluZU5hbWVcIixlLk5ld1RhYlBhZ2VMYXlvdXQ9XCJOZXdUYWJQYWdlTGF5b3V0XCIsZS5OZXdUYWJQYWdlU29ydD1cIk5ld1RhYlBhZ2VTb3J0XCIsZS5Eb2NrUG9zaXRpb249XCJEb2NrUG9zaXRpb25cIn0oWnx8KFo9e30pKTtjb25zdCBlZT1aLHRlPShlLHQpPT57bG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7V30tJHtlfWAsdCl9LGFlPWU9PmxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke1d9LSR7ZX1gKTt2YXIgbmU7IWZ1bmN0aW9uKGUpe2UuTGF1bmNoQXBwPVwibGF1bmNoQXBwXCIsZS5TYXZlUGFnZT1cInNhdmVQYWdlXCIsZS5HZXRTYXZlZFBhZ2U9XCJnZXRTYXZlZFBhZ2VcIixlLkNyZWF0ZVNhdmVkUGFnZT1cImNyZWF0ZVNhdmVkUGFnZVwiLGUuVXBkYXRlU2F2ZWRQYWdlPVwidXBkYXRlU2F2ZWRQYWdlXCIsZS5EZWxldGVTYXZlZFBhZ2U9XCJkZWxldGVTYXZlZFBhZ2VcIixlLkdldFNhdmVkUGFnZXM9XCJnZXRTYXZlZFBhZ2VzXCIsZS5DcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbD1cImNyZWF0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5VcGRhdGVTYXZlZFBhZ2VJbnRlcm5hbD1cInVwZGF0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5EZWxldGVTYXZlZFBhZ2VJbnRlcm5hbD1cImRlbGV0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5TaGFyZVBhZ2U9XCJzaGFyZVBhZ2VcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGVQYWdlRm9yV2luZG93XCIsZS5BdHRhY2hQYWdlc1RvV2luZG93PVwiYXR0YWNoUGFnZXNUb1dpbmRvd1wiLGUuRGV0YWNoUGFnZXNGcm9tV2luZG93PVwiZGV0YWNoUGFnZXNGcm9tV2luZG93XCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyUGFnZXNGb3JXaW5kb3dcIixlLlNldEFjdGl2ZVBhZ2U9XCJzZXRBY3RpdmVQYWdlXCIsZS5HZXRBbGxBdHRhY2hlZFBhZ2VzPVwiZ2V0QWxsQXR0YWNoZWRQYWdlc1wiLGUuR2V0QWN0aXZlUGFnZUlkRm9yV2luZG93PVwiZ2V0QWN0aXZlUGFnZUlkRm9yV2luZG93XCIsZS5HZXRQYWdlc0ZvcldpbmRvdz1cImdldFBhZ2VzRm9yV2luZG93XCIsZS5HZXRQYWdlRm9yV2luZG93PVwiZ2V0UGFnZUZvcldpbmRvd1wiLGUuR2V0U2F2ZWRQYWdlTWV0YWRhdGE9XCJnZXRTYXZlZFBhZ2VNZXRhZGF0YVwiLGUuR2V0VW5pcXVlUGFnZVRpdGxlPVwiZ2V0VW5pcXVlUGFnZVRpdGxlXCIsZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJnZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLkdldFRoZW1lcz1cImdldFRoZW1lc1wiLGUuT3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsPVwib3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSW52b2tlQ3VzdG9tQWN0aW9uSW50ZXJuYWw9XCJpbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbFwiLGUuUmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPVwicmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsXCIsZS5HZXRTYXZlZFdvcmtzcGFjZT1cImdldFNhdmVkV29ya3NwYWNlXCIsZS5DcmVhdGVTYXZlZFdvcmtzcGFjZT1cImNyZWF0ZVNhdmVkV29ya3NwYWNlXCIsZS5VcGRhdGVTYXZlZFdvcmtzcGFjZT1cInVwZGF0ZVNhdmVkV29ya3NwYWNlXCIsZS5EZWxldGVTYXZlZFdvcmtzcGFjZT1cImRlbGV0ZVNhdmVkV29ya3NwYWNlXCIsZS5HZXRTYXZlZFdvcmtzcGFjZXM9XCJnZXRTYXZlZFdvcmtzcGFjZXNcIixlLlNhdmVXb3Jrc3BhY2U9XCJzYXZlV29ya3NwYWNlXCIsZS5HZXRDdXJyZW50V29ya3NwYWNlPVwiZ2V0Q3VycmVudFdvcmtzcGFjZVwiLGUuQXBwbHlXb3Jrc3BhY2U9XCJhcHBseVdvcmtzcGFjZVwiLGUuU2V0QWN0aXZlV29ya3NwYWNlPVwic2V0QWN0aXZlV29ya3NwYWNlXCIsZS5Jc0Jyb3dzZXJJbml0aWFsaXplZD1cImlzQnJvd3NlckluaXRpYWxpemVkXCJ9KG5lfHwobmU9e30pKTtjb25zdCBvZT1hc3luYyBlPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0Q2xpZW50KCkscmU9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgb2UoZSksYT1cIlRhcmdldCBpcyBub3QgYSBXb3Jrc3BhY2UgUGxhdGZvcm0uIFRhcmdldCBtdXN0IGNhbGwgV29ya3NwYWNlUGxhdGZvcm0uaW5pdFwiO2xldCBuO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goXCJpc1dvcmtzcGFjZVBsYXRmb3JtXCIpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihhKX1pZighMCE9PW4/LmlzV29ya3NwYWNlUGxhdGZvcm0pdGhyb3cgbmV3IEVycm9yKGEpO3JldHVybiBufSxpZT1hc3luYyBlPT4oYXdhaXQgcmUoZSksb2UoZSkpLHNlPWFzeW5jIGU9PntpZighMCE9PShhd2FpdCByZShlKSk/LmlzQnJvd3NlckluaXRpYWxpemVkKXRocm93IG5ldyBFcnJvcihcIlRhcmdldCBpcyBub3QgYSBCcm93c2VyLWVuYWJsZWQgV29ya3NwYWNlIFBsYXRmb3JtLlwiKTtyZXR1cm4gb2UoZSl9LGNlPShlLHQpPT4hdC5maW5kKCh0PT50PT09ZSkpLGRlPShlLHQpPT5gJHtlfSAoJHt0fSlgLHBlPShlLHQpPT57bGV0IGE9MTtjb25zdCBuPWUucmVwbGFjZSgvIFxcKC4rXFwpJC8sXCJcIik7Zm9yKDshY2UoZGUobixhKSx0KTspYSs9MTtyZXR1cm4gZGUobixhKX07YXN5bmMgZnVuY3Rpb24gbGUoZSl7dHJ5e2NvbnN0IHQ9VXQoKTthd2FpdCB0LmFwcGx5U25hcHNob3QoZS5zbmFwc2hvdCx7Y2xvc2VFeGlzdGluZ1dpbmRvd3M6ITB9KSx1ZShlKX1jYXRjaChlKXt9fWZ1bmN0aW9uIHVlKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IHQ9SlNPTi5zdHJpbmdpZnkoZSk7dGUoZWUuQ3VycmVudFdvcmtzcGFjZUlkLHQpfWNhdGNoKGUpe319YXN5bmMgZnVuY3Rpb24gd2UoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgbG9jYWxTdG9yYWdlKXJldHVybjtjb25zdCBlPVV0KCksdD1hd2FpdCBlLmdldFNuYXBzaG90KCk7cmV0dXJue3dvcmtzcGFjZUlkOmNyeXB0by5yYW5kb21VVUlEKCksdGl0bGU6YXdhaXQgeWUoKSxtZXRhZGF0YTp7QVBJVmVyc2lvbjpUfSxzbmFwc2hvdDp0fX1hc3luYyBmdW5jdGlvbiBmZSgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBsb2NhbFN0b3JhZ2UpcmV0dXJuO2NvbnN0IGU9YWUoZWUuQ3VycmVudFdvcmtzcGFjZUlkKTtpZighZSlyZXR1cm4gd2UoKTtjb25zdCB0PUpTT04ucGFyc2UoZSksYT1VdCgpLG49YXdhaXQgYS5nZXRTbmFwc2hvdCgpO3JldHVybnsuLi50LG1ldGFkYXRhOntBUElWZXJzaW9uOlR9LHNuYXBzaG90Om59fWNvbnN0IGdlPWFzeW5jIGU9PmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBpZShGKSkuZGlzcGF0Y2gobmUuR2V0U2F2ZWRXb3Jrc3BhY2UsZSkpKGUud29ya3NwYWNlSWQpPyhhc3luYyBlPT4oYXdhaXQgaWUoRikpLmRpc3BhdGNoKG5lLlVwZGF0ZVNhdmVkV29ya3NwYWNlLGUpKSh7d29ya3NwYWNlSWQ6ZS53b3Jrc3BhY2VJZCx3b3Jrc3BhY2U6ZX0pOihhc3luYyBlPT4oYXdhaXQgaWUoRikpLmRpc3BhdGNoKG5lLkNyZWF0ZVNhdmVkV29ya3NwYWNlLGUpKSh7d29ya3NwYWNlOmV9KTthc3luYyBmdW5jdGlvbiB5ZShlPVwiVW50aXRsZWQgV29ya3NwYWNlXCIpe2NvbnN0IHQ9KGF3YWl0KGFzeW5jKCk9Pihhd2FpdCBpZShGKSkuZGlzcGF0Y2gobmUuR2V0U2F2ZWRXb3Jrc3BhY2VzLHZvaWQgMCkpKCkpLm1hcCgoKHt0aXRsZTplfSk9PmUpKTtyZXR1cm4gdC5maW5kKCh0PT50PT09ZSkpP3BlKGUsdCk6ZX1hc3luYyBmdW5jdGlvbiBoZSgpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IGU9YWUoZWUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93KTtpZighZSlyZXR1cm47Y29uc3QgdD1KU09OLnBhcnNlKGUpO2lmKGF3YWl0IHEodCkpcmV0dXJuIHR9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGBmYWlsZWQgdG8gZ2V0IGxhc3QgZm9jdXNlZCBicm93c2VyIHdpbmRvdzogJHtlfWApfX1mdW5jdGlvbiBtZShlPWZpbi5tZS5pZGVudGl0eSl7aihlLm5hbWUpJiZmdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYWxTdG9yYWdlKXRyeXtjb25zdCB0PUpTT04uc3RyaW5naWZ5KGUpO3RlKGVlLkxhc3RGb2N1c2VkQnJvd3NlcldpbmRvdyx0KX1jYXRjaChlKXt9fShlKX1jb25zdCB2ZT0oZSx0PTApPT57bGV0IGEsbixvPSExO2NvbnN0IHI9YXN5bmMgbj0+e2NvbnN0IGk9YXdhaXQgZSguLi5uKTtpZihvKXthd2FpdCBuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLHQpKSk7Y29uc3QgZT1hO3JldHVybiBhPXZvaWQgMCxvPSExLHIoZSl9cmV0dXJuIGl9O3JldHVybiguLi5lKT0+KG4/KG89ITAsYT1lKTpuPXIoZSkuY2F0Y2goKGU9Pnt0aHJvdyBlfSkpLmZpbmFsbHkoKCgpPT57bj12b2lkIDB9KSksbil9O3ZhciBTZTshZnVuY3Rpb24oZSl7ZS5UYWJDcmVhdGVkPVwidGFiLWNyZWF0ZWRcIixlLkNvbnRhaW5lckNyZWF0ZWQ9XCJjb250YWluZXItY3JlYXRlZFwiLGUuQ29udGFpbmVyUmVzaXplZD1cImNvbnRhaW5lci1yZXNpemVkXCJ9KFNlfHwoU2U9e30pKTtjb25zdCBQZT0oZSx0KT0+ZS5jb250ZW50P3suLi5lLGNvbnRlbnQ6ZS5jb250ZW50Lm1hcCgoZT0+UGUoZSx0KSkpfTp7Li4uZSxjb21wb25lbnRTdGF0ZTp0KGUuY29tcG9uZW50U3RhdGUpfSxiZT1lPT4oey4uLmUsbmFtZTplLm5hbWU/ZS5uYW1lOmNyeXB0by5yYW5kb21VVUlEKCl9KSxrZT1lPT57Y29uc3QgdD1bXTtyZXR1cm4oZSYmQXJyYXkuaXNBcnJheShlKT9lOltdKS5mb3JFYWNoKChlPT57aWYoXCJjb21wb25lbnRcIj09PWUudHlwZSlyZXR1cm4gdC5wdXNoKGUuY29tcG9uZW50U3RhdGUpO2NvbnN0IGE9a2UoZS5jb250ZW50KTt0LnB1c2goLi4uYSl9KSksdH0sV2U9YXN5bmMoZSx0LGE9Rik9PntsZXQgbjtpZihqKGEubmFtZSkpe249KGF3YWl0IFUoYSkuZ2V0T3B0aW9ucygpKS5sYXlvdXR8fHtzZXR0aW5nczp7fX19cmV0dXJuey4uLm4sY29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7dGl0bGU6ZSx1cmw6dH19XX1dfX07bmV3IE1hcDtmdW5jdGlvbiBDZShlLHQpe3JldHVybiBhc3luYyhhLC4uLm4pPT57ZS5oYXMoYSkmJmUuZ2V0KGEpLmZvckVhY2goKGU9PmUoLi4ubikpKSx0JiZhd2FpdCB0KHtldmVudDphLHBheWxvYWQ6bn0pfX1mdW5jdGlvbiBJZShlLHQpe3JldHVybiB0JiZ0KCh0PT57Y29uc3R7ZXZlbnQ6YSxwYXlsb2FkOm59PXQ7ZS5oYXMoYSkmJmUuZ2V0KGEpLmZvckVhY2goKGU9PmUoLi4ubikpKX0pKSwodCxhKT0+e2UuaGFzKHQpfHxlLnNldCh0LG5ldyBTZXQpLGUuZ2V0KHQpLmFkZChhKX19ZnVuY3Rpb24gQWUoZSl7cmV0dXJuKHQsYSk9PntlLmhhcyh0KXx8ZS5zZXQodCxuZXcgU2V0KTtjb25zdCBuPWUuZ2V0KHQpLG89KC4uLmUpPT57YSguLi5lKSxuLmRlbGV0ZShvKX07bi5hZGQobyl9fWZ1bmN0aW9uIE1lKGUpe3JldHVybih0LGEpPT57ZS5oYXModCkmJmUuZ2V0KHQpLmRlbGV0ZShhKX19Y29uc3QgT2U9UCYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7ZnVuY3Rpb24gVGUoZSl7bGV0IHQ7cmV0dXJuKCk9PntpZighUyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRDaGFubmVsQ2xpZW50IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gdHx8KHQ9KGFzeW5jKCk9Pnthd2FpdCBPZTtjb25zdCBhPXtjbGllbnRBUElWZXJzaW9uOlR9LG49YXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3BheWxvYWQ6YX0pO3JldHVybiBuLm9uRGlzY29ubmVjdGlvbigoYXN5bmMoKT0+e3Q9dm9pZCAwfSkpLG59KSgpLnRoZW4oKGU9PmUpKS5jYXRjaCgoYT0+e3Rocm93IHQ9dm9pZCAwLG5ldyBFcnJvcihgZmFpbGVkIHRvIGNvbm5lY3QgdG8gY2hhbm5lbCBwcm92aWRlciAke2V9OiAke2F9YCl9KSkpLHR9fWNvbnN0IEVlPWU9PmBfX2Jyb3dzZXJfd2luZG93X18tJHtlLnV1aWR9LSR7ZS5uYW1lfWAsQmU9bmV3IE1hcCx4ZT1lPT57Y29uc3QgdD1FZShlKTtyZXR1cm4gQmUuaGFzKHQpfHxCZS5zZXQodCxUZSh0KSksQmUuZ2V0KHQpKCl9O3ZhciBSZSxfZTshZnVuY3Rpb24oZSl7ZS5DbG9zZUJyb3dzZXJXaW5kb3c9XCJjbG9zZS1icm93c2VyLXdpbmRvd1wiLGUuUXVpdFBsYXRmb3JtPVwicXVpdC1wbGF0Zm9ybVwiLGUuQ2xvc2VQYWdlPVwiY2xvc2UtcGFnZVwiLGUuQWRkVG9DaGFubmVsPVwiYWRkLXRvLWNoYW5uZWxcIixlLlJlbW92ZUZyb21DaGFubmVsPVwicmVtb3ZlLWZyb20tY2hhbm5lbFwiLGUuT3BlblNhdmVNb2RhbEludGVybmFsPVwib3Blbi1zYXZlLW1vZGFsLWludGVybmFsXCIsZS5EdXBsaWNhdGVQYWdlPVwiZHVwbGljYXRlLXBhZ2VcIn0oUmV8fChSZT17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0UGFnZXM9XCJnZXQtcGFnZXNcIixlLkdldEFjdGl2ZVBhZ2VGb3JXaW5kb3c9XCJnZXQtYWN0aXZlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuQXR0YWNoUGFnZXNUb1dpbmRvdz1cImF0dGFjaC1wYWdlcy10by13aW5kb3dcIixlLkRldGFjaFBhZ2VzRnJvbVdpbmRvdz1cImRldGFjaC1wYWdlcy1mcm9tLXdpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZUZvcldpbmRvdz1cInNldC1hY3RpdmUtcGFnZS1mb3Itd2luZG93XCIsZS5SZW5hbWVQYWdlPVwicmVuYW1lLXBhZ2VcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXItcGFnZXMtZm9yLXdpbmRvd1wiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZS1wYWdlLWZvci13aW5kb3dcIixlLlVwZGF0ZVBhZ2VzV2luZG93T3B0aW9ucz1cInVwZGF0ZS1wYWdlcy13aW5kb3ctb3B0aW9uc1wiLGUuSXNEZXRhY2hpbmdQYWdlcz1cImlzLWRldGFjaGluZy1wYWdlc1wiLGUuSXNBY3RpdmVQYWdlQ2hhbmdpbmc9XCJpcy1hY3RpdmUtcGFnZS1jaGFuZ2luZ1wifShfZXx8KF9lPXt9KSk7Y29uc3QgTGU9ey4uLlJlLC4uLl9lfTt2YXIgVmU7IWZ1bmN0aW9uKGUpe2UuQXR0YWNoZWRQYWdlc1RvV2luZG93PVwiYXR0YWNoZWQtcGFnZXMtdG8td2luZG93XCIsZS5EZXRhY2hlZFBhZ2VzRnJvbVdpbmRvdz1cImRldGFjaGVkLXBhZ2VzLWZyb20td2luZG93XCJ9KFZlfHwoVmU9e30pKTtuZXcgTWFwO2NvbnN0IERlPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHhlKGUpO3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKExlLkdldFBhZ2VzKX0sVWU9YXN5bmMgZT0+KGF3YWl0IHhlKGUuaWRlbnRpdHkpKS5kaXNwYXRjaChMZS5VcGRhdGVQYWdlRm9yV2luZG93LGUpLEZlPWFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IEgoKTtyZXR1cm4oYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jKHtpZGVudGl0eTplfSk9PkRlKGUpKSkpKS5yZWR1Y2UoKChlLHQpPT5lLmNvbmNhdCh0KSksW10pfSxHZT1hc3luYygpPT4oYXdhaXQgaWUoRikpLmRpc3BhdGNoKG5lLkdldFNhdmVkUGFnZXMsdm9pZCAwKSwkZT1hc3luYyBlPT4oYXdhaXQgaWUoRikpLmRpc3BhdGNoKG5lLkdldFNhdmVkUGFnZSxlKSxOZT1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdChhc3luYyBlPT4oYXdhaXQgRmUoKSkuZmluZCgodD0+dC5wYWdlSWQ9PT1lKSkpKGUpO3JldHVybiFhfHxhLnRpdGxlPT09dC50aXRsZSYmZT09PXQucGFnZUlkfHxhd2FpdCBVZSh7aWRlbnRpdHk6YS5wYXJlbnRJZGVudGl0eSxwYWdlSWQ6ZSxwYWdlOntwYWdlSWQ6dC5wYWdlSWQsdGl0bGU6dC50aXRsZX19KSxhfSxqZT1hc3luYyh7cGFnZTplfSk9Pnthd2FpdCBOZShlLnBhZ2VJZCxlKSxhd2FpdChhc3luYyBlPT4oYXdhaXQgaWUoRikpLmRpc3BhdGNoKG5lLkNyZWF0ZVNhdmVkUGFnZSxlKSkoe3BhZ2U6ZX0pfSxIZT1hc3luYyBlPT57YXdhaXQgJGUoZSkmJmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBpZShGKSkuZGlzcGF0Y2gobmUuRGVsZXRlU2F2ZWRQYWdlLGUpKShlKX0scWU9YXN5bmMoe3BhZ2VJZDplLHBhZ2U6dH0pPT57YXdhaXQgTmUoZSx0KTtyZXR1cm4gYXdhaXQoYXN5bmMgZT0+KGF3YWl0IGllKEYpKS5kaXNwYXRjaChuZS5VcGRhdGVTYXZlZFBhZ2UsZSkpKHtwYWdlSWQ6ZSxwYWdlOnR9KX0sS2U9YXN5bmMgZT0+YXdhaXQgJGUoZS5wYWdlSWQpP3FlKHtwYWdlSWQ6ZS5wYWdlSWQscGFnZTplfSk6amUoe3BhZ2U6ZX0pLFFlPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgeGUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKExlLkF0dGFjaFBhZ2VzVG9XaW5kb3csZSkpKGUpfSx6ZT1hc3luYyBlPT57YXdhaXQgVWUoZSl9LEplPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgeGUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKExlLkRldGFjaFBhZ2VzRnJvbVdpbmRvdyxlKSkoZSl9LFhlPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgeGUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKExlLlNldEFjdGl2ZVBhZ2VGb3JXaW5kb3csZSkpKGUpfSxZZT1lPT5EZShlKSxaZT1hc3luYyh7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pPT4oYXdhaXQgWWUoZSkpLmZpbmQoKGU9PmUucGFnZUlkPT09dCkpLGV0PWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgeGUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKExlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdyxlKSkoZSl9O2FzeW5jIGZ1bmN0aW9uIHR0KGU9XCJVbnRpdGxlZCBQYWdlXCIpe2NvbnN0W3QsYV09YXdhaXQgUHJvbWlzZS5hbGwoW0dlKCksRmUoKV0pLG49Wy4uLnQsLi4uYV0ubWFwKCgoe3RpdGxlOmV9KT0+ZSkpO3JldHVybiBuLmZpbmQoKHQ9PnQ9PT1lKSk/cGUoZSxuKTplfWNvbnN0IGF0PW5ldyBNYXAsbnQ9ZT0+YCR7ZS51dWlkfS0ke2UubmFtZX1gO2NvbnN0IG90PXZlKChhc3luYyBmdW5jdGlvbigpe2xldCBlPVtdO3RyeXtlPWF3YWl0IEZlKCl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgYXQuZm9yRWFjaCgoKGUsdCk9PntjbGVhclRpbWVvdXQoZSksYXQuZGVsZXRlKHQpfSkpfWNvbnN0IHQ9bmV3IFNldDtlLmZvckVhY2goKGU9PntrZShlLmxheW91dC5jb250ZW50KS5mb3JFYWNoKChlPT57aWYoZS5uYW1lKXtjb25zdCBhPW50KGUpO3QuYWRkKGEpfX0pKX0pKTtjb25zdCBhPUcoKTsoYXdhaXQgYS5nZXRDdXJyZW50Vmlld3MoKSkuZm9yRWFjaCgoKHtpZGVudGl0eTplfSk9Pntjb25zdCBhPW50KGUpO2lmKHQuaGFzKGEpfHxhdC5oYXMoYSkpcmV0dXJuO2NvbnN0IG49c2V0VGltZW91dCgoKCk9PntmaW4uVmlldy53cmFwU3luYyhlKS5kZXN0cm95KCksYXQuZGVsZXRlKGEpfSksNWUzKTthdC5zZXQoYSxuKX0pKSxhdC5mb3JFYWNoKCgoZSxhKT0+e3QuaGFzKGEpJiYoY2xlYXJUaW1lb3V0KGUpLGF0LmRlbGV0ZShhKSl9KSl9KSwyNTAwKSxydD0oe25hbWU6ZX0pPT57ZSYmaihlKSYmb3QoKS5jYXRjaCgoKCk9Pnt9KSl9O2xldCBpdD17fTtjb25zdCBzdD0oe2FjdGlvbklkOmUscGF5bG9hZDp0fSk9PntpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBpdFtlXSl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmaW5kIGEgY29uZmlndXJlZCBmdW5jdGlvbiBmb3IgdGhlIGFjdGlvbiAnJHtlfSdgKTtyZXR1cm4gaXRbZV0odCl9O2Z1bmN0aW9uIGN0KCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVlLk1hY2hpbmVOYW1lKX1sZXQgZHQ7YXN5bmMgZnVuY3Rpb24gcHQoKXtyZXR1cm4gZHR8fChkdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1hY2hpbmVJZCgpKSxkdH1jb25zdCBsdD1lPT57aWYoZS5sYXlvdXQmJkFycmF5LmlzQXJyYXkoZS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMpKXtjb25zdCB0PWUud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO2lmKHQpaWYodC5pc0xvY2tlZCl7Y29uc3QgYT0oKGUsdCk9Pntjb25zdCBhPWtlKHQuY29udGVudCk7cmV0dXJuey4uLlBlKGUsKGU9Pntjb25zdCB0PWEuZmluZCgodD0+dC5uYW1lPT09ZS5uYW1lJiZ0LnV1aWQ9PT1lLnV1aWQpKSxuPXQ/dC5pc0Nsb3NhYmxlOmUuaXNDbG9zYWJsZTtyZXR1cm57Li4uZSxpc0Nsb3NhYmxlOm59fSkpLHNldHRpbmdzOnQuc2V0dGluZ3N9fSkoZS5sYXlvdXQsdC5sYXlvdXQpO3QubGF5b3V0PWEsZS5sYXlvdXQ9YX1lbHNlIHQubGF5b3V0PWUubGF5b3V0fXJldHVybiBlfTthc3luYyBmdW5jdGlvbiB1dChlKXtjb25zdCB0PWV8fGF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmdldFNuYXBzaG90KCk7aWYodC5zbmFwc2hvdERldGFpbHM/Lm1hY2hpbmVJZClyZXR1cm4gdDtjb25zdCBhPWN0KCk7cmV0dXJuey4uLnQsc25hcHNob3REZXRhaWxzOnsuLi5lLnNuYXBzaG90RGV0YWlscyxtYWNoaW5lSWQ6YXdhaXQgcHQoKSxtYWNoaW5lTmFtZTphfX19ZnVuY3Rpb24gd3QoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxhKT0+e2Uub25jb21wbGV0ZT1lLm9uc3VjY2Vzcz0oKT0+dChlLnJlc3VsdCksZS5vbmFib3J0PWUub25lcnJvcj0oKT0+YShlLmVycm9yKX0pKX1mdW5jdGlvbiBmdChlLHQpe2NvbnN0IGE9aW5kZXhlZERCLm9wZW4oZSk7YS5vbnVwZ3JhZGVuZWVkZWQ9KCk9PmEucmVzdWx0LmNyZWF0ZU9iamVjdFN0b3JlKHQpO2NvbnN0IG49d3QoYSk7cmV0dXJuKGUsYSk9Pm4udGhlbigobj0+YShuLnRyYW5zYWN0aW9uKHQsZSkub2JqZWN0U3RvcmUodCkpKSl9bGV0IGd0O2Z1bmN0aW9uIHl0KCl7cmV0dXJuIGd0fHwoZ3Q9ZnQoXCJrZXl2YWwtc3RvcmVcIixcImtleXZhbFwiKSksZ3R9ZnVuY3Rpb24gaHQoZSx0PXl0KCkpe3JldHVybiB0KFwicmVhZG9ubHlcIiwodD0+d3QodC5nZXQoZSkpKSl9ZnVuY3Rpb24gbXQoZSx0LGE9eXQoKSl7cmV0dXJuIGEoXCJyZWFkd3JpdGVcIiwoYT0+KGEucHV0KHQsZSksd3QoYS50cmFuc2FjdGlvbikpKSl9ZnVuY3Rpb24gdnQoZSx0PXl0KCkpe3JldHVybiB0KFwicmVhZHdyaXRlXCIsKHQ9Pih0LmRlbGV0ZShlKSx3dCh0LnRyYW5zYWN0aW9uKSkpKX1mdW5jdGlvbiBTdChlLHQpe3JldHVybiBlLm9wZW5DdXJzb3IoKS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt0aGlzLnJlc3VsdCYmKHQodGhpcy5yZXN1bHQpLHRoaXMucmVzdWx0LmNvbnRpbnVlKCkpfSx3dChlLnRyYW5zYWN0aW9uKX1mdW5jdGlvbiBQdChlPXl0KCkpe3JldHVybiBlKFwicmVhZG9ubHlcIiwoZT0+e2lmKGUuZ2V0QWxsS2V5cylyZXR1cm4gd3QoZS5nZXRBbGxLZXlzKCkpO2NvbnN0IHQ9W107cmV0dXJuIFN0KGUsKGU9PnQucHVzaChlLmtleSkpKS50aGVuKCgoKT0+dCkpfSkpfWNvbnN0IGJ0PShlLHQ9XCJcIik9PmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpLGt0PWImJmZ0KFwib3BlbmZpbi1ob21lLXBhZ2VzXCIsXCJwYWdlc1wiKTthc3luYyBmdW5jdGlvbiBXdChlKXtjb25zdCB0PWF3YWl0IGh0KGUsa3QpO3JldHVybiB0Pyh0LnBhZ2VJZD1lLnRvU3RyaW5nKCksdC50aXRsZT10LnRpdGxlfHx0LnBhZ2VJZCx0KTpudWxsfWFzeW5jIGZ1bmN0aW9uIEN0KGUpe2NvbnN0IHQ9YXdhaXQgUHQoa3QpLGE9YXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9Pld0KGUudG9TdHJpbmcoKSkpKSk7cmV0dXJuIGU/YS5maWx0ZXIoKHQ9PmJ0KHQudGl0bGUsZSkpKTphfWFzeW5jIGZ1bmN0aW9uIEl0KHtwYWdlOmV9KXthd2FpdCBtdChlLnBhZ2VJZCxlLGt0KX1hc3luYyBmdW5jdGlvbiBBdChlKXthd2FpdCB2dChlLGt0KX1hc3luYyBmdW5jdGlvbiBNdCh7cGFnZUlkOmUscGFnZTp0fSl7aWYodm9pZCAwPT09YXdhaXQgV3QoZSkpdGhyb3cgbmV3IEVycm9yKFwicGFnZSBub3QgZm91bmRcIik7YXdhaXQgSXQoe3BhZ2U6dH0pLGUhPT10LnBhZ2VJZCYmYXdhaXQgQXQoZSl9dmFyIE90OyFmdW5jdGlvbihlKXtlLkxhYmVsPVwibm9ybWFsXCIsZS5TZXBhcmF0b3I9XCJzZXBhcmF0b3JcIixlLlN1Ym1lbnU9XCJzdWJtZW51XCIsZS5DaGVja2JveD1cImNoZWNrYm94XCJ9KE90fHwoT3Q9e30pKTtjb25zdCBUdD17dHlwZTpPdC5TZXBhcmF0b3IsZGF0YTp2b2lkIDB9O3ZhciBFdDshZnVuY3Rpb24oZSl7ZS5SZWdpc3RlclByb3ZpZGVyPVwicmVnaXN0ZXItcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJQcm92aWRlcj1cImRlcmVnaXN0ZXItcHJvdmlkZXJcIixlLkNyZWF0ZVByb3ZpZGVyV2luZG93PVwiY3JlYXRlLXByb3ZpZGVyLXdpbmRvd1wiLGUuR2V0UHJvdmlkZXJzPVwiZ2V0LXByb3ZpZGVyc1wiLGUuU2hvd1Byb3ZpZGVyV2luZG93PVwic2hvdy1wcm92aWRlci13aW5kb3dcIixlLkhpZGVQcm92aWRlcldpbmRvdz1cImhpZGUtcHJvdmlkZXItd2luZG93XCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItYXBwc1wiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2U9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1sYW5kaW5nLXBhZ2VcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckZvb3Rlcj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWZvb3RlclwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTmF2aWdhdGlvbj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLW5hdmlnYXRpb25cIixlLkxhdW5jaFN0b3JlZnJvbnRQcm92aWRlckFwcD1cImxhdW5jaC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcFwiLGUuU2hvd0hvbWU9XCJzaG93LWhvbWVcIixlLkhpZGVIb21lPVwiaGlkZS1ob21lXCIsZS5Bc3NpZ25Ib21lU2VhcmNoQ29udGV4dD1cImFzc2lnbi1ob21lLXNlYXJjaC1jb250ZXh0XCIsZS5HZXRMZWdhY3lQYWdlcz1cImdldC1sZWdhY3ktcGFnZXNcIixlLkdldExlZ2FjeVdvcmtzcGFjZXM9XCJnZXQtbGVnYWN5LXdvcmtzcGFjZXNcIixlLkdldENvbXB1dGVkUGxhdGZvcm1UaGVtZT1cImdldC1jb21wdXRlZC1wbGF0Zm9ybS10aGVtZVwiLGUuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5EZXJlZ2lzdGVyU3RvcmVmcm9udFByb3ZpZGVyPVwiZGVyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5IaWRlU3RvcmVmcm9udD1cImhpZGUtc3RvcmVmcm9udFwiLGUuU2hvd1N0b3JlZnJvbnQ9XCJzaG93LXN0b3JlZnJvbnRcIn0oRXR8fChFdD17fSkpO1RlKFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKTtjb25zdCBCdD1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdChhc3luYyBlPT4oey4uLmUsbGF5b3V0RGV0YWlsczp7bWFjaGluZUlkOmF3YWl0IHB0KCksbWFjaGluZU5hbWU6Y3QoKX19KSkodCk7cmV0dXJue3BhZ2VJZDpjcnlwdG8ucmFuZG9tVVVJRCgpLHRpdGxlOmUsbGF5b3V0OmEsaXNSZWFkT25seTohMSxoYXNVbnNhdmVkQ2hhbmdlczohMH19LHh0PWU9Pih7aWRlbnRpdHk6ZSxvcGVuZmluV2luZG93OmZpbi5XaW5kb3cud3JhcFN5bmMoZSksZ2V0UGFnZXM6YXN5bmMoKT0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5HZXRQYWdlc0ZvcldpbmRvdyxlKSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCBzZShlKSkuZGlzcGF0Y2gobmUuR2V0UGFnZUZvcldpbmRvdyx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLGFkZFBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgc2UoZSk7dD8udGl0bGV8fCh0LnRpdGxlPWF3YWl0IGEuZGlzcGF0Y2gobmUuR2V0VW5pcXVlUGFnZVRpdGxlLHZvaWQgMCkpO2NvbnN0IG49KGF3YWl0IGEuZGlzcGF0Y2gobmUuR2V0QWxsQXR0YWNoZWRQYWdlcyx2b2lkIDApKS5maW5kKChlPT5lLnBhZ2VJZD09PXQucGFnZUlkfHxlLnRpdGxlPT09dC50aXRsZSkpO2lmKG4pdGhyb3cgbi5wYWdlSWQ9PT10LnBhZ2VJZD9uZXcgRXJyb3IoYHBhZ2Ugd2l0aCBpZCAke3QucGFnZUlkfSBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGEgYnJvd3NlciB3aW5kb3cgJHtuLnBhcmVudElkZW50aXR5Lm5hbWV9YCk6bmV3IEVycm9yKGBwYWdlIHdpdGggdGl0bGUgJHt0LnRpdGxlfSBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGEgYnJvd3NlciB3aW5kb3cgJHtuLnBhcmVudElkZW50aXR5Lm5hbWV9YCk7Y29uc3Qgbz17aWRlbnRpdHk6ZSxwYWdlczpbdF19O3JldHVybiBhLmRpc3BhdGNoKG5lLkF0dGFjaFBhZ2VzVG9XaW5kb3csbyl9LHJlbW92ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3cse2lkZW50aXR5OmUscGFnZUlkczpbdF19KSxzZXRBY3RpdmVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBzZShlKSkuZGlzcGF0Y2gobmUuU2V0QWN0aXZlUGFnZSx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgc2UoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKG5lLlVwZGF0ZVBhZ2VGb3JXaW5kb3csdCl9LHJlb3JkZXJQYWdlczphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBzZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gobmUuUmVvcmRlclBhZ2VzRm9yV2luZG93LHQpfSxfb3Blbkdsb2JhbENvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHNlKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChuZS5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0scmVwbGFjZVRvb2xiYXJPcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCBzZShlKTtjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7dG9vbGJhck9wdGlvbnM6dH19KX0scmVwbGFjZVdpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczphc3luYyB0PT57YXdhaXQgc2UoZSk7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKGUpO2F3YWl0IGEudXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06e3dpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczp0fX0pfSxfb3BlblZpZXdUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBzZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gobmUuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblBhZ2VUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBzZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gobmUuT3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblNhdmVNb2RhbDphc3luYyB0PT57YXdhaXQgc2UoZSk7cmV0dXJuKGF3YWl0IHhlKGUpKS5kaXNwYXRjaChMZS5PcGVuU2F2ZU1vZGFsSW50ZXJuYWwsdCl9LF9vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHNlKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChuZS5PcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51SW50ZXJuYWwsdCl9fSk7bGV0IFJ0PSExO2NvbnN0IF90PWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm57d3JhcFN5bmM6ZT0+eHQoZSksY3JlYXRlV2luZG93OmFzeW5jIGE9Pnthd2FpdCBzZShlKSxSdHx8KFJ0PSEwLChhc3luYyBlPT57eihRLkJyb3dzZXIsZSl9KSh7YWxsb3dlZDohMH0pKTtjb25zdCBuPWF3YWl0IHQuY3JlYXRlV2luZG93KGEpO3JldHVybiB4dChuLmlkZW50aXR5KX0sZ2V0QWxsQXR0YWNoZWRQYWdlczphc3luYygpPT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG5lLkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSxnZXRBbGxXaW5kb3dzOmFzeW5jKCk9Pnthd2FpdCBzZShlKTtyZXR1cm4oYXdhaXQgZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKGUpLmdldENoaWxkV2luZG93cygpKS5maWx0ZXIoKGU9PmUuaWRlbnRpdHkubmFtZS5pbmNsdWRlcyhcImludGVybmFsLWdlbmVyYXRlZC13aW5kb3ctXCIpKSkubWFwKChlPT54dChlLmlkZW50aXR5KSkpfSxnZXRVbmlxdWVQYWdlVGl0bGU6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5HZXRVbmlxdWVQYWdlVGl0bGUsdCksZ2V0TGFzdEZvY3VzZWRXaW5kb3c6YXN5bmMoKT0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3csdm9pZCAwKX19LEx0PWU9Pih7Y3JlYXRlUGFnZTphc3luYyB0PT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG5lLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsLHQpLGRlbGV0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5EZWxldGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSx1cGRhdGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBzZShlKSkuZGlzcGF0Y2gobmUuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksZ2V0UGFnZTphc3luYyB0PT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG5lLkdldFNhdmVkUGFnZSx0KSxnZXRQYWdlczphc3luYyB0PT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG5lLkdldFNhdmVkUGFnZXMsdCksc2F2ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChuZS5TYXZlUGFnZSx0KSxjcmVhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5DcmVhdGVTYXZlZFdvcmtzcGFjZSx0KSxkZWxldGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5EZWxldGVTYXZlZFdvcmtzcGFjZSx0KSx1cGRhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5VcGRhdGVTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5HZXRTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2VzOmFzeW5jIHQ9Pihhd2FpdCBpZShlKSkuZGlzcGF0Y2gobmUuR2V0U2F2ZWRXb3Jrc3BhY2VzLHQpLHNhdmVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5TYXZlV29ya3NwYWNlLHQpfSksVnQ9ZT0+KHtnZXRUaGVtZXM6YXN5bmMoKT0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5HZXRUaGVtZXMsdm9pZCAwKX0pLER0PWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih0LHthcHBseVNuYXBzaG90OmFzeW5jKHQsYSk9PntpZihcInN0cmluZ1wiIT10eXBlb2YgdCYmIXQ/LndpbmRvd3MpdGhyb3cgbmV3IEVycm9yKFwiTm90IGEgdmFsaWQgYnJvd3NlciBzbmFwc2hvdFwiKTtyZXR1cm4gZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmFwcGx5U25hcHNob3QodCxhKX0sZ2V0U25hcHNob3Q6KCk9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRTbmFwc2hvdCgpLnRoZW4oKGU9PmUpKSxsYXVuY2hBcHA6YXN5bmMgdD0+e3QudGFyZ2V0fHwodC50YXJnZXQ9e3V1aWQ6VyxuYW1lOkMsZW50aXR5VHlwZTpJfHxcInVua25vd25cIn0pO3JldHVybihhd2FpdCBpZShlKSkuZGlzcGF0Y2gobmUuTGF1bmNoQXBwLHQpfSxfaW52b2tlQ3VzdG9tQWN0aW9uOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0IGllKGUpLG89e2FjdGlvbklkOnQscGF5bG9hZDp7Li4uYSxjYWxsZXJUeXBlOmEuY2FsbGVyVHlwZXx8aC5BUEl9fTtyZXR1cm4gbi5kaXNwYXRjaChuZS5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbCxvKX0sX3JlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2c6YXN5bmMgdD0+KGF3YWl0IGllKGUpKS5kaXNwYXRjaChuZS5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWwsdCksZ2V0Q3VycmVudFdvcmtzcGFjZTphc3luYygpPT4oYXdhaXQgaWUoZSkpLmRpc3BhdGNoKG5lLkdldEN1cnJlbnRXb3Jrc3BhY2Usdm9pZCAwKSxhcHBseVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQgaWUoZSkpLmRpc3BhdGNoKG5lLkFwcGx5V29ya3NwYWNlLHQpLHNldEFjdGl2ZVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQgaWUoZSkpLmRpc3BhdGNoKG5lLlNldEFjdGl2ZVdvcmtzcGFjZSx0KSxUaGVtZTpWdChlKSxCcm93c2VyOl90KGUpLFN0b3JhZ2U6THQoZSl9KX0sVXQ9KCk9PkR0KGZpbi5tZS5pZGVudGl0eSksRnQ9YXN5bmMoZT1GKT0+e2NvbnN0e3dvcmtzcGFjZVBsYXRmb3JtOnR9PWF3YWl0IFUoZSkuZ2V0T3B0aW9ucygpLGE9dD8ubmV3UGFnZVVybCxuPXQ/Lm5ld1RhYlVybDtyZXR1cm57bmV3UGFnZVVybDphLG5ld1RhYlVybDpufX0sR3Q9YXN5bmMoZT1GKT0+e2NvbnN0IHQ9YXdhaXQgVXQoKS5Ccm93c2VyLmdldFVuaXF1ZVBhZ2VUaXRsZShcIlVudGl0bGVkIFBhZ2VcIiksYT1hd2FpdChhc3luYyhlPUYpPT57Y29uc3R7bmV3UGFnZVVybDp0fT1hd2FpdCBGdChlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gY3JlYXRlIGEgbmV3IHBhZ2Ugd2l0aG91dCBhIG5ld1BhZ2VVcmwgc2V0XCIpO3JldHVybiBXZShcIk5ldyBUYWJcIix0LGUpfSkoZSk7cmV0dXJuIEJ0KHQsYSl9LCR0PXt0eXBlOk90LkxhYmVsLGxhYmVsOlwiQ2xvc2UgV2luZG93XCIsZGF0YTp7dHlwZTp1LkNsb3NlV2luZG93fX0sTnQ9e3R5cGU6T3QuTGFiZWwsbGFiZWw6XCJPcGVuIFN0b3JlZnJvbnRcIixkYXRhOnt0eXBlOnUuT3BlblN0b3JlZnJvbnR9fSxqdD17dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlF1aXQgUGxhdGZvcm1cIixkYXRhOnt0eXBlOnUuUXVpdH19LEh0PXt0eXBlOk90LkxhYmVsLGxhYmVsOlwiTmV3IFdpbmRvd1wiLGRhdGE6e3R5cGU6dS5OZXdXaW5kb3d9fSxxdD17dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZVwiLGRhdGE6e3R5cGU6dS5TYXZlUGFnZX19LEt0PXt0eXBlOk90LkxhYmVsLGxhYmVsOlwiU2F2ZSBQYWdlIEFzLi4uXCIsZGF0YTp7dHlwZTp1LlNhdmVQYWdlQXN9fSxRdD17dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlJlc3RvcmUgdG8gTGFzdCBTYXZlZCBDaGFuZ2VzXCIsZGF0YTp7dHlwZTp1LlJlc3RvcmVDaGFuZ2VzfX0senQ9e3R5cGU6T3QuTGFiZWwsbGFiZWw6XCJTYXZlIFdvcmtzcGFjZVwiLGRhdGE6e3R5cGU6dS5TYXZlV29ya3NwYWNlfX0sSnQ9e3R5cGU6T3QuTGFiZWwsbGFiZWw6XCJTYXZlIFdvcmtzcGFjZSBBcy4uLlwiLGRhdGE6e3R5cGU6dS5TYXZlV29ya3NwYWNlQXN9fSxYdD17dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlJlbmFtZSBXb3Jrc3BhY2VcIixkYXRhOnt0eXBlOnUuUmVuYW1lV29ya3NwYWNlfX0sWXQ9XCJTd2l0Y2ggV29ya3NwYWNlXCIsWnQ9XCJEZWxldGUgV29ya3NwYWNlXCIsZWE9WyR0LFR0LE50LFR0LGp0XSx0YT1bVHQsJHQsVHQsanRdLGFhPShlLHQsYSk9PnQubWFwKCh0PT57Y29uc3Qgbj10LndvcmtzcGFjZUlkPT09ZS53b3Jrc3BhY2VJZDtyZXR1cm57bGFiZWw6dC50aXRsZSx0eXBlOk90LkNoZWNrYm94LGVuYWJsZWQ6IW4sY2hlY2tlZDpuLGRhdGE6e3R5cGU6YSx3b3Jrc3BhY2VJZDp0LndvcmtzcGFjZUlkfX19KSksbmE9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgSygpLHtuZXdQYWdlVXJsOmF9PWF3YWl0IEZ0KGUpLG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9VShlKSx7d29ya3NwYWNlUGxhdGZvcm06YX09YXdhaXQgdC5nZXRPcHRpb25zKCk7cmV0dXJuIGE/LmRpc2FibGVNdWx0aXBsZVBhZ2VzfSkoZSksbz1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1VKGUpLHt3b3Jrc3BhY2VQbGF0Zm9ybTphfT1hd2FpdCB0LmdldE9wdGlvbnMoKTtyZXR1cm4gYT8uaXNMb2NrZWR9KShlKSxyPVtdO3ZhciBpO2EmJihyLnB1c2goSHQpLG58fHIucHVzaCgoaT0hbyx7dHlwZTpPdC5MYWJlbCxsYWJlbDpcIk5ldyBQYWdlXCIsZGF0YTp7dHlwZTp1Lk5ld1BhZ2V9LGVuYWJsZWQ6aX0pKSksci5wdXNoKFR0KTtjb25zdCBzPVV0KCksYz1hd2FpdCBzLmdldEN1cnJlbnRXb3Jrc3BhY2UoKSxkPWF3YWl0IHMuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkscD1kLmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT1jLndvcmtzcGFjZUlkKSk7cmV0dXJuIHA/ci5wdXNoKFF0KTpyLnB1c2goe2xhYmVsOlF0LmxhYmVsLGVuYWJsZWQ6ITF9KSxyLnB1c2goenQsSnQpLHA/ci5wdXNoKFh0KTpyLnB1c2goe2xhYmVsOlh0LmxhYmVsLGVuYWJsZWQ6ITF9KSxkLnNvbWUoKGU9PmUud29ya3NwYWNlSWQhPT1jLndvcmtzcGFjZUlkKSk/ci5wdXNoKHtsYWJlbDpZdCxzdWJtZW51OmFhKGMsZCx1LlN3aXRjaFdvcmtzcGFjZSl9LHtsYWJlbDpadCxzdWJtZW51OmFhKGMsZCx1LkRlbGV0ZVdvcmtzcGFjZSl9KTpyLnB1c2goe2xhYmVsOll0LGVuYWJsZWQ6ITF9LHtsYWJlbDpadCxlbmFibGVkOiExfSksci5wdXNoKFR0LHF0LEt0KSx0P1suLi5yLC4uLmVhXTpbLi4uciwuLi50YV19O2xldCBvYT1cIlBsYXRmb3JtXCI7Y29uc3QgcmE9YXN5bmMoKT0+b2E7dmFyIGlhLHNhLGNhOyFmdW5jdGlvbihlKXtlLkhvbWU9XCIvaG9tZS9cIixlLkhvbWVTZWFyY2g9XCIvaG9tZS8/ZGVlcGxpbms9c2VhcmNoXCIsZS5Ib21lUGFnZXNSZW5hbWU9XCIvaG9tZS9wYWdlcy9yZW5hbWUvXCIsZS5Eb2NrPVwiL2RvY2svXCIsZS5Ccm93c2VyUGFnZXNMYW5kaW5nPVwiL2Jyb3dzZXIvcGFnZXMvbGFuZGluZy9cIixlLkhvbWVJbmRpY2F0b3I9XCIvaG9tZS9pbmRpY2F0b3IvXCIsZS5Ccm93c2VyPVwiL2Jyb3dzZXIvXCIsZS5Ccm93c2VyUG9wdXBNZW51PVwiL2Jyb3dzZXIvcG9wdXAtbWVudS9cIixlLlByb3ZpZGVyPVwiL3Byb3ZpZGVyL1wiLGUuQnJvd3NlclBvcHVwTWVudVNoYXJlUGFnZT1cIi9icm93c2VyL3BvcHVwLW1lbnUvc2hhcmUtcGFnZS9cIixlLkJyb3dzZXJQb3B1cE1lbnVTYXZlTW9kYWw9XCIvYnJvd3Nlci9wb3B1cC1tZW51L3NhdmUtbW9kYWwvXCIsZS5Ccm93c2VyUG9wdXBNZW51TGF5b3V0cz1cIi9icm93c2VyL3BvcHVwLW1lbnUvbGF5b3V0cy9sYXlvdXRzL1wiLGUuQnJvd3NlclBvcHVwTWVudUNvbG9yTGlua2luZz1cIi9icm93c2VyL3BvcHVwLW1lbnUvY29sb3ItbGlua2luZy9jb2xvci1saW5raW5nL1wiLGUuQnJvd3NlckluZGljYXRvcj1cIi9icm93c2VyL2luZGljYXRvci9cIixlLlJlc3BvbnNlTW9kYWw9XCIvYnJvd3Nlci9wb3B1cC1tZW51L3Jlc3BvbnNlLW1vZGFsL1wiLGUuRG9jcz1cIi9wcm92aWRlci9kb2NzL1wiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250L1wiLGUuRGVwcmVjYXRlZEFsZXJ0PVwiL3Byb3ZpZGVyL2RlcHJlY2F0ZWQtYWxlcnQvXCJ9KGlhfHwoaWE9e30pKSxmdW5jdGlvbihlKXtlLkljb25PcGVuRmluTG9nbz1cIi9pY29ucy9vcGVuZmlubG9nby5zdmdcIixlLkljb25GaWx0ZXI9XCIvaWNvbnMvZmlsdGVyLnN2Z1wifShzYXx8KHNhPXt9KSksZnVuY3Rpb24oZSl7ZS5TZWFyY2g9XCJzZWFyY2hcIn0oY2F8fChjYT17fSkpO2NvbnN0IGRhPXsuLi5zYSwuLi5pYX07dmFyIHBhOyFmdW5jdGlvbihlKXtlLkhvbWU9XCIvaG9tZVwiLGUuQnJvd3Nlcj1cIi9icm93c2VyXCIsZS5Qcm92aWRlcj1cIi9wcm92aWRlclwiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250XCIsZS5Eb2NrPVwiL2RvY2tcIn0ocGF8fChwYT17fSkpO2NvbnN0IGxhPVwiL3dvcmtzcGFjZS85LjAuN1wiO2Z1bmN0aW9uIHVhKCl7cmV0dXJuIGxhLnN1YnN0cmluZygwLGxhLmxlbmd0aC1cIlwiLmxlbmd0aCl9ZnVuY3Rpb24gd2EoZSl7aWYoIVApdGhyb3cgbmV3IEVycm9yKFwiZ2V0QWJzb2x1dGVSb3V0ZVBhdGggY2FuIG9ubHkgYmUgdXNlZCBpbiBhIHdpbmRvd1wiKTtyZXR1cm4gZnVuY3Rpb24oKXtpZighd2luZG93KXRocm93IG5ldyBFcnJvcihcImdldEFic29sdXRlQmFzZVBhdGggY2FuIG9ubHkgYmUgdXNlZCBpbiBhIHdpbmRvd1wiKTtyZXR1cm5gJHt3aW5kb3cub3JpZ2lufSR7dWEoKX1gfSgpK2V9Y29uc3QgZmE9e25hbWU6Vi5Ccm93c2VyTWVudSxhbHdheXNPblRvcDohMCxhdXRvU2hvdzohMSxmcmFtZTohMSxyZXNpemFibGU6ITEsYmFja2dyb3VuZENvbG9yOlwiIzJmMzEzNlwiLHNtYWxsV2luZG93OiEwLHNob3dUYXNrYmFySWNvbjohMSxiYWNrZ3JvdW5kVGhyb3R0bGluZzohMH07ZnVuY3Rpb24gZ2EoZSl7Y29uc3QgdD17Li4uZmEsLi4uZX07cmV0dXJuIHQudXJsPWZ1bmN0aW9uKGUpe2lmKCFQKXRocm93IG5ldyBFcnJvcihcInJlc29sdmVBYnNvbHV0ZVBhdGggY2FuIG9ubHkgYmUgdXNlZCBpbiBhIHdpbmRvd1wiKTtyZXR1cm4gZS5zdGFydHNXaXRoKFwiaHR0cFwiKT9lOmAke3dpbmRvdy5vcmlnaW59JHtlfWB9KHQudXJsKSx0fXZhciB5YSxoYTshZnVuY3Rpb24oZSl7ZS5VcGRhdGU9XCJ1cGRhdGVcIixlLlJlc3BvbnNlPVwicmVzcG9uc2VcIn0oeWF8fCh5YT17fSkpLGZ1bmN0aW9uKGUpe2UuQ2FuY2VsZWQ9XCJjYW5jZWxlZFwiLGUuTmVnYXRpdmU9XCJuZWdhdGl2ZVwiLGUuQWZmaXJtYXRpdmU9XCJhZmZpcm1hdGl2ZVwifShoYXx8KGhhPXt9KSk7Y29uc3QgbWE9ZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgTWFwO3JldHVybntlbWl0OkNlKHQsKHQ9PlMmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnB1Ymxpc2goZSx0KSkpLGFkZExpc3RlbmVyOkllKHQsKHQ9PlMmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnN1YnNjcmliZSh7dXVpZDpmaW4ubWUudXVpZH0sZSx0KSkpLHJlbW92ZUxpc3RlbmVyOk1lKHQpLG9uY2U6QWUodCl9fShcIndpbmRvdy5tZW51XCIpLHZhPWU9Pm1hLmVtaXQoeWEuUmVzcG9uc2UsZSksU2E9dmUoKCgpPT5MKCkuZ2V0Q2hpbGRXaW5kb3dzKCkpLDUwMCk7Y29uc3QgUGE9bmV3IE1hcDthc3luYyBmdW5jdGlvbiBiYSh7b3B0aW9uczplLHBhcmFtZXRlcnM6dH0sYSl7Y29uc3Qgbj1nYShlKSx7bmFtZTpvfT1uO2xldCByPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe3JldHVybihhd2FpdCBTYSgpKS5maW5kKCh0PT50LmlkZW50aXR5Lm5hbWU9PT1lKSl9KG8pO3JldHVybiByfHwocj1hd2FpdCBhc3luYyBmdW5jdGlvbihlKXtjb25zdCB0PWdhKGUpO2lmKCFQYS5oYXModC5uYW1lKSl7Y29uc3QgZT0oYXN5bmMoKT0+e2NvbnN0IGU9YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlV2luZG93KHQpO3JldHVybiBlLm9uY2UoXCJjbG9zZWRcIiwoKCk9PntQYS5kZWxldGUodC5uYW1lKX0pKSxlfSkoKTtQYS5zZXQodC5uYW1lLGUpfXJldHVybiBQYS5nZXQodC5uYW1lKX0obikpLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3QgYT1nYShlKSx7dG9wOm4sbGVmdDpvLGRlZmF1bHRXaWR0aDpyLGRlZmF1bHRIZWlnaHQ6aX09YSxzPXt0b3A6bixsZWZ0Om8sd2lkdGg6cixoZWlnaHQ6aX0sYz17cGFyZW50TmFtZTpmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCkuaWRlbnRpdHkubmFtZX07Zm9yKGNvbnN0W2UsYV1vZiBPYmplY3QuZW50cmllcyhjKSl0LnNldChlLGEpO2NvbnN0IGQ9dC50b1N0cmluZygpLHA9YCR7YS51cmx9PyR7ZH1gO21hLmVtaXQoeWEuVXBkYXRlLGEubmFtZSxzLHApLGF3YWl0IHZhKHtuYW1lOmEubmFtZSxkYXRhOmhhLkNhbmNlbGVkfSl9KGUsdHx8bmV3IFVSTFNlYXJjaFBhcmFtcyksYSYmci5jZW50ZXIoKSxyfWNvbnN0IGthPWFzeW5jKGUsdCxhKT0+e2NvbnN0IG49dD9VKHQpOkcoKTtpZighYSl7YXdhaXQoYXN5bmMoZT1maW4ubWUuaWRlbnRpdHkpPT57Y29uc3QgdD1VKGUpLGE9YXdhaXQgdC5nZXRCb3VuZHMoKTsoYS5yaWdodD5zY3JlZW4uYXZhaWxMZWZ0K3NjcmVlbi53aWR0aHx8YS5sZWZ0PHNjcmVlbi5hdmFpbExlZnR8fGEuYm90dG9tPnNjcmVlbi5hdmFpbFRvcCtzY3JlZW4uaGVpZ2h0fHxhLnRvcDxzY3JlZW4uYXZhaWxUb3ApJiZhd2FpdCB0LmNlbnRlcigpfSkobi5pZGVudGl0eSk7Y29uc3QgdD0oZT0+KHtsZWZ0OihlLmxlZnQrZS5yaWdodCkvMix0b3A6KGUudG9wK2UuYm90dG9tKS8yfSkpKGF3YWl0IG4uZ2V0Qm91bmRzKCkpLHtkZWZhdWx0SGVpZ2h0OmEsZGVmYXVsdFdpZHRoOm99PWU7cmV0dXJuKChlLHQpPT57Y29uc3R7aGVpZ2h0OmEsd2lkdGg6bn09dCxvPW4vMixyPWEvMjtyZXR1cm57bGVmdDplLmxlZnQtbyx0b3A6ZS50b3Atcn19KSh0LHtoZWlnaHQ6YSx3aWR0aDpvfSl9cmV0dXJuIGF3YWl0IG4uZ2V0Qm91bmRzKCl9LFdhPWFzeW5jKHtvcHRpb25zOmUsY29udGVudDp0fSxhKT0+e2NvbnN0IG49bmV3IFVSTFNlYXJjaFBhcmFtcyh7Li4udH0pO3JldHVybiBhd2FpdCBiYSh7b3B0aW9uczplLHBhcmFtZXRlcnM6bn0sYSksbmV3IFByb21pc2UoKHQ9PnttYS5vbmNlKHlhLlJlc3BvbnNlLChhPT57YS5uYW1lPT09ZS5uYW1lJiZ0KGEpfSkpfSkpfSxDYT1hc3luYyhlLHQpPT57Y29uc3R7d2luZG93T3B0aW9uczphLGNvbnRlbnQ6bn09YXdhaXQoYXN5bmMoZSx0KT0+KHt0aXRsZTpcIlN3aXRjaCBXb3Jrc3BhY2VcIix3aW5kb3dPcHRpb25zOnt1cmw6TStkYS5SZXNwb25zZU1vZGFsLG5hbWU6Vi5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjExMixkZWZhdWx0V2lkdGg6NDI0LG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6YEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzd2l0Y2ggdG8gJHt0fWAsYm9keTpcIkFueSB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBkaXNjYXJkZWRcIixhZmZpcm1hdGl2ZUJ1dHRvbjpcIkNvbmZpcm1cIixuZWdhdGl2ZUJ1dHRvbjpcIkNhbmNlbFwifX0pKShlLHQpLG89YXdhaXQga2EoYSxhLm1vZGFsUGFyZW50SWRlbnRpdHkpLHI9ey4uLmEsdG9wOm8udG9wLGxlZnQ6by5sZWZ0fTtyZXR1cm4oYXdhaXQgV2Eoe29wdGlvbnM6cixjb250ZW50Om59KSkuZGF0YT09PWhhLkFmZmlybWF0aXZlfSxJYT1hc3luYyhlLHQpPT57Y29uc3R7d2luZG93T3B0aW9uczphLGNvbnRlbnQ6bn09YXdhaXQoYXN5bmMoZSx0KT0+KHt0aXRsZTpcIkRlbGV0ZSBXb3Jrc3BhY2VcIix3aW5kb3dPcHRpb25zOnt1cmw6TStkYS5SZXNwb25zZU1vZGFsLG5hbWU6Vi5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjE0NCxkZWZhdWx0V2lkdGg6MzcyLG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGVybWFuZW50bHkgZGVsZXRlIHRoaXMgd29ya3NwYWNlP1wiLGJvZHk6YCR7dH1gLGFmZmlybWF0aXZlQnV0dG9uOlwiQ29uZmlybVwiLG5lZ2F0aXZlQnV0dG9uOlwiQ2FuY2VsXCJ9fSkpKGUsdCksbz1hd2FpdCBrYShhLGEubW9kYWxQYXJlbnRJZGVudGl0eSkscj17Li4uYSx0b3A6by50b3AsbGVmdDpvLmxlZnR9O3JldHVybihhd2FpdCBXYSh7b3B0aW9uczpyLGNvbnRlbnQ6bn0pKS5kYXRhPT09aGEuQWZmaXJtYXRpdmV9LEFhPWFzeW5jKGUsdCxhKT0+e2NvbnN0IG49YT92b2lkIDA6ZSx7d2luZG93T3B0aW9uczpvLGNvbnRlbnQ6cn09YXdhaXQoYXN5bmMoZSx0KT0+KHt0aXRsZTpcIlBsYXRmb3JtIFF1aXRcIix3aW5kb3dPcHRpb25zOnt1cmw6TStkYS5SZXNwb25zZU1vZGFsLG5hbWU6Vi5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjEzNCxkZWZhdWx0V2lkdGg6NDc0LG1vZGFsUGFyZW50SWRlbnRpdHk6dH0sY29udGVudDp7dGl0bGU6YENsb3NlIHRoZSAke1wiUGxhdGZvcm1cIj09PWU/XCJwbGF0Zm9ybVwiOmAke2V9IFBsYXRmb3JtYH0/YCxib2R5OlwiQ2xvc2luZyBhIHBsYXRmb3JtIHdpbGwgY2xvc2UgYW55IHdvcmtzcGFjZXMsIGFwcHMgb3IgYW55IHByb2Nlc3NlcyB0aGF0IGFyZSBydW5uaW5nLlwiLGFmZmlybWF0aXZlQnV0dG9uOlwiQ29uZmlybVwiLG5lZ2F0aXZlQnV0dG9uOlwiQ2FuY2VsXCJ9fSkpKHQsbiksaT1hd2FpdCBrYShvLG8ubW9kYWxQYXJlbnRJZGVudGl0eSkscz17Li4ubyx0b3A6aS50b3AsbGVmdDppLmxlZnR9O3JldHVybihhd2FpdCBXYSh7b3B0aW9uczpzLGNvbnRlbnQ6cn0sYSkpLmRhdGE9PT1oYS5BZmZpcm1hdGl2ZX0sTWE9YXN5bmMgZT0+e2NvbnN0e3dpbmRvd09wdGlvbnM6dCxjb250ZW50OmF9PWF3YWl0KGFzeW5jIGU9Pih7dGl0bGU6XCJSZXN0b3JlIENoYW5nZXNcIix3aW5kb3dPcHRpb25zOnt1cmw6TStkYS5SZXNwb25zZU1vZGFsLG5hbWU6Vi5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjExMixkZWZhdWx0V2lkdGg6NDI0LG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzdG9yZSB0byBsYXN0IHNhdmVkIGNoYW5nZXM/XCIsYm9keTpcIkFueSB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBkaXNjYXJkZWRcIixhZmZpcm1hdGl2ZUJ1dHRvbjpcIkNvbmZpcm1cIixuZWdhdGl2ZUJ1dHRvbjpcIkNhbmNlbFwifX0pKShlKSxuPWF3YWl0IGthKHQsdC5tb2RhbFBhcmVudElkZW50aXR5KSxvPXsuLi50LHRvcDpuLnRvcCxsZWZ0Om4ubGVmdH07cmV0dXJuKGF3YWl0IFdhKHtvcHRpb25zOm8sY29udGVudDphfSkpLmRhdGE9PT1oYS5BZmZpcm1hdGl2ZX07dmFyIE9hOyFmdW5jdGlvbihlKXtlLkVSUk9SPVwiZXJyb3JcIixlLlNVQ0NFU1M9XCJzdWNjZXNzXCIsZS5JTkZPPVwiaW5mb1wifShPYXx8KE9hPXt9KSk7Y29uc3QgVGE9e2Fsd2F5c09uVG9wOiEwLGF1dG9TaG93OiExLGZyYW1lOiExLHJlc2l6YWJsZTohMSxzaG93VGFza2Jhckljb246ITF9O3ZhciBFYTshZnVuY3Rpb24oZSl7ZS5Mb2NrZWQ9XCJMb2NrQ2xvc2VkSWNvblwiLGUuVW5sb2NrZWQ9XCJMb2NrT3BlbjFJY29uXCJ9KEVhfHwoRWE9e30pKTtjb25zdCBCYT1mdW5jdGlvbihlPVRhKXtjb25zdCB0PW5ldyBNYXA7cmV0dXJuIGFzeW5jKGEsbixvLHIpPT57aWYodC5oYXMoYSkpe2NvbnN0e2N1cnJlbnRVcmw6ZSxjdXJyZW50TmFtZTpvfT10LmdldChhKTtpZihlPT09bilyZXR1cm47Y29uc3Qgcj1maW4uV2luZG93LndyYXBTeW5jKHt1dWlkOmZpbi5tZS51dWlkLG5hbWU6b30pO2F3YWl0IHIuY2xvc2UoKX1jb25zdCBpPWAke1YuSG9tZUludGVybmFsfS0ke0RhdGUubm93KCl9JHtNYXRoLnJhbmRvbSgpfWA7dC5zZXQoYSx7Y3VycmVudFVybDpuLGN1cnJlbnROYW1lOml9KTtjb25zdCBzPWF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmNyZWF0ZVdpbmRvdyh7Li4uZSxuYW1lOmksdXJsOm59KTsoKGUsdCk9Pntjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIix0fHxcInBvbGl0ZVwiKSwoZT0+e2Uuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLGUuc3R5bGUud2lkdGg9XCIxcHhcIixlLnN0eWxlLmhlaWdodD1cIjFweFwiLGUuc3R5bGUucGFkZGluZz1cIjBcIixlLnN0eWxlLm1hcmdpbj1cIi0xcHhcIixlLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsZS5zdHlsZS53aGl0ZVNwYWNlPVwibm93cmFwXCIsZS5zdHlsZS5ib3JkZXI9XCIwXCJ9KShhKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLHNldFRpbWVvdXQoKCgpPT57YS5pbm5lckhUTUw9ZX0pLDEwMCksc2V0VGltZW91dCgoKCk9Pntkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpfSksMWUzKX0pKGBOZXcgJHtyfSBpbmRpY2F0b3I6ICR7b31gKSxzLm9uY2UoXCJjbG9zZWRcIiwoKCk9Pnt0LmRlbGV0ZShhKX0pKX19KCk7YXN5bmMgZnVuY3Rpb24geGEoZSx0LGEsbil7Y29uc3Qgbz1uZXcgVVJMU2VhcmNoUGFyYW1zO28uYXBwZW5kKFwidHlwZVwiLGUpLG8uYXBwZW5kKFwibWVzc2FnZVwiLHQpLG8uYXBwZW5kKFwicGFyZW50TmFtZVwiLGF8fFwiXCIpLG8uYXBwZW5kKFwiaWNvblwiLG58fFwiXCIpO2NvbnN0IHI9YCR7d2EoZGEuQnJvd3NlckluZGljYXRvcil9PyR7by50b1N0cmluZygpfWA7cmV0dXJuIEJhKFwiYnJvd3NlclwiK2Escix0LGUpfWZ1bmN0aW9uIFJhKGUsdCxhKXtyZXR1cm4geGEoT2EuU1VDQ0VTUyxlLHQsYSl9Y29uc3QgX2E9YXN5bmMgZT0+e2NvbnN0IHQ9VXQoKSxhPWF3YWl0IHQuZ2V0Q3VycmVudFdvcmtzcGFjZSgpLG49YXdhaXQgdC5TdG9yYWdlLmdldFdvcmtzcGFjZXMoKSxvPWEud29ya3NwYWNlSWQ7aWYobi5zb21lKChlPT5lLndvcmtzcGFjZUlkPT09bykpKXQuU3RvcmFnZS5zYXZlV29ya3NwYWNlKGEpLHQuc2V0QWN0aXZlV29ya3NwYWNlKGEpLFJhKFwiV29ya3NwYWNlIFNhdmVkXCIsZS5uYW1lKTtlbHNle3QuQnJvd3Nlci53cmFwU3luYyhlKS5fb3BlblNhdmVNb2RhbCh7bWVudVR5cGU6bS5TQVZFX1dPUktTUEFDRX0pfX0sTGE9ZT0+e1V0KCkuQnJvd3Nlci53cmFwU3luYyhlKS5fb3BlblNhdmVNb2RhbCh7bWVudVR5cGU6bS5TQVZFX1dPUktTUEFDRV9BU30pfSxWYT1hc3luYyhlLHQpPT57Y29uc3QgYT1VdCgpLkJyb3dzZXIud3JhcFN5bmMoZSksbj1hd2FpdCBVdCgpLlN0b3JhZ2UuZ2V0UGFnZXMoKSxvPShhd2FpdCBhLmdldFBhZ2VzKCkpLmZpbmQoKGU9PnQ/ZS5wYWdlSWQ9PT10OmUuaXNBY3RpdmUpKSxyPW4uc29tZSgoZT0+by5wYWdlSWQ9PT1lLnBhZ2VJZCkpO2lmKHIpdHJ5e2F3YWl0IFV0KCkuU3RvcmFnZS5zYXZlUGFnZSgoZD1vLHsuLi5kLGhhc1Vuc2F2ZWRDaGFuZ2VzOnZvaWQgMCxwYXJlbnRJZGVudGl0eTp2b2lkIDAsaXNBY3RpdmU6dm9pZCAwfSkpLGF3YWl0IGEudXBkYXRlUGFnZSh7cGFnZUlkOm8ucGFnZUlkLHBhZ2U6e2hhc1Vuc2F2ZWRDaGFuZ2VzOiExfX0pLFJhKFwiUGFnZSBzYXZlZFwiLG8ucGFyZW50SWRlbnRpdHkubmFtZSl9Y2F0Y2h7aT1cIlBhZ2UgZmFpbGVkIHRvIHNhdmVcIixzPW8ucGFyZW50SWRlbnRpdHkubmFtZSx4YShPYS5FUlJPUixpLHMsYyl9ZWxzZSBhLl9vcGVuU2F2ZU1vZGFsKHtpZDpvLnBhZ2VJZCxtZW51VHlwZTptLlNBVkVfUEFHRX0pO3ZhciBpLHMsYyxkfSxEYT1hc3luYyhlLHQpPT57Y29uc3QgYT1VdCgpLkJyb3dzZXIud3JhcFN5bmMoZSksbj0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT50P2UucGFnZUlkPT09dDplLmlzQWN0aXZlKSk7YS5fb3BlblNhdmVNb2RhbCh7aWQ6bi5wYWdlSWQsbWVudVR5cGU6bS5TQVZFX1BBR0VfQVN9KX0sVWE9YXN5bmMoZSx0KT0+e2lmKCFlKXJldHVybjtjb25zdCBhPXQuaWRlbnRpdHksbj1hd2FpdCB4ZShhKSxvPVV0KCkuQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KTtzd2l0Y2goZS50eXBlKXtjYXNlIHUuTmV3V2luZG93OmNvbnN0e25ld1BhZ2VVcmw6dH09YXdhaXQgRnQoYSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBlbXB0eSB3aW5kb3cgd2l0aG91dCBhIG5ld1BhZ2VVcmwgc2V0XCIpO1V0KCkuY3JlYXRlVmlldyh7dGFyZ2V0OnZvaWQgMCx1cmw6dH0pO2JyZWFrO2Nhc2UgdS5OZXdQYWdlOmF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PVV0KCkuQnJvd3Nlci53cmFwU3luYyhlKSxhPWF3YWl0IEd0KGUpO2F3YWl0IHQuYWRkUGFnZShhKSxhd2FpdCB0LnNldEFjdGl2ZVBhZ2UoYS5wYWdlSWQpfSkoYSk7YnJlYWs7Y2FzZSB1LkNsb3NlV2luZG93Om4uZGlzcGF0Y2goTGUuQ2xvc2VCcm93c2VyV2luZG93KTticmVhaztjYXNlIHUuU2F2ZVdvcmtzcGFjZTphd2FpdCBfYShhKTticmVhaztjYXNlIHUuU2F2ZVBhZ2U6YXdhaXQgVmEoYSk7YnJlYWs7Y2FzZSB1LlNhdmVQYWdlQXM6YXdhaXQgRGEoYSk7YnJlYWs7Y2FzZSB1LlNhdmVXb3Jrc3BhY2VBczphd2FpdCBMYShhKTticmVhaztjYXNlIHUuUmVuYW1lV29ya3NwYWNlOm8uX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOm0uUkVOQU1FX1dPUktTUEFDRX0pO2JyZWFrO2Nhc2UgdS5Td2l0Y2hXb3Jrc3BhY2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9VXQoKSxuPShhd2FpdCBhLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpO24mJmF3YWl0IENhKGUsbi50aXRsZSkmJihhd2FpdCBhLmFwcGx5V29ya3NwYWNlKG4pLFJhKFwiV29ya3NwYWNlIFN3aXRjaGVkIVwiLG51bGwpKX0pKGEsZSk7YnJlYWs7Y2FzZSB1LkRlbGV0ZVdvcmtzcGFjZTphd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1VdCgpLG49KGF3YWl0IGEuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkpLmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT10LndvcmtzcGFjZUlkKSk7biYmYXdhaXQgSWEoZSxuLnRpdGxlKSYmKGF3YWl0IGEuU3RvcmFnZS5kZWxldGVXb3Jrc3BhY2UodC53b3Jrc3BhY2VJZCksUmEoXCJXb3Jrc3BhY2UgRGVsZXRlZCFcIixlLm5hbWUpKX0pKGEsZSk7YnJlYWs7Y2FzZSB1LlF1aXQ6Y29uc3Qgcj1hd2FpdCByYSgpO2F3YWl0IEFhKGEscikmJmZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLnF1aXQoKTticmVhaztjYXNlIHUuT3BlblN0b3JlZnJvbnQ6KGFzeW5jKCk9Pnthd2FpdCBLKCkmJk4oJCl9KSgpO2JyZWFrO2Nhc2UgdS5SZXN0b3JlQ2hhbmdlczpjb25zdCBpPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1VdCgpLHQ9YXdhaXQgZS5nZXRDdXJyZW50V29ya3NwYWNlKCk7cmV0dXJuKGF3YWl0IGUuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkpLmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT10LndvcmtzcGFjZUlkKSl9KCk7YXdhaXQgTWEoYSkmJmF3YWl0IGxlKGkpO2JyZWFrO2Nhc2UgdS5DdXN0b206aWYoZS5hY3Rpb24pe2NvbnN0IHQ9e2NhbGxlclR5cGU6aC5HbG9iYWxDb250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTphLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07VXQoKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLHQpfX19LEZhPWFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0IHhlKHQuaWRlbnRpdHkpLG49VXQoKTtzd2l0Y2goZT8udHlwZSl7Y2FzZSB3LlNhdmU6YXdhaXQgVmEodC5pZGVudGl0eSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSB3LlNhdmVBczphd2FpdCBEYSh0LmlkZW50aXR5LHQucGFnZUlkKTticmVhaztjYXNlIHcuUmVuYW1lOmF3YWl0IG4uQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KS5fb3BlblNhdmVNb2RhbCh7bWVudVR5cGU6bS5SRU5BTUVfUEFHRSxpZDp0LnBhZ2VJZH0pO2JyZWFrO2Nhc2Ugdy5EdXBsaWNhdGU6YS5kaXNwYXRjaChMZS5EdXBsaWNhdGVQYWdlLHQucGFnZUlkKTticmVhaztjYXNlIHcuQ2xvc2U6YS5kaXNwYXRjaChMZS5DbG9zZVBhZ2UsdC5wYWdlSWQpO2JyZWFrO2Nhc2Ugdy5DdXN0b206aWYoZS5hY3Rpb24pe2NvbnN0IGE9e2NhbGxlclR5cGU6aC5QYWdlVGFiQ29udGV4dE1lbnUsd2luZG93SWRlbnRpdHk6dC5pZGVudGl0eSxwYWdlSWQ6dC5wYWdlSWQsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTtVdCgpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsYSl9fX0sR2E9YXN5bmMoZSx0KT0+e2lmKGU/LnR5cGUpe2NvbnN0IGE9dC5pZGVudGl0eTtzd2l0Y2goZS50eXBlKXtjYXNlIHkuU2F2ZVBhZ2U6YXdhaXQgVmEoYSk7YnJlYWs7Y2FzZSB5LlNhdmVXb3Jrc3BhY2U6YXdhaXQgX2EoYSk7YnJlYWs7Y2FzZSB5LlNhdmVQYWdlQXM6YXdhaXQgRGEoYSk7YnJlYWs7Y2FzZSB5LlNhdmVXb3Jrc3BhY2VBczphd2FpdCBMYShhKTticmVhaztjYXNlIHkuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCBhPXtjYWxsZXJUeXBlOmguU2F2ZUJ1dHRvbkNvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OnQuaWRlbnRpdHkscGFnZUlkOnQucGFnZUlkLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07VXQoKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLGEpfX19fSwkYT1hc3luYyhlLHQpPT57Y29uc3QgYT10LnNlbGVjdGVkVmlld3NbMF0sbj1maW4uVmlldy53cmFwU3luYyhhKSxvPWF3YWl0KGFzeW5jIGU9Pntjb25zdHtuZXdUYWJVcmw6dH09YXdhaXQgRnQoZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBwYWdlIHdpdGhvdXQgYSBuZXdUYWJVcmwgc2V0XCIpO3JldHVybnsuLi5XZShcIk5ldyBWaWV3XCIsdCksdXJsOnQsdGFyZ2V0OmV9fSkoZSk7YXdhaXQgVXQoKS5jcmVhdGVWaWV3KG8sZSxuLmlkZW50aXR5KX0sTmE9YXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQoZT0+UHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jIGU9PmZpbi5WaWV3LndyYXBTeW5jKGUpLmdldEluZm8oKSkpKSkodCkse25ld1BhZ2VVcmw6bixuZXdUYWJVcmw6b309YXdhaXQgRnQoZSk7YS5mb3JFYWNoKChhc3luYyBlPT57ZS51cmwhPT1uJiZlLnVybCE9PW8mJmF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGUudXJsKX0pKX0samE9KGUsdCk9Pnt0LmZvckVhY2goKGFzeW5jIHQ9Pntjb25zdCBhPWZpbi5WaWV3LndyYXBTeW5jKHQpO2F3YWl0KGFzeW5jKGUsdCk9Pntjb25zdHt1cmw6YX09YXdhaXQgdC5nZXRJbmZvKCksbj17Li4uYXdhaXQgdC5nZXRPcHRpb25zKCksdXJsOmEsdGFyZ2V0OmUsbmFtZTp2b2lkIDB9O2F3YWl0IFV0KCkuY3JlYXRlVmlldyhuLGUsdC5pZGVudGl0eSl9KShlLGEpfSkpfSxIYT1hc3luYyhlLHQpPT57aWYoIWUpcmV0dXJuO2NvbnN0IGE9dC5pZGVudGl0eTtzd2l0Y2goZS50eXBlKXtjYXNlIGYuQ2xvc2VWaWV3czphd2FpdChhc3luYyhlLHQpPT57aWYoKGF3YWl0IGZpbi5XaW5kb3cud3JhcFN5bmMoZSkuZ2V0Q3VycmVudFZpZXdzKCkpLmxlbmd0aCE9PXQubGVuZ3RoKXQuZm9yRWFjaCgoYXN5bmMgZT0+e2NvbnN0IHQ9ZmluLlZpZXcud3JhcFN5bmMoZSk7YXdhaXQgdC5kZXN0cm95KCl9KSk7ZWxzZXtjb25zdCB0PShhd2FpdCBVdCgpLkJyb3dzZXIud3JhcFN5bmMoZSkuZ2V0UGFnZXMoKSkuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpOyhhd2FpdCB4ZShlKSkuZGlzcGF0Y2goTGUuQ2xvc2VQYWdlLHQ/LnBhZ2VJZCl9fSkoYSx0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5PcGVuV2l0aERlZmF1bHRCcm93c2VyOmF3YWl0IE5hKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIGYuUmVsb2FkVmlld3M6dC5zZWxlY3RlZFZpZXdzLmZvckVhY2goKGFzeW5jIGU9Pntjb25zdCB0PWZpbi5WaWV3LndyYXBTeW5jKGUpO2F3YWl0IHQucmVsb2FkKCl9KSk7YnJlYWs7Y2FzZSBmLk5ld1ZpZXc6YXdhaXQgJGEoYSx0KTticmVhaztjYXNlIGYuRHVwbGljYXRlVmlld3M6amEoYSx0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5BZGRUb0NoYW5uZWw6KGFzeW5jKGUsdCxhKT0+e2NvbnN0IG49e25ld0NoYW5uZWxJZDp0LHNlbGVjdGVkVmlld3M6YX07KGF3YWl0IHhlKGUpKS5kaXNwYXRjaChMZS5BZGRUb0NoYW5uZWwsbil9KShhLGUub3B0aW9uLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBmLlJlbW92ZUZyb21DaGFubmVsOihhc3luYyhlLHQpPT57KGF3YWl0IHhlKGUpKS5kaXNwYXRjaChMZS5SZW1vdmVGcm9tQ2hhbm5lbCx0KX0pKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIGYuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCBuPXtjYWxsZXJUeXBlOmguVmlld1RhYkNvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OmEsc2VsZWN0ZWRWaWV3czp0LnNlbGVjdGVkVmlld3MsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTtVdCgpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsbil9fX07YXN5bmMgZnVuY3Rpb24gcWEoZSx0KXtjb25zdCBhPWF3YWl0IG5hKGUuaWRlbnRpdHkpLG49YXdhaXQgcmEoKTthLmZpbmQoKGU9PmUuZGF0YT8udHlwZT09PXUuUXVpdCkpLmxhYmVsPWBRdWl0ICR7bn1gO2NvbnN0IG89ey4uLmUsdGVtcGxhdGU6YSxjYWxsYmFjazpVYX07YXdhaXQgdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnUobyx0KX1jb25zdCBLYT1hc3luYyhlLHQpPT57Y29uc3R7eDphLHk6bixpZGVudGl0eTpvLHRlbXBsYXRlOnIsY2FsbGJhY2s6aX09ZSx7ZGF0YTpzfT1hd2FpdCBmdW5jdGlvbihlLHQpe2lmKCFTKXRocm93IG5ldyBFcnJvcihcInNob3dDb250ZXh0TWVudSBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gZW52LiBBdm9pZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtpZighdCYmIWZpbi5tZS5pc1dpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJzaG93Q29udGV4dE1lbnUgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbiBPcGVuRmluIHdpbmRvdy5cIik7cmV0dXJuKHR8fGZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKSkuc2hvd1BvcHVwTWVudShlKX0oe3g6YSx5Om4sdGVtcGxhdGU6cn0sZmluLldpbmRvdy53cmFwU3luYyhvKSk7aShzLGUpfTthc3luYyBmdW5jdGlvbiBRYShlLHQpe2NvbnN0IGE9ey4uLmUsY2FsbGJhY2s6SGF9O2F3YWl0IHRoaXMub3BlblZpZXdUYWJDb250ZXh0TWVudShhLHQpfWFzeW5jIGZ1bmN0aW9uIHphKGUsdCl7Y29uc3QgYT1hd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBVdCgpLlN0b3JhZ2UuZ2V0UGFnZShlKSxuPShhd2FpdCBGZSgpKS5maW5kKCh0PT50LnBhZ2VJZD09PWUpKSx7d29ya3NwYWNlUGxhdGZvcm06b309YXdhaXQgVSh0KS5nZXRPcHRpb25zKCkscj0hKG8uaXNMb2NrZWR8fG8ucHJldmVudFBhZ2VDbG9zZXx8bi5jbG9zZUJ1dHRvbj8uZGlzYWJsZWR8fG4uY2xvc2VCdXR0b24/LmhpZGRlbik7cmV0dXJuW3t0eXBlOk90LkxhYmVsLGxhYmVsOlwiU2F2ZSBQYWdlXCIsZGF0YTp7dHlwZTp3LlNhdmV9fSx7dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZSBBc1wiLGRhdGE6e3R5cGU6dy5TYXZlQXN9fSxUdCx7dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlJlbmFtZSBQYWdlXCIsZGF0YTp7dHlwZTp3LlJlbmFtZX0sZW5hYmxlZDohIWF9LHt0eXBlOk90LkxhYmVsLGxhYmVsOlwiRHVwbGljYXRlIFBhZ2VcIixkYXRhOnt0eXBlOncuRHVwbGljYXRlfSxlbmFibGVkOiFvLmlzTG9ja2VkfSxUdCx7dHlwZTpPdC5MYWJlbCxsYWJlbDpcIkNsb3NlIFBhZ2VcIixkYXRhOnt0eXBlOncuQ2xvc2V9LGVuYWJsZWQ6cn1dfSkoZS5wYWdlSWQsZS5pZGVudGl0eSksbj17Li4uZSx0ZW1wbGF0ZTphLGNhbGxiYWNrOkZhfTthd2FpdCB0aGlzLm9wZW5QYWdlVGFiQ29udGV4dE1lbnUobix0KX1hc3luYyBmdW5jdGlvbiBKYShlLHQpe2NvbnN0IGE9ey4uLmUsdGVtcGxhdGU6YXdhaXQoYXN5bmMoKT0+W3t0eXBlOk90LkxhYmVsLGxhYmVsOlwiU2F2ZSBXb3Jrc3BhY2VcIixkYXRhOnt0eXBlOnkuU2F2ZVdvcmtzcGFjZX19LHt0eXBlOk90LkxhYmVsLGxhYmVsOlwiU2F2ZSBXb3Jrc3BhY2UgQXNcIixkYXRhOnt0eXBlOnkuU2F2ZVdvcmtzcGFjZUFzfX0se3R5cGU6T3QuU2VwYXJhdG9yLGRhdGE6dm9pZCAwfSx7dHlwZTpPdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZVwiLGRhdGE6e3R5cGU6eS5TYXZlUGFnZX19LHt0eXBlOk90LkxhYmVsLGxhYmVsOlwiU2F2ZSBQYWdlIEFzXCIsZGF0YTp7dHlwZTp5LlNhdmVQYWdlQXN9fV0pKCksY2FsbGJhY2s6R2F9O2F3YWl0IHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudShhLHQpfWNvbnN0IFhhPWImJmZ0KFwib3BlbmZpbi13b3Jrc3BhY2UtcGxhdGZvcm0td29ya3NwYWNlc1wiLFwid29ya3NwYWNlc1wiKTthc3luYyBmdW5jdGlvbiBZYShlKXtjb25zdCB0PWF3YWl0IGh0KGUsWGEpO3JldHVybiB0Pyh0LndvcmtzcGFjZUlkPWUudG9TdHJpbmcoKSx0LnRpdGxlPXQudGl0bGV8fHQud29ya3NwYWNlSWQsdCk6bnVsbH1hc3luYyBmdW5jdGlvbiBaYShlKXtjb25zdCB0PWF3YWl0IFB0KFhhKSxhPWF3YWl0IFByb21pc2UuYWxsKHQubWFwKChlPT5ZYShlLnRvU3RyaW5nKCkpKSkpO3JldHVybiBlP2EuZmlsdGVyKCh0PT5idCh0LnRpdGxlLGUpKSk6YX1hc3luYyBmdW5jdGlvbiBlbih7d29ya3NwYWNlOmV9KXthd2FpdCBtdChlLndvcmtzcGFjZUlkLGUsWGEpfWFzeW5jIGZ1bmN0aW9uIHRuKGUpe2F3YWl0IHZ0KGUsWGEpfWFzeW5jIGZ1bmN0aW9uIGFuKHt3b3Jrc3BhY2VJZDplLHdvcmtzcGFjZTp0fSl7aWYodm9pZCAwPT09YXdhaXQgWWEoZSkpdGhyb3cgbmV3IEVycm9yKFwid29ya3NwYWNlIG5vdCBmb3VuZFwiKTthd2FpdCBlbih7d29ya3NwYWNlOnR9KSxlIT09dC53b3Jrc3BhY2VJZCYmYXdhaXQgdG4oZSl9YXN5bmMgZnVuY3Rpb24gbm4oe2FwcDplLHRhcmdldDp0fSl7Y29uc3QgYT1maW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKTtzd2l0Y2goZS5tYW5pZmVzdFR5cGUpe2Nhc2UgYy5TbmFwc2hvdDpyZXR1cm4gYS5hcHBseVNuYXBzaG90KGUubWFuaWZlc3QpO2Nhc2UgYy5WaWV3OnJldHVybiBhc3luYyBmdW5jdGlvbihlLHQpe2NvbnN0IGE9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7aWYoXCJ2aWV3XCI9PT10LmVudGl0eVR5cGUpe2NvbnN0IGE9ZmluLlZpZXcud3JhcFN5bmModCksbj1hd2FpdCBhLmdldFBhcmVudExheW91dCgpO3JldHVybiBhd2FpdCBuLnJlcGxhY2VWaWV3KHQse21hbmlmZXN0VXJsOmUubWFuaWZlc3QsdXJsOnZvaWQgMCx0YXJnZXQ6dm9pZCAwfSksYS5kZXN0cm95KCl9cmV0dXJuIGEuY3JlYXRlVmlldyh7bmFtZTp2b2lkIDAsdXJsOnZvaWQgMCxtYW5pZmVzdFVybDplLm1hbmlmZXN0LHRhcmdldDp2b2lkIDB9KX0oZSx0KTtjYXNlIGMuRXh0ZXJuYWw6cmV0dXJuIGZpbi5TeXN0ZW0ubGF1bmNoRXh0ZXJuYWxQcm9jZXNzKHtwYXRoOmUubWFuaWZlc3QsdXVpZDplLmFwcElkfSk7ZGVmYXVsdDpyZXR1cm4gZmluLkFwcGxpY2F0aW9uLnN0YXJ0RnJvbU1hbmlmZXN0KGUubWFuaWZlc3QpfX1jb25zdCBvbj1lPT5lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSk7ZnVuY3Rpb24gcm4oZSwuLi50KXtpZighdC5sZW5ndGgpcmV0dXJuIGU7Y29uc3QgYT10LnNoaWZ0KCk7cmV0dXJuIG9uKGUpJiZvbihhKSYmT2JqZWN0LmVudHJpZXMoYSkuZm9yRWFjaCgoKFt0LGFdKT0+e2lmKG9uKGEpKXJldHVybiBlW3RdfHwoZVt0XT17fSkscm4oZVt0XSxhKTtlW3RdPWF9KSkscm4oZSwuLi50KX1jb25zdCBzbj1NK2RhLkJyb3dzZXI7ZnVuY3Rpb24gY24oZSx0KXtjb25zdCBhPXJuKHt9LHQsZSk7cmV0dXJuIGEuZGV0YWNoT25DbG9zZT0hMCxhfWFzeW5jIGZ1bmN0aW9uIGRuKGUsdCxhKXtjb25zdCBuPWUubWFuaWZlc3RVcmw/YXdhaXQgdCh7bWFuaWZlc3RVcmw6ZS5tYW5pZmVzdFVybH0sYSk6dm9pZCAwO2lmKG4/LmludGVyb3AmJmUuaW50ZXJvcCl7Y29uc3QgdD17Li4uZSwuLi5uLGludGVyb3A6ZS5pbnRlcm9wfTtyZXR1cm4gZGVsZXRlIHQubWFuaWZlc3RVcmwsdH1yZXR1cm4gZX1jb25zdCBwbj1lPT57Y29uc3QgdD1lLm5hbWU9PT1WLkhvbWUsYT1lLm5hbWU/LnN0YXJ0c1dpdGgoVi5Ib21lSW50ZXJuYWwpLG49ZS5uYW1lPy5zdGFydHNXaXRoKFYuQnJvd3Nlck1lbnUpO3JldHVybiF0JiYhYSYmIW59LGxuPWU9Plwid29ya3NwYWNlUGxhdGZvcm1cImluIGU/ZTooKHt3b3Jrc3RhY2tzOmUscGFnZXM6dCwuLi5hfSk9Pih7Li4uYSx3b3Jrc3BhY2VQbGF0Zm9ybTp7cGFnZXM6dHx8ZXx8bnVsbH19KSkoZSksdW49e2NvbnRleHRNZW51U2V0dGluZ3M6e3JlbG9hZDohMX0sYmFja2dyb3VuZFRocm90dGxpbmc6ITAsdXJsOnNuLGNvbnRleHRNZW51OiEwLGNsb3NlT25MYXN0Vmlld1JlbW92ZWQ6ITEsZXhwZXJpbWVudGFsOntzaG93RmF2aWNvbnM6ITAsZGVmYXVsdEZhdmljb25Vcmw6YCR7TX0vaWNvbnMvZGVmYXVsdEZhdmljb24uc3ZnYH0scGVybWlzc2lvbnM6e1N5c3RlbTp7b3BlblVybFdpdGhCcm93c2VyOntlbmFibGVkOiEwLHByb3RvY29sczpbXCJtYWlsdG9cIl19fX19LHduPXtkaW1lbnNpb25zOntib3JkZXJXaWR0aDozLGhlYWRlckhlaWdodDozMH19LGZuPWFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0IFV0KCkuU3RvcmFnZS5nZXRQYWdlcygpLG49YXdhaXQgVXQoKS5Ccm93c2VyLmdldEFsbEF0dGFjaGVkUGFnZXMoKTtyZXR1cm4gZS5tYXAoKGU9PntsZXQgbz1lLnRpdGxlO3ZvaWQgMD09PWUucGFnZUlkJiYoZS5wYWdlSWQ9Y3J5cHRvLnJhbmRvbVVVSUQoKSk7Y29uc3Qgcj1hLmZpbmQoKGU9PmUudGl0bGU9PT1vKSk7cmV0dXJuKHImJnIucGFnZUlkIT09ZS5wYWdlSWR8fG4uZmluZCgoZT0+ZS50aXRsZT09PW8pKSkmJihvPXBlKGUudGl0bGUsWy4uLmEsLi4ubl0ubWFwKChlPT5lLnRpdGxlKSkpKSxuLnB1c2goey4uLmUsdGl0bGU6b30pLHsuLi50LC4uLmUsdGl0bGU6byxsYXlvdXQ6KGk9ZS5sYXlvdXQsUGUoey4uLml9LGJlKSl9O3ZhciBpfSkpfTt2YXIgZ247IWZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cImJyb3dzZXJcIixlLlBsYXRmb3JtPVwicGxhdGZvcm1cIixlLkNsYXNzaWM9XCJjbGFzc2ljXCIsZS5NaXhlZD1cIm1peGVkXCJ9KGdufHwoZ249e30pKTtjb25zdCB5bj1lPT57Y29uc3QgdD1maW4uV2luZG93LndyYXBTeW5jKGUpO3JldHVybiBQcm9taXNlLmFsbChbdC5icmluZ1RvRnJvbnQoKSx0LnJlc3RvcmUoKSx0LmZvY3VzKCldKX07YXN5bmMgZnVuY3Rpb24gaG4oZSl7Y29uc3QgdD0oYXdhaXQgSCgpKS5tYXAoKGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGUuZ2V0T3B0aW9ucygpO3Qud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzJiZ0LmxheW91dCYmYXdhaXQoYXN5bmMgZT0+KGF3YWl0IHhlKGUpKS5kaXNwYXRjaChMZS5VcGRhdGVQYWdlc1dpbmRvd09wdGlvbnMpKShlLmlkZW50aXR5KX0pKTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwodCksZT9lKCk6dXQoKX1jb25zdCBtbj1hc3luYyBlPT57YXdhaXQgQWEoZmluLm1lLmlkZW50aXR5LGUudGl0bGU/P2F3YWl0IHJhKCksZS5zaG91bGRDZW50ZXJPbk1vbml0b3IpJiZmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5xdWl0KCl9O2xldCB2bj1bXTtjb25zdCBTbj0oKT0+dm47Y29uc3QgUG49KGUsdCk9PmFzeW5jIGE9Pntjb25zdCBuPW51bGwhPT1lO2NsYXNzIG8gZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmlzV29ya3NwYWNlUGxhdGZvcm09KCk9Pih7aXNXb3Jrc3BhY2VQbGF0Zm9ybTohMCxpc0Jyb3dzZXJJbml0aWFsaXplZDohIWV9KSx0aGlzLmFkZFBhZ2U9dGhpcy5hdHRhY2hQYWdlc1RvV2luZG93LHRoaXMuZGV0YWNoUGFnZXNGcm9tV2luZG93PUplLHRoaXMuZ2V0QWxsQXR0YWNoZWRQYWdlcz1GZSx0aGlzLmdldFBhZ2VzRm9yV2luZG93PVllLHRoaXMuZ2V0UGFnZUZvcldpbmRvdz1aZSx0aGlzLnNldEFjdGl2ZVBhZ2U9WGUsdGhpcy5sYXVuY2hBcHA9bm4sdGhpcy5zYXZlUGFnZT1LZSx0aGlzLnNhdmVXb3Jrc3BhY2U9Z2UsdGhpcy5jcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbD1qZSx0aGlzLnVwZGF0ZVNhdmVkUGFnZUludGVybmFsPXFlLHRoaXMuZGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWw9SGUsdGhpcy5yZW9yZGVyUGFnZXNGb3JXaW5kb3c9ZXQsdGhpcy5nZXRVbmlxdWVQYWdlVGl0bGU9dHQsdGhpcy51cGRhdGVQYWdlRm9yV2luZG93PXplLHRoaXMuZ2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93PWhlLHRoaXMuZ2V0VGhlbWVzPVNuLHRoaXMuaW52b2tlQ3VzdG9tQWN0aW9uSW50ZXJuYWw9c3QsdGhpcy5yZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWw9bW4sdGhpcy5nZXRDdXJyZW50V29ya3NwYWNlPWZlLHRoaXMuYXBwbHlXb3Jrc3BhY2U9bGUsdGhpcy5zZXRBY3RpdmVXb3Jrc3BhY2U9dWUsdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD10aGlzLm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnU9dGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnUuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkUGFnZXM9dGhpcy5nZXRTYXZlZFBhZ2VzLmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFBhZ2U9dGhpcy5nZXRTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkUGFnZT10aGlzLmNyZWF0ZVNhdmVkUGFnZS5iaW5kKHRoaXMpLHRoaXMudXBkYXRlU2F2ZWRQYWdlPXRoaXMudXBkYXRlU2F2ZWRQYWdlLmJpbmQodGhpcyksdGhpcy5kZWxldGVTYXZlZFBhZ2U9dGhpcy5kZWxldGVTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmF0dGFjaFBhZ2VzVG9XaW5kb3c9dGhpcy5hdHRhY2hQYWdlc1RvV2luZG93LmJpbmQodGhpcyksdGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5WaWV3VGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5QYWdlVGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFdvcmtzcGFjZXM9dGhpcy5nZXRTYXZlZFdvcmtzcGFjZXMuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkV29ya3NwYWNlPXRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkV29ya3NwYWNlPXRoaXMuY3JlYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLnVwZGF0ZVNhdmVkV29ya3NwYWNlPXRoaXMudXBkYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmRlbGV0ZVNhdmVkV29ya3NwYWNlPXRoaXMuZGVsZXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmdldEN1cnJlbnRXb3Jrc3BhY2U9dGhpcy5nZXRDdXJyZW50V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5hcHBseVdvcmtzcGFjZT10aGlzLmFwcGx5V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5zZXRBY3RpdmVXb3Jrc3BhY2U9dGhpcy5zZXRBY3RpdmVXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnU9dGhpcy5vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKX1hc3luYyBnZXRTbmFwc2hvdCgpe2NvbnN0IGU9bj9hd2FpdCBobigoYXN5bmMoKT0+dXQoYXdhaXQgc3VwZXIuZ2V0U25hcHNob3Qodm9pZCAwLGZpbi5tZS5pZGVudGl0eSkpKSk6YXdhaXQgdXQoYXdhaXQgc3VwZXIuZ2V0U25hcHNob3Qodm9pZCAwLGZpbi5tZS5pZGVudGl0eSkpO3JldHVybnsuLi5lLHdpbmRvd3M6ZS53aW5kb3dzLmZpbHRlcihwbikubWFwKGx0KX19YXN5bmMgYXBwbHlTbmFwc2hvdCh7c25hcHNob3Q6ZSxvcHRpb25zOnR9KXtjb25zdCBhPWU9PnN1cGVyLmFwcGx5U25hcHNob3Qoe3NuYXBzaG90OmUsb3B0aW9uczp7Li4udCxjbG9zZUV4aXN0aW5nV2luZG93czohMX19KTtsZXQgbz1lO1wic3RyaW5nXCI9PXR5cGVvZiBvJiYobz1hd2FpdCBzdXBlci5mZXRjaE1hbmlmZXN0KHttYW5pZmVzdFVybDpvfSxmaW4ubWUuaWRlbnRpdHkpKTtjb25zdCByPWZ1bmN0aW9uKGUpe2xldCB0PSExLGE9ITE7Zm9yKGNvbnN0IG4gb2YgZS53aW5kb3dzKXtpZih0JiZhKWJyZWFrO24ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5sZW5ndGg/YT0hMDpuLmxheW91dCYmKHQ9ITApfXJldHVybiB0JiZhP2duLk1peGVkOnQ/Z24uUGxhdGZvcm06YT9nbi5Ccm93c2VyOmUud2luZG93cy5sZW5ndGg/Z24uQ2xhc3NpYzpudWxsfShvKTtpZihyPT09Z24uTWl4ZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBzbmFwc2hvdCBjYW5ub3QgYmUgYXBwbGllZCBhcyBpdCBjb250YWlucyBhIG1peHR1cmUgb2YgYnJvd3NlciBhbmQgcGxhdGZvcm0gd2luZG93cy5cIik7aWYobilnbi5QbGF0Zm9ybTtlbHNlIGlmKHI9PT1nbi5Ccm93c2VyKXRocm93IG5ldyBFcnJvcihcIlRoaXMgc25hcHNob3QgY2Fubm90IGJlIGFwcGxpZWQgYXMgdGhlIHBsYXRmb3JtIGhhcyBiZWVuIGluaXRpYWxpemVkIHdpdGhvdXQgdGhlIGJyb3dzZXIuXCIpO3JldHVybiB0Py5jbG9zZUV4aXN0aW5nV2luZG93cyYmYXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtjb25zdCBlPWF3YWl0IEgoKTthd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+ZS5jbG9zZSghMCkuY2F0Y2goKCgpPT57fSkpKSkpfSgpLG4/YXN5bmMgZnVuY3Rpb24oZSx0KXtjb25zdCBhPWF3YWl0IEZlKCksbj1lLnNuYXBzaG90RGV0YWlscz8ubW9uaXRvckluZm98fGF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSxbbyxyXT0oZS53aW5kb3dzfHxbXSkucmVkdWNlKCgoW2UsdF0sYSk9PmE/LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubGVuZ3RoP1tbLi4uZSxhXSx0XTpbZSxbLi4udCxhXV0pLFtbXSxbXV0pLGk9bmV3IE1hcDthLmZvckVhY2goKGU9Pmkuc2V0KGUucGFnZUlkLGUpKSk7Y29uc3Qgcz1bXSxjPW8ubWFwKChhc3luYyBlPT57Y29uc3QgdD1sbihlKSxhPVtdLG49KGU9PntsZXQgdD0hMTtjb25zdCBhPShlfHxbXSkubWFwKChlPT57Y29uc3QgYT1mdW5jdGlvbih7aWQ6ZSxuYW1lOnQsLi4uYX0pe3JldHVybntwYWdlSWQ6ZSx0aXRsZTp0LC4uLmF9fShlKTtyZXR1cm4gdCYmYS5pc0FjdGl2ZSYmKGEuaXNBY3RpdmU9ITEpLGEuaXNBY3RpdmUmJih0PSEwKSxhfSkpO3JldHVybiF0JiZhLmxlbmd0aCYmKGFbMF0uaXNBY3RpdmU9ITApLGF9KSh0Py53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMpO2lmKCFuPy5sZW5ndGgpe2NvbnN0IGU9YXdhaXQgdHQoKTthLnB1c2goYXdhaXQgQnQoZSx0LmxheW91dCkpfWxldCBvO24uZm9yRWFjaCgoZT0+e2NvbnN0IHQ9aS5nZXQoZS5wYWdlSWQpO3Q/bz10OmEucHVzaChlKX0pKSxvJiZhd2FpdCBQcm9taXNlLmFsbChbWGUoe2lkZW50aXR5Om8ucGFyZW50SWRlbnRpdHkscGFnZUlkOm8ucGFnZUlkfSkseW4oby5wYXJlbnRJZGVudGl0eSldKSxhLmxlbmd0aCYmcy5wdXNoKHsuLi50LHdvcmtzcGFjZVBsYXRmb3JtOnsuLi50LndvcmtzcGFjZVBsYXRmb3JtLHBhZ2VzOmF9fSl9KSk7aWYoYXdhaXQgUHJvbWlzZS5hbGwoYyksIXMubGVuZ3RoJiYhci5sZW5ndGgpcmV0dXJuO2NvbnN0IGQ9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7cmV0dXJuKHR8fGQuYXBwbHlTbmFwc2hvdC5iaW5kKGQpKSh7Li4uZSxzbmFwc2hvdERldGFpbHM6ey4uLmUuc25hcHNob3REZXRhaWxzLG1vbml0b3JJbmZvOm59LHdpbmRvd3M6Wy4uLnMsLi4ucl19KX0obyxhKTphKG8pfWFzeW5jIGNyZWF0ZVdpbmRvdyh0LGEpe3Qud29ya3NwYWNlUGxhdGZvcm0/LnRvb2xiYXJPcHRpb25zPy5idXR0b25zJiYoZT0+e2NvbnN0IHQ9ZS5maWx0ZXIoKGU9PmUudHlwZSE9PWcuQ3VzdG9tKSksYT1uZXcgU2V0O2Zvcihjb25zdCBlIG9mIHQpe2lmKGEuaGFzKGUudHlwZSkpdGhyb3cgbmV3IEVycm9yKGBFbmNvdW50ZXJlZCBhIGR1cGxpY2F0ZSBvZiAke2UudHlwZX0gYnV0dG9uLiBObyBtb3JlIHRoYW4gb25lIGluc3RhbmNlIG9mIGEgYnV0dG9uIHR5cGUgbWF5IGJlIHByb3ZpZGVkLmApO2EuYWRkKGUudHlwZSl9fSkodC53b3Jrc3BhY2VQbGF0Zm9ybS50b29sYmFyT3B0aW9ucy5idXR0b25zKTtsZXQgbz1sbih0KTtpZihuKXtjb25zdCB0PXRoaXMuZ2V0VGhlbWVzKCk7bz1hd2FpdChhc3luYyhlLHQsYSk9PntsZXQgbj1lO2NvbnN0IG89bj8ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzO2lmKG8pe2NvbnN0IGU9by5maW5kKChlPT5lLmlzQWN0aXZlKSk7ZT9uLmxheW91dD1lLmxheW91dDoob1swXS5pc0FjdGl2ZT0hMCxuLmxheW91dD1vWzBdLmxheW91dCl9aWYobi5sYXlvdXQpe2lmKG49cm4oe30sdC5kZWZhdWx0V2luZG93T3B0aW9ucyxuLHVuKSxuLmxheW91dD1ybihuLmxheW91dCx3biksKG4uaWNvbnx8bi50YXNrYmFySWNvbikmJihuLnRhc2tiYXJJY29uR3JvdXA9bi50YXNrYmFySWNvbkdyb3VwfHxmaW4ubWUuaWRlbnRpdHkudXVpZCksIW4uYmFja2dyb3VuZENvbG9yKXtjb25zdCBlPWE/LnBhbGV0dGU7bi5iYWNrZ3JvdW5kQ29sb3I9ZT8uYmFja2dyb3VuZDJ8fGU/LmJhY2tncm91bmRQcmltYXJ5fWNvbnN0IGU9bi53b3Jrc3BhY2VQbGF0Zm9ybS5uZXdUYWJVcmw7aWYoZSYmKG4ubGF5b3V0LnNldHRpbmdzfHwobi5sYXlvdXQuc2V0dGluZ3M9e30pLG4ubGF5b3V0LnNldHRpbmdzLm5ld1RhYkJ1dHRvbj17dXJsOmV9KSxuPSgoZSx0KT0+e2NvbnN0IGE9ZTtyZXR1cm4gYS53b3Jrc3BhY2VQbGF0Zm9ybXx8KGEud29ya3NwYWNlUGxhdGZvcm09e30pLGEud29ya3NwYWNlUGxhdGZvcm0uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucz17c2V0QXNGb3JlZ3JvdW5kOiEhdCxkZWZlclNob3dFbmFibGVkOiEwLGF1dG9TaG93OmEud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbEF1dG9TaG93fHxhLndvcmtzcGFjZVBsYXRmb3JtPy5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zPy5hdXRvU2hvd3x8dm9pZCAwPT09YS5hdXRvU2hvd3x8YS5hdXRvU2hvd30sYS5hdXRvU2hvdz0hMSxhfSkobiwhMCksIW4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXM/Lmxlbmd0aCl7Y29uc3QgZT1hd2FpdCB0dChcIlVudGl0bGVkIFBhZ2VcIiksdD17Li4uYXdhaXQgQnQoZSxuLmxheW91dCksaXNBY3RpdmU6ITB9O24ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXM9W3RdfX1yZXR1cm4gbi53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMmJihuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzPWF3YWl0IGZuKG4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMsdD8uZGVmYXVsdFBhZ2VPcHRpb25zKSksbi5jb3JuZXJSb3VuZGluZyYmZGVsZXRlIG4uY29ybmVyUm91bmRpbmcsbn0pKG8sZSx0WzBdKX1vPWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSxhPXQucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdC5ib3R0b20tdC5wcmltYXJ5TW9uaXRvci5hdmFpbGFibGVSZWN0LnRvcCxuPXQucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdC5yaWdodC10LnByaW1hcnlNb25pdG9yLmF2YWlsYWJsZVJlY3QubGVmdDtyZXR1cm4gZS5kZWZhdWx0SGVpZ2h0PWUuZGVmYXVsdEhlaWdodHx8XCI4MDBcIixlLmRlZmF1bHRXaWR0aD1lLmRlZmF1bHRXaWR0aHx8XCI4MDBcIixhPGUuZGVmYXVsdEhlaWdodCYmKGUuZGVmYXVsdEhlaWdodD1hKSxuPGUuZGVmYXVsdFdpZHRoJiYoZS5kZWZhdWx0V2lkdGg9biksZX0pKG8pO2NvbnN0IHI9KGUsdCk9PnN1cGVyLmNyZWF0ZVdpbmRvdyhlLHQpLGk9bj8oZT0+YXN5bmModCxhKT0+e2xldCBuPSExO2NvbnN0IG89YXdhaXQgZSh0LGEpO3JldHVybiB0Py53b3Jrc3BhY2VQbGF0Zm9ybT8uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucz8uZGVmZXJTaG93RW5hYmxlZD8oYXdhaXQgby5hZGRMaXN0ZW5lcihELlNob3dSZXF1ZXN0ZWQsKGFzeW5jKCk9PntpZihuKXJldHVybjtjb25zdCBlPWF3YWl0IG8uZ2V0T3B0aW9ucygpO2F3YWl0IG8udXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06ey4uLmUud29ya3NwYWNlUGxhdGZvcm0sX2ludGVybmFsRGVmZXJTaG93T3B0aW9uczp7Li4uZS53b3Jrc3BhY2VQbGF0Zm9ybS5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zLGF1dG9TaG93OiEwfX19KSxuPSEwfSkpLG8pOm99KShyKTpyO3JldHVybiBpKG8sYSl9YXN5bmMgY3JlYXRlVmlldyh0LGEpe3JldHVybiB0Lm9wdHM9Y24odC5vcHRzLGU/LmRlZmF1bHRWaWV3T3B0aW9ucyksdC5vcHRzPWF3YWl0IGRuKHQub3B0cyx0aGlzLmZldGNoTWFuaWZlc3QsYSksc3VwZXIuY3JlYXRlVmlldyh0LGEpfWFzeW5jIHJlcGxhY2VWaWV3KHQsYSl7cmV0dXJuIHQub3B0cy5uZXdWaWV3PWF3YWl0IGNuKHQub3B0cy5uZXdWaWV3LGU/LmRlZmF1bHRWaWV3T3B0aW9ucyksdC5vcHRzLm5ld1ZpZXc9YXdhaXQgZG4odC5vcHRzLm5ld1ZpZXcsdGhpcy5mZXRjaE1hbmlmZXN0LGEpLHN1cGVyLnJlcGxhY2VWaWV3KHQsYSl9YXN5bmMgcmVwbGFjZUxheW91dChlLHQpe3JldHVybiBkZWxldGUgZS5vcHRzLmxheW91dD8uZGltZW5zaW9ucyxzdXBlci5yZXBsYWNlTGF5b3V0KGUsdCl9YXN5bmMgY2xvc2VWaWV3KGUsdCl7Y29uc3QgYT1maW4uVmlldy53cmFwU3luYyhlLnZpZXcpO2F3YWl0IHN1cGVyLmNsb3NlVmlldyhlLHQpLGF3YWl0IGEuZGVzdHJveSgpLmNhdGNoKChlPT5lKSl9YXN5bmMgZ2V0U2F2ZWRQYWdlKC4uLmUpe3JldHVybiBXdC5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNhdmVkUGFnZXMoLi4uZSl7cmV0dXJuIEN0LmFwcGx5KHRoaXMsZSl9YXN5bmMgY3JlYXRlU2F2ZWRQYWdlKC4uLmUpe3JldHVybiBJdC5hcHBseSh0aGlzLGUpfWFzeW5jIGRlbGV0ZVNhdmVkUGFnZSguLi5lKXtyZXR1cm4gQXQuYXBwbHkodGhpcyxlKX1hc3luYyB1cGRhdGVTYXZlZFBhZ2UoLi4uZSl7cmV0dXJuIE10LmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0U2F2ZWRXb3Jrc3BhY2UoLi4uZSl7cmV0dXJuIFlhLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0U2F2ZWRXb3Jrc3BhY2VzKC4uLmUpe3JldHVybiBaYS5hcHBseSh0aGlzLGUpfWFzeW5jIGNyZWF0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBlbi5hcHBseSh0aGlzLGUpfWFzeW5jIGRlbGV0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiB0bi5hcHBseSh0aGlzLGUpfWFzeW5jIHVwZGF0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBhbi5hcHBseSh0aGlzLGUpfWFzeW5jIGF0dGFjaFBhZ2VzVG9XaW5kb3codCl7dC5wYWdlcz1hd2FpdCBmbih0LnBhZ2VzLGU/LmRlZmF1bHRQYWdlT3B0aW9ucyksYXdhaXQgUWUodCl9YXN5bmMgb3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWwoLi4uZSl7cmV0dXJuIHFhLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3Blbkdsb2JhbENvbnRleHRNZW51KC4uLmUpe3JldHVybiBLYS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5WaWV3VGFiQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gUWEuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuVmlld1RhYkNvbnRleHRNZW51KC4uLmUpe3JldHVybiBLYS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gemEuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuUGFnZVRhYkNvbnRleHRNZW51KC4uLmUpe3JldHVybiBLYS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnUoLi4uZSl7cmV0dXJuIEthLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBKYS5hcHBseSh0aGlzLGUpfX1yZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Qobyk6bmV3IG99O2FzeW5jIGZ1bmN0aW9uIGJuKCl7IWZ1bmN0aW9uKCl7Y29uc3QgZT1MKCk7ZS5hZGRMaXN0ZW5lcihCLldpbmRvd09wdGlvbnNDaGFuZ2VkLG90KSxlLmFkZExpc3RlbmVyKEIuV2luZG93Q2xvc2VkLHJ0KSxlLmFkZExpc3RlbmVyKEIuV2luZG93Q3JlYXRlZCxydCksZmluLkludGVyQXBwbGljYXRpb25CdXMuc3Vic2NyaWJlKHt1dWlkOmZpbi5tZS5pZGVudGl0eS51dWlkfSxcImJyb3dzZXItd2luZG93LXJlYWR5XCIscnQpfSgpLGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKTthd2FpdCBlLmFkZExpc3RlbmVyKFwid2luZG93LWZvY3VzZWRcIixtZSl9KCk7dWUoYXdhaXQgd2UoKSl9bGV0IGtuO2Z1bmN0aW9uIFduKHtvdmVycmlkZUNhbGxiYWNrOmUsaW50ZXJvcE92ZXJyaWRlOnQsYnJvd3NlcjphfSl7aWYoIVMpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi5cIik7aWYoIWtuKXtmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT5ibigpKSksYT8udGl0bGUmJihuPWEudGl0bGUsb2E9biksa249ZmluLlBsYXRmb3JtLmluaXQoe292ZXJyaWRlQ2FsbGJhY2s6UG4oYSxlfHxhPy5vdmVycmlkZUNhbGxiYWNrKSxpbnRlcm9wT3ZlcnJpZGU6dHx8YT8uaW50ZXJvcE92ZXJyaWRlfSksKGFzeW5jIGU9Pnt6KFEuUGxhdGZvcm0sZSl9KSh7YWxsb3dlZDohMH0pfXZhciBuO3JldHVybiBrbn1jb25zdCBDbj1hc3luYyh7dGhlbWU6ZSxjdXN0b21BY3Rpb25zOnQsLi4uYX0pPT57Y29uc3Qgbj1PLnNwbGl0KFwiLlwiKS5tYXAoKGU9PnBhcnNlSW50KGUpKSksbz1hd2FpdChhc3luYyBlPT5uZXcgUHJvbWlzZSgoYXN5bmMgdD0+eyhhd2FpdCBZKCkpLmRpc2FibGVSdW50aW1lVmFsaWRhdGlvbiYmdCghMCk7Y29uc3QgYT0oYXdhaXQgZmluLlN5c3RlbS5nZXRWZXJzaW9uKCkpLnNwbGl0KFwiLlwiKS5tYXAoKGU9PnBhcnNlSW50KGUpKSk7dChlLmV2ZXJ5KCgodCxuKT0+IShuPDMpfHxhW25dPT09ZVtuXSkpKX0pKSkobik7dmFyIHI7aWYoZSYmKChyPWUpLmZvckVhY2goKGU9Pntjb25zdCB0PWUucGFsZXR0ZS5iYWNrZ3JvdW5kUHJpbWFyeTtpZighdC5pbmNsdWRlcyhcIiNcIikmJiF0LmluY2x1ZGVzKFwicmdiXCIpJiYhdC5pbmNsdWRlcyhcImhzbFwiKSl0aHJvdyBuZXcgRXJyb3IoXCJCYWNrZ3JvdW5kIHByaW1hcnkgY29sb3IgaXMgbm90IHRoZSByaWdodCBmb3JtYXQuXCIpfSkpLHZuPXIsKGFzeW5jIGU9Pnt6KFEuVGhlbWluZyxlKX0pKHthbGxvd2VkOiEwfSkpLHQmJihpdD10KSxvKXJldHVybiBXbihhKTt0aHJvdyBuZXcgRXJyb3IoYFJ1bnRpbWUgdmVyc2lvbiBpcyBub3Qgc3VwcG9ydGVkLiAgJHtuWzBdfS4ke25bMV19LiR7blsyXX0uKiBpcyByZXF1aXJlZGApfX0pKCksbW9kdWxlLmV4cG9ydHM9bn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCIoKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17NzAzOihlLHQsbik9PntuLnIodCksbi5kKHQse0NMSUFjdGlvbjooKT0+bC5QdCxDTElGaWx0ZXJPcHRpb25UeXBlOigpPT5sLmVsLENMSVRlbXBsYXRlOigpPT5sLnlXLGRlcmVnaXN0ZXI6KCk9PmV0LGhpZGU6KCk9Pm50LHJlZ2lzdGVyOigpPT5ZZSxzaG93OigpPT50dH0pO3ZhciBvPXt9O24ucihvKSxuLmQobyx7c3Vic2NyaWJlOigpPT5hZX0pO3ZhciByPXt9O24ucihyKSxuLmQocix7Y3JlYXRlOigpPT5IZX0pO3ZhciBpPW4oNjc4KSxzPW4oNTMyKSxhPW4oNDM2KTtjb25zdCBjPVwiaG9tZVwiO3ZhciBkOyFmdW5jdGlvbihlKXtlLkNvbW1hbmRzPVwiaG9tZS1jb21tYW5kc1wifShkfHwoZD17fSkpO3ZhciB1LHA9big4MDYpLGw9KG4oMjk4KSxuKDc1OCkpO24oMTE0KSxuKDEwOSksbig0MjcpOyFmdW5jdGlvbihlKXtlW2UuSW5pdGlhbD0wXT1cIkluaXRpYWxcIixlW2UuT3Blbj0xXT1cIk9wZW5cIixlW2UuQ2xvc2U9Ml09XCJDbG9zZVwifSh1fHwodT17fSkpO3ZhciBmPW4oMzE2KTtjb25zdCB3PVwiYWxsXCIsZz1cIjBcIixoPVwiNVwiLHk9XCI2XCIsdj0oKT0+e307ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlP2Ake2V9LSR7dH1gOnR9ZnVuY3Rpb24gUyhlKXtyZXR1cm5gX19zZWFyY2gtJHtlfS10b3BpY19fYH1jb25zdCBQPW5ldyBNYXA7ZnVuY3Rpb24gQyhlLHQpe1AuaGFzKGUpfHxQLnNldChlLG5ldyBTZXQpLFAuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBrKGUsdCl7Y29uc3Qgbj1QLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBXPW5ldyBNYXA7ZnVuY3Rpb24gUihlLHQpe1cuaGFzKGUpfHxXLnNldChlLG5ldyBTZXQpLFcuZ2V0KGUpLmFkZCh0KX1mdW5jdGlvbiBUKGUsdCl7Y29uc3Qgbj1XLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1jb25zdCBJPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gYihlLHQpe0kuaGFzKGUpfHxJLnNldChlLG5ldyBNYXApLEkuZ2V0KGUpLnNldCh0LmlkLHQpO2NvbnN0IG49UC5nZXQoZSk7aWYoIW4pcmV0dXJuO2NvbnN0IG89Wy4uLm5dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwobyl9YXN5bmMgZnVuY3Rpb24gRChlLHQpe2NvbnN0IG49SS5nZXQoZSk7aWYoIW4pcmV0dXJuO24uZGVsZXRlKHQpO2NvbnN0IG89Vy5nZXQoZSk7aWYoIW8pcmV0dXJuO2NvbnN0IHI9Wy4uLm9dLm1hcCgoZT0+ZSgpKSk7YXdhaXQgUHJvbWlzZS5hbGwocil9ZnVuY3Rpb24gQihlKXtyZXR1cm4gSS5nZXQoZSk/Wy4uLkkuZ2V0KGUpLnZhbHVlcygpXTpbXX1mdW5jdGlvbiBGKGUpe2NvbnN0IHQ9SS5nZXQoZSk7dCYmdC5jbGVhcigpfWZ1bmN0aW9uIEwoZSx0KXtjb25zdCBuPUkuZ2V0KGUpO3JldHVybiBuP24uZ2V0KHQpOm51bGx9ZnVuY3Rpb24gQShlLHQsbil7cmV0dXJuey4uLmUsYWN0aW9uOm58fHsuLi5lLmFjdGlvbnNbMF0sdHJpZ2dlcjpmLnB4LlVzZXJBY3Rpb259LGRpc3BhdGNoZXJJZGVudGl0eTp0fX1mdW5jdGlvbiBPKGUsdCxuPVwiYXNjZW5kaW5nXCIpe2NvbnN0IG89ZXx8W107aWYoIXQ/Lmxlbmd0aClyZXR1cm4gbztjb25zdCByPVtdLGk9bmV3IE1hcDt0LmZvckVhY2goKGU9PntpZihlLmtleSlyZXR1cm4gaS5zZXQoZS5rZXksZSk7ci5wdXNoKGUpfSkpO2xldCBzPW8ubWFwKChlPT57Y29uc3R7a2V5OnR9PWU7aWYodCYmaS5oYXModCkpe2NvbnN0IGU9aS5nZXQodCk7cmV0dXJuIGkuZGVsZXRlKHQpLGV9cmV0dXJuIGV9KSk7cmV0dXJuIHMucHVzaCguLi5pLnZhbHVlcygpLC4uLnIpLHM9XCJhc2NlbmRpbmdcIj09PW4/cy5zb3J0KCgoZSx0KT0+KG51bGwhPT1lLnNjb3JlJiZ2b2lkIDAhPT1lLnNjb3JlP2Uuc2NvcmU6MS8wKS0obnVsbCE9PXQuc2NvcmUmJnZvaWQgMCE9PXQuc2NvcmU/dC5zY29yZToxLzApKSk6cy5zb3J0KCgoZSx0KT0+KG51bGwhPT10LnNjb3JlJiZ2b2lkIDAhPT10LnNjb3JlP3Quc2NvcmU6MS8wKS0obnVsbCE9PWUuc2NvcmUmJnZvaWQgMCE9PWUuc2NvcmU/ZS5zY29yZToxLzApKSksc31mdW5jdGlvbiB4KGUpe2NvbnN0IHQ9e307bGV0IG49W107bGV0IG89W107bGV0IHI9dS5Jbml0aWFsO3QuZ2V0U3RhdHVzPSgpPT5yLHQuZ2V0UmVzdWx0QnVmZmVyPSgpPT5uLHQuc2V0UmVzdWx0QnVmZmVyPWU9PntuPWUsbj8ubGVuZ3RoJiZ0Lm9uQ2hhbmdlKCl9LHQuZ2V0UmV2b2tlZEJ1ZmZlcj0oKT0+byx0LnNldFJldm9rZWRCdWZmZXI9ZT0+e289ZSxvPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5vbkNoYW5nZT12O2NvbnN0IGk9e307cmV0dXJuIHQucmVzPWksaS5jbG9zZT0oKT0+e3IhPT11LkNsb3NlJiYocj11LkNsb3NlLHQub25DaGFuZ2UoKSl9LGkub3Blbj0oKT0+e3IhPT11Lk9wZW4mJihyPXUuT3Blbix0Lm9uQ2hhbmdlKCkpfSxpLnJlc3BvbmQ9bj0+e2NvbnN0IG89Tyh0LmdldFJlc3VsdEJ1ZmZlcigpLG4sZSk7dC5zZXRSZXN1bHRCdWZmZXIobyl9LGkucmV2b2tlPSguLi5lKT0+e2NvbnN0IG49bmV3IFNldChlKSxvPXQuZ2V0UmVzdWx0QnVmZmVyKCkuZmlsdGVyKCgoe2tleTplfSk9Pntjb25zdCB0PW4uaGFzKGUpO3JldHVybiB0JiZuLmRlbGV0ZShlKSwhdH0pKTt0LnNldFJlc3VsdEJ1ZmZlcihvKSxuLnNpemUmJih0LmdldFJldm9rZWRCdWZmZXIoKS5mb3JFYWNoKChlPT5uLmFkZChlKSkpLHQuc2V0UmV2b2tlZEJ1ZmZlcihbLi4ubl0pKX0sdH1mdW5jdGlvbiBFKGUsdCxuKXtjb25zdCBvPW5ldyBTZXQ7bGV0IHI9ITE7cmV0dXJue2Nsb3NlOigpPT57cj0hMDtmb3IoY29uc3QgZSBvZiBvKWUoKX0scmVxOntpZDp0LHRvcGljOmUsLi4ubixjb250ZXh0Om4/LmNvbnRleHR8fHt9LG9uQ2xvc2U6ZT0+e28uYWRkKGUpLHImJmUoKX0scmVtb3ZlTGlzdGVuZXI6ZT0+e28uZGVsZXRlKGUpfX19fWZ1bmN0aW9uIFYoKXtyZXR1cm57bmFtZTpmaW4ubWUubmFtZSx1dWlkOmZpbi5tZS51dWlkfX1mdW5jdGlvbiBNKCl7bGV0IGU7dHJ5e2NvbnN0IHQ9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7aWYoIXQ/LmlkZW50aXR5KXJldHVybjtlPXQuaWRlbnRpdHkudXVpZH1jYXRjaChlKXt9cmV0dXJuIGV9Y29uc3QgXz1cImRlcmVnaXN0ZXJlZCBvciBkb2VzIG5vdCBleGlzdFwiLCQ9bmV3IEVycm9yKGBwcm92aWRlciAke199YCkscT1uZXcgRXJyb3IoXCJwcm92aWRlciB3aXRoIG5hbWUgYWxyZWFkeSBleGlzdHNcIiksRz1uZXcgRXJyb3IoXCJiYWQgcGF5bG9hZFwiKSxIPW5ldyBFcnJvcihcInN1YnNjcmlwdGlvbiByZWplY3RlZFwiKSxOPW5ldyBFcnJvcihgY2hhbm5lbCAke199YCksVT1uZXcgTWFwO2Z1bmN0aW9uIGooZSl7Y29uc3QgdD1YKGUpO2lmKHQpcmV0dXJuIHQ7dGhyb3cgTn1mdW5jdGlvbiBYKGUpe2NvbnN0IHQ9VS5nZXQoZSk7aWYodClyZXR1cm4gdH1mdW5jdGlvbiBLKGUsdCl7VS5zZXQoZSx0KX1jb25zdCBKPW5ldyBNYXA7ZnVuY3Rpb24geihlKXtKLmhhcyhlKXx8Si5zZXQoZSxuZXcgTWFwKTtjb25zdCB0PUouZ2V0KGUpO3JldHVybntnZXRSZXF1ZXN0c0ZvcklkZW50aXR5OmU9Pntjb25zdCBuPWZ1bmN0aW9uKGUpe3JldHVybmAke2UudXVpZH06JHtlLm5hbWV9YH0oZSk7cmV0dXJuIHQuaGFzKG4pfHx0LnNldChuLG5ldyBNYXApLHQuZ2V0KG4pfX19YXN5bmMgZnVuY3Rpb24gWihlLHQpe3JldHVybihhd2FpdCBqKGUpKS5kaXNwYXRjaChnLHQpfWZ1bmN0aW9uIFEoe25hbWVzcGFjZWRUb3BpYzplLHRvcGljOnR9KXtjb25zdCBuPUwuYmluZChudWxsLGUpLG89eihlKSxyPVouYmluZChudWxsLGUpO3JldHVybiBhc3luYyhlLGkpPT57aWYoIWV8fCFlLmlkfHwhZS5wcm92aWRlcklkKXtjb25zdCBlPUc7cmV0dXJue2Vycm9yOmUubWVzc2FnZX19Y29uc3R7aWQ6cyxwcm92aWRlcklkOmF9PWUsYz1uKGEpO2lmKCFjKXtjb25zdCBlPSQ7cmV0dXJue2Vycm9yOmUubWVzc2FnZX19Y29uc3QgZD1vLmdldFJlcXVlc3RzRm9ySWRlbnRpdHkoaSk7bGV0IHU9ZC5nZXQoZS5pZCk7dXx8KHU9RSh0LHMsZSksZC5zZXQoZS5pZCx1KSk7Y29uc3QgcD14KCksbD0oKT0+e2NvbnN0IGU9cC5nZXRSZXN1bHRCdWZmZXIoKTtwLnNldFJlc3VsdEJ1ZmZlcihbXSk7Y29uc3QgdD1wLmdldFJldm9rZWRCdWZmZXIoKTtwLnNldFJldm9rZWRCdWZmZXIoW10pO2NvbnN0IG49cC5nZXRTdGF0dXMoKTtyKHtpZDpzLHByb3ZpZGVySWQ6YSxyZXN1bHRzOmUscmV2b2tlZDp0LHN0YXR1czpufSl9O2xldCBmPSEwLHc9ITE7cC5vbkNoYW5nZT0oKT0+e2lmKGYpcmV0dXJuIGY9ITEsdm9pZCBsKCk7d3x8KHc9ITAsc2V0VGltZW91dCgoKCk9Pnt3PSExLGwoKX0pLDEwMCkpfTt0cnl7Y29uc3R7cmVzdWx0czplLGNvbnRleHQ6dH09YXdhaXQgYy5vblVzZXJJbnB1dCh1LnJlcSxwLnJlcyksbj1wLmdldFN0YXR1cygpO3JldHVybntpZDpzLHByb3ZpZGVySWQ6YSxzdGF0dXM6bixyZXN1bHRzOmUsY29udGV4dDp0fX1jYXRjaChlKXtyZXR1cm57aWQ6cyxwcm92aWRlcklkOmEsZXJyb3I6ZS5tZXNzYWdlfX19fWFzeW5jIGZ1bmN0aW9uIFkoZSx0LG4pe2NvbnN0IG89bnx8YXdhaXQgaihlKSxyPVYoKSxpPXtpZGVudGl0eTpyLC4uLnQsb25Vc2VySW5wdXQ6dm9pZCAwLG9uUmVzdWx0RGlzcGF0Y2g6dm9pZCAwfSxzPWF3YWl0IG8uZGlzcGF0Y2goXCIyXCIsaSk7cmV0dXJuIGF3YWl0IGIoZSx7aWRlbnRpdHk6ciwuLi50fSksc31hc3luYyBmdW5jdGlvbiBlZShlLHQpe2NvbnN0IG49YXdhaXQgaihlKTtyZXR1cm4gYXdhaXQgbi5kaXNwYXRjaChcIjNcIix0KSxEKGUsdCl9YXN5bmMgZnVuY3Rpb24gdGUoZSx0LG4sbyl7Y29uc3Qgcj1BKG4sVigpLG8pLGk9TChlLHQpO2lmKGkpe2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6ZX09aTtpZighZSlyZXR1cm47cmV0dXJuIGUocil9Y29uc3Qgcz17cHJvdmlkZXJJZDp0LHJlc3VsdDpyfTtyZXR1cm4oYXdhaXQgaihlKSkuZGlzcGF0Y2goaCxzKX1hc3luYyBmdW5jdGlvbiBuZShlLHQpe2NvbnN0IG49ey4uLnQsY29udGV4dDp0Py5jb250ZXh0fHx7fX0sbz17fSxyPWFzeW5jIGZ1bmN0aW9uKihlLHQse3NldFN0YXRlOm59KXtjb25zdCBvPWF3YWl0IGooZSk7Zm9yKDs7KXtjb25zdCBlPWF3YWl0IG8uZGlzcGF0Y2goXCIxXCIsdCkscj1lLmVycm9yO2lmKHIpdGhyb3cgbmV3IEVycm9yKHIpO2NvbnN0IGk9ZTtpZih0LmlkPWkuaWQsbihpLnN0YXRlKSxpLmRvbmUpcmV0dXJuIGkudmFsdWU7eWllbGQgaS52YWx1ZX19KGUsbix7c2V0U3RhdGU6ZT0+e28uc3RhdGU9ZX19KTtsZXQgaT1hd2FpdCByLm5leHQoKTtyZXR1cm4gby5pZD1uLmlkLG8uY2xvc2U9KCk9PnshYXN5bmMgZnVuY3Rpb24oZSx0KXsoYXdhaXQgaihlKSkuZGlzcGF0Y2goeSx7aWQ6dH0pfShlLG8uaWQpfSxvLm5leHQ9KCk9PntpZihpKXtjb25zdCBlPWk7cmV0dXJuIGk9dm9pZCAwLGV9cmV0dXJuIHIubmV4dCgpfSxvfWFzeW5jIGZ1bmN0aW9uIG9lKGUpe3JldHVybihhd2FpdCBqKGUpKS5kaXNwYXRjaChcIjRcIixudWxsKX1hc3luYyBmdW5jdGlvbiByZShlKXtjb25zdCB0PWF3YWl0IGooZSk7dmFyIG47bj1lLFUuZGVsZXRlKG4pLEYoZSksYXdhaXQgdC5kaXNjb25uZWN0KCl9ZnVuY3Rpb24gaWUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj16KHQpO3JldHVybiBhc3luYyBvPT57aWYoIVgodCkpcmV0dXJuO2NvbnN0IHI9bi5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KG8pO2Zvcihjb25zdHtyZXE6ZSxjbG9zZTp0fW9mIHIudmFsdWVzKCkpdCgpLHIuZGVsZXRlKGUuaWQpO0sodCwoYXN5bmMgZT0+e2NvbnN0e25hbWVzcGFjZWRUb3BpYzp0fT1lLG49YXdhaXQgc2UoZSk7Zm9yKGNvbnN0IGUgb2YgQih0KSlhd2FpdCBZKHQsZSxuKTtyZXR1cm4gbn0pKGUpKX19YXN5bmMgZnVuY3Rpb24gc2UoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1TKHQpLG89YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7Zm9yKGxldCB0PTA7dDw1MDt0KyspdHJ5e3JldHVybiBhd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7d2FpdDohMX0pfWNhdGNoKGUpe2lmKDQ5PT09dCl0aHJvdyBlO2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsMWUzKSkpfX0obik7cmV0dXJuIG8ucmVnaXN0ZXIoZyxRKGUpKSxvLnJlZ2lzdGVyKHksZnVuY3Rpb24oZSl7Y29uc3QgdD16KGUpO3JldHVybihlLG4pPT57Y29uc3Qgbz10LmdldFJlcXVlc3RzRm9ySWRlbnRpdHkobikscj1vLmdldChlLmlkKTtyJiYoci5jbG9zZSgpLG8uZGVsZXRlKGUuaWQpKX19KHQpKSxvLnJlZ2lzdGVyKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCBvPUwoZSx0LnByb3ZpZGVySWQpO2lmKCFvKXJldHVybjtjb25zdHtvblJlc3VsdERpc3BhdGNoOnJ9PW87cmV0dXJuIHI/KHQucmVzdWx0LmRpc3BhdGNoZXJJZGVudGl0eT1uLHIodC5yZXN1bHQpKTp2b2lkIDB9fSh0KSksby5vbkRpc2Nvbm5lY3Rpb24oaWUoZSkpLG99YXN5bmMgZnVuY3Rpb24gYWUoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fHcsbj0oXCJzdHJpbmdcIj09dHlwZW9mIGU/bnVsbDplPy51dWlkKXx8TSgpLG89bShuLHQpLHI9e3RvcGljOnQsbmFtZXNwYWNlOm4sbmFtZXNwYWNlZFRvcGljOm99O2xldCBpPVgobyk7cmV0dXJuIGl8fChpPXNlKHIpLEsobyxpKSxhd2FpdCBpKSx7Z2V0QWxsUHJvdmlkZXJzOm9lLmJpbmQobnVsbCxvKSxyZWdpc3RlcjpZLmJpbmQobnVsbCxvKSxzZWFyY2g6bmUuYmluZChudWxsLG8pLGRlcmVnaXN0ZXI6ZWUuYmluZChudWxsLG8pLGRpc3BhdGNoOnRlLmJpbmQobnVsbCxvKSxkaXNjb25uZWN0OnJlLmJpbmQobnVsbCxvKX19Y29uc3QgY2U9bmV3IE1hcDtmdW5jdGlvbiBkZShlKXtjb25zdCB0PXVlKGUpO2lmKHQpcmV0dXJuIHQ7dGhyb3cgTn1mdW5jdGlvbiB1ZShlKXtjb25zdCB0PWNlLmdldChlKTtpZih0KXJldHVybiB0fWNvbnN0IHBlPW5ldyBNYXA7ZnVuY3Rpb24gbGUoZSx0KXtwZS5oYXMoZSl8fHBlLnNldChlLG5ldyBTZXQpLHBlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gZmUoZSx0KXtjb25zdCBuPXBlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1mdW5jdGlvbiB3ZShlKXtyZXR1cm5bLi4uQihlKV0ubWFwKChlPT4oey4uLmUsb25Vc2VySW5wdXQ6dm9pZCAwLG9uUmVzdWx0RGlzcGF0Y2g6dm9pZCAwfSkpKX1hc3luYyBmdW5jdGlvbiBnZShlLHQpe2lmKEwoZSx0LmlkKSl0aHJvdyBuZXcgRXJyb3IoXCJwcm92aWRlciB3aXRoIG5hbWUgYWxyZWFkeSBleGlzdHNcIik7Y29uc3Qgbj1WKCk7YXdhaXQgYihlLHtpZGVudGl0eTpuLC4uLnR9KX1mdW5jdGlvbiBoZShlLHQpe0QoZSx0KX1hc3luYyBmdW5jdGlvbiB5ZShlLHQsbixvKXtjb25zdCByPUwoZSx0KTtpZighcil0aHJvdyAkO2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6aX09cjtpZighaSlyZXR1cm47cmV0dXJuIGkoQShuLFYoKSxvKSl9YXN5bmMgZnVuY3Rpb24qdmUoZSx0LG4pe2NvbnN0IG89ZnVuY3Rpb24oZSx0KXtjb25zdCBuPVtdLG89W10scj1bXSxpPVtdO2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9eChzLnNjb3JlT3JkZXIpLGE9e3Jlc3VsdHM6W10scHJvdmlkZXI6e2lkOnMuaWQsaWRlbnRpdHk6cy5pZGVudGl0eSx0aXRsZTpzLnRpdGxlLHNjb3JlT3JkZXI6cy5zY29yZU9yZGVyLGljb246cy5pY29uLGRpc3BhdGNoRm9jdXNFdmVudHM6cy5kaXNwYXRjaEZvY3VzRXZlbnRzfX07bi5wdXNoKGEpLG8ucHVzaChlKTtjb25zdCBjPShhc3luYygpPT57dHJ5e2NvbnN0e3Jlc3VsdHM6bixjb250ZXh0Om99PWF3YWl0IHMub25Vc2VySW5wdXQodCxlLnJlcyk7YS5yZXN1bHRzPU8oYS5yZXN1bHRzLG4pLGEuY29udGV4dD17Li4uYS5jb250ZXh0LC4uLm99fWNhdGNoKGUpe2EuZXJyb3I9ZX19KSgpO2MuZmluYWxseSgoKCk9PntjLmRvbmU9ITB9KSksaS5wdXNoKGMpLHIucHVzaChyLmxlbmd0aCl9cmV0dXJue3Byb3ZpZGVyUmVzcG9uc2VzOm4sbGlzdGVuZXJSZXNwb25zZXM6byxvcGVuTGlzdGVuZXJSZXNwb25zZXM6cixpbml0aWFsUmVzcG9uc2VQcm9taXNlczppfX0odC50YXJnZXRzP3QudGFyZ2V0cy5tYXAoKHQ9PkwoZSx0KSkpLmZpbHRlcigoZT0+ISFlKSk6Wy4uLkIoZSkuZmlsdGVyKChlPT4hZS5oaWRkZW4pKV0sdCkse3Byb3ZpZGVyUmVzcG9uc2VzOnIsbGlzdGVuZXJSZXNwb25zZXM6aX09bztsZXR7b3Blbkxpc3RlbmVyUmVzcG9uc2VzOnMsaW5pdGlhbFJlc3BvbnNlUHJvbWlzZXM6YX09byxjPWYuRGUuRmV0Y2hpbmc7Y29uc3QgZD1lPT57Yz1lLG4uc2V0U3RhdGUoYyl9O2xldCBwLGw9ITE7dC5vbkNsb3NlKCgoKT0+e2w9ITAscCYmcCgpfSkpO2Rve2xldCBlPSExO2lmKGEubGVuZ3RoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGEpbi5kb25lP2U9ITA6dC5wdXNoKG4pO2E9dCxhLmxlbmd0aHx8KGQoZi5EZS5GZXRjaGVkKSxlPSEwKX1sZXQgdCxuPSExO2NvbnN0IG89KCk9PntuPSEwLHQmJnQoKX0sdz1bXTtmb3IoY29uc3QgdCBvZiBzKXtjb25zdCBuPWlbdF0scz1yW3RdLGE9bi5nZXRTdGF0dXMoKTsoYT09PXUuT3Blbnx8Yz09PWYuRGUuRmV0Y2hpbmcmJmE9PT11LkluaXRpYWwpJiYody5wdXNoKHQpLG4ub25DaGFuZ2U9byk7Y29uc3QgZD1uLmdldFJlc3VsdEJ1ZmZlcigpO2QubGVuZ3RoJiYobi5zZXRSZXN1bHRCdWZmZXIoW10pLHMucmVzdWx0cz1PKHMucmVzdWx0cyxkKSxlPSEwKTtjb25zdCBwPW4uZ2V0UmV2b2tlZEJ1ZmZlcigpO2lmKHAubGVuZ3RoKXtuLnNldFJldm9rZWRCdWZmZXIoW10pO2NvbnN0IHQ9bmV3IFNldChwKTtzLnJlc3VsdHM9cy5yZXN1bHRzLmZpbHRlcigoKHtrZXk6ZX0pPT4hdC5oYXMoZSkpKSxlPSEwfX1pZihzPXcsZSYmKHlpZWxkIHIpLGwpYnJlYWs7bnx8KHMubGVuZ3RofHxhLmxlbmd0aCkmJmF3YWl0IFByb21pc2UucmFjZShbLi4uYSxuZXcgUHJvbWlzZSgoZT0+e3Q9ZX0pKSxuZXcgUHJvbWlzZSgoZT0+e3A9ZX0pKV0pfXdoaWxlKHMubGVuZ3RofHxhLmxlbmd0aCk7cmV0dXJuIGQoZi5EZS5Db21wbGV0ZSkscn1sZXQgbWU9MDtmdW5jdGlvbiBTZSh7bmFtZXNwYWNlZFRvcGljOmUsdG9waWM6dH0sbil7bWUrPTE7Y29uc3Qgbz1FKHQsbWUudG9TdHJpbmcoKSxuKSxyPXZlKGUsby5yZXEse3NldFN0YXRlOmU9PntyLnN0YXRlPWV9fSk7cmV0dXJuIHIuaWQ9bWUudG9TdHJpbmcoKSxyLmNsb3NlPW8uY2xvc2Usci5zdGF0ZT1mLkRlLkZldGNoaW5nLHJ9Y29uc3QgUGU9bmV3IE1hcDtmdW5jdGlvbiBDZShlLHQpe3JldHVybmAke2V9OiR7dH1gfWZ1bmN0aW9uIGtlKGUpe3JldHVybiBhc3luYyh0LC4uLm4pPT57aWYoIXQpcmV0dXJue2Vycm9yOkcubWVzc2FnZX07bGV0IG87aWYodC5pZClvPUNlKGUubmFtZXNwYWNlZFRvcGljLHQuaWQpO2Vsc2V7Y29uc3Qgbj1TZShlLHQpO289Q2UoZS5uYW1lc3BhY2VkVG9waWMsbi5pZCksdC5pZD1uLmlkLFBlLnNldChvLHtnZW5lcmF0b3I6bn0pfWNvbnN0IHI9UGUuZ2V0KG8pO2NsZWFyVGltZW91dChyLnRpbWVvdXQpO2NvbnN0IGk9YXdhaXQgci5nZW5lcmF0b3IubmV4dCgpO3JldHVybiByLnRpbWVvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e1BlLmRlbGV0ZShlKX0pLDFlNCl9KG8pLHsuLi5pLGlkOnQuaWQsc3RhdGU6ci5nZW5lcmF0b3Iuc3RhdGV9fX1mdW5jdGlvbiBXZShlLHQsbil7cmV0dXJuIGRlKGUpLmRpc3BhdGNoKHQseSx7aWQ6bn0pfWZ1bmN0aW9uIFJlKGUpe3JldHVybiB0PT5mdW5jdGlvbihlLHQpe2NvbnN0IG49Q2UoZSx0KSxvPVBlLmdldChuKTtvJiZvLmdlbmVyYXRvci5jbG9zZSgpfShlLHQuaWQpfWFzeW5jIGZ1bmN0aW9uIFRlKGUsdCx7aWQ6bixxdWVyeTpvLGNvbnRleHQ6cix0YXJnZXRzOml9KXtjb25zdCBzPWRlKGUpLGE9e2lkOm4scXVlcnk6byxjb250ZXh0OnIsdGFyZ2V0czppLHByb3ZpZGVySWQ6dC5pZH0sYz1hd2FpdCBzLmRpc3BhdGNoKHQuaWRlbnRpdHksZyxhKSxkPWMuZXJyb3I7aWYoZCl0aHJvdyBuZXcgRXJyb3IoZCk7cmV0dXJuIGN9Y29uc3QgSWU9bmV3IE1hcDtmdW5jdGlvbiBiZShlLHQsbil7cmV0dXJuYCR7ZX06JHt0Lm5hbWV9OiR7dC51dWlkfToke259YH1jb25zdCBEZT1uZXcgTWFwO2Z1bmN0aW9uIEJlKGUsdCxuKXtyZXR1cm5gJHtlfToke3R9OiR7bn1gfWZ1bmN0aW9uIEZlKGUsdCl7Y29uc3Qgbj1iZS5iaW5kKG51bGwsZSx0LmlkZW50aXR5KSxvPVdlLmJpbmQobnVsbCxlLHQuaWRlbnRpdHkpLHI9VGUuYmluZChudWxsLGUsdCk7cmV0dXJuIGFzeW5jKGkscyk9Pntjb25zdCBhPW4oaS5pZCk7aWYoIUllLmhhcyhhKSl7Y29uc3QgZT0oKT0+e28oaS5pZCksSWUuZGVsZXRlKGEpfTtJZS5zZXQoYSxlKSxpLm9uQ2xvc2UoZSl9Y29uc3QgYz1CZShlLHQuaWQsaS5pZCksZD0oKT0+e0RlLmRlbGV0ZShjKSxzLmNsb3NlKCl9O2kub25DbG9zZShkKSxEZS5zZXQoYywoZT0+e2UucmVzdWx0cz8ubGVuZ3RoJiZzLnJlc3BvbmQoZS5yZXN1bHRzKSxlLnJldm9rZWQ/Lmxlbmd0aCYmcy5yZXZva2UoLi4uZS5yZXZva2VkKSxlLnN0YXR1cz09PXUuT3BlbiYmcy5vcGVuKCksZS5zdGF0dXM9PT11LkNsb3NlJiZkKCl9KSk7Y29uc3QgcD1hd2FpdCByKGkpO3JldHVybiBwLnN0YXR1cz09PXUuT3BlbiYmcy5vcGVuKCkscC5zdGF0dXMhPT11LkNsb3NlJiZwLnN0YXR1cyE9PXUuSW5pdGlhbHx8ZCgpLHB9fWZ1bmN0aW9uIExlKGUsdCl7cmV0dXJuIGFzeW5jIG49Pntjb25zdCBvPWRlKGUpLHI9e3Byb3ZpZGVySWQ6dC5pZCxyZXN1bHQ6bn07cmV0dXJuIG8uZGlzcGF0Y2godC5pZGVudGl0eSxoLHIpfX1jb25zdCBBZT1uZXcgTWFwO2Z1bmN0aW9uIE9lKGUsdCl7cmV0dXJuYCR7ZX0tJHt0Lm5hbWV9LSR7dC51dWlkfWB9ZnVuY3Rpb24geGUoZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQuaWQpcmV0dXJuIHZvaWQgbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHQpKTtpZihMKGUsdC5pZCkpdGhyb3cgcTtyZXR1cm4gdC5pZGVudGl0eT1uLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1PZShlLHQuaWRlbnRpdHkpO0FlLmhhcyhuKXx8QWUuc2V0KG4sW10pLEFlLmdldChuKS5wdXNoKHQuaWQpLGF3YWl0IGIoZSx7Li4udCxvblVzZXJJbnB1dDpGZShlLHQpLG9uUmVzdWx0RGlzcGF0Y2g6TGUoZSx0KX0pfShlLHQpLHt3b3Jrc3BhY2VWZXJzaW9uOmkudTAsY2xpZW50QVBJVmVyc2lvbjp0LmNsaWVudEFQSVZlcnNpb259fX1mdW5jdGlvbiBFZShlKXtyZXR1cm4gdD0+e3QmJmZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1MKGUsdCk7aWYoIW4pcmV0dXJuO2NvbnN0IG89T2UoZSxuLmlkZW50aXR5KSxyPUFlLmdldChvKTtpZihyKXtjb25zdCBuPXIuZmluZEluZGV4KChlPT5lPT09dCkpOy0xIT09biYmKHIuc3BsaWNlKG4sMSksRChlLHQpKX19KGUsdCl9fWNvbnN0IFZlPW5ldyBNYXA7ZnVuY3Rpb24gTWUoZSx0KXtWZS5oYXMoZSl8fFZlLnNldChlLG5ldyBTZXQpLFZlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gX2UoZSx0KXtjb25zdCBuPVZlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1mdW5jdGlvbiAkZShlKXtyZXR1cm4gYXN5bmMgdD0+eyFmdW5jdGlvbihlLHQpe2NvbnN0IG49T2UoZSx0KSxvPUFlLmdldChuKTtpZihvKXtmb3IoY29uc3QgdCBvZiBvKUQoZSx0KTtBZS5kZWxldGUobil9fShlLHQpO2NvbnN0IG49VmUuZ2V0KGUpO24mJm4uZm9yRWFjaCgoZT0+ZSh0KSkpfX1hc3luYyBmdW5jdGlvbiBxZShlKXtjb25zdHtuYW1lc3BhY2VkVG9waWM6dH09ZSxuPVMoZS5uYW1lc3BhY2VkVG9waWMpLG89YXdhaXQocj1uLGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY3JlYXRlKHIpKTt2YXIgcjtyZXR1cm4gby5vbkNvbm5lY3Rpb24oZnVuY3Rpb24oe25hbWVzcGFjZWRUb3BpYzplfSl7cmV0dXJuIGFzeW5jIHQ9Pntjb25zdCBuPXBlLmdldChlKTtpZihuKWZvcihjb25zdCBlIG9mIG4paWYoIWF3YWl0IGUodCkpdGhyb3cgSH19KGUpKSxvLm9uRGlzY29ubmVjdGlvbigkZSh0KSksby5yZWdpc3Rlcih5LFJlKHQpKSxvLnJlZ2lzdGVyKGcsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9Pntjb25zdCBuPUJlKGUsdC5wcm92aWRlcklkLHQuaWQpLG89RGUuZ2V0KG4pO28mJm8odCl9fSh0KSksby5yZWdpc3RlcihcIjJcIix4ZSh0KSksby5yZWdpc3RlcihcIjNcIixFZSh0KSksby5yZWdpc3RlcihcIjRcIixmdW5jdGlvbihlKXtyZXR1cm4gYXN5bmMoKT0+d2UoZSl9KHQpKSxvLnJlZ2lzdGVyKFwiMVwiLGtlKGUpKSxvLnJlZ2lzdGVyKGgsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCBvPUwoZSx0LnByb3ZpZGVySWQpO2lmKCFvKXRocm93ICQ7Y29uc3R7b25SZXN1bHREaXNwYXRjaDpyfT1vO3JldHVybiByPyh0LnJlc3VsdC5kaXNwYXRjaGVySWRlbnRpdHk9bixyKHQucmVzdWx0KSk6dm9pZCAwfX0odCkpLG99YXN5bmMgZnVuY3Rpb24gR2UoZSl7Y29uc3QgdD1kZShlKTt2YXIgbjtuPWUsY2UuZGVsZXRlKG4pLGF3YWl0IHQuZGVzdHJveSgpLEYoZSl9YXN5bmMgZnVuY3Rpb24gSGUoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fHcsbj1NKCksbz1tKG4sdCkscj17dG9waWM6dCxuYW1lc3BhY2U6bixuYW1lc3BhY2VkVG9waWM6b307bGV0IGk9dWUobyk7aXx8KGk9YXdhaXQgcWUociksZnVuY3Rpb24oZSx0KXtjZS5zZXQoZSx0KX0obyxpKSk7Y29uc3Qgcz1mZS5iaW5kKG51bGwsbyksYT1fZS5iaW5kKG51bGwsbyksYz1rLmJpbmQobnVsbCxvKSxkPVQuYmluZChudWxsLG8pO3JldHVybntnZXRBbGxQcm92aWRlcnM6d2UuYmluZChudWxsLG8pLHNlYXJjaDpTZS5iaW5kKG51bGwscikscmVnaXN0ZXI6Z2UuYmluZChudWxsLG8pLGRlcmVnaXN0ZXI6aGUuYmluZChudWxsLG8pLG9uU3Vic2NyaXB0aW9uOmxlLmJpbmQobnVsbCxvKSxvbkRpc2Nvbm5lY3Q6TWUuYmluZChudWxsLG8pLG9uUmVnaXN0ZXI6Qy5iaW5kKG51bGwsbyksb25EZXJlZ2lzdGVyOlIuYmluZChudWxsLG8pLGRpc3BhdGNoOnllLmJpbmQobnVsbCxyKSxkaXNjb25uZWN0OkdlLmJpbmQobnVsbCxvKSxyZW1vdmVMaXN0ZW5lcjplPT57cyhlKSxhKGUpLGMoZSksZChlKX19fWNvbnN0e2NyZWF0ZTpOZX09cix7c3Vic2NyaWJlOlVlfT1vLGplPXtjcmVhdGU6TmUsc3Vic2NyaWJlOlVlLGRlZmF1bHRUb3BpYzpcImFsbFwifSxYZT0oKT0+e3dpbmRvdy5zZWFyY2g9amV9LEtlPWU9Pntjb25zdCB0PSgpPT57WGUoKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfTtyZXR1cm4gdH07aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyl7WGUoKTtjb25zdCBlPVwibG9hZFwiLHQ9S2UoZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZSx0KTtjb25zdCBuPVwiRE9NQ29udGVudExvYWRlZFwiLG89S2Uobik7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIobixvKX1jb25zdCBKZT1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIHplKCl7YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7SmUuc2V0KGUsYXdhaXQgVWUoe3RvcGljOmUsdXVpZDpwLnE5LldvcmtzcGFjZX0pKX0oYyl9bGV0IFplO2FzeW5jIGZ1bmN0aW9uIFFlKGUpe3JldHVybiBhd2FpdCBhc3luYyBmdW5jdGlvbigpe3JldHVybiBaZXx8KFplPXplKCkpLFplfSgpLEplLmdldChlKX1jb25zdCBZZT1hc3luYyBlPT57aWYoIWUuaWNvbil0aHJvdyBuZXcgRXJyb3IoYCR7ZS5pZH0gcHJvdmlkZXIgbmVlZHMgdG8gaGF2ZSBpY29uIHByb3BlcnR5IGRlZmluZWQuYCk7YXdhaXQoMCxhLmFCKSgpO2NvbnN0IHQ9YXdhaXQgUWUoYyk7dHJ5e2UuY2xpZW50QVBJVmVyc2lvbj1pLnUwO2NvbnN0IG49YXdhaXQgdC5yZWdpc3RlcihlKTtyZXR1cm4oMCxzLmNrKSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOm4/LndvcmtzcGFjZVZlcnNpb259KSxufWNhdGNoKGUpe3Rocm93KDAscy5jaykoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplLm1lc3NhZ2V9KSxlfX0sZXQ9YXN5bmMgZT0+e2F3YWl0KDAsYS5hQikoKTtyZXR1cm4oYXdhaXQgUWUoYykpLmRlcmVnaXN0ZXIoZSl9O2FzeW5jIGZ1bmN0aW9uIHR0KCl7cmV0dXJuKGF3YWl0KDAsYS5YbCkoKSkuZGlzcGF0Y2goYS5XRi5TaG93SG9tZSx2b2lkIDApfWFzeW5jIGZ1bmN0aW9uIG50KCl7cmV0dXJuKGF3YWl0KDAsYS5YbCkoKSkuZGlzcGF0Y2goYS5XRi5IaWRlSG9tZSx2b2lkIDApfX0sMjk4OihlLHQsbik9PntuLmQodCx7cDooKT0+by5weCx3OigpPT5vLnd0fSk7dmFyIG89bigzMTYpfSw0Mjc6KGUsdCxuKT0+e3ZhciBvO24uZCh0LHt2OigpPT5vfSksZnVuY3Rpb24oZSl7ZS5BY3Rpb25CdXR0b249XCJBY3Rpb25CdXR0b25cIixlLkRyb3Bkb3duQnV0dG9uPVwiRHJvcGRvd25CdXR0b25cIn0ob3x8KG89e30pKX0sNzU4OihlLHQsbik9Pnt2YXIgbyxyLGk7bi5kKHQse1B0OigpPT5vLGVsOigpPT5pLHlXOigpPT5yfSksZnVuY3Rpb24oZSl7ZS5TdWdnZXN0aW9uPVwic3VnZ2VzdGlvblwifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuQ29udGFjdD1cIkNvbnRhY3RcIixlLkN1c3RvbT1cIkN1c3RvbVwiLGUuTGlzdD1cIkxpc3RcIixlLlBsYWluPVwiUGxhaW5cIixlLlNpbXBsZVRleHQ9XCJTaW1wbGVUZXh0XCIsZS5Mb2FkaW5nPVwiTG9hZGluZ1wiLGUuRXJyb3I9XCJFcnJvclwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuTXVsdGlTZWxlY3Q9XCJNdWx0aVNlbGVjdFwifShpfHwoaT17fSkpfSwxMTQ6KGUsdCxuKT0+e3ZhciBvLHI7bi5kKHQse0w6KCk9Pm8sVDooKT0+cn0pLGZ1bmN0aW9uKGUpe2UuU25hcHNob3Q9XCJzbmFwc2hvdFwiLGUuTWFuaWZlc3Q9XCJtYW5pZmVzdFwiLGUuVmlldz1cInZpZXdcIixlLkV4dGVybmFsPVwiZXh0ZXJuYWxcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLkxhbmRpbmdQYWdlPVwibGFuZGluZ1BhZ2VcIixlLkFwcEdyaWQ9XCJhcHBHcmlkXCJ9KHJ8fChyPXt9KSl9LDEwOTooZSx0LG4pPT57bi5kKHQse0dvOigpPT5yLFpKOigpPT5zLGJJOigpPT5pLHA2OigpPT5vfSk7Y29uc3Qgbz17Q29udGFpbmVyOlwiQ29udGFpbmVyXCIsQnV0dG9uOlwiQnV0dG9uXCJ9LHI9e1RleHQ6XCJUZXh0XCIsSW1hZ2U6XCJJbWFnZVwiLExpc3Q6XCJMaXN0XCJ9LGk9ey4uLm8sLi4ucn07dmFyIHM7IWZ1bmN0aW9uKGUpe2UuUHJpbWFyeT1cInByaW1hcnlcIixlLlNlY29uZGFyeT1cInNlY29uZGFyeVwiLGUuVGV4dE9ubHk9XCJ0ZXh0T25seVwifShzfHwocz17fSkpfSw1Mjg6KGUsdCxuKT0+e24ucih0KSxuLmQodCx7QXBwTWFuaWZlc3RUeXBlOigpPT5zLkwsU3RvcmVmcm9udFRlbXBsYXRlOigpPT5zLlQsZGVyZWdpc3RlcjooKT0+ZyxoaWRlOigpPT5oLHJlZ2lzdGVyOigpPT53LHNob3c6KCk9Pnl9KTt2YXIgbz1uKDUzMikscj1uKDQzNiksaT1uKDgyKSxzPW4oMTE0KSxhPW4oNjc4KTtsZXQgYyxkPSExO2FzeW5jIGZ1bmN0aW9uIHUoZSx0LG4pe2NvbnN0IG89YXdhaXQoMCxyLkRtKSgpO3RyeXtyZXR1cm4gYXdhaXQgby5kaXNwYXRjaChlLmFjdGlvbixlLnBheWxvYWQpfWNhdGNoKHIpe2lmKC0xIT09ci50b1N0cmluZygpLmluZGV4T2YoZS5hY3Rpb24pKXJldHVybiBkPSEwLGF3YWl0IG8uZGlzcGF0Y2godC5hY3Rpb24sdC5wYXlsb2FkKSxuO3Rocm93IHJ9fWNvbnN0IHA9bmV3IE1hcCxsPWU9PntpZighcC5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IFByb3ZpZGVyIHdpdGggaWQgJHtlfSBpcyBub3QgcmVnaXN0ZXJlZGApO3JldHVybiBwLmdldChlKX0sZj1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCgwLHIuWGwpKCk7aWYocC5oYXMoZS5pZCkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IHByb3ZpZGVyIHdpdGggaWQgJHtlLmlkfSBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtyZXR1cm4gcC5zZXQoZS5pZCxlKSwoZT0+e2UuaXNTdG9yZWZyb250QWN0aW9uc1JlZ2lzdGVyZWR8fChlLmlzU3RvcmVmcm9udEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzLChlPT5sKGUpLmdldEFwcHMoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXIsKGU9PmwoZSkuZ2V0Rm9vdGVyKCkpKSxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2UsKGU9PmwoZSkuZ2V0TGFuZGluZ1BhZ2UoKSkpLGUucmVnaXN0ZXIoci5XRi5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uLChlPT5sKGUpLmdldE5hdmlnYXRpb24oKSkpLGUucmVnaXN0ZXIoci5XRi5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHAsKCh7aWQ6ZSxhcHA6dH0pPT5sKGUpLmxhdW5jaEFwcCh0KSkpKX0pKHQpLGUuY2xpZW50QVBJVmVyc2lvbj1hLnUwLHUoe2FjdGlvbjpyLldGLlJlZ2lzdGVyUHJvdmlkZXIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOmkubFAuU3RvcmVmcm9udCxpbmZvOmV9fSx7YWN0aW9uOnIuV0YuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXIscGF5bG9hZDplfSx7d29ya3NwYWNlVmVyc2lvbjpcInVua25vd25cIn0pfSx3PWU9PihjPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQgZihlKTsoMCxvLmQ5KSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOm4/LndvcmtzcGFjZVZlcnNpb259KSx0KHtjbGllbnRBUElWZXJzaW9uOmEudTAsd29ya3NwYWNlVmVyc2lvbjpuLndvcmtzcGFjZVZlcnNpb258fFwiXCJ9KX1jYXRjaChlKXsoMCxvLmQ5KSh7YWxsb3dlZDohMSxyZWplY3Rpb25Db2RlOmUubWVzc2FnZX0pLG4oZSl9fSkpLGMpLGc9YXN5bmMgZT0+KGF3YWl0IGMscC5kZWxldGUoZSksYXdhaXQoMCxyLmFCKSgpLHUoe2FjdGlvbjpyLldGLkRlcmVnaXN0ZXJQcm92aWRlcixwYXlsb2FkOntwcm92aWRlclR5cGU6aS5sUC5TdG9yZWZyb250LGlkOmV9fSx7YWN0aW9uOnIuV0YuRGVyZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcixwYXlsb2FkOmV9KSksaD1hc3luYygpPT4oYXdhaXQgYyxhd2FpdCgwLHIuYUIpKCksdSh7YWN0aW9uOnIuV0YuSGlkZVByb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuSGlkZVN0b3JlZnJvbnR9KSkseT1hc3luYygpPT4oYXdhaXQgYyxhd2FpdCgwLHIuYUIpKCksdSh7YWN0aW9uOnIuV0YuU2hvd1Byb3ZpZGVyV2luZG93LHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnR9fSx7YWN0aW9uOnIuV0YuU2hvd1N0b3JlZnJvbnR9KSl9LDQzNjooZSx0LG4pPT57bi5kKHQse1dGOigpPT5zLERtOigpPT5hLFhsOigpPT5wLGFCOigpPT51fSk7dmFyIG89big2NzgpO2NvbnN0IHI9by5BeCYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7dmFyIGk9bigxMjEpO3ZhciBzOyFmdW5jdGlvbihlKXtlLlJlZ2lzdGVyUHJvdmlkZXI9XCJyZWdpc3Rlci1wcm92aWRlclwiLGUuRGVyZWdpc3RlclByb3ZpZGVyPVwiZGVyZWdpc3Rlci1wcm92aWRlclwiLGUuQ3JlYXRlUHJvdmlkZXJXaW5kb3c9XCJjcmVhdGUtcHJvdmlkZXItd2luZG93XCIsZS5HZXRQcm92aWRlcnM9XCJnZXQtcHJvdmlkZXJzXCIsZS5TaG93UHJvdmlkZXJXaW5kb3c9XCJzaG93LXByb3ZpZGVyLXdpbmRvd1wiLGUuSGlkZVByb3ZpZGVyV2luZG93PVwiaGlkZS1wcm92aWRlci13aW5kb3dcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckFwcHM9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1hcHBzXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJMYW5kaW5nUGFnZT1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWxhbmRpbmctcGFnZVwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyRm9vdGVyPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItZm9vdGVyXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbmF2aWdhdGlvblwiLGUuTGF1bmNoU3RvcmVmcm9udFByb3ZpZGVyQXBwPVwibGF1bmNoLXN0b3JlZnJvbnQtcHJvdmlkZXItYXBwXCIsZS5TaG93SG9tZT1cInNob3ctaG9tZVwiLGUuSGlkZUhvbWU9XCJoaWRlLWhvbWVcIixlLkFzc2lnbkhvbWVTZWFyY2hDb250ZXh0PVwiYXNzaWduLWhvbWUtc2VhcmNoLWNvbnRleHRcIixlLkdldExlZ2FjeVBhZ2VzPVwiZ2V0LWxlZ2FjeS1wYWdlc1wiLGUuR2V0TGVnYWN5V29ya3NwYWNlcz1cImdldC1sZWdhY3ktd29ya3NwYWNlc1wiLGUuR2V0Q29tcHV0ZWRQbGF0Zm9ybVRoZW1lPVwiZ2V0LWNvbXB1dGVkLXBsYXRmb3JtLXRoZW1lXCIsZS5SZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcj1cInJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJkZXJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixlLkhpZGVTdG9yZWZyb250PVwiaGlkZS1zdG9yZWZyb250XCIsZS5TaG93U3RvcmVmcm9udD1cInNob3ctc3RvcmVmcm9udFwifShzfHwocz17fSkpO2NvbnN0IGE9ZnVuY3Rpb24oZSl7bGV0IHQ7cmV0dXJuKCk9PntpZighby5zUyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRDaGFubmVsQ2xpZW50IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gdHx8KHQ9KGFzeW5jKCk9Pnthd2FpdCByO2NvbnN0IG49e2NsaWVudEFQSVZlcnNpb246by51MH0saT1hd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7cGF5bG9hZDpufSk7cmV0dXJuIGkub25EaXNjb25uZWN0aW9uKChhc3luYygpPT57dD12b2lkIDB9KSksaX0pKCkudGhlbigoZT0+ZSkpLmNhdGNoKChuPT57dGhyb3cgdD12b2lkIDAsbmV3IEVycm9yKGBmYWlsZWQgdG8gY29ubmVjdCB0byBjaGFubmVsIHByb3ZpZGVyICR7ZX06ICR7bn1gKX0pKSksdH19KFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKSxjPVwiaXNMYXVuY2hlZFZpYUxpYlwiLGQ9ZT0+e2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4gdC5zZWFyY2hQYXJhbXMuYXBwZW5kKGMsXCJ0cnVlXCIpLHQudG9TdHJpbmcoKX0sdT1hc3luYygpPT57aWYoIWF3YWl0KDAsaS5KVikoaS5pVykpcmV0dXJuKG8uWkt8fC0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luXCIpKSYmYXdhaXQgZmluLkFwcGxpY2F0aW9uLnN0YXJ0RnJvbU1hbmlmZXN0KGQoby5hVykpLGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGQoby5HWCkpfSxwPWFzeW5jKCk9Pihhd2FpdCB1KCksYSgpKX0sODI6KGUsdCxuKT0+e24uZCh0LHtSODooKT0+cyxYXzooKT0+aSxsUDooKT0+b30pO3ZhciBvLHI9big0MzYpOyFmdW5jdGlvbihlKXtlLlN0b3JlZnJvbnQ9XCJzdG9yZWZyb250XCIsZS5Eb2NrPVwiZG9ja1wifShvfHwobz17fSkpO2NvbnN0IGk9YXN5bmMgZT0+KGF3YWl0KDAsci5EbSkoKSkuZGlzcGF0Y2goci5XRi5TaG93UHJvdmlkZXJXaW5kb3cse3Byb3ZpZGVyVHlwZTplfSkscz1hc3luYyBlPT4oYXdhaXQoMCxyLkRtKSgpKS5kaXNwYXRjaChyLldGLkhpZGVQcm92aWRlcldpbmRvdyx7cHJvdmlkZXJUeXBlOmV9KX0sODA2OihlLHQsbik9PntuLmQodCx7cTk6KCk9Pm99KTt2YXIgbyxyLGkscz1uKDY3OCk7IWZ1bmN0aW9uKGUpe2UuV29ya3NwYWNlPVwib3BlbmZpbi1icm93c2VyXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5SdW5SZXF1ZXN0ZWQ9XCJydW4tcmVxdWVzdGVkXCIsZS5XaW5kb3dPcHRpb25zQ2hhbmdlZD1cIndpbmRvdy1vcHRpb25zLWNoYW5nZWRcIixlLldpbmRvd0Nsb3NlZD1cIndpbmRvdy1jbG9zZWRcIixlLldpbmRvd0NyZWF0ZWQ9XCJ3aW5kb3ctY3JlYXRlZFwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuRmluUHJvdG9jb2w9XCJmaW4tcHJvdG9jb2xcIn0oaXx8KGk9e30pKTtzLkFCLG8uV29ya3NwYWNlfSw2Nzg6KGUsdCxuKT0+e3ZhciBvO24uZCh0LHtBQjooKT0+YSxBeDooKT0+aSxHWDooKT0+dSxaSzooKT0+ZCxhVzooKT0+cCxvQzooKT0+YyxzUzooKT0+cix1MDooKT0+Zn0pLGZ1bmN0aW9uKGUpe2UuTG9jYWw9XCJsb2NhbFwiLGUuRGV2PVwiZGV2XCIsZS5TdGFnaW5nPVwic3RhZ2luZ1wiLGUuUHJvZD1cInByb2RcIn0ob3x8KG89e30pKTtjb25zdCByPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4saT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHByb2Nlc3N8fHByb2Nlc3MuZW52Py5KRVNUX1dPUktFUl9JRCxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSxzPWk/d2luZG93Lm9yaWdpbjpvLkxvY2FsLGE9ciYmZmluLm1lLnV1aWQsYz1yJiZmaW4ubWUubmFtZSxkPShyJiZmaW4ubWUuZW50aXR5VHlwZSxcInByb2RcIj09PW8uTG9jYWwpLHU9KG8uRGV2LG8uU3RhZ2luZyxvLlByb2QsXCJmaW5zOi8vc3lzdGVtLWFwcHMvd29ya3NwYWNlXCIpLHA9XCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuNy9hcHAuanNvblwiLGw9ZT0+ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik/ZTpzK2UsZj0obChcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzkuMC43XCIpLGwoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuN1wiKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgV09SS1NQQUNFX0RPQ1NfUExBVEZPUk1fVVJMJiZsKFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwmJmwoV09SS1NQQUNFX0RPQ1NfQ0xJRU5UX1VSTCksXCI5LjAuN1wiKX0sNTMyOihlLHQsbik9PntuLmQodCx7V246KCk9PmQsY2s6KCk9PmEsZDk6KCk9PmN9KTt2YXIgbyxyPW4oNjc4KSxpPW4oMTIxKTshZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiQnJvd3NlclwiLGUuRG9jaz1cIkRvY2tcIixlLkhvbWU9XCJIb21lXCIsZS5Ob3RpZmljYXRpb249XCJOb3RpZmljYXRpb25cIixlLlN0b3JlZnJvbnQ9XCJTdG9yZWZyb250XCIsZS5QbGF0Zm9ybT1cIlBsYXRmb3JtXCIsZS5UaGVtaW5nPVwiVGhlbWluZ1wifShvfHwobz17fSkpO2NvbnN0IHM9YXN5bmMoZSx0KT0+e2NvbnN0IG49e2FwaVZlcnNpb246dC5hcGlWZXJzaW9ufHxyLnUwLGNvbXBvbmVudE5hbWU6ZSxjb21wb25lbnRWZXJzaW9uOnQuY29tcG9uZW50VmVyc2lvbnx8ci51MCxhbGxvd2VkOnQuYWxsb3dlZCxyZWplY3Rpb25Db2RlOnQucmVqZWN0aW9uQ29kZX07ZmluLlN5c3RlbS5yZWdpc3RlclVzYWdlKHt0eXBlOlwid29ya3NwYWNlLWxpY2Vuc2luZ1wiLGRhdGE6bn0pfSxhPWFzeW5jIGU9PntpLk9JLnV1aWQ9PT1pLkdpLnV1aWQmJmkuT0kubmFtZT09PWkuR2kubmFtZXx8cyhvLkhvbWUsZSl9LGM9YXN5bmMgZT0+e3Moby5TdG9yZWZyb250LGUpfSxkPWFzeW5jIGU9PntzKG8uRG9jayxlKX19LDEyMTooZSx0LG4pPT57bi5kKHQse0dpOigpPT5jLEpWOigpPT5wLE9JOigpPT5kLGlXOigpPT51fSk7dmFyIG8scixpPW4oODA2KSxzPW4oNjc4KTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwib3BlbmZpbi1ob21lXCIsZS5Eb2NrPVwib3BlbmZpbi1kb2NrXCIsZS5TdG9yZWZyb250PVwib3BlbmZpbi1zdG9yZWZyb250XCIsZS5Ib21lSW50ZXJuYWw9XCJvcGVuZmluLWhvbWUtaW50ZXJuYWxcIixlLkJyb3dzZXJNZW51PVwib3BlbmZpbi1icm93c2VyLW1lbnVcIixlLkJyb3dzZXJJbmRpY2F0b3I9XCJvcGVuZmluLWJyb3dzZXItaW5kaWNhdG9yXCIsZS5Ccm93c2VyV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLXdpbmRvd1wifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuU2hvd249XCJzaG93blwiLGUuQm91bmRzQ2hhbmdlZD1cImJvdW5kcy1jaGFuZ2VkXCIsZS5MYXlvdXRSZWFkeT1cImxheW91dC1yZWFkeVwiLGUuRW5kVXNlckJvdW5kc0NoYW5naW5nPVwiZW5kLXVzZXItYm91bmRzLWNoYW5naW5nXCIsZS5CbHVycmVkPVwiYmx1cnJlZFwiLGUuQ2xvc2VkPVwiY2xvc2VkXCIsZS5DbG9zZVJlcXVlc3RlZD1cImNsb3NlLXJlcXVlc3RlZFwiLGUuRm9jdXNlZD1cImZvY3VzZWRcIixlLlNob3dSZXF1ZXN0ZWQ9XCJzaG93LXJlcXVlc3RlZFwiLGUuVmlld0NyYXNoZWQ9XCJ2aWV3LWNyYXNoZWRcIixlLlZpZXdBdHRhY2hlZD1cInZpZXctYXR0YWNoZWRcIixlLlZpZXdEZXRhY2hlZD1cInZpZXctZGV0YWNoZWRcIixlLlZpZXdQYWdlVGl0bGVVcGRhdGVkPVwidmlldy1wYWdlLXRpdGxlLXVwZGF0ZWRcIixlLlZpZXdEZXN0cm95ZWQ9XCJ2aWV3LWRlc3Ryb3llZFwiLGUuT3B0aW9uc0NoYW5nZWQ9XCJvcHRpb25zLWNoYW5nZWRcIn0ocnx8KHI9e30pKTtmdW5jdGlvbiBhKGUpe2lmKCFzLnNTKXRocm93IG5ldyBFcnJvcihcImdldE9GV2luZG93IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKGUpfWNvbnN0IGM9e25hbWU6cy5vQyx1dWlkOnMuQUJ9O2NvbnN0IGQ9e25hbWU6by5Ib21lLHV1aWQ6aS5xOS5Xb3Jrc3BhY2V9LHU9KG8uRG9jayxpLnE5LldvcmtzcGFjZSxvLlN0b3JlZnJvbnQsaS5xOS5Xb3Jrc3BhY2Use25hbWU6aS5xOS5Xb3Jrc3BhY2UsdXVpZDppLnE5LldvcmtzcGFjZX0pO2NvbnN0IHA9ZT0+YShlKS5nZXRPcHRpb25zKCkudGhlbigoKCk9PiEwKSkuY2F0Y2goKCgpPT4hMSkpfSwzMTY6KGUsdCxuKT0+e3ZhciBvLHIsaTtuLmQodCx7RGU6KCk9Pm8scHg6KCk9PnIsd3Q6KCk9Pml9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0oaXx8KGk9e30pKX19LHQ9e307ZnVuY3Rpb24gbihvKXt2YXIgcj10W29dO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgaT10W29dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtvXShpLGkuZXhwb3J0cyxuKSxpLmV4cG9ydHN9bi5kPShlLHQpPT57Zm9yKHZhciBvIGluIHQpbi5vKHQsbykmJiFuLm8oZSxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtvXX0pfSxuLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLG4ucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIG89e307KCgpPT57bi5yKG8pLG4uZChvLHtBY3Rpb25UcmlnZ2VyOigpPT5QLnAsQXBwTWFuaWZlc3RUeXBlOigpPT5XLkwsQnV0dG9uU3R5bGU6KCk9PkMuWkosQ0xJQWN0aW9uOigpPT5rLlB0LENMSUZpbHRlck9wdGlvblR5cGU6KCk9PmsuZWwsQ0xJVGVtcGxhdGU6KCk9PmsueVcsQ29udGFpbmVyVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLnA2LERvY2s6KCk9PmUsRG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsSG9tZTooKT0+aCxMZWdhY3k6KCk9PnQsUHJlc2VudGF0aW9uVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLkdvLFNlYXJjaFRhZ0JhY2tncm91bmQ6KCk9PlAudyxTdG9yZWZyb250OigpPT5TLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+Vy5ULFRlbXBsYXRlRnJhZ21lbnRUeXBlczooKT0+Qy5iSX0pO3ZhciBlPXt9O24ucihlKSxuLmQoZSx7RG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsZGVyZWdpc3RlcjooKT0+bCxtaW5pbWl6ZTooKT0+ZixyZWdpc3RlcjooKT0+cCxzaG93OigpPT53fSk7dmFyIHQ9e307bi5yKHQpLG4uZCh0LHtnZXRQYWdlczooKT0+dixnZXRXb3Jrc3BhY2VzOigpPT5tfSk7dmFyIHI9big2NzgpLGk9big1MzIpLHM9big0MzYpLGE9big4MiksYz1uKDQyNyk7bGV0IGQsdT0hMTtjb25zdCBwPWU9PihkPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQoMCxzLlhsKSgpO2lmKHUpdGhyb3cgbmV3IEVycm9yKFwiQSBkb2NrIHByb3ZpZGVyIGZvciB0aGUgcGxhdGZvcm0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLlwiKTtyZXR1cm4gdT0hMCxlLmNsaWVudEFQSVZlcnNpb249ci51MCx0LmRpc3BhdGNoKHMuV0YuUmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9jayxpbmZvOmV9KX0pKGUpOygwLGkuV24pKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbn0pLHQoe2NsaWVudEFQSVZlcnNpb246ci51MCx3b3Jrc3BhY2VWZXJzaW9uOm4ud29ya3NwYWNlVmVyc2lvbnx8XCJcIn0pfWNhdGNoKGUpeygwLGkuV24pKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZS5tZXNzYWdlfSksbihlKSxkPW51bGx9fSkpLGQpLGw9YXN5bmMoKT0+e2F3YWl0IGQsdT0hMTtyZXR1cm4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLkRlcmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9ja30pfSxmPWFzeW5jKCk9Pnthd2FpdCBkLGF3YWl0KDAscy5hQikoKSxhd2FpdCgwLGEuUjgpKGEubFAuRG9jayl9LHc9YXN5bmMoKT0+e2F3YWl0IGQsYXdhaXQoMCxzLmFCKSgpLGF3YWl0KDAsYS5YXykoYS5sUC5Eb2NrKX07dmFyIGcsaD1uKDcwMyk7bigxMjEpOyFmdW5jdGlvbihlKXtlLlRhYkNyZWF0ZWQ9XCJ0YWItY3JlYXRlZFwiLGUuQ29udGFpbmVyQ3JlYXRlZD1cImNvbnRhaW5lci1jcmVhdGVkXCIsZS5Db250YWluZXJSZXNpemVkPVwiY29udGFpbmVyLXJlc2l6ZWRcIn0oZ3x8KGc9e30pKTtuZXcgTWFwO3ZhciB5OyFmdW5jdGlvbihlKXtlLkN1cnJlbnRXb3Jrc3BhY2VJZD1cImN1cnJlbnRXb3Jrc3BhY2VJZFwiLGUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwibGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5NYWNoaW5lTmFtZT1cIm1hY2hpbmVOYW1lXCIsZS5OZXdUYWJQYWdlTGF5b3V0PVwiTmV3VGFiUGFnZUxheW91dFwiLGUuTmV3VGFiUGFnZVNvcnQ9XCJOZXdUYWJQYWdlU29ydFwiLGUuRG9ja1Bvc2l0aW9uPVwiRG9ja1Bvc2l0aW9uXCJ9KHl8fCh5PXt9KSk7Y29uc3Qgdj0oKT0+YXN5bmMgZnVuY3Rpb24oKXtyZXR1cm4oYXdhaXQoMCxzLkRtKSgpKS5kaXNwYXRjaChzLldGLkdldExlZ2FjeVBhZ2VzLHZvaWQgMCl9KCksbT0oKT0+KGFzeW5jKCk9Pihhd2FpdCgwLHMuRG0pKCkpLmRpc3BhdGNoKHMuV0YuR2V0TGVnYWN5V29ya3NwYWNlcyx2b2lkIDApKSgpO3ZhciBTPW4oNTI4KSxQPW4oMjk4KSxDPW4oMTA5KSxrPW4oNzU4KSxXPW4oMTE0KX0pKCksbW9kdWxlLmV4cG9ydHM9b30pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmxldCBjYWNoZWRBcHBzOiBBcHBbXTtcblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVFbnRyaWVzKGFwcHM6IEFwcFtdKSB7XG5cdGxldCBjYW5MYXVuY2hFeHRlcm5hbFByb2Nlc3NSZXNwb25zZTtcblxuXHR0cnkge1xuXHRcdGNhbkxhdW5jaEV4dGVybmFsUHJvY2Vzc1Jlc3BvbnNlID0gYXdhaXQgZmluLlN5c3RlbS5xdWVyeVBlcm1pc3Npb25Gb3JDdXJyZW50Q29udGV4dChcblx0XHRcdFwiU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzc1wiXG5cdFx0KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgcXVlcnlpbmcgZm9yIFN5c3RlbS5sYXVuY2hFeHRlcm5hbFByb2Nlc3MgcGVybWlzc2lvblwiLCBlcnJvcik7XG5cdH1cblx0Y29uc3QgY2FuTGF1bmNoRXh0ZXJuYWxQcm9jZXNzID0gY2FuTGF1bmNoRXh0ZXJuYWxQcm9jZXNzUmVzcG9uc2U/LmdyYW50ZWQ7XG5cblx0bGV0IGNhbkRvd25sb2FkQXBwQXNzZXRzUmVzcG9uc2U7XG5cblx0dHJ5IHtcblx0XHRjYW5Eb3dubG9hZEFwcEFzc2V0c1Jlc3BvbnNlID0gYXdhaXQgZmluLlN5c3RlbS5xdWVyeVBlcm1pc3Npb25Gb3JDdXJyZW50Q29udGV4dChcIlN5c3RlbS5kb3dubG9hZEFzc2V0XCIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBxdWVyeWluZyBmb3IgU3lzdGVtLmRvd25sb2FkQXNzZXQgcGVybWlzc2lvblwiLCBlcnJvcik7XG5cdH1cblxuXHRjb25zdCBjYW5Eb3dubG9hZEFwcEFzc2V0cyA9IGNhbkRvd25sb2FkQXBwQXNzZXRzUmVzcG9uc2U/LmdyYW50ZWQ7XG5cblx0aWYgKGNhbkxhdW5jaEV4dGVybmFsUHJvY2VzcyAmJiBjYW5Eb3dubG9hZEFwcEFzc2V0cykge1xuXHRcdHJldHVybiBhcHBzO1xuXHR9XG5cblx0Y29uc3QgdmFsaWRhdGVkQXBwczogQXBwW10gPSBbXTtcblx0Y29uc3QgcmVqZWN0ZWRBcHBJZHMgPSBbXTtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRjb25zdCBhcHBBc3NldFRhZyA9IHNldHRpbmdzPy5hcHBQcm92aWRlcj8uYXBwQXNzZXRUYWcgPz8gXCJhcHBhc3NldFwiO1xuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYXBwcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChhcHBzW2ldLm1hbmlmZXN0VHlwZSAhPT0gXCJleHRlcm5hbFwiKSB7XG5cdFx0XHR2YWxpZGF0ZWRBcHBzLnB1c2goYXBwc1tpXSk7XG5cdFx0fSBlbHNlIGlmICghY2FuTGF1bmNoRXh0ZXJuYWxQcm9jZXNzKSB7XG5cdFx0XHRyZWplY3RlZEFwcElkcy5wdXNoKGFwcHNbaV0uYXBwSWQpO1xuXHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcHBzW2ldLnRhZ3MpICYmIGFwcHNbaV0udGFncy5pbmNsdWRlcyhhcHBBc3NldFRhZykgJiYgIWNhbkRvd25sb2FkQXBwQXNzZXRzKSB7XG5cdFx0XHRyZWplY3RlZEFwcElkcy5wdXNoKGFwcHNbaV0uYXBwSWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YWxpZGF0ZWRBcHBzLnB1c2goYXBwc1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKHJlamVjdGVkQXBwSWRzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRcIkFwcHMudHM6IHZhbGlkYXRlRW50cmllczogTm90IHBhc3NpbmcgdGhlIGZvbGxvd2luZyBsaXN0IG9mIGFwcGxpY2F0aW9ucyBhcyB0aGV5IHdpbGwgbm90IGJlIGFibGUgdG8gcnVuIG9uIHRoaXMgbWFjaGluZSBkdWUgdG8gbWlzc2luZyBwZXJtaXNzaW9ucy4gQWx0ZXJuYXRpdmVseSB0aGlzIGxvZ2ljIGNvdWxkIGJlIG1vdmVkIHRvIHRoZSBsYXVuY2ggZnVuY3Rpb24gd2hlcmUgYSBzZWxlY3Rpb24gaXMgbm90IGxhdW5jaGVkIGJ1dCB0aGUgdXNlciBpcyBwcmVzZW50ZWQgd2l0aCBhIG1vZGFsIHNheWluZyB0aGV5IGNhbid0IGxhdW5jaCBpdCBkdWUgdG8gcGVybWlzc2lvbnMuXCIsXG5cdFx0XHRyZWplY3RlZEFwcElkc1xuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gdmFsaWRhdGVkQXBwcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVzdEVudHJpZXMoXG5cdHVybDogc3RyaW5nLFxuXHRjcmVkZW50aWFscz86IFwib21pdFwiIHwgXCJzYW1lLW9yaWdpblwiIHwgXCJpbmNsdWRlXCIsXG5cdGNhY2hlRHVyYXRpb24/OiBudW1iZXJcbik6IFByb21pc2U8QXBwW10+IHtcblx0Y29uc3Qgb3B0aW9ucyA9IGNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQgPyB7IGNyZWRlbnRpYWxzIH0gOiB1bmRlZmluZWQ7XG5cdGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBbXTtcblx0fVxuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucyk7XG5cblx0Y29uc3QgYXBwczogQXBwW10gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cblx0Y2FjaGVkQXBwcyA9IGF3YWl0IHZhbGlkYXRlRW50cmllcyhhcHBzKTtcblxuXHRpZiAoY2FjaGVEdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y29uc3Qgc2V0VGltZW91dEluTXMgPSBjYWNoZUR1cmF0aW9uICogNjAgKiAxMDAwO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coXCJDbGVhcmluZyBjYWNoZSBvZiBhcHBzIGFzIGNhY2hlIGR1cmF0aW9uIGhhcyBwYXNzZWQuXCIpO1xuXHRcdFx0Y2FjaGVkQXBwcyA9IHVuZGVmaW5lZDtcblx0XHR9LCBzZXRUaW1lb3V0SW5Ncyk7XG5cdH1cblxuXHRyZXR1cm4gY2FjaGVkQXBwcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcHMoKTogUHJvbWlzZTxBcHBbXT4ge1xuXHRjb25zb2xlLmxvZyhcIlJlcXVlc3RpbmcgYXBwcy5cIik7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGFwcHMgPVxuXHRcdFx0Y2FjaGVkQXBwcyA/P1xuXHRcdFx0KGF3YWl0IGdldFJlc3RFbnRyaWVzKFxuXHRcdFx0XHRzZXR0aW5ncz8uYXBwUHJvdmlkZXI/LmFwcHNTb3VyY2VVcmwsXG5cdFx0XHRcdHNldHRpbmdzPy5hcHBQcm92aWRlcj8uaW5jbHVkZUNyZWRlbnRpYWxPblNvdXJjZVJlcXVlc3QsXG5cdFx0XHRcdHNldHRpbmdzPy5hcHBQcm92aWRlcj8uY2FjaGVEdXJhdGlvbkluTWludXRlc1xuXHRcdFx0KSk7XG5cdFx0cmV0dXJuIGFwcHM7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIGFwcHMuIFJldHVybmluZyBlbXB0eSBsaXN0LlwiLCBlcnIpO1xuXHRcdHJldHVybiBbXTtcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwc0J5VGFnKHRhZ3M6IHN0cmluZ1tdLCBtdXN0TWF0Y2hBbGwgPSBmYWxzZSk6IFByb21pc2U8QXBwW10+IHtcblx0Y29uc3QgYXBwcyA9IGF3YWl0IGdldEFwcHMoKTtcblx0Y29uc3QgZmlsdGVyZWRBcHBzID0gYXBwcy5maWx0ZXIoKHZhbHVlKSA9PiB7XG5cdFx0aWYgKHZhbHVlLnRhZ3MgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRsZXQgbWF0Y2hGb3VuZCA9IGZhbHNlO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHZhbHVlLnRhZ3MuaW5jbHVkZXModGFnc1tpXSkpIHtcblx0XHRcdFx0aWYgKG11c3RNYXRjaEFsbCkge1xuXHRcdFx0XHRcdG1hdGNoRm91bmQgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKG11c3RNYXRjaEFsbCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaEZvdW5kO1xuXHR9KTtcblx0cmV0dXJuIGZpbHRlcmVkQXBwcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcChyZXF1ZXN0ZWRBcHA6IHN0cmluZyB8IHsgYXBwSWQ6IHN0cmluZyB9KTogUHJvbWlzZTxBcHA+IHtcblx0Y29uc3QgYXBwcyA9IGF3YWl0IGdldEFwcHMoKTtcblx0bGV0IGFwcElkO1xuXHRpZiAocmVxdWVzdGVkQXBwICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAodHlwZW9mIHJlcXVlc3RlZEFwcCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0YXBwSWQgPSByZXF1ZXN0ZWRBcHA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFwcElkID0gcmVxdWVzdGVkQXBwLmFwcElkO1xuXHRcdH1cblx0fVxuXHRpZiAoYXBwSWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblx0Y29uc3QgYXBwID0gYXBwcy5maW5kKChlbnRyeSkgPT4gZW50cnkuYXBwSWQgPT09IGFwcElkKTtcblxuXHRyZXR1cm4gYXBwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwc0J5SW50ZW50KGludGVudDogc3RyaW5nKTogUHJvbWlzZTxBcHBbXT4ge1xuXHRjb25zdCBhcHBzID0gYXdhaXQgZ2V0QXBwcygpO1xuXHRjb25zdCBmaWx0ZXJlZEFwcHMgPSBhcHBzLmZpbHRlcigodmFsdWUpID0+IHtcblx0XHRpZiAodmFsdWUuaW50ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUuaW50ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHZhbHVlLmludGVudHNbaV0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBpbnRlbnQudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0cmV0dXJuIGZpbHRlcmVkQXBwcztcbn1cbiIsImltcG9ydCB7IGRlcmVnaXN0ZXIsIHJlZ2lzdGVyIH0gZnJvbSBcIi4vaG9tZVwiO1xuaW1wb3J0IHsgZGVyZWdpc3RlciBhcyBkZXJlZ2lzdGVySW50ZWdyYXRpb24sIHJlZ2lzdGVyIGFzIHJlZ2lzdGVySW50ZWdyYXRpb24gfSBmcm9tIFwiLi9pbnRlZ3JhdGlvbnNcIjtcbmltcG9ydCB7IGdldFNldHRpbmdzIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XG5cdC8vIHlvdSBjYW4ga2ljayBvZmYgeW91ciBib290c3RyYXBwaW5nIHByb2Nlc3MgaGVyZSB3aGVyZSB5b3UgbWF5IGRlY2lkZSB0byBwcm9tcHQgZm9yIGF1dGhlbnRpY2F0aW9uLFxuXHQvLyBnYXRoZXIgcmVmZXJlbmNlIGRhdGEgZXRjIGJlZm9yZSBzdGFydGluZyB3b3Jrc3BhY2UgYW5kIGludGVyYWN0aW5nIHdpdGggaXQuXG5cdGNvbnNvbGUubG9nKFwiSW5pdGlhbGlzaW5nIHRoZSBib290c3RyYXBwZXJcIik7XG5cdGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcblxuXHRhd2FpdCByZWdpc3RlcigpO1xuXG5cdGF3YWl0IHJlZ2lzdGVySW50ZWdyYXRpb24oXG5cdFx0e1xuXHRcdFx0bGF1bmNoQXNzZXQ6IGFzeW5jIChvcHRpb25zKSA9PiBmaW4uU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2VzcyhvcHRpb25zKVxuXHRcdH0sXG5cdFx0c2V0dGluZ3MuaW50ZWdyYXRpb25Qcm92aWRlclxuXHQpO1xuXG5cdGNvbnN0IHByb3ZpZGVyV2luZG93ID0gZmluLldpbmRvdy5nZXRDdXJyZW50U3luYygpO1xuXHRhd2FpdCBwcm92aWRlcldpbmRvdy5vbmNlKFwiY2xvc2UtcmVxdWVzdGVkXCIsIGFzeW5jIChldmVudCkgPT4ge1xuXHRcdGF3YWl0IGRlcmVnaXN0ZXJJbnRlZ3JhdGlvbihzZXR0aW5ncy5pbnRlZ3JhdGlvblByb3ZpZGVyKTtcblx0XHRhd2FpdCBkZXJlZ2lzdGVyKCk7XG5cdFx0YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkucXVpdCgpO1xuXHR9KTtcbn1cbiIsImltcG9ydCB7XG5cdEFwcCxcblx0Q0xJRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0Q0xJUHJvdmlkZXIsXG5cdENMSVNlYXJjaExpc3RlbmVyUmVxdWVzdCxcblx0Q0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0Q0xJU2VhcmNoUmVzcG9uc2UsXG5cdENMSVRlbXBsYXRlLFxuXHRIb21lLFxuXHRIb21lU2VhcmNoUmVzcG9uc2UsXG5cdEhvbWVTZWFyY2hSZXN1bHRcbn0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZVwiO1xuaW1wb3J0IHsgZ2V0QXBwcyB9IGZyb20gXCIuL2FwcHNcIjtcbmltcG9ydCB7IGdldEFwcFNlYXJjaEVudHJpZXMsIGdldFNlYXJjaFJlc3VsdHMsIGl0ZW1TZWxlY3Rpb24gfSBmcm9tIFwiLi9pbnRlZ3JhdGlvbnNcIjtcbmltcG9ydCB7IGxhdW5jaCB9IGZyb20gXCIuL2xhdW5jaFwiO1xuaW1wb3J0IHsgZ2V0U2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuXG5sZXQgaXNIb21lUmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG5cdGNvbnNvbGUubG9nKFwiSW5pdGlhbGlzaW5nIGhvbWUuXCIpO1xuXHRjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFNldHRpbmdzKCk7XG5cdGlmIChcblx0XHRzZXR0aW5ncy5ob21lUHJvdmlkZXIgPT09IHVuZGVmaW5lZCB8fFxuXHRcdHNldHRpbmdzLmhvbWVQcm92aWRlci5pZCA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0c2V0dGluZ3MuaG9tZVByb3ZpZGVyLnRpdGxlID09PSB1bmRlZmluZWRcblx0KSB7XG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XCJob21lUHJvdmlkZXI6IG5vdCBjb25maWd1cmVkIGluIHRoZSBjdXN0b21TZXR0aW5ncyBvZiB5b3VyIG1hbmlmZXN0IGNvcnJlY3RseS4gRW5zdXJlIHlvdSBoYXZlIHRoZSBob21lUHJvdmlkZXIgb2JqZWN0IGRlZmluZWQgaW4gY3VzdG9tU2V0dGluZ3Mgd2l0aCB0aGUgZm9sbG93aW5nIGRlZmluZWQ6IGlkLCB0aXRsZVwiXG5cdFx0KTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRsZXQgbGFzdFJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlO1xuXG5cdGNvbnN0IGFwcHMgPSBhd2FpdCBnZXRBcHBzKCk7XG5cblx0Y29uc3Qgb25Vc2VySW5wdXQgPSBhc3luYyAoXG5cdFx0cmVxdWVzdDogQ0xJU2VhcmNoTGlzdGVuZXJSZXF1ZXN0LFxuXHRcdHJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzcG9uc2U+ID0+IHtcblx0XHRjb25zdCBxdWVyeSA9IHJlcXVlc3QucXVlcnkudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAobGFzdFJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGxhc3RSZXNwb25zZS5jbG9zZSgpO1xuXHRcdH1cblx0XHRsYXN0UmVzcG9uc2UgPSByZXNwb25zZTtcblx0XHRsYXN0UmVzcG9uc2Uub3BlbigpO1xuXG5cdFx0bGV0IGFwcFNlYXJjaEVudHJpZXMgPSBtYXBBcHBFbnRyaWVzVG9TZWFyY2hFbnRyaWVzKGFwcHMpLmNvbmNhdChhd2FpdCBnZXRBcHBTZWFyY2hFbnRyaWVzKCkpO1xuXHRcdGlmIChxdWVyeSAmJiBxdWVyeS5sZW5ndGggPj0gMykge1xuXHRcdFx0YXBwU2VhcmNoRW50cmllcyA9IGFwcFNlYXJjaEVudHJpZXMuZmlsdGVyKChhcHApID0+XG5cdFx0XHRcdGFwcC50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNlYXJjaFJlc3VsdHM6IEhvbWVTZWFyY2hSZXNwb25zZSA9IHtcblx0XHRcdHJlc3VsdHM6IGFwcFNlYXJjaEVudHJpZXMsXG5cdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdGZpbHRlcnM6IFtdXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGludGVncmF0aW9uUmVzdWx0cyA9IGF3YWl0IGdldFNlYXJjaFJlc3VsdHMocXVlcnksIHVuZGVmaW5lZCwgbGFzdFJlc3BvbnNlKTtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShpbnRlZ3JhdGlvblJlc3VsdHMucmVzdWx0cykpIHtcblx0XHRcdHNlYXJjaFJlc3VsdHMucmVzdWx0cyA9IHNlYXJjaFJlc3VsdHMucmVzdWx0cy5jb25jYXQoaW50ZWdyYXRpb25SZXN1bHRzLnJlc3VsdHMpO1xuXHRcdH1cblx0XHRpZiAoQXJyYXkuaXNBcnJheShpbnRlZ3JhdGlvblJlc3VsdHMuY29udGV4dC5maWx0ZXJzKSkge1xuXHRcdFx0c2VhcmNoUmVzdWx0cy5jb250ZXh0LmZpbHRlcnMgPSBzZWFyY2hSZXN1bHRzLmNvbnRleHQuZmlsdGVycy5jb25jYXQoXG5cdFx0XHRcdGludGVncmF0aW9uUmVzdWx0cy5jb250ZXh0LmZpbHRlcnNcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNlYXJjaFJlc3VsdHM7XG5cdH07XG5cblx0Y29uc3Qgb25TZWxlY3Rpb24gPSBhc3luYyAocmVzdWx0OiBDTElEaXNwYXRjaGVkU2VhcmNoUmVzdWx0KSA9PiB7XG5cdFx0aWYgKHJlc3VsdC5kYXRhICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnN0IGhhbmRsZWQgPSBhd2FpdCBpdGVtU2VsZWN0aW9uKHJlc3VsdCwgbGFzdFJlc3BvbnNlKTtcblxuXHRcdFx0aWYgKCFoYW5kbGVkKSB7XG5cdFx0XHRcdGF3YWl0IGxhdW5jaChyZXN1bHQuZGF0YSBhcyBBcHApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWhhbmRsZWQpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGBSZXN1bHQgbm90IGhhbmRsZWQgJHtyZXN1bHQua2V5fWAsIHJlc3VsdC5kYXRhKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiVW5hYmxlIHRvIGV4ZWN1dGUgcmVzdWx0IHdpdGhvdXQgZGF0YSBiZWluZyBwYXNzZWRcIik7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IGNsaVByb3ZpZGVyOiBDTElQcm92aWRlciA9IHtcblx0XHR0aXRsZTogc2V0dGluZ3MuaG9tZVByb3ZpZGVyLnRpdGxlLFxuXHRcdGlkOiBzZXR0aW5ncy5ob21lUHJvdmlkZXIuaWQsXG5cdFx0aWNvbjogc2V0dGluZ3MuaG9tZVByb3ZpZGVyLmljb24sXG5cdFx0b25Vc2VySW5wdXQsXG5cdFx0b25SZXN1bHREaXNwYXRjaDogb25TZWxlY3Rpb25cblx0fTtcblxuXHRhd2FpdCBIb21lLnJlZ2lzdGVyKGNsaVByb3ZpZGVyKTtcblx0aXNIb21lUmVnaXN0ZXJlZCA9IHRydWU7XG5cdGNvbnNvbGUubG9nKFwiSG9tZSBjb25maWd1cmVkLlwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3coKSB7XG5cdHJldHVybiBIb21lLnNob3coKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhpZGUoKSB7XG5cdHJldHVybiBIb21lLmhpZGUoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcmVnaXN0ZXIoKSB7XG5cdGlmIChpc0hvbWVSZWdpc3RlcmVkKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRcdHJldHVybiBIb21lLmRlcmVnaXN0ZXIoc2V0dGluZ3MuaG9tZVByb3ZpZGVyLmlkKTtcblx0fVxuXHRjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gZGVyZWdpc3RlciBob21lIGFzIHRoZXJlIGlzIGFuIGluZGljYXRpb24gaXQgd2FzIG5ldmVyIHJlZ2lzdGVyZWRcIik7XG59XG5cbmZ1bmN0aW9uIG1hcEFwcEVudHJpZXNUb1NlYXJjaEVudHJpZXMoYXBwczogQXBwW10pOiBIb21lU2VhcmNoUmVzdWx0W10ge1xuXHRjb25zdCBhcHBSZXN1bHRzOiBIb21lU2VhcmNoUmVzdWx0W10gPSBbXTtcblx0aWYgKEFycmF5LmlzQXJyYXkoYXBwcykpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFwcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGFjdGlvbiA9IHsgbmFtZTogXCJMYXVuY2ggVmlld1wiLCBob3RrZXk6IFwiZW50ZXJcIiB9O1xuXHRcdFx0Y29uc3QgZW50cnk6IFBhcnRpYWw8SG9tZVNlYXJjaFJlc3VsdD4gPSB7XG5cdFx0XHRcdGtleTogYXBwc1tpXS5hcHBJZCxcblx0XHRcdFx0dGl0bGU6IGFwcHNbaV0udGl0bGUsXG5cdFx0XHRcdGRhdGE6IGFwcHNbaV1cblx0XHRcdH07XG5cblx0XHRcdGlmIChhcHBzW2ldLm1hbmlmZXN0VHlwZSA9PT0gXCJ2aWV3XCIpIHtcblx0XHRcdFx0ZW50cnkubGFiZWwgPSBcIlZpZXdcIjtcblx0XHRcdFx0ZW50cnkuYWN0aW9ucyA9IFthY3Rpb25dO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFwcHNbaV0ubWFuaWZlc3RUeXBlID09PSBcInNuYXBzaG90XCIpIHtcblx0XHRcdFx0ZW50cnkubGFiZWwgPSBcIlNuYXBzaG90XCI7XG5cdFx0XHRcdGFjdGlvbi5uYW1lID0gXCJMYXVuY2ggU25hcHNob3RcIjtcblx0XHRcdFx0ZW50cnkuYWN0aW9ucyA9IFthY3Rpb25dO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFwcHNbaV0ubWFuaWZlc3RUeXBlID09PSBcIm1hbmlmZXN0XCIpIHtcblx0XHRcdFx0ZW50cnkubGFiZWwgPSBcIkFwcFwiO1xuXHRcdFx0XHRhY3Rpb24ubmFtZSA9IFwiTGF1bmNoIEFwcFwiO1xuXHRcdFx0XHRlbnRyeS5hY3Rpb25zID0gW2FjdGlvbl07XG5cdFx0XHR9XG5cdFx0XHRpZiAoYXBwc1tpXS5tYW5pZmVzdFR5cGUgPT09IFwiZXh0ZXJuYWxcIikge1xuXHRcdFx0XHRhY3Rpb24ubmFtZSA9IFwiTGF1bmNoIE5hdGl2ZSBBcHBcIjtcblx0XHRcdFx0ZW50cnkuYWN0aW9ucyA9IFthY3Rpb25dO1xuXHRcdFx0XHRlbnRyeS5sYWJlbCA9IFwiTmF0aXZlIEFwcFwiO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShhcHBzW2ldLmljb25zKSAmJiBhcHBzW2ldLmljb25zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0ZW50cnkuaWNvbiA9IGFwcHNbaV0uaWNvbnNbMF0uc3JjO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYXBwc1tpXS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGVudHJ5LmRlc2NyaXB0aW9uID0gYXBwc1tpXS5kZXNjcmlwdGlvbjtcblx0XHRcdFx0ZW50cnkuc2hvcnREZXNjcmlwdGlvbiA9IGFwcHNbaV0uZGVzY3JpcHRpb247XG5cdFx0XHRcdGVudHJ5LnRlbXBsYXRlID0gQ0xJVGVtcGxhdGUuU2ltcGxlVGV4dDtcblx0XHRcdFx0ZW50cnkudGVtcGxhdGVDb250ZW50ID0gYXBwc1tpXS5kZXNjcmlwdGlvbjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVudHJ5LnRlbXBsYXRlID0gQ0xJVGVtcGxhdGUuUGxhaW47XG5cdFx0XHR9XG5cblx0XHRcdGFwcFJlc3VsdHMucHVzaChlbnRyeSBhcyBIb21lU2VhcmNoUmVzdWx0KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFwcFJlc3VsdHM7XG59XG4iLCJpbXBvcnQgdHlwZSB7XG5cdENMSURpc3BhdGNoZWRTZWFyY2hSZXN1bHQsXG5cdENMSUZpbHRlcixcblx0Q0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0SG9tZVNlYXJjaFJlc3BvbnNlLFxuXHRIb21lU2VhcmNoUmVzdWx0XG59IGZyb20gXCJAb3BlbmZpbi93b3Jrc3BhY2VcIjtcbmltcG9ydCB0eXBlIHtcblx0SW50ZWdyYXRpb24sXG5cdEludGVncmF0aW9uTWFuYWdlcixcblx0SW50ZWdyYXRpb25Nb2R1bGUsXG5cdEludGVncmF0aW9uUHJvdmlkZXJcbn0gZnJvbSBcIi4vaW50ZWdyYXRpb25zLXNoYXBlc1wiO1xuXG5jb25zdCBrbm93bkludGVncmF0aW9uUHJvdmlkZXJzOiB7IFtpZDogc3RyaW5nXTogSW50ZWdyYXRpb25Nb2R1bGU8dW5rbm93bj4gfSA9IHt9O1xuXG5jb25zdCBob21lSW50ZWdyYXRpb25zOiB7XG5cdG1vZHVsZTogSW50ZWdyYXRpb25Nb2R1bGU8dW5rbm93bj47XG5cdGludGVncmF0aW9uOiBJbnRlZ3JhdGlvbjx1bmtub3duPjtcbn1bXSA9IFtdO1xuXG4vKipcbiAqIFJlZ2lzdGVyIGFsbCB0aGUgd29ya3NwYWNlIGludGVncmF0aW9ucy5cbiAqIEBwYXJhbSBpbnRlZ3JhdGlvbk1hbmFnZXIgVGhlIGludGVncmF0aW9uIG1hbmFnZXIuXG4gKiBAcGFyYW0gaW50ZWdyYXRpb25Qcm92aWRlciBUaGUgaW50ZWdyYXRpb24gcHJvdmlkZXIgc2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3Rlcihcblx0aW50ZWdyYXRpb25NYW5hZ2VyOiBJbnRlZ3JhdGlvbk1hbmFnZXIsXG5cdGludGVncmF0aW9uUHJvdmlkZXI/OiBJbnRlZ3JhdGlvblByb3ZpZGVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgaW50ZWdyYXRpb25zID0gaW50ZWdyYXRpb25Qcm92aWRlcj8uaW50ZWdyYXRpb25zO1xuXHRpZiAoQXJyYXkuaXNBcnJheShpbnRlZ3JhdGlvbnMpKSB7XG5cdFx0Zm9yIChjb25zdCBpbnRlZ3JhdGlvbiBvZiBpbnRlZ3JhdGlvbnMpIHtcblx0XHRcdGlmIChpbnRlZ3JhdGlvbi5lbmFibGVkKSB7XG5cdFx0XHRcdGlmICgha25vd25JbnRlZ3JhdGlvblByb3ZpZGVyc1tpbnRlZ3JhdGlvbi5pZF0gJiYgaW50ZWdyYXRpb24ubW9kdWxlVXJsKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IG1vZCA9IGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovIGludGVncmF0aW9uLm1vZHVsZVVybCk7XG5cdFx0XHRcdFx0XHRrbm93bkludGVncmF0aW9uUHJvdmlkZXJzW2ludGVncmF0aW9uLmlkXSA9IG1vZC5pbnRlZ3JhdGlvbjtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGxvYWRpbmcgbW9kdWxlICR7aW50ZWdyYXRpb24ubW9kdWxlVXJsfWAsIGVycik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChrbm93bkludGVncmF0aW9uUHJvdmlkZXJzW2ludGVncmF0aW9uLmlkXSkge1xuXHRcdFx0XHRcdGNvbnN0IGhvbWVJbnRlZ3JhdGlvbiA9IGtub3duSW50ZWdyYXRpb25Qcm92aWRlcnNbaW50ZWdyYXRpb24uaWRdO1xuXHRcdFx0XHRcdGhvbWVJbnRlZ3JhdGlvbnMucHVzaCh7XG5cdFx0XHRcdFx0XHRtb2R1bGU6IGhvbWVJbnRlZ3JhdGlvbixcblx0XHRcdFx0XHRcdGludGVncmF0aW9uXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGhvbWVJbnRlZ3JhdGlvbi5yZWdpc3Rlcikge1xuXHRcdFx0XHRcdFx0YXdhaXQgaG9tZUludGVncmF0aW9uLnJlZ2lzdGVyKGludGVncmF0aW9uTWFuYWdlciwgaW50ZWdyYXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTWlzc2luZyBtb2R1bGUgaW4gaW50ZWdyYXRpb24gcHJvdmlkZXJzXCIsIGludGVncmF0aW9uLmlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIERlcmVnaXN0ZXIgYWxsIHRoZSBpbnRlZ3JhdGlvbnMuXG4gKiBAcGFyYW0gaW50ZWdyYXRpb25Qcm92aWRlciBUaGUgaW50ZWdyYXRpb24gcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXJlZ2lzdGVyKGludGVncmF0aW9uUHJvdmlkZXI/OiBJbnRlZ3JhdGlvblByb3ZpZGVyKTogUHJvbWlzZTx2b2lkPiB7XG5cdGZvciAoY29uc3QgaG9tZUludGVncmF0aW9uIG9mIGhvbWVJbnRlZ3JhdGlvbnMpIHtcblx0XHRpZiAoaG9tZUludGVncmF0aW9uLm1vZHVsZS5kZXJlZ2lzdGVyKSB7XG5cdFx0XHRhd2FpdCBob21lSW50ZWdyYXRpb24ubW9kdWxlLmRlcmVnaXN0ZXIoaG9tZUludGVncmF0aW9uLmludGVncmF0aW9uKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNlYXJjaCByZXN1bHRzIGZyb20gYWxsIHRoZSBpbnRlZ3JhdGlvbiBwcm92aWRlcnMuXG4gKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIGdldCB0aGUgc2VhcmNoIHJlc3VsdHMgZm9yLlxuICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkgdG8gdGhlIHNlYXJjaCByZXN1bHRzLlxuICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCBzZWFyY2ggcmVzcG9uc2UgdXNlZCBmb3IgdXBkYXRpbmcgZXhpc3RpbmcgcmVzdWx0cy5cbiAqIEByZXR1cm5zIFRoZSBzZWFyY2ggcmVzdWx0cyBhbmQgbmV3IGZpbHRlcnMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZWFyY2hSZXN1bHRzKFxuXHRxdWVyeTogc3RyaW5nLFxuXHRmaWx0ZXJzOiBDTElGaWx0ZXJbXSxcblx0bGFzdFJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG4pOiBQcm9taXNlPEhvbWVTZWFyY2hSZXNwb25zZT4ge1xuXHRjb25zdCBob21lUmVzcG9uc2U6IEhvbWVTZWFyY2hSZXNwb25zZSA9IHtcblx0XHRyZXN1bHRzOiBbXSxcblx0XHRjb250ZXh0OiB7XG5cdFx0XHRmaWx0ZXJzOiBbXVxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBwcm9taXNlczogUHJvbWlzZTxIb21lU2VhcmNoUmVzcG9uc2U+W10gPSBbXTtcblx0Zm9yIChjb25zdCBob21lSW50ZWdyYXRpb24gb2YgaG9tZUludGVncmF0aW9ucykge1xuXHRcdGlmIChob21lSW50ZWdyYXRpb24ubW9kdWxlLmdldFNlYXJjaFJlc3VsdHMpIHtcblx0XHRcdHByb21pc2VzLnB1c2goXG5cdFx0XHRcdGhvbWVJbnRlZ3JhdGlvbi5tb2R1bGUuZ2V0U2VhcmNoUmVzdWx0cyhob21lSW50ZWdyYXRpb24uaW50ZWdyYXRpb24sIHF1ZXJ5LCBmaWx0ZXJzLCBsYXN0UmVzcG9uc2UpXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdGNvbnN0IHByb21pc2VSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKTtcblx0Zm9yIChjb25zdCBwcm9taXNlUmVzdWx0IG9mIHByb21pc2VSZXN1bHRzKSB7XG5cdFx0aWYgKHByb21pc2VSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShwcm9taXNlUmVzdWx0LnZhbHVlLnJlc3VsdHMpKSB7XG5cdFx0XHRcdGhvbWVSZXNwb25zZS5yZXN1bHRzID0gaG9tZVJlc3BvbnNlLnJlc3VsdHMuY29uY2F0KHByb21pc2VSZXN1bHQudmFsdWUucmVzdWx0cyk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBuZXdGaWx0ZXJzID0gcHJvbWlzZVJlc3VsdC52YWx1ZS5jb250ZXh0Py5maWx0ZXJzO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkobmV3RmlsdGVycykgJiYgaG9tZVJlc3BvbnNlLmNvbnRleHQ/LmZpbHRlcnMpIHtcblx0XHRcdFx0aG9tZVJlc3BvbnNlLmNvbnRleHQuZmlsdGVycyA9IGhvbWVSZXNwb25zZS5jb250ZXh0LmZpbHRlcnMuY29uY2F0KG5ld0ZpbHRlcnMpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKHByb21pc2VSZXN1bHQucmVhc29uKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gaG9tZVJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYXBwIHNlYXJjaCBlbnRyaWVzIGZvciBhbGwgdGhlIGludGVncmF0aW9uIHByb3ZpZGVycy5cbiAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIGFwcCBlbnRyaWVzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwU2VhcmNoRW50cmllcygpOiBQcm9taXNlPEhvbWVTZWFyY2hSZXN1bHRbXT4ge1xuXHRsZXQgcmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdID0gW107XG5cblx0Zm9yIChjb25zdCBob21lSW50ZWdyYXRpb24gb2YgaG9tZUludGVncmF0aW9ucykge1xuXHRcdGlmIChob21lSW50ZWdyYXRpb24ubW9kdWxlLmdldEFwcFNlYXJjaEVudHJpZXMpIHtcblx0XHRcdGNvbnN0IGludGVncmF0aW9uUmVzdWx0cyA9IGF3YWl0IGhvbWVJbnRlZ3JhdGlvbi5tb2R1bGUuZ2V0QXBwU2VhcmNoRW50cmllcyhcblx0XHRcdFx0aG9tZUludGVncmF0aW9uLmludGVncmF0aW9uXG5cdFx0XHQpO1xuXHRcdFx0cmVzdWx0cyA9IHJlc3VsdHMuY29uY2F0KGludGVncmF0aW9uUmVzdWx0cyk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogVGhlIGl0ZW0gZm9yIG9uZSBvZiB0aGUgcHJvdmlkZXJzIHdhcyBzZWxlY3RlZC5cbiAqIEBwYXJhbSByZXN1bHQgVGhlIHJlc3VsdCBvZiB0aGUgc2VsZWN0aW9uLlxuICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCByZXNwb25zZS5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHNlbGVjdGlvbiB3YXMgaGFuZGxlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGl0ZW1TZWxlY3Rpb24oXG5cdHJlc3VsdDogQ0xJRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0bGFzdFJlc3BvbnNlPzogQ0xJU2VhcmNoTGlzdGVuZXJSZXNwb25zZVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGlmIChyZXN1bHQuZGF0YSkge1xuXHRcdGNvbnN0IGZvdW5kSW50ZWdyYXRpb24gPSBob21lSW50ZWdyYXRpb25zLmZpbmQoKGhpKSA9PiBoaS5pbnRlZ3JhdGlvbi5pZCA9PT0gcmVzdWx0LmRhdGE/LnByb3ZpZGVySWQpO1xuXG5cdFx0aWYgKGZvdW5kSW50ZWdyYXRpb24/Lm1vZHVsZT8uaXRlbVNlbGVjdGlvbikge1xuXHRcdFx0Y29uc3QgaGFuZGxlZCA9IGF3YWl0IGZvdW5kSW50ZWdyYXRpb24ubW9kdWxlLml0ZW1TZWxlY3Rpb24oXG5cdFx0XHRcdGZvdW5kSW50ZWdyYXRpb24uaW50ZWdyYXRpb24sXG5cdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0bGFzdFJlc3BvbnNlXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoIWhhbmRsZWQpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGBFcnJvciB3aGlsZSB0cnlpbmcgdG8gaGFuZGxlICR7Zm91bmRJbnRlZ3JhdGlvbi5pbnRlZ3JhdGlvbi5pZH0gZW50cnlgLCByZXN1bHQuZGF0YSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBoYW5kbGVkO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYW4gaW50ZWdyYXRpb24gbW9kdWxlIHRoYXQgd2FzIGxvYWRlZCBtYW51YWxseS5cbiAqIEBwYXJhbSBpZCBUaGUgaWQgb2YgdGhlIG1vZHVsZS5cbiAqIEBwYXJhbSBtb2R1bGUgVGhlIG1vZHVsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEtub3duSW50ZWdyYXRpb25Qcm92aWRlcihpZDogc3RyaW5nLCBtb2R1bGU6IEludGVncmF0aW9uTW9kdWxlPHVua25vd24+KTogdm9pZCB7XG5cdGtub3duSW50ZWdyYXRpb25Qcm92aWRlcnNbaWRdID0gbW9kdWxlO1xufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZVwiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFN5bmMgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsYXVuY2goYXBwRW50cnk6IEFwcCkge1xuXHRjb25zb2xlLmxvZyhcIkFwcGxpY2F0aW9uIGxhdW5jaCByZXF1ZXN0ZWQ6XCIsIGFwcEVudHJ5KTtcblx0aWYgKGFwcEVudHJ5Lm1hbmlmZXN0VHlwZSA9PT0gXCJleHRlcm5hbFwiKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGFwcEFzc2V0VGFnID0gc2V0dGluZ3M/LmFwcFByb3ZpZGVyPy5hcHBBc3NldFRhZyA/PyBcImFwcGFzc2V0XCI7XG5cblx0XHRpZiAoYXBwRW50cnkudGFncz8uaW5jbHVkZXMoYXBwQXNzZXRUYWcpKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFx0XCJBcHBsaWNhdGlvbiByZXF1ZXN0ZWQgaXMgYSBuYXRpdmUgYXBwIHdpdGggYSB0YWcgb2YgYXBwYXNzZXQgc28gaXQgaXMgcHJvdmlkZWQgYnkgdGhpcyB3b3Jrc3BhY2UgcGxhdGZvcm0uIE1hbmFnaW5nIHJlcXVlc3QgdmlhIHBsYXRmb3JtIGFuZCBub3QgV29ya3NwYWNlLlwiXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3Qgb3B0aW9uczogT3BlbkZpbi5FeHRlcm5hbFByb2Nlc3NSZXF1ZXN0VHlwZSA9IHt9O1xuXHRcdFx0b3B0aW9ucy5hbGlhcyA9IGFwcEVudHJ5Lm1hbmlmZXN0O1xuXHRcdFx0b3B0aW9ucy51dWlkID0gYXBwRW50cnkuYXBwSWQ7XG5cblx0XHRcdGF3YWl0IGZpbi5TeXN0ZW0ubGF1bmNoRXh0ZXJuYWxQcm9jZXNzKG9wdGlvbnMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkFwcGxpY2F0aW9uIHJlcXVlc3RlZCBpcyBhIG5hdGl2ZSBhcHAuIE1hbmFnaW5nIHJlcXVlc3QgdmlhIHBsYXRmb3JtIGFuZCBub3QgV29ya3NwYWNlLlwiKTtcblx0XHRcdGNvbnN0IG9wdGlvbnM6IE9wZW5GaW4uRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdFR5cGUgPSB7fTtcblx0XHRcdG9wdGlvbnMucGF0aCA9IGFwcEVudHJ5Lm1hbmlmZXN0O1xuXHRcdFx0b3B0aW9ucy51dWlkID0gYXBwRW50cnkuYXBwSWQ7XG5cblx0XHRcdGF3YWl0IGZpbi5TeXN0ZW0ubGF1bmNoRXh0ZXJuYWxQcm9jZXNzKG9wdGlvbnMpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdFx0YXdhaXQgcGxhdGZvcm0ubGF1bmNoQXBwKHsgYXBwOiBhcHBFbnRyeSB9KTtcblx0fVxuXHRjb25zb2xlLmxvZyhcIkZpbmlzaGVkIGFwcGxpY2F0aW9uIGxhdW5jaCByZXF1ZXN0XCIpO1xufVxuIiwiaW1wb3J0IHtcblx0aW5pdCBhcyB3b3Jrc3BhY2VQbGF0Zm9ybUluaXQsXG5cdEJyb3dzZXJJbml0Q29uZmlnLFxuXHRCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdFxufSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0KCkge1xuXHRjb25zb2xlLmxvZyhcIkluaXRpYWxpc2luZyBwbGF0Zm9ybVwiKTtcblx0Y29uc3QgYnJvd3NlcjogQnJvd3NlckluaXRDb25maWcgPSB7XG5cdFx0ZGVmYXVsdFdpbmRvd09wdGlvbnM6IGF3YWl0IGdldERlZmF1bHRXaW5kb3dPcHRpb25zKClcblx0fTtcblxuXHRhd2FpdCB3b3Jrc3BhY2VQbGF0Zm9ybUluaXQoe1xuXHRcdGJyb3dzZXJcblx0fSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREZWZhdWx0V2luZG93T3B0aW9ucygpOiBQcm9taXNlPEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0PiB7XG5cdGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcblxuXHRyZXR1cm4ge1xuXHRcdGljb246IHNldHRpbmdzLmJyb3dzZXJQcm92aWRlci53aW5kb3dPcHRpb25zPy5pY29uLFxuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7XG5cdFx0XHRwYWdlczogW10sXG5cdFx0XHRmYXZpY29uOiBzZXR0aW5ncy5icm93c2VyUHJvdmlkZXIud2luZG93T3B0aW9ucz8uaWNvblxuXHRcdH1cblx0fTtcbn1cbiIsImltcG9ydCB7IEN1c3RvbVNldHRpbmdzIH0gZnJvbSBcIi4vc2hhcGVzXCI7XG5cbmxldCBzZXR0aW5nczogQ3VzdG9tU2V0dGluZ3M7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENvbmZpZ3VyZWRTZXR0aW5ncygpOiBQcm9taXNlPEN1c3RvbVNldHRpbmdzPiB7XG5cdGNvbnN0IGFwcCA9IGF3YWl0IGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50KCk7XG5cdGNvbnN0IG1hbmlmZXN0OiBPcGVuRmluLk1hbmlmZXN0ICYgeyBjdXN0b21TZXR0aW5ncz86IEN1c3RvbVNldHRpbmdzIH0gPSBhd2FpdCBhcHAuZ2V0TWFuaWZlc3QoKTtcblxuXHRpZiAobWFuaWZlc3QuY3VzdG9tU2V0dGluZ3MgIT09IHVuZGVmaW5lZCkge1xuXHRcdHNldHRpbmdzID0gbWFuaWZlc3QuY3VzdG9tU2V0dGluZ3M7XG5cdH0gZWxzZSB7XG5cdFx0c2V0dGluZ3MgPSB7fTtcblx0fVxuXG5cdHJldHVybiBzZXR0aW5ncztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNldHRpbmdzKCk6IFByb21pc2U8Q3VzdG9tU2V0dGluZ3M+IHtcblx0aWYgKHNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcblx0XHRzZXR0aW5ncyA9IGF3YWl0IGdldENvbmZpZ3VyZWRTZXR0aW5ncygpO1xuXHR9XG5cdHJldHVybiBzZXR0aW5ncztcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBpbml0IGFzIGJvb3RzdHJhcCB9IGZyb20gXCIuL2Jvb3RzdHJhcHBlclwiO1xuaW1wb3J0IHsgaW5pdCBhcyBpbml0aWFsaXNlUGxhdGZvcm0gfSBmcm9tIFwiLi9wbGF0Zm9ybVwiO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgYXN5bmMgKCkgPT4ge1xuXHRjb25zdCBwbGF0Zm9ybSA9IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO1xuXHRhd2FpdCBwbGF0Zm9ybS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsIGFzeW5jICgpID0+IGJvb3RzdHJhcCgpKTtcblx0YXdhaXQgaW5pdGlhbGlzZVBsYXRmb3JtKCk7XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==