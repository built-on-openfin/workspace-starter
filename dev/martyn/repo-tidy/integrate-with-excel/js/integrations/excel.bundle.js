/******/ var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/excel/openfin.excel.js":
/*!**********************************************************!*\
  !*** ../../node_modules/@openfin/excel/openfin.excel.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AdapterError": () => (/* binding */ r),
/* harmony export */   "ApiError": () => (/* binding */ o),
/* harmony export */   "EventError": () => (/* binding */ s),
/* harmony export */   "ExcelCellBorderLineStyle": () => (/* binding */ a),
/* harmony export */   "ExcelCellHorizontalAlignment": () => (/* binding */ c),
/* harmony export */   "ExcelCellPattern": () => (/* binding */ d),
/* harmony export */   "ExcelCellVerticalAlignment": () => (/* binding */ h),
/* harmony export */   "ExcelFilterOperator": () => (/* binding */ l),
/* harmony export */   "InitializationError": () => (/* binding */ u),
/* harmony export */   "ParameterError": () => (/* binding */ p),
/* harmony export */   "disableLogging": () => (/* binding */ w),
/* harmony export */   "enableLogging": () => (/* binding */ y),
/* harmony export */   "getExcelApplication": () => (/* binding */ f)
/* harmony export */ });
var e={3885:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4794);class s extends i.Base{async wrap(e){this.wire.sendAction("wrap-application").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch((e=>{})),this._create(e)}async start(e){this.wire.sendAction("start-application").catch((e=>{}));const t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e){return this.wire.sendAction("run-applications",{applications:e}).then((()=>{}))}getCurrent(){return this.wire.sendAction("get-current-application").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch((e=>{}));const n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch((e=>{})),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then((({payload:e})=>{const t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})})).then((t=>(t._manifestUrl=e,t)))}}t.default=s},4794:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=n(9659),r=n(4997),o=n(4169);class s extends i.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new r._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){const t=[];return e.forEach((e=>{t.push(new r._Window(this.wire,{uuid:e.uuid,name:e.name}))})),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then((({payload:e})=>e.data))}async quit(e=!1){await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}_close(e=!1){return this.wire.sendAction("close-application",{force:e,...this.identity}).then((()=>{}))}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch((e=>{})),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then((({payload:e})=>{const t=[];return e.data.forEach((e=>{t.push({uuid:this.identity.uuid,name:e})})),this.windowListFromIdentityList(t)}))}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then((({payload:e})=>e.data))}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then((({payload:e})=>e.data))}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then((({payload:e})=>e.data))}async getViews(){const{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then((({payload:e})=>e.data))}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch((e=>{})),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then((()=>{}))}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then((()=>{}))}restart(){return this.wire.sendAction("restart-application",this.identity).then((()=>{}))}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch((e=>{})),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then((()=>{}))}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then((()=>{}))}async sendApplicationLog(){const{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then((()=>{}))}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then((()=>{}))}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then((()=>{}))}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then((({payload:e})=>e.data))}terminate(){return this.wire.sendAction("terminate-application",this.identity).then((()=>{}))}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-info",this.identity).then((({payload:e})=>e.data))}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){await this.wire.sendAction("set-file-download-location",{downloadLocation:e,...this.identity})}}t.Application=s},7264:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3885);r(n(4794),t),t.default=o.default},9659:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=t.EmitterBase=t.Base=void 0;const s=n(3442),a=n(8068);class c{constructor(e){this.isNodeEnvironment=()=>"NodeEnvironment"===this.wire.environment.constructor.name,this.isOpenFinEnvironment=()=>"OpenFinEnvironment"===this.wire.environment.constructor.name,this.wire=e}get fin(){return a.getFin(this.wire)}get me(){return this.wire.me}}t.Base=c,t.EmitterBase=class extends c{constructor(e,t,...n){super(e),this.topic=t,i.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(o(this,i)),this.getOrCreateEmitter=()=>this.wire.eventAggregator.getOrCreate(o(this,i)),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,i)=>{const r={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},o=this.getOrCreateEmitter();n(o);try{await this.wire.sendAction("subscribe-to-desktop-event",r)}catch(e){throw i(o),this.deleteEmitterIfNothingRegistered(o),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){const n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch((()=>null)),this.getOrCreateEmitter()}return Promise.resolve()},this.on=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.on(e,t)}),(n=>{n.removeListener(e,t)})),this),this.addListener=this.on,this.once=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.once(e,i),n.once(e,t)}),(n=>{n.removeListener(e,i),n.removeListener(e,t)})),this},this.prependListener=async(e,t,n)=>(await this.registerEventListener(e,n,(n=>{n.prependListener(e,t)}),(n=>{n.removeListener(e,t)})),this),this.prependOnceListener=async(e,t,n)=>{const i=()=>this.deregisterEventListener(e);return await this.registerEventListener(e,n,(n=>{n.prependOnceListener(e,t),n.once(e,i)}),(n=>{n.removeListener(e,t),n.removeListener(e,i)})),this},this.removeListener=async(e,t,n)=>{const i=await this.deregisterEventListener(e,n);return i&&(i.removeListener(e,t),this.deleteEmitterIfNothingRegistered(i)),this},this.deregisterAllListeners=async e=>{const t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){const e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),i=[];for(let e=0;e<n;e++)i.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch((()=>null)));return await Promise.all(i),e}},this.removeAllListeners=async e=>{const t=async e=>{const t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await t(e);else if(this.hasEmitter()){const e=this.getOrCreateEmitter().eventNames();await s.promiseMap(e,t)}return this},r(this,i,[t,...n]),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[]}deleteEmitterIfNothingRegistered(e){0===e.eventNames().length&&this.wire.eventAggregator.delete(o(this,i))}},i=new WeakMap,t.Reply=class{}},3427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.Base{writeText(e){return this.wire.sendAction("clipboard-write-text",e).then((()=>{}))}readText(e){return this.wire.sendAction("clipboard-read-text",e).then((({payload:e})=>e.data))}writeHtml(e){return this.wire.sendAction("clipboard-write-html",e).then((()=>{}))}readHtml(e){return this.wire.sendAction("clipboard-read-html",e).then((({payload:e})=>e.data))}writeRtf(e){return this.wire.sendAction("clipboard-write-rtf",e).then((()=>{}))}readRtf(e){return this.wire.sendAction("clipboard-read-rtf",e).then((({payload:e})=>e.data))}write(e){return this.wire.sendAction("clipboard-write",e).then((()=>{}))}getAvailableFormats(e){return this.wire.sendAction("clipboard-read-formats",e).then((({payload:e})=>e.data))}}t.default=r},7813:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitterMap=void 0;const i=n(6465);function r(e){return Buffer.from(e).toString("base64")}t.EmitterMap=class{constructor(){this.storage=new Map}hashKeys(e){return e.map(r).join("/")}getOrCreate(e){const t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new i.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){const t=this.hashKeys(e);return this.storage.delete(t)}}},2734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(7813);class r extends i.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if(function(e){return"process-desktop-event"===e.action}(e)){const{payload:t}=e,n=function(e){const{topic:t}=e;if("frame"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("window"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("application"===t){const{uuid:n}=e;return[t,n]}if("view"===t){const{uuid:n,name:i}=e;return[t,n,i]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}t.default=r},7168:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(8298);class o extends i.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch((e=>{})),Promise.resolve(new r.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch((e=>{})),new r.ExternalApplication(this.wire,{uuid:e})}}t.default=o},8298:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplication=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then((({payload:e})=>e.data))}}t.ExternalApplication=r},9021:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7168);t.default=o.default,r(n(8298),t)},6545:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(6465),r=n(3641),o=n(4997),s=n(7264),a=n(8347),c=n(3427),d=n(9021),h=n(6720),l=n(9211),u=n(4169),p=n(609),w=n(9641),y=n(8068),f=n(8706),g=n(7153);class m extends i.EventEmitter{constructor(e){super(),y.registerFin(e,this),this.wire=e,this.System=new r.default(e),this.Window=new o.default(e),this.Application=new s.default(e),this.InterApplicationBus=new a.default(e),this.Clipboard=new c.default(e),this.ExternalApplication=new d.default(e),this.Frame=new h.default(e),this.GlobalHotkey=new l.default(e),this.Platform=new p.default(e,this.InterApplicationBus.Channel),this.View=new u.default(e),this.Interop=new f.default(e),this.SnapshotSource=new g.default(e),this.me=w.getMe(e),e.on("disconnected",(()=>{this.emit("disconnected")}))}}t.default=m},1778:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(8161);class s extends i.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch((e=>{})),Promise.resolve(new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch((e=>{})),new o._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}t.default=s},8161:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Frame=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then((({payload:e})=>e.data))}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then((({payload:e})=>e.data))}}t._Frame=r},6720:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1778);t.default=o.default,r(n(8161),t)},9211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter((e=>!("registered"===e||"unregistered"===e))).map((e=>this.removeAllListeners(e)))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){const{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t.default=r},7539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelBase=t.ProtectedItems=void 0;const n=e=>(t,n,i)=>{const r=e(t,n,i);return void 0===r?n:r};t.ProtectedItems=class{constructor(e,t){this.providerIdentity=e,this.wire=t}};class i{constructor(){this.subscriptions=new Map}static defaultAction(e){throw new Error(`No action registered at target for ${e}`)}async processAction(e,t,n){try{const r=this.subscriptions.has(e)?this.subscriptions.get(e):(t,n)=>{var r;return(null!==(r=this.defaultAction)&&void 0!==r?r:i.defaultAction)(e,t,n)},o=this.preAction?await this.preAction(e,t,n):t,s=await r(o,n);return this.postAction?await this.postAction(e,s,n):s}catch(t){if(this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw new Error("Already registered beforeAction middleware");this.preAction=n(e)}onError(e){if(this.errorMiddleware)throw new Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw new Error("Already registered afterAction middleware");this.postAction=n(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw new Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw new Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}t.ChannelBase=i},8378:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const c=n(7539),d=new Map;class h extends c.ChannelBase{constructor(e,t,n){super(),i.set(this,void 0),r.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),o.set(this,(()=>{d.delete(this.endpointId),a(this,r).close()})),s(this,i,new c.ProtectedItems(e,t)),this.disconnectListener=()=>{},this.endpointId=e.endpointId,s(this,r,n),d.set(this.endpointId,this),n.receive(this.processAction)}static closeChannelByEndpointId(e){const t=d.get(e);t&&a(t,o).call(t)}static handleProviderDisconnect(e,t){e.disconnectListener(t),a(e,o).call(e)}get providerIdentity(){return a(this,i).providerIdentity}async dispatch(e,t){if(a(this,r).isEndpointConnected(this.providerIdentity.channelId))return a(this,r).send(this.providerIdentity.channelId,e,t);throw new Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw new Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){const e=a(this,i),{channelName:t,uuid:n,name:r}=e.providerIdentity;await e.wire.sendAction("disconnect-from-channel",{channelName:t,uuid:n,name:r,endpointId:this.endpointId}),a(this,o).call(this)}}t.default=h,i=new WeakMap,r=new WeakMap,o=new WeakMap},6711:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const a=n(3917),c=n(9659),d=n(1046),h=n(3870),l=n(569),u=n(2942),p=n(3749),w=n(3037),y=n(7113);class f extends c.Base{constructor(e){super(e),i.set(this,void 0),r.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new w.ProtocolManager(this.isNodeEnvironment()?["classic"]:["rtc","classic"]),o(this,i,new p.MessageReceiver(e)),o(this,r,new l.RTCICEManager(e)),e.registerMessageHandler(this.onmessage.bind(this))}static getProtocolOptionsFromStrings(e){return e.map((e=>{switch(e){case"rtc":return h.RTCInfo;case"classic":return d.ClassicInfo;default:return a.exhaustiveCheck(e,["rtc","classic"])}}))}createProvider(e,t){const n=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),r=this.protocolManager.getProviderProtocols(null==n?void 0:n.protocols),o=r.map((e=>{switch(e){case"rtc":return new h.RTCStrategy;case"classic":return new d.ClassicStrategy(this.wire,s(this,i),t.channelId,t);default:return a.exhaustiveCheck(e,["rtc","classic"])}}));let c;if(2===o.length){const[e,t]=o;c=y.default.combine(e,t)}else{if(1!==o.length)throw new Error("failed to combine strategies");[c]=o}const l=new u.ChannelProvider(t,this.wire,c),p=t.channelId;return this.providerMap.set(p,{provider:l,strategy:c,supportedProtocols:f.getProtocolOptionsFromStrings(r)}),u.ChannelProvider.setProviderRemoval(l,this.removeChannelFromProviderMap.bind(this)),l}async createClientOffer(e){const t=this.protocolManager.getClientProtocols(null==e?void 0:e.protocols);let n;return{offer:{supportedProtocols:await Promise.all(t.map((async e=>{switch(e){case"rtc":{const{rtcClient:e,channels:t,offer:i,rtcConnectionId:o,channelsOpened:a}=await s(this,r).startClientOffer();return n={rtcClient:e,channels:t,channelsOpened:a},{type:"rtc",version:h.RTCInfo.version,payload:{offer:i,rtcConnectionId:o}}}case"classic":return{type:"classic",version:d.ClassicInfo.version};default:return a.exhaustiveCheck(e,["rtc","classic"])}}))),maxProtocols:2},rtc:n}}async createClientStrategy(e,t){var n;t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),s(this,i).checkForPreviousClientConnection(t.channelId));const o=null!==(n=t.answer)&&void 0!==n?n:{supportedProtocols:[{type:"classic",version:1}]},a=(await Promise.all(o.supportedProtocols.map((async n=>"rtc"===n.type&&e?(await s(this,r).finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new h.RTCStrategy):"classic"===n.type?new d.ClassicStrategy(this.wire,s(this,i),t.endpointId,t):null)))).filter((e=>null!==e));let c;if(e&&!a.some((e=>e instanceof h.RTCStrategy))&&e&&e.rtcClient.close(),a.length>=2)c=y.default.combine(a[0],a[1]);else{if(!a.length)throw new Error("No compatible protocols");[c]=a}const l={endpointIdentity:t,rtc:e};return c.addEndpoint(t.channelId,l),c}async processChannelConnection(e){const{clientIdentity:t,providerIdentity:n,ackToSender:i,payload:o,offer:a}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);const c=n.channelId,l=this.providerMap.get(c);if(!l)return i.payload.success=!1,i.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(i);const{provider:p,strategy:w,supportedProtocols:y}=l;try{if(!(p instanceof u.ChannelProvider))throw Error("Cannot connect to a channel client");const e=null!=a?a:{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1},n=this.protocolManager.getCompatibleProtocols(y,e);if(!n.length)throw new Error("This provider does not support any of the offered protocols.");const c=await p.processConnection(t,o);i.payload.payload=i.payload.payload||{};let l={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return l=await n.reduce((async(e,t)=>{const n=await e;if("rtc"===t.type){const{answer:e,rtcClient:i,channels:o}=await s(this,r).createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:h.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then((e=>o.then((t=>({...e,rtc:{rtcClient:i,channels:t}})))))}else n.supportedProtocols.push({type:"classic",version:d.ClassicInfo.version});return n}),Promise.resolve(l)),l.endpointPayloadPromise.then((e=>w.addEndpoint(t.endpointId,e))),i.payload.payload.result=c,i.payload.payload.answer=l,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,this.wire.sendRaw(i)}}}t.ConnectionManager=f,i=new WeakMap,r=new WeakMap},7722:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const s=n(8378),a=n(2942),c=n(9659),d=n(6711),h=()=>{};class l extends c.EmitterBase{constructor(e){super(e,"channel"),i.set(this,void 0),r(this,i,new d.ConnectionManager(e))}async getAllChannels(){return this.wire.sendAction("get-all-channels").then((({payload:e})=>e.data))}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async connect(e,t){if(!e||"string"!=typeof e)throw new Error("Please provide a channelName string to connect to a channel.");const n=Object.assign(this.wire.environment.getDefaultChannelOptions().connect,t||{});let r=h,a=h;const c=new Promise((t=>{r=t,a=i=>{e===i.channelName&&(this.removeListener("connected",a),this.connect(e,n).then((e=>{t(e)})))},this.on("connected",a)}));try{const{offer:t,rtc:c}=await o(this,i).createClientOffer(n),d=await this.wire.sendAction("connect-to-channel",{channelName:e,...n,offer:t}),{payload:{data:h}}=d;r&&r(),this.removeListener("connected",a);const l=await o(this,i).createClientStrategy(c,h),u=new s.default(h,this.wire,l);return l.onEndpointDisconnect(h.channelId,(async()=>{try{await u.disconnect()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${h.uuid} / name: ${h.name} / endpointId: ${h.endpointId}.`)}finally{s.default.handleProviderDisconnect(u,h)}})),this.on("disconnected",(t=>{t.channelName===e&&s.default.handleProviderDisconnect(u,t)})),u}catch(t){const i="internal-nack";if({wait:!0,...n}.wait&&t.message&&t.message.includes(i))return console.warn(`Channel not found for channelName: ${e}, waiting for channel connection.`),c;throw t.message===i?new Error(`No channel found for channelName: ${e}`):new Error(t)}}async create(e,t){if(!e)throw new Error("Please provide a channelName to create a channel");const{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),r=o(this,i).createProvider(t,n);return this.on("client-disconnected",(t=>{t.channelName===e&&a.ChannelProvider.handleClientDisconnection(r,t)})),r}}t.Channel=l,i=new WeakMap},3749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiver=void 0;const i=n(8378),r=n(9659);class o extends r.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){var t,n;const{senderIdentity:i,providerIdentity:r,action:o,ackToSender:s,payload:a,intendedTargetIdentity:c}=e.payload,d=null!==(n=null!==(t=c.channelId)&&void 0!==t?t:c.endpointId)&&void 0!==n?n:this.latestEndpointIdByChannelId.get(r.channelId),h=this.endpointMap.get(d);if(!h)return s.payload.success=!1,s.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${d} no longer connected.`,this.wire.sendRaw(s);try{const e=await h(o,a,i);return s.payload.payload=s.payload.payload||{},s.payload.payload.result=e,this.wire.sendRaw(s)}catch(e){return s.payload.success=!1,s.payload.reason=e.message,this.wire.sendRaw(s)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){const t=this.latestEndpointIdByChannelId.get(e);t&&(i.default.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}t.MessageReceiver=o},1046:function(e,t){var n,i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicInfo=t.ClassicStrategy=void 0,t.ClassicStrategy=class{constructor(e,t,s,a){this.messageReceiver=t,this.endpointId=s,this.providerIdentity=a,n.set(this,void 0),i.set(this,new Map),this.send=async(e,t,r)=>{const s=o(this,i).get(e);if(!s)throw new Error(`Could not locate routing info for endpoint ${e}`);const a={...s};return a.isLocalEndpointId&&delete a.endpointId,delete a.isLocalEndpointId,(await o(this,n).sendAction("send-channel-message",{...a,providerIdentity:this.providerIdentity,action:t,payload:r}).catch((e=>{throw new Error(e.message)}))).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),r(this,i,new Map)},r(this,n,e)}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){o(this,i).delete(e)}isEndpointConnected(e){return o(this,i).has(e)}addEndpoint(e,t){o(this,i).set(e,t.endpointIdentity)}isValidEndpointPayload(e){var t,n;return"string"==typeof(null===(t=null==e?void 0:e.endpointIdentity)||void 0===t?void 0:t.endpointId)||"string"==typeof(null===(n=null==e?void 0:e.endpointIdentity)||void 0===n?void 0:n.channelId)}},n=new WeakMap,i=new WeakMap,t.ClassicInfo={version:5,minimumVersion:0,type:"classic"}},7113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.primary=e,this.secondary=t}static combine(e,t){return new n(e,t)}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,(()=>{this.secondary.isEndpointConnected(e)||t()})),this.secondary.onEndpointDisconnect(e,(()=>{this.primary.isEndpointConnected(e)||t()}))}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}t.default=n},3037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolManager=void 0,t.ProtocolManager=class{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultClientProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultProviderProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter((t=>e.some((e=>{var n;return e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(null!==(n=t.minimumVersion)&&void 0!==n?n:0)})))).slice(0,t.maxProtocols)}}},8776:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCEndpoint=void 0;const a=n(2366);t.RTCEndpoint=class{constructor(e,t){this.rtc=e,this.endpointIdentity=t,this.responseMap=new Map,i.set(this,null),r.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),o(this,r)&&o(this,r).call(this))},this.send=async(e,t)=>{const n=`message-${Math.random()}`,i=new Promise(((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})}));return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),i},this.close=()=>{this.responseMap.forEach((e=>e.reject("Connection has closed."))),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc.channels.response.addEventListener("message",(e=>{var t;const{messageId:n,payload:i,success:r,error:o}=JSON.parse(e.data),{resolve:s,reject:a}=null!==(t=this.responseMap.get(n))&&void 0!==t?t:{};s&&a?(this.responseMap.delete(n),r?s(i):a(o)):(console.log("Could not find id in responseMap."),console.log(e))})),this.rtc.channels.request.addEventListener("message",(async e=>{const{messageId:n,action:r,payload:s}=JSON.parse(e.data);if(o(this,i))try{const e=await o(this,i).call(this,r,s,t);this.rtc.channels.response.send(JSON.stringify({messageId:n,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,error:a.errorToPOJO(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:n,success:!1,error:"Connection not ready."}))})),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach((e=>{e.onclose=e=>{[...this.responseMap.values()].forEach((e=>e.reject(new Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB.")))),this.close(),o(this,r)&&o(this,r).call(this)}}))}onDisconnect(e){if(o(this,r))throw new Error("RTCEndpoint disconnectListener cannot be set twice.");s(this,r,e)}receive(e){if(o(this,i))throw new Error("You have already set a listener for this RTC Endpoint.");s(this,i,e)}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},i=new WeakMap,r=new WeakMap},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTCICEManager=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise(((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){const n=()=>{e.removeEventListener("open",n),t()};e.addEventListener("open",n)}else n(new Error("This Channel has already closed"))}))}static createDataChannelPromise(e,t){let n;const i=new Promise((e=>{n=e})),r=i=>{const o=()=>{i.channel.removeEventListener("open",o),n(i.channel)};i.channel.label===e&&(i.channel.addEventListener("open",o),t.removeEventListener("datachannel",r))};return t.addEventListener("datachannel",r),i}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){const e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseClientIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForProviderIce(e,(async e=>{await t.addIceCandidate(e.candidate)}));const n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},i=await t.createOffer();await t.setLocalDescription(i);const r=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then((()=>{}));return{rtcClient:t,channels:n,offer:i,rtcConnectionId:e,channelsOpened:r}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){const n=this.createRtcPeer(),i=r.createDataChannelPromise("request",n),o=r.createDataChannelPromise("response",n);n.addEventListener("icecandidate",(async t=>{var n;t.candidate&&await this.raiseProviderIce(e,{candidate:null===(n=t.candidate)||void 0===n?void 0:n.toJSON()})})),await this.listenForClientIce(e,(async e=>{await n.addIceCandidate(e.candidate)})),await n.setRemoteDescription(t);const s=await n.createAnswer();await n.setLocalDescription(s);const a=Promise.all([i,o]).then((([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n})));return{rtcClient:n,answer:s,channels:a}}}t.RTCICEManager=r},3870:function(e,t,n){var i,r,o,s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCInfo=t.RTCStrategy=void 0;const c=n(8776);t.RTCStrategy=class{constructor(){i.set(this,null),r.set(this,new Map),o.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{s(this,o)&&(s(this,r).forEach((e=>e.close())),a(this,r,new Map)),a(this,o,!1)}}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(s(this,i))throw new Error("You have already set a listener for this RTC Strategy");a(this,i,e),s(this,r).forEach((e=>e.receive(s(this,i))))}getEndpointById(e){const t=s(this,r).get(e);if(!t)throw new Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return s(this,o)}isEndpointConnected(e){return s(this,r).has(e)}addEndpoint(e,t){if(!s(this,o))return void console.warn("Adding endpoint to disconnected RTC Strategy");const n=new c.RTCEndpoint(t.rtc,t.endpointIdentity);s(this,i)&&n.receive(s(this,i)),s(this,r).set(e,n)}async closeEndpoint(e){s(this,r).delete(e)}isValidEndpointPayload(e){const t=e=>"object"==typeof e&&null!==e;return t(e)&&t(e.endpointIdentity)&&t(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}},i=new WeakMap,r=new WeakMap,o=new WeakMap,t.RTCInfo={version:1,minimumVersion:0,type:"rtc"}},2942:function(e,t,n){var i=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelProvider=void 0;const o=n(7539),s=n(2300);let a=(()=>{var e,t,n,a,c;class d extends o.ChannelBase{constructor(h,l,u){super(),e.set(this,void 0),t.set(this,void 0),n.set(this,void 0),a.set(this,(t=>{const o=this.connections.filter((e=>e.endpointId!==t.endpointId));r(this,n).closeEndpoint(t.endpointId),i(this,e,o)})),this.processAction=async(e,t,n)=>(d.clientIsMultiRuntime(n)&&!s.runtimeUuidMeetsMinimumRuntimeVersion(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),c.set(this,(()=>{r(this,n).close();const e=d.removalMap.get(this);e&&e()})),i(this,t,new o.ProtectedItems(h,l)),this.connectListener=()=>{},this.disconnectListener=()=>{},i(this,e,[]),i(this,n,u),u.receive(this.processAction)}get connections(){return[...r(this,e)]}static handleClientDisconnection(e,t){const n=e.connections.find((e=>e.endpointId===t.endpointId));n?r(e,a).call(e,n):e.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name)).forEach(r(e,a)),e.disconnectListener(t)}static setProviderRemoval(e,t){d.removalMap.set(e,t)}dispatch(e,t,i){var o;const s=null!==(o=e.endpointId)&&void 0!==o?o:this.getEndpointIdForOpenFinId(e,t);return s&&r(this,n).isEndpointConnected(s)?r(this,n).send(s,t,i):Promise.reject(new Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${s} no longer connected.`))}async processConnection(t,n){return r(this,e).push(t),this.connectListener(t,n)}publish(e,t){return this.connections.map((i=>r(this,n).send(i.endpointId,e,t)))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){const n=r(this,t),{channelName:o}=n.providerIdentity;i(this,e,[]),await n.wire.sendAction("destroy-channel",{channelName:o}),r(this,c).call(this)}checkForClientConnection(e){if(!this.isClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider.\n                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return d.clientIdentityIncludesEndpointId(e)?this.connections.some((t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name)):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some((t=>t.uuid===e.uuid&&t.name===e.name))}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider. Client Identity:\n                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,n){var i;const o=this.connections.filter((t=>t.name===e.name&&t.uuid===e.uuid));if(o.length>=2){const i=r(this,t),{uuid:o,name:s}=e,a=null==i?void 0:i.providerIdentity.uuid,c=null==i?void 0:i.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the\n                "endpointId" parameter. The identity you are dispatching to ({uuid: ${o}, name: ${s}})\n                has multiple channelClients for this channel. Your dispatched action: (${n}) from the provider:\n                ({uuid: ${a}, name: ${c}}) will only be processed by the most recently-created client.`)}return null===(i=o.pop())||void 0===i?void 0:i.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}}return e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,c=new WeakMap,d.removalMap=new WeakMap,d})();t.ChannelProvider=a},8347:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterAppPayload=void 0;const i=n(6465),r=n(9659),o=n(3127),s=n(7722),a=n(4999);class c extends r.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new o.default,this.Channel=new s.Channel(e),this.emitter=new i.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}publish(e,t){return this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name}).then((()=>{}))}async send(e,t,n){const i=a.validateIdentity(e);if(i)throw new Error(i);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){const i=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(i,n),this.refCounter.actOnFirst(i,(()=>this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})),(()=>Promise.resolve()))}unsubscribe(e,t,n){const i=e.name||"*",r=this.createSubscriptionKey(e.uuid,i,t);return this.emitter.removeListener(r,n),this.refCounter.actOnLast(r,(()=>this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:i,topic:t,destinationWindowName:this.me.name})),(()=>new Promise((e=>e)).then((()=>{}))))}processMessage(e){const{payload:{message:t,sourceWindowName:n,sourceUuid:i,topic:r}}=e,o=[this.createSubscriptionKey(i,n,r),this.createSubscriptionKey(i,"*",r),this.createSubscriptionKey("*","*",r)],s={uuid:i,name:n};o.forEach((e=>{this.emitter.emit(e,t,s)}))}emitSubscriverEvent(e,t){const{payload:{targetName:n,uuid:i,topic:r}}=t,o={name:n,uuid:i,topic:r};this.emitter.emit(e,o)}createSubscriptionKey(e,t,n){const i=t||"*";if(!(e&&i&&n))throw new Error("Missing uuid, name, or topic string");return function(...e){return e.map((e=>Buffer.from(`${e}`).toString("base64"))).join("/")}(e,i,n)}onmessage(e){const{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}t.default=c,t.InterAppPayload=class{}},2977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2057),o=n(7138),s=(e,...t)=>new e(...t);class a extends i.Base{async init(e,t=s){this.wire.sendAction("interop-init").catch((e=>{}));const n=await this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`),i=await this.fin.Application.getCurrentSync().getInfo();return t(r.InteropBroker,this.wire,n,i.initialOptions.interopBrokerConfiguration||{})}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch((e=>{})),new o.InteropClient(this.wire,e,t)}}t.default=a},2057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InteropBroker=void 0;const i=n(9659),r=n(7115),o=n(1787);let s=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class a extends i.Base{constructor(e,t,n){super(e),this.channel=t,this.interopClients=new Map,this.contextGroupsById=new Map,n.contextGroups&&(s=n.contextGroups),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,this.setContextGroupMap(),this.wireChannel(t)}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch((e=>{}));const n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?new Error("You must join a context group before you can set context."):new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{const{contextGroupId:t}=n;if(!this.contextGroupsById.has(t))throw new Error(`Client has a context group that isn't in the context group mapping: ${t}.`);const i=a.checkContextIntegrity(e);if(!1===i.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${i.reason}. Context: ${JSON.stringify(e)}`);const r=this.contextGroupsById.get(t),o=e.type;r.set(o,e),this.lastContextMap.set(t,o),Array.from(this.interopClients.values()).filter((e=>e.contextGroupId===t)).forEach((t=>{for(const[,n]of t.contextHandlers)a.isContextTypeCompatible(o,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)}))}}getCurrentContext(e,t){var n;this.wire.sendAction("interop-broker-get-current-context").catch((e=>{}));const i=this.getClientState(t);if(!(null==i?void 0:i.contextGroupId))throw new Error("You must be a member of a context group to call getCurrentContext");const{contextGroupId:r}=i,o=this.contextGroupsById.get(r),s=this.lastContextMap.get(r),a=null!==(n=null==e?void 0:e.contextType)&&void 0!==n?n:s;return o&&a?o.get(a):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch((e=>{})),t){a.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);const n=this.channel.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name));if(!n.length)throw new Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);const i=[];for(const t of n)i.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(i)}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch((e=>{}));const n=this.getClientState(t);if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find((t=>t.id===e)))throw new Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await a.setCurrentContextGroupInClientOptions(t,e);const i=this.contextGroupsById.get(e);for(const[,e]of n.contextHandlers){const{contextType:n,handlerId:r}=e;if(void 0===n)i.forEach(((e,n)=>{this.invokeContextHandler(t,r,e)}));else if(i.has(n)){const e=i.get(n);e&&this.invokeContextHandler(t,r,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch((e=>{})),e){a.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);const t=this.channel.connections.filter((t=>t.uuid===e.uuid&&t.name===e.name));if(!t.length)throw new Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);const n=[];for(const e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch((e=>{}));const t=this.getClientState(e);t&&(t.contextGroupId=void 0),await a.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch((e=>{})),s.map((e=>({...e})))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch((e=>{})),this.getContextGroups().find((t=>t.id===e))}getAllClientsInContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch((e=>{})),Array.from(this.interopClients.values()).filter((t=>t.contextGroupId===e)).map((e=>e.clientIdentity))}async handleFiredIntent(e,t){const n=o.generateOverrideWarning("interopClient.fireIntent","fdc3.raiseIntent","InteropBroker.handleFiredIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch((e=>{}));const n=this.intentClientMap.get(t.name),i=`intent-handler-${e.name}`;if(n){const t=n.get(i);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){const{clientIdentity:e,pendingIntents:n}=t;try{const r=n[n.length-1];await this.channel.dispatch(e,i,r),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(i,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);const n=this.intentClientMap.get(t.name);n&&n.set(i,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntent","fdc3.findIntent","InteropBroker.handleInfoForIntent",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){const n=o.generateOverrideWarning("interopClient.getInfoForIntentsByContext","fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){const n=o.generateOverrideWarning("interopClient.fireIntentForContext","fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t);throw console.warn(n),new Error(o.BROKER_ERRORS.fireIntentForContext)}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){var n;const i=null===(n=null==e?void 0:e.interopSnapshotDetails)||void 0===n?void 0:n.contextGroupStates;i&&((null==t?void 0:t.closeExistingWindows)||this.updateExistingClients(i),this.rehydrateContextGroupStates(i))}updateExistingClients(e){this.interopClients.forEach((t=>{const{clientIdentity:n,contextGroupId:i,contextHandlers:r}=t;if(i){const t=e[i];for(const[,e]of Object.entries(t))r.forEach((t=>{const{handlerId:i,contextType:r}=t;a.isContextTypeCompatible(e.type,r)&&this.invokeContextHandler(n,i,e)}))}}))}getContextGroupStates(){return a.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){const t=Object.entries(e);for(const[e,n]of t){const t=Object.entries(n);for(const[n,i]of t)this.contextGroupsById.has(e)?this.contextGroupsById.get(e).set(n,i):console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${e}`)}}contextHandlerRegistered({contextType:e,handlerId:t},n){const i={contextType:e,handlerId:t},r=this.getClientState(n);if(null==r||r.contextHandlers.set(t,i),r&&r.contextGroupId){const{contextGroupId:i}=r,o=this.contextGroupsById.get(i);if(void 0===e)o.forEach(((e,i)=>{this.invokeContextHandler(n,t,e)}));else if(o.has(e)){const i=o.get(e);i&&this.invokeContextHandler(n,t,i)}}}async intentHandlerRegistered(e,t){const{handlerId:n}=e,i=this.intentClientMap.get(t.name),r=null==i?void 0:i.get(n);if(i)if(r){const{pendingIntents:e}=r;r.clientIdentity=t,r.isReady=!0;try{if(e.length>0){const i=e[e.length-1];await this.channel.dispatch(t,n,i),r.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else i.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);const e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}invokeContextHandler(e,t,n){this.channel.dispatch(e,t,n).catch((i=>{console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,i)}))}removeContextHandler({handlerId:e},t){const n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw new Error("Failed to join session context group: must specify group id.");const n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{const n=new r.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw new Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){const t=Object.fromEntries(e),n={};return Object.entries(t).forEach((([e,t])=>{const i=Object.fromEntries(t);n[e]=i})),n}static checkContextIntegrity(e){if(!e)return{isValid:!1,reason:"No context supplied"};if("object"!=typeof e)return{isValid:!1,reason:"Context must be an Object"};if(!e.type)return{isValid:!1,reason:"Context must have a type property"};if(e.id&&"object"!=typeof e.id)return{isValid:!1,reason:"Context id must be an Object populated with key-value identifiers (if set)"};if(e.id){const{id:t}=e,n=Object.keys(t);let i=!1;if(!n.length)return{isValid:!1,reason:"Context id must have at least one key-value identifier"};if(n.forEach((e=>{"string"==typeof e&&"string"==typeof t[e]||(i=!0)})),i)return{isValid:!1,reason:"Context id key-value identifiers must be of type string"}}return e.name&&"string"!=typeof e.name?{isValid:!1,reason:"Context name must be of string type (if set)"}:{isValid:!0}}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(const e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}static async setCurrentContextGroupInClientOptions(e,t){const n=await fin.System.getEntityInfo(e.uuid,e.name);let i;"view"===n.entityType?i=await fin.View.wrap(e):"window"===n.entityType&&(i=await fin.Window.wrap(e)),i?await i.updateOptions({interop:{currentContextGroup:t}}):console.warn(`Setting Current Context Group: Entity with identity ${e.uuid}, ${e.name} is not a window or view. It is a ${n.entityType} instead.`)}wireChannel(e){e.onConnection(((e,t)=>{if(!this.isConnectionAuthorized(e,t))throw new Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw new Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");const n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};(null==t?void 0:t.currentContextGroup)&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=null==t?void 0:t.currentContextGroup),this.interopClients.set(e.endpointId,n)})),e.onDisconnection((e=>{this.interopClients.delete(e.endpointId);const t=this.intentClientMap.get(e.name);t&&e.uuid===fin.me.identity.uuid&&t.forEach((e=>{e.isReady=!1})),this.sessionContextGroupMap.forEach((t=>{t.onDisconnection(e)}))})),e.beforeAction(((e,t,n)=>{if(!this.isActionAuthorized(e,t,n))throw new Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);console.log(e,t,n)})),e.afterAction(console.log),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this))}async isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch((e=>{})),!0}async isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch((e=>{})),!0}}t.InteropBroker=a},7138:function(e,t,n){var i,r,o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropClient=void 0;const a=n(9659),c=n(822),d=n(1787);class h extends a.Base{constructor(e,t,n){super(e),i.set(this,void 0),r.set(this,void 0),o(this,r,new Map),o(this,i,this.wire.environment.whenReady().then((()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${t}`,{payload:n}))))}async setContext(e){return this.wire.sendAction("interop-client-set-context").catch((e=>{})),(await s(this,i)).dispatch("setContext",{context:e})}async addContextHandler(e,t){this.wire.sendAction("interop-client-add-context-handler").catch((e=>{}));const n=await s(this,i);let r;t?(r=`invokeContextHandler-${t}-${d.generateId()}`,console.warn(`Warning: By providing a contextType (${t}), you are using the experimental addContextHandler. To avoid issues, make sure you are adding your context handlers at the top level in your application.`)):r="invokeContextHandler";const o=d.wrapContextHandler(e,r);return n.register(r,o),await n.dispatch("contextHandlerRegistered",{handlerId:r,contextType:t}),{unsubscribe:async()=>{n.remove(r),await n.dispatch("removeContextHandler",{handlerId:r})}}}async getContextGroups(){return this.wire.sendAction("interop-client-get-context-groups").catch((e=>{})),(await s(this,i)).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch((e=>{}));const n=await s(this,i);if(!e)throw new Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){return this.wire.sendAction("interop-client-remove-from-context-group").catch((e=>{})),(await s(this,i)).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch((e=>{}));const t=await s(this,i);if(!e)throw new Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){return this.wire.sendAction("interop-client-fire-intent").catch((e=>{})),(await s(this,i)).dispatch("fireIntent",e)}async registerIntentHandler(e,t){this.wire.sendAction("interop-client-register-intent-handler").catch((e=>{}));const n=await s(this,i),r=`intent-handler-${t}`,o=this.wrapIntentHandler(e,r);try{await n.register(r,o),await n.dispatch("intentHandlerRegistered",{handlerId:r})}catch(e){throw new Error("Unable to register intent handler")}return{unsubscribe:async()=>{n.remove(r)}}}async getCurrentContext(e){return this.wire.sendAction("interop-client-get-current-context").catch((e=>{})),(await s(this,i)).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){return this.wire.sendAction("interop-client-get-info-for-intent").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){return this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch((e=>{})),(await s(this,i)).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){return this.wire.sendAction("interop-client-fire-intent-for-context").catch((e=>{})),(await s(this,i)).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{const t=s(this,r).get(e);if(t)return t.getUserInstance();const n=await s(this,i),{hasConflict:o}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});o&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);const a=new c.default(this.wire,s(this,i),e);return s(this,r).set(e,a),a.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}wrapIntentHandler(e,t){return async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}}}}t.InteropClient=h,i=new WeakMap,r=new WeakMap},7115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(8706);t.default=class{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){const{context:n}=e,r=i.InteropBroker.checkContextIntegrity(n);if(!1===r.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach((e=>{var t;null===(t=e.contextHandlers.get(n.type))||void 0===t||t.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getClientState(e){return this.clients.get(e.endpointId)}handlerAdded(e,t){const{handlerId:n,contextType:i}=e,r=this.getClientState(t);if(!r)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(i){const e=r.contextHandlers.get(i)||[];r.contextHandlers.set(i,[...e,n]);const o=this.contextGroupMap.get(i);o&&this.provider.dispatch(t,n,o)}else r.globalHandler=n,[...this.contextGroupMap.keys()].forEach((e=>{const i=this.contextGroupMap.get(e);i&&this.provider.dispatch(t,n,i)}))}handlerRemoved(e,t){const{handlerId:n}=e,i=this.clients.get(t.endpointId);i?(Array.from(i.contextHandlers).forEach((([,e])=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)})),i.globalHandler===n&&(i.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}}},822:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(9659),a=n(1787);class c extends s.Base{constructor(e,t,n){super(e),i.set(this,void 0),this.id=n,r(this,i,t)}async setContext(e){return this.wire.sendAction("interop-session-context-group-set-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){return this.wire.sendAction("interop-session-context-group-get-context").catch((e=>{})),(await o(this,i)).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){this.wire.sendAction("interop-session-context-group-add-handler").catch((e=>{}));const n=await o(this,i);let r;return r=t?`sessionContextHandler:invoke-${this.id}-${t}-${a.generateId()}`:`sessionContextHandler:invoke-${this.id}`,n.register(r,a.wrapContextHandler(e,r)),n.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:r,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(r)}}async createUnsubscribeCb(e){const t=await o(this,i);return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:a.wrapInTryCatch(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:a.wrapInTryCatch(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:a.wrapInTryCatch(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}t.default=c,i=new WeakMap},8706:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2977);t.default=o.default,r(n(7138),t),r(n(2057),t)},1787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BROKER_ERRORS=t.generateOverrideWarning=t.generateOverrideError=t.wrapContextHandler=t.wrapInTryCatch=t.generateId=void 0,t.generateId=()=>`${Math.random()}${Date.now()}`,t.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw new Error((t||"")+e)}},t.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}},t.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`,t.generateOverrideWarning=(e,t,n,i)=>{const{uuid:r,name:o}=i;return`Entity with identity: ${r}/${o} has called ${e} or ${t} but ${n} has not been overridden.`},t.BROKER_ERRORS={fireIntent:t.generateOverrideError("fireIntent","handleFiredIntent"),fireIntentForContext:t.generateOverrideError("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:t.generateOverrideError("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:t.generateOverrideError("getInfoForIntentsByContext","handleInfoForIntentsByContext")}},9641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.getBaseMe=void 0;const i=n(4169),r=n(6720),o=n(4997);function s(e,t,n){return{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e,uuid:t,name:n,entityType:e}}t.getBaseMe=s,t.getMe=function(e){const{uuid:t,name:n,entityType:a}=e.me,c={setContext(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},addContextHandler(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getContextGroups(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},joinContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},removeFromContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getAllClientsInContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")},getInfoForContextGroup(){throw new Error("Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.")}};switch(a){case"view":return Object.assign(new i.View(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"window":return Object.assign(new o._Window(e,{uuid:t,name:n}),s(a,t,n),{interop:c});case"iframe":return Object.assign(new r._Frame(e,{uuid:t,name:n}),s(a,t,n),{interop:c});default:return{...s(a,t,n)}}}},7283:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(6394),o=n(9872);class s extends i.Base{constructor(e,t){super(e),this._channel=t,this._initializer=(...e)=>this.wire.environment.getProviderInitializer().then((t=>t(this.wire.environment)(...e))),this.Layout=new r.LayoutModule(this.wire)}async init(e){const t=null==e?void 0:e.overrideCallback,n=await this.fin.Interop.init(this.fin.me.uuid,null==e?void 0:e.interopOverride);return window.interopBroker=n,this._initializer(t,n)}async wrap(e){return this.wire.sendAction("platform-wrap").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch((e=>{})),new o.Platform({uuid:e.uuid},this._channel)}async getCurrent(){return this.wire.sendAction("platform-get-current").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch((e=>{})),new Promise((async(t,n)=>{try{const{uuid:n}=e,i=await this.fin.Application._create({...e,isPlatformController:!0});i.once("platform-api-ready",(()=>t(this.wrapSync({uuid:n})))),i._run({uuid:n})}catch(e){n(e)}}))}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch((e=>{})),new Promise((async(n,i)=>{try{const i=await this.fin.Application._createFromManifest(e);i.once("platform-api-ready",(()=>n(this.wrapSync({uuid:i.identity.uuid})))),i._run(t)}catch(e){i(e)}}))}}t.default=s},9872:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const o=n(9659),s=n(4999),a=new Map;class c extends o.EmitterBase{constructor(e,t){super(t.wire,"application",e.uuid),this.getClient=e=>{this.wire.sendAction("platform-get-client",this.identity).catch((e=>{}));const t=e||this.identity,{uuid:n}=t;if(!a.has(n)){const e=r(this,i).call(this,n);a.set(n,e)}return a.get(n)},i.set(this,(async e=>{try{const t=`custom-frame-${e}`,n=await this._channel.connect(t,{wait:!1});return n.onDisconnection((()=>{a.delete(e)})),n}catch(t){throw a.delete(e),new Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}})),this.launchLegacyManifest=this.launchContentManifest;const n=s.validateIdentity(e);if(n)throw new Error(n);this._channel=t,this.identity={uuid:e.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch((e=>{}));const i=await this.getClient(),r=await i.dispatch("create-view",{target:t,opts:e,targetView:n});if(!r||s.validateIdentity(r.identity))throw new Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(r)}`);return this.fin.View.wrapSync(r.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch((e=>{}));const t=await this.getClient();e.reason||(e.reason="api-call");const n=await t.dispatch("create-view-container",e);if(!n||s.validateIdentity(n.identity))throw new Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);const{identity:i}=n,r=this.fin.Window.wrapSync(i);return r.name=i.name,r.uuid=i.uuid,r}async quit(){return this.wire.sendAction("platform-quit",this.identity).catch((e=>{})),(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch((e=>{}));const t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){var n;console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch((e=>{}));const i={...e,uuid:null!==(n=e.uuid)&&void 0!==n?n:this.identity.uuid},r=await this.fin.View.wrap(i),o=await r.getOptions();return this.createView(o,t)}async getSnapshot(){return this.wire.sendAction("platform-get-snapshot",this.identity).catch((e=>{})),(await this.getClient()).dispatch("get-snapshot")}async applySnapshot(e,t){this.wire.sendAction("platform-apply-snapshot",this.identity).catch((e=>{}));const n="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";let i;if("string"==typeof e)try{i=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw new Error(`${n}: ${e}`)}else i=e;if(!i.windows)throw new Error(n);const r=await this.getClient();return await r.dispatch("apply-snapshot",{snapshot:i,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch((e=>{}));const t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch((e=>{})),!e)throw new Error("Please provide a serializable object or string to set the context.");const n=await this.getClient(),{entityType:i}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:i,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch((e=>{}));const t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}}t.Platform=c,i=new WeakMap},4386:(e,t)=>{function n(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPresetType=void 0,t.isValidPresetType=n,t.default={isValidPresetType:n}},609:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7283);t.default=o.default,r(n(9872),t)},4210:function(e,t,n){var i,r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0;const s=n(8111),a=n(9659);class c extends a.Base{constructor(){super(...arguments),i.set(this,void 0),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch((e=>{})),!this.fin.me.isWindow)throw new Error("Layout.init can only be called from a Window context.");if(r(this,i))throw new Error("Layout for this window already initialized, please use Layout.replace call to replace the layout.");const t=await this.wire.environment.getManagerConstructor();o(this,i,new t);let{layout:n,containerId:s}=e;n&&console.warn("We recommend using a layout in window options.\n                This layout has not been sanitized and unexpected behavior can occur."),n=n||(await this.fin.Window.getCurrentSync().getOptions()).layout,s=s||"layout-container";const a=document.getElementById(s);return await r(this,i).initManager(),await r(this,i).createLayout(n,a),Object.assign(this.getCurrentSync(),{layoutManager:r(this,i)})}}async wrap(e){return this.wire.sendAction("layout-wrap").catch((e=>{})),new s.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch((e=>{})),new s.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch((e=>{})),!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}}t.LayoutModule=c,i=new WeakMap},8111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;const i=n(4999),r=n(4386),o=n(9659);class s extends o.Base{constructor(e,t){super(t),this.replace=async e=>{this.wire.sendAction("layout-replace").catch((e=>{}));const t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch((e=>{}));const n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch((e=>{}));const t=await this.platform.getClient(),{presetType:n}=e;if(!n||!r.isValidPresetType(n))throw new Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};const n=i.validateIdentity(e);if(n)throw new Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){return this.wire.sendAction("layout-get-config").catch((e=>{})),(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}}t.Layout=s},6394:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4210),t),r(n(8111),t)},1746:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(2878),o=n(6215);class s extends i.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch((e=>{})),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw new Error("you must pass in a valid SnapshotProvider");const t=await this.fin.InterApplicationBus.Channel.create(o.getSnapshotSourceChannelName(fin.me.identity));t.register("get-snapshot",(async()=>({snapshot:await e.getSnapshot()}))),t.register("apply-snapshot",(({snapshot:t})=>e.applySnapshot(t)))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch((e=>{})),new r.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch((e=>{})),this.wrapSync(e)}}t.default=s},2878:function(e,t,n){var i,r,o,s,a,c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSource=void 0;const h=n(9659),l=n(6215),u=new Map;class p extends h.Base{constructor(e,t){super(e),i.set(this,void 0),r.set(this,(()=>(u.has(this.identity.uuid)||u.set(this.identity.uuid,{eventFired:null,clientPromise:null}),u.get(this.identity.uuid)))),o.set(this,(()=>(d(this,r).call(this).clientPromise||(d(this,r).call(this).clientPromise=d(this,s).call(this)),d(this,r).call(this).clientPromise))),s.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);try{d(this,r).call(this).eventFired||await d(this,a).call(this);const t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection((()=>{d(this,r).call(this).clientPromise=null,d(this,r).call(this).eventFired=null})),t}catch(e){throw d(this,r).call(this).clientPromise=null,new Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}})),a.set(this,(async()=>{const e=l.getSnapshotSourceChannelName(this.identity);let t,n;const i=new Promise(((e,i)=>{t=e,n=i}));d(this,r).call(this).eventFired=i;const o=async i=>{try{i.channelName===e&&(t(),await this.fin.InterApplicationBus.Channel.removeListener("connected",o))}catch(e){n(e)}};await this.fin.InterApplicationBus.Channel.on("connected",o)})),c(this,i,t)}get identity(){return d(this,i)}async ready(){this.wire.sendAction("snapshot-source-ready").catch((e=>{}));try{await d(this,o).call(this)}catch(e){await d(this,r).call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch((e=>{}));const e=await d(this,o).call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){return this.wire.sendAction("snapshot-source-apply-snapshot").catch((e=>{})),(await d(this,o).call(this)).dispatch("apply-snapshot",{snapshot:e})}}t.SnapshotSource=p,i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap},7153:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1746);t.default=o.default,r(n(2878),t)},6215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSnapshotSourceChannelName=void 0,t.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`},3641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(5007),o=n(4997);class s extends i.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise(((n,i)=>{const r="external-process-exited";let s,a,c,d;"function"==typeof t.listener&&(c=e=>{const n=e||{};a={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},s===e.processUuid&&(t.listener(a),d.removeListener(r,c))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),d=new o._Window(this.wire,this.wire.me),d.on(r,c)),this.wire.sendAction(e,t).then((({payload:e})=>{s=e.data.uuid,n(e.data),a&&s===a.uuid&&(t.listener(a),d.removeListener(r,c))})).catch((e=>{d&&d.removeListener(r,c),i(e)}))}))}getVersion(){return this.wire.sendAction("get-version").then((({payload:e})=>e.data))}clearCache(e){return this.wire.sendAction("clear-cache",e).then((()=>{}))}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then((()=>{}))}exit(){return this.wire.sendAction("exit-desktop").then((()=>{}))}async fetchManifest(e){const{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then((()=>{}))}getAllWindows(){return this.wire.sendAction("get-all-windows").then((({payload:e})=>e.data))}getAllApplications(){return this.wire.sendAction("get-all-applications").then((({payload:e})=>e.data))}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then((({payload:e})=>e.data))}async getCrashReporterState(){const{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){const t=e,n={...t,diagnosticMode:t.diagnosticsMode||t.diagnosticMode},{payload:{data:{diagnosticMode:i,isRunning:r}}}=await this.wire.sendAction("start-crash-reporter",n);return{diagnosticMode:i,diagnosticsMode:i,isRunning:r}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then((({payload:e})=>e.data))}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then((({payload:e})=>e.data))}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then((({payload:e})=>e.data))}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then((({payload:e})=>e.data))}async isAppCertified(e){const{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then((({payload:e})=>e.data.runtimes))}async getInstalledApps(){const{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then((({payload:e})=>e.data))}getMachineId(){return this.wire.sendAction("get-machine-id").then((({payload:e})=>e.data))}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then((({payload:e})=>e.data))}getLogList(){return this.wire.sendAction("list-logs").then((({payload:e})=>e.data))}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then((({payload:e})=>e.data))}getMousePosition(){return this.wire.sendAction("get-mouse-position").then((({payload:e})=>e.data))}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then((({payload:e})=>e.data))}async getAllProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then((({payload:e})=>e.data))}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then((({payload:e})=>e.data))}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then((({payload:e})=>e.data))}getHostSpecs(){return this.wire.sendAction("get-host-specs").then((({payload:e})=>e.data))}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then((()=>{}))}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then((()=>{}))}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then((()=>{}))}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then((()=>{}))}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then((()=>{}))}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then((()=>{}))}downloadAsset(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadAsset only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`asset-download-progress-${o}`,a=`asset-download-error-${o}`,c=`asset-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-asset",l).catch((e=>{h(),i(e)}))}))}downloadRuntime(e,t){return new Promise(((n,i)=>{if("NodeEnvironment"===this.wire.environment.constructor.name)return void i(new r.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));const o=this.wire.environment.getNextMessageId().toString(),s=`runtime-download-progress-${o}`,a=`runtime-download-error-${o}`,c=`runtime-download-complete-${o}`,d=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},h=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,((e,t)=>{const n=t||e;h(),i(new r.RuntimeError(n))})),this.once(c,(()=>{h(),n()}));const l=Object.assign(e,{downloadId:o});this.wire.sendAction("download-runtime",l).catch((e=>{h(),i(e)}))}))}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then((({payload:e})=>e.data))}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then((({payload:e})=>e.data))}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then((({payload:e})=>e.data))}getCookies(e){const t=this.wire.environment.getUrl(),n=Object.assign(e,{url:t});return this.wire.sendAction("get-cookies",n).then((({payload:e})=>e.data))}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then((()=>{}))}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then((({payload:e})=>e.data))}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then((({payload:e})=>e.data))}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then((({payload:e})=>e.data))}async getServiceConfiguration(e){if("string"!=typeof e.name)throw new Error("Must provide an object with a `name` property having a string value");const{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then((({payload:e})=>e.data))}async getSystemAppConfig(e){if("string"!=typeof e)throw new Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then((({payload:e})=>e.data))}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then((({payload:e})=>e.data))}async launchManifest(e,t){return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:t})).payload.data.manifest}async queryPermissionForCurrentContext(e){const t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){const{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}}t.default=s},240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(4169);class s extends i.Base{async create(e){const{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw new Error("Please provide a name property as a string in order to create a View.");return this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap");const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},3163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(4636),r=n(4997);class o extends i.WebContents{constructor(e,t){super(e,t,"view"),this.identity=t,this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout",{...this.identity}).catch((e=>{})),(await this.getCurrentWindow()).getLayout()),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then((({payload:e})=>e.data)),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then((()=>{})),this.getCurrentWindow=async()=>{const{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new r._Window(this.wire,e)}}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){const t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}t.View=o},4169:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(240);t.default=o.default,r(n(3163),t)},4636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebContents=void 0;const i=n(9659);class r extends i.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then((({payload:e})=>e.data))}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then((({payload:e})=>e.data))}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then((({payload:e})=>e.data))}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then((()=>{}))}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then((()=>{}))}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then((()=>{}))}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then((()=>{}))}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then((()=>{}))}print(e){return this.wire.sendAction("print",{...this.identity,options:e}).then((()=>{}))}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then((({payload:e})=>e.data))}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then((()=>{}))}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then((({payload:e})=>e.data))}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then((({payload:e})=>e.data))}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}}t.WebContents=r},2163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(9659),r=n(4999),o=n(5047);class s extends i.Base{async wrap(e){this.wire.sendAction("window-wrap").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch((e=>{}));const t=r.validateIdentity(e);if(t)throw new Error(t);return new o._Window(this.wire,e)}create(e){return this.wire.sendAction("create-window").catch((e=>{})),new o._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.default=s},5047:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._Window=void 0;const i=n(7264),r=n(4636),o=n(4169);class s extends r.WebContents{constructor(e,t){super(e,t,"window"),this.identity=t}createWindow(e){return this.wire.sendAction("window-create-window",this.identity).catch((e=>{})),new Promise(((t,n)=>{const i="fire-constructor-callback",r=new Promise((e=>{this.on(i,(function t(n){let r;const{success:o}=n,s=n.data,{message:a}=s;r=o?{httpResponseCode:s.httpResponseCode,apiInjected:s.apiInjected}:{message:s.message,networkErrorCode:s.networkErrorCode,stack:s.stack},this.removeListener(i,t),e({message:a,cbPayload:r,success:o})}))}));void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0);const o=this.wire.environment.createChildContent({entityType:"window",options:e});Promise.all([r,o]).then((e=>{const i=e[0];i.success?t(this):n(i);try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}})).catch(n)}))}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then((({payload:e})=>e.data))}getBounds(){return this.wire.sendAction("get-window-bounds",this.identity).then((({payload:e})=>e.data))}center(){return this.wire.sendAction("center-window",this.identity).then((()=>{}))}blur(){return this.wire.sendAction("blur-window",this.identity).then((()=>{}))}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then((()=>{}))}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then((()=>{}))}hide(){return this.wire.sendAction("hide-window",this.identity).then((()=>{}))}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then((()=>{Object.setPrototypeOf(this,null)}))}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then((()=>{}))}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then((({payload:e})=>e.data))}async getCurrentViews(){const{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map((e=>new o.View(this.wire,e)))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}flash(){return this.wire.sendAction("flash-window",this.identity).then((()=>{}))}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then((({payload:e})=>e.data))}async getLayout(){if(this.wire.sendAction("window-get-layout",this.identity).catch((e=>{})),!(await this.getOptions()).layout)throw new Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then((({payload:e})=>e.data))}getParentApplication(){return this.wire.sendAction("window-get-parent-application",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window",this.identity).catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity)).then((e=>e.getWindow()))}async getSnapshot(e){const t={area:e,...this.identity};return console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage"),(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then((({payload:e})=>e.data))}getWebWindow(){return this.wire.sendAction("window-get-web-window",this.identity).catch((e=>{})),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window",this.identity).catch((e=>{})),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then((({payload:e})=>e.data))}maximize(){return this.wire.sendAction("maximize-window",this.identity).then((()=>{}))}minimize(){return this.wire.sendAction("minimize-window",this.identity).then((()=>{}))}moveBy(e,t){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,...this.identity}).then((()=>{}))}moveTo(e,t){return this.wire.sendAction("move-window",{left:e,top:t,...this.identity}).then((()=>{}))}resizeBy(e,t,n){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}resizeTo(e,t,n){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,...this.identity}).then((()=>{}))}restore(){return this.wire.sendAction("restore-window",this.identity).then((()=>{}))}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then((()=>{}))}setBounds(e){return this.wire.sendAction("set-window-bounds",{...e,...this.identity}).then((()=>{}))}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then((()=>{}))}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then((()=>{}))}updateOptions(e){return this.wire.sendAction("update-window-options",{options:e,...this.identity}).then((()=>{}))}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then((()=>{}))}async showPopupMenu(e){const{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then((()=>{}))}}t._Window=s},4997:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2163);t.default=o.default,r(n(5047),t)},1681:(e,t,n)=>{var i;t.H=void 0;const r=n(6465),o=n(6545),s=n(9298);class a extends r.EventEmitter{connect(e){throw new Error("You are not running in OpenFin.")}connectSync(){throw new Error("You are not running in OpenFin.")}send(e){throw new Error("You are not running in OpenFin.")}shutdown(){throw new Error("You are not running in OpenFin.")}constructor(){super()}}class c{constructor(){this.childViews=!0}getDefaultChannelOptions(){throw new Error("Method not implemented.")}getRtcPeer(){throw new Error("Method not implemented.")}getManagerConstructor(){throw new Error("Method not implemented.")}getProviderInitializer(){throw new Error("Method not implemented.")}writeToken(e,t){throw new Error("Method not implemented.")}retrievePort(e){throw new Error("Method not implemented.")}getNextMessageId(){throw new Error("Method not implemented.")}getRandomId(){throw new Error("Method not implemented.")}createChildContent(e){throw new Error("Method not implemented.")}getWebWindow(e){throw new Error("Method not implemented.")}getCurrentEntityIdentity(){throw new Error("Method not implemented.")}getCurrentEntityType(){return"unknown"}raiseEvent(e,t){throw new Error("Method not implemented.")}getUrl(){throw new Error("Method not implemented.")}whenReady(){throw new Error("Method not implemented.")}}t.H="undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.fin)||(()=>{const e=new c,t=new s.default(a,e,{uuid:"",name:""});return new o.default(t)})()},8068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFin=t.registerFin=void 0;const n=new WeakMap;t.registerFin=function(e,t){n.set(e,t)},t.getFin=function(e){const t=n.get(e);if(!t)throw new Error("Could not locate fin api for given transport");return t}},5007:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.NotSupportedError=t.NotImplementedError=t.NoAckError=t.DuplicateCorrelationError=t.UnexpectedActionError=t.DisconnectedError=void 0;class n extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}t.DisconnectedError=n;class i extends Error{}t.UnexpectedActionError=i;class r extends Error{}t.DuplicateCorrelationError=r;class o extends Error{}t.NoAckError=o;class s extends Error{}t.NotImplementedError=s;class a extends Error{}t.NotSupportedError=a;class c extends Error{constructor(e){const t=e.payload||e,{reason:n,error:i}=t;super(n),this.name="RuntimeError",(null==i?void 0:i.stack)&&(this.stack=i.stack)}}t.RuntimeError=c},9298:function(e,t,n){var i,r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n(6465),a=n(8624),c=n(5007),d=n(2734),h=n(9641);class l extends s.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new d.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],i.set(this,void 0),this.connectSync=()=>{o(this,i).connectSync()},this.getPort=()=>{if("NodeEnvironment"!==this.environment.constructor.name)throw new c.NotImplementedError("Not Implemented");return o(this,i).wire.url.split(":").slice(-1)[0]},r(this,i,new e(this.onmessage.bind(this))),this.environment=t,this.sendRaw=o(this,i).send.bind(o(this,i)),this.registerMessageHandler(this.handleMessage.bind(this)),o(this,i).on("disconnected",(()=>{for(const[,{reject:e}]of this.wireListeners)e("Remote connection has closed");this.wireListeners.clear(),this.emit("disconnected")}));const{uuid:s,name:a}=n,l=this.environment.getCurrentEntityType();this.me=h.getBaseMe(l,s,a)}shutdown(){return o(this,i).shutdown()}async connect(e){if(a.isExistingConnectConfig(e))return this.connectByPort(e);if(a.isNewConnectConfig(e)){const t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectByPort(e){const{address:t,uuid:n}=e,r={...e,type:"file-token"},s=o(this,i);await s.connect(t);const a=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==a.action)throw new c.UnexpectedActionError(a.action);const{token:d}=a.payload;await this.environment.writeToken(a.payload.file,a.payload.token);const h=await this.sendAction("request-authorization",r,!0);if("authorization-response"!==h.action)throw new c.UnexpectedActionError(h.action);if(!0!==h.payload.success)throw new c.RuntimeError(h.payload);return d}sendAction(e,t={},n=!1){return new Promise(((r,s)=>{const a=this.environment.getNextMessageId(),c={action:e,payload:t,messageId:a},d=o(this,i);return this.addWireListener(a,r,s,n),d.send(c).catch(s)}))}ferryAction(e){return new Promise(((t,n)=>{const r=this.environment.getNextMessageId();e.messageId=r;const s=e=>{t(e.payload)};return o(this,i).send(e).then((()=>this.addWireListener(r,s,n,!1))).catch(n)}))}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,i){i?this.uncorrelatedListener=t:this.wireListeners.has(e)?n(new c.DuplicateCorrelationError(String(e))):this.wireListeners.set(e,{resolve:t,reject:n})}onmessage(e){for(const t of this.messageHandlers)t.call(null,e)}handleMessage(e){const t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{const{resolve:n,reject:i}=this.wireListeners.get(t);"ack"!==e.action?i(new c.NoAckError(e.action)):"payload"in e?e.payload.success?n.call(null,e):i(new c.RuntimeError(e.payload)):i(new c.RuntimeError(e)),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}i=new WeakMap,t.default=l},8624:(e,t)=>{function n(e){return"string"==typeof e.manifestUrl}function i(e){return r(e)&&"string"==typeof e.address}function r(e){return"string"==typeof e.uuid}function o(e){return e.runtime&&"string"==typeof e.runtime.version}function s(e){return r(e)&&o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalConnectConfig=t.isPortDiscoveryConfig=t.isNewConnectConfig=t.isExistingConnectConfig=t.isExternalConfig=void 0,t.isExternalConfig=n,t.isExistingConnectConfig=i,t.isNewConnectConfig=s,t.isPortDiscoveryConfig=function(e){return n(e)&&o(e)||s(e)},t.isInternalConnectConfig=function(e){return i(e)||s(e)}},2366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPOJO=void 0,t.errorToPOJO=function(e){return{stack:e.stack,message:e.message,toString:e.toString}}},3917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustiveCheck=void 0,t.exhaustiveCheck=function(e,t){throw new Error(`Unsupported value: ${e}${t?`\n Supported values are: ${t.join("")}`:""}`)}},3442:(e,t)=>{async function n(e){const t=[];for(const n of e){const e=await n();t.push(e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMapSerial=t.serial=t.promiseMap=t.promisify=void 0,t.promisify=function(e){return(...t)=>new Promise(((n,i)=>{e(...t,((e,t)=>e?i(e):n(t)))}))},t.promiseMap=async function(e,t){return Promise.all(e.map(t))},t.serial=n,t.promiseMapSerial=async function(e,t){return n(e.map(((e,n,i)=>()=>t(e,n,i))))}},3127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.topicRefMap=new Map}incRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t+1;n=i,this.topicRefMap.set(e,i)}else this.topicRefMap.set(e,1),n=1;return n}decRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t-1;this.topicRefMap.set(e,i),n=i}else n=-1;return n}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}}},2300:(e,t)=>{function n(e){return[...e.split(".").reverse().entries()].reduce(((e,[t,n])=>e+ +n*1e4**t),0)}function i(e,t){return n(e)>=n(t)}function r(e){return e.split("/")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeUuidMeetsMinimumRuntimeVersion=t.parseRuntimeUuid=t.meetsMinimumRuntimeVersion=void 0,t.meetsMinimumRuntimeVersion=i,t.parseRuntimeUuid=r,t.runtimeUuidMeetsMinimumRuntimeVersion=function(e,t){return i(r(e),t)}},4999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateIdentity=void 0,t.validateIdentity=function(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t}},6465:e=>{var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,d;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(e))>0&&s.length>r&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,d=h,console&&console.warn&&console.warn(d)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function u(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):w(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var d=c.length,h=w(c,d);for(n=0;n<d;++n)i(h[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{n.d(i,{dq:()=>a,MS:()=>s,xQ:()=>c,sO:()=>fe,Zu:()=>ge,I3:()=>me,$U:()=>ve,i0:()=>Ce,cX:()=>d,_W:()=>h,U$:()=>w,U7:()=>y,rd:()=>pe});var e,t,r,o=n(1681);class s extends Error{constructor(e="An unexpected error has occurred",t){var n;super(e),t&&(this.innerError=t&&t),this.stack=null===(n=this.stack)||void 0===n?void 0:n.replace(/^(\w*Error)/,`${this.constructor.name}`)}}class a extends s{constructor(e="Failed to execute adapter function",t){super(e,t)}}class c extends s{constructor(e="Failed to raise event",t){super(e,t)}}class d extends s{constructor(e="Failed to initialize adapter",t){super(e,t)}}class h extends s{constructor(e="Invalid parameter value",t){super(e,t)}}!function(e){e.ActivateWorkbook="ActivateWorkbook",e.ActivateWorksheet="ActivateWorksheet",e.AddWorksheet="AddWorksheet",e.CalculateWorkbook="CalculateWorkbook",e.CalculateWorksheet="CalculateWorksheet",e.ClearAllCells="ClearAllCells",e.ClearAllCellValues="ClearAllCellValues",e.ClearAllCellFormatting="ClearAllCellFormatting",e.ClearCellValues="ClearCellValues",e.ClearCellFormatting="ClearCellFormatting",e.ClearCells="ClearCells",e.CloseWorkbook="CloseWorkbook",e.CreateWorkbook="CreateWorkbook",e.DeleteWorksheet="DeleteWorksheet",e.DeregisterEvent="DeregisterEvent",e.EventFired="EventFired",e.GetCalculationMode="GetCalculationMode",e.GetCells="GetCells",e.GetWorkbookById="GetWorkbookById",e.GetWorkbookName="GetWorkbookName",e.GetWorkbooks="GetWorkbooks",e.GetWorksheetById="GetWorksheetById",e.GetWorksheetByName="GetWorksheetByName",e.GetWorksheetName="GetWorksheetName",e.GetWorksheets="GetWorksheets",e.LogMessage="LogMessage",e.OpenWorkbook="OpenWorkbook",e.ProtectWorksheet="ProtectWorksheet",e.RegisterEvent="RegisterEvent",e.SaveWorkbook="SaveWorkbook",e.SaveWorkbookAs="SaveWorkbookAs",e.SetCellValues="SetCellValues",e.SetCellFormatting="SetCellFormatting",e.SetCellName="SetCellName",e.SetWorksheetName="SetWorksheetName",e.FilterCells="FilterCells",e.QuitApplication="QuitApplication"}(e||(e={})),function(e){e.Activate="Activate",e.AddWorksheet="AddWorksheet",e.Change="Change",e.Close="Close",e.Deactivate="Deactivate",e.DeleteWorksheet="DeleteWorksheet"}(t||(t={})),function(e){e.Workbook="Workbook",e.Worksheet="Worksheet"}(r||(r={}));const l="1.3.0";let u=!1;const p="[@openfin/excel]",w=()=>{u=!1},y=()=>{u=!0,g("v1.3.0")},f=(e,t)=>{u&&(e.innerError?console.error(t?`${p} ${t}`:p,e,"\n\n(inner)",e.innerError):console.error(t?`${p} ${t}`:p,e))},g=(...e)=>{u&&console.log(p,...e)},m=(...e)=>{u&&console.warn(p,...e)};o.H||Object.assign(window,{fin:{}}),Object.assign(o.H,{Integrations:{Excel:{enableLogging:y,disableLogging:w}}});const v=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),C=new Map,I=(t,n)=>async()=>{g(`Worksheet: Activate (${n})`);try{await t.dispatch(e.ActivateWorksheet,n)}catch(e){throw new a}},x=(t,n)=>async()=>{g(`Worksheet: Calculate (${n})`);try{await t.dispatch(e.CalculateWorksheet,n)}catch(e){throw new a}},A=(t,n)=>async()=>{g(`Worksheet: Clear all cell values (${n})`);try{await t.dispatch(e.ClearAllCellValues,n)}catch(e){throw new a}},b=(t,n)=>async()=>{g(`Worksheet: Clear all cell formatting (${n})`);try{await t.dispatch(e.ClearAllCellFormatting,n)}catch(e){throw new a}},E=(t,n)=>async()=>{g(`Worksheet: Clear all cells (${n})`);try{await t.dispatch(e.ClearAllCells,n)}catch(e){throw new a}},P=(t,n)=>async i=>{g(`Worksheet: Clear cell values; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellValues,r)}catch(e){throw new a}},k=(t,n)=>async i=>{g(`Worksheet: Clear cell formatting; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCellFormatting,r)}catch(e){throw new a}},M=(t,n)=>async i=>{g(`Worksheet: Clear cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};try{await t.dispatch(e.ClearCells,r)}catch(e){throw new a}},_=(e,t)=>(n,i,r=1e3)=>{if(Number.isNaN(r)||r<=0)throw new s("Update interval must be a positive number");const o=v();g(`Worksheet: Create data stream; streamId:${o}; cellRange:${n}; updateInterval:${r} (${t})`);const a={close:()=>{g(`Closed stream (${o})`),(e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(t=n.timer)&&void 0!==t?t:void 0)&&T(e),C.delete(e)}catch(e){throw f(e),e}})(o)},cellRange:n,id:o,start:()=>{g(`Started streaming (${o})`),B(o,i,e,t)},stop:()=>{g(`Stopped streaming (${o})`),T(o)},updateInterval:r,worksheetId:t};return C.set(o,{dataStream:a}),a},S=(e,t,n,i)=>{const o={eventTarget:r.Worksheet,objectId:t};return{objectId:t,activate:I(e,t),addEventListener:n(e,o),calculate:x(e,t),clearAllCellFormatting:b(e,t),clearAllCells:E(e,t),clearAllCellValues:A(e,t),clearCellFormatting:k(e,t),clearCells:M(e,t),clearCellValues:P(e,t),createDataStream:_(e,t),delete:O(e,t),filterCells:W(e,t),getCells:F(e,t),getName:L(e,t),protect:R(e,t),removeEventListener:i(e),setCellFormatting:$(e,t),setCellName:G(e,t),setCellValues:j(e,t),setName:N(e,t)}},O=(t,n)=>async()=>{g(`Worksheet: Delete (${n})`);try{await t.dispatch(e.DeleteWorksheet,n)}catch(e){throw new a}},W=(t,n)=>async(i,r,o,s,c,d=!0)=>{g(`Worksheet: Filter cells; cellRange:${i} (${n})`,{columnIndex:r,filterOperator:o,criteria1:s,criteria2:c,visibleDropDown:d});const h={cellRange:i,criteria1:s,criteria2:c,columnIndex:r,filterOperator:o,objectId:n,visibleDropDown:d};try{await t.dispatch(e.FilterCells,h)}catch(e){throw new a}},F=(t,n)=>async i=>{g(`Worksheet: Get cells; cellRange:${i} (${n})`);const r={cellRange:i,objectId:n};let o=[];try{o=await t.dispatch(e.GetCells,r),g(`${i}:`,o)}catch(e){throw new a}return o},L=(t,n)=>async()=>{g(`Worksheet: Get name (${n})`);try{return await t.dispatch(e.GetWorksheetName,n)}catch(e){throw new a}},R=(t,n)=>async()=>{g(`Worksheet: Protect (${n})`);try{await t.dispatch(e.ProtectWorksheet,n)}catch(e){throw new a}},$=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell formatting; cellRange:${i} (${n})`,r);const o={cellRange:i,formatting:r,objectId:n};try{await t.dispatch(e.SetCellFormatting,o)}catch(e){throw new a}},G=(t,n)=>async(i,r)=>{const o=r.trim();let s;if(!o)throw s=new h("Cell range name cannot be an empty string"),f(s),s;if(o.length>255)throw s=new h("Cell range name must be 255 characters or less"),f(s),s;if(/[^a-z0-9_.?\\"']/.test(o))throw s=new h("Cell range name contains invalid characters"),f(s),s;if(/^\d|\d$/.test(o))throw s=new h("Cell range name must not start or end with a number"),f(s),s;g(`Worksheet: Set cell name; cellRange:${i}; newCellRangeName:${o} (${n})`);const c={cellRange:i,name:o,objectId:n};try{await t.dispatch(e.SetCellName,c)}catch(e){throw new a}},j=(t,n)=>async(i,r)=>{g(`Worksheet: Set cell values; cellRange:${i} (${n})`,r);const o={cellRange:i,objectId:n,valuesMap:r};try{await t.dispatch(e.SetCellValues,o)}catch(e){throw new a}},N=(t,n)=>async i=>{const r=i.trim();let o;if(!r)throw o=new h("Worksheet name cannot be an empty string"),f(o),o;if(r.length>31)throw o=new h("Worksheet name must be 31 characters or less"),f(o),o;g(`Worksheet: Set name; newWorksheetName:${r} (${n})`);const s={newWorksheetName:r,objectId:n};try{return await t.dispatch(e.SetWorksheetName,s)}catch(e){throw new a}},B=(e,t,n,i)=>{var r;try{const o=C.get(e);if(!o)throw new s(`Unable to find registered data stream with id ${e}`);void 0!==(null!==(r=o.timer)&&void 0!==r?r:void 0)&&T(e);const{cellRange:a,updateInterval:c}=o.dataStream,d=async()=>{const r=await t();try{await j(n,i)(a,[[r]])}catch(t){m(`Unable to update cell range for stream with id ${e}: ${null==t?void 0:t.message}`)}},h=window.setInterval(d,c);o.timer=h}catch(e){throw f(e),e}},T=e=>{var t;try{const n=C.get(e);if(!n)throw new s(`Unable to find registered data stream with id ${e}`);if(void 0===(null!==(t=n.timer)&&void 0!==t?t:void 0))return;window.clearInterval(n.timer),n.timer=void 0}catch(e){throw f(e),e}},D=new Map,V=(n,i)=>async(r,o)=>{if(!i||!i.eventTarget||!i.objectId){const e=new c("Event registration missing required values");throw f(e),e}const s=Object.keys(t).find((e=>e.toLowerCase()===r.toLowerCase()));if(!s){const e=new c(`Unsupported event name: ${r}`);throw f(e),e}i.eventName=t[s],g("Registering event",i);try{const t=await n.dispatch(e.RegisterEvent,i);D.set(t,o)}catch(e){throw new a(void 0,e)}},H=t=>async n=>{let i;for(const[e,t]of D)if(t===n){i=e;break}if(!i)throw new c;g("Deregistering event:",i);try{await t.dispatch(e.DeregisterEvent,i),D.delete(i)}catch(e){throw new a}},U=(t,n)=>async()=>{g(`Workbook: Activate (${n})`);try{return await t.dispatch(e.ActivateWorkbook,n)}catch(e){throw new a}},z=(t,n,i,r)=>async()=>{let o;g(`Workbook: Add worksheet (${n})`);try{o=await t.dispatch(e.AddWorksheet,n)}catch(e){throw new a}return S(t,o,i,r)},q=(t,n)=>async()=>{g(`Workbook: Calculate (${n})`);try{await t.dispatch(e.CalculateWorkbook,n)}catch(e){throw new a}},J=(t,n)=>async()=>{g(`Workbook: Close (${n})`);try{return await t.dispatch(e.CloseWorkbook,n)}catch(e){throw new a}},K=(e,t,n,i)=>{const o={eventTarget:r.Workbook,objectId:t};return{objectId:t,activate:U(e,t),addWorksheet:z(e,t,n,i),addEventListener:n(e,o),calculate:q(e,t),close:J(e,t),getCalculationMode:Y(e,t),getName:Q(e,t),getWorksheetByName:Z(e,t,n,i),getWorksheets:X(e,t,n,i),removeEventListener:i(e),save:ee(e,t),saveAs:te(e,t)}},Y=(t,n)=>async()=>{g("Workbook: Get calculation mode");try{return await t.dispatch(e.GetCalculationMode,n)}catch(e){throw new a}},Q=(t,n)=>async()=>{g(`Workbook: Get name (${n})`);try{return await t.dispatch(e.GetWorkbookName,n)}catch(e){throw new a}},Z=(t,n,i,r)=>async o=>{let s;g(`Workbook: Get worksheet by name: ${o} (${n})`);try{if(s=await t.dispatch(e.GetWorksheetByName,{objectId:n,worksheetName:o}),null===s)return null}catch(e){throw new a}return S(t,s,i,r)},X=(t,n,i,r)=>async()=>{let o;g(`Workbook: Get worksheets (${n})`);try{o=await t.dispatch(e.GetWorksheets,n)}catch(e){throw new a}return o.map((e=>S(t,e,i,r)))},ee=(t,n)=>async()=>{g(`Workbook: Save (${n})`);try{return await t.dispatch(e.SaveWorkbook,n)}catch(e){throw new a}},te=(t,n)=>async i=>{g(`Workbook: Save as; filePath:${i} (${n})`);try{return await t.dispatch(e.SaveWorkbookAs,{filePath:i,objectId:n})}catch(e){throw new a}},ne=t=>async()=>{let n;g("Application: Create workbook");try{n=await t.dispatch(e.CreateWorkbook)}catch(e){throw new a}return K(t,n,V,H)},ie=t=>async n=>{let i;g(`Application: Get workbook; id:${n}`);try{i=await t.dispatch(e.GetWorkbookById,n)}catch(e){throw new a}return K(t,i,V,H)},re=t=>async()=>{let n;g("Application: Get workbooks");try{n=await t.dispatch(e.GetWorkbooks)}catch(e){throw new a}return n.map((e=>K(t,e,V,H)))},oe=t=>async n=>{g(`Application: Get worksheet; id:${n}`);try{n=await t.dispatch(e.GetWorksheetById,n)}catch(e){throw new a}return S(t,n,V,H)},se=t=>async n=>{let i;g(`Application: Open workbook; filePath:${n}`);try{i=await t.dispatch(e.OpenWorkbook,n)}catch(e){throw new a}return K(t,i,V,H)},ae=t=>async(n=!0)=>{g(`Application: Quit; displayAlerts:${n}`);try{return await t.dispatch(e.QuitApplication,n)}catch(e){throw new a}};var ce;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(ce||(ce={}));const de="excel-adapter",he=v();let le,ue;const pe=async()=>{try{if(!le||!await(async e=>(await o.H.InterApplicationBus.Channel.getAllChannels()).some((t=>t.channelName===e)))(he)){await(async()=>{var e;const t=null===(e=(await o.H.Application.getCurrentSync().getManifest()).appAssets)||void 0===e?void 0:e.find((e=>e.alias===de));if(t)return void m("Detected adapter package in app manifest appAssets",t);if(await ye())return void g("Using existing adapter package");const n={alias:de,src:"https://cdn.openfin.co/release/integrations/excel/1.3.0/OpenFin.Excel.zip",target:"OpenFin.Excel.exe",version:l};g("Downloading adapter package",n);try{await o.H.System.downloadAsset(n,(()=>{}))}catch(e){throw f("Unable to download adapter package"),e}})();const e=await o.H.System.getRuntimeInfo(),t=o.H.Application.me.uuid,n=e.version,i=e.securityRealm;g("Initializing adapter",{appId:t,channelName:he,runtimeVersion:n,securityRealm:i}),le=await o.H.System.launchExternalProcess({alias:de,arguments:`${t} ${n} ${i} ${he}`}),g(`Adapter running with uuid ${le.uuid}`)}const i=o.H.InterApplicationBus.Channel.connect(he,{payload:{version:l}}),s=new Promise((e=>{setTimeout(e,2e4)})).then((()=>{throw new Error("Connection to adapter timed out")}));ue=await Promise.race([i,s]),g(`Connected to adapter on channel ${he}`),ue.register(e.LogMessage,we),ue.register(e.EventFired,(n=ue,e=>{const{eventRegistrationId:i}=e,o=D.get(i);if(!o)throw new c(`No registered event listener found for id: ${i}`);g("Event payload received",e),((e,n,i)=>{var o,s;switch(i.eventTarget){case r.Workbook:switch(null===(o=i.eventName)||void 0===o?void 0:o.toUpperCase()){case t.Activate.toUpperCase():case t.Close.toUpperCase():case t.Deactivate.toUpperCase():return e();case t.AddWorksheet.toUpperCase():case t.DeleteWorksheet.toUpperCase():return e(S(n,i.worksheetObjectId,V,H));default:throw new c(`Unexpected workbook event: ${i.eventName}`)}case r.Worksheet:switch(null===(s=i.eventName)||void 0===s?void 0:s.toUpperCase()){case t.Activate.toUpperCase():return e();case t.Change.toUpperCase():return e(i.changedCells);case t.Deactivate.toUpperCase():return e();default:throw new c(`Unexpected worksheet event: ${i.eventName}`)}default:throw new c(`Unexpected event target: ${i.eventTarget}`)}})(o,n,e)}))}catch(e){const t=new d(void 0,e);throw f(t),t}var n;return{adapter:{channelName:he,version:l},createWorkbook:ne(ue),getWorkbookById:ie(ue),getWorkbooks:re(ue),getWorksheetById:oe(ue),openWorkbook:se(ue),quit:ae(ue)}},we=e=>{const{message:t,type:n}=e,i="[adapter]";switch(n){case ce.Error:f(t,i);break;case ce.Info:g(i,t);break;case ce.Warn:m(i,t)}},ye=async()=>{try{const e=await o.H.System.getAppAssetInfo({alias:de});return e&&e.version===l}catch(e){return!1}};var fe,ge,me,ve,Ce;!function(e){e.Continuous="Continuous",e.Dash="Dash",e.DashDot="DashDot",e.DashDotDot="DashDotDot",e.Dot="Dot",e.Double="Double",e.SlantDashDot="SlantDashDot",e.None="None"}(fe||(fe={})),function(e){e.Center="Center",e.CenterAcrossSelection="CenterAcrossSelection",e.Distributed="Distributed",e.Fill="Fill",e.General="General",e.Justify="Justify",e.Left="Left",e.Right="Right"}(ge||(ge={})),function(e){e.Automatic="Automatic",e.Checker="Checker",e.CrissCross="CrissCross",e.Down="Down",e.Gray16="Gray16",e.Gray25="Gray25",e.Gray50="Gray50",e.Gray75="Gray75",e.Gray8="Gray8",e.Grid="Grid",e.Horizontal="Horizontal",e.LightDown="LightDown",e.LightHorizontal="LightHorizontal",e.LightUp="LightUp",e.LightVertical="LightVertical",e.LinearGradient="LinearGradient",e.None="None",e.RectangularGradient="RectangularGradient",e.SemiGray75="SemiGray75",e.Solid="Solid",e.Up="Up",e.Vertical="Vertical"}(me||(me={})),function(e){e.Bottom="Bottom",e.Center="Center",e.Distributed="Distributed",e.Justify="Justify",e.Top="Top"}(ve||(ve={})),function(e){e.And="And",e.Or="Or",e.Top10Items="Top10Items",e.Bottom10Items="Bottom10Items",e.Top10Percent="Top10Percent",e.Bottom10Percent="Bottom10Percent",e.FilterValues="FilterValues"}(Ce||(Ce={}))})();var r=i.dq,o=i.MS,s=i.xQ,a=i.sO,c=i.Zu,d=i.I3,h=i.$U,l=i.i0,u=i.cX,p=i._W,w=i.U$,y=i.U7,f=i.rd;

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module) => {

(()=>{"use strict";var e={3133:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>ze.Pt,CLIFilterOptionType:()=>ze.el,CLITemplate:()=>ze.yW,deregister:()=>Ye,hide:()=>tt,register:()=>Qe,show:()=>et});var r={};n.r(r),n.d(r,{subscribe:()=>oe});var o={};n.r(o),n.d(o,{create:()=>Ge});var i=n(6532),s=n(7405);const a="home";var c;!function(e){e.Commands="home-commands"}(c||(c={}));var d,u=n(5806);n(7564);!function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(d||(d={}));const f="all",l="0",p="5",g="6",w=()=>{};function h(e,t){return e?`${e}-${t}`:t}function y(e){return`__search-${e}-topic__`}const v=new Map;function m(e,t){v.has(e)||v.set(e,new Set),v.get(e).add(t)}function S(e,t){const n=v.get(e);n&&n.delete(t)}const C=new Map;function P(e,t){C.has(e)||C.set(e,new Set),C.get(e).add(t)}function R(e,t){const n=C.get(e);n&&n.delete(t)}const b=new Map;async function T(e,t){b.has(e)||b.set(e,new Map),b.get(e).set(t.id,t);const n=v.get(e);if(!n)return;const r=[...n].map((e=>e()));await Promise.all(r)}async function I(e,t){const n=b.get(e);if(!n)return;n.delete(t);const r=C.get(e);if(!r)return;const o=[...r].map((e=>e()));await Promise.all(o)}function L(e){return b.get(e)?[...b.get(e).values()]:[]}function k(e){const t=b.get(e);t&&t.clear()}function M(e,t){const n=b.get(e);return n?n.get(t):null}function B(e,t,n){return{...e,action:n||e.actions[0],dispatcherIdentity:t}}function O(e,t,n="ascending"){const r=e||[];if(!t?.length)return r;const o=[],i=new Map;t.forEach((e=>{if(e.key)return i.set(e.key,e);o.push(e)}));let s=r.map((e=>{const{key:t}=e;if(t&&i.has(t)){const e=i.get(t);return i.delete(t),e}return e}));return s.push(...i.values(),...o),s="ascending"===n?s.sort(((e,t)=>(null!==e.score&&void 0!==e.score?e.score:1/0)-(null!==t.score&&void 0!==t.score?t.score:1/0))):s.sort(((e,t)=>(null!==t.score&&void 0!==t.score?t.score:1/0)-(null!==e.score&&void 0!==e.score?e.score:1/0))),s}function W(e){const t={};let n=[];let r=[];let o=d.Initial;t.getStatus=()=>o,t.getResultBuffer=()=>n,t.setResultBuffer=e=>{n=e,n?.length&&t.onChange()},t.getRevokedBuffer=()=>r,t.setRevokedBuffer=e=>{r=e,r?.length&&t.onChange()},t.onChange=w;const i={};return t.res=i,i.close=()=>{o!==d.Close&&(o=d.Close,t.onChange())},i.open=()=>{o!==d.Open&&(o=d.Open,t.onChange())},i.respond=n=>{const r=O(t.getResultBuffer(),n,e);t.setResultBuffer(r)},i.revoke=(...e)=>{const n=new Set(e),r=t.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));t.setResultBuffer(r),n.size&&(t.getRevokedBuffer().forEach((e=>n.add(e))),t.setRevokedBuffer([...n]))},t}function D(e,t,n){const r=new Set;let o=!1;return{close:()=>{o=!0;for(const e of r)e()},req:{id:t,topic:e,...n,context:n?.context||{},onClose:e=>{r.add(e),o&&e()},removeListener:e=>{r.delete(e)}}}}function x(){return{name:fin.me.name,uuid:fin.me.uuid}}function A(){let e;try{const t=fin.Platform.getCurrentSync();if(!t?.identity)return;e=t.identity.uuid}catch(e){}return e}const E="deregistered or does not exist",F=new Error(`provider ${E}`),_=new Error("provider with name already exists"),$=new Error("bad payload"),q=new Error("subscription rejected"),G=new Error(`channel ${E}`),N=new Map;function H(e){const t=U(e);if(t)return t;throw G}function U(e){const t=N.get(e);if(t)return t}function V(e,t){N.set(e,t)}const j=new Map;function K(e){j.has(e)||j.set(e,new Map);const t=j.get(e);return{getRequestsForIdentity:e=>{const n=function(e){return`${e.uuid}:${e.name}`}(e);return t.has(n)||t.set(n,new Map),t.get(n)}}}async function X(e,t){return(await H(e)).dispatch(l,t)}function J({namespacedTopic:e,topic:t}){const n=M.bind(null,e),r=K(e),o=X.bind(null,e);return async(e,i)=>{if(!e||!e.id||!e.providerId){const e=$;return{error:e.message}}const{id:s,providerId:a}=e,c=n(a);if(!c){const e=F;return{error:e.message}}const d=r.getRequestsForIdentity(i);let u=d.get(e.id);u||(u=D(t,s,e),d.set(e.id,u));const f=W(),l=()=>{const e=f.getResultBuffer();f.setResultBuffer([]);const t=f.getRevokedBuffer();f.setRevokedBuffer([]);const n=f.getStatus();o({id:s,providerId:a,results:e,revoked:t,status:n})};let p=!0,g=!1;f.onChange=()=>{if(p)return p=!1,void l();g||(g=!0,setTimeout((()=>{g=!1,l()}),100))};try{const{results:e,context:t}=await c.onUserInput(u.req,f.res),n=f.getStatus();return{id:s,providerId:a,status:n,results:e,context:t}}catch(e){return{id:s,providerId:a,error:e.message}}}}async function Z(e,t,n){const r=n||await H(e),o=x(),i={identity:o,...t,onUserInput:void 0,onResultDispatch:void 0};await r.dispatch("2",i),await T(e,{identity:o,...t})}async function z(e,t){const n=await H(e);return await n.dispatch("3",t),I(e,t)}async function Q(e,t,n,r){const o=B(n,x(),r),i=M(e,t);if(i){const{onResultDispatch:e}=i;if(!e)return;return e(o)}const s={providerId:t,result:o};return(await H(e)).dispatch(p,s)}async function Y(e,t){const n={...t,context:t?.context||{}},r={},o=async function*(e,t,{setState:n}){const r=await H(e);for(;;){const e=await r.dispatch("1",t),o=e.error;if(o)throw new Error(o);const i=e;if(t.id=i.id,n(i.state),i.done)return i.value;yield i.value}}(e,n,{setState:e=>{r.state=e}});let i=await o.next();return r.id=n.id,r.close=()=>{!async function(e,t){(await H(e)).dispatch(g,{id:t})}(e,r.id)},r.next=()=>{if(i){const e=i;return i=void 0,e}return o.next()},r}async function ee(e){return(await H(e)).dispatch("4",null)}async function te(e){const t=await H(e);var n;n=e,N.delete(n),k(e),await t.disconnect()}function ne(e){const{namespacedTopic:t}=e,n=K(t);return async r=>{if(!U(t))return;const o=n.getRequestsForIdentity(r);for(const{req:e,close:t}of o.values())t(),o.delete(e.id);V(t,(async e=>{const{namespacedTopic:t}=e,n=await re(e);for(const e of L(t))await Z(t,e,n);return n})(e))}}async function re(e){const{namespacedTopic:t}=e,n=y(t),r=await async function(e){for(let t=0;t<50;t++)try{return await fin.InterApplicationBus.Channel.connect(e,{wait:!1})}catch(e){if(49===t)throw e;await new Promise((e=>setTimeout(e,1e3)))}}(n);return r.register(l,J(e)),r.register(g,function(e){const t=K(e);return(e,n)=>{const r=t.getRequestsForIdentity(n),o=r.get(e.id);o&&(o.close(),r.delete(e.id))}}(t)),r.register(p,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const r=M(e,t.providerId);if(!r)return;const{onResultDispatch:o}=r;return o?(t.result.dispatcherIdentity=n,o(t.result)):void 0}}(t)),r.onDisconnection(ne(e)),r}async function oe(e){const t=("string"==typeof e?e:e?.topic)||f,n=("string"==typeof e?null:e?.uuid)||A(),r=h(n,t),o={topic:t,namespace:n,namespacedTopic:r};let i=U(r);return i||(i=re(o),V(r,i),await i),{getAllProviders:ee.bind(null,r),register:Z.bind(null,r),search:Y.bind(null,r),deregister:z.bind(null,r),dispatch:Q.bind(null,r),disconnect:te.bind(null,r)}}const ie=new Map;function se(e){const t=ae(e);if(t)return t;throw G}function ae(e){const t=ie.get(e);if(t)return t}const ce=new Map;function de(e,t){ce.has(e)||ce.set(e,new Set),ce.get(e).add(t)}function ue(e,t){const n=ce.get(e);n&&n.delete(t)}var fe=n(5316);function le(e){return[...L(e)].map((e=>({...e,onUserInput:void 0,onResultDispatch:void 0})))}async function pe(e,t){if(M(e,t.id))throw new Error("provider with name already exists");const n=x();await T(e,{identity:n,...t})}function ge(e,t){I(e,t)}async function we(e,t,n,r){const o=M(e,t);if(!o)throw F;const{onResultDispatch:i}=o;if(!i)return;return i(B(n,x(),r))}async function*he(e,t,n){const r=function(e,t){const n=[],r=[],o=[],i=[];for(const s of e){const e=W(s.scoreOrder),a={results:[],provider:{id:s.id,identity:s.identity,title:s.title,scoreOrder:s.scoreOrder,icon:s.icon}};n.push(a),r.push(e);const c=(async()=>{try{const{results:n,context:r}=await s.onUserInput(t,e.res);a.results=O(a.results,n),a.context={...a.context,...r}}catch(e){a.error=e}c.done=!0})();i.push(c),o.push(o.length)}return{providerResponses:n,listenerResponses:r,openListenerResponses:o,initialResponsePromises:i}}(t.targets?t.targets.map((t=>M(e,t))).filter((e=>!!e)):[...L(e).filter((e=>!e.hidden))],t),{providerResponses:o,listenerResponses:i}=r;let{openListenerResponses:s,initialResponsePromises:a}=r,c=fe.D.Fetching;const u=e=>{c=e,n.setState(c)};let f,l=!1;t.onClose((()=>{l=!0,f&&f()}));do{let e=!1;if(a.length){const t=[];for(const n of a)n.done?e=!0:t.push(n);a=t,a.length||(u(fe.D.Fetched),e=!0)}let t,n=!1;const r=()=>{n=!0,t&&t()},p=[];for(const t of s){const n=i[t],s=o[t],a=n.getStatus();(a===d.Open||c===fe.D.Fetching&&a===d.Initial)&&(p.push(t),n.onChange=r);const u=n.getResultBuffer();u.length&&(n.setResultBuffer([]),s.results=O(s.results,u),e=!0);const f=n.getRevokedBuffer();if(f.length){n.setRevokedBuffer([]);const t=new Set(f);s.results=s.results.filter((({key:e})=>!t.has(e))),e=!0}}if(s=p,e&&(yield o),l)break;n||(s.length||a.length)&&await Promise.race([...a,new Promise((e=>{t=e})),new Promise((e=>{f=e}))])}while(s.length||a.length);return u(fe.D.Complete),o}let ye=0;function ve({namespacedTopic:e,topic:t},n){ye+=1;const r=D(t,ye.toString(),n),o=he(e,r.req,{setState:e=>{o.state=e}});return o.id=ye.toString(),o.close=r.close,o.state=fe.D.Fetching,o}const me=new Map;function Se(e,t){return`${e}:${t}`}function Ce(e){return async(t,...n)=>{if(!t)return{error:$.message};let r;if(t.id)r=Se(e.namespacedTopic,t.id);else{const n=ve(e,t);r=Se(e.namespacedTopic,n.id),t.id=n.id,me.set(r,{generator:n})}const o=me.get(r);clearTimeout(o.timeout);const i=await o.generator.next();return o.timeout=function(e){return window.setTimeout((()=>{me.delete(e)}),1e4)}(r),{...i,id:t.id,state:o.generator.state}}}function Pe(e,t,n){return se(e).dispatch(t,g,{id:n})}function Re(e){return t=>function(e,t){const n=Se(e,t),r=me.get(n);r&&r.generator.close()}(e,t.id)}async function be(e,t,{id:n,query:r,context:o,targets:i}){const s=se(e),a={id:n,query:r,context:o,targets:i,providerId:t.id},c=await s.dispatch(t.identity,l,a),d=c.error;if(d)throw new Error(d);return c}const Te=new Map;function Ie(e,t,n){return`${e}:${t.name}:${t.uuid}:${n}`}const Le=new Map;function ke(e,t,n){return`${e}:${t}:${n}`}function Me(e,t){const n=Ie.bind(null,e,t.identity),r=Pe.bind(null,e,t.identity),o=be.bind(null,e,t);return async(i,s)=>{const a=n(i.id);if(!Te.has(a)){const e=()=>{r(i.id),Te.delete(a)};Te.set(a,e),i.onClose(e)}const c=ke(e,t.id,i.id),u=()=>{Le.delete(c),s.close()};i.onClose(u),Le.set(c,(e=>{e.results?.length&&s.respond(e.results),e.revoked?.length&&s.revoke(...e.revoked),e.status===d.Open&&s.open(),e.status===d.Close&&u()}));const f=await o(i);return f.status===d.Open&&s.open(),f.status!==d.Close&&f.status!==d.Initial||u(),f}}function Be(e,t){return async n=>{const r=se(e),o={providerId:t.id,result:n};return r.dispatch(t.identity,p,o)}}const Oe=new Map;function We(e,t){return`${e}-${t.name}-${t.uuid}`}function De(e){return async(t,n)=>{if(!t||!t.id)return void new Error(JSON.stringify(t));if(M(e,t.id))throw _;t.identity=n,await async function(e,t){const n=We(e,t.identity);Oe.has(n)||Oe.set(n,[]),Oe.get(n).push(t.id),await T(e,{...t,onUserInput:Me(e,t),onResultDispatch:Be(e,t)})}(e,t)}}function xe(e){return t=>{t&&function(e,t){const n=M(e,t);if(!n)return;const r=We(e,n.identity),o=Oe.get(r);if(o){const n=o.findIndex((e=>e===t));-1!==n&&(o.splice(n,1),I(e,t))}}(e,t)}}const Ae=new Map;function Ee(e,t){Ae.has(e)||Ae.set(e,new Set),Ae.get(e).add(t)}function Fe(e,t){const n=Ae.get(e);n&&n.delete(t)}function _e(e){return async t=>{!function(e,t){const n=We(e,t),r=Oe.get(n);if(r){for(const t of r)I(e,t);Oe.delete(n)}}(e,t);const n=Ae.get(e);n&&n.forEach((e=>e(t)))}}async function $e(e){const{namespacedTopic:t}=e,n=y(e.namespacedTopic),r=await(o=n,fin.InterApplicationBus.Channel.create(o));var o;return r.onConnection(function({namespacedTopic:e}){return async t=>{const n=ce.get(e);if(n)for(const e of n)if(!await e(t))throw q}}(e)),r.onDisconnection(_e(t)),r.register(g,Re(t)),r.register(l,function(e){return t=>{const n=ke(e,t.providerId,t.id),r=Le.get(n);r&&r(t)}}(t)),r.register("2",De(t)),r.register("3",xe(t)),r.register("4",function(e){return async()=>le(e)}(t)),r.register("1",Ce(e)),r.register(p,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const r=M(e,t.providerId);if(!r)throw F;const{onResultDispatch:o}=r;return o?(t.result.dispatcherIdentity=n,o(t.result)):void 0}}(t)),r}async function qe(e){const t=se(e);var n;n=e,ie.delete(n),await t.destroy(),k(e)}async function Ge(e){const t=("string"==typeof e?e:e?.topic)||f,n=A(),r=h(n,t),o={topic:t,namespace:n,namespacedTopic:r};let i=ae(r);i||(i=await $e(o),function(e,t){ie.set(e,t)}(r,i));const s=ue.bind(null,r),a=Fe.bind(null,r),c=S.bind(null,r),d=R.bind(null,r);return{getAllProviders:le.bind(null,r),search:ve.bind(null,o),register:pe.bind(null,r),deregister:ge.bind(null,r),onSubscription:de.bind(null,r),onDisconnect:Ee.bind(null,r),onRegister:m.bind(null,r),onDeregister:P.bind(null,r),dispatch:we.bind(null,o),disconnect:qe.bind(null,r),removeListener:e=>{s(e),a(e),c(e),d(e)}}}const{create:Ne}=o,{subscribe:He}=r,Ue={create:Ne,subscribe:He,defaultTopic:"all"},Ve=()=>{const e=window;e.search=Ue,e.fin&&(e.fin.Search=Ue)},je=e=>{const t=()=>{Ve(),window.removeEventListener(e,t)};return t};if("undefined"!=typeof window){Ve();const e="load",t=je(e);window.addEventListener(e,t);const n="DOMContentLoaded",r=je(n);window.addEventListener(n,r)}const Ke=new Map;async function Xe(){await async function(e){Ke.set(e,await He({topic:e,uuid:u.q9.Workspace}))}(a)}let Je;async function Ze(e){return await async function(){return Je||(Je=Xe()),Je}(),Ke.get(e)}var ze=n(3758);const Qe=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);await(0,s.aB)();const t=await Ze(a);try{const n=await t.register(e);return(0,i.ck)({allowed:!0}),n}catch(e){throw(0,i.ck)({allowed:!1,rejectionCode:e.message}),e}},Ye=async e=>{await(0,s.aB)();return(await Ze(a)).deregister(e)};async function et(){return(await(0,s.Xl)()).dispatch(s.Ml.ShowHome,void 0)}async function tt(){return(await(0,s.Xl)()).dispatch(s.Ml.HideHome,void 0)}},3298:(e,t,n)=>{n.d(t,{w:()=>r.w});var r=n(5316)},3758:(e,t,n)=>{var r,o,i;n.d(t,{Pt:()=>r,yW:()=>o,el:()=>i}),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText"}(o||(o={})),function(e){e.MultiSelect="MultiSelect"}(i||(i={}))},7564:(e,t,n)=>{n(3298),n(3758),n(6114),n(2109)},6114:(e,t,n)=>{var r,o;n.d(t,{L:()=>r,T:()=>o}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(r||(r={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(o||(o={}))},2109:(e,t,n)=>{n.d(t,{p6:()=>r,Go:()=>o,bI:()=>i,ZJ:()=>s});const r={Container:"Container",Button:"Button"},o={Text:"Text",Image:"Image",List:"List"},i={...r,...o};var s;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(s||(s={}))},317:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>i.L,StorefrontTemplate:()=>i.T,deregister:()=>f,hide:()=>l,register:()=>u,show:()=>p});var r=n(6532),o=n(7405);n(7564);var i=n(6114);let s;const a=new Map,c=e=>{if(!a.has(e))throw new Error(`Storefront Provider with id ${e} is not registered`);return a.get(e)},d=async e=>{const t=await(0,o.Xl)();if(a.has(e.id))throw new Error(`Storefront provider with id ${e.id} already registered`);return a.set(e.id,e),(e=>{e.isStorefrontActionsRegistered||(e.isStorefrontActionsRegistered=!0,e.register(o.Ml.GetStorefrontProviderApps,(e=>c(e).getApps())),e.register(o.Ml.GetStorefrontProviderFooter,(e=>c(e).getFooter())),e.register(o.Ml.GetStorefrontProviderLandingPage,(e=>c(e).getLandingPage())),e.register(o.Ml.GetStorefrontProviderNavigation,(e=>c(e).getNavigation())),e.register(o.Ml.LaunchStorefrontProviderApp,(({id:e,app:t})=>c(e).launchApp(t))))})(t),t.dispatch(o.Ml.RegisterStorefrontProvider,e)},u=e=>(s=d(e),(0,r.d9)({allowed:!0}),s),f=async e=>{await s,a.delete(e);return(await(0,o.Xl)()).dispatch(o.Ml.DeregisterStorefrontProvider,e)},l=async()=>{await s,await(0,o.aB)(),await(async()=>(await(0,o.Dm)()).dispatch(o.Ml.HideStorefront,void 0))()},p=async()=>{await s,await(0,o.aB)(),await(async()=>(await(0,o.Dm)()).dispatch(o.Ml.ShowStorefront,null))()}},7405:(e,t,n)=>{n.d(t,{Ml:()=>s,Dm:()=>a,Xl:()=>f,aB:()=>u});var r=n(6678);const o=r.Ax&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));var i=n(121);var s;!function(e){e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.GetStorefrontProviders="get-storefront-providers",e.HideStorefront="hide-storefront",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowStorefront="show-storefront",e.CreateStorefrontWindow="create-storefront-window",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme"}(s||(s={}));const a=function(e){let t;return()=>{if(!r.sS)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await o;const n=await fin.InterApplicationBus.Channel.connect(e);return n.onDisconnection((async()=>{t=void 0})),n})().then((e=>e)).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}("__of_workspace_protocol__"),c="isLaunchedViaLib",d=e=>{const t=new URL(e);return t.searchParams.append(c,"true"),t.toString()},u=async()=>{if(!await(0,i.JV)(i.iW))return(r.ZK||-1===navigator.userAgent.indexOf("Win"))&&await fin.Application.startFromManifest(d(r.aW)),fin.System.openUrlWithBrowser(d(r.GX))},f=async()=>(await u(),a())},5806:(e,t,n)=>{n.d(t,{q9:()=>r});var r,o,i,s=n(6678);!function(e){e.Workspace="openfin-browser"}(r||(r={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(o||(o={})),function(e){e.FinProtocol="fin-protocol"}(i||(i={}));s.AB,s.AB,r.Workspace,r.Workspace},6678:(e,t,n)=>{var r;n.d(t,{sS:()=>o,Ax:()=>i,AB:()=>a,oC:()=>c,ZK:()=>d,GX:()=>u,aW:()=>f,u0:()=>p}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(r||(r={}));const o="undefined"!=typeof window&&"undefined"!=typeof fin,i=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),s=i?window.origin:r.Local,a=o&&fin.me.uuid,c=o&&fin.me.name,d=(o&&fin.me.entityType,"prod"===r.Local),u=(r.Dev,r.Staging,r.Prod,"fins://system-apps/workspace"),f="https://cdn.openfin.co/workspace/7.3.10/app.json",l=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,p=(l("https://cdn.openfin.co/workspace/7.3.10"),l("https://cdn.openfin.co/workspace/7.3.10"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&l(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&l(WORKSPACE_DOCS_CLIENT_URL),"7.3.10")},6532:(e,t,n)=>{n.d(t,{ck:()=>a,d9:()=>c});var r,o=n(6678),i=n(121);!function(e){e.Browser="Browser",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(r||(r={}));const s=async(e,t)=>{const n={apiVersion:t.apiVersion||o.u0,componentName:e,componentVersion:o.u0,...t};fin.System.registerUsage({type:"workspace-licensing",data:n})},a=async e=>{i.OI.uuid===i.Gi.uuid&&i.OI.name===i.Gi.name||s(r.Home,e)},c=async e=>{s(r.Storefront,e)}},121:(e,t,n)=>{n.d(t,{Gi:()=>c,OI:()=>d,iW:()=>u,JV:()=>f});var r,o,i=n(5806),s=n(6678);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(r||(r={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(o||(o={}));function a(e){if(!s.sS)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:s.oC,uuid:s.AB};const d={name:r.Home,uuid:i.q9.Workspace},u=(r.Dock,i.q9.Workspace,r.Storefront,i.q9.Workspace,{name:i.q9.Workspace,uuid:i.q9.Workspace});const f=e=>a(e).getOptions().then((()=>!0)).catch((()=>!1))},5316:(e,t,n)=>{var r,o;n.d(t,{D:()=>r,w:()=>o}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(o||(o={}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{AppManifestType:()=>p.L,ButtonStyle:()=>f.ZJ,CLIAction:()=>l.Pt,CLIFilterOptionType:()=>l.el,CLITemplate:()=>l.yW,ContainerTemplateFragmentNames:()=>f.p6,Home:()=>o,Legacy:()=>e,PresentationTemplateFragmentNames:()=>f.Go,SearchTagBackground:()=>u.w,Storefront:()=>d,StorefrontTemplate:()=>p.T,TemplateFragmentTypes:()=>f.bI});var e={};n.r(e),n.d(e,{getPages:()=>a,getWorkspaces:()=>c});var t,o=n(3133);n(6678),n(121);!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(t||(t={}));new Map;var i;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort"}(i||(i={}));var s=n(7405);const a=()=>async function(){return(await(0,s.Dm)()).dispatch(s.Ml.GetLegacyPages,void 0)}(),c=()=>(async()=>(await(0,s.Dm)()).dispatch(s.Ml.GetLegacyWorkspaces,void 0))();var d=n(317),u=n(3298),f=n(2109),l=n(3758),p=n(6114)})(),module.exports=r})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./client/src/integrations/excel/integration-provider.ts":
/*!***************************************************************!*\
  !*** ./client/src/integrations/excel/integration-provider.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ExcelIntegrationProvider": () => (/* binding */ ExcelIntegrationProvider)
/* harmony export */ });
/* harmony import */ var _openfin_excel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/excel */ "../../node_modules/@openfin/excel/openfin.excel.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Implement the integration provider for Excel.
 */
class ExcelIntegrationProvider {
    /**
     * The module is being registered.
     * @param integrationManager The manager for the integration.
     * @param integration The integration details.
     * @returns Nothing.
     */
    async register(integrationManager, integration) {
        this._integrationManager = integrationManager;
        const brokerClient = fin.Interop.connectSync(fin.me.identity.uuid, {});
        const contextGroups = await brokerClient.getContextGroups();
        this._interopClients = {};
        for (const contextGroup of contextGroups) {
            const contextClient = fin.Interop.connectSync(fin.me.identity.uuid, {});
            await contextClient.joinContextGroup(contextGroup.id);
            await contextClient.addContextHandler(async (ctx) => {
                await this.handleContext(integration, contextGroup.id, ctx);
            });
            this._interopClients[contextGroup.id] = contextClient;
        }
        (0,_openfin_excel__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
    }
    /**
     * The module is being deregistered.
     * @param integration The integration details.
     * @returns Nothing.
     */
    async deregister(integration) {
        for (const client in this._interopClients) {
            await this._interopClients[client].removeFromContextGroup();
        }
        this._interopClients = {};
    }
    /**
     * Get a list of the static application entries.
     * @param integration The integration details.
     * @returns The list of application entries.
     */
    async getAppSearchEntries(integration) {
        return integration?.data?.assets.map((a) => this.createResult(integration, a));
    }
    /**
     * An entry has been selected.
     * @param integration The integration details.
     * @param result The dispatched result.
     * @param lastResponse The last response.
     * @returns True if the item was handled.
     */
    async itemSelection(integration, result, lastResponse) {
        if (result.action.name === ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION &&
            result.data.workbook &&
            this._integrationManager.launchAsset) {
            const excelAsset = result.data;
            await this._integrationManager.launchAsset({
                alias: excelAsset.workbook
            });
            const excel = await this.getExcel();
            if (excel) {
                const workbooks = await excel.getWorkbooks();
                for (const workbook of workbooks) {
                    const name = await workbook.getName();
                    if (name === excelAsset.workbook) {
                        for (const worksheetSettings of excelAsset.worksheets) {
                            const worksheet = await workbook.getWorksheetByName(worksheetSettings.name);
                            await worksheet.addEventListener("change", async (cells) => {
                                await this.handleCellChanges(excelAsset, worksheetSettings, cells);
                            });
                        }
                    }
                }
                return true;
            }
        }
        return false;
    }
    /**
     * Get a list of search results based on the query and filters.
     * @param integration The integration details.
     * @param query The query to search for.
     * @param filters The filters to apply.
     * @param lastResponse The last search response used for updating existing results.
     * @returns The list of results and new filters.
     */
    async getSearchResults(integration, query, filters, lastResponse) {
        const results = [];
        return {
            results
        };
    }
    /**
     * Create a search result.
     * @param integration The integration details.
     * @param excelAsset The excel document asset alias.
     * @returns The search result.
     */
    createResult(integration, excelAsset) {
        return {
            key: `excel-${excelAsset.workbook}`,
            title: excelAsset.title,
            label: "Excel",
            icon: integration.icon,
            actions: [{ name: ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION, hotkey: "Enter" }],
            data: {
                providerId: ExcelIntegrationProvider._PROVIDER_ID,
                ...excelAsset
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.SimpleText,
            templateContent: excelAsset.description
        };
    }
    /**
     * Get the excel application.
     * @returns The application.
     * @internal
     */
    async getExcel() {
        try {
            this._excel = await (0,_openfin_excel__WEBPACK_IMPORTED_MODULE_0__.getExcelApplication)();
            return this._excel;
        }
        catch (err) {
            console.error("Error getting Excel application", err);
        }
    }
    /**
     * Handle the cell changes.
     * @param excelAsset The asset to use for processing the cell changes.
     * @param worksheetName The asset to use for processing the cell changes.
     * @param cells The cells that have changed.
     */
    async handleCellChanges(excelAsset, worksheet, cells) {
        if (worksheet.cellHandlers) {
            for (const cell of cells) {
                const cellHandler = worksheet.cellHandlers.find((c) => c.cell === cell.address);
                if (cellHandler) {
                    const client = this._interopClients[cellHandler.contextGroup];
                    if (client && (cellHandler.types.includes("instrument") || cellHandler.types.includes("fdc3.instrument"))) {
                        await client.setContext({
                            type: "fdc3.instrument",
                            id: {
                                ticker: cell.value,
                                _source: `excel.${excelAsset.workbook}.${worksheet.name}`
                            }
                        });
                    }
                }
            }
        }
    }
    /**
     * Handle a context.
     * @param integration The integration details.
     * @param contextGroup The group receiving the context.
     * @param context The context being received.
     */
    async handleContext(integration, contextGroup, context) {
        if (integration.data?.assets) {
            const excel = await this.getExcel();
            if (excel) {
                const workbooks = await excel.getWorkbooks();
                for (const workbook of workbooks) {
                    const workbookName = await workbook.getName();
                    const connectedWorkbook = integration.data?.assets.find((a) => a.workbook === workbookName);
                    if (connectedWorkbook?.worksheets) {
                        for (const worksheetSettings of connectedWorkbook.worksheets) {
                            if (worksheetSettings.cellHandlers) {
                                const incomingSource = `excel.${workbookName}.${worksheetSettings.name}`;
                                if (incomingSource !== context?.id?._source) {
                                    const cellHandlers = worksheetSettings.cellHandlers?.filter((ch) => ch.contextGroup === contextGroup && ch.types.includes(context.type));
                                    for (const cellHandler of cellHandlers) {
                                        const worksheet = await workbook.getWorksheetByName(worksheetSettings.name);
                                        let cellValue;
                                        if (context.type === "fdc3.instrument" || context.type === "instrument") {
                                            cellValue = context.id?.ticker;
                                        }
                                        if (cellValue !== undefined) {
                                            await worksheet.setCellValues(cellHandler.cell, [[cellValue]]);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
/**
 * Provider id.
 * @internal
 */
ExcelIntegrationProvider._PROVIDER_ID = "excel";
/**
 * The key to use for a sheet open action.
 * @internal
 */
ExcelIntegrationProvider._EXCEL_PROVIDER_OPEN_KEY_ACTION = "Open Excel";


/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!************************************************!*\
  !*** ./client/src/integrations/excel/index.ts ***!
  \************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "integration": () => (/* binding */ integration)
/* harmony export */ });
/* harmony import */ var _integration_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./integration-provider */ "./client/src/integrations/excel/integration-provider.ts");

const integration = new _integration_provider__WEBPACK_IMPORTED_MODULE_0__.ExcelIntegrationProvider();

})();

var __webpack_exports__integration = __webpack_exports__.integration;
export { __webpack_exports__integration as integration };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmZpbi9leGNlbC9vcGVuZmluLmV4Y2VsLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vd29ya3NwYWNlL2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC8uL2NsaWVudC9zcmMvaW50ZWdyYXRpb25zL2V4Y2VsL2ludGVncmF0aW9uLXByb3ZpZGVyLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1leGNlbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLWV4Y2VsL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtZXhjZWwvLi9jbGllbnQvc3JjL2ludGVncmF0aW9ucy9leGNlbC9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZT17Mzg4NTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oNDc5NCk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid3JhcC1hcHBsaWNhdGlvblwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uQXBwbGljYXRpb24odGhpcy53aXJlLGUpfXdyYXBTeW5jKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid3JhcC1hcHBsaWNhdGlvbi1zeW5jXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9ci52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQpO3JldHVybiBuZXcgby5BcHBsaWNhdGlvbih0aGlzLndpcmUsZSl9YXN5bmMgX2NyZWF0ZShlKXtyZXR1cm4gdm9pZCAwPT09ZS53YWl0Rm9yUGFnZUxvYWQmJihlLndhaXRGb3JQYWdlTG9hZD0hMSksdm9pZCAwPT09ZS5hdXRvU2hvdyYmdm9pZCAwPT09ZS5pc1BsYXRmb3JtQ29udHJvbGxlciYmKGUuYXV0b1Nob3c9ITApLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY3JlYXRlLWFwcGxpY2F0aW9uXCIsZSksdGhpcy53cmFwKHt1dWlkOmUudXVpZH0pfWNyZWF0ZShlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogZmluLkFwcGxpY2F0aW9uLmNyZWF0ZSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGZpbi5BcHBsaWNhdGlvbi5zdGFydFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLWNyZWF0ZVwiKS5jYXRjaCgoZT0+e30pKSx0aGlzLl9jcmVhdGUoZSl9YXN5bmMgc3RhcnQoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdGFydC1hcHBsaWNhdGlvblwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMuX2NyZWF0ZShlKTtyZXR1cm4gYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJydW4tYXBwbGljYXRpb25cIix7dXVpZDplLnV1aWR9KSx0fWFzeW5jIHN0YXJ0TWFueU1hbmlmZXN0cyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJydW4tYXBwbGljYXRpb25zXCIse2FwcGxpY2F0aW9uczplfSkudGhlbigoKCk9Pnt9KSl9Z2V0Q3VycmVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LWFwcGxpY2F0aW9uXCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcCh7dXVpZDp0aGlzLndpcmUubWUudXVpZH0pfWdldEN1cnJlbnRTeW5jKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWN1cnJlbnQtYXBwbGljYXRpb24tc3luY1wiKS5jYXRjaCgoZT0+e30pKSx0aGlzLndyYXBTeW5jKHt1dWlkOnRoaXMud2lyZS5tZS51dWlkfSl9YXN5bmMgc3RhcnRGcm9tTWFuaWZlc3QoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLXN0YXJ0LWZyb20tbWFuaWZlc3RcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCB0aGlzLl9jcmVhdGVGcm9tTWFuaWZlc3QoZSk7cmV0dXJuIGF3YWl0IG4uX3J1bih0KSxufWNyZWF0ZUZyb21NYW5pZmVzdChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gV2FybmluZzogZmluLkFwcGxpY2F0aW9uLmNyZWF0ZUZyb21NYW5pZmVzdCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGZpbi5BcHBsaWNhdGlvbi5zdGFydEZyb21NYW5pZmVzdFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLWNyZWF0ZS1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpLHRoaXMuX2NyZWF0ZUZyb21NYW5pZmVzdChlKX1fY3JlYXRlRnJvbU1hbmlmZXN0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hcHBsaWNhdGlvbi1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+e2NvbnN0IHQ9ZS5kYXRhLnBsYXRmb3JtP2UuZGF0YS5wbGF0Zm9ybS51dWlkOmUuZGF0YS5zdGFydHVwX2FwcC51dWlkO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6dH0pfSkpLnRoZW4oKHQ9Pih0Ll9tYW5pZmVzdFVybD1lLHQpKSl9fXQuZGVmYXVsdD1zfSw0Nzk0OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkFwcGxpY2F0aW9uPXZvaWQgMDtjb25zdCBpPW4oOTY1OSkscj1uKDQ5OTcpLG89big0MTY5KTtjbGFzcyBzIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsXCJhcHBsaWNhdGlvblwiLHQudXVpZCksdGhpcy5pZGVudGl0eT10LHRoaXMud2luZG93PW5ldyByLl9XaW5kb3codGhpcy53aXJlLHt1dWlkOnRoaXMuaWRlbnRpdHkudXVpZCxuYW1lOnRoaXMuaWRlbnRpdHkudXVpZH0pfXdpbmRvd0xpc3RGcm9tSWRlbnRpdHlMaXN0KGUpe2NvbnN0IHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e3QucHVzaChuZXcgci5fV2luZG93KHRoaXMud2lyZSx7dXVpZDplLnV1aWQsbmFtZTplLm5hbWV9KSl9KSksdH1pc1J1bm5pbmcoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpcy1hcHBsaWNhdGlvbi1ydW5uaW5nXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgcXVpdChlPSExKXthd2FpdCB0aGlzLl9jbG9zZShlKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRlc3Ryb3ktYXBwbGljYXRpb25cIix7Zm9yY2U6ZSwuLi50aGlzLmlkZW50aXR5fSl9X2Nsb3NlKGU9ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsb3NlLWFwcGxpY2F0aW9uXCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWNsb3NlKGU9ITEpe3JldHVybiBjb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiBXYXJuaW5nOiBBcHBsaWNhdGlvbi5jbG9zZSBpcyBkZXByZWNhdGVkIFBsZWFzZSB1c2UgQXBwbGljYXRpb24ucXVpdFwiKSx0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLWNsb3NlXCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksdGhpcy5fY2xvc2UoZSl9Z2V0Q2hpbGRXaW5kb3dzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNoaWxkLXdpbmRvd3NcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT57Y29uc3QgdD1bXTtyZXR1cm4gZS5kYXRhLmZvckVhY2goKGU9Pnt0LnB1c2goe3V1aWQ6dGhpcy5pZGVudGl0eS51dWlkLG5hbWU6ZX0pfSkpLHRoaXMud2luZG93TGlzdEZyb21JZGVudGl0eUxpc3QodCl9KSl9Z2V0TWFuaWZlc3QoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tbWFuaWZlc3RcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRQYXJlbnRVdWlkKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXBhcmVudC1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFNob3J0Y3V0cygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zaG9ydGN1dHNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRWaWV3cygpe2NvbnN0e3BheWxvYWQ6ZX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1nZXQtdmlld3NcIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZS5kYXRhLm1hcCgoZT0+bmV3IG8uVmlldyh0aGlzLndpcmUsZSkpKX1nZXRab29tTGV2ZWwoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYXBwbGljYXRpb24tem9vbS1sZXZlbFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImFwcGxpY2F0aW9uLWdldC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSxQcm9taXNlLnJlc29sdmUodGhpcy53aW5kb3cpfXJlZ2lzdGVyVXNlcihlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlZ2lzdGVyLXVzZXJcIix7dXNlck5hbWU6ZSxhcHBOYW1lOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlbW92ZVRyYXlJY29uKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVtb3ZlLXRyYXktaWNvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXJlc3RhcnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXN0YXJ0LWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9cnVuKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIFdhcm5pbmc6IEFwcGxpY2F0aW9uLnJ1biBpcyBkZXByZWNhdGVkIFBsZWFzZSB1c2UgZmluLkFwcGxpY2F0aW9uLnN0YXJ0XCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXBwbGljYXRpb24tcnVuXCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksdGhpcy5fcnVuKCl9X3J1bihlPXt9KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJydW4tYXBwbGljYXRpb25cIix7bWFuaWZlc3RVcmw6dGhpcy5fbWFuaWZlc3RVcmwsb3B0czplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zY2hlZHVsZVJlc3RhcnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWxhdW5jaC1vbi1jbG9zZVwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNlbmRBcHBsaWNhdGlvbkxvZygpe2NvbnN0e3BheWxvYWQ6ZX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZW5kLWFwcGxpY2F0aW9uLWxvZ1wiLHRoaXMuaWRlbnRpdHkpO3JldHVybiBlLmRhdGF9YXN5bmMgc2V0SnVtcExpc3QoZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtanVtcC1saXN0XCIse2NvbmZpZzplLC4uLnRoaXMuaWRlbnRpdHl9KX1zZXRUcmF5SWNvbihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtdHJheS1pY29uXCIse2VuYWJsZWRJY29uOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXNldFNob3J0Y3V0cyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtc2hvcnRjdXRzXCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9YXN5bmMgc2V0U2hvcnRjdXRRdWVyeVBhcmFtcyhlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1zaG9ydGN1dC1xdWVyeS1hcmdzXCIse2RhdGE6ZSwuLi50aGlzLmlkZW50aXR5fSl9c2V0Wm9vbUxldmVsKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1hcHBsaWNhdGlvbi16b29tLWxldmVsXCIse2xldmVsOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNldEFwcExvZ1VzZXJuYW1lKGUpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2V0LWFwcC1sb2ctdXNlcm5hbWVcIix7ZGF0YTplLC4uLnRoaXMuaWRlbnRpdHl9KX1nZXRUcmF5SWNvbkluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdHJheS1pY29uLWluZm9cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX10ZXJtaW5hdGUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ0ZXJtaW5hdGUtYXBwbGljYXRpb25cIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX13YWl0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2FpdC1mb3ItaHVuZy1hcHBsaWNhdGlvblwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWdldEluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldFByb2Nlc3NJbmZvKCl7Y29uc3R7cGF5bG9hZDp7ZGF0YTplfX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJhcHBsaWNhdGlvbi1nZXQtcHJvY2Vzcy1pbmZvXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGV9YXN5bmMgc2V0RmlsZURvd25sb2FkTG9jYXRpb24oZSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtZmlsZS1kb3dubG9hZC1sb2NhdGlvblwiLHtkb3dubG9hZExvY2F0aW9uOmUsLi4udGhpcy5pZGVudGl0eX0pfX10LkFwcGxpY2F0aW9uPXN9LDcyNjQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigzODg1KTtyKG4oNDc5NCksdCksdC5kZWZhdWx0PW8uZGVmYXVsdH0sOTY1OTpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0sbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5SZXBseT10LkVtaXR0ZXJCYXNlPXQuQmFzZT12b2lkIDA7Y29uc3Qgcz1uKDM0NDIpLGE9big4MDY4KTtjbGFzcyBje2NvbnN0cnVjdG9yKGUpe3RoaXMuaXNOb2RlRW52aXJvbm1lbnQ9KCk9PlwiTm9kZUVudmlyb25tZW50XCI9PT10aGlzLndpcmUuZW52aXJvbm1lbnQuY29uc3RydWN0b3IubmFtZSx0aGlzLmlzT3BlbkZpbkVudmlyb25tZW50PSgpPT5cIk9wZW5GaW5FbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUsdGhpcy53aXJlPWV9Z2V0IGZpbigpe3JldHVybiBhLmdldEZpbih0aGlzLndpcmUpfWdldCBtZSgpe3JldHVybiB0aGlzLndpcmUubWV9fXQuQmFzZT1jLHQuRW1pdHRlckJhc2U9Y2xhc3MgZXh0ZW5kcyBje2NvbnN0cnVjdG9yKGUsdCwuLi5uKXtzdXBlcihlKSx0aGlzLnRvcGljPXQsaS5zZXQodGhpcyx2b2lkIDApLHRoaXMuZXZlbnROYW1lcz0oKT0+dGhpcy5oYXNFbWl0dGVyKCk/dGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKS5ldmVudE5hbWVzKCk6W10sdGhpcy5lbWl0PShlLHQsLi4ubik9PiEhdGhpcy5oYXNFbWl0dGVyKCkmJnRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkuZW1pdChlLHQsLi4ubiksdGhpcy5oYXNFbWl0dGVyPSgpPT50aGlzLndpcmUuZXZlbnRBZ2dyZWdhdG9yLmhhcyhvKHRoaXMsaSkpLHRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyPSgpPT50aGlzLndpcmUuZXZlbnRBZ2dyZWdhdG9yLmdldE9yQ3JlYXRlKG8odGhpcyxpKSksdGhpcy5saXN0ZW5lcnM9ZT0+dGhpcy5oYXNFbWl0dGVyKCk/dGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKS5saXN0ZW5lcnMoZSk6W10sdGhpcy5saXN0ZW5lckNvdW50PWU9PnRoaXMuaGFzRW1pdHRlcigpP3RoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkubGlzdGVuZXJDb3VudChlKTowLHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyPWFzeW5jKGUsdD17fSxuLGkpPT57Y29uc3Qgcj17Li4udGhpcy5pZGVudGl0eSx0aW1lc3RhbXA6dC50aW1lc3RhbXB8fERhdGUubm93KCksdG9waWM6dGhpcy50b3BpYyx0eXBlOmV9LG89dGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKTtuKG8pO3RyeXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN1YnNjcmliZS10by1kZXNrdG9wLWV2ZW50XCIscil9Y2F0Y2goZSl7dGhyb3cgaShvKSx0aGlzLmRlbGV0ZUVtaXR0ZXJJZk5vdGhpbmdSZWdpc3RlcmVkKG8pLGV9fSx0aGlzLmRlcmVnaXN0ZXJFdmVudExpc3RlbmVyPWFzeW5jKGUsdD17fSk9PntpZih0aGlzLmhhc0VtaXR0ZXIoKSl7Y29uc3Qgbj17Li4udGhpcy5pZGVudGl0eSx0aW1lc3RhbXA6dC50aW1lc3RhbXB8fERhdGUubm93KCksdG9waWM6dGhpcy50b3BpYyx0eXBlOmV9O3JldHVybiBhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInVuc3Vic2NyaWJlLXRvLWRlc2t0b3AtZXZlbnRcIixuKS5jYXRjaCgoKCk9Pm51bGwpKSx0aGlzLmdldE9yQ3JlYXRlRW1pdHRlcigpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKX0sdGhpcy5vbj1hc3luYyhlLHQsbik9Pihhd2FpdCB0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlLG4sKG49PntuLm9uKGUsdCl9KSwobj0+e24ucmVtb3ZlTGlzdGVuZXIoZSx0KX0pKSx0aGlzKSx0aGlzLmFkZExpc3RlbmVyPXRoaXMub24sdGhpcy5vbmNlPWFzeW5jKGUsdCxuKT0+e2NvbnN0IGk9KCk9PnRoaXMuZGVyZWdpc3RlckV2ZW50TGlzdGVuZXIoZSk7cmV0dXJuIGF3YWl0IHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbiwobj0+e24ub25jZShlLGkpLG4ub25jZShlLHQpfSksKG49PntuLnJlbW92ZUxpc3RlbmVyKGUsaSksbi5yZW1vdmVMaXN0ZW5lcihlLHQpfSkpLHRoaXN9LHRoaXMucHJlcGVuZExpc3RlbmVyPWFzeW5jKGUsdCxuKT0+KGF3YWl0IHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVyKGUsbiwobj0+e24ucHJlcGVuZExpc3RlbmVyKGUsdCl9KSwobj0+e24ucmVtb3ZlTGlzdGVuZXIoZSx0KX0pKSx0aGlzKSx0aGlzLnByZXBlbmRPbmNlTGlzdGVuZXI9YXN5bmMoZSx0LG4pPT57Y29uc3QgaT0oKT0+dGhpcy5kZXJlZ2lzdGVyRXZlbnRMaXN0ZW5lcihlKTtyZXR1cm4gYXdhaXQgdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXIoZSxuLChuPT57bi5wcmVwZW5kT25jZUxpc3RlbmVyKGUsdCksbi5vbmNlKGUsaSl9KSwobj0+e24ucmVtb3ZlTGlzdGVuZXIoZSx0KSxuLnJlbW92ZUxpc3RlbmVyKGUsaSl9KSksdGhpc30sdGhpcy5yZW1vdmVMaXN0ZW5lcj1hc3luYyhlLHQsbik9Pntjb25zdCBpPWF3YWl0IHRoaXMuZGVyZWdpc3RlckV2ZW50TGlzdGVuZXIoZSxuKTtyZXR1cm4gaSYmKGkucmVtb3ZlTGlzdGVuZXIoZSx0KSx0aGlzLmRlbGV0ZUVtaXR0ZXJJZk5vdGhpbmdSZWdpc3RlcmVkKGkpKSx0aGlzfSx0aGlzLmRlcmVnaXN0ZXJBbGxMaXN0ZW5lcnM9YXN5bmMgZT0+e2NvbnN0IHQ9ey4uLnRoaXMuaWRlbnRpdHksdHlwZTplLHRvcGljOnRoaXMudG9waWN9O2lmKHRoaXMuaGFzRW1pdHRlcigpKXtjb25zdCBlPXRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCksbj1lLmxpc3RlbmVyQ291bnQodC50eXBlKSxpPVtdO2ZvcihsZXQgZT0wO2U8bjtlKyspaS5wdXNoKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidW5zdWJzY3JpYmUtdG8tZGVza3RvcC1ldmVudFwiLHQpLmNhdGNoKCgoKT0+bnVsbCkpKTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoaSksZX19LHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzPWFzeW5jIGU9Pntjb25zdCB0PWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IHRoaXMuZGVyZWdpc3RlckFsbExpc3RlbmVycyhlKTt0JiYodC5yZW1vdmVBbGxMaXN0ZW5lcnMoZSksdGhpcy5kZWxldGVFbWl0dGVySWZOb3RoaW5nUmVnaXN0ZXJlZCh0KSl9O2lmKGUpYXdhaXQgdChlKTtlbHNlIGlmKHRoaXMuaGFzRW1pdHRlcigpKXtjb25zdCBlPXRoaXMuZ2V0T3JDcmVhdGVFbWl0dGVyKCkuZXZlbnROYW1lcygpO2F3YWl0IHMucHJvbWlzZU1hcChlLHQpfXJldHVybiB0aGlzfSxyKHRoaXMsaSxbdCwuLi5uXSksdGhpcy5saXN0ZW5lcnM9ZT0+dGhpcy5oYXNFbWl0dGVyKCk/dGhpcy5nZXRPckNyZWF0ZUVtaXR0ZXIoKS5saXN0ZW5lcnMoZSk6W119ZGVsZXRlRW1pdHRlcklmTm90aGluZ1JlZ2lzdGVyZWQoZSl7MD09PWUuZXZlbnROYW1lcygpLmxlbmd0aCYmdGhpcy53aXJlLmV2ZW50QWdncmVnYXRvci5kZWxldGUobyh0aGlzLGkpKX19LGk9bmV3IFdlYWtNYXAsdC5SZXBseT1jbGFzc3t9fSwzNDI3OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuQmFzZXt3cml0ZVRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXdyaXRlLXRleHRcIixlKS50aGVuKCgoKT0+e30pKX1yZWFkVGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbGlwYm9hcmQtcmVhZC10ZXh0XCIsZSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9d3JpdGVIdG1sKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZS1odG1sXCIsZSkudGhlbigoKCk9Pnt9KSl9cmVhZEh0bWwoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXJlYWQtaHRtbFwiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXdyaXRlUnRmKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZS1ydGZcIixlKS50aGVuKCgoKT0+e30pKX1yZWFkUnRmKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC1yZWFkLXJ0ZlwiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXdyaXRlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsaXBib2FyZC13cml0ZVwiLGUpLnRoZW4oKCgpPT57fSkpfWdldEF2YWlsYWJsZUZvcm1hdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xpcGJvYXJkLXJlYWQtZm9ybWF0c1wiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfX10LmRlZmF1bHQ9cn0sNzgxMzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5FbWl0dGVyTWFwPXZvaWQgMDtjb25zdCBpPW4oNjQ2NSk7ZnVuY3Rpb24gcihlKXtyZXR1cm4gQnVmZmVyLmZyb20oZSkudG9TdHJpbmcoXCJiYXNlNjRcIil9dC5FbWl0dGVyTWFwPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5zdG9yYWdlPW5ldyBNYXB9aGFzaEtleXMoZSl7cmV0dXJuIGUubWFwKHIpLmpvaW4oXCIvXCIpfWdldE9yQ3JlYXRlKGUpe2NvbnN0IHQ9dGhpcy5oYXNoS2V5cyhlKTtyZXR1cm4gdGhpcy5zdG9yYWdlLmhhcyh0KXx8dGhpcy5zdG9yYWdlLnNldCh0LG5ldyBpLkV2ZW50RW1pdHRlciksdGhpcy5zdG9yYWdlLmdldCh0KX1oYXMoZSl7cmV0dXJuIHRoaXMuc3RvcmFnZS5oYXModGhpcy5oYXNoS2V5cyhlKSl9ZGVsZXRlKGUpe2NvbnN0IHQ9dGhpcy5oYXNoS2V5cyhlKTtyZXR1cm4gdGhpcy5zdG9yYWdlLmRlbGV0ZSh0KX19fSwyNzM0OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oNzgxMyk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlck1hcHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5kaXNwYXRjaEV2ZW50PWU9PntpZihmdW5jdGlvbihlKXtyZXR1cm5cInByb2Nlc3MtZGVza3RvcC1ldmVudFwiPT09ZS5hY3Rpb259KGUpKXtjb25zdHtwYXlsb2FkOnR9PWUsbj1mdW5jdGlvbihlKXtjb25zdHt0b3BpYzp0fT1lO2lmKFwiZnJhbWVcIj09PXQpe2NvbnN0e3V1aWQ6bixuYW1lOml9PWU7cmV0dXJuW3QsbixpXX1pZihcIndpbmRvd1wiPT09dCl7Y29uc3R7dXVpZDpuLG5hbWU6aX09ZTtyZXR1cm5bdCxuLGldfWlmKFwiYXBwbGljYXRpb25cIj09PXQpe2NvbnN0e3V1aWQ6bn09ZTtyZXR1cm5bdCxuXX1pZihcInZpZXdcIj09PXQpe2NvbnN0e3V1aWQ6bixuYW1lOml9PWU7cmV0dXJuW3QsbixpXX1yZXR1cm5bdF19KHQpO2lmKHRoaXMuaGFzKG4pKXJldHVybiB0aGlzLmdldE9yQ3JlYXRlKG4pLmVtaXQodC50eXBlLHQpLCEwfXJldHVybiExfX19dC5kZWZhdWx0PXJ9LDcxNjg6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oODI5OCk7Y2xhc3MgbyBleHRlbmRzIGkuQmFzZXt3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4dGVybmFsLWFwcGxpY2F0aW9uLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyByLkV4dGVybmFsQXBwbGljYXRpb24odGhpcy53aXJlLHt1dWlkOmV9KSl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZXh0ZXJuYWwtYXBwbGljYXRpb24td3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyByLkV4dGVybmFsQXBwbGljYXRpb24odGhpcy53aXJlLHt1dWlkOmV9KX19dC5kZWZhdWx0PW99LDgyOTg6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRXh0ZXJuYWxBcHBsaWNhdGlvbj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpO2NsYXNzIHIgZXh0ZW5kcyBpLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSxcImV4dGVybmFsLWFwcGxpY2F0aW9uXCIsdC51dWlkKSx0aGlzLmlkZW50aXR5PXR9Z2V0SW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1leHRlcm5hbC1hcHBsaWNhdGlvbi1pbmZvXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9fXQuRXh0ZXJuYWxBcHBsaWNhdGlvbj1yfSw5MDIxOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBvPW4oNzE2OCk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oODI5OCksdCl9LDY1NDU6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big2NDY1KSxyPW4oMzY0MSksbz1uKDQ5OTcpLHM9big3MjY0KSxhPW4oODM0NyksYz1uKDM0MjcpLGQ9big5MDIxKSxoPW4oNjcyMCksbD1uKDkyMTEpLHU9big0MTY5KSxwPW4oNjA5KSx3PW4oOTY0MSkseT1uKDgwNjgpLGY9big4NzA2KSxnPW4oNzE1Myk7Y2xhc3MgbSBleHRlbmRzIGkuRXZlbnRFbWl0dGVye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCkseS5yZWdpc3RlckZpbihlLHRoaXMpLHRoaXMud2lyZT1lLHRoaXMuU3lzdGVtPW5ldyByLmRlZmF1bHQoZSksdGhpcy5XaW5kb3c9bmV3IG8uZGVmYXVsdChlKSx0aGlzLkFwcGxpY2F0aW9uPW5ldyBzLmRlZmF1bHQoZSksdGhpcy5JbnRlckFwcGxpY2F0aW9uQnVzPW5ldyBhLmRlZmF1bHQoZSksdGhpcy5DbGlwYm9hcmQ9bmV3IGMuZGVmYXVsdChlKSx0aGlzLkV4dGVybmFsQXBwbGljYXRpb249bmV3IGQuZGVmYXVsdChlKSx0aGlzLkZyYW1lPW5ldyBoLmRlZmF1bHQoZSksdGhpcy5HbG9iYWxIb3RrZXk9bmV3IGwuZGVmYXVsdChlKSx0aGlzLlBsYXRmb3JtPW5ldyBwLmRlZmF1bHQoZSx0aGlzLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbCksdGhpcy5WaWV3PW5ldyB1LmRlZmF1bHQoZSksdGhpcy5JbnRlcm9wPW5ldyBmLmRlZmF1bHQoZSksdGhpcy5TbmFwc2hvdFNvdXJjZT1uZXcgZy5kZWZhdWx0KGUpLHRoaXMubWU9dy5nZXRNZShlKSxlLm9uKFwiZGlzY29ubmVjdGVkXCIsKCgpPT57dGhpcy5lbWl0KFwiZGlzY29ubmVjdGVkXCIpfSkpfX10LmRlZmF1bHQ9bX0sMTc3ODooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oODE2MSk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiZnJhbWUtd3JhcFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uX0ZyYW1lKHRoaXMud2lyZSxlKX13cmFwU3luYyhlKXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImZyYW1lLXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uX0ZyYW1lKHRoaXMud2lyZSxlKX1nZXRDdXJyZW50KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZnJhbWUtZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsdGhpcy53aXJlLmVudmlyb25tZW50LmdldEN1cnJlbnRFbnRpdHlJZGVudGl0eSgpKSl9Z2V0Q3VycmVudFN5bmMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmcmFtZS1nZXQtY3VycmVudC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyBvLl9GcmFtZSh0aGlzLndpcmUsdGhpcy53aXJlLmVudmlyb25tZW50LmdldEN1cnJlbnRFbnRpdHlJZGVudGl0eSgpKX19dC5kZWZhdWx0PXN9LDgxNjE6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuX0ZyYW1lPXZvaWQgMDtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLFwiZnJhbWVcIix0LnV1aWQsdC5uYW1lKSx0aGlzLmlkZW50aXR5PXR9Z2V0SW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1mcmFtZS1pbmZvXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UGFyZW50V2luZG93KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXBhcmVudC13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX19dC5fRnJhbWU9cn0sNjcyMDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDE3NzgpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDgxNjEpLHQpfSw5MjExOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxcImdsb2JhbC1ob3RrZXlcIil9YXN5bmMgcmVnaXN0ZXIoZSx0KXthd2FpdCB0aGlzLm9uKGUsdCksYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnbG9iYWwtaG90a2V5LXJlZ2lzdGVyXCIse2hvdGtleTplfSl9YXN5bmMgdW5yZWdpc3RlcihlKXthd2FpdCB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKSxhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdsb2JhbC1ob3RrZXktdW5yZWdpc3RlclwiLHtob3RrZXk6ZX0pfWFzeW5jIHVucmVnaXN0ZXJBbGwoKXthd2FpdCBQcm9taXNlLmFsbCh0aGlzLmV2ZW50TmFtZXMoKS5maWx0ZXIoKGU9PiEoXCJyZWdpc3RlcmVkXCI9PT1lfHxcInVucmVnaXN0ZXJlZFwiPT09ZSkpKS5tYXAoKGU9PnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGUpKSkpLGF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2xvYmFsLWhvdGtleS11bnJlZ2lzdGVyLWFsbFwiLHt9KX1hc3luYyBpc1JlZ2lzdGVyZWQoZSl7Y29uc3R7cGF5bG9hZDp7ZGF0YTp0fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnbG9iYWwtaG90a2V5LWlzLXJlZ2lzdGVyZWRcIix7aG90a2V5OmV9KTtyZXR1cm4gdH19dC5kZWZhdWx0PXJ9LDc1Mzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYW5uZWxCYXNlPXQuUHJvdGVjdGVkSXRlbXM9dm9pZCAwO2NvbnN0IG49ZT0+KHQsbixpKT0+e2NvbnN0IHI9ZSh0LG4saSk7cmV0dXJuIHZvaWQgMD09PXI/bjpyfTt0LlByb3RlY3RlZEl0ZW1zPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wcm92aWRlcklkZW50aXR5PWUsdGhpcy53aXJlPXR9fTtjbGFzcyBpe2NvbnN0cnVjdG9yKCl7dGhpcy5zdWJzY3JpcHRpb25zPW5ldyBNYXB9c3RhdGljIGRlZmF1bHRBY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGBObyBhY3Rpb24gcmVnaXN0ZXJlZCBhdCB0YXJnZXQgZm9yICR7ZX1gKX1hc3luYyBwcm9jZXNzQWN0aW9uKGUsdCxuKXt0cnl7Y29uc3Qgcj10aGlzLnN1YnNjcmlwdGlvbnMuaGFzKGUpP3RoaXMuc3Vic2NyaXB0aW9ucy5nZXQoZSk6KHQsbik9Pnt2YXIgcjtyZXR1cm4obnVsbCE9PShyPXRoaXMuZGVmYXVsdEFjdGlvbikmJnZvaWQgMCE9PXI/cjppLmRlZmF1bHRBY3Rpb24pKGUsdCxuKX0sbz10aGlzLnByZUFjdGlvbj9hd2FpdCB0aGlzLnByZUFjdGlvbihlLHQsbik6dCxzPWF3YWl0IHIobyxuKTtyZXR1cm4gdGhpcy5wb3N0QWN0aW9uP2F3YWl0IHRoaXMucG9zdEFjdGlvbihlLHMsbik6c31jYXRjaCh0KXtpZih0aGlzLmVycm9yTWlkZGxld2FyZSlyZXR1cm4gdGhpcy5lcnJvck1pZGRsZXdhcmUoZSx0LG4pO3Rocm93IHR9fWJlZm9yZUFjdGlvbihlKXtpZih0aGlzLnByZUFjdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlZ2lzdGVyZWQgYmVmb3JlQWN0aW9uIG1pZGRsZXdhcmVcIik7dGhpcy5wcmVBY3Rpb249bihlKX1vbkVycm9yKGUpe2lmKHRoaXMuZXJyb3JNaWRkbGV3YXJlKXRocm93IG5ldyBFcnJvcihcIkFscmVhZHkgcmVnaXN0ZXJlZCBlcnJvciBtaWRkbGV3YXJlXCIpO3RoaXMuZXJyb3JNaWRkbGV3YXJlPWV9YWZ0ZXJBY3Rpb24oZSl7aWYodGhpcy5wb3N0QWN0aW9uKXRocm93IG5ldyBFcnJvcihcIkFscmVhZHkgcmVnaXN0ZXJlZCBhZnRlckFjdGlvbiBtaWRkbGV3YXJlXCIpO3RoaXMucG9zdEFjdGlvbj1uKGUpfXJlbW92ZShlKXt0aGlzLnN1YnNjcmlwdGlvbnMuZGVsZXRlKGUpfXNldERlZmF1bHRBY3Rpb24oZSl7aWYodGhpcy5kZWZhdWx0QWN0aW9uKXRocm93IG5ldyBFcnJvcihcImRlZmF1bHQgYWN0aW9uIGNhbiBvbmx5IGJlIHNldCBvbmNlXCIpO3RoaXMuZGVmYXVsdEFjdGlvbj1lfXJlZ2lzdGVyKGUsdCl7aWYodGhpcy5zdWJzY3JpcHRpb25zLmhhcyhlKSl0aHJvdyBuZXcgRXJyb3IoYFN1YnNjcmlwdGlvbiBhbHJlYWR5IHJlZ2lzdGVyZWQgZm9yIGFjdGlvbjogJHtlfS4gVW5zdWJzY3JpYmUgYmVmb3JlIGFkZGluZyBuZXcgc3Vic2NyaXB0aW9uYCk7cmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9ucy5zZXQoZSx0KSwhMH19dC5DaGFubmVsQmFzZT1pfSw4Mzc4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0sYT10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgYz1uKDc1MzkpLGQ9bmV3IE1hcDtjbGFzcyBoIGV4dGVuZHMgYy5DaGFubmVsQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcyx2b2lkIDApLHRoaXMucHJvY2Vzc0FjdGlvbj0oZSx0LG4pPT5zdXBlci5wcm9jZXNzQWN0aW9uKGUsdCxuKSxvLnNldCh0aGlzLCgoKT0+e2QuZGVsZXRlKHRoaXMuZW5kcG9pbnRJZCksYSh0aGlzLHIpLmNsb3NlKCl9KSkscyh0aGlzLGksbmV3IGMuUHJvdGVjdGVkSXRlbXMoZSx0KSksdGhpcy5kaXNjb25uZWN0TGlzdGVuZXI9KCk9Pnt9LHRoaXMuZW5kcG9pbnRJZD1lLmVuZHBvaW50SWQscyh0aGlzLHIsbiksZC5zZXQodGhpcy5lbmRwb2ludElkLHRoaXMpLG4ucmVjZWl2ZSh0aGlzLnByb2Nlc3NBY3Rpb24pfXN0YXRpYyBjbG9zZUNoYW5uZWxCeUVuZHBvaW50SWQoZSl7Y29uc3QgdD1kLmdldChlKTt0JiZhKHQsbykuY2FsbCh0KX1zdGF0aWMgaGFuZGxlUHJvdmlkZXJEaXNjb25uZWN0KGUsdCl7ZS5kaXNjb25uZWN0TGlzdGVuZXIodCksYShlLG8pLmNhbGwoZSl9Z2V0IHByb3ZpZGVySWRlbnRpdHkoKXtyZXR1cm4gYSh0aGlzLGkpLnByb3ZpZGVySWRlbnRpdHl9YXN5bmMgZGlzcGF0Y2goZSx0KXtpZihhKHRoaXMscikuaXNFbmRwb2ludENvbm5lY3RlZCh0aGlzLnByb3ZpZGVySWRlbnRpdHkuY2hhbm5lbElkKSlyZXR1cm4gYSh0aGlzLHIpLnNlbmQodGhpcy5wcm92aWRlcklkZW50aXR5LmNoYW5uZWxJZCxlLHQpO3Rocm93IG5ldyBFcnJvcihcIlRoZSBjbGllbnQgeW91IGFyZSB0cnlpbmcgdG8gZGlzcGF0Y2ggZnJvbSBpcyBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgdGFyZ2V0IHByb3ZpZGVyLlwiKX1vbkRpc2Nvbm5lY3Rpb24oZSl7dGhpcy5kaXNjb25uZWN0TGlzdGVuZXI9dD0+e3RyeXtlKHQpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihgRXJyb3Igd2hpbGUgY2FsbGluZyB0aGUgb25EaXNjb25uZWN0aW9uIGNhbGxiYWNrOiAke2UubWVzc2FnZX1gKX1maW5hbGx5e3RoaXMuZGlzY29ubmVjdExpc3RlbmVyPSgpPT57fX19fWFzeW5jIGRpc2Nvbm5lY3QoKXtjb25zdCBlPWEodGhpcyxpKSx7Y2hhbm5lbE5hbWU6dCx1dWlkOm4sbmFtZTpyfT1lLnByb3ZpZGVySWRlbnRpdHk7YXdhaXQgZS53aXJlLnNlbmRBY3Rpb24oXCJkaXNjb25uZWN0LWZyb20tY2hhbm5lbFwiLHtjaGFubmVsTmFtZTp0LHV1aWQ6bixuYW1lOnIsZW5kcG9pbnRJZDp0aGlzLmVuZHBvaW50SWR9KSxhKHRoaXMsbykuY2FsbCh0aGlzKX19dC5kZWZhdWx0PWgsaT1uZXcgV2Vha01hcCxyPW5ldyBXZWFrTWFwLG89bmV3IFdlYWtNYXB9LDY3MTE6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0scz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Db25uZWN0aW9uTWFuYWdlcj12b2lkIDA7Y29uc3QgYT1uKDM5MTcpLGM9big5NjU5KSxkPW4oMTA0NiksaD1uKDM4NzApLGw9big1NjkpLHU9bigyOTQyKSxwPW4oMzc0OSksdz1uKDMwMzcpLHk9big3MTEzKTtjbGFzcyBmIGV4dGVuZHMgYy5CYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLGkuc2V0KHRoaXMsdm9pZCAwKSxyLnNldCh0aGlzLHZvaWQgMCksdGhpcy5yZW1vdmVDaGFubmVsRnJvbVByb3ZpZGVyTWFwPWU9Pnt0aGlzLnByb3ZpZGVyTWFwLmRlbGV0ZShlKX0sdGhpcy5vbm1lc3NhZ2U9ZT0+XCJwcm9jZXNzLWNoYW5uZWwtY29ubmVjdGlvblwiPT09ZS5hY3Rpb24mJih0aGlzLnByb2Nlc3NDaGFubmVsQ29ubmVjdGlvbihlKSwhMCksdGhpcy5wcm92aWRlck1hcD1uZXcgTWFwLHRoaXMucHJvdG9jb2xNYW5hZ2VyPW5ldyB3LlByb3RvY29sTWFuYWdlcih0aGlzLmlzTm9kZUVudmlyb25tZW50KCk/W1wiY2xhc3NpY1wiXTpbXCJydGNcIixcImNsYXNzaWNcIl0pLG8odGhpcyxpLG5ldyBwLk1lc3NhZ2VSZWNlaXZlcihlKSksbyh0aGlzLHIsbmV3IGwuUlRDSUNFTWFuYWdlcihlKSksZS5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKHRoaXMub25tZXNzYWdlLmJpbmQodGhpcykpfXN0YXRpYyBnZXRQcm90b2NvbE9wdGlvbnNGcm9tU3RyaW5ncyhlKXtyZXR1cm4gZS5tYXAoKGU9Pntzd2l0Y2goZSl7Y2FzZVwicnRjXCI6cmV0dXJuIGguUlRDSW5mbztjYXNlXCJjbGFzc2ljXCI6cmV0dXJuIGQuQ2xhc3NpY0luZm87ZGVmYXVsdDpyZXR1cm4gYS5leGhhdXN0aXZlQ2hlY2soZSxbXCJydGNcIixcImNsYXNzaWNcIl0pfX0pKX1jcmVhdGVQcm92aWRlcihlLHQpe2NvbnN0IG49T2JqZWN0LmFzc2lnbih0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0RGVmYXVsdENoYW5uZWxPcHRpb25zKCkuY3JlYXRlLGV8fHt9KSxyPXRoaXMucHJvdG9jb2xNYW5hZ2VyLmdldFByb3ZpZGVyUHJvdG9jb2xzKG51bGw9PW4/dm9pZCAwOm4ucHJvdG9jb2xzKSxvPXIubWFwKChlPT57c3dpdGNoKGUpe2Nhc2VcInJ0Y1wiOnJldHVybiBuZXcgaC5SVENTdHJhdGVneTtjYXNlXCJjbGFzc2ljXCI6cmV0dXJuIG5ldyBkLkNsYXNzaWNTdHJhdGVneSh0aGlzLndpcmUscyh0aGlzLGkpLHQuY2hhbm5lbElkLHQpO2RlZmF1bHQ6cmV0dXJuIGEuZXhoYXVzdGl2ZUNoZWNrKGUsW1wicnRjXCIsXCJjbGFzc2ljXCJdKX19KSk7bGV0IGM7aWYoMj09PW8ubGVuZ3RoKXtjb25zdFtlLHRdPW87Yz15LmRlZmF1bHQuY29tYmluZShlLHQpfWVsc2V7aWYoMSE9PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImZhaWxlZCB0byBjb21iaW5lIHN0cmF0ZWdpZXNcIik7W2NdPW99Y29uc3QgbD1uZXcgdS5DaGFubmVsUHJvdmlkZXIodCx0aGlzLndpcmUsYykscD10LmNoYW5uZWxJZDtyZXR1cm4gdGhpcy5wcm92aWRlck1hcC5zZXQocCx7cHJvdmlkZXI6bCxzdHJhdGVneTpjLHN1cHBvcnRlZFByb3RvY29sczpmLmdldFByb3RvY29sT3B0aW9uc0Zyb21TdHJpbmdzKHIpfSksdS5DaGFubmVsUHJvdmlkZXIuc2V0UHJvdmlkZXJSZW1vdmFsKGwsdGhpcy5yZW1vdmVDaGFubmVsRnJvbVByb3ZpZGVyTWFwLmJpbmQodGhpcykpLGx9YXN5bmMgY3JlYXRlQ2xpZW50T2ZmZXIoZSl7Y29uc3QgdD10aGlzLnByb3RvY29sTWFuYWdlci5nZXRDbGllbnRQcm90b2NvbHMobnVsbD09ZT92b2lkIDA6ZS5wcm90b2NvbHMpO2xldCBuO3JldHVybntvZmZlcjp7c3VwcG9ydGVkUHJvdG9jb2xzOmF3YWl0IFByb21pc2UuYWxsKHQubWFwKChhc3luYyBlPT57c3dpdGNoKGUpe2Nhc2VcInJ0Y1wiOntjb25zdHtydGNDbGllbnQ6ZSxjaGFubmVsczp0LG9mZmVyOmkscnRjQ29ubmVjdGlvbklkOm8sY2hhbm5lbHNPcGVuZWQ6YX09YXdhaXQgcyh0aGlzLHIpLnN0YXJ0Q2xpZW50T2ZmZXIoKTtyZXR1cm4gbj17cnRjQ2xpZW50OmUsY2hhbm5lbHM6dCxjaGFubmVsc09wZW5lZDphfSx7dHlwZTpcInJ0Y1wiLHZlcnNpb246aC5SVENJbmZvLnZlcnNpb24scGF5bG9hZDp7b2ZmZXI6aSxydGNDb25uZWN0aW9uSWQ6b319fWNhc2VcImNsYXNzaWNcIjpyZXR1cm57dHlwZTpcImNsYXNzaWNcIix2ZXJzaW9uOmQuQ2xhc3NpY0luZm8udmVyc2lvbn07ZGVmYXVsdDpyZXR1cm4gYS5leGhhdXN0aXZlQ2hlY2soZSxbXCJydGNcIixcImNsYXNzaWNcIl0pfX0pKSksbWF4UHJvdG9jb2xzOjJ9LHJ0YzpufX1hc3luYyBjcmVhdGVDbGllbnRTdHJhdGVneShlLHQpe3ZhciBuO3QuZW5kcG9pbnRJZHx8KHQuZW5kcG9pbnRJZD10aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0TmV4dE1lc3NhZ2VJZCgpLHModGhpcyxpKS5jaGVja0ZvclByZXZpb3VzQ2xpZW50Q29ubmVjdGlvbih0LmNoYW5uZWxJZCkpO2NvbnN0IG89bnVsbCE9PShuPXQuYW5zd2VyKSYmdm9pZCAwIT09bj9uOntzdXBwb3J0ZWRQcm90b2NvbHM6W3t0eXBlOlwiY2xhc3NpY1wiLHZlcnNpb246MX1dfSxhPShhd2FpdCBQcm9taXNlLmFsbChvLnN1cHBvcnRlZFByb3RvY29scy5tYXAoKGFzeW5jIG49PlwicnRjXCI9PT1uLnR5cGUmJmU/KGF3YWl0IHModGhpcyxyKS5maW5pc2hDbGllbnRPZmZlcihlLnJ0Y0NsaWVudCxuLnBheWxvYWQuYW5zd2VyLGUuY2hhbm5lbHNPcGVuZWQpLG5ldyBoLlJUQ1N0cmF0ZWd5KTpcImNsYXNzaWNcIj09PW4udHlwZT9uZXcgZC5DbGFzc2ljU3RyYXRlZ3kodGhpcy53aXJlLHModGhpcyxpKSx0LmVuZHBvaW50SWQsdCk6bnVsbCkpKSkuZmlsdGVyKChlPT5udWxsIT09ZSkpO2xldCBjO2lmKGUmJiFhLnNvbWUoKGU9PmUgaW5zdGFuY2VvZiBoLlJUQ1N0cmF0ZWd5KSkmJmUmJmUucnRjQ2xpZW50LmNsb3NlKCksYS5sZW5ndGg+PTIpYz15LmRlZmF1bHQuY29tYmluZShhWzBdLGFbMV0pO2Vsc2V7aWYoIWEubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIk5vIGNvbXBhdGlibGUgcHJvdG9jb2xzXCIpO1tjXT1hfWNvbnN0IGw9e2VuZHBvaW50SWRlbnRpdHk6dCxydGM6ZX07cmV0dXJuIGMuYWRkRW5kcG9pbnQodC5jaGFubmVsSWQsbCksY31hc3luYyBwcm9jZXNzQ2hhbm5lbENvbm5lY3Rpb24oZSl7Y29uc3R7Y2xpZW50SWRlbnRpdHk6dCxwcm92aWRlcklkZW50aXR5Om4sYWNrVG9TZW5kZXI6aSxwYXlsb2FkOm8sb2ZmZXI6YX09ZS5wYXlsb2FkO3QuZW5kcG9pbnRJZD90LmlzTG9jYWxFbmRwb2ludElkPSExOih0LmVuZHBvaW50SWQ9dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKSx0LmlzTG9jYWxFbmRwb2ludElkPSEwKTtjb25zdCBjPW4uY2hhbm5lbElkLGw9dGhpcy5wcm92aWRlck1hcC5nZXQoYyk7aWYoIWwpcmV0dXJuIGkucGF5bG9hZC5zdWNjZXNzPSExLGkucGF5bG9hZC5yZWFzb249YENoYW5uZWwgXCIke24uY2hhbm5lbE5hbWV9XCIgaGFzIGJlZW4gZGVzdHJveWVkLmAsdGhpcy53aXJlLnNlbmRSYXcoaSk7Y29uc3R7cHJvdmlkZXI6cCxzdHJhdGVneTp3LHN1cHBvcnRlZFByb3RvY29sczp5fT1sO3RyeXtpZighKHAgaW5zdGFuY2VvZiB1LkNoYW5uZWxQcm92aWRlcikpdGhyb3cgRXJyb3IoXCJDYW5ub3QgY29ubmVjdCB0byBhIGNoYW5uZWwgY2xpZW50XCIpO2NvbnN0IGU9bnVsbCE9YT9hOntzdXBwb3J0ZWRQcm90b2NvbHM6W3t0eXBlOlwiY2xhc3NpY1wiLHZlcnNpb246MX1dLG1heFByb3RvY29sczoxfSxuPXRoaXMucHJvdG9jb2xNYW5hZ2VyLmdldENvbXBhdGlibGVQcm90b2NvbHMoeSxlKTtpZighbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwcm92aWRlciBkb2VzIG5vdCBzdXBwb3J0IGFueSBvZiB0aGUgb2ZmZXJlZCBwcm90b2NvbHMuXCIpO2NvbnN0IGM9YXdhaXQgcC5wcm9jZXNzQ29ubmVjdGlvbih0LG8pO2kucGF5bG9hZC5wYXlsb2FkPWkucGF5bG9hZC5wYXlsb2FkfHx7fTtsZXQgbD17c3VwcG9ydGVkUHJvdG9jb2xzOltdLGVuZHBvaW50UGF5bG9hZFByb21pc2U6UHJvbWlzZS5yZXNvbHZlKHtlbmRwb2ludElkZW50aXR5OnR9KX07cmV0dXJuIGw9YXdhaXQgbi5yZWR1Y2UoKGFzeW5jKGUsdCk9Pntjb25zdCBuPWF3YWl0IGU7aWYoXCJydGNcIj09PXQudHlwZSl7Y29uc3R7YW5zd2VyOmUscnRjQ2xpZW50OmksY2hhbm5lbHM6b309YXdhaXQgcyh0aGlzLHIpLmNyZWF0ZVByb3ZpZGVyQW5zd2VyKHQucGF5bG9hZC5ydGNDb25uZWN0aW9uSWQsdC5wYXlsb2FkLm9mZmVyKTtuLnN1cHBvcnRlZFByb3RvY29scy5wdXNoKHt0eXBlOlwicnRjXCIsdmVyc2lvbjpoLlJUQ0luZm8udmVyc2lvbixwYXlsb2FkOnthbnN3ZXI6ZX19KSxuLmVuZHBvaW50UGF5bG9hZFByb21pc2U9bi5lbmRwb2ludFBheWxvYWRQcm9taXNlLnRoZW4oKGU9Pm8udGhlbigodD0+KHsuLi5lLHJ0Yzp7cnRjQ2xpZW50OmksY2hhbm5lbHM6dH19KSkpKSl9ZWxzZSBuLnN1cHBvcnRlZFByb3RvY29scy5wdXNoKHt0eXBlOlwiY2xhc3NpY1wiLHZlcnNpb246ZC5DbGFzc2ljSW5mby52ZXJzaW9ufSk7cmV0dXJuIG59KSxQcm9taXNlLnJlc29sdmUobCkpLGwuZW5kcG9pbnRQYXlsb2FkUHJvbWlzZS50aGVuKChlPT53LmFkZEVuZHBvaW50KHQuZW5kcG9pbnRJZCxlKSkpLGkucGF5bG9hZC5wYXlsb2FkLnJlc3VsdD1jLGkucGF5bG9hZC5wYXlsb2FkLmFuc3dlcj1sLHRoaXMud2lyZS5zZW5kUmF3KGkpfWNhdGNoKGUpe3JldHVybiBpLnBheWxvYWQuc3VjY2Vzcz0hMSxpLnBheWxvYWQucmVhc29uPWUubWVzc2FnZSx0aGlzLndpcmUuc2VuZFJhdyhpKX19fXQuQ29ubmVjdGlvbk1hbmFnZXI9ZixpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXB9LDc3MjI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ2hhbm5lbD12b2lkIDA7Y29uc3Qgcz1uKDgzNzgpLGE9bigyOTQyKSxjPW4oOTY1OSksZD1uKDY3MTEpLGg9KCk9Pnt9O2NsYXNzIGwgZXh0ZW5kcyBjLkVtaXR0ZXJCYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUsXCJjaGFubmVsXCIpLGkuc2V0KHRoaXMsdm9pZCAwKSxyKHRoaXMsaSxuZXcgZC5Db25uZWN0aW9uTWFuYWdlcihlKSl9YXN5bmMgZ2V0QWxsQ2hhbm5lbHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYWxsLWNoYW5uZWxzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIG9uQ2hhbm5lbENvbm5lY3QoZSl7YXdhaXQgdGhpcy5vbihcImNvbm5lY3RlZFwiLGUpfWFzeW5jIG9uQ2hhbm5lbERpc2Nvbm5lY3QoZSl7YXdhaXQgdGhpcy5vbihcImRpc2Nvbm5lY3RlZFwiLGUpfWFzeW5jIGNvbm5lY3QoZSx0KXtpZighZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgYSBjaGFubmVsTmFtZSBzdHJpbmcgdG8gY29ubmVjdCB0byBhIGNoYW5uZWwuXCIpO2NvbnN0IG49T2JqZWN0LmFzc2lnbih0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0RGVmYXVsdENoYW5uZWxPcHRpb25zKCkuY29ubmVjdCx0fHx7fSk7bGV0IHI9aCxhPWg7Y29uc3QgYz1uZXcgUHJvbWlzZSgodD0+e3I9dCxhPWk9PntlPT09aS5jaGFubmVsTmFtZSYmKHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJjb25uZWN0ZWRcIixhKSx0aGlzLmNvbm5lY3QoZSxuKS50aGVuKChlPT57dChlKX0pKSl9LHRoaXMub24oXCJjb25uZWN0ZWRcIixhKX0pKTt0cnl7Y29uc3R7b2ZmZXI6dCxydGM6Y309YXdhaXQgbyh0aGlzLGkpLmNyZWF0ZUNsaWVudE9mZmVyKG4pLGQ9YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjb25uZWN0LXRvLWNoYW5uZWxcIix7Y2hhbm5lbE5hbWU6ZSwuLi5uLG9mZmVyOnR9KSx7cGF5bG9hZDp7ZGF0YTpofX09ZDtyJiZyKCksdGhpcy5yZW1vdmVMaXN0ZW5lcihcImNvbm5lY3RlZFwiLGEpO2NvbnN0IGw9YXdhaXQgbyh0aGlzLGkpLmNyZWF0ZUNsaWVudFN0cmF0ZWd5KGMsaCksdT1uZXcgcy5kZWZhdWx0KGgsdGhpcy53aXJlLGwpO3JldHVybiBsLm9uRW5kcG9pbnREaXNjb25uZWN0KGguY2hhbm5lbElkLChhc3luYygpPT57dHJ5e2F3YWl0IHUuZGlzY29ubmVjdCgpfWNhdGNoKGUpe2NvbnNvbGUud2FybihgU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIGRpc2Nvbm5lY3QgZm9yIGNsaWVudCB3aXRoIHV1aWQ6ICR7aC51dWlkfSAvIG5hbWU6ICR7aC5uYW1lfSAvIGVuZHBvaW50SWQ6ICR7aC5lbmRwb2ludElkfS5gKX1maW5hbGx5e3MuZGVmYXVsdC5oYW5kbGVQcm92aWRlckRpc2Nvbm5lY3QodSxoKX19KSksdGhpcy5vbihcImRpc2Nvbm5lY3RlZFwiLCh0PT57dC5jaGFubmVsTmFtZT09PWUmJnMuZGVmYXVsdC5oYW5kbGVQcm92aWRlckRpc2Nvbm5lY3QodSx0KX0pKSx1fWNhdGNoKHQpe2NvbnN0IGk9XCJpbnRlcm5hbC1uYWNrXCI7aWYoe3dhaXQ6ITAsLi4ubn0ud2FpdCYmdC5tZXNzYWdlJiZ0Lm1lc3NhZ2UuaW5jbHVkZXMoaSkpcmV0dXJuIGNvbnNvbGUud2FybihgQ2hhbm5lbCBub3QgZm91bmQgZm9yIGNoYW5uZWxOYW1lOiAke2V9LCB3YWl0aW5nIGZvciBjaGFubmVsIGNvbm5lY3Rpb24uYCksYzt0aHJvdyB0Lm1lc3NhZ2U9PT1pP25ldyBFcnJvcihgTm8gY2hhbm5lbCBmb3VuZCBmb3IgY2hhbm5lbE5hbWU6ICR7ZX1gKTpuZXcgRXJyb3IodCl9fWFzeW5jIGNyZWF0ZShlLHQpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGEgY2hhbm5lbE5hbWUgdG8gY3JlYXRlIGEgY2hhbm5lbFwiKTtjb25zdHtwYXlsb2FkOntkYXRhOm59fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS1jaGFubmVsXCIse2NoYW5uZWxOYW1lOmV9KSxyPW8odGhpcyxpKS5jcmVhdGVQcm92aWRlcih0LG4pO3JldHVybiB0aGlzLm9uKFwiY2xpZW50LWRpc2Nvbm5lY3RlZFwiLCh0PT57dC5jaGFubmVsTmFtZT09PWUmJmEuQ2hhbm5lbFByb3ZpZGVyLmhhbmRsZUNsaWVudERpc2Nvbm5lY3Rpb24ocix0KX0pKSxyfX10LkNoYW5uZWw9bCxpPW5ldyBXZWFrTWFwfSwzNzQ5OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lk1lc3NhZ2VSZWNlaXZlcj12b2lkIDA7Y29uc3QgaT1uKDgzNzgpLHI9big5NjU5KTtjbGFzcyBvIGV4dGVuZHMgci5CYXNle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMub25tZXNzYWdlPWU9PlwicHJvY2Vzcy1jaGFubmVsLW1lc3NhZ2VcIj09PWUuYWN0aW9uJiYodGhpcy5wcm9jZXNzQ2hhbm5lbE1lc3NhZ2UoZSksITApLHRoaXMuZW5kcG9pbnRNYXA9bmV3IE1hcCx0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZD1uZXcgTWFwLGUucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLm9ubWVzc2FnZS5iaW5kKHRoaXMpKX1hc3luYyBwcm9jZXNzQ2hhbm5lbE1lc3NhZ2UoZSl7dmFyIHQsbjtjb25zdHtzZW5kZXJJZGVudGl0eTppLHByb3ZpZGVySWRlbnRpdHk6cixhY3Rpb246byxhY2tUb1NlbmRlcjpzLHBheWxvYWQ6YSxpbnRlbmRlZFRhcmdldElkZW50aXR5OmN9PWUucGF5bG9hZCxkPW51bGwhPT0obj1udWxsIT09KHQ9Yy5jaGFubmVsSWQpJiZ2b2lkIDAhPT10P3Q6Yy5lbmRwb2ludElkKSYmdm9pZCAwIT09bj9uOnRoaXMubGF0ZXN0RW5kcG9pbnRJZEJ5Q2hhbm5lbElkLmdldChyLmNoYW5uZWxJZCksaD10aGlzLmVuZHBvaW50TWFwLmdldChkKTtpZighaClyZXR1cm4gcy5wYXlsb2FkLnN1Y2Nlc3M9ITEscy5wYXlsb2FkLnJlYXNvbj1gQ2xpZW50IGNvbm5lY3Rpb24gd2l0aCBpZGVudGl0eSB1dWlkOiAke3RoaXMud2lyZS5tZS51dWlkfSAvIG5hbWU6ICR7dGhpcy53aXJlLm1lLm5hbWV9IC8gZW5kcG9pbnRJZDogJHtkfSBubyBsb25nZXIgY29ubmVjdGVkLmAsdGhpcy53aXJlLnNlbmRSYXcocyk7dHJ5e2NvbnN0IGU9YXdhaXQgaChvLGEsaSk7cmV0dXJuIHMucGF5bG9hZC5wYXlsb2FkPXMucGF5bG9hZC5wYXlsb2FkfHx7fSxzLnBheWxvYWQucGF5bG9hZC5yZXN1bHQ9ZSx0aGlzLndpcmUuc2VuZFJhdyhzKX1jYXRjaChlKXtyZXR1cm4gcy5wYXlsb2FkLnN1Y2Nlc3M9ITEscy5wYXlsb2FkLnJlYXNvbj1lLm1lc3NhZ2UsdGhpcy53aXJlLnNlbmRSYXcocyl9fWFkZEVuZHBvaW50KGUsdCxuKXt0aGlzLmVuZHBvaW50TWFwLnNldChuLGUpLHQhPT1uJiZ0aGlzLmxhdGVzdEVuZHBvaW50SWRCeUNoYW5uZWxJZC5zZXQodCxuKX1yZW1vdmVFbmRwb2ludChlLHQpe3RoaXMuZW5kcG9pbnRNYXAuZGVsZXRlKHQpLHRoaXMubGF0ZXN0RW5kcG9pbnRJZEJ5Q2hhbm5lbElkLmdldChlKT09PXQmJnRoaXMubGF0ZXN0RW5kcG9pbnRJZEJ5Q2hhbm5lbElkLmRlbGV0ZShlKX1jaGVja0ZvclByZXZpb3VzQ2xpZW50Q29ubmVjdGlvbihlKXtjb25zdCB0PXRoaXMubGF0ZXN0RW5kcG9pbnRJZEJ5Q2hhbm5lbElkLmdldChlKTt0JiYoaS5kZWZhdWx0LmNsb3NlQ2hhbm5lbEJ5RW5kcG9pbnRJZCh0KSxjb25zb2xlLndhcm4oXCJZb3UgaGF2ZSBjcmVhdGVkIGEgc2Vjb25kIGNvbm5lY3Rpb24gdG8gYW4gb2xkZXIgcHJvdmlkZXIuIEZpcnN0IGNvbm5lY3Rpb24gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBjbGllbnRNYXBcIiksY29uc29sZS53YXJuKFwiSWYgdGhlIHByb3ZpZGVyIGNhbGxzIHB1Ymxpc2goKSwgeW91IG1heSByZWNlaXZlIG11bHRpcGxlIG1lc3NhZ2VzLlwiKSl9fXQuTWVzc2FnZVJlY2VpdmVyPW99LDEwNDY6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ2xhc3NpY0luZm89dC5DbGFzc2ljU3RyYXRlZ3k9dm9pZCAwLHQuQ2xhc3NpY1N0cmF0ZWd5PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxzLGEpe3RoaXMubWVzc2FnZVJlY2VpdmVyPXQsdGhpcy5lbmRwb2ludElkPXMsdGhpcy5wcm92aWRlcklkZW50aXR5PWEsbi5zZXQodGhpcyx2b2lkIDApLGkuc2V0KHRoaXMsbmV3IE1hcCksdGhpcy5zZW5kPWFzeW5jKGUsdCxyKT0+e2NvbnN0IHM9byh0aGlzLGkpLmdldChlKTtpZighcyl0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBsb2NhdGUgcm91dGluZyBpbmZvIGZvciBlbmRwb2ludCAke2V9YCk7Y29uc3QgYT17Li4uc307cmV0dXJuIGEuaXNMb2NhbEVuZHBvaW50SWQmJmRlbGV0ZSBhLmVuZHBvaW50SWQsZGVsZXRlIGEuaXNMb2NhbEVuZHBvaW50SWQsKGF3YWl0IG8odGhpcyxuKS5zZW5kQWN0aW9uKFwic2VuZC1jaGFubmVsLW1lc3NhZ2VcIix7Li4uYSxwcm92aWRlcklkZW50aXR5OnRoaXMucHJvdmlkZXJJZGVudGl0eSxhY3Rpb246dCxwYXlsb2FkOnJ9KS5jYXRjaCgoZT0+e3Rocm93IG5ldyBFcnJvcihlLm1lc3NhZ2UpfSkpKS5wYXlsb2FkLmRhdGEucmVzdWx0fSx0aGlzLmNsb3NlPWFzeW5jKCk9Pnt0aGlzLm1lc3NhZ2VSZWNlaXZlci5yZW1vdmVFbmRwb2ludCh0aGlzLnByb3ZpZGVySWRlbnRpdHkuY2hhbm5lbElkLHRoaXMuZW5kcG9pbnRJZCkscih0aGlzLGksbmV3IE1hcCl9LHIodGhpcyxuLGUpfW9uRW5kcG9pbnREaXNjb25uZWN0KGUsdCl7fXJlY2VpdmUoZSl7dGhpcy5tZXNzYWdlUmVjZWl2ZXIuYWRkRW5kcG9pbnQoZSx0aGlzLnByb3ZpZGVySWRlbnRpdHkuY2hhbm5lbElkLHRoaXMuZW5kcG9pbnRJZCl9YXN5bmMgY2xvc2VFbmRwb2ludChlKXtvKHRoaXMsaSkuZGVsZXRlKGUpfWlzRW5kcG9pbnRDb25uZWN0ZWQoZSl7cmV0dXJuIG8odGhpcyxpKS5oYXMoZSl9YWRkRW5kcG9pbnQoZSx0KXtvKHRoaXMsaSkuc2V0KGUsdC5lbmRwb2ludElkZW50aXR5KX1pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpe3ZhciB0LG47cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mKG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50SWRlbnRpdHkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmVuZHBvaW50SWQpfHxcInN0cmluZ1wiPT10eXBlb2YobnVsbD09PShuPW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRJZGVudGl0eSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY2hhbm5lbElkKX19LG49bmV3IFdlYWtNYXAsaT1uZXcgV2Vha01hcCx0LkNsYXNzaWNJbmZvPXt2ZXJzaW9uOjUsbWluaW11bVZlcnNpb246MCx0eXBlOlwiY2xhc3NpY1wifX0sNzExMzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NsYXNzIG57Y29uc3RydWN0b3IoZSx0KXt0aGlzLnByaW1hcnk9ZSx0aGlzLnNlY29uZGFyeT10fXN0YXRpYyBjb21iaW5lKGUsdCl7cmV0dXJuIG5ldyBuKGUsdCl9b25FbmRwb2ludERpc2Nvbm5lY3QoZSx0KXt0aGlzLnByaW1hcnkub25FbmRwb2ludERpc2Nvbm5lY3QoZSwoKCk9Pnt0aGlzLnNlY29uZGFyeS5pc0VuZHBvaW50Q29ubmVjdGVkKGUpfHx0KCl9KSksdGhpcy5zZWNvbmRhcnkub25FbmRwb2ludERpc2Nvbm5lY3QoZSwoKCk9Pnt0aGlzLnByaW1hcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKXx8dCgpfSkpfWlzVmFsaWRFbmRwb2ludFBheWxvYWQoZSl7cmV0dXJuIHRoaXMucHJpbWFyeS5pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpfHx0aGlzLnNlY29uZGFyeS5pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKGUpfWFzeW5jIGNsb3NlRW5kcG9pbnQoZSl7YXdhaXQgdGhpcy5wcmltYXJ5LmNsb3NlRW5kcG9pbnQoZSksYXdhaXQgdGhpcy5zZWNvbmRhcnkuY2xvc2VFbmRwb2ludChlKX1pc0VuZHBvaW50Q29ubmVjdGVkKGUpe3JldHVybiB0aGlzLnByaW1hcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKXx8dGhpcy5zZWNvbmRhcnkuaXNFbmRwb2ludENvbm5lY3RlZChlKX1hc3luYyBhZGRFbmRwb2ludChlLHQpe3RoaXMucHJpbWFyeS5pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKHQpJiZhd2FpdCB0aGlzLnByaW1hcnkuYWRkRW5kcG9pbnQoZSx0KSx0aGlzLnNlY29uZGFyeS5pc1ZhbGlkRW5kcG9pbnRQYXlsb2FkKHQpJiZhd2FpdCB0aGlzLnNlY29uZGFyeS5hZGRFbmRwb2ludChlLHQpfXJlY2VpdmUoZSl7dGhpcy5wcmltYXJ5LnJlY2VpdmUoZSksdGhpcy5zZWNvbmRhcnkucmVjZWl2ZShlKX1zZW5kKGUsdCxuKXtyZXR1cm4gdGhpcy5wcmltYXJ5LmlzRW5kcG9pbnRDb25uZWN0ZWQoZSk/dGhpcy5wcmltYXJ5LnNlbmQoZSx0LG4pOnRoaXMuc2Vjb25kYXJ5LnNlbmQoZSx0LG4pfWFzeW5jIGNsb3NlKCl7YXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucHJpbWFyeS5jbG9zZSgpLHRoaXMuc2Vjb25kYXJ5LmNsb3NlKCldKX19dC5kZWZhdWx0PW59LDMwMzc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlByb3RvY29sTWFuYWdlcj12b2lkIDAsdC5Qcm90b2NvbE1hbmFnZXI9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlcj1lLHRoaXMuRGVmYXVsdENsaWVudFByb3RvY29scz1bXCJjbGFzc2ljXCJdLHRoaXMuRGVmYXVsdFByb3ZpZGVyUHJvdG9jb2xzPVtcImNsYXNzaWNcIl0sdGhpcy5nZXRDbGllbnRQcm90b2NvbHM9ZT0+e2NvbnN0IHQ9ZT90aGlzLlByb3RvY29sc0luUHJlZmVyZW5jZU9yZGVyLmZpbHRlcigodD0+ZS5pbmNsdWRlcyh0KSkpOnRoaXMuRGVmYXVsdENsaWVudFByb3RvY29scztpZighdC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBObyB2YWxpZCBwcm90b2NvbHMgd2VyZSBwYXNzZWQgaW4uIEFjY2VwdGVkIHZhbHVlcyBhcmU6ICR7dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5qb2luKFwiLCBcIil9LmApO3JldHVybiB0fSx0aGlzLmdldFByb3ZpZGVyUHJvdG9jb2xzPWU9Pntjb25zdCB0PWU/dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5maWx0ZXIoKHQ9PmUuaW5jbHVkZXModCkpKTp0aGlzLkRlZmF1bHRQcm92aWRlclByb3RvY29scztpZighdC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBObyB2YWxpZCBwcm90b2NvbHMgd2VyZSBwYXNzZWQgaW4uIEFjY2VwdGVkIHZhbHVlcyBhcmU6ICR7dGhpcy5Qcm90b2NvbHNJblByZWZlcmVuY2VPcmRlci5qb2luKFwiLCBcIil9LmApO3JldHVybiB0fSx0aGlzLmdldENvbXBhdGlibGVQcm90b2NvbHM9KGUsdCk9PnQuc3VwcG9ydGVkUHJvdG9jb2xzLmZpbHRlcigodD0+ZS5zb21lKChlPT57dmFyIG47cmV0dXJuIGUudHlwZT09PXQudHlwZSYmdC52ZXJzaW9uPj1lLm1pbmltdW1WZXJzaW9uJiZlLnZlcnNpb24+PShudWxsIT09KG49dC5taW5pbXVtVmVyc2lvbikmJnZvaWQgMCE9PW4/bjowKX0pKSkpLnNsaWNlKDAsdC5tYXhQcm90b2NvbHMpfX19LDg3NzY6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX0scz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5SVENFbmRwb2ludD12b2lkIDA7Y29uc3QgYT1uKDIzNjYpO3QuUlRDRW5kcG9pbnQ9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnJ0Yz1lLHRoaXMuZW5kcG9pbnRJZGVudGl0eT10LHRoaXMucmVzcG9uc2VNYXA9bmV3IE1hcCxpLnNldCh0aGlzLG51bGwpLHIuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmNvbm5lY3Rpb25TdGF0ZUNoYW5nZUhhbmRsZXI9ZT0+e1wiY29ubmVjdGVkXCIhPT10aGlzLnJ0Yy5ydGNDbGllbnQuY29ubmVjdGlvblN0YXRlJiYodGhpcy5ydGMucnRjQ2xpZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix0aGlzLmNvbm5lY3Rpb25TdGF0ZUNoYW5nZUhhbmRsZXIpLHRoaXMuY2xvc2UoKSxvKHRoaXMscikmJm8odGhpcyxyKS5jYWxsKHRoaXMpKX0sdGhpcy5zZW5kPWFzeW5jKGUsdCk9Pntjb25zdCBuPWBtZXNzYWdlLSR7TWF0aC5yYW5kb20oKX1gLGk9bmV3IFByb21pc2UoKChlLHQpPT57dGhpcy5yZXNwb25zZU1hcC5zZXQobix7cmVzb2x2ZTplLHJlamVjdDp0fSl9KSk7cmV0dXJuIHRoaXMucnRjLmNoYW5uZWxzLnJlcXVlc3Quc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uOmUscGF5bG9hZDp0LG1lc3NhZ2VJZDpufSkpLGl9LHRoaXMuY2xvc2U9KCk9Pnt0aGlzLnJlc3BvbnNlTWFwLmZvckVhY2goKGU9PmUucmVqZWN0KFwiQ29ubmVjdGlvbiBoYXMgY2xvc2VkLlwiKSkpLHRoaXMucmVzcG9uc2VNYXA9bmV3IE1hcCx0aGlzLnJ0Yy5jaGFubmVscy5yZXF1ZXN0LmNsb3NlKCksdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UuY2xvc2UoKSx0aGlzLnJ0Yy5ydGNDbGllbnQuY2xvc2UoKX0sdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoZT0+e3ZhciB0O2NvbnN0e21lc3NhZ2VJZDpuLHBheWxvYWQ6aSxzdWNjZXNzOnIsZXJyb3I6b309SlNPTi5wYXJzZShlLmRhdGEpLHtyZXNvbHZlOnMscmVqZWN0OmF9PW51bGwhPT0odD10aGlzLnJlc3BvbnNlTWFwLmdldChuKSkmJnZvaWQgMCE9PXQ/dDp7fTtzJiZhPyh0aGlzLnJlc3BvbnNlTWFwLmRlbGV0ZShuKSxyP3MoaSk6YShvKSk6KGNvbnNvbGUubG9nKFwiQ291bGQgbm90IGZpbmQgaWQgaW4gcmVzcG9uc2VNYXAuXCIpLGNvbnNvbGUubG9nKGUpKX0pKSx0aGlzLnJ0Yy5jaGFubmVscy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGFzeW5jIGU9Pntjb25zdHttZXNzYWdlSWQ6bixhY3Rpb246cixwYXlsb2FkOnN9PUpTT04ucGFyc2UoZS5kYXRhKTtpZihvKHRoaXMsaSkpdHJ5e2NvbnN0IGU9YXdhaXQgbyh0aGlzLGkpLmNhbGwodGhpcyxyLHMsdCk7dGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2Uuc2VuZChKU09OLnN0cmluZ2lmeSh7bWVzc2FnZUlkOm4scGF5bG9hZDplLHN1Y2Nlc3M6ITB9KSl9Y2F0Y2goZSl7XCJvcGVuXCI9PT10aGlzLnJ0Yy5jaGFubmVscy5yZXNwb25zZS5yZWFkeVN0YXRlJiZ0aGlzLnJ0Yy5jaGFubmVscy5yZXNwb25zZS5zZW5kKEpTT04uc3RyaW5naWZ5KHttZXNzYWdlSWQ6bixlcnJvcjphLmVycm9yVG9QT0pPKGUpLHN1Y2Nlc3M6ITF9KSl9ZWxzZVwib3BlblwiPT09dGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2UucmVhZHlTdGF0ZSYmdGhpcy5ydGMuY2hhbm5lbHMucmVzcG9uc2Uuc2VuZChKU09OLnN0cmluZ2lmeSh7bWVzc2FnZUlkOm4sc3VjY2VzczohMSxlcnJvcjpcIkNvbm5lY3Rpb24gbm90IHJlYWR5LlwifSkpfSkpLHRoaXMucnRjLnJ0Y0NsaWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5jb25uZWN0aW9uU3RhdGVDaGFuZ2VIYW5kbGVyKSxPYmplY3QudmFsdWVzKHRoaXMucnRjLmNoYW5uZWxzKS5mb3JFYWNoKChlPT57ZS5vbmNsb3NlPWU9PntbLi4udGhpcy5yZXNwb25zZU1hcC52YWx1ZXMoKV0uZm9yRWFjaCgoZT0+ZS5yZWplY3QobmV3IEVycm9yKFwiUlRDRGF0YUNoYW5uZWwgY2xvc2VkIHVuZXhwZWN0ZWRseSwgdGhpcyBpcyBtb3N0IGNvbW1vbmx5IGNhdXNlZCBieSBtZXNzYWdlIHNpemUuIE5vdGU6IFJUQyBDaGFubmVscyBoYXZlIGEgbWVzc2FnZSBzaXplIGxpbWl0IG9mIH4yNTVrQi5cIikpKSksdGhpcy5jbG9zZSgpLG8odGhpcyxyKSYmbyh0aGlzLHIpLmNhbGwodGhpcyl9fSkpfW9uRGlzY29ubmVjdChlKXtpZihvKHRoaXMscikpdGhyb3cgbmV3IEVycm9yKFwiUlRDRW5kcG9pbnQgZGlzY29ubmVjdExpc3RlbmVyIGNhbm5vdCBiZSBzZXQgdHdpY2UuXCIpO3ModGhpcyxyLGUpfXJlY2VpdmUoZSl7aWYobyh0aGlzLGkpKXRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIGFscmVhZHkgc2V0IGEgbGlzdGVuZXIgZm9yIHRoaXMgUlRDIEVuZHBvaW50LlwiKTtzKHRoaXMsaSxlKX1nZXQgY29ubmVjdGVkKCl7cmV0dXJuXCJjb25uZWN0ZWRcIj09PXRoaXMucnRjLnJ0Y0NsaWVudC5jb25uZWN0aW9uU3RhdGV9fSxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXB9LDU2OTooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5SVENJQ0VNYW5hZ2VyPXZvaWQgMDtjb25zdCBpPW4oOTY1OSk7Y2xhc3MgciBleHRlbmRzIGkuRW1pdHRlckJhc2V7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSxcImNoYW5uZWxcIiksdGhpcy5lbnN1cmVDaGFubmVsT3BlbmVkPWU9Pm5ldyBQcm9taXNlKCgodCxuKT0+e2lmKFwib3BlblwiPT09ZS5yZWFkeVN0YXRlKXQoKTtlbHNlIGlmKFwiY29ubmVjdGluZ1wiPT09ZS5yZWFkeVN0YXRlKXtjb25zdCBuPSgpPT57ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwib3BlblwiLG4pLHQoKX07ZS5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLG4pfWVsc2UgbihuZXcgRXJyb3IoXCJUaGlzIENoYW5uZWwgaGFzIGFscmVhZHkgY2xvc2VkXCIpKX0pKX1zdGF0aWMgY3JlYXRlRGF0YUNoYW5uZWxQcm9taXNlKGUsdCl7bGV0IG47Y29uc3QgaT1uZXcgUHJvbWlzZSgoZT0+e249ZX0pKSxyPWk9Pntjb25zdCBvPSgpPT57aS5jaGFubmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsbyksbihpLmNoYW5uZWwpfTtpLmNoYW5uZWwubGFiZWw9PT1lJiYoaS5jaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsbyksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGF0YWNoYW5uZWxcIixyKSl9O3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXIoXCJkYXRhY2hhbm5lbFwiLHIpLGl9YXN5bmMgbGlzdGVuRm9yUHJvdmlkZXJJY2UoZSx0KXthd2FpdCB0aGlzLm9uKHRoaXMuY3JlYXRlUHJvdmlkZXJFdmVudE5hbWUoZSksdCx7dGltZXN0YW1wOkRhdGUubm93KCl9KX1hc3luYyByYWlzZVByb3ZpZGVySWNlKGUsdCl7YXdhaXQgdGhpcy53aXJlLmVudmlyb25tZW50LnJhaXNlRXZlbnQodGhpcy5jcmVhdGVSb3V0ZVN0cmluZyh0aGlzLmNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpKSx0KX1hc3luYyBsaXN0ZW5Gb3JDbGllbnRJY2UoZSx0KXthd2FpdCB0aGlzLm9uKHRoaXMuY3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpLHQse3RpbWVzdGFtcDpEYXRlLm5vdygpfSl9YXN5bmMgcmFpc2VDbGllbnRJY2UoZSx0KXthd2FpdCB0aGlzLndpcmUuZW52aXJvbm1lbnQucmFpc2VFdmVudCh0aGlzLmNyZWF0ZVJvdXRlU3RyaW5nKHRoaXMuY3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpKSx0KX1jbGVhbnVwSWNlTGlzdGVuZXJzKGUpe3RoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHRoaXMuY3JlYXRlQ2xpZW50RXZlbnROYW1lKGUpKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0aGlzLmNyZWF0ZVByb3ZpZGVyRXZlbnROYW1lKGUpKX1jcmVhdGVDbGllbnRFdmVudE5hbWUoZSl7cmV0dXJuYGljZS1jbGllbnQtJHtlfWB9Y3JlYXRlUHJvdmlkZXJFdmVudE5hbWUoZSl7cmV0dXJuYGljZS1wcm92aWRlci0ke2V9YH1jcmVhdGVSb3V0ZVN0cmluZyhlKXtyZXR1cm5gY2hhbm5lbC8ke2V9YH1jcmVhdGVSdGNQZWVyKCl7cmV0dXJuIHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRSdGNQZWVyKCl9YXN5bmMgc3RhcnRDbGllbnRPZmZlcigpe2NvbnN0IGU9TWF0aC5yYW5kb20oKS50b1N0cmluZygpLHQ9dGhpcy5jcmVhdGVSdGNQZWVyKCk7dC5hZGRFdmVudExpc3RlbmVyKFwiaWNlY2FuZGlkYXRlXCIsKGFzeW5jIHQ9Pnt2YXIgbjt0LmNhbmRpZGF0ZSYmYXdhaXQgdGhpcy5yYWlzZUNsaWVudEljZShlLHtjYW5kaWRhdGU6bnVsbD09PShuPXQuY2FuZGlkYXRlKXx8dm9pZCAwPT09bj92b2lkIDA6bi50b0pTT04oKX0pfSkpLGF3YWl0IHRoaXMubGlzdGVuRm9yUHJvdmlkZXJJY2UoZSwoYXN5bmMgZT0+e2F3YWl0IHQuYWRkSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKX0pKTtjb25zdCBuPXtyZXF1ZXN0OnQuY3JlYXRlRGF0YUNoYW5uZWwoXCJyZXF1ZXN0XCIpLHJlc3BvbnNlOnQuY3JlYXRlRGF0YUNoYW5uZWwoXCJyZXNwb25zZVwiKX0saT1hd2FpdCB0LmNyZWF0ZU9mZmVyKCk7YXdhaXQgdC5zZXRMb2NhbERlc2NyaXB0aW9uKGkpO2NvbnN0IHI9UHJvbWlzZS5hbGwoW24ucmVxdWVzdCxuLnJlc3BvbnNlXS5tYXAodGhpcy5lbnN1cmVDaGFubmVsT3BlbmVkKSkudGhlbigoKCk9Pnt9KSk7cmV0dXJue3J0Y0NsaWVudDp0LGNoYW5uZWxzOm4sb2ZmZXI6aSxydGNDb25uZWN0aW9uSWQ6ZSxjaGFubmVsc09wZW5lZDpyfX1hc3luYyBmaW5pc2hDbGllbnRPZmZlcihlLHQsbil7cmV0dXJuIGF3YWl0IGUuc2V0UmVtb3RlRGVzY3JpcHRpb24odCksYXdhaXQgbiwhMH1hc3luYyBjcmVhdGVQcm92aWRlckFuc3dlcihlLHQpe2NvbnN0IG49dGhpcy5jcmVhdGVSdGNQZWVyKCksaT1yLmNyZWF0ZURhdGFDaGFubmVsUHJvbWlzZShcInJlcXVlc3RcIixuKSxvPXIuY3JlYXRlRGF0YUNoYW5uZWxQcm9taXNlKFwicmVzcG9uc2VcIixuKTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJpY2VjYW5kaWRhdGVcIiwoYXN5bmMgdD0+e3ZhciBuO3QuY2FuZGlkYXRlJiZhd2FpdCB0aGlzLnJhaXNlUHJvdmlkZXJJY2UoZSx7Y2FuZGlkYXRlOm51bGw9PT0obj10LmNhbmRpZGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4udG9KU09OKCl9KX0pKSxhd2FpdCB0aGlzLmxpc3RlbkZvckNsaWVudEljZShlLChhc3luYyBlPT57YXdhaXQgbi5hZGRJY2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpfSkpLGF3YWl0IG4uc2V0UmVtb3RlRGVzY3JpcHRpb24odCk7Y29uc3Qgcz1hd2FpdCBuLmNyZWF0ZUFuc3dlcigpO2F3YWl0IG4uc2V0TG9jYWxEZXNjcmlwdGlvbihzKTtjb25zdCBhPVByb21pc2UuYWxsKFtpLG9dKS50aGVuKCgoW3Qsbl0pPT4odGhpcy5jbGVhbnVwSWNlTGlzdGVuZXJzKGUpLHtyZXF1ZXN0OnQscmVzcG9uc2U6bn0pKSk7cmV0dXJue3J0Y0NsaWVudDpuLGFuc3dlcjpzLGNoYW5uZWxzOmF9fX10LlJUQ0lDRU1hbmFnZXI9cn0sMzg3MDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9LGE9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUlRDSW5mbz10LlJUQ1N0cmF0ZWd5PXZvaWQgMDtjb25zdCBjPW4oODc3Nik7dC5SVENTdHJhdGVneT1jbGFzc3tjb25zdHJ1Y3Rvcigpe2kuc2V0KHRoaXMsbnVsbCksci5zZXQodGhpcyxuZXcgTWFwKSxvLnNldCh0aGlzLCEwKSx0aGlzLnNlbmQ9YXN5bmMoZSx0LG4pPT50aGlzLmdldEVuZHBvaW50QnlJZChlKS5zZW5kKHQsbiksdGhpcy5jbG9zZT1hc3luYygpPT57cyh0aGlzLG8pJiYocyh0aGlzLHIpLmZvckVhY2goKGU9PmUuY2xvc2UoKSkpLGEodGhpcyxyLG5ldyBNYXApKSxhKHRoaXMsbywhMSl9fW9uRW5kcG9pbnREaXNjb25uZWN0KGUsdCl7dGhpcy5nZXRFbmRwb2ludEJ5SWQoZSkub25EaXNjb25uZWN0KHQpfXJlY2VpdmUoZSl7aWYocyh0aGlzLGkpKXRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIGFscmVhZHkgc2V0IGEgbGlzdGVuZXIgZm9yIHRoaXMgUlRDIFN0cmF0ZWd5XCIpO2EodGhpcyxpLGUpLHModGhpcyxyKS5mb3JFYWNoKChlPT5lLnJlY2VpdmUocyh0aGlzLGkpKSkpfWdldEVuZHBvaW50QnlJZChlKXtjb25zdCB0PXModGhpcyxyKS5nZXQoZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgd2l0aCBlbmRwb2ludCBpZCAke2V9IGlzIG5vdCBjb25uZWN0ZWRgKTtyZXR1cm4gdH1nZXQgY29ubmVjdGVkKCl7cmV0dXJuIHModGhpcyxvKX1pc0VuZHBvaW50Q29ubmVjdGVkKGUpe3JldHVybiBzKHRoaXMscikuaGFzKGUpfWFkZEVuZHBvaW50KGUsdCl7aWYoIXModGhpcyxvKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oXCJBZGRpbmcgZW5kcG9pbnQgdG8gZGlzY29ubmVjdGVkIFJUQyBTdHJhdGVneVwiKTtjb25zdCBuPW5ldyBjLlJUQ0VuZHBvaW50KHQucnRjLHQuZW5kcG9pbnRJZGVudGl0eSk7cyh0aGlzLGkpJiZuLnJlY2VpdmUocyh0aGlzLGkpKSxzKHRoaXMscikuc2V0KGUsbil9YXN5bmMgY2xvc2VFbmRwb2ludChlKXtzKHRoaXMscikuZGVsZXRlKGUpfWlzVmFsaWRFbmRwb2ludFBheWxvYWQoZSl7Y29uc3QgdD1lPT5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWU7cmV0dXJuIHQoZSkmJnQoZS5lbmRwb2ludElkZW50aXR5KSYmdChlLnJ0YykmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmVuZHBvaW50SWRlbnRpdHkuZW5kcG9pbnRJZH19LGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwLHQuUlRDSW5mbz17dmVyc2lvbjoxLG1pbmltdW1WZXJzaW9uOjAsdHlwZTpcInJ0Y1wifX0sMjk0MjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ2hhbm5lbFByb3ZpZGVyPXZvaWQgMDtjb25zdCBvPW4oNzUzOSkscz1uKDIzMDApO2xldCBhPSgoKT0+e3ZhciBlLHQsbixhLGM7Y2xhc3MgZCBleHRlbmRzIG8uQ2hhbm5lbEJhc2V7Y29uc3RydWN0b3IoaCxsLHUpe3N1cGVyKCksZS5zZXQodGhpcyx2b2lkIDApLHQuc2V0KHRoaXMsdm9pZCAwKSxuLnNldCh0aGlzLHZvaWQgMCksYS5zZXQodGhpcywodD0+e2NvbnN0IG89dGhpcy5jb25uZWN0aW9ucy5maWx0ZXIoKGU9PmUuZW5kcG9pbnRJZCE9PXQuZW5kcG9pbnRJZCkpO3IodGhpcyxuKS5jbG9zZUVuZHBvaW50KHQuZW5kcG9pbnRJZCksaSh0aGlzLGUsbyl9KSksdGhpcy5wcm9jZXNzQWN0aW9uPWFzeW5jKGUsdCxuKT0+KGQuY2xpZW50SXNNdWx0aVJ1bnRpbWUobikmJiFzLnJ1bnRpbWVVdWlkTWVldHNNaW5pbXVtUnVudGltZVZlcnNpb24obi5ydW50aW1lVXVpZCxcIjE4Ljg3LjU2LjBcIik/dGhpcy5oYW5kbGVNdWx0aVJ1bnRpbWVMZWdhY3lDbGllbnQobik6dGhpcy5jaGVja0ZvckNsaWVudENvbm5lY3Rpb24obiksc3VwZXIucHJvY2Vzc0FjdGlvbihlLHQsbikpLGMuc2V0KHRoaXMsKCgpPT57cih0aGlzLG4pLmNsb3NlKCk7Y29uc3QgZT1kLnJlbW92YWxNYXAuZ2V0KHRoaXMpO2UmJmUoKX0pKSxpKHRoaXMsdCxuZXcgby5Qcm90ZWN0ZWRJdGVtcyhoLGwpKSx0aGlzLmNvbm5lY3RMaXN0ZW5lcj0oKT0+e30sdGhpcy5kaXNjb25uZWN0TGlzdGVuZXI9KCk9Pnt9LGkodGhpcyxlLFtdKSxpKHRoaXMsbix1KSx1LnJlY2VpdmUodGhpcy5wcm9jZXNzQWN0aW9uKX1nZXQgY29ubmVjdGlvbnMoKXtyZXR1cm5bLi4ucih0aGlzLGUpXX1zdGF0aWMgaGFuZGxlQ2xpZW50RGlzY29ubmVjdGlvbihlLHQpe2NvbnN0IG49ZS5jb25uZWN0aW9ucy5maW5kKChlPT5lLmVuZHBvaW50SWQ9PT10LmVuZHBvaW50SWQpKTtuP3IoZSxhKS5jYWxsKGUsbik6ZS5jb25uZWN0aW9ucy5maWx0ZXIoKGU9PmUudXVpZD09PXQudXVpZCYmZS5uYW1lPT09dC5uYW1lKSkuZm9yRWFjaChyKGUsYSkpLGUuZGlzY29ubmVjdExpc3RlbmVyKHQpfXN0YXRpYyBzZXRQcm92aWRlclJlbW92YWwoZSx0KXtkLnJlbW92YWxNYXAuc2V0KGUsdCl9ZGlzcGF0Y2goZSx0LGkpe3ZhciBvO2NvbnN0IHM9bnVsbCE9PShvPWUuZW5kcG9pbnRJZCkmJnZvaWQgMCE9PW8/bzp0aGlzLmdldEVuZHBvaW50SWRGb3JPcGVuRmluSWQoZSx0KTtyZXR1cm4gcyYmcih0aGlzLG4pLmlzRW5kcG9pbnRDb25uZWN0ZWQocyk/cih0aGlzLG4pLnNlbmQocyx0LGkpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgQ2xpZW50IGNvbm5lY3Rpb24gd2l0aCBpZGVudGl0eSB1dWlkOiAke2UudXVpZH0gLyBuYW1lOiAke2UubmFtZX0gLyBlbmRwb2ludElkOiAke3N9IG5vIGxvbmdlciBjb25uZWN0ZWQuYCkpfWFzeW5jIHByb2Nlc3NDb25uZWN0aW9uKHQsbil7cmV0dXJuIHIodGhpcyxlKS5wdXNoKHQpLHRoaXMuY29ubmVjdExpc3RlbmVyKHQsbil9cHVibGlzaChlLHQpe3JldHVybiB0aGlzLmNvbm5lY3Rpb25zLm1hcCgoaT0+cih0aGlzLG4pLnNlbmQoaS5lbmRwb2ludElkLGUsdCkpKX1vbkNvbm5lY3Rpb24oZSl7dGhpcy5jb25uZWN0TGlzdGVuZXI9ZX1vbkRpc2Nvbm5lY3Rpb24oZSl7dGhpcy5kaXNjb25uZWN0TGlzdGVuZXI9ZX1hc3luYyBkZXN0cm95KCl7Y29uc3Qgbj1yKHRoaXMsdCkse2NoYW5uZWxOYW1lOm99PW4ucHJvdmlkZXJJZGVudGl0eTtpKHRoaXMsZSxbXSksYXdhaXQgbi53aXJlLnNlbmRBY3Rpb24oXCJkZXN0cm95LWNoYW5uZWxcIix7Y2hhbm5lbE5hbWU6b30pLHIodGhpcyxjKS5jYWxsKHRoaXMpfWNoZWNrRm9yQ2xpZW50Q29ubmVjdGlvbihlKXtpZighdGhpcy5pc0NsaWVudENvbm5lY3RlZChlKSl0aHJvdyBuZXcgRXJyb3IoYFRoaXMgYWN0aW9uIHdhcyBzZW50IGZyb20gYSBjbGllbnQgdGhhdCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBwcm92aWRlci5cXG4gICAgICAgICAgICAgICAgICAgIENsaWVudCBJZGVudGl0eToge3V1aWQ6ICR7ZS51dWlkfSwgbmFtZTogJHtlLm5hbWV9LCBlbmRwb2ludElkOiAke2UuZW5kcG9pbnRJZH19YCl9aXNDbGllbnRDb25uZWN0ZWQoZSl7cmV0dXJuIGQuY2xpZW50SWRlbnRpdHlJbmNsdWRlc0VuZHBvaW50SWQoZSk/dGhpcy5jb25uZWN0aW9ucy5zb21lKCh0PT50LmVuZHBvaW50SWQ9PT1lLmVuZHBvaW50SWQmJnQudXVpZD09PWUudXVpZCYmdC5uYW1lPT09ZS5uYW1lKSk6dGhpcy5pc0xlZ2FjeUNsaWVudENvbm5lY3RlZChlKX1pc0xlZ2FjeUNsaWVudENvbm5lY3RlZChlKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5zb21lKCh0PT50LnV1aWQ9PT1lLnV1aWQmJnQubmFtZT09PWUubmFtZSkpfWhhbmRsZU11bHRpUnVudGltZUxlZ2FjeUNsaWVudChlKXtpZighdGhpcy5pc0xlZ2FjeUNsaWVudENvbm5lY3RlZChlKSl0aHJvdyBuZXcgRXJyb3IoYFRoaXMgYWN0aW9uIHdhcyBzZW50IGZyb20gYSBjbGllbnQgdGhhdCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBwcm92aWRlci4gQ2xpZW50IElkZW50aXR5OlxcbiAgICAgICAgICAgICAgICAgICAge3V1aWQ6ICR7ZS51dWlkfSwgbmFtZTogJHtlLm5hbWV9LCBlbmRwb2ludElkOiAke2UuZW5kcG9pbnRJZH19YCl9Z2V0RW5kcG9pbnRJZEZvck9wZW5GaW5JZChlLG4pe3ZhciBpO2NvbnN0IG89dGhpcy5jb25uZWN0aW9ucy5maWx0ZXIoKHQ9PnQubmFtZT09PWUubmFtZSYmdC51dWlkPT09ZS51dWlkKSk7aWYoby5sZW5ndGg+PTIpe2NvbnN0IGk9cih0aGlzLHQpLHt1dWlkOm8sbmFtZTpzfT1lLGE9bnVsbD09aT92b2lkIDA6aS5wcm92aWRlcklkZW50aXR5LnV1aWQsYz1udWxsPT1pP3ZvaWQgMDppLnByb3ZpZGVySWRlbnRpdHkubmFtZTtjb25zb2xlLndhcm4oYFdBUk5JTkc6IERpc3BhdGNoIGNhbGwgbWF5IGhhdmUgdW5pbnRlbmRlZCByZXN1bHRzLiBUaGUgXCJ0b1wiIGFyZ3VtZW50IG9mIHlvdXIgZGlzcGF0Y2ggY2FsbCBpcyBtaXNzaW5nIHRoZVxcbiAgICAgICAgICAgICAgICBcImVuZHBvaW50SWRcIiBwYXJhbWV0ZXIuIFRoZSBpZGVudGl0eSB5b3UgYXJlIGRpc3BhdGNoaW5nIHRvICh7dXVpZDogJHtvfSwgbmFtZTogJHtzfX0pXFxuICAgICAgICAgICAgICAgIGhhcyBtdWx0aXBsZSBjaGFubmVsQ2xpZW50cyBmb3IgdGhpcyBjaGFubmVsLiBZb3VyIGRpc3BhdGNoZWQgYWN0aW9uOiAoJHtufSkgZnJvbSB0aGUgcHJvdmlkZXI6XFxuICAgICAgICAgICAgICAgICh7dXVpZDogJHthfSwgbmFtZTogJHtjfX0pIHdpbGwgb25seSBiZSBwcm9jZXNzZWQgYnkgdGhlIG1vc3QgcmVjZW50bHktY3JlYXRlZCBjbGllbnQuYCl9cmV0dXJuIG51bGw9PT0oaT1vLnBvcCgpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5lbmRwb2ludElkfXN0YXRpYyBjbGllbnRJZGVudGl0eUluY2x1ZGVzRW5kcG9pbnRJZChlKXtyZXR1cm4gdm9pZCAwIT09ZS5lbmRwb2ludElkfXN0YXRpYyBjbGllbnRJc011bHRpUnVudGltZShlKXtyZXR1cm4gdm9pZCAwIT09ZS5ydW50aW1lVXVpZH19cmV0dXJuIGU9bmV3IFdlYWtNYXAsdD1uZXcgV2Vha01hcCxuPW5ldyBXZWFrTWFwLGE9bmV3IFdlYWtNYXAsYz1uZXcgV2Vha01hcCxkLnJlbW92YWxNYXA9bmV3IFdlYWtNYXAsZH0pKCk7dC5DaGFubmVsUHJvdmlkZXI9YX0sODM0NzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5JbnRlckFwcFBheWxvYWQ9dm9pZCAwO2NvbnN0IGk9big2NDY1KSxyPW4oOTY1OSksbz1uKDMxMjcpLHM9big3NzIyKSxhPW4oNDk5OSk7Y2xhc3MgYyBleHRlbmRzIHIuQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmV2ZW50cz17c3Vic2NyaWJlckFkZGVkOlwic3Vic2NyaWJlci1hZGRlZFwiLHN1YnNjcmliZXJSZW1vdmVkOlwic3Vic2NyaWJlci1yZW1vdmVkXCJ9LHRoaXMucmVmQ291bnRlcj1uZXcgby5kZWZhdWx0LHRoaXMuQ2hhbm5lbD1uZXcgcy5DaGFubmVsKGUpLHRoaXMuZW1pdHRlcj1uZXcgaS5FdmVudEVtaXR0ZXIsZS5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKHRoaXMub25tZXNzYWdlLmJpbmQodGhpcykpLHRoaXMub249dGhpcy5lbWl0dGVyLm9uLmJpbmQodGhpcy5lbWl0dGVyKSx0aGlzLnJlbW92ZUFsbExpc3RlbmVycz10aGlzLmVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzLmJpbmQodGhpcy5lbWl0dGVyKX1wdWJsaXNoKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicHVibGlzaC1tZXNzYWdlXCIse3RvcGljOmUsbWVzc2FnZTp0LHNvdXJjZVdpbmRvd05hbWU6dGhpcy5tZS5uYW1lfSkudGhlbigoKCk9Pnt9KSl9YXN5bmMgc2VuZChlLHQsbil7Y29uc3QgaT1hLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYoaSl0aHJvdyBuZXcgRXJyb3IoaSk7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZW5kLW1lc3NhZ2VcIix7ZGVzdGluYXRpb25VdWlkOmUudXVpZCxkZXN0aW5hdGlvbldpbmRvd05hbWU6ZS5uYW1lLHRvcGljOnQsbWVzc2FnZTpuLHNvdXJjZVdpbmRvd05hbWU6dGhpcy5tZS5uYW1lfSl9c3Vic2NyaWJlKGUsdCxuKXtjb25zdCBpPXRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGUudXVpZCxlLm5hbWV8fFwiKlwiLHQpO3JldHVybiB0aGlzLmVtaXR0ZXIub24oaSxuKSx0aGlzLnJlZkNvdW50ZXIuYWN0T25GaXJzdChpLCgoKT0+dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdWJzY3JpYmVcIix7c291cmNlVXVpZDplLnV1aWQsc291cmNlV2luZG93TmFtZTplLm5hbWV8fFwiKlwiLHRvcGljOnQsZGVzdGluYXRpb25XaW5kb3dOYW1lOnRoaXMubWUubmFtZX0pKSwoKCk9PlByb21pc2UucmVzb2x2ZSgpKSl9dW5zdWJzY3JpYmUoZSx0LG4pe2NvbnN0IGk9ZS5uYW1lfHxcIipcIixyPXRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGUudXVpZCxpLHQpO3JldHVybiB0aGlzLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIocixuKSx0aGlzLnJlZkNvdW50ZXIuYWN0T25MYXN0KHIsKCgpPT50aGlzLndpcmUuc2VuZEFjdGlvbihcInVuc3Vic2NyaWJlXCIse3NvdXJjZVV1aWQ6ZS51dWlkLHNvdXJjZVdpbmRvd05hbWU6aSx0b3BpYzp0LGRlc3RpbmF0aW9uV2luZG93TmFtZTp0aGlzLm1lLm5hbWV9KSksKCgpPT5uZXcgUHJvbWlzZSgoZT0+ZSkpLnRoZW4oKCgpPT57fSkpKSl9cHJvY2Vzc01lc3NhZ2UoZSl7Y29uc3R7cGF5bG9hZDp7bWVzc2FnZTp0LHNvdXJjZVdpbmRvd05hbWU6bixzb3VyY2VVdWlkOmksdG9waWM6cn19PWUsbz1bdGhpcy5jcmVhdGVTdWJzY3JpcHRpb25LZXkoaSxuLHIpLHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uS2V5KGksXCIqXCIsciksdGhpcy5jcmVhdGVTdWJzY3JpcHRpb25LZXkoXCIqXCIsXCIqXCIscildLHM9e3V1aWQ6aSxuYW1lOm59O28uZm9yRWFjaCgoZT0+e3RoaXMuZW1pdHRlci5lbWl0KGUsdCxzKX0pKX1lbWl0U3Vic2NyaXZlckV2ZW50KGUsdCl7Y29uc3R7cGF5bG9hZDp7dGFyZ2V0TmFtZTpuLHV1aWQ6aSx0b3BpYzpyfX09dCxvPXtuYW1lOm4sdXVpZDppLHRvcGljOnJ9O3RoaXMuZW1pdHRlci5lbWl0KGUsbyl9Y3JlYXRlU3Vic2NyaXB0aW9uS2V5KGUsdCxuKXtjb25zdCBpPXR8fFwiKlwiO2lmKCEoZSYmaSYmbikpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB1dWlkLCBuYW1lLCBvciB0b3BpYyBzdHJpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKC4uLmUpe3JldHVybiBlLm1hcCgoZT0+QnVmZmVyLmZyb20oYCR7ZX1gKS50b1N0cmluZyhcImJhc2U2NFwiKSkpLmpvaW4oXCIvXCIpfShlLGksbil9b25tZXNzYWdlKGUpe2NvbnN0e2FjdGlvbjp0fT1lO3N3aXRjaCh0KXtjYXNlXCJwcm9jZXNzLW1lc3NhZ2VcIjp0aGlzLnByb2Nlc3NNZXNzYWdlKGUpO2JyZWFrO2Nhc2UgdGhpcy5ldmVudHMuc3Vic2NyaWJlckFkZGVkOnRoaXMuZW1pdFN1YnNjcml2ZXJFdmVudCh0aGlzLmV2ZW50cy5zdWJzY3JpYmVyQWRkZWQsZSk7YnJlYWs7Y2FzZSB0aGlzLmV2ZW50cy5zdWJzY3JpYmVyUmVtb3ZlZDp0aGlzLmVtaXRTdWJzY3JpdmVyRXZlbnQodGhpcy5ldmVudHMuc3Vic2NyaWJlclJlbW92ZWQsZSl9cmV0dXJuITB9fXQuZGVmYXVsdD1jLHQuSW50ZXJBcHBQYXlsb2FkPWNsYXNze319LDI5Nzc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oMjA1Nyksbz1uKDcxMzgpLHM9KGUsLi4udCk9Pm5ldyBlKC4uLnQpO2NsYXNzIGEgZXh0ZW5kcyBpLkJhc2V7YXN5bmMgaW5pdChlLHQ9cyl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWluaXRcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCB0aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY3JlYXRlKGBpbnRlcm9wLWJyb2tlci0ke2V9YCksaT1hd2FpdCB0aGlzLmZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldEluZm8oKTtyZXR1cm4gdChyLkludGVyb3BCcm9rZXIsdGhpcy53aXJlLG4saS5pbml0aWFsT3B0aW9ucy5pbnRlcm9wQnJva2VyQ29uZmlndXJhdGlvbnx8e30pfWNvbm5lY3RTeW5jKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jb25uZWN0LXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uSW50ZXJvcENsaWVudCh0aGlzLndpcmUsZSx0KX19dC5kZWZhdWx0PWF9LDIwNTc6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSW50ZXJvcEJyb2tlcj12b2lkIDA7Y29uc3QgaT1uKDk2NTkpLHI9big3MTE1KSxvPW4oMTc4Nyk7bGV0IHM9W3tpZDpcImdyZWVuXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiMwMENDODhcIixuYW1lOlwiZ3JlZW5cIn19LHtpZDpcInB1cnBsZVwiLGRpc3BsYXlNZXRhZGF0YTp7Y29sb3I6XCIjOEM2MUZGXCIsbmFtZTpcInB1cnBsZVwifX0se2lkOlwib3JhbmdlXCIsZGlzcGxheU1ldGFkYXRhOntjb2xvcjpcIiNGRjhDNENcIixuYW1lOlwib3JhbmdlXCJ9fSx7aWQ6XCJyZWRcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiI0ZGNUU2MFwiLG5hbWU6XCJyZWRcIn19LHtpZDpcInBpbmtcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiI0ZGOEZCOFwiLG5hbWU6XCJwaW5rXCJ9fSx7aWQ6XCJ5ZWxsb3dcIixkaXNwbGF5TWV0YWRhdGE6e2NvbG9yOlwiI0U5RkY4RlwiLG5hbWU6XCJ5ZWxsb3dcIn19XTtjbGFzcyBhIGV4dGVuZHMgaS5CYXNle2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcihlKSx0aGlzLmNoYW5uZWw9dCx0aGlzLmludGVyb3BDbGllbnRzPW5ldyBNYXAsdGhpcy5jb250ZXh0R3JvdXBzQnlJZD1uZXcgTWFwLG4uY29udGV4dEdyb3VwcyYmKHM9bi5jb250ZXh0R3JvdXBzKSx0aGlzLmludGVudENsaWVudE1hcD1uZXcgTWFwLHRoaXMubGFzdENvbnRleHRNYXA9bmV3IE1hcCx0aGlzLnNlc3Npb25Db250ZXh0R3JvdXBNYXA9bmV3IE1hcCx0aGlzLnNldENvbnRleHRHcm91cE1hcCgpLHRoaXMud2lyZUNoYW5uZWwodCl9c2V0Q29udGV4dCh7Y29udGV4dDplfSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXNldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighbnx8IW4uY29udGV4dEdyb3VwSWQpdGhyb3cgbj9uZXcgRXJyb3IoXCJZb3UgbXVzdCBqb2luIGEgY29udGV4dCBncm91cCBiZWZvcmUgeW91IGNhbiBzZXQgY29udGV4dC5cIik6bmV3IEVycm9yKGBDbGllbnQgd2l0aCBJZGVudGl0eTogJHt0LnV1aWR9ICR7dC5uYW1lfSBub3QgaW4gQ2xpZW50IFN0YXRlIE1hcGApO3tjb25zdHtjb250ZXh0R3JvdXBJZDp0fT1uO2lmKCF0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyh0KSl0aHJvdyBuZXcgRXJyb3IoYENsaWVudCBoYXMgYSBjb250ZXh0IGdyb3VwIHRoYXQgaXNuJ3QgaW4gdGhlIGNvbnRleHQgZ3JvdXAgbWFwcGluZzogJHt0fS5gKTtjb25zdCBpPWEuY2hlY2tDb250ZXh0SW50ZWdyaXR5KGUpO2lmKCExPT09aS5pc1ZhbGlkKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNldCBDb250ZXh0IC0gYmFkIENvbnRleHQuIFJlYXNvbjogJHtpLnJlYXNvbn0uIENvbnRleHQ6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7Y29uc3Qgcj10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldCh0KSxvPWUudHlwZTtyLnNldChvLGUpLHRoaXMubGFzdENvbnRleHRNYXAuc2V0KHQsbyksQXJyYXkuZnJvbSh0aGlzLmludGVyb3BDbGllbnRzLnZhbHVlcygpKS5maWx0ZXIoKGU9PmUuY29udGV4dEdyb3VwSWQ9PT10KSkuZm9yRWFjaCgodD0+e2Zvcihjb25zdFssbl1vZiB0LmNvbnRleHRIYW5kbGVycylhLmlzQ29udGV4dFR5cGVDb21wYXRpYmxlKG8sbi5jb250ZXh0VHlwZSkmJnRoaXMuaW52b2tlQ29udGV4dEhhbmRsZXIodC5jbGllbnRJZGVudGl0eSxuLmhhbmRsZXJJZCxlKX0pKX19Z2V0Q3VycmVudENvbnRleHQoZSx0KXt2YXIgbjt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWdldC1jdXJyZW50LWNvbnRleHRcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgaT10aGlzLmdldENsaWVudFN0YXRlKHQpO2lmKCEobnVsbD09aT92b2lkIDA6aS5jb250ZXh0R3JvdXBJZCkpdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgYmUgYSBtZW1iZXIgb2YgYSBjb250ZXh0IGdyb3VwIHRvIGNhbGwgZ2V0Q3VycmVudENvbnRleHRcIik7Y29uc3R7Y29udGV4dEdyb3VwSWQ6cn09aSxvPXRoaXMuY29udGV4dEdyb3Vwc0J5SWQuZ2V0KHIpLHM9dGhpcy5sYXN0Q29udGV4dE1hcC5nZXQociksYT1udWxsIT09KG49bnVsbD09ZT92b2lkIDA6ZS5jb250ZXh0VHlwZSkmJnZvaWQgMCE9PW4/bjpzO3JldHVybiBvJiZhP28uZ2V0KGEpOnZvaWQgMH1hc3luYyBqb2luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplLHRhcmdldDp0fSxuKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWpvaW4tY29udGV4dC1ncm91cFwiKS5jYXRjaCgoZT0+e30pKSx0KXthLmhhc0VuZHBvaW50SWQodCkmJmF3YWl0IHRoaXMuYWRkQ2xpZW50VG9Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmV9LHQpO2NvbnN0IG49dGhpcy5jaGFubmVsLmNvbm5lY3Rpb25zLmZpbHRlcigoZT0+ZS51dWlkPT09dC51dWlkJiZlLm5hbWU9PT10Lm5hbWUpKTtpZighbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKGBHaXZlbiBJZGVudGl0eSAke3QudXVpZH0gJHt0Lm5hbWV9IGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIEludGVyb3AgQnJva2VyLmApO24ubGVuZ3RoPjEmJmNvbnNvbGUud2FybihgTW9yZSB0aGFuIG9uZSBjb25uZWN0aW9uIGZvdW5kIGZvciBpZGVudGl0eSAke3QudXVpZH0gJHt0Lm5hbWV9YCk7Y29uc3QgaT1bXTtmb3IoY29uc3QgdCBvZiBuKWkucHVzaCh0aGlzLmFkZENsaWVudFRvQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSx0KSk7YXdhaXQgUHJvbWlzZS5hbGwoaSl9ZWxzZSBhd2FpdCB0aGlzLmFkZENsaWVudFRvQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSxuKX1hc3luYyBhZGRDbGllbnRUb0NvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6ZX0sdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1hZGQtY2xpZW50LXRvLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj10aGlzLmdldENsaWVudFN0YXRlKHQpO2lmKCFuKXRocm93IG5ldyBFcnJvcihgQ2xpZW50IHdpdGggSWRlbnRpdHk6ICR7dC51dWlkfSAke3QubmFtZX0gbm90IGluIENsaWVudCBTdGF0ZSBNYXBgKTtpZighdGhpcy5nZXRDb250ZXh0R3JvdXBzKCkuZmluZCgodD0+dC5pZD09PWUpKSl0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRpbmcgdG8gam9pbiBhIGNvbnRleHQgZ3JvdXAgdGhhdCBkb2VzIG5vdCBleGlzdDogJHtlfS4gWW91IG1heSBvbmx5IGpvaW4gZXhpc3RpbmcgY29udGV4dCBncm91cHMuYCk7aWYobi5jb250ZXh0R3JvdXBJZCE9PWUpe24uY29udGV4dEdyb3VwSWQ9ZSxhd2FpdCBhLnNldEN1cnJlbnRDb250ZXh0R3JvdXBJbkNsaWVudE9wdGlvbnModCxlKTtjb25zdCBpPXRoaXMuY29udGV4dEdyb3Vwc0J5SWQuZ2V0KGUpO2Zvcihjb25zdFssZV1vZiBuLmNvbnRleHRIYW5kbGVycyl7Y29uc3R7Y29udGV4dFR5cGU6bixoYW5kbGVySWQ6cn09ZTtpZih2b2lkIDA9PT1uKWkuZm9yRWFjaCgoKGUsbik9Pnt0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKHQscixlKX0pKTtlbHNlIGlmKGkuaGFzKG4pKXtjb25zdCBlPWkuZ2V0KG4pO2UmJnRoaXMuaW52b2tlQ29udGV4dEhhbmRsZXIodCxyLGUpfX19fWFzeW5jIHJlbW92ZUZyb21Db250ZXh0R3JvdXAoe3RhcmdldDplfSx0KXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLXJlbW92ZS1mcm9tLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksZSl7YS5oYXNFbmRwb2ludElkKGUpJiZhd2FpdCB0aGlzLnJlbW92ZUNsaWVudEZyb21Db250ZXh0R3JvdXAoZSk7Y29uc3QgdD10aGlzLmNoYW5uZWwuY29ubmVjdGlvbnMuZmlsdGVyKCh0PT50LnV1aWQ9PT1lLnV1aWQmJnQubmFtZT09PWUubmFtZSkpO2lmKCF0Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYE5vIGNvbm5lY3Rpb24gZm91bmQgZm9yIGdpdmVuIElkZW50aXR5ICR7ZS51dWlkfSAke2UubmFtZX1gKTt0Lmxlbmd0aD4xJiZjb25zb2xlLndhcm4oYE1vcmUgdGhhbiBvbmUgY29ubmVjdGlvbiBmb3VuZCBmb3IgaWRlbnRpdHkgJHtlLnV1aWR9ICR7ZS5uYW1lfWApO2NvbnN0IG49W107Zm9yKGNvbnN0IGUgb2YgdCluLnB1c2godGhpcy5yZW1vdmVDbGllbnRGcm9tQ29udGV4dEdyb3VwKGUpKTthd2FpdCBQcm9taXNlLmFsbChuKX1lbHNlIGF3YWl0IHRoaXMucmVtb3ZlQ2xpZW50RnJvbUNvbnRleHRHcm91cCh0KX1hc3luYyByZW1vdmVDbGllbnRGcm9tQ29udGV4dEdyb3VwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItcmVtb3ZlLWNsaWVudC1mcm9tLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD10aGlzLmdldENsaWVudFN0YXRlKGUpO3QmJih0LmNvbnRleHRHcm91cElkPXZvaWQgMCksYXdhaXQgYS5zZXRDdXJyZW50Q29udGV4dEdyb3VwSW5DbGllbnRPcHRpb25zKGUsbnVsbCl9Z2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtYnJva2VyLWdldC1jb250ZXh0LWdyb3Vwc1wiKS5jYXRjaCgoZT0+e30pKSxzLm1hcCgoZT0+KHsuLi5lfSkpKX1nZXRJbmZvRm9yQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDplfSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItZ2V0LWluZm8tZm9yLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy5nZXRDb250ZXh0R3JvdXBzKCkuZmluZCgodD0+dC5pZD09PWUpKX1nZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmV9KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1nZXQtYWxsLWNsaWVudHMtaW4tY29udGV4dC1ncm91cFwiKS5jYXRjaCgoZT0+e30pKSxBcnJheS5mcm9tKHRoaXMuaW50ZXJvcENsaWVudHMudmFsdWVzKCkpLmZpbHRlcigodD0+dC5jb250ZXh0R3JvdXBJZD09PWUpKS5tYXAoKGU9PmUuY2xpZW50SWRlbnRpdHkpKX1hc3luYyBoYW5kbGVGaXJlZEludGVudChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZmlyZUludGVudFwiLFwiZmRjMy5yYWlzZUludGVudFwiLFwiSW50ZXJvcEJyb2tlci5oYW5kbGVGaXJlZEludGVudFwiLHQpO3Rocm93IGNvbnNvbGUud2FybihuKSxuZXcgRXJyb3Ioby5CUk9LRVJfRVJST1JTLmZpcmVJbnRlbnQpfWFzeW5jIHNldEludGVudFRhcmdldChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1icm9rZXItc2V0LWludGVudC10YXJnZXRcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj10aGlzLmludGVudENsaWVudE1hcC5nZXQodC5uYW1lKSxpPWBpbnRlbnQtaGFuZGxlci0ke2UubmFtZX1gO2lmKG4pe2NvbnN0IHQ9bi5nZXQoaSk7aWYodCl7aWYodC5wZW5kaW5nSW50ZW50cy5wdXNoKGUpLHQuY2xpZW50SWRlbnRpdHkmJnQuaXNSZWFkeSl7Y29uc3R7Y2xpZW50SWRlbnRpdHk6ZSxwZW5kaW5nSW50ZW50czpufT10O3RyeXtjb25zdCByPW5bbi5sZW5ndGgtMV07YXdhaXQgdGhpcy5jaGFubmVsLmRpc3BhdGNoKGUsaSxyKSx0LnBlbmRpbmdJbnRlbnRzPVtdfWNhdGNoKG4pe2NvbnNvbGUuZXJyb3IoYEVycm9yIGludm9raW5nIGludGVudCBoYW5kbGVyIGZvciBjbGllbnQgJHtlLnV1aWR9LyR7ZS5uYW1lfS8ke2UuZW5kcG9pbnRJZH1gKSx0LmlzUmVhZHk9ITF9fX1lbHNlIG4uc2V0KGkse2lzUmVhZHk6ITEscGVuZGluZ0ludGVudHM6W2VdfSl9ZWxzZXt0aGlzLmludGVudENsaWVudE1hcC5zZXQodC5uYW1lLG5ldyBNYXApO2NvbnN0IG49dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KHQubmFtZSk7biYmbi5zZXQoaSx7aXNSZWFkeTohMSxwZW5kaW5nSW50ZW50czpbZV19KX19YXN5bmMgaGFuZGxlSW5mb0ZvckludGVudChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZ2V0SW5mb0ZvckludGVudFwiLFwiZmRjMy5maW5kSW50ZW50XCIsXCJJbnRlcm9wQnJva2VyLmhhbmRsZUluZm9Gb3JJbnRlbnRcIix0KTt0aHJvdyBjb25zb2xlLndhcm4obiksbmV3IEVycm9yKG8uQlJPS0VSX0VSUk9SUy5nZXRJbmZvRm9ySW50ZW50KX1hc3luYyBoYW5kbGVJbmZvRm9ySW50ZW50c0J5Q29udGV4dChlLHQpe2NvbnN0IG49by5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZyhcImludGVyb3BDbGllbnQuZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHRcIixcImZkYzMuZmluZEludGVudHNCeUNvbnRleHRcIixcIkludGVyb3BCcm9rZXIuaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHRcIix0KTt0aHJvdyBjb25zb2xlLndhcm4obiksbmV3IEVycm9yKG8uQlJPS0VSX0VSUk9SUy5nZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dCl9YXN5bmMgaGFuZGxlRmlyZWRJbnRlbnRGb3JDb250ZXh0KGUsdCl7Y29uc3Qgbj1vLmdlbmVyYXRlT3ZlcnJpZGVXYXJuaW5nKFwiaW50ZXJvcENsaWVudC5maXJlSW50ZW50Rm9yQ29udGV4dFwiLFwiZmRjMy5yYWlzZUludGVudEZvckNvbnRleHRcIixcIkludGVyb3BCcm9rZXIuaGFuZGxlRmlyZWRJbnRlbnRGb3JDb250ZXh0XCIsdCk7dGhyb3cgY29uc29sZS53YXJuKG4pLG5ldyBFcnJvcihvLkJST0tFUl9FUlJPUlMuZmlyZUludGVudEZvckNvbnRleHQpfWRlY29yYXRlU25hcHNob3QoZSl7cmV0dXJuey4uLmUsaW50ZXJvcFNuYXBzaG90RGV0YWlsczp7Y29udGV4dEdyb3VwU3RhdGVzOnRoaXMuZ2V0Q29udGV4dEdyb3VwU3RhdGVzKCl9fX1hcHBseVNuYXBzaG90KGUsdCl7dmFyIG47Y29uc3QgaT1udWxsPT09KG49bnVsbD09ZT92b2lkIDA6ZS5pbnRlcm9wU25hcHNob3REZXRhaWxzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb250ZXh0R3JvdXBTdGF0ZXM7aSYmKChudWxsPT10P3ZvaWQgMDp0LmNsb3NlRXhpc3RpbmdXaW5kb3dzKXx8dGhpcy51cGRhdGVFeGlzdGluZ0NsaWVudHMoaSksdGhpcy5yZWh5ZHJhdGVDb250ZXh0R3JvdXBTdGF0ZXMoaSkpfXVwZGF0ZUV4aXN0aW5nQ2xpZW50cyhlKXt0aGlzLmludGVyb3BDbGllbnRzLmZvckVhY2goKHQ9Pntjb25zdHtjbGllbnRJZGVudGl0eTpuLGNvbnRleHRHcm91cElkOmksY29udGV4dEhhbmRsZXJzOnJ9PXQ7aWYoaSl7Y29uc3QgdD1lW2ldO2Zvcihjb25zdFssZV1vZiBPYmplY3QuZW50cmllcyh0KSlyLmZvckVhY2goKHQ9Pntjb25zdHtoYW5kbGVySWQ6aSxjb250ZXh0VHlwZTpyfT10O2EuaXNDb250ZXh0VHlwZUNvbXBhdGlibGUoZS50eXBlLHIpJiZ0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKG4saSxlKX0pKX19KSl9Z2V0Q29udGV4dEdyb3VwU3RhdGVzKCl7cmV0dXJuIGEudG9PYmplY3QodGhpcy5jb250ZXh0R3JvdXBzQnlJZCl9cmVoeWRyYXRlQ29udGV4dEdyb3VwU3RhdGVzKGUpe2NvbnN0IHQ9T2JqZWN0LmVudHJpZXMoZSk7Zm9yKGNvbnN0W2Usbl1vZiB0KXtjb25zdCB0PU9iamVjdC5lbnRyaWVzKG4pO2Zvcihjb25zdFtuLGldb2YgdCl0aGlzLmNvbnRleHRHcm91cHNCeUlkLmhhcyhlKT90aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChlKS5zZXQobixpKTpjb25zb2xlLndhcm4oYEF0dGVtcHRpbmcgdG8gc2V0IGEgY29udGV4dCBncm91cCB0aGF0IGlzbid0IGluIHRoZSBjb250ZXh0IGdyb3VwIG1hcHBpbmcuIFNraXBwaW5nIGNvbnRleHQgZ3JvdXAgcmVoeWRyYXRpb24gZm9yOiAke2V9YCl9fWNvbnRleHRIYW5kbGVyUmVnaXN0ZXJlZCh7Y29udGV4dFR5cGU6ZSxoYW5kbGVySWQ6dH0sbil7Y29uc3QgaT17Y29udGV4dFR5cGU6ZSxoYW5kbGVySWQ6dH0scj10aGlzLmdldENsaWVudFN0YXRlKG4pO2lmKG51bGw9PXJ8fHIuY29udGV4dEhhbmRsZXJzLnNldCh0LGkpLHImJnIuY29udGV4dEdyb3VwSWQpe2NvbnN0e2NvbnRleHRHcm91cElkOml9PXIsbz10aGlzLmNvbnRleHRHcm91cHNCeUlkLmdldChpKTtpZih2b2lkIDA9PT1lKW8uZm9yRWFjaCgoKGUsaSk9Pnt0aGlzLmludm9rZUNvbnRleHRIYW5kbGVyKG4sdCxlKX0pKTtlbHNlIGlmKG8uaGFzKGUpKXtjb25zdCBpPW8uZ2V0KGUpO2kmJnRoaXMuaW52b2tlQ29udGV4dEhhbmRsZXIobix0LGkpfX19YXN5bmMgaW50ZW50SGFuZGxlclJlZ2lzdGVyZWQoZSx0KXtjb25zdHtoYW5kbGVySWQ6bn09ZSxpPXRoaXMuaW50ZW50Q2xpZW50TWFwLmdldCh0Lm5hbWUpLHI9bnVsbD09aT92b2lkIDA6aS5nZXQobik7aWYoaSlpZihyKXtjb25zdHtwZW5kaW5nSW50ZW50czplfT1yO3IuY2xpZW50SWRlbnRpdHk9dCxyLmlzUmVhZHk9ITA7dHJ5e2lmKGUubGVuZ3RoPjApe2NvbnN0IGk9ZVtlLmxlbmd0aC0xXTthd2FpdCB0aGlzLmNoYW5uZWwuZGlzcGF0Y2godCxuLGkpLHIucGVuZGluZ0ludGVudHM9W119fWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoYEVycm9yIGludm9raW5nIGludGVudCBoYW5kbGVyOiAke259IGZvciBjbGllbnQgJHt0LnV1aWR9LyR7dC5uYW1lfS8ke3QuZW5kcG9pbnRJZH1gKX19ZWxzZSBpLnNldChuLHtpc1JlYWR5OiEwLHBlbmRpbmdJbnRlbnRzOltdLGNsaWVudElkZW50aXR5OnR9KTtlbHNle3RoaXMuaW50ZW50Q2xpZW50TWFwLnNldCh0Lm5hbWUsbmV3IE1hcCk7Y29uc3QgZT10aGlzLmludGVudENsaWVudE1hcC5nZXQodC5uYW1lKTtlJiZlLnNldChuLHtpc1JlYWR5OiEwLHBlbmRpbmdJbnRlbnRzOltdLGNsaWVudElkZW50aXR5OnR9KX19aW52b2tlQ29udGV4dEhhbmRsZXIoZSx0LG4pe3RoaXMuY2hhbm5lbC5kaXNwYXRjaChlLHQsbikuY2F0Y2goKGk9Pntjb25zb2xlLmVycm9yKGBFcnJvciBpbnZva2luZyBjb250ZXh0IGhhbmRsZXIgJHt0fSBmb3IgY29udGV4dCB0eXBlICR7bi50eXBlfSBpbiBjbGllbnQgJHtlLnV1aWR9LyR7ZS5uYW1lfS8ke2UuZW5kcG9pbnRJZH1gLGkpfSkpfXJlbW92ZUNvbnRleHRIYW5kbGVyKHtoYW5kbGVySWQ6ZX0sdCl7Y29uc3Qgbj10aGlzLmdldENsaWVudFN0YXRlKHQpO24mJm4uY29udGV4dEhhbmRsZXJzLmRlbGV0ZShlKX1oYW5kbGVKb2luU2Vzc2lvbkNvbnRleHRHcm91cCh7c2Vzc2lvbkNvbnRleHRHcm91cElkOmV9LHQpe3RyeXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gam9pbiBzZXNzaW9uIGNvbnRleHQgZ3JvdXA6IG11c3Qgc3BlY2lmeSBncm91cCBpZC5cIik7Y29uc3Qgbj10aGlzLnNlc3Npb25Db250ZXh0R3JvdXBNYXAuZ2V0KGUpO2lmKG4pbi5yZWdpc3Rlck5ld0NsaWVudCh0KTtlbHNle2NvbnN0IG49bmV3IHIuZGVmYXVsdCh0aGlzLmNoYW5uZWwsZSk7bi5yZWdpc3Rlck5ld0NsaWVudCh0KSx0aGlzLnNlc3Npb25Db250ZXh0R3JvdXBNYXAuc2V0KGUsbil9cmV0dXJue2hhc0NvbmZsaWN0OnRoaXMuY29udGV4dEdyb3Vwc0J5SWQuaGFzKGUpfX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoZSl9fWdldENsaWVudFN0YXRlKGUpe3JldHVybiB0aGlzLmludGVyb3BDbGllbnRzLmdldChlLmVuZHBvaW50SWQpfXN0YXRpYyB0b09iamVjdChlKXtjb25zdCB0PU9iamVjdC5mcm9tRW50cmllcyhlKSxuPXt9O3JldHVybiBPYmplY3QuZW50cmllcyh0KS5mb3JFYWNoKCgoW2UsdF0pPT57Y29uc3QgaT1PYmplY3QuZnJvbUVudHJpZXModCk7bltlXT1pfSkpLG59c3RhdGljIGNoZWNrQ29udGV4dEludGVncml0eShlKXtpZighZSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJObyBjb250ZXh0IHN1cHBsaWVkXCJ9O2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlKXJldHVybntpc1ZhbGlkOiExLHJlYXNvbjpcIkNvbnRleHQgbXVzdCBiZSBhbiBPYmplY3RcIn07aWYoIWUudHlwZSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IG11c3QgaGF2ZSBhIHR5cGUgcHJvcGVydHlcIn07aWYoZS5pZCYmXCJvYmplY3RcIiE9dHlwZW9mIGUuaWQpcmV0dXJue2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBpZCBtdXN0IGJlIGFuIE9iamVjdCBwb3B1bGF0ZWQgd2l0aCBrZXktdmFsdWUgaWRlbnRpZmllcnMgKGlmIHNldClcIn07aWYoZS5pZCl7Y29uc3R7aWQ6dH09ZSxuPU9iamVjdC5rZXlzKHQpO2xldCBpPSExO2lmKCFuLmxlbmd0aClyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IGlkIG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUga2V5LXZhbHVlIGlkZW50aWZpZXJcIn07aWYobi5mb3JFYWNoKChlPT57XCJzdHJpbmdcIj09dHlwZW9mIGUmJlwic3RyaW5nXCI9PXR5cGVvZiB0W2VdfHwoaT0hMCl9KSksaSlyZXR1cm57aXNWYWxpZDohMSxyZWFzb246XCJDb250ZXh0IGlkIGtleS12YWx1ZSBpZGVudGlmaWVycyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nXCJ9fXJldHVybiBlLm5hbWUmJlwic3RyaW5nXCIhPXR5cGVvZiBlLm5hbWU/e2lzVmFsaWQ6ITEscmVhc29uOlwiQ29udGV4dCBuYW1lIG11c3QgYmUgb2Ygc3RyaW5nIHR5cGUgKGlmIHNldClcIn06e2lzVmFsaWQ6ITB9fXN0YXRpYyBoYXNFbmRwb2ludElkKGUpe3JldHVybiB2b2lkIDAhPT1lLmVuZHBvaW50SWR9c3RhdGljIGlzQ29udGV4dFR5cGVDb21wYXRpYmxlKGUsdCl7cmV0dXJuIHZvaWQgMD09PXR8fGU9PT10fXNldENvbnRleHRHcm91cE1hcCgpe2Zvcihjb25zdCBlIG9mIHRoaXMuZ2V0Q29udGV4dEdyb3VwcygpKXRoaXMuY29udGV4dEdyb3Vwc0J5SWQuc2V0KGUuaWQsbmV3IE1hcCl9c3RhdGljIGFzeW5jIHNldEN1cnJlbnRDb250ZXh0R3JvdXBJbkNsaWVudE9wdGlvbnMoZSx0KXtjb25zdCBuPWF3YWl0IGZpbi5TeXN0ZW0uZ2V0RW50aXR5SW5mbyhlLnV1aWQsZS5uYW1lKTtsZXQgaTtcInZpZXdcIj09PW4uZW50aXR5VHlwZT9pPWF3YWl0IGZpbi5WaWV3LndyYXAoZSk6XCJ3aW5kb3dcIj09PW4uZW50aXR5VHlwZSYmKGk9YXdhaXQgZmluLldpbmRvdy53cmFwKGUpKSxpP2F3YWl0IGkudXBkYXRlT3B0aW9ucyh7aW50ZXJvcDp7Y3VycmVudENvbnRleHRHcm91cDp0fX0pOmNvbnNvbGUud2FybihgU2V0dGluZyBDdXJyZW50IENvbnRleHQgR3JvdXA6IEVudGl0eSB3aXRoIGlkZW50aXR5ICR7ZS51dWlkfSwgJHtlLm5hbWV9IGlzIG5vdCBhIHdpbmRvdyBvciB2aWV3LiBJdCBpcyBhICR7bi5lbnRpdHlUeXBlfSBpbnN0ZWFkLmApfXdpcmVDaGFubmVsKGUpe2Uub25Db25uZWN0aW9uKCgoZSx0KT0+e2lmKCF0aGlzLmlzQ29ubmVjdGlvbkF1dGhvcml6ZWQoZSx0KSl0aHJvdyBuZXcgRXJyb3IoYENvbm5lY3Rpb24gbm90IGF1dGhvcml6ZWQgZm9yICR7ZS51dWlkfSwgJHtlLm5hbWV9YCk7aWYoIWUuZW5kcG9pbnRJZCl0aHJvdyBuZXcgRXJyb3IoXCJWZXJzaW9uIHRvbyBvbGQgdG8gYmUgY29tcGF0aWJsZSB3aXRoIEludGVyb3AuIFBsZWFzZSB1cGdyYWRlIHlvdXIgcnVudGltZSB0byBhIG1vcmUgcmVjZW50IHZlcnNpb24uXCIpO2NvbnN0IG49e2NvbnRleHRHcm91cElkOnZvaWQgMCxjb250ZXh0SGFuZGxlcnM6bmV3IE1hcCxjbGllbnRJZGVudGl0eTplfTsobnVsbD09dD92b2lkIDA6dC5jdXJyZW50Q29udGV4dEdyb3VwKSYmdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModC5jdXJyZW50Q29udGV4dEdyb3VwKSYmKG4uY29udGV4dEdyb3VwSWQ9bnVsbD09dD92b2lkIDA6dC5jdXJyZW50Q29udGV4dEdyb3VwKSx0aGlzLmludGVyb3BDbGllbnRzLnNldChlLmVuZHBvaW50SWQsbil9KSksZS5vbkRpc2Nvbm5lY3Rpb24oKGU9Pnt0aGlzLmludGVyb3BDbGllbnRzLmRlbGV0ZShlLmVuZHBvaW50SWQpO2NvbnN0IHQ9dGhpcy5pbnRlbnRDbGllbnRNYXAuZ2V0KGUubmFtZSk7dCYmZS51dWlkPT09ZmluLm1lLmlkZW50aXR5LnV1aWQmJnQuZm9yRWFjaCgoZT0+e2UuaXNSZWFkeT0hMX0pKSx0aGlzLnNlc3Npb25Db250ZXh0R3JvdXBNYXAuZm9yRWFjaCgodD0+e3Qub25EaXNjb25uZWN0aW9uKGUpfSkpfSkpLGUuYmVmb3JlQWN0aW9uKCgoZSx0LG4pPT57aWYoIXRoaXMuaXNBY3Rpb25BdXRob3JpemVkKGUsdCxuKSl0aHJvdyBuZXcgRXJyb3IoYEFjdGlvbiAoJHtlfSkgbm90IGF1dGhvcml6ZWQgZm9yICR7bi51dWlkfSwgJHtuLm5hbWV9YCk7Y29uc29sZS5sb2coZSx0LG4pfSkpLGUuYWZ0ZXJBY3Rpb24oY29uc29sZS5sb2cpLGUucmVnaXN0ZXIoXCJzZXRDb250ZXh0XCIsdGhpcy5zZXRDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJmaXJlSW50ZW50XCIsdGhpcy5oYW5kbGVGaXJlZEludGVudC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiZ2V0Q3VycmVudENvbnRleHRcIix0aGlzLmdldEN1cnJlbnRDb250ZXh0LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRJbmZvRm9ySW50ZW50XCIsdGhpcy5oYW5kbGVJbmZvRm9ySW50ZW50LmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dFwiLHRoaXMuaGFuZGxlSW5mb0ZvckludGVudHNCeUNvbnRleHQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImZpcmVJbnRlbnRGb3JDb250ZXh0XCIsdGhpcy5oYW5kbGVGaXJlZEludGVudEZvckNvbnRleHQuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImdldENvbnRleHRHcm91cHNcIix0aGlzLmdldENvbnRleHRHcm91cHMuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImpvaW5Db250ZXh0R3JvdXBcIix0aGlzLmpvaW5Db250ZXh0R3JvdXAuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcInJlbW92ZUZyb21Db250ZXh0R3JvdXBcIix0aGlzLnJlbW92ZUZyb21Db250ZXh0R3JvdXAuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcImdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cFwiLHRoaXMuZ2V0QWxsQ2xpZW50c0luQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJnZXRJbmZvRm9yQ29udGV4dEdyb3VwXCIsdGhpcy5nZXRJbmZvRm9yQ29udGV4dEdyb3VwLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJjb250ZXh0SGFuZGxlclJlZ2lzdGVyZWRcIix0aGlzLmNvbnRleHRIYW5kbGVyUmVnaXN0ZXJlZC5iaW5kKHRoaXMpKSxlLnJlZ2lzdGVyKFwiaW50ZW50SGFuZGxlclJlZ2lzdGVyZWRcIix0aGlzLmludGVudEhhbmRsZXJSZWdpc3RlcmVkLmJpbmQodGhpcykpLGUucmVnaXN0ZXIoXCJyZW1vdmVDb250ZXh0SGFuZGxlclwiLHRoaXMucmVtb3ZlQ29udGV4dEhhbmRsZXIuYmluZCh0aGlzKSksZS5yZWdpc3RlcihcInNlc3Npb25Db250ZXh0R3JvdXA6Y3JlYXRlSWZOZWVkZWRcIix0aGlzLmhhbmRsZUpvaW5TZXNzaW9uQ29udGV4dEdyb3VwLmJpbmQodGhpcykpfWFzeW5jIGlzQ29ubmVjdGlvbkF1dGhvcml6ZWQoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1pcy1jb25uZWN0aW9uLWF1dGhvcml6ZWRcIikuY2F0Y2goKGU9Pnt9KSksITB9YXN5bmMgaXNBY3Rpb25BdXRob3JpemVkKGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWJyb2tlci1pcy1hY3Rpb24tYXV0aG9yaXplZFwiKS5jYXRjaCgoZT0+e30pKSwhMH19dC5JbnRlcm9wQnJva2VyPWF9LDcxMzg6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXR8fGZ1bmN0aW9uKGUsdCxuKXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuc2V0KGUsbiksbn0scz10aGlzJiZ0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXR8fGZ1bmN0aW9uKGUsdCl7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LmdldChlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5JbnRlcm9wQ2xpZW50PXZvaWQgMDtjb25zdCBhPW4oOTY1OSksYz1uKDgyMiksZD1uKDE3ODcpO2NsYXNzIGggZXh0ZW5kcyBhLkJhc2V7Y29uc3RydWN0b3IoZSx0LG4pe3N1cGVyKGUpLGkuc2V0KHRoaXMsdm9pZCAwKSxyLnNldCh0aGlzLHZvaWQgMCksbyh0aGlzLHIsbmV3IE1hcCksbyh0aGlzLGksdGhpcy53aXJlLmVudmlyb25tZW50LndoZW5SZWFkeSgpLnRoZW4oKCgpPT50aGlzLmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChgaW50ZXJvcC1icm9rZXItJHt0fWAse3BheWxvYWQ6bn0pKSkpfWFzeW5jIHNldENvbnRleHQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtc2V0LWNvbnRleHRcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHModGhpcyxpKSkuZGlzcGF0Y2goXCJzZXRDb250ZXh0XCIse2NvbnRleHQ6ZX0pfWFzeW5jIGFkZENvbnRleHRIYW5kbGVyKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1hZGQtY29udGV4dC1oYW5kbGVyXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpO2xldCByO3Q/KHI9YGludm9rZUNvbnRleHRIYW5kbGVyLSR7dH0tJHtkLmdlbmVyYXRlSWQoKX1gLGNvbnNvbGUud2FybihgV2FybmluZzogQnkgcHJvdmlkaW5nIGEgY29udGV4dFR5cGUgKCR7dH0pLCB5b3UgYXJlIHVzaW5nIHRoZSBleHBlcmltZW50YWwgYWRkQ29udGV4dEhhbmRsZXIuIFRvIGF2b2lkIGlzc3VlcywgbWFrZSBzdXJlIHlvdSBhcmUgYWRkaW5nIHlvdXIgY29udGV4dCBoYW5kbGVycyBhdCB0aGUgdG9wIGxldmVsIGluIHlvdXIgYXBwbGljYXRpb24uYCkpOnI9XCJpbnZva2VDb250ZXh0SGFuZGxlclwiO2NvbnN0IG89ZC53cmFwQ29udGV4dEhhbmRsZXIoZSxyKTtyZXR1cm4gbi5yZWdpc3RlcihyLG8pLGF3YWl0IG4uZGlzcGF0Y2goXCJjb250ZXh0SGFuZGxlclJlZ2lzdGVyZWRcIix7aGFuZGxlcklkOnIsY29udGV4dFR5cGU6dH0pLHt1bnN1YnNjcmliZTphc3luYygpPT57bi5yZW1vdmUociksYXdhaXQgbi5kaXNwYXRjaChcInJlbW92ZUNvbnRleHRIYW5kbGVyXCIse2hhbmRsZXJJZDpyfSl9fX1hc3luYyBnZXRDb250ZXh0R3JvdXBzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWNvbnRleHQtZ3JvdXBzXCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwiZ2V0Q29udGV4dEdyb3Vwc1wiKX1hc3luYyBqb2luQ29udGV4dEdyb3VwKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1qb2luLWNvbnRleHQtZ3JvdXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCBzKHRoaXMsaSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGV4dEdyb3VwSWQgc3BlY2lmaWVkIGZvciBqb2luQ29udGV4dEdyb3VwLlwiKTtyZXR1cm4gbi5kaXNwYXRjaChcImpvaW5Db250ZXh0R3JvdXBcIix7Y29udGV4dEdyb3VwSWQ6ZSx0YXJnZXQ6dH0pfWFzeW5jIHJlbW92ZUZyb21Db250ZXh0R3JvdXAoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtcmVtb3ZlLWZyb20tY29udGV4dC1ncm91cFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcInJlbW92ZUZyb21Db250ZXh0R3JvdXBcIix7dGFyZ2V0OmV9KX1hc3luYyBnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXAoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1nZXQtYWxsLWNsaWVudHMtaW4tY29udGV4dC1ncm91cFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHModGhpcyxpKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb250ZXh0R3JvdXBJZCBzcGVjaWZpZWQgZm9yIGdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cC5cIik7cmV0dXJuIHQuZGlzcGF0Y2goXCJnZXRBbGxDbGllbnRzSW5Db250ZXh0R3JvdXBcIix7Y29udGV4dEdyb3VwSWQ6ZX0pfWFzeW5jIGdldEluZm9Gb3JDb250ZXh0R3JvdXAoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1nZXQtaW5mby1mb3ItY29udGV4dC1ncm91cFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHModGhpcyxpKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBjb250ZXh0R3JvdXBJZCBzcGVjaWZpZWQgZm9yIGdldEluZm9Gb3JDb250ZXh0R3JvdXAuXCIpO3JldHVybiB0LmRpc3BhdGNoKFwiZ2V0SW5mb0ZvckNvbnRleHRHcm91cFwiLHtjb250ZXh0R3JvdXBJZDplfSl9YXN5bmMgZmlyZUludGVudChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1maXJlLWludGVudFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImZpcmVJbnRlbnRcIixlKX1hc3luYyByZWdpc3RlckludGVudEhhbmRsZXIoZSx0KXt0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3AtY2xpZW50LXJlZ2lzdGVyLWludGVudC1oYW5kbGVyXCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpLHI9YGludGVudC1oYW5kbGVyLSR7dH1gLG89dGhpcy53cmFwSW50ZW50SGFuZGxlcihlLHIpO3RyeXthd2FpdCBuLnJlZ2lzdGVyKHIsbyksYXdhaXQgbi5kaXNwYXRjaChcImludGVudEhhbmRsZXJSZWdpc3RlcmVkXCIse2hhbmRsZXJJZDpyfSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHJlZ2lzdGVyIGludGVudCBoYW5kbGVyXCIpfXJldHVybnt1bnN1YnNjcmliZTphc3luYygpPT57bi5yZW1vdmUocil9fX1hc3luYyBnZXRDdXJyZW50Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1nZXQtY3VycmVudC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwiZ2V0Q3VycmVudENvbnRleHRcIix7Y29udGV4dFR5cGU6ZX0pfWFzeW5jIGdldEluZm9Gb3JJbnRlbnQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW50ZXJvcC1jbGllbnQtZ2V0LWluZm8tZm9yLWludGVudFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImdldEluZm9Gb3JJbnRlbnRcIixlKX1hc3luYyBnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1nZXQtaW5mby1mb3ItaW50ZW50cy1ieS1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBzKHRoaXMsaSkpLmRpc3BhdGNoKFwiZ2V0SW5mb0ZvckludGVudHNCeUNvbnRleHRcIixlKX1hc3luYyBmaXJlSW50ZW50Rm9yQ29udGV4dChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLWNsaWVudC1maXJlLWludGVudC1mb3ItY29udGV4dFwiKS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgcyh0aGlzLGkpKS5kaXNwYXRjaChcImZpcmVJbnRlbnRGb3JDb250ZXh0XCIsZSl9YXN5bmMgam9pblNlc3Npb25Db250ZXh0R3JvdXAoZSl7dHJ5e2NvbnN0IHQ9cyh0aGlzLHIpLmdldChlKTtpZih0KXJldHVybiB0LmdldFVzZXJJbnN0YW5jZSgpO2NvbnN0IG49YXdhaXQgcyh0aGlzLGkpLHtoYXNDb25mbGljdDpvfT1hd2FpdCBuLmRpc3BhdGNoKFwic2Vzc2lvbkNvbnRleHRHcm91cDpjcmVhdGVJZk5lZWRlZFwiLHtzZXNzaW9uQ29udGV4dEdyb3VwSWQ6ZX0pO28mJmNvbnNvbGUud2FybihgQSAobm9uLXNlc3Npb24pIGNvbnRleHQgZ3JvdXAgd2l0aCB0aGUgbmFtZSBcIiR7ZX1cIiBhbHJlYWR5IGV4aXN0cy4gSWYgeW91IGFyZSB0cnlpbmcgdG8gam9pbiBhIENvbnRleHQgR3JvdXAsIGNhbGwgam9pbkNvbnRleHRHcm91cCBpbnN0ZWFkLmApO2NvbnN0IGE9bmV3IGMuZGVmYXVsdCh0aGlzLndpcmUscyh0aGlzLGkpLGUpO3JldHVybiBzKHRoaXMscikuc2V0KGUsYSksYS5nZXRVc2VySW5zdGFuY2UoKX1jYXRjaCh0KXt0aHJvdyBjb25zb2xlLmVycm9yKGBFcnJvciB0aHJvd24gdHJ5aW5nIHRvIGNyZWF0ZSBTZXNzaW9uIENvbnRleHQgR3JvdXAgd2l0aCBpZCBcIiR7ZX1cIjogJHt0fWApLHR9fXdyYXBJbnRlbnRIYW5kbGVyKGUsdCl7cmV0dXJuIGFzeW5jIG49Pnt0cnl7YXdhaXQgZShuKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKGBFcnJvciB0aHJvd24gYnkgaGFuZGxlciAke3R9OiAke2V9YCksZX19fX10LkludGVyb3BDbGllbnQ9aCxpPW5ldyBXZWFrTWFwLHI9bmV3IFdlYWtNYXB9LDcxMTU6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big4NzA2KTt0LmRlZmF1bHQ9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnByb3ZpZGVyPWUsdGhpcy5pZD10LHRoaXMubGFzdENvbnRleHQ9dm9pZCAwLHRoaXMuY29udGV4dEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5jbGllbnRzPW5ldyBNYXAsdGhpcy5yZWdpc3Rlckxpc3RlbmVycygpfXJlZ2lzdGVyTGlzdGVuZXJzKCl7dGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpnZXRDb250ZXh0LSR7dGhpcy5pZH1gLHRoaXMuZ2V0Q3VycmVudENvbnRleHQuYmluZCh0aGlzKSksdGhpcy5wcm92aWRlci5yZWdpc3Rlcihgc2Vzc2lvbkNvbnRleHRHcm91cDpzZXRDb250ZXh0LSR7dGhpcy5pZH1gLHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpKSx0aGlzLnByb3ZpZGVyLnJlZ2lzdGVyKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJBZGRlZC0ke3RoaXMuaWR9YCx0aGlzLmhhbmRsZXJBZGRlZC5iaW5kKHRoaXMpKSx0aGlzLnByb3ZpZGVyLnJlZ2lzdGVyKGBzZXNzaW9uQ29udGV4dEdyb3VwOmhhbmRsZXJSZW1vdmVkLSR7dGhpcy5pZH1gLHRoaXMuaGFuZGxlclJlbW92ZWQuYmluZCh0aGlzKSl9Z2V0Q3VycmVudENvbnRleHQoZSl7cmV0dXJuIGUudHlwZT90aGlzLmNvbnRleHRHcm91cE1hcC5nZXQoZS50eXBlKTp0aGlzLmxhc3RDb250ZXh0fXNldENvbnRleHQoZSx0KXtjb25zdHtjb250ZXh0Om59PWUscj1pLkludGVyb3BCcm9rZXIuY2hlY2tDb250ZXh0SW50ZWdyaXR5KG4pO2lmKCExPT09ci5pc1ZhbGlkKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNldCBDb250ZXh0IC0gYmFkIENvbnRleHQuIFJlYXNvbjogJHtyLnJlYXNvbn0uIENvbnRleHQ6ICR7SlNPTi5zdHJpbmdpZnkobil9YCk7aWYoIXRoaXMuZ2V0Q2xpZW50U3RhdGUodCkpdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgd2l0aCBJZGVudGl0eTogJHt0LnV1aWR9ICR7dC5uYW1lfSBub3QgaW4gU2Vzc2lvbiBDbGllbnQgU3RhdGUgTWFwYCk7dGhpcy5jb250ZXh0R3JvdXBNYXAuc2V0KG4udHlwZSxuKSx0aGlzLmxhc3RDb250ZXh0PW4sQXJyYXkuZnJvbSh0aGlzLmNsaWVudHMudmFsdWVzKCkpLmZvckVhY2goKGU9Pnt2YXIgdDtudWxsPT09KHQ9ZS5jb250ZXh0SGFuZGxlcnMuZ2V0KG4udHlwZSkpfHx2b2lkIDA9PT10fHx0LmZvckVhY2goKHQ9Pnt0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKGUuY2xpZW50SWRlbnRpdHksdCxuKX0pKSxlLmdsb2JhbEhhbmRsZXImJnRoaXMucHJvdmlkZXIuZGlzcGF0Y2goZS5jbGllbnRJZGVudGl0eSxlLmdsb2JhbEhhbmRsZXIsbil9KSl9Z2V0Q2xpZW50U3RhdGUoZSl7cmV0dXJuIHRoaXMuY2xpZW50cy5nZXQoZS5lbmRwb2ludElkKX1oYW5kbGVyQWRkZWQoZSx0KXtjb25zdHtoYW5kbGVySWQ6bixjb250ZXh0VHlwZTppfT1lLHI9dGhpcy5nZXRDbGllbnRTdGF0ZSh0KTtpZighcil0aHJvdyBuZXcgRXJyb3IoYENsaWVudCB3aXRoIElkZW50aXR5OiAke3QudXVpZH0gJHt0Lm5hbWV9IG5vdCBpbiBDbGllbnQgU3RhdGUgTWFwYCk7aWYoaSl7Y29uc3QgZT1yLmNvbnRleHRIYW5kbGVycy5nZXQoaSl8fFtdO3IuY29udGV4dEhhbmRsZXJzLnNldChpLFsuLi5lLG5dKTtjb25zdCBvPXRoaXMuY29udGV4dEdyb3VwTWFwLmdldChpKTtvJiZ0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKHQsbixvKX1lbHNlIHIuZ2xvYmFsSGFuZGxlcj1uLFsuLi50aGlzLmNvbnRleHRHcm91cE1hcC5rZXlzKCldLmZvckVhY2goKGU9Pntjb25zdCBpPXRoaXMuY29udGV4dEdyb3VwTWFwLmdldChlKTtpJiZ0aGlzLnByb3ZpZGVyLmRpc3BhdGNoKHQsbixpKX0pKX1oYW5kbGVyUmVtb3ZlZChlLHQpe2NvbnN0e2hhbmRsZXJJZDpufT1lLGk9dGhpcy5jbGllbnRzLmdldCh0LmVuZHBvaW50SWQpO2k/KEFycmF5LmZyb20oaS5jb250ZXh0SGFuZGxlcnMpLmZvckVhY2goKChbLGVdKT0+e2NvbnN0IHQ9ZS5pbmRleE9mKG4pO3Q+LTEmJmUuc3BsaWNlKHQsMSl9KSksaS5nbG9iYWxIYW5kbGVyPT09biYmKGkuZ2xvYmFsSGFuZGxlcj12b2lkIDApKTpjb25zb2xlLndhcm4oYFRyeWluZyB0byByZW1vdmUgYSBoYW5kbGVyIGZyb20gYSBjbGllbnQgdGhhdCBpc24ndCBtYXBwZWQuIGhhbmRsZXJJZDogJHtufS4gY2xpZW50SWRlbnRpdHk6ICR7dH1gKX1yZWdpc3Rlck5ld0NsaWVudChlKXtpZighdGhpcy5jbGllbnRzLmhhcyhlLmVuZHBvaW50SWQpKXtjb25zdCB0PXtjb250ZXh0SGFuZGxlcnM6bmV3IE1hcCxjbGllbnRJZGVudGl0eTplLGdsb2JhbEhhbmRsZXI6dm9pZCAwfTt0aGlzLmNsaWVudHMuc2V0KGUuZW5kcG9pbnRJZCx0KX19b25EaXNjb25uZWN0aW9uKGUpe3RoaXMuY2xpZW50cy5kZWxldGUoZS5lbmRwb2ludElkKX19fSw4MjI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LG89dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IHM9big5NjU5KSxhPW4oMTc4Nyk7Y2xhc3MgYyBleHRlbmRzIHMuQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSksaS5zZXQodGhpcyx2b2lkIDApLHRoaXMuaWQ9bixyKHRoaXMsaSx0KX1hc3luYyBzZXRDb250ZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3Atc2Vzc2lvbi1jb250ZXh0LWdyb3VwLXNldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBvKHRoaXMsaSkpLmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOnNldENvbnRleHQtJHt0aGlzLmlkfWAse3Nlc3Npb25Db250ZXh0R3JvdXBJZDp0aGlzLmlkLGNvbnRleHQ6ZX0pfWFzeW5jIGdldEN1cnJlbnRDb250ZXh0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImludGVyb3Atc2Vzc2lvbi1jb250ZXh0LWdyb3VwLWdldC1jb250ZXh0XCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCBvKHRoaXMsaSkpLmRpc3BhdGNoKGBzZXNzaW9uQ29udGV4dEdyb3VwOmdldENvbnRleHQtJHt0aGlzLmlkfWAse3Nlc3Npb25Db250ZXh0R3JvdXBJZDp0aGlzLmlkLHR5cGU6ZX0pfWFzeW5jIGFkZENvbnRleHRIYW5kbGVyKGUsdCl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpbnRlcm9wLXNlc3Npb24tY29udGV4dC1ncm91cC1hZGQtaGFuZGxlclwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPWF3YWl0IG8odGhpcyxpKTtsZXQgcjtyZXR1cm4gcj10P2BzZXNzaW9uQ29udGV4dEhhbmRsZXI6aW52b2tlLSR7dGhpcy5pZH0tJHt0fS0ke2EuZ2VuZXJhdGVJZCgpfWA6YHNlc3Npb25Db250ZXh0SGFuZGxlcjppbnZva2UtJHt0aGlzLmlkfWAsbi5yZWdpc3RlcihyLGEud3JhcENvbnRleHRIYW5kbGVyKGUscikpLG4uZGlzcGF0Y2goYHNlc3Npb25Db250ZXh0R3JvdXA6aGFuZGxlckFkZGVkLSR7dGhpcy5pZH1gLHtoYW5kbGVySWQ6cixjb250ZXh0VHlwZTp0fSkse3Vuc3Vic2NyaWJlOmF3YWl0IHRoaXMuY3JlYXRlVW5zdWJzY3JpYmVDYihyKX19YXN5bmMgY3JlYXRlVW5zdWJzY3JpYmVDYihlKXtjb25zdCB0PWF3YWl0IG8odGhpcyxpKTtyZXR1cm4gYXN5bmMoKT0+e3QucmVtb3ZlKGUpLGF3YWl0IHQuZGlzcGF0Y2goYHNlc3Npb25Db250ZXh0R3JvdXA6aGFuZGxlclJlbW92ZWQtJHt0aGlzLmlkfWAse2hhbmRsZXJJZDplfSl9fWdldFVzZXJJbnN0YW5jZSgpe3JldHVybntpZDp0aGlzLmlkLHNldENvbnRleHQ6YS53cmFwSW5UcnlDYXRjaCh0aGlzLnNldENvbnRleHQuYmluZCh0aGlzKSxcIkZhaWxlZCB0byBzZXQgY29udGV4dDogXCIpLGdldEN1cnJlbnRDb250ZXh0OmEud3JhcEluVHJ5Q2F0Y2godGhpcy5nZXRDdXJyZW50Q29udGV4dC5iaW5kKHRoaXMpLFwiRmFpbGVkIHRvIGdldCBjb250ZXh0OiBcIiksYWRkQ29udGV4dEhhbmRsZXI6YS53cmFwSW5UcnlDYXRjaCh0aGlzLmFkZENvbnRleHRIYW5kbGVyLmJpbmQodGhpcyksXCJGYWlsZWQgdG8gYWRkIGNvbnRleHQgaGFuZGxlcjogXCIpfX19dC5kZWZhdWx0PWMsaT1uZXcgV2Vha01hcH0sODcwNjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDI5NzcpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDcxMzgpLHQpLHIobigyMDU3KSx0KX0sMTc4NzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQlJPS0VSX0VSUk9SUz10LmdlbmVyYXRlT3ZlcnJpZGVXYXJuaW5nPXQuZ2VuZXJhdGVPdmVycmlkZUVycm9yPXQud3JhcENvbnRleHRIYW5kbGVyPXQud3JhcEluVHJ5Q2F0Y2g9dC5nZW5lcmF0ZUlkPXZvaWQgMCx0LmdlbmVyYXRlSWQ9KCk9PmAke01hdGgucmFuZG9tKCl9JHtEYXRlLm5vdygpfWAsdC53cmFwSW5UcnlDYXRjaD0oZSx0KT0+KC4uLm4pPT57dHJ5e3JldHVybiBlKC4uLm4pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigodHx8XCJcIikrZSl9fSx0LndyYXBDb250ZXh0SGFuZGxlcj0oZSx0KT0+YXN5bmMgbj0+e3RyeXthd2FpdCBlKG4pfWNhdGNoKGUpe3Rocm93IGNvbnNvbGUuZXJyb3IoYEVycm9yIHRocm93biBieSBoYW5kbGVyICR7dH0gZm9yIGNvbnRleHQgdHlwZSAke24udHlwZX06ICR7ZX1gKSxlfX0sdC5nZW5lcmF0ZU92ZXJyaWRlRXJyb3I9KGUsdCk9PmBZb3UgaGF2ZSB0cmllZCB0byB0byB1c2UgJHtlfSBidXQgJHt0fSBoYXMgbm90IGJlZW4gb3ZlcnJpZGRlbiBpbiB0aGUgSW50ZXJvcCBCcm9rZXIuIFBsZWFzZSBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uLiBSZWZlciB0byBvdXIgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvLmAsdC5nZW5lcmF0ZU92ZXJyaWRlV2FybmluZz0oZSx0LG4saSk9Pntjb25zdHt1dWlkOnIsbmFtZTpvfT1pO3JldHVybmBFbnRpdHkgd2l0aCBpZGVudGl0eTogJHtyfS8ke299IGhhcyBjYWxsZWQgJHtlfSBvciAke3R9IGJ1dCAke259IGhhcyBub3QgYmVlbiBvdmVycmlkZGVuLmB9LHQuQlJPS0VSX0VSUk9SUz17ZmlyZUludGVudDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImZpcmVJbnRlbnRcIixcImhhbmRsZUZpcmVkSW50ZW50XCIpLGZpcmVJbnRlbnRGb3JDb250ZXh0OnQuZ2VuZXJhdGVPdmVycmlkZUVycm9yKFwiZmlyZUludGVudEZvckNvbnRleHRcIixcImhhbmRsZUZpcmVkSW50ZW50Rm9yQ29udGV4dFwiKSxnZXRJbmZvRm9ySW50ZW50OnQuZ2VuZXJhdGVPdmVycmlkZUVycm9yKFwiZ2V0SW5mb0ZvckludGVudFwiLFwiaGFuZGxlSW5mb0ZvckludGVudFwiKSxnZXRJbmZvRm9ySW50ZW50c0J5Q29udGV4dDp0LmdlbmVyYXRlT3ZlcnJpZGVFcnJvcihcImdldEluZm9Gb3JJbnRlbnRzQnlDb250ZXh0XCIsXCJoYW5kbGVJbmZvRm9ySW50ZW50c0J5Q29udGV4dFwiKX19LDk2NDE6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZ2V0TWU9dC5nZXRCYXNlTWU9dm9pZCAwO2NvbnN0IGk9big0MTY5KSxyPW4oNjcyMCksbz1uKDQ5OTcpO2Z1bmN0aW9uIHMoZSx0LG4pe3JldHVybntpc1ZpZXc6XCJ2aWV3XCI9PT1lLGlzV2luZG93Olwid2luZG93XCI9PT1lLGlzRnJhbWU6XCJpZnJhbWVcIj09PWUsaXNFeHRlcm5hbDpcImV4dGVybmFsIGNvbm5lY3Rpb25cIj09PWUsdXVpZDp0LG5hbWU6bixlbnRpdHlUeXBlOmV9fXQuZ2V0QmFzZU1lPXMsdC5nZXRNZT1mdW5jdGlvbihlKXtjb25zdHt1dWlkOnQsbmFtZTpuLGVudGl0eVR5cGU6YX09ZS5tZSxjPXtzZXRDb250ZXh0KCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9LGFkZENvbnRleHRIYW5kbGVyKCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9LGdldENvbnRleHRHcm91cHMoKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm9wIEFQSSBoYXMgbm90IGJlZW4gaW5zdGFudGlhdGVkLiBFaXRoZXIgY29ubmVjdGlvbiBoYXMgZmFpbGVkIG9yIHlvdSBoYXZlIG5vdCBkZWNsYXJlZCBpbnRlcm9wIGluIHlvdXIgY29uZmlnLlwiKX0sam9pbkNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxyZW1vdmVGcm9tQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9LGdldEFsbENsaWVudHNJbkNvbnRleHRHcm91cCgpe3Rocm93IG5ldyBFcnJvcihcIkludGVyb3AgQVBJIGhhcyBub3QgYmVlbiBpbnN0YW50aWF0ZWQuIEVpdGhlciBjb25uZWN0aW9uIGhhcyBmYWlsZWQgb3IgeW91IGhhdmUgbm90IGRlY2xhcmVkIGludGVyb3AgaW4geW91ciBjb25maWcuXCIpfSxnZXRJbmZvRm9yQ29udGV4dEdyb3VwKCl7dGhyb3cgbmV3IEVycm9yKFwiSW50ZXJvcCBBUEkgaGFzIG5vdCBiZWVuIGluc3RhbnRpYXRlZC4gRWl0aGVyIGNvbm5lY3Rpb24gaGFzIGZhaWxlZCBvciB5b3UgaGF2ZSBub3QgZGVjbGFyZWQgaW50ZXJvcCBpbiB5b3VyIGNvbmZpZy5cIil9fTtzd2l0Y2goYSl7Y2FzZVwidmlld1wiOnJldHVybiBPYmplY3QuYXNzaWduKG5ldyBpLlZpZXcoZSx7dXVpZDp0LG5hbWU6bn0pLHMoYSx0LG4pLHtpbnRlcm9wOmN9KTtjYXNlXCJ3aW5kb3dcIjpyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgby5fV2luZG93KGUse3V1aWQ6dCxuYW1lOm59KSxzKGEsdCxuKSx7aW50ZXJvcDpjfSk7Y2FzZVwiaWZyYW1lXCI6cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IHIuX0ZyYW1lKGUse3V1aWQ6dCxuYW1lOm59KSxzKGEsdCxuKSx7aW50ZXJvcDpjfSk7ZGVmYXVsdDpyZXR1cm57Li4ucyhhLHQsbil9fX19LDcyODM6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IGk9big5NjU5KSxyPW4oNjM5NCksbz1uKDk4NzIpO2NsYXNzIHMgZXh0ZW5kcyBpLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl9jaGFubmVsPXQsdGhpcy5faW5pdGlhbGl6ZXI9KC4uLmUpPT50aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0UHJvdmlkZXJJbml0aWFsaXplcigpLnRoZW4oKHQ9PnQodGhpcy53aXJlLmVudmlyb25tZW50KSguLi5lKSkpLHRoaXMuTGF5b3V0PW5ldyByLkxheW91dE1vZHVsZSh0aGlzLndpcmUpfWFzeW5jIGluaXQoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLm92ZXJyaWRlQ2FsbGJhY2ssbj1hd2FpdCB0aGlzLmZpbi5JbnRlcm9wLmluaXQodGhpcy5maW4ubWUudXVpZCxudWxsPT1lP3ZvaWQgMDplLmludGVyb3BPdmVycmlkZSk7cmV0dXJuIHdpbmRvdy5pbnRlcm9wQnJva2VyPW4sdGhpcy5faW5pdGlhbGl6ZXIodCxuKX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInBsYXRmb3JtLXdyYXBcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uUGxhdGZvcm0oe3V1aWQ6ZS51dWlkfSx0aGlzLl9jaGFubmVsKX13cmFwU3luYyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uUGxhdGZvcm0oe3V1aWQ6ZS51dWlkfSx0aGlzLl9jaGFubmVsKX1hc3luYyBnZXRDdXJyZW50KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksdGhpcy53cmFwKHt1dWlkOnRoaXMud2lyZS5tZS51dWlkfSl9Z2V0Q3VycmVudFN5bmMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtY3VycmVudC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcFN5bmMoe3V1aWQ6dGhpcy53aXJlLm1lLnV1aWR9KX1zdGFydChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zdGFydFwiKS5jYXRjaCgoZT0+e30pKSxuZXcgUHJvbWlzZSgoYXN5bmModCxuKT0+e3RyeXtjb25zdHt1dWlkOm59PWUsaT1hd2FpdCB0aGlzLmZpbi5BcHBsaWNhdGlvbi5fY3JlYXRlKHsuLi5lLGlzUGxhdGZvcm1Db250cm9sbGVyOiEwfSk7aS5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT50KHRoaXMud3JhcFN5bmMoe3V1aWQ6bn0pKSkpLGkuX3J1bih7dXVpZDpufSl9Y2F0Y2goZSl7bihlKX19KSl9c3RhcnRGcm9tTWFuaWZlc3QoZSx0KXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zdGFydC1mcm9tLW1hbmlmZXN0XCIpLmNhdGNoKChlPT57fSkpLG5ldyBQcm9taXNlKChhc3luYyhuLGkpPT57dHJ5e2NvbnN0IGk9YXdhaXQgdGhpcy5maW4uQXBwbGljYXRpb24uX2NyZWF0ZUZyb21NYW5pZmVzdChlKTtpLm9uY2UoXCJwbGF0Zm9ybS1hcGktcmVhZHlcIiwoKCk9Pm4odGhpcy53cmFwU3luYyh7dXVpZDppLmlkZW50aXR5LnV1aWR9KSkpKSxpLl9ydW4odCl9Y2F0Y2goZSl7aShlKX19KSl9fXQuZGVmYXVsdD1zfSw5ODcyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBsYXRmb3JtPXZvaWQgMDtjb25zdCBvPW4oOTY1OSkscz1uKDQ5OTkpLGE9bmV3IE1hcDtjbGFzcyBjIGV4dGVuZHMgby5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQud2lyZSxcImFwcGxpY2F0aW9uXCIsZS51dWlkKSx0aGlzLmdldENsaWVudD1lPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtY2xpZW50XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1lfHx0aGlzLmlkZW50aXR5LHt1dWlkOm59PXQ7aWYoIWEuaGFzKG4pKXtjb25zdCBlPXIodGhpcyxpKS5jYWxsKHRoaXMsbik7YS5zZXQobixlKX1yZXR1cm4gYS5nZXQobil9LGkuc2V0KHRoaXMsKGFzeW5jIGU9Pnt0cnl7Y29uc3QgdD1gY3VzdG9tLWZyYW1lLSR7ZX1gLG49YXdhaXQgdGhpcy5fY2hhbm5lbC5jb25uZWN0KHQse3dhaXQ6ITF9KTtyZXR1cm4gbi5vbkRpc2Nvbm5lY3Rpb24oKCgpPT57YS5kZWxldGUoZSl9KSksbn1jYXRjaCh0KXt0aHJvdyBhLmRlbGV0ZShlKSxuZXcgRXJyb3IoXCJUaGUgdGFyZ2V0ZWQgUGxhdGZvcm0gaXMgbm90IGN1cnJlbnRseSBydW5uaW5nLiBMaXN0ZW4gZm9yIGFwcGxpY2F0aW9uLXN0YXJ0ZWQgZXZlbnQgZm9yIHRoZSBnaXZlbiBVdWlkLlwiKX19KSksdGhpcy5sYXVuY2hMZWdhY3lNYW5pZmVzdD10aGlzLmxhdW5jaENvbnRlbnRNYW5pZmVzdDtjb25zdCBuPXMudmFsaWRhdGVJZGVudGl0eShlKTtpZihuKXRocm93IG5ldyBFcnJvcihuKTt0aGlzLl9jaGFubmVsPXQsdGhpcy5pZGVudGl0eT17dXVpZDplLnV1aWR9LHRoaXMuTGF5b3V0PXRoaXMuZmluLlBsYXRmb3JtLkxheW91dCx0aGlzLkFwcGxpY2F0aW9uPXRoaXMuZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKHRoaXMuaWRlbnRpdHkpfWFzeW5jIGNyZWF0ZVZpZXcoZSx0LG4pe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY3JlYXRlLXZpZXdcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBpPWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCkscj1hd2FpdCBpLmRpc3BhdGNoKFwiY3JlYXRlLXZpZXdcIix7dGFyZ2V0OnQsb3B0czplLHRhcmdldFZpZXc6bn0pO2lmKCFyfHxzLnZhbGlkYXRlSWRlbnRpdHkoci5pZGVudGl0eSkpdGhyb3cgbmV3IEVycm9yKGBXaGVuIG92ZXJ3cml0aW5nIHRoZSBjcmVhdGVWaWV3IGNhbGwsIHBsZWFzZSByZXR1cm4gYW4gb2JqZWN0IHRoYXQgaGFzIGEgdmFsaWQgJ2lkZW50aXR5JyBwcm9wZXJ0eTogJHtKU09OLnN0cmluZ2lmeShyKX1gKTtyZXR1cm4gdGhpcy5maW4uVmlldy53cmFwU3luYyhyLmlkZW50aXR5KX1hc3luYyBjcmVhdGVXaW5kb3coZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1jcmVhdGUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpO2UucmVhc29ufHwoZS5yZWFzb249XCJhcGktY2FsbFwiKTtjb25zdCBuPWF3YWl0IHQuZGlzcGF0Y2goXCJjcmVhdGUtdmlldy1jb250YWluZXJcIixlKTtpZighbnx8cy52YWxpZGF0ZUlkZW50aXR5KG4uaWRlbnRpdHkpKXRocm93IG5ldyBFcnJvcihgV2hlbiBvdmVyd3JpdGluZyB0aGUgY3JlYXRlV2luZG93IGNhbGwsIHBsZWFzZSByZXR1cm4gYW4gb2JqZWN0IHRoYXQgaGFzIGEgdmFsaWQgJ2lkZW50aXR5JyBwcm9wZXJ0eTogJHtKU09OLnN0cmluZ2lmeShuKX1gKTtjb25zdHtpZGVudGl0eTppfT1uLHI9dGhpcy5maW4uV2luZG93LndyYXBTeW5jKGkpO3JldHVybiByLm5hbWU9aS5uYW1lLHIudXVpZD1pLnV1aWQscn1hc3luYyBxdWl0KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tcXVpdFwiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLmdldENsaWVudCgpKS5kaXNwYXRjaChcInF1aXRcIil9YXN5bmMgY2xvc2VWaWV3KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tY2xvc2Utdmlld1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5nZXRDbGllbnQoKTthd2FpdCB0LmRpc3BhdGNoKFwiY2xvc2Utdmlld1wiLHt2aWV3OmV9KX1hc3luYyByZXBhcmVudFZpZXcoZSx0KXt2YXIgbjtjb25zb2xlLndhcm4oXCJQbGF0Zm9ybS5yZXBhcmVudFZpZXcgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBQbGF0Zm9ybS5jcmVhdGVWaWV3XCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tcmVwYXJlbnQtdmlld1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpO2NvbnN0IGk9ey4uLmUsdXVpZDpudWxsIT09KG49ZS51dWlkKSYmdm9pZCAwIT09bj9uOnRoaXMuaWRlbnRpdHkudXVpZH0scj1hd2FpdCB0aGlzLmZpbi5WaWV3LndyYXAoaSksbz1hd2FpdCByLmdldE9wdGlvbnMoKTtyZXR1cm4gdGhpcy5jcmVhdGVWaWV3KG8sdCl9YXN5bmMgZ2V0U25hcHNob3QoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1nZXQtc25hcHNob3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwoYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJnZXQtc25hcHNob3RcIil9YXN5bmMgYXBwbHlTbmFwc2hvdChlLHQpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tYXBwbHktc25hcHNob3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCBuPVwiUmVxdWVzdGVkIHNuYXBzaG90IG11c3QgYmUgYSB2YWxpZCBTbmFwc2hvdCBvYmplY3QsIG9yIGEgdXJsIG9yIGZpbGVwYXRoIHRvIHN1Y2ggYW4gb2JqZWN0LlwiO2xldCBpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXRyeXtpPShhd2FpdCB0aGlzLl9jaGFubmVsLndpcmUuc2VuZEFjdGlvbihcImdldC1hcHBsaWNhdGlvbi1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSkpLnBheWxvYWQuZGF0YX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYCR7bn06ICR7ZX1gKX1lbHNlIGk9ZTtpZighaS53aW5kb3dzKXRocm93IG5ldyBFcnJvcihuKTtjb25zdCByPWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCk7cmV0dXJuIGF3YWl0IHIuZGlzcGF0Y2goXCJhcHBseS1zbmFwc2hvdFwiLHtzbmFwc2hvdDppLG9wdGlvbnM6dH0pLHRoaXN9YXN5bmMgZmV0Y2hNYW5pZmVzdChlKXtyZXR1cm4oYXdhaXQgdGhpcy5nZXRDbGllbnQoKSkuZGlzcGF0Y2goXCJwbGF0Zm9ybS1mZXRjaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplfSl9YXN5bmMgbGF1bmNoQ29udGVudE1hbmlmZXN0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tbGF1bmNoLWNvbnRlbnQtbWFuaWZlc3RcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q2xpZW50KCksbj1hd2FpdCB0aGlzLmZldGNoTWFuaWZlc3QoZSk7cmV0dXJuIHQuZGlzcGF0Y2goXCJsYXVuY2gtaW50by1wbGF0Zm9ybVwiLHttYW5pZmVzdDpufSksdGhpc31hc3luYyBzZXRXaW5kb3dDb250ZXh0KGU9e30sdCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJwbGF0Zm9ybS1zZXQtd2luZG93LWNvbnRleHRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwhZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIHNlcmlhbGl6YWJsZSBvYmplY3Qgb3Igc3RyaW5nIHRvIHNldCB0aGUgY29udGV4dC5cIik7Y29uc3Qgbj1hd2FpdCB0aGlzLmdldENsaWVudCgpLHtlbnRpdHlUeXBlOml9PXQ/YXdhaXQgdGhpcy5maW4uU3lzdGVtLmdldEVudGl0eUluZm8odC51dWlkLHQubmFtZSk6dGhpcy5maW4ubWU7YXdhaXQgbi5kaXNwYXRjaChcInNldC13aW5kb3ctY29udGV4dFwiLHtjb250ZXh0OmUsZW50aXR5VHlwZTppLHRhcmdldDp0fHx7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dGhpcy5maW4ubWUubmFtZX19KX1hc3luYyBnZXRXaW5kb3dDb250ZXh0KGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwicGxhdGZvcm0tZ2V0LXdpbmRvdy1jb250ZXh0XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1hd2FpdCB0aGlzLmdldENsaWVudCgpLHtlbnRpdHlUeXBlOm59PWU/YXdhaXQgdGhpcy5maW4uU3lzdGVtLmdldEVudGl0eUluZm8oZS51dWlkLGUubmFtZSk6dGhpcy5maW4ubWU7cmV0dXJuIHQuZGlzcGF0Y2goXCJnZXQtd2luZG93LWNvbnRleHRcIix7dGFyZ2V0OmV8fHt1dWlkOnRoaXMuZmluLm1lLnV1aWQsbmFtZTp0aGlzLmZpbi5tZS5uYW1lfSxlbnRpdHlUeXBlOm59KX19dC5QbGF0Zm9ybT1jLGk9bmV3IFdlYWtNYXB9LDQzODY6KGUsdCk9PntmdW5jdGlvbiBuKGUpe3N3aXRjaChlKXtjYXNlXCJjb2x1bW5zXCI6Y2FzZVwiZ3JpZFwiOmNhc2VcInJvd3NcIjpjYXNlXCJ0YWJzXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5pc1ZhbGlkUHJlc2V0VHlwZT12b2lkIDAsdC5pc1ZhbGlkUHJlc2V0VHlwZT1uLHQuZGVmYXVsdD17aXNWYWxpZFByZXNldFR5cGU6bn19LDYwOTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDcyODMpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDk4NzIpLHQpfSw0MjEwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkxheW91dE1vZHVsZT12b2lkIDA7Y29uc3Qgcz1uKDgxMTEpLGE9big5NjU5KTtjbGFzcyBjIGV4dGVuZHMgYS5CYXNle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSxpLnNldCh0aGlzLHZvaWQgMCksdGhpcy5pbml0PWFzeW5jKGU9e30pPT57aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtaW5pdFwiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiTGF5b3V0LmluaXQgY2FuIG9ubHkgYmUgY2FsbGVkIGZyb20gYSBXaW5kb3cgY29udGV4dC5cIik7aWYocih0aGlzLGkpKXRocm93IG5ldyBFcnJvcihcIkxheW91dCBmb3IgdGhpcyB3aW5kb3cgYWxyZWFkeSBpbml0aWFsaXplZCwgcGxlYXNlIHVzZSBMYXlvdXQucmVwbGFjZSBjYWxsIHRvIHJlcGxhY2UgdGhlIGxheW91dC5cIik7Y29uc3QgdD1hd2FpdCB0aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0TWFuYWdlckNvbnN0cnVjdG9yKCk7byh0aGlzLGksbmV3IHQpO2xldHtsYXlvdXQ6bixjb250YWluZXJJZDpzfT1lO24mJmNvbnNvbGUud2FybihcIldlIHJlY29tbWVuZCB1c2luZyBhIGxheW91dCBpbiB3aW5kb3cgb3B0aW9ucy5cXG4gICAgICAgICAgICAgICAgVGhpcyBsYXlvdXQgaGFzIG5vdCBiZWVuIHNhbml0aXplZCBhbmQgdW5leHBlY3RlZCBiZWhhdmlvciBjYW4gb2NjdXIuXCIpLG49bnx8KGF3YWl0IHRoaXMuZmluLldpbmRvdy5nZXRDdXJyZW50U3luYygpLmdldE9wdGlvbnMoKSkubGF5b3V0LHM9c3x8XCJsYXlvdXQtY29udGFpbmVyXCI7Y29uc3QgYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKTtyZXR1cm4gYXdhaXQgcih0aGlzLGkpLmluaXRNYW5hZ2VyKCksYXdhaXQgcih0aGlzLGkpLmNyZWF0ZUxheW91dChuLGEpLE9iamVjdC5hc3NpZ24odGhpcy5nZXRDdXJyZW50U3luYygpLHtsYXlvdXRNYW5hZ2VyOnIodGhpcyxpKX0pfX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC13cmFwXCIpLmNhdGNoKChlPT57fSkpLG5ldyBzLkxheW91dChlLHRoaXMud2lyZSl9d3JhcFN5bmMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwibGF5b3V0LXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKSxuZXcgcy5MYXlvdXQoZSx0aGlzLndpcmUpfWFzeW5jIGdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1nZXQtY3VycmVudFwiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dC4gIE9ubHkgV2luZG93cyBjYW4gaGF2ZSBhIExheW91dC5cIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy5maW4ubWU7cmV0dXJuIHRoaXMud3JhcCh7dXVpZDplLG5hbWU6dH0pfWdldEN1cnJlbnRTeW5jKCl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtZ2V0LWN1cnJlbnQtc3luY1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy5maW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBXaW5kb3cgY29udGV4dC4gIE9ubHkgV2luZG93cyBjYW4gaGF2ZSBhIExheW91dC5cIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy5maW4ubWU7cmV0dXJuIHRoaXMud3JhcFN5bmMoe3V1aWQ6ZSxuYW1lOnR9KX19dC5MYXlvdXRNb2R1bGU9YyxpPW5ldyBXZWFrTWFwfSw4MTExOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkxheW91dD12b2lkIDA7Y29uc3QgaT1uKDQ5OTkpLHI9big0Mzg2KSxvPW4oOTY1OSk7Y2xhc3MgcyBleHRlbmRzIG8uQmFzZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQpLHRoaXMucmVwbGFjZT1hc3luYyBlPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtcmVwbGFjZVwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PWF3YWl0IHRoaXMucGxhdGZvcm0uZ2V0Q2xpZW50KCk7YXdhaXQgdC5kaXNwYXRjaChcInJlcGxhY2UtbGF5b3V0XCIse3RhcmdldDp0aGlzLmlkZW50aXR5LG9wdHM6e2xheW91dDplfX0pfSx0aGlzLnJlcGxhY2VWaWV3PWFzeW5jKGUsdCk9Pnt0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1yZXBsYWNlLXZpZXdcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3Qgbj1hd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpO2F3YWl0IG4uZGlzcGF0Y2goXCJyZXBsYWNlLXZpZXdcIix7dGFyZ2V0OnRoaXMuaWRlbnRpdHksb3B0czp7dmlld1RvUmVwbGFjZTplLG5ld1ZpZXc6dH19KX0sdGhpcy5hcHBseVByZXNldD1hc3luYyBlPT57dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsYXlvdXQtYXBwbHktcHJlc2V0XCIpLmNhdGNoKChlPT57fSkpO2NvbnN0IHQ9YXdhaXQgdGhpcy5wbGF0Zm9ybS5nZXRDbGllbnQoKSx7cHJlc2V0VHlwZTpufT1lO2lmKCFufHwhci5pc1ZhbGlkUHJlc2V0VHlwZShuKSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYXBwbHkgcHJlc2V0IGxheW91dCwgcGxlYXNlIGluY2x1ZGUgYW4gYXBwbGljYWJsZSBwcmVzZXRUeXBlIHByb3BlcnR5IGluIHRoZSBQcmVzZXRMYXlvdXRPcHRpb25zLlwiKTthd2FpdCB0LmRpc3BhdGNoKFwiYXBwbHktcHJlc2V0LWxheW91dFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eSxvcHRzOntwcmVzZXRUeXBlOm59fSl9O2NvbnN0IG49aS52YWxpZGF0ZUlkZW50aXR5KGUpO2lmKG4pdGhyb3cgbmV3IEVycm9yKG4pO3RoaXMuaWRlbnRpdHk9ZSx0aGlzLnBsYXRmb3JtPXRoaXMuZmluLlBsYXRmb3JtLndyYXBTeW5jKHt1dWlkOmUudXVpZH0pLGUudXVpZD09PXRoaXMuZmluLm1lLnV1aWQmJmUubmFtZT09PXRoaXMuZmluLm1lLm5hbWUmJih0aGlzLmluaXQ9dGhpcy5maW4uUGxhdGZvcm0uTGF5b3V0LmluaXQpfWFzeW5jIGdldENvbmZpZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxheW91dC1nZXQtY29uZmlnXCIpLmNhdGNoKChlPT57fSkpLChhd2FpdCB0aGlzLnBsYXRmb3JtLmdldENsaWVudCgpKS5kaXNwYXRjaChcImdldC1mcmFtZS1zbmFwc2hvdFwiLHt0YXJnZXQ6dGhpcy5pZGVudGl0eX0pfX10LkxheW91dD1zfSw2Mzk0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX06ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9biksZVtpXT10W25dfSkscj10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlcImRlZmF1bHRcIj09PW58fHQuaGFzT3duUHJvcGVydHkobil8fGkodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxyKG4oNDIxMCksdCkscihuKDgxMTEpLHQpfSwxNzQ2OihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDI4NzgpLG89big2MjE1KTtjbGFzcyBzIGV4dGVuZHMgaS5CYXNle2FzeW5jIGluaXQoZSl7aWYodGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2UtaW5pdFwiKS5jYXRjaCgoZT0+e30pKSxcIm9iamVjdFwiIT10eXBlb2YgZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS5nZXRTbmFwc2hvdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS5hcHBseVNuYXBzaG90KXRocm93IG5ldyBFcnJvcihcInlvdSBtdXN0IHBhc3MgaW4gYSB2YWxpZCBTbmFwc2hvdFByb3ZpZGVyXCIpO2NvbnN0IHQ9YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShvLmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWUoZmluLm1lLmlkZW50aXR5KSk7dC5yZWdpc3RlcihcImdldC1zbmFwc2hvdFwiLChhc3luYygpPT4oe3NuYXBzaG90OmF3YWl0IGUuZ2V0U25hcHNob3QoKX0pKSksdC5yZWdpc3RlcihcImFwcGx5LXNuYXBzaG90XCIsKCh7c25hcHNob3Q6dH0pPT5lLmFwcGx5U25hcHNob3QodCkpKX13cmFwU3luYyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2Utd3JhcC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLG5ldyByLlNuYXBzaG90U291cmNlKHRoaXMud2lyZSxlKX1hc3luYyB3cmFwKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNuYXBzaG90LXNvdXJjZS13cmFwXCIpLmNhdGNoKChlPT57fSkpLHRoaXMud3JhcFN5bmMoZSl9fXQuZGVmYXVsdD1zfSwyODc4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxhLGM9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0fHxmdW5jdGlvbihlLHQsbil7aWYoIXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO3JldHVybiB0LnNldChlLG4pLG59LGQ9dGhpcyYmdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0fHxmdW5jdGlvbihlLHQpe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5nZXQoZSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU25hcHNob3RTb3VyY2U9dm9pZCAwO2NvbnN0IGg9big5NjU5KSxsPW4oNjIxNSksdT1uZXcgTWFwO2NsYXNzIHAgZXh0ZW5kcyBoLkJhc2V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSxpLnNldCh0aGlzLHZvaWQgMCksci5zZXQodGhpcywoKCk9Pih1Lmhhcyh0aGlzLmlkZW50aXR5LnV1aWQpfHx1LnNldCh0aGlzLmlkZW50aXR5LnV1aWQse2V2ZW50RmlyZWQ6bnVsbCxjbGllbnRQcm9taXNlOm51bGx9KSx1LmdldCh0aGlzLmlkZW50aXR5LnV1aWQpKSkpLG8uc2V0KHRoaXMsKCgpPT4oZCh0aGlzLHIpLmNhbGwodGhpcykuY2xpZW50UHJvbWlzZXx8KGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9ZCh0aGlzLHMpLmNhbGwodGhpcykpLGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2UpKSkscy5zZXQodGhpcywoYXN5bmMoKT0+e2NvbnN0IGU9bC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lKHRoaXMuaWRlbnRpdHkpO3RyeXtkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkfHxhd2FpdCBkKHRoaXMsYSkuY2FsbCh0aGlzKTtjb25zdCB0PWF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3dhaXQ6ITF9KTtyZXR1cm4gdC5vbkRpc2Nvbm5lY3Rpb24oKCgpPT57ZCh0aGlzLHIpLmNhbGwodGhpcykuY2xpZW50UHJvbWlzZT1udWxsLGQodGhpcyxyKS5jYWxsKHRoaXMpLmV2ZW50RmlyZWQ9bnVsbH0pKSx0fWNhdGNoKGUpe3Rocm93IGQodGhpcyxyKS5jYWxsKHRoaXMpLmNsaWVudFByb21pc2U9bnVsbCxuZXcgRXJyb3IoXCJUaGUgdGFyZ2V0ZWQgU25hcHNob3RTb3VyY2UgaXMgbm90IGN1cnJlbnRseSBpbml0aWFsaXplZC4gQXdhaXQgdGhpcyBvYmplY3QncyByZWFkeSgpIG1ldGhvZC5cIil9fSkpLGEuc2V0KHRoaXMsKGFzeW5jKCk9Pntjb25zdCBlPWwuZ2V0U25hcHNob3RTb3VyY2VDaGFubmVsTmFtZSh0aGlzLmlkZW50aXR5KTtsZXQgdCxuO2NvbnN0IGk9bmV3IFByb21pc2UoKChlLGkpPT57dD1lLG49aX0pKTtkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkPWk7Y29uc3Qgbz1hc3luYyBpPT57dHJ5e2kuY2hhbm5lbE5hbWU9PT1lJiYodCgpLGF3YWl0IHRoaXMuZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5yZW1vdmVMaXN0ZW5lcihcImNvbm5lY3RlZFwiLG8pKX1jYXRjaChlKXtuKGUpfX07YXdhaXQgdGhpcy5maW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLm9uKFwiY29ubmVjdGVkXCIsbyl9KSksYyh0aGlzLGksdCl9Z2V0IGlkZW50aXR5KCl7cmV0dXJuIGQodGhpcyxpKX1hc3luYyByZWFkeSgpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLXJlYWR5XCIpLmNhdGNoKChlPT57fSkpO3RyeXthd2FpdCBkKHRoaXMsbykuY2FsbCh0aGlzKX1jYXRjaChlKXthd2FpdCBkKHRoaXMscikuY2FsbCh0aGlzKS5ldmVudEZpcmVkfX1hc3luYyBnZXRTbmFwc2hvdCgpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwic25hcHNob3Qtc291cmNlLWdldC1zbmFwc2hvdFwiKS5jYXRjaCgoZT0+e30pKTtjb25zdCBlPWF3YWl0IGQodGhpcyxvKS5jYWxsKHRoaXMpLHQ9YXdhaXQgZS5kaXNwYXRjaChcImdldC1zbmFwc2hvdFwiKTtyZXR1cm4oYXdhaXQgdCkuc25hcHNob3R9YXN5bmMgYXBwbHlTbmFwc2hvdChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzbmFwc2hvdC1zb3VyY2UtYXBwbHktc25hcHNob3RcIikuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IGQodGhpcyxvKS5jYWxsKHRoaXMpKS5kaXNwYXRjaChcImFwcGx5LXNuYXBzaG90XCIse3NuYXBzaG90OmV9KX19dC5TbmFwc2hvdFNvdXJjZT1wLGk9bmV3IFdlYWtNYXAscj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwLHM9bmV3IFdlYWtNYXAsYT1uZXcgV2Vha01hcH0sNzE1MzpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDE3NDYpO3QuZGVmYXVsdD1vLmRlZmF1bHQscihuKDI4NzgpLHQpfSw2MjE1OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRTbmFwc2hvdFNvdXJjZUNoYW5uZWxOYW1lPXZvaWQgMCx0LmdldFNuYXBzaG90U291cmNlQ2hhbm5lbE5hbWU9ZT0+YHNuYXBzaG90LXNvdXJjZS1wcm92aWRlci0ke2UudXVpZH1gfSwzNjQxOihlLHQsbik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBpPW4oOTY1OSkscj1uKDUwMDcpLG89big0OTk3KTtjbGFzcyBzIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlLFwic3lzdGVtXCIpfXNlbmRFeHRlcm5hbFByb2Nlc3NSZXF1ZXN0KGUsdCl7cmV0dXJuIG5ldyBQcm9taXNlKCgobixpKT0+e2NvbnN0IHI9XCJleHRlcm5hbC1wcm9jZXNzLWV4aXRlZFwiO2xldCBzLGEsYyxkO1wiZnVuY3Rpb25cIj09dHlwZW9mIHQubGlzdGVuZXImJihjPWU9Pntjb25zdCBuPWV8fHt9O2E9e3RvcGljOlwiZXhpdGVkXCIsdXVpZDpuLnByb2Nlc3NVdWlkfHxcIlwiLGV4aXRDb2RlOm4uZXhpdENvZGV8fDB9LHM9PT1lLnByb2Nlc3NVdWlkJiYodC5saXN0ZW5lcihhKSxkLnJlbW92ZUxpc3RlbmVyKHIsYykpfSx0aGlzLndpcmUubWUubmFtZXx8KHRoaXMud2lyZS5tZS5uYW1lPXRoaXMud2lyZS5tZS51dWlkKSxkPW5ldyBvLl9XaW5kb3codGhpcy53aXJlLHRoaXMud2lyZS5tZSksZC5vbihyLGMpKSx0aGlzLndpcmUuc2VuZEFjdGlvbihlLHQpLnRoZW4oKCh7cGF5bG9hZDplfSk9PntzPWUuZGF0YS51dWlkLG4oZS5kYXRhKSxhJiZzPT09YS51dWlkJiYodC5saXN0ZW5lcihhKSxkLnJlbW92ZUxpc3RlbmVyKHIsYykpfSkpLmNhdGNoKChlPT57ZCYmZC5yZW1vdmVMaXN0ZW5lcihyLGMpLGkoZSl9KSl9KSl9Z2V0VmVyc2lvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12ZXJzaW9uXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWNsZWFyQ2FjaGUoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiY2xlYXItY2FjaGVcIixlKS50aGVuKCgoKT0+e30pKX1kZWxldGVDYWNoZU9uRXhpdCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImRlbGV0ZS1jYWNoZS1yZXF1ZXN0XCIpLnRoZW4oKCgpPT57fSkpfWV4aXQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJleGl0LWRlc2t0b3BcIikudGhlbigoKCk9Pnt9KSl9YXN5bmMgZmV0Y2hNYW5pZmVzdChlKXtjb25zdHtwYXlsb2FkOntkYXRhOnR9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZldGNoLW1hbmlmZXN0XCIse21hbmlmZXN0VXJsOmV9KTtyZXR1cm4gdH1mbHVzaENvb2tpZVN0b3JlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZmx1c2gtY29va2llLXN0b3JlXCIpLnRoZW4oKCgpPT57fSkpfWdldEFsbFdpbmRvd3MoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtYWxsLXdpbmRvd3NcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0QWxsQXBwbGljYXRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1hcHBsaWNhdGlvbnNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Q29tbWFuZExpbmVBcmd1bWVudHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtY29tbWFuZC1saW5lLWFyZ3VtZW50c1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRDcmFzaFJlcG9ydGVyU3RhdGUoKXtjb25zdHtwYXlsb2FkOntkYXRhOntkaWFnbm9zdGljTW9kZTplLGlzUnVubmluZzp0fX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNyYXNoLXJlcG9ydGVyLXN0YXRlXCIpO3JldHVybiBjb25zb2xlLndhcm4oXCJkaWFnbm9zdGljTW9kZSBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvblwiKSx7ZGlhZ25vc3RpY01vZGU6ZSxkaWFnbm9zdGljc01vZGU6ZSxpc1J1bm5pbmc6dH19YXN5bmMgc3RhcnRDcmFzaFJlcG9ydGVyKGUpe2NvbnN0IHQ9ZSxuPXsuLi50LGRpYWdub3N0aWNNb2RlOnQuZGlhZ25vc3RpY3NNb2RlfHx0LmRpYWdub3N0aWNNb2RlfSx7cGF5bG9hZDp7ZGF0YTp7ZGlhZ25vc3RpY01vZGU6aSxpc1J1bm5pbmc6cn19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0YXJ0LWNyYXNoLXJlcG9ydGVyXCIsbik7cmV0dXJue2RpYWdub3N0aWNNb2RlOmksZGlhZ25vc3RpY3NNb2RlOmksaXNSdW5uaW5nOnJ9fWdldFVuaXF1ZVVzZXJJZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC11bmlxdWUtdXNlci1pZFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRFbnRpdHlJbmZvKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWVudGl0eS1pbmZvXCIse3V1aWQ6ZSxuYW1lOnR9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRFbnZpcm9ubWVudFZhcmlhYmxlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1lbnZpcm9ubWVudC12YXJpYWJsZVwiLHtlbnZpcm9ubWVudFZhcmlhYmxlczplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0Rm9jdXNlZFdpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1mb2N1c2VkLXdpbmRvd1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBpc0FwcENlcnRpZmllZChlKXtjb25zdHtwYXlsb2FkOntkYXRhOntjZXJ0aWZpZWRJbmZvOnR9fX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJpcy1hcHAtY2VydGlmaWVkXCIse21hbmlmZXN0VXJsOmV9KTtyZXR1cm4gdH1nZXRJbnN0YWxsZWRSdW50aW1lcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1pbnN0YWxsZWQtcnVudGltZXNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhLnJ1bnRpbWVzKSl9YXN5bmMgZ2V0SW5zdGFsbGVkQXBwcygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6e2luc3RhbGxlZEFwcHM6ZX19fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1pbnN0YWxsZWQtYXBwc1wiKTtyZXR1cm4gZX1nZXRMb2coZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1sb2dcIixlKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNYWNoaW5lSWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbWFjaGluZS1pZFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRNaW5Mb2dMZXZlbCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1taW4tbG9nLWxldmVsXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldExvZ0xpc3QoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJsaXN0LWxvZ3NcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0TW9uaXRvckluZm8oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbW9uaXRvci1pbmZvXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldE1vdXNlUG9zaXRpb24oKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtbW91c2UtcG9zaXRpb25cIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0UHJvY2Vzc0xpc3QoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiU3lzdGVtLmdldFByb2Nlc3NMaXN0IGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSBjb25zaWRlciB1c2luZyBvdXIgbmV3IHByb2Nlc3MgQVBJczogV2luZG93LmdldFByb2Nlc3NJbmZvLCBWaWV3LmdldFByb2Nlc3NJbmZvLCBBcHBsaWNhdGlvbi5nZXRQcm9jZXNzSW5mbywgU3lzdGVtLmdldEFsbFByb2Nlc3NJbmZvXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicHJvY2Vzcy1zbmFwc2hvdFwiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRBbGxQcm9jZXNzSW5mbygpe2NvbnN0e3BheWxvYWQ6e2RhdGE6ZX19PWF3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1wcm9jZXNzLWluZm9cIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZX1nZXRQcm94eVNldHRpbmdzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXByb3h5LXNldHRpbmdzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFJ1bnRpbWVJbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXJ1bnRpbWUtaW5mb1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRSdm1JbmZvKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXJ2bS1pbmZvXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEhvc3RTcGVjcygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1ob3N0LXNwZWNzXCIpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWxhdW5jaEV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy5zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChcImxhdW5jaC1leHRlcm5hbC1wcm9jZXNzXCIsZSl9bW9uaXRvckV4dGVybmFsUHJvY2VzcyhlKXtyZXR1cm4gdGhpcy5zZW5kRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdChcIm1vbml0b3ItZXh0ZXJuYWwtcHJvY2Vzc1wiLGUpfWxvZyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndyaXRlLXRvLWxvZ1wiLHtsZXZlbDplLG1lc3NhZ2U6dH0pLnRoZW4oKCgpPT57fSkpfW9wZW5VcmxXaXRoQnJvd3NlcihlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJvcGVuLXVybC13aXRoLWJyb3dzZXJcIix7dXJsOmV9KS50aGVuKCgoKT0+e30pKX1yZWxlYXNlRXh0ZXJuYWxQcm9jZXNzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlbGVhc2UtZXh0ZXJuYWwtcHJvY2Vzc1wiLHt1dWlkOmV9KS50aGVuKCgoKT0+e30pKX1zaG93RGV2ZWxvcGVyVG9vbHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2hvdy1kZXZlbG9wZXItdG9vbHNcIixlKS50aGVuKCgoKT0+e30pKX10ZXJtaW5hdGVFeHRlcm5hbFByb2Nlc3MoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidGVybWluYXRlLWV4dGVybmFsLXByb2Nlc3NcIixlKS50aGVuKCgoKT0+e30pKX11cGRhdGVQcm94eVNldHRpbmdzKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInVwZGF0ZS1wcm94eVwiLGUpLnRoZW4oKCgpPT57fSkpfWRvd25sb2FkQXNzZXQoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKChuLGkpPT57aWYoXCJOb2RlRW52aXJvbm1lbnRcIj09PXRoaXMud2lyZS5lbnZpcm9ubWVudC5jb25zdHJ1Y3Rvci5uYW1lKXJldHVybiB2b2lkIGkobmV3IHIuTm90U3VwcG9ydGVkRXJyb3IoXCJkb3dubG9hZEFzc2V0IG9ubHkgc3VwcG9ydGVkIGluIGFuIE9wZW5GaW4gUmVuZGVyIHByb2Nlc3NcIikpO2NvbnN0IG89dGhpcy53aXJlLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKS50b1N0cmluZygpLHM9YGFzc2V0LWRvd25sb2FkLXByb2dyZXNzLSR7b31gLGE9YGFzc2V0LWRvd25sb2FkLWVycm9yLSR7b31gLGM9YGFzc2V0LWRvd25sb2FkLWNvbXBsZXRlLSR7b31gLGQ9ZT0+e2NvbnN0IG49e2Rvd25sb2FkZWRCeXRlczplLmRvd25sb2FkZWRCeXRlcyx0b3RhbEJ5dGVzOmUudG90YWxCeXRlc307dChuKX0saD0oKT0+e3RoaXMucmVtb3ZlTGlzdGVuZXIocyxkKX07dGhpcy5vbihzLGQpLHRoaXMub25jZShhLCgoZSx0KT0+e2NvbnN0IG49dHx8ZTtoKCksaShuZXcgci5SdW50aW1lRXJyb3IobikpfSkpLHRoaXMub25jZShjLCgoKT0+e2goKSxuKCl9KSk7Y29uc3QgbD1PYmplY3QuYXNzaWduKGUse2Rvd25sb2FkSWQ6b30pO3RoaXMud2lyZS5zZW5kQWN0aW9uKFwiZG93bmxvYWQtYXNzZXRcIixsKS5jYXRjaCgoZT0+e2goKSxpKGUpfSkpfSkpfWRvd25sb2FkUnVudGltZShlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4saSk9PntpZihcIk5vZGVFbnZpcm9ubWVudFwiPT09dGhpcy53aXJlLmVudmlyb25tZW50LmNvbnN0cnVjdG9yLm5hbWUpcmV0dXJuIHZvaWQgaShuZXcgci5Ob3RTdXBwb3J0ZWRFcnJvcihcImRvd25sb2FkUnVudGltZSBvbmx5IHN1cHBvcnRlZCBpbiBhbiBPcGVuRmluIFJlbmRlciBwcm9jZXNzXCIpKTtjb25zdCBvPXRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCkudG9TdHJpbmcoKSxzPWBydW50aW1lLWRvd25sb2FkLXByb2dyZXNzLSR7b31gLGE9YHJ1bnRpbWUtZG93bmxvYWQtZXJyb3ItJHtvfWAsYz1gcnVudGltZS1kb3dubG9hZC1jb21wbGV0ZS0ke299YCxkPWU9Pntjb25zdCBuPXtkb3dubG9hZGVkQnl0ZXM6ZS5kb3dubG9hZGVkQnl0ZXMsdG90YWxCeXRlczplLnRvdGFsQnl0ZXN9O3Qobil9LGg9KCk9Pnt0aGlzLnJlbW92ZUxpc3RlbmVyKHMsZCl9O3RoaXMub24ocyxkKSx0aGlzLm9uY2UoYSwoKGUsdCk9Pntjb25zdCBuPXR8fGU7aCgpLGkobmV3IHIuUnVudGltZUVycm9yKG4pKX0pKSx0aGlzLm9uY2UoYywoKCk9PntoKCksbigpfSkpO2NvbnN0IGw9T2JqZWN0LmFzc2lnbihlLHtkb3dubG9hZElkOm99KTt0aGlzLndpcmUuc2VuZEFjdGlvbihcImRvd25sb2FkLXJ1bnRpbWVcIixsKS5jYXRjaCgoZT0+e2goKSxpKGUpfSkpfSkpfWRvd25sb2FkUHJlbG9hZFNjcmlwdHMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZG93bmxvYWQtcHJlbG9hZC1zY3JpcHRzXCIse3NjcmlwdHM6ZX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldEFsbEV4dGVybmFsQXBwbGljYXRpb25zKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1leHRlcm5hbC1hcHBsaWNhdGlvbnNcIikudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9Z2V0QXBwQXNzZXRJbmZvKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1hcHAtYXNzZXQtaW5mb1wiLGUpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldENvb2tpZXMoZSl7Y29uc3QgdD10aGlzLndpcmUuZW52aXJvbm1lbnQuZ2V0VXJsKCksbj1PYmplY3QuYXNzaWduKGUse3VybDp0fSk7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWNvb2tpZXNcIixuKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zZXRNaW5Mb2dMZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtbWluLWxvZy1sZXZlbFwiLHtsZXZlbDplfSkudGhlbigoKCk9Pnt9KSl9cmVzb2x2ZVV1aWQoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVzb2x2ZS11dWlkXCIse2VudGl0eUtleTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9ZXhlY3V0ZU9uUmVtb3RlKGUsdCl7cmV0dXJuIHQucmVxdWVzdGluZ0lkZW50aXR5PWUsdGhpcy53aXJlLmZlcnJ5QWN0aW9uKHQpfXJlYWRSZWdpc3RyeVZhbHVlKGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWFkLXJlZ2lzdHJ5LXZhbHVlXCIse3Jvb3RLZXk6ZSxzdWJrZXk6dCx2YWx1ZTpufSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9cmVnaXN0ZXJFeHRlcm5hbENvbm5lY3Rpb24oZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwicmVnaXN0ZXItZXh0ZXJuYWwtY29ubmVjdGlvblwiLHt1dWlkOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBnZXRTZXJ2aWNlQ29uZmlndXJhdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lKXRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBhbiBvYmplY3Qgd2l0aCBhIGBuYW1lYCBwcm9wZXJ0eSBoYXZpbmcgYSBzdHJpbmcgdmFsdWVcIik7Y29uc3R7bmFtZTp0fT1lO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zZXJ2aWNlLWNvbmZpZ3VyYXRpb25cIix7bmFtZTp0fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgZ2V0U3lzdGVtQXBwQ29uZmlnKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIk11c3QgcHJvdmlkZSBhIHN0cmluZyB2YWx1ZSBmb3IgbmFtZSBvZiBzeXN0ZW0gYXBwXCIpO3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1zeXN0ZW0tYXBwLWNvbmZpZ3VyYXRpb25cIix7bmFtZTplfSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9cnVuUnZtSGVhbHRoQ2hlY2soKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJydW4tcnZtLWhlYWx0aC1jaGVja1wiKS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1hc3luYyBsYXVuY2hNYW5pZmVzdChlLHQpe3JldHVybihhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImxhdW5jaC1tYW5pZmVzdFwiLHttYW5pZmVzdFVybDplLG9wdHM6dH0pKS5wYXlsb2FkLmRhdGEubWFuaWZlc3R9YXN5bmMgcXVlcnlQZXJtaXNzaW9uRm9yQ3VycmVudENvbnRleHQoZSl7Y29uc3QgdD17dXVpZDp0aGlzLndpcmUubWUudXVpZCxuYW1lOnRoaXMud2lyZS5tZS5uYW1lfTtyZXR1cm4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJxdWVyeS1wZXJtaXNzaW9uLWZvci1jdXJyZW50LWNvbnRleHRcIix7YXBpTmFtZTplLGlkZW50aXR5OnR9KSkucGF5bG9hZC5kYXRhfWFzeW5jIGVuYWJsZU5hdGl2ZVdpbmRvd0ludGVncmF0aW9uUHJvdmlkZXIoZSl7Y29uc3R7cGF5bG9hZDp0fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS1uYXRpdmUtd2luZG93LWludGVncmF0aW9uLXByb3ZpZGVyXCIse3Blcm1pc3Npb25zOmV9KTtyZXR1cm4gdC5kYXRhfWFzeW5jIHJlZ2lzdGVyVXNhZ2Uoe2RhdGE6ZSx0eXBlOnR9KXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlZ2lzdGVyLXVzYWdlXCIse2RhdGE6ZSx0eXBlOnR9KX19dC5kZWZhdWx0PXN9LDI0MDooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oNDE2OSk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyBjcmVhdGUoZSl7Y29uc3R7dXVpZDp0fT10aGlzLndpcmUubWU7aWYoIWUubmFtZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBhIG5hbWUgcHJvcGVydHkgYXMgYSBzdHJpbmcgaW4gb3JkZXIgdG8gY3JlYXRlIGEgVmlldy5cIik7cmV0dXJuIHRoaXMud2lyZS5lbnZpcm9ubWVudC5jaGlsZFZpZXdzP2F3YWl0IHRoaXMud2lyZS5lbnZpcm9ubWVudC5jcmVhdGVDaGlsZENvbnRlbnQoe2VudGl0eVR5cGU6XCJ2aWV3XCIsb3B0aW9uczp7Li4uZSx1dWlkOnR9fSk6YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjcmVhdGUtdmlld1wiLHsuLi5lLHV1aWQ6dH0pLHRoaXMud3JhcFN5bmMoe3V1aWQ6dCxuYW1lOmUubmFtZX0pfWFzeW5jIHdyYXAoZSl7dGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ2aWV3LXdyYXBcIik7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLlZpZXcodGhpcy53aXJlLGUpfXdyYXBTeW5jKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy13cmFwLXN5bmNcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLlZpZXcodGhpcy53aXJlLGUpfWdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcInZpZXctZ2V0LWN1cnJlbnRcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1ZpZXcpdGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgaW4gYSBWaWV3IGNvbnRleHRcIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy53aXJlLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1nZXQtY3VycmVudC1zeW5jXCIpLmNhdGNoKChlPT57fSkpLCF0aGlzLndpcmUubWUuaXNWaWV3KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgVmlldyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwU3luYyh7dXVpZDplLG5hbWU6dH0pfX10LmRlZmF1bHQ9c30sMzE2MzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5WaWV3PXZvaWQgMDtjb25zdCBpPW4oNDYzNikscj1uKDQ5OTcpO2NsYXNzIG8gZXh0ZW5kcyBpLldlYkNvbnRlbnRze2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx0LFwidmlld1wiKSx0aGlzLmlkZW50aXR5PXQsdGhpcy5hdHRhY2g9YXN5bmMgZT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYXR0YWNoLXZpZXdcIix7dGFyZ2V0OmUsLi4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmRlc3Ryb3k9YXN5bmMoKT0+e2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGVzdHJveS12aWV3XCIsey4uLnRoaXMuaWRlbnRpdHl9KX0sdGhpcy5zaG93PWFzeW5jKCk9Pnthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctdmlld1wiLHsuLi50aGlzLmlkZW50aXR5fSl9LHRoaXMuaGlkZT1hc3luYygpPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJoaWRlLXZpZXdcIix7Li4udGhpcy5pZGVudGl0eX0pfSx0aGlzLnNldEJvdW5kcz1hc3luYyBlPT57YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtdmlldy1ib3VuZHNcIix7Ym91bmRzOmUsLi4udGhpcy5pZGVudGl0eX0pfSx0aGlzLmdldEJvdW5kcz1hc3luYygpPT4oYXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmlldy1ib3VuZHNcIix7Li4udGhpcy5pZGVudGl0eX0pKS5wYXlsb2FkLmRhdGEsdGhpcy5nZXRJbmZvPWFzeW5jKCk9Pihhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC12aWV3LWluZm9cIix7Li4udGhpcy5pZGVudGl0eX0pKS5wYXlsb2FkLmRhdGEsdGhpcy5nZXRQYXJlbnRMYXlvdXQ9YXN5bmMoKT0+KHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidmlldy1nZXQtcGFyZW50LWxheW91dFwiLHsuLi50aGlzLmlkZW50aXR5fSkuY2F0Y2goKGU9Pnt9KSksKGF3YWl0IHRoaXMuZ2V0Q3VycmVudFdpbmRvdygpKS5nZXRMYXlvdXQoKSksdGhpcy5nZXRPcHRpb25zPWFzeW5jKCk9PnRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXZpZXctb3B0aW9uc1wiLHsuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSksdGhpcy51cGRhdGVPcHRpb25zPWFzeW5jIGU9PnRoaXMud2lyZS5zZW5kQWN0aW9uKFwidXBkYXRlLXZpZXctb3B0aW9uc1wiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpLHRoaXMuZ2V0Q3VycmVudFdpbmRvdz1hc3luYygpPT57Y29uc3R7cGF5bG9hZDp7ZGF0YTplfX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtdmlldy13aW5kb3dcIix7Li4udGhpcy5pZGVudGl0eX0pO3JldHVybiBuZXcgci5fV2luZG93KHRoaXMud2lyZSxlKX19YXN5bmMgZm9jdXMoe2VtaXRTeW50aEZvY3VzZWQ6ZX09e2VtaXRTeW50aEZvY3VzZWQ6ITB9KXtjb25zdCB0PWF3YWl0IHRoaXMuZ2V0Q3VycmVudFdpbmRvdygpO2F3YWl0IHQuZm9jdXNlZFdlYlZpZXdXYXNDaGFuZ2VkKCksYXdhaXQgc3VwZXIuZm9jdXMoe2VtaXRTeW50aEZvY3VzZWQ6ZX0pfX10LlZpZXc9b30sNDE2OTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSl9OmZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPW4pLGVbaV09dFtuXX0pLHI9dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpXCJkZWZhdWx0XCI9PT1ufHx0Lmhhc093blByb3BlcnR5KG4pfHxpKHQsZSxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3Qgbz1uKDI0MCk7dC5kZWZhdWx0PW8uZGVmYXVsdCxyKG4oMzE2MyksdCl9LDQ2MzY6KGUsdCxuKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuV2ViQ29udGVudHM9dm9pZCAwO2NvbnN0IGk9big5NjU5KTtjbGFzcyByIGV4dGVuZHMgaS5FbWl0dGVyQmFzZXtjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoZSxuLHQudXVpZCx0Lm5hbWUpLHRoaXMuZW50aXR5VHlwZT1ufWNhcHR1cmVQYWdlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNhcHR1cmUtcGFnZVwiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWV4ZWN1dGVKYXZhU2NyaXB0KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImV4ZWN1dGUtamF2YXNjcmlwdC1pbi13aW5kb3dcIix7Li4udGhpcy5pZGVudGl0eSxjb2RlOmV9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRab29tTGV2ZWwoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtem9vbS1sZXZlbFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfXNldFpvb21MZXZlbChlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtem9vbS1sZXZlbFwiLHsuLi50aGlzLmlkZW50aXR5LGxldmVsOmV9KS50aGVuKCgoKT0+e30pKX1uYXZpZ2F0ZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJuYXZpZ2F0ZS13aW5kb3dcIix7Li4udGhpcy5pZGVudGl0eSx1cmw6ZX0pLnRoZW4oKCgpPT57fSkpfW5hdmlnYXRlQmFjaygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm5hdmlnYXRlLXdpbmRvdy1iYWNrXCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1hc3luYyBuYXZpZ2F0ZUZvcndhcmQoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm5hdmlnYXRlLXdpbmRvdy1mb3J3YXJkXCIsey4uLnRoaXMuaWRlbnRpdHl9KX1zdG9wTmF2aWdhdGlvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0b3Atd2luZG93LW5hdmlnYXRpb25cIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlbG9hZChlPSExKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZWxvYWQtd2luZG93XCIse2lnbm9yZUNhY2hlOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXByaW50KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInByaW50XCIsey4uLnRoaXMuaWRlbnRpdHksb3B0aW9uczplfSkudGhlbigoKCk9Pnt9KSl9ZmluZEluUGFnZShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZpbmQtaW4tcGFnZVwiLHsuLi50aGlzLmlkZW50aXR5LHNlYXJjaFRlcm06ZSxvcHRpb25zOnR9KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1zdG9wRmluZEluUGFnZShlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzdG9wLWZpbmQtaW4tcGFnZVwiLHsuLi50aGlzLmlkZW50aXR5LGFjdGlvbjplfSkudGhlbigoKCk9Pnt9KSl9Z2V0UHJpbnRlcnMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtcHJpbnRlcnNcIix7Li4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGZvY3VzKHtlbWl0U3ludGhGb2N1c2VkOmV9PXtlbWl0U3ludGhGb2N1c2VkOiEwfSl7YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJmb2N1cy13aW5kb3dcIix7ZW1pdFN5bnRoRm9jdXNlZDplLC4uLnRoaXMuaWRlbnRpdHl9KX1hc3luYyBzaG93RGV2ZWxvcGVyVG9vbHMoKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctZGV2ZWxvcGVyLXRvb2xzXCIsdGhpcy5pZGVudGl0eSl9YXN5bmMgZ2V0UHJvY2Vzc0luZm8oKXtjb25zdHtwYXlsb2FkOntkYXRhOmV9fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1wcm9jZXNzLWluZm9cIix0aGlzLmlkZW50aXR5KTtyZXR1cm4gZX1hc3luYyBnZXRTaGFyZWRXb3JrZXJzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXNoYXJlZC13b3JrZXJzXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9YXN5bmMgaW5zcGVjdFNoYXJlZFdvcmtlcigpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW5zcGVjdC1zaGFyZWQtd29ya2VyXCIsey4uLnRoaXMuaWRlbnRpdHl9KX1hc3luYyBpbnNwZWN0U2hhcmVkV29ya2VyQnlJZChlKXthd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImluc3BlY3Qtc2hhcmVkLXdvcmtlci1ieS1pZFwiLHsuLi50aGlzLmlkZW50aXR5LHdvcmtlcklkOmV9KX1hc3luYyBpbnNwZWN0U2VydmljZVdvcmtlcigpe2F3YWl0IHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiaW5zcGVjdC1zZXJ2aWNlLXdvcmtlclwiLHsuLi50aGlzLmlkZW50aXR5fSl9fXQuV2ViQ29udGVudHM9cn0sMjE2MzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7Y29uc3QgaT1uKDk2NTkpLHI9big0OTk5KSxvPW4oNTA0Nyk7Y2xhc3MgcyBleHRlbmRzIGkuQmFzZXthc3luYyB3cmFwKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LXdyYXBcIikuY2F0Y2goKGU9Pnt9KSk7Y29uc3QgdD1yLnZhbGlkYXRlSWRlbnRpdHkoZSk7aWYodCl0aHJvdyBuZXcgRXJyb3IodCk7cmV0dXJuIG5ldyBvLl9XaW5kb3codGhpcy53aXJlLGUpfXdyYXBTeW5jKGUpe3RoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LXdyYXAtc3luY1wiKS5jYXRjaCgoZT0+e30pKTtjb25zdCB0PXIudmFsaWRhdGVJZGVudGl0eShlKTtpZih0KXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gbmV3IG8uX1dpbmRvdyh0aGlzLndpcmUsZSl9Y3JlYXRlKGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNyZWF0ZS13aW5kb3dcIikuY2F0Y2goKGU9Pnt9KSksbmV3IG8uX1dpbmRvdyh0aGlzLndpcmUse3V1aWQ6dGhpcy5tZS51dWlkLG5hbWU6ZS5uYW1lfSkuY3JlYXRlV2luZG93KGUpfWdldEN1cnJlbnQoKXtpZih0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC1jdXJyZW50LXdpbmRvd1wiKS5jYXRjaCgoZT0+e30pKSwhdGhpcy53aXJlLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IGluIGEgV2luZG93IGNvbnRleHRcIik7Y29uc3R7dXVpZDplLG5hbWU6dH09dGhpcy53aXJlLm1lO3JldHVybiB0aGlzLndyYXAoe3V1aWQ6ZSxuYW1lOnR9KX1nZXRDdXJyZW50U3luYygpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWN1cnJlbnQtd2luZG93LXN5bmNcIikuY2F0Y2goKGU9Pnt9KSksIXRoaXMud2lyZS5tZS5pc1dpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBhIFdpbmRvdyBjb250ZXh0XCIpO2NvbnN0e3V1aWQ6ZSxuYW1lOnR9PXRoaXMud2lyZS5tZTtyZXR1cm4gdGhpcy53cmFwU3luYyh7dXVpZDplLG5hbWU6dH0pfX10LmRlZmF1bHQ9c30sNTA0NzooZSx0LG4pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5fV2luZG93PXZvaWQgMDtjb25zdCBpPW4oNzI2NCkscj1uKDQ2MzYpLG89big0MTY5KTtjbGFzcyBzIGV4dGVuZHMgci5XZWJDb250ZW50c3tjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCxcIndpbmRvd1wiKSx0aGlzLmlkZW50aXR5PXR9Y3JlYXRlV2luZG93KGUpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1jcmVhdGUtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksbmV3IFByb21pc2UoKCh0LG4pPT57Y29uc3QgaT1cImZpcmUtY29uc3RydWN0b3ItY2FsbGJhY2tcIixyPW5ldyBQcm9taXNlKChlPT57dGhpcy5vbihpLChmdW5jdGlvbiB0KG4pe2xldCByO2NvbnN0e3N1Y2Nlc3M6b309bixzPW4uZGF0YSx7bWVzc2FnZTphfT1zO3I9bz97aHR0cFJlc3BvbnNlQ29kZTpzLmh0dHBSZXNwb25zZUNvZGUsYXBpSW5qZWN0ZWQ6cy5hcGlJbmplY3RlZH06e21lc3NhZ2U6cy5tZXNzYWdlLG5ldHdvcmtFcnJvckNvZGU6cy5uZXR3b3JrRXJyb3JDb2RlLHN0YWNrOnMuc3RhY2t9LHRoaXMucmVtb3ZlTGlzdGVuZXIoaSx0KSxlKHttZXNzYWdlOmEsY2JQYXlsb2FkOnIsc3VjY2VzczpvfSl9KSl9KSk7dm9pZCAwPT09ZS53YWl0Rm9yUGFnZUxvYWQmJihlLndhaXRGb3JQYWdlTG9hZD0hMSksdm9pZCAwPT09ZS5hdXRvU2hvdyYmKGUuYXV0b1Nob3c9ITApO2NvbnN0IG89dGhpcy53aXJlLmVudmlyb25tZW50LmNyZWF0ZUNoaWxkQ29udGVudCh7ZW50aXR5VHlwZTpcIndpbmRvd1wiLG9wdGlvbnM6ZX0pO1Byb21pc2UuYWxsKFtyLG9dKS50aGVuKChlPT57Y29uc3QgaT1lWzBdO2kuc3VjY2Vzcz90KHRoaXMpOm4oaSk7dHJ5e3RoaXMuZ2V0V2ViV2luZG93KCkuZmluLl9faW50ZXJuYWxfLm9wZW5lclN1Y2Nlc3NDQkNhbGxlZCgpfWNhdGNoKGUpe319KSkuY2F0Y2gobil9KSl9Z2V0QWxsRnJhbWVzKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LWFsbC1mcmFtZXNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRCb3VuZHMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LWJvdW5kc1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWNlbnRlcigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNlbnRlci13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1ibHVyKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYmx1ci13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1icmluZ1RvRnJvbnQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJicmluZy13aW5kb3ctdG8tZnJvbnRcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1hbmltYXRlKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiYW5pbWF0ZS13aW5kb3dcIix7dHJhbnNpdGlvbnM6ZSxvcHRpb25zOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWhpZGUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJoaWRlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWNsb3NlKGU9ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImNsb3NlLXdpbmRvd1wiLHtmb3JjZTplLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e09iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG51bGwpfSkpfWZvY3VzZWRXZWJWaWV3V2FzQ2hhbmdlZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZvY3VzZWQtd2Vidmlldy1jaGFuZ2VkXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Z2V0TmF0aXZlSWQoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LW5hdGl2ZS1pZFwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldEN1cnJlbnRWaWV3cygpe2NvbnN0e3BheWxvYWQ6ZX09YXdhaXQgdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJ3aW5kb3ctZ2V0LXZpZXdzXCIsdGhpcy5pZGVudGl0eSk7cmV0dXJuIGUuZGF0YS5tYXAoKGU9Pm5ldyBvLlZpZXcodGhpcy53aXJlLGUpKSl9ZGlzYWJsZUZyYW1lKCl7cmV0dXJuIGNvbnNvbGUud2FybihcIkZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQ7IHVzZSBkaXNhYmxlVXNlck1vdmVtZW50IGluc3RlYWQuXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGlzYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1kaXNhYmxlVXNlck1vdmVtZW50KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZGlzYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1lbmFibGVGcmFtZSgpe3JldHVybiBjb25zb2xlLndhcm4oXCJGdW5jdGlvbiBpcyBkZXByZWNhdGVkOyB1c2UgZW5hYmxlVXNlck1vdmVtZW50IGluc3RlYWQuXCIpLHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZW5hYmxlLXdpbmRvdy1mcmFtZVwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfWVuYWJsZVVzZXJNb3ZlbWVudCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImVuYWJsZS13aW5kb3ctZnJhbWVcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1mbGFzaCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImZsYXNoLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXN0b3BGbGFzaGluZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInN0b3AtZmxhc2gtd2luZG93XCIsdGhpcy5pZGVudGl0eSkudGhlbigoKCk9Pnt9KSl9Z2V0SW5mbygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctaW5mb1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWFzeW5jIGdldExheW91dCgpe2lmKHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC1sYXlvdXRcIix0aGlzLmlkZW50aXR5KS5jYXRjaCgoZT0+e30pKSwhKGF3YWl0IHRoaXMuZ2V0T3B0aW9ucygpKS5sYXlvdXQpdGhyb3cgbmV3IEVycm9yKFwiV2luZG93IGRvZXMgbm90IGhhdmUgYSBMYXlvdXRcIik7cmV0dXJuIHRoaXMuZmluLlBsYXRmb3JtLkxheW91dC53cmFwKHRoaXMuaWRlbnRpdHkpfWdldE9wdGlvbnMoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJnZXQtd2luZG93LW9wdGlvbnNcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoe3BheWxvYWQ6ZX0pPT5lLmRhdGEpKX1nZXRQYXJlbnRBcHBsaWNhdGlvbigpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtcGFyZW50LWFwcGxpY2F0aW9uXCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyBpLkFwcGxpY2F0aW9uKHRoaXMud2lyZSx0aGlzLmlkZW50aXR5KSl9Z2V0UGFyZW50V2luZG93KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWdldC1wYXJlbnQtd2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksUHJvbWlzZS5yZXNvbHZlKG5ldyBpLkFwcGxpY2F0aW9uKHRoaXMud2lyZSx0aGlzLmlkZW50aXR5KSkudGhlbigoZT0+ZS5nZXRXaW5kb3coKSkpfWFzeW5jIGdldFNuYXBzaG90KGUpe2NvbnN0IHQ9e2FyZWE6ZSwuLi50aGlzLmlkZW50aXR5fTtyZXR1cm4gY29uc29sZS53YXJuKFwiV2luZG93LmdldFNuYXBzaG90IGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgV2luZG93LmNhcHR1cmVQYWdlXCIpLChhd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcImdldC13aW5kb3ctc25hcHNob3RcIix0KSkucGF5bG9hZC5kYXRhfWdldFN0YXRlKCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwiZ2V0LXdpbmRvdy1zdGF0ZVwiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCh7cGF5bG9hZDplfSk9PmUuZGF0YSkpfWdldFdlYldpbmRvdygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIndpbmRvdy1nZXQtd2ViLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLmNhdGNoKChlPT57fSkpLHRoaXMud2lyZS5lbnZpcm9ubWVudC5nZXRXZWJXaW5kb3codGhpcy5pZGVudGl0eSl9aXNNYWluV2luZG93KCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWlzLW1haW4td2luZG93XCIsdGhpcy5pZGVudGl0eSkuY2F0Y2goKGU9Pnt9KSksdGhpcy5tZS51dWlkPT09dGhpcy5tZS5uYW1lfWlzU2hvd2luZygpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcImlzLXdpbmRvdy1zaG93aW5nXCIsdGhpcy5pZGVudGl0eSkudGhlbigoKHtwYXlsb2FkOmV9KT0+ZS5kYXRhKSl9bWF4aW1pemUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJtYXhpbWl6ZS13aW5kb3dcIix0aGlzLmlkZW50aXR5KS50aGVuKCgoKT0+e30pKX1taW5pbWl6ZSgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1pbmltaXplLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfW1vdmVCeShlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1vdmUtd2luZG93LWJ5XCIse2RlbHRhTGVmdDplLGRlbHRhVG9wOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfW1vdmVUbyhlLHQpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcIm1vdmUtd2luZG93XCIse2xlZnQ6ZSx0b3A6dCwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9cmVzaXplQnkoZSx0LG4pe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInJlc2l6ZS13aW5kb3ctYnlcIix7ZGVsdGFXaWR0aDpNYXRoLmZsb29yKGUpLGRlbHRhSGVpZ2h0Ok1hdGguZmxvb3IodCksYW5jaG9yOm4sLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc2l6ZVRvKGUsdCxuKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXNpemUtd2luZG93XCIse3dpZHRoOk1hdGguZmxvb3IoZSksaGVpZ2h0Ok1hdGguZmxvb3IodCksYW5jaG9yOm4sLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXJlc3RvcmUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJyZXN0b3JlLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXNldEFzRm9yZWdyb3VuZCgpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNldC1mb3JlZ3JvdW5kLXdpbmRvd1wiLHRoaXMuaWRlbnRpdHkpLnRoZW4oKCgpPT57fSkpfXNldEJvdW5kcyhlKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJzZXQtd2luZG93LWJvdW5kc1wiLHsuLi5lLC4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX1zaG93KGU9ITEpe3JldHVybiB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctd2luZG93XCIse2ZvcmNlOmUsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXNob3dBdChlLHQsbj0hMSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwic2hvdy1hdC13aW5kb3dcIix7Zm9yY2U6bixsZWZ0Ok1hdGguZmxvb3IoZSksdG9wOk1hdGguZmxvb3IodCksLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfXVwZGF0ZU9wdGlvbnMoZSl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwidXBkYXRlLXdpbmRvdy1vcHRpb25zXCIse29wdGlvbnM6ZSwuLi50aGlzLmlkZW50aXR5fSkudGhlbigoKCk9Pnt9KSl9YXV0aGVudGljYXRlKGUsdCl7cmV0dXJuIHRoaXMud2lyZS5zZW5kQWN0aW9uKFwid2luZG93LWF1dGhlbnRpY2F0ZVwiLHt1c2VyTmFtZTplLHBhc3N3b3JkOnQsLi4udGhpcy5pZGVudGl0eX0pLnRoZW4oKCgpPT57fSkpfWFzeW5jIHNob3dQb3B1cE1lbnUoZSl7Y29uc3R7cGF5bG9hZDp0fT1hd2FpdCB0aGlzLndpcmUuc2VuZEFjdGlvbihcInNob3ctcG9wdXAtbWVudVwiLHtvcHRpb25zOmUsLi4udGhpcy5pZGVudGl0eX0pO3JldHVybiB0LmRhdGF9YXN5bmMgY2xvc2VQb3B1cE1lbnUoKXtyZXR1cm4gdGhpcy53aXJlLnNlbmRBY3Rpb24oXCJjbG9zZS1wb3B1cC1tZW51XCIsey4uLnRoaXMuaWRlbnRpdHl9KS50aGVuKCgoKT0+e30pKX19dC5fV2luZG93PXN9LDQ5OTc6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pfTpmdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1uKSxlW2ldPXRbbl19KSxyPXRoaXMmJnRoaXMuX19leHBvcnRTdGFyfHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiBlKVwiZGVmYXVsdFwiPT09bnx8dC5oYXNPd25Qcm9wZXJ0eShuKXx8aSh0LGUsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2NvbnN0IG89bigyMTYzKTt0LmRlZmF1bHQ9by5kZWZhdWx0LHIobig1MDQ3KSx0KX0sMTY4MTooZSx0LG4pPT57dmFyIGk7dC5IPXZvaWQgMDtjb25zdCByPW4oNjQ2NSksbz1uKDY1NDUpLHM9big5Mjk4KTtjbGFzcyBhIGV4dGVuZHMgci5FdmVudEVtaXR0ZXJ7Y29ubmVjdChlKXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIpfWNvbm5lY3RTeW5jKCl7dGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBub3QgcnVubmluZyBpbiBPcGVuRmluLlwiKX1zZW5kKGUpe3Rocm93IG5ldyBFcnJvcihcIllvdSBhcmUgbm90IHJ1bm5pbmcgaW4gT3BlbkZpbi5cIil9c2h1dGRvd24oKXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG5vdCBydW5uaW5nIGluIE9wZW5GaW4uXCIpfWNvbnN0cnVjdG9yKCl7c3VwZXIoKX19Y2xhc3MgY3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2hpbGRWaWV3cz0hMH1nZXREZWZhdWx0Q2hhbm5lbE9wdGlvbnMoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRSdGNQZWVyKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0TWFuYWdlckNvbnN0cnVjdG9yKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0UHJvdmlkZXJJbml0aWFsaXplcigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfXdyaXRlVG9rZW4oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1yZXRyaWV2ZVBvcnQoZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Z2V0TmV4dE1lc3NhZ2VJZCgpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldFJhbmRvbUlkKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9Y3JlYXRlQ2hpbGRDb250ZW50KGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfWdldFdlYldpbmRvdyhlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRDdXJyZW50RW50aXR5SWRlbnRpdHkoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRDdXJyZW50RW50aXR5VHlwZSgpe3JldHVyblwidW5rbm93blwifXJhaXNlRXZlbnQoZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX1nZXRVcmwoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX13aGVuUmVhZHkoKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX19dC5IPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihudWxsPT09KGk9d2luZG93KXx8dm9pZCAwPT09aT92b2lkIDA6aS5maW4pfHwoKCk9Pntjb25zdCBlPW5ldyBjLHQ9bmV3IHMuZGVmYXVsdChhLGUse3V1aWQ6XCJcIixuYW1lOlwiXCJ9KTtyZXR1cm4gbmV3IG8uZGVmYXVsdCh0KX0pKCl9LDgwNjg6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldEZpbj10LnJlZ2lzdGVyRmluPXZvaWQgMDtjb25zdCBuPW5ldyBXZWFrTWFwO3QucmVnaXN0ZXJGaW49ZnVuY3Rpb24oZSx0KXtuLnNldChlLHQpfSx0LmdldEZpbj1mdW5jdGlvbihlKXtjb25zdCB0PW4uZ2V0KGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2NhdGUgZmluIGFwaSBmb3IgZ2l2ZW4gdHJhbnNwb3J0XCIpO3JldHVybiB0fX0sNTAwNzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUnVudGltZUVycm9yPXQuTm90U3VwcG9ydGVkRXJyb3I9dC5Ob3RJbXBsZW1lbnRlZEVycm9yPXQuTm9BY2tFcnJvcj10LkR1cGxpY2F0ZUNvcnJlbGF0aW9uRXJyb3I9dC5VbmV4cGVjdGVkQWN0aW9uRXJyb3I9dC5EaXNjb25uZWN0ZWRFcnJvcj12b2lkIDA7Y2xhc3MgbiBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGBFeHBlY3RlZCB3ZWJzb2NrZXQgc3RhdGUgT1BFTiBidXQgZm91bmQgJHtlfWApLHRoaXMucmVhZHlTdGF0ZT1lfX10LkRpc2Nvbm5lY3RlZEVycm9yPW47Y2xhc3MgaSBleHRlbmRzIEVycm9ye310LlVuZXhwZWN0ZWRBY3Rpb25FcnJvcj1pO2NsYXNzIHIgZXh0ZW5kcyBFcnJvcnt9dC5EdXBsaWNhdGVDb3JyZWxhdGlvbkVycm9yPXI7Y2xhc3MgbyBleHRlbmRzIEVycm9ye310Lk5vQWNrRXJyb3I9bztjbGFzcyBzIGV4dGVuZHMgRXJyb3J7fXQuTm90SW1wbGVtZW50ZWRFcnJvcj1zO2NsYXNzIGEgZXh0ZW5kcyBFcnJvcnt9dC5Ob3RTdXBwb3J0ZWRFcnJvcj1hO2NsYXNzIGMgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXtjb25zdCB0PWUucGF5bG9hZHx8ZSx7cmVhc29uOm4sZXJyb3I6aX09dDtzdXBlcihuKSx0aGlzLm5hbWU9XCJSdW50aW1lRXJyb3JcIiwobnVsbD09aT92b2lkIDA6aS5zdGFjaykmJih0aGlzLnN0YWNrPWkuc3RhY2spfX10LlJ1bnRpbWVFcnJvcj1jfSw5Mjk4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldHx8ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtyZXR1cm4gdC5zZXQoZSxuKSxufSxvPXRoaXMmJnRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldHx8ZnVuY3Rpb24oZSx0KXtpZighdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7cmV0dXJuIHQuZ2V0KGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtjb25zdCBzPW4oNjQ2NSksYT1uKDg2MjQpLGM9big1MDA3KSxkPW4oMjczNCksaD1uKDk2NDEpO2NsYXNzIGwgZXh0ZW5kcyBzLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlLHQsbil7c3VwZXIoKSx0aGlzLndpcmVMaXN0ZW5lcnM9bmV3IE1hcCx0aGlzLnRvcGljUmVmTWFwPW5ldyBNYXAsdGhpcy5ldmVudEFnZ3JlZ2F0b3I9bmV3IGQuZGVmYXVsdCx0aGlzLm1lc3NhZ2VIYW5kbGVycz1bdGhpcy5ldmVudEFnZ3JlZ2F0b3IuZGlzcGF0Y2hFdmVudF0saS5zZXQodGhpcyx2b2lkIDApLHRoaXMuY29ubmVjdFN5bmM9KCk9PntvKHRoaXMsaSkuY29ubmVjdFN5bmMoKX0sdGhpcy5nZXRQb3J0PSgpPT57aWYoXCJOb2RlRW52aXJvbm1lbnRcIiE9PXRoaXMuZW52aXJvbm1lbnQuY29uc3RydWN0b3IubmFtZSl0aHJvdyBuZXcgYy5Ob3RJbXBsZW1lbnRlZEVycm9yKFwiTm90IEltcGxlbWVudGVkXCIpO3JldHVybiBvKHRoaXMsaSkud2lyZS51cmwuc3BsaXQoXCI6XCIpLnNsaWNlKC0xKVswXX0scih0aGlzLGksbmV3IGUodGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSkpLHRoaXMuZW52aXJvbm1lbnQ9dCx0aGlzLnNlbmRSYXc9byh0aGlzLGkpLnNlbmQuYmluZChvKHRoaXMsaSkpLHRoaXMucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcih0aGlzLmhhbmRsZU1lc3NhZ2UuYmluZCh0aGlzKSksbyh0aGlzLGkpLm9uKFwiZGlzY29ubmVjdGVkXCIsKCgpPT57Zm9yKGNvbnN0Wyx7cmVqZWN0OmV9XW9mIHRoaXMud2lyZUxpc3RlbmVycyllKFwiUmVtb3RlIGNvbm5lY3Rpb24gaGFzIGNsb3NlZFwiKTt0aGlzLndpcmVMaXN0ZW5lcnMuY2xlYXIoKSx0aGlzLmVtaXQoXCJkaXNjb25uZWN0ZWRcIil9KSk7Y29uc3R7dXVpZDpzLG5hbWU6YX09bixsPXRoaXMuZW52aXJvbm1lbnQuZ2V0Q3VycmVudEVudGl0eVR5cGUoKTt0aGlzLm1lPWguZ2V0QmFzZU1lKGwscyxhKX1zaHV0ZG93bigpe3JldHVybiBvKHRoaXMsaSkuc2h1dGRvd24oKX1hc3luYyBjb25uZWN0KGUpe2lmKGEuaXNFeGlzdGluZ0Nvbm5lY3RDb25maWcoZSkpcmV0dXJuIHRoaXMuY29ubmVjdEJ5UG9ydChlKTtpZihhLmlzTmV3Q29ubmVjdENvbmZpZyhlKSl7Y29uc3QgdD1hd2FpdCB0aGlzLmVudmlyb25tZW50LnJldHJpZXZlUG9ydChlKTtyZXR1cm4gdGhpcy5jb25uZWN0QnlQb3J0KHsuLi5lLGFkZHJlc3M6YHdzOi8vbG9jYWxob3N0OiR7dH1gfSl9fWFzeW5jIGNvbm5lY3RCeVBvcnQoZSl7Y29uc3R7YWRkcmVzczp0LHV1aWQ6bn09ZSxyPXsuLi5lLHR5cGU6XCJmaWxlLXRva2VuXCJ9LHM9byh0aGlzLGkpO2F3YWl0IHMuY29ubmVjdCh0KTtjb25zdCBhPWF3YWl0IHRoaXMuc2VuZEFjdGlvbihcInJlcXVlc3QtZXh0ZXJuYWwtYXV0aG9yaXphdGlvblwiLHt1dWlkOm4sdHlwZTpcImZpbGUtdG9rZW5cIn0sITApO2lmKFwiZXh0ZXJuYWwtYXV0aG9yaXphdGlvbi1yZXNwb25zZVwiIT09YS5hY3Rpb24pdGhyb3cgbmV3IGMuVW5leHBlY3RlZEFjdGlvbkVycm9yKGEuYWN0aW9uKTtjb25zdHt0b2tlbjpkfT1hLnBheWxvYWQ7YXdhaXQgdGhpcy5lbnZpcm9ubWVudC53cml0ZVRva2VuKGEucGF5bG9hZC5maWxlLGEucGF5bG9hZC50b2tlbik7Y29uc3QgaD1hd2FpdCB0aGlzLnNlbmRBY3Rpb24oXCJyZXF1ZXN0LWF1dGhvcml6YXRpb25cIixyLCEwKTtpZihcImF1dGhvcml6YXRpb24tcmVzcG9uc2VcIiE9PWguYWN0aW9uKXRocm93IG5ldyBjLlVuZXhwZWN0ZWRBY3Rpb25FcnJvcihoLmFjdGlvbik7aWYoITAhPT1oLnBheWxvYWQuc3VjY2Vzcyl0aHJvdyBuZXcgYy5SdW50aW1lRXJyb3IoaC5wYXlsb2FkKTtyZXR1cm4gZH1zZW5kQWN0aW9uKGUsdD17fSxuPSExKXtyZXR1cm4gbmV3IFByb21pc2UoKChyLHMpPT57Y29uc3QgYT10aGlzLmVudmlyb25tZW50LmdldE5leHRNZXNzYWdlSWQoKSxjPXthY3Rpb246ZSxwYXlsb2FkOnQsbWVzc2FnZUlkOmF9LGQ9byh0aGlzLGkpO3JldHVybiB0aGlzLmFkZFdpcmVMaXN0ZW5lcihhLHIscyxuKSxkLnNlbmQoYykuY2F0Y2gocyl9KSl9ZmVycnlBY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxuKT0+e2NvbnN0IHI9dGhpcy5lbnZpcm9ubWVudC5nZXROZXh0TWVzc2FnZUlkKCk7ZS5tZXNzYWdlSWQ9cjtjb25zdCBzPWU9Pnt0KGUucGF5bG9hZCl9O3JldHVybiBvKHRoaXMsaSkuc2VuZChlKS50aGVuKCgoKT0+dGhpcy5hZGRXaXJlTGlzdGVuZXIocixzLG4sITEpKSkuY2F0Y2gobil9KSl9cmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihlKXt0aGlzLm1lc3NhZ2VIYW5kbGVycy5wdXNoKGUpfWFkZFdpcmVMaXN0ZW5lcihlLHQsbixpKXtpP3RoaXMudW5jb3JyZWxhdGVkTGlzdGVuZXI9dDp0aGlzLndpcmVMaXN0ZW5lcnMuaGFzKGUpP24obmV3IGMuRHVwbGljYXRlQ29ycmVsYXRpb25FcnJvcihTdHJpbmcoZSkpKTp0aGlzLndpcmVMaXN0ZW5lcnMuc2V0KGUse3Jlc29sdmU6dCxyZWplY3Q6bn0pfW9ubWVzc2FnZShlKXtmb3IoY29uc3QgdCBvZiB0aGlzLm1lc3NhZ2VIYW5kbGVycyl0LmNhbGwobnVsbCxlKX1oYW5kbGVNZXNzYWdlKGUpe2NvbnN0IHQ9ZS5jb3JyZWxhdGlvbklkfHxOYU47aWYoXCJjb3JyZWxhdGlvbklkXCJpbiBlKXtpZighdGhpcy53aXJlTGlzdGVuZXJzLmhhcyh0KSlyZXR1cm4hMTt7Y29uc3R7cmVzb2x2ZTpuLHJlamVjdDppfT10aGlzLndpcmVMaXN0ZW5lcnMuZ2V0KHQpO1wiYWNrXCIhPT1lLmFjdGlvbj9pKG5ldyBjLk5vQWNrRXJyb3IoZS5hY3Rpb24pKTpcInBheWxvYWRcImluIGU/ZS5wYXlsb2FkLnN1Y2Nlc3M/bi5jYWxsKG51bGwsZSk6aShuZXcgYy5SdW50aW1lRXJyb3IoZS5wYXlsb2FkKSk6aShuZXcgYy5SdW50aW1lRXJyb3IoZSkpLHRoaXMud2lyZUxpc3RlbmVycy5kZWxldGUodCl9fWVsc2UgdGhpcy51bmNvcnJlbGF0ZWRMaXN0ZW5lciYmdGhpcy51bmNvcnJlbGF0ZWRMaXN0ZW5lci5jYWxsKG51bGwsZSksdGhpcy51bmNvcnJlbGF0ZWRMaXN0ZW5lcj0oKT0+e307cmV0dXJuITB9fWk9bmV3IFdlYWtNYXAsdC5kZWZhdWx0PWx9LDg2MjQ6KGUsdCk9PntmdW5jdGlvbiBuKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlLm1hbmlmZXN0VXJsfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIHIoZSkmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmFkZHJlc3N9ZnVuY3Rpb24gcihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS51dWlkfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUucnVudGltZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUucnVudGltZS52ZXJzaW9ufWZ1bmN0aW9uIHMoZSl7cmV0dXJuIHIoZSkmJm8oZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5pc0ludGVybmFsQ29ubmVjdENvbmZpZz10LmlzUG9ydERpc2NvdmVyeUNvbmZpZz10LmlzTmV3Q29ubmVjdENvbmZpZz10LmlzRXhpc3RpbmdDb25uZWN0Q29uZmlnPXQuaXNFeHRlcm5hbENvbmZpZz12b2lkIDAsdC5pc0V4dGVybmFsQ29uZmlnPW4sdC5pc0V4aXN0aW5nQ29ubmVjdENvbmZpZz1pLHQuaXNOZXdDb25uZWN0Q29uZmlnPXMsdC5pc1BvcnREaXNjb3ZlcnlDb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSkmJm8oZSl8fHMoZSl9LHQuaXNJbnRlcm5hbENvbm5lY3RDb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl8fHMoZSl9fSwyMzY2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5lcnJvclRvUE9KTz12b2lkIDAsdC5lcnJvclRvUE9KTz1mdW5jdGlvbihlKXtyZXR1cm57c3RhY2s6ZS5zdGFjayxtZXNzYWdlOmUubWVzc2FnZSx0b1N0cmluZzplLnRvU3RyaW5nfX19LDM5MTc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmV4aGF1c3RpdmVDaGVjaz12b2lkIDAsdC5leGhhdXN0aXZlQ2hlY2s9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHZhbHVlOiAke2V9JHt0P2BcXG4gU3VwcG9ydGVkIHZhbHVlcyBhcmU6ICR7dC5qb2luKFwiXCIpfWA6XCJcIn1gKX19LDM0NDI6KGUsdCk9Pnthc3luYyBmdW5jdGlvbiBuKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IG4gb2YgZSl7Y29uc3QgZT1hd2FpdCBuKCk7dC5wdXNoKGUpfXJldHVybiB0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQucHJvbWlzZU1hcFNlcmlhbD10LnNlcmlhbD10LnByb21pc2VNYXA9dC5wcm9taXNpZnk9dm9pZCAwLHQucHJvbWlzaWZ5PWZ1bmN0aW9uKGUpe3JldHVybiguLi50KT0+bmV3IFByb21pc2UoKChuLGkpPT57ZSguLi50LCgoZSx0KT0+ZT9pKGUpOm4odCkpKX0pKX0sdC5wcm9taXNlTWFwPWFzeW5jIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIFByb21pc2UuYWxsKGUubWFwKHQpKX0sdC5zZXJpYWw9bix0LnByb21pc2VNYXBTZXJpYWw9YXN5bmMgZnVuY3Rpb24oZSx0KXtyZXR1cm4gbihlLm1hcCgoKGUsbixpKT0+KCk9PnQoZSxuLGkpKSkpfX0sMzEyNzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZGVmYXVsdD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMudG9waWNSZWZNYXA9bmV3IE1hcH1pbmNSZWZDb3VudChlKXtjb25zdCB0PXRoaXMudG9waWNSZWZNYXAuZ2V0KGUpO2xldCBuO2lmKHQpe2NvbnN0IGk9dCsxO249aSx0aGlzLnRvcGljUmVmTWFwLnNldChlLGkpfWVsc2UgdGhpcy50b3BpY1JlZk1hcC5zZXQoZSwxKSxuPTE7cmV0dXJuIG59ZGVjUmVmQ291bnQoZSl7Y29uc3QgdD10aGlzLnRvcGljUmVmTWFwLmdldChlKTtsZXQgbjtpZih0KXtjb25zdCBpPXQtMTt0aGlzLnRvcGljUmVmTWFwLnNldChlLGkpLG49aX1lbHNlIG49LTE7cmV0dXJuIG59YWN0T25GaXJzdChlLHQsbil7cmV0dXJuIDE9PT10aGlzLmluY1JlZkNvdW50KGUpP3QoKTpuKCl9YWN0T25MYXN0KGUsdCxuKXtyZXR1cm4gMD09PXRoaXMuZGVjUmVmQ291bnQoZSk/dCgpOm4oKX19fSwyMzAwOihlLHQpPT57ZnVuY3Rpb24gbihlKXtyZXR1cm5bLi4uZS5zcGxpdChcIi5cIikucmV2ZXJzZSgpLmVudHJpZXMoKV0ucmVkdWNlKCgoZSxbdCxuXSk9PmUrICtuKjFlNCoqdCksMCl9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBuKGUpPj1uKHQpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUuc3BsaXQoXCIvXCIpWzBdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQucnVudGltZVV1aWRNZWV0c01pbmltdW1SdW50aW1lVmVyc2lvbj10LnBhcnNlUnVudGltZVV1aWQ9dC5tZWV0c01pbmltdW1SdW50aW1lVmVyc2lvbj12b2lkIDAsdC5tZWV0c01pbmltdW1SdW50aW1lVmVyc2lvbj1pLHQucGFyc2VSdW50aW1lVXVpZD1yLHQucnVudGltZVV1aWRNZWV0c01pbmltdW1SdW50aW1lVmVyc2lvbj1mdW5jdGlvbihlLHQpe3JldHVybiBpKHIoZSksdCl9fSw0OTk5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC52YWxpZGF0ZUlkZW50aXR5PXZvaWQgMCx0LnZhbGlkYXRlSWRlbnRpdHk9ZnVuY3Rpb24oZSl7bGV0IHQ7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnV1aWR8fCh0PVwiTm90IGEgdmFsaWQgaWRlbnRpdHkgb2JqZWN0XCIpLHR9fSw2NDY1OmU9Pnt2YXIgdCxuPVwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0P1JlZmxlY3Q6bnVsbCxpPW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYXBwbHk/bi5hcHBseTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGUsdCxuKX07dD1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm93bktleXM/bi5vd25LZXlzOk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpKX06ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpfTt2YXIgcj1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGUpe3JldHVybiBlIT1lfTtmdW5jdGlvbiBvKCl7by5pbml0LmNhbGwodGhpcyl9ZS5leHBvcnRzPW8sZS5leHBvcnRzLm9uY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4saSl7ZnVuY3Rpb24gcihuKXtlLnJlbW92ZUxpc3RlbmVyKHQsbyksaShuKX1mdW5jdGlvbiBvKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZS5yZW1vdmVMaXN0ZW5lciYmZS5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsciksbihbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfXkoZSx0LG8se29uY2U6ITB9KSxcImVycm9yXCIhPT10JiZmdW5jdGlvbihlLHQsbil7XCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbiYmeShlLFwiZXJyb3JcIix0LHtvbmNlOiEwfSl9KGUscil9KSl9LG8uRXZlbnRFbWl0dGVyPW8sby5wcm90b3R5cGUuX2V2ZW50cz12b2lkIDAsby5wcm90b3R5cGUuX2V2ZW50c0NvdW50PTAsby5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDA7dmFyIHM9MTA7ZnVuY3Rpb24gYShlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIHZvaWQgMD09PWUuX21heExpc3RlbmVycz9vLmRlZmF1bHRNYXhMaXN0ZW5lcnM6ZS5fbWF4TGlzdGVuZXJzfWZ1bmN0aW9uIGQoZSx0LG4saSl7dmFyIHIsbyxzLGQ7aWYoYShuKSx2b2lkIDA9PT0obz1lLl9ldmVudHMpPyhvPWUuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2V2ZW50c0NvdW50PTApOih2b2lkIDAhPT1vLm5ld0xpc3RlbmVyJiYoZS5lbWl0KFwibmV3TGlzdGVuZXJcIix0LG4ubGlzdGVuZXI/bi5saXN0ZW5lcjpuKSxvPWUuX2V2ZW50cykscz1vW3RdKSx2b2lkIDA9PT1zKXM9b1t0XT1uLCsrZS5fZXZlbnRzQ291bnQ7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBzP3M9b1t0XT1pP1tuLHNdOltzLG5dOmk/cy51bnNoaWZ0KG4pOnMucHVzaChuKSwocj1jKGUpKT4wJiZzLmxlbmd0aD5yJiYhcy53YXJuZWQpe3Mud2FybmVkPSEwO3ZhciBoPW5ldyBFcnJvcihcIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gXCIrcy5sZW5ndGgrXCIgXCIrU3RyaW5nKHQpK1wiIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXRcIik7aC5uYW1lPVwiTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nXCIsaC5lbWl0dGVyPWUsaC50eXBlPXQsaC5jb3VudD1zLmxlbmd0aCxkPWgsY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oZCl9cmV0dXJuIGV9ZnVuY3Rpb24gaCgpe2lmKCF0aGlzLmZpcmVkKXJldHVybiB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsdGhpcy53cmFwRm4pLHRoaXMuZmlyZWQ9ITAsMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTp0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LGFyZ3VtZW50cyl9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGk9e2ZpcmVkOiExLHdyYXBGbjp2b2lkIDAsdGFyZ2V0OmUsdHlwZTp0LGxpc3RlbmVyOm59LHI9aC5iaW5kKGkpO3JldHVybiByLmxpc3RlbmVyPW4saS53cmFwRm49cixyfWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciBpPWUuX2V2ZW50cztpZih2b2lkIDA9PT1pKXJldHVybltdO3ZhciByPWlbdF07cmV0dXJuIHZvaWQgMD09PXI/W106XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9uP1tyLmxpc3RlbmVyfHxyXTpbcl06bj9mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IEFycmF5KGUubGVuZ3RoKSxuPTA7bjx0Lmxlbmd0aDsrK24pdFtuXT1lW25dLmxpc3RlbmVyfHxlW25dO3JldHVybiB0fShyKTp3KHIsci5sZW5ndGgpfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9dGhpcy5fZXZlbnRzO2lmKHZvaWQgMCE9PXQpe3ZhciBuPXRbZV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbilyZXR1cm4gMTtpZih2b2lkIDAhPT1uKXJldHVybiBuLmxlbmd0aH1yZXR1cm4gMH1mdW5jdGlvbiB3KGUsdCl7Zm9yKHZhciBuPW5ldyBBcnJheSh0KSxpPTA7aTx0OysraSluW2ldPWVbaV07cmV0dXJuIG59ZnVuY3Rpb24geShlLHQsbixpKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uKWkub25jZT9lLm9uY2UodCxuKTplLm9uKHQsbik7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLmFkZEV2ZW50TGlzdGVuZXIpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgZSk7ZS5hZGRFdmVudExpc3RlbmVyKHQsKGZ1bmN0aW9uIHIobyl7aS5vbmNlJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxyKSxuKG8pfSkpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkobyxcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPDB8fHIoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2UrXCIuXCIpO3M9ZX19KSxvLmluaXQ9ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50cyE9PU9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfSxvLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGU8MHx8cihlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiblwiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcrZStcIi5cIik7cmV0dXJuIHRoaXMuX21heExpc3RlbmVycz1lLHRoaXN9LG8ucHJvdG90eXBlLmdldE1heExpc3RlbmVycz1mdW5jdGlvbigpe3JldHVybiBjKHRoaXMpfSxvLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0LnB1c2goYXJndW1lbnRzW25dKTt2YXIgcj1cImVycm9yXCI9PT1lLG89dGhpcy5fZXZlbnRzO2lmKHZvaWQgMCE9PW8pcj1yJiZ2b2lkIDA9PT1vLmVycm9yO2Vsc2UgaWYoIXIpcmV0dXJuITE7aWYocil7dmFyIHM7aWYodC5sZW5ndGg+MCYmKHM9dFswXSkscyBpbnN0YW5jZW9mIEVycm9yKXRocm93IHM7dmFyIGE9bmV3IEVycm9yKFwiVW5oYW5kbGVkIGVycm9yLlwiKyhzP1wiIChcIitzLm1lc3NhZ2UrXCIpXCI6XCJcIikpO3Rocm93IGEuY29udGV4dD1zLGF9dmFyIGM9b1tlXTtpZih2b2lkIDA9PT1jKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGMpaShjLHRoaXMsdCk7ZWxzZXt2YXIgZD1jLmxlbmd0aCxoPXcoYyxkKTtmb3Iobj0wO248ZDsrK24paShoW25dLHRoaXMsdCl9cmV0dXJuITB9LG8ucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQodGhpcyxlLHQsITEpfSxvLnByb3RvdHlwZS5vbj1vLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixvLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZCh0aGlzLGUsdCwhMCl9LG8ucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYSh0KSx0aGlzLm9uKGUsbCh0aGlzLGUsdCkpLHRoaXN9LG8ucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYSh0KSx0aGlzLnByZXBlbmRMaXN0ZW5lcihlLGwodGhpcyxlLHQpKSx0aGlzfSxvLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLHM7aWYoYSh0KSx2b2lkIDA9PT0oaT10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PShuPWlbZV0pKXJldHVybiB0aGlzO2lmKG49PT10fHxuLmxpc3RlbmVyPT09dCkwPT0tLXRoaXMuX2V2ZW50c0NvdW50P3RoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpOihkZWxldGUgaVtlXSxpLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsbi5saXN0ZW5lcnx8dCkpO2Vsc2UgaWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbil7Zm9yKHI9LTEsbz1uLmxlbmd0aC0xO28+PTA7by0tKWlmKG5bb109PT10fHxuW29dLmxpc3RlbmVyPT09dCl7cz1uW29dLmxpc3RlbmVyLHI9bzticmVha31pZihyPDApcmV0dXJuIHRoaXM7MD09PXI/bi5zaGlmdCgpOmZ1bmN0aW9uKGUsdCl7Zm9yKDt0KzE8ZS5sZW5ndGg7dCsrKWVbdF09ZVt0KzFdO2UucG9wKCl9KG4sciksMT09PW4ubGVuZ3RoJiYoaVtlXT1uWzBdKSx2b2lkIDAhPT1pLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsc3x8dCl9cmV0dXJuIHRoaXN9LG8ucHJvdG90eXBlLm9mZj1vLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixvLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2lmKHZvaWQgMD09PShuPXRoaXMuX2V2ZW50cykpcmV0dXJuIHRoaXM7aWYodm9pZCAwPT09bi5yZW1vdmVMaXN0ZW5lcilyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApOnZvaWQgMCE9PW5bZV0mJigwPT0tLXRoaXMuX2V2ZW50c0NvdW50P3RoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpOmRlbGV0ZSBuW2VdKSx0aGlzO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcixvPU9iamVjdC5rZXlzKG4pO2ZvcihpPTA7aTxvLmxlbmd0aDsrK2kpXCJyZW1vdmVMaXN0ZW5lclwiIT09KHI9b1tpXSkmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHIpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTAsdGhpc31pZihcImZ1bmN0aW9uXCI9PXR5cGVvZih0PW5bZV0pKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSx0KTtlbHNlIGlmKHZvaWQgMCE9PXQpZm9yKGk9dC5sZW5ndGgtMTtpPj0wO2ktLSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdFtpXSk7cmV0dXJuIHRoaXN9LG8ucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gdSh0aGlzLGUsITApfSxvLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHUodGhpcyxlLCExKX0sby5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZS5saXN0ZW5lckNvdW50P2UubGlzdGVuZXJDb3VudCh0KTpwLmNhbGwoZSx0KX0sby5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1wLG8ucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQ+MD90KHRoaXMuX2V2ZW50cyk6W119fX0sdD17fTtmdW5jdGlvbiBuKGkpe3ZhciByPXRbaV07aWYodm9pZCAwIT09cilyZXR1cm4gci5leHBvcnRzO3ZhciBvPXRbaV09e2V4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8uZXhwb3J0c31uLmQ9KGUsdCk9Pntmb3IodmFyIGkgaW4gdCluLm8odCxpKSYmIW4ubyhlLGkpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDp0W2ldfSl9LG4ubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCk7dmFyIGk9e307KCgpPT57bi5kKGkse2RxOigpPT5hLE1TOigpPT5zLHhROigpPT5jLHNPOigpPT5mZSxadTooKT0+Z2UsSTM6KCk9Pm1lLCRVOigpPT52ZSxpMDooKT0+Q2UsY1g6KCk9PmQsX1c6KCk9PmgsVSQ6KCk9PncsVTc6KCk9PnkscmQ6KCk9PnBlfSk7dmFyIGUsdCxyLG89bigxNjgxKTtjbGFzcyBzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZT1cIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkXCIsdCl7dmFyIG47c3VwZXIoZSksdCYmKHRoaXMuaW5uZXJFcnJvcj10JiZ0KSx0aGlzLnN0YWNrPW51bGw9PT0obj10aGlzLnN0YWNrKXx8dm9pZCAwPT09bj92b2lkIDA6bi5yZXBsYWNlKC9eKFxcdypFcnJvcikvLGAke3RoaXMuY29uc3RydWN0b3IubmFtZX1gKX19Y2xhc3MgYSBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byBleGVjdXRlIGFkYXB0ZXIgZnVuY3Rpb25cIix0KXtzdXBlcihlLHQpfX1jbGFzcyBjIGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihlPVwiRmFpbGVkIHRvIHJhaXNlIGV2ZW50XCIsdCl7c3VwZXIoZSx0KX19Y2xhc3MgZCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZT1cIkZhaWxlZCB0byBpbml0aWFsaXplIGFkYXB0ZXJcIix0KXtzdXBlcihlLHQpfX1jbGFzcyBoIGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihlPVwiSW52YWxpZCBwYXJhbWV0ZXIgdmFsdWVcIix0KXtzdXBlcihlLHQpfX0hZnVuY3Rpb24oZSl7ZS5BY3RpdmF0ZVdvcmtib29rPVwiQWN0aXZhdGVXb3JrYm9va1wiLGUuQWN0aXZhdGVXb3Jrc2hlZXQ9XCJBY3RpdmF0ZVdvcmtzaGVldFwiLGUuQWRkV29ya3NoZWV0PVwiQWRkV29ya3NoZWV0XCIsZS5DYWxjdWxhdGVXb3JrYm9vaz1cIkNhbGN1bGF0ZVdvcmtib29rXCIsZS5DYWxjdWxhdGVXb3Jrc2hlZXQ9XCJDYWxjdWxhdGVXb3Jrc2hlZXRcIixlLkNsZWFyQWxsQ2VsbHM9XCJDbGVhckFsbENlbGxzXCIsZS5DbGVhckFsbENlbGxWYWx1ZXM9XCJDbGVhckFsbENlbGxWYWx1ZXNcIixlLkNsZWFyQWxsQ2VsbEZvcm1hdHRpbmc9XCJDbGVhckFsbENlbGxGb3JtYXR0aW5nXCIsZS5DbGVhckNlbGxWYWx1ZXM9XCJDbGVhckNlbGxWYWx1ZXNcIixlLkNsZWFyQ2VsbEZvcm1hdHRpbmc9XCJDbGVhckNlbGxGb3JtYXR0aW5nXCIsZS5DbGVhckNlbGxzPVwiQ2xlYXJDZWxsc1wiLGUuQ2xvc2VXb3JrYm9vaz1cIkNsb3NlV29ya2Jvb2tcIixlLkNyZWF0ZVdvcmtib29rPVwiQ3JlYXRlV29ya2Jvb2tcIixlLkRlbGV0ZVdvcmtzaGVldD1cIkRlbGV0ZVdvcmtzaGVldFwiLGUuRGVyZWdpc3RlckV2ZW50PVwiRGVyZWdpc3RlckV2ZW50XCIsZS5FdmVudEZpcmVkPVwiRXZlbnRGaXJlZFwiLGUuR2V0Q2FsY3VsYXRpb25Nb2RlPVwiR2V0Q2FsY3VsYXRpb25Nb2RlXCIsZS5HZXRDZWxscz1cIkdldENlbGxzXCIsZS5HZXRXb3JrYm9va0J5SWQ9XCJHZXRXb3JrYm9va0J5SWRcIixlLkdldFdvcmtib29rTmFtZT1cIkdldFdvcmtib29rTmFtZVwiLGUuR2V0V29ya2Jvb2tzPVwiR2V0V29ya2Jvb2tzXCIsZS5HZXRXb3Jrc2hlZXRCeUlkPVwiR2V0V29ya3NoZWV0QnlJZFwiLGUuR2V0V29ya3NoZWV0QnlOYW1lPVwiR2V0V29ya3NoZWV0QnlOYW1lXCIsZS5HZXRXb3Jrc2hlZXROYW1lPVwiR2V0V29ya3NoZWV0TmFtZVwiLGUuR2V0V29ya3NoZWV0cz1cIkdldFdvcmtzaGVldHNcIixlLkxvZ01lc3NhZ2U9XCJMb2dNZXNzYWdlXCIsZS5PcGVuV29ya2Jvb2s9XCJPcGVuV29ya2Jvb2tcIixlLlByb3RlY3RXb3Jrc2hlZXQ9XCJQcm90ZWN0V29ya3NoZWV0XCIsZS5SZWdpc3RlckV2ZW50PVwiUmVnaXN0ZXJFdmVudFwiLGUuU2F2ZVdvcmtib29rPVwiU2F2ZVdvcmtib29rXCIsZS5TYXZlV29ya2Jvb2tBcz1cIlNhdmVXb3JrYm9va0FzXCIsZS5TZXRDZWxsVmFsdWVzPVwiU2V0Q2VsbFZhbHVlc1wiLGUuU2V0Q2VsbEZvcm1hdHRpbmc9XCJTZXRDZWxsRm9ybWF0dGluZ1wiLGUuU2V0Q2VsbE5hbWU9XCJTZXRDZWxsTmFtZVwiLGUuU2V0V29ya3NoZWV0TmFtZT1cIlNldFdvcmtzaGVldE5hbWVcIixlLkZpbHRlckNlbGxzPVwiRmlsdGVyQ2VsbHNcIixlLlF1aXRBcHBsaWNhdGlvbj1cIlF1aXRBcHBsaWNhdGlvblwifShlfHwoZT17fSkpLGZ1bmN0aW9uKGUpe2UuQWN0aXZhdGU9XCJBY3RpdmF0ZVwiLGUuQWRkV29ya3NoZWV0PVwiQWRkV29ya3NoZWV0XCIsZS5DaGFuZ2U9XCJDaGFuZ2VcIixlLkNsb3NlPVwiQ2xvc2VcIixlLkRlYWN0aXZhdGU9XCJEZWFjdGl2YXRlXCIsZS5EZWxldGVXb3Jrc2hlZXQ9XCJEZWxldGVXb3Jrc2hlZXRcIn0odHx8KHQ9e30pKSxmdW5jdGlvbihlKXtlLldvcmtib29rPVwiV29ya2Jvb2tcIixlLldvcmtzaGVldD1cIldvcmtzaGVldFwifShyfHwocj17fSkpO2NvbnN0IGw9XCIxLjMuMFwiO2xldCB1PSExO2NvbnN0IHA9XCJbQG9wZW5maW4vZXhjZWxdXCIsdz0oKT0+e3U9ITF9LHk9KCk9Pnt1PSEwLGcoXCJ2MS4zLjBcIil9LGY9KGUsdCk9Pnt1JiYoZS5pbm5lckVycm9yP2NvbnNvbGUuZXJyb3IodD9gJHtwfSAke3R9YDpwLGUsXCJcXG5cXG4oaW5uZXIpXCIsZS5pbm5lckVycm9yKTpjb25zb2xlLmVycm9yKHQ/YCR7cH0gJHt0fWA6cCxlKSl9LGc9KC4uLmUpPT57dSYmY29uc29sZS5sb2cocCwuLi5lKX0sbT0oLi4uZSk9Pnt1JiZjb25zb2xlLndhcm4ocCwuLi5lKX07by5IfHxPYmplY3QuYXNzaWduKHdpbmRvdyx7ZmluOnt9fSksT2JqZWN0LmFzc2lnbihvLkgse0ludGVncmF0aW9uczp7RXhjZWw6e2VuYWJsZUxvZ2dpbmc6eSxkaXNhYmxlTG9nZ2luZzp3fX19KTtjb25zdCB2PSgpPT5cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywoZT0+e2NvbnN0IHQ9MTYqTWF0aC5yYW5kb20oKXwwO3JldHVybihcInhcIj09PWU/dDozJnR8OCkudG9TdHJpbmcoMTYpfSkpLEM9bmV3IE1hcCxJPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBBY3RpdmF0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkFjdGl2YXRlV29ya3NoZWV0LG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0seD0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQ2FsY3VsYXRlICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2FsY3VsYXRlV29ya3NoZWV0LG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sQT0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQ2xlYXIgYWxsIGNlbGwgdmFsdWVzICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJBbGxDZWxsVmFsdWVzLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sYj0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogQ2xlYXIgYWxsIGNlbGwgZm9ybWF0dGluZyAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQWxsQ2VsbEZvcm1hdHRpbmcsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxFPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya3NoZWV0OiBDbGVhciBhbGwgY2VsbHMgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckFsbENlbGxzLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sUD0odCxuKT0+YXN5bmMgaT0+e2coYFdvcmtzaGVldDogQ2xlYXIgY2VsbCB2YWx1ZXM7IGNlbGxSYW5nZToke2l9ICgke259KWApO2NvbnN0IHI9e2NlbGxSYW5nZTppLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2xlYXJDZWxsVmFsdWVzLHIpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0saz0odCxuKT0+YXN5bmMgaT0+e2coYFdvcmtzaGVldDogQ2xlYXIgY2VsbCBmb3JtYXR0aW5nOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgKTtjb25zdCByPXtjZWxsUmFuZ2U6aSxvYmplY3RJZDpufTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkNsZWFyQ2VsbEZvcm1hdHRpbmcscil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxNPSh0LG4pPT5hc3luYyBpPT57ZyhgV29ya3NoZWV0OiBDbGVhciBjZWxsczsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCk7Y29uc3Qgcj17Y2VsbFJhbmdlOmksb2JqZWN0SWQ6bn07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5DbGVhckNlbGxzLHIpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sXz0oZSx0KT0+KG4saSxyPTFlMyk9PntpZihOdW1iZXIuaXNOYU4ocil8fHI8PTApdGhyb3cgbmV3IHMoXCJVcGRhdGUgaW50ZXJ2YWwgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtjb25zdCBvPXYoKTtnKGBXb3Jrc2hlZXQ6IENyZWF0ZSBkYXRhIHN0cmVhbTsgc3RyZWFtSWQ6JHtvfTsgY2VsbFJhbmdlOiR7bn07IHVwZGF0ZUludGVydmFsOiR7cn0gKCR7dH0pYCk7Y29uc3QgYT17Y2xvc2U6KCk9PntnKGBDbG9zZWQgc3RyZWFtICgke299KWApLChlPT57dmFyIHQ7dHJ5e2NvbnN0IG49Qy5nZXQoZSk7aWYoIW4pdGhyb3cgbmV3IHMoYFVuYWJsZSB0byBmaW5kIHJlZ2lzdGVyZWQgZGF0YSBzdHJlYW0gd2l0aCBpZCAke2V9YCk7dm9pZCAwIT09KG51bGwhPT0odD1uLnRpbWVyKSYmdm9pZCAwIT09dD90OnZvaWQgMCkmJlQoZSksQy5kZWxldGUoZSl9Y2F0Y2goZSl7dGhyb3cgZihlKSxlfX0pKG8pfSxjZWxsUmFuZ2U6bixpZDpvLHN0YXJ0OigpPT57ZyhgU3RhcnRlZCBzdHJlYW1pbmcgKCR7b30pYCksQihvLGksZSx0KX0sc3RvcDooKT0+e2coYFN0b3BwZWQgc3RyZWFtaW5nICgke299KWApLFQobyl9LHVwZGF0ZUludGVydmFsOnIsd29ya3NoZWV0SWQ6dH07cmV0dXJuIEMuc2V0KG8se2RhdGFTdHJlYW06YX0pLGF9LFM9KGUsdCxuLGkpPT57Y29uc3Qgbz17ZXZlbnRUYXJnZXQ6ci5Xb3Jrc2hlZXQsb2JqZWN0SWQ6dH07cmV0dXJue29iamVjdElkOnQsYWN0aXZhdGU6SShlLHQpLGFkZEV2ZW50TGlzdGVuZXI6bihlLG8pLGNhbGN1bGF0ZTp4KGUsdCksY2xlYXJBbGxDZWxsRm9ybWF0dGluZzpiKGUsdCksY2xlYXJBbGxDZWxsczpFKGUsdCksY2xlYXJBbGxDZWxsVmFsdWVzOkEoZSx0KSxjbGVhckNlbGxGb3JtYXR0aW5nOmsoZSx0KSxjbGVhckNlbGxzOk0oZSx0KSxjbGVhckNlbGxWYWx1ZXM6UChlLHQpLGNyZWF0ZURhdGFTdHJlYW06XyhlLHQpLGRlbGV0ZTpPKGUsdCksZmlsdGVyQ2VsbHM6VyhlLHQpLGdldENlbGxzOkYoZSx0KSxnZXROYW1lOkwoZSx0KSxwcm90ZWN0OlIoZSx0KSxyZW1vdmVFdmVudExpc3RlbmVyOmkoZSksc2V0Q2VsbEZvcm1hdHRpbmc6JChlLHQpLHNldENlbGxOYW1lOkcoZSx0KSxzZXRDZWxsVmFsdWVzOmooZSx0KSxzZXROYW1lOk4oZSx0KX19LE89KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IERlbGV0ZSAoJHtufSlgKTt0cnl7YXdhaXQgdC5kaXNwYXRjaChlLkRlbGV0ZVdvcmtzaGVldCxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LFc9KHQsbik9PmFzeW5jKGkscixvLHMsYyxkPSEwKT0+e2coYFdvcmtzaGVldDogRmlsdGVyIGNlbGxzOyBjZWxsUmFuZ2U6JHtpfSAoJHtufSlgLHtjb2x1bW5JbmRleDpyLGZpbHRlck9wZXJhdG9yOm8sY3JpdGVyaWExOnMsY3JpdGVyaWEyOmMsdmlzaWJsZURyb3BEb3duOmR9KTtjb25zdCBoPXtjZWxsUmFuZ2U6aSxjcml0ZXJpYTE6cyxjcml0ZXJpYTI6Yyxjb2x1bW5JbmRleDpyLGZpbHRlck9wZXJhdG9yOm8sb2JqZWN0SWQ6bix2aXNpYmxlRHJvcERvd246ZH07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5GaWx0ZXJDZWxscyxoKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEY9KHQsbik9PmFzeW5jIGk9PntnKGBXb3Jrc2hlZXQ6IEdldCBjZWxsczsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCk7Y29uc3Qgcj17Y2VsbFJhbmdlOmksb2JqZWN0SWQ6bn07bGV0IG89W107dHJ5e289YXdhaXQgdC5kaXNwYXRjaChlLkdldENlbGxzLHIpLGcoYCR7aX06YCxvKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gb30sTD0odCxuKT0+YXN5bmMoKT0+e2coYFdvcmtzaGVldDogR2V0IG5hbWUgKCR7bn0pYCk7dHJ5e3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya3NoZWV0TmFtZSxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LFI9KHQsbik9PmFzeW5jKCk9PntnKGBXb3Jrc2hlZXQ6IFByb3RlY3QgKCR7bn0pYCk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5Qcm90ZWN0V29ya3NoZWV0LG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sJD0odCxuKT0+YXN5bmMoaSxyKT0+e2coYFdvcmtzaGVldDogU2V0IGNlbGwgZm9ybWF0dGluZzsgY2VsbFJhbmdlOiR7aX0gKCR7bn0pYCxyKTtjb25zdCBvPXtjZWxsUmFuZ2U6aSxmb3JtYXR0aW5nOnIsb2JqZWN0SWQ6bn07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5TZXRDZWxsRm9ybWF0dGluZyxvKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LEc9KHQsbik9PmFzeW5jKGkscik9Pntjb25zdCBvPXIudHJpbSgpO2xldCBzO2lmKCFvKXRocm93IHM9bmV3IGgoXCJDZWxsIHJhbmdlIG5hbWUgY2Fubm90IGJlIGFuIGVtcHR5IHN0cmluZ1wiKSxmKHMpLHM7aWYoby5sZW5ndGg+MjU1KXRocm93IHM9bmV3IGgoXCJDZWxsIHJhbmdlIG5hbWUgbXVzdCBiZSAyNTUgY2hhcmFjdGVycyBvciBsZXNzXCIpLGYocykscztpZigvW15hLXowLTlfLj9cXFxcXCInXS8udGVzdChvKSl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVyc1wiKSxmKHMpLHM7aWYoL15cXGR8XFxkJC8udGVzdChvKSl0aHJvdyBzPW5ldyBoKFwiQ2VsbCByYW5nZSBuYW1lIG11c3Qgbm90IHN0YXJ0IG9yIGVuZCB3aXRoIGEgbnVtYmVyXCIpLGYocykscztnKGBXb3Jrc2hlZXQ6IFNldCBjZWxsIG5hbWU7IGNlbGxSYW5nZToke2l9OyBuZXdDZWxsUmFuZ2VOYW1lOiR7b30gKCR7bn0pYCk7Y29uc3QgYz17Y2VsbFJhbmdlOmksbmFtZTpvLG9iamVjdElkOm59O3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuU2V0Q2VsbE5hbWUsYyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxqPSh0LG4pPT5hc3luYyhpLHIpPT57ZyhgV29ya3NoZWV0OiBTZXQgY2VsbCB2YWx1ZXM7IGNlbGxSYW5nZToke2l9ICgke259KWAscik7Y29uc3Qgbz17Y2VsbFJhbmdlOmksb2JqZWN0SWQ6bix2YWx1ZXNNYXA6cn07dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5TZXRDZWxsVmFsdWVzLG8pfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sTj0odCxuKT0+YXN5bmMgaT0+e2NvbnN0IHI9aS50cmltKCk7bGV0IG87aWYoIXIpdGhyb3cgbz1uZXcgaChcIldvcmtzaGVldCBuYW1lIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIiksZihvKSxvO2lmKHIubGVuZ3RoPjMxKXRocm93IG89bmV3IGgoXCJXb3Jrc2hlZXQgbmFtZSBtdXN0IGJlIDMxIGNoYXJhY3RlcnMgb3IgbGVzc1wiKSxmKG8pLG87ZyhgV29ya3NoZWV0OiBTZXQgbmFtZTsgbmV3V29ya3NoZWV0TmFtZToke3J9ICgke259KWApO2NvbnN0IHM9e25ld1dvcmtzaGVldE5hbWU6cixvYmplY3RJZDpufTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5TZXRXb3Jrc2hlZXROYW1lLHMpfWNhdGNoKGUpe3Rocm93IG5ldyBhfX0sQj0oZSx0LG4saSk9Pnt2YXIgcjt0cnl7Y29uc3Qgbz1DLmdldChlKTtpZighbyl0aHJvdyBuZXcgcyhgVW5hYmxlIHRvIGZpbmQgcmVnaXN0ZXJlZCBkYXRhIHN0cmVhbSB3aXRoIGlkICR7ZX1gKTt2b2lkIDAhPT0obnVsbCE9PShyPW8udGltZXIpJiZ2b2lkIDAhPT1yP3I6dm9pZCAwKSYmVChlKTtjb25zdHtjZWxsUmFuZ2U6YSx1cGRhdGVJbnRlcnZhbDpjfT1vLmRhdGFTdHJlYW0sZD1hc3luYygpPT57Y29uc3Qgcj1hd2FpdCB0KCk7dHJ5e2F3YWl0IGoobixpKShhLFtbcl1dKX1jYXRjaCh0KXttKGBVbmFibGUgdG8gdXBkYXRlIGNlbGwgcmFuZ2UgZm9yIHN0cmVhbSB3aXRoIGlkICR7ZX06ICR7bnVsbD09dD92b2lkIDA6dC5tZXNzYWdlfWApfX0saD13aW5kb3cuc2V0SW50ZXJ2YWwoZCxjKTtvLnRpbWVyPWh9Y2F0Y2goZSl7dGhyb3cgZihlKSxlfX0sVD1lPT57dmFyIHQ7dHJ5e2NvbnN0IG49Qy5nZXQoZSk7aWYoIW4pdGhyb3cgbmV3IHMoYFVuYWJsZSB0byBmaW5kIHJlZ2lzdGVyZWQgZGF0YSBzdHJlYW0gd2l0aCBpZCAke2V9YCk7aWYodm9pZCAwPT09KG51bGwhPT0odD1uLnRpbWVyKSYmdm9pZCAwIT09dD90OnZvaWQgMCkpcmV0dXJuO3dpbmRvdy5jbGVhckludGVydmFsKG4udGltZXIpLG4udGltZXI9dm9pZCAwfWNhdGNoKGUpe3Rocm93IGYoZSksZX19LEQ9bmV3IE1hcCxWPShuLGkpPT5hc3luYyhyLG8pPT57aWYoIWl8fCFpLmV2ZW50VGFyZ2V0fHwhaS5vYmplY3RJZCl7Y29uc3QgZT1uZXcgYyhcIkV2ZW50IHJlZ2lzdHJhdGlvbiBtaXNzaW5nIHJlcXVpcmVkIHZhbHVlc1wiKTt0aHJvdyBmKGUpLGV9Y29uc3Qgcz1PYmplY3Qua2V5cyh0KS5maW5kKChlPT5lLnRvTG93ZXJDYXNlKCk9PT1yLnRvTG93ZXJDYXNlKCkpKTtpZighcyl7Y29uc3QgZT1uZXcgYyhgVW5zdXBwb3J0ZWQgZXZlbnQgbmFtZTogJHtyfWApO3Rocm93IGYoZSksZX1pLmV2ZW50TmFtZT10W3NdLGcoXCJSZWdpc3RlcmluZyBldmVudFwiLGkpO3RyeXtjb25zdCB0PWF3YWl0IG4uZGlzcGF0Y2goZS5SZWdpc3RlckV2ZW50LGkpO0Quc2V0KHQsbyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGEodm9pZCAwLGUpfX0sSD10PT5hc3luYyBuPT57bGV0IGk7Zm9yKGNvbnN0W2UsdF1vZiBEKWlmKHQ9PT1uKXtpPWU7YnJlYWt9aWYoIWkpdGhyb3cgbmV3IGM7ZyhcIkRlcmVnaXN0ZXJpbmcgZXZlbnQ6XCIsaSk7dHJ5e2F3YWl0IHQuZGlzcGF0Y2goZS5EZXJlZ2lzdGVyRXZlbnQsaSksRC5kZWxldGUoaSl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxVPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IEFjdGl2YXRlICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLkFjdGl2YXRlV29ya2Jvb2ssbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSx6PSh0LG4saSxyKT0+YXN5bmMoKT0+e2xldCBvO2coYFdvcmtib29rOiBBZGQgd29ya3NoZWV0ICgke259KWApO3RyeXtvPWF3YWl0IHQuZGlzcGF0Y2goZS5BZGRXb3Jrc2hlZXQsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIFModCxvLGkscil9LHE9KHQsbik9PmFzeW5jKCk9PntnKGBXb3JrYm9vazogQ2FsY3VsYXRlICgke259KWApO3RyeXthd2FpdCB0LmRpc3BhdGNoKGUuQ2FsY3VsYXRlV29ya2Jvb2ssbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxKPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IENsb3NlICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLkNsb3NlV29ya2Jvb2ssbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxLPShlLHQsbixpKT0+e2NvbnN0IG89e2V2ZW50VGFyZ2V0OnIuV29ya2Jvb2ssb2JqZWN0SWQ6dH07cmV0dXJue29iamVjdElkOnQsYWN0aXZhdGU6VShlLHQpLGFkZFdvcmtzaGVldDp6KGUsdCxuLGkpLGFkZEV2ZW50TGlzdGVuZXI6bihlLG8pLGNhbGN1bGF0ZTpxKGUsdCksY2xvc2U6SihlLHQpLGdldENhbGN1bGF0aW9uTW9kZTpZKGUsdCksZ2V0TmFtZTpRKGUsdCksZ2V0V29ya3NoZWV0QnlOYW1lOlooZSx0LG4saSksZ2V0V29ya3NoZWV0czpYKGUsdCxuLGkpLHJlbW92ZUV2ZW50TGlzdGVuZXI6aShlKSxzYXZlOmVlKGUsdCksc2F2ZUFzOnRlKGUsdCl9fSxZPSh0LG4pPT5hc3luYygpPT57ZyhcIldvcmtib29rOiBHZXQgY2FsY3VsYXRpb24gbW9kZVwiKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5HZXRDYWxjdWxhdGlvbk1vZGUsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSxRPSh0LG4pPT5hc3luYygpPT57ZyhgV29ya2Jvb2s6IEdldCBuYW1lICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtib29rTmFtZSxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LFo9KHQsbixpLHIpPT5hc3luYyBvPT57bGV0IHM7ZyhgV29ya2Jvb2s6IEdldCB3b3Jrc2hlZXQgYnkgbmFtZTogJHtvfSAoJHtufSlgKTt0cnl7aWYocz1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya3NoZWV0QnlOYW1lLHtvYmplY3RJZDpuLHdvcmtzaGVldE5hbWU6b30pLG51bGw9PT1zKXJldHVybiBudWxsfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBTKHQscyxpLHIpfSxYPSh0LG4saSxyKT0+YXN5bmMoKT0+e2xldCBvO2coYFdvcmtib29rOiBHZXQgd29ya3NoZWV0cyAoJHtufSlgKTt0cnl7bz1hd2FpdCB0LmRpc3BhdGNoKGUuR2V0V29ya3NoZWV0cyxuKX1jYXRjaChlKXt0aHJvdyBuZXcgYX1yZXR1cm4gby5tYXAoKGU9PlModCxlLGkscikpKX0sZWU9KHQsbik9PmFzeW5jKCk9PntnKGBXb3JrYm9vazogU2F2ZSAoJHtufSlgKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5TYXZlV29ya2Jvb2ssbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fSx0ZT0odCxuKT0+YXN5bmMgaT0+e2coYFdvcmtib29rOiBTYXZlIGFzOyBmaWxlUGF0aDoke2l9ICgke259KWApO3RyeXtyZXR1cm4gYXdhaXQgdC5kaXNwYXRjaChlLlNhdmVXb3JrYm9va0FzLHtmaWxlUGF0aDppLG9iamVjdElkOm59KX1jYXRjaChlKXt0aHJvdyBuZXcgYX19LG5lPXQ9PmFzeW5jKCk9PntsZXQgbjtnKFwiQXBwbGljYXRpb246IENyZWF0ZSB3b3JrYm9va1wiKTt0cnl7bj1hd2FpdCB0LmRpc3BhdGNoKGUuQ3JlYXRlV29ya2Jvb2spfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBLKHQsbixWLEgpfSxpZT10PT5hc3luYyBuPT57bGV0IGk7ZyhgQXBwbGljYXRpb246IEdldCB3b3JrYm9vazsgaWQ6JHtufWApO3RyeXtpPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3JrYm9va0J5SWQsbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIEsodCxpLFYsSCl9LHJlPXQ9PmFzeW5jKCk9PntsZXQgbjtnKFwiQXBwbGljYXRpb246IEdldCB3b3JrYm9va3NcIik7dHJ5e249YXdhaXQgdC5kaXNwYXRjaChlLkdldFdvcmtib29rcyl9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9cmV0dXJuIG4ubWFwKChlPT5LKHQsZSxWLEgpKSl9LG9lPXQ9PmFzeW5jIG49PntnKGBBcHBsaWNhdGlvbjogR2V0IHdvcmtzaGVldDsgaWQ6JHtufWApO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goZS5HZXRXb3Jrc2hlZXRCeUlkLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBTKHQsbixWLEgpfSxzZT10PT5hc3luYyBuPT57bGV0IGk7ZyhgQXBwbGljYXRpb246IE9wZW4gd29ya2Jvb2s7IGZpbGVQYXRoOiR7bn1gKTt0cnl7aT1hd2FpdCB0LmRpc3BhdGNoKGUuT3Blbldvcmtib29rLG4pfWNhdGNoKGUpe3Rocm93IG5ldyBhfXJldHVybiBLKHQsaSxWLEgpfSxhZT10PT5hc3luYyhuPSEwKT0+e2coYEFwcGxpY2F0aW9uOiBRdWl0OyBkaXNwbGF5QWxlcnRzOiR7bn1gKTt0cnl7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goZS5RdWl0QXBwbGljYXRpb24sbil9Y2F0Y2goZSl7dGhyb3cgbmV3IGF9fTt2YXIgY2U7IWZ1bmN0aW9uKGUpe2VbZS5JbmZvPTFdPVwiSW5mb1wiLGVbZS5XYXJuPTJdPVwiV2FyblwiLGVbZS5FcnJvcj0zXT1cIkVycm9yXCJ9KGNlfHwoY2U9e30pKTtjb25zdCBkZT1cImV4Y2VsLWFkYXB0ZXJcIixoZT12KCk7bGV0IGxlLHVlO2NvbnN0IHBlPWFzeW5jKCk9Pnt0cnl7aWYoIWxlfHwhYXdhaXQoYXN5bmMgZT0+KGF3YWl0IG8uSC5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuZ2V0QWxsQ2hhbm5lbHMoKSkuc29tZSgodD0+dC5jaGFubmVsTmFtZT09PWUpKSkoaGUpKXthd2FpdChhc3luYygpPT57dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9KGF3YWl0IG8uSC5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldE1hbmlmZXN0KCkpLmFwcEFzc2V0cyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZmluZCgoZT0+ZS5hbGlhcz09PWRlKSk7aWYodClyZXR1cm4gdm9pZCBtKFwiRGV0ZWN0ZWQgYWRhcHRlciBwYWNrYWdlIGluIGFwcCBtYW5pZmVzdCBhcHBBc3NldHNcIix0KTtpZihhd2FpdCB5ZSgpKXJldHVybiB2b2lkIGcoXCJVc2luZyBleGlzdGluZyBhZGFwdGVyIHBhY2thZ2VcIik7Y29uc3Qgbj17YWxpYXM6ZGUsc3JjOlwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby9yZWxlYXNlL2ludGVncmF0aW9ucy9leGNlbC8xLjMuMC9PcGVuRmluLkV4Y2VsLnppcFwiLHRhcmdldDpcIk9wZW5GaW4uRXhjZWwuZXhlXCIsdmVyc2lvbjpsfTtnKFwiRG93bmxvYWRpbmcgYWRhcHRlciBwYWNrYWdlXCIsbik7dHJ5e2F3YWl0IG8uSC5TeXN0ZW0uZG93bmxvYWRBc3NldChuLCgoKT0+e30pKX1jYXRjaChlKXt0aHJvdyBmKFwiVW5hYmxlIHRvIGRvd25sb2FkIGFkYXB0ZXIgcGFja2FnZVwiKSxlfX0pKCk7Y29uc3QgZT1hd2FpdCBvLkguU3lzdGVtLmdldFJ1bnRpbWVJbmZvKCksdD1vLkguQXBwbGljYXRpb24ubWUudXVpZCxuPWUudmVyc2lvbixpPWUuc2VjdXJpdHlSZWFsbTtnKFwiSW5pdGlhbGl6aW5nIGFkYXB0ZXJcIix7YXBwSWQ6dCxjaGFubmVsTmFtZTpoZSxydW50aW1lVmVyc2lvbjpuLHNlY3VyaXR5UmVhbG06aX0pLGxlPWF3YWl0IG8uSC5TeXN0ZW0ubGF1bmNoRXh0ZXJuYWxQcm9jZXNzKHthbGlhczpkZSxhcmd1bWVudHM6YCR7dH0gJHtufSAke2l9ICR7aGV9YH0pLGcoYEFkYXB0ZXIgcnVubmluZyB3aXRoIHV1aWQgJHtsZS51dWlkfWApfWNvbnN0IGk9by5ILkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGhlLHtwYXlsb2FkOnt2ZXJzaW9uOmx9fSkscz1uZXcgUHJvbWlzZSgoZT0+e3NldFRpbWVvdXQoZSwyZTQpfSkpLnRoZW4oKCgpPT57dGhyb3cgbmV3IEVycm9yKFwiQ29ubmVjdGlvbiB0byBhZGFwdGVyIHRpbWVkIG91dFwiKX0pKTt1ZT1hd2FpdCBQcm9taXNlLnJhY2UoW2ksc10pLGcoYENvbm5lY3RlZCB0byBhZGFwdGVyIG9uIGNoYW5uZWwgJHtoZX1gKSx1ZS5yZWdpc3RlcihlLkxvZ01lc3NhZ2Usd2UpLHVlLnJlZ2lzdGVyKGUuRXZlbnRGaXJlZCwobj11ZSxlPT57Y29uc3R7ZXZlbnRSZWdpc3RyYXRpb25JZDppfT1lLG89RC5nZXQoaSk7aWYoIW8pdGhyb3cgbmV3IGMoYE5vIHJlZ2lzdGVyZWQgZXZlbnQgbGlzdGVuZXIgZm91bmQgZm9yIGlkOiAke2l9YCk7ZyhcIkV2ZW50IHBheWxvYWQgcmVjZWl2ZWRcIixlKSwoKGUsbixpKT0+e3ZhciBvLHM7c3dpdGNoKGkuZXZlbnRUYXJnZXQpe2Nhc2Ugci5Xb3JrYm9vazpzd2l0Y2gobnVsbD09PShvPWkuZXZlbnROYW1lKXx8dm9pZCAwPT09bz92b2lkIDA6by50b1VwcGVyQ2FzZSgpKXtjYXNlIHQuQWN0aXZhdGUudG9VcHBlckNhc2UoKTpjYXNlIHQuQ2xvc2UudG9VcHBlckNhc2UoKTpjYXNlIHQuRGVhY3RpdmF0ZS50b1VwcGVyQ2FzZSgpOnJldHVybiBlKCk7Y2FzZSB0LkFkZFdvcmtzaGVldC50b1VwcGVyQ2FzZSgpOmNhc2UgdC5EZWxldGVXb3Jrc2hlZXQudG9VcHBlckNhc2UoKTpyZXR1cm4gZShTKG4saS53b3Jrc2hlZXRPYmplY3RJZCxWLEgpKTtkZWZhdWx0OnRocm93IG5ldyBjKGBVbmV4cGVjdGVkIHdvcmtib29rIGV2ZW50OiAke2kuZXZlbnROYW1lfWApfWNhc2Ugci5Xb3Jrc2hlZXQ6c3dpdGNoKG51bGw9PT0ocz1pLmV2ZW50TmFtZSl8fHZvaWQgMD09PXM/dm9pZCAwOnMudG9VcHBlckNhc2UoKSl7Y2FzZSB0LkFjdGl2YXRlLnRvVXBwZXJDYXNlKCk6cmV0dXJuIGUoKTtjYXNlIHQuQ2hhbmdlLnRvVXBwZXJDYXNlKCk6cmV0dXJuIGUoaS5jaGFuZ2VkQ2VsbHMpO2Nhc2UgdC5EZWFjdGl2YXRlLnRvVXBwZXJDYXNlKCk6cmV0dXJuIGUoKTtkZWZhdWx0OnRocm93IG5ldyBjKGBVbmV4cGVjdGVkIHdvcmtzaGVldCBldmVudDogJHtpLmV2ZW50TmFtZX1gKX1kZWZhdWx0OnRocm93IG5ldyBjKGBVbmV4cGVjdGVkIGV2ZW50IHRhcmdldDogJHtpLmV2ZW50VGFyZ2V0fWApfX0pKG8sbixlKX0pKX1jYXRjaChlKXtjb25zdCB0PW5ldyBkKHZvaWQgMCxlKTt0aHJvdyBmKHQpLHR9dmFyIG47cmV0dXJue2FkYXB0ZXI6e2NoYW5uZWxOYW1lOmhlLHZlcnNpb246bH0sY3JlYXRlV29ya2Jvb2s6bmUodWUpLGdldFdvcmtib29rQnlJZDppZSh1ZSksZ2V0V29ya2Jvb2tzOnJlKHVlKSxnZXRXb3Jrc2hlZXRCeUlkOm9lKHVlKSxvcGVuV29ya2Jvb2s6c2UodWUpLHF1aXQ6YWUodWUpfX0sd2U9ZT0+e2NvbnN0e21lc3NhZ2U6dCx0eXBlOm59PWUsaT1cIlthZGFwdGVyXVwiO3N3aXRjaChuKXtjYXNlIGNlLkVycm9yOmYodCxpKTticmVhaztjYXNlIGNlLkluZm86ZyhpLHQpO2JyZWFrO2Nhc2UgY2UuV2FybjptKGksdCl9fSx5ZT1hc3luYygpPT57dHJ5e2NvbnN0IGU9YXdhaXQgby5ILlN5c3RlbS5nZXRBcHBBc3NldEluZm8oe2FsaWFzOmRlfSk7cmV0dXJuIGUmJmUudmVyc2lvbj09PWx9Y2F0Y2goZSl7cmV0dXJuITF9fTt2YXIgZmUsZ2UsbWUsdmUsQ2U7IWZ1bmN0aW9uKGUpe2UuQ29udGludW91cz1cIkNvbnRpbnVvdXNcIixlLkRhc2g9XCJEYXNoXCIsZS5EYXNoRG90PVwiRGFzaERvdFwiLGUuRGFzaERvdERvdD1cIkRhc2hEb3REb3RcIixlLkRvdD1cIkRvdFwiLGUuRG91YmxlPVwiRG91YmxlXCIsZS5TbGFudERhc2hEb3Q9XCJTbGFudERhc2hEb3RcIixlLk5vbmU9XCJOb25lXCJ9KGZlfHwoZmU9e30pKSxmdW5jdGlvbihlKXtlLkNlbnRlcj1cIkNlbnRlclwiLGUuQ2VudGVyQWNyb3NzU2VsZWN0aW9uPVwiQ2VudGVyQWNyb3NzU2VsZWN0aW9uXCIsZS5EaXN0cmlidXRlZD1cIkRpc3RyaWJ1dGVkXCIsZS5GaWxsPVwiRmlsbFwiLGUuR2VuZXJhbD1cIkdlbmVyYWxcIixlLkp1c3RpZnk9XCJKdXN0aWZ5XCIsZS5MZWZ0PVwiTGVmdFwiLGUuUmlnaHQ9XCJSaWdodFwifShnZXx8KGdlPXt9KSksZnVuY3Rpb24oZSl7ZS5BdXRvbWF0aWM9XCJBdXRvbWF0aWNcIixlLkNoZWNrZXI9XCJDaGVja2VyXCIsZS5Dcmlzc0Nyb3NzPVwiQ3Jpc3NDcm9zc1wiLGUuRG93bj1cIkRvd25cIixlLkdyYXkxNj1cIkdyYXkxNlwiLGUuR3JheTI1PVwiR3JheTI1XCIsZS5HcmF5NTA9XCJHcmF5NTBcIixlLkdyYXk3NT1cIkdyYXk3NVwiLGUuR3JheTg9XCJHcmF5OFwiLGUuR3JpZD1cIkdyaWRcIixlLkhvcml6b250YWw9XCJIb3Jpem9udGFsXCIsZS5MaWdodERvd249XCJMaWdodERvd25cIixlLkxpZ2h0SG9yaXpvbnRhbD1cIkxpZ2h0SG9yaXpvbnRhbFwiLGUuTGlnaHRVcD1cIkxpZ2h0VXBcIixlLkxpZ2h0VmVydGljYWw9XCJMaWdodFZlcnRpY2FsXCIsZS5MaW5lYXJHcmFkaWVudD1cIkxpbmVhckdyYWRpZW50XCIsZS5Ob25lPVwiTm9uZVwiLGUuUmVjdGFuZ3VsYXJHcmFkaWVudD1cIlJlY3Rhbmd1bGFyR3JhZGllbnRcIixlLlNlbWlHcmF5NzU9XCJTZW1pR3JheTc1XCIsZS5Tb2xpZD1cIlNvbGlkXCIsZS5VcD1cIlVwXCIsZS5WZXJ0aWNhbD1cIlZlcnRpY2FsXCJ9KG1lfHwobWU9e30pKSxmdW5jdGlvbihlKXtlLkJvdHRvbT1cIkJvdHRvbVwiLGUuQ2VudGVyPVwiQ2VudGVyXCIsZS5EaXN0cmlidXRlZD1cIkRpc3RyaWJ1dGVkXCIsZS5KdXN0aWZ5PVwiSnVzdGlmeVwiLGUuVG9wPVwiVG9wXCJ9KHZlfHwodmU9e30pKSxmdW5jdGlvbihlKXtlLkFuZD1cIkFuZFwiLGUuT3I9XCJPclwiLGUuVG9wMTBJdGVtcz1cIlRvcDEwSXRlbXNcIixlLkJvdHRvbTEwSXRlbXM9XCJCb3R0b20xMEl0ZW1zXCIsZS5Ub3AxMFBlcmNlbnQ9XCJUb3AxMFBlcmNlbnRcIixlLkJvdHRvbTEwUGVyY2VudD1cIkJvdHRvbTEwUGVyY2VudFwiLGUuRmlsdGVyVmFsdWVzPVwiRmlsdGVyVmFsdWVzXCJ9KENlfHwoQ2U9e30pKX0pKCk7dmFyIHI9aS5kcSxvPWkuTVMscz1pLnhRLGE9aS5zTyxjPWkuWnUsZD1pLkkzLGg9aS4kVSxsPWkuaTAsdT1pLmNYLHA9aS5fVyx3PWkuVSQseT1pLlU3LGY9aS5yZDtleHBvcnR7ciBhcyBBZGFwdGVyRXJyb3IsbyBhcyBBcGlFcnJvcixzIGFzIEV2ZW50RXJyb3IsYSBhcyBFeGNlbENlbGxCb3JkZXJMaW5lU3R5bGUsYyBhcyBFeGNlbENlbGxIb3Jpem9udGFsQWxpZ25tZW50LGQgYXMgRXhjZWxDZWxsUGF0dGVybixoIGFzIEV4Y2VsQ2VsbFZlcnRpY2FsQWxpZ25tZW50LGwgYXMgRXhjZWxGaWx0ZXJPcGVyYXRvcix1IGFzIEluaXRpYWxpemF0aW9uRXJyb3IscCBhcyBQYXJhbWV0ZXJFcnJvcix3IGFzIGRpc2FibGVMb2dnaW5nLHkgYXMgZW5hYmxlTG9nZ2luZyxmIGFzIGdldEV4Y2VsQXBwbGljYXRpb259OyIsIigoKT0+e1widXNlIHN0cmljdFwiO3ZhciBlPXszMTMzOihlLHQsbik9PntuLnIodCksbi5kKHQse0NMSUFjdGlvbjooKT0+emUuUHQsQ0xJRmlsdGVyT3B0aW9uVHlwZTooKT0+emUuZWwsQ0xJVGVtcGxhdGU6KCk9PnplLnlXLGRlcmVnaXN0ZXI6KCk9PlllLGhpZGU6KCk9PnR0LHJlZ2lzdGVyOigpPT5RZSxzaG93OigpPT5ldH0pO3ZhciByPXt9O24ucihyKSxuLmQocix7c3Vic2NyaWJlOigpPT5vZX0pO3ZhciBvPXt9O24ucihvKSxuLmQobyx7Y3JlYXRlOigpPT5HZX0pO3ZhciBpPW4oNjUzMikscz1uKDc0MDUpO2NvbnN0IGE9XCJob21lXCI7dmFyIGM7IWZ1bmN0aW9uKGUpe2UuQ29tbWFuZHM9XCJob21lLWNvbW1hbmRzXCJ9KGN8fChjPXt9KSk7dmFyIGQsdT1uKDU4MDYpO24oNzU2NCk7IWZ1bmN0aW9uKGUpe2VbZS5Jbml0aWFsPTBdPVwiSW5pdGlhbFwiLGVbZS5PcGVuPTFdPVwiT3BlblwiLGVbZS5DbG9zZT0yXT1cIkNsb3NlXCJ9KGR8fChkPXt9KSk7Y29uc3QgZj1cImFsbFwiLGw9XCIwXCIscD1cIjVcIixnPVwiNlwiLHc9KCk9Pnt9O2Z1bmN0aW9uIGgoZSx0KXtyZXR1cm4gZT9gJHtlfS0ke3R9YDp0fWZ1bmN0aW9uIHkoZSl7cmV0dXJuYF9fc2VhcmNoLSR7ZX0tdG9waWNfX2B9Y29uc3Qgdj1uZXcgTWFwO2Z1bmN0aW9uIG0oZSx0KXt2LmhhcyhlKXx8di5zZXQoZSxuZXcgU2V0KSx2LmdldChlKS5hZGQodCl9ZnVuY3Rpb24gUyhlLHQpe2NvbnN0IG49di5nZXQoZSk7biYmbi5kZWxldGUodCl9Y29uc3QgQz1uZXcgTWFwO2Z1bmN0aW9uIFAoZSx0KXtDLmhhcyhlKXx8Qy5zZXQoZSxuZXcgU2V0KSxDLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gUihlLHQpe2NvbnN0IG49Qy5nZXQoZSk7biYmbi5kZWxldGUodCl9Y29uc3QgYj1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIFQoZSx0KXtiLmhhcyhlKXx8Yi5zZXQoZSxuZXcgTWFwKSxiLmdldChlKS5zZXQodC5pZCx0KTtjb25zdCBuPXYuZ2V0KGUpO2lmKCFuKXJldHVybjtjb25zdCByPVsuLi5uXS5tYXAoKGU9PmUoKSkpO2F3YWl0IFByb21pc2UuYWxsKHIpfWFzeW5jIGZ1bmN0aW9uIEkoZSx0KXtjb25zdCBuPWIuZ2V0KGUpO2lmKCFuKXJldHVybjtuLmRlbGV0ZSh0KTtjb25zdCByPUMuZ2V0KGUpO2lmKCFyKXJldHVybjtjb25zdCBvPVsuLi5yXS5tYXAoKGU9PmUoKSkpO2F3YWl0IFByb21pc2UuYWxsKG8pfWZ1bmN0aW9uIEwoZSl7cmV0dXJuIGIuZ2V0KGUpP1suLi5iLmdldChlKS52YWx1ZXMoKV06W119ZnVuY3Rpb24gayhlKXtjb25zdCB0PWIuZ2V0KGUpO3QmJnQuY2xlYXIoKX1mdW5jdGlvbiBNKGUsdCl7Y29uc3Qgbj1iLmdldChlKTtyZXR1cm4gbj9uLmdldCh0KTpudWxsfWZ1bmN0aW9uIEIoZSx0LG4pe3JldHVybnsuLi5lLGFjdGlvbjpufHxlLmFjdGlvbnNbMF0sZGlzcGF0Y2hlcklkZW50aXR5OnR9fWZ1bmN0aW9uIE8oZSx0LG49XCJhc2NlbmRpbmdcIil7Y29uc3Qgcj1lfHxbXTtpZighdD8ubGVuZ3RoKXJldHVybiByO2NvbnN0IG89W10saT1uZXcgTWFwO3QuZm9yRWFjaCgoZT0+e2lmKGUua2V5KXJldHVybiBpLnNldChlLmtleSxlKTtvLnB1c2goZSl9KSk7bGV0IHM9ci5tYXAoKGU9Pntjb25zdHtrZXk6dH09ZTtpZih0JiZpLmhhcyh0KSl7Y29uc3QgZT1pLmdldCh0KTtyZXR1cm4gaS5kZWxldGUodCksZX1yZXR1cm4gZX0pKTtyZXR1cm4gcy5wdXNoKC4uLmkudmFsdWVzKCksLi4ubykscz1cImFzY2VuZGluZ1wiPT09bj9zLnNvcnQoKChlLHQpPT4obnVsbCE9PWUuc2NvcmUmJnZvaWQgMCE9PWUuc2NvcmU/ZS5zY29yZToxLzApLShudWxsIT09dC5zY29yZSYmdm9pZCAwIT09dC5zY29yZT90LnNjb3JlOjEvMCkpKTpzLnNvcnQoKChlLHQpPT4obnVsbCE9PXQuc2NvcmUmJnZvaWQgMCE9PXQuc2NvcmU/dC5zY29yZToxLzApLShudWxsIT09ZS5zY29yZSYmdm9pZCAwIT09ZS5zY29yZT9lLnNjb3JlOjEvMCkpKSxzfWZ1bmN0aW9uIFcoZSl7Y29uc3QgdD17fTtsZXQgbj1bXTtsZXQgcj1bXTtsZXQgbz1kLkluaXRpYWw7dC5nZXRTdGF0dXM9KCk9Pm8sdC5nZXRSZXN1bHRCdWZmZXI9KCk9Pm4sdC5zZXRSZXN1bHRCdWZmZXI9ZT0+e249ZSxuPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5nZXRSZXZva2VkQnVmZmVyPSgpPT5yLHQuc2V0UmV2b2tlZEJ1ZmZlcj1lPT57cj1lLHI/Lmxlbmd0aCYmdC5vbkNoYW5nZSgpfSx0Lm9uQ2hhbmdlPXc7Y29uc3QgaT17fTtyZXR1cm4gdC5yZXM9aSxpLmNsb3NlPSgpPT57byE9PWQuQ2xvc2UmJihvPWQuQ2xvc2UsdC5vbkNoYW5nZSgpKX0saS5vcGVuPSgpPT57byE9PWQuT3BlbiYmKG89ZC5PcGVuLHQub25DaGFuZ2UoKSl9LGkucmVzcG9uZD1uPT57Y29uc3Qgcj1PKHQuZ2V0UmVzdWx0QnVmZmVyKCksbixlKTt0LnNldFJlc3VsdEJ1ZmZlcihyKX0saS5yZXZva2U9KC4uLmUpPT57Y29uc3Qgbj1uZXcgU2V0KGUpLHI9dC5nZXRSZXN1bHRCdWZmZXIoKS5maWx0ZXIoKCh7a2V5OmV9KT0+e2NvbnN0IHQ9bi5oYXMoZSk7cmV0dXJuIHQmJm4uZGVsZXRlKGUpLCF0fSkpO3Quc2V0UmVzdWx0QnVmZmVyKHIpLG4uc2l6ZSYmKHQuZ2V0UmV2b2tlZEJ1ZmZlcigpLmZvckVhY2goKGU9Pm4uYWRkKGUpKSksdC5zZXRSZXZva2VkQnVmZmVyKFsuLi5uXSkpfSx0fWZ1bmN0aW9uIEQoZSx0LG4pe2NvbnN0IHI9bmV3IFNldDtsZXQgbz0hMTtyZXR1cm57Y2xvc2U6KCk9PntvPSEwO2Zvcihjb25zdCBlIG9mIHIpZSgpfSxyZXE6e2lkOnQsdG9waWM6ZSwuLi5uLGNvbnRleHQ6bj8uY29udGV4dHx8e30sb25DbG9zZTplPT57ci5hZGQoZSksbyYmZSgpfSxyZW1vdmVMaXN0ZW5lcjplPT57ci5kZWxldGUoZSl9fX19ZnVuY3Rpb24geCgpe3JldHVybntuYW1lOmZpbi5tZS5uYW1lLHV1aWQ6ZmluLm1lLnV1aWR9fWZ1bmN0aW9uIEEoKXtsZXQgZTt0cnl7Y29uc3QgdD1maW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKTtpZighdD8uaWRlbnRpdHkpcmV0dXJuO2U9dC5pZGVudGl0eS51dWlkfWNhdGNoKGUpe31yZXR1cm4gZX1jb25zdCBFPVwiZGVyZWdpc3RlcmVkIG9yIGRvZXMgbm90IGV4aXN0XCIsRj1uZXcgRXJyb3IoYHByb3ZpZGVyICR7RX1gKSxfPW5ldyBFcnJvcihcInByb3ZpZGVyIHdpdGggbmFtZSBhbHJlYWR5IGV4aXN0c1wiKSwkPW5ldyBFcnJvcihcImJhZCBwYXlsb2FkXCIpLHE9bmV3IEVycm9yKFwic3Vic2NyaXB0aW9uIHJlamVjdGVkXCIpLEc9bmV3IEVycm9yKGBjaGFubmVsICR7RX1gKSxOPW5ldyBNYXA7ZnVuY3Rpb24gSChlKXtjb25zdCB0PVUoZSk7aWYodClyZXR1cm4gdDt0aHJvdyBHfWZ1bmN0aW9uIFUoZSl7Y29uc3QgdD1OLmdldChlKTtpZih0KXJldHVybiB0fWZ1bmN0aW9uIFYoZSx0KXtOLnNldChlLHQpfWNvbnN0IGo9bmV3IE1hcDtmdW5jdGlvbiBLKGUpe2ouaGFzKGUpfHxqLnNldChlLG5ldyBNYXApO2NvbnN0IHQ9ai5nZXQoZSk7cmV0dXJue2dldFJlcXVlc3RzRm9ySWRlbnRpdHk6ZT0+e2NvbnN0IG49ZnVuY3Rpb24oZSl7cmV0dXJuYCR7ZS51dWlkfToke2UubmFtZX1gfShlKTtyZXR1cm4gdC5oYXMobil8fHQuc2V0KG4sbmV3IE1hcCksdC5nZXQobil9fX1hc3luYyBmdW5jdGlvbiBYKGUsdCl7cmV0dXJuKGF3YWl0IEgoZSkpLmRpc3BhdGNoKGwsdCl9ZnVuY3Rpb24gSih7bmFtZXNwYWNlZFRvcGljOmUsdG9waWM6dH0pe2NvbnN0IG49TS5iaW5kKG51bGwsZSkscj1LKGUpLG89WC5iaW5kKG51bGwsZSk7cmV0dXJuIGFzeW5jKGUsaSk9PntpZighZXx8IWUuaWR8fCFlLnByb3ZpZGVySWQpe2NvbnN0IGU9JDtyZXR1cm57ZXJyb3I6ZS5tZXNzYWdlfX1jb25zdHtpZDpzLHByb3ZpZGVySWQ6YX09ZSxjPW4oYSk7aWYoIWMpe2NvbnN0IGU9RjtyZXR1cm57ZXJyb3I6ZS5tZXNzYWdlfX1jb25zdCBkPXIuZ2V0UmVxdWVzdHNGb3JJZGVudGl0eShpKTtsZXQgdT1kLmdldChlLmlkKTt1fHwodT1EKHQscyxlKSxkLnNldChlLmlkLHUpKTtjb25zdCBmPVcoKSxsPSgpPT57Y29uc3QgZT1mLmdldFJlc3VsdEJ1ZmZlcigpO2Yuc2V0UmVzdWx0QnVmZmVyKFtdKTtjb25zdCB0PWYuZ2V0UmV2b2tlZEJ1ZmZlcigpO2Yuc2V0UmV2b2tlZEJ1ZmZlcihbXSk7Y29uc3Qgbj1mLmdldFN0YXR1cygpO28oe2lkOnMscHJvdmlkZXJJZDphLHJlc3VsdHM6ZSxyZXZva2VkOnQsc3RhdHVzOm59KX07bGV0IHA9ITAsZz0hMTtmLm9uQ2hhbmdlPSgpPT57aWYocClyZXR1cm4gcD0hMSx2b2lkIGwoKTtnfHwoZz0hMCxzZXRUaW1lb3V0KCgoKT0+e2c9ITEsbCgpfSksMTAwKSl9O3RyeXtjb25zdHtyZXN1bHRzOmUsY29udGV4dDp0fT1hd2FpdCBjLm9uVXNlcklucHV0KHUucmVxLGYucmVzKSxuPWYuZ2V0U3RhdHVzKCk7cmV0dXJue2lkOnMscHJvdmlkZXJJZDphLHN0YXR1czpuLHJlc3VsdHM6ZSxjb250ZXh0OnR9fWNhdGNoKGUpe3JldHVybntpZDpzLHByb3ZpZGVySWQ6YSxlcnJvcjplLm1lc3NhZ2V9fX19YXN5bmMgZnVuY3Rpb24gWihlLHQsbil7Y29uc3Qgcj1ufHxhd2FpdCBIKGUpLG89eCgpLGk9e2lkZW50aXR5Om8sLi4udCxvblVzZXJJbnB1dDp2b2lkIDAsb25SZXN1bHREaXNwYXRjaDp2b2lkIDB9O2F3YWl0IHIuZGlzcGF0Y2goXCIyXCIsaSksYXdhaXQgVChlLHtpZGVudGl0eTpvLC4uLnR9KX1hc3luYyBmdW5jdGlvbiB6KGUsdCl7Y29uc3Qgbj1hd2FpdCBIKGUpO3JldHVybiBhd2FpdCBuLmRpc3BhdGNoKFwiM1wiLHQpLEkoZSx0KX1hc3luYyBmdW5jdGlvbiBRKGUsdCxuLHIpe2NvbnN0IG89QihuLHgoKSxyKSxpPU0oZSx0KTtpZihpKXtjb25zdHtvblJlc3VsdERpc3BhdGNoOmV9PWk7aWYoIWUpcmV0dXJuO3JldHVybiBlKG8pfWNvbnN0IHM9e3Byb3ZpZGVySWQ6dCxyZXN1bHQ6b307cmV0dXJuKGF3YWl0IEgoZSkpLmRpc3BhdGNoKHAscyl9YXN5bmMgZnVuY3Rpb24gWShlLHQpe2NvbnN0IG49ey4uLnQsY29udGV4dDp0Py5jb250ZXh0fHx7fX0scj17fSxvPWFzeW5jIGZ1bmN0aW9uKihlLHQse3NldFN0YXRlOm59KXtjb25zdCByPWF3YWl0IEgoZSk7Zm9yKDs7KXtjb25zdCBlPWF3YWl0IHIuZGlzcGF0Y2goXCIxXCIsdCksbz1lLmVycm9yO2lmKG8pdGhyb3cgbmV3IEVycm9yKG8pO2NvbnN0IGk9ZTtpZih0LmlkPWkuaWQsbihpLnN0YXRlKSxpLmRvbmUpcmV0dXJuIGkudmFsdWU7eWllbGQgaS52YWx1ZX19KGUsbix7c2V0U3RhdGU6ZT0+e3Iuc3RhdGU9ZX19KTtsZXQgaT1hd2FpdCBvLm5leHQoKTtyZXR1cm4gci5pZD1uLmlkLHIuY2xvc2U9KCk9PnshYXN5bmMgZnVuY3Rpb24oZSx0KXsoYXdhaXQgSChlKSkuZGlzcGF0Y2goZyx7aWQ6dH0pfShlLHIuaWQpfSxyLm5leHQ9KCk9PntpZihpKXtjb25zdCBlPWk7cmV0dXJuIGk9dm9pZCAwLGV9cmV0dXJuIG8ubmV4dCgpfSxyfWFzeW5jIGZ1bmN0aW9uIGVlKGUpe3JldHVybihhd2FpdCBIKGUpKS5kaXNwYXRjaChcIjRcIixudWxsKX1hc3luYyBmdW5jdGlvbiB0ZShlKXtjb25zdCB0PWF3YWl0IEgoZSk7dmFyIG47bj1lLE4uZGVsZXRlKG4pLGsoZSksYXdhaXQgdC5kaXNjb25uZWN0KCl9ZnVuY3Rpb24gbmUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1LKHQpO3JldHVybiBhc3luYyByPT57aWYoIVUodCkpcmV0dXJuO2NvbnN0IG89bi5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KHIpO2Zvcihjb25zdHtyZXE6ZSxjbG9zZTp0fW9mIG8udmFsdWVzKCkpdCgpLG8uZGVsZXRlKGUuaWQpO1YodCwoYXN5bmMgZT0+e2NvbnN0e25hbWVzcGFjZWRUb3BpYzp0fT1lLG49YXdhaXQgcmUoZSk7Zm9yKGNvbnN0IGUgb2YgTCh0KSlhd2FpdCBaKHQsZSxuKTtyZXR1cm4gbn0pKGUpKX19YXN5bmMgZnVuY3Rpb24gcmUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj15KHQpLHI9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7Zm9yKGxldCB0PTA7dDw1MDt0KyspdHJ5e3JldHVybiBhd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSx7d2FpdDohMX0pfWNhdGNoKGUpe2lmKDQ5PT09dCl0aHJvdyBlO2F3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsMWUzKSkpfX0obik7cmV0dXJuIHIucmVnaXN0ZXIobCxKKGUpKSxyLnJlZ2lzdGVyKGcsZnVuY3Rpb24oZSl7Y29uc3QgdD1LKGUpO3JldHVybihlLG4pPT57Y29uc3Qgcj10LmdldFJlcXVlc3RzRm9ySWRlbnRpdHkobiksbz1yLmdldChlLmlkKTtvJiYoby5jbG9zZSgpLHIuZGVsZXRlKGUuaWQpKX19KHQpKSxyLnJlZ2lzdGVyKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCByPU0oZSx0LnByb3ZpZGVySWQpO2lmKCFyKXJldHVybjtjb25zdHtvblJlc3VsdERpc3BhdGNoOm99PXI7cmV0dXJuIG8/KHQucmVzdWx0LmRpc3BhdGNoZXJJZGVudGl0eT1uLG8odC5yZXN1bHQpKTp2b2lkIDB9fSh0KSksci5vbkRpc2Nvbm5lY3Rpb24obmUoZSkpLHJ9YXN5bmMgZnVuY3Rpb24gb2UoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fGYsbj0oXCJzdHJpbmdcIj09dHlwZW9mIGU/bnVsbDplPy51dWlkKXx8QSgpLHI9aChuLHQpLG89e3RvcGljOnQsbmFtZXNwYWNlOm4sbmFtZXNwYWNlZFRvcGljOnJ9O2xldCBpPVUocik7cmV0dXJuIGl8fChpPXJlKG8pLFYocixpKSxhd2FpdCBpKSx7Z2V0QWxsUHJvdmlkZXJzOmVlLmJpbmQobnVsbCxyKSxyZWdpc3RlcjpaLmJpbmQobnVsbCxyKSxzZWFyY2g6WS5iaW5kKG51bGwsciksZGVyZWdpc3Rlcjp6LmJpbmQobnVsbCxyKSxkaXNwYXRjaDpRLmJpbmQobnVsbCxyKSxkaXNjb25uZWN0OnRlLmJpbmQobnVsbCxyKX19Y29uc3QgaWU9bmV3IE1hcDtmdW5jdGlvbiBzZShlKXtjb25zdCB0PWFlKGUpO2lmKHQpcmV0dXJuIHQ7dGhyb3cgR31mdW5jdGlvbiBhZShlKXtjb25zdCB0PWllLmdldChlKTtpZih0KXJldHVybiB0fWNvbnN0IGNlPW5ldyBNYXA7ZnVuY3Rpb24gZGUoZSx0KXtjZS5oYXMoZSl8fGNlLnNldChlLG5ldyBTZXQpLGNlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gdWUoZSx0KXtjb25zdCBuPWNlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX12YXIgZmU9big1MzE2KTtmdW5jdGlvbiBsZShlKXtyZXR1cm5bLi4uTChlKV0ubWFwKChlPT4oey4uLmUsb25Vc2VySW5wdXQ6dm9pZCAwLG9uUmVzdWx0RGlzcGF0Y2g6dm9pZCAwfSkpKX1hc3luYyBmdW5jdGlvbiBwZShlLHQpe2lmKE0oZSx0LmlkKSl0aHJvdyBuZXcgRXJyb3IoXCJwcm92aWRlciB3aXRoIG5hbWUgYWxyZWFkeSBleGlzdHNcIik7Y29uc3Qgbj14KCk7YXdhaXQgVChlLHtpZGVudGl0eTpuLC4uLnR9KX1mdW5jdGlvbiBnZShlLHQpe0koZSx0KX1hc3luYyBmdW5jdGlvbiB3ZShlLHQsbixyKXtjb25zdCBvPU0oZSx0KTtpZighbyl0aHJvdyBGO2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6aX09bztpZighaSlyZXR1cm47cmV0dXJuIGkoQihuLHgoKSxyKSl9YXN5bmMgZnVuY3Rpb24qaGUoZSx0LG4pe2NvbnN0IHI9ZnVuY3Rpb24oZSx0KXtjb25zdCBuPVtdLHI9W10sbz1bXSxpPVtdO2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0IGU9VyhzLnNjb3JlT3JkZXIpLGE9e3Jlc3VsdHM6W10scHJvdmlkZXI6e2lkOnMuaWQsaWRlbnRpdHk6cy5pZGVudGl0eSx0aXRsZTpzLnRpdGxlLHNjb3JlT3JkZXI6cy5zY29yZU9yZGVyLGljb246cy5pY29ufX07bi5wdXNoKGEpLHIucHVzaChlKTtjb25zdCBjPShhc3luYygpPT57dHJ5e2NvbnN0e3Jlc3VsdHM6bixjb250ZXh0OnJ9PWF3YWl0IHMub25Vc2VySW5wdXQodCxlLnJlcyk7YS5yZXN1bHRzPU8oYS5yZXN1bHRzLG4pLGEuY29udGV4dD17Li4uYS5jb250ZXh0LC4uLnJ9fWNhdGNoKGUpe2EuZXJyb3I9ZX1jLmRvbmU9ITB9KSgpO2kucHVzaChjKSxvLnB1c2goby5sZW5ndGgpfXJldHVybntwcm92aWRlclJlc3BvbnNlczpuLGxpc3RlbmVyUmVzcG9uc2VzOnIsb3Blbkxpc3RlbmVyUmVzcG9uc2VzOm8saW5pdGlhbFJlc3BvbnNlUHJvbWlzZXM6aX19KHQudGFyZ2V0cz90LnRhcmdldHMubWFwKCh0PT5NKGUsdCkpKS5maWx0ZXIoKGU9PiEhZSkpOlsuLi5MKGUpLmZpbHRlcigoZT0+IWUuaGlkZGVuKSldLHQpLHtwcm92aWRlclJlc3BvbnNlczpvLGxpc3RlbmVyUmVzcG9uc2VzOml9PXI7bGV0e29wZW5MaXN0ZW5lclJlc3BvbnNlczpzLGluaXRpYWxSZXNwb25zZVByb21pc2VzOmF9PXIsYz1mZS5ELkZldGNoaW5nO2NvbnN0IHU9ZT0+e2M9ZSxuLnNldFN0YXRlKGMpfTtsZXQgZixsPSExO3Qub25DbG9zZSgoKCk9PntsPSEwLGYmJmYoKX0pKTtkb3tsZXQgZT0hMTtpZihhLmxlbmd0aCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgbiBvZiBhKW4uZG9uZT9lPSEwOnQucHVzaChuKTthPXQsYS5sZW5ndGh8fCh1KGZlLkQuRmV0Y2hlZCksZT0hMCl9bGV0IHQsbj0hMTtjb25zdCByPSgpPT57bj0hMCx0JiZ0KCl9LHA9W107Zm9yKGNvbnN0IHQgb2Ygcyl7Y29uc3Qgbj1pW3RdLHM9b1t0XSxhPW4uZ2V0U3RhdHVzKCk7KGE9PT1kLk9wZW58fGM9PT1mZS5ELkZldGNoaW5nJiZhPT09ZC5Jbml0aWFsKSYmKHAucHVzaCh0KSxuLm9uQ2hhbmdlPXIpO2NvbnN0IHU9bi5nZXRSZXN1bHRCdWZmZXIoKTt1Lmxlbmd0aCYmKG4uc2V0UmVzdWx0QnVmZmVyKFtdKSxzLnJlc3VsdHM9TyhzLnJlc3VsdHMsdSksZT0hMCk7Y29uc3QgZj1uLmdldFJldm9rZWRCdWZmZXIoKTtpZihmLmxlbmd0aCl7bi5zZXRSZXZva2VkQnVmZmVyKFtdKTtjb25zdCB0PW5ldyBTZXQoZik7cy5yZXN1bHRzPXMucmVzdWx0cy5maWx0ZXIoKCh7a2V5OmV9KT0+IXQuaGFzKGUpKSksZT0hMH19aWYocz1wLGUmJih5aWVsZCBvKSxsKWJyZWFrO258fChzLmxlbmd0aHx8YS5sZW5ndGgpJiZhd2FpdCBQcm9taXNlLnJhY2UoWy4uLmEsbmV3IFByb21pc2UoKGU9Pnt0PWV9KSksbmV3IFByb21pc2UoKGU9PntmPWV9KSldKX13aGlsZShzLmxlbmd0aHx8YS5sZW5ndGgpO3JldHVybiB1KGZlLkQuQ29tcGxldGUpLG99bGV0IHllPTA7ZnVuY3Rpb24gdmUoe25hbWVzcGFjZWRUb3BpYzplLHRvcGljOnR9LG4pe3llKz0xO2NvbnN0IHI9RCh0LHllLnRvU3RyaW5nKCksbiksbz1oZShlLHIucmVxLHtzZXRTdGF0ZTplPT57by5zdGF0ZT1lfX0pO3JldHVybiBvLmlkPXllLnRvU3RyaW5nKCksby5jbG9zZT1yLmNsb3NlLG8uc3RhdGU9ZmUuRC5GZXRjaGluZyxvfWNvbnN0IG1lPW5ldyBNYXA7ZnVuY3Rpb24gU2UoZSx0KXtyZXR1cm5gJHtlfToke3R9YH1mdW5jdGlvbiBDZShlKXtyZXR1cm4gYXN5bmModCwuLi5uKT0+e2lmKCF0KXJldHVybntlcnJvcjokLm1lc3NhZ2V9O2xldCByO2lmKHQuaWQpcj1TZShlLm5hbWVzcGFjZWRUb3BpYyx0LmlkKTtlbHNle2NvbnN0IG49dmUoZSx0KTtyPVNlKGUubmFtZXNwYWNlZFRvcGljLG4uaWQpLHQuaWQ9bi5pZCxtZS5zZXQocix7Z2VuZXJhdG9yOm59KX1jb25zdCBvPW1lLmdldChyKTtjbGVhclRpbWVvdXQoby50aW1lb3V0KTtjb25zdCBpPWF3YWl0IG8uZ2VuZXJhdG9yLm5leHQoKTtyZXR1cm4gby50aW1lb3V0PWZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dCgoKCk9PnttZS5kZWxldGUoZSl9KSwxZTQpfShyKSx7Li4uaSxpZDp0LmlkLHN0YXRlOm8uZ2VuZXJhdG9yLnN0YXRlfX19ZnVuY3Rpb24gUGUoZSx0LG4pe3JldHVybiBzZShlKS5kaXNwYXRjaCh0LGcse2lkOm59KX1mdW5jdGlvbiBSZShlKXtyZXR1cm4gdD0+ZnVuY3Rpb24oZSx0KXtjb25zdCBuPVNlKGUsdCkscj1tZS5nZXQobik7ciYmci5nZW5lcmF0b3IuY2xvc2UoKX0oZSx0LmlkKX1hc3luYyBmdW5jdGlvbiBiZShlLHQse2lkOm4scXVlcnk6cixjb250ZXh0Om8sdGFyZ2V0czppfSl7Y29uc3Qgcz1zZShlKSxhPXtpZDpuLHF1ZXJ5OnIsY29udGV4dDpvLHRhcmdldHM6aSxwcm92aWRlcklkOnQuaWR9LGM9YXdhaXQgcy5kaXNwYXRjaCh0LmlkZW50aXR5LGwsYSksZD1jLmVycm9yO2lmKGQpdGhyb3cgbmV3IEVycm9yKGQpO3JldHVybiBjfWNvbnN0IFRlPW5ldyBNYXA7ZnVuY3Rpb24gSWUoZSx0LG4pe3JldHVybmAke2V9OiR7dC5uYW1lfToke3QudXVpZH06JHtufWB9Y29uc3QgTGU9bmV3IE1hcDtmdW5jdGlvbiBrZShlLHQsbil7cmV0dXJuYCR7ZX06JHt0fToke259YH1mdW5jdGlvbiBNZShlLHQpe2NvbnN0IG49SWUuYmluZChudWxsLGUsdC5pZGVudGl0eSkscj1QZS5iaW5kKG51bGwsZSx0LmlkZW50aXR5KSxvPWJlLmJpbmQobnVsbCxlLHQpO3JldHVybiBhc3luYyhpLHMpPT57Y29uc3QgYT1uKGkuaWQpO2lmKCFUZS5oYXMoYSkpe2NvbnN0IGU9KCk9PntyKGkuaWQpLFRlLmRlbGV0ZShhKX07VGUuc2V0KGEsZSksaS5vbkNsb3NlKGUpfWNvbnN0IGM9a2UoZSx0LmlkLGkuaWQpLHU9KCk9PntMZS5kZWxldGUoYykscy5jbG9zZSgpfTtpLm9uQ2xvc2UodSksTGUuc2V0KGMsKGU9PntlLnJlc3VsdHM/Lmxlbmd0aCYmcy5yZXNwb25kKGUucmVzdWx0cyksZS5yZXZva2VkPy5sZW5ndGgmJnMucmV2b2tlKC4uLmUucmV2b2tlZCksZS5zdGF0dXM9PT1kLk9wZW4mJnMub3BlbigpLGUuc3RhdHVzPT09ZC5DbG9zZSYmdSgpfSkpO2NvbnN0IGY9YXdhaXQgbyhpKTtyZXR1cm4gZi5zdGF0dXM9PT1kLk9wZW4mJnMub3BlbigpLGYuc3RhdHVzIT09ZC5DbG9zZSYmZi5zdGF0dXMhPT1kLkluaXRpYWx8fHUoKSxmfX1mdW5jdGlvbiBCZShlLHQpe3JldHVybiBhc3luYyBuPT57Y29uc3Qgcj1zZShlKSxvPXtwcm92aWRlcklkOnQuaWQscmVzdWx0Om59O3JldHVybiByLmRpc3BhdGNoKHQuaWRlbnRpdHkscCxvKX19Y29uc3QgT2U9bmV3IE1hcDtmdW5jdGlvbiBXZShlLHQpe3JldHVybmAke2V9LSR7dC5uYW1lfS0ke3QudXVpZH1gfWZ1bmN0aW9uIERlKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LmlkKXJldHVybiB2b2lkIG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeSh0KSk7aWYoTShlLHQuaWQpKXRocm93IF87dC5pZGVudGl0eT1uLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1XZShlLHQuaWRlbnRpdHkpO09lLmhhcyhuKXx8T2Uuc2V0KG4sW10pLE9lLmdldChuKS5wdXNoKHQuaWQpLGF3YWl0IFQoZSx7Li4udCxvblVzZXJJbnB1dDpNZShlLHQpLG9uUmVzdWx0RGlzcGF0Y2g6QmUoZSx0KX0pfShlLHQpfX1mdW5jdGlvbiB4ZShlKXtyZXR1cm4gdD0+e3QmJmZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1NKGUsdCk7aWYoIW4pcmV0dXJuO2NvbnN0IHI9V2UoZSxuLmlkZW50aXR5KSxvPU9lLmdldChyKTtpZihvKXtjb25zdCBuPW8uZmluZEluZGV4KChlPT5lPT09dCkpOy0xIT09biYmKG8uc3BsaWNlKG4sMSksSShlLHQpKX19KGUsdCl9fWNvbnN0IEFlPW5ldyBNYXA7ZnVuY3Rpb24gRWUoZSx0KXtBZS5oYXMoZSl8fEFlLnNldChlLG5ldyBTZXQpLEFlLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gRmUoZSx0KXtjb25zdCBuPUFlLmdldChlKTtuJiZuLmRlbGV0ZSh0KX1mdW5jdGlvbiBfZShlKXtyZXR1cm4gYXN5bmMgdD0+eyFmdW5jdGlvbihlLHQpe2NvbnN0IG49V2UoZSx0KSxyPU9lLmdldChuKTtpZihyKXtmb3IoY29uc3QgdCBvZiByKUkoZSx0KTtPZS5kZWxldGUobil9fShlLHQpO2NvbnN0IG49QWUuZ2V0KGUpO24mJm4uZm9yRWFjaCgoZT0+ZSh0KSkpfX1hc3luYyBmdW5jdGlvbiAkZShlKXtjb25zdHtuYW1lc3BhY2VkVG9waWM6dH09ZSxuPXkoZS5uYW1lc3BhY2VkVG9waWMpLHI9YXdhaXQobz1uLGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY3JlYXRlKG8pKTt2YXIgbztyZXR1cm4gci5vbkNvbm5lY3Rpb24oZnVuY3Rpb24oe25hbWVzcGFjZWRUb3BpYzplfSl7cmV0dXJuIGFzeW5jIHQ9Pntjb25zdCBuPWNlLmdldChlKTtpZihuKWZvcihjb25zdCBlIG9mIG4paWYoIWF3YWl0IGUodCkpdGhyb3cgcX19KGUpKSxyLm9uRGlzY29ubmVjdGlvbihfZSh0KSksci5yZWdpc3RlcihnLFJlKHQpKSxyLnJlZ2lzdGVyKGwsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9Pntjb25zdCBuPWtlKGUsdC5wcm92aWRlcklkLHQuaWQpLHI9TGUuZ2V0KG4pO3ImJnIodCl9fSh0KSksci5yZWdpc3RlcihcIjJcIixEZSh0KSksci5yZWdpc3RlcihcIjNcIix4ZSh0KSksci5yZWdpc3RlcihcIjRcIixmdW5jdGlvbihlKXtyZXR1cm4gYXN5bmMoKT0+bGUoZSl9KHQpKSxyLnJlZ2lzdGVyKFwiMVwiLENlKGUpKSxyLnJlZ2lzdGVyKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKHQsbik9PntpZighdHx8IXQucHJvdmlkZXJJZHx8IXQucmVzdWx0KXJldHVybjtjb25zdCByPU0oZSx0LnByb3ZpZGVySWQpO2lmKCFyKXRocm93IEY7Y29uc3R7b25SZXN1bHREaXNwYXRjaDpvfT1yO3JldHVybiBvPyh0LnJlc3VsdC5kaXNwYXRjaGVySWRlbnRpdHk9bixvKHQucmVzdWx0KSk6dm9pZCAwfX0odCkpLHJ9YXN5bmMgZnVuY3Rpb24gcWUoZSl7Y29uc3QgdD1zZShlKTt2YXIgbjtuPWUsaWUuZGVsZXRlKG4pLGF3YWl0IHQuZGVzdHJveSgpLGsoZSl9YXN5bmMgZnVuY3Rpb24gR2UoZSl7Y29uc3QgdD0oXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplPy50b3BpYyl8fGYsbj1BKCkscj1oKG4sdCksbz17dG9waWM6dCxuYW1lc3BhY2U6bixuYW1lc3BhY2VkVG9waWM6cn07bGV0IGk9YWUocik7aXx8KGk9YXdhaXQgJGUobyksZnVuY3Rpb24oZSx0KXtpZS5zZXQoZSx0KX0ocixpKSk7Y29uc3Qgcz11ZS5iaW5kKG51bGwsciksYT1GZS5iaW5kKG51bGwsciksYz1TLmJpbmQobnVsbCxyKSxkPVIuYmluZChudWxsLHIpO3JldHVybntnZXRBbGxQcm92aWRlcnM6bGUuYmluZChudWxsLHIpLHNlYXJjaDp2ZS5iaW5kKG51bGwsbykscmVnaXN0ZXI6cGUuYmluZChudWxsLHIpLGRlcmVnaXN0ZXI6Z2UuYmluZChudWxsLHIpLG9uU3Vic2NyaXB0aW9uOmRlLmJpbmQobnVsbCxyKSxvbkRpc2Nvbm5lY3Q6RWUuYmluZChudWxsLHIpLG9uUmVnaXN0ZXI6bS5iaW5kKG51bGwsciksb25EZXJlZ2lzdGVyOlAuYmluZChudWxsLHIpLGRpc3BhdGNoOndlLmJpbmQobnVsbCxvKSxkaXNjb25uZWN0OnFlLmJpbmQobnVsbCxyKSxyZW1vdmVMaXN0ZW5lcjplPT57cyhlKSxhKGUpLGMoZSksZChlKX19fWNvbnN0e2NyZWF0ZTpOZX09byx7c3Vic2NyaWJlOkhlfT1yLFVlPXtjcmVhdGU6TmUsc3Vic2NyaWJlOkhlLGRlZmF1bHRUb3BpYzpcImFsbFwifSxWZT0oKT0+e2NvbnN0IGU9d2luZG93O2Uuc2VhcmNoPVVlLGUuZmluJiYoZS5maW4uU2VhcmNoPVVlKX0samU9ZT0+e2NvbnN0IHQ9KCk9PntWZSgpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl9O3JldHVybiB0fTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXtWZSgpO2NvbnN0IGU9XCJsb2FkXCIsdD1qZShlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihlLHQpO2NvbnN0IG49XCJET01Db250ZW50TG9hZGVkXCIscj1qZShuKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihuLHIpfWNvbnN0IEtlPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gWGUoKXthd2FpdCBhc3luYyBmdW5jdGlvbihlKXtLZS5zZXQoZSxhd2FpdCBIZSh7dG9waWM6ZSx1dWlkOnUucTkuV29ya3NwYWNlfSkpfShhKX1sZXQgSmU7YXN5bmMgZnVuY3Rpb24gWmUoZSl7cmV0dXJuIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7cmV0dXJuIEplfHwoSmU9WGUoKSksSmV9KCksS2UuZ2V0KGUpfXZhciB6ZT1uKDM3NTgpO2NvbnN0IFFlPWFzeW5jIGU9PntpZighZS5pY29uKXRocm93IG5ldyBFcnJvcihgJHtlLmlkfSBwcm92aWRlciBuZWVkcyB0byBoYXZlIGljb24gcHJvcGVydHkgZGVmaW5lZC5gKTthd2FpdCgwLHMuYUIpKCk7Y29uc3QgdD1hd2FpdCBaZShhKTt0cnl7Y29uc3Qgbj1hd2FpdCB0LnJlZ2lzdGVyKGUpO3JldHVybigwLGkuY2spKHthbGxvd2VkOiEwfSksbn1jYXRjaChlKXt0aHJvdygwLGkuY2spKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZS5tZXNzYWdlfSksZX19LFllPWFzeW5jIGU9Pnthd2FpdCgwLHMuYUIpKCk7cmV0dXJuKGF3YWl0IFplKGEpKS5kZXJlZ2lzdGVyKGUpfTthc3luYyBmdW5jdGlvbiBldCgpe3JldHVybihhd2FpdCgwLHMuWGwpKCkpLmRpc3BhdGNoKHMuTWwuU2hvd0hvbWUsdm9pZCAwKX1hc3luYyBmdW5jdGlvbiB0dCgpe3JldHVybihhd2FpdCgwLHMuWGwpKCkpLmRpc3BhdGNoKHMuTWwuSGlkZUhvbWUsdm9pZCAwKX19LDMyOTg6KGUsdCxuKT0+e24uZCh0LHt3OigpPT5yLnd9KTt2YXIgcj1uKDUzMTYpfSwzNzU4OihlLHQsbik9Pnt2YXIgcixvLGk7bi5kKHQse1B0OigpPT5yLHlXOigpPT5vLGVsOigpPT5pfSksZnVuY3Rpb24oZSl7ZS5TdWdnZXN0aW9uPVwic3VnZ2VzdGlvblwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuQ29udGFjdD1cIkNvbnRhY3RcIixlLkN1c3RvbT1cIkN1c3RvbVwiLGUuTGlzdD1cIkxpc3RcIixlLlBsYWluPVwiUGxhaW5cIixlLlNpbXBsZVRleHQ9XCJTaW1wbGVUZXh0XCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5NdWx0aVNlbGVjdD1cIk11bHRpU2VsZWN0XCJ9KGl8fChpPXt9KSl9LDc1NjQ6KGUsdCxuKT0+e24oMzI5OCksbigzNzU4KSxuKDYxMTQpLG4oMjEwOSl9LDYxMTQ6KGUsdCxuKT0+e3ZhciByLG87bi5kKHQse0w6KCk9PnIsVDooKT0+b30pLGZ1bmN0aW9uKGUpe2UuU25hcHNob3Q9XCJzbmFwc2hvdFwiLGUuTWFuaWZlc3Q9XCJtYW5pZmVzdFwiLGUuVmlldz1cInZpZXdcIixlLkV4dGVybmFsPVwiZXh0ZXJuYWxcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkxhbmRpbmdQYWdlPVwibGFuZGluZ1BhZ2VcIixlLkFwcEdyaWQ9XCJhcHBHcmlkXCJ9KG98fChvPXt9KSl9LDIxMDk6KGUsdCxuKT0+e24uZCh0LHtwNjooKT0+cixHbzooKT0+byxiSTooKT0+aSxaSjooKT0+c30pO2NvbnN0IHI9e0NvbnRhaW5lcjpcIkNvbnRhaW5lclwiLEJ1dHRvbjpcIkJ1dHRvblwifSxvPXtUZXh0OlwiVGV4dFwiLEltYWdlOlwiSW1hZ2VcIixMaXN0OlwiTGlzdFwifSxpPXsuLi5yLC4uLm99O3ZhciBzOyFmdW5jdGlvbihlKXtlLlByaW1hcnk9XCJwcmltYXJ5XCIsZS5TZWNvbmRhcnk9XCJzZWNvbmRhcnlcIixlLlRleHRPbmx5PVwidGV4dE9ubHlcIn0oc3x8KHM9e30pKX0sMzE3OihlLHQsbik9PntuLnIodCksbi5kKHQse0FwcE1hbmlmZXN0VHlwZTooKT0+aS5MLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+aS5ULGRlcmVnaXN0ZXI6KCk9PmYsaGlkZTooKT0+bCxyZWdpc3RlcjooKT0+dSxzaG93OigpPT5wfSk7dmFyIHI9big2NTMyKSxvPW4oNzQwNSk7big3NTY0KTt2YXIgaT1uKDYxMTQpO2xldCBzO2NvbnN0IGE9bmV3IE1hcCxjPWU9PntpZighYS5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IFByb3ZpZGVyIHdpdGggaWQgJHtlfSBpcyBub3QgcmVnaXN0ZXJlZGApO3JldHVybiBhLmdldChlKX0sZD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCgwLG8uWGwpKCk7aWYoYS5oYXMoZS5pZCkpdGhyb3cgbmV3IEVycm9yKGBTdG9yZWZyb250IHByb3ZpZGVyIHdpdGggaWQgJHtlLmlkfSBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtyZXR1cm4gYS5zZXQoZS5pZCxlKSwoZT0+e2UuaXNTdG9yZWZyb250QWN0aW9uc1JlZ2lzdGVyZWR8fChlLmlzU3RvcmVmcm9udEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIoby5NbC5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzLChlPT5jKGUpLmdldEFwcHMoKSkpLGUucmVnaXN0ZXIoby5NbC5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXIsKGU9PmMoZSkuZ2V0Rm9vdGVyKCkpKSxlLnJlZ2lzdGVyKG8uTWwuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2UsKGU9PmMoZSkuZ2V0TGFuZGluZ1BhZ2UoKSkpLGUucmVnaXN0ZXIoby5NbC5HZXRTdG9yZWZyb250UHJvdmlkZXJOYXZpZ2F0aW9uLChlPT5jKGUpLmdldE5hdmlnYXRpb24oKSkpLGUucmVnaXN0ZXIoby5NbC5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHAsKCh7aWQ6ZSxhcHA6dH0pPT5jKGUpLmxhdW5jaEFwcCh0KSkpKX0pKHQpLHQuZGlzcGF0Y2goby5NbC5SZWdpc3RlclN0b3JlZnJvbnRQcm92aWRlcixlKX0sdT1lPT4ocz1kKGUpLCgwLHIuZDkpKHthbGxvd2VkOiEwfSkscyksZj1hc3luYyBlPT57YXdhaXQgcyxhLmRlbGV0ZShlKTtyZXR1cm4oYXdhaXQoMCxvLlhsKSgpKS5kaXNwYXRjaChvLk1sLkRlcmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXIsZSl9LGw9YXN5bmMoKT0+e2F3YWl0IHMsYXdhaXQoMCxvLmFCKSgpLGF3YWl0KGFzeW5jKCk9Pihhd2FpdCgwLG8uRG0pKCkpLmRpc3BhdGNoKG8uTWwuSGlkZVN0b3JlZnJvbnQsdm9pZCAwKSkoKX0scD1hc3luYygpPT57YXdhaXQgcyxhd2FpdCgwLG8uYUIpKCksYXdhaXQoYXN5bmMoKT0+KGF3YWl0KDAsby5EbSkoKSkuZGlzcGF0Y2goby5NbC5TaG93U3RvcmVmcm9udCxudWxsKSkoKX19LDc0MDU6KGUsdCxuKT0+e24uZCh0LHtNbDooKT0+cyxEbTooKT0+YSxYbDooKT0+ZixhQjooKT0+dX0pO3ZhciByPW4oNjY3OCk7Y29uc3Qgbz1yLkF4JiZcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZuZXcgUHJvbWlzZSgoZT0+ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwoKCk9PntcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZlKCl9KSkpKTt2YXIgaT1uKDEyMSk7dmFyIHM7IWZ1bmN0aW9uKGUpe2UuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5EZXJlZ2lzdGVyU3RvcmVmcm9udFByb3ZpZGVyPVwiZGVyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJzPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXJzXCIsZS5IaWRlU3RvcmVmcm9udD1cImhpZGUtc3RvcmVmcm9udFwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyQXBwcz1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcHNcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckxhbmRpbmdQYWdlPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbGFuZGluZy1wYWdlXCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJGb290ZXI9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1mb290ZXJcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlck5hdmlnYXRpb249XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1uYXZpZ2F0aW9uXCIsZS5MYXVuY2hTdG9yZWZyb250UHJvdmlkZXJBcHA9XCJsYXVuY2gtc3RvcmVmcm9udC1wcm92aWRlci1hcHBcIixlLlNob3dTdG9yZWZyb250PVwic2hvdy1zdG9yZWZyb250XCIsZS5DcmVhdGVTdG9yZWZyb250V2luZG93PVwiY3JlYXRlLXN0b3JlZnJvbnQtd2luZG93XCIsZS5TaG93SG9tZT1cInNob3ctaG9tZVwiLGUuSGlkZUhvbWU9XCJoaWRlLWhvbWVcIixlLkFzc2lnbkhvbWVTZWFyY2hDb250ZXh0PVwiYXNzaWduLWhvbWUtc2VhcmNoLWNvbnRleHRcIixlLkdldExlZ2FjeVBhZ2VzPVwiZ2V0LWxlZ2FjeS1wYWdlc1wiLGUuR2V0TGVnYWN5V29ya3NwYWNlcz1cImdldC1sZWdhY3ktd29ya3NwYWNlc1wiLGUuR2V0Q29tcHV0ZWRQbGF0Zm9ybVRoZW1lPVwiZ2V0LWNvbXB1dGVkLXBsYXRmb3JtLXRoZW1lXCJ9KHN8fChzPXt9KSk7Y29uc3QgYT1mdW5jdGlvbihlKXtsZXQgdDtyZXR1cm4oKT0+e2lmKCFyLnNTKXRocm93IG5ldyBFcnJvcihcImdldENoYW5uZWxDbGllbnQgY2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiB0fHwodD0oYXN5bmMoKT0+e2F3YWl0IG87Y29uc3Qgbj1hd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoZSk7cmV0dXJuIG4ub25EaXNjb25uZWN0aW9uKChhc3luYygpPT57dD12b2lkIDB9KSksbn0pKCkudGhlbigoZT0+ZSkpLmNhdGNoKChuPT57dGhyb3cgdD12b2lkIDAsbmV3IEVycm9yKGBmYWlsZWQgdG8gY29ubmVjdCB0byBjaGFubmVsIHByb3ZpZGVyICR7ZX06ICR7bn1gKX0pKSksdH19KFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKSxjPVwiaXNMYXVuY2hlZFZpYUxpYlwiLGQ9ZT0+e2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4gdC5zZWFyY2hQYXJhbXMuYXBwZW5kKGMsXCJ0cnVlXCIpLHQudG9TdHJpbmcoKX0sdT1hc3luYygpPT57aWYoIWF3YWl0KDAsaS5KVikoaS5pVykpcmV0dXJuKHIuWkt8fC0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luXCIpKSYmYXdhaXQgZmluLkFwcGxpY2F0aW9uLnN0YXJ0RnJvbU1hbmlmZXN0KGQoci5hVykpLGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGQoci5HWCkpfSxmPWFzeW5jKCk9Pihhd2FpdCB1KCksYSgpKX0sNTgwNjooZSx0LG4pPT57bi5kKHQse3E5OigpPT5yfSk7dmFyIHIsbyxpLHM9big2Njc4KTshZnVuY3Rpb24oZSl7ZS5Xb3Jrc3BhY2U9XCJvcGVuZmluLWJyb3dzZXJcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLlJ1blJlcXVlc3RlZD1cInJ1bi1yZXF1ZXN0ZWRcIixlLldpbmRvd09wdGlvbnNDaGFuZ2VkPVwid2luZG93LW9wdGlvbnMtY2hhbmdlZFwiLGUuV2luZG93Q2xvc2VkPVwid2luZG93LWNsb3NlZFwiLGUuV2luZG93Q3JlYXRlZD1cIndpbmRvdy1jcmVhdGVkXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5GaW5Qcm90b2NvbD1cImZpbi1wcm90b2NvbFwifShpfHwoaT17fSkpO3MuQUIscy5BQixyLldvcmtzcGFjZSxyLldvcmtzcGFjZX0sNjY3ODooZSx0LG4pPT57dmFyIHI7bi5kKHQse3NTOigpPT5vLEF4OigpPT5pLEFCOigpPT5hLG9DOigpPT5jLFpLOigpPT5kLEdYOigpPT51LGFXOigpPT5mLHUwOigpPT5wfSksZnVuY3Rpb24oZSl7ZS5Mb2NhbD1cImxvY2FsXCIsZS5EZXY9XCJkZXZcIixlLlN0YWdpbmc9XCJzdGFnaW5nXCIsZS5Qcm9kPVwicHJvZFwifShyfHwocj17fSkpO2NvbnN0IG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbixpPShcInVuZGVmaW5lZFwiPT10eXBlb2YgcHJvY2Vzc3x8cHJvY2Vzcy5lbnY/LkpFU1RfV09SS0VSX0lELFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpLHM9aT93aW5kb3cub3JpZ2luOnIuTG9jYWwsYT1vJiZmaW4ubWUudXVpZCxjPW8mJmZpbi5tZS5uYW1lLGQ9KG8mJmZpbi5tZS5lbnRpdHlUeXBlLFwicHJvZFwiPT09ci5Mb2NhbCksdT0oci5EZXYsci5TdGFnaW5nLHIuUHJvZCxcImZpbnM6Ly9zeXN0ZW0tYXBwcy93b3Jrc3BhY2VcIiksZj1cImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzcuMy4xMC9hcHAuanNvblwiLGw9ZT0+ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik/ZTpzK2UscD0obChcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzcuMy4xMFwiKSxsKFwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby93b3Jrc3BhY2UvNy4zLjEwXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwmJmwoV09SS1NQQUNFX0RPQ1NfUExBVEZPUk1fVVJMKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgV09SS1NQQUNFX0RPQ1NfQ0xJRU5UX1VSTCYmbChXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMKSxcIjcuMy4xMFwiKX0sNjUzMjooZSx0LG4pPT57bi5kKHQse2NrOigpPT5hLGQ5OigpPT5jfSk7dmFyIHIsbz1uKDY2NzgpLGk9bigxMjEpOyFmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJCcm93c2VyXCIsZS5Ib21lPVwiSG9tZVwiLGUuTm90aWZpY2F0aW9uPVwiTm90aWZpY2F0aW9uXCIsZS5TdG9yZWZyb250PVwiU3RvcmVmcm9udFwiLGUuUGxhdGZvcm09XCJQbGF0Zm9ybVwiLGUuVGhlbWluZz1cIlRoZW1pbmdcIn0ocnx8KHI9e30pKTtjb25zdCBzPWFzeW5jKGUsdCk9Pntjb25zdCBuPXthcGlWZXJzaW9uOnQuYXBpVmVyc2lvbnx8by51MCxjb21wb25lbnROYW1lOmUsY29tcG9uZW50VmVyc2lvbjpvLnUwLC4uLnR9O2Zpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTpcIndvcmtzcGFjZS1saWNlbnNpbmdcIixkYXRhOm59KX0sYT1hc3luYyBlPT57aS5PSS51dWlkPT09aS5HaS51dWlkJiZpLk9JLm5hbWU9PT1pLkdpLm5hbWV8fHMoci5Ib21lLGUpfSxjPWFzeW5jIGU9PntzKHIuU3RvcmVmcm9udCxlKX19LDEyMTooZSx0LG4pPT57bi5kKHQse0dpOigpPT5jLE9JOigpPT5kLGlXOigpPT51LEpWOigpPT5mfSk7dmFyIHIsbyxpPW4oNTgwNikscz1uKDY2NzgpOyFmdW5jdGlvbihlKXtlLkhvbWU9XCJvcGVuZmluLWhvbWVcIixlLkRvY2s9XCJvcGVuZmluLWRvY2tcIixlLlN0b3JlZnJvbnQ9XCJvcGVuZmluLXN0b3JlZnJvbnRcIixlLkhvbWVJbnRlcm5hbD1cIm9wZW5maW4taG9tZS1pbnRlcm5hbFwiLGUuQnJvd3Nlck1lbnU9XCJvcGVuZmluLWJyb3dzZXItbWVudVwiLGUuQnJvd3NlckluZGljYXRvcj1cIm9wZW5maW4tYnJvd3Nlci1pbmRpY2F0b3JcIixlLkJyb3dzZXJXaW5kb3c9XCJpbnRlcm5hbC1nZW5lcmF0ZWQtd2luZG93XCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5TaG93bj1cInNob3duXCIsZS5Cb3VuZHNDaGFuZ2VkPVwiYm91bmRzLWNoYW5nZWRcIixlLkxheW91dFJlYWR5PVwibGF5b3V0LXJlYWR5XCIsZS5FbmRVc2VyQm91bmRzQ2hhbmdpbmc9XCJlbmQtdXNlci1ib3VuZHMtY2hhbmdpbmdcIixlLkJsdXJyZWQ9XCJibHVycmVkXCIsZS5DbG9zZVJlcXVlc3RlZD1cImNsb3NlLXJlcXVlc3RlZFwiLGUuRm9jdXNlZD1cImZvY3VzZWRcIixlLlNob3dSZXF1ZXN0ZWQ9XCJzaG93LXJlcXVlc3RlZFwiLGUuVmlld0NyYXNoZWQ9XCJ2aWV3LWNyYXNoZWRcIixlLlZpZXdBdHRhY2hlZD1cInZpZXctYXR0YWNoZWRcIixlLlZpZXdEZXRhY2hlZD1cInZpZXctZGV0YWNoZWRcIixlLlZpZXdQYWdlVGl0bGVVcGRhdGVkPVwidmlldy1wYWdlLXRpdGxlLXVwZGF0ZWRcIixlLlZpZXdEZXN0cm95ZWQ9XCJ2aWV3LWRlc3Ryb3llZFwiLGUuT3B0aW9uc0NoYW5nZWQ9XCJvcHRpb25zLWNoYW5nZWRcIn0ob3x8KG89e30pKTtmdW5jdGlvbiBhKGUpe2lmKCFzLnNTKXRocm93IG5ldyBFcnJvcihcImdldE9GV2luZG93IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKGUpfWNvbnN0IGM9e25hbWU6cy5vQyx1dWlkOnMuQUJ9O2NvbnN0IGQ9e25hbWU6ci5Ib21lLHV1aWQ6aS5xOS5Xb3Jrc3BhY2V9LHU9KHIuRG9jayxpLnE5LldvcmtzcGFjZSxyLlN0b3JlZnJvbnQsaS5xOS5Xb3Jrc3BhY2Use25hbWU6aS5xOS5Xb3Jrc3BhY2UsdXVpZDppLnE5LldvcmtzcGFjZX0pO2NvbnN0IGY9ZT0+YShlKS5nZXRPcHRpb25zKCkudGhlbigoKCk9PiEwKSkuY2F0Y2goKCgpPT4hMSkpfSw1MzE2OihlLHQsbik9Pnt2YXIgcixvO24uZCh0LHtEOigpPT5yLHc6KCk9Pm99KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5BY3RpdmU9XCJhY3RpdmVcIixlLkRlZmF1bHQ9XCJkZWZhdWx0XCJ9KG98fChvPXt9KSl9fSx0PXt9O2Z1bmN0aW9uIG4ocil7dmFyIG89dFtyXTtpZih2b2lkIDAhPT1vKXJldHVybiBvLmV4cG9ydHM7dmFyIGk9dFtyXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbcl0oaSxpLmV4cG9ydHMsbiksaS5leHBvcnRzfW4uZD0oZSx0KT0+e2Zvcih2YXIgciBpbiB0KW4ubyh0LHIpJiYhbi5vKGUscikmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIse2VudW1lcmFibGU6ITAsZ2V0OnRbcl19KX0sbi5vPShlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSxuLnI9ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9O3ZhciByPXt9OygoKT0+e24ucihyKSxuLmQocix7QXBwTWFuaWZlc3RUeXBlOigpPT5wLkwsQnV0dG9uU3R5bGU6KCk9PmYuWkosQ0xJQWN0aW9uOigpPT5sLlB0LENMSUZpbHRlck9wdGlvblR5cGU6KCk9PmwuZWwsQ0xJVGVtcGxhdGU6KCk9PmwueVcsQ29udGFpbmVyVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5mLnA2LEhvbWU6KCk9Pm8sTGVnYWN5OigpPT5lLFByZXNlbnRhdGlvblRlbXBsYXRlRnJhZ21lbnROYW1lczooKT0+Zi5HbyxTZWFyY2hUYWdCYWNrZ3JvdW5kOigpPT51LncsU3RvcmVmcm9udDooKT0+ZCxTdG9yZWZyb250VGVtcGxhdGU6KCk9PnAuVCxUZW1wbGF0ZUZyYWdtZW50VHlwZXM6KCk9PmYuYkl9KTt2YXIgZT17fTtuLnIoZSksbi5kKGUse2dldFBhZ2VzOigpPT5hLGdldFdvcmtzcGFjZXM6KCk9PmN9KTt2YXIgdCxvPW4oMzEzMyk7big2Njc4KSxuKDEyMSk7IWZ1bmN0aW9uKGUpe2UuVGFiQ3JlYXRlZD1cInRhYi1jcmVhdGVkXCIsZS5Db250YWluZXJDcmVhdGVkPVwiY29udGFpbmVyLWNyZWF0ZWRcIixlLkNvbnRhaW5lclJlc2l6ZWQ9XCJjb250YWluZXItcmVzaXplZFwifSh0fHwodD17fSkpO25ldyBNYXA7dmFyIGk7IWZ1bmN0aW9uKGUpe2UuQ3VycmVudFdvcmtzcGFjZUlkPVwiY3VycmVudFdvcmtzcGFjZUlkXCIsZS5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJsYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLk1hY2hpbmVOYW1lPVwibWFjaGluZU5hbWVcIixlLk5ld1RhYlBhZ2VMYXlvdXQ9XCJOZXdUYWJQYWdlTGF5b3V0XCIsZS5OZXdUYWJQYWdlU29ydD1cIk5ld1RhYlBhZ2VTb3J0XCJ9KGl8fChpPXt9KSk7dmFyIHM9big3NDA1KTtjb25zdCBhPSgpPT5hc3luYyBmdW5jdGlvbigpe3JldHVybihhd2FpdCgwLHMuRG0pKCkpLmRpc3BhdGNoKHMuTWwuR2V0TGVnYWN5UGFnZXMsdm9pZCAwKX0oKSxjPSgpPT4oYXN5bmMoKT0+KGF3YWl0KDAscy5EbSkoKSkuZGlzcGF0Y2gocy5NbC5HZXRMZWdhY3lXb3Jrc3BhY2VzLHZvaWQgMCkpKCk7dmFyIGQ9bigzMTcpLHU9bigzMjk4KSxmPW4oMjEwOSksbD1uKDM3NTgpLHA9big2MTE0KX0pKCksbW9kdWxlLmV4cG9ydHM9cn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBDZWxsLCBlbmFibGVMb2dnaW5nLCBFeGNlbEFwcGxpY2F0aW9uLCBnZXRFeGNlbEFwcGxpY2F0aW9uIH0gZnJvbSBcIkBvcGVuZmluL2V4Y2VsXCI7XG5pbXBvcnQge1xuICBDTElUZW1wbGF0ZSxcbiAgdHlwZSBDTElEaXNwYXRjaGVkU2VhcmNoUmVzdWx0LFxuICB0eXBlIENMSUZpbHRlcixcbiAgdHlwZSBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlLFxuICB0eXBlIEhvbWVTZWFyY2hSZXNwb25zZSxcbiAgdHlwZSBIb21lU2VhcmNoUmVzdWx0XG59IGZyb20gXCJAb3BlbmZpbi93b3Jrc3BhY2VcIjtcbmltcG9ydCB7IEludGVyb3BDbGllbnQgfSBmcm9tIFwib3BlbmZpbi1hZGFwdGVyL3NyYy9hcGkvaW50ZXJvcFwiO1xuaW1wb3J0IHR5cGUgeyBJbnRlZ3JhdGlvbiwgSW50ZWdyYXRpb25NYW5hZ2VyLCBJbnRlZ3JhdGlvbk1vZHVsZSB9IGZyb20gXCIuLi8uLi9pbnRlZ3JhdGlvbnMtc2hhcGVzXCI7XG5pbXBvcnQgdHlwZSB7IEV4Y2VsQXNzZXRTZXR0aW5ncywgRXhjZWxTZXR0aW5ncywgRXhjZWxXb3Jrc2hlZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NoYXBlc1wiO1xuXG4vKipcbiAqIEltcGxlbWVudCB0aGUgaW50ZWdyYXRpb24gcHJvdmlkZXIgZm9yIEV4Y2VsLlxuICovXG5leHBvcnQgY2xhc3MgRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyIGltcGxlbWVudHMgSW50ZWdyYXRpb25Nb2R1bGU8RXhjZWxTZXR0aW5ncz4ge1xuICAvKipcbiAgICogUHJvdmlkZXIgaWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX1BST1ZJREVSX0lEID0gXCJleGNlbFwiO1xuXG4gIC8qKlxuICAgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBzaGVldCBvcGVuIGFjdGlvbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfRVhDRUxfUFJPVklERVJfT1BFTl9LRVlfQUNUSU9OID0gXCJPcGVuIEV4Y2VsXCI7XG5cbiAgLyoqXG4gICAqIFRoZSBpbnRlZ3JhdGlvbiBtYW5hZ2VyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByaXZhdGUgX2ludGVncmF0aW9uTWFuYWdlcjogSW50ZWdyYXRpb25NYW5hZ2VyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgRXhjZWwgYXBwbGljYXRpb24gaW50ZXJvcC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIF9leGNlbDogRXhjZWxBcHBsaWNhdGlvbiB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGludGVyb3AgY2xpZW50cyBmb3IgdGhlIGRpZmZlcmVudCBjb250ZXh0cy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIF9pbnRlcm9wQ2xpZW50czogeyBbaWQ6IHN0cmluZ106IEludGVyb3BDbGllbnQgfTtcblxuICAvKipcbiAgICogVGhlIG1vZHVsZSBpcyBiZWluZyByZWdpc3RlcmVkLlxuICAgKiBAcGFyYW0gaW50ZWdyYXRpb25NYW5hZ2VyIFRoZSBtYW5hZ2VyIGZvciB0aGUgaW50ZWdyYXRpb24uXG4gICAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cbiAgICogQHJldHVybnMgTm90aGluZy5cbiAgICovXG4gIHB1YmxpYyBhc3luYyByZWdpc3RlcihcbiAgICBpbnRlZ3JhdGlvbk1hbmFnZXI6IEludGVncmF0aW9uTWFuYWdlcixcbiAgICBpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248RXhjZWxTZXR0aW5ncz5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5faW50ZWdyYXRpb25NYW5hZ2VyID0gaW50ZWdyYXRpb25NYW5hZ2VyO1xuXG4gICAgY29uc3QgYnJva2VyQ2xpZW50ID0gZmluLkludGVyb3AuY29ubmVjdFN5bmMoZmluLm1lLmlkZW50aXR5LnV1aWQsIHt9KTtcbiAgICBjb25zdCBjb250ZXh0R3JvdXBzID0gYXdhaXQgYnJva2VyQ2xpZW50LmdldENvbnRleHRHcm91cHMoKTtcbiAgICB0aGlzLl9pbnRlcm9wQ2xpZW50cyA9IHt9O1xuICAgIGZvciAoY29uc3QgY29udGV4dEdyb3VwIG9mIGNvbnRleHRHcm91cHMpIHtcbiAgICAgIGNvbnN0IGNvbnRleHRDbGllbnQgPSBmaW4uSW50ZXJvcC5jb25uZWN0U3luYyhmaW4ubWUuaWRlbnRpdHkudXVpZCwge30pO1xuICAgICAgYXdhaXQgY29udGV4dENsaWVudC5qb2luQ29udGV4dEdyb3VwKGNvbnRleHRHcm91cC5pZCk7XG4gICAgICBhd2FpdCBjb250ZXh0Q2xpZW50LmFkZENvbnRleHRIYW5kbGVyKGFzeW5jIChjdHgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDb250ZXh0KGludGVncmF0aW9uLCBjb250ZXh0R3JvdXAuaWQsIGN0eCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2ludGVyb3BDbGllbnRzW2NvbnRleHRHcm91cC5pZF0gPSBjb250ZXh0Q2xpZW50O1xuICAgIH1cblxuICAgIGVuYWJsZUxvZ2dpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbW9kdWxlIGlzIGJlaW5nIGRlcmVnaXN0ZXJlZC5cbiAgICogQHBhcmFtIGludGVncmF0aW9uIFRoZSBpbnRlZ3JhdGlvbiBkZXRhaWxzLlxuICAgKiBAcmV0dXJucyBOb3RoaW5nLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGRlcmVnaXN0ZXIoaW50ZWdyYXRpb246IEludGVncmF0aW9uPEV4Y2VsU2V0dGluZ3M+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZm9yIChjb25zdCBjbGllbnQgaW4gdGhpcy5faW50ZXJvcENsaWVudHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2ludGVyb3BDbGllbnRzW2NsaWVudF0ucmVtb3ZlRnJvbUNvbnRleHRHcm91cCgpO1xuICAgIH1cbiAgICB0aGlzLl9pbnRlcm9wQ2xpZW50cyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgdGhlIHN0YXRpYyBhcHBsaWNhdGlvbiBlbnRyaWVzLlxuICAgKiBAcGFyYW0gaW50ZWdyYXRpb24gVGhlIGludGVncmF0aW9uIGRldGFpbHMuXG4gICAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIGFwcGxpY2F0aW9uIGVudHJpZXMuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0QXBwU2VhcmNoRW50cmllcyhpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248RXhjZWxTZXR0aW5ncz4pOiBQcm9taXNlPEhvbWVTZWFyY2hSZXN1bHRbXT4ge1xuICAgIHJldHVybiBpbnRlZ3JhdGlvbj8uZGF0YT8uYXNzZXRzLm1hcCgoYSkgPT4gdGhpcy5jcmVhdGVSZXN1bHQoaW50ZWdyYXRpb24sIGEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBlbnRyeSBoYXMgYmVlbiBzZWxlY3RlZC5cbiAgICogQHBhcmFtIGludGVncmF0aW9uIFRoZSBpbnRlZ3JhdGlvbiBkZXRhaWxzLlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSBkaXNwYXRjaGVkIHJlc3VsdC5cbiAgICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCByZXNwb25zZS5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgaXRlbSB3YXMgaGFuZGxlZC5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBpdGVtU2VsZWN0aW9uKFxuICAgIGludGVncmF0aW9uOiBJbnRlZ3JhdGlvbjxFeGNlbFNldHRpbmdzPixcbiAgICByZXN1bHQ6IENMSURpc3BhdGNoZWRTZWFyY2hSZXN1bHQsXG4gICAgbGFzdFJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmIChcbiAgICAgIHJlc3VsdC5hY3Rpb24ubmFtZSA9PT0gRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyLl9FWENFTF9QUk9WSURFUl9PUEVOX0tFWV9BQ1RJT04gJiZcbiAgICAgIHJlc3VsdC5kYXRhLndvcmtib29rICYmXG4gICAgICB0aGlzLl9pbnRlZ3JhdGlvbk1hbmFnZXIubGF1bmNoQXNzZXRcbiAgICApIHtcbiAgICAgIGNvbnN0IGV4Y2VsQXNzZXQgPSByZXN1bHQuZGF0YSBhcyBFeGNlbEFzc2V0U2V0dGluZ3M7XG5cbiAgICAgIGF3YWl0IHRoaXMuX2ludGVncmF0aW9uTWFuYWdlci5sYXVuY2hBc3NldCh7XG4gICAgICAgIGFsaWFzOiBleGNlbEFzc2V0Lndvcmtib29rXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhjZWwgPSBhd2FpdCB0aGlzLmdldEV4Y2VsKCk7XG4gICAgICBpZiAoZXhjZWwpIHtcbiAgICAgICAgY29uc3Qgd29ya2Jvb2tzID0gYXdhaXQgZXhjZWwuZ2V0V29ya2Jvb2tzKCk7XG4gICAgICAgIGZvciAoY29uc3Qgd29ya2Jvb2sgb2Ygd29ya2Jvb2tzKSB7XG4gICAgICAgICAgY29uc3QgbmFtZSA9IGF3YWl0IHdvcmtib29rLmdldE5hbWUoKTtcbiAgICAgICAgICBpZiAobmFtZSA9PT0gZXhjZWxBc3NldC53b3JrYm9vaykge1xuICAgICAgICAgICAgZm9yIChjb25zdCB3b3Jrc2hlZXRTZXR0aW5ncyBvZiBleGNlbEFzc2V0LndvcmtzaGVldHMpIHtcbiAgICAgICAgICAgICAgY29uc3Qgd29ya3NoZWV0ID0gYXdhaXQgd29ya2Jvb2suZ2V0V29ya3NoZWV0QnlOYW1lKHdvcmtzaGVldFNldHRpbmdzLm5hbWUpO1xuICAgICAgICAgICAgICBhd2FpdCB3b3Jrc2hlZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoY2VsbHMpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUNlbGxDaGFuZ2VzKGV4Y2VsQXNzZXQsIHdvcmtzaGVldFNldHRpbmdzLCBjZWxscyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBzZWFyY2ggcmVzdWx0cyBiYXNlZCBvbiB0aGUgcXVlcnkgYW5kIGZpbHRlcnMuXG4gICAqIEBwYXJhbSBpbnRlZ3JhdGlvbiBUaGUgaW50ZWdyYXRpb24gZGV0YWlscy5cbiAgICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0gZmlsdGVycyBUaGUgZmlsdGVycyB0byBhcHBseS5cbiAgICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCBzZWFyY2ggcmVzcG9uc2UgdXNlZCBmb3IgdXBkYXRpbmcgZXhpc3RpbmcgcmVzdWx0cy5cbiAgICogQHJldHVybnMgVGhlIGxpc3Qgb2YgcmVzdWx0cyBhbmQgbmV3IGZpbHRlcnMuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0U2VhcmNoUmVzdWx0cyhcbiAgICBpbnRlZ3JhdGlvbjogSW50ZWdyYXRpb248RXhjZWxTZXR0aW5ncz4sXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBmaWx0ZXJzOiBDTElGaWx0ZXJbXSxcbiAgICBsYXN0UmVzcG9uc2U6IENMSVNlYXJjaExpc3RlbmVyUmVzcG9uc2VcbiAgKTogUHJvbWlzZTxIb21lU2VhcmNoUmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0c1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgc2VhcmNoIHJlc3VsdC5cbiAgICogQHBhcmFtIGludGVncmF0aW9uIFRoZSBpbnRlZ3JhdGlvbiBkZXRhaWxzLlxuICAgKiBAcGFyYW0gZXhjZWxBc3NldCBUaGUgZXhjZWwgZG9jdW1lbnQgYXNzZXQgYWxpYXMuXG4gICAqIEByZXR1cm5zIFRoZSBzZWFyY2ggcmVzdWx0LlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVSZXN1bHQoaW50ZWdyYXRpb246IEludGVncmF0aW9uPEV4Y2VsU2V0dGluZ3M+LCBleGNlbEFzc2V0OiBFeGNlbEFzc2V0U2V0dGluZ3MpOiBIb21lU2VhcmNoUmVzdWx0IHtcbiAgICByZXR1cm4ge1xuICAgICAga2V5OiBgZXhjZWwtJHtleGNlbEFzc2V0Lndvcmtib29rfWAsXG4gICAgICB0aXRsZTogZXhjZWxBc3NldC50aXRsZSxcbiAgICAgIGxhYmVsOiBcIkV4Y2VsXCIsXG4gICAgICBpY29uOiBpbnRlZ3JhdGlvbi5pY29uLFxuICAgICAgYWN0aW9uczogW3sgbmFtZTogRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyLl9FWENFTF9QUk9WSURFUl9PUEVOX0tFWV9BQ1RJT04sIGhvdGtleTogXCJFbnRlclwiIH1dLFxuICAgICAgZGF0YToge1xuICAgICAgICBwcm92aWRlcklkOiBFeGNlbEludGVncmF0aW9uUHJvdmlkZXIuX1BST1ZJREVSX0lELFxuICAgICAgICAuLi5leGNlbEFzc2V0XG4gICAgICB9LFxuICAgICAgdGVtcGxhdGU6IENMSVRlbXBsYXRlLlNpbXBsZVRleHQsXG4gICAgICB0ZW1wbGF0ZUNvbnRlbnQ6IGV4Y2VsQXNzZXQuZGVzY3JpcHRpb25cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZXhjZWwgYXBwbGljYXRpb24uXG4gICAqIEByZXR1cm5zIFRoZSBhcHBsaWNhdGlvbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldEV4Y2VsKCk6IFByb21pc2U8RXhjZWxBcHBsaWNhdGlvbj4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLl9leGNlbCA9IGF3YWl0IGdldEV4Y2VsQXBwbGljYXRpb24oKTtcbiAgICAgIHJldHVybiB0aGlzLl9leGNlbDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIEV4Y2VsIGFwcGxpY2F0aW9uXCIsIGVycik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgY2VsbCBjaGFuZ2VzLlxuICAgKiBAcGFyYW0gZXhjZWxBc3NldCBUaGUgYXNzZXQgdG8gdXNlIGZvciBwcm9jZXNzaW5nIHRoZSBjZWxsIGNoYW5nZXMuXG4gICAqIEBwYXJhbSB3b3Jrc2hlZXROYW1lIFRoZSBhc3NldCB0byB1c2UgZm9yIHByb2Nlc3NpbmcgdGhlIGNlbGwgY2hhbmdlcy5cbiAgICogQHBhcmFtIGNlbGxzIFRoZSBjZWxscyB0aGF0IGhhdmUgY2hhbmdlZC5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2VsbENoYW5nZXMoXG4gICAgZXhjZWxBc3NldDogRXhjZWxBc3NldFNldHRpbmdzLFxuICAgIHdvcmtzaGVldDogRXhjZWxXb3Jrc2hlZXRTZXR0aW5ncyxcbiAgICBjZWxsczogQ2VsbFtdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh3b3Jrc2hlZXQuY2VsbEhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGNlbGwgb2YgY2VsbHMpIHtcbiAgICAgICAgY29uc3QgY2VsbEhhbmRsZXIgPSB3b3Jrc2hlZXQuY2VsbEhhbmRsZXJzLmZpbmQoKGMpID0+IGMuY2VsbCA9PT0gY2VsbC5hZGRyZXNzKTtcblxuICAgICAgICBpZiAoY2VsbEhhbmRsZXIpIHtcbiAgICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLl9pbnRlcm9wQ2xpZW50c1tjZWxsSGFuZGxlci5jb250ZXh0R3JvdXBdO1xuICAgICAgICAgIGlmIChjbGllbnQgJiYgKGNlbGxIYW5kbGVyLnR5cGVzLmluY2x1ZGVzKFwiaW5zdHJ1bWVudFwiKSB8fCBjZWxsSGFuZGxlci50eXBlcy5pbmNsdWRlcyhcImZkYzMuaW5zdHJ1bWVudFwiKSkpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5zZXRDb250ZXh0KHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmZGMzLmluc3RydW1lbnRcIixcbiAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICB0aWNrZXI6IGNlbGwudmFsdWUsXG4gICAgICAgICAgICAgICAgX3NvdXJjZTogYGV4Y2VsLiR7ZXhjZWxBc3NldC53b3JrYm9va30uJHt3b3Jrc2hlZXQubmFtZX1gXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBjb250ZXh0LlxuICAgKiBAcGFyYW0gaW50ZWdyYXRpb24gVGhlIGludGVncmF0aW9uIGRldGFpbHMuXG4gICAqIEBwYXJhbSBjb250ZXh0R3JvdXAgVGhlIGdyb3VwIHJlY2VpdmluZyB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgYmVpbmcgcmVjZWl2ZWQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUNvbnRleHQoXG4gICAgaW50ZWdyYXRpb246IEludGVncmF0aW9uPEV4Y2VsU2V0dGluZ3M+LFxuICAgIGNvbnRleHRHcm91cDogc3RyaW5nLFxuICAgIGNvbnRleHQ6IE9wZW5GaW4uQ29udGV4dFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoaW50ZWdyYXRpb24uZGF0YT8uYXNzZXRzKSB7XG4gICAgICBjb25zdCBleGNlbCA9IGF3YWl0IHRoaXMuZ2V0RXhjZWwoKTtcbiAgICAgIGlmIChleGNlbCkge1xuICAgICAgICBjb25zdCB3b3JrYm9va3MgPSBhd2FpdCBleGNlbC5nZXRXb3JrYm9va3MoKTtcbiAgICAgICAgZm9yIChjb25zdCB3b3JrYm9vayBvZiB3b3JrYm9va3MpIHtcbiAgICAgICAgICBjb25zdCB3b3JrYm9va05hbWUgPSBhd2FpdCB3b3JrYm9vay5nZXROYW1lKCk7XG5cbiAgICAgICAgICBjb25zdCBjb25uZWN0ZWRXb3JrYm9vayA9IGludGVncmF0aW9uLmRhdGE/LmFzc2V0cy5maW5kKChhKSA9PiBhLndvcmtib29rID09PSB3b3JrYm9va05hbWUpO1xuICAgICAgICAgIGlmIChjb25uZWN0ZWRXb3JrYm9vaz8ud29ya3NoZWV0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCB3b3Jrc2hlZXRTZXR0aW5ncyBvZiBjb25uZWN0ZWRXb3JrYm9vay53b3Jrc2hlZXRzKSB7XG4gICAgICAgICAgICAgIGlmICh3b3Jrc2hlZXRTZXR0aW5ncy5jZWxsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmNvbWluZ1NvdXJjZSA9IGBleGNlbC4ke3dvcmtib29rTmFtZX0uJHt3b3Jrc2hlZXRTZXR0aW5ncy5uYW1lfWA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5jb21pbmdTb3VyY2UgIT09IGNvbnRleHQ/LmlkPy5fc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjZWxsSGFuZGxlcnMgPSB3b3Jrc2hlZXRTZXR0aW5ncy5jZWxsSGFuZGxlcnM/LmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGNoKSA9PiBjaC5jb250ZXh0R3JvdXAgPT09IGNvbnRleHRHcm91cCAmJiBjaC50eXBlcy5pbmNsdWRlcyhjb250ZXh0LnR5cGUpXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjZWxsSGFuZGxlciBvZiBjZWxsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya3NoZWV0ID0gYXdhaXQgd29ya2Jvb2suZ2V0V29ya3NoZWV0QnlOYW1lKHdvcmtzaGVldFNldHRpbmdzLm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBjZWxsVmFsdWU6IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudHlwZSA9PT0gXCJmZGMzLmluc3RydW1lbnRcIiB8fCBjb250ZXh0LnR5cGUgPT09IFwiaW5zdHJ1bWVudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2VsbFZhbHVlID0gY29udGV4dC5pZD8udGlja2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHdvcmtzaGVldC5zZXRDZWxsVmFsdWVzKGNlbGxIYW5kbGVyLmNlbGwsIFtbY2VsbFZhbHVlXV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgRXhjZWxJbnRlZ3JhdGlvblByb3ZpZGVyIH0gZnJvbSBcIi4vaW50ZWdyYXRpb24tcHJvdmlkZXJcIjtcblxuZXhwb3J0IGNvbnN0IGludGVncmF0aW9uID0gbmV3IEV4Y2VsSW50ZWdyYXRpb25Qcm92aWRlcigpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9