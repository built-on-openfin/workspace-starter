var e={d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function s(e){return null==e}e.d(t,{k:()=>o});const o={endpoint:new class{constructor(){this._favoritesKey=`${fin.me.identity.uuid}-favorites`}async initialize(e,t,s){this._logger=t("FavoriteLocalStorageProvider"),this._logger.info("Initializing")}async closedown(){this._logger?.info("Closedown")}async action(e,t){if("module"===e.type&&!s(t))return"payload"in t?this.requestResponseSetFavorite(t):this.requestResponseRemoveFavorite(t);throw new Error(`This endpoint module only supports the type 'module' and being passed a request. The following endpoint type was specified: ${e.type} and request passed: ${!s(t)}`)}async requestResponse(e,t){if("module"===e.type&&!s(t))return"id"in t?this.requestResponseGetFavorite(t):this.requestResponseFavorites(t);throw new Error(`This endpoint module only supports the type 'module' and being passed a request. The following endpoint type was specified: ${e.type} and request passed: ${!s(t)}`)}async requestResponseFavorites(e){const t=this.getFavorites();return s(e.favoriteType)?{entries:t.filter((t=>t.payload.type===e.favoriteType))}:{entries:t}}async requestResponseGetFavorite(e){const t=this.getFavorites();if(!s(e.id))return t.find((t=>t.payload.id===e.id))}async requestResponseSetFavorite(e){const t=this.getFavorites();if(!s(e.id)){const s=t.findIndex((t=>t.payload.id===e.id)),o={metaData:e.metaData,payload:e.payload};return-1===s?t.push(o):t[s]=o,this.saveFavorites(t),!0}return!1}async requestResponseRemoveFavorite(e){const t=this.getFavorites();if(!s(e.id)){const s=t.findIndex((t=>t.payload.id===e.id));return-1!==s&&(t.splice(s,1),this.saveFavorites(t),!0)}return!1}getFavorites(){const e=localStorage.getItem(this._favoritesKey);return s(e)?[]:JSON.parse(e)}saveFavorites(e){localStorage.setItem(this._favoritesKey,JSON.stringify(e))}}};var i=t.k;export{i as entryPoints};
//# sourceMappingURL=favorite-local-storage.bundle.js.map