/*! For license information please see shell.bundle.js.LICENSE.txt */
var e={2:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},25:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(v[e])e=v[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(W(r.r)&&W(r.g)&&W(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):W(r.h)&&W(r.s)&&W(r.v)?(l=A(r.s),u=A(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):W(r.h)&&W(r.s)&&W(r.l)&&(l=A(r.s),d=A(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[x(_(r)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function w(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function m(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function b(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16)),x(_(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(w,[3])},tetrad:function(){return this._applyCombination(w,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:A(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var v=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(v);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function I(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function A(e){return e<=1&&(e=100*e+"%"),e}function _(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return I(e)/255}var M,T,R,O=(T="[\\s|\\(]+("+(M="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",R="[\\s|\\(]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",{CSS_UNIT:new RegExp(M),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},317:(e,t,n)=>{var r=n(189),a=n(522);const o=n(675).qT.System,i=e=>Object.entries(e).reduce(((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`),""),s=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(a.A.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(a.A.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(a.A.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=i({...e,...s(e,"light")}),this.darkPaletteVars=i({...t,...s(t,"dark")})}}setScheme(e){this.providerStorage.setItem(a.A.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(a.A.SelectedColorScheme)&&this.providerStorage.setItem(a.A.SelectedColorScheme,o),this.providerStorage.getItem(a.A.SelectedColorScheme)}}(r)},367:(e,t,n)=>{n.d(t,{N:()=>w});var r=n(723),a=n(79),o=n(675),i=n(70),s=n(786),c=n(333),l=n(326);const u=(0,n(102).A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`);var d=n(141);const p=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await u()).dispatch(l.Hc.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetPagesForWindow,e),getPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>(0,d.Nt)().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await(0,a.bW)(e),o={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(a.OF.AddPage,o)},removePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>(0,d.Nt)().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await(0,a.bW)(e),o=(await r.dispatch(a.OF.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===n));if(!o)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);o.multiInstanceViewBehavior="reparent";const i={identity:e,pages:[o],insertionIndex:t.index};return r.dispatch(a.OF.AttachPagesToWindow,i)},setActivePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,a.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,a.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await(0,a.bW)(e),(await(0,l.p4)(e)).dispatch(l.aQ.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await(0,l.p4)(e)).dispatch(l.aQ.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,a.bW)(e)).dispatch(a.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,a.bW)(e)).dispatch(a.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,a.bW)(e)).dispatch(a.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,a.bW)(e)).dispatch(a.OF.HandleRequestNavigationInternal,t)}),f=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>p(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${(0,c.N)()}`;return s.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{s.A.markAndMeasure("browser-window-shown",e)}))})(r),await(0,a.bW)(e);const o=await t.createWindow(n);return(e=>{s.A.markAndMeasure("browser-window-started",e)})(r),p(o.identity)},getAllAttachedPages:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>(await(0,a.bW)(e),(await(0,i.Io)()).map((e=>p(e.identity)))),getUniquePageTitle:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetPageByViewIdentity,t)}},h=e=>({createPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetSavedPage,t),getPages:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetSavedPages,t),savePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SavePage,t),createWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=w(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await(0,a.N)(e)).dispatch(a.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetSavedWorkspaces,t),saveWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,a.N)(e)).dispatch(a.OF.SaveDockProviderConfig,t)});var g=n(396);const w=()=>(e=>{const t=fin.Platform.wrapSync(e);let n;return Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:r.$h,name:r.vL,entityType:r.fT||"unknown"}),(await(0,a.N)(e)).dispatch(a.OF.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await(0,a.N)(e),i={actionId:t,payload:{...n,callerType:n.callerType||o.vc.API}};return r.dispatch(a.OF.InvokeCustomActionInternal,i)},_requestQuitPlatformDialog:async t=>(await(0,a.N)(e)).dispatch(a.OF.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await(0,a.N)(e)).dispatch(a.OF.ApplyWorkspace,{...t,options:n}),setActiveWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetLanguage),_getLanguageResources:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await(0,a.KZ)(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await(0,a.N)(e)).dispatch(a.OF.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.FocusAndExpandSearchInternal),Theme:(0,g.NA)(e),Browser:f(e),Storage:h(e)})})(fin.me.identity)},396:(e,t,n)=>{n.d(t,{NA:()=>i}),n(181),n(70),n(326);var r,a=n(102);!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(r||(r={})),(0,a.A)("of-workspace-notifications-sync"),n(695);var o=n(79);n(317);const i=e=>({getThemes:async()=>(await(0,o.N)(e)).dispatch(o.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,o.N)(e)).dispatch(o.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,o.N)(e)).dispatch(o.OF.GetSelectedScheme,void 0)})},141:(e,t,r)=>{r.d(t,{Nt:()=>d.N}),r(675);var a=r(723);r(181);var o=r(70);r(365);const i=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise((e=>setTimeout(e,t)));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{r=void 0})),r)};var s;!function(e){e.Top="top",e.Below="below"}(s||(s={}));const c=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};i((async function(e,t,n,r,a){const i=t.getBoundingClientRect(),l=await async function(e,t,n,r,a,i){const l=!!e&&(0,o.Iq)(e),u=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(l,i);if(r===s.Below){if(!l||await c(l)){const e=l?(await(0,o.ur)(u)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,o.V1)(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:(0,o.V1)(u).left-t/2,top:a?u.bottom-128:u.bottom+12,width:t,height:n}}if(!l||await c(l)){const e=l?(await(0,o.ur)(u)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,o.V1)(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:(0,o.V1)(u).left-t/2,top:u.top+20,width:t,height:n}}(e,i.width,i.height,n,r,a);if(0===l.width||0===l.height)return;const u=(0,o.Tv)();await u.setBounds(l),await u.show();const d=setTimeout((()=>u.close()),r?5e3:3e3),p=()=>{clearTimeout(d),u.close()};if(e){const t=(0,o.Iq)(e);t.on("bounds-changing",(()=>p())),t.on("blurred",(()=>p())),t.on("maximized",(()=>p())),t.on("minimized",(()=>p())),t.on("restored",(()=>p()))}}),10),r(277),r(957);var l=r(438);r(940),n(434);const u=n(232);r.n(u)().t,r(678),r(326),r(79);var d=r(367);new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}},new Map,(()=>{const e={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};e.workspacePlatform||(e.workspacePlatform={}),e.workspacePlatform._internalDeferShowOptions={setAsForeground:!1,deferShowEnabled:!0,autoShow:e.workspacePlatform?._internalAutoShow||e.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===e.autoShow||e.autoShow},e.autoShow=!1})(),new Map;var p=r(522),f=r(189);r(523),o.Q.BrowserMenu,function(e,t){t&&t((t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach((e=>e(...r)))}))}(new Map,(e=>a.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},"window.menu",e))),i((()=>(0,l.v1)().getChildWindows()),500),new Map,r(317),new Map;var h,g,w=r(236);r.n(w)()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===o.Q.BrowserMenu||r.identity.name===o.Q.BrowserSaveMenu?t=r:await(0,o.hb)(r.identity)&&(n=!0),n)break;!n&&t&&t.close()}),100,{leading:!1,trailing:!0}),function(e){e.Save="Save",e.SaveAs="SaveAs"}(h||(h={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(g||(g={})),r(862);const m=n(54),y=(e,t)=>(0,m.createStore)(e+"-"+fin.me.uuid,t),b=(e,t)=>{const n=y(e,t);return(async(e,t,n)=>{const r=f.getItem(p.A.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,f.setItem(p.A.HasMovedStore,JSON.stringify(a));const o=await(0,m.entries)(e);await(0,m.setMany)(o,t)})((0,m.createStore)(e,t),n,e),n};var v,k;a.AT&&a.cI&&b("openfin-home-pages","pages"),a.AT&&a.cI&&y("openfin-enterprise-tab-history","removed-tab-stack"),a.AT&&a.cI&&y("openfin-enterprise-site-history","visited-sites"),function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(v||(v={})),v.Separator,r(257),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(k||(k={})),(0,r(102).A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),a.AT&&a.cI&&y("dock-provider-configs","dock-provider-configs"),r(396),a.AT&&a.cI&&b("openfin-workspace-platform-workspaces","workspaces"),r(250),o.$p.uuid,o.Q.BrowserAddressSearchPrefix,r(413),r(179)},413:(e,t,n)=>{},675:(e,t,n)=>{var r,a,o,i,s,c,l,u,d,p,f,h;n.d(t,{qT:()=>o,vc:()=>f}),n(179),n(250),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(r||(r={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(a||(a={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(l||(l={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(u||(u={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(d||(d={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(f||(f={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(h||(h={}))},248:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(438),a=n(786);const o=(e,t)=>{a.A.markStart(`${e}-registration`),(0,r.BY)().once("started",(()=>a.A.markAndMeasure("workspace-app-started",`${e}-registration`)));const n=fin.Window.wrapSync(t);n.once("initialized",(()=>a.A.markAndMeasure(`${e}-window-initialized`,`${e}-registration`))),n.once("shown",(()=>{a.A.markAndMeasure(`${e}-show`,`${e}-registration`)}))}},834:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>b.PK,CLIFilterOptionType:()=>b.oo,CLITemplate:()=>b.fC,deregister:()=>S,hide:()=>P,register:()=>k,show:()=>C});var r=n(723),a=n(786),o=n(277),i=n(70);var s=n(695),c=n(79),l=n(575),u=n(905);const d=()=>{},p=new Map;async function f(e){const{id:t,providerId:n}=e,r=m.getProviderOrFail(n);let a=p.get(t);a||(a=function(e,t){const n=new Set;let r=!1;return{close:()=>{r=!0;for(const e of n)e()},req:{id:e,...t,context:t?.context||{},onClose:e=>{n.add(e),r&&e()},removeListener:e=>{n.delete(e)}}}}(t,e),p.set(t,a));const o=function(){const e={};let t=[],n=[],r=null,a=u.Zo.Initial;e.getStatus=()=>a,e.getResultBuffer=()=>t,e.setResultBuffer=n=>{t=n,t?.length&&e.onChange()},e.getRevokedBuffer=()=>n,e.setRevokedBuffer=t=>{n=t,n?.length&&e.onChange()},e.setUpdatedContext=t=>{r=t,null!==r&&e.onChange()},e.getUpdatedContext=()=>r,e.onChange=d;const o={};return e.res=o,o.close=()=>{a!==u.Zo.Close&&(a=u.Zo.Close,e.onChange())},o.open=()=>{a!==u.Zo.Open&&(a=u.Zo.Open,e.onChange())},o.respond=t=>{const n=function(e=[],t=[],n="ascending"){const r=[],a=new Map;t.forEach((e=>{if(e.key)return a.set(e.key,e);r.push(e)}));let o=e.map((e=>{if(e.key){const t=a.get(e.key);if(t)return a.delete(e.key),t}return e}));return o.push(...a.values(),...r),o="ascending"===n?o.sort(((e,t)=>(e?.score??1/0)-(t?.score??1/0))):o.sort(((e,t)=>(t?.score??1/0)-(e?.score??1/0))),o}(e.getResultBuffer(),t,undefined);e.setResultBuffer(n)},o.revoke=(...t)=>{const n=new Set(t),r=e.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));e.setResultBuffer(r),n.size&&(e.getRevokedBuffer().forEach((e=>n.add(e))),e.setRevokedBuffer([...n]))},o.updateContext=t=>{e.setUpdatedContext(t)},e}(),i=()=>{const e=o.getResultBuffer();o.setResultBuffer([]);const r=o.getRevokedBuffer();o.setRevokedBuffer([]);const a=o.getUpdatedContext();o.setUpdatedContext(null);const i=o.getStatus();!async function(e){(await(0,s.gj)()).dispatch("0",e)}({id:t,providerId:n,results:e,revoked:r,status:i,context:a})};let c=!0,l=!1;o.onChange=()=>{if(c)return c=!1,void i();l||(l=!0,setTimeout((()=>{l=!1,i()}),100))};try{const{results:e,context:i}=await r.onUserInput(a.req,o.res),s=o.getStatus();return{id:t,providerId:n,status:s,results:e,context:i}}catch(e){return console.error(`OpenFin/Workspace/Home. Uncaught exception in search provider ${n} for search ${t}`,"This is likely a bug in the implementation of the search provider.",e),{id:t,providerId:n,error:e?.message}}}async function h(){for(const{req:e,close:t}of p.values())t(),p.delete(e.id)}async function g(e,t){const n=m.getProviderOrFail(e.providerId);return e.result.dispatcherIdentity=t,n.onResultDispatch?.(e.result)}function w(e){const t=p.get(e.id);t?.close(),p.delete(e.id)}const m=new l.xM("home");var y=n(248),b=n(872);let v;const k=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);(0,y.H)("home",i.F2);const t=await(async e=>{await(0,s.nA)(),(!("skipPlatformInitCheck"in e)||!0!==e.skipPlatformInitCheck)&&await(0,c.KZ)(fin.me.identity),m.assertNotAlreadyRegistered(e.id),m.setProvider(e);const t=await(0,s.gj)();return function(e){e.homeChannelActionsRegistered||(e.homeChannelActionsRegistered=!0,e.register("0",f),e.register("6",w),e.register("5",g),e.addDisconnectionListener(h))}(t),t.dispatch("2",{id:e.id,title:e.title,icon:e.icon,clientAPIVersion:r.et,identity:fin.me.identity,scoreOrder:e.scoreOrder,commandCode:e.commandCode,description:e.description,hidden:e.hidden,listTitle:e.listTitle,inputPlaceholder:e.inputPlaceholder,logoUrl:e.logoUrl,dispatchFocusEvents:e.dispatchFocusEvents})})(e);return v=new Promise(((n,i)=>{try{(0,o.GR)({allowed:!0,componentVersion:t?.workspaceVersion}),r.et,n({...t,clientAPIVersion:r.et,setSearchQuery:async t=>(await(0,s.N7)()).dispatch("set-search-query",{query:t,providerID:e.id})})}catch(e){(0,o.GR)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),i(e)}finally{a.A.markEndAndMeasure("home-registration")}})),v},S=async e=>{m.deleteProvider(e);const t=await(0,s.gj)();await t.dispatch("3",e)};async function C(){a.A.markStart("home-show"),await v;const e=await(0,s.N7)();await e.dispatch("show-home",void 0)}async function P(){await v;const e=await(0,s.N7)();await e.dispatch("hide-home",void 0)}},575:(e,t,r)=>{r.d(t,{xM:()=>c});const a=n(570);class o extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`${n} Provider. ${n} Provider${t?` with id ${t}`:""} is not currently registered.`)}}class i extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`${n} Provider. ${n} Provider${t?` with id ${t}`:""} is already registered. Call \`deregister\` before registering again.`)}}class s extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`Failed to get ${n} Provider. ${n} Provider with id ${t} is not currently registered.`)}}class c{constructor(e){this.providersMap=new Map,this.providerType=e}assertNotAlreadyRegistered(e){if(this.hasProvider(e))throw new i(this.providerType,e)}assertRegistered(e){if(!this.hasProvider(e))throw new o(this.providerType,e)}getProvider(e){return this.providersMap.get(e)}hasProvider(e){return this.providersMap.has(e)}setProvider(e){this.providersMap.set(e.id,e)}deleteProvider(e){this.providersMap.delete(e)}getProviderOrFail(e){const t=this.getProvider(e);if(!t)throw new s(this.providerType,e);return t}clearProviders(){this.providersMap.clear()}}},129:(e,t,n)=>{var r,a,o;n.d(t,{P:()=>a,R:()=>o}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(r||(r={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(a||(a={})),function(e){e.Active="active",e.Default="default"}(o||(o={}))},600:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(r||(r={}))},872:(e,t,n)=>{var r,a,o;n.d(t,{PK:()=>r,fC:()=>a,oo:()=>o}),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(a||(a={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,n)=>{n(129),n(872),n(710),n(184),n(600)},710:(e,t,n)=>{var r,a;n.d(t,{v:()=>r,z:()=>a}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(r||(r={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(a||(a={}))},184:(e,t,n)=>{n.d(t,{SM:()=>o,ce:()=>r,in:()=>i,np:()=>a});const r={Container:"Container",Button:"Button",SplitButton:"SplitButton"},a={Text:"Text",Image:"Image",List:"List"},o={...r,...a};var i;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(i||(i={}))},598:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>o.v,StorefrontTemplate:()=>o.z,deregister:()=>m,hide:()=>y,register:()=>w,show:()=>b});var r=n(277),a=n(695),o=n(710),i=n(723),s=n(786),c=n(70),l=n(79),u=n(575);let d=!1;async function p(e,t,n){const r=await(0,a.p4)();try{return await r.dispatch(e.action,e.payload)}catch(a){if(a instanceof Error&&-1!==a.toString().indexOf(e.action))return d||console.warn("You are using a newer version of the Workspace client library that is not supported by the currently running workspace provider. Please upgrade the Workspace to version 9.0 or later."),d=!0,await r.dispatch(t.action,t.payload),n;throw a}}const f=new u.xM("storefront");var h=n(248);let g;const w=async e=>{(0,h.H)("store",c.gQ);const t=await(async e=>{await(0,l.KZ)(fin.me.identity);const t=await(0,a.N7)();return f.assertNotAlreadyRegistered(e.id),f.setProvider(e),(e=>{e.storefrontChannelActionsRegistered||(e.storefrontChannelActionsRegistered=!0,e.register("get-storefront-provider-apps",(e=>f.getProviderOrFail(e).getApps())),e.register("get-storefront-provider-footer",(e=>f.getProviderOrFail(e).getFooter())),e.register("get-storefront-provider-landing-page",(e=>f.getProviderOrFail(e).getLandingPage())),e.register("get-storefront-provider-navigation",(e=>f.getProviderOrFail(e).getNavigation())),e.register("launch-storefront-provider-app",(({id:e,app:t})=>f.getProviderOrFail(e).launchApp(t))))})(t),e.clientAPIVersion=i.et,p({action:"register-provider",payload:{providerType:"storefront",info:e}},{action:"register-storefront-provider",payload:e},{workspaceVersion:"unknown"})})(e);return g=new Promise(((n,o)=>{try{(0,r.xt)({allowed:!0,componentVersion:t?.workspaceVersion}),i.et,n({clientAPIVersion:i.et,workspaceVersion:t?.workspaceVersion??"",updateAppCardButtons:async t=>{const n=await(0,a.mQ)();await n.dispatch("update-app-card-button-config",{...t,id:e.id,title:e.title,icon:e.icon,platformIdentity:fin.me.identity})}})}catch(e){(0,r.xt)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),o(e)}finally{s.A.markEndAndMeasure("store-registration")}})),g},m=async e=>(await g,f.assertRegistered(e),f.deleteProvider(e),await(0,a.nA)(),p({action:"deregister-provider",payload:{providerType:"storefront",id:e}},{action:"deregister-storefront-provider",payload:e})),y=async()=>(await g,await(0,a.nA)(),p({action:"hide-provider-window",payload:{providerType:"storefront"}},{action:"hide-storefront"})),b=async()=>(s.A.markStart("store-show"),await g,await(0,a.nA)(),p({action:"show-provider-window",payload:{providerType:"storefront"}},{action:"show-storefront"}))},678:(e,t,n)=>{n.d(t,{BG:()=>l,_2:()=>s});var r=n(940),a=n(862),o=n(333),i=n(695);async function s(){return(await(0,i.p4)()).dispatch("get-legacy-pages",void 0)}const c=async e=>({...e,layoutDetails:{machineId:await(0,a.D1)(),machineName:(0,a.fC)()}}),l=async e=>{const t=await(async(e,t)=>({pageId:(0,o.N)(),title:e,layout:await c(t),isReadOnly:!1}))(e.title,(0,r.xP)(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:(0,r.fh)(e.viewOptions)})))),{...e,...t}}},250:(e,t,n)=>{var r;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(r||(r={}))},326:(e,t,n)=>{n.d(t,{Hc:()=>l,aQ:()=>d,p4:()=>o});var r=n(102);n(70);const a=new Map,o=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return o=n,a.has(o)||a.set(o,(0,r.A)(o)),a.get(o)();var o};var i,s,c,l,u;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(i||(i={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(s||(s={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(c||(c={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(l||(l={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(u||(u={}));const d={...i,...s,...u}},79:(e,t,n)=>{var r;n.d(t,{KZ:()=>o,N:()=>i,OF:()=>r,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(r||(r={}));const a=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await a(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},i=async e=>(await o(e),a(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return a(e)}},695:(e,t,n)=>{n.d(t,{N7:()=>h,gj:()=>u,mQ:()=>f,nA:()=>p,p4:()=>c});var r=n(102),a=n(723),o=n(70),i=n(905);const s=(0,r.A)("__of_workspace_protocol__"),c=s,l=s,u=(0,r.A)(i.BT),d=e=>{const t=new URL(e);return t.searchParams.append("isLaunchedViaLib","true"),t.toString()},p=async()=>{if(!await(0,o.C)(o.xt)){if(a.jw||-1===navigator.userAgent.indexOf("Win"))return void await fin.Application.startFromManifest(d(a.m7));await fin.System.openUrlWithBrowser(d(a.t8))}},f=async()=>(await p(),c()),h=async()=>(await p(),l())},905:(e,t,n)=>{n.d(t,{BT:()=>r,Zo:()=>o});const r="__search-openfin-browser-home-topic__";var a,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},257:(e,t,n)=>{n.d(t,{F:()=>a});var r=n(365);const a=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:a,dimensions:o}=n,i=await(0,r.Ae)(e);await t.replace({...n,settings:{...a,hasHeaders:!0,reorderEnabled:!0},dimensions:{...o,headerHeight:i?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}}},957:(e,t,n)=>{var r=n(847),a=(n(70),n(141),n(675),n(877)),o=n.n(a),i=n(67);n.n(i)(),o(),n(695),n(79);r.Palette.brandPrimary,r.Palette.statusSuccess,r.Color.functional1,r.Palette.statusWarning,r.Color.functional10,r.Palette.statusCritical,r.Color.functional7,r.Palette.statusActive,r.Color.functional3,r.Palette.contentBackground1,r.Palette.contentBackground2,r.Palette.contentBackground3,r.Palette.contentBackground4,r.Palette.contentBackground5;r.Palette.background1,r.Color.white,r.Palette.background2,r.Color.lightGray1,r.Palette.background3,r.Color.lightGray2,r.Palette.background4,r.Color.lightGray3,r.Palette.background5,r.Color.lightGray4,r.Palette.background6,r.Color.lightGray5,r.Palette.brandSecondary,r.Color.lightGray4,r.Palette.inputBackground,r.Color.lightGray3,r.Palette.inputColor,r.Color.darkGray5,r.Palette.inputPlaceholder,r.Color.darkGray2,r.Palette.inputDisabled,r.Color.neutralGray,r.Palette.inputFocused,r.Color.lightGray5,r.Palette.inputBorder,r.Color.neutralGray,r.Palette.textDefault,r.Color.darkGray5,r.Palette.textHelp,r.Color.darkGray3,r.Palette.textInactive,r.Color.neutralGray,r.Palette.background1,r.Color.darkGray6,r.Palette.background2,r.Color.darkGray5,r.Palette.background3,r.Color.darkGray4,r.Palette.background4,r.Color.darkGray3,r.Palette.background5,r.Color.darkGray2,r.Palette.background6,r.Color.darkGray1,r.Palette.brandSecondary,r.Color.darkGray2,r.Palette.inputBackground,r.Color.darkGray1,r.Palette.inputColor,r.Color.white,r.Palette.inputPlaceholder,r.Color.lightGray5,r.Palette.inputDisabled,r.Color.neutralGray,r.Palette.inputFocused,r.Color.lightGray5,r.Palette.inputBorder,r.Color.neutralGray,r.Palette.textDefault,r.Color.white,r.Palette.textHelp,r.Color.lightGray5,r.Palette.textInactive,r.Color.neutralGray,r.Color.lightGray4,r.Color.darkGray5,r.Color.darkGray2,r.Color.darkGray5},438:(e,t,n)=>{n.d(t,{BY:()=>u,MW:()=>r,v1:()=>l});var r,a,o=n(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(a||(a={}));const i={uuid:o.$h},s={uuid:r.Workspace},c=e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)},l=()=>c(i),u=()=>c(s)},102:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(723);const a=r.YY&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function o(e){let t;const n=new Set;return()=>{if(!r.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await a;const o={clientAPIVersion:r.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection((async()=>{n.forEach((e=>e())),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),i})().then((e=>(e.addDisconnectionListener=e=>{n.add(e)},e))).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}},365:(e,t,n)=>{n.d(t,{Ae:()=>r}),n(181),n(70);const r=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType}},723:(e,t,n)=>{var r;n.d(t,{$h:()=>c,AT:()=>i,YY:()=>o,cI:()=>a,et:()=>g,fT:()=>u,jw:()=>d,m7:()=>f,t8:()=>p,vL:()=>l}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(r||(r={}));const a="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:r.Local,c=a&&fin.me.uuid,l=a&&fin.me.name,u=a&&fin.me.entityType,d="prod"===r.Local,p=(r.Dev,r.Staging,r.Prod,"fins://system-apps/workspace"),f="https://workspace.openfin.co/workspace/21.0.10/app.json",h=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,g=(h("https://workspace.openfin.co/workspace/21.0.10"),h("https://workspace.openfin.co/workspace/21.0.10"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&h(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&h(WORKSPACE_DOCS_CLIENT_URL),"21.0.10");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},940:(e,t,n)=>{n.d(t,{fh:()=>u,xP:()=>d});var r=n(236),a=n.n(r),o=(n(365),n(723),n(70)),i=n(678),s=n(257),c=n(367);n(413);const l=(e,t)=>e.content?{...e,content:e.content.map((e=>l(e,t)))}:{...e,componentState:t(e.componentState)},u=e=>({...e,name:void 0}),d=e=>{const t={...e};return l(t,u)},p=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const n=p(e.content);t.push(...n)})),t};new Map,new Map,a()((async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?p(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&(0,c.N)().Browser.wrapSync(o.$p).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=(0,c.N)().Browser.wrapSync(o.$p);if("singleView"!==e.attachedPageType){const r=await(0,i.BG)(e),a=await(0,c.N)().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=(0,s.F)({...o.$p,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}}),50,{leading:!1,trailing:!0})},522:(e,t,n)=>{var r;n.d(t,{A:()=>a}),function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(r||(r={}));const a=r},189:(e,t,n)=>{n.r(t),n.d(t,{getItem:()=>o,removeItem:()=>i,setItem:()=>a});var r=n(723);const a=(e,t)=>{localStorage.setItem(`${r.$h}-${e}`,t)},o=e=>localStorage.getItem(`${r.$h}-${e}`),i=e=>localStorage.removeItem(`${r.$h}-${e}`)},786:(e,t,n)=>{n.d(t,{A:()=>a});const r="of-workspace-",a=new class{mark(e){performance.mark(`${r}${e}`)}markStart(e){performance.mark(`${r}${e}-start`)}markEnd(e){performance.mark(`${r}${e}-end`)}markEndAndMeasure(e){performance.mark(`${r}${e}-end`);try{return performance.measure(`${r}${e}`,`${r}${e}-start`,`${r}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${r}${e}`);try{return performance.measure(`${r}${e}-measure`,`${r}${t}-start`,`${r}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(r)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${r}`,"").replace("-measure",""),duration:e.duration})))}}},181:(e,t,n)=>{var r,a;n.d(t,{sP:()=>i}),function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(r||(r={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(a||(a={}));const o="/microsoft-365-integration-assets/",i={IconOpenFinLogo:"/icons/openfinlogo.svg",IconFilter:"/icons/filter.svg",LightStorefront:"/icons/store-icon-light.png",DarkStorefront:"/icons/store-icon-dark.png",CallIconLight:"/icons/call-icon-light.svg",CallIconDark:"/icons/call-icon-dark.svg",ChatIconLight:"/icons/chat-icon-light.svg",ChatIconDark:"/icons/chat-icon-dark.svg",MessageIconLight:"/icons/message-icon-light.svg",MessageIconDark:"/icons/message-icon-dark.svg",Microsoft365Assets:{Microsoft365DocumentIcon:`${o}microsoft-365-document-icon.svg`,Microsoft365ExcelIcon:`${o}microsoft-365-excel-icon.svg`,Microsoft365PowerpointIcon:`${o}microsoft-365-powerpoint-icon.svg`,Microsoft365OutlookIcon:`${o}microsoft-365-outlook-icon.svg`,Microsoft365TeamsIcon:`${o}microsoft-365-teams-icon.svg`,Microsoft365Icon:`${o}microsoft-365-icon.svg`,PDFFileIcon:`${o}pdf-file-icon.svg`},DockIconLight:"/icons/dock-icon-light.png",DockIconDark:"/icons/dock-icon-dark.png"};var s;!function(e){e.Search="search"}(s||(s={}))},523:(e,t,n)=>{var r;n.d(t,{OX:()=>o}),n(723),function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(r||(r={}));const a="/workspace/21.0.10";function o(e){return a+e}},862:(e,t,n)=>{n.d(t,{D1:()=>i,fC:()=>a}),n(940);var r=n(522);function a(){return localStorage.getItem(r.A.MachineName)??"unknown"}let o;async function i(){return o||(o=await fin.System.getMachineId()),o}},277:(e,t,n)=>{n.d(t,{GR:()=>s,ki:()=>l,xt:()=>c});var r,a=n(723),o=n(70);n(141),function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(r||(r={}));const i=async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||a.et,componentName:e,componentVersion:t.componentVersion||a.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})},s=e=>{o.F2.uuid===o.$p.uuid&&o.F2.name===o.$p.name||i(r.Home,e)},c=e=>{i(r.Storefront,e)},l=e=>{i(r.Dock,e)};new Map},333:(e,t,n)=>{function r(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}n.d(t,{N:()=>r})},70:(e,t,n)=>{n.d(t,{$p:()=>c,C:()=>w,F2:()=>u,Io:()=>g,Iq:()=>s,Q:()=>r,T7:()=>d,Tv:()=>l,V1:()=>i,gQ:()=>p,hb:()=>h,ur:()=>m,xt:()=>f});var r,a=n(438),o=n(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(r||(r={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function s(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:o.vL,uuid:o.$h};function l(){return s(c)}const u={name:r.Home,uuid:a.MW.Workspace},d={name:r.Dock,uuid:a.MW.Workspace},p={name:r.Storefront,uuid:a.MW.Workspace},f={name:a.MW.Workspace,uuid:a.MW.Workspace},h=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function g(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>h(e.identity))));return e.filter(((e,n)=>t[n]))}const w=e=>s(e).getOptions().then((()=>!0)).catch((()=>!1));async function m(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,n)=>{const r=function(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}(e,n);return r>t.percentage?{percentage:r,monitor:n}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}},236:e=>{e.exports=n(72)}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{ActionTrigger:()=>Ue.P,AppManifestType:()=>Ve.v,ButtonStyle:()=>je.in,CLIAction:()=>j.PK,CLIFilterOptionType:()=>j.oo,CLITemplate:()=>j.fC,ContainerTemplateFragmentNames:()=>je.ce,Dock:()=>e,DockButtonNames:()=>f.a,Home:()=>P,Integrations:()=>t,Legacy:()=>r,PresentationTemplateFragmentNames:()=>je.np,SearchTagBackground:()=>Ue.R,Storefront:()=>$e,StorefrontTemplate:()=>Ve.z,TemplateFragmentTypes:()=>je.SM});var e={};a.r(e),a.d(e,{DockButtonNames:()=>f.a,deregister:()=>y,minimize:()=>b,register:()=>m,show:()=>v});var t={};a.r(t),a.d(t,{Microsoft365WorkflowIntegration:()=>Be});var r={};a.r(r),a.d(r,{getPages:()=>Ne,getWorkspaces:()=>Le});var i=a(723),s=a(786),c=a(277),l=a(70),u=a(695),d=a(79),p=a(248),f=a(600);let h,g;const w=(e=[])=>{const t=e.filter((e=>!!e.id)).map((e=>e.id));if(new Set(t).size!==t.length)throw new Error("Dock provider buttons must have unique identifiers if specified.")},m=async e=>{(0,p.H)("dock",l.T7);const t=await(async e=>{await(0,d.KZ)(fin.me.identity);const t=await(0,u.N7)();if(g)throw new Error("Error using `Dock.register`. A Dock provider for this Workspace Platform is already registered. Call `Dock.deregister` before calling `Dock.register` again.");return g=e,e.clientAPIVersion=i.et,t.dispatch("register-provider",{providerType:"dock",info:e})})(e);return h=new Promise(((n,r)=>{try{(e=>{e.workspaceComponents&&!Array.isArray(e.workspaceComponents)&&console.warn("Using the `WorkspaceComponentButtonOptions` type to configure the Workspace Components Buttons is deprecated. Please use `WorkspaceButtonsConfig` instead.")})(e),w(e.buttons),(0,c.ki)({allowed:!0,componentVersion:t?.workspaceVersion}),i.et,n({clientAPIVersion:i.et,workspaceVersion:t?.workspaceVersion??"",updateDockProviderConfig:async t=>{if(!g)throw new Error("Error using `Dock.updateDockProviderConfig`. Dock provider is not registered. Make sure to call `Dock.register` first.");w(t.buttons);const n=await(0,u.N7)();await n.dispatch("update-provider",{providerType:"dock",provider:{...e,workspaceComponents:t.workspaceComponents,buttons:t.buttons,title:t.title,icon:t.icon,disableUserRearrangement:t.disableUserRearrangement,id:e.id}})}})}catch(e){(0,c.ki)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),r(e),h=void 0}finally{s.A.markEndAndMeasure("dock-registration")}})),h},y=async()=>{if(await h,!g)throw new Error("Error using `Dock.deregister`. Dock provider is not registered. Call `Dock.register` before calling `Dock.deregister`.");const e=await(0,u.N7)();await e.dispatch("deregister-provider",{providerType:"dock",id:g.id}),g=void 0,h=void 0},b=async()=>{await h,await(0,u.nA)(),await(async()=>(await(0,u.p4)()).dispatch("hide-provider-window",{providerType:"dock"}))()},v=async()=>{s.A.markStart("dock-show"),await h,await(0,u.nA)(),await(async()=>(await(0,u.p4)()).dispatch("show-provider-window",{providerType:"dock"}))()};var k,S,C,P=a(834),I=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},x=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};k=new WeakMap,S=new WeakMap,C=new WeakMap;const A=class{constructor(e){k.set(this,void 0),S.set(this,void 0),C.set(this,void 0),I(this,k,e,"f"),I(this,S,new Map,"f"),I(this,C,[],"f")}get(e){if(x(this,S,"f").has(e))return this.updateQueue(e),x(this,S,"f").get(e)}has(e){return x(this,S,"f").has(e)}put(e,t){if(x(this,S,"f").has(e))x(this,S,"f").set(e,t),this.updateQueue(e);else{if(x(this,C,"f").length===x(this,k,"f")){const e=x(this,C,"f").shift();e&&x(this,S,"f").delete(e)}x(this,S,"f").set(e,t),x(this,C,"f").push(e)}}updateQueue(e){const t=x(this,C,"f").indexOf(e);-1!==t&&(x(this,C,"f").splice(t,1),x(this,C,"f").push(e))}};function _(e){return e&&"object"==typeof e&&!Array.isArray(e)}function E(e,...t){if(!t.length)return e;const n=t.shift();return _(e)&&_(n)&&Object.entries(n).forEach((([t,n])=>{if(_(n))return e[t]||(e[t]={}),E(e[t],n);e[t]=n})),E(e,...t)}var M,T,R,O,W,D=a(181),B=a(523),F=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},N=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};T=new WeakMap,R=new WeakMap,O=new WeakMap,M=new WeakSet,W=function(){const e=Array.from(N(this,T,"f").entries()).reduce(((e,t)=>!e||t[1].timestamp<e[1].timestamp?t:e),null);return e?e[0]:null};const L=class{constructor(e=3e5,t=100){M.add(this),T.set(this,void 0),R.set(this,void 0),O.set(this,void 0),F(this,T,new Map,"f"),F(this,R,e,"f"),F(this,O,t,"f")}get(e){const t=N(this,T,"f").get(e);return t?Date.now()-t.timestamp<N(this,R,"f")?t.value:(N(this,T,"f").delete(e),null):null}put(e,t){if(N(this,T,"f").size>=N(this,O,"f")){const e=N(this,M,"m",W).call(this);null!=e&&N(this,T,"f").delete(e)}N(this,T,"f").set(e,{value:t,timestamp:Date.now()})}remove(e){N(this,T,"f").delete(e)}clear(){N(this,T,"f").clear()}};var $,U=a(333),j=a(872),V=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const G={};class H{constructor(e){$.set(this,new Set),this._initializeWorkflows=async(e=this.config)=>{const{workflows:t}=e;for(const e in t)if(!t[e].disableAutoInitialize)try{V(this,$,"f").has(e)?console.warn(`Workflow ${e} already initialized.`):(V(this,$,"f").add(e),await this.initializeWorkflow(e))}catch(t){V(this,$,"f").delete(e),console.error(`Error registering ${e}:`,t)}};const t=E({},G,e);this.config=t}async initializeWorkflow(e){V(this,$,"f").add(e)}}$=new WeakMap;const z=n(352);let q=0;const K={chatMessage:"Chat Message",event:"Event",message:"Email",drive:"Document",contact:"Contact",user:"User",list:"List"},J={pdf:"PDF",docx:"Word",pptx:"PowerPoint",xlsx:"Excel",onenote:"OneNote"},Z={chatMessage:["Chat.Read","ChannelMessage.Read.All"],list:["Sites.Read.All"],event:["Calendars.Read"],message:["Mail.ReadWrite.Shared"],contact:["Contacts.Read.Shared","Mail.ReadWrite.Shared"],user:["User.Read.All","Presence.Read.All"]},Y="MICROSOFT_365_SEARCH_TYPE_FILTER",Q="MICROSOFT_365_SEARCH_FILE_TYPE_FILTER",X="MICROSOFT_365_SEARCH_DEPARTMENT_FILTER",ee="MICROSOFT_365_SEARCH_JOB_TITLE_FILTER",te="Teams Call",ne="Teams Chat",re="Email",ae=(e,t)=>{const n=[],r={item:e.context.selectedFilters?.find((e=>e.id===Y)),documentType:e.context.selectedFilters?.find((e=>e.id===Q))},a=[{value:"Document",isSelected:!!r.item?.options?.find((({value:e})=>"File"===e))?.isSelected},{value:"Contact",isSelected:!!r.item?.options?.find((({value:e})=>"Contact"===e))?.isSelected},{value:"Chat Message",isSelected:!!r.item?.options?.find((({value:e})=>"Chat Message"===e))?.isSelected},{value:"Email",isSelected:!!r.item?.options?.find((({value:e})=>"Email"===e))?.isSelected},{value:"Event",isSelected:!!r.item?.options?.find((({value:e})=>"Event"===e))?.isSelected},{value:"List",isSelected:!!r.item?.options?.find((({value:e})=>"List"===e))?.isSelected}];return n.push({id:Y,title:"Type",type:j.oo.MultiSelect,options:a.filter((e=>t.has(e.value)))}),"Document"===r.item?.options?.filter((e=>e.isSelected))?.[0].value&&n.push({id:Q,title:"File Type",type:j.oo.MultiSelect,options:Object.entries(J).map((([,e])=>({value:e,isSelected:!!r.documentType?.options?.filter((e=>e.isSelected))?.find((({value:e})=>"File"===e))?.isSelected})))}),n},oe=(e,t)=>{const n=t.context.selectedFilters?.find((e=>e.id===Y))?.options;if(!Array.isArray(n)||!n.find((e=>"Contact"===e.value||"User"===e.value))?.isSelected)return[];const{department:r,jobTitle:a}=e.reduce(((e,t)=>(t.department&&e.department.add(t.department),t.jobTitle&&e.jobTitle.add(t.jobTitle),e)),{department:new Set,jobTitle:new Set}),o=t.context.selectedFilters?.find((e=>e.id===X)),i=Array.from(r).map((e=>({value:e,isSelected:!!o?.options?.find((({value:t})=>t===e))?.isSelected}))),s=t.context.selectedFilters?.find((e=>e.id===X)),c=Array.from(a).map((e=>({value:e,isSelected:!!s?.options?.find((({value:t})=>t===e))?.isSelected})));return[{id:X,title:"Department",type:j.oo.MultiSelect,options:i},{id:ee,title:"Job Title",type:j.oo.MultiSelect,options:c}]},ie=e=>{const t=e.context.selectedFilters?.find((e=>e.id===X)),n=Array.isArray(t?.options)?t.options.filter((e=>e.isSelected)).map((e=>e.value)):[],r=e.context.selectedFilters?.find((e=>e.id===ee));return{department:n,jobTitle:Array.isArray(r?.options)?r.options.filter((e=>e.isSelected)).map((e=>e.value)):[]}},se=(e,t)=>{const{department:n,jobTitle:r}=t;return e.filter((e=>(!n.length||n.includes(e.department))&&(!r.length||r.includes(e.jobTitle))))},ce=e=>{const t=Array.isArray(e.context.selectedFilters?.find((e=>e.id===Q))?.options)?e.context.selectedFilters.find((e=>e.id===Q))?.options:[];return{filterFiles:t&&t.some((({isSelected:e})=>e)),showWord:t.find((({value:e})=>"Word"===e))?.isSelected,showExcel:t.find((({value:e})=>"Excel"===e))?.isSelected,showPowerPoint:t.find((({value:e})=>"PowerPoint"===e))?.isSelected,showPDF:t.find((({value:e})=>"PDF"===e))?.isSelected,showOneNote:t.find((({value:e})=>"OneNote"===e))?.isSelected}},le=(e,t)=>{const n=[];return t.showWord&&n.push(".docx"),t.showExcel&&n.push(".xlsx"),t.showPowerPoint&&n.push(".pptx"),t.showPDF&&n.push(".pdf"),t.showOneNote&&n.push(".one"),e.filter((e=>{if(e.file){const t=e.name.substring(e.name.lastIndexOf("."));return n.includes(t)}return!1}))},ue=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return"Microsoft Word";case"xlsx":case"xls":return"Microsoft Excel";case"pptx":case"ppt":return"Microsoft PowerPoint";case"pdf":return"PDF";case"png":case"jpg":case"jpeg":case"gif":return"Image";case"txt":return"Text";default:return"File"}},de=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365DocumentIcon);case"xlsx":case"xls":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365ExcelIcon);case"pptx":case"ppt":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365PowerpointIcon);case"pdf":return(0,B.OX)(D.sP.Microsoft365Assets.PDFFileIcon);default:return}},pe=e=>e.replace(/\+/g,"_").replace(/\//g,"-");var fe,he,ge,we,me,ye,be,ve,ke,Se,Ce,Pe,Ie,xe,Ae,_e,Ee,Me,Te,Re,Oe,We=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},De=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n};class Be extends H{constructor(e){const t=E({},{workflows:{search:(q+=1,{homeProvider:{description:"Microsoft 365 search results provider",id:`MS365-${fin.me.identity.uuid}-${q}`,logoUrl:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365Icon),icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365Icon),title:"Microsoft 365 Search",inputPlaceholder:"What would you like to search in Microsoft 365 today?",dispatchFocusEvents:!0},microsoftEntityTypeConfig:{message:!0,chatMessage:!0,drive:!0,event:!0,user:!0,contact:!0,list:!0},useTeamsDeepLink:!0})}},e);super(t),fe.add(this),he.set(this,void 0),this.workflowIntegrationName="Microsoft 365",ge.set(this,void 0),we.set(this,void 0),me.set(this,1),ye.set(this,new Set),be.set(this,new A(100)),ve.set(this,new L(6e4)),this.connect=async(e=this.config.connect)=>{const{clientId:t,tenantId:n,redirectUri:r}=e,a=this.config.workflows?.search?Object.entries(this.config.workflows?.search?.microsoftEntityTypeConfig??{}).filter((([e,t])=>t)).map((([e])=>Z[e])).filter((e=>void 0!==e)).flat():[];this.config.connect=e,De(this,he,await(0,z.connect)(t,n,r,[...new Set(a)]),"f")},ke.set(this,(()=>{if(!We(this,he,"f"))throw new Error("Microsoft365WorkflowIntegration not connected");return We(this,he,"f")})),xe.set(this,(async e=>{if(De(this,we,e,"f"),e.data?.item?.id){const t=We(this,ve,"f").get(e.data.item.id);if(t)return void We(this,ge,"f").respond([t])}"user"===e.data?.type&&We(this,Te,"f").call(this,e)})),Ae.set(this,(async e=>{await fin.Platform.getCurrentSync().createWindow({layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{url:e}}]}]},workspacePlatform:void 0})})),_e.set(this,(async e=>{if(e.data.item.channelIdentity.teamId){const t=new URL(`msteams:/l/channel/${e.data.item.channelIdentity.channelId}/${e.data.item.id}`);return!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"channel"})),void await fin.System.openUrlWithBrowser(t.toString())}const t=new URL(`msteams:/l/message/${e.data.item.chatId}/${e.data.item.id}`);!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"chat"})),await fin.System.openUrlWithBrowser(t.toString())})),Ee.set(this,(async e=>{switch(e.action.name){case te:{const t=new z.TeamsConnection(We(this,ke,"f").call(this),this.config.workflows?.search?.useTeamsDeepLink);We(this,fe,"m",Se).call(this,(()=>t.startCall([e.data.item.mail])));break}case re:{const t=await this.executeApiRequest("/v1.0/me/messages","POST",{toRecipients:[{emailAddress:{address:e.data.item.mail}}]});let n=t.data.webLink;const r=new URL(t.data.webLink);if("/owa/"===r.pathname){const e=r.search.slice(1).split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{});if(e.ItemID){const t=e.ItemID;n=`${r.origin}/mail/deeplink/compose/${t}?ItemID=${t}&exvsurl=1`}}await fin.Platform.getCurrentSync().createView({url:n});break}case ne:{const t=We(this,ke,"f").call(this),n=new z.TeamsConnection(t,this.config.workflows?.search?.useTeamsDeepLink);We(this,fe,"m",Se).call(this,(()=>n.startChat({emailAddresses:[t.currentUser.mail,e.data.item.mail]})));break}default:console.warn("Unhandled user action for result:",e,`Unknown action "${e.action.name}"`)}})),Me.set(this,(async e=>{switch(e.data.type){case"driveItem":We(this,Ae,"f").call(this,e.data.item.webUrl);break;case"event":{const t=e.data.item,n=await this.executeApiRequest(`/v1.0/me/events/${t.id}`);We(this,Ae,"f").call(this,n.data.webLink);break}case"chatMessage":We(this,_e,"f").call(this,e);break;case"message":We(this,Ae,"f").call(this,e.data.item.webLink);break;case"list":{const t=e.data.item,n=await this.executeApiRequest(`/v1.0/sites/${t.parentReference?.siteId}/lists/${t.id}`);We(this,Ae,"f").call(this,n.data.webUrl);break}case"user":We(this,Ee,"f").call(this,e);break;default:console.warn("Unhandled user action for result:",e,`Unknown result type "${e.data.type}"`)}})),Te.set(this,(async e=>{let t,n;const r=[],a=e.data.item;We(this,be,"f").has(a.id)?t=We(this,be,"f").get(a.id):r.push({id:"contactPhoto",method:"GET",url:`/users/${e.data.item.id}/photo/$value`,headers:{ConsistencyLevel:"eventual"}}),r.push({id:"presence",method:"GET",url:`/users/${e.data.item.id}/presence`});try{const e=await We(this,fe,"m",Ce).call(this,r),i=e.data?.responses.find((e=>"contactPhoto"===e.id));i&&200!==i.status&&console.warn("Error fetching user photo",i),i?.body&&200===i?.status&&(t=`data:image/jpeg;base64,${i.body}`,We(this,be,"f").put(a.id,t));const s=e.data?.responses.find((e=>"presence"===e.id));200!==s.status&&console.warn("Error fetching user presence",s),s?.body&&200===s.status&&(o=s.body,n={available:"available",availableidle:"available",away:"away",berightback:"away",busy:"busy",busyidle:"busy",donotdisturb:"do-not-disturb",offline:"offline",presenceunknown:"offline"}[o.availability?.toLowerCase()])}catch(e){console.error("Error fetching user data",e)}var o;const i=[["Department",a.department||"N/A"],["Email",a.mail||"N/A"],["Work Phone",a.businessPhones?.[0]||"N/A"],["Mobile",a.mobilePhone||"N/A"],["Location",a.officeLocation||"N/A"]],s={...e,template:j.fC.Contact,templateContent:{name:e.data.item.displayName,title:e.data.item.jobTitle,details:[i],photoUrl:t,onlineStatus:n,buttons:[{type:"button",icon:{light:(0,B.OX)(D.sP.CallIconLight),dark:(0,B.OX)(D.sP.CallIconDark)},tooltip:"Teams Call",action:te},{type:"button",icon:{light:(0,B.OX)(D.sP.ChatIconLight),dark:(0,B.OX)(D.sP.ChatIconDark)},tooltip:"Chat",action:ne},{type:"button",icon:{light:(0,B.OX)(D.sP.MessageIconLight),dark:(0,B.OX)(D.sP.MessageIconDark)},tooltip:"E-mail",action:re}]}};We(this,ve,"f").put(e.data.item.id,s),We(this,ge,"f").respond([s])})),Re.set(this,(async(e,t)=>{if(We(this,ge,"f")&&We(this,ge,"f").close(),De(this,ge,t,"f"),We(this,ge,"f").open(),e.query.length<We(this,me,"f"))return{results:[]};const n=encodeURIComponent(e.query),r=[],a=((e,t)=>{const n=Array.isArray(e.context.selectedFilters?.find((e=>e.id===Y))?.options)?e.context.selectedFilters.find((e=>e.id===Y))?.options:[],r=n.every((({isSelected:e})=>!e));return{showDocuments:t.has("Document")&&(r||!!n.find((({value:e})=>"Document"===e))?.isSelected),showContacts:t.has("Contact")&&(r||!!n.find((({value:e})=>"Contact"===e))?.isSelected),showChatMessages:t.has("Chat Message")&&(r||!!n.find((({value:e})=>"Chat Message"===e))?.isSelected),showMessages:t.has("Email")&&(r||!!n.find((({value:e})=>"Email"===e))?.isSelected),showEvents:t.has("Event")&&(r||!!n.find((({value:e})=>"Event"===e))?.isSelected),showLists:t.has("List")&&(r||!!n.find((({value:e})=>"List"===e))?.isSelected)}})(e,We(this,ye,"f"));if(a.showDocuments){const e=`'${n}'`;r.push({id:"driveItem",method:"GET",url:`/me/drive/root/search(q=${encodeURIComponent(e)})`,headers:{ConsistencyLevel:"eventual"}})}if(a.showEvents&&r.push({id:"event",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["event"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),a.showContacts){const t=`"${e.query}"`;r.push({id:"contact",method:"GET",url:`/me/contacts?$search=${encodeURIComponent(t)}&$top=10`});const n=["displayName","givenName","surname"].map((t=>`"${t}:${e.query}"`)).join(" OR ");r.push({id:"user",method:"GET",url:`/users?$search=${encodeURIComponent(n)}&$top=10&$select=id,displayName,department,mail,businessPhones,mobilePhone,officeLocation,jobTitle`,headers:{ConsistencyLevel:"eventual"}})}if(a.showMessages&&r.push({id:"message",method:"GET",url:`/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(`"${e.query}"`)}&$top=10`}),a.showChatMessages&&r.push({id:"chatMessage",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["chatMessage"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),a.showLists&&r.push({id:"list",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["list"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),0===r.length)return{results:[]};const{results:o,filters:i}=await We(this,fe,"m",Pe).call(this,r,e);return o.find((e=>e.key===We(this,we,"f")?.key))?.template===j.fC.Loading&&We(this,xe,"f").call(this,We(this,we,"f")),{results:o,context:{filters:i}}})),Oe.set(this,(async e=>{switch(e.action.trigger){case Ue.P.FocusChange:We(this,xe,"f").call(this,e);break;case Ue.P.UserAction:We(this,Me,"f").call(this,e);break;case Ue.P.Reload:break;default:console.warn(`Unknown action trigger: ${e.action.trigger}`)}})),this.initializeWorkflow=async e=>{if("search"!==e)throw new Error(`Attempted to initialize unknown workflow: ${e}`);await P.register({...this.config.workflows.search.homeProvider,onUserInput:We(this,Re,"f"),onResultDispatch:We(this,Oe,"f")}),(0,z.enableLogging)(),await this.connect(),super.initializeWorkflow(e)},Object.entries(t.workflows?.search?.microsoftEntityTypeConfig||{}).filter((([e,t])=>t)).forEach((([e])=>{We(this,ye,"f").add(K[e])}))}async executeApiRequest(...e){return We(this,fe,"m",Se).call(this,(()=>We(this,ke,"f").call(this).executeApiRequest(...e)))}}he=new WeakMap,ge=new WeakMap,we=new WeakMap,me=new WeakMap,ye=new WeakMap,be=new WeakMap,ve=new WeakMap,ke=new WeakMap,xe=new WeakMap,Ae=new WeakMap,_e=new WeakMap,Ee=new WeakMap,Me=new WeakMap,Te=new WeakMap,Re=new WeakMap,Oe=new WeakMap,fe=new WeakSet,Se=async function(e){try{return await e()}catch(t){if(t instanceof z.AuthTokenExpiredError)return await this.connect(),e();throw t}},Ce=async function(e){return this.executeApiRequest("/v1.0/$batch","POST",{requests:e})},Pe=async function(e,t){try{const n=await We(this,fe,"m",Ce).call(this,e);return{filters:[...ae(t,We(this,ye,"f")),...oe(n.data.responses.find((e=>"user"===e.id))?.body?.value||[],t)],results:We(this,fe,"m",Ie).call(this,n,t)}}catch(e){return console.warn("Failed to execute Batch API request: ",e),{filters:[],results:[{key:(0,U.N)(),title:"Error Fetching Search Results",description:"",actions:[],template:j.fC.Error,templateContent:`Failed to execute Batch API request: ${JSON.stringify(e)}`}]}}},Ie=function(e,t){let n=[];for(const r of e.data.responses)if(200===r.status)switch(r.id){case"driveItem":{const e=ce(t),a=e.filterFiles?le(r.body.value,e):r.body.value;n.push(...(a||[]).map((e=>({key:e.id??(0,U.N)(),title:e.name??"",description:e.file?.mimeType??"",label:ue(e.name),icon:de(e.name),data:{type:"driveItem",item:e},actions:[{name:"Launch"}],template:j.fC.Plain,templateContent:void 0}))));break}case"event":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.filter((e=>e.resource.subject)).map((e=>{const t=e.resource,n=pe(e.hitId);return{key:n,title:t.subject??"",label:"Calendar Event",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[{name:"Launch"}],data:{type:"event",item:{...t,id:n}},template:j.fC.Plain,templateContent:void 0}}))||[]);break;case"contact":{const e=ie(t),a=se(r.body.value||[],e);n.push(...(a||[]).map((e=>({key:e.id??(0,U.N)(),title:e.displayName??"",label:"Outlook contact",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"contact",item:e},template:j.fC.Plain,templateContent:void 0}))));break}case"user":{const e=ie(t),a=se(r.body.value||[],e);n.push(...(a||[]).map((e=>({key:e.id??(0,U.N)(),title:e.displayName??"",label:"Teams contact",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"user",item:e},template:j.fC.Loading,templateContent:void 0}))));break}case"message":n.push(...(r.body.value||[]).map((e=>({key:e.id??(0,U.N)(),title:`${e.subject??"Untitled Message"}${e.isDraft?" (Draft)":""}`,label:"Email",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"message",item:e},template:j.fC.Plain,templateContent:void 0}))));break;case"chatMessage":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource;return{key:t.id??(0,U.N)(),title:e.summary??"Untitled Message",label:"Chat",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"chatMessage",item:t},template:j.fC.Plain,templateContent:void 0}}))||[]);break;case"list":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource,n=pe(e.hitId);return{key:n,title:t.displayName??"Untitled List",label:"List",actions:[{name:"Launch"}],data:{type:"list",item:{...t,id:n}},template:j.fC.Plain,templateContent:void 0}}))||[]);break;default:console.warn(`Unknown batch response id: ${r.id}`,r.body)}else console.warn("Batch API request failed: ",r);return n=n.map((e=>{if(!e.data?.item?.id)return e;const t=We(this,ve,"f").get(e.data.item.id);return t?{...e,template:t.template,templateContent:t.templateContent}:e})),n.sort(((e,t)=>e.title>t.title?1:-1))};var Fe=a(678);const Ne=()=>Fe._2(),Le=()=>(async()=>(await(0,u.p4)()).dispatch("get-legacy-workspaces",void 0))();var $e=a(598),Ue=a(129),je=a(184),Ve=a(710)})(),e.exports=o})()},41:(e,t,n)=>{e.exports=n(62)},54:(e,t,n)=>{function r(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function a(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const a=r(n);return(e,n)=>a.then((r=>n(r.transaction(t,e).objectStore(t))))}let o;function i(){return o||(o=a("keyval-store","keyval")),o}function s(e,t=i()){return t("readonly",(t=>r(t.get(e))))}function c(e,t,n=i()){return n("readwrite",(n=>(n.put(t,e),r(n.transaction))))}function l(e,t=i()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),r(t.transaction))))}function u(e,t=i()){return t("readonly",(t=>Promise.all(e.map((e=>r(t.get(e)))))))}function d(e,t,n=i()){return n("readwrite",(n=>new Promise(((a,o)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),a(r(n.transaction))}catch(e){o(e)}}}))))}function p(e,t=i()){return t("readwrite",(t=>(t.delete(e),r(t.transaction))))}function f(e,t=i()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),r(t.transaction))))}function h(e=i()){return e("readwrite",(e=>(e.clear(),r(e.transaction))))}function g(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},r(e.transaction)}function w(e=i()){return e("readonly",(e=>{if(e.getAllKeys)return r(e.getAllKeys());const t=[];return g(e,(e=>t.push(e.key))).then((()=>t))}))}function m(e=i()){return e("readonly",(e=>{if(e.getAll)return r(e.getAll());const t=[];return g(e,(e=>t.push(e.value))).then((()=>t))}))}function y(e=i()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([r(t.getAllKeys()),r(t.getAll())]).then((([e,t])=>e.map(((e,n)=>[e,t[n]]))));const n=[];return e("readonly",(e=>g(e,(e=>n.push([e.key,e.value]))).then((()=>n))))}))}n.r(t),n.d(t,{clear:()=>h,createStore:()=>a,del:()=>p,delMany:()=>f,entries:()=>y,get:()=>s,getMany:()=>u,keys:()=>w,promisifyRequest:()=>r,set:()=>c,setMany:()=>l,update:()=>d,values:()=>m})},62:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=(Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.consumer")),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=(Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy")),l=Symbol.iterator,u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,p={};function f(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||u}function h(){}function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||u}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=f.prototype;var w=g.prototype=new h;w.constructor=g,d(w,f.prototype),w.isPureReactComponent=!0;var m=Array.isArray,y={H:null,A:null,T:null,S:null,V:null},b=Object.prototype.hasOwnProperty;function v(e,t,r,a,o,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function P(){}function I(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u,d,p=!1;if(null===e)p=!0;else switch(s){case"bigint":case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case n:case r:p=!0;break;case c:return I((p=e._init)(e._payload),t,a,o,i)}}if(p)return i=i(e),p=""===o?"."+C(e,0):o,m(i)?(a="",null!=p&&(a=p.replace(S,"$&/")+"/"),I(i,t,a,"",(function(e){return e}))):null!=i&&(k(i)&&(u=i,d=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+p,i=v(u.type,d,void 0,0,0,u.props)),t.push(i)),1;p=0;var f,h=""===o?".":o+":";if(m(e))for(var g=0;g<e.length;g++)p+=I(o=e[g],t,a,s=h+C(o,g),i);else if("function"==typeof(g=null===(f=e)||"object"!=typeof f?null:"function"==typeof(f=l&&f[l]||f["@@iterator"])?f:null))for(e=g.call(e),g=0;!(o=e.next()).done;)p+=I(o=o.value,t,a,s=h+C(o,g++),i);else if("object"===s){if("function"==typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(P,P):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,o,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return p}function x(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",(function(e){return t.call(n,e,a++)})),r}"function"==typeof reportError&&reportError;t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Fragment=a,t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=d({},e.props),a=e.key;if(null!=t)for(o in t.ref,void 0!==t.key&&(a=""+t.key),t)!b.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),s=0;s<o;s++)i[s]=arguments[s+2];r.children=i}return v(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+2];a.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return v(e,o,void 0,0,0,a)},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=k,t.useCallback=function(e,t){return y.H.useCallback(e,t)},t.useContext=function(e){return y.H.useContext(e)},t.useEffect=function(e,t,n){var r=y.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useMemo=function(e,t){return y.H.useMemo(e,t)},t.useRef=function(e){return y.H.useRef(e)},t.useState=function(e){return y.H.useState(e)}},63:function(e){!function(t,n){e.exports=n()}(0,(()=>{return e={37007:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(o){r.once&&e.removeEventListener(t,a),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=class{constructor(){const e=new Promise(((e,t)=>{this._resolve=e,this._reject=t}));this._promise=e}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}}},22777:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3089);async function a(e,t){let n=0;for(const r of e)await t(r,n,e),n++}async function o(e,t){await Promise.all(e.map(t))}function i(e,t,n){const a=new r.DeferredPromise,o=e.add(((...e)=>{t(...e)&&(o.remove(),a.resolve())}));return n&&n.catch((e=>{o.remove(),a.reject(e)})),s(a.promise)}function s(e){return e.catch((()=>{})),e}t.serialForEach=a,t.serialMap=async function(e,t){const n=[];return await a(e,(async(e,r,a)=>{n.push(await t(e,r,a))})),n},t.serialFilter=async function(e,t){const n=[];return await a(e,(async(e,r,a)=>{await t(e,r,a)&&n.push(e)})),n},t.parallelForEach=o,t.parallelMap=async function(e,t){const n=[];return await o(e,(async(e,r,a)=>{n[r]=await t(e,r,a)})),n},t.parallelFilter=async function(e,t){const n=[];return await o(e,(async(e,r,a)=>{n[r]=await t(e,r,a)})),e.filter(((e,t)=>n[t]))},t.withStrictTimeout=function(e,t,n){const r=new Promise(((t,r)=>setTimeout((()=>r(new Error(n))),e)));return s(Promise.race([r,t]))},t.withTimeout=function(e,t){const n=new Promise((t=>setTimeout((()=>t([!0,void 0])),e))),r=t.then((e=>[!1,e]));return Promise.race([n,r])},t.untilTrue=function(e,t,n){return t()?Promise.resolve():i(e,t,n)},t.untilSignal=i,t.allowReject=s},95785:(e,t,n)=>{function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(22777)),r(n(3089))},40651:e=>{e.exports=function(e,t){for(var n=e.split("."),r=t.split("."),a=0;a<3;a++){var o=Number(n[a]),i=Number(r[a]);if(o>i)return 1;if(i>o)return-1;if(!isNaN(o)&&isNaN(i))return 1;if(isNaN(o)&&!isNaN(i))return-1}return 0}},33657:function(e,t,n){var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getEventRouter=t.eventEmitter=t.EventRouter=void 0;const a=n(37007),o=n(11154),i=n(59603);class s{constructor(e){this._emitterProviders={},this._deserializers={},this._defaultEmitter=e}registerEmitterProvider(e,t){this._emitterProviders[e]=t}registerDeserializer(e,t){this._deserializers[e]=t}dispatchEvent(e){const{type:t,target:n}=e,a=r(e,["type","target"]);let s;if(!n)throw new Error("Invalid event, no target specified");if("default"===n)s=this._defaultEmitter;else{if(!this._emitterProviders[n.type])throw new Error(`Invalid target, no provider registered for '${n.type}'`);s=this._emitterProviders[n.type](n.id)}const c=Object.assign({type:t},a),l=this._deserializers[t];l?s.emit(t,l(c)):"notification-form-submitted"===t?function(e,t){let n=!1;e.preventDefault=()=>n=!0,t.emit("notification-form-submitted",e),n||(0,o.tryServiceDispatch)(i.APITopic.SET_FORM_STATUS_OPTIONS,{formStatus:"submitted",_notificationId:e.notification.id})}(c,s):s.emit(t,c)}}let c;t.EventRouter=s,t.eventEmitter=new a.EventEmitter,t.getEventRouter=function(){return c||(c=new s(t.eventEmitter)),c}},86455:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBodyClickType=t.ActionNoopType=t.ActionTrigger=void 0,(n=t.ActionTrigger||(t.ActionTrigger={})).CONTROL="control",n.SELECT="select",n.CLOSE="close",n.EXPIRE="expire",n.PROGRAMMATIC="programmatic",(t.ActionNoopType||(t.ActionNoopType={})).EVENT_DISMISS="event_dismiss",(t.ActionBodyClickType||(t.ActionBodyClickType={})).DISMISS_EVENT="dismiss_event"},27167:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getChannelClient=t.clearAwaitedChannelClient=t.initAwaitedChannelClient=t.ChannelClientConfig=void 0;const r=n(59603),a=n(75762);t.ChannelClientConfig={serviceChannel:r.SERVICE_CHANNEL};const o=async({wait:e})=>{await a.Log.info("Connecting to Notifications...");const n=await fin.InterApplicationBus.Channel.connect(t.ChannelClientConfig.serviceChannel,{wait:e,payload:{version:"2.10.0"}});return await a.Log.info("Successfully connected to Notifications."),n};let i,s;t.initAwaitedChannelClient=()=>i?{channelClientPromise:i,isInit:!1}:(i=o({wait:!0}),i.catch((e=>(0,t.clearAwaitedChannelClient)())),{channelClientPromise:i,isInit:!0}),t.clearAwaitedChannelClient=()=>{i=null},t.getChannelClient=async()=>i||(async()=>{if(!s){try{s=await o({wait:!1}),s.setDefaultAction((()=>!1))}catch(e){throw await a.Log.error('Could not find channel provider. Did you call "notifications.register()"?'),e}s.onDisconnection((()=>{s=null}))}return s})()},11154:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryServiceDispatch=t.getServicePromise=t.launchSystemApp=t.connectToNotifications=void 0;const r=n(95785),a=n(59603),o=n(33657),i=n(27167);let s;const c=new r.DeferredPromise;let l=!1;async function u(){if(window.navigator.appVersion.includes("Windows"))try{const e=await fin.System.getRvmInfo();parseInt(e.version.split(".")[0])>=6&&(fin.System.launchManifest?fin.System.launchManifest("fins://system-apps/notification-center",{noUi:!0}).catch((e=>{console.error("Unable to launch the Notification Center as a system app",e)})):fin.System.openUrlWithBrowser("fins://system-apps/notification-center").catch((()=>{})))}catch(e){}else fin.System.openUrlWithBrowser("fins://system-apps/notification-center")}async function d(){var e;if(await c.promise,!s){if("undefined"==typeof fin){const e="fin is not defined. The openfin-notifications module is only intended for use in an OpenFin application.";return s=Promise.reject(new Error(e)),s}fin.System.getVersion().then((e=>{const t=parseInt(e.split(".")[2]);t<53&&console.warn(`API version ${t} of OpenFin version ${e} is less than 53. Please upgrade the runtime version.`)}));const{name:t,uuid:n}=null!==(e=fin.me.identity)&&void 0!==e?e:fin.Window.me;if(n===a.SERVICE_IDENTITY.uuid&&t===a.SERVICE_IDENTITY.name)s=Promise.reject(new Error("Trying to connect to provider from provider"));else{const e=window.setTimeout((()=>{console.warn("Taking a long time to connect to Notifications service. Is the Notifications service running?")}),5e3);s=(0,i.initAwaitedChannelClient)().channelClientPromise.then((t=>{window.clearTimeout(e);const n=(0,o.getEventRouter)();return t.register("WARN",(e=>console.warn(e))),t.register("event",(e=>{n.dispatchEvent(e)})),t.setDefaultAction((()=>!1)),t.onDisconnection((()=>{console.warn("Disconnected from Notifications service"),(0,i.clearAwaitedChannelClient)(),l=!0,s=null,u(),setTimeout((()=>{console.log("Attempting to reconnect to Notifications service"),d()}),300)})),l?console.log("Reconnected to Notifications service"):console.log("Connected to Notifications service"),t}))}}return s}t.connectToNotifications=function(){"undefined"!=typeof fin&&"undefined"!=typeof window?(u(),d(),"loading"!==document.readyState?c.resolve():(window.addEventListener("DOMContentLoaded",(()=>{c.resolve()})),document.addEventListener("DOMContentLoaded",(()=>{c.resolve()})))):console.warn("Could not connect to notifications, `fin` is not defined")},t.launchSystemApp=u,t.getServicePromise=d,t.tryServiceDispatch=async function(e,t){return(await(0,i.getChannelClient)()).dispatch(e,t)}},87204:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldType=void 0,t.FieldType={string:"string",number:"number",boolean:"boolean",date:"date",checkboxGroup:"checkboxGroup",radioGroup:"radioGroup",time:"time"}},68912:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(93955),t),a(n(33713),t)},33713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetType=t.TimeWidgetType=t.DateWidgetType=t.RadioGroupWidgetType=t.CheckboxGroupWidgetType=t.BooleanWidgetType=t.NumberWidgetType=t.StringWidgetType=void 0,t.StringWidgetType={Text:"Text",Dropdown:"Dropdown"},t.NumberWidgetType={Number:"Number"},t.BooleanWidgetType={Toggle:"Toggle",Checkbox:"Checkbox"},t.CheckboxGroupWidgetType={CheckboxGroup:"CheckboxGroup"},t.RadioGroupWidgetType={RadioGroup:"RadioGroup"},t.DateWidgetType={Date:"Date"},t.TimeWidgetType={Time:"Time"},t.WidgetType=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.StringWidgetType),t.NumberWidgetType),t.BooleanWidgetType),t.CheckboxGroupWidgetType),t.RadioGroupWidgetType),t.DateWidgetType),t.TimeWidgetType)},46865:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.IndicatorColor=t.IndicatorType=void 0,(r=t.IndicatorType||(t.IndicatorType={})).FAILURE="failure",r.WARNING="warning",r.SUCCESS="success",(n=t.IndicatorColor||(t.IndicatorColor={})).RED="red",n.GREEN="green",n.YELLOW="yellow",n.BLUE="blue",n.PURPLE="purple",n.GRAY="gray",n.ORANGE="orange",n.MAGENTA="magenta",n.TEAL="teal"},59603:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.APITopic=t.getChannelName=t.SERVICE_CHANNEL=t.SERVICE_IDENTITY=void 0,t.SERVICE_IDENTITY={uuid:"notifications-service",name:"notifications-service"},t.SERVICE_CHANNEL="of-notifications-service-v1",t.getChannelName=e=>e===t.SERVICE_IDENTITY.uuid?t.SERVICE_CHANNEL:`${e}-${t.SERVICE_CHANNEL}`,(n=t.APITopic||(t.APITopic={})).CREATE_NOTIFICATION="create-notification",n.UPDATE_NOTIFICATION="update-notification",n.CLEAR_NOTIFICATION="clear-notification",n.GET_APP_NOTIFICATIONS="fetch-app-notifications",n.CLEAR_APP_NOTIFICATIONS="clear-app-notifications",n.TOGGLE_NOTIFICATION_CENTER="toggle-notification-center",n.ADD_EVENT_LISTENER="add-event-listener",n.REMOVE_EVENT_LISTENER="remove-event-listener",n.GET_PROVIDER_STATUS="get-provider-status",n.GET_NOTIFICATIONS_COUNT="get-notifications-count",n.SHOW_NOTIFICATION_CENTER="show-notification-center",n.HIDE_NOTIFICATION_CENTER="hide-notification-center",n.REGISTER_PLATFORM="register-notifications-platform",n.DEREGISTER_PLATFORM="deregister-notifications-platform",n.SET_FORM_STATUS_OPTIONS="set-form-status-options",n.SET_FORM_VALIDATION_ERRORS="set-form-validation-errors",n.GET_USER_SETTINGS_STATUS="get-user-settings-status",n.SET_DEFAULT_PLATFORM_SHORTCUT="set-default-platform-shortcut",n.SET_NOTIFICATION_SECURITY_RULE="set-notification-security-rule"},75762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;class n{static async error(e){try{const t=n.getPrefixedMessage(e);console.error(t),await fin.System.log("error",t)}catch(e){n.handleError(e,"Failed to log error")}}static async warn(e){try{const t=n.getPrefixedMessage(e);console.warn(t),await fin.System.log("warning",t)}catch(e){n.handleError(e,"Failed to log warning")}}static async info(e){try{const t=n.getPrefixedMessage(e);console.info(t),await fin.System.log("info",t)}catch(e){n.handleError(e,"Failed to log info")}}static getPrefixedMessage(e){return`${n.LOG_PREFIX} ${e}`}static handleError(e,t){e instanceof Error?console.error(`${t} - ${e.name}: ${e.message}`):console.error(`${t} - ${JSON.stringify(e)}`)}}t.Log=n,n.LOG_PREFIX="[openfin-notifications]"},40707:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.setAllowedOrigins=t.getUserSettingStatus=t.UserSettings=t.getNotificationsCount=t.hide=t.show=t.setDefaultPlatformShortcut=t.toggleNotificationCenter=t.clearAll=t.getAll=t.clear=t.update=t.create=t.removeEventListener=t.addEventListener=t.VERSION=t.NotificationIndicatorType=t.IndicatorColor=t.NotificationIndicatorWithCustomColor=t.NotificationIndicator=t.NotificationOptions=t.provider=t.actions=void 0;const c=n(86455),l=n(11154),u=n(59603),d=n(33657),p=o(n(46451));t.provider=p;const f=n(28173),h=n(46865);Object.defineProperty(t,"NotificationIndicator",{enumerable:!0,get:function(){return h.NotificationIndicator}}),Object.defineProperty(t,"NotificationIndicatorWithCustomColor",{enumerable:!0,get:function(){return h.NotificationIndicatorWithCustomColor}}),Object.defineProperty(t,"NotificationIndicatorType",{enumerable:!0,get:function(){return h.IndicatorType}}),Object.defineProperty(t,"IndicatorColor",{enumerable:!0,get:function(){return h.IndicatorColor}});const g=n(44415);Object.defineProperty(t,"NotificationOptions",{enumerable:!0,get:function(){return g.NotificationOptions}});const w=o(n(86455));t.actions=w,i(n(86455),t),i(n(87204),t),i(n(50295),t),i(n(68912),t),i(n(13154),t),i(n(75050),t),i(n(90512),t),t.VERSION="2.10.0";const m=(0,d.getEventRouter)();function y(e){const{notification:t}=e;return Object.assign(Object.assign({},e),{notification:Object.assign(Object.assign({},t),{date:new Date(t.date),expires:null!==t.expires?new Date(t.expires):null})})}m.registerDeserializer("notification-created",(e=>y(e))),m.registerDeserializer("notification-toast-dismissed",(e=>y(e))),m.registerDeserializer("notification-closed",(e=>y(e))),m.registerDeserializer("notification-action",(e=>{var t;const n=y(e),{controlSource:r,controlIndex:a}=n,o=s(n,["controlSource","controlIndex"]);return e.trigger===c.ActionTrigger.CONTROL?Object.assign(Object.assign({},o),{control:null===(t=e.notification[r])||void 0===t?void 0:t[a]}):o})),m.registerDeserializer("notifications-count-changed",(e=>e)),m.registerDeserializer("notification-reminder-created",(e=>{const t=y(e),{reminderDate:n}=t,r=s(t,["reminderDate"]);return Object.assign(Object.assign({},r),{reminderDate:new Date(n)})})),m.registerDeserializer("notification-reminder-removed",(e=>y(e))),m.registerDeserializer("notification-sound-toggled",(e=>e)),t.addEventListener=async function(e,t){(0,f.validateEnvironment)(),e=(0,f.sanitizeEventType)(e),t=(0,f.sanitizeFunction)(t);const n=d.eventEmitter.listenerCount(e);"notification-form-submitted"===e&&(t=function(e){return t=>{const n=t.notification.id;t.setFormStatus=e=>(0,l.tryServiceDispatch)(u.APITopic.SET_FORM_STATUS_OPTIONS,Object.assign(Object.assign({},e),{_notificationId:n})),e(t)}}(t)),"notification-form-values-changed"===e&&(t=function(e){return t=>{t.setErrors=e=>(0,l.tryServiceDispatch)(u.APITopic.SET_FORM_VALIDATION_ERRORS,{errors:e,notificationId:t.notification.id}),e(t)}}(t)),d.eventEmitter.addListener(e,t),0===n&&1===d.eventEmitter.listenerCount(e)&&await(0,l.tryServiceDispatch)(u.APITopic.ADD_EVENT_LISTENER,e)},t.removeEventListener=async function(e,t){(0,f.validateEnvironment)(),e=(0,f.sanitizeEventType)(e),t=(0,f.sanitizeFunction)(t),1===d.eventEmitter.listenerCount(e)&&d.eventEmitter.listeners(e)[0]===t&&await(0,l.tryServiceDispatch)(u.APITopic.REMOVE_EVENT_LISTENER,e),d.eventEmitter.removeListener(e,t)},t.create=async function(e,t){if("object"!=typeof e||null===e)throw new Error("Invalid argument passed to create: argument must be an object and must not be null");if(void 0!==e.date&&!(e.date instanceof Date))throw new Error('Invalid argument passed to create: "date" must be a valid Date object');if(void 0!==e.expires&&null!==e.expires&&!(e.expires instanceof Date))throw new Error('Invalid argument passed to create: "expires" must be null or a valid Date object');if(t&&t.reminderDate){if(!1===e.allowReminder)throw new Error('You must not specify a reminder date for a notification with "allowReminder" option set to false.');if(!(t.reminderDate instanceof Date))throw new Error('Invalid argument passed to reminder Options: "date" must a valid Date object');if(e.expires&&e.expires.getTime()<t.reminderDate.getTime())throw new Error("Expiration date must not be earlier than reminder date.")}void 0!==e.category&&null!==e.category||(e.category="default");const n=await(0,l.tryServiceDispatch)(u.APITopic.CREATE_NOTIFICATION,Object.assign(Object.assign({},e),{date:e.date&&e.date.valueOf(),expires:e.expires&&e.expires.valueOf(),reminder:(null==t?void 0:t.reminderDate)&&t.reminderDate.valueOf()}));return Object.assign(Object.assign({},n),{date:new Date(n.date),expires:null!==n.expires?new Date(n.expires):null})},t.update=async function(e){if("object"!=typeof e||null===e)throw new Error("Invalid argument passed to create: argument must be an object and must not be null");if(!e.id)throw new Error('Invalid argument passed to create: "id" must be Id of previously created Notification');const t=await(0,l.tryServiceDispatch)(u.APITopic.UPDATE_NOTIFICATION,Object.assign({},e));return Object.assign({},t)},t.clear=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.CLEAR_NOTIFICATION,{id:e})},t.getAll=async function(){return(await(0,l.tryServiceDispatch)(u.APITopic.GET_APP_NOTIFICATIONS,void 0)).map((e=>Object.assign(Object.assign({},e),{indicator:e.indicator||null,date:new Date(e.date),expires:null!==e.expires?new Date(e.expires):null})))},t.clearAll=async function(){return(0,l.tryServiceDispatch)(u.APITopic.CLEAR_APP_NOTIFICATIONS,void 0)},t.toggleNotificationCenter=async function(){return(0,l.tryServiceDispatch)(u.APITopic.TOGGLE_NOTIFICATION_CENTER,void 0)},t.setDefaultPlatformShortcut=function(e){return(0,l.tryServiceDispatch)(u.APITopic.SET_DEFAULT_PLATFORM_SHORTCUT,e)},t.show=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.SHOW_NOTIFICATION_CENTER,e)},t.hide=async function(){return(0,l.tryServiceDispatch)(u.APITopic.HIDE_NOTIFICATION_CENTER,void 0)},t.getNotificationsCount=async function(){return(0,l.tryServiceDispatch)(u.APITopic.GET_NOTIFICATIONS_COUNT,void 0)},(t.UserSettings||(t.UserSettings={})).SOUND_ENABLED="soundEnabled",t.getUserSettingStatus=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.GET_USER_SETTINGS_STATUS,e)},t.setAllowedOrigins=async e=>(0,l.tryServiceDispatch)(u.APITopic.SET_NOTIFICATION_SECURITY_RULE,{allowedOrigins:e})},46451:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isConnectedToAtLeast=t.getStatus=void 0;const a=r(n(40651)),o=n(95785),i=n(11154),s=n(59603);function c(){return(0,o.withStrictTimeout)(500,(0,i.tryServiceDispatch)(s.APITopic.GET_PROVIDER_STATUS,void 0),"").catch((()=>({connected:!1,version:null,templateAPIVersion:null})))}t.getStatus=c,t.isConnectedToAtLeast=async function(e){const t=await c();if(t.connected&&null!==t.version){const n=(0,a.default)(t.version,e);if(0===n||1===n)return!0}return!1}},5879:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.ChannelClientHandlers=void 0;const r=n(59603),a=n(33657),o=n(75762),i=n(27167),s=n(46451);class c{}t.ChannelClientHandlers=c,c.handleDefaultAction=()=>!1,c.handleEventAction=e=>{(0,a.getEventRouter)().dispatchEvent(e)},c.handleWarnAction=async e=>{await o.Log.warn(e)},c.handleDisconnection=async()=>{(0,i.getChannelClient)()&&(await o.Log.warn("Disconnected from Notifications. Reconnecting..."),(0,i.clearAwaitedChannelClient)(),await d(),await p())};let l=null;t.register=async e=>{if(l)return l;try{return l=u(e),await l}finally{l=null}};const u=async e=>{if(null==e?void 0:e.customManifest){if(!e.customManifest.manifestUrl)throw new Error("manifestUrl must be provided.");if(!e.customManifest.manifestUuid)throw new Error("manifestUuid must be provided and must not be an empty string.");if(e.customManifest.manifestUuid===r.SERVICE_CHANNEL)throw new Error(`manifestUuid must not be ${r.SERVICE_CHANNEL}`);i.ChannelClientConfig.serviceChannel=`${e.customManifest.manifestUuid}-${r.SERVICE_CHANNEL}`,await d(e.customManifest.manifestUrl)}else i.ChannelClientConfig.serviceChannel=r.SERVICE_CHANNEL,await d();return await p(),{clientAPIVersion:"2.10.0",notificationsVersion:(await(0,s.getStatus)()).version||"unknown"}},d=async e=>{try{const t=window.navigator.userAgent.toLowerCase().includes("windows"),n=e||"fins://system-apps/notification-center";t?(await o.Log.info("Launching Notifications via fin.System.launchManifest..."),await fin.System.launchManifest(n,{noUi:!0})):(await o.Log.info("Launching Notifications via fin.System.openUrlWithBrowser..."),await fin.System.openUrlWithBrowser(n))}catch(e){throw e instanceof Error?await o.Log.error(`Failed to launch Notifications - ${e.name}: ${e.message}`):await o.Log.error(`Failed to launch Notifications - ${JSON.stringify(e)}`),e}},p=async()=>{try{const{channelClientPromise:e,isInit:t}=(0,i.initAwaitedChannelClient)(),n=await e;t&&(n.setDefaultAction(c.handleDefaultAction),n.register("event",c.handleEventAction),n.register("WARN",c.handleWarnAction),n.onDisconnection(c.handleDisconnection),fin.Window.wrapSync(r.SERVICE_IDENTITY).once("closed",c.handleDisconnection))}catch(e){throw e instanceof Error?await o.Log.error(`Failed to connect to Notifications - ${e.name}: ${e.message}`):await o.Log.error(`Failed to connect to Notifications - ${JSON.stringify(e)}`),e}}},13154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50295:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},78364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71474:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},90512:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(78364),t),a(n(71474),t),a(n(44415),t),a(n(15915),t)},44415:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateFragmentNames=t.PresentationTemplateFragmentNames=t.ContainerTemplateFragmentNames=t.TemplateNames=void 0,t.TemplateNames={markdown:"markdown",list:"list",custom:"custom"},t.ContainerTemplateFragmentNames={container:"container"},t.PresentationTemplateFragmentNames={text:"text",image:"image",list:"list",actionableText:"actionableText"},t.TemplateFragmentNames=Object.assign(Object.assign({},t.ContainerTemplateFragmentNames),t.PresentationTemplateFragmentNames)},15915:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28173:(e,t)=>{function n(e,t){let n;try{n=JSON.stringify(e)}catch(e){n=t}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.safeStringify=t.validateEnvironment=t.sanitizeEventType=t.sanitizeFunction=void 0,t.sanitizeFunction=function(e){if("function"!=typeof e)throw new Error(`Invalid argument passed: ${n(e,"The provided value")} is not a valid function`);return e},t.sanitizeEventType=function(e){if("notification-action"===e||"notification-created"===e||"notification-toast-dismissed"===e||"notification-closed"===e||"notifications-count-changed"===e||"notification-form-submitted"===e||"notification-reminder-created"===e||"notification-reminder-removed"===e||"notification-form-values-changed"===e||"notification-sound-toggled"===e)return e;throw new Error(`Invalid argument passed: ${n(e,"The provided event type")} is not a valid Notifications event type`)},t.validateEnvironment=function(){if("undefined"==typeof fin)throw new Error("fin is not defined. The openfin-notifications module is only intended for use in an OpenFin application.")},t.safeStringify=n},80664:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsRegistration=t.register=void 0,a(n(40707),t);var o=n(5879);Object.defineProperty(t,"register",{enumerable:!0,get:function(){return o.register}}),Object.defineProperty(t,"NotificationsRegistration",{enumerable:!0,get:function(){return o.NotificationsRegistration}})}},t={},function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(80664);var e,t}))},72:(e,t,n)=>{var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return u.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||i.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,o,i,s,c,l=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=a;return r=a=void 0,l=t,i=e.apply(o,n)}function b(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function v(){var e=h();if(b(e))return k(e);s=setTimeout(v,function(e){var n=t-(e-c);return d?f(n,o-(e-l)):n}(e))}function k(e){return s=void 0,m&&r?y(e):(r=a=void 0,i)}function S(){var e=h(),n=b(e);if(r=arguments,a=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(v,t),u?y(e):i}(c);if(d)return s=setTimeout(v,t),y(c)}return void 0===s&&(s=setTimeout(v,t)),i}return t=w(t)||0,g(n)&&(u=!!n.leading,o=(d="maxWait"in n)?p(w(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},S.flush=function(){return void 0===s?i:k(h())},S}},81:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(v[e])e=v[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(W(r.r)&&W(r.g)&&W(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):W(r.h)&&W(r.s)&&W(r.v)?(l=A(r.s),u=A(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):W(r.h)&&W(r.s)&&W(r.l)&&(l=A(r.s),d=A(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[x(_(r)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function w(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function m(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function b(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16)),x(_(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(w,[3])},tetrad:function(){return this._applyCombination(w,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:A(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var v=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(v);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function I(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function A(e){return e<=1&&(e=100*e+"%"),e}function _(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return I(e)/255}var M,T,R,O=(T="[\\s|\\(]+("+(M="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",R="[\\s|\\(]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",{CSS_UNIT:new RegExp(M),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},317:(e,t,n)=>{var r=n(189),a=n(522);const o=n(675).qT.System,i=e=>Object.entries(e).reduce(((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`),""),s=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(a.A.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(a.A.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(a.A.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=i({...e,...s(e,"light")}),this.darkPaletteVars=i({...t,...s(t,"dark")})}}setScheme(e){this.providerStorage.setItem(a.A.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(a.A.SelectedColorScheme)&&this.providerStorage.setItem(a.A.SelectedColorScheme,o),this.providerStorage.getItem(a.A.SelectedColorScheme)}}(r)},367:(e,t,n)=>{n.d(t,{N:()=>m,A:()=>w});var r=n(723),a=n(79),o=n(675),i=n(70),s=n(786),c=n(333),l=n(326);const u=(0,n(102).A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`);var d=n(141);const p=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await u()).dispatch(l.Hc.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await u()).dispatch(l.Hc.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetPagesForWindow,e),getPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>(0,d.Nt)().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await(0,a.bW)(e),o={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(a.OF.AddPage,o)},removePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>(0,d.Nt)().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await(0,a.bW)(e),o=(await r.dispatch(a.OF.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===n));if(!o)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);o.multiInstanceViewBehavior="reparent";const i={identity:e,pages:[o],insertionIndex:t.index};return r.dispatch(a.OF.AttachPagesToWindow,i)},setActivePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,a.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,a.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await(0,a.bW)(e),(await(0,l.p4)(e)).dispatch(l.aQ.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await(0,l.p4)(e)).dispatch(l.aQ.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await(0,a.bW)(e);return t.identity=e,n.dispatch(a.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,a.bW)(e)).dispatch(a.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,a.bW)(e)).dispatch(a.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,a.bW)(e)).dispatch(a.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,a.bW)(e)).dispatch(a.OF.HandleRequestNavigationInternal,t)}),f=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>p(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${(0,c.N)()}`;return s.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{s.A.markAndMeasure("browser-window-shown",e)}))})(r),await(0,a.bW)(e);const o=await t.createWindow(n);return(e=>{s.A.markAndMeasure("browser-window-started",e)})(r),p(o.identity)},getAllAttachedPages:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>(await(0,a.bW)(e),(await(0,i.Io)()).map((e=>p(e.identity)))),getUniquePageTitle:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,a.bW)(e)).dispatch(a.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetPageByViewIdentity,t)}},h=e=>({createPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetSavedPage,t),getPages:async t=>(await(0,a.bW)(e)).dispatch(a.OF.GetSavedPages,t),savePage:async t=>(await(0,a.bW)(e)).dispatch(a.OF.SavePage,t),createWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=m(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await(0,a.N)(e)).dispatch(a.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetSavedWorkspaces,t),saveWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,a.N)(e)).dispatch(a.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,a.N)(e)).dispatch(a.OF.SaveDockProviderConfig,t)});var g=n(396);const w=e=>{const t=fin.Platform.wrapSync(e);let n;return Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:r.$h,name:r.vL,entityType:r.fT||"unknown"}),(await(0,a.N)(e)).dispatch(a.OF.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await(0,a.N)(e),i={actionId:t,payload:{...n,callerType:n.callerType||o.vc.API}};return r.dispatch(a.OF.InvokeCustomActionInternal,i)},_requestQuitPlatformDialog:async t=>(await(0,a.N)(e)).dispatch(a.OF.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await(0,a.N)(e)).dispatch(a.OF.ApplyWorkspace,{...t,options:n}),setActiveWorkspace:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetLanguage),_getLanguageResources:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await(0,a.KZ)(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await(0,a.N)(e)).dispatch(a.OF.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,a.N)(e)).dispatch(a.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,a.N)(e)).dispatch(a.OF.FocusAndExpandSearchInternal),Theme:(0,g.NA)(e),Browser:f(e),Storage:h(e)})},m=()=>w(fin.me.identity)},396:(e,t,n)=>{n.d(t,{NA:()=>i}),n(181),n(70),n(326);var r,a=n(102);!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(r||(r={})),(0,a.A)("of-workspace-notifications-sync"),n(695);var o=n(79);n(317);const i=e=>({getThemes:async()=>(await(0,o.N)(e)).dispatch(o.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,o.N)(e)).dispatch(o.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,o.N)(e)).dispatch(o.OF.GetSelectedScheme,void 0)})},141:(e,t,r)=>{r.d(t,{Nt:()=>d.N,Ag:()=>d.A}),r(675);var a=r(723);r(181);var o=r(70);r(365);const i=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise((e=>setTimeout(e,t)));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{r=void 0})),r)};var s;!function(e){e.Top="top",e.Below="below"}(s||(s={}));const c=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};i((async function(e,t,n,r,a){const i=t.getBoundingClientRect(),l=await async function(e,t,n,r,a,i){const l=!!e&&(0,o.Iq)(e),u=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(l,i);if(r===s.Below){if(!l||await c(l)){const e=l?(await(0,o.ur)(u)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,o.V1)(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:(0,o.V1)(u).left-t/2,top:a?u.bottom-128:u.bottom+12,width:t,height:n}}if(!l||await c(l)){const e=l?(await(0,o.ur)(u)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,o.V1)(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:(0,o.V1)(u).left-t/2,top:u.top+20,width:t,height:n}}(e,i.width,i.height,n,r,a);if(0===l.width||0===l.height)return;const u=(0,o.Tv)();await u.setBounds(l),await u.show();const d=setTimeout((()=>u.close()),r?5e3:3e3),p=()=>{clearTimeout(d),u.close()};if(e){const t=(0,o.Iq)(e);t.on("bounds-changing",(()=>p())),t.on("blurred",(()=>p())),t.on("maximized",(()=>p())),t.on("minimized",(()=>p())),t.on("restored",(()=>p()))}}),10),r(277),r(957);var l=r(438);r(940),n(434);const u=n(232);r.n(u)().t,r(678),r(326),r(79);var d=r(367);new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}},new Map,(()=>{const e={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};e.workspacePlatform||(e.workspacePlatform={}),e.workspacePlatform._internalDeferShowOptions={setAsForeground:!1,deferShowEnabled:!0,autoShow:e.workspacePlatform?._internalAutoShow||e.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===e.autoShow||e.autoShow},e.autoShow=!1})(),new Map;var p=r(522),f=r(189);r(523),o.Q.BrowserMenu,function(e,t){t&&t((t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach((e=>e(...r)))}))}(new Map,(e=>a.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},"window.menu",e))),i((()=>(0,l.v1)().getChildWindows()),500),new Map,r(317),new Map;var h,g,w=r(236);r.n(w)()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===o.Q.BrowserMenu||r.identity.name===o.Q.BrowserSaveMenu?t=r:await(0,o.hb)(r.identity)&&(n=!0),n)break;!n&&t&&t.close()}),100,{leading:!1,trailing:!0}),function(e){e.Save="Save",e.SaveAs="SaveAs"}(h||(h={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(g||(g={})),r(862);const m=n(54),y=(e,t)=>(0,m.createStore)(e+"-"+fin.me.uuid,t),b=(e,t)=>{const n=y(e,t);return(async(e,t,n)=>{const r=f.getItem(p.A.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,f.setItem(p.A.HasMovedStore,JSON.stringify(a));const o=await(0,m.entries)(e);await(0,m.setMany)(o,t)})((0,m.createStore)(e,t),n,e),n};var v,k;a.AT&&a.cI&&b("openfin-home-pages","pages"),a.AT&&a.cI&&y("openfin-enterprise-tab-history","removed-tab-stack"),a.AT&&a.cI&&y("openfin-enterprise-site-history","visited-sites"),function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(v||(v={})),v.Separator,r(257),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(k||(k={})),(0,r(102).A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),a.AT&&a.cI&&y("dock-provider-configs","dock-provider-configs"),r(396),a.AT&&a.cI&&b("openfin-workspace-platform-workspaces","workspaces"),r(250),o.$p.uuid,o.Q.BrowserAddressSearchPrefix,r(413),r(179)},413:(e,t,n)=>{},675:(e,t,n)=>{var r,a,o,i,s,c,l,u,d,p,f,h;n.d(t,{qT:()=>o,vc:()=>f}),n(179),n(250),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(r||(r={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(a||(a={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(l||(l={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(u||(u={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(d||(d={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(f||(f={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(h||(h={}))},129:()=>{var e,t,n;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(n||(n={}))},600:(e,t,n)=>{var r;!function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(r||(r={}))},872:(e,t,n)=>{var r,a,o;!function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(a||(a={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,n)=>{n(129),n(872),n(710),n(184),n(600)},710:(e,t,n)=>{var r,a;!function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(r||(r={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(a||(a={}))},184:(e,t,n)=>{var r;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(r||(r={}))},678:(e,t,n)=>{n.d(t,{BG:()=>s});var r=n(940),a=n(862),o=n(333);n(695);const i=async e=>({...e,layoutDetails:{machineId:await(0,a.D1)(),machineName:(0,a.fC)()}}),s=async e=>{const t=await(async(e,t)=>({pageId:(0,o.N)(),title:e,layout:await i(t),isReadOnly:!1}))(e.title,(0,r.xP)(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:(0,r.fh)(e.viewOptions)})))),{...e,...t}}},250:(e,t,n)=>{var r;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(r||(r={}))},326:(e,t,n)=>{n.d(t,{Hc:()=>l,aQ:()=>d,p4:()=>o});var r=n(102);n(70);const a=new Map,o=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return o=n,a.has(o)||a.set(o,(0,r.A)(o)),a.get(o)();var o};var i,s,c,l,u;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(i||(i={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(s||(s={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(c||(c={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(l||(l={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(u||(u={}));const d={...i,...s,...u}},79:(e,t,n)=>{var r;n.d(t,{KZ:()=>o,N:()=>i,OF:()=>r,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(r||(r={}));const a=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await a(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},i=async e=>(await o(e),a(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return a(e)}},695:(e,t,n)=>{var r=n(102),a=(n(723),n(70),n(905));(0,r.A)("__of_workspace_protocol__"),(0,r.A)(a.BT)},905:(e,t,n)=>{n.d(t,{BT:()=>r});const r="__search-openfin-browser-home-topic__";var a,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},257:(e,t,n)=>{n.d(t,{F:()=>a});var r=n(365);const a=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:a,dimensions:o}=n,i=await(0,r.Ae)(e);await t.replace({...n,settings:{...a,hasHeaders:!0,reorderEnabled:!0},dimensions:{...o,headerHeight:i?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}}},957:(e,t,n)=>{n.d(t,{qq:()=>b});var r=n(847),a=n(898),o=n(70),i=n(141),s=(n(675),n(877)),c=n.n(s),l=n(67),u=n.n(l);const d={light:{symbol:u()?.src||""},dark:{symbol:c()?.src||""}};n(695),n(79);const p={[r.Palette.brandPrimary]:"#0A76D3",[r.Palette.statusSuccess]:r.Color.functional1,[r.Palette.statusWarning]:r.Color.functional10,[r.Palette.statusCritical]:r.Color.functional7,[r.Palette.statusActive]:r.Color.functional3,[r.Palette.contentBackground1]:"#0A76D3",[r.Palette.contentBackground2]:"#000000",[r.Palette.contentBackground3]:"#000000",[r.Palette.contentBackground4]:"#000000",[r.Palette.contentBackground5]:"#000000"},f={...p,[r.Palette.background1]:r.Color.white,[r.Palette.background2]:r.Color.lightGray1,[r.Palette.background3]:r.Color.lightGray2,[r.Palette.background4]:r.Color.lightGray3,[r.Palette.background5]:r.Color.lightGray4,[r.Palette.background6]:r.Color.lightGray5,[r.Palette.brandSecondary]:r.Color.lightGray4,[r.Palette.inputBackground]:r.Color.lightGray3,[r.Palette.inputColor]:r.Color.darkGray5,[r.Palette.inputPlaceholder]:r.Color.darkGray2,[r.Palette.inputDisabled]:r.Color.neutralGray,[r.Palette.inputFocused]:r.Color.lightGray5,[r.Palette.inputBorder]:r.Color.neutralGray,[r.Palette.textDefault]:r.Color.darkGray5,[r.Palette.textHelp]:r.Color.darkGray3,[r.Palette.textInactive]:r.Color.neutralGray},h={...p,[r.Palette.background1]:r.Color.darkGray6,[r.Palette.background2]:r.Color.darkGray5,[r.Palette.background3]:r.Color.darkGray4,[r.Palette.background4]:r.Color.darkGray3,[r.Palette.background5]:r.Color.darkGray2,[r.Palette.background6]:r.Color.darkGray1,[r.Palette.brandSecondary]:r.Color.darkGray2,[r.Palette.inputBackground]:r.Color.darkGray1,[r.Palette.inputColor]:r.Color.white,[r.Palette.inputPlaceholder]:r.Color.lightGray5,[r.Palette.inputDisabled]:r.Color.neutralGray,[r.Palette.inputFocused]:r.Color.lightGray5,[r.Palette.inputBorder]:r.Color.neutralGray,[r.Palette.textDefault]:r.Color.white,[r.Palette.textHelp]:r.Color.lightGray5,[r.Palette.textInactive]:r.Color.neutralGray},g=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...f,brandPrimary:"#0A76D3",brandSecondary:r.Color.lightGray4,backgroundPrimary:r.Color.darkGray5},dark:{...h,brandPrimary:"#0A76D3",brandSecondary:r.Color.darkGray2,backgroundPrimary:r.Color.darkGray5}}}],w=e=>{const{background:t,foreground:n}=e;return{background:t,foreground:n??"#FFFFFF"}},m=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||d[t].symbol}}),y=e=>{const{light:t,dark:n}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},o=(0,a.KD)(h,n),i=(0,a.KD)(f,t),s=((e,t)=>{const n={...e},r={...t};let o=t.backgroundPrimary?(0,a.pu)(t.backgroundPrimary,!0):{},i=e.backgroundPrimary?(0,a.pu)(e.backgroundPrimary):{};return o={...o,...r},i={...i,...n},{light:{...t,...o},dark:{...e,...i}}})(n,t),c={...(0,r.createTheme)({...o,...s?.dark}),brand:m(e,"dark")},l={...(0,r.createTheme)({...i,...s?.light}),brand:m(e,"light")},{light:u,dark:d}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const n={},r={};return t.forEach((t=>{const a=e.notificationIndicatorColors[t];"background"in a?(n[t]=w(a),r[t]=w(a)):(n[t]=w(a.dark??a.light),r[t]=w(a.light??a.dark))})),{light:r,dark:n}}return{light:null,dark:null}})(e);return c.notificationIndicatorColors=d,l.notificationIndicatorColors=u,{dark:c,light:l}},b=async e=>{const{themes:t,selectedScheme:n}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;return t&&e.uuid===o.$p.uuid?t:{themes:await(0,i.Ag)(e).Theme.getThemes(),selectedScheme:await(0,i.Ag)(e).Theme.getSelectedScheme()}})(e);var r,a;return(r=t?.length?t:g,a=n,r.map((e=>{const t="palettes"in e?e.default:"dark",{light:n,dark:r}=y(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:r,light:n},defaultScheme:a??t}})))[0]}},438:(e,t,n)=>{n.d(t,{MW:()=>r,v1:()=>c});var r,a,o=n(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(a||(a={}));const i={uuid:o.$h},s=(r.Workspace,e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),c=()=>s(i)},102:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(723);const a=r.YY&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function o(e){let t;const n=new Set;return()=>{if(!r.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await a;const o={clientAPIVersion:r.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection((async()=>{n.forEach((e=>e())),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),i})().then((e=>(e.addDisconnectionListener=e=>{n.add(e)},e))).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}},365:(e,t,n)=>{n.d(t,{Ae:()=>r}),n(181),n(70);const r=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType}},723:(e,t,n)=>{var r;n.d(t,{$h:()=>c,AT:()=>i,YY:()=>o,cI:()=>a,et:()=>p,fT:()=>u,vL:()=>l}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(r||(r={}));const a="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:r.Local,c=a&&fin.me.uuid,l=a&&fin.me.name,u=a&&fin.me.entityType,d=(r.Local,r.Dev,r.Staging,r.Prod,e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e),p=(d("https://workspace.openfin.co/workspace/21.0.10"),d("https://workspace.openfin.co/workspace/21.0.10"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&d(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&d(WORKSPACE_DOCS_CLIENT_URL),"21.0.10");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},940:(e,t,n)=>{n.d(t,{fh:()=>u,xP:()=>d});var r=n(236),a=n.n(r),o=(n(365),n(723),n(70)),i=n(678),s=n(257),c=n(367);n(413);const l=(e,t)=>e.content?{...e,content:e.content.map((e=>l(e,t)))}:{...e,componentState:t(e.componentState)},u=e=>({...e,name:void 0}),d=e=>{const t={...e};return l(t,u)},p=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const n=p(e.content);t.push(...n)})),t};new Map,new Map,a()((async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?p(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&(0,c.N)().Browser.wrapSync(o.$p).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=(0,c.N)().Browser.wrapSync(o.$p);if("singleView"!==e.attachedPageType){const r=await(0,i.BG)(e),a=await(0,c.N)().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=(0,s.F)({...o.$p,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}}),50,{leading:!1,trailing:!0})},522:(e,t,n)=>{var r;n.d(t,{A:()=>a}),function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(r||(r={}));const a=r},189:(e,t,n)=>{n.r(t),n.d(t,{getItem:()=>o,removeItem:()=>i,setItem:()=>a});var r=n(723);const a=(e,t)=>{localStorage.setItem(`${r.$h}-${e}`,t)},o=e=>localStorage.getItem(`${r.$h}-${e}`),i=e=>localStorage.removeItem(`${r.$h}-${e}`)},786:(e,t,n)=>{n.d(t,{A:()=>a});const r="of-workspace-",a=new class{mark(e){performance.mark(`${r}${e}`)}markStart(e){performance.mark(`${r}${e}-start`)}markEnd(e){performance.mark(`${r}${e}-end`)}markEndAndMeasure(e){performance.mark(`${r}${e}-end`);try{return performance.measure(`${r}${e}`,`${r}${e}-start`,`${r}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${r}${e}`);try{return performance.measure(`${r}${e}-measure`,`${r}${t}-start`,`${r}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(r)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${r}`,"").replace("-measure",""),duration:e.duration})))}}},181:(e,t,n)=>{var r,a,o;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(r||(r={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(a||(a={})),function(e){e.Search="search"}(o||(o={}))},523:(e,t,n)=>{var r;n(723),function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(r||(r={}))},862:(e,t,n)=>{n.d(t,{D1:()=>i,fC:()=>a}),n(940);var r=n(522);function a(){return localStorage.getItem(r.A.MachineName)??"unknown"}let o;async function i(){return o||(o=await fin.System.getMachineId()),o}},898:(e,t,n)=>{n.d(t,{KD:()=>i,pu:()=>o});const r=e=>e.replace(/[^\d,]/g,"").split(","),a=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,n=e[1]/255,r=e[2]/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=o-a;let s=0,c=0,l=0;return s=0===i?0:o===t?(n-r)/i%6:o===n?(r-t)/i+2:(t-n)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(o+a)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},o=(e,t=!1)=>{const n=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let n;if(t.includes("rgb")){const e=r(t);e.length>3&&e.pop(),n=a(e).hue}if(t.includes("#")){const e=(e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,n=0,r=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,r=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,r=`0x${e[5]}${e[6]}`}return[+t,+n,+r]})(t);n=a(e).hue}t.includes("hsl")&&(n=r(t)[0]);const o=n?.toString();if(!o)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return o})(e);return t?{background1:`hsla(${n}, 0%, 100%, 1)`,background2:`hsla(${n}, 67%, 99%, 1)`,background3:`hsla(${n}, 26%, 96%, 1)`,background4:`hsla(${n}, 15%, 94%, 1)`,background5:`hsla(${n}, 10%, 88%, 1)`,background6:`hsla(${n}, 80%, 80%, 1)`}:{background1:`hsla(${n}, 8%, 7%, 1)`,background2:`hsla(${n}, 8%, 13%, 1)`,background3:`hsla(${n}, 9%, 15%, 1)`,background4:`hsla(${n}, 6%, 23%, 1)`,background5:`hsla(${n}, 21%, 28%, 1)`,background6:`hsla(${n}, 5%, 51%, 1)`}},i=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{n[r]=t[r]?t[r]:e[r]})),n}},277:(e,t,n)=>{n.d(t,{os:()=>o});var r,a=n(723);n(70),n(141),function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(r||(r={}));const o=e=>{(async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||a.et,componentName:e,componentVersion:t.componentVersion||a.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})})(r.Notification,e)};new Map},333:(e,t,n)=>{function r(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}n.d(t,{N:()=>r})},70:(e,t,n)=>{n.d(t,{$p:()=>c,Io:()=>d,Iq:()=>s,Q:()=>r,Tv:()=>l,V1:()=>i,hb:()=>u,ur:()=>p});var r,a=n(438),o=n(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(r||(r={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function s(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:o.vL,uuid:o.$h};function l(){return s(c)}r.Home,a.MW.Workspace,r.Dock,a.MW.Workspace,r.Storefront,a.MW.Workspace,a.MW.Workspace,a.MW.Workspace;const u=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function d(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>u(e.identity))));return e.filter(((e,n)=>t[n]))}async function p(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,n)=>{const r=function(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}(e,n);return r>t.percentage?{percentage:r,monitor:n}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}},236:e=>{e.exports=n(72)},432:e=>{e.exports=n(63)}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{deregister:()=>f,register:()=>p});var e=a(432),t=a(277),n=a(957),r={};for(const t in e)["default","register","deregister"].indexOf(t)<0&&(r[t]=()=>e[t]);a.d(o,r);const i=async t=>{if(t instanceof Error){let n=t.message;if(t.message.includes("register-notifications-platform")){if(n="Notifications platforms are not supported in versions below 1.13.0, try updating your notifications-service.",e?.provider?.getStatus){const{version:t}=await e.provider.getStatus();n+=` Your version is: ${t}`}return n}return t.message}return"string"==typeof t?t:"unknown error registering Notifications"},s=async e=>{if(e instanceof Error&&e.message.includes("register-notifications-platform"))throw new Error(await i(e));throw e},c="of-notifications-service-v1",l="of-workspace-notifications-sync",u={channelName:l},d=async(e,t)=>{const n=t.notificationsVersion.startsWith("2")?u.channelName:c,r=await fin.InterApplicationBus.Channel.connect(n,{wait:!1}),a=t.notificationsVersion.startsWith("2")?"register-platform":"register-notifications-platform";await r.dispatch(a,e)};async function p(r){try{const a=r&&"notificationsCustomManifest"in r?{customManifest:r.notificationsCustomManifest}:void 0;a&&a.customManifest?.manifestUuid&&(u.channelName=`${a.customManifest.manifestUuid}-${l}`);const o=await e.register(a);if(r){const e=await(0,n.qq)(fin.me.identity),t="notificationsPlatformOptions"in r?r.notificationsPlatformOptions:r;await d({theme:e.theme,scheme:e.defaultScheme,...t,workspacePlatform:{identity:fin.Platform.getCurrentSync().identity,analytics:{isSupported:!0}}},{notificationsVersion:o.notificationsVersion})}return(0,t.os)({allowed:!0,apiVersion:e.VERSION,componentVersion:o.notificationsVersion}),o}catch(r){(0,t.os)({allowed:!1,rejectionCode:await i(r),apiVersion:e.VERSION}),await s(r)}}const f=async t=>{try{const{version:n}=await e.provider.getStatus();if(null===n)throw new Error("Notifications service is not currently running.");await(async(e,t)=>{const n=t.notificationsVersion.startsWith("2")?u.channelName:c,r=await fin.InterApplicationBus.Channel.connect(n,{wait:!1}),a=t.notificationsVersion.startsWith("2")?"deregister-platform":"deregister-notifications-platform";await r.dispatch(a,e)})({id:t},{notificationsVersion:n})}catch(e){await s(e)}}})(),e.exports=o})()},232:e=>{const t=e=>"string"==typeof e,n=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},r=e=>null==e?"":""+e,a=/###/g,o=e=>e&&e.indexOf("###")>-1?e.replace(a,"."):e,i=e=>!e||t(e),s=(e,n,r)=>{const a=t(n)?n.split("."):n;let s=0;for(;s<a.length-1;){if(i(e))return{};const t=o(a[s]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return i(e)?{}:{obj:e,k:o(a[s])}},c=(e,t,n)=>{const{obj:r,k:a}=s(e,t,Object);if(void 0!==r||1===t.length)return void(r[a]=n);let o=t[t.length-1],i=t.slice(0,t.length-1),c=s(e,i,Object);for(;void 0===c.obj&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),c=s(e,i,Object),c&&c.obj&&void 0!==c.obj[`${c.k}.${o}`]&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=n},l=(e,t)=>{const{obj:n,k:r}=s(e,t);if(n)return n[r]},u=(e,n,r)=>{for(const a in n)"__proto__"!==a&&"constructor"!==a&&(a in e?t(e[a])||e[a]instanceof String||t(n[a])||n[a]instanceof String?r&&(e[a]=n[a]):u(e[a],n[a],r):e[a]=n[a]);return e},d=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const f=e=>t(e)?e.replace(/[&<>"'\/]/g,(e=>p[e])):e,h=[" ",",","?","!",";"],g=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),w=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let a=e;for(let e=0;e<r.length;){if(!a||"object"!=typeof a)return;let t,o="";for(let i=e;i<r.length;++i)if(i!==e&&(o+=n),o+=r[i],t=a[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&i<r.length-1)continue;e+=i-e+1;break}a=t}return a},m=e=>e&&e.replace("_","-"),y={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class b{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||y,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(t(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new b(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new b(this.logger,e)}}var v=new b;class k{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let e=0;e<r;e++)t(...n)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((t=>{let[r,a]=t;for(let t=0;t<a;t++)r.apply(r,[e,...n])}))}}class S extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,i=void 0!==a.ignoreJSONStructure?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):t(r)&&o?s.push(...r.split(o)):s.push(r)));const c=l(this.data,s);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),!c&&i&&t(r)?w(this.data&&this.data[e]&&this.data[e][n],r,o):c}addResource(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split("."),r=t,t=i[1]),this.addNamespaces(t),c(this.data,i,r),a.silent||this.emit("added",e,t,n,r)}addResources(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const a in r)(t(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),r=n,n=t,t=i[1]),this.addNamespaces(t);let s=l(this.data,i)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?u(s,n,a):s={...s,...n},c(this.data,i,s),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var C={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,a){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,a))})),t}};const P={};class I extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{t[e]&&(n[e]=t[e])}))})(0,e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=v.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,n){let r=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const i=r&&e.indexOf(r)>-1,s=!(this.options.userDefinedKeySeparator||n.keySeparator||this.options.userDefinedNsSeparator||n.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=h.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const a=g.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let o=!a.test(e);if(!o){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(o=!0)}return o})(e,r,a));if(i&&!s){const n=e.match(this.interpolator.nestingRegexp);if(n&&n.length>0)return{key:e,namespaces:t(o)?[o]:o};const i=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(a)}return{key:e,namespaces:t(o)?[o]:o}}translate(e,n,r){if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n={...n}),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const a=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:i,namespaces:s}=this.extractFromKey(e[e.length-1],n),c=s[s.length-1],l=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){const e=n.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${e}${i}`,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${e}${i}`}return a?{res:i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:i}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||i,h=d&&d.exactUsedKey||i,g=Object.prototype.toString.apply(p),w=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!t(p)&&"boolean"!=typeof p&&"number"!=typeof p;if(!(m&&p&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(g)<0)||t(w)&&Array.isArray(p))if(m&&t(w)&&Array.isArray(p))p=p.join(w),p&&(p=this.extendTranslation(p,e,n,r));else{let a=!1,s=!1;const u=void 0!==n.count&&!t(n.count),f=I.hasDefaultValue(n),h=u?this.pluralResolver.getSuffix(l,n.count,n):"",g=n.ordinal&&u?this.pluralResolver.getSuffix(l,n.count,{ordinal:!1}):"",w=u&&!n.ordinal&&0===n.count&&this.pluralResolver.shouldUseIntlApi(),m=w&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${h}`]||n[`defaultValue${g}`]||n.defaultValue;!this.isValidLookup(p)&&f&&(a=!0,p=m),this.isValidLookup(p)||(s=!0,p=i);const y=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:p,b=f&&m!==p&&this.options.updateMissing;if(s||a||b){if(this.logger.log(b?"updateKey":"missingKey",l,c,i,b?m:p),o){const e=this.resolve(i,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const r=(e,t,r)=>{const a=f&&r!==p?r:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,t,a,b,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,c,t,a,b,n),this.emit("missingKey",e,c,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,n);w&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{r([e],i+t,n[`defaultValue${t}`]||m)}))})):r(e,i,m))}p=this.extendTranslation(p,e,n,d,r),s&&p===i&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${i}`),(s||a)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${i}`:i,a?p:void 0):this.options.parseMissingKeyHandler(p))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${i} (${this.language})' returned an object instead of string.`;return a?(d.res=e,d.usedParams=this.getUsedParamsDetails(n),d):e}if(o){const e=Array.isArray(p),t=e?[]:{},r=e?h:f;for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e)){const a=`${r}${o}${e}`;t[e]=this.translate(a,{...n,joinArrays:!1,ns:s}),t[e]===a&&(t[e]=p[e])}p=t}}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const s=t(e)&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(s){const t=e.match(this.interpolator.nestingRegexp);c=t&&t.length}let l=r.replace&&!t(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,r.lng||this.language||a.usedLng,r),s){const t=e.match(this.interpolator.nestingRegexp);c<(t&&t.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&a&&a.res&&(r.lng=this.language||a.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o&&o[0]===t[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${n[0]}`),null):i.translate(...t,n)}),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,c=t(s)?[s]:s;return null!=e&&c&&c.length&&!1!==r.applyPostProcessor&&(e=C.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n,r,a,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(e,s),l=c.key;r=l;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=void 0!==s.count&&!t(s.count),p=d&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&(t(s.context)||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);u.forEach((e=>{this.isValidLookup(n)||(i=e,!P[`${h[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(i)&&(P[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((t=>{if(this.isValidLookup(n))return;o=t;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,t,e,s);else{let e;d&&(e=this.pluralResolver.getSuffix(t,s.count,s));const n=`${this.options.pluralSeparator}zero`,a=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(r.push(l+e),s.ordinal&&0===e.indexOf(a)&&r.push(l+e.replace(a,this.options.pluralSeparator)),p&&r.push(l+n)),f){const t=`${l}${this.options.contextSeparator}${s.context}`;r.push(t),d&&(r.push(t+e),s.ordinal&&0===e.indexOf(a)&&r.push(t+e.replace(a,this.options.pluralSeparator)),p&&r.push(t+n))}}let i;for(;i=r.pop();)this.isValidLookup(n)||(a=i,n=this.getResource(t,e,i,s))})))}))})),{res:n,usedKey:r,exactUsedKey:a,usedLng:o,usedNS:i}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!t(e.replace);let a=r?e.replace:e;if(r&&void 0!==e.count&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const e of n)delete a[e]}return a}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}const x=e=>e.charAt(0).toUpperCase()+e.slice(1);class A{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=v.create("languageUtils")}getScriptPartFromCode(e){if(!(e=m(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=m(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(t(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=x(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=x(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=x(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,n){if(!e)return[];if("function"==typeof e&&(e=e(n)),t(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],o=e=>{e&&(this.isSupportedCode(e)?a.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return t(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):t(e)&&o(this.formatLanguageCode(e)),r.forEach((e=>{a.indexOf(e)<0&&o(this.formatLanguageCode(e))})),a}}let _=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],E={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const M=["v1","v2","v3"],T=["v4"],R={zero:0,one:1,two:2,few:3,many:4,other:5};class O{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=v.create("pluralResolver"),this.options.compatibilityJSON&&!T.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return _.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:E[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const n=m("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(n,{type:r})}catch(n){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(r,t)}return this.pluralRulesCache[a]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>R[e]-R[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const a=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!M.includes(this.options.compatibilityJSON)}}const W=function(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,n)=>{const r=l(e,n);return void 0!==r?r:l(t,n)})(e,n,r);return!i&&o&&t(r)&&(i=w(e,r,a),void 0===i&&(i=w(n,r,a))),i},D=e=>e.replace(/\$/g,"$$$$");class B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=v.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:a,prefixEscaped:o,suffix:i,suffixEscaped:s,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:p,nestingPrefixEscaped:h,nestingSuffix:g,nestingSuffixEscaped:w,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:f,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=a?d(a):o||"{{",this.suffix=i?d(i):s||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=p?d(p):h||d("$t("),this.nestingSuffix=g?d(g):w||d(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,a,o){let i,s,c;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const t=W(n,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(t,void 0,a,{...o,...n,interpolationkey:e}):t}const t=e.split(this.formatSeparator),r=t.shift().trim(),i=t.join(this.formatSeparator).trim();return this.format(W(n,l,r,this.options.keySeparator,this.options.ignoreJSONStructure),i,a,{...o,...n,interpolationkey:r})};this.resetRegExp();const d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,p=o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>D(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?D(this.escape(e)):D(e)}].forEach((n=>{for(c=0;i=n.regex.exec(e);){const a=i[1].trim();if(s=u(a),void 0===s)if("function"==typeof d){const n=d(e,i,o);s=t(n)?n:""}else if(o&&Object.prototype.hasOwnProperty.call(o,a))s="";else{if(p){s=i[0];continue}this.logger.warn(`missed to pass in variable ${a} for interpolating ${e}`),s=""}else t(s)||this.useRawValueToEscape||(s=r(s));const l=n.safeValue(s);if(e=e.replace(i[0],l),p?(n.regex.lastIndex+=s.length,n.regex.lastIndex-=i[0].length):n.regex.lastIndex=0,c++,c>=this.maxReplaces)break}})),e}nest(e,n){let a,o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let a=`{${r[1]}`;e=r[0],a=this.interpolate(a,i);const o=a.match(/'/g),s=a.match(/"/g);(o&&o.length%2==0&&!s||s.length%2!=0)&&(a=a.replace(/'/g,'"'));try{i=JSON.parse(a),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${a}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;a=this.nestingRegexp.exec(e);){let l=[];i={...s},i=i.replace&&!t(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let u=!1;if(-1!==a[0].indexOf(this.formatSeparator)&&!/{.*}/.test(a[1])){const e=a[1].split(this.formatSeparator).map((e=>e.trim()));a[1]=e.shift(),l=e,u=!0}if(o=n(c.call(this,a[1].trim(),i),i),o&&a[0]===e&&!t(o))return o;t(o)||(o=r(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),o=""),u&&(o=l.reduce(((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:a[1].trim()})),o.trim())),e=e.replace(a[0],o),this.regexp.lastIndex=0}return e}}const F=e=>{const t={};return(n,r,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const i=r+JSON.stringify(o);let s=t[i];return s||(s=e(m(r),a),t[i]=s),s(n)}};class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=v.create("formatter"),this.options=e,this.formats={number:F(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:F(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:F(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:F(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:F(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=F(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find((e=>e.indexOf(")")>-1))){const e=a.findIndex((e=>e.indexOf(")")>-1));a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}const o=a.reduce(((e,t)=>{const{formatName:a,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),a=r.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();n[o]||(n[o]=a),"false"===a&&(n[o]=!1),"true"===a&&(n[o]=!0),isNaN(a)||(n[o]=parseInt(a,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{const i=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},s=i.locale||i.lng||r.locale||r.lng||n;t=this.formats[a](e,s,{...o,...r,...i})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${a}`),e}),e);return o}}class L extends k{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=v.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const a={},o={},i={},s={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const i=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===o[i]&&(o[i]=!0):(this.state[i]=1,r=!1,void 0===o[i]&&(o[i]=!0),void 0===a[i]&&(a[i]=!0),void 0===s[t]&&(s[t]=!0)))})),r||(i[e]=!0)})),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const r=e.split("|"),a=r[0],o=r[1];t&&this.emit("failedLoading",a,o,t),!t&&n&&this.store.addResourceBundle(a,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const i={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:a}=s(e,t,Object);r[a]=r[a]||[],r[a].push(n)})(n.loaded,[a],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{i[e]||(i[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===i[e][t]&&(i[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:a,callback:o});this.readingCalls++;const i=(i,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&s&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*a,o)}),a):o(i,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,i);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>i(null,e))).catch(i):i(null,n)}catch(e){i(e)}}prepareLoading(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();t(e)&&(e=this.languageUtils.toResolveHierarchy(e)),t(n)&&(n=[n]);const o=this.queueLoad(e,n,r,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],a=n[1];this.read(r,a,"read",void 0,void 0,((n,o)=>{n&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,o),this.loaded(e,n,o)}))}saveMissing(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const s={...o,isUpdate:a},c=this.backend.create.bind(this.backend);if(c.length<6)try{let a;a=5===c.length?c(e,t,n,r,s):c(e,t,n,r),a&&"function"==typeof a.then?a.then((e=>i(null,e))).catch(i):i(null,a)}catch(e){i(e)}else c(e,t,n,r,i,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const $=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let n={};if("object"==typeof e[1]&&(n=e[1]),t(e[1])&&(n.defaultValue=e[1]),t(e[2])&&(n.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const t=e[3]||e[2];Object.keys(t).forEach((e=>{n[e]=t[e]}))}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),U=e=>(t(e.ns)&&(e.ns=[e.ns]),t(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),t(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),j=()=>{};class V extends k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=U(e),this.services={},this.logger=v,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof r&&(a=r,r={}),!r.defaultNS&&!1!==r.defaultNS&&r.ns&&(t(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const o=$();this.options={...o,...this.options,...U(r)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),void 0!==r.keySeparator&&(this.options.userDefinedKeySeparator=r.keySeparator),void 0!==r.nsSeparator&&(this.options.userDefinedNsSeparator=r.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?v.init(i(this.modules.logger),this.options):v.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=N);const n=new A(this.options);this.store=new S(this.options.resources,this.options);const r=this.services;r.logger=v,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new O(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format||(r.formatter=i(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new B(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new L(i(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)})),this.modules.languageDetector&&(r.languageDetector=i(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=i(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new I(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,a||(a=j),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const s=n(),c=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(t),a(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),s}loadResources(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;const r=t(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};r?t(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>t(e))),this.options.preload&&this.options.preload.forEach((e=>t(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)}))}else n(null)}reloadResources(e,t,r){const a=n();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=j),this.services.backendConnector.reload(e,t,(e=>{a.resolve(),r(e)})),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&C.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,r){var a=this;this.isLanguageChangingTo=e;const o=n();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(e,t)=>{t?(i(t),this.translator.changeLanguage(t),this.isLanguageChangingTo=void 0,this.emit("languageChanged",t),this.logger.log("languageChanged",t)):this.isLanguageChangingTo=void 0,o.resolve((function(){return a.t(...arguments)})),r&&r(e,(function(){return a.t(...arguments)}))},c=n=>{e||n||!this.services.languageDetector||(n=[]);const r=t(n)?n:this.services.languageUtils.getBestMatchFromCodes(n);r&&(this.language||i(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(r)),this.loadResources(r,(e=>{s(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e):c(this.services.languageDetector.detect()),o}getFixedT(e,n,r){var a=this;const o=function(e,t){let n;if("object"!=typeof t){for(var i=arguments.length,s=new Array(i>2?i-2:0),c=2;c<i;c++)s[c-2]=arguments[c];n=a.options.overloadTranslationOptionHandler([e,t].concat(s))}else n={...t};n.lng=n.lng||o.lng,n.lngs=n.lngs||o.lngs,n.ns=n.ns||o.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||r||o.keyPrefix);const l=a.options.keySeparator||".";let u;return u=n.keyPrefix&&Array.isArray(e)?e.map((e=>`${n.keyPrefix}${l}${e}`)):n.keyPrefix?`${n.keyPrefix}${l}${e}`:e,a.t(u,n)};return t(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(n,e)||r&&!o(a,e)))}loadNamespaces(e,r){const a=n();return this.options.ns?(t(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{a.resolve(),r&&r(e)})),a):(r&&r(),Promise.resolve())}loadLanguages(e,r){const a=n();t(e)&&(e=[e]);const o=this.options.preload||[],i=e.filter((e=>o.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=o.concat(i),this.loadResources((e=>{a.resolve(),r&&r(e)})),a):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new A($());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new V(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new V(r);return void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e)),["store","services","language"].forEach((e=>{a[e]=this[e]})),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n&&(a.store=new S(this.store.data,r),a.services.resourceStore=a.store),a.translator=new I(a.services,r),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit(e,...n)})),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=V.createInstance();G.createInstance=V.createInstance,e.exports=G},352:(e,t,n)=>{n.r(t),n.d(t,{ApiError:()=>s,ApiRequestError:()=>c,AuthTokenExpiredError:()=>l,AuthorizationError:()=>u,InitializationError:()=>d,InteropError:()=>p,ParameterError:()=>f,TeamsConnection:()=>h,connect:()=>g,disableLogging:()=>w,enableLogging:()=>m});var r={876:e=>{const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},60:(e,t)=>{t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),i=o[0],c=o[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,c)),u=0,d=c>0?i-4:i;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,o=[],i=16383,s=0,l=r-a;s<l;s+=i)o.push(c(e,s,s+i>l?l:s+i));return 1===a?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=o[i],r[o.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var a,o,i=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(o=a)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},485:(e,t,n)=>{const r=n(60),a=n(215),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=s(n);const a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const a=function(e){if(c.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|h(e))}function p(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function h(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(a)return r?-1:z(e).length;t=(""+t).toLowerCase(),a=!0}}function w(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){let o,i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*i}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function v(e,t,n,r){n=Number(n)||0;const a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;const o=t.length;let i;for(r>o/2&&(r=o/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(Z(r))return i;e[n+i]=r}return i}function k(e,t,n,r){return K(z(t,e.length-n),e,n,r)}function S(e,t,n,r){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return K(q(t),e,n,r)}function P(e,t,n,r){return K(function(e,t){let n,r,a;const o=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);const r=[];let a=t;for(;a<n;){const t=e[a];let o=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=n){let n,r,s,c;switch(i){case 1:t<128&&(o=t);break;case 2:n=e[a+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[a+1],r=e[a+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[a+1],r=e[a+2],s=e[a+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=i}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))a+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):w.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,a){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(a>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0);const s=Math.min(o,i),l=this.slice(r,a),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){o=l[e],i=u[e];break}return o<i?-1:i<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function _(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function E(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function M(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let a="";for(let r=t;r<n;++r)a+=Y[e[r]];return a}function T(e,t,n){const r=e.slice(t,n);let a="";for(let e=0;e<r.length-1;e+=2)a+=String.fromCharCode(r[e]+256*r[e+1]);return a}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,a,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function W(e,t,n,r,a){j(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function D(e,t,n,r,a){j(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function B(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,8),a.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=t,a=1,o=this[e+--r];for(;r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Q((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);let a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);let a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q((function(e,t=0){return W(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let a=0,o=1,i=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let a=n-1,o=1,i=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q((function(e,t=0){return W(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const a=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),i=o.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%i]}return this};const L={};function $(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,r,a,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let a;throw a=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new L.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||G(t,e.length-(n+1))}(r,a,o)}function V(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,a=n;return Number.isInteger(n)&&Math.abs(n)>2**32?a=U(String(n)):"bigint"==typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=U(a)),a+="n"),r+=` It must be ${t}. Received ${a}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function z(e,t){let n;t=t||1/0;const r=e.length;let a=null;const o=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){let a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let a=0;a<16;++a)t[r+a]=e[n]+e[a]}return t}();function Q(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},465:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(o){r.once&&e.removeEventListener(t,a),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},215:(e,t)=>{t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=p,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,r),o-=l}return(f?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,l=8*o-a-1,u=(1<<l)-1,d=u>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*c-1)*Math.pow(2,a),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),i=0));a>=8;e[n+f]=255&s,f+=h,s/=256,a-=8);for(i=i<<a|s,l+=a;l>0;e[n+f]=255&i,f+=h,i/=256,l-=8);e[n+f-h]|=128*g}},951:function(e,t,n){var r;e=n.nmd(e),function(){var a,o="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",c=32,l=128,u=1/0,d=9007199254740991,p=NaN,f=4294967295,h=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",w="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",v="[object Function]",k="[object GeneratorFunction]",S="[object Map]",C="[object Number]",P="[object Object]",I="[object Promise]",x="[object RegExp]",A="[object Set]",_="[object String]",E="[object Symbol]",M="[object WeakMap]",T="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",W="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",$="[object Uint16Array]",U="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,q=RegExp(H.source),K=RegExp(z.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ae=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_e="["+ke+"]",Ee="["+Ae+"]",Me="["+Se+"]",Te="\\d+",Re="["+Ce+"]",Oe="["+Pe+"]",We="[^"+ke+Ae+Te+Ce+Pe+Ie+"]",De="\\ud83c[\\udffb-\\udfff]",Be="[^"+ke+"]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Ie+"]",$e="\\u200d",Ue="(?:"+Oe+"|"+We+")",je="(?:"+Le+"|"+We+")",Ve="(?:['](?:d|ll|m|re|s|t|ve))?",Ge="(?:['](?:D|LL|M|RE|S|T|VE))?",He="(?:"+Me+"|"+De+")?",ze="["+xe+"]?",qe=ze+He+"(?:"+$e+"(?:"+[Be,Fe,Ne].join("|")+")"+ze+He+")*",Ke="(?:"+[Re,Fe,Ne].join("|")+")"+qe,Je="(?:"+[Be+Me+"?",Me,Fe,Ne,_e].join("|")+")",Ze=RegExp("[']","g"),Ye=RegExp(Me,"g"),Qe=RegExp(De+"(?="+De+")|"+Je+qe,"g"),Xe=RegExp([Le+"?"+Oe+"+"+Ve+"(?="+[Ee,Le,"$"].join("|")+")",je+"+"+Ge+"(?="+[Ee,Le+Ue,"$"].join("|")+")",Le+"?"+Ue+"+"+Ve,Le+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Te,Ke].join("|"),"g"),et=RegExp("["+$e+ke+Se+xe+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,at={};at[O]=at[W]=at[D]=at[B]=at[F]=at[N]=at[L]=at[$]=at[U]=!0,at[g]=at[w]=at[T]=at[m]=at[R]=at[y]=at[b]=at[v]=at[S]=at[C]=at[P]=at[x]=at[A]=at[_]=at[M]=!1;var ot={};ot[g]=ot[w]=ot[T]=ot[R]=ot[m]=ot[y]=ot[O]=ot[W]=ot[D]=ot[B]=ot[F]=ot[S]=ot[C]=ot[P]=ot[x]=ot[A]=ot[_]=ot[E]=ot[N]=ot[L]=ot[$]=ot[U]=!0,ot[b]=ot[v]=ot[M]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ct=parseInt,lt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ut="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ut||Function("return this")(),pt=t&&!t.nodeType&&t,ft=pt&&e&&!e.nodeType&&e,ht=ft&&ft.exports===pt,gt=ht&&lt.process,wt=function(){try{return ft&&ft.require&&ft.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),mt=wt&&wt.isArrayBuffer,yt=wt&&wt.isDate,bt=wt&&wt.isMap,vt=wt&&wt.isRegExp,kt=wt&&wt.isSet,St=wt&&wt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(r,i,n(i),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function _t(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}function Et(e,t){return!(null==e||!e.length)&&Lt(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Rt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Ot(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}function Wt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Vt("length");function Ft(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function Nt(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function Lt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Nt(e,Ut,n)}function $t(e,t,n,r){for(var a=n-1,o=e.length;++a<o;)if(r(e[a],t))return a;return-1}function Ut(e){return e!=e}function jt(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:p}function Vt(e){return function(t){return null==t?a:t[e]}}function Gt(e){return function(t){return null==e?a:e[t]}}function Ht(e,t,n,r,a){return a(e,(function(e,a,o){n=r?(r=!1,e):t(n,e,a,o)})),n}function zt(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);i!==a&&(n=n===a?i:n+i)}return n}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Jt(e){return function(t){return e(t)}}function Zt(e,t){return Tt(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Lt(t,e[n],0)>-1;);return n}function Xt(e,t){for(var n=e.length;n--&&Lt(t,e[n],0)>-1;);return n}var en=Gt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tn=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+it[e]}function rn(e){return et.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function on(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n];i!==t&&i!==s||(e[n]=s,o[a++]=n)}return o}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){return rn(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Bt(e)}function un(e){return rn(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var pn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fn=function e(t){var n,r=(t=null==t?dt:fn.defaults(dt.Object(),t,fn.pick(dt,nt))).Array,ae=t.Date,ke=t.Error,Se=t.Function,Ce=t.Math,Pe=t.Object,Ie=t.RegExp,xe=t.String,Ae=t.TypeError,_e=r.prototype,Ee=Se.prototype,Me=Pe.prototype,Te=t["__core-js_shared__"],Re=Ee.toString,Oe=Me.hasOwnProperty,We=0,De=(n=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Me.toString,Fe=Re.call(Pe),Ne=dt._,Le=Ie("^"+Re.call(Oe).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=ht?t.Buffer:a,Ue=t.Symbol,je=t.Uint8Array,Ve=$e?$e.allocUnsafe:a,Ge=on(Pe.getPrototypeOf,Pe),He=Pe.create,ze=Me.propertyIsEnumerable,qe=_e.splice,Ke=Ue?Ue.isConcatSpreadable:a,Je=Ue?Ue.iterator:a,Qe=Ue?Ue.toStringTag:a,et=function(){try{var e=so(Pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==dt.Date.now&&ae.now,ut=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,gt=Pe.getOwnPropertySymbols,wt=$e?$e.isBuffer:a,Bt=t.isFinite,Gt=_e.join,hn=on(Pe.keys,Pe),gn=Ce.max,wn=Ce.min,mn=ae.now,yn=t.parseInt,bn=Ce.random,vn=_e.reverse,kn=so(t,"DataView"),Sn=so(t,"Map"),Cn=so(t,"Promise"),Pn=so(t,"Set"),In=so(t,"WeakMap"),xn=so(Pe,"create"),An=In&&new In,_n={},En=Wo(kn),Mn=Wo(Sn),Tn=Wo(Cn),Rn=Wo(Pn),On=Wo(In),Wn=Ue?Ue.prototype:a,Dn=Wn?Wn.valueOf:a,Bn=Wn?Wn.toString:a;function Fn(e){if(Yi(e)&&!$i(e)&&!(e instanceof Un)){if(e instanceof $n)return e;if(Oe.call(e,"__wrapped__"))return Do(e)}return new $n(e)}var Nn=function(){function e(){}return function(t){if(!Zi(t))return{};if(He)return He(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Ln(){}function $n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function zn(e){var t=this.__data__=new Vn(e);this.size=t.size}function qn(e,t){var n=$i(e),r=!n&&Li(e),a=!n&&!r&&Gi(e),o=!n&&!r&&!a&&os(e),i=n||r||a||o,s=i?qt(e.length,xe):[],c=s.length;for(var l in e)!t&&!Oe.call(e,l)||i&&("length"==l||a&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||go(l,c))||s.push(l);return s}function Kn(e){var t=e.length;return t?e[Gr(0,t-1)]:a}function Jn(e,t){return To(Ia(e),ar(t,0,e.length))}function Zn(e){return To(Ia(e))}function Yn(e,t,n){(n!==a&&!Bi(e[t],n)||n===a&&!(t in e))&&nr(e,t,n)}function Qn(e,t,n){var r=e[t];Oe.call(e,t)&&Bi(r,n)&&(n!==a||t in e)||nr(e,t,n)}function Xn(e,t){for(var n=e.length;n--;)if(Bi(e[n][0],t))return n;return-1}function er(e,t,n,r){return lr(e,(function(e,a,o){t(r,e,n(e),o)})),r}function tr(e,t){return e&&xa(t,As(t),e)}function nr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(e,t){for(var n=-1,o=t.length,i=r(o),s=null==e;++n<o;)i[n]=s?a:Ss(e,t[n]);return i}function ar(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function or(e,t,n,r,o,i){var s,c=1&t,l=2&t,u=4&t;if(n&&(s=o?n(e,r,o,i):n(e)),s!==a)return s;if(!Zi(e))return e;var d=$i(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Ia(e,s)}else{var p=uo(e),f=p==v||p==k;if(Gi(e))return ba(e,c);if(p==P||p==g||f&&!o){if(s=l||f?{}:fo(e),!c)return l?function(e,t){return xa(e,lo(e),t)}(e,function(e,t){return e&&xa(t,_s(t),e)}(s,e)):function(e,t){return xa(e,co(e),t)}(e,tr(s,e))}else{if(!ot[p])return o?e:{};s=function(e,t,n){var r,a=e.constructor;switch(t){case T:return va(e);case m:case y:return new a(+e);case R:return function(e,t){var n=t?va(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case W:case D:case B:case F:case N:case L:case $:case U:return ka(e,n);case S:return new a;case C:case _:return new a(e);case x:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new a;case E:return r=e,Dn?Pe(Dn.call(r)):{}}}(e,p,c)}}i||(i=new zn);var h=i.get(e);if(h)return h;i.set(e,s),ns(e)?e.forEach((function(r){s.add(or(r,t,n,r,e,i))})):Qi(e)&&e.forEach((function(r,a){s.set(a,or(r,t,n,a,e,i))}));var w=d?a:(u?l?eo:Xa:l?_s:As)(e);return It(w||e,(function(r,a){w&&(r=e[a=r]),Qn(s,a,or(r,t,n,a,e,i))})),s}function ir(e,t,n){var r=n.length;if(null==e)return!r;for(e=Pe(e);r--;){var o=n[r],i=t[o],s=e[o];if(s===a&&!(o in e)||!i(s))return!1}return!0}function sr(e,t,n){if("function"!=typeof e)throw new Ae(o);return Ao((function(){e.apply(a,n)}),t)}function cr(e,t,n,r){var a=-1,o=Et,i=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Tt(t,Jt(n))),r?(o=Mt,i=!1):t.length>=200&&(o=Yt,i=!1,t=new Hn(t));e:for(;++a<s;){var u=e[a],d=null==n?u:n(u);if(u=r||0!==u?u:0,i&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else o(t,d,r)||c.push(u)}return c}Fn.templateSettings={escape:J,evaluate:Z,interpolate:Y,variable:"",imports:{_:Fn}},Fn.prototype=Ln.prototype,Fn.prototype.constructor=Fn,$n.prototype=Nn(Ln.prototype),$n.prototype.constructor=$n,Un.prototype=Nn(Ln.prototype),Un.prototype.constructor=Un,jn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},jn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jn.prototype.get=function(e){var t=this.__data__;if(xn){var n=t[e];return n===i?a:n}return Oe.call(t,e)?t[e]:a},jn.prototype.has=function(e){var t=this.__data__;return xn?t[e]!==a:Oe.call(t,e)},jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xn&&t===a?i:t,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(e){var t=this.__data__,n=Xn(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),--this.size,0))},Vn.prototype.get=function(e){var t=this.__data__,n=Xn(t,e);return n<0?a:t[n][1]},Vn.prototype.has=function(e){return Xn(this.__data__,e)>-1},Vn.prototype.set=function(e,t){var n=this.__data__,r=Xn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(Sn||Vn),string:new jn}},Gn.prototype.delete=function(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return oo(this,e).get(e)},Gn.prototype.has=function(e){return oo(this,e).has(e)},Gn.prototype.set=function(e,t){var n=oo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Hn.prototype.add=Hn.prototype.push=function(e){return this.__data__.set(e,i),this},Hn.prototype.has=function(e){return this.__data__.has(e)},zn.prototype.clear=function(){this.__data__=new Vn,this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},zn.prototype.get=function(e){return this.__data__.get(e)},zn.prototype.has=function(e){return this.__data__.has(e)},zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var lr=Ea(mr),ur=Ea(yr,!0);function dr(e,t){var n=!0;return lr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function pr(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(c===a?s==s&&!as(s):n(s,c)))var c=s,l=i}return l}function fr(e,t){var n=[];return lr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function hr(e,t,n,r,a){var o=-1,i=e.length;for(n||(n=ho),a||(a=[]);++o<i;){var s=e[o];t>0&&n(s)?t>1?hr(s,t-1,n,r,a):Rt(a,s):r||(a[a.length]=s)}return a}var gr=Ma(),wr=Ma(!0);function mr(e,t){return e&&gr(e,t,As)}function yr(e,t){return e&&wr(e,t,As)}function br(e,t){return _t(t,(function(t){return qi(e[t])}))}function vr(e,t){for(var n=0,r=(t=ga(t,e)).length;null!=e&&n<r;)e=e[Oo(t[n++])];return n&&n==r?e:a}function kr(e,t,n){var r=t(e);return $i(e)?r:Rt(r,n(e))}function Sr(e){return null==e?e===a?"[object Undefined]":"[object Null]":Qe&&Qe in Pe(e)?function(e){var t=Oe.call(e,Qe),n=e[Qe];try{e[Qe]=a;var r=!0}catch(e){}var o=Be.call(e);return r&&(t?e[Qe]=n:delete e[Qe]),o}(e):function(e){return Be.call(e)}(e)}function Cr(e,t){return e>t}function Pr(e,t){return null!=e&&Oe.call(e,t)}function Ir(e,t){return null!=e&&t in Pe(e)}function xr(e,t,n){for(var o=n?Mt:Et,i=e[0].length,s=e.length,c=s,l=r(s),u=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Tt(p,Jt(t))),u=wn(p.length,u),l[c]=!n&&(t||i>=120&&p.length>=120)?new Hn(c&&p):a}p=e[0];var f=-1,h=l[0];e:for(;++f<i&&d.length<u;){var g=p[f],w=t?t(g):g;if(g=n||0!==g?g:0,!(h?Yt(h,w):o(d,w,n))){for(c=s;--c;){var m=l[c];if(!(m?Yt(m,w):o(e[c],w,n)))continue e}h&&h.push(w),d.push(g)}}return d}function Ar(e,t,n){var r=null==(e=Po(e,t=ga(t,e)))?e:e[Oo(zo(t))];return null==r?a:Ct(r,e,n)}function _r(e){return Yi(e)&&Sr(e)==g}function Er(e,t,n,r,o){return e===t||(null==e||null==t||!Yi(e)&&!Yi(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var s=$i(e),c=$i(t),l=s?w:uo(e),u=c?w:uo(t),d=(l=l==g?P:l)==P,p=(u=u==g?P:u)==P,f=l==u;if(f&&Gi(e)){if(!Gi(t))return!1;s=!0,d=!1}if(f&&!d)return i||(i=new zn),s||os(e)?Ya(e,t,n,r,o,i):function(e,t,n,r,a,o,i){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case m:case y:case C:return Bi(+e,+t);case b:return e.name==t.name&&e.message==t.message;case x:case _:return e==t+"";case S:var s=an;case A:var c=1&r;if(s||(s=cn),e.size!=t.size&&!c)return!1;var l=i.get(e);if(l)return l==t;r|=2,i.set(e,t);var u=Ya(s(e),s(t),r,a,o,i);return i.delete(e),u;case E:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(e,t,l,n,r,o,i);if(!(1&n)){var h=d&&Oe.call(e,"__wrapped__"),v=p&&Oe.call(t,"__wrapped__");if(h||v){var k=h?e.value():e,I=v?t.value():t;return i||(i=new zn),o(k,I,n,r,i)}}return!!f&&(i||(i=new zn),function(e,t,n,r,o,i){var s=1&n,c=Xa(e),l=c.length;if(l!=Xa(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:Oe.call(t,d)))return!1}var p=i.get(e),f=i.get(t);if(p&&f)return p==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var g=s;++u<l;){var w=e[d=c[u]],m=t[d];if(r)var y=s?r(m,w,d,t,e,i):r(w,m,d,e,t,i);if(!(y===a?w===m||o(w,m,n,r,i):y)){h=!1;break}g||(g="constructor"==d)}if(h&&!g){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i))}(e,t,n,r,Er,o))}function Mr(e,t,n,r){var o=n.length,i=o,s=!r;if(null==e)return!i;for(e=Pe(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<i;){var l=(c=n[o])[0],u=e[l],d=c[1];if(s&&c[2]){if(u===a&&!(l in e))return!1}else{var p=new zn;if(r)var f=r(u,d,l,e,t,p);if(!(f===a?Er(d,u,3,r,p):f))return!1}}return!0}function Tr(e){return!(!Zi(e)||(t=e,De&&De in t))&&(qi(e)?Le:ge).test(Wo(e));var t}function Rr(e){return"function"==typeof e?e:null==e?Xs:"object"==typeof e?$i(e)?Fr(e[0],e[1]):Br(e):cc(e)}function Or(e){if(!vo(e))return hn(e);var t=[];for(var n in Pe(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Wr(e,t){return e<t}function Dr(e,t){var n=-1,a=ji(e)?r(e.length):[];return lr(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}function Br(e){var t=io(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function Fr(e,t){return mo(e)&&ko(t)?So(Oo(e),t):function(n){var r=Ss(n,e);return r===a&&r===t?Cs(n,e):Er(t,r,3)}}function Nr(e,t,n,r,o){e!==t&&gr(t,(function(i,s){if(o||(o=new zn),Zi(i))!function(e,t,n,r,o,i,s){var c=Io(e,n),l=Io(t,n),u=s.get(l);if(u)Yn(e,n,u);else{var d=i?i(c,l,n+"",e,t,s):a,p=d===a;if(p){var f=$i(l),h=!f&&Gi(l),g=!f&&!h&&os(l);d=l,f||h||g?$i(c)?d=c:Vi(c)?d=Ia(c):h?(p=!1,d=ba(l,!0)):g?(p=!1,d=ka(l,!0)):d=[]:es(l)||Li(l)?(d=c,Li(c)?d=fs(c):Zi(c)&&!qi(c)||(d=fo(l))):p=!1}p&&(s.set(l,d),o(d,l,r,i,s),s.delete(l)),Yn(e,n,d)}}(e,t,s,n,Nr,r,o);else{var c=r?r(Io(e,s),i,s+"",e,t,o):a;c===a&&(c=i),Yn(e,s,c)}}),_s)}function Lr(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:a}function $r(e,t,n){t=t.length?Tt(t,(function(e){return $i(e)?function(t){return vr(t,1===e.length?e[0]:e)}:e})):[Xs];var r=-1;t=Tt(t,Jt(ao()));var a=Dr(e,(function(e,n,a){var o=Tt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,o=t.criteria,i=a.length,s=n.length;++r<i;){var c=Sa(a[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Ur(e,t,n){for(var r=-1,a=t.length,o={};++r<a;){var i=t[r],s=vr(e,i);n(s,i)&&Jr(o,ga(i,e),s)}return o}function jr(e,t,n,r){var a=r?$t:Lt,o=-1,i=t.length,s=e;for(e===t&&(t=Ia(t)),n&&(s=Tt(e,Jt(n)));++o<i;)for(var c=0,l=t[o],u=n?n(l):l;(c=a(s,u,c,r))>-1;)s!==e&&qe.call(s,c,1),qe.call(e,c,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==o){var o=a;go(a)?qe.call(e,a,1):sa(e,a)}}return e}function Gr(e,t){return e+ft(bn()*(t-e+1))}function Hr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function zr(e,t){return _o(Co(e,t,Xs),e+"")}function qr(e){return Kn(Bs(e))}function Kr(e,t){var n=Bs(e);return To(n,ar(t,0,n.length))}function Jr(e,t,n,r){if(!Zi(e))return e;for(var o=-1,i=(t=ga(t,e)).length,s=i-1,c=e;null!=c&&++o<i;){var l=Oo(t[o]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var d=c[l];(u=r?r(d,l,c):a)===a&&(u=Zi(d)?d:go(t[o+1])?[]:{})}Qn(c,l,u),c=c[l]}return e}var Zr=An?function(e,t){return An.set(e,t),e}:Xs,Yr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:Xs;function Qr(e){return To(Bs(e))}function Xr(e,t,n){var a=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=r(o);++a<o;)i[a]=e[a+t];return i}function ea(e,t){var n;return lr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function ta(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var o=r+a>>>1,i=e[o];null!==i&&!as(i)&&(n?i<=t:i<t)?r=o+1:a=o}return a}return na(e,t,Xs,n)}function na(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var s=(t=n(t))!=t,c=null===t,l=as(t),u=t===a;o<i;){var d=ft((o+i)/2),p=n(e[d]),f=p!==a,h=null===p,g=p==p,w=as(p);if(s)var m=r||g;else m=u?g&&(r||f):c?g&&f&&(r||!h):l?g&&f&&!h&&(r||!w):!h&&!w&&(r?p<=t:p<t);m?o=d+1:i=d}return wn(i,4294967294)}function ra(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n],s=t?t(i):i;if(!n||!Bi(s,c)){var c=s;o[a++]=0===i?0:i}}return o}function aa(e){return"number"==typeof e?e:as(e)?p:+e}function oa(e){if("string"==typeof e)return e;if($i(e))return Tt(e,oa)+"";if(as(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ia(e,t,n){var r=-1,a=Et,o=e.length,i=!0,s=[],c=s;if(n)i=!1,a=Mt;else if(o>=200){var l=t?null:Ha(e);if(l)return cn(l);i=!1,a=Yt,c=new Hn}else c=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,i&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else a(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function sa(e,t){return null==(e=Po(e,t=ga(t,e)))||delete e[Oo(zo(t))]}function ca(e,t,n,r){return Jr(e,t,n(vr(e,t)),r)}function la(e,t,n,r){for(var a=e.length,o=r?a:-1;(r?o--:++o<a)&&t(e[o],o,e););return n?Xr(e,r?0:o,r?o+1:a):Xr(e,r?o+1:0,r?a:o)}function ua(e,t){var n=e;return n instanceof Un&&(n=n.value()),Ot(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function da(e,t,n){var a=e.length;if(a<2)return a?ia(e[0]):[];for(var o=-1,i=r(a);++o<a;)for(var s=e[o],c=-1;++c<a;)c!=o&&(i[o]=cr(i[o]||s,e[c],t,n));return ia(hr(i,1),t,n)}function pa(e,t,n){for(var r=-1,o=e.length,i=t.length,s={};++r<o;){var c=r<i?t[r]:a;n(s,e[r],c)}return s}function fa(e){return Vi(e)?e:[]}function ha(e){return"function"==typeof e?e:Xs}function ga(e,t){return $i(e)?e:mo(e,t)?[e]:Ro(hs(e))}var wa=zr;function ma(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Xr(e,t,n)}var ya=it||function(e){return dt.clearTimeout(e)};function ba(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function va(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function ka(e,t){var n=t?va(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Sa(e,t){if(e!==t){var n=e!==a,r=null===e,o=e==e,i=as(e),s=t!==a,c=null===t,l=t==t,u=as(t);if(!c&&!u&&!i&&e>t||i&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!o)return 1;if(!r&&!i&&!u&&e<t||u&&n&&o&&!r&&!i||c&&n&&o||!s&&o||!l)return-1}return 0}function Ca(e,t,n,a){for(var o=-1,i=e.length,s=n.length,c=-1,l=t.length,u=gn(i-s,0),d=r(l+u),p=!a;++c<l;)d[c]=t[c];for(;++o<s;)(p||o<i)&&(d[n[o]]=e[o]);for(;u--;)d[c++]=e[o++];return d}function Pa(e,t,n,a){for(var o=-1,i=e.length,s=-1,c=n.length,l=-1,u=t.length,d=gn(i-c,0),p=r(d+u),f=!a;++o<d;)p[o]=e[o];for(var h=o;++l<u;)p[h+l]=t[l];for(;++s<c;)(f||o<i)&&(p[h+n[s]]=e[o++]);return p}function Ia(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function xa(e,t,n,r){var o=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var c=t[i],l=r?r(n[c],e[c],c,n,e):a;l===a&&(l=e[c]),o?nr(n,c,l):Qn(n,c,l)}return n}function Aa(e,t){return function(n,r){var a=$i(n)?Pt:er,o=t?t():{};return a(n,e,ao(r,2),o)}}function _a(e){return zr((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:a,s=o>2?n[2]:a;for(i=e.length>3&&"function"==typeof i?(o--,i):a,s&&wo(n[0],n[1],s)&&(i=o<3?a:i,o=1),t=Pe(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t}))}function Ea(e,t){return function(n,r){if(null==n)return n;if(!ji(n))return e(n,r);for(var a=n.length,o=t?a:-1,i=Pe(n);(t?o--:++o<a)&&!1!==r(i[o],o,i););return n}}function Ma(e){return function(t,n,r){for(var a=-1,o=Pe(t),i=r(t),s=i.length;s--;){var c=i[e?s:++a];if(!1===n(o[c],c,o))break}return t}}function Ta(e){return function(t){var n=rn(t=hs(t))?un(t):a,r=n?n[0]:t.charAt(0),o=n?ma(n,1).join(""):t.slice(1);return r[e]()+o}}function Ra(e){return function(t){return Ot(qs(Ls(t).replace(Ze,"")),e,"")}}function Oa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),r=e.apply(n,t);return Zi(r)?r:n}}function Wa(e){return function(t,n,r){var o=Pe(t);if(!ji(t)){var i=ao(n,3);t=As(t),n=function(e){return i(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[i?t[s]:s]:a}}function Da(e){return Qa((function(t){var n=t.length,r=n,i=$n.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ae(o);if(i&&!c&&"wrapper"==no(s))var c=new $n([],!0)}for(r=c?r:n;++r<n;){var l=no(s=t[r]),u="wrapper"==l?to(s):a;c=u&&yo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[no(u[0])].apply(c,u[3]):1==s.length&&yo(s)?c[l]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&$i(r))return c.plant(r).value();for(var a=0,o=n?t[a].apply(this,e):r;++a<n;)o=t[a].call(this,o);return o}}))}function Ba(e,t,n,o,i,s,c,u,d,p){var f=t&l,h=1&t,g=2&t,w=24&t,m=512&t,y=g?a:Oa(e);return function l(){for(var b=arguments.length,v=r(b),k=b;k--;)v[k]=arguments[k];if(w)var S=ro(l),C=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,S);if(o&&(v=Ca(v,o,i,w)),s&&(v=Pa(v,s,c,w)),b-=C,w&&b<p){var P=sn(v,S);return Va(e,t,Ba,l.placeholder,n,v,P,u,d,p-b)}var I=h?n:this,x=g?I[e]:e;return b=v.length,u?v=function(e,t){for(var n=e.length,r=wn(t.length,n),o=Ia(e);r--;){var i=t[r];e[r]=go(i,n)?o[i]:a}return e}(v,u):m&&b>1&&v.reverse(),f&&d<b&&(v.length=d),this&&this!==dt&&this instanceof l&&(x=y||Oa(x)),x.apply(I,v)}}function Fa(e,t){return function(n,r){return function(e,t,n,r){return mr(e,(function(e,a,o){t(r,n(e),a,o)})),r}(n,e,t(r),{})}}function Na(e,t){return function(n,r){var o;if(n===a&&r===a)return t;if(n!==a&&(o=n),r!==a){if(o===a)return r;"string"==typeof n||"string"==typeof r?(n=oa(n),r=oa(r)):(n=aa(n),r=aa(r)),o=e(n,r)}return o}}function La(e){return Qa((function(t){return t=Tt(t,Jt(ao())),zr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function $a(e,t){var n=(t=t===a?" ":oa(t)).length;if(n<2)return n?Hr(t,e):t;var r=Hr(t,pt(e/ln(t)));return rn(t)?ma(un(r),0,e).join(""):r.slice(0,e)}function Ua(e){return function(t,n,o){return o&&"number"!=typeof o&&wo(t,n,o)&&(n=o=a),t=ls(t),n===a?(n=t,t=0):n=ls(n),function(e,t,n,a){for(var o=-1,i=gn(pt((t-e)/(n||1)),0),s=r(i);i--;)s[a?i:++o]=e,e+=n;return s}(t,n,o=o===a?t<n?1:-1:ls(o),e)}}function ja(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ps(t),n=ps(n)),e(t,n)}}function Va(e,t,n,r,o,i,s,l,u,d){var p=8&t;t|=p?c:64,4&(t&=~(p?64:c))||(t&=-4);var f=[e,t,o,p?i:a,p?s:a,p?a:i,p?a:s,l,u,d],h=n.apply(a,f);return yo(e)&&xo(h,f),h.placeholder=r,Eo(h,e,t)}function Ga(e){var t=Ce[e];return function(e,n){if(e=ps(e),(n=null==n?0:wn(us(n),292))&&Bt(e)){var r=(hs(e)+"e").split("e");return+((r=(hs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ha=Pn&&1/cn(new Pn([,-0]))[1]==u?function(e){return new Pn(e)}:ac;function za(e){return function(t){var n=uo(t);return n==S?an(t):n==A?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return Tt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qa(e,t,n,i,u,d,p,f){var h=2&t;if(!h&&"function"!=typeof e)throw new Ae(o);var g=i?i.length:0;if(g||(t&=-97,i=u=a),p=p===a?p:gn(us(p),0),f=f===a?f:us(f),g-=u?u.length:0,64&t){var w=i,m=u;i=u=a}var y=h?a:to(e),b=[e,t,n,i,u,w,m,d,p,f];if(y&&function(e,t){var n=e[1],r=t[1],a=n|r,o=a<131,i=r==l&&8==n||r==l&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!i)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ca(u,c,t[4]):c,e[4]=u?sn(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Pa(u,c,t[6]):c,e[6]=u?sn(e[5],s):t[6]),(c=t[7])&&(e[7]=c),r&l&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(b,y),e=b[0],t=b[1],n=b[2],i=b[3],u=b[4],!(f=b[9]=b[9]===a?h?0:e.length:gn(b[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var o=Oa(e);return function i(){for(var s=arguments.length,c=r(s),l=s,u=ro(i);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:sn(c,u);return(s-=d.length)<n?Va(e,t,Ba,i.placeholder,a,c,d,a,a,n-s):Ct(this&&this!==dt&&this instanceof i?o:e,this,c)}}(e,t,f):t!=c&&33!=t||u.length?Ba.apply(a,b):function(e,t,n,a){var o=1&t,i=Oa(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=a.length,d=r(u+c),p=this&&this!==dt&&this instanceof t?i:e;++l<u;)d[l]=a[l];for(;c--;)d[l++]=arguments[++s];return Ct(p,o?n:this,d)}}(e,t,n,i);else var v=function(e,t,n){var r=1&t,a=Oa(e);return function t(){return(this&&this!==dt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,n);return Eo((y?Zr:xo)(v,b),e,t)}function Ka(e,t,n,r){return e===a||Bi(e,Me[n])&&!Oe.call(r,n)?t:e}function Ja(e,t,n,r,o,i){return Zi(e)&&Zi(t)&&(i.set(t,e),Nr(e,t,a,Ja,i),i.delete(t)),e}function Za(e){return es(e)?a:e}function Ya(e,t,n,r,o,i){var s=1&n,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var p=-1,f=!0,h=2&n?new Hn:a;for(i.set(e,t),i.set(t,e);++p<c;){var g=e[p],w=t[p];if(r)var m=s?r(w,g,p,t,e,i):r(g,w,p,e,t,i);if(m!==a){if(m)continue;f=!1;break}if(h){if(!Dt(t,(function(e,t){if(!Yt(h,t)&&(g===e||o(g,e,n,r,i)))return h.push(t)}))){f=!1;break}}else if(g!==w&&!o(g,w,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Qa(e){return _o(Co(e,a,Uo),e+"")}function Xa(e){return kr(e,As,co)}function eo(e){return kr(e,_s,lo)}var to=An?function(e){return An.get(e)}:ac;function no(e){for(var t=e.name+"",n=_n[t],r=Oe.call(_n,t)?n.length:0;r--;){var a=n[r],o=a.func;if(null==o||o==e)return a.name}return t}function ro(e){return(Oe.call(Fn,"placeholder")?Fn:e).placeholder}function ao(){var e=Fn.iteratee||ec;return e=e===ec?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function oo(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function io(e){for(var t=As(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,ko(a)]}return t}function so(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Tr(n)?n:a}var co=gt?function(e){return null==e?[]:(e=Pe(e),_t(gt(e),(function(t){return ze.call(e,t)})))}:dc,lo=gt?function(e){for(var t=[];e;)Rt(t,co(e)),e=Ge(e);return t}:dc,uo=Sr;function po(e,t,n){for(var r=-1,a=(t=ga(t,e)).length,o=!1;++r<a;){var i=Oo(t[r]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&Ji(a)&&go(i,a)&&($i(e)||Li(e))}function fo(e){return"function"!=typeof e.constructor||vo(e)?{}:Nn(Ge(e))}function ho(e){return $i(e)||Li(e)||!!(Ke&&e&&e[Ke])}function go(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&me.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,n){if(!Zi(n))return!1;var r=typeof t;return!!("number"==r?ji(n)&&go(t,n.length):"string"==r&&t in n)&&Bi(n[t],e)}function mo(e,t){if($i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!as(e))||X.test(e)||!Q.test(e)||null!=t&&e in Pe(t)}function yo(e){var t=no(e),n=Fn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var r=to(n);return!!r&&e===r[0]}(kn&&uo(new kn(new ArrayBuffer(1)))!=R||Sn&&uo(new Sn)!=S||Cn&&uo(Cn.resolve())!=I||Pn&&uo(new Pn)!=A||In&&uo(new In)!=M)&&(uo=function(e){var t=Sr(e),n=t==P?e.constructor:a,r=n?Wo(n):"";if(r)switch(r){case En:return R;case Mn:return S;case Tn:return I;case Rn:return A;case On:return M}return t});var bo=Te?qi:pc;function vo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Me)}function ko(e){return e==e&&!Zi(e)}function So(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in Pe(n))}}function Co(e,t,n){return t=gn(t===a?e.length-1:t,0),function(){for(var a=arguments,o=-1,i=gn(a.length-t,0),s=r(i);++o<i;)s[o]=a[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=a[o];return c[t]=n(s),Ct(e,this,c)}}function Po(e,t){return t.length<2?e:vr(e,Xr(t,0,-1))}function Io(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var xo=Mo(Zr),Ao=ut||function(e,t){return dt.setTimeout(e,t)},_o=Mo(Yr);function Eo(e,t,n){var r=t+"";return _o(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(h,(function(n){var r="_."+n[0];t&n[1]&&!Et(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ie);return t?t[1].split(se):[]}(r),n)))}function Mo(e){var t=0,n=0;return function(){var r=mn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function To(e,t){var n=-1,r=e.length,o=r-1;for(t=t===a?r:t;++n<t;){var i=Gr(n,o),s=e[i];e[i]=e[n],e[n]=s}return e.length=t,e}var Ro=function(){var e=Mi((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,a){t.push(r?a.replace(ue,"$1"):n||e)})),t}),(function(e){return 500===t.size&&t.clear(),e})),t=e.cache;return e}();function Oo(e){if("string"==typeof e||as(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Wo(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Do(e){if(e instanceof Un)return e.clone();var t=new $n(e.__wrapped__,e.__chain__);return t.__actions__=Ia(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=zr((function(e,t){return Vi(e)?cr(e,hr(t,1,Vi,!0)):[]})),Fo=zr((function(e,t){var n=zo(t);return Vi(n)&&(n=a),Vi(e)?cr(e,hr(t,1,Vi,!0),ao(n,2)):[]})),No=zr((function(e,t){var n=zo(t);return Vi(n)&&(n=a),Vi(e)?cr(e,hr(t,1,Vi,!0),a,n):[]}));function Lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:us(n);return a<0&&(a=gn(r+a,0)),Nt(e,ao(t,3),a)}function $o(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==a&&(o=us(n),o=n<0?gn(r+o,0):wn(o,r-1)),Nt(e,ao(t,3),o,!0)}function Uo(e){return null!=e&&e.length?hr(e,1):[]}function jo(e){return e&&e.length?e[0]:a}var Vo=zr((function(e){var t=Tt(e,fa);return t.length&&t[0]===e[0]?xr(t):[]})),Go=zr((function(e){var t=zo(e),n=Tt(e,fa);return t===zo(n)?t=a:n.pop(),n.length&&n[0]===e[0]?xr(n,ao(t,2)):[]})),Ho=zr((function(e){var t=zo(e),n=Tt(e,fa);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?xr(n,a,t):[]}));function zo(e){var t=null==e?0:e.length;return t?e[t-1]:a}var qo=zr(Ko);function Ko(e,t){return e&&e.length&&t&&t.length?jr(e,t):e}var Jo=Qa((function(e,t){var n=null==e?0:e.length,r=rr(e,t);return Vr(e,Tt(t,(function(e){return go(e,n)?+e:e})).sort(Sa)),r}));function Zo(e){return null==e?e:vn.call(e)}var Yo=zr((function(e){return ia(hr(e,1,Vi,!0))})),Qo=zr((function(e){var t=zo(e);return Vi(t)&&(t=a),ia(hr(e,1,Vi,!0),ao(t,2))})),Xo=zr((function(e){var t=zo(e);return t="function"==typeof t?t:a,ia(hr(e,1,Vi,!0),a,t)}));function ei(e){if(!e||!e.length)return[];var t=0;return e=_t(e,(function(e){if(Vi(e))return t=gn(e.length,t),!0})),qt(t,(function(t){return Tt(e,Vt(t))}))}function ti(e,t){if(!e||!e.length)return[];var n=ei(e);return null==t?n:Tt(n,(function(e){return Ct(t,a,e)}))}var ni=zr((function(e,t){return Vi(e)?cr(e,t):[]})),ri=zr((function(e){return da(_t(e,Vi))})),ai=zr((function(e){var t=zo(e);return Vi(t)&&(t=a),da(_t(e,Vi),ao(t,2))})),oi=zr((function(e){var t=zo(e);return t="function"==typeof t?t:a,da(_t(e,Vi),a,t)})),ii=zr(ei),si=zr((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,ti(e,n)}));function ci(e){var t=Fn(e);return t.__chain__=!0,t}function li(e,t){return t(e)}var ui=Qa((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return rr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Un&&go(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:li,args:[o],thisArg:a}),new $n(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(o)})),di=Aa((function(e,t,n){Oe.call(e,n)?++e[n]:nr(e,n,1)})),pi=Wa(Lo),fi=Wa($o);function hi(e,t){return($i(e)?It:lr)(e,ao(t,3))}function gi(e,t){return($i(e)?xt:ur)(e,ao(t,3))}var wi=Aa((function(e,t,n){Oe.call(e,n)?e[n].push(t):nr(e,n,[t])})),mi=zr((function(e,t,n){var a=-1,o="function"==typeof t,i=ji(e)?r(e.length):[];return lr(e,(function(e){i[++a]=o?Ct(t,e,n):Ar(e,t,n)})),i})),yi=Aa((function(e,t,n){nr(e,n,t)}));function bi(e,t){return($i(e)?Tt:Dr)(e,ao(t,3))}var vi=Aa((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ki=zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wo(e,t[0],t[1])?t=[]:n>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),$r(e,hr(t,1),[])})),Si=lt||function(){return dt.Date.now()};function Ci(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,qa(e,l,a,a,a,a,t)}function Pi(e,t){var n;if("function"!=typeof t)throw new Ae(o);return e=us(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ii=zr((function(e,t,n){var r=1;if(n.length){var a=sn(n,ro(Ii));r|=c}return qa(e,r,t,n,a)})),xi=zr((function(e,t,n){var r=3;if(n.length){var a=sn(n,ro(xi));r|=c}return qa(t,r,e,n,a)}));function Ai(e,t,n){var r,i,s,c,l,u,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new Ae(o);function g(t){var n=r,o=i;return r=i=a,d=t,c=e.apply(o,n)}function w(e){var n=e-u;return u===a||n>=t||n<0||f&&e-d>=s}function m(){var e=Si();if(w(e))return y(e);l=Ao(m,function(e){var n=t-(e-u);return f?wn(n,s-(e-d)):n}(e))}function y(e){return l=a,h&&r?g(e):(r=i=a,c)}function b(){var e=Si(),n=w(e);if(r=arguments,i=this,u=e,n){if(l===a)return function(e){return d=e,l=Ao(m,t),p?g(e):c}(u);if(f)return ya(l),l=Ao(m,t),g(u)}return l===a&&(l=Ao(m,t)),c}return t=ps(t)||0,Zi(n)&&(p=!!n.leading,s=(f="maxWait"in n)?gn(ps(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),b.cancel=function(){l!==a&&ya(l),d=0,r=u=i=l=a},b.flush=function(){return l===a?c:y(Si())},b}var _i=zr((function(e,t){return sr(e,1,t)})),Ei=zr((function(e,t,n){return sr(e,ps(t)||0,n)}));function Mi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(o);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(Mi.Cache||Gn),n}function Ti(e){if("function"!=typeof e)throw new Ae(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Mi.Cache=Gn;var Ri=wa((function(e,t){var n=(t=1==t.length&&$i(t[0])?Tt(t[0],Jt(ao())):Tt(hr(t,1),Jt(ao()))).length;return zr((function(r){for(var a=-1,o=wn(r.length,n);++a<o;)r[a]=t[a].call(this,r[a]);return Ct(e,this,r)}))})),Oi=zr((function(e,t){var n=sn(t,ro(Oi));return qa(e,c,a,t,n)})),Wi=zr((function(e,t){var n=sn(t,ro(Wi));return qa(e,64,a,t,n)})),Di=Qa((function(e,t){return qa(e,256,a,a,a,t)}));function Bi(e,t){return e===t||e!=e&&t!=t}var Fi=ja(Cr),Ni=ja((function(e,t){return e>=t})),Li=_r(function(){return arguments}())?_r:function(e){return Yi(e)&&Oe.call(e,"callee")&&!ze.call(e,"callee")},$i=r.isArray,Ui=mt?Jt(mt):function(e){return Yi(e)&&Sr(e)==T};function ji(e){return null!=e&&Ji(e.length)&&!qi(e)}function Vi(e){return Yi(e)&&ji(e)}var Gi=wt||pc,Hi=yt?Jt(yt):function(e){return Yi(e)&&Sr(e)==y};function zi(e){if(!Yi(e))return!1;var t=Sr(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!es(e)}function qi(e){if(!Zi(e))return!1;var t=Sr(e);return t==v||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ki(e){return"number"==typeof e&&e==us(e)}function Ji(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Zi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Yi(e){return null!=e&&"object"==typeof e}var Qi=bt?Jt(bt):function(e){return Yi(e)&&uo(e)==S};function Xi(e){return"number"==typeof e||Yi(e)&&Sr(e)==C}function es(e){if(!Yi(e)||Sr(e)!=P)return!1;var t=Ge(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Fe}var ts=vt?Jt(vt):function(e){return Yi(e)&&Sr(e)==x},ns=kt?Jt(kt):function(e){return Yi(e)&&uo(e)==A};function rs(e){return"string"==typeof e||!$i(e)&&Yi(e)&&Sr(e)==_}function as(e){return"symbol"==typeof e||Yi(e)&&Sr(e)==E}var os=St?Jt(St):function(e){return Yi(e)&&Ji(e.length)&&!!at[Sr(e)]},is=ja(Wr),ss=ja((function(e,t){return e<=t}));function cs(e){if(!e)return[];if(ji(e))return rs(e)?un(e):Ia(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=uo(e);return(t==S?an:t==A?cn:Bs)(e)}function ls(e){return e?(e=ps(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function us(e){var t=ls(e),n=t%1;return t==t?n?t-n:t:0}function ds(e){return e?ar(us(e),0,f):0}function ps(e){if("number"==typeof e)return e;if(as(e))return p;if(Zi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=he.test(e);return n||we.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?p:+e}function fs(e){return xa(e,_s(e))}function hs(e){return null==e?"":oa(e)}var gs=_a((function(e,t){if(vo(t)||ji(t))xa(t,As(t),e);else for(var n in t)Oe.call(t,n)&&Qn(e,n,t[n])})),ws=_a((function(e,t){xa(t,_s(t),e)})),ms=_a((function(e,t,n,r){xa(t,_s(t),e,r)})),ys=_a((function(e,t,n,r){xa(t,As(t),e,r)})),bs=Qa(rr),vs=zr((function(e,t){e=Pe(e);var n=-1,r=t.length,o=r>2?t[2]:a;for(o&&wo(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],s=_s(i),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===a||Bi(d,Me[u])&&!Oe.call(e,u))&&(e[u]=i[u])}return e})),ks=zr((function(e){return e.push(a,Ja),Ct(Ms,a,e)}));function Ss(e,t,n){var r=null==e?a:vr(e,t);return r===a?n:r}function Cs(e,t){return null!=e&&po(e,t,Ir)}var Ps=Fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),Zs(Xs)),Is=Fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]}),ao),xs=zr(Ar);function As(e){return ji(e)?qn(e):Or(e)}function _s(e){return ji(e)?qn(e,!0):function(e){if(!Zi(e))return function(e){var t=[];if(null!=e)for(var n in Pe(e))t.push(n);return t}(e);var t=vo(e),n=[];for(var r in e)("constructor"!=r||!t&&Oe.call(e,r))&&n.push(r);return n}(e)}var Es=_a((function(e,t,n){Nr(e,t,n)})),Ms=_a((function(e,t,n,r){Nr(e,t,n,r)})),Ts=Qa((function(e,t){var n={};if(null==e)return n;var r=!1;t=Tt(t,(function(t){return t=ga(t,e),r||(r=t.length>1),t})),xa(e,eo(e),n),r&&(n=or(n,7,Za));for(var a=t.length;a--;)sa(n,t[a]);return n})),Rs=Qa((function(e,t){return null==e?{}:function(e,t){return Ur(e,t,(function(t,n){return Cs(e,n)}))}(e,t)}));function Os(e,t){if(null==e)return{};var n=Tt(eo(e),(function(e){return[e]}));return t=ao(t),Ur(e,n,(function(e,n){return t(e,n[0])}))}var Ws=za(As),Ds=za(_s);function Bs(e){return null==e?[]:Zt(e,As(e))}var Fs=Ra((function(e,t,n){return t=t.toLowerCase(),e+(n?Ns(t):t)}));function Ns(e){return zs(hs(e).toLowerCase())}function Ls(e){return(e=hs(e))&&e.replace(ye,en).replace(Ye,"")}var $s=Ra((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Us=Ra((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),js=Ta("toLowerCase"),Vs=Ra((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Gs=Ra((function(e,t,n){return e+(n?" ":"")+zs(t)})),Hs=Ra((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),zs=Ta("toUpperCase");function qs(e,t,n){return e=hs(e),(t=n?a:t)===a?function(e){return tt.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Ks=zr((function(e,t){try{return Ct(e,a,t)}catch(e){return zi(e)?e:new ke(e)}})),Js=Qa((function(e,t){return It(t,(function(t){t=Oo(t),nr(e,t,Ii(e[t],e))})),e}));function Zs(e){return function(){return e}}var Ys=Da(),Qs=Da(!0);function Xs(e){return e}function ec(e){return Rr("function"==typeof e?e:or(e,1))}var tc=zr((function(e,t){return function(n){return Ar(n,e,t)}})),nc=zr((function(e,t){return function(n){return Ar(e,n,t)}}));function rc(e,t,n){var r=As(t),a=br(t,r);null!=n||Zi(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=br(t,As(t)));var o=!(Zi(n)&&"chain"in n&&!n.chain),i=qi(e);return It(a,(function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ia(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function ac(){}var oc=La(Tt),ic=La(At),sc=La(Dt);function cc(e){return mo(e)?Vt(Oo(e)):function(e){return function(t){return vr(t,e)}}(e)}var lc=Ua(),uc=Ua(!0);function dc(){return[]}function pc(){return!1}var fc,hc=Na((function(e,t){return e+t}),0),gc=Ga("ceil"),wc=Na((function(e,t){return e/t}),1),mc=Ga("floor"),yc=Na((function(e,t){return e*t}),1),bc=Ga("round"),vc=Na((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Ae(o);return e=us(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Ci,Fn.assign=gs,Fn.assignIn=ws,Fn.assignInWith=ms,Fn.assignWith=ys,Fn.at=bs,Fn.before=Pi,Fn.bind=Ii,Fn.bindAll=Js,Fn.bindKey=xi,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $i(e)?e:[e]},Fn.chain=ci,Fn.chunk=function(e,t,n){t=(n?wo(e,t,n):t===a)?1:gn(us(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,s=0,c=r(pt(o/t));i<o;)c[s++]=Xr(e,i,i+=t);return c},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var o=e[t];o&&(a[r++]=o)}return a},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Rt($i(n)?Ia(n):[n],hr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ao();return e=t?Tt(e,(function(e){if("function"!=typeof e[1])throw new Ae(o);return[n(e[0]),e[1]]})):[],zr((function(n){for(var r=-1;++r<t;){var a=e[r];if(Ct(a[0],this,n))return Ct(a[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=As(e);return function(n){return ir(n,e,t)}}(or(e,1))},Fn.constant=Zs,Fn.countBy=di,Fn.create=function(e,t){var n=Nn(e);return null==t?n:tr(n,t)},Fn.curry=function e(t,n,r){var o=qa(t,8,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Fn.curryRight=function e(t,n,r){var o=qa(t,16,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Fn.debounce=Ai,Fn.defaults=vs,Fn.defaultsDeep=ks,Fn.defer=_i,Fn.delay=Ei,Fn.difference=Bo,Fn.differenceBy=Fo,Fn.differenceWith=No,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,(t=n||t===a?1:us(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,0,(t=r-(t=n||t===a?1:us(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!0):[]},Fn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=us(n))<0&&(n=-n>o?0:o+n),(r=r===a||r>o?o:us(r))<0&&(r+=o),r=n>r?0:ds(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return($i(e)?_t:fr)(e,ao(t,3))},Fn.flatMap=function(e,t){return hr(bi(e,t),1)},Fn.flatMapDeep=function(e,t){return hr(bi(e,t),u)},Fn.flatMapDepth=function(e,t,n){return n=n===a?1:us(n),hr(bi(e,t),n)},Fn.flatten=Uo,Fn.flattenDeep=function(e){return null!=e&&e.length?hr(e,u):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?hr(e,t=t===a?1:us(t)):[]},Fn.flip=function(e){return qa(e,512)},Fn.flow=Ys,Fn.flowRight=Qs,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Fn.functions=function(e){return null==e?[]:br(e,As(e))},Fn.functionsIn=function(e){return null==e?[]:br(e,_s(e))},Fn.groupBy=wi,Fn.initial=function(e){return null!=e&&e.length?Xr(e,0,-1):[]},Fn.intersection=Vo,Fn.intersectionBy=Go,Fn.intersectionWith=Ho,Fn.invert=Ps,Fn.invertBy=Is,Fn.invokeMap=mi,Fn.iteratee=ec,Fn.keyBy=yi,Fn.keys=As,Fn.keysIn=_s,Fn.map=bi,Fn.mapKeys=function(e,t){var n={};return t=ao(t,3),mr(e,(function(e,r,a){nr(n,t(e,r,a),e)})),n},Fn.mapValues=function(e,t){var n={};return t=ao(t,3),mr(e,(function(e,r,a){nr(n,r,t(e,r,a))})),n},Fn.matches=function(e){return Br(or(e,1))},Fn.matchesProperty=function(e,t){return Fr(e,or(t,1))},Fn.memoize=Mi,Fn.merge=Es,Fn.mergeWith=Ms,Fn.method=tc,Fn.methodOf=nc,Fn.mixin=rc,Fn.negate=Ti,Fn.nthArg=function(e){return e=us(e),zr((function(t){return Lr(t,e)}))},Fn.omit=Ts,Fn.omitBy=function(e,t){return Os(e,Ti(ao(t)))},Fn.once=function(e){return Pi(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:($i(t)||(t=null==t?[]:[t]),$i(n=r?a:n)||(n=null==n?[]:[n]),$r(e,t,n))},Fn.over=oc,Fn.overArgs=Ri,Fn.overEvery=ic,Fn.overSome=sc,Fn.partial=Oi,Fn.partialRight=Wi,Fn.partition=vi,Fn.pick=Rs,Fn.pickBy=Os,Fn.property=cc,Fn.propertyOf=function(e){return function(t){return null==e?a:vr(e,t)}},Fn.pull=qo,Fn.pullAll=Ko,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,ao(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,a,n):e},Fn.pullAt=Jo,Fn.range=lc,Fn.rangeRight=uc,Fn.rearg=Di,Fn.reject=function(e,t){return($i(e)?_t:fr)(e,Ti(ao(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],o=e.length;for(t=ao(t,3);++r<o;){var i=e[r];t(i,r,e)&&(n.push(i),a.push(r))}return Vr(e,a),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Ae(o);return zr(e,t=t===a?t:us(t))},Fn.reverse=Zo,Fn.sampleSize=function(e,t,n){return t=(n?wo(e,t,n):t===a)?1:us(t),($i(e)?Jn:Kr)(e,t)},Fn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Jr(e,t,n,r)},Fn.shuffle=function(e){return($i(e)?Zn:Qr)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wo(e,t,n)?(t=0,n=r):(t=null==t?0:us(t),n=n===a?r:us(n)),Xr(e,t,n)):[]},Fn.sortBy=ki,Fn.sortedUniq=function(e){return e&&e.length?ra(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?ra(e,ao(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&wo(e,t,n)&&(t=n=a),(n=n===a?f:n>>>0)?(e=hs(e))&&("string"==typeof t||null!=t&&!ts(t))&&!(t=oa(t))&&rn(e)?ma(un(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Ae(o);return t=null==t?0:gn(us(t),0),zr((function(n){var r=n[t],a=ma(n,0,t);return r&&Rt(a,r),Ct(e,this,a)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?Xr(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?Xr(e,0,(t=n||t===a?1:us(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,(t=r-(t=n||t===a?1:us(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?la(e,ao(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Ae(o);return Zi(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Ai(e,t,{leading:r,maxWait:t,trailing:a})},Fn.thru=li,Fn.toArray=cs,Fn.toPairs=Ws,Fn.toPairsIn=Ds,Fn.toPath=function(e){return $i(e)?Tt(e,Oo):as(e)?[e]:Ia(Ro(hs(e)))},Fn.toPlainObject=fs,Fn.transform=function(e,t,n){var r=$i(e),a=r||Gi(e)||os(e);if(t=ao(t,4),null==n){var o=e&&e.constructor;n=a?r?new o:[]:Zi(e)&&qi(o)?Nn(Ge(e)):{}}return(a?It:mr)(e,(function(e,r,a){return t(n,e,r,a)})),n},Fn.unary=function(e){return Ci(e,1)},Fn.union=Yo,Fn.unionBy=Qo,Fn.unionWith=Xo,Fn.uniq=function(e){return e&&e.length?ia(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?ia(e,ao(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?ia(e,a,t):[]},Fn.unset=function(e,t){return null==e||sa(e,t)},Fn.unzip=ei,Fn.unzipWith=ti,Fn.update=function(e,t,n){return null==e?e:ca(e,t,ha(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ca(e,t,ha(n),r)},Fn.values=Bs,Fn.valuesIn=function(e){return null==e?[]:Zt(e,_s(e))},Fn.without=ni,Fn.words=qs,Fn.wrap=function(e,t){return Oi(ha(t),e)},Fn.xor=ri,Fn.xorBy=ai,Fn.xorWith=oi,Fn.zip=ii,Fn.zipObject=function(e,t){return pa(e||[],t||[],Qn)},Fn.zipObjectDeep=function(e,t){return pa(e||[],t||[],Jr)},Fn.zipWith=si,Fn.entries=Ws,Fn.entriesIn=Ds,Fn.extend=ws,Fn.extendWith=ms,rc(Fn,Fn),Fn.add=hc,Fn.attempt=Ks,Fn.camelCase=Fs,Fn.capitalize=Ns,Fn.ceil=gc,Fn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ps(n))==n?n:0),t!==a&&(t=(t=ps(t))==t?t:0),ar(ps(e),t,n)},Fn.clone=function(e){return or(e,4)},Fn.cloneDeep=function(e){return or(e,5)},Fn.cloneDeepWith=function(e,t){return or(e,5,t="function"==typeof t?t:a)},Fn.cloneWith=function(e,t){return or(e,4,t="function"==typeof t?t:a)},Fn.conformsTo=function(e,t){return null==t||ir(e,t,As(t))},Fn.deburr=Ls,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=wc,Fn.endsWith=function(e,t,n){e=hs(e),t=oa(t);var r=e.length,o=n=n===a?r:ar(us(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Fn.eq=Bi,Fn.escape=function(e){return(e=hs(e))&&K.test(e)?e.replace(z,tn):e},Fn.escapeRegExp=function(e){return(e=hs(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Fn.every=function(e,t,n){var r=$i(e)?At:dr;return n&&wo(e,t,n)&&(t=a),r(e,ao(t,3))},Fn.find=pi,Fn.findIndex=Lo,Fn.findKey=function(e,t){return Ft(e,ao(t,3),mr)},Fn.findLast=fi,Fn.findLastIndex=$o,Fn.findLastKey=function(e,t){return Ft(e,ao(t,3),yr)},Fn.floor=mc,Fn.forEach=hi,Fn.forEachRight=gi,Fn.forIn=function(e,t){return null==e?e:gr(e,ao(t,3),_s)},Fn.forInRight=function(e,t){return null==e?e:wr(e,ao(t,3),_s)},Fn.forOwn=function(e,t){return e&&mr(e,ao(t,3))},Fn.forOwnRight=function(e,t){return e&&yr(e,ao(t,3))},Fn.get=Ss,Fn.gt=Fi,Fn.gte=Ni,Fn.has=function(e,t){return null!=e&&po(e,t,Pr)},Fn.hasIn=Cs,Fn.head=jo,Fn.identity=Xs,Fn.includes=function(e,t,n,r){e=ji(e)?e:Bs(e),n=n&&!r?us(n):0;var a=e.length;return n<0&&(n=gn(a+n,0)),rs(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Lt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:us(n);return a<0&&(a=gn(r+a,0)),Lt(e,t,a)},Fn.inRange=function(e,t,n){return t=ls(t),n===a?(n=t,t=0):n=ls(n),function(e,t,n){return e>=wn(t,n)&&e<gn(t,n)}(e=ps(e),t,n)},Fn.invoke=xs,Fn.isArguments=Li,Fn.isArray=$i,Fn.isArrayBuffer=Ui,Fn.isArrayLike=ji,Fn.isArrayLikeObject=Vi,Fn.isBoolean=function(e){return!0===e||!1===e||Yi(e)&&Sr(e)==m},Fn.isBuffer=Gi,Fn.isDate=Hi,Fn.isElement=function(e){return Yi(e)&&1===e.nodeType&&!es(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(ji(e)&&($i(e)||"string"==typeof e||"function"==typeof e.splice||Gi(e)||os(e)||Li(e)))return!e.length;var t=uo(e);if(t==S||t==A)return!e.size;if(vo(e))return!Or(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Er(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Er(e,t,a,n):!!r},Fn.isError=zi,Fn.isFinite=function(e){return"number"==typeof e&&Bt(e)},Fn.isFunction=qi,Fn.isInteger=Ki,Fn.isLength=Ji,Fn.isMap=Qi,Fn.isMatch=function(e,t){return e===t||Mr(e,t,io(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Mr(e,t,io(t),n)},Fn.isNaN=function(e){return Xi(e)&&e!=+e},Fn.isNative=function(e){if(bo(e))throw new ke("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Tr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=Xi,Fn.isObject=Zi,Fn.isObjectLike=Yi,Fn.isPlainObject=es,Fn.isRegExp=ts,Fn.isSafeInteger=function(e){return Ki(e)&&e>=-9007199254740991&&e<=d},Fn.isSet=ns,Fn.isString=rs,Fn.isSymbol=as,Fn.isTypedArray=os,Fn.isUndefined=function(e){return e===a},Fn.isWeakMap=function(e){return Yi(e)&&uo(e)==M},Fn.isWeakSet=function(e){return Yi(e)&&"[object WeakSet]"==Sr(e)},Fn.join=function(e,t){return null==e?"":Gt.call(e,t)},Fn.kebabCase=$s,Fn.last=zo,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==a&&(o=(o=us(n))<0?gn(r+o,0):wn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Nt(e,Ut,o,!0)},Fn.lowerCase=Us,Fn.lowerFirst=js,Fn.lt=is,Fn.lte=ss,Fn.max=function(e){return e&&e.length?pr(e,Xs,Cr):a},Fn.maxBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Cr):a},Fn.mean=function(e){return jt(e,Xs)},Fn.meanBy=function(e,t){return jt(e,ao(t,2))},Fn.min=function(e){return e&&e.length?pr(e,Xs,Wr):a},Fn.minBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Wr):a},Fn.stubArray=dc,Fn.stubFalse=pc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=yc,Fn.nth=function(e,t){return e&&e.length?Lr(e,us(t)):a},Fn.noConflict=function(){return dt._===this&&(dt._=Ne),this},Fn.noop=ac,Fn.now=Si,Fn.pad=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return $a(ft(a),n)+e+$a(pt(a),n)},Fn.padEnd=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;return t&&r<t?e+$a(t-r,n):e},Fn.padStart=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;return t&&r<t?$a(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),yn(hs(e).replace(re,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wo(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=ls(e),t===a?(t=e,e=0):t=ls(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=bn();return wn(e+o*(t-e+st("1e-"+((o+"").length-1))),t)}return Gr(e,t)},Fn.reduce=function(e,t,n){var r=$i(e)?Ot:Ht,a=arguments.length<3;return r(e,ao(t,4),n,a,lr)},Fn.reduceRight=function(e,t,n){var r=$i(e)?Wt:Ht,a=arguments.length<3;return r(e,ao(t,4),n,a,ur)},Fn.repeat=function(e,t,n){return t=(n?wo(e,t,n):t===a)?1:us(t),Hr(hs(e),t)},Fn.replace=function(){var e=arguments,t=hs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,o=(t=ga(t,e)).length;for(o||(o=1,e=a);++r<o;){var i=null==e?a:e[Oo(t[r])];i===a&&(r=o,i=n),e=qi(i)?i.call(e):i}return e},Fn.round=bc,Fn.runInContext=e,Fn.sample=function(e){return($i(e)?Kn:qr)(e)},Fn.size=function(e){if(null==e)return 0;if(ji(e))return rs(e)?ln(e):e.length;var t=uo(e);return t==S||t==A?e.size:Or(e).length},Fn.snakeCase=Vs,Fn.some=function(e,t,n){var r=$i(e)?Dt:ea;return n&&wo(e,t,n)&&(t=a),r(e,ao(t,3))},Fn.sortedIndex=function(e,t){return ta(e,t)},Fn.sortedIndexBy=function(e,t,n){return na(e,t,ao(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ta(e,t);if(r<n&&Bi(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ta(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return na(e,t,ao(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ta(e,t,!0)-1;if(Bi(e[n],t))return n}return-1},Fn.startCase=Gs,Fn.startsWith=function(e,t,n){return e=hs(e),n=null==n?0:ar(us(n),0,e.length),t=oa(t),e.slice(n,n+t.length)==t},Fn.subtract=vc,Fn.sum=function(e){return e&&e.length?zt(e,Xs):0},Fn.sumBy=function(e,t){return e&&e.length?zt(e,ao(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&wo(e,t,n)&&(t=a),e=hs(e),t=ms({},t,r,Ka);var o,i,s=ms({},t.imports,r.imports,Ka),c=As(s),l=Zt(s,c),u=0,d=t.interpolate||be,p="__p += '",f=Ie((t.escape||be).source+"|"+d.source+"|"+(d===Y?de:be).source+"|"+(t.evaluate||be).source+"|$","g"),h="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(f,(function(t,n,r,a,s,c){return r||(r=a),p+=e.slice(u,c).replace(ve,nn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(i=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),p+="';\n";var g=Oe.call(t,"variable")&&t.variable;if(g){if(le.test(g))throw new ke("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(i?p.replace(j,""):p).replace(V,"$1").replace(G,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var w=Ks((function(){return Se(c,h+"return "+p).apply(a,l)}));if(w.source=p,zi(w))throw w;return w},Fn.times=function(e,t){if((e=us(e))<1||e>d)return[];var n=f,r=wn(e,f);t=ao(t),e-=f;for(var a=qt(r,t);++n<e;)t(n);return a},Fn.toFinite=ls,Fn.toInteger=us,Fn.toLength=ds,Fn.toLower=function(e){return hs(e).toLowerCase()},Fn.toNumber=ps,Fn.toSafeInteger=function(e){return e?ar(us(e),-9007199254740991,d):0===e?e:0},Fn.toString=hs,Fn.toUpper=function(e){return hs(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=hs(e))&&(n||t===a))return Kt(e);if(!e||!(t=oa(t)))return e;var r=un(e),o=un(t);return ma(r,Qt(r,o),Xt(r,o)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=hs(e))&&(n||t===a))return e.slice(0,dn(e)+1);if(!e||!(t=oa(t)))return e;var r=un(e);return ma(r,0,Xt(r,un(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=hs(e))&&(n||t===a))return e.replace(re,"");if(!e||!(t=oa(t)))return e;var r=un(e);return ma(r,Qt(r,un(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(Zi(t)){var o="separator"in t?t.separator:o;n="length"in t?us(t.length):n,r="omission"in t?oa(t.omission):r}var i=(e=hs(e)).length;if(rn(e)){var s=un(e);i=s.length}if(n>=i)return e;var c=n-ln(r);if(c<1)return r;var l=s?ma(s,0,c).join(""):e.slice(0,c);if(o===a)return l+r;if(s&&(c+=l.length-c),ts(o)){if(e.slice(c).search(o)){var u,d=l;for(o.global||(o=Ie(o.source,hs(pe.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var p=u.index;l=l.slice(0,p===a?c:p)}}else if(e.indexOf(oa(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},Fn.unescape=function(e){return(e=hs(e))&&q.test(e)?e.replace(H,pn):e},Fn.uniqueId=function(e){var t=++We;return hs(e)+t},Fn.upperCase=Hs,Fn.upperFirst=zs,Fn.each=hi,Fn.eachRight=gi,Fn.first=jo,rc(Fn,(fc={},mr(Fn,(function(e,t){Oe.call(Fn.prototype,t)||(fc[t]=e)})),fc),{chain:!1}),Fn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),It(["drop","take"],(function(e,t){Un.prototype[e]=function(n){n=n===a?1:gn(us(n),0);var r=this.__filtered__&&!t?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ao(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(Xs)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=zr((function(e,t){return"function"==typeof e?new Un(this):this.map((function(n){return Ar(n,e,t)}))})),Un.prototype.reject=function(e){return this.filter(Ti(ao(e)))},Un.prototype.slice=function(e,t){e=us(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Un(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=us(t))<0?n.dropRight(-t):n.take(t-e)),n)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(f)},mr(Un.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Fn[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof Un,l=s[0],u=c||$i(t),d=function(e){var t=o.apply(Fn,Rt([e],s));return r&&p?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,h=i&&!p,g=c&&!f;if(!i&&u){t=g?t:new Un(this);var w=e.apply(t,s);return w.__actions__.push({func:li,args:[d],thisArg:a}),new $n(w,p)}return h&&g?e.apply(this,s):(w=this.thru(d),h?r?w.value()[0]:w.value():w)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply($i(a)?a:[],e)}return this[n]((function(n){return t.apply($i(n)?n:[],e)}))}})),mr(Un.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Oe.call(_n,r)||(_n[r]=[]),_n[r].push({name:t,func:n})}})),_n[Ba(a,2).name]=[{name:"wrapper",func:a}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=Ia(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ia(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ia(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$i(e),r=t<0,a=n?e.length:0,o=function(e,t,n){for(var r=-1,a=n.length;++r<a;){var o=n[r],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=wn(t,e+i);break;case"takeRight":e=gn(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=o.start,s=o.end,c=s-i,l=r?s:i-1,u=this.__iteratees__,d=u.length,p=0,f=wn(c,this.__takeCount__);if(!n||!r&&a==c&&f==c)return ua(e,this.__actions__);var h=[];e:for(;c--&&p<f;){for(var g=-1,w=e[l+=t];++g<d;){var m=u[g],y=m.iteratee,b=m.type,v=y(w);if(2==b)w=v;else if(!v){if(1==b)continue e;break e}}h[p++]=w}return h},Fn.prototype.at=ui,Fn.prototype.chain=function(){return ci(this)},Fn.prototype.commit=function(){return new $n(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===a&&(this.__values__=cs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Ln;){var r=Do(n);r.__index__=0,r.__values__=a,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:li,args:[Zo],thisArg:a}),new $n(t,this.__chain__)}return this.thru(Zo)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return ua(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Je&&(Fn.prototype[Je]=function(){return this}),Fn}();dt._=fn,(r=function(){return fn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},300:(e,t,n)=>{var r,a;e=n.nmd(e),function(t){t.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},t.runningInMainNodeJSModule=function(){return t.runningInNodeJS()&&n.c[n.s]===e},t.commonJSAvailable=function(){return"object"==typeof e.exports},t.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},t.runningInNodeChildProcess=function(){return t.runningInNodeJS()&&"function"==typeof process.send},t.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&"http:"!==document.location.protocol&&"https:"!==document.location.protocol},t.webWorkersAvailable=function(){return!("function"!=typeof Worker||t.runningInNullOrigin()||t.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},t.log=function(e,t){void 0===t&&(t=!1),"object"==typeof console&&(console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>"))},t.createErrorMessage=function(e,n){if(void 0===n&&(n="Unhandled exception"),null==e)return n;if(n+=": ","object"==typeof e.content){if(t.runningInNodeJS())return n+e.content.stack;var r=JSON.stringify(e.content);return"{}"!==r?n+r:n+e.content}return"string"==typeof e.content?n+e.content:n+e},t.printExceptionAndStackTraceToConsole=function(e,n){void 0===n&&(n="Unhandled exception"),t.log(t.createErrorMessage(e,n))},t.getGlobalObject=function(){return"object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:{}},t.toString=Object.prototype.toString,t.commonJSAvailable()&&(e.exports=t)}(a||(a={})),function(){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(e,t){var n=function(e,t,n){return e<t?t:e>n?n:e};e|=0,t|=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},t=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],n=void 0;if("object"==typeof window?n=window:"object"==typeof self&&(n=self),void 0!==n)for(var r=0;r<t.length;r++)n[t[r]]&&(n[t[r]].prototype.subarray=e)}}(r||(r={})),function(e){var t=function(){function t(){}return t.compressAsync=function(t,n,r){var a=new e.Timer,o=new e.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof t)t=e.encodeUTF8(t);else if(null==t||!(t instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var i=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],c=function(t){if(t<i.length){var l=void 0;try{l=o.compressBlock(i[t])}catch(e){return void r(void 0,e)}s.push(l),a.getElapsedTime()<=20?c(t+1):(e.enqueueImmediate((function(){return c(t+1)})),a.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeCompressedBytes(u,n.outputEncoding)}catch(e){return void r(void 0,e)}e.enqueueImmediate((function(){return r(t)}))}))}};e.enqueueImmediate((function(){return c(0)}))},t.createCompressionStream=function(){var t=new e.Compressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,a,o){var i;try{i=e.BufferTools.uint8ArrayToBuffer(t.compressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void r.emit("error",e)}r.push(i),o()},r},t}();e.AsyncCompressor=t}(a||(a={})),function(e){var t=function(){function t(){}return t.decompressAsync=function(t,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var a=new e.Timer;try{t=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding)}catch(e){return void r(void 0,e)}var o=new e.Decompressor,i=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],c=function(t){if(t<i.length){var l=void 0;try{l=o.decompressBlock(i[t])}catch(e){return void r(void 0,e)}s.push(l),a.getElapsedTime()<=20?c(t+1):(e.enqueueImmediate((function(){return c(t+1)})),a.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeDecompressedBytes(u,n.outputEncoding)}catch(e){return void r(void 0,e)}e.enqueueImmediate((function(){return r(t)}))}))}};e.enqueueImmediate((function(){return c(0)}))},t.createDecompressionStream=function(){var t=new e.Decompressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,a,o){var i;try{i=e.BufferTools.uint8ArrayToBuffer(t.decompressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void r.emit("error",e)}r.push(i),o()},r},t}();e.AsyncDecompressor=t}(a||(a={})),function(e){var t;!function(t){t.compressAsync=function(e,n,r){if("ByteArray"!=n.inputEncoding||e instanceof Uint8Array){var a={token:Math.random().toString(),type:"compress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},o=function(e){var n=e.data;n&&n.token==a.token&&(t.globalWorker.removeEventListener("message",o),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",o),t.globalWorker.postMessage(a,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},t.decompressAsync=function(e,n,r){var a={token:Math.random().toString(),type:"decompress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},o=function(e){var n=e.data;n&&n.token==a.token&&(t.globalWorker.removeEventListener("message",o),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",o),t.globalWorker.postMessage(a,[])},t.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",(function(t){var n=t.data;if("compress"==n.type){var r=void 0;try{r=e.compress(n.data,{outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(a={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(a,[a.data.buffer]):self.postMessage(a,[])}else if("decompress"==n.type){var a,o=void 0;try{o=e.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(a={token:n.token,type:"decompressionResult",data:o,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(a,[a.data.buffer]):self.postMessage(a,[])}})),self.addEventListener("error",(function(t){e.log(e.createErrorMessage(t.error,"Unexpected LZUTF8 WebWorker exception"))})))},t.createGlobalWorkerIfNeeded=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!t.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(t.scriptURI=n.getAttribute("src")||void 0)}return!!t.scriptURI&&(t.globalWorker=new Worker(t.scriptURI),!0)},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)}}(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()}(a||(a={})),function(e){var t=function(){function e(e,t,n){this.container=e,this.startPosition=t,this.length=n}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(a||(a={})),function(e){!function(e){e.copyElements=function(e,t,n,r,a){for(;a--;)n[r++]=e[t++]},e.zeroElements=function(e,t,n){for(;n--;)e[t++]=0},e.countNonzeroValuesInArray=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},e.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=e.length-t,r=0;r<t;r++)e[r]=e[n+r];e.length=t},e.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},e.concatUint8Arrays=function(e){for(var t=0,n=0,r=e;n<r.length;n++)t+=(c=r[n]).length;for(var a=new Uint8Array(t),o=0,i=0,s=e;i<s.length;i++){var c=s[i];a.set(c,o),o+=c.length}return a},e.splitByteArray=function(e,t){for(var n=[],r=0;r<e.length;){var a=Math.min(t,e.length-r);n.push(e.subarray(r,r+a)),r+=a}return n}}(e.ArrayTools||(e.ArrayTools={}))}(a||(a={})),function(e){!function(e){e.convertToUint8ArrayIfNeeded=function(t){return"function"==typeof Buffer&&Buffer.isBuffer(t)?e.bufferToUint8Array(t):t},e.uint8ArrayToBuffer=function(e){if(Buffer.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,Buffer.prototype),t}for(var n=e.length,r=new Buffer(n),a=0;a<n;a++)r[a]=e[a];return r},e.bufferToUint8Array=function(e){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e[r];return n}}(e.BufferTools||(e.BufferTools={}))}(a||(a={})),function(e){!function(t){t.getCroppedBuffer=function(e,t,n,r){void 0===r&&(r=0);var a=new Uint8Array(n+r);return a.set(e.subarray(t,t+n)),a},t.getCroppedAndAppendedByteArray=function(t,n,r,a){return e.ArrayTools.concatUint8Arrays([t.subarray(n,n+r),a])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,n){switch(n){case"ByteArray":return t;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(t);case"Base64":return e.encodeBase64(t);case"BinaryString":return e.encodeBinaryString(t);case"StorageBinaryString":return e.encodeStorageBinaryString(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedBytes=function(t,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=e.BufferTools.convertToUint8ArrayIfNeeded(t);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(t);case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(t);case"StorageBinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(t);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},t.encodeDecompressedBytes=function(t,n){switch(n){case"String":return e.decodeUTF8(t);case"ByteArray":return t;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(e.CompressionCommon||(e.CompressionCommon={}))}(a||(a={})),function(e){var t;!function(t){var n,r=[];t.enqueueImmediate=function(e){r.push(e),1===r.length&&n()},t.initializeScheduler=function(){var t=function(){for(var t=0,n=r;t<n.length;t++){var a=n[t];try{a.call(void 0)}catch(t){e.printExceptionAndStackTraceToConsole(t,"enqueueImmediate exception")}}r.length=0};if(e.runningInNodeJS())n=function(){return setImmediate((function(){return t()}))};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var a,o="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",(function(e){e.data===o&&t()})),a=e.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(o,a)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var i=new MessageChannel;i.port1.onmessage=function(){return t()},n=function(){return i.port2.postMessage(0)}}else n=function(){return setTimeout((function(){return t()}),0)}},t.initializeScheduler()}(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(a||(a={})),function(e){!function(e){e.override=function(t,n){return e.extend(t,n)},e.extend=function(e,t){if(null==e)throw new TypeError("obj is null or undefined");if("object"!=typeof e)throw new TypeError("obj is not an object");if(null==t&&(t={}),"object"!=typeof t)throw new TypeError("newProperties is not an object");if(null!=t)for(var n in t)e[n]=t[n];return e}}(e.ObjectTools||(e.ObjectTools={}))}(a||(a={})),function(e){e.getRandomIntegerInRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.getRandomUTF16StringOfLength=function(t){for(var n="",r=0;r<t;r++){var a=void 0;do{a=e.getRandomIntegerInRange(0,1114112)}while(a>=55296&&a<=57343);n+=e.Encoding.CodePoint.decodeToString(a)}return n}}(a||(a={})),function(e){var t=function(){function e(e){void 0===e&&(e=1024),this.outputBufferCapacity=e,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return e.prototype.appendCharCode=function(e){this.outputBuffer[this.outputPosition++]=e,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},e.prototype.appendCharCodes=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e[t])},e.prototype.appendString=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e.charCodeAt(t))},e.prototype.appendCodePoint=function(e){if(e<=65535)this.appendCharCode(e);else{if(!(e<=1114111))throw new Error("appendCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"));this.appendCharCode(55296+(e-65536>>>10)),this.appendCharCode(56320+(e-65536&1023))}},e.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(a||(a={})),function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),a="".concat(t,": ").concat(r.toFixed(3),"ms");return e.log(a,n),this.restart(),r},t.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},t.getMicrosecondTimestamp=function(){return Math.floor(1e3*t.getTimestamp())},t.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var e=0;this.timestampFunc=function(){var t=process.hrtime(),n=1e3*t[0]+t[1]/1e6;return e+n},e=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var t=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return t+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var r=Date.now()-performance.now();this.timestampFunc=function(){return r+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(a||(a={})),function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(null==t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.BufferTools.convertToUint8ArrayIfNeeded(t),this.compressUtf8Block(t)},t.prototype.compressUtf8Block=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var a=0,o=t;o<r;o++){var i=n[o],s=o<a;if(o>r-this.MinimumSequenceLength)s||this.outputRawByte(i);else{var c=this.getBucketIndexForPrefix(o);if(!s){var l=this.findLongestMatch(o,c);null!=l&&(this.outputPointerBytes(l.length,l.distance),a=o+l.length,s=!0)}s||this.outputRawByte(i);var u=this.inputBufferStreamOffset+o;this.prefixHashTable.addValueToBucket(c,u)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var n=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==n)return null;for(var r,a=this.inputBuffer,o=0,i=0;i<n.length;i++){var s,c=n.getInReversedOrder(i)-this.inputBufferStreamOffset,l=e-c;if(s=void 0===r?this.MinimumSequenceLength-1:r<128&&l>=128?o+(o>>>1):o,l>this.MaximumMatchDistance||s>=this.MaximumSequenceLength||e+s>=a.length)break;if(a[c+s]===a[e+s])for(var u=0;;u++){if(e+u===a.length||a[c+u]!==a[e+u]){u>s&&(r=l,o=u);break}if(u===this.MaximumSequenceLength)return{distance:l,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:o}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,t),this.inputBufferStreamOffset+=r,n},t}();e.Compressor=t}(a||(a={})),function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,n){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,a=this.bucketLocators[t];if(0===a)a=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[t+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(a,r,this.maximumBucketCapacity/2));var o=a+r;0===this.storage[o]?(this.storage[o]=n,o===this.storageIndex&&(this.storageIndex+=r)):(e.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,r),a=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[t]=a,this.bucketLocators[t+1]=r},t.prototype.truncateBucketToNewerElements=function(t,n,r){var a=t+n-r;return e.ArrayTools.copyElements(this.storage,a,this.storage,t,r),e.ArrayTools.zeroElements(this.storage,t+r,n-r),r},t.prototype.compact=function(){var t=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<t.length;r+=2){var a=t[r+1];0!==a&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=a,this.storageIndex+=Math.max(Math.min(2*a,this.maximumBucketCapacity),this.minimumBucketCapacity))}for(this.storage=new Uint32Array(8*this.storageIndex),r=0;r<t.length;r+=2){var o=t[r];if(0!==o){var i=this.bucketLocators[r],s=this.bucketLocators[r+1];e.ArrayTools.copyElements(n,o,this.storage,i,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,n){t<<=1;var r=this.bucketLocators[t];return 0===r?null:(void 0===n&&(n=new e.ArraySegment(this.storage,r,this.bucketLocators[t+1])),n)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(a||(a={})),function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,n){var r=this.buckets[t];void 0===r?this.buckets[t]=[n]:(r.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},t.prototype.getArraySegmentForBucketIndex=function(t,n){var r=this.buckets[t];return void 0===r?null:(void 0===n&&(n=new e.ArraySegment(r,0,r.length)),n)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(a||(a={})),function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.BufferTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){this.inputBufferRemainder&&(t=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),r=0,a=t.length;r<a;r++){var o=t[r];if(o>>>6==3){var i=o>>>5;if(r==a-1||r==a-2&&7==i){this.inputBufferRemainder=t.subarray(r);break}if(t[r+1]>>>7==1)this.outputByte(o);else{var s=31&o,c=void 0;6==i?(c=t[r+1],r+=1):(c=t[r+1]<<8|t[r+2],r+=2);for(var l=this.outputPosition-c,u=0;u<s;u++)this.outputByte(this.outputBuffer[l+u])}}else this.outputByte(o)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,t),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3==30||e<3&&t>>>4==14||e<2&&t>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(a||(a={})),function(e){!function(t){!function(t){var n=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]);t.encode=function(n){return n&&0!=n.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(n).toString("base64"):t.encodeWithJS(n):""},t.decode=function(n){return n?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(n,"base64")):t.decodeWithJS(n):new Uint8Array(0)},t.encodeWithJS=function(t,r){if(void 0===r&&(r=!0),!t||0==t.length)return"";for(var a,o=n,i=new e.StringBuilder,s=0,c=t.length;s<c;s+=3)s<=c-3?(a=t[s]<<16|t[s+1]<<8|t[s+2],i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),i.appendCharCode(o[a>>>6&63]),i.appendCharCode(o[63&a]),a=0):s===c-2?(a=t[s]<<16|t[s+1]<<8,i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),i.appendCharCode(o[a>>>6&63]),r&&i.appendCharCode(61)):s===c-1&&(a=t[s]<<16,i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),r&&(i.appendCharCode(61),i.appendCharCode(61)));return i.getOutputString()},t.decodeWithJS=function(e,t){if(!e||0==e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+="==":3===n&&(e+="="),t||(t=new Uint8Array(e.length));for(var a=0,o=e.length,i=0;i<o;i+=4){var s=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)];t[a++]=s>>>16&255,t[a++]=s>>>8&255,t[a++]=255&s}return 61==e.charCodeAt(o-1)&&a--,61==e.charCodeAt(o-2)&&a--,t.subarray(0,a)}}(t.Base64||(t.Base64={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(t){t.encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var n=t.length,r=new e.StringBuilder,a=0,o=1,i=0;i<n;i+=2){var s;s=i==n-1?t[i]<<8:t[i]<<8|t[i+1],r.appendCharCode(a<<16-o|s>>>o),a=s&(1<<o)-1,15===o?(r.appendCharCode(a),a=0,o=1):o+=1,i>=n-2&&r.appendCharCode(a<<16-o)}return r.appendCharCode(32768|n%2),r.getOutputString()},t.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t=new Uint8Array(3*e.length),n=0,r=function(e){t[n++]=e>>>8,t[n++]=255&e},a=0,o=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s>=32768?(32769==s&&n--,o=0):(0==o?a=s:(r(a<<o|s>>>15-o),a=s&(1<<15-o)-1),15==o?o=0:o+=1)}return t.subarray(0,n)}}(t.BinaryString||(t.BinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){e.encodeFromString=function(e,t){var n=e.charCodeAt(t);if(n<55296||n>56319)return n;var r=e.charCodeAt(t+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},e.decodeToString=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"))}}(e.CodePoint||(e.CodePoint={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){var t=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];e.encode=function(e){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n.join(" ")}}(e.DecimalString||(e.DecimalString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(t){t.encode=function(t){return e.BinaryString.encode(t).replace(/\0/g,"")},t.decode=function(t){return e.BinaryString.decode(t.replace(/\u8002/g,"\0"))}}(e.StorageBinaryString||(e.StorageBinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(n){var r,a;n.encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(t):n.encodeWithJS(t):new Uint8Array(0)},n.decode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?a.decode(t):n.decodeWithJS(t):""},n.encodeWithJS=function(e,n){if(!e||0==e.length)return new Uint8Array(0);n||(n=new Uint8Array(4*e.length));for(var r=0,a=0;a<e.length;a++){var o=t.CodePoint.encodeFromString(e,a);if(o<=127)n[r++]=o;else if(o<=2047)n[r++]=192|o>>>6,n[r++]=128|63&o;else if(o<=65535)n[r++]=224|o>>>12,n[r++]=128|o>>>6&63,n[r++]=128|63&o;else{if(!(o<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|o>>>18,n[r++]=128|o>>>12&63,n[r++]=128|o>>>6&63,n[r++]=128|63&o,a++}}return n.subarray(0,r)},n.decodeWithJS=function(t,n,r){if(void 0===n&&(n=0),!t||0==t.length)return"";void 0===r&&(r=t.length);for(var a,o,i=new e.StringBuilder,s=n,c=r;s<c;){if((o=t[s])>>>7==0)a=o,s+=1;else if(o>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(31&o)<<6|63&t[s+1],s+=2}else if(o>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(15&o)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3}else{if(o>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(7&o)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4}i.appendCodePoint(a)}return i.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),a=new TextDecoder("utf-8"),!0)}}(t.UTF8||(t.UTF8={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){e.compress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("compress: undefined or null input received");var r=e.CompressionCommon.detectCompressionSourceEncoding(t);n=e.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var a=(new e.Compressor).compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(a,n.outputEncoding)},e.decompress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("decompress: undefined or null input received");n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding),a=(new e.Decompressor).decompressBlock(r);return e.CompressionCommon.encodeDecompressedBytes(a,n.outputEncoding)},e.compressAsync=function(t,n,r){var a;null==r&&(r=function(){});try{a=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(e){return void r(void 0,e)}n=e.ObjectTools.override({inputEncoding:a,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),e.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(t,n,r):e.AsyncCompressor.compressAsync(t,n,r)}))},e.decompressAsync=function(t,n,r){if(null==r&&(r=function(){}),null!=t){n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var a=e.BufferTools.convertToUint8ArrayIfNeeded(t);e.EventLoop.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(a,n,r):e.AsyncDecompressor.decompressAsync(t,n,r)}))}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},e.createCompressionStream=function(){return e.AsyncCompressor.createCompressionStream()},e.createDecompressionStream=function(){return e.AsyncDecompressor.createDecompressionStream()},e.encodeUTF8=function(t){return e.Encoding.UTF8.encode(t)},e.decodeUTF8=function(t){return e.Encoding.UTF8.decode(t)},e.encodeBase64=function(t){return e.Encoding.Base64.encode(t)},e.decodeBase64=function(t){return e.Encoding.Base64.decode(t)},e.encodeBinaryString=function(t){return e.Encoding.BinaryString.encode(t)},e.decodeBinaryString=function(t){return e.Encoding.BinaryString.decode(t)},e.encodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.encode(t)},e.decodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.decode(t)}}(a||(a={}))},374:(e,t,n)=>{const{AbortError:r,codes:a}=n(141),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:s}=n(132),c=n(86),{ERR_INVALID_ARG_TYPE:l}=a;e.exports.addAbortSignal=function(t,n){if((e=>{if("object"!=typeof e||!("aborted"in e))throw new l("signal","AbortSignal",e)})(t),!o(n)&&!i(n))throw new l("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const n=o(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?n():(e.addEventListener("abort",n),c(t,(()=>e.removeEventListener("abort",n)))),t}},616:(e,t,n)=>{const{StringPrototypeSlice:r,SymbolIterator:a,TypedArrayPrototypeSet:o,Uint8Array:i}=n(191),{Buffer:s}=n(485),{inspect:c}=n(775);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)o(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[a](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,a=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++a,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++a}while(null!==(n=n.next));return this.length-=a,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,a=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(o(t,s,n-e),++a,r.next?this.head=r.next:this.head=this.tail=null):(o(t,new i(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}o(t,s,n-e),e-=s.length,++a}while(null!==(r=r.next));return this.length-=a,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},818:(e,t,n)=>{const{pipeline:r}=n(754),a=n(182),{destroyer:o}=n(230),{isNodeStream:i,isReadable:s,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:d,isReadableStream:p}=n(132),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:g}}=n(141),w=n(86);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return a.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=a.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=a.from(e[t])}for(let n=0;n<e.length;++n)if(i(e[n])||l(e[n])){if(n<e.length-1&&!(s(e[n])||p(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(c(e[n])||d(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be writable")}let n,m,y,b,v;const k=e[0],S=r(e,(function(e){const t=b;b=null,t?t(e):e?v.destroy(e):P||C||v.destroy()})),C=!!(c(k)||d(k)||u(k)),P=!!(s(S)||p(S)||u(S));if(v=new a({writableObjectMode:!(null==k||!k.writableObjectMode),readableObjectMode:!(null==S||!S.writableObjectMode),writable:C,readable:P}),C){if(i(k))v._write=function(e,t,r){k.write(e,t)?r():n=r},v._final=function(e){k.end(),m=e},k.on("drain",(function(){if(n){const e=n;n=null,e()}}));else if(l(k)){const e=(u(k)?k.writable:k).getWriter();v._write=async function(t,n,r){try{await e.ready,e.write(t).catch((()=>{})),r()}catch(e){r(e)}},v._final=async function(t){try{await e.ready,e.close().catch((()=>{})),m=t}catch(e){t(e)}}}const e=u(S)?S.readable:S;w(e,(()=>{if(m){const e=m;m=null,e()}}))}if(P)if(i(S))S.on("readable",(function(){if(y){const e=y;y=null,e()}})),S.on("end",(function(){v.push(null)})),v._read=function(){for(;;){const e=S.read();if(null===e)return void(y=v._read);if(!v.push(e))return}};else if(l(S)){const e=(u(S)?S.readable:S).getReader();v._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!v.push(t))return;if(n)return void v.push(null)}catch{return}}}return v._destroy=function(e,t){e||null===b||(e=new f),y=null,n=null,m=null,null===b?t(e):(b=t,i(S)&&o(S,e))},v}},230:(e,t,n)=>{const r=n(533),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=n(141),{Symbol:s}=n(191),{kDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:d}=n(132),p=s("kDestroy"),f=s("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function g(e,t,n){let a=!1;function o(t){if(a)return;a=!0;const o=e._readableState,i=e._writableState;h(t,i,o),i&&(i.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(w,e,t):r.nextTick(m,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function w(e,t){y(e,t),m(e)}function m(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function b(e,t,n){const a=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=a&&a.destroyed)return this;null!=a&&a.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),a&&!a.errored&&(a.errored=t),n?r.nextTick(y,e,t):y(e,t))}function v(e){let t=!1;function n(n){if(t)return void b(e,null!=n?n:new o);t=!0;const a=e._readableState,i=e._writableState,s=i||a;a&&(a.constructed=!0),i&&(i.constructed=!0),s.destroyed?e.emit(p,n):n?b(e,n,!0):r.nextTick(k,e)}try{e._construct((e=>{r.nextTick(n,e)}))}catch(e){r.nextTick(n,e)}}function k(e){e.emit(f)}function S(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function C(e){e.emit("close")}function P(e,t){e.emit("error",t),r.nextTick(C,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,a=e._writableState;n&&(n.constructed=!1),a&&(a.constructed=!1),e.once(f,t),e.listenerCount(f)>1||r.nextTick(v,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new i),d(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(P,e,t):r.nextTick(C,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,o=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),o.constructed?g(this,e,t):this.once(p,(function(n){g(this,a(n,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},182:(e,t,n)=>{const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:o,ObjectSetPrototypeOf:i}=n(191);e.exports=l;const s=n(858),c=n(373);i(l.prototype,s.prototype),i(l,s);{const e=o(c.prototype);for(let t=0;t<e.length;t++){const n=e[t];l.prototype[n]||(l.prototype[n]=c.prototype[n])}}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function p(){return void 0===u&&(u={}),u}r(l.prototype,{writable:{__proto__:null,...a(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(c.prototype,"writableLength")},writableFinished:{__proto__:null,...a(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return p().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return p().newReadableWritablePairFromDuplex(e)},l.from=function(e){return d||(d=n(749)),d(e,"body")}},749:(e,t,n)=>{const r=n(533),a=n(485),{isReadable:o,isWritable:i,isIterable:s,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:d}=n(132),p=n(86),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:g}}=n(141),{destroyer:w}=n(230),m=n(182),y=n(858),{createDeferredPromise:b}=n(775),v=n(913),k=globalThis.Blob||a.Blob,S=void 0!==k?function(e){return e instanceof k}:function(e){return!1},C=globalThis.AbortController||n(876).AbortController,{FunctionPrototypeCall:P}=n(191);class I extends m{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function x(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,n=e.writable;let r,a,s,c,l,u=!!o(t),d=!!i(n);function h(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new I({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(p(n,(e=>{d=!1,e&&w(t,e),h(e)})),l._write=function(e,t,a){n.write(e,t)?a():r=a},l._final=function(e){n.end(),a=e},n.on("drain",(function(){if(r){const e=r;r=null,e()}})),n.on("finish",(function(){if(a){const e=a;a=null,e()}}))),u&&(p(t,(e=>{u=!1,e&&w(t,e),h(e)})),t.on("readable",(function(){if(s){const e=s;s=null,e()}})),t.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const e=t.read();if(null===e)return void(s=l._read);if(!l.push(e))return}}),l._destroy=function(e,o){e||null===c||(e=new f),s=null,r=null,a=null,null===c?o(e):(c=o,w(n,e),w(t,e))},l}e.exports=function e(t,n){if(d(t))return t;if(l(t))return x({readable:t});if(u(t))return x({writable:t});if(c(t))return x({writable:!1,readable:!1});if("function"==typeof t){const{value:e,write:a,final:o,destroy:i}=function(e){let{promise:t,resolve:n}=b();const a=new C,o=a.signal,i=e(async function*(){for(;;){const e=t;t=null;const{chunk:a,done:i,cb:s}=await e;if(r.nextTick(s),i)return;if(o.aborted)throw new f(void 0,{cause:o.reason});({promise:t,resolve:n}=b()),yield a}}(),{signal:o});return{value:i,write(e,t,r){const a=n;n=null,a({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){a.abort(),t(e)}}}(t);if(s(e))return v(I,e,{objectMode:!0,write:a,final:o,destroy:i});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const n=P(c,e,(e=>{if(null!=e)throw new g("nully","body",e)}),(e=>{w(t,e)}));return t=new I({objectMode:!0,readable:!1,write:a,final(e){o((async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}}))},destroy:i})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,e)}if(S(t))return e(t.arrayBuffer());if(s(t))return v(I,t,{objectMode:!0,writable:!1});if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return x({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});const a=null==t?void 0:t.then;if("function"==typeof a){let e;return P(a,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{w(e,t)})),e=new I({objectMode:!0,writable:!1,read(){}})}throw new h(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},86:(e,t,n)=>{const r=n(533),{AbortError:a,codes:o}=n(141),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:c,once:l}=n(775),{validateAbortSignal:u,validateFunction:d,validateObject:p,validateBoolean:f}=n(904),{Promise:h,PromisePrototypeThen:g}=n(191),{isClosed:w,isReadable:m,isReadableNodeStream:y,isReadableStream:b,isReadableFinished:v,isReadableErrored:k,isWritable:S,isWritableNodeStream:C,isWritableStream:P,isWritableFinished:I,isWritableErrored:x,isNodeStream:A,willEmitClose:_,kIsClosedPromise:E}=n(132),M=()=>{};function T(e,t,n){var o,f;if(2===arguments.length?(n=t,t=c):null==t?t=c:p(t,"options"),d(n,"callback"),u(t.signal,"options.signal"),n=l(n),b(e)||P(e))return function(e,t,n){let o=!1,i=M;if(t.signal)if(i=()=>{o=!0,n.call(e,new a(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(i);else{const r=n;n=l(((...n)=>{t.signal.removeEventListener("abort",i),r.apply(e,n)})),t.signal.addEventListener("abort",i)}const s=(...t)=>{o||r.nextTick((()=>n.apply(e,t)))};return g(e[E].promise,s,s),M}(e,t,n);if(!A(e))throw new i("stream",["ReadableStream","WritableStream","Stream"],e);const h=null!==(o=t.readable)&&void 0!==o?o:y(e),T=null!==(f=t.writable)&&void 0!==f?f:C(e),R=e._writableState,O=e._readableState,W=()=>{e.writable||F()};let D=_(e)&&y(e)===h&&C(e)===T,B=I(e,!1);const F=()=>{B=!0,e.destroyed&&(D=!1),(!D||e.readable&&!h)&&(h&&!N||n.call(e))};let N=v(e,!1);const L=()=>{N=!0,e.destroyed&&(D=!1),(!D||e.writable&&!T)&&(T&&!B||n.call(e))},$=t=>{n.call(e,t)};let U=w(e);const j=()=>{U=!0;const t=x(e)||k(e);return t&&"boolean"!=typeof t?n.call(e,t):h&&!N&&y(e,!0)&&!v(e,!1)?n.call(e,new s):!T||B||I(e,!1)?void n.call(e):n.call(e,new s)},V=()=>{U=!0;const t=x(e)||k(e);if(t&&"boolean"!=typeof t)return n.call(e,t);n.call(e)},G=()=>{e.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?T&&!R&&(e.on("end",W),e.on("close",W)):(e.on("complete",F),D||e.on("abort",j),e.req?G():e.on("request",G)),D||"boolean"!=typeof e.aborted||e.on("aborted",j),e.on("end",L),e.on("finish",F),!1!==t.error&&e.on("error",$),e.on("close",j),U?r.nextTick(j):null!=R&&R.errorEmitted||null!=O&&O.errorEmitted?D||r.nextTick(V):(h||D&&!m(e)||!B&&!1!==S(e))&&(T||D&&!S(e)||!N&&!1!==m(e))?O&&e.req&&e.aborted&&r.nextTick(V):r.nextTick(V);const H=()=>{n=M,e.removeListener("aborted",j),e.removeListener("complete",F),e.removeListener("abort",j),e.removeListener("request",G),e.req&&e.req.removeListener("finish",F),e.removeListener("end",W),e.removeListener("close",W),e.removeListener("finish",F),e.removeListener("end",L),e.removeListener("error",$),e.removeListener("close",j)};if(t.signal&&!U){const o=()=>{const r=n;H(),r.call(e,new a(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(o);else{const r=n;n=l(((...n)=>{t.signal.removeEventListener("abort",o),r.apply(e,n)})),t.signal.addEventListener("abort",o)}}return H}e.exports=T,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=c),null!==(n=t)&&void 0!==n&&n.cleanup&&(f(t.cleanup,"cleanup"),r=t.cleanup),new h(((n,a)=>{const o=T(e,t,(e=>{r&&o(),e?a(e):n()}))}))}},913:(e,t,n)=>{const r=n(533),{PromisePrototypeThen:a,SymbolAsyncIterator:o,SymbolIterator:i}=n(191),{Buffer:s}=n(485),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=n(141).codes;e.exports=function(e,t,n){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else{if(!t||!t[i])throw new c("iterable",["Iterable"],t);d=!1,u=t[i]()}const p=new e({objectMode:!0,highWaterMark:1,...n});let f=!1;return p._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)p.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(p.push(t))continue;f=!1}}catch(e){p.destroy(e)}break}}())},p._destroy=function(e,t){a(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),(()=>r.nextTick(t,e)),(n=>r.nextTick(t,n||e)))},p}},200:(e,t,n)=>{const{ArrayIsArray:r,ObjectSetPrototypeOf:a}=n(191),{EventEmitter:o}=n(465);function i(e){o.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}a(i.prototype,o.prototype),a(i,o),i.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",c),n.on("close",l));let i=!1;function c(){i||(i=!0,e.end())}function l(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",c),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return s(n,"error",u),s(e,"error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:i,prependListener:s}},554:(e,t,n)=>{const r=globalThis.AbortController||n(876).AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:s},AbortError:c}=n(141),{validateAbortSignal:l,validateInteger:u,validateObject:d}=n(904),p=n(191).Symbol("kWeak"),{finished:f}=n(86),h=n(818),{addAbortSignalNoValidate:g}=n(374),{isWritable:w,isNodeStream:m}=n(132),{ArrayPrototypePush:y,MathFloor:b,Number:v,NumberIsNaN:k,Promise:S,PromiseReject:C,PromisePrototypeThen:P,Symbol:I}=n(191),x=I("kEmpty"),A=I("kEof");function _(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let n=1;return null!=(null==t?void 0:t.concurrency)&&(n=b(t.concurrency)),u(n,"concurrency",1),async function*(){var a,o;const i=new r,s=this,l=[],u=i.signal,d={signal:u},p=()=>i.abort();let f,h;null!=t&&null!==(a=t.signal)&&void 0!==a&&a.aborted&&p(),null==t||null===(o=t.signal)||void 0===o||o.addEventListener("abort",p);let g=!1;function w(){g=!0}!async function(){try{for await(let t of s){var r;if(g)return;if(u.aborted)throw new c;try{t=e(t,d)}catch(e){t=C(e)}t!==x&&("function"==typeof(null===(r=t)||void 0===r?void 0:r.catch)&&t.catch(w),l.push(t),f&&(f(),f=null),!g&&l.length&&l.length>=n&&await new S((e=>{h=e})))}l.push(A)}catch(e){const t=C(e);P(t,void 0,w),l.push(t)}finally{var a;g=!0,f&&(f(),f=null),null==t||null===(a=t.signal)||void 0===a||a.removeEventListener("abort",p)}}();try{for(;;){for(;l.length>0;){const e=await l[0];if(e===A)return;if(u.aborted)throw new c;e!==x&&(yield e),l.shift(),h&&(h(),h=null)}await new S((e=>{f=e}))}}finally{i.abort(),g=!0,h&&(h(),h=null)}}.call(this)}async function E(e,t=void 0){for await(const n of M.call(this,e,t))return!0;return!1}function M(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return _.call(this,(async function(t,n){return await e(t,n)?t:x}),t)}class T extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function R(e){if(e=v(e),k(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c({cause:e.signal.reason});yield[t++,r]}}.call(this)},drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=R(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;e--<=0&&(yield n)}}.call(this)},filter:M,flatMap:function(e,t){const n=_.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:_,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=R(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;if(!(e-- >0))return;yield n}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),m(e)&&!w(e))throw new a("stream",e,"must be writable");const n=h(this,e);return null!=t&&t.signal&&g(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await E.call(this,(async(...t)=>!await e(...t)),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const n of _.call(this,(async function(t,n){return await e(t,n),x}),t));},reduce:async function(e,t,n){var a;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let i=arguments.length>1;if(null!=n&&null!==(a=n.signal)&&void 0!==a&&a.aborted){const e=new c(void 0,{cause:n.signal.reason});throw this.once("error",(()=>{})),await f(this.destroy(e)),e}const s=new r,u=s.signal;if(null!=n&&n.signal){const e={once:!0,[p]:this};n.signal.addEventListener("abort",(()=>s.abort()),e)}let h=!1;try{for await(const r of this){var g;if(h=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new c;i?t=await e(t,r,{signal:u}):(t=r,i=!0)}if(!h&&!i)throw new T}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c(void 0,{cause:e.signal.reason});y(t,r)}return t},some:E,find:async function(e,t){for await(const n of M.call(this,e,t))return n}}},467:(e,t,n)=>{const{ObjectSetPrototypeOf:r}=n(191);e.exports=o;const a=n(210);function o(e){if(!(this instanceof o))return new o(e);a.call(this,e)}r(o.prototype,a.prototype),r(o,a),o.prototype._transform=function(e,t,n){n(null,e)}},754:(e,t,n)=>{const r=n(533),{ArrayIsArray:a,Promise:o,SymbolAsyncIterator:i}=n(191),s=n(86),{once:c}=n(775),l=n(230),u=n(182),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:m}=n(141),{validateFunction:y,validateAbortSignal:b}=n(904),{isIterable:v,isReadable:k,isReadableNodeStream:S,isNodeStream:C,isTransformStream:P,isWebStream:I,isReadableStream:x,isReadableEnded:A}=n(132),_=globalThis.AbortController||n(876).AbortController;let E,M;function T(e,t,n){let r=!1;return e.on("close",(()=>{r=!0})),{destroy:t=>{r||(r=!0,l.destroyer(e,t||new g("pipe")))},cleanup:s(e,{readable:t,writable:n},(e=>{r=!e}))}}function R(e){if(v(e))return e;if(S(e))return async function*(e){M||(M=n(858)),yield*M.prototype[i].call(e)}(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function O(e,t,n,{end:r}){let a,i=null;const c=e=>{if(e&&(a=e),i){const e=i;i=null,e()}},l=()=>new o(((e,t)=>{a?t(a):i=()=>{a?t(a):e()}}));t.on("drain",c);const u=s(t,{readable:!1},c);try{t.writableNeedDrain&&await l();for await(const n of e)t.write(n)||await l();r&&t.end(),await l(),n()}catch(e){n(a!==e?d(a,e):e)}finally{u(),t.off("drain",c)}}async function W(e,t,n,{end:r}){P(t)&&(t=t.writable);const a=t.getWriter();try{for await(const t of e)await a.ready,a.write(t).catch((()=>{}));await a.ready,r&&await a.close(),n()}catch(e){try{await a.abort(e),n(e)}catch(e){n(e)}}}function D(e,t,o){if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new h("streams");const i=new _,s=i.signal,c=null==o?void 0:o.signal,l=[];function d(){F(new m)}let g,w;b(c,"options.signal"),null==c||c.addEventListener("abort",d);const y=[];let A,M=0;function D(e){F(e,0==--M)}function F(e,n){if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||n){for(;y.length;)y.shift()(g);null==c||c.removeEventListener("abort",d),i.abort(),n&&(g||l.forEach((e=>e())),r.nextTick(t,g,w))}}for(let $=0;$<e.length;$++){const U=e[$],j=$<e.length-1,V=$>0,G=j||!1!==(null==o?void 0:o.end),H=$===e.length-1;if(C(U)){if(G){const{destroy:q,cleanup:K}=T(U,j,V);y.push(q),k(U)&&H&&l.push(K)}function z(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&D(e)}U.on("error",z),k(U)&&H&&l.push((()=>{U.removeListener("error",z)}))}if(0===$)if("function"==typeof U){if(A=U({signal:s}),!v(A))throw new f("Iterable, AsyncIterable or Stream","source",A)}else A=v(U)||S(U)||P(U)?U:u.from(U);else if("function"==typeof U){var N;if(A=P(A)?R(null===(N=A)||void 0===N?void 0:N.readable):R(A),A=U(A,{signal:s}),j){if(!v(A,!0))throw new f("AsyncIterable",`transform[${$-1}]`,A)}else{var L;E||(E=n(467));const J=new E({objectMode:!0}),Z=null===(L=A)||void 0===L?void 0:L.then;if("function"==typeof Z)M++,Z.call(A,(e=>{w=e,null!=e&&J.write(e),G&&J.end(),r.nextTick(D)}),(e=>{J.destroy(e),r.nextTick(D,e)}));else if(v(A,!0))M++,O(A,J,D,{end:G});else{if(!x(A)&&!P(A))throw new f("AsyncIterable or Promise","destination",A);{const X=A.readable||A;M++,O(X,J,D,{end:G})}}A=J;const{destroy:Y,cleanup:Q}=T(A,!1,!0);y.push(Y),H&&l.push(Q)}}else if(C(U)){if(S(A)){M+=2;const ee=B(A,U,D,{end:G});k(U)&&H&&l.push(ee)}else if(P(A)||x(A)){const te=A.readable||A;M++,O(te,U,D,{end:G})}else{if(!v(A))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],A);M++,O(A,U,D,{end:G})}A=U}else if(I(U)){if(S(A))M++,W(R(A),U,D,{end:G});else if(x(A)||v(A))M++,W(A,U,D,{end:G});else{if(!P(A))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],A);M++,W(A.readable,U,D,{end:G})}A=U}else A=u.from(U)}return(null!=s&&s.aborted||null!=c&&c.aborted)&&r.nextTick(d),A}function B(e,t,n,{end:a}){let o=!1;if(t.on("close",(()=>{o||n(new w)})),e.pipe(t,{end:!1}),a){function i(){o=!0,t.end()}A(e)?r.nextTick(i):e.once("end",i)}else n();return s(e,{readable:!0,writable:!1},(t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)})),s(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:D,pipeline:function(...e){return D(e,c(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},858:(e,t,n)=>{const r=n(533),{ArrayPrototypeIndexOf:a,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:s,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:d,SafeSet:p,SymbolAsyncIterator:f,Symbol:h}=n(191);e.exports=L,L.ReadableState=N;const{EventEmitter:g}=n(465),{Stream:w,prependListener:m}=n(200),{Buffer:y}=n(485),{addAbortSignal:b}=n(374),v=n(86);let k=n(775).debuglog("stream",(e=>{k=e}));const S=n(616),C=n(230),{getHighWaterMark:P,getDefaultHighWaterMark:I}=n(498),{aggregateTwoErrors:x,codes:{ERR_INVALID_ARG_TYPE:A,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:T}}=n(141),{validateObject:R}=n(904),O=h("kPaused"),{StringDecoder:W}=n(464),D=n(913);u(L.prototype,w.prototype),u(L,w);const B=()=>{},{errorOrDestroy:F}=C;function N(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(182)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?P(this,e,"readableHighWaterMark",r):I(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new W(e.encoding),this.encoding=e.encoding)}function L(e){if(!(this instanceof L))return new L(e);const t=this instanceof n(182);this._readableState=new N(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&b(e.signal,this)),w.call(this,e),C.construct(this,(()=>{this._readableState.needReadable&&H(this,this._readableState)}))}function $(e,t,n,r){k("readableAddChunk",t);const a=e._readableState;let o;if(a.objectMode||("string"==typeof t?(n=n||a.defaultEncoding,a.encoding!==n&&(r&&a.encoding?t=y.from(t,n).toString(a.encoding):(t=y.from(t,n),n=""))):t instanceof y?n="":w._isUint8Array(t)?(t=w._uint8ArrayToBuffer(t),n=""):null!=t&&(o=new A("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)a.reading=!1,function(e,t){if(k("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?V(e):(t.needReadable=!1,t.emittedReadable=!0,G(e))}}(e,a);else if(a.objectMode||t&&t.length>0)if(r)if(a.endEmitted)F(e,new T);else{if(a.destroyed||a.errored)return!1;U(e,a,t,!0)}else if(a.ended)F(e,new M);else{if(a.destroyed||a.errored)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?U(e,a,t,!1):H(e,a)):U(e,a,t,!1)}else r||(a.reading=!1,H(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function U(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&V(e)),H(e,t)}function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:i(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function V(e){const t=e._readableState;k("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(G,e))}function G(e){const t=e._readableState;k("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Z(e)}function H(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(z,e,t))}function z(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(k("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function q(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[O]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function K(e){k("readable nexttick read 0"),e.read(0)}function J(e,t){k("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Z(e),t.flowing&&!t.reading&&e.read(0)}function Z(e){const t=e._readableState;for(k("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){"function"!=typeof e.read&&(e=L.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=B;function a(t){this===e?(r(),r=B):r=t}e.on("readable",a);const o=v(e,{writable:!1},(e=>{n=e?x(n,e):null,r(),r=B}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(a)}}}catch(e){throw n=x(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",a),o()):C.destroyer(e,null)}}(e,t);return n.stream=e,n}function Q(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function X(e){const t=e._readableState;k("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ee,t,e))}function ee(e,t){if(k("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ne;function re(){return void 0===ne&&(ne={}),ne}L.prototype.destroy=C.destroy,L.prototype._undestroy=C.undestroy,L.prototype._destroy=function(e,t){t(e)},L.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},L.prototype.push=function(e,t){return $(this,e,t,!1)},L.prototype.unshift=function(e,t){return $(this,e,t,!0)},L.prototype.isPaused=function(){const e=this._readableState;return!0===e[O]||!1===e.flowing},L.prototype.setEncoding=function(e){const t=new W(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this},L.prototype.read=function(e){k("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new E("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?X(this):V(this),null;if(0===(e=j(e,t))&&t.ended)return 0===t.length&&X(this),null;let r,a=t.needReadable;if(k("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,k("length less than watermark",a)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)a=!1,k("reading, ended or constructing",a);else if(a){k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(e){F(this,e)}t.sync=!1,t.reading||(e=j(n,t))}return r=e>0?Q(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&X(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},L.prototype._read=function(e){throw new _("_read()")},L.prototype.pipe=function(e,t){const n=this,a=this._readableState;1===a.pipes.length&&(a.multiAwaitDrain||(a.multiAwaitDrain=!0,a.awaitDrainWriters=new p(a.awaitDrainWriters?[a.awaitDrainWriters]:[]))),a.pipes.push(e),k("pipe count=%d opts=%j",a.pipes.length,t);const o=t&&!1===t.end||e===r.stdout||e===r.stderr?g:i;function i(){k("onend"),e.end()}let s;a.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",(function t(r,o){k("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,k("cleanup"),e.removeListener("close",f),e.removeListener("finish",h),s&&e.removeListener("drain",s),e.removeListener("error",d),e.removeListener("unpipe",t),n.removeListener("end",i),n.removeListener("end",g),n.removeListener("data",u),c=!0,s&&a.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&s())}));let c=!1;function l(){c||(1===a.pipes.length&&a.pipes[0]===e?(k("false write response, pause",0),a.awaitDrainWriters=e,a.multiAwaitDrain=!1):a.pipes.length>1&&a.pipes.includes(e)&&(k("false write response, pause",a.awaitDrainWriters.size),a.awaitDrainWriters.add(e)),n.pause()),s||(s=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(k("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(k("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",s))}function u(t){k("ondata");const n=e.write(t);k("dest.write",n),!1===n&&l()}function d(t){if(k("onerror",t),g(),e.removeListener("error",d),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?F(e,t):e.emit("error",t)}}function f(){e.removeListener("finish",h),g()}function h(){k("onfinish"),e.removeListener("close",f),g()}function g(){k("unpipe"),n.unpipe(e)}return n.on("data",u),m(e,"error",d),e.once("close",f),e.once("finish",h),e.emit("pipe",n),!0===e.writableNeedDrain?a.flowing&&l():a.flowing||(k("pipe resume"),n.resume()),e},L.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=a(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},L.prototype.on=function(e,t){const n=w.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,k("on readable",a.length,a.reading),a.length?V(this):a.reading||r.nextTick(K,this))),n},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(e,t){const n=w.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(q,this),n},L.prototype.off=L.prototype.removeListener,L.prototype.removeAllListeners=function(e){const t=w.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(q,this),t},L.prototype.resume=function(){const e=this._readableState;return e.flowing||(k("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(J,e,t))}(this,e)),e[O]=!1,this},L.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},L.prototype.wrap=function(e){let t=!1;e.on("data",(n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{F(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=l(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},L.prototype[f]=function(){return Y(this)},L.prototype.iterator=function(e){return void 0!==e&&R(e,"options"),Y(this,e)},c(L.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(N.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(e){this[O]=!!e}}}),L._fromList=Q,L.from=function(e,t){return D(L,e,t)},L.fromWeb=function(e,t){return re().newStreamReadableFromReadableStream(e,t)},L.toWeb=function(e,t){return re().newReadableStreamFromStreamReadable(e,t)},L.wrap=function(e,t){var n,r;return new L({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){C.destroyer(e,t),n(t)}}).wrap(e)}},498:(e,t,n)=>{const{MathFloor:r,NumberIsInteger:a}=n(191),{ERR_INVALID_ARG_VALUE:o}=n(141).codes;function i(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,n,s){const c=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=c){if(!a(c)||c<0)throw new o(s?`options.${n}`:"options.highWaterMark",c);return r(c)}return i(e.objectMode)},getDefaultHighWaterMark:i}},210:(e,t,n)=>{const{ObjectSetPrototypeOf:r,Symbol:a}=n(191);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:o}=n(141).codes,i=n(182),{getHighWaterMark:s}=n(498);r(l.prototype,i.prototype),r(l,i);const c=a("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),i.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())}))}function d(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,n){throw new o("_transform()")},l.prototype._write=function(e,t,n){const r=this._readableState,a=this._writableState,o=r.length;this._transform(e,t,((e,t)=>{e?n(e):(null!=t&&this.push(t),a.ended||o===r.length||r.length<r.highWaterMark?n():this[c]=n)}))},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},132:(e,t,n)=>{const{Symbol:r,SymbolAsyncIterator:a,SymbolIterator:o,SymbolFor:i}=n(191),s=r("kDestroyed"),c=r("kIsErrored"),l=r("kIsReadable"),u=r("kIsDisturbed"),d=i("nodejs.webstream.isClosedPromise"),p=i("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function w(e){return!(!e||g(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function m(e){return!(!e||g(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||g(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!g(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!=r&&r.destroyed)}function v(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function k(e,t){if(!f(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function S(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&f(e)&&e.readable&&!k(e)}function C(e){return"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&h(e)&&e.writable&&!v(e)}function P(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&P(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,n,r,a,o,i,s,l,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(a=null!==(o=null!==(i=e[c])&&void 0!==i?i:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==a?a:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:c,isReadable:S,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:p,isClosed:function(e){if(!g(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&P(e)?e._closed:null},isDestroyed:b,isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return g(e)?!(!b(e)&&(!1!==(null==t?void 0:t.readable)&&S(e)||!1!==(null==t?void 0:t.writable)&&C(e))):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[a]:!1===t?"function"==typeof e[o]:"function"==typeof e[a]||"function"==typeof e[o])},isReadableNodeStream:f,isReadableStream:w,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:k,isReadableErrored:function(e){var t,n;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return w(e)||m(e)||y(e)},isWritable:C,isWritableNodeStream:h,isWritableStream:m,isWritableEnded:v,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&I(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:y}},373:(e,t,n)=>{const r=n(533),{ArrayPrototypeSlice:a,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:s,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:p}=n(191);e.exports=W,W.WritableState=R;const{EventEmitter:f}=n(465),h=n(200).Stream,{Buffer:g}=n(485),w=n(230),{addAbortSignal:m}=n(374),{getHighWaterMark:y,getDefaultHighWaterMark:b}=n(498),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:x,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:_}=n(141).codes,{errorOrDestroy:E}=w;function M(){}l(W.prototype,h.prototype),l(W,h);const T=d("kOnFinished");function R(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(182)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const a=!(!e||!1!==e.decodeStrings);this.decodeStrings=!a,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=N.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[T]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function W(e){const t=this instanceof n(182);if(!t&&!i(W,this))return new W(e);this._writableState=new R(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&m(e.signal,this)),h.call(this,e),w.construct(this,(()=>{const e=this._writableState;e.writing||j(this,e),G(this,e)}))}function D(e,t,n,a){const o=e._writableState;if("function"==typeof n)a=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new _(n)}else n=o.defaultEncoding;"function"!=typeof a&&(a=M)}if(null===t)throw new x;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=g.from(t,n),n="buffer");else if(t instanceof g)n="buffer";else{if(!h._isUint8Array(t))throw new v("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let i;return o.ending?i=new A:o.destroyed&&(i=new P("write")),i?(r.nextTick(a,i),E(e,i,!0),i):(o.pendingcb++,function(e,t,n,r,a){const o=t.objectMode?1:n.length;t.length+=o;const i=t.length<t.highWaterMark;return i||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:a}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&a!==M&&(t.allNoop=!1)):(t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),i&&!t.errored&&!t.destroyed}(e,o,t,n,a))}function B(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new P("write")):n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function F(e,t,n,r){--t.pendingcb,r(n),U(t),E(e,n)}function N(e,t){const n=e._writableState,a=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),a?r.nextTick(F,e,n,t,o):F(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&j(e,n),a?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(L,n.afterWriteTickInfo)):$(e,n,1,o))):E(e,new S)}function L({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,$(e,t,n,r)}function $(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&U(t),G(e,t)}function U(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:a}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,a(null!==(t=e.errored)&&void 0!==t?t:new P("write"))}const n=e[T].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new P("end"))}O(e)}function j(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:o}=t,i=n.length-r;if(!i)return;let s=r;if(t.bufferProcessing=!0,i>1&&e._writev){t.pendingcb-=i-1;const r=t.allNoop?M:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},o=t.allNoop&&0===s?n:a(n,s);o.allBuffers=t.allBuffers,B(e,t,!0,t.length,o,"",r),O(t)}else{do{const{chunk:r,encoding:a,callback:i}=n[s];n[s++]=null,B(e,t,!1,o?1:r.length,r,a,i)}while(s<n.length&&!t.writing);s===n.length?O(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function G(e,t,n){V(t)&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function a(a){if(n)E(e,null!=a?a:S());else if(n=!0,t.pendingcb--,a){const n=t[T].splice(0);for(let e=0;e<n.length;e++)n[e](a);E(e,a,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(H,e,t))}t.sync=!0,t.pendingcb++;try{e._final(a)}catch(e){a(e)}t.sync=!1}(e,t)))}(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick(((e,t)=>{V(t)?H(e,t):t.pendingcb--}),e,t)):V(t)&&(t.pendingcb++,H(e,t))))}function H(e,t){t.pendingcb--,t.finished=!0;const n=t[T].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}R.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},s(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(W,p,{__proto__:null,value:function(e){return!!i(this,e)||this===W&&e&&e._writableState instanceof R}}),W.prototype.pipe=function(){E(this,new C)},W.prototype.write=function(e,t,n){return!0===D(this,e,t,n)},W.prototype.cork=function(){this._writableState.corked++},W.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||j(this,e))},W.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!g.isEncoding(e))throw new _(e);return this._writableState.defaultEncoding=e,this},W.prototype._write=function(e,t,n){if(!this._writev)throw new k("_write()");this._writev([{chunk:e,encoding:t}],n)},W.prototype._writev=null,W.prototype.end=function(e,t,n){const a=this._writableState;let i;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=D(this,e,t);n instanceof o&&(i=n)}return a.corked&&(a.corked=1,this.uncork()),i||(a.errored||a.ending?a.finished?i=new I("end"):a.destroyed&&(i=new P("end")):(a.ending=!0,G(this,a,!0),a.ended=!0)),"function"==typeof n&&(i||a.finished?r.nextTick(n,i):a[T].push(n)),this},c(W.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const z=w.destroy;let q;function K(){return void 0===q&&(q={}),q}W.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[T].length)&&r.nextTick(U,n),z.call(this,e,t),this},W.prototype._undestroy=w.undestroy,W.prototype._destroy=function(e,t){t(e)},W.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},W.fromWeb=function(e,t){return K().newStreamWritableFromWritableStream(e,t)},W.toWeb=function(e){return K().newWritableStreamFromStreamWritable(e)}},904:(e,t,n)=>{const{ArrayIsArray:r,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:s,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:p,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:g,StringPrototypeTrim:w}=n(191),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:S}}=n(141),{normalizeEncoding:C}=n(775),{isAsyncFunction:P,isArrayBufferView:I}=n(775).types,x={},A=/^[0-7]+$/,_=m(((e,t,n=u,r=l)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new k(t,"an integer",e);if(e<n||e>r)throw new k(t,`>= ${n} && <= ${r}`,e)})),E=m(((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new k(t,"an integer",e);if(e<n||e>r)throw new k(t,`>= ${n} && <= ${r}`,e)})),M=m(((e,t,n=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new k(t,"an integer",e);const r=n?1:0,a=4294967295;if(e<r||e>a)throw new k(t,`>= ${r} && <= ${a}`,e)}));function T(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const R=m(((e,t,n)=>{if(!a(n,e)){const r=o(i(n,(e=>"string"==typeof e?`'${e}'`:h(e))),", ");throw new v(t,e,"must be one of: "+r)}}));function O(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function W(e,t,n){return null!=e&&p(e,t)?e[t]:n}const D=m(((e,t,n=null)=>{const a=W(n,"allowArray",!1),o=W(n,"allowFunction",!1);if(!W(n,"nullable",!1)&&null===e||!a&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)})),B=m(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)})),F=m(((e,t,n=0)=>{if(!r(e))throw new b(t,"Array",e);if(e.length<n)throw new v(t,e,`must be longer than ${n}`)})),N=m(((e,t="buffer")=>{if(!I(e))throw new b(t,["Buffer","TypedArray","DataView"],e)})),L=m(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)})),$=m(((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)})),U=m(((e,t)=>{if("function"!=typeof e||P(e))throw new b(t,"Function",e)})),j=m(((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)})),V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function G(e,t){if(void 0===e||!f(V,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===f(A,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return M(e,t),e},validateArray:F,validateStringArray:function(e,t){F(e,t);for(let n=0;n<e.length;n++)T(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){F(e,t);for(let n=0;n<e.length;n++)O(e[n],`${t}[${n}]`)},validateBoolean:O,validateBuffer:N,validateDictionary:B,validateEncoding:function(e,t){const n=C(t),r=e.length;if("hex"===n&&r%2!=0)throw new v("encoding",t,`is invalid for data of length ${r}`)},validateFunction:$,validateInt32:E,validateInteger:_,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new b(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&c(e))throw new k(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:D,validateOneOf:R,validatePlainFunction:U,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===w(e).length||+e!=+e>>>0||e>65535||0===e&&!n)throw new y(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(T(e,t),void 0===x[e]){if(void 0!==x[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:T,validateUint32:M,validateUndefined:j,validateUnion:function(e,t,n){if(!a(n,e))throw new b(t,`('${o(n,"|")}')`,e)},validateAbortSignal:L,validateLinkHeaderValue:function(e){if("string"==typeof e)return G(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const a=e[r];G(a,"hints"),n+=a,r!==t-1&&(n+=", ")}return n}throw new v("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},99:(e,t,n)=>{const r=n(292),a=n(760),o=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=o,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>a}),e.exports.Stream=r.Stream,e.exports.default=e.exports},141:(e,t,n)=>{const{format:r,inspect:a,AggregateError:o}=n(775),i=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function p(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function f(e,t,n){n||(n=Error);class a extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const a=(t.match(/%[dfijoOs]/g)||[]).length;return d(a===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${a}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(a.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),a.prototype.code=e,a.prototype[s]=!0,u[e]=a}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const o=[],i=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?o.push(e.toLowerCase()):l.test(e)?i.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(i.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),i.push("Object"))}if(o.length>0){switch(o.length){case 1:r+=`of type ${o[0]}`;break;case 2:r+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`one of type ${o.join(", ")}, or ${e}`}}(i.length>0||s.length>0)&&(r+=" or ")}if(i.length>0){switch(i.length){case 1:r+=`an instance of ${i[0]}`;break;case 2:r+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();r+=`an instance of ${i.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var u;null!==(u=n.constructor)&&void 0!==u&&u.name?r+=`. Received an instance of ${n.constructor.name}`:r+=`. Received ${a(n,{depth:-1})}`}else{let e=a(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r}),TypeError),f("ERR_INVALID_ARG_VALUE",((e,t,n="is invalid")=>{let r=a(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`}),TypeError),f("ERR_MISSING_ARGS",((...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,n)=>{let r;return d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=p(String(n)):"bigint"==typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=p(r)),r+="n"):r=a(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:h((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new i([t,e],t.message);return n.code=t.code,n}return e||t})),hideStackFrames:h,codes:u}},191:e=>{e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Uint8Array}},775:(e,t,n)=>{const r=n(485),a=Object.getPrototypeOf((async function(){})).constructor,o=globalThis.Blob||r.Blob,i=void 0!==o?function(e){return e instanceof o}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}},promisify:e=>new Promise(((t,n)=>{e(((e,...r)=>e?n(e):t(...r)))})),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,n]){const r=t.shift();return"f"===n?r.toFixed(6):"j"===n?JSON.stringify(r):"s"===n&&"object"==typeof r?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof a,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:i},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},292:(e,t,n)=>{const{Buffer:r}=n(485),{ObjectDefineProperty:a,ObjectKeys:o,ReflectApply:i}=n(191),{promisify:{custom:s}}=n(775),{streamReturningOperators:c,promiseReturningOperators:l}=n(554),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=n(141),d=n(818),{pipeline:p}=n(754),{destroyer:f}=n(230),h=n(86),g=n(760),w=n(132),m=e.exports=n(200).Stream;m.isDisturbed=w.isDisturbed,m.isErrored=w.isErrored,m.isReadable=w.isReadable,m.Readable=n(858);for(const b of o(c)){const v=c[b];function k(...e){if(new.target)throw u();return m.Readable.from(i(v,this,e))}a(k,"name",{__proto__:null,value:v.name}),a(k,"length",{__proto__:null,value:v.length}),a(m.Readable.prototype,b,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(l)){const C=l[S];function P(...e){if(new.target)throw u();return i(C,this,e)}a(P,"name",{__proto__:null,value:C.name}),a(P,"length",{__proto__:null,value:C.length}),a(m.Readable.prototype,S,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}m.Writable=n(373),m.Duplex=n(182),m.Transform=n(210),m.PassThrough=n(467),m.pipeline=p;const{addAbortSignal:y}=n(374);m.addAbortSignal=y,m.finished=h,m.destroy=f,m.compose=d,a(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),a(p,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),a(h,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),m.Stream=m,m._isUint8Array=function(e){return e instanceof Uint8Array},m._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},760:(e,t,n)=>{const{ArrayPrototypePop:r,Promise:a}=n(191),{isIterable:o,isNodeStream:i,isWebStream:s}=n(132),{pipelineImpl:c}=n(754),{finished:l}=n(86);n(91),e.exports={finished:l,pipeline:function(...e){return new a(((t,n)=>{let a,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!i(u)&&!o(u)&&!s(u)){const t=r(e);a=t.signal,l=t.end}c(e,((e,r)=>{e?n(e):t(r)}),{signal:a,end:l})}))}}},533:e=>{var t,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||i(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},377:(e,t,n)=>{var r=n(485),a=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),o(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},464:(e,t,n)=>{var r=n(377).Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},54:(e,t,n)=>{n.d(t,{MS:()=>E,cF:()=>M,AK:()=>T,M_:()=>R,cX:()=>O,BT:()=>ne,_W:()=>D,Pg:()=>fe,$j:()=>ee,U$:()=>U,U7:()=>j});var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},a={};r.d(a,{MS:()=>o,cF:()=>i,AK:()=>c,M_:()=>s,cX:()=>l,Yd:()=>w,nj:()=>u,O4:()=>_,_W:()=>d,U$:()=>f,U7:()=>h});class o extends Error{constructor(e,t){var n,r;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An unexpected error has occurred"),this.name=this.constructor.name,this.stack=(e?this.stack:null!==(r=null==t?void 0:t.stack)&&void 0!==r?r:this.stack).replace(/^(\w*Error)/,`${this.constructor.name}`)}}class i extends o{constructor(e,t,n){var r;super(e=null!==(r=null!=e?e:null==n?void 0:n.message)&&void 0!==r?r:"An error occurred when executing the API request",n),this.status=t}}class s extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An authorization error occurred",t)}}class c extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"The API request failed as the authorization tokens have expired",t)}}class l extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An initialization error occurred",t)}}class u extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"The method has not been implemented",t)}}class d extends o{constructor(e){super(e=null!=e?e:"Invalid parameter detected")}}const p=e=>{let t=fin.Integrations;t||(fin.Integrations={},t=fin.Integrations);let n=t[e];return n||(t[e]={},n=t[e]),n},f=e=>{p(e).loggingEnabled=!1},h=(e,t="0.0.0")=>{p(e).loggingEnabled=!0,console.log(g(e),`v${t}`)},g=e=>`[@openfin/${e.toLowerCase()}]`;class w{constructor(e){this.name=e,this.prefix=g(e),this.isLoggingEnabled=this.isLoggingEnabled.bind(this),this.logError=this.logError.bind(this),this.logInfo=this.logInfo.bind(this),this.logWarning=this.logWarning.bind(this)}isLoggingEnabled(){return p(this.name).loggingEnabled}logError(e){this.isLoggingEnabled()&&(e.innerError?console.error(this.prefix,e,"\n\n(inner)",e.innerError):console.error(this.prefix,e))}logInfo(...e){this.isLoggingEnabled()&&console.log(this.prefix,...e)}logWarning(...e){this.isLoggingEnabled()&&console.warn(this.prefix,...e)}}const m="oauth-api-auth-flow",y=(e,t,n,r,a,i,s,c)=>async l=>{const u=new URL(l);if(0!==u.href.toLowerCase().indexOf(a.toLowerCase()))return!1;if(window.clearInterval(c),window.clearTimeout(t),window.clearTimeout(n),e.removeAllListeners(),e.close(!0),u.searchParams.get("error")){const e=new o("Authorization error");return e.data=u.toString(),s(e),!0}if(u.searchParams.get("state")!==r){const e=new o("State mismatch");return e.data=u.toString(),s(e),!0}const d=u.searchParams.get("code");if(!d){const e=new o("Authorization code missing");return e.data=u.toString(),s(e),!0}return i(d),!0},b=(e,t,n,r)=>async(a,i)=>{let s;const c=window.setTimeout((()=>{window.clearInterval(s),window.clearTimeout(c),e.removeAllListeners(),e.close(!0),i(new o("Authorization timed out"))}),3e5);e.addListener("closing",(async()=>{r.logInfo("User closed auth window"),window.clearInterval(s),window.clearTimeout(c),e.removeAllListeners(),i(new o("Failed to complete authorization code flow"))}));const l=window.setTimeout((async()=>{try{await e.isShowing()||(r.logInfo("Showing auth window"),await e.show(!0),await e.focus())}catch(e){r.logWarning("Unable to show auth window")}}),2e3),{version:u}=await fin.System.getRuntimeInfo();parseInt(u.split(".")[0],10)>=30?await y(e,c,l,t,n,a,i)((await e.getInfo()).url)||await e.addListener("url-changed",(o=>{r.logInfo("Auth window navigated to",o.url),y(e,c,l,t,n,a,i)(o.url)})):s=window.setInterval((()=>(async(e,t,n,r,a,i,s,c)=>{let l;try{l=await e.getInfo()}catch(e){return window.clearInterval(t),window.clearTimeout(n),window.clearTimeout(r),c(new o("Could not locate auth window")),!1}return y(e,n,r,a,i,s,c,t)(l.url)})(e,s,c,l,t,n,a,i)),500)},v=()=>{let e,t,n,r;const a=async(t,n=!1)=>{const{command:r,data:i,id:s}=t,c={command:r,id:s};try{if(!e)throw new Error("Access token not found");const{apiRequestUrl:r,data:s,headers:l,httpMethod:u,includeAuthorization:d}=i,p=await(async(t,n,r,a,o)=>{var i,s;const c=Object.assign({Accept:"application/json"},a);"PATCH"!==n&&"POST"!==n&&"PUT"!==n||/content-type/i.test(Object.keys(c).join(","))||(c["Content-Type"]="application/json"),o&&(c.Authorization=`Bearer ${e}`);const l=await fetch(t,{body:"object"==typeof r?JSON.stringify(r):r,headers:c,method:n});if(!l.ok){const e={message:"Failed to execute API request"};return(null===(i=l.headers.get("Content-Type"))||void 0===i?void 0:i.includes("application/json"))&&(e.data=await l.json()),[l.status,void 0,void 0,e]}let u;const d=null!==(s=l.headers.get("Content-Type"))&&void 0!==s?s:"";switch(!0){case!d:break;case/^application\/(\w+\+)?json/i.test(d):u=await l.json();break;case/^multipart\/form-?data|^application\/x-?www-?form-?urlencoded/i.test(d):u=await l.formData();break;case/^application\/(([^/]+)?xml|vnd\.openxmlformats)|^text\/|^image\/svg/i.test(d):u=await l.text();break;default:u=await l.arrayBuffer()}return[l.status,u,d,void 0]})(r,u,s,l,d),[f,h,g,w]=p;if(c.status=f,w){if(!n&&401===f){const[e,n]=await o();return n?(c.status=e,c.error=n,c):await a(t,!0)}c.error=w}else h&&(c.data=h,c.type=g)}catch(e){e instanceof Error?c.error={message:e.message}:c.error={message:"Failed to execute API request"}}return Promise.resolve(c)},o=async()=>{var a;if(!n)throw new Error("Authorization server metadata not set");if(!t)throw new Error("Client ID not set");const o=`grant_type=refresh_token&client_id=${t}&refresh_token=${r}`,i=await fetch(n.token_endpoint,{body:o,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!i.ok){const e={message:"Failed to refresh access token"};return(null===(a=i.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(e.data=await i.json()),[i.status,e]}const s=await i.json();return e=s.access_token,[i.status]};self.onmessage=async o=>{const{command:i,id:s}=o.data;let c={command:i,id:s};switch(i){case"API_REQUEST":c=await a(o.data);break;case"CODE_EXCHANGE":c=await(async a=>{var o;const{command:i,data:s,id:c}=a,l={command:i,id:c};try{if(!n)throw new Error("Authorization server metadata not set");if(!t)throw new Error("Client ID not set");const{code:a,codeVerifier:i,redirectUri:c}=s,u=`grant_type=authorization_code&client_id=${t}&code=${a}&code_verifier=${i}&redirect_uri=${c}`,d=await fetch(n.token_endpoint,{body:u,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(d.ok){const t=await d.json();e=t.access_token,r=t.refresh_token}else{const e={message:"Failed to retrieve tokens"};(null===(o=d.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(e.data=await d.json()),l.error=e}}catch(e){e instanceof Error?l.error={message:e.message}:l.error={message:"Failed to retrieve tokens"}}return Promise.resolve(l)})(o.data);break;case"EXPIRE_TOKENS":c=await(async t=>{var a;const{command:o,expireAccessTokenOnly:i,id:s}=t,c={command:o,id:s};try{if(!i&&!r)throw new Error("Refresh token not found");if(!n)throw new Error("Authorization server metadata not set");if(!n.revocation_endpoint)throw new Error("Revocation endpoint missing in authorization server metadata");const t=i?e:r,o=await fetch(`${n.revocation_endpoint}?token=${t}`,{headers:{Accept:"application/json"}});if(!o.ok){const e={message:"Failed to revoke tokens"};(null===(a=o.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(e.data=await o.json()),c.error=e}}catch(e){e instanceof Error?c.error={message:e.message}:c.error={message:"Failed to revoke tokens"}}return Promise.resolve(c)})(o.data);break;case"INIT":c=await(async e=>{const{command:r,data:a,id:o}=e,i={command:r,id:o};return t=a.clientId,n=a.metadata,Promise.resolve(i)})(o.data);break;default:c.error=new Error(`Unexpected oauth worker command: ${i}`)}self.postMessage(c)}};var k;!function(e){e.ApiRequest="API_REQUEST",e.CodeExchange="CODE_EXCHANGE",e.ExpireTokens="EXPIRE_TOKENS",e.Init="INIT"}(k||(k={}));const S=[],C=e=>{S.push(e)},P=(e,t)=>(n,r,a)=>new Promise(((o,i)=>{const s={command:k.CodeExchange,data:{code:n,codeVerifier:r,redirectUri:a},id:Date.now().toString()},{command:c,id:l}=s;C({command:c,id:l,reject:i,resolve:o}),e.postMessage(s),t.logInfo("Worker request sent",s)})),I=(e,t,n)=>(r,a,o,i,s)=>new Promise(((c,l)=>{const u={command:k.ApiRequest,data:{apiRequestUrl:r,clientId:e,data:o,headers:i,httpMethod:a,includeAuthorization:s},id:Date.now().toString()},{command:d,id:p}=u;C({command:d,id:p,reject:l,resolve:c}),t.postMessage(u),n.logInfo("Worker request sent",u)})),x=(e,t)=>n=>new Promise(((r,a)=>{const o={command:k.ExpireTokens,expireAccessTokenOnly:n,id:Date.now().toString()},{command:i,id:s}=o;C({command:i,id:s,reject:a,resolve:r}),e.postMessage(o),t.logInfo("Worker request sent",o)})),A=(e,t)=>async()=>{try{await x(e,t)(!1)}catch(e){t.logWarning(e.message)}e.terminate(),t.logInfo("Worker terminated")};class _{get apiOrigin(){return this._apiOrigin}get clientId(){return this._clientId}get logger(){return this._logger}get metadata(){return this._metadata}get worker(){return this._worker}constructor(e,t,n,r,a){if(this.executeApiRequest=async(e,t="GET",n,r,a=!0,o=!1)=>{this._logger.logInfo("ExecuteApiRequest started",e,t,n,r);try{const o=await((e,t)=>async(n,r,a,o,s)=>{try{return await t.executeApiRequest(`${e}${n}`,r,a,o,s)}catch(e){let t;const{data:n,message:r,status:a}=e;throw t=e instanceof Error?new i(r,a):"Failed to refresh access token"===r?new c(r):new i(r,a),t.data=n,t}})(this._apiOrigin,this._worker)(e,t,n,r,a);return this._logger.logInfo("ExecuteApiRequest completed",o),o}catch(e){if(e instanceof i){const{data:t,message:n,name:r,stack:a}=e,o=this.getErrorMessageFromServerResponse(t);o&&(e.message=o,e.stack=null==a?void 0:a.replace(`${r}: ${n}`,`${r}: ${o}`))}throw o&&this.logger.logError(e),e}},!(e&&t&&n&&r&&a))throw new l("Provider has not been properly initialized (call init to create new instances)");this._apiOrigin=e,this._clientId=t,this._metadata=n,this._worker=r,this._logger=a,this.authorize=this.authorize.bind(this),this.close=this.close.bind(this),this.executeApiRequest=this.executeApiRequest.bind(this),this.expireTokens=this.expireTokens.bind(this),this.getErrorMessageFromServerResponse=this.getErrorMessageFromServerResponse.bind(this)}async authorize(e,t,n){if(this._logger.logInfo("Authorize started",e,t,n),!this._metadata||!this._clientId||!this._worker)throw new l("Provider has not been properly initialized (call init to create new instances)");try{await(r=this._metadata,a=this._clientId,i=this._worker,c=this._logger,async(e,t,n)=>{const{authorization_endpoint:o}=r,s=fin.Application.getCurrentSync(),l=(await s.getChildWindows()).find((e=>e.identity.name===m));l&&await l.close(!0);const u=(new Date).getTime().toString(),d=(()=>{const e=new Uint32Array(64);return window.crypto.getRandomValues(e),Array.from(e,(e=>`0${e.toString(16)}`.slice(-2))).join("")})(),p=(await(async e=>{const t=(new TextEncoder).encode(e),n=await window.crypto.subtle.digest("SHA-256",t),r=await(e=>new Promise(((t,n)=>{try{const r=new Blob([e]),a=new FileReader;a.onload=e=>{var r,a;const o=null===(r=e.target)||void 0===r?void 0:r.result;if(o){const[,e]=Array.from(null!==(a=o.match(/base64,(.*)$/i))&&void 0!==a?a:[]);t(null!=e?e:"")}n(new Error("Unexpected empty result"))},a.readAsDataURL(r)}catch(e){n(e)}})))(n);return r.replace(/\+/g,"-").replace(/\//g,"_")})(d)).replace(/=+$/,"");let f="";t&&(f="&",f+=Object.entries(t).map((e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`)).join("&"));const h=`${o}?client_id=${encodeURIComponent(a)}&redirect_uri=${encodeURIComponent(e)}&response_type=code&state=${u}&code_challenge=${p}&code_challenge_method=S256${f}`,g=null!=n?n:{},{defaultHeight:w,defaultWidth:y}=g,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(g,["defaultHeight","defaultWidth"]);c.logInfo("Starting OAuth flow",h);const k=await fin.Window.create(Object.assign({alwaysOnTop:!0,maximizable:!1,minimizable:!1,autoShow:!1,defaultCentered:!0,defaultHeight:null!=w?w:700,defaultWidth:null!=y?y:600,includeInSnapshots:!1,name:m,resizable:!1,saveWindowState:!1,showTaskbarIcon:!1,url:h},v)),S=await new Promise(b(k,u,e,c));c.logInfo("Received authorization code"),await i.exchangeCodeForTokens(S,d,e),c.logInfo("Received tokens")})(e,t,n),this._logger.logInfo("Authorize completed")}catch(e){let t;if(e instanceof o){const{data:n}=e,r=this.getErrorMessageFromServerResponse(n);t=new s(r,e),t.data=n}else t=new s(void 0,e);throw this.logger.logError(t),t}var r,a,i,c}async close(){var e;this._logger.logInfo("Close started");try{await(null===(e=this._worker)||void 0===e?void 0:e.terminate()),this._worker=void 0,this._apiOrigin=void 0,this._clientId=void 0,this._metadata=void 0,this._logger.logInfo("Close completed")}catch(e){const t=new o(void 0,e);throw this._logger.logError(t),t}}async expireTokens(e=!1){var t;this._logger.logInfo("ExpireTokens started");try{await(null===(t=this._worker)||void 0===t?void 0:t.expireTokens(e)),this._logger.logInfo("ExpireTokens completed")}catch(e){const t=new o(void 0,e);throw this._logger.logError(t),t}}getErrorMessageFromServerResponse(e){e&&this._logger.logWarning(e)}static async init(e,t,n,r,...a){const i=new w(r);let s;i.logInfo("Init started",e,t,n);try{s=new URL(t)}catch(e){const t=new d("Unexpected invalid API origin");throw i.logError(t),t}try{const t=await(async e=>{let t;try{t=new URL(e)}catch(e){throw new d("Unexpected invalid metadata URL")}const n=await fetch(t,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Failed to retrieve authorization server metadata");const r=await n.json();if(!r)throw new Error("Unexpected empty authorization server metadata response");if(!r.response_types_supported.find((e=>"code"===e.toLowerCase())))throw new Error("Authorization server does not support the authorization code response type");return r})(e),r=await(async(e,t,n)=>{const r=new Blob([`(${v})()`],{type:"text/javascript"}),a=URL.createObjectURL(r),o=new Worker(a);return o.onmessage=(e=>t=>{e.logInfo("Worker response received",t.data);const n=t.data,{command:r,error:a,id:o}=n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["command","error","id"]),s=((e,t)=>S.find((n=>n.command===t&&n.id===e)))(o,r);s?(a?("status"in i&&void 0!==i.status&&(a.status=i.status),s.reject(a)):s.resolve(i),((e,t)=>{const n=S.findIndex((n=>n.command===t&&n.id===e));n>=0&&S.splice(n,1)})(o,r)):e.logError(new Error("Unable to locate awaited request"))})(n),await((e,t,n,r)=>new Promise(((a,o)=>{const i={command:k.Init,data:{clientId:t,metadata:e},id:Date.now().toString()},{command:s,id:c}=i;C({command:s,id:c,reject:o,resolve:a}),n.postMessage(i),r.logInfo("Worker request sent",i)})))(e,t,o,n),{exchangeCodeForTokens:P(o,n),executeApiRequest:I(t,o,n),expireTokens:x(o,n),terminate:A(o,n)}})(t,n,i);return i.logInfo("Init completed",t),new _(s.origin,n,t,r,i)}catch(e){let t;throw t=e instanceof o?e:new l(void 0,e),i.logError(t),t}}}var E=a.MS,M=a.cF,T=a.AK,R=a.M_,O=a.cX,W=a.O4,D=a._W,B=a.U$,F=a.U7,N=n(951);const L="1.0.1",$="Microsoft365",U=()=>{B($)},j=()=>{F($,L)};"undefined"!=typeof window&&("undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Microsoft365:{enableLogging:j,disableLogging:U}}}));const V=e=>async(t,n,r,a,o)=>{var i;return t=(i=t).startsWith("/")?i:`/${i}`,e.executeApiRequest(t,n,r,a,o,!0)},G=async(e,t,n=[])=>{const r=["id","userPrincipalName","userType",...n].join(","),a=await(async(e,t=[])=>{if(!(null==t?void 0:t.length))return[];const n=[];for(let r=0;r<t.length;r+=20){const a={requests:t.slice(r,r+20).map((e=>(e.id=crypto.randomUUID(),e)))};n.push(e.executeApiRequest("/v1.0/$batch","POST",a))}const r=(await Promise.all(n)).flatMap((e=>e.data.responses));return t.map((e=>{var t;return null===(t=r.find((t=>t.id===e.id)))||void 0===t?void 0:t.body}))})(e,t.map((e=>({method:"GET",url:`/users?$filter=mail eq '${encodeURIComponent(e)}'&$select=${r}`})))),o=a.map((e=>{var t;return null===(t=e.value)||void 0===t?void 0:t[0]}));return e.logger.logInfo("Resolved users from email addresses",o,t),o};var H=n(300);const z=e=>e.map((e=>e?{id:e.userPrincipalName,emailAddress:e.mail,name:e.displayName}:void 0)),q=async(e,t)=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:L,componentName:e}})}catch(n){t.logWarning(`Unable to register usage for feature ${e}: ${null==n?void 0:n.message}`)}},K=e=>{let t=e;return Array.isArray(e)?e.filter(Boolean).map(K):("object"==typeof e&&(t=Object.fromEntries(Object.entries(e).filter((([,e])=>void 0!==(null!=e?e:void 0))).map((([e,t])=>[e,K(t)])))),t)},J=e=>/#EXT#@/.test(e.userPrincipalName);var Z;!function(e){e.MS365="MS-365",e.Teams="MS-TEAMS"}(Z||(Z={}));class Y extends W{get currentUser(){return this._currentUser}get redirectUri(){return this._redirectUri}get permissions(){return this._permissions}get tenantId(){return this._tenantId}constructor(e,t,n,r,a,o,i,s){super(e,t,o,i,s),this._permissions=a,this._redirectUri=r,this._tenantId=n,q(Z.MS365,s)}async authorize(e,t,n){await super.authorize(e,t,n);const r=await(async e=>{const{data:t}=await e.executeApiRequest("/v1.0/me");return t})(this);this._currentUser=r}getErrorMessageFromServerResponse(e){var t,n,r;if("string"==typeof e)try{return null===(n=null===(t=new URL(e).searchParams.get("error_description"))||void 0===t?void 0:t.split(/\r\n/))||void 0===n?void 0:n[0]}catch(e){return}return null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message}static async init(e,t,n,r,a,o,i){const s=await super.init(e,t,n,r);return new Y(t,n,a,o,i,null==s?void 0:s.metadata,null==s?void 0:s.worker,null==s?void 0:s.logger)}}const Q=["User.ReadBasic.All","Team.ReadBasic.All","Channel.ReadBasic.All","ChannelMessage.Send","Chat.Create","ChatMessage.Send","offline_access"];let X;const ee=async(e,t,n,r=[],a,o)=>{await te(e,t,n,r);const i=Object.assign({scope:[...Q,...r].join(" ")},a),s=Object.assign({defaultHeight:600,defaultWidth:550},o);return await X.authorize(n,i,s),{clientId:e,currentUser:X.currentUser,disconnect:X.close,executeApiRequest:V(X),provider:X,tenantId:t}},te=async(e,t,n,r)=>{if(!e)throw new D("Invalid client ID");if(!t)throw new D("Invalid tenant ID");if(!n)throw new D("Invalid redirect URI");const a=`https://login.microsoftonline.com/${t}/v2.0/.well-known/openid-configuration`;(!X||X.clientId!==e||X.tenantId!==t||X.redirectUri!==n||(0,N.xor)(X.permissions,r).length>0)&&(X=await Y.init(a,"https://graph.microsoft.com",e,$,t,n,r))};class ne extends E{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An interop error occurred",t)}}var re,ae,oe,ie,se,ce;!function(e){e.AppNotFound="AppNotFound",e.ErrorOnLaunch="ErrorOnLaunch",e.AppTimeout="AppTimeout",e.ResolverUnavailable="ResolverUnavailable"}(re||(re={})),function(e){e.NoAppsFound="NoAppsFound",e.ResolverUnavailable="ResolverUnavailable",e.ResolverTimeout="ResolverTimeout"}(ae||(ae={})),function(e){e.NoChannelFound="NoChannelFound",e.AccessDenied="AccessDenied",e.CreationFailed="CreationFailed"}(oe||(oe={})),ie=function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof w?t:w,o=Object.create(a.prototype),i=new _(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return M()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=I(i,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",g={};function w(){}function m(){}function y(){}var b={};b[o]=function(){return this};var v=Object.getPrototypeOf,k=v&&v(v(E([])));k&&k!==n&&r.call(k,o)&&(b=k);var S=y.prototype=w.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,o,i,s){var c=u(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return m.prototype=S.constructor=y,y.constructor=m,m.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(P.prototype),P.prototype[i]=function(){return this},e.AsyncIterator=P,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new P(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(S),c(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},ie({exports:{}}),function(e){e.Contact="fdc3.contact",e.ContactList="fdc3.contactList",e.Country="fdc3.country",e.Instrument="fdc3.instrument",e.Organization="fdc3.organization",e.Portfolio="fdc3.portfolio",e.Position="fdc3.position"}(se||(se={})),function(e){e.StartCall="StartCall",e.StartChat="StartChat",e.ViewChart="ViewChart",e.ViewContact="ViewContact",e.ViewQuote="ViewQuote",e.ViewNews="ViewNews",e.ViewInstrument="ViewInstrument",e.ViewAnalysis="ViewAnalysis"}(ce||(ce={}));const le="ofms365action",ue=e=>e?"msteams:":"https://teams.microsoft.com",de=async e=>{const t=null==e?void 0:e[le];if(t)try{const e=(e=>{const t=(0,H.decompress)(e,{inputEncoding:"Base64",outputEncoding:"String"});return JSON.parse(t)})(t),{context:n,intent:r}=e,a={context:n,name:r};return await fin.me.interop.fireIntent(a),a}catch(e){const t=e.message;throw new E("Failed to decompress share payload"+(t?` (${t})`:""),e)}},pe=async(e,t,n)=>{const r=await(async(e,t,n=[])=>{try{const r=["id",...n].join(","),{data:a}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(t)}?$select=${r}`);return a}catch(e){if(404!==e.status)throw e}})(e,t,["displayName"]);if(!r)return;let a;if(e.logger.logInfo("Resolved team",r),n){if(a=await(async(e,t,n,r=[])=>{try{const a=["id",...r].join(","),{data:o}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(n)}/channels/${encodeURIComponent(t)}?$select=${a}`);return o}catch(e){if(404!==e.status)throw e}})(e,n,t,["displayName"]),!a)return void e.logger.logWarning(`Could not resolve channel from id ${n}`)}else{e.logger.logInfo("No channel id supplied, using primary channel");const{data:n}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(t)}/primaryChannel?$select=displayName,id`);a=n}const o={channelId:a.id,channelName:a.displayName,teamId:r.id,teamName:r.displayName};return e.logger.logInfo("Resolved team channel",t,n,o),o};class fe{constructor(e,t=!0){this.logger=e.provider.logger,this.provider=e.provider,this.useMsTeamsProtocol=t,this.registerIntentHandlers=this.registerIntentHandlers.bind(this),this.share=this.share.bind(this),this.startCall=this.startCall.bind(this),this.startChat=this.startChat.bind(this),this.enableSharePayloadHandler(),q(Z.Teams,this.logger)}async enableSharePayloadHandler(){const{initialOptions:e}=await fin.Application.getCurrentSync().getInfo(),{userAppConfigArgs:t}=e,n=await de(t);n&&this.logger.logInfo("Firing intent",n),fin.Application.getCurrentSync().addListener("run-requested",(async e=>{try{const t=await de(e.userAppConfigArgs);t&&this.logger.logInfo("Firing intent",t)}catch(e){this.logger.logError(e)}}))}async openUrl(e){this.logger.logInfo("openUrl started",e);try{const t=this.useMsTeamsProtocol?e.replace(/^https:\/\/teams.microsoft.com\//i,"msteams:"):e;this.logger.logInfo("Opening url",t),await fin.System.openUrlWithBrowser(t),this.logger.logInfo("openUrl completed")}catch(e){throw this.logger.logError(e),e}}async registerIntentHandlers(){if(this.logger.logInfo("registerIntentHandlers started"),this.unsubscribeIntentHandlers)return{unsubscribe:this.unsubscribeIntentHandlers};try{await fin.me.interop.getContextGroups();const e=await fin.me.interop.registerIntentHandler((async e=>{try{await((e,t)=>async n=>{var r,a,o,i;if(e.logger.logInfo("handleStartCallIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==ce.StartCall.toLowerCase())throw new E(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(a=s.type)||void 0===a?void 0:a.toLowerCase())!==se.Contact.toLowerCase()&&(null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==se.ContactList.toLowerCase())throw new E(`Unexpected context type: ${s.type}`);const c=(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())===se.ContactList.toLowerCase()?s.contacts.map((e=>e.id.email)).filter(Boolean):[s.id.email],l=await t(c);e.logger.logInfo("handleStartCallIntent completed",l)})(this.provider,this.startCall)(e)}catch(e){throw this.logger.logError(e),e}}),"StartCall"),t=await fin.me.interop.registerIntentHandler((async e=>{try{await((e,t)=>async n=>{var r,a,o,i;if(e.logger.logInfo("handleStartChatIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==ce.StartChat.toLowerCase())throw new E(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(a=s.type)||void 0===a?void 0:a.toLowerCase())!==se.Contact.toLowerCase()&&(null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==se.ContactList.toLowerCase())throw new E(`Unexpected context type: ${s.type}`);const c=(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())===se.ContactList.toLowerCase()?s.contacts.map((e=>e.id.email)).filter(Boolean):[s.id.email],l=await t({emailAddresses:c,topicName:s.name});e.logger.logInfo("handleStartChatIntent completed",l)})(this.provider,this.startChat)(e)}catch(e){throw this.logger.logError(e),e}}),"StartChat");return this.unsubscribeIntentHandlers=async()=>{this.logger.logInfo("unsubscribeIntentHandlers started"),await e.unsubscribe(),await t.unsubscribe(),this.unsubscribeIntentHandlers=void 0,this.logger.logInfo("unsubscribeIntentHandlers completed")},this.logger.logInfo("registerIntentHandlers completed"),{unsubscribe:this.unsubscribeIntentHandlers}}catch(e){const t=new ne(e.message);throw this.logger.logError(t),t}}async share(e){var t,n,r,a;this.logger.logInfo("share started",e);try{if(!e.target)throw new D("Target not provided");if((null===(t=e.context)||void 0===t?void 0:t.type.toLowerCase())!==se.Instrument.toLowerCase())throw new D("Unsupported context type");if(!(null===(r=null===(n=e.context)||void 0===n?void 0:n.id)||void 0===r?void 0:r.ticker))throw new D("Ticker not provided");if(!e.chartImage&&null==e.priceCurrent)throw new D("Current price not provided");const o=null===(a=e.showMessage)||void 0===a||a,i=await(async(e,t)=>{var n,r,a,o;const{chartImage:i,context:s}=t,{priceCurrent:c,priceHigh:l,priceLow:u,priceOpen:d}=t,p=(null===(r=null===(n=s.id)||void 0===n?void 0:n.ticker)||void 0===r?void 0:r.trim())||void 0,f=(null===(a=s.name)||void 0===a?void 0:a.trim())||void 0;let h,g,w,m,y,b;if(null!=t.timestamp||!i)try{h=new Date(null!==(o=t.timestamp)&&void 0!==o?o:Date.now()).toISOString().replace(/\.\d+Z$/,"+00:00")}catch(n){e.logger.logWarning("Invalid timestamp",t.timestamp)}if(null!=c&&null!=d&&(g=c-d,w=g/d*100,y=g>0?"":g<0?"":"",m=g>0?"Good":g<0?"Attention":"Warning"),i){if(!/^image\/(gif|jp(e|e?g)|png)$/i.test(i.type))throw new D("Chart image MIME type not supported");try{b=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=()=>n(new Error("Failed to convert blob to base64")),r.readAsDataURL(e)})))(i)}catch(e){throw new E("Failed to convert blob to base64",e)}}const v=(await fin.System.getRuntimeInfo()).manifestUrl,k=(S={context:s,intent:i?ce.ViewChart:ce.ViewInstrument,version:L},(0,H.compress)(JSON.stringify(S),{outputEncoding:"Base64"}));var S;const C=`${v}?$$${le}=${encodeURIComponent(k)}`,P=`https://start.openfin.co/?manifest=${encodeURIComponent(C)}`,I={$schema:"http://adaptivecards.io/schemas/adaptive-card.json",type:"AdaptiveCard",version:"1.4",body:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[{type:"Container",items:[{type:"TextBlock",text:null!=f?f:p.toUpperCase(),wrap:!0,size:"Large",spacing:"None"},f&&{type:"TextBlock",text:p.toUpperCase(),isSubtle:!0,wrap:!0,spacing:"None"},h&&{type:"TextBlock",text:`{{DATE(${h}, SHORT)}} {{TIME(${h})}}`,wrap:!0,size:"Small"}]}]},null!=c&&!b&&{type:"Column",width:"stretch",items:[{type:"TextBlock",text:c.toFixed(2),size:"ExtraLarge",wrap:!0,horizontalAlignment:"Right"},null!=g&&null!=w&&{type:"TextBlock",text:`${y} ${g.toFixed(2)} (${w.toFixed(2)}%)`,color:m,spacing:"None",wrap:!0,horizontalAlignment:"Right"},(null!=d||null!=l||null!=u)&&{type:"Container",horizontalAlignment:"Right",items:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[null!=d&&{type:"TextBlock",text:"Open",wrap:!0,horizontalAlignment:"Right",size:"Small",weight:"Bolder",spacing:"None"},null!=l&&{type:"TextBlock",text:"High",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"},null!=u&&{type:"TextBlock",text:"Low",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"}]},{type:"Column",width:"auto",items:[null!=d&&{type:"TextBlock",text:d.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=l&&{type:"TextBlock",text:l.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=u&&{type:"TextBlock",text:u.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"}]}]}],spacing:"Small"}]}]},b&&{type:"Image",url:"../hostedContents/1/$value",spacing:"Small"},{type:"ActionSet",actions:[{type:"Action.OpenUrl",url:P,title:"Open"}]}]},x={attachments:[{id:"1",contentType:"application/vnd.microsoft.card.adaptive",content:JSON.stringify(K(I))}],body:{contentType:"html",content:'<attachment id="1"></attachment>'},summary:"Test summary"};if(b){const[,e,t]=[...b.match(/^data:([^;]+);base64,(.+)$/i)];x.hostedContents=[{"@microsoft.graph.temporaryId":"1",contentBytes:t,contentType:e}]}return x})(this.provider,e);let s;if(Array.isArray(e.target)){const{target:t}=e,n=await G(this.provider,t,["displayName","mail"]),r=n.filter(Boolean);if(!r.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",t),t.map((()=>{}));const{id:a,webUrl:c}=await(async(e,t)=>{const n={chatType:t.length>2?"group":"oneOnOne",members:t.map((t=>({"@odata.type":"#microsoft.graph.aadUserConversationMember",roles:J(t)?["guest"]:["owner"],"user@odata.bind":`${e.apiOrigin}/v1.0/users('${t.id}')`})))},{data:r}=await e.executeApiRequest("/v1.0/chats","POST",n);return r})(this.provider,[this.provider.currentUser,...r]),{data:l}=await this.provider.executeApiRequest(`/v1.0/chats/${encodeURIComponent(a)}/messages`,"POST",i);this.logger.logInfo("Sent chat message",l),o&&await this.openUrl(c),s=z(n)}else{const{target:t}=e,n=await pe(this.provider,t.teamId,t.channelId);if(!n)return void this.logger.logWarning("Could not resolve team/channel",t.teamId,t.channelId);const{channelId:r,teamId:a}=n,{data:c}=await this.provider.executeApiRequest(`/v1.0/teams/${encodeURIComponent(a)}/channels/${encodeURIComponent(r)}/messages`,"POST",i);this.logger.logInfo("Sent chat message",c),o&&await this.openUrl(c.webUrl),s=n}return this.logger.logInfo("share completed",s),s}catch(e){throw this.logger.logError(e),e}}async startCall(e=[],t=!1){this.logger.logInfo("startCall started",e);try{let n=`${ue(this.useMsTeamsProtocol)}/l/call/0/0?`;const r=await G(this.provider,e,["displayName","mail"]),a=r.filter(Boolean).map((e=>encodeURIComponent(e.userPrincipalName)));if(!a.length)return this.logger.logWarning("Could not resolve any valid users from supplied emails",e),e.map((()=>{}));n+=`users=${a.join(",")}&withVideo=${t}`,this.logger.logInfo("Opening Teams",n),await fin.System.openUrlWithBrowser(n);const o=z(r);return this.logger.logInfo("startCall completed",o),o}catch(e){throw this.logger.logError(e),e}}async startChat(e){this.logger.logInfo("startChat started",e);try{let t,n;if("teamId"in e){const{teamId:r,channelId:a}=e,o=await pe(this.provider,r,a);if(!o)return void this.logger.logWarning("Could not resolve team/channel",r,a);t=`${ue(this.useMsTeamsProtocol)}/l/channel/${encodeURIComponent(o.channelId)}/${encodeURIComponent(o.channelName)}?groupId=${o.teamId}&tenantId=${this.provider.tenantId}`,n=o}else{const{emailAddresses:r,message:a,topicName:o}=e;t=`${ue(this.useMsTeamsProtocol)}/l/chat/0/0?`;const i=await G(this.provider,r,["displayName","mail"]),s=i.filter(Boolean).map((e=>encodeURIComponent(e.userPrincipalName)));if(!s.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",r),r.map((()=>{}));t+=`users=${s.join(",")}`,o&&(t+=`&topicName=${encodeURIComponent(o)}`),a&&(t+=`&message=${encodeURIComponent(a)}`),n=z(i)}return this.logger.logInfo("Opening Teams",t),await fin.System.openUrlWithBrowser(t),this.logger.logInfo("startChat completed",n),n}catch(e){throw this.logger.logError(e),e}}}},91:()=>{}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.c=a,o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i=o(o.s=54),s=i.MS,c=i.cF,l=i.AK,u=i.M_,d=i.cX,p=i.BT,f=i._W,h=i.Pg,g=i.$j,w=i.U$,m=i.U7},434:(e,t,n)=>{n.r(t),n.d(t,{I18nContext:()=>L,I18nextProvider:()=>K,Trans:()=>V,TransWithoutContext:()=>F,Translation:()=>q,composeInitialProps:()=>U,date:()=>Y,getDefaults:()=>_,getI18n:()=>T,getInitialProps:()=>j,initReactI18next:()=>N,number:()=>X,plural:()=>te,select:()=>ee,selectOrdinal:()=>ne,setDefaults:()=>A,setI18n:()=>M,time:()=>Q,useSSR:()=>J,useTranslation:()=>H,withSSR:()=>Z,withTranslation:()=>z});var r=n(41),a=n(2),o=n.n(a),i=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function s(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(o()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var a=new RegExp(i),s=null;null!==(s=a.exec(e));)if(s[0].trim())if(s[1]){var c=s[1].trim(),l=[c,""];c.indexOf("=")>-1&&(l=c.split("=")),t.attrs[l[0]]=l[1],a.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var c=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,l=/^\s*$/,u=Object.create(null);function d(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(d,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var p={parse:function(e,t){t||(t={}),t.components||(t.components=u);var n,r=[],a=[],o=-1,i=!1;if(0!==e.indexOf("<")){var d=e.indexOf("<");r.push({type:"text",content:-1===d?e:e.substring(0,d)})}return e.replace(c,(function(c,u){if(i){if(c!=="</"+n.name+">")return;i=!1}var d,p="/"!==c.charAt(1),f=c.startsWith("\x3c!--"),h=u+c.length,g=e.charAt(h);if(f){var w=s(c);return o<0?(r.push(w),r):((d=a[o]).children.push(w),r)}if(p&&(o++,"tag"===(n=s(c)).type&&t.components[n.name]&&(n.type="component",i=!0),n.voidElement||i||!g||"<"===g||n.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),0===o&&r.push(n),(d=a[o-1])&&d.children.push(n),a[o]=n),(!p||n.voidElement)&&(o>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(o--,n=-1===o?r:a[o]),!i&&"<"!==g&&g)){d=-1===o?r:a[o].children;var m=e.indexOf("<",h),y=e.slice(h,-1===m?void 0:m);l.test(y)&&(y=" "),(m>-1&&o+d.length>=0||" "!==y)&&d.push({type:"text",content:y})}})),r},stringify:function(e){return e.reduce((function(e,t){return e+d("",t)}),"")}};const f=p;function h(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];k(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const g={};function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];k(t[0])&&g[t[0]]||(k(t[0])&&(g[t[0]]=new Date),h(...t))}const m=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout((()=>{e.off("initialized",n)}),0),t()};e.on("initialized",n)}},y=(e,t,n)=>{e.loadNamespaces(t,m(e,n))},b=(e,t,n,r)=>{k(n)&&(n=[n]),n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,m(e,r))},v=e=>e.displayName||e.name||(k(e)&&e.length>0?e:"Unknown"),k=e=>"string"==typeof e,S=e=>"object"==typeof e&&null!==e,C=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,P={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},I=e=>P[e];let x={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(C,I)};const A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x={...x,...e}},_=()=>x;let E;const M=e=>{E=e},T=()=>E,R=(e,t)=>{if(!e)return!1;const n=e.props?e.props.children:e.children;return t?n.length>0:!!n},O=e=>{if(!e)return[];const t=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?W(t):t},W=e=>Array.isArray(e)?e:[e],D=(e,t)=>{if(!e)return"";let n="";const a=W(e),o=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return a.forEach(((e,a)=>{if(k(e))n+=`${e}`;else if((0,r.isValidElement)(e)){const{props:r,type:i}=e,s=Object.keys(r).length,c=o.indexOf(i)>-1,l=r.children;if(l||!c||s)if(!l&&(!c||s)||r.i18nIsDynamicList)n+=`<${a}></${a}>`;else if(c&&1===s&&k(l))n+=`<${i}>${l}</${i}>`;else{const e=D(l,t);n+=`<${a}>${e}</${a}>`}else n+=`<${i}/>`}else if(null===e)h("Trans: the passed in value is invalid - seems you passed in a null child.");else if(S(e)){const{format:t,...r}=e,a=Object.keys(r);if(1===a.length){const e=t?`${a[0]}, ${t}`:a[0];n+=`{{${e}}}`}else h("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else h("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),n},B=(e,t,n,a,o,i)=>{if(""===t)return[];const s=a.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(s.map((e=>`<${e}`)).join("|")).test(t);if(!e&&!c&&!i)return[t];const l={},u=e=>{W(e).forEach((e=>{k(e)||(R(e)?u(O(e)):S(e)&&!(0,r.isValidElement)(e)&&Object.assign(l,e))}))};u(e);const d=f.parse(`<0>${t}</0>`),p={...l,...o},h=(e,t,n)=>{const a=O(e),o=w(a,t.children,n);return(e=>Array.isArray(e)&&e.every(r.isValidElement))(a)&&0===o.length||e.props&&e.props.i18nIsDynamicList?a:o},g=(e,t,n,a,o)=>{e.dummy?(e.children=t,n.push((0,r.cloneElement)(e,{key:a},o?void 0:t))):n.push(...r.Children.map([e],(e=>{const n={...e.props};return delete n.i18nIsDynamicList,(0,r.createElement)(e.type,{...n,key:a,ref:e.ref},o?null:t)})))},w=(t,o,l)=>{const u=W(t);return W(o).reduce(((t,o,d)=>{const f=o.children&&o.children[0]&&o.children[0].content&&n.services.interpolator.interpolate(o.children[0].content,p,n.language);if("tag"===o.type){let i=u[parseInt(o.name,10)];1!==l.length||i||(i=l[0][o.name]),i||(i={});const m=0!==Object.keys(o.attrs).length?((e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n})({props:o.attrs},i):i,y=(0,r.isValidElement)(m),b=y&&R(o,!0)&&!o.voidElement,v=c&&S(m)&&m.dummy&&!y,C=S(e)&&Object.hasOwnProperty.call(e,o.name);if(k(m)){const e=n.services.interpolator.interpolate(m,p,n.language);t.push(e)}else if(R(m)||b){const e=h(m,o,l);g(m,e,t,d)}else if(v){const e=w(u,o.children,l);g(m,e,t,d)}else if(Number.isNaN(parseFloat(o.name)))if(C){const e=h(m,o,l);g(m,e,t,d,o.voidElement)}else if(a.transSupportBasicHtmlNodes&&s.indexOf(o.name)>-1)if(o.voidElement)t.push((0,r.createElement)(o.name,{key:`${o.name}-${d}`}));else{const e=w(u,o.children,l);t.push((0,r.createElement)(o.name,{key:`${o.name}-${d}`},e))}else if(o.voidElement)t.push(`<${o.name} />`);else{const e=w(u,o.children,l);t.push(`<${o.name}>${e}</${o.name}>`)}else if(S(m)&&!y){const e=o.children[0]?f:null;e&&t.push(e)}else g(m,f,t,d,1!==o.children.length||!f)}else if("text"===o.type){const e=a.transWrapTextNodes,s=i?a.unescape(n.services.interpolator.interpolate(o.content,p,n.language)):n.services.interpolator.interpolate(o.content,p,n.language);e?t.push((0,r.createElement)(e,{key:`${o.name}-${d}`},s)):t.push(s)}return t}),[])},m=w([{dummy:!0,children:e||[]}],d,W(e||[]));return O(m[0])};function F(e){let{children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s={},values:c,defaults:l,components:u,ns:d,i18n:p,t:f,shouldUnescape:h,...g}=e;const m=p||T();if(!m)return w("You will need to pass in an i18next instance by using i18nextReactModule"),t;const y=f||m.t.bind(m)||(e=>e),b={..._(),...m.options&&m.options.react};let v=d||y.ns||m.options&&m.options.defaultNS;v=k(v)?[v]:v||["translation"];const S=D(t,b),C=l||S||b.transEmptyNodeValue||o,{hashTransKey:P}=b,I=o||(P?P(S||C):S||C);m.options&&m.options.interpolation&&m.options.interpolation.defaultVariables&&(c=c&&Object.keys(c).length>0?{...c,...m.options.interpolation.defaultVariables}:{...m.options.interpolation.defaultVariables});const x=c||void 0!==n||!t?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},A={...s,context:i||s.context,count:n,...c,...x,defaultValue:C,ns:v},E=I?y(I,A):C;u&&Object.keys(u).forEach((e=>{const t=u[e];"function"==typeof t.type||!t.props||!t.props.children||E.indexOf(`${e}/>`)<0&&E.indexOf(`${e} />`)<0||(u[e]=(0,r.createElement)((function(){return(0,r.createElement)(r.Fragment,null,t)})))}));const M=B(u||t,E,m,b,A,h),R=void 0!==a?a:b.defaultTransParent;return R?(0,r.createElement)(R,g,M):M}const N={type:"3rdParty",init(e){A(e.options.react),M(e)}},L=(0,r.createContext)();class ${constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const U=e=>async t=>({...e.getInitialProps?await e.getInitialProps(t):{},...j()}),j=()=>{const e=T(),t=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],n={},r={};return e.languages.forEach((n=>{r[n]={},t.forEach((t=>{r[n][t]=e.getResourceBundle(n,t)||{}}))})),n.initialI18nStore=r,n.initialLanguage=e.language,n};function V(e){let{children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s={},values:c,defaults:l,components:u,ns:d,i18n:p,t:f,shouldUnescape:h,...g}=e;const{i18n:w,defaultNS:m}=(0,r.useContext)(L)||{},y=p||w||T(),b=f||y&&y.t.bind(y);return F({children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s,values:c,defaults:l,components:u,ns:d||b&&b.ns||m||y&&y.options&&y.options.defaultNS,i18n:y,t:f,shouldUnescape:h,...g})}const G=(e,t,n,r)=>e.getFixedT(t,n,r),H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:a,defaultNS:o}=(0,r.useContext)(L)||{},i=n||a||T();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new $),!i){w("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>k(t)?t:S(t)&&k(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}i.options.react&&void 0!==i.options.react.wait&&w("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={..._(),...i.options.react,...t},{useSuspense:c,keyPrefix:l}=s;let u=e||o||i.options&&i.options.defaultNS;u=k(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.languages[0],a=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;const i=(e,n)=>{const r=t.services.backendConnector.state[`${e}|${n}`];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e)||!t.hasResourceBundle(r,e)&&t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages)&&(!i(r,e)||a&&!i(o,e)))}(e,t,n):(w("i18n.languages were undefined or empty",t.languages),!0)}(e,i,s))),p=((e,t,n,a)=>(0,r.useCallback)(G(e,t,n,a),[e,t,n,a]))(i,t.lng||null,"fallback"===s.nsMode?u:u[0],l),f=()=>p,h=()=>G(i,t.lng||null,"fallback"===s.nsMode?u:u[0],l),[g,m]=(0,r.useState)(f);let v=u.join();t.lng&&(v=`${t.lng}${v}`);const C=((e,t)=>{const n=(0,r.useRef)();return(0,r.useEffect)((()=>{n.current=e}),[e,t]),n.current})(v),P=(0,r.useRef)(!0);(0,r.useEffect)((()=>{const{bindI18n:e,bindI18nStore:n}=s;P.current=!0,d||c||(t.lng?b(i,t.lng,u,(()=>{P.current&&m(h)})):y(i,u,(()=>{P.current&&m(h)}))),d&&C&&C!==v&&P.current&&m(h);const r=()=>{P.current&&m(h)};return e&&i&&i.on(e,r),n&&i&&i.store.on(n,r),()=>{P.current=!1,e&&i&&e.split(" ").forEach((e=>i.off(e,r))),n&&i&&n.split(" ").forEach((e=>i.store.off(e,r)))}}),[i,v]),(0,r.useEffect)((()=>{P.current&&d&&m(f)}),[i,l,d]);const I=[g,i,d];if(I.t=g,I.i18n=i,I.ready=d,d)return I;if(!d&&!c)return I;throw new Promise((e=>{t.lng?b(i,t.lng,u,(()=>e())):y(i,u,(()=>e()))}))},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function a(a){let{forwardedRef:o,...i}=a;const[s,c,l]=H(e,{...i,keyPrefix:t.keyPrefix}),u={...i,t:s,i18n:c,tReady:l};return t.withRef&&o?u.ref=o:!t.withRef&&o&&(u.forwardedRef=o),(0,r.createElement)(n,u)}return a.displayName=`withI18nextTranslation(${v(n)})`,a.WrappedComponent=n,t.withRef?(0,r.forwardRef)(((e,t)=>(0,r.createElement)(a,Object.assign({},e,{forwardedRef:t})))):a}};function q(e){const{ns:t,children:n,...r}=e,[a,o,i]=H(t,r);return n(a,{i18n:o,lng:o.language},i)}function K(e){let{i18n:t,defaultNS:n,children:a}=e;const o=(0,r.useMemo)((()=>({i18n:t,defaultNS:n})),[t,n]);return(0,r.createElement)(L.Provider,{value:o},a)}const J=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{i18n:a}=n,{i18n:o}=(0,r.useContext)(L)||{},i=a||o||T();i.options&&i.options.isClone||(e&&!i.initializedStoreOnce&&(i.services.resourceStore.data=e,i.options.ns=Object.values(e).reduce(((e,t)=>(Object.keys(t).forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e)),i.options.ns),i.initializedStoreOnce=!0,i.isInitialized=!0),t&&!i.initializedLanguageOnce&&(i.changeLanguage(t),i.initializedLanguageOnce=!0))},Z=()=>function(e){function t(t){let{initialI18nStore:n,initialLanguage:a,...o}=t;return J(n,a),(0,r.createElement)(e,{...o})}return t.getInitialProps=U(e),t.displayName=`withI18nextSSR(${v(e)})`,t.WrappedComponent=e,t},Y=()=>"",Q=()=>"",X=()=>"",ee=()=>"",te=()=>"",ne=()=>""},570:(e,t,n)=>{n.r(t),n.d(t,{titleCase:()=>c});var r=/\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i,a=/[^\s:-]+|./g,o=/\s/,i=/.(?=[A-Z]|\..)/,s=/[A-Za-z0-9\u00C0-\u00FF]/;function c(e){for(var t,n="";null!==(t=a.exec(e));){var c=t[0],l=t.index;i.test(c)||r.test(c)&&0!==l&&l+c.length!==e.length||":"===e.charAt(l+c.length)&&!o.test(e.charAt(l+c.length+1))?n+=c:n+=c.replace(s,(function(e){return e.toUpperCase()}))}return n}},651:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(v[e])e=v[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:I(r[1]),g:I(r[2]),b:I(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:I(r[1]+""+r[1]),g:I(r[2]+""+r[2]),b:I(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(W(r.r)&&W(r.g)&&W(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):W(r.h)&&W(r.s)&&W(r.v)?(l=A(r.s),u=A(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):W(r.h)&&W(r.s)&&W(r.l)&&(l=A(r.s),d=A(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[x(_(r)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function w(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function m(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function b(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16)),x(_(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(w,[3])},tetrad:function(){return this._applyCombination(w,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:A(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var v=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(v);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function I(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function A(e){return e<=1&&(e=100*e+"%"),e}function _(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return I(e)/255}var M,T,R,O=(T="[\\s|\\(]+("+(M="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",R="[\\s|\\(]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")[,|\\s]+("+M+")\\s*\\)?",{CSS_UNIT:new RegExp(M),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{AppManifestType:()=>l,BookmarkItemContextMenuOptionType:()=>b,BrowserButtonType:()=>k,ColorSchemeOptionType:()=>w,CustomActionCallerType:()=>P,EnterpriseMainContextMenuOptionType:()=>y,GlobalContextMenuOptionType:()=>g,PageChangeEventType:()=>h,PageTabContextMenuOptionType:()=>m,PanelPosition:()=>f,SUPPORTED_LANGUAGES:()=>x,SaveButtonContextMenuOptionType:()=>S,SaveModalType:()=>A,ViewTabMenuOptionType:()=>v,WindowType:()=>C,getCurrentSync:()=>kn,init:()=>di,initDockCompanion:()=>ui,wrapSync:()=>vn});var e,t,r,i,s,c,l,u,d,p,f,h,g,w,m,y,b,v,k,S,C,P,I={};a.r(I),a.d(I,{getItem:()=>en,removeItem:()=>tn,setItem:()=>Xt}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(r||(r={})),function(e){e.Suggestion="suggestion"}(i||(i={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(s||(s={})),function(e){e.MultiSelect="MultiSelect"}(c||(c={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(l||(l={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(u||(u={})),function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(d||(d={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(p||(p={})),function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(f||(f={})),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(h||(h={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(g||(g={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(w||(w={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(m||(m={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(y||(y={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(b||(b={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(v||(v={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(k||(k={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(S||(S={})),function(e){e.Browser="browser",e.Platform="platform"}(C||(C={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(P||(P={}));const x=["en-US","ja-JP","zh-CN","ko-KR","ru-RU","de-DE","zh-Hant"];var A,_;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(A||(A={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(_||(_={}));const E="undefined"!=typeof window&&"undefined"!=typeof fin,M=("undefined"==typeof process||process.env,"undefined"!=typeof window),T=M&&"undefined"!=typeof indexedDB,R=M?window.origin:_.Local,O=E&&fin.me.uuid,W=E&&fin.me.name,D=E&&fin.me.entityType,B=(_.Local,_.Dev,_.Staging,"prod"===_.Prod),F=e=>e.startsWith("http://")||e.startsWith("https://")?e:R+e,N=F("https://workspace.openfin.co/workspace/21.0.10"),L=F("https://workspace.openfin.co/workspace/21.0.10"),$=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&F(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&F(WORKSPACE_DOCS_CLIENT_URL),"41.134.100.117"),U="21.0.10";var j,V;"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA,function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(j||(j={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(V||(V={}));const G={...j,...V};var H;!function(e){e.Search="search"}(H||(H={}));const z=G;async function q(){const{manifest:e,initialOptions:t}=await fin.Application.getCurrentSync().getInfo();return e?.platform.workspace||e?.platform.home||t?.workspace||t?.home||console.warn("getManifestOverrides: Missing Home development manifest overrides, using Desktop Owner Settings."),e?.platform.workspace?(JSON.stringify(e?.platform.workspace),e?.platform.workspace):e?.platform.home?(JSON.stringify(e?.platform.home),e?.platform.home):t?.workspace?(JSON.stringify(t?.workspace),t?.workspace):t?.home?(JSON.stringify(t?.home),t?.home):{}}const K=e=>fin.System.getSystemAppConfig(e);async function J(){const e="getDOSOverrides";if(!E)return console.warn(`${e}: the fin API was not available, returning no result`),{};try{let t=await K("workspace").catch((t=>{console.warn(`${e}: customConfig entry for SystemApp workspace not available in Desktop Owner Settings. ${t?.message}`)}));return t||(t=await K("home")),JSON.stringify(t),t}catch(t){if(!B)return{};if(!(t instanceof Error))throw t;console.warn(`${e}: Missing Workspace Desktop Owner Settings configuration, using defaults. ${t?.message}`)}return{}}let Z,Y;async function Q(){if(Z)return Z;if(!E)return M&&console.warn("getOverrides: The Fin API was not available. Returning an empty result."),{};const[e,t]=await Promise.all([J(),q()]);return Z={...t,...e,disableRuntimeValidation:t.disableRuntimeValidation||e.disableRuntimeValidation},Z}function X(e){Y=e}const ee=e=>e.replace(/\/$/,"");async function te(){const e=(await Q()).browserBaseUrl;if(e)try{const t=new URL(e);if(t.pathname.endsWith("/"))t.pathname=ee(t.pathname);else{if("/workspace"===t.pathname)return t.pathname+=`/${U}`,t.toString();console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url, with path: /workspace. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}}catch(t){console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}return Y??L}async function ne(e=!1){const t=await te()+z.Browser;return e?t:ee(t)}async function re(e=!1){const t=await te()+z.EnterpriseBrowser;return e?t:ee(t)}async function ae(){return await re()+"/landing/"}const oe=async(e,t=!1)=>e?re(t):ne(t);var ie,se;!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(ie||(ie={})),function(e){e.FinProtocol="fin-protocol"}(se||(se={}));const ce={uuid:O},le=(ie.Workspace,e=>{if(!E)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),ue=()=>le(ce);var de;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(de||(de={}));const pe=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function fe(e){if(!E)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const he={name:W,uuid:O};de.Home,ie.Workspace,de.Dock,ie.Workspace;const ge={name:de.Storefront,uuid:ie.Workspace};async function we(e){const t=fe(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.setAsForeground()}ie.Workspace,ie.Workspace;const me=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function ye(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>me(e.identity))));return e.filter(((e,n)=>t[n]))}const be=e=>fe(e).getOptions().then((()=>!0)).catch((()=>!1)),ve=()=>be(ge);function ke(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}async function Se(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,n)=>{const r=ke(e,n);return r>t.percentage?{percentage:r,monitor:n}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}const Ce=(e,t)=>{const n=e;return n.workspacePlatform||(n.workspacePlatform={}),n.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:n.workspacePlatform?._internalAutoShow||n.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===n.autoShow||n.autoShow},n.autoShow=!1,n},Pe=56,Ie=728,xe=150,Ae=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType},_e=e=>{const t=e?.defaultWindowOptions?.workspacePlatform?.windowType;return"enterprise"===t};let Ee;const Me=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise((e=>setTimeout(e,t)));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{r=void 0})),r)};var Te;!function(e){e.Top="top",e.Below="below"}(Te||(Te={}));const Re=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};Me((async function(e,t,n,r,a){const o=t.getBoundingClientRect(),i=await async function(e,t,n,r,a,o){const i=!!e&&fe(e),s=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,o);if(r===Te.Below){if(!i||await Re(i)){const e=i?(await Se(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:pe(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:pe(s).left-t/2,top:a?s.bottom-128:s.bottom+12,width:t,height:n}}if(!i||await Re(i)){const e=i?(await Se(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:pe(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:pe(s).left-t/2,top:s.top+20,width:t,height:n}}(e,o.width,o.height,n,r,a);if(0===i.width||0===i.height)return;const s=fe(he);await s.setBounds(i),await s.show();const c=setTimeout((()=>s.close()),r?5e3:3e3),l=()=>{clearTimeout(c),s.close()};if(e){const t=fe(e);t.on("bounds-changing",(()=>l())),t.on("blurred",(()=>l())),t.on("maximized",(()=>l())),t.on("minimized",(()=>l())),t.on("restored",(()=>l()))}}),10);const Oe=async e=>{const t=e&&await fe(e).getBounds();return{left:((n=(e?await Se(t):(await fin.System.getMonitorInfo()).primaryMonitor).availableRect).left+n.right)/2,top:(n.top+n.bottom)/2};var n},We=async(e,t,n=!1)=>{let r;if(n)r=await Oe(t);else{const e=fe(t),n=await e.getBounds();r=r??pe(n)}const{defaultHeight:a,defaultWidth:o}=e;return((e,t)=>{const n=t.width/2,r=t.height/2;return{left:Math.round(e.left-n),top:Math.round(e.top-r),width:t.width,height:t.height}})(r,{height:a,width:o})};async function De(e,t,n=!1){const r=t&&"maximized"===await fe(t).getState(),a=n||r||!t,o=await We(e,t,a);return await(async e=>{const t=await fin.System.getMonitorInfo(),n=[t.primaryMonitor,...t.nonPrimaryMonitors];for(const t of n)if(1===ke(e,t))return!1;return!0})(o)?(await fe(t).center(),We(e,t,a)):(console.warn("Response modal isn't off screen, not centering parent window"),o)}var Be;!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(Be||(Be={}));const Fe=async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||U,componentName:e,componentVersion:t.componentVersion||U,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})};let Ne=!1;const Le=new Map,$e=e=>{let t=Le.get(e.uuid);return t||(t=vn(e),t.once("closed",(()=>{Le.delete(e.uuid)})),Le.set(e.uuid,t)),t},Ue=async(e,t)=>{try{await e._raiseAnalytics([t])}catch(e){console.error("failed to raise analytics event",e)}},je=async e=>{await Ue($e(fin.me.identity),{source:"Browser",...e})};var Ve=a(847);const Ge=e=>e.replace(/[^\d,]/g,"").split(","),He=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,n=e[1]/255,r=e[2]/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=o-a;let s=0,c=0,l=0;return s=0===i?0:o===t?(n-r)/i%6:o===n?(r-t)/i+2:(t-n)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(o+a)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},ze=(e,t=!1)=>{const n=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let n;if(t.includes("rgb")){const e=Ge(t);e.length>3&&e.pop(),n=He(e).hue}if(t.includes("#")){const e=(e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,n=0,r=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,r=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,r=`0x${e[5]}${e[6]}`}return[+t,+n,+r]})(t);n=He(e).hue}t.includes("hsl")&&(n=Ge(t)[0]);const r=n?.toString();if(!r)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return r})(e);return t?{background1:`hsla(${n}, 0%, 100%, 1)`,background2:`hsla(${n}, 67%, 99%, 1)`,background3:`hsla(${n}, 26%, 96%, 1)`,background4:`hsla(${n}, 15%, 94%, 1)`,background5:`hsla(${n}, 10%, 88%, 1)`,background6:`hsla(${n}, 80%, 80%, 1)`}:{background1:`hsla(${n}, 8%, 7%, 1)`,background2:`hsla(${n}, 8%, 13%, 1)`,background3:`hsla(${n}, 9%, 15%, 1)`,background4:`hsla(${n}, 6%, 23%, 1)`,background5:`hsla(${n}, 21%, 28%, 1)`,background6:`hsla(${n}, 5%, 51%, 1)`}},qe=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{n[r]=t[r]?t[r]:e[r]})),n};var Ke=a(877),Je=a.n(Ke),Ze=a(67),Ye=a.n(Ze);const Qe={light:{symbol:Ye()?.src||""},dark:{symbol:Je()?.src||""}},Xe=M&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function et(e){let t;const n=new Set;return()=>{if(!E)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await Xe;const r={clientAPIVersion:U},a=await fin.InterApplicationBus.Channel.connect(e,{payload:r});return a.onDisconnection((async()=>{n.forEach((e=>e())),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),a})().then((e=>(e.addDisconnectionListener=e=>{n.add(e)},e))).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}var tt,nt;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(tt||(tt={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(nt||(nt={}));const rt=et("__of_workspace_protocol__");var at;et("__search-openfin-browser-home-topic__"),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(at||(at={}));const ot=async e=>fin.Platform.wrapSync(e).getClient(),it=async e=>{const t=await ot(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},st=async e=>(await it(e),ot(e)),ct=async e=>{const t=await it(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return ot(e)},lt={[Ve.Palette.brandPrimary]:"#0A76D3",[Ve.Palette.statusSuccess]:Ve.Color.functional1,[Ve.Palette.statusWarning]:Ve.Color.functional10,[Ve.Palette.statusCritical]:Ve.Color.functional7,[Ve.Palette.statusActive]:Ve.Color.functional3,[Ve.Palette.contentBackground1]:"#0A76D3",[Ve.Palette.contentBackground2]:"#000000",[Ve.Palette.contentBackground3]:"#000000",[Ve.Palette.contentBackground4]:"#000000",[Ve.Palette.contentBackground5]:"#000000"},ut={...lt,[Ve.Palette.background1]:Ve.Color.white,[Ve.Palette.background2]:Ve.Color.lightGray1,[Ve.Palette.background3]:Ve.Color.lightGray2,[Ve.Palette.background4]:Ve.Color.lightGray3,[Ve.Palette.background5]:Ve.Color.lightGray4,[Ve.Palette.background6]:Ve.Color.lightGray5,[Ve.Palette.brandSecondary]:Ve.Color.lightGray4,[Ve.Palette.inputBackground]:Ve.Color.lightGray3,[Ve.Palette.inputColor]:Ve.Color.darkGray5,[Ve.Palette.inputPlaceholder]:Ve.Color.darkGray2,[Ve.Palette.inputDisabled]:Ve.Color.neutralGray,[Ve.Palette.inputFocused]:Ve.Color.lightGray5,[Ve.Palette.inputBorder]:Ve.Color.neutralGray,[Ve.Palette.textDefault]:Ve.Color.darkGray5,[Ve.Palette.textHelp]:Ve.Color.darkGray3,[Ve.Palette.textInactive]:Ve.Color.neutralGray},dt={...lt,[Ve.Palette.background1]:Ve.Color.darkGray6,[Ve.Palette.background2]:Ve.Color.darkGray5,[Ve.Palette.background3]:Ve.Color.darkGray4,[Ve.Palette.background4]:Ve.Color.darkGray3,[Ve.Palette.background5]:Ve.Color.darkGray2,[Ve.Palette.background6]:Ve.Color.darkGray1,[Ve.Palette.brandSecondary]:Ve.Color.darkGray2,[Ve.Palette.inputBackground]:Ve.Color.darkGray1,[Ve.Palette.inputColor]:Ve.Color.white,[Ve.Palette.inputPlaceholder]:Ve.Color.lightGray5,[Ve.Palette.inputDisabled]:Ve.Color.neutralGray,[Ve.Palette.inputFocused]:Ve.Color.lightGray5,[Ve.Palette.inputBorder]:Ve.Color.neutralGray,[Ve.Palette.textDefault]:Ve.Color.white,[Ve.Palette.textHelp]:Ve.Color.lightGray5,[Ve.Palette.textInactive]:Ve.Color.neutralGray},pt=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...ut,brandPrimary:"#0A76D3",brandSecondary:Ve.Color.lightGray4,backgroundPrimary:Ve.Color.darkGray5},dark:{...dt,brandPrimary:"#0A76D3",brandSecondary:Ve.Color.darkGray2,backgroundPrimary:Ve.Color.darkGray5}}}],ft=e=>{const{background:t,foreground:n}=e;return{background:t,foreground:n??"#FFFFFF"}},ht=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||Qe[t].symbol}}),gt=async e=>{const{themes:t,selectedScheme:n}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;return t&&e.uuid===he.uuid?t:{themes:await vn(e).Theme.getThemes(),selectedScheme:await vn(e).Theme.getSelectedScheme()}})(e);var r,a;return(r=t?.length?t:pt,a=n,r.map((e=>{const t="palettes"in e?e.default:"dark",{light:n,dark:r}=(e=>{const{light:t,dark:n}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},r=qe(dt,n),a=qe(ut,t),o=((e,t)=>{const n={...e},r={...t};let a=t.backgroundPrimary?ze(t.backgroundPrimary,!0):{},o=e.backgroundPrimary?ze(e.backgroundPrimary):{};return a={...a,...r},o={...o,...n},{light:{...t,...a},dark:{...e,...o}}})(n,t),i={...(0,Ve.createTheme)({...r,...o?.dark}),brand:ht(e,"dark")},s={...(0,Ve.createTheme)({...a,...o?.light}),brand:ht(e,"light")},{light:c,dark:l}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const n={},r={};return t.forEach((t=>{const a=e.notificationIndicatorColors[t];"background"in a?(n[t]=ft(a),r[t]=ft(a)):(n[t]=ft(a.dark??a.light),r[t]=ft(a.light??a.dark))})),{light:r,dark:n}}return{light:null,dark:null}})(e);return i.notificationIndicatorColors=l,s.notificationIndicatorColors=c,{dark:i,light:s}})(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:r,light:n},defaultScheme:a??t}})))[0]},wt=async e=>{const t=await st(e||fin.me.identity),n=await t.dispatch(at.GetSelectedScheme,void 0);return n===w.System?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n},mt=async(e,t)=>{const n=await gt(fin.me.identity),r=await wt(fin.me.identity)===w.Dark,a=n?.theme;return a?.[r?w.Dark:w.Light]?.palette?.[e]||t};let yt;const bt=async e=>{yt||(yt=new TextEncoder);const t=yt.encode(e),n=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")};function vt(e){return e&&"object"==typeof e&&!Array.isArray(e)}function kt(e,...t){if(!t.length)return e;const n=t.shift();return vt(e)&&vt(n)&&Object.entries(n).forEach((([t,n])=>{if(vt(n))return e[t]||(e[t]={}),kt(e[t],n);e[t]=n})),kt(e,...t)}const St=n(72);var Ct,Pt=a.n(St);function It(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(Ct||(Ct={}));const xt=Ct;function At(){return localStorage.getItem(xt.MachineName)??"unknown"}let _t;async function Et(){return _t||(_t=await fin.System.getMachineId()),_t}const Mt=e=>{if(Array.isArray(e.workspacePlatform?.pages)&&(e.layoutSnapshot||e.layout)){const t=e.workspacePlatform.pages.find((e=>e.isActive));if(t){const n=e.layoutSnapshot?e.layoutSnapshot.layouts[t.layoutContainerKey]:e.layout;if(n)if(t.isLocked){const r=Tn(n,t.layout);t.layout=r,e.layout=r}else t.layout=n,e.layout=n}}return e};async function Tt(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const n=At();return{...t,snapshotDetails:{...t.snapshotDetails,machineId:await Et(),machineName:n}}}const Rt=async e=>({...e,layoutDetails:{machineId:await Et(),machineName:At()}}),Ot=async(e,t)=>({pageId:It(),title:e,layout:await Rt(t),isReadOnly:!1}),Wt=async e=>{const t=await Ot(e.title,An(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:xn(e.viewOptions)})))),{...e,...t}},Dt=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:r,dimensions:a}=n,o=await Ae(e);await t.replace({...n,settings:{...r,hasHeaders:!0,reorderEnabled:!0},dimensions:{...a,headerHeight:o?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}},Bt="of-workspace-",Ft=new class{mark(e){performance.mark(`${Bt}${e}`)}markStart(e){performance.mark(`${Bt}${e}-start`)}markEnd(e){performance.mark(`${Bt}${e}-end`)}markEndAndMeasure(e){performance.mark(`${Bt}${e}-end`);try{return performance.measure(`${Bt}${e}`,`${Bt}${e}-start`,`${Bt}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${Bt}${e}`);try{return performance.measure(`${Bt}${e}-measure`,`${Bt}${t}-start`,`${Bt}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(Bt)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${Bt}`,"").replace("-measure",""),duration:e.duration})))}},Nt=new Map,Lt=e=>(Nt.has(e)||Nt.set(e,et(e)),Nt.get(e)()),$t=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return Lt(n)};var Ut,jt,Vt,Gt,Ht;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(Ut||(Ut={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(jt||(jt={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(Vt||(Vt={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(Gt||(Gt={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(Ht||(Ht={}));const zt={...Ut,...jt,...Ht},qt=et(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),Kt=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await qt()).dispatch(Gt.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await qt()).dispatch(Gt.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await qt()).dispatch(Gt.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await qt()).dispatch(Gt.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await qt()).dispatch(Gt.DeleteBookmarkNode,e))(e)},getPages:async()=>(await ct(e)).dispatch(at.GetPagesForWindow,e),getPage:async t=>(await ct(e)).dispatch(at.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>kn().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await ct(e),a={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(at.AddPage,a)},removePage:async t=>(await ct(e)).dispatch(at.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>kn().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await ct(e),a=(await r.dispatch(at.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===n));if(!a)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);a.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[a],insertionIndex:t.index};return r.dispatch(at.AttachPagesToWindow,o)},setActivePage:async t=>(await ct(e)).dispatch(at.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await ct(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await ct(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await ct(e),(await $t(e)).dispatch(zt.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await $t(e)).dispatch(zt.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.AddDefaultPage,t)},_trackRemovedTab:async t=>(await ct(e)).dispatch(at.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await ct(e)).dispatch(at.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await ct(e)).dispatch(at.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await ct(e)).dispatch(at.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await ct(e)).dispatch(at.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await ct(e)).dispatch(at.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await ct(e)).dispatch(at.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await ct(e)).dispatch(at.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await ct(e)).dispatch(at.HandleRequestNavigationInternal,t)}),Jt=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>Kt(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${It()}`;return Ft.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{Ft.markAndMeasure("browser-window-shown",e)}))})(r),await ct(e);const a=await t.createWindow(n);return(e=>{Ft.markAndMeasure("browser-window-started",e)})(r),Kt(a.identity)},getAllAttachedPages:async()=>(await ct(e)).dispatch(at.GetAllAttachedPages,void 0),getAllWindows:async()=>(await ct(e),(await ye()).map((e=>Kt(e.identity)))),getUniquePageTitle:async t=>(await ct(e)).dispatch(at.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await ct(e)).dispatch(at.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await ct(e)).dispatch(at.GetPageByViewIdentity,t)}},Zt=e=>({createPage:async t=>(await ct(e)).dispatch(at.CreateSavedPageInternal,t),deletePage:async t=>(await ct(e)).dispatch(at.DeleteSavedPageInternal,t),updatePage:async t=>(await ct(e)).dispatch(at.UpdateSavedPageInternal,t),getPage:async t=>(await ct(e)).dispatch(at.GetSavedPage,t),getPages:async t=>(await ct(e)).dispatch(at.GetSavedPages,t),savePage:async t=>(await ct(e)).dispatch(at.SavePage,t),createWorkspace:async t=>(await st(e)).dispatch(at.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=kn(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await st(e)).dispatch(at.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await st(e)).dispatch(at.UpdateSavedWorkspace,t),getWorkspace:async t=>(await st(e)).dispatch(at.GetSavedWorkspace,t),getWorkspaces:async t=>(await st(e)).dispatch(at.GetSavedWorkspaces,t),saveWorkspace:async t=>(await st(e)).dispatch(at.SaveWorkspace,t),getDockProviderConfig:async t=>(await st(e)).dispatch(at.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await st(e)).dispatch(at.SaveDockProviderConfig,t)});var Yt;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(Yt||(Yt={}));const Qt=et("of-workspace-notifications-sync"),Xt=(e,t)=>{localStorage.setItem(`${O}-${e}`,t)},en=e=>localStorage.getItem(`${O}-${e}`),tn=e=>localStorage.removeItem(`${O}-${e}`),nn=w.System,rn=e=>Object.entries(e).reduce(((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`),""),an=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1}),on=new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(xt.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(xt.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(xt.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=rn({...e,...an(e,"light")}),this.darkPaletteVars=rn({...t,...an(t,"dark")})}}setScheme(e){this.providerStorage.setItem(xt.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(xt.SelectedColorScheme)&&this.providerStorage.setItem(xt.SelectedColorScheme,nn),this.providerStorage.getItem(xt.SelectedColorScheme)}}(I),sn=()=>on,cn=e=>({getThemes:async()=>(await st(e)).dispatch(at.GetThemes,void 0),setSelectedScheme:async t=>(await st(e)).dispatch(at.SetSelectedScheme,t),getSelectedScheme:async()=>(await st(e)).dispatch(at.GetSelectedScheme,void 0)}),ln=async e=>{const t=await rt();await t.dispatch("set-selected-scheme",e)},un=async e=>{const t=await Qt();await t.dispatch(Yt.UpdatePlatformThemeScheme,{scheme:e})},dn=async e=>{const t=await ye();return Promise.all(t.map((async t=>{const n=await $t(t.identity);await n.dispatch(zt.SetSelectedScheme,e)})))},pn=async e=>{const t=new Array,n=fin.Application.getCurrentSync(),r=await n.getViews();for(const e of r)-1!==e.identity.name.indexOf(de.BrowserAddressSearchPrefix)&&t.push(e.identity),-1!==(await e.getOptions()).url.indexOf(z.EnterpriseBrowser)&&t.push(e.identity);return Promise.all(t.map((async t=>{const n=await $t(t,"theme-change-listener");await n.dispatch(zt.SetSelectedScheme,e)})))},fn=async e=>{const t=await async function(){return(await fin.Application.getCurrentSync().getChildWindows()).filter((e=>e.identity.name.startsWith(de.BrowserMenu)))}();return Promise.all(t.map((async t=>{const n=await $t(t.identity);await n.dispatch(zt.SetSelectedScheme,e)})))},hn=async e=>{const t=await $t({uuid:he.uuid,name:de.EnterpriseContextMenu});await t.dispatch(zt.SetSelectedScheme,e)},gn=async e=>{const t=await $t({uuid:he.uuid,name:de.EnterpriseBookmarkDialogWindow});await t.dispatch(zt.SetSelectedScheme,e).catch((()=>{}))},wn=async e=>{const t=await $t({uuid:he.uuid,name:de.DropdownMenu});await t.dispatch(zt.SetSelectedScheme,e).catch((()=>{}))},mn=async e=>{const t=await $t({uuid:he.uuid,name:de.DockCompanion});await t.dispatch(zt.SetSelectedScheme,e).catch((()=>{}))},yn=async e=>{try{const t=sn();t.setScheme(e),await Promise.all([t.trySynchronizeWorkspaceStorage(),pn(e),un(e),dn(e),fn(e),hn(e),ln(e),gn(e),wn(e),mn(e)])}catch(e){console.error("failed to set the selected scheme: ",e)}},bn=()=>{try{return sn().getScheme()}catch(e){console.error("failed to get the selected scheme: ",e)}},vn=e=>{const t=fin.Platform.wrapSync(e);let n;return Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:O,name:W,entityType:D||"unknown"}),(await st(e)).dispatch(at.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await st(e),a={actionId:t,payload:{...n,callerType:n.callerType||P.API}};return r.dispatch(at.InvokeCustomActionInternal,a)},_requestQuitPlatformDialog:async t=>(await st(e)).dispatch(at.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await st(e)).dispatch(at.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await st(e)).dispatch(at.ApplyWorkspace,{...t,options:n}),setActiveWorkspace:async t=>(await st(e)).dispatch(at.SetActiveWorkspace,t),getLanguage:async()=>(await st(e)).dispatch(at.GetLanguage),_getLanguageResources:async()=>(await st(e)).dispatch(at.GetLanguageResourcesInternal),setLanguage:async t=>(await st(e)).dispatch(at.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await it(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await st(e)).dispatch(at.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await st(e)).dispatch(at.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await st(e)).dispatch(at.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await st(e)).dispatch(at.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await st(e)).dispatch(at.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await st(e)).dispatch(at.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await st(e)).dispatch(at.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await st(e)).dispatch(at.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await st(e)).dispatch(at.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await st(e)).dispatch(at.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await st(e)).dispatch(at.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await st(e)).dispatch(at.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await st(e)).dispatch(at.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await st(e)).dispatch(at.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await st(e)).dispatch(at.FocusAndExpandSearchInternal),Theme:cn(e),Browser:Jt(e),Storage:Zt(e)})},kn=()=>vn(fin.me.identity),Sn={contextMenuOptions:{enabled:!0,template:["spellCheck","separator","print","separator","cut","copy","paste","undo","redo","selectAll","inspect","reload"]},downloadShelf:{enabled:!0}};function Cn(e,t){return kt({},Sn,t,e)}const Pn="internal-generated-view-",In=(e,t)=>e.content?{...e,content:e.content.map((e=>In(e,t)))}:{...e,componentState:t(e.componentState)},xn=e=>({...e,name:void 0}),An=e=>{const t={...e};return In(t,xn)},_n=e=>{const t={...e};return In(t,(e=>e.name&&e.name.startsWith(Pn)?xn(e):e))},En=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const n=En(e.content);t.push(...n)})),t},Mn=async(e,t,n=he)=>{let r;return await me(n)&&(r=(await fe(n).getOptions()).layout||{settings:{}}),{...r,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map,new Map;const Tn=(e,t)=>{const n=En(t.content);return{...In(e,(e=>{const t=n.find((t=>t._internalWorkspaceData?.viewIdentifier===e._internalWorkspaceData?.viewIdentifier)),r=t?t.isClosable:e.isClosable;return{...e,isClosable:r}})),settings:t.settings}},Rn=e=>e?En(e).length:0,On=(Pt()((async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?En(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&kn().Browser.wrapSync(he).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=kn().Browser.wrapSync(he);if("singleView"!==e.attachedPageType){const r=await Wt(e),a=await kn().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=Dt({...he,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}}),50,{leading:!1,trailing:!0}),n(434)),Wn=n(232);var Dn=a.n(Wn);const Bn=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":" Web ","contextMenu.openViews":" Web ","contextMenu.reload":"Reload CN","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate CN","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab CN","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value CN","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page CN","enterpriseDefaultPageTitle":"Untitled Supertab CN","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}} ","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. CN","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":" {{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete CN","appResults.header":"Featured Content CN","recentlyClosed.header":"Recently Closed CN","landingPage.subheader":"Apps and websites selected by an admin will show here CN","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":" {{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":"","global.supertab":"Supertab CN","global.tab":"Tab CN","bookmarks.editBookmark":"Edit Bookmark CN","bookmarks.bookmarkAdded":"Bookmark added CN","bookmarks.done":"Done CN","bookmarks.remove":"Remove CN","bookmarks.bookmarksPanel":"Bookmarks Panel CN","bookmarks.closePanel":"Close Bookmarks Panel CN","bookmarks.bookmarks":"Bookmarks CN","bookmarks.allBookmarks":"All Bookmarks CN","bookmarks.favorites":"Favorites CN","bookmarks.searchBookmarks":"Search Bookmarks CN","bookmarks.clearSearchInput":"Clear Search Input CN","bookmarks.createFolder":"Create New Folder CN","bookmarks.exitFolder":"Exit Folder CN","bookmarks.newFolder":"New Folder CN","bookmarks.namedFolder":"{{name}} Folder CN","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings CN","bookmarks.folderSettings":"{{name}} Folder Settings CN","bookmarks.noResultsFound":"No results found CN","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search CN","bookmarks.nothingToShow":"Nothing to show yet CN","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder CN","bookmarks.resultsFoundIn":"Results found in {{name}} CN","bookmarks.resultsInOtherFolders":"Results found in other folders CN","bookmarks.allResultsFoundIn":"All results found in CN","bookmarks.editName":"Edit Name CN","bookmarks.move":"Move CN","bookmarks.bookmarkAddedTitle":"Bookmark Added CN","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" CN","bookmarks.bookmarkEditedTitle":"Bookmark Edited CN","enterpriseContextMenu.saveSupertab":"Save Supertab CN","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... CN","enterpriseContextMenu.duplicate":"Duplicate CN","enterpriseContextMenu.deleteSupertab":"Delete Supertab CN","enterpriseContextMenu.newTab":"New Tab CN","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As CN","enterpriseSaveModal.renameSupertab":"Rename CN","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. CN","enterpriseSaveModal.closeTab":"Close Tab CN","enterpriseSaveModal.closeSupertab":"Close Supertab CN","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? CN","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. CN","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? CN","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. CN","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved CN","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. CN","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted CN","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. CN","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab CN","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab CN","enterpriseCommandBar.switchToSupertab":"Switch to Supertab CN","enterpriseCommandBar.goTo":"Go to {{type}} CN","enterpriseCommandBar.viewMore":"View More CN","contextMenu.quitEnterpriseBrowser":"Quit CN"}'),Fn=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload ZH","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate ZH","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab ZH","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value ZH","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page ZH","enterpriseDefaultPageTitle":"Untitled Supertab ZH","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"APP ","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":" OS ","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. ZH","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete ZH","appResults.header":"Featured Content ZH","recentlyClosed.header":"Recently Closed ZH","landingPage.subheader":"Apps and websites selected by an admin will show here ZH","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":" Esc ","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":" Esc ","global.supertab":"Supertab ZH","global.tab":"Tab ZH","bookmarks.editBookmark":"Edit Bookmark ZH","bookmarks.bookmarkAdded":"Bookmark added ZH","bookmarks.done":"Done ZH","bookmarks.remove":"Remove ZH","bookmarks.bookmarksPanel":"Bookmarks Panel ZH","bookmarks.closePanel":"Close Bookmarks Panel ZH","bookmarks.bookmarks":"Bookmarks ZH","bookmarks.allBookmarks":"All Bookmarks ZH","bookmarks.favorites":"Favorites ZH","bookmarks.searchBookmarks":"Search Bookmarks ZH","bookmarks.clearSearchInput":"Clear Search Input ZH","bookmarks.createFolder":"Create New Folder ZH","bookmarks.exitFolder":"Exit Folder ZH","bookmarks.newFolder":"New Folder ZH","bookmarks.namedFolder":"{{name}} Folder ZH","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings ZH","bookmarks.folderSettings":"{{name}} Folder Settings ZH","bookmarks.noResultsFound":"No results found ZH","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search ZH","bookmarks.nothingToShow":"Nothing to show yet ZH","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder ZH","bookmarks.resultsFoundIn":"Results found in {{name}} ZH","bookmarks.resultsInOtherFolders":"Results found in other folders ZH","bookmarks.allResultsFoundIn":"All results found in ZH","bookmarks.editName":"Edit Name ZH","bookmarks.move":"Move ZH","bookmarks.bookmarkAddedTitle":"Bookmark Added ZH","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" ZH","bookmarks.bookmarkEditedTitle":"Bookmark Edited ZH","enterpriseContextMenu.saveSupertab":"Save Supertab ZH","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... ZH","enterpriseContextMenu.duplicate":"Duplicate ZH","enterpriseContextMenu.deleteSupertab":"Delete Supertab ZH","enterpriseContextMenu.newTab":"New Tab ZH","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As ZH","enterpriseSaveModal.renameSupertab":"Rename ZH","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. ZH","enterpriseSaveModal.closeTab":"Close Tab ZH","enterpriseSaveModal.closeSupertab":"Close Supertab ZH","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? ZH","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. ZH","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? ZH","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. ZH","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved ZH","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. ZH","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted ZH","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. ZH","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab ZH","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab ZH","enterpriseCommandBar.switchToSupertab":"Switch to Supertab ZH","enterpriseCommandBar.goTo":"Go to {{type}} ZH","enterpriseCommandBar.viewMore":"View More ZH","contextMenu.quitEnterpriseBrowser":"Quit ZH"}'),Nn=JSON.parse('{"contextMenu.newWindow":"New Window","contextMenu.newPage":"New Page","contextMenu.restore":"Restore to Last Saved Changes","contextMenu.switchWorkspace":"Switch Workspace","contextMenu.appearance":"Appearance","contextMenu.saveWorkspace":"Save Workspace","contextMenu.saveWorkspaceAs":"Save Workspace As...","contextMenu.renameWorkspace":"Rename Workspace","contextMenu.deleteWorkspace":"Delete Workspace","contextMenu.downloads":"Downloads","contextMenu.savePage":"Save Page","contextMenu.savePageAs":"Save Page As...","contextMenu.print":"Print...","contextMenu.printScreen":"Print Screen","contextMenu.closeWindow":"Close Window","contextMenu.openStorefront":"Open Storefront","contextMenu.quitPlatform":"Quit {{platformLabel}}","contextMenu.newView":"New View","contextMenu.openView":"Open View with Default Web Browser","contextMenu.openViews":"Open Views with Default Web Browser","contextMenu.reload":"Reload","contextMenu.reloadView":"Reload View","contextMenu.reloadViews":"Reload Views","contextMenu.duplicate":"Duplicate","contextMenu.duplicateView":"Duplicate View","contextMenu.duplicateViews":"Duplicate Views","contextMenu.addView":"Add View to Channel","contextMenu.addViews":"Add Views to Channel","contextMenu.removeView":"Remove View from Channel","contextMenu.removeViews":"Remove Views from Channel","contextMenu.closeView":"Close View","contextMenu.closeViews":"Close Views","contextMenu.closeTab":"Close Tab","contextMenu.duplicatePage":"Duplicate Page","contextMenu.submenu.print":"Print","contextMenu.submenu.printAll":"Print All","saveMenu.saveWorkspaceAs":"Save Workspace As","saveMenu.savePageAs":"Save Page As","saveModal.enterValue":"Please enter a value","saveModal.alreadyExists":"{{title}} already exists.","saveModal.pleaseEnterValidName":"Please enter a valid name","saveModal.renamePage":"Rename Page","saveModal.closePage":"Close Page","saveModal.discardChanges":"Discard Changes","saveModal.discardAll":"Discard All","saveModal.saveAll":"Save All","saveModal.savePagesCount":"Save ({{count}}) pages before closing?","defaultPageTitle":"Untitled Page","enterpriseDefaultPageTitle":"Untitled Supertab","addNewPage":"New Page","addNewTab":"Add New Tab","addNewView":"New View","restoreModal":"Are you sure you want to restore to last saved changes?","modal.discardWarning":"Any unsaved changes will be discarded","modal.discardPageWarning":"Any unsaved changes to this page will be lost.","modal.saveChangesPrompt":"Save changes before closing?","modal.pageClose":"Page Close","switchWorkspaceModal":"Are you sure you want to switch to {{workspace}}?","switchWorkspaceModal.warning":"Any unsaved changes will be discarded","deleteWorkspaceModal":"Are you sure you want to permanently delete this workspace?","replaceWorkspaceModal.warning":"A Workspace with the name {{workspace}} already exists. Do you want to replace it?","replaceWorkspaceModal.warning.body":"A workspace with the same name already exists. Replacing it will overwrite its current contents.","replaceWorkspaceModal.replace":"Replace","closePlatform":"Close the platform","closePlatform.workspace":"Close the {{workspace}} Platform","closePlatform.warning":"Closing a platform will close any workspaces, apps or any processes that are running.","back":"Back","forward":"Forward","reload":"Reload","green":"Green","purple":"Purple","orange":"Orange","red":"Red","pink":"Pink","yellow":"Yellow","theme.light":"Light","theme.dark":"Dark","theme.system":"Sync with OS setting","toolbar.hideTabs":"Hide Tabs","toolbar.showTabs":"Show Tabs","toolbar.lock":"Lock","toolbar.unlock":"Unlock","toolbar.colorLinking":"Color Linking","toolbar.changeLayout":"Change Layout","toolbar.saveMenu":"Save Menu","toolbar.maximizeWindow":"Maximize Window","toolbar.restoreWindow":"Restore Window","toolbar.minimizeWindow":"Minimize Window","changeLayout.fullWidth":"Full Width","changeLayout.columns":"Columns","changeLayout.Rows":"Rows","changeLayout.Grid":"Grid","successIndicator.workspaceSwitched":"Workspace Switched","successIndicator.hidden":"Tabs are Hidden","successIndicator.shown":"Tabs are Shown","successIndicator.locked":"Page is Locked","successIndicator.unlocked":"Page is Unlocked","successIndicator.workspaceSaved":"Workspace saved","successIndicator.workspaceSavedAs":"Workspace saved as {{workspace}}","successIndicator.workspaceRenamed":"Workspace renamed","successIndicator.pageSaved":"Page Saved","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved.","successIndicator.pageCopySaved":"Page saved as {{title}}","successIndicator.pageRenamed":"Page renamed","successIndicator.contextGroupApplied":"Context group applied","successIndicator.namedContextGroupApplied":"{{colorName}} context group applied","successIndicator.viewRemoved":"View removed from context group","successIndicator.viewsRemoved":"Views removed from context group","successIndicator.layoutApplied":"{{layoutName}} layout applied","successIndicator.workspaceDeleted":"Workspace deleted","errorIndicator.pageSaveFailed":"Page failed to save","errorIndicator.workspaceSaveFailed":"Workspace failed to save","errorIndicator.failedToDuplicatePage":"Failed to duplicate Page","infoIndicator.colorLinkAttempt":"We attempted to color link this tab, but the site/content owner has not enabled it yet","global.cancel":"Cancel","global.confirm":"Confirm","global.save":"Save","global.delete":"Delete","appResults.header":"Featured Content","recentlyClosed.header":"Recently Closed","landingPage.subheader":"Apps and websites selected by an admin will show here","aria.openBrowser":"Open Browser Menu","aria.browserTabs":"Browser Tabs","aria.viewTab":"View Tab for {{title}}","aria.closePage":"Close Page Tab Button for {{title}}","aria.closeTab":"Close Tab {{title}}","aria.title":"Title","aria.closeContextGroup":"Use escape to close context group selection dialog","aria.colorLinking":"Show or hide color linking","aria.applyColorLinking":"Please select a view to apply color linking","aria.assignColorLinkingCurrentView":"Current view assigned to {{name}} context group","aria.assignColorLinkingCurrentViews":"Current views assigned to {{name}} context group","aria.setColorLinkingActiveView":"Set active view to {{name}} context group","aria.setColorLinkingActiveViews":"Set active views to {{name}} context group","aria.escapeLayoutDialog":"Use escape to close change layout dialog","global.supertab":"Supertab","global.tab":"Tab","bookmarks.editBookmark":"Edit Bookmark","bookmarks.bookmarkAdded":"Bookmark added","bookmarks.done":"Done","bookmarks.remove":"Remove","bookmarks.bookmarksPanel":"Bookmarks Panel","bookmarks.closePanel":"Close Bookmarks Panel","bookmarks.bookmarks":"Bookmarks","bookmarks.allBookmarks":"All Bookmarks","bookmarks.favorites":"Favorites","bookmarks.searchBookmarks":"Search Bookmarks","bookmarks.clearSearchInput":"Clear Search Input","bookmarks.createFolder":"Create New Folder","bookmarks.exitFolder":"Exit Folder","bookmarks.newFolder":"New Folder","bookmarks.namedFolder":"{{name}} Folder","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings","bookmarks.folderSettings":"{{name}} Folder Settings","bookmarks.noResultsFound":"No results found","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search","bookmarks.nothingToShow":"Nothing to show yet","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder","bookmarks.resultsFoundIn":"Results found in {{name}}","bookmarks.resultsInOtherFolders":"Results found in other folders","bookmarks.allResultsFoundIn":"All results found in","bookmarks.editName":"Edit Name","bookmarks.move":"Move","bookmarks.bookmarkAddedTitle":"Bookmark Added","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\"","bookmarks.bookmarkEditedTitle":"Bookmark Edited","enterpriseContextMenu.saveSupertab":"Save Supertab","enterpriseContextMenu.saveSupertabAs":"Save Supertab As...","enterpriseContextMenu.duplicate":"Duplicate","enterpriseContextMenu.deleteSupertab":"Delete Supertab","enterpriseContextMenu.newTab":"New Tab","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As","enterpriseSaveModal.renameSupertab":"Rename","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab.","enterpriseSaveModal.closeTab":"Close Tab","enterpriseSaveModal.closeSupertab":"Close Supertab","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing?","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost.","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab?","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent.","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted.","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab","enterpriseCommandBar.switchToSupertab":"Switch to Supertab","enterpriseCommandBar.goTo":"Go to {{type}}","enterpriseCommandBar.viewMore":"View More","contextMenu.quitEnterpriseBrowser":"Quit","dock.removeFavorite":"Remove"}'),Ln=JSON.parse('{"contextMenu.newWindow":"Neues Fenster","contextMenu.newPage":"Neue Seite","contextMenu.restore":"Wiederherstellen der zuletzt gespeicherten nderungen","contextMenu.switchWorkspace":"Workspace wechseln","contextMenu.appearance":"Erscheinungsbild","contextMenu.saveWorkspace":"Workspace speichern","contextMenu.saveWorkspaceAs":"Workspace speichern unter...","contextMenu.renameWorkspace":"Workspace umbenennen","contextMenu.deleteWorkspace":"Workspace lschen","contextMenu.downloads":"Downloads","contextMenu.savePage":"Seite speichern","contextMenu.savePageAs":"Seite speichern unter...","contextMenu.print":"Drucken...","contextMenu.printScreen":"Bildschirmansicht drucken","contextMenu.closeWindow":"Fenster schlieen","contextMenu.openStorefront":"Schaufenster ffnen","contextMenu.quitPlatform":"Plattform verlassen","contextMenu.newView":"Neue Ansicht","contextMenu.openView":"Ansicht mit Standard-Webbrowser ffnen","contextMenu.openViews":"Ansichten mit Standard-Webbrowser ffnen","contextMenu.reload":"Reload DE","contextMenu.reloadView":"Ansicht neu laden","contextMenu.reloadViews":"Ansichten neu laden","contextMenu.duplicate":"Duplicate DE","contextMenu.duplicateView":"Ansicht duplizieren","contextMenu.duplicateViews":"Ansichten duplizieren","contextMenu.addView":"Ansicht zum Channel hinzufgen","contextMenu.addViews":"Ansichten zum Channel hinzufgen","contextMenu.removeView":"Ansicht aus dem Channel entfernen","contextMenu.removeViews":"Ansichten aus dem Channel entfernen","contextMenu.closeView":"Ansicht schlieen","contextMenu.closeViews":"Ansichten schlieen","contextMenu.closeTab":"Close Tab DE","contextMenu.duplicatePage":"Seite duplizieren","contextMenu.submenu.print":"Drucken","contextMenu.submenu.printAll":"Alle drucken","saveMenu.saveWorkspaceAs":"Workspace speichern unter","saveMenu.savePageAs":"Seite speichern unter","saveModal.enterValue":"Please enter a value DE","saveModal.alreadyExists":"{{title}} existiert bereits.","saveModal.pleaseEnterValidName":"Bitte geben Sie einen gltigen Namen ein","saveModal.renamePage":"Seite umbenennen","saveModal.closePage":"Seite schlieen","saveModal.discardChanges":"nderungen verwerfen","saveModal.discardAll":"Alle verwerfen","saveModal.saveAll":"Alle speichern","saveModal.savePagesCount":"({{count}}) Seiten vor dem Schlieen speichern?","defaultPageTitle":"Untitled Page DE","enterpriseDefaultPageTitle":"Untitled Supertab DE","addNewPage":"Neue Seite hinzufgen","addNewTab":"Neuen Tab hinzufgen","addNewView":"Neue Ansicht","restoreModal":"Sind Sie sicher, dass Sie die zuletzt gespeicherten nderungen wiederherstellen wollen?","modal.discardWarning":"Alle nicht gespeicherten nderungen werden verworfen","modal.discardPageWarning":"Alle nicht gespeicherten nderungen auf dieser Seite gehen verloren.","modal.saveChangesPrompt":"nderungen vor dem Schlieen speichern?","modal.pageClose":"Seite schlieen","switchWorkspaceModal":"Sind Sie sicher, dass Sie zu {{workspace}}wechseln wollen?","switchWorkspaceModal.warning":"Alle nicht gespeicherten nderungen werden verworfen","deleteWorkspaceModal":"Sind Sie sicher, dass Sie diesen Workspace dauerhaft lschen wollen?","replaceWorkspaceModal.warning":"Ein Workspace mit dem Namen {{workspace}} existiert bereits. Mchten Sie ihn ersetzen?","replaceWorkspaceModal.warning.body":"Ein Workspace mit demselben Namen existiert bereits. Wenn Sie ihn ersetzen, wird der aktuelle Inhalt berschrieben.","replaceWorkspaceModal.replace":"Ersetzen","closePlatform":"Plattform schlieen","closePlatform.workspace":"Die {{workspace}} Plattform schlieen","closePlatform.warning":"Wenn Sie eine Plattform schlieen, werden alle Workspaces, Apps und laufenden Prozesse beendet.","back":"Zurck","forward":"Weiter","reload":"Neu laden","green":"Grn","purple":"Lila","orange":"Orange","red":"Rot","pink":"Pink","yellow":"Gelb","theme.light":"Hell","theme.dark":"Dunkel","theme.system":"Synchronisierung mit OS-Einstellung","toolbar.hideTabs":"Tabs ausblenden","toolbar.showTabs":"Tabs anzeigen","toolbar.lock":"Sperren","toolbar.unlock":"Freischalten","toolbar.colorLinking":"Farbverknpfung","toolbar.changeLayout":"Layout ndern","toolbar.saveMenu":"Men speichern","toolbar.maximizeWindow":"Fenster maximieren","toolbar.restoreWindow":"Fenster wiederherstellen","toolbar.minimizeWindow":"Fenster minimieren","changeLayout.fullWidth":"Volle Breite","changeLayout.columns":"Spalten","changeLayout.Rows":"Zeilen","changeLayout.Grid":"Raster","successIndicator.workspaceSwitched":"Workspace gewechselt","successIndicator.hidden":"Tabs sind ausgeblendet","successIndicator.shown":"Tabs werden angezeigt","successIndicator.locked":"Seite ist gesperrt","successIndicator.unlocked":"Seite ist freigeschaltet","successIndicator.workspaceSaved":"Workspace gespeichert","successIndicator.workspaceSavedAs":"Workspace gespeichert als {{workspace}}","successIndicator.workspaceRenamed":"Workspace umbenannt","successIndicator.pageSaved":"Seite gespeichert","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. DE","successIndicator.pageCopySaved":"Seite gespeichert als {{title}}","successIndicator.pageRenamed":"Seite umbenannt","successIndicator.contextGroupApplied":"Angewandte Kontextgruppe","successIndicator.namedContextGroupApplied":"{{colorName}} angewandte Kontextgruppe","successIndicator.viewRemoved":"Ansicht aus der Kontextgruppe entfernt","successIndicator.viewsRemoved":"Ansichten aus der Kontextgruppe entfernt","successIndicator.layoutApplied":"{{layoutName}} angewandtes Layout","successIndicator.workspaceDeleted":"Workspace gelscht","errorIndicator.pageSaveFailed":"Seite konnte nicht gespeichert werden","errorIndicator.workspaceSaveFailed":"Workspace konnte nicht gespeichert werden","errorIndicator.failedToDuplicatePage":"Seite kann nicht dupliziert werden","infoIndicator.colorLinkAttempt":"Wir haben versucht, diesem Tab eine Farbe zuordnen, aber der Eigentmer der Website/des Inhalts hat sie noch nicht aktiviert","global.cancel":"Abbrechen","global.confirm":"Besttigen","global.save":"Speichern","global.delete":"Delete DE","appResults.header":"Featured Content DC","recentlyClosed.header":"Recently Closed DC","landingPage.subheader":"Apps and websites selected by an admin will show here DE","aria.openBrowser":"Browser-Men ffnen","aria.browserTabs":"Browser-Tab","aria.viewTab":"Tab Ansicht fr {{title}}","aria.closePage":"Button Seite schlieen fr {{title}}","aria.closeTab":"Tab schlieen {{title}}","aria.title":"Bezeichnung","aria.closeContextGroup":"Verwenden Sie die Escape-Taste, um den Dialog zur Auswahl von Kontextgruppen zu schlieen","aria.colorLinking":"Farbverknpfung ein- oder ausblenden","aria.applyColorLinking":"Bitte whlen Sie eine Ansicht, um die Farbverknpfung anzuwenden","aria.assignColorLinkingCurrentView":"Aktuelle Ansicht, die der Kontextgruppe {{name}} zugeordnet ist","aria.assignColorLinkingCurrentViews":"Aktuelle Ansichten, die der Kontextgruppe {{name}} zugeordnet sind","aria.setColorLinkingActiveView":"Aktive Ansicht auf die Kontextgruppe {{name}} setzen","aria.setColorLinkingActiveViews":"Aktive Ansichten auf die Kontextgruppe {{name}} setzen","aria.escapeLayoutDialog":"Verwenden Sie die Escape-Taste, um den Dialog zur Layoutnderung zu schlieen","global.supertab":"Supertab DE","global.tab":"Tab DE","bookmarks.editBookmark":"Edit Bookmark DE","bookmarks.bookmarkAdded":"Bookmark added DE","bookmarks.done":"Done DE","bookmarks.remove":"Remove DE","bookmarks.bookmarksPanel":"Bookmarks Panel DE","bookmarks.closePanel":"Close Bookmarks Panel DE","bookmarks.bookmarks":"Bookmarks DE","bookmarks.allBookmarks":"All Bookmarks DE","bookmarks.favorites":"Favorites DE","bookmarks.searchBookmarks":"Search Bookmarks DE","bookmarks.clearSearchInput":"Clear Search Input DE","bookmarks.createFolder":"Create New Folder DE","bookmarks.exitFolder":"Exit Folder DE","bookmarks.newFolder":"New Folder DE","bookmarks.namedFolder":"{{name}} Folder DE","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings DE","bookmarks.folderSettings":"{{name}} Folder Settings DE","bookmarks.noResultsFound":"No results found DE","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search DE","bookmarks.nothingToShow":"Nothing to show yet DE","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder DE","bookmarks.resultsFoundIn":"Results found in {{name}} DE","bookmarks.resultsInOtherFolders":"Results found in other folders DE","bookmarks.allResultsFoundIn":"All results found in DE","bookmarks.editName":"Edit Name DE","bookmarks.move":"Move DE","bookmarks.bookmarkAddedTitle":"Bookmark Added DE","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" DE","bookmarks.bookmarkEditedTitle":"Bookmark Edited DE","enterpriseContextMenu.saveSupertab":"Save Supertab DE","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... DE","enterpriseContextMenu.duplicate":"Duplicate DE","enterpriseContextMenu.deleteSupertab":"Delete Supertab DE","enterpriseContextMenu.newTab":"New Tab DE","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As DE","enterpriseSaveModal.renameSupertab":"Rename DE","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. DE","enterpriseSaveModal.closeTab":"Close Tab DE","enterpriseSaveModal.closeSupertab":"Close Supertab DE","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? DE","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. DE","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? DE","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. DE","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved DE","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. DE","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted DE","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. DE","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab DE","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab DE","enterpriseCommandBar.switchToSupertab":"Switch to Supertab DE","enterpriseCommandBar.goTo":"Go to {{type}} DE","enterpriseCommandBar.viewMore":"View More DE","contextMenu.quitEnterpriseBrowser":"Quit DE"}'),$n=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload JP","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate JP","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab JP","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value JP","saveModal.alreadyExists":"{{title}}","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":"{{count}}","defaultPageTitle":"Untitled Page JP","enterpriseDefaultPageTitle":"Untitled Supertab JP","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":"{{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":"{{workspace}}","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":"{{workspace}}","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":"{{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. JP","successIndicator.pageCopySaved":"{{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}}","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}}","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete JP","appResults.header":"Featured content JP","recentlyClosed.header":"Recently Closed JP","landingPage.subheader":"Apps and websites selected by an admin will show here JP","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}}","aria.closePage":"{{title}}","aria.closeTab":"{{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"/","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":"{{name}}","aria.assignColorLinkingCurrentViews":"{{name}}","aria.setColorLinkingActiveView":"{{name}}","aria.setColorLinkingActiveViews":"{{name}}","aria.escapeLayoutDialog":"","global.supertab":"Supertab JP","global.tab":"Tab JP","bookmarks.editBookmark":"Edit Bookmark JP","bookmarks.bookmarkAdded":"Bookmark added JP","bookmarks.done":"Done JP","bookmarks.remove":"Remove JP","bookmarks.bookmarksPanel":"Bookmarks Panel JP","bookmarks.closePanel":"Close Bookmarks Panel JP","bookmarks.bookmarks":"Bookmarks JP","bookmarks.allBookmarks":"All Bookmarks JP","bookmarks.favorites":"Favorites JP","bookmarks.searchBookmarks":"Search Bookmarks JP","bookmarks.clearSearchInput":"Clear Search Input JP","bookmarks.createFolder":"Create New Folder JP","bookmarks.exitFolder":"Exit Folder JP","bookmarks.newFolder":"New Folder JP","bookmarks.namedFolder":"{{name}} Folder JP","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings JP","bookmarks.folderSettings":"{{name}} Folder Settings JP","bookmarks.noResultsFound":"No results found JP","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search JP","bookmarks.nothingToShow":"Nothing to show yet JP","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder JP","bookmarks.resultsFoundIn":"Results found in {{name}} JP","bookmarks.resultsInOtherFolders":"Results found in other folders JP","bookmarks.allResultsFoundIn":"All results found in JP","bookmarks.editName":"Edit Name JP","bookmarks.move":"Move JP","bookmarks.bookmarkAddedTitle":"Bookmark Added JP","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" JP","bookmarks.bookmarkEditedTitle":"Bookmark Edited JP","enterpriseContextMenu.saveSupertab":"Save Supertab JP","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... JP","enterpriseContextMenu.duplicate":"Duplicate JP","enterpriseContextMenu.deleteSupertab":"Delete Supertab JP","enterpriseContextMenu.newTab":"New Tab JP","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As JP","enterpriseSaveModal.renameSupertab":"Rename JP","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. JP","enterpriseSaveModal.closeTab":"Close Tab JP","enterpriseSaveModal.closeSupertab":"Close Supertab JP","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? JP","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. JP","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? JP","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. JP","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved JP","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. JP","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted JP","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. JP","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab JP","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab JP","enterpriseCommandBar.switchToSupertab":"Switch to Supertab JP","enterpriseCommandBar.goTo":"Go to {{type}} JP","enterpriseCommandBar.viewMore":"View More JP","contextMenu.quitEnterpriseBrowser":"Quit JP"}'),Un=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"    ","contextMenu.switchWorkspace":"  ","contextMenu.appearance":"","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"    ...","contextMenu.renameWorkspace":"   ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"   ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" ","contextMenu.quitPlatform":" ","contextMenu.newView":" ","contextMenu.openView":"    ","contextMenu.openViews":"    ","contextMenu.reload":"Reload KR","contextMenu.reloadView":"  ","contextMenu.reloadViews":"  ","contextMenu.duplicate":"Duplicate KR","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"  ","contextMenu.addViews":"  ","contextMenu.removeView":"  ","contextMenu.removeViews":"  ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab KR","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"    ","saveMenu.savePageAs":"   ","saveModal.enterValue":"Please enter a value KR","saveModal.alreadyExists":"{{title}}()  .","saveModal.pleaseEnterValidName":"  .","saveModal.renamePage":"  ","saveModal.closePage":" ","saveModal.discardChanges":"  ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":"  ({{count}}) ?","defaultPageTitle":"Untitled Page KR","enterpriseDefaultPageTitle":"Untitled Supertab KR","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":"    ?","modal.discardWarning":"     ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"    ?","modal.pageClose":" ","switchWorkspaceModal":"{{workspace}}() ?","switchWorkspaceModal.warning":"     ","deleteWorkspaceModal":"    ?","replaceWorkspaceModal.warning":"{{workspace}}()     . ?","replaceWorkspaceModal.warning.body":"     .     .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"{{workspace}}  ","closePlatform.warning":"      ,    .","back":" ","forward":" ","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS  ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":" ","toolbar.colorLinking":" ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":"  ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"  {{workspace}}() ","successIndicator.workspaceRenamed":"   ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. KR","successIndicator.pageCopySaved":" {{title}}() ","successIndicator.pageRenamed":"  ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"{{colorName}}   ","successIndicator.viewRemoved":"   ","successIndicator.viewsRemoved":"   ","successIndicator.layoutApplied":"{{layoutName}}  ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"  ","errorIndicator.workspaceSaveFailed":"   ","errorIndicator.failedToDuplicatePage":"  ","infoIndicator.colorLinkAttempt":"     /    .","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete KR","appResults.header":"Featured Content KR","recentlyClosed.header":"Recently Closed KR","landingPage.subheader":"Apps and websites selected by an admin will show here KR","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"{{title}}  ","aria.closePage":"{{title}}   ","aria.closeTab":" {{title}} ","aria.title":"","aria.closeContextGroup":"      ","aria.colorLinking":"    ","aria.applyColorLinking":"    .","aria.assignColorLinkingCurrentView":"{{name}}     ","aria.assignColorLinkingCurrentViews":"{{name}}     ","aria.setColorLinkingActiveView":"  {{name}}   ","aria.setColorLinkingActiveViews":"  {{name}}   ","aria.escapeLayoutDialog":"     ","global.supertab":"Supertab KR","global.tab":"Tab KR","bookmarks.editBookmark":"Edit Bookmark KR","bookmarks.bookmarkAdded":"Bookmark added KR","bookmarks.done":"Done KR","bookmarks.remove":"Remove KR","bookmarks.bookmarksPanel":"Bookmarks Panel KR","bookmarks.closePanel":"Close Bookmarks Panel KR","bookmarks.bookmarks":"Bookmarks KR","bookmarks.allBookmarks":"All Bookmarks KR","bookmarks.favorites":"Favorites KR","bookmarks.searchBookmarks":"Search Bookmarks KR","bookmarks.clearSearchInput":"Clear Search Input KR","bookmarks.createFolder":"Create New Folder KR","bookmarks.exitFolder":"Exit Folder KR","bookmarks.newFolder":"New Folder KR","bookmarks.namedFolder":"{{name}} Folder KR","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings KR","bookmarks.folderSettings":"{{name}} Folder Settings KR","bookmarks.noResultsFound":"No results found KR","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search KR","bookmarks.nothingToShow":"Nothing to show yet KR","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder KR","bookmarks.resultsFoundIn":"Results found in {{name}} KR","bookmarks.resultsInOtherFolders":"Results found in other folders KR","bookmarks.allResultsFoundIn":"All results found in KR","bookmarks.editName":"Edit Name KR","bookmarks.move":"Move KR","bookmarks.bookmarkAddedTitle":"Bookmark Added KR","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" KR","bookmarks.bookmarkEditedTitle":"Bookmark Edited KR","enterpriseContextMenu.saveSupertab":"Save Supertab KR","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... KR","enterpriseContextMenu.duplicate":"Duplicate KR","enterpriseContextMenu.deleteSupertab":"Delete Supertab KR","enterpriseContextMenu.newTab":"New Tab KR","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As KR","enterpriseSaveModal.renameSupertab":"Rename KR","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. KR","enterpriseSaveModal.closeTab":"Close Tab KR","enterpriseSaveModal.closeSupertab":"Close Supertab KR","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? KR","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. KR","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? KR","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. KR","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved KR","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. KR","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted KR","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. KR","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab KR","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab KR","enterpriseCommandBar.switchToSupertab":"Switch to Supertab KR","enterpriseCommandBar.goTo":"Go to {{type}} KR","enterpriseCommandBar.viewMore":"View More KR","contextMenu.quitEnterpriseBrowser":"Quit KR"}'),jn=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"   ","contextMenu.switchWorkspace":"  ","contextMenu.appearance":" ","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"   ...","contextMenu.renameWorkspace":"  ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"  ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"  ","contextMenu.newView":" ","contextMenu.openView":"    -  ","contextMenu.openViews":"    -  ","contextMenu.reload":"Reload RU","contextMenu.reloadView":" ","contextMenu.reloadViews":" ","contextMenu.duplicate":"Duplicate RU","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"   ","contextMenu.addViews":"   ","contextMenu.removeView":"   ","contextMenu.removeViews":"   ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab RU","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"   ","saveMenu.savePageAs":"  ","saveModal.enterValue":"Please enter a value RU","saveModal.alreadyExists":"{{title}}  .","saveModal.pleaseEnterValidName":"  ","saveModal.renamePage":" ","saveModal.closePage":" ","saveModal.discardChanges":" ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":" ({{count}})   ?","defaultPageTitle":"Untitled Page RU","enterpriseDefaultPageTitle":"Untitled Supertab RU","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":" ,      ?","modal.discardWarning":"    ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"   ?","modal.pageClose":" ","switchWorkspaceModal":" ,     {{workspace}}?","switchWorkspaceModal.warning":"    ","deleteWorkspaceModal":" ,       ?","replaceWorkspaceModal.warning":"    {{workspace}}  .    ?","replaceWorkspaceModal.warning.body":"       .       .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"  {{workspace}}","closePlatform.warning":"       ,    .","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"   ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"  ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":" ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"    {{workspace}}","successIndicator.workspaceRenamed":"  ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. RU","successIndicator.pageCopySaved":"   {{title}}","successIndicator.pageRenamed":" ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"  {{colorName}} ","successIndicator.viewRemoved":"    ","successIndicator.viewsRemoved":"    ","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"   ","errorIndicator.workspaceSaveFailed":"    ","errorIndicator.failedToDuplicatePage":"   ","infoIndicator.colorLinkAttempt":"      ,   /     ","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete RU","appResults.header":"Featured Content RU","recentlyClosed.header":"Recently Closed RU","landingPage.subheader":"Apps and websites selected by an admin will show here RU","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"  {{title}}","aria.closePage":"      {{title}}","aria.closeTab":"  {{title}}","aria.title":"","aria.closeContextGroup":"     ,  escape","aria.colorLinking":"     ","aria.applyColorLinking":" ,     ","aria.assignColorLinkingCurrentView":" ,    {{name}}","aria.assignColorLinkingCurrentViews":" ,    {{name}}","aria.setColorLinkingActiveView":"      {{name}}","aria.setColorLinkingActiveViews":"      {{name}}","aria.escapeLayoutDialog":"    ,  escape","global.supertab":"Supertab RU","global.tab":"Tab RU","bookmarks.editBookmark":"Edit Bookmark RU","bookmarks.bookmarkAdded":"Bookmark added RU","bookmarks.done":"Done RU","bookmarks.remove":"Remove RU","bookmarks.bookmarksPanel":"Bookmarks Panel RU","bookmarks.closePanel":"Close Bookmarks Panel RU","bookmarks.bookmarks":"Bookmarks RU","bookmarks.allBookmarks":"All Bookmarks RU","bookmarks.favorites":"Favorites RU","bookmarks.searchBookmarks":"Search Bookmarks RU","bookmarks.clearSearchInput":"Clear Search Input RU","bookmarks.createFolder":"Create New Folder RU","bookmarks.exitFolder":"Exit Folder RU","bookmarks.newFolder":"New Folder RU","bookmarks.namedFolder":"{{name}} Folder RU","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings RU","bookmarks.folderSettings":"{{name}} Folder Settings RU","bookmarks.noResultsFound":"No results found RU","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search RU","bookmarks.nothingToShow":"Nothing to show yet RU","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder RU","bookmarks.resultsFoundIn":"Results found in {{name}} RU","bookmarks.resultsInOtherFolders":"Results found in other folders RU","bookmarks.allResultsFoundIn":"All results found in RU","bookmarks.editName":"Edit Name RU","bookmarks.move":"Move RU","bookmarks.bookmarkAddedTitle":"Bookmark Added RU","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" RU","bookmarks.bookmarkEditedTitle":"Bookmark Edited RU","enterpriseContextMenu.saveSupertab":"Save Supertab RU","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... RU","enterpriseContextMenu.duplicate":"Duplicate RU","enterpriseContextMenu.deleteSupertab":"Delete Supertab RU","enterpriseContextMenu.newTab":"New Tab RU","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As RU","enterpriseSaveModal.renameSupertab":"Rename RU","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. RU","enterpriseSaveModal.closeTab":"Close Tab RU","enterpriseSaveModal.closeSupertab":"Close Supertab RU","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? RU","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. RU","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? RU","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. RU","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved RU","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.RU","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted RU","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. RU","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab RU","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab RU","enterpriseCommandBar.switchToSupertab":"Switch to Supertab RU","enterpriseCommandBar.goTo":"Go to {{type}} RU","enterpriseCommandBar.viewMore":"View More RU","contextMenu.quitEnterpriseBrowser":"Quit RU"}'),Vn=Dn().t,Gn=async e=>{const t=await $t(e);return await t.dispatch(zt.GetPages)},Hn=async e=>(await $t(e.identity)).dispatch(zt.UpdatePageForWindow,e);let zn=!1;function qn(e){return e.map((e=>{e.viewOptions.name?.startsWith("internal-generated-view-")&&delete e.viewOptions.name;const t=(n=e.viewOptions,n.name||=`${Pn}${It()}`,n);var n;return{...e,viewOptions:{...t,uuid:he.uuid}}}))}async function Kn(e){for(const t of e)t.panels&&await Zn(t.panels)}const Jn=e=>null!==e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&/ERR_([A-Z]+_*)+/.test(e.message);async function Zn(e){const t=e.map((e=>fin.Platform.getCurrentSync().createView(e.viewOptions,fin.me.identity).catch((e=>{if(!Jn(e))throw e;console.error(e)}))));return await Promise.all(t)}const Yn=(e,t)=>!t.find((t=>t===e)),Qn=(e,t)=>`${e} (${t})`,Xn=(e,t)=>{if(Yn(e,t))return e;let n=1;const r=e.replace(/ *\(\d+\)$/,"");for(;!Yn(Qn(r,n),t);)n+=1;return Qn(r,n)},er=async()=>{const e=await ye();return(await Promise.all(e.map((async e=>{try{return Gn(e.identity)}catch(t){JSON.stringify(e.identity);const n=await e.getOptions();return n.workspacePlatform?.pages||[]}})))).reduce(((e,t)=>e.concat(t)),[])},tr=async()=>(await st(he)).dispatch(at.GetSavedPages,void 0),nr=async e=>(await st(he)).dispatch(at.GetSavedPage,e),rr=async(e,t)=>{const n=await(async e=>(await er()).find((t=>t.pageId===e)))(e);return!n||n.title===t.title&&e===t.pageId||await Hn({identity:n.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),n},ar=async({page:e})=>{await rr(e.pageId,e),await(async e=>(await st(he)).dispatch(at.CreateSavedPage,e))({page:e})},or=async e=>{await nr(e)&&await(async e=>(await st(he)).dispatch(at.DeleteSavedPage,e))(e)},ir=async({pageId:e,page:t})=>(await rr(e,t),await(async e=>(await st(he)).dispatch(at.UpdateSavedPage,e))({pageId:e,page:t})),sr=async e=>await nr(e.pageId)?ir({pageId:e.pageId,page:e}):ar({page:e}),cr=async e=>{const t={...e.page,panels:e.page.panels&&qn(e.page.panels)};t.panels&&await Zn(t.panels),await Hn({...e,page:t})},lr=async e=>{await(async e=>(await $t(e.identity)).dispatch(zt.DetachPagesFromWindow,e))(e)},ur=async e=>{await(async e=>(await $t(e.identity)).dispatch(zt.SetActivePageForWindow,e))(e)},dr=e=>Gn(e),pr=async({identity:e,pageId:t})=>(await dr(e)).find((e=>e.pageId===t)),fr=async e=>{await(async e=>(await $t(e.identity)).dispatch(zt.ReorderPagesForWindow,e))(e)},hr=new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};async function gr(e){await hr.lock();try{const t=Vn(zn?"enterpriseDefaultPageTitle":"defaultPageTitle"),n=e??t,[r,a]=await Promise.all([tr(),er()]),o=[...r,...a].map((({title:e})=>e));return Xn(n,o)}finally{hr.unlock()}}async function wr({page:e}){return{shouldShowModal:!(!e||!e.hasUnsavedChanges)}}async function mr({page:e,identity:t}){const n=fin.Application.getCurrentSync();if((await n.getInfo()).initialOptions.enableBeforeUnload){const n=En(e.layout.content).filter((e=>e.name)).map((e=>fin.View.wrapSync({name:e.name,uuid:t.uuid}))),r=await this.checkViewsForPreventUnload(n);if(r.viewsPreventingUnload.length>0&&(await this.getUserDecisionForBeforeUnload({...r,windowId:t,windowShouldClose:!1,closeType:"page"})).viewsToClose.length!==n.length)return e.pageId,{shouldPageClose:!1}}return{shouldPageClose:!0}}async function yr({pages:e,identity:t}){const n=await Promise.all(e.map((e=>this.shouldPageClose({page:e,closeType:"window",identity:t})))),{pagesPreventingClose:r,pagesNotPreventingClose:a}=e.reduce(((e,t,r)=>n[r].shouldPageClose?{pagesPreventingClose:e.pagesPreventingClose,pagesNotPreventingClose:[...e.pagesNotPreventingClose,t]}:{pagesNotPreventingClose:e.pagesNotPreventingClose,pagesPreventingClose:[...e.pagesPreventingClose,t]}),{pagesPreventingClose:[],pagesNotPreventingClose:[]});return this.handlePagesAndWindowClose({pagesNotPreventingClose:a,pagesPreventingClose:r,identity:t})}async function br({pagesPreventingClose:e,pagesNotPreventingClose:t,identity:n}){return{shouldWindowClose:0===e.length}}async function vr({page:e}){return Wt(e)}async function kr(e){return{hasUnsavedChanges:!0}}const Sr=async()=>{const e=kn(),t=(await ye()).map((t=>e.Browser.wrapSync(t.identity)));await Promise.all(t.map((async e=>{const t=await e.getPages();await Promise.all(t.map((async t=>{t.title,await e.updatePage({pageId:t.pageId,page:{hasUnsavedChanges:!1}}),t.pageId,t.title,await sr({...t,hasUnsavedChanges:!1})})))})))},Cr=new Map,Pr=e=>Cr.delete(e);let Ir,xr,Ar,_r=!1;const Er=async()=>(void 0===Ar&&(Ar=!!(await Q()).disableOpenFinAnalytics),Ar);async function Mr(e){e.forEach((e=>{var t,n;"Page"===e.type?"Open Page"===e.action?(t=e.data.uuid,n=e,Cr.set(t,n)):"Close Page"===e.action&&Pr(e.data.uuid):"Store"===e.source&&"Close"!==e.action&&(_r||(_r=!0,fin.Window.wrapSync(ge).once("closed",(()=>{_r=!1,(async e=>{await Ue($e(e),{source:"Store",type:"Navigation",action:"Close Store",skipValueHashing:!0})})(fin.me.identity)}))))})),await(async e=>{Ir?.sendToOpenFin&&(await Er()||e.forEach((async e=>{const t=kt({},e);t.entityId&&(t.entityId.uuid=await bt(t.entityId.uuid),t.entityId.name=await bt(t.entityId.name)),!e.skipValueHashing&&"value"in t&&(t.value=await bt(t.value)),xr(t)})))})(e);const t=e.map((({skipValueHashing:e,...t})=>t));this.handleAnalytics(t)}const Tr=Ce({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1}),Rr=function(e=Tr){const t=new Map;return async(n,r,a,o,i)=>{if(t.has(n)){const{currentUrl:e,currentName:a}=t.get(n);if(e===r)return;const o=fin.Window.wrapSync({uuid:fin.me.uuid,name:a});await o.close()}const s=`${de.HomeInternal}-${Date.now()}${Math.random()}`;t.set(n,{currentUrl:r,currentName:s});const c=`New ${o} indicator: ${a} ${i}`,l=await fin.Platform.getCurrentSync().createWindow({...e,name:s,url:r});(e=>{const t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(t),document.body.appendChild(t),setTimeout((()=>{t.innerHTML=e}),300),setTimeout((()=>{document.body.removeChild(t)}),1e3)})(c),l.once("closed",(()=>{t.delete(n)}))}}();async function Or(e,t,n,r,a,o){if(n&&fin.me.name!==n){const i={type:e,message:t,parentBrowserName:n,secondaryMessage:r,icon:a,isEnterprise:o};return(await $t({uuid:fin.me.uuid,name:n})).dispatch(zt.ShowBrowserIndicator,i)}const i=new URLSearchParams;if(i.append("type",e),i.append("message",t),i.append("parentName",n||""),i.append("secondaryMessage",r||""),i.append("icon",a||""),i.append("isEnterprise",`${o}`||""),n){const e=fe(n?{uuid:O,name:n}:void 0),t=(e=>`${e.top},${e.left},${e.height},${e.width},${e.bottom},${e.right}`)(await e.getBounds());i.append("parentBounds",t)}const s=`${(o?await re():await ne())+z.BrowserIndicator}#${i.toString()}`;return Rr("browser"+n,s,t,e,r)}async function Wr(e,t,n,r){const a=await Ae(t);return Or("success",e,t.name,n,r,a)}const Dr=async(e=he)=>{const{workspacePlatform:t}=await fe(e).getOptions(),n=t?.newPageUrl,r=t?.newTabUrl;return{newPageUrl:n,newTabUrl:r}},Br=async(e=he)=>{const t=await Ae(e)||zn,n=await kn().Browser.getUniquePageTitle();let r;if(e&&await me(e))r=await(async(e,t=he)=>{const{newPageUrl:n}=await Dr(t);if(!n)throw new Error("Trying to create a new page without a newPageUrl set");return Mn(e,n,t)})(n,e);else if(t){const e=await ae();r=await Mn(n,e)}t&&(r.settings=r.settings??{},r.dimensions=r.dimensions??{},r.settings.hasHeaders=!1,r.settings.reorderEnabled=!0,r.dimensions.headerHeight=0);const a=await Ot(n,r);return t&&(a.hasUnsavedChanges=!1),a};var Fr;function Nr(e,t){return async(n,...r)=>{e.has(n)&&e.get(n).forEach((e=>e(...r))),t&&await t({event:n,payload:r})}}function Lr(e,t){return t&&t((t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach((e=>e(...r)))})),(t,n)=>{e.has(t)||e.set(t,new Set),e.get(t).add(n)}}function $r(e){return(t,n)=>{e.has(t)||e.set(t,new Set);const r=e.get(t),a=(...e)=>{n(...e),r.delete(a)};r.add(a)}}function Ur(e){return(t,n)=>{e.has(t)&&e.get(t).delete(n)}}!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(Fr||(Fr={}));const jr={name:de.BrowserMenu,alwaysOnTop:!0,autoShow:!0,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!1,saveWindowState:!1};function Vr(e){const t={...jr,...e};return t.url=function(e){if(!M)throw new Error("resolveAbsolutePath can only be used in a window");const t=window.location;if(/^(?:[a-z]+:)?\/\//i.test(e))return e;const n=`${t.protocol}//${t.hostname}`;return new URL(e,n).href}(t.url??""),t}const Gr=function(e){const t=new Map;return{emit:Nr(t,(t=>E&&fin.InterApplicationBus.publish(e,t))),addListener:Lr(t,(t=>E&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),addListenerWithUUID:n=>Lr(t,(t=>E&&fin.InterApplicationBus.subscribe({uuid:n},e,t))),removeListener:Ur(t),once:$r(t)}}("window.menu"),Hr=(e,t)=>fin.Window.wrapSync(e).updateOptions({opacity:t}),zr=e=>Gr.emit("response",e),qr=Me((()=>ue().getChildWindows()),500),Kr=new Map;async function Jr(e,t){const n=Vr(e),r={top:n.top,left:n.left,width:n.defaultWidth||n.width,height:n.defaultHeight||n.height};return t.set("parentName",fin.Window.getCurrentSync().identity.name),{name:n.name,bounds:r,route:`${n.url}#${t.toString()}`}}const Zr=async({options:e,content:t,parameters:n})=>{const r=n??new URLSearchParams;r.set("content",JSON.stringify({...t,invocationId:It()}));const a={...e,name:`${e.name}--${e.modalParentIdentity?.name??""}`};return await async function({options:e,parameters:t}){const n=t??new URLSearchParams,r=Vr(e),{name:a,modalParentIdentity:o}=r;if(!n.has("isEnterprise")){const e=`${await(async e=>(Ee||(Ee=await Ae(e)),Ee))(o)}`;n.set("isEnterprise",e)}let i=await async function(e){return(await qr()).find((t=>t.identity.name===e))}(a);if(i)await async function(e,t){const{name:n,bounds:r,route:a}=await Jr(e,t),o={uuid:fin.me.identity.uuid,name:n},i=fin.Window.wrapSync(o);await Promise.all([Hr(o,0),i.setBounds(r)]),i.once("blurred",(()=>{Hr(o,0),i.hide(),zr({name:o.name,data:{actionName:"Cancel"}})})),Gr.emit("update",n,r,a),await zr({name:n,data:{actionName:"Cancel"}})}(r,n);else{const{route:t,bounds:a}=await Jr(e,n);i=await async function(e,t,n){const r=Vr(e),a=await gt(fin.me.identity),o=await wt(fin.me.identity)===w.Dark,i=a?.theme;return r.backgroundColor=i?.[o?w.Dark:w.Light]?.palette?.inputBackground||r.backgroundColor,Kr.has(r.name)?Kr.get(r.name):new Promise((e=>{Gr.once("ready",(async t=>{if(t.name===r.name){const n=await Kr.get(r.name);n.once("blurred",(async()=>{if(Hr(t,0),n.hide(),zr({name:r.name,data:{actionName:"Cancel"}}),n.identity.name===de.BrowserSaveMenu){const e=await n.getOptions();"submitting"!==e.customContext&&"error"!==e.customContext&&n.close()}else n.identity.name.startsWith(de.BrowserMenu)&&n.close()})),setTimeout((async()=>{await Hr(t,1),1!==(await fin.Window.wrapSync(t).getOptions()).opacity&&Hr(t,1)})),e(n)}}));const a=(async()=>{const e=await fin.Platform.getCurrentSync().createWindow(Ce({...r,opacity:0,url:t||r.url,defaultLeft:n?.left,defaultTop:n?.top,defaultWidth:n?.width,defaultHeight:n?.height},!0));return e.once("closed",(()=>{Kr.delete(r.name)})),e})();Kr.set(r.name,a)}))}({...r},t,a)}return i}({options:a,parameters:r}),new Promise((e=>{Gr.once("response",(async t=>{t.name===a.name&&e({data:t.data})}))}))},Yr=async(e,t,n)=>{const{windowOptions:r,content:a}=await(async(e,t,n)=>{const r=await Ae(e);return{title:"Platform Quit",windowOptions:{url:await oe(r,!1)+z.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:n?void 0:e},content:{title:Vn("Platform"===t?"closePlatform":"closePlatform.workspace",{workspace:t}),body:Vn("closePlatform.warning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t,n),o=await De(r,e,n),i={...r,top:o.top,left:o.left};return"Confirm"===(await Zr({options:i,content:a})).data.actionName};async function Qr({options:e,...t}){try{if(!e?.skipPrompt&&!await(async(e,t,n)=>{const{windowOptions:r,content:a}=await(async(e,t)=>{const n=await Ae(t);return{title:"Switch Workspace",windowOptions:{url:await oe(n,!1)+z.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:t},content:{title:Vn("switchWorkspaceModal",{workspace:e}),body:Vn("switchWorkspaceModal.warning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(t,n?void 0:e),o=await De(r,e,n),i={...r,top:o.top,left:o.left};return"Confirm"===(await Zr({options:i,content:a})).data.actionName})(e?.promptContainerWindowIdentity,t.title,e?.shouldCenterModalOnMonitor))return!1;const n=kn();await n.applySnapshot(t.snapshot,{...e?.applySnapshotOptions??{},closeExistingWindows:e?.applySnapshotOptions?.closeExistingWindows??!0}),Xr(t),Or("success",Vn("successIndicator.workspaceSwitched")).catch(console.warn)}catch(e){return console.error("failed to apply the current workspace: ",e),!1}return!0}function Xr(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);Xt(xt.CurrentWorkspaceId,t)}catch(e){console.error("failed to set the active workspace: ",e)}}async function ea(){const e=kn(),t=await e.getSnapshot();return{workspaceId:It(),title:await aa(),metadata:{APIVersion:U},snapshot:t}}async function ta(){if("undefined"==typeof localStorage)return ea();const e=en(xt.CurrentWorkspaceId);if(!e)return ea();const t=JSON.parse(e),n=kn(),r=await n.getSnapshot();return{...t,metadata:{APIVersion:U},snapshot:r}}const na=async()=>(await st(he)).dispatch(at.GetSavedWorkspaces,void 0),ra=async e=>await(async e=>(await st(he)).dispatch(at.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await st(he)).dispatch(at.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await st(he)).dispatch(at.CreateSavedWorkspace,e))({workspace:e});async function aa(e="Untitled Workspace"){const t=(await na()).map((({title:e})=>e));return Xn(e,t)}const oa=async e=>{const t=kn(),n=await t.getCurrentWorkspace(),r=await t.Storage.getWorkspaces(),a=n.workspaceId;if(r.some((e=>e.workspaceId===a)))await(async(e,t)=>{const n=t??kn();await n.Storage.saveWorkspace((e=>({...e,snapshot:{...e.snapshot,windows:e.snapshot.windows.map((e=>({...e,workspacePlatform:{...e.workspacePlatform,pages:e.workspacePlatform?.pages?.map((e=>({...e,hasUnsavedChanges:!1})))}})))}}))(e)),await(async()=>(await st(he)).dispatch(at.MarkUnsavedPagesAsSavedInternal,void 0))()})(n,t),await t.setActiveWorkspace(n),await Wr(Vn("successIndicator.workspaceSaved"),e);else{const n=t.Browser.wrapSync(e);await n._openSaveModal({menuType:A.SAVE_WORKSPACE})}},ia=e=>{kn().Browser.wrapSync(e)._openSaveModal({menuType:A.SAVE_WORKSPACE_AS})},sa=async e=>{const t=kn().Browser.wrapSync(e),{newPageUrl:n}=await Dr(),r=await Br(e),a=n||void 0;await t._addDefaultPage({identity:e,page:r,newPageUrl:a})},ca=async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await kn().Storage.getPages(),a=(await n.getPages()).find((e=>t?e.pageId===t:e.isActive)),o=r.some((e=>a.pageId===e.pageId)),i=await Ae(e);if(o)try{await kn().Storage.savePage((s=a,{...s,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0,layout:_n(s.layout)})),await n.updatePage({pageId:a.pageId,page:{hasUnsavedChanges:!1}}),Wr(Vn(i?"enterpriseSuccessIndicator.supertabSaved":"successIndicator.pageSaved"),e,Vn(i?"enterpriseSuccessIndicator.supertabHasBeenSaved":"successIndicator.pageHasBeenSaved",{title:a.title}))}catch{Or("error",Vn("errorIndicator.pageSaveFailed"),a.parentIdentity.name,void 0)}else n._openSaveModal({id:a.pageId,menuType:A.SAVE_PAGE});var s},la=async(e,t)=>{const n=kn().Browser.wrapSync(e),r=(await n.getPages()).find((e=>t?e.pageId===t:e.isActive));n._openSaveModal({id:r.pageId,menuType:A.SAVE_PAGE_AS}),je({type:"Page Modal",action:"Select Save As",value:r.title,skipValueHashing:!0})},ua={title:"Downloads",pageId:"downloads-page-id",layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{name:"show-download-view",url:"chrome://downloads/"}}]}]}},da=async e=>{const t=fe(e),n=await t.getCurrentViews(),r=(await kn().Browser.wrapSync(t.identity).getPages()).find((e=>e.isActive));try{const t=(await Promise.all(n.map((async e=>({identity:e.identity,info:await fin.View.wrapSync(e.identity).getInfo()}))))).find((e=>"chrome://downloads/"===e.info.url));if(t)await fin.View.wrapSync(t.identity).focus();else{const t=kn();if(r?.isLocked){const e=(await fin.Application.getCurrentSync().getChildWindows()).find((e=>"show-download-window"===e.identity.name));return void(e?await e.focus():t.Browser.createWindow({name:"show-download-window",workspacePlatform:{pages:[ua]}}))}(await kn().createView({name:"show-download-view",url:"chrome://downloads/",target:e},e)).focus()}}catch(e){console.error("Couldn't open downloads view",e)}},pa=async e=>{const t=e.map((e=>fin.View.wrapSync(e).print()));await Promise.all(t)},fa=e=>{const[t,n,r]=e.split(".").map((e=>"x"===e?0:1));return 100*t+10*n+1*r};class ha extends Error{}function ga(){return Dn().language}const wa=async e=>{ya(e),(e=>{Dn().changeLanguage(e)})(e),await(async e=>{const t=await ye();return Promise.all(t.map((async t=>{const n=await $t(t.identity);await n.dispatch(zt.SetSelectedLanguage,e)})))})(e)};function ma(){if(!Dn().options.resources)throw new Error("No language resources found");return{currentLanguage:ga(),resources:Dn().options.resources}}function ya(e){if(!x.includes(e))throw new Error(`The ISO language provided ${e} is not supported`)}const ba=["green","purple","orange","red","pink","yellow"],va="CONTEXT_GROUP_PAGE",ka=()=>e=>class extends e{getContextGroups(){return super.getContextGroups().map((e=>ba.includes(e.displayMetadata?.name)?{...e,displayMetadata:{...e.displayMetadata,name:Vn(e.displayMetadata?.name)}}:e))}},Sa=()=>{const e=new Set;return t=>class extends t{constructor(){super(),this.onClientConnected=e=>{e.name.startsWith("internal-generated-view")&&this.joinContextGroup({contextGroupId:va,target:e},{uuid:this.fin.me.uuid,name:this.fin.me.name})};const e=this.interopClients.set;this.interopClients.set=(t,n)=>{e.call(this.interopClients,t,n),this.onClientConnected(n.clientIdentity)}}async joinContextGroup({contextGroupId:t,target:n},r){if(t!==va)return super.joinContextGroup({contextGroupId:t,target:n},r);try{const t=(await kn().Browser.getPageByViewIdentity(n)).page.layoutName;if(!t)throw new Error("View does not belong to a page");if(!e.has(t)&&(e.add(t),!this.contextGroupsById.has(t))){const e=new Map;this.contextGroupsById.set(t,e)}await super.joinContextGroup({contextGroupId:t,target:n},r),n.name}catch(e){JSON.stringify(n),e.stack}}getContextGroups(){return Array.from(e).map((e=>({id:e,displayMetadata:{}})))}setContextForGroup(e,t){if(!this.contextGroupsById.has(t)){const e=new Map;this.contextGroupsById.set(t,e)}return super.setContextForGroup(e,t)}}},Ca=(e,t)=>{const n=(e=>_e(e)?Sa():ka())(t);try{return"function"==typeof e?t=>e(n(t)):Array.isArray(e)?[...e,n]:e=>new(n(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}},Pa=new Map;async function Ia(){if("undefined"!=typeof localStorage)try{const e=en(xt.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await be(t))return t}catch(e){throw new Error(`failed to get last focused browser window: ${e}`)}}async function xa(e=fin.me.identity){await me(e)&&(Pa.delete(e.name),Pa.set(e.name,e),function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);Xt(xt.LastFocusedBrowserWindow,t)}catch(e){console.error("failed to save last focused browser window: ",e)}}(e))}async function Aa(e=fin.me.identity){Pa.delete(e.name)}const _a=Pt()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===de.BrowserMenu||r.identity.name===de.BrowserSaveMenu?t=r:await me(r.identity)&&(n=!0),n)break;!n&&t&&t.close()}),100,{leading:!1,trailing:!0});let Ea={};const Ma=async({actionId:e,payload:t})=>{if("function"!=typeof Ea[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return Ea[e](t)},Ta=()=>fin.InterApplicationBus.Channel.connect(`custom-context-menu-${kn().identity.uuid}-${U}`);var Ra,Oa;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(Ra||(Ra={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(Oa||(Oa={}));const Wa=n(54),Da=(e,t)=>(0,Wa.createStore)(e+"-"+fin.me.uuid,t),Ba=(e,t)=>{const n=Da(e,t);return(async(e,t,n)=>{const r=en(xt.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,Xt(xt.HasMovedStore,JSON.stringify(a));const o=await(0,Wa.entries)(e);await(0,Wa.setMany)(o,t)})((0,Wa.createStore)(e,t),n,e),n},Fa=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),Na=T&&E&&Ba("openfin-home-pages","pages");async function La(e){if(!Na)throw new Error("Unable to get page - IndexDB not supported");const t=await(0,Wa.get)(e,Na);if(t)return t.pageId=e.toString(),t.title=t.title||t.pageId,t}async function $a(e){if(!Na)throw new Error("Unable to get page list - IndexDB not supported");const t=await(0,Wa.keys)(Na),n=(await Promise.all(t.map((e=>La(e.toString()))))).filter((e=>!!e));return e?n.filter((t=>Fa(t.title,e))):n}async function Ua({page:e}){if(!Na)throw new Error("Unable to create page - IndexDB not supported");await(0,Wa.set)(e.pageId,e,Na)}async function ja(e){if(!Na)throw new Error("Unable to delete page - IndexDB not supported");await(0,Wa.del)(e,Na)}async function Va({pageId:e,page:t}){if(!Na)throw new Error("Unable to update page - IndexDB not supported");if(void 0===await La(e))throw new Error("page not found");await Ua({page:t}),e!==t.pageId&&await ja(e)}const Ga=T&&E&&Da("openfin-enterprise-tab-history","removed-tab-stack"),Ha=async e=>{(0,Wa.set)(Date.now(),e,Ga)},za=T&&E&&Da("openfin-enterprise-site-history","visited-sites"),qa=async e=>{if("website"===e.type){let t=await(0,Wa.get)(e.url,za);t?(t.icon=e.icon,t.title=e.title,t.type=e.type,t.visitCount=(t.visitCount||0)+1):t={url:e.url,icon:e.icon,title:e.title,type:e.type,visitCount:1},t.accessTime=Date.now(),(0,Wa.set)(t.url,t,za)}},Ka=async()=>{const e=await(0,Wa.entries)(za);return e.length>0?(e.sort(((e,t)=>t[1].visitCount-e[1].visitCount)),(e.length>5?e.slice(0,5):e).map((e=>e[1]))):[]},Ja=async()=>(await fin.System.getHostSpecs()).name.toLowerCase().includes("windows");var Za;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(Za||(Za={}));const Ya={type:Za.Separator,data:void 0},Qa=async()=>({type:Za.Submenu,label:Vn("contextMenu.print"),submenu:[{type:Za.Label,label:Vn("contextMenu.submenu.print"),data:{type:v.Print}},{type:Za.Label,label:Vn("contextMenu.submenu.printAll"),data:{type:v.PrintAll}},Ya,{type:Za.Label,label:Vn("contextMenu.printScreen"),data:{type:v.PrintScreen}}]}),Xa=()=>({type:Za.Label,label:Vn("contextMenu.closeWindow"),data:{type:g.CloseWindow}}),eo=e=>({type:Za.Label,label:Vn(e?"contextMenu.quitEnterpriseBrowser":"contextMenu.quitPlatform"),data:{type:g.Quit}}),to=()=>({type:Za.Label,label:Vn("contextMenu.newWindow"),data:{type:g.NewWindow}}),no=e=>({type:Za.Label,label:Vn(e?"enterpriseContextMenu.saveSupertab":"contextMenu.savePage"),data:{type:g.SavePage}}),ro=e=>({type:Za.Label,label:Vn(e?"enterpriseContextMenu.saveSupertabAs":"contextMenu.savePageAs"),data:{type:g.SavePageAs}}),ao=(e,t)=>({type:Za.Label,label:Vn(t?"enterpriseContextMenu.newTab":"contextMenu.newPage"),data:{type:g.NewPage},enabled:e}),oo=()=>({label:Vn("contextMenu.switchWorkspace")}),io=()=>({label:Vn("contextMenu.deleteWorkspace")}),so=()=>({label:Vn("contextMenu.appearance")}),co=(e,t,n)=>t.map((t=>{const r=t.workspaceId===e.workspaceId;return{label:t.title,type:Za.Checkbox,enabled:!r,checked:r,data:{type:n,workspaceId:t.workspaceId}}})),lo=async()=>{const e=await kn().Theme.getSelectedScheme();return[{label:Vn("theme.light"),type:Za.Checkbox,checked:e===w.Light,data:{type:g.Appearance,scheme:w.Light}},{label:Vn("theme.dark"),type:Za.Checkbox,checked:e===w.Dark,data:{type:g.Appearance,scheme:w.Dark}},{label:Vn("theme.system"),type:Za.Checkbox,checked:e===w.System,data:{type:g.Appearance,scheme:w.System}}]},uo=async(e,t,n)=>{const r={newChannelId:t,selectedViews:n};(await $t(e)).dispatch(zt.AddToChannel,r)},po=async(e,t)=>{(await $t(e)).dispatch(zt.RemoveFromChannel,t)},fo=async(e,t)=>{if(!e)return;const n=t.identity,r=fin.Window.wrapSync(n);switch(je({type:"View Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e.type){case v.Back:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateBack()));await Promise.all(t)})(t.selectedViews);break;case v.Forward:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateForward()));await Promise.all(t)})(t.selectedViews);break;case v.Print:await pa(t.selectedViews);break;case v.PrintAll:await r.print({content:"views",includeSelf:!1});break;case v.PrintScreen:await r.print({content:"screenshot"});break;case v.CloseViews:await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=(await n.getPages()).find((e=>e.isActive)),a=await fin.Window.wrapSync(e).getCurrentViews();if(t.length===a.length-(r.panels??[]).length)return void(await $t(e)).dispatch(zt.ClosePage,{pageId:r?.pageId});const o=fin.Platform.getCurrentSync();t.forEach((async t=>{const a=await fin.View.wrapSync(t).getParentLayout();await o.closeView(t);const{hasUnsavedChanges:i}=await(async e=>(await ct(he)).dispatch(at.HandlePageChanges,e))({page:{...r,layout:await a.getConfig()},identity:e,eventDetails:{type:h.ViewRemoved,viewIdentity:t}});i&&await n.updatePage({pageId:r.pageId,page:{hasUnsavedChanges:!0}})}))})(n,t.selectedViews);break;case v.OpenWithDefaultBrowser:await(async(e,t)=>{const n=await(e=>Promise.all(e.map((async e=>fin.View.wrapSync(e).getInfo()))))(t),{newPageUrl:r,newTabUrl:a}=await Dr(e);n.forEach((async e=>{e.url!==r&&e.url!==a&&await fin.System.openUrlWithBrowser(e.url)}))})(n,t.selectedViews);break;case v.ReloadViews:t.selectedViews.forEach((async e=>{const t=fin.View.wrapSync(e);await t.reload()}));break;case v.NewView:await(async(e,t)=>{const n=t.selectedViews[0],r=fin.View.wrapSync(n),a=await(async e=>{const{newTabUrl:t}=await Dr(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{url:t,target:e,title:"New Tab"}})(e);await kn().createView(a,e,r.identity)})(n,t);break;case v.DuplicateViews:((e,t)=>{t.forEach((async t=>{const n=fin.View.wrapSync(t);await(async(e,t)=>{const{url:n}=await t.getInfo(),r={...await t.getOptions(),url:n,target:e,name:void 0};await kn().createView(r,e,t.identity)})(e,n)}))})(n,t.selectedViews);break;case v.AddToChannel:uo(n,e.option,t.selectedViews);break;case v.RemoveFromChannel:po(n,t.selectedViews);break;case v.Custom:if(e.action){const r={callerType:P.ViewTabContextMenu,windowIdentity:n,selectedViews:t.selectedViews,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,r)}}};let ho="Platform";const go=async()=>ho,wo=async(e,t)=>{if(!e)return;const n=t.identity,r=await $t(n),a=kn().Browser.wrapSync(n),o=fin.Window.wrapSync(n);if(je({type:"Global Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0,data:{action:e.action?.id}}),await Ae(n)){const n=await(async(e,t)=>{const n=t.identity,r=kn().Browser.wrapSync(n),a=(await r.getPages()).find((e=>e.isActive)),o=Dt({...n,layoutName:a.layoutContainerKey}),i=t.selectedViews;switch(e?.type){case y.Lock:await r.updatePage({pageId:a.pageId,page:{isLocked:!a.isLocked}});break;case y.AddToChanel:e.option?await uo(n,e.option,i):null===e.option&&await po(n,i);break;case g.NewWindow:{const e=await Br(n);await kn().Browser.createWindow({workspacePlatform:{pages:[e],windowType:"enterprise"}});break}case y.Pin:{const{alwaysOnTop:e}=await r.openfinWindow.getOptions();await r.openfinWindow.updateOptions({alwaysOnTop:!e});break}case y.ShowHideTabs:await o.isShowingTabs()?await o.hide():await o.show();break;default:return!1}return!0})(e,t);if(n)return}switch(e.type){case g.NewWindow:{const{newPageUrl:e}=await Dr(n);if(!e)throw new Error("Trying to create a new empty window without a newPageUrl set");kn().createView({target:void 0,url:e});break}case g.NewPage:await sa(n);break;case g.CloseWindow:r.dispatch(zt.CloseBrowserWindow);break;case g.SaveWorkspace:await oa(n);break;case g.SavePage:await ca(n);break;case g.SavePageAs:await la(n);break;case g.SaveWorkspaceAs:await ia(n);break;case g.RenameWorkspace:a._openSaveModal({menuType:A.RENAME_WORKSPACE});break;case g.SwitchWorkspace:await(async(e,t)=>{const n=kn(),r=(await n.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n.applyWorkspace(r,{skipPrompt:!1,promptContainerWindowIdentity:e})})(n,e);break;case g.DeleteWorkspace:await(async(e,t)=>{const n=kn(),r=(await n.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));r&&await(async(e,t)=>{const{windowOptions:n,content:r}=await(async(e,t)=>{const n=await Ae(e);return{title:"Delete Workspace",windowOptions:{url:await oe(n,!1)+z.ResponseModal,name:de.BrowserMenu,defaultHeight:144,defaultWidth:410,modalParentIdentity:e},content:{title:Vn("deleteWorkspaceModal"),body:`${t}`,buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t),a=await De(n,n.modalParentIdentity),o={...n,top:a.top,left:a.left};return"Confirm"===(await Zr({options:o,content:r})).data.actionName})(e,r.title)&&(await n.Storage.deleteWorkspace(t.workspaceId),Wr(Vn("successIndicator.workspaceDeleted"),e))})(n,e);break;case g.Downloads:await da(n);break;case g.Appearance:await kn().Theme.setSelectedScheme(e.scheme);break;case g.Quit:{const e=go();await Yr(n,await e)&&fin.Platform.getCurrentSync().quit()}break;case g.OpenStorefront:(async()=>{await ve()&&we(ge)})();break;case g.RestoreChanges:{const e=await async function(){const e=kn(),t=await e.getCurrentWorkspace();return(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId))}();await(async e=>{const{windowOptions:t,content:n}=await(async e=>{const t=await Ae(e);return{title:"Restore Changes",windowOptions:{url:await oe(t,!1)+z.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:e},content:{title:Vn("restoreModal"),body:Vn("modal.discardWarning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e),r=await De(t,t.modalParentIdentity),a={...t,top:r.top,left:r.left};return"Confirm"===(await Zr({options:a,content:n})).data.actionName})(n)&&await Qr({options:{skipPrompt:!0},...e})}break;case g.Print:await pa(t.selectedViews);break;case g.PrintAll:await o.print({content:"views",includeSelf:!1});break;case g.PrintScreen:await o.print({content:"screenshot"});break;case g.Custom:if(e.action){const t={callerType:P.GlobalContextMenu,windowIdentity:n,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,t)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}},mo=async(e,t)=>{if(e?.type){const n=t.identity;switch(e.type){case S.SavePage:await ca(n);break;case S.SaveWorkspace:await oa(n);break;case S.SavePageAs:await la(n);break;case S.SaveWorkspaceAs:await ia(n);break;case S.Custom:if(e.action){const n={callerType:P.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,n)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}}};var yo;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(yo||(yo={}));const bo=async(e,t,n,r)=>{const{x:a,y:o,identity:i,template:s,callback:c}=e,l=await Ae(i),{data:u}=l?await(async(e,t,n,r)=>{if(!E)throw new Error("showEnterpriseContextMenu can only be used in a Here env. Avoid calling this method during pre-rendering.");if(!r&&!fin.me.isWindow)throw new Error("showEnterpriseContextMenu can only be used in a Here window.");const a=fin.Window.wrapSync({uuid:he.uuid,name:de.EnterpriseContextMenu});await a.isShowing()&&await a.blur();const o=await Ta(),i=new Promise(((e,t)=>{o.register("response",(t=>{e(t)}))})),{x:s,y:c,template:l}=e;return await o.dispatch("open",{parentIdentity:r.identity,responseIdentity:he,type:t,anchorBehavior:n,x:s,y:c,payload:{template:l}}),i})({x:a,y:o,template:s},n,r,fin.Window.wrapSync(i)):await function(e,t){if(!E)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:a,y:o,template:s},fin.Window.wrapSync(i));c(u,e)};async function vo(e,t){const n=await Ae(e.identity),r=n?await(async({identity:e,selectedViews:t})=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await r.getPages()).find((e=>e.isActive)),o=Rn(a.layout.content)>1,i=await Ae(e),s=await n.Theme.getThemes(),c=s[0]&&"palettes"in s[0]||!s[0]||0===s.length,l={...no(i),enabled:o},u={...ro(i),enabled:o};return[to(),ao(!0,i),{type:Za.Separator},l,u,{type:Za.Separator},...c?[{type:Za.Submenu,label:so().label,submenu:await lo()}]:[],{type:Za.Separator},Xa(),{type:Za.Separator},eo(!0)]})({identity:e.identity,selectedViews:e.selectedViews}):await(async(e,t=[])=>{const n=await ve(),{newPageUrl:r}=await Dr(e),a=await(async e=>{const t=fe(e),{workspacePlatform:n}=await t.getOptions();return n?.disableMultiplePages})(e),o=await(async e=>{const t=fe(e),{workspacePlatform:n}=await t.getOptions();return n?.isLocked})(e),i=await Ae(e),s=[],c=t.length>0;r&&(s.push(to()),a||s.push(ao(!o,i))),s.push(Ya);const l=kn(),u=await l.getCurrentWorkspace(),d=await l.Storage.getWorkspaces(),p=d.find((e=>e.workspaceId===u.workspaceId));s.push({type:Za.Label,label:Vn("contextMenu.restore"),data:{type:g.RestoreChanges},enabled:!!p}),s.push({type:Za.Label,label:Vn("contextMenu.saveWorkspace"),data:{type:g.SaveWorkspace},enabled:!!p}),s.push({type:Za.Label,label:Vn("contextMenu.saveWorkspaceAs"),data:{type:g.SaveWorkspaceAs}}),s.push({type:Za.Label,label:Vn("contextMenu.renameWorkspace"),data:{type:g.RenameWorkspace},enabled:!!p}),d.some((e=>e.workspaceId!==u.workspaceId))?s.push({label:oo().label,submenu:co(u,d,g.SwitchWorkspace),data:void 0},{label:io().label,submenu:co(u,d,g.DeleteWorkspace),data:void 0}):s.push({label:oo().label,enabled:!1,data:void 0},{label:io().label,enabled:!1,data:void 0}),s.push({label:Vn("contextMenu.downloads"),data:{type:g.Downloads}});const f=await l.Theme.getThemes();return(f[0]&&"palettes"in f[0]||!f[0]||0===f.length)&&s.push({label:so().label,submenu:await lo(),data:void 0}),s.push(Ya,no(i),ro(i),await(async e=>{const t=await Ja();return{label:Vn("contextMenu.print"),submenu:[{type:Za.Label,label:Vn("contextMenu.submenu.print"),data:{type:g.Print},enabled:e},{type:Za.Label,label:Vn("contextMenu.submenu.printAll"),data:{type:g.PrintAll}},...t?[Ya,{type:Za.Label,label:Vn("contextMenu.printScreen"),data:{type:g.PrintScreen}}]:[]],data:void 0}})(c)),n?[...s,Xa(),Ya,{type:Za.Label,label:Vn("contextMenu.openStorefront"),data:{type:g.OpenStorefront}},Ya,eo()]:[...s,Ya,Xa(),Ya,eo()]})(e.identity,e.selectedViews),a=await go();n||(r.find((e=>e.data?.type===g.Quit)).label=`Quit ${a}`);const{rect:o,...i}=e,{x:s,y:c}=n?{x:o.left+o.width,y:o.bottom}:e,l={...i,x:s,y:c,template:r,callback:wo};await this.openGlobalContextMenu(l,t)}async function ko(e,t){const n={...e,callback:fo};await this.openViewTabContextMenu(n,t)}async function So(e,t){const n=await(async(e,t)=>{const n=await kn().Storage.getPage(e),r=await er(),a=await Ae(t),o=r.find((t=>t.pageId===e)),i=Rn(o.layout.content)>1,{workspacePlatform:s}=await fe(t).getOptions(),c=!(s.isLocked||s.preventPageClose||o.closeButton?.disabled||o.closeButton?.hidden),l=[{type:Za.Label,label:Vn("enterpriseContextMenu.newTab"),data:{type:m.NewPage}},Ya,{type:Za.Label,label:Vn("reload"),data:{type:m.Refresh}},{type:Za.Label,label:Vn("enterpriseContextMenu.duplicate"),data:{type:m.Duplicate},enabled:!s.isLocked},await Qa(),Ya,{type:Za.Label,label:Vn(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:m.Close},enabled:c}],u=[{type:Za.Label,label:Vn("enterpriseContextMenu.newTab"),data:{type:m.NewPage}},Ya,{type:Za.Label,label:Vn("enterpriseSaveModal.renameSupertab"),data:{type:m.Rename},enabled:!s.isLocked&&!!n&&i},{type:Za.Label,label:Vn("enterpriseContextMenu.duplicate"),data:{type:m.Duplicate},enabled:!s.isLocked},Ya,{type:Za.Label,label:Vn("enterpriseContextMenu.saveSupertab"),data:{type:m.Save},enabled:i},{type:Za.Label,label:Vn("enterpriseContextMenu.saveSupertabAs"),data:{type:m.SaveAs},enabled:i},Ya,{type:Za.Label,label:Vn("enterpriseContextMenu.deleteSupertab"),data:{type:m.DeletePage},enabled:!!n},Ya,{type:Za.Label,label:Vn(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:m.Close},enabled:c}],d=[{type:Za.Label,label:Vn("contextMenu.savePage"),data:{type:m.Save},enabled:!0},{type:Za.Label,label:Vn("saveMenu.savePageAs"),data:{type:m.SaveAs},enabled:!0},{type:Za.Label,label:"Save Workspace As",data:{type:m.SaveWorkspaceAs}},{type:Za.Label,label:"Refresh",data:{type:m.Refresh}},Ya,{type:Za.Label,label:Vn("saveModal.renamePage"),data:{type:m.Rename},enabled:!!n},{type:Za.Label,label:Vn("contextMenu.duplicatePage"),data:{type:m.Duplicate},enabled:!s.isLocked},Ya,{type:Za.Label,label:Vn("saveModal.closePage"),data:{type:m.Close},enabled:c}];return a?i?u:l:d})(e.pageId,e.identity),r={...e,template:n,callback:(t,n)=>{(async(e,t,n)=>{const r=kn().Browser.wrapSync(t.identity),a=fin.Window.wrapSync(t.identity),o=await $t(t.identity),i=await Ae();switch(e&&je({type:"Page Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e?.type){case m.Save:await ca(t.identity,t.pageId);break;case m.SaveAs:await la(t.identity,t.pageId);break;case m.NewPage:await sa(t.identity);break;case m.DeletePage:await(async(e,t)=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await n.Storage.getPages()).find((e=>e.pageId===t));a&&await(async(e,t)=>{const{windowOptions:n,content:r}=await(async(e,t)=>{const n=await Ae(e);return{title:"Delete Page",windowOptions:{url:new URL(await oe(n,!1)+z.ResponseModal).toString(),name:de.BrowserMenu,defaultHeight:172,defaultWidth:464,modalParentIdentity:e},content:{title:Vn("enterpriseDeleteModal.deleteSupertab",{title:t}),body:Vn("enterpriseDeleteModal.deleteSupertabWarning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel",variant:n?"outline":void 0},{label:Vn("global.delete"),type:"primary",id:"Delete",variant:n?"submit":void 0}]}}}})(e,t),a=await De(n,n.modalParentIdentity),o={...n,top:a.top,left:a.left};return"Delete"===(await Zr({options:o,content:r})).data.actionName})(e,a.title)&&(await n.Storage.deletePage(a.pageId),await r.removePage(t),Wr(Vn("enterpriseSuccessIndicator.supertabDeleted"),e,Vn("enterpriseSuccessIndicator.supertabHasBeenDeleted",{title:a.title})))})(t.identity,t.pageId);break;case m.Rename:if(await Ae(t.identity)){await r.setActivePage(t.pageId);const e=await Ta();await e.dispatch("open",{parentIdentity:t.identity,type:Oa.RenameSupertab,anchorBehavior:yo.Center,x:n.left+n.width/2-164,y:n.bottom-8,payload:{pageId:t.pageId}})}else await r._openSaveModal({menuType:A.RENAME_PAGE,id:t.pageId});break;case m.Duplicate:o.dispatch(zt.DuplicatePage,t.pageId);break;case m.Close:i?await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await n.getPages();for(const a of r)if(a.pageId===t){await n.removePage(a.pageId),await n._trackRemovedTab({identity:e,page:a});break}})(t.identity,t.pageId):o.dispatch(zt.ClosePage,{pageId:t.pageId});break;case m.Custom:if(e.action){const n={callerType:P.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,n)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`);break;case m.Refresh:await(async(e,t)=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await r.getPages()).find((e=>t?e.pageId===t:e.isActive));a?.layout?.content&&En(a.layout.content).forEach((async e=>{(await fin.View.wrap({uuid:n.identity.uuid,name:e.name})).reload()}))})(t.identity,t.pageId);break;case m.CloseOthers:await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await n.getPages();for(const a of r)a.pageId!==t&&(await n.removePage(a.pageId),await n._trackRemovedTab({identity:e,page:a}))})(t.identity,t.pageId);break;case m.SaveWorkspaceAs:await ia(t.identity);break;case m.Print:{const e=await r._getLayoutsWithSelectedViews(),{selectedViews:n}=e.find((e=>e.pageId===t.pageId));await pa(n);break}case m.PrintAll:await r.setActivePage(t.pageId),await a.print({content:"views",includeSelf:!1});break;case m.PrintScreen:await r.setActivePage(t.pageId),await a.print({content:"screenshot"})}})(t,n,e.rect)}};await this.openPageTabContextMenu(r,t)}async function Co(e,t){const n={...e,template:await(async()=>{const e=kn(),t=await e.getCurrentWorkspace(),n=(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));return[{type:Za.Label,label:Vn("contextMenu.saveWorkspace"),enabled:!!n,data:{type:S.SaveWorkspace}},{type:Za.Label,label:Vn("saveMenu.saveWorkspaceAs"),data:{type:S.SaveWorkspaceAs}},{type:Za.Separator,data:void 0},{type:Za.Label,label:Vn("contextMenu.savePage"),data:{type:S.SavePage}},{type:Za.Label,label:Vn("saveMenu.savePageAs"),data:{type:S.SavePageAs}}]})(),callback:mo};await this.openSaveButtonContextMenu(n,t)}const Po="dock-companion-updates",Io=async()=>(await fin.Application.getCurrentSync().getChildWindows()).find((e=>e.identity.name===de.DockCompanion)),xo=et(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),Ao=T&&E&&Da("dock-provider-configs","dock-provider-configs");async function _o(e){if(!Ao)throw new Error("Unable to get Dock provider config - IndexDB not supported");return await(0,Wa.get)(e,Ao).catch((e=>{console.warn("Failed to retrieve Dock provider config from IndexedDB",e)}))}async function Eo(e){await(0,Wa.set)(e.id,e,Ao)}const Mo=T&&E&&Ba("openfin-workspace-platform-workspaces","workspaces");async function To(e){if(!Mo)throw new Error("Unable to get workspace - IndexDB not supported");const t=await(0,Wa.get)(e,Mo);if(t)return t.workspaceId=e.toString(),t.title=t.title||t.workspaceId,t}async function Ro(e){if(!Mo)throw new Error("Unable to get workspaces - IndexDB not supported");const t=await(0,Wa.keys)(Mo),n=(await Promise.all(t.map((e=>To(e.toString()))))).filter((e=>!!e));return e?n.filter((t=>Fa(t.title,e))):n}async function Oo({workspace:e}){if(!Mo)throw new Error("Unable to create workspace - IndexDB not supported");const t=(await Ro()).find((t=>t.title===e.title));if(t&&t.workspaceId!==e.workspaceId)throw new Error(`Workspace with title '${e.title}' already exists.`);await(0,Wa.set)(e.workspaceId,e,Mo)}async function Wo(e){if(!Mo)throw new Error("Unable to delete workspace - IndexDB not supported");await(0,Wa.del)(e,Mo)}async function Do({workspaceId:e,workspace:t}){if(!Mo)throw new Error("Unable to update workspaces - IndexDB not supported");if(!await To(e))throw new Error("workspace not found");await Oo({workspace:t}),e!==t.workspaceId&&await Wo(e)}const Bo=async(e,t,n)=>{const r=await kn().Browser.getAllAttachedPages(),a=new Set(r.map((e=>e.title)).filter((e=>!!e))),o=new Set(r.map((e=>e.pageId)).filter((e=>!!e))),i=t?.defaultPageOptions,s="enterprise"===n?.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType,c=await te(),l=await(async(e,t,n)=>{if(n)return ae();const r=t?.workspacePlatform?.newTabUrl;if(r)return r;const a=e?.defaultWindowOptions?.workspacePlatform?.newTabUrl;return a||void 0})(t,n,s);return e.map((e=>{if("reparent"===e.multiInstanceViewBehavior)return{...e,layoutContainerKey:It()};((e,t)=>{e.pageId||=It(),t.has(e.pageId)&&(console.warn("PageID collision detected. All Page IDs should be unique. A random new pageId will be generated"),e.pageId=It()),t.add(e.pageId)})(e,o),s?e.iconUrl=`${c}/enterprise/icons/enterprise-page.svg`:e.title=Xn(e.title,Array.from(a.keys())),a.add(e.title),e.panels?.reduce(((e,t)=>{const n=Object.values(f);if(!n.includes(t.position))throw new Error(`Encountered a panel with unsupported position "${t.position}". Supported positions are: ${n.toString()}`);if(1==e[t.position])throw new Error(`Found more than 1 panel at position: ${t.position}. Only 1 panel at a given position is currently supported.`);return{...e,[t.position]:e[t.position]+1}}),{[f.Left]:0,[f.Right]:0,[f.Top]:0,[f.Bottom]:0});const n="panels"in e?e.panels:i?.panels;let r=(u=e.layout,d=t?.defaultViewOptions,In({...u},(e=>((e,t)=>{return n=Cn(e,t),{...n,name:n.name?n.name:`internal-generated-view-${It()}`,_internalWorkspaceData:{...n._internalWorkspaceData,viewIdentifier:n._internalWorkspaceData?.viewIdentifier||It()}};var n})(e,d))));var u,d;return l&&!r?.settings?.newTabButton&&(r={...r,settings:{...r?.settings,newTabButton:{url:l}}}),{...i,...e,panels:n&&qn(n),layoutContainerKey:It(),layout:r,isLayoutCreated:!1}}))};async function Fo(e){return e?"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==":(await Q()).displayViewTabDefaultIcon?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":"data:image/svg+xml,%3Csvg%20style%3D%22background-color%3A%237D808A%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%2010%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M4.64648%200.874962C4.84174%200.6797%205.15833%200.6797%205.35359%200.874962L9.12482%204.6462C9.32009%204.84146%209.32009%205.15804%209.12482%205.3533L5.35359%209.12454C5.15833%209.3198%204.84174%209.3198%204.64648%209.12454L0.875245%205.3533C0.679982%205.15804%200.679982%204.84146%200.875245%204.6462L4.64648%200.874962ZM5.00003%201.93562L1.9359%204.99975L5.00003%208.06388L8.06416%204.99975L5.00003%201.93562Z%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E"}const No={dimensions:{borderWidth:3,headerHeight:30}},Lo=(he.uuid,de.BrowserAddressSearchPrefix);const $o=async(e,t)=>{const n={uuid:t.uuid,name:t.name};await Yr(n,e.title??await go(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()},Uo=e=>{const t=e.name===de.Home,n=e.name?.startsWith(de.HomeInternal),r=e.name?.startsWith(de.BrowserMenu)||e.name?.startsWith(de.BrowserSaveMenu);return!t&&!n&&!r},jo=e=>JSON.parse(JSON.stringify(e));async function Vo(e,t,n){const r=e.manifestUrl?await t({manifestUrl:e.manifestUrl},n):void 0;if(r?.interop&&e.interop){const t={...e,...r,interop:e.interop};return delete t.manifestUrl,t}return e}const Go=e=>{const t=jo(e);return t._internalWorkspaceData?.browserNavigationButtons&&(t.workspacePlatform={...t.workspacePlatform,browserNavigationButtons:t._internalWorkspaceData.browserNavigationButtons},delete t._internalWorkspaceData.browserNavigationButtons),t},Ho=e=>{const t=jo(e);return t.workspacePlatform&&(t._internalWorkspaceData={...t._internalWorkspaceData,...t.workspacePlatform},delete t.workspacePlatform),t},zo={reload:[{keys:"Ctrl+R",preventDefault:!0}],back:[{keys:"Alt+Left",preventDefault:!0}],forward:[{keys:"Alt+Right",preventDefault:!0}]},qo={reload:[{keys:"Cmd+R",preventDefault:!0}],back:[{keys:"Cmd+[",preventDefault:!0},{keys:"Cmd+Left",preventDefault:!0}],forward:[{keys:"Cmd+]",preventDefault:!0},{keys:"Cmd+Right",preventDefault:!0}]},Ko=async()=>await Ja()?zo:qo,Jo=(e,t)=>jo(e).map((e=>("componentState"in e?e.componentState=t(e.componentState):"content"in e&&(e.content=Jo(e.content,t)),e))),Zo=e=>{if(e){const t=jo(e);return t.content&&(t.content=Jo(t.content,Go)),t}return e},Yo=e=>{if(e){const t=jo(e);return t.content&&(t.content=Jo(t.content,Ho)),t}return e};async function Qo({app:e,target:t}){const n=fin.Platform.getCurrentSync();switch(e.manifestType){case l.Snapshot:return n.applySnapshot(e.manifest);case l.View:return async function(e,t){const n=fin.Platform.getCurrentSync();if("view"===t.entityType){const n=fin.View.wrapSync(t),r=await n.getParentLayout();return await r.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),n.destroy()}return n.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case l.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}let Xo;const ei=()=>{if(!Xo){const e=et(`${"undefined"!=typeof fin&&fin.me.identity.uuid}-enterprise-app-directory`);Xo=e()}return Xo};async function ti(e){return await Ae(e.identity)?(await ei()).dispatch(Vt.GetApps,e.req):[]}async function ni(e){return await Ae(e.identity)?(await ei()).dispatch(Vt.GetSearchProviders,e):[]}async function ri(e){return(await ei()).dispatch(Vt.GetCuratedContent,e)}async function ai(e){return(await ei()).dispatch(Vt.GetRecentlyVisited,e)}let oi=[];const ii=()=>oi,si=(e,t)=>n=>{const r=null!==e;return class extends n{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e,analytics:{isSupported:!0}}),this.detachPagesFromWindow=lr,this.getAllAttachedPages=er,this.getPagesForWindow=dr,this.getPageForWindow=pr,this.markUnsavedPagesAsSavedInternal=Sr,this.launchApp=Qo,this.savePage=sr,this.saveWorkspace=ra,this.createSavedPageInternal=ar,this.updateSavedPageInternal=ir,this.deleteSavedPageInternal=or,this.reorderPagesForWindow=fr,this.getUniquePageTitle=gr,this.updatePageForWindow=cr,this.getLastFocusedBrowserWindow=Ia,this.getThemes=ii,this.invokeCustomActionInternal=Ma,this.requestQuitPlatformDialogInternal=$o,this.getCurrentWorkspace=ta,this.setActiveWorkspace=Xr,this.getLanguageResourcesInternal=ma,this.getPageByViewIdentity=async e=>{const t=await fin.Platform.Layout.getLayoutByViewIdentity(e),n=t.identity;if(!("layoutName"in n))throw new Error("Failed to get layout's identity");const r=await kn().Browser.wrapSync(t.identity).getPages(),a=r.findIndex((e=>e.layoutName===n.layoutName));if(-1===a)throw new Error("Failed to get page's index");return{windowIdentity:{name:t.identity.name,uuid:t.identity.uuid},page:r[a],pageIndex:a}},this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.getDockProviderConfig=this.getDockProviderConfig.bind(this),this.saveDockProviderConfig=this.saveDockProviderConfig.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this),this.getSelectedScheme=this.getSelectedScheme.bind(this),this.setSelectedScheme=this.setSelectedScheme.bind(this),this.analyticsInternal=this.analyticsInternal.bind(this),this.handleAnalytics=this.handleAnalytics.bind(this),this.getLanguage=this.getLanguage.bind(this),this.setLanguage=this.setLanguage.bind(this),this.handleSaveModalOnPageClose=this.handleSaveModalOnPageClose.bind(this),this.shouldPageClose=this.shouldPageClose.bind(this),this.shouldWindowClose=this.shouldWindowClose.bind(this),this.handlePagesAndWindowClose=this.handlePagesAndWindowClose.bind(this),this.setActivePage=this.setActivePage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.copyPage=this.copyPage.bind(this),this.addPage=this.addPage.bind(this),this.addDefaultPage=this.addDefaultPage.bind(this),this.markUnsavedPagesAsSavedInternal=this.markUnsavedPagesAsSavedInternal.bind(this),this.trackRemovedTabInternal=this.trackRemovedTabInternal.bind(this),this.restoreRemovedTabInternal=this.restoreRemovedTabInternal.bind(this),this.trackVisitedSiteInternal=this.trackVisitedSiteInternal.bind(this),this.getRecentlyVisitedSitesInternal=this.getRecentlyVisitedSitesInternal.bind(this),this.getFrequentlyVisitedSitesInternal=this.getFrequentlyVisitedSitesInternal.bind(this),this.searchSitesInternal=this.searchSitesInternal.bind(this),this.getSearchProvidersInternal=this.getSearchProvidersInternal.bind(this),this.getCuratedContentInternal=this.getCuratedContentInternal.bind(this),this.handleRequestNavigationInternal=this.handleRequestNavigationInternal.bind(this),this.refreshBookmarksInternal=this.refreshBookmarksInternal.bind(this),this.launchBookmarkInternal=this.launchBookmarkInternal.bind(this),this.getNotificationsConfig=this.getNotificationsConfig.bind(this),this.updateDockFavoritesInternal=this.updateDockFavoritesInternal.bind(this),this.updateContentMenuInternal=this.updateContentMenuInternal.bind(this),this.launchDockEntryInternal=this.launchDockEntryInternal.bind(this),this.setDockFavoritesOrderInternal=this.setDockFavoritesOrderInternal.bind(this),this.navigateContentMenuInternal=this.navigateContentMenuInternal.bind(this),this.setDefaultDockButtonsOrderInternal=this.setDefaultDockButtonsOrderInternal.bind(this),this.getDockWorkspacesContextMenuInternal=this.getDockWorkspacesContextMenuInternal.bind(this),this.handleDockWorkspacesMenuResponseInternal=this.handleDockWorkspacesMenuResponseInternal.bind(this),this.removeDockFavoriteInternal=this.removeDockFavoriteInternal.bind(this),this.addDockFavoriteInternal=this.addDockFavoriteInternal.bind(this),this.focusAndExpandSearchInternal=this.focusAndExpandSearchInternal.bind(this)}async applyWorkspace(...e){return Qr.apply(this,e)}async getSnapshot(){const e=r?await async function(e){const t=(await ye()).map((async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await $t(e)).dispatch(zt.UpdatePagesWindowOptions))(e.identity)}));return await Promise.all(t),e?e():Tt()}((async()=>Tt(await super.getSnapshot(void 0,fin.me.identity)))):await Tt(await super.getSnapshot(void 0,fin.me.identity));let t={...e,windows:e.windows.filter(Uo).map(Mt)};return t=(e=>{const t=jo(e);return t.windows.forEach((e=>{e.layout&&(e.layout=Zo(e.layout)),e.workspacePlatform?.pages?.forEach((e=>{e?.layout&&(e.layout=Zo(e.layout))}))})),t})(t),t}async getViewSnapshot(e){let t=await super.getViewSnapshot(e);return t=Go(t),t}async applySnapshot({snapshot:e,options:t}){let n=e;"string"==typeof n&&(n=await super.fetchManifest({manifestUrl:n},fin.me.identity));const a=function(e){for(const t of e.windows)if(t.workspacePlatform?.pages?.length)return!0;return!1}(n);if(!r&&a)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return n=(e=>{const t=jo(e);return t.windows.forEach((e=>{e.layout=Yo(e.layout),e.workspacePlatform?.pages?.forEach((e=>{e.layout=Yo(e.layout)}))})),t})(n),super.applySnapshot({snapshot:n,options:t})}async createWindow(t,n){if(r&&"tearout"===t.reason){const e=await fin.Window.wrapSync(n).getOptions(),r=e.workspacePlatform?.windowType;t.taskbarIconGroup=e.taskbarIconGroup,r&&(t.workspacePlatform||={},t.workspacePlatform.windowType=e.workspacePlatform.windowType,r===C.Platform&&(t.url=e.url))}if(!r||t.workspacePlatform?.windowType===C.Platform){const e=await super.createWindow(t,n);return je({type:"Window",action:"Open Window",value:e.identity.name,data:{uuid:e.identity.uuid}}),e}var a;a={allowed:!0},Ne||(Ne=!0,Fe(Be.Browser,a)),((e=[])=>{const t=e.filter((e=>e.type!==k.Custom)),n=new Set,r=[];for(const e of t)n.has(e.type)&&r.push(e.type),n.add(e.type);if(r.length>0){const e=r.join(", ");throw new Error(`Encountered a duplicate "${e}" toolbar button. No more than one instance of a button type may be provided.`)}})(t.workspacePlatform?.toolbarOptions?.buttons);let o=(e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...n})=>({...n,workspacePlatform:{pages:t||e||null}}))(e))(t);e?.defaultWindowOptions?.hotkeys&&(o.hotkeys=e.defaultWindowOptions.hotkeys),o=await async function(e,t,n){let r=e;const a="enterprise"===r.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType;if(r.layout&&!r.workspacePlatform?.pages?.length){const e=await gr(),n={...await Ot(e,r.layout),isActive:!0};r.workspacePlatform||={},r.workspacePlatform.pages=await Bo([n],t,r)}t?.browserIconSize&&(r.workspacePlatform||={},r.workspacePlatform.browserIconSize=t.browserIconSize);const o=n?.themes?.[0];if(r.workspacePlatform?.pages?.length){const e=await Bo(r.workspacePlatform.pages,t,r),i=e,s=(e=>{if(!e)return;let t=e.find((e=>e.isActive));return!t&&e.length>0&&(e[0].isActive=!0,t=e[0]),t})(i);if(i.forEach((e=>{e.pageId!==s?.pageId&&(e.isActive=!1)})),await Kn(i),r.workspacePlatform.pages=e,r=kt({},await(async e=>({contextMenuOptions:{enabled:!1},experimental:{showFavicons:!0,defaultFaviconUrl:await Fo(e)},viewVisibility:{showViewsOnSplitterDrag:{enabled:!0},showViewsOnWindowResize:{enabled:!0}}}))(a),t?.defaultWindowOptions,r,await(async e=>({backgroundThrottling:!0,url:await oe(e,!0),contextMenu:!0,closeOnLastViewRemoved:!1,permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}}))(a)),s.layout=kt(s.layout,No),async function(e){if(e.icon||e.taskbarIcon){const t=fin.Application.getCurrentSync(),n=await(await t.getWindow()).getOptions();e.taskbarIconGroup||=n.taskbarIconGroup||fin.me.identity.uuid}if(e.workspacePlatform.icon)if("object"==typeof e.workspacePlatform.icon){const t=window.matchMedia("(prefers-color-scheme: dark)");e.icon=t.matches?e.workspacePlatform.icon.dark:e.workspacePlatform.icon.light}else e.icon=e.workspacePlatform.icon}(r),!r.backgroundColor&&o)if("palette"in o)r.backgroundColor=o?.palette?.background2||o?.palette?.backgroundPrimary;else{const e=n.selectedScheme===w.Dark||n.selectedScheme===w.System&&window.matchMedia("(prefers-color-scheme: dark)")?o?.palettes.dark:o?.palettes.light;r.backgroundColor=e?.background2||e?.backgroundPrimary}r=Ce(r,!0);const c=await oe(a,!0);c&&(r.url=c),r.layout=s.layout,r.layoutSnapshot=((e,t)=>({layouts:e.reduce(((e,n)=>{if(!n.isActive){if(!t)return e;if(!(e=>{const t=e.layout,n=t.content?En(t.content):[],r=n.length;return r>1?{...e,singleViewName:null}:1===r?{...e,singleViewName:n[0].name}:void 0})(n).singleViewName)return e}return e[n.layoutContainerKey]=n.layout,e}),{}),pages:e}))(r.workspacePlatform.pages,a),r.workspacePlatform.windowType=r.workspacePlatform.windowType??C.Browser}if(r.cornerRounding&&delete r.cornerRounding,r.name||r.layoutSnapshot?r.contextMenuOptions?.template?.length>0?r.contextMenuOptions.template=r.contextMenuOptions.template.filter((e=>"print"!==e)):r.contextMenuOptions={template:[],enabled:!1}:r.name=`${de.ClassicWindow}-${It()}`,r.workspacePlatform&&n&&(r.workspacePlatform._themeData=n),a){const e=await ae();r.workspacePlatform.newPageUrl=e,r.workspacePlatform.newTabUrl=e,r.layout&&(r.layout.dimensions.borderWidth=4,r.layout.dimensions.headerHeight=28),r.name=r.name||`${de.BrowserWindow}-${It()}`;const t=Lo+r.name,n=fin.Application.getCurrentSync();if(!(await n.getViews()).some((e=>e.identity.name===t))&&r.name.startsWith(de.BrowserWindow)){const e=await re()+z.BrowserPopupMenuAddressSearchResultsView;(await fin.View.create({name:t,contextMenuOptions:{enabled:!0},url:e,target:fin.me.identity,bounds:{top:0,left:0,width:0,height:0}})).navigate(e)}}return r}(o,e,{themes:ii(),selectedScheme:this.getSelectedScheme()}),o=await(async e=>{const t=await fin.System.getMonitorInfo();let n=t.primaryMonitor;const r=e.defaultLeft,a=e.defaultTop;t.nonPrimaryMonitors.forEach((e=>{const{top:t,bottom:o,left:i,right:s}=e.availableRect;r>=i&&r<=s&&a>=t&&a<=o&&(n=e)}));const o=n.availableRect.bottom-n.availableRect.top,i=n.availableRect.right-n.availableRect.left;return e.defaultHeight=Math.min(e.defaultHeight||800,o),e.defaultWidth=Math.min(e.defaultWidth||800,i),e})(o);const i=await(e=>async(t,n)=>{let r=!1;const a=await e(t,n);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await a.addListener("show-requested",(async()=>{if(r)return;const e=await a.getOptions();await a.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),r=!0})),a):a})(((e,t)=>super.createWindow(e,t)))(o,n);return je({type:"Window",action:"Open Window",value:i.identity.name,data:{uuid:i.identity.uuid}}),i}async createView(t,n){t.opts=Cn(t.opts,e?.defaultViewOptions),e?.defaultViewOptions?.hotkeys&&(t.opts.hotkeys=e.defaultViewOptions.hotkeys),t.opts=await Vo(t.opts,this.fetchManifest,n),t.opts=await(async e=>{const t=jo(e),n=t.workspacePlatform?.browserNavigationButtons;if(n){const e=Object.keys(n);for(const r of e)if(n[r]){const e=(await Ko())[r];t.hotkeys?t.hotkeys.push(...e):t.hotkeys=[...e]}}return t})(t.opts),t.opts=Ho(t.opts);const r=await super.createView(t,n);return((e,t)=>{const n=fin.View.wrapSync(e);if(!t)return;const r=e=>{(async(e,t,n)=>{if("keyDown"!==n.inputType)return;const r=await(async e=>{const t=await e.getCurrentWindow(),n=await t.getOptions(),r=n.workspacePlatform?.navigationButtons;return r.enabled&&!r.hotkeysDisabled})(e),a=await Ja();if(r){if(t.reload){const r=n.ctrlKey&&!n.altKey&&!n.metaKey&&!n.shiftKey&&"r"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"r"===n.key;(a?r:o)&&t?.reload&&(e.reload(),je({type:"View",action:"Reload",value:e.identity.name}))}if(t.back){const r=!n.ctrlKey&&n.altKey&&!n.metaKey&&!n.shiftKey&&"ArrowLeft"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"ArrowLeft"===n.key,i=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"["===n.key;(a?r:o||i)&&t?.back&&(e.navigateBack(),je({type:"View",action:"Back",value:e.identity.name}))}if(t.forward){const r=!n.ctrlKey&&n.altKey&&!n.metaKey&&!n.shiftKey&&"ArrowRight"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"ArrowRight"===n.key,i=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"]"===n.key;(a?r:o||i)&&t?.forward&&(e.navigateForward(),je({type:"View",action:"Forward",value:e.identity.name}))}}})(n,t,e)};n.addListener("hotkey",r),n.once("destroyed",(()=>{n.removeListener("hotkey",r)}))})(r.identity,t.opts._internalWorkspaceData?.browserNavigationButtons),r}async replaceView(t,n){return t.opts.newView=await Cn(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await Vo(t.opts.newView,this.fetchManifest,n),super.replaceView(t,n)}async replaceLayout(e,t){return await Ae(t)||delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async getSavedPage(...e){return La.apply(this,e)}async getSavedPages(...e){return $a.apply(this,e)}async createSavedPage(...e){return Ua.apply(this,e)}async deleteSavedPage(...e){return ja.apply(this,e)}async updateSavedPage(...e){return Va.apply(this,e)}async getSavedWorkspace(...e){return To.apply(this,e)}async getSavedWorkspaces(...e){return Ro.apply(this,e)}async createSavedWorkspace(...e){return Oo.apply(this,e)}async deleteSavedWorkspace(...e){return Wo.apply(this,e)}async updateSavedWorkspace(...e){return Do.apply(this,e)}async getDockProviderConfig(...e){return _o.apply(this,e)}async saveDockProviderConfig(...e){return Eo.apply(this,e)}async attachPagesToWindow(t){const n=await Bo(t.pages,e);await Kn(n),await(async e=>{await(async e=>(await $t(e.identity)).dispatch(zt.AttachPagesToWindow,e))(e)})({...t,pages:n})}async addPage(e){const t=await Ae(e.identity),n=await ct(e.identity),{page:r,insertionIndex:a}=e;r?.title||(r.title=await n.dispatch(at.GetUniquePageTitle,void 0));const o=(await this.getAllAttachedPages()).find((e=>e.pageId===r.pageId||e.title===r.title));if(o){if(o.pageId===r.pageId)throw new Error(`page with id ${r.pageId} is already attached to a browser window ${o.parentIdentity.name}`);if(!t)throw new Error(`addPage title collision, page with title ${r.title} already exists, conflicting page id: ${o.pageId} with title ${o.title}`)}const i={identity:e.identity,pages:[{...r,multiInstanceViewBehavior:e.multiInstanceViewBehavior||"duplicate"}],insertionIndex:a};await this.attachPagesToWindow(i)}async addDefaultPage(e){await this.addPage(e),await this.setActivePage({identity:e.identity,pageId:e.page.pageId})}async setActivePage(...e){return ur.apply(this,e)}async openGlobalContextMenuInternal(...e){return vo.apply(this,e)}async openGlobalContextMenu(...e){return bo.apply(this,[...e,Oa.GlobalMenu,yo.BottomRight])}async openViewTabContextMenuInternal(...e){return ko.apply(this,e)}async openViewTabContextMenu(...e){return bo.apply(this,[...e,Oa.ContextMenu])}async openPageTabContextMenuInternal(...e){return So.apply(this,e)}async openPageTabContextMenu(...e){return bo.apply(this,[...e,Oa.ContextMenu])}async openSaveButtonContextMenu(...e){return bo.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return Co.apply(this,e)}getSelectedScheme(...e){return bn.apply(this,e)}async setSelectedScheme(...e){return yn.apply(this,e)}async handlePageChanges(...e){return kr.apply(this,e)}async analyticsInternal(...e){return Mr.apply(this,e)}async handleAnalytics(...e){}async handleSaveModalOnPageClose(...e){return wr.apply(this,e)}async shouldPageClose(...e){return mr.apply(this,e)}async shouldWindowClose(...e){return yr.apply(this,e)}handlePagesAndWindowClose(...e){return br.apply(this,e)}async copyPage(...e){return vr.apply(this,e)}async getNotificationsConfig(){return t}async setLanguage(...e){return wa.apply(this,e)}async getLanguage(){return ga.apply(this)}async trackRemovedTabInternal(...e){return Ha.apply(this,e)}async restoreRemovedTabInternal(){const e=await(async()=>{const e=await(0,Wa.keys)(Ga);if(e.length>0){const t=Math.max(...e),n=await(0,Wa.get)(t,Ga);return await(0,Wa.del)(t,Ga),n}})();if(e?.page)if(await be(e.identity)){const t=kn().Browser.wrapSync(e.identity);await t.addPage(e.page),await t.setActivePage(e.page.pageId)}else kn().createWindow({name:e.identity.name,workspacePlatform:{pages:[e.page],windowType:C.Browser}});else e?.window&&kn().createWindow({workspacePlatform:{pages:e.window.pages,windowType:C.Browser}})}async trackVisitedSiteInternal(...e){return qa.apply(this,e)}async getRecentlyVisitedSitesInternal(...e){return await ai.apply(this,e)}async getFrequentlyVisitedSitesInternal(...e){return Ka.apply(this,e)}async searchSitesInternal(...e){return await ti.apply(this,e)}async getSearchProvidersInternal(...e){return await ni.apply(this,e)}async getCuratedContentInternal(...e){return await ri.apply(this,e)}async handleRequestNavigationInternal(...e){}async refreshBookmarksInternal(){(await kn().Browser.getAllWindows()).forEach((async({identity:e})=>{(await $t(e)).dispatch(zt.RefreshBookmarksInternal)})),(await Lt(`custom-bookmark-context-menu-${kn().identity.uuid}-${U}`)).dispatch(zt.RefreshBookmarksInternal),await(async()=>{const e=await Io();if(e){const t=await $t(e.identity,Po);await t.dispatch(zt.RefreshBookmarksInternal)}})()}async launchBookmarkInternal(e){return(async e=>{const{ctrlKey:t,metaKey:n,shiftKey:r}=e.sourceEvent,{url:a}=e.bookmark,{sourceIdentity:o}=e,i=await Ja();if(!await me(o))return await(async e=>{const t=kn(),n=await Mn(e.url,e.url),r=await Ot(e.url,n);we((await t.Browser.createWindow({workspacePlatform:{pages:[r]}})).identity)})(e.bookmark);const s=kn().Browser.wrapSync(o),c=await s.getPages(),l=(await s._getLayoutsWithSelectedViews()).find((e=>e.isActive));if(!l)throw Error(`Browser ${o} does not have any active layouts`);const u=c.find((e=>e.isActive)),d=1===Rn(u.layout.content),p=l.selectedViews[0];d?await(async({isWindows:e,ctrlKey:t,metaKey:n,currentViewId:r,browserIdentity:a,url:o,shiftKey:i,activePage:s,pages:c})=>{if(e?t:n){const e=kn().Browser.wrapSync(a),t=await Mn(o,o,a),n={...await Ot(o,t),attachedPageType:"singleView",singleViewName:o},r=c.findIndex((e=>e.pageId===s.pageId));await e._addPage(n,{index:r+1}),i&&e.setActivePage(n.pageId)}else fin.View.wrapSync(r).navigate(o)})({isWindows:i,ctrlKey:t,metaKey:n,currentViewId:p,browserIdentity:o,url:a,shiftKey:r,activePage:u,pages:c}):await(async({isWindows:e,ctrlKey:t,metaKey:n,currentViewId:r,browserIdentity:a,url:o,shiftKey:i,activeLayout:s})=>{if(e?t:n){const e=fin.View.wrapSync(r),t=await e.getCurrentStack(),n=(await t.getViews()).findIndex((e=>e.name===r.name)),i={url:o,browserIdentity:a,title:o};await t.addView(i,{index:n+1})}else await fin.View.wrapSync(s.selectedViews[0]).navigate(o)})({isWindows:i,ctrlKey:t,metaKey:n,currentViewId:p,browserIdentity:o,url:a,shiftKey:r,activeLayout:l})})(e)}async updateDockFavoritesInternal(e){return(async e=>{const t=await Io();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Po);await n.dispatch(Ht.UpdateFavoriteEntries,e)}})(e)}async updateContentMenuInternal(e){return(async e=>{const t=await Io();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Po);await n.dispatch(Ht.UpdateContentMenu,e)}})(e)}async launchDockEntryInternal(e){return(async e=>(await xo()).dispatch("launch-entry",e))(e)}async setDefaultDockButtonsOrderInternal(e){return(async e=>(await xo()).dispatch("set-default-dock-buttons-order",e))(e)}async setDockFavoritesOrderInternal(e){return(async e=>(await xo()).dispatch("set-dock-favorites-order",e))(e)}async addDockFavoriteInternal(e){return(async e=>(await xo()).dispatch("add-favorite-entry",e))(e)}async removeDockFavoriteInternal(e){return(async e=>(await xo()).dispatch("remove-favorite-entry",e))(e)}async navigateContentMenuInternal(e){return(async e=>{const t=await Io();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Po);await n.dispatch(Ht.NavigateContentMenu,e)}})(e)}async getDockWorkspacesContextMenuInternal(){return(async()=>(await xo()).dispatch("get-dock-workspaces-context-menu",void 0))()}async handleDockWorkspacesMenuResponseInternal(e){return(async e=>(await xo()).dispatch("handle-dock-workspaces-menu-response",e))(e)}async focusAndExpandSearchInternal(){return(async()=>{const e=kn();let t=await async function(){const e=Array.from(Pa.values());for(let t=e.length-1;t>=0;t--){const n=fin.Window.wrapSync(e[t]);if(await n.isShowing())return e[t]}}();if(t){const n=e.Browser.wrapSync(t),r=(await n.getPages()).at(-1),a=En(r.layout.content);if(1===a.length&&(e=>{if(e)try{return new URL(e).pathname.includes(z.EnterpriseBrowser)}catch(t){console.error("error parsing url: %O",e)}return!1})(a[0].url))await n.setActivePage(r.pageId);else{const e=await Br(t),{newPageUrl:r}=await Dr();await n._addDefaultPage({identity:n.identity,page:e,newPageUrl:r||void 0})}}else{const n=fin.Window.wrapSync({uuid:fin.me.uuid,name:de.DockCompanion}),r=await Se(await n.getBounds()),a=await async function(e,t,n){const r=await fin.System.getMonitorInfo(),a=n?.availableRect??r.primaryMonitor.availableRect,o={width:a.right-a.left,height:a.bottom-a.top},i=Math.min(600,o.height),s=Math.min(900,o.width),c=a.top+Math.floor((o.height-i)/2);return{height:i,width:s,left:a.left+Math.floor((o.width-s)/2),top:c}}(0,0,r),o=await Br();t=(await e.Browser.createWindow({defaultHeight:600,defaultWidth:900,defaultLeft:a.left,defaultTop:a.top,workspacePlatform:{pages:[o]}})).identity}(await $t(t)).dispatch(zt.FocusAndExpandSearchInternal)})()}}};function ci(e,t,n){const r=si(e,n);try{return"function"==typeof t?e=>t(r(e)):Array.isArray(t)?[...t,r]:e=>new(r(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}}let li;async function ui(e,t){if(!await be({uuid:he.uuid,name:de.DockCompanion})){const n=await Oe(he);await t.createWindow(Ce({name:de.DockCompanion,url:await re()+z.EnterpriseDock,autoShow:!0,frame:!1,smallWindow:!0,saveWindowState:!1,defaultHeight:Pe,defaultWidth:Ie,includeInSnapshots:!1,defaultTop:e.dockPosition?.top??xe,defaultLeft:e.dockPosition?.left??n.left-Ie/2,workspacePlatform:{windowType:"enterprise",...e},throttling:"disabled",resizable:!1,maximizable:!1,backgroundColor:await mt("background1")}))}}const di=async({theme:e,customActions:t,language:n,...r})=>{const a=$.split(".").map((e=>parseInt(e))),o=await(async e=>{if((await Q()).disableRuntimeValidation)return!0;if(await Ae())return!0;const t=(await fin.System.getVersion()).split(".").map((e=>parseInt(e)));return e.every(((n,r)=>!(r<3)||t[r]===e[r]))})(a);if(!o)throw new Error(`Runtime version is not supported.  ${a[0]}.${a[1]}.${a[2]}.* is required`);var i;return e&&(async function(e){const t=e=>{if(!e.includes("#")&&!e.includes("rgb")&&!e.includes("hsl"))throw new Error("Background primary color is not the right format.")};e.forEach((e=>{"palette"in e&&t(e.palette.backgroundPrimary),"palettes"in e&&(t(e.palettes.dark.backgroundPrimary),t(e.palettes.light.backgroundPrimary))})),(e=>{const t=e[0];if("palette"in t){const{palette:e}=t;on.setPalettes({dark:e,light:e})}if("palettes"in t){const{dark:e,light:n}=t.palettes;on.setPalettes({dark:e,light:n})}})(e),oi=e}(e),i={allowed:!0},Fe(Be.Theming,i)),t&&(Ea=t),await async function(e="en-US"){ya(e),function(e="en-US"){Dn().use(On.initReactI18next).init({lng:e,fallbackLng:"en-US",resources:{"en-US":{translation:Nn},"ja-JP":{translation:$n},"zh-CN":{translation:Bn},"ko-KR":{translation:Un},"ru-RU":{translation:jn},"de-DE":{translation:Ln},"zh-Hant":{translation:Fn}},interpolation:{escapeValue:!1}})}(e),await(async e=>{try{const n=await async function(){const e=await Q(),t=e?.translationOverridesUrl??"https://workspace.openfin.co/workspace/assets/translation-override.json";if(""===t)throw new ha("Empty string provided as url to translationOverridesUrl, overrides will not be fetched.");return await fetch(t).then((e=>e.json()))}();(t=(e=>{const t=U.split(".");return Object.keys(e).filter((e=>{const n=e.split(".");if(3!==n.length)return console.warn(`Encountered a translation override version string in an unsupported format: ${e}. Versions must be in A.B.C format where A, B, C are either integers or the wildcard symbol 'x'.`),!1;const[r,a,o]=n;return!(r!==t[0]&&"x"!==r||a!==t[1]&&"x"!==a||o!==t[2]&&"x"!==o)}))})(n),[...t].sort(((e,t)=>fa(e)-fa(t)))).forEach((t=>{const r=n[t];Object.keys(r).forEach((t=>{e.addResourceBundle(t,"translation",r[t],!0,!0)}))}))}catch(e){e instanceof ha?console.warn(e.message):console.error("Error applying a translation override: ",e)}var t})(Dn())}(n?.initialLanguage),function({overrideCallback:e,interopOverride:t,browser:n,notifications:r,analytics:a,integrations:o=[],workspaceAsar:i}){if(!E)throw new Error("Cannot be used outside an OpenFin env.");return li||(li=(async()=>{const s=fin.Platform.getCurrentSync();var c,l;if(s.once("platform-api-ready",(()=>async function(){(async()=>{ue().on("window-closed",_a)})(),async function(){const e=fin.Application.getCurrentSync();await e.addListener("window-focused",xa),await e.addListener("window-closed",Aa)}(),Xr(await ea())}())),s.on("window-show-all-downloads",(({name:e,uuid:t})=>{da({name:e,uuid:t})})),n?.title&&(c=n.title,ho=c),(async e=>{Ir=e,Ir?.sendToOpenFin&&!await Er()&&(()=>{const e=N,t=e+z.Analytics,n=document.createElement("IFRAME");n.setAttribute("src",t),n.setAttribute("style","width: 0px !important"),n.setAttribute("style","height: 0px !important"),n.setAttribute("style","display: none !important"),document.body.appendChild(n),xr=async t=>{n.contentWindow.postMessage(t,e)}})();const t=fin.Application.getCurrentSync();t.addListener("view-created",(async e=>{var t;je({type:"View",action:"Open View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid,url:await(t=e.viewIdentity,fin.View.wrapSync(t).getInfo().then((e=>e.url)))}})})),t.addListener("view-destroyed",(async e=>{je({type:"View",action:"Close View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid}})})),t.addListener("window-closed",(e=>{e.name.startsWith(de.BrowserMenu)||(je({type:"Window",action:"Close Window",value:e.name,data:{uuid:e.uuid}}),(async()=>{const e=Cr,t=await er();if(t.length===e.size)return;const n=t.reduce(((e,t)=>e.set(t.pageId,1)),new Map);for(const[t,r]of e)n.has(t)||(r.action="Close Page",je(r),Pr(t))})())}))})(a),i){const e=`workspace-${encodeURIComponent(fin.me.uuid)}`,{baseUrl:t}=await fin.System.serveAsset({...i,hostName:e});X(t)}if(n?.browserBaseUrl&&X(n.browserBaseUrl),_e(n)){zn=!0;const e=sn();e.setWorkspaceStorageProxy(await(async e=>{const t=`storage-proxy-window-${crypto.randomUUID()}`,[n,r]=await Promise.all([fin.InterApplicationBus.Channel.connect(`channel-${t}`,{wait:!0}),fin.Window.create({autoShow:!1,includeInSnapshots:!1,name:t,url:e})]);return{setItem:(e,t)=>n.dispatch("setItem",{key:e,value:t}),destroy:()=>r.close()}})(`${await te()}${z.EnterpriseStorageProxy}`)),await e.trySynchronizeWorkspaceStorage()}return await fin.Platform.init({overrideCallback:ci(n,e||n?.overrideCallback,r),interopOverride:Ca(t||n?.interopOverride,n)}),l={allowed:!0},Fe(Be.Platform,l),await Promise.all(o.map((async e=>{((e,t)=>{Fe(`${Be.Microflow}:${e}`,t,"integration-feature")})(e.workflowIntegrationName,{allowed:!0,apiVersion:$}),await e._initializeWorkflows()}))),s})()),li}(r)}})(),e.exports=o})()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{deepEqual:()=>m,deepMerge:()=>y,formatError:()=>v,getCommandLineArgs:()=>S,isBoolean:()=>h,isEmpty:()=>c,isInteger:()=>g,isNumber:()=>p,isNumberValue:()=>f,isObject:()=>l,isString:()=>u,isStringValue:()=>d,objectClone:()=>w,randomUUID:()=>b,sanitizeString:()=>k});var a={};n.r(a),n.d(a,{centerContentInIdentity:()=>Ye,centerContentInRect:()=>Qe,findMonitorContainingPoint:()=>et,getAllVisibleWindows:()=>ot,getBoundsCenter:()=>nt,getIdentityBounds:()=>Xe,getWindowPositionOptions:()=>rt,getWindowPositionUsingStrategy:()=>at,pointInRect:()=>tt});var o={};n.r(o),n.d(o,{deleteSavedFavorite:()=>xn,getInfo:()=>An,getPlatformActions:()=>_n,getSavedFavorite:()=>Pn,getSavedFavorites:()=>Cn,init:()=>Sn,setSavedFavorite:()=>In});var i=n(651);Sr("Analytics");class s{constructor(e,t){this._options=e,this._endpointProvider=t,this._logger=Sr(`Endpoint Client:${this._options.id}`)}hasEndpoint(e){return!!Array.isArray(this._options?.endpointIds)&&(!!this._options.endpointIds.some((t=>"*"===t||t===e))&&this._endpointProvider.hasEndpoint(e))}async action(e,t){return this.hasEndpoint(e)?this._endpointProvider.action(e,t):(this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for this action. Returning false.`),!1)}async requestResponse(e,t){if(this.hasEndpoint(e))return this._endpointProvider.requestResponse(e,t);this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for a request/response. Returning undefined.`)}async requestStream(e,t){if(this.hasEndpoint(e))return this._endpointProvider.requestStream(e,t);this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for a requestStream. Returning undefined.`)}}function c(e){return null==e}function l(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function u(e){return null!=e&&"string"==typeof e}function d(e){return u(e)&&e.trim().length>0}function p(e){return null!=e&&"number"==typeof e}function f(e){return p(e)&&!Number.isNaN(e)&&Number.isFinite(e)}function h(e){return null!=e&&"boolean"==typeof e}function g(e){return p(e)&&Number.isInteger(e)}function w(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))}function m(e,t,n=!0){if(l(e)&&l(t)){const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n&&JSON.stringify(r)!==JSON.stringify(a))return!1;for(const a of r)if(!m(e[a],t[a],n))return!1;return!0}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!m(e[r],t[r],n))return!1}return JSON.stringify(e)===JSON.stringify(t)}function y(e,...t){if(!Array.isArray(t)||0===t.length)return e;const n=e,r=t.shift();let a;if(l(n)&&l(r))a=Object.keys(r);else if(Array.isArray(r)){if(!Array.isArray(e))return r;a=Object.keys(r).map((e=>Number.parseInt(e,10)))}if(a){const e=r;for(const t of a){const r=e[t];l(r)?(c(n[t])&&(n[t]={}),y(n[t],r)):Array.isArray(r)?(c(n[t])&&(n[t]=[]),y(n[t],r)):n[t]=r}}return y(e,...t)}function b(){return"randomUUID"in globalThis.crypto?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){const t=globalThis.crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4;return(Number(e)^t).toString(16)}))}function v(e){return c(e)?"":e instanceof Error?e.message:d(e)?e:l(e)&&"message"in e&&u(e.message)?e.message:JSON.stringify(e)}function k(e){return d(e)?e.replace(/<[^>]*>?/gm,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/\n\s*\n/g,"\n"):""}function S(e){if(!d(e))return[];const t=e.match(/(\w+=)?("[^"]*"|'[^']*'|[^ ]+)/g);return c(t)?[]:t}const C=["GET","POST","DELETE","PUT","PATCH"],P=Sr("Endpoint"),I=[];let x,A,_,E=[],M=!1,T=!0,R=!0;function O(e){return I.some((t=>t.id===e))}async function W(e,t){const n=function(e){const t=I.find((t=>t.id===e));return c(t)&&P.warn(`Specified Endpoint Id ${e} is not available`),t}(e);if(c(n))return!1;const r=n.type;if("fetch"===r){const{url:a,...o}=n.options;if(a){const n=N(a,o,t);if(!d(n.options.method)||!C.includes(n.options.method))return P.warn(`${e} specifies a type: ${r} with a method ${n.options.method} that is not supported.`),!1;try{return(await fetch(n.url,n.options)).ok}catch(t){P.error(`${e} action returned an error during fetch`,t)}}}else if("module"===r){const e=await F(n.typeId);return!!e?.action&&e.action(n,t)}return P.warn(`${e} specifies a type: ${r} that is not supported`),!1}async function D(e,t){const n=I.find((t=>t.id===e));if(c(n))return;const r=n.type;if("fetch"!==r){if("module"===r){const e=await F(n.typeId);if(!e?.requestResponse)return;return e.requestResponse(n,t)}P.warn(`${e} specifies a type: ${r} that is not supported`)}else{const{url:a,...o}=n.options;let i=a;if(c(i)&&(i=w(t).url),i){const n=N(i,o,t);if(!d(n.options.method)||!C.includes(n.options.method))return void P.warn(`${e} specifies a type: ${r} with a method ${n.options.method} that is not supported.`);try{const e=await fetch(n.url,n.options);if(e.ok)return await e.json()}catch(t){P.error(`${e} requestResponse returned an error during fetch`,t)}}}}async function B(e,t){const n=I.find((t=>t.id===e));if(c(n))return;const r=n.type;if("module"===r){const e=await F(n.typeId);if(!e?.requestStream)return;return e.requestStream(n,t)}P.warn(`${e} specifies a type: ${r} that is not supported`)}async function F(e){const t=E.find((t=>t.definition.id===e));if(!c(t))return t.implementation;P.warn(`Specified Endpoint Module Id: ${e} is not available`)}function N(e,t,n){const r=w(n);if(!c(r)){const n=Object.keys(r);for(const t of n){const n=`[${t}]`;e.includes(n)&&(e=e.replace(n,encodeURIComponent(r[t])),delete r[t])}t.headers=t.headers??{},t.headers.Accept="application/json","POST"!==t.method&&"PUT"!==t.method&&"PATCH"!==t.method||(t.body=JSON.stringify(r),t.headers["Content-Type"]="application/json")}return{url:e,options:t}}const L="view",$="inline-view",U="window",j="inline-window",V="snapshot",G="inline-snapshot",H="manifest",z="external",q="inline-external",K="appasset",J="inline-appasset",Z="desktop-browser",Y="endpoint",Q="connection",X="unregistered-app",ee=Sr("Lifecycle"),te={};async function ne(e,t,n){ee.info(`Request to fire lifecycle event ${t} received`);const r=te[t];if(!c(r)){r.platform=e,r.lastPayload=n,ee.info(`Notifying ${r.subscribers.length} subscribers of lifecycle event ${t}`);const a=[...r.subscribers];await Promise.all(a.map((async r=>{ee.info(`Notifying subscriber ${r.id} of event ${t}`),await r.handler(e,n)})))}}function re(e,t){const n=b(),r=te[e]??{subscribers:[]};return r.subscribers.push({id:n,handler:t}),te[e]=r,ee.info(`Subscription for lifecycle event ${e} received. Subscription id: ${n} returned`),c(r.platform)||setTimeout((async()=>{c(r.platform)||await t(r.platform,r.lastPayload)}),0),n}function ae(e,t){ee.info(`Request to unsubscribe from lifecycle event ${t} with id: ${e}`);const n=te[t];if(!c(n)){const t=n.subscribers,r=t.findIndex((t=>t.id===e));r>=0&&t.splice(r,1)}}const oe=Sr("ConditionProvider"),ie={};let se;function ce(e,t,n=!0){c(ie[e])?(oe.info("Registering condition",e),ie[e]=t):n?(oe.warn("Replacing existing condition checker that has been registered with this name:",e),ie[e]=t):oe.warn("Not replacing existing condition checker that has been registered with this name:",e)}async function le(e,t,n){return!c(ie[t])&&ie[t](e,n)}async function ue(e){const t=(0,i.getCurrentSync)();await ne(t,"condition-changed",{conditionId:e})}const de=Sr("Settings"),pe="platform-settings";async function fe(){const e=await fin.Application.getCurrent();return(await e.getManifest()).customSettings??{}}async function he(){if(c(se)){se=await fe();const e=se?.endpointProvider;if(!c(e)){const t=dr();if(await async function(e,t){if(e){const n=e.endpoints??[];n.length>0&&(P.info("Adding the following endpoints to the endpoint provider",n),I.push(...n)),E=await cr(e,"endpoint"),await async function(e,t){for(const n of e)await ur(n,t)}(E,t),M=!0,R=e?.endpointClients?.restrictToListed??!0,x=e?.endpointClients?.clientOptions??[],A={...e?.endpointClients?.defaults},T=!R||0!==x.length,_={hasEndpoint:O,action:W,requestResponse:D,requestStream:B}}}(e,t),O(pe)){de.info(`${pe} endpoint specified. Fetching platform settings.`);const e=await D(pe);return de.info("Merging platform-settings over manifest settings."),se={...se,...e},se}}de.info("Settings based on manifest settings.")}return se}function ge(e,t){if(e.startsWith("file:///")){const n=e.replace("file:///","").toLowerCase();return t.some((e=>n.startsWith(e.toLowerCase())))?n:void 0}const n=new URL(e);return t.includes(n.hostname)?n.hostname:void 0}const we={light:{brandPrimary:"#0A76D3",brandSecondary:"#1E1F23",backgroundPrimary:"#FAFBFE",background1:"#FFFFFF",background2:"#FAFBFE",background3:"#F3F5F8",background4:"#ECEEF1",background5:"#DDDFE4",background6:"#C9CBD2",statusSuccess:"#35C759",statusWarning:"#F48F00",statusCritical:"#BE1D1F",statusActive:"#0498FB",inputBackground:"#ECEEF1",inputColor:"#1E1F23",inputPlaceholder:"#383A40",inputDisabled:"#7D808A",inputFocused:"#C9CBD2",textDefault:"#1E1F23",textHelp:"#2F3136",textInactive:"#7D808A",contentBackground1:"#0A76D3",contentBackground2:"#000000",contentBackground3:"#000000",contentBackground4:"#000000",contentBackground5:"#000000",linkDefault:"#6CADE5",linkHover:"#0A76D3"},dark:{brandPrimary:"#0A76D3",brandSecondary:"#383A40",backgroundPrimary:"#1E1F23",background1:"#111214",background2:"#1E1F23",background3:"#24262B",background4:"#2F3136",background5:"#383A40",background6:"#53565F",statusSuccess:"#35C759",statusWarning:"#F48F00",statusCritical:"#BE1D1F",statusActive:"#0498FB",inputBackground:"#53565F",inputColor:"#FFFFFF",inputPlaceholder:"#C9CBD2",inputDisabled:"#7D808A",inputFocused:"#C9CBD2",textDefault:"#FFFFFF",textHelp:"#C9CBD2",textInactive:"#7D808A",contentBackground1:"#0A76D3",contentBackground2:"#000000",contentBackground3:"#000000",contentBackground4:"#000000",contentBackground5:"#000000",linkDefault:"#6CADE5",linkHover:"#0A76D3"}};var me,ye;(ye=me||(me={})).Light="light",ye.Dark="dark";const be=Sr("Themes");let ve,ke;async function Se(){const e=await xe(),t=await Ce();return 0===e.length?we[t]:"palette"in e[0]?e[0].palette:e[0].palettes[t]}async function Ce(){if(!ke)try{const e=(0,i.getCurrentSync)(),t=await e.Theme.getSelectedScheme();if(t===i.ColorSchemeOptionType.System?ke=Me():t===i.ColorSchemeOptionType.Dark?ke=me.Dark:t===i.ColorSchemeOptionType.Light&&(ke=me.Light),!ke){ke=me.Dark;const e=await xe();e.length>0&&(ke=e[0].default??me.Dark,"palette"in e[0]&&e[0].label.toLowerCase().includes("light")&&(ke=me.Light))}}catch{}return ke??me.Dark}async function Pe(){const e=await xe();return 0===e.length?"default":e[0].id??e[0].label}async function Ie(){const e=await xe();return 0===e.length?"default":e[0].iconFolder??e[0].id??e[0].label}async function xe(){if(!ve){const e=await he();ve=function(e){const t=[];if(Array.isArray(e)){const n=Me();for(const r of e){const e=r;if("palette"in e&&c(e.palette)&&delete e.palette,"palettes"in e&&c(e.palettes)&&delete e.palettes,"palette"in e||"palettes"in e){let r=!1;if("palette"in e)e.palette=_e(e.palette,e.label??"",we[me.Dark]),r=!c(e.palette);else if("palettes"in e){const t={dark:_e(e.palettes?.[me.Dark],e.label??"",we[me.Dark]),light:_e(e.palettes?.[me.Light],e.label??"",we[me.Light])};r=!c(t[me.Dark])&&!c(t[me.Light]),e.palettes=t}r?Ee(e,n)?(be.info(`Found a theme that matches system color scheme preferences and making it the default theme: ${n}`),t.unshift(e)):t.push(e):be.warn(`Found a theme that does not contain any colors: ${e.id??e.label}`)}}}return t}(e?.themeProvider?.themes)}return ve.slice()}async function Ae(){return{getThemeId:Pe,getIconFolder:Ie,getPalette:Se,getColorSchemeMode:Ce,themeUrl:async e=>Te(e,await Ie(),await Ce())}}function _e(e,t,n){if(!e)return;const r=Object.keys(e);if(0===r.length)return;const a={...n};for(const t of r){const n=e[t];d(n)&&(a[t]=n)}const o="brandPrimary",i="brandSecondary",s="backgroundPrimary";return e[o]||be.warn(`Theme: ${t} : ${o} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[o]}`),e[i]||be.warn(`Theme: ${t} : ${i} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[i]}`),e[s]||be.warn(`Theme: ${t} : ${s} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[s]}`),a}function Ee(e,t){return"palette"in e?e.label.toLowerCase().includes(t):"palettes"in e&&!c(e.palettes[t])}function Me(){return window.matchMedia?.("(prefers-color-scheme: dark)").matches?me.Dark:me.Light}function Te(e,t,n){return e?e.replace(/{theme}/g,t).replace(/{scheme}/g,n):void 0}let Re="setAsForeground";function Oe(e){const t=[];return JSON.stringify(e,((e,n)=>(n?.name?.length&&!c(n.url)&&t.push(n.name),n))),t}async function We(e){let t;if(c(e.identity)?c(e.view)||(t=e.view):t=fin.View.wrapSync(e.identity),!c(t)){const e=await async function(e){const t=await e.getCurrentWindow();let n=[];const r=(0,i.getCurrentSync)();if(t.identity.name===fin.me.identity.uuid)n=await r.Browser.getAllAttachedPages();else{const e=r.Browser.wrapSync(t.identity);n=await e.getPages()}let a;for(const t of n)if(Oe(t.layout).includes(e.identity.name)){a=t;break}return a}(t);if(c(e)){const e=await t.getCurrentWindow();await De({window:e})}else await async function(e){let t,n;const r=(0,i.getCurrentSync)(),a=e.identity?.pageId,o=e?.identity?.window,s=e.page;if(c(a)||c(o)?c(s)||c(s.parentIdentity)||(t=s,n=r.Browser.wrapSync(s.parentIdentity)):(n=r.Browser.wrapSync(o),t=await n.getPage(a)),!c(n)){if(!c(t))try{(await n.getPages()).length>1&&await n.setActivePage(t.pageId)}catch{}await De({identity:n.identity})}}({page:e});await t.focus()}}async function De(e,t){let n;c(e.identity)?c(e.window)||(n=e.window):n=fin.Window.wrapSync(e.identity);const r=t??Re;n&&("minimized"===await n.getState()&&await n.restore(),await n.isShowing()&&("bringToFront"===r?await n.bringToFront():"bringToFrontAndFocus"===r?(await n.bringToFront(),await n.focus()):await n.setAsForeground()))}async function Be(e,t){const n=(0,i.getCurrentSync)();let r;return r=u(e)?{url:e,target:void 0}:e,n.createView(r,t)}var Fe={827:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(o){r.once&&e.removeEventListener(t,a),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},Ne={};function Le(e){var t=Ne[e];if(void 0!==t)return t.exports;var n=Ne[e]={exports:{}};return Fe[e](n,n.exports,Le),n.exports}Le.d=(e,t)=>{for(var n in t)Le.o(t,n)&&!Le.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Le.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Le.d({},{q:()=>Ge});var $e=Le(827);const Ue="1.2.0",je="openfin-snap",Ve=(e,t)=>`${e} ${t instanceof Error?t.message:"string"==typeof t?t:JSON.stringify(t)}`;class Ge{constructor(e){if(this.server_id=e,this.emitter=new $e.EventEmitter,this.replaceCustomDataClientId=(e,t,n)=>{var r;(Array.isArray(e)||null!==(r=e)&&"object"==typeof r&&!Array.isArray(r))&&(Array.isArray(e)?e.forEach((e=>this.replaceCustomDataClientId(e,t,n))):Object.keys(e).forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&("snapClientId"===r&&"string"==typeof e[r]&&e[r]===t&&(e[r]=n),"object"==typeof e[r]&&this.replaceCustomDataClientId(e[r],t,n))})))},!fin)throw new Error("OpenFin is not available")}async start(e){try{const e=await fin.System.getRuntimeInfo();"x64"!==e?.architecture&&console.warn(`The architecture of the connected OpenFin runtime is '${e.architecture}' - Window snapping is currently only supported with 64-bit applications. Snapping will be disabled.`)}catch(e){console.warn(`Could not get runtime info: ${e}`)}const t=await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");if(!t.granted)throw new Error("The 'System.launchExternalProcess' permission is required to launch the Snap server");if(t.rawValue){if(e?.executablePath&&!t.rawValue?.executables?.enabled)throw new Error("The 'System.launchExternalProcess.assets' permission is required to launch the Snap server from an executable path");if(!e?.executablePath&&!t.rawValue?.assets?.enabled)throw new Error("The 'System.launchExternalProcess.assets' permission is required to launch the Snap server from a URL")}e?.executablePath||await(async()=>{const e=await fin.Application.getCurrentSync().getManifest(),t=e.appAssets?.find((e=>e.alias===je));if(t)return void console.warn("Detected Snap package in app manifest appAssets",t);if(await(async()=>{try{return(await fin.System.getAppAssetInfo({alias:je})).version===Ue}catch(e){return!1}})())return void console.info("Using existing Snap package");const n={alias:je,src:`https://cdn.openfin.co/release/snap/${Ue}/snap.zip`,target:"OpenFinSnap.exe",version:Ue};console.info("Downloading Snap package",n);try{await fin.System.downloadAsset(n,(()=>{}))}catch(e){throw new Error(Ve("Unable to download Snap package.",e))}})();const n=await this.build_command_line(e);let r={alias:je,arguments:n,lifetime:"window"};e?.executablePath&&(r={path:e.executablePath,arguments:n,lifetime:"window"});try{this.snap_identity=await fin.System.launchExternalProcess(r)}catch(e){throw new Error(Ve("Failed to launch the Snap server.",e))}return this.connect()}async connect(){this.client=await fin.InterApplicationBus.Channel.connect(`snap-server-core-${this.server_id}`),this.client.register("snap_handshake",(async(e,t)=>{try{await fin.System.registerUsage({type:"adapter-feature",data:{apiVersion:e.version,componentName:"snap-server"}})}catch{console.warn("SnapSDK: Failed to register usage for Snap Server")}}));try{await fin.System.registerUsage({type:"adapter-feature",data:{apiVersion:"1.2.0",componentName:"snap-client"}})}catch{console.warn("SnapSDK: Failed to register usage for Snap Server")}this.client.register("snap_updates",((e,t)=>this.handleSnapEvents(e,t)))}async stop(){if(!this.client)throw new Error("Snap server is not running");await(this.client?.dispatch("snap_api_invoke",{action:"shutdown"}))}async getLayout(){if(!this.client)throw new Error("Snap server is not running");const e=await(this.client?.dispatch("snap_api_invoke",{action:"serialiseLayout"}));return e?.payload.layout}async setLayout(e,t=!0){if(!this.client)throw new Error("Snap server is not running");await(this.client?.dispatch("snap_api_invoke",{action:"deserialiseLayout",payload:{layout:e,reset:t}}))}defaultClientIdMapper(e){const t=e.split("/");return t.length<3?He():(t[t.length-1]=He(),t.join("/"))}async prepareToApplySnapshot(e,t){if(void 0===e||e.options?.closeExistingWindows||e.options?.closeSnapshotWindows)return this.need_to_reset_layout=!0,void await(this.client?.dispatch("snap_api_invoke",{action:"resetAll"}));const n=t??this.defaultClientIdMapper;this.need_to_reset_layout=!1;const r=e.snapshot;if(r.snap){const e=r.snap,t=(await this.getLayout())?.clients.map((e=>e.id))??[];e.clients.filter((e=>t.includes(e.id)&&r.windows.some((t=>t.customData?.snapClientId===e.id&&void 0!==t.layout)))).forEach((t=>{const a=t.id,o=n(a);t.id=o,Object.keys(e.connections).forEach((t=>{const n=e.connections[t];n.attachedClientId===a?n.attachedClientId=o:n.targetClientId===a&&(n.targetClientId=o)})),this.replaceCustomDataClientId(r,a,o)}))}}async decorateSnapshot(e){return{...e,snap:await this.getLayout()}}async applySnapshot(e){e.snap&&await this.setLayout(e.snap,this.need_to_reset_layout)}async launch(e){if(!this.client)throw new Error("Not connected to an Snap server");e.appAssetInfo&&(e.path=await this.getAppAssetExecutablePath({target:e.path,...e.appAssetInfo})),console.log("options: ",e);const t={action:"startProcess",payload:{...e,args:e.args||[]}};if(e.strategy){const{type:n,...r}=e.strategy;t.payload.strategy={type:n,parameters:{...r}}}const n=await(this.client?.dispatch("snap_api_invoke",t));if(n?.payload?.success)return{process_id:n.payload.process_id};throw new Error(`Failed to launch process: ${n?.payload?.error}`)}async registerWindow(e,t){await(this.client?.dispatch("snap_api_invoke",{action:"hookAndRegisterWindow",payload:{clientId:e,windowHandle:t}}))}async enableAutoWindowRegistration(){const e=e=>this.handleNewWindow(e);return await fin.Platform.getCurrentSync().addListener("window-created",e),async()=>{await fin.System.removeListener("window-created",e)}}async attachWindows(e,t,n,r){await(this.client?.dispatch("snap_api_invoke",{action:"attach",payload:{targetClientId:e,toAttachClientId:t,targetSide:n,offset:r}}))}async detachFromGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"detachFromGroup",payload:{clientId:e}}))}async getAttached(e){return(await(this.client?.dispatch("snap_api_invoke",{action:"getAttachedInstances",payload:{clientId:e}}))).payload.attached}async hasAttachments(e){return(await(this.client?.dispatch("snap_api_invoke",{action:"hasAttachments",payload:{clientId:e}}))).payload.hasAttachments}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}once(e,t){this.emitter.once(e,t)}async getGroupIdForWindow(e){const t="number"==typeof e?{nativeWindowId:e}:{clientId:e},n=await(this.client?.dispatch("snap_api_invoke",{action:"getGroupIdForWindow",payload:t}));if(!n.payload.groupId)throw new Error("No group found for window");return n.payload.groupId}async getWindowsInGroup(e){const t=await(this.client?.dispatch("snap_api_invoke",{action:"getWindowsInGroup",payload:{groupId:e}}));return t.payload.windows?t.payload.windows.map((e=>({nativeId:e[0],clientId:e[1]}))):[]}async getAllGroupIds(){return(await(this.client?.dispatch("snap_api_invoke",{action:"getAllGroupIds"}))).payload.groupIds}async minimizeGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"minimizeGroup",payload:{groupId:e}}))}async restoreGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"restoreGroup",payload:{groupId:e}}))}async handleNewWindow(e){const t=await fin.Window.wrap({uuid:e.uuid,name:e.name}),n=await t.getNativeId();let r=t.identity.name;const a=await t.getOptions();if(void 0!==a.includeInSnapshots&&!1===a.includeInSnapshots)return void console.log(`SnapSDK: Not registering ${e.uuid}:${e.name}, Window is explicitly excluded -includeInSnapshots == false`);const o=a.customData||{};o.snapClientId?r=o.snapClientId:await t.updateOptions({customData:{...o,snapClientId:r}}),await this.registerWindow(r,n)}emit_event(e,...t){this.emitter.emit(e,...t)}handleSnapEvents(e,t){switch(this.emit_event("all-events",{type:e.action,payload:e.payload}),e.action){case"clientRegistered":this.emit_event("client-registered",{clientId:e.payload.clientId,windowHandle:`#${e.payload.windowHandle.toString(16).toUpperCase()}`,owningProcessId:e.payload.owningProcessId});break;case"clientUnRegistered":this.emit_event("client-unregistered",{...e.payload});break;case"moveSizeCompleted":this.emit_event("move-size-completed",{...e.payload});break;case"clientsAttached":this.emit_event("clients-attached",{...e.payload});break;case"clientDetached":this.emit_event("client-detached",{...e.payload});break;case"groupsChanged":this.emit_event("groups-changed",{...e.payload});break;case"clientActivated":this.emit_event("client-activated",{...e.payload});break;case"clientDeactivated":this.emit_event("client-deactivated",{...e.payload})}}async build_command_line(e){let t=`--id ${this.server_id} `;e?.showDebug&&(t+=" --show-debug "),e?.disableGPUAcceleratedDragging&&(t+=" --disable-gpu-accelerated-dragging true "),e?.disableBlurDropPreview&&(t+=" --blur-drop-preview false "),void 0!==e?.blurEffectPerformanceThreshold&&(t+=` --blur-effect-performance-threshold=${e?.blurEffectPerformanceThreshold} `),e?.disableUserUnstick&&(t+=" --disable-user-unstick "),e?.keyToStick&&(t+=" --ks "),e?.hideTaskbarEntry&&(t+=" --no-tb "),e?.taskbarIconGroup&&(t+=` --tb-id=${e?.taskbarIconGroup} `),e?.taskbarIcon&&(t+=` --tb-icon=${e?.taskbarIcon} `),e?.disableRuntimeHeartbeating&&(t+=" --no-hb "),e?.autoHideClientTaskbarIcons&&(t+=" --tb-auto-hide ");const n=await fin.System.getRuntimeInfo();return t+=`--runtime-port ${n.port} `,t+=`--runtime-version ${n.version} `,t.trim()}async getAppAssetExecutablePath(e){let t=(await fin.System.getRuntimeInfo()).args["local-startup-url"].replace("config.json","");const n=t.includes("\\")?"\\":"/";return t.endsWith(n)&&(t=t.slice(0,-1)),[t,"assets",e.alias,e.version,e.target].join(n)}}function He(){return"undefined"!=typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}let ze;const qe=Sr("Snap"),Ke="app:";let Je,Ze=!1;async function Ye(e,t){const n=nt(await Xe(e));return Qe((await et(n)).availableRect,t)}function Qe(e,t){const n=e.bottom-e.top,r=(e.right-e.left)/2,a=n/2,o=t.width/2,i=t.height/2,s=e.left+r-o,c=e.top+a-i;return{x:Math.round(s),y:Math.round(c)}}async function Xe(e){let t,n;try{const t=fin.View.wrapSync(e);n=await t.getCurrentWindow()}catch{}if(c(t))try{const r=n??fin.Window.wrapSync(e);t=await r.getBounds()}catch{}if(c(t))try{t=await fin.me.getBounds()}catch{}return t}async function et(e){const t=await fin.System.getMonitorInfo(),n=e.x,r=e.y;if(!c(n)&&!c(r))for(const e of t.nonPrimaryMonitors)if(tt({x:n,y:r},e.monitorRect))return e;return t.primaryMonitor}function tt(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom}function nt(e){let t,n;if(!c(e)){const r=e.width/2,a=e.height/2;return t=e.left+r,n=e.top+a,{x:Math.round(t),y:Math.round(n)}}return{}}async function rt(e){const t={defaults:{}};if(c(e)||(t.windowPositioningStrategy=e.windowPositioningStrategy,t.disableWindowPositioningStrategy=e.disableWindowPositioningStrategy,c(e?.defaultWindowOptions?.defaultLeft)||(t.defaults.left=e.defaultWindowOptions.defaultLeft),c(e?.defaultWindowOptions?.defaultTop)||(t.defaults.top=e.defaultWindowOptions.defaultTop)),c(t.defaults.left)||c(t.defaults.top)){const e=await fin.Application.getCurrent(),n=await e.getManifest();c(n?.platform?.defaultWindowOptions?.defaultLeft)||(t.defaults.left=n.platform.defaultWindowOptions.defaultLeft),c(n?.platform?.defaultWindowOptions?.defaultTop)||(t.defaults.top=n.platform.defaultWindowOptions.defaultTop)}return t}async function at(e,t){if(!0===e?.disableWindowPositioningStrategy)return;let n;if(c(t))n=(await fin.System.getMonitorInfo()).primaryMonitor;else if(!c(t)&&"monitorRect"in t)n=t;else if(!c(t)&&"x"in t)n=await et(t);else{const e=await Xe(t);n=c(e)?(await fin.System.getMonitorInfo()).primaryMonitor:await et({x:e.left,y:e.top})}const r=e?.defaults?.left??0,a=e?.defaults?.top??0,o=n.availableRect.left,i=n.availableRect.top,s=e?.windowPositioningStrategy?.x??30,l=e?.windowPositioningStrategy?.y??30,u=e?.windowPositioningStrategy?.maxIncrements??8,d=await ot(),p=await Promise.all(d.map((async e=>{try{const t=await e.getBounds();return{left:t.left,top:t.top,right:t.left+s,bottom:t.top+l}}catch{return{left:0,top:0,right:0,bottom:0}}})));let f=1e3,h=u;for(let e=0;e<u;e++){const t=r+e*s,n=a+e*l,c=p.filter((e=>e.left>=t+o&&e.right<=t+s+o&&e.top>=n+i&&e.bottom<=n+l+i));c.length<f&&(f=c.length,h=e)}return{left:r+h*s+o,top:a+h*l+i}}async function ot(){const e=fin.Platform.getCurrentSync(),t=await e.Application.getChildWindows(),n=[];for(const e of t)try{await e.isShowing()&&n.push(e)}catch{}return n}const it=Sr("Launch");let st;async function ct(e,t,n){try{if(it.info("Application launch requested",e),c(e))return it.warn("An empty app definition was passed to launch"),[];const r=w(e),a=[];switch(r.manifestType){case z:case q:{const e=await async function(e,t,n){let r={};if(it.info(`Request to external app of type ${e.manifestType}`),e.manifestType===z)r.path=e.manifest;else{if(e.manifestType!==q)return void it.warn("An external app was passed to launch but it didn't match the supported manifest types.");r=dt(e)}"single"===e.instanceMode?r.uuid=r.uuid??e.appId:r.uuid=`${r.uuid??e.appId}/${d(t)?t:b()}`;try{it.info(`Launching external app asset with appId: ${e.appId} with the following options:`,r);const a=await ht(e,r,t,n);return it.info(`External app with appId: ${e.appId} launched with the following identity`,a),a}catch(t){it.error(`Error trying to launch external with appId: ${e.appId}`,t)}}(r,void 0,t);e&&a.push(e);break}case K:case J:{const e=await async function(e,t,n){const r={};if(it.info(`Request to launch app asset app of type ${e.manifestType}`),e.manifestType===K)r.alias=e.manifest;else{if(e.manifestType!==J)return void it.warn("An app asset app was passed to launch app asset but it didn't match the supported manifest types.");{const t=dt(e);let n;try{n=await fin.System.getAppAssetInfo({alias:t.alias})}catch(e){it.debug(`App asset info for alias: ${t.alias} is not available. Response from getAppAssetInfo: ${v(e)}`)}if(c(n)||t.version!==n.version){it.info(`App asset with alias: ${t.alias} does not exist in memory. Fetching it.`);try{await fin.System.downloadAsset(t,(t=>{const n=Math.floor(t.downloadedBytes/t.totalBytes*100);it.info(`Downloaded ${n}% of app asset with appId of ${e.appId}`)}))}catch(t){return void it.error(`Error trying to download app asset with app id: ${e.appId}`,t)}}r.alias=t.alias,r.arguments=t.args}}"single"===e.instanceMode?r.uuid=r.uuid??e.appId:r.uuid=`${r.uuid??e.appId}/${d(t)?t:b()}`;try{it.info(`Launching app asset with appId: ${e.appId} with the following options:`,r);const a=await ht(e,r,t,n);return it.info(`External app with appId: ${e.appId} launched with the following identity`,a),a}catch(t){it.error(`Error trying to launch app asset with appId: ${e.appId}}`,t)}}(r,void 0,t);e&&a.push(e);break}case $:case L:{const e=await async function(e,t,n){if(c(e))return void it.warn("No app was passed to launchView");if(e.manifestType!==L&&e.manifestType!==$)return void it.warn(`The app passed was not of manifestType ${L} or ${$}.`);let r;if(r=e.manifestType===L?await pt(e):dt(e),c(r))return void it.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);let a=r.name,o=!c(a);o||"single"!==e?.instanceMode?o||(a=`${e.appId}/${b()}`,r.name=a):(it.info(`A unique name was not provided in the manifest of this view but the custom config indicates that this app is supposed to have a single instance so we are using the appId: ${e.appId} as the unique name.`),a=e.appId,r.name=a,o=!0);let s={uuid:fin.me.identity.uuid,name:a},l=!1;if(o&&(l=await async function(e,t=!1){const n=fin.View.wrapSync(e);let r=!1;try{await n.getInfo(),t&&await We({view:n}),r=!0}catch{r=!1}return r}(s,!0)),!l)try{const a=(0,i.getCurrentSync)(),o=w(e.launchPreference)??{},l=w(e.launchPreference?.options)??{type:"view"},u=an(e,"bounds"),p=an(e,"centered"),f=an(e,"host-options"),h=an(e,"custom-data"),g=an(e,"interop"),m=an(e,"url");if(!(c(u)||c(t?.bounds)&&c(n))){const e=await mt(n);o.bounds={...o.bounds,...e,...t?.bounds}}c(p)||c(t?.defaultCentered)||(o.defaultCentered=t?.defaultCentered),"view"===l?.type&&"view"===t?.options?.type&&(c(l.host)&&(l.host={}),c(f)||c(t?.options?.host)||(d(l.host?.url)&&d(t.options.host?.url)&&!gt(l.host.url,t.options.host.url,f.constraint)&&(t.options.host.url=void 0),l.host={...l.host,...t.options?.host}),c(h)||c(t?.options?.view?.customData)||(c(l.view)&&(l.view={}),l.view.customData={...l.view?.customData,...t.options?.view?.customData}),c(g)||c(t?.options?.view?.interop)||(c(l.view)&&(l.view={}),l.view.interop=t?.options.view?.interop),c(m)||c(t?.options?.view?.url)||(c(l.view)&&(l.view={}),gt(r.url,t.options.view.url,m.constraint)&&(l.view.url=t.options.view.url))),"view"!==l?.type||c(l?.view)||(d(l.view.url)&&(it.debug(`Updating app with id: ${e.appId} url with launch preferences: ${r.url} with ${l.view.url}`),r.url=l.view.url),c(l.view?.customData)||(it.debug(`Updating app with id: ${e.appId} customData with merged launch preferences.`,l.view.customData),r.customData=l.view.customData),c(l?.view?.interop)||(it.debug(`Updating app with id: ${e.appId} interop config with launch preferences.`,l.view.interop),r.interop=l.view.interop));const y=o?.bounds,v=c(l)||"view"!==l.type?void 0:l?.host,k=o?.defaultCentered??!1;if(c(y)&&c(v)){const e=await a.createView(r);s=e.identity}else{let e={};const t={content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:r}]}],settings:{hasHeaders:v?.hasHeaders}};if(e={windowType:c(v?.url)?void 0:i.WindowType.Platform,disableMultiplePages:v?.disableMultiplePages,title:v?.title,favicon:v?.icon},!c(v?.pageTitle)||!c(v?.pageIcon)){const n={pageId:`page-${b()}`,iconUrl:v?.pageIcon,title:await a.Browser.getUniquePageTitle(v?.pageTitle),layout:t};e.pages=[n]}!0===v?.disableToolbarOptions&&(e.toolbarOptions={buttons:[]}),0===Object.keys(e).length&&(e=void 0);const n=await a.createWindow({workspacePlatform:e,url:v?.url,height:y?.height,defaultHeight:y?.height,defaultWidth:y?.width,defaultLeft:y?.left,defaultTop:y?.top,width:y?.width,defaultCentered:k,layout:t}),o=await n.getCurrentViews();if(1===o.length){if(o[0].identity.name!==s.name)return void it.warn(`The specified view id: ${s.name} was not found in the returned view so we will be returning undefined as we cannot confirm the view was created.`);s=o[0].identity}else{it.warn(`We expected to create a single view with identity ${s.name} but a preference was specified and the created window had more than the requested view ${o.length}`);const e=o.find((e=>e.identity.name===s.name));if(c(e))return void it.warn(`The specified view id: ${s.name} was not found in the list of returned views so we will be returning undefined as we cannot confirm the view was created.`);s=e.identity}}}catch(e){return void it.error("Error launching view",e)}return{...s,appId:e.appId}}(r,t,n);e&&a.push(e);break}case U:case j:{const e=await async function(e,t,n){if(c(e))return void it.warn("No app was passed to launchWindow");if(e.manifestType!==U&&e.manifestType!==j)return void it.warn(`The app passed was not of manifestType ${U} or ${j}.`);let r;if(r=e.manifestType===U?await pt(e):dt(e),c(r))return void it.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);let a=r.name,o=!c(a);o||"single"!==e?.instanceMode?o||(a=`${e.appId}/${b()}`,r.name=a):(it.info(`A unique name was not provided in the manifest of this window but the custom config indicates that this app is supposed to have a single instance so we are using the appId: ${e.appId} as the unique name.`),a=e.appId,r.name=a,o=!0);let s={uuid:fin.me.identity.uuid,name:a},l=!1;if(o&&(l=await async function(e,t=!1){const n=fin.Window.wrapSync(e);let r=!1;try{await n.getInfo(),r=!0,t&&await De({window:n})}catch{r=!1}return r}(s,!0)),!l)try{const a=w(e.launchPreference)??{},o=w(e.launchPreference?.options)??{type:"window"},l=an(e,"bounds"),u=an(e,"centered"),p=an(e,"custom-data"),f=an(e,"interop"),h=an(e,"url");if(!c(l)&&!c(t?.bounds)){const e=await mt(n);a.bounds={...a.bounds,...e,...t?.bounds}}c(u)||c(t?.defaultCentered)||(a.defaultCentered=t?.defaultCentered),"window"===o?.type&&"window"===t?.options?.type&&(c(p)||c(t?.options?.window?.customData)||(c(o.window)&&(o.window={}),o.window.customData={...o.window?.customData,...t.options?.window?.customData}),c(f)||c(t?.options?.window?.interop)||(c(o.window)&&(o.window={}),o.window.interop=t?.options.window?.interop),c(h)||c(t?.options?.window?.url)||(c(o.window)&&(o.window={}),gt(r.url,t.options.window.url,h.constraint)&&(o.window.url=t.options.window.url)));const g=(0,i.getCurrentSync)();r.defaultHeight=a?.bounds?.height??r.defaultHeight,r.height=a?.bounds?.height??r.height,r.defaultWidth=a?.bounds?.width??r.defaultWidth,r.width=a?.bounds?.width??r.width,r.defaultCentered=a?.defaultCentered??r.defaultCentered,r.x=a.bounds?.left??r.x,r.defaultLeft=a.bounds?.left??r.defaultLeft,r.y=a.bounds?.top??r.y,r.defaultTop=a.bounds?.top??r.defaultTop,!c(o?.window)&&d(o?.window?.url)&&(it.debug(`Updating app with id: ${e.appId}. The url of the window app is defined via launch preferences: ${r.url} is being replaced with ${o.window?.url}`),r.url=o.window.url),c(o?.window?.customData)||(it.debug(`Updating app with id: ${e.appId}. The custom data is being updated with launch preferences:`,o.window?.customData),r.customData=o.window?.customData),c(o?.window)||c(o?.window?.interop)||(it.debug(`Updating app with id: ${e.appId}. The interop definition is being updated with launch preferences:`,o.window?.interop),r.interop=o.window.interop);const m=await g.createWindow(r);s=m.identity,await De({window:m})}catch(e){return void it.error("Error launching window",e)}return{...s,appId:e.appId}}(r,t,n);e&&a.push(e);break}case V:case G:{const e=await async function(e){if(c(e))return void it.warn("No app was passed to launchSnapshot");if(e.manifestType!==V&&e.manifestType!==G)return void it.warn(`The app passed was not of manifestType ${V} or ${G}`);let t;if(e.manifestType===V?(it.info(`Fetching snapshot for app ${e.appId} from url: ${e.manifest}`),t=await pt(e)):(it.info(`Using snapshot defined in manifest setting of app ${e.appId}`),t=dt(e)),c(t))return void it.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);const n=t.windows,r=[];if(Array.isArray(n)){const a=[],o=[];for(const t of n){if(Array.isArray(t.workspacePlatform?.pages))for(let e=0;e<t.workspacePlatform.pages.length;e++){const n=t.workspacePlatform.pages[e];c(n.layout)||(n.layout=wt(n.layout)),t.workspacePlatform.pages[e]=n}else t.layout=wt(t.layout);const n=b(),o=t.name??`${e.appId}/${n}`;t.name=o,r.push(t),a.push(o)}if(t.windows=r,r.length>0){const e=(0,i.getCurrentSync)();try{await e.applySnapshot(t)}catch(e){it.error("Error trying to apply snapshot to platform",e,t)}}for(const t of a){const n=await ut(t,fin.me.identity.uuid,e.appId);o.push(...n)}return o}}(r);e&&a.push(...e);break}case H:{const e=await fin.Application.startFromManifest(r.manifest),t=e?.identity?.uuid;c(t)||a.push({uuid:t,name:t,appId:r.appId});break}case Z:await fin.System.openUrlWithBrowser(r.manifest);break;case Y:if(O(r.manifest)){const e=await D(r.manifest,{payload:r,launchPreference:t,callerIdentity:n});c(e)?it.warn(`App with id: ${r.appId} encountered when launched using endpoint: ${r.manifest}.`):a.push({...e,appId:r.appId})}else it.warn(`App with id: ${r.appId} could not be launched as it is of manifestType: ${r.manifestType} and the endpoint: ${r.manifest} is not available.`);break;case Q:{it.info("An app defined by a connection (connected app) has been selected. Passing selection to connection");const e=await async function(e){const t=(await Pt()).find((t=>t.identity.uuid===e.manifest));if(e.manifestType===Q&&!c(t))return bt.info(`Launching app: ${e.appId} against connection: ${t.identity.uuid}`),await St.dispatch(t.identity,"launchApp",e),t.identity;bt.warn(`A request to launch app ${e.appId} was not successful. Either the manifestType is not ${Q}:${e.manifestType} or the connection ${e.manifest} is either not registered in the connectionProvider with ${yt} support or hasn't connected to this platform.`)}(r);c(e)||a.push({...e,appId:r.appId});break}default:it.error("We do not support the manifest type so this app cannot be launched.",r)}return it.info("Finished application launch request"),a}catch(e){it.error("Failed during application launch request",e)}}async function lt(e,t){switch(e.manifestType){case z:case q:case H:case Z:case Y:case Q:it.info(`Bringing apps of type: ${e.manifestType} to front is not supported.`);break;case $:case L:Array.isArray(t)&&1===t.length?await We({identity:t[0]}):it.warn(`A request to bring a view app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case U:case j:Array.isArray(t)&&1===t.length?await De({identity:t[0]}):it.warn(`A request to bring a window app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case X:if(Array.isArray(t)&&1===t.length){let e=!0;try{const e=fin.View.wrapSync(t[0]),n=await e.getInfo();it.info("View Info",n)}catch{e=!1}e?await We({identity:t[0]}):await De({identity:t[0]})}else it.warn(`A request to bring a window app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case V:if(Array.isArray(t)&&t.length>0)for(const e of t)await We({identity:e});else it.warn(`A request to bring a snapshot app to front was received but we didn't receive at least one view for app: ${e.appId}.`);break;default:it.error("We do not support the manifest type so this app cannot be brought to front.",e)}}async function ut(e,t,n){const r={uuid:t,name:e},a=fin.Window.wrapSync(r),o=(await a.getCurrentViews()).map((e=>({...e.identity,appId:n})));return await De({window:a}),o}function dt(e){return d(e.manifest)&&e.manifest.startsWith("{")?JSON.parse(e.manifest):e.manifest}async function pt(e){const t=ft(),n=ft(e.appId);let r;O(n)?r=n:O(t)&&(r=t);try{if(c(r)){const t=await fetch(e.manifest);return await t.json()}return await D(r,{url:e.manifest,appId:e.appId})}catch(t){it.error(`There was an error while trying to fetch the manifest: ${e.manifest} for appId: ${e.appId}`,t)}}function ft(e){const t="manifest-get";return c(e)?t:`${t}-${e}`}async function ht(e,t,n,r){const a=w(e.launchPreference?.options)??{type:"native"},o=an(e,"arguments"),i=d(t.path);let s,l;!c(o)&&"native"===r?.options?.type&&Array.isArray(r?.options?.native?.arguments)&&(l=r.options.native?.arguments,it.debug(`Using passed launch preference for the args for app ${e.appId}`,l)),c(l)&&"native"===a.type&&Array.isArray(a.native?.arguments)&&(l=a.native?.arguments,it.debug(`Using app definition based args for app ${e.appId}`,l)),c(l)&&d(t.arguments)?l=[t.arguments]:c(l)&&(l=[]);const u=fin.me.identity.uuid,p=t.uuid??e.appId,f=l.map((e=>e.replace("{OF-PLAT-UUID}",u).replace("{OF-EXT-UUID}",p)));if(l=f,Ze&&"native"===a?.type&&!c(a?.snap?.strategy)){let r=t.path;if(!i&&d(t.alias)){const e=await fin.System.getAppAssetInfo({alias:t.alias});r=await async function(e){let t=(await fin.System.getRuntimeInfo()).args["local-startup-url"].replace("config.json","");const n=t.includes("\\")?"\\":"/";return t.endsWith(n)&&(t=t.slice(0,-1)),[t,"assets",e.alias,e.version,e.target].join(n)}({alias:e.alias,version:e.version,target:e.target??""})}if(d(r)){d(n)||(n="single"===e.instanceMode?e.appId:b()),1===l.length&&(l=S(l[0]));const o=await async function(e,t,n,r,a){try{if(Je){if(e.endsWith(".jar")&&!e.includes("java.exe")&&!e.includes("javaw.exe")){qe.info("Launching a jar file, checking JAVA_HOME environment variable");const n=await fin.System.getEnvironmentVariable("JAVA_HOME");if(c(n))qe.warn("JAVA_HOME environment variable is not set, unable to update the path. Passing as is to snap to try to resolve.");else{const r=`${n}\\bin\\javaw.exe`;t?.unshift(e),t?.unshift("-jar"),e=r,qe.info(`Using ${r} to launch the jar file and moved the original path to the args`)}}const o=`${Ke}/${r}/${a}`;let i=!0;if(r===a){const e=await Je.getLayout(),t=e.clients.findIndex((e=>e.id.startsWith(o)));t>=0&&(i=!1,"minimized"===e.clients[t].state&&(e.clients[t].state="normal",await Je.setLayout(e)))}return i&&await Je.launch({path:e,clientId:o,args:t,strategy:n}),o}}catch(e){console.error("Failed to launch app.",v(e))}}(r,l,a.snap?.strategy,e.appId,n);o?s={uuid:t.uuid??e.appId,name:t.uuid??o,appId:e.appId}:it.warn(`The app with id ${e.appId} could not be launched with snap support, falling back to launch without snap`)}else it.warn(`The app with id ${e.appId} specifies a snap launch strategy, but it has neither a path property or app asset alias/version/target combination, falling back to launch without snap`)}if(c(s)&&"single"===e.instanceMode){const n=(await fin.System.getAllExternalApplications()).find((e=>e.uuid===t.uuid));n&&(it.info(`External application with App id ${e.appId} already exists. Returning identity.`),s={uuid:n.uuid,name:n.name??n.uuid,appId:e.appId})}if(c(s)){const n=w(t);n.arguments=l.join(" ");const r=await fin.System.launchExternalProcess(n);s={uuid:r.uuid??e.appId,name:r.name??r.uuid,appId:e.appId}}return s}function gt(e,t,n){if(c(t))return!1;if(!d(n))return!0;if("url-none"===n)return!1;if("url-any"===n)return!0;if(c(e))return!1;const r=new URL(e),a=new URL(t);return"url-page"===n?(r.origin+r.pathname).toLowerCase()===(a.origin+a.pathname).toLowerCase():"url-domain"!==n||r.origin===a.origin}function wt(e){return JSON.parse(JSON.stringify(e,((e,t)=>(d(t?.name)&&!c(t.url)&&(/\/[\d,a-z-]{36}$/.test(t.name)&&(t.name=t.name.replace(/([\d,a-z-]{36}$)/,b())),/-[\d,a-z-]{36}$/.test(t.name)&&(t.name=t.name.replace(/(-[\d,a-z-]{36}$)/,b()))),t))))}async function mt(e){if(!c(e)){if(c(st)){const e=await he();st=await rt(e?.browserProvider)}return await at(st,e)}}const yt="appSource",bt=Sr("Connections"),vt={};let kt,St;async function Ct(e,t,n){const r={isValid:!1};try{if(c(e?.uuid))return bt.warn("An identity without a UUID was passed to the validate connection function. Validation cannot happen.",e,n),r;if(c(kt?.connections))return"broker"===n?.type?(bt.info("No connection provider options specified and broker connection requested. Implementing default broker behavior which is to allow a connection."),r.isValid=!0,r):(bt.warn("A connection verification request was made but connection provider options have not been defined so we cannot validate the connection request."),r);const a=await async function(e){const t=kt?.connections.find((t=>t.identity.uuid===e.uuid));if(!c(t))return t;const n=kt?.connections.find((e=>"*"===e.identity.uuid));if(!c(n)){bt.info(`A specific listing for connection ${e.uuid} isn't listed but there is a default * entry and it will be used for this connection.`);const t=w(n);return t.identity=e,t}return n}(e);if(c(a))return bt.warn("Connection is not allowed so unable to validate request",e),r;if(a.validatePayload){const a=kt?.connectionValidationEndpoint;if(!d(a))return bt.warn("This connection has been defined as requiring payload verification but the platform has not provided a connection validation endpoint to use for the verification process. For backwards compatibility this connection is valid unless the broker specifies it wishes to validate."),r.isValid=!0,r;if(!O(a))return bt.warn("This connection has been defined as requiring payload verification but the specified connectionValidationEndpoint is not a valid endpoint."),r;{const o={identity:e,payload:t,options:n};bt.info(`Connection validation being handled by endpoint: ${a}`);const i=await D(a,o);if(!i?.isValid)return bt.warn(`Connection validation request for ${JSON.stringify(e)} failed validation`),r;bt.info("Connection has passed validation.")}}const o=n?.type;if(!c(o)){if(c(a.connectionTypes.find((e=>e.type===o))))return bt.warn(`The connection that is being validated does not support the required connection type: ${o}`),r;bt.info("Connection type requested is supported.")}r.isValid=!0}catch(e){bt.error("An error occurred while trying to valid a connection request.",e)}return bt.info("Returning: ",r),r}async function Pt(){const e=[],t=Object.values(vt);for(const n of t){const t=n.connectionTypes.find((e=>e.type===yt));t?.type===yt&&e.push({identity:n.identity,connectionData:t})}return e}function It(e){return{appId:e.appId,name:e.name??e.appId,title:e.title??e.name,manifestType:e.manifestType,manifest:Et(e),description:e.description,customConfig:e.customConfig,intents:e.intents,interop:xt(e.intents),tags:Mt(e),version:e.version,publisher:e.publisher??"",contactEmail:e.contactEmail,supportEmail:e.supportEmail,icons:At(e.icons),images:_t(e.images),private:Tt(e),autostart:Rt(e),instanceMode:e.customConfig?.instanceMode,tooltip:e.tooltip,launchPreference:e.customConfig?.launchPreference}}function xt(e){if(c(e))return;const t={};for(const n of e)t[n.name]={contexts:n.contexts,customConfig:n.customConfig,displayName:n.displayName};return{intents:{listensFor:t}}}function At(e){if(!Array.isArray(e))return[];const t=[];for(const n of e)t.push({src:n.icon});return t}function _t(e){if(!Array.isArray(e))return[];const t=[];for(const n of e)t.push({src:n.url});return t}function Et(e){return d(e.manifest)&&e.manifest.startsWith("{")?JSON.parse(e.manifest):e.manifest}function Mt(e){const t=e.tags??e.categories??[];return 0===t.length&&t.push(e.manifestType),t}function Tt(e){return Ot(e?.customConfig?.private,!1)}function Rt(e){return Ot(e?.customConfig?.autostart,!1)}function Ot(e,t){if(d(e)||h(e))switch(e){case"False":case"false":case!1:return!1;case"True":case"true":case!0:return!0;default:return!t}return t}function Wt(e){return{appId:e.appId,name:e.name??e.appId,title:e.title??e.name,manifestType:Bt(e),manifest:Ft(e),description:e.description,instanceMode:e?.hostManifests?.OpenFin?.config?.instanceMode,intents:Dt(e.interop),interop:e.interop,customConfig:e.customConfig,tags:e.categories,version:e.version,publisher:e.publisher??"",contactEmail:e.contactEmail,supportEmail:e.supportEmail,icons:e.icons??[],images:e.screenshots,private:e?.hostManifests?.OpenFin?.config?.private,autostart:e?.hostManifests?.OpenFin?.config?.autostart,launchPreference:e?.hostManifests?.OpenFin?.config?.launchPreference}}function Dt(e){const t=[],n=e?.intents?.listensFor;if(c(n))return t;const r=Object.keys(n);for(const e of r)t.push({name:e,displayName:n[e].displayName??"",contexts:n[e].contexts});return t}function Bt(e){let t;switch(e.type){case"web":t="inline-view";break;case"native":t="inline-external";break;case"onlineNative":t="desktop-browser";break;case"other":t=e.hostManifests?.OpenFin?.type??"";break;default:t=e.type}return t}function Ft(e){let t;switch(e.type){case"web":if(!c(e?.details)){const n=e.hostManifests?.OpenFin?.details;t=l(n)?{url:(e?.details).url,fdc3InteropApi:"2.0",...n}:{url:(e?.details).url,fdc3InteropApi:"2.0"}}break;case"native":c(e?.details)||(t=e.details);break;case"onlineNative":c(e?.details)||(t=(e?.details).url);break;case"other":t=e.hostManifests?.OpenFin?.details;break;default:t=e.details}return t}const Nt=Sr("Directory");let Lt,$t,Ut,jt,Vt=[];async function Gt(e){if(Array.isArray(e))return function(e){const t=[];for(const n of e)Array.isArray(n.intents)&&c(n.interop)?n.interop=xt(n.intents):c(n.interop)||Array.isArray(n.intents)||(n.intents=Dt(n.interop)),t.push(n);return t}(e);if("fdc3"!==e.metadata?.type||c(e?.metadata?.version)){if(Array.isArray(e.applications)&&e.applications.length>0)return"type"in e.applications[0]?e.applications.map((e=>Wt(e))):e.applications.map((e=>It(e)))}else{const t=e.metadata.version;switch(t){case"1.2":return e.applications.map((e=>It(e)));case"2.0":return e.applications.map((e=>Wt(e)));default:throw new Error(`Unknown/Unsupported FDC3 version specified: ${t}`)}}return[]}async function Ht(e){if(Lt)if(c(e.endpointId)){if(!c(e.url)){Nt.info(`Fetching apps from url: ${e.url.path}`);const t=await fetch(e.url.path,{credentials:e.url.credentials});return Gt(await t.json())}if(!c(e.map))if(e.map.outputId){Nt.info(`Mapping from App Source: ${e.map.inputId} to Platform App using: ${e.map.outputId}`);const t=await Lt.requestResponse(e.map.inputId);Nt.info(`Received response from ${e.map.inputId}`);const n=await Lt.requestResponse(e.map.outputId,t);if(n)return Gt(n)}else Nt.error(`Mapping from App Source: ${e.map.inputId} has no outputId`)}else{Nt.info(`Fetching apps from endpoint id: ${e.endpointId}.`);const t=await Lt.requestResponse(e.endpointId);if(t)return Gt(t)}return Nt.error(`Directory entry ${e.id} does not have any supported way of fetching applications.`),[]}async function zt(){if(!c(jt))return jt;const e=await fin.System.getHostSpecs();return jt=!e.name.toLowerCase().startsWith("mac"),jt}const qt=Sr("Apps");let Kt,Jt,Zt,Yt=[],Qt=0,Xt="on-demand",en=0,tn=!1;async function nn(e){if(tn){qt.info("Requesting apps");try{const t=await async function(){if(c(Zt)){let e=!0;if("on-demand"===Xt){e=!1;const t=Date.now();t-en>Qt&&(en=t,e=!0)}if(e){Zt=[],qt.info("Apps cache expired refreshing");const e=[];try{qt.info("Getting directory apps.");const t=await async function(){if(0===Vt.length)return[];const e=[...Vt],t=[];for(const n of e)try{Nt.info(`Fetching apps from directory id: ${n.id}.`);const e=await Ht(n);Nt.info(`Fetched ${e.length} apps from directory id: ${n.id}.`),t.push(...e)}catch(e){Nt.error(`Error fetching apps from directory ${JSON.stringify(n)}`,e)}return t}();e.push(...t),qt.info("Getting connected apps.");const n=await async function(){const e=await Pt(),t=[];for(const n of e){const e=await St.dispatch(n.identity,"getApps"),r=n?.connectionData?.manifestTypes??[];let a=[];a=r.length>0?e.filter((e=>e.manifestType&&r.includes(e.manifestType))):e;for(const e of a)e.manifestType===Q&&(e.manifest=n.identity.uuid);t.push(...a)}return t}();n.length>0&&(qt.info(`Adding ${n.length} apps from connected apps to the apps list to be validated`),e.push(...n))}catch(e){qt.error("Error fetching apps.",e)}const t=JSON.stringify(Yt);if(Yt=await async function(e){const t=await async function(e){if(!c($t))return $t;try{const e=await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");$t=e?.granted}catch(t){e?.error("Error while querying for System.launchExternalProcess permission",t),$t=!1}const t=await zt();return $t=$t&&t,$t}(qt),n=await async function(e){if(!c(Ut))return Ut;try{const e=await fin.System.queryPermissionForCurrentContext("System.downloadAsset");Ut=e?.granted}catch(t){e?.error("Error while querying for System.downloadAsset permission",t),Ut=!1}const t=await zt();return Ut=Ut&&t,Ut}(qt),r=[],a=[];for(const o of e){const e=o.manifestType;if(e){let i=!0;!c(Kt)&&Kt.length>0&&(i=Kt.includes(e)),i?e!==z&&e!==q&&e!==K&&e!==J||t&&(e!==K&&e!==J||n)?r.push(o):a.push(o.appId):qt.warn("Application is not in the list of supported manifest types",o.appId,e)}else qt.warn("Application does not have a manifestType",o.appId)}return a.length>0&&qt.warn("Not passing the following list of applications as they will not be able to run on this machine due to missing permissions. Alternatively this logic could be moved to the launch function where a selection is not launched but the user is presented with a modal saying they can't launch it due to permissions",a),r}(e),Zt.length>0){qt.info("Resolving getEntry promises");for(const e of Zt)e(Yt)}if(Zt=void 0,JSON.stringify(Yt)!==t){const e=(0,i.getCurrentSync)();await ne(e,"apps-changed")}}return Yt}return new Promise((e=>{Zt?(qt.info("Storing getEntry resolver"),Zt.push(e)):e(Yt)}))}();if(e){if(!c(e.private)&&!c(e.autostart))return t.filter((t=>{const n=t.private??!1,r=t.autostart??!1;return e.private===n&&e.autostart===r}));if(!c(e.private))return t.filter((t=>{const n=t.private??!1;return e.private===n}));if(!c(e.autostart))return t.filter((t=>{const n=t.autostart??!1;return e.autostart===n}))}return t}catch(e){return qt.error("Error retrieving apps. Returning empty list",e),[]}}else qt.warn("Calling getApps before app provider is initialized");return[]}async function rn(e){if(!e)return;const t=await nn();let n=t.find((t=>t.appId===e));return c(n)&&(n=t.find((t=>t.name===e)),qt.info(`App not found when using lookup id: ${e} against appId. Fell back to name to see if it is a reference against name. App found: ${!c(n)}`)),n}function an(e,t){if(Array.isArray(e?.launchPreference?.options?.updatable))for(const n of e.launchPreference.options.updatable)if(n.name===t)return n;if(Array.isArray(Jt))return Jt.find((e=>e.name===t))}const on=Sr("Dialog");let sn;async function cn(e,t){const n=await Se(),r=await Ce(),a=t?fin.Window.wrapSync(t):fin.Window.getCurrentSync(),o=sn?.dialogHtml??"https://built-on-openfin.github.io/workspace-starter/dev/john/register-with-browser-basic/workspace-platform-starter/common/popups/dialog/index.html";let i;if(on.info("Showing confirmation dialog",e),e.message=e.message.replace(/\n/g,"<br>"),e.message=e.message.replace(/\*{3}(.*?)\*{3}/g,"<b><i>$1</i></b>"),e.message=e.message.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>"),e.message=e.message.replace(/\*(.*?)\*/g,"<i>$1</i>"),t)i=await a.getBounds();else{const e=(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;i={width:e.right-e.left,height:e.bottom-e.top}}const s=sn?.defaultWidth??500,c=sn?.defaultHeight??250,l=(i.width-s)/2,u=(i.height-c)/2,d=await a.showPopupWindow({name:`modal-${b()}`,initialOptions:{showTaskbarIcon:!1,defaultCentered:!0,backgroundColor:n?.backgroundPrimary,customData:{...e,palette:n,colorScheme:r}},x:l,y:u,width:s,height:c,url:o,blurBehavior:"modal"});if("clicked"===d.result)return on.info("Dialog Result",d.data),d.data;on.info("Dialog dismissed")}const ln="app",un="workspace",dn="page",pn="query",fn=Sr("Favorites");let hn,gn,wn,mn=!1;const yn="favorite-list",bn="favorite-get",vn="favorite-set",kn="favorite-remove";async function Sn(e,t,n){if(mn)fn.warn("The favorite service is already initialized");else{wn=t,gn=n,c(e)?fn.warn("Options were not passed to the favorite provider so it cannot be initialized."):(mn=!0,hn=e),ce("favorites",(async()=>e?.enabled??!1));for(const t of[ln,un,dn,pn])ce(`favorites-${t}`,(async()=>(e?.enabled??!1)&&(c(e?.supportedFavoriteTypes)||(e?.supportedFavoriteTypes??[]).includes(t))))}}async function Cn(e){if(gn.hasEndpoint(yn)){const t=await gn.requestResponse(yn,{favoriteType:e,platform:fin.me.identity.uuid});if(!c(t)&&Array.isArray(t.entries)){let n=t.entries.map((e=>e.payload));return c(e)?fn.info("Returning saved favorites from custom storage"):(fn.info(`Returning saved favorites by type ${e} from custom storage`),n=n.filter((t=>t.type===e))),n}return fn.warn("No response getting saved favorites from custom storage"),[]}fn.warn(`There has been a request for a list of favorites but no endpoint with the \n    id: ${yn} is listed in your endpoint configuration.`)}async function Pn(e){if(gn.hasEndpoint(bn)){const t=await gn.requestResponse(bn,{id:e,platform:fin.me.identity.uuid});return t?(fn.info(`Returning saved favorite with id ${e} from custom storage`),t.payload):void fn.warn(`No response getting saved favorite with id ${e} from custom storage`)}fn.warn(`There has been a request for a favorite but no endpoint with the \n    id: ${bn} is listed in your endpoint configuration.`)}async function In(e){if(c(e.id))return fn.warn("No id was passed for the favorite to save so we are unable to save it. If it is a new entry please generate a guid."),!1;if(c(e.timestamp)&&(fn.info("Setting timestamp."),e.timestamp=new Date),gn.hasEndpoint(vn)){const t=await gn.action(vn,{id:e.id,platform:fin.me.identity.uuid,metaData:{version:{workspacePlatformClient:wn.workspacePlatformClient,platformClient:wn.platformClient}},payload:e});if(t){fn.info(`Saved favorite with id: ${e.id} to custom storage`);const t=(0,i.getCurrentSync)();await ne(t,"favorite-changed",{action:"set",favorite:e})}else fn.info(`Unable to save favorite with id: ${e.id} to custom storage`);return t}return fn.warn(`There has been a request to save a favorite but no endpoint with the \n    id: ${vn} is listed in your endpoint configuration.`),!1}async function xn(e){if(c(e))return fn.warn("No id was passed for the favorite to delete so we are unable to delete it."),!1;if(gn.hasEndpoint(kn)){const t=await Pn(e);let n=!1;if(c(t))fn.warn(`Unable to delete favorite with id: ${e} from custom storage as it does not exist`);else if(n=await gn.action(kn,{id:e,platform:fin.me.identity.uuid}),n){fn.info(`Saved favorite with id: ${e} was deleted from custom storage`);const n=(0,i.getCurrentSync)();await ne(n,"favorite-changed",{action:"delete",favorite:t})}else fn.warn(`Unable to delete favorite with id: ${e} from custom storage`);return n}return fn.warn(`There has been a request to delete a favorite but no endpoint with the \n    id: ${kn} is listed in your endpoint configuration.`),!1}function An(){return c(hn)?{isEnabled:!1}:{isEnabled:hn.enabled??!0,favoriteIcon:hn.favoriteIcon,unfavoriteIcon:hn.unfavoriteIcon,command:hn.favoriteCommand,enabledTypes:hn.supportedFavoriteTypes}}async function _n(){return{"favorite-add":async e=>{if(e.callerType===i.CustomActionCallerType.CustomButton||e.callerType===i.CustomActionCallerType.StoreCustomButton){const t=e.customData;c(t)?fn.error("Can only add to favorites if favorite data is provided in customData"):await In(t)}},"favorite-remove":async e=>{if(e.callerType===i.CustomActionCallerType.CustomButton||e.callerType===i.CustomActionCallerType.StoreCustomButton){const t=e.customData;c(t)?fn.error("Can only remove from favorites if favorite data is provided in customData"):await xn(t.id)}}}}var En=n(81);Sr("InitOptions");const Mn=Sr("Share");let Tn,Rn,On=[],Wn=!1;async function Dn(e){if(Array.isArray(On))for(const t of On)if((await t.implementation.getShareTypes()).includes(e))return!0;return!1}async function Bn(e,t){let n=!1;for(const r of On)(await r.implementation.getShareTypes()).includes(e)&&(await r.implementation.share(e,t),n=!0);n||Mn.warn(`Received shareType ${e} but no module was found to handle it.`)}async function Fn(e,t,n){let r=t??Tn?.confirmationMode??"notification";if("notification"===r){const e=(0,i.getCurrentSync)();await le(e,"notifications")||(r="modal")}if("modal"===r)await cn({title:e.title,message:e.message,iconUrl:e.iconUrl??Rn,buttons:[{label:"Dismiss",id:"dismiss"}]},n);else if("notification"===r){const t={shared:En.IndicatorColor.GREEN,loaded:En.IndicatorColor.BLUE,error:En.IndicatorColor.RED},n={expires:new Date(Date.now()+3e4),body:e.message,buttons:[{submit:!1,onClick:null,index:3,iconUrl:"",cta:!1,title:"Dismiss",type:"button"}],stream:{id:"share-requests",displayName:"Share Request",appId:fin.me.identity.uuid},priority:1,icon:e.iconUrl??Rn,indicator:{color:t[e.status],text:e.title},category:"share",title:e.title,template:"markdown"};await(0,En.create)(n)}}n(25);const Nn={};async function Ln(){return Nn}Sr("VersionProvider"),Sr("Integrations"),Sr("Home");class $n{constructor(e,t){this._listenerRegister=[],this._updateTrackedCount=async()=>{const e=await this.getAll();this._currentCount=e.length},this._options=e,this._idPrefix=e.idPrefix??`${e.id}`,this._platformId=t,this._listenerRegister=[],this._currentCount=0,this._isCountTracked=!1,this._logger=Sr(`Notification Client:${this._idPrefix}`)}async create(e,t){return this.hasId(e.id)||(e.id=this.createId(e.id)),!0!==this._options.enforceIcon&&!c(e.icon)||c(this._options.icon)||(e.icon=this._options.icon),this._options.includeInPlatform?e.platform=this._platformId:e.platform===this._platformId&&(e.platform=void 0),(0,En.create)(e,t)}async update(e){return this.hasId(e.id)||(e.id=this.createId(e.id)),(0,En.update)(e)}async getAll(){return(await(0,En.getAll)()).filter((e=>e.id.startsWith(this._idPrefix)))}async clear(e){const t=this.createId(e);return(0,En.clear)(t)}async clearAll(){const e=await this.getAll();let t=0;for(const n of e)await this.clear(n.id)&&t++;return t}async show(e){await(0,En.show)(e)}async hide(){await(0,En.hide)()}async addEventListener(e,t){"notifications-count-changed"!==e||this._isCountTracked||(this._isCountTracked=!0,await this.trackCount());const n={id:b(),eventType:e,listener:t,wrappedListener:e=>{"notification"in e&&this.hasId(e.notification.id)?t(e):"notifications-count-changed"===e.type&&(e.count=this._currentCount,t(e))}};this._listenerRegister.push(n),(0,En.addEventListener)(e,n.wrappedListener)}async removeEventListener(e,t){const n=this._listenerRegister.find((e=>e.listener===t));if(!c(n)&&(await(0,En.removeEventListener)(e,n.wrappedListener),this._listenerRegister=this._listenerRegister.filter((e=>e.id!==n.id)),"notifications-count-changed"===e)){const t=this._listenerRegister.filter((t=>t.eventType===e));1===t.length&&(this._logger.info("Removing the count tracking as there are no more listeners for notification count."),await this.removeEventListener(e,t[0].listener),this._isCountTracked=!1)}}hasId(e){return!c(e)&&e.startsWith(`${this._options.id}-`)}createId(e){return c(e)||!this.hasId(e)?`${this._idPrefix}-${e??b()}`:e}async trackCount(){const e=await this.getAll();this._currentCount=e.length,await this.addEventListener("notifications-count-changed",this._updateTrackedCount)}}const Un=Sr("Notifications");let jn,Vn,Gn,Hn,zn=!1,qn=!0,Kn=!1;Sr("Actions");const Jn=new Map;async function Zn(e,t){if(!d(e))return;const n=`${e}_${t}`,r=Jn.get(n);return r?r.dataUri:new Promise((r=>{try{const a=document.createElement("img");a.width=t,a.height=t,a.crossOrigin="anonymous",a.addEventListener("load",(()=>{let e;try{const r=document.createElement("canvas");r.width=t,r.height=t;const o=r.getContext("2d");o&&(o.drawImage(a,0,0,t,t),e=r.toDataURL("image/png",1),Jn.set(n,{dataUri:e}))}catch{}r(e)})),a.addEventListener("error",(()=>{Jn.set(n,{dataUri:void 0}),r(void 0)})),a.src=e}catch{Jn.set(n,{dataUri:void 0}),r(void 0)}}))}let Yn,Qn,Xn,er;function tr(){return Yn?.popupMenuStyle??"platform"}async function nr(e,t,n,r,a){const o=tr(),i=a?.popupMenuStyle??o;return"platform"===i||"native"===i?async function(e,t,n,r){const a=fin.Window.wrapSync(t),o=[],i=await Ie(),s=await async function(){return Me()}();for(const e of r.filter((e=>e.visible??!0))){let t=Te(e.icon,i,s);d(t)&&(t=await Zn(t,20)),o.push({...e,icon:t})}(c(o)||0===o.length)&&o.push({label:n,enabled:!1});const l=await a.showPopupMenu({template:o,x:e.x,y:e.y});if("clicked"===l.result)return l.data}(e,t,n,r):async function(e,t,n,r){if(Xn)try{const e=fin.Window.wrapSync({uuid:fin.me.uuid,name:Xn});await e.close()}catch{}finally{Xn=void 0}er&&(window.clearInterval(er),er=void 0);const a=fin.Window.wrapSync(t),o=await a.getBounds(),i=fin.Window.wrapSync(fin.me.identity),s=await Se(),c=await Ie(),l=await Ce(),u=rr(c,l,r,n);let d=Math.floor(o.left+e.x),p=Math.floor(o.top+e.y);const f=u.width,h=u.height,g=await et({x:d,y:p});d+f>g.availableRect.right&&(d=g.availableRect.right-f-20),p+h>g.availableRect.bottom&&(p=g.availableRect.bottom-h-20);const w={x:d,y:p,width:f,height:h},m=Yn?.popupHtml??`${Qn}/common/popups/menu/index.html`;return Xn=b(),er=window.setInterval((async()=>{try{if(Xn){const e=fin.Window.wrapSync({uuid:fin.me.identity.uuid,name:Xn});"normal"!==await e.getState()&&(Xn=void 0,window.clearInterval(er),er=void 0)}}catch{Xn=void 0,window.clearInterval(er),er=void 0}}),1e3),new Promise((e=>{window.setTimeout((async()=>{let t;try{const e=await i.showPopupWindow({name:Xn,initialOptions:{showTaskbarIcon:!1,smallWindow:!0,contextMenu:!1,backgroundColor:s?.backgroundPrimary,customData:{noEntryText:n,menuEntries:u.entries,palette:s,colorScheme:l,menuProviderOptions:Yn,popupUrl:m,monitorRect:g,bounds:w}},url:m,...w,blurBehavior:"modal"});Xn=void 0,window.clearInterval(er),er=void 0,"clicked"===e.result&&(t=e.data)}catch{}e(t)}),100)}))}({x:e.x-16,y:e.y-8},t,n,r)}function rr(e,t,n,r){const a=[];let o="";const i=Yn?.menuItemHeight??24,s=Yn?.menuItemSeparatorHeight??12;let l=0,u=0,p=0;for(const f of n.filter((e=>e.visible??!0))){if(f.y=l,d(f.icon)&&(f.icon=Te(f.icon,e,t),u++),"checkbox"!==f.type&&c(f.checked)||u++,"separator"===f.type?l+=s:l+=i,"submenu"===f.type||Array.isArray(f.submenu)){p++;const n=rr(e,t,f.submenu??[],r);f.submenu=n.entries,f.submenuDimensions={width:n.width,height:n.height}}f.label&&f.label?.length>o.length&&(o=f.label),a.push(f)}0===o.length&&(o=r);const f=Yn?.menuFontSize??12;let h=o.length*f/1.6;const g=document.createElement("canvas");g.width=1e3,document.body.append(g);const w=g.getContext("2d");w&&(w.font=`${f}px Inter`,h=w.measureText(o).width,g.remove());let m=40;return u>0&&(m+=28),p>0&&(m+=18),{entries:a,width:Math.floor(Yn?.menuWidth??h+m),height:Math.floor(l+s)}}Sr("Menu");const ar=Sr("Modules");let or,ir=!1;const sr={};async function cr(e,t){const n=[],r=e?.modules;if(Array.isArray(r))for(const e of r){e.moduleType=t;const r=await lr(e,t);r&&n.push(r)}return n}async function lr(e,t){if(e.id){if(e.enabled??1){if(!e.url)return void ar.error(`Module '${e.id}' can not be loaded without a url`);if(sr[e.url]){ar.info(`Module already loaded '${e.url}' using cached version`);const n=sr[e.url][t];if(!n)return void ar.error(`Module from cache does not contain an entry point for type ${t}`);n.definition=e}else try{ar.info(`Loading module '${e.url}' for type ${t}`);const n=await import(e.url);if(!n.entryPoints)return void ar.error(`Module '${e.id}' has no exported entryPoints`);const r=Object.keys(n.entryPoints);if(!r.includes(t))return void ar.error(`Module was loaded, but is does not contain an entry point for type ${t}, it only contains ${r.join(", ")}`);ar.info(`Module contains implementations for ${r.join(", ")}`),sr[e.url]={};for(const a of r)sr[e.url][a]={definition:a===t?e:{},isInitialized:!1,implementation:n.entryPoints[a]??{}}}catch(t){return void ar.error(`Error loading module ${e.url}`,t)}return sr[e.url][t]}}else ar.warn("Module does not have an id defined")}async function ur(e,t){if(!e.isInitialized)if(e.implementation?.initialize)try{ar.info(`Initializing module '${e.definition.id}' of type '${e.definition.moduleType}'`);const n="log"===e.definition.moduleType?vr:Sr,r="auth"===e.definition.moduleType?void 0:Wr,a={...t,getAuthClient:r,getNotificationClient:hr(e.definition),getEndpointClient:gr(e.definition)};await e.implementation.initialize(e.definition,n,a),e.isInitialized=!0}catch(t){ar.error(`Error initializing module ${e.definition.id}`,t)}else e.isInitialized=!0;return e.isInitialized?e.implementation:void 0}function dr(){return{sessionId:or,bringAppToFront:lt,getPlatform:i.getCurrentSync,getAnalyticsClient:async()=>async function(){0}(),getApps:async()=>(ar.info("getApps: getting public apps for module."),nn({private:!1})),getApp:rn,getVersionInfo:Ln,getInteropClient:pr,getFavoriteClient:fr,getThemeClient:Ae,getMenuClient:wr,getConditionsClient:mr,getShareClient:yr,getDialogClient:br,launchApp:async(e,t,n)=>{ar.info(`launchApp: Looking up appId: ${e}`);const r=await rn(e);let a;return c(r)?ar.warn(`launchApp: The specified appId: ${e} is not listed in this platform.`):(ar.info(`launchApp: Launching app with appId: ${e}`),a=await ct(r,t,n),ar.info(`launchApp: App with appId: ${e} launched.`)),a},launchPage:async(e,t,n)=>{const r=(0,i.getCurrentSync)(),a=await r.Storage.getPage(e);if(a)return async function(e,t,n){c(e)&&n?.error("Page is empty and cannot be attached to a window.");const r=(0,i.getCurrentSync)(),a=await r.Browser.getAllAttachedPages(),o=a.find((t=>t.pageId===e.pageId))?.parentIdentity,s=t?.targetWindowIdentity;if(!c(s)){if(!c(o)&&o.name!==s.name&&!t?.createCopyIfExists){const t=r.Browser.wrapSync(o);return await t.setActivePage(e.pageId),n?.warn("Activating page in window which is not the specified target window",{pageId:e.pageId,attachedWindowId:o.name,targetWindowIdentity:s.name}),await De({identity:t.identity}),t}const a=r.Browser.wrapSync(s),i=(await a.getPages()).find((t=>t.pageId===e.pageId));return!i||t?.createCopyIfExists?(n?.info(i?"Page exists in target window, but createCopyIfExists flag is set, adding":"Page does not exist in target window, adding",{pageId:e.pageId,targetWindowIdentity:s.name}),await a.addPage(e)):n?.info("Page exists in target window, activating",{pageId:e.pageId,targetWindowIdentity:s.name}),await a.setActivePage(e.pageId),await De({identity:a.identity}),a}if(!c(o)&&!t?.createCopyIfExists){const t=r.Browser.wrapSync(o);return n?.info("Page exists in target window, activating",{pageId:e.pageId,attachedWindowId:o.name}),await t.setActivePage(e.pageId),await De({identity:t.identity}),t}let l=t?.bounds;c(l)&&!c(e.customData?.windowBounds)&&(l=e.customData.windowBounds);let u=t?.state;c(u)&&!c(e.customData?.windowState)&&(u=e.customData.windowState);const d={workspacePlatform:{pages:[e]}};if(!c(l)){const e=await fin.System.getMonitorInfo();d.height=l.height,d.width=l.width,d.defaultHeight=l.height,d.defaultWidth=l.width,c(e.virtualScreen)||(!c(e.virtualScreen.left)&&l.left>=e.virtualScreen.left&&(d.x=l.left,d.defaultLeft=l.left),!c(e.virtualScreen.top)&&l.top>=e.virtualScreen.top&&(d.y=l.top,d.defaultTop=l.top))}c(u)||(d.state=u);const p=await r.Browser.createWindow(d);return n?.info("Page does not exist, creating new window and adding page",{pageId:e.pageId,newWindowId:p.identity.name}),p}(a,t,n);c(n)?ar.error(`The passed pageId: ${e} does not exist`):n.error(`The passed pageId: ${e} does not exist`)},launchWorkspace:async e=>{const t=(0,i.getCurrentSync)(),n=await t.Storage.getWorkspace(e);return n?t.applyWorkspace(n):(ar.warn(`Unable to launch workspace with id ${e} as it does not exist`),!1)},launchView:Be,launchSnapshot:async e=>{const t=await ct({manifestType:V,manifest:e,appId:"",title:"",icons:[],publisher:""});return t?t.map((e=>({uuid:e.uuid,name:e.name}))):[]},subscribeLifecycleEvent:re,unsubscribeLifecycleEvent:ae,getUtilClient:()=>({general:r,position:a}),getConnectionClient:async()=>async function(){return{isConnectionValid:Ct}}(),getAuthClient:Wr}}async function pr(){if(ir)return fin.Interop.connectSync(fin.me.uuid,{});ar.warn("A request was made for the interop client before bootstrapping had completed. Please listen for the lifeCycle event 'after-bootstrap' before use.")}async function fr(){if(An().isEnabled)return o}function hr(e){const t=w(e);return async()=>async function(e){if(!zn)return void Un.warn("A notification client was requested before the notification provider was registered.",e);if(!qn)return void Un.warn("Notification client creation is disabled. If you this is not expected please check you Notification Provider -> Notification Clients settings.");const t=Vn.find((t=>t.id===e.id));if(Kn&&c(t))return void Un.warn(`Notification client creation is limited to those listed in the notification clients section of the notification provider. We have been unable to find an entry with the id: ${e.id}. `);if(!c(t)&&!1===t.enabled)return void Un.warn(`The options passed to create a notification client was a listed entry and it's enabled setting is set to false so a notification client will not be created. Id: ${e.id}`);if(!c(t)&&!1===t.restricted)return Un.info(`The options passed to create a notification client requests a non-scoped notification client for the module with Id: ${e.id}`),En;const n=Object.assign(e,Gn,t??{});return c(n.icon)&&(Un.info(`No default icon was specified for ${e.id}, providing notification platform default icon of: ${jn?.icon} for cases where an icon was not provided.`),n.icon=jn?.icon),new $n(n,Hn)}(t)}function gr(e){const t=w(e);return async()=>async function(e){if(!M)return void P.warn("A endpoint client was requested before the endpoint provider was registered.",e);if(!T)return void P.warn("Endpoint client creation is disabled. If you this is not expected please check you Endpoint Provider -> Endpoint Clients settings.");const t=x.find((t=>t.id===e.id));if(R&&c(t))return void P.warn(`Endpoint client creation is limited to those listed in the endpoint clients section of the endpoint provider. We have been unable to find an entry with the id: ${e.id}. `);if(!c(t)&&!1===t.enabled)return void P.warn(`The options passed to create a endpoint client was a listed entry and it's enabled setting is set to false so a endpoint client will not be created. Id: ${e.id}`);const n=Object.assign(e,A,t??{});return new s(n,_)}(t)}async function wr(){return{getPopupMenuStyle:tr,showPopupMenu:nr}}async function mr(){return{check:async(e,t)=>le((0,i.getCurrentSync)(),e,t),changed:ue}}async function yr(){if(Wn&&Array.isArray(On)&&On.length>0)return{typeEnabled:Dn,share:Bn,confirmation:Fn}}async function br(){return{showConfirmation:cn}}function vr(e){return console.info(`${e}: Creating local logger for a log module. Log modules will not be able to use the logger to send messages to log modules as it would be sending messages to itself as well as other log sinks. This will be logged to the console of the provider.`),{info:(t,...n)=>console.log(`${e}: ${t}`,...n),warn:(t,...n)=>console.warn(`${e}: ${t}`,...n),error:(t,...n)=>console.error(`${e}: ${t}`,...n),trace:(t,...n)=>console.debug(`${e}: ${t}`,...n),debug:(t,...n)=>console.debug(`${e}: ${t}`,...n)}}let kr=[];function Sr(e){return{info:(t,...n)=>Cr(e,"info",t,...n),warn:(t,...n)=>Cr(e,"warn",t,...n),error:(t,...n)=>Cr(e,"error",t,...n),trace:(t,...n)=>Cr(e,"trace",t,...n),debug:(t,...n)=>Cr(e,"debug",t,...n)}}function Cr(e,t,n,...r){let a=!1;for(const o of kr)a=!0,o.implementation.log(fin.me.identity.name,e,t,n,...r);a||console[t](`[${e}]`,`[${fin.me.identity.name}]`,n,...r)}const Pr=Sr("Auth");let Ir,xr,Ar=!1,_r=!1;function Er(e,t){if(c(xr))return void Pr.warn("Please initialize auth before trying to use subscribe");let n;"logged-in"===e&&(n=async()=>{setTimeout((async()=>{await t(Ir?.includeLoggedInUserInfo??1?await Or():void 0)}),0)});const r=xr.subscribe(e,n??t);return"logged-in"===e&&setTimeout((async()=>{n&&!await Rr()&&await n()}),0),r}async function Mr(){return c(xr)?(Pr.warn("Please initialize auth before trying to use login"),!1):(Pr.info("Log in requested"),xr.login())}async function Tr(){return c(xr)?(Pr.warn("Please initialize auth before trying to use logout"),!1):(Pr.info("Log out requested"),xr.logout())}async function Rr(){return c(xr)?(Pr.info("Auth may not be required for this app. If it is please initialize auth before trying to use isAuthenticationRequired"),!1):(Pr.info("isAuthenticationRequired requested"),xr.isAuthenticationRequired())}async function Or(){return c(xr)?(Pr.warn("Please initialize auth before trying to use getUserInfo"),null):(Pr.info("getUserInfo requested"),xr.getUserInfo())}async function Wr(){if(!c(xr))return{isAuthenticationRequired:Rr,login:Mr,logout:Tr,getUserInfo:Or};Pr.warn("Please initialize auth before trying to use getAuthClient or auth may not be required for this app")}let Dr,Br,Fr=!1;async function Nr(e,t,n,r=!1){if(Dr=n,!await async function(){de.info("Validating source of initial settings");const e=window.location.href.toLowerCase(),t=["platform/provider.html","provider.html","shell/shell.html","shell.html"].find((t=>e.endsWith(t)));let n,r=[];c(t)||(n=e.replace(t,"manifest-hosts.json"),de.info("Using hosts validation url:",n),r=await async function(e){const t=e;try{de.info(`Getting valid hosts for initial settings from ${t}`);const e=await fetch(t);return await e.json()}catch{return de.info(`Valid hosts endpoint (${t}) not provided.`),[]}}(n));const a=await fin.Application.getCurrent(),o=(await a.getInfo()).manifestUrl;de.info(`Source of initial settings: ${o}`);let i=ge(location.href,r);c(i)&&(i=location.hostname,de.info("Adding current host to the list of valid hosts:",i),r.push(i));const s=ge(o,r);return de.info(`Checking manifest host: ${s} vs valid list: ${JSON.stringify(r)}`),s?de.info("The source of the initial settings is valid"):de.warn(`The source of the initial settings ${o} does not match any of the valid host names. Please update the list if required.`),!c(s)}())return Dr.error("The application cannot startup as the source of the setting used to bootstrap this application is not from a valid host. Please update the the list or this logic if required"),!1;Dr.info("Initializing Auth Check");const a=dr();if(await async function(e,t){if(Ir=e,c(Ir))Pr.info("Unable to initialize authentication without settings. If this platform requires auth please ensure you have set the authProvider settings");else if(Ar)Pr.warn("The auth provider has already been initialized");else{Ar=!0;const e=await cr(Ir,"auth");e.length>0&&(e.length>1&&Pr.warn("You have more than one auth module enabled, only the first will be used"),await ur(e[0],t),xr=e[0].implementation,_r=!0)}}(e,a),_r){await async function(){ze}();const e=await Rr();if(r&&(Er("session-expired",$r),Er("logged-out",Lr)),e)return new Promise(((e,r)=>{const a=Er("logged-in",(async()=>{var r;n.info("Platform logged in. Setting up platform"),Fr=await t(),n.info("Unsubscribing from logged in events as platform has been initialized"),a&&(r=a,c(xr)?Pr.warn("Please initialize auth before trying to use unsubscribe"):xr.unsubscribe(r)),e(Fr)}));$r().then((e=>(n.info("Manage Auth Flow executed."),!0))).catch((e=>{r(e)}))}))}return t()}async function Lr(){if(Fr){Dr?.info("Calling quit on platform");const e=fin.Platform.getCurrentSync();await e.quit()}else{Dr?.info("Platform not yet initialized. Closing provider window");const e=fin.Window.wrapSync(fin.me.identity);await e.close(!0)}}async function $r(){Dr?.info("Authentication required. Requesting login"),await Mr()?Dr?.info("Logged in"):(Dr?.warn("User process was cancelled. At this point you should close the application so that the user can relaunch and try again. We are closing the platform"),await Lr())}async function Ur(){Br=Sr("Shell");const e=await fe(),t=await Nr(e?.authProvider,(async()=>async function(e){const t=e?.initUrl;if(!d(t))return Br.error("When using the shell you must specify an initUrl for your platform in the manifest settings in order for progress to proceed."),!1;try{const e=await import(t);return e?.init?await e.init():(Br.error(`The specified provider module '${t}' has no exported init function`),!1)}catch(e){return Br.error("An error occurred while trying to initialize the provider.",e),!1}}(e?.platformProvider)),Br);return t||Br.error("The platform cannot startup as there was a problem with the initialization of the auth flow."),t}export{Ur as init};
//# sourceMappingURL=shell.bundle.js.map