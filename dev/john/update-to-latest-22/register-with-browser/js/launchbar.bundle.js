/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/workspace-platform/index.js":
/*!***************************************************************!*\
  !*** ../../node_modules/@openfin/workspace-platform/index.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

(()=>{var e={847:(e,t)=>{var a={2346:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const o=n(a(6535));t.lightenColor=(e,t)=>r(e,"lighten",t),t.darkenColor=(e,t)=>r(e,"darken",t);const r=(e,t,a)=>{if(a&&(a<0||a>100))throw new Error(`${a} must be a number between 0 and 100`);return(0,o.default)(e)[t](a).toString()};t.getMostReadable=(e,t)=>o.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent",openFinActive:"#4642FF",openFinHover:"#6965FF",lightGray4Active:"#D7DADF",lightGray4Hover:"#EBECEF",darkGray2Active:"#33353B",darkGray2Hover:"#44464E"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const n=a(2317),o=a(2346),r=a(5939),i={fontFamily:n.FontFamily,fontSize:n.FontSize,fontWeight:n.FontWeight,lineHeight:n.LineHeight,iconSize:n.IconSize,radius:n.Radius,shadow:n.Shadow,transition:n.Transition,unit:n.Unit,px:n.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,o.darkenColor)(t,2),[`${e}Hover`]:(0,o.lightenColor)(t,5),[`${e}Focused`]:(0,o.getMostReadable)(t,[n.Color.white,n.Color.darkGray5]),[`${e}Text`]:(0,o.getMostReadable)(t,[n.Color.white,n.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},s(r.Palette.brandPrimary,e.brandPrimary)),s(r.Palette.brandSecondary,e.brandSecondary)),e)})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,a=/\s+$/;function n(o,r){if(r=r||{},(o=o||"")instanceof n)return o;if(!(this instanceof n))return new n(o,r);var i=function(n){var o,r,i,s={r:0,g:0,b:0},c=1,l=null,d=null,u=null,p=!1,w=!1;return"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(a,"").toLowerCase();var n,o=!1;if(f[e])e=f[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=R.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=R.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=R.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=R.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=R.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=R.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=R.hex8.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),a:W(n[4]),format:o?"name":"hex8"}:(n=R.hex6.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),format:o?"name":"hex"}:(n=R.hex4.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),a:W(n[4]+""+n[4]),format:o?"name":"hex8"}:!!(n=R.hex3.exec(e))&&{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),format:o?"name":"hex"}}(n)),"object"==e(n)&&(E(n.r)&&E(n.g)&&E(n.b)?(o=n.r,r=n.g,i=n.b,s={r:255*P(o,255),g:255*P(r,255),b:255*P(i,255)},p=!0,w="%"===String(n.r).substr(-1)?"prgb":"rgb"):E(n.h)&&E(n.s)&&E(n.v)?(l=I(n.s),d=I(n.v),s=function(e,t,a){e=6*P(e,360),t=P(t,100),a=P(a,100);var n=Math.floor(e),o=e-n,r=a*(1-t),i=a*(1-o*t),s=a*(1-(1-o)*t),c=n%6;return{r:255*[a,i,r,r,s,a][c],g:255*[s,a,a,i,r,r][c],b:255*[r,r,s,a,a,i][c]}}(n.h,l,d),p=!0,w="hsv"):E(n.h)&&E(n.s)&&E(n.l)&&(l=I(n.s),u=I(n.l),s=function(e,t,a){var n,o,r;function i(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=P(e,360),t=P(t,100),a=P(a,100),0===t)n=o=r=a;else{var s=a<.5?a*(1+t):a+t-a*t,c=2*a-s;n=i(c,s,e+1/3),o=i(c,s,e),r=i(c,s,e-1/3)}return{r:255*n,g:255*o,b:255*r}}(n.h,l,u),p=!0,w="hsl"),n.hasOwnProperty("a")&&(c=n.a)),c=v(c),{ok:p,format:n.format||w,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(o);this._originalInput=o,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||i.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function o(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,o,r=Math.max(e,t,a),i=Math.min(e,t,a),s=(r+i)/2;if(r==i)n=o=0;else{var c=r-i;switch(o=s>.5?c/(2-r-i):c/(r+i),r){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,l:s}}function r(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,o,r=Math.max(e,t,a),i=Math.min(e,t,a),s=r,c=r-i;if(o=0===r?0:c/r,r==i)n=0;else{switch(r){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,v:s}}function i(e,t,a,n){var o=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function s(e,t,a,n){return[x(A(n)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s-=t/100,a.s=C(a.s),n(a)}function l(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s+=t/100,a.s=C(a.s),n(a)}function d(e){return n(e).desaturate(100)}function u(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l+=t/100,a.l=C(a.l),n(a)}function p(e,t){t=0===t?0:t||10;var a=n(e).toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(-t/100*255))),a.g=Math.max(0,Math.min(255,a.g-Math.round(-t/100*255))),a.b=Math.max(0,Math.min(255,a.b-Math.round(-t/100*255))),n(a)}function w(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l-=t/100,a.l=C(a.l),n(a)}function g(e,t){var a=n(e).toHsl(),o=(a.h+t)%360;return a.h=o<0?360+o:o,n(a)}function h(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var a=n(e).toHsl(),o=[n(e)],r=360/t,i=1;i<t;i++)o.push(n({h:(a.h+i*r)%360,s:a.s,l:a.l}));return o}function k(e){var t=n(e).toHsl(),a=t.h;return[n(e),n({h:(a+72)%360,s:t.s,l:t.l}),n({h:(a+216)%360,s:t.s,l:t.l})]}function b(e,t,a){t=t||6,a=a||30;var o=n(e).toHsl(),r=360/a,i=[n(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,i.push(n(o));return i}function y(e,t){t=t||6;for(var a=n(e).toHsv(),o=a.h,r=a.s,i=a.v,s=[],c=1/t;t--;)s.push(n({h:o,s:r,v:i})),i=(i+c)%1;return s}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,a,n=this.toRgb();return e=n.r/255,t=n.g/255,a=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))},setAlpha:function(e){return this._a=v(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+n+"%)":"hsva("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+n+"%)":"hsla("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,a,n,o){var r=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(a).toString(16)),x(A(n))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*P(this._r,255))+"%",g:Math.round(100*P(this._g,255))+"%",b:Math.round(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%)":"rgba("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),a=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=n(e);a="#"+s(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(h,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},n.fromRatio=function(t,a){if("object"==e(t)){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]="a"===r?t[r]:I(t[r]));t=o}return n(t,a)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(e,t,a){a=0===a?0:a||50;var o=n(e).toRgb(),r=n(t).toRgb(),i=a/100;return n({r:(r.r-o.r)*i+o.r,g:(r.g-o.g)*i+o.g,b:(r.b-o.b)*i+o.b,a:(r.a-o.a)*i+o.a})},n.readability=function(e,t){var a=n(e),o=n(t);return(Math.max(a.getLuminance(),o.getLuminance())+.05)/(Math.min(a.getLuminance(),o.getLuminance())+.05)},n.isReadable=function(e,t,a){var o,r,i,s,c,l=n.readability(e,t);switch(r=!1,(i=a,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),o={level:s,size:c}).level+o.size){case"AAsmall":case"AAAlarge":r=l>=4.5;break;case"AAlarge":r=l>=3;break;case"AAAsmall":r=l>=7}return r},n.mostReadable=function(e,t,a){var o,r,i,s,c=null,l=0;r=(a=a||{}).includeFallbackColors,i=a.level,s=a.size;for(var d=0;d<t.length;d++)(o=n.readability(e,t[d]))>l&&(l=o,c=n(t[d]));return n.isReadable(e,c,{level:i,size:s})||!r?c:(a.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],a))};var f=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=n.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(f);function v(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var a=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return Math.min(1,Math.max(0,e))}function M(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function A(e){return Math.round(255*parseFloat(e)).toString(16)}function W(e){return M(e)/255}var D,T,B,R=(T="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",B="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function E(e){return!!R.CSS_UNIT.exec(e)}return n}()}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return a[e].call(r.exports,r,r.exports,o),r.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=o(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var a=o(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return a.Palette}});var n=o(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return n.createTheme}})})();var i=t;for(var s in r)i[s]=r[s];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";a.r(n),a.d(n,{AppManifestType:()=>l,BookmarkItemContextMenuOptionType:()=>f,BrowserButtonType:()=>v,ColorSchemeOptionType:()=>k,CustomActionCallerType:()=>M,Dock:()=>u,EnterpriseMainContextMenuOptionType:()=>y,GlobalContextMenuOptionType:()=>m,PageChangeEventType:()=>h,PageTabContextMenuOptionType:()=>b,PanelPosition:()=>g,SUPPORTED_LANGUAGES:()=>x,SaveButtonContextMenuOptionType:()=>P,SaveModalType:()=>I,ViewTabMenuOptionType:()=>S,WindowType:()=>C,getCurrentSync:()=>mn,init:()=>Gs,wrapSync:()=>hn});var e={};a.r(e),a.d(e,{createNamespacedLocalStorage:()=>ft,getItem:()=>Pt,removeItem:()=>Ct,setItem:()=>vt});var t,o,r,i,s,c,l,d,u={};a.r(u),a.d(u,{init:()=>_t}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(t||(t={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(o||(o={})),function(e){e.Active="active",e.Default="default"}(r||(r={})),function(e){e.Suggestion="suggestion"}(i||(i={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(s||(s={})),function(e){e.MultiSelect="MultiSelect"}(c||(c={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(l||(l={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(d||(d={}));var p,w,g,h,m,k,b,y,f,S,v,P,C,M;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(p||(p={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(w||(w={})),function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(g||(g={})),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(h||(h={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.ManageDesktopSignals="ManageDesktopSignals",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(m||(m={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(k||(k={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.ManageDesktopSignals="ManageDesktopSignals",e.AddToChannel="AddToChannel",e.Custom="Custom"}(b||(b={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.ManageDesktopSignals="ManageDesktopSignals",e.Print="Print",e.Pin="Pin"}(y||(y={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(f||(f={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(S||(S={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(v||(v={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(P||(P={})),function(e){e.Browser="browser",e.Platform="platform"}(C||(C={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(M||(M={}));const x=["en-US","ja-JP","zh-CN","ko-KR","ru-RU","de-DE","zh-Hant"];var I,A;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(I||(I={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(A||(A={}));const W="undefined"!=typeof window&&"undefined"!=typeof fin,D=("undefined"==typeof process||process.env,"undefined"!=typeof window),T=D&&"undefined"!=typeof indexedDB,B=D?window.origin:A.Local,R=W&&fin.me.uuid,E=W&&fin.me.name,F=W&&fin.me.entityType,V=(A.Local,A.Dev,A.Staging,"prod"===A.Prod),N=e=>e.startsWith("http://")||e.startsWith("https://")?e:B+e,L=N("https://workspace.openfin.co/workspace/22.3.25"),_=N("https://workspace.openfin.co/workspace/22.3.25"),U=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&N(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&N(WORKSPACE_DOCS_CLIENT_URL),"42.138.102.4"),O="22.3.25";"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA;var G,H;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(G||(G={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseLandingPage="/enterprise/landing/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseAboutPage="/popup-menu/about/",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/",e.ZoomControlsDialog="/zoom-controls-dialog/",e.DesktopSignalsModal="/popup-menu/desktop-signals-modal/"}(H||(H={}));const $={...G,...H};var K;!function(e){e.Search="search"}(K||(K={}));const z=$;async function J(){const e="getManifestOverrides",{manifest:t,initialOptions:a}=await fin.Application.getCurrentSync().getInfo();return t?.platform.workspace||t?.platform.home||a?.workspace||a?.home||console.warn(`${e}: Missing Home development manifest overrides, using Desktop Owner Settings.`),t?.platform.workspace?(JSON.stringify(t?.platform.workspace),t?.platform.workspace):t?.platform.home?(JSON.stringify(t?.platform.home),t?.platform.home):a?.workspace?(JSON.stringify(a?.workspace),a?.workspace):a?.home?(JSON.stringify(a?.home),a?.home):{}}const Z=e=>fin.System.getSystemAppConfig(e);async function q(){const e="getDOSOverrides";if(!W)return console.warn(`${e}: the fin API was not available, returning no result`),{};try{let t=await Z("workspace").catch((t=>{console.warn(`${e}: customConfig entry for SystemApp workspace not available in Desktop Owner Settings. ${t?.message}`)}));return t||(t=await Z("home")),JSON.stringify(t),t}catch(t){if(!V)return{};if(!(t instanceof Error))throw t;console.warn(`${e}: Missing Workspace Desktop Owner Settings configuration, using defaults. ${t?.message}`)}return{}}let j,Q;async function Y(){if(j)return j;const e="getOverrides";if(!W)return D&&console.warn(`${e}: The Fin API was not available. Returning an empty result.`),{};const[t,a]=await Promise.all([q(),J()]);return j={...a,...t,disableRuntimeValidation:a.disableRuntimeValidation||t.disableRuntimeValidation},j}function X(e){Q=e}const ee=e=>e.replace(/\/$/,"");async function te(){const e=(await Y()).browserBaseUrl;if(e)try{const t=new URL(e);if(t.pathname.endsWith("/"))t.pathname=ee(t.pathname);else{if("/workspace"===t.pathname)return t.pathname+=`/${O}`,t.toString();console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url, with path: /workspace. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}}catch(t){console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}return Q??_}async function ae(e=!1){const t=await te()+z.Browser;return e?t:ee(t)}async function ne(e=!1){const t=await te()+z.EnterpriseBrowser;return e?t:ee(t)}async function oe(){return await ne()+"/landing/"}const re=async(e,t=!1)=>e?ne(t):ae(t),ie=56,se=728,ce=150,le="dock3",de=e=>{const t=e||"undefined"!=typeof fin&&fin.me.identity.uuid;if(!t)throw new Error("UUID is required to get the Dock3 channel name.");return`${t}-dock3`};var ue,pe;!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(ue||(ue={})),function(e){e.FinProtocol="fin-protocol"}(pe||(pe={}));const we={uuid:R},ge=(ue.Workspace,e=>{if(!W)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),he=()=>ge(we);var me;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.DockSaveWorkspaceMenu="openfin-dock3-save-workspace-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion",e.AICompanionPrefix="openfin-ai-companion-",e.UpdateVersionModal="here-update-version-modal",e.ZoomControlsDialog="here-zoom-controls-dialog",e.AboutPageWindow="here-about-page",e.DesktopSignalsModal="here-desktop-signals-modal"}(me||(me={}));const ke=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2}),be=(e,t)=>{const a=t.width/2,n=t.height/2;return{left:Math.round(e.left-a),top:Math.round(e.top-n),width:t.width,height:t.height}};function ye(e){if(!W)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const fe={name:E,uuid:R};me.Home,ue.Workspace,me.Dock,ue.Workspace;const Se={name:me.Storefront,uuid:ue.Workspace};ue.Workspace,ue.Workspace;async function ve(e){const t=ye(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.setAsForeground()}const Pe=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function Ce(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>Pe(e.identity))));return e.filter(((e,a)=>t[a]))}async function Me(){return(await fin.Application.getCurrentSync().getChildWindows()).filter((e=>e.identity.name.startsWith(me.BrowserMenu)))}const xe=e=>ye(e).getInfo().then((()=>!0)).catch((()=>!1)),Ie=()=>xe(Se);function Ae(e,t){const a=e.top,n=e.left,o=e.top+e.height,r=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(a>c||o<i||n>l||r<s)return 0;const d=Math.max(a,i),u=Math.max(n,s);return(Math.min(o,c)-d)*(Math.min(r,l)-u)/(e.height*e.width)}async function We(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,a)=>{const n=Ae(e,a);return n>t.percentage?{percentage:n,monitor:a}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}const De=(e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a};var Te,Be;!function(e){e.RelativeToParentWindow="relative-to-parent-window",e.RelativeToMonitor="relative-to-monitor"}(Te||(Te={})),function(e){e.Top="top",e.Below="below"}(Be||(Be={}));const Re=async e=>{const t=e&&await ye(e).getBounds(),a=e?await We(t):(await fin.System.getMonitorInfo()).primaryMonitor;return{left:((n=a.availableRect).left+n.right)/2,top:(n.top+n.bottom)/2};// removed by dead control flow
 var n; },Ee=async(e,t,a=!1)=>{let n;if(a)n=await Re(t);else{const e=ye(t),a=await e.getBounds();n=ke(a)}const{defaultHeight:o,defaultWidth:r}=e;return be(n,{height:o,width:r})};async function Fe(e,t,a=!1){const n=t&&"maximized"===await ye(t).getState(),o=a||n||!t,r=await Ee(e,t,o);return await(async e=>{const t=await fin.System.getMonitorInfo(),a=[t.primaryMonitor,...t.nonPrimaryMonitors];for(const t of a)if(1===Ae(e,t))return!1;return!0})(r)?(await ye(t).center(),Ee(e,t,o)):(console.warn("Response modal isn't off screen, not centering parent window"),r)}const Ve=()=>e=>e;var Ne=a(847);const Le=e=>e.replace(/[^\d,]/g,"").split(","),_e=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,a=e[1]/255,n=e[2]/255,o=Math.min(t,a,n),r=Math.max(t,a,n),i=r-o;let s=0,c=0,l=0;return s=0===i?0:r===t?(a-n)/i%6:r===a?(n-t)/i+2:(t-a)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(r+o)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},Ue=e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,a=0,n=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,a=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,a=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`}return[+t,+a,+n]},Oe=e=>{const t=e;if(t.startsWith("#")){return{rgb:Ue(t).join(", "),alpha:1}}const a=t.match(/\d{1,3}(\.\d+)?/g);if(a){const[e,t,n,o]=a;return{rgb:`${e}, ${t}, ${n}`,alpha:void 0!==o?parseFloat(o):1}}return{rgb:Ue(e).join(", "),alpha:1}},Ge=(e,t=!1)=>{const a=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let a;if(t.includes("rgb")){const e=Le(t);e.length>3&&e.pop(),a=_e(e).hue}if(t.includes("#")){const e=Ue(t);a=_e(e).hue}t.includes("hsl")&&(a=Le(t)[0]);const n=a?.toString();if(!n)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return n})(e);return t?{background1:`hsla(${a}, 0%, 100%, 1)`,background2:`hsla(${a}, 67%, 99%, 1)`,background3:`hsla(${a}, 26%, 96%, 1)`,background4:`hsla(${a}, 15%, 94%, 1)`,background5:`hsla(${a}, 10%, 88%, 1)`,background6:`hsla(${a}, 80%, 80%, 1)`}:{background1:`hsla(${a}, 8%, 7%, 1)`,background2:`hsla(${a}, 8%, 13%, 1)`,background3:`hsla(${a}, 9%, 15%, 1)`,background4:`hsla(${a}, 6%, 23%, 1)`,background5:`hsla(${a}, 21%, 28%, 1)`,background6:`hsla(${a}, 5%, 51%, 1)`}},He=(e,t)=>{const a={};return Object.keys(e).forEach((n=>{a[n]=t[n]?t[n]:e[n]})),a};var $e=a(877),Ke=a.n($e),ze=a(67),Je=a.n(ze);const Ze={light:{symbol:Je()?.src||""},dark:{symbol:Ke()?.src||""}},qe=D&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function je(e){let t;const a=new Set;return()=>{if(!W)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await qe;const n={clientAPIVersion:O},o=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return o.onDisconnection((async()=>{a.forEach((e=>e())),a.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),o})().then((e=>(e.addDisconnectionListener=e=>{a.add(e)},e))).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}var Qe,Ye;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(Qe||(Qe={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(Ye||(Ye={}));const Xe=je("__of_workspace_protocol__"),et=Xe;je("__search-openfin-browser-home-topic__");var tt;!function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.GetSavedWorkspacesMetadata="getSavedWorkspacesMetadata",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal",e.SendUpdateVersionModalResponseInternal="sendUpdateVersionModalResponseInternal",e.ShowUpdateVersionModalInternal="showUpdateVersionModalInternal"}(tt||(tt={}));const at=async e=>fin.Platform.wrapSync(e).getClient(),nt=async e=>{const t=await at(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if("boolean"==typeof n&&n)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),n;if("object"==typeof n&&n.isWorkspacePlatform)return n;throw new Error(a)},ot=async e=>(await nt(e),at(e)),rt=async e=>{const t=await nt(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return at(e)},it="dark",st={[Ne.Palette.brandPrimary]:"#0A76D3",[Ne.Palette.brandPrimaryActive]:"#0A71C9",[Ne.Palette.brandPrimaryHover]:"#0B84EB",[Ne.Palette.brandPrimaryFocused]:Ne.Color.white,[Ne.Palette.brandPrimaryText]:Ne.Color.white,[Ne.Palette.statusSuccess]:Ne.Color.functional1,[Ne.Palette.statusWarning]:Ne.Color.functional10,[Ne.Palette.statusCritical]:Ne.Color.functional7,[Ne.Palette.statusActive]:Ne.Color.functional3,[Ne.Palette.contentBackground1]:"#0A76D3",[Ne.Palette.contentBackground2]:"#000000",[Ne.Palette.contentBackground3]:"#000000",[Ne.Palette.contentBackground4]:"#000000",[Ne.Palette.contentBackground5]:"#000000",[Ne.Palette.borderNeutral]:Ne.Color.silverGray},ct={...st,[Ne.Palette.background1]:Ne.Color.white,[Ne.Palette.background2]:Ne.Color.lightGray1,[Ne.Palette.background3]:Ne.Color.lightGray2,[Ne.Palette.background4]:Ne.Color.lightGray3,[Ne.Palette.background5]:Ne.Color.lightGray4,[Ne.Palette.background6]:Ne.Color.lightGray5,[Ne.Palette.brandSecondary]:Ne.Color.lightGray4,[Ne.Palette.brandSecondaryActive]:Ne.Color.lightGray4Active,[Ne.Palette.brandSecondaryHover]:Ne.Color.lightGray4Hover,[Ne.Palette.brandSecondaryFocused]:Ne.Color.darkGray5,[Ne.Palette.brandSecondaryText]:Ne.Color.darkGray5,[Ne.Palette.inputBackground]:Ne.Color.lightGray3,[Ne.Palette.inputColor]:Ne.Color.darkGray5,[Ne.Palette.inputPlaceholder]:Ne.Color.darkGray2,[Ne.Palette.inputDisabled]:Ne.Color.neutralGray,[Ne.Palette.inputFocused]:Ne.Color.lightGray5,[Ne.Palette.inputBorder]:Ne.Color.neutralGray,[Ne.Palette.textDefault]:Ne.Color.darkGray5,[Ne.Palette.textHelp]:Ne.Color.darkGray3,[Ne.Palette.textInactive]:Ne.Color.neutralGray},lt={...st,[Ne.Palette.background1]:Ne.Color.darkGray6,[Ne.Palette.background2]:Ne.Color.darkGray5,[Ne.Palette.background3]:Ne.Color.darkGray4,[Ne.Palette.background4]:Ne.Color.darkGray3,[Ne.Palette.background5]:Ne.Color.darkGray2,[Ne.Palette.background6]:Ne.Color.darkGray1,[Ne.Palette.brandSecondary]:Ne.Color.darkGray2,[Ne.Palette.brandSecondaryActive]:Ne.Color.darkGray2Active,[Ne.Palette.brandSecondaryHover]:Ne.Color.darkGray2Hover,[Ne.Palette.brandSecondaryFocused]:Ne.Color.white,[Ne.Palette.brandSecondaryText]:Ne.Color.white,[Ne.Palette.inputBackground]:Ne.Color.darkGray1,[Ne.Palette.inputColor]:Ne.Color.white,[Ne.Palette.inputPlaceholder]:Ne.Color.lightGray5,[Ne.Palette.inputDisabled]:Ne.Color.neutralGray,[Ne.Palette.inputFocused]:Ne.Color.lightGray5,[Ne.Palette.inputBorder]:Ne.Color.neutralGray,[Ne.Palette.textDefault]:Ne.Color.white,[Ne.Palette.textHelp]:Ne.Color.lightGray5,[Ne.Palette.textInactive]:Ne.Color.neutralGray},dt=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...ct,backgroundPrimary:Ne.Color.darkGray5},dark:{...lt,backgroundPrimary:Ne.Color.darkGray5}}}],ut=e=>{const{background:t,foreground:a}=e;return{background:t,foreground:a??"#FFFFFF"}},pt=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||Ze[t].symbol}}),wt=e=>{const{light:t,dark:a}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},n=He(lt,a),o=He(ct,t),r=((e,t)=>{const a={...e},n={...t};let o=t.backgroundPrimary?Ge(t.backgroundPrimary,!0):{},r=e.backgroundPrimary?Ge(e.backgroundPrimary):{};return o={...o,...n},r={...r,...a},{light:{...t,...o},dark:{...e,...r}}})(a,t),i={...(0,Ne.createTheme)({...n,...r?.dark}),brand:pt(e,"dark")},s={...(0,Ne.createTheme)({...o,...r?.light}),brand:pt(e,"light")},{light:c,dark:l}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const a={},n={};return t.forEach((t=>{const o=e.notificationIndicatorColors[t];"background"in o?(a[t]=ut(o),n[t]=ut(o)):(a[t]=ut(o.dark??o.light),n[t]=ut(o.light??o.dark))})),{light:n,dark:a}}return{light:null,dark:null}})(e);return i.notificationIndicatorColors=l,s.notificationIndicatorColors=c,{dark:i,light:s}},gt=async e=>{const{themes:t,selectedScheme:a}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;if(!t||e.uuid!==fe.uuid)return{themes:await hn(e).Theme.getThemes(),selectedScheme:await hn(e).Theme.getSelectedScheme()};return t})(e);var n,o;return(n=t?.length?t:dt,o=a,n.map((e=>{const t="palettes"in e?e.default:it,{light:a,dark:n}=wt(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:n,light:a},defaultScheme:o??t}})))[0]},ht=async e=>{const t=await ot(e||fin.me.identity),a=await t.dispatch(tt.GetSelectedScheme,void 0);return a===k.System?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a},mt=async(e,t)=>{const a=await gt(fin.me.identity),n=await ht(fin.me.identity)===k.Dark,o=a?.theme;return o?.[n?k.Dark:k.Light]?.palette?.[e]||t};function kt(e){return function(e,t){const a={};for(const n of t)n in e&&(a[n]=e[n]);return a}(e,Ve()(["defaultLeft","defaultTop","defaultCentered","saveWindowState","taskbarIconGroup"]))}function bt(){let e,t;return{promise:new Promise(((a,n)=>{e=a,t=n})),resolve:e,reject:t}}const yt=__webpack_require__(/*! dexie */ "../../node_modules/dexie/import-wrapper.mjs"),ft=e=>({setItem:(t,a)=>{localStorage.setItem(`${e}-${t}`,a)},getItem:t=>localStorage.getItem(`${e}-${t}`),removeItem:t=>localStorage.removeItem(`${e}-${t}`)}),St=ft(R),vt=St.setItem,Pt=St.getItem,Ct=St.removeItem;var Mt;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState",e.ThemePaletteDefaultScheme="ThemePaletteDefaultScheme"}(Mt||(Mt={}));const xt=Mt,It=e=>e+"-"+fin.me.uuid,At=(e,t)=>{const a=T&&W&&new yt.Dexie(e);return a&&a.version(.1).stores({[t]:""}),a},Wt=(e,t)=>{const a=At(It(e),t),n=At(e,t);if(!a||!n)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,a)=>{if(!e[a])return void console.warn(`Legacy store ${a} not found, skipping migration`);const n=Pt(xt.HasMovedStore),o=n?JSON.parse(n):{};if(o&&o[a])return;o[a]=!0,vt(xt.HasMovedStore,JSON.stringify(o));const r=await e[a].toArray();await t[a].bulkPut(r)})(n,a,e),a},Dt="dock3-provider-config",Tt=T&&W&&new yt.Dexie(It("dock3-provider-config"));Tt&&Tt.version(.1).stores({[Dt]:""});var Bt,Rt,Et,Ft,Vt=function(e,t,a,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,a):o?o.value=a:t.set(e,a),a},Nt=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};class Lt{static getOverrideConstructor(...e){return class extends Lt{constructor(){super(...e)}}}constructor(e,t){if(Bt.set(this,void 0),Rt.set(this,void 0),Et.set(this,null),Ft.set(this,bt()),Lt.instance)throw new Error("Dock3Provider has already been initialized.");Lt.instance=this,Vt(this,Bt,e,"f"),Vt(this,Rt,t,"f"),this.registerChannelActions()}async launchEntry(e){}get ready(){return Nt(this,Ft,"f").promise}async bookmarkContentMenuEntry(e){}get config(){return Nt(this,Bt,"f")}set config(e){Vt(this,Bt,e,"f")}async updateConfig(e){await this.handleConfigChange(e)}async shutdown(){await Promise.all([Nt(this,Rt,"f").destroy(),this.getWindowSync().close(!0)]),Lt.instance=null}async saveConfig({config:e}){Vt(this,Bt,e,"f"),await async function(e){if(!Tt)throw new Error("Unable to save Dock provider config - IndexedDb not supported");await Tt[Dt].put(e,"latest")}(e)}async handleConfigChange(e){Nt(this,Et,"f")&&await Nt(this,Rt,"f").dispatch(Nt(this,Et,"f"),"handle-dock-config-updated",e)}async loadConfig(){const e=await async function(){if(!Tt)throw new Error("Unable to get Dock provider config - IndexedDB not supported");try{return await Tt[Dt].get("latest")}catch(e){return void console.warn("Failed to retrieve Dock provider config from IndexedDB",e)}}();return e&&Vt(this,Bt,e,"f"),Nt(this,Bt,"f")}getWindowSync(){return fin.Window.wrapSync({uuid:fin.me.identity.uuid,name:le})}registerChannelActions(){Nt(this,Rt,"f").register("launch-entry",this.launchEntry.bind(this)),Nt(this,Rt,"f").register("save-config",this.saveConfig.bind(this)),Nt(this,Rt,"f").register("bookmark-content-menu-entry",this.bookmarkContentMenuEntry.bind(this)),Nt(this,Rt,"f").onConnection((e=>{e.name===le&&Vt(this,Et,e,"f")})),Nt(this,Rt,"f").register("ready",(async(e,t)=>{if(Nt(this,Et,"f")?.endpointId!==t.endpointId)throw new Error(`Dock3Provider: 'ready' action received from unexpected client ${t.name} (${t.uuid})`);Nt(this,Ft,"f").resolve()})),Nt(this,Rt,"f").onDisconnection((e=>{Nt(this,Et,"f")?.endpointId===e.endpointId&&(Vt(this,Et,null,"f"),Vt(this,Ft,bt(),"f"))}))}}async function _t(e){const{config:t,override:a}=e;if(Lt.instance)throw new Error("Dock3Provider has already been initialized.");const n=await fin.InterApplicationBus.Channel.create(de()),o=new(a(Lt.getOverrideConstructor(t,n)));return await o.loadConfig(),await async function(e,t,a,n){if(!await xe({uuid:fe.uuid,name:e})){let o;o="number"==typeof a.dockPosition?.left||"number"==typeof n?.defaultLeft?a.dockPosition?.left:(await Re(fe)).left-se/2;const r={name:e,url:t+z.EnterpriseDock,autoShow:!0,frame:!1,smallWindow:!0,saveWindowState:!1,defaultHeight:ie,defaultWidth:se,includeInSnapshots:!1,defaultTop:a.dockPosition?.top??ce,defaultLeft:o,workspacePlatform:{windowType:a.windowType,...a},throttling:"disabled",resizable:!1,maximizable:!1,backgroundColor:await mt("background1"),...kt(n??{})};await fin.Window.create(De(r))}}(le,await ae(),o.config,e.windowOptions),await o.ready,o}Bt=new WeakMap,Rt=new WeakMap,Et=new WeakMap,Ft=new WeakMap,Lt.instance=null;const Ut=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),a=await t.getOptions();return a.workspacePlatform?.windowType&&"enterprise"===a.workspacePlatform.windowType},Ot=e=>{const t=e?.defaultWindowOptions?.workspacePlatform?.windowType;return"enterprise"===t};let Gt;const Ht=e=>{if(e)try{return new URL(e).pathname.includes(z.EnterpriseLandingPage.replace(/\/$/,""))}catch(t){console.error("error parsing url: %O",e)}return!1};var $t;!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}($t||($t={}));const Kt=async(e,t,a="workspace-licensing")=>{const n={apiVersion:t.apiVersion||O,componentName:e,componentVersion:t.componentVersion||O,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:a,data:n})};let zt=!1;const Jt=new Map,Zt=e=>{let t=Jt.get(e.uuid);return t||(t=hn(e),t.once("closed",(()=>{Jt.delete(e.uuid)})),Jt.set(e.uuid,t)),t},qt=async(e,t)=>{try{await e._raiseAnalytics([t])}catch(e){console.error("failed to raise analytics event",e)}},jt=async e=>{await qt(Zt(fin.me.identity),{source:"Browser",...e})};let Qt;const Yt=async e=>{Qt||(Qt=new TextEncoder);const t=Qt.encode(e),a=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(a)).map((e=>e.toString(16).padStart(2,"0"))).join("")};function Xt(e){return e&&"object"==typeof e&&!Array.isArray(e)}function ea(e,...t){if(!t.length)return e;const a=t.shift();return Xt(e)&&Xt(a)&&Object.entries(a).forEach((([t,a])=>{if(Xt(a))return e[t]||(e[t]={}),ea(e[t],a);e[t]=a})),ea(e,...t)}const ta=__webpack_require__(/*! lodash.debounce */ "../../node_modules/lodash.debounce/index.js");var aa=a.n(ta);function na(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function oa(){return localStorage.getItem(xt.MachineName)??"unknown"}let ra;async function ia(){return ra||(ra=await fin.System.getMachineId()),ra}const sa=e=>{if(Array.isArray(e.workspacePlatform?.pages)&&(e.layoutSnapshot||e.layout)){const t=e.workspacePlatform.pages.find((e=>e.isActive));if(t){const a=e.layoutSnapshot?e.layoutSnapshot.layouts[t.layoutContainerKey]:e.layout;if(a)if(t.isLocked){const n=In(a,t.layout);t.layout=n,e.layout=n}else t.layout=a,e.layout=a}}return e};async function ca(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const a=oa();return{...t,snapshotDetails:{...t.snapshotDetails,machineId:await ia(),machineName:a}}}const la=async e=>({...e,layoutDetails:{machineId:await ia(),machineName:oa()}}),da=async(e,t)=>({pageId:na(),title:e,layout:await la(t),isReadOnly:!1}),ua=async e=>{const t=await da(e.title,Pn(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:vn(e.viewOptions)})))),{...e,...t}},pa=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const a=await t.getConfig(),{settings:n,dimensions:o}=a,r=await Ut(e);await t.replace({...a,settings:{...n,hasHeaders:!0,reorderEnabled:!0},dimensions:{...o,headerHeight:r?28:30}})},hide:async e=>{const a=await t.getConfig(),{settings:n,dimensions:o}=await a;await t.replace({...a,settings:{...n,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...o,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:a}=await e;return a.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}},wa="of-workspace-";const ga=new class{mark(e){performance.mark(`${wa}${e}`)}markStart(e){performance.mark(`${wa}${e}-start`)}markEnd(e){performance.mark(`${wa}${e}-end`)}markEndAndMeasure(e){performance.mark(`${wa}${e}-end`);try{return performance.measure(`${wa}${e}`,`${wa}${e}-start`,`${wa}${e}-end`)}catch(e){0}}markAndMeasure(e,t){performance.mark(`${wa}${e}`);try{return performance.measure(`${wa}${e}-measure`,`${wa}${t}-start`,`${wa}${e}`)}catch(e){0}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(wa)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${wa}`,"").replace("-measure",""),duration:e.duration})))}},ha=()=>{const e=`browser-context-menu-startup-${na()}`;return ga.markStart(e),e},ma=e=>{ga.markAndMeasure("browser-context-menu-called",e)},ka=e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{(e=>{ga.markAndMeasure("browser-context-menu-shown",e)})(e)}))},ba=(e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`,ya=new Map,fa=e=>(ya.has(e)||ya.set(e,je(e)),ya.get(e)()),Sa=(e,t)=>{const a=ba(e,t);return fa(a)};var va,Pa,Ca,Ma,xa,Ia;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(va||(va={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(Pa||(Pa={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(Ca||(Ca={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(Ma||(Ma={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(xa||(xa={})),function(e){e.SendUpdateVersionModalResponse="send-update-version-modal-response"}(Ia||(Ia={}));const Aa={...va,...Pa,...xa},Wa=je(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),Da=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await Wa()).dispatch(Ma.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await Wa()).dispatch(Ma.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await Wa()).dispatch(Ma.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await Wa()).dispatch(Ma.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await Wa()).dispatch(Ma.DeleteBookmarkNode,e))(e)},getPages:async()=>(await rt(e)).dispatch(tt.GetPagesForWindow,e),getPage:async t=>(await rt(e)).dispatch(tt.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>mn().Browser.wrapSync(e)._addPage(t),_addPage:async(t,a)=>{const n=await rt(e),o={identity:e,page:t,insertionIndex:a?.index,multiInstanceViewBehavior:a?.multiInstanceViewBehavior};return n.dispatch(tt.AddPage,o)},_addPages:async(t,a)=>{const n=await rt(e),o=t.map((({page:e,opts:t})=>({...e,multiInstanceViewBehavior:t?.multiInstanceViewBehavior||"duplicate"}))),r={identity:e,pages:o,...a};return n.dispatch(tt.AttachPagesToWindow,r)},removePage:async t=>(await rt(e)).dispatch(tt.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>mn().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:a}=t,n=await rt(e),o=(await n.dispatch(tt.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===a));if(!o)throw new Error(`Reparent Page Error: Target page with pageId ${a} not found`);o.multiInstanceViewBehavior="reparent";const r={identity:e,pages:[o],insertionIndex:t.index};return n.dispatch(tt.AttachPagesToWindow,r)},setActivePage:async t=>(await rt(e)).dispatch(tt.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await rt(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await rt(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const a=fin.Window.wrapSync(e);"string"!=typeof t?await a.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await rt(e);return(await Sa(e)).dispatch(Aa.OpenSaveModalInternal,t)},_getLayoutsWithSelectedViews:async()=>(await Sa(e)).dispatch(Aa.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const a=await rt(e);return t.identity=e,a.dispatch(tt.AddDefaultPage,t)},_trackRemovedTab:async t=>(await rt(e)).dispatch(tt.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await rt(e)).dispatch(tt.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await rt(e)).dispatch(tt.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await rt(e)).dispatch(tt.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await rt(e)).dispatch(tt.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await rt(e)).dispatch(tt.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await rt(e)).dispatch(tt.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await rt(e)).dispatch(tt.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await rt(e)).dispatch(tt.HandleRequestNavigationInternal,t),_sendUpdateVersionModalResponse:async t=>(await rt(e)).dispatch(tt.SendUpdateVersionModalResponseInternal,t)}),Ta=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>Da(e),createWindow:async a=>{const n=(()=>{const e=`browser-window-startup-${na()}`;return ga.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{ga.markAndMeasure("browser-window-shown",e)}))})(n),await rt(e);const o=await t.createWindow(a);return(e=>{ga.markAndMeasure("browser-window-started",e)})(n),Da(o.identity)},getAllAttachedPages:async()=>(await rt(e)).dispatch(tt.GetAllAttachedPages,void 0),getAllWindows:async()=>{await rt(e);return(await Ce()).map((e=>Da(e.identity)))},getUniquePageTitle:async t=>(await rt(e)).dispatch(tt.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await rt(e)).dispatch(tt.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await rt(e)).dispatch(tt.GetPageByViewIdentity,t)}},Ba=(e,t=0)=>{let a,n,o=!1;const r=async n=>{const i=await e(...n);if(o){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,o=!1,r(e)}return i};return(...e)=>(n?(o=!0,a=e):n=r(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{n=void 0})),n)};var Ra;!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(Ra||(Ra={}));function Ea(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function Fa(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function Va(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),o=(...e)=>{a(...e),n.delete(o)};n.add(o)}}function Na(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}const La={name:me.BrowserMenu,alwaysOnTop:!0,autoShow:!0,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!1,saveWindowState:!1};function _a(e){const t={...La,...e};return t.url=function(e,t){if(!D)throw new Error("resolveAbsolutePath can only be used in a window");const a=t??window.location;if(/^(?:[a-z]+:)?\/\//i.test(e))return e;const n=`${a.protocol}//${a.hostname}`;return new URL(e,n).href}(t.url??""),t}const Ua=function(e){const t=new Map;return{emit:Ea(t,(t=>W&&fin.InterApplicationBus.publish(e,t))),addListener:Fa(t,(t=>W&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),addListenerWithUUID:a=>Fa(t,(t=>W&&fin.InterApplicationBus.subscribe({uuid:a},e,t))),removeListener:Na(t),once:Va(t)}}("window.menu"),Oa=(e,t)=>fin.Window.wrapSync(e).updateOptions({opacity:t}),Ga=e=>Ua.emit("response",e),Ha=Ba((()=>he().getChildWindows()),500);const $a=new Map;async function Ka(e,t,a){const n=_a(e),o=await gt(fin.me.identity),r=await ht(fin.me.identity)===k.Dark,i=o?.theme;if(n.backgroundColor=i?.[r?k.Dark:k.Light]?.palette?.inputBackground||n.backgroundColor,!$a.has(n.name)){return new Promise((o=>{Ua.once("ready",(async e=>{if(e.name===n.name){const t=await $a.get(n.name);n.preventBlur||t.once("blurred",(async()=>{if(Oa(e,0),t.hide(),Ga({name:n.name,data:{actionName:"Cancel"}}),a=t.identity.name,[me.BrowserSaveMenu,me.DockSaveWorkspaceMenu,me.DesktopSignalsModal].includes(a)){const e=await t.getOptions();"submitting"!==e.customContext&&"error"!==e.customContext&&t.close()}else t.identity.name.startsWith(me.BrowserMenu)&&t.close();var a})),setTimeout((async()=>{await Oa(e,1);1!==(await fin.Window.wrapSync(e).getOptions()).opacity&&Oa(e,1)})),o(t)}}));const r=(async()=>{const o=await fin.Platform.getCurrentSync().createWindow(De({...n,opacity:0,url:t||n.url,defaultLeft:a?.left,defaultTop:a?.top,defaultWidth:a?.width,defaultHeight:a?.height,workspacePlatform:{preventBlur:e.preventBlur}},!0));return o.once("closed",(()=>{$a.delete(n.name)})),o})();$a.set(n.name,r)}))}return $a.get(n.name)}async function za(e,t){const a=_a(e),n={top:a.top,left:a.left,width:a.defaultWidth||a.width,height:a.defaultHeight||a.height};return t.set("parentName",fin.Window.getCurrentSync().identity.name),{name:a.name,bounds:n,route:`${a.url}#${t.toString()}`}}async function Ja({options:e,parameters:t}){const a=t??new URLSearchParams,n=_a(e),{name:o,modalParentIdentity:r}=n;if(!a.has("isEnterprise")){const e=`${await(async e=>(Gt||(Gt=await Ut(e)),Gt))(r)}`;a.set("isEnterprise",e)}let i=await async function(e){return(await Ha()).find((t=>t.identity.name===e))}(o);if(i)await async function(e,t){const{name:a,bounds:n,route:o}=await za(e,t),r={uuid:fin.me.identity.uuid,name:a},i=fin.Window.wrapSync(r);await Promise.all([i.hide(),Oa(r,0),i.setBounds(n)]),e.preventBlur||i.once("blurred",(()=>{Oa(r,0),i.hide(),Ga({name:r.name,data:{actionName:"Cancel"}})})),Ua.emit("update",a,n,o),await Ga({name:a,data:{actionName:"Cancel"}})}(n,a);else{const{route:t,bounds:o}=await za(e,a);i=await Ka({...n},t,o)}return i}const Za=async({options:e,content:t,parameters:a})=>{const n=a??new URLSearchParams;n.set("content",JSON.stringify({...t,invocationId:na()}));const o={...e,name:`${e.name}--${e.modalParentIdentity?.name??""}`},r=await Ja({options:o,parameters:n});return new Promise((e=>{Ua.once("response",(async t=>{t.name===o.name&&(e({data:t.data}),o?.closeOnResponse&&r.close())}))}))};let qa;async function ja(e){return(await(qa||(qa=je(`${"undefined"!=typeof fin&&fin.me.identity.uuid}-enterprise-modal`)()),qa)).dispatch(Ia.SendUpdateVersionModalResponse,e)}const Qa=async e=>{const t=ye(e),a=await t.getBounds(),n=ke(a),o=be(n,{height:240,width:432});return Ja({options:{smallWindow:!0,saveWindowState:!1,showTaskbarIcon:!0,includeInSnapshots:!1,workspacePlatform:{windowType:"enterprise"},resizable:!1,name:me.DesktopSignalsModal,url:await ne()+z.DesktopSignalsModal,defaultWidth:432,defaultHeight:240,preventBlur:!1,...o},parameters:new URLSearchParams({title:"Desktop Signals Modal"})})},Ya=e=>({createPage:async t=>(await rt(e)).dispatch(tt.CreateSavedPageInternal,t),deletePage:async t=>(await rt(e)).dispatch(tt.DeleteSavedPageInternal,t),updatePage:async t=>(await rt(e)).dispatch(tt.UpdateSavedPageInternal,t),getPage:async t=>(await rt(e)).dispatch(tt.GetSavedPage,t),getPages:async t=>(await rt(e)).dispatch(tt.GetSavedPages,t),savePage:async t=>(await rt(e)).dispatch(tt.SavePage,t),createWorkspace:async t=>(await ot(e)).dispatch(tt.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const a=mn(),n=await a.getCurrentWorkspace();if(n.workspaceId===t)throw new Error(`Cannot delete current active workspace ${n.title}`);return(await ot(e)).dispatch(tt.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await ot(e)).dispatch(tt.UpdateSavedWorkspace,t),getWorkspace:async t=>(await ot(e)).dispatch(tt.GetSavedWorkspace,t),getWorkspaces:async t=>(await ot(e)).dispatch(tt.GetSavedWorkspaces,t),getWorkspacesMetadata:async t=>(await ot(e)).dispatch(tt.GetSavedWorkspacesMetadata,t),saveWorkspace:async t=>(await ot(e)).dispatch(tt.SaveWorkspace,t),getDockProviderConfig:async t=>(await ot(e)).dispatch(tt.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await ot(e)).dispatch(tt.SaveDockProviderConfig,t)});var Xa;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(Xa||(Xa={}));const en=je("of-workspace-notifications-sync"),tn=k.Dark,an=e=>Object.entries(e).reduce(((e,[t,a])=>`${e}--workspace-palette-${t}: ${a};`),""),nn=(e,t)=>{const a=!!e.contentBackground5&&"#000000"!==e.contentBackground5,n=!!e.contentBackground4&&"#000000"!==e.contentBackground4,o=Oe(e.textDefault),r=Oe(e.textInactive),i=o.rgb,s=r.rgb,c=o.alpha?parseFloat(o.alpha.toString()):1,l=r.alpha?parseFloat(r.alpha.toString()):1;return{dockExpandedContainerBorderColor:a?e.contentBackground5:e.background4,dockExpandedContainerBorderRadius:a&&t?"0":"10px",dockExpandedContainerBackground:n?e.contentBackground4:e.background1,fillerBackgroundColor:n?e.contentBackground4:"inherit",dockCompanionContainerBackground:n?e.contentBackground4:"inherit",dockComponentContainerBackground:a?e.contentBackground5:e.background5,styledDropdownActiveBackground:`${a?e.contentBackground5:e.background4}`,contentMenuWrapperInternalDivBorderColor:a?e.contentBackground5:e.background5,contentMenuItemContainerActiveBackground:a?e.contentBackground5:e.background3,contentMenuItemContainerHoverBackground:a?e.contentBackground5:e.background2,contentMenuHeaderBorderColor:a?e.contentBackground5:e.background5,dockCompanionSeparatorBorderColor:a?e.contentBackground5:e.background3,dockComponentContainerBorderColor:a?e.contentBackground5:e.background5,companionDockButtonActiveBackground:a?e.contentBackground5:e.background4,companionDockButtonHoverBackground:a?e.contentBackground5:e.background4,"computed-scrollbar-thumb-alpha":c,"computed-scrollbar-track-alpha":l,"scrollbar-thumb-rgb":i,"scrollbar-track-rgb":s}},on=(e,t,a)=>({selectedTab:"dark"===t?e.background3:e.background1,...nn(e,a)});const rn=new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorage=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=()=>{if(this.workspaceStorage&&this.hasUserPreference()){const e=this.getScheme();if(this.workspaceStorage.setItem(xt.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)this.workspaceStorage.setItem(xt.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;this.workspaceStorage.setItem(xt.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t},a)=>{this.lightPaletteVars=an({...e,...on(e,"light",a)}),this.darkPaletteVars=an({...t,...on(t,"dark",a)})}}hasUserPreference(){return null!==this.providerStorage.getItem(xt.SelectedColorScheme)}setScheme(e){this.providerStorage.setItem(xt.SelectedColorScheme,e)}setThemeDefaultScheme(e){const t=Object.values(k);t.includes(e)?this.providerStorage.setItem(xt.ThemePaletteDefaultScheme,e):console.warn(`Invalid theme default scheme '${e}'. Must be one of: ${t.join(", ")}. Ignoring default.`)}getScheme(){const e=this.providerStorage.getItem(xt.SelectedColorScheme),t=this.providerStorage.getItem(xt.ThemePaletteDefaultScheme);return null!==e?e:t??tn}}(e),sn=()=>rn,cn=e=>({getThemes:async()=>(await ot(e)).dispatch(tt.GetThemes,void 0),setSelectedScheme:async t=>(await ot(e)).dispatch(tt.SetSelectedScheme,t),getSelectedScheme:async()=>(await ot(e)).dispatch(tt.GetSelectedScheme,void 0)}),ln=async e=>{const t=await et();await t.dispatch("set-selected-scheme",e)},dn=async e=>{const t=await en();await t.dispatch(Xa.UpdatePlatformThemeScheme,{scheme:e})},un=async e=>{const t=await Ce();return Promise.all(t.map((async t=>{const a=await Sa(t.identity);await a.dispatch(Aa.SetSelectedScheme,e)})))},pn=async e=>{const t=await Me();return Promise.all(t.map((async t=>{const a=await Sa(t.identity);await a.dispatch(Aa.SetSelectedScheme,e)})))},wn=async e=>{try{const t=sn();t.setScheme(e),await Promise.all([await t.trySynchronizeWorkspaceStorage(),dn(e),un(e),pn(e),ln(e)])}catch(e){console.error("failed to set the selected scheme: ",e)}},gn=()=>{try{return sn().getScheme()}catch(e){console.error("failed to get the selected scheme: ",e)}},hn=e=>{const t=fin.Platform.wrapSync(e);let a;return Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,a,n)=>fin.Platform.wrapSync(e).createView(t,a,n),launchApp:async t=>{console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:R,name:E,entityType:F||"unknown"});return(await ot(e)).dispatch(tt.LaunchApp,t)},_invokeCustomAction:async(t,a)=>{const n=await ot(e),o={actionId:t,payload:{...a,callerType:a.callerType||M.API}};return n.dispatch(tt.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await ot(e)).dispatch(tt.RequestQuitPlatformDialogInternal,t),_showUpdateVersionModal:async t=>(await ot(e)).dispatch(tt.ShowUpdateVersionModalInternal,t),getCurrentWorkspace:async t=>(await ot(e)).dispatch(tt.GetCurrentWorkspace,t),applyWorkspace:async(t,a)=>(await ot(e)).dispatch(tt.ApplyWorkspace,{...t,options:a}),restoreLastSavedWorkspace:async t=>(await ot(e)).dispatch(tt.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await ot(e)).dispatch(tt.SetActiveWorkspace,t),getLanguage:async()=>(await ot(e)).dispatch(tt.GetLanguage),_getLanguageResources:async()=>(await ot(e)).dispatch(tt.GetLanguageResourcesInternal),setLanguage:async t=>(await ot(e)).dispatch(tt.SetLanguage,t),_raiseAnalytics:async t=>{if(a||(a=await nt(e)),"object"==typeof a&&a?.analytics?.isSupported){return(await ot(e)).dispatch(tt.Analytics,t)}e.uuid},getNotificationsConfig:async()=>(await ot(e)).dispatch(tt.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await ot(e)).dispatch(tt.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await ot(e)).dispatch(tt.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await ot(e)).dispatch(tt.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await ot(e)).dispatch(tt.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await ot(e)).dispatch(tt.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await ot(e)).dispatch(tt.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await ot(e)).dispatch(tt.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await ot(e)).dispatch(tt.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await ot(e)).dispatch(tt.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await ot(e)).dispatch(tt.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await ot(e)).dispatch(tt.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await ot(e)).dispatch(tt.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await ot(e)).dispatch(tt.FocusAndExpandSearchInternal),_showAboutPagePopup:async e=>(async e=>{const t=new URLSearchParams({...e,title:"About"}),a=await Re(fin.me.identity),n=e.copyrightMessage?320:286,o=be(a,{height:n,width:360});return Ja({options:{frame:!0,smallWindow:!0,saveWindowState:!1,showTaskbarIcon:!0,includeInSnapshots:!1,workspacePlatform:{windowType:"enterprise"},resizable:!1,name:me.AboutPageWindow,url:await ne()+z.EnterpriseAboutPage,defaultWidth:360,defaultHeight:n,preventBlur:!0,...o},parameters:t})})(e),Theme:cn(e),Browser:Ta(e),Storage:Ya(e)})},mn=()=>hn(fin.me.identity),kn={contextMenuOptions:{enabled:!0,template:["spellCheck","separator","print","separator","cut","copy","paste","undo","redo","selectAll","inspect","reload"]},downloadShelf:{enabled:!0}};function bn(e,t){return ea({},kn,t,e)}const yn="internal-generated-view-",fn=(e,t)=>e.content?{...e,content:e.content.map((e=>fn(e,t)))}:{...e,componentState:t(e.componentState)},Sn=(e,t)=>{return a=bn(e,t),{...a,name:a.name?a.name:`internal-generated-view-${na()}`,_internalWorkspaceData:{...a._internalWorkspaceData,viewIdentifier:a._internalWorkspaceData?.viewIdentifier||na()}};// removed by dead control flow
 var a; },vn=e=>({...e,name:void 0}),Pn=e=>{const t={...e};return fn(t,vn)},Cn=e=>{const t={...e};return fn(t,(e=>e.name&&e.name.startsWith(yn)?vn(e):e))},Mn=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=Mn(e.content);t.push(...a)})),t},xn=async(e,t,a=fe)=>{let n;if(await Pe(a)){n=(await ye(a).getOptions()).layout||{settings:{}}}return{...n,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map,new Map;const In=(e,t)=>{const a=Mn(t.content);return{...fn(e,(e=>{const t=a.find((t=>t._internalWorkspaceData?.viewIdentifier===e._internalWorkspaceData?.viewIdentifier)),n=t?t.isClosable:e.isClosable;return{...e,isClosable:n}})),settings:t.settings}},An=e=>e?Mn(e).length:0,Wn=(aa()((async e=>{try{if(!e||!e.layoutContainerKey)return;const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),a=t.content?Mn(t.content):[],n=a.length;n>1?(async e=>{if("multiView"!==e.attachedPageType){const t=await mn().Browser.getUniquePageTitle();mn().Browser.wrapSync(fe).updatePage({pageId:e.pageId,page:{title:e.title??t,singleViewName:null,attachedPageType:"multiView"}})}})(e):1===n&&(async(e,t)=>{const a=mn().Browser.wrapSync(fe);if("singleView"!==e.attachedPageType){const n=await ua(e);delete n.layout,delete n.pageId;const o=fin.View.wrapSync({uuid:fe.uuid,name:t}),r=await o.getInfo(),i={...n,title:null,singleViewName:t,hasUnsavedChanges:!1,attachedPageType:"singleView",pageIcon:r.favicons[0]};await a.updatePage({pageId:e.pageId,page:i})}})(e,a[0].name),await(async(e,t)=>{const a=pa({...fe,layoutName:e.layoutContainerKey}),n=await a.isShowingTabs();t>1?n||await a.show():1===t&&n&&await a.hide({settings:{reorderEnabled:!0}})})(e,n)}catch(e){}}),50,{leading:!1,trailing:!0}),__webpack_require__(/*! react-i18next */ "../../node_modules/react-i18next/dist/es/index.js")),Dn=__webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/cjs/i18next.js");var Tn=a.n(Dn);const Bn=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":" Web ","contextMenu.openViews":" Web ","contextMenu.reload":"Reload CN","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate CN","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab CN","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value CN","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page CN","enterpriseDefaultPageTitle":"Untitled Supertab CN","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}} ","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. CN","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":" {{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete CN","appResults.header":"Featured Content CN","recentlyClosed.header":"Recently Closed CN","landingPage.subheader":"Apps and websites selected by an admin will show here CN","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":" {{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":"","global.supertab":"Supertab CN","global.tab":"Tab CN","bookmarks.editBookmark":"Edit Bookmark CN","bookmarks.bookmarkAdded":"Bookmark added CN","bookmarks.done":"Done CN","bookmarks.remove":"Remove CN","bookmarks.bookmarksPanel":"Bookmarks Panel CN","bookmarks.bookmarks":"Bookmarks CN","bookmarks.allBookmarks":"All Bookmarks CN","bookmarks.favorites":"Favorites CN","bookmarks.searchBookmarks":"Search Bookmarks CN","bookmarks.clearSearchInput":"Clear Search Input CN","bookmarks.createFolder":"Create New Folder CN","bookmarks.exitFolder":"Exit Folder CN","bookmarks.newFolder":"New Folder CN","bookmarks.namedFolder":"{{name}} Folder CN","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings CN","bookmarks.folderSettings":"{{name}} Folder Settings CN","bookmarks.noResultsFound":"No results found CN","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search CN","bookmarks.nothingToShow":"Nothing to show yet CN","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder CN","bookmarks.resultsFoundIn":"Results found in {{name}} CN","bookmarks.resultsInOtherFolders":"Results found in other folders CN","bookmarks.allResultsFoundIn":"All results found in CN","bookmarks.editName":"Edit Name CN","bookmarks.move":"Move CN","bookmarks.bookmarkAddedTitle":"Bookmark Added CN","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" CN","bookmarks.bookmarkEditedTitle":"Bookmark Edited CN","enterpriseContextMenu.saveSupertab":"Save Supertab CN","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... CN","enterpriseContextMenu.duplicate":"Duplicate CN","enterpriseContextMenu.deleteSupertab":"Delete Supertab CN","enterpriseContextMenu.newTab":"New Tab CN","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As CN","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? CN","saveSupertabCount_other":"Save {{count}} Supertabs before closing? CN"},"enterpriseSaveModal.renameSupertab":"Rename CN","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. CN","enterpriseSaveModal.closeTab":"Close Tab CN","enterpriseSaveModal.closeSupertab":"Close Supertab CN","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. CN","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? CN","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. CN","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved CN","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. CN","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted CN","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. CN","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab CN","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab CN","enterpriseCommandBar.switchToSupertab":"Switch to Supertab CN","enterpriseCommandBar.goTo":"Go to {{type}} CN","enterpriseCommandBar.viewMore":"View More CN","sidePanel.aiCenter":"AI Center CN","sidePanel.newChat":"New Chat CN","sidePanel.toggleSidePanel":"Toggle Side Panel CN","sidePanel.closeSidePanel":"Close Side Panel CN","sidePanel.openAiCenter":"Open AI Center CN","contextMenu.quitEnterpriseBrowser":"Quit CN","dock.removeFavorite":"Remove CN"}'),Rn=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload ZH","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate ZH","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab ZH","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value ZH","saveModal.alreadyExists":"{{title}} ","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":" ({{count}}) ","defaultPageTitle":"Untitled Page ZH","enterpriseDefaultPageTitle":"Untitled Supertab ZH","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":" {{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":" {{workspace}} ","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":" {{workspace}} ","closePlatform.warning":"APP ","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":" OS ","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":" {{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. ZH","successIndicator.pageCopySaved":" {{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}} ","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}} ","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete ZH","appResults.header":"Featured Content ZH","recentlyClosed.header":"Recently Closed ZH","landingPage.subheader":"Apps and websites selected by an admin will show here ZH","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}} ","aria.closePage":" {{title}} ","aria.closeTab":" {{title}}","aria.title":"","aria.closeContextGroup":" Esc ","aria.colorLinking":"","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":" {{name}} ","aria.assignColorLinkingCurrentViews":" {{name}} ","aria.setColorLinkingActiveView":" {{name}} ","aria.setColorLinkingActiveViews":" {{name}} ","aria.escapeLayoutDialog":" Esc ","global.supertab":"Supertab ZH","global.tab":"Tab ZH","bookmarks.editBookmark":"Edit Bookmark ZH","bookmarks.bookmarkAdded":"Bookmark added ZH","bookmarks.done":"Done ZH","bookmarks.remove":"Remove ZH","bookmarks.bookmarksPanel":"Bookmarks Panel ZH","bookmarks.bookmarks":"Bookmarks ZH","bookmarks.allBookmarks":"All Bookmarks ZH","bookmarks.favorites":"Favorites ZH","bookmarks.searchBookmarks":"Search Bookmarks ZH","bookmarks.clearSearchInput":"Clear Search Input ZH","bookmarks.createFolder":"Create New Folder ZH","bookmarks.exitFolder":"Exit Folder ZH","bookmarks.newFolder":"New Folder ZH","bookmarks.namedFolder":"{{name}} Folder ZH","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings ZH","bookmarks.folderSettings":"{{name}} Folder Settings ZH","bookmarks.noResultsFound":"No results found ZH","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search ZH","bookmarks.nothingToShow":"Nothing to show yet ZH","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder ZH","bookmarks.resultsFoundIn":"Results found in {{name}} ZH","bookmarks.resultsInOtherFolders":"Results found in other folders ZH","bookmarks.allResultsFoundIn":"All results found in ZH","bookmarks.editName":"Edit Name ZH","bookmarks.move":"Move ZH","bookmarks.bookmarkAddedTitle":"Bookmark Added ZH","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" ZH","bookmarks.bookmarkEditedTitle":"Bookmark Edited ZH","enterpriseContextMenu.saveSupertab":"Save Supertab ZH","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... ZH","enterpriseContextMenu.duplicate":"Duplicate ZH","enterpriseContextMenu.deleteSupertab":"Delete Supertab ZH","enterpriseContextMenu.newTab":"New Tab ZH","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As ZH","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? ZH","saveSupertabCount_other":"Save {{count}} Supertabs before closing? ZH"},"enterpriseSaveModal.renameSupertab":"Rename ZH","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. ZH","enterpriseSaveModal.closeTab":"Close Tab ZH","enterpriseSaveModal.closeSupertab":"Close Supertab ZH","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. ZH","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? ZH","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. ZH","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved ZH","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. ZH","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted ZH","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. ZH","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab ZH","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab ZH","enterpriseCommandBar.switchToSupertab":"Switch to Supertab ZH","enterpriseCommandBar.goTo":"Go to {{type}} ZH","enterpriseCommandBar.viewMore":"View More ZH","sidePanel.aiCenter":"AI Center ZH","sidePanel.newChat":"New Chat ZH","sidePanel.toggleSidePanel":"Toggle Side Panel ZH","sidePanel.closeSidePanel":"Close Side Panel ZH","sidePanel.openAiCenter":"Open AI Center ZH","contextMenu.quitEnterpriseBrowser":"Quit ZH","dock.removeFavorite":"Remove ZH"}'),En=JSON.parse('{"contextMenu.newWindow":"New Window","contextMenu.newPage":"New Page","contextMenu.restore":"Restore to Last Saved Changes","contextMenu.switchWorkspace":"Switch Workspace","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"Appearance","contextMenu.saveWorkspace":"Save Workspace","contextMenu.saveWorkspaceAs":"Save Workspace As...","contextMenu.renameWorkspace":"Rename Workspace","contextMenu.deleteWorkspace":"Delete Workspace","contextMenu.downloads":"Downloads","contextMenu.savePage":"Save Page","contextMenu.savePageAs":"Save Page As...","contextMenu.print":"Print...","contextMenu.printScreen":"Print Screen","contextMenu.closeWindow":"Close Window","contextMenu.openStorefront":"Open Storefront","contextMenu.quitPlatform":"Quit {{platformLabel}}","contextMenu.newView":"New View","contextMenu.openView":"Open View with Default Web Browser","contextMenu.openViews":"Open Views with Default Web Browser","contextMenu.reload":"Reload","contextMenu.reloadView":"Reload View","contextMenu.reloadViews":"Reload Views","contextMenu.duplicate":"Duplicate","contextMenu.duplicateView":"Duplicate View","contextMenu.duplicateViews":"Duplicate Views","contextMenu.addView":"Add View to Channel","contextMenu.addViews":"Add Views to Channel","contextMenu.removeView":"Remove View from Channel","contextMenu.removeViews":"Remove Views from Channel","contextMenu.closeView":"Close View","contextMenu.closeViews":"Close Views","contextMenu.closeTab":"Close Tab","contextMenu.duplicatePage":"Duplicate Page","contextMenu.submenu.print":"Print","contextMenu.submenu.printAll":"Print All","saveMenu.saveWorkspaceAs":"Save Workspace As","saveMenu.savePageAs":"Save Page As","saveModal.enterValue":"Please enter a value","saveModal.alreadyExists":"{{title}} already exists.","saveModal.pleaseEnterValidName":"Please enter a valid name","saveModal.renamePage":"Rename Page","saveModal.closePage":"Close Page","saveModal.discardChanges":"Discard Changes","saveModal.discardAll":"Discard All","saveModal.saveAll":"Save All","saveModal.savePagesCount":"Save ({{count}}) pages before closing?","defaultPageTitle":"Untitled Page","enterpriseDefaultPageTitle":"Untitled Supertab","addNewPage":"New Page","addNewTab":"Add New Tab","addNewView":"New View","restoreModal":"Are you sure you want to restore to last saved changes?","modal.discardWarning":"Any unsaved changes will be discarded","modal.discardPageWarning":"Any unsaved changes to this page will be lost.","modal.saveChangesPrompt":"Save changes before closing?","modal.pageClose":"Page Close","switchWorkspaceModal":"Are you sure you want to switch to {{workspace}}?","switchWorkspaceModal.warning":"Any unsaved changes will be discarded","deleteWorkspaceModal":"Are you sure you want to permanently delete this workspace?","replaceWorkspaceModal.warning":"A Workspace with the name {{workspace}} already exists. Do you want to replace it?","replaceWorkspaceModal.warning.body":"A workspace with the same name already exists. Replacing it will overwrite its current contents.","replaceWorkspaceModal.replace":"Replace","closePlatform":"Close the platform","closePlatform.workspace":"Close the {{workspace}} Platform","closePlatform.warning":"Closing a platform will close any workspaces, apps or any processes that are running.","back":"Back","forward":"Forward","reload":"Reload","green":"Green","purple":"Purple","orange":"Orange","red":"Red","pink":"Pink","yellow":"Yellow","theme.light":"Light","theme.dark":"Dark","theme.system":"Sync with OS setting","toolbar.hideTabs":"Hide Tabs","toolbar.showTabs":"Show Tabs","toolbar.lock":"Lock","toolbar.unlock":"Unlock","toolbar.colorLinking":"Color Linking","toolbar.changeLayout":"Change Layout","toolbar.saveMenu":"Save Menu","toolbar.maximizeWindow":"Maximize Window","toolbar.restoreWindow":"Restore Window","toolbar.minimizeWindow":"Minimize Window","changeLayout.fullWidth":"Full Width","changeLayout.columns":"Columns","changeLayout.Rows":"Rows","changeLayout.Grid":"Grid","successIndicator.workspaceSwitched":"Workspace Switched","successIndicator.hidden":"Tabs are Hidden","successIndicator.shown":"Tabs are Shown","successIndicator.locked":"Page is Locked","successIndicator.unlocked":"Page is Unlocked","successIndicator.workspaceSaved":"Workspace saved","successIndicator.workspaceSavedAs":"Workspace saved as {{workspace}}","successIndicator.workspaceRenamed":"Workspace renamed","successIndicator.pageSaved":"Page Saved","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved.","successIndicator.pageCopySaved":"Page saved as {{title}}","successIndicator.pageRenamed":"Page renamed","successIndicator.contextGroupApplied":"Context group applied","successIndicator.namedContextGroupApplied":"{{colorName}} context group applied","successIndicator.viewRemoved":"View removed from context group","successIndicator.viewsRemoved":"Views removed from context group","successIndicator.layoutApplied":"{{layoutName}} layout applied","successIndicator.workspaceDeleted":"Workspace deleted","errorIndicator.pageSaveFailed":"Page failed to save","errorIndicator.workspaceSaveFailed":"Workspace failed to save","errorIndicator.failedToDuplicatePage":"Failed to duplicate Page","infoIndicator.colorLinkAttempt":"We attempted to color link this tab, but the site/content owner has not enabled it yet","global.cancel":"Cancel","global.confirm":"Confirm","global.save":"Save","global.delete":"Delete","appResults.header":"Featured Content","recentlyClosed.header":"Recently Closed","landingPage.subheader":"Apps and websites selected by an admin will show here","aria.openBrowser":"Open Browser Menu","aria.browserTabs":"Browser Tabs","aria.viewTab":"View Tab for {{title}}","aria.closePage":"Close Page Tab Button for {{title}}","aria.closeTab":"Close Tab {{title}}","aria.title":"Title","aria.closeContextGroup":"Use escape to close context group selection dialog","aria.colorLinking":"Show or hide color linking","aria.applyColorLinking":"Please select a view to apply color linking","aria.assignColorLinkingCurrentView":"Current view assigned to {{name}} context group","aria.assignColorLinkingCurrentViews":"Current views assigned to {{name}} context group","aria.setColorLinkingActiveView":"Set active view to {{name}} context group","aria.setColorLinkingActiveViews":"Set active views to {{name}} context group","aria.escapeLayoutDialog":"Use escape to close change layout dialog","global.supertab":"Supertab","global.tab":"Tab","bookmarks.editBookmark":"Edit Bookmark","bookmarks.bookmarkAdded":"Bookmark added","bookmarks.done":"Done","bookmarks.remove":"Remove","bookmarks.bookmarksPanel":"Bookmarks Panel","bookmarks.bookmarks":"Bookmarks","bookmarks.allBookmarks":"All Bookmarks","bookmarks.favorites":"Favorites","bookmarks.searchBookmarks":"Search Bookmarks","bookmarks.clearSearchInput":"Clear Search Input","bookmarks.createFolder":"Create New Folder","bookmarks.exitFolder":"Exit Folder","bookmarks.newFolder":"New Folder","bookmarks.namedFolder":"{{name}} Folder","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings","bookmarks.folderSettings":"{{name}} Folder Settings","bookmarks.noResultsFound":"No results found","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search","bookmarks.nothingToShow":"Nothing to show yet","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder","bookmarks.resultsFoundIn":"Results found in {{name}}","bookmarks.resultsInOtherFolders":"Results found in other folders","bookmarks.allResultsFoundIn":"All results found in","bookmarks.editName":"Edit Name","bookmarks.move":"Move","bookmarks.bookmarkAddedTitle":"Bookmark Added","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\"","bookmarks.bookmarkEditedTitle":"Bookmark Edited","enterpriseContextMenu.saveSupertab":"Save Supertab","enterpriseContextMenu.saveSupertabAs":"Save Supertab As...","enterpriseContextMenu.duplicate":"Duplicate","enterpriseContextMenu.deleteSupertab":"Delete Supertab","enterpriseContextMenu.newTab":"New Tab","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing?","saveSupertabCount_other":"Save {{count}} Supertabs before closing?"},"enterpriseSaveModal.renameSupertab":"Rename","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab.","enterpriseSaveModal.closeTab":"Close Tab","enterpriseSaveModal.closeSupertab":"Close Supertab","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost.","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab?","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent.","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted.","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab","enterpriseCommandBar.switchToSupertab":"Switch to Supertab","enterpriseCommandBar.goTo":"Go to {{type}}","enterpriseCommandBar.viewMore":"View More","sidePanel.aiCenter":"AI Center","sidePanel.newChat":"New Chat","sidePanel.toggleSidePanel":"Toggle Side Panel","sidePanel.closeSidePanel":"Close Side Panel","sidePanel.openAiCenter":"Open AI Center","contextMenu.quitEnterpriseBrowser":"Quit","dock.removeFavorite":"Remove","dock.workspaceManagement":{"restoreSuccess":"Last Saved Changes Restored"}}'),Fn=JSON.parse('{"contextMenu.newWindow":"Neues Fenster","contextMenu.newPage":"Neue Seite","contextMenu.restore":"Wiederherstellen der zuletzt gespeicherten nderungen","contextMenu.switchWorkspace":"Workspace wechseln","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"Erscheinungsbild","contextMenu.saveWorkspace":"Workspace speichern","contextMenu.saveWorkspaceAs":"Workspace speichern unter...","contextMenu.renameWorkspace":"Workspace umbenennen","contextMenu.deleteWorkspace":"Workspace lschen","contextMenu.downloads":"Downloads","contextMenu.savePage":"Seite speichern","contextMenu.savePageAs":"Seite speichern unter...","contextMenu.print":"Drucken...","contextMenu.printScreen":"Bildschirmansicht drucken","contextMenu.closeWindow":"Fenster schlieen","contextMenu.openStorefront":"Schaufenster ffnen","contextMenu.quitPlatform":"Plattform verlassen","contextMenu.newView":"Neue Ansicht","contextMenu.openView":"Ansicht mit Standard-Webbrowser ffnen","contextMenu.openViews":"Ansichten mit Standard-Webbrowser ffnen","contextMenu.reload":"Reload DE","contextMenu.reloadView":"Ansicht neu laden","contextMenu.reloadViews":"Ansichten neu laden","contextMenu.duplicate":"Duplicate DE","contextMenu.duplicateView":"Ansicht duplizieren","contextMenu.duplicateViews":"Ansichten duplizieren","contextMenu.addView":"Ansicht zum Channel hinzufgen","contextMenu.addViews":"Ansichten zum Channel hinzufgen","contextMenu.removeView":"Ansicht aus dem Channel entfernen","contextMenu.removeViews":"Ansichten aus dem Channel entfernen","contextMenu.closeView":"Ansicht schlieen","contextMenu.closeViews":"Ansichten schlieen","contextMenu.closeTab":"Close Tab DE","contextMenu.duplicatePage":"Seite duplizieren","contextMenu.submenu.print":"Drucken","contextMenu.submenu.printAll":"Alle drucken","saveMenu.saveWorkspaceAs":"Workspace speichern unter","saveMenu.savePageAs":"Seite speichern unter","saveModal.enterValue":"Please enter a value DE","saveModal.alreadyExists":"{{title}} existiert bereits.","saveModal.pleaseEnterValidName":"Bitte geben Sie einen gltigen Namen ein","saveModal.renamePage":"Seite umbenennen","saveModal.closePage":"Seite schlieen","saveModal.discardChanges":"nderungen verwerfen","saveModal.discardAll":"Alle verwerfen","saveModal.saveAll":"Alle speichern","saveModal.savePagesCount":"({{count}}) Seiten vor dem Schlieen speichern?","defaultPageTitle":"Untitled Page DE","enterpriseDefaultPageTitle":"Untitled Supertab DE","addNewPage":"Neue Seite hinzufgen","addNewTab":"Neuen Tab hinzufgen","addNewView":"Neue Ansicht","restoreModal":"Sind Sie sicher, dass Sie die zuletzt gespeicherten nderungen wiederherstellen wollen?","modal.discardWarning":"Alle nicht gespeicherten nderungen werden verworfen","modal.discardPageWarning":"Alle nicht gespeicherten nderungen auf dieser Seite gehen verloren.","modal.saveChangesPrompt":"nderungen vor dem Schlieen speichern?","modal.pageClose":"Seite schlieen","switchWorkspaceModal":"Sind Sie sicher, dass Sie zu {{workspace}}wechseln wollen?","switchWorkspaceModal.warning":"Alle nicht gespeicherten nderungen werden verworfen","deleteWorkspaceModal":"Sind Sie sicher, dass Sie diesen Workspace dauerhaft lschen wollen?","replaceWorkspaceModal.warning":"Ein Workspace mit dem Namen {{workspace}} existiert bereits. Mchten Sie ihn ersetzen?","replaceWorkspaceModal.warning.body":"Ein Workspace mit demselben Namen existiert bereits. Wenn Sie ihn ersetzen, wird der aktuelle Inhalt berschrieben.","replaceWorkspaceModal.replace":"Ersetzen","closePlatform":"Plattform schlieen","closePlatform.workspace":"Die {{workspace}} Plattform schlieen","closePlatform.warning":"Wenn Sie eine Plattform schlieen, werden alle Workspaces, Apps und laufenden Prozesse beendet.","back":"Zurck","forward":"Weiter","reload":"Neu laden","green":"Grn","purple":"Lila","orange":"Orange","red":"Rot","pink":"Pink","yellow":"Gelb","theme.light":"Hell","theme.dark":"Dunkel","theme.system":"Synchronisierung mit OS-Einstellung","toolbar.hideTabs":"Tabs ausblenden","toolbar.showTabs":"Tabs anzeigen","toolbar.lock":"Sperren","toolbar.unlock":"Freischalten","toolbar.colorLinking":"Farbverknpfung","toolbar.changeLayout":"Layout ndern","toolbar.saveMenu":"Men speichern","toolbar.maximizeWindow":"Fenster maximieren","toolbar.restoreWindow":"Fenster wiederherstellen","toolbar.minimizeWindow":"Fenster minimieren","changeLayout.fullWidth":"Volle Breite","changeLayout.columns":"Spalten","changeLayout.Rows":"Zeilen","changeLayout.Grid":"Raster","successIndicator.workspaceSwitched":"Workspace gewechselt","successIndicator.hidden":"Tabs sind ausgeblendet","successIndicator.shown":"Tabs werden angezeigt","successIndicator.locked":"Seite ist gesperrt","successIndicator.unlocked":"Seite ist freigeschaltet","successIndicator.workspaceSaved":"Workspace gespeichert","successIndicator.workspaceSavedAs":"Workspace gespeichert als {{workspace}}","successIndicator.workspaceRenamed":"Workspace umbenannt","successIndicator.pageSaved":"Seite gespeichert","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. DE","successIndicator.pageCopySaved":"Seite gespeichert als {{title}}","successIndicator.pageRenamed":"Seite umbenannt","successIndicator.contextGroupApplied":"Angewandte Kontextgruppe","successIndicator.namedContextGroupApplied":"{{colorName}} angewandte Kontextgruppe","successIndicator.viewRemoved":"Ansicht aus der Kontextgruppe entfernt","successIndicator.viewsRemoved":"Ansichten aus der Kontextgruppe entfernt","successIndicator.layoutApplied":"{{layoutName}} angewandtes Layout","successIndicator.workspaceDeleted":"Workspace gelscht","errorIndicator.pageSaveFailed":"Seite konnte nicht gespeichert werden","errorIndicator.workspaceSaveFailed":"Workspace konnte nicht gespeichert werden","errorIndicator.failedToDuplicatePage":"Seite kann nicht dupliziert werden","infoIndicator.colorLinkAttempt":"Wir haben versucht, diesem Tab eine Farbe zuordnen, aber der Eigentmer der Website/des Inhalts hat sie noch nicht aktiviert","global.cancel":"Abbrechen","global.confirm":"Besttigen","global.save":"Speichern","global.delete":"Delete DE","appResults.header":"Featured Content DC","recentlyClosed.header":"Recently Closed DC","landingPage.subheader":"Apps and websites selected by an admin will show here DE","aria.openBrowser":"Browser-Men ffnen","aria.browserTabs":"Browser-Tab","aria.viewTab":"Tab Ansicht fr {{title}}","aria.closePage":"Button Seite schlieen fr {{title}}","aria.closeTab":"Tab schlieen {{title}}","aria.title":"Bezeichnung","aria.closeContextGroup":"Verwenden Sie die Escape-Taste, um den Dialog zur Auswahl von Kontextgruppen zu schlieen","aria.colorLinking":"Farbverknpfung ein- oder ausblenden","aria.applyColorLinking":"Bitte whlen Sie eine Ansicht, um die Farbverknpfung anzuwenden","aria.assignColorLinkingCurrentView":"Aktuelle Ansicht, die der Kontextgruppe {{name}} zugeordnet ist","aria.assignColorLinkingCurrentViews":"Aktuelle Ansichten, die der Kontextgruppe {{name}} zugeordnet sind","aria.setColorLinkingActiveView":"Aktive Ansicht auf die Kontextgruppe {{name}} setzen","aria.setColorLinkingActiveViews":"Aktive Ansichten auf die Kontextgruppe {{name}} setzen","aria.escapeLayoutDialog":"Verwenden Sie die Escape-Taste, um den Dialog zur Layoutnderung zu schlieen","global.supertab":"Supertab DE","global.tab":"Tab DE","bookmarks.editBookmark":"Edit Bookmark DE","bookmarks.bookmarkAdded":"Bookmark added DE","bookmarks.done":"Done DE","bookmarks.remove":"Remove DE","bookmarks.bookmarksPanel":"Bookmarks Panel DE","bookmarks.bookmarks":"Bookmarks DE","bookmarks.allBookmarks":"All Bookmarks DE","bookmarks.favorites":"Favorites DE","bookmarks.searchBookmarks":"Search Bookmarks DE","bookmarks.clearSearchInput":"Clear Search Input DE","bookmarks.createFolder":"Create New Folder DE","bookmarks.exitFolder":"Exit Folder DE","bookmarks.newFolder":"New Folder DE","bookmarks.namedFolder":"{{name}} Folder DE","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings DE","bookmarks.folderSettings":"{{name}} Folder Settings DE","bookmarks.noResultsFound":"No results found DE","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search DE","bookmarks.nothingToShow":"Nothing to show yet DE","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder DE","bookmarks.resultsFoundIn":"Results found in {{name}} DE","bookmarks.resultsInOtherFolders":"Results found in other folders DE","bookmarks.allResultsFoundIn":"All results found in DE","bookmarks.editName":"Edit Name DE","bookmarks.move":"Move DE","bookmarks.bookmarkAddedTitle":"Bookmark Added DE","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" DE","bookmarks.bookmarkEditedTitle":"Bookmark Edited DE","enterpriseContextMenu.saveSupertab":"Save Supertab DE","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... DE","enterpriseContextMenu.duplicate":"Duplicate DE","enterpriseContextMenu.deleteSupertab":"Delete Supertab DE","enterpriseContextMenu.newTab":"New Tab DE","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As DE","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? DE","saveSupertabCount_other":"Save {{count}} Supertabs before closing? DE"},"enterpriseSaveModal.renameSupertab":"Rename DE","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. DE","enterpriseSaveModal.closeTab":"Close Tab DE","enterpriseSaveModal.closeSupertab":"Close Supertab DE","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. DE","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? DE","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. DE","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved DE","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. DE","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted DE","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. DE","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab DE","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab DE","enterpriseCommandBar.switchToSupertab":"Switch to Supertab DE","enterpriseCommandBar.goTo":"Go to {{type}} DE","enterpriseCommandBar.viewMore":"View More DE","sidePanel.aiCenter":"AI Center DE","sidePanel.newChat":"New Chat DE","sidePanel.toggleSidePanel":"Toggle Side Panel DE","sidePanel.closeSidePanel":"Close Side Panel DE","sidePanel.openAiCenter":"Open AI Center DE","contextMenu.quitEnterpriseBrowser":"Quit DE","dock.removeFavorite":"Remove DE"}'),Vn=JSON.parse('{"contextMenu.newWindow":"","contextMenu.newPage":"","contextMenu.restore":"","contextMenu.switchWorkspace":"","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"","contextMenu.saveWorkspace":"","contextMenu.saveWorkspaceAs":"...","contextMenu.renameWorkspace":"","contextMenu.deleteWorkspace":"","contextMenu.downloads":"","contextMenu.savePage":"","contextMenu.savePageAs":"...","contextMenu.print":"...","contextMenu.printScreen":"","contextMenu.closeWindow":"","contextMenu.openStorefront":"","contextMenu.quitPlatform":"","contextMenu.newView":"","contextMenu.openView":"","contextMenu.openViews":"","contextMenu.reload":"Reload JP","contextMenu.reloadView":"","contextMenu.reloadViews":"","contextMenu.duplicate":"Duplicate JP","contextMenu.duplicateView":"","contextMenu.duplicateViews":"","contextMenu.addView":"","contextMenu.addViews":"","contextMenu.removeView":"","contextMenu.removeViews":"","contextMenu.closeView":"","contextMenu.closeViews":"","contextMenu.closeTab":"Close Tab JP","contextMenu.duplicatePage":"","contextMenu.submenu.print":"","contextMenu.submenu.printAll":"","saveMenu.saveWorkspaceAs":"","saveMenu.savePageAs":"","saveModal.enterValue":"Please enter a value JP","saveModal.alreadyExists":"{{title}}","saveModal.pleaseEnterValidName":"","saveModal.renamePage":"","saveModal.closePage":"","saveModal.discardChanges":"","saveModal.discardAll":"","saveModal.saveAll":"","saveModal.savePagesCount":"{{count}}","defaultPageTitle":"Untitled Page JP","enterpriseDefaultPageTitle":"Untitled Supertab JP","addNewPage":"","addNewTab":"","addNewView":"","restoreModal":"","modal.discardWarning":"","modal.discardPageWarning":"","modal.saveChangesPrompt":"","modal.pageClose":"","switchWorkspaceModal":"{{workspace}}","switchWorkspaceModal.warning":"","deleteWorkspaceModal":"","replaceWorkspaceModal.warning":"{{workspace}}","replaceWorkspaceModal.warning.body":"","replaceWorkspaceModal.replace":"","closePlatform":"","closePlatform.workspace":"{{workspace}}","closePlatform.warning":"","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS","toolbar.hideTabs":"","toolbar.showTabs":"","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"","toolbar.changeLayout":"","toolbar.saveMenu":"","toolbar.maximizeWindow":"","toolbar.restoreWindow":"","toolbar.minimizeWindow":"","changeLayout.fullWidth":"","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"","successIndicator.hidden":"","successIndicator.shown":"","successIndicator.locked":"","successIndicator.unlocked":"","successIndicator.workspaceSaved":"","successIndicator.workspaceSavedAs":"{{workspace}}","successIndicator.workspaceRenamed":"","successIndicator.pageSaved":"","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. JP","successIndicator.pageCopySaved":"{{title}}","successIndicator.pageRenamed":"","successIndicator.contextGroupApplied":"","successIndicator.namedContextGroupApplied":"{{colorName}}","successIndicator.viewRemoved":"","successIndicator.viewsRemoved":"","successIndicator.layoutApplied":"{{layoutName}}","successIndicator.workspaceDeleted":"","errorIndicator.pageSaveFailed":"","errorIndicator.workspaceSaveFailed":"","errorIndicator.failedToDuplicatePage":"","infoIndicator.colorLinkAttempt":"/","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete JP","appResults.header":"Featured content JP","recentlyClosed.header":"Recently Closed JP","landingPage.subheader":"Apps and websites selected by an admin will show here JP","aria.openBrowser":"","aria.browserTabs":"","aria.viewTab":"{{title}}","aria.closePage":"{{title}}","aria.closeTab":"{{title}}","aria.title":"","aria.closeContextGroup":"","aria.colorLinking":"/","aria.applyColorLinking":"","aria.assignColorLinkingCurrentView":"{{name}}","aria.assignColorLinkingCurrentViews":"{{name}}","aria.setColorLinkingActiveView":"{{name}}","aria.setColorLinkingActiveViews":"{{name}}","aria.escapeLayoutDialog":"","global.supertab":"Supertab JP","global.tab":"Tab JP","bookmarks.editBookmark":"Edit Bookmark JP","bookmarks.bookmarkAdded":"Bookmark added JP","bookmarks.done":"Done JP","bookmarks.remove":"Remove JP","bookmarks.bookmarksPanel":"Bookmarks Panel JP","bookmarks.bookmarks":"Bookmarks JP","bookmarks.allBookmarks":"All Bookmarks JP","bookmarks.favorites":"Favorites JP","bookmarks.searchBookmarks":"Search Bookmarks JP","bookmarks.clearSearchInput":"Clear Search Input JP","bookmarks.createFolder":"Create New Folder JP","bookmarks.exitFolder":"Exit Folder JP","bookmarks.newFolder":"New Folder JP","bookmarks.namedFolder":"{{name}} Folder JP","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings JP","bookmarks.folderSettings":"{{name}} Folder Settings JP","bookmarks.noResultsFound":"No results found JP","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search JP","bookmarks.nothingToShow":"Nothing to show yet JP","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder JP","bookmarks.resultsFoundIn":"Results found in {{name}} JP","bookmarks.resultsInOtherFolders":"Results found in other folders JP","bookmarks.allResultsFoundIn":"All results found in JP","bookmarks.editName":"Edit Name JP","bookmarks.move":"Move JP","bookmarks.bookmarkAddedTitle":"Bookmark Added JP","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" JP","bookmarks.bookmarkEditedTitle":"Bookmark Edited JP","enterpriseContextMenu.saveSupertab":"Save Supertab JP","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... JP","enterpriseContextMenu.duplicate":"Duplicate JP","enterpriseContextMenu.deleteSupertab":"Delete Supertab JP","enterpriseContextMenu.newTab":"New Tab JP","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As JP","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? JP","saveSupertabCount_other":"Save {{count}} Supertabs before closing? JP"},"enterpriseSaveModal.renameSupertab":"Rename JP","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. JP","enterpriseSaveModal.closeTab":"Close Tab JP","enterpriseSaveModal.closeSupertab":"Close Supertab JP","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. JP","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? JP","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. JP","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved JP","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. JP","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted JP","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. JP","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab JP","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab JP","enterpriseCommandBar.switchToSupertab":"Switch to Supertab JP","enterpriseCommandBar.goTo":"Go to {{type}} JP","enterpriseCommandBar.viewMore":"View More JP","sidePanel.aiCenter":"AI Center JP","sidePanel.newChat":"New Chat JP","sidePanel.toggleSidePanel":"Toggle Side Panel JP","sidePanel.closeSidePanel":"Close Side Panel JP","sidePanel.openAiCenter":"Open AI Center JP","contextMenu.quitEnterpriseBrowser":"Quit JP","dock.removeFavorite":"Remove JP"}'),Nn=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"    ","contextMenu.switchWorkspace":"  ","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":"","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"    ...","contextMenu.renameWorkspace":"   ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"   ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" ","contextMenu.quitPlatform":" ","contextMenu.newView":" ","contextMenu.openView":"    ","contextMenu.openViews":"    ","contextMenu.reload":"Reload KR","contextMenu.reloadView":"  ","contextMenu.reloadViews":"  ","contextMenu.duplicate":"Duplicate KR","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"  ","contextMenu.addViews":"  ","contextMenu.removeView":"  ","contextMenu.removeViews":"  ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab KR","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"    ","saveMenu.savePageAs":"   ","saveModal.enterValue":"Please enter a value KR","saveModal.alreadyExists":"{{title}}()  .","saveModal.pleaseEnterValidName":"  .","saveModal.renamePage":"  ","saveModal.closePage":" ","saveModal.discardChanges":"  ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":"  ({{count}}) ?","defaultPageTitle":"Untitled Page KR","enterpriseDefaultPageTitle":"Untitled Supertab KR","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":"    ?","modal.discardWarning":"     ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"    ?","modal.pageClose":" ","switchWorkspaceModal":"{{workspace}}() ?","switchWorkspaceModal.warning":"     ","deleteWorkspaceModal":"    ?","replaceWorkspaceModal.warning":"{{workspace}}()     . ?","replaceWorkspaceModal.warning.body":"     .     .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"{{workspace}}  ","closePlatform.warning":"      ,    .","back":" ","forward":" ","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"OS  ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":" ","toolbar.colorLinking":" ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":"  ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"  {{workspace}}() ","successIndicator.workspaceRenamed":"   ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. KR","successIndicator.pageCopySaved":" {{title}}() ","successIndicator.pageRenamed":"  ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"{{colorName}}   ","successIndicator.viewRemoved":"   ","successIndicator.viewsRemoved":"   ","successIndicator.layoutApplied":"{{layoutName}}  ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"  ","errorIndicator.workspaceSaveFailed":"   ","errorIndicator.failedToDuplicatePage":"  ","infoIndicator.colorLinkAttempt":"     /    .","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete KR","appResults.header":"Featured Content KR","recentlyClosed.header":"Recently Closed KR","landingPage.subheader":"Apps and websites selected by an admin will show here KR","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"{{title}}  ","aria.closePage":"{{title}}   ","aria.closeTab":" {{title}} ","aria.title":"","aria.closeContextGroup":"      ","aria.colorLinking":"    ","aria.applyColorLinking":"    .","aria.assignColorLinkingCurrentView":"{{name}}     ","aria.assignColorLinkingCurrentViews":"{{name}}     ","aria.setColorLinkingActiveView":"  {{name}}   ","aria.setColorLinkingActiveViews":"  {{name}}   ","aria.escapeLayoutDialog":"     ","global.supertab":"Supertab KR","global.tab":"Tab KR","bookmarks.editBookmark":"Edit Bookmark KR","bookmarks.bookmarkAdded":"Bookmark added KR","bookmarks.done":"Done KR","bookmarks.remove":"Remove KR","bookmarks.bookmarksPanel":"Bookmarks Panel KR","bookmarks.bookmarks":"Bookmarks KR","bookmarks.allBookmarks":"All Bookmarks KR","bookmarks.favorites":"Favorites KR","bookmarks.searchBookmarks":"Search Bookmarks KR","bookmarks.clearSearchInput":"Clear Search Input KR","bookmarks.createFolder":"Create New Folder KR","bookmarks.exitFolder":"Exit Folder KR","bookmarks.newFolder":"New Folder KR","bookmarks.namedFolder":"{{name}} Folder KR","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings KR","bookmarks.folderSettings":"{{name}} Folder Settings KR","bookmarks.noResultsFound":"No results found KR","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search KR","bookmarks.nothingToShow":"Nothing to show yet KR","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder KR","bookmarks.resultsFoundIn":"Results found in {{name}} KR","bookmarks.resultsInOtherFolders":"Results found in other folders KR","bookmarks.allResultsFoundIn":"All results found in KR","bookmarks.editName":"Edit Name KR","bookmarks.move":"Move KR","bookmarks.bookmarkAddedTitle":"Bookmark Added KR","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" KR","bookmarks.bookmarkEditedTitle":"Bookmark Edited KR","enterpriseContextMenu.saveSupertab":"Save Supertab KR","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... KR","enterpriseContextMenu.duplicate":"Duplicate KR","enterpriseContextMenu.deleteSupertab":"Delete Supertab KR","enterpriseContextMenu.newTab":"New Tab KR","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As KR","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? KR","saveSupertabCount_other":"Save {{count}} Supertabs before closing? KR"},"enterpriseSaveModal.renameSupertab":"Rename KR","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. KR","enterpriseSaveModal.closeTab":"Close Tab KR","enterpriseSaveModal.closeSupertab":"Close Supertab KR","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. KR","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? KR","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. KR","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved KR","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. KR","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted KR","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. KR","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab KR","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab KR","enterpriseCommandBar.switchToSupertab":"Switch to Supertab KR","enterpriseCommandBar.goTo":"Go to {{type}} KR","enterpriseCommandBar.viewMore":"View More KR","sidePanel.aiCenter":"AI Center KR","sidePanel.newChat":"New Chat KR","sidePanel.toggleSidePanel":"Toggle Side Panel KR","sidePanel.closeSidePanel":"Close Side Panel KR","sidePanel.openAiCenter":"Open AI Center KR","contextMenu.quitEnterpriseBrowser":"Quit KR","dock.removeFavorite":"Remove KR"}'),Ln=JSON.parse('{"contextMenu.newWindow":" ","contextMenu.newPage":" ","contextMenu.restore":"   ","contextMenu.switchWorkspace":"  ","contextMenu.manageDesktopSignals":"Manage Desktop Signals","contextMenu.appearance":" ","contextMenu.saveWorkspace":"  ","contextMenu.saveWorkspaceAs":"   ...","contextMenu.renameWorkspace":"  ","contextMenu.deleteWorkspace":"  ","contextMenu.downloads":"","contextMenu.savePage":" ","contextMenu.savePageAs":"  ...","contextMenu.print":"...","contextMenu.printScreen":" ","contextMenu.closeWindow":" ","contextMenu.openStorefront":" Storefront","contextMenu.quitPlatform":"  ","contextMenu.newView":" ","contextMenu.openView":"    -  ","contextMenu.openViews":"    -  ","contextMenu.reload":"Reload RU","contextMenu.reloadView":" ","contextMenu.reloadViews":" ","contextMenu.duplicate":"Duplicate RU","contextMenu.duplicateView":" ","contextMenu.duplicateViews":" ","contextMenu.addView":"   ","contextMenu.addViews":"   ","contextMenu.removeView":"   ","contextMenu.removeViews":"   ","contextMenu.closeView":" ","contextMenu.closeViews":" ","contextMenu.closeTab":"Close Tab RU","contextMenu.duplicatePage":" ","contextMenu.submenu.print":"","contextMenu.submenu.printAll":" ","saveMenu.saveWorkspaceAs":"   ","saveMenu.savePageAs":"  ","saveModal.enterValue":"Please enter a value RU","saveModal.alreadyExists":"{{title}}  .","saveModal.pleaseEnterValidName":"  ","saveModal.renamePage":" ","saveModal.closePage":" ","saveModal.discardChanges":" ","saveModal.discardAll":" ","saveModal.saveAll":" ","saveModal.savePagesCount":" ({{count}})   ?","defaultPageTitle":"Untitled Page RU","enterpriseDefaultPageTitle":"Untitled Supertab RU","addNewPage":"  ","addNewTab":"  ","addNewView":" ","restoreModal":" ,      ?","modal.discardWarning":"    ","modal.discardPageWarning":"       .","modal.saveChangesPrompt":"   ?","modal.pageClose":" ","switchWorkspaceModal":" ,     {{workspace}}?","switchWorkspaceModal.warning":"    ","deleteWorkspaceModal":" ,       ?","replaceWorkspaceModal.warning":"    {{workspace}}  .    ?","replaceWorkspaceModal.warning.body":"       .       .","replaceWorkspaceModal.replace":"","closePlatform":" ","closePlatform.workspace":"  {{workspace}}","closePlatform.warning":"       ,    .","back":"","forward":"","reload":"","green":"","purple":"","orange":"","red":"","pink":"","yellow":"","theme.light":"","theme.dark":"","theme.system":"   ","toolbar.hideTabs":" ","toolbar.showTabs":" ","toolbar.lock":"","toolbar.unlock":"","toolbar.colorLinking":"  ","toolbar.changeLayout":" ","toolbar.saveMenu":" ","toolbar.maximizeWindow":" ","toolbar.restoreWindow":" ","toolbar.minimizeWindow":" ","changeLayout.fullWidth":" ","changeLayout.columns":"","changeLayout.Rows":"","changeLayout.Grid":"","successIndicator.workspaceSwitched":"  ","successIndicator.hidden":" ","successIndicator.shown":" ","successIndicator.locked":" ","successIndicator.unlocked":" ","successIndicator.workspaceSaved":"  ","successIndicator.workspaceSavedAs":"    {{workspace}}","successIndicator.workspaceRenamed":"  ","successIndicator.pageSaved":" ","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. RU","successIndicator.pageCopySaved":"   {{title}}","successIndicator.pageRenamed":" ","successIndicator.contextGroupApplied":"  ","successIndicator.namedContextGroupApplied":"  {{colorName}} ","successIndicator.viewRemoved":"    ","successIndicator.viewsRemoved":"    ","successIndicator.layoutApplied":" {{layoutName}} ","successIndicator.workspaceDeleted":"  ","errorIndicator.pageSaveFailed":"   ","errorIndicator.workspaceSaveFailed":"    ","errorIndicator.failedToDuplicatePage":"   ","infoIndicator.colorLinkAttempt":"      ,   /     ","global.cancel":"","global.confirm":"","global.save":"","global.delete":"Delete RU","appResults.header":"Featured Content RU","recentlyClosed.header":"Recently Closed RU","landingPage.subheader":"Apps and websites selected by an admin will show here RU","aria.openBrowser":"  ","aria.browserTabs":" ","aria.viewTab":"  {{title}}","aria.closePage":"      {{title}}","aria.closeTab":"  {{title}}","aria.title":"","aria.closeContextGroup":"     ,  escape","aria.colorLinking":"     ","aria.applyColorLinking":" ,     ","aria.assignColorLinkingCurrentView":" ,    {{name}}","aria.assignColorLinkingCurrentViews":" ,    {{name}}","aria.setColorLinkingActiveView":"      {{name}}","aria.setColorLinkingActiveViews":"      {{name}}","aria.escapeLayoutDialog":"    ,  escape","global.supertab":"Supertab RU","global.tab":"Tab RU","bookmarks.editBookmark":"Edit Bookmark RU","bookmarks.bookmarkAdded":"Bookmark added RU","bookmarks.done":"Done RU","bookmarks.remove":"Remove RU","bookmarks.bookmarksPanel":"Bookmarks Panel RU","bookmarks.bookmarks":"Bookmarks RU","bookmarks.allBookmarks":"All Bookmarks RU","bookmarks.favorites":"Favorites RU","bookmarks.searchBookmarks":"Search Bookmarks RU","bookmarks.clearSearchInput":"Clear Search Input RU","bookmarks.createFolder":"Create New Folder RU","bookmarks.exitFolder":"Exit Folder RU","bookmarks.newFolder":"New Folder RU","bookmarks.namedFolder":"{{name}} Folder RU","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings RU","bookmarks.folderSettings":"{{name}} Folder Settings RU","bookmarks.noResultsFound":"No results found RU","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search RU","bookmarks.nothingToShow":"Nothing to show yet RU","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder RU","bookmarks.resultsFoundIn":"Results found in {{name}} RU","bookmarks.resultsInOtherFolders":"Results found in other folders RU","bookmarks.allResultsFoundIn":"All results found in RU","bookmarks.editName":"Edit Name RU","bookmarks.move":"Move RU","bookmarks.bookmarkAddedTitle":"Bookmark Added RU","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" RU","bookmarks.bookmarkEditedTitle":"Bookmark Edited RU","enterpriseContextMenu.saveSupertab":"Save Supertab RU","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... RU","enterpriseContextMenu.duplicate":"Duplicate RU","enterpriseContextMenu.deleteSupertab":"Delete Supertab RU","enterpriseContextMenu.newTab":"New Tab RU","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As RU","enterpriseSaveModal":{"saveSupertabCount_one":"Save {{count}} Supertab before closing? RU","saveSupertabCount_other":"Save {{count}} Supertabs before closing? RU"},"enterpriseSaveModal.renameSupertab":"Rename RU","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. RU","enterpriseSaveModal.closeTab":"Close Tab RU","enterpriseSaveModal.closeSupertab":"Close Supertab RU","enterpriseModal.discardSupertabWarning":"Any unsaved changes will be lost. RU","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? RU","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. RU","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved RU","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.RU","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted RU","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. RU","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab RU","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab RU","enterpriseCommandBar.switchToSupertab":"Switch to Supertab RU","enterpriseCommandBar.goTo":"Go to {{type}} RU","enterpriseCommandBar.viewMore":"View More RU","sidePanel.aiCenter":"AI Center RU","sidePanel.newChat":"New Chat RU","sidePanel.toggleSidePanel":"Toggle Side Panel RU","sidePanel.closeSidePanel":"Close Side Panel RU","sidePanel.openAiCenter":"Open AI Center RU","contextMenu.quitEnterpriseBrowser":"Quit RU","dock.removeFavorite":"Remove RU"}');const _n=Tn().t,Un=async e=>{const t=await Sa(e);return await t.dispatch(Aa.GetPages)},On=async e=>(await Sa(e.identity)).dispatch(Aa.UpdatePageForWindow,e);let Gn,Hn=!1;const $n=()=>Hn,Kn=()=>Gn||{enabled:!1};async function zn(e,t){const a=!!t;let n=new Set;if(a){const{identity:e,pageId:a}=t,o=mn().Browser.wrapSync(e),r=await o.getPage(a);r?.panels&&(n=new Set(r.panels.map((({viewOptions:e})=>e.name))))}return e.map((e=>{const t=e.viewOptions.name,o=t?.startsWith(yn);o&&(!a||a&&!n.has(t))&&delete e.viewOptions.name;const r=(i=e.viewOptions,i.name||=`${yn}${na()}`,i);var i;return{...e,viewOptions:{...r,uuid:fe.uuid}}}))}async function Jn(e){for(const t of e)t.panels&&await qn(t.panels)}const Zn=e=>null!==e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&/ERR_([A-Z]+_*)+/.test(e.message);async function qn(e){const t=e.map((e=>fin.Platform.getCurrentSync().createView(e.viewOptions,fin.me.identity).catch((e=>{if(!Zn(e))throw e;console.error(e)}))));return await Promise.all(t)}const jn=(e,t)=>!t.find((t=>t===e)),Qn=(e,t)=>`${e} (${t})`,Yn=(e,t)=>{if(jn(e,t))return e;let a=1;const n=e.replace(/ *\(\d+\)$/,"");for(;!jn(Qn(n,a),t);)a+=1;return Qn(n,a)},Xn=async()=>{const e=await Ce();return(await Promise.all(e.map((async e=>{try{return Un(e.identity)}catch(t){JSON.stringify(e.identity);const a=await e.getOptions();return a.workspacePlatform?.pages||[]}})))).reduce(((e,t)=>e.concat(t)),[])},eo=async()=>(await ot(fe)).dispatch(tt.GetSavedPages,void 0),to=async e=>(await ot(fe)).dispatch(tt.GetSavedPage,e),ao=async(e,t)=>{const a=await(async e=>(await Xn()).find((t=>t.pageId===e)))(e);return!a||a.title===t.title&&e===t.pageId||await On({identity:a.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),a},no=async({page:e})=>{await ao(e.pageId,e),await(async e=>(await ot(fe)).dispatch(tt.CreateSavedPage,e))({page:e})},oo=async e=>{await to(e)&&await(async e=>(await ot(fe)).dispatch(tt.DeleteSavedPage,e))(e)},ro=async({pageId:e,page:t})=>{await ao(e,t);return await(async e=>(await ot(fe)).dispatch(tt.UpdateSavedPage,e))({pageId:e,page:t})},io=async e=>await to(e.pageId)?ro({pageId:e.pageId,page:e}):no({page:e}),so=async e=>{await(async e=>(await Sa(e.identity)).dispatch(Aa.AttachPagesToWindow,e))(e)},co=async e=>{const t={...e.page,panels:e.page.panels&&await zn(e.page.panels,e)};t.panels&&await qn(t.panels),await On({...e,page:t})},lo=async e=>{await(async e=>(await Sa(e.identity)).dispatch(Aa.DetachPagesFromWindow,e))(e)},uo=async e=>{await(async e=>(await Sa(e.identity)).dispatch(Aa.SetActivePageForWindow,e))(e)},po=e=>Un(e),wo=async({identity:e,pageId:t})=>(await po(e)).find((e=>e.pageId===t)),go=async e=>{await(async e=>(await Sa(e.identity)).dispatch(Aa.ReorderPagesForWindow,e))(e)},ho=new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};async function mo(e){await ho.lock();try{const t=$n()?_n("enterpriseDefaultPageTitle"):_n("defaultPageTitle"),a=e??t,[n,o]=await Promise.all([eo(),Xn()]),r=[...n,...o].map((({title:e})=>e));return Yn(a,r)}finally{ho.unlock()}}async function ko({page:e}){return{shouldShowModal:!(!e||!e.hasUnsavedChanges)}}async function bo({page:e,identity:t}){const a=fin.Application.getCurrentSync();if((await a.getInfo()).initialOptions.enableBeforeUnload){const a=await fin.Application.getCurrentSync().getViews(),n=Mn(e.layout.content).filter((e=>e.name&&a.some((t=>t.identity.name===e.name)))).map((e=>fin.View.wrapSync({name:e.name,uuid:t.uuid}))),o=await this.checkViewsForPreventUnload(n);if(o.viewsPreventingUnload.length>0){if((await this.getUserDecisionForBeforeUnload({...o,windowId:t,windowShouldClose:!1,closeType:"page"})).viewsToClose.length!==n.length)return e.pageId,{shouldPageClose:!1}}}return{shouldPageClose:!0}}async function yo({pages:e,identity:t}){const a=await Promise.all(e.map((e=>this.shouldPageClose({page:e,closeType:"window",identity:t})))),{pagesPreventingClose:n,pagesNotPreventingClose:o}=e.reduce(((e,t,n)=>!a[n].shouldPageClose?{pagesNotPreventingClose:e.pagesNotPreventingClose,pagesPreventingClose:[...e.pagesPreventingClose,t]}:{pagesPreventingClose:e.pagesPreventingClose,pagesNotPreventingClose:[...e.pagesNotPreventingClose,t]}),{pagesPreventingClose:[],pagesNotPreventingClose:[]});return this.handlePagesAndWindowClose({pagesNotPreventingClose:o,pagesPreventingClose:n,identity:t})}async function fo({pagesPreventingClose:e,pagesNotPreventingClose:t,identity:a}){return{shouldWindowClose:0===e.length}}async function So({page:e}){return ua(e)}async function vo(e){return{hasUnsavedChanges:!0}}const Po=async()=>{const e=mn(),t=(await Ce()).map((t=>e.Browser.wrapSync(t.identity)));await Promise.all(t.map((async e=>{const t=await e.getPages();await Promise.all(t.map((async t=>{t.title,await e.updatePage({pageId:t.pageId,page:{hasUnsavedChanges:!1}}),t.pageId,t.title,await io({...t,hasUnsavedChanges:!1})})))})))},Co=new Map,Mo=()=>Co,xo=e=>Co.delete(e);let Io=!1;const Ao=()=>{Io||(Io=!0,fin.Window.wrapSync(Se).once("closed",(()=>{Io=!1,(async(e,t)=>{await qt(Zt(e),{source:"Store",...t})})(fin.me.identity,{type:"Navigation",action:"Close Store",skipValueHashing:!0})})))};let Wo,Do,To;const Bo=async()=>(void 0===To&&(To=!!(await Y()).disableOpenFinAnalytics),To);async function Ro(e){e.forEach((e=>{var t,a;"Page"===e.type?"Open Page"===e.action?(t=e.data.uuid,a=e,Co.set(t,a)):"Close Page"===e.action&&xo(e.data.uuid):"Store"===e.source&&"Close"!==e.action&&Ao()})),await(async e=>{Wo?.sendToOpenFin&&(await Bo()||e.forEach((async e=>{const t=ea({},e);t.entityId&&(t.entityId.uuid=await Yt(t.entityId.uuid),t.entityId.name=await Yt(t.entityId.name)),!e.skipValueHashing&&"value"in t&&(t.value=await Yt(t.value)),Do(t)})))})(e);const t=e.map((({skipValueHashing:e,...t})=>t));this.handleAnalytics(t)}const Eo=async e=>{Wo=e;Wo?.sendToOpenFin&&!await Bo()&&(()=>{const e=L,t=e+z.Analytics,a=document.createElement("IFRAME");a.setAttribute("src",t),a.setAttribute("style","width: 0px !important"),a.setAttribute("style","height: 0px !important"),a.setAttribute("style","display: none !important"),document.body.appendChild(a),Do=async t=>{a.contentWindow.postMessage(t,e)}})();const t=fin.Application.getCurrentSync();t.addListener("view-created",(async e=>{var t;jt({type:"View",action:"Open View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid,url:await(t=e.viewIdentity,fin.View.wrapSync(t).getInfo().then((e=>e.url)))}})})),t.addListener("view-destroyed",(async e=>{jt({type:"View",action:"Close View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid}})})),t.addListener("window-closed",(e=>{e.name.startsWith(me.BrowserMenu)||(jt({type:"Window",action:"Close Window",value:e.name,data:{uuid:e.uuid}}),(async()=>{const e=Mo(),t=await Xn();if(t.length===e.size)return;const a=t.reduce(((e,t)=>e.set(t.pageId,1)),new Map);for(const[t,n]of e)a.has(t)||(n.action="Close Page",jt(n),xo(t))})())}))},Fo=De({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1});const Vo=function(e=Fo){const t=new Map;return async(a,n,o,r,i)=>{if(t.has(a)){const{currentUrl:e,currentName:o}=t.get(a);if(e===n)return;const r=fin.Window.wrapSync({uuid:fin.me.uuid,name:o});await r.close()}const s=`${me.BrowserIndicator}-${Date.now()}${Math.random()}`;t.set(a,{currentUrl:n,currentName:s});const c=`New ${r} indicator: ${o} ${i}`,l=await fin.Platform.getCurrentSync().createWindow({...e,name:s,url:n});((e,t)=>{const a=document.createElement("div");a.setAttribute("role","alert"),a.setAttribute("aria-live",t||"polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(a),document.body.appendChild(a),setTimeout((()=>{a.innerHTML=e}),300),setTimeout((()=>{document.body.removeChild(a)}),1e3)})(c),l.once("closed",(()=>{t.delete(a)}))}}();async function No(e){const{parentBrowserName:t}=e;if(t&&t.includes(me.BrowserWindow)&&fin.me.name!==t){return(await Sa({uuid:fin.me.uuid,name:t})).dispatch(Aa.ShowBrowserIndicator,e)}return async function(e){const{type:t,message:a,parentBrowserName:n,secondaryMessage:o,icon:r,isEnterprise:i,positioning:s}=e,c=new URLSearchParams;if(c.append("type",t),c.append("message",a),c.append("parentName",n||""),c.append("secondaryMessage",o||""),c.append("icon",r||""),c.append("isEnterprise",`${i}`||""),s===Te.RelativeToMonitor&&c.append("positioning",Te.RelativeToMonitor),n){const e=ye(n?{uuid:R,name:n}:void 0),t=`${(l=await e.getBounds()).top},${l.left},${l.height},${l.width},${l.bottom},${l.right},${l.content.top},${l.content.left},${l.content.height},${l.content.width}`;c.append("parentBounds",t)}var l;const d=`${(i?await ne():await ae())+z.BrowserIndicator}#${c.toString()}`;return Vo("browser"+n,d,a,t,o)}(e)}async function Lo(e){const t=e.isEnterprise??await Ut(e.parentBrowserName?{uuid:R,name:e.parentBrowserName}:void 0);return No({type:"success",message:e.message,parentBrowserName:e.parentBrowserName,secondaryMessage:e.secondaryMessage,icon:e.icon,isEnterprise:t,positioning:e.positioning})}const _o=async(e=fe)=>{const{workspacePlatform:t}=await ye(e).getOptions(),a=t?.newPageUrl,n=t?.newTabUrl;return{newPageUrl:a,newTabUrl:n}},Uo=async(e=fe)=>{const t=await Ut(e)||$n(),a=t?null:await mn().Browser.getUniquePageTitle();let n;if(e&&await Pe(e))n=await(async(e,t=fe)=>{const{newPageUrl:a}=await _o(t);if(!a)throw new Error("Trying to create a new page without a newPageUrl set");return xn(e,a,t)})(a,e);else if(t){const e=await oe();n=await xn(a,e)}t&&(n.settings=n.settings??{},n.dimensions=n.dimensions??{},n.settings.hasHeaders=!1,n.settings.reorderEnabled=!0,n.dimensions.headerHeight=0);const o=await da(a,n);return t&&(o.hasUnsavedChanges=!1),o},Oo=async(e,t,a)=>{const{windowOptions:n,content:o}=await(async(e,t)=>{const a=await Ut(t);return{title:"Switch Workspace",windowOptions:{url:await re(a,!1)+z.ResponseModal,name:me.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:t},content:{title:_n("switchWorkspaceModal",{workspace:e}),body:_n("switchWorkspaceModal.warning"),buttons:{right:[{label:_n("global.cancel"),type:"secondary",id:"Cancel"},{label:_n("global.confirm"),type:"primary",id:"Confirm"}]}}}})(t,a?void 0:e),r=await Fe(n,e,a),i={...n,top:r.top,left:r.left};return"Confirm"===(await Za({options:i,content:o})).data.actionName},Go=async({workspaceTitle:e,windowIdentity:t})=>{const{windowOptions:a,content:n}=await(async({workspaceTitle:e,windowIdentity:t})=>{const a=await Ut(t);return{title:"Delete Workspace",windowOptions:{url:await re(a,!1)+z.ResponseModal,name:me.BrowserMenu,defaultHeight:144,defaultWidth:410,modalParentIdentity:t},content:{title:_n("deleteWorkspaceModal"),body:`${e}`,buttons:{right:[{label:_n("global.cancel"),type:"secondary",id:"Cancel"},{label:_n("global.confirm"),type:"primary",id:"Confirm"}]}}}})({workspaceTitle:e,windowIdentity:t}),o=await Fe(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return"Confirm"===(await Za({options:r,content:n})).data.actionName},Ho=async(e,t,a)=>{const{windowOptions:n,content:o}=await(async(e,t,a)=>{const n=await Ut(e);return{title:"Platform Quit",windowOptions:{url:await re(n,!1)+z.ResponseModal,name:me.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:a?void 0:e},content:{title:_n("Platform"===t?"closePlatform":"closePlatform.workspace",{workspace:t}),body:_n("closePlatform.warning"),buttons:{right:[{label:_n("global.cancel"),type:"secondary",id:"Cancel"},{label:_n("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t,a),r=await Fe(n,e,a),i={...n,top:r.top,left:r.left};return"Confirm"===(await Za({options:i,content:o})).data.actionName},$o=async e=>{const{windowOptions:t,content:a}=await(async e=>{const t=await Ut(e);return{title:"Restore Changes",windowOptions:{url:await re(t,!1)+z.ResponseModal,name:me.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:e},content:{title:_n("restoreModal"),body:_n("modal.discardWarning"),buttons:{right:[{label:_n("global.cancel"),type:"secondary",id:"Cancel"},{label:_n("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e),n=await Fe(t,t.modalParentIdentity),o={...t,top:n.top,left:n.left};return"Confirm"===(await Za({options:o,content:a})).data.actionName},Ko=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>{const a=await Ut(e);return{title:"Delete Page",windowOptions:{url:new URL(await re(a,!1)+z.ResponseModal).toString(),name:me.BrowserMenu,defaultHeight:172,defaultWidth:464,modalParentIdentity:e},content:{title:_n("enterpriseDeleteModal.deleteSupertab",{title:t}),body:_n("enterpriseDeleteModal.deleteSupertabWarning"),buttons:{right:[{label:_n("global.cancel"),type:"secondary",id:"Cancel",variant:a?"outline":void 0},{label:_n("global.delete"),type:"primary",id:"Delete",variant:a?"submit":void 0}]}}}})(e,t),o=await Fe(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return"Delete"===(await Za({options:r,content:n})).data.actionName},zo=async({identity:e,title:t,description:a})=>{const{windowOptions:n,content:o}=await(async(e,t,a)=>({title:"Update Version",windowOptions:{url:await ne()+z.ResponseModal,name:me.UpdateVersionModal,defaultHeight:172,defaultWidth:464,modalParentIdentity:e,preventBlur:!0,closeOnResponse:!0,includeInSnapshots:!1},content:{title:t,body:a,buttons:{right:[{label:"Snooze",type:"secondary",id:"snooze"},{label:"Restart",type:"primary",id:"restart"}]}}}))(e,t,a),r=fin.Window.wrapSync({uuid:e.uuid,name:`${n.name}--${n.modalParentIdentity?.name}`});try{if(await(r?.isShowing()))return}catch(e){}const i=await Fe(n,n.modalParentIdentity),s={...n,top:i.top,left:i.left};return(await Za({options:s,content:o})).data};async function Jo({options:e,...t}){if(!(!!e?.skipPrompt||await Oo(e?.promptContainerWindowIdentity,t.title,e?.shouldCenterModalOnMonitor)))return!1;const a=!!(await fin.Application.getCurrentSync().getChildWindows()).find((({identity:e})=>e.name===me.DockCompanion||e.name===le));$n();const n=a||$n()?{closeExistingWindows:!1,closeSnapshotWindows:!0}:{closeExistingWindows:e?.applySnapshotOptions?.closeExistingWindows??!0},o=mn();return await o.applySnapshot(t.snapshot,{...e?.applySnapshotOptions??{},...n}),jo(t),No({type:"success",message:_n("successIndicator.workspaceSwitched"),positioning:Te.RelativeToMonitor}).catch(console.warn),!0}async function Zo(e){try{return await Jo(e)}catch(e){return console.error("failed to apply the current workspace: ",e),!1}}async function qo(e){try{const t=await async function(){const e=mn(),t=await e.getCurrentWorkspace({skipSnapshotUpdate:!0});return(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId))}();if(!t)return"not-saved-workspace";return!!e?.skipPrompt||await $o(e?.promptContainerWindowIdentity)?(await Jo({options:{skipPrompt:!0,applySnapshotOptions:e?.applySnapshotOptions},...t}),"success"):"user-declined"}catch(e){throw console.error("failed to restore last saved workspace: ",e),e}}function jo(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);vt(xt.CurrentWorkspaceId,t)}catch(e){console.error("failed to set the active workspace: ",e)}}async function Qo(){const e=mn(),t=await e.getSnapshot();return{workspaceId:na(),title:await tr(),metadata:{APIVersion:O},snapshot:t}}async function Yo(e){if("undefined"==typeof localStorage)return Qo();const t=Pt(xt.CurrentWorkspaceId);if(!t)return Qo();const a=JSON.parse(t);if(e?.skipSnapshotUpdate)return a;const n=mn(),o=await n.getSnapshot();return{...a,metadata:{APIVersion:O},snapshot:o}}const Xo=async()=>(await ot(fe)).dispatch(tt.GetSavedWorkspaces,void 0),er=async e=>await(async e=>(await ot(fe)).dispatch(tt.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await ot(fe)).dispatch(tt.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await ot(fe)).dispatch(tt.CreateSavedWorkspace,e))({workspace:e});async function tr(e="Untitled Workspace"){const t=(await Xo()).map((({title:e})=>e));return Yn(e,t)}const ar=e=>({...e,snapshot:{...e.snapshot,windows:e.snapshot.windows.map((e=>({...e,workspacePlatform:{...e.workspacePlatform,pages:e.workspacePlatform?.pages?.map((e=>({...e,hasUnsavedChanges:!1})))}})))}}),nr=async(e,t)=>{const a=t??mn();await a.Storage.saveWorkspace(ar(e)),await(async()=>(await ot(fe)).dispatch(tt.MarkUnsavedPagesAsSavedInternal,void 0))()},or=async e=>{const t=mn();await(async({showModal:e,afterSuccessSave:t})=>{const a=mn(),n=await a.getCurrentWorkspace(),o=await a.Storage.getWorkspacesMetadata(),r=n.workspaceId;o.some((e=>e.workspaceId===r))?(await nr(n,a),await a.setActiveWorkspace(n),await t()):await e()})({showModal:async()=>{const a=t.Browser.wrapSync(e);await a._openSaveModal({menuType:I.SAVE_WORKSPACE_AS})},afterSuccessSave:async()=>{await Lo({message:_n("successIndicator.workspaceSaved"),parentBrowserName:e.name})}})},rr=e=>{mn().Browser.wrapSync(e)._openSaveModal({menuType:I.SAVE_WORKSPACE_AS})},ir=async e=>{const t=mn().Browser.wrapSync(e),{newPageUrl:a}=await _o(),n=await Uo(e),o=a||void 0;await t._addDefaultPage({identity:e,page:n,newPageUrl:o})},sr=async(e,t)=>{const a=mn().Browser.wrapSync(e),n=await mn().Storage.getPages(),o=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive)),r=n.some((e=>o.pageId===e.pageId)),i=await Ut(e);if(r)try{await mn().Storage.savePage((c=o,{...c,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0,layout:Cn(c.layout)})),await a.updatePage({pageId:o.pageId,page:{hasUnsavedChanges:!1}}),Lo({message:_n(i?"enterpriseSuccessIndicator.supertabSaved":"successIndicator.pageSaved"),parentBrowserName:e.name,secondaryMessage:_n(i?"enterpriseSuccessIndicator.supertabHasBeenSaved":"successIndicator.pageHasBeenSaved",{title:o.title}),isEnterprise:i})}catch{No({type:"error",message:(s={message:_n("errorIndicator.pageSaveFailed"),parentBrowserName:o.parentIdentity.name}).message,parentBrowserName:s.parentBrowserName,icon:s.icon,isEnterprise:s.isEnterprise||!1,positioning:s.positioning})}else a._openSaveModal({id:o.pageId,menuType:I.SAVE_PAGE});var s,c},cr=async(e,t)=>{const a=mn().Browser.wrapSync(e),n=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive));a._openSaveModal({id:n.pageId,menuType:I.SAVE_PAGE_AS}),jt({type:"Page Modal",action:"Select Save As",value:n.title,skipValueHashing:!0})},lr=async(e,t)=>{await(async({workspaceItemData:e,winIdentity:t,positioning:a})=>{const n=mn(),o=(await n.Storage.getWorkspacesMetadata()).find((t=>t.workspaceId===e.workspaceId));o&&await Go({workspaceTitle:o.title,windowIdentity:t})&&(await n.Storage.deleteWorkspace(e.workspaceId),await Lo({message:_n("successIndicator.workspaceDeleted"),parentBrowserName:t?.name,positioning:a}))})({workspaceItemData:t,winIdentity:e})},dr={title:"Downloads",pageId:"downloads-page-id",layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{name:"show-download-view",url:"chrome://downloads/"}}]}]}},ur=async e=>{const t=ye(e),a=await t.getCurrentViews(),n=(await mn().Browser.wrapSync(t.identity).getPages()).find((e=>e.isActive));try{const t=(await Promise.all(a.map((async e=>({identity:e.identity,info:await fin.View.wrapSync(e.identity).getInfo()}))))).find((e=>"chrome://downloads/"===e.info.url));if(t)await fin.View.wrapSync(t.identity).focus();else{const t=mn();if(n?.isLocked){const e=(await fin.Application.getCurrentSync().getChildWindows()).find((e=>"show-download-window"===e.identity.name));return void(e?await e.focus():t.Browser.createWindow({name:"show-download-window",workspacePlatform:{pages:[dr]}}))}(await mn().createView({name:"show-download-view",url:"chrome://downloads/",target:e},e)).focus()}}catch(e){console.error("Couldn't open downloads view",e)}},pr=async e=>{const t=e.map((e=>fin.View.wrapSync(e).print()));await Promise.all(t)},wr=e=>{const[t,a,n]=e.split(".").map((e=>"x"===e?0:1));return 100*t+10*a+1*n};class gr extends Error{}const hr=async e=>{try{const a=await async function(){const e=await Y(),t=e?.translationOverridesUrl??"https://workspace.openfin.co/workspace/assets/translation-override.json";if(""===t)throw new gr("Empty string provided as url to translationOverridesUrl, overrides will not be fetched.");return await fetch(t).then((e=>e.json()))}();(t=(e=>{const t=O.split(".");return Object.keys(e).filter((e=>{const a=e.split(".");if(3!==a.length)return console.warn(`Encountered a translation override version string in an unsupported format: ${e}. Versions must be in A.B.C format where A, B, C are either integers or the wildcard symbol 'x'.`),!1;const[n,o,r]=a;return!(n!==t[0]&&"x"!==n||o!==t[1]&&"x"!==o||r!==t[2]&&"x"!==r)}))})(a),[...t].sort(((e,t)=>wr(e)-wr(t)))).forEach((t=>{const n=a[t];Object.keys(n).forEach((t=>{e.addResourceBundle(t,"translation",n[t],!0,!0)}))}))}catch(e){e instanceof gr?console.warn(e.message):console.error("Error applying a translation override: ",e)}var t};function mr(){return Tn().language}const kr=async e=>{fr(e),(e=>{Tn().changeLanguage(e)})(e),await(async e=>{const t=await Ce();return Promise.all(t.map((async t=>{const a=await Sa(t.identity);await a.dispatch(Aa.SetSelectedLanguage,e)})))})(e)};function br(){if(!Tn().options.resources)throw new Error("No language resources found");return{currentLanguage:mr(),resources:Tn().options.resources}}async function yr(e="en-US"){fr(e),function(e="en-US"){Tn().use(Wn.initReactI18next).init({lng:e,fallbackLng:"en-US",resources:{"en-US":{translation:En},"ja-JP":{translation:Vn},"zh-CN":{translation:Bn},"ko-KR":{translation:Nn},"ru-RU":{translation:Ln},"de-DE":{translation:Fn},"zh-Hant":{translation:Rn}},interpolation:{escapeValue:!1}})}(e),await hr(Tn())}function fr(e){if(!x.includes(e))throw new Error(`The ISO language provided ${e} is not supported`)}const Sr=new Map;let vr=Date.now();function Pr(){const e=Date.now();return vr=Math.max(e,vr+1),vr}async function Cr(){const e=Array.from(Sr.values()).sort(((e,t)=>t.lastFocusedTime-e.lastFocusedTime));if(e.length>0)return e[0].identity;try{const e=Pt(xt.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await xe(t))return await Ir(t),t}catch(e){console.error("failed to get last focused browser window from localStorage:",e)}}async function Mr(){const e=fin.Application.getCurrentSync();return(await e.getChildWindows()).filter((e=>e.identity.name.startsWith(me.BrowserWindow)))}async function xr(){const e=mn(),t=fin.Window.wrapSync({uuid:fin.me.uuid,name:me.DockCompanion}),a=await We(await t.getBounds()),n=await async function(e,t,a){const n=await fin.System.getMonitorInfo(),o=a?.availableRect??n.primaryMonitor.availableRect,r={width:o.right-o.left,height:o.bottom-o.top},i=Math.min(e,r.height),s=Math.min(t,r.width),c=o.top+Math.floor((r.height-i)/2);return{height:i,width:s,left:o.left+Math.floor((r.width-s)/2),top:c}}(600,900,a),o=await Uo();return(await e.Browser.createWindow({defaultHeight:600,defaultWidth:900,defaultLeft:n.left,defaultTop:n.top,workspacePlatform:{pages:[o]}})).identity}async function Ir(e,t,a=!1){if(!await Pe(e))return;const n=fin.Window.wrapSync(e),o=t??await n.isShowing(),r=Sr.get(e.name),i={identity:e,lastFocusedTime:a?Pr():r?.lastFocusedTime??Pr(),isVisible:o};Sr.set(e.name,i),a&&function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);vt(xt.LastFocusedBrowserWindow,t)}catch(e){console.error("failed to save last focused browser window: ",e)}}(e)}async function Ar(e=fin.me.identity){Sr.delete(e.name)}const Wr=aa()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,a=!1;for(const n of e)if(n.identity.name===me.BrowserMenu||n.identity.name===me.BrowserSaveMenu?t=n:await Pe(n.identity)&&(a=!0),a)break;!a&&t&&t.close()}),100,{leading:!1,trailing:!0});let Dr={};const Tr=async({actionId:e,payload:t})=>{if("function"!=typeof Dr[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return Dr[e](t)};let Br;const Rr=()=>`custom-context-menu-${mn().identity.uuid}-${O}`,Er=()=>`custom-bookmark-context-menu-${mn().identity.uuid}-${O}`,Fr=async()=>(Br||(Br=await fin.InterApplicationBus.Channel.connect(Rr())),Br);var Vr,Nr;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(Vr||(Vr={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu",e.ZoomControls="zoom-controls"}(Nr||(Nr={}));const Lr=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),_r="visited-sites",Ur="removed-tab-stack",Or=T&&W&&Wt("openfin-home-pages","pages"),Gr=T&&W&&new yt.Dexie(It("openfin-enterprise-site-history"));Gr&&Gr.version(.1).stores({[_r]:"id, url"});const Hr=T&&W&&new yt.Dexie(It("openfin-enterprise-tab-history"));async function $r(e){if(!Or)throw new Error("Unable to get page - IndexDB not supported");const t=await Or.pages.get(e);if(t)return t.pageId=e.toString(),t.title=t.title||t.pageId,t}async function Kr(e){if(!Or)throw new Error("Unable to get page list - IndexDB not supported");const t=await Or.pages.toCollection().keys(),a=(await Promise.all(t.map((e=>$r(e.toString()))))).filter((e=>!!e));return e?a.filter((t=>Lr(t.title,e))):a}async function zr({page:e}){if(!Or)throw new Error("Unable to create page - IndexDB not supported");await Or.pages.put(e,e.pageId)}async function Jr(e){if(!Or)throw new Error("Unable to delete page - IndexDB not supported");await Or.pages.delete(e)}async function Zr({pageId:e,page:t}){if(!Or)throw new Error("Unable to update page - IndexDB not supported");if(void 0===await $r(e))throw new Error("page not found");await zr({page:t}),e!==t.pageId&&await Jr(e)}Hr&&Hr.version(.1).stores({[Ur]:""});const qr=async e=>{if(!Hr)throw new Error("Unable to add removed tab - IndexDB not supported");const t=Date.now().toString(),a={...e,id:t};await Hr[Ur].put(a,t)};function jr(e){return"app"===e.type||"website"===e.type}const Qr=async e=>{if("website"===e.type){const t=e,a=t.url||"";let n=await Gr[_r].get(a);n&&jr(n)?(n.icon=t.icon,n.title=t.title,n.type=t.type,n.visitCount=(n.visitCount||0)+1,n.url=t.url):n={...t,id:a,visitCount:1,accessTime:void 0},n.accessTime=Date.now(),await Gr[_r].put(n,a)}},Yr=async()=>{if(!Gr)throw new Error("Unable to get frequently visited sites - IndexDB not supported");const e=Gr[_r],t=await e.toCollection().toArray();t.sort(((e,t)=>(t.visitCount||0)-(e.visitCount||0)));return(t.length>5?t.slice(0,5):t).map((({id:e,...t})=>t))};const Xr=async()=>(await fin.System.getHostSpecs()).name.toLowerCase().includes("windows"),ei=async({browserIdentity:e,url:t,shiftKey:a,activePage:n,pages:o})=>{const r=mn().Browser.wrapSync(e),i=await xn(t,t,e),s={...await da(t,i),attachedPageType:"singleView",singleViewName:t},c=o.findIndex((e=>e.pageId===n.pageId));await r._addPage(s,{index:c+1}),a&&await r.setActivePage(s.pageId)},ti=async e=>{const{url:t}=e.bookmark,{sourceIdentity:a,sourceEvent:n}=e,o=await Xr(),r=mn();let i=!1,s=a;if(!await Pe(a)){const t=await async function(){const e=Array.from(Sr.values());for(let t=e.length-1;t>=0;t--)if(e[t].isVisible)return e[t].identity}();if(!t)return await(async e=>{const t=mn(),a=await xn(e.url,e.url),n=await da(e.url,a);ve((await t.Browser.createWindow({workspacePlatform:{pages:[n]}})).identity)})(e.bookmark);i=!0,s=t}const c=r.Browser.wrapSync(s),l=await c.getPages(),d=(await c._getLayoutsWithSelectedViews()).find((e=>e.isActive));if(!d)throw Error(`Browser ${s} does not have any active layouts`);const u=l.find((e=>e.isActive)),p=1===An(u.layout.content),w=d.selectedViews[0];i?await ei({browserIdentity:s,url:t,shiftKey:!0,activePage:u,pages:l}):p?await(async({isWindows:e,currentViewId:t,browserIdentity:a,url:n,activePage:o,pages:r,sourceEvent:i})=>{const{ctrlKey:s,metaKey:c,shiftKey:l}=i;(e?s:c)?await ei({browserIdentity:a,url:n,shiftKey:l,activePage:o,pages:r}):await fin.View.wrapSync(t).navigate(n)})({isWindows:o,currentViewId:w,browserIdentity:s,url:t,activePage:u,pages:l,sourceEvent:n}):await(async({isWindows:e,currentViewId:t,browserIdentity:a,url:n,activeLayout:o,sourceEvent:r})=>{const{ctrlKey:i,metaKey:s,shiftKey:c}=r;if(e?i:s){const e=fin.View.wrapSync(t),o=await e.getCurrentStack(),r=(await o.getViews()).findIndex((e=>e.name===t.name)),i={url:n,browserIdentity:a,title:n};await o.addView(i,{index:r+1})}else await fin.View.wrapSync(o.selectedViews[0]).navigate(n)})({isWindows:o,currentViewId:w,browserIdentity:s,url:t,activeLayout:d,sourceEvent:n})};var ai;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(ai||(ai={}));let ni={locked:!1,x:-1,y:-1};const oi=async(e,t,a,n)=>{if(!W)throw new Error("showEnterpriseContextMenu can only be used in a Here env. Avoid calling this method during pre-rendering.");if(!n&&!fin.me.isWindow)throw new Error("showEnterpriseContextMenu can only be used in a Here window.");const{x:o,y:r,template:i}=e;if(((e,t)=>{const{x:a,y:n,locked:o}=ni;return o&&e===a&&t===n})(o,r))return new Promise(((e,t)=>e({data:void 0})));ni={locked:!0,x:o,y:r};const s=await Fr(),c=na(),l=new Promise(((e,t)=>{s.register(`response-${c}`,(t=>{ni.locked=!1,s.remove(`response-${c}`),e(t)}))}));return await s.dispatch("open",{parentIdentity:n.identity,responseIdentity:fe,requestId:c,type:t,anchorBehavior:a,x:o,y:r,payload:{template:i}}),l},ri={type:ai.Separator,data:void 0},ii=async()=>({type:ai.Submenu,label:_n("contextMenu.print"),submenu:[{type:ai.Label,label:_n("contextMenu.submenu.print"),data:{type:S.Print}},{type:ai.Label,label:_n("contextMenu.submenu.printAll"),data:{type:S.PrintAll}},ri,{type:ai.Label,label:_n("contextMenu.printScreen"),data:{type:S.PrintScreen}}]}),si=()=>({type:ai.Label,label:_n("contextMenu.closeWindow"),data:{type:m.CloseWindow}}),ci=e=>({type:ai.Label,label:_n(e?"contextMenu.quitEnterpriseBrowser":"contextMenu.quitPlatform"),data:{type:m.Quit}}),li=()=>({type:ai.Label,label:_n("contextMenu.newWindow"),data:{type:m.NewWindow}}),di=e=>({type:ai.Label,label:_n(e?"enterpriseContextMenu.saveSupertab":"contextMenu.savePage"),data:{type:m.SavePage}}),ui=e=>({type:ai.Label,label:_n(e?"enterpriseContextMenu.saveSupertabAs":"contextMenu.savePageAs"),data:{type:m.SavePageAs}}),pi=(e,t)=>({type:ai.Label,label:_n(t?"enterpriseContextMenu.newTab":"contextMenu.newPage"),data:{type:m.NewPage},enabled:e}),wi=()=>({label:_n("contextMenu.switchWorkspace")}),gi=()=>({label:_n("contextMenu.deleteWorkspace")}),hi=()=>({label:_n("contextMenu.appearance")}),mi=(e,t,a)=>t.map((t=>{const n=t.workspaceId===e.workspaceId;return{label:t.title,type:ai.Checkbox,enabled:!n,checked:n,data:{type:a,workspaceId:t.workspaceId}}})),ki=async()=>{const e=await mn().Theme.getSelectedScheme();return[{label:_n("theme.light"),type:ai.Checkbox,checked:e===k.Light,data:{type:m.Appearance,scheme:k.Light}},{label:_n("theme.dark"),type:ai.Checkbox,checked:e===k.Dark,data:{type:m.Appearance,scheme:k.Dark}},{label:_n("theme.system"),type:ai.Checkbox,checked:e===k.System,data:{type:m.Appearance,scheme:k.System}}]},bi=async(e,t=[])=>{const a=await Ie(),{newPageUrl:n}=await _o(e),o=await(async e=>{const t=ye(e),{workspacePlatform:a}=await t.getOptions();return a?.disableMultiplePages})(e),r=await(async e=>{const t=ye(e),{workspacePlatform:a}=await t.getOptions();return a?.isLocked})(e),i=await Ut(e),s=[],c=t.length>0;n&&(s.push(li()),o||s.push(pi(!r,i))),s.push(ri);const l=mn(),d=await l.getCurrentWorkspace({skipSnapshotUpdate:!0}),u=await l.Storage.getWorkspacesMetadata(),p=u.find((e=>e.workspaceId===d.workspaceId)),w=l.Browser.wrapSync(e),g=(await w.getPages()).find((e=>e.isActive)),h=!!g&&await l.Storage.getPage(g.pageId);s.push({type:ai.Label,label:_n("contextMenu.restore"),data:{type:m.RestoreChanges},enabled:!!p}),s.push({type:ai.Label,label:_n("contextMenu.saveWorkspace"),data:{type:m.SaveWorkspace},enabled:!!p}),s.push({type:ai.Label,label:_n("contextMenu.saveWorkspaceAs"),data:{type:m.SaveWorkspaceAs}}),s.push({type:ai.Label,label:_n("contextMenu.renameWorkspace"),data:{type:m.RenameWorkspace},enabled:!!p}),u.some((e=>e.workspaceId!==d.workspaceId))?s.push({label:wi().label,submenu:mi(d,u,m.SwitchWorkspace),data:void 0},{label:gi().label,submenu:mi(d,u,m.DeleteWorkspace),data:void 0}):s.push({label:wi().label,enabled:!1,data:void 0},{label:gi().label,enabled:!1,data:void 0}),s.push({label:_n("contextMenu.downloads"),data:{type:m.Downloads}}),s.push({label:hi().label,submenu:await ki(),data:void 0});const k={...di(i),enabled:!!h};return s.push(ri,k,ui(i),await(async e=>{const t=await Xr();return{label:_n("contextMenu.print"),submenu:[{type:ai.Label,label:_n("contextMenu.submenu.print"),data:{type:m.Print},enabled:e},{type:ai.Label,label:_n("contextMenu.submenu.printAll"),data:{type:m.PrintAll}},...t?[ri,{type:ai.Label,label:_n("contextMenu.printScreen"),data:{type:m.PrintScreen}}]:[]],data:void 0}})(c)),a?[...s,si(),ri,{type:ai.Label,label:_n("contextMenu.openStorefront"),data:{type:m.OpenStorefront}},ri,ci()]:[...s,ri,si(),ri,ci()]},yi=async(e,t)=>{const a=t.selectedViews[0],n=fin.View.wrapSync(a),o=await(async e=>{const{newTabUrl:t}=await _o(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{url:t,target:e,title:"New Tab"}})(e);await mn().createView(o,e,n.identity)},fi=async(e,t)=>{const a=mn().Browser.wrapSync(e),n=(await a.getPages()).find((e=>e.isActive)),o=await fin.Window.wrapSync(e).getCurrentViews();if(t.length===o.length-(n.panels??[]).length){return void(await Sa(e)).dispatch(Aa.ClosePage,{pageId:n?.pageId})}const r=fin.Platform.getCurrentSync();t.forEach((async t=>{const o=await fin.View.wrapSync(t).getParentLayout();await r.closeView(t);const{hasUnsavedChanges:i}=await(async e=>(await rt(fe)).dispatch(tt.HandlePageChanges,e))({page:{...n,layout:await o.getConfig()},identity:e,eventDetails:{type:h.ViewRemoved,viewIdentity:t}});i&&await a.updatePage({pageId:n.pageId,page:{hasUnsavedChanges:!0}})}))},Si=async(e,t)=>{const a=await(e=>Promise.all(e.map((async e=>fin.View.wrapSync(e).getInfo()))))(t),{newPageUrl:n,newTabUrl:o}=await _o(e);a.forEach((async e=>{e.url!==n&&e.url!==o&&await fin.System.openUrlWithBrowser(e.url)}))},vi=(e,t)=>{t.forEach((async t=>{const a=fin.View.wrapSync(t);await(async(e,t)=>{const{url:a}=await t.getInfo(),n={...await t.getOptions(),url:a,target:e,name:void 0};await mn().createView(n,e,t.identity)})(e,a)}))},Pi=async(e,t,a)=>{const n={newChannelId:t,selectedViews:a};(await Sa(e)).dispatch(Aa.AddToChannel,n)},Ci=async(e,t)=>{(await Sa(e)).dispatch(Aa.RemoveFromChannel,t)},Mi=async(e,t)=>{if(!e)return;const a=t.identity,n=fin.Window.wrapSync(a);switch(jt({type:"View Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e.type){case S.Back:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateBack()));await Promise.all(t)})(t.selectedViews);break;case S.Forward:await(async e=>{const t=e.map((e=>fin.View.wrapSync(e).navigateForward()));await Promise.all(t)})(t.selectedViews);break;case S.Print:await pr(t.selectedViews);break;case S.PrintAll:await n.print({content:"views",includeSelf:!1});break;case S.PrintScreen:await n.print({content:"screenshot"});break;case S.CloseViews:await fi(a,t.selectedViews);break;case S.OpenWithDefaultBrowser:await Si(a,t.selectedViews);break;case S.ReloadViews:t.selectedViews.forEach((async e=>{const t=fin.View.wrapSync(e);await t.reload()}));break;case S.NewView:await yi(a,t);break;case S.DuplicateViews:vi(a,t.selectedViews);break;case S.AddToChannel:Pi(a,e.option,t.selectedViews);break;case S.RemoveFromChannel:Ci(a,t.selectedViews);break;case S.Custom:if(e.action){const n={callerType:M.ViewTabContextMenu,windowIdentity:a,selectedViews:t.selectedViews,customData:e.action.customData};mn()._invokeCustomAction(e.action.id,n)}}},xi=(__webpack_require__(/*! title-case */ "../../node_modules/title-case/dist.es2015/index.js"),new Map([["blue",{name:"Blue",color:"#0091EB"}],["indigo",{name:"Indigo",color:"#6450FF"}],["pink",{name:"Pink",color:"#E878CF"}],["teal",{name:"Teal",color:"#24D1D1"}],["green",{name:"Green",color:"#00AF78"}],["orange",{name:"Orange",color:"#FF7D37"}],["red",{name:"Red",color:"#F94144"}],["yellow",{name:"Yellow",color:"#F9C74F"}],["gray",{name:"Gray",color:"#828788"}]]));function Ii(){return{type:ai.Label,label:_n("contextMenu.manageDesktopSignals"),data:{type:b.ManageDesktopSignals}}}function Ai(e){const t=Array.from(xi.entries()),a=e.contextGroup;return{type:"widget",config:{type:"add-to-channel",channels:[...t.map((([e,t])=>({label:t.name,data:{type:b.AddToChannel,option:e},color:t.color,checked:a===e}))),{label:"unlink",data:{type:b.AddToChannel,option:"unlink"},isNone:!0}]},label:"Link to Channel"}}let Wi="Platform";const Di=async()=>Wi;const Ti=async(e,t)=>{if(!e)return;const a=t.identity,n=await Sa(a),o=mn().Browser.wrapSync(a),r=fin.Window.wrapSync(a);if(jt({type:"Global Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0,data:{action:e.action?.id}}),await Ut(a)){const a=await(async(e,t)=>{const a=t.identity,n=mn().Browser.wrapSync(a),o=(await n.getPages()).find((e=>e.isActive)),r=pa({...a,layoutName:o.layoutContainerKey}),i=t.selectedViews;switch(e?.type){case y.Lock:await n.updatePage({pageId:o.pageId,page:{isLocked:!o.isLocked}});break;case y.AddToChanel:e.option?await Pi(a,e.option,i):null===e.option&&await Ci(a,i);break;case y.ManageDesktopSignals:await Qa(a);break;case m.NewWindow:{const e=await Uo(a);await mn().Browser.createWindow({workspacePlatform:{pages:[e],windowType:"enterprise"}});break}case y.Pin:{const{alwaysOnTop:e}=await n.openfinWindow.getOptions();await n.openfinWindow.updateOptions({alwaysOnTop:!e});break}case y.ShowHideTabs:await r.isShowingTabs()?await r.hide():await r.show();break;default:return!1}return!0})(e,t);if(a)return}switch(e.type){case m.NewWindow:{const{newPageUrl:e}=await _o(a);if(!e)throw new Error("Trying to create a new empty window without a newPageUrl set");mn().createView({target:void 0,url:e});break}case m.NewPage:await ir(a);break;case m.CloseWindow:n.dispatch(Aa.CloseBrowserWindow);break;case m.SaveWorkspace:await or(a);break;case m.SavePage:await sr(a);break;case m.SavePageAs:await cr(a);break;case m.SaveWorkspaceAs:await rr(a);break;case m.RenameWorkspace:o._openSaveModal({menuType:I.RENAME_WORKSPACE});break;case m.SwitchWorkspace:await(async(e,t)=>{const a=mn(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));a.applyWorkspace(n,{skipPrompt:!1,promptContainerWindowIdentity:e})})(a,e);break;case m.DeleteWorkspace:await lr(a,e);break;case m.Downloads:await ur(a);break;case m.Appearance:await mn().Theme.setSelectedScheme(e.scheme);break;case m.Quit:{const e=Di();await Ho(a,await e)&&fin.Platform.getCurrentSync().quit()}break;case m.OpenStorefront:(async()=>{await Ie()&&ve(Se)})();break;case m.RestoreChanges:await qo();break;case m.Print:await pr(t.selectedViews);break;case m.PrintAll:await r.print({content:"views",includeSelf:!1});break;case m.PrintScreen:await r.print({content:"screenshot"});break;case m.Custom:if(e.action){const t={callerType:M.GlobalContextMenu,windowIdentity:a,customData:e.action.customData};mn()._invokeCustomAction(e.action.id,t)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}},Bi=async(e,t,a)=>{const n=mn().Browser.wrapSync(t.identity),o=fin.Window.wrapSync(t.identity),r=await Sa(t.identity),i=await Ut();switch(e&&jt({type:"Page Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e?.type){case b.Save:await sr(t.identity,t.pageId);break;case b.SaveAs:await cr(t.identity,t.pageId);break;case b.NewPage:await ir(t.identity);break;case b.DeletePage:await(async(e,t)=>{const a=mn(),n=a.Browser.wrapSync(e),o=(await a.Storage.getPages()).find((e=>e.pageId===t));o&&await Ko(e,o.title)&&(await a.Storage.deletePage(o.pageId),await n.removePage(t),Lo({message:_n("enterpriseSuccessIndicator.supertabDeleted"),parentBrowserName:e.name,secondaryMessage:_n("enterpriseSuccessIndicator.supertabHasBeenDeleted",{title:o.title})}))})(t.identity,t.pageId);break;case b.Rename:if(await Ut(t.identity)){await n.setActivePage(t.pageId);const e=await Fr();await e.dispatch("open",{parentIdentity:t.identity,responseIdentity:fe,type:Nr.RenameSupertab,anchorBehavior:Ei.Center,x:a.left+a.width/2-164,y:a.bottom-8,payload:{pageId:t.pageId}})}else await n._openSaveModal({menuType:I.RENAME_PAGE,id:t.pageId});break;case b.Duplicate:r.dispatch(Aa.DuplicatePage,t.pageId);break;case b.Close:i?await(async(e,t)=>{const a=mn().Browser.wrapSync(e),n=await a.getPages();for(const o of n)if(o.pageId===t){await a.removePage(o.pageId),await a._trackRemovedTab({identity:e,page:o});break}})(t.identity,t.pageId):r.dispatch(Aa.ClosePage,{pageId:t.pageId});break;case b.Custom:if(e.action){const a={callerType:M.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};mn()._invokeCustomAction(e.action.id,a)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`);break;case b.Refresh:await(async(e,t)=>{const a=mn(),n=a.Browser.wrapSync(e),o=(await n.getPages()).find((e=>t?e.pageId===t:e.isActive));o?.layout?.content&&Mn(o.layout.content).forEach((async e=>{(await fin.View.wrap({uuid:a.identity.uuid,name:e.name})).reload()}))})(t.identity,t.pageId);break;case b.CloseOthers:await(async(e,t)=>{const a=mn().Browser.wrapSync(e),n=await a.getPages();for(const o of n)o.pageId!==t&&(await a.removePage(o.pageId),await a._trackRemovedTab({identity:e,page:o}))})(t.identity,t.pageId);break;case b.SaveWorkspaceAs:await rr(t.identity);break;case b.Print:{const e=await n._getLayoutsWithSelectedViews(),{selectedViews:a}=e.find((e=>e.pageId===t.pageId));await pr(a);break}case b.PrintAll:await n.setActivePage(t.pageId),await o.print({content:"views",includeSelf:!1});break;case b.PrintScreen:await n.setActivePage(t.pageId),await o.print({content:"screenshot"});break;case b.AddToChannel:await n.updatePage({pageId:t.pageId,page:{contextGroup:"unlink"===e.option?null:e.option}});break;case b.ManageDesktopSignals:await Qa(t.identity)}},Ri=async(e,t)=>{if(e?.type){const a=t.identity;switch(e.type){case P.SavePage:await sr(a);break;case P.SaveWorkspace:await or(a);break;case P.SavePageAs:await cr(a);break;case P.SaveWorkspaceAs:await rr(a);break;case P.Custom:if(e.action){const a={callerType:M.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};mn()._invokeCustomAction(e.action.id,a)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}}};var Ei;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(Ei||(Ei={}));const Fi=async(e,t,a,n)=>{const{x:o,y:r,identity:i,template:s,callback:c}=e,l=await Ut(i),{data:d}=l?await oi({x:o,y:r,template:s},a,n,fin.Window.wrapSync(i)):await function(e,t){if(!W)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:o,y:r,template:s},fin.Window.wrapSync(i));c(d,e)};async function Vi(e,t){const a=ha(),n=await Ut(e.identity);n&&ka(a);const o=n?await(async({identity:e,selectedViews:t})=>{const a=mn(),n=a.Browser.wrapSync(e),o=(await n.getPages()).find((e=>e.isActive)),r=await a.Storage.getPage(o.pageId),i=An(o.layout.content)>1,s=await Ut(e),c=await a.Theme.getThemes(),l=c[0]&&"palettes"in c[0]||!c[0]||0===c.length,d={...di(s),enabled:!!r},u={...ui(s),enabled:i};return[li(),pi(!0,s),{type:ai.Separator},d,u,{type:ai.Separator},{type:ai.Label,label:_n("contextMenu.manageDesktopSignals"),data:{type:m.ManageDesktopSignals}},{type:ai.Separator},...l?[{type:ai.Submenu,label:hi().label,submenu:await ki()}]:[],{type:ai.Separator},si(),{type:ai.Separator},ci(!0)]})({identity:e.identity,selectedViews:e.selectedViews}):await bi(e.identity,e.selectedViews),r=await Di();n||(o.find((e=>e.data?.type===m.Quit)).label=`Quit ${r}`);const{rect:i,...s}=e,{x:c,y:l}=n?{x:i.left+i.width,y:i.bottom}:e,d={...s,x:c,y:l,template:o,callback:Ti};ma(a),await this.openGlobalContextMenu(d,t)}async function Ni(e,t){const a={...e,callback:Mi};await this.openViewTabContextMenu(a,t)}async function Li(e,t){const a=ha(),n=await Ut(e.identity);n&&ka(a);const o=await(async(e,t,a)=>{const n=await mn().Storage.getPage(e),o=(await Xn()).find((t=>t.pageId===e)),r=An(o.layout.content)>1,{workspacePlatform:i}=await ye(t).getOptions(),s=!(i.isLocked||i.preventPageClose||o.closeButton?.disabled||o.closeButton?.hidden),c=[{type:ai.Label,label:_n("enterpriseContextMenu.newTab"),data:{type:b.NewPage}},ri,Ai(o),Ii(),ri,{type:ai.Label,label:_n("reload"),data:{type:b.Refresh}},{type:ai.Label,label:_n("enterpriseContextMenu.duplicate"),data:{type:b.Duplicate},enabled:!i.isLocked},await ii(),ri,{type:ai.Label,label:_n(r?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:b.Close},enabled:s}],l=[{type:ai.Label,label:_n("enterpriseContextMenu.newTab"),data:{type:b.NewPage}},ri,Ai(o),Ii(),ri,{type:ai.Label,label:_n("enterpriseSaveModal.renameSupertab"),data:{type:b.Rename},enabled:!i.isLocked&&!!n&&r},{type:ai.Label,label:_n("enterpriseContextMenu.duplicate"),data:{type:b.Duplicate},enabled:!i.isLocked},ri,{type:ai.Label,label:_n("enterpriseContextMenu.saveSupertab"),data:{type:b.Save},enabled:r&&!!n},{type:ai.Label,label:_n("enterpriseContextMenu.saveSupertabAs"),data:{type:b.SaveAs},enabled:r},ri,{type:ai.Label,label:_n("enterpriseContextMenu.deleteSupertab"),data:{type:b.DeletePage},enabled:!!n},ri,{type:ai.Label,label:_n(r?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:b.Close},enabled:s}],d=[{type:ai.Label,label:_n("contextMenu.savePage"),data:{type:b.Save},enabled:!!n},{type:ai.Label,label:_n("saveMenu.savePageAs"),data:{type:b.SaveAs},enabled:!0},{type:ai.Label,label:"Save Workspace As",data:{type:b.SaveWorkspaceAs}},{type:ai.Label,label:"Refresh",data:{type:b.Refresh}},ri,{type:ai.Label,label:_n("saveModal.renamePage"),data:{type:b.Rename},enabled:!!n},{type:ai.Label,label:_n("contextMenu.duplicatePage"),data:{type:b.Duplicate},enabled:!i.isLocked},ri,{type:ai.Label,label:_n("saveModal.closePage"),data:{type:b.Close},enabled:s}];return a?r?l:c:d})(e.pageId,e.identity,n),r={...e,template:o,callback:(t,a)=>{Bi(t,a,e.rect)}};ma(a),await this.openPageTabContextMenu(r,t)}async function _i(e,t){const a=await(async e=>{const t=mn(),a=await t.getCurrentWorkspace({skipSnapshotUpdate:!0}),n=(await t.Storage.getWorkspacesMetadata()).find((e=>e.workspaceId===a.workspaceId)),o=await t.Storage.getPage(e);return[{type:ai.Label,label:_n("contextMenu.saveWorkspace"),enabled:!!n,data:{type:P.SaveWorkspace}},{type:ai.Label,label:_n("saveMenu.saveWorkspaceAs"),data:{type:P.SaveWorkspaceAs}},{type:ai.Separator,data:void 0},{type:ai.Label,enabled:!!o,label:_n("contextMenu.savePage"),data:{type:P.SavePage}},{type:ai.Label,label:_n("saveMenu.savePageAs"),data:{type:P.SavePageAs}}]})(e.pageId),n={...e,template:a,callback:Ri};await this.openSaveButtonContextMenu(n,t)}const Ui="dock-companion-updates",Oi=async()=>(await fin.Application.getCurrentSync().getChildWindows()).find((e=>e.identity.name===me.DockCompanion)),Gi=je(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),Hi=async()=>{const e=mn(),t=await async function(){const e=await Mr();await Promise.all(e.map((async e=>{await Ir(e.identity)})));const t=Array.from(Sr.values()).sort(((e,t)=>t.lastFocusedTime-e.lastFocusedTime)),a=t.find((e=>e.isVisible));if(a){const e=fin.Window.wrapSync(a.identity);return await e.focus(),a.identity}const n=t[0];if(n){const e=fin.Window.wrapSync(n.identity);return await e.restore(),await e.focus(),n.identity}return xr()}(),a=e.Browser.wrapSync(t),n=(await a.getPages()).at(-1),o=Mn(n.layout.content);if(1===o.length&&Ht(o[0].url))await a.setActivePage(n.pageId);else{const e=await Uo(t),{newPageUrl:n}=await _o();await a._addDefaultPage({identity:a.identity,page:e,newPageUrl:n||void 0})}(await Sa(t)).dispatch(Aa.FocusAndExpandSearchInternal)},$i="dock-provider-configs",Ki=T&&W&&new yt.Dexie(It("dock-provider-configs"));async function zi(e){if(!Ki)throw new Error("Unable to get Dock provider config - IndexedDB not supported");try{return await Ki[$i].get(e)}catch(e){return void console.warn("Failed to retrieve Dock provider config from IndexedDb",e)}}async function Ji(e){if(!Ki)throw new Error("Unable to save Dock provider config - IndexedDb not supported");await Ki[$i].put(e,e.id)}Ki&&Ki.version(.1).stores({[$i]:""});const Zi="workspaces",qi=T&&W&&Wt("openfin-workspace-platform-workspaces",Zi);async function ji(e){if(!qi)throw new Error("Unable to get workspace - IndexDB not supported");const t=await qi[Zi].get(e);return t&&(t.workspaceId=e.toString(),t.title=t.title||t.workspaceId),t}async function Qi(e){if(!qi)throw new Error("Unable to get workspaces - IndexDB not supported");const t=await qi[Zi].toCollection().keys(),a=(await Promise.all(t.map((e=>ji(e.toString()))))).filter((e=>!!e));return e?a.filter((t=>Lr(t.title,e))):a}async function Yi({workspace:e}){if(!qi)throw new Error("Unable to create workspace - IndexDB not supported");const t=(await Qi()).find((t=>t.title===e.title));if(t&&t.workspaceId!==e.workspaceId)throw new Error(`Workspace with title '${e.title}' already exists.`);await qi[Zi].put(e,e.workspaceId)}async function Xi(e){if(!qi)throw new Error("Unable to delete workspace - IndexDB not supported");await qi[Zi].delete(e)}async function es({workspaceId:e,workspace:t}){if(!qi)throw new Error("Unable to update workspace - IndexDB not supported");if(!await ji(e))throw new Error("workspace not found");await Yi({workspace:t}),e!==t.workspaceId&&await Xi(e)}const ts=e=>{const t=e.layout,a=t.content?Mn(t.content):[],n=a.length;return n>1?{...e,singleViewName:null}:1===n?{...e,singleViewName:a[0].name}:void 0},as=async(e,t,a)=>{const n=await mn().Browser.getAllAttachedPages(),o=new Set(n.map((e=>e.title)).filter((e=>!!e))),r=new Set(n.map((e=>e.pageId)).filter((e=>!!e))),i=t?.defaultPageOptions,s="enterprise"===a?.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType,c=await(async(e,t,a)=>{if(a)return oe();const n=t?.workspacePlatform?.newTabUrl;if(n)return n;const o=e?.defaultWindowOptions?.workspacePlatform?.newTabUrl;return o||void 0})(t,a,s);return Promise.all(e.map((async e=>{if("reparent"===e.multiInstanceViewBehavior)return{...e,layoutContainerKey:na()};((e,t)=>{e.pageId||=na(),t.has(e.pageId)&&(console.warn("PageID collision detected. All Page IDs should be unique. A random new pageId will be generated"),e.pageId=na()),t.add(e.pageId)})(e,r),s||(e.title=Yn(e.title,Array.from(o.keys()))),o.add(e.title),e.panels?.reduce(((e,t)=>{const a=Object.values(g);if(!a.includes(t.position))throw new Error(`Encountered a panel with unsupported position "${t.position}". Supported positions are: ${a.toString()}`);if(1==e[t.position])throw new Error(`Found more than 1 panel at position: ${t.position}. Only 1 panel at a given position is currently supported.`);return{...e,[t.position]:e[t.position]+1}}),{[g.Left]:0,[g.Right]:0,[g.Top]:0,[g.Bottom]:0});const a="panels"in e?e.panels:i?.panels;let n=(l=e.layout,d=t?.defaultViewOptions,fn({...l},(e=>Sn(e,d))));var l,d;c&&!n?.settings?.newTabButton&&(n={...n,settings:{...n?.settings,newTabButton:{url:c}}});return{...i,...e,panels:a&&await zn(a),layoutContainerKey:na(),layout:n,isLayoutCreated:!1}})))},ns=async(e,t)=>{try{await fin.Platform.getCurrentSync().createView({name:e,url:t,target:fin.me.identity,bounds:{top:0,left:0,width:0,height:0}},fin.me.identity)}catch(e){}},os=e=>{const t=e.name===me.Home,a=e.name?.startsWith(me.HomeInternal),n=e.name?.startsWith(me.BrowserMenu)||e.name?.startsWith(me.BrowserSaveMenu)||e.name?.startsWith(me.DockSaveWorkspaceMenu);return!t&&!a&&!n};const rs=e=>JSON.parse(JSON.stringify(e));async function is(e){return e?"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==":(await Y()).displayViewTabDefaultIcon?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":"data:image/svg+xml,%3Csvg%20style%3D%22background-color%3A%237D808A%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%2010%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M4.64648%200.874962C4.84174%200.6797%205.15833%200.6797%205.35359%200.874962L9.12482%204.6462C9.32009%204.84146%209.32009%205.15804%209.12482%205.3533L5.35359%209.12454C5.15833%209.3198%204.84174%209.3198%204.64648%209.12454L0.875245%205.3533C0.679982%205.15804%200.679982%204.84146%200.875245%204.6462L4.64648%200.874962ZM5.00003%201.93562L1.9359%204.99975L5.00003%208.06388L8.06416%204.99975L5.00003%201.93562Z%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E"}const ss={dimensions:{borderWidth:3,headerHeight:30}};async function cs(e,t,a){let n=e;const o="enterprise"===n.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType;if(n.layout&&!n.workspacePlatform?.pages?.length){const e=await mo(),a={...await da(e,n.layout),isActive:!0};n.workspacePlatform||={},n.workspacePlatform.pages=await as([a],t,n)}t?.browserIconSize&&(n.workspacePlatform||={},n.workspacePlatform.browserIconSize=t.browserIconSize);const r=a?.themes?.[0];if(n.workspacePlatform?.pages?.length){const e=await as(n.workspacePlatform.pages,t,n),i=e,s=(e=>{if(!e)return;let t=e.find((e=>e.isActive));return!t&&e.length>0&&(e[0].isActive=!0,t=e[0]),t})(i);if(i.forEach((e=>{e.pageId!==s?.pageId&&(e.isActive=!1)})),await Jn(i),n.workspacePlatform.pages=e,n=ea({},await(async e=>({contextMenuOptions:{enabled:!1},experimental:{showFavicons:!0,defaultFaviconUrl:await is(e)},viewVisibility:{showViewsOnSplitterDrag:{enabled:!0},showViewsOnWindowResize:{enabled:!0}}}))(o),t?.defaultWindowOptions,n,await(async e=>({backgroundThrottling:!0,url:await re(e,!0),contextMenu:!0,closeOnLastViewRemoved:!1,permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}}))(o)),s.layout=ea(s.layout,ss),async function(e){if(e.icon||e.taskbarIcon){const t=fin.Application.getCurrentSync(),a=await(await t.getWindow()).getOptions();e.taskbarIconGroup||=a.taskbarIconGroup||fin.me.identity.uuid}if(e.workspacePlatform.icon)if("object"==typeof e.workspacePlatform.icon){const t=window.matchMedia("(prefers-color-scheme: dark)");e.icon=t.matches?e.workspacePlatform.icon.dark:e.workspacePlatform.icon.light}else e.icon=e.workspacePlatform.icon}(n),!n.backgroundColor&&r)if("palette"in r)n.backgroundColor=r?.palette?.background2||r?.palette?.backgroundPrimary;else{const e=a.selectedScheme===k.Dark||a.selectedScheme===k.System&&window.matchMedia("(prefers-color-scheme: dark)")?r?.palettes.dark:r?.palettes.light;n.backgroundColor=e?.background2||e?.backgroundPrimary}n=De(n,!0);const c=await re(o,!0);if(c&&(n.url=c),n.layout=s.layout,n.layoutSnapshot=((e,t)=>({layouts:e.reduce(((e,a)=>{if(!a.isActive){if(!t)return e;if(!ts(a).singleViewName)return e}return e[a.layoutContainerKey]=a.layout,e}),{}),pages:e}))(n.workspacePlatform.pages,o),n.workspacePlatform.windowType=n.workspacePlatform.windowType??C.Browser,o){const e=await oe();n.workspacePlatform.newPageUrl=e,n.workspacePlatform.newTabUrl=e,n.layout&&(n.layout.dimensions.borderWidth=4,n.layout.dimensions.headerHeight=28),n.name=n.name||`${me.BrowserWindow}-${na()}`,(async e=>{const t=await ne(),a=me.BrowserAddressSearchPrefix+e.name,n=t+z.BrowserPopupMenuAddressSearchResultsView,o=[],r=ns(a,n);o.push(r);const i=me.AICompanionPrefix+e.name,{url:s,enabled:c}=Kn();if(c){const e=ns(i,s);o.push(e)}await Promise.all(o)})(n);const{enabled:t}=Kn();n.workspacePlatform.isAiEnabled=t,n.minWidth=Math.max(654,n.minWidth??0),n.minHeight=Math.max(488,n.minHeight??0)}else n.minWidth=Math.max(232,n.minWidth??0),function(e){const t=e.workspacePlatform?.viewTabDimensions,a=e.workspacePlatform?.pageTabDimensions,n=/^[0-9]+(px|%)$/;if(t){if(t.minWidth&&!n.test(t.minWidth))throw new Error(`Provided viewTabDimensions.min value "${t.minWidth}" is not in a supported format.`);if(t.maxWidth&&!n.test(t.maxWidth))throw new Error(`Provided viewTabDimensions.max value "${t.maxWidth}" is not in a supported format.`)}if(a){if(a.minWidth&&!n.test(a.minWidth))throw new Error(`Provided pageTabDimensions.min value "${a.minWidth}" is not in a supported format.`);if(a.maxWidth&&!n.test(a.maxWidth))throw new Error(`Provided pageTabDimensions.max value "${a.maxWidth}" is not in a supported format.`)}}(n)}return n.cornerRounding&&delete n.cornerRounding,n.name||n.layoutSnapshot?n.contextMenuOptions?.template?.length>0?n.contextMenuOptions.template=n.contextMenuOptions.template.filter((e=>"print"!==e)):n.contextMenuOptions={template:[],enabled:!1}:n.name=`${me.ClassicWindow}-${na()}`,n.workspacePlatform&&a&&(n.workspacePlatform._themeData=a),n}const ls=async(e,t)=>{const a={uuid:t.uuid,name:t.name};await Ho(a,e.title??await Di(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()},ds=async(e,t)=>{const a=mn(),n=await a.Browser.getLastFocusedWindow();if(!n)return;const o=a.Browser.wrapSync(n),{title:r,description:i}=e,s=await zo({title:r,description:i,identity:o.identity});s&&o._sendUpdateVersionModalResponse({identity:t,response:s})};async function us(e,t,a){const n=e.manifestUrl?await t({manifestUrl:e.manifestUrl},a):void 0;if(n?.interop&&e.interop){const t={...e,...n,interop:e.interop};return delete t.manifestUrl,t}return e}const ps=e=>{const t=rs(e);return t._internalWorkspaceData?.browserNavigationButtons&&(t.workspacePlatform={...t.workspacePlatform,browserNavigationButtons:t._internalWorkspaceData.browserNavigationButtons},delete t._internalWorkspaceData.browserNavigationButtons),t},ws=e=>{const t=rs(e);return t.workspacePlatform&&(t._internalWorkspaceData={...t._internalWorkspaceData,...t.workspacePlatform},delete t.workspacePlatform),t},gs={reload:[{keys:"Ctrl+R",preventDefault:!0}],back:[{keys:"Alt+Left",preventDefault:!0}],forward:[{keys:"Alt+Right",preventDefault:!0}]},hs={reload:[{keys:"Cmd+R",preventDefault:!0}],back:[{keys:"Cmd+[",preventDefault:!0},{keys:"Cmd+Left",preventDefault:!0}],forward:[{keys:"Cmd+]",preventDefault:!0},{keys:"Cmd+Right",preventDefault:!0}]},ms=async()=>await Xr()?gs:hs,ks=(e,t)=>{const a=fin.View.wrapSync(e);if(!t)return;const n=e=>{(async(e,t,a)=>{if("keyDown"!==a.inputType)return;const n=await(async e=>{const t=await e.getCurrentWindow(),a=await t.getOptions(),n=a.workspacePlatform?.navigationButtons;return n.enabled&&!n.hotkeysDisabled})(e),o=await Xr();if(n){if(t.reload){const n=a.ctrlKey&&!a.altKey&&!a.metaKey&&!a.shiftKey&&"r"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"r"===a.key;(o?n:r)&&t?.reload&&(e.reload(),jt({type:"View",action:"Reload",value:e.identity.name}))}if(t.back){const n=!a.ctrlKey&&a.altKey&&!a.metaKey&&!a.shiftKey&&"ArrowLeft"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"ArrowLeft"===a.key,i=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"["===a.key;(o?n:r||i)&&t?.back&&(e.navigateBack(),jt({type:"View",action:"Back",value:e.identity.name}))}if(t.forward){const n=!a.ctrlKey&&a.altKey&&!a.metaKey&&!a.shiftKey&&"ArrowRight"===a.key,r=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"ArrowRight"===a.key,i=!a.ctrlKey&&!a.altKey&&a.metaKey&&!a.shiftKey&&"]"===a.key;(o?n:r||i)&&t?.forward&&(e.navigateForward(),jt({type:"View",action:"Forward",value:e.identity.name}))}}})(a,t,e)};a.addListener("hotkey",n),a.once("destroyed",(()=>{a.removeListener("hotkey",n)}))},bs=(e,t)=>rs(e).map((e=>("componentState"in e?e.componentState=t(e.componentState):"content"in e&&(e.content=bs(e.content,t)),e))),ys=e=>{if(e){const t=rs(e);return t.content&&(t.content=bs(t.content,ps)),t}return e},fs=e=>{if(e){const t=rs(e);return t.content&&(t.content=bs(t.content,ws)),t}return e};async function Ss({app:e,target:t}){const a=fin.Platform.getCurrentSync();switch(e.manifestType){case l.Snapshot:return a.applySnapshot(e.manifest);case l.View:return async function(e,t){const a=fin.Platform.getCurrentSync();if("view"===t.entityType){const a=fin.View.wrapSync(t),n=await a.getParentLayout();return await n.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),a.destroy()}return a.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case l.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}let vs;const Ps=()=>{if(!vs){const e=je(`${"undefined"!=typeof fin&&fin.me.identity.uuid}-enterprise-app-directory`);vs=e()}return vs};async function Cs(e){if(!await Ut(e.identity))return[];return(await Ps()).dispatch(Ca.GetApps,e.req)}async function Ms(e){if(!await Ut(e.identity))return[];return(await Ps()).dispatch(Ca.GetSearchProviders,e)}async function xs(e){return(await Ps()).dispatch(Ca.GetCuratedContent,e)}async function Is(e){return(await Ps()).dispatch(Ca.GetRecentlyVisited,e)}async function As(e){const t=(await Ce()).map((async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await Sa(e)).dispatch(Aa.UpdatePagesWindowOptions))(e.identity)}));return await Promise.all(t),e?e():ca()}let Ws=[];const Ds=()=>Ws;async function Ts(e){const t=e=>{if(!e.includes("#")&&!e.includes("rgb")&&!e.includes("hsl"))throw new Error("Background primary color is not the right format.")};e?.forEach((e=>{"palette"in e&&t(e.palette.backgroundPrimary),"palettes"in e&&(t(e.palettes.dark.backgroundPrimary),t(e.palettes.light.backgroundPrimary))}));const a=((e,t)=>{if(!e||!e[0]){const{dark:e,light:a}=dt[0].palettes;return rn.setPalettes({dark:e,light:a},t),dt}{const a=e[0];if("default"in a&&a.default&&(a.default,rn.setThemeDefaultScheme(a.default)),"palette"in a){const{palette:n}=a,o={...lt,...n};return rn.setPalettes({dark:o,light:o},t),a.palette=o,e}if("palettes"in a){const{dark:n,light:o}=a.palettes,r={...lt,...n},i={...ct,...o};return rn.setPalettes({dark:r,light:i},t),a.palettes={dark:r,light:i},e}}})(e,await Xr());Ws=a}const Bs=(e,t)=>a=>{const n=null!==e;return class extends a{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e,analytics:{isSupported:!0}}),this.detachPagesFromWindow=lo,this.getAllAttachedPages=Xn,this.getPagesForWindow=po,this.getPageForWindow=wo,this.markUnsavedPagesAsSavedInternal=Po,this.launchApp=Ss,this.savePage=io,this.saveWorkspace=er,this.createSavedPageInternal=no,this.updateSavedPageInternal=ro,this.deleteSavedPageInternal=oo,this.reorderPagesForWindow=go,this.getUniquePageTitle=mo,this.updatePageForWindow=co,this.getLastFocusedBrowserWindow=Cr,this.getThemes=Ds,this.invokeCustomActionInternal=Tr,this.requestQuitPlatformDialogInternal=ls,this.getCurrentWorkspace=Yo,this.setActiveWorkspace=jo,this.getLanguageResourcesInternal=br,this.getPageByViewIdentity=async e=>{const t=await fin.Platform.Layout.getLayoutByViewIdentity(e),a=t.identity;if(!("layoutName"in a))throw new Error("Failed to get layout's identity");const n=await mn().Browser.wrapSync(t.identity).getPages(),o=n.findIndex((e=>e.layoutName===a.layoutName));if(-1===o)throw new Error("Failed to get page's index");return{windowIdentity:{name:t.identity.name,uuid:t.identity.uuid},page:n[o],pageIndex:o}},this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspacesMetadata=this.getSavedWorkspacesMetadata.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.getDockProviderConfig=this.getDockProviderConfig.bind(this),this.saveDockProviderConfig=this.saveDockProviderConfig.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.restoreLastSavedWorkspaceInternal=this.restoreLastSavedWorkspaceInternal.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this),this.getSelectedScheme=this.getSelectedScheme.bind(this),this.setSelectedScheme=this.setSelectedScheme.bind(this),this.analyticsInternal=this.analyticsInternal.bind(this),this.handleAnalytics=this.handleAnalytics.bind(this),this.getLanguage=this.getLanguage.bind(this),this.setLanguage=this.setLanguage.bind(this),this.handleSaveModalOnPageClose=this.handleSaveModalOnPageClose.bind(this),this.shouldPageClose=this.shouldPageClose.bind(this),this.shouldWindowClose=this.shouldWindowClose.bind(this),this.handlePagesAndWindowClose=this.handlePagesAndWindowClose.bind(this),this.setActivePage=this.setActivePage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.copyPage=this.copyPage.bind(this),this.addPage=this.addPage.bind(this),this.addDefaultPage=this.addDefaultPage.bind(this),this.markUnsavedPagesAsSavedInternal=this.markUnsavedPagesAsSavedInternal.bind(this),this.trackRemovedTabInternal=this.trackRemovedTabInternal.bind(this),this.restoreRemovedTabInternal=this.restoreRemovedTabInternal.bind(this),this.trackVisitedSiteInternal=this.trackVisitedSiteInternal.bind(this),this.getRecentlyVisitedSitesInternal=this.getRecentlyVisitedSitesInternal.bind(this),this.getFrequentlyVisitedSitesInternal=this.getFrequentlyVisitedSitesInternal.bind(this),this.searchSitesInternal=this.searchSitesInternal.bind(this),this.getSearchProvidersInternal=this.getSearchProvidersInternal.bind(this),this.getCuratedContentInternal=this.getCuratedContentInternal.bind(this),this.handleRequestNavigationInternal=this.handleRequestNavigationInternal.bind(this),this.refreshBookmarksInternal=this.refreshBookmarksInternal.bind(this),this.launchBookmarkInternal=this.launchBookmarkInternal.bind(this),this.getNotificationsConfig=this.getNotificationsConfig.bind(this),this.updateDockFavoritesInternal=this.updateDockFavoritesInternal.bind(this),this.updateContentMenuInternal=this.updateContentMenuInternal.bind(this),this.launchDockEntryInternal=this.launchDockEntryInternal.bind(this),this.setDockFavoritesOrderInternal=this.setDockFavoritesOrderInternal.bind(this),this.navigateContentMenuInternal=this.navigateContentMenuInternal.bind(this),this.setDefaultDockButtonsOrderInternal=this.setDefaultDockButtonsOrderInternal.bind(this),this.getDockWorkspacesContextMenuInternal=this.getDockWorkspacesContextMenuInternal.bind(this),this.handleDockWorkspacesMenuResponseInternal=this.handleDockWorkspacesMenuResponseInternal.bind(this),this.removeDockFavoriteInternal=this.removeDockFavoriteInternal.bind(this),this.addDockFavoriteInternal=this.addDockFavoriteInternal.bind(this),this.focusAndExpandSearchInternal=this.focusAndExpandSearchInternal.bind(this),this.sendUpdateVersionModalResponseInternal=this.sendUpdateVersionModalResponseInternal.bind(this),this.requestQuitPlatformDialogInternal=ls.bind(this),this.showUpdateVersionModalInternal=ds.bind(this)}async applyWorkspace(...e){return Zo.apply(this,e)}async restoreLastSavedWorkspaceInternal(...e){return qo.apply(this,e)}async getSnapshot(){const e=n?await As((async()=>ca(await super.getSnapshot(void 0,fin.me.identity)))):await ca(await super.getSnapshot(void 0,fin.me.identity));let t={...e,windows:e.windows.filter(os).map(sa)};return t=(e=>{const t=rs(e);return t.windows.forEach((e=>{e.layout&&(e.layout=ys(e.layout)),e.workspacePlatform?.pages?.forEach((e=>{e?.layout&&(e.layout=ys(e.layout))}))})),t})(t),t}async getViewSnapshot(e){let t=await super.getViewSnapshot(e);return t=ps(t),t}async applySnapshot({snapshot:e,options:t}){let a=e;"string"==typeof a&&(a=await super.fetchManifest({manifestUrl:a},fin.me.identity));const o=function(e){for(const t of e.windows)if(t.workspacePlatform?.pages?.length)return!0;return!1}(a);if(!n&&o)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return a=(e=>{const t=rs(e);return t.windows.forEach((e=>{e.layout=fs(e.layout),e.workspacePlatform?.pages?.forEach((e=>{e.layout=fs(e.layout)}))})),t})(a),super.applySnapshot({snapshot:a,options:t})}async createWindow(t,a){if(n&&"tearout"===t.reason){const e=await fin.Window.wrapSync(a).getOptions(),n=e.workspacePlatform?.windowType;t.taskbarIconGroup=e.taskbarIconGroup,n&&(t.workspacePlatform||={},t.workspacePlatform.windowType=e.workspacePlatform.windowType,n===C.Platform&&(t.url=e.url))}if(!n||t.workspacePlatform?.windowType===C.Platform){const e=await super.createWindow(t,a);return jt({type:"Window",action:"Open Window",value:e.identity.name,data:{uuid:e.identity.uuid}}),e}var o;o={allowed:!0},zt||(zt=!0,Kt($t.Browser,o)),((e=[])=>{const t=e.filter((e=>e.type!==v.Custom)),a=new Set,n=[];for(const e of t)a.has(e.type)&&n.push(e.type),a.add(e.type);if(n.length>0){const e=n.join(", ");throw new Error(`Encountered a duplicate "${e}" toolbar button. No more than one instance of a button type may be provided.`)}})(t.workspacePlatform?.toolbarOptions?.buttons);let r=(e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...a})=>({...a,workspacePlatform:{pages:t||e||null}}))(e))(t);r=await cs(r,e,{themes:Ds(),selectedScheme:this.getSelectedScheme()}),r=await(async e=>{const t=await fin.System.getMonitorInfo();let a=t.primaryMonitor;const n=e.defaultLeft,o=e.defaultTop;t.nonPrimaryMonitors.forEach((e=>{const{top:t,bottom:r,left:i,right:s}=e.availableRect;n>=i&&n<=s&&o>=t&&o<=r&&(a=e)}));const r=a.availableRect.bottom-a.availableRect.top,i=a.availableRect.right-a.availableRect.left;return e.defaultHeight=Math.min(e.defaultHeight||800,r),e.defaultWidth=Math.min(e.defaultWidth||800,i),e})(r);const i=await(e=>async(t,a)=>{let n=!1;const o=await e(t,a);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await o.addListener("show-requested",(async()=>{if(n)return;const e=await o.getOptions();await o.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),n=!0})),o):o})(((e,t)=>super.createWindow(e,t)))(r,a);return jt({type:"Window",action:"Open Window",value:i.identity.name,data:{uuid:i.identity.uuid}}),i}async createView(t,a){t.opts=bn(t.opts,e?.defaultViewOptions),t.opts=await us(t.opts,this.fetchManifest,a),t.opts=await(async e=>{const t=rs(e),a=t.workspacePlatform?.browserNavigationButtons;if(a){const e=Object.keys(a);for(const n of e)if(a[n]){const e=(await ms())[n];t.hotkeys?t.hotkeys.push(...e):t.hotkeys=[...e]}}return t})(t.opts),t.opts=ws(t.opts);const n=await super.createView(t,a);return ks(n.identity,t.opts._internalWorkspaceData?.browserNavigationButtons),n}async replaceView(t,a){return t.opts.newView=await bn(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await us(t.opts.newView,this.fetchManifest,a),super.replaceView(t,a)}async replaceLayout(e,t){return await Ut(t)||delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async getSavedPage(...e){return $r.apply(this,e)}async getSavedPages(...e){return Kr.apply(this,e)}async createSavedPage(...e){return zr.apply(this,e)}async deleteSavedPage(...e){return Jr.apply(this,e)}async updateSavedPage(...e){return Zr.apply(this,e)}async getSavedWorkspace(...e){return ji.apply(this,e)}async getSavedWorkspaces(...e){return Qi.apply(this,e)}async getSavedWorkspacesMetadata(...e){return(await this.getSavedWorkspaces(...e)).map((e=>({workspaceId:e.workspaceId,title:e.title})))}async createSavedWorkspace(...e){return Yi.apply(this,e)}async deleteSavedWorkspace(...e){return Xi.apply(this,e)}async updateSavedWorkspace(...e){return es.apply(this,e)}async getDockProviderConfig(...e){return zi.apply(this,e)}async saveDockProviderConfig(...e){return Ji.apply(this,e)}async attachPagesToWindow(t){const a=await as(t.pages,e);await Jn(a),await so({...t,pages:a})}async addPage(e){const t=await Ut(e.identity),a=await rt(e.identity),{page:n,insertionIndex:o}=e;n?.title||t||(n.title=await a.dispatch(tt.GetUniquePageTitle,void 0));const r=(await this.getAllAttachedPages()).find((e=>e.pageId===n.pageId||e.title===n.title));if(r){if(r.pageId===n.pageId)throw new Error(`page with id ${n.pageId} is already attached to a browser window ${r.parentIdentity.name}`);if(!t)throw new Error(`addPage title collision, page with title ${n.title} already exists, conflicting page id: ${r.pageId} with title ${r.title}`)}const i={identity:e.identity,pages:[{...n,multiInstanceViewBehavior:e.multiInstanceViewBehavior||"duplicate"}],insertionIndex:o};await this.attachPagesToWindow(i)}async addDefaultPage(e){await this.addPage(e),await this.setActivePage({identity:e.identity,pageId:e.page.pageId})}async setActivePage(...e){return uo.apply(this,e)}async openGlobalContextMenuInternal(...e){return Vi.apply(this,e)}async openGlobalContextMenu(...e){return Fi.apply(this,[...e,Nr.GlobalMenu,Ei.BottomRight])}async openViewTabContextMenuInternal(...e){return Ni.apply(this,e)}async openViewTabContextMenu(...e){return Fi.apply(this,[...e,Nr.ContextMenu])}async openPageTabContextMenuInternal(...e){return Li.apply(this,e)}async openPageTabContextMenu(...e){return Fi.apply(this,[...e,Nr.ContextMenu])}async openSaveButtonContextMenu(...e){return Fi.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return _i.apply(this,e)}getSelectedScheme(...e){return gn.apply(this,e)}async setSelectedScheme(...e){return wn.apply(this,e)}async handlePageChanges(...e){return vo.apply(this,e)}async analyticsInternal(...e){return Ro.apply(this,e)}async handleAnalytics(...e){}async handleSaveModalOnPageClose(...e){return ko.apply(this,e)}async shouldPageClose(...e){return bo.apply(this,e)}async shouldWindowClose(...e){return yo.apply(this,e)}handlePagesAndWindowClose(...e){return fo.apply(this,e)}async copyPage(...e){return So.apply(this,e)}async getNotificationsConfig(){return t}async setLanguage(...e){return kr.apply(this,e)}async getLanguage(){return mr.apply(this)}async trackRemovedTabInternal(...e){return qr.apply(this,e)}async restoreRemovedTabInternal(){const e=await(async()=>{if(!Hr)throw new Error("Unable to pop last removed tab - IndexDB not supported");const e=Hr[Ur],t=await e.toCollection().keys();if(t.length>0){const a=Math.max(...t.map((e=>Number(e)))).toString(),n=await e.get(a);if(n){await e.delete(a);const{id:t,...o}=n;return o}}})();if("page"in e)if(await xe(e.identity)){const t=mn().Browser.wrapSync(e.identity);await t.addPage(e.page),await t.setActivePage(e.page.pageId)}else mn().createWindow({name:e.identity.name,workspacePlatform:{pages:[e.page],windowType:C.Browser}});else(function(e){return"window"in e})(e)&&mn().createWindow({workspacePlatform:{pages:e.window.pages,windowType:C.Browser}})}async trackVisitedSiteInternal(...e){return Qr.apply(this,e)}async getRecentlyVisitedSitesInternal(...e){return await Is.apply(this,e)}async getFrequentlyVisitedSitesInternal(...e){return Yr.apply(this,e)}async searchSitesInternal(...e){return await Cs.apply(this,e)}async getSearchProvidersInternal(...e){return await Ms.apply(this,e)}async getCuratedContentInternal(...e){return await xs.apply(this,e)}async handleRequestNavigationInternal(...e){}async launchBookmarkInternal(e){return ti(e)}async refreshBookmarksInternal(){(await mn().Browser.getAllWindows()).forEach((async({identity:e})=>{(await Sa(e)).dispatch(Aa.RefreshBookmarksInternal)}));(await fa(Er())).dispatch(Aa.RefreshBookmarksInternal),await(async()=>{const e=await Oi();if(e){const t=await Sa(e.identity,Ui);await t.dispatch(Aa.RefreshBookmarksInternal)}})()}async updateDockFavoritesInternal(e){return(async e=>{const t=await Oi();if(!t)throw new Error("Companion Dock window not found");{const a=await Sa(t.identity,Ui);await a.dispatch(xa.UpdateFavoriteEntries,e)}})(e)}async updateContentMenuInternal(e){return(async e=>{const t=await Oi();if(!t)throw new Error("Companion Dock window not found");{const a=await Sa(t.identity,Ui);await a.dispatch(xa.UpdateContentMenu,e)}})(e)}async launchDockEntryInternal(e){return(async e=>(await Gi()).dispatch("launch-entry",e))(e)}async setDefaultDockButtonsOrderInternal(e){return(async e=>(await Gi()).dispatch("set-default-dock-buttons-order",e))(e)}async setDockFavoritesOrderInternal(e){return(async e=>(await Gi()).dispatch("set-dock-favorites-order",e))(e)}async addDockFavoriteInternal(e){return(async e=>(await Gi()).dispatch("add-favorite-entry",e))(e)}async removeDockFavoriteInternal(e){return(async e=>(await Gi()).dispatch("remove-favorite-entry",e))(e)}async navigateContentMenuInternal(e){return(async e=>{const t=await Oi();if(!t)throw new Error("Companion Dock window not found");{const a=await Sa(t.identity,Ui);await a.dispatch(xa.NavigateContentMenu,e)}})(e)}async getDockWorkspacesContextMenuInternal(){return(async()=>(await Gi()).dispatch("get-dock-workspaces-context-menu",void 0))()}async handleDockWorkspacesMenuResponseInternal(e){return(async e=>(await Gi()).dispatch("handle-dock-workspaces-menu-response",e))(e)}async focusAndExpandSearchInternal(){return Hi()}async sendUpdateVersionModalResponseInternal(e){return ja(e)}async showUpdateVersionModalInternal(e,t){return ds(e,t)}}};function Rs(e,t,a){const n=Bs(e,a);try{return"function"==typeof t?e=>t(n(e)):Array.isArray(t)?[...t,n]:e=>new(n(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}}const Es=["green","purple","orange","red","pink","yellow"],Fs="CONTEXT_GROUP_PAGE",Vs=()=>e=>class extends e{getContextGroups(){return super.getContextGroups().map((e=>Es.includes(e.displayMetadata?.name)?{...e,displayMetadata:{...e.displayMetadata,name:_n(e.displayMetadata?.name)}}:e))}},Ns=()=>{const e=new Set(xi.keys());return t=>class extends t{constructor(){super(),this.onClientConnected=async e=>{if(e.name.startsWith("internal-generated-view")){const{page:t}=await mn().Browser.getPageByViewIdentity(e),a=t.contextGroup;this.joinContextGroup({contextGroupId:a??Fs,target:e},{uuid:this.fin.me.uuid,name:this.fin.me.name})}};const e=this.interopClients.set;this.interopClients.set=(t,a)=>{e.call(this.interopClients,t,a),this.onClientConnected(a.clientIdentity)}}async joinContextGroup({contextGroupId:t,target:a},n){if(t!==Fs)return super.joinContextGroup({contextGroupId:t,target:a},n);try{const t=(await mn().Browser.getPageByViewIdentity(a)).page.layoutName;if(!t)throw new Error("View does not belong to a page");if(!e.has(t)&&(e.add(t),!this.contextGroupsById.has(t))){const e=new Map;this.contextGroupsById.set(t,e)}await super.joinContextGroup({contextGroupId:t,target:a},n),a.name}catch(e){JSON.stringify(a),e.stack}}getContextGroups(){return Array.from(e).map((e=>({id:e,displayMetadata:xi.get(e)??{}})))}setContextForGroup(e,t){if(!this.contextGroupsById.has(t)){const e=new Map;this.contextGroupsById.set(t,e)}return super.setContextForGroup(e,t)}}},Ls=(e,t)=>{const a=(e=>Ot(e)?Ns():Vs())(t);try{return"function"==typeof e?t=>e(a(t)):Array.isArray(e)?[...e,a]:e=>new(a(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}};async function _s(){(async()=>{he().on("window-closed",Wr)})(),async function(){const e=fin.Application.getCurrentSync(),t=await Mr();await Promise.all(t.map((async e=>{await Ir(e.identity,void 0,!0)})));const a=await fin.System.getFocusedWindow();a&&a.name.startsWith(me.BrowserWindow)&&await Ir(a,void 0,!0),await e.addListener("window-focused",(async e=>{await Ir(e,void 0,!0)})),await e.addListener("window-minimized",(async e=>{await Ir(e,!1)})),await e.addListener("window-restored",(async e=>{await Ir(e,!0)})),await e.addListener("window-closed",Ar)}();jo(await Qo())}let Us;function Os({overrideCallback:e,interopOverride:t,browser:a,notifications:n,analytics:o,integrations:r=[],workspaceAsar:i}){if(!W)throw new Error("Cannot be used outside an OpenFin env.");return Us||(Us=(async()=>{const s=fin.Platform.getCurrentSync();var c,l;if(s.once("platform-api-ready",(()=>_s())),s.on("window-show-all-downloads",(({name:e,uuid:t})=>{ur({name:e,uuid:t})})),a?.title&&(c=a.title,Wi=c),Eo(o),i){const e=`workspace-${encodeURIComponent(fin.me.uuid)}`,{baseUrl:t}=await fin.System.serveAsset({...i,hostName:e});X(t)}a?.browserBaseUrl&&X(a.browserBaseUrl),Ot(a)&&(Hn=!0,l=a,Gn=l?.aiPanelOptions,Kn());const d=sn();var u;return d.setWorkspaceStorage(ft(`${R}-workspace`)),d.trySynchronizeWorkspaceStorage(),await fin.Platform.init({overrideCallback:Rs(a,e||a?.overrideCallback,n),interopOverride:Ls(t||a?.interopOverride,a)}),u={allowed:!0},Kt($t.Platform,u),await Promise.all(r.map((async e=>{((e,t)=>{Kt(`${$t.Microflow}:${e}`,t,"integration-feature")})(e.workflowIntegrationName,{allowed:!0,apiVersion:U}),await e._initializeWorkflows()}))),s})()),Us}const Gs=async({theme:e,customActions:t,language:a,...n})=>{const o=U.split(".").map((e=>parseInt(e))),r=await(async e=>{if((await Y()).disableRuntimeValidation)return!0;if(await Ut())return!0;const t=(await fin.System.getVersion()).split(".").map((e=>parseInt(e)));return e.every(((a,n)=>!(n<3)||t[n]===e[n]))})(o);if(!r)throw new Error(`Runtime version is not supported.  ${o[0]}.${o[1]}.${o[2]}.* is required`);var i;return Ts(e),e&&(i={allowed:!0},Kt($t.Theming,i)),t&&(Dr=t),await yr(a?.initialLanguage),Os(n)}})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/dexie/dist/dexie.js":
/*!**********************************************!*\
  !*** ../../node_modules/dexie/dist/dexie.js ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*
 * Dexie.js - a minimalistic wrapper for IndexedDB
 * ===============================================
 *
 * By David Fahlander, david.fahlander@gmail.com
 *
 * Version 4.2.1, Sat Oct 04 2025
 *
 * https://dexie.org
 *
 * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/
 */
 
(function (global, factory) {
     true ? module.exports = factory() :
    0;
})(this, (function () { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var _global = typeof globalThis !== 'undefined' ? globalThis :
        typeof self !== 'undefined' ? self :
            typeof window !== 'undefined' ? window :
                __webpack_require__.g;

    var keys = Object.keys;
    var isArray = Array.isArray;
    if (typeof Promise !== 'undefined' && !_global.Promise) {
        _global.Promise = Promise;
    }
    function extend(obj, extension) {
        if (typeof extension !== 'object')
            return obj;
        keys(extension).forEach(function (key) {
            obj[key] = extension[key];
        });
        return obj;
    }
    var getProto = Object.getPrototypeOf;
    var _hasOwn = {}.hasOwnProperty;
    function hasOwn(obj, prop) {
        return _hasOwn.call(obj, prop);
    }
    function props(proto, extension) {
        if (typeof extension === 'function')
            extension = extension(getProto(proto));
        (typeof Reflect === "undefined" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {
            setProp(proto, key, extension[key]);
        });
    }
    var defineProperty = Object.defineProperty;
    function setProp(obj, prop, functionOrGetSet, options) {
        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, "get") && typeof functionOrGetSet.get === 'function' ?
            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :
            { value: functionOrGetSet, configurable: true, writable: true }, options));
    }
    function derive(Child) {
        return {
            from: function (Parent) {
                Child.prototype = Object.create(Parent.prototype);
                setProp(Child.prototype, "constructor", Child);
                return {
                    extend: props.bind(null, Child.prototype)
                };
            }
        };
    }
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    function getPropertyDescriptor(obj, prop) {
        var pd = getOwnPropertyDescriptor(obj, prop);
        var proto;
        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);
    }
    var _slice = [].slice;
    function slice(args, start, end) {
        return _slice.call(args, start, end);
    }
    function override(origFunc, overridedFactory) {
        return overridedFactory(origFunc);
    }
    function assert(b) {
        if (!b)
            throw new Error("Assertion Failed");
    }
    function asap$1(fn) {
        if (_global.setImmediate)
            setImmediate(fn);
        else
            setTimeout(fn, 0);
    }
    function arrayToObject(array, extractor) {
        return array.reduce(function (result, item, i) {
            var nameAndValue = extractor(item, i);
            if (nameAndValue)
                result[nameAndValue[0]] = nameAndValue[1];
            return result;
        }, {});
    }
    function getByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))
            return obj[keyPath];
        if (!keyPath)
            return obj;
        if (typeof keyPath !== 'string') {
            var rv = [];
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                var val = getByKeyPath(obj, keyPath[i]);
                rv.push(val);
            }
            return rv;
        }
        var period = keyPath.indexOf('.');
        if (period !== -1) {
            var innerObj = obj[keyPath.substr(0, period)];
            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));
        }
        return undefined;
    }
    function setByKeyPath(obj, keyPath, value) {
        if (!obj || keyPath === undefined)
            return;
        if ('isFrozen' in Object && Object.isFrozen(obj))
            return;
        if (typeof keyPath !== 'string' && 'length' in keyPath) {
            assert(typeof value !== 'string' && 'length' in value);
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                setByKeyPath(obj, keyPath[i], value[i]);
            }
        }
        else {
            var period = keyPath.indexOf('.');
            if (period !== -1) {
                var currentKeyPath = keyPath.substr(0, period);
                var remainingKeyPath = keyPath.substr(period + 1);
                if (remainingKeyPath === "")
                    if (value === undefined) {
                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))
                            obj.splice(currentKeyPath, 1);
                        else
                            delete obj[currentKeyPath];
                    }
                    else
                        obj[currentKeyPath] = value;
                else {
                    var innerObj = obj[currentKeyPath];
                    if (!innerObj || !hasOwn(obj, currentKeyPath))
                        innerObj = (obj[currentKeyPath] = {});
                    setByKeyPath(innerObj, remainingKeyPath, value);
                }
            }
            else {
                if (value === undefined) {
                    if (isArray(obj) && !isNaN(parseInt(keyPath)))
                        obj.splice(keyPath, 1);
                    else
                        delete obj[keyPath];
                }
                else
                    obj[keyPath] = value;
            }
        }
    }
    function delByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string')
            setByKeyPath(obj, keyPath, undefined);
        else if ('length' in keyPath)
            [].map.call(keyPath, function (kp) {
                setByKeyPath(obj, kp, undefined);
            });
    }
    function shallowClone(obj) {
        var rv = {};
        for (var m in obj) {
            if (hasOwn(obj, m))
                rv[m] = obj[m];
        }
        return rv;
    }
    var concat = [].concat;
    function flatten(a) {
        return concat.apply([], a);
    }
    var intrinsicTypeNames = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey"
        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return ["Int", "Uint", "Float"].map(function (t) { return t + num + "Array"; }); }))).filter(function (t) { return _global[t]; });
    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));
    function cloneSimpleObjectTree(o) {
        var rv = {};
        for (var k in o)
            if (hasOwn(o, k)) {
                var v = o[k];
                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);
            }
        return rv;
    }
    function objectIsEmpty(o) {
        for (var k in o)
            if (hasOwn(o, k))
                return false;
        return true;
    }
    var circularRefs = null;
    function deepClone(any) {
        circularRefs = new WeakMap();
        var rv = innerDeepClone(any);
        circularRefs = null;
        return rv;
    }
    function innerDeepClone(x) {
        if (!x || typeof x !== 'object')
            return x;
        var rv = circularRefs.get(x);
        if (rv)
            return rv;
        if (isArray(x)) {
            rv = [];
            circularRefs.set(x, rv);
            for (var i = 0, l = x.length; i < l; ++i) {
                rv.push(innerDeepClone(x[i]));
            }
        }
        else if (intrinsicTypes.has(x.constructor)) {
            rv = x;
        }
        else {
            var proto = getProto(x);
            rv = proto === Object.prototype ? {} : Object.create(proto);
            circularRefs.set(x, rv);
            for (var prop in x) {
                if (hasOwn(x, prop)) {
                    rv[prop] = innerDeepClone(x[prop]);
                }
            }
        }
        return rv;
    }
    var toString = {}.toString;
    function toStringTag(o) {
        return toString.call(o).slice(8, -1);
    }
    var iteratorSymbol = typeof Symbol !== 'undefined' ?
        Symbol.iterator :
        '@@iterator';
    var getIteratorOf = typeof iteratorSymbol === "symbol" ? function (x) {
        var i;
        return x != null && (i = x[iteratorSymbol]) && i.apply(x);
    } : function () { return null; };
    function delArrayItem(a, x) {
        var i = a.indexOf(x);
        if (i >= 0)
            a.splice(i, 1);
        return i >= 0;
    }
    var NO_CHAR_ARRAY = {};
    function getArrayOf(arrayLike) {
        var i, a, x, it;
        if (arguments.length === 1) {
            if (isArray(arrayLike))
                return arrayLike.slice();
            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')
                return [arrayLike];
            if ((it = getIteratorOf(arrayLike))) {
                a = [];
                while ((x = it.next()), !x.done)
                    a.push(x.value);
                return a;
            }
            if (arrayLike == null)
                return [arrayLike];
            i = arrayLike.length;
            if (typeof i === 'number') {
                a = new Array(i);
                while (i--)
                    a[i] = arrayLike[i];
                return a;
            }
            return [arrayLike];
        }
        i = arguments.length;
        a = new Array(i);
        while (i--)
            a[i] = arguments[i];
        return a;
    }
    var isAsyncFunction = typeof Symbol !== 'undefined'
        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }
        : function () { return false; };

    var dexieErrorNames = [
        'Modify',
        'Bulk',
        'OpenFailed',
        'VersionChange',
        'Schema',
        'Upgrade',
        'InvalidTable',
        'MissingAPI',
        'NoSuchDatabase',
        'InvalidArgument',
        'SubTransaction',
        'Unsupported',
        'Internal',
        'DatabaseClosed',
        'PrematureCommit',
        'ForeignAwait'
    ];
    var idbDomErrorNames = [
        'Unknown',
        'Constraint',
        'Data',
        'TransactionInactive',
        'ReadOnly',
        'Version',
        'NotFound',
        'InvalidState',
        'InvalidAccess',
        'Abort',
        'Timeout',
        'QuotaExceeded',
        'Syntax',
        'DataClone'
    ];
    var errorList = dexieErrorNames.concat(idbDomErrorNames);
    var defaultTexts = {
        VersionChanged: "Database version changed by other database connection",
        DatabaseClosed: "Database has been closed",
        Abort: "Transaction aborted",
        TransactionInactive: "Transaction has already completed or failed",
        MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
    };
    function DexieError(name, msg) {
        this.name = name;
        this.message = msg;
    }
    derive(DexieError).from(Error).extend({
        toString: function () { return this.name + ": " + this.message; }
    });
    function getMultiErrorMessage(msg, failures) {
        return msg + ". Errors: " + Object.keys(failures)
            .map(function (key) { return failures[key].toString(); })
            .filter(function (v, i, s) { return s.indexOf(v) === i; })
            .join('\n');
    }
    function ModifyError(msg, failures, successCount, failedKeys) {
        this.failures = failures;
        this.failedKeys = failedKeys;
        this.successCount = successCount;
        this.message = getMultiErrorMessage(msg, failures);
    }
    derive(ModifyError).from(DexieError);
    function BulkError(msg, failures) {
        this.name = "BulkError";
        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });
        this.failuresByPos = failures;
        this.message = getMultiErrorMessage(msg, this.failures);
    }
    derive(BulkError).from(DexieError);
    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + "Error", obj); }, {});
    var BaseException = DexieError;
    var exceptions = errorList.reduce(function (obj, name) {
        var fullName = name + "Error";
        function DexieError(msgOrInner, inner) {
            this.name = fullName;
            if (!msgOrInner) {
                this.message = defaultTexts[name] || fullName;
                this.inner = null;
            }
            else if (typeof msgOrInner === 'string') {
                this.message = "".concat(msgOrInner).concat(!inner ? '' : '\n ' + inner);
                this.inner = inner || null;
            }
            else if (typeof msgOrInner === 'object') {
                this.message = "".concat(msgOrInner.name, " ").concat(msgOrInner.message);
                this.inner = msgOrInner;
            }
        }
        derive(DexieError).from(BaseException);
        obj[name] = DexieError;
        return obj;
    }, {});
    exceptions.Syntax = SyntaxError;
    exceptions.Type = TypeError;
    exceptions.Range = RangeError;
    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {
        obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    function mapError(domError, message) {
        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])
            return domError;
        var rv = new exceptionMap[domError.name](message || domError.message, domError);
        if ("stack" in domError) {
            setProp(rv, "stack", { get: function () {
                    return this.inner.stack;
                } });
        }
        return rv;
    }
    var fullNameExceptions = errorList.reduce(function (obj, name) {
        if (["Syntax", "Type", "Range"].indexOf(name) === -1)
            obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    fullNameExceptions.ModifyError = ModifyError;
    fullNameExceptions.DexieError = DexieError;
    fullNameExceptions.BulkError = BulkError;

    function nop() { }
    function mirror(val) { return val; }
    function pureFunctionChain(f1, f2) {
        if (f1 == null || f1 === mirror)
            return f2;
        return function (val) {
            return f2(f1(val));
        };
    }
    function callBoth(on1, on2) {
        return function () {
            on1.apply(this, arguments);
            on2.apply(this, arguments);
        };
    }
    function hookCreatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res !== undefined)
                arguments[0] = res;
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res2 !== undefined ? res2 : res;
        };
    }
    function hookDeletingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            f1.apply(this, arguments);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = this.onerror = null;
            f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
        };
    }
    function hookUpdatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function (modifications) {
            var res = f1.apply(this, arguments);
            extend(modifications, res);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res === undefined ?
                (res2 === undefined ? undefined : res2) :
                (extend(res, res2));
        };
    }
    function reverseStoppableEventChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            if (f2.apply(this, arguments) === false)
                return false;
            return f1.apply(this, arguments);
        };
    }
    function promisableChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res && typeof res.then === 'function') {
                var thiz = this, i = arguments.length, args = new Array(i);
                while (i--)
                    args[i] = arguments[i];
                return res.then(function () {
                    return f2.apply(thiz, args);
                });
            }
            return f2.apply(this, arguments);
        };
    }

    var debug = typeof location !== 'undefined' &&
        /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
    function setDebug(value, filter) {
        debug = value;
    }

    var INTERNAL = {};
    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?
        [] :
        (function () {
            var globalP = Promise.resolve();
            if (typeof crypto === 'undefined' || !crypto.subtle)
                return [globalP, getProto(globalP), globalP];
            var nativeP = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
            return [
                nativeP,
                getProto(nativeP),
                globalP
            ];
        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;
    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;
    var patchGlobalPromise = !!resolvedGlobalPromise;
    function schedulePhysicalTick() {
        queueMicrotask(physicalTick);
    }
    var asap = function (callback, args) {
        microtickQueue.push([callback, args]);
        if (needsNewPhysicalTick) {
            schedulePhysicalTick();
            needsNewPhysicalTick = false;
        }
    };
    var isOutsideMicroTick = true,
    needsNewPhysicalTick = true,
    unhandledErrors = [],
    rejectingErrors = [],
    rejectionMapper = mirror;
    var globalPSD = {
        id: 'global',
        global: true,
        ref: 0,
        unhandleds: [],
        onunhandled: nop,
        pgp: false,
        env: {},
        finalize: nop
    };
    var PSD = globalPSD;
    var microtickQueue = [];
    var numScheduledCalls = 0;
    var tickFinalizers = [];
    function DexiePromise(fn) {
        if (typeof this !== 'object')
            throw new TypeError('Promises must be constructed via new');
        this._listeners = [];
        this._lib = false;
        var psd = (this._PSD = PSD);
        if (typeof fn !== 'function') {
            if (fn !== INTERNAL)
                throw new TypeError('Not a function');
            this._state = arguments[1];
            this._value = arguments[2];
            if (this._state === false)
                handleRejection(this, this._value);
            return;
        }
        this._state = null;
        this._value = null;
        ++psd.ref;
        executePromiseTask(this, fn);
    }
    var thenProp = {
        get: function () {
            var psd = PSD, microTaskId = totalEchoes;
            function then(onFulfilled, onRejected) {
                var _this = this;
                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);
                var cleanup = possibleAwait && !decrementExpectedAwaits();
                var rv = new DexiePromise(function (resolve, reject) {
                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));
                });
                if (this._consoleTask)
                    rv._consoleTask = this._consoleTask;
                return rv;
            }
            then.prototype = INTERNAL;
            return then;
        },
        set: function (value) {
            setProp(this, 'then', value && value.prototype === INTERNAL ?
                thenProp :
                {
                    get: function () {
                        return value;
                    },
                    set: thenProp.set
                });
        }
    };
    props(DexiePromise.prototype, {
        then: thenProp,
        _then: function (onFulfilled, onRejected) {
            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));
        },
        catch: function (onRejected) {
            if (arguments.length === 1)
                return this.then(null, onRejected);
            var type = arguments[0], handler = arguments[1];
            return typeof type === 'function' ? this.then(null, function (err) {
                return err instanceof type ? handler(err) : PromiseReject(err);
            })
                : this.then(null, function (err) {
                    return err && err.name === type ? handler(err) : PromiseReject(err);
                });
        },
        finally: function (onFinally) {
            return this.then(function (value) {
                return DexiePromise.resolve(onFinally()).then(function () { return value; });
            }, function (err) {
                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });
            });
        },
        timeout: function (ms, msg) {
            var _this = this;
            return ms < Infinity ?
                new DexiePromise(function (resolve, reject) {
                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);
                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));
                }) : this;
        }
    });
    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)
        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');
    globalPSD.env = snapShot();
    function Listener(onFulfilled, onRejected, resolve, reject, zone) {
        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
        this.onRejected = typeof onRejected === 'function' ? onRejected : null;
        this.resolve = resolve;
        this.reject = reject;
        this.psd = zone;
    }
    props(DexiePromise, {
        all: function () {
            var values = getArrayOf.apply(null, arguments)
                .map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                if (values.length === 0)
                    resolve([]);
                var remaining = values.length;
                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {
                    values[i] = x;
                    if (!--remaining)
                        resolve(values);
                }, reject); });
            });
        },
        resolve: function (value) {
            if (value instanceof DexiePromise)
                return value;
            if (value && typeof value.then === 'function')
                return new DexiePromise(function (resolve, reject) {
                    value.then(resolve, reject);
                });
            var rv = new DexiePromise(INTERNAL, true, value);
            return rv;
        },
        reject: PromiseReject,
        race: function () {
            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });
            });
        },
        PSD: {
            get: function () { return PSD; },
            set: function (value) { return PSD = value; }
        },
        totalEchoes: { get: function () { return totalEchoes; } },
        newPSD: newScope,
        usePSD: usePSD,
        scheduler: {
            get: function () { return asap; },
            set: function (value) { asap = value; }
        },
        rejectionMapper: {
            get: function () { return rejectionMapper; },
            set: function (value) { rejectionMapper = value; }
        },
        follow: function (fn, zoneProps) {
            return new DexiePromise(function (resolve, reject) {
                return newScope(function (resolve, reject) {
                    var psd = PSD;
                    psd.unhandleds = [];
                    psd.onunhandled = reject;
                    psd.finalize = callBoth(function () {
                        var _this = this;
                        run_at_end_of_this_or_next_physical_tick(function () {
                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);
                        });
                    }, psd.finalize);
                    fn();
                }, zoneProps, resolve, reject);
            });
        }
    });
    if (NativePromise) {
        if (NativePromise.allSettled)
            setProp(DexiePromise, "allSettled", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve) {
                    if (possiblePromises.length === 0)
                        resolve([]);
                    var remaining = possiblePromises.length;
                    var results = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: "fulfilled", value: value }; }, function (reason) { return results[i] = { status: "rejected", reason: reason }; })
                        .then(function () { return --remaining || resolve(results); }); });
                });
            });
        if (NativePromise.any && typeof AggregateError !== 'undefined')
            setProp(DexiePromise, "any", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve, reject) {
                    if (possiblePromises.length === 0)
                        reject(new AggregateError([]));
                    var remaining = possiblePromises.length;
                    var failures = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {
                        failures[i] = failure;
                        if (!--remaining)
                            reject(new AggregateError(failures));
                    }); });
                });
            });
        if (NativePromise.withResolvers)
            DexiePromise.withResolvers = NativePromise.withResolvers;
    }
    function executePromiseTask(promise, fn) {
        try {
            fn(function (value) {
                if (promise._state !== null)
                    return;
                if (value === promise)
                    throw new TypeError('A promise cannot be resolved with itself.');
                var shouldExecuteTick = promise._lib && beginMicroTickScope();
                if (value && typeof value.then === 'function') {
                    executePromiseTask(promise, function (resolve, reject) {
                        value instanceof DexiePromise ?
                            value._then(resolve, reject) :
                            value.then(resolve, reject);
                    });
                }
                else {
                    promise._state = true;
                    promise._value = value;
                    propagateAllListeners(promise);
                }
                if (shouldExecuteTick)
                    endMicroTickScope();
            }, handleRejection.bind(null, promise));
        }
        catch (ex) {
            handleRejection(promise, ex);
        }
    }
    function handleRejection(promise, reason) {
        rejectingErrors.push(reason);
        if (promise._state !== null)
            return;
        var shouldExecuteTick = promise._lib && beginMicroTickScope();
        reason = rejectionMapper(reason);
        promise._state = false;
        promise._value = reason;
        addPossiblyUnhandledError(promise);
        propagateAllListeners(promise);
        if (shouldExecuteTick)
            endMicroTickScope();
    }
    function propagateAllListeners(promise) {
        var listeners = promise._listeners;
        promise._listeners = [];
        for (var i = 0, len = listeners.length; i < len; ++i) {
            propagateToListener(promise, listeners[i]);
        }
        var psd = promise._PSD;
        --psd.ref || psd.finalize();
        if (numScheduledCalls === 0) {
            ++numScheduledCalls;
            asap(function () {
                if (--numScheduledCalls === 0)
                    finalizePhysicalTick();
            }, []);
        }
    }
    function propagateToListener(promise, listener) {
        if (promise._state === null) {
            promise._listeners.push(listener);
            return;
        }
        var cb = promise._state ? listener.onFulfilled : listener.onRejected;
        if (cb === null) {
            return (promise._state ? listener.resolve : listener.reject)(promise._value);
        }
        ++listener.psd.ref;
        ++numScheduledCalls;
        asap(callListener, [cb, promise, listener]);
    }
    function callListener(cb, promise, listener) {
        try {
            var ret, value = promise._value;
            if (!promise._state && rejectingErrors.length)
                rejectingErrors = [];
            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);
            if (!promise._state && rejectingErrors.indexOf(value) === -1) {
                markErrorAsHandled(promise);
            }
            listener.resolve(ret);
        }
        catch (e) {
            listener.reject(e);
        }
        finally {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
            --listener.psd.ref || listener.psd.finalize();
        }
    }
    function physicalTick() {
        usePSD(globalPSD, function () {
            beginMicroTickScope() && endMicroTickScope();
        });
    }
    function beginMicroTickScope() {
        var wasRootExec = isOutsideMicroTick;
        isOutsideMicroTick = false;
        needsNewPhysicalTick = false;
        return wasRootExec;
    }
    function endMicroTickScope() {
        var callbacks, i, l;
        do {
            while (microtickQueue.length > 0) {
                callbacks = microtickQueue;
                microtickQueue = [];
                l = callbacks.length;
                for (i = 0; i < l; ++i) {
                    var item = callbacks[i];
                    item[0].apply(null, item[1]);
                }
            }
        } while (microtickQueue.length > 0);
        isOutsideMicroTick = true;
        needsNewPhysicalTick = true;
    }
    function finalizePhysicalTick() {
        var unhandledErrs = unhandledErrors;
        unhandledErrors = [];
        unhandledErrs.forEach(function (p) {
            p._PSD.onunhandled.call(null, p._value, p);
        });
        var finalizers = tickFinalizers.slice(0);
        var i = finalizers.length;
        while (i)
            finalizers[--i]();
    }
    function run_at_end_of_this_or_next_physical_tick(fn) {
        function finalizer() {
            fn();
            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);
        }
        tickFinalizers.push(finalizer);
        ++numScheduledCalls;
        asap(function () {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
        }, []);
    }
    function addPossiblyUnhandledError(promise) {
        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))
            unhandledErrors.push(promise);
    }
    function markErrorAsHandled(promise) {
        var i = unhandledErrors.length;
        while (i)
            if (unhandledErrors[--i]._value === promise._value) {
                unhandledErrors.splice(i, 1);
                return;
            }
    }
    function PromiseReject(reason) {
        return new DexiePromise(INTERNAL, false, reason);
    }
    function wrap(fn, errorCatcher) {
        var psd = PSD;
        return function () {
            var wasRootExec = beginMicroTickScope(), outerScope = PSD;
            try {
                switchToZone(psd, true);
                return fn.apply(this, arguments);
            }
            catch (e) {
                errorCatcher && errorCatcher(e);
            }
            finally {
                switchToZone(outerScope, false);
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
    }
    var task = { awaits: 0, echoes: 0, id: 0 };
    var taskCounter = 0;
    var zoneStack = [];
    var zoneEchoes = 0;
    var totalEchoes = 0;
    var zone_id_counter = 0;
    function newScope(fn, props, a1, a2) {
        var parent = PSD, psd = Object.create(parent);
        psd.parent = parent;
        psd.ref = 0;
        psd.global = false;
        psd.id = ++zone_id_counter;
        globalPSD.env;
        psd.env = patchGlobalPromise ? {
            Promise: DexiePromise,
            PromiseProp: { value: DexiePromise, configurable: true, writable: true },
            all: DexiePromise.all,
            race: DexiePromise.race,
            allSettled: DexiePromise.allSettled,
            any: DexiePromise.any,
            resolve: DexiePromise.resolve,
            reject: DexiePromise.reject,
        } : {};
        if (props)
            extend(psd, props);
        ++parent.ref;
        psd.finalize = function () {
            --this.parent.ref || this.parent.finalize();
        };
        var rv = usePSD(psd, fn, a1, a2);
        if (psd.ref === 0)
            psd.finalize();
        return rv;
    }
    function incrementExpectedAwaits() {
        if (!task.id)
            task.id = ++taskCounter;
        ++task.awaits;
        task.echoes += ZONE_ECHO_LIMIT;
        return task.id;
    }
    function decrementExpectedAwaits() {
        if (!task.awaits)
            return false;
        if (--task.awaits === 0)
            task.id = 0;
        task.echoes = task.awaits * ZONE_ECHO_LIMIT;
        return true;
    }
    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {
        incrementExpectedAwaits = decrementExpectedAwaits = nop;
    }
    function onPossibleParallellAsync(possiblePromise) {
        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {
            incrementExpectedAwaits();
            return possiblePromise.then(function (x) {
                decrementExpectedAwaits();
                return x;
            }, function (e) {
                decrementExpectedAwaits();
                return rejection(e);
            });
        }
        return possiblePromise;
    }
    function zoneEnterEcho(targetZone) {
        ++totalEchoes;
        if (!task.echoes || --task.echoes === 0) {
            task.echoes = task.awaits = task.id = 0;
        }
        zoneStack.push(PSD);
        switchToZone(targetZone, true);
    }
    function zoneLeaveEcho() {
        var zone = zoneStack[zoneStack.length - 1];
        zoneStack.pop();
        switchToZone(zone, false);
    }
    function switchToZone(targetZone, bEnteringZone) {
        var currentZone = PSD;
        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {
            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);
        }
        if (targetZone === PSD)
            return;
        PSD = targetZone;
        if (currentZone === globalPSD)
            globalPSD.env = snapShot();
        if (patchGlobalPromise) {
            var GlobalPromise = globalPSD.env.Promise;
            var targetEnv = targetZone.env;
            if (currentZone.global || targetZone.global) {
                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);
                GlobalPromise.all = targetEnv.all;
                GlobalPromise.race = targetEnv.race;
                GlobalPromise.resolve = targetEnv.resolve;
                GlobalPromise.reject = targetEnv.reject;
                if (targetEnv.allSettled)
                    GlobalPromise.allSettled = targetEnv.allSettled;
                if (targetEnv.any)
                    GlobalPromise.any = targetEnv.any;
            }
        }
    }
    function snapShot() {
        var GlobalPromise = _global.Promise;
        return patchGlobalPromise ? {
            Promise: GlobalPromise,
            PromiseProp: Object.getOwnPropertyDescriptor(_global, "Promise"),
            all: GlobalPromise.all,
            race: GlobalPromise.race,
            allSettled: GlobalPromise.allSettled,
            any: GlobalPromise.any,
            resolve: GlobalPromise.resolve,
            reject: GlobalPromise.reject,
        } : {};
    }
    function usePSD(psd, fn, a1, a2, a3) {
        var outerScope = PSD;
        try {
            switchToZone(psd, true);
            return fn(a1, a2, a3);
        }
        finally {
            switchToZone(outerScope, false);
        }
    }
    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {
        return typeof fn !== 'function' ? fn : function () {
            var outerZone = PSD;
            if (possibleAwait)
                incrementExpectedAwaits();
            switchToZone(zone, true);
            try {
                return fn.apply(this, arguments);
            }
            finally {
                switchToZone(outerZone, false);
                if (cleanup)
                    queueMicrotask(decrementExpectedAwaits);
            }
        };
    }
    function execInGlobalContext(cb) {
        if (Promise === NativePromise && task.echoes === 0) {
            if (zoneEchoes === 0) {
                cb();
            }
            else {
                enqueueNativeMicroTask(cb);
            }
        }
        else {
            setTimeout(cb, 0);
        }
    }
    var rejection = DexiePromise.reject;

    function tempTransaction(db, mode, storeNames, fn) {
        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {
            if (db._state.openComplete) {
                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));
            }
            if (!db._state.isBeingOpened) {
                if (!db._state.autoOpen)
                    return rejection(new exceptions.DatabaseClosed());
                db.open().catch(nop);
            }
            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });
        }
        else {
            var trans = db._createTransaction(mode, storeNames, db._dbSchema);
            try {
                trans.create();
                db._state.PR1398_maxLoop = 3;
            }
            catch (ex) {
                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                    console.warn('Dexie: Need to reopen db');
                    db.close({ disableAutoOpen: false });
                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });
                }
                return rejection(ex);
            }
            return trans._promise(mode, function (resolve, reject) {
                return newScope(function () {
                    PSD.trans = trans;
                    return fn(resolve, reject, trans);
                });
            }).then(function (result) {
                if (mode === 'readwrite')
                    try {
                        trans.idbtrans.commit();
                    }
                    catch (_a) { }
                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });
            });
        }
    }

    var DEXIE_VERSION = '4.2.1';
    var maxString = String.fromCharCode(65535);
    var minKey = -Infinity;
    var INVALID_KEY_ARGUMENT = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";
    var STRING_EXPECTED = "String expected.";
    var connections = [];
    var DBNAMES_DB = '__dbnames';
    var READONLY = 'readonly';
    var READWRITE = 'readwrite';

    function combine(filter1, filter2) {
        return filter1 ?
            filter2 ?
                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :
                filter1 :
            filter2;
    }

    var AnyRange = {
        type: 3 ,
        lower: -Infinity,
        lowerOpen: false,
        upper: [[]],
        upperOpen: false
    };

    function workaroundForUndefinedPrimKey(keyPath) {
        return typeof keyPath === "string" && !/\./.test(keyPath)
            ? function (obj) {
                if (obj[keyPath] === undefined && (keyPath in obj)) {
                    obj = deepClone(obj);
                    delete obj[keyPath];
                }
                return obj;
            }
            : function (obj) { return obj; };
    }

    function Entity() {
        throw exceptions.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.");
    }

    function cmp(a, b) {
        try {
            var ta = type(a);
            var tb = type(b);
            if (ta !== tb) {
                if (ta === 'Array')
                    return 1;
                if (tb === 'Array')
                    return -1;
                if (ta === 'binary')
                    return 1;
                if (tb === 'binary')
                    return -1;
                if (ta === 'string')
                    return 1;
                if (tb === 'string')
                    return -1;
                if (ta === 'Date')
                    return 1;
                if (tb !== 'Date')
                    return NaN;
                return -1;
            }
            switch (ta) {
                case 'number':
                case 'Date':
                case 'string':
                    return a > b ? 1 : a < b ? -1 : 0;
                case 'binary': {
                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));
                }
                case 'Array':
                    return compareArrays(a, b);
            }
        }
        catch (_a) { }
        return NaN;
    }
    function compareArrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            var res = cmp(a[i], b[i]);
            if (res !== 0)
                return res;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function compareUint8Arrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            if (a[i] !== b[i])
                return a[i] < b[i] ? -1 : 1;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function type(x) {
        var t = typeof x;
        if (t !== 'object')
            return t;
        if (ArrayBuffer.isView(x))
            return 'binary';
        var tsTag = toStringTag(x);
        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;
    }
    function getUint8Array(a) {
        if (a instanceof Uint8Array)
            return a;
        if (ArrayBuffer.isView(a))
            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);
        return new Uint8Array(a);
    }

    function builtInDeletionTrigger(table, keys, res) {
        var yProps = table.schema.yProps;
        if (!yProps)
            return res;
        if (keys && res.numFailures > 0)
            keys = keys.filter(function (_, i) { return !res.failures[i]; });
        return Promise.all(yProps.map(function (_a) {
            var updatesTable = _a.updatesTable;
            return keys
                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()
                : table.db.table(updatesTable).clear();
        })).then(function () { return res; });
    }

    var PropModification =  (function () {
        function PropModification(spec) {
            this["@@propmod"] = spec;
        }
        PropModification.prototype.execute = function (value) {
            var _a;
            var spec = this["@@propmod"];
            if (spec.add !== undefined) {
                var term = spec.add;
                if (isArray(term)) {
                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();
                }
                if (typeof term === 'number')
                    return (Number(value) || 0) + term;
                if (typeof term === 'bigint') {
                    try {
                        return BigInt(value) + term;
                    }
                    catch (_b) {
                        return BigInt(0) + term;
                    }
                }
                throw new TypeError("Invalid term ".concat(term));
            }
            if (spec.remove !== undefined) {
                var subtrahend_1 = spec.remove;
                if (isArray(subtrahend_1)) {
                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];
                }
                if (typeof subtrahend_1 === 'number')
                    return Number(value) - subtrahend_1;
                if (typeof subtrahend_1 === 'bigint') {
                    try {
                        return BigInt(value) - subtrahend_1;
                    }
                    catch (_c) {
                        return BigInt(0) - subtrahend_1;
                    }
                }
                throw new TypeError("Invalid subtrahend ".concat(subtrahend_1));
            }
            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];
            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {
                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);
            }
            return value;
        };
        return PropModification;
    }());

    function applyUpdateSpec(obj, changes) {
        var keyPaths = keys(changes);
        var numKeys = keyPaths.length;
        var anythingModified = false;
        for (var i = 0; i < numKeys; ++i) {
            var keyPath = keyPaths[i];
            var value = changes[keyPath];
            var origValue = getByKeyPath(obj, keyPath);
            if (value instanceof PropModification) {
                setByKeyPath(obj, keyPath, value.execute(origValue));
                anythingModified = true;
            }
            else if (origValue !== value) {
                setByKeyPath(obj, keyPath, value);
                anythingModified = true;
            }
        }
        return anythingModified;
    }

    var Table =  (function () {
        function Table() {
        }
        Table.prototype._trans = function (mode, fn, writeLocked) {
            var trans = this._tx || PSD.trans;
            var tableName = this.name;
            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask("Dexie: ".concat(mode === 'readonly' ? 'read' : 'write', " ").concat(this.name));
            function checkTableInTransaction(resolve, reject, trans) {
                if (!trans.schema[tableName])
                    throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
                return fn(trans.idbtrans, trans);
            }
            var wasRootExec = beginMicroTickScope();
            try {
                var p = trans && trans.db._novip === this.db._novip ?
                    trans === PSD.trans ?
                        trans._promise(mode, checkTableInTransaction, writeLocked) :
                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :
                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);
                if (task) {
                    p._consoleTask = task;
                    p = p.catch(function (err) {
                        console.trace(err);
                        return rejection(err);
                    });
                }
                return p;
            }
            finally {
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
        Table.prototype.get = function (keyOrCrit, cb) {
            var _this = this;
            if (keyOrCrit && keyOrCrit.constructor === Object)
                return this.where(keyOrCrit).first(cb);
            if (keyOrCrit == null)
                return rejection(new exceptions.Type("Invalid argument to Table.get()"));
            return this._trans('readonly', function (trans) {
                return _this.core.get({ trans: trans, key: keyOrCrit })
                    .then(function (res) { return _this.hook.reading.fire(res); });
            }).then(cb);
        };
        Table.prototype.where = function (indexOrCrit) {
            if (typeof indexOrCrit === 'string')
                return new this.db.WhereClause(this, indexOrCrit);
            if (isArray(indexOrCrit))
                return new this.db.WhereClause(this, "[".concat(indexOrCrit.join('+'), "]"));
            var keyPaths = keys(indexOrCrit);
            if (keyPaths.length === 1)
                return this
                    .where(keyPaths[0])
                    .equals(indexOrCrit[keyPaths[0]]);
            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {
                if (ix.compound &&
                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {
                    for (var i = 0; i < keyPaths.length; ++i) {
                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)
                            return false;
                    }
                    return true;
                }
                return false;
            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];
            if (compoundIndex && this.db._maxKey !== maxString) {
                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);
                return this
                    .where(keyPathsInValidOrder)
                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));
            }
            if (!compoundIndex && debug)
                console.warn("The query ".concat(JSON.stringify(indexOrCrit), " on ").concat(this.name, " would benefit from a ") +
                    "compound index [".concat(keyPaths.join('+'), "]"));
            var idxByName = this.schema.idxByName;
            function equals(a, b) {
                return cmp(a, b) === 0;
            }
            var _a = keyPaths.reduce(function (_a, keyPath) {
                var prevIndex = _a[0], prevFilterFn = _a[1];
                var index = idxByName[keyPath];
                var value = indexOrCrit[keyPath];
                return [
                    prevIndex || index,
                    prevIndex || !index ?
                        combine(prevFilterFn, index && index.multi ?
                            function (x) {
                                var prop = getByKeyPath(x, keyPath);
                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });
                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })
                        : prevFilterFn
                ];
            }, [null, null]), idx = _a[0], filterFunction = _a[1];
            return idx ?
                this.where(idx.name).equals(indexOrCrit[idx.keyPath])
                    .filter(filterFunction) :
                compoundIndex ?
                    this.filter(filterFunction) :
                    this.where(keyPaths).equals('');
        };
        Table.prototype.filter = function (filterFunction) {
            return this.toCollection().and(filterFunction);
        };
        Table.prototype.count = function (thenShortcut) {
            return this.toCollection().count(thenShortcut);
        };
        Table.prototype.offset = function (offset) {
            return this.toCollection().offset(offset);
        };
        Table.prototype.limit = function (numRows) {
            return this.toCollection().limit(numRows);
        };
        Table.prototype.each = function (callback) {
            return this.toCollection().each(callback);
        };
        Table.prototype.toArray = function (thenShortcut) {
            return this.toCollection().toArray(thenShortcut);
        };
        Table.prototype.toCollection = function () {
            return new this.db.Collection(new this.db.WhereClause(this));
        };
        Table.prototype.orderBy = function (index) {
            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?
                "[".concat(index.join('+'), "]") :
                index));
        };
        Table.prototype.reverse = function () {
            return this.toCollection().reverse();
        };
        Table.prototype.mapToClass = function (constructor) {
            var _a = this, db = _a.db, tableName = _a.name;
            this.schema.mappedClass = constructor;
            if (constructor.prototype instanceof Entity) {
                constructor =  (function (_super) {
                    __extends(class_1, _super);
                    function class_1() {
                        return _super !== null && _super.apply(this, arguments) || this;
                    }
                    Object.defineProperty(class_1.prototype, "db", {
                        get: function () { return db; },
                        enumerable: false,
                        configurable: true
                    });
                    class_1.prototype.table = function () { return tableName; };
                    return class_1;
                }(constructor));
            }
            var inheritedProps = new Set();
            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {
                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });
            }
            var readHook = function (obj) {
                if (!obj)
                    return obj;
                var res = Object.create(constructor.prototype);
                for (var m in obj)
                    if (!inheritedProps.has(m))
                        try {
                            res[m] = obj[m];
                        }
                        catch (_) { }
                return res;
            };
            if (this.schema.readHook) {
                this.hook.reading.unsubscribe(this.schema.readHook);
            }
            this.schema.readHook = readHook;
            this.hook("reading", readHook);
            return constructor;
        };
        Table.prototype.defineClass = function () {
            function Class(content) {
                extend(this, content);
            }
            return this.mapToClass(Class);
        };
        Table.prototype.add = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });
            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.upsert = function (key, modifications) {
            var _this = this;
            var keyPath = this.schema.primKey.keyPath;
            return this._trans('readwrite', function (trans) {
                return _this.core.get({ trans: trans, key: key }).then(function (existing) {
                    var obj = existing !== null && existing !== void 0 ? existing : {};
                    applyUpdateSpec(obj, modifications);
                    if (keyPath)
                        setByKeyPath(obj, keyPath, key);
                    return _this.core.mutate({
                        trans: trans,
                        type: 'put',
                        values: [obj],
                        keys: [key],
                        upsert: true,
                        updates: { keys: [key], changeSpecs: [modifications] }
                    }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : !!existing; });
                });
            });
        };
        Table.prototype.update = function (keyOrObject, modifications) {
            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {
                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);
                if (key === undefined)
                    return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));
                return this.where(":id").equals(key).modify(modifications);
            }
            else {
                return this.where(":id").equals(keyOrObject).modify(modifications);
            }
        };
        Table.prototype.put = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.delete = function (key) {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })
                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });
        };
        Table.prototype.clear = function () {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })
                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });
        };
        Table.prototype.bulkGet = function (keys) {
            var _this = this;
            return this._trans('readonly', function (trans) {
                return _this.core.getMany({
                    keys: keys,
                    trans: trans
                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });
            });
        };
        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToAdd = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkAdd(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToPut = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkPut(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkUpdate = function (keysAndChanges) {
            var _this = this;
            var coreTable = this.core;
            var keys = keysAndChanges.map(function (entry) { return entry.key; });
            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });
            var offsetMap = [];
            return this._trans('readwrite', function (trans) {
                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {
                    var resultKeys = [];
                    var resultObjs = [];
                    keysAndChanges.forEach(function (_a, idx) {
                        var key = _a.key, changes = _a.changes;
                        var obj = objs[idx];
                        if (obj) {
                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {
                                var keyPath = _b[_i];
                                var value = changes[keyPath];
                                if (keyPath === _this.schema.primKey.keyPath) {
                                    if (cmp(value, key) !== 0) {
                                        throw new exceptions.Constraint("Cannot update primary key in bulkUpdate()");
                                    }
                                }
                                else {
                                    setByKeyPath(obj, keyPath, value);
                                }
                            }
                            offsetMap.push(idx);
                            resultKeys.push(key);
                            resultObjs.push(obj);
                        }
                    });
                    var numEntries = resultKeys.length;
                    return coreTable
                        .mutate({
                        trans: trans,
                        type: 'put',
                        keys: resultKeys,
                        values: resultObjs,
                        updates: {
                            keys: keys,
                            changeSpecs: changeSpecs
                        }
                    })
                        .then(function (_a) {
                        var numFailures = _a.numFailures, failures = _a.failures;
                        if (numFailures === 0)
                            return numEntries;
                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {
                            var offset = _b[_i];
                            var mappedOffset = offsetMap[Number(offset)];
                            if (mappedOffset != null) {
                                var failure = failures[offset];
                                delete failures[offset];
                                failures[mappedOffset] = failure;
                            }
                        }
                        throw new BulkError("".concat(_this.name, ".bulkUpdate(): ").concat(numFailures, " of ").concat(numEntries, " operations failed"), failures);
                    });
                });
            });
        };
        Table.prototype.bulkDelete = function (keys) {
            var _this = this;
            var numKeys = keys.length;
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })
                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });
            }).then(function (_a) {
                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;
                if (numFailures === 0)
                    return lastResult;
                throw new BulkError("".concat(_this.name, ".bulkDelete(): ").concat(numFailures, " of ").concat(numKeys, " operations failed"), failures);
            });
        };
        return Table;
    }());

    function Events(ctx) {
        var evs = {};
        var rv = function (eventName, subscriber) {
            if (subscriber) {
                var i = arguments.length, args = new Array(i - 1);
                while (--i)
                    args[i - 1] = arguments[i];
                evs[eventName].subscribe.apply(null, args);
                return ctx;
            }
            else if (typeof (eventName) === 'string') {
                return evs[eventName];
            }
        };
        rv.addEventType = add;
        for (var i = 1, l = arguments.length; i < l; ++i) {
            add(arguments[i]);
        }
        return rv;
        function add(eventName, chainFunction, defaultFunction) {
            if (typeof eventName === 'object')
                return addConfiguredEvents(eventName);
            if (!chainFunction)
                chainFunction = reverseStoppableEventChain;
            if (!defaultFunction)
                defaultFunction = nop;
            var context = {
                subscribers: [],
                fire: defaultFunction,
                subscribe: function (cb) {
                    if (context.subscribers.indexOf(cb) === -1) {
                        context.subscribers.push(cb);
                        context.fire = chainFunction(context.fire, cb);
                    }
                },
                unsubscribe: function (cb) {
                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });
                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);
                }
            };
            evs[eventName] = rv[eventName] = context;
            return context;
        }
        function addConfiguredEvents(cfg) {
            keys(cfg).forEach(function (eventName) {
                var args = cfg[eventName];
                if (isArray(args)) {
                    add(eventName, cfg[eventName][0], cfg[eventName][1]);
                }
                else if (args === 'asap') {
                    var context = add(eventName, mirror, function fire() {
                        var i = arguments.length, args = new Array(i);
                        while (i--)
                            args[i] = arguments[i];
                        context.subscribers.forEach(function (fn) {
                            asap$1(function fireEvent() {
                                fn.apply(null, args);
                            });
                        });
                    });
                }
                else
                    throw new exceptions.InvalidArgument("Invalid event config");
            });
        }
    }

    function makeClassConstructor(prototype, constructor) {
        derive(constructor).from({ prototype: prototype });
        return constructor;
    }

    function createTableConstructor(db) {
        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {
            this.db = db;
            this._tx = trans;
            this.name = name;
            this.schema = tableSchema;
            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {
                "creating": [hookCreatingChain, nop],
                "reading": [pureFunctionChain, mirror],
                "updating": [hookUpdatingChain, nop],
                "deleting": [hookDeletingChain, nop]
            });
        });
    }

    function isPlainKeyRange(ctx, ignoreLimitFilter) {
        return !(ctx.filter || ctx.algorithm || ctx.or) &&
            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);
    }
    function addFilter(ctx, fn) {
        ctx.filter = combine(ctx.filter, fn);
    }
    function addReplayFilter(ctx, factory, isLimitFilter) {
        var curr = ctx.replayFilter;
        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;
        ctx.justLimit = isLimitFilter && !curr;
    }
    function addMatchFilter(ctx, fn) {
        ctx.isMatch = combine(ctx.isMatch, fn);
    }
    function getIndexOrStore(ctx, coreSchema) {
        if (ctx.isPrimKey)
            return coreSchema.primaryKey;
        var index = coreSchema.getIndexByKeyPath(ctx.index);
        if (!index)
            throw new exceptions.Schema("KeyPath " + ctx.index + " on object store " + coreSchema.name + " is not indexed");
        return index;
    }
    function openCursor(ctx, coreTable, trans) {
        var index = getIndexOrStore(ctx, coreTable.schema);
        return coreTable.openCursor({
            trans: trans,
            values: !ctx.keysOnly,
            reverse: ctx.dir === 'prev',
            unique: !!ctx.unique,
            query: {
                index: index,
                range: ctx.range
            }
        });
    }
    function iter(ctx, fn, coreTrans, coreTable) {
        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;
        if (!ctx.or) {
            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);
        }
        else {
            var set_1 = {};
            var union = function (item, cursor, advance) {
                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {
                    var primaryKey = cursor.primaryKey;
                    var key = '' + primaryKey;
                    if (key === '[object ArrayBuffer]')
                        key = '' + new Uint8Array(primaryKey);
                    if (!hasOwn(set_1, key)) {
                        set_1[key] = true;
                        fn(item, cursor, advance);
                    }
                }
            };
            return Promise.all([
                ctx.or._iterate(union, coreTrans),
                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)
            ]);
        }
    }
    function iterate(cursorPromise, filter, fn, valueMapper) {
        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;
        var wrappedFn = wrap(mappedFn);
        return cursorPromise.then(function (cursor) {
            if (cursor) {
                return cursor.start(function () {
                    var c = function () { return cursor.continue(); };
                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))
                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });
                    c();
                });
            }
        });
    }

    var Collection =  (function () {
        function Collection() {
        }
        Collection.prototype._read = function (fn, cb) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readonly', fn).then(cb);
        };
        Collection.prototype._write = function (fn) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readwrite', fn, "locked");
        };
        Collection.prototype._addAlgorithm = function (fn) {
            var ctx = this._ctx;
            ctx.algorithm = combine(ctx.algorithm, fn);
        };
        Collection.prototype._iterate = function (fn, coreTrans) {
            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);
        };
        Collection.prototype.clone = function (props) {
            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);
            if (props)
                extend(ctx, props);
            rv._ctx = ctx;
            return rv;
        };
        Collection.prototype.raw = function () {
            this._ctx.valueMapper = null;
            return this;
        };
        Collection.prototype.each = function (fn) {
            var ctx = this._ctx;
            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });
        };
        Collection.prototype.count = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                var coreTable = ctx.table.core;
                if (isPlainKeyRange(ctx, true)) {
                    return coreTable.count({
                        trans: trans,
                        query: {
                            index: getIndexOrStore(ctx, coreTable.schema),
                            range: ctx.range
                        }
                    }).then(function (count) { return Math.min(count, ctx.limit); });
                }
                else {
                    var count = 0;
                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)
                        .then(function () { return count; });
                }
            }).then(cb);
        };
        Collection.prototype.sortBy = function (keyPath, cb) {
            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;
            function getval(obj, i) {
                if (i)
                    return getval(obj[parts[i]], i - 1);
                return obj[lastPart];
            }
            var order = this._ctx.dir === "next" ? 1 : -1;
            function sorter(a, b) {
                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);
                return cmp(aVal, bVal) * order;
            }
            return this.toArray(function (a) {
                return a.sort(sorter);
            }).then(cb);
        };
        Collection.prototype.toArray = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                    var valueMapper_1 = ctx.valueMapper;
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        limit: ctx.limit,
                        values: true,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    }).then(function (_a) {
                        var result = _a.result;
                        return valueMapper_1 ? result.map(valueMapper_1) : result;
                    });
                }
                else {
                    var a_1 = [];
                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });
                }
            }, cb);
        };
        Collection.prototype.offset = function (offset) {
            var ctx = this._ctx;
            if (offset <= 0)
                return this;
            ctx.offset += offset;
            if (isPlainKeyRange(ctx)) {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function (cursor, advance) {
                        if (offsetLeft === 0)
                            return true;
                        if (offsetLeft === 1) {
                            --offsetLeft;
                            return false;
                        }
                        advance(function () {
                            cursor.advance(offsetLeft);
                            offsetLeft = 0;
                        });
                        return false;
                    };
                });
            }
            else {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function () { return (--offsetLeft < 0); };
                });
            }
            return this;
        };
        Collection.prototype.limit = function (numRows) {
            this._ctx.limit = Math.min(this._ctx.limit, numRows);
            addReplayFilter(this._ctx, function () {
                var rowsLeft = numRows;
                return function (cursor, advance, resolve) {
                    if (--rowsLeft <= 0)
                        advance(resolve);
                    return rowsLeft >= 0;
                };
            }, true);
            return this;
        };
        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {
            addFilter(this._ctx, function (cursor, advance, resolve) {
                if (filterFunction(cursor.value)) {
                    advance(resolve);
                    return bIncludeStopEntry;
                }
                else {
                    return true;
                }
            });
            return this;
        };
        Collection.prototype.first = function (cb) {
            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.last = function (cb) {
            return this.reverse().first(cb);
        };
        Collection.prototype.filter = function (filterFunction) {
            addFilter(this._ctx, function (cursor) {
                return filterFunction(cursor.value);
            });
            addMatchFilter(this._ctx, filterFunction);
            return this;
        };
        Collection.prototype.and = function (filter) {
            return this.filter(filter);
        };
        Collection.prototype.or = function (indexName) {
            return new this.db.WhereClause(this._ctx.table, indexName, this);
        };
        Collection.prototype.reverse = function () {
            this._ctx.dir = (this._ctx.dir === "prev" ? "next" : "prev");
            if (this._ondirectionchange)
                this._ondirectionchange(this._ctx.dir);
            return this;
        };
        Collection.prototype.desc = function () {
            return this.reverse();
        };
        Collection.prototype.eachKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.key, cursor); });
        };
        Collection.prototype.eachUniqueKey = function (cb) {
            this._ctx.unique = "unique";
            return this.eachKey(cb);
        };
        Collection.prototype.eachPrimaryKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });
        };
        Collection.prototype.keys = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.key);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.primaryKeys = function (cb) {
            var ctx = this._ctx;
            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                return this._read(function (trans) {
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        values: false,
                        limit: ctx.limit,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    });
                }).then(function (_a) {
                    var result = _a.result;
                    return result;
                }).then(cb);
            }
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.primaryKey);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.uniqueKeys = function (cb) {
            this._ctx.unique = "unique";
            return this.keys(cb);
        };
        Collection.prototype.firstKey = function (cb) {
            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.lastKey = function (cb) {
            return this.reverse().firstKey(cb);
        };
        Collection.prototype.distinct = function () {
            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];
            if (!idx || !idx.multi)
                return this;
            var set = {};
            addFilter(this._ctx, function (cursor) {
                var strKey = cursor.primaryKey.toString();
                var found = hasOwn(set, strKey);
                set[strKey] = true;
                return !found;
            });
            return this;
        };
        Collection.prototype.modify = function (changes) {
            var _this = this;
            var ctx = this._ctx;
            return this._write(function (trans) {
                var modifyer;
                if (typeof changes === 'function') {
                    modifyer = changes;
                }
                else {
                    modifyer = function (item) { return applyUpdateSpec(item, changes); };
                }
                var coreTable = ctx.table.core;
                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;
                var limit = 200;
                var modifyChunkSize = _this.db._options.modifyChunkSize;
                if (modifyChunkSize) {
                    if (typeof modifyChunkSize == 'object') {
                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;
                    }
                    else {
                        limit = modifyChunkSize;
                    }
                }
                var totalFailures = [];
                var successCount = 0;
                var failedKeys = [];
                var applyMutateResult = function (expectedCount, res) {
                    var failures = res.failures, numFailures = res.numFailures;
                    successCount += expectedCount - numFailures;
                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {
                        var pos = _a[_i];
                        totalFailures.push(failures[pos]);
                    }
                };
                var isUnconditionalDelete = changes === deleteCallback;
                return _this.clone().primaryKeys().then(function (keys) {
                    var criteria = isPlainKeyRange(ctx) &&
                        ctx.limit === Infinity &&
                        (typeof changes !== 'function' || isUnconditionalDelete) && {
                        index: ctx.index,
                        range: ctx.range
                    };
                    var nextChunk = function (offset) {
                        var count = Math.min(limit, keys.length - offset);
                        var keysInChunk = keys.slice(offset, offset + count);
                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({
                            trans: trans,
                            keys: keysInChunk,
                            cache: "immutable"
                        })).then(function (values) {
                            var addValues = [];
                            var putValues = [];
                            var putKeys = outbound ? [] : null;
                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];
                            if (!isUnconditionalDelete)
                                for (var i = 0; i < count; ++i) {
                                    var origValue = values[i];
                                    var ctx_1 = {
                                        value: deepClone(origValue),
                                        primKey: keys[offset + i]
                                    };
                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {
                                        if (ctx_1.value == null) {
                                            deleteKeys.push(keys[offset + i]);
                                        }
                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {
                                            deleteKeys.push(keys[offset + i]);
                                            addValues.push(ctx_1.value);
                                        }
                                        else {
                                            putValues.push(ctx_1.value);
                                            if (outbound)
                                                putKeys.push(keys[offset + i]);
                                        }
                                    }
                                }
                            return Promise.resolve(addValues.length > 0 &&
                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })
                                    .then(function (res) {
                                    for (var pos in res.failures) {
                                        deleteKeys.splice(parseInt(pos), 1);
                                    }
                                    applyMutateResult(addValues.length, res);
                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'put',
                                    keys: putKeys,
                                    values: putValues,
                                    criteria: criteria,
                                    changeSpec: typeof changes !== 'function'
                                        && changes,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'delete',
                                    keys: deleteKeys,
                                    criteria: criteria,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })
                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {
                                return keys.length > offset + count && nextChunk(offset + limit);
                            });
                        });
                    };
                    return nextChunk(0).then(function () {
                        if (totalFailures.length > 0)
                            throw new ModifyError("Error modifying one or more objects", totalFailures, successCount, failedKeys);
                        return keys.length;
                    });
                });
            });
        };
        Collection.prototype.delete = function () {
            var ctx = this._ctx, range = ctx.range;
            if (isPlainKeyRange(ctx) &&
                !ctx.table.schema.yProps &&
                (ctx.isPrimKey || range.type === 3 ))
             {
                return this._write(function (trans) {
                    var primaryKey = ctx.table.core.schema.primaryKey;
                    var coreRange = range;
                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {
                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })
                            .then(function (_a) {
                            var failures = _a.failures, numFailures = _a.numFailures;
                            if (numFailures)
                                throw new ModifyError("Could not delete some values", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);
                            return count - numFailures;
                        });
                    });
                });
            }
            return this.modify(deleteCallback);
        };
        return Collection;
    }());
    var deleteCallback = function (value, ctx) { return ctx.value = null; };

    function createCollectionConstructor(db) {
        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {
            this.db = db;
            var keyRange = AnyRange, error = null;
            if (keyRangeGenerator)
                try {
                    keyRange = keyRangeGenerator();
                }
                catch (ex) {
                    error = ex;
                }
            var whereCtx = whereClause._ctx;
            var table = whereCtx.table;
            var readingHook = table.hook.reading.fire;
            this._ctx = {
                table: table,
                index: whereCtx.index,
                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),
                range: keyRange,
                keysOnly: false,
                dir: "next",
                unique: "",
                algorithm: null,
                filter: null,
                replayFilter: null,
                justLimit: true,
                isMatch: null,
                offset: 0,
                limit: Infinity,
                error: error,
                or: whereCtx.or,
                valueMapper: readingHook !== mirror ? readingHook : null
            };
        });
    }

    function simpleCompare(a, b) {
        return a < b ? -1 : a === b ? 0 : 1;
    }
    function simpleCompareReverse(a, b) {
        return a > b ? -1 : a === b ? 0 : 1;
    }

    function fail(collectionOrWhereClause, err, T) {
        var collection = collectionOrWhereClause instanceof WhereClause ?
            new collectionOrWhereClause.Collection(collectionOrWhereClause) :
            collectionOrWhereClause;
        collection._ctx.error = T ? new T(err) : new TypeError(err);
        return collection;
    }
    function emptyCollection(whereClause) {
        return new whereClause.Collection(whereClause, function () { return rangeEqual(""); }).limit(0);
    }
    function upperFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toUpperCase(); } :
            function (s) { return s.toLowerCase(); };
    }
    function lowerFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toLowerCase(); } :
            function (s) { return s.toUpperCase(); };
    }
    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {
        var length = Math.min(key.length, lowerNeedle.length);
        var llp = -1;
        for (var i = 0; i < length; ++i) {
            var lwrKeyChar = lowerKey[i];
            if (lwrKeyChar !== lowerNeedle[i]) {
                if (cmp(key[i], upperNeedle[i]) < 0)
                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);
                if (cmp(key[i], lowerNeedle[i]) < 0)
                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);
                if (llp >= 0)
                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);
                return null;
            }
            if (cmp(key[i], lwrKeyChar) < 0)
                llp = i;
        }
        if (length < lowerNeedle.length && dir === "next")
            return key + upperNeedle.substr(key.length);
        if (length < key.length && dir === "prev")
            return key.substr(0, upperNeedle.length);
        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));
    }
    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {
        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;
        if (!needles.every(function (s) { return typeof s === 'string'; })) {
            return fail(whereClause, STRING_EXPECTED);
        }
        function initDirection(dir) {
            upper = upperFactory(dir);
            lower = lowerFactory(dir);
            compare = (dir === "next" ? simpleCompare : simpleCompareReverse);
            var needleBounds = needles.map(function (needle) {
                return { lower: lower(needle), upper: upper(needle) };
            }).sort(function (a, b) {
                return compare(a.lower, b.lower);
            });
            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });
            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });
            direction = dir;
            nextKeySuffix = (dir === "next" ? "" : suffix);
        }
        initDirection("next");
        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });
        c._ondirectionchange = function (direction) {
            initDirection(direction);
        };
        var firstPossibleNeedle = 0;
        c._addAlgorithm(function (cursor, advance, resolve) {
            var key = cursor.key;
            if (typeof key !== 'string')
                return false;
            var lowerKey = lower(key);
            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {
                return true;
            }
            else {
                var lowestPossibleCasing = null;
                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {
                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);
                    if (casing === null && lowestPossibleCasing === null)
                        firstPossibleNeedle = i + 1;
                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {
                        lowestPossibleCasing = casing;
                    }
                }
                if (lowestPossibleCasing !== null) {
                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });
                }
                else {
                    advance(resolve);
                }
                return false;
            }
        });
        return c;
    }
    function createRange(lower, upper, lowerOpen, upperOpen) {
        return {
            type: 2 ,
            lower: lower,
            upper: upper,
            lowerOpen: lowerOpen,
            upperOpen: upperOpen
        };
    }
    function rangeEqual(value) {
        return {
            type: 1 ,
            lower: value,
            upper: value
        };
    }

    var WhereClause =  (function () {
        function WhereClause() {
        }
        Object.defineProperty(WhereClause.prototype, "Collection", {
            get: function () {
                return this._ctx.table.db.Collection;
            },
            enumerable: false,
            configurable: true
        });
        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {
            includeLower = includeLower !== false;
            includeUpper = includeUpper === true;
            try {
                if ((this._cmp(lower, upper) > 0) ||
                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))
                    return emptyCollection(this);
                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
        };
        WhereClause.prototype.equals = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return rangeEqual(value); });
        };
        WhereClause.prototype.above = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, true); });
        };
        WhereClause.prototype.aboveOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, false); });
        };
        WhereClause.prototype.below = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });
        };
        WhereClause.prototype.belowOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value); });
        };
        WhereClause.prototype.startsWith = function (str) {
            if (typeof str !== 'string')
                return fail(this, STRING_EXPECTED);
            return this.between(str, str + maxString, true, true);
        };
        WhereClause.prototype.startsWithIgnoreCase = function (str) {
            if (str === "")
                return this.startsWith(str);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);
        };
        WhereClause.prototype.equalsIgnoreCase = function (str) {
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], "");
        };
        WhereClause.prototype.anyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, "");
        };
        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);
        };
        WhereClause.prototype.anyOf = function () {
            var _this = this;
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            var compare = this._cmp;
            try {
                set.sort(compare);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            if (set.length === 0)
                return emptyCollection(this);
            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });
            c._ondirectionchange = function (direction) {
                compare = (direction === "next" ?
                    _this._ascending :
                    _this._descending);
                set.sort(compare);
            };
            var i = 0;
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (compare(key, set[i]) > 0) {
                    ++i;
                    if (i === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (compare(key, set[i]) === 0) {
                    return true;
                }
                else {
                    advance(function () { cursor.continue(set[i]); });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.notEqual = function (value) {
            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.noneOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return new this.Collection(this);
            try {
                set.sort(this._ascending);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var ranges = set.reduce(function (res, val) { return res ?
                res.concat([[res[res.length - 1][1], val]]) :
                [[minKey, val]]; }, null);
            ranges.push([set[set.length - 1], this.db._maxKey]);
            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.inAnyRange = function (ranges, options) {
            var _this = this;
            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;
            if (ranges.length === 0)
                return emptyCollection(this);
            if (!ranges.every(function (range) {
                return range[0] !== undefined &&
                    range[1] !== undefined &&
                    ascending(range[0], range[1]) <= 0;
            })) {
                return fail(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", exceptions.InvalidArgument);
            }
            var includeLowers = !options || options.includeLowers !== false;
            var includeUppers = options && options.includeUppers === true;
            function addRange(ranges, newRange) {
                var i = 0, l = ranges.length;
                for (; i < l; ++i) {
                    var range = ranges[i];
                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {
                        range[0] = min(range[0], newRange[0]);
                        range[1] = max(range[1], newRange[1]);
                        break;
                    }
                }
                if (i === l)
                    ranges.push(newRange);
                return ranges;
            }
            var sortDirection = ascending;
            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }
            var set;
            try {
                set = ranges.reduce(addRange, []);
                set.sort(rangeSorter);
            }
            catch (ex) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var rangePos = 0;
            var keyIsBeyondCurrentEntry = includeUppers ?
                function (key) { return ascending(key, set[rangePos][1]) > 0; } :
                function (key) { return ascending(key, set[rangePos][1]) >= 0; };
            var keyIsBeforeCurrentEntry = includeLowers ?
                function (key) { return descending(key, set[rangePos][0]) > 0; } :
                function (key) { return descending(key, set[rangePos][0]) >= 0; };
            function keyWithinCurrentRange(key) {
                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);
            }
            var checkKey = keyIsBeyondCurrentEntry;
            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });
            c._ondirectionchange = function (direction) {
                if (direction === "next") {
                    checkKey = keyIsBeyondCurrentEntry;
                    sortDirection = ascending;
                }
                else {
                    checkKey = keyIsBeforeCurrentEntry;
                    sortDirection = descending;
                }
                set.sort(rangeSorter);
            };
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (checkKey(key)) {
                    ++rangePos;
                    if (rangePos === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (keyWithinCurrentRange(key)) {
                    return true;
                }
                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {
                    return false;
                }
                else {
                    advance(function () {
                        if (sortDirection === ascending)
                            cursor.continue(set[rangePos][0]);
                        else
                            cursor.continue(set[rangePos][1]);
                    });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.startsWithAnyOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (!set.every(function (s) { return typeof s === 'string'; })) {
                return fail(this, "startsWithAnyOf() only works with strings");
            }
            if (set.length === 0)
                return emptyCollection(this);
            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));
        };
        return WhereClause;
    }());

    function createWhereClauseConstructor(db) {
        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {
            this.db = db;
            this._ctx = {
                table: table,
                index: index === ":id" ? null : index,
                or: orCollection
            };
            this._cmp = this._ascending = cmp;
            this._descending = function (a, b) { return cmp(b, a); };
            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };
            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };
            this._IDBKeyRange = db._deps.IDBKeyRange;
            if (!this._IDBKeyRange)
                throw new exceptions.MissingAPI();
        });
    }

    function eventRejectHandler(reject) {
        return wrap(function (event) {
            preventDefault(event);
            reject(event.target.error);
            return false;
        });
    }
    function preventDefault(event) {
        if (event.stopPropagation)
            event.stopPropagation();
        if (event.preventDefault)
            event.preventDefault();
    }

    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';
    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';
    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);

    var Transaction =  (function () {
        function Transaction() {
        }
        Transaction.prototype._lock = function () {
            assert(!PSD.global);
            ++this._reculock;
            if (this._reculock === 1 && !PSD.global)
                PSD.lockOwnerFor = this;
            return this;
        };
        Transaction.prototype._unlock = function () {
            assert(!PSD.global);
            if (--this._reculock === 0) {
                if (!PSD.global)
                    PSD.lockOwnerFor = null;
                while (this._blockedFuncs.length > 0 && !this._locked()) {
                    var fnAndPSD = this._blockedFuncs.shift();
                    try {
                        usePSD(fnAndPSD[1], fnAndPSD[0]);
                    }
                    catch (e) { }
                }
            }
            return this;
        };
        Transaction.prototype._locked = function () {
            return this._reculock && PSD.lockOwnerFor !== this;
        };
        Transaction.prototype.create = function (idbtrans) {
            var _this = this;
            if (!this.mode)
                return this;
            var idbdb = this.db.idbdb;
            var dbOpenError = this.db._state.dbOpenError;
            assert(!this.idbtrans);
            if (!idbtrans && !idbdb) {
                switch (dbOpenError && dbOpenError.name) {
                    case "DatabaseClosedError":
                        throw new exceptions.DatabaseClosed(dbOpenError);
                    case "MissingAPIError":
                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);
                    default:
                        throw new exceptions.OpenFailed(dbOpenError);
                }
            }
            if (!this.active)
                throw new exceptions.TransactionInactive();
            assert(this._completion._state === null);
            idbtrans = this.idbtrans = idbtrans ||
                (this.db.core
                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })
                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));
            idbtrans.onerror = wrap(function (ev) {
                preventDefault(ev);
                _this._reject(idbtrans.error);
            });
            idbtrans.onabort = wrap(function (ev) {
                preventDefault(ev);
                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));
                _this.active = false;
                _this.on("abort").fire(ev);
            });
            idbtrans.oncomplete = wrap(function () {
                _this.active = false;
                _this._resolve();
                if ('mutatedParts' in idbtrans) {
                    globalEvents.storagemutated.fire(idbtrans["mutatedParts"]);
                }
            });
            return this;
        };
        Transaction.prototype._promise = function (mode, fn, bWriteLock) {
            var _this = this;
            if (mode === 'readwrite' && this.mode !== 'readwrite')
                return rejection(new exceptions.ReadOnly("Transaction is readonly"));
            if (!this.active)
                return rejection(new exceptions.TransactionInactive());
            if (this._locked()) {
                return new DexiePromise(function (resolve, reject) {
                    _this._blockedFuncs.push([function () {
                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);
                        }, PSD]);
                });
            }
            else if (bWriteLock) {
                return newScope(function () {
                    var p = new DexiePromise(function (resolve, reject) {
                        _this._lock();
                        var rv = fn(resolve, reject, _this);
                        if (rv && rv.then)
                            rv.then(resolve, reject);
                    });
                    p.finally(function () { return _this._unlock(); });
                    p._lib = true;
                    return p;
                });
            }
            else {
                var p = new DexiePromise(function (resolve, reject) {
                    var rv = fn(resolve, reject, _this);
                    if (rv && rv.then)
                        rv.then(resolve, reject);
                });
                p._lib = true;
                return p;
            }
        };
        Transaction.prototype._root = function () {
            return this.parent ? this.parent._root() : this;
        };
        Transaction.prototype.waitFor = function (promiseLike) {
            var root = this._root();
            var promise = DexiePromise.resolve(promiseLike);
            if (root._waitingFor) {
                root._waitingFor = root._waitingFor.then(function () { return promise; });
            }
            else {
                root._waitingFor = promise;
                root._waitingQueue = [];
                var store = root.idbtrans.objectStore(root.storeNames[0]);
                (function spin() {
                    ++root._spinCount;
                    while (root._waitingQueue.length)
                        (root._waitingQueue.shift())();
                    if (root._waitingFor)
                        store.get(-Infinity).onsuccess = spin;
                }());
            }
            var currentWaitPromise = root._waitingFor;
            return new DexiePromise(function (resolve, reject) {
                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {
                    if (root._waitingFor === currentWaitPromise) {
                        root._waitingFor = null;
                    }
                });
            });
        };
        Transaction.prototype.abort = function () {
            if (this.active) {
                this.active = false;
                if (this.idbtrans)
                    this.idbtrans.abort();
                this._reject(new exceptions.Abort());
            }
        };
        Transaction.prototype.table = function (tableName) {
            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));
            if (hasOwn(memoizedTables, tableName))
                return memoizedTables[tableName];
            var tableSchema = this.schema[tableName];
            if (!tableSchema) {
                throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
            }
            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);
            transactionBoundTable.core = this.db.core.table(tableName);
            memoizedTables[tableName] = transactionBoundTable;
            return transactionBoundTable;
        };
        return Transaction;
    }());

    function createTransactionConstructor(db) {
        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {
            var _this = this;
            if (mode !== 'readonly')
                storeNames.forEach(function (storeName) {
                    var _a;
                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;
                    if (yProps)
                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));
                });
            this.db = db;
            this.mode = mode;
            this.storeNames = storeNames;
            this.schema = dbschema;
            this.chromeTransactionDurability = chromeTransactionDurability;
            this.idbtrans = null;
            this.on = Events(this, "complete", "error", "abort");
            this.parent = parent || null;
            this.active = true;
            this._reculock = 0;
            this._blockedFuncs = [];
            this._resolve = null;
            this._reject = null;
            this._waitingFor = null;
            this._waitingQueue = null;
            this._spinCount = 0;
            this._completion = new DexiePromise(function (resolve, reject) {
                _this._resolve = resolve;
                _this._reject = reject;
            });
            this._completion.then(function () {
                _this.active = false;
                _this.on.complete.fire();
            }, function (e) {
                var wasActive = _this.active;
                _this.active = false;
                _this.on.error.fire(e);
                _this.parent ?
                    _this.parent._reject(e) :
                    wasActive && _this.idbtrans && _this.idbtrans.abort();
                return rejection(e);
            });
        });
    }

    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {
        return {
            name: name,
            keyPath: keyPath,
            unique: unique,
            multi: multi,
            auto: auto,
            compound: compound,
            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? "++" : "") + nameFromKeyPath(keyPath),
            type: type
        };
    }
    function nameFromKeyPath(keyPath) {
        return typeof keyPath === 'string' ?
            keyPath :
            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : "";
    }

    function createTableSchema(name, primKey, indexes) {
        return {
            name: name,
            primKey: primKey,
            indexes: indexes,
            mappedClass: null,
            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),
        };
    }

    function safariMultiStoreFix(storeNames) {
        return storeNames.length === 1 ? storeNames[0] : storeNames;
    }
    var getMaxKey = function (IdbKeyRange) {
        try {
            IdbKeyRange.only([[]]);
            getMaxKey = function () { return [[]]; };
            return [[]];
        }
        catch (e) {
            getMaxKey = function () { return maxString; };
            return maxString;
        }
    };

    function getKeyExtractor(keyPath) {
        if (keyPath == null) {
            return function () { return undefined; };
        }
        else if (typeof keyPath === 'string') {
            return getSinglePathKeyExtractor(keyPath);
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }
    function getSinglePathKeyExtractor(keyPath) {
        var split = keyPath.split('.');
        if (split.length === 1) {
            return function (obj) { return obj[keyPath]; };
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }

    function arrayify(arrayLike) {
        return [].slice.call(arrayLike);
    }
    var _id_counter = 0;
    function getKeyPathAlias(keyPath) {
        return keyPath == null ?
            ":id" :
            typeof keyPath === 'string' ?
                keyPath :
                "[".concat(keyPath.join('+'), "]");
    }
    function createDBCore(db, IdbKeyRange, tmpTrans) {
        function extractSchema(db, trans) {
            var tables = arrayify(db.objectStoreNames);
            return {
                schema: {
                    name: db.name,
                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {
                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;
                        var compound = isArray(keyPath);
                        var outbound = keyPath == null;
                        var indexByKeyPath = {};
                        var result = {
                            name: store.name,
                            primaryKey: {
                                name: null,
                                isPrimaryKey: true,
                                outbound: outbound,
                                compound: compound,
                                keyPath: keyPath,
                                autoIncrement: autoIncrement,
                                unique: true,
                                extractKey: getKeyExtractor(keyPath)
                            },
                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })
                                .map(function (index) {
                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;
                                var compound = isArray(keyPath);
                                var result = {
                                    name: name,
                                    compound: compound,
                                    keyPath: keyPath,
                                    unique: unique,
                                    multiEntry: multiEntry,
                                    extractKey: getKeyExtractor(keyPath)
                                };
                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;
                                return result;
                            }),
                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }
                        };
                        indexByKeyPath[":id"] = result.primaryKey;
                        if (keyPath != null) {
                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;
                        }
                        return result;
                    })
                },
                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&
                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
                        !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
                        [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
            };
        }
        function makeIDBKeyRange(range) {
            if (range.type === 3 )
                return null;
            if (range.type === 4 )
                throw new Error("Cannot convert never type to IDBKeyRange");
            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;
            var idbRange = lower === undefined ?
                upper === undefined ?
                    null :
                    IdbKeyRange.upperBound(upper, !!upperOpen) :
                upper === undefined ?
                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :
                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);
            return idbRange;
        }
        function createDbCoreTable(tableSchema) {
            var tableName = tableSchema.name;
            function mutate(_a) {
                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var store = trans.objectStore(tableName);
                    var outbound = store.keyPath == null;
                    var isAddOrPut = type === "put" || type === "add";
                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')
                        throw new Error("Invalid operation type: " + type);
                    var length = (keys || values || { length: 1 }).length;
                    if (keys && values && keys.length !== values.length) {
                        throw new Error("Given keys array must have same length as given values array.");
                    }
                    if (length === 0)
                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });
                    var req;
                    var reqs = [];
                    var failures = [];
                    var numFailures = 0;
                    var errorHandler = function (event) {
                        ++numFailures;
                        preventDefault(event);
                    };
                    if (type === 'deleteRange') {
                        if (range.type === 4 )
                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });
                        if (range.type === 3 )
                            reqs.push(req = store.clear());
                        else
                            reqs.push(req = store.delete(makeIDBKeyRange(range)));
                    }
                    else {
                        var _a = isAddOrPut ?
                            outbound ?
                                [values, keys] :
                                [values, null] :
                            [keys, null], args1 = _a[0], args2 = _a[1];
                        if (isAddOrPut) {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = (args2 && args2[i] !== undefined ?
                                    store[type](args1[i], args2[i]) :
                                    store[type](args1[i])));
                                req.onerror = errorHandler;
                            }
                        }
                        else {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = store[type](args1[i]));
                                req.onerror = errorHandler;
                            }
                        }
                    }
                    var done = function (event) {
                        var lastResult = event.target.result;
                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });
                        resolve({
                            numFailures: numFailures,
                            failures: failures,
                            results: type === "delete" ? keys : reqs.map(function (req) { return req.result; }),
                            lastResult: lastResult
                        });
                    };
                    req.onerror = function (event) {
                        errorHandler(event);
                        done(event);
                    };
                    req.onsuccess = done;
                });
            }
            function openCursor(_a) {
                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var index = query.index, range = query.range;
                    var store = trans.objectStore(tableName);
                    var source = index.isPrimaryKey ?
                        store :
                        store.index(index.name);
                    var direction = reverse ?
                        unique ?
                            "prevunique" :
                            "prev" :
                        unique ?
                            "nextunique" :
                            "next";
                    var req = values || !('openKeyCursor' in source) ?
                        source.openCursor(makeIDBKeyRange(range), direction) :
                        source.openKeyCursor(makeIDBKeyRange(range), direction);
                    req.onerror = eventRejectHandler(reject);
                    req.onsuccess = wrap(function (ev) {
                        var cursor = req.result;
                        if (!cursor) {
                            resolve(null);
                            return;
                        }
                        cursor.___id = ++_id_counter;
                        cursor.done = false;
                        var _cursorContinue = cursor.continue.bind(cursor);
                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;
                        if (_cursorContinuePrimaryKey)
                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);
                        var _cursorAdvance = cursor.advance.bind(cursor);
                        var doThrowCursorIsNotStarted = function () { throw new Error("Cursor not started"); };
                        var doThrowCursorIsStopped = function () { throw new Error("Cursor not stopped"); };
                        cursor.trans = trans;
                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;
                        cursor.fail = wrap(reject);
                        cursor.next = function () {
                            var _this = this;
                            var gotOne = 1;
                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });
                        };
                        cursor.start = function (callback) {
                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {
                                resolveIteration = wrap(resolveIteration);
                                req.onerror = eventRejectHandler(rejectIteration);
                                cursor.fail = rejectIteration;
                                cursor.stop = function (value) {
                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;
                                    resolveIteration(value);
                                };
                            });
                            var guardedCallback = function () {
                                if (req.result) {
                                    try {
                                        callback();
                                    }
                                    catch (err) {
                                        cursor.fail(err);
                                    }
                                }
                                else {
                                    cursor.done = true;
                                    cursor.start = function () { throw new Error("Cursor behind last entry"); };
                                    cursor.stop();
                                }
                            };
                            req.onsuccess = wrap(function (ev) {
                                req.onsuccess = guardedCallback;
                                guardedCallback();
                            });
                            cursor.continue = _cursorContinue;
                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;
                            cursor.advance = _cursorAdvance;
                            guardedCallback();
                            return iterationPromise;
                        };
                        resolve(cursor);
                    }, reject);
                });
            }
            function query(hasGetAll) {
                return function (request) {
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;
                        var nonInfinitLimit = limit === Infinity ? undefined : limit;
                        var index = query.index, range = query.range;
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        if (limit === 0)
                            return resolve({ result: [] });
                        if (hasGetAll) {
                            var req = values ?
                                source.getAll(idbKeyRange, nonInfinitLimit) :
                                source.getAllKeys(idbKeyRange, nonInfinitLimit);
                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };
                            req.onerror = eventRejectHandler(reject);
                        }
                        else {
                            var count_1 = 0;
                            var req_1 = values || !('openKeyCursor' in source) ?
                                source.openCursor(idbKeyRange) :
                                source.openKeyCursor(idbKeyRange);
                            var result_1 = [];
                            req_1.onsuccess = function (event) {
                                var cursor = req_1.result;
                                if (!cursor)
                                    return resolve({ result: result_1 });
                                result_1.push(values ? cursor.value : cursor.primaryKey);
                                if (++count_1 === limit)
                                    return resolve({ result: result_1 });
                                cursor.continue();
                            };
                            req_1.onerror = eventRejectHandler(reject);
                        }
                    });
                };
            }
            return {
                name: tableName,
                schema: tableSchema,
                mutate: mutate,
                getMany: function (_a) {
                    var trans = _a.trans, keys = _a.keys;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var length = keys.length;
                        var result = new Array(length);
                        var keyCount = 0;
                        var callbackCount = 0;
                        var req;
                        var successHandler = function (event) {
                            var req = event.target;
                            if ((result[req._pos] = req.result) != null)
                                ;
                            if (++callbackCount === keyCount)
                                resolve(result);
                        };
                        var errorHandler = eventRejectHandler(reject);
                        for (var i = 0; i < length; ++i) {
                            var key = keys[i];
                            if (key != null) {
                                req = store.get(keys[i]);
                                req._pos = i;
                                req.onsuccess = successHandler;
                                req.onerror = errorHandler;
                                ++keyCount;
                            }
                        }
                        if (keyCount === 0)
                            resolve(result);
                    });
                },
                get: function (_a) {
                    var trans = _a.trans, key = _a.key;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var req = store.get(key);
                        req.onsuccess = function (event) { return resolve(event.target.result); };
                        req.onerror = eventRejectHandler(reject);
                    });
                },
                query: query(hasGetAll),
                openCursor: openCursor,
                count: function (_a) {
                    var query = _a.query, trans = _a.trans;
                    var index = query.index, range = query.range;
                    return new Promise(function (resolve, reject) {
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();
                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });
                        req.onerror = eventRejectHandler(reject);
                    });
                }
            };
        }
        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;
        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });
        var tableMap = {};
        tables.forEach(function (table) { return tableMap[table.name] = table; });
        return {
            stack: "dbcore",
            transaction: db.transaction.bind(db),
            table: function (name) {
                var result = tableMap[name];
                if (!result)
                    throw new Error("Table '".concat(name, "' not found"));
                return tableMap[name];
            },
            MIN_KEY: -Infinity,
            MAX_KEY: getMaxKey(IdbKeyRange),
            schema: schema
        };
    }

    function createMiddlewareStack(stackImpl, middlewares) {
        return middlewares.reduce(function (down, _a) {
            var create = _a.create;
            return (__assign(__assign({}, down), create(down)));
        }, stackImpl);
    }
    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {
        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;
        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);
        return {
            dbcore: dbcore
        };
    }
    function generateMiddlewareStacks(db, tmpTrans) {
        var idbdb = tmpTrans.db;
        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);
        db.core = stacks.dbcore;
        db.tables.forEach(function (table) {
            var tableName = table.name;
            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {
                table.core = db.core.table(tableName);
                if (db[tableName] instanceof db.Table) {
                    db[tableName].core = table.core;
                }
            }
        });
    }

    function setApiOnPlace(db, objs, tableNames, dbschema) {
        tableNames.forEach(function (tableName) {
            var schema = dbschema[tableName];
            objs.forEach(function (obj) {
                var propDesc = getPropertyDescriptor(obj, tableName);
                if (!propDesc || ("value" in propDesc && propDesc.value === undefined)) {
                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {
                        setProp(obj, tableName, {
                            get: function () { return this.table(tableName); },
                            set: function (value) {
                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });
                            }
                        });
                    }
                    else {
                        obj[tableName] = new db.Table(tableName, schema);
                    }
                }
            });
        });
    }
    function removeTablesApi(db, objs) {
        objs.forEach(function (obj) {
            for (var key in obj) {
                if (obj[key] instanceof db.Table)
                    delete obj[key];
            }
        });
    }
    function lowerVersionFirst(a, b) {
        return a._cfg.version - b._cfg.version;
    }
    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {
        var globalSchema = db._dbSchema;
        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {
            globalSchema.$meta = createTableSchema("$meta", parseIndexSyntax("")[0], []);
            db._storeNames.push('$meta');
        }
        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);
        trans.create(idbUpgradeTrans);
        trans._completion.catch(reject);
        var rejectTransaction = trans._reject.bind(trans);
        var transless = PSD.transless || PSD;
        newScope(function () {
            PSD.trans = trans;
            PSD.transless = transless;
            if (oldVersion === 0) {
                keys(globalSchema).forEach(function (tableName) {
                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);
                });
                generateMiddlewareStacks(db, idbUpgradeTrans);
                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);
            }
            else {
                generateMiddlewareStacks(db, idbUpgradeTrans);
                return getExistingVersion(db, trans, oldVersion)
                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })
                    .catch(rejectTransaction);
            }
        });
    }
    function patchCurrentVersion(db, idbUpgradeTrans) {
        createMissingTables(db._dbSchema, idbUpgradeTrans);
        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {
            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');
        }
        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);
        var diff = getSchemaDiff(globalSchema, db._dbSchema);
        var _loop_1 = function (tableChange) {
            if (tableChange.change.length || tableChange.recreate) {
                console.warn("Unable to patch indexes of table ".concat(tableChange.name, " because it has changes on the type of index or primary key."));
                return { value: void 0 };
            }
            var store = idbUpgradeTrans.objectStore(tableChange.name);
            tableChange.add.forEach(function (idx) {
                if (debug)
                    console.debug("Dexie upgrade patch: Creating missing index ".concat(tableChange.name, ".").concat(idx.src));
                addIndex(store, idx);
            });
        };
        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {
            var tableChange = _a[_i];
            var state_1 = _loop_1(tableChange);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    }
    function getExistingVersion(db, trans, oldVersion) {
        if (trans.storeNames.includes('$meta')) {
            return trans.table('$meta').get('version').then(function (metaVersion) {
                return metaVersion != null ? metaVersion : oldVersion;
            });
        }
        else {
            return DexiePromise.resolve(oldVersion);
        }
    }
    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {
        var queue = [];
        var versions = db._versions;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });
        if (versToRun.length === 0) {
            return DexiePromise.resolve();
        }
        versToRun.forEach(function (version) {
            queue.push(function () {
                var oldSchema = globalSchema;
                var newSchema = version._cfg.dbschema;
                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);
                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);
                globalSchema = db._dbSchema = newSchema;
                var diff = getSchemaDiff(oldSchema, newSchema);
                diff.add.forEach(function (tuple) {
                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);
                });
                diff.change.forEach(function (change) {
                    if (change.recreate) {
                        throw new exceptions.Upgrade("Not yet support for changing primary key");
                    }
                    else {
                        var store_1 = idbUpgradeTrans.objectStore(change.name);
                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });
                        change.change.forEach(function (idx) {
                            store_1.deleteIndex(idx.name);
                            addIndex(store_1, idx);
                        });
                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });
                    }
                });
                var contentUpgrade = version._cfg.contentUpgrade;
                if (contentUpgrade && version._cfg.version > oldVersion) {
                    generateMiddlewareStacks(db, idbUpgradeTrans);
                    trans._memoizedTables = {};
                    var upgradeSchema_1 = shallowClone(newSchema);
                    diff.del.forEach(function (table) {
                        upgradeSchema_1[table] = oldSchema[table];
                    });
                    removeTablesApi(db, [db.Transaction.prototype]);
                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);
                    trans.schema = upgradeSchema_1;
                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);
                    if (contentUpgradeIsAsync_1) {
                        incrementExpectedAwaits();
                    }
                    var returnValue_1;
                    var promiseFollowed = DexiePromise.follow(function () {
                        returnValue_1 = contentUpgrade(trans);
                        if (returnValue_1) {
                            if (contentUpgradeIsAsync_1) {
                                var decrementor = decrementExpectedAwaits.bind(null, null);
                                returnValue_1.then(decrementor, decrementor);
                            }
                        }
                    });
                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?
                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));
                }
            });
            queue.push(function (idbtrans) {
                var newSchema = version._cfg.dbschema;
                deleteRemovedTables(newSchema, idbtrans);
                removeTablesApi(db, [db.Transaction.prototype]);
                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);
                trans.schema = db._dbSchema;
            });
            queue.push(function (idbtrans) {
                if (db.idbdb.objectStoreNames.contains('$meta')) {
                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {
                        db.idbdb.deleteObjectStore('$meta');
                        delete db._dbSchema.$meta;
                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });
                    }
                    else {
                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');
                    }
                }
            });
        });
        function runQueue() {
            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :
                DexiePromise.resolve();
        }
        return runQueue().then(function () {
            createMissingTables(globalSchema, idbUpgradeTrans);
        });
    }
    function getSchemaDiff(oldSchema, newSchema) {
        var diff = {
            del: [],
            add: [],
            change: []
        };
        var table;
        for (table in oldSchema) {
            if (!newSchema[table])
                diff.del.push(table);
        }
        for (table in newSchema) {
            var oldDef = oldSchema[table], newDef = newSchema[table];
            if (!oldDef) {
                diff.add.push([table, newDef]);
            }
            else {
                var change = {
                    name: table,
                    def: newDef,
                    recreate: false,
                    del: [],
                    add: [],
                    change: []
                };
                if ((
                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||
                    (oldDef.primKey.auto !== newDef.primKey.auto)) {
                    change.recreate = true;
                    diff.change.push(change);
                }
                else {
                    var oldIndexes = oldDef.idxByName;
                    var newIndexes = newDef.idxByName;
                    var idxName = void 0;
                    for (idxName in oldIndexes) {
                        if (!newIndexes[idxName])
                            change.del.push(idxName);
                    }
                    for (idxName in newIndexes) {
                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];
                        if (!oldIdx)
                            change.add.push(newIdx);
                        else if (oldIdx.src !== newIdx.src)
                            change.change.push(newIdx);
                    }
                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {
                        diff.change.push(change);
                    }
                }
            }
        }
        return diff;
    }
    function createTable(idbtrans, tableName, primKey, indexes) {
        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?
            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :
            { autoIncrement: primKey.auto });
        indexes.forEach(function (idx) { return addIndex(store, idx); });
        return store;
    }
    function createMissingTables(newSchema, idbtrans) {
        keys(newSchema).forEach(function (tableName) {
            if (!idbtrans.db.objectStoreNames.contains(tableName)) {
                if (debug)
                    console.debug('Dexie: Creating missing table', tableName);
                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);
            }
        });
    }
    function deleteRemovedTables(newSchema, idbtrans) {
        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {
            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);
        });
    }
    function addIndex(store, idx) {
        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });
    }
    function buildGlobalSchema(db, idbdb, tmpTrans) {
        var globalSchema = {};
        var dbStoreNames = slice(idbdb.objectStoreNames, 0);
        dbStoreNames.forEach(function (storeName) {
            var store = tmpTrans.objectStore(storeName);
            var keyPath = store.keyPath;
            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || "", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== "string", true);
            var indexes = [];
            for (var j = 0; j < store.indexNames.length; ++j) {
                var idbindex = store.index(store.indexNames[j]);
                keyPath = idbindex.keyPath;
                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== "string", false);
                indexes.push(index);
            }
            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);
        });
        return globalSchema;
    }
    function readGlobalSchema(db, idbdb, tmpTrans) {
        db.verno = idbdb.version / 10;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);
        db._storeNames = slice(idbdb.objectStoreNames, 0);
        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);
    }
    function verifyInstalledSchema(db, tmpTrans) {
        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);
        var diff = getSchemaDiff(installedSchema, db._dbSchema);
        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));
    }
    function adjustToExistingIndexNames(db, schema, idbtrans) {
        var storeNames = idbtrans.db.objectStoreNames;
        for (var i = 0; i < storeNames.length; ++i) {
            var storeName = storeNames[i];
            var store = idbtrans.objectStore(storeName);
            db._hasGetAll = 'getAll' in store;
            for (var j = 0; j < store.indexNames.length; ++j) {
                var indexName = store.indexNames[j];
                var keyPath = store.index(indexName).keyPath;
                var dexieName = typeof keyPath === 'string' ? keyPath : "[" + slice(keyPath).join('+') + "]";
                if (schema[storeName]) {
                    var indexSpec = schema[storeName].idxByName[dexieName];
                    if (indexSpec) {
                        indexSpec.name = indexName;
                        delete schema[storeName].idxByName[dexieName];
                        schema[storeName].idxByName[indexName] = indexSpec;
                    }
                }
            }
        }
        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
            !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&
            [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) {
            db._hasGetAll = false;
        }
    }
    function parseIndexSyntax(primKeyAndIndexes) {
        return primKeyAndIndexes.split(',').map(function (index, indexNum) {
            var _a;
            var typeSplit = index.split(':');
            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();
            index = typeSplit[0].trim();
            var name = index.replace(/([&*]|\+\+)/g, "");
            var keyPath = /^\[/.test(name) ? name.match(/^\[(.*)\]$/)[1].split('+') : name;
            return createIndexSpec(name, keyPath || null, /\&/.test(index), /\*/.test(index), /\+\+/.test(index), isArray(keyPath), indexNum === 0, type);
        });
    }

    var Version =  (function () {
        function Version() {
        }
        Version.prototype._createTableSchema = function (name, primKey, indexes) {
            return createTableSchema(name, primKey, indexes);
        };
        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {
            return parseIndexSyntax(primKeyAndIndexes);
        };
        Version.prototype._parseStoresSpec = function (stores, outSchema) {
            var _this = this;
            keys(stores).forEach(function (tableName) {
                if (stores[tableName] !== null) {
                    var indexes = _this._parseIndexSyntax(stores[tableName]);
                    var primKey = indexes.shift();
                    if (!primKey) {
                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);
                    }
                    primKey.unique = true;
                    if (primKey.multi)
                        throw new exceptions.Schema('Primary key cannot be multiEntry*');
                    indexes.forEach(function (idx) {
                        if (idx.auto)
                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');
                        if (!idx.keyPath)
                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');
                    });
                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);
                    outSchema[tableName] = tblSchema;
                }
            });
        };
        Version.prototype.stores = function (stores) {
            var db = this.db;
            this._cfg.storesSource = this._cfg.storesSource
                ? extend(this._cfg.storesSource, stores)
                : stores;
            var versions = db._versions;
            var storesSpec = {};
            var dbschema = {};
            versions.forEach(function (version) {
                extend(storesSpec, version._cfg.storesSource);
                dbschema = version._cfg.dbschema = {};
                version._parseStoresSpec(storesSpec, dbschema);
            });
            db._dbSchema = dbschema;
            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);
            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);
            db._storeNames = keys(dbschema);
            return this;
        };
        Version.prototype.upgrade = function (upgradeFunction) {
            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);
            return this;
        };
        return Version;
    }());

    function createVersionConstructor(db) {
        return makeClassConstructor(Version.prototype, function Version(versionNumber) {
            this.db = db;
            this._cfg = {
                version: versionNumber,
                storesSource: null,
                dbschema: {},
                tables: {},
                contentUpgrade: null
            };
        });
    }

    function getDbNamesTable(indexedDB, IDBKeyRange) {
        var dbNamesDB = indexedDB["_dbNamesDB"];
        if (!dbNamesDB) {
            dbNamesDB = indexedDB["_dbNamesDB"] = new Dexie$1(DBNAMES_DB, {
                addons: [],
                indexedDB: indexedDB,
                IDBKeyRange: IDBKeyRange,
            });
            dbNamesDB.version(1).stores({ dbnames: "name" });
        }
        return dbNamesDB.table("dbnames");
    }
    function hasDatabasesNative(indexedDB) {
        return indexedDB && typeof indexedDB.databases === "function";
    }
    function getDatabaseNames(_a) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        return hasDatabasesNative(indexedDB)
            ? Promise.resolve(indexedDB.databases()).then(function (infos) {
                return infos
                    .map(function (info) { return info.name; })
                    .filter(function (name) { return name !== DBNAMES_DB; });
            })
            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();
    }
    function _onDatabaseCreated(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);
    }
    function _onDatabaseDeleted(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);
    }

    function vip(fn) {
        return newScope(function () {
            PSD.letThrough = true;
            return fn();
        });
    }

    function idbReady() {
        var isSafari = !navigator.userAgentData &&
            /Safari\//.test(navigator.userAgent) &&
            !/Chrom(e|ium)\//.test(navigator.userAgent);
        if (!isSafari || !indexedDB.databases)
            return Promise.resolve();
        var intervalId;
        return new Promise(function (resolve) {
            var tryIdb = function () { return indexedDB.databases().finally(resolve); };
            intervalId = setInterval(tryIdb, 100);
            tryIdb();
        }).finally(function () { return clearInterval(intervalId); });
    }

    var _a;
    function isEmptyRange(node) {
        return !("from" in node);
    }
    var RangeSet = function (fromOrTree, to) {
        if (this) {
            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });
        }
        else {
            var rv = new RangeSet();
            if (fromOrTree && ("d" in fromOrTree)) {
                extend(rv, fromOrTree);
            }
            return rv;
        }
    };
    props(RangeSet.prototype, (_a = {
            add: function (rangeSet) {
                mergeRanges(this, rangeSet);
                return this;
            },
            addKey: function (key) {
                addRange(this, key, key);
                return this;
            },
            addKeys: function (keys) {
                var _this = this;
                keys.forEach(function (key) { return addRange(_this, key, key); });
                return this;
            },
            hasKey: function (key) {
                var node = getRangeSetIterator(this).next(key).value;
                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;
            }
        },
        _a[iteratorSymbol] = function () {
            return getRangeSetIterator(this);
        },
        _a));
    function addRange(target, from, to) {
        var diff = cmp(from, to);
        if (isNaN(diff))
            return;
        if (diff > 0)
            throw RangeError();
        if (isEmptyRange(target))
            return extend(target, { from: from, to: to, d: 1 });
        var left = target.l;
        var right = target.r;
        if (cmp(to, target.from) < 0) {
            left
                ? addRange(left, from, to)
                : (target.l = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.to) > 0) {
            right
                ? addRange(right, from, to)
                : (target.r = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.from) < 0) {
            target.from = from;
            target.l = null;
            target.d = right ? right.d + 1 : 1;
        }
        if (cmp(to, target.to) > 0) {
            target.to = to;
            target.r = null;
            target.d = target.l ? target.l.d + 1 : 1;
        }
        var rightWasCutOff = !target.r;
        if (left && !target.l) {
            mergeRanges(target, left);
        }
        if (right && rightWasCutOff) {
            mergeRanges(target, right);
        }
    }
    function mergeRanges(target, newSet) {
        function _addRangeSet(target, _a) {
            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;
            addRange(target, from, to);
            if (l)
                _addRangeSet(target, l);
            if (r)
                _addRangeSet(target, r);
        }
        if (!isEmptyRange(newSet))
            _addRangeSet(target, newSet);
    }
    function rangesOverlap(rangeSet1, rangeSet2) {
        var i1 = getRangeSetIterator(rangeSet2);
        var nextResult1 = i1.next();
        if (nextResult1.done)
            return false;
        var a = nextResult1.value;
        var i2 = getRangeSetIterator(rangeSet1);
        var nextResult2 = i2.next(a.from);
        var b = nextResult2.value;
        while (!nextResult1.done && !nextResult2.done) {
            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)
                return true;
            cmp(a.from, b.from) < 0
                ? (a = (nextResult1 = i1.next(b.from)).value)
                : (b = (nextResult2 = i2.next(a.from)).value);
        }
        return false;
    }
    function getRangeSetIterator(node) {
        var state = isEmptyRange(node) ? null : { s: 0, n: node };
        return {
            next: function (key) {
                var keyProvided = arguments.length > 0;
                while (state) {
                    switch (state.s) {
                        case 0:
                            state.s = 1;
                            if (keyProvided) {
                                while (state.n.l && cmp(key, state.n.from) < 0)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                            else {
                                while (state.n.l)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                        case 1:
                            state.s = 2;
                            if (!keyProvided || cmp(key, state.n.to) <= 0)
                                return { value: state.n, done: false };
                        case 2:
                            if (state.n.r) {
                                state.s = 3;
                                state = { up: state, n: state.n.r, s: 0 };
                                continue;
                            }
                        case 3:
                            state = state.up;
                    }
                }
                return { done: true };
            },
        };
    }
    function rebalance(target) {
        var _a, _b;
        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);
        var r = diff > 1 ? "r" : diff < -1 ? "l" : "";
        if (r) {
            var l = r === "r" ? "l" : "r";
            var rootClone = __assign({}, target);
            var oldRootRight = target[r];
            target.from = oldRootRight.from;
            target.to = oldRootRight.to;
            target[r] = oldRootRight[r];
            rootClone[r] = oldRootRight[l];
            target[l] = rootClone;
            rootClone.d = computeDepth(rootClone);
        }
        target.d = computeDepth(target);
    }
    function computeDepth(_a) {
        var r = _a.r, l = _a.l;
        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;
    }

    function extendObservabilitySet(target, newSet) {
        keys(newSet).forEach(function (part) {
            if (target[part])
                mergeRanges(target[part], newSet[part]);
            else
                target[part] = cloneSimpleObjectTree(newSet[part]);
        });
        return target;
    }

    function obsSetsOverlap(os1, os2) {
        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });
    }

    var cache = {};

    var unsignaledParts = {};
    var isTaskEnqueued = false;
    function signalSubscribersLazily(part, optimistic) {
        extendObservabilitySet(unsignaledParts, part);
        if (!isTaskEnqueued) {
            isTaskEnqueued = true;
            setTimeout(function () {
                isTaskEnqueued = false;
                var parts = unsignaledParts;
                unsignaledParts = {};
                signalSubscribersNow(parts, false);
            }, 0);
        }
    }
    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {
        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }
        var queriesToSignal = new Set();
        if (updatedParts.all) {
            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {
                var tblCache = _a[_i];
                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
            }
        }
        else {
            for (var key in updatedParts) {
                var parts = /^idb\:\/\/(.*)\/(.*)\//.exec(key);
                if (parts) {
                    var dbName = parts[1], tableName = parts[2];
                    var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                    if (tblCache)
                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
                }
            }
        }
        queriesToSignal.forEach(function (requery) { return requery(); });
    }
    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {
        var updatedEntryLists = [];
        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {
            var _b = _a[_i], indexName = _b[0], entries = _b[1];
            var filteredEntries = [];
            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {
                var entry = entries_1[_c];
                if (obsSetsOverlap(updatedParts, entry.obsSet)) {
                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });
                }
                else if (deleteAffectedCacheEntries) {
                    filteredEntries.push(entry);
                }
            }
            if (deleteAffectedCacheEntries)
                updatedEntryLists.push([indexName, filteredEntries]);
        }
        if (deleteAffectedCacheEntries) {
            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {
                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];
                tblCache.queries.query[indexName] = filteredEntries;
            }
        }
    }

    function dexieOpen(db) {
        var state = db._state;
        var indexedDB = db._deps.indexedDB;
        if (state.isBeingOpened || db.idbdb)
            return state.dbReadyPromise.then(function () { return state.dbOpenError ?
                rejection(state.dbOpenError) :
                db; });
        state.isBeingOpened = true;
        state.dbOpenError = null;
        state.openComplete = false;
        var openCanceller = state.openCanceller;
        var nativeVerToOpen = Math.round(db.verno * 10);
        var schemaPatchMode = false;
        function throwIfCancelled() {
            if (state.openCanceller !== openCanceller)
                throw new exceptions.DatabaseClosed('db.open() was cancelled');
        }
        var resolveDbReady = state.dbReadyResolve,
        upgradeTransaction = null, wasCreated = false;
        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {
            throwIfCancelled();
            if (!indexedDB)
                throw new exceptions.MissingAPI();
            var dbName = db.name;
            var req = state.autoSchema || !nativeVerToOpen ?
                indexedDB.open(dbName) :
                indexedDB.open(dbName, nativeVerToOpen);
            if (!req)
                throw new exceptions.MissingAPI();
            req.onerror = eventRejectHandler(reject);
            req.onblocked = wrap(db._fireOnBlocked);
            req.onupgradeneeded = wrap(function (e) {
                upgradeTransaction = req.transaction;
                if (state.autoSchema && !db._options.allowEmptyDB) {
                    req.onerror = preventDefault;
                    upgradeTransaction.abort();
                    req.result.close();
                    var delreq = indexedDB.deleteDatabase(dbName);
                    delreq.onsuccess = delreq.onerror = wrap(function () {
                        reject(new exceptions.NoSuchDatabase("Database ".concat(dbName, " doesnt exist")));
                    });
                }
                else {
                    upgradeTransaction.onerror = eventRejectHandler(reject);
                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;
                    wasCreated = oldVer < 1;
                    db.idbdb = req.result;
                    if (schemaPatchMode) {
                        patchCurrentVersion(db, upgradeTransaction);
                    }
                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);
                }
            }, reject);
            req.onsuccess = wrap(function () {
                upgradeTransaction = null;
                var idbdb = db.idbdb = req.result;
                var objectStoreNames = slice(idbdb.objectStoreNames);
                if (objectStoreNames.length > 0)
                    try {
                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');
                        if (state.autoSchema)
                            readGlobalSchema(db, idbdb, tmpTrans);
                        else {
                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);
                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {
                                console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.");
                                idbdb.close();
                                nativeVerToOpen = idbdb.version + 1;
                                schemaPatchMode = true;
                                return resolve(tryOpenDB());
                            }
                        }
                        generateMiddlewareStacks(db, tmpTrans);
                    }
                    catch (e) {
                    }
                connections.push(db);
                idbdb.onversionchange = wrap(function (ev) {
                    state.vcFired = true;
                    db.on("versionchange").fire(ev);
                });
                idbdb.onclose = wrap(function () {
                    db.close({ disableAutoOpen: false });
                });
                if (wasCreated)
                    _onDatabaseCreated(db._deps, dbName);
                resolve();
            }, reject);
        }).catch(function (err) {
            switch (err === null || err === void 0 ? void 0 : err.name) {
                case "UnknownError":
                    if (state.PR1398_maxLoop > 0) {
                        state.PR1398_maxLoop--;
                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');
                        return tryOpenDB();
                    }
                    break;
                case "VersionError":
                    if (nativeVerToOpen > 0) {
                        nativeVerToOpen = 0;
                        return tryOpenDB();
                    }
                    break;
            }
            return DexiePromise.reject(err);
        }); };
        return DexiePromise.race([
            openCanceller,
            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)
        ]).then(function () {
            throwIfCancelled();
            state.onReadyBeingFired = [];
            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {
                if (state.onReadyBeingFired.length > 0) {
                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);
                    state.onReadyBeingFired = [];
                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);
                }
            });
        }).finally(function () {
            if (state.openCanceller === openCanceller) {
                state.onReadyBeingFired = null;
                state.isBeingOpened = false;
            }
        }).catch(function (err) {
            state.dbOpenError = err;
            try {
                upgradeTransaction && upgradeTransaction.abort();
            }
            catch (_a) { }
            if (openCanceller === state.openCanceller) {
                db._close();
            }
            return rejection(err);
        }).finally(function () {
            state.openComplete = true;
            resolveDbReady();
        }).then(function () {
            if (wasCreated) {
                var everything_1 = {};
                db.tables.forEach(function (table) {
                    table.schema.indexes.forEach(function (idx) {
                        if (idx.name)
                            everything_1["idb://".concat(db.name, "/").concat(table.name, "/").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);
                    });
                    everything_1["idb://".concat(db.name, "/").concat(table.name, "/")] = everything_1["idb://".concat(db.name, "/").concat(table.name, "/:dels")] = new RangeSet(-Infinity, [[[]]]);
                });
                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);
                signalSubscribersNow(everything_1, true);
            }
            return db;
        });
    }

    function awaitIterator(iterator) {
        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);
        function step(getNext) {
            return function (val) {
                var next = getNext(val), value = next.value;
                return next.done ? value :
                    (!value || typeof value.then !== 'function' ?
                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :
                        value.then(onSuccess, onError));
            };
        }
        return step(callNext)();
    }

    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {
        var i = arguments.length;
        if (i < 2)
            throw new exceptions.InvalidArgument("Too few arguments");
        var args = new Array(i - 1);
        while (--i)
            args[i - 1] = arguments[i];
        scopeFunc = args.pop();
        var tables = flatten(args);
        return [mode, tables, scopeFunc];
    }
    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {
        return DexiePromise.resolve().then(function () {
            var transless = PSD.transless || PSD;
            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);
            trans.explicit = true;
            var zoneProps = {
                trans: trans,
                transless: transless
            };
            if (parentTransaction) {
                trans.idbtrans = parentTransaction.idbtrans;
            }
            else {
                try {
                    trans.create();
                    trans.idbtrans._explicit = true;
                    db._state.PR1398_maxLoop = 3;
                }
                catch (ex) {
                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                        console.warn('Dexie: Need to reopen db');
                        db.close({ disableAutoOpen: false });
                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });
                    }
                    return rejection(ex);
                }
            }
            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);
            if (scopeFuncIsAsync) {
                incrementExpectedAwaits();
            }
            var returnValue;
            var promiseFollowed = DexiePromise.follow(function () {
                returnValue = scopeFunc.call(trans, trans);
                if (returnValue) {
                    if (scopeFuncIsAsync) {
                        var decrementor = decrementExpectedAwaits.bind(null, null);
                        returnValue.then(decrementor, decrementor);
                    }
                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {
                        returnValue = awaitIterator(returnValue);
                    }
                }
            }, zoneProps);
            return (returnValue && typeof returnValue.then === 'function' ?
                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?
                    x
                    : rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")); })
                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {
                if (parentTransaction)
                    trans._resolve();
                return trans._completion.then(function () { return x; });
            }).catch(function (e) {
                trans._reject(e);
                return rejection(e);
            });
        });
    }

    function pad(a, value, count) {
        var result = isArray(a) ? a.slice() : [a];
        for (var i = 0; i < count; ++i)
            result.push(value);
        return result;
    }
    function createVirtualIndexMiddleware(down) {
        return __assign(__assign({}, down), { table: function (tableName) {
                var table = down.table(tableName);
                var schema = table.schema;
                var indexLookup = {};
                var allVirtualIndexes = [];
                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {
                    var keyPathAlias = getKeyPathAlias(keyPath);
                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);
                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;
                    var isVirtual = keyTail > 0;
                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual
                            ? "".concat(keyPathAlias, "(virtual-from:").concat(lowLevelIndex.name, ")")
                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });
                    indexList.push(virtualIndex);
                    if (!virtualIndex.isPrimaryKey) {
                        allVirtualIndexes.push(virtualIndex);
                    }
                    if (keyLength > 1) {
                        var virtualKeyPath = keyLength === 2 ?
                            keyPath[0] :
                            keyPath.slice(0, keyLength - 1);
                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);
                    }
                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });
                    return virtualIndex;
                }
                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);
                indexLookup[":id"] = [primaryKey];
                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {
                    var index = _a[_i];
                    addVirtualIndexes(index.keyPath, 0, index);
                }
                function findBestIndex(keyPath) {
                    var result = indexLookup[getKeyPathAlias(keyPath)];
                    return result && result[0];
                }
                function translateRange(range, keyTail) {
                    return {
                        type: range.type === 1  ?
                            2  :
                            range.type,
                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),
                        lowerOpen: true,
                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),
                        upperOpen: true
                    };
                }
                function translateRequest(req) {
                    var index = req.query.index;
                    return index.isVirtual ? __assign(__assign({}, req), { query: {
                            index: index.lowLevelIndex,
                            range: translateRange(req.query.range, index.keyTail)
                        } }) : req;
                }
                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {
                        return table.count(translateRequest(req));
                    }, query: function (req) {
                        return table.query(translateRequest(req));
                    }, openCursor: function (req) {
                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;
                        if (!isVirtual)
                            return table.openCursor(req);
                        function createVirtualCursor(cursor) {
                            function _continue(key) {
                                key != null ?
                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :
                                    req.unique ?
                                        cursor.continue(cursor.key.slice(0, keyLength)
                                            .concat(req.reverse
                                            ? down.MIN_KEY
                                            : down.MAX_KEY, keyTail)) :
                                        cursor.continue();
                            }
                            var virtualCursor = Object.create(cursor, {
                                continue: { value: _continue },
                                continuePrimaryKey: {
                                    value: function (key, primaryKey) {
                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);
                                    }
                                },
                                primaryKey: {
                                    get: function () {
                                        return cursor.primaryKey;
                                    }
                                },
                                key: {
                                    get: function () {
                                        var key = cursor.key;
                                        return keyLength === 1 ?
                                            key[0] :
                                            key.slice(0, keyLength);
                                    }
                                },
                                value: {
                                    get: function () {
                                        return cursor.value;
                                    }
                                }
                            });
                            return virtualCursor;
                        }
                        return table.openCursor(translateRequest(req))
                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });
                    } });
                return result;
            } });
    }
    var virtualIndexMiddleware = {
        stack: "dbcore",
        name: "VirtualIndexMiddleware",
        level: 1,
        create: createVirtualIndexMiddleware
    };

    function getObjectDiff(a, b, rv, prfx) {
        rv = rv || {};
        prfx = prfx || '';
        keys(a).forEach(function (prop) {
            if (!hasOwn(b, prop)) {
                rv[prfx + prop] = undefined;
            }
            else {
                var ap = a[prop], bp = b[prop];
                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {
                    var apTypeName = toStringTag(ap);
                    var bpTypeName = toStringTag(bp);
                    if (apTypeName !== bpTypeName) {
                        rv[prfx + prop] = b[prop];
                    }
                    else if (apTypeName === 'Object') {
                        getObjectDiff(ap, bp, rv, prfx + prop + '.');
                    }
                    else if (ap !== bp) {
                        rv[prfx + prop] = b[prop];
                    }
                }
                else if (ap !== bp)
                    rv[prfx + prop] = b[prop];
            }
        });
        keys(b).forEach(function (prop) {
            if (!hasOwn(a, prop)) {
                rv[prfx + prop] = b[prop];
            }
        });
        return rv;
    }

    function getEffectiveKeys(primaryKey, req) {
        if (req.type === 'delete')
            return req.keys;
        return req.keys || req.values.map(primaryKey.extractKey);
    }

    var hooksMiddleware = {
        stack: "dbcore",
        name: "HooksMiddleware",
        level: 2,
        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {
                var downTable = downCore.table(tableName);
                var primaryKey = downTable.schema.primaryKey;
                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {
                        var dxTrans = PSD.trans;
                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;
                        switch (req.type) {
                            case 'add':
                                if (creating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'put':
                                if (creating.fire === nop && updating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'delete':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'deleteRange':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);
                        }
                        return downTable.mutate(req);
                        function addPutOrDelete(req) {
                            var dxTrans = PSD.trans;
                            var keys = req.keys || getEffectiveKeys(primaryKey, req);
                            if (!keys)
                                throw new Error("Keys missing");
                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);
                            if (req.type !== 'delete')
                                req.values = __spreadArray([], req.values, true);
                            if (req.keys)
                                req.keys = __spreadArray([], req.keys, true);
                            return getExistingValues(downTable, req, keys).then(function (existingValues) {
                                var contexts = keys.map(function (key, i) {
                                    var existingValue = existingValues[i];
                                    var ctx = { onerror: null, onsuccess: null };
                                    if (req.type === 'delete') {
                                        deleting.fire.call(ctx, key, existingValue, dxTrans);
                                    }
                                    else if (req.type === 'add' || existingValue === undefined) {
                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);
                                        if (key == null && generatedPrimaryKey != null) {
                                            key = generatedPrimaryKey;
                                            req.keys[i] = key;
                                            if (!primaryKey.outbound) {
                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);
                                            }
                                        }
                                    }
                                    else {
                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);
                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);
                                        if (additionalChanges_1) {
                                            var requestedValue_1 = req.values[i];
                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {
                                                if (hasOwn(requestedValue_1, keyPath)) {
                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];
                                                }
                                                else {
                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);
                                                }
                                            });
                                        }
                                    }
                                    return ctx;
                                });
                                return downTable.mutate(req).then(function (_a) {
                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;
                                    for (var i = 0; i < keys.length; ++i) {
                                        var primKey = results ? results[i] : keys[i];
                                        var ctx = contexts[i];
                                        if (primKey == null) {
                                            ctx.onerror && ctx.onerror(failures[i]);
                                        }
                                        else {
                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?
                                                req.values[i] :
                                                primKey
                                            );
                                        }
                                    }
                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };
                                }).catch(function (error) {
                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });
                                    return Promise.reject(error);
                                });
                            });
                        }
                        function deleteRange(req) {
                            return deleteNextChunk(req.trans, req.range, 10000);
                        }
                        function deleteNextChunk(trans, range, limit) {
                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })
                                .then(function (_a) {
                                var result = _a.result;
                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {
                                    if (res.numFailures > 0)
                                        return Promise.reject(res.failures[0]);
                                    if (result.length < limit) {
                                        return { failures: [], numFailures: 0, lastResult: undefined };
                                    }
                                    else {
                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);
                                    }
                                });
                            });
                        }
                    } });
                return tableMiddleware;
            } })); }
    };
    function getExistingValues(table, req, effectiveKeys) {
        return req.type === "add"
            ? Promise.resolve([])
            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: "immutable" });
    }

    function getFromTransactionCache(keys, cache, clone) {
        try {
            if (!cache)
                return null;
            if (cache.keys.length < keys.length)
                return null;
            var result = [];
            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {
                if (cmp(cache.keys[i], keys[j]) !== 0)
                    continue;
                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);
                ++j;
            }
            return result.length === keys.length ? result : null;
        }
        catch (_a) {
            return null;
        }
    }
    var cacheExistingValuesMiddleware = {
        stack: "dbcore",
        level: -1,
        create: function (core) {
            return {
                table: function (tableName) {
                    var table = core.table(tableName);
                    return __assign(__assign({}, table), { getMany: function (req) {
                            if (!req.cache) {
                                return table.getMany(req);
                            }
                            var cachedResult = getFromTransactionCache(req.keys, req.trans["_cache"], req.cache === "clone");
                            if (cachedResult) {
                                return DexiePromise.resolve(cachedResult);
                            }
                            return table.getMany(req).then(function (res) {
                                req.trans["_cache"] = {
                                    keys: req.keys,
                                    values: req.cache === "clone" ? deepClone(res) : res,
                                };
                                return res;
                            });
                        }, mutate: function (req) {
                            if (req.type !== "add")
                                req.trans["_cache"] = null;
                            return table.mutate(req);
                        } });
                },
            };
        },
    };

    function isCachableContext(ctx, table) {
        return (ctx.trans.mode === 'readonly' &&
            !!ctx.subscr &&
            !ctx.trans.explicit &&
            ctx.trans.db._options.cache !== 'disabled' &&
            !table.schema.primaryKey.outbound);
    }

    function isCachableRequest(type, req) {
        switch (type) {
            case 'query':
                return req.values && !req.unique;
            case 'get':
                return false;
            case 'getMany':
                return false;
            case 'count':
                return false;
            case 'openCursor':
                return false;
        }
    }

    var observabilityMiddleware = {
        stack: "dbcore",
        level: 0,
        name: "Observability",
        create: function (core) {
            var dbName = core.schema.name;
            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);
            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    if (PSD.subscr && mode !== 'readonly') {
                        throw new exceptions.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(PSD.querier));
                    }
                    return core.transaction(stores, mode, options);
                }, table: function (tableName) {
                    var table = core.table(tableName);
                    var schema = table.schema;
                    var primaryKey = schema.primaryKey, indexes = schema.indexes;
                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;
                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });
                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {
                            var _a, _b;
                            var trans = req.trans;
                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});
                            var getRangeSet = function (indexName) {
                                var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                return (mutatedParts[part] ||
                                    (mutatedParts[part] = new RangeSet()));
                            };
                            var pkRangeSet = getRangeSet("");
                            var delsRangeSet = getRangeSet(":dels");
                            var type = req.type;
                            var _c = req.type === "deleteRange"
                                ? [req.range]
                                : req.type === "delete"
                                    ? [req.keys]
                                    : req.values.length < 50
                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]
                                        : [], keys = _c[0], newObjs = _c[1];
                            var oldCache = req.trans["_cache"];
                            if (isArray(keys)) {
                                pkRangeSet.addKeys(keys);
                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;
                                if (!oldObjs) {
                                    delsRangeSet.addKeys(keys);
                                }
                                if (oldObjs || newObjs) {
                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);
                                }
                            }
                            else if (keys) {
                                var range = {
                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,
                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY
                                };
                                delsRangeSet.add(range);
                                pkRangeSet.add(range);
                            }
                            else {
                                pkRangeSet.add(FULL_RANGE);
                                delsRangeSet.add(FULL_RANGE);
                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });
                            }
                            return table.mutate(req).then(function (res) {
                                if (keys && (req.type === 'add' || req.type === 'put')) {
                                    pkRangeSet.addKeys(res.results);
                                    if (indexesWithAutoIncPK) {
                                        indexesWithAutoIncPK.forEach(function (idx) {
                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });
                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });
                                            for (var i = 0, len = res.results.length; i < len; ++i) {
                                                idxVals[i][pkPos] = res.results[i];
                                            }
                                            getRangeSet(idx.name).addKeys(idxVals);
                                        });
                                    }
                                }
                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);
                                return res;
                            });
                        } });
                    var getRange = function (_a) {
                        var _b, _c;
                        var _d = _a.query, index = _d.index, range = _d.range;
                        return [
                            index,
                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),
                        ];
                    };
                    var readSubscribers = {
                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },
                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },
                        count: getRange,
                        query: getRange,
                        openCursor: getRange,
                    };
                    keys(readSubscribers).forEach(function (method) {
                        tableClone[method] = function (req) {
                            var subscr = PSD.subscr;
                            var isLiveQuery = !!subscr;
                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);
                            var obsSet = cachable
                                ? req.obsSet = {}
                                : subscr;
                            if (isLiveQuery) {
                                var getRangeSet = function (indexName) {
                                    var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                    return (obsSet[part] ||
                                        (obsSet[part] = new RangeSet()));
                                };
                                var pkRangeSet_1 = getRangeSet("");
                                var delsRangeSet_1 = getRangeSet(":dels");
                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];
                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {
                                    delsRangeSet_1.add(queriedRanges);
                                }
                                else {
                                    getRangeSet(queriedIndex.name || "").add(queriedRanges);
                                }
                                if (!queriedIndex.isPrimaryKey) {
                                    if (method === "count") {
                                        delsRangeSet_1.add(FULL_RANGE);
                                    }
                                    else {
                                        var keysPromise_1 = method === "query" &&
                                            outbound &&
                                            req.values &&
                                            table.query(__assign(__assign({}, req), { values: false }));
                                        return table[method].apply(this, arguments).then(function (res) {
                                            if (method === "query") {
                                                if (outbound && req.values) {
                                                    return keysPromise_1.then(function (_a) {
                                                        var resultingKeys = _a.result;
                                                        pkRangeSet_1.addKeys(resultingKeys);
                                                        return res;
                                                    });
                                                }
                                                var pKeys = req.values
                                                    ? res.result.map(extractKey)
                                                    : res.result;
                                                if (req.values) {
                                                    pkRangeSet_1.addKeys(pKeys);
                                                }
                                                else {
                                                    delsRangeSet_1.addKeys(pKeys);
                                                }
                                            }
                                            else if (method === "openCursor") {
                                                var cursor_1 = res;
                                                var wantValues_1 = req.values;
                                                return (cursor_1 &&
                                                    Object.create(cursor_1, {
                                                        key: {
                                                            get: function () {
                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.key;
                                                            },
                                                        },
                                                        primaryKey: {
                                                            get: function () {
                                                                var pkey = cursor_1.primaryKey;
                                                                delsRangeSet_1.addKey(pkey);
                                                                return pkey;
                                                            },
                                                        },
                                                        value: {
                                                            get: function () {
                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.value;
                                                            },
                                                        },
                                                    }));
                                            }
                                            return res;
                                        });
                                    }
                                }
                            }
                            return table[method].apply(this, arguments);
                        };
                    });
                    return tableClone;
                } });
        },
    };
    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {
        function addAffectedIndex(ix) {
            var rangeSet = getRangeSet(ix.name || "");
            function extractKey(obj) {
                return obj != null ? ix.extractKey(obj) : null;
            }
            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)
                ? key.forEach(function (key) { return rangeSet.addKey(key); })
                : rangeSet.addKey(key); };
            (oldObjs || newObjs).forEach(function (_, i) {
                var oldKey = oldObjs && extractKey(oldObjs[i]);
                var newKey = newObjs && extractKey(newObjs[i]);
                if (cmp(oldKey, newKey) !== 0) {
                    if (oldKey != null)
                        addKeyOrKeys(oldKey);
                    if (newKey != null)
                        addKeyOrKeys(newKey);
                }
            });
        }
        schema.indexes.forEach(addAffectedIndex);
    }

    function adjustOptimisticFromFailures(tblCache, req, res) {
        if (res.numFailures === 0)
            return req;
        if (req.type === 'deleteRange') {
            return null;
        }
        var numBulkOps = req.keys
            ? req.keys.length
            : 'values' in req && req.values
                ? req.values.length
                : 1;
        if (res.numFailures === numBulkOps) {
            return null;
        }
        var clone = __assign({}, req);
        if (isArray(clone.keys)) {
            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });
        }
        if ('values' in clone && isArray(clone.values)) {
            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });
        }
        return clone;
    }

    function isAboveLower(key, range) {
        return range.lower === undefined
            ? true
            : range.lowerOpen
                ? cmp(key, range.lower) > 0
                : cmp(key, range.lower) >= 0;
    }
    function isBelowUpper(key, range) {
        return range.upper === undefined
            ? true
            : range.upperOpen
                ? cmp(key, range.upper) < 0
                : cmp(key, range.upper) <= 0;
    }
    function isWithinRange(key, range) {
        return isAboveLower(key, range) && isBelowUpper(key, range);
    }

    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {
        if (!ops || ops.length === 0)
            return result;
        var index = req.query.index;
        var multiEntry = index.multiEntry;
        var queryRange = req.query.range;
        var primaryKey = table.schema.primaryKey;
        var extractPrimKey = primaryKey.extractKey;
        var extractIndex = index.extractKey;
        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;
        var finalResult = ops.reduce(function (result, op) {
            var modifedResult = result;
            var includedValues = [];
            if (op.type === 'add' || op.type === 'put') {
                var includedPKs = new RangeSet();
                for (var i = op.values.length - 1; i >= 0; --i) {
                    var value = op.values[i];
                    var pk = extractPrimKey(value);
                    if (includedPKs.hasKey(pk))
                        continue;
                    var key = extractIndex(value);
                    if (multiEntry && isArray(key)
                        ? key.some(function (k) { return isWithinRange(k, queryRange); })
                        : isWithinRange(key, queryRange)) {
                        includedPKs.addKey(pk);
                        includedValues.push(value);
                    }
                }
            }
            switch (op.type) {
                case 'add': {
                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);
                    modifedResult = result.concat(req.values
                        ? includedValues.filter(function (v) {
                            var key = extractPrimKey(v);
                            if (existingKeys_1.hasKey(key))
                                return false;
                            existingKeys_1.addKey(key);
                            return true;
                        })
                        : includedValues
                            .map(function (v) { return extractPrimKey(v); })
                            .filter(function (k) {
                            if (existingKeys_1.hasKey(k))
                                return false;
                            existingKeys_1.addKey(k);
                            return true;
                        }));
                    break;
                }
                case 'put': {
                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));
                    modifedResult = result
                        .filter(
                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })
                        .concat(
                    req.values
                        ? includedValues
                        : includedValues.map(function (v) { return extractPrimKey(v); }));
                    break;
                }
                case 'delete':
                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);
                    modifedResult = result.filter(function (item) {
                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);
                    });
                    break;
                case 'deleteRange':
                    var range_1 = op.range;
                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });
                    break;
            }
            return modifedResult;
        }, result);
        if (finalResult === result)
            return result;
        finalResult.sort(function (a, b) {
            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||
                cmp(extractPrimKey(a), extractPrimKey(b));
        });
        if (req.limit && req.limit < Infinity) {
            if (finalResult.length > req.limit) {
                finalResult.length = req.limit;
            }
            else if (result.length === req.limit && finalResult.length < req.limit) {
                cacheEntry.dirty = true;
            }
        }
        return immutable ? Object.freeze(finalResult) : finalResult;
    }

    function areRangesEqual(r1, r2) {
        return (cmp(r1.lower, r2.lower) === 0 &&
            cmp(r1.upper, r2.upper) === 0 &&
            !!r1.lowerOpen === !!r2.lowerOpen &&
            !!r1.upperOpen === !!r2.upperOpen);
    }

    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {
        if (lower1 === undefined)
            return lower2 !== undefined ? -1 : 0;
        if (lower2 === undefined)
            return 1;
        var c = cmp(lower1, lower2);
        if (c === 0) {
            if (lowerOpen1 && lowerOpen2)
                return 0;
            if (lowerOpen1)
                return 1;
            if (lowerOpen2)
                return -1;
        }
        return c;
    }
    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {
        if (upper1 === undefined)
            return upper2 !== undefined ? 1 : 0;
        if (upper2 === undefined)
            return -1;
        var c = cmp(upper1, upper2);
        if (c === 0) {
            if (upperOpen1 && upperOpen2)
                return 0;
            if (upperOpen1)
                return -1;
            if (upperOpen2)
                return 1;
        }
        return c;
    }
    function isSuperRange(r1, r2) {
        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&
            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);
    }

    function findCompatibleQuery(dbName, tableName, type, req) {
        var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
        if (!tblCache)
            return [];
        var queries = tblCache.queries[type];
        if (!queries)
            return [null, false, tblCache, null];
        var indexName = req.query ? req.query.index.name : null;
        var entries = queries[indexName || ''];
        if (!entries)
            return [null, false, tblCache, null];
        switch (type) {
            case 'query':
                var equalEntry = entries.find(function (entry) {
                    return entry.req.limit === req.limit &&
                        entry.req.values === req.values &&
                        areRangesEqual(entry.req.query.range, req.query.range);
                });
                if (equalEntry)
                    return [
                        equalEntry,
                        true,
                        tblCache,
                        entries,
                    ];
                var superEntry = entries.find(function (entry) {
                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;
                    return (limit >= req.limit &&
                        (req.values ? entry.req.values : true) &&
                        isSuperRange(entry.req.query.range, req.query.range));
                });
                return [superEntry, false, tblCache, entries];
            case 'count':
                var countQuery = entries.find(function (entry) {
                    return areRangesEqual(entry.req.query.range, req.query.range);
                });
                return [countQuery, !!countQuery, tblCache, entries];
        }
    }

    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {
        cacheEntry.subscribers.add(requery);
        signal.addEventListener("abort", function () {
            cacheEntry.subscribers.delete(requery);
            if (cacheEntry.subscribers.size === 0) {
                enqueForDeletion(cacheEntry, container);
            }
        });
    }
    function enqueForDeletion(cacheEntry, container) {
        setTimeout(function () {
            if (cacheEntry.subscribers.size === 0) {
                delArrayItem(container, cacheEntry);
            }
        }, 3000);
    }

    var cacheMiddleware = {
        stack: 'dbcore',
        level: 0,
        name: 'Cache',
        create: function (core) {
            var dbName = core.schema.name;
            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    var idbtrans = core.transaction(stores, mode, options);
                    if (mode === 'readwrite') {
                        var ac_1 = new AbortController();
                        var signal = ac_1.signal;
                        var endTransaction = function (wasCommitted) { return function () {
                            ac_1.abort();
                            if (mode === 'readwrite') {
                                var affectedSubscribers_1 = new Set();
                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {
                                    var storeName = stores_1[_i];
                                    var tblCache = cache["idb://".concat(dbName, "/").concat(storeName)];
                                    if (tblCache) {
                                        var table = core.table(storeName);
                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });
                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {
                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {
                                                var entries = _b[_a];
                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {
                                                    var entry = _d[_c];
                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {
                                                        delArrayItem(entries, entry);
                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                    }
                                                }
                                            }
                                        }
                                        else if (ops.length > 0) {
                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });
                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {
                                                var entries = _f[_e];
                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {
                                                    var entry = _h[_g];
                                                    if (entry.res != null &&
                                                        idbtrans.mutatedParts
    ) {
                                                        if (wasCommitted && !entry.dirty) {
                                                            var freezeResults = Object.isFrozen(entry.res);
                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                            }
                                                            else if (modRes !== entry.res) {
                                                                entry.res = modRes;
                                                                entry.promise = DexiePromise.resolve({ result: modRes });
                                                            }
                                                        }
                                                        else {
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                            }
                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                affectedSubscribers_1.forEach(function (requery) { return requery(); });
                            }
                        }; };
                        idbtrans.addEventListener('abort', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('error', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('complete', endTransaction(true), {
                            signal: signal,
                        });
                    }
                    return idbtrans;
                }, table: function (tableName) {
                    var downTable = core.table(tableName);
                    var primKey = downTable.schema.primaryKey;
                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {
                            var trans = PSD.trans;
                            if (primKey.outbound ||
                                trans.db._options.cache === 'disabled' ||
                                trans.explicit ||
                                trans.idbtrans.mode !== 'readwrite'
                            ) {
                                return downTable.mutate(req);
                            }
                            var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                            if (!tblCache)
                                return downTable.mutate(req);
                            var promise = downTable.mutate(req);
                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {
                                promise.then(function (res) {
                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {
                                            var _a;
                                            if (res.failures[i])
                                                return value;
                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))
                                                ? deepClone(value)
                                                : __assign({}, value);
                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);
                                            return valueWithKey;
                                        }) });
                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);
                                    tblCache.optimisticOps.push(adjustedReq);
                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });
                                });
                            }
                            else {
                                tblCache.optimisticOps.push(req);
                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                promise.then(function (res) {
                                    if (res.numFailures > 0) {
                                        delArrayItem(tblCache.optimisticOps, req);
                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);
                                        if (adjustedReq) {
                                            tblCache.optimisticOps.push(adjustedReq);
                                        }
                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                    }
                                });
                                promise.catch(function () {
                                    delArrayItem(tblCache.optimisticOps, req);
                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                });
                            }
                            return promise;
                        }, query: function (req) {
                            var _a;
                            if (!isCachableContext(PSD, downTable) || !isCachableRequest("query", req))
                                return downTable.query(req);
                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';
                            var _b = PSD, requery = _b.requery, signal = _b.signal;
                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];
                            if (cacheEntry && exactMatch) {
                                cacheEntry.obsSet = req.obsSet;
                            }
                            else {
                                var promise = downTable.query(req).then(function (res) {
                                    var result = res.result;
                                    if (cacheEntry)
                                        cacheEntry.res = result;
                                    if (freezeResults) {
                                        for (var i = 0, l = result.length; i < l; ++i) {
                                            Object.freeze(result[i]);
                                        }
                                        Object.freeze(result);
                                    }
                                    else {
                                        res.result = deepClone(result);
                                    }
                                    return res;
                                }).catch(function (error) {
                                    if (container && cacheEntry)
                                        delArrayItem(container, cacheEntry);
                                    return Promise.reject(error);
                                });
                                cacheEntry = {
                                    obsSet: req.obsSet,
                                    promise: promise,
                                    subscribers: new Set(),
                                    type: 'query',
                                    req: req,
                                    dirty: false,
                                };
                                if (container) {
                                    container.push(cacheEntry);
                                }
                                else {
                                    container = [cacheEntry];
                                    if (!tblCache) {
                                        tblCache = cache["idb://".concat(dbName, "/").concat(tableName)] = {
                                            queries: {
                                                query: {},
                                                count: {},
                                            },
                                            objs: new Map(),
                                            optimisticOps: [],
                                            unsignaledParts: {}
                                        };
                                    }
                                    tblCache.queries.query[req.query.index.name || ''] = container;
                                }
                            }
                            subscribeToCacheEntry(cacheEntry, container, requery, signal);
                            return cacheEntry.promise.then(function (res) {
                                return {
                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),
                                };
                            });
                        } });
                    return tableMW;
                } });
            return coreMW;
        },
    };

    function vipify(target, vipDb) {
        return new Proxy(target, {
            get: function (target, prop, receiver) {
                if (prop === 'db')
                    return vipDb;
                return Reflect.get(target, prop, receiver);
            }
        });
    }

    var Dexie$1 =  (function () {
        function Dexie(name, options) {
            var _this = this;
            this._middlewares = {};
            this.verno = 0;
            var deps = Dexie.dependencies;
            this._options = options = __assign({
                addons: Dexie.addons, autoOpen: true,
                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);
            this._deps = {
                indexedDB: options.indexedDB,
                IDBKeyRange: options.IDBKeyRange
            };
            var addons = options.addons;
            this._dbSchema = {};
            this._versions = [];
            this._storeNames = [];
            this._allTables = {};
            this.idbdb = null;
            this._novip = this;
            var state = {
                dbOpenError: null,
                isBeingOpened: false,
                onReadyBeingFired: null,
                openComplete: false,
                dbReadyResolve: nop,
                dbReadyPromise: null,
                cancelOpen: nop,
                openCanceller: null,
                autoSchema: true,
                PR1398_maxLoop: 3,
                autoOpen: options.autoOpen,
            };
            state.dbReadyPromise = new DexiePromise(function (resolve) {
                state.dbReadyResolve = resolve;
            });
            state.openCanceller = new DexiePromise(function (_, reject) {
                state.cancelOpen = reject;
            });
            this._state = state;
            this.name = name;
            this.on = Events(this, "populate", "blocked", "versionchange", "close", { ready: [promisableChain, nop] });
            this.once = function (event, callback) {
                var fn = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    _this.on(event).unsubscribe(fn);
                    callback.apply(_this, args);
                };
                return _this.on(event, fn);
            };
            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {
                return function (subscriber, bSticky) {
                    Dexie.vip(function () {
                        var state = _this._state;
                        if (state.openComplete) {
                            if (!state.dbOpenError)
                                DexiePromise.resolve().then(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else if (state.onReadyBeingFired) {
                            state.onReadyBeingFired.push(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else {
                            subscribe(subscriber);
                            var db_1 = _this;
                            if (!bSticky)
                                subscribe(function unsubscribe() {
                                    db_1.on.ready.unsubscribe(subscriber);
                                    db_1.on.ready.unsubscribe(unsubscribe);
                                });
                        }
                    });
                };
            });
            this.Collection = createCollectionConstructor(this);
            this.Table = createTableConstructor(this);
            this.Transaction = createTransactionConstructor(this);
            this.Version = createVersionConstructor(this);
            this.WhereClause = createWhereClauseConstructor(this);
            this.on("versionchange", function (ev) {
                if (ev.newVersion > 0)
                    console.warn("Another connection wants to upgrade database '".concat(_this.name, "'. Closing db now to resume the upgrade."));
                else
                    console.warn("Another connection wants to delete database '".concat(_this.name, "'. Closing db now to resume the delete request."));
                _this.close({ disableAutoOpen: false });
            });
            this.on("blocked", function (ev) {
                if (!ev.newVersion || ev.newVersion < ev.oldVersion)
                    console.warn("Dexie.delete('".concat(_this.name, "') was blocked"));
                else
                    console.warn("Upgrade '".concat(_this.name, "' blocked by other connection holding version ").concat(ev.oldVersion / 10));
            });
            this._maxKey = getMaxKey(options.IDBKeyRange);
            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };
            this._fireOnBlocked = function (ev) {
                _this.on("blocked").fire(ev);
                connections
                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })
                    .map(function (c) { return c.on("versionchange").fire(ev); });
            };
            this.use(cacheExistingValuesMiddleware);
            this.use(cacheMiddleware);
            this.use(observabilityMiddleware);
            this.use(virtualIndexMiddleware);
            this.use(hooksMiddleware);
            var vipDB = new Proxy(this, {
                get: function (_, prop, receiver) {
                    if (prop === '_vip')
                        return true;
                    if (prop === 'table')
                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };
                    var rv = Reflect.get(_, prop, receiver);
                    if (rv instanceof Table)
                        return vipify(rv, vipDB);
                    if (prop === 'tables')
                        return rv.map(function (t) { return vipify(t, vipDB); });
                    if (prop === '_createTransaction')
                        return function () {
                            var tx = rv.apply(this, arguments);
                            return vipify(tx, vipDB);
                        };
                    return rv;
                }
            });
            this.vip = vipDB;
            addons.forEach(function (addon) { return addon(_this); });
        }
        Dexie.prototype.version = function (versionNumber) {
            if (isNaN(versionNumber) || versionNumber < 0.1)
                throw new exceptions.Type("Given version is not a positive number");
            versionNumber = Math.round(versionNumber * 10) / 10;
            if (this.idbdb || this._state.isBeingOpened)
                throw new exceptions.Schema("Cannot add version when database is open");
            this.verno = Math.max(this.verno, versionNumber);
            var versions = this._versions;
            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];
            if (versionInstance)
                return versionInstance;
            versionInstance = new this.Version(versionNumber);
            versions.push(versionInstance);
            versions.sort(lowerVersionFirst);
            versionInstance.stores({});
            this._state.autoSchema = false;
            return versionInstance;
        };
        Dexie.prototype._whenReady = function (fn) {
            var _this = this;
            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {
                if (_this._state.openComplete) {
                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));
                }
                if (!_this._state.isBeingOpened) {
                    if (!_this._state.autoOpen) {
                        reject(new exceptions.DatabaseClosed());
                        return;
                    }
                    _this.open().catch(nop);
                }
                _this._state.dbReadyPromise.then(resolve, reject);
            }).then(fn);
        };
        Dexie.prototype.use = function (_a) {
            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;
            if (name)
                this.unuse({ stack: stack, name: name });
            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);
            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });
            middlewares.sort(function (a, b) { return a.level - b.level; });
            return this;
        };
        Dexie.prototype.unuse = function (_a) {
            var stack = _a.stack, name = _a.name, create = _a.create;
            if (stack && this._middlewares[stack]) {
                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {
                    return create ? mw.create !== create :
                        name ? mw.name !== name :
                            false;
                });
            }
            return this;
        };
        Dexie.prototype.open = function () {
            var _this = this;
            return usePSD(globalPSD,
            function () { return dexieOpen(_this); });
        };
        Dexie.prototype._close = function () {
            this.on.close.fire(new CustomEvent('close'));
            var state = this._state;
            var idx = connections.indexOf(this);
            if (idx >= 0)
                connections.splice(idx, 1);
            if (this.idbdb) {
                try {
                    this.idbdb.close();
                }
                catch (e) { }
                this.idbdb = null;
            }
            if (!state.isBeingOpened) {
                state.dbReadyPromise = new DexiePromise(function (resolve) {
                    state.dbReadyResolve = resolve;
                });
                state.openCanceller = new DexiePromise(function (_, reject) {
                    state.cancelOpen = reject;
                });
            }
        };
        Dexie.prototype.close = function (_a) {
            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;
            var state = this._state;
            if (disableAutoOpen) {
                if (state.isBeingOpened) {
                    state.cancelOpen(new exceptions.DatabaseClosed());
                }
                this._close();
                state.autoOpen = false;
                state.dbOpenError = new exceptions.DatabaseClosed();
            }
            else {
                this._close();
                state.autoOpen = this._options.autoOpen ||
                    state.isBeingOpened;
                state.openComplete = false;
                state.dbOpenError = null;
            }
        };
        Dexie.prototype.delete = function (closeOptions) {
            var _this = this;
            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }
            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';
            var state = this._state;
            return new DexiePromise(function (resolve, reject) {
                var doDelete = function () {
                    _this.close(closeOptions);
                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);
                    req.onsuccess = wrap(function () {
                        _onDatabaseDeleted(_this._deps, _this.name);
                        resolve();
                    });
                    req.onerror = eventRejectHandler(reject);
                    req.onblocked = _this._fireOnBlocked;
                };
                if (hasInvalidArguments)
                    throw new exceptions.InvalidArgument("Invalid closeOptions argument to db.delete()");
                if (state.isBeingOpened) {
                    state.dbReadyPromise.then(doDelete);
                }
                else {
                    doDelete();
                }
            });
        };
        Dexie.prototype.backendDB = function () {
            return this.idbdb;
        };
        Dexie.prototype.isOpen = function () {
            return this.idbdb !== null;
        };
        Dexie.prototype.hasBeenClosed = function () {
            var dbOpenError = this._state.dbOpenError;
            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');
        };
        Dexie.prototype.hasFailed = function () {
            return this._state.dbOpenError !== null;
        };
        Dexie.prototype.dynamicallyOpened = function () {
            return this._state.autoSchema;
        };
        Object.defineProperty(Dexie.prototype, "tables", {
            get: function () {
                var _this = this;
                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });
            },
            enumerable: false,
            configurable: true
        });
        Dexie.prototype.transaction = function () {
            var args = extractTransactionArgs.apply(this, arguments);
            return this._transaction.apply(this, args);
        };
        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {
            var _this = this;
            var parentTransaction = PSD.trans;
            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)
                parentTransaction = null;
            var onlyIfCompatible = mode.indexOf('?') !== -1;
            mode = mode.replace('!', '').replace('?', '');
            var idbMode, storeNames;
            try {
                storeNames = tables.map(function (table) {
                    var storeName = table instanceof _this.Table ? table.name : table;
                    if (typeof storeName !== 'string')
                        throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
                    return storeName;
                });
                if (mode == "r" || mode === READONLY)
                    idbMode = READONLY;
                else if (mode == "rw" || mode == READWRITE)
                    idbMode = READWRITE;
                else
                    throw new exceptions.InvalidArgument("Invalid transaction mode: " + mode);
                if (parentTransaction) {
                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {
                        if (onlyIfCompatible) {
                            parentTransaction = null;
                        }
                        else
                            throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
                    }
                    if (parentTransaction) {
                        storeNames.forEach(function (storeName) {
                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {
                                if (onlyIfCompatible) {
                                    parentTransaction = null;
                                }
                                else
                                    throw new exceptions.SubTransaction("Table " + storeName +
                                        " not included in parent transaction.");
                            }
                        });
                    }
                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {
                        parentTransaction = null;
                    }
                }
            }
            catch (e) {
                return parentTransaction ?
                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :
                    rejection(e);
            }
            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);
            return (parentTransaction ?
                parentTransaction._promise(idbMode, enterTransaction, "lock") :
                PSD.trans ?
                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :
                    this._whenReady(enterTransaction));
        };
        Dexie.prototype.table = function (tableName) {
            if (!hasOwn(this._allTables, tableName)) {
                throw new exceptions.InvalidTable("Table ".concat(tableName, " does not exist"));
            }
            return this._allTables[tableName];
        };
        return Dexie;
    }());

    var symbolObservable = typeof Symbol !== "undefined" && "observable" in Symbol
        ? Symbol.observable
        : "@@observable";
    var Observable =  (function () {
        function Observable(subscribe) {
            this._subscribe = subscribe;
        }
        Observable.prototype.subscribe = function (x, error, complete) {
            return this._subscribe(!x || typeof x === "function" ? { next: x, error: error, complete: complete } : x);
        };
        Observable.prototype[symbolObservable] = function () {
            return this;
        };
        return Observable;
    }());

    var domDeps;
    try {
        domDeps = {
            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,
            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange
        };
    }
    catch (e) {
        domDeps = { indexedDB: null, IDBKeyRange: null };
    }

    function liveQuery(querier) {
        var hasValue = false;
        var currentValue;
        var observable = new Observable(function (observer) {
            var scopeFuncIsAsync = isAsyncFunction(querier);
            function execute(ctx) {
                var wasRootExec = beginMicroTickScope();
                try {
                    if (scopeFuncIsAsync) {
                        incrementExpectedAwaits();
                    }
                    var rv = newScope(querier, ctx);
                    if (scopeFuncIsAsync) {
                        rv = rv.finally(decrementExpectedAwaits);
                    }
                    return rv;
                }
                finally {
                    wasRootExec && endMicroTickScope();
                }
            }
            var closed = false;
            var abortController;
            var accumMuts = {};
            var currentObs = {};
            var subscription = {
                get closed() {
                    return closed;
                },
                unsubscribe: function () {
                    if (closed)
                        return;
                    closed = true;
                    if (abortController)
                        abortController.abort();
                    if (startedListening)
                        globalEvents.storagemutated.unsubscribe(mutationListener);
                },
            };
            observer.start && observer.start(subscription);
            var startedListening = false;
            var doQuery = function () { return execInGlobalContext(_doQuery); };
            function shouldNotify() {
                return obsSetsOverlap(currentObs, accumMuts);
            }
            var mutationListener = function (parts) {
                extendObservabilitySet(accumMuts, parts);
                if (shouldNotify()) {
                    doQuery();
                }
            };
            var _doQuery = function () {
                if (closed ||
                    !domDeps.indexedDB)
                 {
                    return;
                }
                accumMuts = {};
                var subscr = {};
                if (abortController)
                    abortController.abort();
                abortController = new AbortController();
                var ctx = {
                    subscr: subscr,
                    signal: abortController.signal,
                    requery: doQuery,
                    querier: querier,
                    trans: null
                };
                var ret = execute(ctx);
                Promise.resolve(ret).then(function (result) {
                    hasValue = true;
                    currentValue = result;
                    if (closed || ctx.signal.aborted) {
                        return;
                    }
                    accumMuts = {};
                    currentObs = subscr;
                    if (!objectIsEmpty(currentObs) && !startedListening) {
                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);
                        startedListening = true;
                    }
                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });
                }, function (err) {
                    hasValue = false;
                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {
                        if (!closed)
                            execInGlobalContext(function () {
                                if (closed)
                                    return;
                                observer.error && observer.error(err);
                            });
                    }
                });
            };
            setTimeout(doQuery, 0);
            return subscription;
        });
        observable.hasValue = function () { return hasValue; };
        observable.getValue = function () { return currentValue; };
        return observable;
    }

    var Dexie = Dexie$1;
    props(Dexie, __assign(__assign({}, fullNameExceptions), {
        delete: function (databaseName) {
            var db = new Dexie(databaseName, { addons: [] });
            return db.delete();
        },
        exists: function (name) {
            return new Dexie(name, { addons: [] }).open().then(function (db) {
                db.close();
                return true;
            }).catch('NoSuchDatabaseError', function () { return false; });
        },
        getDatabaseNames: function (cb) {
            try {
                return getDatabaseNames(Dexie.dependencies).then(cb);
            }
            catch (_a) {
                return rejection(new exceptions.MissingAPI());
            }
        },
        defineClass: function () {
            function Class(content) {
                extend(this, content);
            }
            return Class;
        }, ignoreTransaction: function (scopeFunc) {
            return PSD.trans ?
                usePSD(PSD.transless, scopeFunc) :
                scopeFunc();
        }, vip: vip, async: function (generatorFn) {
            return function () {
                try {
                    var rv = awaitIterator(generatorFn.apply(this, arguments));
                    if (!rv || typeof rv.then !== 'function')
                        return DexiePromise.resolve(rv);
                    return rv;
                }
                catch (e) {
                    return rejection(e);
                }
            };
        }, spawn: function (generatorFn, args, thiz) {
            try {
                var rv = awaitIterator(generatorFn.apply(thiz, args || []));
                if (!rv || typeof rv.then !== 'function')
                    return DexiePromise.resolve(rv);
                return rv;
            }
            catch (e) {
                return rejection(e);
            }
        },
        currentTransaction: {
            get: function () { return PSD.trans || null; }
        }, waitFor: function (promiseOrFunction, optionalTimeout) {
            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?
                Dexie.ignoreTransaction(promiseOrFunction) :
                promiseOrFunction)
                .timeout(optionalTimeout || 60000);
            return PSD.trans ?
                PSD.trans.waitFor(promise) :
                promise;
        },
        Promise: DexiePromise,
        debug: {
            get: function () { return debug; },
            set: function (value) {
                setDebug(value);
            }
        },
        derive: derive, extend: extend, props: props, override: override,
        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,
        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,
        minKey: minKey,
        addons: [],
        connections: connections,
        errnames: errnames,
        dependencies: domDeps, cache: cache,
        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')
            .map(function (n) { return parseInt(n); })
            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));
    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);

    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {
            if (!propagatingLocally) {
                var event_1;
                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {
                    detail: updatedParts
                });
                propagatingLocally = true;
                dispatchEvent(event_1);
                propagatingLocally = false;
            }
        });
        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {
            var detail = _a.detail;
            if (!propagatingLocally) {
                propagateLocally(detail);
            }
        });
    }
    function propagateLocally(updateParts) {
        var wasMe = propagatingLocally;
        try {
            propagatingLocally = true;
            globalEvents.storagemutated.fire(updateParts);
            signalSubscribersNow(updateParts, true);
        }
        finally {
            propagatingLocally = wasMe;
        }
    }
    var propagatingLocally = false;

    var bc;
    var createBC = function () { };
    if (typeof BroadcastChannel !== 'undefined') {
        createBC = function () {
            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);
            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };
        };
        createBC();
        if (typeof bc.unref === 'function') {
            bc.unref();
        }
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {
            if (!propagatingLocally) {
                bc.postMessage(changedParts);
            }
        });
    }

    if (typeof addEventListener !== 'undefined') {
        addEventListener('pagehide', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pagehide');
                bc === null || bc === void 0 ? void 0 : bc.close();
                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {
                    var db = connections_1[_i];
                    db.close({ disableAutoOpen: false });
                }
            }
        });
        addEventListener('pageshow', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pageshow');
                createBC();
                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });
            }
        });
    }

    function add(value) {
        return new PropModification({ add: value });
    }

    function remove(value) {
        return new PropModification({ remove: value });
    }

    function replacePrefix(a, b) {
        return new PropModification({ replacePrefix: [a, b] });
    }

    DexiePromise.rejectionMapper = mapError;
    setDebug(debug);

    var namedExports = /*#__PURE__*/Object.freeze({
        __proto__: null,
        Dexie: Dexie$1,
        liveQuery: liveQuery,
        Entity: Entity,
        cmp: cmp,
        PropModification: PropModification,
        replacePrefix: replacePrefix,
        add: add,
        remove: remove,
        'default': Dexie$1,
        RangeSet: RangeSet,
        mergeRanges: mergeRanges,
        rangesOverlap: rangesOverlap
    });

    __assign(Dexie$1, namedExports, { default: Dexie$1 });

    return Dexie$1;

}));
//# sourceMappingURL=dexie.js.map


/***/ }),

/***/ "../../node_modules/dexie/import-wrapper.mjs":
/*!***************************************************!*\
  !*** ../../node_modules/dexie/import-wrapper.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dexie: () => (/* binding */ Dexie),
/* harmony export */   DexieYProvider: () => (/* binding */ DexieYProvider),
/* harmony export */   Entity: () => (/* binding */ Entity),
/* harmony export */   PropModification: () => (/* binding */ PropModification),
/* harmony export */   RangeSet: () => (/* binding */ RangeSet),
/* harmony export */   add: () => (/* binding */ add),
/* harmony export */   cmp: () => (/* binding */ cmp),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   liveQuery: () => (/* binding */ liveQuery),
/* harmony export */   mergeRanges: () => (/* binding */ mergeRanges),
/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),
/* harmony export */   remove: () => (/* binding */ remove),
/* harmony export */   replacePrefix: () => (/* binding */ replacePrefix)
/* harmony export */ });
/* harmony import */ var _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/dexie.js */ "../../node_modules/dexie/dist/dexie.js");
// Making the module version consumable via require - to prohibit
// multiple occurrancies of the same module in the same app
// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)

const DexieSymbol = Symbol.for("Dexie");
const Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__);
if (_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer !== Dexie.semVer) {
    throw new Error(`Two different versions of Dexie loaded in the same app: ${_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer} and ${Dexie.semVer}`);
}
const { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,
    PropModification, replacePrefix, add, remove,
    DexieYProvider } = Dexie;

    
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dexie);


/***/ }),

/***/ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js":
/*!***********************************************************************************!*\
  !*** ../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! void-elements */ "../../node_modules/void-elements/index.js");
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(void_elements__WEBPACK_IMPORTED_MODULE_0__);
var t=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],((void_elements__WEBPACK_IMPORTED_MODULE_0___default())[i[1]]||"/"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith("!--"))){var s=n.indexOf("--\x3e");return{type:"comment",comment:-1!==s?n.slice(4,s):""}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i=/^\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(a,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf("<")){var u=e.indexOf("<");c.push({type:"text",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!=="</"+a.name+">")return;m=!1}var u,f="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,"tag"===(a=n(r)).type&&t.components[a.name]&&(a.type="component",m=!0),a.voidElement||m||!d||"<"===d||a.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&"<"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf("<",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=" "),(x>-1&&l+u.length>=0||" "!==g)&&u.push({type:"text",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a("",t)},"")}};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (c);
//# sourceMappingURL=html-parse-stringify.module.js.map


/***/ }),

/***/ "../../node_modules/i18next/dist/cjs/i18next.js":
/*!******************************************************!*\
  !*** ../../node_modules/i18next/dist/cjs/i18next.js ***!
  \******************************************************/
/***/ ((module) => {

"use strict";


const isString = obj => typeof obj === 'string';
const defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
const makeString = object => {
  if (object == null) return '';
  return '' + object;
};
const copy = (a, s, t) => {
  a.forEach(m => {
    if (s[m]) t[m] = s[m];
  });
};
const lastOfPathSeparatorRegExp = /###/g;
const cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;
const canNotTraverseDeeper = object => !object || isString(object);
const getLastOfPath = (object, path, Empty) => {
  const stack = !isString(path) ? path : path.split('.');
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object)) return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty) object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object)) return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
const setPath = (object, path, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  if (obj !== undefined || path.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path[path.length - 1];
  let p = path.slice(0, path.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === undefined && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {
      last.obj = undefined;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
const pushPath = (object, path, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
const getPath = (object, path) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path);
  if (!obj) return undefined;
  return obj[k];
};
const getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== undefined) {
    return value;
  }
  return getPath(defaultData, key);
};
const deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== '__proto__' && prop !== 'constructor') {
      if (prop in target) {
        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {
          if (overwrite) target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
const regexEscape = str => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
var _entityMap = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '/': '&#x2F;'
};
const escape = data => {
  if (isString(data)) {
    return data.replace(/[&<>"'\/]/g, s => _entityMap[s]);
  }
  return data;
};
class RegExpCache {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== undefined) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
}
const chars = [' ', ',', '?', '!', ';'];
const looksLikeObjectPathRegExpCache = new RegExpCache(20);
const looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || '';
  keySeparator = keySeparator || '';
  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0) return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\?' : c).join('|')})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
const deepFind = function (obj, path) {
  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';
  if (!obj) return undefined;
  if (obj[path]) return obj[path];
  const tokens = path.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length;) {
    if (!current || typeof current !== 'object') {
      return undefined;
    }
    let next;
    let nextPath = '';
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== undefined) {
        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
const getCleanedCode = code => code && code.replace('_', '-');

const consoleLogger = {
  type: 'logger',
  log(args) {
    this.output('log', args);
  },
  warn(args) {
    this.output('warn', args);
  },
  error(args) {
    this.output('error', args);
  },
  output(type, args) {
    if (console && console[type]) console[type].apply(console, args);
  }
};
class Logger {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, 'log', '', true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, 'warn', '', true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, 'error', '');
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new Logger(this.logger, options);
  }
}
var baseLogger = new Logger();

class EventEmitter {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(' ').forEach(event => {
      if (!this.observers[event]) this.observers[event] = new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event]) return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach(_ref => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers['*']) {
      const cloned = Array.from(this.observers['*'].entries());
      cloned.forEach(_ref2 => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
}

class ResourceStore extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      ns: ['translation'],
      defaultNS: 'translation'
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    if (this.options.ignoreJSONStructure === undefined) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path;
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    } else {
      path = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path.push(...key);
        } else if (isString(key) && keySeparator) {
          path.push(...key.split(keySeparator));
        } else {
          path.push(key);
        }
      }
    }
    const result = getPath(this.data, path);
    if (!result && !ns && !key && lng.indexOf('.') > -1) {
      lng = path[0];
      ns = path[1];
      key = path.slice(2).join('.');
    }
    if (result || !ignoreJSONStructure || !isString(key)) return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path, value);
    if (!options.silent) this.emit('added', lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {
        silent: true
      });
    }
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path) || {};
    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path, pack);
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit('removed', lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  }
  getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === 'v1') return {
      ...{},
      ...this.getResource(lng, ns)
    };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
}

var postProcessor = {
  processors: {},
  addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach(processor => {
      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};

const checkedLoadedFor = {};
class Translator extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    super();
    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    this.logger = baseLogger.create('translator');
  }
  changeLanguage(lng) {
    if (lng) this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    if (key === undefined || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces: isString(namespaces) ? [namespaces] : namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    return {
      key,
      namespaces: isString(namespaces) ? [namespaces] : namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === 'object') options = {
      ...options
    };
    if (!options) options = {};
    if (keys === undefined || keys === null) return '';
    if (!Array.isArray(keys)) keys = [String(keys)];
    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy[m] === deepKey) copy[m] = res[m];
          }
        }
        res = copy;
      }
    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const hasDefaultValue = Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : '';
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit('missingKey', l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach(language => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach(suffix => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== 'v1') {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation) this.interpolator.init({
        ...options,
        ...{
          interpolation: {
            ...this.options.interpolation,
            ...options.interpolation
          }
        }
      });
      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && !isString(options.replace) ? options.replace : options;
      if (this.options.interpolation.defaultVariables) data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft) options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;
      if (options.nest !== false) res = this.interpolator.nest(res, function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (lastKey && lastKey[0] === args[0] && !options.context) {
          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
          return null;
        }
        return _this.translate(...args, key);
      }, options);
      if (options.interpolation) this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;
    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (isString(keys)) keys = [keys];
    keys.forEach(k => {
      if (this.isValidLookup(found)) return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach(ns => {
        if (this.isValidLookup(found)) return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(', ')}" won't get resolved as namespace "${usedNS}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
        }
        codes.forEach(code => {
          if (this.isValidLookup(found)) return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];
    const useOptionsReplaceForData = options.replace && !isString(options.replace);
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = 'defaultValue';
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {
        return true;
      }
    }
    return false;
  }
}

const capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);
class LanguageUtil {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create('languageUtils');
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return null;
    const p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === 'x') return null;
    return this.formatLanguageCode(p.join('-'));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return code;
    const p = code.split('-');
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (isString(code) && code.indexOf('-') > -1) {
      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {
        try {
          let formattedCode = Intl.getCanonicalLocales(code)[0];
          if (formattedCode && this.options.lowerCaseLng) {
            formattedCode = formattedCode.toLowerCase();
          }
          if (formattedCode) return formattedCode;
        } catch (e) {}
      }
      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      let p = code.split('-');
      if (this.options.lowerCaseLng) {
        p = p.map(part => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join('-');
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes) return null;
    let found;
    codes.forEach(code => {
      if (found) return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach(code => {
        if (found) return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly)) return found = lngOnly;
        found = this.options.supportedLngs.find(supportedLng => {
          if (supportedLng === lngOnly) return supportedLng;
          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;
          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;
        });
      });
    }
    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);
    if (isString(fallbacks)) fallbacks = [fallbacks];
    if (Array.isArray(fallbacks)) return fallbacks;
    if (!code) return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found) found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = c => {
      if (!c) return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (isString(code)) {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach(fc => {
      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
}

let sets = [{
  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],
  nr: [1],
  fc: 3
}, {
  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ['ar'],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ['cs', 'sk'],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ['csb', 'pl'],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ['cy'],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ['fr'],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ['ga'],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ['gd'],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ['is'],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ['jv'],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ['kw'],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ['lt'],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ['lv'],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ['mk'],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ['mnk'],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ['mt'],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ['or'],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ['ro'],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ['sl'],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ['he', 'iw'],
  nr: [1, 2, 20, 21],
  fc: 22
}];
let _rulesPluralsTypes = {
  1: n => Number(n > 1),
  2: n => Number(n != 1),
  3: n => 0,
  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: n => Number(n >= 2),
  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: n => Number(n % 10 != 1 || n % 100 == 11),
  13: n => Number(n !== 0),
  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
const nonIntlVersions = ['v1', 'v2', 'v3'];
const intlVersions = ['v4'];
const suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
const createRules = () => {
  const rules = {};
  sets.forEach(set => {
    set.lngs.forEach(l => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
class PluralResolver {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create('pluralResolver');
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {
      this.options.compatibilityJSON = 'v3';
      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);
      const type = options.ordinal ? 'ordinal' : 'cardinal';
      const cacheKey = JSON.stringify({
        cleanedCode,
        type
      });
      if (cacheKey in this.pluralRulesCache) {
        return this.pluralRulesCache[cacheKey];
      }
      let rule;
      try {
        rule = new Intl.PluralRules(cleanedCode, {
          type
        });
      } catch (err) {
        if (!code.match(/-|_/)) return;
        const lngPart = this.languageUtils.getLanguagePartFromCode(code);
        rule = this.getRule(lngPart, options);
      }
      this.pluralRulesCache[cacheKey] = rule;
      return rule;
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);
    }
    return rule.numbers.map(number => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return '';
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = 'plural';
      } else if (suffix === 1) {
        suffix = '';
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === 'v1') {
      if (suffix === 1) return '';
      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === 'v2') {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
}

const deepFindWithDefaults = function (data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  let path = getPathWithDefaults(data, defaultData, key);
  if (!path && ignoreJSONStructure && isString(key)) {
    path = deepFind(data, key, keySeparator);
    if (path === undefined) path = deepFind(defaultData, key, keySeparator);
  }
  return path;
};
const regexSafe = val => val.replace(/\$/g, '$$$$');
class Interpolator {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('interpolator');
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || (value => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    if (!options.interpolation) options.interpolation = {
      escapeValue: true
    };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== undefined ? escape$1 : escape;
    this.escapeValue = escapeValue !== undefined ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';
    this.formatSeparator = formatSeparator || ',';
    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');
    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';
    this.maxReplaces = maxReplaces || 1000;
    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options) this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, 'g');
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = key => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path, undefined, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: val => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach(todo => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === undefined) {
          if (typeof missingInterpolationHandler === 'function') {
            const temp = missingInterpolationHandler(str, match, options);
            value = isString(temp) ? temp : '';
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = '';
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = '';
          }
        } else if (!isString(value) && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0) return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions) clonedOptions = {
          ...inheritedOptions,
          ...clonedOptions
        };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && !isString(value)) return value;
      if (!isString(value)) value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = '';
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
}

const parseFormatStr = formatStr => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf('(') > -1) {
    const p = formatStr.split('(');
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === 'currency' && optStr.indexOf(':') < 0) {
      if (!formatOptions.currency) formatOptions.currency = optStr.trim();
    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {
      if (!formatOptions.range) formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(';');
      opts.forEach(opt => {
        if (opt) {
          const [key, ...rest] = opt.split(':');
          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;
          if (val === 'false') formatOptions[trimmedKey] = false;
          if (val === 'true') formatOptions[trimmedKey] = true;
          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
const createCachedFormatter = fn => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: undefined
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
class Formatter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('formatter');
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: 'currency'
        });
        return val => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val, opt.range || 'day');
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    this.formatSeparator = options.interpolation.formatSeparator || ',';
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {
      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
}

const removePending = (q, name) => {
  if (q.pending[name] !== undefined) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
class Connector extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create('backendConnector');
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach(lng => {
      let hasAllNamespaces = true;
      namespaces.forEach(ns => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {
          if (pending[name] === undefined) pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === undefined) pending[name] = true;
          if (toLoad[name] === undefined) toLoad[name] = true;
          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces) toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    if (err) this.emit('failedLoading', lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data) this.state[name] = 0;
    const loaded = {};
    this.queue.forEach(q => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err) q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach(l => {
          if (!loaded[l]) loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach(n => {
              if (loaded[l][n] === undefined) loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit('loaded', loaded);
    this.queue = this.queue.filter(q => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : undefined;
    if (!lng.length) return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === 'function') {
          r.then(data => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : undefined;
    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);
    if (isString(namespaces)) namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback();
      return null;
    }
    toLoad.toLoad.forEach(name => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {
      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
      return;
    }
    if (key === undefined || key === null || key === '') return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === 'function') {
            r.then(data => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
}

const get = () => ({
  debug: false,
  initImmediate: true,
  ns: ['translation'],
  defaultNS: ['translation'],
  fallbackLng: ['dev'],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: 'all',
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: '.',
  nsSeparator: ':',
  pluralSeparator: '_',
  contextSeparator: '_',
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: 'fallback',
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: args => {
    let ret = {};
    if (typeof args[1] === 'object') ret = args[1];
    if (isString(args[1])) ret.defaultValue = args[1];
    if (isString(args[2])) ret.tDescription = args[2];
    if (typeof args[2] === 'object' || typeof args[3] === 'object') {
      const options = args[3] || args[2];
      Object.keys(options).forEach(key => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: value => value,
    prefix: '{{',
    suffix: '}}',
    formatSeparator: ',',
    unescapePrefix: '-',
    nestingPrefix: '$t(',
    nestingSuffix: ')',
    nestingOptionsSeparator: ',',
    maxReplaces: 1000,
    skipOnVariables: true
  }
});
const transformOptions = options => {
  if (isString(options.ns)) options.ns = [options.ns];
  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];
  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {
    options.supportedLngs = options.supportedLngs.concat(['cimode']);
  }
  return options;
};

const noop = () => {};
const bindMemberFunctions = inst => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach(mem => {
    if (typeof inst[mem] === 'function') {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
class I18n extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    this.isInitializing = true;
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (isString(options.ns)) {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf('translation') < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== 'v1') {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== undefined) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== undefined) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = ClassOrObject => {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== 'undefined') {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init) s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on('*', function (event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach(m => {
        if (m.init) m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn('init: no languageDetector is used and no lng is defined');
    }
    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];
    storeApi.forEach(fcName => {
      this[fcName] = function () {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];
    storeApiChained.forEach(fcName => {
      this[fcName] = function () {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');
        this.isInitialized = true;
        if (!this.options.isClone) this.logger.log('initialized', this.options);
        this.emit('initialized', this.options);
        deferred.resolve(t);
        callback(err, t);
      };
      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = isString(language) ? language : this.language;
    if (typeof language === 'function') usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();
      const toLoad = [];
      const append = lng => {
        if (!lng) return;
        if (lng === 'cimode') return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(l => {
          if (l === 'cimode') return;
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(l => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach(l => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, e => {
        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === 'function') {
      callback = lngs;
      lngs = undefined;
    }
    if (typeof ns === 'function') {
      callback = ns;
      ns = undefined;
    }
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    if (!callback) callback = noop;
    this.services.backendConnector.reload(lngs, ns, err => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module) {
    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');
    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');
    if (module.type === 'backend') {
      this.modules.backend = module;
    }
    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }
    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }
    if (module.type === 'i18nFormat') {
      this.modules.i18nFormat = module;
    }
    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }
    if (module.type === 'formatter') {
      this.modules.formatter = module;
    }
    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages) return;
    if (['cimode', 'dev'].indexOf(l) > -1) return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit('languageChanging', lng);
    const setLngProps = l => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = undefined;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = undefined;
        this.emit('languageChanged', l);
        this.logger.log('languageChanged', l);
      } else {
        this.isLanguageChangingTo = undefined;
      }
      deferred.resolve(function () {
        return _this2.t(...arguments);
      });
      if (callback) callback(err, function () {
        return _this2.t(...arguments);
      });
    };
    const setLng = lngs => {
      if (!lng && !lngs && this.services.languageDetector) lngs = [];
      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language) this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, err => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function (key, opts) {
      let options;
      if (typeof opts !== 'object') {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || '.';
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (isString(lng)) {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === 'cimode') return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== undefined) return preResult;
    }
    if (this.hasResourceBundle(lng, ns)) return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback) callback();
      return Promise.resolve();
    }
    if (isString(ns)) ns = [ns];
    ns.forEach(n => {
      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);
    });
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (isString(lngs)) lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback) callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng) return 'rtl';
    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    return new I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore) delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new I18n(mergedOptions);
    if (options.debug !== undefined || options.prefix !== undefined) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(m => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on('*', function (event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
}
const instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;

module.exports = instance;


/***/ }),

/***/ "../../node_modules/lodash.debounce/index.js":
/*!***************************************************!*\
  !*** ../../node_modules/lodash.debounce/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = debounce;


/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/I18nextProvider.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/I18nextProvider.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nextProvider: () => (/* binding */ I18nextProvider)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


function I18nextProvider(_ref) {
  let {
    i18n,
    defaultNS,
    children
  } = _ref;
  const value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({
    i18n,
    defaultNS
  }), [i18n, defaultNS]);
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext.Provider, {
    value
  }, children);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Trans.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Trans.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");




function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_2__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const t = tFromProps || i18n && i18n.t.bind(i18n);
  return (0,_TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans)({
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions,
    values,
    defaults,
    components,
    ns: ns || t && t.ns || defaultNSFromContext || i18n && i18n.options && i18n.options.defaultNS,
    i18n,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  });
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/TransWithoutContext.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* binding */ nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-parse-stringify */ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");





const hasChildren = (node, checkLength) => {
  if (!node) return false;
  const base = node.props ? node.props.children : node.children;
  if (checkLength) return base.length > 0;
  return !!base;
};
const getChildren = node => {
  if (!node) return [];
  const children = node.props ? node.props.children : node.children;
  return node.props && node.props.i18nIsDynamicList ? getAsArray(children) : children;
};
const hasValidReactChildren = children => Array.isArray(children) && children.every(react__WEBPACK_IMPORTED_MODULE_0__.isValidElement);
const getAsArray = data => Array.isArray(data) ? data : [data];
const mergeProps = (source, target) => {
  const newTarget = {
    ...target
  };
  newTarget.props = Object.assign(source.props, target.props);
  return newTarget;
};
const nodesToString = (children, i18nOptions) => {
  if (!children) return '';
  let stringNode = '';
  const childrenArray = getAsArray(children);
  const keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];
  childrenArray.forEach((child, childIndex) => {
    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
      stringNode += `${child}`;
    } else if ((0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) {
      const {
        props,
        type
      } = child;
      const childPropsCount = Object.keys(props).length;
      const shouldKeepChild = keepArray.indexOf(type) > -1;
      const childChildren = props.children;
      if (!childChildren && shouldKeepChild && !childPropsCount) {
        stringNode += `<${type}/>`;
      } else if (!childChildren && (!shouldKeepChild || childPropsCount) || props.i18nIsDynamicList) {
        stringNode += `<${childIndex}></${childIndex}>`;
      } else if (shouldKeepChild && childPropsCount === 1 && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(childChildren)) {
        stringNode += `<${type}>${childChildren}</${type}>`;
      } else {
        const content = nodesToString(childChildren, i18nOptions);
        stringNode += `<${childIndex}>${content}</${childIndex}>`;
      }
    } else if (child === null) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a null child.`);
    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child)) {
      const {
        format,
        ...clone
      } = child;
      const keys = Object.keys(clone);
      if (keys.length === 1) {
        const value = format ? `${keys[0]}, ${format}` : keys[0];
        stringNode += `{{${value}}}`;
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.`, child);
      }
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.`, child);
    }
  });
  return stringNode;
};
const renderNodes = (children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) => {
  if (targetString === '') return [];
  const keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];
  const emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.map(keep => `<${keep}`).join('|')).test(targetString);
  if (!children && !emptyChildrenButNeedsHandling && !shouldUnescape) return [targetString];
  const data = {};
  const getData = childs => {
    const childrenArray = getAsArray(childs);
    childrenArray.forEach(child => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) return;
      if (hasChildren(child)) getData(getChildren(child));else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) Object.assign(data, child);
    });
  };
  getData(children);
  const ast = html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__["default"].parse(`<0>${targetString}</0>`);
  const opts = {
    ...data,
    ...combinedTOpts
  };
  const renderInner = (child, node, rootReactNode) => {
    const childs = getChildren(child);
    const mappedChildren = mapAST(childs, node.children, rootReactNode);
    return hasValidReactChildren(childs) && mappedChildren.length === 0 || child.props && child.props.i18nIsDynamicList ? childs : mappedChildren;
  };
  const pushTranslatedJSX = (child, inner, mem, i, isVoid) => {
    if (child.dummy) {
      child.children = inner;
      mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child, {
        key: i
      }, isVoid ? undefined : inner));
    } else {
      mem.push(...react__WEBPACK_IMPORTED_MODULE_0__.Children.map([child], c => {
        const props = {
          ...c.props
        };
        delete props.i18nIsDynamicList;
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(c.type, {
          ...props,
          key: i,
          ref: c.ref
        }, isVoid ? null : inner);
      }));
    }
  };
  const mapAST = (reactNode, astNode, rootReactNode) => {
    const reactNodes = getAsArray(reactNode);
    const astNodes = getAsArray(astNode);
    return astNodes.reduce((mem, node, i) => {
      const translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);
      if (node.type === 'tag') {
        let tmp = reactNodes[parseInt(node.name, 10)];
        if (rootReactNode.length === 1 && !tmp) tmp = rootReactNode[0][node.name];
        if (!tmp) tmp = {};
        const child = Object.keys(node.attrs).length !== 0 ? mergeProps({
          props: node.attrs
        }, tmp) : tmp;
        const isElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child);
        const isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;
        const isEmptyTransWithHTML = emptyChildrenButNeedsHandling && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && child.dummy && !isElement;
        const isKnownComponent = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(children) && Object.hasOwnProperty.call(children, node.name);
        if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
          const value = i18n.services.interpolator.interpolate(child, opts, i18n.language);
          mem.push(value);
        } else if (hasChildren(child) || isValidTranslationWithChildren) {
          const inner = renderInner(child, node, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (isEmptyTransWithHTML) {
          const inner = mapAST(reactNodes, node.children, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (Number.isNaN(parseFloat(node.name))) {
          if (isKnownComponent) {
            const inner = renderInner(child, node, rootReactNode);
            pushTranslatedJSX(child, inner, mem, i, node.voidElement);
          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {
            if (node.voidElement) {
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }));
            } else {
              const inner = mapAST(reactNodes, node.children, rootReactNode);
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }, inner));
            }
          } else if (node.voidElement) {
            mem.push(`<${node.name} />`);
          } else {
            const inner = mapAST(reactNodes, node.children, rootReactNode);
            mem.push(`<${node.name}>${inner}</${node.name}>`);
          }
        } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !isElement) {
          const content = node.children[0] ? translationContent : null;
          if (content) mem.push(content);
        } else {
          pushTranslatedJSX(child, translationContent, mem, i, node.children.length !== 1 || !translationContent);
        }
      } else if (node.type === 'text') {
        const wrapTextNodes = i18nOptions.transWrapTextNodes;
        const content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);
        if (wrapTextNodes) {
          mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(wrapTextNodes, {
            key: `${node.name}-${i}`
          }, content));
        } else {
          mem.push(content);
        }
      }
      return mem;
    }, []);
  };
  const result = mapAST([{
    dummy: true,
    children: children || []
  }], ast, getAsArray(children || []));
  return getChildren(result[0]);
};
function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const i18n = i18nFromProps || (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__.getI18n)();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using i18nextReactModule');
    return children;
  }
  const t = tFromProps || i18n.t.bind(i18n) || (k => k);
  const reactI18nextOptions = {
    ...(0,_defaults_js__WEBPACK_IMPORTED_MODULE_3__.getDefaults)(),
    ...(i18n.options && i18n.options.react)
  };
  let namespaces = ns || t.ns || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  const nodeAsString = nodesToString(children, reactI18nextOptions);
  const defaultValue = defaults || nodeAsString || reactI18nextOptions.transEmptyNodeValue || i18nKey;
  const {
    hashTransKey
  } = reactI18nextOptions;
  const key = i18nKey || (hashTransKey ? hashTransKey(nodeAsString || defaultValue) : nodeAsString || defaultValue);
  if (i18n.options && i18n.options.interpolation && i18n.options.interpolation.defaultVariables) {
    values = values && Object.keys(values).length > 0 ? {
      ...values,
      ...i18n.options.interpolation.defaultVariables
    } : {
      ...i18n.options.interpolation.defaultVariables
    };
  }
  const interpolationOverride = values || count !== undefined || !children ? tOptions.interpolation : {
    interpolation: {
      ...tOptions.interpolation,
      prefix: '#$?',
      suffix: '?$#'
    }
  };
  const combinedTOpts = {
    ...tOptions,
    context: context || tOptions.context,
    count,
    ...values,
    ...interpolationOverride,
    defaultValue,
    ns: namespaces
  };
  const translation = key ? t(key, combinedTOpts) : defaultValue;
  if (components) {
    Object.keys(components).forEach(c => {
      const comp = components[c];
      if (typeof comp.type === 'function' || !comp.props || !comp.props.children || translation.indexOf(`${c}/>`) < 0 && translation.indexOf(`${c} />`) < 0) return;
      function Componentized() {
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, comp);
      }
      components[c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Componentized);
    });
  }
  const content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);
  const useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;
  return useAsParent ? (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(useAsParent, additionalProps, content) : content;
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Translation.js":
/*!***************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Translation.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Translation: () => (/* binding */ Translation)
/* harmony export */ });
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");

function Translation(props) {
  const {
    ns,
    children,
    ...options
  } = props;
  const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_0__.useTranslation)(ns, options);
  return children(t, {
    i18n,
    lng: i18n.language
  }, ready);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/context.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/context.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* binding */ I18nContext),
/* harmony export */   ReportNamespaces: () => (/* binding */ ReportNamespaces),
/* harmony export */   composeInitialProps: () => (/* binding */ composeInitialProps),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n),
/* harmony export */   getInitialProps: () => (/* binding */ getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__.initReactI18next),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.setI18n)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");





const I18nContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();
class ReportNamespaces {
  constructor() {
    this.usedNamespaces = {};
  }
  addUsedNamespaces(namespaces) {
    namespaces.forEach(ns => {
      if (!this.usedNamespaces[ns]) this.usedNamespaces[ns] = true;
    });
  }
  getUsedNamespaces = () => Object.keys(this.usedNamespaces);
}
const composeInitialProps = ForComponent => async ctx => {
  const componentsInitialProps = ForComponent.getInitialProps ? await ForComponent.getInitialProps(ctx) : {};
  const i18nInitialProps = getInitialProps();
  return {
    ...componentsInitialProps,
    ...i18nInitialProps
  };
};
const getInitialProps = () => {
  const i18n = (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];
  const ret = {};
  const initialI18nStore = {};
  i18n.languages.forEach(l => {
    initialI18nStore[l] = {};
    namespaces.forEach(ns => {
      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};
    });
  });
  ret.initialI18nStore = initialI18nStore;
  ret.initialLanguage = i18n.language;
  return ret;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/defaults.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/defaults.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaults: () => (/* binding */ getDefaults),
/* harmony export */   setDefaults: () => (/* binding */ setDefaults)
/* harmony export */ });
/* harmony import */ var _unescape_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unescape.js */ "../../node_modules/react-i18next/dist/es/unescape.js");

let defaultOptions = {
  bindI18n: 'languageChanged',
  bindI18nStore: '',
  transEmptyNodeValue: '',
  transSupportBasicHtmlNodes: true,
  transWrapTextNodes: '',
  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],
  useSuspense: true,
  unescape: _unescape_js__WEBPACK_IMPORTED_MODULE_0__.unescape
};
const setDefaults = function () {
  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  defaultOptions = {
    ...defaultOptions,
    ...options
  };
};
const getDefaults = () => defaultOptions;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/i18nInstance.js":
/*!****************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/i18nInstance.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getI18n: () => (/* binding */ getI18n),
/* harmony export */   setI18n: () => (/* binding */ setI18n)
/* harmony export */ });
let i18nInstance;
const setI18n = instance => {
  i18nInstance = instance;
};
const getI18n = () => i18nInstance;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/index.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.I18nContext),
/* harmony export */   I18nextProvider: () => (/* reexport safe */ _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__.I18nextProvider),
/* harmony export */   Trans: () => (/* reexport safe */ _Trans_js__WEBPACK_IMPORTED_MODULE_0__.Trans),
/* harmony export */   TransWithoutContext: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans),
/* harmony export */   Translation: () => (/* reexport safe */ _Translation_js__WEBPACK_IMPORTED_MODULE_4__.Translation),
/* harmony export */   composeInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.composeInitialProps),
/* harmony export */   date: () => (/* binding */ date),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.getI18n),
/* harmony export */   getInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__.initReactI18next),
/* harmony export */   number: () => (/* binding */ number),
/* harmony export */   plural: () => (/* binding */ plural),
/* harmony export */   select: () => (/* binding */ select),
/* harmony export */   selectOrdinal: () => (/* binding */ selectOrdinal),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.setI18n),
/* harmony export */   time: () => (/* binding */ time),
/* harmony export */   useSSR: () => (/* reexport safe */ _useSSR_js__WEBPACK_IMPORTED_MODULE_7__.useSSR),
/* harmony export */   useTranslation: () => (/* reexport safe */ _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__.useTranslation),
/* harmony export */   withSSR: () => (/* reexport safe */ _withSSR_js__WEBPACK_IMPORTED_MODULE_6__.withSSR),
/* harmony export */   withTranslation: () => (/* reexport safe */ _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__.withTranslation)
/* harmony export */ });
/* harmony import */ var _Trans_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Trans.js */ "../../node_modules/react-i18next/dist/es/Trans.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./withTranslation.js */ "../../node_modules/react-i18next/dist/es/withTranslation.js");
/* harmony import */ var _Translation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Translation.js */ "../../node_modules/react-i18next/dist/es/Translation.js");
/* harmony import */ var _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./I18nextProvider.js */ "../../node_modules/react-i18next/dist/es/I18nextProvider.js");
/* harmony import */ var _withSSR_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./withSSR.js */ "../../node_modules/react-i18next/dist/es/withSSR.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");












const date = () => '';
const time = () => '';
const number = () => '';
const select = () => '';
const plural = () => '';
const selectOrdinal = () => '';

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/initReactI18next.js":
/*!********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/initReactI18next.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initReactI18next: () => (/* binding */ initReactI18next)
/* harmony export */ });
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");


const initReactI18next = {
  type: '3rdParty',
  init(instance) {
    (0,_defaults_js__WEBPACK_IMPORTED_MODULE_0__.setDefaults)(instance.options.react);
    (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__.setI18n)(instance);
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/unescape.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/unescape.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unescape: () => (/* binding */ unescape)
/* harmony export */ });
const matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;
const htmlEntities = {
  '&amp;': '&',
  '&#38;': '&',
  '&lt;': '<',
  '&#60;': '<',
  '&gt;': '>',
  '&#62;': '>',
  '&apos;': "'",
  '&#39;': "'",
  '&quot;': '"',
  '&#34;': '"',
  '&nbsp;': ' ',
  '&#160;': ' ',
  '&copy;': '',
  '&#169;': '',
  '&reg;': '',
  '&#174;': '',
  '&hellip;': '',
  '&#8230;': '',
  '&#x2F;': '/',
  '&#47;': '/'
};
const unescapeHtmlEntity = m => htmlEntities[m];
const unescape = text => text.replace(matchHtmlEntity, unescapeHtmlEntity);

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useSSR.js":
/*!**********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useSSR.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useSSR: () => (/* binding */ useSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


const useSSR = function (initialI18nStore, initialLanguage) {
  let props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n.options && i18n.options.isClone) return;
  if (initialI18nStore && !i18n.initializedStoreOnce) {
    i18n.services.resourceStore.data = initialI18nStore;
    i18n.options.ns = Object.values(initialI18nStore).reduce((mem, lngResources) => {
      Object.keys(lngResources).forEach(ns => {
        if (mem.indexOf(ns) < 0) mem.push(ns);
      });
      return mem;
    }, i18n.options.ns);
    i18n.initializedStoreOnce = true;
    i18n.isInitialized = true;
  }
  if (initialLanguage && !i18n.initializedLanguageOnce) {
    i18n.changeLanguage(initialLanguage);
    i18n.initializedLanguageOnce = true;
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useTranslation.js":
/*!******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useTranslation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useTranslation: () => (/* binding */ useTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const usePrevious = (value, ignore) => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    ref.current = ignore ? ref.current : value;
  }, [value, ignore]);
  return ref.current;
};
const alwaysNewT = (i18n, language, namespace, keyPrefix) => i18n.getFixedT(language, namespace, keyPrefix);
const useMemoizedT = (i18n, language, namespace, keyPrefix) => (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(alwaysNewT(i18n, language, namespace, keyPrefix), [i18n, language, namespace, keyPrefix]);
const useTranslation = function (ns) {
  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new _context_js__WEBPACK_IMPORTED_MODULE_1__.ReportNamespaces();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using initReactI18next');
    const notReadyT = (k, optsOrDefaultValue) => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue)) return optsOrDefaultValue;
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(optsOrDefaultValue) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue.defaultValue)) return optsOrDefaultValue.defaultValue;
      return Array.isArray(k) ? k[k.length - 1] : k;
    };
    const retNotReady = [notReadyT, {}, false];
    retNotReady.t = notReadyT;
    retNotReady.i18n = {};
    retNotReady.ready = false;
    return retNotReady;
  }
  if (i18n.options.react && i18n.options.react.wait !== undefined) (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');
  const i18nOptions = {
    ...(0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults)(),
    ...i18n.options.react,
    ...props
  };
  const {
    useSuspense,
    keyPrefix
  } = i18nOptions;
  let namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);
  const ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(n => (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.hasLoadedNamespace)(n, i18n, i18nOptions));
  const memoGetT = useMemoizedT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const getT = () => memoGetT;
  const getNewT = () => alwaysNewT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const [t, setT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getT);
  let joinedNS = namespaces.join();
  if (props.lng) joinedNS = `${props.lng}${joinedNS}`;
  const previousJoinedNS = usePrevious(joinedNS);
  const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    const {
      bindI18n,
      bindI18nStore
    } = i18nOptions;
    isMounted.current = true;
    if (!ready && !useSuspense) {
      if (props.lng) {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      }
    }
    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {
      setT(getNewT);
    }
    const boundReset = () => {
      if (isMounted.current) setT(getNewT);
    };
    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);
    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);
    return () => {
      isMounted.current = false;
      if (bindI18n && i18n) bindI18n.split(' ').forEach(e => i18n.off(e, boundReset));
      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(e => i18n.store.off(e, boundReset));
    };
  }, [i18n, joinedNS]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (isMounted.current && ready) {
      setT(getT);
    }
  }, [i18n, keyPrefix, ready]);
  const ret = [t, i18n, ready];
  ret.t = t;
  ret.i18n = i18n;
  ret.ready = ready;
  if (ready) return ret;
  if (!ready && !useSuspense) return ret;
  throw new Promise(resolve => {
    if (props.lng) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => resolve());
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => resolve());
    }
  });
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/utils.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDisplayName: () => (/* binding */ getDisplayName),
/* harmony export */   hasLoadedNamespace: () => (/* binding */ hasLoadedNamespace),
/* harmony export */   isObject: () => (/* binding */ isObject),
/* harmony export */   isString: () => (/* binding */ isString),
/* harmony export */   loadLanguages: () => (/* binding */ loadLanguages),
/* harmony export */   loadNamespaces: () => (/* binding */ loadNamespaces),
/* harmony export */   warn: () => (/* binding */ warn),
/* harmony export */   warnOnce: () => (/* binding */ warnOnce)
/* harmony export */ });
function warn() {
  if (console && console.warn) {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (isString(args[0])) args[0] = `react-i18next:: ${args[0]}`;
    console.warn(...args);
  }
}
const alreadyWarned = {};
function warnOnce() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }
  if (isString(args[0]) && alreadyWarned[args[0]]) return;
  if (isString(args[0])) alreadyWarned[args[0]] = new Date();
  warn(...args);
}
const loadedClb = (i18n, cb) => () => {
  if (i18n.isInitialized) {
    cb();
  } else {
    const initialized = () => {
      setTimeout(() => {
        i18n.off('initialized', initialized);
      }, 0);
      cb();
    };
    i18n.on('initialized', initialized);
  }
};
const loadNamespaces = (i18n, ns, cb) => {
  i18n.loadNamespaces(ns, loadedClb(i18n, cb));
};
const loadLanguages = (i18n, lng, ns, cb) => {
  if (isString(ns)) ns = [ns];
  ns.forEach(n => {
    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);
  });
  i18n.loadLanguages(lng, loadedClb(i18n, cb));
};
const oldI18nextHasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const lng = i18n.languages[0];
  const fallbackLng = i18n.options ? i18n.options.fallbackLng : false;
  const lastLng = i18n.languages[i18n.languages.length - 1];
  if (lng.toLowerCase() === 'cimode') return true;
  const loadNotPending = (l, n) => {
    const loadState = i18n.services.backendConnector.state[`${l}|${n}`];
    return loadState === -1 || loadState === 2;
  };
  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;
  if (i18n.hasResourceBundle(lng, ns)) return true;
  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;
  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
  return false;
};
const hasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  if (!i18n.languages || !i18n.languages.length) {
    warnOnce('i18n.languages were undefined or empty', i18n.languages);
    return true;
  }
  const isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;
  if (!isNewerI18next) {
    return oldI18nextHasLoadedNamespace(ns, i18n, options);
  }
  return i18n.hasLoadedNamespace(ns, {
    lng: options.lng,
    precheck: (i18nInstance, loadNotPending) => {
      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;
    }
  });
};
const getDisplayName = Component => Component.displayName || Component.name || (isString(Component) && Component.length > 0 ? Component : 'Unknown');
const isString = obj => typeof obj === 'string';
const isObject = obj => typeof obj === 'object' && obj !== null;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withSSR.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withSSR.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withSSR: () => (/* binding */ withSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");




const withSSR = () => function Extend(WrappedComponent) {
  function I18nextWithSSR(_ref) {
    let {
      initialI18nStore,
      initialLanguage,
      ...rest
    } = _ref;
    (0,_useSSR_js__WEBPACK_IMPORTED_MODULE_1__.useSSR)(initialI18nStore, initialLanguage);
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, {
      ...rest
    });
  }
  I18nextWithSSR.getInitialProps = (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.composeInitialProps)(WrappedComponent);
  I18nextWithSSR.displayName = `withI18nextSSR(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.getDisplayName)(WrappedComponent)})`;
  I18nextWithSSR.WrappedComponent = WrappedComponent;
  return I18nextWithSSR;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withTranslation.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withTranslation.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withTranslation: () => (/* binding */ withTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const withTranslation = function (ns) {
  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return function Extend(WrappedComponent) {
    function I18nextWithTranslation(_ref) {
      let {
        forwardedRef,
        ...rest
      } = _ref;
      const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_1__.useTranslation)(ns, {
        ...rest,
        keyPrefix: options.keyPrefix
      });
      const passDownProps = {
        ...rest,
        t,
        i18n,
        tReady: ready
      };
      if (options.withRef && forwardedRef) {
        passDownProps.ref = forwardedRef;
      } else if (!options.withRef && forwardedRef) {
        passDownProps.forwardedRef = forwardedRef;
      }
      return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, passDownProps);
    }
    I18nextWithTranslation.displayName = `withI18nextTranslation(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getDisplayName)(WrappedComponent)})`;
    I18nextWithTranslation.WrappedComponent = WrappedComponent;
    const forwardRef = (props, ref) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(I18nextWithTranslation, Object.assign({}, props, {
      forwardedRef: ref
    }));
    return options.withRef ? (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(forwardRef) : I18nextWithTranslation;
  };
};

/***/ }),

/***/ "../../node_modules/react/cjs/react.development.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react/cjs/react.development.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
/* module decorator */ module = __webpack_require__.nmd(module);
/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */


 true &&
  (function () {
    function defineDeprecationWarning(methodName, info) {
      Object.defineProperty(Component.prototype, methodName, {
        get: function () {
          console.warn(
            "%s(...) is deprecated in plain JavaScript React classes. %s",
            info[0],
            info[1]
          );
        }
      });
    }
    function getIteratorFn(maybeIterable) {
      if (null === maybeIterable || "object" !== typeof maybeIterable)
        return null;
      maybeIterable =
        (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||
        maybeIterable["@@iterator"];
      return "function" === typeof maybeIterable ? maybeIterable : null;
    }
    function warnNoop(publicInstance, callerName) {
      publicInstance =
        ((publicInstance = publicInstance.constructor) &&
          (publicInstance.displayName || publicInstance.name)) ||
        "ReactClass";
      var warningKey = publicInstance + "." + callerName;
      didWarnStateUpdateForUnmountedComponent[warningKey] ||
        (console.error(
          "Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",
          callerName,
          publicInstance
        ),
        (didWarnStateUpdateForUnmountedComponent[warningKey] = !0));
    }
    function Component(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function ComponentDummy() {}
    function PureComponent(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function noop() {}
    function testStringCoercion(value) {
      return "" + value;
    }
    function checkKeyStringCoercion(value) {
      try {
        testStringCoercion(value);
        var JSCompiler_inline_result = !1;
      } catch (e) {
        JSCompiler_inline_result = !0;
      }
      if (JSCompiler_inline_result) {
        JSCompiler_inline_result = console;
        var JSCompiler_temp_const = JSCompiler_inline_result.error;
        var JSCompiler_inline_result$jscomp$0 =
          ("function" === typeof Symbol &&
            Symbol.toStringTag &&
            value[Symbol.toStringTag]) ||
          value.constructor.name ||
          "Object";
        JSCompiler_temp_const.call(
          JSCompiler_inline_result,
          "The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",
          JSCompiler_inline_result$jscomp$0
        );
        return testStringCoercion(value);
      }
    }
    function getComponentNameFromType(type) {
      if (null == type) return null;
      if ("function" === typeof type)
        return type.$$typeof === REACT_CLIENT_REFERENCE
          ? null
          : type.displayName || type.name || null;
      if ("string" === typeof type) return type;
      switch (type) {
        case REACT_FRAGMENT_TYPE:
          return "Fragment";
        case REACT_PROFILER_TYPE:
          return "Profiler";
        case REACT_STRICT_MODE_TYPE:
          return "StrictMode";
        case REACT_SUSPENSE_TYPE:
          return "Suspense";
        case REACT_SUSPENSE_LIST_TYPE:
          return "SuspenseList";
        case REACT_ACTIVITY_TYPE:
          return "Activity";
      }
      if ("object" === typeof type)
        switch (
          ("number" === typeof type.tag &&
            console.error(
              "Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."
            ),
          type.$$typeof)
        ) {
          case REACT_PORTAL_TYPE:
            return "Portal";
          case REACT_CONTEXT_TYPE:
            return type.displayName || "Context";
          case REACT_CONSUMER_TYPE:
            return (type._context.displayName || "Context") + ".Consumer";
          case REACT_FORWARD_REF_TYPE:
            var innerType = type.render;
            type = type.displayName;
            type ||
              ((type = innerType.displayName || innerType.name || ""),
              (type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef"));
            return type;
          case REACT_MEMO_TYPE:
            return (
              (innerType = type.displayName || null),
              null !== innerType
                ? innerType
                : getComponentNameFromType(type.type) || "Memo"
            );
          case REACT_LAZY_TYPE:
            innerType = type._payload;
            type = type._init;
            try {
              return getComponentNameFromType(type(innerType));
            } catch (x) {}
        }
      return null;
    }
    function getTaskName(type) {
      if (type === REACT_FRAGMENT_TYPE) return "<>";
      if (
        "object" === typeof type &&
        null !== type &&
        type.$$typeof === REACT_LAZY_TYPE
      )
        return "<...>";
      try {
        var name = getComponentNameFromType(type);
        return name ? "<" + name + ">" : "<...>";
      } catch (x) {
        return "<...>";
      }
    }
    function getOwner() {
      var dispatcher = ReactSharedInternals.A;
      return null === dispatcher ? null : dispatcher.getOwner();
    }
    function UnknownOwner() {
      return Error("react-stack-top-frame");
    }
    function hasValidKey(config) {
      if (hasOwnProperty.call(config, "key")) {
        var getter = Object.getOwnPropertyDescriptor(config, "key").get;
        if (getter && getter.isReactWarning) return !1;
      }
      return void 0 !== config.key;
    }
    function defineKeyPropWarningGetter(props, displayName) {
      function warnAboutAccessingKey() {
        specialPropKeyWarningShown ||
          ((specialPropKeyWarningShown = !0),
          console.error(
            "%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",
            displayName
          ));
      }
      warnAboutAccessingKey.isReactWarning = !0;
      Object.defineProperty(props, "key", {
        get: warnAboutAccessingKey,
        configurable: !0
      });
    }
    function elementRefGetterWithDeprecationWarning() {
      var componentName = getComponentNameFromType(this.type);
      didWarnAboutElementRef[componentName] ||
        ((didWarnAboutElementRef[componentName] = !0),
        console.error(
          "Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release."
        ));
      componentName = this.props.ref;
      return void 0 !== componentName ? componentName : null;
    }
    function ReactElement(type, key, props, owner, debugStack, debugTask) {
      var refProp = props.ref;
      type = {
        $$typeof: REACT_ELEMENT_TYPE,
        type: type,
        key: key,
        props: props,
        _owner: owner
      };
      null !== (void 0 !== refProp ? refProp : null)
        ? Object.defineProperty(type, "ref", {
            enumerable: !1,
            get: elementRefGetterWithDeprecationWarning
          })
        : Object.defineProperty(type, "ref", { enumerable: !1, value: null });
      type._store = {};
      Object.defineProperty(type._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: 0
      });
      Object.defineProperty(type, "_debugInfo", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: null
      });
      Object.defineProperty(type, "_debugStack", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugStack
      });
      Object.defineProperty(type, "_debugTask", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugTask
      });
      Object.freeze && (Object.freeze(type.props), Object.freeze(type));
      return type;
    }
    function cloneAndReplaceKey(oldElement, newKey) {
      newKey = ReactElement(
        oldElement.type,
        newKey,
        oldElement.props,
        oldElement._owner,
        oldElement._debugStack,
        oldElement._debugTask
      );
      oldElement._store &&
        (newKey._store.validated = oldElement._store.validated);
      return newKey;
    }
    function validateChildKeys(node) {
      isValidElement(node)
        ? node._store && (node._store.validated = 1)
        : "object" === typeof node &&
          null !== node &&
          node.$$typeof === REACT_LAZY_TYPE &&
          ("fulfilled" === node._payload.status
            ? isValidElement(node._payload.value) &&
              node._payload.value._store &&
              (node._payload.value._store.validated = 1)
            : node._store && (node._store.validated = 1));
    }
    function isValidElement(object) {
      return (
        "object" === typeof object &&
        null !== object &&
        object.$$typeof === REACT_ELEMENT_TYPE
      );
    }
    function escape(key) {
      var escaperLookup = { "=": "=0", ":": "=2" };
      return (
        "$" +
        key.replace(/[=:]/g, function (match) {
          return escaperLookup[match];
        })
      );
    }
    function getElementKey(element, index) {
      return "object" === typeof element &&
        null !== element &&
        null != element.key
        ? (checkKeyStringCoercion(element.key), escape("" + element.key))
        : index.toString(36);
    }
    function resolveThenable(thenable) {
      switch (thenable.status) {
        case "fulfilled":
          return thenable.value;
        case "rejected":
          throw thenable.reason;
        default:
          switch (
            ("string" === typeof thenable.status
              ? thenable.then(noop, noop)
              : ((thenable.status = "pending"),
                thenable.then(
                  function (fulfilledValue) {
                    "pending" === thenable.status &&
                      ((thenable.status = "fulfilled"),
                      (thenable.value = fulfilledValue));
                  },
                  function (error) {
                    "pending" === thenable.status &&
                      ((thenable.status = "rejected"),
                      (thenable.reason = error));
                  }
                )),
            thenable.status)
          ) {
            case "fulfilled":
              return thenable.value;
            case "rejected":
              throw thenable.reason;
          }
      }
      throw thenable;
    }
    function mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {
      var type = typeof children;
      if ("undefined" === type || "boolean" === type) children = null;
      var invokeCallback = !1;
      if (null === children) invokeCallback = !0;
      else
        switch (type) {
          case "bigint":
          case "string":
          case "number":
            invokeCallback = !0;
            break;
          case "object":
            switch (children.$$typeof) {
              case REACT_ELEMENT_TYPE:
              case REACT_PORTAL_TYPE:
                invokeCallback = !0;
                break;
              case REACT_LAZY_TYPE:
                return (
                  (invokeCallback = children._init),
                  mapIntoArray(
                    invokeCallback(children._payload),
                    array,
                    escapedPrefix,
                    nameSoFar,
                    callback
                  )
                );
            }
        }
      if (invokeCallback) {
        invokeCallback = children;
        callback = callback(invokeCallback);
        var childKey =
          "" === nameSoFar ? "." + getElementKey(invokeCallback, 0) : nameSoFar;
        isArrayImpl(callback)
          ? ((escapedPrefix = ""),
            null != childKey &&
              (escapedPrefix =
                childKey.replace(userProvidedKeyEscapeRegex, "$&/") + "/"),
            mapIntoArray(callback, array, escapedPrefix, "", function (c) {
              return c;
            }))
          : null != callback &&
            (isValidElement(callback) &&
              (null != callback.key &&
                ((invokeCallback && invokeCallback.key === callback.key) ||
                  checkKeyStringCoercion(callback.key)),
              (escapedPrefix = cloneAndReplaceKey(
                callback,
                escapedPrefix +
                  (null == callback.key ||
                  (invokeCallback && invokeCallback.key === callback.key)
                    ? ""
                    : ("" + callback.key).replace(
                        userProvidedKeyEscapeRegex,
                        "$&/"
                      ) + "/") +
                  childKey
              )),
              "" !== nameSoFar &&
                null != invokeCallback &&
                isValidElement(invokeCallback) &&
                null == invokeCallback.key &&
                invokeCallback._store &&
                !invokeCallback._store.validated &&
                (escapedPrefix._store.validated = 2),
              (callback = escapedPrefix)),
            array.push(callback));
        return 1;
      }
      invokeCallback = 0;
      childKey = "" === nameSoFar ? "." : nameSoFar + ":";
      if (isArrayImpl(children))
        for (var i = 0; i < children.length; i++)
          (nameSoFar = children[i]),
            (type = childKey + getElementKey(nameSoFar, i)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if (((i = getIteratorFn(children)), "function" === typeof i))
        for (
          i === children.entries &&
            (didWarnAboutMaps ||
              console.warn(
                "Using Maps as children is not supported. Use an array of keyed ReactElements instead."
              ),
            (didWarnAboutMaps = !0)),
            children = i.call(children),
            i = 0;
          !(nameSoFar = children.next()).done;

        )
          (nameSoFar = nameSoFar.value),
            (type = childKey + getElementKey(nameSoFar, i++)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if ("object" === type) {
        if ("function" === typeof children.then)
          return mapIntoArray(
            resolveThenable(children),
            array,
            escapedPrefix,
            nameSoFar,
            callback
          );
        array = String(children);
        throw Error(
          "Objects are not valid as a React child (found: " +
            ("[object Object]" === array
              ? "object with keys {" + Object.keys(children).join(", ") + "}"
              : array) +
            "). If you meant to render a collection of children, use an array instead."
        );
      }
      return invokeCallback;
    }
    function mapChildren(children, func, context) {
      if (null == children) return children;
      var result = [],
        count = 0;
      mapIntoArray(children, result, "", "", function (child) {
        return func.call(context, child, count++);
      });
      return result;
    }
    function lazyInitializer(payload) {
      if (-1 === payload._status) {
        var ioInfo = payload._ioInfo;
        null != ioInfo && (ioInfo.start = ioInfo.end = performance.now());
        ioInfo = payload._result;
        var thenable = ioInfo();
        thenable.then(
          function (moduleObject) {
            if (0 === payload._status || -1 === payload._status) {
              payload._status = 1;
              payload._result = moduleObject;
              var _ioInfo = payload._ioInfo;
              null != _ioInfo && (_ioInfo.end = performance.now());
              void 0 === thenable.status &&
                ((thenable.status = "fulfilled"),
                (thenable.value = moduleObject));
            }
          },
          function (error) {
            if (0 === payload._status || -1 === payload._status) {
              payload._status = 2;
              payload._result = error;
              var _ioInfo2 = payload._ioInfo;
              null != _ioInfo2 && (_ioInfo2.end = performance.now());
              void 0 === thenable.status &&
                ((thenable.status = "rejected"), (thenable.reason = error));
            }
          }
        );
        ioInfo = payload._ioInfo;
        if (null != ioInfo) {
          ioInfo.value = thenable;
          var displayName = thenable.displayName;
          "string" === typeof displayName && (ioInfo.name = displayName);
        }
        -1 === payload._status &&
          ((payload._status = 0), (payload._result = thenable));
      }
      if (1 === payload._status)
        return (
          (ioInfo = payload._result),
          void 0 === ioInfo &&
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",
              ioInfo
            ),
          "default" in ioInfo ||
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",
              ioInfo
            ),
          ioInfo.default
        );
      throw payload._result;
    }
    function resolveDispatcher() {
      var dispatcher = ReactSharedInternals.H;
      null === dispatcher &&
        console.error(
          "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem."
        );
      return dispatcher;
    }
    function releaseAsyncTransition() {
      ReactSharedInternals.asyncTransitions--;
    }
    function enqueueTask(task) {
      if (null === enqueueTaskImpl)
        try {
          var requireString = ("require" + Math.random()).slice(0, 7);
          enqueueTaskImpl = (module && module[requireString]).call(
            module,
            "timers"
          ).setImmediate;
        } catch (_err) {
          enqueueTaskImpl = function (callback) {
            !1 === didWarnAboutMessageChannel &&
              ((didWarnAboutMessageChannel = !0),
              "undefined" === typeof MessageChannel &&
                console.error(
                  "This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."
                ));
            var channel = new MessageChannel();
            channel.port1.onmessage = callback;
            channel.port2.postMessage(void 0);
          };
        }
      return enqueueTaskImpl(task);
    }
    function aggregateErrors(errors) {
      return 1 < errors.length && "function" === typeof AggregateError
        ? new AggregateError(errors)
        : errors[0];
    }
    function popActScope(prevActQueue, prevActScopeDepth) {
      prevActScopeDepth !== actScopeDepth - 1 &&
        console.error(
          "You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "
        );
      actScopeDepth = prevActScopeDepth;
    }
    function recursivelyFlushAsyncActWork(returnValue, resolve, reject) {
      var queue = ReactSharedInternals.actQueue;
      if (null !== queue)
        if (0 !== queue.length)
          try {
            flushActQueue(queue);
            enqueueTask(function () {
              return recursivelyFlushAsyncActWork(returnValue, resolve, reject);
            });
            return;
          } catch (error) {
            ReactSharedInternals.thrownErrors.push(error);
          }
        else ReactSharedInternals.actQueue = null;
      0 < ReactSharedInternals.thrownErrors.length
        ? ((queue = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          reject(queue))
        : resolve(returnValue);
    }
    function flushActQueue(queue) {
      if (!isFlushing) {
        isFlushing = !0;
        var i = 0;
        try {
          for (; i < queue.length; i++) {
            var callback = queue[i];
            do {
              ReactSharedInternals.didUsePromise = !1;
              var continuation = callback(!1);
              if (null !== continuation) {
                if (ReactSharedInternals.didUsePromise) {
                  queue[i] = callback;
                  queue.splice(0, i);
                  return;
                }
                callback = continuation;
              } else break;
            } while (1);
          }
          queue.length = 0;
        } catch (error) {
          queue.splice(0, i + 1), ReactSharedInternals.thrownErrors.push(error);
        } finally {
          isFlushing = !1;
        }
      }
    }
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"),
      REACT_PORTAL_TYPE = Symbol.for("react.portal"),
      REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"),
      REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"),
      REACT_PROFILER_TYPE = Symbol.for("react.profiler"),
      REACT_CONSUMER_TYPE = Symbol.for("react.consumer"),
      REACT_CONTEXT_TYPE = Symbol.for("react.context"),
      REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"),
      REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"),
      REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"),
      REACT_MEMO_TYPE = Symbol.for("react.memo"),
      REACT_LAZY_TYPE = Symbol.for("react.lazy"),
      REACT_ACTIVITY_TYPE = Symbol.for("react.activity"),
      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,
      didWarnStateUpdateForUnmountedComponent = {},
      ReactNoopUpdateQueue = {
        isMounted: function () {
          return !1;
        },
        enqueueForceUpdate: function (publicInstance) {
          warnNoop(publicInstance, "forceUpdate");
        },
        enqueueReplaceState: function (publicInstance) {
          warnNoop(publicInstance, "replaceState");
        },
        enqueueSetState: function (publicInstance) {
          warnNoop(publicInstance, "setState");
        }
      },
      assign = Object.assign,
      emptyObject = {};
    Object.freeze(emptyObject);
    Component.prototype.isReactComponent = {};
    Component.prototype.setState = function (partialState, callback) {
      if (
        "object" !== typeof partialState &&
        "function" !== typeof partialState &&
        null != partialState
      )
        throw Error(
          "takes an object of state variables to update or a function which returns an object of state variables."
        );
      this.updater.enqueueSetState(this, partialState, callback, "setState");
    };
    Component.prototype.forceUpdate = function (callback) {
      this.updater.enqueueForceUpdate(this, callback, "forceUpdate");
    };
    var deprecatedAPIs = {
      isMounted: [
        "isMounted",
        "Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."
      ],
      replaceState: [
        "replaceState",
        "Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."
      ]
    };
    for (fnName in deprecatedAPIs)
      deprecatedAPIs.hasOwnProperty(fnName) &&
        defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);
    ComponentDummy.prototype = Component.prototype;
    deprecatedAPIs = PureComponent.prototype = new ComponentDummy();
    deprecatedAPIs.constructor = PureComponent;
    assign(deprecatedAPIs, Component.prototype);
    deprecatedAPIs.isPureReactComponent = !0;
    var isArrayImpl = Array.isArray,
      REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference"),
      ReactSharedInternals = {
        H: null,
        A: null,
        T: null,
        S: null,
        actQueue: null,
        asyncTransitions: 0,
        isBatchingLegacy: !1,
        didScheduleLegacyUpdate: !1,
        didUsePromise: !1,
        thrownErrors: [],
        getCurrentStack: null,
        recentlyCreatedOwnerStacks: 0
      },
      hasOwnProperty = Object.prototype.hasOwnProperty,
      createTask = console.createTask
        ? console.createTask
        : function () {
            return null;
          };
    deprecatedAPIs = {
      react_stack_bottom_frame: function (callStackForError) {
        return callStackForError();
      }
    };
    var specialPropKeyWarningShown, didWarnAboutOldJSXRuntime;
    var didWarnAboutElementRef = {};
    var unknownOwnerDebugStack = deprecatedAPIs.react_stack_bottom_frame.bind(
      deprecatedAPIs,
      UnknownOwner
    )();
    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));
    var didWarnAboutMaps = !1,
      userProvidedKeyEscapeRegex = /\/+/g,
      reportGlobalError =
        "function" === typeof reportError
          ? reportError
          : function (error) {
              if (
                "object" === typeof window &&
                "function" === typeof window.ErrorEvent
              ) {
                var event = new window.ErrorEvent("error", {
                  bubbles: !0,
                  cancelable: !0,
                  message:
                    "object" === typeof error &&
                    null !== error &&
                    "string" === typeof error.message
                      ? String(error.message)
                      : String(error),
                  error: error
                });
                if (!window.dispatchEvent(event)) return;
              } else if (
                "object" === typeof process &&
                "function" === typeof process.emit
              ) {
                process.emit("uncaughtException", error);
                return;
              }
              console.error(error);
            },
      didWarnAboutMessageChannel = !1,
      enqueueTaskImpl = null,
      actScopeDepth = 0,
      didWarnNoAwaitAct = !1,
      isFlushing = !1,
      queueSeveralMicrotasks =
        "function" === typeof queueMicrotask
          ? function (callback) {
              queueMicrotask(function () {
                return queueMicrotask(callback);
              });
            }
          : enqueueTask;
    deprecatedAPIs = Object.freeze({
      __proto__: null,
      c: function (size) {
        return resolveDispatcher().useMemoCache(size);
      }
    });
    var fnName = {
      map: mapChildren,
      forEach: function (children, forEachFunc, forEachContext) {
        mapChildren(
          children,
          function () {
            forEachFunc.apply(this, arguments);
          },
          forEachContext
        );
      },
      count: function (children) {
        var n = 0;
        mapChildren(children, function () {
          n++;
        });
        return n;
      },
      toArray: function (children) {
        return (
          mapChildren(children, function (child) {
            return child;
          }) || []
        );
      },
      only: function (children) {
        if (!isValidElement(children))
          throw Error(
            "React.Children.only expected to receive a single React element child."
          );
        return children;
      }
    };
    exports.Activity = REACT_ACTIVITY_TYPE;
    exports.Children = fnName;
    exports.Component = Component;
    exports.Fragment = REACT_FRAGMENT_TYPE;
    exports.Profiler = REACT_PROFILER_TYPE;
    exports.PureComponent = PureComponent;
    exports.StrictMode = REACT_STRICT_MODE_TYPE;
    exports.Suspense = REACT_SUSPENSE_TYPE;
    exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =
      ReactSharedInternals;
    exports.__COMPILER_RUNTIME = deprecatedAPIs;
    exports.act = function (callback) {
      var prevActQueue = ReactSharedInternals.actQueue,
        prevActScopeDepth = actScopeDepth;
      actScopeDepth++;
      var queue = (ReactSharedInternals.actQueue =
          null !== prevActQueue ? prevActQueue : []),
        didAwaitActCall = !1;
      try {
        var result = callback();
      } catch (error) {
        ReactSharedInternals.thrownErrors.push(error);
      }
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          (popActScope(prevActQueue, prevActScopeDepth),
          (callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      if (
        null !== result &&
        "object" === typeof result &&
        "function" === typeof result.then
      ) {
        var thenable = result;
        queueSeveralMicrotasks(function () {
          didAwaitActCall ||
            didWarnNoAwaitAct ||
            ((didWarnNoAwaitAct = !0),
            console.error(
              "You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"
            ));
        });
        return {
          then: function (resolve, reject) {
            didAwaitActCall = !0;
            thenable.then(
              function (returnValue) {
                popActScope(prevActQueue, prevActScopeDepth);
                if (0 === prevActScopeDepth) {
                  try {
                    flushActQueue(queue),
                      enqueueTask(function () {
                        return recursivelyFlushAsyncActWork(
                          returnValue,
                          resolve,
                          reject
                        );
                      });
                  } catch (error$0) {
                    ReactSharedInternals.thrownErrors.push(error$0);
                  }
                  if (0 < ReactSharedInternals.thrownErrors.length) {
                    var _thrownError = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    );
                    ReactSharedInternals.thrownErrors.length = 0;
                    reject(_thrownError);
                  }
                } else resolve(returnValue);
              },
              function (error) {
                popActScope(prevActQueue, prevActScopeDepth);
                0 < ReactSharedInternals.thrownErrors.length
                  ? ((error = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    )),
                    (ReactSharedInternals.thrownErrors.length = 0),
                    reject(error))
                  : reject(error);
              }
            );
          }
        };
      }
      var returnValue$jscomp$0 = result;
      popActScope(prevActQueue, prevActScopeDepth);
      0 === prevActScopeDepth &&
        (flushActQueue(queue),
        0 !== queue.length &&
          queueSeveralMicrotasks(function () {
            didAwaitActCall ||
              didWarnNoAwaitAct ||
              ((didWarnNoAwaitAct = !0),
              console.error(
                "A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"
              ));
          }),
        (ReactSharedInternals.actQueue = null));
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          ((callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      return {
        then: function (resolve, reject) {
          didAwaitActCall = !0;
          0 === prevActScopeDepth
            ? ((ReactSharedInternals.actQueue = queue),
              enqueueTask(function () {
                return recursivelyFlushAsyncActWork(
                  returnValue$jscomp$0,
                  resolve,
                  reject
                );
              }))
            : resolve(returnValue$jscomp$0);
        }
      };
    };
    exports.cache = function (fn) {
      return function () {
        return fn.apply(null, arguments);
      };
    };
    exports.cacheSignal = function () {
      return null;
    };
    exports.captureOwnerStack = function () {
      var getCurrentStack = ReactSharedInternals.getCurrentStack;
      return null === getCurrentStack ? null : getCurrentStack();
    };
    exports.cloneElement = function (element, config, children) {
      if (null === element || void 0 === element)
        throw Error(
          "The argument must be a React element, but you passed " +
            element +
            "."
        );
      var props = assign({}, element.props),
        key = element.key,
        owner = element._owner;
      if (null != config) {
        var JSCompiler_inline_result;
        a: {
          if (
            hasOwnProperty.call(config, "ref") &&
            (JSCompiler_inline_result = Object.getOwnPropertyDescriptor(
              config,
              "ref"
            ).get) &&
            JSCompiler_inline_result.isReactWarning
          ) {
            JSCompiler_inline_result = !1;
            break a;
          }
          JSCompiler_inline_result = void 0 !== config.ref;
        }
        JSCompiler_inline_result && (owner = getOwner());
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (key = "" + config.key));
        for (propName in config)
          !hasOwnProperty.call(config, propName) ||
            "key" === propName ||
            "__self" === propName ||
            "__source" === propName ||
            ("ref" === propName && void 0 === config.ref) ||
            (props[propName] = config[propName]);
      }
      var propName = arguments.length - 2;
      if (1 === propName) props.children = children;
      else if (1 < propName) {
        JSCompiler_inline_result = Array(propName);
        for (var i = 0; i < propName; i++)
          JSCompiler_inline_result[i] = arguments[i + 2];
        props.children = JSCompiler_inline_result;
      }
      props = ReactElement(
        element.type,
        key,
        props,
        owner,
        element._debugStack,
        element._debugTask
      );
      for (key = 2; key < arguments.length; key++)
        validateChildKeys(arguments[key]);
      return props;
    };
    exports.createContext = function (defaultValue) {
      defaultValue = {
        $$typeof: REACT_CONTEXT_TYPE,
        _currentValue: defaultValue,
        _currentValue2: defaultValue,
        _threadCount: 0,
        Provider: null,
        Consumer: null
      };
      defaultValue.Provider = defaultValue;
      defaultValue.Consumer = {
        $$typeof: REACT_CONSUMER_TYPE,
        _context: defaultValue
      };
      defaultValue._currentRenderer = null;
      defaultValue._currentRenderer2 = null;
      return defaultValue;
    };
    exports.createElement = function (type, config, children) {
      for (var i = 2; i < arguments.length; i++)
        validateChildKeys(arguments[i]);
      i = {};
      var key = null;
      if (null != config)
        for (propName in (didWarnAboutOldJSXRuntime ||
          !("__self" in config) ||
          "key" in config ||
          ((didWarnAboutOldJSXRuntime = !0),
          console.warn(
            "Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform"
          )),
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (key = "" + config.key)),
        config))
          hasOwnProperty.call(config, propName) &&
            "key" !== propName &&
            "__self" !== propName &&
            "__source" !== propName &&
            (i[propName] = config[propName]);
      var childrenLength = arguments.length - 2;
      if (1 === childrenLength) i.children = children;
      else if (1 < childrenLength) {
        for (
          var childArray = Array(childrenLength), _i = 0;
          _i < childrenLength;
          _i++
        )
          childArray[_i] = arguments[_i + 2];
        Object.freeze && Object.freeze(childArray);
        i.children = childArray;
      }
      if (type && type.defaultProps)
        for (propName in ((childrenLength = type.defaultProps), childrenLength))
          void 0 === i[propName] && (i[propName] = childrenLength[propName]);
      key &&
        defineKeyPropWarningGetter(
          i,
          "function" === typeof type
            ? type.displayName || type.name || "Unknown"
            : type
        );
      var propName = 1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;
      return ReactElement(
        type,
        key,
        i,
        getOwner(),
        propName ? Error("react-stack-top-frame") : unknownOwnerDebugStack,
        propName ? createTask(getTaskName(type)) : unknownOwnerDebugTask
      );
    };
    exports.createRef = function () {
      var refObject = { current: null };
      Object.seal(refObject);
      return refObject;
    };
    exports.forwardRef = function (render) {
      null != render && render.$$typeof === REACT_MEMO_TYPE
        ? console.error(
            "forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."
          )
        : "function" !== typeof render
          ? console.error(
              "forwardRef requires a render function but was given %s.",
              null === render ? "null" : typeof render
            )
          : 0 !== render.length &&
            2 !== render.length &&
            console.error(
              "forwardRef render functions accept exactly two parameters: props and ref. %s",
              1 === render.length
                ? "Did you forget to use the ref parameter?"
                : "Any additional parameter will be undefined."
            );
      null != render &&
        null != render.defaultProps &&
        console.error(
          "forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?"
        );
      var elementType = { $$typeof: REACT_FORWARD_REF_TYPE, render: render },
        ownName;
      Object.defineProperty(elementType, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          render.name ||
            render.displayName ||
            (Object.defineProperty(render, "name", { value: name }),
            (render.displayName = name));
        }
      });
      return elementType;
    };
    exports.isValidElement = isValidElement;
    exports.lazy = function (ctor) {
      ctor = { _status: -1, _result: ctor };
      var lazyType = {
          $$typeof: REACT_LAZY_TYPE,
          _payload: ctor,
          _init: lazyInitializer
        },
        ioInfo = {
          name: "lazy",
          start: -1,
          end: -1,
          value: null,
          owner: null,
          debugStack: Error("react-stack-top-frame"),
          debugTask: console.createTask ? console.createTask("lazy()") : null
        };
      ctor._ioInfo = ioInfo;
      lazyType._debugInfo = [{ awaited: ioInfo }];
      return lazyType;
    };
    exports.memo = function (type, compare) {
      null == type &&
        console.error(
          "memo: The first argument must be a component. Instead received: %s",
          null === type ? "null" : typeof type
        );
      compare = {
        $$typeof: REACT_MEMO_TYPE,
        type: type,
        compare: void 0 === compare ? null : compare
      };
      var ownName;
      Object.defineProperty(compare, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          type.name ||
            type.displayName ||
            (Object.defineProperty(type, "name", { value: name }),
            (type.displayName = name));
        }
      });
      return compare;
    };
    exports.startTransition = function (scope) {
      var prevTransition = ReactSharedInternals.T,
        currentTransition = {};
      currentTransition._updatedFibers = new Set();
      ReactSharedInternals.T = currentTransition;
      try {
        var returnValue = scope(),
          onStartTransitionFinish = ReactSharedInternals.S;
        null !== onStartTransitionFinish &&
          onStartTransitionFinish(currentTransition, returnValue);
        "object" === typeof returnValue &&
          null !== returnValue &&
          "function" === typeof returnValue.then &&
          (ReactSharedInternals.asyncTransitions++,
          returnValue.then(releaseAsyncTransition, releaseAsyncTransition),
          returnValue.then(noop, reportGlobalError));
      } catch (error) {
        reportGlobalError(error);
      } finally {
        null === prevTransition &&
          currentTransition._updatedFibers &&
          ((scope = currentTransition._updatedFibers.size),
          currentTransition._updatedFibers.clear(),
          10 < scope &&
            console.warn(
              "Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."
            )),
          null !== prevTransition &&
            null !== currentTransition.types &&
            (null !== prevTransition.types &&
              prevTransition.types !== currentTransition.types &&
              console.error(
                "We expected inner Transitions to have transferred the outer types set and that you cannot add to the outer Transition while inside the inner.This is a bug in React."
              ),
            (prevTransition.types = currentTransition.types)),
          (ReactSharedInternals.T = prevTransition);
      }
    };
    exports.unstable_useCacheRefresh = function () {
      return resolveDispatcher().useCacheRefresh();
    };
    exports.use = function (usable) {
      return resolveDispatcher().use(usable);
    };
    exports.useActionState = function (action, initialState, permalink) {
      return resolveDispatcher().useActionState(
        action,
        initialState,
        permalink
      );
    };
    exports.useCallback = function (callback, deps) {
      return resolveDispatcher().useCallback(callback, deps);
    };
    exports.useContext = function (Context) {
      var dispatcher = resolveDispatcher();
      Context.$$typeof === REACT_CONSUMER_TYPE &&
        console.error(
          "Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"
        );
      return dispatcher.useContext(Context);
    };
    exports.useDebugValue = function (value, formatterFn) {
      return resolveDispatcher().useDebugValue(value, formatterFn);
    };
    exports.useDeferredValue = function (value, initialValue) {
      return resolveDispatcher().useDeferredValue(value, initialValue);
    };
    exports.useEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useEffect(create, deps);
    };
    exports.useEffectEvent = function (callback) {
      return resolveDispatcher().useEffectEvent(callback);
    };
    exports.useId = function () {
      return resolveDispatcher().useId();
    };
    exports.useImperativeHandle = function (ref, create, deps) {
      return resolveDispatcher().useImperativeHandle(ref, create, deps);
    };
    exports.useInsertionEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useInsertionEffect(create, deps);
    };
    exports.useLayoutEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useLayoutEffect(create, deps);
    };
    exports.useMemo = function (create, deps) {
      return resolveDispatcher().useMemo(create, deps);
    };
    exports.useOptimistic = function (passthrough, reducer) {
      return resolveDispatcher().useOptimistic(passthrough, reducer);
    };
    exports.useReducer = function (reducer, initialArg, init) {
      return resolveDispatcher().useReducer(reducer, initialArg, init);
    };
    exports.useRef = function (initialValue) {
      return resolveDispatcher().useRef(initialValue);
    };
    exports.useState = function (initialState) {
      return resolveDispatcher().useState(initialState);
    };
    exports.useSyncExternalStore = function (
      subscribe,
      getSnapshot,
      getServerSnapshot
    ) {
      return resolveDispatcher().useSyncExternalStore(
        subscribe,
        getSnapshot,
        getServerSnapshot
      );
    };
    exports.useTransition = function () {
      return resolveDispatcher().useTransition();
    };
    exports.version = "19.2.0";
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  })();


/***/ }),

/***/ "../../node_modules/react/index.js":
/*!*****************************************!*\
  !*** ../../node_modules/react/index.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


if (false) // removed by dead control flow
{} else {
  module.exports = __webpack_require__(/*! ./cjs/react.development.js */ "../../node_modules/react/cjs/react.development.js");
}


/***/ }),

/***/ "../../node_modules/title-case/dist.es2015/index.js":
/*!**********************************************************!*\
  !*** ../../node_modules/title-case/dist.es2015/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   titleCase: () => (/* binding */ titleCase)
/* harmony export */ });
var SMALL_WORDS = /\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i;
var TOKENS = /[^\s:-]+|./g;
var WHITESPACE = /\s/;
var IS_MANUAL_CASE = /.(?=[A-Z]|\..)/;
var ALPHANUMERIC_PATTERN = /[A-Za-z0-9\u00C0-\u00FF]/;
function titleCase(input) {
    var result = "";
    var m;
    // tslint:disable-next-line
    while ((m = TOKENS.exec(input)) !== null) {
        var token = m[0], index = m.index;
        if (
        // Ignore already capitalized words.
        !IS_MANUAL_CASE.test(token) &&
            // Ignore small words except at beginning or end.
            (!SMALL_WORDS.test(token) ||
                index === 0 ||
                index + token.length === input.length) &&
            // Ignore URLs.
            (input.charAt(index + token.length) !== ":" ||
                WHITESPACE.test(input.charAt(index + token.length + 1)))) {
            // Find and uppercase first word character, skips over *modifiers*.
            result += token.replace(ALPHANUMERIC_PATTERN, function (m) { return m.toUpperCase(); });
            continue;
        }
        result += token;
    }
    return result;
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/void-elements/index.js":
/*!*************************************************!*\
  !*** ../../node_modules/void-elements/index.js ***!
  \*************************************************/
/***/ ((module) => {

/**
 * This file automatically generated from `pre-publish.js`.
 * Do not manually edit.
 */

module.exports = {
  "area": true,
  "base": true,
  "br": true,
  "col": true,
  "embed": true,
  "hr": true,
  "img": true,
  "input": true,
  "link": true,
  "meta": true,
  "param": true,
  "source": true,
  "track": true,
  "wbr": true
};


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!*********************************!*\
  !*** ./client/src/launchbar.ts ***!
  \*********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);

document.addEventListener("DOMContentLoaded", async () => {
    // create browser window with view
    const createBrowserWinBtn = document.querySelector("#launch-browser-window");
    if (createBrowserWinBtn) {
        createBrowserWinBtn.addEventListener("click", async () => createBrowserWindow());
    }
    // create browser window with no save requirement
    const createBrowserWinNoSaveBtn = document.querySelector("#launch-browser-window-no-save");
    if (createBrowserWinNoSaveBtn) {
        createBrowserWinNoSaveBtn.addEventListener("click", createBrowserWindowWithoutRequiringSave);
    }
    // create browser window maximized
    const createBrowserMaximized = document.querySelector("#launch-browser-window-maximized");
    if (createBrowserMaximized) {
        createBrowserMaximized.addEventListener("click", createBrowserWindowMaximized);
    }
    // create browser window with custom save page button
    const customToolbarBtn = document.querySelector("#launch-browser-window-with-custom-btn");
    if (customToolbarBtn) {
        customToolbarBtn.addEventListener("click", createCustomToolbarWindow);
    }
    // create browser window with single page and no tab
    const singlePageBrowserWinNoTabBtn = document.querySelector("#launch-nopagetab-browser-window");
    if (singlePageBrowserWinNoTabBtn) {
        singlePageBrowserWinNoTabBtn.addEventListener("click", createSinglePageNoTabWindow);
    }
    // create browser window with multiple pages
    const multiPageBrowserWinBtn = document.querySelector("#launch-multipage-browser-window");
    if (multiPageBrowserWinBtn) {
        multiPageBrowserWinBtn.addEventListener("click", createMultiPageWindow);
    }
    // create browser window with fixed views
    const fixedViews = document.querySelector("#launch-fixed-views");
    if (fixedViews) {
        fixedViews.addEventListener("click", createWindowWithFixedViews);
    }
    // get all browser pages
    const getBrowserPagesBtn = document.querySelector("#get-browser-pages");
    if (getBrowserPagesBtn) {
        getBrowserPagesBtn.addEventListener("click", async () => {
            await fin.me.showDeveloperTools();
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            const lastFocusedWindow = await platform.Browser.getLastFocusedWindow();
            if (lastFocusedWindow) {
                const pages = await platform.Browser.getAllAttachedPages();
                const lastFocusedWindowIdentity = await platform.Browser.getLastFocusedWindow();
                if (lastFocusedWindowIdentity) {
                    const { uuid, name } = lastFocusedWindowIdentity;
                    const wrappedBrowserWindow = platform.Browser.wrapSync({ uuid, name });
                    const lastBrowserWindowPages = await wrappedBrowserWindow.getPages();
                    const unsavedPages = lastBrowserWindowPages.filter((page) => page.hasUnsavedChanges);
                    console.dir({ message: "All PAGES", pages });
                    console.dir({ message: "UNSAVED PAGES", unsavedPages });
                    console.dir({ message: "LAST FOCUSED WINDOW", wrappedBrowserWindow });
                }
            }
        });
    }
    // Create browser window with fixed views
    const singleLockedPage = document.querySelector("#launch-single-locked-page");
    if (singleLockedPage) {
        singleLockedPage.addEventListener("click", createWindowWithLockedPage);
    }
    // quit launcher / browser
    const quitBtn = document.querySelector("#quit");
    if (quitBtn) {
        quitBtn.addEventListener("click", async () => {
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            await platform.quit();
        });
    }
});
/**
 * Create a browser window.
 * @param hasUnsavedChanges Determines if the window has unsaved changed.
 * @returns The created window.
 */
async function createBrowserWindow(hasUnsavedChanges = true) {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout(), hasUnsavedChanges);
    const pages = [page];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a browser window which has changes so required saving.
 * @returns The created browser window.
 */
async function createBrowserWindowWithoutRequiringSave() {
    return createBrowserWindow(false);
}
/**
 * Create a browser window in its maximized state.
 * @returns The created browser window.
 */
async function createBrowserWindowMaximized() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const options = {
        workspacePlatform: { pages },
        state: "maximized"
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a browser window which has a single page and hidden tabs.
 * @returns The created browser window.
 */
async function createSinglePageNoTabWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const options = {
        workspacePlatform: { pages, disableMultiplePages: true },
        experimental: {
            showFavicons: false
        }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has a custom toolbar.
 * @returns The created browser window.
 */
async function createCustomToolbarWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page];
    const toolbarOptions = {
        buttons: [
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Save Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "custom-save-page",
                    customData: {
                        pageId: page.pageId,
                        layout: page.layout
                    }
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Rename Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "rename-current-page"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Announce",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/icons/announce.svg",
                action: {
                    id: "announce"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Print",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/icons/print.svg",
                action: {
                    id: "custom-print"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ShowHideTabs
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ColorLinking
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.PresetLayouts
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.LockUnlockPage
            }
        ]
    };
    const options = {
        workspacePlatform: { pages, toolbarOptions }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has multiple pages.
 * @returns The created browser window.
 */
async function createMultiPageWindow() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page1 = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page2 = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const pages = [page, page1, page2];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window with a locked page.
 * @returns The created browser window.
 */
async function createWindowWithLockedPage() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page1 = await createPageWithLayout("Locked Page", createDefaultPageLayout());
    const lockPage1 = { isLocked: true, ...page1 };
    const pages = [page, lockPage1];
    const toolbarOptions = {
        buttons: [
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Save Current Page",
                iconUrl: "https://www.openfin.co/favicon.ico",
                action: {
                    id: "custom-save-page",
                    customData: {
                        pageId: page.pageId,
                        layout: page.layout
                    }
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.Custom,
                tooltip: "Manual Lock Page",
                iconUrl: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/icons/lock.svg",
                action: {
                    id: "lock-page-toggle"
                }
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ShowHideTabs
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.ColorLinking
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.PresetLayouts
            },
            {
                type: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.BrowserButtonType.SavePage
            }
        ]
    };
    const options = {
        workspacePlatform: { pages, toolbarOptions }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a window which has fixed views.
 * @returns The created browser window.
 */
async function createWindowWithFixedViews() {
    const page = await createPageWithLayout("Untitled Page", createDefaultPageLayout());
    const page2 = await createPageWithLayout("Untitled Page (2)", createDefaultPageLayout());
    page.panels = [
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Top,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/html/top-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Left,
            width: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/html/left-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Right,
            width: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/html/right-panel.html"
            }
        },
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Bottom,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/html/bottom-panel.html"
            }
        }
    ];
    page2.panels = [
        {
            position: _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.PanelPosition.Top,
            height: "50px",
            viewOptions: {
                url: "https://built-on-openfin.github.io/workspace-starter/dev/john/update-to-latest-22/register-with-browser/html/top-panel.html"
            }
        }
    ];
    const pages = [page, page2];
    const options = {
        workspacePlatform: { pages }
    };
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    const createdBrowserWin = await platform.Browser.createWindow(options);
    return createdBrowserWin;
}
/**
 * Create a page with a specific layout.
 * @param title The title of the page.
 * @param layout The layout for the page.
 * @param hasUnsavedChanges Flag to determine if it has unsaved changed.
 * @returns The created page.
 */
async function createPageWithLayout(title, layout, hasUnsavedChanges = true) {
    return {
        pageId: randomUUID(),
        title,
        layout: {
            ...layout,
            layoutDetails: { layoutId: `layout-${randomUUID()}` }
        },
        isReadOnly: false,
        hasUnsavedChanges
    };
}
/**
 * Create the default page layout.
 * @returns The default page layout.
 */
function createDefaultPageLayout() {
    return {
        content: [
            {
                type: "stack",
                content: [
                    {
                        type: "component",
                        componentName: "view",
                        componentState: {
                            uuid: fin.me.uuid,
                            name: `${randomUUID()}-v1`,
                            url: "https://examples.com"
                        }
                    },
                    {
                        type: "component",
                        componentName: "view",
                        componentState: {
                            uuid: fin.me.uuid,
                            name: `${randomUUID()}-v2`,
                            url: "https://openfin.co"
                        }
                    }
                ]
            }
        ]
    };
}
/**
 * Polyfills randomUUID if running in a non-secure context.
 * @returns The random UUID.
 */
function randomUUID() {
    if ("randomUUID" in window.crypto) {
        // eslint-disable-next-line no-restricted-syntax
        return window.crypto.randomUUID();
    }
    // Polyfill the window.crypto.randomUUID if we are running in a non secure context that doesn't have it
    // we are still using window.crypto.getRandomValues which is always available
    // https://stackoverflow.com/a/2117523/2800218
    /**
     * Get random hex value.
     * @param c The number to base the random value on.
     * @returns The random value.
     */
    function getRandomHex(c) {
        // eslint-disable-next-line no-bitwise
        const rnd = window.crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (Number(c) / 4));
        return (
        // eslint-disable-next-line no-bitwise
        (Number(c) ^ rnd).toString(16));
    }
    return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, getRandomHex);
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCwyQ0FBMkMsSUFBSTtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNEVBQTRFLGVBQWU7QUFDM0YsYUFBYTtBQUNiLDRFQUE0RSw0QkFBNEI7QUFDeEcsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw2Q0FBNkM7QUFDdkc7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGdGQUFnRixFQUFFO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Es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O0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsYUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsZUFBZTtBQUNsSDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRLFdBQVc7QUFDOUIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlDQUF5QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLGNBQWM7QUFDZDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7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cUJBQ2pDO29CQUNEO3dCQUNDLElBQUksRUFBRSxXQUFXO3dCQUNqQixhQUFhLEVBQUUsTUFBTTt3QkFDckIsY0FBYyxFQUFFOzRCQUNmLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUk7NEJBQ2pCLElBQUksRUFBRSxHQUFHLFVBQVUsRUFBRSxLQUFLOzRCQUMxQixHQUFHLEVBQUUsb0JBQW9CO3lCQUNPO3FCQUNqQztpQkFDRDthQUNEO1NBQ0Q7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQUVEOzs7R0FHRztBQUNILFNBQVMsVUFBVTtJQUNsQixJQUFJLFlBQVksSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDbkMsZ0RBQWdEO1FBQ2hELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBQ0QsdUdBQXVHO0lBQ3ZHLDZFQUE2RTtJQUM3RSw4Q0FBOEM7SUFDOUM7Ozs7T0FJRztJQUNILFNBQVMsWUFBWSxDQUFDLENBQVM7UUFDOUIsc0NBQXNDO1FBQ3RDLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxRixPQUFPO1FBQ04sc0NBQXNDO1FBQ3RDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FDOUIsQ0FBQztJQUNILENBQUM7SUFDRCxPQUFPLHNDQUFzQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDL0UsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9kZXhpZS9kaXN0L2RleGllLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL2RleGllL2ltcG9ydC13cmFwcGVyLm1qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sLXBhcnNlLXN0cmluZ2lmeS9kaXN0L2h0bWwtcGFyc2Utc3RyaW5naWZ5Lm1vZHVsZS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9pMThuZXh0L2Rpc3QvY2pzL2kxOG5leHQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9JMThuZXh0UHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL1RyYW5zLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9UcmFuc1dpdGhvdXRDb250ZXh0LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9UcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvY29udGV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL2kxOG5JbnN0YW5jZS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL2luaXRSZWFjdEkxOG5leHQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3VuZXNjYXBlLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91c2VTU1IuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL3VzZVRyYW5zbGF0aW9uLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91dGlscy5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvd2l0aFNTUi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvd2l0aFRyYW5zbGF0aW9uLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC5kZXZlbG9wbWVudC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4uLy4uL25vZGVfbW9kdWxlcy90aXRsZS1jYXNlL2Rpc3QuZXMyMDE1L2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvLi4vLi4vbm9kZV9tb2R1bGVzL3ZvaWQtZWxlbWVudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXJlZ2lzdGVyLXdpdGgtYnJvd3Nlci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1yZWdpc3Rlci13aXRoLWJyb3dzZXIvd2VicGFjay9ydW50aW1lL25vZGUgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tcmVnaXN0ZXItd2l0aC1icm93c2VyLy4vY2xpZW50L3NyYy9sYXVuY2hiYXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKCgpPT57dmFyIGU9ezg0NzooZSx0KT0+e3ZhciBhPXsyMzQ2OmZ1bmN0aW9uKGUsdCxhKXt2YXIgbj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldE1vc3RSZWFkYWJsZT10LmRhcmtlbkNvbG9yPXQubGlnaHRlbkNvbG9yPXZvaWQgMDtjb25zdCBvPW4oYSg2NTM1KSk7dC5saWdodGVuQ29sb3I9KGUsdCk9PnIoZSxcImxpZ2h0ZW5cIix0KSx0LmRhcmtlbkNvbG9yPShlLHQpPT5yKGUsXCJkYXJrZW5cIix0KTtjb25zdCByPShlLHQsYSk9PntpZihhJiYoYTwwfHxhPjEwMCkpdGhyb3cgbmV3IEVycm9yKGAke2F9IG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBgKTtyZXR1cm4oMCxvLmRlZmF1bHQpKGUpW3RdKGEpLnRvU3RyaW5nKCl9O3QuZ2V0TW9zdFJlYWRhYmxlPShlLHQpPT5vLmRlZmF1bHQubW9zdFJlYWRhYmxlKGUsdCkudG9IZXhTdHJpbmcoKX0sMjMxNzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSWNvblNpemU9dC5UcmFuc2l0aW9uPXQuTGluZUhlaWdodD10LkZvbnRXZWlnaHQ9dC5Gb250U2l6ZT10LkZvbnRGYW1pbHk9dC5TaGFkb3c9dC5SYWRpdXM9dC5Vbml0UHg9dC5Vbml0PXQuU2l6ZU5hbWU9dC5TaXplPXQuQ29sb3I9dm9pZCAwLHQuQ29sb3I9e3doaXRlOlwiI0ZGRkZGRlwiLGxpZ2h0R3JheTE6XCIjRkFGQkZFXCIsbGlnaHRHcmF5MjpcIiNGM0Y1RjhcIixsaWdodEdyYXkzOlwiI0VDRUVGMVwiLGxpZ2h0R3JheTQ6XCIjRERERkU0XCIsbGlnaHRHcmF5NTpcIiNDOUNCRDJcIixuZXV0cmFsR3JheTpcIiM3RDgwOEFcIixuZXV0cmFsR3JheTgwOlwicmdiYSgxMjUsMTI4LDEzOCwwLjgpXCIsc2lsdmVyR3JheTpcIiNDMEMxQzJcIixkYXJrR3JheTE6XCIjNTM1NjVGXCIsZGFya0dyYXkyOlwiIzM4M0E0MFwiLGRhcmtHcmF5MzpcIiMyRjMxMzZcIixkYXJrR3JheTQ6XCIjMjQyNjJCXCIsZGFya0dyYXk1OlwiIzFFMUYyM1wiLGRhcmtHcmF5NjpcIiMxMTEyMTRcIixvcGVuRmluRGFya2VzdDpcIiMzRDM5Q0RcIixvcGVuRmluRGFya2VyOlwiIzQ2NDJFMFwiLG9wZW5GaW46XCIjNTA0Q0ZGXCIsb3BlbkZpbkxpZ2h0OlwiIzUyNTRGQlwiLG9wZW5GaW5MaWdodGVyOlwiIzVDNUVGRVwiLG9wZW5GaW5MaWdodGVzdDpcIiM2ODY0RkZcIixmdW5jdGlvbmFsMTpcIiMyMDc3MzVcIixmdW5jdGlvbmFsMjpcIiM0NkM4RjFcIixmdW5jdGlvbmFsMzpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNDpcIiM2Q0FERTVcIixmdW5jdGlvbmFsNTpcIiMwQTc2RDNcIixmdW5jdGlvbmFsNjpcIiM4ODJCRkVcIixmdW5jdGlvbmFsNzpcIiNGMzE4MThcIixmdW5jdGlvbmFsODpcIiNDOTM0MDBcIixmdW5jdGlvbmFsOTpcIiNGRjVFNjBcIixmdW5jdGlvbmFsMTA6XCIjRjQ4RjAwXCIscHVycGxlOlwiIzhDNjFGRlwiLGxpZ2h0Ymx1ZTpcIiMzNkMzRkVcIixhcXVhOlwiIzAwQ0M4OFwiLHllbGxvdzpcIiNGRkVCMDBcIixzYWxtb246XCIjRkY4QzRDXCIscGluazpcIiNGRjVFNjBcIixsaWdodHBpbms6XCIjRkY4RkI4XCIsd2hpdGUwMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4wKVwiLHdoaXRlMTA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMSlcIix3aGl0ZTIwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjIpXCIsd2hpdGUzMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4zKVwiLHdoaXRlNDA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNClcIix3aGl0ZTUwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjUpXCIsd2hpdGU2MDpcInJnYmEoMjU1LDI1NSwyNTUsMC42KVwiLHdoaXRlNzA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNylcIix3aGl0ZTgwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIsd2hpdGU5MDpcInJnYmEoMjU1LDI1NSwyNTUsMC45KVwiLGJsYWNrMDA6XCJyZ2JhKDAsMCwwLDAuMClcIixibGFjazEwOlwicmdiYSgwLDAsMCwwLjEpXCIsYmxhY2syMDpcInJnYmEoMCwwLDAsMC4yKVwiLGJsYWNrMzA6XCJyZ2JhKDAsMCwwLDAuMylcIixibGFjazQwOlwicmdiYSgwLDAsMCwwLjQpXCIsYmxhY2s1MDpcInJnYmEoMCwwLDAsMC41KVwiLGJsYWNrNjA6XCJyZ2JhKDAsMCwwLDAuNilcIixibGFjazcwOlwicmdiYSgwLDAsMCwwLjcpXCIsYmxhY2s4MDpcInJnYmEoMCwwLDAsMC44KVwiLGJsYWNrOTA6XCJyZ2JhKDAsMCwwLDAuOSlcIix0cmFuc3BhcmVudDpcInRyYW5zcGFyZW50XCIsb3BlbkZpbkFjdGl2ZTpcIiM0NjQyRkZcIixvcGVuRmluSG92ZXI6XCIjNjk2NUZGXCIsbGlnaHRHcmF5NEFjdGl2ZTpcIiNEN0RBREZcIixsaWdodEdyYXk0SG92ZXI6XCIjRUJFQ0VGXCIsZGFya0dyYXkyQWN0aXZlOlwiIzMzMzUzQlwiLGRhcmtHcmF5MkhvdmVyOlwiIzQ0NDY0RVwifSx0LlNpemU9e3hzbWFsbDpcInhzbWFsbFwiLHNtYWxsOlwic21hbGxcIixiYXNlOlwiYmFzZVwiLGxhcmdlOlwibGFyZ2VcIix4bGFyZ2U6XCJ4bGFyZ2VcIix4eGxhcmdlOlwieHhsYXJnZVwiLHh4eGxhcmdlOlwieHh4bGFyZ2VcIix4eHh4bGFyZ2U6XCJ4eHh4bGFyZ2VcIn0sdC5TaXplTmFtZT17W3QuU2l6ZS54c21hbGxdOlwiRXh0cmEgU21hbGxcIixbdC5TaXplLnNtYWxsXTpcIlNtYWxsXCIsW3QuU2l6ZS5iYXNlXTpcIkJhc2VcIixbdC5TaXplLmxhcmdlXTpcIkxhcmdlXCIsW3QuU2l6ZS54bGFyZ2VdOlwiRXh0cmEgTGFyZ2VcIixbdC5TaXplLnh4bGFyZ2VdOlwiMlggTGFyZ2VcIixbdC5TaXplLnh4eGxhcmdlXTpcIjNYIExhcmdlXCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNFggTGFyZ2VcIn0sdC5Vbml0PXtbdC5TaXplLnhzbWFsbF06NCxbdC5TaXplLnNtYWxsXTo4LFt0LlNpemUuYmFzZV06MTIsW3QuU2l6ZS5sYXJnZV06MTYsW3QuU2l6ZS54bGFyZ2VdOjIwLFt0LlNpemUueHhsYXJnZV06MjQsW3QuU2l6ZS54eHhsYXJnZV06MzIsW3QuU2l6ZS54eHh4bGFyZ2VdOjQ4fSx0LlVuaXRQeD17W3QuU2l6ZS54c21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5zbWFsbF06XCI4cHhcIixbdC5TaXplLmJhc2VdOlwiMTJweFwiLFt0LlNpemUubGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueGxhcmdlXTpcIjIwcHhcIixbdC5TaXplLnh4bGFyZ2VdOlwiMjRweFwiLFt0LlNpemUueHh4bGFyZ2VdOlwiMzJweFwiLFt0LlNpemUueHh4eGxhcmdlXTpcIjQ4cHhcIn0sdC5SYWRpdXM9e1t0LlNpemUueHNtYWxsXTpcIjJweFwiLFt0LlNpemUuc21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5iYXNlXTpcIjhweFwiLFt0LlNpemUubGFyZ2VdOlwiMjRweFwiLHBpbGw6XCIxMDB2aFwiLHJvdW5kOlwiNTAlXCIsbm9uZTpcIjBcIn0sdC5TaGFkb3c9e1t0LlNpemUuYmFzZV06XCIwIDRweCA0cHggcmdiYSgwLCAwLCAwLCAwLjI1KVwifSx0LkZvbnRGYW1pbHk9W1wiSW50ZXJcIixcInN5c3RlbS11aVwiLFwiQmxpbmtNYWNTeXN0ZW1Gb250XCIsXCJTZWdvZSBVSVwiLFwiUm9ib3RvXCIsXCJPeHlnZW4tU2Fuc1wiLFwiVWJ1bnR1XCIsXCJDYW50YXJlbGxcIixcIkhlbHZldGljYSBOZXVlXCIsXCJzYW5zLXNlcmlmXCJdLmpvaW4oXCIsXCIpLHQuRm9udFNpemU9e1t0LlNpemUueHNtYWxsXTpcIjhweFwiLFt0LlNpemUuc21hbGxdOlwiMTBweFwiLFt0LlNpemUuYmFzZV06XCIxMnB4XCIsW3QuU2l6ZS5sYXJnZV06XCIxNHB4XCIsW3QuU2l6ZS54bGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueHhsYXJnZV06XCIxOHB4XCIsW3QuU2l6ZS54eHhsYXJnZV06XCIyMHB4XCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNDBweFwifSx0LkZvbnRXZWlnaHQ9e25vcm1hbDo0MDAsYm9sZDo2MDB9LHQuTGluZUhlaWdodD17dWk6MSxoZWFkaW5nOjEuMix0ZXh0OjEuNX0sdC5UcmFuc2l0aW9uPXtiYXNlOlwiMjAwbXMgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSlcIixub25lOlwiMG1zXCJ9LHQuSWNvblNpemU9e1t0LlNpemUueHNtYWxsXTp0LlVuaXRQeC5zbWFsbCxbdC5TaXplLnNtYWxsXTp0LlVuaXRQeC5iYXNlLFt0LlNpemUuYmFzZV06XCIxNXB4XCIsW3QuU2l6ZS5sYXJnZV06dC5Vbml0UHgueGxhcmdlLFt0LlNpemUueGxhcmdlXTp0LlVuaXRQeC54eGxhcmdlLFt0LlNpemUueHhsYXJnZV06dC5Vbml0UHgueHh4bGFyZ2UsW3QuU2l6ZS54eHhsYXJnZV06dC5Vbml0UHgueHh4eGxhcmdlfX0sNjg5MzooZSx0LGEpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jcmVhdGVUaGVtZT12b2lkIDA7Y29uc3Qgbj1hKDIzMTcpLG89YSgyMzQ2KSxyPWEoNTkzOSksaT17Zm9udEZhbWlseTpuLkZvbnRGYW1pbHksZm9udFNpemU6bi5Gb250U2l6ZSxmb250V2VpZ2h0Om4uRm9udFdlaWdodCxsaW5lSGVpZ2h0Om4uTGluZUhlaWdodCxpY29uU2l6ZTpuLkljb25TaXplLHJhZGl1czpuLlJhZGl1cyxzaGFkb3c6bi5TaGFkb3csdHJhbnNpdGlvbjpuLlRyYW5zaXRpb24sdW5pdDpuLlVuaXQscHg6bi5Vbml0UHh9LHM9KGUsdCk9Pih7W2Ake2V9QWN0aXZlYF06KDAsby5kYXJrZW5Db2xvcikodCwyKSxbYCR7ZX1Ib3ZlcmBdOigwLG8ubGlnaHRlbkNvbG9yKSh0LDUpLFtgJHtlfUZvY3VzZWRgXTooMCxvLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pLFtgJHtlfVRleHRgXTooMCxvLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pfSk7dC5jcmVhdGVUaGVtZT1lPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3BhbGV0dGU6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scyhyLlBhbGV0dGUuYnJhbmRQcmltYXJ5LGUuYnJhbmRQcmltYXJ5KSkscyhyLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnksZS5icmFuZFNlY29uZGFyeSkpLGUpfSl9LDU5Mzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBhbGV0dGU9dm9pZCAwLHQuUGFsZXR0ZT17YmFja2dyb3VuZDE6XCJiYWNrZ3JvdW5kMVwiLGJhY2tncm91bmQyOlwiYmFja2dyb3VuZDJcIixiYWNrZ3JvdW5kMzpcImJhY2tncm91bmQzXCIsYmFja2dyb3VuZDQ6XCJiYWNrZ3JvdW5kNFwiLGJhY2tncm91bmQ1OlwiYmFja2dyb3VuZDVcIixiYWNrZ3JvdW5kNjpcImJhY2tncm91bmQ2XCIsYnJhbmRQcmltYXJ5OlwiYnJhbmRQcmltYXJ5XCIsYnJhbmRTZWNvbmRhcnk6XCJicmFuZFNlY29uZGFyeVwiLGJyYW5kUHJpbWFyeUFjdGl2ZTpcImJyYW5kUHJpbWFyeUFjdGl2ZVwiLGJyYW5kUHJpbWFyeUhvdmVyOlwiYnJhbmRQcmltYXJ5SG92ZXJcIixicmFuZFByaW1hcnlGb2N1c2VkOlwiYnJhbmRQcmltYXJ5Rm9jdXNlZFwiLGJyYW5kUHJpbWFyeVRleHQ6XCJicmFuZFByaW1hcnlUZXh0XCIsYnJhbmRTZWNvbmRhcnlBY3RpdmU6XCJicmFuZFNlY29uZGFyeUFjdGl2ZVwiLGJyYW5kU2Vjb25kYXJ5SG92ZXI6XCJicmFuZFNlY29uZGFyeUhvdmVyXCIsYnJhbmRTZWNvbmRhcnlGb2N1c2VkOlwiYnJhbmRTZWNvbmRhcnlGb2N1c2VkXCIsYnJhbmRTZWNvbmRhcnlUZXh0OlwiYnJhbmRTZWNvbmRhcnlUZXh0XCIsaW5wdXRCYWNrZ3JvdW5kOlwiaW5wdXRCYWNrZ3JvdW5kXCIsaW5wdXRDb2xvcjpcImlucHV0Q29sb3JcIixpbnB1dFBsYWNlaG9sZGVyOlwiaW5wdXRQbGFjZWhvbGRlclwiLGlucHV0RGlzYWJsZWQ6XCJpbnB1dERpc2FibGVkXCIsaW5wdXRGb2N1c2VkOlwiaW5wdXRGb2N1c2VkXCIsaW5wdXRCb3JkZXI6XCJpbnB1dEJvcmRlclwiLHN0YXR1c1N1Y2Nlc3M6XCJzdGF0dXNTdWNjZXNzXCIsc3RhdHVzV2FybmluZzpcInN0YXR1c1dhcm5pbmdcIixzdGF0dXNDcml0aWNhbDpcInN0YXR1c0NyaXRpY2FsXCIsc3RhdHVzQWN0aXZlOlwic3RhdHVzQWN0aXZlXCIsdGV4dERlZmF1bHQ6XCJ0ZXh0RGVmYXVsdFwiLHRleHRIZWxwOlwidGV4dEhlbHBcIix0ZXh0SW5hY3RpdmU6XCJ0ZXh0SW5hY3RpdmVcIixib3JkZXJOZXV0cmFsOlwiYm9yZGVyTmV1dHJhbFwiLGNvbnRlbnRCYWNrZ3JvdW5kMTpcImNvbnRlbnRCYWNrZ3JvdW5kMVwiLGNvbnRlbnRCYWNrZ3JvdW5kMjpcImNvbnRlbnRCYWNrZ3JvdW5kMlwiLGNvbnRlbnRCYWNrZ3JvdW5kMzpcImNvbnRlbnRCYWNrZ3JvdW5kM1wiLGNvbnRlbnRCYWNrZ3JvdW5kNDpcImNvbnRlbnRCYWNrZ3JvdW5kNFwiLGNvbnRlbnRCYWNrZ3JvdW5kNTpcImNvbnRlbnRCYWNrZ3JvdW5kNVwiLGxpbmtEZWZhdWx0OlwibGlua0RlZmF1bHRcIixsaW5rSG92ZXI6XCJsaW5rSG92ZXJcIn19LDY1MzU6ZnVuY3Rpb24oZSl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4oZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkodCl9dmFyIHQ9L15cXHMrLyxhPS9cXHMrJC87ZnVuY3Rpb24gbihvLHIpe2lmKHI9cnx8e30sKG89b3x8XCJcIilpbnN0YW5jZW9mIG4pcmV0dXJuIG87aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKG8scik7dmFyIGk9ZnVuY3Rpb24obil7dmFyIG8scixpLHM9e3I6MCxnOjAsYjowfSxjPTEsbD1udWxsLGQ9bnVsbCx1PW51bGwscD0hMSx3PSExO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSh0LFwiXCIpLnJlcGxhY2UoYSxcIlwiKS50b0xvd2VyQ2FzZSgpO3ZhciBuLG89ITE7aWYoZltlXSllPWZbZV0sbz0hMDtlbHNlIGlmKFwidHJhbnNwYXJlbnRcIj09ZSlyZXR1cm57cjowLGc6MCxiOjAsYTowLGZvcm1hdDpcIm5hbWVcIn07cmV0dXJuKG49Ui5yZ2IuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdfToobj1SLnJnYmEuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdLGE6bls0XX06KG49Ui5oc2wuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdfToobj1SLmhzbGEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdLGE6bls0XX06KG49Ui5oc3YuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdfToobj1SLmhzdmEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdLGE6bls0XX06KG49Ui5oZXg4LmV4ZWMoZSkpP3tyOk0oblsxXSksZzpNKG5bMl0pLGI6TShuWzNdKSxhOlcobls0XSksZm9ybWF0Om8/XCJuYW1lXCI6XCJoZXg4XCJ9OihuPVIuaGV4Ni5leGVjKGUpKT97cjpNKG5bMV0pLGc6TShuWzJdKSxiOk0oblszXSksZm9ybWF0Om8/XCJuYW1lXCI6XCJoZXhcIn06KG49Ui5oZXg0LmV4ZWMoZSkpP3tyOk0oblsxXStcIlwiK25bMV0pLGc6TShuWzJdK1wiXCIrblsyXSksYjpNKG5bM10rXCJcIituWzNdKSxhOlcobls0XStcIlwiK25bNF0pLGZvcm1hdDpvP1wibmFtZVwiOlwiaGV4OFwifTohIShuPVIuaGV4My5leGVjKGUpKSYme3I6TShuWzFdK1wiXCIrblsxXSksZzpNKG5bMl0rXCJcIituWzJdKSxiOk0oblszXStcIlwiK25bM10pLGZvcm1hdDpvP1wibmFtZVwiOlwiaGV4XCJ9fShuKSksXCJvYmplY3RcIj09ZShuKSYmKEUobi5yKSYmRShuLmcpJiZFKG4uYik/KG89bi5yLHI9bi5nLGk9bi5iLHM9e3I6MjU1KlAobywyNTUpLGc6MjU1KlAociwyNTUpLGI6MjU1KlAoaSwyNTUpfSxwPSEwLHc9XCIlXCI9PT1TdHJpbmcobi5yKS5zdWJzdHIoLTEpP1wicHJnYlwiOlwicmdiXCIpOkUobi5oKSYmRShuLnMpJiZFKG4udik/KGw9SShuLnMpLGQ9SShuLnYpLHM9ZnVuY3Rpb24oZSx0LGEpe2U9NipQKGUsMzYwKSx0PVAodCwxMDApLGE9UChhLDEwMCk7dmFyIG49TWF0aC5mbG9vcihlKSxvPWUtbixyPWEqKDEtdCksaT1hKigxLW8qdCkscz1hKigxLSgxLW8pKnQpLGM9biU2O3JldHVybntyOjI1NSpbYSxpLHIscixzLGFdW2NdLGc6MjU1KltzLGEsYSxpLHIscl1bY10sYjoyNTUqW3IscixzLGEsYSxpXVtjXX19KG4uaCxsLGQpLHA9ITAsdz1cImhzdlwiKTpFKG4uaCkmJkUobi5zKSYmRShuLmwpJiYobD1JKG4ucyksdT1JKG4ubCkscz1mdW5jdGlvbihlLHQsYSl7dmFyIG4sbyxyO2Z1bmN0aW9uIGkoZSx0LGEpe3JldHVybiBhPDAmJihhKz0xKSxhPjEmJihhLT0xKSxhPDEvNj9lKzYqKHQtZSkqYTphPC41P3Q6YTwyLzM/ZSsodC1lKSooMi8zLWEpKjY6ZX1pZihlPVAoZSwzNjApLHQ9UCh0LDEwMCksYT1QKGEsMTAwKSwwPT09dCluPW89cj1hO2Vsc2V7dmFyIHM9YTwuNT9hKigxK3QpOmErdC1hKnQsYz0yKmEtcztuPWkoYyxzLGUrMS8zKSxvPWkoYyxzLGUpLHI9aShjLHMsZS0xLzMpfXJldHVybntyOjI1NSpuLGc6MjU1Km8sYjoyNTUqcn19KG4uaCxsLHUpLHA9ITAsdz1cImhzbFwiKSxuLmhhc093blByb3BlcnR5KFwiYVwiKSYmKGM9bi5hKSksYz12KGMpLHtvazpwLGZvcm1hdDpuLmZvcm1hdHx8dyxyOk1hdGgubWluKDI1NSxNYXRoLm1heChzLnIsMCkpLGc6TWF0aC5taW4oMjU1LE1hdGgubWF4KHMuZywwKSksYjpNYXRoLm1pbigyNTUsTWF0aC5tYXgocy5iLDApKSxhOmN9fShvKTt0aGlzLl9vcmlnaW5hbElucHV0PW8sdGhpcy5fcj1pLnIsdGhpcy5fZz1pLmcsdGhpcy5fYj1pLmIsdGhpcy5fYT1pLmEsdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzLl9mb3JtYXQ9ci5mb3JtYXR8fGkuZm9ybWF0LHRoaXMuX2dyYWRpZW50VHlwZT1yLmdyYWRpZW50VHlwZSx0aGlzLl9yPDEmJih0aGlzLl9yPU1hdGgucm91bmQodGhpcy5fcikpLHRoaXMuX2c8MSYmKHRoaXMuX2c9TWF0aC5yb3VuZCh0aGlzLl9nKSksdGhpcy5fYjwxJiYodGhpcy5fYj1NYXRoLnJvdW5kKHRoaXMuX2IpKSx0aGlzLl9vaz1pLm9rfWZ1bmN0aW9uIG8oZSx0LGEpe2U9UChlLDI1NSksdD1QKHQsMjU1KSxhPVAoYSwyNTUpO3ZhciBuLG8scj1NYXRoLm1heChlLHQsYSksaT1NYXRoLm1pbihlLHQsYSkscz0ocitpKS8yO2lmKHI9PWkpbj1vPTA7ZWxzZXt2YXIgYz1yLWk7c3dpdGNoKG89cz4uNT9jLygyLXItaSk6Yy8ocitpKSxyKXtjYXNlIGU6bj0odC1hKS9jKyh0PGE/NjowKTticmVhaztjYXNlIHQ6bj0oYS1lKS9jKzI7YnJlYWs7Y2FzZSBhOm49KGUtdCkvYys0fW4vPTZ9cmV0dXJue2g6bixzOm8sbDpzfX1mdW5jdGlvbiByKGUsdCxhKXtlPVAoZSwyNTUpLHQ9UCh0LDI1NSksYT1QKGEsMjU1KTt2YXIgbixvLHI9TWF0aC5tYXgoZSx0LGEpLGk9TWF0aC5taW4oZSx0LGEpLHM9cixjPXItaTtpZihvPTA9PT1yPzA6Yy9yLHI9PWkpbj0wO2Vsc2V7c3dpdGNoKHIpe2Nhc2UgZTpuPSh0LWEpL2MrKHQ8YT82OjApO2JyZWFrO2Nhc2UgdDpuPShhLWUpL2MrMjticmVhaztjYXNlIGE6bj0oZS10KS9jKzR9bi89Nn1yZXR1cm57aDpuLHM6byx2OnN9fWZ1bmN0aW9uIGkoZSx0LGEsbil7dmFyIG89W3goTWF0aC5yb3VuZChlKS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZCh0KS50b1N0cmluZygxNikpLHgoTWF0aC5yb3VuZChhKS50b1N0cmluZygxNikpXTtyZXR1cm4gbiYmb1swXS5jaGFyQXQoMCk9PW9bMF0uY2hhckF0KDEpJiZvWzFdLmNoYXJBdCgwKT09b1sxXS5jaGFyQXQoMSkmJm9bMl0uY2hhckF0KDApPT1vWzJdLmNoYXJBdCgxKT9vWzBdLmNoYXJBdCgwKStvWzFdLmNoYXJBdCgwKStvWzJdLmNoYXJBdCgwKTpvLmpvaW4oXCJcIil9ZnVuY3Rpb24gcyhlLHQsYSxuKXtyZXR1cm5beChBKG4pKSx4KE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKV0uam9pbihcIlwiKX1mdW5jdGlvbiBjKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5zLT10LzEwMCxhLnM9QyhhLnMpLG4oYSl9ZnVuY3Rpb24gbChlLHQpe3Q9MD09PXQ/MDp0fHwxMDt2YXIgYT1uKGUpLnRvSHNsKCk7cmV0dXJuIGEucys9dC8xMDAsYS5zPUMoYS5zKSxuKGEpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIG4oZSkuZGVzYXR1cmF0ZSgxMDApfWZ1bmN0aW9uIHUoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b0hzbCgpO3JldHVybiBhLmwrPXQvMTAwLGEubD1DKGEubCksbihhKX1mdW5jdGlvbiBwKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9SZ2IoKTtyZXR1cm4gYS5yPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuci1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5nPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuZy1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5iPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuYi1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksbihhKX1mdW5jdGlvbiB3KGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5sLT10LzEwMCxhLmw9QyhhLmwpLG4oYSl9ZnVuY3Rpb24gZyhlLHQpe3ZhciBhPW4oZSkudG9Ic2woKSxvPShhLmgrdCklMzYwO3JldHVybiBhLmg9bzwwPzM2MCtvOm8sbihhKX1mdW5jdGlvbiBoKGUpe3ZhciB0PW4oZSkudG9Ic2woKTtyZXR1cm4gdC5oPSh0LmgrMTgwKSUzNjAsbih0KX1mdW5jdGlvbiBtKGUsdCl7aWYoaXNOYU4odCl8fHQ8PTApdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgdG8gcG9seWFkIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7Zm9yKHZhciBhPW4oZSkudG9Ic2woKSxvPVtuKGUpXSxyPTM2MC90LGk9MTtpPHQ7aSsrKW8ucHVzaChuKHtoOihhLmgraSpyKSUzNjAsczphLnMsbDphLmx9KSk7cmV0dXJuIG99ZnVuY3Rpb24gayhlKXt2YXIgdD1uKGUpLnRvSHNsKCksYT10Lmg7cmV0dXJuW24oZSksbih7aDooYSs3MiklMzYwLHM6dC5zLGw6dC5sfSksbih7aDooYSsyMTYpJTM2MCxzOnQucyxsOnQubH0pXX1mdW5jdGlvbiBiKGUsdCxhKXt0PXR8fDYsYT1hfHwzMDt2YXIgbz1uKGUpLnRvSHNsKCkscj0zNjAvYSxpPVtuKGUpXTtmb3Ioby5oPShvLmgtKHIqdD4+MSkrNzIwKSUzNjA7LS10OylvLmg9KG8uaCtyKSUzNjAsaS5wdXNoKG4obykpO3JldHVybiBpfWZ1bmN0aW9uIHkoZSx0KXt0PXR8fDY7Zm9yKHZhciBhPW4oZSkudG9Ic3YoKSxvPWEuaCxyPWEucyxpPWEudixzPVtdLGM9MS90O3QtLTspcy5wdXNoKG4oe2g6byxzOnIsdjppfSkpLGk9KGkrYyklMTtyZXR1cm4gc31uLnByb3RvdHlwZT17aXNEYXJrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnJpZ2h0bmVzcygpPDEyOH0saXNMaWdodDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRGFyaygpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29rfSxnZXRPcmlnaW5hbElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWdpbmFsSW5wdXR9LGdldEZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JtYXR9LGdldEFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F9LGdldEJyaWdodG5lc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRvUmdiKCk7cmV0dXJuKDI5OSplLnIrNTg3KmUuZysxMTQqZS5iKS8xZTN9LGdldEx1bWluYW5jZTpmdW5jdGlvbigpe3ZhciBlLHQsYSxuPXRoaXMudG9SZ2IoKTtyZXR1cm4gZT1uLnIvMjU1LHQ9bi5nLzI1NSxhPW4uYi8yNTUsLjIxMjYqKGU8PS4wMzkyOD9lLzEyLjkyOk1hdGgucG93KChlKy4wNTUpLzEuMDU1LDIuNCkpKy43MTUyKih0PD0uMDM5Mjg/dC8xMi45MjpNYXRoLnBvdygodCsuMDU1KS8xLjA1NSwyLjQpKSsuMDcyMiooYTw9LjAzOTI4P2EvMTIuOTI6TWF0aC5wb3coKGErLjA1NSkvMS4wNTUsMi40KSl9LHNldEFscGhhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hPXYoZSksdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzfSx0b0hzdjpmdW5jdGlvbigpe3ZhciBlPXIodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsdjplLnYsYTp0aGlzLl9hfX0sdG9Ic3ZTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS52KTtyZXR1cm4gMT09dGhpcy5fYT9cImhzdihcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc3ZhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hzbDpmdW5jdGlvbigpe3ZhciBlPW8odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsbDplLmwsYTp0aGlzLl9hfX0sdG9Ic2xTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS5sKTtyZXR1cm4gMT09dGhpcy5fYT9cImhzbChcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc2xhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hleDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYixlKX0sdG9IZXhTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrdGhpcy50b0hleChlKX0sdG9IZXg4OmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQsYSxuLG8pe3ZhciByPVt4KE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSx4KE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKSx4KEEobikpXTtyZXR1cm4gbyYmclswXS5jaGFyQXQoMCk9PXJbMF0uY2hhckF0KDEpJiZyWzFdLmNoYXJBdCgwKT09clsxXS5jaGFyQXQoMSkmJnJbMl0uY2hhckF0KDApPT1yWzJdLmNoYXJBdCgxKSYmclszXS5jaGFyQXQoMCk9PXJbM10uY2hhckF0KDEpP3JbMF0uY2hhckF0KDApK3JbMV0uY2hhckF0KDApK3JbMl0uY2hhckF0KDApK3JbM10uY2hhckF0KDApOnIuam9pbihcIlwiKX0odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsdGhpcy5fYSxlKX0sdG9IZXg4U3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVyblwiI1wiK3RoaXMudG9IZXg4KGUpfSx0b1JnYjpmdW5jdGlvbigpe3JldHVybntyOk1hdGgucm91bmQodGhpcy5fciksZzpNYXRoLnJvdW5kKHRoaXMuX2cpLGI6TWF0aC5yb3VuZCh0aGlzLl9iKSxhOnRoaXMuX2F9fSx0b1JnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9QZXJjZW50YWdlUmdiOmZ1bmN0aW9uKCl7cmV0dXJue3I6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9yLDI1NSkpK1wiJVwiLGc6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9nLDI1NSkpK1wiJVwiLGI6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9iLDI1NSkpK1wiJVwiLGE6dGhpcy5fYX19LHRvUGVyY2VudGFnZVJnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9hP1widHJhbnNwYXJlbnRcIjohKHRoaXMuX2E8MSkmJihTW2kodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsITApXXx8ITEpfSx0b0ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgdD1cIiNcIitzKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iLHRoaXMuX2EpLGE9dCxvPXRoaXMuX2dyYWRpZW50VHlwZT9cIkdyYWRpZW50VHlwZSA9IDEsIFwiOlwiXCI7aWYoZSl7dmFyIHI9bihlKTthPVwiI1wiK3Moci5fcixyLl9nLHIuX2Isci5fYSl9cmV0dXJuXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoXCIrbytcInN0YXJ0Q29sb3JzdHI9XCIrdCtcIixlbmRDb2xvcnN0cj1cIithK1wiKVwifSx0b1N0cmluZzpmdW5jdGlvbihlKXt2YXIgdD0hIWU7ZT1lfHx0aGlzLl9mb3JtYXQ7dmFyIGE9ITEsbj10aGlzLl9hPDEmJnRoaXMuX2E+PTA7cmV0dXJuIHR8fCFufHxcImhleFwiIT09ZSYmXCJoZXg2XCIhPT1lJiZcImhleDNcIiE9PWUmJlwiaGV4NFwiIT09ZSYmXCJoZXg4XCIhPT1lJiZcIm5hbWVcIiE9PWU/KFwicmdiXCI9PT1lJiYoYT10aGlzLnRvUmdiU3RyaW5nKCkpLFwicHJnYlwiPT09ZSYmKGE9dGhpcy50b1BlcmNlbnRhZ2VSZ2JTdHJpbmcoKSksXCJoZXhcIiE9PWUmJlwiaGV4NlwiIT09ZXx8KGE9dGhpcy50b0hleFN0cmluZygpKSxcImhleDNcIj09PWUmJihhPXRoaXMudG9IZXhTdHJpbmcoITApKSxcImhleDRcIj09PWUmJihhPXRoaXMudG9IZXg4U3RyaW5nKCEwKSksXCJoZXg4XCI9PT1lJiYoYT10aGlzLnRvSGV4OFN0cmluZygpKSxcIm5hbWVcIj09PWUmJihhPXRoaXMudG9OYW1lKCkpLFwiaHNsXCI9PT1lJiYoYT10aGlzLnRvSHNsU3RyaW5nKCkpLFwiaHN2XCI9PT1lJiYoYT10aGlzLnRvSHN2U3RyaW5nKCkpLGF8fHRoaXMudG9IZXhTdHJpbmcoKSk6XCJuYW1lXCI9PT1lJiYwPT09dGhpcy5fYT90aGlzLnRvTmFtZSgpOnRoaXMudG9SZ2JTdHJpbmcoKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLnRvU3RyaW5nKCkpfSxfYXBwbHlNb2RpZmljYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgYT1lLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKHQpKSk7cmV0dXJuIHRoaXMuX3I9YS5fcix0aGlzLl9nPWEuX2csdGhpcy5fYj1hLl9iLHRoaXMuc2V0QWxwaGEoYS5fYSksdGhpc30sbGlnaHRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbih1LGFyZ3VtZW50cyl9LGJyaWdodGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHAsYXJndW1lbnRzKX0sZGFya2VuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHcsYXJndW1lbnRzKX0sZGVzYXR1cmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihjLGFyZ3VtZW50cyl9LHNhdHVyYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGwsYXJndW1lbnRzKX0sZ3JleXNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGQsYXJndW1lbnRzKX0sc3BpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihnLGFyZ3VtZW50cyl9LF9hcHBseUNvbWJpbmF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwodCkpKX0sYW5hbG9nb3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oYixhcmd1bWVudHMpfSxjb21wbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oaCxhcmd1bWVudHMpfSxtb25vY2hyb21hdGljOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oeSxhcmd1bWVudHMpfSxzcGxpdGNvbXBsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihrLGFyZ3VtZW50cyl9LHRyaWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24obSxbM10pfSx0ZXRyYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtLFs0XSl9fSxuLmZyb21SYXRpbz1mdW5jdGlvbih0LGEpe2lmKFwib2JqZWN0XCI9PWUodCkpe3ZhciBvPXt9O2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihvW3JdPVwiYVwiPT09cj90W3JdOkkodFtyXSkpO3Q9b31yZXR1cm4gbih0LGEpfSxuLmVxdWFscz1mdW5jdGlvbihlLHQpe3JldHVybiEoIWV8fCF0KSYmbihlKS50b1JnYlN0cmluZygpPT1uKHQpLnRvUmdiU3RyaW5nKCl9LG4ucmFuZG9tPWZ1bmN0aW9uKCl7cmV0dXJuIG4uZnJvbVJhdGlvKHtyOk1hdGgucmFuZG9tKCksZzpNYXRoLnJhbmRvbSgpLGI6TWF0aC5yYW5kb20oKX0pfSxuLm1peD1mdW5jdGlvbihlLHQsYSl7YT0wPT09YT8wOmF8fDUwO3ZhciBvPW4oZSkudG9SZ2IoKSxyPW4odCkudG9SZ2IoKSxpPWEvMTAwO3JldHVybiBuKHtyOihyLnItby5yKSppK28ucixnOihyLmctby5nKSppK28uZyxiOihyLmItby5iKSppK28uYixhOihyLmEtby5hKSppK28uYX0pfSxuLnJlYWRhYmlsaXR5PWZ1bmN0aW9uKGUsdCl7dmFyIGE9bihlKSxvPW4odCk7cmV0dXJuKE1hdGgubWF4KGEuZ2V0THVtaW5hbmNlKCksby5nZXRMdW1pbmFuY2UoKSkrLjA1KS8oTWF0aC5taW4oYS5nZXRMdW1pbmFuY2UoKSxvLmdldEx1bWluYW5jZSgpKSsuMDUpfSxuLmlzUmVhZGFibGU9ZnVuY3Rpb24oZSx0LGEpe3ZhciBvLHIsaSxzLGMsbD1uLnJlYWRhYmlsaXR5KGUsdCk7c3dpdGNoKHI9ITEsKGk9YSxcIkFBXCIhPT0ocz0oKGk9aXx8e2xldmVsOlwiQUFcIixzaXplOlwic21hbGxcIn0pLmxldmVsfHxcIkFBXCIpLnRvVXBwZXJDYXNlKCkpJiZcIkFBQVwiIT09cyYmKHM9XCJBQVwiKSxcInNtYWxsXCIhPT0oYz0oaS5zaXplfHxcInNtYWxsXCIpLnRvTG93ZXJDYXNlKCkpJiZcImxhcmdlXCIhPT1jJiYoYz1cInNtYWxsXCIpLG89e2xldmVsOnMsc2l6ZTpjfSkubGV2ZWwrby5zaXplKXtjYXNlXCJBQXNtYWxsXCI6Y2FzZVwiQUFBbGFyZ2VcIjpyPWw+PTQuNTticmVhaztjYXNlXCJBQWxhcmdlXCI6cj1sPj0zO2JyZWFrO2Nhc2VcIkFBQXNtYWxsXCI6cj1sPj03fXJldHVybiByfSxuLm1vc3RSZWFkYWJsZT1mdW5jdGlvbihlLHQsYSl7dmFyIG8scixpLHMsYz1udWxsLGw9MDtyPShhPWF8fHt9KS5pbmNsdWRlRmFsbGJhY2tDb2xvcnMsaT1hLmxldmVsLHM9YS5zaXplO2Zvcih2YXIgZD0wO2Q8dC5sZW5ndGg7ZCsrKShvPW4ucmVhZGFiaWxpdHkoZSx0W2RdKSk+bCYmKGw9byxjPW4odFtkXSkpO3JldHVybiBuLmlzUmVhZGFibGUoZSxjLHtsZXZlbDppLHNpemU6c30pfHwhcj9jOihhLmluY2x1ZGVGYWxsYmFja0NvbG9ycz0hMSxuLm1vc3RSZWFkYWJsZShlLFtcIiNmZmZcIixcIiMwMDBcIl0sYSkpfTt2YXIgZj1uLm5hbWVzPXthbGljZWJsdWU6XCJmMGY4ZmZcIixhbnRpcXVld2hpdGU6XCJmYWViZDdcIixhcXVhOlwiMGZmXCIsYXF1YW1hcmluZTpcIjdmZmZkNFwiLGF6dXJlOlwiZjBmZmZmXCIsYmVpZ2U6XCJmNWY1ZGNcIixiaXNxdWU6XCJmZmU0YzRcIixibGFjazpcIjAwMFwiLGJsYW5jaGVkYWxtb25kOlwiZmZlYmNkXCIsYmx1ZTpcIjAwZlwiLGJsdWV2aW9sZXQ6XCI4YTJiZTJcIixicm93bjpcImE1MmEyYVwiLGJ1cmx5d29vZDpcImRlYjg4N1wiLGJ1cm50c2llbm5hOlwiZWE3ZTVkXCIsY2FkZXRibHVlOlwiNWY5ZWEwXCIsY2hhcnRyZXVzZTpcIjdmZmYwMFwiLGNob2NvbGF0ZTpcImQyNjkxZVwiLGNvcmFsOlwiZmY3ZjUwXCIsY29ybmZsb3dlcmJsdWU6XCI2NDk1ZWRcIixjb3Juc2lsazpcImZmZjhkY1wiLGNyaW1zb246XCJkYzE0M2NcIixjeWFuOlwiMGZmXCIsZGFya2JsdWU6XCIwMDAwOGJcIixkYXJrY3lhbjpcIjAwOGI4YlwiLGRhcmtnb2xkZW5yb2Q6XCJiODg2MGJcIixkYXJrZ3JheTpcImE5YTlhOVwiLGRhcmtncmVlbjpcIjAwNjQwMFwiLGRhcmtncmV5OlwiYTlhOWE5XCIsZGFya2toYWtpOlwiYmRiNzZiXCIsZGFya21hZ2VudGE6XCI4YjAwOGJcIixkYXJrb2xpdmVncmVlbjpcIjU1NmIyZlwiLGRhcmtvcmFuZ2U6XCJmZjhjMDBcIixkYXJrb3JjaGlkOlwiOTkzMmNjXCIsZGFya3JlZDpcIjhiMDAwMFwiLGRhcmtzYWxtb246XCJlOTk2N2FcIixkYXJrc2VhZ3JlZW46XCI4ZmJjOGZcIixkYXJrc2xhdGVibHVlOlwiNDgzZDhiXCIsZGFya3NsYXRlZ3JheTpcIjJmNGY0ZlwiLGRhcmtzbGF0ZWdyZXk6XCIyZjRmNGZcIixkYXJrdHVycXVvaXNlOlwiMDBjZWQxXCIsZGFya3Zpb2xldDpcIjk0MDBkM1wiLGRlZXBwaW5rOlwiZmYxNDkzXCIsZGVlcHNreWJsdWU6XCIwMGJmZmZcIixkaW1ncmF5OlwiNjk2OTY5XCIsZGltZ3JleTpcIjY5Njk2OVwiLGRvZGdlcmJsdWU6XCIxZTkwZmZcIixmaXJlYnJpY2s6XCJiMjIyMjJcIixmbG9yYWx3aGl0ZTpcImZmZmFmMFwiLGZvcmVzdGdyZWVuOlwiMjI4YjIyXCIsZnVjaHNpYTpcImYwZlwiLGdhaW5zYm9ybzpcImRjZGNkY1wiLGdob3N0d2hpdGU6XCJmOGY4ZmZcIixnb2xkOlwiZmZkNzAwXCIsZ29sZGVucm9kOlwiZGFhNTIwXCIsZ3JheTpcIjgwODA4MFwiLGdyZWVuOlwiMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCJhZGZmMmZcIixncmV5OlwiODA4MDgwXCIsaG9uZXlkZXc6XCJmMGZmZjBcIixob3RwaW5rOlwiZmY2OWI0XCIsaW5kaWFucmVkOlwiY2Q1YzVjXCIsaW5kaWdvOlwiNGIwMDgyXCIsaXZvcnk6XCJmZmZmZjBcIixraGFraTpcImYwZTY4Y1wiLGxhdmVuZGVyOlwiZTZlNmZhXCIsbGF2ZW5kZXJibHVzaDpcImZmZjBmNVwiLGxhd25ncmVlbjpcIjdjZmMwMFwiLGxlbW9uY2hpZmZvbjpcImZmZmFjZFwiLGxpZ2h0Ymx1ZTpcImFkZDhlNlwiLGxpZ2h0Y29yYWw6XCJmMDgwODBcIixsaWdodGN5YW46XCJlMGZmZmZcIixsaWdodGdvbGRlbnJvZHllbGxvdzpcImZhZmFkMlwiLGxpZ2h0Z3JheTpcImQzZDNkM1wiLGxpZ2h0Z3JlZW46XCI5MGVlOTBcIixsaWdodGdyZXk6XCJkM2QzZDNcIixsaWdodHBpbms6XCJmZmI2YzFcIixsaWdodHNhbG1vbjpcImZmYTA3YVwiLGxpZ2h0c2VhZ3JlZW46XCIyMGIyYWFcIixsaWdodHNreWJsdWU6XCI4N2NlZmFcIixsaWdodHNsYXRlZ3JheTpcIjc4OVwiLGxpZ2h0c2xhdGVncmV5OlwiNzg5XCIsbGlnaHRzdGVlbGJsdWU6XCJiMGM0ZGVcIixsaWdodHllbGxvdzpcImZmZmZlMFwiLGxpbWU6XCIwZjBcIixsaW1lZ3JlZW46XCIzMmNkMzJcIixsaW5lbjpcImZhZjBlNlwiLG1hZ2VudGE6XCJmMGZcIixtYXJvb246XCI4MDAwMDBcIixtZWRpdW1hcXVhbWFyaW5lOlwiNjZjZGFhXCIsbWVkaXVtYmx1ZTpcIjAwMDBjZFwiLG1lZGl1bW9yY2hpZDpcImJhNTVkM1wiLG1lZGl1bXB1cnBsZTpcIjkzNzBkYlwiLG1lZGl1bXNlYWdyZWVuOlwiM2NiMzcxXCIsbWVkaXVtc2xhdGVibHVlOlwiN2I2OGVlXCIsbWVkaXVtc3ByaW5nZ3JlZW46XCIwMGZhOWFcIixtZWRpdW10dXJxdW9pc2U6XCI0OGQxY2NcIixtZWRpdW12aW9sZXRyZWQ6XCJjNzE1ODVcIixtaWRuaWdodGJsdWU6XCIxOTE5NzBcIixtaW50Y3JlYW06XCJmNWZmZmFcIixtaXN0eXJvc2U6XCJmZmU0ZTFcIixtb2NjYXNpbjpcImZmZTRiNVwiLG5hdmFqb3doaXRlOlwiZmZkZWFkXCIsbmF2eTpcIjAwMDA4MFwiLG9sZGxhY2U6XCJmZGY1ZTZcIixvbGl2ZTpcIjgwODAwMFwiLG9saXZlZHJhYjpcIjZiOGUyM1wiLG9yYW5nZTpcImZmYTUwMFwiLG9yYW5nZXJlZDpcImZmNDUwMFwiLG9yY2hpZDpcImRhNzBkNlwiLHBhbGVnb2xkZW5yb2Q6XCJlZWU4YWFcIixwYWxlZ3JlZW46XCI5OGZiOThcIixwYWxldHVycXVvaXNlOlwiYWZlZWVlXCIscGFsZXZpb2xldHJlZDpcImRiNzA5M1wiLHBhcGF5YXdoaXA6XCJmZmVmZDVcIixwZWFjaHB1ZmY6XCJmZmRhYjlcIixwZXJ1OlwiY2Q4NTNmXCIscGluazpcImZmYzBjYlwiLHBsdW06XCJkZGEwZGRcIixwb3dkZXJibHVlOlwiYjBlMGU2XCIscHVycGxlOlwiODAwMDgwXCIscmViZWNjYXB1cnBsZTpcIjY2MzM5OVwiLHJlZDpcImYwMFwiLHJvc3licm93bjpcImJjOGY4ZlwiLHJveWFsYmx1ZTpcIjQxNjllMVwiLHNhZGRsZWJyb3duOlwiOGI0NTEzXCIsc2FsbW9uOlwiZmE4MDcyXCIsc2FuZHlicm93bjpcImY0YTQ2MFwiLHNlYWdyZWVuOlwiMmU4YjU3XCIsc2Vhc2hlbGw6XCJmZmY1ZWVcIixzaWVubmE6XCJhMDUyMmRcIixzaWx2ZXI6XCJjMGMwYzBcIixza3libHVlOlwiODdjZWViXCIsc2xhdGVibHVlOlwiNmE1YWNkXCIsc2xhdGVncmF5OlwiNzA4MDkwXCIsc2xhdGVncmV5OlwiNzA4MDkwXCIsc25vdzpcImZmZmFmYVwiLHNwcmluZ2dyZWVuOlwiMDBmZjdmXCIsc3RlZWxibHVlOlwiNDY4MmI0XCIsdGFuOlwiZDJiNDhjXCIsdGVhbDpcIjAwODA4MFwiLHRoaXN0bGU6XCJkOGJmZDhcIix0b21hdG86XCJmZjYzNDdcIix0dXJxdW9pc2U6XCI0MGUwZDBcIix2aW9sZXQ6XCJlZTgyZWVcIix3aGVhdDpcImY1ZGViM1wiLHdoaXRlOlwiZmZmXCIsd2hpdGVzbW9rZTpcImY1ZjVmNVwiLHllbGxvdzpcImZmMFwiLHllbGxvd2dyZWVuOlwiOWFjZDMyXCJ9LFM9bi5oZXhOYW1lcz1mdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIGEgaW4gZSllLmhhc093blByb3BlcnR5KGEpJiYodFtlW2FdXT1hKTtyZXR1cm4gdH0oZik7ZnVuY3Rpb24gdihlKXtyZXR1cm4gZT1wYXJzZUZsb2F0KGUpLChpc05hTihlKXx8ZTwwfHxlPjEpJiYoZT0xKSxlfWZ1bmN0aW9uIFAoZSx0KXsoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIuXCIpJiYxPT09cGFyc2VGbG9hdChlKX0pKGUpJiYoZT1cIjEwMCVcIik7dmFyIGE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIlXCIpfShlKTtyZXR1cm4gZT1NYXRoLm1pbih0LE1hdGgubWF4KDAscGFyc2VGbG9hdChlKSkpLGEmJihlPXBhcnNlSW50KGUqdCwxMCkvMTAwKSxNYXRoLmFicyhlLXQpPDFlLTY/MTplJXQvcGFyc2VGbG9hdCh0KX1mdW5jdGlvbiBDKGUpe3JldHVybiBNYXRoLm1pbigxLE1hdGgubWF4KDAsZSkpfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTYpfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIDE9PWUubGVuZ3RoP1wiMFwiK2U6XCJcIitlfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIGU8PTEmJihlPTEwMCplK1wiJVwiKSxlfWZ1bmN0aW9uIEEoZSl7cmV0dXJuIE1hdGgucm91bmQoMjU1KnBhcnNlRmxvYXQoZSkpLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBXKGUpe3JldHVybiBNKGUpLzI1NX12YXIgRCxULEIsUj0oVD1cIltcXFxcc3xcXFxcKF0rKFwiKyhEPVwiKD86Wy1cXFxcK10/XFxcXGQqXFxcXC5cXFxcZCslPyl8KD86Wy1cXFxcK10/XFxcXGQrJT8pXCIpK1wiKVssfFxcXFxzXSsoXCIrRCtcIilbLHxcXFxcc10rKFwiK0QrXCIpXFxcXHMqXFxcXCk/XCIsQj1cIltcXFxcc3xcXFxcKF0rKFwiK0QrXCIpWyx8XFxcXHNdKyhcIitEK1wiKVssfFxcXFxzXSsoXCIrRCtcIilbLHxcXFxcc10rKFwiK0QrXCIpXFxcXHMqXFxcXCk/XCIse0NTU19VTklUOm5ldyBSZWdFeHAoRCkscmdiOm5ldyBSZWdFeHAoXCJyZ2JcIitUKSxyZ2JhOm5ldyBSZWdFeHAoXCJyZ2JhXCIrQiksaHNsOm5ldyBSZWdFeHAoXCJoc2xcIitUKSxoc2xhOm5ldyBSZWdFeHAoXCJoc2xhXCIrQiksaHN2Om5ldyBSZWdFeHAoXCJoc3ZcIitUKSxoc3ZhOm5ldyBSZWdFeHAoXCJoc3ZhXCIrQiksaGV4MzovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8saGV4NjovXiM/KFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC8saGV4NDovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KSQvLGhleDg6L14jPyhbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkL30pO2Z1bmN0aW9uIEUoZSl7cmV0dXJuISFSLkNTU19VTklULmV4ZWMoZSl9cmV0dXJuIG59KCl9fSxuPXt9O2Z1bmN0aW9uIG8oZSl7dmFyIHQ9bltlXTtpZih2b2lkIDAhPT10KXJldHVybiB0LmV4cG9ydHM7dmFyIHI9bltlXT17ZXhwb3J0czp7fX07cmV0dXJuIGFbZV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsbyksci5leHBvcnRzfXZhciByPXt9OygoKT0+e3ZhciBlPXI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5jcmVhdGVUaGVtZT1lLlBhbGV0dGU9ZS5Db2xvcj12b2lkIDA7dmFyIHQ9bygyMzE3KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkNvbG9yXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuQ29sb3J9fSk7dmFyIGE9byg1OTM5KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlBhbGV0dGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5QYWxldHRlfX0pO3ZhciBuPW8oNjg5Myk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJjcmVhdGVUaGVtZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZVRoZW1lfX0pfSkoKTt2YXIgaT10O2Zvcih2YXIgcyBpbiByKWlbc109cltzXTtyLl9fZXNNb2R1bGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSw4Nzc6KCk9Pnt9LDY3OigpPT57fX0sdD17fTtmdW5jdGlvbiBhKG4pe3ZhciBvPXRbbl07aWYodm9pZCAwIT09bylyZXR1cm4gby5leHBvcnRzO3ZhciByPXRbbl09e2V4cG9ydHM6e319O3JldHVybiBlW25dKHIsci5leHBvcnRzLGEpLHIuZXhwb3J0c31hLm49ZT0+e3ZhciB0PWUmJmUuX19lc01vZHVsZT8oKT0+ZS5kZWZhdWx0OigpPT5lO3JldHVybiBhLmQodCx7YTp0fSksdH0sYS5kPShlLHQpPT57Zm9yKHZhciBuIGluIHQpYS5vKHQsbikmJiFhLm8oZSxuKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMCxnZXQ6dFtuXX0pfSxhLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLGEucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIG49e307KCgpPT57XCJ1c2Ugc3RyaWN0XCI7YS5yKG4pLGEuZChuLHtBcHBNYW5pZmVzdFR5cGU6KCk9PmwsQm9va21hcmtJdGVtQ29udGV4dE1lbnVPcHRpb25UeXBlOigpPT5mLEJyb3dzZXJCdXR0b25UeXBlOigpPT52LENvbG9yU2NoZW1lT3B0aW9uVHlwZTooKT0+ayxDdXN0b21BY3Rpb25DYWxsZXJUeXBlOigpPT5NLERvY2s6KCk9PnUsRW50ZXJwcmlzZU1haW5Db250ZXh0TWVudU9wdGlvblR5cGU6KCk9PnksR2xvYmFsQ29udGV4dE1lbnVPcHRpb25UeXBlOigpPT5tLFBhZ2VDaGFuZ2VFdmVudFR5cGU6KCk9PmgsUGFnZVRhYkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+YixQYW5lbFBvc2l0aW9uOigpPT5nLFNVUFBPUlRFRF9MQU5HVUFHRVM6KCk9PngsU2F2ZUJ1dHRvbkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+UCxTYXZlTW9kYWxUeXBlOigpPT5JLFZpZXdUYWJNZW51T3B0aW9uVHlwZTooKT0+UyxXaW5kb3dUeXBlOigpPT5DLGdldEN1cnJlbnRTeW5jOigpPT5tbixpbml0OigpPT5Hcyx3cmFwU3luYzooKT0+aG59KTt2YXIgZT17fTthLnIoZSksYS5kKGUse2NyZWF0ZU5hbWVzcGFjZWRMb2NhbFN0b3JhZ2U6KCk9PmZ0LGdldEl0ZW06KCk9PlB0LHJlbW92ZUl0ZW06KCk9PkN0LHNldEl0ZW06KCk9PnZ0fSk7dmFyIHQsbyxyLGkscyxjLGwsZCx1PXt9O2Eucih1KSxhLmQodSx7aW5pdDooKT0+X3R9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLlN1Z2dlc3Rpb249XCJzdWdnZXN0aW9uXCJ9KGl8fChpPXt9KSksZnVuY3Rpb24oZSl7ZS5Db250YWN0PVwiQ29udGFjdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCIsZS5MaXN0PVwiTGlzdFwiLGUuUGxhaW49XCJQbGFpblwiLGUuU2ltcGxlVGV4dD1cIlNpbXBsZVRleHRcIixlLkxvYWRpbmc9XCJMb2FkaW5nXCIsZS5FcnJvcj1cIkVycm9yXCJ9KHN8fChzPXt9KSksZnVuY3Rpb24oZSl7ZS5NdWx0aVNlbGVjdD1cIk11bHRpU2VsZWN0XCJ9KGN8fChjPXt9KSksZnVuY3Rpb24oZSl7ZS5TbmFwc2hvdD1cInNuYXBzaG90XCIsZS5NYW5pZmVzdD1cIm1hbmlmZXN0XCIsZS5WaWV3PVwidmlld1wiLGUuRXh0ZXJuYWw9XCJleHRlcm5hbFwifShsfHwobD17fSkpLGZ1bmN0aW9uKGUpe2UuTGFuZGluZ1BhZ2U9XCJsYW5kaW5nUGFnZVwiLGUuQXBwR3JpZD1cImFwcEdyaWRcIn0oZHx8KGQ9e30pKTt2YXIgcCx3LGcsaCxtLGssYix5LGYsUyx2LFAsQyxNOyFmdW5jdGlvbihlKXtlLlByaW1hcnk9XCJwcmltYXJ5XCIsZS5TZWNvbmRhcnk9XCJzZWNvbmRhcnlcIixlLlRleHRPbmx5PVwidGV4dE9ubHlcIn0ocHx8KHA9e30pKSxmdW5jdGlvbihlKXtlLkFjdGlvbkJ1dHRvbj1cIkFjdGlvbkJ1dHRvblwiLGUuRHJvcGRvd25CdXR0b249XCJEcm9wZG93bkJ1dHRvblwifSh3fHwodz17fSkpLGZ1bmN0aW9uKGUpe2UuTGVmdD1cIkxlZnRcIixlLlJpZ2h0PVwiUmlnaHRcIixlLlRvcD1cIlRvcFwiLGUuQm90dG9tPVwiQm90dG9tXCJ9KGd8fChnPXt9KSksZnVuY3Rpb24oZSl7ZS5VcmxDaGFuZ2U9XCJVUkxfQ0hBTkdFXCIsZS5WaWV3QWRkZWQ9XCJWSUVXX0FEREVEXCIsZS5WaWV3UmVtb3ZlZD1cIlZJRVdfUkVNT1ZFRFwiLGUuUGFnZUNvbnRleHRBZGRlZD1cIlBBR0VfQ09OVEVYVF9BRERFRFwiLGUuUGFnZUNvbnRleHRSZW1vdmVkPVwiUEFHRV9DT05URVhUX1JFTU9WRURcIn0oaHx8KGg9e30pKSxmdW5jdGlvbihlKXtlLk5ld1dpbmRvdz1cIk5ld1dpbmRvd1wiLGUuTmV3UGFnZT1cIk5ld1BhZ2VcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5DbG9zZVdpbmRvdz1cIkNsb3NlV2luZG93XCIsZS5SZXN0b3JlQ2hhbmdlcz1cIlJlc3RvcmVDaGFuZ2VzXCIsZS5TYXZlV29ya3NwYWNlPVwiU2F2ZVdvcmtzcGFjZVwiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5SZW5hbWVXb3Jrc3BhY2U9XCJSZW5hbWVXb3Jrc3BhY2VcIixlLlN3aXRjaFdvcmtzcGFjZT1cIlN3aXRjaFdvcmtzcGFjZVwiLGUuRGVsZXRlV29ya3NwYWNlPVwiRGVsZXRlV29ya3NwYWNlXCIsZS5Eb3dubG9hZHM9XCJEb3dubG9hZHNcIixlLk9wZW5TdG9yZWZyb250PVwiT3BlblN0b3JlZnJvbnRcIixlLk1hbmFnZURlc2t0b3BTaWduYWxzPVwiTWFuYWdlRGVza3RvcFNpZ25hbHNcIixlLkFwcGVhcmFuY2U9XCJBcHBlYXJhbmNlXCIsZS5RdWl0PVwiUXVpdFwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KG18fChtPXt9KSksZnVuY3Rpb24oZSl7ZS5MaWdodD1cImxpZ2h0XCIsZS5EYXJrPVwiZGFya1wiLGUuU3lzdGVtPVwic3lzdGVtXCJ9KGt8fChrPXt9KSksZnVuY3Rpb24oZSl7ZS5DbG9zZT1cIkNsb3NlXCIsZS5EdXBsaWNhdGU9XCJEdXBsaWNhdGVcIixlLlJlbmFtZT1cIlJlbmFtZVwiLGUuU2F2ZT1cIlNhdmVcIixlLlNhdmVBcz1cIlNhdmUgQXNcIixlLk5ld1BhZ2U9XCJOZXcgUGFnZVwiLGUuRGVsZXRlUGFnZT1cIkRlbGV0ZSBQYWdlXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLlJlZnJlc2g9XCJSZWZyZXNoXCIsZS5DbG9zZU90aGVycz1cIkNsb3NlIG90aGVyc1wiLGUuRGVsZXRlPVwiRGVsZXRlXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5NYW5hZ2VEZXNrdG9wU2lnbmFscz1cIk1hbmFnZURlc2t0b3BTaWduYWxzXCIsZS5BZGRUb0NoYW5uZWw9XCJBZGRUb0NoYW5uZWxcIixlLkN1c3RvbT1cIkN1c3RvbVwifShifHwoYj17fSkpLGZ1bmN0aW9uKGUpe2UuTG9jaz1cIkxvY2tcIixlLlNob3dIaWRlVGFicz1cIlNob3dIaWRlVGFic1wiLGUuQWRkVG9DaGFuZWw9XCJBZGRUb0NoYW5uZWxcIixlLk1hbmFnZURlc2t0b3BTaWduYWxzPVwiTWFuYWdlRGVza3RvcFNpZ25hbHNcIixlLlByaW50PVwiUHJpbnRcIixlLlBpbj1cIlBpblwifSh5fHwoeT17fSkpLGZ1bmN0aW9uKGUpe2UuRWRpdE5hbWU9XCJFZGl0IE5hbWVcIixlLk1vdmU9XCJNb3ZlXCIsZS5EZWxldGU9XCJEZWxldGVcIn0oZnx8KGY9e30pKSxmdW5jdGlvbihlKXtlLk5ld1ZpZXc9XCJOZXdWaWV3XCIsZS5EdXBsaWNhdGVWaWV3cz1cIkR1cGxpY2F0ZVZpZXdcIixlLk9wZW5XaXRoRGVmYXVsdEJyb3dzZXI9XCJPcGVuV2l0aERlZmF1bHRCcm93c2VyXCIsZS5SZWxvYWRWaWV3cz1cIlJlbG9hZFRhYlwiLGUuQ2xvc2VWaWV3cz1cIkNsb3NlVGFiXCIsZS5BZGRUb0NoYW5uZWw9XCJBZGRUb0NoYW5uZWxcIixlLlJlbW92ZUZyb21DaGFubmVsPVwiUmVtb3ZlRnJvbUNoYW5uZWxcIixlLkJhY2s9XCJCYWNrXCIsZS5Gb3J3YXJkPVwiRm9yd2FyZFwiLGUuUHJpbnQ9XCJQcmludFwiLGUuUHJpbnRBbGw9XCJQcmludEFsbFwiLGUuUHJpbnRTY3JlZW49XCJQcmludFNjcmVlblwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KFN8fChTPXt9KSksZnVuY3Rpb24oZSl7ZS5TaG93SGlkZVRhYnM9XCJTaG93SGlkZVRhYnNcIixlLkNvbG9yTGlua2luZz1cIkNvbG9yTGlua2luZ1wiLGUuUHJlc2V0TGF5b3V0cz1cIlByZXNldExheW91dHNcIixlLkxvY2tVbmxvY2tQYWdlPVwiTG9ja1VubG9ja1BhZ2VcIixlLlNhdmVNZW51PVwiU2F2ZU1lbnVcIixlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLk1pbmltaXNlPVwiTWluaW1pc2VcIixlLk1heGltaXNlPVwiTWF4aW1pc2VcIixlLkNsb3NlPVwiQ2xvc2VcIixlLkN1c3RvbT1cIkN1c3RvbVwifSh2fHwodj17fSkpLGZ1bmN0aW9uKGUpe2UuU2F2ZVBhZ2U9XCJTYXZlUGFnZVwiLGUuU2F2ZVdvcmtzcGFjZT1cIlNhdmVXb3Jrc3BhY2VcIixlLlNhdmVQYWdlQXM9XCJTYXZlUGFnZUFzXCIsZS5TYXZlV29ya3NwYWNlQXM9XCJTYXZlV29ya3NwYWNlQXNcIixlLkN1c3RvbT1cIkN1c3RvbVwifShQfHwoUD17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cImJyb3dzZXJcIixlLlBsYXRmb3JtPVwicGxhdGZvcm1cIn0oQ3x8KEM9e30pKSxmdW5jdGlvbihlKXtlLkN1c3RvbUJ1dHRvbj1cIkN1c3RvbUJ1dHRvblwiLGUuU3RvcmVDdXN0b21CdXR0b249XCJTdG9yZUN1c3RvbUJ1dHRvblwiLGUuQ3VzdG9tRHJvcGRvd25JdGVtPVwiQ3VzdG9tRHJvcGRvd25JdGVtXCIsZS5HbG9iYWxDb250ZXh0TWVudT1cIkdsb2JhbENvbnRleHRNZW51XCIsZS5WaWV3VGFiQ29udGV4dE1lbnU9XCJWaWV3VGFiQ29udGV4dE1lbnVcIixlLlBhZ2VUYWJDb250ZXh0TWVudT1cIlBhZ2VUYWJDb250ZXh0TWVudVwiLGUuU2F2ZUJ1dHRvbkNvbnRleHRNZW51PVwiU2F2ZUJ1dHRvbkNvbnRleHRNZW51XCIsZS5BUEk9XCJBUElcIn0oTXx8KE09e30pKTtjb25zdCB4PVtcImVuLVVTXCIsXCJqYS1KUFwiLFwiemgtQ05cIixcImtvLUtSXCIsXCJydS1SVVwiLFwiZGUtREVcIixcInpoLUhhbnRcIl07dmFyIEksQTshZnVuY3Rpb24oZSl7ZS5TQVZFX1BBR0U9XCJTQVZFX1BBR0VcIixlLlNBVkVfV09SS1NQQUNFPVwiU0FWRV9XT1JLU1BBQ0VcIixlLlNBVkVfUEFHRV9BUz1cIlNBVkVfUEFHRV9BU1wiLGUuU0FWRV9XT1JLU1BBQ0VfQVM9XCJTQVZFX1dPUktTUEFDRV9BU1wiLGUuUkVOQU1FX1BBR0U9XCJSRU5BTUVfUEFHRVwiLGUuUkVOQU1FX1dPUktTUEFDRT1cIlJFTkFNRV9XT1JLU1BBQ0VcIn0oSXx8KEk9e30pKSxmdW5jdGlvbihlKXtlLkxvY2FsPVwibG9jYWxcIixlLkRldj1cImRldlwiLGUuU3RhZ2luZz1cInN0YWdpbmdcIixlLlByb2Q9XCJwcm9kXCJ9KEF8fChBPXt9KSk7Y29uc3QgVz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluLEQ9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwcm9jZXNzfHxwcm9jZXNzLmVudixcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSxUPUQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBpbmRleGVkREIsQj1EP3dpbmRvdy5vcmlnaW46QS5Mb2NhbCxSPVcmJmZpbi5tZS51dWlkLEU9VyYmZmluLm1lLm5hbWUsRj1XJiZmaW4ubWUuZW50aXR5VHlwZSxWPShBLkxvY2FsLEEuRGV2LEEuU3RhZ2luZyxcInByb2RcIj09PUEuUHJvZCksTj1lPT5lLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpfHxlLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKT9lOkIrZSxMPU4oXCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMi4zLjI1XCIpLF89TihcImh0dHBzOi8vd29ya3NwYWNlLm9wZW5maW4uY28vd29ya3NwYWNlLzIyLjMuMjVcIiksVT0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmTihXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZOKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiNDIuMTM4LjEwMi40XCIpLE89XCIyMi4zLjI1XCI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9CVUlMRF9TSEEmJldPUktTUEFDRV9CVUlMRF9TSEE7dmFyIEcsSDshZnVuY3Rpb24oZSl7ZS5Ib21lPVwiL2hvbWUvXCIsZS5Ib21lU2VhcmNoPVwiL2hvbWUvP2RlZXBsaW5rPXNlYXJjaFwiLGUuSG9tZVBhZ2VzUmVuYW1lPVwiL2hvbWUvcGFnZXMvcmVuYW1lL1wiLGUuRG9jaz1cIi9kb2NrL1wiLGUuRG9jcz1cIi9wcm92aWRlci9kb2NzL1wiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250L1wiLGUuRGVwcmVjYXRlZEFsZXJ0PVwiL3Byb3ZpZGVyL2RlcHJlY2F0ZWQtYWxlcnQvXCIsZS5BbmFseXRpY3M9XCIvcHJvdmlkZXIvYW5hbHl0aWNzL1wiLGUuUHJvdmlkZXI9XCIvcHJvdmlkZXIvXCJ9KEd8fChHPXt9KSksZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiL2Jyb3dzZXIvXCIsZS5Ccm93c2VyUG9wdXBNZW51PVwiL3BvcHVwLW1lbnUvXCIsZS5Ccm93c2VyUG9wdXBNZW51U2F2ZU1vZGFsPVwiL3BvcHVwLW1lbnUvc2F2ZS1tb2RhbC9cIixlLkJyb3dzZXJQb3B1cE1lbnVMYXlvdXRzPVwiL3BvcHVwLW1lbnUvbGF5b3V0cy9sYXlvdXRzL1wiLGUuQnJvd3NlclBvcHVwTWVudUNvbG9yTGlua2luZz1cIi9wb3B1cC1tZW51L2NvbG9yLWxpbmtpbmcvY29sb3ItbGlua2luZy9cIixlLkJyb3dzZXJJbmRpY2F0b3I9XCIvaW5kaWNhdG9yL1wiLGUuQnJvd3NlclBvcHVwTWVudUFkZHJlc3NTZWFyY2hSZXN1bHRzVmlldz1cIi9wb3B1cC1tZW51L2FkZHJlc3Mtc2VhcmNoLXJlc3VsdHMtdmlldy9cIixlLlJlc3BvbnNlTW9kYWw9XCIvcG9wdXAtbWVudS9yZXNwb25zZS1tb2RhbC9cIixlLkNsb3NlQ29uZmlybWF0aW9uTW9kYWw9XCIvcG9wdXAtbWVudS9jbG9zZS1jb25maXJtYXRpb24tbW9kYWwvXCIsZS5FbnRlcnByaXNlQnJvd3Nlcj1cIi9lbnRlcnByaXNlL1wiLGUuRW50ZXJwcmlzZUxhbmRpbmdQYWdlPVwiL2VudGVycHJpc2UvbGFuZGluZy9cIixlLkVudGVycHJpc2VDb250ZXh0TWVudT1cIi9jb250ZXh0LW1lbnUvXCIsZS5FbnRlcnByaXNlQm9va21hcmtEaWFsb2c9XCIvYm9va21hcmstZGlhbG9nL1wiLGUuRW50ZXJwcmlzZUFib3V0UGFnZT1cIi9wb3B1cC1tZW51L2Fib3V0L1wiLGUuRHJvcGRvd25NZW51PVwiL2Ryb3Bkb3duLW1lbnUvXCIsZS5FbnRlcnByaXNlRG9jaz1cIi9kb2NrL1wiLGUuWm9vbUNvbnRyb2xzRGlhbG9nPVwiL3pvb20tY29udHJvbHMtZGlhbG9nL1wiLGUuRGVza3RvcFNpZ25hbHNNb2RhbD1cIi9wb3B1cC1tZW51L2Rlc2t0b3Atc2lnbmFscy1tb2RhbC9cIn0oSHx8KEg9e30pKTtjb25zdCAkPXsuLi5HLC4uLkh9O3ZhciBLOyFmdW5jdGlvbihlKXtlLlNlYXJjaD1cInNlYXJjaFwifShLfHwoSz17fSkpO2NvbnN0IHo9JDthc3luYyBmdW5jdGlvbiBKKCl7Y29uc3QgZT1cImdldE1hbmlmZXN0T3ZlcnJpZGVzXCIse21hbmlmZXN0OnQsaW5pdGlhbE9wdGlvbnM6YX09YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0SW5mbygpO3JldHVybiB0Py5wbGF0Zm9ybS53b3Jrc3BhY2V8fHQ/LnBsYXRmb3JtLmhvbWV8fGE/LndvcmtzcGFjZXx8YT8uaG9tZXx8Y29uc29sZS53YXJuKGAke2V9OiBNaXNzaW5nIEhvbWUgZGV2ZWxvcG1lbnQgbWFuaWZlc3Qgb3ZlcnJpZGVzLCB1c2luZyBEZXNrdG9wIE93bmVyIFNldHRpbmdzLmApLHQ/LnBsYXRmb3JtLndvcmtzcGFjZT8oSlNPTi5zdHJpbmdpZnkodD8ucGxhdGZvcm0ud29ya3NwYWNlKSx0Py5wbGF0Zm9ybS53b3Jrc3BhY2UpOnQ/LnBsYXRmb3JtLmhvbWU/KEpTT04uc3RyaW5naWZ5KHQ/LnBsYXRmb3JtLmhvbWUpLHQ/LnBsYXRmb3JtLmhvbWUpOmE/LndvcmtzcGFjZT8oSlNPTi5zdHJpbmdpZnkoYT8ud29ya3NwYWNlKSxhPy53b3Jrc3BhY2UpOmE/LmhvbWU/KEpTT04uc3RyaW5naWZ5KGE/LmhvbWUpLGE/LmhvbWUpOnt9fWNvbnN0IFo9ZT0+ZmluLlN5c3RlbS5nZXRTeXN0ZW1BcHBDb25maWcoZSk7YXN5bmMgZnVuY3Rpb24gcSgpe2NvbnN0IGU9XCJnZXRET1NPdmVycmlkZXNcIjtpZighVylyZXR1cm4gY29uc29sZS53YXJuKGAke2V9OiB0aGUgZmluIEFQSSB3YXMgbm90IGF2YWlsYWJsZSwgcmV0dXJuaW5nIG5vIHJlc3VsdGApLHt9O3RyeXtsZXQgdD1hd2FpdCBaKFwid29ya3NwYWNlXCIpLmNhdGNoKCh0PT57Y29uc29sZS53YXJuKGAke2V9OiBjdXN0b21Db25maWcgZW50cnkgZm9yIFN5c3RlbUFwcCB3b3Jrc3BhY2Ugbm90IGF2YWlsYWJsZSBpbiBEZXNrdG9wIE93bmVyIFNldHRpbmdzLiAke3Q/Lm1lc3NhZ2V9YCl9KSk7cmV0dXJuIHR8fCh0PWF3YWl0IFooXCJob21lXCIpKSxKU09OLnN0cmluZ2lmeSh0KSx0fWNhdGNoKHQpe2lmKCFWKXJldHVybnt9O2lmKCEodCBpbnN0YW5jZW9mIEVycm9yKSl0aHJvdyB0O2NvbnNvbGUud2FybihgJHtlfTogTWlzc2luZyBXb3Jrc3BhY2UgRGVza3RvcCBPd25lciBTZXR0aW5ncyBjb25maWd1cmF0aW9uLCB1c2luZyBkZWZhdWx0cy4gJHt0Py5tZXNzYWdlfWApfXJldHVybnt9fWxldCBqLFE7YXN5bmMgZnVuY3Rpb24gWSgpe2lmKGopcmV0dXJuIGo7Y29uc3QgZT1cImdldE92ZXJyaWRlc1wiO2lmKCFXKXJldHVybiBEJiZjb25zb2xlLndhcm4oYCR7ZX06IFRoZSBGaW4gQVBJIHdhcyBub3QgYXZhaWxhYmxlLiBSZXR1cm5pbmcgYW4gZW1wdHkgcmVzdWx0LmApLHt9O2NvbnN0W3QsYV09YXdhaXQgUHJvbWlzZS5hbGwoW3EoKSxKKCldKTtyZXR1cm4gaj17Li4uYSwuLi50LGRpc2FibGVSdW50aW1lVmFsaWRhdGlvbjphLmRpc2FibGVSdW50aW1lVmFsaWRhdGlvbnx8dC5kaXNhYmxlUnVudGltZVZhbGlkYXRpb259LGp9ZnVuY3Rpb24gWChlKXtRPWV9Y29uc3QgZWU9ZT0+ZS5yZXBsYWNlKC9cXC8kLyxcIlwiKTthc3luYyBmdW5jdGlvbiB0ZSgpe2NvbnN0IGU9KGF3YWl0IFkoKSkuYnJvd3NlckJhc2VVcmw7aWYoZSl0cnl7Y29uc3QgdD1uZXcgVVJMKGUpO2lmKHQucGF0aG5hbWUuZW5kc1dpdGgoXCIvXCIpKXQucGF0aG5hbWU9ZWUodC5wYXRobmFtZSk7ZWxzZXtpZihcIi93b3Jrc3BhY2VcIj09PXQucGF0aG5hbWUpcmV0dXJuIHQucGF0aG5hbWUrPWAvJHtPfWAsdC50b1N0cmluZygpO2NvbnNvbGUud2FybihgQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtOiBicm93c2VyT3ZlcnJpZGVCYXNlVXJsIG11c3QgYmUgYSB2YWxpZCB1cmwsIHdpdGggcGF0aDogL3dvcmtzcGFjZS4gRXhwZWN0ZWQgPHByb3RvY29sPjovLzxvcHRpb25hbCBzdWJkb21haW4+Ljxkb21haW4+L3dvcmtzcGFjZSBidXQgZ290ICR7ZX1gKX19Y2F0Y2godCl7Y29uc29sZS53YXJuKGBAb3BlbmZpbi93b3Jrc3BhY2UtcGxhdGZvcm06IGJyb3dzZXJPdmVycmlkZUJhc2VVcmwgbXVzdCBiZSBhIHZhbGlkIHVybC4gRXhwZWN0ZWQgPHByb3RvY29sPjovLzxvcHRpb25hbCBzdWJkb21haW4+Ljxkb21haW4+L3dvcmtzcGFjZSBidXQgZ290ICR7ZX1gKX1yZXR1cm4gUT8/X31hc3luYyBmdW5jdGlvbiBhZShlPSExKXtjb25zdCB0PWF3YWl0IHRlKCkrei5Ccm93c2VyO3JldHVybiBlP3Q6ZWUodCl9YXN5bmMgZnVuY3Rpb24gbmUoZT0hMSl7Y29uc3QgdD1hd2FpdCB0ZSgpK3ouRW50ZXJwcmlzZUJyb3dzZXI7cmV0dXJuIGU/dDplZSh0KX1hc3luYyBmdW5jdGlvbiBvZSgpe3JldHVybiBhd2FpdCBuZSgpK1wiL2xhbmRpbmcvXCJ9Y29uc3QgcmU9YXN5bmMoZSx0PSExKT0+ZT9uZSh0KTphZSh0KSxpZT01NixzZT03MjgsY2U9MTUwLGxlPVwiZG9jazNcIixkZT1lPT57Y29uc3QgdD1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluJiZmaW4ubWUuaWRlbnRpdHkudXVpZDtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJVVUlEIGlzIHJlcXVpcmVkIHRvIGdldCB0aGUgRG9jazMgY2hhbm5lbCBuYW1lLlwiKTtyZXR1cm5gJHt0fS1kb2NrM2B9O3ZhciB1ZSxwZTshZnVuY3Rpb24oZSl7ZS5Xb3Jrc3BhY2U9XCJvcGVuZmluLXdvcmtzcGFjZVwiLGUuT2xkV29ya3NwYWNlPVwib3BlbmZpbi1icm93c2VyXCJ9KHVlfHwodWU9e30pKSxmdW5jdGlvbihlKXtlLkZpblByb3RvY29sPVwiZmluLXByb3RvY29sXCJ9KHBlfHwocGU9e30pKTtjb25zdCB3ZT17dXVpZDpSfSxnZT0odWUuV29ya3NwYWNlLGU9PntpZighVyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRBcHBsaWNhdGlvbiBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIGZpbi5BcHBsaWNhdGlvbi53cmFwU3luYyhlKX0pLGhlPSgpPT5nZSh3ZSk7dmFyIG1lOyFmdW5jdGlvbihlKXtlLkhvbWU9XCJvcGVuZmluLWhvbWVcIixlLkRvY2s9XCJvcGVuZmluLWRvY2tcIixlLlN0b3JlZnJvbnQ9XCJvcGVuZmluLXN0b3JlZnJvbnRcIixlLkhvbWVJbnRlcm5hbD1cIm9wZW5maW4taG9tZS1pbnRlcm5hbFwiLGUuQnJvd3Nlck1lbnU9XCJvcGVuZmluLWJyb3dzZXItbWVudVwiLGUuQnJvd3NlclNhdmVNZW51PVwib3BlbmZpbi1icm93c2VyLXNhdmUtbWVudVwiLGUuRG9ja1NhdmVXb3Jrc3BhY2VNZW51PVwib3BlbmZpbi1kb2NrMy1zYXZlLXdvcmtzcGFjZS1tZW51XCIsZS5Ccm93c2VySW5kaWNhdG9yPVwib3BlbmZpbi1icm93c2VyLWluZGljYXRvclwiLGUuQnJvd3NlcldpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC13aW5kb3dcIixlLkNsYXNzaWNXaW5kb3c9XCJpbnRlcm5hbC1nZW5lcmF0ZWQtY2xhc3NpYy13aW5kb3dcIixlLkVudGVycHJpc2VDb250ZXh0TWVudT1cIm9wZW5maW4tZW50ZXJwcmlzZS1jb250ZXh0LW1lbnVcIixlLkJyb3dzZXJBZGRyZXNzU2VhcmNoUHJlZml4PVwib3BlbmZpbi1icm93c2VyLW1lbnUtYWRkcmVzcy1zZWFyY2gtXCIsZS5FbnRlcnByaXNlQm9va21hcmtEaWFsb2dXaW5kb3c9XCJvcGVuZmluLWVudGVycHJpc2UtYm9va21hcmstZGlhbG9nXCIsZS5Ecm9wZG93bk1lbnU9XCJvcGVuZmluLWVudGVycHJpc2UtZHJvcGRvd24tbWVudVwiLGUuRG9ja0NvbXBhbmlvbj1cIm9wZW5maW4tZG9jay1jb21wYW5pb25cIixlLkFJQ29tcGFuaW9uUHJlZml4PVwib3BlbmZpbi1haS1jb21wYW5pb24tXCIsZS5VcGRhdGVWZXJzaW9uTW9kYWw9XCJoZXJlLXVwZGF0ZS12ZXJzaW9uLW1vZGFsXCIsZS5ab29tQ29udHJvbHNEaWFsb2c9XCJoZXJlLXpvb20tY29udHJvbHMtZGlhbG9nXCIsZS5BYm91dFBhZ2VXaW5kb3c9XCJoZXJlLWFib3V0LXBhZ2VcIixlLkRlc2t0b3BTaWduYWxzTW9kYWw9XCJoZXJlLWRlc2t0b3Atc2lnbmFscy1tb2RhbFwifShtZXx8KG1lPXt9KSk7Y29uc3Qga2U9ZT0+KHtsZWZ0OihlLmxlZnQrKGUucmlnaHQ/P2UubGVmdCtlLndpZHRoKSkvMix0b3A6KGUudG9wKyhlLmJvdHRvbT8/ZS50b3ArZS5oZWlnaHQpKS8yfSksYmU9KGUsdCk9Pntjb25zdCBhPXQud2lkdGgvMixuPXQuaGVpZ2h0LzI7cmV0dXJue2xlZnQ6TWF0aC5yb3VuZChlLmxlZnQtYSksdG9wOk1hdGgucm91bmQoZS50b3Atbiksd2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9fTtmdW5jdGlvbiB5ZShlKXtpZighVyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRPRldpbmRvdyBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gZW52LiBBdm9pZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLldpbmRvdy53cmFwU3luYyhlKX1jb25zdCBmZT17bmFtZTpFLHV1aWQ6Un07bWUuSG9tZSx1ZS5Xb3Jrc3BhY2UsbWUuRG9jayx1ZS5Xb3Jrc3BhY2U7Y29uc3QgU2U9e25hbWU6bWUuU3RvcmVmcm9udCx1dWlkOnVlLldvcmtzcGFjZX07dWUuV29ya3NwYWNlLHVlLldvcmtzcGFjZTthc3luYyBmdW5jdGlvbiB2ZShlKXtjb25zdCB0PXllKGUpO1wibWluaW1pemVkXCI9PT1hd2FpdCB0LmdldFN0YXRlKCkmJmF3YWl0IHQucmVzdG9yZSgpLGF3YWl0IHQuc2hvdygpLGF3YWl0IHQuc2V0QXNGb3JlZ3JvdW5kKCl9Y29uc3QgUGU9YXN5bmMgZT0+e3RyeXtjb25zdCB0PWF3YWl0IGZpbi5XaW5kb3cud3JhcFN5bmMoe25hbWU6ZS5uYW1lLHV1aWQ6ZS51dWlkPz9maW4ubWUudXVpZH0pLmdldE9wdGlvbnMoKTtyZXR1cm4oXCJicm93c2VyXCI9PT10LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlfHxcImVudGVycHJpc2VcIj09PXQud29ya3NwYWNlUGxhdGZvcm0/LndpbmRvd1R5cGUpJiZ0LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlc31jYXRjaChlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiaXNCcm93c2VyV2luZG93IGVycm9yOiBcIixlKSwhMX19O2FzeW5jIGZ1bmN0aW9uIENlKCl7Y29uc3QgZT1hd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSx0PWF3YWl0IFByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT5QZShlLmlkZW50aXR5KSkpKTtyZXR1cm4gZS5maWx0ZXIoKChlLGEpPT50W2FdKSl9YXN5bmMgZnVuY3Rpb24gTWUoKXtyZXR1cm4oYXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0Q2hpbGRXaW5kb3dzKCkpLmZpbHRlcigoZT0+ZS5pZGVudGl0eS5uYW1lLnN0YXJ0c1dpdGgobWUuQnJvd3Nlck1lbnUpKSl9Y29uc3QgeGU9ZT0+eWUoZSkuZ2V0SW5mbygpLnRoZW4oKCgpPT4hMCkpLmNhdGNoKCgoKT0+ITEpKSxJZT0oKT0+eGUoU2UpO2Z1bmN0aW9uIEFlKGUsdCl7Y29uc3QgYT1lLnRvcCxuPWUubGVmdCxvPWUudG9wK2UuaGVpZ2h0LHI9ZS5sZWZ0K2Uud2lkdGgsaT10Lm1vbml0b3JSZWN0LnRvcCxzPXQubW9uaXRvclJlY3QubGVmdCxjPXQubW9uaXRvclJlY3QuYm90dG9tLGw9dC5tb25pdG9yUmVjdC5yaWdodDtpZihhPmN8fG88aXx8bj5sfHxyPHMpcmV0dXJuIDA7Y29uc3QgZD1NYXRoLm1heChhLGkpLHU9TWF0aC5tYXgobixzKTtyZXR1cm4oTWF0aC5taW4obyxjKS1kKSooTWF0aC5taW4ocixsKS11KS8oZS5oZWlnaHQqZS53aWR0aCl9YXN5bmMgZnVuY3Rpb24gV2UoZSl7Y29uc3QgdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCk7cmV0dXJuW3QucHJpbWFyeU1vbml0b3IsLi4udC5ub25QcmltYXJ5TW9uaXRvcnNdLnJlZHVjZSgoKHQsYSk9Pntjb25zdCBuPUFlKGUsYSk7cmV0dXJuIG4+dC5wZXJjZW50YWdlP3twZXJjZW50YWdlOm4sbW9uaXRvcjphfTp0fSkse3BlcmNlbnRhZ2U6MCxtb25pdG9yOnQucHJpbWFyeU1vbml0b3J9KS5tb25pdG9yfWNvbnN0IERlPShlLHQpPT57Y29uc3QgYT1lO3JldHVybiBhLndvcmtzcGFjZVBsYXRmb3JtfHwoYS53b3Jrc3BhY2VQbGF0Zm9ybT17fSksYS53b3Jrc3BhY2VQbGF0Zm9ybS5faW50ZXJuYWxEZWZlclNob3dPcHRpb25zPXtzZXRBc0ZvcmVncm91bmQ6ISF0LGRlZmVyU2hvd0VuYWJsZWQ6ITAsYXV0b1Nob3c6YS53b3Jrc3BhY2VQbGF0Zm9ybT8uX2ludGVybmFsQXV0b1Nob3d8fGEud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM/LmF1dG9TaG93fHx2b2lkIDA9PT1hLmF1dG9TaG93fHxhLmF1dG9TaG93fSxhLmF1dG9TaG93PSExLGF9O3ZhciBUZSxCZTshZnVuY3Rpb24oZSl7ZS5SZWxhdGl2ZVRvUGFyZW50V2luZG93PVwicmVsYXRpdmUtdG8tcGFyZW50LXdpbmRvd1wiLGUuUmVsYXRpdmVUb01vbml0b3I9XCJyZWxhdGl2ZS10by1tb25pdG9yXCJ9KFRlfHwoVGU9e30pKSxmdW5jdGlvbihlKXtlLlRvcD1cInRvcFwiLGUuQmVsb3c9XCJiZWxvd1wifShCZXx8KEJlPXt9KSk7Y29uc3QgUmU9YXN5bmMgZT0+e2NvbnN0IHQ9ZSYmYXdhaXQgeWUoZSkuZ2V0Qm91bmRzKCksYT1lP2F3YWl0IFdlKHQpOihhd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCkpLnByaW1hcnlNb25pdG9yO3JldHVybntsZWZ0Oigobj1hLmF2YWlsYWJsZVJlY3QpLmxlZnQrbi5yaWdodCkvMix0b3A6KG4udG9wK24uYm90dG9tKS8yfTt2YXIgbn0sRWU9YXN5bmMoZSx0LGE9ITEpPT57bGV0IG47aWYoYSluPWF3YWl0IFJlKHQpO2Vsc2V7Y29uc3QgZT15ZSh0KSxhPWF3YWl0IGUuZ2V0Qm91bmRzKCk7bj1rZShhKX1jb25zdHtkZWZhdWx0SGVpZ2h0Om8sZGVmYXVsdFdpZHRoOnJ9PWU7cmV0dXJuIGJlKG4se2hlaWdodDpvLHdpZHRoOnJ9KX07YXN5bmMgZnVuY3Rpb24gRmUoZSx0LGE9ITEpe2NvbnN0IG49dCYmXCJtYXhpbWl6ZWRcIj09PWF3YWl0IHllKHQpLmdldFN0YXRlKCksbz1hfHxufHwhdCxyPWF3YWl0IEVlKGUsdCxvKTtyZXR1cm4gYXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpLGE9W3QucHJpbWFyeU1vbml0b3IsLi4udC5ub25QcmltYXJ5TW9uaXRvcnNdO2Zvcihjb25zdCB0IG9mIGEpaWYoMT09PUFlKGUsdCkpcmV0dXJuITE7cmV0dXJuITB9KShyKT8oYXdhaXQgeWUodCkuY2VudGVyKCksRWUoZSx0LG8pKTooY29uc29sZS53YXJuKFwiUmVzcG9uc2UgbW9kYWwgaXNuJ3Qgb2ZmIHNjcmVlbiwgbm90IGNlbnRlcmluZyBwYXJlbnQgd2luZG93XCIpLHIpfWNvbnN0IFZlPSgpPT5lPT5lO3ZhciBOZT1hKDg0Nyk7Y29uc3QgTGU9ZT0+ZS5yZXBsYWNlKC9bXlxcZCxdL2csXCJcIikuc3BsaXQoXCIsXCIpLF9lPWU9PntpZihlLmxlbmd0aDwyKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29sb3Igb2JqZWN0LCBjYW5ub3QgY29udmVydCB0byBIU0wuXCIpO2NvbnN0IHQ9ZVswXS8yNTUsYT1lWzFdLzI1NSxuPWVbMl0vMjU1LG89TWF0aC5taW4odCxhLG4pLHI9TWF0aC5tYXgodCxhLG4pLGk9ci1vO2xldCBzPTAsYz0wLGw9MDtyZXR1cm4gcz0wPT09aT8wOnI9PT10PyhhLW4pL2klNjpyPT09YT8obi10KS9pKzI6KHQtYSkvaSs0LHM9TWF0aC5yb3VuZCg2MCpzKSxzPDAmJihzKz0zNjApLGw9KHIrbykvMixjPTA9PWk/MDppLygxLU1hdGguYWJzKDIqbC0xKSksYz0rKDEwMCpjKS50b0ZpeGVkKDEpLGw9KygxMDAqbCkudG9GaXhlZCgxKSx7aHNsOmBoc2woJHtzfSwgJHtjfSUsICR7bH0lKWAsaHNsYTpgaHNsKCR7c30sICR7Y30lLCAke2x9JSwgMSlgLGh1ZTpzLGxpZ2h0bmVzczpsLHNhdHVyYXRpb246Y319LFVlPWU9PntpZighZS5pbmNsdWRlcyhcIiNcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXggdmFsdWUsIGNhbm5vdCBjb252ZXJ0IHRvIFJHQi4gSGV4IHZhbHVlIGJlZ2lucyB3aXRoIGEgaGFzaHRhZy5cIik7bGV0IHQ9MCxhPTAsbj0wO2lmKDQ9PT1lLmxlbmd0aCl0PWAweCR7ZVsxXX0ke2VbMV19YCxhPWAweCR7ZVsyXX0ke2VbMl19YCxuPWAweCR7ZVszXX0ke2VbM119YDtlbHNle2lmKDchPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmcgbGVuZ3RoLCBjYW5ub3QgY29udmVydCB0byBSR0IuXCIpO3Q9YDB4JHtlWzFdfSR7ZVsyXX1gLGE9YDB4JHtlWzNdfSR7ZVs0XX1gLG49YDB4JHtlWzVdfSR7ZVs2XX1gfXJldHVyblsrdCwrYSwrbl19LE9lPWU9Pntjb25zdCB0PWU7aWYodC5zdGFydHNXaXRoKFwiI1wiKSl7cmV0dXJue3JnYjpVZSh0KS5qb2luKFwiLCBcIiksYWxwaGE6MX19Y29uc3QgYT10Lm1hdGNoKC9cXGR7MSwzfShcXC5cXGQrKT8vZyk7aWYoYSl7Y29uc3RbZSx0LG4sb109YTtyZXR1cm57cmdiOmAke2V9LCAke3R9LCAke259YCxhbHBoYTp2b2lkIDAhPT1vP3BhcnNlRmxvYXQobyk6MX19cmV0dXJue3JnYjpVZShlKS5qb2luKFwiLCBcIiksYWxwaGE6MX19LEdlPShlLHQ9ITEpPT57Y29uc3QgYT0oZT0+e2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNvbG9yIGlzIG5vdCBkZWZpbmVkXCIpO2NvbnN0IHQ9ZS50b0xvd2VyQ2FzZSgpO2xldCBhO2lmKHQuaW5jbHVkZXMoXCJyZ2JcIikpe2NvbnN0IGU9TGUodCk7ZS5sZW5ndGg+MyYmZS5wb3AoKSxhPV9lKGUpLmh1ZX1pZih0LmluY2x1ZGVzKFwiI1wiKSl7Y29uc3QgZT1VZSh0KTthPV9lKGUpLmh1ZX10LmluY2x1ZGVzKFwiaHNsXCIpJiYoYT1MZSh0KVswXSk7Y29uc3Qgbj1hPy50b1N0cmluZygpO2lmKCFuKXRocm93IG5ldyBFcnJvcihgSHVlIHdhcyB1bmFibGUgdG8gYmUgZXh0cmFjdGVkIGZyb20gXCIke3R9XCIsIGNoZWNrIGNvbG9yIGZvcm1hdC4gQWNjZXB0ZWQgZm9ybWF0cyBhcmU6IHJnYigpLCByZ2JhKCksIGhleCwgaHNsKCksIGFuZCBoc2xhKClgKTtyZXR1cm4gbn0pKGUpO3JldHVybiB0P3tiYWNrZ3JvdW5kMTpgaHNsYSgke2F9LCAwJSwgMTAwJSwgMSlgLGJhY2tncm91bmQyOmBoc2xhKCR7YX0sIDY3JSwgOTklLCAxKWAsYmFja2dyb3VuZDM6YGhzbGEoJHthfSwgMjYlLCA5NiUsIDEpYCxiYWNrZ3JvdW5kNDpgaHNsYSgke2F9LCAxNSUsIDk0JSwgMSlgLGJhY2tncm91bmQ1OmBoc2xhKCR7YX0sIDEwJSwgODglLCAxKWAsYmFja2dyb3VuZDY6YGhzbGEoJHthfSwgODAlLCA4MCUsIDEpYH06e2JhY2tncm91bmQxOmBoc2xhKCR7YX0sIDglLCA3JSwgMSlgLGJhY2tncm91bmQyOmBoc2xhKCR7YX0sIDglLCAxMyUsIDEpYCxiYWNrZ3JvdW5kMzpgaHNsYSgke2F9LCA5JSwgMTUlLCAxKWAsYmFja2dyb3VuZDQ6YGhzbGEoJHthfSwgNiUsIDIzJSwgMSlgLGJhY2tncm91bmQ1OmBoc2xhKCR7YX0sIDIxJSwgMjglLCAxKWAsYmFja2dyb3VuZDY6YGhzbGEoJHthfSwgNSUsIDUxJSwgMSlgfX0sSGU9KGUsdCk9Pntjb25zdCBhPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChuPT57YVtuXT10W25dP3Rbbl06ZVtuXX0pKSxhfTt2YXIgJGU9YSg4NzcpLEtlPWEubigkZSksemU9YSg2NyksSmU9YS5uKHplKTtjb25zdCBaZT17bGlnaHQ6e3N5bWJvbDpKZSgpPy5zcmN8fFwiXCJ9LGRhcms6e3N5bWJvbDpLZSgpPy5zcmN8fFwiXCJ9fSxxZT1EJiZcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZuZXcgUHJvbWlzZSgoZT0+ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwoKCk9PntcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZlKCl9KSkpKTtmdW5jdGlvbiBqZShlKXtsZXQgdDtjb25zdCBhPW5ldyBTZXQ7cmV0dXJuKCk9PntpZighVyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRDaGFubmVsQ2xpZW50IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gdHx8KHQ9KGFzeW5jKCk9Pnthd2FpdCBxZTtjb25zdCBuPXtjbGllbnRBUElWZXJzaW9uOk99LG89YXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3BheWxvYWQ6bn0pO3JldHVybiBvLm9uRGlzY29ubmVjdGlvbigoYXN5bmMoKT0+e2EuZm9yRWFjaCgoZT0+ZSgpKSksYS5jbGVhcigpLGNvbnNvbGUud2FybihgZGlzY29ubmVjdGVkIGZyb20gY2hhbm5lbCBwcm92aWRlciAke2V9YCksdD12b2lkIDB9KSksb30pKCkudGhlbigoZT0+KGUuYWRkRGlzY29ubmVjdGlvbkxpc3RlbmVyPWU9PnthLmFkZChlKX0sZSkpKS5jYXRjaCgoYT0+e3Rocm93IHQ9dm9pZCAwLG5ldyBFcnJvcihgZmFpbGVkIHRvIGNvbm5lY3QgdG8gY2hhbm5lbCBwcm92aWRlciAke2V9OiAke2F9YCl9KSkpLHR9fXZhciBRZSxZZTshZnVuY3Rpb24oZSl7ZS5GZXRjaGluZz1cImZldGNoaW5nXCIsZS5GZXRjaGVkPVwiZmV0Y2hlZFwiLGUuQ29tcGxldGU9XCJjb21wbGV0ZVwifShRZXx8KFFlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkluaXRpYWw9MF09XCJJbml0aWFsXCIsZVtlLk9wZW49MV09XCJPcGVuXCIsZVtlLkNsb3NlPTJdPVwiQ2xvc2VcIn0oWWV8fChZZT17fSkpO2NvbnN0IFhlPWplKFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKSxldD1YZTtqZShcIl9fc2VhcmNoLW9wZW5maW4tYnJvd3Nlci1ob21lLXRvcGljX19cIik7dmFyIHR0OyFmdW5jdGlvbihlKXtlLkxhdW5jaEFwcD1cImxhdW5jaEFwcFwiLGUuU2F2ZVBhZ2U9XCJzYXZlUGFnZVwiLGUuR2V0U2F2ZWRQYWdlPVwiZ2V0U2F2ZWRQYWdlXCIsZS5DcmVhdGVTYXZlZFBhZ2U9XCJjcmVhdGVTYXZlZFBhZ2VcIixlLlVwZGF0ZVNhdmVkUGFnZT1cInVwZGF0ZVNhdmVkUGFnZVwiLGUuRGVsZXRlU2F2ZWRQYWdlPVwiZGVsZXRlU2F2ZWRQYWdlXCIsZS5HZXRTYXZlZFBhZ2VzPVwiZ2V0U2F2ZWRQYWdlc1wiLGUuQ3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJjcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJ1cGRhdGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuRGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWw9XCJkZWxldGVTYXZlZFBhZ2VJbnRlcm5hbFwiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZVBhZ2VGb3JXaW5kb3dcIixlLkF0dGFjaFBhZ2VzVG9XaW5kb3c9XCJhdHRhY2hQYWdlc1RvV2luZG93XCIsZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3c9XCJkZXRhY2hQYWdlc0Zyb21XaW5kb3dcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXJQYWdlc0ZvcldpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZT1cInNldEFjdGl2ZVBhZ2VcIixlLkFkZFBhZ2U9XCJhZGRQYWdlXCIsZS5BZGREZWZhdWx0UGFnZT1cImFkZERlZmF1bHRQYWdlXCIsZS5HZXRBbGxBdHRhY2hlZFBhZ2VzPVwiZ2V0QWxsQXR0YWNoZWRQYWdlc1wiLGUuR2V0QWN0aXZlUGFnZUlkRm9yV2luZG93PVwiZ2V0QWN0aXZlUGFnZUlkRm9yV2luZG93XCIsZS5HZXRQYWdlc0ZvcldpbmRvdz1cImdldFBhZ2VzRm9yV2luZG93XCIsZS5HZXRQYWdlRm9yV2luZG93PVwiZ2V0UGFnZUZvcldpbmRvd1wiLGUuR2V0U2F2ZWRQYWdlTWV0YWRhdGE9XCJnZXRTYXZlZFBhZ2VNZXRhZGF0YVwiLGUuR2V0VW5pcXVlUGFnZVRpdGxlPVwiZ2V0VW5pcXVlUGFnZVRpdGxlXCIsZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJnZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLkdldFBhZ2VCeVZpZXdJZGVudGl0eT1cImdldFBhZ2VCeVZpZXdJZGVudGl0eVwiLGUuR2V0VGhlbWVzPVwiZ2V0VGhlbWVzXCIsZS5HZXRTZWxlY3RlZFNjaGVtZT1cImdldFNlbGVjdGVkU2NoZW1lXCIsZS5TZXRTZWxlY3RlZFNjaGVtZT1cInNldFNlbGVjdGVkU2NoZW1lXCIsZS5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsPVwib3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsXCIsZS5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbD1cImludm9rZUN1c3RvbUFjdGlvbkludGVybmFsXCIsZS5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWw9XCJyZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWxcIixlLkdldFNhdmVkV29ya3NwYWNlPVwiZ2V0U2F2ZWRXb3Jrc3BhY2VcIixlLkNyZWF0ZVNhdmVkV29ya3NwYWNlPVwiY3JlYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLlVwZGF0ZVNhdmVkV29ya3NwYWNlPVwidXBkYXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkRlbGV0ZVNhdmVkV29ya3NwYWNlPVwiZGVsZXRlU2F2ZWRXb3Jrc3BhY2VcIixlLkdldFNhdmVkV29ya3NwYWNlcz1cImdldFNhdmVkV29ya3NwYWNlc1wiLGUuR2V0U2F2ZWRXb3Jrc3BhY2VzTWV0YWRhdGE9XCJnZXRTYXZlZFdvcmtzcGFjZXNNZXRhZGF0YVwiLGUuU2F2ZVdvcmtzcGFjZT1cInNhdmVXb3Jrc3BhY2VcIixlLkdldEN1cnJlbnRXb3Jrc3BhY2U9XCJnZXRDdXJyZW50V29ya3NwYWNlXCIsZS5BcHBseVdvcmtzcGFjZT1cImFwcGx5V29ya3NwYWNlXCIsZS5SZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWw9XCJyZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWxcIixlLlNldEFjdGl2ZVdvcmtzcGFjZT1cInNldEFjdGl2ZVdvcmtzcGFjZVwiLGUuSXNCcm93c2VySW5pdGlhbGl6ZWQ9XCJpc0Jyb3dzZXJJbml0aWFsaXplZFwiLGUuQW5hbHl0aWNzPVwiYW5hbHl0aWNzSW50ZXJuYWxcIixlLkdldExhbmd1YWdlPVwiZ2V0TGFuZ3VhZ2VcIixlLkdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWw9XCJnZXRMYW5ndWFnZVJlc291cmNlc0ludGVybmFsXCIsZS5TZXRMYW5ndWFnZT1cInNldExhbmd1YWdlXCIsZS5HZXREb2NrUHJvdmlkZXJDb25maWc9XCJnZXREb2NrUHJvdmlkZXJDb25maWdcIixlLlNhdmVEb2NrUHJvdmlkZXJDb25maWc9XCJzYXZlRG9ja1Byb3ZpZGVyQ29uZmlnXCIsZS5IYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZT1cImhhbmRsZVNhdmVNb2RhbE9uUGFnZUNsb3NlXCIsZS5TaG91bGRQYWdlQ2xvc2U9XCJzaG91bGRQYWdlQ2xvc2VcIixlLlNob3VsZFdpbmRvd0Nsb3NlPVwic2hvdWxkV2luZG93Q2xvc2VcIixlLkNvcHlQYWdlPVwiY29weVBhZ2VcIixlLkhhbmRsZVBhZ2VDaGFuZ2VzPVwiaGFuZGxlUGFnZUNoYW5nZXNcIixlLk1hcmtVbnNhdmVkUGFnZXNBc1NhdmVkSW50ZXJuYWw9XCJtYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsXCIsZS5UcmFja1JlbW92ZWRUYWJJbnRlcm5hbD1cInRyYWNrUmVtb3ZlZFRhYkludGVybmFsXCIsZS5SZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsPVwicmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbFwiLGUuVHJhY2tWaXNpdGVkU2l0ZUludGVybmFsPVwidHJhY2tWaXNpdGVkU2l0ZUludGVybmFsXCIsZS5HZXRSZWNlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPVwiZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbFwiLGUuR2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPVwiZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsXCIsZS5TZWFyY2hTaXRlc0ludGVybmFsPVwic2VhcmNoU2l0ZXNJbnRlcm5hbFwiLGUuR2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWw9XCJnZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbFwiLGUuR2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbD1cImdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWxcIixlLkhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWw9XCJoYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsXCIsZS5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWw9XCJyZWZyZXNoQm9va21hcmtzSW50ZXJuYWxcIixlLkxhdW5jaEJvb2ttYXJrSW50ZXJuYWw9XCJsYXVuY2hCb29rbWFya0ludGVybmFsXCIsZS5HZXROb3RpZmljYXRpb25zQ29uZmlnPVwiZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZ1wiLGUuVXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsPVwidXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsXCIsZS5VcGRhdGVDb250ZW50TWVudUludGVybmFsPVwidXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbFwiLGUuTGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw9XCJsYXVuY2hEb2NrRW50cnlJbnRlcm5hbFwiLGUuU2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWw9XCJzZXREb2NrRmF2b3JpdGVzT3JkZXJJbnRlcm5hbFwiLGUuTmF2aWdhdGVDb250ZW50TWVudUludGVybmFsPVwibmF2aWdhdGVDb250ZW50TWVudUludGVybmFsXCIsZS5TZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsPVwic2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbFwiLGUuR2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsPVwiZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsXCIsZS5IYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsPVwiaGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbFwiLGUuUmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWw9XCJyZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbFwiLGUuQWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWw9XCJhZGREb2NrRmF2b3JpdGVJbnRlcm5hbFwiLGUuRm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD1cImZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWxcIixlLlNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZUludGVybmFsPVwic2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlSW50ZXJuYWxcIixlLlNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbD1cInNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbFwifSh0dHx8KHR0PXt9KSk7Y29uc3QgYXQ9YXN5bmMgZT0+ZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmdldENsaWVudCgpLG50PWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGF0KGUpLGE9XCJUYXJnZXQgaXMgbm90IGEgV29ya3NwYWNlIFBsYXRmb3JtLiBUYXJnZXQgbXVzdCBjYWxsIFdvcmtzcGFjZVBsYXRmb3JtLmluaXRcIjtsZXQgbjt0cnl7bj1hd2FpdCB0LmRpc3BhdGNoKFwiaXNXb3Jrc3BhY2VQbGF0Zm9ybVwiKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYSl9aWYoXCJib29sZWFuXCI9PXR5cGVvZiBuJiZuKXJldHVybiBjb25zb2xlLndhcm4oXCJZb3UgYXJlIHVzaW5nIGFuIG9sZGVyIHZlcnNpb24gb2YgdGhlIHdvcmtzcGFjZSBwbGF0Zm9ybS4gUGxlYXNlIHVwZGF0ZSB5b3VyIHdvcmtzcGFjZSBwbGF0Zm9ybS5cIiksbjtpZihcIm9iamVjdFwiPT10eXBlb2YgbiYmbi5pc1dvcmtzcGFjZVBsYXRmb3JtKXJldHVybiBuO3Rocm93IG5ldyBFcnJvcihhKX0sb3Q9YXN5bmMgZT0+KGF3YWl0IG50KGUpLGF0KGUpKSxydD1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBudChlKTtpZihcIm9iamVjdFwiPT10eXBlb2YgdCYmITAhPT10Py5pc0Jyb3dzZXJJbml0aWFsaXplZCl0aHJvdyBuZXcgRXJyb3IoXCJUYXJnZXQgaXMgbm90IGEgQnJvd3Nlci1lbmFibGVkIFdvcmtzcGFjZSBQbGF0Zm9ybS5cIik7cmV0dXJuIGF0KGUpfSxpdD1cImRhcmtcIixzdD17W05lLlBhbGV0dGUuYnJhbmRQcmltYXJ5XTpcIiMwQTc2RDNcIixbTmUuUGFsZXR0ZS5icmFuZFByaW1hcnlBY3RpdmVdOlwiIzBBNzFDOVwiLFtOZS5QYWxldHRlLmJyYW5kUHJpbWFyeUhvdmVyXTpcIiMwQjg0RUJcIixbTmUuUGFsZXR0ZS5icmFuZFByaW1hcnlGb2N1c2VkXTpOZS5Db2xvci53aGl0ZSxbTmUuUGFsZXR0ZS5icmFuZFByaW1hcnlUZXh0XTpOZS5Db2xvci53aGl0ZSxbTmUuUGFsZXR0ZS5zdGF0dXNTdWNjZXNzXTpOZS5Db2xvci5mdW5jdGlvbmFsMSxbTmUuUGFsZXR0ZS5zdGF0dXNXYXJuaW5nXTpOZS5Db2xvci5mdW5jdGlvbmFsMTAsW05lLlBhbGV0dGUuc3RhdHVzQ3JpdGljYWxdOk5lLkNvbG9yLmZ1bmN0aW9uYWw3LFtOZS5QYWxldHRlLnN0YXR1c0FjdGl2ZV06TmUuQ29sb3IuZnVuY3Rpb25hbDMsW05lLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQxXTpcIiMwQTc2RDNcIixbTmUuUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDJdOlwiIzAwMDAwMFwiLFtOZS5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kM106XCIjMDAwMDAwXCIsW05lLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQ0XTpcIiMwMDAwMDBcIixbTmUuUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDVdOlwiIzAwMDAwMFwiLFtOZS5QYWxldHRlLmJvcmRlck5ldXRyYWxdOk5lLkNvbG9yLnNpbHZlckdyYXl9LGN0PXsuLi5zdCxbTmUuUGFsZXR0ZS5iYWNrZ3JvdW5kMV06TmUuQ29sb3Iud2hpdGUsW05lLlBhbGV0dGUuYmFja2dyb3VuZDJdOk5lLkNvbG9yLmxpZ2h0R3JheTEsW05lLlBhbGV0dGUuYmFja2dyb3VuZDNdOk5lLkNvbG9yLmxpZ2h0R3JheTIsW05lLlBhbGV0dGUuYmFja2dyb3VuZDRdOk5lLkNvbG9yLmxpZ2h0R3JheTMsW05lLlBhbGV0dGUuYmFja2dyb3VuZDVdOk5lLkNvbG9yLmxpZ2h0R3JheTQsW05lLlBhbGV0dGUuYmFja2dyb3VuZDZdOk5lLkNvbG9yLmxpZ2h0R3JheTUsW05lLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnldOk5lLkNvbG9yLmxpZ2h0R3JheTQsW05lLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlBY3RpdmVdOk5lLkNvbG9yLmxpZ2h0R3JheTRBY3RpdmUsW05lLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlIb3Zlcl06TmUuQ29sb3IubGlnaHRHcmF5NEhvdmVyLFtOZS5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5Rm9jdXNlZF06TmUuQ29sb3IuZGFya0dyYXk1LFtOZS5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5VGV4dF06TmUuQ29sb3IuZGFya0dyYXk1LFtOZS5QYWxldHRlLmlucHV0QmFja2dyb3VuZF06TmUuQ29sb3IubGlnaHRHcmF5MyxbTmUuUGFsZXR0ZS5pbnB1dENvbG9yXTpOZS5Db2xvci5kYXJrR3JheTUsW05lLlBhbGV0dGUuaW5wdXRQbGFjZWhvbGRlcl06TmUuQ29sb3IuZGFya0dyYXkyLFtOZS5QYWxldHRlLmlucHV0RGlzYWJsZWRdOk5lLkNvbG9yLm5ldXRyYWxHcmF5LFtOZS5QYWxldHRlLmlucHV0Rm9jdXNlZF06TmUuQ29sb3IubGlnaHRHcmF5NSxbTmUuUGFsZXR0ZS5pbnB1dEJvcmRlcl06TmUuQ29sb3IubmV1dHJhbEdyYXksW05lLlBhbGV0dGUudGV4dERlZmF1bHRdOk5lLkNvbG9yLmRhcmtHcmF5NSxbTmUuUGFsZXR0ZS50ZXh0SGVscF06TmUuQ29sb3IuZGFya0dyYXkzLFtOZS5QYWxldHRlLnRleHRJbmFjdGl2ZV06TmUuQ29sb3IubmV1dHJhbEdyYXl9LGx0PXsuLi5zdCxbTmUuUGFsZXR0ZS5iYWNrZ3JvdW5kMV06TmUuQ29sb3IuZGFya0dyYXk2LFtOZS5QYWxldHRlLmJhY2tncm91bmQyXTpOZS5Db2xvci5kYXJrR3JheTUsW05lLlBhbGV0dGUuYmFja2dyb3VuZDNdOk5lLkNvbG9yLmRhcmtHcmF5NCxbTmUuUGFsZXR0ZS5iYWNrZ3JvdW5kNF06TmUuQ29sb3IuZGFya0dyYXkzLFtOZS5QYWxldHRlLmJhY2tncm91bmQ1XTpOZS5Db2xvci5kYXJrR3JheTIsW05lLlBhbGV0dGUuYmFja2dyb3VuZDZdOk5lLkNvbG9yLmRhcmtHcmF5MSxbTmUuUGFsZXR0ZS5icmFuZFNlY29uZGFyeV06TmUuQ29sb3IuZGFya0dyYXkyLFtOZS5QYWxldHRlLmJyYW5kU2Vjb25kYXJ5QWN0aXZlXTpOZS5Db2xvci5kYXJrR3JheTJBY3RpdmUsW05lLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlIb3Zlcl06TmUuQ29sb3IuZGFya0dyYXkySG92ZXIsW05lLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnlGb2N1c2VkXTpOZS5Db2xvci53aGl0ZSxbTmUuUGFsZXR0ZS5icmFuZFNlY29uZGFyeVRleHRdOk5lLkNvbG9yLndoaXRlLFtOZS5QYWxldHRlLmlucHV0QmFja2dyb3VuZF06TmUuQ29sb3IuZGFya0dyYXkxLFtOZS5QYWxldHRlLmlucHV0Q29sb3JdOk5lLkNvbG9yLndoaXRlLFtOZS5QYWxldHRlLmlucHV0UGxhY2Vob2xkZXJdOk5lLkNvbG9yLmxpZ2h0R3JheTUsW05lLlBhbGV0dGUuaW5wdXREaXNhYmxlZF06TmUuQ29sb3IubmV1dHJhbEdyYXksW05lLlBhbGV0dGUuaW5wdXRGb2N1c2VkXTpOZS5Db2xvci5saWdodEdyYXk1LFtOZS5QYWxldHRlLmlucHV0Qm9yZGVyXTpOZS5Db2xvci5uZXV0cmFsR3JheSxbTmUuUGFsZXR0ZS50ZXh0RGVmYXVsdF06TmUuQ29sb3Iud2hpdGUsW05lLlBhbGV0dGUudGV4dEhlbHBdOk5lLkNvbG9yLmxpZ2h0R3JheTUsW05lLlBhbGV0dGUudGV4dEluYWN0aXZlXTpOZS5Db2xvci5uZXV0cmFsR3JheX0sZHQ9W3tsYWJlbDpcIk9wZW5GaW4gRGVmYXVsdCBMaWdodCBhbmQgRGFyayBUaGVtZVwiLHBhbGV0dGVzOntsaWdodDp7Li4uY3QsYmFja2dyb3VuZFByaW1hcnk6TmUuQ29sb3IuZGFya0dyYXk1fSxkYXJrOnsuLi5sdCxiYWNrZ3JvdW5kUHJpbWFyeTpOZS5Db2xvci5kYXJrR3JheTV9fX1dLHV0PWU9Pntjb25zdHtiYWNrZ3JvdW5kOnQsZm9yZWdyb3VuZDphfT1lO3JldHVybntiYWNrZ3JvdW5kOnQsZm9yZWdyb3VuZDphPz9cIiNGRkZGRkZcIn19LHB0PShlLHQpPT4oe2ljb25zOntzeW1ib2w6ZS5icmFuZD8uaWNvbnM/Llt0XT8uc3ltYm9sfHxaZVt0XS5zeW1ib2x9fSksd3Q9ZT0+e2NvbnN0e2xpZ2h0OnQsZGFyazphfT1cInBhbGV0dGVzXCJpbiBlP2UucGFsZXR0ZXM6e2xpZ2h0OmUucGFsZXR0ZSxkYXJrOmUucGFsZXR0ZX0sbj1IZShsdCxhKSxvPUhlKGN0LHQpLHI9KChlLHQpPT57Y29uc3QgYT17Li4uZX0sbj17Li4udH07bGV0IG89dC5iYWNrZ3JvdW5kUHJpbWFyeT9HZSh0LmJhY2tncm91bmRQcmltYXJ5LCEwKTp7fSxyPWUuYmFja2dyb3VuZFByaW1hcnk/R2UoZS5iYWNrZ3JvdW5kUHJpbWFyeSk6e307cmV0dXJuIG89ey4uLm8sLi4ubn0scj17Li4uciwuLi5hfSx7bGlnaHQ6ey4uLnQsLi4ub30sZGFyazp7Li4uZSwuLi5yfX19KShhLHQpLGk9ey4uLigwLE5lLmNyZWF0ZVRoZW1lKSh7Li4ubiwuLi5yPy5kYXJrfSksYnJhbmQ6cHQoZSxcImRhcmtcIil9LHM9ey4uLigwLE5lLmNyZWF0ZVRoZW1lKSh7Li4ubywuLi5yPy5saWdodH0pLGJyYW5kOnB0KGUsXCJsaWdodFwiKX0se2xpZ2h0OmMsZGFyazpsfT0oZT0+e2NvbnN0IHQ9T2JqZWN0LmtleXMoZS5ub3RpZmljYXRpb25JbmRpY2F0b3JDb2xvcnM/P3t9KTtpZih0Py5sZW5ndGgpe2NvbnN0IGE9e30sbj17fTtyZXR1cm4gdC5mb3JFYWNoKCh0PT57Y29uc3Qgbz1lLm5vdGlmaWNhdGlvbkluZGljYXRvckNvbG9yc1t0XTtcImJhY2tncm91bmRcImluIG8/KGFbdF09dXQobyksblt0XT11dChvKSk6KGFbdF09dXQoby5kYXJrPz9vLmxpZ2h0KSxuW3RdPXV0KG8ubGlnaHQ/P28uZGFyaykpfSkpLHtsaWdodDpuLGRhcms6YX19cmV0dXJue2xpZ2h0Om51bGwsZGFyazpudWxsfX0pKGUpO3JldHVybiBpLm5vdGlmaWNhdGlvbkluZGljYXRvckNvbG9ycz1sLHMubm90aWZpY2F0aW9uSW5kaWNhdG9yQ29sb3JzPWMse2Rhcms6aSxsaWdodDpzfX0sZ3Q9YXN5bmMgZT0+e2NvbnN0e3RoZW1lczp0LHNlbGVjdGVkU2NoZW1lOmF9PWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWZpbj8uX19pbnRlcm5hbF8/LmluaXRpYWxPcHRpb25zPy53b3Jrc3BhY2VQbGF0Zm9ybT8uX3RoZW1lRGF0YTtpZighdHx8ZS51dWlkIT09ZmUudXVpZClyZXR1cm57dGhlbWVzOmF3YWl0IGhuKGUpLlRoZW1lLmdldFRoZW1lcygpLHNlbGVjdGVkU2NoZW1lOmF3YWl0IGhuKGUpLlRoZW1lLmdldFNlbGVjdGVkU2NoZW1lKCl9O3JldHVybiB0fSkoZSk7dmFyIG4sbztyZXR1cm4obj10Py5sZW5ndGg/dDpkdCxvPWEsbi5tYXAoKGU9Pntjb25zdCB0PVwicGFsZXR0ZXNcImluIGU/ZS5kZWZhdWx0Oml0LHtsaWdodDphLGRhcms6bn09d3QoZSk7cmV0dXJue2xhYmVsOmUubGFiZWwsbG9nb1VybDplLmxvZ29VcmwsdGhlbWU6e2Rhcms6bixsaWdodDphfSxkZWZhdWx0U2NoZW1lOm8/P3R9fSkpKVswXX0saHQ9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgb3QoZXx8ZmluLm1lLmlkZW50aXR5KSxhPWF3YWl0IHQuZGlzcGF0Y2godHQuR2V0U2VsZWN0ZWRTY2hlbWUsdm9pZCAwKTtyZXR1cm4gYT09PWsuU3lzdGVtP3dpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzP1wiZGFya1wiOlwibGlnaHRcIjphfSxtdD1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBndChmaW4ubWUuaWRlbnRpdHkpLG49YXdhaXQgaHQoZmluLm1lLmlkZW50aXR5KT09PWsuRGFyayxvPWE/LnRoZW1lO3JldHVybiBvPy5bbj9rLkRhcms6ay5MaWdodF0/LnBhbGV0dGU/LltlXXx8dH07ZnVuY3Rpb24ga3QoZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7Y29uc3QgYT17fTtmb3IoY29uc3QgbiBvZiB0KW4gaW4gZSYmKGFbbl09ZVtuXSk7cmV0dXJuIGF9KGUsVmUoKShbXCJkZWZhdWx0TGVmdFwiLFwiZGVmYXVsdFRvcFwiLFwiZGVmYXVsdENlbnRlcmVkXCIsXCJzYXZlV2luZG93U3RhdGVcIixcInRhc2tiYXJJY29uR3JvdXBcIl0pKX1mdW5jdGlvbiBidCgpe2xldCBlLHQ7cmV0dXJue3Byb21pc2U6bmV3IFByb21pc2UoKChhLG4pPT57ZT1hLHQ9bn0pKSxyZXNvbHZlOmUscmVqZWN0OnR9fWNvbnN0IHl0PXJlcXVpcmUoXCJkZXhpZVwiKSxmdD1lPT4oe3NldEl0ZW06KHQsYSk9Pntsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtlfS0ke3R9YCxhKX0sZ2V0SXRlbTp0PT5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtlfS0ke3R9YCkscmVtb3ZlSXRlbTp0PT5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgJHtlfS0ke3R9YCl9KSxTdD1mdChSKSx2dD1TdC5zZXRJdGVtLFB0PVN0LmdldEl0ZW0sQ3Q9U3QucmVtb3ZlSXRlbTt2YXIgTXQ7IWZ1bmN0aW9uKGUpe2UuQ3VycmVudFdvcmtzcGFjZUlkPVwiY3VycmVudFdvcmtzcGFjZUlkXCIsZS5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJsYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLk1hY2hpbmVOYW1lPVwibWFjaGluZU5hbWVcIixlLk5ld1RhYlBhZ2VMYXlvdXQ9XCJOZXdUYWJQYWdlTGF5b3V0XCIsZS5OZXdUYWJQYWdlU29ydD1cIk5ld1RhYlBhZ2VTb3J0XCIsZS5Eb2NrUG9zaXRpb249XCJEb2NrUG9zaXRpb25cIixlLlNlbGVjdGVkQ29sb3JTY2hlbWU9XCJTZWxlY3RlZENvbG9yU2NoZW1lXCIsZS5UaGVtZVBhbGV0dGVTaGVldD1cIlRoZW1lUGFsZXR0ZVNoZWV0XCIsZS5IYXNNb3ZlZFN0b3JlPVwiSGFzTW92ZWRTdG9yZVwiLGUuUGFnZURyYWdTdGF0ZT1cIkJyb3dzZXJQYWdlRHJhZ1N0YXRlXCIsZS5UaGVtZVBhbGV0dGVEZWZhdWx0U2NoZW1lPVwiVGhlbWVQYWxldHRlRGVmYXVsdFNjaGVtZVwifShNdHx8KE10PXt9KSk7Y29uc3QgeHQ9TXQsSXQ9ZT0+ZStcIi1cIitmaW4ubWUudXVpZCxBdD0oZSx0KT0+e2NvbnN0IGE9VCYmVyYmbmV3IHl0LkRleGllKGUpO3JldHVybiBhJiZhLnZlcnNpb24oLjEpLnN0b3Jlcyh7W3RdOlwiXCJ9KSxhfSxXdD0oZSx0KT0+e2NvbnN0IGE9QXQoSXQoZSksdCksbj1BdChlLHQpO2lmKCFhfHwhbil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gbWlncmF0ZSBzdG9yZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4oYXN5bmMoZSx0LGEpPT57aWYoIWVbYV0pcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKGBMZWdhY3kgc3RvcmUgJHthfSBub3QgZm91bmQsIHNraXBwaW5nIG1pZ3JhdGlvbmApO2NvbnN0IG49UHQoeHQuSGFzTW92ZWRTdG9yZSksbz1uP0pTT04ucGFyc2Uobik6e307aWYobyYmb1thXSlyZXR1cm47b1thXT0hMCx2dCh4dC5IYXNNb3ZlZFN0b3JlLEpTT04uc3RyaW5naWZ5KG8pKTtjb25zdCByPWF3YWl0IGVbYV0udG9BcnJheSgpO2F3YWl0IHRbYV0uYnVsa1B1dChyKX0pKG4sYSxlKSxhfSxEdD1cImRvY2szLXByb3ZpZGVyLWNvbmZpZ1wiLFR0PVQmJlcmJm5ldyB5dC5EZXhpZShJdChcImRvY2szLXByb3ZpZGVyLWNvbmZpZ1wiKSk7VHQmJlR0LnZlcnNpb24oLjEpLnN0b3Jlcyh7W0R0XTpcIlwifSk7dmFyIEJ0LFJ0LEV0LEZ0LFZ0PWZ1bmN0aW9uKGUsdCxhLG4sbyl7aWYoXCJtXCI9PT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT1uJiYhbyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFvOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT1uP28uY2FsbChlLGEpOm8/by52YWx1ZT1hOnQuc2V0KGUsYSksYX0sTnQ9ZnVuY3Rpb24oZSx0LGEsbil7aWYoXCJhXCI9PT1hJiYhbil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFuOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwibVwiPT09YT9uOlwiYVwiPT09YT9uLmNhbGwoZSk6bj9uLnZhbHVlOnQuZ2V0KGUpfTtjbGFzcyBMdHtzdGF0aWMgZ2V0T3ZlcnJpZGVDb25zdHJ1Y3RvciguLi5lKXtyZXR1cm4gY2xhc3MgZXh0ZW5kcyBMdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmUpfX19Y29uc3RydWN0b3IoZSx0KXtpZihCdC5zZXQodGhpcyx2b2lkIDApLFJ0LnNldCh0aGlzLHZvaWQgMCksRXQuc2V0KHRoaXMsbnVsbCksRnQuc2V0KHRoaXMsYnQoKSksTHQuaW5zdGFuY2UpdGhyb3cgbmV3IEVycm9yKFwiRG9jazNQcm92aWRlciBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLlwiKTtMdC5pbnN0YW5jZT10aGlzLFZ0KHRoaXMsQnQsZSxcImZcIiksVnQodGhpcyxSdCx0LFwiZlwiKSx0aGlzLnJlZ2lzdGVyQ2hhbm5lbEFjdGlvbnMoKX1hc3luYyBsYXVuY2hFbnRyeShlKXt9Z2V0IHJlYWR5KCl7cmV0dXJuIE50KHRoaXMsRnQsXCJmXCIpLnByb21pc2V9YXN5bmMgYm9va21hcmtDb250ZW50TWVudUVudHJ5KGUpe31nZXQgY29uZmlnKCl7cmV0dXJuIE50KHRoaXMsQnQsXCJmXCIpfXNldCBjb25maWcoZSl7VnQodGhpcyxCdCxlLFwiZlwiKX1hc3luYyB1cGRhdGVDb25maWcoZSl7YXdhaXQgdGhpcy5oYW5kbGVDb25maWdDaGFuZ2UoZSl9YXN5bmMgc2h1dGRvd24oKXthd2FpdCBQcm9taXNlLmFsbChbTnQodGhpcyxSdCxcImZcIikuZGVzdHJveSgpLHRoaXMuZ2V0V2luZG93U3luYygpLmNsb3NlKCEwKV0pLEx0Lmluc3RhbmNlPW51bGx9YXN5bmMgc2F2ZUNvbmZpZyh7Y29uZmlnOmV9KXtWdCh0aGlzLEJ0LGUsXCJmXCIpLGF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe2lmKCFUdCl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gc2F2ZSBEb2NrIHByb3ZpZGVyIGNvbmZpZyAtIEluZGV4ZWREYiBub3Qgc3VwcG9ydGVkXCIpO2F3YWl0IFR0W0R0XS5wdXQoZSxcImxhdGVzdFwiKX0oZSl9YXN5bmMgaGFuZGxlQ29uZmlnQ2hhbmdlKGUpe050KHRoaXMsRXQsXCJmXCIpJiZhd2FpdCBOdCh0aGlzLFJ0LFwiZlwiKS5kaXNwYXRjaChOdCh0aGlzLEV0LFwiZlwiKSxcImhhbmRsZS1kb2NrLWNvbmZpZy11cGRhdGVkXCIsZSl9YXN5bmMgbG9hZENvbmZpZygpe2NvbnN0IGU9YXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtpZighVHQpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBEb2NrIHByb3ZpZGVyIGNvbmZpZyAtIEluZGV4ZWREQiBub3Qgc3VwcG9ydGVkXCIpO3RyeXtyZXR1cm4gYXdhaXQgVHRbRHRdLmdldChcImxhdGVzdFwiKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gcmV0cmlldmUgRG9jayBwcm92aWRlciBjb25maWcgZnJvbSBJbmRleGVkREJcIixlKX19KCk7cmV0dXJuIGUmJlZ0KHRoaXMsQnQsZSxcImZcIiksTnQodGhpcyxCdCxcImZcIil9Z2V0V2luZG93U3luYygpe3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKHt1dWlkOmZpbi5tZS5pZGVudGl0eS51dWlkLG5hbWU6bGV9KX1yZWdpc3RlckNoYW5uZWxBY3Rpb25zKCl7TnQodGhpcyxSdCxcImZcIikucmVnaXN0ZXIoXCJsYXVuY2gtZW50cnlcIix0aGlzLmxhdW5jaEVudHJ5LmJpbmQodGhpcykpLE50KHRoaXMsUnQsXCJmXCIpLnJlZ2lzdGVyKFwic2F2ZS1jb25maWdcIix0aGlzLnNhdmVDb25maWcuYmluZCh0aGlzKSksTnQodGhpcyxSdCxcImZcIikucmVnaXN0ZXIoXCJib29rbWFyay1jb250ZW50LW1lbnUtZW50cnlcIix0aGlzLmJvb2ttYXJrQ29udGVudE1lbnVFbnRyeS5iaW5kKHRoaXMpKSxOdCh0aGlzLFJ0LFwiZlwiKS5vbkNvbm5lY3Rpb24oKGU9PntlLm5hbWU9PT1sZSYmVnQodGhpcyxFdCxlLFwiZlwiKX0pKSxOdCh0aGlzLFJ0LFwiZlwiKS5yZWdpc3RlcihcInJlYWR5XCIsKGFzeW5jKGUsdCk9PntpZihOdCh0aGlzLEV0LFwiZlwiKT8uZW5kcG9pbnRJZCE9PXQuZW5kcG9pbnRJZCl0aHJvdyBuZXcgRXJyb3IoYERvY2szUHJvdmlkZXI6ICdyZWFkeScgYWN0aW9uIHJlY2VpdmVkIGZyb20gdW5leHBlY3RlZCBjbGllbnQgJHt0Lm5hbWV9ICgke3QudXVpZH0pYCk7TnQodGhpcyxGdCxcImZcIikucmVzb2x2ZSgpfSkpLE50KHRoaXMsUnQsXCJmXCIpLm9uRGlzY29ubmVjdGlvbigoZT0+e050KHRoaXMsRXQsXCJmXCIpPy5lbmRwb2ludElkPT09ZS5lbmRwb2ludElkJiYoVnQodGhpcyxFdCxudWxsLFwiZlwiKSxWdCh0aGlzLEZ0LGJ0KCksXCJmXCIpKX0pKX19YXN5bmMgZnVuY3Rpb24gX3QoZSl7Y29uc3R7Y29uZmlnOnQsb3ZlcnJpZGU6YX09ZTtpZihMdC5pbnN0YW5jZSl0aHJvdyBuZXcgRXJyb3IoXCJEb2NrM1Byb3ZpZGVyIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuXCIpO2NvbnN0IG49YXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jcmVhdGUoZGUoKSksbz1uZXcoYShMdC5nZXRPdmVycmlkZUNvbnN0cnVjdG9yKHQsbikpKTtyZXR1cm4gYXdhaXQgby5sb2FkQ29uZmlnKCksYXdhaXQgYXN5bmMgZnVuY3Rpb24oZSx0LGEsbil7aWYoIWF3YWl0IHhlKHt1dWlkOmZlLnV1aWQsbmFtZTplfSkpe2xldCBvO289XCJudW1iZXJcIj09dHlwZW9mIGEuZG9ja1Bvc2l0aW9uPy5sZWZ0fHxcIm51bWJlclwiPT10eXBlb2Ygbj8uZGVmYXVsdExlZnQ/YS5kb2NrUG9zaXRpb24/LmxlZnQ6KGF3YWl0IFJlKGZlKSkubGVmdC1zZS8yO2NvbnN0IHI9e25hbWU6ZSx1cmw6dCt6LkVudGVycHJpc2VEb2NrLGF1dG9TaG93OiEwLGZyYW1lOiExLHNtYWxsV2luZG93OiEwLHNhdmVXaW5kb3dTdGF0ZTohMSxkZWZhdWx0SGVpZ2h0OmllLGRlZmF1bHRXaWR0aDpzZSxpbmNsdWRlSW5TbmFwc2hvdHM6ITEsZGVmYXVsdFRvcDphLmRvY2tQb3NpdGlvbj8udG9wPz9jZSxkZWZhdWx0TGVmdDpvLHdvcmtzcGFjZVBsYXRmb3JtOnt3aW5kb3dUeXBlOmEud2luZG93VHlwZSwuLi5hfSx0aHJvdHRsaW5nOlwiZGlzYWJsZWRcIixyZXNpemFibGU6ITEsbWF4aW1pemFibGU6ITEsYmFja2dyb3VuZENvbG9yOmF3YWl0IG10KFwiYmFja2dyb3VuZDFcIiksLi4ua3Qobj8/e30pfTthd2FpdCBmaW4uV2luZG93LmNyZWF0ZShEZShyKSl9fShsZSxhd2FpdCBhZSgpLG8uY29uZmlnLGUud2luZG93T3B0aW9ucyksYXdhaXQgby5yZWFkeSxvfUJ0PW5ldyBXZWFrTWFwLFJ0PW5ldyBXZWFrTWFwLEV0PW5ldyBXZWFrTWFwLEZ0PW5ldyBXZWFrTWFwLEx0Lmluc3RhbmNlPW51bGw7Y29uc3QgVXQ9YXN5bmMgZT0+e2NvbnN0IHQ9ZT9maW4uV2luZG93LndyYXBTeW5jKGUpOmZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKSxhPWF3YWl0IHQuZ2V0T3B0aW9ucygpO3JldHVybiBhLndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlJiZcImVudGVycHJpc2VcIj09PWEud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZX0sT3Q9ZT0+e2NvbnN0IHQ9ZT8uZGVmYXVsdFdpbmRvd09wdGlvbnM/LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlO3JldHVyblwiZW50ZXJwcmlzZVwiPT09dH07bGV0IEd0O2NvbnN0IEh0PWU9PntpZihlKXRyeXtyZXR1cm4gbmV3IFVSTChlKS5wYXRobmFtZS5pbmNsdWRlcyh6LkVudGVycHJpc2VMYW5kaW5nUGFnZS5yZXBsYWNlKC9cXC8kLyxcIlwiKSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcImVycm9yIHBhcnNpbmcgdXJsOiAlT1wiLGUpfXJldHVybiExfTt2YXIgJHQ7IWZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cIkJyb3dzZXJcIixlLkRvY2s9XCJEb2NrXCIsZS5FbnRlcnByaXNlRG9jaz1cIkVudGVycHJpc2VEb2NrXCIsZS5Ib21lPVwiSG9tZVwiLGUuTm90aWZpY2F0aW9uPVwiTm90aWZpY2F0aW9uXCIsZS5TdG9yZWZyb250PVwiU3RvcmVmcm9udFwiLGUuUGxhdGZvcm09XCJQbGF0Zm9ybVwiLGUuVGhlbWluZz1cIlRoZW1pbmdcIixlLk1pY3JvZmxvdz1cIk1pY3JvZmxvd1wifSgkdHx8KCR0PXt9KSk7Y29uc3QgS3Q9YXN5bmMoZSx0LGE9XCJ3b3Jrc3BhY2UtbGljZW5zaW5nXCIpPT57Y29uc3Qgbj17YXBpVmVyc2lvbjp0LmFwaVZlcnNpb258fE8sY29tcG9uZW50TmFtZTplLGNvbXBvbmVudFZlcnNpb246dC5jb21wb25lbnRWZXJzaW9ufHxPLGFsbG93ZWQ6dC5hbGxvd2VkLHJlamVjdGlvbkNvZGU6dC5yZWplY3Rpb25Db2RlfTtmaW4uU3lzdGVtLnJlZ2lzdGVyVXNhZ2Uoe3R5cGU6YSxkYXRhOm59KX07bGV0IHp0PSExO2NvbnN0IEp0PW5ldyBNYXAsWnQ9ZT0+e2xldCB0PUp0LmdldChlLnV1aWQpO3JldHVybiB0fHwodD1obihlKSx0Lm9uY2UoXCJjbG9zZWRcIiwoKCk9PntKdC5kZWxldGUoZS51dWlkKX0pKSxKdC5zZXQoZS51dWlkLHQpKSx0fSxxdD1hc3luYyhlLHQpPT57dHJ5e2F3YWl0IGUuX3JhaXNlQW5hbHl0aWNzKFt0XSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byByYWlzZSBhbmFseXRpY3MgZXZlbnRcIixlKX19LGp0PWFzeW5jIGU9Pnthd2FpdCBxdChadChmaW4ubWUuaWRlbnRpdHkpLHtzb3VyY2U6XCJCcm93c2VyXCIsLi4uZX0pfTtsZXQgUXQ7Y29uc3QgWXQ9YXN5bmMgZT0+e1F0fHwoUXQ9bmV3IFRleHRFbmNvZGVyKTtjb25zdCB0PVF0LmVuY29kZShlKSxhPWF3YWl0IHdpbmRvdy5jcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS0yNTZcIix0KTtyZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShhKSkubWFwKChlPT5lLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLFwiMFwiKSkpLmpvaW4oXCJcIil9O2Z1bmN0aW9uIFh0KGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gZWEoZSwuLi50KXtpZighdC5sZW5ndGgpcmV0dXJuIGU7Y29uc3QgYT10LnNoaWZ0KCk7cmV0dXJuIFh0KGUpJiZYdChhKSYmT2JqZWN0LmVudHJpZXMoYSkuZm9yRWFjaCgoKFt0LGFdKT0+e2lmKFh0KGEpKXJldHVybiBlW3RdfHwoZVt0XT17fSksZWEoZVt0XSxhKTtlW3RdPWF9KSksZWEoZSwuLi50KX1jb25zdCB0YT1yZXF1aXJlKFwibG9kYXNoLmRlYm91bmNlXCIpO3ZhciBhYT1hLm4odGEpO2Z1bmN0aW9uIG5hKCl7cmV0dXJuIHZvaWQgMCE9PXR5cGVvZiBjcnlwdG8mJlwicmFuZG9tVVVJRFwiaW4gY3J5cHRvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjcnlwdG8ucmFuZG9tVVVJRD9jcnlwdG8ucmFuZG9tVVVJRCgpOlwiMTAwMDAwMDAtMTAwMC00MDAwLTgwMDAtMTAwMDAwMDAwMDAwXCIucmVwbGFjZSgvWzAxOF0vZywoZT0+KGVeY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0mMTU+PmUvNCkudG9TdHJpbmcoMTYpKSl9ZnVuY3Rpb24gb2EoKXtyZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oeHQuTWFjaGluZU5hbWUpPz9cInVua25vd25cIn1sZXQgcmE7YXN5bmMgZnVuY3Rpb24gaWEoKXtyZXR1cm4gcmF8fChyYT1hd2FpdCBmaW4uU3lzdGVtLmdldE1hY2hpbmVJZCgpKSxyYX1jb25zdCBzYT1lPT57aWYoQXJyYXkuaXNBcnJheShlLndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcykmJihlLmxheW91dFNuYXBzaG90fHxlLmxheW91dCkpe2NvbnN0IHQ9ZS53b3Jrc3BhY2VQbGF0Zm9ybS5wYWdlcy5maW5kKChlPT5lLmlzQWN0aXZlKSk7aWYodCl7Y29uc3QgYT1lLmxheW91dFNuYXBzaG90P2UubGF5b3V0U25hcHNob3QubGF5b3V0c1t0LmxheW91dENvbnRhaW5lcktleV06ZS5sYXlvdXQ7aWYoYSlpZih0LmlzTG9ja2VkKXtjb25zdCBuPUluKGEsdC5sYXlvdXQpO3QubGF5b3V0PW4sZS5sYXlvdXQ9bn1lbHNlIHQubGF5b3V0PWEsZS5sYXlvdXQ9YX19cmV0dXJuIGV9O2FzeW5jIGZ1bmN0aW9uIGNhKGUpe2NvbnN0IHQ9ZXx8YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuZ2V0U25hcHNob3QoKTtpZih0LnNuYXBzaG90RGV0YWlscz8ubWFjaGluZUlkKXJldHVybiB0O2NvbnN0IGE9b2EoKTtyZXR1cm57Li4udCxzbmFwc2hvdERldGFpbHM6ey4uLnQuc25hcHNob3REZXRhaWxzLG1hY2hpbmVJZDphd2FpdCBpYSgpLG1hY2hpbmVOYW1lOmF9fX1jb25zdCBsYT1hc3luYyBlPT4oey4uLmUsbGF5b3V0RGV0YWlsczp7bWFjaGluZUlkOmF3YWl0IGlhKCksbWFjaGluZU5hbWU6b2EoKX19KSxkYT1hc3luYyhlLHQpPT4oe3BhZ2VJZDpuYSgpLHRpdGxlOmUsbGF5b3V0OmF3YWl0IGxhKHQpLGlzUmVhZE9ubHk6ITF9KSx1YT1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCBkYShlLnRpdGxlLFBuKGUubGF5b3V0KSk7cmV0dXJuIGUucGFuZWxzJiYodC5wYW5lbHM9ZS5wYW5lbHMubWFwKChlPT4oey4uLmUsdmlld09wdGlvbnM6dm4oZS52aWV3T3B0aW9ucyl9KSkpKSx7Li4uZSwuLi50fX0scGE9ZT0+e2NvbnN0IHQ9ZmluLlBsYXRmb3JtLkxheW91dC53cmFwU3luYyhlKTtyZXR1cm57c2hvdzphc3luYygpPT57Y29uc3QgYT1hd2FpdCB0LmdldENvbmZpZygpLHtzZXR0aW5nczpuLGRpbWVuc2lvbnM6b309YSxyPWF3YWl0IFV0KGUpO2F3YWl0IHQucmVwbGFjZSh7Li4uYSxzZXR0aW5nczp7Li4ubixoYXNIZWFkZXJzOiEwLHJlb3JkZXJFbmFibGVkOiEwfSxkaW1lbnNpb25zOnsuLi5vLGhlYWRlckhlaWdodDpyPzI4OjMwfX0pfSxoaWRlOmFzeW5jIGU9Pntjb25zdCBhPWF3YWl0IHQuZ2V0Q29uZmlnKCkse3NldHRpbmdzOm4sZGltZW5zaW9uczpvfT1hd2FpdCBhO2F3YWl0IHQucmVwbGFjZSh7Li4uYSxzZXR0aW5nczp7Li4ubixoYXNIZWFkZXJzOiExLHJlb3JkZXJFbmFibGVkOmU/LnNldHRpbmdzPy5yZW9yZGVyRW5hYmxlZD8/ITF9LGRpbWVuc2lvbnM6ey4uLm8saGVhZGVySGVpZ2h0OjB9fSl9LGlzU2hvd2luZ1RhYnM6YXN5bmMoKT0+e3RyeXtjb25zdCBlPWF3YWl0IHQuZ2V0Q29uZmlnKCkse3NldHRpbmdzOmF9PWF3YWl0IGU7cmV0dXJuIGEuaGFzSGVhZGVyc31jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBnZXQgbGF5b3V0IGNvbmZpZzogXCIsZSksITB9fX19LHdhPVwib2Ytd29ya3NwYWNlLVwiO2NvbnN0IGdhPW5ldyBjbGFzc3ttYXJrKGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7d2F9JHtlfWApfW1hcmtTdGFydChlKXtwZXJmb3JtYW5jZS5tYXJrKGAke3dhfSR7ZX0tc3RhcnRgKX1tYXJrRW5kKGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7d2F9JHtlfS1lbmRgKX1tYXJrRW5kQW5kTWVhc3VyZShlKXtwZXJmb3JtYW5jZS5tYXJrKGAke3dhfSR7ZX0tZW5kYCk7dHJ5e3JldHVybiBwZXJmb3JtYW5jZS5tZWFzdXJlKGAke3dhfSR7ZX1gLGAke3dhfSR7ZX0tc3RhcnRgLGAke3dhfSR7ZX0tZW5kYCl9Y2F0Y2goZSl7MH19bWFya0FuZE1lYXN1cmUoZSx0KXtwZXJmb3JtYW5jZS5tYXJrKGAke3dhfSR7ZX1gKTt0cnl7cmV0dXJuIHBlcmZvcm1hbmNlLm1lYXN1cmUoYCR7d2F9JHtlfS1tZWFzdXJlYCxgJHt3YX0ke3R9LXN0YXJ0YCxgJHt3YX0ke2V9YCl9Y2F0Y2goZSl7MH19cmVwb3J0V29ya3NwYWNlUGVyZm9ybWFuY2VFbnRyaWVzKCl7cmV0dXJuIHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJtZWFzdXJlXCIpLmZpbHRlcigoZT0+ZS5uYW1lLnN0YXJ0c1dpdGgod2EpKSl9cmVwb3J0V29ya3NwYWNlUGVyZm9ybWFuY2UoKXtyZXR1cm4gdGhpcy5yZXBvcnRXb3Jrc3BhY2VQZXJmb3JtYW5jZUVudHJpZXMoKS5tYXAoKGU9Pih7bmFtZTplLm5hbWUucmVwbGFjZShgJHt3YX1gLFwiXCIpLnJlcGxhY2UoXCItbWVhc3VyZVwiLFwiXCIpLGR1cmF0aW9uOmUuZHVyYXRpb259KSkpfX0saGE9KCk9Pntjb25zdCBlPWBicm93c2VyLWNvbnRleHQtbWVudS1zdGFydHVwLSR7bmEoKX1gO3JldHVybiBnYS5tYXJrU3RhcnQoZSksZX0sbWE9ZT0+e2dhLm1hcmtBbmRNZWFzdXJlKFwiYnJvd3Nlci1jb250ZXh0LW1lbnUtY2FsbGVkXCIsZSl9LGthPWU9PntmaW4uQXBwbGljYXRpb24ud3JhcFN5bmMoe3V1aWQ6ZmluLm1lLmlkZW50aXR5LnV1aWR9KS5vbmNlKFwid2luZG93LXNob3duXCIsKCgpPT57KGU9PntnYS5tYXJrQW5kTWVhc3VyZShcImJyb3dzZXItY29udGV4dC1tZW51LXNob3duXCIsZSl9KShlKX0pKX0sYmE9KGUsdCk9PnQ/YCR7dH0tJHtlLnV1aWR9LSR7ZS5uYW1lfWA6YF9fYnJvd3Nlcl93aW5kb3dfXy0ke2UudXVpZH0tJHtlLm5hbWV9YCx5YT1uZXcgTWFwLGZhPWU9Pih5YS5oYXMoZSl8fHlhLnNldChlLGplKGUpKSx5YS5nZXQoZSkoKSksU2E9KGUsdCk9Pntjb25zdCBhPWJhKGUsdCk7cmV0dXJuIGZhKGEpfTt2YXIgdmEsUGEsQ2EsTWEseGEsSWE7IWZ1bmN0aW9uKGUpe2UuQ2xvc2VCcm93c2VyV2luZG93PVwiY2xvc2UtYnJvd3Nlci13aW5kb3dcIixlLlF1aXRQbGF0Zm9ybT1cInF1aXQtcGxhdGZvcm1cIixlLkNsb3NlUGFnZT1cImNsb3NlLXBhZ2VcIixlLkFkZFRvQ2hhbm5lbD1cImFkZC10by1jaGFubmVsXCIsZS5SZW1vdmVGcm9tQ2hhbm5lbD1cInJlbW92ZS1mcm9tLWNoYW5uZWxcIixlLk9wZW5TYXZlTW9kYWxJbnRlcm5hbD1cIm9wZW4tc2F2ZS1tb2RhbC1pbnRlcm5hbFwiLGUuRHVwbGljYXRlUGFnZT1cImR1cGxpY2F0ZS1wYWdlXCIsZS5TZXRTZWxlY3RlZFNjaGVtZT1cInNldC1zZWxlY3RlZC1zY2hlbWVcIixlLlNob3dCcm93c2VySW5kaWNhdG9yPVwic2hvdy1icm93c2VyLWluZGljYXRvclwiLGUuU2V0U2VsZWN0ZWRMYW5ndWFnZT1cInNldC1zZWxlY3RlZC1sYW5ndWFnZVwiLGUuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsPVwicmVmcmVzaC1ib29rbWFya3NcIixlLkdldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3c0ludGVybmFsPVwiZ2V0LWxheW91dHMtd2l0aC1zZWxlY3RlZC12aWV3c1wiLGUuRm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD1cImZvY3VzLWFuZC1leHBhbmQtc2VhcmNoXCJ9KHZhfHwodmE9e30pKSxmdW5jdGlvbihlKXtlLkdldFBhZ2VzPVwiZ2V0LXBhZ2VzXCIsZS5HZXRBY3RpdmVQYWdlRm9yV2luZG93PVwiZ2V0LWFjdGl2ZS1wYWdlLWZvci13aW5kb3dcIixlLkF0dGFjaFBhZ2VzVG9XaW5kb3c9XCJhdHRhY2gtcGFnZXMtdG8td2luZG93XCIsZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3c9XCJkZXRhY2gtcGFnZXMtZnJvbS13aW5kb3dcIixlLlNldEFjdGl2ZVBhZ2VGb3JXaW5kb3c9XCJzZXQtYWN0aXZlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuUmVuYW1lUGFnZT1cInJlbmFtZS1wYWdlXCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyLXBhZ2VzLWZvci13aW5kb3dcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGUtcGFnZS1mb3Itd2luZG93XCIsZS5VcGRhdGVQYWdlc1dpbmRvd09wdGlvbnM9XCJ1cGRhdGUtcGFnZXMtd2luZG93LW9wdGlvbnNcIixlLklzRGV0YWNoaW5nUGFnZXM9XCJpcy1kZXRhY2hpbmctcGFnZXNcIixlLklzQWN0aXZlUGFnZUNoYW5naW5nPVwiaXMtYWN0aXZlLXBhZ2UtY2hhbmdpbmdcIn0oUGF8fChQYT17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0QXBwcz1cImdldC1hcHBzXCIsZS5HZXRDdXJhdGVkQ29udGVudD1cImdldC1jdXJhdGVkLWNvbnRlbnRcIixlLkdldFJlY2VudGx5VmlzaXRlZD1cImdldC1yZWNlbnRseS12aXNpdGVkXCIsZS5HZXRTZWFyY2hQcm92aWRlcnM9XCJnZXQtc2VhcmNoLXByb3ZpZGVyc1wifShDYXx8KENhPXt9KSksZnVuY3Rpb24oZSl7ZS5DcmVhdGVCb29rbWFya05vZGU9XCJjcmVhdGUtYm9va21hcmstbm9kZVwiLGUuR2V0Qm9va21hcmtOb2RlPVwiZ2V0LWJvb2ttYXJrLW5vZGVcIixlLlNlYXJjaEJvb2ttYXJrTm9kZXM9XCJzZWFyY2gtYm9va21hcmstbm9kZXNcIixlLlVwZGF0ZUJvb2ttYXJrTm9kZT1cInVwZGF0ZS1ib29rbWFyay1ub2RlXCIsZS5EZWxldGVCb29rbWFya05vZGU9XCJkZWxldGUtYm9va21hcmstbm9kZVwifShNYXx8KE1hPXt9KSksZnVuY3Rpb24oZSl7ZS5VcGRhdGVGYXZvcml0ZUVudHJpZXM9XCJ1cGRhdGUtZmF2b3JpdGUtZW50cmllc1wiLGUuVXBkYXRlQ29udGVudE1lbnU9XCJ1cGRhdGUtY29udGVudC1tZW51XCIsZS5OYXZpZ2F0ZUNvbnRlbnRNZW51PVwibmF2aWdhdGUtY29udGVudC1tZW51XCJ9KHhhfHwoeGE9e30pKSxmdW5jdGlvbihlKXtlLlNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZT1cInNlbmQtdXBkYXRlLXZlcnNpb24tbW9kYWwtcmVzcG9uc2VcIn0oSWF8fChJYT17fSkpO2NvbnN0IEFhPXsuLi52YSwuLi5QYSwuLi54YX0sV2E9amUoYCR7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbiYmZmluPy5tZS5pZGVudGl0eS51dWlkfS1lbnRlcnByaXNlLWJvb2ttYXJrc2ApLERhPWU9Pih7aWRlbnRpdHk6ZSxvcGVuZmluV2luZG93OmZpbi5XaW5kb3cud3JhcFN5bmMoZSksX2Jvb2ttYXJrczp7X2NyZWF0ZUJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IFdhKCkpLmRpc3BhdGNoKE1hLkNyZWF0ZUJvb2ttYXJrTm9kZSxlKSkoZSksX2dldEJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IFdhKCkpLmRpc3BhdGNoKE1hLkdldEJvb2ttYXJrTm9kZSxlKSkoZSksX3NlYXJjaEJvb2ttYXJrTm9kZXM6YXN5bmMgZT0+KGFzeW5jIGU9Pihhd2FpdCBXYSgpKS5kaXNwYXRjaChNYS5TZWFyY2hCb29rbWFya05vZGVzLGUpKShlKSxfdXBkYXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgV2EoKSkuZGlzcGF0Y2goTWEuVXBkYXRlQm9va21hcmtOb2RlLGUpKShlKSxfZGVsZXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgV2EoKSkuZGlzcGF0Y2goTWEuRGVsZXRlQm9va21hcmtOb2RlLGUpKShlKX0sZ2V0UGFnZXM6YXN5bmMoKT0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRQYWdlc0ZvcldpbmRvdyxlKSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCBydChlKSkuZGlzcGF0Y2godHQuR2V0UGFnZUZvcldpbmRvdyx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLGFkZFBhZ2U6YXN5bmMgdD0+bW4oKS5Ccm93c2VyLndyYXBTeW5jKGUpLl9hZGRQYWdlKHQpLF9hZGRQYWdlOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0IHJ0KGUpLG89e2lkZW50aXR5OmUscGFnZTp0LGluc2VydGlvbkluZGV4OmE/LmluZGV4LG11bHRpSW5zdGFuY2VWaWV3QmVoYXZpb3I6YT8ubXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcn07cmV0dXJuIG4uZGlzcGF0Y2godHQuQWRkUGFnZSxvKX0sX2FkZFBhZ2VzOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0IHJ0KGUpLG89dC5tYXAoKCh7cGFnZTplLG9wdHM6dH0pPT4oey4uLmUsbXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcjp0Py5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yfHxcImR1cGxpY2F0ZVwifSkpKSxyPXtpZGVudGl0eTplLHBhZ2VzOm8sLi4uYX07cmV0dXJuIG4uZGlzcGF0Y2godHQuQXR0YWNoUGFnZXNUb1dpbmRvdyxyKX0scmVtb3ZlUGFnZTphc3luYyB0PT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LkRldGFjaFBhZ2VzRnJvbVdpbmRvdyx7aWRlbnRpdHk6ZSxwYWdlSWRzOlt0XX0pLHJlcGFyZW50UGFnZTphc3luYyB0PT5tbigpLkJyb3dzZXIud3JhcFN5bmMoZSkuX3JlcGFyZW50UGFnZSh0KSxfcmVwYXJlbnRQYWdlOmFzeW5jIHQ9Pntjb25zdHtwYWdlSWQ6YX09dCxuPWF3YWl0IHJ0KGUpLG89KGF3YWl0IG4uZGlzcGF0Y2godHQuR2V0QWxsQXR0YWNoZWRQYWdlcyx2b2lkIDApKS5maW5kKCgoe3BhZ2VJZDplfSk9PmU9PT1hKSk7aWYoIW8pdGhyb3cgbmV3IEVycm9yKGBSZXBhcmVudCBQYWdlIEVycm9yOiBUYXJnZXQgcGFnZSB3aXRoIHBhZ2VJZCAke2F9IG5vdCBmb3VuZGApO28ubXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcj1cInJlcGFyZW50XCI7Y29uc3Qgcj17aWRlbnRpdHk6ZSxwYWdlczpbb10saW5zZXJ0aW9uSW5kZXg6dC5pbmRleH07cmV0dXJuIG4uZGlzcGF0Y2godHQuQXR0YWNoUGFnZXNUb1dpbmRvdyxyKX0sc2V0QWN0aXZlUGFnZTphc3luYyB0PT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LlNldEFjdGl2ZVBhZ2Use2lkZW50aXR5OmUscGFnZUlkOnR9KSx1cGRhdGVQYWdlOmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHJ0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaCh0dC5VcGRhdGVQYWdlRm9yV2luZG93LHQpfSxyZW9yZGVyUGFnZXM6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgcnQoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKHR0LlJlb3JkZXJQYWdlc0ZvcldpbmRvdyx0KX0sX29wZW5HbG9iYWxDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBydChlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2godHQuT3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWwsdCl9LHJlcGxhY2VUb29sYmFyT3B0aW9uczphc3luYyB0PT57YXdhaXQgcnQoZSk7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKGUpO2F3YWl0IGEudXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06e3Rvb2xiYXJPcHRpb25zOnR9fSl9LHJlcGxhY2VXaW5kb3dTdGF0ZUJ1dHRvbk9wdGlvbnM6YXN5bmMgdD0+e2F3YWl0IHJ0KGUpO2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlKTthd2FpdCBhLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnt3aW5kb3dTdGF0ZUJ1dHRvbk9wdGlvbnM6dH19KX0sdXBkYXRlQnJvd3NlcldpbmRvd1RpdGxlOmFzeW5jIHQ9Pntjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7XCJzdHJpbmdcIiE9dHlwZW9mIHQ/YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7dGl0bGU6dH19KTpjb25zb2xlLndhcm4oXCJUeXBlIHN0cmluZyBmb3Igd2luZG93IHRpdGxlIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgV2luZG93VGl0bGUgdHlwZSBpbnN0ZWFkXCIsdCl9LF9vcGVuVmlld1RhYkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHJ0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaCh0dC5PcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWwsdCl9LF9vcGVuUGFnZVRhYkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHJ0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaCh0dC5PcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwsdCl9LF9vcGVuU2F2ZU1vZGFsOmFzeW5jIHQ9Pnthd2FpdCBydChlKTtyZXR1cm4oYXdhaXQgU2EoZSkpLmRpc3BhdGNoKEFhLk9wZW5TYXZlTW9kYWxJbnRlcm5hbCx0KX0sX2dldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3czphc3luYygpPT4oYXdhaXQgU2EoZSkpLmRpc3BhdGNoKEFhLkdldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3c0ludGVybmFsLGUpLF9vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IHJ0KGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaCh0dC5PcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51SW50ZXJuYWwsdCl9LF9hZGREZWZhdWx0UGFnZTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBydChlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2godHQuQWRkRGVmYXVsdFBhZ2UsdCl9LF90cmFja1JlbW92ZWRUYWI6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5UcmFja1JlbW92ZWRUYWJJbnRlcm5hbCx0KSxfcmVzdG9yZVJlbW92ZWRUYWI6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5SZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsLHQpLF90cmFja1Zpc2l0ZWRTaXRlOmFzeW5jIHQ9Pihhd2FpdCBydChlKSkuZGlzcGF0Y2godHQuVHJhY2tWaXNpdGVkU2l0ZUludGVybmFsLHQpLF9nZXRSZWNlbnRseVZpc2l0ZWRTaXRlczphc3luYyB0PT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LkdldFJlY2VudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWwsdCksX2dldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXM6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRGcmVxdWVudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWwsdCksX3NlYXJjaFNpdGVzOmFzeW5jIHQ9Pihhd2FpdCBydChlKSkuZGlzcGF0Y2godHQuU2VhcmNoU2l0ZXNJbnRlcm5hbCx7aWRlbnRpdHk6ZSxyZXE6dH0pLF9nZXRTZWFyY2hQcm92aWRlcnM6YXN5bmMoKT0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbCx7aWRlbnRpdHk6ZX0pLF9nZXRDdXJhdGVkQ29udGVudDphc3luYyB0PT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LkdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWwse2lkZW50aXR5OmUscmVxOnR9KSxfaGFuZGxlUmVxdWVzdE5hdmlnYXRpb246YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5IYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsLHQpLF9zZW5kVXBkYXRlVmVyc2lvbk1vZGFsUmVzcG9uc2U6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5TZW5kVXBkYXRlVmVyc2lvbk1vZGFsUmVzcG9uc2VJbnRlcm5hbCx0KX0pLFRhPWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm57d3JhcFN5bmM6ZT0+RGEoZSksY3JlYXRlV2luZG93OmFzeW5jIGE9Pntjb25zdCBuPSgoKT0+e2NvbnN0IGU9YGJyb3dzZXItd2luZG93LXN0YXJ0dXAtJHtuYSgpfWA7cmV0dXJuIGdhLm1hcmtTdGFydChlKSxlfSkoKTsoZT0+e2Zpbi5BcHBsaWNhdGlvbi53cmFwU3luYyh7dXVpZDpmaW4ubWUuaWRlbnRpdHkudXVpZH0pLm9uY2UoXCJ3aW5kb3ctc2hvd25cIiwoKCk9PntnYS5tYXJrQW5kTWVhc3VyZShcImJyb3dzZXItd2luZG93LXNob3duXCIsZSl9KSl9KShuKSxhd2FpdCBydChlKTtjb25zdCBvPWF3YWl0IHQuY3JlYXRlV2luZG93KGEpO3JldHVybihlPT57Z2EubWFya0FuZE1lYXN1cmUoXCJicm93c2VyLXdpbmRvdy1zdGFydGVkXCIsZSl9KShuKSxEYShvLmlkZW50aXR5KX0sZ2V0QWxsQXR0YWNoZWRQYWdlczphc3luYygpPT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSxnZXRBbGxXaW5kb3dzOmFzeW5jKCk9Pnthd2FpdCBydChlKTtyZXR1cm4oYXdhaXQgQ2UoKSkubWFwKChlPT5EYShlLmlkZW50aXR5KSkpfSxnZXRVbmlxdWVQYWdlVGl0bGU6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRVbmlxdWVQYWdlVGl0bGUsdCksZ2V0TGFzdEZvY3VzZWRXaW5kb3c6YXN5bmMoKT0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3csdm9pZCAwKSxnZXRQYWdlQnlWaWV3SWRlbnRpdHk6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRQYWdlQnlWaWV3SWRlbnRpdHksdCl9fSxCYT0oZSx0PTApPT57bGV0IGEsbixvPSExO2NvbnN0IHI9YXN5bmMgbj0+e2NvbnN0IGk9YXdhaXQgZSguLi5uKTtpZihvKXthd2FpdCBuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLHQpKSk7Y29uc3QgZT1hO3JldHVybiBhPXZvaWQgMCxvPSExLHIoZSl9cmV0dXJuIGl9O3JldHVybiguLi5lKT0+KG4/KG89ITAsYT1lKTpuPXIoZSkuY2F0Y2goKGU9Pnt0aHJvdyBjb25zb2xlLmVycm9yKFwibWFrZURlYm91bmNlZEZ1bmNcIixlKSxlfSkpLmZpbmFsbHkoKCgpPT57bj12b2lkIDB9KSksbil9O3ZhciBSYTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwiL2hvbWVcIixlLkJyb3dzZXI9XCIvYnJvd3NlclwiLGUuRW50ZXJwcmlzZT1cIi9lbnRlcnByaXNlXCIsZS5Qcm92aWRlcj1cIi9wcm92aWRlclwiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250XCIsZS5Eb2NrPVwiL2RvY2tcIn0oUmF8fChSYT17fSkpO2Z1bmN0aW9uIEVhKGUsdCl7cmV0dXJuIGFzeW5jKGEsLi4ubik9PntlLmhhcyhhKSYmZS5nZXQoYSkuZm9yRWFjaCgoZT0+ZSguLi5uKSkpLHQmJmF3YWl0IHQoe2V2ZW50OmEscGF5bG9hZDpufSl9fWZ1bmN0aW9uIEZhKGUsdCl7cmV0dXJuIHQmJnQoKHQ9Pntjb25zdHtldmVudDphLHBheWxvYWQ6bn09dDtlLmhhcyhhKSYmZS5nZXQoYSkuZm9yRWFjaCgoZT0+ZSguLi5uKSkpfSkpLCh0LGEpPT57ZS5oYXModCl8fGUuc2V0KHQsbmV3IFNldCksZS5nZXQodCkuYWRkKGEpfX1mdW5jdGlvbiBWYShlKXtyZXR1cm4odCxhKT0+e2UuaGFzKHQpfHxlLnNldCh0LG5ldyBTZXQpO2NvbnN0IG49ZS5nZXQodCksbz0oLi4uZSk9PnthKC4uLmUpLG4uZGVsZXRlKG8pfTtuLmFkZChvKX19ZnVuY3Rpb24gTmEoZSl7cmV0dXJuKHQsYSk9PntlLmhhcyh0KSYmZS5nZXQodCkuZGVsZXRlKGEpfX1jb25zdCBMYT17bmFtZTptZS5Ccm93c2VyTWVudSxhbHdheXNPblRvcDohMCxhdXRvU2hvdzohMCxmcmFtZTohMSxyZXNpemFibGU6ITEsYmFja2dyb3VuZENvbG9yOlwiIzJmMzEzNlwiLHNtYWxsV2luZG93OiEwLHNob3dUYXNrYmFySWNvbjohMSxiYWNrZ3JvdW5kVGhyb3R0bGluZzohMSxzYXZlV2luZG93U3RhdGU6ITF9O2Z1bmN0aW9uIF9hKGUpe2NvbnN0IHQ9ey4uLkxhLC4uLmV9O3JldHVybiB0LnVybD1mdW5jdGlvbihlLHQpe2lmKCFEKXRocm93IG5ldyBFcnJvcihcInJlc29sdmVBYnNvbHV0ZVBhdGggY2FuIG9ubHkgYmUgdXNlZCBpbiBhIHdpbmRvd1wiKTtjb25zdCBhPXQ/P3dpbmRvdy5sb2NhdGlvbjtpZigvXig/OlthLXpdKzopP1xcL1xcLy9pLnRlc3QoZSkpcmV0dXJuIGU7Y29uc3Qgbj1gJHthLnByb3RvY29sfS8vJHthLmhvc3RuYW1lfWA7cmV0dXJuIG5ldyBVUkwoZSxuKS5ocmVmfSh0LnVybD8/XCJcIiksdH1jb25zdCBVYT1mdW5jdGlvbihlKXtjb25zdCB0PW5ldyBNYXA7cmV0dXJue2VtaXQ6RWEodCwodD0+VyYmZmluLkludGVyQXBwbGljYXRpb25CdXMucHVibGlzaChlLHQpKSksYWRkTGlzdGVuZXI6RmEodCwodD0+VyYmZmluLkludGVyQXBwbGljYXRpb25CdXMuc3Vic2NyaWJlKHt1dWlkOmZpbi5tZS51dWlkfSxlLHQpKSksYWRkTGlzdGVuZXJXaXRoVVVJRDphPT5GYSh0LCh0PT5XJiZmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5zdWJzY3JpYmUoe3V1aWQ6YX0sZSx0KSkpLHJlbW92ZUxpc3RlbmVyOk5hKHQpLG9uY2U6VmEodCl9fShcIndpbmRvdy5tZW51XCIpLE9hPShlLHQpPT5maW4uV2luZG93LndyYXBTeW5jKGUpLnVwZGF0ZU9wdGlvbnMoe29wYWNpdHk6dH0pLEdhPWU9PlVhLmVtaXQoXCJyZXNwb25zZVwiLGUpLEhhPUJhKCgoKT0+aGUoKS5nZXRDaGlsZFdpbmRvd3MoKSksNTAwKTtjb25zdCAkYT1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIEthKGUsdCxhKXtjb25zdCBuPV9hKGUpLG89YXdhaXQgZ3QoZmluLm1lLmlkZW50aXR5KSxyPWF3YWl0IGh0KGZpbi5tZS5pZGVudGl0eSk9PT1rLkRhcmssaT1vPy50aGVtZTtpZihuLmJhY2tncm91bmRDb2xvcj1pPy5bcj9rLkRhcms6ay5MaWdodF0/LnBhbGV0dGU/LmlucHV0QmFja2dyb3VuZHx8bi5iYWNrZ3JvdW5kQ29sb3IsISRhLmhhcyhuLm5hbWUpKXtyZXR1cm4gbmV3IFByb21pc2UoKG89PntVYS5vbmNlKFwicmVhZHlcIiwoYXN5bmMgZT0+e2lmKGUubmFtZT09PW4ubmFtZSl7Y29uc3QgdD1hd2FpdCAkYS5nZXQobi5uYW1lKTtuLnByZXZlbnRCbHVyfHx0Lm9uY2UoXCJibHVycmVkXCIsKGFzeW5jKCk9PntpZihPYShlLDApLHQuaGlkZSgpLEdhKHtuYW1lOm4ubmFtZSxkYXRhOnthY3Rpb25OYW1lOlwiQ2FuY2VsXCJ9fSksYT10LmlkZW50aXR5Lm5hbWUsW21lLkJyb3dzZXJTYXZlTWVudSxtZS5Eb2NrU2F2ZVdvcmtzcGFjZU1lbnUsbWUuRGVza3RvcFNpZ25hbHNNb2RhbF0uaW5jbHVkZXMoYSkpe2NvbnN0IGU9YXdhaXQgdC5nZXRPcHRpb25zKCk7XCJzdWJtaXR0aW5nXCIhPT1lLmN1c3RvbUNvbnRleHQmJlwiZXJyb3JcIiE9PWUuY3VzdG9tQ29udGV4dCYmdC5jbG9zZSgpfWVsc2UgdC5pZGVudGl0eS5uYW1lLnN0YXJ0c1dpdGgobWUuQnJvd3Nlck1lbnUpJiZ0LmNsb3NlKCk7dmFyIGF9KSksc2V0VGltZW91dCgoYXN5bmMoKT0+e2F3YWl0IE9hKGUsMSk7MSE9PShhd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKGUpLmdldE9wdGlvbnMoKSkub3BhY2l0eSYmT2EoZSwxKX0pKSxvKHQpfX0pKTtjb25zdCByPShhc3luYygpPT57Y29uc3Qgbz1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5jcmVhdGVXaW5kb3coRGUoey4uLm4sb3BhY2l0eTowLHVybDp0fHxuLnVybCxkZWZhdWx0TGVmdDphPy5sZWZ0LGRlZmF1bHRUb3A6YT8udG9wLGRlZmF1bHRXaWR0aDphPy53aWR0aCxkZWZhdWx0SGVpZ2h0OmE/LmhlaWdodCx3b3Jrc3BhY2VQbGF0Zm9ybTp7cHJldmVudEJsdXI6ZS5wcmV2ZW50Qmx1cn19LCEwKSk7cmV0dXJuIG8ub25jZShcImNsb3NlZFwiLCgoKT0+eyRhLmRlbGV0ZShuLm5hbWUpfSkpLG99KSgpOyRhLnNldChuLm5hbWUscil9KSl9cmV0dXJuICRhLmdldChuLm5hbWUpfWFzeW5jIGZ1bmN0aW9uIHphKGUsdCl7Y29uc3QgYT1fYShlKSxuPXt0b3A6YS50b3AsbGVmdDphLmxlZnQsd2lkdGg6YS5kZWZhdWx0V2lkdGh8fGEud2lkdGgsaGVpZ2h0OmEuZGVmYXVsdEhlaWdodHx8YS5oZWlnaHR9O3JldHVybiB0LnNldChcInBhcmVudE5hbWVcIixmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCkuaWRlbnRpdHkubmFtZSkse25hbWU6YS5uYW1lLGJvdW5kczpuLHJvdXRlOmAke2EudXJsfSMke3QudG9TdHJpbmcoKX1gfX1hc3luYyBmdW5jdGlvbiBKYSh7b3B0aW9uczplLHBhcmFtZXRlcnM6dH0pe2NvbnN0IGE9dD8/bmV3IFVSTFNlYXJjaFBhcmFtcyxuPV9hKGUpLHtuYW1lOm8sbW9kYWxQYXJlbnRJZGVudGl0eTpyfT1uO2lmKCFhLmhhcyhcImlzRW50ZXJwcmlzZVwiKSl7Y29uc3QgZT1gJHthd2FpdChhc3luYyBlPT4oR3R8fChHdD1hd2FpdCBVdChlKSksR3QpKShyKX1gO2Euc2V0KFwiaXNFbnRlcnByaXNlXCIsZSl9bGV0IGk9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7cmV0dXJuKGF3YWl0IEhhKCkpLmZpbmQoKHQ9PnQuaWRlbnRpdHkubmFtZT09PWUpKX0obyk7aWYoaSlhd2FpdCBhc3luYyBmdW5jdGlvbihlLHQpe2NvbnN0e25hbWU6YSxib3VuZHM6bixyb3V0ZTpvfT1hd2FpdCB6YShlLHQpLHI9e3V1aWQ6ZmluLm1lLmlkZW50aXR5LnV1aWQsbmFtZTphfSxpPWZpbi5XaW5kb3cud3JhcFN5bmMocik7YXdhaXQgUHJvbWlzZS5hbGwoW2kuaGlkZSgpLE9hKHIsMCksaS5zZXRCb3VuZHMobildKSxlLnByZXZlbnRCbHVyfHxpLm9uY2UoXCJibHVycmVkXCIsKCgpPT57T2EociwwKSxpLmhpZGUoKSxHYSh7bmFtZTpyLm5hbWUsZGF0YTp7YWN0aW9uTmFtZTpcIkNhbmNlbFwifX0pfSkpLFVhLmVtaXQoXCJ1cGRhdGVcIixhLG4sbyksYXdhaXQgR2Eoe25hbWU6YSxkYXRhOnthY3Rpb25OYW1lOlwiQ2FuY2VsXCJ9fSl9KG4sYSk7ZWxzZXtjb25zdHtyb3V0ZTp0LGJvdW5kczpvfT1hd2FpdCB6YShlLGEpO2k9YXdhaXQgS2Eoey4uLm59LHQsbyl9cmV0dXJuIGl9Y29uc3QgWmE9YXN5bmMoe29wdGlvbnM6ZSxjb250ZW50OnQscGFyYW1ldGVyczphfSk9Pntjb25zdCBuPWE/P25ldyBVUkxTZWFyY2hQYXJhbXM7bi5zZXQoXCJjb250ZW50XCIsSlNPTi5zdHJpbmdpZnkoey4uLnQsaW52b2NhdGlvbklkOm5hKCl9KSk7Y29uc3Qgbz17Li4uZSxuYW1lOmAke2UubmFtZX0tLSR7ZS5tb2RhbFBhcmVudElkZW50aXR5Py5uYW1lPz9cIlwifWB9LHI9YXdhaXQgSmEoe29wdGlvbnM6byxwYXJhbWV0ZXJzOm59KTtyZXR1cm4gbmV3IFByb21pc2UoKGU9PntVYS5vbmNlKFwicmVzcG9uc2VcIiwoYXN5bmMgdD0+e3QubmFtZT09PW8ubmFtZSYmKGUoe2RhdGE6dC5kYXRhfSksbz8uY2xvc2VPblJlc3BvbnNlJiZyLmNsb3NlKCkpfSkpfSkpfTtsZXQgcWE7YXN5bmMgZnVuY3Rpb24gamEoZSl7cmV0dXJuKGF3YWl0KHFhfHwocWE9amUoYCR7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbiYmZmluLm1lLmlkZW50aXR5LnV1aWR9LWVudGVycHJpc2UtbW9kYWxgKSgpKSxxYSkpLmRpc3BhdGNoKElhLlNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZSxlKX1jb25zdCBRYT1hc3luYyBlPT57Y29uc3QgdD15ZShlKSxhPWF3YWl0IHQuZ2V0Qm91bmRzKCksbj1rZShhKSxvPWJlKG4se2hlaWdodDoyNDAsd2lkdGg6NDMyfSk7cmV0dXJuIEphKHtvcHRpb25zOntzbWFsbFdpbmRvdzohMCxzYXZlV2luZG93U3RhdGU6ITEsc2hvd1Rhc2tiYXJJY29uOiEwLGluY2x1ZGVJblNuYXBzaG90czohMSx3b3Jrc3BhY2VQbGF0Zm9ybTp7d2luZG93VHlwZTpcImVudGVycHJpc2VcIn0scmVzaXphYmxlOiExLG5hbWU6bWUuRGVza3RvcFNpZ25hbHNNb2RhbCx1cmw6YXdhaXQgbmUoKSt6LkRlc2t0b3BTaWduYWxzTW9kYWwsZGVmYXVsdFdpZHRoOjQzMixkZWZhdWx0SGVpZ2h0OjI0MCxwcmV2ZW50Qmx1cjohMSwuLi5vfSxwYXJhbWV0ZXJzOm5ldyBVUkxTZWFyY2hQYXJhbXMoe3RpdGxlOlwiRGVza3RvcCBTaWduYWxzIE1vZGFsXCJ9KX0pfSxZYT1lPT4oe2NyZWF0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5DcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSxkZWxldGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBydChlKSkuZGlzcGF0Y2godHQuRGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksdXBkYXRlUGFnZTphc3luYyB0PT4oYXdhaXQgcnQoZSkpLmRpc3BhdGNoKHR0LlVwZGF0ZVNhdmVkUGFnZUludGVybmFsLHQpLGdldFBhZ2U6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRTYXZlZFBhZ2UsdCksZ2V0UGFnZXM6YXN5bmMgdD0+KGF3YWl0IHJ0KGUpKS5kaXNwYXRjaCh0dC5HZXRTYXZlZFBhZ2VzLHQpLHNhdmVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBydChlKSkuZGlzcGF0Y2godHQuU2F2ZVBhZ2UsdCksY3JlYXRlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuQ3JlYXRlU2F2ZWRXb3Jrc3BhY2UsdCksZGVsZXRlV29ya3NwYWNlOmFzeW5jIHQ9Pntjb25zdCBhPW1uKCksbj1hd2FpdCBhLmdldEN1cnJlbnRXb3Jrc3BhY2UoKTtpZihuLndvcmtzcGFjZUlkPT09dCl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBkZWxldGUgY3VycmVudCBhY3RpdmUgd29ya3NwYWNlICR7bi50aXRsZX1gKTtyZXR1cm4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkRlbGV0ZVNhdmVkV29ya3NwYWNlLHQpfSx1cGRhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5VcGRhdGVTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5HZXRTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2VzOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuR2V0U2F2ZWRXb3Jrc3BhY2VzLHQpLGdldFdvcmtzcGFjZXNNZXRhZGF0YTphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkdldFNhdmVkV29ya3NwYWNlc01ldGFkYXRhLHQpLHNhdmVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5TYXZlV29ya3NwYWNlLHQpLGdldERvY2tQcm92aWRlckNvbmZpZzphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkdldERvY2tQcm92aWRlckNvbmZpZyx0KSxzYXZlRG9ja1Byb3ZpZGVyQ29uZmlnOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuU2F2ZURvY2tQcm92aWRlckNvbmZpZyx0KX0pO3ZhciBYYTshZnVuY3Rpb24oZSl7ZS5VcGRhdGVQbGF0Zm9ybVRoZW1lU2NoZW1lPVwidXBkYXRlLXBsYXRmb3JtLXRoZW1lLXNjaGVtZVwifShYYXx8KFhhPXt9KSk7Y29uc3QgZW49amUoXCJvZi13b3Jrc3BhY2Utbm90aWZpY2F0aW9ucy1zeW5jXCIpLHRuPWsuRGFyayxhbj1lPT5PYmplY3QuZW50cmllcyhlKS5yZWR1Y2UoKChlLFt0LGFdKT0+YCR7ZX0tLXdvcmtzcGFjZS1wYWxldHRlLSR7dH06ICR7YX07YCksXCJcIiksbm49KGUsdCk9Pntjb25zdCBhPSEhZS5jb250ZW50QmFja2dyb3VuZDUmJlwiIzAwMDAwMFwiIT09ZS5jb250ZW50QmFja2dyb3VuZDUsbj0hIWUuY29udGVudEJhY2tncm91bmQ0JiZcIiMwMDAwMDBcIiE9PWUuY29udGVudEJhY2tncm91bmQ0LG89T2UoZS50ZXh0RGVmYXVsdCkscj1PZShlLnRleHRJbmFjdGl2ZSksaT1vLnJnYixzPXIucmdiLGM9by5hbHBoYT9wYXJzZUZsb2F0KG8uYWxwaGEudG9TdHJpbmcoKSk6MSxsPXIuYWxwaGE/cGFyc2VGbG9hdChyLmFscGhhLnRvU3RyaW5nKCkpOjE7cmV0dXJue2RvY2tFeHBhbmRlZENvbnRhaW5lckJvcmRlckNvbG9yOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNCxkb2NrRXhwYW5kZWRDb250YWluZXJCb3JkZXJSYWRpdXM6YSYmdD9cIjBcIjpcIjEwcHhcIixkb2NrRXhwYW5kZWRDb250YWluZXJCYWNrZ3JvdW5kOm4/ZS5jb250ZW50QmFja2dyb3VuZDQ6ZS5iYWNrZ3JvdW5kMSxmaWxsZXJCYWNrZ3JvdW5kQ29sb3I6bj9lLmNvbnRlbnRCYWNrZ3JvdW5kNDpcImluaGVyaXRcIixkb2NrQ29tcGFuaW9uQ29udGFpbmVyQmFja2dyb3VuZDpuP2UuY29udGVudEJhY2tncm91bmQ0OlwiaW5oZXJpdFwiLGRvY2tDb21wb25lbnRDb250YWluZXJCYWNrZ3JvdW5kOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNSxzdHlsZWREcm9wZG93bkFjdGl2ZUJhY2tncm91bmQ6YCR7YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0fWAsY29udGVudE1lbnVXcmFwcGVySW50ZXJuYWxEaXZCb3JkZXJDb2xvcjphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDUsY29udGVudE1lbnVJdGVtQ29udGFpbmVyQWN0aXZlQmFja2dyb3VuZDphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDMsY29udGVudE1lbnVJdGVtQ29udGFpbmVySG92ZXJCYWNrZ3JvdW5kOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kMixjb250ZW50TWVudUhlYWRlckJvcmRlckNvbG9yOmE/ZS5jb250ZW50QmFja2dyb3VuZDU6ZS5iYWNrZ3JvdW5kNSxkb2NrQ29tcGFuaW9uU2VwYXJhdG9yQm9yZGVyQ29sb3I6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQzLGRvY2tDb21wb25lbnRDb250YWluZXJCb3JkZXJDb2xvcjphP2UuY29udGVudEJhY2tncm91bmQ1OmUuYmFja2dyb3VuZDUsY29tcGFuaW9uRG9ja0J1dHRvbkFjdGl2ZUJhY2tncm91bmQ6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0LGNvbXBhbmlvbkRvY2tCdXR0b25Ib3ZlckJhY2tncm91bmQ6YT9lLmNvbnRlbnRCYWNrZ3JvdW5kNTplLmJhY2tncm91bmQ0LFwiY29tcHV0ZWQtc2Nyb2xsYmFyLXRodW1iLWFscGhhXCI6YyxcImNvbXB1dGVkLXNjcm9sbGJhci10cmFjay1hbHBoYVwiOmwsXCJzY3JvbGxiYXItdGh1bWItcmdiXCI6aSxcInNjcm9sbGJhci10cmFjay1yZ2JcIjpzfX0sb249KGUsdCxhKT0+KHtzZWxlY3RlZFRhYjpcImRhcmtcIj09PXQ/ZS5iYWNrZ3JvdW5kMzplLmJhY2tncm91bmQxLC4uLm5uKGUsYSl9KTtjb25zdCBybj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5wcm92aWRlclN0b3JhZ2U9ZSx0aGlzLmdldFZhcnNCeVNjaGVtZT1lPT5cImRhcmtcIj09PWU/dGhpcy5kYXJrUGFsZXR0ZVZhcnM6dGhpcy5saWdodFBhbGV0dGVWYXJzLHRoaXMuc2V0V29ya3NwYWNlU3RvcmFnZT1lPT57dGhpcy53b3Jrc3BhY2VTdG9yYWdlPWV9LHRoaXMudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlPSgpPT57aWYodGhpcy53b3Jrc3BhY2VTdG9yYWdlJiZ0aGlzLmhhc1VzZXJQcmVmZXJlbmNlKCkpe2NvbnN0IGU9dGhpcy5nZXRTY2hlbWUoKTtpZih0aGlzLndvcmtzcGFjZVN0b3JhZ2Uuc2V0SXRlbSh4dC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpLHRoaXMuZGFya1BhbGV0dGVWYXJzJiZ0aGlzLmxpZ2h0UGFsZXR0ZVZhcnMpaWYoXCJkYXJrXCI9PT1lfHxcImxpZ2h0XCI9PT1lKXRoaXMud29ya3NwYWNlU3RvcmFnZS5zZXRJdGVtKHh0LlRoZW1lUGFsZXR0ZVNoZWV0LGA6cm9vdHske3RoaXMuZ2V0VmFyc0J5U2NoZW1lKGUpfX1gKTtlbHNle2NvbnN0IGU9YEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspezpyb290IHske3RoaXMuZ2V0VmFyc0J5U2NoZW1lKFwiZGFya1wiKX19fWAsdD1gQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpezpyb290eyR7dGhpcy5nZXRWYXJzQnlTY2hlbWUoXCJsaWdodFwiKX19fWA7dGhpcy53b3Jrc3BhY2VTdG9yYWdlLnNldEl0ZW0oeHQuVGhlbWVQYWxldHRlU2hlZXQsYCR7dH0ke2V9YCl9fX0sdGhpcy5zZXRQYWxldHRlcz1hc3luYyh7bGlnaHQ6ZSxkYXJrOnR9LGEpPT57dGhpcy5saWdodFBhbGV0dGVWYXJzPWFuKHsuLi5lLC4uLm9uKGUsXCJsaWdodFwiLGEpfSksdGhpcy5kYXJrUGFsZXR0ZVZhcnM9YW4oey4uLnQsLi4ub24odCxcImRhcmtcIixhKX0pfX1oYXNVc2VyUHJlZmVyZW5jZSgpe3JldHVybiBudWxsIT09dGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbSh4dC5TZWxlY3RlZENvbG9yU2NoZW1lKX1zZXRTY2hlbWUoZSl7dGhpcy5wcm92aWRlclN0b3JhZ2Uuc2V0SXRlbSh4dC5TZWxlY3RlZENvbG9yU2NoZW1lLGUpfXNldFRoZW1lRGVmYXVsdFNjaGVtZShlKXtjb25zdCB0PU9iamVjdC52YWx1ZXMoayk7dC5pbmNsdWRlcyhlKT90aGlzLnByb3ZpZGVyU3RvcmFnZS5zZXRJdGVtKHh0LlRoZW1lUGFsZXR0ZURlZmF1bHRTY2hlbWUsZSk6Y29uc29sZS53YXJuKGBJbnZhbGlkIHRoZW1lIGRlZmF1bHQgc2NoZW1lICcke2V9Jy4gTXVzdCBiZSBvbmUgb2Y6ICR7dC5qb2luKFwiLCBcIil9LiBJZ25vcmluZyBkZWZhdWx0LmApfWdldFNjaGVtZSgpe2NvbnN0IGU9dGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbSh4dC5TZWxlY3RlZENvbG9yU2NoZW1lKSx0PXRoaXMucHJvdmlkZXJTdG9yYWdlLmdldEl0ZW0oeHQuVGhlbWVQYWxldHRlRGVmYXVsdFNjaGVtZSk7cmV0dXJuIG51bGwhPT1lP2U6dD8/dG59fShlKSxzbj0oKT0+cm4sY249ZT0+KHtnZXRUaGVtZXM6YXN5bmMoKT0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5HZXRUaGVtZXMsdm9pZCAwKSxzZXRTZWxlY3RlZFNjaGVtZTphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LlNldFNlbGVjdGVkU2NoZW1lLHQpLGdldFNlbGVjdGVkU2NoZW1lOmFzeW5jKCk9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuR2V0U2VsZWN0ZWRTY2hlbWUsdm9pZCAwKX0pLGxuPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGV0KCk7YXdhaXQgdC5kaXNwYXRjaChcInNldC1zZWxlY3RlZC1zY2hlbWVcIixlKX0sZG49YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZW4oKTthd2FpdCB0LmRpc3BhdGNoKFhhLlVwZGF0ZVBsYXRmb3JtVGhlbWVTY2hlbWUse3NjaGVtZTplfSl9LHVuPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IENlKCk7cmV0dXJuIFByb21pc2UuYWxsKHQubWFwKChhc3luYyB0PT57Y29uc3QgYT1hd2FpdCBTYSh0LmlkZW50aXR5KTthd2FpdCBhLmRpc3BhdGNoKEFhLlNldFNlbGVjdGVkU2NoZW1lLGUpfSkpKX0scG49YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgTWUoKTtyZXR1cm4gUHJvbWlzZS5hbGwodC5tYXAoKGFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IFNhKHQuaWRlbnRpdHkpO2F3YWl0IGEuZGlzcGF0Y2goQWEuU2V0U2VsZWN0ZWRTY2hlbWUsZSl9KSkpfSx3bj1hc3luYyBlPT57dHJ5e2NvbnN0IHQ9c24oKTt0LnNldFNjaGVtZShlKSxhd2FpdCBQcm9taXNlLmFsbChbYXdhaXQgdC50cnlTeW5jaHJvbml6ZVdvcmtzcGFjZVN0b3JhZ2UoKSxkbihlKSx1bihlKSxwbihlKSxsbihlKV0pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gc2V0IHRoZSBzZWxlY3RlZCBzY2hlbWU6IFwiLGUpfX0sZ249KCk9Pnt0cnl7cmV0dXJuIHNuKCkuZ2V0U2NoZW1lKCl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byBnZXQgdGhlIHNlbGVjdGVkIHNjaGVtZTogXCIsZSl9fSxobj1lPT57Y29uc3QgdD1maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSk7bGV0IGE7cmV0dXJuIE9iamVjdC5hc3NpZ24odCx7YXBwbHlTbmFwc2hvdDphc3luYyh0LGEpPT57aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiF0Py53aW5kb3dzKXRocm93IG5ldyBFcnJvcihcIk5vdCBhIHZhbGlkIGJyb3dzZXIgc25hcHNob3RcIik7cmV0dXJuIGZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5hcHBseVNuYXBzaG90KHQsYSl9LGdldFNuYXBzaG90OigpPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0U25hcHNob3QoKS50aGVuKChlPT5lKSksZ2V0Vmlld1NuYXBzaG90OnQ9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRWaWV3U25hcHNob3QodCksY3JlYXRlVmlldzoodCxhLG4pPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuY3JlYXRlVmlldyh0LGEsbiksbGF1bmNoQXBwOmFzeW5jIHQ9Pntjb25zb2xlLndhcm4oXCJsYXVuY2hBcHAgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBjcmVhdGVWaWV3IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNhZGQtYS12aWV3LXRvLWFuLWV4aXN0aW5nLXdpbmRvdyBvciAgY3JlYXRlV2luZG93IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNjcmVhdGUtYS1wbGF0Zm9ybS13aW5kb3cgaW5zdGVhZC5cIiksdC50YXJnZXR8fCh0LnRhcmdldD17dXVpZDpSLG5hbWU6RSxlbnRpdHlUeXBlOkZ8fFwidW5rbm93blwifSk7cmV0dXJuKGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5MYXVuY2hBcHAsdCl9LF9pbnZva2VDdXN0b21BY3Rpb246YXN5bmModCxhKT0+e2NvbnN0IG49YXdhaXQgb3QoZSksbz17YWN0aW9uSWQ6dCxwYXlsb2FkOnsuLi5hLGNhbGxlclR5cGU6YS5jYWxsZXJUeXBlfHxNLkFQSX19O3JldHVybiBuLmRpc3BhdGNoKHR0Lkludm9rZUN1c3RvbUFjdGlvbkludGVybmFsLG8pfSxfcmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZzphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LlJlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2dJbnRlcm5hbCx0KSxfc2hvd1VwZGF0ZVZlcnNpb25Nb2RhbDphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LlNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbCx0KSxnZXRDdXJyZW50V29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuR2V0Q3VycmVudFdvcmtzcGFjZSx0KSxhcHBseVdvcmtzcGFjZTphc3luYyh0LGEpPT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkFwcGx5V29ya3NwYWNlLHsuLi50LG9wdGlvbnM6YX0pLHJlc3RvcmVMYXN0U2F2ZWRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5SZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWwsdCksc2V0QWN0aXZlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuU2V0QWN0aXZlV29ya3NwYWNlLHQpLGdldExhbmd1YWdlOmFzeW5jKCk9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuR2V0TGFuZ3VhZ2UpLF9nZXRMYW5ndWFnZVJlc291cmNlczphc3luYygpPT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWwpLHNldExhbmd1YWdlOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuU2V0TGFuZ3VhZ2UsdCksX3JhaXNlQW5hbHl0aWNzOmFzeW5jIHQ9PntpZihhfHwoYT1hd2FpdCBudChlKSksXCJvYmplY3RcIj09dHlwZW9mIGEmJmE/LmFuYWx5dGljcz8uaXNTdXBwb3J0ZWQpe3JldHVybihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuQW5hbHl0aWNzLHQpfWUudXVpZH0sZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZzphc3luYygpPT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkdldE5vdGlmaWNhdGlvbnNDb25maWcpLF9yZWZyZXNoQm9va21hcmtzSW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWwpLF9sYXVuY2hCb29rbWFya0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuTGF1bmNoQm9va21hcmtJbnRlcm5hbCx0KSxfdXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuVXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsLHQpLF91cGRhdGVDb250ZW50TWVudUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuVXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbCx0KSxfbGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5MYXVuY2hEb2NrRW50cnlJbnRlcm5hbCx0KSxfc2V0RG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuU2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWwsdCksX3NldERlZmF1bHREb2NrQnV0dG9uc09yZGVySW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5TZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsLHQpLF9yZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsLHQpLF9hZGREb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkFkZERvY2tGYXZvcml0ZUludGVybmFsLHQpLF9uYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5OYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWwsdCksX29wZW5Eb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0IG90KGUpKS5kaXNwYXRjaCh0dC5HZXREb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWwpLF9oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCBvdChlKSkuZGlzcGF0Y2godHQuSGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbCx0KSxfZm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbDphc3luYygpPT4oYXdhaXQgb3QoZSkpLmRpc3BhdGNoKHR0LkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwpLF9zaG93QWJvdXRQYWdlUG9wdXA6YXN5bmMgZT0+KGFzeW5jIGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoey4uLmUsdGl0bGU6XCJBYm91dFwifSksYT1hd2FpdCBSZShmaW4ubWUuaWRlbnRpdHkpLG49ZS5jb3B5cmlnaHRNZXNzYWdlPzMyMDoyODYsbz1iZShhLHtoZWlnaHQ6bix3aWR0aDozNjB9KTtyZXR1cm4gSmEoe29wdGlvbnM6e2ZyYW1lOiEwLHNtYWxsV2luZG93OiEwLHNhdmVXaW5kb3dTdGF0ZTohMSxzaG93VGFza2Jhckljb246ITAsaW5jbHVkZUluU25hcHNob3RzOiExLHdvcmtzcGFjZVBsYXRmb3JtOnt3aW5kb3dUeXBlOlwiZW50ZXJwcmlzZVwifSxyZXNpemFibGU6ITEsbmFtZTptZS5BYm91dFBhZ2VXaW5kb3csdXJsOmF3YWl0IG5lKCkrei5FbnRlcnByaXNlQWJvdXRQYWdlLGRlZmF1bHRXaWR0aDozNjAsZGVmYXVsdEhlaWdodDpuLHByZXZlbnRCbHVyOiEwLC4uLm99LHBhcmFtZXRlcnM6dH0pfSkoZSksVGhlbWU6Y24oZSksQnJvd3NlcjpUYShlKSxTdG9yYWdlOllhKGUpfSl9LG1uPSgpPT5obihmaW4ubWUuaWRlbnRpdHkpLGtuPXtjb250ZXh0TWVudU9wdGlvbnM6e2VuYWJsZWQ6ITAsdGVtcGxhdGU6W1wic3BlbGxDaGVja1wiLFwic2VwYXJhdG9yXCIsXCJwcmludFwiLFwic2VwYXJhdG9yXCIsXCJjdXRcIixcImNvcHlcIixcInBhc3RlXCIsXCJ1bmRvXCIsXCJyZWRvXCIsXCJzZWxlY3RBbGxcIixcImluc3BlY3RcIixcInJlbG9hZFwiXX0sZG93bmxvYWRTaGVsZjp7ZW5hYmxlZDohMH19O2Z1bmN0aW9uIGJuKGUsdCl7cmV0dXJuIGVhKHt9LGtuLHQsZSl9Y29uc3QgeW49XCJpbnRlcm5hbC1nZW5lcmF0ZWQtdmlldy1cIixmbj0oZSx0KT0+ZS5jb250ZW50P3suLi5lLGNvbnRlbnQ6ZS5jb250ZW50Lm1hcCgoZT0+Zm4oZSx0KSkpfTp7Li4uZSxjb21wb25lbnRTdGF0ZTp0KGUuY29tcG9uZW50U3RhdGUpfSxTbj0oZSx0KT0+e3JldHVybiBhPWJuKGUsdCksey4uLmEsbmFtZTphLm5hbWU/YS5uYW1lOmBpbnRlcm5hbC1nZW5lcmF0ZWQtdmlldy0ke25hKCl9YCxfaW50ZXJuYWxXb3Jrc3BhY2VEYXRhOnsuLi5hLl9pbnRlcm5hbFdvcmtzcGFjZURhdGEsdmlld0lkZW50aWZpZXI6YS5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhPy52aWV3SWRlbnRpZmllcnx8bmEoKX19O3ZhciBhfSx2bj1lPT4oey4uLmUsbmFtZTp2b2lkIDB9KSxQbj1lPT57Y29uc3QgdD17Li4uZX07cmV0dXJuIGZuKHQsdm4pfSxDbj1lPT57Y29uc3QgdD17Li4uZX07cmV0dXJuIGZuKHQsKGU9PmUubmFtZSYmZS5uYW1lLnN0YXJ0c1dpdGgoeW4pP3ZuKGUpOmUpKX0sTW49ZT0+e2NvbnN0IHQ9W107cmV0dXJuKGUmJkFycmF5LmlzQXJyYXkoZSk/ZTpbXSkuZm9yRWFjaCgoZT0+e2lmKFwiY29tcG9uZW50XCI9PT1lLnR5cGUpcmV0dXJuIHQucHVzaChlLmNvbXBvbmVudFN0YXRlKTtjb25zdCBhPU1uKGUuY29udGVudCk7dC5wdXNoKC4uLmEpfSkpLHR9LHhuPWFzeW5jKGUsdCxhPWZlKT0+e2xldCBuO2lmKGF3YWl0IFBlKGEpKXtuPShhd2FpdCB5ZShhKS5nZXRPcHRpb25zKCkpLmxheW91dHx8e3NldHRpbmdzOnt9fX1yZXR1cm57Li4ubixjb250ZW50Olt7dHlwZTpcInN0YWNrXCIsY29udGVudDpbe3R5cGU6XCJjb21wb25lbnRcIixjb21wb25lbnROYW1lOlwidmlld1wiLGNvbXBvbmVudFN0YXRlOnt0aXRsZTplLHVybDp0fX1dfV19fTtuZXcgTWFwLG5ldyBNYXA7Y29uc3QgSW49KGUsdCk9Pntjb25zdCBhPU1uKHQuY29udGVudCk7cmV0dXJuey4uLmZuKGUsKGU9Pntjb25zdCB0PWEuZmluZCgodD0+dC5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhPy52aWV3SWRlbnRpZmllcj09PWUuX2ludGVybmFsV29ya3NwYWNlRGF0YT8udmlld0lkZW50aWZpZXIpKSxuPXQ/dC5pc0Nsb3NhYmxlOmUuaXNDbG9zYWJsZTtyZXR1cm57Li4uZSxpc0Nsb3NhYmxlOm59fSkpLHNldHRpbmdzOnQuc2V0dGluZ3N9fSxBbj1lPT5lP01uKGUpLmxlbmd0aDowLFduPShhYSgpKChhc3luYyBlPT57dHJ5e2lmKCFlfHwhZS5sYXlvdXRDb250YWluZXJLZXkpcmV0dXJuO2NvbnN0IHQ9YXdhaXQoYXN5bmMgZT0+ZmluLlBsYXRmb3JtLkxheW91dC53cmFwU3luYyh7Li4uZmluLm1lLmlkZW50aXR5LGxheW91dE5hbWU6ZX0pLmdldENvbmZpZygpKShlLmxheW91dENvbnRhaW5lcktleSksYT10LmNvbnRlbnQ/TW4odC5jb250ZW50KTpbXSxuPWEubGVuZ3RoO24+MT8oYXN5bmMgZT0+e2lmKFwibXVsdGlWaWV3XCIhPT1lLmF0dGFjaGVkUGFnZVR5cGUpe2NvbnN0IHQ9YXdhaXQgbW4oKS5Ccm93c2VyLmdldFVuaXF1ZVBhZ2VUaXRsZSgpO21uKCkuQnJvd3Nlci53cmFwU3luYyhmZSkudXBkYXRlUGFnZSh7cGFnZUlkOmUucGFnZUlkLHBhZ2U6e3RpdGxlOmUudGl0bGU/P3Qsc2luZ2xlVmlld05hbWU6bnVsbCxhdHRhY2hlZFBhZ2VUeXBlOlwibXVsdGlWaWV3XCJ9fSl9fSkoZSk6MT09PW4mJihhc3luYyhlLHQpPT57Y29uc3QgYT1tbigpLkJyb3dzZXIud3JhcFN5bmMoZmUpO2lmKFwic2luZ2xlVmlld1wiIT09ZS5hdHRhY2hlZFBhZ2VUeXBlKXtjb25zdCBuPWF3YWl0IHVhKGUpO2RlbGV0ZSBuLmxheW91dCxkZWxldGUgbi5wYWdlSWQ7Y29uc3Qgbz1maW4uVmlldy53cmFwU3luYyh7dXVpZDpmZS51dWlkLG5hbWU6dH0pLHI9YXdhaXQgby5nZXRJbmZvKCksaT17Li4ubix0aXRsZTpudWxsLHNpbmdsZVZpZXdOYW1lOnQsaGFzVW5zYXZlZENoYW5nZXM6ITEsYXR0YWNoZWRQYWdlVHlwZTpcInNpbmdsZVZpZXdcIixwYWdlSWNvbjpyLmZhdmljb25zWzBdfTthd2FpdCBhLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDplLnBhZ2VJZCxwYWdlOml9KX19KShlLGFbMF0ubmFtZSksYXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9cGEoey4uLmZlLGxheW91dE5hbWU6ZS5sYXlvdXRDb250YWluZXJLZXl9KSxuPWF3YWl0IGEuaXNTaG93aW5nVGFicygpO3Q+MT9ufHxhd2FpdCBhLnNob3coKToxPT09dCYmbiYmYXdhaXQgYS5oaWRlKHtzZXR0aW5nczp7cmVvcmRlckVuYWJsZWQ6ITB9fSl9KShlLG4pfWNhdGNoKGUpe319KSw1MCx7bGVhZGluZzohMSx0cmFpbGluZzohMH0pLHJlcXVpcmUoXCJyZWFjdC1pMThuZXh0XCIpKSxEbj1yZXF1aXJlKFwiaTE4bmV4dFwiKTt2YXIgVG49YS5uKERuKTtjb25zdCBCbj1KU09OLnBhcnNlKCd7XCJjb250ZXh0TWVudS5uZXdXaW5kb3dcIjpcIuaWsOW7uueql+WPo1wiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwi5paw5bu66aG16Z2iXCIsXCJjb250ZXh0TWVudS5yZXN0b3JlXCI6XCLov5jljp/liLDkuIrmrKHkv53lrZjnmoTmm7TmlLlcIixcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiOlwi5YiH5o2i5bel5L2c5Yy6XCIsXCJjb250ZXh0TWVudS5tYW5hZ2VEZXNrdG9wU2lnbmFsc1wiOlwiTWFuYWdlIERlc2t0b3AgU2lnbmFsc1wiLFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiOlwi5aSW6KeCXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCLkv53lrZjlt6XkvZzljLpcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi5bCG5bel5L2c5Yy65Y+m5a2Y5Li6Li4uXCIsXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIjpcIumHjeWRveWQjeW3peS9nOWMulwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCLliKDpmaTlt6XkvZzljLpcIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwi5LiL6L29XCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwi5L+d5a2Y6aG16Z2iXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCLlsIbpobXpnaLlj6blrZjkuLouLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCLmiZPljbAuLi5cIixcImNvbnRleHRNZW51LnByaW50U2NyZWVuXCI6XCLmiZPljbDlsY/luZVcIixcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCI6XCLlhbPpl63nqpflj6NcIixcImNvbnRleHRNZW51Lm9wZW5TdG9yZWZyb250XCI6XCLlvIDmlL7lvI/lupfpnaJcIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi6YCA5Ye65bmz5Y+wXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLmlrDlu7rop4blm75cIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLkvb/nlKjpu5jorqQgV2ViIOa1j+iniOWZqOaJk+W8gOinhuWbvlwiLFwiY29udGV4dE1lbnUub3BlblZpZXdzXCI6XCLkvb/nlKjpu5jorqQgV2ViIOa1j+iniOWZqOaJk+W8gOinhuWbvlwiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgQ05cIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcIumHjeaWsOWKoOi9veinhuWbvlwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIumHjeaWsOWKoOi9veinhuWbvlwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgQ05cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIuWkjeWItuinhuWbvlwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld3NcIjpcIuWkjeWItuinhuWbvlwiLFwiY29udGV4dE1lbnUuYWRkVmlld1wiOlwi5bCG6KeG5Zu+5re75Yqg5Yiw6aKR6YGTXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwi5bCG6KeG5Zu+5re75Yqg5Yiw6aKR6YGTXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3XCI6XCLku47popHpgZPkuK3np7vpmaTop4blm75cIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCLku47popHpgZPkuK3np7vpmaTop4blm75cIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwi5YWz6Zet6KeG5Zu+XCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdzXCI6XCLlhbPpl63op4blm75cIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgQ05cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIuWkjeWItumhtemdolwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiOlwi5omT5Y2wXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCI6XCLlhajpg6jmiZPljbBcIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi5bCG5bel5L2c5Yy65Y+m5a2Y5Li6XCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCLlsIbpobXpnaLlj6blrZjkuLpcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBDTlwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9fSDlt7LlrZjlnKjjgIJcIixcInNhdmVNb2RhbC5wbGVhc2VFbnRlclZhbGlkTmFtZVwiOlwi6K+36L6T5YWl5pyJ5pWI5ZCN56ewXCIsXCJzYXZlTW9kYWwucmVuYW1lUGFnZVwiOlwi6YeN5paw5ZG95ZCN6aG16Z2iXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCLlhbPpl63pobXpnaJcIixcInNhdmVNb2RhbC5kaXNjYXJkQ2hhbmdlc1wiOlwi5pS+5byD5pu05pS5XCIsXCJzYXZlTW9kYWwuZGlzY2FyZEFsbFwiOlwi5YWo6YOo5pS+5byDXCIsXCJzYXZlTW9kYWwuc2F2ZUFsbFwiOlwi5YWo6YOo5L+d5a2YXCIsXCJzYXZlTW9kYWwuc2F2ZVBhZ2VzQ291bnRcIjpcIuWFs+mXreWJjeS/neWtmCAoe3tjb3VudH19KSDkuKrpobXpnaLvvJ9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2UgQ05cIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYiBDTlwiLFwiYWRkTmV3UGFnZVwiOlwi5re75Yqg5paw6aG16Z2iXCIsXCJhZGROZXdUYWJcIjpcIua3u+WKoOaWsOmAiemhueWNoVwiLFwiYWRkTmV3Vmlld1wiOlwi5paw5bu66KeG5Zu+XCIsXCJyZXN0b3JlTW9kYWxcIjpcIuaCqOehruWumuimgei/mOWOn+WIsOS4iuasoeS/neWtmOeahOabtOaUueWQl++8n1wiLFwibW9kYWwuZGlzY2FyZFdhcm5pbmdcIjpcIuS7u+S9leacquS/neWtmOeahOabtOaUuemDveWwhuS4ouWksVwiLFwibW9kYWwuZGlzY2FyZFBhZ2VXYXJuaW5nXCI6XCLlr7nmraTpobXnmoTku7vkvZXmnKrkv53lrZjnmoTmm7TmlLnpg73lsIbkuKLlpLHjgIJcIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCLlhbPpl63liY3kv53lrZjmm7TmlLnvvJ9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwi5YWz6Zet6aG16Z2iXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbFwiOlwi5oKo56Gu5a6a6KaB5YiH5o2i5YiwIHt7d29ya3NwYWNlfX0g5ZCX77yfXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLku7vkvZXmnKrkv53lrZjnmoTmm7TmlLnpg73lsIbkuKLlpLFcIixcImRlbGV0ZVdvcmtzcGFjZU1vZGFsXCI6XCLmgqjnoa7lrpropoHmsLjkuYXliKDpmaTmraTlt6XkvZzljLrlkJfvvJ9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLlkI3np7DkuLoge3t3b3Jrc3BhY2V9fSDnmoTlt6XkvZzljLrlt7LlrZjlnKjjgILmgqjmmK/lkKbopoHmm7/mjaLlroPvvJ9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcIuW3suWtmOWcqOWQjOWQjeeahOW3peS9nOWMuuOAguabv+aNouWug+WwhuimhuebluWFtuW9k+WJjeWGheWuueOAglwiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLnJlcGxhY2VcIjpcIuabv+aNolwiLFwiY2xvc2VQbGF0Zm9ybVwiOlwi5YWz6Zet5bmz5Y+wXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwi5YWz6ZetIHt7d29ya3NwYWNlfX0g5bmz5Y+wXCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcIuWFs+mXreW5s+WPsOWwhuWFs+mXreaJgOacieW3peS9nOWMuuOAgeW6lOeUqOaIluS7u+S9leato+WcqOi/kOihjOeahOi/m+eoi+OAglwiLFwiYmFja1wiOlwi5ZCO6YCAXCIsXCJmb3J3YXJkXCI6XCLliY3ov5tcIixcInJlbG9hZFwiOlwi6YeN5paw5Yqg6L29XCIsXCJncmVlblwiOlwi57u/6ImyXCIsXCJwdXJwbGVcIjpcIue0q+iJslwiLFwib3JhbmdlXCI6XCLmqZnoibJcIixcInJlZFwiOlwi57qi6ImyXCIsXCJwaW5rXCI6XCLnsonnuqLoibJcIixcInllbGxvd1wiOlwi6buE6ImyXCIsXCJ0aGVtZS5saWdodFwiOlwi5rWF6ImyXCIsXCJ0aGVtZS5kYXJrXCI6XCLmt7HoibJcIixcInRoZW1lLnN5c3RlbVwiOlwi5LiO5pON5L2c57O757uf6K6+572u5ZCM5q2lXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLpmpDol4/pgInpobnljaFcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIuaYvuekuumAiemhueWNoVwiLFwidG9vbGJhci5sb2NrXCI6XCLplIHlrppcIixcInRvb2xiYXIudW5sb2NrXCI6XCLop6PplIFcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLpopzoibLpk77mjqVcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLmm7TmlLnluIPlsYBcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuS/neWtmOiPnOWNlVwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi5pyA5aSn5YyW56qX5Y+jXCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIui/mOWOn+eql+WPo1wiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi5pyA5bCP5YyW56qX5Y+jXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLlhajlrr1cIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLliJfmlbBcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLooYzmlbBcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLnvZHmoLxcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIuW3suWIh+aNouW3peS9nOWMulwiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIumAiemhueWNoeW3sumakOiXj1wiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwi6YCJ6aG55Y2h5bey5pi+56S6XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi6aG16Z2i5bey6ZSB5a6aXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLpobXpnaLlt7Lop6PplIFcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuW3peS9nOWMuuW3suS/neWtmFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLlt6XkvZzljLrlt7Llj6blrZjkuLoge3t3b3Jrc3BhY2V9fVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCLlt6XkvZzljLrlt7Lph43lkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLpobXpnaLlt7Lkv53lrZhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBDTlwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLpobXpnaLlt7Llj6blrZjkuLoge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLpobXpnaLlt7Lph43lkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi5bey5bqU55So5LiK5LiL5paH57uEXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwi5bey5bqU55SoIHt7Y29sb3JOYW1lfX0g5LiK5LiL5paH57uEXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdSZW1vdmVkXCI6XCLku47kuIrkuIvmlofnu4TkuK3np7vpmaTop4blm75cIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCLku47kuIrkuIvmlofnu4TkuK3np7vpmaTop4blm75cIixcInN1Y2Nlc3NJbmRpY2F0b3IubGF5b3V0QXBwbGllZFwiOlwi5bey5bqU55SoIHt7bGF5b3V0TmFtZX19IOW4g+WxgFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCLlt6XkvZzljLrlt7LliKDpmaRcIixcImVycm9ySW5kaWNhdG9yLnBhZ2VTYXZlRmFpbGVkXCI6XCLpobXpnaLkv53lrZjlpLHotKVcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIuW3peS9nOWMuuS/neWtmOWksei0pVwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCLlpI3liLbpobXpnaLlpLHotKVcIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwi5oiR5Lus5bCd6K+V5a+55q2k6YCJ6aG55Y2h6L+b6KGM6aKc6Imy6ZO+5o6l77yM5L2G572R56uZL+WGheWuueaJgOacieiAheWwmuacquWQr+eUqOivpeWKn+iDvVwiLFwiZ2xvYmFsLmNhbmNlbFwiOlwi5Y+W5raIXCIsXCJnbG9iYWwuY29uZmlybVwiOlwi56Gu6K6kXCIsXCJnbG9iYWwuc2F2ZVwiOlwi5L+d5a2YXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGUgQ05cIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50IENOXCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZCBDTlwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZSBDTlwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwi5omT5byA5rWP6KeI5Zmo6I+c5Y2VXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCLmtY/op4jlmajpgInpobnljaFcIixcImFyaWEudmlld1RhYlwiOlwi5p+l55yLIHt7dGl0bGV9fSDnmoTpgInpobnljaFcIixcImFyaWEuY2xvc2VQYWdlXCI6XCLlhbPpl60ge3t0aXRsZX19IOeahOmhtemdoumAiemhueWNoeaMiemSrlwiLFwiYXJpYS5jbG9zZVRhYlwiOlwi5YWz6Zet6YCJ6aG55Y2hIHt7dGl0bGV9fVwiLFwiYXJpYS50aXRsZVwiOlwi5qCH6aKYXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLkvb/nlKjovazkuYnlhbPpl63kuIrkuIvmlofnu4TpgInmi6nlr7nor53moYZcIixcImFyaWEuY29sb3JMaW5raW5nXCI6XCLmmL7npLrmiJbpmpDol4/popzoibLpk77mjqVcIixcImFyaWEuYXBwbHlDb2xvckxpbmtpbmdcIjpcIuivt+mAieaLqeS4gOS4quinhuWbvuS7peW6lOeUqOminOiJsumTvuaOpVwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld1wiOlwi5YiG6YWN57uZIHt7bmFtZX19IOS4iuS4i+aWh+e7hOeahOW9k+WJjeinhuWbvlwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIuWIhumFjee7mSB7e25hbWV9fSDkuIrkuIvmlofnu4TnmoTlvZPliY3op4blm75cIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld1wiOlwi5bCG5rS75Yqo6KeG5Zu+6K6+572u5Li6IHt7bmFtZX19IOS4iuS4i+aWh+e7hFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwi5bCG5rS75Yqo6KeG5Zu+6K6+572u5Li6IHt7bmFtZX19IOS4iuS4i+aWh+e7hFwiLFwiYXJpYS5lc2NhcGVMYXlvdXREaWFsb2dcIjpcIuS9v+eUqOi9rOS5ieWFs+mXreabtOaUueW4g+WxgOWvueivneahhlwiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYiBDTlwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiIENOXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrIENOXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWQgQ05cIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lIENOXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmUgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsIENOXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3MgQ05cIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3MgQ05cIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlcyBDTlwiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrcyBDTlwiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dCBDTlwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXIgQ05cIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlciBDTlwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlciBDTlwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXIgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5ncyBDTlwiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3MgQ05cIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZCBDTlwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIENOXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldCBDTlwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlciBDTlwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19IENOXCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnMgQ05cIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW4gQ05cIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lIENOXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZSBDTlwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWQgQ05cIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiIENOXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkIENOXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiIENOXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi4gQ05cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBDTlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWIgQ05cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWIgQ05cIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcyBDTlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbFwiOntcInNhdmVTdXBlcnRhYkNvdW50X29uZVwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWIgYmVmb3JlIGNsb3Npbmc/IENOXCIsXCJzYXZlU3VwZXJ0YWJDb3VudF9vdGhlclwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWJzIGJlZm9yZSBjbG9zaW5nPyBDTlwifSxcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIjpcIlJlbmFtZSBDTlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC51bnNhdmVkQ2hhbmdlc1wiOlwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIGluIHRoaXMgVGFiLiBDTlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIENOXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcIkNsb3NlIFN1cGVydGFiIENOXCIsXCJlbnRlcnByaXNlTW9kYWwuZGlzY2FyZFN1cGVydGFiV2FybmluZ1wiOlwiQW55IHVuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuIENOXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSB0aGUgXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiPyBDTlwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiV2FybmluZ1wiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIFN1cGVydGFiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lIGFuZCBpcyBwZXJtYW5lbnQuIENOXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYlNhdmVkXCI6XCJTdXBlcnRhYiBTYXZlZCBDTlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBzYXZlZC4gQ05cIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiRGVsZXRlZFwiOlwiU3VwZXJ0YWIgRGVsZXRlZCBDTlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuRGVsZXRlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIGRlbGV0ZWQuIENOXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVUYWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgVGFiIENOXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVTdXBlcnRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBTdXBlcnRhYiBDTlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuc3dpdGNoVG9TdXBlcnRhYlwiOlwiU3dpdGNoIHRvIFN1cGVydGFiIENOXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5nb1RvXCI6XCJHbyB0byB7e3R5cGV9fSBDTlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIudmlld01vcmVcIjpcIlZpZXcgTW9yZSBDTlwiLFwic2lkZVBhbmVsLmFpQ2VudGVyXCI6XCJBSSBDZW50ZXIgQ05cIixcInNpZGVQYW5lbC5uZXdDaGF0XCI6XCJOZXcgQ2hhdCBDTlwiLFwic2lkZVBhbmVsLnRvZ2dsZVNpZGVQYW5lbFwiOlwiVG9nZ2xlIFNpZGUgUGFuZWwgQ05cIixcInNpZGVQYW5lbC5jbG9zZVNpZGVQYW5lbFwiOlwiQ2xvc2UgU2lkZSBQYW5lbCBDTlwiLFwic2lkZVBhbmVsLm9wZW5BaUNlbnRlclwiOlwiT3BlbiBBSSBDZW50ZXIgQ05cIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdCBDTlwiLFwiZG9jay5yZW1vdmVGYXZvcml0ZVwiOlwiUmVtb3ZlIENOXCJ9JyksUm49SlNPTi5wYXJzZSgne1wiY29udGV4dE1lbnUubmV3V2luZG93XCI6XCLmlrDoppbnqpdcIixcImNvbnRleHRNZW51Lm5ld1BhZ2VcIjpcIuaWsOmggemdolwiLFwiY29udGV4dE1lbnUucmVzdG9yZVwiOlwi6YKE5Y6f5Yiw5LiK5qyh5YSy5a2Y55qE6K6K5pu0XCIsXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIjpcIuWIh+aPm+W3peS9nOepuumWk1wiLFwiY29udGV4dE1lbnUubWFuYWdlRGVza3RvcFNpZ25hbHNcIjpcIk1hbmFnZSBEZXNrdG9wIFNpZ25hbHNcIixcImNvbnRleHRNZW51LmFwcGVhcmFuY2VcIjpcIuWkluingFwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZVwiOlwi5YSy5a2Y5bel5L2c56m66ZaTXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIuWwh+W3peS9nOepuumWk+WPpuWtmOeCui4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCLph43mlrDlkb3lkI3lt6XkvZznqbrplpNcIixcImNvbnRleHRNZW51LmRlbGV0ZVdvcmtzcGFjZVwiOlwi5Yiq6Zmk5bel5L2c56m66ZaTXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcIuS4i+i8iVwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VcIjpcIuWEsuWtmOmggemdolwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiOlwi5bCH6aCB6Z2i5Y+m5a2Y54K6Li4uXCIsXCJjb250ZXh0TWVudS5wcmludFwiOlwi5YiX5Y2wLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiOlwi5pO35Y+W55Wr6Z2iXCIsXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiOlwi6Zec6ZaJ6KaW56qXXCIsXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiOlwi5omT6ZaLIFN0b3JlZnJvbnRcIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi6YCA5Ye65bmz5Y+wXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLmlrDoppblnJZcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLkvb/nlKjpoJDoqK3ntrLpoIHngI/opr3lmajmiZPplovoppblnJZcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwi5L2/55So6aCQ6Kit57ay6aCB54CP6Ka95Zmo5omT6ZaL6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5yZWxvYWRcIjpcIlJlbG9hZCBaSFwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld1wiOlwi6YeN5paw6LyJ5YWl6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwi6YeN5paw6LyJ5YWl6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBaSFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld1wiOlwi6KSH5a+r6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwi6KSH5a+r6KaW5ZyWXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCLlsIfoppblnJbmlrDlop7oh7PpoLvpgZNcIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCLlsIfoppblnJbmlrDlop7oh7PpoLvpgZNcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIuW+numgu+mBk+S4reenu+mZpOimluWcllwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIuW+numgu+mBk+S4reenu+mZpOimluWcllwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCLpl5zplonoppblnJZcIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcIumXnOmWieimluWcllwiLFwiY29udGV4dE1lbnUuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBaSFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlUGFnZVwiOlwi6KSH5a+r6aCB6Z2iXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCLliJfljbBcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIjpcIuWIl+WNsOWFqOmDqFwiLFwic2F2ZU1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLlsIflt6XkvZznqbrplpPlj6blrZjngrpcIixcInNhdmVNZW51LnNhdmVQYWdlQXNcIjpcIumggemdouWPpuWtmOeCulwiLFwic2F2ZU1vZGFsLmVudGVyVmFsdWVcIjpcIlBsZWFzZSBlbnRlciBhIHZhbHVlIFpIXCIsXCJzYXZlTW9kYWwuYWxyZWFkeUV4aXN0c1wiOlwie3t0aXRsZX19IOW3sue2k+WtmOWcqOOAglwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCLoq4vovLjlhaXkuIDlgIvmnInmlYjnmoTlkI3nqLFcIixcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCI6XCLph43mlrDlkb3lkI3poIHpnaJcIixcInNhdmVNb2RhbC5jbG9zZVBhZ2VcIjpcIumXnOmWiemggemdolwiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLmjajmo4Torormm7RcIixcInNhdmVNb2RhbC5kaXNjYXJkQWxsXCI6XCLlhajpg6jmjajmo4RcIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCLlhLLlrZjlhajpg6hcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwi6KaB5YWI5YSy5a2YICh7e2NvdW50fX0pIOWAi+mggemdouWGjemXnOmWieWXju+8n1wiLFwiZGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgUGFnZSBaSFwiLFwiZW50ZXJwcmlzZURlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFN1cGVydGFiIFpIXCIsXCJhZGROZXdQYWdlXCI6XCLmlrDlop7mlrDpoIHpnaJcIixcImFkZE5ld1RhYlwiOlwi5paw5aKe5paw57Si5byV5qiZ57GkXCIsXCJhZGROZXdWaWV3XCI6XCLmlrDoppblnJZcIixcInJlc3RvcmVNb2RhbFwiOlwi5oKo56K65a6a6KaB6YKE5Y6f5Yiw5LiK5qyh5YSy5a2Y55qE6K6K5pu05ZeO77yfXCIsXCJtb2RhbC5kaXNjYXJkV2FybmluZ1wiOlwi5Lu75L2V5pyq5YSy5a2Y55qE6K6K5pu06YO95bCH6KKr5o2o5qOEXCIsXCJtb2RhbC5kaXNjYXJkUGFnZVdhcm5pbmdcIjpcIuWcqOatpOmggemdouS7u+S9leacquWEsuWtmOeahOiuiuabtOmDveWwh+mBuuWkseOAglwiLFwibW9kYWwuc2F2ZUNoYW5nZXNQcm9tcHRcIjpcIuimgeWFiOWEsuWtmOiuiuabtOWGjemXnOmWieWXju+8n1wiLFwibW9kYWwucGFnZUNsb3NlXCI6XCLpoIHpnaLpl5zplolcIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCI6XCLmgqjnorrlrpropoHliIfmj5vliLAge3t3b3Jrc3BhY2V9fe+8n1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi5Lu75L2V5pyq5YSy5a2Y55qE6K6K5pu06YO95bCH6KKr5o2o5qOEXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwi5oKo56K65a6a6KaB5rC45LmF5Yiq6Zmk5q2k5bel5L2c56m66ZaT5ZeO77yfXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi5YW35pyJ5ZCN56ixIHt7d29ya3NwYWNlfX0g55qE5bel5L2c56m66ZaT5bey57aT5a2Y5Zyo44CC5L2g6KaB5pu05o+b5a6D5ZeO77yfXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCLnm7jlkIzlkI3nqLHnmoTlt6XkvZznqbrplpPlt7LntpPlrZjlnKjjgILmm7Tmj5vlroPlvozvvIzlsIfmnIPopobok4vnm67liY3lhaflrrnjgIJcIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC5yZXBsYWNlXCI6XCLmm7Tmj5tcIixcImNsb3NlUGxhdGZvcm1cIjpcIumXnOmWieW5s+WPsFwiLFwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIjpcIumXnOmWiSB7e3dvcmtzcGFjZX19IOW5s+WPsFwiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCLpl5zplonlubPlj7DlvozvvIzlsIfpl5zplonmraPlnKjln7fooYznmoTku7vkvZXlt6XkvZznqbrplpPjgIFBUFAg5oiW5rWB56iL44CCXCIsXCJiYWNrXCI6XCLkuIrkuIDpoIFcIixcImZvcndhcmRcIjpcIuS4i+S4gOmggVwiLFwicmVsb2FkXCI6XCLph43mlrDovInlhaVcIixcImdyZWVuXCI6XCLntqBcIixcInB1cnBsZVwiOlwi57SrXCIsXCJvcmFuZ2VcIjpcIuapmFwiLFwicmVkXCI6XCLntIXoibJcIixcInBpbmtcIjpcIueyiee0hVwiLFwieWVsbG93XCI6XCLpu4NcIixcInRoZW1lLmxpZ2h0XCI6XCLmt7pcIixcInRoZW1lLmRhcmtcIjpcIua3sVwiLFwidGhlbWUuc3lzdGVtXCI6XCLoiIcgT1Mg6Kit5a6a5ZCM5q2lXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLpmrHol4/ntKLlvJXmqJnnsaRcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIumhr+ekuue0ouW8leaomeexpFwiLFwidG9vbGJhci5sb2NrXCI6XCLkuIrpjpZcIixcInRvb2xiYXIudW5sb2NrXCI6XCLop6PpjpZcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLpoY/oibLpgKPntZBcIixcInRvb2xiYXIuY2hhbmdlTGF5b3V0XCI6XCLorormm7TniYjpnaJcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIuWEsuWtmOmBuOWWrlwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi5pyA5aSn5YyW6KaW56qXXCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIumChOWOn+imlueql1wiLFwidG9vbGJhci5taW5pbWl6ZVdpbmRvd1wiOlwi5pyA5bCP5YyW6KaW56qXXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLlhajonqLluZXlr6zluqZcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLooYxcIixcImNoYW5nZUxheW91dC5Sb3dzXCI6XCLliJdcIixcImNoYW5nZUxheW91dC5HcmlkXCI6XCLntrLmoLxcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIuW3peS9nOepuumWk+W3suWIh+aPm1wiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIue0ouW8leaomeexpOW3sumaseiXj1wiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwi57Si5byV5qiZ57Gk5bey6aGv56S6XCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxvY2tlZFwiOlwi6aCB6Z2i5bey5LiK6Y6WXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLpoIHpnaLlt7Lop6PpjpZcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcIuW3peS9nOepuumWk+W3suWEsuWtmFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLlt6XkvZznqbrplpPlt7Llj6blrZjngroge3t3b3Jrc3BhY2V9fVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCLlt6XkvZznqbrplpPlt7Lph43mlrDlkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLpoIHpnaLlt7LlhLLlrZhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBaSFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLpoIHpnaLlt7Llj6blrZjngroge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLpoIHpnaLlt7Lph43mlrDlkb3lkI1cIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi6ISI57Wh576k57WE5bey5aWX55SoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9fSDohIjntaHnvqTntYTlt7LlpZfnlKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIuW+nuiEiOe1oee+pOe1hOS4reenu+mZpOeahOimluWcllwiLFwic3VjY2Vzc0luZGljYXRvci52aWV3c1JlbW92ZWRcIjpcIuW+nuiEiOe1oee+pOe1hOS4reenu+mZpOeahOimluWcllwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSDniYjpnaLlt7LlpZfnlKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlRGVsZXRlZFwiOlwi5bel5L2c56m66ZaT5bey5Yiq6ZmkXCIsXCJlcnJvckluZGljYXRvci5wYWdlU2F2ZUZhaWxlZFwiOlwi6aCB6Z2i54Sh5rOV5YSy5a2YXCIsXCJlcnJvckluZGljYXRvci53b3Jrc3BhY2VTYXZlRmFpbGVkXCI6XCLlt6XkvZznqbrplpPnhKHms5XlhLLlrZhcIixcImVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlUGFnZVwiOlwi54Sh5rOV6KSH5a+r6aCB6Z2iXCIsXCJpbmZvSW5kaWNhdG9yLmNvbG9yTGlua0F0dGVtcHRcIjpcIuaIkeWAkeWYl+ippuWwjeatpOe0ouW8leaomeexpOmAsuihjOmhj+iJsumAo+e1kO+8jOS9hue2suermS/lhaflrrnmiYDmnInogIXlsJrmnKrllZ/nlKjoqbLlip/og71cIixcImdsb2JhbC5jYW5jZWxcIjpcIuWPlua2iFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIueiuuiqjVwiLFwiZ2xvYmFsLnNhdmVcIjpcIuWEsuWtmFwiLFwiZ2xvYmFsLmRlbGV0ZVwiOlwiRGVsZXRlIFpIXCIsXCJhcHBSZXN1bHRzLmhlYWRlclwiOlwiRmVhdHVyZWQgQ29udGVudCBaSFwiLFwicmVjZW50bHlDbG9zZWQuaGVhZGVyXCI6XCJSZWNlbnRseSBDbG9zZWQgWkhcIixcImxhbmRpbmdQYWdlLnN1YmhlYWRlclwiOlwiQXBwcyBhbmQgd2Vic2l0ZXMgc2VsZWN0ZWQgYnkgYW4gYWRtaW4gd2lsbCBzaG93IGhlcmUgWkhcIixcImFyaWEub3BlbkJyb3dzZXJcIjpcIumWi+WVn+eAj+imveWZqOmBuOWWrlwiLFwiYXJpYS5icm93c2VyVGFic1wiOlwi54CP6Ka95Zmo57Si5byV5qiZ57GkXCIsXCJhcmlhLnZpZXdUYWJcIjpcInt7dGl0bGV9fSDnmoToppblnJbntKLlvJXmqJnnsaRcIixcImFyaWEuY2xvc2VQYWdlXCI6XCLpl5zplokge3t0aXRsZX19IOeahOmggemdoue0ouW8leaomeexpOaMiemIlVwiLFwiYXJpYS5jbG9zZVRhYlwiOlwi6Zec6ZaJ57Si5byV5qiZ57GkIHt7dGl0bGV9fVwiLFwiYXJpYS50aXRsZVwiOlwi5qiZ6aGMXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLkvb/nlKggRXNjIOmNtemXnOmWieiEiOe1oee+pOe1hOmBuOWPluWwjeipseahhlwiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcIumhr+ekuuaIlumaseiXj+mhj+iJsumAo+e1kFwiLFwiYXJpYS5hcHBseUNvbG9yTGlua2luZ1wiOlwi6KuL6YG45Y+W6KaB5aWX55So6aGP6Imy6YCj57WQ55qE6KaW5ZyWXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCLnm67liY3oppblnJbliIbphY3ntaYge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3c1wiOlwi55uu5YmN6KaW5ZyW5YiG6YWN57WmIHt7bmFtZX19IOiEiOe1oee+pOe1hFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCLlsIfllZ/nlKjoppblnJboqK3lrprngroge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCLlsIfllZ/nlKjoppblnJboqK3lrprngroge3tuYW1lfX0g6ISI57Wh576k57WEXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwi5L2/55SoIEVzYyDpjbXpl5zplonorormm7TniYjpnaLlsI3oqbHmoYZcIixcImdsb2JhbC5zdXBlcnRhYlwiOlwiU3VwZXJ0YWIgWkhcIixcImdsb2JhbC50YWJcIjpcIlRhYiBaSFwiLFwiYm9va21hcmtzLmVkaXRCb29rbWFya1wiOlwiRWRpdCBCb29rbWFyayBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRcIjpcIkJvb2ttYXJrIGFkZGVkIFpIXCIsXCJib29rbWFya3MuZG9uZVwiOlwiRG9uZSBaSFwiLFwiYm9va21hcmtzLnJlbW92ZVwiOlwiUmVtb3ZlIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtzUGFuZWxcIjpcIkJvb2ttYXJrcyBQYW5lbCBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1wiOlwiQm9va21hcmtzIFpIXCIsXCJib29rbWFya3MuYWxsQm9va21hcmtzXCI6XCJBbGwgQm9va21hcmtzIFpIXCIsXCJib29rbWFya3MuZmF2b3JpdGVzXCI6XCJGYXZvcml0ZXMgWkhcIixcImJvb2ttYXJrcy5zZWFyY2hCb29rbWFya3NcIjpcIlNlYXJjaCBCb29rbWFya3MgWkhcIixcImJvb2ttYXJrcy5jbGVhclNlYXJjaElucHV0XCI6XCJDbGVhciBTZWFyY2ggSW5wdXQgWkhcIixcImJvb2ttYXJrcy5jcmVhdGVGb2xkZXJcIjpcIkNyZWF0ZSBOZXcgRm9sZGVyIFpIXCIsXCJib29rbWFya3MuZXhpdEZvbGRlclwiOlwiRXhpdCBGb2xkZXIgWkhcIixcImJvb2ttYXJrcy5uZXdGb2xkZXJcIjpcIk5ldyBGb2xkZXIgWkhcIixcImJvb2ttYXJrcy5uYW1lZEZvbGRlclwiOlwie3tuYW1lfX0gRm9sZGVyIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtTZXR0aW5nc1wiOlwie3tuYW1lfX0gQm9va21hcmsgU2V0dGluZ3MgWkhcIixcImJvb2ttYXJrcy5mb2xkZXJTZXR0aW5nc1wiOlwie3tuYW1lfX0gRm9sZGVyIFNldHRpbmdzIFpIXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRcIjpcIk5vIHJlc3VsdHMgZm91bmQgWkhcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFN1YnRleHRcIjpcIlRoZXJlIGFyZSBubyBib29rbWFya3MgdGhhdCBtYXRjaCB5b3VyIHNlYXJjaCBaSFwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dcIjpcIk5vdGhpbmcgdG8gc2hvdyB5ZXQgWkhcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93U3VidGV4dFwiOlwiQWRkIGEgYm9va21hcmsgdG8gdGhpcyBmb2xkZXIgWkhcIixcImJvb2ttYXJrcy5yZXN1bHRzRm91bmRJblwiOlwiUmVzdWx0cyBmb3VuZCBpbiB7e25hbWV9fSBaSFwiLFwiYm9va21hcmtzLnJlc3VsdHNJbk90aGVyRm9sZGVyc1wiOlwiUmVzdWx0cyBmb3VuZCBpbiBvdGhlciBmb2xkZXJzIFpIXCIsXCJib29rbWFya3MuYWxsUmVzdWx0c0ZvdW5kSW5cIjpcIkFsbCByZXN1bHRzIGZvdW5kIGluIFpIXCIsXCJib29rbWFya3MuZWRpdE5hbWVcIjpcIkVkaXQgTmFtZSBaSFwiLFwiYm9va21hcmtzLm1vdmVcIjpcIk1vdmUgWkhcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVGl0bGVcIjpcIkJvb2ttYXJrIEFkZGVkIFpIXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRvRm9sZGVyXCI6XCJZb3VyIGJvb2ttYXJrIHdhcyBhZGRlZCB0byBcXFxcXCJ7e2ZvbGRlck5hbWV9fVxcXFxcIiBaSFwiLFwiYm9va21hcmtzLmJvb2ttYXJrRWRpdGVkVGl0bGVcIjpcIkJvb2ttYXJrIEVkaXRlZCBaSFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYlwiOlwiU2F2ZSBTdXBlcnRhYiBaSFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzLi4uIFpIXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgWkhcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIFN1cGVydGFiIFpIXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUubmV3VGFiXCI6XCJOZXcgVGFiIFpIXCIsXCJlbnRlcnByaXNlU2F2ZU1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMgWkhcIixcImVudGVycHJpc2VTYXZlTW9kYWxcIjp7XCJzYXZlU3VwZXJ0YWJDb3VudF9vbmVcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFiIGJlZm9yZSBjbG9zaW5nPyBaSFwiLFwic2F2ZVN1cGVydGFiQ291bnRfb3RoZXJcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz8gWkhcIn0sXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnJlbmFtZVN1cGVydGFiXCI6XCJSZW5hbWUgWkhcIixcImVudGVycHJpc2VTYXZlTW9kYWwudW5zYXZlZENoYW5nZXNcIjpcIllvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcyBpbiB0aGlzIFRhYi4gWkhcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBaSFwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVN1cGVydGFiXCI6XCJDbG9zZSBTdXBlcnRhYiBaSFwiLFwiZW50ZXJwcmlzZU1vZGFsLmRpc2NhcmRTdXBlcnRhYldhcm5pbmdcIjpcIkFueSB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBaSFwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj8gWkhcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LiBaSFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWQgWkhcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuIFpIXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgWkhcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBaSFwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBaSFwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgWkhcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBaSFwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gWkhcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgWkhcIixcInNpZGVQYW5lbC5haUNlbnRlclwiOlwiQUkgQ2VudGVyIFpIXCIsXCJzaWRlUGFuZWwubmV3Q2hhdFwiOlwiTmV3IENoYXQgWkhcIixcInNpZGVQYW5lbC50b2dnbGVTaWRlUGFuZWxcIjpcIlRvZ2dsZSBTaWRlIFBhbmVsIFpIXCIsXCJzaWRlUGFuZWwuY2xvc2VTaWRlUGFuZWxcIjpcIkNsb3NlIFNpZGUgUGFuZWwgWkhcIixcInNpZGVQYW5lbC5vcGVuQWlDZW50ZXJcIjpcIk9wZW4gQUkgQ2VudGVyIFpIXCIsXCJjb250ZXh0TWVudS5xdWl0RW50ZXJwcmlzZUJyb3dzZXJcIjpcIlF1aXQgWkhcIixcImRvY2sucmVtb3ZlRmF2b3JpdGVcIjpcIlJlbW92ZSBaSFwifScpLEVuPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwiTmV3IFdpbmRvd1wiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwiTmV3IFBhZ2VcIixcImNvbnRleHRNZW51LnJlc3RvcmVcIjpcIlJlc3RvcmUgdG8gTGFzdCBTYXZlZCBDaGFuZ2VzXCIsXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIjpcIlN3aXRjaCBXb3Jrc3BhY2VcIixcImNvbnRleHRNZW51Lm1hbmFnZURlc2t0b3BTaWduYWxzXCI6XCJNYW5hZ2UgRGVza3RvcCBTaWduYWxzXCIsXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCI6XCJBcHBlYXJhbmNlXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCJTYXZlIFdvcmtzcGFjZVwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCJTYXZlIFdvcmtzcGFjZSBBcy4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCJSZW5hbWUgV29ya3NwYWNlXCIsXCJjb250ZXh0TWVudS5kZWxldGVXb3Jrc3BhY2VcIjpcIkRlbGV0ZSBXb3Jrc3BhY2VcIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwiRG93bmxvYWRzXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwiU2F2ZSBQYWdlXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCJTYXZlIFBhZ2UgQXMuLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCJQcmludC4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIjpcIlByaW50IFNjcmVlblwiLFwiY29udGV4dE1lbnUuY2xvc2VXaW5kb3dcIjpcIkNsb3NlIFdpbmRvd1wiLFwiY29udGV4dE1lbnUub3BlblN0b3JlZnJvbnRcIjpcIk9wZW4gU3RvcmVmcm9udFwiLFwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCI6XCJRdWl0IHt7cGxhdGZvcm1MYWJlbH19XCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCJOZXcgVmlld1wiLFwiY29udGV4dE1lbnUub3BlblZpZXdcIjpcIk9wZW4gVmlldyB3aXRoIERlZmF1bHQgV2ViIEJyb3dzZXJcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwiT3BlbiBWaWV3cyB3aXRoIERlZmF1bHQgV2ViIEJyb3dzZXJcIixcImNvbnRleHRNZW51LnJlbG9hZFwiOlwiUmVsb2FkXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3XCI6XCJSZWxvYWQgVmlld1wiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld3NcIjpcIlJlbG9hZCBWaWV3c1wiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGVcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIkR1cGxpY2F0ZSBWaWV3XCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwiRHVwbGljYXRlIFZpZXdzXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCJBZGQgVmlldyB0byBDaGFubmVsXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3c1wiOlwiQWRkIFZpZXdzIHRvIENoYW5uZWxcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIlJlbW92ZSBWaWV3IGZyb20gQ2hhbm5lbFwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIlJlbW92ZSBWaWV3cyBmcm9tIENoYW5uZWxcIixcImNvbnRleHRNZW51LmNsb3NlVmlld1wiOlwiQ2xvc2UgVmlld1wiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3c1wiOlwiQ2xvc2UgVmlld3NcIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWJcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIkR1cGxpY2F0ZSBQYWdlXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCJQcmludFwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiOlwiUHJpbnQgQWxsXCIsXCJzYXZlTWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIlNhdmUgV29ya3NwYWNlIEFzXCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCJTYXZlIFBhZ2UgQXNcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZVwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9fSBhbHJlYWR5IGV4aXN0cy5cIixcInNhdmVNb2RhbC5wbGVhc2VFbnRlclZhbGlkTmFtZVwiOlwiUGxlYXNlIGVudGVyIGEgdmFsaWQgbmFtZVwiLFwic2F2ZU1vZGFsLnJlbmFtZVBhZ2VcIjpcIlJlbmFtZSBQYWdlXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCJDbG9zZSBQYWdlXCIsXCJzYXZlTW9kYWwuZGlzY2FyZENoYW5nZXNcIjpcIkRpc2NhcmQgQ2hhbmdlc1wiLFwic2F2ZU1vZGFsLmRpc2NhcmRBbGxcIjpcIkRpc2NhcmQgQWxsXCIsXCJzYXZlTW9kYWwuc2F2ZUFsbFwiOlwiU2F2ZSBBbGxcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwiU2F2ZSAoe3tjb3VudH19KSBwYWdlcyBiZWZvcmUgY2xvc2luZz9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2VcIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYlwiLFwiYWRkTmV3UGFnZVwiOlwiTmV3IFBhZ2VcIixcImFkZE5ld1RhYlwiOlwiQWRkIE5ldyBUYWJcIixcImFkZE5ld1ZpZXdcIjpcIk5ldyBWaWV3XCIsXCJyZXN0b3JlTW9kYWxcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXN0b3JlIHRvIGxhc3Qgc2F2ZWQgY2hhbmdlcz9cIixcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsXCJtb2RhbC5kaXNjYXJkUGFnZVdhcm5pbmdcIjpcIkFueSB1bnNhdmVkIGNoYW5nZXMgdG8gdGhpcyBwYWdlIHdpbGwgYmUgbG9zdC5cIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCJTYXZlIGNoYW5nZXMgYmVmb3JlIGNsb3Npbmc/XCIsXCJtb2RhbC5wYWdlQ2xvc2VcIjpcIlBhZ2UgQ2xvc2VcIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc3dpdGNoIHRvIHt7d29ya3NwYWNlfX0/XCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBlcm1hbmVudGx5IGRlbGV0ZSB0aGlzIHdvcmtzcGFjZT9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJBIFdvcmtzcGFjZSB3aXRoIHRoZSBuYW1lIHt7d29ya3NwYWNlfX0gYWxyZWFkeSBleGlzdHMuIERvIHlvdSB3YW50IHRvIHJlcGxhY2UgaXQ/XCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZy5ib2R5XCI6XCJBIHdvcmtzcGFjZSB3aXRoIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMuIFJlcGxhY2luZyBpdCB3aWxsIG92ZXJ3cml0ZSBpdHMgY3VycmVudCBjb250ZW50cy5cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC5yZXBsYWNlXCI6XCJSZXBsYWNlXCIsXCJjbG9zZVBsYXRmb3JtXCI6XCJDbG9zZSB0aGUgcGxhdGZvcm1cIixcImNsb3NlUGxhdGZvcm0ud29ya3NwYWNlXCI6XCJDbG9zZSB0aGUge3t3b3Jrc3BhY2V9fSBQbGF0Zm9ybVwiLFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCI6XCJDbG9zaW5nIGEgcGxhdGZvcm0gd2lsbCBjbG9zZSBhbnkgd29ya3NwYWNlcywgYXBwcyBvciBhbnkgcHJvY2Vzc2VzIHRoYXQgYXJlIHJ1bm5pbmcuXCIsXCJiYWNrXCI6XCJCYWNrXCIsXCJmb3J3YXJkXCI6XCJGb3J3YXJkXCIsXCJyZWxvYWRcIjpcIlJlbG9hZFwiLFwiZ3JlZW5cIjpcIkdyZWVuXCIsXCJwdXJwbGVcIjpcIlB1cnBsZVwiLFwib3JhbmdlXCI6XCJPcmFuZ2VcIixcInJlZFwiOlwiUmVkXCIsXCJwaW5rXCI6XCJQaW5rXCIsXCJ5ZWxsb3dcIjpcIlllbGxvd1wiLFwidGhlbWUubGlnaHRcIjpcIkxpZ2h0XCIsXCJ0aGVtZS5kYXJrXCI6XCJEYXJrXCIsXCJ0aGVtZS5zeXN0ZW1cIjpcIlN5bmMgd2l0aCBPUyBzZXR0aW5nXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCJIaWRlIFRhYnNcIixcInRvb2xiYXIuc2hvd1RhYnNcIjpcIlNob3cgVGFic1wiLFwidG9vbGJhci5sb2NrXCI6XCJMb2NrXCIsXCJ0b29sYmFyLnVubG9ja1wiOlwiVW5sb2NrXCIsXCJ0b29sYmFyLmNvbG9yTGlua2luZ1wiOlwiQ29sb3IgTGlua2luZ1wiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcIkNoYW5nZSBMYXlvdXRcIixcInRvb2xiYXIuc2F2ZU1lbnVcIjpcIlNhdmUgTWVudVwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwiTWF4aW1pemUgV2luZG93XCIsXCJ0b29sYmFyLnJlc3RvcmVXaW5kb3dcIjpcIlJlc3RvcmUgV2luZG93XCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCJNaW5pbWl6ZSBXaW5kb3dcIixcImNoYW5nZUxheW91dC5mdWxsV2lkdGhcIjpcIkZ1bGwgV2lkdGhcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCJDb2x1bW5zXCIsXCJjaGFuZ2VMYXlvdXQuUm93c1wiOlwiUm93c1wiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcIkdyaWRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcIldvcmtzcGFjZSBTd2l0Y2hlZFwiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIlRhYnMgYXJlIEhpZGRlblwiLFwic3VjY2Vzc0luZGljYXRvci5zaG93blwiOlwiVGFicyBhcmUgU2hvd25cIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCJQYWdlIGlzIExvY2tlZFwiLFwic3VjY2Vzc0luZGljYXRvci51bmxvY2tlZFwiOlwiUGFnZSBpcyBVbmxvY2tlZFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiOlwiV29ya3NwYWNlIHNhdmVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkQXNcIjpcIldvcmtzcGFjZSBzYXZlZCBhcyB7e3dvcmtzcGFjZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVJlbmFtZWRcIjpcIldvcmtzcGFjZSByZW5hbWVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiOlwiUGFnZSBTYXZlZFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgaGFzIGJlZW4gc2F2ZWQuXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VDb3B5U2F2ZWRcIjpcIlBhZ2Ugc2F2ZWQgYXMge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCJQYWdlIHJlbmFtZWRcIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwiQ29udGV4dCBncm91cCBhcHBsaWVkXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9fSBjb250ZXh0IGdyb3VwIGFwcGxpZWRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIlZpZXcgcmVtb3ZlZCBmcm9tIGNvbnRleHQgZ3JvdXBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCJWaWV3cyByZW1vdmVkIGZyb20gY29udGV4dCBncm91cFwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSBsYXlvdXQgYXBwbGllZFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCJXb3Jrc3BhY2UgZGVsZXRlZFwiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcIlBhZ2UgZmFpbGVkIHRvIHNhdmVcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIldvcmtzcGFjZSBmYWlsZWQgdG8gc2F2ZVwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFBhZ2VcIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwiV2UgYXR0ZW1wdGVkIHRvIGNvbG9yIGxpbmsgdGhpcyB0YWIsIGJ1dCB0aGUgc2l0ZS9jb250ZW50IG93bmVyIGhhcyBub3QgZW5hYmxlZCBpdCB5ZXRcIixcImdsb2JhbC5jYW5jZWxcIjpcIkNhbmNlbFwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIkNvbmZpcm1cIixcImdsb2JhbC5zYXZlXCI6XCJTYXZlXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGVcIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50XCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZFwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZVwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwiT3BlbiBCcm93c2VyIE1lbnVcIixcImFyaWEuYnJvd3NlclRhYnNcIjpcIkJyb3dzZXIgVGFic1wiLFwiYXJpYS52aWV3VGFiXCI6XCJWaWV3IFRhYiBmb3Ige3t0aXRsZX19XCIsXCJhcmlhLmNsb3NlUGFnZVwiOlwiQ2xvc2UgUGFnZSBUYWIgQnV0dG9uIGZvciB7e3RpdGxlfX1cIixcImFyaWEuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiB7e3RpdGxlfX1cIixcImFyaWEudGl0bGVcIjpcIlRpdGxlXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCJVc2UgZXNjYXBlIHRvIGNsb3NlIGNvbnRleHQgZ3JvdXAgc2VsZWN0aW9uIGRpYWxvZ1wiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcIlNob3cgb3IgaGlkZSBjb2xvciBsaW5raW5nXCIsXCJhcmlhLmFwcGx5Q29sb3JMaW5raW5nXCI6XCJQbGVhc2Ugc2VsZWN0IGEgdmlldyB0byBhcHBseSBjb2xvciBsaW5raW5nXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCJDdXJyZW50IHZpZXcgYXNzaWduZWQgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIkN1cnJlbnQgdmlld3MgYXNzaWduZWQgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCJTZXQgYWN0aXZlIHZpZXcgdG8ge3tuYW1lfX0gY29udGV4dCBncm91cFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3c1wiOlwiU2V0IGFjdGl2ZSB2aWV3cyB0byB7e25hbWV9fSBjb250ZXh0IGdyb3VwXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwiVXNlIGVzY2FwZSB0byBjbG9zZSBjaGFuZ2UgbGF5b3V0IGRpYWxvZ1wiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYlwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWRcIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmVcIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3NcIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3NcIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlc1wiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrc1wiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dFwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXJcIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlclwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlclwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXJcIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5nc1wiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3NcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZFwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldFwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlclwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19XCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnNcIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW5cIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWRcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi5cIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWJcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWJcIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBc1wiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbFwiOntcInNhdmVTdXBlcnRhYkNvdW50X29uZVwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWIgYmVmb3JlIGNsb3Npbmc/XCIsXCJzYXZlU3VwZXJ0YWJDb3VudF9vdGhlclwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWJzIGJlZm9yZSBjbG9zaW5nP1wifSxcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIjpcIlJlbmFtZVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC51bnNhdmVkQ2hhbmdlc1wiOlwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIGluIHRoaXMgVGFiLlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcIkNsb3NlIFN1cGVydGFiXCIsXCJlbnRlcnByaXNlTW9kYWwuZGlzY2FyZFN1cGVydGFiV2FybmluZ1wiOlwiQW55IHVuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSB0aGUgXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiP1wiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiV2FybmluZ1wiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIFN1cGVydGFiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lIGFuZCBpcyBwZXJtYW5lbnQuXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYlNhdmVkXCI6XCJTdXBlcnRhYiBTYXZlZFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBzYXZlZC5cIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiRGVsZXRlZFwiOlwiU3VwZXJ0YWIgRGVsZXRlZFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuRGVsZXRlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIGRlbGV0ZWQuXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVUYWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgVGFiXCIsXCJlbnRlcnByaXNlRXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVTdXBlcnRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBTdXBlcnRhYlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuc3dpdGNoVG9TdXBlcnRhYlwiOlwiU3dpdGNoIHRvIFN1cGVydGFiXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5nb1RvXCI6XCJHbyB0byB7e3R5cGV9fVwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIudmlld01vcmVcIjpcIlZpZXcgTW9yZVwiLFwic2lkZVBhbmVsLmFpQ2VudGVyXCI6XCJBSSBDZW50ZXJcIixcInNpZGVQYW5lbC5uZXdDaGF0XCI6XCJOZXcgQ2hhdFwiLFwic2lkZVBhbmVsLnRvZ2dsZVNpZGVQYW5lbFwiOlwiVG9nZ2xlIFNpZGUgUGFuZWxcIixcInNpZGVQYW5lbC5jbG9zZVNpZGVQYW5lbFwiOlwiQ2xvc2UgU2lkZSBQYW5lbFwiLFwic2lkZVBhbmVsLm9wZW5BaUNlbnRlclwiOlwiT3BlbiBBSSBDZW50ZXJcIixcImNvbnRleHRNZW51LnF1aXRFbnRlcnByaXNlQnJvd3NlclwiOlwiUXVpdFwiLFwiZG9jay5yZW1vdmVGYXZvcml0ZVwiOlwiUmVtb3ZlXCIsXCJkb2NrLndvcmtzcGFjZU1hbmFnZW1lbnRcIjp7XCJyZXN0b3JlU3VjY2Vzc1wiOlwiTGFzdCBTYXZlZCBDaGFuZ2VzIFJlc3RvcmVkXCJ9fScpLEZuPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwiTmV1ZXMgRmVuc3RlclwiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwiTmV1ZSBTZWl0ZVwiLFwiY29udGV4dE1lbnUucmVzdG9yZVwiOlwiV2llZGVyaGVyc3RlbGxlbiBkZXIgenVsZXR6dCBnZXNwZWljaGVydGVuIMOEbmRlcnVuZ2VuXCIsXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIjpcIldvcmtzcGFjZSB3ZWNoc2VsblwiLFwiY29udGV4dE1lbnUubWFuYWdlRGVza3RvcFNpZ25hbHNcIjpcIk1hbmFnZSBEZXNrdG9wIFNpZ25hbHNcIixcImNvbnRleHRNZW51LmFwcGVhcmFuY2VcIjpcIkVyc2NoZWludW5nc2JpbGRcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIjpcIldvcmtzcGFjZSBzcGVpY2hlcm5cIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwiV29ya3NwYWNlIHNwZWljaGVybiB1bnRlci4uLlwiLFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCI6XCJXb3Jrc3BhY2UgdW1iZW5lbm5lblwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCJXb3Jrc3BhY2UgbMO2c2NoZW5cIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwiRG93bmxvYWRzXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwiU2VpdGUgc3BlaWNoZXJuXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCJTZWl0ZSBzcGVpY2hlcm4gdW50ZXIuLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCJEcnVja2VuLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiOlwiQmlsZHNjaGlybWFuc2ljaHQgZHJ1Y2tlblwiLFwiY29udGV4dE1lbnUuY2xvc2VXaW5kb3dcIjpcIkZlbnN0ZXIgc2NobGllw59lblwiLFwiY29udGV4dE1lbnUub3BlblN0b3JlZnJvbnRcIjpcIlNjaGF1ZmVuc3RlciDDtmZmbmVuXCIsXCJjb250ZXh0TWVudS5xdWl0UGxhdGZvcm1cIjpcIlBsYXR0Zm9ybSB2ZXJsYXNzZW5cIixcImNvbnRleHRNZW51Lm5ld1ZpZXdcIjpcIk5ldWUgQW5zaWNodFwiLFwiY29udGV4dE1lbnUub3BlblZpZXdcIjpcIkFuc2ljaHQgbWl0IFN0YW5kYXJkLVdlYmJyb3dzZXIgw7ZmZm5lblwiLFwiY29udGV4dE1lbnUub3BlblZpZXdzXCI6XCJBbnNpY2h0ZW4gbWl0IFN0YW5kYXJkLVdlYmJyb3dzZXIgw7ZmZm5lblwiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgREVcIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcIkFuc2ljaHQgbmV1IGxhZGVuXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwiQW5zaWNodGVuIG5ldSBsYWRlblwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgREVcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIkFuc2ljaHQgZHVwbGl6aWVyZW5cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdzXCI6XCJBbnNpY2h0ZW4gZHVwbGl6aWVyZW5cIixcImNvbnRleHRNZW51LmFkZFZpZXdcIjpcIkFuc2ljaHQgenVtIENoYW5uZWwgaGluenVmw7xnZW5cIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCJBbnNpY2h0ZW4genVtIENoYW5uZWwgaGluenVmw7xnZW5cIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIkFuc2ljaHQgYXVzIGRlbSBDaGFubmVsIGVudGZlcm5lblwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIkFuc2ljaHRlbiBhdXMgZGVtIENoYW5uZWwgZW50ZmVybmVuXCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdcIjpcIkFuc2ljaHQgc2NobGllw59lblwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3c1wiOlwiQW5zaWNodGVuIHNjaGxpZcOfZW5cIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgREVcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIlNlaXRlIGR1cGxpemllcmVuXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCJEcnVja2VuXCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50QWxsXCI6XCJBbGxlIGRydWNrZW5cIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwiV29ya3NwYWNlIHNwZWljaGVybiB1bnRlclwiLFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiOlwiU2VpdGUgc3BlaWNoZXJuIHVudGVyXCIsXCJzYXZlTW9kYWwuZW50ZXJWYWx1ZVwiOlwiUGxlYXNlIGVudGVyIGEgdmFsdWUgREVcIixcInNhdmVNb2RhbC5hbHJlYWR5RXhpc3RzXCI6XCJ7e3RpdGxlfX0gZXhpc3RpZXJ0IGJlcmVpdHMuXCIsXCJzYXZlTW9kYWwucGxlYXNlRW50ZXJWYWxpZE5hbWVcIjpcIkJpdHRlIGdlYmVuIFNpZSBlaW5lbiBnw7xsdGlnZW4gTmFtZW4gZWluXCIsXCJzYXZlTW9kYWwucmVuYW1lUGFnZVwiOlwiU2VpdGUgdW1iZW5lbm5lblwiLFwic2F2ZU1vZGFsLmNsb3NlUGFnZVwiOlwiU2VpdGUgc2NobGllw59lblwiLFwic2F2ZU1vZGFsLmRpc2NhcmRDaGFuZ2VzXCI6XCLDhG5kZXJ1bmdlbiB2ZXJ3ZXJmZW5cIixcInNhdmVNb2RhbC5kaXNjYXJkQWxsXCI6XCJBbGxlIHZlcndlcmZlblwiLFwic2F2ZU1vZGFsLnNhdmVBbGxcIjpcIkFsbGUgc3BlaWNoZXJuXCIsXCJzYXZlTW9kYWwuc2F2ZVBhZ2VzQ291bnRcIjpcIih7e2NvdW50fX0pIFNlaXRlbiB2b3IgZGVtIFNjaGxpZcOfZW4gc3BlaWNoZXJuP1wiLFwiZGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgUGFnZSBERVwiLFwiZW50ZXJwcmlzZURlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFN1cGVydGFiIERFXCIsXCJhZGROZXdQYWdlXCI6XCJOZXVlIFNlaXRlIGhpbnp1ZsO8Z2VuXCIsXCJhZGROZXdUYWJcIjpcIk5ldWVuIFRhYiBoaW56dWbDvGdlblwiLFwiYWRkTmV3Vmlld1wiOlwiTmV1ZSBBbnNpY2h0XCIsXCJyZXN0b3JlTW9kYWxcIjpcIlNpbmQgU2llIHNpY2hlciwgZGFzcyBTaWUgZGllIHp1bGV0enQgZ2VzcGVpY2hlcnRlbiDDhG5kZXJ1bmdlbiB3aWVkZXJoZXJzdGVsbGVuIHdvbGxlbj9cIixcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCI6XCJBbGxlIG5pY2h0IGdlc3BlaWNoZXJ0ZW4gw4RuZGVydW5nZW4gd2VyZGVuIHZlcndvcmZlblwiLFwibW9kYWwuZGlzY2FyZFBhZ2VXYXJuaW5nXCI6XCJBbGxlIG5pY2h0IGdlc3BlaWNoZXJ0ZW4gw4RuZGVydW5nZW4gYXVmIGRpZXNlciBTZWl0ZSBnZWhlbiB2ZXJsb3Jlbi5cIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCLDhG5kZXJ1bmdlbiB2b3IgZGVtIFNjaGxpZcOfZW4gc3BlaWNoZXJuP1wiLFwibW9kYWwucGFnZUNsb3NlXCI6XCJTZWl0ZSBzY2hsaWXDn2VuXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbFwiOlwiU2luZCBTaWUgc2ljaGVyLCBkYXNzIFNpZSB6dSB7e3dvcmtzcGFjZX19d2VjaHNlbG4gd29sbGVuP1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwiQWxsZSBuaWNodCBnZXNwZWljaGVydGVuIMOEbmRlcnVuZ2VuIHdlcmRlbiB2ZXJ3b3JmZW5cIixcImRlbGV0ZVdvcmtzcGFjZU1vZGFsXCI6XCJTaW5kIFNpZSBzaWNoZXIsIGRhc3MgU2llIGRpZXNlbiBXb3Jrc3BhY2UgZGF1ZXJoYWZ0IGzDtnNjaGVuIHdvbGxlbj9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJFaW4gV29ya3NwYWNlIG1pdCBkZW0gTmFtZW4ge3t3b3Jrc3BhY2V9fSBleGlzdGllcnQgYmVyZWl0cy4gTcO2Y2h0ZW4gU2llIGlobiBlcnNldHplbj9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcIkVpbiBXb3Jrc3BhY2UgbWl0IGRlbXNlbGJlbiBOYW1lbiBleGlzdGllcnQgYmVyZWl0cy4gV2VubiBTaWUgaWhuIGVyc2V0emVuLCB3aXJkIGRlciBha3R1ZWxsZSBJbmhhbHQgw7xiZXJzY2hyaWViZW4uXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwucmVwbGFjZVwiOlwiRXJzZXR6ZW5cIixcImNsb3NlUGxhdGZvcm1cIjpcIlBsYXR0Zm9ybSBzY2hsaWXDn2VuXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwiRGllIHt7d29ya3NwYWNlfX0gUGxhdHRmb3JtIHNjaGxpZcOfZW5cIixcImNsb3NlUGxhdGZvcm0ud2FybmluZ1wiOlwiV2VubiBTaWUgZWluZSBQbGF0dGZvcm0gc2NobGllw59lbiwgd2VyZGVuIGFsbGUgV29ya3NwYWNlcywgQXBwcyB1bmQgbGF1ZmVuZGVuIFByb3plc3NlIGJlZW5kZXQuXCIsXCJiYWNrXCI6XCJadXLDvGNrXCIsXCJmb3J3YXJkXCI6XCJXZWl0ZXJcIixcInJlbG9hZFwiOlwiTmV1IGxhZGVuXCIsXCJncmVlblwiOlwiR3LDvG5cIixcInB1cnBsZVwiOlwiTGlsYVwiLFwib3JhbmdlXCI6XCJPcmFuZ2VcIixcInJlZFwiOlwiUm90XCIsXCJwaW5rXCI6XCJQaW5rXCIsXCJ5ZWxsb3dcIjpcIkdlbGJcIixcInRoZW1lLmxpZ2h0XCI6XCJIZWxsXCIsXCJ0aGVtZS5kYXJrXCI6XCJEdW5rZWxcIixcInRoZW1lLnN5c3RlbVwiOlwiU3luY2hyb25pc2llcnVuZyBtaXQgT1MtRWluc3RlbGx1bmdcIixcInRvb2xiYXIuaGlkZVRhYnNcIjpcIlRhYnMgYXVzYmxlbmRlblwiLFwidG9vbGJhci5zaG93VGFic1wiOlwiVGFicyBhbnplaWdlblwiLFwidG9vbGJhci5sb2NrXCI6XCJTcGVycmVuXCIsXCJ0b29sYmFyLnVubG9ja1wiOlwiRnJlaXNjaGFsdGVuXCIsXCJ0b29sYmFyLmNvbG9yTGlua2luZ1wiOlwiRmFyYnZlcmtuw7xwZnVuZ1wiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcIkxheW91dCDDpG5kZXJuXCIsXCJ0b29sYmFyLnNhdmVNZW51XCI6XCJNZW7DvCBzcGVpY2hlcm5cIixcInRvb2xiYXIubWF4aW1pemVXaW5kb3dcIjpcIkZlbnN0ZXIgbWF4aW1pZXJlblwiLFwidG9vbGJhci5yZXN0b3JlV2luZG93XCI6XCJGZW5zdGVyIHdpZWRlcmhlcnN0ZWxsZW5cIixcInRvb2xiYXIubWluaW1pemVXaW5kb3dcIjpcIkZlbnN0ZXIgbWluaW1pZXJlblwiLFwiY2hhbmdlTGF5b3V0LmZ1bGxXaWR0aFwiOlwiVm9sbGUgQnJlaXRlXCIsXCJjaGFuZ2VMYXlvdXQuY29sdW1uc1wiOlwiU3BhbHRlblwiLFwiY2hhbmdlTGF5b3V0LlJvd3NcIjpcIlplaWxlblwiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcIlJhc3RlclwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTd2l0Y2hlZFwiOlwiV29ya3NwYWNlIGdld2VjaHNlbHRcIixcInN1Y2Nlc3NJbmRpY2F0b3IuaGlkZGVuXCI6XCJUYWJzIHNpbmQgYXVzZ2VibGVuZGV0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnNob3duXCI6XCJUYWJzIHdlcmRlbiBhbmdlemVpZ3RcIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCJTZWl0ZSBpc3QgZ2VzcGVycnRcIixcInN1Y2Nlc3NJbmRpY2F0b3IudW5sb2NrZWRcIjpcIlNlaXRlIGlzdCBmcmVpZ2VzY2hhbHRldFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiOlwiV29ya3NwYWNlIGdlc3BlaWNoZXJ0XCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkQXNcIjpcIldvcmtzcGFjZSBnZXNwZWljaGVydCBhbHMge3t3b3Jrc3BhY2V9fVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VSZW5hbWVkXCI6XCJXb3Jrc3BhY2UgdW1iZW5hbm50XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiOlwiU2VpdGUgZ2VzcGVpY2hlcnRcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBERVwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCJTZWl0ZSBnZXNwZWljaGVydCBhbHMge3t0aXRsZX19XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCJTZWl0ZSB1bWJlbmFubnRcIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwiQW5nZXdhbmR0ZSBLb250ZXh0Z3J1cHBlXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9fSBhbmdld2FuZHRlIEtvbnRleHRncnVwcGVcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIkFuc2ljaHQgYXVzIGRlciBLb250ZXh0Z3J1cHBlIGVudGZlcm50XCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdzUmVtb3ZlZFwiOlwiQW5zaWNodGVuIGF1cyBkZXIgS29udGV4dGdydXBwZSBlbnRmZXJudFwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSBhbmdld2FuZHRlcyBMYXlvdXRcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlRGVsZXRlZFwiOlwiV29ya3NwYWNlIGdlbMO2c2NodFwiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcIlNlaXRlIGtvbm50ZSBuaWNodCBnZXNwZWljaGVydCB3ZXJkZW5cIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIldvcmtzcGFjZSBrb25udGUgbmljaHQgZ2VzcGVpY2hlcnQgd2VyZGVuXCIsXCJlcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVBhZ2VcIjpcIlNlaXRlIGthbm4gbmljaHQgZHVwbGl6aWVydCB3ZXJkZW5cIixcImluZm9JbmRpY2F0b3IuY29sb3JMaW5rQXR0ZW1wdFwiOlwiV2lyIGhhYmVuIHZlcnN1Y2h0LCBkaWVzZW0gVGFiIGVpbmUgRmFyYmUgenVvcmRuZW4sIGFiZXIgZGVyIEVpZ2VudMO8bWVyIGRlciBXZWJzaXRlL2RlcyBJbmhhbHRzIGhhdCBzaWUgbm9jaCBuaWNodCBha3RpdmllcnRcIixcImdsb2JhbC5jYW5jZWxcIjpcIkFiYnJlY2hlblwiLFwiZ2xvYmFsLmNvbmZpcm1cIjpcIkJlc3TDpHRpZ2VuXCIsXCJnbG9iYWwuc2F2ZVwiOlwiU3BlaWNoZXJuXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGUgREVcIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50IERDXCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZCBEQ1wiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZSBERVwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwiQnJvd3Nlci1NZW7DvCDDtmZmbmVuXCIsXCJhcmlhLmJyb3dzZXJUYWJzXCI6XCJCcm93c2VyLVRhYlwiLFwiYXJpYS52aWV3VGFiXCI6XCJUYWIg4oCeQW5zaWNodOKAnCBmw7xyIHt7dGl0bGV9fVwiLFwiYXJpYS5jbG9zZVBhZ2VcIjpcIkJ1dHRvbiDigJ5TZWl0ZSBzY2hsaWXDn2Vu4oCcIGbDvHIge3t0aXRsZX19XCIsXCJhcmlhLmNsb3NlVGFiXCI6XCJUYWIgc2NobGllw59lbiB7e3RpdGxlfX1cIixcImFyaWEudGl0bGVcIjpcIkJlemVpY2hudW5nXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCJWZXJ3ZW5kZW4gU2llIGRpZSBFc2NhcGUtVGFzdGUsIHVtIGRlbiBEaWFsb2cgenVyIEF1c3dhaGwgdm9uIEtvbnRleHRncnVwcGVuIHp1IHNjaGxpZcOfZW5cIixcImFyaWEuY29sb3JMaW5raW5nXCI6XCJGYXJidmVya27DvHBmdW5nIGVpbi0gb2RlciBhdXNibGVuZGVuXCIsXCJhcmlhLmFwcGx5Q29sb3JMaW5raW5nXCI6XCJCaXR0ZSB3w6RobGVuIFNpZSBlaW5lIEFuc2ljaHQsIHVtIGRpZSBGYXJidmVya27DvHBmdW5nIGFuenV3ZW5kZW5cIixcImFyaWEuYXNzaWduQ29sb3JMaW5raW5nQ3VycmVudFZpZXdcIjpcIkFrdHVlbGxlIEFuc2ljaHQsIGRpZSBkZXIgS29udGV4dGdydXBwZSB7e25hbWV9fSB6dWdlb3JkbmV0IGlzdFwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcIkFrdHVlbGxlIEFuc2ljaHRlbiwgZGllIGRlciBLb250ZXh0Z3J1cHBlIHt7bmFtZX19IHp1Z2VvcmRuZXQgc2luZFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCJBa3RpdmUgQW5zaWNodCBhdWYgZGllIEtvbnRleHRncnVwcGUge3tuYW1lfX0gc2V0emVuXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCJBa3RpdmUgQW5zaWNodGVuIGF1ZiBkaWUgS29udGV4dGdydXBwZSB7e25hbWV9fSBzZXR6ZW5cIixcImFyaWEuZXNjYXBlTGF5b3V0RGlhbG9nXCI6XCJWZXJ3ZW5kZW4gU2llIGRpZSBFc2NhcGUtVGFzdGUsIHVtIGRlbiBEaWFsb2cgenVyIExheW91dMOkbmRlcnVuZyB6dSBzY2hsaWXDn2VuXCIsXCJnbG9iYWwuc3VwZXJ0YWJcIjpcIlN1cGVydGFiIERFXCIsXCJnbG9iYWwudGFiXCI6XCJUYWIgREVcIixcImJvb2ttYXJrcy5lZGl0Qm9va21hcmtcIjpcIkVkaXQgQm9va21hcmsgREVcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkXCI6XCJCb29rbWFyayBhZGRlZCBERVwiLFwiYm9va21hcmtzLmRvbmVcIjpcIkRvbmUgREVcIixcImJvb2ttYXJrcy5yZW1vdmVcIjpcIlJlbW92ZSBERVwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1BhbmVsXCI6XCJCb29rbWFya3MgUGFuZWwgREVcIixcImJvb2ttYXJrcy5ib29rbWFya3NcIjpcIkJvb2ttYXJrcyBERVwiLFwiYm9va21hcmtzLmFsbEJvb2ttYXJrc1wiOlwiQWxsIEJvb2ttYXJrcyBERVwiLFwiYm9va21hcmtzLmZhdm9yaXRlc1wiOlwiRmF2b3JpdGVzIERFXCIsXCJib29rbWFya3Muc2VhcmNoQm9va21hcmtzXCI6XCJTZWFyY2ggQm9va21hcmtzIERFXCIsXCJib29rbWFya3MuY2xlYXJTZWFyY2hJbnB1dFwiOlwiQ2xlYXIgU2VhcmNoIElucHV0IERFXCIsXCJib29rbWFya3MuY3JlYXRlRm9sZGVyXCI6XCJDcmVhdGUgTmV3IEZvbGRlciBERVwiLFwiYm9va21hcmtzLmV4aXRGb2xkZXJcIjpcIkV4aXQgRm9sZGVyIERFXCIsXCJib29rbWFya3MubmV3Rm9sZGVyXCI6XCJOZXcgRm9sZGVyIERFXCIsXCJib29rbWFya3MubmFtZWRGb2xkZXJcIjpcInt7bmFtZX19IEZvbGRlciBERVwiLFwiYm9va21hcmtzLmJvb2ttYXJrU2V0dGluZ3NcIjpcInt7bmFtZX19IEJvb2ttYXJrIFNldHRpbmdzIERFXCIsXCJib29rbWFya3MuZm9sZGVyU2V0dGluZ3NcIjpcInt7bmFtZX19IEZvbGRlciBTZXR0aW5ncyBERVwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kXCI6XCJObyByZXN1bHRzIGZvdW5kIERFXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRTdWJ0ZXh0XCI6XCJUaGVyZSBhcmUgbm8gYm9va21hcmtzIHRoYXQgbWF0Y2ggeW91ciBzZWFyY2ggREVcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93XCI6XCJOb3RoaW5nIHRvIHNob3cgeWV0IERFXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1N1YnRleHRcIjpcIkFkZCBhIGJvb2ttYXJrIHRvIHRoaXMgZm9sZGVyIERFXCIsXCJib29rbWFya3MucmVzdWx0c0ZvdW5kSW5cIjpcIlJlc3VsdHMgZm91bmQgaW4ge3tuYW1lfX0gREVcIixcImJvb2ttYXJrcy5yZXN1bHRzSW5PdGhlckZvbGRlcnNcIjpcIlJlc3VsdHMgZm91bmQgaW4gb3RoZXIgZm9sZGVycyBERVwiLFwiYm9va21hcmtzLmFsbFJlc3VsdHNGb3VuZEluXCI6XCJBbGwgcmVzdWx0cyBmb3VuZCBpbiBERVwiLFwiYm9va21hcmtzLmVkaXROYW1lXCI6XCJFZGl0IE5hbWUgREVcIixcImJvb2ttYXJrcy5tb3ZlXCI6XCJNb3ZlIERFXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRpdGxlXCI6XCJCb29rbWFyayBBZGRlZCBERVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUb0ZvbGRlclwiOlwiWW91ciBib29rbWFyayB3YXMgYWRkZWQgdG8gXFxcXFwie3tmb2xkZXJOYW1lfX1cXFxcXCIgREVcIixcImJvb2ttYXJrcy5ib29rbWFya0VkaXRlZFRpdGxlXCI6XCJCb29rbWFyayBFZGl0ZWQgREVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJcIjpcIlNhdmUgU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcy4uLiBERVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIERFXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSBTdXBlcnRhYiBERVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51Lm5ld1RhYlwiOlwiTmV3IFRhYiBERVwiLFwiZW50ZXJwcmlzZVNhdmVNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzIERFXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsXCI6e1wic2F2ZVN1cGVydGFiQ291bnRfb25lXCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYiBiZWZvcmUgY2xvc2luZz8gREVcIixcInNhdmVTdXBlcnRhYkNvdW50X290aGVyXCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYnMgYmVmb3JlIGNsb3Npbmc/IERFXCJ9LFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lIERFXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuIERFXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgREVcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgbG9zdC4gREVcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIHRoZSBcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWI/IERFXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJXYXJuaW5nXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgU3VwZXJ0YWI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUgYW5kIGlzIHBlcm1hbmVudC4gREVcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiU2F2ZWRcIjpcIlN1cGVydGFiIFNhdmVkIERFXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIHNhdmVkLiBERVwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJEZWxldGVkXCI6XCJTdXBlcnRhYiBEZWxldGVkIERFXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5EZWxldGVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gZGVsZXRlZC4gREVcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBUYWIgREVcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVN1cGVydGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFN1cGVydGFiIERFXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5zd2l0Y2hUb1N1cGVydGFiXCI6XCJTd2l0Y2ggdG8gU3VwZXJ0YWIgREVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLmdvVG9cIjpcIkdvIHRvIHt7dHlwZX19IERFXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci52aWV3TW9yZVwiOlwiVmlldyBNb3JlIERFXCIsXCJzaWRlUGFuZWwuYWlDZW50ZXJcIjpcIkFJIENlbnRlciBERVwiLFwic2lkZVBhbmVsLm5ld0NoYXRcIjpcIk5ldyBDaGF0IERFXCIsXCJzaWRlUGFuZWwudG9nZ2xlU2lkZVBhbmVsXCI6XCJUb2dnbGUgU2lkZSBQYW5lbCBERVwiLFwic2lkZVBhbmVsLmNsb3NlU2lkZVBhbmVsXCI6XCJDbG9zZSBTaWRlIFBhbmVsIERFXCIsXCJzaWRlUGFuZWwub3BlbkFpQ2VudGVyXCI6XCJPcGVuIEFJIENlbnRlciBERVwiLFwiY29udGV4dE1lbnUucXVpdEVudGVycHJpc2VCcm93c2VyXCI6XCJRdWl0IERFXCIsXCJkb2NrLnJlbW92ZUZhdm9yaXRlXCI6XCJSZW1vdmUgREVcIn0nKSxWbj1KU09OLnBhcnNlKCd7XCJjb250ZXh0TWVudS5uZXdXaW5kb3dcIjpcIuaWsOOBl+OBhOOCpuOCo+ODs+ODieOCplwiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwi5paw44GX44GE44Oa44O844K4XCIsXCJjb250ZXh0TWVudS5yZXN0b3JlXCI6XCLmnIDlvozjgavkv53lrZjjgZXjgozjgZ/lpInmm7TjgavmiLvjgZlcIixcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiOlwi44Ov44O844Kv44K544Oa44O844K544Gr5YiH44KK5pu/44GI44KLXCIsXCJjb250ZXh0TWVudS5tYW5hZ2VEZXNrdG9wU2lnbmFsc1wiOlwiTWFuYWdlIERlc2t0b3AgU2lnbmFsc1wiLFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiOlwi5aSW6KazXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgpLkv53lrZhcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi44Ov44O844Kv44K544Oa44O844K544KS5Yil5ZCN44Gn5L+d5a2YLi4uXCIsXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueWQjeOCkuWkieabtFwiLFwiY29udGV4dE1lbnUuZGVsZXRlV29ya3NwYWNlXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgpLliYrpmaRcIixcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiOlwi44OA44Km44Oz44Ot44O844OJXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiOlwi44Oa44O844K444KS5L+d5a2YXCIsXCJjb250ZXh0TWVudS5zYXZlUGFnZUFzXCI6XCLjg5rjg7zjgrjjgpLliKXlkI3jgafkv53lrZguLi5cIixcImNvbnRleHRNZW51LnByaW50XCI6XCLljbDliLcuLi5cIixcImNvbnRleHRNZW51LnByaW50U2NyZWVuXCI6XCLjg5fjg6rjg7Pjg4jjgrnjgq/jg6rjg7zjg7NcIixcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCI6XCLjgqbjgqPjg7Pjg4njgqbjgpLplonjgZjjgotcIixcImNvbnRleHRNZW51Lm9wZW5TdG9yZWZyb250XCI6XCLjgrnjg4jjgqLjg5Xjg63jg7Pjg4jjgpLplovjgY9cIixcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiOlwi44OX44Op44OD44OI44OV44Kp44O844Og44KS57WC5LqG44GZ44KLXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLmlrDjgZfjgYTjg5Pjg6Xjg7xcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLjg4fjg5Xjgqnjg6vjg4jjga7jgqbjgqfjg5bjg5bjg6njgqbjgrbjg7zjgafjg5Pjg6Xjg7zjgpLplovjgY9cIixcImNvbnRleHRNZW51Lm9wZW5WaWV3c1wiOlwi44OH44OV44Kp44Or44OI44Gu44Km44Kn44OW44OW44Op44Km44K244O844Gn44OT44Ol44O844KS6ZaL44GPXCIsXCJjb250ZXh0TWVudS5yZWxvYWRcIjpcIlJlbG9hZCBKUFwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld1wiOlwi44OT44Ol44O844KS44Oq44Ot44O844OJXCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwi44OT44Ol44O844KS44Oq44Ot44O844OJXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBKUFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlVmlld1wiOlwi44OT44Ol44O844KS6KSH6KO9XCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwi44OT44Ol44O844KS6KSH6KO9XCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCLjg5Pjg6Xjg7zjgpLjg4Hjg6Pjg43jg6vjgavov73liqBcIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCLjg5Pjg6Xjg7zjgpLjg4Hjg6Pjg43jg6vjgavov73liqBcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdcIjpcIuODgeODo+ODjeODq+OBi+OCieODk+ODpeODvOOCkuWJiumZpFwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIuODgeODo+ODjeODq+OBi+OCieODk+ODpeODvOOCkuWJiumZpFwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCLjg5Pjg6Xjg7zjgpLplonjgZjjgotcIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcIuODk+ODpeODvOOCkumWieOBmOOCi1wiLFwiY29udGV4dE1lbnUuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBKUFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlUGFnZVwiOlwi44Oa44O844K444KS6KSH6KO9XCIsXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCI6XCLljbDliLdcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIjpcIuOBmeOBueOBpuOCkuWNsOWIt1wiLFwic2F2ZU1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLjg6/jg7zjgq/jgrnjg5rjg7zjgrnjgpLliKXlkI3jgafkv53lrZhcIixcInNhdmVNZW51LnNhdmVQYWdlQXNcIjpcIuODmuODvOOCuOOCkuWIpeWQjeOBp+S/neWtmFwiLFwic2F2ZU1vZGFsLmVudGVyVmFsdWVcIjpcIlBsZWFzZSBlbnRlciBhIHZhbHVlIEpQXCIsXCJzYXZlTW9kYWwuYWxyZWFkeUV4aXN0c1wiOlwie3t0aXRsZX1944Gv44GZ44Gn44Gr5a2Y5Zyo44GX44Gm44GE44G+44GZ44CCXCIsXCJzYXZlTW9kYWwucGxlYXNlRW50ZXJWYWxpZE5hbWVcIjpcIuacieWKueOBquWQjeWJjeOCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhFwiLFwic2F2ZU1vZGFsLnJlbmFtZVBhZ2VcIjpcIuODmuODvOOCuOWQjeOCkuWkieabtFwiLFwic2F2ZU1vZGFsLmNsb3NlUGFnZVwiOlwi44Oa44O844K444KS6ZaJ44GY44KLXCIsXCJzYXZlTW9kYWwuZGlzY2FyZENoYW5nZXNcIjpcIuWkieabtOOCkuegtOajhFwiLFwic2F2ZU1vZGFsLmRpc2NhcmRBbGxcIjpcIuOBmeOBueOBpuegtOajhFwiLFwic2F2ZU1vZGFsLnNhdmVBbGxcIjpcIuOBmeOBueOBpuS/neWtmFwiLFwic2F2ZU1vZGFsLnNhdmVQYWdlc0NvdW50XCI6XCLplonjgZjjgovliY3jgavvvIh7e2NvdW50fX3vvInjgaTjga7jg5rjg7zjgrjjgpLkv53lrZjjgZfjgb7jgZnjgYvvvJ9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2UgSlBcIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYiBKUFwiLFwiYWRkTmV3UGFnZVwiOlwi5paw44GX44GE44Oa44O844K444KS6L+95YqgXCIsXCJhZGROZXdUYWJcIjpcIuaWsOOBl+OBhOOCv+ODluOCkui/veWKoFwiLFwiYWRkTmV3Vmlld1wiOlwi5paw44GX44GE44OT44Ol44O8XCIsXCJyZXN0b3JlTW9kYWxcIjpcIuacrOW9k+OBq+acgOW+jOOBq+S/neWtmOOBleOCjOOBn+WkieabtOOBq+aIu+OBl+OBvuOBmeOBi++8n1wiLFwibW9kYWwuZGlzY2FyZFdhcm5pbmdcIjpcIuS/neWtmOOBleOCjOOBpuOBhOOBquOBhOWkieabtOOBr+egtOajhOOBleOCjOOBvuOBmVwiLFwibW9kYWwuZGlzY2FyZFBhZ2VXYXJuaW5nXCI6XCLkv53lrZjjgZXjgozjgabjgYTjgarjgYTjgZPjga7jg5rjg7zjgrjjgbjjga7lpInmm7Tjga/lpLHjgo/jgozjgb7jgZnjgIJcIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCLplonjgZjjgovliY3jgavlpInmm7TjgpLkv53lrZjjgZfjgb7jgZnjgYvvvJ9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwi44Oa44O844K444KS6ZaJ44GY44KLXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbFwiOlwi5pys5b2T44Gre3t3b3Jrc3BhY2V9feOBq+WIh+OCiuabv+OBiOOBvuOBmeOBi++8n1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwi5L+d5a2Y44GV44KM44Gm44GE44Gq44GE5aSJ5pu044Gv56C05qOE44GV44KM44G+44GZXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwi44GT44Gu44Ov44O844Kv44K544Oa44O844K544KS5rC45LmF44Gr5YmK6Zmk44GX44Gm44KC44KI44KN44GX44GE44Gn44GZ44GL77yfXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwud2FybmluZ1wiOlwie3t3b3Jrc3BhY2V9feOBqOOBhOOBhuWQjeWJjeOBruODr+ODvOOCr+OCueODmuODvOOCueOBjOOBmeOBp+OBq+WtmOWcqOOBl+OBvuOBmeOAgue9ruOBjeaPm+OBiOOBvuOBmeOBi++8n1wiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLndhcm5pbmcuYm9keVwiOlwi5ZCM44GY5ZCN5YmN44Gu44Ov44O844Kv44K544Oa44O844K544GM44GZ44Gn44Gr5a2Y5Zyo44GX44G+44GZ44CC572u44GN5o+b44GI44KL44Go44CB54++5Zyo44Gu5YaF5a6544Gv5LiK5pu444GN44GV44KM44G+44GZ44CCXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwucmVwbGFjZVwiOlwi572u44GN5o+b44GI44KLXCIsXCJjbG9zZVBsYXRmb3JtXCI6XCLjg5fjg6njg4Pjg4jjg5Xjgqnjg7zjg6DjgpLplonjgZjjgotcIixcImNsb3NlUGxhdGZvcm0ud29ya3NwYWNlXCI6XCJ7e3dvcmtzcGFjZX1944OX44Op44OD44OI44OV44Kp44O844Og44KS6ZaJ44GY44KLXCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcIuODl+ODqeODg+ODiOODleOCqeODvOODoOOCkumWieOBmOOCi+OBqOOAgeWun+ihjOS4reOBruODr+ODvOOCr+OCueODmuODvOOCueOAgeOCouODl+ODquOAgeODl+ODreOCu+OCueOBjOOBmeOBueOBpumWieOBmOOBvuOBmeOAglwiLFwiYmFja1wiOlwi5oi744KLXCIsXCJmb3J3YXJkXCI6XCLpgLLjgoBcIixcInJlbG9hZFwiOlwi44Oq44Ot44O844OJXCIsXCJncmVlblwiOlwi44Kw44Oq44O844OzXCIsXCJwdXJwbGVcIjpcIuODkeODvOODl+ODq1wiLFwib3JhbmdlXCI6XCLjgqrjg6zjg7PjgrhcIixcInJlZFwiOlwi44Os44OD44OJXCIsXCJwaW5rXCI6XCLjg5Tjg7Pjgq9cIixcInllbGxvd1wiOlwi44Kk44Ko44Ot44O8XCIsXCJ0aGVtZS5saWdodFwiOlwi44Op44Kk44OIXCIsXCJ0aGVtZS5kYXJrXCI6XCLjg4Djg7zjgq9cIixcInRoZW1lLnN5c3RlbVwiOlwiT1Pjga7oqK3lrprjgajlkIzmnJ9cIixcInRvb2xiYXIuaGlkZVRhYnNcIjpcIuOCv+ODluOCkumdnuihqOekulwiLFwidG9vbGJhci5zaG93VGFic1wiOlwi44K/44OW44KS6KGo56S6XCIsXCJ0b29sYmFyLmxvY2tcIjpcIuODreODg+OCr1wiLFwidG9vbGJhci51bmxvY2tcIjpcIuODreODg+OCr+ino+mZpFwiLFwidG9vbGJhci5jb2xvckxpbmtpbmdcIjpcIuOCq+ODqeODvOODquODs+OCr1wiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcIuODrOOCpOOCouOCpuODiOOCkuWkieabtFwiLFwidG9vbGJhci5zYXZlTWVudVwiOlwi44Oh44OL44Ol44O844KS5L+d5a2YXCIsXCJ0b29sYmFyLm1heGltaXplV2luZG93XCI6XCLjgqbjgqPjg7Pjg4njgqbjgpLmnIDlpKfljJbjgZnjgotcIixcInRvb2xiYXIucmVzdG9yZVdpbmRvd1wiOlwi44Km44Kj44Oz44OJ44Km44KS5b6p5YWDXCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCLjgqbjgqPjg7Pjg4njgqbjgpLmnIDlsI/ljJbjgZnjgotcIixcImNoYW5nZUxheW91dC5mdWxsV2lkdGhcIjpcIuWFqOW5hVwiLFwiY2hhbmdlTGF5b3V0LmNvbHVtbnNcIjpcIuWIl1wiLFwiY2hhbmdlTGF5b3V0LlJvd3NcIjpcIuihjFwiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcIuOCsOODquODg+ODiVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTd2l0Y2hlZFwiOlwi44Ov44O844Kv44K544Oa44O844K544GM5YiH44KK5pu/44KP44KK44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmhpZGRlblwiOlwi44K/44OW44GM6Z2e6KGo56S644Gr44Gq44Gj44Gm44GE44G+44GZXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnNob3duXCI6XCLjgr/jg5bjgYzooajnpLrjgZXjgozjgabjgYTjgb7jgZlcIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCLjg5rjg7zjgrjjgYzjg63jg4Pjgq/jgZXjgozjgabjgYTjgb7jgZlcIixcInN1Y2Nlc3NJbmRpY2F0b3IudW5sb2NrZWRcIjpcIuODmuODvOOCuOOBruODreODg+OCr+OBjOino+mZpOOBleOCjOOBpuOBhOOBvuOBmVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiOlwi44Ov44O844Kv44K544Oa44O844K544GM5L+d5a2Y44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVNhdmVkQXNcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOBjHt7d29ya3NwYWNlfX3jgajjgZfjgabkv53lrZjjgZXjgozjgb7jgZfjgZ9cIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlUmVuYW1lZFwiOlwi44Ov44O844Kv44K544Oa44O844K55ZCN44GM5aSJ5pu044GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VTYXZlZFwiOlwi44Oa44O844K444GM5L+d5a2Y44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBoYXMgYmVlbiBzYXZlZC4gSlBcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUNvcHlTYXZlZFwiOlwi44Oa44O844K444GMe3t0aXRsZX1944Go44GX44Gm5L+d5a2Y44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLjg5rjg7zjgrjlkI3jgYzlpInmm7TjgZXjgozjgb7jgZfjgZ9cIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi44Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44GM6YGp55So44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwie3tjb2xvck5hbWV9feOCs+ODs+ODhuOCreOCueODiOOCsOODq+ODvOODl+OBjOmBqeeUqOOBleOCjOOBvuOBl+OBn1wiLFwic3VjY2Vzc0luZGljYXRvci52aWV3UmVtb3ZlZFwiOlwi44Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44GL44KJ44OT44Ol44O844GM5YmK6Zmk44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnZpZXdzUmVtb3ZlZFwiOlwi44Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44GL44KJ44OT44Ol44O844GM5YmK6Zmk44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxheW91dEFwcGxpZWRcIjpcInt7bGF5b3V0TmFtZX1944Os44Kk44Ki44Km44OI44GM6YGp55So44GV44KM44G+44GX44GfXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZURlbGV0ZWRcIjpcIuODr+ODvOOCr+OCueODmuODvOOCueOBjOWJiumZpOOBleOCjOOBvuOBl+OBn1wiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcIuODmuODvOOCuOOCkuS/neWtmOOBp+OBjeOBvuOBm+OCk+OBp+OBl+OBn1wiLFwiZXJyb3JJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZUZhaWxlZFwiOlwi44Ov44O844Kv44K544Oa44O844K544KS5L+d5a2Y44Gn44GN44G+44Gb44KT44Gn44GX44GfXCIsXCJlcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVBhZ2VcIjpcIuODmuODvOOCuOOCkuikh+ijveOBp+OBjeOBvuOBm+OCk+OBp+OBl+OBn1wiLFwiaW5mb0luZGljYXRvci5jb2xvckxpbmtBdHRlbXB0XCI6XCLjgZPjga7jgr/jg5bjgpLjgqvjg6njg7zjg6rjg7Pjgq/jgZfjgojjgYbjgajjgZfjgb7jgZfjgZ/jgYzjgIHjgrXjgqTjg4gv44Kz44Oz44OG44Oz44OE44Gu44Kq44O844OK44O844GM44G+44Gg44GT44KM44KS5pyJ5Yq544Gr44GX44Gm44GE44G+44Gb44KTXCIsXCJnbG9iYWwuY2FuY2VsXCI6XCLjgq3jg6Pjg7Pjgrvjg6tcIixcImdsb2JhbC5jb25maXJtXCI6XCLnorroqo1cIixcImdsb2JhbC5zYXZlXCI6XCLkv53lrZhcIixcImdsb2JhbC5kZWxldGVcIjpcIkRlbGV0ZSBKUFwiLFwiYXBwUmVzdWx0cy5oZWFkZXJcIjpcIkZlYXR1cmVkIGNvbnRlbnQgSlBcIixcInJlY2VudGx5Q2xvc2VkLmhlYWRlclwiOlwiUmVjZW50bHkgQ2xvc2VkIEpQXCIsXCJsYW5kaW5nUGFnZS5zdWJoZWFkZXJcIjpcIkFwcHMgYW5kIHdlYnNpdGVzIHNlbGVjdGVkIGJ5IGFuIGFkbWluIHdpbGwgc2hvdyBoZXJlIEpQXCIsXCJhcmlhLm9wZW5Ccm93c2VyXCI6XCLjg5bjg6njgqbjgrbjg7zjg6Hjg4vjg6Xjg7zjgpLplovjgY9cIixcImFyaWEuYnJvd3NlclRhYnNcIjpcIuODluODqeOCpuOCtuODvOOCv+ODllwiLFwiYXJpYS52aWV3VGFiXCI6XCJ7e3RpdGxlfX3jga7jgr/jg5bjgpLooajnpLpcIixcImFyaWEuY2xvc2VQYWdlXCI6XCJ7e3RpdGxlfX3jga7jg5rjg7zjgrjjgr/jg5bjg5zjgr/jg7PjgpLplonjgZjjgotcIixcImFyaWEuY2xvc2VUYWJcIjpcInt7dGl0bGV9feOCv+ODluOCkumWieOBmOOCi1wiLFwiYXJpYS50aXRsZVwiOlwi44K/44Kk44OI44OrXCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLjgqjjgrnjgrHjg7zjg5fjgpLkvb/nlKjjgZfjgabjgIHjgrPjg7Pjg4bjgq3jgrnjg4jjgrDjg6vjg7zjg5fpgbjmip7jg4DjgqTjgqLjg63jgrDjgpLplonjgZjjgotcIixcImFyaWEuY29sb3JMaW5raW5nXCI6XCLjgqvjg6njg7zjg6rjg7Pjgq/jga7ooajnpLov6Z2e6KGo56S6XCIsXCJhcmlhLmFwcGx5Q29sb3JMaW5raW5nXCI6XCLjgqvjg6njg7zjg6rjg7Pjgq/jgpLpgannlKjjgZnjgovjg5Pjg6Xjg7zjgpLpgbjmip7jgZfjgabjgY/jgaDjgZXjgYRcIixcImFyaWEuYXNzaWduQ29sb3JMaW5raW5nQ3VycmVudFZpZXdcIjpcIuePvuWcqOOBruODk+ODpeODvOOBr3t7bmFtZX1944Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44Gr5Ymy44KK5b2T44Gm44KJ44KM44Gm44GE44G+44GZXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3c1wiOlwi54++5Zyo44Gu44OT44Ol44O844Gve3tuYW1lfX3jgrPjg7Pjg4bjgq3jgrnjg4jjgrDjg6vjg7zjg5fjgavlibLjgorlvZPjgabjgonjgozjgabjgYTjgb7jgZlcIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld1wiOlwi44Ki44Kv44OG44Kj44OW44OT44Ol44O844KSe3tuYW1lfX3jgrPjg7Pjg4bjgq3jgrnjg4jjgrDjg6vjg7zjg5fjgavoqK3lrppcIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld3NcIjpcIuOCouOCr+ODhuOCo+ODluODk+ODpeODvOOCknt7bmFtZX1944Kz44Oz44OG44Kt44K544OI44Kw44Or44O844OX44Gr6Kit5a6aXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwi44Ko44K544Kx44O844OX44KS5L2/55So44GX44Gm44CB44Os44Kk44Ki44Km44OI5aSJ5pu06YG45oqe44OA44Kk44Ki44Ot44Kw44KS6ZaJ44GY44KLXCIsXCJnbG9iYWwuc3VwZXJ0YWJcIjpcIlN1cGVydGFiIEpQXCIsXCJnbG9iYWwudGFiXCI6XCJUYWIgSlBcIixcImJvb2ttYXJrcy5lZGl0Qm9va21hcmtcIjpcIkVkaXQgQm9va21hcmsgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkXCI6XCJCb29rbWFyayBhZGRlZCBKUFwiLFwiYm9va21hcmtzLmRvbmVcIjpcIkRvbmUgSlBcIixcImJvb2ttYXJrcy5yZW1vdmVcIjpcIlJlbW92ZSBKUFwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1BhbmVsXCI6XCJCb29rbWFya3MgUGFuZWwgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya3NcIjpcIkJvb2ttYXJrcyBKUFwiLFwiYm9va21hcmtzLmFsbEJvb2ttYXJrc1wiOlwiQWxsIEJvb2ttYXJrcyBKUFwiLFwiYm9va21hcmtzLmZhdm9yaXRlc1wiOlwiRmF2b3JpdGVzIEpQXCIsXCJib29rbWFya3Muc2VhcmNoQm9va21hcmtzXCI6XCJTZWFyY2ggQm9va21hcmtzIEpQXCIsXCJib29rbWFya3MuY2xlYXJTZWFyY2hJbnB1dFwiOlwiQ2xlYXIgU2VhcmNoIElucHV0IEpQXCIsXCJib29rbWFya3MuY3JlYXRlRm9sZGVyXCI6XCJDcmVhdGUgTmV3IEZvbGRlciBKUFwiLFwiYm9va21hcmtzLmV4aXRGb2xkZXJcIjpcIkV4aXQgRm9sZGVyIEpQXCIsXCJib29rbWFya3MubmV3Rm9sZGVyXCI6XCJOZXcgRm9sZGVyIEpQXCIsXCJib29rbWFya3MubmFtZWRGb2xkZXJcIjpcInt7bmFtZX19IEZvbGRlciBKUFwiLFwiYm9va21hcmtzLmJvb2ttYXJrU2V0dGluZ3NcIjpcInt7bmFtZX19IEJvb2ttYXJrIFNldHRpbmdzIEpQXCIsXCJib29rbWFya3MuZm9sZGVyU2V0dGluZ3NcIjpcInt7bmFtZX19IEZvbGRlciBTZXR0aW5ncyBKUFwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kXCI6XCJObyByZXN1bHRzIGZvdW5kIEpQXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRTdWJ0ZXh0XCI6XCJUaGVyZSBhcmUgbm8gYm9va21hcmtzIHRoYXQgbWF0Y2ggeW91ciBzZWFyY2ggSlBcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93XCI6XCJOb3RoaW5nIHRvIHNob3cgeWV0IEpQXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1N1YnRleHRcIjpcIkFkZCBhIGJvb2ttYXJrIHRvIHRoaXMgZm9sZGVyIEpQXCIsXCJib29rbWFya3MucmVzdWx0c0ZvdW5kSW5cIjpcIlJlc3VsdHMgZm91bmQgaW4ge3tuYW1lfX0gSlBcIixcImJvb2ttYXJrcy5yZXN1bHRzSW5PdGhlckZvbGRlcnNcIjpcIlJlc3VsdHMgZm91bmQgaW4gb3RoZXIgZm9sZGVycyBKUFwiLFwiYm9va21hcmtzLmFsbFJlc3VsdHNGb3VuZEluXCI6XCJBbGwgcmVzdWx0cyBmb3VuZCBpbiBKUFwiLFwiYm9va21hcmtzLmVkaXROYW1lXCI6XCJFZGl0IE5hbWUgSlBcIixcImJvb2ttYXJrcy5tb3ZlXCI6XCJNb3ZlIEpQXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRpdGxlXCI6XCJCb29rbWFyayBBZGRlZCBKUFwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUb0ZvbGRlclwiOlwiWW91ciBib29rbWFyayB3YXMgYWRkZWQgdG8gXFxcXFwie3tmb2xkZXJOYW1lfX1cXFxcXCIgSlBcIixcImJvb2ttYXJrcy5ib29rbWFya0VkaXRlZFRpdGxlXCI6XCJCb29rbWFyayBFZGl0ZWQgSlBcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJcIjpcIlNhdmUgU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcy4uLiBKUFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIEpQXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSBTdXBlcnRhYiBKUFwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51Lm5ld1RhYlwiOlwiTmV3IFRhYiBKUFwiLFwiZW50ZXJwcmlzZVNhdmVNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzIEpQXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsXCI6e1wic2F2ZVN1cGVydGFiQ291bnRfb25lXCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYiBiZWZvcmUgY2xvc2luZz8gSlBcIixcInNhdmVTdXBlcnRhYkNvdW50X290aGVyXCI6XCJTYXZlIHt7Y291bnR9fSBTdXBlcnRhYnMgYmVmb3JlIGNsb3Npbmc/IEpQXCJ9LFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5yZW5hbWVTdXBlcnRhYlwiOlwiUmVuYW1lIEpQXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnVuc2F2ZWRDaGFuZ2VzXCI6XCJZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMgaW4gdGhpcyBUYWIuIEpQXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgSlBcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiQ2xvc2UgU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VNb2RhbC5kaXNjYXJkU3VwZXJ0YWJXYXJuaW5nXCI6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgbG9zdC4gSlBcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIHRoZSBcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWI/IEpQXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJXYXJuaW5nXCI6XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgU3VwZXJ0YWI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUgYW5kIGlzIHBlcm1hbmVudC4gSlBcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiU2F2ZWRcIjpcIlN1cGVydGFiIFNhdmVkIEpQXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiIGhhcyBiZWVuIHNhdmVkLiBKUFwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJEZWxldGVkXCI6XCJTdXBlcnRhYiBEZWxldGVkIEpQXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5EZWxldGVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gZGVsZXRlZC4gSlBcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBUYWIgSlBcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVN1cGVydGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFN1cGVydGFiIEpQXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5zd2l0Y2hUb1N1cGVydGFiXCI6XCJTd2l0Y2ggdG8gU3VwZXJ0YWIgSlBcIixcImVudGVycHJpc2VDb21tYW5kQmFyLmdvVG9cIjpcIkdvIHRvIHt7dHlwZX19IEpQXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci52aWV3TW9yZVwiOlwiVmlldyBNb3JlIEpQXCIsXCJzaWRlUGFuZWwuYWlDZW50ZXJcIjpcIkFJIENlbnRlciBKUFwiLFwic2lkZVBhbmVsLm5ld0NoYXRcIjpcIk5ldyBDaGF0IEpQXCIsXCJzaWRlUGFuZWwudG9nZ2xlU2lkZVBhbmVsXCI6XCJUb2dnbGUgU2lkZSBQYW5lbCBKUFwiLFwic2lkZVBhbmVsLmNsb3NlU2lkZVBhbmVsXCI6XCJDbG9zZSBTaWRlIFBhbmVsIEpQXCIsXCJzaWRlUGFuZWwub3BlbkFpQ2VudGVyXCI6XCJPcGVuIEFJIENlbnRlciBKUFwiLFwiY29udGV4dE1lbnUucXVpdEVudGVycHJpc2VCcm93c2VyXCI6XCJRdWl0IEpQXCIsXCJkb2NrLnJlbW92ZUZhdm9yaXRlXCI6XCJSZW1vdmUgSlBcIn0nKSxObj1KU09OLnBhcnNlKCd7XCJjb250ZXh0TWVudS5uZXdXaW5kb3dcIjpcIuyDiCDssL1cIixcImNvbnRleHRNZW51Lm5ld1BhZ2VcIjpcIuyDiCDtjpjsnbTsp4BcIixcImNvbnRleHRNZW51LnJlc3RvcmVcIjpcIuuniOyngOunieycvOuhnCDsoIDsnqXtlZwg67OA6rK9IOyCrO2VreycvOuhnCDrs7Xsm5BcIixcImNvbnRleHRNZW51LnN3aXRjaFdvcmtzcGFjZVwiOlwi7J6R7JeFIOqzteqwhCDsoITtmZhcIixcImNvbnRleHRNZW51Lm1hbmFnZURlc2t0b3BTaWduYWxzXCI6XCJNYW5hZ2UgRGVza3RvcCBTaWduYWxzXCIsXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCI6XCLrqqjslpFcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIjpcIuyekeyXhSDqs7XqsIQg7KCA7J6lXCIsXCJjb250ZXh0TWVudS5zYXZlV29ya3NwYWNlQXNcIjpcIuuLpOuluCDsnbTrpoTsnLzroZwg7J6R7JeFIOqzteqwhCDsoIDsnqUuLi5cIixcImNvbnRleHRNZW51LnJlbmFtZVdvcmtzcGFjZVwiOlwi7J6R7JeFIOqzteqwhCDsnbTrpoQg67CU6r646riwXCIsXCJjb250ZXh0TWVudS5kZWxldGVXb3Jrc3BhY2VcIjpcIuyekeyXhSDqs7XqsIQg7IKt7KCcXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcIuuLpOyatOuhnOuTnFwiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VcIjpcIu2OmOydtOyngCDsoIDsnqVcIixcImNvbnRleHRNZW51LnNhdmVQYWdlQXNcIjpcIuuLpOuluCDsnbTrpoTsnLzroZwg7Y6Y7J207KeAIOyggOyepS4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRcIjpcIuyduOyHhC4uLlwiLFwiY29udGV4dE1lbnUucHJpbnRTY3JlZW5cIjpcIu2ZlOuptCDsnbjsh4RcIixcImNvbnRleHRNZW51LmNsb3NlV2luZG93XCI6XCLssL0g64ur6riwXCIsXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiOlwi66ek7J6lIOyXtOq4sFwiLFwiY29udGV4dE1lbnUucXVpdFBsYXRmb3JtXCI6XCLtlIzrnqvtj7wg7KKF66OMXCIsXCJjb250ZXh0TWVudS5uZXdWaWV3XCI6XCLsg4gg67ewXCIsXCJjb250ZXh0TWVudS5vcGVuVmlld1wiOlwi6riw67O4IOybuSDruIzrnbzsmrDsoIDroZwg67ewIOyXtOq4sFwiLFwiY29udGV4dE1lbnUub3BlblZpZXdzXCI6XCLquLDrs7gg7Ju5IOu4jOudvOyasOyggOuhnCDrt7Ag7Je06riwXCIsXCJjb250ZXh0TWVudS5yZWxvYWRcIjpcIlJlbG9hZCBLUlwiLFwiY29udGV4dE1lbnUucmVsb2FkVmlld1wiOlwi67ewIOuLpOyLnCDroZzrk5xcIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdzXCI6XCLrt7Ag64uk7IucIOuhnOuTnFwiLFwiY29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgS1JcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdcIjpcIuu3sCDrs7XsoJxcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVZpZXdzXCI6XCLrt7Ag67O17KCcXCIsXCJjb250ZXh0TWVudS5hZGRWaWV3XCI6XCLssYTrhJDsl5Ag67ewIOy2lOqwgFwiLFwiY29udGV4dE1lbnUuYWRkVmlld3NcIjpcIuyxhOuEkOyXkCDrt7Ag7LaU6rCAXCIsXCJjb250ZXh0TWVudS5yZW1vdmVWaWV3XCI6XCLssYTrhJDsl5DshJwg67ewIOygnOqxsFwiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld3NcIjpcIuyxhOuEkOyXkOyEnCDrt7Ag7KCc6rGwXCIsXCJjb250ZXh0TWVudS5jbG9zZVZpZXdcIjpcIuu3sCDri6vquLBcIixcImNvbnRleHRNZW51LmNsb3NlVmlld3NcIjpcIuu3sCDri6vquLBcIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgS1JcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcIu2OmOydtOyngCDrs7XsoJxcIixcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRcIjpcIuyduOyHhFwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiOlwi66qo65GQIOyduOyHhFwiLFwic2F2ZU1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLri6Trpbgg7J2066aE7Jy866GcIOyekeyXhSDqs7XqsIQg7KCA7J6lXCIsXCJzYXZlTWVudS5zYXZlUGFnZUFzXCI6XCLri6Trpbgg7J2066aE7Jy866GcIO2OmOydtOyngCDsoIDsnqVcIixcInNhdmVNb2RhbC5lbnRlclZhbHVlXCI6XCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBLUlwiLFwic2F2ZU1vZGFsLmFscmVhZHlFeGlzdHNcIjpcInt7dGl0bGV9feydtCjqsIApIOydtOuvuCDsobTsnqztlanri4jri6QuXCIsXCJzYXZlTW9kYWwucGxlYXNlRW50ZXJWYWxpZE5hbWVcIjpcIuycoO2aqO2VnCDsnbTrpoTsnYQg7J6F66Cl7ZWY7Iut7Iuc7JikLlwiLFwic2F2ZU1vZGFsLnJlbmFtZVBhZ2VcIjpcIu2OmOydtOyngCDsnbTrpoQg67CU6r646riwXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCLtjpjsnbTsp4Ag64ur6riwXCIsXCJzYXZlTW9kYWwuZGlzY2FyZENoYW5nZXNcIjpcIuuzgOqyvSDsgqztla0g7Y+Q6riwXCIsXCJzYXZlTW9kYWwuZGlzY2FyZEFsbFwiOlwi66qo65GQIO2PkOq4sFwiLFwic2F2ZU1vZGFsLnNhdmVBbGxcIjpcIuuqqOuRkCDsoIDsnqVcIixcInNhdmVNb2RhbC5zYXZlUGFnZXNDb3VudFwiOlwi64ur6riwIOyghOyXkCDtjpjsnbTsp4Aoe3tjb3VudH196rCcKeulvCDsoIDsnqXtlZjsi5zqsqDsirXri4jquYw/XCIsXCJkZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBQYWdlIEtSXCIsXCJlbnRlcnByaXNlRGVmYXVsdFBhZ2VUaXRsZVwiOlwiVW50aXRsZWQgU3VwZXJ0YWIgS1JcIixcImFkZE5ld1BhZ2VcIjpcIuyDiCDtjpjsnbTsp4Ag7LaU6rCAXCIsXCJhZGROZXdUYWJcIjpcIuyDiCDtg60g7LaU6rCAXCIsXCJhZGROZXdWaWV3XCI6XCLsg4gg67ewXCIsXCJyZXN0b3JlTW9kYWxcIjpcIuuniOyngOunieycvOuhnCDsoIDsnqXtlZwg67OA6rK9IOyCrO2VreycvOuhnCDrs7Xsm5DtlZjsi5zqsqDsirXri4jquYw/XCIsXCJtb2RhbC5kaXNjYXJkV2FybmluZ1wiOlwi7KCA7J6l7ZWY7KeAIOyViuydgCDrs4Dqsr0g7IKs7ZWt7J2AIOuqqOuRkCDtj5DquLDrkKnri4jri6RcIixcIm1vZGFsLmRpc2NhcmRQYWdlV2FybmluZ1wiOlwi7J20IO2OmOydtOyngOydmCDsoIDsnqXtlZjsp4Ag7JWK7J2AIOuzgOqyvSDsgqztla3snYAg66qo65GQIOyGkOyLpOuQqeuLiOuLpC5cIixcIm1vZGFsLnNhdmVDaGFuZ2VzUHJvbXB0XCI6XCLri6vquLAg7KCE7JeQIOuzgOqyvSDsgqztla3snYQg7KCA7J6l7ZWY7Iuc6rKg7Iq164uI6rmMP1wiLFwibW9kYWwucGFnZUNsb3NlXCI6XCLtjpjsnbTsp4Ag64ur6riwXCIsXCJzd2l0Y2hXb3Jrc3BhY2VNb2RhbFwiOlwie3t3b3Jrc3BhY2V9fSjsnLwp66GcIOyghO2ZmO2VmOyLnOqyoOyKteuLiOq5jD9cIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIjpcIuyggOyepe2VmOyngCDslYrsnYAg67OA6rK9IOyCrO2VreydgCDrqqjrkZAg7Y+Q6riw65Cp64uI64ukXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwi7J20IOyekeyXhSDqs7XqsITsnYQg7JiB6rWs7KCB7Jy866GcIOyCreygnO2VmOyLnOqyoOyKteuLiOq5jD9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCJ7e3dvcmtzcGFjZX19KOydtCnrnbzripQg7J2066aE7J2YIOyekeyXhSDqs7XqsITsnbQg7J2066+4IOyhtOyerO2VqeuLiOuLpC4g6rWQ7LK07ZWY7Iuc6rKg7Iq164uI6rmMP1wiLFwicmVwbGFjZVdvcmtzcGFjZU1vZGFsLndhcm5pbmcuYm9keVwiOlwi6rCZ7J2AIOydtOumhOydmCDsnpHsl4Ug6rO16rCE7J20IOydtOuvuCDsobTsnqztlanri4jri6QuIOq1kOyytO2VmOuptCDtmITsnqwg64K07Jqp7J2EIOuNruyWtOyTsOqyjCDrkKnri4jri6QuXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwucmVwbGFjZVwiOlwi6rWQ7LK0XCIsXCJjbG9zZVBsYXRmb3JtXCI6XCLtlIzrnqvtj7wg64ur6riwXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwie3t3b3Jrc3BhY2V9fSDtlIzrnqvtj7wg64ur6riwXCIsXCJjbG9zZVBsYXRmb3JtLndhcm5pbmdcIjpcIu2UjOueq+2PvOydhCDri6vsnLzrqbQg7Iuk7ZaJIOykkeyduCDrqqjrk6Ag7J6R7JeFIOqzteqwhCwg7JWxIOuYkOuKlCDtlITroZzshLjsiqTqsIAg64ur7Z6Z64uI64ukLlwiLFwiYmFja1wiOlwi65Kk66GcIOqwgOq4sFwiLFwiZm9yd2FyZFwiOlwi7JWe7Jy866GcIOqwgOq4sFwiLFwicmVsb2FkXCI6XCLsg4jroZzqs6DsuahcIixcImdyZWVuXCI6XCLrhbnsg4lcIixcInB1cnBsZVwiOlwi67O065287IOJXCIsXCJvcmFuZ2VcIjpcIuyYpOugjOyngOyDiVwiLFwicmVkXCI6XCLruajqsITsg4lcIixcInBpbmtcIjpcIu2Vke2BrOyDiVwiLFwieWVsbG93XCI6XCLrhbjrnoDsg4lcIixcInRoZW1lLmxpZ2h0XCI6XCLrsJ3snYBcIixcInRoZW1lLmRhcmtcIjpcIuyWtOuRkOyatFwiLFwidGhlbWUuc3lzdGVtXCI6XCJPUyDshKTsoJXqs7wg64+Z6riw7ZmUXCIsXCJ0b29sYmFyLmhpZGVUYWJzXCI6XCLtg60g7Iio6riw6riwXCIsXCJ0b29sYmFyLnNob3dUYWJzXCI6XCLtg60g7ZGc7IucXCIsXCJ0b29sYmFyLmxvY2tcIjpcIuyeoOq4iFwiLFwidG9vbGJhci51bmxvY2tcIjpcIuyeoOq4iCDtlbTsoJxcIixcInRvb2xiYXIuY29sb3JMaW5raW5nXCI6XCLsg4nsg4Eg7Jew6rKwXCIsXCJ0b29sYmFyLmNoYW5nZUxheW91dFwiOlwi66CI7J207JWE7JuDIOuzgOqyvVwiLFwidG9vbGJhci5zYXZlTWVudVwiOlwi7KCA7J6lIOuplOuJtFwiLFwidG9vbGJhci5tYXhpbWl6ZVdpbmRvd1wiOlwi7LC9IOy1nOuMgO2ZlFwiLFwidG9vbGJhci5yZXN0b3JlV2luZG93XCI6XCLssL0g67O17JuQXCIsXCJ0b29sYmFyLm1pbmltaXplV2luZG93XCI6XCLssL0g7LWc7IaM7ZmUXCIsXCJjaGFuZ2VMYXlvdXQuZnVsbFdpZHRoXCI6XCLsoITssrQg64SI67mEXCIsXCJjaGFuZ2VMYXlvdXQuY29sdW1uc1wiOlwi7Je0XCIsXCJjaGFuZ2VMYXlvdXQuUm93c1wiOlwi7ZaJXCIsXCJjaGFuZ2VMYXlvdXQuR3JpZFwiOlwi6re466as65OcXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVN3aXRjaGVkXCI6XCLsnpHsl4Ug6rO16rCEIOyghO2ZmFwiLFwic3VjY2Vzc0luZGljYXRvci5oaWRkZW5cIjpcIu2DrSDsiKjquYBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iuc2hvd25cIjpcIu2DrSDtkZzsi5xcIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCLtjpjsnbTsp4Ag7J6g6riIXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLtjpjsnbTsp4Ag7J6g6riIIO2VtOygnOuQqFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiOlwi7J6R7JeFIOqzteqwhCDsoIDsnqXrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRBc1wiOlwi7J6R7JeFIOqzteqwhOydtCB7e3dvcmtzcGFjZX19KOycvCnroZwg7KCA7J6l65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVJlbmFtZWRcIjpcIuyekeyXhSDqs7XqsIQg7J2066aEIOuzgOqyveuQqFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlU2F2ZWRcIjpcIu2OmOydtOyngCDsoIDsnqXrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZUhhc0JlZW5TYXZlZFwiOlwiXFxcXFwie3t0aXRsZX19XFxcXFwiIGhhcyBiZWVuIHNhdmVkLiBLUlwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlQ29weVNhdmVkXCI6XCLtjpjsnbTsp4DqsIAge3t0aXRsZX19KOycvCnroZwg7KCA7J6l65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VSZW5hbWVkXCI6XCLtjpjsnbTsp4Ag7J2066aEIOuzgOqyveuQqFwiLFwic3VjY2Vzc0luZGljYXRvci5jb250ZXh0R3JvdXBBcHBsaWVkXCI6XCLsu6jthY3siqTtirgg6re466O5IOyggeyaqeuQqFwiLFwic3VjY2Vzc0luZGljYXRvci5uYW1lZENvbnRleHRHcm91cEFwcGxpZWRcIjpcInt7Y29sb3JOYW1lfX0g7Luo7YWN7Iqk7Yq4IOq3uOujuSDsoIHsmqnrkKhcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcIuy7qO2FjeyKpO2KuCDqt7jro7nsl5DshJwg67ewIOygnOqxsOuQqFwiLFwic3VjY2Vzc0luZGljYXRvci52aWV3c1JlbW92ZWRcIjpcIuy7qO2FjeyKpO2KuCDqt7jro7nsl5DshJwg67ewIOygnOqxsOuQqFwiLFwic3VjY2Vzc0luZGljYXRvci5sYXlvdXRBcHBsaWVkXCI6XCJ7e2xheW91dE5hbWV9fSDroIjsnbTslYTsm4Mg7KCB7Jqp65CoXCIsXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZURlbGV0ZWRcIjpcIuyekeyXhSDqs7XqsIQg7IKt7KCc65CoXCIsXCJlcnJvckluZGljYXRvci5wYWdlU2F2ZUZhaWxlZFwiOlwi7Y6Y7J207KeAIOyggOyepSDsi6TtjKhcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcIuyekeyXhSDqs7XqsIQg7KCA7J6lIOyLpO2MqFwiLFwiZXJyb3JJbmRpY2F0b3IuZmFpbGVkVG9EdXBsaWNhdGVQYWdlXCI6XCLtjpjsnbTsp4Ag67O17KCcIOyLpO2MqFwiLFwiaW5mb0luZGljYXRvci5jb2xvckxpbmtBdHRlbXB0XCI6XCLsnbQg7YOt7J2YIOyDieyDgSDrp4Htgazrpbwg7Iuc64+E7ZaI7KeA66eMIOyCrOydtO2KuC/svZjthZDsuKAg7IaM7Jyg7J6Q6rCAIOyVhOyngSDtmZzshLHtmZTtlZjsp4Ag7JWK7JWY7Iq164uI64ukLlwiLFwiZ2xvYmFsLmNhbmNlbFwiOlwi7Leo7IaMXCIsXCJnbG9iYWwuY29uZmlybVwiOlwi7ZmV7J24XCIsXCJnbG9iYWwuc2F2ZVwiOlwi7KCA7J6lXCIsXCJnbG9iYWwuZGVsZXRlXCI6XCJEZWxldGUgS1JcIixcImFwcFJlc3VsdHMuaGVhZGVyXCI6XCJGZWF0dXJlZCBDb250ZW50IEtSXCIsXCJyZWNlbnRseUNsb3NlZC5oZWFkZXJcIjpcIlJlY2VudGx5IENsb3NlZCBLUlwiLFwibGFuZGluZ1BhZ2Uuc3ViaGVhZGVyXCI6XCJBcHBzIGFuZCB3ZWJzaXRlcyBzZWxlY3RlZCBieSBhbiBhZG1pbiB3aWxsIHNob3cgaGVyZSBLUlwiLFwiYXJpYS5vcGVuQnJvd3NlclwiOlwi67iM65287Jqw7KCAIOuplOuJtCDsl7TquLBcIixcImFyaWEuYnJvd3NlclRhYnNcIjpcIuu4jOudvOyasOyggCDtg61cIixcImFyaWEudmlld1RhYlwiOlwie3t0aXRsZX197J2YIOu3sCDtg61cIixcImFyaWEuY2xvc2VQYWdlXCI6XCJ7e3RpdGxlfX3snZgg7Y6Y7J207KeAIOuLq+q4sCDtg61cIixcImFyaWEuY2xvc2VUYWJcIjpcIu2DrSB7e3RpdGxlfX0g64ur6riwXCIsXCJhcmlhLnRpdGxlXCI6XCLsoJzrqqlcIixcImFyaWEuY2xvc2VDb250ZXh0R3JvdXBcIjpcIuydtOyKpOy8gOydtO2UhOulvCDsgqzsmqntlZjsl6wg7Luo7YWN7Iqk7Yq4IOq3uOujuSDshKDtg50g64yA7ZmU7IOB7J6QIOuLq+q4sFwiLFwiYXJpYS5jb2xvckxpbmtpbmdcIjpcIuyDieyDgSDsl7DqsrAg7ZGc7IucIOuYkOuKlCDsiKjquLDquLBcIixcImFyaWEuYXBwbHlDb2xvckxpbmtpbmdcIjpcIuyDieyDgSDsl7DqsrDsnYQg7KCB7Jqp7ZWY66Ck66m0IOu3sOulvCDshKDtg53tlZjsi63si5zsmKQuXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCJ7e25hbWV9fSDsu6jthY3siqTtirgg6re466O57JeQIO2VoOuLueuQnCDtmITsnqwg67ewXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3c1wiOlwie3tuYW1lfX0g7Luo7YWN7Iqk7Yq4IOq3uOujueyXkCDtlaDri7nrkJwg7ZiE7J6sIOu3sFwiLFwiYXJpYS5zZXRDb2xvckxpbmtpbmdBY3RpdmVWaWV3XCI6XCLtmZzshLEg67ew66W8IHt7bmFtZX19IOy7qO2FjeyKpO2KuCDqt7jro7nsnLzroZwg7ISk7KCVXCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdzXCI6XCLtmZzshLEg67ew66W8IHt7bmFtZX19IOy7qO2FjeyKpO2KuCDqt7jro7nsnLzroZwg7ISk7KCVXCIsXCJhcmlhLmVzY2FwZUxheW91dERpYWxvZ1wiOlwi7J207Iqk7LyA7J207ZSE66W8IOyCrOyaqe2VmOyXrCDroIjsnbTslYTsm4Mg67OA6rK9IOuMgO2ZlOyDgeyekCDri6vquLBcIixcImdsb2JhbC5zdXBlcnRhYlwiOlwiU3VwZXJ0YWIgS1JcIixcImdsb2JhbC50YWJcIjpcIlRhYiBLUlwiLFwiYm9va21hcmtzLmVkaXRCb29rbWFya1wiOlwiRWRpdCBCb29rbWFyayBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRcIjpcIkJvb2ttYXJrIGFkZGVkIEtSXCIsXCJib29rbWFya3MuZG9uZVwiOlwiRG9uZSBLUlwiLFwiYm9va21hcmtzLnJlbW92ZVwiOlwiUmVtb3ZlIEtSXCIsXCJib29rbWFya3MuYm9va21hcmtzUGFuZWxcIjpcIkJvb2ttYXJrcyBQYW5lbCBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrc1wiOlwiQm9va21hcmtzIEtSXCIsXCJib29rbWFya3MuYWxsQm9va21hcmtzXCI6XCJBbGwgQm9va21hcmtzIEtSXCIsXCJib29rbWFya3MuZmF2b3JpdGVzXCI6XCJGYXZvcml0ZXMgS1JcIixcImJvb2ttYXJrcy5zZWFyY2hCb29rbWFya3NcIjpcIlNlYXJjaCBCb29rbWFya3MgS1JcIixcImJvb2ttYXJrcy5jbGVhclNlYXJjaElucHV0XCI6XCJDbGVhciBTZWFyY2ggSW5wdXQgS1JcIixcImJvb2ttYXJrcy5jcmVhdGVGb2xkZXJcIjpcIkNyZWF0ZSBOZXcgRm9sZGVyIEtSXCIsXCJib29rbWFya3MuZXhpdEZvbGRlclwiOlwiRXhpdCBGb2xkZXIgS1JcIixcImJvb2ttYXJrcy5uZXdGb2xkZXJcIjpcIk5ldyBGb2xkZXIgS1JcIixcImJvb2ttYXJrcy5uYW1lZEZvbGRlclwiOlwie3tuYW1lfX0gRm9sZGVyIEtSXCIsXCJib29rbWFya3MuYm9va21hcmtTZXR0aW5nc1wiOlwie3tuYW1lfX0gQm9va21hcmsgU2V0dGluZ3MgS1JcIixcImJvb2ttYXJrcy5mb2xkZXJTZXR0aW5nc1wiOlwie3tuYW1lfX0gRm9sZGVyIFNldHRpbmdzIEtSXCIsXCJib29rbWFya3Mubm9SZXN1bHRzRm91bmRcIjpcIk5vIHJlc3VsdHMgZm91bmQgS1JcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFN1YnRleHRcIjpcIlRoZXJlIGFyZSBubyBib29rbWFya3MgdGhhdCBtYXRjaCB5b3VyIHNlYXJjaCBLUlwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dcIjpcIk5vdGhpbmcgdG8gc2hvdyB5ZXQgS1JcIixcImJvb2ttYXJrcy5ub3RoaW5nVG9TaG93U3VidGV4dFwiOlwiQWRkIGEgYm9va21hcmsgdG8gdGhpcyBmb2xkZXIgS1JcIixcImJvb2ttYXJrcy5yZXN1bHRzRm91bmRJblwiOlwiUmVzdWx0cyBmb3VuZCBpbiB7e25hbWV9fSBLUlwiLFwiYm9va21hcmtzLnJlc3VsdHNJbk90aGVyRm9sZGVyc1wiOlwiUmVzdWx0cyBmb3VuZCBpbiBvdGhlciBmb2xkZXJzIEtSXCIsXCJib29rbWFya3MuYWxsUmVzdWx0c0ZvdW5kSW5cIjpcIkFsbCByZXN1bHRzIGZvdW5kIGluIEtSXCIsXCJib29rbWFya3MuZWRpdE5hbWVcIjpcIkVkaXQgTmFtZSBLUlwiLFwiYm9va21hcmtzLm1vdmVcIjpcIk1vdmUgS1JcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVGl0bGVcIjpcIkJvb2ttYXJrIEFkZGVkIEtSXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFRvRm9sZGVyXCI6XCJZb3VyIGJvb2ttYXJrIHdhcyBhZGRlZCB0byBcXFxcXCJ7e2ZvbGRlck5hbWV9fVxcXFxcIiBLUlwiLFwiYm9va21hcmtzLmJvb2ttYXJrRWRpdGVkVGl0bGVcIjpcIkJvb2ttYXJrIEVkaXRlZCBLUlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYlwiOlwiU2F2ZSBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCI6XCJTYXZlIFN1cGVydGFiIEFzLi4uIEtSXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCI6XCJEdXBsaWNhdGUgS1JcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kZWxldGVTdXBlcnRhYlwiOlwiRGVsZXRlIFN1cGVydGFiIEtSXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUubmV3VGFiXCI6XCJOZXcgVGFiIEtSXCIsXCJlbnRlcnByaXNlU2F2ZU1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMgS1JcIixcImVudGVycHJpc2VTYXZlTW9kYWxcIjp7XCJzYXZlU3VwZXJ0YWJDb3VudF9vbmVcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFiIGJlZm9yZSBjbG9zaW5nPyBLUlwiLFwic2F2ZVN1cGVydGFiQ291bnRfb3RoZXJcIjpcIlNhdmUge3tjb3VudH19IFN1cGVydGFicyBiZWZvcmUgY2xvc2luZz8gS1JcIn0sXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnJlbmFtZVN1cGVydGFiXCI6XCJSZW5hbWUgS1JcIixcImVudGVycHJpc2VTYXZlTW9kYWwudW5zYXZlZENoYW5nZXNcIjpcIllvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcyBpbiB0aGlzIFRhYi4gS1JcIixcImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VUYWJcIjpcIkNsb3NlIFRhYiBLUlwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVN1cGVydGFiXCI6XCJDbG9zZSBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZU1vZGFsLmRpc2NhcmRTdXBlcnRhYldhcm5pbmdcIjpcIkFueSB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBLUlwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgdGhlIFxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYj8gS1JcIixcImVudGVycHJpc2VEZWxldGVNb2RhbC5kZWxldGVTdXBlcnRhYldhcm5pbmdcIjpcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBTdXBlcnRhYj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSBhbmQgaXMgcGVybWFuZW50LiBLUlwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJTYXZlZFwiOlwiU3VwZXJ0YWIgU2F2ZWQgS1JcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gc2F2ZWQuIEtSXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIjpcIlN1cGVydGFiIERlbGV0ZWQgS1JcIixcImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiSGFzQmVlbkRlbGV0ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBkZWxldGVkLiBLUlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlVGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFRhYiBLUlwiLFwiZW50ZXJwcmlzZUVycm9ySW5kaWNhdG9yLmZhaWxlZFRvRHVwbGljYXRlU3VwZXJ0YWJcIjpcIkZhaWxlZCB0byBkdXBsaWNhdGUgU3VwZXJ0YWIgS1JcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnN3aXRjaFRvU3VwZXJ0YWJcIjpcIlN3aXRjaCB0byBTdXBlcnRhYiBLUlwiLFwiZW50ZXJwcmlzZUNvbW1hbmRCYXIuZ29Ub1wiOlwiR28gdG8ge3t0eXBlfX0gS1JcIixcImVudGVycHJpc2VDb21tYW5kQmFyLnZpZXdNb3JlXCI6XCJWaWV3IE1vcmUgS1JcIixcInNpZGVQYW5lbC5haUNlbnRlclwiOlwiQUkgQ2VudGVyIEtSXCIsXCJzaWRlUGFuZWwubmV3Q2hhdFwiOlwiTmV3IENoYXQgS1JcIixcInNpZGVQYW5lbC50b2dnbGVTaWRlUGFuZWxcIjpcIlRvZ2dsZSBTaWRlIFBhbmVsIEtSXCIsXCJzaWRlUGFuZWwuY2xvc2VTaWRlUGFuZWxcIjpcIkNsb3NlIFNpZGUgUGFuZWwgS1JcIixcInNpZGVQYW5lbC5vcGVuQWlDZW50ZXJcIjpcIk9wZW4gQUkgQ2VudGVyIEtSXCIsXCJjb250ZXh0TWVudS5xdWl0RW50ZXJwcmlzZUJyb3dzZXJcIjpcIlF1aXQgS1JcIixcImRvY2sucmVtb3ZlRmF2b3JpdGVcIjpcIlJlbW92ZSBLUlwifScpLExuPUpTT04ucGFyc2UoJ3tcImNvbnRleHRNZW51Lm5ld1dpbmRvd1wiOlwi0J3QvtCy0L7QtSDQvtC60L3QvlwiLFwiY29udGV4dE1lbnUubmV3UGFnZVwiOlwi0J3QvtCy0LDRjyDRgdGC0YDQsNC90LjRhtCwXCIsXCJjb250ZXh0TWVudS5yZXN0b3JlXCI6XCLQktC+0YHRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QvtGB0LvQtdC00L3QuNC1INGB0L7RhdGA0LDQvdC10L3QvdGL0LUg0LjQt9C80LXQvdC10L3QuNGPXCIsXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIjpcItCf0LXRgNC10LrQu9GO0YfQuNGC0Ywg0YDQsNCx0L7Rh9GD0Y4g0L7QsdC70LDRgdGC0YxcIixcImNvbnRleHRNZW51Lm1hbmFnZURlc2t0b3BTaWduYWxzXCI6XCJNYW5hZ2UgRGVza3RvcCBTaWduYWxzXCIsXCJjb250ZXh0TWVudS5hcHBlYXJhbmNlXCI6XCLQktC90LXRiNC90LjQuSDQstC40LRcIixcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIjpcItCh0L7RhdGA0LDQvdC40YLRjCDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjFwiLFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZUFzXCI6XCLQodC+0YXRgNCw0L3QuNGC0Ywg0YDQsNCx0L7Rh9GD0Y4g0L7QsdC70LDRgdGC0Ywg0LrQsNC6Li4uXCIsXCJjb250ZXh0TWVudS5yZW5hbWVXb3Jrc3BhY2VcIjpcItCf0LXRgNC10LjQvNC10L3QvtCy0LDRgtGMINGA0LDQsdC+0YfRg9GOINC+0LHQu9Cw0YHRgtGMXCIsXCJjb250ZXh0TWVudS5kZWxldGVXb3Jrc3BhY2VcIjpcItCj0LTQsNC70LjRgtGMINGA0LDQsdC+0YfRg9GOINC+0LHQu9Cw0YHRgtGMXCIsXCJjb250ZXh0TWVudS5kb3dubG9hZHNcIjpcItCX0LDQs9GA0YPQt9C60LhcIixcImNvbnRleHRNZW51LnNhdmVQYWdlXCI6XCLQodC+0YXRgNCw0L3QuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwiY29udGV4dE1lbnUuc2F2ZVBhZ2VBc1wiOlwi0KHQvtGF0YDQsNC90LjRgtGMINGB0YLRgNCw0L3QuNGG0YMg0LrQsNC6Li4uXCIsXCJjb250ZXh0TWVudS5wcmludFwiOlwi0J/QtdGH0LDRgtGMLi4uXCIsXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiOlwi0KDQsNGB0L/QtdGH0LDRgtCw0YLRjCDRjdC60YDQsNC9XCIsXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiOlwi0JfQsNC60YDRi9GC0Ywg0L7QutC90L5cIixcImNvbnRleHRNZW51Lm9wZW5TdG9yZWZyb250XCI6XCLQntGC0LrRgNGL0YLRjCBTdG9yZWZyb250XCIsXCJjb250ZXh0TWVudS5xdWl0UGxhdGZvcm1cIjpcItCS0YvQudGC0Lgg0LjQtyDQv9C70LDRgtGE0L7RgNC80YtcIixcImNvbnRleHRNZW51Lm5ld1ZpZXdcIjpcItCd0L7QstC+0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LVcIixcImNvbnRleHRNZW51Lm9wZW5WaWV3XCI6XCLQntGC0LrRgNGL0YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDRgSDQv9C+0LzQvtGJ0YzRjiDQstC10LEt0LHRgNCw0YPQt9C10YDQsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjlwiLFwiY29udGV4dE1lbnUub3BlblZpZXdzXCI6XCLQntGC0LrRgNGL0YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRjyDRgSDQv9C+0LzQvtGJ0YzRjiDQstC10LEt0LHRgNCw0YPQt9C10YDQsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjlwiLFwiY29udGV4dE1lbnUucmVsb2FkXCI6XCJSZWxvYWQgUlVcIixcImNvbnRleHRNZW51LnJlbG9hZFZpZXdcIjpcItCf0LXRgNC10LfQsNCz0YDRg9C30LjRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XCIsXCJjb250ZXh0TWVudS5yZWxvYWRWaWV3c1wiOlwi0J/QtdGA0LXQt9Cw0LPRgNGD0LfQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y9cIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVwiOlwiRHVwbGljYXRlIFJVXCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3XCI6XCLQlNGD0LHQu9C40YDQvtCy0LDRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XCIsXCJjb250ZXh0TWVudS5kdXBsaWNhdGVWaWV3c1wiOlwi0JTRg9Cx0LvQuNGA0L7QstCw0YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRj1wiLFwiY29udGV4dE1lbnUuYWRkVmlld1wiOlwi0JTQvtCx0LDQstC40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDQvdCwINC60LDQvdCw0LtcIixcImNvbnRleHRNZW51LmFkZFZpZXdzXCI6XCLQlNC+0LHQsNCy0LjRgtGMINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPINC90LAg0LrQsNC90LDQu1wiLFwiY29udGV4dE1lbnUucmVtb3ZlVmlld1wiOlwi0KPQtNCw0LvQuNGC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0LjQtyDQutCw0L3QsNC70LBcIixcImNvbnRleHRNZW51LnJlbW92ZVZpZXdzXCI6XCLQo9C00LDQu9C40YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRjyDQuNC3INC60LDQvdCw0LvQsFwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3XCI6XCLQl9Cw0LrRgNGL0YLRjCDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVwiLFwiY29udGV4dE1lbnUuY2xvc2VWaWV3c1wiOlwi0JfQsNC60YDRi9GC0Ywg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y9cIixcImNvbnRleHRNZW51LmNsb3NlVGFiXCI6XCJDbG9zZSBUYWIgUlVcIixcImNvbnRleHRNZW51LmR1cGxpY2F0ZVBhZ2VcIjpcItCU0YPQsdC70LjRgNC+0LLQsNGC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludFwiOlwi0J/QtdGH0LDRgtCw0YLRjFwiLFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiOlwi0J/QtdGH0LDRgtCw0YLRjCDQstGB0LVcIixcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiOlwi0KHQvtGF0YDQsNC90LjRgtGMINGA0LDQsdC+0YfRg9GOINC+0LHQu9Cw0YHRgtGMINC60LDQulwiLFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiOlwi0KHQvtGF0YDQsNC90LjRgtGMINGB0YLRgNCw0L3QuNGG0YMg0LrQsNC6XCIsXCJzYXZlTW9kYWwuZW50ZXJWYWx1ZVwiOlwiUGxlYXNlIGVudGVyIGEgdmFsdWUgUlVcIixcInNhdmVNb2RhbC5hbHJlYWR5RXhpc3RzXCI6XCJ7e3RpdGxlfX0g0YPQttC1INGB0YPRidC10YHRgtCy0YPQtdGCLlwiLFwic2F2ZU1vZGFsLnBsZWFzZUVudGVyVmFsaWROYW1lXCI6XCLQktCy0LXQtNC40YLQtSDQv9C+0LTRhdC+0LTRj9GJ0LXQtSDQuNC80Y9cIixcInNhdmVNb2RhbC5yZW5hbWVQYWdlXCI6XCLQn9C10YDQtdC40LzQtdC90L7QstCw0YLRjCDRgdGC0YDQsNC90LjRhtGDXCIsXCJzYXZlTW9kYWwuY2xvc2VQYWdlXCI6XCLQl9Cw0LrRgNGL0YLRjCDRgdGC0YDQsNC90LjRhtGDXCIsXCJzYXZlTW9kYWwuZGlzY2FyZENoYW5nZXNcIjpcItCe0YLQvNC10L3QuNGC0Ywg0LjQt9C80LXQvdC10L3QuNGPXCIsXCJzYXZlTW9kYWwuZGlzY2FyZEFsbFwiOlwi0J7RgtC80LXQvdC40YLRjCDQstGB0LVcIixcInNhdmVNb2RhbC5zYXZlQWxsXCI6XCLQodC+0YXRgNCw0L3QuNGC0Ywg0LLRgdC1XCIsXCJzYXZlTW9kYWwuc2F2ZVBhZ2VzQ291bnRcIjpcItCh0L7RhdGA0LDQvdC40YLRjCAoe3tjb3VudH19KSDRgdGC0YDQsNC90LjRhiDQv9C10YDQtdC0INC30LDQutGA0YvRgtC40LXQvD9cIixcImRlZmF1bHRQYWdlVGl0bGVcIjpcIlVudGl0bGVkIFBhZ2UgUlVcIixcImVudGVycHJpc2VEZWZhdWx0UGFnZVRpdGxlXCI6XCJVbnRpdGxlZCBTdXBlcnRhYiBSVVwiLFwiYWRkTmV3UGFnZVwiOlwi0JTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINGB0YLRgNCw0L3QuNGG0YNcIixcImFkZE5ld1RhYlwiOlwi0JTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINCy0LrQu9Cw0LTQutGDXCIsXCJhZGROZXdWaWV3XCI6XCLQndC+0LLQvtC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XCIsXCJyZXN0b3JlTW9kYWxcIjpcItCS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0LLQvtGB0YHRgtCw0L3QvtCy0LjRgtGMINC/0L7RgdC70LXQtNC90LjQtSDRgdC+0YXRgNCw0L3QtdC90L3Ri9C1INC40LfQvNC10L3QtdC90LjRjz9cIixcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCI6XCLQktGB0LUg0L3QtdGB0L7RhdGA0LDQvdC10L3QvdGL0LUg0LjQt9C80LXQvdC10L3QuNGPINCx0YPQtNGD0YIg0L7RgtC80LXQvdC10L3Ri1wiLFwibW9kYWwuZGlzY2FyZFBhZ2VXYXJuaW5nXCI6XCLQktGB0LUg0L3QtdGB0L7RhdGA0LDQvdC10L3QvdGL0LUg0LjQt9C80LXQvdC10L3QuNGPINC90LAg0Y3RgtC+0Lkg0YHRgtGA0LDQvdC40YbQtSDQsdGD0LTRg9GCINC/0L7RgtC10YDRj9C90YsuXCIsXCJtb2RhbC5zYXZlQ2hhbmdlc1Byb21wdFwiOlwi0KHQvtGF0YDQsNC90LjRgtGMINC40LfQvNC10L3QtdC90LjRjyDQv9C10YDQtdC0INC30LDQutGA0YvRgtC40LXQvD9cIixcIm1vZGFsLnBhZ2VDbG9zZVwiOlwi0JfQsNC60YDRi9GC0Ywg0YHRgtGA0LDQvdC40YbRg1wiLFwic3dpdGNoV29ya3NwYWNlTW9kYWxcIjpcItCS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0L/QtdGA0LXQudGC0Lgg0LIge3t3b3Jrc3BhY2V9fT9cIixcInN3aXRjaFdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIjpcItCS0YHQtSDQvdC10YHQvtGF0YDQsNC90LXQvdC90YvQtSDQuNC30LzQtdC90LXQvdC40Y8g0LHRg9C00YPRgiDQvtGC0LzQtdC90LXQvdGLXCIsXCJkZWxldGVXb3Jrc3BhY2VNb2RhbFwiOlwi0JLRiyDRg9Cy0LXRgNC10L3Riywg0YfRgtC+INGF0L7RgtC40YLQtSDQvdCw0LLRgdC10LPQtNCwINGD0LTQsNC70LjRgtGMINGN0YLRgyDRgNCw0LHQvtGH0YPRjiDQvtCx0LvQsNGB0YLRjD9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nXCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDRgSDQuNC80LXQvdC10Lwge3t3b3Jrc3BhY2V9fSDRg9C20LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIuINCS0Ysg0YXQvtGC0LjRgtC1INC30LDQvNC10L3QuNGC0Ywg0LXQtT9cIixcInJlcGxhY2VXb3Jrc3BhY2VNb2RhbC53YXJuaW5nLmJvZHlcIjpcItCg0LDQsdC+0YfQsNGPINC+0LHQu9Cw0YHRgtGMINGBINGC0LDQutC40Lwg0LbQtSDQuNC80LXQvdC10Lwg0YPQttC1INGB0YPRidC10YHRgtCy0YPQtdGCLiDQn9GA0Lgg0LXQtSDQt9Cw0LzQtdC90LUg0YLQtdC60YPRidC10LUg0YHQvtC00LXRgNC20LjQvNC+0LUg0LHRg9C00LXRgiDQv9C10YDQtdC30LDQv9C40YHQsNC90L4uXCIsXCJyZXBsYWNlV29ya3NwYWNlTW9kYWwucmVwbGFjZVwiOlwi0JfQsNC80LXQvdC40YLRjFwiLFwiY2xvc2VQbGF0Zm9ybVwiOlwi0JfQsNC60YDRi9GC0Ywg0L/Qu9Cw0YLRhNC+0YDQvNGDXCIsXCJjbG9zZVBsYXRmb3JtLndvcmtzcGFjZVwiOlwi0JfQsNC60YDRi9GC0Ywg0L/Qu9Cw0YLRhNC+0YDQvNGDIHt7d29ya3NwYWNlfX1cIixcImNsb3NlUGxhdGZvcm0ud2FybmluZ1wiOlwi0JfQsNC60YDRi9GC0LjQtSDQv9C70LDRgtGE0L7RgNC80Ysg0L/RgNC40LLQtdC00LXRgiDQuiDQt9Cw0LrRgNGL0YLQuNGOINCy0YHQtdGFINGA0LDQsdC+0YfQuNGFINC+0LHQu9Cw0YHRgtC10LksINC/0YDQuNC70L7QttC10L3QuNC5INC4INC30LDQv9GD0YnQtdC90L3Ri9GFINC/0YDQvtGG0LXRgdGB0L7Qsi5cIixcImJhY2tcIjpcItCd0LDQt9Cw0LRcIixcImZvcndhcmRcIjpcItCS0L/QtdGA0LXQtFwiLFwicmVsb2FkXCI6XCLQn9C10YDQtdC30LDQs9GA0YPQt9C40YLRjMKgXCIsXCJncmVlblwiOlwi0JfQtdC70LXQvdGL0LlcIixcInB1cnBsZVwiOlwi0KTQuNC+0LvQtdGC0L7QstGL0LlcIixcIm9yYW5nZVwiOlwi0J7RgNCw0L3QttC10LLRi9C5XCIsXCJyZWRcIjpcItCa0YDQsNGB0L3Ri9C5XCIsXCJwaW5rXCI6XCLQoNC+0LfQvtCy0YvQuVwiLFwieWVsbG93XCI6XCLQltC10LvRgtGL0LlcIixcInRoZW1lLmxpZ2h0XCI6XCLQodCy0LXRgtC70YvQuVwiLFwidGhlbWUuZGFya1wiOlwi0KLQtdC80L3Ri9C5XCIsXCJ0aGVtZS5zeXN0ZW1cIjpcItCh0LjQvdGF0YDQvtC90LjQt9C40YDQvtCy0LDRgtGMINGBINC90LDRgdGC0YDQvtC50LrQsNC80Lgg0J7QoVwiLFwidG9vbGJhci5oaWRlVGFic1wiOlwi0KHQutGA0YvRgtGMINCy0LrQu9Cw0LTQutC4XCIsXCJ0b29sYmFyLnNob3dUYWJzXCI6XCLQn9C+0LrQsNC30LDRgtGMINCy0LrQu9Cw0LTQutC4XCIsXCJ0b29sYmFyLmxvY2tcIjpcItCX0LDQsdC70L7QutC40YDQvtCy0LDRgtGMXCIsXCJ0b29sYmFyLnVubG9ja1wiOlwi0KDQsNC30LHQu9C+0LrQuNGA0L7QstCw0YLRjFwiLFwidG9vbGJhci5jb2xvckxpbmtpbmdcIjpcItCf0YDQuNCy0Y/Qt9C60LAg0Log0YbQstC10YLRg1wiLFwidG9vbGJhci5jaGFuZ2VMYXlvdXRcIjpcItCY0LfQvNC10L3QuNGC0Ywg0LzQsNC60LXRglwiLFwidG9vbGJhci5zYXZlTWVudVwiOlwi0JzQtdC90Y4g0YHQvtGF0YDQsNC90LXQvdC40Y9cIixcInRvb2xiYXIubWF4aW1pemVXaW5kb3dcIjpcItCj0LLQtdC70LjRh9C40YLRjCDQvtC60L3QvlwiLFwidG9vbGJhci5yZXN0b3JlV2luZG93XCI6XCLQktC+0YHRgdGC0LDQvdC+0LLQuNGC0Ywg0L7QutC90L5cIixcInRvb2xiYXIubWluaW1pemVXaW5kb3dcIjpcItCh0LLQtdGA0L3Rg9GC0Ywg0L7QutC90L5cIixcImNoYW5nZUxheW91dC5mdWxsV2lkdGhcIjpcItCf0L7Qu9C90LDRjyDRiNC40YDQuNC90LBcIixcImNoYW5nZUxheW91dC5jb2x1bW5zXCI6XCLQodGC0L7Qu9Cx0YbRi1wiLFwiY2hhbmdlTGF5b3V0LlJvd3NcIjpcItCh0YLRgNC+0LrQuFwiLFwiY2hhbmdlTGF5b3V0LkdyaWRcIjpcItCh0LXRgtC60LBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU3dpdGNoZWRcIjpcItCg0LDQsdC+0YfQsNGPINC+0LHQu9Cw0YHRgtGMINC/0LXRgNC10LrQu9GO0YfQtdC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3IuaGlkZGVuXCI6XCLQktC60LvQsNC00LrQuCDRgdC60YDRi9GC0YtcIixcInN1Y2Nlc3NJbmRpY2F0b3Iuc2hvd25cIjpcItCS0LrQu9Cw0LTQutC4INC/0L7QutCw0LfQsNC90YtcIixcInN1Y2Nlc3NJbmRpY2F0b3IubG9ja2VkXCI6XCLQodGC0YDQsNC90LjRhtCwINC30LDQsdC70L7QutC40YDQvtCy0LDQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnVubG9ja2VkXCI6XCLQodGC0YDQsNC90LjRhtCwINGA0LDQt9Cx0LvQvtC60LjRgNC+0LLQsNC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlU2F2ZWRcIjpcItCg0LDQsdC+0YfQsNGPINC+0LHQu9Cw0YHRgtGMINGB0L7RhdGA0LDQvdC10L3QsFwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZEFzXCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDRgdC+0YXRgNCw0L3QtdC90LAg0LrQsNC6IHt7d29ya3NwYWNlfX1cIixcInN1Y2Nlc3NJbmRpY2F0b3Iud29ya3NwYWNlUmVuYW1lZFwiOlwi0KDQsNCx0L7Rh9Cw0Y8g0L7QsdC70LDRgdGC0Ywg0L/QtdGA0LXQuNC80LXQvdC+0LLQsNC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCI6XCLQodGC0YDQsNC90LjRhtCwINGB0L7RhdGA0LDQvdC10L3QsFwiLFwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgaGFzIGJlZW4gc2F2ZWQuIFJVXCIsXCJzdWNjZXNzSW5kaWNhdG9yLnBhZ2VDb3B5U2F2ZWRcIjpcItCh0YLRgNCw0L3QuNGG0LAg0YHQvtGF0YDQsNC90LXQvdCwINC60LDQuiB7e3RpdGxlfX1cIixcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVJlbmFtZWRcIjpcItCh0YLRgNCw0L3QuNGG0LAg0L/QtdGA0LXQuNC80LXQvdC+0LLQsNC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3IuY29udGV4dEdyb3VwQXBwbGllZFwiOlwi0JrQvtC90YLQtdC60YHRgtC90LDRjyDQs9GA0YPQv9C/0LAg0L/RgNC40LzQtdC90LXQvdCwXCIsXCJzdWNjZXNzSW5kaWNhdG9yLm5hbWVkQ29udGV4dEdyb3VwQXBwbGllZFwiOlwi0JrQvtC90YLQtdC60YHRgtC90LDRjyDQs9GA0YPQv9C/0LAge3tjb2xvck5hbWV9fSDQv9GA0LjQvNC10L3QtdC90LBcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld1JlbW92ZWRcIjpcItCf0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1INGD0LTQsNC70LXQvdC+INC40Lcg0LrQvtC90YLQtdC60YHRgtC90L7QuSDQs9GA0YPQv9C/0YtcIixcInN1Y2Nlc3NJbmRpY2F0b3Iudmlld3NSZW1vdmVkXCI6XCLQn9GA0LXQtNGB0YLQsNCy0LvQtdC90LjRjyDRg9C00LDQu9C10L3RiyDQuNC3INC60L7QvdGC0LXQutGB0YLQvdC+0Lkg0LPRgNGD0L/Qv9GLXCIsXCJzdWNjZXNzSW5kaWNhdG9yLmxheW91dEFwcGxpZWRcIjpcItCc0LDQutC10YIge3tsYXlvdXROYW1lfX0g0L/RgNC40LzQtdC90LXQvVwiLFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VEZWxldGVkXCI6XCLQoNCw0LHQvtGH0LDRjyDQvtCx0LvQsNGB0YLRjCDRg9C00LDQu9C10L3QsFwiLFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIjpcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0YHQvtGF0YDQsNC90LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcIixcImVycm9ySW5kaWNhdG9yLndvcmtzcGFjZVNhdmVGYWlsZWRcIjpcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0YHQvtGF0YDQsNC90LjRgtGMINGA0LDQsdC+0YfRg9GOINC+0LHQu9Cw0YHRgtGMXCIsXCJlcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVBhZ2VcIjpcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0L/RgNC+0LTRg9Cx0LvQuNGA0L7QstCw0YLRjCDRgdGC0YDQsNC90LjRhtGDXCIsXCJpbmZvSW5kaWNhdG9yLmNvbG9yTGlua0F0dGVtcHRcIjpcItCc0Ysg0L/QvtC/0YvRgtCw0LvQuNGB0Ywg0L/RgNC40LLRj9C30LDRgtGMINGG0LLQtdGCINC6INGN0YLQvtC5INCy0LrQu9Cw0LTQutC1LCDQvdC+INCy0LvQsNC00LXQu9C10YYg0YHQsNC50YLQsC/QutC+0L3RgtC10L3RgtCwINC10YnQtSDQvdC1INCy0LrQu9GO0YfQuNC7INGN0YLRgyDQstC+0LfQvNC+0LbQvdC+0YHRgtGMXCIsXCJnbG9iYWwuY2FuY2VsXCI6XCLQntGC0LzQtdC90LjRgtGMXCIsXCJnbG9iYWwuY29uZmlybVwiOlwi0J/QvtC00YLQstC10YDQtNC40YLRjFwiLFwiZ2xvYmFsLnNhdmVcIjpcItCh0L7RhdGA0LDQvdC40YLRjFwiLFwiZ2xvYmFsLmRlbGV0ZVwiOlwiRGVsZXRlIFJVXCIsXCJhcHBSZXN1bHRzLmhlYWRlclwiOlwiRmVhdHVyZWQgQ29udGVudCBSVVwiLFwicmVjZW50bHlDbG9zZWQuaGVhZGVyXCI6XCJSZWNlbnRseSBDbG9zZWQgUlVcIixcImxhbmRpbmdQYWdlLnN1YmhlYWRlclwiOlwiQXBwcyBhbmQgd2Vic2l0ZXMgc2VsZWN0ZWQgYnkgYW4gYWRtaW4gd2lsbCBzaG93IGhlcmUgUlVcIixcImFyaWEub3BlbkJyb3dzZXJcIjpcItCe0YLQutGA0YvRgtGMINC80LXQvdGOINCx0YDQsNGD0LfQtdGA0LBcIixcImFyaWEuYnJvd3NlclRhYnNcIjpcItCS0LrQu9Cw0LTQutC4INCx0YDQsNGD0LfQtdGA0LBcIixcImFyaWEudmlld1RhYlwiOlwi0JLQutC70LDQtNC60LAg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y8ge3t0aXRsZX19XCIsXCJhcmlhLmNsb3NlUGFnZVwiOlwi0JrQvdC+0L/QutCwIMKr0JfQsNC60YDRi9GC0YzCuyDQvdCwINCy0LrQu9Cw0LTQutC1INC00LvRjyDRgdGC0YDQsNC90LjRhtGLIHt7dGl0bGV9fVwiLFwiYXJpYS5jbG9zZVRhYlwiOlwi0JfQsNC60YDRi9GC0Ywg0LLQutC70LDQtNC60YMge3t0aXRsZX19XCIsXCJhcmlhLnRpdGxlXCI6XCLQndCw0LfQstCw0L3QuNC1XCIsXCJhcmlhLmNsb3NlQ29udGV4dEdyb3VwXCI6XCLQp9GC0L7QsdGLINC30LDQutGA0YvRgtGMINC00LjQsNC70L7QsyDQstGL0LHQvtGA0LAg0LrQvtC90YLQtdC60YHRgtC90L7QuSDQs9GA0YPQv9C/0YssINC40YHQv9C+0LvRjNC30YPQudGC0LUgZXNjYXBlXCIsXCJhcmlhLmNvbG9yTGlua2luZ1wiOlwi0J/QvtC60LDQt9Cw0YLRjCDQuNC70Lgg0YHQutGA0YvRgtGMINC/0YDQuNCy0Y/Qt9C60YMg0Log0YbQstC10YLRg1wiLFwiYXJpYS5hcHBseUNvbG9yTGlua2luZ1wiOlwi0JLRi9Cx0LXRgNC40YLQtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSwg0YfRgtC+0LHRiyDQv9GA0LjQvNC10L3QuNGC0Ywg0L/RgNC40LLRj9C30LrRgyDQuiDRhtCy0LXRgtGDXCIsXCJhcmlhLmFzc2lnbkNvbG9yTGlua2luZ0N1cnJlbnRWaWV3XCI6XCLQotC10LrRg9GJ0LXQtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSwg0L3QsNC30L3QsNGH0LXQvdC90L7QtSDQutC+0L3RgtC10LrRgdGC0L3QvtC5INCz0YDRg9C/0L/QtSB7e25hbWV9fVwiLFwiYXJpYS5hc3NpZ25Db2xvckxpbmtpbmdDdXJyZW50Vmlld3NcIjpcItCi0LXQutGD0YnQuNC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNGPLCDQvdCw0LfQvdCw0YfQtdC90L3Ri9C1INC60L7QvdGC0LXQutGB0YLQvdC+0Lkg0LPRgNGD0L/Qv9C1IHt7bmFtZX19XCIsXCJhcmlhLnNldENvbG9yTGlua2luZ0FjdGl2ZVZpZXdcIjpcItCj0YHRgtCw0L3QvtCy0LjRgtGMINCw0LrRgtC40LLQvdC+0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0LIg0LrQvtC90YLQtdC60YHRgtC90YPRjiDQs9GA0YPQv9C/0YMge3tuYW1lfX1cIixcImFyaWEuc2V0Q29sb3JMaW5raW5nQWN0aXZlVmlld3NcIjpcItCj0YHRgtCw0L3QvtCy0LjRgtGMINCw0LrRgtC40LLQvdGL0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40Y8g0LIg0LrQvtC90YLQtdC60YHRgtC90YPRjiDQs9GA0YPQv9C/0YMge3tuYW1lfX1cIixcImFyaWEuZXNjYXBlTGF5b3V0RGlhbG9nXCI6XCLQp9GC0L7QsdGLINC30LDQutGA0YvRgtGMINC00LjQsNC70L7QsyDQuNC30LzQtdC90LXQvdC40Y8g0LzQsNC60LXRgtCwLCDQuNGB0L/QvtC70YzQt9GD0LnRgtC1IGVzY2FwZVwiLFwiZ2xvYmFsLnN1cGVydGFiXCI6XCJTdXBlcnRhYiBSVVwiLFwiZ2xvYmFsLnRhYlwiOlwiVGFiIFJVXCIsXCJib29rbWFya3MuZWRpdEJvb2ttYXJrXCI6XCJFZGl0IEJvb2ttYXJrIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtBZGRlZFwiOlwiQm9va21hcmsgYWRkZWQgUlVcIixcImJvb2ttYXJrcy5kb25lXCI6XCJEb25lIFJVXCIsXCJib29rbWFya3MucmVtb3ZlXCI6XCJSZW1vdmUgUlVcIixcImJvb2ttYXJrcy5ib29rbWFya3NQYW5lbFwiOlwiQm9va21hcmtzIFBhbmVsIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtzXCI6XCJCb29rbWFya3MgUlVcIixcImJvb2ttYXJrcy5hbGxCb29rbWFya3NcIjpcIkFsbCBCb29rbWFya3MgUlVcIixcImJvb2ttYXJrcy5mYXZvcml0ZXNcIjpcIkZhdm9yaXRlcyBSVVwiLFwiYm9va21hcmtzLnNlYXJjaEJvb2ttYXJrc1wiOlwiU2VhcmNoIEJvb2ttYXJrcyBSVVwiLFwiYm9va21hcmtzLmNsZWFyU2VhcmNoSW5wdXRcIjpcIkNsZWFyIFNlYXJjaCBJbnB1dCBSVVwiLFwiYm9va21hcmtzLmNyZWF0ZUZvbGRlclwiOlwiQ3JlYXRlIE5ldyBGb2xkZXIgUlVcIixcImJvb2ttYXJrcy5leGl0Rm9sZGVyXCI6XCJFeGl0IEZvbGRlciBSVVwiLFwiYm9va21hcmtzLm5ld0ZvbGRlclwiOlwiTmV3IEZvbGRlciBSVVwiLFwiYm9va21hcmtzLm5hbWVkRm9sZGVyXCI6XCJ7e25hbWV9fSBGb2xkZXIgUlVcIixcImJvb2ttYXJrcy5ib29rbWFya1NldHRpbmdzXCI6XCJ7e25hbWV9fSBCb29rbWFyayBTZXR0aW5ncyBSVVwiLFwiYm9va21hcmtzLmZvbGRlclNldHRpbmdzXCI6XCJ7e25hbWV9fSBGb2xkZXIgU2V0dGluZ3MgUlVcIixcImJvb2ttYXJrcy5ub1Jlc3VsdHNGb3VuZFwiOlwiTm8gcmVzdWx0cyBmb3VuZCBSVVwiLFwiYm9va21hcmtzLm5vUmVzdWx0c0ZvdW5kU3VidGV4dFwiOlwiVGhlcmUgYXJlIG5vIGJvb2ttYXJrcyB0aGF0IG1hdGNoIHlvdXIgc2VhcmNoIFJVXCIsXCJib29rbWFya3Mubm90aGluZ1RvU2hvd1wiOlwiTm90aGluZyB0byBzaG93IHlldCBSVVwiLFwiYm9va21hcmtzLm5vdGhpbmdUb1Nob3dTdWJ0ZXh0XCI6XCJBZGQgYSBib29rbWFyayB0byB0aGlzIGZvbGRlciBSVVwiLFwiYm9va21hcmtzLnJlc3VsdHNGb3VuZEluXCI6XCJSZXN1bHRzIGZvdW5kIGluIHt7bmFtZX19IFJVXCIsXCJib29rbWFya3MucmVzdWx0c0luT3RoZXJGb2xkZXJzXCI6XCJSZXN1bHRzIGZvdW5kIGluIG90aGVyIGZvbGRlcnMgUlVcIixcImJvb2ttYXJrcy5hbGxSZXN1bHRzRm91bmRJblwiOlwiQWxsIHJlc3VsdHMgZm91bmQgaW4gUlVcIixcImJvb2ttYXJrcy5lZGl0TmFtZVwiOlwiRWRpdCBOYW1lIFJVXCIsXCJib29rbWFya3MubW92ZVwiOlwiTW92ZSBSVVwiLFwiYm9va21hcmtzLmJvb2ttYXJrQWRkZWRUaXRsZVwiOlwiQm9va21hcmsgQWRkZWQgUlVcIixcImJvb2ttYXJrcy5ib29rbWFya0FkZGVkVG9Gb2xkZXJcIjpcIllvdXIgYm9va21hcmsgd2FzIGFkZGVkIHRvIFxcXFxcInt7Zm9sZGVyTmFtZX19XFxcXFwiIFJVXCIsXCJib29rbWFya3MuYm9va21hcmtFZGl0ZWRUaXRsZVwiOlwiQm9va21hcmsgRWRpdGVkIFJVXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJTYXZlIFN1cGVydGFiIFJVXCIsXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcIlNhdmUgU3VwZXJ0YWIgQXMuLi4gUlVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5kdXBsaWNhdGVcIjpcIkR1cGxpY2F0ZSBSVVwiLFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LmRlbGV0ZVN1cGVydGFiXCI6XCJEZWxldGUgU3VwZXJ0YWIgUlVcIixcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIjpcIk5ldyBUYWIgUlVcIixcImVudGVycHJpc2VTYXZlTWVudS5zYXZlU3VwZXJ0YWJBc1wiOlwiU2F2ZSBTdXBlcnRhYiBBcyBSVVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbFwiOntcInNhdmVTdXBlcnRhYkNvdW50X29uZVwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWIgYmVmb3JlIGNsb3Npbmc/IFJVXCIsXCJzYXZlU3VwZXJ0YWJDb3VudF9vdGhlclwiOlwiU2F2ZSB7e2NvdW50fX0gU3VwZXJ0YWJzIGJlZm9yZSBjbG9zaW5nPyBSVVwifSxcImVudGVycHJpc2VTYXZlTW9kYWwucmVuYW1lU3VwZXJ0YWJcIjpcIlJlbmFtZSBSVVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC51bnNhdmVkQ2hhbmdlc1wiOlwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIGluIHRoaXMgVGFiLiBSVVwiLFwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiOlwiQ2xvc2UgVGFiIFJVXCIsXCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlU3VwZXJ0YWJcIjpcIkNsb3NlIFN1cGVydGFiIFJVXCIsXCJlbnRlcnByaXNlTW9kYWwuZGlzY2FyZFN1cGVydGFiV2FybmluZ1wiOlwiQW55IHVuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuIFJVXCIsXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJcIjpcIkRlbGV0ZSB0aGUgXFxcXFwie3t0aXRsZX19XFxcXFwiIFN1cGVydGFiPyBSVVwiLFwiZW50ZXJwcmlzZURlbGV0ZU1vZGFsLmRlbGV0ZVN1cGVydGFiV2FybmluZ1wiOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIFN1cGVydGFiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lIGFuZCBpcyBwZXJtYW5lbnQuIFJVXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYlNhdmVkXCI6XCJTdXBlcnRhYiBTYXZlZCBSVVwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJIYXNCZWVuU2F2ZWRcIjpcIlxcXFxcInt7dGl0bGV9fVxcXFxcIiBTdXBlcnRhYiBoYXMgYmVlbiBzYXZlZC5SVVwiLFwiZW50ZXJwcmlzZVN1Y2Nlc3NJbmRpY2F0b3Iuc3VwZXJ0YWJEZWxldGVkXCI6XCJTdXBlcnRhYiBEZWxldGVkIFJVXCIsXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5EZWxldGVkXCI6XCJcXFxcXCJ7e3RpdGxlfX1cXFxcXCIgU3VwZXJ0YWIgaGFzIGJlZW4gZGVsZXRlZC4gUlVcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVRhYlwiOlwiRmFpbGVkIHRvIGR1cGxpY2F0ZSBUYWIgUlVcIixcImVudGVycHJpc2VFcnJvckluZGljYXRvci5mYWlsZWRUb0R1cGxpY2F0ZVN1cGVydGFiXCI6XCJGYWlsZWQgdG8gZHVwbGljYXRlIFN1cGVydGFiIFJVXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci5zd2l0Y2hUb1N1cGVydGFiXCI6XCJTd2l0Y2ggdG8gU3VwZXJ0YWIgUlVcIixcImVudGVycHJpc2VDb21tYW5kQmFyLmdvVG9cIjpcIkdvIHRvIHt7dHlwZX19IFJVXCIsXCJlbnRlcnByaXNlQ29tbWFuZEJhci52aWV3TW9yZVwiOlwiVmlldyBNb3JlIFJVXCIsXCJzaWRlUGFuZWwuYWlDZW50ZXJcIjpcIkFJIENlbnRlciBSVVwiLFwic2lkZVBhbmVsLm5ld0NoYXRcIjpcIk5ldyBDaGF0IFJVXCIsXCJzaWRlUGFuZWwudG9nZ2xlU2lkZVBhbmVsXCI6XCJUb2dnbGUgU2lkZSBQYW5lbCBSVVwiLFwic2lkZVBhbmVsLmNsb3NlU2lkZVBhbmVsXCI6XCJDbG9zZSBTaWRlIFBhbmVsIFJVXCIsXCJzaWRlUGFuZWwub3BlbkFpQ2VudGVyXCI6XCJPcGVuIEFJIENlbnRlciBSVVwiLFwiY29udGV4dE1lbnUucXVpdEVudGVycHJpc2VCcm93c2VyXCI6XCJRdWl0IFJVXCIsXCJkb2NrLnJlbW92ZUZhdm9yaXRlXCI6XCJSZW1vdmUgUlVcIn0nKTtjb25zdCBfbj1UbigpLnQsVW49YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgU2EoZSk7cmV0dXJuIGF3YWl0IHQuZGlzcGF0Y2goQWEuR2V0UGFnZXMpfSxPbj1hc3luYyBlPT4oYXdhaXQgU2EoZS5pZGVudGl0eSkpLmRpc3BhdGNoKEFhLlVwZGF0ZVBhZ2VGb3JXaW5kb3csZSk7bGV0IEduLEhuPSExO2NvbnN0ICRuPSgpPT5IbixLbj0oKT0+R258fHtlbmFibGVkOiExfTthc3luYyBmdW5jdGlvbiB6bihlLHQpe2NvbnN0IGE9ISF0O2xldCBuPW5ldyBTZXQ7aWYoYSl7Y29uc3R7aWRlbnRpdHk6ZSxwYWdlSWQ6YX09dCxvPW1uKCkuQnJvd3Nlci53cmFwU3luYyhlKSxyPWF3YWl0IG8uZ2V0UGFnZShhKTtyPy5wYW5lbHMmJihuPW5ldyBTZXQoci5wYW5lbHMubWFwKCgoe3ZpZXdPcHRpb25zOmV9KT0+ZS5uYW1lKSkpKX1yZXR1cm4gZS5tYXAoKGU9Pntjb25zdCB0PWUudmlld09wdGlvbnMubmFtZSxvPXQ/LnN0YXJ0c1dpdGgoeW4pO28mJighYXx8YSYmIW4uaGFzKHQpKSYmZGVsZXRlIGUudmlld09wdGlvbnMubmFtZTtjb25zdCByPShpPWUudmlld09wdGlvbnMsaS5uYW1lfHw9YCR7eW59JHtuYSgpfWAsaSk7dmFyIGk7cmV0dXJuey4uLmUsdmlld09wdGlvbnM6ey4uLnIsdXVpZDpmZS51dWlkfX19KSl9YXN5bmMgZnVuY3Rpb24gSm4oZSl7Zm9yKGNvbnN0IHQgb2YgZSl0LnBhbmVscyYmYXdhaXQgcW4odC5wYW5lbHMpfWNvbnN0IFpuPWU9Pm51bGwhPT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJtZXNzYWdlXCJpbiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5tZXNzYWdlJiYvRVJSXyhbQS1aXStfKikrLy50ZXN0KGUubWVzc2FnZSk7YXN5bmMgZnVuY3Rpb24gcW4oZSl7Y29uc3QgdD1lLm1hcCgoZT0+ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlVmlldyhlLnZpZXdPcHRpb25zLGZpbi5tZS5pZGVudGl0eSkuY2F0Y2goKGU9PntpZighWm4oZSkpdGhyb3cgZTtjb25zb2xlLmVycm9yKGUpfSkpKSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKHQpfWNvbnN0IGpuPShlLHQpPT4hdC5maW5kKCh0PT50PT09ZSkpLFFuPShlLHQpPT5gJHtlfSAoJHt0fSlgLFluPShlLHQpPT57aWYoam4oZSx0KSlyZXR1cm4gZTtsZXQgYT0xO2NvbnN0IG49ZS5yZXBsYWNlKC8gKlxcKFxcZCtcXCkkLyxcIlwiKTtmb3IoOyFqbihRbihuLGEpLHQpOylhKz0xO3JldHVybiBRbihuLGEpfSxYbj1hc3luYygpPT57Y29uc3QgZT1hd2FpdCBDZSgpO3JldHVybihhd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoYXN5bmMgZT0+e3RyeXtyZXR1cm4gVW4oZS5pZGVudGl0eSl9Y2F0Y2godCl7SlNPTi5zdHJpbmdpZnkoZS5pZGVudGl0eSk7Y29uc3QgYT1hd2FpdCBlLmdldE9wdGlvbnMoKTtyZXR1cm4gYS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXN8fFtdfX0pKSkpLnJlZHVjZSgoKGUsdCk9PmUuY29uY2F0KHQpKSxbXSl9LGVvPWFzeW5jKCk9Pihhd2FpdCBvdChmZSkpLmRpc3BhdGNoKHR0LkdldFNhdmVkUGFnZXMsdm9pZCAwKSx0bz1hc3luYyBlPT4oYXdhaXQgb3QoZmUpKS5kaXNwYXRjaCh0dC5HZXRTYXZlZFBhZ2UsZSksYW89YXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQoYXN5bmMgZT0+KGF3YWl0IFhuKCkpLmZpbmQoKHQ9PnQucGFnZUlkPT09ZSkpKShlKTtyZXR1cm4hYXx8YS50aXRsZT09PXQudGl0bGUmJmU9PT10LnBhZ2VJZHx8YXdhaXQgT24oe2lkZW50aXR5OmEucGFyZW50SWRlbnRpdHkscGFnZUlkOmUscGFnZTp7cGFnZUlkOnQucGFnZUlkLHRpdGxlOnQudGl0bGV9fSksYX0sbm89YXN5bmMoe3BhZ2U6ZX0pPT57YXdhaXQgYW8oZS5wYWdlSWQsZSksYXdhaXQoYXN5bmMgZT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuQ3JlYXRlU2F2ZWRQYWdlLGUpKSh7cGFnZTplfSl9LG9vPWFzeW5jIGU9Pnthd2FpdCB0byhlKSYmYXdhaXQoYXN5bmMgZT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuRGVsZXRlU2F2ZWRQYWdlLGUpKShlKX0scm89YXN5bmMoe3BhZ2VJZDplLHBhZ2U6dH0pPT57YXdhaXQgYW8oZSx0KTtyZXR1cm4gYXdhaXQoYXN5bmMgZT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuVXBkYXRlU2F2ZWRQYWdlLGUpKSh7cGFnZUlkOmUscGFnZTp0fSl9LGlvPWFzeW5jIGU9PmF3YWl0IHRvKGUucGFnZUlkKT9ybyh7cGFnZUlkOmUucGFnZUlkLHBhZ2U6ZX0pOm5vKHtwYWdlOmV9KSxzbz1hc3luYyBlPT57YXdhaXQoYXN5bmMgZT0+KGF3YWl0IFNhKGUuaWRlbnRpdHkpKS5kaXNwYXRjaChBYS5BdHRhY2hQYWdlc1RvV2luZG93LGUpKShlKX0sY289YXN5bmMgZT0+e2NvbnN0IHQ9ey4uLmUucGFnZSxwYW5lbHM6ZS5wYWdlLnBhbmVscyYmYXdhaXQgem4oZS5wYWdlLnBhbmVscyxlKX07dC5wYW5lbHMmJmF3YWl0IHFuKHQucGFuZWxzKSxhd2FpdCBPbih7Li4uZSxwYWdlOnR9KX0sbG89YXN5bmMgZT0+e2F3YWl0KGFzeW5jIGU9Pihhd2FpdCBTYShlLmlkZW50aXR5KSkuZGlzcGF0Y2goQWEuRGV0YWNoUGFnZXNGcm9tV2luZG93LGUpKShlKX0sdW89YXN5bmMgZT0+e2F3YWl0KGFzeW5jIGU9Pihhd2FpdCBTYShlLmlkZW50aXR5KSkuZGlzcGF0Y2goQWEuU2V0QWN0aXZlUGFnZUZvcldpbmRvdyxlKSkoZSl9LHBvPWU9PlVuKGUpLHdvPWFzeW5jKHtpZGVudGl0eTplLHBhZ2VJZDp0fSk9Pihhd2FpdCBwbyhlKSkuZmluZCgoZT0+ZS5wYWdlSWQ9PT10KSksZ289YXN5bmMgZT0+e2F3YWl0KGFzeW5jIGU9Pihhd2FpdCBTYShlLmlkZW50aXR5KSkuZGlzcGF0Y2goQWEuUmVvcmRlclBhZ2VzRm9yV2luZG93LGUpKShlKX0saG89bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5xdWV1ZT1bXSx0aGlzLmxvY2tlZD0hMX1sb2NrKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlPT57dGhpcy5sb2NrZWQ/dGhpcy5xdWV1ZS5wdXNoKGUpOih0aGlzLmxvY2tlZD0hMCxlKCkpfSkpfXVubG9jaygpe2lmKHRoaXMucXVldWUubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5xdWV1ZS5zaGlmdCgpO2UmJmUoKX1lbHNlIHRoaXMubG9ja2VkPSExfX07YXN5bmMgZnVuY3Rpb24gbW8oZSl7YXdhaXQgaG8ubG9jaygpO3RyeXtjb25zdCB0PSRuKCk/X24oXCJlbnRlcnByaXNlRGVmYXVsdFBhZ2VUaXRsZVwiKTpfbihcImRlZmF1bHRQYWdlVGl0bGVcIiksYT1lPz90LFtuLG9dPWF3YWl0IFByb21pc2UuYWxsKFtlbygpLFhuKCldKSxyPVsuLi5uLC4uLm9dLm1hcCgoKHt0aXRsZTplfSk9PmUpKTtyZXR1cm4gWW4oYSxyKX1maW5hbGx5e2hvLnVubG9jaygpfX1hc3luYyBmdW5jdGlvbiBrbyh7cGFnZTplfSl7cmV0dXJue3Nob3VsZFNob3dNb2RhbDohKCFlfHwhZS5oYXNVbnNhdmVkQ2hhbmdlcyl9fWFzeW5jIGZ1bmN0aW9uIGJvKHtwYWdlOmUsaWRlbnRpdHk6dH0pe2NvbnN0IGE9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCk7aWYoKGF3YWl0IGEuZ2V0SW5mbygpKS5pbml0aWFsT3B0aW9ucy5lbmFibGVCZWZvcmVVbmxvYWQpe2NvbnN0IGE9YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0Vmlld3MoKSxuPU1uKGUubGF5b3V0LmNvbnRlbnQpLmZpbHRlcigoZT0+ZS5uYW1lJiZhLnNvbWUoKHQ9PnQuaWRlbnRpdHkubmFtZT09PWUubmFtZSkpKSkubWFwKChlPT5maW4uVmlldy53cmFwU3luYyh7bmFtZTplLm5hbWUsdXVpZDp0LnV1aWR9KSkpLG89YXdhaXQgdGhpcy5jaGVja1ZpZXdzRm9yUHJldmVudFVubG9hZChuKTtpZihvLnZpZXdzUHJldmVudGluZ1VubG9hZC5sZW5ndGg+MCl7aWYoKGF3YWl0IHRoaXMuZ2V0VXNlckRlY2lzaW9uRm9yQmVmb3JlVW5sb2FkKHsuLi5vLHdpbmRvd0lkOnQsd2luZG93U2hvdWxkQ2xvc2U6ITEsY2xvc2VUeXBlOlwicGFnZVwifSkpLnZpZXdzVG9DbG9zZS5sZW5ndGghPT1uLmxlbmd0aClyZXR1cm4gZS5wYWdlSWQse3Nob3VsZFBhZ2VDbG9zZTohMX19fXJldHVybntzaG91bGRQYWdlQ2xvc2U6ITB9fWFzeW5jIGZ1bmN0aW9uIHlvKHtwYWdlczplLGlkZW50aXR5OnR9KXtjb25zdCBhPWF3YWl0IFByb21pc2UuYWxsKGUubWFwKChlPT50aGlzLnNob3VsZFBhZ2VDbG9zZSh7cGFnZTplLGNsb3NlVHlwZTpcIndpbmRvd1wiLGlkZW50aXR5OnR9KSkpKSx7cGFnZXNQcmV2ZW50aW5nQ2xvc2U6bixwYWdlc05vdFByZXZlbnRpbmdDbG9zZTpvfT1lLnJlZHVjZSgoKGUsdCxuKT0+IWFbbl0uc2hvdWxkUGFnZUNsb3NlP3twYWdlc05vdFByZXZlbnRpbmdDbG9zZTplLnBhZ2VzTm90UHJldmVudGluZ0Nsb3NlLHBhZ2VzUHJldmVudGluZ0Nsb3NlOlsuLi5lLnBhZ2VzUHJldmVudGluZ0Nsb3NlLHRdfTp7cGFnZXNQcmV2ZW50aW5nQ2xvc2U6ZS5wYWdlc1ByZXZlbnRpbmdDbG9zZSxwYWdlc05vdFByZXZlbnRpbmdDbG9zZTpbLi4uZS5wYWdlc05vdFByZXZlbnRpbmdDbG9zZSx0XX0pLHtwYWdlc1ByZXZlbnRpbmdDbG9zZTpbXSxwYWdlc05vdFByZXZlbnRpbmdDbG9zZTpbXX0pO3JldHVybiB0aGlzLmhhbmRsZVBhZ2VzQW5kV2luZG93Q2xvc2Uoe3BhZ2VzTm90UHJldmVudGluZ0Nsb3NlOm8scGFnZXNQcmV2ZW50aW5nQ2xvc2U6bixpZGVudGl0eTp0fSl9YXN5bmMgZnVuY3Rpb24gZm8oe3BhZ2VzUHJldmVudGluZ0Nsb3NlOmUscGFnZXNOb3RQcmV2ZW50aW5nQ2xvc2U6dCxpZGVudGl0eTphfSl7cmV0dXJue3Nob3VsZFdpbmRvd0Nsb3NlOjA9PT1lLmxlbmd0aH19YXN5bmMgZnVuY3Rpb24gU28oe3BhZ2U6ZX0pe3JldHVybiB1YShlKX1hc3luYyBmdW5jdGlvbiB2byhlKXtyZXR1cm57aGFzVW5zYXZlZENoYW5nZXM6ITB9fWNvbnN0IFBvPWFzeW5jKCk9Pntjb25zdCBlPW1uKCksdD0oYXdhaXQgQ2UoKSkubWFwKCh0PT5lLkJyb3dzZXIud3JhcFN5bmModC5pZGVudGl0eSkpKTthd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZS5nZXRQYWdlcygpO2F3YWl0IFByb21pc2UuYWxsKHQubWFwKChhc3luYyB0PT57dC50aXRsZSxhd2FpdCBlLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDp0LnBhZ2VJZCxwYWdlOntoYXNVbnNhdmVkQ2hhbmdlczohMX19KSx0LnBhZ2VJZCx0LnRpdGxlLGF3YWl0IGlvKHsuLi50LGhhc1Vuc2F2ZWRDaGFuZ2VzOiExfSl9KSkpfSkpKX0sQ289bmV3IE1hcCxNbz0oKT0+Q28seG89ZT0+Q28uZGVsZXRlKGUpO2xldCBJbz0hMTtjb25zdCBBbz0oKT0+e0lvfHwoSW89ITAsZmluLldpbmRvdy53cmFwU3luYyhTZSkub25jZShcImNsb3NlZFwiLCgoKT0+e0lvPSExLChhc3luYyhlLHQpPT57YXdhaXQgcXQoWnQoZSkse3NvdXJjZTpcIlN0b3JlXCIsLi4udH0pfSkoZmluLm1lLmlkZW50aXR5LHt0eXBlOlwiTmF2aWdhdGlvblwiLGFjdGlvbjpcIkNsb3NlIFN0b3JlXCIsc2tpcFZhbHVlSGFzaGluZzohMH0pfSkpKX07bGV0IFdvLERvLFRvO2NvbnN0IEJvPWFzeW5jKCk9Pih2b2lkIDA9PT1UbyYmKFRvPSEhKGF3YWl0IFkoKSkuZGlzYWJsZU9wZW5GaW5BbmFseXRpY3MpLFRvKTthc3luYyBmdW5jdGlvbiBSbyhlKXtlLmZvckVhY2goKGU9Pnt2YXIgdCxhO1wiUGFnZVwiPT09ZS50eXBlP1wiT3BlbiBQYWdlXCI9PT1lLmFjdGlvbj8odD1lLmRhdGEudXVpZCxhPWUsQ28uc2V0KHQsYSkpOlwiQ2xvc2UgUGFnZVwiPT09ZS5hY3Rpb24mJnhvKGUuZGF0YS51dWlkKTpcIlN0b3JlXCI9PT1lLnNvdXJjZSYmXCJDbG9zZVwiIT09ZS5hY3Rpb24mJkFvKCl9KSksYXdhaXQoYXN5bmMgZT0+e1dvPy5zZW5kVG9PcGVuRmluJiYoYXdhaXQgQm8oKXx8ZS5mb3JFYWNoKChhc3luYyBlPT57Y29uc3QgdD1lYSh7fSxlKTt0LmVudGl0eUlkJiYodC5lbnRpdHlJZC51dWlkPWF3YWl0IFl0KHQuZW50aXR5SWQudXVpZCksdC5lbnRpdHlJZC5uYW1lPWF3YWl0IFl0KHQuZW50aXR5SWQubmFtZSkpLCFlLnNraXBWYWx1ZUhhc2hpbmcmJlwidmFsdWVcImluIHQmJih0LnZhbHVlPWF3YWl0IFl0KHQudmFsdWUpKSxEbyh0KX0pKSl9KShlKTtjb25zdCB0PWUubWFwKCgoe3NraXBWYWx1ZUhhc2hpbmc6ZSwuLi50fSk9PnQpKTt0aGlzLmhhbmRsZUFuYWx5dGljcyh0KX1jb25zdCBFbz1hc3luYyBlPT57V289ZTtXbz8uc2VuZFRvT3BlbkZpbiYmIWF3YWl0IEJvKCkmJigoKT0+e2NvbnN0IGU9TCx0PWUrei5BbmFseXRpY3MsYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSUZSQU1FXCIpO2Euc2V0QXR0cmlidXRlKFwic3JjXCIsdCksYS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDBweCAhaW1wb3J0YW50XCIpLGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImhlaWdodDogMHB4ICFpbXBvcnRhbnRcIiksYS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiZGlzcGxheTogbm9uZSAhaW1wb3J0YW50XCIpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSksRG89YXN5bmMgdD0+e2EuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh0LGUpfX0pKCk7Y29uc3QgdD1maW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKTt0LmFkZExpc3RlbmVyKFwidmlldy1jcmVhdGVkXCIsKGFzeW5jIGU9Pnt2YXIgdDtqdCh7dHlwZTpcIlZpZXdcIixhY3Rpb246XCJPcGVuIFZpZXdcIix2YWx1ZTplLnZpZXdJZGVudGl0eS5uYW1lLGRhdGE6e3V1aWQ6ZS52aWV3SWRlbnRpdHkudXVpZCx1cmw6YXdhaXQodD1lLnZpZXdJZGVudGl0eSxmaW4uVmlldy53cmFwU3luYyh0KS5nZXRJbmZvKCkudGhlbigoZT0+ZS51cmwpKSl9fSl9KSksdC5hZGRMaXN0ZW5lcihcInZpZXctZGVzdHJveWVkXCIsKGFzeW5jIGU9PntqdCh7dHlwZTpcIlZpZXdcIixhY3Rpb246XCJDbG9zZSBWaWV3XCIsdmFsdWU6ZS52aWV3SWRlbnRpdHkubmFtZSxkYXRhOnt1dWlkOmUudmlld0lkZW50aXR5LnV1aWR9fSl9KSksdC5hZGRMaXN0ZW5lcihcIndpbmRvdy1jbG9zZWRcIiwoZT0+e2UubmFtZS5zdGFydHNXaXRoKG1lLkJyb3dzZXJNZW51KXx8KGp0KHt0eXBlOlwiV2luZG93XCIsYWN0aW9uOlwiQ2xvc2UgV2luZG93XCIsdmFsdWU6ZS5uYW1lLGRhdGE6e3V1aWQ6ZS51dWlkfX0pLChhc3luYygpPT57Y29uc3QgZT1NbygpLHQ9YXdhaXQgWG4oKTtpZih0Lmxlbmd0aD09PWUuc2l6ZSlyZXR1cm47Y29uc3QgYT10LnJlZHVjZSgoKGUsdCk9PmUuc2V0KHQucGFnZUlkLDEpKSxuZXcgTWFwKTtmb3IoY29uc3RbdCxuXW9mIGUpYS5oYXModCl8fChuLmFjdGlvbj1cIkNsb3NlIFBhZ2VcIixqdChuKSx4byh0KSl9KSgpKX0pKX0sRm89RGUoe2Fsd2F5c09uVG9wOiEwLGF1dG9TaG93OiExLGZyYW1lOiExLHJlc2l6YWJsZTohMSxzaG93VGFza2Jhckljb246ITF9KTtjb25zdCBWbz1mdW5jdGlvbihlPUZvKXtjb25zdCB0PW5ldyBNYXA7cmV0dXJuIGFzeW5jKGEsbixvLHIsaSk9PntpZih0LmhhcyhhKSl7Y29uc3R7Y3VycmVudFVybDplLGN1cnJlbnROYW1lOm99PXQuZ2V0KGEpO2lmKGU9PT1uKXJldHVybjtjb25zdCByPWZpbi5XaW5kb3cud3JhcFN5bmMoe3V1aWQ6ZmluLm1lLnV1aWQsbmFtZTpvfSk7YXdhaXQgci5jbG9zZSgpfWNvbnN0IHM9YCR7bWUuQnJvd3NlckluZGljYXRvcn0tJHtEYXRlLm5vdygpfSR7TWF0aC5yYW5kb20oKX1gO3Quc2V0KGEse2N1cnJlbnRVcmw6bixjdXJyZW50TmFtZTpzfSk7Y29uc3QgYz1gTmV3ICR7cn0gaW5kaWNhdG9yOiAke299ICR7aX1gLGw9YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlV2luZG93KHsuLi5lLG5hbWU6cyx1cmw6bn0pOygoZSx0KT0+e2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImFsZXJ0XCIpLGEuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsdHx8XCJwb2xpdGVcIiksKGU9PntlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLndpZHRoPVwiMXB4XCIsZS5zdHlsZS5oZWlnaHQ9XCIxcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIwXCIsZS5zdHlsZS5tYXJnaW49XCItMXB4XCIsZS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLGUuc3R5bGUud2hpdGVTcGFjZT1cIm5vd3JhcFwiLGUuc3R5bGUuYm9yZGVyPVwiMFwifSkoYSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSxzZXRUaW1lb3V0KCgoKT0+e2EuaW5uZXJIVE1MPWV9KSwzMDApLHNldFRpbWVvdXQoKCgpPT57ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX0pLDFlMyl9KShjKSxsLm9uY2UoXCJjbG9zZWRcIiwoKCk9Pnt0LmRlbGV0ZShhKX0pKX19KCk7YXN5bmMgZnVuY3Rpb24gTm8oZSl7Y29uc3R7cGFyZW50QnJvd3Nlck5hbWU6dH09ZTtpZih0JiZ0LmluY2x1ZGVzKG1lLkJyb3dzZXJXaW5kb3cpJiZmaW4ubWUubmFtZSE9PXQpe3JldHVybihhd2FpdCBTYSh7dXVpZDpmaW4ubWUudXVpZCxuYW1lOnR9KSkuZGlzcGF0Y2goQWEuU2hvd0Jyb3dzZXJJbmRpY2F0b3IsZSl9cmV0dXJuIGFzeW5jIGZ1bmN0aW9uKGUpe2NvbnN0e3R5cGU6dCxtZXNzYWdlOmEscGFyZW50QnJvd3Nlck5hbWU6bixzZWNvbmRhcnlNZXNzYWdlOm8saWNvbjpyLGlzRW50ZXJwcmlzZTppLHBvc2l0aW9uaW5nOnN9PWUsYz1uZXcgVVJMU2VhcmNoUGFyYW1zO2lmKGMuYXBwZW5kKFwidHlwZVwiLHQpLGMuYXBwZW5kKFwibWVzc2FnZVwiLGEpLGMuYXBwZW5kKFwicGFyZW50TmFtZVwiLG58fFwiXCIpLGMuYXBwZW5kKFwic2Vjb25kYXJ5TWVzc2FnZVwiLG98fFwiXCIpLGMuYXBwZW5kKFwiaWNvblwiLHJ8fFwiXCIpLGMuYXBwZW5kKFwiaXNFbnRlcnByaXNlXCIsYCR7aX1gfHxcIlwiKSxzPT09VGUuUmVsYXRpdmVUb01vbml0b3ImJmMuYXBwZW5kKFwicG9zaXRpb25pbmdcIixUZS5SZWxhdGl2ZVRvTW9uaXRvciksbil7Y29uc3QgZT15ZShuP3t1dWlkOlIsbmFtZTpufTp2b2lkIDApLHQ9YCR7KGw9YXdhaXQgZS5nZXRCb3VuZHMoKSkudG9wfSwke2wubGVmdH0sJHtsLmhlaWdodH0sJHtsLndpZHRofSwke2wuYm90dG9tfSwke2wucmlnaHR9LCR7bC5jb250ZW50LnRvcH0sJHtsLmNvbnRlbnQubGVmdH0sJHtsLmNvbnRlbnQuaGVpZ2h0fSwke2wuY29udGVudC53aWR0aH1gO2MuYXBwZW5kKFwicGFyZW50Qm91bmRzXCIsdCl9dmFyIGw7Y29uc3QgZD1gJHsoaT9hd2FpdCBuZSgpOmF3YWl0IGFlKCkpK3ouQnJvd3NlckluZGljYXRvcn0jJHtjLnRvU3RyaW5nKCl9YDtyZXR1cm4gVm8oXCJicm93c2VyXCIrbixkLGEsdCxvKX0oZSl9YXN5bmMgZnVuY3Rpb24gTG8oZSl7Y29uc3QgdD1lLmlzRW50ZXJwcmlzZT8/YXdhaXQgVXQoZS5wYXJlbnRCcm93c2VyTmFtZT97dXVpZDpSLG5hbWU6ZS5wYXJlbnRCcm93c2VyTmFtZX06dm9pZCAwKTtyZXR1cm4gTm8oe3R5cGU6XCJzdWNjZXNzXCIsbWVzc2FnZTplLm1lc3NhZ2UscGFyZW50QnJvd3Nlck5hbWU6ZS5wYXJlbnRCcm93c2VyTmFtZSxzZWNvbmRhcnlNZXNzYWdlOmUuc2Vjb25kYXJ5TWVzc2FnZSxpY29uOmUuaWNvbixpc0VudGVycHJpc2U6dCxwb3NpdGlvbmluZzplLnBvc2l0aW9uaW5nfSl9Y29uc3QgX289YXN5bmMoZT1mZSk9Pntjb25zdHt3b3Jrc3BhY2VQbGF0Zm9ybTp0fT1hd2FpdCB5ZShlKS5nZXRPcHRpb25zKCksYT10Py5uZXdQYWdlVXJsLG49dD8ubmV3VGFiVXJsO3JldHVybntuZXdQYWdlVXJsOmEsbmV3VGFiVXJsOm59fSxVbz1hc3luYyhlPWZlKT0+e2NvbnN0IHQ9YXdhaXQgVXQoZSl8fCRuKCksYT10P251bGw6YXdhaXQgbW4oKS5Ccm93c2VyLmdldFVuaXF1ZVBhZ2VUaXRsZSgpO2xldCBuO2lmKGUmJmF3YWl0IFBlKGUpKW49YXdhaXQoYXN5bmMoZSx0PWZlKT0+e2NvbnN0e25ld1BhZ2VVcmw6YX09YXdhaXQgX28odCk7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBwYWdlIHdpdGhvdXQgYSBuZXdQYWdlVXJsIHNldFwiKTtyZXR1cm4geG4oZSxhLHQpfSkoYSxlKTtlbHNlIGlmKHQpe2NvbnN0IGU9YXdhaXQgb2UoKTtuPWF3YWl0IHhuKGEsZSl9dCYmKG4uc2V0dGluZ3M9bi5zZXR0aW5ncz8/e30sbi5kaW1lbnNpb25zPW4uZGltZW5zaW9ucz8/e30sbi5zZXR0aW5ncy5oYXNIZWFkZXJzPSExLG4uc2V0dGluZ3MucmVvcmRlckVuYWJsZWQ9ITAsbi5kaW1lbnNpb25zLmhlYWRlckhlaWdodD0wKTtjb25zdCBvPWF3YWl0IGRhKGEsbik7cmV0dXJuIHQmJihvLmhhc1Vuc2F2ZWRDaGFuZ2VzPSExKSxvfSxPbz1hc3luYyhlLHQsYSk9Pntjb25zdHt3aW5kb3dPcHRpb25zOm4sY29udGVudDpvfT1hd2FpdChhc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBVdCh0KTtyZXR1cm57dGl0bGU6XCJTd2l0Y2ggV29ya3NwYWNlXCIsd2luZG93T3B0aW9uczp7dXJsOmF3YWl0IHJlKGEsITEpK3ouUmVzcG9uc2VNb2RhbCxuYW1lOm1lLkJyb3dzZXJNZW51LGRlZmF1bHRIZWlnaHQ6MTM0LGRlZmF1bHRXaWR0aDo0MTAsbW9kYWxQYXJlbnRJZGVudGl0eTp0fSxjb250ZW50Ont0aXRsZTpfbihcInN3aXRjaFdvcmtzcGFjZU1vZGFsXCIse3dvcmtzcGFjZTplfSksYm9keTpfbihcInN3aXRjaFdvcmtzcGFjZU1vZGFsLndhcm5pbmdcIiksYnV0dG9uczp7cmlnaHQ6W3tsYWJlbDpfbihcImdsb2JhbC5jYW5jZWxcIiksdHlwZTpcInNlY29uZGFyeVwiLGlkOlwiQ2FuY2VsXCJ9LHtsYWJlbDpfbihcImdsb2JhbC5jb25maXJtXCIpLHR5cGU6XCJwcmltYXJ5XCIsaWQ6XCJDb25maXJtXCJ9XX19fX0pKHQsYT92b2lkIDA6ZSkscj1hd2FpdCBGZShuLGUsYSksaT17Li4ubix0b3A6ci50b3AsbGVmdDpyLmxlZnR9O3JldHVyblwiQ29uZmlybVwiPT09KGF3YWl0IFphKHtvcHRpb25zOmksY29udGVudDpvfSkpLmRhdGEuYWN0aW9uTmFtZX0sR289YXN5bmMoe3dvcmtzcGFjZVRpdGxlOmUsd2luZG93SWRlbnRpdHk6dH0pPT57Y29uc3R7d2luZG93T3B0aW9uczphLGNvbnRlbnQ6bn09YXdhaXQoYXN5bmMoe3dvcmtzcGFjZVRpdGxlOmUsd2luZG93SWRlbnRpdHk6dH0pPT57Y29uc3QgYT1hd2FpdCBVdCh0KTtyZXR1cm57dGl0bGU6XCJEZWxldGUgV29ya3NwYWNlXCIsd2luZG93T3B0aW9uczp7dXJsOmF3YWl0IHJlKGEsITEpK3ouUmVzcG9uc2VNb2RhbCxuYW1lOm1lLkJyb3dzZXJNZW51LGRlZmF1bHRIZWlnaHQ6MTQ0LGRlZmF1bHRXaWR0aDo0MTAsbW9kYWxQYXJlbnRJZGVudGl0eTp0fSxjb250ZW50Ont0aXRsZTpfbihcImRlbGV0ZVdvcmtzcGFjZU1vZGFsXCIpLGJvZHk6YCR7ZX1gLGJ1dHRvbnM6e3JpZ2h0Olt7bGFiZWw6X24oXCJnbG9iYWwuY2FuY2VsXCIpLHR5cGU6XCJzZWNvbmRhcnlcIixpZDpcIkNhbmNlbFwifSx7bGFiZWw6X24oXCJnbG9iYWwuY29uZmlybVwiKSx0eXBlOlwicHJpbWFyeVwiLGlkOlwiQ29uZmlybVwifV19fX19KSh7d29ya3NwYWNlVGl0bGU6ZSx3aW5kb3dJZGVudGl0eTp0fSksbz1hd2FpdCBGZShhLGEubW9kYWxQYXJlbnRJZGVudGl0eSkscj17Li4uYSx0b3A6by50b3AsbGVmdDpvLmxlZnR9O3JldHVyblwiQ29uZmlybVwiPT09KGF3YWl0IFphKHtvcHRpb25zOnIsY29udGVudDpufSkpLmRhdGEuYWN0aW9uTmFtZX0sSG89YXN5bmMoZSx0LGEpPT57Y29uc3R7d2luZG93T3B0aW9uczpuLGNvbnRlbnQ6b309YXdhaXQoYXN5bmMoZSx0LGEpPT57Y29uc3Qgbj1hd2FpdCBVdChlKTtyZXR1cm57dGl0bGU6XCJQbGF0Zm9ybSBRdWl0XCIsd2luZG93T3B0aW9uczp7dXJsOmF3YWl0IHJlKG4sITEpK3ouUmVzcG9uc2VNb2RhbCxuYW1lOm1lLkJyb3dzZXJNZW51LGRlZmF1bHRIZWlnaHQ6MTM0LGRlZmF1bHRXaWR0aDo0MTAsbW9kYWxQYXJlbnRJZGVudGl0eTphP3ZvaWQgMDplfSxjb250ZW50Ont0aXRsZTpfbihcIlBsYXRmb3JtXCI9PT10P1wiY2xvc2VQbGF0Zm9ybVwiOlwiY2xvc2VQbGF0Zm9ybS53b3Jrc3BhY2VcIix7d29ya3NwYWNlOnR9KSxib2R5Ol9uKFwiY2xvc2VQbGF0Zm9ybS53YXJuaW5nXCIpLGJ1dHRvbnM6e3JpZ2h0Olt7bGFiZWw6X24oXCJnbG9iYWwuY2FuY2VsXCIpLHR5cGU6XCJzZWNvbmRhcnlcIixpZDpcIkNhbmNlbFwifSx7bGFiZWw6X24oXCJnbG9iYWwuY29uZmlybVwiKSx0eXBlOlwicHJpbWFyeVwiLGlkOlwiQ29uZmlybVwifV19fX19KShlLHQsYSkscj1hd2FpdCBGZShuLGUsYSksaT17Li4ubix0b3A6ci50b3AsbGVmdDpyLmxlZnR9O3JldHVyblwiQ29uZmlybVwiPT09KGF3YWl0IFphKHtvcHRpb25zOmksY29udGVudDpvfSkpLmRhdGEuYWN0aW9uTmFtZX0sJG89YXN5bmMgZT0+e2NvbnN0e3dpbmRvd09wdGlvbnM6dCxjb250ZW50OmF9PWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IFV0KGUpO3JldHVybnt0aXRsZTpcIlJlc3RvcmUgQ2hhbmdlc1wiLHdpbmRvd09wdGlvbnM6e3VybDphd2FpdCByZSh0LCExKSt6LlJlc3BvbnNlTW9kYWwsbmFtZTptZS5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjEzNCxkZWZhdWx0V2lkdGg6NDEwLG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6X24oXCJyZXN0b3JlTW9kYWxcIiksYm9keTpfbihcIm1vZGFsLmRpc2NhcmRXYXJuaW5nXCIpLGJ1dHRvbnM6e3JpZ2h0Olt7bGFiZWw6X24oXCJnbG9iYWwuY2FuY2VsXCIpLHR5cGU6XCJzZWNvbmRhcnlcIixpZDpcIkNhbmNlbFwifSx7bGFiZWw6X24oXCJnbG9iYWwuY29uZmlybVwiKSx0eXBlOlwicHJpbWFyeVwiLGlkOlwiQ29uZmlybVwifV19fX19KShlKSxuPWF3YWl0IEZlKHQsdC5tb2RhbFBhcmVudElkZW50aXR5KSxvPXsuLi50LHRvcDpuLnRvcCxsZWZ0Om4ubGVmdH07cmV0dXJuXCJDb25maXJtXCI9PT0oYXdhaXQgWmEoe29wdGlvbnM6byxjb250ZW50OmF9KSkuZGF0YS5hY3Rpb25OYW1lfSxLbz1hc3luYyhlLHQpPT57Y29uc3R7d2luZG93T3B0aW9uczphLGNvbnRlbnQ6bn09YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQgVXQoZSk7cmV0dXJue3RpdGxlOlwiRGVsZXRlIFBhZ2VcIix3aW5kb3dPcHRpb25zOnt1cmw6bmV3IFVSTChhd2FpdCByZShhLCExKSt6LlJlc3BvbnNlTW9kYWwpLnRvU3RyaW5nKCksbmFtZTptZS5Ccm93c2VyTWVudSxkZWZhdWx0SGVpZ2h0OjE3MixkZWZhdWx0V2lkdGg6NDY0LG1vZGFsUGFyZW50SWRlbnRpdHk6ZX0sY29udGVudDp7dGl0bGU6X24oXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJcIix7dGl0bGU6dH0pLGJvZHk6X24oXCJlbnRlcnByaXNlRGVsZXRlTW9kYWwuZGVsZXRlU3VwZXJ0YWJXYXJuaW5nXCIpLGJ1dHRvbnM6e3JpZ2h0Olt7bGFiZWw6X24oXCJnbG9iYWwuY2FuY2VsXCIpLHR5cGU6XCJzZWNvbmRhcnlcIixpZDpcIkNhbmNlbFwiLHZhcmlhbnQ6YT9cIm91dGxpbmVcIjp2b2lkIDB9LHtsYWJlbDpfbihcImdsb2JhbC5kZWxldGVcIiksdHlwZTpcInByaW1hcnlcIixpZDpcIkRlbGV0ZVwiLHZhcmlhbnQ6YT9cInN1Ym1pdFwiOnZvaWQgMH1dfX19fSkoZSx0KSxvPWF3YWl0IEZlKGEsYS5tb2RhbFBhcmVudElkZW50aXR5KSxyPXsuLi5hLHRvcDpvLnRvcCxsZWZ0Om8ubGVmdH07cmV0dXJuXCJEZWxldGVcIj09PShhd2FpdCBaYSh7b3B0aW9uczpyLGNvbnRlbnQ6bn0pKS5kYXRhLmFjdGlvbk5hbWV9LHpvPWFzeW5jKHtpZGVudGl0eTplLHRpdGxlOnQsZGVzY3JpcHRpb246YX0pPT57Y29uc3R7d2luZG93T3B0aW9uczpuLGNvbnRlbnQ6b309YXdhaXQoYXN5bmMoZSx0LGEpPT4oe3RpdGxlOlwiVXBkYXRlIFZlcnNpb25cIix3aW5kb3dPcHRpb25zOnt1cmw6YXdhaXQgbmUoKSt6LlJlc3BvbnNlTW9kYWwsbmFtZTptZS5VcGRhdGVWZXJzaW9uTW9kYWwsZGVmYXVsdEhlaWdodDoxNzIsZGVmYXVsdFdpZHRoOjQ2NCxtb2RhbFBhcmVudElkZW50aXR5OmUscHJldmVudEJsdXI6ITAsY2xvc2VPblJlc3BvbnNlOiEwLGluY2x1ZGVJblNuYXBzaG90czohMX0sY29udGVudDp7dGl0bGU6dCxib2R5OmEsYnV0dG9uczp7cmlnaHQ6W3tsYWJlbDpcIlNub296ZVwiLHR5cGU6XCJzZWNvbmRhcnlcIixpZDpcInNub296ZVwifSx7bGFiZWw6XCJSZXN0YXJ0XCIsdHlwZTpcInByaW1hcnlcIixpZDpcInJlc3RhcnRcIn1dfX19KSkoZSx0LGEpLHI9ZmluLldpbmRvdy53cmFwU3luYyh7dXVpZDplLnV1aWQsbmFtZTpgJHtuLm5hbWV9LS0ke24ubW9kYWxQYXJlbnRJZGVudGl0eT8ubmFtZX1gfSk7dHJ5e2lmKGF3YWl0KHI/LmlzU2hvd2luZygpKSlyZXR1cm59Y2F0Y2goZSl7fWNvbnN0IGk9YXdhaXQgRmUobixuLm1vZGFsUGFyZW50SWRlbnRpdHkpLHM9ey4uLm4sdG9wOmkudG9wLGxlZnQ6aS5sZWZ0fTtyZXR1cm4oYXdhaXQgWmEoe29wdGlvbnM6cyxjb250ZW50Om99KSkuZGF0YX07YXN5bmMgZnVuY3Rpb24gSm8oe29wdGlvbnM6ZSwuLi50fSl7aWYoISghIWU/LnNraXBQcm9tcHR8fGF3YWl0IE9vKGU/LnByb21wdENvbnRhaW5lcldpbmRvd0lkZW50aXR5LHQudGl0bGUsZT8uc2hvdWxkQ2VudGVyTW9kYWxPbk1vbml0b3IpKSlyZXR1cm4hMTtjb25zdCBhPSEhKGF3YWl0IGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldENoaWxkV2luZG93cygpKS5maW5kKCgoe2lkZW50aXR5OmV9KT0+ZS5uYW1lPT09bWUuRG9ja0NvbXBhbmlvbnx8ZS5uYW1lPT09bGUpKTskbigpO2NvbnN0IG49YXx8JG4oKT97Y2xvc2VFeGlzdGluZ1dpbmRvd3M6ITEsY2xvc2VTbmFwc2hvdFdpbmRvd3M6ITB9OntjbG9zZUV4aXN0aW5nV2luZG93czplPy5hcHBseVNuYXBzaG90T3B0aW9ucz8uY2xvc2VFeGlzdGluZ1dpbmRvd3M/PyEwfSxvPW1uKCk7cmV0dXJuIGF3YWl0IG8uYXBwbHlTbmFwc2hvdCh0LnNuYXBzaG90LHsuLi5lPy5hcHBseVNuYXBzaG90T3B0aW9ucz8/e30sLi4ubn0pLGpvKHQpLE5vKHt0eXBlOlwic3VjY2Vzc1wiLG1lc3NhZ2U6X24oXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZVN3aXRjaGVkXCIpLHBvc2l0aW9uaW5nOlRlLlJlbGF0aXZlVG9Nb25pdG9yfSkuY2F0Y2goY29uc29sZS53YXJuKSwhMH1hc3luYyBmdW5jdGlvbiBabyhlKXt0cnl7cmV0dXJuIGF3YWl0IEpvKGUpfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIGFwcGx5IHRoZSBjdXJyZW50IHdvcmtzcGFjZTogXCIsZSksITF9fWFzeW5jIGZ1bmN0aW9uIHFvKGUpe3RyeXtjb25zdCB0PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1tbigpLHQ9YXdhaXQgZS5nZXRDdXJyZW50V29ya3NwYWNlKHtza2lwU25hcHNob3RVcGRhdGU6ITB9KTtyZXR1cm4oYXdhaXQgZS5TdG9yYWdlLmdldFdvcmtzcGFjZXMoKSkuZmluZCgoZT0+ZS53b3Jrc3BhY2VJZD09PXQud29ya3NwYWNlSWQpKX0oKTtpZighdClyZXR1cm5cIm5vdC1zYXZlZC13b3Jrc3BhY2VcIjtyZXR1cm4hIWU/LnNraXBQcm9tcHR8fGF3YWl0ICRvKGU/LnByb21wdENvbnRhaW5lcldpbmRvd0lkZW50aXR5KT8oYXdhaXQgSm8oe29wdGlvbnM6e3NraXBQcm9tcHQ6ITAsYXBwbHlTbmFwc2hvdE9wdGlvbnM6ZT8uYXBwbHlTbmFwc2hvdE9wdGlvbnN9LC4uLnR9KSxcInN1Y2Nlc3NcIik6XCJ1c2VyLWRlY2xpbmVkXCJ9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihcImZhaWxlZCB0byByZXN0b3JlIGxhc3Qgc2F2ZWQgd29ya3NwYWNlOiBcIixlKSxlfX1mdW5jdGlvbiBqbyhlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYWxTdG9yYWdlKXRyeXtjb25zdCB0PUpTT04uc3RyaW5naWZ5KGUpO3Z0KHh0LkN1cnJlbnRXb3Jrc3BhY2VJZCx0KX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIHNldCB0aGUgYWN0aXZlIHdvcmtzcGFjZTogXCIsZSl9fWFzeW5jIGZ1bmN0aW9uIFFvKCl7Y29uc3QgZT1tbigpLHQ9YXdhaXQgZS5nZXRTbmFwc2hvdCgpO3JldHVybnt3b3Jrc3BhY2VJZDpuYSgpLHRpdGxlOmF3YWl0IHRyKCksbWV0YWRhdGE6e0FQSVZlcnNpb246T30sc25hcHNob3Q6dH19YXN5bmMgZnVuY3Rpb24gWW8oZSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGxvY2FsU3RvcmFnZSlyZXR1cm4gUW8oKTtjb25zdCB0PVB0KHh0LkN1cnJlbnRXb3Jrc3BhY2VJZCk7aWYoIXQpcmV0dXJuIFFvKCk7Y29uc3QgYT1KU09OLnBhcnNlKHQpO2lmKGU/LnNraXBTbmFwc2hvdFVwZGF0ZSlyZXR1cm4gYTtjb25zdCBuPW1uKCksbz1hd2FpdCBuLmdldFNuYXBzaG90KCk7cmV0dXJuey4uLmEsbWV0YWRhdGE6e0FQSVZlcnNpb246T30sc25hcHNob3Q6b319Y29uc3QgWG89YXN5bmMoKT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuR2V0U2F2ZWRXb3Jrc3BhY2VzLHZvaWQgMCksZXI9YXN5bmMgZT0+YXdhaXQoYXN5bmMgZT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuR2V0U2F2ZWRXb3Jrc3BhY2UsZSkpKGUud29ya3NwYWNlSWQpPyhhc3luYyBlPT4oYXdhaXQgb3QoZmUpKS5kaXNwYXRjaCh0dC5VcGRhdGVTYXZlZFdvcmtzcGFjZSxlKSkoe3dvcmtzcGFjZUlkOmUud29ya3NwYWNlSWQsd29ya3NwYWNlOmV9KTooYXN5bmMgZT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuQ3JlYXRlU2F2ZWRXb3Jrc3BhY2UsZSkpKHt3b3Jrc3BhY2U6ZX0pO2FzeW5jIGZ1bmN0aW9uIHRyKGU9XCJVbnRpdGxlZCBXb3Jrc3BhY2VcIil7Y29uc3QgdD0oYXdhaXQgWG8oKSkubWFwKCgoe3RpdGxlOmV9KT0+ZSkpO3JldHVybiBZbihlLHQpfWNvbnN0IGFyPWU9Pih7Li4uZSxzbmFwc2hvdDp7Li4uZS5zbmFwc2hvdCx3aW5kb3dzOmUuc25hcHNob3Qud2luZG93cy5tYXAoKGU9Pih7Li4uZSx3b3Jrc3BhY2VQbGF0Zm9ybTp7Li4uZS53b3Jrc3BhY2VQbGF0Zm9ybSxwYWdlczplLndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubWFwKChlPT4oey4uLmUsaGFzVW5zYXZlZENoYW5nZXM6ITF9KSkpfX0pKSl9fSksbnI9YXN5bmMoZSx0KT0+e2NvbnN0IGE9dD8/bW4oKTthd2FpdCBhLlN0b3JhZ2Uuc2F2ZVdvcmtzcGFjZShhcihlKSksYXdhaXQoYXN5bmMoKT0+KGF3YWl0IG90KGZlKSkuZGlzcGF0Y2godHQuTWFya1Vuc2F2ZWRQYWdlc0FzU2F2ZWRJbnRlcm5hbCx2b2lkIDApKSgpfSxvcj1hc3luYyBlPT57Y29uc3QgdD1tbigpO2F3YWl0KGFzeW5jKHtzaG93TW9kYWw6ZSxhZnRlclN1Y2Nlc3NTYXZlOnR9KT0+e2NvbnN0IGE9bW4oKSxuPWF3YWl0IGEuZ2V0Q3VycmVudFdvcmtzcGFjZSgpLG89YXdhaXQgYS5TdG9yYWdlLmdldFdvcmtzcGFjZXNNZXRhZGF0YSgpLHI9bi53b3Jrc3BhY2VJZDtvLnNvbWUoKGU9PmUud29ya3NwYWNlSWQ9PT1yKSk/KGF3YWl0IG5yKG4sYSksYXdhaXQgYS5zZXRBY3RpdmVXb3Jrc3BhY2UobiksYXdhaXQgdCgpKTphd2FpdCBlKCl9KSh7c2hvd01vZGFsOmFzeW5jKCk9Pntjb25zdCBhPXQuQnJvd3Nlci53cmFwU3luYyhlKTthd2FpdCBhLl9vcGVuU2F2ZU1vZGFsKHttZW51VHlwZTpJLlNBVkVfV09SS1NQQUNFX0FTfSl9LGFmdGVyU3VjY2Vzc1NhdmU6YXN5bmMoKT0+e2F3YWl0IExvKHttZXNzYWdlOl9uKFwic3VjY2Vzc0luZGljYXRvci53b3Jrc3BhY2VTYXZlZFwiKSxwYXJlbnRCcm93c2VyTmFtZTplLm5hbWV9KX19KX0scnI9ZT0+e21uKCkuQnJvd3Nlci53cmFwU3luYyhlKS5fb3BlblNhdmVNb2RhbCh7bWVudVR5cGU6SS5TQVZFX1dPUktTUEFDRV9BU30pfSxpcj1hc3luYyBlPT57Y29uc3QgdD1tbigpLkJyb3dzZXIud3JhcFN5bmMoZSkse25ld1BhZ2VVcmw6YX09YXdhaXQgX28oKSxuPWF3YWl0IFVvKGUpLG89YXx8dm9pZCAwO2F3YWl0IHQuX2FkZERlZmF1bHRQYWdlKHtpZGVudGl0eTplLHBhZ2U6bixuZXdQYWdlVXJsOm99KX0sc3I9YXN5bmMoZSx0KT0+e2NvbnN0IGE9bW4oKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49YXdhaXQgbW4oKS5TdG9yYWdlLmdldFBhZ2VzKCksbz0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT50P2UucGFnZUlkPT09dDplLmlzQWN0aXZlKSkscj1uLnNvbWUoKGU9Pm8ucGFnZUlkPT09ZS5wYWdlSWQpKSxpPWF3YWl0IFV0KGUpO2lmKHIpdHJ5e2F3YWl0IG1uKCkuU3RvcmFnZS5zYXZlUGFnZSgoYz1vLHsuLi5jLGhhc1Vuc2F2ZWRDaGFuZ2VzOnZvaWQgMCxwYXJlbnRJZGVudGl0eTp2b2lkIDAsaXNBY3RpdmU6dm9pZCAwLGxheW91dDpDbihjLmxheW91dCl9KSksYXdhaXQgYS51cGRhdGVQYWdlKHtwYWdlSWQ6by5wYWdlSWQscGFnZTp7aGFzVW5zYXZlZENoYW5nZXM6ITF9fSksTG8oe21lc3NhZ2U6X24oaT9cImVudGVycHJpc2VTdWNjZXNzSW5kaWNhdG9yLnN1cGVydGFiU2F2ZWRcIjpcInN1Y2Nlc3NJbmRpY2F0b3IucGFnZVNhdmVkXCIpLHBhcmVudEJyb3dzZXJOYW1lOmUubmFtZSxzZWNvbmRhcnlNZXNzYWdlOl9uKGk/XCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5TYXZlZFwiOlwic3VjY2Vzc0luZGljYXRvci5wYWdlSGFzQmVlblNhdmVkXCIse3RpdGxlOm8udGl0bGV9KSxpc0VudGVycHJpc2U6aX0pfWNhdGNoe05vKHt0eXBlOlwiZXJyb3JcIixtZXNzYWdlOihzPXttZXNzYWdlOl9uKFwiZXJyb3JJbmRpY2F0b3IucGFnZVNhdmVGYWlsZWRcIikscGFyZW50QnJvd3Nlck5hbWU6by5wYXJlbnRJZGVudGl0eS5uYW1lfSkubWVzc2FnZSxwYXJlbnRCcm93c2VyTmFtZTpzLnBhcmVudEJyb3dzZXJOYW1lLGljb246cy5pY29uLGlzRW50ZXJwcmlzZTpzLmlzRW50ZXJwcmlzZXx8ITEscG9zaXRpb25pbmc6cy5wb3NpdGlvbmluZ30pfWVsc2UgYS5fb3BlblNhdmVNb2RhbCh7aWQ6by5wYWdlSWQsbWVudVR5cGU6SS5TQVZFX1BBR0V9KTt2YXIgcyxjfSxjcj1hc3luYyhlLHQpPT57Y29uc3QgYT1tbigpLkJyb3dzZXIud3JhcFN5bmMoZSksbj0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT50P2UucGFnZUlkPT09dDplLmlzQWN0aXZlKSk7YS5fb3BlblNhdmVNb2RhbCh7aWQ6bi5wYWdlSWQsbWVudVR5cGU6SS5TQVZFX1BBR0VfQVN9KSxqdCh7dHlwZTpcIlBhZ2UgTW9kYWxcIixhY3Rpb246XCJTZWxlY3QgU2F2ZSBBc1wiLHZhbHVlOm4udGl0bGUsc2tpcFZhbHVlSGFzaGluZzohMH0pfSxscj1hc3luYyhlLHQpPT57YXdhaXQoYXN5bmMoe3dvcmtzcGFjZUl0ZW1EYXRhOmUsd2luSWRlbnRpdHk6dCxwb3NpdGlvbmluZzphfSk9Pntjb25zdCBuPW1uKCksbz0oYXdhaXQgbi5TdG9yYWdlLmdldFdvcmtzcGFjZXNNZXRhZGF0YSgpKS5maW5kKCh0PT50LndvcmtzcGFjZUlkPT09ZS53b3Jrc3BhY2VJZCkpO28mJmF3YWl0IEdvKHt3b3Jrc3BhY2VUaXRsZTpvLnRpdGxlLHdpbmRvd0lkZW50aXR5OnR9KSYmKGF3YWl0IG4uU3RvcmFnZS5kZWxldGVXb3Jrc3BhY2UoZS53b3Jrc3BhY2VJZCksYXdhaXQgTG8oe21lc3NhZ2U6X24oXCJzdWNjZXNzSW5kaWNhdG9yLndvcmtzcGFjZURlbGV0ZWRcIikscGFyZW50QnJvd3Nlck5hbWU6dD8ubmFtZSxwb3NpdGlvbmluZzphfSkpfSkoe3dvcmtzcGFjZUl0ZW1EYXRhOnQsd2luSWRlbnRpdHk6ZX0pfSxkcj17dGl0bGU6XCJEb3dubG9hZHNcIixwYWdlSWQ6XCJkb3dubG9hZHMtcGFnZS1pZFwiLGxheW91dDp7Y29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7bmFtZTpcInNob3ctZG93bmxvYWQtdmlld1wiLHVybDpcImNocm9tZTovL2Rvd25sb2Fkcy9cIn19XX1dfX0sdXI9YXN5bmMgZT0+e2NvbnN0IHQ9eWUoZSksYT1hd2FpdCB0LmdldEN1cnJlbnRWaWV3cygpLG49KGF3YWl0IG1uKCkuQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KS5nZXRQYWdlcygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSk7dHJ5e2NvbnN0IHQ9KGF3YWl0IFByb21pc2UuYWxsKGEubWFwKChhc3luYyBlPT4oe2lkZW50aXR5OmUuaWRlbnRpdHksaW5mbzphd2FpdCBmaW4uVmlldy53cmFwU3luYyhlLmlkZW50aXR5KS5nZXRJbmZvKCl9KSkpKSkuZmluZCgoZT0+XCJjaHJvbWU6Ly9kb3dubG9hZHMvXCI9PT1lLmluZm8udXJsKSk7aWYodClhd2FpdCBmaW4uVmlldy53cmFwU3luYyh0LmlkZW50aXR5KS5mb2N1cygpO2Vsc2V7Y29uc3QgdD1tbigpO2lmKG4/LmlzTG9ja2VkKXtjb25zdCBlPShhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSkuZmluZCgoZT0+XCJzaG93LWRvd25sb2FkLXdpbmRvd1wiPT09ZS5pZGVudGl0eS5uYW1lKSk7cmV0dXJuIHZvaWQoZT9hd2FpdCBlLmZvY3VzKCk6dC5Ccm93c2VyLmNyZWF0ZVdpbmRvdyh7bmFtZTpcInNob3ctZG93bmxvYWQtd2luZG93XCIsd29ya3NwYWNlUGxhdGZvcm06e3BhZ2VzOltkcl19fSkpfShhd2FpdCBtbigpLmNyZWF0ZVZpZXcoe25hbWU6XCJzaG93LWRvd25sb2FkLXZpZXdcIix1cmw6XCJjaHJvbWU6Ly9kb3dubG9hZHMvXCIsdGFyZ2V0OmV9LGUpKS5mb2N1cygpfX1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiQ291bGRuJ3Qgb3BlbiBkb3dubG9hZHMgdmlld1wiLGUpfX0scHI9YXN5bmMgZT0+e2NvbnN0IHQ9ZS5tYXAoKGU9PmZpbi5WaWV3LndyYXBTeW5jKGUpLnByaW50KCkpKTthd2FpdCBQcm9taXNlLmFsbCh0KX0sd3I9ZT0+e2NvbnN0W3QsYSxuXT1lLnNwbGl0KFwiLlwiKS5tYXAoKGU9PlwieFwiPT09ZT8wOjEpKTtyZXR1cm4gMTAwKnQrMTAqYSsxKm59O2NsYXNzIGdyIGV4dGVuZHMgRXJyb3J7fWNvbnN0IGhyPWFzeW5jIGU9Pnt0cnl7Y29uc3QgYT1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9YXdhaXQgWSgpLHQ9ZT8udHJhbnNsYXRpb25PdmVycmlkZXNVcmw/P1wiaHR0cHM6Ly93b3Jrc3BhY2Uub3BlbmZpbi5jby93b3Jrc3BhY2UvYXNzZXRzL3RyYW5zbGF0aW9uLW92ZXJyaWRlLmpzb25cIjtpZihcIlwiPT09dCl0aHJvdyBuZXcgZ3IoXCJFbXB0eSBzdHJpbmcgcHJvdmlkZWQgYXMgdXJsIHRvIHRyYW5zbGF0aW9uT3ZlcnJpZGVzVXJsLCBvdmVycmlkZXMgd2lsbCBub3QgYmUgZmV0Y2hlZC5cIik7cmV0dXJuIGF3YWl0IGZldGNoKHQpLnRoZW4oKGU9PmUuanNvbigpKSl9KCk7KHQ9KGU9Pntjb25zdCB0PU8uc3BsaXQoXCIuXCIpO3JldHVybiBPYmplY3Qua2V5cyhlKS5maWx0ZXIoKGU9Pntjb25zdCBhPWUuc3BsaXQoXCIuXCIpO2lmKDMhPT1hLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKGBFbmNvdW50ZXJlZCBhIHRyYW5zbGF0aW9uIG92ZXJyaWRlIHZlcnNpb24gc3RyaW5nIGluIGFuIHVuc3VwcG9ydGVkIGZvcm1hdDogJHtlfS4gVmVyc2lvbnMgbXVzdCBiZSBpbiBBLkIuQyBmb3JtYXQgd2hlcmUgQSwgQiwgQyBhcmUgZWl0aGVyIGludGVnZXJzIG9yIHRoZSB3aWxkY2FyZCBzeW1ib2wgJ3gnLmApLCExO2NvbnN0W24sbyxyXT1hO3JldHVybiEobiE9PXRbMF0mJlwieFwiIT09bnx8byE9PXRbMV0mJlwieFwiIT09b3x8ciE9PXRbMl0mJlwieFwiIT09cil9KSl9KShhKSxbLi4udF0uc29ydCgoKGUsdCk9PndyKGUpLXdyKHQpKSkpLmZvckVhY2goKHQ9Pntjb25zdCBuPWFbdF07T2JqZWN0LmtleXMobikuZm9yRWFjaCgodD0+e2UuYWRkUmVzb3VyY2VCdW5kbGUodCxcInRyYW5zbGF0aW9uXCIsblt0XSwhMCwhMCl9KSl9KSl9Y2F0Y2goZSl7ZSBpbnN0YW5jZW9mIGdyP2NvbnNvbGUud2FybihlLm1lc3NhZ2UpOmNvbnNvbGUuZXJyb3IoXCJFcnJvciBhcHBseWluZyBhIHRyYW5zbGF0aW9uIG92ZXJyaWRlOiBcIixlKX12YXIgdH07ZnVuY3Rpb24gbXIoKXtyZXR1cm4gVG4oKS5sYW5ndWFnZX1jb25zdCBrcj1hc3luYyBlPT57ZnIoZSksKGU9PntUbigpLmNoYW5nZUxhbmd1YWdlKGUpfSkoZSksYXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgQ2UoKTtyZXR1cm4gUHJvbWlzZS5hbGwodC5tYXAoKGFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IFNhKHQuaWRlbnRpdHkpO2F3YWl0IGEuZGlzcGF0Y2goQWEuU2V0U2VsZWN0ZWRMYW5ndWFnZSxlKX0pKSl9KShlKX07ZnVuY3Rpb24gYnIoKXtpZighVG4oKS5vcHRpb25zLnJlc291cmNlcyl0aHJvdyBuZXcgRXJyb3IoXCJObyBsYW5ndWFnZSByZXNvdXJjZXMgZm91bmRcIik7cmV0dXJue2N1cnJlbnRMYW5ndWFnZTptcigpLHJlc291cmNlczpUbigpLm9wdGlvbnMucmVzb3VyY2VzfX1hc3luYyBmdW5jdGlvbiB5cihlPVwiZW4tVVNcIil7ZnIoZSksZnVuY3Rpb24oZT1cImVuLVVTXCIpe1RuKCkudXNlKFduLmluaXRSZWFjdEkxOG5leHQpLmluaXQoe2xuZzplLGZhbGxiYWNrTG5nOlwiZW4tVVNcIixyZXNvdXJjZXM6e1wiZW4tVVNcIjp7dHJhbnNsYXRpb246RW59LFwiamEtSlBcIjp7dHJhbnNsYXRpb246Vm59LFwiemgtQ05cIjp7dHJhbnNsYXRpb246Qm59LFwia28tS1JcIjp7dHJhbnNsYXRpb246Tm59LFwicnUtUlVcIjp7dHJhbnNsYXRpb246TG59LFwiZGUtREVcIjp7dHJhbnNsYXRpb246Rm59LFwiemgtSGFudFwiOnt0cmFuc2xhdGlvbjpSbn19LGludGVycG9sYXRpb246e2VzY2FwZVZhbHVlOiExfX0pfShlKSxhd2FpdCBocihUbigpKX1mdW5jdGlvbiBmcihlKXtpZigheC5pbmNsdWRlcyhlKSl0aHJvdyBuZXcgRXJyb3IoYFRoZSBJU08gbGFuZ3VhZ2UgcHJvdmlkZWQgJHtlfSBpcyBub3Qgc3VwcG9ydGVkYCl9Y29uc3QgU3I9bmV3IE1hcDtsZXQgdnI9RGF0ZS5ub3coKTtmdW5jdGlvbiBQcigpe2NvbnN0IGU9RGF0ZS5ub3coKTtyZXR1cm4gdnI9TWF0aC5tYXgoZSx2cisxKSx2cn1hc3luYyBmdW5jdGlvbiBDcigpe2NvbnN0IGU9QXJyYXkuZnJvbShTci52YWx1ZXMoKSkuc29ydCgoKGUsdCk9PnQubGFzdEZvY3VzZWRUaW1lLWUubGFzdEZvY3VzZWRUaW1lKSk7aWYoZS5sZW5ndGg+MClyZXR1cm4gZVswXS5pZGVudGl0eTt0cnl7Y29uc3QgZT1QdCh4dC5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3cpO2lmKCFlKXJldHVybjtjb25zdCB0PUpTT04ucGFyc2UoZSk7aWYoYXdhaXQgeGUodCkpcmV0dXJuIGF3YWl0IElyKHQpLHR9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byBnZXQgbGFzdCBmb2N1c2VkIGJyb3dzZXIgd2luZG93IGZyb20gbG9jYWxTdG9yYWdlOlwiLGUpfX1hc3luYyBmdW5jdGlvbiBNcigpe2NvbnN0IGU9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCk7cmV0dXJuKGF3YWl0IGUuZ2V0Q2hpbGRXaW5kb3dzKCkpLmZpbHRlcigoZT0+ZS5pZGVudGl0eS5uYW1lLnN0YXJ0c1dpdGgobWUuQnJvd3NlcldpbmRvdykpKX1hc3luYyBmdW5jdGlvbiB4cigpe2NvbnN0IGU9bW4oKSx0PWZpbi5XaW5kb3cud3JhcFN5bmMoe3V1aWQ6ZmluLm1lLnV1aWQsbmFtZTptZS5Eb2NrQ29tcGFuaW9ufSksYT1hd2FpdCBXZShhd2FpdCB0LmdldEJvdW5kcygpKSxuPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCxhKXtjb25zdCBuPWF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSxvPWE/LmF2YWlsYWJsZVJlY3Q/P24ucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdCxyPXt3aWR0aDpvLnJpZ2h0LW8ubGVmdCxoZWlnaHQ6by5ib3R0b20tby50b3B9LGk9TWF0aC5taW4oZSxyLmhlaWdodCkscz1NYXRoLm1pbih0LHIud2lkdGgpLGM9by50b3ArTWF0aC5mbG9vcigoci5oZWlnaHQtaSkvMik7cmV0dXJue2hlaWdodDppLHdpZHRoOnMsbGVmdDpvLmxlZnQrTWF0aC5mbG9vcigoci53aWR0aC1zKS8yKSx0b3A6Y319KDYwMCw5MDAsYSksbz1hd2FpdCBVbygpO3JldHVybihhd2FpdCBlLkJyb3dzZXIuY3JlYXRlV2luZG93KHtkZWZhdWx0SGVpZ2h0OjYwMCxkZWZhdWx0V2lkdGg6OTAwLGRlZmF1bHRMZWZ0Om4ubGVmdCxkZWZhdWx0VG9wOm4udG9wLHdvcmtzcGFjZVBsYXRmb3JtOntwYWdlczpbb119fSkpLmlkZW50aXR5fWFzeW5jIGZ1bmN0aW9uIElyKGUsdCxhPSExKXtpZighYXdhaXQgUGUoZSkpcmV0dXJuO2NvbnN0IG49ZmluLldpbmRvdy53cmFwU3luYyhlKSxvPXQ/P2F3YWl0IG4uaXNTaG93aW5nKCkscj1Tci5nZXQoZS5uYW1lKSxpPXtpZGVudGl0eTplLGxhc3RGb2N1c2VkVGltZTphP1ByKCk6cj8ubGFzdEZvY3VzZWRUaW1lPz9QcigpLGlzVmlzaWJsZTpvfTtTci5zZXQoZS5uYW1lLGkpLGEmJmZ1bmN0aW9uKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IHQ9SlNPTi5zdHJpbmdpZnkoZSk7dnQoeHQuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93LHQpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gc2F2ZSBsYXN0IGZvY3VzZWQgYnJvd3NlciB3aW5kb3c6IFwiLGUpfX0oZSl9YXN5bmMgZnVuY3Rpb24gQXIoZT1maW4ubWUuaWRlbnRpdHkpe1NyLmRlbGV0ZShlLm5hbWUpfWNvbnN0IFdyPWFhKCkoKGFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLkFwcGxpY2F0aW9uLmdldENoaWxkV2luZG93cygpO2xldCB0LGE9ITE7Zm9yKGNvbnN0IG4gb2YgZSlpZihuLmlkZW50aXR5Lm5hbWU9PT1tZS5Ccm93c2VyTWVudXx8bi5pZGVudGl0eS5uYW1lPT09bWUuQnJvd3NlclNhdmVNZW51P3Q9bjphd2FpdCBQZShuLmlkZW50aXR5KSYmKGE9ITApLGEpYnJlYWs7IWEmJnQmJnQuY2xvc2UoKX0pLDEwMCx7bGVhZGluZzohMSx0cmFpbGluZzohMH0pO2xldCBEcj17fTtjb25zdCBUcj1hc3luYyh7YWN0aW9uSWQ6ZSxwYXlsb2FkOnR9KT0+e2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIERyW2VdKXRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgYSBjb25maWd1cmVkIGZ1bmN0aW9uIGZvciB0aGUgYWN0aW9uICcke2V9J2ApO3JldHVybiBEcltlXSh0KX07bGV0IEJyO2NvbnN0IFJyPSgpPT5gY3VzdG9tLWNvbnRleHQtbWVudS0ke21uKCkuaWRlbnRpdHkudXVpZH0tJHtPfWAsRXI9KCk9PmBjdXN0b20tYm9va21hcmstY29udGV4dC1tZW51LSR7bW4oKS5pZGVudGl0eS51dWlkfS0ke099YCxGcj1hc3luYygpPT4oQnJ8fChCcj1hd2FpdCBmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNvbm5lY3QoUnIoKSkpLEJyKTt2YXIgVnIsTnI7IWZ1bmN0aW9uKGUpe2UuU2F2ZT1cIlNhdmVcIixlLlNhdmVBcz1cIlNhdmVBc1wifShWcnx8KFZyPXt9KSksZnVuY3Rpb24oZSl7ZS5HbG9iYWxNZW51PVwiZ2xvYmFsLW1lbnVcIixlLkNvbnRleHRNZW51PVwiY29udGV4dC1tZW51XCIsZS5SZW5hbWVTdXBlcnRhYj1cInJlbmFtZS1zdXBlcnRhYlwiLGUuQWRkRWRpdEJvb2ttYXJrPVwiYWRkLWVkaXQtYm9va21hcmtcIixlLkRyb3Bkb3duTWVudT1cImRyb3Bkb3duLW1lbnVcIixlLlpvb21Db250cm9scz1cInpvb20tY29udHJvbHNcIn0oTnJ8fChOcj17fSkpO2NvbnN0IExyPShlLHQ9XCJcIik9PmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpLF9yPVwidmlzaXRlZC1zaXRlc1wiLFVyPVwicmVtb3ZlZC10YWItc3RhY2tcIixPcj1UJiZXJiZXdChcIm9wZW5maW4taG9tZS1wYWdlc1wiLFwicGFnZXNcIiksR3I9VCYmVyYmbmV3IHl0LkRleGllKEl0KFwib3BlbmZpbi1lbnRlcnByaXNlLXNpdGUtaGlzdG9yeVwiKSk7R3ImJkdyLnZlcnNpb24oLjEpLnN0b3Jlcyh7W19yXTpcImlkLCB1cmxcIn0pO2NvbnN0IEhyPVQmJlcmJm5ldyB5dC5EZXhpZShJdChcIm9wZW5maW4tZW50ZXJwcmlzZS10YWItaGlzdG9yeVwiKSk7YXN5bmMgZnVuY3Rpb24gJHIoZSl7aWYoIU9yKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgcGFnZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IE9yLnBhZ2VzLmdldChlKTtpZih0KXJldHVybiB0LnBhZ2VJZD1lLnRvU3RyaW5nKCksdC50aXRsZT10LnRpdGxlfHx0LnBhZ2VJZCx0fWFzeW5jIGZ1bmN0aW9uIEtyKGUpe2lmKCFPcil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IHBhZ2UgbGlzdCAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IE9yLnBhZ2VzLnRvQ29sbGVjdGlvbigpLmtleXMoKSxhPShhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoZT0+JHIoZS50b1N0cmluZygpKSkpKSkuZmlsdGVyKChlPT4hIWUpKTtyZXR1cm4gZT9hLmZpbHRlcigodD0+THIodC50aXRsZSxlKSkpOmF9YXN5bmMgZnVuY3Rpb24genIoe3BhZ2U6ZX0pe2lmKCFPcil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHBhZ2UgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7YXdhaXQgT3IucGFnZXMucHV0KGUsZS5wYWdlSWQpfWFzeW5jIGZ1bmN0aW9uIEpyKGUpe2lmKCFPcil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZGVsZXRlIHBhZ2UgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7YXdhaXQgT3IucGFnZXMuZGVsZXRlKGUpfWFzeW5jIGZ1bmN0aW9uIFpyKHtwYWdlSWQ6ZSxwYWdlOnR9KXtpZighT3IpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHVwZGF0ZSBwYWdlIC0gSW5kZXhEQiBub3Qgc3VwcG9ydGVkXCIpO2lmKHZvaWQgMD09PWF3YWl0ICRyKGUpKXRocm93IG5ldyBFcnJvcihcInBhZ2Ugbm90IGZvdW5kXCIpO2F3YWl0IHpyKHtwYWdlOnR9KSxlIT09dC5wYWdlSWQmJmF3YWl0IEpyKGUpfUhyJiZIci52ZXJzaW9uKC4xKS5zdG9yZXMoe1tVcl06XCJcIn0pO2NvbnN0IHFyPWFzeW5jIGU9PntpZighSHIpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGFkZCByZW1vdmVkIHRhYiAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PURhdGUubm93KCkudG9TdHJpbmcoKSxhPXsuLi5lLGlkOnR9O2F3YWl0IEhyW1VyXS5wdXQoYSx0KX07ZnVuY3Rpb24ganIoZSl7cmV0dXJuXCJhcHBcIj09PWUudHlwZXx8XCJ3ZWJzaXRlXCI9PT1lLnR5cGV9Y29uc3QgUXI9YXN5bmMgZT0+e2lmKFwid2Vic2l0ZVwiPT09ZS50eXBlKXtjb25zdCB0PWUsYT10LnVybHx8XCJcIjtsZXQgbj1hd2FpdCBHcltfcl0uZ2V0KGEpO24mJmpyKG4pPyhuLmljb249dC5pY29uLG4udGl0bGU9dC50aXRsZSxuLnR5cGU9dC50eXBlLG4udmlzaXRDb3VudD0obi52aXNpdENvdW50fHwwKSsxLG4udXJsPXQudXJsKTpuPXsuLi50LGlkOmEsdmlzaXRDb3VudDoxLGFjY2Vzc1RpbWU6dm9pZCAwfSxuLmFjY2Vzc1RpbWU9RGF0ZS5ub3coKSxhd2FpdCBHcltfcl0ucHV0KG4sYSl9fSxZcj1hc3luYygpPT57aWYoIUdyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgZnJlcXVlbnRseSB2aXNpdGVkIHNpdGVzIC0gSW5kZXhEQiBub3Qgc3VwcG9ydGVkXCIpO2NvbnN0IGU9R3JbX3JdLHQ9YXdhaXQgZS50b0NvbGxlY3Rpb24oKS50b0FycmF5KCk7dC5zb3J0KCgoZSx0KT0+KHQudmlzaXRDb3VudHx8MCktKGUudmlzaXRDb3VudHx8MCkpKTtyZXR1cm4odC5sZW5ndGg+NT90LnNsaWNlKDAsNSk6dCkubWFwKCgoe2lkOmUsLi4udH0pPT50KSl9O2NvbnN0IFhyPWFzeW5jKCk9Pihhd2FpdCBmaW4uU3lzdGVtLmdldEhvc3RTcGVjcygpKS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ3aW5kb3dzXCIpLGVpPWFzeW5jKHticm93c2VySWRlbnRpdHk6ZSx1cmw6dCxzaGlmdEtleTphLGFjdGl2ZVBhZ2U6bixwYWdlczpvfSk9Pntjb25zdCByPW1uKCkuQnJvd3Nlci53cmFwU3luYyhlKSxpPWF3YWl0IHhuKHQsdCxlKSxzPXsuLi5hd2FpdCBkYSh0LGkpLGF0dGFjaGVkUGFnZVR5cGU6XCJzaW5nbGVWaWV3XCIsc2luZ2xlVmlld05hbWU6dH0sYz1vLmZpbmRJbmRleCgoZT0+ZS5wYWdlSWQ9PT1uLnBhZ2VJZCkpO2F3YWl0IHIuX2FkZFBhZ2Uocyx7aW5kZXg6YysxfSksYSYmYXdhaXQgci5zZXRBY3RpdmVQYWdlKHMucGFnZUlkKX0sdGk9YXN5bmMgZT0+e2NvbnN0e3VybDp0fT1lLmJvb2ttYXJrLHtzb3VyY2VJZGVudGl0eTphLHNvdXJjZUV2ZW50Om59PWUsbz1hd2FpdCBYcigpLHI9bW4oKTtsZXQgaT0hMSxzPWE7aWYoIWF3YWl0IFBlKGEpKXtjb25zdCB0PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1BcnJheS5mcm9tKFNyLnZhbHVlcygpKTtmb3IobGV0IHQ9ZS5sZW5ndGgtMTt0Pj0wO3QtLSlpZihlW3RdLmlzVmlzaWJsZSlyZXR1cm4gZVt0XS5pZGVudGl0eX0oKTtpZighdClyZXR1cm4gYXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9bW4oKSxhPWF3YWl0IHhuKGUudXJsLGUudXJsKSxuPWF3YWl0IGRhKGUudXJsLGEpO3ZlKChhd2FpdCB0LkJyb3dzZXIuY3JlYXRlV2luZG93KHt3b3Jrc3BhY2VQbGF0Zm9ybTp7cGFnZXM6W25dfX0pKS5pZGVudGl0eSl9KShlLmJvb2ttYXJrKTtpPSEwLHM9dH1jb25zdCBjPXIuQnJvd3Nlci53cmFwU3luYyhzKSxsPWF3YWl0IGMuZ2V0UGFnZXMoKSxkPShhd2FpdCBjLl9nZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3MoKSkuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO2lmKCFkKXRocm93IEVycm9yKGBCcm93c2VyICR7c30gZG9lcyBub3QgaGF2ZSBhbnkgYWN0aXZlIGxheW91dHNgKTtjb25zdCB1PWwuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpLHA9MT09PUFuKHUubGF5b3V0LmNvbnRlbnQpLHc9ZC5zZWxlY3RlZFZpZXdzWzBdO2k/YXdhaXQgZWkoe2Jyb3dzZXJJZGVudGl0eTpzLHVybDp0LHNoaWZ0S2V5OiEwLGFjdGl2ZVBhZ2U6dSxwYWdlczpsfSk6cD9hd2FpdChhc3luYyh7aXNXaW5kb3dzOmUsY3VycmVudFZpZXdJZDp0LGJyb3dzZXJJZGVudGl0eTphLHVybDpuLGFjdGl2ZVBhZ2U6byxwYWdlczpyLHNvdXJjZUV2ZW50Oml9KT0+e2NvbnN0e2N0cmxLZXk6cyxtZXRhS2V5OmMsc2hpZnRLZXk6bH09aTsoZT9zOmMpP2F3YWl0IGVpKHticm93c2VySWRlbnRpdHk6YSx1cmw6bixzaGlmdEtleTpsLGFjdGl2ZVBhZ2U6byxwYWdlczpyfSk6YXdhaXQgZmluLlZpZXcud3JhcFN5bmModCkubmF2aWdhdGUobil9KSh7aXNXaW5kb3dzOm8sY3VycmVudFZpZXdJZDp3LGJyb3dzZXJJZGVudGl0eTpzLHVybDp0LGFjdGl2ZVBhZ2U6dSxwYWdlczpsLHNvdXJjZUV2ZW50Om59KTphd2FpdChhc3luYyh7aXNXaW5kb3dzOmUsY3VycmVudFZpZXdJZDp0LGJyb3dzZXJJZGVudGl0eTphLHVybDpuLGFjdGl2ZUxheW91dDpvLHNvdXJjZUV2ZW50OnJ9KT0+e2NvbnN0e2N0cmxLZXk6aSxtZXRhS2V5OnMsc2hpZnRLZXk6Y309cjtpZihlP2k6cyl7Y29uc3QgZT1maW4uVmlldy53cmFwU3luYyh0KSxvPWF3YWl0IGUuZ2V0Q3VycmVudFN0YWNrKCkscj0oYXdhaXQgby5nZXRWaWV3cygpKS5maW5kSW5kZXgoKGU9PmUubmFtZT09PXQubmFtZSkpLGk9e3VybDpuLGJyb3dzZXJJZGVudGl0eTphLHRpdGxlOm59O2F3YWl0IG8uYWRkVmlldyhpLHtpbmRleDpyKzF9KX1lbHNlIGF3YWl0IGZpbi5WaWV3LndyYXBTeW5jKG8uc2VsZWN0ZWRWaWV3c1swXSkubmF2aWdhdGUobil9KSh7aXNXaW5kb3dzOm8sY3VycmVudFZpZXdJZDp3LGJyb3dzZXJJZGVudGl0eTpzLHVybDp0LGFjdGl2ZUxheW91dDpkLHNvdXJjZUV2ZW50Om59KX07dmFyIGFpOyFmdW5jdGlvbihlKXtlLkxhYmVsPVwibm9ybWFsXCIsZS5TZXBhcmF0b3I9XCJzZXBhcmF0b3JcIixlLlN1Ym1lbnU9XCJzdWJtZW51XCIsZS5DaGVja2JveD1cImNoZWNrYm94XCJ9KGFpfHwoYWk9e30pKTtsZXQgbmk9e2xvY2tlZDohMSx4Oi0xLHk6LTF9O2NvbnN0IG9pPWFzeW5jKGUsdCxhLG4pPT57aWYoIVcpdGhyb3cgbmV3IEVycm9yKFwic2hvd0VudGVycHJpc2VDb250ZXh0TWVudSBjYW4gb25seSBiZSB1c2VkIGluIGEgSGVyZSBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO2lmKCFuJiYhZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcInNob3dFbnRlcnByaXNlQ29udGV4dE1lbnUgY2FuIG9ubHkgYmUgdXNlZCBpbiBhIEhlcmUgd2luZG93LlwiKTtjb25zdHt4Om8seTpyLHRlbXBsYXRlOml9PWU7aWYoKChlLHQpPT57Y29uc3R7eDphLHk6bixsb2NrZWQ6b309bmk7cmV0dXJuIG8mJmU9PT1hJiZ0PT09bn0pKG8scikpcmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+ZSh7ZGF0YTp2b2lkIDB9KSkpO25pPXtsb2NrZWQ6ITAseDpvLHk6cn07Y29uc3Qgcz1hd2FpdCBGcigpLGM9bmEoKSxsPW5ldyBQcm9taXNlKCgoZSx0KT0+e3MucmVnaXN0ZXIoYHJlc3BvbnNlLSR7Y31gLCh0PT57bmkubG9ja2VkPSExLHMucmVtb3ZlKGByZXNwb25zZS0ke2N9YCksZSh0KX0pKX0pKTtyZXR1cm4gYXdhaXQgcy5kaXNwYXRjaChcIm9wZW5cIix7cGFyZW50SWRlbnRpdHk6bi5pZGVudGl0eSxyZXNwb25zZUlkZW50aXR5OmZlLHJlcXVlc3RJZDpjLHR5cGU6dCxhbmNob3JCZWhhdmlvcjphLHg6byx5OnIscGF5bG9hZDp7dGVtcGxhdGU6aX19KSxsfSxyaT17dHlwZTphaS5TZXBhcmF0b3IsZGF0YTp2b2lkIDB9LGlpPWFzeW5jKCk9Pih7dHlwZTphaS5TdWJtZW51LGxhYmVsOl9uKFwiY29udGV4dE1lbnUucHJpbnRcIiksc3VibWVudTpbe3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCIpLGRhdGE6e3R5cGU6Uy5QcmludH19LHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiY29udGV4dE1lbnUuc3VibWVudS5wcmludEFsbFwiKSxkYXRhOnt0eXBlOlMuUHJpbnRBbGx9fSxyaSx7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51LnByaW50U2NyZWVuXCIpLGRhdGE6e3R5cGU6Uy5QcmludFNjcmVlbn19XX0pLHNpPSgpPT4oe3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5jbG9zZVdpbmRvd1wiKSxkYXRhOnt0eXBlOm0uQ2xvc2VXaW5kb3d9fSksY2k9ZT0+KHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKGU/XCJjb250ZXh0TWVudS5xdWl0RW50ZXJwcmlzZUJyb3dzZXJcIjpcImNvbnRleHRNZW51LnF1aXRQbGF0Zm9ybVwiKSxkYXRhOnt0eXBlOm0uUXVpdH19KSxsaT0oKT0+KHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiY29udGV4dE1lbnUubmV3V2luZG93XCIpLGRhdGE6e3R5cGU6bS5OZXdXaW5kb3d9fSksZGk9ZT0+KHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKGU/XCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiXCI6XCJjb250ZXh0TWVudS5zYXZlUGFnZVwiKSxkYXRhOnt0eXBlOm0uU2F2ZVBhZ2V9fSksdWk9ZT0+KHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKGU/XCJlbnRlcnByaXNlQ29udGV4dE1lbnUuc2F2ZVN1cGVydGFiQXNcIjpcImNvbnRleHRNZW51LnNhdmVQYWdlQXNcIiksZGF0YTp7dHlwZTptLlNhdmVQYWdlQXN9fSkscGk9KGUsdCk9Pih7dHlwZTphaS5MYWJlbCxsYWJlbDpfbih0P1wiZW50ZXJwcmlzZUNvbnRleHRNZW51Lm5ld1RhYlwiOlwiY29udGV4dE1lbnUubmV3UGFnZVwiKSxkYXRhOnt0eXBlOm0uTmV3UGFnZX0sZW5hYmxlZDplfSksd2k9KCk9Pih7bGFiZWw6X24oXCJjb250ZXh0TWVudS5zd2l0Y2hXb3Jrc3BhY2VcIil9KSxnaT0oKT0+KHtsYWJlbDpfbihcImNvbnRleHRNZW51LmRlbGV0ZVdvcmtzcGFjZVwiKX0pLGhpPSgpPT4oe2xhYmVsOl9uKFwiY29udGV4dE1lbnUuYXBwZWFyYW5jZVwiKX0pLG1pPShlLHQsYSk9PnQubWFwKCh0PT57Y29uc3Qgbj10LndvcmtzcGFjZUlkPT09ZS53b3Jrc3BhY2VJZDtyZXR1cm57bGFiZWw6dC50aXRsZSx0eXBlOmFpLkNoZWNrYm94LGVuYWJsZWQ6IW4sY2hlY2tlZDpuLGRhdGE6e3R5cGU6YSx3b3Jrc3BhY2VJZDp0LndvcmtzcGFjZUlkfX19KSksa2k9YXN5bmMoKT0+e2NvbnN0IGU9YXdhaXQgbW4oKS5UaGVtZS5nZXRTZWxlY3RlZFNjaGVtZSgpO3JldHVyblt7bGFiZWw6X24oXCJ0aGVtZS5saWdodFwiKSx0eXBlOmFpLkNoZWNrYm94LGNoZWNrZWQ6ZT09PWsuTGlnaHQsZGF0YTp7dHlwZTptLkFwcGVhcmFuY2Usc2NoZW1lOmsuTGlnaHR9fSx7bGFiZWw6X24oXCJ0aGVtZS5kYXJrXCIpLHR5cGU6YWkuQ2hlY2tib3gsY2hlY2tlZDplPT09ay5EYXJrLGRhdGE6e3R5cGU6bS5BcHBlYXJhbmNlLHNjaGVtZTprLkRhcmt9fSx7bGFiZWw6X24oXCJ0aGVtZS5zeXN0ZW1cIiksdHlwZTphaS5DaGVja2JveCxjaGVja2VkOmU9PT1rLlN5c3RlbSxkYXRhOnt0eXBlOm0uQXBwZWFyYW5jZSxzY2hlbWU6ay5TeXN0ZW19fV19LGJpPWFzeW5jKGUsdD1bXSk9Pntjb25zdCBhPWF3YWl0IEllKCkse25ld1BhZ2VVcmw6bn09YXdhaXQgX28oZSksbz1hd2FpdChhc3luYyBlPT57Y29uc3QgdD15ZShlKSx7d29ya3NwYWNlUGxhdGZvcm06YX09YXdhaXQgdC5nZXRPcHRpb25zKCk7cmV0dXJuIGE/LmRpc2FibGVNdWx0aXBsZVBhZ2VzfSkoZSkscj1hd2FpdChhc3luYyBlPT57Y29uc3QgdD15ZShlKSx7d29ya3NwYWNlUGxhdGZvcm06YX09YXdhaXQgdC5nZXRPcHRpb25zKCk7cmV0dXJuIGE/LmlzTG9ja2VkfSkoZSksaT1hd2FpdCBVdChlKSxzPVtdLGM9dC5sZW5ndGg+MDtuJiYocy5wdXNoKGxpKCkpLG98fHMucHVzaChwaSghcixpKSkpLHMucHVzaChyaSk7Y29uc3QgbD1tbigpLGQ9YXdhaXQgbC5nZXRDdXJyZW50V29ya3NwYWNlKHtza2lwU25hcHNob3RVcGRhdGU6ITB9KSx1PWF3YWl0IGwuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzTWV0YWRhdGEoKSxwPXUuZmluZCgoZT0+ZS53b3Jrc3BhY2VJZD09PWQud29ya3NwYWNlSWQpKSx3PWwuQnJvd3Nlci53cmFwU3luYyhlKSxnPShhd2FpdCB3LmdldFBhZ2VzKCkpLmZpbmQoKGU9PmUuaXNBY3RpdmUpKSxoPSEhZyYmYXdhaXQgbC5TdG9yYWdlLmdldFBhZ2UoZy5wYWdlSWQpO3MucHVzaCh7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51LnJlc3RvcmVcIiksZGF0YTp7dHlwZTptLlJlc3RvcmVDaGFuZ2VzfSxlbmFibGVkOiEhcH0pLHMucHVzaCh7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIiksZGF0YTp7dHlwZTptLlNhdmVXb3Jrc3BhY2V9LGVuYWJsZWQ6ISFwfSkscy5wdXNoKHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiY29udGV4dE1lbnUuc2F2ZVdvcmtzcGFjZUFzXCIpLGRhdGE6e3R5cGU6bS5TYXZlV29ya3NwYWNlQXN9fSkscy5wdXNoKHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiY29udGV4dE1lbnUucmVuYW1lV29ya3NwYWNlXCIpLGRhdGE6e3R5cGU6bS5SZW5hbWVXb3Jrc3BhY2V9LGVuYWJsZWQ6ISFwfSksdS5zb21lKChlPT5lLndvcmtzcGFjZUlkIT09ZC53b3Jrc3BhY2VJZCkpP3MucHVzaCh7bGFiZWw6d2koKS5sYWJlbCxzdWJtZW51Om1pKGQsdSxtLlN3aXRjaFdvcmtzcGFjZSksZGF0YTp2b2lkIDB9LHtsYWJlbDpnaSgpLmxhYmVsLHN1Ym1lbnU6bWkoZCx1LG0uRGVsZXRlV29ya3NwYWNlKSxkYXRhOnZvaWQgMH0pOnMucHVzaCh7bGFiZWw6d2koKS5sYWJlbCxlbmFibGVkOiExLGRhdGE6dm9pZCAwfSx7bGFiZWw6Z2koKS5sYWJlbCxlbmFibGVkOiExLGRhdGE6dm9pZCAwfSkscy5wdXNoKHtsYWJlbDpfbihcImNvbnRleHRNZW51LmRvd25sb2Fkc1wiKSxkYXRhOnt0eXBlOm0uRG93bmxvYWRzfX0pLHMucHVzaCh7bGFiZWw6aGkoKS5sYWJlbCxzdWJtZW51OmF3YWl0IGtpKCksZGF0YTp2b2lkIDB9KTtjb25zdCBrPXsuLi5kaShpKSxlbmFibGVkOiEhaH07cmV0dXJuIHMucHVzaChyaSxrLHVpKGkpLGF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IFhyKCk7cmV0dXJue2xhYmVsOl9uKFwiY29udGV4dE1lbnUucHJpbnRcIiksc3VibWVudTpbe3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5zdWJtZW51LnByaW50XCIpLGRhdGE6e3R5cGU6bS5QcmludH0sZW5hYmxlZDplfSx7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51LnN1Ym1lbnUucHJpbnRBbGxcIiksZGF0YTp7dHlwZTptLlByaW50QWxsfX0sLi4udD9bcmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5wcmludFNjcmVlblwiKSxkYXRhOnt0eXBlOm0uUHJpbnRTY3JlZW59fV06W11dLGRhdGE6dm9pZCAwfX0pKGMpKSxhP1suLi5zLHNpKCkscmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5vcGVuU3RvcmVmcm9udFwiKSxkYXRhOnt0eXBlOm0uT3BlblN0b3JlZnJvbnR9fSxyaSxjaSgpXTpbLi4ucyxyaSxzaSgpLHJpLGNpKCldfSx5aT1hc3luYyhlLHQpPT57Y29uc3QgYT10LnNlbGVjdGVkVmlld3NbMF0sbj1maW4uVmlldy53cmFwU3luYyhhKSxvPWF3YWl0KGFzeW5jIGU9Pntjb25zdHtuZXdUYWJVcmw6dH09YXdhaXQgX28oZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBwYWdlIHdpdGhvdXQgYSBuZXdUYWJVcmwgc2V0XCIpO3JldHVybnt1cmw6dCx0YXJnZXQ6ZSx0aXRsZTpcIk5ldyBUYWJcIn19KShlKTthd2FpdCBtbigpLmNyZWF0ZVZpZXcobyxlLG4uaWRlbnRpdHkpfSxmaT1hc3luYyhlLHQpPT57Y29uc3QgYT1tbigpLkJyb3dzZXIud3JhcFN5bmMoZSksbj0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSksbz1hd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKGUpLmdldEN1cnJlbnRWaWV3cygpO2lmKHQubGVuZ3RoPT09by5sZW5ndGgtKG4ucGFuZWxzPz9bXSkubGVuZ3RoKXtyZXR1cm4gdm9pZChhd2FpdCBTYShlKSkuZGlzcGF0Y2goQWEuQ2xvc2VQYWdlLHtwYWdlSWQ6bj8ucGFnZUlkfSl9Y29uc3Qgcj1maW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKTt0LmZvckVhY2goKGFzeW5jIHQ9Pntjb25zdCBvPWF3YWl0IGZpbi5WaWV3LndyYXBTeW5jKHQpLmdldFBhcmVudExheW91dCgpO2F3YWl0IHIuY2xvc2VWaWV3KHQpO2NvbnN0e2hhc1Vuc2F2ZWRDaGFuZ2VzOml9PWF3YWl0KGFzeW5jIGU9Pihhd2FpdCBydChmZSkpLmRpc3BhdGNoKHR0LkhhbmRsZVBhZ2VDaGFuZ2VzLGUpKSh7cGFnZTp7Li4ubixsYXlvdXQ6YXdhaXQgby5nZXRDb25maWcoKX0saWRlbnRpdHk6ZSxldmVudERldGFpbHM6e3R5cGU6aC5WaWV3UmVtb3ZlZCx2aWV3SWRlbnRpdHk6dH19KTtpJiZhd2FpdCBhLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDpuLnBhZ2VJZCxwYWdlOntoYXNVbnNhdmVkQ2hhbmdlczohMH19KX0pKX0sU2k9YXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQoZT0+UHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jIGU9PmZpbi5WaWV3LndyYXBTeW5jKGUpLmdldEluZm8oKSkpKSkodCkse25ld1BhZ2VVcmw6bixuZXdUYWJVcmw6b309YXdhaXQgX28oZSk7YS5mb3JFYWNoKChhc3luYyBlPT57ZS51cmwhPT1uJiZlLnVybCE9PW8mJmF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGUudXJsKX0pKX0sdmk9KGUsdCk9Pnt0LmZvckVhY2goKGFzeW5jIHQ9Pntjb25zdCBhPWZpbi5WaWV3LndyYXBTeW5jKHQpO2F3YWl0KGFzeW5jKGUsdCk9Pntjb25zdHt1cmw6YX09YXdhaXQgdC5nZXRJbmZvKCksbj17Li4uYXdhaXQgdC5nZXRPcHRpb25zKCksdXJsOmEsdGFyZ2V0OmUsbmFtZTp2b2lkIDB9O2F3YWl0IG1uKCkuY3JlYXRlVmlldyhuLGUsdC5pZGVudGl0eSl9KShlLGEpfSkpfSxQaT1hc3luYyhlLHQsYSk9Pntjb25zdCBuPXtuZXdDaGFubmVsSWQ6dCxzZWxlY3RlZFZpZXdzOmF9Oyhhd2FpdCBTYShlKSkuZGlzcGF0Y2goQWEuQWRkVG9DaGFubmVsLG4pfSxDaT1hc3luYyhlLHQpPT57KGF3YWl0IFNhKGUpKS5kaXNwYXRjaChBYS5SZW1vdmVGcm9tQ2hhbm5lbCx0KX0sTWk9YXN5bmMoZSx0KT0+e2lmKCFlKXJldHVybjtjb25zdCBhPXQuaWRlbnRpdHksbj1maW4uV2luZG93LndyYXBTeW5jKGEpO3N3aXRjaChqdCh7dHlwZTpcIlZpZXcgVGFiIE1lbnVcIixhY3Rpb246XCJTZWxlY3QgTWVudSBJdGVtXCIsdmFsdWU6ZS50eXBlLHNraXBWYWx1ZUhhc2hpbmc6ITB9KSxlLnR5cGUpe2Nhc2UgUy5CYWNrOmF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWUubWFwKChlPT5maW4uVmlldy53cmFwU3luYyhlKS5uYXZpZ2F0ZUJhY2soKSkpO2F3YWl0IFByb21pc2UuYWxsKHQpfSkodC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIFMuRm9yd2FyZDphd2FpdChhc3luYyBlPT57Y29uc3QgdD1lLm1hcCgoZT0+ZmluLlZpZXcud3JhcFN5bmMoZSkubmF2aWdhdGVGb3J3YXJkKCkpKTthd2FpdCBQcm9taXNlLmFsbCh0KX0pKHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBTLlByaW50OmF3YWl0IHByKHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBTLlByaW50QWxsOmF3YWl0IG4ucHJpbnQoe2NvbnRlbnQ6XCJ2aWV3c1wiLGluY2x1ZGVTZWxmOiExfSk7YnJlYWs7Y2FzZSBTLlByaW50U2NyZWVuOmF3YWl0IG4ucHJpbnQoe2NvbnRlbnQ6XCJzY3JlZW5zaG90XCJ9KTticmVhaztjYXNlIFMuQ2xvc2VWaWV3czphd2FpdCBmaShhLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBTLk9wZW5XaXRoRGVmYXVsdEJyb3dzZXI6YXdhaXQgU2koYSx0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgUy5SZWxvYWRWaWV3czp0LnNlbGVjdGVkVmlld3MuZm9yRWFjaCgoYXN5bmMgZT0+e2NvbnN0IHQ9ZmluLlZpZXcud3JhcFN5bmMoZSk7YXdhaXQgdC5yZWxvYWQoKX0pKTticmVhaztjYXNlIFMuTmV3Vmlldzphd2FpdCB5aShhLHQpO2JyZWFrO2Nhc2UgUy5EdXBsaWNhdGVWaWV3czp2aShhLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBTLkFkZFRvQ2hhbm5lbDpQaShhLGUub3B0aW9uLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBTLlJlbW92ZUZyb21DaGFubmVsOkNpKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIFMuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCBuPXtjYWxsZXJUeXBlOk0uVmlld1RhYkNvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OmEsc2VsZWN0ZWRWaWV3czp0LnNlbGVjdGVkVmlld3MsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTttbigpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsbil9fX0seGk9KHJlcXVpcmUoXCJ0aXRsZS1jYXNlXCIpLG5ldyBNYXAoW1tcImJsdWVcIix7bmFtZTpcIkJsdWVcIixjb2xvcjpcIiMwMDkxRUJcIn1dLFtcImluZGlnb1wiLHtuYW1lOlwiSW5kaWdvXCIsY29sb3I6XCIjNjQ1MEZGXCJ9XSxbXCJwaW5rXCIse25hbWU6XCJQaW5rXCIsY29sb3I6XCIjRTg3OENGXCJ9XSxbXCJ0ZWFsXCIse25hbWU6XCJUZWFsXCIsY29sb3I6XCIjMjREMUQxXCJ9XSxbXCJncmVlblwiLHtuYW1lOlwiR3JlZW5cIixjb2xvcjpcIiMwMEFGNzhcIn1dLFtcIm9yYW5nZVwiLHtuYW1lOlwiT3JhbmdlXCIsY29sb3I6XCIjRkY3RDM3XCJ9XSxbXCJyZWRcIix7bmFtZTpcIlJlZFwiLGNvbG9yOlwiI0Y5NDE0NFwifV0sW1wieWVsbG93XCIse25hbWU6XCJZZWxsb3dcIixjb2xvcjpcIiNGOUM3NEZcIn1dLFtcImdyYXlcIix7bmFtZTpcIkdyYXlcIixjb2xvcjpcIiM4Mjg3ODhcIn1dXSkpO2Z1bmN0aW9uIElpKCl7cmV0dXJue3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5tYW5hZ2VEZXNrdG9wU2lnbmFsc1wiKSxkYXRhOnt0eXBlOmIuTWFuYWdlRGVza3RvcFNpZ25hbHN9fX1mdW5jdGlvbiBBaShlKXtjb25zdCB0PUFycmF5LmZyb20oeGkuZW50cmllcygpKSxhPWUuY29udGV4dEdyb3VwO3JldHVybnt0eXBlOlwid2lkZ2V0XCIsY29uZmlnOnt0eXBlOlwiYWRkLXRvLWNoYW5uZWxcIixjaGFubmVsczpbLi4udC5tYXAoKChbZSx0XSk9Pih7bGFiZWw6dC5uYW1lLGRhdGE6e3R5cGU6Yi5BZGRUb0NoYW5uZWwsb3B0aW9uOmV9LGNvbG9yOnQuY29sb3IsY2hlY2tlZDphPT09ZX0pKSkse2xhYmVsOlwidW5saW5rXCIsZGF0YTp7dHlwZTpiLkFkZFRvQ2hhbm5lbCxvcHRpb246XCJ1bmxpbmtcIn0saXNOb25lOiEwfV19LGxhYmVsOlwiTGluayB0byBDaGFubmVsXCJ9fWxldCBXaT1cIlBsYXRmb3JtXCI7Y29uc3QgRGk9YXN5bmMoKT0+V2k7Y29uc3QgVGk9YXN5bmMoZSx0KT0+e2lmKCFlKXJldHVybjtjb25zdCBhPXQuaWRlbnRpdHksbj1hd2FpdCBTYShhKSxvPW1uKCkuQnJvd3Nlci53cmFwU3luYyhhKSxyPWZpbi5XaW5kb3cud3JhcFN5bmMoYSk7aWYoanQoe3R5cGU6XCJHbG9iYWwgTWVudVwiLGFjdGlvbjpcIlNlbGVjdCBNZW51IEl0ZW1cIix2YWx1ZTplLnR5cGUsc2tpcFZhbHVlSGFzaGluZzohMCxkYXRhOnthY3Rpb246ZS5hY3Rpb24/LmlkfX0pLGF3YWl0IFV0KGEpKXtjb25zdCBhPWF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPXQuaWRlbnRpdHksbj1tbigpLkJyb3dzZXIud3JhcFN5bmMoYSksbz0oYXdhaXQgbi5nZXRQYWdlcygpKS5maW5kKChlPT5lLmlzQWN0aXZlKSkscj1wYSh7Li4uYSxsYXlvdXROYW1lOm8ubGF5b3V0Q29udGFpbmVyS2V5fSksaT10LnNlbGVjdGVkVmlld3M7c3dpdGNoKGU/LnR5cGUpe2Nhc2UgeS5Mb2NrOmF3YWl0IG4udXBkYXRlUGFnZSh7cGFnZUlkOm8ucGFnZUlkLHBhZ2U6e2lzTG9ja2VkOiFvLmlzTG9ja2VkfX0pO2JyZWFrO2Nhc2UgeS5BZGRUb0NoYW5lbDplLm9wdGlvbj9hd2FpdCBQaShhLGUub3B0aW9uLGkpOm51bGw9PT1lLm9wdGlvbiYmYXdhaXQgQ2koYSxpKTticmVhaztjYXNlIHkuTWFuYWdlRGVza3RvcFNpZ25hbHM6YXdhaXQgUWEoYSk7YnJlYWs7Y2FzZSBtLk5ld1dpbmRvdzp7Y29uc3QgZT1hd2FpdCBVbyhhKTthd2FpdCBtbigpLkJyb3dzZXIuY3JlYXRlV2luZG93KHt3b3Jrc3BhY2VQbGF0Zm9ybTp7cGFnZXM6W2VdLHdpbmRvd1R5cGU6XCJlbnRlcnByaXNlXCJ9fSk7YnJlYWt9Y2FzZSB5LlBpbjp7Y29uc3R7YWx3YXlzT25Ub3A6ZX09YXdhaXQgbi5vcGVuZmluV2luZG93LmdldE9wdGlvbnMoKTthd2FpdCBuLm9wZW5maW5XaW5kb3cudXBkYXRlT3B0aW9ucyh7YWx3YXlzT25Ub3A6IWV9KTticmVha31jYXNlIHkuU2hvd0hpZGVUYWJzOmF3YWl0IHIuaXNTaG93aW5nVGFicygpP2F3YWl0IHIuaGlkZSgpOmF3YWl0IHIuc2hvdygpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuITF9cmV0dXJuITB9KShlLHQpO2lmKGEpcmV0dXJufXN3aXRjaChlLnR5cGUpe2Nhc2UgbS5OZXdXaW5kb3c6e2NvbnN0e25ld1BhZ2VVcmw6ZX09YXdhaXQgX28oYSk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBlbXB0eSB3aW5kb3cgd2l0aG91dCBhIG5ld1BhZ2VVcmwgc2V0XCIpO21uKCkuY3JlYXRlVmlldyh7dGFyZ2V0OnZvaWQgMCx1cmw6ZX0pO2JyZWFrfWNhc2UgbS5OZXdQYWdlOmF3YWl0IGlyKGEpO2JyZWFrO2Nhc2UgbS5DbG9zZVdpbmRvdzpuLmRpc3BhdGNoKEFhLkNsb3NlQnJvd3NlcldpbmRvdyk7YnJlYWs7Y2FzZSBtLlNhdmVXb3Jrc3BhY2U6YXdhaXQgb3IoYSk7YnJlYWs7Y2FzZSBtLlNhdmVQYWdlOmF3YWl0IHNyKGEpO2JyZWFrO2Nhc2UgbS5TYXZlUGFnZUFzOmF3YWl0IGNyKGEpO2JyZWFrO2Nhc2UgbS5TYXZlV29ya3NwYWNlQXM6YXdhaXQgcnIoYSk7YnJlYWs7Y2FzZSBtLlJlbmFtZVdvcmtzcGFjZTpvLl9vcGVuU2F2ZU1vZGFsKHttZW51VHlwZTpJLlJFTkFNRV9XT1JLU1BBQ0V9KTticmVhaztjYXNlIG0uU3dpdGNoV29ya3NwYWNlOmF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPW1uKCksbj0oYXdhaXQgYS5TdG9yYWdlLmdldFdvcmtzcGFjZXMoKSkuZmluZCgoZT0+ZS53b3Jrc3BhY2VJZD09PXQud29ya3NwYWNlSWQpKTthLmFwcGx5V29ya3NwYWNlKG4se3NraXBQcm9tcHQ6ITEscHJvbXB0Q29udGFpbmVyV2luZG93SWRlbnRpdHk6ZX0pfSkoYSxlKTticmVhaztjYXNlIG0uRGVsZXRlV29ya3NwYWNlOmF3YWl0IGxyKGEsZSk7YnJlYWs7Y2FzZSBtLkRvd25sb2Fkczphd2FpdCB1cihhKTticmVhaztjYXNlIG0uQXBwZWFyYW5jZTphd2FpdCBtbigpLlRoZW1lLnNldFNlbGVjdGVkU2NoZW1lKGUuc2NoZW1lKTticmVhaztjYXNlIG0uUXVpdDp7Y29uc3QgZT1EaSgpO2F3YWl0IEhvKGEsYXdhaXQgZSkmJmZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLnF1aXQoKX1icmVhaztjYXNlIG0uT3BlblN0b3JlZnJvbnQ6KGFzeW5jKCk9Pnthd2FpdCBJZSgpJiZ2ZShTZSl9KSgpO2JyZWFrO2Nhc2UgbS5SZXN0b3JlQ2hhbmdlczphd2FpdCBxbygpO2JyZWFrO2Nhc2UgbS5QcmludDphd2FpdCBwcih0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgbS5QcmludEFsbDphd2FpdCByLnByaW50KHtjb250ZW50Olwidmlld3NcIixpbmNsdWRlU2VsZjohMX0pO2JyZWFrO2Nhc2UgbS5QcmludFNjcmVlbjphd2FpdCByLnByaW50KHtjb250ZW50Olwic2NyZWVuc2hvdFwifSk7YnJlYWs7Y2FzZSBtLkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3QgdD17Y2FsbGVyVHlwZTpNLkdsb2JhbENvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OmEsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTttbigpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsdCl9ZWxzZSBjb25zb2xlLndhcm4oYEVuY291bnRlcmVkIGEgQ3VzdG9tIGNvbnRleHQgbWVudSBvcHRpb24gd2l0aCBhbiBcImFjdGlvblwiIHByb3BlcnR5IHdpdGggdmFsdWUgXCIke2UuYWN0aW9ufVwiYCl9fSxCaT1hc3luYyhlLHQsYSk9Pntjb25zdCBuPW1uKCkuQnJvd3Nlci53cmFwU3luYyh0LmlkZW50aXR5KSxvPWZpbi5XaW5kb3cud3JhcFN5bmModC5pZGVudGl0eSkscj1hd2FpdCBTYSh0LmlkZW50aXR5KSxpPWF3YWl0IFV0KCk7c3dpdGNoKGUmJmp0KHt0eXBlOlwiUGFnZSBUYWIgTWVudVwiLGFjdGlvbjpcIlNlbGVjdCBNZW51IEl0ZW1cIix2YWx1ZTplLnR5cGUsc2tpcFZhbHVlSGFzaGluZzohMH0pLGU/LnR5cGUpe2Nhc2UgYi5TYXZlOmF3YWl0IHNyKHQuaWRlbnRpdHksdC5wYWdlSWQpO2JyZWFrO2Nhc2UgYi5TYXZlQXM6YXdhaXQgY3IodC5pZGVudGl0eSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSBiLk5ld1BhZ2U6YXdhaXQgaXIodC5pZGVudGl0eSk7YnJlYWs7Y2FzZSBiLkRlbGV0ZVBhZ2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9bW4oKSxuPWEuQnJvd3Nlci53cmFwU3luYyhlKSxvPShhd2FpdCBhLlN0b3JhZ2UuZ2V0UGFnZXMoKSkuZmluZCgoZT0+ZS5wYWdlSWQ9PT10KSk7byYmYXdhaXQgS28oZSxvLnRpdGxlKSYmKGF3YWl0IGEuU3RvcmFnZS5kZWxldGVQYWdlKG8ucGFnZUlkKSxhd2FpdCBuLnJlbW92ZVBhZ2UodCksTG8oe21lc3NhZ2U6X24oXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkRlbGV0ZWRcIikscGFyZW50QnJvd3Nlck5hbWU6ZS5uYW1lLHNlY29uZGFyeU1lc3NhZ2U6X24oXCJlbnRlcnByaXNlU3VjY2Vzc0luZGljYXRvci5zdXBlcnRhYkhhc0JlZW5EZWxldGVkXCIse3RpdGxlOm8udGl0bGV9KX0pKX0pKHQuaWRlbnRpdHksdC5wYWdlSWQpO2JyZWFrO2Nhc2UgYi5SZW5hbWU6aWYoYXdhaXQgVXQodC5pZGVudGl0eSkpe2F3YWl0IG4uc2V0QWN0aXZlUGFnZSh0LnBhZ2VJZCk7Y29uc3QgZT1hd2FpdCBGcigpO2F3YWl0IGUuZGlzcGF0Y2goXCJvcGVuXCIse3BhcmVudElkZW50aXR5OnQuaWRlbnRpdHkscmVzcG9uc2VJZGVudGl0eTpmZSx0eXBlOk5yLlJlbmFtZVN1cGVydGFiLGFuY2hvckJlaGF2aW9yOkVpLkNlbnRlcix4OmEubGVmdCthLndpZHRoLzItMTY0LHk6YS5ib3R0b20tOCxwYXlsb2FkOntwYWdlSWQ6dC5wYWdlSWR9fSl9ZWxzZSBhd2FpdCBuLl9vcGVuU2F2ZU1vZGFsKHttZW51VHlwZTpJLlJFTkFNRV9QQUdFLGlkOnQucGFnZUlkfSk7YnJlYWs7Y2FzZSBiLkR1cGxpY2F0ZTpyLmRpc3BhdGNoKEFhLkR1cGxpY2F0ZVBhZ2UsdC5wYWdlSWQpO2JyZWFrO2Nhc2UgYi5DbG9zZTppP2F3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPW1uKCkuQnJvd3Nlci53cmFwU3luYyhlKSxuPWF3YWl0IGEuZ2V0UGFnZXMoKTtmb3IoY29uc3QgbyBvZiBuKWlmKG8ucGFnZUlkPT09dCl7YXdhaXQgYS5yZW1vdmVQYWdlKG8ucGFnZUlkKSxhd2FpdCBhLl90cmFja1JlbW92ZWRUYWIoe2lkZW50aXR5OmUscGFnZTpvfSk7YnJlYWt9fSkodC5pZGVudGl0eSx0LnBhZ2VJZCk6ci5kaXNwYXRjaChBYS5DbG9zZVBhZ2Use3BhZ2VJZDp0LnBhZ2VJZH0pO2JyZWFrO2Nhc2UgYi5DdXN0b206aWYoZS5hY3Rpb24pe2NvbnN0IGE9e2NhbGxlclR5cGU6TS5QYWdlVGFiQ29udGV4dE1lbnUsd2luZG93SWRlbnRpdHk6dC5pZGVudGl0eSxwYWdlSWQ6dC5wYWdlSWQsY3VzdG9tRGF0YTplLmFjdGlvbi5jdXN0b21EYXRhfTttbigpLl9pbnZva2VDdXN0b21BY3Rpb24oZS5hY3Rpb24uaWQsYSl9ZWxzZSBjb25zb2xlLndhcm4oYEVuY291bnRlcmVkIGEgQ3VzdG9tIGNvbnRleHQgbWVudSBvcHRpb24gd2l0aCBhbiBcImFjdGlvblwiIHByb3BlcnR5IHdpdGggdmFsdWUgXCIke2UuYWN0aW9ufVwiYCk7YnJlYWs7Y2FzZSBiLlJlZnJlc2g6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9bW4oKSxuPWEuQnJvd3Nlci53cmFwU3luYyhlKSxvPShhd2FpdCBuLmdldFBhZ2VzKCkpLmZpbmQoKGU9PnQ/ZS5wYWdlSWQ9PT10OmUuaXNBY3RpdmUpKTtvPy5sYXlvdXQ/LmNvbnRlbnQmJk1uKG8ubGF5b3V0LmNvbnRlbnQpLmZvckVhY2goKGFzeW5jIGU9PnsoYXdhaXQgZmluLlZpZXcud3JhcCh7dXVpZDphLmlkZW50aXR5LnV1aWQsbmFtZTplLm5hbWV9KSkucmVsb2FkKCl9KSl9KSh0LmlkZW50aXR5LHQucGFnZUlkKTticmVhaztjYXNlIGIuQ2xvc2VPdGhlcnM6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9bW4oKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49YXdhaXQgYS5nZXRQYWdlcygpO2Zvcihjb25zdCBvIG9mIG4pby5wYWdlSWQhPT10JiYoYXdhaXQgYS5yZW1vdmVQYWdlKG8ucGFnZUlkKSxhd2FpdCBhLl90cmFja1JlbW92ZWRUYWIoe2lkZW50aXR5OmUscGFnZTpvfSkpfSkodC5pZGVudGl0eSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSBiLlNhdmVXb3Jrc3BhY2VBczphd2FpdCBycih0LmlkZW50aXR5KTticmVhaztjYXNlIGIuUHJpbnQ6e2NvbnN0IGU9YXdhaXQgbi5fZ2V0TGF5b3V0c1dpdGhTZWxlY3RlZFZpZXdzKCkse3NlbGVjdGVkVmlld3M6YX09ZS5maW5kKChlPT5lLnBhZ2VJZD09PXQucGFnZUlkKSk7YXdhaXQgcHIoYSk7YnJlYWt9Y2FzZSBiLlByaW50QWxsOmF3YWl0IG4uc2V0QWN0aXZlUGFnZSh0LnBhZ2VJZCksYXdhaXQgby5wcmludCh7Y29udGVudDpcInZpZXdzXCIsaW5jbHVkZVNlbGY6ITF9KTticmVhaztjYXNlIGIuUHJpbnRTY3JlZW46YXdhaXQgbi5zZXRBY3RpdmVQYWdlKHQucGFnZUlkKSxhd2FpdCBvLnByaW50KHtjb250ZW50Olwic2NyZWVuc2hvdFwifSk7YnJlYWs7Y2FzZSBiLkFkZFRvQ2hhbm5lbDphd2FpdCBuLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDp0LnBhZ2VJZCxwYWdlOntjb250ZXh0R3JvdXA6XCJ1bmxpbmtcIj09PWUub3B0aW9uP251bGw6ZS5vcHRpb259fSk7YnJlYWs7Y2FzZSBiLk1hbmFnZURlc2t0b3BTaWduYWxzOmF3YWl0IFFhKHQuaWRlbnRpdHkpfX0sUmk9YXN5bmMoZSx0KT0+e2lmKGU/LnR5cGUpe2NvbnN0IGE9dC5pZGVudGl0eTtzd2l0Y2goZS50eXBlKXtjYXNlIFAuU2F2ZVBhZ2U6YXdhaXQgc3IoYSk7YnJlYWs7Y2FzZSBQLlNhdmVXb3Jrc3BhY2U6YXdhaXQgb3IoYSk7YnJlYWs7Y2FzZSBQLlNhdmVQYWdlQXM6YXdhaXQgY3IoYSk7YnJlYWs7Y2FzZSBQLlNhdmVXb3Jrc3BhY2VBczphd2FpdCBycihhKTticmVhaztjYXNlIFAuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCBhPXtjYWxsZXJUeXBlOk0uU2F2ZUJ1dHRvbkNvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OnQuaWRlbnRpdHkscGFnZUlkOnQucGFnZUlkLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07bW4oKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLGEpfWVsc2UgY29uc29sZS53YXJuKGBFbmNvdW50ZXJlZCBhIEN1c3RvbSBjb250ZXh0IG1lbnUgb3B0aW9uIHdpdGggYW4gXCJhY3Rpb25cIiBwcm9wZXJ0eSB3aXRoIHZhbHVlIFwiJHtlLmFjdGlvbn1cImApfX19O3ZhciBFaTshZnVuY3Rpb24oZSl7ZVtlLlRvcExlZnQ9MF09XCJUb3BMZWZ0XCIsZVtlLlRvcFJpZ2h0PTFdPVwiVG9wUmlnaHRcIixlW2UuQm90dG9tTGVmdD0yXT1cIkJvdHRvbUxlZnRcIixlW2UuQm90dG9tUmlnaHQ9M109XCJCb3R0b21SaWdodFwiLGVbZS5DZW50ZXI9NF09XCJDZW50ZXJcIn0oRWl8fChFaT17fSkpO2NvbnN0IEZpPWFzeW5jKGUsdCxhLG4pPT57Y29uc3R7eDpvLHk6cixpZGVudGl0eTppLHRlbXBsYXRlOnMsY2FsbGJhY2s6Y309ZSxsPWF3YWl0IFV0KGkpLHtkYXRhOmR9PWw/YXdhaXQgb2koe3g6byx5OnIsdGVtcGxhdGU6c30sYSxuLGZpbi5XaW5kb3cud3JhcFN5bmMoaSkpOmF3YWl0IGZ1bmN0aW9uKGUsdCl7aWYoIVcpdGhyb3cgbmV3IEVycm9yKFwic2hvd0NvbnRleHRNZW51IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO2lmKCF0JiYhZmluLm1lLmlzV2luZG93KXRocm93IG5ldyBFcnJvcihcInNob3dDb250ZXh0TWVudSBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gd2luZG93LlwiKTtyZXR1cm4odHx8ZmluLldpbmRvdy5nZXRDdXJyZW50U3luYygpKS5zaG93UG9wdXBNZW51KGUpfSh7eDpvLHk6cix0ZW1wbGF0ZTpzfSxmaW4uV2luZG93LndyYXBTeW5jKGkpKTtjKGQsZSl9O2FzeW5jIGZ1bmN0aW9uIFZpKGUsdCl7Y29uc3QgYT1oYSgpLG49YXdhaXQgVXQoZS5pZGVudGl0eSk7biYma2EoYSk7Y29uc3Qgbz1uP2F3YWl0KGFzeW5jKHtpZGVudGl0eTplLHNlbGVjdGVkVmlld3M6dH0pPT57Y29uc3QgYT1tbigpLG49YS5Ccm93c2VyLndyYXBTeW5jKGUpLG89KGF3YWl0IG4uZ2V0UGFnZXMoKSkuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpLHI9YXdhaXQgYS5TdG9yYWdlLmdldFBhZ2Uoby5wYWdlSWQpLGk9QW4oby5sYXlvdXQuY29udGVudCk+MSxzPWF3YWl0IFV0KGUpLGM9YXdhaXQgYS5UaGVtZS5nZXRUaGVtZXMoKSxsPWNbMF0mJlwicGFsZXR0ZXNcImluIGNbMF18fCFjWzBdfHwwPT09Yy5sZW5ndGgsZD17Li4uZGkocyksZW5hYmxlZDohIXJ9LHU9ey4uLnVpKHMpLGVuYWJsZWQ6aX07cmV0dXJuW2xpKCkscGkoITAscykse3R5cGU6YWkuU2VwYXJhdG9yfSxkLHUse3R5cGU6YWkuU2VwYXJhdG9yfSx7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51Lm1hbmFnZURlc2t0b3BTaWduYWxzXCIpLGRhdGE6e3R5cGU6bS5NYW5hZ2VEZXNrdG9wU2lnbmFsc319LHt0eXBlOmFpLlNlcGFyYXRvcn0sLi4ubD9be3R5cGU6YWkuU3VibWVudSxsYWJlbDpoaSgpLmxhYmVsLHN1Ym1lbnU6YXdhaXQga2koKX1dOltdLHt0eXBlOmFpLlNlcGFyYXRvcn0sc2koKSx7dHlwZTphaS5TZXBhcmF0b3J9LGNpKCEwKV19KSh7aWRlbnRpdHk6ZS5pZGVudGl0eSxzZWxlY3RlZFZpZXdzOmUuc2VsZWN0ZWRWaWV3c30pOmF3YWl0IGJpKGUuaWRlbnRpdHksZS5zZWxlY3RlZFZpZXdzKSxyPWF3YWl0IERpKCk7bnx8KG8uZmluZCgoZT0+ZS5kYXRhPy50eXBlPT09bS5RdWl0KSkubGFiZWw9YFF1aXQgJHtyfWApO2NvbnN0e3JlY3Q6aSwuLi5zfT1lLHt4OmMseTpsfT1uP3t4OmkubGVmdCtpLndpZHRoLHk6aS5ib3R0b219OmUsZD17Li4ucyx4OmMseTpsLHRlbXBsYXRlOm8sY2FsbGJhY2s6VGl9O21hKGEpLGF3YWl0IHRoaXMub3Blbkdsb2JhbENvbnRleHRNZW51KGQsdCl9YXN5bmMgZnVuY3Rpb24gTmkoZSx0KXtjb25zdCBhPXsuLi5lLGNhbGxiYWNrOk1pfTthd2FpdCB0aGlzLm9wZW5WaWV3VGFiQ29udGV4dE1lbnUoYSx0KX1hc3luYyBmdW5jdGlvbiBMaShlLHQpe2NvbnN0IGE9aGEoKSxuPWF3YWl0IFV0KGUuaWRlbnRpdHkpO24mJmthKGEpO2NvbnN0IG89YXdhaXQoYXN5bmMoZSx0LGEpPT57Y29uc3Qgbj1hd2FpdCBtbigpLlN0b3JhZ2UuZ2V0UGFnZShlKSxvPShhd2FpdCBYbigpKS5maW5kKCh0PT50LnBhZ2VJZD09PWUpKSxyPUFuKG8ubGF5b3V0LmNvbnRlbnQpPjEse3dvcmtzcGFjZVBsYXRmb3JtOml9PWF3YWl0IHllKHQpLmdldE9wdGlvbnMoKSxzPSEoaS5pc0xvY2tlZHx8aS5wcmV2ZW50UGFnZUNsb3NlfHxvLmNsb3NlQnV0dG9uPy5kaXNhYmxlZHx8by5jbG9zZUJ1dHRvbj8uaGlkZGVuKSxjPVt7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImVudGVycHJpc2VDb250ZXh0TWVudS5uZXdUYWJcIiksZGF0YTp7dHlwZTpiLk5ld1BhZ2V9fSxyaSxBaShvKSxJaSgpLHJpLHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwicmVsb2FkXCIpLGRhdGE6e3R5cGU6Yi5SZWZyZXNofX0se3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCIpLGRhdGE6e3R5cGU6Yi5EdXBsaWNhdGV9LGVuYWJsZWQ6IWkuaXNMb2NrZWR9LGF3YWl0IGlpKCkscmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24ocj9cImVudGVycHJpc2VTYXZlTW9kYWwuY2xvc2VTdXBlcnRhYlwiOlwiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVRhYlwiKSxkYXRhOnt0eXBlOmIuQ2xvc2V9LGVuYWJsZWQ6c31dLGw9W3t0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiZW50ZXJwcmlzZUNvbnRleHRNZW51Lm5ld1RhYlwiKSxkYXRhOnt0eXBlOmIuTmV3UGFnZX19LHJpLEFpKG8pLElpKCkscmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJlbnRlcnByaXNlU2F2ZU1vZGFsLnJlbmFtZVN1cGVydGFiXCIpLGRhdGE6e3R5cGU6Yi5SZW5hbWV9LGVuYWJsZWQ6IWkuaXNMb2NrZWQmJiEhbiYmcn0se3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZHVwbGljYXRlXCIpLGRhdGE6e3R5cGU6Yi5EdXBsaWNhdGV9LGVuYWJsZWQ6IWkuaXNMb2NrZWR9LHJpLHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYlwiKSxkYXRhOnt0eXBlOmIuU2F2ZX0sZW5hYmxlZDpyJiYhIW59LHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwiZW50ZXJwcmlzZUNvbnRleHRNZW51LnNhdmVTdXBlcnRhYkFzXCIpLGRhdGE6e3R5cGU6Yi5TYXZlQXN9LGVuYWJsZWQ6cn0scmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJlbnRlcnByaXNlQ29udGV4dE1lbnUuZGVsZXRlU3VwZXJ0YWJcIiksZGF0YTp7dHlwZTpiLkRlbGV0ZVBhZ2V9LGVuYWJsZWQ6ISFufSxyaSx7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihyP1wiZW50ZXJwcmlzZVNhdmVNb2RhbC5jbG9zZVN1cGVydGFiXCI6XCJlbnRlcnByaXNlU2F2ZU1vZGFsLmNsb3NlVGFiXCIpLGRhdGE6e3R5cGU6Yi5DbG9zZX0sZW5hYmxlZDpzfV0sZD1be3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5zYXZlUGFnZVwiKSxkYXRhOnt0eXBlOmIuU2F2ZX0sZW5hYmxlZDohIW59LHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiKSxkYXRhOnt0eXBlOmIuU2F2ZUFzfSxlbmFibGVkOiEwfSx7dHlwZTphaS5MYWJlbCxsYWJlbDpcIlNhdmUgV29ya3NwYWNlIEFzXCIsZGF0YTp7dHlwZTpiLlNhdmVXb3Jrc3BhY2VBc319LHt0eXBlOmFpLkxhYmVsLGxhYmVsOlwiUmVmcmVzaFwiLGRhdGE6e3R5cGU6Yi5SZWZyZXNofX0scmkse3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJzYXZlTW9kYWwucmVuYW1lUGFnZVwiKSxkYXRhOnt0eXBlOmIuUmVuYW1lfSxlbmFibGVkOiEhbn0se3R5cGU6YWkuTGFiZWwsbGFiZWw6X24oXCJjb250ZXh0TWVudS5kdXBsaWNhdGVQYWdlXCIpLGRhdGE6e3R5cGU6Yi5EdXBsaWNhdGV9LGVuYWJsZWQ6IWkuaXNMb2NrZWR9LHJpLHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwic2F2ZU1vZGFsLmNsb3NlUGFnZVwiKSxkYXRhOnt0eXBlOmIuQ2xvc2V9LGVuYWJsZWQ6c31dO3JldHVybiBhP3I/bDpjOmR9KShlLnBhZ2VJZCxlLmlkZW50aXR5LG4pLHI9ey4uLmUsdGVtcGxhdGU6byxjYWxsYmFjazoodCxhKT0+e0JpKHQsYSxlLnJlY3QpfX07bWEoYSksYXdhaXQgdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51KHIsdCl9YXN5bmMgZnVuY3Rpb24gX2koZSx0KXtjb25zdCBhPWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PW1uKCksYT1hd2FpdCB0LmdldEN1cnJlbnRXb3Jrc3BhY2Uoe3NraXBTbmFwc2hvdFVwZGF0ZTohMH0pLG49KGF3YWl0IHQuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzTWV0YWRhdGEoKSkuZmluZCgoZT0+ZS53b3Jrc3BhY2VJZD09PWEud29ya3NwYWNlSWQpKSxvPWF3YWl0IHQuU3RvcmFnZS5nZXRQYWdlKGUpO3JldHVyblt7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcImNvbnRleHRNZW51LnNhdmVXb3Jrc3BhY2VcIiksZW5hYmxlZDohIW4sZGF0YTp7dHlwZTpQLlNhdmVXb3Jrc3BhY2V9fSx7dHlwZTphaS5MYWJlbCxsYWJlbDpfbihcInNhdmVNZW51LnNhdmVXb3Jrc3BhY2VBc1wiKSxkYXRhOnt0eXBlOlAuU2F2ZVdvcmtzcGFjZUFzfX0se3R5cGU6YWkuU2VwYXJhdG9yLGRhdGE6dm9pZCAwfSx7dHlwZTphaS5MYWJlbCxlbmFibGVkOiEhbyxsYWJlbDpfbihcImNvbnRleHRNZW51LnNhdmVQYWdlXCIpLGRhdGE6e3R5cGU6UC5TYXZlUGFnZX19LHt0eXBlOmFpLkxhYmVsLGxhYmVsOl9uKFwic2F2ZU1lbnUuc2F2ZVBhZ2VBc1wiKSxkYXRhOnt0eXBlOlAuU2F2ZVBhZ2VBc319XX0pKGUucGFnZUlkKSxuPXsuLi5lLHRlbXBsYXRlOmEsY2FsbGJhY2s6Uml9O2F3YWl0IHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudShuLHQpfWNvbnN0IFVpPVwiZG9jay1jb21wYW5pb24tdXBkYXRlc1wiLE9pPWFzeW5jKCk9Pihhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSkuZmluZCgoZT0+ZS5pZGVudGl0eS5uYW1lPT09bWUuRG9ja0NvbXBhbmlvbikpLEdpPWplKGAke1widW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4mJmZpbj8ubWUuaWRlbnRpdHkudXVpZH0tZW50ZXJwcmlzZS1kb2NrYCksSGk9YXN5bmMoKT0+e2NvbnN0IGU9bW4oKSx0PWF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1hd2FpdCBNcigpO2F3YWl0IFByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT57YXdhaXQgSXIoZS5pZGVudGl0eSl9KSkpO2NvbnN0IHQ9QXJyYXkuZnJvbShTci52YWx1ZXMoKSkuc29ydCgoKGUsdCk9PnQubGFzdEZvY3VzZWRUaW1lLWUubGFzdEZvY3VzZWRUaW1lKSksYT10LmZpbmQoKGU9PmUuaXNWaXNpYmxlKSk7aWYoYSl7Y29uc3QgZT1maW4uV2luZG93LndyYXBTeW5jKGEuaWRlbnRpdHkpO3JldHVybiBhd2FpdCBlLmZvY3VzKCksYS5pZGVudGl0eX1jb25zdCBuPXRbMF07aWYobil7Y29uc3QgZT1maW4uV2luZG93LndyYXBTeW5jKG4uaWRlbnRpdHkpO3JldHVybiBhd2FpdCBlLnJlc3RvcmUoKSxhd2FpdCBlLmZvY3VzKCksbi5pZGVudGl0eX1yZXR1cm4geHIoKX0oKSxhPWUuQnJvd3Nlci53cmFwU3luYyh0KSxuPShhd2FpdCBhLmdldFBhZ2VzKCkpLmF0KC0xKSxvPU1uKG4ubGF5b3V0LmNvbnRlbnQpO2lmKDE9PT1vLmxlbmd0aCYmSHQob1swXS51cmwpKWF3YWl0IGEuc2V0QWN0aXZlUGFnZShuLnBhZ2VJZCk7ZWxzZXtjb25zdCBlPWF3YWl0IFVvKHQpLHtuZXdQYWdlVXJsOm59PWF3YWl0IF9vKCk7YXdhaXQgYS5fYWRkRGVmYXVsdFBhZ2Uoe2lkZW50aXR5OmEuaWRlbnRpdHkscGFnZTplLG5ld1BhZ2VVcmw6bnx8dm9pZCAwfSl9KGF3YWl0IFNhKHQpKS5kaXNwYXRjaChBYS5Gb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsKX0sJGk9XCJkb2NrLXByb3ZpZGVyLWNvbmZpZ3NcIixLaT1UJiZXJiZuZXcgeXQuRGV4aWUoSXQoXCJkb2NrLXByb3ZpZGVyLWNvbmZpZ3NcIikpO2FzeW5jIGZ1bmN0aW9uIHppKGUpe2lmKCFLaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IERvY2sgcHJvdmlkZXIgY29uZmlnIC0gSW5kZXhlZERCIG5vdCBzdXBwb3J0ZWRcIik7dHJ5e3JldHVybiBhd2FpdCBLaVskaV0uZ2V0KGUpfWNhdGNoKGUpe3JldHVybiB2b2lkIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byByZXRyaWV2ZSBEb2NrIHByb3ZpZGVyIGNvbmZpZyBmcm9tIEluZGV4ZWREYlwiLGUpfX1hc3luYyBmdW5jdGlvbiBKaShlKXtpZighS2kpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHNhdmUgRG9jayBwcm92aWRlciBjb25maWcgLSBJbmRleGVkRGIgbm90IHN1cHBvcnRlZFwiKTthd2FpdCBLaVskaV0ucHV0KGUsZS5pZCl9S2kmJktpLnZlcnNpb24oLjEpLnN0b3Jlcyh7WyRpXTpcIlwifSk7Y29uc3QgWmk9XCJ3b3Jrc3BhY2VzXCIscWk9VCYmVyYmV3QoXCJvcGVuZmluLXdvcmtzcGFjZS1wbGF0Zm9ybS13b3Jrc3BhY2VzXCIsWmkpO2FzeW5jIGZ1bmN0aW9uIGppKGUpe2lmKCFxaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IHFpW1ppXS5nZXQoZSk7cmV0dXJuIHQmJih0LndvcmtzcGFjZUlkPWUudG9TdHJpbmcoKSx0LnRpdGxlPXQudGl0bGV8fHQud29ya3NwYWNlSWQpLHR9YXN5bmMgZnVuY3Rpb24gUWkoZSl7aWYoIXFpKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgd29ya3NwYWNlcyAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PWF3YWl0IHFpW1ppXS50b0NvbGxlY3Rpb24oKS5rZXlzKCksYT0oYXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9PmppKGUudG9TdHJpbmcoKSkpKSkpLmZpbHRlcigoZT0+ISFlKSk7cmV0dXJuIGU/YS5maWx0ZXIoKHQ9PkxyKHQudGl0bGUsZSkpKTphfWFzeW5jIGZ1bmN0aW9uIFlpKHt3b3Jrc3BhY2U6ZX0pe2lmKCFxaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCB0PShhd2FpdCBRaSgpKS5maW5kKCh0PT50LnRpdGxlPT09ZS50aXRsZSkpO2lmKHQmJnQud29ya3NwYWNlSWQhPT1lLndvcmtzcGFjZUlkKXRocm93IG5ldyBFcnJvcihgV29ya3NwYWNlIHdpdGggdGl0bGUgJyR7ZS50aXRsZX0nIGFscmVhZHkgZXhpc3RzLmApO2F3YWl0IHFpW1ppXS5wdXQoZSxlLndvcmtzcGFjZUlkKX1hc3luYyBmdW5jdGlvbiBYaShlKXtpZighcWkpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGRlbGV0ZSB3b3Jrc3BhY2UgLSBJbmRleERCIG5vdCBzdXBwb3J0ZWRcIik7YXdhaXQgcWlbWmldLmRlbGV0ZShlKX1hc3luYyBmdW5jdGlvbiBlcyh7d29ya3NwYWNlSWQ6ZSx3b3Jrc3BhY2U6dH0pe2lmKCFxaSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdXBkYXRlIHdvcmtzcGFjZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtpZighYXdhaXQgamkoZSkpdGhyb3cgbmV3IEVycm9yKFwid29ya3NwYWNlIG5vdCBmb3VuZFwiKTthd2FpdCBZaSh7d29ya3NwYWNlOnR9KSxlIT09dC53b3Jrc3BhY2VJZCYmYXdhaXQgWGkoZSl9Y29uc3QgdHM9ZT0+e2NvbnN0IHQ9ZS5sYXlvdXQsYT10LmNvbnRlbnQ/TW4odC5jb250ZW50KTpbXSxuPWEubGVuZ3RoO3JldHVybiBuPjE/ey4uLmUsc2luZ2xlVmlld05hbWU6bnVsbH06MT09PW4/ey4uLmUsc2luZ2xlVmlld05hbWU6YVswXS5uYW1lfTp2b2lkIDB9LGFzPWFzeW5jKGUsdCxhKT0+e2NvbnN0IG49YXdhaXQgbW4oKS5Ccm93c2VyLmdldEFsbEF0dGFjaGVkUGFnZXMoKSxvPW5ldyBTZXQobi5tYXAoKGU9PmUudGl0bGUpKS5maWx0ZXIoKGU9PiEhZSkpKSxyPW5ldyBTZXQobi5tYXAoKGU9PmUucGFnZUlkKSkuZmlsdGVyKChlPT4hIWUpKSksaT10Py5kZWZhdWx0UGFnZU9wdGlvbnMscz1cImVudGVycHJpc2VcIj09PWE/LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlfHxcImVudGVycHJpc2VcIj09PXQ/LmRlZmF1bHRXaW5kb3dPcHRpb25zPy53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZSxjPWF3YWl0KGFzeW5jKGUsdCxhKT0+e2lmKGEpcmV0dXJuIG9lKCk7Y29uc3Qgbj10Py53b3Jrc3BhY2VQbGF0Zm9ybT8ubmV3VGFiVXJsO2lmKG4pcmV0dXJuIG47Y29uc3Qgbz1lPy5kZWZhdWx0V2luZG93T3B0aW9ucz8ud29ya3NwYWNlUGxhdGZvcm0/Lm5ld1RhYlVybDtyZXR1cm4gb3x8dm9pZCAwfSkodCxhLHMpO3JldHVybiBQcm9taXNlLmFsbChlLm1hcCgoYXN5bmMgZT0+e2lmKFwicmVwYXJlbnRcIj09PWUubXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcilyZXR1cm57Li4uZSxsYXlvdXRDb250YWluZXJLZXk6bmEoKX07KChlLHQpPT57ZS5wYWdlSWR8fD1uYSgpLHQuaGFzKGUucGFnZUlkKSYmKGNvbnNvbGUud2FybihcIlBhZ2VJRCBjb2xsaXNpb24gZGV0ZWN0ZWQuIEFsbCBQYWdlIElEcyBzaG91bGQgYmUgdW5pcXVlLiBBIHJhbmRvbSBuZXcgcGFnZUlkIHdpbGwgYmUgZ2VuZXJhdGVkXCIpLGUucGFnZUlkPW5hKCkpLHQuYWRkKGUucGFnZUlkKX0pKGUsciksc3x8KGUudGl0bGU9WW4oZS50aXRsZSxBcnJheS5mcm9tKG8ua2V5cygpKSkpLG8uYWRkKGUudGl0bGUpLGUucGFuZWxzPy5yZWR1Y2UoKChlLHQpPT57Y29uc3QgYT1PYmplY3QudmFsdWVzKGcpO2lmKCFhLmluY2x1ZGVzKHQucG9zaXRpb24pKXRocm93IG5ldyBFcnJvcihgRW5jb3VudGVyZWQgYSBwYW5lbCB3aXRoIHVuc3VwcG9ydGVkIHBvc2l0aW9uIFwiJHt0LnBvc2l0aW9ufVwiLiBTdXBwb3J0ZWQgcG9zaXRpb25zIGFyZTogJHthLnRvU3RyaW5nKCl9YCk7aWYoMT09ZVt0LnBvc2l0aW9uXSl0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIG1vcmUgdGhhbiAxIHBhbmVsIGF0IHBvc2l0aW9uOiAke3QucG9zaXRpb259LiBPbmx5IDEgcGFuZWwgYXQgYSBnaXZlbiBwb3NpdGlvbiBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApO3JldHVybnsuLi5lLFt0LnBvc2l0aW9uXTplW3QucG9zaXRpb25dKzF9fSkse1tnLkxlZnRdOjAsW2cuUmlnaHRdOjAsW2cuVG9wXTowLFtnLkJvdHRvbV06MH0pO2NvbnN0IGE9XCJwYW5lbHNcImluIGU/ZS5wYW5lbHM6aT8ucGFuZWxzO2xldCBuPShsPWUubGF5b3V0LGQ9dD8uZGVmYXVsdFZpZXdPcHRpb25zLGZuKHsuLi5sfSwoZT0+U24oZSxkKSkpKTt2YXIgbCxkO2MmJiFuPy5zZXR0aW5ncz8ubmV3VGFiQnV0dG9uJiYobj17Li4ubixzZXR0aW5nczp7Li4ubj8uc2V0dGluZ3MsbmV3VGFiQnV0dG9uOnt1cmw6Y319fSk7cmV0dXJuey4uLmksLi4uZSxwYW5lbHM6YSYmYXdhaXQgem4oYSksbGF5b3V0Q29udGFpbmVyS2V5Om5hKCksbGF5b3V0Om4saXNMYXlvdXRDcmVhdGVkOiExfX0pKSl9LG5zPWFzeW5jKGUsdCk9Pnt0cnl7YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlVmlldyh7bmFtZTplLHVybDp0LHRhcmdldDpmaW4ubWUuaWRlbnRpdHksYm91bmRzOnt0b3A6MCxsZWZ0OjAsd2lkdGg6MCxoZWlnaHQ6MH19LGZpbi5tZS5pZGVudGl0eSl9Y2F0Y2goZSl7fX0sb3M9ZT0+e2NvbnN0IHQ9ZS5uYW1lPT09bWUuSG9tZSxhPWUubmFtZT8uc3RhcnRzV2l0aChtZS5Ib21lSW50ZXJuYWwpLG49ZS5uYW1lPy5zdGFydHNXaXRoKG1lLkJyb3dzZXJNZW51KXx8ZS5uYW1lPy5zdGFydHNXaXRoKG1lLkJyb3dzZXJTYXZlTWVudSl8fGUubmFtZT8uc3RhcnRzV2l0aChtZS5Eb2NrU2F2ZVdvcmtzcGFjZU1lbnUpO3JldHVybiF0JiYhYSYmIW59O2NvbnN0IHJzPWU9PkpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpO2FzeW5jIGZ1bmN0aW9uIGlzKGUpe3JldHVybiBlP1wiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBUC8vL3dBQUFDSDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUNSQUVBT3c9PVwiOihhd2FpdCBZKCkpLmRpc3BsYXlWaWV3VGFiRGVmYXVsdEljb24/XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiOlwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyUyMHN0eWxlJTNEJTIyYmFja2dyb3VuZC1jb2xvciUzQSUyMzdEODA4QSUyMiUyMHdpZHRoJTNEJTIyMTAlMjIlMjBoZWlnaHQlM0QlMjIxMCUyMiUyMHZpZXdCb3glM0QlMjIwJTIwMCUyMDEwJTIwMTAlMjIlMjBmaWxsJTNEJTIybm9uZSUyMiUyMHhtbG5zJTNEJTIyaHR0cCUzQSUyRiUyRnd3dy53My5vcmclMkYyMDAwJTJGc3ZnJTIyJTNFJTNDcGF0aCUyMGZpbGwtcnVsZSUzRCUyMmV2ZW5vZGQlMjIlMjBjbGlwLXJ1bGUlM0QlMjJldmVub2RkJTIyJTIwZCUzRCUyMk00LjY0NjQ4JTIwMC44NzQ5NjJDNC44NDE3NCUyMDAuNjc5NyUyMDUuMTU4MzMlMjAwLjY3OTclMjA1LjM1MzU5JTIwMC44NzQ5NjJMOS4xMjQ4MiUyMDQuNjQ2MkM5LjMyMDA5JTIwNC44NDE0NiUyMDkuMzIwMDklMjA1LjE1ODA0JTIwOS4xMjQ4MiUyMDUuMzUzM0w1LjM1MzU5JTIwOS4xMjQ1NEM1LjE1ODMzJTIwOS4zMTk4JTIwNC44NDE3NCUyMDkuMzE5OCUyMDQuNjQ2NDglMjA5LjEyNDU0TDAuODc1MjQ1JTIwNS4zNTMzQzAuNjc5OTgyJTIwNS4xNTgwNCUyMDAuNjc5OTgyJTIwNC44NDE0NiUyMDAuODc1MjQ1JTIwNC42NDYyTDQuNjQ2NDglMjAwLjg3NDk2MlpNNS4wMDAwMyUyMDEuOTM1NjJMMS45MzU5JTIwNC45OTk3NUw1LjAwMDAzJTIwOC4wNjM4OEw4LjA2NDE2JTIwNC45OTk3NUw1LjAwMDAzJTIwMS45MzU2MlolMjIlMjBmaWxsJTNEJTIyd2hpdGUlMjIlMkYlM0UlM0MlMkZzdmclM0VcIn1jb25zdCBzcz17ZGltZW5zaW9uczp7Ym9yZGVyV2lkdGg6MyxoZWFkZXJIZWlnaHQ6MzB9fTthc3luYyBmdW5jdGlvbiBjcyhlLHQsYSl7bGV0IG49ZTtjb25zdCBvPVwiZW50ZXJwcmlzZVwiPT09bi53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZXx8XCJlbnRlcnByaXNlXCI9PT10Py5kZWZhdWx0V2luZG93T3B0aW9ucz8ud29ya3NwYWNlUGxhdGZvcm0/LndpbmRvd1R5cGU7aWYobi5sYXlvdXQmJiFuLndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubGVuZ3RoKXtjb25zdCBlPWF3YWl0IG1vKCksYT17Li4uYXdhaXQgZGEoZSxuLmxheW91dCksaXNBY3RpdmU6ITB9O24ud29ya3NwYWNlUGxhdGZvcm18fD17fSxuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzPWF3YWl0IGFzKFthXSx0LG4pfXQ/LmJyb3dzZXJJY29uU2l6ZSYmKG4ud29ya3NwYWNlUGxhdGZvcm18fD17fSxuLndvcmtzcGFjZVBsYXRmb3JtLmJyb3dzZXJJY29uU2l6ZT10LmJyb3dzZXJJY29uU2l6ZSk7Y29uc3Qgcj1hPy50aGVtZXM/LlswXTtpZihuLndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubGVuZ3RoKXtjb25zdCBlPWF3YWl0IGFzKG4ud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMsdCxuKSxpPWUscz0oZT0+e2lmKCFlKXJldHVybjtsZXQgdD1lLmZpbmQoKGU9PmUuaXNBY3RpdmUpKTtyZXR1cm4hdCYmZS5sZW5ndGg+MCYmKGVbMF0uaXNBY3RpdmU9ITAsdD1lWzBdKSx0fSkoaSk7aWYoaS5mb3JFYWNoKChlPT57ZS5wYWdlSWQhPT1zPy5wYWdlSWQmJihlLmlzQWN0aXZlPSExKX0pKSxhd2FpdCBKbihpKSxuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzPWUsbj1lYSh7fSxhd2FpdChhc3luYyBlPT4oe2NvbnRleHRNZW51T3B0aW9uczp7ZW5hYmxlZDohMX0sZXhwZXJpbWVudGFsOntzaG93RmF2aWNvbnM6ITAsZGVmYXVsdEZhdmljb25Vcmw6YXdhaXQgaXMoZSl9LHZpZXdWaXNpYmlsaXR5OntzaG93Vmlld3NPblNwbGl0dGVyRHJhZzp7ZW5hYmxlZDohMH0sc2hvd1ZpZXdzT25XaW5kb3dSZXNpemU6e2VuYWJsZWQ6ITB9fX0pKShvKSx0Py5kZWZhdWx0V2luZG93T3B0aW9ucyxuLGF3YWl0KGFzeW5jIGU9Pih7YmFja2dyb3VuZFRocm90dGxpbmc6ITAsdXJsOmF3YWl0IHJlKGUsITApLGNvbnRleHRNZW51OiEwLGNsb3NlT25MYXN0Vmlld1JlbW92ZWQ6ITEscGVybWlzc2lvbnM6e1N5c3RlbTp7b3BlblVybFdpdGhCcm93c2VyOntlbmFibGVkOiEwLHByb3RvY29sczpbXCJtYWlsdG9cIl19fX19KSkobykpLHMubGF5b3V0PWVhKHMubGF5b3V0LHNzKSxhc3luYyBmdW5jdGlvbihlKXtpZihlLmljb258fGUudGFza2Jhckljb24pe2NvbnN0IHQ9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCksYT1hd2FpdChhd2FpdCB0LmdldFdpbmRvdygpKS5nZXRPcHRpb25zKCk7ZS50YXNrYmFySWNvbkdyb3VwfHw9YS50YXNrYmFySWNvbkdyb3VwfHxmaW4ubWUuaWRlbnRpdHkudXVpZH1pZihlLndvcmtzcGFjZVBsYXRmb3JtLmljb24paWYoXCJvYmplY3RcIj09dHlwZW9mIGUud29ya3NwYWNlUGxhdGZvcm0uaWNvbil7Y29uc3QgdD13aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIik7ZS5pY29uPXQubWF0Y2hlcz9lLndvcmtzcGFjZVBsYXRmb3JtLmljb24uZGFyazplLndvcmtzcGFjZVBsYXRmb3JtLmljb24ubGlnaHR9ZWxzZSBlLmljb249ZS53b3Jrc3BhY2VQbGF0Zm9ybS5pY29ufShuKSwhbi5iYWNrZ3JvdW5kQ29sb3ImJnIpaWYoXCJwYWxldHRlXCJpbiByKW4uYmFja2dyb3VuZENvbG9yPXI/LnBhbGV0dGU/LmJhY2tncm91bmQyfHxyPy5wYWxldHRlPy5iYWNrZ3JvdW5kUHJpbWFyeTtlbHNle2NvbnN0IGU9YS5zZWxlY3RlZFNjaGVtZT09PWsuRGFya3x8YS5zZWxlY3RlZFNjaGVtZT09PWsuU3lzdGVtJiZ3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIik/cj8ucGFsZXR0ZXMuZGFyazpyPy5wYWxldHRlcy5saWdodDtuLmJhY2tncm91bmRDb2xvcj1lPy5iYWNrZ3JvdW5kMnx8ZT8uYmFja2dyb3VuZFByaW1hcnl9bj1EZShuLCEwKTtjb25zdCBjPWF3YWl0IHJlKG8sITApO2lmKGMmJihuLnVybD1jKSxuLmxheW91dD1zLmxheW91dCxuLmxheW91dFNuYXBzaG90PSgoZSx0KT0+KHtsYXlvdXRzOmUucmVkdWNlKCgoZSxhKT0+e2lmKCFhLmlzQWN0aXZlKXtpZighdClyZXR1cm4gZTtpZighdHMoYSkuc2luZ2xlVmlld05hbWUpcmV0dXJuIGV9cmV0dXJuIGVbYS5sYXlvdXRDb250YWluZXJLZXldPWEubGF5b3V0LGV9KSx7fSkscGFnZXM6ZX0pKShuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzLG8pLG4ud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZT1uLndvcmtzcGFjZVBsYXRmb3JtLndpbmRvd1R5cGU/P0MuQnJvd3NlcixvKXtjb25zdCBlPWF3YWl0IG9lKCk7bi53b3Jrc3BhY2VQbGF0Zm9ybS5uZXdQYWdlVXJsPWUsbi53b3Jrc3BhY2VQbGF0Zm9ybS5uZXdUYWJVcmw9ZSxuLmxheW91dCYmKG4ubGF5b3V0LmRpbWVuc2lvbnMuYm9yZGVyV2lkdGg9NCxuLmxheW91dC5kaW1lbnNpb25zLmhlYWRlckhlaWdodD0yOCksbi5uYW1lPW4ubmFtZXx8YCR7bWUuQnJvd3NlcldpbmRvd30tJHtuYSgpfWAsKGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IG5lKCksYT1tZS5Ccm93c2VyQWRkcmVzc1NlYXJjaFByZWZpeCtlLm5hbWUsbj10K3ouQnJvd3NlclBvcHVwTWVudUFkZHJlc3NTZWFyY2hSZXN1bHRzVmlldyxvPVtdLHI9bnMoYSxuKTtvLnB1c2gocik7Y29uc3QgaT1tZS5BSUNvbXBhbmlvblByZWZpeCtlLm5hbWUse3VybDpzLGVuYWJsZWQ6Y309S24oKTtpZihjKXtjb25zdCBlPW5zKGkscyk7by5wdXNoKGUpfWF3YWl0IFByb21pc2UuYWxsKG8pfSkobik7Y29uc3R7ZW5hYmxlZDp0fT1LbigpO24ud29ya3NwYWNlUGxhdGZvcm0uaXNBaUVuYWJsZWQ9dCxuLm1pbldpZHRoPU1hdGgubWF4KDY1NCxuLm1pbldpZHRoPz8wKSxuLm1pbkhlaWdodD1NYXRoLm1heCg0ODgsbi5taW5IZWlnaHQ/PzApfWVsc2Ugbi5taW5XaWR0aD1NYXRoLm1heCgyMzIsbi5taW5XaWR0aD8/MCksZnVuY3Rpb24oZSl7Y29uc3QgdD1lLndvcmtzcGFjZVBsYXRmb3JtPy52aWV3VGFiRGltZW5zaW9ucyxhPWUud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VUYWJEaW1lbnNpb25zLG49L15bMC05XSsocHh8JSkkLztpZih0KXtpZih0Lm1pbldpZHRoJiYhbi50ZXN0KHQubWluV2lkdGgpKXRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgdmlld1RhYkRpbWVuc2lvbnMubWluIHZhbHVlIFwiJHt0Lm1pbldpZHRofVwiIGlzIG5vdCBpbiBhIHN1cHBvcnRlZCBmb3JtYXQuYCk7aWYodC5tYXhXaWR0aCYmIW4udGVzdCh0Lm1heFdpZHRoKSl0aHJvdyBuZXcgRXJyb3IoYFByb3ZpZGVkIHZpZXdUYWJEaW1lbnNpb25zLm1heCB2YWx1ZSBcIiR7dC5tYXhXaWR0aH1cIiBpcyBub3QgaW4gYSBzdXBwb3J0ZWQgZm9ybWF0LmApfWlmKGEpe2lmKGEubWluV2lkdGgmJiFuLnRlc3QoYS5taW5XaWR0aCkpdGhyb3cgbmV3IEVycm9yKGBQcm92aWRlZCBwYWdlVGFiRGltZW5zaW9ucy5taW4gdmFsdWUgXCIke2EubWluV2lkdGh9XCIgaXMgbm90IGluIGEgc3VwcG9ydGVkIGZvcm1hdC5gKTtpZihhLm1heFdpZHRoJiYhbi50ZXN0KGEubWF4V2lkdGgpKXRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgcGFnZVRhYkRpbWVuc2lvbnMubWF4IHZhbHVlIFwiJHthLm1heFdpZHRofVwiIGlzIG5vdCBpbiBhIHN1cHBvcnRlZCBmb3JtYXQuYCl9fShuKX1yZXR1cm4gbi5jb3JuZXJSb3VuZGluZyYmZGVsZXRlIG4uY29ybmVyUm91bmRpbmcsbi5uYW1lfHxuLmxheW91dFNuYXBzaG90P24uY29udGV4dE1lbnVPcHRpb25zPy50ZW1wbGF0ZT8ubGVuZ3RoPjA/bi5jb250ZXh0TWVudU9wdGlvbnMudGVtcGxhdGU9bi5jb250ZXh0TWVudU9wdGlvbnMudGVtcGxhdGUuZmlsdGVyKChlPT5cInByaW50XCIhPT1lKSk6bi5jb250ZXh0TWVudU9wdGlvbnM9e3RlbXBsYXRlOltdLGVuYWJsZWQ6ITF9Om4ubmFtZT1gJHttZS5DbGFzc2ljV2luZG93fS0ke25hKCl9YCxuLndvcmtzcGFjZVBsYXRmb3JtJiZhJiYobi53b3Jrc3BhY2VQbGF0Zm9ybS5fdGhlbWVEYXRhPWEpLG59Y29uc3QgbHM9YXN5bmMoZSx0KT0+e2NvbnN0IGE9e3V1aWQ6dC51dWlkLG5hbWU6dC5uYW1lfTthd2FpdCBIbyhhLGUudGl0bGU/P2F3YWl0IERpKCksZS5zaG91bGRDZW50ZXJPbk1vbml0b3IpJiZmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5xdWl0KCl9LGRzPWFzeW5jKGUsdCk9Pntjb25zdCBhPW1uKCksbj1hd2FpdCBhLkJyb3dzZXIuZ2V0TGFzdEZvY3VzZWRXaW5kb3coKTtpZighbilyZXR1cm47Y29uc3Qgbz1hLkJyb3dzZXIud3JhcFN5bmMobikse3RpdGxlOnIsZGVzY3JpcHRpb246aX09ZSxzPWF3YWl0IHpvKHt0aXRsZTpyLGRlc2NyaXB0aW9uOmksaWRlbnRpdHk6by5pZGVudGl0eX0pO3MmJm8uX3NlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZSh7aWRlbnRpdHk6dCxyZXNwb25zZTpzfSl9O2FzeW5jIGZ1bmN0aW9uIHVzKGUsdCxhKXtjb25zdCBuPWUubWFuaWZlc3RVcmw/YXdhaXQgdCh7bWFuaWZlc3RVcmw6ZS5tYW5pZmVzdFVybH0sYSk6dm9pZCAwO2lmKG4/LmludGVyb3AmJmUuaW50ZXJvcCl7Y29uc3QgdD17Li4uZSwuLi5uLGludGVyb3A6ZS5pbnRlcm9wfTtyZXR1cm4gZGVsZXRlIHQubWFuaWZlc3RVcmwsdH1yZXR1cm4gZX1jb25zdCBwcz1lPT57Y29uc3QgdD1ycyhlKTtyZXR1cm4gdC5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhPy5icm93c2VyTmF2aWdhdGlvbkJ1dHRvbnMmJih0LndvcmtzcGFjZVBsYXRmb3JtPXsuLi50LndvcmtzcGFjZVBsYXRmb3JtLGJyb3dzZXJOYXZpZ2F0aW9uQnV0dG9uczp0Ll9pbnRlcm5hbFdvcmtzcGFjZURhdGEuYnJvd3Nlck5hdmlnYXRpb25CdXR0b25zfSxkZWxldGUgdC5faW50ZXJuYWxXb3Jrc3BhY2VEYXRhLmJyb3dzZXJOYXZpZ2F0aW9uQnV0dG9ucyksdH0sd3M9ZT0+e2NvbnN0IHQ9cnMoZSk7cmV0dXJuIHQud29ya3NwYWNlUGxhdGZvcm0mJih0Ll9pbnRlcm5hbFdvcmtzcGFjZURhdGE9ey4uLnQuX2ludGVybmFsV29ya3NwYWNlRGF0YSwuLi50LndvcmtzcGFjZVBsYXRmb3JtfSxkZWxldGUgdC53b3Jrc3BhY2VQbGF0Zm9ybSksdH0sZ3M9e3JlbG9hZDpbe2tleXM6XCJDdHJsK1JcIixwcmV2ZW50RGVmYXVsdDohMH1dLGJhY2s6W3trZXlzOlwiQWx0K0xlZnRcIixwcmV2ZW50RGVmYXVsdDohMH1dLGZvcndhcmQ6W3trZXlzOlwiQWx0K1JpZ2h0XCIscHJldmVudERlZmF1bHQ6ITB9XX0saHM9e3JlbG9hZDpbe2tleXM6XCJDbWQrUlwiLHByZXZlbnREZWZhdWx0OiEwfV0sYmFjazpbe2tleXM6XCJDbWQrW1wiLHByZXZlbnREZWZhdWx0OiEwfSx7a2V5czpcIkNtZCtMZWZ0XCIscHJldmVudERlZmF1bHQ6ITB9XSxmb3J3YXJkOlt7a2V5czpcIkNtZCtdXCIscHJldmVudERlZmF1bHQ6ITB9LHtrZXlzOlwiQ21kK1JpZ2h0XCIscHJldmVudERlZmF1bHQ6ITB9XX0sbXM9YXN5bmMoKT0+YXdhaXQgWHIoKT9nczpocyxrcz0oZSx0KT0+e2NvbnN0IGE9ZmluLlZpZXcud3JhcFN5bmMoZSk7aWYoIXQpcmV0dXJuO2NvbnN0IG49ZT0+eyhhc3luYyhlLHQsYSk9PntpZihcImtleURvd25cIiE9PWEuaW5wdXRUeXBlKXJldHVybjtjb25zdCBuPWF3YWl0KGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGUuZ2V0Q3VycmVudFdpbmRvdygpLGE9YXdhaXQgdC5nZXRPcHRpb25zKCksbj1hLndvcmtzcGFjZVBsYXRmb3JtPy5uYXZpZ2F0aW9uQnV0dG9ucztyZXR1cm4gbi5lbmFibGVkJiYhbi5ob3RrZXlzRGlzYWJsZWR9KShlKSxvPWF3YWl0IFhyKCk7aWYobil7aWYodC5yZWxvYWQpe2NvbnN0IG49YS5jdHJsS2V5JiYhYS5hbHRLZXkmJiFhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcInJcIj09PWEua2V5LHI9IWEuY3RybEtleSYmIWEuYWx0S2V5JiZhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcInJcIj09PWEua2V5OyhvP246cikmJnQ/LnJlbG9hZCYmKGUucmVsb2FkKCksanQoe3R5cGU6XCJWaWV3XCIsYWN0aW9uOlwiUmVsb2FkXCIsdmFsdWU6ZS5pZGVudGl0eS5uYW1lfSkpfWlmKHQuYmFjayl7Y29uc3Qgbj0hYS5jdHJsS2V5JiZhLmFsdEtleSYmIWEubWV0YUtleSYmIWEuc2hpZnRLZXkmJlwiQXJyb3dMZWZ0XCI9PT1hLmtleSxyPSFhLmN0cmxLZXkmJiFhLmFsdEtleSYmYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmXCJBcnJvd0xlZnRcIj09PWEua2V5LGk9IWEuY3RybEtleSYmIWEuYWx0S2V5JiZhLm1ldGFLZXkmJiFhLnNoaWZ0S2V5JiZcIltcIj09PWEua2V5OyhvP246cnx8aSkmJnQ/LmJhY2smJihlLm5hdmlnYXRlQmFjaygpLGp0KHt0eXBlOlwiVmlld1wiLGFjdGlvbjpcIkJhY2tcIix2YWx1ZTplLmlkZW50aXR5Lm5hbWV9KSl9aWYodC5mb3J3YXJkKXtjb25zdCBuPSFhLmN0cmxLZXkmJmEuYWx0S2V5JiYhYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmXCJBcnJvd1JpZ2h0XCI9PT1hLmtleSxyPSFhLmN0cmxLZXkmJiFhLmFsdEtleSYmYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmXCJBcnJvd1JpZ2h0XCI9PT1hLmtleSxpPSFhLmN0cmxLZXkmJiFhLmFsdEtleSYmYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmXCJdXCI9PT1hLmtleTsobz9uOnJ8fGkpJiZ0Py5mb3J3YXJkJiYoZS5uYXZpZ2F0ZUZvcndhcmQoKSxqdCh7dHlwZTpcIlZpZXdcIixhY3Rpb246XCJGb3J3YXJkXCIsdmFsdWU6ZS5pZGVudGl0eS5uYW1lfSkpfX19KShhLHQsZSl9O2EuYWRkTGlzdGVuZXIoXCJob3RrZXlcIixuKSxhLm9uY2UoXCJkZXN0cm95ZWRcIiwoKCk9PnthLnJlbW92ZUxpc3RlbmVyKFwiaG90a2V5XCIsbil9KSl9LGJzPShlLHQpPT5ycyhlKS5tYXAoKGU9PihcImNvbXBvbmVudFN0YXRlXCJpbiBlP2UuY29tcG9uZW50U3RhdGU9dChlLmNvbXBvbmVudFN0YXRlKTpcImNvbnRlbnRcImluIGUmJihlLmNvbnRlbnQ9YnMoZS5jb250ZW50LHQpKSxlKSkpLHlzPWU9PntpZihlKXtjb25zdCB0PXJzKGUpO3JldHVybiB0LmNvbnRlbnQmJih0LmNvbnRlbnQ9YnModC5jb250ZW50LHBzKSksdH1yZXR1cm4gZX0sZnM9ZT0+e2lmKGUpe2NvbnN0IHQ9cnMoZSk7cmV0dXJuIHQuY29udGVudCYmKHQuY29udGVudD1icyh0LmNvbnRlbnQsd3MpKSx0fXJldHVybiBlfTthc3luYyBmdW5jdGlvbiBTcyh7YXBwOmUsdGFyZ2V0OnR9KXtjb25zdCBhPWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO3N3aXRjaChlLm1hbmlmZXN0VHlwZSl7Y2FzZSBsLlNuYXBzaG90OnJldHVybiBhLmFwcGx5U25hcHNob3QoZS5tYW5pZmVzdCk7Y2FzZSBsLlZpZXc6cmV0dXJuIGFzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3QgYT1maW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKTtpZihcInZpZXdcIj09PXQuZW50aXR5VHlwZSl7Y29uc3QgYT1maW4uVmlldy53cmFwU3luYyh0KSxuPWF3YWl0IGEuZ2V0UGFyZW50TGF5b3V0KCk7cmV0dXJuIGF3YWl0IG4ucmVwbGFjZVZpZXcodCx7bWFuaWZlc3RVcmw6ZS5tYW5pZmVzdCx1cmw6dm9pZCAwLHRhcmdldDp2b2lkIDB9KSxhLmRlc3Ryb3koKX1yZXR1cm4gYS5jcmVhdGVWaWV3KHtuYW1lOnZvaWQgMCx1cmw6dm9pZCAwLG1hbmlmZXN0VXJsOmUubWFuaWZlc3QsdGFyZ2V0OnZvaWQgMH0pfShlLHQpO2Nhc2UgbC5FeHRlcm5hbDpyZXR1cm4gZmluLlN5c3RlbS5sYXVuY2hFeHRlcm5hbFByb2Nlc3Moe3BhdGg6ZS5tYW5pZmVzdCx1dWlkOmUuYXBwSWR9KTtkZWZhdWx0OnJldHVybiBmaW4uQXBwbGljYXRpb24uc3RhcnRGcm9tTWFuaWZlc3QoZS5tYW5pZmVzdCl9fWxldCB2cztjb25zdCBQcz0oKT0+e2lmKCF2cyl7Y29uc3QgZT1qZShgJHtcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluJiZmaW4ubWUuaWRlbnRpdHkudXVpZH0tZW50ZXJwcmlzZS1hcHAtZGlyZWN0b3J5YCk7dnM9ZSgpfXJldHVybiB2c307YXN5bmMgZnVuY3Rpb24gQ3MoZSl7aWYoIWF3YWl0IFV0KGUuaWRlbnRpdHkpKXJldHVybltdO3JldHVybihhd2FpdCBQcygpKS5kaXNwYXRjaChDYS5HZXRBcHBzLGUucmVxKX1hc3luYyBmdW5jdGlvbiBNcyhlKXtpZighYXdhaXQgVXQoZS5pZGVudGl0eSkpcmV0dXJuW107cmV0dXJuKGF3YWl0IFBzKCkpLmRpc3BhdGNoKENhLkdldFNlYXJjaFByb3ZpZGVycyxlKX1hc3luYyBmdW5jdGlvbiB4cyhlKXtyZXR1cm4oYXdhaXQgUHMoKSkuZGlzcGF0Y2goQ2EuR2V0Q3VyYXRlZENvbnRlbnQsZSl9YXN5bmMgZnVuY3Rpb24gSXMoZSl7cmV0dXJuKGF3YWl0IFBzKCkpLmRpc3BhdGNoKENhLkdldFJlY2VudGx5VmlzaXRlZCxlKX1hc3luYyBmdW5jdGlvbiBBcyhlKXtjb25zdCB0PShhd2FpdCBDZSgpKS5tYXAoKGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IGUuZ2V0T3B0aW9ucygpO3Qud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzJiZ0LmxheW91dCYmYXdhaXQoYXN5bmMgZT0+KGF3YWl0IFNhKGUpKS5kaXNwYXRjaChBYS5VcGRhdGVQYWdlc1dpbmRvd09wdGlvbnMpKShlLmlkZW50aXR5KX0pKTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwodCksZT9lKCk6Y2EoKX1sZXQgV3M9W107Y29uc3QgRHM9KCk9PldzO2FzeW5jIGZ1bmN0aW9uIFRzKGUpe2NvbnN0IHQ9ZT0+e2lmKCFlLmluY2x1ZGVzKFwiI1wiKSYmIWUuaW5jbHVkZXMoXCJyZ2JcIikmJiFlLmluY2x1ZGVzKFwiaHNsXCIpKXRocm93IG5ldyBFcnJvcihcIkJhY2tncm91bmQgcHJpbWFyeSBjb2xvciBpcyBub3QgdGhlIHJpZ2h0IGZvcm1hdC5cIil9O2U/LmZvckVhY2goKGU9PntcInBhbGV0dGVcImluIGUmJnQoZS5wYWxldHRlLmJhY2tncm91bmRQcmltYXJ5KSxcInBhbGV0dGVzXCJpbiBlJiYodChlLnBhbGV0dGVzLmRhcmsuYmFja2dyb3VuZFByaW1hcnkpLHQoZS5wYWxldHRlcy5saWdodC5iYWNrZ3JvdW5kUHJpbWFyeSkpfSkpO2NvbnN0IGE9KChlLHQpPT57aWYoIWV8fCFlWzBdKXtjb25zdHtkYXJrOmUsbGlnaHQ6YX09ZHRbMF0ucGFsZXR0ZXM7cmV0dXJuIHJuLnNldFBhbGV0dGVzKHtkYXJrOmUsbGlnaHQ6YX0sdCksZHR9e2NvbnN0IGE9ZVswXTtpZihcImRlZmF1bHRcImluIGEmJmEuZGVmYXVsdCYmKGEuZGVmYXVsdCxybi5zZXRUaGVtZURlZmF1bHRTY2hlbWUoYS5kZWZhdWx0KSksXCJwYWxldHRlXCJpbiBhKXtjb25zdHtwYWxldHRlOm59PWEsbz17Li4ubHQsLi4ubn07cmV0dXJuIHJuLnNldFBhbGV0dGVzKHtkYXJrOm8sbGlnaHQ6b30sdCksYS5wYWxldHRlPW8sZX1pZihcInBhbGV0dGVzXCJpbiBhKXtjb25zdHtkYXJrOm4sbGlnaHQ6b309YS5wYWxldHRlcyxyPXsuLi5sdCwuLi5ufSxpPXsuLi5jdCwuLi5vfTtyZXR1cm4gcm4uc2V0UGFsZXR0ZXMoe2Rhcms6cixsaWdodDppfSx0KSxhLnBhbGV0dGVzPXtkYXJrOnIsbGlnaHQ6aX0sZX19fSkoZSxhd2FpdCBYcigpKTtXcz1hfWNvbnN0IEJzPShlLHQpPT5hPT57Y29uc3Qgbj1udWxsIT09ZTtyZXR1cm4gY2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmlzV29ya3NwYWNlUGxhdGZvcm09KCk9Pih7aXNXb3Jrc3BhY2VQbGF0Zm9ybTohMCxpc0Jyb3dzZXJJbml0aWFsaXplZDohIWUsYW5hbHl0aWNzOntpc1N1cHBvcnRlZDohMH19KSx0aGlzLmRldGFjaFBhZ2VzRnJvbVdpbmRvdz1sbyx0aGlzLmdldEFsbEF0dGFjaGVkUGFnZXM9WG4sdGhpcy5nZXRQYWdlc0ZvcldpbmRvdz1wbyx0aGlzLmdldFBhZ2VGb3JXaW5kb3c9d28sdGhpcy5tYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsPVBvLHRoaXMubGF1bmNoQXBwPVNzLHRoaXMuc2F2ZVBhZ2U9aW8sdGhpcy5zYXZlV29ya3NwYWNlPWVyLHRoaXMuY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWw9bm8sdGhpcy51cGRhdGVTYXZlZFBhZ2VJbnRlcm5hbD1ybyx0aGlzLmRlbGV0ZVNhdmVkUGFnZUludGVybmFsPW9vLHRoaXMucmVvcmRlclBhZ2VzRm9yV2luZG93PWdvLHRoaXMuZ2V0VW5pcXVlUGFnZVRpdGxlPW1vLHRoaXMudXBkYXRlUGFnZUZvcldpbmRvdz1jbyx0aGlzLmdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1Dcix0aGlzLmdldFRoZW1lcz1Ecyx0aGlzLmludm9rZUN1c3RvbUFjdGlvbkludGVybmFsPVRyLHRoaXMucmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPWxzLHRoaXMuZ2V0Q3VycmVudFdvcmtzcGFjZT1Zbyx0aGlzLnNldEFjdGl2ZVdvcmtzcGFjZT1qbyx0aGlzLmdldExhbmd1YWdlUmVzb3VyY2VzSW50ZXJuYWw9YnIsdGhpcy5nZXRQYWdlQnlWaWV3SWRlbnRpdHk9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgZmluLlBsYXRmb3JtLkxheW91dC5nZXRMYXlvdXRCeVZpZXdJZGVudGl0eShlKSxhPXQuaWRlbnRpdHk7aWYoIShcImxheW91dE5hbWVcImluIGEpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgbGF5b3V0J3MgaWRlbnRpdHlcIik7Y29uc3Qgbj1hd2FpdCBtbigpLkJyb3dzZXIud3JhcFN5bmModC5pZGVudGl0eSkuZ2V0UGFnZXMoKSxvPW4uZmluZEluZGV4KChlPT5lLmxheW91dE5hbWU9PT1hLmxheW91dE5hbWUpKTtpZigtMT09PW8pdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBwYWdlJ3MgaW5kZXhcIik7cmV0dXJue3dpbmRvd0lkZW50aXR5OntuYW1lOnQuaWRlbnRpdHkubmFtZSx1dWlkOnQuaWRlbnRpdHkudXVpZH0scGFnZTpuW29dLHBhZ2VJbmRleDpvfX0sdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbD10aGlzLm9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnU9dGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnUuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkUGFnZXM9dGhpcy5nZXRTYXZlZFBhZ2VzLmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFBhZ2U9dGhpcy5nZXRTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkUGFnZT10aGlzLmNyZWF0ZVNhdmVkUGFnZS5iaW5kKHRoaXMpLHRoaXMudXBkYXRlU2F2ZWRQYWdlPXRoaXMudXBkYXRlU2F2ZWRQYWdlLmJpbmQodGhpcyksdGhpcy5kZWxldGVTYXZlZFBhZ2U9dGhpcy5kZWxldGVTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVBhZ2VDaGFuZ2VzPXRoaXMuaGFuZGxlUGFnZUNoYW5nZXMuYmluZCh0aGlzKSx0aGlzLmF0dGFjaFBhZ2VzVG9XaW5kb3c9dGhpcy5hdHRhY2hQYWdlc1RvV2luZG93LmJpbmQodGhpcyksdGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5WaWV3VGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLm9wZW5QYWdlVGFiQ29udGV4dE1lbnU9dGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFdvcmtzcGFjZXM9dGhpcy5nZXRTYXZlZFdvcmtzcGFjZXMuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkV29ya3NwYWNlc01ldGFkYXRhPXRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2VzTWV0YWRhdGEuYmluZCh0aGlzKSx0aGlzLmdldFNhdmVkV29ya3NwYWNlPXRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmNyZWF0ZVNhdmVkV29ya3NwYWNlPXRoaXMuY3JlYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLnVwZGF0ZVNhdmVkV29ya3NwYWNlPXRoaXMudXBkYXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmRlbGV0ZVNhdmVkV29ya3NwYWNlPXRoaXMuZGVsZXRlU2F2ZWRXb3Jrc3BhY2UuYmluZCh0aGlzKSx0aGlzLmdldEN1cnJlbnRXb3Jrc3BhY2U9dGhpcy5nZXRDdXJyZW50V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5nZXREb2NrUHJvdmlkZXJDb25maWc9dGhpcy5nZXREb2NrUHJvdmlkZXJDb25maWcuYmluZCh0aGlzKSx0aGlzLnNhdmVEb2NrUHJvdmlkZXJDb25maWc9dGhpcy5zYXZlRG9ja1Byb3ZpZGVyQ29uZmlnLmJpbmQodGhpcyksdGhpcy5hcHBseVdvcmtzcGFjZT10aGlzLmFwcGx5V29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5yZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWw9dGhpcy5yZXN0b3JlTGFzdFNhdmVkV29ya3NwYWNlSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLnNldEFjdGl2ZVdvcmtzcGFjZT10aGlzLnNldEFjdGl2ZVdvcmtzcGFjZS5iaW5kKHRoaXMpLHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudT10aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnUuYmluZCh0aGlzKSx0aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD10aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0U2VsZWN0ZWRTY2hlbWU9dGhpcy5nZXRTZWxlY3RlZFNjaGVtZS5iaW5kKHRoaXMpLHRoaXMuc2V0U2VsZWN0ZWRTY2hlbWU9dGhpcy5zZXRTZWxlY3RlZFNjaGVtZS5iaW5kKHRoaXMpLHRoaXMuYW5hbHl0aWNzSW50ZXJuYWw9dGhpcy5hbmFseXRpY3NJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuaGFuZGxlQW5hbHl0aWNzPXRoaXMuaGFuZGxlQW5hbHl0aWNzLmJpbmQodGhpcyksdGhpcy5nZXRMYW5ndWFnZT10aGlzLmdldExhbmd1YWdlLmJpbmQodGhpcyksdGhpcy5zZXRMYW5ndWFnZT10aGlzLnNldExhbmd1YWdlLmJpbmQodGhpcyksdGhpcy5oYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZT10aGlzLmhhbmRsZVNhdmVNb2RhbE9uUGFnZUNsb3NlLmJpbmQodGhpcyksdGhpcy5zaG91bGRQYWdlQ2xvc2U9dGhpcy5zaG91bGRQYWdlQ2xvc2UuYmluZCh0aGlzKSx0aGlzLnNob3VsZFdpbmRvd0Nsb3NlPXRoaXMuc2hvdWxkV2luZG93Q2xvc2UuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVBhZ2VzQW5kV2luZG93Q2xvc2U9dGhpcy5oYW5kbGVQYWdlc0FuZFdpbmRvd0Nsb3NlLmJpbmQodGhpcyksdGhpcy5zZXRBY3RpdmVQYWdlPXRoaXMuc2V0QWN0aXZlUGFnZS5iaW5kKHRoaXMpLHRoaXMuaGFuZGxlUGFnZUNoYW5nZXM9dGhpcy5oYW5kbGVQYWdlQ2hhbmdlcy5iaW5kKHRoaXMpLHRoaXMuY29weVBhZ2U9dGhpcy5jb3B5UGFnZS5iaW5kKHRoaXMpLHRoaXMuYWRkUGFnZT10aGlzLmFkZFBhZ2UuYmluZCh0aGlzKSx0aGlzLmFkZERlZmF1bHRQYWdlPXRoaXMuYWRkRGVmYXVsdFBhZ2UuYmluZCh0aGlzKSx0aGlzLm1hcmtVbnNhdmVkUGFnZXNBc1NhdmVkSW50ZXJuYWw9dGhpcy5tYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsLmJpbmQodGhpcyksdGhpcy50cmFja1JlbW92ZWRUYWJJbnRlcm5hbD10aGlzLnRyYWNrUmVtb3ZlZFRhYkludGVybmFsLmJpbmQodGhpcyksdGhpcy5yZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsPXRoaXMucmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMudHJhY2tWaXNpdGVkU2l0ZUludGVybmFsPXRoaXMudHJhY2tWaXNpdGVkU2l0ZUludGVybmFsLmJpbmQodGhpcyksdGhpcy5nZXRSZWNlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPXRoaXMuZ2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsPXRoaXMuZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsLmJpbmQodGhpcyksdGhpcy5zZWFyY2hTaXRlc0ludGVybmFsPXRoaXMuc2VhcmNoU2l0ZXNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWw9dGhpcy5nZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbD10aGlzLmdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLmhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWw9dGhpcy5oYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsLmJpbmQodGhpcyksdGhpcy5yZWZyZXNoQm9va21hcmtzSW50ZXJuYWw9dGhpcy5yZWZyZXNoQm9va21hcmtzSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLmxhdW5jaEJvb2ttYXJrSW50ZXJuYWw9dGhpcy5sYXVuY2hCb29rbWFya0ludGVybmFsLmJpbmQodGhpcyksdGhpcy5nZXROb3RpZmljYXRpb25zQ29uZmlnPXRoaXMuZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZy5iaW5kKHRoaXMpLHRoaXMudXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsPXRoaXMudXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsLmJpbmQodGhpcyksdGhpcy51cGRhdGVDb250ZW50TWVudUludGVybmFsPXRoaXMudXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMubGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw9dGhpcy5sYXVuY2hEb2NrRW50cnlJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuc2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWw9dGhpcy5zZXREb2NrRmF2b3JpdGVzT3JkZXJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMubmF2aWdhdGVDb250ZW50TWVudUludGVybmFsPXRoaXMubmF2aWdhdGVDb250ZW50TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5zZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsPXRoaXMuc2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsPXRoaXMuZ2V0RG9ja1dvcmtzcGFjZXNDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsPXRoaXMuaGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMucmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWw9dGhpcy5yZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuYWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWw9dGhpcy5hZGREb2NrRmF2b3JpdGVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMuZm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbD10aGlzLmZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLnNlbmRVcGRhdGVWZXJzaW9uTW9kYWxSZXNwb25zZUludGVybmFsPXRoaXMuc2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLnJlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2dJbnRlcm5hbD1scy5iaW5kKHRoaXMpLHRoaXMuc2hvd1VwZGF0ZVZlcnNpb25Nb2RhbEludGVybmFsPWRzLmJpbmQodGhpcyl9YXN5bmMgYXBwbHlXb3Jrc3BhY2UoLi4uZSl7cmV0dXJuIFpvLmFwcGx5KHRoaXMsZSl9YXN5bmMgcmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZUludGVybmFsKC4uLmUpe3JldHVybiBxby5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNuYXBzaG90KCl7Y29uc3QgZT1uP2F3YWl0IEFzKChhc3luYygpPT5jYShhd2FpdCBzdXBlci5nZXRTbmFwc2hvdCh2b2lkIDAsZmluLm1lLmlkZW50aXR5KSkpKTphd2FpdCBjYShhd2FpdCBzdXBlci5nZXRTbmFwc2hvdCh2b2lkIDAsZmluLm1lLmlkZW50aXR5KSk7bGV0IHQ9ey4uLmUsd2luZG93czplLndpbmRvd3MuZmlsdGVyKG9zKS5tYXAoc2EpfTtyZXR1cm4gdD0oZT0+e2NvbnN0IHQ9cnMoZSk7cmV0dXJuIHQud2luZG93cy5mb3JFYWNoKChlPT57ZS5sYXlvdXQmJihlLmxheW91dD15cyhlLmxheW91dCkpLGUud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5mb3JFYWNoKChlPT57ZT8ubGF5b3V0JiYoZS5sYXlvdXQ9eXMoZS5sYXlvdXQpKX0pKX0pKSx0fSkodCksdH1hc3luYyBnZXRWaWV3U25hcHNob3QoZSl7bGV0IHQ9YXdhaXQgc3VwZXIuZ2V0Vmlld1NuYXBzaG90KGUpO3JldHVybiB0PXBzKHQpLHR9YXN5bmMgYXBwbHlTbmFwc2hvdCh7c25hcHNob3Q6ZSxvcHRpb25zOnR9KXtsZXQgYT1lO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1hd2FpdCBzdXBlci5mZXRjaE1hbmlmZXN0KHttYW5pZmVzdFVybDphfSxmaW4ubWUuaWRlbnRpdHkpKTtjb25zdCBvPWZ1bmN0aW9uKGUpe2Zvcihjb25zdCB0IG9mIGUud2luZG93cylpZih0LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubGVuZ3RoKXJldHVybiEwO3JldHVybiExfShhKTtpZighbiYmbyl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNuYXBzaG90IGNhbm5vdCBiZSBhcHBsaWVkIGFzIHRoZSBwbGF0Zm9ybSBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRob3V0IHRoZSBicm93c2VyLlwiKTtyZXR1cm4gYT0oZT0+e2NvbnN0IHQ9cnMoZSk7cmV0dXJuIHQud2luZG93cy5mb3JFYWNoKChlPT57ZS5sYXlvdXQ9ZnMoZS5sYXlvdXQpLGUud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzPy5mb3JFYWNoKChlPT57ZS5sYXlvdXQ9ZnMoZS5sYXlvdXQpfSkpfSkpLHR9KShhKSxzdXBlci5hcHBseVNuYXBzaG90KHtzbmFwc2hvdDphLG9wdGlvbnM6dH0pfWFzeW5jIGNyZWF0ZVdpbmRvdyh0LGEpe2lmKG4mJlwidGVhcm91dFwiPT09dC5yZWFzb24pe2NvbnN0IGU9YXdhaXQgZmluLldpbmRvdy53cmFwU3luYyhhKS5nZXRPcHRpb25zKCksbj1lLndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlO3QudGFza2Jhckljb25Hcm91cD1lLnRhc2tiYXJJY29uR3JvdXAsbiYmKHQud29ya3NwYWNlUGxhdGZvcm18fD17fSx0LndvcmtzcGFjZVBsYXRmb3JtLndpbmRvd1R5cGU9ZS53b3Jrc3BhY2VQbGF0Zm9ybS53aW5kb3dUeXBlLG49PT1DLlBsYXRmb3JtJiYodC51cmw9ZS51cmwpKX1pZighbnx8dC53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZT09PUMuUGxhdGZvcm0pe2NvbnN0IGU9YXdhaXQgc3VwZXIuY3JlYXRlV2luZG93KHQsYSk7cmV0dXJuIGp0KHt0eXBlOlwiV2luZG93XCIsYWN0aW9uOlwiT3BlbiBXaW5kb3dcIix2YWx1ZTplLmlkZW50aXR5Lm5hbWUsZGF0YTp7dXVpZDplLmlkZW50aXR5LnV1aWR9fSksZX12YXIgbztvPXthbGxvd2VkOiEwfSx6dHx8KHp0PSEwLEt0KCR0LkJyb3dzZXIsbykpLCgoZT1bXSk9Pntjb25zdCB0PWUuZmlsdGVyKChlPT5lLnR5cGUhPT12LkN1c3RvbSkpLGE9bmV3IFNldCxuPVtdO2Zvcihjb25zdCBlIG9mIHQpYS5oYXMoZS50eXBlKSYmbi5wdXNoKGUudHlwZSksYS5hZGQoZS50eXBlKTtpZihuLmxlbmd0aD4wKXtjb25zdCBlPW4uam9pbihcIiwgXCIpO3Rocm93IG5ldyBFcnJvcihgRW5jb3VudGVyZWQgYSBkdXBsaWNhdGUgXCIke2V9XCIgdG9vbGJhciBidXR0b24uIE5vIG1vcmUgdGhhbiBvbmUgaW5zdGFuY2Ugb2YgYSBidXR0b24gdHlwZSBtYXkgYmUgcHJvdmlkZWQuYCl9fSkodC53b3Jrc3BhY2VQbGF0Zm9ybT8udG9vbGJhck9wdGlvbnM/LmJ1dHRvbnMpO2xldCByPShlPT5cIndvcmtzcGFjZVBsYXRmb3JtXCJpbiBlP2U6KCh7d29ya3N0YWNrczplLHBhZ2VzOnQsLi4uYX0pPT4oey4uLmEsd29ya3NwYWNlUGxhdGZvcm06e3BhZ2VzOnR8fGV8fG51bGx9fSkpKGUpKSh0KTtyPWF3YWl0IGNzKHIsZSx7dGhlbWVzOkRzKCksc2VsZWN0ZWRTY2hlbWU6dGhpcy5nZXRTZWxlY3RlZFNjaGVtZSgpfSkscj1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCk7bGV0IGE9dC5wcmltYXJ5TW9uaXRvcjtjb25zdCBuPWUuZGVmYXVsdExlZnQsbz1lLmRlZmF1bHRUb3A7dC5ub25QcmltYXJ5TW9uaXRvcnMuZm9yRWFjaCgoZT0+e2NvbnN0e3RvcDp0LGJvdHRvbTpyLGxlZnQ6aSxyaWdodDpzfT1lLmF2YWlsYWJsZVJlY3Q7bj49aSYmbjw9cyYmbz49dCYmbzw9ciYmKGE9ZSl9KSk7Y29uc3Qgcj1hLmF2YWlsYWJsZVJlY3QuYm90dG9tLWEuYXZhaWxhYmxlUmVjdC50b3AsaT1hLmF2YWlsYWJsZVJlY3QucmlnaHQtYS5hdmFpbGFibGVSZWN0LmxlZnQ7cmV0dXJuIGUuZGVmYXVsdEhlaWdodD1NYXRoLm1pbihlLmRlZmF1bHRIZWlnaHR8fDgwMCxyKSxlLmRlZmF1bHRXaWR0aD1NYXRoLm1pbihlLmRlZmF1bHRXaWR0aHx8ODAwLGkpLGV9KShyKTtjb25zdCBpPWF3YWl0KGU9PmFzeW5jKHQsYSk9PntsZXQgbj0hMTtjb25zdCBvPWF3YWl0IGUodCxhKTtyZXR1cm4gdD8ud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM/LmRlZmVyU2hvd0VuYWJsZWQ/KGF3YWl0IG8uYWRkTGlzdGVuZXIoXCJzaG93LXJlcXVlc3RlZFwiLChhc3luYygpPT57aWYobilyZXR1cm47Y29uc3QgZT1hd2FpdCBvLmdldE9wdGlvbnMoKTthd2FpdCBvLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnsuLi5lLndvcmtzcGFjZVBsYXRmb3JtLF9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM6ey4uLmUud29ya3NwYWNlUGxhdGZvcm0uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucyxhdXRvU2hvdzohMH19fSksbj0hMH0pKSxvKTpvfSkoKChlLHQpPT5zdXBlci5jcmVhdGVXaW5kb3coZSx0KSkpKHIsYSk7cmV0dXJuIGp0KHt0eXBlOlwiV2luZG93XCIsYWN0aW9uOlwiT3BlbiBXaW5kb3dcIix2YWx1ZTppLmlkZW50aXR5Lm5hbWUsZGF0YTp7dXVpZDppLmlkZW50aXR5LnV1aWR9fSksaX1hc3luYyBjcmVhdGVWaWV3KHQsYSl7dC5vcHRzPWJuKHQub3B0cyxlPy5kZWZhdWx0Vmlld09wdGlvbnMpLHQub3B0cz1hd2FpdCB1cyh0Lm9wdHMsdGhpcy5mZXRjaE1hbmlmZXN0LGEpLHQub3B0cz1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1ycyhlKSxhPXQud29ya3NwYWNlUGxhdGZvcm0/LmJyb3dzZXJOYXZpZ2F0aW9uQnV0dG9ucztpZihhKXtjb25zdCBlPU9iamVjdC5rZXlzKGEpO2Zvcihjb25zdCBuIG9mIGUpaWYoYVtuXSl7Y29uc3QgZT0oYXdhaXQgbXMoKSlbbl07dC5ob3RrZXlzP3QuaG90a2V5cy5wdXNoKC4uLmUpOnQuaG90a2V5cz1bLi4uZV19fXJldHVybiB0fSkodC5vcHRzKSx0Lm9wdHM9d3ModC5vcHRzKTtjb25zdCBuPWF3YWl0IHN1cGVyLmNyZWF0ZVZpZXcodCxhKTtyZXR1cm4ga3Mobi5pZGVudGl0eSx0Lm9wdHMuX2ludGVybmFsV29ya3NwYWNlRGF0YT8uYnJvd3Nlck5hdmlnYXRpb25CdXR0b25zKSxufWFzeW5jIHJlcGxhY2VWaWV3KHQsYSl7cmV0dXJuIHQub3B0cy5uZXdWaWV3PWF3YWl0IGJuKHQub3B0cy5uZXdWaWV3LGU/LmRlZmF1bHRWaWV3T3B0aW9ucyksdC5vcHRzLm5ld1ZpZXc9YXdhaXQgdXModC5vcHRzLm5ld1ZpZXcsdGhpcy5mZXRjaE1hbmlmZXN0LGEpLHN1cGVyLnJlcGxhY2VWaWV3KHQsYSl9YXN5bmMgcmVwbGFjZUxheW91dChlLHQpe3JldHVybiBhd2FpdCBVdCh0KXx8ZGVsZXRlIGUub3B0cy5sYXlvdXQ/LmRpbWVuc2lvbnMsc3VwZXIucmVwbGFjZUxheW91dChlLHQpfWFzeW5jIGdldFNhdmVkUGFnZSguLi5lKXtyZXR1cm4gJHIuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTYXZlZFBhZ2VzKC4uLmUpe3JldHVybiBLci5hcHBseSh0aGlzLGUpfWFzeW5jIGNyZWF0ZVNhdmVkUGFnZSguLi5lKXtyZXR1cm4genIuYXBwbHkodGhpcyxlKX1hc3luYyBkZWxldGVTYXZlZFBhZ2UoLi4uZSl7cmV0dXJuIEpyLmFwcGx5KHRoaXMsZSl9YXN5bmMgdXBkYXRlU2F2ZWRQYWdlKC4uLmUpe3JldHVybiBaci5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBqaS5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNhdmVkV29ya3NwYWNlcyguLi5lKXtyZXR1cm4gUWkuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTYXZlZFdvcmtzcGFjZXNNZXRhZGF0YSguLi5lKXtyZXR1cm4oYXdhaXQgdGhpcy5nZXRTYXZlZFdvcmtzcGFjZXMoLi4uZSkpLm1hcCgoZT0+KHt3b3Jrc3BhY2VJZDplLndvcmtzcGFjZUlkLHRpdGxlOmUudGl0bGV9KSkpfWFzeW5jIGNyZWF0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBZaS5hcHBseSh0aGlzLGUpfWFzeW5jIGRlbGV0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBYaS5hcHBseSh0aGlzLGUpfWFzeW5jIHVwZGF0ZVNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBlcy5hcHBseSh0aGlzLGUpfWFzeW5jIGdldERvY2tQcm92aWRlckNvbmZpZyguLi5lKXtyZXR1cm4gemkuYXBwbHkodGhpcyxlKX1hc3luYyBzYXZlRG9ja1Byb3ZpZGVyQ29uZmlnKC4uLmUpe3JldHVybiBKaS5hcHBseSh0aGlzLGUpfWFzeW5jIGF0dGFjaFBhZ2VzVG9XaW5kb3codCl7Y29uc3QgYT1hd2FpdCBhcyh0LnBhZ2VzLGUpO2F3YWl0IEpuKGEpLGF3YWl0IHNvKHsuLi50LHBhZ2VzOmF9KX1hc3luYyBhZGRQYWdlKGUpe2NvbnN0IHQ9YXdhaXQgVXQoZS5pZGVudGl0eSksYT1hd2FpdCBydChlLmlkZW50aXR5KSx7cGFnZTpuLGluc2VydGlvbkluZGV4Om99PWU7bj8udGl0bGV8fHR8fChuLnRpdGxlPWF3YWl0IGEuZGlzcGF0Y2godHQuR2V0VW5pcXVlUGFnZVRpdGxlLHZvaWQgMCkpO2NvbnN0IHI9KGF3YWl0IHRoaXMuZ2V0QWxsQXR0YWNoZWRQYWdlcygpKS5maW5kKChlPT5lLnBhZ2VJZD09PW4ucGFnZUlkfHxlLnRpdGxlPT09bi50aXRsZSkpO2lmKHIpe2lmKHIucGFnZUlkPT09bi5wYWdlSWQpdGhyb3cgbmV3IEVycm9yKGBwYWdlIHdpdGggaWQgJHtuLnBhZ2VJZH0gaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBhIGJyb3dzZXIgd2luZG93ICR7ci5wYXJlbnRJZGVudGl0eS5uYW1lfWApO2lmKCF0KXRocm93IG5ldyBFcnJvcihgYWRkUGFnZSB0aXRsZSBjb2xsaXNpb24sIHBhZ2Ugd2l0aCB0aXRsZSAke24udGl0bGV9IGFscmVhZHkgZXhpc3RzLCBjb25mbGljdGluZyBwYWdlIGlkOiAke3IucGFnZUlkfSB3aXRoIHRpdGxlICR7ci50aXRsZX1gKX1jb25zdCBpPXtpZGVudGl0eTplLmlkZW50aXR5LHBhZ2VzOlt7Li4ubixtdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yOmUubXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcnx8XCJkdXBsaWNhdGVcIn1dLGluc2VydGlvbkluZGV4Om99O2F3YWl0IHRoaXMuYXR0YWNoUGFnZXNUb1dpbmRvdyhpKX1hc3luYyBhZGREZWZhdWx0UGFnZShlKXthd2FpdCB0aGlzLmFkZFBhZ2UoZSksYXdhaXQgdGhpcy5zZXRBY3RpdmVQYWdlKHtpZGVudGl0eTplLmlkZW50aXR5LHBhZ2VJZDplLnBhZ2UucGFnZUlkfSl9YXN5bmMgc2V0QWN0aXZlUGFnZSguLi5lKXtyZXR1cm4gdW8uYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gVmkuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuR2xvYmFsQ29udGV4dE1lbnUoLi4uZSl7cmV0dXJuIEZpLmFwcGx5KHRoaXMsWy4uLmUsTnIuR2xvYmFsTWVudSxFaS5Cb3R0b21SaWdodF0pfWFzeW5jIG9wZW5WaWV3VGFiQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gTmkuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuVmlld1RhYkNvbnRleHRNZW51KC4uLmUpe3JldHVybiBGaS5hcHBseSh0aGlzLFsuLi5lLE5yLkNvbnRleHRNZW51XSl9YXN5bmMgb3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBMaS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5QYWdlVGFiQ29udGV4dE1lbnUoLi4uZSl7cmV0dXJuIEZpLmFwcGx5KHRoaXMsWy4uLmUsTnIuQ29udGV4dE1lbnVdKX1hc3luYyBvcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51KC4uLmUpe3JldHVybiBGaS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gX2kuYXBwbHkodGhpcyxlKX1nZXRTZWxlY3RlZFNjaGVtZSguLi5lKXtyZXR1cm4gZ24uYXBwbHkodGhpcyxlKX1hc3luYyBzZXRTZWxlY3RlZFNjaGVtZSguLi5lKXtyZXR1cm4gd24uYXBwbHkodGhpcyxlKX1hc3luYyBoYW5kbGVQYWdlQ2hhbmdlcyguLi5lKXtyZXR1cm4gdm8uYXBwbHkodGhpcyxlKX1hc3luYyBhbmFseXRpY3NJbnRlcm5hbCguLi5lKXtyZXR1cm4gUm8uYXBwbHkodGhpcyxlKX1hc3luYyBoYW5kbGVBbmFseXRpY3MoLi4uZSl7fWFzeW5jIGhhbmRsZVNhdmVNb2RhbE9uUGFnZUNsb3NlKC4uLmUpe3JldHVybiBrby5hcHBseSh0aGlzLGUpfWFzeW5jIHNob3VsZFBhZ2VDbG9zZSguLi5lKXtyZXR1cm4gYm8uYXBwbHkodGhpcyxlKX1hc3luYyBzaG91bGRXaW5kb3dDbG9zZSguLi5lKXtyZXR1cm4geW8uYXBwbHkodGhpcyxlKX1oYW5kbGVQYWdlc0FuZFdpbmRvd0Nsb3NlKC4uLmUpe3JldHVybiBmby5hcHBseSh0aGlzLGUpfWFzeW5jIGNvcHlQYWdlKC4uLmUpe3JldHVybiBTby5hcHBseSh0aGlzLGUpfWFzeW5jIGdldE5vdGlmaWNhdGlvbnNDb25maWcoKXtyZXR1cm4gdH1hc3luYyBzZXRMYW5ndWFnZSguLi5lKXtyZXR1cm4ga3IuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRMYW5ndWFnZSgpe3JldHVybiBtci5hcHBseSh0aGlzKX1hc3luYyB0cmFja1JlbW92ZWRUYWJJbnRlcm5hbCguLi5lKXtyZXR1cm4gcXIuYXBwbHkodGhpcyxlKX1hc3luYyByZXN0b3JlUmVtb3ZlZFRhYkludGVybmFsKCl7Y29uc3QgZT1hd2FpdChhc3luYygpPT57aWYoIUhyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBwb3AgbGFzdCByZW1vdmVkIHRhYiAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtjb25zdCBlPUhyW1VyXSx0PWF3YWl0IGUudG9Db2xsZWN0aW9uKCkua2V5cygpO2lmKHQubGVuZ3RoPjApe2NvbnN0IGE9TWF0aC5tYXgoLi4udC5tYXAoKGU9Pk51bWJlcihlKSkpKS50b1N0cmluZygpLG49YXdhaXQgZS5nZXQoYSk7aWYobil7YXdhaXQgZS5kZWxldGUoYSk7Y29uc3R7aWQ6dCwuLi5vfT1uO3JldHVybiBvfX19KSgpO2lmKFwicGFnZVwiaW4gZSlpZihhd2FpdCB4ZShlLmlkZW50aXR5KSl7Y29uc3QgdD1tbigpLkJyb3dzZXIud3JhcFN5bmMoZS5pZGVudGl0eSk7YXdhaXQgdC5hZGRQYWdlKGUucGFnZSksYXdhaXQgdC5zZXRBY3RpdmVQYWdlKGUucGFnZS5wYWdlSWQpfWVsc2UgbW4oKS5jcmVhdGVXaW5kb3coe25hbWU6ZS5pZGVudGl0eS5uYW1lLHdvcmtzcGFjZVBsYXRmb3JtOntwYWdlczpbZS5wYWdlXSx3aW5kb3dUeXBlOkMuQnJvd3Nlcn19KTtlbHNlKGZ1bmN0aW9uKGUpe3JldHVyblwid2luZG93XCJpbiBlfSkoZSkmJm1uKCkuY3JlYXRlV2luZG93KHt3b3Jrc3BhY2VQbGF0Zm9ybTp7cGFnZXM6ZS53aW5kb3cucGFnZXMsd2luZG93VHlwZTpDLkJyb3dzZXJ9fSl9YXN5bmMgdHJhY2tWaXNpdGVkU2l0ZUludGVybmFsKC4uLmUpe3JldHVybiBRci5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFJlY2VudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWwoLi4uZSl7cmV0dXJuIGF3YWl0IElzLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsKC4uLmUpe3JldHVybiBZci5hcHBseSh0aGlzLGUpfWFzeW5jIHNlYXJjaFNpdGVzSW50ZXJuYWwoLi4uZSl7cmV0dXJuIGF3YWl0IENzLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWwoLi4uZSl7cmV0dXJuIGF3YWl0IE1zLmFwcGx5KHRoaXMsZSl9YXN5bmMgZ2V0Q3VyYXRlZENvbnRlbnRJbnRlcm5hbCguLi5lKXtyZXR1cm4gYXdhaXQgeHMuYXBwbHkodGhpcyxlKX1hc3luYyBoYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsKC4uLmUpe31hc3luYyBsYXVuY2hCb29rbWFya0ludGVybmFsKGUpe3JldHVybiB0aShlKX1hc3luYyByZWZyZXNoQm9va21hcmtzSW50ZXJuYWwoKXsoYXdhaXQgbW4oKS5Ccm93c2VyLmdldEFsbFdpbmRvd3MoKSkuZm9yRWFjaCgoYXN5bmMoe2lkZW50aXR5OmV9KT0+eyhhd2FpdCBTYShlKSkuZGlzcGF0Y2goQWEuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsKX0pKTsoYXdhaXQgZmEoRXIoKSkpLmRpc3BhdGNoKEFhLlJlZnJlc2hCb29rbWFya3NJbnRlcm5hbCksYXdhaXQoYXN5bmMoKT0+e2NvbnN0IGU9YXdhaXQgT2koKTtpZihlKXtjb25zdCB0PWF3YWl0IFNhKGUuaWRlbnRpdHksVWkpO2F3YWl0IHQuZGlzcGF0Y2goQWEuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsKX19KSgpfWFzeW5jIHVwZGF0ZURvY2tGYXZvcml0ZXNJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgT2koKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb21wYW5pb24gRG9jayB3aW5kb3cgbm90IGZvdW5kXCIpO3tjb25zdCBhPWF3YWl0IFNhKHQuaWRlbnRpdHksVWkpO2F3YWl0IGEuZGlzcGF0Y2goeGEuVXBkYXRlRmF2b3JpdGVFbnRyaWVzLGUpfX0pKGUpfWFzeW5jIHVwZGF0ZUNvbnRlbnRNZW51SW50ZXJuYWwoZSl7cmV0dXJuKGFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IE9pKCk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiQ29tcGFuaW9uIERvY2sgd2luZG93IG5vdCBmb3VuZFwiKTt7Y29uc3QgYT1hd2FpdCBTYSh0LmlkZW50aXR5LFVpKTthd2FpdCBhLmRpc3BhdGNoKHhhLlVwZGF0ZUNvbnRlbnRNZW51LGUpfX0pKGUpfWFzeW5jIGxhdW5jaERvY2tFbnRyeUludGVybmFsKGUpe3JldHVybihhc3luYyBlPT4oYXdhaXQgR2koKSkuZGlzcGF0Y2goXCJsYXVuY2gtZW50cnlcIixlKSkoZSl9YXN5bmMgc2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+KGF3YWl0IEdpKCkpLmRpc3BhdGNoKFwic2V0LWRlZmF1bHQtZG9jay1idXR0b25zLW9yZGVyXCIsZSkpKGUpfWFzeW5jIHNldERvY2tGYXZvcml0ZXNPcmRlckludGVybmFsKGUpe3JldHVybihhc3luYyBlPT4oYXdhaXQgR2koKSkuZGlzcGF0Y2goXCJzZXQtZG9jay1mYXZvcml0ZXMtb3JkZXJcIixlKSkoZSl9YXN5bmMgYWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWwoZSl7cmV0dXJuKGFzeW5jIGU9Pihhd2FpdCBHaSgpKS5kaXNwYXRjaChcImFkZC1mYXZvcml0ZS1lbnRyeVwiLGUpKShlKX1hc3luYyByZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+KGF3YWl0IEdpKCkpLmRpc3BhdGNoKFwicmVtb3ZlLWZhdm9yaXRlLWVudHJ5XCIsZSkpKGUpfWFzeW5jIG5hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbChlKXtyZXR1cm4oYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgT2koKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJDb21wYW5pb24gRG9jayB3aW5kb3cgbm90IGZvdW5kXCIpO3tjb25zdCBhPWF3YWl0IFNhKHQuaWRlbnRpdHksVWkpO2F3YWl0IGEuZGlzcGF0Y2goeGEuTmF2aWdhdGVDb250ZW50TWVudSxlKX19KShlKX1hc3luYyBnZXREb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWwoKXtyZXR1cm4oYXN5bmMoKT0+KGF3YWl0IEdpKCkpLmRpc3BhdGNoKFwiZ2V0LWRvY2std29ya3NwYWNlcy1jb250ZXh0LW1lbnVcIix2b2lkIDApKSgpfWFzeW5jIGhhbmRsZURvY2tXb3Jrc3BhY2VzTWVudVJlc3BvbnNlSW50ZXJuYWwoZSl7cmV0dXJuKGFzeW5jIGU9Pihhd2FpdCBHaSgpKS5kaXNwYXRjaChcImhhbmRsZS1kb2NrLXdvcmtzcGFjZXMtbWVudS1yZXNwb25zZVwiLGUpKShlKX1hc3luYyBmb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsKCl7cmV0dXJuIEhpKCl9YXN5bmMgc2VuZFVwZGF0ZVZlcnNpb25Nb2RhbFJlc3BvbnNlSW50ZXJuYWwoZSl7cmV0dXJuIGphKGUpfWFzeW5jIHNob3dVcGRhdGVWZXJzaW9uTW9kYWxJbnRlcm5hbChlLHQpe3JldHVybiBkcyhlLHQpfX19O2Z1bmN0aW9uIFJzKGUsdCxhKXtjb25zdCBuPUJzKGUsYSk7dHJ5e3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZT0+dChuKGUpKTpBcnJheS5pc0FycmF5KHQpP1suLi50LG5dOmU9Pm5ldyhuKGUpKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJXb3Jrc3BhY2VQbGF0Zm9ybS5pbml0IEVycm9yOlwiLGUpfX1jb25zdCBFcz1bXCJncmVlblwiLFwicHVycGxlXCIsXCJvcmFuZ2VcIixcInJlZFwiLFwicGlua1wiLFwieWVsbG93XCJdLEZzPVwiQ09OVEVYVF9HUk9VUF9QQUdFXCIsVnM9KCk9PmU9PmNsYXNzIGV4dGVuZHMgZXtnZXRDb250ZXh0R3JvdXBzKCl7cmV0dXJuIHN1cGVyLmdldENvbnRleHRHcm91cHMoKS5tYXAoKGU9PkVzLmluY2x1ZGVzKGUuZGlzcGxheU1ldGFkYXRhPy5uYW1lKT97Li4uZSxkaXNwbGF5TWV0YWRhdGE6ey4uLmUuZGlzcGxheU1ldGFkYXRhLG5hbWU6X24oZS5kaXNwbGF5TWV0YWRhdGE/Lm5hbWUpfX06ZSkpfX0sTnM9KCk9Pntjb25zdCBlPW5ldyBTZXQoeGkua2V5cygpKTtyZXR1cm4gdD0+Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLm9uQ2xpZW50Q29ubmVjdGVkPWFzeW5jIGU9PntpZihlLm5hbWUuc3RhcnRzV2l0aChcImludGVybmFsLWdlbmVyYXRlZC12aWV3XCIpKXtjb25zdHtwYWdlOnR9PWF3YWl0IG1uKCkuQnJvd3Nlci5nZXRQYWdlQnlWaWV3SWRlbnRpdHkoZSksYT10LmNvbnRleHRHcm91cDt0aGlzLmpvaW5Db250ZXh0R3JvdXAoe2NvbnRleHRHcm91cElkOmE/P0ZzLHRhcmdldDplfSx7dXVpZDp0aGlzLmZpbi5tZS51dWlkLG5hbWU6dGhpcy5maW4ubWUubmFtZX0pfX07Y29uc3QgZT10aGlzLmludGVyb3BDbGllbnRzLnNldDt0aGlzLmludGVyb3BDbGllbnRzLnNldD0odCxhKT0+e2UuY2FsbCh0aGlzLmludGVyb3BDbGllbnRzLHQsYSksdGhpcy5vbkNsaWVudENvbm5lY3RlZChhLmNsaWVudElkZW50aXR5KX19YXN5bmMgam9pbkNvbnRleHRHcm91cCh7Y29udGV4dEdyb3VwSWQ6dCx0YXJnZXQ6YX0sbil7aWYodCE9PUZzKXJldHVybiBzdXBlci5qb2luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDp0LHRhcmdldDphfSxuKTt0cnl7Y29uc3QgdD0oYXdhaXQgbW4oKS5Ccm93c2VyLmdldFBhZ2VCeVZpZXdJZGVudGl0eShhKSkucGFnZS5sYXlvdXROYW1lO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlZpZXcgZG9lcyBub3QgYmVsb25nIHRvIGEgcGFnZVwiKTtpZighZS5oYXModCkmJihlLmFkZCh0KSwhdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModCkpKXtjb25zdCBlPW5ldyBNYXA7dGhpcy5jb250ZXh0R3JvdXBzQnlJZC5zZXQodCxlKX1hd2FpdCBzdXBlci5qb2luQ29udGV4dEdyb3VwKHtjb250ZXh0R3JvdXBJZDp0LHRhcmdldDphfSxuKSxhLm5hbWV9Y2F0Y2goZSl7SlNPTi5zdHJpbmdpZnkoYSksZS5zdGFja319Z2V0Q29udGV4dEdyb3Vwcygpe3JldHVybiBBcnJheS5mcm9tKGUpLm1hcCgoZT0+KHtpZDplLGRpc3BsYXlNZXRhZGF0YTp4aS5nZXQoZSk/P3t9fSkpKX1zZXRDb250ZXh0Rm9yR3JvdXAoZSx0KXtpZighdGhpcy5jb250ZXh0R3JvdXBzQnlJZC5oYXModCkpe2NvbnN0IGU9bmV3IE1hcDt0aGlzLmNvbnRleHRHcm91cHNCeUlkLnNldCh0LGUpfXJldHVybiBzdXBlci5zZXRDb250ZXh0Rm9yR3JvdXAoZSx0KX19fSxMcz0oZSx0KT0+e2NvbnN0IGE9KGU9Pk90KGUpP05zKCk6VnMoKSkodCk7dHJ5e3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/dD0+ZShhKHQpKTpBcnJheS5pc0FycmF5KGUpP1suLi5lLGFdOmU9Pm5ldyhhKGUpKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJXb3Jrc3BhY2VQbGF0Zm9ybS5pbml0IEVycm9yOlwiLGUpfX07YXN5bmMgZnVuY3Rpb24gX3MoKXsoYXN5bmMoKT0+e2hlKCkub24oXCJ3aW5kb3ctY2xvc2VkXCIsV3IpfSkoKSxhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCksdD1hd2FpdCBNcigpO2F3YWl0IFByb21pc2UuYWxsKHQubWFwKChhc3luYyBlPT57YXdhaXQgSXIoZS5pZGVudGl0eSx2b2lkIDAsITApfSkpKTtjb25zdCBhPWF3YWl0IGZpbi5TeXN0ZW0uZ2V0Rm9jdXNlZFdpbmRvdygpO2EmJmEubmFtZS5zdGFydHNXaXRoKG1lLkJyb3dzZXJXaW5kb3cpJiZhd2FpdCBJcihhLHZvaWQgMCwhMCksYXdhaXQgZS5hZGRMaXN0ZW5lcihcIndpbmRvdy1mb2N1c2VkXCIsKGFzeW5jIGU9Pnthd2FpdCBJcihlLHZvaWQgMCwhMCl9KSksYXdhaXQgZS5hZGRMaXN0ZW5lcihcIndpbmRvdy1taW5pbWl6ZWRcIiwoYXN5bmMgZT0+e2F3YWl0IElyKGUsITEpfSkpLGF3YWl0IGUuYWRkTGlzdGVuZXIoXCJ3aW5kb3ctcmVzdG9yZWRcIiwoYXN5bmMgZT0+e2F3YWl0IElyKGUsITApfSkpLGF3YWl0IGUuYWRkTGlzdGVuZXIoXCJ3aW5kb3ctY2xvc2VkXCIsQXIpfSgpO2pvKGF3YWl0IFFvKCkpfWxldCBVcztmdW5jdGlvbiBPcyh7b3ZlcnJpZGVDYWxsYmFjazplLGludGVyb3BPdmVycmlkZTp0LGJyb3dzZXI6YSxub3RpZmljYXRpb25zOm4sYW5hbHl0aWNzOm8saW50ZWdyYXRpb25zOnI9W10sd29ya3NwYWNlQXNhcjppfSl7aWYoIVcpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi5cIik7cmV0dXJuIFVzfHwoVXM9KGFzeW5jKCk9Pntjb25zdCBzPWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO3ZhciBjLGw7aWYocy5vbmNlKFwicGxhdGZvcm0tYXBpLXJlYWR5XCIsKCgpPT5fcygpKSkscy5vbihcIndpbmRvdy1zaG93LWFsbC1kb3dubG9hZHNcIiwoKHtuYW1lOmUsdXVpZDp0fSk9Pnt1cih7bmFtZTplLHV1aWQ6dH0pfSkpLGE/LnRpdGxlJiYoYz1hLnRpdGxlLFdpPWMpLEVvKG8pLGkpe2NvbnN0IGU9YHdvcmtzcGFjZS0ke2VuY29kZVVSSUNvbXBvbmVudChmaW4ubWUudXVpZCl9YCx7YmFzZVVybDp0fT1hd2FpdCBmaW4uU3lzdGVtLnNlcnZlQXNzZXQoey4uLmksaG9zdE5hbWU6ZX0pO1godCl9YT8uYnJvd3NlckJhc2VVcmwmJlgoYS5icm93c2VyQmFzZVVybCksT3QoYSkmJihIbj0hMCxsPWEsR249bD8uYWlQYW5lbE9wdGlvbnMsS24oKSk7Y29uc3QgZD1zbigpO3ZhciB1O3JldHVybiBkLnNldFdvcmtzcGFjZVN0b3JhZ2UoZnQoYCR7Un0td29ya3NwYWNlYCkpLGQudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlKCksYXdhaXQgZmluLlBsYXRmb3JtLmluaXQoe292ZXJyaWRlQ2FsbGJhY2s6UnMoYSxlfHxhPy5vdmVycmlkZUNhbGxiYWNrLG4pLGludGVyb3BPdmVycmlkZTpMcyh0fHxhPy5pbnRlcm9wT3ZlcnJpZGUsYSl9KSx1PXthbGxvd2VkOiEwfSxLdCgkdC5QbGF0Zm9ybSx1KSxhd2FpdCBQcm9taXNlLmFsbChyLm1hcCgoYXN5bmMgZT0+eygoZSx0KT0+e0t0KGAkeyR0Lk1pY3JvZmxvd306JHtlfWAsdCxcImludGVncmF0aW9uLWZlYXR1cmVcIil9KShlLndvcmtmbG93SW50ZWdyYXRpb25OYW1lLHthbGxvd2VkOiEwLGFwaVZlcnNpb246VX0pLGF3YWl0IGUuX2luaXRpYWxpemVXb3JrZmxvd3MoKX0pKSksc30pKCkpLFVzfWNvbnN0IEdzPWFzeW5jKHt0aGVtZTplLGN1c3RvbUFjdGlvbnM6dCxsYW5ndWFnZTphLC4uLm59KT0+e2NvbnN0IG89VS5zcGxpdChcIi5cIikubWFwKChlPT5wYXJzZUludChlKSkpLHI9YXdhaXQoYXN5bmMgZT0+e2lmKChhd2FpdCBZKCkpLmRpc2FibGVSdW50aW1lVmFsaWRhdGlvbilyZXR1cm4hMDtpZihhd2FpdCBVdCgpKXJldHVybiEwO2NvbnN0IHQ9KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0VmVyc2lvbigpKS5zcGxpdChcIi5cIikubWFwKChlPT5wYXJzZUludChlKSkpO3JldHVybiBlLmV2ZXJ5KCgoYSxuKT0+IShuPDMpfHx0W25dPT09ZVtuXSkpfSkobyk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKGBSdW50aW1lIHZlcnNpb24gaXMgbm90IHN1cHBvcnRlZC4gICR7b1swXX0uJHtvWzFdfS4ke29bMl19LiogaXMgcmVxdWlyZWRgKTt2YXIgaTtyZXR1cm4gVHMoZSksZSYmKGk9e2FsbG93ZWQ6ITB9LEt0KCR0LlRoZW1pbmcsaSkpLHQmJihEcj10KSxhd2FpdCB5cihhPy5pbml0aWFsTGFuZ3VhZ2UpLE9zKG4pfX0pKCksbW9kdWxlLmV4cG9ydHM9bn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCIvKlxuICogRGV4aWUuanMgLSBhIG1pbmltYWxpc3RpYyB3cmFwcGVyIGZvciBJbmRleGVkREJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKlxuICogQnkgRGF2aWQgRmFobGFuZGVyLCBkYXZpZC5mYWhsYW5kZXJAZ21haWwuY29tXG4gKlxuICogVmVyc2lvbiA0LjIuMSwgU2F0IE9jdCAwNCAyMDI1XG4gKlxuICogaHR0cHM6Ly9kZXhpZS5vcmdcbiAqXG4gKiBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCwgSmFudWFyeSAyMDA0LCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvXG4gKi9cbiBcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkRleGllID0gZmFjdG9yeSgpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxuICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG4gICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG4gICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG4gICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH1cbiAgICB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcbiAgICAgICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbiAgICB9XG5cbiAgICB2YXIgX2dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOlxuICAgICAgICB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDpcbiAgICAgICAgICAgICAgICBnbG9iYWw7XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzO1xuICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICFfZ2xvYmFsLlByb21pc2UpIHtcbiAgICAgICAgX2dsb2JhbC5Qcm9taXNlID0gUHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGtleXMoZXh0ZW5zaW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgdmFyIF9oYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICBmdW5jdGlvbiBoYXNPd24ob2JqLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBfaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcHMocHJvdG8sIGV4dGVuc2lvbikge1xuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbihnZXRQcm90byhwcm90bykpO1xuICAgICAgICAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgPyBrZXlzIDogUmVmbGVjdC5vd25LZXlzKShleHRlbnNpb24pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgc2V0UHJvcChwcm90bywga2V5LCBleHRlbnNpb25ba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gICAgZnVuY3Rpb24gc2V0UHJvcChvYmosIHByb3AsIGZ1bmN0aW9uT3JHZXRTZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBleHRlbmQoZnVuY3Rpb25PckdldFNldCAmJiBoYXNPd24oZnVuY3Rpb25PckdldFNldCwgXCJnZXRcIikgJiYgdHlwZW9mIGZ1bmN0aW9uT3JHZXRTZXQuZ2V0ID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIHsgZ2V0OiBmdW5jdGlvbk9yR2V0U2V0LmdldCwgc2V0OiBmdW5jdGlvbk9yR2V0U2V0LnNldCwgY29uZmlndXJhYmxlOiB0cnVlIH0gOlxuICAgICAgICAgICAgeyB2YWx1ZTogZnVuY3Rpb25PckdldFNldCwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LCBvcHRpb25zKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlcml2ZShDaGlsZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogZnVuY3Rpb24gKFBhcmVudCkge1xuICAgICAgICAgICAgICAgIENoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGFyZW50LnByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgc2V0UHJvcChDaGlsZC5wcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgQ2hpbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZDogcHJvcHMuYmluZChudWxsLCBDaGlsZC5wcm90b3R5cGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkge1xuICAgICAgICB2YXIgcGQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgdmFyIHByb3RvO1xuICAgICAgICByZXR1cm4gcGQgfHwgKHByb3RvID0gZ2V0UHJvdG8ob2JqKSkgJiYgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKTtcbiAgICB9XG4gICAgdmFyIF9zbGljZSA9IFtdLnNsaWNlO1xuICAgIGZ1bmN0aW9uIHNsaWNlKGFyZ3MsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIF9zbGljZS5jYWxsKGFyZ3MsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvdmVycmlkZShvcmlnRnVuYywgb3ZlcnJpZGVkRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gb3ZlcnJpZGVkRmFjdG9yeShvcmlnRnVuYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzc2VydChiKSB7XG4gICAgICAgIGlmICghYilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBGYWlsZWRcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzYXAkMShmbikge1xuICAgICAgICBpZiAoX2dsb2JhbC5zZXRJbW1lZGlhdGUpXG4gICAgICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXJyYXlUb09iamVjdChhcnJheSwgZXh0cmFjdG9yKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgaXRlbSwgaSkge1xuICAgICAgICAgICAgdmFyIG5hbWVBbmRWYWx1ZSA9IGV4dHJhY3RvcihpdGVtLCBpKTtcbiAgICAgICAgICAgIGlmIChuYW1lQW5kVmFsdWUpXG4gICAgICAgICAgICAgICAgcmVzdWx0W25hbWVBbmRWYWx1ZVswXV0gPSBuYW1lQW5kVmFsdWVbMV07XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyAmJiBoYXNPd24ob2JqLCBrZXlQYXRoKSlcbiAgICAgICAgICAgIHJldHVybiBvYmpba2V5UGF0aF07XG4gICAgICAgIGlmICgha2V5UGF0aClcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlQYXRoLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoW2ldKTtcbiAgICAgICAgICAgICAgICBydi5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICBpZiAocGVyaW9kICE9PSAtMSkge1xuICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2tleVBhdGguc3Vic3RyKDAsIHBlcmlvZCldO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyT2JqID09IG51bGwgPyB1bmRlZmluZWQgOiBnZXRCeUtleVBhdGgoaW5uZXJPYmosIGtleVBhdGguc3Vic3RyKHBlcmlvZCArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIW9iaiB8fCBrZXlQYXRoID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICgnaXNGcm96ZW4nIGluIE9iamVjdCAmJiBPYmplY3QuaXNGcm96ZW4ob2JqKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiBrZXlQYXRoKSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiB2YWx1ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleVBhdGgubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aFtpXSwgdmFsdWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICAgICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEtleVBhdGggPSBrZXlQYXRoLnN1YnN0cigwLCBwZXJpb2QpO1xuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIocGVyaW9kICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0tleVBhdGggPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShvYmopICYmICFpc05hTihwYXJzZUludChjdXJyZW50S2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zcGxpY2UoY3VycmVudEtleVBhdGgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbY3VycmVudEtleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtjdXJyZW50S2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2N1cnJlbnRLZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbm5lck9iaiB8fCAhaGFzT3duKG9iaiwgY3VycmVudEtleVBhdGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJPYmogPSAob2JqW2N1cnJlbnRLZXlQYXRoXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGlubmVyT2JqLCByZW1haW5pbmdLZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkob2JqKSAmJiAhaXNOYU4ocGFyc2VJbnQoa2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNwbGljZShrZXlQYXRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmpba2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBkZWxCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB1bmRlZmluZWQpO1xuICAgICAgICBlbHNlIGlmICgnbGVuZ3RoJyBpbiBrZXlQYXRoKVxuICAgICAgICAgICAgW10ubWFwLmNhbGwoa2V5UGF0aCwgZnVuY3Rpb24gKGtwKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga3AsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG9iaikge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24ob2JqLCBtKSlcbiAgICAgICAgICAgICAgICBydlttXSA9IG9ialttXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciBjb25jYXQgPSBbXS5jb25jYXQ7XG4gICAgZnVuY3Rpb24gZmxhdHRlbihhKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQuYXBwbHkoW10sIGEpO1xuICAgIH1cbiAgICB2YXIgaW50cmluc2ljVHlwZU5hbWVzID0gXCJCaWdVaW50NjRBcnJheSxCaWdJbnQ2NEFycmF5LEFycmF5LEJvb2xlYW4sU3RyaW5nLERhdGUsUmVnRXhwLEJsb2IsRmlsZSxGaWxlTGlzdCxGaWxlU3lzdGVtRmlsZUhhbmRsZSxGaWxlU3lzdGVtRGlyZWN0b3J5SGFuZGxlLEFycmF5QnVmZmVyLERhdGFWaWV3LFVpbnQ4Q2xhbXBlZEFycmF5LEltYWdlQml0bWFwLEltYWdlRGF0YSxNYXAsU2V0LENyeXB0b0tleVwiXG4gICAgICAgIC5zcGxpdCgnLCcpLmNvbmNhdChmbGF0dGVuKFs4LCAxNiwgMzIsIDY0XS5tYXAoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gW1wiSW50XCIsIFwiVWludFwiLCBcIkZsb2F0XCJdLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdCArIG51bSArIFwiQXJyYXlcIjsgfSk7IH0pKSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiBfZ2xvYmFsW3RdOyB9KTtcbiAgICB2YXIgaW50cmluc2ljVHlwZXMgPSBuZXcgU2V0KGludHJpbnNpY1R5cGVOYW1lcy5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIF9nbG9iYWxbdF07IH0pKTtcbiAgICBmdW5jdGlvbiBjbG9uZVNpbXBsZU9iamVjdFRyZWUobykge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxuICAgICAgICAgICAgaWYgKGhhc093bihvLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gb1trXTtcbiAgICAgICAgICAgICAgICBydltrXSA9ICF2IHx8IHR5cGVvZiB2ICE9PSAnb2JqZWN0JyB8fCBpbnRyaW5zaWNUeXBlcy5oYXModi5jb25zdHJ1Y3RvcikgPyB2IDogY2xvbmVTaW1wbGVPYmplY3RUcmVlKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9iamVjdElzRW1wdHkobykge1xuICAgICAgICBmb3IgKHZhciBrIGluIG8pXG4gICAgICAgICAgICBpZiAoaGFzT3duKG8sIGspKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBjaXJjdWxhclJlZnMgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGRlZXBDbG9uZShhbnkpIHtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdmFyIHJ2ID0gaW5uZXJEZWVwQ2xvbmUoYW55KTtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbm5lckRlZXBDbG9uZSh4KSB7XG4gICAgICAgIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgdmFyIHJ2ID0gY2lyY3VsYXJSZWZzLmdldCh4KTtcbiAgICAgICAgaWYgKHJ2KVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICBpZiAoaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgcnYgPSBbXTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB4Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHJ2LnB1c2goaW5uZXJEZWVwQ2xvbmUoeFtpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGludHJpbnNpY1R5cGVzLmhhcyh4LmNvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgcnYgPSB4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb3RvID0gZ2V0UHJvdG8oeCk7XG4gICAgICAgICAgICBydiA9IHByb3RvID09PSBPYmplY3QucHJvdG90eXBlID8ge30gOiBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093bih4LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBydltwcm9wXSA9IGlubmVyRGVlcENsb25lKHhbcHJvcF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuICAgIGZ1bmN0aW9uIHRvU3RyaW5nVGFnKG8pIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICAgIH1cbiAgICB2YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/XG4gICAgICAgIFN5bWJvbC5pdGVyYXRvciA6XG4gICAgICAgICdAQGl0ZXJhdG9yJztcbiAgICB2YXIgZ2V0SXRlcmF0b3JPZiA9IHR5cGVvZiBpdGVyYXRvclN5bWJvbCA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIChpID0geFtpdGVyYXRvclN5bWJvbF0pICYmIGkuYXBwbHkoeCk7XG4gICAgfSA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XG4gICAgZnVuY3Rpb24gZGVsQXJyYXlJdGVtKGEsIHgpIHtcbiAgICAgICAgdmFyIGkgPSBhLmluZGV4T2YoeCk7XG4gICAgICAgIGlmIChpID49IDApXG4gICAgICAgICAgICBhLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIGkgPj0gMDtcbiAgICB9XG4gICAgdmFyIE5PX0NIQVJfQVJSQVkgPSB7fTtcbiAgICBmdW5jdGlvbiBnZXRBcnJheU9mKGFycmF5TGlrZSkge1xuICAgICAgICB2YXIgaSwgYSwgeCwgaXQ7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShhcnJheUxpa2UpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUxpa2Uuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzID09PSBOT19DSEFSX0FSUkFZICYmIHR5cGVvZiBhcnJheUxpa2UgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBbYXJyYXlMaWtlXTtcbiAgICAgICAgICAgIGlmICgoaXQgPSBnZXRJdGVyYXRvck9mKGFycmF5TGlrZSkpKSB7XG4gICAgICAgICAgICAgICAgYSA9IFtdO1xuICAgICAgICAgICAgICAgIHdoaWxlICgoeCA9IGl0Lm5leHQoKSksICF4LmRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCh4LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgICAgICBpID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFbaV0gPSBhcnJheUxpa2VbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgIH1cbiAgICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGEgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICBhW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGlzQXN5bmNGdW5jdGlvbiA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbltTeW1ib2wudG9TdHJpbmdUYWddID09PSAnQXN5bmNGdW5jdGlvbic7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTtcblxuICAgIHZhciBkZXhpZUVycm9yTmFtZXMgPSBbXG4gICAgICAgICdNb2RpZnknLFxuICAgICAgICAnQnVsaycsXG4gICAgICAgICdPcGVuRmFpbGVkJyxcbiAgICAgICAgJ1ZlcnNpb25DaGFuZ2UnLFxuICAgICAgICAnU2NoZW1hJyxcbiAgICAgICAgJ1VwZ3JhZGUnLFxuICAgICAgICAnSW52YWxpZFRhYmxlJyxcbiAgICAgICAgJ01pc3NpbmdBUEknLFxuICAgICAgICAnTm9TdWNoRGF0YWJhc2UnLFxuICAgICAgICAnSW52YWxpZEFyZ3VtZW50JyxcbiAgICAgICAgJ1N1YlRyYW5zYWN0aW9uJyxcbiAgICAgICAgJ1Vuc3VwcG9ydGVkJyxcbiAgICAgICAgJ0ludGVybmFsJyxcbiAgICAgICAgJ0RhdGFiYXNlQ2xvc2VkJyxcbiAgICAgICAgJ1ByZW1hdHVyZUNvbW1pdCcsXG4gICAgICAgICdGb3JlaWduQXdhaXQnXG4gICAgXTtcbiAgICB2YXIgaWRiRG9tRXJyb3JOYW1lcyA9IFtcbiAgICAgICAgJ1Vua25vd24nLFxuICAgICAgICAnQ29uc3RyYWludCcsXG4gICAgICAgICdEYXRhJyxcbiAgICAgICAgJ1RyYW5zYWN0aW9uSW5hY3RpdmUnLFxuICAgICAgICAnUmVhZE9ubHknLFxuICAgICAgICAnVmVyc2lvbicsXG4gICAgICAgICdOb3RGb3VuZCcsXG4gICAgICAgICdJbnZhbGlkU3RhdGUnLFxuICAgICAgICAnSW52YWxpZEFjY2VzcycsXG4gICAgICAgICdBYm9ydCcsXG4gICAgICAgICdUaW1lb3V0JyxcbiAgICAgICAgJ1F1b3RhRXhjZWVkZWQnLFxuICAgICAgICAnU3ludGF4JyxcbiAgICAgICAgJ0RhdGFDbG9uZSdcbiAgICBdO1xuICAgIHZhciBlcnJvckxpc3QgPSBkZXhpZUVycm9yTmFtZXMuY29uY2F0KGlkYkRvbUVycm9yTmFtZXMpO1xuICAgIHZhciBkZWZhdWx0VGV4dHMgPSB7XG4gICAgICAgIFZlcnNpb25DaGFuZ2VkOiBcIkRhdGFiYXNlIHZlcnNpb24gY2hhbmdlZCBieSBvdGhlciBkYXRhYmFzZSBjb25uZWN0aW9uXCIsXG4gICAgICAgIERhdGFiYXNlQ2xvc2VkOiBcIkRhdGFiYXNlIGhhcyBiZWVuIGNsb3NlZFwiLFxuICAgICAgICBBYm9ydDogXCJUcmFuc2FjdGlvbiBhYm9ydGVkXCIsXG4gICAgICAgIFRyYW5zYWN0aW9uSW5hY3RpdmU6IFwiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgY29tcGxldGVkIG9yIGZhaWxlZFwiLFxuICAgICAgICBNaXNzaW5nQVBJOiBcIkluZGV4ZWREQiBBUEkgbWlzc2luZy4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vdGlueXVybC5jb20veTJ1dXZza2JcIlxuICAgIH07XG4gICAgZnVuY3Rpb24gRGV4aWVFcnJvcihuYW1lLCBtc2cpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnO1xuICAgIH1cbiAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShFcnJvcikuZXh0ZW5kKHtcbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTsgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgcmV0dXJuIG1zZyArIFwiLiBFcnJvcnM6IFwiICsgT2JqZWN0LmtleXMoZmFpbHVyZXMpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZhaWx1cmVzW2tleV0udG9TdHJpbmcoKTsgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHYsIGksIHMpIHsgcmV0dXJuIHMuaW5kZXhPZih2KSA9PT0gaTsgfSlcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTW9kaWZ5RXJyb3IobXNnLCBmYWlsdXJlcywgc3VjY2Vzc0NvdW50LCBmYWlsZWRLZXlzKSB7XG4gICAgICAgIHRoaXMuZmFpbHVyZXMgPSBmYWlsdXJlcztcbiAgICAgICAgdGhpcy5mYWlsZWRLZXlzID0gZmFpbGVkS2V5cztcbiAgICAgICAgdGhpcy5zdWNjZXNzQ291bnQgPSBzdWNjZXNzQ291bnQ7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoTW9kaWZ5RXJyb3IpLmZyb20oRGV4aWVFcnJvcik7XG4gICAgZnVuY3Rpb24gQnVsa0Vycm9yKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCdWxrRXJyb3JcIjtcbiAgICAgICAgdGhpcy5mYWlsdXJlcyA9IE9iamVjdC5rZXlzKGZhaWx1cmVzKS5tYXAoZnVuY3Rpb24gKHBvcykgeyByZXR1cm4gZmFpbHVyZXNbcG9zXTsgfSk7XG4gICAgICAgIHRoaXMuZmFpbHVyZXNCeVBvcyA9IGZhaWx1cmVzO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIHRoaXMuZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoQnVsa0Vycm9yKS5mcm9tKERleGllRXJyb3IpO1xuICAgIHZhciBlcnJuYW1lcyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkgeyByZXR1cm4gKG9ialtuYW1lXSA9IG5hbWUgKyBcIkVycm9yXCIsIG9iaik7IH0sIHt9KTtcbiAgICB2YXIgQmFzZUV4Y2VwdGlvbiA9IERleGllRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbnMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgdmFyIGZ1bGxOYW1lID0gbmFtZSArIFwiRXJyb3JcIjtcbiAgICAgICAgZnVuY3Rpb24gRGV4aWVFcnJvcihtc2dPcklubmVyLCBpbm5lcikge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZnVsbE5hbWU7XG4gICAgICAgICAgICBpZiAoIW1zZ09ySW5uZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBkZWZhdWx0VGV4dHNbbmFtZV0gfHwgZnVsbE5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyKS5jb25jYXQoIWlubmVyID8gJycgOiAnXFxuICcgKyBpbm5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyLm5hbWUsIFwiIFwiKS5jb25jYXQobXNnT3JJbm5lci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyID0gbXNnT3JJbm5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShCYXNlRXhjZXB0aW9uKTtcbiAgICAgICAgb2JqW25hbWVdID0gRGV4aWVFcnJvcjtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZXhjZXB0aW9ucy5TeW50YXggPSBTeW50YXhFcnJvcjtcbiAgICBleGNlcHRpb25zLlR5cGUgPSBUeXBlRXJyb3I7XG4gICAgZXhjZXB0aW9ucy5SYW5nZSA9IFJhbmdlRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbk1hcCA9IGlkYkRvbUVycm9yTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgb2JqW25hbWUgKyBcIkVycm9yXCJdID0gZXhjZXB0aW9uc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZnVuY3Rpb24gbWFwRXJyb3IoZG9tRXJyb3IsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCFkb21FcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIERleGllRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvciB8fCAhZG9tRXJyb3IubmFtZSB8fCAhZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKVxuICAgICAgICAgICAgcmV0dXJuIGRvbUVycm9yO1xuICAgICAgICB2YXIgcnYgPSBuZXcgZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKG1lc3NhZ2UgfHwgZG9tRXJyb3IubWVzc2FnZSwgZG9tRXJyb3IpO1xuICAgICAgICBpZiAoXCJzdGFja1wiIGluIGRvbUVycm9yKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHJ2LCBcInN0YWNrXCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyLnN0YWNrO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgZnVsbE5hbWVFeGNlcHRpb25zID0gZXJyb3JMaXN0LnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIGlmIChbXCJTeW50YXhcIiwgXCJUeXBlXCIsIFwiUmFuZ2VcIl0uaW5kZXhPZihuYW1lKSA9PT0gLTEpXG4gICAgICAgICAgICBvYmpbbmFtZSArIFwiRXJyb3JcIl0gPSBleGNlcHRpb25zW25hbWVdO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuTW9kaWZ5RXJyb3IgPSBNb2RpZnlFcnJvcjtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuRGV4aWVFcnJvciA9IERleGllRXJyb3I7XG4gICAgZnVsbE5hbWVFeGNlcHRpb25zLkJ1bGtFcnJvciA9IEJ1bGtFcnJvcjtcblxuICAgIGZ1bmN0aW9uIG5vcCgpIHsgfVxuICAgIGZ1bmN0aW9uIG1pcnJvcih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuICAgIGZ1bmN0aW9uIHB1cmVGdW5jdGlvbkNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT0gbnVsbCB8fCBmMSA9PT0gbWlycm9yKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGYyKGYxKHZhbCkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYWxsQm90aChvbjEsIG9uMikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb24xLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBvbjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaG9va0NyZWF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgICAgIGlmIChmMSA9PT0gbm9wKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAocmVzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gcmVzO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlczIgIT09IHVuZGVmaW5lZCA/IHJlczIgOiByZXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tEZWxldGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgb25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MsXG4gICAgICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yO1xuICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChvbnN1Y2Nlc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyA/IGNhbGxCb3RoKG9uc3VjY2VzcywgdGhpcy5vbnN1Y2Nlc3MpIDogb25zdWNjZXNzO1xuICAgICAgICAgICAgaWYgKG9uZXJyb3IpXG4gICAgICAgICAgICAgICAgdGhpcy5vbmVycm9yID0gdGhpcy5vbmVycm9yID8gY2FsbEJvdGgob25lcnJvciwgdGhpcy5vbmVycm9yKSA6IG9uZXJyb3I7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tVcGRhdGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtb2RpZmljYXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGV4dGVuZChtb2RpZmljYXRpb25zLCByZXMpO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlcyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAocmVzMiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVzMikgOlxuICAgICAgICAgICAgICAgIChleHRlbmQocmVzLCByZXMyKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvbWlzYWJsZUNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiB0eXBlb2YgcmVzLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpeiA9IHRoaXMsIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXosIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGRlYnVnID0gdHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvXihodHRwfGh0dHBzKTpcXC9cXC8obG9jYWxob3N0fDEyN1xcLjBcXC4wXFwuMSkvLnRlc3QobG9jYXRpb24uaHJlZik7XG4gICAgZnVuY3Rpb24gc2V0RGVidWcodmFsdWUsIGZpbHRlcikge1xuICAgICAgICBkZWJ1ZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHZhciBJTlRFUk5BTCA9IHt9O1xuICAgIHZhciBaT05FX0VDSE9fTElNSVQgPSAxMDAsIF9hJDEgPSB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgP1xuICAgICAgICBbXSA6XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsUCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnIHx8ICFjcnlwdG8uc3VidGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBbZ2xvYmFsUCwgZ2V0UHJvdG8oZ2xvYmFsUCksIGdsb2JhbFBdO1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVAgPSBjcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS01MTJcIiwgbmV3IFVpbnQ4QXJyYXkoWzBdKSk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5hdGl2ZVAsXG4gICAgICAgICAgICAgICAgZ2V0UHJvdG8obmF0aXZlUCksXG4gICAgICAgICAgICAgICAgZ2xvYmFsUFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSkoKSwgcmVzb2x2ZWROYXRpdmVQcm9taXNlID0gX2EkMVswXSwgbmF0aXZlUHJvbWlzZVByb3RvID0gX2EkMVsxXSwgcmVzb2x2ZWRHbG9iYWxQcm9taXNlID0gX2EkMVsyXSwgbmF0aXZlUHJvbWlzZVRoZW4gPSBuYXRpdmVQcm9taXNlUHJvdG8gJiYgbmF0aXZlUHJvbWlzZVByb3RvLnRoZW47XG4gICAgdmFyIE5hdGl2ZVByb21pc2UgPSByZXNvbHZlZE5hdGl2ZVByb21pc2UgJiYgcmVzb2x2ZWROYXRpdmVQcm9taXNlLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwYXRjaEdsb2JhbFByb21pc2UgPSAhIXJlc29sdmVkR2xvYmFsUHJvbWlzZTtcbiAgICBmdW5jdGlvbiBzY2hlZHVsZVBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2socGh5c2ljYWxUaWNrKTtcbiAgICB9XG4gICAgdmFyIGFzYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICAgICAgbWljcm90aWNrUXVldWUucHVzaChbY2FsbGJhY2ssIGFyZ3NdKTtcbiAgICAgICAgaWYgKG5lZWRzTmV3UGh5c2ljYWxUaWNrKSB7XG4gICAgICAgICAgICBzY2hlZHVsZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWUsXG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlLFxuICAgIHVuaGFuZGxlZEVycm9ycyA9IFtdLFxuICAgIHJlamVjdGluZ0Vycm9ycyA9IFtdLFxuICAgIHJlamVjdGlvbk1hcHBlciA9IG1pcnJvcjtcbiAgICB2YXIgZ2xvYmFsUFNEID0ge1xuICAgICAgICBpZDogJ2dsb2JhbCcsXG4gICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgcmVmOiAwLFxuICAgICAgICB1bmhhbmRsZWRzOiBbXSxcbiAgICAgICAgb251bmhhbmRsZWQ6IG5vcCxcbiAgICAgICAgcGdwOiBmYWxzZSxcbiAgICAgICAgZW52OiB7fSxcbiAgICAgICAgZmluYWxpemU6IG5vcFxuICAgIH07XG4gICAgdmFyIFBTRCA9IGdsb2JhbFBTRDtcbiAgICB2YXIgbWljcm90aWNrUXVldWUgPSBbXTtcbiAgICB2YXIgbnVtU2NoZWR1bGVkQ2FsbHMgPSAwO1xuICAgIHZhciB0aWNrRmluYWxpemVycyA9IFtdO1xuICAgIGZ1bmN0aW9uIERleGllUHJvbWlzZShmbikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9saWIgPSBmYWxzZTtcbiAgICAgICAgdmFyIHBzZCA9ICh0aGlzLl9QU0QgPSBQU0QpO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAoZm4gIT09IElOVEVSTkFMKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24odGhpcywgdGhpcy5fdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBudWxsO1xuICAgICAgICArK3BzZC5yZWY7XG4gICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayh0aGlzLCBmbik7XG4gICAgfVxuICAgIHZhciB0aGVuUHJvcCA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcHNkID0gUFNELCBtaWNyb1Rhc2tJZCA9IHRvdGFsRWNob2VzO1xuICAgICAgICAgICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlQXdhaXQgPSAhcHNkLmdsb2JhbCAmJiAocHNkICE9PSBQU0QgfHwgbWljcm9UYXNrSWQgIT09IHRvdGFsRWNob2VzKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xlYW51cCA9IHBvc3NpYmxlQXdhaXQgJiYgIWRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIoX3RoaXMsIG5ldyBMaXN0ZW5lcihuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uRnVsZmlsbGVkLCBwc2QsIHBvc3NpYmxlQXdhaXQsIGNsZWFudXApLCBuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uUmVqZWN0ZWQsIHBzZCwgcG9zc2libGVBd2FpdCwgY2xlYW51cCksIHJlc29sdmUsIHJlamVjdCwgcHNkKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnNvbGVUYXNrKVxuICAgICAgICAgICAgICAgICAgICBydi5fY29uc29sZVRhc2sgPSB0aGlzLl9jb25zb2xlVGFzaztcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGVuLnByb3RvdHlwZSA9IElOVEVSTkFMO1xuICAgICAgICAgICAgcmV0dXJuIHRoZW47XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHRoaXMsICd0aGVuJywgdmFsdWUgJiYgdmFsdWUucHJvdG90eXBlID09PSBJTlRFUk5BTCA/XG4gICAgICAgICAgICAgICAgdGhlblByb3AgOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdGhlblByb3Auc2V0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb3BzKERleGllUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICAgICAgdGhlbjogdGhlblByb3AsXG4gICAgICAgIF90aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIodGhpcywgbmV3IExpc3RlbmVyKG51bGwsIG51bGwsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBQU0QpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sIGhhbmRsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnIgaW5zdGFuY2VvZiB0eXBlID8gaGFuZGxlcihlcnIpIDogUHJvbWlzZVJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIgJiYgZXJyLm5hbWUgPT09IHR5cGUgPyBoYW5kbGVyKGVycikgOiBQcm9taXNlUmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmFsbHk6IGZ1bmN0aW9uIChvbkZpbmFsbHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUob25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZVJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiBmdW5jdGlvbiAobXMsIG1zZykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBtcyA8IEluZmluaXR5ID9cbiAgICAgICAgICAgICAgICBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb25zLlRpbWVvdXQobXNnKSk7IH0sIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGhlbihyZXNvbHZlLCByZWplY3QpLmZpbmFsbHkoY2xlYXJUaW1lb3V0LmJpbmQobnVsbCwgaGFuZGxlKSk7XG4gICAgICAgICAgICAgICAgfSkgOiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZylcbiAgICAgICAgc2V0UHJvcChEZXhpZVByb21pc2UucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsICdEZXhpZS5Qcm9taXNlJyk7XG4gICAgZ2xvYmFsUFNELmVudiA9IHNuYXBTaG90KCk7XG4gICAgZnVuY3Rpb24gTGlzdGVuZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdCwgem9uZSkge1xuICAgICAgICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICAgICAgICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgdGhpcy5wc2QgPSB6b25lO1xuICAgIH1cbiAgICBwcm9wcyhEZXhpZVByb21pc2UsIHtcbiAgICAgICAgYWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcmVtYWluaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGV4aWVQcm9taXNlKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBydiA9IG5ldyBEZXhpZVByb21pc2UoSU5URVJOQUwsIHRydWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBQcm9taXNlUmVqZWN0LFxuICAgICAgICByYWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihyZXNvbHZlLCByZWplY3QpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBQU0Q6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNEOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIFBTRCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsRWNob2VzOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdG90YWxFY2hvZXM7IH0gfSxcbiAgICAgICAgbmV3UFNEOiBuZXdTY29wZSxcbiAgICAgICAgdXNlUFNEOiB1c2VQU0QsXG4gICAgICAgIHNjaGVkdWxlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhc2FwOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgYXNhcCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdGlvbk1hcHBlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3Rpb25NYXBwZXI7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZWplY3Rpb25NYXBwZXIgPSB2YWx1ZTsgfVxuICAgICAgICB9LFxuICAgICAgICBmb2xsb3c6IGZ1bmN0aW9uIChmbiwgem9uZVByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBzZCA9IFBTRDtcbiAgICAgICAgICAgICAgICAgICAgcHNkLnVuaGFuZGxlZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcHNkLm9udW5oYW5kbGVkID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICBwc2QuZmluYWxpemUgPSBjYWxsQm90aChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5oYW5kbGVkcy5sZW5ndGggPT09IDAgPyByZXNvbHZlKCkgOiByZWplY3QoX3RoaXMudW5oYW5kbGVkc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcHNkLmZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9LCB6b25lUHJvcHMsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChOYXRpdmVQcm9taXNlKSB7XG4gICAgICAgIGlmIChOYXRpdmVQcm9taXNlLmFsbFNldHRsZWQpXG4gICAgICAgICAgICBzZXRQcm9wKERleGllUHJvbWlzZSwgXCJhbGxTZXR0bGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVQcm9taXNlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHBvc3NpYmxlUHJvbWlzZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShyZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVByb21pc2VzLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHsgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHApLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwiZnVsZmlsbGVkXCIsIHZhbHVlOiB2YWx1ZSB9OyB9LCBmdW5jdGlvbiAocmVhc29uKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwicmVqZWN0ZWRcIiwgcmVhc29uOiByZWFzb24gfTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIC0tcmVtYWluaW5nIHx8IHJlc29sdmUocmVzdWx0cyk7IH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS5hbnkgJiYgdHlwZW9mIEFnZ3JlZ2F0ZUVycm9yICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHNldFByb3AoRGV4aWVQcm9taXNlLCBcImFueVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlUHJvbWlzZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cykubWFwKG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBwb3NzaWJsZVByb21pc2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gbmV3IEFycmF5KHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlUHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbiAocCwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUocCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9LCBmdW5jdGlvbiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXNbaV0gPSBmYWlsdXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJlbWFpbmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKGZhaWx1cmVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS53aXRoUmVzb2x2ZXJzKVxuICAgICAgICAgICAgRGV4aWVQcm9taXNlLndpdGhSZXNvbHZlcnMgPSBOYXRpdmVQcm9taXNlLndpdGhSZXNvbHZlcnM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBwcm9taXNlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICAgICAgICAgIHZhciBzaG91bGRFeGVjdXRlVGljayA9IHByb21pc2UuX2xpYiAmJiBiZWdpbk1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIERleGllUHJvbWlzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX3RoZW4ocmVzb2x2ZSwgcmVqZWN0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9LCBoYW5kbGVSZWplY3Rpb24uYmluZChudWxsLCBwcm9taXNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24ocHJvbWlzZSwgZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdGlvbihwcm9taXNlLCByZWFzb24pIHtcbiAgICAgICAgcmVqZWN0aW5nRXJyb3JzLnB1c2gocmVhc29uKTtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2hvdWxkRXhlY3V0ZVRpY2sgPSBwcm9taXNlLl9saWIgJiYgYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICByZWFzb24gPSByZWplY3Rpb25NYXBwZXIocmVhc29uKTtcbiAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSByZWFzb247XG4gICAgICAgIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IocHJvbWlzZSk7XG4gICAgICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICAgICAgaWYgKHNob3VsZEV4ZWN1dGVUaWNrKVxuICAgICAgICAgICAgZW5kTWljcm9UaWNrU2NvcGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHByb21pc2UuX2xpc3RlbmVycztcbiAgICAgICAgcHJvbWlzZS5fbGlzdGVuZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHNkID0gcHJvbWlzZS5fUFNEO1xuICAgICAgICAtLXBzZC5yZWYgfHwgcHNkLmZpbmFsaXplKCk7XG4gICAgICAgIGlmIChudW1TY2hlZHVsZWRDYWxscyA9PT0gMCkge1xuICAgICAgICAgICAgKytudW1TY2hlZHVsZWRDYWxscztcbiAgICAgICAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNiID0gcHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5vbkZ1bGZpbGxlZCA6IGxpc3RlbmVyLm9uUmVqZWN0ZWQ7XG4gICAgICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChwcm9taXNlLl9zdGF0ZSA/IGxpc3RlbmVyLnJlc29sdmUgOiBsaXN0ZW5lci5yZWplY3QpKHByb21pc2UuX3ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpc3RlbmVyLnBzZC5yZWY7XG4gICAgICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgICAgIGFzYXAoY2FsbExpc3RlbmVyLCBbY2IsIHByb21pc2UsIGxpc3RlbmVyXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcihjYiwgcHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXQsIHZhbHVlID0gcHJvbWlzZS5fdmFsdWU7XG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX3N0YXRlICYmIHJlamVjdGluZ0Vycm9ycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVqZWN0aW5nRXJyb3JzID0gW107XG4gICAgICAgICAgICByZXQgPSBkZWJ1ZyAmJiBwcm9taXNlLl9jb25zb2xlVGFzayA/IHByb21pc2UuX2NvbnNvbGVUYXNrLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiBjYih2YWx1ZSk7IH0pIDogY2IodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFwcm9taXNlLl9zdGF0ZSAmJiByZWplY3RpbmdFcnJvcnMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGlzdGVuZXIucmVzb2x2ZShyZXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgLS1saXN0ZW5lci5wc2QucmVmIHx8IGxpc3RlbmVyLnBzZC5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgdXNlUFNEKGdsb2JhbFBTRCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmVnaW5NaWNyb1RpY2tTY29wZSgpICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZWdpbk1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBpc091dHNpZGVNaWNyb1RpY2s7XG4gICAgICAgIGlzT3V0c2lkZU1pY3JvVGljayA9IGZhbHNlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gd2FzUm9vdEV4ZWM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuZE1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tzLCBpLCBsO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB3aGlsZSAobWljcm90aWNrUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcyA9IG1pY3JvdGlja1F1ZXVlO1xuICAgICAgICAgICAgICAgIG1pY3JvdGlja1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgbCA9IGNhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGNhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVswXS5hcHBseShudWxsLCBpdGVtWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApO1xuICAgICAgICBpc091dHNpZGVNaWNyb1RpY2sgPSB0cnVlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmFsaXplUGh5c2ljYWxUaWNrKCkge1xuICAgICAgICB2YXIgdW5oYW5kbGVkRXJycyA9IHVuaGFuZGxlZEVycm9ycztcbiAgICAgICAgdW5oYW5kbGVkRXJyb3JzID0gW107XG4gICAgICAgIHVuaGFuZGxlZEVycnMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcC5fUFNELm9udW5oYW5kbGVkLmNhbGwobnVsbCwgcC5fdmFsdWUsIHApO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGZpbmFsaXplcnMgPSB0aWNrRmluYWxpemVycy5zbGljZSgwKTtcbiAgICAgICAgdmFyIGkgPSBmaW5hbGl6ZXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGkpXG4gICAgICAgICAgICBmaW5hbGl6ZXJzWy0taV0oKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmbikge1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgdGlja0ZpbmFsaXplcnMuc3BsaWNlKHRpY2tGaW5hbGl6ZXJzLmluZGV4T2YoZmluYWxpemVyKSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGlja0ZpbmFsaXplcnMucHVzaChmaW5hbGl6ZXIpO1xuICAgICAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgIGZpbmFsaXplUGh5c2ljYWxUaWNrKCk7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkUG9zc2libHlVbmhhbmRsZWRFcnJvcihwcm9taXNlKSB7XG4gICAgICAgIGlmICghdW5oYW5kbGVkRXJyb3JzLnNvbWUoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZTsgfSkpXG4gICAgICAgICAgICB1bmhhbmRsZWRFcnJvcnMucHVzaChwcm9taXNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGkgPSB1bmhhbmRsZWRFcnJvcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaSlcbiAgICAgICAgICAgIGlmICh1bmhhbmRsZWRFcnJvcnNbLS1pXS5fdmFsdWUgPT09IHByb21pc2UuX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIFByb21pc2VSZWplY3QocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKElOVEVSTkFMLCBmYWxzZSwgcmVhc29uKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JhcChmbiwgZXJyb3JDYXRjaGVyKSB7XG4gICAgICAgIHZhciBwc2QgPSBQU0Q7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBiZWdpbk1pY3JvVGlja1Njb3BlKCksIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN3aXRjaFRvWm9uZShwc2QsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhdGNoZXIgJiYgZXJyb3JDYXRjaGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9ab25lKG91dGVyU2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAod2FzUm9vdEV4ZWMpXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciB0YXNrID0geyBhd2FpdHM6IDAsIGVjaG9lczogMCwgaWQ6IDAgfTtcbiAgICB2YXIgdGFza0NvdW50ZXIgPSAwO1xuICAgIHZhciB6b25lU3RhY2sgPSBbXTtcbiAgICB2YXIgem9uZUVjaG9lcyA9IDA7XG4gICAgdmFyIHRvdGFsRWNob2VzID0gMDtcbiAgICB2YXIgem9uZV9pZF9jb3VudGVyID0gMDtcbiAgICBmdW5jdGlvbiBuZXdTY29wZShmbiwgcHJvcHMsIGExLCBhMikge1xuICAgICAgICB2YXIgcGFyZW50ID0gUFNELCBwc2QgPSBPYmplY3QuY3JlYXRlKHBhcmVudCk7XG4gICAgICAgIHBzZC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHBzZC5yZWYgPSAwO1xuICAgICAgICBwc2QuZ2xvYmFsID0gZmFsc2U7XG4gICAgICAgIHBzZC5pZCA9ICsrem9uZV9pZF9jb3VudGVyO1xuICAgICAgICBnbG9iYWxQU0QuZW52O1xuICAgICAgICBwc2QuZW52ID0gcGF0Y2hHbG9iYWxQcm9taXNlID8ge1xuICAgICAgICAgICAgUHJvbWlzZTogRGV4aWVQcm9taXNlLFxuICAgICAgICAgICAgUHJvbWlzZVByb3A6IHsgdmFsdWU6IERleGllUHJvbWlzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgYWxsOiBEZXhpZVByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogRGV4aWVQcm9taXNlLnJhY2UsXG4gICAgICAgICAgICBhbGxTZXR0bGVkOiBEZXhpZVByb21pc2UuYWxsU2V0dGxlZCxcbiAgICAgICAgICAgIGFueTogRGV4aWVQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IERleGllUHJvbWlzZS5yZXNvbHZlLFxuICAgICAgICAgICAgcmVqZWN0OiBEZXhpZVByb21pc2UucmVqZWN0LFxuICAgICAgICB9IDoge307XG4gICAgICAgIGlmIChwcm9wcylcbiAgICAgICAgICAgIGV4dGVuZChwc2QsIHByb3BzKTtcbiAgICAgICAgKytwYXJlbnQucmVmO1xuICAgICAgICBwc2QuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAtLXRoaXMucGFyZW50LnJlZiB8fCB0aGlzLnBhcmVudC5maW5hbGl6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcnYgPSB1c2VQU0QocHNkLCBmbiwgYTEsIGEyKTtcbiAgICAgICAgaWYgKHBzZC5yZWYgPT09IDApXG4gICAgICAgICAgICBwc2QuZmluYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpIHtcbiAgICAgICAgaWYgKCF0YXNrLmlkKVxuICAgICAgICAgICAgdGFzay5pZCA9ICsrdGFza0NvdW50ZXI7XG4gICAgICAgICsrdGFzay5hd2FpdHM7XG4gICAgICAgIHRhc2suZWNob2VzICs9IFpPTkVfRUNIT19MSU1JVDtcbiAgICAgICAgcmV0dXJuIHRhc2suaWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCkge1xuICAgICAgICBpZiAoIXRhc2suYXdhaXRzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoLS10YXNrLmF3YWl0cyA9PT0gMClcbiAgICAgICAgICAgIHRhc2suaWQgPSAwO1xuICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzICogWk9ORV9FQ0hPX0xJTUlUO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCgnJyArIG5hdGl2ZVByb21pc2VUaGVuKS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgPT09IC0xKSB7XG4gICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzID0gZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMgPSBub3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyhwb3NzaWJsZVByb21pc2UpIHtcbiAgICAgICAgaWYgKHRhc2suZWNob2VzICYmIHBvc3NpYmxlUHJvbWlzZSAmJiBwb3NzaWJsZVByb21pc2UuY29uc3RydWN0b3IgPT09IE5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lRW50ZXJFY2hvKHRhcmdldFpvbmUpIHtcbiAgICAgICAgKyt0b3RhbEVjaG9lcztcbiAgICAgICAgaWYgKCF0YXNrLmVjaG9lcyB8fCAtLXRhc2suZWNob2VzID09PSAwKSB7XG4gICAgICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzID0gdGFzay5pZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgem9uZVN0YWNrLnB1c2goUFNEKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIHRydWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lTGVhdmVFY2hvKCkge1xuICAgICAgICB2YXIgem9uZSA9IHpvbmVTdGFja1t6b25lU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHpvbmVTdGFjay5wb3AoKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHpvbmUsIGZhbHNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIGJFbnRlcmluZ1pvbmUpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRab25lID0gUFNEO1xuICAgICAgICBpZiAoYkVudGVyaW5nWm9uZSA/IHRhc2suZWNob2VzICYmICghem9uZUVjaG9lcysrIHx8IHRhcmdldFpvbmUgIT09IFBTRCkgOiB6b25lRWNob2VzICYmICghLS16b25lRWNob2VzIHx8IHRhcmdldFpvbmUgIT09IFBTRCkpIHtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGJFbnRlcmluZ1pvbmUgPyB6b25lRW50ZXJFY2hvLmJpbmQobnVsbCwgdGFyZ2V0Wm9uZSkgOiB6b25lTGVhdmVFY2hvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PT0gUFNEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBQU0QgPSB0YXJnZXRab25lO1xuICAgICAgICBpZiAoY3VycmVudFpvbmUgPT09IGdsb2JhbFBTRClcbiAgICAgICAgICAgIGdsb2JhbFBTRC5lbnYgPSBzbmFwU2hvdCgpO1xuICAgICAgICBpZiAocGF0Y2hHbG9iYWxQcm9taXNlKSB7XG4gICAgICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IGdsb2JhbFBTRC5lbnYuUHJvbWlzZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbnYgPSB0YXJnZXRab25lLmVudjtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Wm9uZS5nbG9iYWwgfHwgdGFyZ2V0Wm9uZS5nbG9iYWwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2dsb2JhbCwgJ1Byb21pc2UnLCB0YXJnZXRFbnYuUHJvbWlzZVByb3ApO1xuICAgICAgICAgICAgICAgIEdsb2JhbFByb21pc2UuYWxsID0gdGFyZ2V0RW52LmFsbDtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJhY2UgPSB0YXJnZXRFbnYucmFjZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlc29sdmUgPSB0YXJnZXRFbnYucmVzb2x2ZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlamVjdCA9IHRhcmdldEVudi5yZWplY3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVudi5hbGxTZXR0bGVkKVxuICAgICAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLmFsbFNldHRsZWQgPSB0YXJnZXRFbnYuYWxsU2V0dGxlZDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RW52LmFueSlcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5hbnkgPSB0YXJnZXRFbnYuYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNuYXBTaG90KCkge1xuICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IF9nbG9iYWwuUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHBhdGNoR2xvYmFsUHJvbWlzZSA/IHtcbiAgICAgICAgICAgIFByb21pc2U6IEdsb2JhbFByb21pc2UsXG4gICAgICAgICAgICBQcm9taXNlUHJvcDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfZ2xvYmFsLCBcIlByb21pc2VcIiksXG4gICAgICAgICAgICBhbGw6IEdsb2JhbFByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogR2xvYmFsUHJvbWlzZS5yYWNlLFxuICAgICAgICAgICAgYWxsU2V0dGxlZDogR2xvYmFsUHJvbWlzZS5hbGxTZXR0bGVkLFxuICAgICAgICAgICAgYW55OiBHbG9iYWxQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IEdsb2JhbFByb21pc2UucmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdDogR2xvYmFsUHJvbWlzZS5yZWplY3QsXG4gICAgICAgIH0gOiB7fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXNlUFNEKHBzZCwgZm4sIGExLCBhMiwgYTMpIHtcbiAgICAgICAgdmFyIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUocHNkLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBmbihhMSwgYTIsIGEzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZShvdXRlclNjb3BlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcChmbiwgem9uZSwgcG9zc2libGVBd2FpdCwgY2xlYW51cCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nID8gZm4gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0ZXJab25lID0gUFNEO1xuICAgICAgICAgICAgaWYgKHBvc3NpYmxlQXdhaXQpXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZSh6b25lLCB0cnVlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJab25lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXhlY0luR2xvYmFsQ29udGV4dChjYikge1xuICAgICAgICBpZiAoUHJvbWlzZSA9PT0gTmF0aXZlUHJvbWlzZSAmJiB0YXNrLmVjaG9lcyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHpvbmVFY2hvZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5xdWV1ZU5hdGl2ZU1pY3JvVGFzayhjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVqZWN0aW9uID0gRGV4aWVQcm9taXNlLnJlamVjdDtcblxuICAgIGZ1bmN0aW9uIHRlbXBUcmFuc2FjdGlvbihkYiwgbW9kZSwgc3RvcmVOYW1lcywgZm4pIHtcbiAgICAgICAgaWYgKCFkYi5pZGJkYiB8fCAoIWRiLl9zdGF0ZS5vcGVuQ29tcGxldGUgJiYgKCFQU0QubGV0VGhyb3VnaCAmJiAhZGIuX3ZpcCkpKSB7XG4gICAgICAgICAgICBpZiAoZGIuX3N0YXRlLm9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoZGIuX3N0YXRlLmRiT3BlbkVycm9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRiLl9zdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYi5fc3RhdGUuYXV0b09wZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKSk7XG4gICAgICAgICAgICAgICAgZGIub3BlbigpLmNhdGNoKG5vcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGIuX3N0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBmbik7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXgubmFtZSA9PT0gZXJybmFtZXMuSW52YWxpZFN0YXRlICYmIGRiLmlzT3BlbigpICYmIC0tZGIuX3N0YXRlLlBSMTM5OF9tYXhMb29wID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBOZWVkIHRvIHJlb3BlbiBkYicpO1xuICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5vcGVuKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB0ZW1wVHJhbnNhY3Rpb24oZGIsIG1vZGUsIHN0b3JlTmFtZXMsIGZuKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9wcm9taXNlKG1vZGUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBQU0QudHJhbnMgPSB0cmFucztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUnKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMuY29tbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZSA9PT0gJ3JlYWRvbmx5JyA/IHJlc3VsdCA6IHRyYW5zLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIERFWElFX1ZFUlNJT04gPSAnNC4yLjEnO1xuICAgIHZhciBtYXhTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTM1KTtcbiAgICB2YXIgbWluS2V5ID0gLUluZmluaXR5O1xuICAgIHZhciBJTlZBTElEX0tFWV9BUkdVTUVOVCA9IFwiSW52YWxpZCBrZXkgcHJvdmlkZWQuIEtleXMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZywgbnVtYmVyLCBEYXRlIG9yIEFycmF5PHN0cmluZyB8IG51bWJlciB8IERhdGU+LlwiO1xuICAgIHZhciBTVFJJTkdfRVhQRUNURUQgPSBcIlN0cmluZyBleHBlY3RlZC5cIjtcbiAgICB2YXIgY29ubmVjdGlvbnMgPSBbXTtcbiAgICB2YXIgREJOQU1FU19EQiA9ICdfX2RibmFtZXMnO1xuICAgIHZhciBSRUFET05MWSA9ICdyZWFkb25seSc7XG4gICAgdmFyIFJFQURXUklURSA9ICdyZWFkd3JpdGUnO1xuXG4gICAgZnVuY3Rpb24gY29tYmluZShmaWx0ZXIxLCBmaWx0ZXIyKSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXIxID9cbiAgICAgICAgICAgIGZpbHRlcjIgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpbHRlcjEuYXBwbHkodGhpcywgYXJndW1lbnRzKSAmJiBmaWx0ZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gOlxuICAgICAgICAgICAgICAgIGZpbHRlcjEgOlxuICAgICAgICAgICAgZmlsdGVyMjtcbiAgICB9XG5cbiAgICB2YXIgQW55UmFuZ2UgPSB7XG4gICAgICAgIHR5cGU6IDMgLFxuICAgICAgICBsb3dlcjogLUluZmluaXR5LFxuICAgICAgICBsb3dlck9wZW46IGZhbHNlLFxuICAgICAgICB1cHBlcjogW1tdXSxcbiAgICAgICAgdXBwZXJPcGVuOiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Yga2V5UGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAhL1xcLi8udGVzdChrZXlQYXRoKVxuICAgICAgICAgICAgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtrZXlQYXRoXSA9PT0gdW5kZWZpbmVkICYmIChrZXlQYXRoIGluIG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gZGVlcENsb25lKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iajsgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBFbnRpdHkoKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbnMuVHlwZShcIkVudGl0eSBpbnN0YW5jZXMgbXVzdCBuZXZlciBiZSBuZXc6ZWQuIEluc3RhbmNlcyBhcmUgZ2VuZXJhdGVkIGJ5IHRoZSBmcmFtZXdvcmsgYnlwYXNzaW5nIHRoZSBjb25zdHJ1Y3Rvci5cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY21wKGEsIGIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0YSA9IHR5cGUoYSk7XG4gICAgICAgICAgICB2YXIgdGIgPSB0eXBlKGIpO1xuICAgICAgICAgICAgaWYgKHRhICE9PSB0Yikge1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ0FycmF5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiID09PSAnQXJyYXknKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRhID09PSAnYmluYXJ5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiID09PSAnYmluYXJ5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICh0YiA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGEgPT09ICdEYXRlJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiICE9PSAnRGF0ZScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0YSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JpbmFyeSc6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVVaW50OEFycmF5cyhnZXRVaW50OEFycmF5KGEpLCBnZXRVaW50OEFycmF5KGIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUFycmF5cyhhLCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGEsIGIpIHtcbiAgICAgICAgdmFyIGFsID0gYS5sZW5ndGg7XG4gICAgICAgIHZhciBibCA9IGIubGVuZ3RoO1xuICAgICAgICB2YXIgbCA9IGFsIDwgYmwgPyBhbCA6IGJsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGNtcChhW2ldLCBiW2ldKTtcbiAgICAgICAgICAgIGlmIChyZXMgIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWwgPT09IGJsID8gMCA6IGFsIDwgYmwgPyAtMSA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBhcmVVaW50OEFycmF5cyhhLCBiKSB7XG4gICAgICAgIHZhciBhbCA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgYmwgPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIGwgPSBhbCA8IGJsID8gYWwgOiBibDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChhW2ldICE9PSBiW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiBhW2ldIDwgYltpXSA/IC0xIDogMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWwgPT09IGJsID8gMCA6IGFsIDwgYmwgPyAtMSA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHR5cGUoeCkge1xuICAgICAgICB2YXIgdCA9IHR5cGVvZiB4O1xuICAgICAgICBpZiAodCAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh4KSlcbiAgICAgICAgICAgIHJldHVybiAnYmluYXJ5JztcbiAgICAgICAgdmFyIHRzVGFnID0gdG9TdHJpbmdUYWcoeCk7XG4gICAgICAgIHJldHVybiB0c1RhZyA9PT0gJ0FycmF5QnVmZmVyJyA/ICdiaW5hcnknIDogdHNUYWc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFVpbnQ4QXJyYXkoYSkge1xuICAgICAgICBpZiAoYSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhhKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShhLmJ1ZmZlciwgYS5ieXRlT2Zmc2V0LCBhLmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcih0YWJsZSwga2V5cywgcmVzKSB7XG4gICAgICAgIHZhciB5UHJvcHMgPSB0YWJsZS5zY2hlbWEueVByb3BzO1xuICAgICAgICBpZiAoIXlQcm9wcylcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIGlmIChrZXlzICYmIHJlcy5udW1GYWlsdXJlcyA+IDApXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICFyZXMuZmFpbHVyZXNbaV07IH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoeVByb3BzLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVzVGFibGUgPSBfYS51cGRhdGVzVGFibGU7XG4gICAgICAgICAgICByZXR1cm4ga2V5c1xuICAgICAgICAgICAgICAgID8gdGFibGUuZGIudGFibGUodXBkYXRlc1RhYmxlKS53aGVyZSgnaycpLmFueU9mKGtleXMpLmRlbGV0ZSgpXG4gICAgICAgICAgICAgICAgOiB0YWJsZS5kYi50YWJsZSh1cGRhdGVzVGFibGUpLmNsZWFyKCk7XG4gICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlczsgfSk7XG4gICAgfVxuXG4gICAgdmFyIFByb3BNb2RpZmljYXRpb24gPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUHJvcE1vZGlmaWNhdGlvbihzcGVjKSB7XG4gICAgICAgICAgICB0aGlzW1wiQEBwcm9wbW9kXCJdID0gc3BlYztcbiAgICAgICAgfVxuICAgICAgICBQcm9wTW9kaWZpY2F0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgc3BlYyA9IHRoaXNbXCJAQHByb3Btb2RcIl07XG4gICAgICAgICAgICBpZiAoc3BlYy5hZGQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gc3BlYy5hZGQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkodGVybSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgKGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXSksIHRydWUpLCB0ZXJtLCB0cnVlKS5zb3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoTnVtYmVyKHZhbHVlKSB8fCAwKSArIHRlcm07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtID09PSAnYmlnaW50Jykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCh2YWx1ZSkgKyB0ZXJtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCgwKSArIHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGVybSBcIi5jb25jYXQodGVybSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwZWMucmVtb3ZlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VidHJhaGVuZF8xID0gc3BlYy5yZW1vdmU7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoc3VidHJhaGVuZF8xKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFzdWJ0cmFoZW5kXzEuaW5jbHVkZXMoaXRlbSk7IH0pLnNvcnQoKSA6IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN1YnRyYWhlbmRfMSA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpIC0gc3VidHJhaGVuZF8xO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VidHJhaGVuZF8xID09PSAnYmlnaW50Jykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCh2YWx1ZSkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KDApIC0gc3VidHJhaGVuZF8xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN1YnRyYWhlbmQgXCIuY29uY2F0KHN1YnRyYWhlbmRfMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZWZpeFRvUmVwbGFjZSA9IChfYSA9IHNwZWMucmVwbGFjZVByZWZpeCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdO1xuICAgICAgICAgICAgaWYgKHByZWZpeFRvUmVwbGFjZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnN0YXJ0c1dpdGgocHJlZml4VG9SZXBsYWNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGVjLnJlcGxhY2VQcmVmaXhbMV0gKyB2YWx1ZS5zdWJzdHJpbmcocHJlZml4VG9SZXBsYWNlLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcm9wTW9kaWZpY2F0aW9uO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBhcHBseVVwZGF0ZVNwZWMob2JqLCBjaGFuZ2VzKSB7XG4gICAgICAgIHZhciBrZXlQYXRocyA9IGtleXMoY2hhbmdlcyk7XG4gICAgICAgIHZhciBudW1LZXlzID0ga2V5UGF0aHMubGVuZ3RoO1xuICAgICAgICB2YXIgYW55dGhpbmdNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUtleXM7ICsraSkge1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSBrZXlQYXRoc1tpXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNoYW5nZXNba2V5UGF0aF07XG4gICAgICAgICAgICB2YXIgb3JpZ1ZhbHVlID0gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9wTW9kaWZpY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdmFsdWUuZXhlY3V0ZShvcmlnVmFsdWUpKTtcbiAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9yaWdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYW55dGhpbmdNb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFueXRoaW5nTW9kaWZpZWQ7XG4gICAgfVxuXG4gICAgdmFyIFRhYmxlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRhYmxlKCkge1xuICAgICAgICB9XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5fdHJhbnMgPSBmdW5jdGlvbiAobW9kZSwgZm4sIHdyaXRlTG9ja2VkKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnMgPSB0aGlzLl90eCB8fCBQU0QudHJhbnM7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgdmFyIHRhc2sgPSBkZWJ1ZyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5jcmVhdGVUYXNrICYmIGNvbnNvbGUuY3JlYXRlVGFzayhcIkRleGllOiBcIi5jb25jYXQobW9kZSA9PT0gJ3JlYWRvbmx5JyA/ICdyZWFkJyA6ICd3cml0ZScsIFwiIFwiKS5jb25jYXQodGhpcy5uYW1lKSk7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1RhYmxlSW5UcmFuc2FjdGlvbihyZXNvbHZlLCByZWplY3QsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cmFucy5zY2hlbWFbdGFibGVOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTm90Rm91bmQoXCJUYWJsZSBcIiArIHRhYmxlTmFtZSArIFwiIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbih0cmFucy5pZGJ0cmFucywgdHJhbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRyYW5zICYmIHRyYW5zLmRiLl9ub3ZpcCA9PT0gdGhpcy5kYi5fbm92aXAgP1xuICAgICAgICAgICAgICAgICAgICB0cmFucyA9PT0gUFNELnRyYW5zID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLl9wcm9taXNlKG1vZGUsIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uLCB3cml0ZUxvY2tlZCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJhbnMuX3Byb21pc2UobW9kZSwgY2hlY2tUYWJsZUluVHJhbnNhY3Rpb24sIHdyaXRlTG9ja2VkKTsgfSwgeyB0cmFuczogdHJhbnMsIHRyYW5zbGVzczogUFNELnRyYW5zbGVzcyB8fCBQU0QgfSkgOlxuICAgICAgICAgICAgICAgICAgICB0ZW1wVHJhbnNhY3Rpb24odGhpcy5kYiwgbW9kZSwgW3RoaXMubmFtZV0sIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgICAgICBwLl9jb25zb2xlVGFzayA9IHRhc2s7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBwLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHdhc1Jvb3RFeGVjKVxuICAgICAgICAgICAgICAgICAgICBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleU9yQ3JpdCwgY2IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoa2V5T3JDcml0ICYmIGtleU9yQ3JpdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKGtleU9yQ3JpdCkuZmlyc3QoY2IpO1xuICAgICAgICAgICAgaWYgKGtleU9yQ3JpdCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuVHlwZShcIkludmFsaWQgYXJndW1lbnQgdG8gVGFibGUuZ2V0KClcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkb25seScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLmdldCh7IHRyYW5zOiB0cmFucywga2V5OiBrZXlPckNyaXQgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gX3RoaXMuaG9vay5yZWFkaW5nLmZpcmUocmVzKTsgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLndoZXJlID0gZnVuY3Rpb24gKGluZGV4T3JDcml0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4T3JDcml0ID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcywgaW5kZXhPckNyaXQpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoaW5kZXhPckNyaXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzLCBcIltcIi5jb25jYXQoaW5kZXhPckNyaXQuam9pbignKycpLCBcIl1cIikpO1xuICAgICAgICAgICAgdmFyIGtleVBhdGhzID0ga2V5cyhpbmRleE9yQ3JpdCk7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aHMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShrZXlQYXRoc1swXSlcbiAgICAgICAgICAgICAgICAgICAgLmVxdWFscyhpbmRleE9yQ3JpdFtrZXlQYXRoc1swXV0pO1xuICAgICAgICAgICAgdmFyIGNvbXBvdW5kSW5kZXggPSB0aGlzLnNjaGVtYS5pbmRleGVzLmNvbmNhdCh0aGlzLnNjaGVtYS5wcmltS2V5KS5maWx0ZXIoZnVuY3Rpb24gKGl4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl4LmNvbXBvdW5kICYmXG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGhzLmV2ZXJ5KGZ1bmN0aW9uIChrZXlQYXRoKSB7IHJldHVybiBpeC5rZXlQYXRoLmluZGV4T2Yoa2V5UGF0aCkgPj0gMDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlQYXRocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGhzLmluZGV4T2YoaXgua2V5UGF0aFtpXSkgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5rZXlQYXRoLmxlbmd0aCAtIGIua2V5UGF0aC5sZW5ndGg7IH0pWzBdO1xuICAgICAgICAgICAgaWYgKGNvbXBvdW5kSW5kZXggJiYgdGhpcy5kYi5fbWF4S2V5ICE9PSBtYXhTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5UGF0aHNJblZhbGlkT3JkZXIgPSBjb21wb3VuZEluZGV4LmtleVBhdGguc2xpY2UoMCwga2V5UGF0aHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUoa2V5UGF0aHNJblZhbGlkT3JkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5lcXVhbHMoa2V5UGF0aHNJblZhbGlkT3JkZXIubWFwKGZ1bmN0aW9uIChrcCkgeyByZXR1cm4gaW5kZXhPckNyaXRba3BdOyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbXBvdW5kSW5kZXggJiYgZGVidWcpXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIHF1ZXJ5IFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShpbmRleE9yQ3JpdCksIFwiIG9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiB3b3VsZCBiZW5lZml0IGZyb20gYSBcIikgK1xuICAgICAgICAgICAgICAgICAgICBcImNvbXBvdW5kIGluZGV4IFtcIi5jb25jYXQoa2V5UGF0aHMuam9pbignKycpLCBcIl1cIikpO1xuICAgICAgICAgICAgdmFyIGlkeEJ5TmFtZSA9IHRoaXMuc2NoZW1hLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcChhLCBiKSA9PT0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IGtleVBhdGhzLnJlZHVjZShmdW5jdGlvbiAoX2EsIGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldkluZGV4ID0gX2FbMF0sIHByZXZGaWx0ZXJGbiA9IF9hWzFdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGlkeEJ5TmFtZVtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbmRleE9yQ3JpdFtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBwcmV2SW5kZXggfHwgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHByZXZJbmRleCB8fCAhaW5kZXggP1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluZShwcmV2RmlsdGVyRm4sIGluZGV4ICYmIGluZGV4Lm11bHRpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IGdldEJ5S2V5UGF0aCh4LCBrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzQXJyYXkocHJvcCkgJiYgcHJvcC5zb21lKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBlcXVhbHModmFsdWUsIGl0ZW0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGVxdWFscyh2YWx1ZSwgZ2V0QnlLZXlQYXRoKHgsIGtleVBhdGgpKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcHJldkZpbHRlckZuXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0sIFtudWxsLCBudWxsXSksIGlkeCA9IF9hWzBdLCBmaWx0ZXJGdW5jdGlvbiA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGlkeCA/XG4gICAgICAgICAgICAgICAgdGhpcy53aGVyZShpZHgubmFtZSkuZXF1YWxzKGluZGV4T3JDcml0W2lkeC5rZXlQYXRoXSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJGdW5jdGlvbikgOlxuICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5kZXggP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcihmaWx0ZXJGdW5jdGlvbikgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLndoZXJlKGtleVBhdGhzKS5lcXVhbHMoJycpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5hbmQoZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAodGhlblNob3J0Y3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5jb3VudCh0aGVuU2hvcnRjdXQpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkub2Zmc2V0KG9mZnNldCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uIChudW1Sb3dzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5saW1pdChudW1Sb3dzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmVhY2goY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICh0aGVuU2hvcnRjdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLnRvQXJyYXkodGhlblNob3J0Y3V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5Db2xsZWN0aW9uKG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5Db2xsZWN0aW9uKG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMsIGlzQXJyYXkoaW5kZXgpID9cbiAgICAgICAgICAgICAgICBcIltcIi5jb25jYXQoaW5kZXguam9pbignKycpLCBcIl1cIikgOlxuICAgICAgICAgICAgICAgIGluZGV4KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkucmV2ZXJzZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUubWFwVG9DbGFzcyA9IGZ1bmN0aW9uIChjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgZGIgPSBfYS5kYiwgdGFibGVOYW1lID0gX2EubmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hLm1hcHBlZENsYXNzID0gY29uc3RydWN0b3I7XG4gICAgICAgICAgICBpZiAoY29uc3RydWN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgRW50aXR5KSB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IgPSAgKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzEucHJvdG90eXBlLCBcImRiXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGI7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUudGFibGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0YWJsZU5hbWU7IH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc18xO1xuICAgICAgICAgICAgICAgIH0oY29uc3RydWN0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmhlcml0ZWRQcm9wcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3RvID0gY29uc3RydWN0b3IucHJvdG90eXBlOyBwcm90bzsgcHJvdG8gPSBnZXRQcm90byhwcm90bykpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bykuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHsgcmV0dXJuIGluaGVyaXRlZFByb3BzLmFkZChwcm9wTmFtZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlYWRIb29rID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5oZXJpdGVkUHJvcHMuaGFzKG0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNbbV0gPSBvYmpbbV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zY2hlbWEucmVhZEhvb2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvb2sucmVhZGluZy51bnN1YnNjcmliZSh0aGlzLnNjaGVtYS5yZWFkSG9vayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjaGVtYS5yZWFkSG9vayA9IHJlYWRIb29rO1xuICAgICAgICAgICAgdGhpcy5ob29rKFwicmVhZGluZ1wiLCByZWFkSG9vayk7XG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5kZWZpbmVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsYXNzKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQodGhpcywgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBUb0NsYXNzKENsYXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuc2NoZW1hLnByaW1LZXksIGF1dG8gPSBfYS5hdXRvLCBrZXlQYXRoID0gX2Eua2V5UGF0aDtcbiAgICAgICAgICAgIHZhciBvYmpUb0FkZCA9IG9iajtcbiAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGF1dG8pIHtcbiAgICAgICAgICAgICAgICBvYmpUb0FkZCA9IHdvcmthcm91bmRGb3JVbmRlZmluZWRQcmltS2V5KGtleVBhdGgpKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2FkZCcsIGtleXM6IGtleSAhPSBudWxsID8gW2tleV0gOiBudWxsLCB2YWx1ZXM6IFtvYmpUb0FkZF0gfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6IHJlcy5sYXN0UmVzdWx0OyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsYXN0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGxhc3RSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnVwc2VydCA9IGZ1bmN0aW9uIChrZXksIG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5UGF0aCA9IHRoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvcmUuZ2V0KHsgdHJhbnM6IHRyYW5zLCBrZXk6IGtleSB9KS50aGVuKGZ1bmN0aW9uIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gZXhpc3RpbmcgIT09IG51bGwgJiYgZXhpc3RpbmcgIT09IHZvaWQgMCA/IGV4aXN0aW5nIDoge307XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5VXBkYXRlU3BlYyhvYmosIG1vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW29ial0sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwc2VydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZXM6IHsga2V5czogW2tleV0sIGNoYW5nZVNwZWNzOiBbbW9kaWZpY2F0aW9uc10gfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6ICEhZXhpc3Rpbmc7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoa2V5T3JPYmplY3QsIG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5T3JPYmplY3QgPT09ICdvYmplY3QnICYmICFpc0FycmF5KGtleU9yT2JqZWN0KSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBnZXRCeUtleVBhdGgoa2V5T3JPYmplY3QsIHRoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkdpdmVuIG9iamVjdCBkb2VzIG5vdCBjb250YWluIGl0cyBwcmltYXJ5IGtleVwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleSkubW9kaWZ5KG1vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleU9yT2JqZWN0KS5tb2RpZnkobW9kaWZpY2F0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICB2YXIgb2JqVG9BZGQgPSBvYmo7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aCAmJiBhdXRvKSB7XG4gICAgICAgICAgICAgICAgb2JqVG9BZGQgPSB3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKShvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAncHV0JywgdmFsdWVzOiBbb2JqVG9BZGRdLCBrZXlzOiBrZXkgIT0gbnVsbCA/IFtrZXldIDogbnVsbCB9KTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiByZXMubGFzdFJlc3VsdDsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCBsYXN0UmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlJywga2V5czogW2tleV0gfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBidWlsdEluRGVsZXRpb25UcmlnZ2VyKF90aGlzLCBba2V5XSwgcmVzKTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiB1bmRlZmluZWQ7IH0pOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZVJhbmdlJywgcmFuZ2U6IEFueVJhbmdlIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcihfdGhpcywgbnVsbCwgcmVzKTsgfSk7IH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLm51bUZhaWx1cmVzID8gRGV4aWVQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pIDogdW5kZWZpbmVkOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmJ1bGtHZXQgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZG9ubHknLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5nZXRNYW55KHtcbiAgICAgICAgICAgICAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQubWFwKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIF90aGlzLmhvb2sucmVhZGluZy5maXJlKHJlcyk7IH0pOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa0FkZCA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXlzT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBBcnJheS5pc0FycmF5KGtleXNPck9wdGlvbnMpID8ga2V5c09yT3B0aW9ucyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IChrZXlzID8gdW5kZWZpbmVkIDoga2V5c09yT3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgd2FudFJlc3VsdHMgPSBvcHRpb25zID8gb3B0aW9ucy5hbGxLZXlzIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGtleXMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtBZGQoKToga2V5cyBhcmd1bWVudCBpbnZhbGlkIG9uIHRhYmxlcyB3aXRoIGluYm91bmQga2V5c1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCAhPT0gb2JqZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkFyZ3VtZW50cyBvYmplY3RzIGFuZCBrZXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgdmFyIG51bU9iamVjdHMgPSBvYmplY3RzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0c1RvQWRkID0ga2V5UGF0aCAmJiBhdXRvID9cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5tYXAod29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkpIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCBrZXlzOiBrZXlzLCB2YWx1ZXM6IG9iamVjdHNUb0FkZCwgd2FudFJlc3VsdHM6IHdhbnRSZXN1bHRzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgcmVzdWx0cyA9IF9hLnJlc3VsdHMsIGxhc3RSZXN1bHQgPSBfYS5sYXN0UmVzdWx0LCBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gd2FudFJlc3VsdHMgPyByZXN1bHRzIDogbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrQWRkKCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtT2JqZWN0cywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa1B1dCA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXlzT3JPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBBcnJheS5pc0FycmF5KGtleXNPck9wdGlvbnMpID8ga2V5c09yT3B0aW9ucyA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IChrZXlzID8gdW5kZWZpbmVkIDoga2V5c09yT3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgd2FudFJlc3VsdHMgPSBvcHRpb25zID8gb3B0aW9ucy5hbGxLZXlzIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zY2hlbWEucHJpbUtleSwgYXV0byA9IF9hLmF1dG8sIGtleVBhdGggPSBfYS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGtleXMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtQdXQoKToga2V5cyBhcmd1bWVudCBpbnZhbGlkIG9uIHRhYmxlcyB3aXRoIGluYm91bmQga2V5c1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCAhPT0gb2JqZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkFyZ3VtZW50cyBvYmplY3RzIGFuZCBrZXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgdmFyIG51bU9iamVjdHMgPSBvYmplY3RzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0c1RvUHV0ID0ga2V5UGF0aCAmJiBhdXRvID9cbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cy5tYXAod29ya2Fyb3VuZEZvclVuZGVmaW5lZFByaW1LZXkoa2V5UGF0aCkpIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdwdXQnLCBrZXlzOiBrZXlzLCB2YWx1ZXM6IG9iamVjdHNUb1B1dCwgd2FudFJlc3VsdHM6IHdhbnRSZXN1bHRzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgcmVzdWx0cyA9IF9hLnJlc3VsdHMsIGxhc3RSZXN1bHQgPSBfYS5sYXN0UmVzdWx0LCBmYWlsdXJlcyA9IF9hLmZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gd2FudFJlc3VsdHMgPyByZXN1bHRzIDogbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrUHV0KCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtT2JqZWN0cywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa1VwZGF0ZSA9IGZ1bmN0aW9uIChrZXlzQW5kQ2hhbmdlcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb3JlVGFibGUgPSB0aGlzLmNvcmU7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGtleXNBbmRDaGFuZ2VzLm1hcChmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmtleTsgfSk7XG4gICAgICAgICAgICB2YXIgY2hhbmdlU3BlY3MgPSBrZXlzQW5kQ2hhbmdlcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7IHJldHVybiBlbnRyeS5jaGFuZ2VzOyB9KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRNYXAgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucygncmVhZHdyaXRlJywgZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVUYWJsZS5nZXRNYW55KHsgdHJhbnM6IHRyYW5zLCBrZXlzOiBrZXlzLCBjYWNoZTogJ2Nsb25lJyB9KS50aGVuKGZ1bmN0aW9uIChvYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRPYmpzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGtleXNBbmRDaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKF9hLCBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYS5rZXksIGNoYW5nZXMgPSBfYS5jaGFuZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IG9ianNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXMoY2hhbmdlcyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0gX2JbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjaGFuZ2VzW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCA9PT0gX3RoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNtcCh2YWx1ZSwga2V5KSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkNvbnN0cmFpbnQoXCJDYW5ub3QgdXBkYXRlIHByaW1hcnkga2V5IGluIGJ1bGtVcGRhdGUoKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRNYXAucHVzaChpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdEtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdE9ianMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bUVudHJpZXMgPSByZXN1bHRLZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVUYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLm11dGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IHJlc3VsdEtleXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHJlc3VsdE9ianMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTcGVjczogY2hhbmdlU3BlY3NcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bUZhaWx1cmVzID0gX2EubnVtRmFpbHVyZXMsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bUVudHJpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXMoZmFpbHVyZXMpOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBfYltfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBlZE9mZnNldCA9IG9mZnNldE1hcFtOdW1iZXIob2Zmc2V0KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBlZE9mZnNldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlID0gZmFpbHVyZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZhaWx1cmVzW29mZnNldF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzW21hcHBlZE9mZnNldF0gPSBmYWlsdXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdWxrRXJyb3IoXCJcIi5jb25jYXQoX3RoaXMubmFtZSwgXCIuYnVsa1VwZGF0ZSgpOiBcIikuY29uY2F0KG51bUZhaWx1cmVzLCBcIiBvZiBcIikuY29uY2F0KG51bUVudHJpZXMsIFwiIG9wZXJhdGlvbnMgZmFpbGVkXCIpLCBmYWlsdXJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrRGVsZXRlID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbnVtS2V5cyA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdkZWxldGUnLCBrZXlzOiBrZXlzIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIGJ1aWx0SW5EZWxldGlvblRyaWdnZXIoX3RoaXMsIGtleXMsIHJlcyk7IH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtEZWxldGUoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1LZXlzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUYWJsZTtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gRXZlbnRzKGN0eCkge1xuICAgICAgICB2YXIgZXZzID0ge307XG4gICAgICAgIHZhciBydiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkgLSAxKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoLS1pKVxuICAgICAgICAgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgICAgICBldnNbZXZlbnROYW1lXS5zdWJzY3JpYmUuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAoZXZlbnROYW1lKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZzW2V2ZW50TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJ2LmFkZEV2ZW50VHlwZSA9IGFkZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICBhZGQoYXJndW1lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIGZ1bmN0aW9uIGFkZChldmVudE5hbWUsIGNoYWluRnVuY3Rpb24sIGRlZmF1bHRGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHJldHVybiBhZGRDb25maWd1cmVkRXZlbnRzKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICBpZiAoIWNoYWluRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgY2hhaW5GdW5jdGlvbiA9IHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluO1xuICAgICAgICAgICAgaWYgKCFkZWZhdWx0RnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZ1bmN0aW9uID0gbm9wO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IFtdLFxuICAgICAgICAgICAgICAgIGZpcmU6IGRlZmF1bHRGdW5jdGlvbixcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5zdWJzY3JpYmVycy5pbmRleE9mKGNiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMucHVzaChjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpcmUgPSBjaGFpbkZ1bmN0aW9uKGNvbnRleHQuZmlyZSwgY2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMgPSBjb250ZXh0LnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuICE9PSBjYjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyZSA9IGNvbnRleHQuc3Vic2NyaWJlcnMucmVkdWNlKGNoYWluRnVuY3Rpb24sIGRlZmF1bHRGdW5jdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV2c1tldmVudE5hbWVdID0gcnZbZXZlbnROYW1lXSA9IGNvbnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZGRDb25maWd1cmVkRXZlbnRzKGNmZykge1xuICAgICAgICAgICAga2V5cyhjZmcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gY2ZnW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkKGV2ZW50TmFtZSwgY2ZnW2V2ZW50TmFtZV1bMF0sIGNmZ1tldmVudE5hbWVdWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncyA9PT0gJ2FzYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gYWRkKGV2ZW50TmFtZSwgbWlycm9yLCBmdW5jdGlvbiBmaXJlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzYXAkMShmdW5jdGlvbiBmaXJlRXZlbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkludmFsaWQgZXZlbnQgY29uZmlnXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlQ2xhc3NDb25zdHJ1Y3Rvcihwcm90b3R5cGUsIGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGRlcml2ZShjb25zdHJ1Y3RvcikuZnJvbSh7IHByb3RvdHlwZTogcHJvdG90eXBlIH0pO1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFibGVDb25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVGFibGUucHJvdG90eXBlLCBmdW5jdGlvbiBUYWJsZShuYW1lLCB0YWJsZVNjaGVtYSwgdHJhbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgICAgIHRoaXMuX3R4ID0gdHJhbnM7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWEgPSB0YWJsZVNjaGVtYTtcbiAgICAgICAgICAgIHRoaXMuaG9vayA9IGRiLl9hbGxUYWJsZXNbbmFtZV0gPyBkYi5fYWxsVGFibGVzW25hbWVdLmhvb2sgOiBFdmVudHMobnVsbCwge1xuICAgICAgICAgICAgICAgIFwiY3JlYXRpbmdcIjogW2hvb2tDcmVhdGluZ0NoYWluLCBub3BdLFxuICAgICAgICAgICAgICAgIFwicmVhZGluZ1wiOiBbcHVyZUZ1bmN0aW9uQ2hhaW4sIG1pcnJvcl0sXG4gICAgICAgICAgICAgICAgXCJ1cGRhdGluZ1wiOiBbaG9va1VwZGF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICAgICAgXCJkZWxldGluZ1wiOiBbaG9va0RlbGV0aW5nQ2hhaW4sIG5vcF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1BsYWluS2V5UmFuZ2UoY3R4LCBpZ25vcmVMaW1pdEZpbHRlcikge1xuICAgICAgICByZXR1cm4gIShjdHguZmlsdGVyIHx8IGN0eC5hbGdvcml0aG0gfHwgY3R4Lm9yKSAmJlxuICAgICAgICAgICAgKGlnbm9yZUxpbWl0RmlsdGVyID8gY3R4Lmp1c3RMaW1pdCA6ICFjdHgucmVwbGF5RmlsdGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRmlsdGVyKGN0eCwgZm4pIHtcbiAgICAgICAgY3R4LmZpbHRlciA9IGNvbWJpbmUoY3R4LmZpbHRlciwgZm4pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmYWN0b3J5LCBpc0xpbWl0RmlsdGVyKSB7XG4gICAgICAgIHZhciBjdXJyID0gY3R4LnJlcGxheUZpbHRlcjtcbiAgICAgICAgY3R4LnJlcGxheUZpbHRlciA9IGN1cnIgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21iaW5lKGN1cnIoKSwgZmFjdG9yeSgpKTsgfSA6IGZhY3Rvcnk7XG4gICAgICAgIGN0eC5qdXN0TGltaXQgPSBpc0xpbWl0RmlsdGVyICYmICFjdXJyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRNYXRjaEZpbHRlcihjdHgsIGZuKSB7XG4gICAgICAgIGN0eC5pc01hdGNoID0gY29tYmluZShjdHguaXNNYXRjaCwgZm4pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJbmRleE9yU3RvcmUoY3R4LCBjb3JlU2NoZW1hKSB7XG4gICAgICAgIGlmIChjdHguaXNQcmltS2V5KVxuICAgICAgICAgICAgcmV0dXJuIGNvcmVTY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgdmFyIGluZGV4ID0gY29yZVNjaGVtYS5nZXRJbmRleEJ5S2V5UGF0aChjdHguaW5kZXgpO1xuICAgICAgICBpZiAoIWluZGV4KVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiS2V5UGF0aCBcIiArIGN0eC5pbmRleCArIFwiIG9uIG9iamVjdCBzdG9yZSBcIiArIGNvcmVTY2hlbWEubmFtZSArIFwiIGlzIG5vdCBpbmRleGVkXCIpO1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW5DdXJzb3IoY3R4LCBjb3JlVGFibGUsIHRyYW5zKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4T3JTdG9yZShjdHgsIGNvcmVUYWJsZS5zY2hlbWEpO1xuICAgICAgICByZXR1cm4gY29yZVRhYmxlLm9wZW5DdXJzb3Ioe1xuICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgdmFsdWVzOiAhY3R4LmtleXNPbmx5LFxuICAgICAgICAgICAgcmV2ZXJzZTogY3R4LmRpciA9PT0gJ3ByZXYnLFxuICAgICAgICAgICAgdW5pcXVlOiAhIWN0eC51bmlxdWUsXG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpdGVyKGN0eCwgZm4sIGNvcmVUcmFucywgY29yZVRhYmxlKSB7XG4gICAgICAgIHZhciBmaWx0ZXIgPSBjdHgucmVwbGF5RmlsdGVyID8gY29tYmluZShjdHguZmlsdGVyLCBjdHgucmVwbGF5RmlsdGVyKCkpIDogY3R4LmZpbHRlcjtcbiAgICAgICAgaWYgKCFjdHgub3IpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVyYXRlKG9wZW5DdXJzb3IoY3R4LCBjb3JlVGFibGUsIGNvcmVUcmFucyksIGNvbWJpbmUoY3R4LmFsZ29yaXRobSwgZmlsdGVyKSwgZm4sICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzZXRfMSA9IHt9O1xuICAgICAgICAgICAgdmFyIHVuaW9uID0gZnVuY3Rpb24gKGl0ZW0sIGN1cnNvciwgYWR2YW5jZSkge1xuICAgICAgICAgICAgICAgIGlmICghZmlsdGVyIHx8IGZpbHRlcihjdXJzb3IsIGFkdmFuY2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIGN1cnNvci5zdG9wKHJlc3VsdCk7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGN1cnNvci5mYWlsKGVycik7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnJyArIHByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnJyArIG5ldyBVaW50OEFycmF5KHByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc093bihzZXRfMSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0XzFba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbihpdGVtLCBjdXJzb3IsIGFkdmFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgY3R4Lm9yLl9pdGVyYXRlKHVuaW9uLCBjb3JlVHJhbnMpLFxuICAgICAgICAgICAgICAgIGl0ZXJhdGUob3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgY29yZVRyYW5zKSwgY3R4LmFsZ29yaXRobSwgdW5pb24sICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaXRlcmF0ZShjdXJzb3JQcm9taXNlLCBmaWx0ZXIsIGZuLCB2YWx1ZU1hcHBlcikge1xuICAgICAgICB2YXIgbWFwcGVkRm4gPSB2YWx1ZU1hcHBlciA/IGZ1bmN0aW9uICh4LCBjLCBhKSB7IHJldHVybiBmbih2YWx1ZU1hcHBlcih4KSwgYywgYSk7IH0gOiBmbjtcbiAgICAgICAgdmFyIHdyYXBwZWRGbiA9IHdyYXAobWFwcGVkRm4pO1xuICAgICAgICByZXR1cm4gY3Vyc29yUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjdXJzb3IuY29udGludWUoKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKGN1cnNvciwgZnVuY3Rpb24gKGFkdmFuY2VyKSB7IHJldHVybiBjID0gYWR2YW5jZXI7IH0sIGZ1bmN0aW9uICh2YWwpIHsgY3Vyc29yLnN0b3AodmFsKTsgYyA9IG5vcDsgfSwgZnVuY3Rpb24gKGUpIHsgY3Vyc29yLmZhaWwoZSk7IGMgPSBub3A7IH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlZEZuKGN1cnNvci52YWx1ZSwgY3Vyc29yLCBmdW5jdGlvbiAoYWR2YW5jZXIpIHsgcmV0dXJuIGMgPSBhZHZhbmNlcjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIENvbGxlY3Rpb24gPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sbGVjdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChmbiwgY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICByZXR1cm4gY3R4LmVycm9yID9cbiAgICAgICAgICAgICAgICBjdHgudGFibGUuX3RyYW5zKG51bGwsIHJlamVjdGlvbi5iaW5kKG51bGwsIGN0eC5lcnJvcikpIDpcbiAgICAgICAgICAgICAgICBjdHgudGFibGUuX3RyYW5zKCdyZWFkb25seScsIGZuKS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5lcnJvciA/XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucyhudWxsLCByZWplY3Rpb24uYmluZChudWxsLCBjdHguZXJyb3IpKSA6XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucygncmVhZHdyaXRlJywgZm4sIFwibG9ja2VkXCIpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fYWRkQWxnb3JpdGhtID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgY3R4LmFsZ29yaXRobSA9IGNvbWJpbmUoY3R4LmFsZ29yaXRobSwgZm4pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5faXRlcmF0ZSA9IGZ1bmN0aW9uIChmbiwgY29yZVRyYW5zKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlcih0aGlzLl9jdHgsIGZuLCBjb3JlVHJhbnMsIHRoaXMuX2N0eC50YWJsZS5jb3JlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgICAgIHZhciBydiA9IE9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGUpLCBjdHggPSBPYmplY3QuY3JlYXRlKHRoaXMuX2N0eCk7XG4gICAgICAgICAgICBpZiAocHJvcHMpXG4gICAgICAgICAgICAgICAgZXh0ZW5kKGN0eCwgcHJvcHMpO1xuICAgICAgICAgICAgcnYuX2N0eCA9IGN0eDtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LnZhbHVlTWFwcGVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHRyYW5zKSB7IHJldHVybiBpdGVyKGN0eCwgZm4sIHRyYW5zLCBjdHgudGFibGUuY29yZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSBfdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIHZhciBjb3JlVGFibGUgPSBjdHgudGFibGUuY29yZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVUYWJsZS5jb3VudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBnZXRJbmRleE9yU3RvcmUoY3R4LCBjb3JlVGFibGUuc2NoZW1hKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvdW50KSB7IHJldHVybiBNYXRoLm1pbihjb3VudCwgY3R4LmxpbWl0KTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlcihjdHgsIGZ1bmN0aW9uICgpIHsgKytjb3VudDsgcmV0dXJuIGZhbHNlOyB9LCB0cmFucywgY29yZVRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQ7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5zb3J0QnkgPSBmdW5jdGlvbiAoa2V5UGF0aCwgY2IpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGtleVBhdGguc3BsaXQoJy4nKS5yZXZlcnNlKCksIGxhc3RQYXJ0ID0gcGFydHNbMF0sIGxhc3RJbmRleCA9IHBhcnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBmdW5jdGlvbiBnZXR2YWwob2JqLCBpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR2YWwob2JqW3BhcnRzW2ldXSwgaSAtIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmpbbGFzdFBhcnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9yZGVyID0gdGhpcy5fY3R4LmRpciA9PT0gXCJuZXh0XCIgPyAxIDogLTE7XG4gICAgICAgICAgICBmdW5jdGlvbiBzb3J0ZXIoYSwgYikge1xuICAgICAgICAgICAgICAgIHZhciBhVmFsID0gZ2V0dmFsKGEsIGxhc3RJbmRleCksIGJWYWwgPSBnZXR2YWwoYiwgbGFzdEluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY21wKGFWYWwsIGJWYWwpICogb3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydChzb3J0ZXIpO1xuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gX3RoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmRpciA9PT0gJ25leHQnICYmIGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpICYmIGN0eC5saW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlTWFwcGVyXzEgPSBjdHgudmFsdWVNYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4T3JTdG9yZShjdHgsIGN0eC50YWJsZS5jb3JlLnNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgudGFibGUuY29yZS5xdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogY3R4LmxpbWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9hLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZU1hcHBlcl8xID8gcmVzdWx0Lm1hcCh2YWx1ZU1hcHBlcl8xKSA6IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYV8xID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVyKGN0eCwgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGFfMS5wdXNoKGl0ZW0pOyB9LCB0cmFucywgY3R4LnRhYmxlLmNvcmUpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gYV8xOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBpZiAob2Zmc2V0IDw9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICBjdHgub2Zmc2V0ICs9IG9mZnNldDtcbiAgICAgICAgICAgIGlmIChpc1BsYWluS2V5UmFuZ2UoY3R4KSkge1xuICAgICAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcihjdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0TGVmdCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRMZWZ0ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vZmZzZXRMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5hZHZhbmNlKG9mZnNldExlZnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gKC0tb2Zmc2V0TGVmdCA8IDApOyB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24gKG51bVJvd3MpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5saW1pdCA9IE1hdGgubWluKHRoaXMuX2N0eC5saW1pdCwgbnVtUm93cyk7XG4gICAgICAgICAgICBhZGRSZXBsYXlGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd3NMZWZ0ID0gbnVtUm93cztcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoLS1yb3dzTGVmdCA8PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvd3NMZWZ0ID49IDA7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnVudGlsID0gZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uLCBiSW5jbHVkZVN0b3BFbnRyeSkge1xuICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGdW5jdGlvbihjdXJzb3IudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiSW5jbHVkZVN0b3BFbnRyeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saW1pdCgxKS50b0FycmF5KGZ1bmN0aW9uIChhKSB7IHJldHVybiBhWzBdOyB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpLmZpcnN0KGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBhZGRGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlckZ1bmN0aW9uKGN1cnNvci52YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFkZE1hdGNoRmlsdGVyKHRoaXMuX2N0eCwgZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmFuZCA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmaWx0ZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5vciA9IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzLl9jdHgudGFibGUsIGluZGV4TmFtZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZGlyID0gKHRoaXMuX2N0eC5kaXIgPT09IFwicHJldlwiID8gXCJuZXh0XCIgOiBcInByZXZcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5fb25kaXJlY3Rpb25jaGFuZ2UpXG4gICAgICAgICAgICAgICAgdGhpcy5fb25kaXJlY3Rpb25jaGFuZ2UodGhpcy5fY3R4LmRpcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVzYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaEtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGN0eC5rZXlzT25seSA9ICFjdHguaXNNYXRjaDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHZhbCwgY3Vyc29yKSB7IGNiKGN1cnNvci5rZXksIGN1cnNvcik7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5lYWNoVW5pcXVlS2V5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgudW5pcXVlID0gXCJ1bmlxdWVcIjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2hLZXkoY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5lYWNoUHJpbWFyeUtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGN0eC5rZXlzT25seSA9ICFjdHguaXNNYXRjaDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHZhbCwgY3Vyc29yKSB7IGNiKGN1cnNvci5wcmltYXJ5S2V5LCBjdXJzb3IpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGN0eC5rZXlzT25seSA9ICFjdHguaXNNYXRjaDtcbiAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBhLnB1c2goY3Vyc29yLmtleSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wcmltYXJ5S2V5cyA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGlmIChjdHguZGlyID09PSAnbmV4dCcgJiYgaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkgJiYgY3R4LmxpbWl0ID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleE9yU3RvcmUoY3R4LCBjdHgudGFibGUuY29yZS5zY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUucXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiBjdHgubGltaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnVuaXF1ZUtleXMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC51bmlxdWUgPSBcInVuaXF1ZVwiO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5cyhjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpcnN0S2V5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saW1pdCgxKS5rZXlzKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhWzBdOyB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubGFzdEtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpLmZpcnN0S2V5KGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzdGluY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LCBpZHggPSBjdHguaW5kZXggJiYgY3R4LnRhYmxlLnNjaGVtYS5pZHhCeU5hbWVbY3R4LmluZGV4XTtcbiAgICAgICAgICAgIGlmICghaWR4IHx8ICFpZHgubXVsdGkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgc2V0ID0ge307XG4gICAgICAgICAgICBhZGRGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0cktleSA9IGN1cnNvci5wcmltYXJ5S2V5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gaGFzT3duKHNldCwgc3RyS2V5KTtcbiAgICAgICAgICAgICAgICBzZXRbc3RyS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFmb3VuZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cml0ZShmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kaWZ5ZXI7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGFuZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gY2hhbmdlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGFwcGx5VXBkYXRlU3BlYyhpdGVtLCBjaGFuZ2VzKTsgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IGN0eC50YWJsZS5jb3JlO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IGNvcmVUYWJsZS5zY2hlbWEucHJpbWFyeUtleSwgb3V0Ym91bmQgPSBfYS5vdXRib3VuZCwgZXh0cmFjdEtleSA9IF9hLmV4dHJhY3RLZXk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbWl0ID0gMjAwO1xuICAgICAgICAgICAgICAgIHZhciBtb2RpZnlDaHVua1NpemUgPSBfdGhpcy5kYi5fb3B0aW9ucy5tb2RpZnlDaHVua1NpemU7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmeUNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGlmeUNodW5rU2l6ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBtb2RpZnlDaHVua1NpemVbY29yZVRhYmxlLm5hbWVdIHx8IG1vZGlmeUNodW5rU2l6ZVsnKiddIHx8IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ID0gbW9kaWZ5Q2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0b3RhbEZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGZhaWxlZEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXBwbHlNdXRhdGVSZXN1bHQgPSBmdW5jdGlvbiAoZXhwZWN0ZWRDb3VudCwgcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IHJlcy5mYWlsdXJlcywgbnVtRmFpbHVyZXMgPSByZXMubnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCArPSBleHBlY3RlZENvdW50IC0gbnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzKGZhaWx1cmVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZhaWx1cmVzLnB1c2goZmFpbHVyZXNbcG9zXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBpc1VuY29uZGl0aW9uYWxEZWxldGUgPSBjaGFuZ2VzID09PSBkZWxldGVDYWxsYmFjaztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvbmUoKS5wcmltYXJ5S2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNyaXRlcmlhID0gaXNQbGFpbktleVJhbmdlKGN0eCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW1pdCA9PT0gSW5maW5pdHkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgY2hhbmdlcyAhPT0gJ2Z1bmN0aW9uJyB8fCBpc1VuY29uZGl0aW9uYWxEZWxldGUpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBjdHguaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Q2h1bmsgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBNYXRoLm1pbihsaW1pdCwga2V5cy5sZW5ndGggLSBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXNJbkNodW5rID0ga2V5cy5zbGljZShvZmZzZXQsIG9mZnNldCArIGNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNVbmNvbmRpdGlvbmFsRGVsZXRlID8gUHJvbWlzZS5yZXNvbHZlKFtdKSA6IGNvcmVUYWJsZS5nZXRNYW55KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czoga2V5c0luQ2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IFwiaW1tdXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkVmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB1dFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwdXRLZXlzID0gb3V0Ym91bmQgPyBbXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGV0ZUtleXMgPSBpc1VuY29uZGl0aW9uYWxEZWxldGUgPyBrZXlzSW5DaHVuayA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNVbmNvbmRpdGlvbmFsRGVsZXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnVmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4XzEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZXBDbG9uZShvcmlnVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1LZXk6IGtleXNbb2Zmc2V0ICsgaV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZ5ZXIuY2FsbChjdHhfMSwgY3R4XzEudmFsdWUsIGN0eF8xKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4XzEudmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVLZXlzLnB1c2goa2V5c1tvZmZzZXQgKyBpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvdXRib3VuZCAmJiBjbXAoZXh0cmFjdEtleShvcmlnVmFsdWUpLCBleHRyYWN0S2V5KGN0eF8xLnZhbHVlKSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlS2V5cy5wdXNoKGtleXNbb2Zmc2V0ICsgaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRWYWx1ZXMucHVzaChjdHhfMS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXRWYWx1ZXMucHVzaChjdHhfMS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRib3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dEtleXMucHVzaChrZXlzW29mZnNldCArIGldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFkZFZhbHVlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVUYWJsZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCB2YWx1ZXM6IGFkZFZhbHVlcyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcG9zIGluIHJlcy5mYWlsdXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUtleXMuc3BsaWNlKHBhcnNlSW50KHBvcyksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlNdXRhdGVSZXN1bHQoYWRkVmFsdWVzLmxlbmd0aCwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHB1dFZhbHVlcy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiB0eXBlb2YgY2hhbmdlcyA9PT0gJ29iamVjdCcpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcHV0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcHV0VmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGNyaXRlcmlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3BlYzogdHlwZW9mIGNoYW5nZXMgIT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGRpdGlvbmFsQ2h1bms6IG9mZnNldCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChwdXRWYWx1ZXMubGVuZ3RoLCByZXMpOyB9KTsgfSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiAoZGVsZXRlS2V5cy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiBpc1VuY29uZGl0aW9uYWxEZWxldGUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZGVsZXRlS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkaXRpb25hbENodW5rOiBvZmZzZXQgPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcihjdHgudGFibGUsIGRlbGV0ZUtleXMsIHJlcyk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChkZWxldGVLZXlzLmxlbmd0aCwgcmVzKTsgfSk7IH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiBvZmZzZXQgKyBjb3VudCAmJiBuZXh0Q2h1bmsob2Zmc2V0ICsgbGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0Q2h1bmsoMCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxGYWlsdXJlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RpZnlFcnJvcihcIkVycm9yIG1vZGlmeWluZyBvbmUgb3IgbW9yZSBvYmplY3RzXCIsIHRvdGFsRmFpbHVyZXMsIHN1Y2Nlc3NDb3VudCwgZmFpbGVkS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHgsIHJhbmdlID0gY3R4LnJhbmdlO1xuICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgpICYmXG4gICAgICAgICAgICAgICAgIWN0eC50YWJsZS5zY2hlbWEueVByb3BzICYmXG4gICAgICAgICAgICAgICAgKGN0eC5pc1ByaW1LZXkgfHwgcmFuZ2UudHlwZSA9PT0gMyApKVxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3R4LnRhYmxlLmNvcmUuc2NoZW1hLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3JlUmFuZ2UgPSByYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLmNvdW50KHsgdHJhbnM6IHRyYW5zLCBxdWVyeTogeyBpbmRleDogcHJpbWFyeUtleSwgcmFuZ2U6IGNvcmVSYW5nZSB9IH0pLnRoZW4oZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlUmFuZ2UnLCByYW5nZTogY29yZVJhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gX2EuZmFpbHVyZXMsIG51bUZhaWx1cmVzID0gX2EubnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kaWZ5RXJyb3IoXCJDb3VsZCBub3QgZGVsZXRlIHNvbWUgdmFsdWVzXCIsIE9iamVjdC5rZXlzKGZhaWx1cmVzKS5tYXAoZnVuY3Rpb24gKHBvcykgeyByZXR1cm4gZmFpbHVyZXNbcG9zXTsgfSksIGNvdW50IC0gbnVtRmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCAtIG51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kaWZ5KGRlbGV0ZUNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb247XG4gICAgfSgpKTtcbiAgICB2YXIgZGVsZXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodmFsdWUsIGN0eCkgeyByZXR1cm4gY3R4LnZhbHVlID0gbnVsbDsgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbGxlY3Rpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoQ29sbGVjdGlvbi5wcm90b3R5cGUsIGZ1bmN0aW9uIENvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGtleVJhbmdlR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB2YXIga2V5UmFuZ2UgPSBBbnlSYW5nZSwgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGtleVJhbmdlR2VuZXJhdG9yKVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleVJhbmdlID0ga2V5UmFuZ2VHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdoZXJlQ3R4ID0gd2hlcmVDbGF1c2UuX2N0eDtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHdoZXJlQ3R4LnRhYmxlO1xuICAgICAgICAgICAgdmFyIHJlYWRpbmdIb29rID0gdGFibGUuaG9vay5yZWFkaW5nLmZpcmU7XG4gICAgICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlLFxuICAgICAgICAgICAgICAgIGluZGV4OiB3aGVyZUN0eC5pbmRleCxcbiAgICAgICAgICAgICAgICBpc1ByaW1LZXk6ICghd2hlcmVDdHguaW5kZXggfHwgKHRhYmxlLnNjaGVtYS5wcmltS2V5LmtleVBhdGggJiYgd2hlcmVDdHguaW5kZXggPT09IHRhYmxlLnNjaGVtYS5wcmltS2V5Lm5hbWUpKSxcbiAgICAgICAgICAgICAgICByYW5nZToga2V5UmFuZ2UsXG4gICAgICAgICAgICAgICAga2V5c09ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRpcjogXCJuZXh0XCIsXG4gICAgICAgICAgICAgICAgdW5pcXVlOiBcIlwiLFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobTogbnVsbCxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVwbGF5RmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGp1c3RMaW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc01hdGNoOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgICAgICBsaW1pdDogSW5maW5pdHksXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIG9yOiB3aGVyZUN0eC5vcixcbiAgICAgICAgICAgICAgICB2YWx1ZU1hcHBlcjogcmVhZGluZ0hvb2sgIT09IG1pcnJvciA/IHJlYWRpbmdIb29rIDogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2ltcGxlQ29tcGFyZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaW1wbGVDb21wYXJlUmV2ZXJzZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZhaWwoY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UsIGVyciwgVCkge1xuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlIGluc3RhbmNlb2YgV2hlcmVDbGF1c2UgP1xuICAgICAgICAgICAgbmV3IGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlLkNvbGxlY3Rpb24oY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UpIDpcbiAgICAgICAgICAgIGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlO1xuICAgICAgICBjb2xsZWN0aW9uLl9jdHguZXJyb3IgPSBUID8gbmV3IFQoZXJyKSA6IG5ldyBUeXBlRXJyb3IoZXJyKTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVtcHR5Q29sbGVjdGlvbih3aGVyZUNsYXVzZSkge1xuICAgICAgICByZXR1cm4gbmV3IHdoZXJlQ2xhdXNlLkNvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJhbmdlRXF1YWwoXCJcIik7IH0pLmxpbWl0KDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cHBlckZhY3RvcnkoZGlyKSB7XG4gICAgICAgIHJldHVybiBkaXIgPT09IFwibmV4dFwiID9cbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvVXBwZXJDYXNlKCk7IH0gOlxuICAgICAgICAgICAgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG93ZXJGYWN0b3J5KGRpcikge1xuICAgICAgICByZXR1cm4gZGlyID09PSBcIm5leHRcIiA/XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b0xvd2VyQ2FzZSgpOyB9IDpcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvVXBwZXJDYXNlKCk7IH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGUsIGxvd2VyTmVlZGxlLCBjbXAsIGRpcikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oa2V5Lmxlbmd0aCwgbG93ZXJOZWVkbGUubGVuZ3RoKTtcbiAgICAgICAgdmFyIGxscCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbHdyS2V5Q2hhciA9IGxvd2VyS2V5W2ldO1xuICAgICAgICAgICAgaWYgKGx3cktleUNoYXIgIT09IGxvd2VyTmVlZGxlW2ldKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIHVwcGVyTmVlZGxlW2ldKSA8IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGkpICsgdXBwZXJOZWVkbGVbaV0gKyB1cHBlck5lZWRsZS5zdWJzdHIoaSArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCBsb3dlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBpKSArIGxvd2VyTmVlZGxlW2ldICsgdXBwZXJOZWVkbGUuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAobGxwID49IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGxscCkgKyBsb3dlcktleVtsbHBdICsgdXBwZXJOZWVkbGUuc3Vic3RyKGxscCArIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIGx3cktleUNoYXIpIDwgMClcbiAgICAgICAgICAgICAgICBsbHAgPSBpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPCBsb3dlck5lZWRsZS5sZW5ndGggJiYgZGlyID09PSBcIm5leHRcIilcbiAgICAgICAgICAgIHJldHVybiBrZXkgKyB1cHBlck5lZWRsZS5zdWJzdHIoa2V5Lmxlbmd0aCk7XG4gICAgICAgIGlmIChsZW5ndGggPCBrZXkubGVuZ3RoICYmIGRpciA9PT0gXCJwcmV2XCIpXG4gICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCB1cHBlck5lZWRsZS5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gKGxscCA8IDAgPyBudWxsIDoga2V5LnN1YnN0cigwLCBsbHApICsgbG93ZXJOZWVkbGVbbGxwXSArIHVwcGVyTmVlZGxlLnN1YnN0cihsbHAgKyAxKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZElnbm9yZUNhc2VBbGdvcml0aG0od2hlcmVDbGF1c2UsIG1hdGNoLCBuZWVkbGVzLCBzdWZmaXgpIHtcbiAgICAgICAgdmFyIHVwcGVyLCBsb3dlciwgY29tcGFyZSwgdXBwZXJOZWVkbGVzLCBsb3dlck5lZWRsZXMsIGRpcmVjdGlvbiwgbmV4dEtleVN1ZmZpeCwgbmVlZGxlc0xlbiA9IG5lZWRsZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIW5lZWRsZXMuZXZlcnkoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHR5cGVvZiBzID09PSAnc3RyaW5nJzsgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKHdoZXJlQ2xhdXNlLCBTVFJJTkdfRVhQRUNURUQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGluaXREaXJlY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICB1cHBlciA9IHVwcGVyRmFjdG9yeShkaXIpO1xuICAgICAgICAgICAgbG93ZXIgPSBsb3dlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgIGNvbXBhcmUgPSAoZGlyID09PSBcIm5leHRcIiA/IHNpbXBsZUNvbXBhcmUgOiBzaW1wbGVDb21wYXJlUmV2ZXJzZSk7XG4gICAgICAgICAgICB2YXIgbmVlZGxlQm91bmRzID0gbmVlZGxlcy5tYXAoZnVuY3Rpb24gKG5lZWRsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGxvd2VyOiBsb3dlcihuZWVkbGUpLCB1cHBlcjogdXBwZXIobmVlZGxlKSB9O1xuICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlKGEubG93ZXIsIGIubG93ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cHBlck5lZWRsZXMgPSBuZWVkbGVCb3VuZHMubWFwKGZ1bmN0aW9uIChuYikgeyByZXR1cm4gbmIudXBwZXI7IH0pO1xuICAgICAgICAgICAgbG93ZXJOZWVkbGVzID0gbmVlZGxlQm91bmRzLm1hcChmdW5jdGlvbiAobmIpIHsgcmV0dXJuIG5iLmxvd2VyOyB9KTtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcjtcbiAgICAgICAgICAgIG5leHRLZXlTdWZmaXggPSAoZGlyID09PSBcIm5leHRcIiA/IFwiXCIgOiBzdWZmaXgpO1xuICAgICAgICB9XG4gICAgICAgIGluaXREaXJlY3Rpb24oXCJuZXh0XCIpO1xuICAgICAgICB2YXIgYyA9IG5ldyB3aGVyZUNsYXVzZS5Db2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1cHBlck5lZWRsZXNbMF0sIGxvd2VyTmVlZGxlc1tuZWVkbGVzTGVuIC0gMV0gKyBzdWZmaXgpOyB9KTtcbiAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpbml0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmaXJzdFBvc3NpYmxlTmVlZGxlID0gMDtcbiAgICAgICAgYy5fYWRkQWxnb3JpdGhtKGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsb3dlcktleSA9IGxvd2VyKGtleSk7XG4gICAgICAgICAgICBpZiAobWF0Y2gobG93ZXJLZXksIGxvd2VyTmVlZGxlcywgZmlyc3RQb3NzaWJsZU5lZWRsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsb3dlc3RQb3NzaWJsZUNhc2luZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0UG9zc2libGVOZWVkbGU7IGkgPCBuZWVkbGVzTGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhc2luZyA9IG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGVzW2ldLCBsb3dlck5lZWRsZXNbaV0sIGNvbXBhcmUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXNpbmcgPT09IG51bGwgJiYgbG93ZXN0UG9zc2libGVDYXNpbmcgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFBvc3NpYmxlTmVlZGxlID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsIHx8IGNvbXBhcmUobG93ZXN0UG9zc2libGVDYXNpbmcsIGNhc2luZykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlc3RQb3NzaWJsZUNhc2luZyA9IGNhc2luZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG93ZXN0UG9zc2libGVDYXNpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7IGN1cnNvci5jb250aW51ZShsb3dlc3RQb3NzaWJsZUNhc2luZyArIG5leHRLZXlTdWZmaXgpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVSYW5nZShsb3dlciwgdXBwZXIsIGxvd2VyT3BlbiwgdXBwZXJPcGVuKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAyICxcbiAgICAgICAgICAgIGxvd2VyOiBsb3dlcixcbiAgICAgICAgICAgIHVwcGVyOiB1cHBlcixcbiAgICAgICAgICAgIGxvd2VyT3BlbjogbG93ZXJPcGVuLFxuICAgICAgICAgICAgdXBwZXJPcGVuOiB1cHBlck9wZW5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmFuZ2VFcXVhbCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogMSAsXG4gICAgICAgICAgICBsb3dlcjogdmFsdWUsXG4gICAgICAgICAgICB1cHBlcjogdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgV2hlcmVDbGF1c2UgPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gV2hlcmVDbGF1c2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdoZXJlQ2xhdXNlLnByb3RvdHlwZSwgXCJDb2xsZWN0aW9uXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdHgudGFibGUuZGIuQ29sbGVjdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAobG93ZXIsIHVwcGVyLCBpbmNsdWRlTG93ZXIsIGluY2x1ZGVVcHBlcikge1xuICAgICAgICAgICAgaW5jbHVkZUxvd2VyID0gaW5jbHVkZUxvd2VyICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGluY2x1ZGVVcHBlciA9IGluY2x1ZGVVcHBlciA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLl9jbXAobG93ZXIsIHVwcGVyKSA+IDApIHx8XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLl9jbXAobG93ZXIsIHVwcGVyKSA9PT0gMCAmJiAoaW5jbHVkZUxvd2VyIHx8IGluY2x1ZGVVcHBlcikgJiYgIShpbmNsdWRlTG93ZXIgJiYgaW5jbHVkZVVwcGVyKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UobG93ZXIsIHVwcGVyLCAhaW5jbHVkZUxvd2VyLCAhaW5jbHVkZVVwcGVyKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmFuZ2VFcXVhbCh2YWx1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYWJvdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHZhbHVlLCB1bmRlZmluZWQsIHRydWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFib3ZlT3JFcXVhbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodmFsdWUsIHVuZGVmaW5lZCwgZmFsc2UpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJlbG93ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1bmRlZmluZWQsIHZhbHVlLCBmYWxzZSwgdHJ1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYmVsb3dPckVxdWFsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1bmRlZmluZWQsIHZhbHVlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFNUUklOR19FWFBFQ1RFRCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iZXR3ZWVuKHN0ciwgc3RyICsgbWF4U3RyaW5nLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhJZ25vcmVDYXNlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgaWYgKHN0ciA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydHNXaXRoKHN0cik7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4geC5pbmRleE9mKGFbMF0pID09PSAwOyB9LCBbc3RyXSwgbWF4U3RyaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmVxdWFsc0lnbm9yZUNhc2UgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4geCA9PT0gYVswXTsgfSwgW3N0cl0sIFwiXCIpO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYW55T2ZJZ25vcmVDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4gYS5pbmRleE9mKHgpICE9PSAtMTsgfSwgc2V0LCBcIlwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhBbnlPZklnbm9yZUNhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHRoaXMsIGZ1bmN0aW9uICh4LCBhKSB7IHJldHVybiBhLnNvbWUoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIHguaW5kZXhPZihuKSA9PT0gMDsgfSk7IH0sIHNldCwgbWF4U3RyaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFueU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgY29tcGFyZSA9IHRoaXMuX2NtcDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2V0LnNvcnQoY29tcGFyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB2YXIgYyA9IG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2Uoc2V0WzBdLCBzZXRbc2V0Lmxlbmd0aCAtIDFdKTsgfSk7XG4gICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb21wYXJlID0gKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIgP1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYXNjZW5kaW5nIDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Rlc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoa2V5LCBzZXRbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBzZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlKGtleSwgc2V0W2ldKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUoc2V0W2ldKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUubm90RXF1YWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2UoW1ttaW5LZXksIHZhbHVlXSwgW3ZhbHVlLCB0aGlzLmRiLl9tYXhLZXldXSwgeyBpbmNsdWRlTG93ZXJzOiBmYWxzZSwgaW5jbHVkZVVwcGVyczogZmFsc2UgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5ub25lT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KHRoaXMuX2FzY2VuZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByYW5nZXMgPSBzZXQucmVkdWNlKGZ1bmN0aW9uIChyZXMsIHZhbCkgeyByZXR1cm4gcmVzID9cbiAgICAgICAgICAgICAgICByZXMuY29uY2F0KFtbcmVzW3Jlcy5sZW5ndGggLSAxXVsxXSwgdmFsXV0pIDpcbiAgICAgICAgICAgICAgICBbW21pbktleSwgdmFsXV07IH0sIG51bGwpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goW3NldFtzZXQubGVuZ3RoIC0gMV0sIHRoaXMuZGIuX21heEtleV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShyYW5nZXMsIHsgaW5jbHVkZUxvd2VyczogZmFsc2UsIGluY2x1ZGVVcHBlcnM6IGZhbHNlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuaW5BbnlSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5fY21wLCBhc2NlbmRpbmcgPSB0aGlzLl9hc2NlbmRpbmcsIGRlc2NlbmRpbmcgPSB0aGlzLl9kZXNjZW5kaW5nLCBtaW4gPSB0aGlzLl9taW4sIG1heCA9IHRoaXMuX21heDtcbiAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICBpZiAoIXJhbmdlcy5ldmVyeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VbMF0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIGFzY2VuZGluZyhyYW5nZVswXSwgcmFuZ2VbMV0pIDw9IDA7XG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwiRmlyc3QgYXJndW1lbnQgdG8gaW5BbnlSYW5nZSgpIG11c3QgYmUgYW4gQXJyYXkgb2YgdHdvLXZhbHVlIEFycmF5cyBbbG93ZXIsdXBwZXJdIHdoZXJlIHVwcGVyIG11c3Qgbm90IGJlIGxvd2VyIHRoYW4gbG93ZXJcIiwgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluY2x1ZGVMb3dlcnMgPSAhb3B0aW9ucyB8fCBvcHRpb25zLmluY2x1ZGVMb3dlcnMgIT09IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVVcHBlcnMgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZVVwcGVycyA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFJhbmdlKHJhbmdlcywgbmV3UmFuZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsIGwgPSByYW5nZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcChuZXdSYW5nZVswXSwgcmFuZ2VbMV0pIDwgMCAmJiBjbXAobmV3UmFuZ2VbMV0sIHJhbmdlWzBdKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlWzBdID0gbWluKHJhbmdlWzBdLCBuZXdSYW5nZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSA9IG1heChyYW5nZVsxXSwgbmV3UmFuZ2VbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IGwpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKG5ld1JhbmdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvcnREaXJlY3Rpb24gPSBhc2NlbmRpbmc7XG4gICAgICAgICAgICBmdW5jdGlvbiByYW5nZVNvcnRlcihhLCBiKSB7IHJldHVybiBzb3J0RGlyZWN0aW9uKGFbMF0sIGJbMF0pOyB9XG4gICAgICAgICAgICB2YXIgc2V0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXQgPSByYW5nZXMucmVkdWNlKGFkZFJhbmdlLCBbXSk7XG4gICAgICAgICAgICAgICAgc2V0LnNvcnQocmFuZ2VTb3J0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhbmdlUG9zID0gMDtcbiAgICAgICAgICAgIHZhciBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeSA9IGluY2x1ZGVVcHBlcnMgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtyYW5nZVBvc11bMV0pID4gMDsgfSA6XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVsxXSkgPj0gMDsgfTtcbiAgICAgICAgICAgIHZhciBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeSA9IGluY2x1ZGVMb3dlcnMgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRlc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzBdKSA+IDA7IH0gOlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRlc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzBdKSA+PSAwOyB9O1xuICAgICAgICAgICAgZnVuY3Rpb24ga2V5V2l0aGluQ3VycmVudFJhbmdlKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAha2V5SXNCZXlvbmRDdXJyZW50RW50cnkoa2V5KSAmJiAha2V5SXNCZWZvcmVDdXJyZW50RW50cnkoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVja0tleSA9IGtleUlzQmV5b25kQ3VycmVudEVudHJ5O1xuICAgICAgICAgICAgdmFyIGMgPSBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHNldFswXVswXSwgc2V0W3NldC5sZW5ndGggLSAxXVsxXSwgIWluY2x1ZGVMb3dlcnMsICFpbmNsdWRlVXBwZXJzKTsgfSk7XG4gICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBcIm5leHRcIikge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0tleSA9IGtleUlzQmV5b25kQ3VycmVudEVudHJ5O1xuICAgICAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IGRlc2NlbmRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjLl9hZGRBbGdvcml0aG0oZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjaGVja0tleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICsrcmFuZ2VQb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZVBvcyA9PT0gc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5V2l0aGluQ3VycmVudFJhbmdlKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLl9jbXAoa2V5LCBzZXRbcmFuZ2VQb3NdWzFdKSA9PT0gMCB8fCBfdGhpcy5fY21wKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ydERpcmVjdGlvbiA9PT0gYXNjZW5kaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShzZXRbcmFuZ2VQb3NdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoc2V0W3JhbmdlUG9zXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhBbnlPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoIXNldC5ldmVyeShmdW5jdGlvbiAocykgeyByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnOyB9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwic3RhcnRzV2l0aEFueU9mKCkgb25seSB3b3JrcyB3aXRoIHN0cmluZ3NcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShzZXQubWFwKGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIFtzdHIsIHN0ciArIG1heFN0cmluZ107IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFdoZXJlQ2xhdXNlO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVXaGVyZUNsYXVzZUNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihXaGVyZUNsYXVzZS5wcm90b3R5cGUsIGZ1bmN0aW9uIFdoZXJlQ2xhdXNlKHRhYmxlLCBpbmRleCwgb3JDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCA9PT0gXCI6aWRcIiA/IG51bGwgOiBpbmRleCxcbiAgICAgICAgICAgICAgICBvcjogb3JDb2xsZWN0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fY21wID0gdGhpcy5fYXNjZW5kaW5nID0gY21wO1xuICAgICAgICAgICAgdGhpcy5fZGVzY2VuZGluZyA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjbXAoYiwgYSk7IH07XG4gICAgICAgICAgICB0aGlzLl9tYXggPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY21wKGEsIGIpID4gMCA/IGEgOiBiOyB9O1xuICAgICAgICAgICAgdGhpcy5fbWluID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfTtcbiAgICAgICAgICAgIHRoaXMuX0lEQktleVJhbmdlID0gZGIuX2RlcHMuSURCS2V5UmFuZ2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX0lEQktleVJhbmdlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCkge1xuICAgICAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgICAgIHJlamVjdChldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIHZhciBERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSA9ICdzdG9yYWdlbXV0YXRlZCc7XG4gICAgdmFyIFNUT1JBR0VfTVVUQVRFRF9ET01fRVZFTlRfTkFNRSA9ICd4LXN0b3JhZ2VtdXRhdGVkLTEnO1xuICAgIHZhciBnbG9iYWxFdmVudHMgPSBFdmVudHMobnVsbCwgREVYSUVfU1RPUkFHRV9NVVRBVEVEX0VWRU5UX05BTUUpO1xuXG4gICAgdmFyIFRyYW5zYWN0aW9uID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fbG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7XG4gICAgICAgICAgICArK3RoaXMuX3JlY3Vsb2NrO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlY3Vsb2NrID09PSAxICYmICFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgIFBTRC5sb2NrT3duZXJGb3IgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fdW5sb2NrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYXNzZXJ0KCFQU0QuZ2xvYmFsKTtcbiAgICAgICAgICAgIGlmICgtLXRoaXMuX3JlY3Vsb2NrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgICAgICBQU0QubG9ja093bmVyRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fYmxvY2tlZEZ1bmNzLmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbkFuZFBTRCA9IHRoaXMuX2Jsb2NrZWRGdW5jcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlUFNEKGZuQW5kUFNEWzFdLCBmbkFuZFBTRFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX2xvY2tlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWN1bG9jayAmJiBQU0QubG9ja093bmVyRm9yICE9PSB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgaWRiZGIgPSB0aGlzLmRiLmlkYmRiO1xuICAgICAgICAgICAgdmFyIGRiT3BlbkVycm9yID0gdGhpcy5kYi5fc3RhdGUuZGJPcGVuRXJyb3I7XG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMuaWRidHJhbnMpO1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucyAmJiAhaWRiZGIpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRiT3BlbkVycm9yICYmIGRiT3BlbkVycm9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRhdGFiYXNlQ2xvc2VkRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1pc3NpbmdBUElFcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSShkYk9wZW5FcnJvci5tZXNzYWdlLCBkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5PcGVuRmFpbGVkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlRyYW5zYWN0aW9uSW5hY3RpdmUoKTtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9jb21wbGV0aW9uLl9zdGF0ZSA9PT0gbnVsbCk7XG4gICAgICAgICAgICBpZGJ0cmFucyA9IHRoaXMuaWRidHJhbnMgPSBpZGJ0cmFucyB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmRiLmNvcmVcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRiLmNvcmUudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWVzLCB0aGlzLm1vZGUsIHsgZHVyYWJpbGl0eTogdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgfSlcbiAgICAgICAgICAgICAgICAgICAgOiBpZGJkYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZXMsIHRoaXMubW9kZSwgeyBkdXJhYmlsaXR5OiB0aGlzLmNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSB9KSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmVycm9yID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3JlamVjdChpZGJ0cmFucy5lcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uYWJvcnQgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgJiYgX3RoaXMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydChpZGJ0cmFucy5lcnJvcikpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uKFwiYWJvcnRcIikuZmlyZShldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uY29tcGxldGUgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGlmICgnbXV0YXRlZFBhcnRzJyBpbiBpZGJ0cmFucykge1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxFdmVudHMuc3RvcmFnZW11dGF0ZWQuZmlyZShpZGJ0cmFuc1tcIm11dGF0ZWRQYXJ0c1wiXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9wcm9taXNlID0gZnVuY3Rpb24gKG1vZGUsIGZuLCBiV3JpdGVMb2NrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUnICYmIHRoaXMubW9kZSAhPT0gJ3JlYWR3cml0ZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5SZWFkT25seShcIlRyYW5zYWN0aW9uIGlzIHJlYWRvbmx5XCIpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYmxvY2tlZEZ1bmNzLnB1c2goW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcHJvbWlzZShtb2RlLCBmbiwgYldyaXRlTG9jaykudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgUFNEXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiV3JpdGVMb2NrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9sb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBmbihyZXNvbHZlLCByZWplY3QsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydiAmJiBydi50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ2LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHAuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fdW5sb2NrKCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBwLl9saWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IGZuKHJlc29sdmUsIHJlamVjdCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnYgJiYgcnYudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwLl9saWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX3Jvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5fcm9vdCgpIDogdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLndhaXRGb3IgPSBmdW5jdGlvbiAocHJvbWlzZUxpa2UpIHtcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5fcm9vdCgpO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZShwcm9taXNlTGlrZSk7XG4gICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0Zvcikge1xuICAgICAgICAgICAgICAgIHJvb3QuX3dhaXRpbmdGb3IgPSByb290Ll93YWl0aW5nRm9yLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvbWlzZTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nUXVldWUgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSByb290LmlkYnRyYW5zLm9iamVjdFN0b3JlKHJvb3Quc3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHNwaW4oKSB7XG4gICAgICAgICAgICAgICAgICAgICsrcm9vdC5fc3BpbkNvdW50O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocm9vdC5fd2FpdGluZ1F1ZXVlLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIChyb290Ll93YWl0aW5nUXVldWUuc2hpZnQoKSkoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuX3dhaXRpbmdGb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5nZXQoLUluZmluaXR5KS5vbnN1Y2Nlc3MgPSBzcGluO1xuICAgICAgICAgICAgICAgIH0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudFdhaXRQcm9taXNlID0gcm9vdC5fd2FpdGluZ0ZvcjtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcm9vdC5fd2FpdGluZ1F1ZXVlLnB1c2god3JhcChyZXNvbHZlLmJpbmQobnVsbCwgcmVzKSkpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByb290Ll93YWl0aW5nUXVldWUucHVzaCh3cmFwKHJlamVjdC5iaW5kKG51bGwsIGVycikpKTsgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290Ll93YWl0aW5nRm9yID09PSBjdXJyZW50V2FpdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuX3dhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pZGJ0cmFucylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGJ0cmFucy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRhYmxlID0gZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIG1lbW9pemVkVGFibGVzID0gKHRoaXMuX21lbW9pemVkVGFibGVzIHx8ICh0aGlzLl9tZW1vaXplZFRhYmxlcyA9IHt9KSk7XG4gICAgICAgICAgICBpZiAoaGFzT3duKG1lbW9pemVkVGFibGVzLCB0YWJsZU5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBtZW1vaXplZFRhYmxlc1t0YWJsZU5hbWVdO1xuICAgICAgICAgICAgdmFyIHRhYmxlU2NoZW1hID0gdGhpcy5zY2hlbWFbdGFibGVOYW1lXTtcbiAgICAgICAgICAgIGlmICghdGFibGVTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5Ob3RGb3VuZChcIlRhYmxlIFwiICsgdGFibGVOYW1lICsgXCIgbm90IHBhcnQgb2YgdHJhbnNhY3Rpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb25Cb3VuZFRhYmxlID0gbmV3IHRoaXMuZGIuVGFibGUodGFibGVOYW1lLCB0YWJsZVNjaGVtYSwgdGhpcyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbkJvdW5kVGFibGUuY29yZSA9IHRoaXMuZGIuY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgbWVtb2l6ZWRUYWJsZXNbdGFibGVOYW1lXSA9IHRyYW5zYWN0aW9uQm91bmRUYWJsZTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkJvdW5kVGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUcmFuc2FjdGlvbjtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVHJhbnNhY3Rpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBmdW5jdGlvbiBUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgY2hyb21lVHJhbnNhY3Rpb25EdXJhYmlsaXR5LCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAobW9kZSAhPT0gJ3JlYWRvbmx5JylcbiAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5UHJvcHMgPSAoX2EgPSBkYnNjaGVtYVtzdG9yZU5hbWVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EueVByb3BzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoeVByb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVOYW1lcyA9IHN0b3JlTmFtZXMuY29uY2F0KHlQcm9wcy5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAudXBkYXRlc1RhYmxlOyB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICAgICAgdGhpcy5zdG9yZU5hbWVzID0gc3RvcmVOYW1lcztcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hID0gZGJzY2hlbWE7XG4gICAgICAgICAgICB0aGlzLmNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSA9IGNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eTtcbiAgICAgICAgICAgIHRoaXMuaWRidHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5vbiA9IEV2ZW50cyh0aGlzLCBcImNvbXBsZXRlXCIsIFwiZXJyb3JcIiwgXCJhYm9ydFwiKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9yZWN1bG9jayA9IDA7XG4gICAgICAgICAgICB0aGlzLl9ibG9ja2VkRnVuY3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1F1ZXVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NwaW5Db3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0aW9uID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZWplY3QgPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRpb24udGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMub24uY29tcGxldGUuZmlyZSgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2FzQWN0aXZlID0gX3RoaXMuYWN0aXZlO1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uLmVycm9yLmZpcmUoZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50ID9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Ll9yZWplY3QoZSkgOlxuICAgICAgICAgICAgICAgICAgICB3YXNBY3RpdmUgJiYgX3RoaXMuaWRidHJhbnMgJiYgX3RoaXMuaWRidHJhbnMuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluZGV4U3BlYyhuYW1lLCBrZXlQYXRoLCB1bmlxdWUsIG11bHRpLCBhdXRvLCBjb21wb3VuZCwgaXNQcmltS2V5LCB0eXBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAga2V5UGF0aDoga2V5UGF0aCxcbiAgICAgICAgICAgIHVuaXF1ZTogdW5pcXVlLFxuICAgICAgICAgICAgbXVsdGk6IG11bHRpLFxuICAgICAgICAgICAgYXV0bzogYXV0byxcbiAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgIHNyYzogKHVuaXF1ZSAmJiAhaXNQcmltS2V5ID8gJyYnIDogJycpICsgKG11bHRpID8gJyonIDogJycpICsgKGF1dG8gPyBcIisrXCIgOiBcIlwiKSArIG5hbWVGcm9tS2V5UGF0aChrZXlQYXRoKSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbmFtZUZyb21LZXlQYXRoKGtleVBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICBrZXlQYXRoIDpcbiAgICAgICAgICAgIGtleVBhdGggPyAoJ1snICsgW10uam9pbi5jYWxsKGtleVBhdGgsICcrJykgKyAnXScpIDogXCJcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZVNjaGVtYShuYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgcHJpbUtleTogcHJpbUtleSxcbiAgICAgICAgICAgIGluZGV4ZXM6IGluZGV4ZXMsXG4gICAgICAgICAgICBtYXBwZWRDbGFzczogbnVsbCxcbiAgICAgICAgICAgIGlkeEJ5TmFtZTogYXJyYXlUb09iamVjdChpbmRleGVzLCBmdW5jdGlvbiAoaW5kZXgpIHsgcmV0dXJuIFtpbmRleC5uYW1lLCBpbmRleF07IH0pLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhZmFyaU11bHRpU3RvcmVGaXgoc3RvcmVOYW1lcykge1xuICAgICAgICByZXR1cm4gc3RvcmVOYW1lcy5sZW5ndGggPT09IDEgPyBzdG9yZU5hbWVzWzBdIDogc3RvcmVOYW1lcztcbiAgICB9XG4gICAgdmFyIGdldE1heEtleSA9IGZ1bmN0aW9uIChJZGJLZXlSYW5nZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgSWRiS2V5UmFuZ2Uub25seShbW11dKTtcbiAgICAgICAgICAgIGdldE1heEtleSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtbXV07IH07XG4gICAgICAgICAgICByZXR1cm4gW1tdXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2V0TWF4S2V5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF4U3RyaW5nOyB9O1xuICAgICAgICAgICAgcmV0dXJuIG1heFN0cmluZztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aCkge1xuICAgICAgICBpZiAoa2V5UGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGdldFNpbmdsZVBhdGhLZXlFeHRyYWN0b3Ioa2V5UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCk7IH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2luZ2xlUGF0aEtleUV4dHJhY3RvcihrZXlQYXRoKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGtleVBhdGguc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9ialtrZXlQYXRoXTsgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKTsgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5aWZ5KGFycmF5TGlrZSkge1xuICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChhcnJheUxpa2UpO1xuICAgIH1cbiAgICB2YXIgX2lkX2NvdW50ZXIgPSAwO1xuICAgIGZ1bmN0aW9uIGdldEtleVBhdGhBbGlhcyhrZXlQYXRoKSB7XG4gICAgICAgIHJldHVybiBrZXlQYXRoID09IG51bGwgP1xuICAgICAgICAgICAgXCI6aWRcIiA6XG4gICAgICAgICAgICB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgIGtleVBhdGggOlxuICAgICAgICAgICAgICAgIFwiW1wiLmNvbmNhdChrZXlQYXRoLmpvaW4oJysnKSwgXCJdXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVEQkNvcmUoZGIsIElkYktleVJhbmdlLCB0bXBUcmFucykge1xuICAgICAgICBmdW5jdGlvbiBleHRyYWN0U2NoZW1hKGRiLCB0cmFucykge1xuICAgICAgICAgICAgdmFyIHRhYmxlcyA9IGFycmF5aWZ5KGRiLm9iamVjdFN0b3JlTmFtZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZGIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGFibGVzOiB0YWJsZXMubWFwKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gdHJhbnMub2JqZWN0U3RvcmUodGFibGUpOyB9KS5tYXAoZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IHN0b3JlLmtleVBhdGgsIGF1dG9JbmNyZW1lbnQgPSBzdG9yZS5hdXRvSW5jcmVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvdW5kID0gaXNBcnJheShrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdXRib3VuZCA9IGtleVBhdGggPT0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEJ5S2V5UGF0aCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdG9yZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZDogb3V0Ym91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5UGF0aDoga2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogYXV0b0luY3JlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0S2V5OiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZXM6IGFycmF5aWZ5KHN0b3JlLmluZGV4TmFtZXMpLm1hcChmdW5jdGlvbiAoaW5kZXhOYW1lKSB7IHJldHVybiBzdG9yZS5pbmRleChpbmRleE5hbWUpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGluZGV4Lm5hbWUsIHVuaXF1ZSA9IGluZGV4LnVuaXF1ZSwgbXVsdGlFbnRyeSA9IGluZGV4Lm11bHRpRW50cnksIGtleVBhdGggPSBpbmRleC5rZXlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG91bmQgPSBpc0FycmF5KGtleVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IGtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWU6IHVuaXF1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRW50cnk6IG11bHRpRW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0S2V5OiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhCeUtleVBhdGhbZ2V0S2V5UGF0aEFsaWFzKGtleVBhdGgpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRJbmRleEJ5S2V5UGF0aDogZnVuY3Rpb24gKGtleVBhdGgpIHsgcmV0dXJuIGluZGV4QnlLZXlQYXRoW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleEJ5S2V5UGF0aFtcIjppZFwiXSA9IHJlc3VsdC5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4QnlLZXlQYXRoW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV0gPSByZXN1bHQucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXNHZXRBbGw6IHRhYmxlcy5sZW5ndGggPiAwICYmICgnZ2V0QWxsJyBpbiB0cmFucy5vYmplY3RTdG9yZSh0YWJsZXNbMF0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAhKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEvKENocm9tZVxcL3xFZGdlXFwvKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgW10uY29uY2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhZmFyaVxcLyhcXGQqKS8pKVsxXSA8IDYwNClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZUlEQktleVJhbmdlKHJhbmdlKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gMyApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gNCApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbnZlcnQgbmV2ZXIgdHlwZSB0byBJREJLZXlSYW5nZVwiKTtcbiAgICAgICAgICAgIHZhciBsb3dlciA9IHJhbmdlLmxvd2VyLCB1cHBlciA9IHJhbmdlLnVwcGVyLCBsb3dlck9wZW4gPSByYW5nZS5sb3dlck9wZW4sIHVwcGVyT3BlbiA9IHJhbmdlLnVwcGVyT3BlbjtcbiAgICAgICAgICAgIHZhciBpZGJSYW5nZSA9IGxvd2VyID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgIHVwcGVyID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UudXBwZXJCb3VuZCh1cHBlciwgISF1cHBlck9wZW4pIDpcbiAgICAgICAgICAgICAgICB1cHBlciA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UubG93ZXJCb3VuZChsb3dlciwgISFsb3dlck9wZW4pIDpcbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UuYm91bmQobG93ZXIsIHVwcGVyLCAhIWxvd2VyT3BlbiwgISF1cHBlck9wZW4pO1xuICAgICAgICAgICAgcmV0dXJuIGlkYlJhbmdlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURiQ29yZVRhYmxlKHRhYmxlU2NoZW1hKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGFibGVTY2hlbWEubmFtZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG11dGF0ZShfYSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IF9hLnRyYW5zLCB0eXBlID0gX2EudHlwZSwga2V5cyA9IF9hLmtleXMsIHZhbHVlcyA9IF9hLnZhbHVlcywgcmFuZ2UgPSBfYS5yYW5nZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dGJvdW5kID0gc3RvcmUua2V5UGF0aCA9PSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBZGRPclB1dCA9IHR5cGUgPT09IFwicHV0XCIgfHwgdHlwZSA9PT0gXCJhZGRcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0FkZE9yUHV0ICYmIHR5cGUgIT09ICdkZWxldGUnICYmIHR5cGUgIT09ICdkZWxldGVSYW5nZScpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wZXJhdGlvbiB0eXBlOiBcIiArIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gKGtleXMgfHwgdmFsdWVzIHx8IHsgbGVuZ3RoOiAxIH0pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMgJiYgdmFsdWVzICYmIGtleXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHaXZlbiBrZXlzIGFycmF5IG11c3QgaGF2ZSBzYW1lIGxlbmd0aCBhcyBnaXZlbiB2YWx1ZXMgYXJyYXkuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IG51bUZhaWx1cmVzOiAwLCBmYWlsdXJlczoge30sIHJlc3VsdHM6IFtdLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXE7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXFzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK251bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RlbGV0ZVJhbmdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLnR5cGUgPT09IDQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLCBmYWlsdXJlczogZmFpbHVyZXMsIHJlc3VsdHM6IFtdLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gMyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IHN0b3JlLmNsZWFyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMucHVzaChyZXEgPSBzdG9yZS5kZWxldGUobWFrZUlEQktleVJhbmdlKHJhbmdlKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gaXNBZGRPclB1dCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVzLCBrZXlzXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZXMsIG51bGxdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5cywgbnVsbF0sIGFyZ3MxID0gX2FbMF0sIGFyZ3MyID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGRPclB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IChhcmdzMiAmJiBhcmdzMltpXSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW3R5cGVdKGFyZ3MxW2ldLCBhcmdzMltpXSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVbdHlwZV0oYXJnczFbaV0pKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IHN0b3JlW3R5cGVdKGFyZ3MxW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RSZXN1bHQgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5mb3JFYWNoKGZ1bmN0aW9uIChyZXEsIGkpIHsgcmV0dXJuIHJlcS5lcnJvciAhPSBudWxsICYmIChmYWlsdXJlc1tpXSA9IHJlcS5lcnJvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzOiBmYWlsdXJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiB0eXBlID09PSBcImRlbGV0ZVwiID8ga2V5cyA6IHJlcXMubWFwKGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIHJlcS5yZXN1bHQ7IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZXN1bHQ6IGxhc3RSZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZG9uZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5DdXJzb3IoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywgdmFsdWVzID0gX2EudmFsdWVzLCBxdWVyeSA9IF9hLnF1ZXJ5LCByZXZlcnNlID0gX2EucmV2ZXJzZSwgdW5pcXVlID0gX2EudW5pcXVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBxdWVyeS5pbmRleCwgcmFuZ2UgPSBxdWVyeS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGluZGV4LmlzUHJpbWFyeUtleSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5pbmRleChpbmRleC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHJldmVyc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXZ1bmlxdWVcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwcmV2XCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5leHR1bmlxdWVcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0XCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSB2YWx1ZXMgfHwgISgnb3BlbktleUN1cnNvcicgaW4gc291cmNlKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbkN1cnNvcihtYWtlSURCS2V5UmFuZ2UocmFuZ2UpLCBkaXJlY3Rpb24pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5vcGVuS2V5Q3Vyc29yKG1ha2VJREJLZXlSYW5nZShyYW5nZSksIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLl9fX2lkID0gKytfaWRfY291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2N1cnNvckNvbnRpbnVlID0gY3Vyc29yLmNvbnRpbnVlLmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5ID0gY3Vyc29yLmNvbnRpbnVlUHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXkgPSBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5LmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY3Vyc29yQWR2YW5jZSA9IGN1cnNvci5hZHZhbmNlLmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb1Rocm93Q3Vyc29ySXNOb3RTdGFydGVkID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDdXJzb3Igbm90IHN0YXJ0ZWRcIik7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9UaHJvd0N1cnNvcklzU3RvcHBlZCA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ3Vyc29yIG5vdCBzdG9wcGVkXCIpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCA9IGN1cnNvci5jb250aW51ZSA9IGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkgPSBjdXJzb3IuYWR2YW5jZSA9IGRvVGhyb3dDdXJzb3JJc05vdFN0YXJ0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZmFpbCA9IHdyYXAocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdvdE9uZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZ290T25lLS0gPyBfdGhpcy5jb250aW51ZSgpIDogX3RoaXMuc3RvcCgpOyB9KS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RhcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlSXRlcmF0aW9uLCByZWplY3RJdGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUl0ZXJhdGlvbiA9IHdyYXAocmVzb2x2ZUl0ZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdEl0ZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5mYWlsID0gcmVqZWN0SXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0b3AgPSBjdXJzb3IuY29udGludWUgPSBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5ID0gY3Vyc29yLmFkdmFuY2UgPSBkb1Rocm93Q3Vyc29ySXNTdG9wcGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUl0ZXJhdGlvbih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGd1YXJkZWRDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZmFpbChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0YXJ0ID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDdXJzb3IgYmVoaW5kIGxhc3QgZW50cnlcIik7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGd1YXJkZWRDYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlID0gX2N1cnNvckNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkgPSBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5hZHZhbmNlID0gX2N1cnNvckFkdmFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGlvblByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnkoaGFzR2V0QWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IHJlcXVlc3QudHJhbnMsIHZhbHVlcyA9IHJlcXVlc3QudmFsdWVzLCBsaW1pdCA9IHJlcXVlc3QubGltaXQsIHF1ZXJ5ID0gcmVxdWVzdC5xdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub25JbmZpbml0TGltaXQgPSBsaW1pdCA9PT0gSW5maW5pdHkgPyB1bmRlZmluZWQgOiBsaW1pdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHF1ZXJ5LmluZGV4LCByYW5nZSA9IHF1ZXJ5LnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBpbmRleC5pc1ByaW1hcnlLZXkgPyBzdG9yZSA6IHN0b3JlLmluZGV4KGluZGV4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkYktleVJhbmdlID0gbWFrZUlEQktleVJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW1pdCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzR2V0QWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHZhbHVlcyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRBbGwoaWRiS2V5UmFuZ2UsIG5vbkluZmluaXRMaW1pdCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0QWxsS2V5cyhpZGJLZXlSYW5nZSwgbm9uSW5maW5pdExpbWl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiByZXNvbHZlKHsgcmVzdWx0OiBldmVudC50YXJnZXQucmVzdWx0IH0pOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRfMSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcV8xID0gdmFsdWVzIHx8ICEoJ29wZW5LZXlDdXJzb3InIGluIHNvdXJjZSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbkN1cnNvcihpZGJLZXlSYW5nZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbktleUN1cnNvcihpZGJLZXlSYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxXzEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSByZXFfMS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyByZXN1bHQ6IHJlc3VsdF8xIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRfMS5wdXNoKHZhbHVlcyA/IGN1cnNvci52YWx1ZSA6IGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCsrY291bnRfMSA9PT0gbGltaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogcmVzdWx0XzEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxXzEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiB0YWJsZVNjaGVtYSxcbiAgICAgICAgICAgICAgICBtdXRhdGU6IG11dGF0ZSxcbiAgICAgICAgICAgICAgICBnZXRNYW55OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gX2EudHJhbnMsIGtleXMgPSBfYS5rZXlzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVzdWx0W3JlcS5fcG9zXSA9IHJlcS5yZXN1bHQpICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytjYWxsYmFja0NvdW50ID09PSBrZXlDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxID0gc3RvcmUuZ2V0KGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuX3BvcyA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBzdWNjZXNzSGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsra2V5Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleUNvdW50ID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywga2V5ID0gX2Eua2V5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmdldChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gcmVzb2x2ZShldmVudC50YXJnZXQucmVzdWx0KTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5KGhhc0dldEFsbCksXG4gICAgICAgICAgICAgICAgb3BlbkN1cnNvcjogb3BlbkN1cnNvcixcbiAgICAgICAgICAgICAgICBjb3VudDogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IF9hLnF1ZXJ5LCB0cmFucyA9IF9hLnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBxdWVyeS5pbmRleCwgcmFuZ2UgPSBxdWVyeS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaW5kZXguaXNQcmltYXJ5S2V5ID8gc3RvcmUgOiBzdG9yZS5pbmRleChpbmRleC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZGJLZXlSYW5nZSA9IG1ha2VJREJLZXlSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRiS2V5UmFuZ2UgPyBzb3VyY2UuY291bnQoaWRiS2V5UmFuZ2UpIDogc291cmNlLmNvdW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHJlc29sdmUoZXYudGFyZ2V0LnJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSBleHRyYWN0U2NoZW1hKGRiLCB0bXBUcmFucyksIHNjaGVtYSA9IF9hLnNjaGVtYSwgaGFzR2V0QWxsID0gX2EuaGFzR2V0QWxsO1xuICAgICAgICB2YXIgdGFibGVzID0gc2NoZW1hLnRhYmxlcy5tYXAoZnVuY3Rpb24gKHRhYmxlU2NoZW1hKSB7IHJldHVybiBjcmVhdGVEYkNvcmVUYWJsZSh0YWJsZVNjaGVtYSk7IH0pO1xuICAgICAgICB2YXIgdGFibGVNYXAgPSB7fTtcbiAgICAgICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7IHJldHVybiB0YWJsZU1hcFt0YWJsZS5uYW1lXSA9IHRhYmxlOyB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IGRiLnRyYW5zYWN0aW9uLmJpbmQoZGIpLFxuICAgICAgICAgICAgdGFibGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhYmxlTWFwW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWJsZSAnXCIuY29uY2F0KG5hbWUsIFwiJyBub3QgZm91bmRcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1hcFtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBNSU5fS0VZOiAtSW5maW5pdHksXG4gICAgICAgICAgICBNQVhfS0VZOiBnZXRNYXhLZXkoSWRiS2V5UmFuZ2UpLFxuICAgICAgICAgICAgc2NoZW1hOiBzY2hlbWFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVNaWRkbGV3YXJlU3RhY2soc3RhY2tJbXBsLCBtaWRkbGV3YXJlcykge1xuICAgICAgICByZXR1cm4gbWlkZGxld2FyZXMucmVkdWNlKGZ1bmN0aW9uIChkb3duLCBfYSkge1xuICAgICAgICAgICAgdmFyIGNyZWF0ZSA9IF9hLmNyZWF0ZTtcbiAgICAgICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd24pLCBjcmVhdGUoZG93bikpKTtcbiAgICAgICAgfSwgc3RhY2tJbXBsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlTWlkZGxld2FyZVN0YWNrcyhtaWRkbGV3YXJlcywgaWRiZGIsIF9hLCB0bXBUcmFucykge1xuICAgICAgICB2YXIgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTsgX2EuaW5kZXhlZERCO1xuICAgICAgICB2YXIgZGJjb3JlID0gY3JlYXRlTWlkZGxld2FyZVN0YWNrKGNyZWF0ZURCQ29yZShpZGJkYiwgSURCS2V5UmFuZ2UsIHRtcFRyYW5zKSwgbWlkZGxld2FyZXMuZGJjb3JlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRiY29yZTogZGJjb3JlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWlkZGxld2FyZVN0YWNrcyhkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIGlkYmRiID0gdG1wVHJhbnMuZGI7XG4gICAgICAgIHZhciBzdGFja3MgPSBjcmVhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLl9taWRkbGV3YXJlcywgaWRiZGIsIGRiLl9kZXBzLCB0bXBUcmFucyk7XG4gICAgICAgIGRiLmNvcmUgPSBzdGFja3MuZGJjb3JlO1xuICAgICAgICBkYi50YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZU5hbWUgPSB0YWJsZS5uYW1lO1xuICAgICAgICAgICAgaWYgKGRiLmNvcmUuc2NoZW1hLnRhYmxlcy5zb21lKGZ1bmN0aW9uICh0YmwpIHsgcmV0dXJuIHRibC5uYW1lID09PSB0YWJsZU5hbWU7IH0pKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY29yZSA9IGRiLmNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZGJbdGFibGVOYW1lXSBpbnN0YW5jZW9mIGRiLlRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiW3RhYmxlTmFtZV0uY29yZSA9IHRhYmxlLmNvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBcGlPblBsYWNlKGRiLCBvYmpzLCB0YWJsZU5hbWVzLCBkYnNjaGVtYSkge1xuICAgICAgICB0YWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIHNjaGVtYSA9IGRic2NoZW1hW3RhYmxlTmFtZV07XG4gICAgICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wRGVzYyA9IGdldFByb3BlcnR5RGVzY3JpcHRvcihvYmosIHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wRGVzYyB8fCAoXCJ2YWx1ZVwiIGluIHByb3BEZXNjICYmIHByb3BEZXNjLnZhbHVlID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmogPT09IGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZSB8fCBvYmogaW5zdGFuY2VvZiBkYi5UcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChvYmosIHRhYmxlTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50YWJsZSh0YWJsZU5hbWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KHRoaXMsIHRhYmxlTmFtZSwgeyB2YWx1ZTogdmFsdWUsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbdGFibGVOYW1lXSA9IG5ldyBkYi5UYWJsZSh0YWJsZU5hbWUsIHNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhYmxlc0FwaShkYiwgb2Jqcykge1xuICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmpba2V5XSBpbnN0YW5jZW9mIGRiLlRhYmxlKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb3dlclZlcnNpb25GaXJzdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLl9jZmcudmVyc2lvbiAtIGIuX2NmZy52ZXJzaW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBydW5VcGdyYWRlcnMoZGIsIG9sZFZlcnNpb24sIGlkYlVwZ3JhZGVUcmFucywgcmVqZWN0KSB7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWE7XG4gICAgICAgIGlmIChpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSAmJiAhZ2xvYmFsU2NoZW1hLiRtZXRhKSB7XG4gICAgICAgICAgICBnbG9iYWxTY2hlbWEuJG1ldGEgPSBjcmVhdGVUYWJsZVNjaGVtYShcIiRtZXRhXCIsIHBhcnNlSW5kZXhTeW50YXgoXCJcIilbMF0sIFtdKTtcbiAgICAgICAgICAgIGRiLl9zdG9yZU5hbWVzLnB1c2goJyRtZXRhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnLCBkYi5fc3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKTtcbiAgICAgICAgdHJhbnMuY3JlYXRlKGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIHRyYW5zLl9jb21wbGV0aW9uLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIHZhciByZWplY3RUcmFuc2FjdGlvbiA9IHRyYW5zLl9yZWplY3QuYmluZCh0cmFucyk7XG4gICAgICAgIHZhciB0cmFuc2xlc3MgPSBQU0QudHJhbnNsZXNzIHx8IFBTRDtcbiAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICBQU0QudHJhbnNsZXNzID0gdHJhbnNsZXNzO1xuICAgICAgICAgICAgaWYgKG9sZFZlcnNpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICBrZXlzKGdsb2JhbFNjaGVtYSkuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYlVwZ3JhZGVUcmFucywgdGFibGVOYW1lLCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7IHJldHVybiBkYi5vbi5wb3B1bGF0ZS5maXJlKHRyYW5zKTsgfSkuY2F0Y2gocmVqZWN0VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRFeGlzdGluZ1ZlcnNpb24oZGIsIHRyYW5zLCBvbGRWZXJzaW9uKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAob2xkVmVyc2lvbikgeyByZXR1cm4gdXBkYXRlVGFibGVzQW5kSW5kZXhlcyhkYiwgb2xkVmVyc2lvbiwgdHJhbnMsIGlkYlVwZ3JhZGVUcmFucyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3RUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaEN1cnJlbnRWZXJzaW9uKGRiLCBpZGJVcGdyYWRlVHJhbnMpIHtcbiAgICAgICAgY3JlYXRlTWlzc2luZ1RhYmxlcyhkYi5fZGJTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIGlmIChpZGJVcGdyYWRlVHJhbnMuZGIudmVyc2lvbiAlIDEwID09PSAwICYmICFpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSkge1xuICAgICAgICAgICAgaWRiVXBncmFkZVRyYW5zLmRiLmNyZWF0ZU9iamVjdFN0b3JlKCckbWV0YScpLmFkZChNYXRoLmNlaWwoKGlkYlVwZ3JhZGVUcmFucy5kYi52ZXJzaW9uIC8gMTApIC0gMSksICd2ZXJzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIGRiLl9kYlNjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKGdsb2JhbFNjaGVtYSwgZGIuX2RiU2NoZW1hKTtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAodGFibGVDaGFuZ2UpIHtcbiAgICAgICAgICAgIGlmICh0YWJsZUNoYW5nZS5jaGFuZ2UubGVuZ3RoIHx8IHRhYmxlQ2hhbmdlLnJlY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIHBhdGNoIGluZGV4ZXMgb2YgdGFibGUgXCIuY29uY2F0KHRhYmxlQ2hhbmdlLm5hbWUsIFwiIGJlY2F1c2UgaXQgaGFzIGNoYW5nZXMgb24gdGhlIHR5cGUgb2YgaW5kZXggb3IgcHJpbWFyeSBrZXkuXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmUodGFibGVDaGFuZ2UubmFtZSk7XG4gICAgICAgICAgICB0YWJsZUNoYW5nZS5hZGQuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiRGV4aWUgdXBncmFkZSBwYXRjaDogQ3JlYXRpbmcgbWlzc2luZyBpbmRleCBcIi5jb25jYXQodGFibGVDaGFuZ2UubmFtZSwgXCIuXCIpLmNvbmNhdChpZHguc3JjKSk7XG4gICAgICAgICAgICAgICAgYWRkSW5kZXgoc3RvcmUsIGlkeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRpZmYuY2hhbmdlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHRhYmxlQ2hhbmdlID0gX2FbX2ldO1xuICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8xKHRhYmxlQ2hhbmdlKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFeGlzdGluZ1ZlcnNpb24oZGIsIHRyYW5zLCBvbGRWZXJzaW9uKSB7XG4gICAgICAgIGlmICh0cmFucy5zdG9yZU5hbWVzLmluY2x1ZGVzKCckbWV0YScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnMudGFibGUoJyRtZXRhJykuZ2V0KCd2ZXJzaW9uJykudGhlbihmdW5jdGlvbiAobWV0YVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YVZlcnNpb24gIT0gbnVsbCA/IG1ldGFWZXJzaW9uIDogb2xkVmVyc2lvbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9sZFZlcnNpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlc0FuZEluZGV4ZXMoZGIsIG9sZFZlcnNpb24sIHRyYW5zLCBpZGJVcGdyYWRlVHJhbnMpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHZhciB2ZXJzaW9ucyA9IGRiLl92ZXJzaW9ucztcbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgdmFyIHZlcnNUb1J1biA9IHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAodikgeyByZXR1cm4gdi5fY2ZnLnZlcnNpb24gPj0gb2xkVmVyc2lvbjsgfSk7XG4gICAgICAgIGlmICh2ZXJzVG9SdW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJzVG9SdW4uZm9yRWFjaChmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFNjaGVtYSA9IGdsb2JhbFNjaGVtYTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBvbGRTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIG5ld1NjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBuZXdTY2hlbWE7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKG9sZFNjaGVtYSwgbmV3U2NoZW1hKTtcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5mb3JFYWNoKGZ1bmN0aW9uICh0dXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJVcGdyYWRlVHJhbnMsIHR1cGxlWzBdLCB0dXBsZVsxXS5wcmltS2V5LCB0dXBsZVsxXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkaWZmLmNoYW5nZS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5yZWNyZWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVXBncmFkZShcIk5vdCB5ZXQgc3VwcG9ydCBmb3IgY2hhbmdpbmcgcHJpbWFyeSBrZXlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVfMSA9IGlkYlVwZ3JhZGVUcmFucy5vYmplY3RTdG9yZShjaGFuZ2UubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuYWRkLmZvckVhY2goZnVuY3Rpb24gKGlkeCkgeyByZXR1cm4gYWRkSW5kZXgoc3RvcmVfMSwgaWR4KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuY2hhbmdlLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlXzEuZGVsZXRlSW5kZXgoaWR4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEluZGV4KHN0b3JlXzEsIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5kZWwuZm9yRWFjaChmdW5jdGlvbiAoaWR4TmFtZSkgeyByZXR1cm4gc3RvcmVfMS5kZWxldGVJbmRleChpZHhOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudFVwZ3JhZGUgPSB2ZXJzaW9uLl9jZmcuY29udGVudFVwZ3JhZGU7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRVcGdyYWRlICYmIHZlcnNpb24uX2NmZy52ZXJzaW9uID4gb2xkVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLl9tZW1vaXplZFRhYmxlcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBncmFkZVNjaGVtYV8xID0gc2hhbGxvd0Nsb25lKG5ld1NjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYuZGVsLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGdyYWRlU2NoZW1hXzFbdGFibGVdID0gb2xkU2NoZW1hW3RhYmxlXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVRhYmxlc0FwaShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSwga2V5cyh1cGdyYWRlU2NoZW1hXzEpLCB1cGdyYWRlU2NoZW1hXzEpO1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5zY2hlbWEgPSB1cGdyYWRlU2NoZW1hXzE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50VXBncmFkZUlzQXN5bmNfMSA9IGlzQXN5bmNGdW5jdGlvbihjb250ZW50VXBncmFkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50VXBncmFkZUlzQXN5bmNfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWVfMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2VGb2xsb3dlZCA9IERleGllUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWVfMSA9IGNvbnRlbnRVcGdyYWRlKHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZV8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRVcGdyYWRlSXNBc3luY18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNyZW1lbnRvciA9IGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzLmJpbmQobnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlXzEudGhlbihkZWNyZW1lbnRvciwgZGVjcmVtZW50b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocmV0dXJuVmFsdWVfMSAmJiB0eXBlb2YgcmV0dXJuVmFsdWVfMS50aGVuID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlXzEpIDogcHJvbWlzZUZvbGxvd2VkLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV0dXJuVmFsdWVfMTsgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgIGRlbGV0ZVJlbW92ZWRUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucyk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7XG4gICAgICAgICAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0sIGRiLl9zdG9yZU5hbWVzLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICAgICAgICAgIHRyYW5zLnNjaGVtYSA9IGRiLl9kYlNjaGVtYTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGIuaWRiZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5jZWlsKGRiLmlkYmRiLnZlcnNpb24gLyAxMCkgPT09IHZlcnNpb24uX2NmZy52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5pZGJkYi5kZWxldGVPYmplY3RTdG9yZSgnJG1ldGEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYi5fZGJTY2hlbWEuJG1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5fc3RvcmVOYW1lcyA9IGRiLl9zdG9yZU5hbWVzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gbmFtZSAhPT0gJyRtZXRhJzsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5vYmplY3RTdG9yZSgnJG1ldGEnKS5wdXQodmVyc2lvbi5fY2ZnLnZlcnNpb24sICd2ZXJzaW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHJ1blF1ZXVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXVlLmxlbmd0aCA/IERleGllUHJvbWlzZS5yZXNvbHZlKHF1ZXVlLnNoaWZ0KCkodHJhbnMuaWRidHJhbnMpKS50aGVuKHJ1blF1ZXVlKSA6XG4gICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuUXVldWUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNyZWF0ZU1pc3NpbmdUYWJsZXMoZ2xvYmFsU2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2NoZW1hRGlmZihvbGRTY2hlbWEsIG5ld1NjaGVtYSkge1xuICAgICAgICB2YXIgZGlmZiA9IHtcbiAgICAgICAgICAgIGRlbDogW10sXG4gICAgICAgICAgICBhZGQ6IFtdLFxuICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdGFibGU7XG4gICAgICAgIGZvciAodGFibGUgaW4gb2xkU2NoZW1hKSB7XG4gICAgICAgICAgICBpZiAoIW5ld1NjaGVtYVt0YWJsZV0pXG4gICAgICAgICAgICAgICAgZGlmZi5kZWwucHVzaCh0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh0YWJsZSBpbiBuZXdTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciBvbGREZWYgPSBvbGRTY2hlbWFbdGFibGVdLCBuZXdEZWYgPSBuZXdTY2hlbWFbdGFibGVdO1xuICAgICAgICAgICAgaWYgKCFvbGREZWYpIHtcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5wdXNoKFt0YWJsZSwgbmV3RGVmXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVmOiBuZXdEZWYsXG4gICAgICAgICAgICAgICAgICAgIHJlY3JlYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGVsOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKChcbiAgICAgICAgICAgICAgICAnJyArIChvbGREZWYucHJpbUtleS5rZXlQYXRoIHx8ICcnKSkgIT09ICgnJyArIChuZXdEZWYucHJpbUtleS5rZXlQYXRoIHx8ICcnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKG9sZERlZi5wcmltS2V5LmF1dG8gIT09IG5ld0RlZi5wcmltS2V5LmF1dG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZS5yZWNyZWF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYuY2hhbmdlLnB1c2goY2hhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRJbmRleGVzID0gb2xkRGVmLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ZXMgPSBuZXdEZWYuaWR4QnlOYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4TmFtZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpZHhOYW1lIGluIG9sZEluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3SW5kZXhlc1tpZHhOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuZGVsLnB1c2goaWR4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpZHhOYW1lIGluIG5ld0luZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRJZHggPSBvbGRJbmRleGVzW2lkeE5hbWVdLCBuZXdJZHggPSBuZXdJbmRleGVzW2lkeE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRJZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmFkZC5wdXNoKG5ld0lkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGRJZHguc3JjICE9PSBuZXdJZHguc3JjKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5jaGFuZ2UucHVzaChuZXdJZHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UuZGVsLmxlbmd0aCA+IDAgfHwgY2hhbmdlLmFkZC5sZW5ndGggPiAwIHx8IGNoYW5nZS5jaGFuZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWZmO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIHZhciBzdG9yZSA9IGlkYnRyYW5zLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHRhYmxlTmFtZSwgcHJpbUtleS5rZXlQYXRoID9cbiAgICAgICAgICAgIHsga2V5UGF0aDogcHJpbUtleS5rZXlQYXRoLCBhdXRvSW5jcmVtZW50OiBwcmltS2V5LmF1dG8gfSA6XG4gICAgICAgICAgICB7IGF1dG9JbmNyZW1lbnQ6IHByaW1LZXkuYXV0byB9KTtcbiAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgcmV0dXJuIGFkZEluZGV4KHN0b3JlLCBpZHgpOyB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVNaXNzaW5nVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpIHtcbiAgICAgICAga2V5cyhuZXdTY2hlbWEpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHRhYmxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0RleGllOiBDcmVhdGluZyBtaXNzaW5nIHRhYmxlJywgdGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBuZXdTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBuZXdTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlbGV0ZVJlbW92ZWRUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICBbXS5zbGljZS5jYWxsKGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXMpLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld1NjaGVtYVtzdG9yZU5hbWVdID09IG51bGwgJiYgaWRidHJhbnMuZGIuZGVsZXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEluZGV4KHN0b3JlLCBpZHgpIHtcbiAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoaWR4Lm5hbWUsIGlkeC5rZXlQYXRoLCB7IHVuaXF1ZTogaWR4LnVuaXF1ZSwgbXVsdGlFbnRyeTogaWR4Lm11bHRpIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKSB7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSB7fTtcbiAgICAgICAgdmFyIGRiU3RvcmVOYW1lcyA9IHNsaWNlKGlkYmRiLm9iamVjdFN0b3JlTmFtZXMsIDApO1xuICAgICAgICBkYlN0b3JlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0bXBUcmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5rZXlQYXRoO1xuICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBjcmVhdGVJbmRleFNwZWMobmFtZUZyb21LZXlQYXRoKGtleVBhdGgpLCBrZXlQYXRoIHx8IFwiXCIsIHRydWUsIGZhbHNlLCAhIXN0b3JlLmF1dG9JbmNyZW1lbnQsIGtleVBhdGggJiYgdHlwZW9mIGtleVBhdGggIT09IFwic3RyaW5nXCIsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RvcmUuaW5kZXhOYW1lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBpZGJpbmRleCA9IHN0b3JlLmluZGV4KHN0b3JlLmluZGV4TmFtZXNbal0pO1xuICAgICAgICAgICAgICAgIGtleVBhdGggPSBpZGJpbmRleC5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGNyZWF0ZUluZGV4U3BlYyhpZGJpbmRleC5uYW1lLCBrZXlQYXRoLCAhIWlkYmluZGV4LnVuaXF1ZSwgISFpZGJpbmRleC5tdWx0aUVudHJ5LCBmYWxzZSwga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCAhPT0gXCJzdHJpbmdcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbG9iYWxTY2hlbWFbc3RvcmVOYW1lXSA9IGNyZWF0ZVRhYmxlU2NoZW1hKHN0b3JlTmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZ2xvYmFsU2NoZW1hO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgZGIudmVybm8gPSBpZGJkYi52ZXJzaW9uIC8gMTA7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBidWlsZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgZGIuX3N0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzLCAwKTtcbiAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLl9hbGxUYWJsZXNdLCBrZXlzKGdsb2JhbFNjaGVtYSksIGdsb2JhbFNjaGVtYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZlcmlmeUluc3RhbGxlZFNjaGVtYShkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbGxlZFNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgdG1wVHJhbnMpO1xuICAgICAgICB2YXIgZGlmZiA9IGdldFNjaGVtYURpZmYoaW5zdGFsbGVkU2NoZW1hLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICByZXR1cm4gIShkaWZmLmFkZC5sZW5ndGggfHwgZGlmZi5jaGFuZ2Uuc29tZShmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIGNoLmFkZC5sZW5ndGggfHwgY2guY2hhbmdlLmxlbmd0aDsgfSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhkYiwgc2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICB2YXIgc3RvcmVOYW1lcyA9IGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcmVOYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHN0b3JlTmFtZXNbaV07XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJ0cmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICAgICAgZGIuX2hhc0dldEFsbCA9ICdnZXRBbGwnIGluIHN0b3JlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdG9yZS5pbmRleE5hbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4TmFtZSA9IHN0b3JlLmluZGV4TmFtZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5pbmRleChpbmRleE5hbWUpLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgdmFyIGRleGllTmFtZSA9IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IGtleVBhdGggOiBcIltcIiArIHNsaWNlKGtleVBhdGgpLmpvaW4oJysnKSArIFwiXVwiO1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWFbc3RvcmVOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhTcGVjID0gc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2RleGllTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleFNwZWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4U3BlYy5uYW1lID0gaW5kZXhOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtzdG9yZU5hbWVdLmlkeEJ5TmFtZVtkZXhpZU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2luZGV4TmFtZV0gPSBpbmRleFNwZWM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgICEvKENocm9tZVxcL3xFZGdlXFwvKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgX2dsb2JhbC5Xb3JrZXJHbG9iYWxTY29wZSAmJiBfZ2xvYmFsIGluc3RhbmNlb2YgX2dsb2JhbC5Xb3JrZXJHbG9iYWxTY29wZSAmJlxuICAgICAgICAgICAgW10uY29uY2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhZmFyaVxcLyhcXGQqKS8pKVsxXSA8IDYwNCkge1xuICAgICAgICAgICAgZGIuX2hhc0dldEFsbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlSW5kZXhTeW50YXgocHJpbUtleUFuZEluZGV4ZXMpIHtcbiAgICAgICAgcmV0dXJuIHByaW1LZXlBbmRJbmRleGVzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChpbmRleCwgaW5kZXhOdW0pIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciB0eXBlU3BsaXQgPSBpbmRleC5zcGxpdCgnOicpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSAoX2EgPSB0eXBlU3BsaXRbMV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCk7XG4gICAgICAgICAgICBpbmRleCA9IHR5cGVTcGxpdFswXS50cmltKCk7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGluZGV4LnJlcGxhY2UoLyhbJipdfFxcK1xcKykvZywgXCJcIik7XG4gICAgICAgICAgICB2YXIga2V5UGF0aCA9IC9eXFxbLy50ZXN0KG5hbWUpID8gbmFtZS5tYXRjaCgvXlxcWyguKilcXF0kLylbMV0uc3BsaXQoJysnKSA6IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW5kZXhTcGVjKG5hbWUsIGtleVBhdGggfHwgbnVsbCwgL1xcJi8udGVzdChpbmRleCksIC9cXCovLnRlc3QoaW5kZXgpLCAvXFwrXFwrLy50ZXN0KGluZGV4KSwgaXNBcnJheShrZXlQYXRoKSwgaW5kZXhOdW0gPT09IDAsIHR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgVmVyc2lvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWZXJzaW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9jcmVhdGVUYWJsZVNjaGVtYSA9IGZ1bmN0aW9uIChuYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVGFibGVTY2hlbWEobmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9wYXJzZUluZGV4U3ludGF4ID0gZnVuY3Rpb24gKHByaW1LZXlBbmRJbmRleGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbmRleFN5bnRheChwcmltS2V5QW5kSW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9wYXJzZVN0b3Jlc1NwZWMgPSBmdW5jdGlvbiAoc3RvcmVzLCBvdXRTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBrZXlzKHN0b3JlcykuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3Jlc1t0YWJsZU5hbWVdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleGVzID0gX3RoaXMuX3BhcnNlSW5kZXhTeW50YXgoc3RvcmVzW3RhYmxlTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IGluZGV4ZXMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmltS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoJ0ludmFsaWQgc2NoZW1hIGZvciB0YWJsZSAnICsgdGFibGVOYW1lICsgJzogJyArIHN0b3Jlc1t0YWJsZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmltS2V5LnVuaXF1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmltS2V5Lm11bHRpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdQcmltYXJ5IGtleSBjYW5ub3QgYmUgbXVsdGlFbnRyeSonKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHguYXV0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoJ09ubHkgcHJpbWFyeSBrZXkgY2FuIGJlIG1hcmtlZCBhcyBhdXRvSW5jcmVtZW50ICgrKyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWR4LmtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdJbmRleCBtdXN0IGhhdmUgYSBuYW1lIGFuZCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGJsU2NoZW1hID0gX3RoaXMuX2NyZWF0ZVRhYmxlU2NoZW1hKHRhYmxlTmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgICAgIG91dFNjaGVtYVt0YWJsZU5hbWVdID0gdGJsU2NoZW1hO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS5zdG9yZXMgPSBmdW5jdGlvbiAoc3RvcmVzKSB7XG4gICAgICAgICAgICB2YXIgZGIgPSB0aGlzLmRiO1xuICAgICAgICAgICAgdGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSA9IHRoaXMuX2NmZy5zdG9yZXNTb3VyY2VcbiAgICAgICAgICAgICAgICA/IGV4dGVuZCh0aGlzLl9jZmcuc3RvcmVzU291cmNlLCBzdG9yZXMpXG4gICAgICAgICAgICAgICAgOiBzdG9yZXM7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbnMgPSBkYi5fdmVyc2lvbnM7XG4gICAgICAgICAgICB2YXIgc3RvcmVzU3BlYyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRic2NoZW1hID0ge307XG4gICAgICAgICAgICB2ZXJzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHN0b3Jlc1NwZWMsIHZlcnNpb24uX2NmZy5zdG9yZXNTb3VyY2UpO1xuICAgICAgICAgICAgICAgIGRic2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hID0ge307XG4gICAgICAgICAgICAgICAgdmVyc2lvbi5fcGFyc2VTdG9yZXNTcGVjKHN0b3Jlc1NwZWMsIGRic2NoZW1hKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGIuX2RiU2NoZW1hID0gZGJzY2hlbWE7XG4gICAgICAgICAgICByZW1vdmVUYWJsZXNBcGkoZGIsIFtkYi5fYWxsVGFibGVzLCBkYiwgZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7XG4gICAgICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuX2FsbFRhYmxlcywgZGIsIGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgdGhpcy5fY2ZnLnRhYmxlc10sIGtleXMoZGJzY2hlbWEpLCBkYnNjaGVtYSk7XG4gICAgICAgICAgICBkYi5fc3RvcmVOYW1lcyA9IGtleXMoZGJzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLnVwZ3JhZGUgPSBmdW5jdGlvbiAodXBncmFkZUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9jZmcuY29udGVudFVwZ3JhZGUgPSBwcm9taXNhYmxlQ2hhaW4odGhpcy5fY2ZnLmNvbnRlbnRVcGdyYWRlIHx8IG5vcCwgdXBncmFkZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmVyc2lvbjtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVmVyc2lvbkNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihWZXJzaW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLl9jZmcgPSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbk51bWJlcixcbiAgICAgICAgICAgICAgICBzdG9yZXNTb3VyY2U6IG51bGwsXG4gICAgICAgICAgICAgICAgZGJzY2hlbWE6IHt9LFxuICAgICAgICAgICAgICAgIHRhYmxlczoge30sXG4gICAgICAgICAgICAgICAgY29udGVudFVwZ3JhZGU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKSB7XG4gICAgICAgIHZhciBkYk5hbWVzREIgPSBpbmRleGVkREJbXCJfZGJOYW1lc0RCXCJdO1xuICAgICAgICBpZiAoIWRiTmFtZXNEQikge1xuICAgICAgICAgICAgZGJOYW1lc0RCID0gaW5kZXhlZERCW1wiX2RiTmFtZXNEQlwiXSA9IG5ldyBEZXhpZSQxKERCTkFNRVNfREIsIHtcbiAgICAgICAgICAgICAgICBhZGRvbnM6IFtdLFxuICAgICAgICAgICAgICAgIGluZGV4ZWREQjogaW5kZXhlZERCLFxuICAgICAgICAgICAgICAgIElEQktleVJhbmdlOiBJREJLZXlSYW5nZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGJOYW1lc0RCLnZlcnNpb24oMSkuc3RvcmVzKHsgZGJuYW1lczogXCJuYW1lXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRiTmFtZXNEQi50YWJsZShcImRibmFtZXNcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ZWREQiAmJiB0eXBlb2YgaW5kZXhlZERCLmRhdGFiYXNlcyA9PT0gXCJmdW5jdGlvblwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRhYmFzZU5hbWVzKF9hKSB7XG4gICAgICAgIHZhciBpbmRleGVkREIgPSBfYS5pbmRleGVkREIsIElEQktleVJhbmdlID0gX2EuSURCS2V5UmFuZ2U7XG4gICAgICAgIHJldHVybiBoYXNEYXRhYmFzZXNOYXRpdmUoaW5kZXhlZERCKVxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoaW5kZXhlZERCLmRhdGFiYXNlcygpKS50aGVuKGZ1bmN0aW9uIChpbmZvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmZvc1xuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpbmZvKSB7IHJldHVybiBpbmZvLm5hbWU7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5hbWUgIT09IERCTkFNRVNfREI7IH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogZ2V0RGJOYW1lc1RhYmxlKGluZGV4ZWREQiwgSURCS2V5UmFuZ2UpLnRvQ29sbGVjdGlvbigpLnByaW1hcnlLZXlzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9vbkRhdGFiYXNlQ3JlYXRlZChfYSwgbmFtZSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICAhaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQikgJiZcbiAgICAgICAgICAgIG5hbWUgIT09IERCTkFNRVNfREIgJiZcbiAgICAgICAgICAgIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS5wdXQoeyBuYW1lOiBuYW1lIH0pLmNhdGNoKG5vcCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9vbkRhdGFiYXNlRGVsZXRlZChfYSwgbmFtZSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICAhaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQikgJiZcbiAgICAgICAgICAgIG5hbWUgIT09IERCTkFNRVNfREIgJiZcbiAgICAgICAgICAgIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS5kZWxldGUobmFtZSkuY2F0Y2gobm9wKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2aXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFBTRC5sZXRUaHJvdWdoID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpZGJSZWFkeSgpIHtcbiAgICAgICAgdmFyIGlzU2FmYXJpID0gIW5hdmlnYXRvci51c2VyQWdlbnREYXRhICYmXG4gICAgICAgICAgICAvU2FmYXJpXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICAhL0Nocm9tKGV8aXVtKVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKCFpc1NhZmFyaSB8fCAhaW5kZXhlZERCLmRhdGFiYXNlcylcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgdmFyIGludGVydmFsSWQ7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgdmFyIHRyeUlkYiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4ZWREQi5kYXRhYmFzZXMoKS5maW5hbGx5KHJlc29sdmUpOyB9O1xuICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHRyeUlkYiwgMTAwKTtcbiAgICAgICAgICAgIHRyeUlkYigpO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7IH0pO1xuICAgIH1cblxuICAgIHZhciBfYTtcbiAgICBmdW5jdGlvbiBpc0VtcHR5UmFuZ2Uobm9kZSkge1xuICAgICAgICByZXR1cm4gIShcImZyb21cIiBpbiBub2RlKTtcbiAgICB9XG4gICAgdmFyIFJhbmdlU2V0ID0gZnVuY3Rpb24gKGZyb21PclRyZWUsIHRvKSB7XG4gICAgICAgIGlmICh0aGlzKSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA/IHsgZDogMSwgZnJvbTogZnJvbU9yVHJlZSwgdG86IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gdG8gOiBmcm9tT3JUcmVlIH0gOiB7IGQ6IDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcnYgPSBuZXcgUmFuZ2VTZXQoKTtcbiAgICAgICAgICAgIGlmIChmcm9tT3JUcmVlICYmIChcImRcIiBpbiBmcm9tT3JUcmVlKSkge1xuICAgICAgICAgICAgICAgIGV4dGVuZChydiwgZnJvbU9yVHJlZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb3BzKFJhbmdlU2V0LnByb3RvdHlwZSwgKF9hID0ge1xuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAocmFuZ2VTZXQpIHtcbiAgICAgICAgICAgICAgICBtZXJnZVJhbmdlcyh0aGlzLCByYW5nZVNldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkS2V5OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgYWRkUmFuZ2UodGhpcywga2V5LCBrZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEtleXM6IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYWRkUmFuZ2UoX3RoaXMsIGtleSwga2V5KTsgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzS2V5OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHRoaXMpLm5leHQoa2V5KS52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSAmJiBjbXAobm9kZS5mcm9tLCBrZXkpIDw9IDAgJiYgY21wKG5vZGUudG8sIGtleSkgPj0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2FbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFJhbmdlU2V0SXRlcmF0b3IodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIF9hKSk7XG4gICAgZnVuY3Rpb24gYWRkUmFuZ2UodGFyZ2V0LCBmcm9tLCB0bykge1xuICAgICAgICB2YXIgZGlmZiA9IGNtcChmcm9tLCB0byk7XG4gICAgICAgIGlmIChpc05hTihkaWZmKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGRpZmYgPiAwKVxuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcigpO1xuICAgICAgICBpZiAoaXNFbXB0eVJhbmdlKHRhcmdldCkpXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHRhcmdldCwgeyBmcm9tOiBmcm9tLCB0bzogdG8sIGQ6IDEgfSk7XG4gICAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0Lmw7XG4gICAgICAgIHZhciByaWdodCA9IHRhcmdldC5yO1xuICAgICAgICBpZiAoY21wKHRvLCB0YXJnZXQuZnJvbSkgPCAwKSB7XG4gICAgICAgICAgICBsZWZ0XG4gICAgICAgICAgICAgICAgPyBhZGRSYW5nZShsZWZ0LCBmcm9tLCB0bylcbiAgICAgICAgICAgICAgICA6ICh0YXJnZXQubCA9IHsgZnJvbTogZnJvbSwgdG86IHRvLCBkOiAxLCBsOiBudWxsLCByOiBudWxsIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlYmFsYW5jZSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbXAoZnJvbSwgdGFyZ2V0LnRvKSA+IDApIHtcbiAgICAgICAgICAgIHJpZ2h0XG4gICAgICAgICAgICAgICAgPyBhZGRSYW5nZShyaWdodCwgZnJvbSwgdG8pXG4gICAgICAgICAgICAgICAgOiAodGFyZ2V0LnIgPSB7IGZyb206IGZyb20sIHRvOiB0bywgZDogMSwgbDogbnVsbCwgcjogbnVsbCB9KTtcbiAgICAgICAgICAgIHJldHVybiByZWJhbGFuY2UodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY21wKGZyb20sIHRhcmdldC5mcm9tKSA8IDApIHtcbiAgICAgICAgICAgIHRhcmdldC5mcm9tID0gZnJvbTtcbiAgICAgICAgICAgIHRhcmdldC5sID0gbnVsbDtcbiAgICAgICAgICAgIHRhcmdldC5kID0gcmlnaHQgPyByaWdodC5kICsgMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNtcCh0bywgdGFyZ2V0LnRvKSA+IDApIHtcbiAgICAgICAgICAgIHRhcmdldC50byA9IHRvO1xuICAgICAgICAgICAgdGFyZ2V0LnIgPSBudWxsO1xuICAgICAgICAgICAgdGFyZ2V0LmQgPSB0YXJnZXQubCA/IHRhcmdldC5sLmQgKyAxIDogMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmlnaHRXYXNDdXRPZmYgPSAhdGFyZ2V0LnI7XG4gICAgICAgIGlmIChsZWZ0ICYmICF0YXJnZXQubCkge1xuICAgICAgICAgICAgbWVyZ2VSYW5nZXModGFyZ2V0LCBsZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmlnaHQgJiYgcmlnaHRXYXNDdXRPZmYpIHtcbiAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldCwgcmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1lcmdlUmFuZ2VzKHRhcmdldCwgbmV3U2V0KSB7XG4gICAgICAgIGZ1bmN0aW9uIF9hZGRSYW5nZVNldCh0YXJnZXQsIF9hKSB7XG4gICAgICAgICAgICB2YXIgZnJvbSA9IF9hLmZyb20sIHRvID0gX2EudG8sIGwgPSBfYS5sLCByID0gX2EucjtcbiAgICAgICAgICAgIGFkZFJhbmdlKHRhcmdldCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgaWYgKGwpXG4gICAgICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgbCk7XG4gICAgICAgICAgICBpZiAocilcbiAgICAgICAgICAgICAgICBfYWRkUmFuZ2VTZXQodGFyZ2V0LCByKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRW1wdHlSYW5nZShuZXdTZXQpKVxuICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgbmV3U2V0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmFuZ2VzT3ZlcmxhcChyYW5nZVNldDEsIHJhbmdlU2V0Mikge1xuICAgICAgICB2YXIgaTEgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHJhbmdlU2V0Mik7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0MSA9IGkxLm5leHQoKTtcbiAgICAgICAgaWYgKG5leHRSZXN1bHQxLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBhID0gbmV4dFJlc3VsdDEudmFsdWU7XG4gICAgICAgIHZhciBpMiA9IGdldFJhbmdlU2V0SXRlcmF0b3IocmFuZ2VTZXQxKTtcbiAgICAgICAgdmFyIG5leHRSZXN1bHQyID0gaTIubmV4dChhLmZyb20pO1xuICAgICAgICB2YXIgYiA9IG5leHRSZXN1bHQyLnZhbHVlO1xuICAgICAgICB3aGlsZSAoIW5leHRSZXN1bHQxLmRvbmUgJiYgIW5leHRSZXN1bHQyLmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChjbXAoYi5mcm9tLCBhLnRvKSA8PSAwICYmIGNtcChiLnRvLCBhLmZyb20pID49IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjbXAoYS5mcm9tLCBiLmZyb20pIDwgMFxuICAgICAgICAgICAgICAgID8gKGEgPSAobmV4dFJlc3VsdDEgPSBpMS5uZXh0KGIuZnJvbSkpLnZhbHVlKVxuICAgICAgICAgICAgICAgIDogKGIgPSAobmV4dFJlc3VsdDIgPSBpMi5uZXh0KGEuZnJvbSkpLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJhbmdlU2V0SXRlcmF0b3Iobm9kZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSBpc0VtcHR5UmFuZ2Uobm9kZSkgPyBudWxsIDogeyBzOiAwLCBuOiBub2RlIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleVByb3ZpZGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnMgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQcm92aWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGUubi5sICYmIGNtcChrZXksIHN0YXRlLm4uZnJvbSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5sLCBzOiAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGUubi5sKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5sLCBzOiAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnMgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5UHJvdmlkZWQgfHwgY21wKGtleSwgc3RhdGUubi50bykgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHN0YXRlLm4sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm4ucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5yLCBzOiAwIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0YXRlLnVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYmFsYW5jZSh0YXJnZXQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGRpZmYgPSAoKChfYSA9IHRhcmdldC5yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZCkgfHwgMCkgLSAoKChfYiA9IHRhcmdldC5sKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZCkgfHwgMCk7XG4gICAgICAgIHZhciByID0gZGlmZiA+IDEgPyBcInJcIiA6IGRpZmYgPCAtMSA/IFwibFwiIDogXCJcIjtcbiAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgIHZhciBsID0gciA9PT0gXCJyXCIgPyBcImxcIiA6IFwiclwiO1xuICAgICAgICAgICAgdmFyIHJvb3RDbG9uZSA9IF9fYXNzaWduKHt9LCB0YXJnZXQpO1xuICAgICAgICAgICAgdmFyIG9sZFJvb3RSaWdodCA9IHRhcmdldFtyXTtcbiAgICAgICAgICAgIHRhcmdldC5mcm9tID0gb2xkUm9vdFJpZ2h0LmZyb207XG4gICAgICAgICAgICB0YXJnZXQudG8gPSBvbGRSb290UmlnaHQudG87XG4gICAgICAgICAgICB0YXJnZXRbcl0gPSBvbGRSb290UmlnaHRbcl07XG4gICAgICAgICAgICByb290Q2xvbmVbcl0gPSBvbGRSb290UmlnaHRbbF07XG4gICAgICAgICAgICB0YXJnZXRbbF0gPSByb290Q2xvbmU7XG4gICAgICAgICAgICByb290Q2xvbmUuZCA9IGNvbXB1dGVEZXB0aChyb290Q2xvbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldC5kID0gY29tcHV0ZURlcHRoKHRhcmdldCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXB1dGVEZXB0aChfYSkge1xuICAgICAgICB2YXIgciA9IF9hLnIsIGwgPSBfYS5sO1xuICAgICAgICByZXR1cm4gKHIgPyAobCA/IE1hdGgubWF4KHIuZCwgbC5kKSA6IHIuZCkgOiBsID8gbC5kIDogMCkgKyAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodGFyZ2V0LCBuZXdTZXQpIHtcbiAgICAgICAga2V5cyhuZXdTZXQpLmZvckVhY2goZnVuY3Rpb24gKHBhcnQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRbcGFydF0pXG4gICAgICAgICAgICAgICAgbWVyZ2VSYW5nZXModGFyZ2V0W3BhcnRdLCBuZXdTZXRbcGFydF0pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRhcmdldFtwYXJ0XSA9IGNsb25lU2ltcGxlT2JqZWN0VHJlZShuZXdTZXRbcGFydF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvYnNTZXRzT3ZlcmxhcChvczEsIG9zMikge1xuICAgICAgICByZXR1cm4gb3MxLmFsbCB8fCBvczIuYWxsIHx8IE9iamVjdC5rZXlzKG9zMSkuc29tZShmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBvczJba2V5XSAmJiByYW5nZXNPdmVybGFwKG9zMltrZXldLCBvczFba2V5XSk7IH0pO1xuICAgIH1cblxuICAgIHZhciBjYWNoZSA9IHt9O1xuXG4gICAgdmFyIHVuc2lnbmFsZWRQYXJ0cyA9IHt9O1xuICAgIHZhciBpc1Rhc2tFbnF1ZXVlZCA9IGZhbHNlO1xuICAgIGZ1bmN0aW9uIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHBhcnQsIG9wdGltaXN0aWMpIHtcbiAgICAgICAgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldCh1bnNpZ25hbGVkUGFydHMsIHBhcnQpO1xuICAgICAgICBpZiAoIWlzVGFza0VucXVldWVkKSB7XG4gICAgICAgICAgICBpc1Rhc2tFbnF1ZXVlZCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpc1Rhc2tFbnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHVuc2lnbmFsZWRQYXJ0cztcbiAgICAgICAgICAgICAgICB1bnNpZ25hbGVkUGFydHMgPSB7fTtcbiAgICAgICAgICAgICAgICBzaWduYWxTdWJzY3JpYmVyc05vdyhwYXJ0cywgZmFsc2UpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2lnbmFsU3Vic2NyaWJlcnNOb3codXBkYXRlZFBhcnRzLCBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICBpZiAoZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMgPT09IHZvaWQgMCkgeyBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcyA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBxdWVyaWVzVG9TaWduYWwgPSBuZXcgU2V0KCk7XG4gICAgICAgIGlmICh1cGRhdGVkUGFydHMuYWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LnZhbHVlcyhjYWNoZSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNvbGxlY3RUYWJsZVN1YnNjcmliZXJzKHRibENhY2hlLCB1cGRhdGVkUGFydHMsIHF1ZXJpZXNUb1NpZ25hbCwgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHVwZGF0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IC9eaWRiXFw6XFwvXFwvKC4qKVxcLyguKilcXC8vLmV4ZWMoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRiTmFtZSA9IHBhcnRzWzFdLCB0YWJsZU5hbWUgPSBwYXJ0c1syXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGJsQ2FjaGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBxdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVlcmllc1RvU2lnbmFsLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIHJlcXVlcnkoKTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbGxlY3RUYWJsZVN1YnNjcmliZXJzKHRibENhY2hlLCB1cGRhdGVkUGFydHMsIG91dFF1ZXJpZXNUb1NpZ25hbCwgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRFbnRyeUxpc3RzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyh0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5KTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYiA9IF9hW19pXSwgaW5kZXhOYW1lID0gX2JbMF0sIGVudHJpZXMgPSBfYlsxXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudHJpZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgZW50cmllc18xID0gZW50cmllczsgX2MgPCBlbnRyaWVzXzEubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc18xW19jXTtcbiAgICAgICAgICAgICAgICBpZiAob2JzU2V0c092ZXJsYXAodXBkYXRlZFBhcnRzLCBlbnRyeS5vYnNTZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIG91dFF1ZXJpZXNUb1NpZ25hbC5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKVxuICAgICAgICAgICAgICAgIHVwZGF0ZWRFbnRyeUxpc3RzLnB1c2goW2luZGV4TmFtZSwgZmlsdGVyZWRFbnRyaWVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfZCA9IDAsIHVwZGF0ZWRFbnRyeUxpc3RzXzEgPSB1cGRhdGVkRW50cnlMaXN0czsgX2QgPCB1cGRhdGVkRW50cnlMaXN0c18xLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgIHZhciBfZSA9IHVwZGF0ZWRFbnRyeUxpc3RzXzFbX2RdLCBpbmRleE5hbWUgPSBfZVswXSwgZmlsdGVyZWRFbnRyaWVzID0gX2VbMV07XG4gICAgICAgICAgICAgICAgdGJsQ2FjaGUucXVlcmllcy5xdWVyeVtpbmRleE5hbWVdID0gZmlsdGVyZWRFbnRyaWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV4aWVPcGVuKGRiKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IGRiLl9zdGF0ZTtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IGRiLl9kZXBzLmluZGV4ZWREQjtcbiAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQgfHwgZGIuaWRiZGIpXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBzdGF0ZS5kYk9wZW5FcnJvciA/XG4gICAgICAgICAgICAgICAgcmVqZWN0aW9uKHN0YXRlLmRiT3BlbkVycm9yKSA6XG4gICAgICAgICAgICAgICAgZGI7IH0pO1xuICAgICAgICBzdGF0ZS5pc0JlaW5nT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBudWxsO1xuICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIG9wZW5DYW5jZWxsZXIgPSBzdGF0ZS5vcGVuQ2FuY2VsbGVyO1xuICAgICAgICB2YXIgbmF0aXZlVmVyVG9PcGVuID0gTWF0aC5yb3VuZChkYi52ZXJubyAqIDEwKTtcbiAgICAgICAgdmFyIHNjaGVtYVBhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgICBmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGVkKCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5DYW5jZWxsZXIgIT09IG9wZW5DYW5jZWxsZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoJ2RiLm9wZW4oKSB3YXMgY2FuY2VsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc29sdmVEYlJlYWR5ID0gc3RhdGUuZGJSZWFkeVJlc29sdmUsXG4gICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiA9IG51bGwsIHdhc0NyZWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHRyeU9wZW5EQiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSSgpO1xuICAgICAgICAgICAgdmFyIGRiTmFtZSA9IGRiLm5hbWU7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RhdGUuYXV0b1NjaGVtYSB8fCAhbmF0aXZlVmVyVG9PcGVuID9cbiAgICAgICAgICAgICAgICBpbmRleGVkREIub3BlbihkYk5hbWUpIDpcbiAgICAgICAgICAgICAgICBpbmRleGVkREIub3BlbihkYk5hbWUsIG5hdGl2ZVZlclRvT3Blbik7XG4gICAgICAgICAgICBpZiAoIXJlcSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKCk7XG4gICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgcmVxLm9uYmxvY2tlZCA9IHdyYXAoZGIuX2ZpcmVPbkJsb2NrZWQpO1xuICAgICAgICAgICAgcmVxLm9udXBncmFkZW5lZWRlZCA9IHdyYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSByZXEudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dG9TY2hlbWEgJiYgIWRiLl9vcHRpb25zLmFsbG93RW1wdHlEQikge1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHByZXZlbnREZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24uYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVscmVxID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKGRiTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbHJlcS5vbnN1Y2Nlc3MgPSBkZWxyZXEub25lcnJvciA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLk5vU3VjaERhdGFiYXNlKFwiRGF0YWJhc2UgXCIuY29uY2F0KGRiTmFtZSwgXCIgZG9lc250IGV4aXN0XCIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZlciA9IGUub2xkVmVyc2lvbiA+IE1hdGgucG93KDIsIDYyKSA/IDAgOiBlLm9sZFZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIHdhc0NyZWF0ZWQgPSBvbGRWZXIgPCAxO1xuICAgICAgICAgICAgICAgICAgICBkYi5pZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY2hlbWFQYXRjaE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoQ3VycmVudFZlcnNpb24oZGIsIHVwZ3JhZGVUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcnVuVXBncmFkZXJzKGRiLCBvbGRWZXIgLyAxMCwgdXBncmFkZVRyYW5zYWN0aW9uLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgaWRiZGIgPSBkYi5pZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0U3RvcmVOYW1lcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcFRyYW5zID0gaWRiZGIudHJhbnNhY3Rpb24oc2FmYXJpTXVsdGlTdG9yZUZpeChvYmplY3RTdG9yZU5hbWVzKSwgJ3JlYWRvbmx5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuYXV0b1NjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIGRiLl9kYlNjaGVtYSwgdG1wVHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmVyaWZ5SW5zdGFsbGVkU2NoZW1hKGRiLCB0bXBUcmFucykgJiYgIXNjaGVtYVBhdGNoTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEZXhpZSBTY2hlbWFEaWZmOiBTY2hlbWEgd2FzIGV4dGVuZGVkIHdpdGhvdXQgaW5jcmVhc2luZyB0aGUgbnVtYmVyIHBhc3NlZCB0byBkYi52ZXJzaW9uKCkuIERleGllIHdpbGwgYWRkIG1pc3NpbmcgcGFydHMgYW5kIGluY3JlbWVudCBuYXRpdmUgdmVyc2lvbiBudW1iZXIgdG8gd29ya2Fyb3VuZCB0aGlzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRiZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlVmVyVG9PcGVuID0gaWRiZGIudmVyc2lvbiArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYVBhdGNoTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRyeU9wZW5EQigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaChkYik7XG4gICAgICAgICAgICAgICAgaWRiZGIub252ZXJzaW9uY2hhbmdlID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudmNGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRiLm9uKFwidmVyc2lvbmNoYW5nZVwiKS5maXJlKGV2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZGJkYi5vbmNsb3NlID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKHsgZGlzYWJsZUF1dG9PcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAod2FzQ3JlYXRlZClcbiAgICAgICAgICAgICAgICAgICAgX29uRGF0YWJhc2VDcmVhdGVkKGRiLl9kZXBzLCBkYk5hbWUpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiVW5rbm93bkVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5QUjEzOThfbWF4TG9vcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLlBSMTM5OF9tYXhMb29wLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBXb3JrYXJvdW5kIGZvciBDaHJvbWUgVW5rbm93bkVycm9yIG9uIG9wZW4oKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeU9wZW5EQigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJWZXJzaW9uRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdGl2ZVZlclRvT3BlbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZVZlclRvT3BlbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5T3BlbkRCKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG9wZW5DYW5jZWxsZXIsXG4gICAgICAgICAgICAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgPyBEZXhpZVByb21pc2UucmVzb2x2ZSgpIDogaWRiUmVhZHkoKSkudGhlbih0cnlPcGVuREIpXG4gICAgICAgIF0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2aXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGIub24ucmVhZHkuZmlyZShkYi52aXApOyB9KSkudGhlbihmdW5jdGlvbiBmaXJlUmVtYWluZGVycygpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUub25SZWFkeUJlaW5nRmlyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluZGVyc18xID0gc3RhdGUub25SZWFkeUJlaW5nRmlyZWQucmVkdWNlKHByb21pc2FibGVDaGFpbiwgbm9wKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHZpcChmdW5jdGlvbiAoKSB7IHJldHVybiByZW1haW5kZXJzXzEoZGIudmlwKTsgfSkpLnRoZW4oZmlyZVJlbWFpbmRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuQ2FuY2VsbGVyID09PSBvcGVuQ2FuY2VsbGVyKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzQmVpbmdPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiAmJiB1cGdyYWRlVHJhbnNhY3Rpb24uYWJvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICBpZiAob3BlbkNhbmNlbGxlciA9PT0gc3RhdGUub3BlbkNhbmNlbGxlcikge1xuICAgICAgICAgICAgICAgIGRiLl9jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlcnIpO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN0YXRlLm9wZW5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlRGJSZWFkeSgpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh3YXNDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZXJ5dGhpbmdfMSA9IHt9O1xuICAgICAgICAgICAgICAgIGRiLnRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHgubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVyeXRoaW5nXzFbXCJpZGI6Ly9cIi5jb25jYXQoZGIubmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZS5uYW1lLCBcIi9cIikuY29uY2F0KGlkeC5uYW1lKV0gPSBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW1tdXV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZXZlcnl0aGluZ18xW1wiaWRiOi8vXCIuY29uY2F0KGRiLm5hbWUsIFwiL1wiKS5jb25jYXQodGFibGUubmFtZSwgXCIvXCIpXSA9IGV2ZXJ5dGhpbmdfMVtcImlkYjovL1wiLmNvbmNhdChkYi5uYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlLm5hbWUsIFwiLzpkZWxzXCIpXSA9IG5ldyBSYW5nZVNldCgtSW5maW5pdHksIFtbW11dXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FKS5maXJlKGV2ZXJ5dGhpbmdfMSk7XG4gICAgICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3coZXZlcnl0aGluZ18xLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXdhaXRJdGVyYXRvcihpdGVyYXRvcikge1xuICAgICAgICB2YXIgY2FsbE5leHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBpdGVyYXRvci5uZXh0KHJlc3VsdCk7IH0sIGRvVGhyb3cgPSBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIGl0ZXJhdG9yLnRocm93KGVycm9yKTsgfSwgb25TdWNjZXNzID0gc3RlcChjYWxsTmV4dCksIG9uRXJyb3IgPSBzdGVwKGRvVGhyb3cpO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKGdldE5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBnZXROZXh0KHZhbCksIHZhbHVlID0gbmV4dC52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC5kb25lID8gdmFsdWUgOlxuICAgICAgICAgICAgICAgICAgICAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZS50aGVuICE9PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXkodmFsdWUpID8gUHJvbWlzZS5hbGwodmFsdWUpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKSA6IG9uU3VjY2Vzcyh2YWx1ZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ZXAoY2FsbE5leHQpKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0cmFjdFRyYW5zYWN0aW9uQXJncyhtb2RlLCBfdGFibGVBcmdzXywgc2NvcGVGdW5jKSB7XG4gICAgICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGkgPCAyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiVG9vIGZldyBhcmd1bWVudHNcIik7XG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkgLSAxKTtcbiAgICAgICAgd2hpbGUgKC0taSlcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBzY29wZUZ1bmMgPSBhcmdzLnBvcCgpO1xuICAgICAgICB2YXIgdGFibGVzID0gZmxhdHRlbihhcmdzKTtcbiAgICAgICAgcmV0dXJuIFttb2RlLCB0YWJsZXMsIHNjb3BlRnVuY107XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVudGVyVHJhbnNhY3Rpb25TY29wZShkYiwgbW9kZSwgc3RvcmVOYW1lcywgcGFyZW50VHJhbnNhY3Rpb24sIHNjb3BlRnVuYykge1xuICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2xlc3MgPSBQU0QudHJhbnNsZXNzIHx8IFBTRDtcbiAgICAgICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYi5fZGJTY2hlbWEsIHBhcmVudFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIHRyYW5zLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB6b25lUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgIHRyYW5zbGVzczogdHJhbnNsZXNzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMgPSBwYXJlbnRUcmFuc2FjdGlvbi5pZGJ0cmFucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5pZGJ0cmFucy5fZXhwbGljaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkYi5fc3RhdGUuUFIxMzk4X21heExvb3AgPSAzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09IGVycm5hbWVzLkludmFsaWRTdGF0ZSAmJiBkYi5pc09wZW4oKSAmJiAtLWRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRGV4aWU6IE5lZWQgdG8gcmVvcGVuIGRiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGIub3BlbigpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZW50ZXJUcmFuc2FjdGlvblNjb3BlKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBudWxsLCBzY29wZUZ1bmMpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NvcGVGdW5jSXNBc3luYyA9IGlzQXN5bmNGdW5jdGlvbihzY29wZUZ1bmMpO1xuICAgICAgICAgICAgaWYgKHNjb3BlRnVuY0lzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgdmFyIHByb21pc2VGb2xsb3dlZCA9IERleGllUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gc2NvcGVGdW5jLmNhbGwodHJhbnMsIHRyYW5zKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlRnVuY0lzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNyZW1lbnRvciA9IGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzLmJpbmQobnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS50aGVuKGRlY3JlbWVudG9yLCBkZWNyZW1lbnRvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJldHVyblZhbHVlLm5leHQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHJldHVyblZhbHVlLnRocm93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGF3YWl0SXRlcmF0b3IocmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgem9uZVByb3BzKTtcbiAgICAgICAgICAgIHJldHVybiAocmV0dXJuVmFsdWUgJiYgdHlwZW9mIHJldHVyblZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlKS50aGVuKGZ1bmN0aW9uICh4KSB7IHJldHVybiB0cmFucy5hY3RpdmUgP1xuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICAgIDogcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLlByZW1hdHVyZUNvbW1pdChcIlRyYW5zYWN0aW9uIGNvbW1pdHRlZCB0b28gZWFybHkuIFNlZSBodHRwOi8vYml0Lmx5LzJrZGNrTW5cIikpOyB9KVxuICAgICAgICAgICAgICAgIDogcHJvbWlzZUZvbGxvd2VkLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV0dXJuVmFsdWU7IH0pKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB0cmFucy5fcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFucy5fY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHg7IH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0cmFucy5fcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFkKGEsIHZhbHVlLCBjb3VudCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gaXNBcnJheShhKSA/IGEuc2xpY2UoKSA6IFthXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlKGRvd24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkb3duKSwgeyB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGRvd24udGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NoZW1hID0gdGFibGUuc2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleExvb2t1cCA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBhbGxWaXJ0dWFsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFZpcnR1YWxJbmRleGVzKGtleVBhdGgsIGtleVRhaWwsIGxvd0xldmVsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGhBbGlhcyA9IGdldEtleVBhdGhBbGlhcyhrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4TGlzdCA9IChpbmRleExvb2t1cFtrZXlQYXRoQWxpYXNdID0gaW5kZXhMb29rdXBba2V5UGF0aEFsaWFzXSB8fCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlMZW5ndGggPSBrZXlQYXRoID09IG51bGwgPyAwIDogdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnID8gMSA6IGtleVBhdGgubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNWaXJ0dWFsID0ga2V5VGFpbCA+IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2aXJ0dWFsSW5kZXggPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG93TGV2ZWxJbmRleCksIHsgbmFtZTogaXNWaXJ0dWFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiLmNvbmNhdChrZXlQYXRoQWxpYXMsIFwiKHZpcnR1YWwtZnJvbTpcIikuY29uY2F0KGxvd0xldmVsSW5kZXgubmFtZSwgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsb3dMZXZlbEluZGV4Lm5hbWUsIGxvd0xldmVsSW5kZXg6IGxvd0xldmVsSW5kZXgsIGlzVmlydHVhbDogaXNWaXJ0dWFsLCBrZXlUYWlsOiBrZXlUYWlsLCBrZXlMZW5ndGg6IGtleUxlbmd0aCwgZXh0cmFjdEtleTogZ2V0S2V5RXh0cmFjdG9yKGtleVBhdGgpLCB1bmlxdWU6ICFpc1ZpcnR1YWwgJiYgbG93TGV2ZWxJbmRleC51bmlxdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TGlzdC5wdXNoKHZpcnR1YWxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmlydHVhbEluZGV4LmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsVmlydHVhbEluZGV4ZXMucHVzaCh2aXJ0dWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEtleVBhdGggPSBrZXlMZW5ndGggPT09IDIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGhbMF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGguc2xpY2UoMCwga2V5TGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaXJ0dWFsSW5kZXhlcyh2aXJ0dWFsS2V5UGF0aCwga2V5VGFpbCArIDEsIGxvd0xldmVsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmtleVRhaWwgLSBiLmtleVRhaWw7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlydHVhbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IGFkZFZpcnR1YWxJbmRleGVzKHNjaGVtYS5wcmltYXJ5S2V5LmtleVBhdGgsIDAsIHNjaGVtYS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICBpbmRleExvb2t1cFtcIjppZFwiXSA9IFtwcmltYXJ5S2V5XTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2NoZW1hLmluZGV4ZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgYWRkVmlydHVhbEluZGV4ZXMoaW5kZXgua2V5UGF0aCwgMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kQmVzdEluZGV4KGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGluZGV4TG9va3VwW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgJiYgcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGVSYW5nZShyYW5nZSwga2V5VGFpbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmFuZ2UudHlwZSA9PT0gMSAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXI6IHBhZChyYW5nZS5sb3dlciwgcmFuZ2UubG93ZXJPcGVuID8gZG93bi5NQVhfS0VZIDogZG93bi5NSU5fS0VZLCBrZXlUYWlsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyOiBwYWQocmFuZ2UudXBwZXIsIHJhbmdlLnVwcGVyT3BlbiA/IGRvd24uTUlOX0tFWSA6IGRvd24uTUFYX0tFWSwga2V5VGFpbCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlck9wZW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlUmVxdWVzdChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcmVxLnF1ZXJ5LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXguaXNWaXJ0dWFsID8gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlcSksIHsgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgubG93TGV2ZWxJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogdHJhbnNsYXRlUmFuZ2UocmVxLnF1ZXJ5LnJhbmdlLCBpbmRleC5rZXlUYWlsKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSA6IHJlcTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0YWJsZSksIHsgc2NoZW1hOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc2NoZW1hKSwgeyBwcmltYXJ5S2V5OiBwcmltYXJ5S2V5LCBpbmRleGVzOiBhbGxWaXJ0dWFsSW5kZXhlcywgZ2V0SW5kZXhCeUtleVBhdGg6IGZpbmRCZXN0SW5kZXggfSksIGNvdW50OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUuY291bnQodHJhbnNsYXRlUmVxdWVzdChyZXEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcXVlcnk6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5xdWVyeSh0cmFuc2xhdGVSZXF1ZXN0KHJlcSkpO1xuICAgICAgICAgICAgICAgICAgICB9LCBvcGVuQ3Vyc29yOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSByZXEucXVlcnkuaW5kZXgsIGtleVRhaWwgPSBfYS5rZXlUYWlsLCBpc1ZpcnR1YWwgPSBfYS5pc1ZpcnR1YWwsIGtleUxlbmd0aCA9IF9hLmtleUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNWaXJ0dWFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5vcGVuQ3Vyc29yKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsQ3Vyc29yKGN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9jb250aW51ZShrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICE9IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKHBhZChrZXksIHJlcS5yZXZlcnNlID8gZG93bi5NQVhfS0VZIDogZG93bi5NSU5fS0VZLCBrZXlUYWlsKSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnVuaXF1ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKGN1cnNvci5rZXkuc2xpY2UoMCwga2V5TGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHJlcS5yZXZlcnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZG93bi5NSU5fS0VZXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG93bi5NQVhfS0VZLCBrZXlUYWlsKSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEN1cnNvciA9IE9iamVjdC5jcmVhdGUoY3Vyc29yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiB7IHZhbHVlOiBfY29udGludWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVQcmltYXJ5S2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGtleSwgcHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkocGFkKGtleSwgZG93bi5NQVhfS0VZLCBrZXlUYWlsKSwgcHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJzb3IucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5TGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5WzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LnNsaWNlKDAsIGtleUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxDdXJzb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUub3BlbkN1cnNvcih0cmFuc2xhdGVSZXF1ZXN0KHJlcSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGN1cnNvcikgeyByZXR1cm4gY3Vyc29yICYmIGNyZWF0ZVZpcnR1YWxDdXJzb3IoY3Vyc29yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0gfSk7XG4gICAgfVxuICAgIHZhciB2aXJ0dWFsSW5kZXhNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbmFtZTogXCJWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlXCIsXG4gICAgICAgIGxldmVsOiAxLFxuICAgICAgICBjcmVhdGU6IGNyZWF0ZVZpcnR1YWxJbmRleE1pZGRsZXdhcmVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0RGlmZihhLCBiLCBydiwgcHJmeCkge1xuICAgICAgICBydiA9IHJ2IHx8IHt9O1xuICAgICAgICBwcmZ4ID0gcHJmeCB8fCAnJztcbiAgICAgICAga2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bihiLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhcCA9IGFbcHJvcF0sIGJwID0gYltwcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYnAgPT09ICdvYmplY3QnICYmIGFwICYmIGJwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcFR5cGVOYW1lID0gdG9TdHJpbmdUYWcoYXApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnBUeXBlTmFtZSA9IHRvU3RyaW5nVGFnKGJwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwVHlwZU5hbWUgIT09IGJwVHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXBUeXBlTmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE9iamVjdERpZmYoYXAsIGJwLCBydiwgcHJmeCArIHByb3AgKyAnLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwICE9PSBicCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnZbcHJmeCArIHByb3BdID0gYltwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcCAhPT0gYnApXG4gICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBrZXlzKGIpLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duKGEsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgcnZbcHJmeCArIHByb3BdID0gYltwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSkge1xuICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGUnKVxuICAgICAgICAgICAgcmV0dXJuIHJlcS5rZXlzO1xuICAgICAgICByZXR1cm4gcmVxLmtleXMgfHwgcmVxLnZhbHVlcy5tYXAocHJpbWFyeUtleS5leHRyYWN0S2V5KTtcbiAgICB9XG5cbiAgICB2YXIgaG9va3NNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbmFtZTogXCJIb29rc01pZGRsZXdhcmVcIixcbiAgICAgICAgbGV2ZWw6IDIsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGRvd25Db3JlKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25Db3JlKSwgeyB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBkb3duVGFibGUgPSBkb3duQ29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gZG93blRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZU1pZGRsZXdhcmUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93blRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeFRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gZHhUcmFucy50YWJsZSh0YWJsZU5hbWUpLmhvb2ssIGRlbGV0aW5nID0gX2EuZGVsZXRpbmcsIGNyZWF0aW5nID0gX2EuY3JlYXRpbmcsIHVwZGF0aW5nID0gX2EudXBkYXRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlcS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nLmZpcmUgPT09IG5vcClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHhUcmFucy5fcHJvbWlzZSgncmVhZHdyaXRlJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gYWRkUHV0T3JEZWxldGUocmVxKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHV0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nLmZpcmUgPT09IG5vcCAmJiB1cGRhdGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0aW5nLmZpcmUgPT09IG5vcClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHhUcmFucy5fcHJvbWlzZSgncmVhZHdyaXRlJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVsZXRlUmFuZ2UocmVxKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkUHV0T3JEZWxldGUocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR4VHJhbnMgPSBQU0QudHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSByZXEua2V5cyB8fCBnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFrZXlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXlzIG1pc3NpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxID0gcmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JyA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IGtleXM6IGtleXMgfSkgOiBfX2Fzc2lnbih7fSwgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgIT09ICdkZWxldGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzID0gX19zcHJlYWRBcnJheShbXSwgcmVxLnZhbHVlcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5rZXlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEua2V5cyA9IF9fc3ByZWFkQXJyYXkoW10sIHJlcS5rZXlzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXhpc3RpbmdWYWx1ZXMoZG93blRhYmxlLCByZXEsIGtleXMpLnRoZW4oZnVuY3Rpb24gKGV4aXN0aW5nVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0cyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXksIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0gZXhpc3RpbmdWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0geyBvbmVycm9yOiBudWxsLCBvbnN1Y2Nlc3M6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudHlwZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGluZy5maXJlLmNhbGwoY3R4LCBrZXksIGV4aXN0aW5nVmFsdWUsIGR4VHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVxLnR5cGUgPT09ICdhZGQnIHx8IGV4aXN0aW5nVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW5lcmF0ZWRQcmltYXJ5S2V5ID0gY3JlYXRpbmcuZmlyZS5jYWxsKGN0eCwga2V5LCByZXEudmFsdWVzW2ldLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IG51bGwgJiYgZ2VuZXJhdGVkUHJpbWFyeUtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGdlbmVyYXRlZFByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5rZXlzW2ldID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByaW1hcnlLZXkub3V0Ym91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChyZXEudmFsdWVzW2ldLCBwcmltYXJ5S2V5LmtleVBhdGgsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0RGlmZiA9IGdldE9iamVjdERpZmYoZXhpc3RpbmdWYWx1ZSwgcmVxLnZhbHVlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxDaGFuZ2VzXzEgPSB1cGRhdGluZy5maXJlLmNhbGwoY3R4LCBvYmplY3REaWZmLCBrZXksIGV4aXN0aW5nVmFsdWUsIGR4VHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsQ2hhbmdlc18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ZWRWYWx1ZV8xID0gcmVxLnZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYWRkaXRpb25hbENoYW5nZXNfMSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihyZXF1ZXN0ZWRWYWx1ZV8xLCBrZXlQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFZhbHVlXzFba2V5UGF0aF0gPSBhZGRpdGlvbmFsQ2hhbmdlc18xW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKHJlcXVlc3RlZFZhbHVlXzEsIGtleVBhdGgsIGFkZGl0aW9uYWxDaGFuZ2VzXzFba2V5UGF0aF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gX2EuZmFpbHVyZXMsIHJlc3VsdHMgPSBfYS5yZXN1bHRzLCBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCBsYXN0UmVzdWx0ID0gX2EubGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmltS2V5ID0gcmVzdWx0cyA/IHJlc3VsdHNbaV0gOiBrZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBjb250ZXh0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpbUtleSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5vbmVycm9yICYmIGN0eC5vbmVycm9yKGZhaWx1cmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5vbnN1Y2Nlc3MgJiYgY3R4Lm9uc3VjY2VzcyhyZXEudHlwZSA9PT0gJ3B1dCcgJiYgZXhpc3RpbmdWYWx1ZXNbaV0gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlc1tpXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltS2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZmFpbHVyZXM6IGZhaWx1cmVzLCByZXN1bHRzOiByZXN1bHRzLCBudW1GYWlsdXJlczogbnVtRmFpbHVyZXMsIGxhc3RSZXN1bHQ6IGxhc3RSZXN1bHQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0cy5mb3JFYWNoKGZ1bmN0aW9uIChjdHgpIHsgcmV0dXJuIGN0eC5vbmVycm9yICYmIGN0eC5vbmVycm9yKGVycm9yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVJhbmdlKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVOZXh0Q2h1bmsocmVxLnRyYW5zLCByZXEucmFuZ2UsIDEwMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU5leHRDaHVuayh0cmFucywgcmFuZ2UsIGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5xdWVyeSh7IHRyYW5zOiB0cmFucywgdmFsdWVzOiBmYWxzZSwgcXVlcnk6IHsgaW5kZXg6IHByaW1hcnlLZXksIHJhbmdlOiByYW5nZSB9LCBsaW1pdDogbGltaXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRQdXRPckRlbGV0ZSh7IHR5cGU6ICdkZWxldGUnLCBrZXlzOiByZXN1bHQsIHRyYW5zOiB0cmFucyB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMubnVtRmFpbHVyZXMgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZhaWx1cmVzOiBbXSwgbnVtRmFpbHVyZXM6IDAsIGxhc3RSZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZU5leHRDaHVuayh0cmFucywgX19hc3NpZ24oX19hc3NpZ24oe30sIHJhbmdlKSwgeyBsb3dlcjogcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSwgbG93ZXJPcGVuOiB0cnVlIH0pLCBsaW1pdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1pZGRsZXdhcmU7XG4gICAgICAgICAgICB9IH0pKTsgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gZ2V0RXhpc3RpbmdWYWx1ZXModGFibGUsIHJlcSwgZWZmZWN0aXZlS2V5cykge1xuICAgICAgICByZXR1cm4gcmVxLnR5cGUgPT09IFwiYWRkXCJcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKFtdKVxuICAgICAgICAgICAgOiB0YWJsZS5nZXRNYW55KHsgdHJhbnM6IHJlcS50cmFucywga2V5czogZWZmZWN0aXZlS2V5cywgY2FjaGU6IFwiaW1tdXRhYmxlXCIgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RnJvbVRyYW5zYWN0aW9uQ2FjaGUoa2V5cywgY2FjaGUsIGNsb25lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmtleXMubGVuZ3RoIDwga2V5cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBjYWNoZS5rZXlzLmxlbmd0aCAmJiBqIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjbXAoY2FjaGUua2V5c1tpXSwga2V5c1tqXSkgIT09IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNsb25lID8gZGVlcENsb25lKGNhY2hlLnZhbHVlc1tpXSkgOiBjYWNoZS52YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICsrajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoID09PSBrZXlzLmxlbmd0aCA/IHJlc3VsdCA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY2FjaGVFeGlzdGluZ1ZhbHVlc01pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICBsZXZlbDogLTEsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHRhYmxlKSwgeyBnZXRNYW55OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXEuY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmdldE1hbnkocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlZFJlc3VsdCA9IGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKHJlcS5rZXlzLCByZXEudHJhbnNbXCJfY2FjaGVcIl0sIHJlcS5jYWNoZSA9PT0gXCJjbG9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShjYWNoZWRSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUuZ2V0TWFueShyZXEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudHJhbnNbXCJfY2FjaGVcIl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiByZXEua2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcmVxLmNhY2hlID09PSBcImNsb25lXCIgPyBkZWVwQ2xvbmUocmVzKSA6IHJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG11dGF0ZTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudHlwZSAhPT0gXCJhZGRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnRyYW5zW1wiX2NhY2hlXCJdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpc0NhY2hhYmxlQ29udGV4dChjdHgsIHRhYmxlKSB7XG4gICAgICAgIHJldHVybiAoY3R4LnRyYW5zLm1vZGUgPT09ICdyZWFkb25seScgJiZcbiAgICAgICAgICAgICEhY3R4LnN1YnNjciAmJlxuICAgICAgICAgICAgIWN0eC50cmFucy5leHBsaWNpdCAmJlxuICAgICAgICAgICAgY3R4LnRyYW5zLmRiLl9vcHRpb25zLmNhY2hlICE9PSAnZGlzYWJsZWQnICYmXG4gICAgICAgICAgICAhdGFibGUuc2NoZW1hLnByaW1hcnlLZXkub3V0Ym91bmQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ2FjaGFibGVSZXF1ZXN0KHR5cGUsIHJlcSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxLnZhbHVlcyAmJiAhcmVxLnVuaXF1ZTtcbiAgICAgICAgICAgIGNhc2UgJ2dldCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSAnZ2V0TWFueSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSAnY291bnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ29wZW5DdXJzb3InOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBvYnNlcnZhYmlsaXR5TWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIGxldmVsOiAwLFxuICAgICAgICBuYW1lOiBcIk9ic2VydmFiaWxpdHlcIixcbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoY29yZSkge1xuICAgICAgICAgICAgdmFyIGRiTmFtZSA9IGNvcmUuc2NoZW1hLm5hbWU7XG4gICAgICAgICAgICB2YXIgRlVMTF9SQU5HRSA9IG5ldyBSYW5nZVNldChjb3JlLk1JTl9LRVksIGNvcmUuTUFYX0tFWSk7XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvcmUpLCB7IHRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoc3RvcmVzLCBtb2RlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChQU0Quc3Vic2NyICYmIG1vZGUgIT09ICdyZWFkb25seScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlJlYWRPbmx5KFwiUmVhZHdyaXRlIHRyYW5zYWN0aW9uIGluIGxpdmVRdWVyeSBjb250ZXh0LiBRdWVyaWVyIHNvdXJjZTogXCIuY29uY2F0KFBTRC5xdWVyaWVyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmUudHJhbnNhY3Rpb24oc3RvcmVzLCBtb2RlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LCB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBjb3JlLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2hlbWEgPSB0YWJsZS5zY2hlbWE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gc2NoZW1hLnByaW1hcnlLZXksIGluZGV4ZXMgPSBzY2hlbWEuaW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RLZXkgPSBwcmltYXJ5S2V5LmV4dHJhY3RLZXksIG91dGJvdW5kID0gcHJpbWFyeUtleS5vdXRib3VuZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ZXNXaXRoQXV0b0luY1BLID0gcHJpbWFyeUtleS5hdXRvSW5jcmVtZW50ICYmIGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uIChpbmRleCkgeyByZXR1cm4gaW5kZXguY29tcG91bmQgJiYgaW5kZXgua2V5UGF0aC5pbmNsdWRlcyhwcmltYXJ5S2V5LmtleVBhdGgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlQ2xvbmUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGFibGUpLCB7IG11dGF0ZTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gcmVxLnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGVkUGFydHMgPSByZXEubXV0YXRlZFBhcnRzIHx8IChyZXEubXV0YXRlZFBhcnRzID0ge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZVNldCA9IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lLCBcIi9cIikuY29uY2F0KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobXV0YXRlZFBhcnRzW3BhcnRdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobXV0YXRlZFBhcnRzW3BhcnRdID0gbmV3IFJhbmdlU2V0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa1JhbmdlU2V0ID0gZ2V0UmFuZ2VTZXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHNSYW5nZVNldCA9IGdldFJhbmdlU2V0KFwiOmRlbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSByZXEudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2MgPSByZXEudHlwZSA9PT0gXCJkZWxldGVSYW5nZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3JlcS5yYW5nZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXEudHlwZSA9PT0gXCJkZWxldGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbcmVxLmtleXNdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcS52YWx1ZXMubGVuZ3RoIDwgNTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSkuZmlsdGVyKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gaWQ7IH0pLCByZXEudmFsdWVzXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10sIGtleXMgPSBfY1swXSwgbmV3T2JqcyA9IF9jWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRDYWNoZSA9IHJlcS50cmFuc1tcIl9jYWNoZVwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShrZXlzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZEtleXMoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRPYmpzID0gdHlwZSA9PT0gJ2RlbGV0ZScgfHwga2V5cy5sZW5ndGggPT09IG5ld09ianMubGVuZ3RoID8gZ2V0RnJvbVRyYW5zYWN0aW9uQ2FjaGUoa2V5cywgb2xkQ2FjaGUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRPYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXQuYWRkS2V5cyhrZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkT2JqcyB8fCBuZXdPYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0FmZmVjdGVkSW5kZXhlcyhnZXRSYW5nZVNldCwgc2NoZW1hLCBvbGRPYmpzLCBuZXdPYmpzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IChfYSA9IGtleXMubG93ZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvcmUuTUlOX0tFWSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAoX2IgPSBrZXlzLnVwcGVyKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBjb3JlLk1BWF9LRVlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZChyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkKHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXQuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgcmV0dXJuIGdldFJhbmdlU2V0KGlkeC5uYW1lKS5hZGQoRlVMTF9SQU5HRSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUubXV0YXRlKHJlcSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIChyZXEudHlwZSA9PT0gJ2FkZCcgfHwgcmVxLnR5cGUgPT09ICdwdXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldC5hZGRLZXlzKHJlcy5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleGVzV2l0aEF1dG9JbmNQSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZXNXaXRoQXV0b0luY1BLLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4VmFscyA9IHJlcS52YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBpZHguZXh0cmFjdEtleSh2KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa1BvcyA9IGlkeC5rZXlQYXRoLmZpbmRJbmRleChmdW5jdGlvbiAocHJvcCkgeyByZXR1cm4gcHJvcCA9PT0gcHJpbWFyeUtleS5rZXlQYXRoOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlcy5yZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhWYWxzW2ldW3BrUG9zXSA9IHJlcy5yZXN1bHRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhbmdlU2V0KGlkeC5uYW1lKS5hZGRLZXlzKGlkeFZhbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLm11dGF0ZWRQYXJ0cyA9IGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodHJhbnMubXV0YXRlZFBhcnRzIHx8IHt9LCBtdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdldFJhbmdlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9kID0gX2EucXVlcnksIGluZGV4ID0gX2QuaW5kZXgsIHJhbmdlID0gX2QucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSYW5nZVNldCgoX2IgPSByYW5nZS5sb3dlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogY29yZS5NSU5fS0VZLCAoX2MgPSByYW5nZS51cHBlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY29yZS5NQVhfS0VZKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkU3Vic2NyaWJlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIFtwcmltYXJ5S2V5LCBuZXcgUmFuZ2VTZXQocmVxLmtleSldOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFueTogZnVuY3Rpb24gKHJlcSkgeyByZXR1cm4gW3ByaW1hcnlLZXksIG5ldyBSYW5nZVNldCgpLmFkZEtleXMocmVxLmtleXMpXTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5DdXJzb3I6IGdldFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlzKHJlYWRTdWJzY3JpYmVycykuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUNsb25lW21ldGhvZF0gPSBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjciA9IFBTRC5zdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzTGl2ZVF1ZXJ5ID0gISFzdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hhYmxlID0gaXNDYWNoYWJsZUNvbnRleHQoUFNELCB0YWJsZSkgJiYgaXNDYWNoYWJsZVJlcXVlc3QobWV0aG9kLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYnNTZXQgPSBjYWNoYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHJlcS5vYnNTZXQgPSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN1YnNjcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMaXZlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldFJhbmdlU2V0ID0gZnVuY3Rpb24gKGluZGV4TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lLCBcIi9cIikuY29uY2F0KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9ic1NldFtwYXJ0XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvYnNTZXRbcGFydF0gPSBuZXcgUmFuZ2VTZXQoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtSYW5nZVNldF8xID0gZ2V0UmFuZ2VTZXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxzUmFuZ2VTZXRfMSA9IGdldFJhbmdlU2V0KFwiOmRlbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IHJlYWRTdWJzY3JpYmVyc1ttZXRob2RdKHJlcSksIHF1ZXJpZWRJbmRleCA9IF9hWzBdLCBxdWVyaWVkUmFuZ2VzID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdxdWVyeScgJiYgcXVlcmllZEluZGV4LmlzUHJpbWFyeUtleSAmJiAhcmVxLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkKHF1ZXJpZWRSYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZ2VTZXQocXVlcmllZEluZGV4Lm5hbWUgfHwgXCJcIikuYWRkKHF1ZXJpZWRSYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcXVlcmllZEluZGV4LmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJjb3VudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXNQcm9taXNlXzEgPSBtZXRob2QgPT09IFwicXVlcnlcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5KF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IHZhbHVlczogZmFsc2UgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicXVlcnlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dGJvdW5kICYmIHJlcS52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5c1Byb21pc2VfMS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0aW5nS2V5cyA9IF9hLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldF8xLmFkZEtleXMocmVzdWx0aW5nS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcEtleXMgPSByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXMucmVzdWx0Lm1hcChleHRyYWN0S2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldF8xLmFkZEtleXMocEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkS2V5cyhwS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWV0aG9kID09PSBcIm9wZW5DdXJzb3JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvcl8xID0gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhbnRWYWx1ZXNfMSA9IHJlcS52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnNvcl8xICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmNyZWF0ZShjdXJzb3JfMSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleShjdXJzb3JfMS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yXzEua2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBrZXkgPSBjdXJzb3JfMS5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleShwa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YW50VmFsdWVzXzEgJiYgcGtSYW5nZVNldF8xLmFkZEtleShjdXJzb3JfMS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlQ2xvbmU7XG4gICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHRyYWNrQWZmZWN0ZWRJbmRleGVzKGdldFJhbmdlU2V0LCBzY2hlbWEsIG9sZE9ianMsIG5ld09ianMpIHtcbiAgICAgICAgZnVuY3Rpb24gYWRkQWZmZWN0ZWRJbmRleChpeCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlU2V0ID0gZ2V0UmFuZ2VTZXQoaXgubmFtZSB8fCBcIlwiKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4dHJhY3RLZXkob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsID8gaXguZXh0cmFjdEtleShvYmopIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhZGRLZXlPcktleXMgPSBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBpeC5tdWx0aUVudHJ5ICYmIGlzQXJyYXkoa2V5KVxuICAgICAgICAgICAgICAgID8ga2V5LmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gcmFuZ2VTZXQuYWRkS2V5KGtleSk7IH0pXG4gICAgICAgICAgICAgICAgOiByYW5nZVNldC5hZGRLZXkoa2V5KTsgfTtcbiAgICAgICAgICAgIChvbGRPYmpzIHx8IG5ld09ianMpLmZvckVhY2goZnVuY3Rpb24gKF8sIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkS2V5ID0gb2xkT2JqcyAmJiBleHRyYWN0S2V5KG9sZE9ianNbaV0pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdLZXkgPSBuZXdPYmpzICYmIGV4dHJhY3RLZXkobmV3T2Jqc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNtcChvbGRLZXksIG5ld0tleSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZEtleSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkS2V5T3JLZXlzKG9sZEtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdLZXkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleU9yS2V5cyhuZXdLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5pbmRleGVzLmZvckVhY2goYWRkQWZmZWN0ZWRJbmRleCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRqdXN0T3B0aW1pc3RpY0Zyb21GYWlsdXJlcyh0YmxDYWNoZSwgcmVxLCByZXMpIHtcbiAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXE7XG4gICAgICAgIGlmIChyZXEudHlwZSA9PT0gJ2RlbGV0ZVJhbmdlJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG51bUJ1bGtPcHMgPSByZXEua2V5c1xuICAgICAgICAgICAgPyByZXEua2V5cy5sZW5ndGhcbiAgICAgICAgICAgIDogJ3ZhbHVlcycgaW4gcmVxICYmIHJlcS52YWx1ZXNcbiAgICAgICAgICAgICAgICA/IHJlcS52YWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICAgOiAxO1xuICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID09PSBudW1CdWxrT3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xvbmUgPSBfX2Fzc2lnbih7fSwgcmVxKTtcbiAgICAgICAgaWYgKGlzQXJyYXkoY2xvbmUua2V5cykpIHtcbiAgICAgICAgICAgIGNsb25lLmtleXMgPSBjbG9uZS5rZXlzLmZpbHRlcihmdW5jdGlvbiAoXywgaSkgeyByZXR1cm4gIShpIGluIHJlcy5mYWlsdXJlcyk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgndmFsdWVzJyBpbiBjbG9uZSAmJiBpc0FycmF5KGNsb25lLnZhbHVlcykpIHtcbiAgICAgICAgICAgIGNsb25lLnZhbHVlcyA9IGNsb25lLnZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICEoaSBpbiByZXMuZmFpbHVyZXMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBYm92ZUxvd2VyKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlLmxvd2VyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgOiByYW5nZS5sb3dlck9wZW5cbiAgICAgICAgICAgICAgICA/IGNtcChrZXksIHJhbmdlLmxvd2VyKSA+IDBcbiAgICAgICAgICAgICAgICA6IGNtcChrZXksIHJhbmdlLmxvd2VyKSA+PSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0JlbG93VXBwZXIoa2V5LCByYW5nZSkge1xuICAgICAgICByZXR1cm4gcmFuZ2UudXBwZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICA6IHJhbmdlLnVwcGVyT3BlblxuICAgICAgICAgICAgICAgID8gY21wKGtleSwgcmFuZ2UudXBwZXIpIDwgMFxuICAgICAgICAgICAgICAgIDogY21wKGtleSwgcmFuZ2UudXBwZXIpIDw9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzV2l0aGluUmFuZ2Uoa2V5LCByYW5nZSkge1xuICAgICAgICByZXR1cm4gaXNBYm92ZUxvd2VyKGtleSwgcmFuZ2UpICYmIGlzQmVsb3dVcHBlcihrZXksIHJhbmdlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHBseU9wdGltaXN0aWNPcHMocmVzdWx0LCByZXEsIG9wcywgdGFibGUsIGNhY2hlRW50cnksIGltbXV0YWJsZSkge1xuICAgICAgICBpZiAoIW9wcyB8fCBvcHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gcmVxLnF1ZXJ5LmluZGV4O1xuICAgICAgICB2YXIgbXVsdGlFbnRyeSA9IGluZGV4Lm11bHRpRW50cnk7XG4gICAgICAgIHZhciBxdWVyeVJhbmdlID0gcmVxLnF1ZXJ5LnJhbmdlO1xuICAgICAgICB2YXIgcHJpbWFyeUtleSA9IHRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdFByaW1LZXkgPSBwcmltYXJ5S2V5LmV4dHJhY3RLZXk7XG4gICAgICAgIHZhciBleHRyYWN0SW5kZXggPSBpbmRleC5leHRyYWN0S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdExvd0xldmVsSW5kZXggPSAoaW5kZXgubG93TGV2ZWxJbmRleCB8fCBpbmRleCkuZXh0cmFjdEtleTtcbiAgICAgICAgdmFyIGZpbmFsUmVzdWx0ID0gb3BzLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBvcCkge1xuICAgICAgICAgICAgdmFyIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZWRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChvcC50eXBlID09PSAnYWRkJyB8fCBvcC50eXBlID09PSAncHV0Jykge1xuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZFBLcyA9IG5ldyBSYW5nZVNldCgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBvcC52YWx1ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3AudmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGsgPSBleHRyYWN0UHJpbUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlZFBLcy5oYXNLZXkocGspKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBleHRyYWN0SW5kZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobXVsdGlFbnRyeSAmJiBpc0FycmF5KGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8ga2V5LnNvbWUoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGlzV2l0aGluUmFuZ2UoaywgcXVlcnlSYW5nZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGlzV2l0aGluUmFuZ2Uoa2V5LCBxdWVyeVJhbmdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRQS3MuYWRkS2V5KHBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkVmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWRkJzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdLZXlzXzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKHJlcS52YWx1ZXMgPyByZXN1bHQubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBleHRyYWN0UHJpbUtleSh2KTsgfSkgOiByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0LmNvbmNhdChyZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGluY2x1ZGVkVmFsdWVzLmZpbHRlcihmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBleHRyYWN0UHJpbUtleSh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzXzEuaGFzS2V5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0tleXNfMS5hZGRLZXkoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGluY2x1ZGVkVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0tleXNfMS5oYXNLZXkoaykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0tleXNfMS5hZGRLZXkoayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdwdXQnOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlTZXRfMSA9IG5ldyBSYW5nZVNldCgpLmFkZEtleXMob3AudmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFrZXlTZXRfMS5oYXNLZXkocmVxLnZhbHVlcyA/IGV4dHJhY3RQcmltS2V5KGl0ZW0pIDogaXRlbSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGluY2x1ZGVkVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGluY2x1ZGVkVmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzVG9EZWxldGVfMSA9IG5ldyBSYW5nZVNldCgpLmFkZEtleXMob3Aua2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWtleXNUb0RlbGV0ZV8xLmhhc0tleShyZXEudmFsdWVzID8gZXh0cmFjdFByaW1LZXkoaXRlbSkgOiBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlXzEgPSBvcC5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFpc1dpdGhpblJhbmdlKGV4dHJhY3RQcmltS2V5KGl0ZW0pLCByYW5nZV8xKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZGlmZWRSZXN1bHQ7XG4gICAgICAgIH0sIHJlc3VsdCk7XG4gICAgICAgIGlmIChmaW5hbFJlc3VsdCA9PT0gcmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgZmluYWxSZXN1bHQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGNtcChleHRyYWN0TG93TGV2ZWxJbmRleChhKSwgZXh0cmFjdExvd0xldmVsSW5kZXgoYikpIHx8XG4gICAgICAgICAgICAgICAgY21wKGV4dHJhY3RQcmltS2V5KGEpLCBleHRyYWN0UHJpbUtleShiKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVxLmxpbWl0ICYmIHJlcS5saW1pdCA8IEluZmluaXR5KSB7XG4gICAgICAgICAgICBpZiAoZmluYWxSZXN1bHQubGVuZ3RoID4gcmVxLmxpbWl0KSB7XG4gICAgICAgICAgICAgICAgZmluYWxSZXN1bHQubGVuZ3RoID0gcmVxLmxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gcmVxLmxpbWl0ICYmIGZpbmFsUmVzdWx0Lmxlbmd0aCA8IHJlcS5saW1pdCkge1xuICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbW11dGFibGUgPyBPYmplY3QuZnJlZXplKGZpbmFsUmVzdWx0KSA6IGZpbmFsUmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFyZVJhbmdlc0VxdWFsKHIxLCByMikge1xuICAgICAgICByZXR1cm4gKGNtcChyMS5sb3dlciwgcjIubG93ZXIpID09PSAwICYmXG4gICAgICAgICAgICBjbXAocjEudXBwZXIsIHIyLnVwcGVyKSA9PT0gMCAmJlxuICAgICAgICAgICAgISFyMS5sb3dlck9wZW4gPT09ICEhcjIubG93ZXJPcGVuICYmXG4gICAgICAgICAgICAhIXIxLnVwcGVyT3BlbiA9PT0gISFyMi51cHBlck9wZW4pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBhcmVMb3dlcnMobG93ZXIxLCBsb3dlcjIsIGxvd2VyT3BlbjEsIGxvd2VyT3BlbjIpIHtcbiAgICAgICAgaWYgKGxvd2VyMSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGxvd2VyMiAhPT0gdW5kZWZpbmVkID8gLTEgOiAwO1xuICAgICAgICBpZiAobG93ZXIyID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgdmFyIGMgPSBjbXAobG93ZXIxLCBsb3dlcjIpO1xuICAgICAgICBpZiAoYyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGxvd2VyT3BlbjEgJiYgbG93ZXJPcGVuMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4xKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKGxvd2VyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlVXBwZXJzKHVwcGVyMSwgdXBwZXIyLCB1cHBlck9wZW4xLCB1cHBlck9wZW4yKSB7XG4gICAgICAgIGlmICh1cHBlcjEgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB1cHBlcjIgIT09IHVuZGVmaW5lZCA/IDEgOiAwO1xuICAgICAgICBpZiAodXBwZXIyID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIHZhciBjID0gY21wKHVwcGVyMSwgdXBwZXIyKTtcbiAgICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgICAgIGlmICh1cHBlck9wZW4xICYmIHVwcGVyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTdXBlclJhbmdlKHIxLCByMikge1xuICAgICAgICByZXR1cm4gKGNvbXBhcmVMb3dlcnMocjEubG93ZXIsIHIyLmxvd2VyLCByMS5sb3dlck9wZW4sIHIyLmxvd2VyT3BlbikgPD0gMCAmJlxuICAgICAgICAgICAgY29tcGFyZVVwcGVycyhyMS51cHBlciwgcjIudXBwZXIsIHIxLnVwcGVyT3BlbiwgcjIudXBwZXJPcGVuKSA+PSAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaW5kQ29tcGF0aWJsZVF1ZXJ5KGRiTmFtZSwgdGFibGVOYW1lLCB0eXBlLCByZXEpIHtcbiAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICBpZiAoIXRibENhY2hlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgcXVlcmllcyA9IHRibENhY2hlLnF1ZXJpZXNbdHlwZV07XG4gICAgICAgIGlmICghcXVlcmllcylcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgZmFsc2UsIHRibENhY2hlLCBudWxsXTtcbiAgICAgICAgdmFyIGluZGV4TmFtZSA9IHJlcS5xdWVyeSA/IHJlcS5xdWVyeS5pbmRleC5uYW1lIDogbnVsbDtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBxdWVyaWVzW2luZGV4TmFtZSB8fCAnJ107XG4gICAgICAgIGlmICghZW50cmllcylcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgZmFsc2UsIHRibENhY2hlLCBudWxsXTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgICAgICAgICAgdmFyIGVxdWFsRW50cnkgPSBlbnRyaWVzLmZpbmQoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5yZXEubGltaXQgPT09IHJlcS5saW1pdCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucmVxLnZhbHVlcyA9PT0gcmVxLnZhbHVlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJlUmFuZ2VzRXF1YWwoZW50cnkucmVxLnF1ZXJ5LnJhbmdlLCByZXEucXVlcnkucmFuZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChlcXVhbEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgZXF1YWxFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXMsXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIHN1cGVyRW50cnkgPSBlbnRyaWVzLmZpbmQoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW1pdCA9ICdsaW1pdCcgaW4gZW50cnkucmVxID8gZW50cnkucmVxLmxpbWl0IDogSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobGltaXQgPj0gcmVxLmxpbWl0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVxLnZhbHVlcyA/IGVudHJ5LnJlcS52YWx1ZXMgOiB0cnVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdXBlclJhbmdlKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtzdXBlckVudHJ5LCBmYWxzZSwgdGJsQ2FjaGUsIGVudHJpZXNdO1xuICAgICAgICAgICAgY2FzZSAnY291bnQnOlxuICAgICAgICAgICAgICAgIHZhciBjb3VudFF1ZXJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJlUmFuZ2VzRXF1YWwoZW50cnkucmVxLnF1ZXJ5LnJhbmdlLCByZXEucXVlcnkucmFuZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBbY291bnRRdWVyeSwgISFjb3VudFF1ZXJ5LCB0YmxDYWNoZSwgZW50cmllc107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmVUb0NhY2hlRW50cnkoY2FjaGVFbnRyeSwgY29udGFpbmVyLCByZXF1ZXJ5LCBzaWduYWwpIHtcbiAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5hZGQocmVxdWVyeSk7XG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5kZWxldGUocmVxdWVyeSk7XG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZW5xdWVGb3JEZWxldGlvbihjYWNoZUVudHJ5LCBjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5xdWVGb3JEZWxldGlvbihjYWNoZUVudHJ5LCBjb250YWluZXIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGNvbnRhaW5lciwgY2FjaGVFbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cblxuICAgIHZhciBjYWNoZU1pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiAnZGJjb3JlJyxcbiAgICAgICAgbGV2ZWw6IDAsXG4gICAgICAgIG5hbWU6ICdDYWNoZScsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBjb3JlLnNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgdmFyIGNvcmVNVyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb3JlKSwgeyB0cmFuc2FjdGlvbjogZnVuY3Rpb24gKHN0b3JlcywgbW9kZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWRidHJhbnMgPSBjb3JlLnRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjXzEgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2lnbmFsID0gYWNfMS5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAod2FzQ29tbWl0dGVkKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNfMS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWZmZWN0ZWRTdWJzY3JpYmVyc18xID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHN0b3Jlc18xID0gc3RvcmVzOyBfaSA8IHN0b3Jlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHN0b3Jlc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdChzdG9yZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YmxDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGNvcmUudGFibGUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3BzID0gdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5maWx0ZXIoZnVuY3Rpb24gKG9wKSB7IHJldHVybiBvcC50cmFucyA9PT0gaWRidHJhbnM7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZGJ0cmFucy5fZXhwbGljaXQgJiYgd2FzQ29tbWl0dGVkICYmIGlkYnRyYW5zLm11dGF0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gT2JqZWN0LnZhbHVlcyh0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5KTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyaWVzID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IGVudHJpZXMuc2xpY2UoKTsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBfZFtfY107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ic1NldHNPdmVybGFwKGVudHJ5Lm9ic1NldCwgaWRidHJhbnMubXV0YXRlZFBhcnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBhZmZlY3RlZFN1YnNjcmliZXJzXzEuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3BzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcyA9IHRibENhY2hlLm9wdGltaXN0aWNPcHMuZmlsdGVyKGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gb3AudHJhbnMgIT09IGlkYnRyYW5zOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2UgPSAwLCBfZiA9IE9iamVjdC52YWx1ZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9lIDwgX2YubGVuZ3RoOyBfZSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cmllcyA9IF9mW19lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9nID0gMCwgX2ggPSBlbnRyaWVzLnNsaWNlKCk7IF9nIDwgX2gubGVuZ3RoOyBfZysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2hbX2ddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5yZXMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5tdXRhdGVkUGFydHNcbiAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhc0NvbW1pdHRlZCAmJiAhZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemVSZXN1bHRzID0gT2JqZWN0LmlzRnJvemVuKGVudHJ5LnJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kUmVzID0gYXBwbHlPcHRpbWlzdGljT3BzKGVudHJ5LnJlcywgZW50cnkucmVxLCBvcHMsIHRhYmxlLCBlbnRyeSwgZnJlZXplUmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kUmVzICE9PSBlbnRyeS5yZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5yZXMgPSBtb2RSZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucHJvbWlzZSA9IERleGllUHJvbWlzZS5yZXNvbHZlKHsgcmVzdWx0OiBtb2RSZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWVyeSkgeyByZXR1cm4gYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmFkZChyZXF1ZXJ5KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIHJlcXVlcnkoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZW5kVHJhbnNhY3Rpb24oZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZW5kVHJhbnNhY3Rpb24oZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgZW5kVHJhbnNhY3Rpb24odHJ1ZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IHNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZGJ0cmFucztcbiAgICAgICAgICAgICAgICB9LCB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZG93blRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IGRvd25UYWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlTVcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93blRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBQU0QudHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkub3V0Ym91bmQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuZGIuX29wdGlvbnMuY2FjaGUgPT09ICdkaXNhYmxlZCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuZXhwbGljaXQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMubW9kZSAhPT0gJ3JlYWR3cml0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGJsQ2FjaGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXEudHlwZSA9PT0gJ2FkZCcgfHwgcmVxLnR5cGUgPT09ICdwdXQnKSAmJiAocmVxLnZhbHVlcy5sZW5ndGggPj0gNTAgfHwgZ2V0RWZmZWN0aXZlS2V5cyhwcmltS2V5LCByZXEpLnNvbWUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ID09IG51bGw7IH0pKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcVdpdGhSZXNvbHZlZEtleXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyB2YWx1ZXM6IHJlcS52YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZmFpbHVyZXNbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZVdpdGhLZXkgPSAoKF9hID0gcHJpbUtleS5rZXlQYXRoKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoJy4nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGVlcENsb25lKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfX2Fzc2lnbih7fSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgodmFsdWVXaXRoS2V5LCBwcmltS2V5LmtleVBhdGgsIHJlcy5yZXN1bHRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlV2l0aEtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFJlcSA9IGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcVdpdGhSZXNvbHZlZEtleXMsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLnB1c2goYWRqdXN0ZWRSZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbSh0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFJlcSA9IGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRqdXN0ZWRSZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKGFkanVzdGVkUmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKHRibENhY2hlLm9wdGltaXN0aWNPcHMsIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEubXV0YXRlZFBhcnRzICYmIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHJlcS5tdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBxdWVyeTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FjaGFibGVDb250ZXh0KFBTRCwgZG93blRhYmxlKSB8fCAhaXNDYWNoYWJsZVJlcXVlc3QoXCJxdWVyeVwiLCByZXEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLnF1ZXJ5KHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyZWV6ZVJlc3VsdHMgPSAoKF9hID0gUFNELnRyYW5zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGIuX29wdGlvbnMuY2FjaGUpID09PSAnaW1tdXRhYmxlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2IgPSBQU0QsIHJlcXVlcnkgPSBfYi5yZXF1ZXJ5LCBzaWduYWwgPSBfYi5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gZmluZENvbXBhdGlibGVRdWVyeShkYk5hbWUsIHRhYmxlTmFtZSwgJ3F1ZXJ5JywgcmVxKSwgY2FjaGVFbnRyeSA9IF9jWzBdLCBleGFjdE1hdGNoID0gX2NbMV0sIHRibENhY2hlID0gX2NbMl0sIGNvbnRhaW5lciA9IF9jWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5ICYmIGV4YWN0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5vYnNTZXQgPSByZXEub2JzU2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkb3duVGFibGUucXVlcnkocmVxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5yZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlZXplUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHJlc3VsdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5yZXN1bHQgPSBkZWVwQ2xvbmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAmJiBjYWNoZUVudHJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbShjb250YWluZXIsIGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNTZXQ6IHJlcS5vYnNTZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXE6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnB1c2goY2FjaGVFbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBbY2FjaGVFbnRyeV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRibENhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUgPSBjYWNoZVtcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lKV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljT3BzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduYWxlZFBhcnRzOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5W3JlcS5xdWVyeS5pbmRleC5uYW1lIHx8ICcnXSA9IGNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVUb0NhY2hlRW50cnkoY2FjaGVFbnRyeSwgY29udGFpbmVyLCByZXF1ZXJ5LCBzaWduYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5LnByb21pc2UudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGFwcGx5T3B0aW1pc3RpY09wcyhyZXMucmVzdWx0LCByZXEsIHRibENhY2hlID09PSBudWxsIHx8IHRibENhY2hlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCBkb3duVGFibGUsIGNhY2hlRW50cnksIGZyZWV6ZVJlc3VsdHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlTVc7XG4gICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb3JlTVc7XG4gICAgICAgIH0sXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHZpcGlmeSh0YXJnZXQsIHZpcERiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodGFyZ2V0LCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkYicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXBEYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBEZXhpZSQxID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERleGllKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLl9taWRkbGV3YXJlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy52ZXJubyA9IDA7XG4gICAgICAgICAgICB2YXIgZGVwcyA9IERleGllLmRlcGVuZGVuY2llcztcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zID0gX19hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGFkZG9uczogRGV4aWUuYWRkb25zLCBhdXRvT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IGRlcHMuaW5kZXhlZERCLCBJREJLZXlSYW5nZTogZGVwcy5JREJLZXlSYW5nZSwgY2FjaGU6ICdjbG9uZWQnIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fZGVwcyA9IHtcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IG9wdGlvbnMuaW5kZXhlZERCLFxuICAgICAgICAgICAgICAgIElEQktleVJhbmdlOiBvcHRpb25zLklEQktleVJhbmdlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFkZG9ucyA9IG9wdGlvbnMuYWRkb25zO1xuICAgICAgICAgICAgdGhpcy5fZGJTY2hlbWEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25zID0gW107XG4gICAgICAgICAgICB0aGlzLl9zdG9yZU5hbWVzID0gW107XG4gICAgICAgICAgICB0aGlzLl9hbGxUYWJsZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaWRiZGIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fbm92aXAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGRiT3BlbkVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgIGlzQmVpbmdPcGVuZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG9uUmVhZHlCZWluZ0ZpcmVkOiBudWxsLFxuICAgICAgICAgICAgICAgIG9wZW5Db21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGJSZWFkeVJlc29sdmU6IG5vcCxcbiAgICAgICAgICAgICAgICBkYlJlYWR5UHJvbWlzZTogbnVsbCxcbiAgICAgICAgICAgICAgICBjYW5jZWxPcGVuOiBub3AsXG4gICAgICAgICAgICAgICAgb3BlbkNhbmNlbGxlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBhdXRvU2NoZW1hOiB0cnVlLFxuICAgICAgICAgICAgICAgIFBSMTM5OF9tYXhMb29wOiAzLFxuICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBvcHRpb25zLmF1dG9PcGVuLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlQcm9taXNlID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUub3BlbkNhbmNlbGxlciA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5vbiA9IEV2ZW50cyh0aGlzLCBcInBvcHVsYXRlXCIsIFwiYmxvY2tlZFwiLCBcInZlcnNpb25jaGFuZ2VcIiwgXCJjbG9zZVwiLCB7IHJlYWR5OiBbcHJvbWlzYWJsZUNoYWluLCBub3BdIH0pO1xuICAgICAgICAgICAgdGhpcy5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbihldmVudCkudW5zdWJzY3JpYmUoZm4pO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub24oZXZlbnQsIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uLnJlYWR5LnN1YnNjcmliZSA9IG92ZXJyaWRlKHRoaXMub24ucmVhZHkuc3Vic2NyaWJlLCBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBiU3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgICAgIERleGllLnZpcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBfdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUub3BlbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5kYk9wZW5FcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLnJlc29sdmUoKS50aGVuKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiU3RpY2t5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5vblJlYWR5QmVpbmdGaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJTdGlja3kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJfMSA9IF90aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYlN0aWNreSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJfMS5vbi5yZWFkeS51bnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiXzEub24ucmVhZHkudW5zdWJzY3JpYmUodW5zdWJzY3JpYmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5Db2xsZWN0aW9uID0gY3JlYXRlQ29sbGVjdGlvbkNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5UYWJsZSA9IGNyZWF0ZVRhYmxlQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLlRyYW5zYWN0aW9uID0gY3JlYXRlVHJhbnNhY3Rpb25Db25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuVmVyc2lvbiA9IGNyZWF0ZVZlcnNpb25Db25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuV2hlcmVDbGF1c2UgPSBjcmVhdGVXaGVyZUNsYXVzZUNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbihcInZlcnNpb25jaGFuZ2VcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2Lm5ld1ZlcnNpb24gPiAwKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbm90aGVyIGNvbm5lY3Rpb24gd2FudHMgdG8gdXBncmFkZSBkYXRhYmFzZSAnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJy4gQ2xvc2luZyBkYiBub3cgdG8gcmVzdW1lIHRoZSB1cGdyYWRlLlwiKSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbm90aGVyIGNvbm5lY3Rpb24gd2FudHMgdG8gZGVsZXRlIGRhdGFiYXNlICdcIi5jb25jYXQoX3RoaXMubmFtZSwgXCInLiBDbG9zaW5nIGRiIG5vdyB0byByZXN1bWUgdGhlIGRlbGV0ZSByZXF1ZXN0LlwiKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKFwiYmxvY2tlZFwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2Lm5ld1ZlcnNpb24gfHwgZXYubmV3VmVyc2lvbiA8IGV2Lm9sZFZlcnNpb24pXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkRleGllLmRlbGV0ZSgnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJykgd2FzIGJsb2NrZWRcIikpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVXBncmFkZSAnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJyBibG9ja2VkIGJ5IG90aGVyIGNvbm5lY3Rpb24gaG9sZGluZyB2ZXJzaW9uIFwiKS5jb25jYXQoZXYub2xkVmVyc2lvbiAvIDEwKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX21heEtleSA9IGdldE1heEtleShvcHRpb25zLklEQktleVJhbmdlKTtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbikgeyByZXR1cm4gbmV3IF90aGlzLlRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBfdGhpcy5fb3B0aW9ucy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHksIHBhcmVudFRyYW5zYWN0aW9uKTsgfTtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmVPbkJsb2NrZWQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbihcImJsb2NrZWRcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5uYW1lID09PSBfdGhpcy5uYW1lICYmIGMgIT09IF90aGlzICYmICFjLl9zdGF0ZS52Y0ZpcmVkOyB9KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLm9uKFwidmVyc2lvbmNoYW5nZVwiKS5maXJlKGV2KTsgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51c2UoY2FjaGVFeGlzdGluZ1ZhbHVlc01pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2UoY2FjaGVNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKG9ic2VydmFiaWxpdHlNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKHZpcnR1YWxJbmRleE1pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2UoaG9va3NNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHZhciB2aXBEQiA9IG5ldyBQcm94eSh0aGlzLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdfdmlwJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFibGVOYW1lKSB7IHJldHVybiB2aXBpZnkoX3RoaXMudGFibGUodGFibGVOYW1lKSwgdmlwREIpOyB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBSZWZsZWN0LmdldChfLCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChydiBpbnN0YW5jZW9mIFRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcGlmeShydiwgdmlwREIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RhYmxlcycpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnYubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB2aXBpZnkodCwgdmlwREIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdfY3JlYXRlVHJhbnNhY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHggPSBydi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXBpZnkodHgsIHZpcERCKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlwID0gdmlwREI7XG4gICAgICAgICAgICBhZGRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWRkb24pIHsgcmV0dXJuIGFkZG9uKF90aGlzKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbk51bWJlcikge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHZlcnNpb25OdW1iZXIpIHx8IHZlcnNpb25OdW1iZXIgPCAwLjEpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVHlwZShcIkdpdmVuIHZlcnNpb24gaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyXCIpO1xuICAgICAgICAgICAgdmVyc2lvbk51bWJlciA9IE1hdGgucm91bmQodmVyc2lvbk51bWJlciAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgaWYgKHRoaXMuaWRiZGIgfHwgdGhpcy5fc3RhdGUuaXNCZWluZ09wZW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJDYW5ub3QgYWRkIHZlcnNpb24gd2hlbiBkYXRhYmFzZSBpcyBvcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy52ZXJubyA9IE1hdGgubWF4KHRoaXMudmVybm8sIHZlcnNpb25OdW1iZXIpO1xuICAgICAgICAgICAgdmFyIHZlcnNpb25zID0gdGhpcy5fdmVyc2lvbnM7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbkluc3RhbmNlID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Ll9jZmcudmVyc2lvbiA9PT0gdmVyc2lvbk51bWJlcjsgfSlbMF07XG4gICAgICAgICAgICBpZiAodmVyc2lvbkluc3RhbmNlKVxuICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uSW5zdGFuY2U7XG4gICAgICAgICAgICB2ZXJzaW9uSW5zdGFuY2UgPSBuZXcgdGhpcy5WZXJzaW9uKHZlcnNpb25OdW1iZXIpO1xuICAgICAgICAgICAgdmVyc2lvbnMucHVzaCh2ZXJzaW9uSW5zdGFuY2UpO1xuICAgICAgICAgICAgdmVyc2lvbnMuc29ydChsb3dlclZlcnNpb25GaXJzdCk7XG4gICAgICAgICAgICB2ZXJzaW9uSW5zdGFuY2Uuc3RvcmVzKHt9KTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlLmF1dG9TY2hlbWEgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uSW5zdGFuY2U7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fd2hlblJlYWR5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmlkYmRiICYmICh0aGlzLl9zdGF0ZS5vcGVuQ29tcGxldGUgfHwgUFNELmxldFRocm91Z2ggfHwgdGhpcy5fdmlwKSkgPyBmbigpIDogbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9zdGF0ZS5vcGVuQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZChfdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5fc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLl9zdGF0ZS5hdXRvT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oKS5jYXRjaChub3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSkudGhlbihmbik7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IF9hLnN0YWNrLCBjcmVhdGUgPSBfYS5jcmVhdGUsIGxldmVsID0gX2EubGV2ZWwsIG5hbWUgPSBfYS5uYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUpXG4gICAgICAgICAgICAgICAgdGhpcy51bnVzZSh7IHN0YWNrOiBzdGFjaywgbmFtZTogbmFtZSB9KTtcbiAgICAgICAgICAgIHZhciBtaWRkbGV3YXJlcyA9IHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSB8fCAodGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdID0gW10pO1xuICAgICAgICAgICAgbWlkZGxld2FyZXMucHVzaCh7IHN0YWNrOiBzdGFjaywgY3JlYXRlOiBjcmVhdGUsIGxldmVsOiBsZXZlbCA9PSBudWxsID8gMTAgOiBsZXZlbCwgbmFtZTogbmFtZSB9KTtcbiAgICAgICAgICAgIG1pZGRsZXdhcmVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEubGV2ZWwgLSBiLmxldmVsOyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUudW51c2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IF9hLnN0YWNrLCBuYW1lID0gX2EubmFtZSwgY3JlYXRlID0gX2EuY3JlYXRlO1xuICAgICAgICAgICAgaWYgKHN0YWNrICYmIHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSA9IHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXS5maWx0ZXIoZnVuY3Rpb24gKG13KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGUgPyBtdy5jcmVhdGUgIT09IGNyZWF0ZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID8gbXcubmFtZSAhPT0gbmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHVzZVBTRChnbG9iYWxQU0QsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBkZXhpZU9wZW4oX3RoaXMpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMub24uY2xvc2UuZmlyZShuZXcgQ3VzdG9tRXZlbnQoJ2Nsb3NlJykpO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICB2YXIgaWR4ID0gY29ubmVjdGlvbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlkYmRiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGJkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgdGhpcy5pZGJkYiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UHJvbWlzZSA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5DYW5jZWxsZXIgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2FuY2VsT3BlbiA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8geyBkaXNhYmxlQXV0b09wZW46IHRydWUgfSA6IF9hLCBkaXNhYmxlQXV0b09wZW4gPSBfYi5kaXNhYmxlQXV0b09wZW47XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlQXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jYW5jZWxPcGVuKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHN0YXRlLmF1dG9PcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hdXRvT3BlbiA9IHRoaXMuX29wdGlvbnMuYXV0b09wZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNCZWluZ09wZW5lZDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYk9wZW5FcnJvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoY2xvc2VPcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGNsb3NlT3B0aW9ucyA9PT0gdm9pZCAwKSB7IGNsb3NlT3B0aW9ucyA9IHsgZGlzYWJsZUF1dG9PcGVuOiB0cnVlIH07IH1cbiAgICAgICAgICAgIHZhciBoYXNJbnZhbGlkQXJndW1lbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ29iamVjdCc7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9EZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKGNsb3NlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBfdGhpcy5fZGVwcy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vbkRhdGFiYXNlRGVsZXRlZChfdGhpcy5fZGVwcywgX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25ibG9ja2VkID0gX3RoaXMuX2ZpcmVPbkJsb2NrZWQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzSW52YWxpZEFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBjbG9zZU9wdGlvbnMgYXJndW1lbnQgdG8gZGIuZGVsZXRlKClcIik7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihkb0RlbGV0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb0RlbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuYmFja2VuZERCID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRiZGI7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZGJkYiAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmhhc0JlZW5DbG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJPcGVuRXJyb3IgPSB0aGlzLl9zdGF0ZS5kYk9wZW5FcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYk9wZW5FcnJvciAmJiAoZGJPcGVuRXJyb3IubmFtZSA9PT0gJ0RhdGFiYXNlQ2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5oYXNGYWlsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3IgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5keW5hbWljYWxseU9wZW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZS5hdXRvU2NoZW1hO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV4aWUucHJvdG90eXBlLCBcInRhYmxlc1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzKHRoaXMuX2FsbFRhYmxlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5fYWxsVGFibGVzW25hbWVdOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBleHRyYWN0VHJhbnNhY3Rpb25BcmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fdHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgdGFibGVzLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFyZW50VHJhbnNhY3Rpb24gPSBQU0QudHJhbnM7XG4gICAgICAgICAgICBpZiAoIXBhcmVudFRyYW5zYWN0aW9uIHx8IHBhcmVudFRyYW5zYWN0aW9uLmRiICE9PSB0aGlzIHx8IG1vZGUuaW5kZXhPZignIScpICE9PSAtMSlcbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB2YXIgb25seUlmQ29tcGF0aWJsZSA9IG1vZGUuaW5kZXhPZignPycpICE9PSAtMTtcbiAgICAgICAgICAgIG1vZGUgPSBtb2RlLnJlcGxhY2UoJyEnLCAnJykucmVwbGFjZSgnPycsICcnKTtcbiAgICAgICAgICAgIHZhciBpZGJNb2RlLCBzdG9yZU5hbWVzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG9yZU5hbWVzID0gdGFibGVzLm1hcChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHRhYmxlIGluc3RhbmNlb2YgX3RoaXMuVGFibGUgPyB0YWJsZS5uYW1lIDogdGFibGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVOYW1lICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhYmxlIGFyZ3VtZW50IHRvIERleGllLnRyYW5zYWN0aW9uKCkuIE9ubHkgVGFibGUgb3IgU3RyaW5nIGFyZSBhbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09IFwiclwiIHx8IG1vZGUgPT09IFJFQURPTkxZKVxuICAgICAgICAgICAgICAgICAgICBpZGJNb2RlID0gUkVBRE9OTFk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PSBcInJ3XCIgfHwgbW9kZSA9PSBSRUFEV1JJVEUpXG4gICAgICAgICAgICAgICAgICAgIGlkYk1vZGUgPSBSRUFEV1JJVEU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJJbnZhbGlkIHRyYW5zYWN0aW9uIG1vZGU6IFwiICsgbW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbi5tb2RlID09PSBSRUFET05MWSAmJiBpZGJNb2RlID09PSBSRUFEV1JJVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlN1YlRyYW5zYWN0aW9uKFwiQ2Fubm90IGVudGVyIGEgc3ViLXRyYW5zYWN0aW9uIHdpdGggUkVBRFdSSVRFIG1vZGUgd2hlbiBwYXJlbnQgdHJhbnNhY3Rpb24gaXMgUkVBRE9OTFlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbiAmJiBwYXJlbnRUcmFuc2FjdGlvbi5zdG9yZU5hbWVzLmluZGV4T2Yoc3RvcmVOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubHlJZkNvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIlRhYmxlIFwiICsgc3RvcmVOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBub3QgaW5jbHVkZWQgaW4gcGFyZW50IHRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSAmJiBwYXJlbnRUcmFuc2FjdGlvbiAmJiAhcGFyZW50VHJhbnNhY3Rpb24uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRUcmFuc2FjdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uLl9wcm9taXNlKG51bGwsIGZ1bmN0aW9uIChfLCByZWplY3QpIHsgcmVqZWN0KGUpOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbnRlclRyYW5zYWN0aW9uID0gZW50ZXJUcmFuc2FjdGlvblNjb3BlLmJpbmQobnVsbCwgdGhpcywgaWRiTW9kZSwgc3RvcmVOYW1lcywgcGFyZW50VHJhbnNhY3Rpb24sIHNjb3BlRnVuYyk7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudFRyYW5zYWN0aW9uID9cbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbi5fcHJvbWlzZShpZGJNb2RlLCBlbnRlclRyYW5zYWN0aW9uLCBcImxvY2tcIikgOlxuICAgICAgICAgICAgICAgIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgICAgIHVzZVBTRChQU0QudHJhbnNsZXNzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fd2hlblJlYWR5KGVudGVyVHJhbnNhY3Rpb24pOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duKHRoaXMuX2FsbFRhYmxlcywgdGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRUYWJsZShcIlRhYmxlIFwiLmNvbmNhdCh0YWJsZU5hbWUsIFwiIGRvZXMgbm90IGV4aXN0XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxUYWJsZXNbdGFibGVOYW1lXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERleGllO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgc3ltYm9sT2JzZXJ2YWJsZSA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJvYnNlcnZhYmxlXCIgaW4gU3ltYm9sXG4gICAgICAgID8gU3ltYm9sLm9ic2VydmFibGVcbiAgICAgICAgOiBcIkBAb2JzZXJ2YWJsZVwiO1xuICAgIHZhciBPYnNlcnZhYmxlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICAgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHgsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSgheCB8fCB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geyBuZXh0OiB4LCBlcnJvcjogZXJyb3IsIGNvbXBsZXRlOiBjb21wbGV0ZSB9IDogeCk7XG4gICAgICAgIH07XG4gICAgICAgIE9ic2VydmFibGUucHJvdG90eXBlW3N5bWJvbE9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgZG9tRGVwcztcbiAgICB0cnkge1xuICAgICAgICBkb21EZXBzID0ge1xuICAgICAgICAgICAgaW5kZXhlZERCOiBfZ2xvYmFsLmluZGV4ZWREQiB8fCBfZ2xvYmFsLm1vekluZGV4ZWREQiB8fCBfZ2xvYmFsLndlYmtpdEluZGV4ZWREQiB8fCBfZ2xvYmFsLm1zSW5kZXhlZERCLFxuICAgICAgICAgICAgSURCS2V5UmFuZ2U6IF9nbG9iYWwuSURCS2V5UmFuZ2UgfHwgX2dsb2JhbC53ZWJraXRJREJLZXlSYW5nZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBkb21EZXBzID0geyBpbmRleGVkREI6IG51bGwsIElEQktleVJhbmdlOiBudWxsIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGl2ZVF1ZXJ5KHF1ZXJpZXIpIHtcbiAgICAgICAgdmFyIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHZhciBjdXJyZW50VmFsdWU7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICB2YXIgc2NvcGVGdW5jSXNBc3luYyA9IGlzQXN5bmNGdW5jdGlvbihxdWVyaWVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoY3R4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IG5ld1Njb3BlKHF1ZXJpZXIsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydiA9IHJ2LmZpbmFsbHkoZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHdhc1Jvb3RFeGVjICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGFib3J0Q29udHJvbGxlcjtcbiAgICAgICAgICAgIHZhciBhY2N1bU11dHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50T2JzID0ge307XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgICAgICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9zZWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydGVkTGlzdGVuaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLnVuc3Vic2NyaWJlKG11dGF0aW9uTGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb2JzZXJ2ZXIuc3RhcnQgJiYgb2JzZXJ2ZXIuc3RhcnQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHZhciBzdGFydGVkTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4ZWNJbkdsb2JhbENvbnRleHQoX2RvUXVlcnkpOyB9O1xuICAgICAgICAgICAgZnVuY3Rpb24gc2hvdWxkTm90aWZ5KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNTZXRzT3ZlcmxhcChjdXJyZW50T2JzLCBhY2N1bU11dHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG11dGF0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KGFjY3VtTXV0cywgcGFydHMpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGROb3RpZnkoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb1F1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBfZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICFkb21EZXBzLmluZGV4ZWREQilcbiAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3IgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyOiBzdWJzY3IsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVyeTogZG9RdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcjogcXVlcmllcixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnM6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBleGVjdXRlKGN0eCk7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJldCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8IGN0eC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50T2JzID0gc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9iamVjdElzRW1wdHkoY3VycmVudE9icykgJiYgIXN0YXJ0ZWRMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSwgbXV0YXRpb25MaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleGVjSW5HbG9iYWxDb250ZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuICFjbG9zZWQgJiYgb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFbJ0RhdGFiYXNlQ2xvc2VkRXJyb3InLCAnQWJvcnRFcnJvciddLmluY2x1ZGVzKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0luR2xvYmFsQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGRvUXVlcnksIDApO1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmFibGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoYXNWYWx1ZTsgfTtcbiAgICAgICAgb2JzZXJ2YWJsZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRWYWx1ZTsgfTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgdmFyIERleGllID0gRGV4aWUkMTtcbiAgICBwcm9wcyhEZXhpZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGZ1bGxOYW1lRXhjZXB0aW9ucyksIHtcbiAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoZGF0YWJhc2VOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGIgPSBuZXcgRGV4aWUoZGF0YWJhc2VOYW1lLCB7IGFkZG9uczogW10gfSk7XG4gICAgICAgICAgICByZXR1cm4gZGIuZGVsZXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4aXN0czogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWUobmFtZSwgeyBhZGRvbnM6IFtdIH0pLm9wZW4oKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5jYXRjaCgnTm9TdWNoRGF0YWJhc2VFcnJvcicsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RGF0YWJhc2VOYW1lczogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXREYXRhYmFzZU5hbWVzKERleGllLmRlcGVuZGVuY2llcykudGhlbihjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmluZUNsYXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBDbGFzcyhjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIENsYXNzO1xuICAgICAgICB9LCBpZ25vcmVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKHNjb3BlRnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgdXNlUFNEKFBTRC50cmFuc2xlc3MsIHNjb3BlRnVuYykgOlxuICAgICAgICAgICAgICAgIHNjb3BlRnVuYygpO1xuICAgICAgICB9LCB2aXA6IHZpcCwgYXN5bmM6IGZ1bmN0aW9uIChnZW5lcmF0b3JGbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBhd2FpdEl0ZXJhdG9yKGdlbmVyYXRvckZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJ2IHx8IHR5cGVvZiBydi50aGVuICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIHNwYXduOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4sIGFyZ3MsIHRoaXopIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGl6LCBhcmdzIHx8IFtdKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFydiB8fCB0eXBlb2YgcnYudGhlbiAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRUcmFuc2FjdGlvbjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBQU0QudHJhbnMgfHwgbnVsbDsgfVxuICAgICAgICB9LCB3YWl0Rm9yOiBmdW5jdGlvbiAocHJvbWlzZU9yRnVuY3Rpb24sIG9wdGlvbmFsVGltZW91dCkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZSh0eXBlb2YgcHJvbWlzZU9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKHByb21pc2VPckZ1bmN0aW9uKSA6XG4gICAgICAgICAgICAgICAgcHJvbWlzZU9yRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgLnRpbWVvdXQob3B0aW9uYWxUaW1lb3V0IHx8IDYwMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgIFBTRC50cmFucy53YWl0Rm9yKHByb21pc2UpIDpcbiAgICAgICAgICAgICAgICBwcm9taXNlO1xuICAgICAgICB9LFxuICAgICAgICBQcm9taXNlOiBEZXhpZVByb21pc2UsXG4gICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlYnVnOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBzZXREZWJ1Zyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlcml2ZTogZGVyaXZlLCBleHRlbmQ6IGV4dGVuZCwgcHJvcHM6IHByb3BzLCBvdmVycmlkZTogb3ZlcnJpZGUsXG4gICAgICAgIEV2ZW50czogRXZlbnRzLCBvbjogZ2xvYmFsRXZlbnRzLCBsaXZlUXVlcnk6IGxpdmVRdWVyeSwgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldDogZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldCxcbiAgICAgICAgZ2V0QnlLZXlQYXRoOiBnZXRCeUtleVBhdGgsIHNldEJ5S2V5UGF0aDogc2V0QnlLZXlQYXRoLCBkZWxCeUtleVBhdGg6IGRlbEJ5S2V5UGF0aCwgc2hhbGxvd0Nsb25lOiBzaGFsbG93Q2xvbmUsIGRlZXBDbG9uZTogZGVlcENsb25lLCBnZXRPYmplY3REaWZmOiBnZXRPYmplY3REaWZmLCBjbXA6IGNtcCwgYXNhcDogYXNhcCQxLFxuICAgICAgICBtaW5LZXk6IG1pbktleSxcbiAgICAgICAgYWRkb25zOiBbXSxcbiAgICAgICAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zLFxuICAgICAgICBlcnJuYW1lczogZXJybmFtZXMsXG4gICAgICAgIGRlcGVuZGVuY2llczogZG9tRGVwcywgY2FjaGU6IGNhY2hlLFxuICAgICAgICBzZW1WZXI6IERFWElFX1ZFUlNJT04sIHZlcnNpb246IERFWElFX1ZFUlNJT04uc3BsaXQoJy4nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobikgeyByZXR1cm4gcGFyc2VJbnQobik7IH0pXG4gICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChwLCBjLCBpKSB7IHJldHVybiBwICsgKGMgLyBNYXRoLnBvdygxMCwgaSAqIDIpKTsgfSkgfSkpO1xuICAgIERleGllLm1heEtleSA9IGdldE1heEtleShEZXhpZS5kZXBlbmRlbmNpZXMuSURCS2V5UmFuZ2UpO1xuXG4gICAgaWYgKHR5cGVvZiBkaXNwYXRjaEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAodXBkYXRlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudF8xO1xuICAgICAgICAgICAgICAgIGV2ZW50XzEgPSBuZXcgQ3VzdG9tRXZlbnQoU1RPUkFHRV9NVVRBVEVEX0RPTV9FVkVOVF9OQU1FLCB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogdXBkYXRlZFBhcnRzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRldGFpbCA9IF9hLmRldGFpbDtcbiAgICAgICAgICAgIGlmICghcHJvcGFnYXRpbmdMb2NhbGx5KSB7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlTG9jYWxseShkZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlTG9jYWxseSh1cGRhdGVQYXJ0cykge1xuICAgICAgICB2YXIgd2FzTWUgPSBwcm9wYWdhdGluZ0xvY2FsbHk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9wYWdhdGluZ0xvY2FsbHkgPSB0cnVlO1xuICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLmZpcmUodXBkYXRlUGFydHMpO1xuICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3codXBkYXRlUGFydHMsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gd2FzTWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuXG4gICAgdmFyIGJjO1xuICAgIHZhciBjcmVhdGVCQyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBpZiAodHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0ZUJDID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmMgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUpO1xuICAgICAgICAgICAgYmMub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2KSB7IHJldHVybiBldi5kYXRhICYmIHByb3BhZ2F0ZUxvY2FsbHkoZXYuZGF0YSk7IH07XG4gICAgICAgIH07XG4gICAgICAgIGNyZWF0ZUJDKCk7XG4gICAgICAgIGlmICh0eXBlb2YgYmMudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGJjLnVucmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAoY2hhbmdlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIGJjLnBvc3RNZXNzYWdlKGNoYW5nZWRQYXJ0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghRGV4aWUkMS5kaXNhYmxlQmZDYWNoZSAmJiBldmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0RleGllOiBoYW5kbGluZyBwZXJzaXN0ZWQgcGFnZWhpZGUnKTtcbiAgICAgICAgICAgICAgICBiYyA9PT0gbnVsbCB8fCBiYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbm5lY3Rpb25zXzEgPSBjb25uZWN0aW9uczsgX2kgPCBjb25uZWN0aW9uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGIgPSBjb25uZWN0aW9uc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIURleGllJDEuZGlzYWJsZUJmQ2FjaGUgJiYgZXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZXhpZTogaGFuZGxpbmcgcGVyc2lzdGVkIHBhZ2VzaG93Jyk7XG4gICAgICAgICAgICAgICAgY3JlYXRlQkMoKTtcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVMb2NhbGx5KHsgYWxsOiBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW11dKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IGFkZDogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlbW92ZTogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZVByZWZpeChhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlcGxhY2VQcmVmaXg6IFthLCBiXSB9KTtcbiAgICB9XG5cbiAgICBEZXhpZVByb21pc2UucmVqZWN0aW9uTWFwcGVyID0gbWFwRXJyb3I7XG4gICAgc2V0RGVidWcoZGVidWcpO1xuXG4gICAgdmFyIG5hbWVkRXhwb3J0cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgICBEZXhpZTogRGV4aWUkMSxcbiAgICAgICAgbGl2ZVF1ZXJ5OiBsaXZlUXVlcnksXG4gICAgICAgIEVudGl0eTogRW50aXR5LFxuICAgICAgICBjbXA6IGNtcCxcbiAgICAgICAgUHJvcE1vZGlmaWNhdGlvbjogUHJvcE1vZGlmaWNhdGlvbixcbiAgICAgICAgcmVwbGFjZVByZWZpeDogcmVwbGFjZVByZWZpeCxcbiAgICAgICAgYWRkOiBhZGQsXG4gICAgICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgICAgICAnZGVmYXVsdCc6IERleGllJDEsXG4gICAgICAgIFJhbmdlU2V0OiBSYW5nZVNldCxcbiAgICAgICAgbWVyZ2VSYW5nZXM6IG1lcmdlUmFuZ2VzLFxuICAgICAgICByYW5nZXNPdmVybGFwOiByYW5nZXNPdmVybGFwXG4gICAgfSk7XG5cbiAgICBfX2Fzc2lnbihEZXhpZSQxLCBuYW1lZEV4cG9ydHMsIHsgZGVmYXVsdDogRGV4aWUkMSB9KTtcblxuICAgIHJldHVybiBEZXhpZSQxO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXhpZS5qcy5tYXBcbiIsIi8vIE1ha2luZyB0aGUgbW9kdWxlIHZlcnNpb24gY29uc3VtYWJsZSB2aWEgcmVxdWlyZSAtIHRvIHByb2hpYml0XG4vLyBtdWx0aXBsZSBvY2N1cnJhbmNpZXMgb2YgdGhlIHNhbWUgbW9kdWxlIGluIHRoZSBzYW1lIGFwcFxuLy8gKGR1YWwgcGFja2FnZSBoYXphcmQsIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcGFja2FnZXMuaHRtbCNkdWFsLXBhY2thZ2UtaGF6YXJkKVxuaW1wb3J0IF9EZXhpZSBmcm9tIFwiLi9kaXN0L2RleGllLmpzXCI7XG5jb25zdCBEZXhpZVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJEZXhpZVwiKTtcbmNvbnN0IERleGllID0gZ2xvYmFsVGhpc1tEZXhpZVN5bWJvbF0gfHwgKGdsb2JhbFRoaXNbRGV4aWVTeW1ib2xdID0gX0RleGllKTtcbmlmIChfRGV4aWUuc2VtVmVyICE9PSBEZXhpZS5zZW1WZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFR3byBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgRGV4aWUgbG9hZGVkIGluIHRoZSBzYW1lIGFwcDogJHtfRGV4aWUuc2VtVmVyfSBhbmQgJHtEZXhpZS5zZW1WZXJ9YCk7XG59XG5jb25zdCB7IGxpdmVRdWVyeSwgbWVyZ2VSYW5nZXMsIHJhbmdlc092ZXJsYXAsIFJhbmdlU2V0LCBjbXAsIEVudGl0eSxcbiAgICBQcm9wTW9kaWZpY2F0aW9uLCByZXBsYWNlUHJlZml4LCBhZGQsIHJlbW92ZSxcbiAgICBEZXhpZVlQcm92aWRlciB9ID0gRGV4aWU7XG5leHBvcnQgeyBsaXZlUXVlcnksIG1lcmdlUmFuZ2VzLCByYW5nZXNPdmVybGFwLCBSYW5nZVNldCwgY21wLCBEZXhpZSwgRW50aXR5LFxuICAgIFByb3BNb2RpZmljYXRpb24sIHJlcGxhY2VQcmVmaXgsIGFkZCwgcmVtb3ZlLFxuICAgIERleGllWVByb3ZpZGVyfTtcbiAgICBcbmV4cG9ydCBkZWZhdWx0IERleGllO1xuIiwiaW1wb3J0IGUgZnJvbVwidm9pZC1lbGVtZW50c1wiO3ZhciB0PS9cXHMoW14nXCIvXFxzPjxdKz8pW1xccy8+XXwoW15cXHM9XSspPVxccz8oXCIuKj9cInwnLio/JykvZztmdW5jdGlvbiBuKG4pe3ZhciByPXt0eXBlOlwidGFnXCIsbmFtZTpcIlwiLHZvaWRFbGVtZW50OiExLGF0dHJzOnt9LGNoaWxkcmVuOltdfSxpPW4ubWF0Y2goLzxcXC8/KFteXFxzXSs/KVsvXFxzPl0vKTtpZihpJiYoci5uYW1lPWlbMV0sKGVbaVsxXV18fFwiL1wiPT09bi5jaGFyQXQobi5sZW5ndGgtMikpJiYoci52b2lkRWxlbWVudD0hMCksci5uYW1lLnN0YXJ0c1dpdGgoXCIhLS1cIikpKXt2YXIgcz1uLmluZGV4T2YoXCItLVxceDNlXCIpO3JldHVybnt0eXBlOlwiY29tbWVudFwiLGNvbW1lbnQ6LTEhPT1zP24uc2xpY2UoNCxzKTpcIlwifX1mb3IodmFyIGE9bmV3IFJlZ0V4cCh0KSxjPW51bGw7bnVsbCE9PShjPWEuZXhlYyhuKSk7KWlmKGNbMF0udHJpbSgpKWlmKGNbMV0pe3ZhciBvPWNbMV0udHJpbSgpLGw9W28sXCJcIl07by5pbmRleE9mKFwiPVwiKT4tMSYmKGw9by5zcGxpdChcIj1cIikpLHIuYXR0cnNbbFswXV09bFsxXSxhLmxhc3RJbmRleC0tfWVsc2UgY1syXSYmKHIuYXR0cnNbY1syXV09Y1szXS50cmltKCkuc3Vic3RyaW5nKDEsY1szXS5sZW5ndGgtMSkpO3JldHVybiByfXZhciByPS88W2EtekEtWjAtOVxcLVxcIVxcL10oPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPi9nLGk9L15cXHMqJC8scz1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIGEoZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlXCJ0ZXh0XCI6cmV0dXJuIGUrdC5jb250ZW50O2Nhc2VcInRhZ1wiOnJldHVybiBlKz1cIjxcIit0Lm5hbWUrKHQuYXR0cnM/ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKG4rJz1cIicrZVtuXSsnXCInKTtyZXR1cm4gdC5sZW5ndGg/XCIgXCIrdC5qb2luKFwiIFwiKTpcIlwifSh0LmF0dHJzKTpcIlwiKSsodC52b2lkRWxlbWVudD9cIi8+XCI6XCI+XCIpLHQudm9pZEVsZW1lbnQ/ZTplK3QuY2hpbGRyZW4ucmVkdWNlKGEsXCJcIikrXCI8L1wiK3QubmFtZStcIj5cIjtjYXNlXCJjb21tZW50XCI6cmV0dXJuIGUrXCJcXHgzYyEtLVwiK3QuY29tbWVudCtcIi0tXFx4M2VcIn19dmFyIGM9e3BhcnNlOmZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pLHQuY29tcG9uZW50c3x8KHQuY29tcG9uZW50cz1zKTt2YXIgYSxjPVtdLG89W10sbD0tMSxtPSExO2lmKDAhPT1lLmluZGV4T2YoXCI8XCIpKXt2YXIgdT1lLmluZGV4T2YoXCI8XCIpO2MucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50Oi0xPT09dT9lOmUuc3Vic3RyaW5nKDAsdSl9KX1yZXR1cm4gZS5yZXBsYWNlKHIsZnVuY3Rpb24ocixzKXtpZihtKXtpZihyIT09XCI8L1wiK2EubmFtZStcIj5cIilyZXR1cm47bT0hMX12YXIgdSxmPVwiL1wiIT09ci5jaGFyQXQoMSksaD1yLnN0YXJ0c1dpdGgoXCJcXHgzYyEtLVwiKSxwPXMrci5sZW5ndGgsZD1lLmNoYXJBdChwKTtpZihoKXt2YXIgdj1uKHIpO3JldHVybiBsPDA/KGMucHVzaCh2KSxjKTooKHU9b1tsXSkuY2hpbGRyZW4ucHVzaCh2KSxjKX1pZihmJiYobCsrLFwidGFnXCI9PT0oYT1uKHIpKS50eXBlJiZ0LmNvbXBvbmVudHNbYS5uYW1lXSYmKGEudHlwZT1cImNvbXBvbmVudFwiLG09ITApLGEudm9pZEVsZW1lbnR8fG18fCFkfHxcIjxcIj09PWR8fGEuY2hpbGRyZW4ucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50OmUuc2xpY2UocCxlLmluZGV4T2YoXCI8XCIscCkpfSksMD09PWwmJmMucHVzaChhKSwodT1vW2wtMV0pJiZ1LmNoaWxkcmVuLnB1c2goYSksb1tsXT1hKSwoIWZ8fGEudm9pZEVsZW1lbnQpJiYobD4tMSYmKGEudm9pZEVsZW1lbnR8fGEubmFtZT09PXIuc2xpY2UoMiwtMSkpJiYobC0tLGE9LTE9PT1sP2M6b1tsXSksIW0mJlwiPFwiIT09ZCYmZCkpe3U9LTE9PT1sP2M6b1tsXS5jaGlsZHJlbjt2YXIgeD1lLmluZGV4T2YoXCI8XCIscCksZz1lLnNsaWNlKHAsLTE9PT14P3ZvaWQgMDp4KTtpLnRlc3QoZykmJihnPVwiIFwiKSwoeD4tMSYmbCt1Lmxlbmd0aD49MHx8XCIgXCIhPT1nKSYmdS5wdXNoKHt0eXBlOlwidGV4dFwiLGNvbnRlbnQ6Z30pfX0pLGN9LHN0cmluZ2lmeTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSthKFwiXCIsdCl9LFwiXCIpfX07ZXhwb3J0IGRlZmF1bHQgYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0bWwtcGFyc2Utc3RyaW5naWZ5Lm1vZHVsZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgaXNTdHJpbmcgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG5jb25zdCBkZWZlciA9ICgpID0+IHtcbiAgbGV0IHJlcztcbiAgbGV0IHJlajtcbiAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICByZXMgPSByZXNvbHZlO1xuICAgIHJlaiA9IHJlamVjdDtcbiAgfSk7XG4gIHByb21pc2UucmVzb2x2ZSA9IHJlcztcbiAgcHJvbWlzZS5yZWplY3QgPSByZWo7XG4gIHJldHVybiBwcm9taXNlO1xufTtcbmNvbnN0IG1ha2VTdHJpbmcgPSBvYmplY3QgPT4ge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAnJztcbiAgcmV0dXJuICcnICsgb2JqZWN0O1xufTtcbmNvbnN0IGNvcHkgPSAoYSwgcywgdCkgPT4ge1xuICBhLmZvckVhY2gobSA9PiB7XG4gICAgaWYgKHNbbV0pIHRbbV0gPSBzW21dO1xuICB9KTtcbn07XG5jb25zdCBsYXN0T2ZQYXRoU2VwYXJhdG9yUmVnRXhwID0gLyMjIy9nO1xuY29uc3QgY2xlYW5LZXkgPSBrZXkgPT4ga2V5ICYmIGtleS5pbmRleE9mKCcjIyMnKSA+IC0xID8ga2V5LnJlcGxhY2UobGFzdE9mUGF0aFNlcGFyYXRvclJlZ0V4cCwgJy4nKSA6IGtleTtcbmNvbnN0IGNhbk5vdFRyYXZlcnNlRGVlcGVyID0gb2JqZWN0ID0+ICFvYmplY3QgfHwgaXNTdHJpbmcob2JqZWN0KTtcbmNvbnN0IGdldExhc3RPZlBhdGggPSAob2JqZWN0LCBwYXRoLCBFbXB0eSkgPT4ge1xuICBjb25zdCBzdGFjayA9ICFpc1N0cmluZyhwYXRoKSA/IHBhdGggOiBwYXRoLnNwbGl0KCcuJyk7XG4gIGxldCBzdGFja0luZGV4ID0gMDtcbiAgd2hpbGUgKHN0YWNrSW5kZXggPCBzdGFjay5sZW5ndGggLSAxKSB7XG4gICAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgICBjb25zdCBrZXkgPSBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSk7XG4gICAgaWYgKCFvYmplY3Rba2V5XSAmJiBFbXB0eSkgb2JqZWN0W2tleV0gPSBuZXcgRW1wdHkoKTtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdCA9IHt9O1xuICAgIH1cbiAgICArK3N0YWNrSW5kZXg7XG4gIH1cbiAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBvYmo6IG9iamVjdCxcbiAgICBrOiBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSlcbiAgfTtcbn07XG5jb25zdCBzZXRQYXRoID0gKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkIHx8IHBhdGgubGVuZ3RoID09PSAxKSB7XG4gICAgb2JqW2tdID0gbmV3VmFsdWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBlID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICBsZXQgcCA9IHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgbGV0IGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgd2hpbGUgKGxhc3Qub2JqID09PSB1bmRlZmluZWQgJiYgcC5sZW5ndGgpIHtcbiAgICBlID0gYCR7cFtwLmxlbmd0aCAtIDFdfS4ke2V9YDtcbiAgICBwID0gcC5zbGljZSgwLCBwLmxlbmd0aCAtIDEpO1xuICAgIGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgICBpZiAobGFzdCAmJiBsYXN0Lm9iaiAmJiB0eXBlb2YgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYXN0Lm9iaiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gPSBuZXdWYWx1ZTtcbn07XG5jb25zdCBwdXNoUGF0aCA9IChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlLCBjb25jYXQpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgb2JqW2tdID0gb2JqW2tdIHx8IFtdO1xuICBvYmpba10ucHVzaChuZXdWYWx1ZSk7XG59O1xuY29uc3QgZ2V0UGF0aCA9IChvYmplY3QsIHBhdGgpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCk7XG4gIGlmICghb2JqKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gb2JqW2tdO1xufTtcbmNvbnN0IGdldFBhdGhXaXRoRGVmYXVsdHMgPSAoZGF0YSwgZGVmYXVsdERhdGEsIGtleSkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGdldFBhdGgoZGF0YSwga2V5KTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGdldFBhdGgoZGVmYXVsdERhdGEsIGtleSk7XG59O1xuY29uc3QgZGVlcEV4dGVuZCA9ICh0YXJnZXQsIHNvdXJjZSwgb3ZlcndyaXRlKSA9PiB7XG4gIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCAhPT0gJ19fcHJvdG9fXycgJiYgcHJvcCAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgaWYgKHByb3AgaW4gdGFyZ2V0KSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0YXJnZXRbcHJvcF0pIHx8IHRhcmdldFtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZyB8fCBpc1N0cmluZyhzb3VyY2VbcHJvcF0pIHx8IHNvdXJjZVtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuY29uc3QgcmVnZXhFc2NhcGUgPSBzdHIgPT4gc3RyLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCAnXFxcXCQmJyk7XG52YXIgX2VudGl0eU1hcCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7JyxcbiAgJy8nOiAnJiN4MkY7J1xufTtcbmNvbnN0IGVzY2FwZSA9IGRhdGEgPT4ge1xuICBpZiAoaXNTdHJpbmcoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKC9bJjw+XCInXFwvXS9nLCBzID0+IF9lbnRpdHlNYXBbc10pO1xuICB9XG4gIHJldHVybiBkYXRhO1xufTtcbmNsYXNzIFJlZ0V4cENhY2hlIHtcbiAgY29uc3RydWN0b3IoY2FwYWNpdHkpIHtcbiAgICB0aGlzLmNhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5yZWdFeHBNYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdFeHBRdWV1ZSA9IFtdO1xuICB9XG4gIGdldFJlZ0V4cChwYXR0ZXJuKSB7XG4gICAgY29uc3QgcmVnRXhwRnJvbUNhY2hlID0gdGhpcy5yZWdFeHBNYXAuZ2V0KHBhdHRlcm4pO1xuICAgIGlmIChyZWdFeHBGcm9tQ2FjaGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHJlZ0V4cEZyb21DYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcmVnRXhwTmV3ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICBpZiAodGhpcy5yZWdFeHBRdWV1ZS5sZW5ndGggPT09IHRoaXMuY2FwYWNpdHkpIHtcbiAgICAgIHRoaXMucmVnRXhwTWFwLmRlbGV0ZSh0aGlzLnJlZ0V4cFF1ZXVlLnNoaWZ0KCkpO1xuICAgIH1cbiAgICB0aGlzLnJlZ0V4cE1hcC5zZXQocGF0dGVybiwgcmVnRXhwTmV3KTtcbiAgICB0aGlzLnJlZ0V4cFF1ZXVlLnB1c2gocGF0dGVybik7XG4gICAgcmV0dXJuIHJlZ0V4cE5ldztcbiAgfVxufVxuY29uc3QgY2hhcnMgPSBbJyAnLCAnLCcsICc/JywgJyEnLCAnOyddO1xuY29uc3QgbG9va3NMaWtlT2JqZWN0UGF0aFJlZ0V4cENhY2hlID0gbmV3IFJlZ0V4cENhY2hlKDIwKTtcbmNvbnN0IGxvb2tzTGlrZU9iamVjdFBhdGggPSAoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKSA9PiB7XG4gIG5zU2VwYXJhdG9yID0gbnNTZXBhcmF0b3IgfHwgJyc7XG4gIGtleVNlcGFyYXRvciA9IGtleVNlcGFyYXRvciB8fCAnJztcbiAgY29uc3QgcG9zc2libGVDaGFycyA9IGNoYXJzLmZpbHRlcihjID0+IG5zU2VwYXJhdG9yLmluZGV4T2YoYykgPCAwICYmIGtleVNlcGFyYXRvci5pbmRleE9mKGMpIDwgMCk7XG4gIGlmIChwb3NzaWJsZUNoYXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHIgPSBsb29rc0xpa2VPYmplY3RQYXRoUmVnRXhwQ2FjaGUuZ2V0UmVnRXhwKGAoJHtwb3NzaWJsZUNoYXJzLm1hcChjID0+IGMgPT09ICc/JyA/ICdcXFxcPycgOiBjKS5qb2luKCd8Jyl9KWApO1xuICBsZXQgbWF0Y2hlZCA9ICFyLnRlc3Qoa2V5KTtcbiAgaWYgKCFtYXRjaGVkKSB7XG4gICAgY29uc3Qga2kgPSBrZXkuaW5kZXhPZihrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChraSA+IDAgJiYgIXIudGVzdChrZXkuc3Vic3RyaW5nKDAsIGtpKSkpIHtcbiAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5jb25zdCBkZWVwRmluZCA9IGZ1bmN0aW9uIChvYmosIHBhdGgpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJy4nO1xuICBpZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKG9ialtwYXRoXSkgcmV0dXJuIG9ialtwYXRoXTtcbiAgY29uc3QgdG9rZW5zID0gcGF0aC5zcGxpdChrZXlTZXBhcmF0b3IpO1xuICBsZXQgY3VycmVudCA9IG9iajtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOykge1xuICAgIGlmICghY3VycmVudCB8fCB0eXBlb2YgY3VycmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBuZXh0O1xuICAgIGxldCBuZXh0UGF0aCA9ICcnO1xuICAgIGZvciAobGV0IGogPSBpOyBqIDwgdG9rZW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICBpZiAoaiAhPT0gaSkge1xuICAgICAgICBuZXh0UGF0aCArPSBrZXlTZXBhcmF0b3I7XG4gICAgICB9XG4gICAgICBuZXh0UGF0aCArPSB0b2tlbnNbal07XG4gICAgICBuZXh0ID0gY3VycmVudFtuZXh0UGF0aF07XG4gICAgICBpZiAobmV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddLmluZGV4T2YodHlwZW9mIG5leHQpID4gLTEgJiYgaiA8IHRva2Vucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaSArPSBqIC0gaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjdXJyZW50ID0gbmV4dDtcbiAgfVxuICByZXR1cm4gY3VycmVudDtcbn07XG5jb25zdCBnZXRDbGVhbmVkQ29kZSA9IGNvZGUgPT4gY29kZSAmJiBjb2RlLnJlcGxhY2UoJ18nLCAnLScpO1xuXG5jb25zdCBjb25zb2xlTG9nZ2VyID0ge1xuICB0eXBlOiAnbG9nZ2VyJyxcbiAgbG9nKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnbG9nJywgYXJncyk7XG4gIH0sXG4gIHdhcm4oYXJncykge1xuICAgIHRoaXMub3V0cHV0KCd3YXJuJywgYXJncyk7XG4gIH0sXG4gIGVycm9yKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnZXJyb3InLCBhcmdzKTtcbiAgfSxcbiAgb3V0cHV0KHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlW3R5cGVdKSBjb25zb2xlW3R5cGVdLmFwcGx5KGNvbnNvbGUsIGFyZ3MpO1xuICB9XG59O1xuY2xhc3MgTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uY3JldGVMb2dnZXIpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5pbml0KGNvbmNyZXRlTG9nZ2VyLCBvcHRpb25zKTtcbiAgfVxuICBpbml0KGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMucHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgJ2kxOG5leHQ6JztcbiAgICB0aGlzLmxvZ2dlciA9IGNvbmNyZXRlTG9nZ2VyIHx8IGNvbnNvbGVMb2dnZXI7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmRlYnVnID0gb3B0aW9ucy5kZWJ1ZztcbiAgfVxuICBsb2coKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICdsb2cnLCAnJywgdHJ1ZSk7XG4gIH1cbiAgd2FybigpIHtcbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICcnLCB0cnVlKTtcbiAgfVxuICBlcnJvcigpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnZXJyb3InLCAnJyk7XG4gIH1cbiAgZGVwcmVjYXRlKCkge1xuICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgYXJnc1tfa2V5NF0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICd3YXJuJywgJ1dBUk5JTkcgREVQUkVDQVRFRDogJywgdHJ1ZSk7XG4gIH1cbiAgZm9yd2FyZChhcmdzLCBsdmwsIHByZWZpeCwgZGVidWdPbmx5KSB7XG4gICAgaWYgKGRlYnVnT25seSAmJiAhdGhpcy5kZWJ1ZykgcmV0dXJuIG51bGw7XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhcmdzWzBdID0gYCR7cHJlZml4fSR7dGhpcy5wcmVmaXh9ICR7YXJnc1swXX1gO1xuICAgIHJldHVybiB0aGlzLmxvZ2dlcltsdmxdKGFyZ3MpO1xuICB9XG4gIGNyZWF0ZShtb2R1bGVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIHtcbiAgICAgIC4uLntcbiAgICAgICAgcHJlZml4OiBgJHt0aGlzLnByZWZpeH06JHttb2R1bGVOYW1lfTpgXG4gICAgICB9LFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgY2xvbmUob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9ucztcbiAgICBvcHRpb25zLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8IHRoaXMucHJlZml4O1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCBvcHRpb25zKTtcbiAgfVxufVxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gIH1cbiAgb24oZXZlbnRzLCBsaXN0ZW5lcikge1xuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IG51bUxpc3RlbmVycyA9IHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5nZXQobGlzdGVuZXIpIHx8IDA7XG4gICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uc2V0KGxpc3RlbmVyLCBudW1MaXN0ZW5lcnMgKyAxKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHJldHVybjtcbiAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uZGVsZXRlKGxpc3RlbmVyKTtcbiAgfVxuICBlbWl0KGV2ZW50KSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbZXZlbnRdLmVudHJpZXMoKSk7XG4gICAgICBjbG9uZWQuZm9yRWFjaChfcmVmID0+IHtcbiAgICAgICAgbGV0IFtvYnNlcnZlciwgbnVtVGltZXNBZGRlZF0gPSBfcmVmO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbJyonXS5lbnRyaWVzKCkpO1xuICAgICAgY2xvbmVkLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICBsZXQgW29ic2VydmVyLCBudW1UaW1lc0FkZGVkXSA9IF9yZWYyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyLmFwcGx5KG9ic2VydmVyLCBbZXZlbnQsIC4uLmFyZ3NdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFJlc291cmNlU3RvcmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gICAgICBkZWZhdWx0TlM6ICd0cmFuc2xhdGlvbidcbiAgICB9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPSAnLic7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGFkZE5hbWVzcGFjZXMobnMpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpIDwgMCkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnB1c2gobnMpO1xuICAgIH1cbiAgfVxuICByZW1vdmVOYW1lc3BhY2VzKG5zKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihucyk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuICBnZXRSZXNvdXJjZShsbmcsIG5zLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCBpZ25vcmVKU09OU3RydWN0dXJlID0gb3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgOiB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZTtcbiAgICBsZXQgcGF0aDtcbiAgICBpZiAobG5nLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICBwYXRoID0gbG5nLnNwbGl0KCcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGggPSBbbG5nLCBuc107XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5KTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1N0cmluZyhrZXkpICYmIGtleVNlcGFyYXRvcikge1xuICAgICAgICAgIHBhdGgucHVzaCguLi5rZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpO1xuICAgIGlmICghcmVzdWx0ICYmICFucyAmJiAha2V5ICYmIGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgbG5nID0gcGF0aFswXTtcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICAgIGtleSA9IHBhdGguc2xpY2UoMikuam9pbignLicpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0IHx8ICFpZ25vcmVKU09OU3RydWN0dXJlIHx8ICFpc1N0cmluZyhrZXkpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBkZWVwRmluZCh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhW2xuZ10gJiYgdGhpcy5kYXRhW2xuZ11bbnNdLCBrZXksIGtleVNlcGFyYXRvcik7XG4gIH1cbiAgYWRkUmVzb3VyY2UobG5nLCBucywga2V5LCB2YWx1ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChrZXkpIHBhdGggPSBwYXRoLmNvbmNhdChrZXlTZXBhcmF0b3IgPyBrZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSA6IGtleSk7XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgdmFsdWUgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBzZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCwgdmFsdWUpO1xuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCBrZXksIHZhbHVlKTtcbiAgfVxuICBhZGRSZXNvdXJjZXMobG5nLCBucywgcmVzb3VyY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2VcbiAgICB9O1xuICAgIGZvciAoY29uc3QgbSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIGlmIChpc1N0cmluZyhyZXNvdXJjZXNbbV0pIHx8IEFycmF5LmlzQXJyYXkocmVzb3VyY2VzW21dKSkgdGhpcy5hZGRSZXNvdXJjZShsbmcsIG5zLCBtLCByZXNvdXJjZXNbbV0sIHtcbiAgICAgICAgc2lsZW50OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy5lbWl0KCdhZGRlZCcsIGxuZywgbnMsIHJlc291cmNlcyk7XG4gIH1cbiAgYWRkUmVzb3VyY2VCdW5kbGUobG5nLCBucywgcmVzb3VyY2VzLCBkZWVwLCBvdmVyd3JpdGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDoge1xuICAgICAgc2lsZW50OiBmYWxzZSxcbiAgICAgIHNraXBDb3B5OiBmYWxzZVxuICAgIH07XG4gICAgbGV0IHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgZGVlcCA9IHJlc291cmNlcztcbiAgICAgIHJlc291cmNlcyA9IG5zO1xuICAgICAgbnMgPSBwYXRoWzFdO1xuICAgIH1cbiAgICB0aGlzLmFkZE5hbWVzcGFjZXMobnMpO1xuICAgIGxldCBwYWNrID0gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpIHx8IHt9O1xuICAgIGlmICghb3B0aW9ucy5za2lwQ29weSkgcmVzb3VyY2VzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNvdXJjZXMpKTtcbiAgICBpZiAoZGVlcCkge1xuICAgICAgZGVlcEV4dGVuZChwYWNrLCByZXNvdXJjZXMsIG92ZXJ3cml0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhY2sgPSB7XG4gICAgICAgIC4uLnBhY2ssXG4gICAgICAgIC4uLnJlc291cmNlc1xuICAgICAgfTtcbiAgICB9XG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHBhY2spO1xuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9XG4gIHJlbW92ZVJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAodGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgZGVsZXRlIHRoaXMuZGF0YVtsbmddW25zXTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVOYW1lc3BhY2VzKG5zKTtcbiAgICB0aGlzLmVtaXQoJ3JlbW92ZWQnLCBsbmcsIG5zKTtcbiAgfVxuICBoYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucykgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBnZXRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKCFucykgbnMgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgcmV0dXJuIHtcbiAgICAgIC4uLnt9LFxuICAgICAgLi4udGhpcy5nZXRSZXNvdXJjZShsbmcsIG5zKVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucyk7XG4gIH1cbiAgZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVtsbmddO1xuICB9XG4gIGhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyhsbmcpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhQnlMYW5ndWFnZShsbmcpO1xuICAgIGNvbnN0IG4gPSBkYXRhICYmIE9iamVjdC5rZXlzKGRhdGEpIHx8IFtdO1xuICAgIHJldHVybiAhIW4uZmluZCh2ID0+IGRhdGFbdl0gJiYgT2JqZWN0LmtleXMoZGF0YVt2XSkubGVuZ3RoID4gMCk7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cbn1cblxudmFyIHBvc3RQcm9jZXNzb3IgPSB7XG4gIHByb2Nlc3NvcnM6IHt9LFxuICBhZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSkge1xuICAgIHRoaXMucHJvY2Vzc29yc1ttb2R1bGUubmFtZV0gPSBtb2R1bGU7XG4gIH0sXG4gIGhhbmRsZShwcm9jZXNzb3JzLCB2YWx1ZSwga2V5LCBvcHRpb25zLCB0cmFuc2xhdG9yKSB7XG4gICAgcHJvY2Vzc29ycy5mb3JFYWNoKHByb2Nlc3NvciA9PiB7XG4gICAgICBpZiAodGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0pIHZhbHVlID0gdGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0ucHJvY2Vzcyh2YWx1ZSwga2V5LCBvcHRpb25zLCB0cmFuc2xhdG9yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmNvbnN0IGNoZWNrZWRMb2FkZWRGb3IgPSB7fTtcbmNsYXNzIFRyYW5zbGF0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihzZXJ2aWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBzdXBlcigpO1xuICAgIGNvcHkoWydyZXNvdXJjZVN0b3JlJywgJ2xhbmd1YWdlVXRpbHMnLCAncGx1cmFsUmVzb2x2ZXInLCAnaW50ZXJwb2xhdG9yJywgJ2JhY2tlbmRDb25uZWN0b3InLCAnaTE4bkZvcm1hdCcsICd1dGlscyddLCBzZXJ2aWNlcywgdGhpcyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpZiAodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID0gJy4nO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCd0cmFuc2xhdG9yJyk7XG4gIH1cbiAgY2hhbmdlTGFuZ3VhZ2UobG5nKSB7XG4gICAgaWYgKGxuZykgdGhpcy5sYW5ndWFnZSA9IGxuZztcbiAgfVxuICBleGlzdHMoa2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIGludGVycG9sYXRpb246IHt9XG4gICAgfTtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc29sdmVkICYmIHJlc29sdmVkLnJlcyAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIGV4dHJhY3RGcm9tS2V5KGtleSwgb3B0aW9ucykge1xuICAgIGxldCBuc1NlcGFyYXRvciA9IG9wdGlvbnMubnNTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgaWYgKG5zU2VwYXJhdG9yID09PSB1bmRlZmluZWQpIG5zU2VwYXJhdG9yID0gJzonO1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgbGV0IG5hbWVzcGFjZXMgPSBvcHRpb25zLm5zIHx8IHRoaXMub3B0aW9ucy5kZWZhdWx0TlMgfHwgW107XG4gICAgY29uc3Qgd291bGRDaGVja0Zvck5zSW5LZXkgPSBuc1NlcGFyYXRvciAmJiBrZXkuaW5kZXhPZihuc1NlcGFyYXRvcikgPiAtMTtcbiAgICBjb25zdCBzZWVtc05hdHVyYWxMYW5ndWFnZSA9ICF0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3IgJiYgIW9wdGlvbnMua2V5U2VwYXJhdG9yICYmICF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciAmJiAhb3B0aW9ucy5uc1NlcGFyYXRvciAmJiAhbG9va3NMaWtlT2JqZWN0UGF0aChrZXksIG5zU2VwYXJhdG9yLCBrZXlTZXBhcmF0b3IpO1xuICAgIGlmICh3b3VsZENoZWNrRm9yTnNJbktleSAmJiAhc2VlbXNOYXR1cmFsTGFuZ3VhZ2UpIHtcbiAgICAgIGNvbnN0IG0gPSBrZXkubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7XG4gICAgICBpZiAobSAmJiBtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgbmFtZXNwYWNlczogaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdChuc1NlcGFyYXRvcik7XG4gICAgICBpZiAobnNTZXBhcmF0b3IgIT09IGtleVNlcGFyYXRvciB8fCBuc1NlcGFyYXRvciA9PT0ga2V5U2VwYXJhdG9yICYmIHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKHBhcnRzWzBdKSA+IC0xKSBuYW1lc3BhY2VzID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIGtleSA9IHBhcnRzLmpvaW4oa2V5U2VwYXJhdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIG5hbWVzcGFjZXM6IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlc1xuICAgIH07XG4gIH1cbiAgdHJhbnNsYXRlKGtleXMsIG9wdGlvbnMsIGxhc3RLZXkpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnICYmIHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcikge1xuICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSBvcHRpb25zID0ge1xuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgaWYgKGtleXMgPT09IHVuZGVmaW5lZCB8fCBrZXlzID09PSBudWxsKSByZXR1cm4gJyc7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSBrZXlzID0gW1N0cmluZyhrZXlzKV07XG4gICAgY29uc3QgcmV0dXJuRGV0YWlscyA9IG9wdGlvbnMucmV0dXJuRGV0YWlscyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZXR1cm5EZXRhaWxzIDogdGhpcy5vcHRpb25zLnJldHVybkRldGFpbHM7XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzXG4gICAgfSA9IHRoaXMuZXh0cmFjdEZyb21LZXkoa2V5c1trZXlzLmxlbmd0aCAtIDFdLCBvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBuYW1lc3BhY2VzW25hbWVzcGFjZXMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbG5nID0gb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZTtcbiAgICBjb25zdCBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSA9IG9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgfHwgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO1xuICAgIGlmIChsbmcgJiYgbG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSB7XG4gICAgICBpZiAoYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUpIHtcbiAgICAgICAgY29uc3QgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzOiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gLFxuICAgICAgICAgICAgdXNlZEtleToga2V5LFxuICAgICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgICB1c2VkTG5nOiBsbmcsXG4gICAgICAgICAgICB1c2VkTlM6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gO1xuICAgICAgfVxuICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXM6IGtleSxcbiAgICAgICAgICB1c2VkS2V5OiBrZXksXG4gICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgdXNlZExuZzogbG5nLFxuICAgICAgICAgIHVzZWROUzogbmFtZXNwYWNlLFxuICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleXMsIG9wdGlvbnMpO1xuICAgIGxldCByZXMgPSByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXM7XG4gICAgY29uc3QgcmVzVXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLnVzZWRLZXkgfHwga2V5O1xuICAgIGNvbnN0IHJlc0V4YWN0VXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLmV4YWN0VXNlZEtleSB8fCBrZXk7XG4gICAgY29uc3QgcmVzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkocmVzKTtcbiAgICBjb25zdCBub09iamVjdCA9IFsnW29iamVjdCBOdW1iZXJdJywgJ1tvYmplY3QgRnVuY3Rpb25dJywgJ1tvYmplY3QgUmVnRXhwXSddO1xuICAgIGNvbnN0IGpvaW5BcnJheXMgPSBvcHRpb25zLmpvaW5BcnJheXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuam9pbkFycmF5cyA6IHRoaXMub3B0aW9ucy5qb2luQXJyYXlzO1xuICAgIGNvbnN0IGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ID0gIXRoaXMuaTE4bkZvcm1hdCB8fCB0aGlzLmkxOG5Gb3JtYXQuaGFuZGxlQXNPYmplY3Q7XG4gICAgY29uc3QgaGFuZGxlQXNPYmplY3QgPSAhaXNTdHJpbmcocmVzKSAmJiB0eXBlb2YgcmVzICE9PSAnYm9vbGVhbicgJiYgdHlwZW9mIHJlcyAhPT0gJ251bWJlcic7XG4gICAgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIHJlcyAmJiBoYW5kbGVBc09iamVjdCAmJiBub09iamVjdC5pbmRleE9mKHJlc1R5cGUpIDwgMCAmJiAhKGlzU3RyaW5nKGpvaW5BcnJheXMpICYmIEFycmF5LmlzQXJyYXkocmVzKSkpIHtcbiAgICAgIGlmICghb3B0aW9ucy5yZXR1cm5PYmplY3RzICYmICF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cykge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA/IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIocmVzVXNlZEtleSwgcmVzLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICB9KSA6IGBrZXkgJyR7a2V5fSAoJHt0aGlzLmxhbmd1YWdlfSknIHJldHVybmVkIGFuIG9iamVjdCBpbnN0ZWFkIG9mIHN0cmluZy5gO1xuICAgICAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgICAgIHJlc29sdmVkLnJlcyA9IHI7XG4gICAgICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfVxuICAgICAgaWYgKGtleVNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCByZXNUeXBlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkocmVzKTtcbiAgICAgICAgY29uc3QgY29weSA9IHJlc1R5cGVJc0FycmF5ID8gW10gOiB7fTtcbiAgICAgICAgY29uc3QgbmV3S2V5VG9Vc2UgPSByZXNUeXBlSXNBcnJheSA/IHJlc0V4YWN0VXNlZEtleSA6IHJlc1VzZWRLZXk7XG4gICAgICAgIGZvciAoY29uc3QgbSBpbiByZXMpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcywgbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZXBLZXkgPSBgJHtuZXdLZXlUb1VzZX0ke2tleVNlcGFyYXRvcn0ke219YDtcbiAgICAgICAgICAgIGNvcHlbbV0gPSB0aGlzLnRyYW5zbGF0ZShkZWVwS2V5LCB7XG4gICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3B5W21dID09PSBkZWVwS2V5KSBjb3B5W21dID0gcmVzW21dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMgPSBjb3B5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlQXNPYmplY3RJbkkxOG5Gb3JtYXQgJiYgaXNTdHJpbmcoam9pbkFycmF5cykgJiYgQXJyYXkuaXNBcnJheShyZXMpKSB7XG4gICAgICByZXMgPSByZXMuam9pbihqb2luQXJyYXlzKTtcbiAgICAgIGlmIChyZXMpIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXlzLCBvcHRpb25zLCBsYXN0S2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHVzZWREZWZhdWx0ID0gZmFsc2U7XG4gICAgICBsZXQgdXNlZEtleSA9IGZhbHNlO1xuICAgICAgY29uc3QgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiAhaXNTdHJpbmcob3B0aW9ucy5jb3VudCk7XG4gICAgICBjb25zdCBoYXNEZWZhdWx0VmFsdWUgPSBUcmFuc2xhdG9yLmhhc0RlZmF1bHRWYWx1ZShvcHRpb25zKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZVN1ZmZpeCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgPyB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChsbmcsIG9wdGlvbnMuY291bnQsIG9wdGlvbnMpIDogJyc7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWVTdWZmaXhPcmRpbmFsRmFsbGJhY2sgPSBvcHRpb25zLm9yZGluYWwgJiYgbmVlZHNQbHVyYWxIYW5kbGluZyA/IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGxuZywgb3B0aW9ucy5jb3VudCwge1xuICAgICAgICBvcmRpbmFsOiBmYWxzZVxuICAgICAgfSkgOiAnJztcbiAgICAgIGNvbnN0IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgJiYgIW9wdGlvbnMub3JkaW5hbCAmJiBvcHRpb25zLmNvdW50ID09PSAwICYmIHRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gbmVlZHNaZXJvU3VmZml4TG9va3VwICYmIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYF0gfHwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtkZWZhdWx0VmFsdWVTdWZmaXh9YF0gfHwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtkZWZhdWx0VmFsdWVTdWZmaXhPcmRpbmFsRmFsbGJhY2t9YF0gfHwgb3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpICYmIGhhc0RlZmF1bHRWYWx1ZSkge1xuICAgICAgICB1c2VkRGVmYXVsdCA9IHRydWU7XG4gICAgICAgIHJlcyA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKHJlcykpIHtcbiAgICAgICAgdXNlZEtleSA9IHRydWU7XG4gICAgICAgIHJlcyA9IGtleTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSA9IG9wdGlvbnMubWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5IHx8IHRoaXMub3B0aW9ucy5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXk7XG4gICAgICBjb25zdCByZXNGb3JNaXNzaW5nID0gbWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5ICYmIHVzZWRLZXkgPyB1bmRlZmluZWQgOiByZXM7XG4gICAgICBjb25zdCB1cGRhdGVNaXNzaW5nID0gaGFzRGVmYXVsdFZhbHVlICYmIGRlZmF1bHRWYWx1ZSAhPT0gcmVzICYmIHRoaXMub3B0aW9ucy51cGRhdGVNaXNzaW5nO1xuICAgICAgaWYgKHVzZWRLZXkgfHwgdXNlZERlZmF1bHQgfHwgdXBkYXRlTWlzc2luZykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2codXBkYXRlTWlzc2luZyA/ICd1cGRhdGVLZXknIDogJ21pc3NpbmdLZXknLCBsbmcsIG5hbWVzcGFjZSwga2V5LCB1cGRhdGVNaXNzaW5nID8gZGVmYXVsdFZhbHVlIDogcmVzKTtcbiAgICAgICAgaWYgKGtleVNlcGFyYXRvcikge1xuICAgICAgICAgIGNvbnN0IGZrID0gdGhpcy5yZXNvbHZlKGtleSwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGtleVNlcGFyYXRvcjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZmsgJiYgZmsucmVzKSB0aGlzLmxvZ2dlci53YXJuKCdTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxuZ3MgPSBbXTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tMbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnZmFsbGJhY2snICYmIGZhbGxiYWNrTG5ncyAmJiBmYWxsYmFja0xuZ3NbMF0pIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZhbGxiYWNrTG5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbG5ncy5wdXNoKGZhbGxiYWNrTG5nc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnYWxsJykge1xuICAgICAgICAgIGxuZ3MgPSB0aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxuZ3MucHVzaChvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZW5kID0gKGwsIGssIHNwZWNpZmljRGVmYXVsdFZhbHVlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdEZvck1pc3NpbmcgPSBoYXNEZWZhdWx0VmFsdWUgJiYgc3BlY2lmaWNEZWZhdWx0VmFsdWUgIT09IHJlcyA/IHNwZWNpZmljRGVmYXVsdFZhbHVlIDogcmVzRm9yTWlzc2luZztcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIobCwgbmFtZXNwYWNlLCBrLCBkZWZhdWx0Rm9yTWlzc2luZywgdXBkYXRlTWlzc2luZywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhY2tlbmRDb25uZWN0b3IgJiYgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcobCwgbmFtZXNwYWNlLCBrLCBkZWZhdWx0Rm9yTWlzc2luZywgdXBkYXRlTWlzc2luZywgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZW1pdCgnbWlzc2luZ0tleScsIGwsIG5hbWVzcGFjZSwgaywgcmVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZykge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdQbHVyYWxzICYmIG5lZWRzUGx1cmFsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGxuZ3MuZm9yRWFjaChsYW5ndWFnZSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHN1ZmZpeGVzID0gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXhlcyhsYW5ndWFnZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXAgJiYgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gXSAmJiBzdWZmaXhlcy5pbmRleE9mKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApIDwgMCkge1xuICAgICAgICAgICAgICAgIHN1ZmZpeGVzLnB1c2goYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3VmZml4ZXMuZm9yRWFjaChzdWZmaXggPT4ge1xuICAgICAgICAgICAgICAgIHNlbmQoW2xhbmd1YWdlXSwga2V5ICsgc3VmZml4LCBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3N1ZmZpeH1gXSB8fCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kKGxuZ3MsIGtleSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXlzLCBvcHRpb25zLCByZXNvbHZlZCwgbGFzdEtleSk7XG4gICAgICBpZiAodXNlZEtleSAmJiByZXMgPT09IGtleSAmJiB0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5KSByZXMgPSBgJHtuYW1lc3BhY2V9OiR7a2V5fWA7XG4gICAgICBpZiAoKHVzZWRLZXkgfHwgdXNlZERlZmF1bHQpICYmIHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJykge1xuICAgICAgICAgIHJlcyA9IHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkgPyBgJHtuYW1lc3BhY2V9OiR7a2V5fWAgOiBrZXksIHVzZWREZWZhdWx0ID8gcmVzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcihyZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICByZXNvbHZlZC5yZXMgPSByZXM7XG4gICAgICByZXNvbHZlZC51c2VkUGFyYW1zID0gdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKTtcbiAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICBleHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleSwgb3B0aW9ucywgcmVzb2x2ZWQsIGxhc3RLZXkpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LnBhcnNlKSB7XG4gICAgICByZXMgPSB0aGlzLmkxOG5Gb3JtYXQucGFyc2UocmVzLCB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0sIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZywgcmVzb2x2ZWQudXNlZE5TLCByZXNvbHZlZC51c2VkS2V5LCB7XG4gICAgICAgIHJlc29sdmVkXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFvcHRpb25zLnNraXBJbnRlcnBvbGF0aW9uKSB7XG4gICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5pbml0KHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLi4ue1xuICAgICAgICAgIGludGVycG9sYXRpb246IHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHNraXBPblZhcmlhYmxlcyA9IGlzU3RyaW5nKHJlcykgJiYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgOiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpO1xuICAgICAgbGV0IG5lc3RCZWY7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5iID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBuZXN0QmVmID0gbmIgJiYgbmIubGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgIWlzU3RyaW5nKG9wdGlvbnMucmVwbGFjZSkgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIGRhdGEgPSB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgICByZXMgPSB0aGlzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShyZXMsIGRhdGEsIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZywgb3B0aW9ucyk7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5hID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBjb25zdCBuZXN0QWZ0ID0gbmEgJiYgbmEubGVuZ3RoO1xuICAgICAgICBpZiAobmVzdEJlZiA8IG5lc3RBZnQpIG9wdGlvbnMubmVzdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLmxuZyAmJiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJyAmJiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMpIG9wdGlvbnMubG5nID0gdGhpcy5sYW5ndWFnZSB8fCByZXNvbHZlZC51c2VkTG5nO1xuICAgICAgaWYgKG9wdGlvbnMubmVzdCAhPT0gZmFsc2UpIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLm5lc3QocmVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RLZXkgJiYgbGFzdEtleVswXSA9PT0gYXJnc1swXSAmJiAhb3B0aW9ucy5jb250ZXh0KSB7XG4gICAgICAgICAgX3RoaXMubG9nZ2VyLndhcm4oYEl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICR7YXJnc1swXX0gaW4ga2V5OiAke2tleVswXX1gKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXMudHJhbnNsYXRlKC4uLmFyZ3MsIGtleSk7XG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCk7XG4gICAgfVxuICAgIGNvbnN0IHBvc3RQcm9jZXNzID0gb3B0aW9ucy5wb3N0UHJvY2VzcyB8fCB0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3M7XG4gICAgY29uc3QgcG9zdFByb2Nlc3Nvck5hbWVzID0gaXNTdHJpbmcocG9zdFByb2Nlc3MpID8gW3Bvc3RQcm9jZXNzXSA6IHBvc3RQcm9jZXNzO1xuICAgIGlmIChyZXMgIT09IHVuZGVmaW5lZCAmJiByZXMgIT09IG51bGwgJiYgcG9zdFByb2Nlc3Nvck5hbWVzICYmIHBvc3RQcm9jZXNzb3JOYW1lcy5sZW5ndGggJiYgb3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgIT09IGZhbHNlKSB7XG4gICAgICByZXMgPSBwb3N0UHJvY2Vzc29yLmhhbmRsZShwb3N0UHJvY2Vzc29yTmFtZXMsIHJlcywga2V5LCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkID8ge1xuICAgICAgICBpMThuUmVzb2x2ZWQ6IHtcbiAgICAgICAgICAuLi5yZXNvbHZlZCxcbiAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgIH0sXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0gOiBvcHRpb25zLCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXNvbHZlKGtleXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgbGV0IGZvdW5kO1xuICAgIGxldCB1c2VkS2V5O1xuICAgIGxldCBleGFjdFVzZWRLZXk7XG4gICAgbGV0IHVzZWRMbmc7XG4gICAgbGV0IHVzZWROUztcbiAgICBpZiAoaXNTdHJpbmcoa2V5cykpIGtleXMgPSBba2V5c107XG4gICAga2V5cy5mb3JFYWNoKGsgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcbiAgICAgIGNvbnN0IGV4dHJhY3RlZCA9IHRoaXMuZXh0cmFjdEZyb21LZXkoaywgb3B0aW9ucyk7XG4gICAgICBjb25zdCBrZXkgPSBleHRyYWN0ZWQua2V5O1xuICAgICAgdXNlZEtleSA9IGtleTtcbiAgICAgIGxldCBuYW1lc3BhY2VzID0gZXh0cmFjdGVkLm5hbWVzcGFjZXM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrTlMpIG5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMuZmFsbGJhY2tOUyk7XG4gICAgICBjb25zdCBuZWVkc1BsdXJhbEhhbmRsaW5nID0gb3B0aW9ucy5jb3VudCAhPT0gdW5kZWZpbmVkICYmICFpc1N0cmluZyhvcHRpb25zLmNvdW50KTtcbiAgICAgIGNvbnN0IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgJiYgIW9wdGlvbnMub3JkaW5hbCAmJiBvcHRpb25zLmNvdW50ID09PSAwICYmIHRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpO1xuICAgICAgY29uc3QgbmVlZHNDb250ZXh0SGFuZGxpbmcgPSBvcHRpb25zLmNvbnRleHQgIT09IHVuZGVmaW5lZCAmJiAoaXNTdHJpbmcob3B0aW9ucy5jb250ZXh0KSB8fCB0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnbnVtYmVyJykgJiYgb3B0aW9ucy5jb250ZXh0ICE9PSAnJztcbiAgICAgIGNvbnN0IGNvZGVzID0gb3B0aW9ucy5sbmdzID8gb3B0aW9ucy5sbmdzIDogdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlLCBvcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICAgIHVzZWROUyA9IG5zO1xuICAgICAgICBpZiAoIWNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gJiYgdGhpcy51dGlscyAmJiB0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UodXNlZE5TKSkge1xuICAgICAgICAgIGNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gPSB0cnVlO1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGtleSBcIiR7dXNlZEtleX1cIiBmb3IgbGFuZ3VhZ2VzIFwiJHtjb2Rlcy5qb2luKCcsICcpfVwiIHdvbid0IGdldCByZXNvbHZlZCBhcyBuYW1lc3BhY2UgXCIke3VzZWROU31cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgICAgIHVzZWRMbmcgPSBjb2RlO1xuICAgICAgICAgIGNvbnN0IGZpbmFsS2V5cyA9IFtrZXldO1xuICAgICAgICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMpIHtcbiAgICAgICAgICAgIHRoaXMuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKGZpbmFsS2V5cywga2V5LCBjb2RlLCBucywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwbHVyYWxTdWZmaXg7XG4gICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykgcGx1cmFsU3VmZml4ID0gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoY29kZSwgb3B0aW9ucy5jb3VudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCB6ZXJvU3VmZml4ID0gYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYDtcbiAgICAgICAgICAgIGNvbnN0IG9yZGluYWxQcmVmaXggPSBgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfW9yZGluYWwke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9YDtcbiAgICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHBsdXJhbFN1ZmZpeCk7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG5lZWRzWmVyb1N1ZmZpeExvb2t1cCkge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHplcm9TdWZmaXgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZHNDb250ZXh0SGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGV4dEtleSA9IGAke2tleX0ke3RoaXMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yfSR7b3B0aW9ucy5jb250ZXh0fWA7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyB6ZXJvU3VmZml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHBvc3NpYmxlS2V5O1xuICAgICAgICAgIHdoaWxlIChwb3NzaWJsZUtleSA9IGZpbmFsS2V5cy5wb3AoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSB7XG4gICAgICAgICAgICAgIGV4YWN0VXNlZEtleSA9IHBvc3NpYmxlS2V5O1xuICAgICAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIHBvc3NpYmxlS2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlczogZm91bmQsXG4gICAgICB1c2VkS2V5LFxuICAgICAgZXhhY3RVc2VkS2V5LFxuICAgICAgdXNlZExuZyxcbiAgICAgIHVzZWROU1xuICAgIH07XG4gIH1cbiAgaXNWYWxpZExvb2t1cChyZXMpIHtcbiAgICByZXR1cm4gcmVzICE9PSB1bmRlZmluZWQgJiYgISghdGhpcy5vcHRpb25zLnJldHVybk51bGwgJiYgcmVzID09PSBudWxsKSAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuRW1wdHlTdHJpbmcgJiYgcmVzID09PSAnJyk7XG4gIH1cbiAgZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZSkgcmV0dXJuIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZShjb2RlLCBucywga2V5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICB9XG4gIGdldFVzZWRQYXJhbXNEZXRhaWxzKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjb25zdCBvcHRpb25zS2V5cyA9IFsnZGVmYXVsdFZhbHVlJywgJ29yZGluYWwnLCAnY29udGV4dCcsICdyZXBsYWNlJywgJ2xuZycsICdsbmdzJywgJ2ZhbGxiYWNrTG5nJywgJ25zJywgJ2tleVNlcGFyYXRvcicsICduc1NlcGFyYXRvcicsICdyZXR1cm5PYmplY3RzJywgJ3JldHVybkRldGFpbHMnLCAnam9pbkFycmF5cycsICdwb3N0UHJvY2VzcycsICdpbnRlcnBvbGF0aW9uJ107XG4gICAgY29uc3QgdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID0gb3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhvcHRpb25zLnJlcGxhY2UpO1xuICAgIGxldCBkYXRhID0gdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID8gb3B0aW9ucy5yZXBsYWNlIDogb3B0aW9ucztcbiAgICBpZiAodXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhICYmIHR5cGVvZiBvcHRpb25zLmNvdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5jb3VudCA9IG9wdGlvbnMuY291bnQ7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIG9wdGlvbnNLZXlzKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHN0YXRpYyBoYXNEZWZhdWx0VmFsdWUob3B0aW9ucykge1xuICAgIGNvbnN0IHByZWZpeCA9ICdkZWZhdWx0VmFsdWUnO1xuICAgIGZvciAoY29uc3Qgb3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywgb3B0aW9uKSAmJiBwcmVmaXggPT09IG9wdGlvbi5zdWJzdHJpbmcoMCwgcHJlZml4Lmxlbmd0aCkgJiYgdW5kZWZpbmVkICE9PSBvcHRpb25zW29wdGlvbl0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jb25zdCBjYXBpdGFsaXplID0gc3RyaW5nID0+IHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbmNsYXNzIExhbmd1YWdlVXRpbCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3VwcG9ydGVkTG5ncyA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzIHx8IGZhbHNlO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2xhbmd1YWdlVXRpbHMnKTtcbiAgfVxuICBnZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGNvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlKTtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIGlmIChwLmxlbmd0aCA9PT0gMikgcmV0dXJuIG51bGw7XG4gICAgcC5wb3AoKTtcbiAgICBpZiAocFtwLmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHAuam9pbignLScpKTtcbiAgfVxuICBnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgY29kZSA9IGdldENsZWFuZWRDb2RlKGNvZGUpO1xuICAgIGlmICghY29kZSB8fCBjb2RlLmluZGV4T2YoJy0nKSA8IDApIHJldHVybiBjb2RlO1xuICAgIGNvbnN0IHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHBbMF0pO1xuICB9XG4gIGZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSB7XG4gICAgaWYgKGlzU3RyaW5nKGNvZGUpICYmIGNvZGUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIGlmICh0eXBlb2YgSW50bCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEludGwuZ2V0Q2Fub25pY2FsTG9jYWxlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgZm9ybWF0dGVkQ29kZSA9IEludGwuZ2V0Q2Fub25pY2FsTG9jYWxlcyhjb2RlKVswXTtcbiAgICAgICAgICBpZiAoZm9ybWF0dGVkQ29kZSAmJiB0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRDb2RlID0gZm9ybWF0dGVkQ29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm9ybWF0dGVkQ29kZSkgcmV0dXJuIGZvcm1hdHRlZENvZGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgICBjb25zdCBzcGVjaWFsQ2FzZXMgPSBbJ2hhbnMnLCAnaGFudCcsICdsYXRuJywgJ2N5cmwnLCAnY2FucycsICdtb25nJywgJ2FyYWInXTtcbiAgICAgIGxldCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcpIHtcbiAgICAgICAgcCA9IHAubWFwKHBhcnQgPT4gcGFydC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMV0ubGVuZ3RoID09PSAyKSBwWzFdID0gcFsxXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAocFswXSAhPT0gJ3NnbicgJiYgcFsyXS5sZW5ndGggPT09IDIpIHBbMl0gPSBwWzJdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzJdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMl0gPSBjYXBpdGFsaXplKHBbMl0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcC5qb2luKCctJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xlYW5Db2RlIHx8IHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcgPyBjb2RlLnRvTG93ZXJDYXNlKCkgOiBjb2RlO1xuICB9XG4gIGlzU3VwcG9ydGVkQ29kZShjb2RlKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkID09PSAnbGFuZ3VhZ2VPbmx5JyB8fCB0aGlzLm9wdGlvbnMubm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzKSB7XG4gICAgICBjb2RlID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuICF0aGlzLnN1cHBvcnRlZExuZ3MgfHwgIXRoaXMuc3VwcG9ydGVkTG5ncy5sZW5ndGggfHwgdGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoY29kZSkgPiAtMTtcbiAgfVxuICBnZXRCZXN0TWF0Y2hGcm9tQ29kZXMoY29kZXMpIHtcbiAgICBpZiAoIWNvZGVzKSByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm91bmQ7XG4gICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgY29uc3QgY2xlYW5lZExuZyA9IHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyB8fCB0aGlzLmlzU3VwcG9ydGVkQ29kZShjbGVhbmVkTG5nKSkgZm91bmQgPSBjbGVhbmVkTG5nO1xuICAgIH0pO1xuICAgIGlmICghZm91bmQgJiYgdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MpIHtcbiAgICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdPbmx5ID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGxuZ09ubHkpKSByZXR1cm4gZm91bmQgPSBsbmdPbmx5O1xuICAgICAgICBmb3VuZCA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmZpbmQoc3VwcG9ydGVkTG5nID0+IHtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nID09PSBsbmdPbmx5KSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZignLScpIDwgMCAmJiBsbmdPbmx5LmluZGV4T2YoJy0nKSA8IDApIHJldHVybjtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSA+IDAgJiYgbG5nT25seS5pbmRleE9mKCctJykgPCAwICYmIHN1cHBvcnRlZExuZy5zdWJzdHJpbmcoMCwgc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSkgPT09IGxuZ09ubHkpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKGxuZ09ubHkpID09PSAwICYmIGxuZ09ubHkubGVuZ3RoID4gMSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXTtcbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgZ2V0RmFsbGJhY2tDb2RlcyhmYWxsYmFja3MsIGNvZGUpIHtcbiAgICBpZiAoIWZhbGxiYWNrcykgcmV0dXJuIFtdO1xuICAgIGlmICh0eXBlb2YgZmFsbGJhY2tzID09PSAnZnVuY3Rpb24nKSBmYWxsYmFja3MgPSBmYWxsYmFja3MoY29kZSk7XG4gICAgaWYgKGlzU3RyaW5nKGZhbGxiYWNrcykpIGZhbGxiYWNrcyA9IFtmYWxsYmFja3NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZhbGxiYWNrcykpIHJldHVybiBmYWxsYmFja3M7XG4gICAgaWYgKCFjb2RlKSByZXR1cm4gZmFsbGJhY2tzLmRlZmF1bHQgfHwgW107XG4gICAgbGV0IGZvdW5kID0gZmFsbGJhY2tzW2NvZGVdO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3MuZGVmYXVsdDtcbiAgICByZXR1cm4gZm91bmQgfHwgW107XG4gIH1cbiAgdG9SZXNvbHZlSGllcmFyY2h5KGNvZGUsIGZhbGxiYWNrQ29kZSkge1xuICAgIGNvbnN0IGZhbGxiYWNrQ29kZXMgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tDb2RlIHx8IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyB8fCBbXSwgY29kZSk7XG4gICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICBjb25zdCBhZGRDb2RlID0gYyA9PiB7XG4gICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQ29kZShjKSkge1xuICAgICAgICBjb2Rlcy5wdXNoKGMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgcmVqZWN0aW5nIGxhbmd1YWdlIGNvZGUgbm90IGZvdW5kIGluIHN1cHBvcnRlZExuZ3M6ICR7Y31gKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChpc1N0cmluZyhjb2RlKSAmJiAoY29kZS5pbmRleE9mKCctJykgPiAtMSB8fCBjb2RlLmluZGV4T2YoJ18nKSA+IC0xKSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JykgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdsYW5ndWFnZU9ubHknICYmIHRoaXMub3B0aW9ucy5sb2FkICE9PSAnY3VycmVudE9ubHknKSBhZGRDb2RlKHRoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKGNvZGUpKSB7XG4gICAgICBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICB9XG4gICAgZmFsbGJhY2tDb2Rlcy5mb3JFYWNoKGZjID0+IHtcbiAgICAgIGlmIChjb2Rlcy5pbmRleE9mKGZjKSA8IDApIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZmMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29kZXM7XG4gIH1cbn1cblxubGV0IHNldHMgPSBbe1xuICBsbmdzOiBbJ2FjaCcsICdhaycsICdhbScsICdhcm4nLCAnYnInLCAnZmlsJywgJ2d1bicsICdsbicsICdtZmUnLCAnbWcnLCAnbWknLCAnb2MnLCAncHQnLCAncHQtQlInLCAndGcnLCAndGwnLCAndGknLCAndHInLCAndXonLCAnd2EnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDFcbn0sIHtcbiAgbG5nczogWydhZicsICdhbicsICdhc3QnLCAnYXonLCAnYmcnLCAnYm4nLCAnY2EnLCAnZGEnLCAnZGUnLCAnZGV2JywgJ2VsJywgJ2VuJywgJ2VvJywgJ2VzJywgJ2V0JywgJ2V1JywgJ2ZpJywgJ2ZvJywgJ2Z1cicsICdmeScsICdnbCcsICdndScsICdoYScsICdoaScsICdodScsICdoeScsICdpYScsICdpdCcsICdraycsICdrbicsICdrdScsICdsYicsICdtYWknLCAnbWwnLCAnbW4nLCAnbXInLCAnbmFoJywgJ25hcCcsICduYicsICduZScsICdubCcsICdubicsICdubycsICduc28nLCAncGEnLCAncGFwJywgJ3BtcycsICdwcycsICdwdC1QVCcsICdybScsICdzY28nLCAnc2UnLCAnc2knLCAnc28nLCAnc29uJywgJ3NxJywgJ3N2JywgJ3N3JywgJ3RhJywgJ3RlJywgJ3RrJywgJ3VyJywgJ3lvJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsnYXknLCAnYm8nLCAnY2dnJywgJ2ZhJywgJ2h0JywgJ2lkJywgJ2phJywgJ2pibycsICdrYScsICdrbScsICdrbycsICdreScsICdsbycsICdtcycsICdzYWgnLCAnc3UnLCAndGgnLCAndHQnLCAndWcnLCAndmknLCAnd28nLCAnemgnXSxcbiAgbnI6IFsxXSxcbiAgZmM6IDNcbn0sIHtcbiAgbG5nczogWydiZScsICdicycsICdjbnInLCAnZHonLCAnaHInLCAncnUnLCAnc3InLCAndWsnXSxcbiAgbnI6IFsxLCAyLCA1XSxcbiAgZmM6IDRcbn0sIHtcbiAgbG5nczogWydhciddLFxuICBucjogWzAsIDEsIDIsIDMsIDExLCAxMDBdLFxuICBmYzogNVxufSwge1xuICBsbmdzOiBbJ2NzJywgJ3NrJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA2XG59LCB7XG4gIGxuZ3M6IFsnY3NiJywgJ3BsJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA3XG59LCB7XG4gIGxuZ3M6IFsnY3knXSxcbiAgbnI6IFsxLCAyLCAzLCA4XSxcbiAgZmM6IDhcbn0sIHtcbiAgbG5nczogWydmciddLFxuICBucjogWzEsIDJdLFxuICBmYzogOVxufSwge1xuICBsbmdzOiBbJ2dhJ10sXG4gIG5yOiBbMSwgMiwgMywgNywgMTFdLFxuICBmYzogMTBcbn0sIHtcbiAgbG5nczogWydnZCddLFxuICBucjogWzEsIDIsIDMsIDIwXSxcbiAgZmM6IDExXG59LCB7XG4gIGxuZ3M6IFsnaXMnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDEyXG59LCB7XG4gIGxuZ3M6IFsnanYnXSxcbiAgbnI6IFswLCAxXSxcbiAgZmM6IDEzXG59LCB7XG4gIGxuZ3M6IFsna3cnXSxcbiAgbnI6IFsxLCAyLCAzLCA0XSxcbiAgZmM6IDE0XG59LCB7XG4gIGxuZ3M6IFsnbHQnXSxcbiAgbnI6IFsxLCAyLCAxMF0sXG4gIGZjOiAxNVxufSwge1xuICBsbmdzOiBbJ2x2J10sXG4gIG5yOiBbMSwgMiwgMF0sXG4gIGZjOiAxNlxufSwge1xuICBsbmdzOiBbJ21rJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxN1xufSwge1xuICBsbmdzOiBbJ21uayddLFxuICBucjogWzAsIDEsIDJdLFxuICBmYzogMThcbn0sIHtcbiAgbG5nczogWydtdCddLFxuICBucjogWzEsIDIsIDExLCAyMF0sXG4gIGZjOiAxOVxufSwge1xuICBsbmdzOiBbJ29yJ10sXG4gIG5yOiBbMiwgMV0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsncm8nXSxcbiAgbnI6IFsxLCAyLCAyMF0sXG4gIGZjOiAyMFxufSwge1xuICBsbmdzOiBbJ3NsJ10sXG4gIG5yOiBbNSwgMSwgMiwgM10sXG4gIGZjOiAyMVxufSwge1xuICBsbmdzOiBbJ2hlJywgJ2l3J10sXG4gIG5yOiBbMSwgMiwgMjAsIDIxXSxcbiAgZmM6IDIyXG59XTtcbmxldCBfcnVsZXNQbHVyYWxzVHlwZXMgPSB7XG4gIDE6IG4gPT4gTnVtYmVyKG4gPiAxKSxcbiAgMjogbiA9PiBOdW1iZXIobiAhPSAxKSxcbiAgMzogbiA9PiAwLFxuICA0OiBuID0+IE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDU6IG4gPT4gTnVtYmVyKG4gPT0gMCA/IDAgOiBuID09IDEgPyAxIDogbiA9PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNSksXG4gIDY6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID49IDIgJiYgbiA8PSA0ID8gMSA6IDIpLFxuICA3OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgODogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuICE9IDggJiYgbiAhPSAxMSA/IDIgOiAzKSxcbiAgOTogbiA9PiBOdW1iZXIobiA+PSAyKSxcbiAgMTA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA8IDcgPyAyIDogbiA8IDExID8gMyA6IDQpLFxuICAxMTogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gPT0gMTEgPyAwIDogbiA9PSAyIHx8IG4gPT0gMTIgPyAxIDogbiA+IDIgJiYgbiA8IDIwID8gMiA6IDMpLFxuICAxMjogbiA9PiBOdW1iZXIobiAlIDEwICE9IDEgfHwgbiAlIDEwMCA9PSAxMSksXG4gIDEzOiBuID0+IE51bWJlcihuICE9PSAwKSxcbiAgMTQ6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA9PSAzID8gMiA6IDMpLFxuICAxNTogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICAxNjogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICE9PSAwID8gMSA6IDIpLFxuICAxNzogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogMSksXG4gIDE4OiBuID0+IE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IDIpLFxuICAxOTogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMCB8fCBuICUgMTAwID4gMSAmJiBuICUgMTAwIDwgMTEgPyAxIDogbiAlIDEwMCA+IDEwICYmIG4gJSAxMDAgPCAyMCA/IDIgOiAzKSxcbiAgMjA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDAgfHwgbiAlIDEwMCA+IDAgJiYgbiAlIDEwMCA8IDIwID8gMSA6IDIpLFxuICAyMTogbiA9PiBOdW1iZXIobiAlIDEwMCA9PSAxID8gMSA6IG4gJSAxMDAgPT0gMiA/IDIgOiBuICUgMTAwID09IDMgfHwgbiAlIDEwMCA9PSA0ID8gMyA6IDApLFxuICAyMjogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiAobiA8IDAgfHwgbiA+IDEwKSAmJiBuICUgMTAgPT0gMCA/IDIgOiAzKVxufTtcbmNvbnN0IG5vbkludGxWZXJzaW9ucyA9IFsndjEnLCAndjInLCAndjMnXTtcbmNvbnN0IGludGxWZXJzaW9ucyA9IFsndjQnXTtcbmNvbnN0IHN1ZmZpeGVzT3JkZXIgPSB7XG4gIHplcm86IDAsXG4gIG9uZTogMSxcbiAgdHdvOiAyLFxuICBmZXc6IDMsXG4gIG1hbnk6IDQsXG4gIG90aGVyOiA1XG59O1xuY29uc3QgY3JlYXRlUnVsZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHJ1bGVzID0ge307XG4gIHNldHMuZm9yRWFjaChzZXQgPT4ge1xuICAgIHNldC5sbmdzLmZvckVhY2gobCA9PiB7XG4gICAgICBydWxlc1tsXSA9IHtcbiAgICAgICAgbnVtYmVyczogc2V0Lm5yLFxuICAgICAgICBwbHVyYWxzOiBfcnVsZXNQbHVyYWxzVHlwZXNbc2V0LmZjXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBydWxlcztcbn07XG5jbGFzcyBQbHVyYWxSZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKGxhbmd1YWdlVXRpbHMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5sYW5ndWFnZVV0aWxzID0gbGFuZ3VhZ2VVdGlscztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3BsdXJhbFJlc29sdmVyJyk7XG4gICAgaWYgKCghdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OIHx8IGludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pKSAmJiAodHlwZW9mIEludGwgPT09ICd1bmRlZmluZWQnIHx8ICFJbnRsLlBsdXJhbFJ1bGVzKSkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID0gJ3YzJztcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdZb3VyIGVudmlyb25tZW50IHNlZW1zIG5vdCB0byBiZSBJbnRsIEFQSSBjb21wYXRpYmxlLCB1c2UgYW4gSW50bC5QbHVyYWxSdWxlcyBwb2x5ZmlsbC4gV2lsbCBmYWxsYmFjayB0byB0aGUgY29tcGF0aWJpbGl0eUpTT04gdjMgZm9ybWF0IGhhbmRsaW5nLicpO1xuICAgIH1cbiAgICB0aGlzLnJ1bGVzID0gY3JlYXRlUnVsZXMoKTtcbiAgICB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUgPSB7fTtcbiAgfVxuICBhZGRSdWxlKGxuZywgb2JqKSB7XG4gICAgdGhpcy5ydWxlc1tsbmddID0gb2JqO1xuICB9XG4gIGNsZWFyQ2FjaGUoKSB7XG4gICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlID0ge307XG4gIH1cbiAgZ2V0UnVsZShjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgY29uc3QgY2xlYW5lZENvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlID09PSAnZGV2JyA/ICdlbicgOiBjb2RlKTtcbiAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLm9yZGluYWwgPyAnb3JkaW5hbCcgOiAnY2FyZGluYWwnO1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNsZWFuZWRDb2RlLFxuICAgICAgICB0eXBlXG4gICAgICB9KTtcbiAgICAgIGlmIChjYWNoZUtleSBpbiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtjYWNoZUtleV07XG4gICAgICB9XG4gICAgICBsZXQgcnVsZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJ1bGUgPSBuZXcgSW50bC5QbHVyYWxSdWxlcyhjbGVhbmVkQ29kZSwge1xuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCFjb2RlLm1hdGNoKC8tfF8vKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdQYXJ0ID0gdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpO1xuICAgICAgICBydWxlID0gdGhpcy5nZXRSdWxlKGxuZ1BhcnQsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlW2NhY2hlS2V5XSA9IHJ1bGU7XG4gICAgICByZXR1cm4gcnVsZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucnVsZXNbY29kZV0gfHwgdGhpcy5ydWxlc1t0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSldO1xuICB9XG4gIG5lZWRzUGx1cmFsKGNvZGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuZ2V0UnVsZShjb2RlLCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIHJldHVybiBydWxlICYmIHJ1bGUucmVzb2x2ZWRPcHRpb25zKCkucGx1cmFsQ2F0ZWdvcmllcy5sZW5ndGggPiAxO1xuICAgIH1cbiAgICByZXR1cm4gcnVsZSAmJiBydWxlLm51bWJlcnMubGVuZ3RoID4gMTtcbiAgfVxuICBnZXRQbHVyYWxGb3Jtc09mS2V5KGNvZGUsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICByZXR1cm4gdGhpcy5nZXRTdWZmaXhlcyhjb2RlLCBvcHRpb25zKS5tYXAoc3VmZml4ID0+IGAke2tleX0ke3N1ZmZpeH1gKTtcbiAgfVxuICBnZXRTdWZmaXhlcyhjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKCFydWxlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgcmV0dXJuIHJ1bGUucmVzb2x2ZWRPcHRpb25zKCkucGx1cmFsQ2F0ZWdvcmllcy5zb3J0KChwbHVyYWxDYXRlZ29yeTEsIHBsdXJhbENhdGVnb3J5MikgPT4gc3VmZml4ZXNPcmRlcltwbHVyYWxDYXRlZ29yeTFdIC0gc3VmZml4ZXNPcmRlcltwbHVyYWxDYXRlZ29yeTJdKS5tYXAocGx1cmFsQ2F0ZWdvcnkgPT4gYCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHtvcHRpb25zLm9yZGluYWwgPyBgb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YCA6ICcnfSR7cGx1cmFsQ2F0ZWdvcnl9YCk7XG4gICAgfVxuICAgIHJldHVybiBydWxlLm51bWJlcnMubWFwKG51bWJlciA9PiB0aGlzLmdldFN1ZmZpeChjb2RlLCBudW1iZXIsIG9wdGlvbnMpKTtcbiAgfVxuICBnZXRTdWZmaXgoY29kZSwgY291bnQpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuZ2V0UnVsZShjb2RlLCBvcHRpb25zKTtcbiAgICBpZiAocnVsZSkge1xuICAgICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm9wdGlvbnMucHJlcGVuZH0ke29wdGlvbnMub3JkaW5hbCA/IGBvcmRpbmFsJHt0aGlzLm9wdGlvbnMucHJlcGVuZH1gIDogJyd9JHtydWxlLnNlbGVjdChjb3VudCl9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShydWxlLCBjb3VudCk7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyLndhcm4oYG5vIHBsdXJhbCBydWxlIGZvdW5kIGZvcjogJHtjb2RlfWApO1xuICAgIHJldHVybiAnJztcbiAgfVxuICBnZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUocnVsZSwgY291bnQpIHtcbiAgICBjb25zdCBpZHggPSBydWxlLm5vQWJzID8gcnVsZS5wbHVyYWxzKGNvdW50KSA6IHJ1bGUucGx1cmFscyhNYXRoLmFicyhjb3VudCkpO1xuICAgIGxldCBzdWZmaXggPSBydWxlLm51bWJlcnNbaWR4XTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4ICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICBpZiAoc3VmZml4ID09PSAyKSB7XG4gICAgICAgIHN1ZmZpeCA9ICdwbHVyYWwnO1xuICAgICAgfSBlbHNlIGlmIChzdWZmaXggPT09IDEpIHtcbiAgICAgICAgc3VmZml4ID0gJyc7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJldHVyblN1ZmZpeCA9ICgpID0+IHRoaXMub3B0aW9ucy5wcmVwZW5kICYmIHN1ZmZpeC50b1N0cmluZygpID8gdGhpcy5vcHRpb25zLnByZXBlbmQgKyBzdWZmaXgudG9TdHJpbmcoKSA6IHN1ZmZpeC50b1N0cmluZygpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MScpIHtcbiAgICAgIGlmIChzdWZmaXggPT09IDEpIHJldHVybiAnJztcbiAgICAgIGlmICh0eXBlb2Ygc3VmZml4ID09PSAnbnVtYmVyJykgcmV0dXJuIGBfcGx1cmFsXyR7c3VmZml4LnRvU3RyaW5nKCl9YDtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9PT0gJ3YyJykge1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4ICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBpZHgudG9TdHJpbmcoKSA/IHRoaXMub3B0aW9ucy5wcmVwZW5kICsgaWR4LnRvU3RyaW5nKCkgOiBpZHgudG9TdHJpbmcoKTtcbiAgfVxuICBzaG91bGRVc2VJbnRsQXBpKCkge1xuICAgIHJldHVybiAhbm9uSW50bFZlcnNpb25zLmluY2x1ZGVzKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTik7XG4gIH1cbn1cblxuY29uc3QgZGVlcEZpbmRXaXRoRGVmYXVsdHMgPSBmdW5jdGlvbiAoZGF0YSwgZGVmYXVsdERhdGEsIGtleSkge1xuICBsZXQga2V5U2VwYXJhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAnLic7XG4gIGxldCBpZ25vcmVKU09OU3RydWN0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0cnVlO1xuICBsZXQgcGF0aCA9IGdldFBhdGhXaXRoRGVmYXVsdHMoZGF0YSwgZGVmYXVsdERhdGEsIGtleSk7XG4gIGlmICghcGF0aCAmJiBpZ25vcmVKU09OU3RydWN0dXJlICYmIGlzU3RyaW5nKGtleSkpIHtcbiAgICBwYXRoID0gZGVlcEZpbmQoZGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChwYXRoID09PSB1bmRlZmluZWQpIHBhdGggPSBkZWVwRmluZChkZWZhdWx0RGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIHJldHVybiBwYXRoO1xufTtcbmNvbnN0IHJlZ2V4U2FmZSA9IHZhbCA9PiB2YWwucmVwbGFjZSgvXFwkL2csICckJCQkJyk7XG5jbGFzcyBJbnRlcnBvbGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnaW50ZXJwb2xhdG9yJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8ICh2YWx1ZSA9PiB2YWx1ZSk7XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGlmICghb3B0aW9ucy5pbnRlcnBvbGF0aW9uKSBvcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgICBlc2NhcGVWYWx1ZTogdHJ1ZVxuICAgIH07XG4gICAgY29uc3Qge1xuICAgICAgZXNjYXBlOiBlc2NhcGUkMSxcbiAgICAgIGVzY2FwZVZhbHVlLFxuICAgICAgdXNlUmF3VmFsdWVUb0VzY2FwZSxcbiAgICAgIHByZWZpeCxcbiAgICAgIHByZWZpeEVzY2FwZWQsXG4gICAgICBzdWZmaXgsXG4gICAgICBzdWZmaXhFc2NhcGVkLFxuICAgICAgZm9ybWF0U2VwYXJhdG9yLFxuICAgICAgdW5lc2NhcGVTdWZmaXgsXG4gICAgICB1bmVzY2FwZVByZWZpeCxcbiAgICAgIG5lc3RpbmdQcmVmaXgsXG4gICAgICBuZXN0aW5nUHJlZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdTdWZmaXgsXG4gICAgICBuZXN0aW5nU3VmZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yLFxuICAgICAgbWF4UmVwbGFjZXMsXG4gICAgICBhbHdheXNGb3JtYXRcbiAgICB9ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uO1xuICAgIHRoaXMuZXNjYXBlID0gZXNjYXBlJDEgIT09IHVuZGVmaW5lZCA/IGVzY2FwZSQxIDogZXNjYXBlO1xuICAgIHRoaXMuZXNjYXBlVmFsdWUgPSBlc2NhcGVWYWx1ZSAhPT0gdW5kZWZpbmVkID8gZXNjYXBlVmFsdWUgOiB0cnVlO1xuICAgIHRoaXMudXNlUmF3VmFsdWVUb0VzY2FwZSA9IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgIT09IHVuZGVmaW5lZCA/IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgOiBmYWxzZTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCA/IHJlZ2V4RXNjYXBlKHByZWZpeCkgOiBwcmVmaXhFc2NhcGVkIHx8ICd7eyc7XG4gICAgdGhpcy5zdWZmaXggPSBzdWZmaXggPyByZWdleEVzY2FwZShzdWZmaXgpIDogc3VmZml4RXNjYXBlZCB8fCAnfX0nO1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLnVuZXNjYXBlUHJlZml4ID0gdW5lc2NhcGVTdWZmaXggPyAnJyA6IHVuZXNjYXBlUHJlZml4IHx8ICctJztcbiAgICB0aGlzLnVuZXNjYXBlU3VmZml4ID0gdGhpcy51bmVzY2FwZVByZWZpeCA/ICcnIDogdW5lc2NhcGVTdWZmaXggfHwgJyc7XG4gICAgdGhpcy5uZXN0aW5nUHJlZml4ID0gbmVzdGluZ1ByZWZpeCA/IHJlZ2V4RXNjYXBlKG5lc3RpbmdQcmVmaXgpIDogbmVzdGluZ1ByZWZpeEVzY2FwZWQgfHwgcmVnZXhFc2NhcGUoJyR0KCcpO1xuICAgIHRoaXMubmVzdGluZ1N1ZmZpeCA9IG5lc3RpbmdTdWZmaXggPyByZWdleEVzY2FwZShuZXN0aW5nU3VmZml4KSA6IG5lc3RpbmdTdWZmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCcpJyk7XG4gICAgdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvciA9IG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLm1heFJlcGxhY2VzID0gbWF4UmVwbGFjZXMgfHwgMTAwMDtcbiAgICB0aGlzLmFsd2F5c0Zvcm1hdCA9IGFsd2F5c0Zvcm1hdCAhPT0gdW5kZWZpbmVkID8gYWx3YXlzRm9ybWF0IDogZmFsc2U7XG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuICB9XG4gIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMuaW5pdCh0aGlzLm9wdGlvbnMpO1xuICB9XG4gIHJlc2V0UmVnRXhwKCkge1xuICAgIGNvbnN0IGdldE9yUmVzZXRSZWdFeHAgPSAoZXhpc3RpbmdSZWdFeHAsIHBhdHRlcm4pID0+IHtcbiAgICAgIGlmIChleGlzdGluZ1JlZ0V4cCAmJiBleGlzdGluZ1JlZ0V4cC5zb3VyY2UgPT09IHBhdHRlcm4pIHtcbiAgICAgICAgZXhpc3RpbmdSZWdFeHAubGFzdEluZGV4ID0gMDtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVnRXhwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgJ2cnKTtcbiAgICB9O1xuICAgIHRoaXMucmVnZXhwID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLnJlZ2V4cCwgYCR7dGhpcy5wcmVmaXh9KC4rPykke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMucmVnZXhwVW5lc2NhcGUgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMucmVnZXhwVW5lc2NhcGUsIGAke3RoaXMucHJlZml4fSR7dGhpcy51bmVzY2FwZVByZWZpeH0oLis/KSR7dGhpcy51bmVzY2FwZVN1ZmZpeH0ke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMubmVzdGluZ1JlZ2V4cCA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5uZXN0aW5nUmVnZXhwLCBgJHt0aGlzLm5lc3RpbmdQcmVmaXh9KC4rPykke3RoaXMubmVzdGluZ1N1ZmZpeH1gKTtcbiAgfVxuICBpbnRlcnBvbGF0ZShzdHIsIGRhdGEsIGxuZywgb3B0aW9ucykge1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IHJlcGxhY2VzO1xuICAgIGNvbnN0IGRlZmF1bHREYXRhID0gdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMgfHwge307XG4gICAgY29uc3QgaGFuZGxlRm9ybWF0ID0ga2V5ID0+IHtcbiAgICAgIGlmIChrZXkuaW5kZXhPZih0aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBkZWVwRmluZFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwga2V5LCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmFsd2F5c0Zvcm1hdCA/IHRoaXMuZm9ybWF0KHBhdGgsIHVuZGVmaW5lZCwgbG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgIGludGVycG9sYXRpb25rZXk6IGtleVxuICAgICAgICB9KSA6IHBhdGg7XG4gICAgICB9XG4gICAgICBjb25zdCBwID0ga2V5LnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICAgIGNvbnN0IGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgY29uc3QgZiA9IHAuam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZXBGaW5kV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrLCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSksIGYsIGxuZywge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBrXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgICBjb25zdCBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIgPSBvcHRpb25zICYmIG9wdGlvbnMubWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyIHx8IHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI7XG4gICAgY29uc3Qgc2tpcE9uVmFyaWFibGVzID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyA6IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcztcbiAgICBjb25zdCB0b2RvcyA9IFt7XG4gICAgICByZWdleDogdGhpcy5yZWdleHBVbmVzY2FwZSxcbiAgICAgIHNhZmVWYWx1ZTogdmFsID0+IHJlZ2V4U2FmZSh2YWwpXG4gICAgfSwge1xuICAgICAgcmVnZXg6IHRoaXMucmVnZXhwLFxuICAgICAgc2FmZVZhbHVlOiB2YWwgPT4gdGhpcy5lc2NhcGVWYWx1ZSA/IHJlZ2V4U2FmZSh0aGlzLmVzY2FwZSh2YWwpKSA6IHJlZ2V4U2FmZSh2YWwpXG4gICAgfV07XG4gICAgdG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgIHJlcGxhY2VzID0gMDtcbiAgICAgIHdoaWxlIChtYXRjaCA9IHRvZG8ucmVnZXguZXhlYyhzdHIpKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRWYXIgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoZWRWYXIpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyKHN0ciwgbWF0Y2gsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdmFsdWUgPSBpc1N0cmluZyh0ZW1wKSA/IHRlbXAgOiAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG1hdGNoZWRWYXIpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byBwYXNzIGluIHZhcmlhYmxlICR7bWF0Y2hlZFZhcn0gZm9yIGludGVycG9sYXRpbmcgJHtzdHJ9YCk7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaXNTdHJpbmcodmFsdWUpICYmICF0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGUpIHtcbiAgICAgICAgICB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhZmVWYWx1ZSA9IHRvZG8uc2FmZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHNhZmVWYWx1ZSk7XG4gICAgICAgIGlmIChza2lwT25WYXJpYWJsZXMpIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlcysrO1xuICAgICAgICBpZiAocmVwbGFjZXMgPj0gdGhpcy5tYXhSZXBsYWNlcykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBuZXN0KHN0ciwgZmMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCB2YWx1ZTtcbiAgICBsZXQgY2xvbmVkT3B0aW9ucztcbiAgICBjb25zdCBoYW5kbGVIYXNPcHRpb25zID0gKGtleSwgaW5oZXJpdGVkT3B0aW9ucykgPT4ge1xuICAgICAgY29uc3Qgc2VwID0gdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjtcbiAgICAgIGlmIChrZXkuaW5kZXhPZihzZXApIDwgMCkgcmV0dXJuIGtleTtcbiAgICAgIGNvbnN0IGMgPSBrZXkuc3BsaXQobmV3IFJlZ0V4cChgJHtzZXB9WyBdKntgKSk7XG4gICAgICBsZXQgb3B0aW9uc1N0cmluZyA9IGB7JHtjWzFdfWA7XG4gICAgICBrZXkgPSBjWzBdO1xuICAgICAgb3B0aW9uc1N0cmluZyA9IHRoaXMuaW50ZXJwb2xhdGUob3B0aW9uc1N0cmluZywgY2xvbmVkT3B0aW9ucyk7XG4gICAgICBjb25zdCBtYXRjaGVkU2luZ2xlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvJy9nKTtcbiAgICAgIGNvbnN0IG1hdGNoZWREb3VibGVRdW90ZXMgPSBvcHRpb25zU3RyaW5nLm1hdGNoKC9cIi9nKTtcbiAgICAgIGlmIChtYXRjaGVkU2luZ2xlUXVvdGVzICYmIG1hdGNoZWRTaW5nbGVRdW90ZXMubGVuZ3RoICUgMiA9PT0gMCAmJiAhbWF0Y2hlZERvdWJsZVF1b3RlcyB8fCBtYXRjaGVkRG91YmxlUXVvdGVzLmxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgICAgb3B0aW9uc1N0cmluZyA9IG9wdGlvbnNTdHJpbmcucmVwbGFjZSgvJy9nLCAnXCInKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNsb25lZE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmcpO1xuICAgICAgICBpZiAoaW5oZXJpdGVkT3B0aW9ucykgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgICAuLi5pbmhlcml0ZWRPcHRpb25zLFxuICAgICAgICAgIC4uLmNsb25lZE9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICR7a2V5fWAsIGUpO1xuICAgICAgICByZXR1cm4gYCR7a2V5fSR7c2VwfSR7b3B0aW9uc1N0cmluZ31gO1xuICAgICAgfVxuICAgICAgaWYgKGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlICYmIGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlLmluZGV4T2YodGhpcy5wcmVmaXgpID4gLTEpIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhzdHIpKSB7XG4gICAgICBsZXQgZm9ybWF0dGVycyA9IFtdO1xuICAgICAgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSBjbG9uZWRPcHRpb25zLnJlcGxhY2UgJiYgIWlzU3RyaW5nKGNsb25lZE9wdGlvbnMucmVwbGFjZSkgPyBjbG9uZWRPcHRpb25zLnJlcGxhY2UgOiBjbG9uZWRPcHRpb25zO1xuICAgICAgY2xvbmVkT3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgPSBmYWxzZTtcbiAgICAgIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIGxldCBkb1JlZHVjZSA9IGZhbHNlO1xuICAgICAgaWYgKG1hdGNoWzBdLmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpICE9PSAtMSAmJiAhL3suKn0vLnRlc3QobWF0Y2hbMV0pKSB7XG4gICAgICAgIGNvbnN0IHIgPSBtYXRjaFsxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGVsZW0gPT4gZWxlbS50cmltKCkpO1xuICAgICAgICBtYXRjaFsxXSA9IHIuc2hpZnQoKTtcbiAgICAgICAgZm9ybWF0dGVycyA9IHI7XG4gICAgICAgIGRvUmVkdWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZmMoaGFuZGxlSGFzT3B0aW9ucy5jYWxsKHRoaXMsIG1hdGNoWzFdLnRyaW0oKSwgY2xvbmVkT3B0aW9ucyksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgaWYgKHZhbHVlICYmIG1hdGNoWzBdID09PSBzdHIgJiYgIWlzU3RyaW5nKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgaWYgKCFpc1N0cmluZyh2YWx1ZSkpIHZhbHVlID0gbWFrZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byByZXNvbHZlICR7bWF0Y2hbMV19IGZvciBuZXN0aW5nICR7c3RyfWApO1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKGRvUmVkdWNlKSB7XG4gICAgICAgIHZhbHVlID0gZm9ybWF0dGVycy5yZWR1Y2UoKHYsIGYpID0+IHRoaXMuZm9ybWF0KHYsIGYsIG9wdGlvbnMubG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBtYXRjaFsxXS50cmltKClcbiAgICAgICAgfSksIHZhbHVlLnRyaW0oKSk7XG4gICAgICB9XG4gICAgICBzdHIgPSBzdHIucmVwbGFjZShtYXRjaFswXSwgdmFsdWUpO1xuICAgICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5jb25zdCBwYXJzZUZvcm1hdFN0ciA9IGZvcm1hdFN0ciA9PiB7XG4gIGxldCBmb3JtYXROYW1lID0gZm9ybWF0U3RyLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBjb25zdCBmb3JtYXRPcHRpb25zID0ge307XG4gIGlmIChmb3JtYXRTdHIuaW5kZXhPZignKCcpID4gLTEpIHtcbiAgICBjb25zdCBwID0gZm9ybWF0U3RyLnNwbGl0KCcoJyk7XG4gICAgZm9ybWF0TmFtZSA9IHBbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgY29uc3Qgb3B0U3RyID0gcFsxXS5zdWJzdHJpbmcoMCwgcFsxXS5sZW5ndGggLSAxKTtcbiAgICBpZiAoZm9ybWF0TmFtZSA9PT0gJ2N1cnJlbmN5JyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLmN1cnJlbmN5KSBmb3JtYXRPcHRpb25zLmN1cnJlbmN5ID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2UgaWYgKGZvcm1hdE5hbWUgPT09ICdyZWxhdGl2ZXRpbWUnICYmIG9wdFN0ci5pbmRleE9mKCc6JykgPCAwKSB7XG4gICAgICBpZiAoIWZvcm1hdE9wdGlvbnMucmFuZ2UpIGZvcm1hdE9wdGlvbnMucmFuZ2UgPSBvcHRTdHIudHJpbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvcHRzID0gb3B0U3RyLnNwbGl0KCc7Jyk7XG4gICAgICBvcHRzLmZvckVhY2gob3B0ID0+IHtcbiAgICAgICAgaWYgKG9wdCkge1xuICAgICAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gb3B0LnNwbGl0KCc6Jyk7XG4gICAgICAgICAgY29uc3QgdmFsID0gcmVzdC5qb2luKCc6JykudHJpbSgpLnJlcGxhY2UoL14nK3wnKyQvZywgJycpO1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWRLZXkgPSBrZXkudHJpbSgpO1xuICAgICAgICAgIGlmICghZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSkgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHZhbDtcbiAgICAgICAgICBpZiAodmFsID09PSAnZmFsc2UnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ3RydWUnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSBwYXJzZUludCh2YWwsIDEwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgZm9ybWF0TmFtZSxcbiAgICBmb3JtYXRPcHRpb25zXG4gIH07XG59O1xuY29uc3QgY3JlYXRlQ2FjaGVkRm9ybWF0dGVyID0gZm4gPT4ge1xuICBjb25zdCBjYWNoZSA9IHt9O1xuICByZXR1cm4gKHZhbCwgbG5nLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IG9wdEZvckNhY2hlID0gb3B0aW9ucztcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb25rZXkgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXMgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXNbb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5XSAmJiBvcHRpb25zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0pIHtcbiAgICAgIG9wdEZvckNhY2hlID0ge1xuICAgICAgICAuLi5vcHRGb3JDYWNoZSxcbiAgICAgICAgW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV06IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gbG5nICsgSlNPTi5zdHJpbmdpZnkob3B0Rm9yQ2FjaGUpO1xuICAgIGxldCBmb3JtYXR0ZXIgPSBjYWNoZVtrZXldO1xuICAgIGlmICghZm9ybWF0dGVyKSB7XG4gICAgICBmb3JtYXR0ZXIgPSBmbihnZXRDbGVhbmVkQ29kZShsbmcpLCBvcHRpb25zKTtcbiAgICAgIGNhY2hlW2tleV0gPSBmb3JtYXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZXIodmFsKTtcbiAgfTtcbn07XG5jbGFzcyBGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnZm9ybWF0dGVyJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdHMgPSB7XG4gICAgICBudW1iZXI6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KSxcbiAgICAgIGN1cnJlbmN5OiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHQsXG4gICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBkYXRldGltZTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICByZWxhdGl2ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCwgb3B0LnJhbmdlIHx8ICdkYXknKTtcbiAgICAgIH0pLFxuICAgICAgbGlzdDogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KVxuICAgIH07XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgaW50ZXJwb2xhdGlvbjoge31cbiAgICB9O1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG4gIH1cbiAgYWRkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gZmM7XG4gIH1cbiAgYWRkQ2FjaGVkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKGZjKTtcbiAgfVxuICBmb3JtYXQodmFsdWUsIGZvcm1hdCwgbG5nKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNvbnN0IGZvcm1hdHMgPSBmb3JtYXQuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgIGlmIChmb3JtYXRzLmxlbmd0aCA+IDEgJiYgZm9ybWF0c1swXS5pbmRleE9mKCcoJykgPiAxICYmIGZvcm1hdHNbMF0uaW5kZXhPZignKScpIDwgMCAmJiBmb3JtYXRzLmZpbmQoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKSkge1xuICAgICAgY29uc3QgbGFzdEluZGV4ID0gZm9ybWF0cy5maW5kSW5kZXgoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKTtcbiAgICAgIGZvcm1hdHNbMF0gPSBbZm9ybWF0c1swXSwgLi4uZm9ybWF0cy5zcGxpY2UoMSwgbGFzdEluZGV4KV0uam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdHMucmVkdWNlKChtZW0sIGYpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybWF0TmFtZSxcbiAgICAgICAgZm9ybWF0T3B0aW9uc1xuICAgICAgfSA9IHBhcnNlRm9ybWF0U3RyKGYpO1xuICAgICAgaWYgKHRoaXMuZm9ybWF0c1tmb3JtYXROYW1lXSkge1xuICAgICAgICBsZXQgZm9ybWF0dGVkID0gbWVtO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHZhbE9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gfHwge307XG4gICAgICAgICAgY29uc3QgbCA9IHZhbE9wdGlvbnMubG9jYWxlIHx8IHZhbE9wdGlvbnMubG5nIHx8IG9wdGlvbnMubG9jYWxlIHx8IG9wdGlvbnMubG5nIHx8IGxuZztcbiAgICAgICAgICBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdHNbZm9ybWF0TmFtZV0obWVtLCBsLCB7XG4gICAgICAgICAgICAuLi5mb3JtYXRPcHRpb25zLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnZhbE9wdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgdGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgJHtmb3JtYXROYW1lfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbTtcbiAgICB9LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jb25zdCByZW1vdmVQZW5kaW5nID0gKHEsIG5hbWUpID0+IHtcbiAgaWYgKHEucGVuZGluZ1tuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVsZXRlIHEucGVuZGluZ1tuYW1lXTtcbiAgICBxLnBlbmRpbmdDb3VudC0tO1xuICB9XG59O1xuY2xhc3MgQ29ubmVjdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoYmFja2VuZCwgc3RvcmUsIHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IHNlcnZpY2VzLmxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdiYWNrZW5kQ29ubmVjdG9yJyk7XG4gICAgdGhpcy53YWl0aW5nUmVhZHMgPSBbXTtcbiAgICB0aGlzLm1heFBhcmFsbGVsUmVhZHMgPSBvcHRpb25zLm1heFBhcmFsbGVsUmVhZHMgfHwgMTA7XG4gICAgdGhpcy5yZWFkaW5nQ2FsbHMgPSAwO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA+PSAwID8gb3B0aW9ucy5tYXhSZXRyaWVzIDogNTtcbiAgICB0aGlzLnJldHJ5VGltZW91dCA9IG9wdGlvbnMucmV0cnlUaW1lb3V0ID49IDEgPyBvcHRpb25zLnJldHJ5VGltZW91dCA6IDM1MDtcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmluaXQpIHtcbiAgICAgIHRoaXMuYmFja2VuZC5pbml0KHNlcnZpY2VzLCBvcHRpb25zLmJhY2tlbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBxdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHRvTG9hZCA9IHt9O1xuICAgIGNvbnN0IHBlbmRpbmcgPSB7fTtcbiAgICBjb25zdCB0b0xvYWRMYW5ndWFnZXMgPSB7fTtcbiAgICBjb25zdCB0b0xvYWROYW1lc3BhY2VzID0ge307XG4gICAgbGFuZ3VhZ2VzLmZvckVhY2gobG5nID0+IHtcbiAgICAgIGxldCBoYXNBbGxOYW1lc3BhY2VzID0gdHJ1ZTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBgJHtsbmd9fCR7bnN9YDtcbiAgICAgICAgaWYgKCFvcHRpb25zLnJlbG9hZCAmJiB0aGlzLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZVtuYW1lXSA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA8IDApIDsgZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA9PT0gMSkge1xuICAgICAgICAgIGlmIChwZW5kaW5nW25hbWVdID09PSB1bmRlZmluZWQpIHBlbmRpbmdbbmFtZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdGVbbmFtZV0gPSAxO1xuICAgICAgICAgIGhhc0FsbE5hbWVzcGFjZXMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocGVuZGluZ1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwZW5kaW5nW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodG9Mb2FkW25hbWVdID09PSB1bmRlZmluZWQpIHRvTG9hZFtuYW1lXSA9IHRydWU7XG4gICAgICAgICAgaWYgKHRvTG9hZE5hbWVzcGFjZXNbbnNdID09PSB1bmRlZmluZWQpIHRvTG9hZE5hbWVzcGFjZXNbbnNdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIWhhc0FsbE5hbWVzcGFjZXMpIHRvTG9hZExhbmd1YWdlc1tsbmddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAoT2JqZWN0LmtleXModG9Mb2FkKS5sZW5ndGggfHwgT2JqZWN0LmtleXMocGVuZGluZykubGVuZ3RoKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goe1xuICAgICAgICBwZW5kaW5nLFxuICAgICAgICBwZW5kaW5nQ291bnQ6IE9iamVjdC5rZXlzKHBlbmRpbmcpLmxlbmd0aCxcbiAgICAgICAgbG9hZGVkOiB7fSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdG9Mb2FkOiBPYmplY3Qua2V5cyh0b0xvYWQpLFxuICAgICAgcGVuZGluZzogT2JqZWN0LmtleXMocGVuZGluZyksXG4gICAgICB0b0xvYWRMYW5ndWFnZXM6IE9iamVjdC5rZXlzKHRvTG9hZExhbmd1YWdlcyksXG4gICAgICB0b0xvYWROYW1lc3BhY2VzOiBPYmplY3Qua2V5cyh0b0xvYWROYW1lc3BhY2VzKVxuICAgIH07XG4gIH1cbiAgbG9hZGVkKG5hbWUsIGVyciwgZGF0YSkge1xuICAgIGNvbnN0IHMgPSBuYW1lLnNwbGl0KCd8Jyk7XG4gICAgY29uc3QgbG5nID0gc1swXTtcbiAgICBjb25zdCBucyA9IHNbMV07XG4gICAgaWYgKGVycikgdGhpcy5lbWl0KCdmYWlsZWRMb2FkaW5nJywgbG5nLCBucywgZXJyKTtcbiAgICBpZiAoIWVyciAmJiBkYXRhKSB7XG4gICAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIGRhdGEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgIHNraXBDb3B5OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZVtuYW1lXSA9IGVyciA/IC0xIDogMjtcbiAgICBpZiAoZXJyICYmIGRhdGEpIHRoaXMuc3RhdGVbbmFtZV0gPSAwO1xuICAgIGNvbnN0IGxvYWRlZCA9IHt9O1xuICAgIHRoaXMucXVldWUuZm9yRWFjaChxID0+IHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlUGVuZGluZyhxLCBuYW1lKTtcbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgIGlmIChxLnBlbmRpbmdDb3VudCA9PT0gMCAmJiAhcS5kb25lKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHEubG9hZGVkKS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmICghbG9hZGVkW2xdKSBsb2FkZWRbbF0gPSB7fTtcbiAgICAgICAgICBjb25zdCBsb2FkZWRLZXlzID0gcS5sb2FkZWRbbF07XG4gICAgICAgICAgaWYgKGxvYWRlZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb2FkZWRLZXlzLmZvckVhY2gobiA9PiB7XG4gICAgICAgICAgICAgIGlmIChsb2FkZWRbbF1bbl0gPT09IHVuZGVmaW5lZCkgbG9hZGVkW2xdW25dID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHEuZG9uZSA9IHRydWU7XG4gICAgICAgIGlmIChxLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKHEuZXJyb3JzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoJ2xvYWRlZCcsIGxvYWRlZCk7XG4gICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuZmlsdGVyKHEgPT4gIXEuZG9uZSk7XG4gIH1cbiAgcmVhZChsbmcsIG5zLCBmY05hbWUpIHtcbiAgICBsZXQgdHJpZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG4gICAgbGV0IHdhaXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHRoaXMucmV0cnlUaW1lb3V0O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ID8gYXJndW1lbnRzWzVdIDogdW5kZWZpbmVkO1xuICAgIGlmICghbG5nLmxlbmd0aCkgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHt9KTtcbiAgICBpZiAodGhpcy5yZWFkaW5nQ2FsbHMgPj0gdGhpcy5tYXhQYXJhbGxlbFJlYWRzKSB7XG4gICAgICB0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtcbiAgICAgICAgbG5nLFxuICAgICAgICBucyxcbiAgICAgICAgZmNOYW1lLFxuICAgICAgICB0cmllZCxcbiAgICAgICAgd2FpdCxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlYWRpbmdDYWxscysrO1xuICAgIGNvbnN0IHJlc29sdmVyID0gKGVyciwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5yZWFkaW5nQ2FsbHMtLTtcbiAgICAgIGlmICh0aGlzLndhaXRpbmdSZWFkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLndhaXRpbmdSZWFkcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLnJlYWQobmV4dC5sbmcsIG5leHQubnMsIG5leHQuZmNOYW1lLCBuZXh0LnRyaWVkLCBuZXh0LndhaXQsIG5leHQuY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgaWYgKGVyciAmJiBkYXRhICYmIHRyaWVkIDwgdGhpcy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVhZC5jYWxsKHRoaXMsIGxuZywgbnMsIGZjTmFtZSwgdHJpZWQgKyAxLCB3YWl0ICogMiwgY2FsbGJhY2spO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9O1xuICAgIGNvbnN0IGZjID0gdGhpcy5iYWNrZW5kW2ZjTmFtZV0uYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgIGlmIChmYy5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHIgPSBmYyhsbmcsIG5zKTtcbiAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHIudGhlbihkYXRhID0+IHJlc29sdmVyKG51bGwsIGRhdGEpKS5jYXRjaChyZXNvbHZlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZXIobnVsbCwgcik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXNvbHZlcihlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZmMobG5nLCBucywgcmVzb2x2ZXIpO1xuICB9XG4gIHByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIXRoaXMuYmFja2VuZCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignTm8gYmFja2VuZCB3YXMgYWRkZWQgdmlhIGkxOG5leHQudXNlLiBXaWxsIG5vdCBsb2FkIHJlc291cmNlcy4nKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcobGFuZ3VhZ2VzKSkgbGFuZ3VhZ2VzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmIChpc1N0cmluZyhuYW1lc3BhY2VzKSkgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcbiAgICBjb25zdCB0b0xvYWQgPSB0aGlzLnF1ZXVlTG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBpZiAoIXRvTG9hZC50b0xvYWQubGVuZ3RoKSB7XG4gICAgICBpZiAoIXRvTG9hZC5wZW5kaW5nLmxlbmd0aCkgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICB0aGlzLmxvYWRPbmUobmFtZSk7XG4gICAgfSk7XG4gIH1cbiAgbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIHt9LCBjYWxsYmFjayk7XG4gIH1cbiAgcmVsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICB0aGlzLnByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcywge1xuICAgICAgcmVsb2FkOiB0cnVlXG4gICAgfSwgY2FsbGJhY2spO1xuICB9XG4gIGxvYWRPbmUobmFtZSkge1xuICAgIGxldCBwcmVmaXggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICAgIGNvbnN0IHMgPSBuYW1lLnNwbGl0KCd8Jyk7XG4gICAgY29uc3QgbG5nID0gc1swXTtcbiAgICBjb25zdCBucyA9IHNbMV07XG4gICAgdGhpcy5yZWFkKGxuZywgbnMsICdyZWFkJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIChlcnIsIGRhdGEpID0+IHtcbiAgICAgIGlmIChlcnIpIHRoaXMubG9nZ2VyLndhcm4oYCR7cHJlZml4fWxvYWRpbmcgbmFtZXNwYWNlICR7bnN9IGZvciBsYW5ndWFnZSAke2xuZ30gZmFpbGVkYCwgZXJyKTtcbiAgICAgIGlmICghZXJyICYmIGRhdGEpIHRoaXMubG9nZ2VyLmxvZyhgJHtwcmVmaXh9bG9hZGVkIG5hbWVzcGFjZSAke25zfSBmb3IgbGFuZ3VhZ2UgJHtsbmd9YCwgZGF0YSk7XG4gICAgICB0aGlzLmxvYWRlZChuYW1lLCBlcnIsIGRhdGEpO1xuICAgIH0pO1xuICB9XG4gIHNhdmVNaXNzaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUsIGlzVXBkYXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHt9O1xuICAgIGxldCBjbGIgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6ICgpID0+IHt9O1xuICAgIGlmICh0aGlzLnNlcnZpY2VzLnV0aWxzICYmIHRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlICYmICF0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShuYW1lc3BhY2UpKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKGBkaWQgbm90IHNhdmUga2V5IFwiJHtrZXl9XCIgYXMgdGhlIG5hbWVzcGFjZSBcIiR7bmFtZXNwYWNlfVwiIHdhcyBub3QgeWV0IGxvYWRlZGAsICdUaGlzIG1lYW5zIHNvbWV0aGluZyBJUyBXUk9ORyBpbiB5b3VyIHNldHVwLiBZb3UgYWNjZXNzIHRoZSB0IGZ1bmN0aW9uIGJlZm9yZSBpMThuZXh0LmluaXQgLyBpMThuZXh0LmxvYWROYW1lc3BhY2UgLyBpMThuZXh0LmNoYW5nZUxhbmd1YWdlIHdhcyBkb25lLiBXYWl0IGZvciB0aGUgY2FsbGJhY2sgb3IgUHJvbWlzZSB0byByZXNvbHZlIGJlZm9yZSBhY2Nlc3NpbmcgaXQhISEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkIHx8IGtleSA9PT0gbnVsbCB8fCBrZXkgPT09ICcnKSByZXR1cm47XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuY3JlYXRlKSB7XG4gICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBpc1VwZGF0ZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGZjID0gdGhpcy5iYWNrZW5kLmNyZWF0ZS5iaW5kKHRoaXMuYmFja2VuZCk7XG4gICAgICBpZiAoZmMubGVuZ3RoIDwgNikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCByO1xuICAgICAgICAgIGlmIChmYy5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIHIgPSBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBvcHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgciA9IGZjKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAociAmJiB0eXBlb2Ygci50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByLnRoZW4oZGF0YSA9PiBjbGIobnVsbCwgZGF0YSkpLmNhdGNoKGNsYik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsYihudWxsLCByKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNsYihlcnIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBjbGIsIG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWxhbmd1YWdlcyB8fCAhbGFuZ3VhZ2VzWzBdKSByZXR1cm47XG4gICAgdGhpcy5zdG9yZS5hZGRSZXNvdXJjZShsYW5ndWFnZXNbMF0sIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKTtcbiAgfVxufVxuXG5jb25zdCBnZXQgPSAoKSA9PiAoe1xuICBkZWJ1ZzogZmFsc2UsXG4gIGluaXRJbW1lZGlhdGU6IHRydWUsXG4gIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gIGRlZmF1bHROUzogWyd0cmFuc2xhdGlvbiddLFxuICBmYWxsYmFja0xuZzogWydkZXYnXSxcbiAgZmFsbGJhY2tOUzogZmFsc2UsXG4gIHN1cHBvcnRlZExuZ3M6IGZhbHNlLFxuICBub25FeHBsaWNpdFN1cHBvcnRlZExuZ3M6IGZhbHNlLFxuICBsb2FkOiAnYWxsJyxcbiAgcHJlbG9hZDogZmFsc2UsXG4gIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0cnVlLFxuICBrZXlTZXBhcmF0b3I6ICcuJyxcbiAgbnNTZXBhcmF0b3I6ICc6JyxcbiAgcGx1cmFsU2VwYXJhdG9yOiAnXycsXG4gIGNvbnRleHRTZXBhcmF0b3I6ICdfJyxcbiAgcGFydGlhbEJ1bmRsZWRMYW5ndWFnZXM6IGZhbHNlLFxuICBzYXZlTWlzc2luZzogZmFsc2UsXG4gIHVwZGF0ZU1pc3Npbmc6IGZhbHNlLFxuICBzYXZlTWlzc2luZ1RvOiAnZmFsbGJhY2snLFxuICBzYXZlTWlzc2luZ1BsdXJhbHM6IHRydWUsXG4gIG1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSxcbiAgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyOiBmYWxzZSxcbiAgcG9zdFByb2Nlc3M6IGZhbHNlLFxuICBwb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZDogZmFsc2UsXG4gIHJldHVybk51bGw6IGZhbHNlLFxuICByZXR1cm5FbXB0eVN0cmluZzogdHJ1ZSxcbiAgcmV0dXJuT2JqZWN0czogZmFsc2UsXG4gIGpvaW5BcnJheXM6IGZhbHNlLFxuICByZXR1cm5lZE9iamVjdEhhbmRsZXI6IGZhbHNlLFxuICBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSxcbiAgYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiBmYWxzZSxcbiAgYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU6IGZhbHNlLFxuICBvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcjogYXJncyA9PiB7XG4gICAgbGV0IHJldCA9IHt9O1xuICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ29iamVjdCcpIHJldCA9IGFyZ3NbMV07XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMV0pKSByZXQuZGVmYXVsdFZhbHVlID0gYXJnc1sxXTtcbiAgICBpZiAoaXNTdHJpbmcoYXJnc1syXSkpIHJldC50RGVzY3JpcHRpb24gPSBhcmdzWzJdO1xuICAgIGlmICh0eXBlb2YgYXJnc1syXSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGFyZ3NbM10gPT09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gYXJnc1szXSB8fCBhcmdzWzJdO1xuICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICByZXRba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgZm9ybWF0OiB2YWx1ZSA9PiB2YWx1ZSxcbiAgICBwcmVmaXg6ICd7eycsXG4gICAgc3VmZml4OiAnfX0nLFxuICAgIGZvcm1hdFNlcGFyYXRvcjogJywnLFxuICAgIHVuZXNjYXBlUHJlZml4OiAnLScsXG4gICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgbmVzdGluZ1N1ZmZpeDogJyknLFxuICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yOiAnLCcsXG4gICAgbWF4UmVwbGFjZXM6IDEwMDAsXG4gICAgc2tpcE9uVmFyaWFibGVzOiB0cnVlXG4gIH1cbn0pO1xuY29uc3QgdHJhbnNmb3JtT3B0aW9ucyA9IG9wdGlvbnMgPT4ge1xuICBpZiAoaXNTdHJpbmcob3B0aW9ucy5ucykpIG9wdGlvbnMubnMgPSBbb3B0aW9ucy5uc107XG4gIGlmIChpc1N0cmluZyhvcHRpb25zLmZhbGxiYWNrTG5nKSkgb3B0aW9ucy5mYWxsYmFja0xuZyA9IFtvcHRpb25zLmZhbGxiYWNrTG5nXTtcbiAgaWYgKGlzU3RyaW5nKG9wdGlvbnMuZmFsbGJhY2tOUykpIG9wdGlvbnMuZmFsbGJhY2tOUyA9IFtvcHRpb25zLmZhbGxiYWNrTlNdO1xuICBpZiAob3B0aW9ucy5zdXBwb3J0ZWRMbmdzICYmIG9wdGlvbnMuc3VwcG9ydGVkTG5ncy5pbmRleE9mKCdjaW1vZGUnKSA8IDApIHtcbiAgICBvcHRpb25zLnN1cHBvcnRlZExuZ3MgPSBvcHRpb25zLnN1cHBvcnRlZExuZ3MuY29uY2F0KFsnY2ltb2RlJ10pO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufTtcblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuY29uc3QgYmluZE1lbWJlckZ1bmN0aW9ucyA9IGluc3QgPT4ge1xuICBjb25zdCBtZW1zID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGluc3QpKTtcbiAgbWVtcy5mb3JFYWNoKG1lbSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpbnN0W21lbV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGluc3RbbWVtXSA9IGluc3RbbWVtXS5iaW5kKGluc3QpO1xuICAgIH1cbiAgfSk7XG59O1xuY2xhc3MgSTE4biBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICB0aGlzLm1vZHVsZXMgPSB7XG4gICAgICBleHRlcm5hbDogW11cbiAgICB9O1xuICAgIGJpbmRNZW1iZXJGdW5jdGlvbnModGhpcyk7XG4gICAgaWYgKGNhbGxiYWNrICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIW9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG4gIGluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5kZWZhdWx0TlMgJiYgb3B0aW9ucy5kZWZhdWx0TlMgIT09IGZhbHNlICYmIG9wdGlvbnMubnMpIHtcbiAgICAgIGlmIChpc1N0cmluZyhvcHRpb25zLm5zKSkge1xuICAgICAgICBvcHRpb25zLmRlZmF1bHROUyA9IG9wdGlvbnMubnM7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubnMuaW5kZXhPZigndHJhbnNsYXRpb24nKSA8IDApIHtcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWZPcHRzID0gZ2V0KCk7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgLi4uZGVmT3B0cyxcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIC4uLnRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucylcbiAgICB9O1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJykge1xuICAgICAgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgICAgIC4uLmRlZk9wdHMuaW50ZXJwb2xhdGlvbixcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb25cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubnNTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIH1cbiAgICBjb25zdCBjcmVhdGVDbGFzc09uRGVtYW5kID0gQ2xhc3NPck9iamVjdCA9PiB7XG4gICAgICBpZiAoIUNsYXNzT3JPYmplY3QpIHJldHVybiBudWxsO1xuICAgICAgaWYgKHR5cGVvZiBDbGFzc09yT2JqZWN0ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gbmV3IENsYXNzT3JPYmplY3QoKTtcbiAgICAgIHJldHVybiBDbGFzc09yT2JqZWN0O1xuICAgIH07XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sb2dnZXIpIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxvZ2dlciksIHRoaXMub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQobnVsbCwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGxldCBmb3JtYXR0ZXI7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmZvcm1hdHRlcikge1xuICAgICAgICBmb3JtYXR0ZXIgPSB0aGlzLm1vZHVsZXMuZm9ybWF0dGVyO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgSW50bCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gRm9ybWF0dGVyO1xuICAgICAgfVxuICAgICAgY29uc3QgbHUgPSBuZXcgTGFuZ3VhZ2VVdGlsKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnN0b3JlID0gbmV3IFJlc291cmNlU3RvcmUodGhpcy5vcHRpb25zLnJlc291cmNlcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIGNvbnN0IHMgPSB0aGlzLnNlcnZpY2VzO1xuICAgICAgcy5sb2dnZXIgPSBiYXNlTG9nZ2VyO1xuICAgICAgcy5yZXNvdXJjZVN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgIHMubGFuZ3VhZ2VVdGlscyA9IGx1O1xuICAgICAgcy5wbHVyYWxSZXNvbHZlciA9IG5ldyBQbHVyYWxSZXNvbHZlcihsdSwge1xuICAgICAgICBwcmVwZW5kOiB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLFxuICAgICAgICBjb21wYXRpYmlsaXR5SlNPTjogdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OLFxuICAgICAgICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4XG4gICAgICB9KTtcbiAgICAgIGlmIChmb3JtYXR0ZXIgJiYgKCF0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgfHwgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0ID09PSBkZWZPcHRzLmludGVycG9sYXRpb24uZm9ybWF0KSkge1xuICAgICAgICBzLmZvcm1hdHRlciA9IGNyZWF0ZUNsYXNzT25EZW1hbmQoZm9ybWF0dGVyKTtcbiAgICAgICAgcy5mb3JtYXR0ZXIuaW5pdChzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgPSBzLmZvcm1hdHRlci5mb3JtYXQuYmluZChzLmZvcm1hdHRlcik7XG4gICAgICB9XG4gICAgICBzLmludGVycG9sYXRvciA9IG5ldyBJbnRlcnBvbGF0b3IodGhpcy5vcHRpb25zKTtcbiAgICAgIHMudXRpbHMgPSB7XG4gICAgICAgIGhhc0xvYWRlZE5hbWVzcGFjZTogdGhpcy5oYXNMb2FkZWROYW1lc3BhY2UuYmluZCh0aGlzKVxuICAgICAgfTtcbiAgICAgIHMuYmFja2VuZENvbm5lY3RvciA9IG5ldyBDb25uZWN0b3IoY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMuYmFja2VuZCksIHMucmVzb3VyY2VTdG9yZSwgcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcikge1xuICAgICAgICBzLmxhbmd1YWdlRGV0ZWN0b3IgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKTtcbiAgICAgICAgaWYgKHMubGFuZ3VhZ2VEZXRlY3Rvci5pbml0KSBzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdChzLCB0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KSB7XG4gICAgICAgIHMuaTE4bkZvcm1hdCA9IGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpO1xuICAgICAgICBpZiAocy5pMThuRm9ybWF0LmluaXQpIHMuaTE4bkZvcm1hdC5pbml0KHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IodGhpcy5zZXJ2aWNlcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubW9kdWxlcy5leHRlcm5hbC5mb3JFYWNoKG0gPT4ge1xuICAgICAgICBpZiAobS5pbml0KSBtLmluaXQodGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5mb3JtYXQgPSB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ7XG4gICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSBub29wO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgJiYgIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5vcHRpb25zLmxuZykge1xuICAgICAgY29uc3QgY29kZXMgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO1xuICAgICAgaWYgKGNvZGVzLmxlbmd0aCA+IDAgJiYgY29kZXNbMF0gIT09ICdkZXYnKSB0aGlzLm9wdGlvbnMubG5nID0gY29kZXNbMF07XG4gICAgfVxuICAgIGlmICghdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLm9wdGlvbnMubG5nKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdpbml0OiBubyBsYW5ndWFnZURldGVjdG9yIGlzIHVzZWQgYW5kIG5vIGxuZyBpcyBkZWZpbmVkJyk7XG4gICAgfVxuICAgIGNvbnN0IHN0b3JlQXBpID0gWydnZXRSZXNvdXJjZScsICdoYXNSZXNvdXJjZUJ1bmRsZScsICdnZXRSZXNvdXJjZUJ1bmRsZScsICdnZXREYXRhQnlMYW5ndWFnZSddO1xuICAgIHN0b3JlQXBpLmZvckVhY2goZmNOYW1lID0+IHtcbiAgICAgIHRoaXNbZmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnN0b3JlW2ZjTmFtZV0oLi4uYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3Qgc3RvcmVBcGlDaGFpbmVkID0gWydhZGRSZXNvdXJjZScsICdhZGRSZXNvdXJjZXMnLCAnYWRkUmVzb3VyY2VCdW5kbGUnLCAncmVtb3ZlUmVzb3VyY2VCdW5kbGUnXTtcbiAgICBzdG9yZUFwaUNoYWluZWQuZm9yRWFjaChmY05hbWUgPT4ge1xuICAgICAgdGhpc1tmY05hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zdG9yZVtmY05hbWVdKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBmaW5pc2ggPSAoZXJyLCB0KSA9PiB7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCAmJiAhdGhpcy5pbml0aWFsaXplZFN0b3JlT25jZSkgdGhpcy5sb2dnZXIud2FybignaW5pdDogaTE4bmV4dCBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiBZb3Ugc2hvdWxkIGNhbGwgaW5pdCBqdXN0IG9uY2UhJyk7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlzQ2xvbmUpIHRoaXMubG9nZ2VyLmxvZygnaW5pdGlhbGl6ZWQnLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmVtaXQoJ2luaXRpYWxpemVkJywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0KTtcbiAgICAgICAgY2FsbGJhY2soZXJyLCB0KTtcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScgJiYgIXRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuIGZpbmlzaChudWxsLCB0aGlzLnQuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmNoYW5nZUxhbmd1YWdlKHRoaXMub3B0aW9ucy5sbmcsIGZpbmlzaCk7XG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJlc291cmNlcyB8fCAhdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgIGxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dChsb2FkLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIGxvYWRSZXNvdXJjZXMobGFuZ3VhZ2UpIHtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gICAgbGV0IHVzZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIGNvbnN0IHVzZWRMbmcgPSBpc1N0cmluZyhsYW5ndWFnZSkgPyBsYW5ndWFnZSA6IHRoaXMubGFuZ3VhZ2U7XG4gICAgaWYgKHR5cGVvZiBsYW5ndWFnZSA9PT0gJ2Z1bmN0aW9uJykgdXNlZENhbGxiYWNrID0gbGFuZ3VhZ2U7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucmVzb3VyY2VzIHx8IHRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcykge1xuICAgICAgaWYgKHVzZWRMbmcgJiYgdXNlZExuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJyAmJiAoIXRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IHRoaXMub3B0aW9ucy5wcmVsb2FkLmxlbmd0aCA9PT0gMCkpIHJldHVybiB1c2VkQ2FsbGJhY2soKTtcbiAgICAgIGNvbnN0IHRvTG9hZCA9IFtdO1xuICAgICAgY29uc3QgYXBwZW5kID0gbG5nID0+IHtcbiAgICAgICAgaWYgKCFsbmcpIHJldHVybjtcbiAgICAgICAgaWYgKGxuZyA9PT0gJ2NpbW9kZScpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5ncyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobG5nKTtcbiAgICAgICAgbG5ncy5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmIChsID09PSAnY2ltb2RlJykgcmV0dXJuO1xuICAgICAgICAgIGlmICh0b0xvYWQuaW5kZXhPZihsKSA8IDApIHRvTG9hZC5wdXNoKGwpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBpZiAoIXVzZWRMbmcpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgICAgZmFsbGJhY2tzLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwZW5kKHVzZWRMbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmVsb2FkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmxvYWQodG9Mb2FkLCB0aGlzLm9wdGlvbnMubnMsIGUgPT4ge1xuICAgICAgICBpZiAoIWUgJiYgIXRoaXMucmVzb2x2ZWRMYW5ndWFnZSAmJiB0aGlzLmxhbmd1YWdlKSB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UodGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIHVzZWRDYWxsYmFjayhlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VkQ2FsbGJhY2sobnVsbCk7XG4gICAgfVxuICB9XG4gIHJlbG9hZFJlc291cmNlcyhsbmdzLCBucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKHR5cGVvZiBsbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGxuZ3M7XG4gICAgICBsbmdzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG5zO1xuICAgICAgbnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghbG5ncykgbG5ncyA9IHRoaXMubGFuZ3VhZ2VzO1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLm5zO1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGxuZ3MsIG5zLCBlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgdXNlKG1vZHVsZSkge1xuICAgIGlmICghbW9kdWxlKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmICghbW9kdWxlLnR5cGUpIHRocm93IG5ldyBFcnJvcignWW91IGFyZSBwYXNzaW5nIGEgd3JvbmcgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2JhY2tlbmQnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuYmFja2VuZCA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbG9nZ2VyJyB8fCBtb2R1bGUubG9nICYmIG1vZHVsZS53YXJuICYmIG1vZHVsZS5lcnJvcikge1xuICAgICAgdGhpcy5tb2R1bGVzLmxvZ2dlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbGFuZ3VhZ2VEZXRlY3RvcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdpMThuRm9ybWF0Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ3Bvc3RQcm9jZXNzb3InKSB7XG4gICAgICBwb3N0UHJvY2Vzc29yLmFkZFBvc3RQcm9jZXNzb3IobW9kdWxlKTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnZm9ybWF0dGVyJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmZvcm1hdHRlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnM3JkUGFydHknKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwucHVzaChtb2R1bGUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRSZXNvbHZlZExhbmd1YWdlKGwpIHtcbiAgICBpZiAoIWwgfHwgIXRoaXMubGFuZ3VhZ2VzKSByZXR1cm47XG4gICAgaWYgKFsnY2ltb2RlJywgJ2RldiddLmluZGV4T2YobCkgPiAtMSkgcmV0dXJuO1xuICAgIGZvciAobGV0IGxpID0gMDsgbGkgPCB0aGlzLmxhbmd1YWdlcy5sZW5ndGg7IGxpKyspIHtcbiAgICAgIGNvbnN0IGxuZ0luTG5ncyA9IHRoaXMubGFuZ3VhZ2VzW2xpXTtcbiAgICAgIGlmIChbJ2NpbW9kZScsICdkZXYnXS5pbmRleE9mKGxuZ0luTG5ncykgPiAtMSkgY29udGludWU7XG4gICAgICBpZiAodGhpcy5zdG9yZS5oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nSW5MbmdzKSkge1xuICAgICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSBsbmdJbkxuZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjaGFuZ2VMYW5ndWFnZShsbmcsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IGxuZztcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5naW5nJywgbG5nKTtcbiAgICBjb25zdCBzZXRMbmdQcm9wcyA9IGwgPT4ge1xuICAgICAgdGhpcy5sYW5ndWFnZSA9IGw7XG4gICAgICB0aGlzLmxhbmd1YWdlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobCk7XG4gICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UobCk7XG4gICAgfTtcbiAgICBjb25zdCBkb25lID0gKGVyciwgbCkgPT4ge1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi50KC4uLmFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMbmcgPSBsbmdzID0+IHtcbiAgICAgIGlmICghbG5nICYmICFsbmdzICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgbG5ncyA9IFtdO1xuICAgICAgY29uc3QgbCA9IGlzU3RyaW5nKGxuZ3MpID8gbG5ncyA6IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMobG5ncyk7XG4gICAgICBpZiAobCkge1xuICAgICAgICBpZiAoIXRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBzZXRMbmdQcm9wcyhsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudHJhbnNsYXRvci5sYW5ndWFnZSkgdGhpcy50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKGwpO1xuICAgICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZSkgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKGwpO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2FkUmVzb3VyY2VzKGwsIGVyciA9PiB7XG4gICAgICAgIGRvbmUoZXJyLCBsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmMpIHtcbiAgICAgIHNldExuZyh0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KCkpO1xuICAgIH0gZWxzZSBpZiAoIWxuZyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpLnRoZW4oc2V0TG5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qoc2V0TG5nKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG5nKGxuZyk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBnZXRGaXhlZFQobG5nLCBucywga2V5UHJlZml4KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgY29uc3QgZml4ZWRUID0gZnVuY3Rpb24gKGtleSwgb3B0cykge1xuICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdCA9IG5ldyBBcnJheShfbGVuMyA+IDIgPyBfbGVuMyAtIDIgOiAwKSwgX2tleTMgPSAyOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgICAgcmVzdFtfa2V5MyAtIDJdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gX3RoaXMzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2tleSwgb3B0c10uY29uY2F0KHJlc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5sbmcgPSBvcHRpb25zLmxuZyB8fCBmaXhlZFQubG5nO1xuICAgICAgb3B0aW9ucy5sbmdzID0gb3B0aW9ucy5sbmdzIHx8IGZpeGVkVC5sbmdzO1xuICAgICAgb3B0aW9ucy5ucyA9IG9wdGlvbnMubnMgfHwgZml4ZWRULm5zO1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICE9PSAnJykgb3B0aW9ucy5rZXlQcmVmaXggPSBvcHRpb25zLmtleVByZWZpeCB8fCBrZXlQcmVmaXggfHwgZml4ZWRULmtleVByZWZpeDtcbiAgICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IF90aGlzMy5vcHRpb25zLmtleVNlcGFyYXRvciB8fCAnLic7XG4gICAgICBsZXQgcmVzdWx0S2V5O1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICYmIEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICByZXN1bHRLZXkgPSBrZXkubWFwKGsgPT4gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0S2V5ID0gb3B0aW9ucy5rZXlQcmVmaXggPyBgJHtvcHRpb25zLmtleVByZWZpeH0ke2tleVNlcGFyYXRvcn0ke2tleX1gIDoga2V5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzMy50KHJlc3VsdEtleSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBpZiAoaXNTdHJpbmcobG5nKSkge1xuICAgICAgZml4ZWRULmxuZyA9IGxuZztcbiAgICB9IGVsc2Uge1xuICAgICAgZml4ZWRULmxuZ3MgPSBsbmc7XG4gICAgfVxuICAgIGZpeGVkVC5ucyA9IG5zO1xuICAgIGZpeGVkVC5rZXlQcmVmaXggPSBrZXlQcmVmaXg7XG4gICAgcmV0dXJuIGZpeGVkVDtcbiAgfVxuICB0KCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0b3IgJiYgdGhpcy50cmFuc2xhdG9yLnRyYW5zbGF0ZSguLi5hcmd1bWVudHMpO1xuICB9XG4gIGV4aXN0cygpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci5leGlzdHMoLi4uYXJndW1lbnRzKTtcbiAgfVxuICBzZXREZWZhdWx0TmFtZXNwYWNlKG5zKSB7XG4gICAgdGhpcy5vcHRpb25zLmRlZmF1bHROUyA9IG5zO1xuICB9XG4gIGhhc0xvYWRlZE5hbWVzcGFjZShucykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuZXh0IHdhcyBub3QgaW5pdGlhbGl6ZWQnLCB0aGlzLmxhbmd1YWdlcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5sYW5ndWFnZXMgfHwgIXRoaXMubGFuZ3VhZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuLmxhbmd1YWdlcyB3ZXJlIHVuZGVmaW5lZCBvciBlbXB0eScsIHRoaXMubGFuZ3VhZ2VzKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbG5nID0gb3B0aW9ucy5sbmcgfHwgdGhpcy5yZXNvbHZlZExhbmd1YWdlIHx8IHRoaXMubGFuZ3VhZ2VzWzBdO1xuICAgIGNvbnN0IGZhbGxiYWNrTG5nID0gdGhpcy5vcHRpb25zID8gdGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nIDogZmFsc2U7XG4gICAgY29uc3QgbGFzdExuZyA9IHRoaXMubGFuZ3VhZ2VzW3RoaXMubGFuZ3VhZ2VzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IGxvYWROb3RQZW5kaW5nID0gKGwsIG4pID0+IHtcbiAgICAgIGNvbnN0IGxvYWRTdGF0ZSA9IHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtsfXwke259YF07XG4gICAgICByZXR1cm4gbG9hZFN0YXRlID09PSAtMSB8fCBsb2FkU3RhdGUgPT09IDAgfHwgbG9hZFN0YXRlID09PSAyO1xuICAgIH07XG4gICAgaWYgKG9wdGlvbnMucHJlY2hlY2spIHtcbiAgICAgIGNvbnN0IHByZVJlc3VsdCA9IG9wdGlvbnMucHJlY2hlY2sodGhpcywgbG9hZE5vdFBlbmRpbmcpO1xuICAgICAgaWYgKHByZVJlc3VsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gcHJlUmVzdWx0O1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKCF0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZCB8fCB0aGlzLm9wdGlvbnMucmVzb3VyY2VzICYmICF0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHJldHVybiB0cnVlO1xuICAgIGlmIChsb2FkTm90UGVuZGluZyhsbmcsIG5zKSAmJiAoIWZhbGxiYWNrTG5nIHx8IGxvYWROb3RQZW5kaW5nKGxhc3RMbmcsIG5zKSkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsb2FkTmFtZXNwYWNlcyhucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMubnMpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKG5zKSkgbnMgPSBbbnNdO1xuICAgIG5zLmZvckVhY2gobiA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSB0aGlzLm9wdGlvbnMubnMucHVzaChuKTtcbiAgICB9KTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgbG9hZExhbmd1YWdlcyhsbmdzLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBpZiAoaXNTdHJpbmcobG5ncykpIGxuZ3MgPSBbbG5nc107XG4gICAgY29uc3QgcHJlbG9hZGVkID0gdGhpcy5vcHRpb25zLnByZWxvYWQgfHwgW107XG4gICAgY29uc3QgbmV3TG5ncyA9IGxuZ3MuZmlsdGVyKGxuZyA9PiBwcmVsb2FkZWQuaW5kZXhPZihsbmcpIDwgMCAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRDb2RlKGxuZykpO1xuICAgIGlmICghbmV3TG5ncy5sZW5ndGgpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zLnByZWxvYWQgPSBwcmVsb2FkZWQuY29uY2F0KG5ld0xuZ3MpO1xuICAgIHRoaXMubG9hZFJlc291cmNlcyhlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBkaXIobG5nKSB7XG4gICAgaWYgKCFsbmcpIGxuZyA9IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCAodGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5sYW5ndWFnZXMubGVuZ3RoID4gMCA/IHRoaXMubGFuZ3VhZ2VzWzBdIDogdGhpcy5sYW5ndWFnZSk7XG4gICAgaWYgKCFsbmcpIHJldHVybiAncnRsJztcbiAgICBjb25zdCBydGxMbmdzID0gWydhcicsICdzaHUnLCAnc3FyJywgJ3NzaCcsICd4YWEnLCAneWhkJywgJ3l1ZCcsICdhYW8nLCAnYWJoJywgJ2FidicsICdhY20nLCAnYWNxJywgJ2FjdycsICdhY3gnLCAnYWN5JywgJ2FkZicsICdhZHMnLCAnYWViJywgJ2FlYycsICdhZmInLCAnYWpwJywgJ2FwYycsICdhcGQnLCAnYXJiJywgJ2FycScsICdhcnMnLCAnYXJ5JywgJ2FyeicsICdhdXonLCAnYXZsJywgJ2F5aCcsICdheWwnLCAnYXluJywgJ2F5cCcsICdiYnonLCAncGdhJywgJ2hlJywgJ2l3JywgJ3BzJywgJ3BidCcsICdwYnUnLCAncHN0JywgJ3BycCcsICdwcmQnLCAndWcnLCAndXInLCAneWRkJywgJ3lkcycsICd5aWgnLCAnamknLCAneWknLCAnaGJvJywgJ21lbicsICd4bW4nLCAnZmEnLCAnanByJywgJ3BlbycsICdwZXMnLCAncHJzJywgJ2R2JywgJ3NhbScsICdja2InXTtcbiAgICBjb25zdCBsYW5ndWFnZVV0aWxzID0gdGhpcy5zZXJ2aWNlcyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMgfHwgbmV3IExhbmd1YWdlVXRpbChnZXQoKSk7XG4gICAgcmV0dXJuIHJ0bExuZ3MuaW5kZXhPZihsYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGxuZykpID4gLTEgfHwgbG5nLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignLWFyYWInKSA+IDEgPyAncnRsJyA6ICdsdHInO1xuICB9XG4gIHN0YXRpYyBjcmVhdGVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5ldyBJMThuKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuICBjbG9uZUluc3RhbmNlKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gICAgY29uc3QgZm9ya1Jlc291cmNlU3RvcmUgPSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkgZGVsZXRlIG9wdGlvbnMuZm9ya1Jlc291cmNlU3RvcmU7XG4gICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAuLi57XG4gICAgICAgIGlzQ2xvbmU6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsb25lID0gbmV3IEkxOG4obWVyZ2VkT3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuZGVidWcgIT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnByZWZpeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbG9uZS5sb2dnZXIgPSBjbG9uZS5sb2dnZXIuY2xvbmUob3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbnN0IG1lbWJlcnNUb0NvcHkgPSBbJ3N0b3JlJywgJ3NlcnZpY2VzJywgJ2xhbmd1YWdlJ107XG4gICAgbWVtYmVyc1RvQ29weS5mb3JFYWNoKG0gPT4ge1xuICAgICAgY2xvbmVbbV0gPSB0aGlzW21dO1xuICAgIH0pO1xuICAgIGNsb25lLnNlcnZpY2VzID0ge1xuICAgICAgLi4udGhpcy5zZXJ2aWNlc1xuICAgIH07XG4gICAgY2xvbmUuc2VydmljZXMudXRpbHMgPSB7XG4gICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IGNsb25lLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKGNsb25lKVxuICAgIH07XG4gICAgaWYgKGZvcmtSZXNvdXJjZVN0b3JlKSB7XG4gICAgICBjbG9uZS5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMuc3RvcmUuZGF0YSwgbWVyZ2VkT3B0aW9ucyk7XG4gICAgICBjbG9uZS5zZXJ2aWNlcy5yZXNvdXJjZVN0b3JlID0gY2xvbmUuc3RvcmU7XG4gICAgfVxuICAgIGNsb25lLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcihjbG9uZS5zZXJ2aWNlcywgbWVyZ2VkT3B0aW9ucyk7XG4gICAgY2xvbmUudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW40ID4gMSA/IF9sZW40IC0gMSA6IDApLCBfa2V5NCA9IDE7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgIH1cbiAgICAgIGNsb25lLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIGNsb25lLmluaXQobWVyZ2VkT3B0aW9ucywgY2FsbGJhY2spO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub3B0aW9ucyA9IG1lcmdlZE9wdGlvbnM7XG4gICAgY2xvbmUudHJhbnNsYXRvci5iYWNrZW5kQ29ubmVjdG9yLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIHN0b3JlOiB0aGlzLnN0b3JlLFxuICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UsXG4gICAgICBsYW5ndWFnZXM6IHRoaXMubGFuZ3VhZ2VzLFxuICAgICAgcmVzb2x2ZWRMYW5ndWFnZTogdGhpcy5yZXNvbHZlZExhbmd1YWdlXG4gICAgfTtcbiAgfVxufVxuY29uc3QgaW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlKCk7XG5pbnN0YW5jZS5jcmVhdGVJbnN0YW5jZSA9IEkxOG4uY3JlYXRlSW5zdGFuY2U7XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFuY2U7XG4iLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSTE4bkNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEkxOG5leHRQcm92aWRlcihfcmVmKSB7XG4gIGxldCB7XG4gICAgaTE4bixcbiAgICBkZWZhdWx0TlMsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHZhbHVlID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIGkxOG4sXG4gICAgZGVmYXVsdE5TXG4gIH0pLCBbaTE4biwgZGVmYXVsdE5TXSk7XG4gIHJldHVybiBjcmVhdGVFbGVtZW50KEkxOG5Db250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufSIsImltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBub2Rlc1RvU3RyaW5nLCBUcmFucyBhcyBUcmFuc1dpdGhvdXRDb250ZXh0IH0gZnJvbSAnLi9UcmFuc1dpdGhvdXRDb250ZXh0LmpzJztcbmltcG9ydCB7IGdldEkxOG4sIEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCB7IG5vZGVzVG9TdHJpbmcgfTtcbmV4cG9ydCBmdW5jdGlvbiBUcmFucyhfcmVmKSB7XG4gIGxldCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY291bnQsXG4gICAgcGFyZW50LFxuICAgIGkxOG5LZXksXG4gICAgY29udGV4dCxcbiAgICB0T3B0aW9ucyA9IHt9LFxuICAgIHZhbHVlcyxcbiAgICBkZWZhdWx0cyxcbiAgICBjb21wb25lbnRzLFxuICAgIG5zLFxuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHMsXG4gICAgdDogdEZyb21Qcm9wcyxcbiAgICBzaG91bGRVbmVzY2FwZSxcbiAgICAuLi5hZGRpdGlvbmFsUHJvcHNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHQsXG4gICAgZGVmYXVsdE5TOiBkZWZhdWx0TlNGcm9tQ29udGV4dFxuICB9ID0gdXNlQ29udGV4dChJMThuQ29udGV4dCkgfHwge307XG4gIGNvbnN0IGkxOG4gPSBpMThuRnJvbVByb3BzIHx8IGkxOG5Gcm9tQ29udGV4dCB8fCBnZXRJMThuKCk7XG4gIGNvbnN0IHQgPSB0RnJvbVByb3BzIHx8IGkxOG4gJiYgaTE4bi50LmJpbmQoaTE4bik7XG4gIHJldHVybiBUcmFuc1dpdGhvdXRDb250ZXh0KHtcbiAgICBjaGlsZHJlbixcbiAgICBjb3VudCxcbiAgICBwYXJlbnQsXG4gICAgaTE4bktleSxcbiAgICBjb250ZXh0LFxuICAgIHRPcHRpb25zLFxuICAgIHZhbHVlcyxcbiAgICBkZWZhdWx0cyxcbiAgICBjb21wb25lbnRzLFxuICAgIG5zOiBucyB8fCB0ICYmIHQubnMgfHwgZGVmYXVsdE5TRnJvbUNvbnRleHQgfHwgaTE4biAmJiBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUyxcbiAgICBpMThuLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0pO1xufSIsImltcG9ydCB7IEZyYWdtZW50LCBpc1ZhbGlkRWxlbWVudCwgY2xvbmVFbGVtZW50LCBjcmVhdGVFbGVtZW50LCBDaGlsZHJlbiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIVE1MIGZyb20gJ2h0bWwtcGFyc2Utc3RyaW5naWZ5JztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc1N0cmluZywgd2Fybiwgd2Fybk9uY2UgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IGdldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBnZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuY29uc3QgaGFzQ2hpbGRyZW4gPSAobm9kZSwgY2hlY2tMZW5ndGgpID0+IHtcbiAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGJhc2UgPSBub2RlLnByb3BzID8gbm9kZS5wcm9wcy5jaGlsZHJlbiA6IG5vZGUuY2hpbGRyZW47XG4gIGlmIChjaGVja0xlbmd0aCkgcmV0dXJuIGJhc2UubGVuZ3RoID4gMDtcbiAgcmV0dXJuICEhYmFzZTtcbn07XG5jb25zdCBnZXRDaGlsZHJlbiA9IG5vZGUgPT4ge1xuICBpZiAoIW5vZGUpIHJldHVybiBbXTtcbiAgY29uc3QgY2hpbGRyZW4gPSBub2RlLnByb3BzID8gbm9kZS5wcm9wcy5jaGlsZHJlbiA6IG5vZGUuY2hpbGRyZW47XG4gIHJldHVybiBub2RlLnByb3BzICYmIG5vZGUucHJvcHMuaTE4bklzRHluYW1pY0xpc3QgPyBnZXRBc0FycmF5KGNoaWxkcmVuKSA6IGNoaWxkcmVuO1xufTtcbmNvbnN0IGhhc1ZhbGlkUmVhY3RDaGlsZHJlbiA9IGNoaWxkcmVuID0+IEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmIGNoaWxkcmVuLmV2ZXJ5KGlzVmFsaWRFbGVtZW50KTtcbmNvbnN0IGdldEFzQXJyYXkgPSBkYXRhID0+IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuY29uc3QgbWVyZ2VQcm9wcyA9IChzb3VyY2UsIHRhcmdldCkgPT4ge1xuICBjb25zdCBuZXdUYXJnZXQgPSB7XG4gICAgLi4udGFyZ2V0XG4gIH07XG4gIG5ld1RhcmdldC5wcm9wcyA9IE9iamVjdC5hc3NpZ24oc291cmNlLnByb3BzLCB0YXJnZXQucHJvcHMpO1xuICByZXR1cm4gbmV3VGFyZ2V0O1xufTtcbmV4cG9ydCBjb25zdCBub2Rlc1RvU3RyaW5nID0gKGNoaWxkcmVuLCBpMThuT3B0aW9ucykgPT4ge1xuICBpZiAoIWNoaWxkcmVuKSByZXR1cm4gJyc7XG4gIGxldCBzdHJpbmdOb2RlID0gJyc7XG4gIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRBc0FycmF5KGNoaWxkcmVuKTtcbiAgY29uc3Qga2VlcEFycmF5ID0gaTE4bk9wdGlvbnMudHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXMgJiYgaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgPyBpMThuT3B0aW9ucy50cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvciA6IFtdO1xuICBjaGlsZHJlbkFycmF5LmZvckVhY2goKGNoaWxkLCBjaGlsZEluZGV4KSA9PiB7XG4gICAgaWYgKGlzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgc3RyaW5nTm9kZSArPSBgJHtjaGlsZH1gO1xuICAgIH0gZWxzZSBpZiAoaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb3BzLFxuICAgICAgICB0eXBlXG4gICAgICB9ID0gY2hpbGQ7XG4gICAgICBjb25zdCBjaGlsZFByb3BzQ291bnQgPSBPYmplY3Qua2V5cyhwcm9wcykubGVuZ3RoO1xuICAgICAgY29uc3Qgc2hvdWxkS2VlcENoaWxkID0ga2VlcEFycmF5LmluZGV4T2YodHlwZSkgPiAtMTtcbiAgICAgIGNvbnN0IGNoaWxkQ2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmICghY2hpbGRDaGlsZHJlbiAmJiBzaG91bGRLZWVwQ2hpbGQgJiYgIWNoaWxkUHJvcHNDb3VudCkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHt0eXBlfS8+YDtcbiAgICAgIH0gZWxzZSBpZiAoIWNoaWxkQ2hpbGRyZW4gJiYgKCFzaG91bGRLZWVwQ2hpbGQgfHwgY2hpbGRQcm9wc0NvdW50KSB8fCBwcm9wcy5pMThuSXNEeW5hbWljTGlzdCkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHtjaGlsZEluZGV4fT48LyR7Y2hpbGRJbmRleH0+YDtcbiAgICAgIH0gZWxzZSBpZiAoc2hvdWxkS2VlcENoaWxkICYmIGNoaWxkUHJvcHNDb3VudCA9PT0gMSAmJiBpc1N0cmluZyhjaGlsZENoaWxkcmVuKSkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHt0eXBlfT4ke2NoaWxkQ2hpbGRyZW59PC8ke3R5cGV9PmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbm9kZXNUb1N0cmluZyhjaGlsZENoaWxkcmVuLCBpMThuT3B0aW9ucyk7XG4gICAgICAgIHN0cmluZ05vZGUgKz0gYDwke2NoaWxkSW5kZXh9PiR7Y29udGVudH08LyR7Y2hpbGRJbmRleH0+YDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoaWxkID09PSBudWxsKSB7XG4gICAgICB3YXJuKGBUcmFuczogdGhlIHBhc3NlZCBpbiB2YWx1ZSBpcyBpbnZhbGlkIC0gc2VlbXMgeW91IHBhc3NlZCBpbiBhIG51bGwgY2hpbGQuYCk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChjaGlsZCkpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybWF0LFxuICAgICAgICAuLi5jbG9uZVxuICAgICAgfSA9IGNoaWxkO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNsb25lKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZvcm1hdCA/IGAke2tleXNbMF19LCAke2Zvcm1hdH1gIDoga2V5c1swXTtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBge3ske3ZhbHVlfX19YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oYHJlYWN0LWkxOG5leHQ6IHRoZSBwYXNzZWQgaW4gb2JqZWN0IGNvbnRhaW5lZCBtb3JlIHRoYW4gb25lIHZhcmlhYmxlIC0gdGhlIG9iamVjdCBzaG91bGQgbG9vayBsaWtlIHt7IHZhbHVlLCBmb3JtYXQgfX0gd2hlcmUgZm9ybWF0IGlzIG9wdGlvbmFsLmAsIGNoaWxkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2FybihgVHJhbnM6IHRoZSBwYXNzZWQgaW4gdmFsdWUgaXMgaW52YWxpZCAtIHNlZW1zIHlvdSBwYXNzZWQgaW4gYSB2YXJpYWJsZSBsaWtlIHtudW1iZXJ9IC0gcGxlYXNlIHBhc3MgaW4gdmFyaWFibGVzIGZvciBpbnRlcnBvbGF0aW9uIGFzIGZ1bGwgb2JqZWN0cyBsaWtlIHt7bnVtYmVyfX0uYCwgY2hpbGQpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzdHJpbmdOb2RlO1xufTtcbmNvbnN0IHJlbmRlck5vZGVzID0gKGNoaWxkcmVuLCB0YXJnZXRTdHJpbmcsIGkxOG4sIGkxOG5PcHRpb25zLCBjb21iaW5lZFRPcHRzLCBzaG91bGRVbmVzY2FwZSkgPT4ge1xuICBpZiAodGFyZ2V0U3RyaW5nID09PSAnJykgcmV0dXJuIFtdO1xuICBjb25zdCBrZWVwQXJyYXkgPSBpMThuT3B0aW9ucy50cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvciB8fCBbXTtcbiAgY29uc3QgZW1wdHlDaGlsZHJlbkJ1dE5lZWRzSGFuZGxpbmcgPSB0YXJnZXRTdHJpbmcgJiYgbmV3IFJlZ0V4cChrZWVwQXJyYXkubWFwKGtlZXAgPT4gYDwke2tlZXB9YCkuam9pbignfCcpKS50ZXN0KHRhcmdldFN0cmluZyk7XG4gIGlmICghY2hpbGRyZW4gJiYgIWVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nICYmICFzaG91bGRVbmVzY2FwZSkgcmV0dXJuIFt0YXJnZXRTdHJpbmddO1xuICBjb25zdCBkYXRhID0ge307XG4gIGNvbnN0IGdldERhdGEgPSBjaGlsZHMgPT4ge1xuICAgIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRBc0FycmF5KGNoaWxkcyk7XG4gICAgY2hpbGRyZW5BcnJheS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmIChpc1N0cmluZyhjaGlsZCkpIHJldHVybjtcbiAgICAgIGlmIChoYXNDaGlsZHJlbihjaGlsZCkpIGdldERhdGEoZ2V0Q2hpbGRyZW4oY2hpbGQpKTtlbHNlIGlmIChpc09iamVjdChjaGlsZCkgJiYgIWlzVmFsaWRFbGVtZW50KGNoaWxkKSkgT2JqZWN0LmFzc2lnbihkYXRhLCBjaGlsZCk7XG4gICAgfSk7XG4gIH07XG4gIGdldERhdGEoY2hpbGRyZW4pO1xuICBjb25zdCBhc3QgPSBIVE1MLnBhcnNlKGA8MD4ke3RhcmdldFN0cmluZ308LzA+YCk7XG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgLi4uZGF0YSxcbiAgICAuLi5jb21iaW5lZFRPcHRzXG4gIH07XG4gIGNvbnN0IHJlbmRlcklubmVyID0gKGNoaWxkLCBub2RlLCByb290UmVhY3ROb2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGRzID0gZ2V0Q2hpbGRyZW4oY2hpbGQpO1xuICAgIGNvbnN0IG1hcHBlZENoaWxkcmVuID0gbWFwQVNUKGNoaWxkcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgcmV0dXJuIGhhc1ZhbGlkUmVhY3RDaGlsZHJlbihjaGlsZHMpICYmIG1hcHBlZENoaWxkcmVuLmxlbmd0aCA9PT0gMCB8fCBjaGlsZC5wcm9wcyAmJiBjaGlsZC5wcm9wcy5pMThuSXNEeW5hbWljTGlzdCA/IGNoaWxkcyA6IG1hcHBlZENoaWxkcmVuO1xuICB9O1xuICBjb25zdCBwdXNoVHJhbnNsYXRlZEpTWCA9IChjaGlsZCwgaW5uZXIsIG1lbSwgaSwgaXNWb2lkKSA9PiB7XG4gICAgaWYgKGNoaWxkLmR1bW15KSB7XG4gICAgICBjaGlsZC5jaGlsZHJlbiA9IGlubmVyO1xuICAgICAgbWVtLnB1c2goY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgIGtleTogaVxuICAgICAgfSwgaXNWb2lkID8gdW5kZWZpbmVkIDogaW5uZXIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVtLnB1c2goLi4uQ2hpbGRyZW4ubWFwKFtjaGlsZF0sIGMgPT4ge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgICAuLi5jLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5pMThuSXNEeW5hbWljTGlzdDtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoYy50eXBlLCB7XG4gICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAga2V5OiBpLFxuICAgICAgICAgIHJlZjogYy5yZWZcbiAgICAgICAgfSwgaXNWb2lkID8gbnVsbCA6IGlubmVyKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1hcEFTVCA9IChyZWFjdE5vZGUsIGFzdE5vZGUsIHJvb3RSZWFjdE5vZGUpID0+IHtcbiAgICBjb25zdCByZWFjdE5vZGVzID0gZ2V0QXNBcnJheShyZWFjdE5vZGUpO1xuICAgIGNvbnN0IGFzdE5vZGVzID0gZ2V0QXNBcnJheShhc3ROb2RlKTtcbiAgICByZXR1cm4gYXN0Tm9kZXMucmVkdWNlKChtZW0sIG5vZGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uQ29udGVudCA9IG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlblswXSAmJiBub2RlLmNoaWxkcmVuWzBdLmNvbnRlbnQgJiYgaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobm9kZS5jaGlsZHJlblswXS5jb250ZW50LCBvcHRzLCBpMThuLmxhbmd1YWdlKTtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgIGxldCB0bXAgPSByZWFjdE5vZGVzW3BhcnNlSW50KG5vZGUubmFtZSwgMTApXTtcbiAgICAgICAgaWYgKHJvb3RSZWFjdE5vZGUubGVuZ3RoID09PSAxICYmICF0bXApIHRtcCA9IHJvb3RSZWFjdE5vZGVbMF1bbm9kZS5uYW1lXTtcbiAgICAgICAgaWYgKCF0bXApIHRtcCA9IHt9O1xuICAgICAgICBjb25zdCBjaGlsZCA9IE9iamVjdC5rZXlzKG5vZGUuYXR0cnMpLmxlbmd0aCAhPT0gMCA/IG1lcmdlUHJvcHMoe1xuICAgICAgICAgIHByb3BzOiBub2RlLmF0dHJzXG4gICAgICAgIH0sIHRtcCkgOiB0bXA7XG4gICAgICAgIGNvbnN0IGlzRWxlbWVudCA9IGlzVmFsaWRFbGVtZW50KGNoaWxkKTtcbiAgICAgICAgY29uc3QgaXNWYWxpZFRyYW5zbGF0aW9uV2l0aENoaWxkcmVuID0gaXNFbGVtZW50ICYmIGhhc0NoaWxkcmVuKG5vZGUsIHRydWUpICYmICFub2RlLnZvaWRFbGVtZW50O1xuICAgICAgICBjb25zdCBpc0VtcHR5VHJhbnNXaXRoSFRNTCA9IGVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nICYmIGlzT2JqZWN0KGNoaWxkKSAmJiBjaGlsZC5kdW1teSAmJiAhaXNFbGVtZW50O1xuICAgICAgICBjb25zdCBpc0tub3duQ29tcG9uZW50ID0gaXNPYmplY3QoY2hpbGRyZW4pICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNoaWxkcmVuLCBub2RlLm5hbWUpO1xuICAgICAgICBpZiAoaXNTdHJpbmcoY2hpbGQpKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShjaGlsZCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICAgICAgbWVtLnB1c2godmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGhhc0NoaWxkcmVuKGNoaWxkKSB8fCBpc1ZhbGlkVHJhbnNsYXRpb25XaXRoQ2hpbGRyZW4pIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlcklubmVyKGNoaWxkLCBub2RlLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbXB0eVRyYW5zV2l0aEhUTUwpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IG1hcEFTVChyZWFjdE5vZGVzLCBub2RlLmNoaWxkcmVuLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSk7XG4gICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQobm9kZS5uYW1lKSkpIHtcbiAgICAgICAgICBpZiAoaXNLbm93bkNvbXBvbmVudCkge1xuICAgICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJJbm5lcihjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSwgbm9kZS52b2lkRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpMThuT3B0aW9ucy50cmFuc1N1cHBvcnRCYXNpY0h0bWxOb2RlcyAmJiBrZWVwQXJyYXkuaW5kZXhPZihub2RlLm5hbWUpID4gLTEpIHtcbiAgICAgICAgICAgIGlmIChub2RlLnZvaWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIG1lbS5wdXNoKGNyZWF0ZUVsZW1lbnQobm9kZS5uYW1lLCB7XG4gICAgICAgICAgICAgICAga2V5OiBgJHtub2RlLm5hbWV9LSR7aX1gXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gbWFwQVNUKHJlYWN0Tm9kZXMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgICBtZW0ucHVzaChjcmVhdGVFbGVtZW50KG5vZGUubmFtZSwge1xuICAgICAgICAgICAgICAgIGtleTogYCR7bm9kZS5uYW1lfS0ke2l9YFxuICAgICAgICAgICAgICB9LCBpbm5lcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS52b2lkRWxlbWVudCkge1xuICAgICAgICAgICAgbWVtLnB1c2goYDwke25vZGUubmFtZX0gLz5gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5uZXIgPSBtYXBBU1QocmVhY3ROb2Rlcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgICBtZW0ucHVzaChgPCR7bm9kZS5uYW1lfT4ke2lubmVyfTwvJHtub2RlLm5hbWV9PmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChjaGlsZCkgJiYgIWlzRWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBub2RlLmNoaWxkcmVuWzBdID8gdHJhbnNsYXRpb25Db250ZW50IDogbnVsbDtcbiAgICAgICAgICBpZiAoY29udGVudCkgbWVtLnB1c2goY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIHRyYW5zbGF0aW9uQ29udGVudCwgbWVtLCBpLCBub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCAhdHJhbnNsYXRpb25Db250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICBjb25zdCB3cmFwVGV4dE5vZGVzID0gaTE4bk9wdGlvbnMudHJhbnNXcmFwVGV4dE5vZGVzO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gc2hvdWxkVW5lc2NhcGUgPyBpMThuT3B0aW9ucy51bmVzY2FwZShpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShub2RlLmNvbnRlbnQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpKSA6IGkxOG4uc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKG5vZGUuY29udGVudCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh3cmFwVGV4dE5vZGVzKSB7XG4gICAgICAgICAgbWVtLnB1c2goY3JlYXRlRWxlbWVudCh3cmFwVGV4dE5vZGVzLCB7XG4gICAgICAgICAgICBrZXk6IGAke25vZGUubmFtZX0tJHtpfWBcbiAgICAgICAgICB9LCBjb250ZW50KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVtLnB1c2goY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgW10pO1xuICB9O1xuICBjb25zdCByZXN1bHQgPSBtYXBBU1QoW3tcbiAgICBkdW1teTogdHJ1ZSxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4gfHwgW11cbiAgfV0sIGFzdCwgZ2V0QXNBcnJheShjaGlsZHJlbiB8fCBbXSkpO1xuICByZXR1cm4gZ2V0Q2hpbGRyZW4ocmVzdWx0WzBdKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gVHJhbnMoX3JlZikge1xuICBsZXQge1xuICAgIGNoaWxkcmVuLFxuICAgIGNvdW50LFxuICAgIHBhcmVudCxcbiAgICBpMThuS2V5LFxuICAgIGNvbnRleHQsXG4gICAgdE9wdGlvbnMgPSB7fSxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBucyxcbiAgICBpMThuOiBpMThuRnJvbVByb3BzLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0gPSBfcmVmO1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBnZXRJMThuKCk7XG4gIGlmICghaTE4bikge1xuICAgIHdhcm5PbmNlKCdZb3Ugd2lsbCBuZWVkIHRvIHBhc3MgaW4gYW4gaTE4bmV4dCBpbnN0YW5jZSBieSB1c2luZyBpMThuZXh0UmVhY3RNb2R1bGUnKTtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgY29uc3QgdCA9IHRGcm9tUHJvcHMgfHwgaTE4bi50LmJpbmQoaTE4bikgfHwgKGsgPT4gayk7XG4gIGNvbnN0IHJlYWN0STE4bmV4dE9wdGlvbnMgPSB7XG4gICAgLi4uZ2V0RGVmYXVsdHMoKSxcbiAgICAuLi4oaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5yZWFjdClcbiAgfTtcbiAgbGV0IG5hbWVzcGFjZXMgPSBucyB8fCB0Lm5zIHx8IGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuZGVmYXVsdE5TO1xuICBuYW1lc3BhY2VzID0gaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzIHx8IFsndHJhbnNsYXRpb24nXTtcbiAgY29uc3Qgbm9kZUFzU3RyaW5nID0gbm9kZXNUb1N0cmluZyhjaGlsZHJlbiwgcmVhY3RJMThuZXh0T3B0aW9ucyk7XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRzIHx8IG5vZGVBc1N0cmluZyB8fCByZWFjdEkxOG5leHRPcHRpb25zLnRyYW5zRW1wdHlOb2RlVmFsdWUgfHwgaTE4bktleTtcbiAgY29uc3Qge1xuICAgIGhhc2hUcmFuc0tleVxuICB9ID0gcmVhY3RJMThuZXh0T3B0aW9ucztcbiAgY29uc3Qga2V5ID0gaTE4bktleSB8fCAoaGFzaFRyYW5zS2V5ID8gaGFzaFRyYW5zS2V5KG5vZGVBc1N0cmluZyB8fCBkZWZhdWx0VmFsdWUpIDogbm9kZUFzU3RyaW5nIHx8IGRlZmF1bHRWYWx1ZSk7XG4gIGlmIChpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24gJiYgaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykge1xuICAgIHZhbHVlcyA9IHZhbHVlcyAmJiBPYmplY3Qua2V5cyh2YWx1ZXMpLmxlbmd0aCA+IDAgPyB7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICAuLi5pMThuLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzXG4gICAgfSA6IHtcbiAgICAgIC4uLmkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXNcbiAgICB9O1xuICB9XG4gIGNvbnN0IGludGVycG9sYXRpb25PdmVycmlkZSA9IHZhbHVlcyB8fCBjb3VudCAhPT0gdW5kZWZpbmVkIHx8ICFjaGlsZHJlbiA/IHRPcHRpb25zLmludGVycG9sYXRpb24gOiB7XG4gICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgLi4udE9wdGlvbnMuaW50ZXJwb2xhdGlvbixcbiAgICAgIHByZWZpeDogJyMkPycsXG4gICAgICBzdWZmaXg6ICc/JCMnXG4gICAgfVxuICB9O1xuICBjb25zdCBjb21iaW5lZFRPcHRzID0ge1xuICAgIC4uLnRPcHRpb25zLFxuICAgIGNvbnRleHQ6IGNvbnRleHQgfHwgdE9wdGlvbnMuY29udGV4dCxcbiAgICBjb3VudCxcbiAgICAuLi52YWx1ZXMsXG4gICAgLi4uaW50ZXJwb2xhdGlvbk92ZXJyaWRlLFxuICAgIGRlZmF1bHRWYWx1ZSxcbiAgICBuczogbmFtZXNwYWNlc1xuICB9O1xuICBjb25zdCB0cmFuc2xhdGlvbiA9IGtleSA/IHQoa2V5LCBjb21iaW5lZFRPcHRzKSA6IGRlZmF1bHRWYWx1ZTtcbiAgaWYgKGNvbXBvbmVudHMpIHtcbiAgICBPYmplY3Qua2V5cyhjb21wb25lbnRzKS5mb3JFYWNoKGMgPT4ge1xuICAgICAgY29uc3QgY29tcCA9IGNvbXBvbmVudHNbY107XG4gICAgICBpZiAodHlwZW9mIGNvbXAudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAhY29tcC5wcm9wcyB8fCAhY29tcC5wcm9wcy5jaGlsZHJlbiB8fCB0cmFuc2xhdGlvbi5pbmRleE9mKGAke2N9Lz5gKSA8IDAgJiYgdHJhbnNsYXRpb24uaW5kZXhPZihgJHtjfSAvPmApIDwgMCkgcmV0dXJuO1xuICAgICAgZnVuY3Rpb24gQ29tcG9uZW50aXplZCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIGNvbXApO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50c1tjXSA9IGNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50aXplZCk7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgY29udGVudCA9IHJlbmRlck5vZGVzKGNvbXBvbmVudHMgfHwgY2hpbGRyZW4sIHRyYW5zbGF0aW9uLCBpMThuLCByZWFjdEkxOG5leHRPcHRpb25zLCBjb21iaW5lZFRPcHRzLCBzaG91bGRVbmVzY2FwZSk7XG4gIGNvbnN0IHVzZUFzUGFyZW50ID0gcGFyZW50ICE9PSB1bmRlZmluZWQgPyBwYXJlbnQgOiByZWFjdEkxOG5leHRPcHRpb25zLmRlZmF1bHRUcmFuc1BhcmVudDtcbiAgcmV0dXJuIHVzZUFzUGFyZW50ID8gY3JlYXRlRWxlbWVudCh1c2VBc1BhcmVudCwgYWRkaXRpb25hbFByb3BzLCBjb250ZW50KSA6IGNvbnRlbnQ7XG59IiwiaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICcuL3VzZVRyYW5zbGF0aW9uLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBUcmFuc2xhdGlvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgbnMsXG4gICAgY2hpbGRyZW4sXG4gICAgLi4ub3B0aW9uc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFt0LCBpMThuLCByZWFkeV0gPSB1c2VUcmFuc2xhdGlvbihucywgb3B0aW9ucyk7XG4gIHJldHVybiBjaGlsZHJlbih0LCB7XG4gICAgaTE4bixcbiAgICBsbmc6IGkxOG4ubGFuZ3VhZ2VcbiAgfSwgcmVhZHkpO1xufSIsImltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXREZWZhdWx0cywgc2V0RGVmYXVsdHMgfSBmcm9tICcuL2RlZmF1bHRzLmpzJztcbmltcG9ydCB7IGdldEkxOG4sIHNldEkxOG4gfSBmcm9tICcuL2kxOG5JbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBpbml0UmVhY3RJMThuZXh0IH0gZnJvbSAnLi9pbml0UmVhY3RJMThuZXh0LmpzJztcbmV4cG9ydCB7IGdldERlZmF1bHRzLCBzZXREZWZhdWx0cywgZ2V0STE4biwgc2V0STE4biwgaW5pdFJlYWN0STE4bmV4dCB9O1xuZXhwb3J0IGNvbnN0IEkxOG5Db250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuZXhwb3J0IGNsYXNzIFJlcG9ydE5hbWVzcGFjZXMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnVzZWROYW1lc3BhY2VzID0ge307XG4gIH1cbiAgYWRkVXNlZE5hbWVzcGFjZXMobmFtZXNwYWNlcykge1xuICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICBpZiAoIXRoaXMudXNlZE5hbWVzcGFjZXNbbnNdKSB0aGlzLnVzZWROYW1lc3BhY2VzW25zXSA9IHRydWU7XG4gICAgfSk7XG4gIH1cbiAgZ2V0VXNlZE5hbWVzcGFjZXMgPSAoKSA9PiBPYmplY3Qua2V5cyh0aGlzLnVzZWROYW1lc3BhY2VzKTtcbn1cbmV4cG9ydCBjb25zdCBjb21wb3NlSW5pdGlhbFByb3BzID0gRm9yQ29tcG9uZW50ID0+IGFzeW5jIGN0eCA9PiB7XG4gIGNvbnN0IGNvbXBvbmVudHNJbml0aWFsUHJvcHMgPSBGb3JDb21wb25lbnQuZ2V0SW5pdGlhbFByb3BzID8gYXdhaXQgRm9yQ29tcG9uZW50LmdldEluaXRpYWxQcm9wcyhjdHgpIDoge307XG4gIGNvbnN0IGkxOG5Jbml0aWFsUHJvcHMgPSBnZXRJbml0aWFsUHJvcHMoKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5jb21wb25lbnRzSW5pdGlhbFByb3BzLFxuICAgIC4uLmkxOG5Jbml0aWFsUHJvcHNcbiAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0SW5pdGlhbFByb3BzID0gKCkgPT4ge1xuICBjb25zdCBpMThuID0gZ2V0STE4bigpO1xuICBjb25zdCBuYW1lc3BhY2VzID0gaTE4bi5yZXBvcnROYW1lc3BhY2VzID8gaTE4bi5yZXBvcnROYW1lc3BhY2VzLmdldFVzZWROYW1lc3BhY2VzKCkgOiBbXTtcbiAgY29uc3QgcmV0ID0ge307XG4gIGNvbnN0IGluaXRpYWxJMThuU3RvcmUgPSB7fTtcbiAgaTE4bi5sYW5ndWFnZXMuZm9yRWFjaChsID0+IHtcbiAgICBpbml0aWFsSTE4blN0b3JlW2xdID0ge307XG4gICAgbmFtZXNwYWNlcy5mb3JFYWNoKG5zID0+IHtcbiAgICAgIGluaXRpYWxJMThuU3RvcmVbbF1bbnNdID0gaTE4bi5nZXRSZXNvdXJjZUJ1bmRsZShsLCBucykgfHwge307XG4gICAgfSk7XG4gIH0pO1xuICByZXQuaW5pdGlhbEkxOG5TdG9yZSA9IGluaXRpYWxJMThuU3RvcmU7XG4gIHJldC5pbml0aWFsTGFuZ3VhZ2UgPSBpMThuLmxhbmd1YWdlO1xuICByZXR1cm4gcmV0O1xufTsiLCJpbXBvcnQgeyB1bmVzY2FwZSB9IGZyb20gJy4vdW5lc2NhcGUuanMnO1xubGV0IGRlZmF1bHRPcHRpb25zID0ge1xuICBiaW5kSTE4bjogJ2xhbmd1YWdlQ2hhbmdlZCcsXG4gIGJpbmRJMThuU3RvcmU6ICcnLFxuICB0cmFuc0VtcHR5Tm9kZVZhbHVlOiAnJyxcbiAgdHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXM6IHRydWUsXG4gIHRyYW5zV3JhcFRleHROb2RlczogJycsXG4gIHRyYW5zS2VlcEJhc2ljSHRtbE5vZGVzRm9yOiBbJ2JyJywgJ3N0cm9uZycsICdpJywgJ3AnXSxcbiAgdXNlU3VzcGVuc2U6IHRydWUsXG4gIHVuZXNjYXBlXG59O1xuZXhwb3J0IGNvbnN0IHNldERlZmF1bHRzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiBkZWZhdWx0T3B0aW9uczsiLCJsZXQgaTE4bkluc3RhbmNlO1xuZXhwb3J0IGNvbnN0IHNldEkxOG4gPSBpbnN0YW5jZSA9PiB7XG4gIGkxOG5JbnN0YW5jZSA9IGluc3RhbmNlO1xufTtcbmV4cG9ydCBjb25zdCBnZXRJMThuID0gKCkgPT4gaTE4bkluc3RhbmNlOyIsImV4cG9ydCB7IFRyYW5zIH0gZnJvbSAnLi9UcmFucy5qcyc7XG5leHBvcnQgeyBUcmFucyBhcyBUcmFuc1dpdGhvdXRDb250ZXh0IH0gZnJvbSAnLi9UcmFuc1dpdGhvdXRDb250ZXh0LmpzJztcbmV4cG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAnLi91c2VUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICcuL3dpdGhUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgeyBUcmFuc2xhdGlvbiB9IGZyb20gJy4vVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgSTE4bmV4dFByb3ZpZGVyIH0gZnJvbSAnLi9JMThuZXh0UHJvdmlkZXIuanMnO1xuZXhwb3J0IHsgd2l0aFNTUiB9IGZyb20gJy4vd2l0aFNTUi5qcyc7XG5leHBvcnQgeyB1c2VTU1IgfSBmcm9tICcuL3VzZVNTUi5qcyc7XG5leHBvcnQgeyBpbml0UmVhY3RJMThuZXh0IH0gZnJvbSAnLi9pbml0UmVhY3RJMThuZXh0LmpzJztcbmV4cG9ydCB7IHNldERlZmF1bHRzLCBnZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuZXhwb3J0IHsgc2V0STE4biwgZ2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmV4cG9ydCB7IEkxOG5Db250ZXh0LCBjb21wb3NlSW5pdGlhbFByb3BzLCBnZXRJbml0aWFsUHJvcHMgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGNvbnN0IGRhdGUgPSAoKSA9PiAnJztcbmV4cG9ydCBjb25zdCB0aW1lID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgbnVtYmVyID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3Qgc2VsZWN0ID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgcGx1cmFsID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3Qgc2VsZWN0T3JkaW5hbCA9ICgpID0+ICcnOyIsImltcG9ydCB7IHNldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBzZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuZXhwb3J0IGNvbnN0IGluaXRSZWFjdEkxOG5leHQgPSB7XG4gIHR5cGU6ICczcmRQYXJ0eScsXG4gIGluaXQoaW5zdGFuY2UpIHtcbiAgICBzZXREZWZhdWx0cyhpbnN0YW5jZS5vcHRpb25zLnJlYWN0KTtcbiAgICBzZXRJMThuKGluc3RhbmNlKTtcbiAgfVxufTsiLCJjb25zdCBtYXRjaEh0bWxFbnRpdHkgPSAvJig/OmFtcHwjMzh8bHR8IzYwfGd0fCM2MnxhcG9zfCMzOXxxdW90fCMzNHxuYnNwfCMxNjB8Y29weXwjMTY5fHJlZ3wjMTc0fGhlbGxpcHwjODIzMHwjeDJGfCM0Nyk7L2c7XG5jb25zdCBodG1sRW50aXRpZXMgPSB7XG4gICcmYW1wOyc6ICcmJyxcbiAgJyYjMzg7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyYjNjA7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyYjNjI7JzogJz4nLFxuICAnJmFwb3M7JzogXCInXCIsXG4gICcmIzM5Oyc6IFwiJ1wiLFxuICAnJnF1b3Q7JzogJ1wiJyxcbiAgJyYjMzQ7JzogJ1wiJyxcbiAgJyZuYnNwOyc6ICcgJyxcbiAgJyYjMTYwOyc6ICcgJyxcbiAgJyZjb3B5Oyc6ICfCqScsXG4gICcmIzE2OTsnOiAnwqknLFxuICAnJnJlZzsnOiAnwq4nLFxuICAnJiMxNzQ7JzogJ8KuJyxcbiAgJyZoZWxsaXA7JzogJ+KApicsXG4gICcmIzgyMzA7JzogJ+KApicsXG4gICcmI3gyRjsnOiAnLycsXG4gICcmIzQ3Oyc6ICcvJ1xufTtcbmNvbnN0IHVuZXNjYXBlSHRtbEVudGl0eSA9IG0gPT4gaHRtbEVudGl0aWVzW21dO1xuZXhwb3J0IGNvbnN0IHVuZXNjYXBlID0gdGV4dCA9PiB0ZXh0LnJlcGxhY2UobWF0Y2hIdG1sRW50aXR5LCB1bmVzY2FwZUh0bWxFbnRpdHkpOyIsImltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXRJMThuLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5leHBvcnQgY29uc3QgdXNlU1NSID0gZnVuY3Rpb24gKGluaXRpYWxJMThuU3RvcmUsIGluaXRpYWxMYW5ndWFnZSkge1xuICBsZXQgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Qcm9wc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBpZiAoaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5pc0Nsb25lKSByZXR1cm47XG4gIGlmIChpbml0aWFsSTE4blN0b3JlICYmICFpMThuLmluaXRpYWxpemVkU3RvcmVPbmNlKSB7XG4gICAgaTE4bi5zZXJ2aWNlcy5yZXNvdXJjZVN0b3JlLmRhdGEgPSBpbml0aWFsSTE4blN0b3JlO1xuICAgIGkxOG4ub3B0aW9ucy5ucyA9IE9iamVjdC52YWx1ZXMoaW5pdGlhbEkxOG5TdG9yZSkucmVkdWNlKChtZW0sIGxuZ1Jlc291cmNlcykgPT4ge1xuICAgICAgT2JqZWN0LmtleXMobG5nUmVzb3VyY2VzKS5mb3JFYWNoKG5zID0+IHtcbiAgICAgICAgaWYgKG1lbS5pbmRleE9mKG5zKSA8IDApIG1lbS5wdXNoKG5zKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1lbTtcbiAgICB9LCBpMThuLm9wdGlvbnMubnMpO1xuICAgIGkxOG4uaW5pdGlhbGl6ZWRTdG9yZU9uY2UgPSB0cnVlO1xuICAgIGkxOG4uaXNJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cbiAgaWYgKGluaXRpYWxMYW5ndWFnZSAmJiAhaTE4bi5pbml0aWFsaXplZExhbmd1YWdlT25jZSkge1xuICAgIGkxOG4uY2hhbmdlTGFuZ3VhZ2UoaW5pdGlhbExhbmd1YWdlKTtcbiAgICBpMThuLmluaXRpYWxpemVkTGFuZ3VhZ2VPbmNlID0gdHJ1ZTtcbiAgfVxufTsiLCJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDb250ZXh0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0STE4biwgZ2V0RGVmYXVsdHMsIFJlcG9ydE5hbWVzcGFjZXMsIEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7IHdhcm5PbmNlLCBsb2FkTmFtZXNwYWNlcywgbG9hZExhbmd1YWdlcywgaGFzTG9hZGVkTmFtZXNwYWNlLCBpc1N0cmluZywgaXNPYmplY3QgfSBmcm9tICcuL3V0aWxzLmpzJztcbmNvbnN0IHVzZVByZXZpb3VzID0gKHZhbHVlLCBpZ25vcmUpID0+IHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSBpZ25vcmUgPyByZWYuY3VycmVudCA6IHZhbHVlO1xuICB9LCBbdmFsdWUsIGlnbm9yZV0pO1xuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59O1xuY29uc3QgYWx3YXlzTmV3VCA9IChpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpID0+IGkxOG4uZ2V0Rml4ZWRUKGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCk7XG5jb25zdCB1c2VNZW1vaXplZFQgPSAoaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4KSA9PiB1c2VDYWxsYmFjayhhbHdheXNOZXdUKGkxOG4sIGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCksIFtpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXhdKTtcbmV4cG9ydCBjb25zdCB1c2VUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uIChucykge1xuICBsZXQgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Qcm9wc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHQsXG4gICAgZGVmYXVsdE5TOiBkZWZhdWx0TlNGcm9tQ29udGV4dFxuICB9ID0gdXNlQ29udGV4dChJMThuQ29udGV4dCkgfHwge307XG4gIGNvbnN0IGkxOG4gPSBpMThuRnJvbVByb3BzIHx8IGkxOG5Gcm9tQ29udGV4dCB8fCBnZXRJMThuKCk7XG4gIGlmIChpMThuICYmICFpMThuLnJlcG9ydE5hbWVzcGFjZXMpIGkxOG4ucmVwb3J0TmFtZXNwYWNlcyA9IG5ldyBSZXBvcnROYW1lc3BhY2VzKCk7XG4gIGlmICghaTE4bikge1xuICAgIHdhcm5PbmNlKCdZb3Ugd2lsbCBuZWVkIHRvIHBhc3MgaW4gYW4gaTE4bmV4dCBpbnN0YW5jZSBieSB1c2luZyBpbml0UmVhY3RJMThuZXh0Jyk7XG4gICAgY29uc3Qgbm90UmVhZHlUID0gKGssIG9wdHNPckRlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgaWYgKGlzU3RyaW5nKG9wdHNPckRlZmF1bHRWYWx1ZSkpIHJldHVybiBvcHRzT3JEZWZhdWx0VmFsdWU7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0c09yRGVmYXVsdFZhbHVlKSAmJiBpc1N0cmluZyhvcHRzT3JEZWZhdWx0VmFsdWUuZGVmYXVsdFZhbHVlKSkgcmV0dXJuIG9wdHNPckRlZmF1bHRWYWx1ZS5kZWZhdWx0VmFsdWU7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrKSA/IGtbay5sZW5ndGggLSAxXSA6IGs7XG4gICAgfTtcbiAgICBjb25zdCByZXROb3RSZWFkeSA9IFtub3RSZWFkeVQsIHt9LCBmYWxzZV07XG4gICAgcmV0Tm90UmVhZHkudCA9IG5vdFJlYWR5VDtcbiAgICByZXROb3RSZWFkeS5pMThuID0ge307XG4gICAgcmV0Tm90UmVhZHkucmVhZHkgPSBmYWxzZTtcbiAgICByZXR1cm4gcmV0Tm90UmVhZHk7XG4gIH1cbiAgaWYgKGkxOG4ub3B0aW9ucy5yZWFjdCAmJiBpMThuLm9wdGlvbnMucmVhY3Qud2FpdCAhPT0gdW5kZWZpbmVkKSB3YXJuT25jZSgnSXQgc2VlbXMgeW91IGFyZSBzdGlsbCB1c2luZyB0aGUgb2xkIHdhaXQgb3B0aW9uLCB5b3UgbWF5IG1pZ3JhdGUgdG8gdGhlIG5ldyB1c2VTdXNwZW5zZSBiZWhhdmlvdXIuJyk7XG4gIGNvbnN0IGkxOG5PcHRpb25zID0ge1xuICAgIC4uLmdldERlZmF1bHRzKCksXG4gICAgLi4uaTE4bi5vcHRpb25zLnJlYWN0LFxuICAgIC4uLnByb3BzXG4gIH07XG4gIGNvbnN0IHtcbiAgICB1c2VTdXNwZW5zZSxcbiAgICBrZXlQcmVmaXhcbiAgfSA9IGkxOG5PcHRpb25zO1xuICBsZXQgbmFtZXNwYWNlcyA9IG5zIHx8IGRlZmF1bHROU0Zyb21Db250ZXh0IHx8IGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuZGVmYXVsdE5TO1xuICBuYW1lc3BhY2VzID0gaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzIHx8IFsndHJhbnNsYXRpb24nXTtcbiAgaWYgKGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5hZGRVc2VkTmFtZXNwYWNlcykgaTE4bi5yZXBvcnROYW1lc3BhY2VzLmFkZFVzZWROYW1lc3BhY2VzKG5hbWVzcGFjZXMpO1xuICBjb25zdCByZWFkeSA9IChpMThuLmlzSW5pdGlhbGl6ZWQgfHwgaTE4bi5pbml0aWFsaXplZFN0b3JlT25jZSkgJiYgbmFtZXNwYWNlcy5ldmVyeShuID0+IGhhc0xvYWRlZE5hbWVzcGFjZShuLCBpMThuLCBpMThuT3B0aW9ucykpO1xuICBjb25zdCBtZW1vR2V0VCA9IHVzZU1lbW9pemVkVChpMThuLCBwcm9wcy5sbmcgfHwgbnVsbCwgaTE4bk9wdGlvbnMubnNNb2RlID09PSAnZmFsbGJhY2snID8gbmFtZXNwYWNlcyA6IG5hbWVzcGFjZXNbMF0sIGtleVByZWZpeCk7XG4gIGNvbnN0IGdldFQgPSAoKSA9PiBtZW1vR2V0VDtcbiAgY29uc3QgZ2V0TmV3VCA9ICgpID0+IGFsd2F5c05ld1QoaTE4biwgcHJvcHMubG5nIHx8IG51bGwsIGkxOG5PcHRpb25zLm5zTW9kZSA9PT0gJ2ZhbGxiYWNrJyA/IG5hbWVzcGFjZXMgOiBuYW1lc3BhY2VzWzBdLCBrZXlQcmVmaXgpO1xuICBjb25zdCBbdCwgc2V0VF0gPSB1c2VTdGF0ZShnZXRUKTtcbiAgbGV0IGpvaW5lZE5TID0gbmFtZXNwYWNlcy5qb2luKCk7XG4gIGlmIChwcm9wcy5sbmcpIGpvaW5lZE5TID0gYCR7cHJvcHMubG5nfSR7am9pbmVkTlN9YDtcbiAgY29uc3QgcHJldmlvdXNKb2luZWROUyA9IHVzZVByZXZpb3VzKGpvaW5lZE5TKTtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmKHRydWUpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGJpbmRJMThuLFxuICAgICAgYmluZEkxOG5TdG9yZVxuICAgIH0gPSBpMThuT3B0aW9ucztcbiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7XG4gICAgaWYgKCFyZWFkeSAmJiAhdXNlU3VzcGVuc2UpIHtcbiAgICAgIGlmIChwcm9wcy5sbmcpIHtcbiAgICAgICAgbG9hZExhbmd1YWdlcyhpMThuLCBwcm9wcy5sbmcsIG5hbWVzcGFjZXMsICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHNldFQoZ2V0TmV3VCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZE5hbWVzcGFjZXMoaTE4biwgbmFtZXNwYWNlcywgKCkgPT4ge1xuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkgc2V0VChnZXROZXdUKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZWFkeSAmJiBwcmV2aW91c0pvaW5lZE5TICYmIHByZXZpb3VzSm9pbmVkTlMgIT09IGpvaW5lZE5TICYmIGlzTW91bnRlZC5jdXJyZW50KSB7XG4gICAgICBzZXRUKGdldE5ld1QpO1xuICAgIH1cbiAgICBjb25zdCBib3VuZFJlc2V0ID0gKCkgPT4ge1xuICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSBzZXRUKGdldE5ld1QpO1xuICAgIH07XG4gICAgaWYgKGJpbmRJMThuICYmIGkxOG4pIGkxOG4ub24oYmluZEkxOG4sIGJvdW5kUmVzZXQpO1xuICAgIGlmIChiaW5kSTE4blN0b3JlICYmIGkxOG4pIGkxOG4uc3RvcmUub24oYmluZEkxOG5TdG9yZSwgYm91bmRSZXNldCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZC5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBpZiAoYmluZEkxOG4gJiYgaTE4bikgYmluZEkxOG4uc3BsaXQoJyAnKS5mb3JFYWNoKGUgPT4gaTE4bi5vZmYoZSwgYm91bmRSZXNldCkpO1xuICAgICAgaWYgKGJpbmRJMThuU3RvcmUgJiYgaTE4bikgYmluZEkxOG5TdG9yZS5zcGxpdCgnICcpLmZvckVhY2goZSA9PiBpMThuLnN0b3JlLm9mZihlLCBib3VuZFJlc2V0KSk7XG4gICAgfTtcbiAgfSwgW2kxOG4sIGpvaW5lZE5TXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzTW91bnRlZC5jdXJyZW50ICYmIHJlYWR5KSB7XG4gICAgICBzZXRUKGdldFQpO1xuICAgIH1cbiAgfSwgW2kxOG4sIGtleVByZWZpeCwgcmVhZHldKTtcbiAgY29uc3QgcmV0ID0gW3QsIGkxOG4sIHJlYWR5XTtcbiAgcmV0LnQgPSB0O1xuICByZXQuaTE4biA9IGkxOG47XG4gIHJldC5yZWFkeSA9IHJlYWR5O1xuICBpZiAocmVhZHkpIHJldHVybiByZXQ7XG4gIGlmICghcmVhZHkgJiYgIXVzZVN1c3BlbnNlKSByZXR1cm4gcmV0O1xuICB0aHJvdyBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBpZiAocHJvcHMubG5nKSB7XG4gICAgICBsb2FkTGFuZ3VhZ2VzKGkxOG4sIHByb3BzLmxuZywgbmFtZXNwYWNlcywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZE5hbWVzcGFjZXMoaTE4biwgbmFtZXNwYWNlcywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9XG4gIH0pO1xufTsiLCJleHBvcnQgZnVuY3Rpb24gd2FybigpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcoYXJnc1swXSkpIGFyZ3NbMF0gPSBgcmVhY3QtaTE4bmV4dDo6ICR7YXJnc1swXX1gO1xuICAgIGNvbnNvbGUud2FybiguLi5hcmdzKTtcbiAgfVxufVxuY29uc3QgYWxyZWFkeVdhcm5lZCA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIHdhcm5PbmNlKCkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gIH1cbiAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pICYmIGFscmVhZHlXYXJuZWRbYXJnc1swXV0pIHJldHVybjtcbiAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhbHJlYWR5V2FybmVkW2FyZ3NbMF1dID0gbmV3IERhdGUoKTtcbiAgd2FybiguLi5hcmdzKTtcbn1cbmNvbnN0IGxvYWRlZENsYiA9IChpMThuLCBjYikgPT4gKCkgPT4ge1xuICBpZiAoaTE4bi5pc0luaXRpYWxpemVkKSB7XG4gICAgY2IoKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBpbml0aWFsaXplZCA9ICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpMThuLm9mZignaW5pdGlhbGl6ZWQnLCBpbml0aWFsaXplZCk7XG4gICAgICB9LCAwKTtcbiAgICAgIGNiKCk7XG4gICAgfTtcbiAgICBpMThuLm9uKCdpbml0aWFsaXplZCcsIGluaXRpYWxpemVkKTtcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBsb2FkTmFtZXNwYWNlcyA9IChpMThuLCBucywgY2IpID0+IHtcbiAgaTE4bi5sb2FkTmFtZXNwYWNlcyhucywgbG9hZGVkQ2xiKGkxOG4sIGNiKSk7XG59O1xuZXhwb3J0IGNvbnN0IGxvYWRMYW5ndWFnZXMgPSAoaTE4biwgbG5nLCBucywgY2IpID0+IHtcbiAgaWYgKGlzU3RyaW5nKG5zKSkgbnMgPSBbbnNdO1xuICBucy5mb3JFYWNoKG4gPT4ge1xuICAgIGlmIChpMThuLm9wdGlvbnMubnMuaW5kZXhPZihuKSA8IDApIGkxOG4ub3B0aW9ucy5ucy5wdXNoKG4pO1xuICB9KTtcbiAgaTE4bi5sb2FkTGFuZ3VhZ2VzKGxuZywgbG9hZGVkQ2xiKGkxOG4sIGNiKSk7XG59O1xuY29uc3Qgb2xkSTE4bmV4dEhhc0xvYWRlZE5hbWVzcGFjZSA9IGZ1bmN0aW9uIChucywgaTE4bikge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gIGNvbnN0IGxuZyA9IGkxOG4ubGFuZ3VhZ2VzWzBdO1xuICBjb25zdCBmYWxsYmFja0xuZyA9IGkxOG4ub3B0aW9ucyA/IGkxOG4ub3B0aW9ucy5mYWxsYmFja0xuZyA6IGZhbHNlO1xuICBjb25zdCBsYXN0TG5nID0gaTE4bi5sYW5ndWFnZXNbaTE4bi5sYW5ndWFnZXMubGVuZ3RoIC0gMV07XG4gIGlmIChsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHJldHVybiB0cnVlO1xuICBjb25zdCBsb2FkTm90UGVuZGluZyA9IChsLCBuKSA9PiB7XG4gICAgY29uc3QgbG9hZFN0YXRlID0gaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnN0YXRlW2Ake2x9fCR7bn1gXTtcbiAgICByZXR1cm4gbG9hZFN0YXRlID09PSAtMSB8fCBsb2FkU3RhdGUgPT09IDI7XG4gIH07XG4gIGlmIChvcHRpb25zLmJpbmRJMThuICYmIG9wdGlvbnMuYmluZEkxOG4uaW5kZXhPZignbGFuZ3VhZ2VDaGFuZ2luZycpID4gLTEgJiYgaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgJiYgaTE4bi5pc0xhbmd1YWdlQ2hhbmdpbmdUbyAmJiAhbG9hZE5vdFBlbmRpbmcoaTE4bi5pc0xhbmd1YWdlQ2hhbmdpbmdUbywgbnMpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChpMThuLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKCFpMThuLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZCB8fCBpMThuLm9wdGlvbnMucmVzb3VyY2VzICYmICFpMThuLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHJldHVybiB0cnVlO1xuICBpZiAobG9hZE5vdFBlbmRpbmcobG5nLCBucykgJiYgKCFmYWxsYmFja0xuZyB8fCBsb2FkTm90UGVuZGluZyhsYXN0TG5nLCBucykpKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcbmV4cG9ydCBjb25zdCBoYXNMb2FkZWROYW1lc3BhY2UgPSBmdW5jdGlvbiAobnMsIGkxOG4pIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBpZiAoIWkxOG4ubGFuZ3VhZ2VzIHx8ICFpMThuLmxhbmd1YWdlcy5sZW5ndGgpIHtcbiAgICB3YXJuT25jZSgnaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHknLCBpMThuLmxhbmd1YWdlcyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgaXNOZXdlckkxOG5leHQgPSBpMThuLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSAhPT0gdW5kZWZpbmVkO1xuICBpZiAoIWlzTmV3ZXJJMThuZXh0KSB7XG4gICAgcmV0dXJuIG9sZEkxOG5leHRIYXNMb2FkZWROYW1lc3BhY2UobnMsIGkxOG4sIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBpMThuLmhhc0xvYWRlZE5hbWVzcGFjZShucywge1xuICAgIGxuZzogb3B0aW9ucy5sbmcsXG4gICAgcHJlY2hlY2s6IChpMThuSW5zdGFuY2UsIGxvYWROb3RQZW5kaW5nKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5iaW5kSTE4biAmJiBvcHRpb25zLmJpbmRJMThuLmluZGV4T2YoJ2xhbmd1YWdlQ2hhbmdpbmcnKSA+IC0xICYmIGkxOG5JbnN0YW5jZS5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgJiYgaTE4bkluc3RhbmNlLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvICYmICFsb2FkTm90UGVuZGluZyhpMThuSW5zdGFuY2UuaXNMYW5ndWFnZUNoYW5naW5nVG8sIG5zKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGdldERpc3BsYXlOYW1lID0gQ29tcG9uZW50ID0+IENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAoaXNTdHJpbmcoQ29tcG9uZW50KSAmJiBDb21wb25lbnQubGVuZ3RoID4gMCA/IENvbXBvbmVudCA6ICdVbmtub3duJyk7XG5leHBvcnQgY29uc3QgaXNTdHJpbmcgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG5leHBvcnQgY29uc3QgaXNPYmplY3QgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsOyIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTU1IgfSBmcm9tICcuL3VzZVNTUi5qcyc7XG5pbXBvcnQgeyBjb21wb3NlSW5pdGlhbFByb3BzIH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7IGdldERpc3BsYXlOYW1lIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY29uc3Qgd2l0aFNTUiA9ICgpID0+IGZ1bmN0aW9uIEV4dGVuZChXcmFwcGVkQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIEkxOG5leHRXaXRoU1NSKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgaW5pdGlhbEkxOG5TdG9yZSxcbiAgICAgIGluaXRpYWxMYW5ndWFnZSxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gX3JlZjtcbiAgICB1c2VTU1IoaW5pdGlhbEkxOG5TdG9yZSwgaW5pdGlhbExhbmd1YWdlKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChXcmFwcGVkQ29tcG9uZW50LCB7XG4gICAgICAuLi5yZXN0XG4gICAgfSk7XG4gIH1cbiAgSTE4bmV4dFdpdGhTU1IuZ2V0SW5pdGlhbFByb3BzID0gY29tcG9zZUluaXRpYWxQcm9wcyhXcmFwcGVkQ29tcG9uZW50KTtcbiAgSTE4bmV4dFdpdGhTU1IuZGlzcGxheU5hbWUgPSBgd2l0aEkxOG5leHRTU1IoJHtnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KX0pYDtcbiAgSTE4bmV4dFdpdGhTU1IuV3JhcHBlZENvbXBvbmVudCA9IFdyYXBwZWRDb21wb25lbnQ7XG4gIHJldHVybiBJMThuZXh0V2l0aFNTUjtcbn07IiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmUmVhY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJy4vdXNlVHJhbnNsYXRpb24uanMnO1xuaW1wb3J0IHsgZ2V0RGlzcGxheU5hbWUgfSBmcm9tICcuL3V0aWxzLmpzJztcbmV4cG9ydCBjb25zdCB3aXRoVHJhbnNsYXRpb24gPSBmdW5jdGlvbiAobnMpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gRXh0ZW5kKFdyYXBwZWRDb21wb25lbnQpIHtcbiAgICBmdW5jdGlvbiBJMThuZXh0V2l0aFRyYW5zbGF0aW9uKF9yZWYpIHtcbiAgICAgIGxldCB7XG4gICAgICAgIGZvcndhcmRlZFJlZixcbiAgICAgICAgLi4ucmVzdFxuICAgICAgfSA9IF9yZWY7XG4gICAgICBjb25zdCBbdCwgaTE4biwgcmVhZHldID0gdXNlVHJhbnNsYXRpb24obnMsIHtcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAga2V5UHJlZml4OiBvcHRpb25zLmtleVByZWZpeFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwYXNzRG93blByb3BzID0ge1xuICAgICAgICAuLi5yZXN0LFxuICAgICAgICB0LFxuICAgICAgICBpMThuLFxuICAgICAgICB0UmVhZHk6IHJlYWR5XG4gICAgICB9O1xuICAgICAgaWYgKG9wdGlvbnMud2l0aFJlZiAmJiBmb3J3YXJkZWRSZWYpIHtcbiAgICAgICAgcGFzc0Rvd25Qcm9wcy5yZWYgPSBmb3J3YXJkZWRSZWY7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLndpdGhSZWYgJiYgZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgIHBhc3NEb3duUHJvcHMuZm9yd2FyZGVkUmVmID0gZm9yd2FyZGVkUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoV3JhcHBlZENvbXBvbmVudCwgcGFzc0Rvd25Qcm9wcyk7XG4gICAgfVxuICAgIEkxOG5leHRXaXRoVHJhbnNsYXRpb24uZGlzcGxheU5hbWUgPSBgd2l0aEkxOG5leHRUcmFuc2xhdGlvbigke2dldERpc3BsYXlOYW1lKFdyYXBwZWRDb21wb25lbnQpfSlgO1xuICAgIEkxOG5leHRXaXRoVHJhbnNsYXRpb24uV3JhcHBlZENvbXBvbmVudCA9IFdyYXBwZWRDb21wb25lbnQ7XG4gICAgY29uc3QgZm9yd2FyZFJlZiA9IChwcm9wcywgcmVmKSA9PiBjcmVhdGVFbGVtZW50KEkxOG5leHRXaXRoVHJhbnNsYXRpb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBmb3J3YXJkZWRSZWY6IHJlZlxuICAgIH0pKTtcbiAgICByZXR1cm4gb3B0aW9ucy53aXRoUmVmID8gZm9yd2FyZFJlZlJlYWN0KGZvcndhcmRSZWYpIDogSTE4bmV4dFdpdGhUcmFuc2xhdGlvbjtcbiAgfTtcbn07IiwiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKG1ldGhvZE5hbWUsIGluZm8pIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiJXMoLi4uKSBpcyBkZXByZWNhdGVkIGluIHBsYWluIEphdmFTY3JpcHQgUmVhY3QgY2xhc3Nlcy4gJXNcIixcbiAgICAgICAgICAgIGluZm9bMF0sXG4gICAgICAgICAgICBpbmZvWzFdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkge1xuICAgICAgaWYgKG51bGwgPT09IG1heWJlSXRlcmFibGUgfHwgXCJvYmplY3RcIiAhPT0gdHlwZW9mIG1heWJlSXRlcmFibGUpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgbWF5YmVJdGVyYWJsZSA9XG4gICAgICAgIChNQVlCRV9JVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtNQVlCRV9JVEVSQVRPUl9TWU1CT0xdKSB8fFxuICAgICAgICBtYXliZUl0ZXJhYmxlW1wiQEBpdGVyYXRvclwiXTtcbiAgICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBtYXliZUl0ZXJhYmxlID8gbWF5YmVJdGVyYWJsZSA6IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gICAgICBwdWJsaWNJbnN0YW5jZSA9XG4gICAgICAgICgocHVibGljSW5zdGFuY2UgPSBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3RvcikgJiZcbiAgICAgICAgICAocHVibGljSW5zdGFuY2UuZGlzcGxheU5hbWUgfHwgcHVibGljSW5zdGFuY2UubmFtZSkpIHx8XG4gICAgICAgIFwiUmVhY3RDbGFzc1wiO1xuICAgICAgdmFyIHdhcm5pbmdLZXkgPSBwdWJsaWNJbnN0YW5jZSArIFwiLlwiICsgY2FsbGVyTmFtZTtcbiAgICAgIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudFt3YXJuaW5nS2V5XSB8fFxuICAgICAgICAoY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkNhbid0IGNhbGwgJXMgb24gYSBjb21wb25lbnQgdGhhdCBpcyBub3QgeWV0IG1vdW50ZWQuIFRoaXMgaXMgYSBuby1vcCwgYnV0IGl0IG1pZ2h0IGluZGljYXRlIGEgYnVnIGluIHlvdXIgYXBwbGljYXRpb24uIEluc3RlYWQsIGFzc2lnbiB0byBgdGhpcy5zdGF0ZWAgZGlyZWN0bHkgb3IgZGVmaW5lIGEgYHN0YXRlID0ge307YCBjbGFzcyBwcm9wZXJ0eSB3aXRoIHRoZSBkZXNpcmVkIHN0YXRlIGluIHRoZSAlcyBjb21wb25lbnQuXCIsXG4gICAgICAgICAgY2FsbGVyTmFtZSxcbiAgICAgICAgICBwdWJsaWNJbnN0YW5jZVxuICAgICAgICApLFxuICAgICAgICAoZGlkV2FyblN0YXRlVXBkYXRlRm9yVW5tb3VudGVkQ29tcG9uZW50W3dhcm5pbmdLZXldID0gITApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDb21wb25lbnREdW1teSgpIHt9XG4gICAgZnVuY3Rpb24gUHVyZUNvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm9vcCgpIHt9XG4gICAgZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gITE7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICEwO1xuICAgICAgfVxuICAgICAgaWYgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBjb25zb2xlO1xuICAgICAgICB2YXIgSlNDb21waWxlcl90ZW1wX2NvbnN0ID0gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LmVycm9yO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwID1cbiAgICAgICAgICAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgU3ltYm9sICYmXG4gICAgICAgICAgICBTeW1ib2wudG9TdHJpbmdUYWcgJiZcbiAgICAgICAgICAgIHZhbHVlW1N5bWJvbC50b1N0cmluZ1RhZ10pIHx8XG4gICAgICAgICAgdmFsdWUuY29uc3RydWN0b3IubmFtZSB8fFxuICAgICAgICAgIFwiT2JqZWN0XCI7XG4gICAgICAgIEpTQ29tcGlsZXJfdGVtcF9jb25zdC5jYWxsKFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCxcbiAgICAgICAgICBcIlRoZSBwcm92aWRlZCBrZXkgaXMgYW4gdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuXCIsXG4gICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSkge1xuICAgICAgaWYgKG51bGwgPT0gdHlwZSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdHlwZSlcbiAgICAgICAgcmV0dXJuIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0VcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IG51bGw7XG4gICAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHR5cGUpIHJldHVybiB0eXBlO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJGcmFnbWVudFwiO1xuICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiUHJvZmlsZXJcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN0cmljdE1vZGVcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN1c3BlbnNlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN1c3BlbnNlTGlzdFwiO1xuICAgICAgICBjYXNlIFJFQUNUX0FDVElWSVRZX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiQWN0aXZpdHlcIjtcbiAgICAgIH1cbiAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdHlwZSlcbiAgICAgICAgc3dpdGNoIChcbiAgICAgICAgICAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIHR5cGUudGFnICYmXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIlJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgb2JqZWN0IGluIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSgpLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgdHlwZS4kJHR5cGVvZilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiBcIlBvcnRhbFwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGUuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuICh0eXBlLl9jb250ZXh0LmRpc3BsYXlOYW1lIHx8IFwiQ29udGV4dFwiKSArIFwiLkNvbnN1bWVyXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICAgICAgdmFyIGlubmVyVHlwZSA9IHR5cGUucmVuZGVyO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICB0eXBlIHx8XG4gICAgICAgICAgICAgICgodHlwZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCBcIlwiKSxcbiAgICAgICAgICAgICAgKHR5cGUgPSBcIlwiICE9PSB0eXBlID8gXCJGb3J3YXJkUmVmKFwiICsgdHlwZSArIFwiKVwiIDogXCJGb3J3YXJkUmVmXCIpKTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgKGlubmVyVHlwZSA9IHR5cGUuZGlzcGxheU5hbWUgfHwgbnVsbCksXG4gICAgICAgICAgICAgIG51bGwgIT09IGlubmVyVHlwZVxuICAgICAgICAgICAgICAgID8gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgOiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZS50eXBlKSB8fCBcIk1lbW9cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRTpcbiAgICAgICAgICAgIGlubmVyVHlwZSA9IHR5cGUuX3BheWxvYWQ7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5faW5pdDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZShpbm5lclR5cGUpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXNrTmFtZSh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkgcmV0dXJuIFwiPD5cIjtcbiAgICAgIGlmIChcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUgJiZcbiAgICAgICAgbnVsbCAhPT0gdHlwZSAmJlxuICAgICAgICB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEVcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgICByZXR1cm4gbmFtZSA/IFwiPFwiICsgbmFtZSArIFwiPlwiIDogXCI8Li4uPlwiO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICByZXR1cm4gXCI8Li4uPlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuQTtcbiAgICAgIHJldHVybiBudWxsID09PSBkaXNwYXRjaGVyID8gbnVsbCA6IGRpc3BhdGNoZXIuZ2V0T3duZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVW5rbm93bk93bmVyKCkge1xuICAgICAgcmV0dXJuIEVycm9yKFwicmVhY3Qtc3RhY2stdG9wLWZyYW1lXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJrZXlcIikpIHtcbiAgICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCBcImtleVwiKS5nZXQ7XG4gICAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSByZXR1cm4gITE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb25maWcua2V5O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAgICAgIGZ1bmN0aW9uIHdhcm5BYm91dEFjY2Vzc2luZ0tleSgpIHtcbiAgICAgICAgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gfHxcbiAgICAgICAgICAoKHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duID0gITApLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIiVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGJlaW5nIHJldHVybmVkLiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgdGhlIHNhbWUgdmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCBwcm9wLiAoaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9zcGVjaWFsLXByb3BzKVwiLFxuICAgICAgICAgICAgZGlzcGxheU5hbWVcbiAgICAgICAgICApKTtcbiAgICAgIH1cbiAgICAgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9ICEwO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCBcImtleVwiLCB7XG4gICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcoKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0aGlzLnR5cGUpO1xuICAgICAgZGlkV2FybkFib3V0RWxlbWVudFJlZltjb21wb25lbnROYW1lXSB8fFxuICAgICAgICAoKGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gPSAhMCksXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJBY2Nlc3NpbmcgZWxlbWVudC5yZWYgd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIHJlZiBpcyBub3cgYSByZWd1bGFyIHByb3AuIEl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBKU1ggRWxlbWVudCB0eXBlIGluIGEgZnV0dXJlIHJlbGVhc2UuXCJcbiAgICAgICAgKSk7XG4gICAgICBjb21wb25lbnROYW1lID0gdGhpcy5wcm9wcy5yZWY7XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb21wb25lbnROYW1lID8gY29tcG9uZW50TmFtZSA6IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJlYWN0RWxlbWVudCh0eXBlLCBrZXksIHByb3BzLCBvd25lciwgZGVidWdTdGFjaywgZGVidWdUYXNrKSB7XG4gICAgICB2YXIgcmVmUHJvcCA9IHByb3BzLnJlZjtcbiAgICAgIHR5cGUgPSB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIF9vd25lcjogb3duZXJcbiAgICAgIH07XG4gICAgICBudWxsICE9PSAodm9pZCAwICE9PSByZWZQcm9wID8gcmVmUHJvcCA6IG51bGwpXG4gICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwicmVmXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICAgICAgZ2V0OiBlbGVtZW50UmVmR2V0dGVyV2l0aERlcHJlY2F0aW9uV2FybmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwicmVmXCIsIHsgZW51bWVyYWJsZTogITEsIHZhbHVlOiBudWxsIH0pO1xuICAgICAgdHlwZS5fc3RvcmUgPSB7fTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLl9zdG9yZSwgXCJ2YWxpZGF0ZWRcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogMFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdJbmZvXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnU3RhY2tcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogZGVidWdTdGFja1xuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdUYXNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnVGFza1xuICAgICAgfSk7XG4gICAgICBPYmplY3QuZnJlZXplICYmIChPYmplY3QuZnJlZXplKHR5cGUucHJvcHMpLCBPYmplY3QuZnJlZXplKHR5cGUpKTtcbiAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9uZUFuZFJlcGxhY2VLZXkob2xkRWxlbWVudCwgbmV3S2V5KSB7XG4gICAgICBuZXdLZXkgPSBSZWFjdEVsZW1lbnQoXG4gICAgICAgIG9sZEVsZW1lbnQudHlwZSxcbiAgICAgICAgbmV3S2V5LFxuICAgICAgICBvbGRFbGVtZW50LnByb3BzLFxuICAgICAgICBvbGRFbGVtZW50Ll9vd25lcixcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdTdGFjayxcbiAgICAgICAgb2xkRWxlbWVudC5fZGVidWdUYXNrXG4gICAgICApO1xuICAgICAgb2xkRWxlbWVudC5fc3RvcmUgJiZcbiAgICAgICAgKG5ld0tleS5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkKTtcbiAgICAgIHJldHVybiBuZXdLZXk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUpIHtcbiAgICAgIGlzVmFsaWRFbGVtZW50KG5vZGUpXG4gICAgICAgID8gbm9kZS5fc3RvcmUgJiYgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpXG4gICAgICAgIDogXCJvYmplY3RcIiA9PT0gdHlwZW9mIG5vZGUgJiZcbiAgICAgICAgICBudWxsICE9PSBub2RlICYmXG4gICAgICAgICAgbm9kZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFICYmXG4gICAgICAgICAgKFwiZnVsZmlsbGVkXCIgPT09IG5vZGUuX3BheWxvYWQuc3RhdHVzXG4gICAgICAgICAgICA/IGlzVmFsaWRFbGVtZW50KG5vZGUuX3BheWxvYWQudmFsdWUpICYmXG4gICAgICAgICAgICAgIG5vZGUuX3BheWxvYWQudmFsdWUuX3N0b3JlICYmXG4gICAgICAgICAgICAgIChub2RlLl9wYXlsb2FkLnZhbHVlLl9zdG9yZS52YWxpZGF0ZWQgPSAxKVxuICAgICAgICAgICAgOiBub2RlLl9zdG9yZSAmJiAobm9kZS5fc3RvcmUudmFsaWRhdGVkID0gMSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1ZhbGlkRWxlbWVudChvYmplY3QpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiBvYmplY3QgJiZcbiAgICAgICAgbnVsbCAhPT0gb2JqZWN0ICYmXG4gICAgICAgIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFXG4gICAgICApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlc2NhcGUoa2V5KSB7XG4gICAgICB2YXIgZXNjYXBlckxvb2t1cCA9IHsgXCI9XCI6IFwiPTBcIiwgXCI6XCI6IFwiPTJcIiB9O1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgXCIkXCIgK1xuICAgICAgICBrZXkucmVwbGFjZSgvWz06XS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICByZXR1cm4gZXNjYXBlckxvb2t1cFttYXRjaF07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50S2V5KGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gXCJvYmplY3RcIiA9PT0gdHlwZW9mIGVsZW1lbnQgJiZcbiAgICAgICAgbnVsbCAhPT0gZWxlbWVudCAmJlxuICAgICAgICBudWxsICE9IGVsZW1lbnQua2V5XG4gICAgICAgID8gKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oZWxlbWVudC5rZXkpLCBlc2NhcGUoXCJcIiArIGVsZW1lbnQua2V5KSlcbiAgICAgICAgOiBpbmRleC50b1N0cmluZygzNik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc29sdmVUaGVuYWJsZSh0aGVuYWJsZSkge1xuICAgICAgc3dpdGNoICh0aGVuYWJsZS5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcImZ1bGZpbGxlZFwiOlxuICAgICAgICAgIHJldHVybiB0aGVuYWJsZS52YWx1ZTtcbiAgICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgICAgdGhyb3cgdGhlbmFibGUucmVhc29uO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAoXG4gICAgICAgICAgICAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHRoZW5hYmxlLnN0YXR1c1xuICAgICAgICAgICAgICA/IHRoZW5hYmxlLnRoZW4obm9vcCwgbm9vcClcbiAgICAgICAgICAgICAgOiAoKHRoZW5hYmxlLnN0YXR1cyA9IFwicGVuZGluZ1wiKSxcbiAgICAgICAgICAgICAgICB0aGVuYWJsZS50aGVuKFxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGZ1bGZpbGxlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIFwicGVuZGluZ1wiID09PSB0aGVuYWJsZS5zdGF0dXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAoKHRoZW5hYmxlLnN0YXR1cyA9IFwiZnVsZmlsbGVkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICh0aGVuYWJsZS52YWx1ZSA9IGZ1bGZpbGxlZFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIFwicGVuZGluZ1wiID09PSB0aGVuYWJsZS5zdGF0dXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAoKHRoZW5hYmxlLnN0YXR1cyA9IFwicmVqZWN0ZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgKHRoZW5hYmxlLnJlYXNvbiA9IGVycm9yKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICB0aGVuYWJsZS5zdGF0dXMpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjYXNlIFwiZnVsZmlsbGVkXCI6XG4gICAgICAgICAgICAgIHJldHVybiB0aGVuYWJsZS52YWx1ZTtcbiAgICAgICAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICAgICAgICB0aHJvdyB0aGVuYWJsZS5yZWFzb247XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgdGhlbmFibGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1hcEludG9BcnJheShjaGlsZHJlbiwgYXJyYXksIGVzY2FwZWRQcmVmaXgsIG5hbWVTb0ZhciwgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGNoaWxkcmVuO1xuICAgICAgaWYgKFwidW5kZWZpbmVkXCIgPT09IHR5cGUgfHwgXCJib29sZWFuXCIgPT09IHR5cGUpIGNoaWxkcmVuID0gbnVsbDtcbiAgICAgIHZhciBpbnZva2VDYWxsYmFjayA9ICExO1xuICAgICAgaWYgKG51bGwgPT09IGNoaWxkcmVuKSBpbnZva2VDYWxsYmFjayA9ICEwO1xuICAgICAgZWxzZVxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGludm9rZUNhbGxiYWNrID0gITA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBzd2l0Y2ggKGNoaWxkcmVuLiQkdHlwZW9mKSB7XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfRUxFTUVOVF9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrID0gITA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAoaW52b2tlQ2FsbGJhY2sgPSBjaGlsZHJlbi5faW5pdCksXG4gICAgICAgICAgICAgICAgICBtYXBJbnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrKGNoaWxkcmVuLl9wYXlsb2FkKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyYXksXG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZWRQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVTb0ZhcixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBpZiAoaW52b2tlQ2FsbGJhY2spIHtcbiAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSBjaGlsZHJlbjtcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayhpbnZva2VDYWxsYmFjayk7XG4gICAgICAgIHZhciBjaGlsZEtleSA9XG4gICAgICAgICAgXCJcIiA9PT0gbmFtZVNvRmFyID8gXCIuXCIgKyBnZXRFbGVtZW50S2V5KGludm9rZUNhbGxiYWNrLCAwKSA6IG5hbWVTb0ZhcjtcbiAgICAgICAgaXNBcnJheUltcGwoY2FsbGJhY2spXG4gICAgICAgICAgPyAoKGVzY2FwZWRQcmVmaXggPSBcIlwiKSxcbiAgICAgICAgICAgIG51bGwgIT0gY2hpbGRLZXkgJiZcbiAgICAgICAgICAgICAgKGVzY2FwZWRQcmVmaXggPVxuICAgICAgICAgICAgICAgIGNoaWxkS2V5LnJlcGxhY2UodXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsIFwiJCYvXCIpICsgXCIvXCIpLFxuICAgICAgICAgICAgbWFwSW50b0FycmF5KGNhbGxiYWNrLCBhcnJheSwgZXNjYXBlZFByZWZpeCwgXCJcIiwgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICA6IG51bGwgIT0gY2FsbGJhY2sgJiZcbiAgICAgICAgICAgIChpc1ZhbGlkRWxlbWVudChjYWxsYmFjaykgJiZcbiAgICAgICAgICAgICAgKG51bGwgIT0gY2FsbGJhY2sua2V5ICYmXG4gICAgICAgICAgICAgICAgKChpbnZva2VDYWxsYmFjayAmJiBpbnZva2VDYWxsYmFjay5rZXkgPT09IGNhbGxiYWNrLmtleSkgfHxcbiAgICAgICAgICAgICAgICAgIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY2FsbGJhY2sua2V5KSksXG4gICAgICAgICAgICAgIChlc2NhcGVkUHJlZml4ID0gY2xvbmVBbmRSZXBsYWNlS2V5KFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIGVzY2FwZWRQcmVmaXggK1xuICAgICAgICAgICAgICAgICAgKG51bGwgPT0gY2FsbGJhY2sua2V5IHx8XG4gICAgICAgICAgICAgICAgICAoaW52b2tlQ2FsbGJhY2sgJiYgaW52b2tlQ2FsbGJhY2sua2V5ID09PSBjYWxsYmFjay5rZXkpXG4gICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICA6IChcIlwiICsgY2FsbGJhY2sua2V5KS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiQmL1wiXG4gICAgICAgICAgICAgICAgICAgICAgKSArIFwiL1wiKSArXG4gICAgICAgICAgICAgICAgICBjaGlsZEtleVxuICAgICAgICAgICAgICApKSxcbiAgICAgICAgICAgICAgXCJcIiAhPT0gbmFtZVNvRmFyICYmXG4gICAgICAgICAgICAgICAgbnVsbCAhPSBpbnZva2VDYWxsYmFjayAmJlxuICAgICAgICAgICAgICAgIGlzVmFsaWRFbGVtZW50KGludm9rZUNhbGxiYWNrKSAmJlxuICAgICAgICAgICAgICAgIG51bGwgPT0gaW52b2tlQ2FsbGJhY2sua2V5ICYmXG4gICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2suX3N0b3JlICYmXG4gICAgICAgICAgICAgICAgIWludm9rZUNhbGxiYWNrLl9zdG9yZS52YWxpZGF0ZWQgJiZcbiAgICAgICAgICAgICAgICAoZXNjYXBlZFByZWZpeC5fc3RvcmUudmFsaWRhdGVkID0gMiksXG4gICAgICAgICAgICAgIChjYWxsYmFjayA9IGVzY2FwZWRQcmVmaXgpKSxcbiAgICAgICAgICAgIGFycmF5LnB1c2goY2FsbGJhY2spKTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgICBpbnZva2VDYWxsYmFjayA9IDA7XG4gICAgICBjaGlsZEtleSA9IFwiXCIgPT09IG5hbWVTb0ZhciA/IFwiLlwiIDogbmFtZVNvRmFyICsgXCI6XCI7XG4gICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIChuYW1lU29GYXIgPSBjaGlsZHJlbltpXSksXG4gICAgICAgICAgICAodHlwZSA9IGNoaWxkS2V5ICsgZ2V0RWxlbWVudEtleShuYW1lU29GYXIsIGkpKSxcbiAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayArPSBtYXBJbnRvQXJyYXkoXG4gICAgICAgICAgICAgIG5hbWVTb0ZhcixcbiAgICAgICAgICAgICAgYXJyYXksXG4gICAgICAgICAgICAgIGVzY2FwZWRQcmVmaXgsXG4gICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICApKTtcbiAgICAgIGVsc2UgaWYgKCgoaSA9IGdldEl0ZXJhdG9yRm4oY2hpbGRyZW4pKSwgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgaSkpXG4gICAgICAgIGZvciAoXG4gICAgICAgICAgaSA9PT0gY2hpbGRyZW4uZW50cmllcyAmJlxuICAgICAgICAgICAgKGRpZFdhcm5BYm91dE1hcHMgfHxcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgIFwiVXNpbmcgTWFwcyBhcyBjaGlsZHJlbiBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgYW4gYXJyYXkgb2Yga2V5ZWQgUmVhY3RFbGVtZW50cyBpbnN0ZWFkLlwiXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAoZGlkV2FybkFib3V0TWFwcyA9ICEwKSksXG4gICAgICAgICAgICBjaGlsZHJlbiA9IGkuY2FsbChjaGlsZHJlbiksXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAhKG5hbWVTb0ZhciA9IGNoaWxkcmVuLm5leHQoKSkuZG9uZTtcblxuICAgICAgICApXG4gICAgICAgICAgKG5hbWVTb0ZhciA9IG5hbWVTb0Zhci52YWx1ZSksXG4gICAgICAgICAgICAodHlwZSA9IGNoaWxkS2V5ICsgZ2V0RWxlbWVudEtleShuYW1lU29GYXIsIGkrKykpLFxuICAgICAgICAgICAgKGludm9rZUNhbGxiYWNrICs9IG1hcEludG9BcnJheShcbiAgICAgICAgICAgICAgbmFtZVNvRmFyLFxuICAgICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICAgICkpO1xuICAgICAgZWxzZSBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZSkge1xuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgY2hpbGRyZW4udGhlbilcbiAgICAgICAgICByZXR1cm4gbWFwSW50b0FycmF5KFxuICAgICAgICAgICAgcmVzb2x2ZVRoZW5hYmxlKGNoaWxkcmVuKSxcbiAgICAgICAgICAgIGFycmF5LFxuICAgICAgICAgICAgZXNjYXBlZFByZWZpeCxcbiAgICAgICAgICAgIG5hbWVTb0ZhcixcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgKTtcbiAgICAgICAgYXJyYXkgPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICBcIk9iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogXCIgK1xuICAgICAgICAgICAgKFwiW29iamVjdCBPYmplY3RdXCIgPT09IGFycmF5XG4gICAgICAgICAgICAgID8gXCJvYmplY3Qgd2l0aCBrZXlzIHtcIiArIE9iamVjdC5rZXlzKGNoaWxkcmVuKS5qb2luKFwiLCBcIikgKyBcIn1cIlxuICAgICAgICAgICAgICA6IGFycmF5KSArXG4gICAgICAgICAgICBcIikuIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgaW5zdGVhZC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuYywgY29udGV4dCkge1xuICAgICAgaWYgKG51bGwgPT0gY2hpbGRyZW4pIHJldHVybiBjaGlsZHJlbjtcbiAgICAgIHZhciByZXN1bHQgPSBbXSxcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgbWFwSW50b0FycmF5KGNoaWxkcmVuLCByZXN1bHQsIFwiXCIsIFwiXCIsIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBjb3VudCsrKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGF6eUluaXRpYWxpemVyKHBheWxvYWQpIHtcbiAgICAgIGlmICgtMSA9PT0gcGF5bG9hZC5fc3RhdHVzKSB7XG4gICAgICAgIHZhciBpb0luZm8gPSBwYXlsb2FkLl9pb0luZm87XG4gICAgICAgIG51bGwgIT0gaW9JbmZvICYmIChpb0luZm8uc3RhcnQgPSBpb0luZm8uZW5kID0gcGVyZm9ybWFuY2Uubm93KCkpO1xuICAgICAgICBpb0luZm8gPSBwYXlsb2FkLl9yZXN1bHQ7XG4gICAgICAgIHZhciB0aGVuYWJsZSA9IGlvSW5mbygpO1xuICAgICAgICB0aGVuYWJsZS50aGVuKFxuICAgICAgICAgIGZ1bmN0aW9uIChtb2R1bGVPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cykge1xuICAgICAgICAgICAgICBwYXlsb2FkLl9zdGF0dXMgPSAxO1xuICAgICAgICAgICAgICBwYXlsb2FkLl9yZXN1bHQgPSBtb2R1bGVPYmplY3Q7XG4gICAgICAgICAgICAgIHZhciBfaW9JbmZvID0gcGF5bG9hZC5faW9JbmZvO1xuICAgICAgICAgICAgICBudWxsICE9IF9pb0luZm8gJiYgKF9pb0luZm8uZW5kID0gcGVyZm9ybWFuY2Uubm93KCkpO1xuICAgICAgICAgICAgICB2b2lkIDAgPT09IHRoZW5hYmxlLnN0YXR1cyAmJlxuICAgICAgICAgICAgICAgICgodGhlbmFibGUuc3RhdHVzID0gXCJmdWxmaWxsZWRcIiksXG4gICAgICAgICAgICAgICAgKHRoZW5hYmxlLnZhbHVlID0gbW9kdWxlT2JqZWN0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cykge1xuICAgICAgICAgICAgICBwYXlsb2FkLl9zdGF0dXMgPSAyO1xuICAgICAgICAgICAgICBwYXlsb2FkLl9yZXN1bHQgPSBlcnJvcjtcbiAgICAgICAgICAgICAgdmFyIF9pb0luZm8yID0gcGF5bG9hZC5faW9JbmZvO1xuICAgICAgICAgICAgICBudWxsICE9IF9pb0luZm8yICYmIChfaW9JbmZvMi5lbmQgPSBwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgICAgICAgIHZvaWQgMCA9PT0gdGhlbmFibGUuc3RhdHVzICYmXG4gICAgICAgICAgICAgICAgKCh0aGVuYWJsZS5zdGF0dXMgPSBcInJlamVjdGVkXCIpLCAodGhlbmFibGUucmVhc29uID0gZXJyb3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGlvSW5mbyA9IHBheWxvYWQuX2lvSW5mbztcbiAgICAgICAgaWYgKG51bGwgIT0gaW9JbmZvKSB7XG4gICAgICAgICAgaW9JbmZvLnZhbHVlID0gdGhlbmFibGU7XG4gICAgICAgICAgdmFyIGRpc3BsYXlOYW1lID0gdGhlbmFibGUuZGlzcGxheU5hbWU7XG4gICAgICAgICAgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGRpc3BsYXlOYW1lICYmIChpb0luZm8ubmFtZSA9IGRpc3BsYXlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAtMSA9PT0gcGF5bG9hZC5fc3RhdHVzICYmXG4gICAgICAgICAgKChwYXlsb2FkLl9zdGF0dXMgPSAwKSwgKHBheWxvYWQuX3Jlc3VsdCA9IHRoZW5hYmxlKSk7XG4gICAgICB9XG4gICAgICBpZiAoMSA9PT0gcGF5bG9hZC5fc3RhdHVzKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIChpb0luZm8gPSBwYXlsb2FkLl9yZXN1bHQpLFxuICAgICAgICAgIHZvaWQgMCA9PT0gaW9JbmZvICYmXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcImxhenk6IEV4cGVjdGVkIHRoZSByZXN1bHQgb2YgYSBkeW5hbWljIGltcG9ydCgpIGNhbGwuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXFxuXFxuWW91ciBjb2RlIHNob3VsZCBsb29rIGxpa2U6IFxcbiAgY29uc3QgTXlDb21wb25lbnQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9NeUNvbXBvbmVudCcpKVxcblxcbkRpZCB5b3UgYWNjaWRlbnRhbGx5IHB1dCBjdXJseSBicmFjZXMgYXJvdW5kIHRoZSBpbXBvcnQ/XCIsXG4gICAgICAgICAgICAgIGlvSW5mb1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICBcImRlZmF1bHRcIiBpbiBpb0luZm8gfHxcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwibGF6eTogRXhwZWN0ZWQgdGhlIHJlc3VsdCBvZiBhIGR5bmFtaWMgaW1wb3J0KCkgY2FsbC4gSW5zdGVhZCByZWNlaXZlZDogJXNcXG5cXG5Zb3VyIGNvZGUgc2hvdWxkIGxvb2sgbGlrZTogXFxuICBjb25zdCBNeUNvbXBvbmVudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL015Q29tcG9uZW50JykpXCIsXG4gICAgICAgICAgICAgIGlvSW5mb1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICBpb0luZm8uZGVmYXVsdFxuICAgICAgICApO1xuICAgICAgdGhyb3cgcGF5bG9hZC5fcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXNvbHZlRGlzcGF0Y2hlcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDtcbiAgICAgIG51bGwgPT09IGRpc3BhdGNoZXIgJiZcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkludmFsaWQgaG9vayBjYWxsLiBIb29rcyBjYW4gb25seSBiZSBjYWxsZWQgaW5zaWRlIG9mIHRoZSBib2R5IG9mIGEgZnVuY3Rpb24gY29tcG9uZW50LiBUaGlzIGNvdWxkIGhhcHBlbiBmb3Igb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczpcXG4xLiBZb3UgbWlnaHQgaGF2ZSBtaXNtYXRjaGluZyB2ZXJzaW9ucyBvZiBSZWFjdCBhbmQgdGhlIHJlbmRlcmVyIChzdWNoIGFzIFJlYWN0IERPTSlcXG4yLiBZb3UgbWlnaHQgYmUgYnJlYWtpbmcgdGhlIFJ1bGVzIG9mIEhvb2tzXFxuMy4gWW91IG1pZ2h0IGhhdmUgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0IGluIHRoZSBzYW1lIGFwcFxcblNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsIGZvciB0aXBzIGFib3V0IGhvdyB0byBkZWJ1ZyBhbmQgZml4IHRoaXMgcHJvYmxlbS5cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbGVhc2VBc3luY1RyYW5zaXRpb24oKSB7XG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscy5hc3luY1RyYW5zaXRpb25zLS07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVUYXNrKHRhc2spIHtcbiAgICAgIGlmIChudWxsID09PSBlbnF1ZXVlVGFza0ltcGwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHJlcXVpcmVTdHJpbmcgPSAoXCJyZXF1aXJlXCIgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgwLCA3KTtcbiAgICAgICAgICBlbnF1ZXVlVGFza0ltcGwgPSAobW9kdWxlICYmIG1vZHVsZVtyZXF1aXJlU3RyaW5nXSkuY2FsbChcbiAgICAgICAgICAgIG1vZHVsZSxcbiAgICAgICAgICAgIFwidGltZXJzXCJcbiAgICAgICAgICApLnNldEltbWVkaWF0ZTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycikge1xuICAgICAgICAgIGVucXVldWVUYXNrSW1wbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgITEgPT09IGRpZFdhcm5BYm91dE1lc3NhZ2VDaGFubmVsICYmXG4gICAgICAgICAgICAgICgoZGlkV2FybkFib3V0TWVzc2FnZUNoYW5uZWwgPSAhMCksXG4gICAgICAgICAgICAgIFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAmJlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBoYXZlIGEgTWVzc2FnZUNoYW5uZWwgaW1wbGVtZW50YXRpb24sIHNvIGVucXVldWluZyB0YXNrcyB2aWEgYXdhaXQgYWN0KGFzeW5jICgpID0+IC4uLikgd2lsbCBmYWlsLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzIGlmIHlvdSBlbmNvdW50ZXIgdGhpcyB3YXJuaW5nLlwiXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2Uodm9pZCAwKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICByZXR1cm4gZW5xdWV1ZVRhc2tJbXBsKHRhc2spO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZ2dyZWdhdGVFcnJvcnMoZXJyb3JzKSB7XG4gICAgICByZXR1cm4gMSA8IGVycm9ycy5sZW5ndGggJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgQWdncmVnYXRlRXJyb3JcbiAgICAgICAgPyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKVxuICAgICAgICA6IGVycm9yc1swXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCkge1xuICAgICAgcHJldkFjdFNjb3BlRGVwdGggIT09IGFjdFNjb3BlRGVwdGggLSAxICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJZb3Ugc2VlbSB0byBoYXZlIG92ZXJsYXBwaW5nIGFjdCgpIGNhbGxzLCB0aGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEJlIHN1cmUgdG8gYXdhaXQgcHJldmlvdXMgYWN0KCkgY2FsbHMgYmVmb3JlIG1ha2luZyBhIG5ldyBvbmUuIFwiXG4gICAgICAgICk7XG4gICAgICBhY3RTY29wZURlcHRoID0gcHJldkFjdFNjb3BlRGVwdGg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsocmV0dXJuVmFsdWUsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHF1ZXVlID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWU7XG4gICAgICBpZiAobnVsbCAhPT0gcXVldWUpXG4gICAgICAgIGlmICgwICE9PSBxdWV1ZS5sZW5ndGgpXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZsdXNoQWN0UXVldWUocXVldWUpO1xuICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhyZXR1cm5WYWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlIFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbDtcbiAgICAgIDAgPCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoXG4gICAgICAgID8gKChxdWV1ZSA9IGFnZ3JlZ2F0ZUVycm9ycyhSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMpKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDApLFxuICAgICAgICAgIHJlamVjdChxdWV1ZSkpXG4gICAgICAgIDogcmVzb2x2ZShyZXR1cm5WYWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZsdXNoQWN0UXVldWUocXVldWUpIHtcbiAgICAgIGlmICghaXNGbHVzaGluZykge1xuICAgICAgICBpc0ZsdXNoaW5nID0gITA7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuZGlkVXNlUHJvbWlzZSA9ICExO1xuICAgICAgICAgICAgICB2YXIgY29udGludWF0aW9uID0gY2FsbGJhY2soITEpO1xuICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gY29udGludWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmRpZFVzZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgIHF1ZXVlW2ldID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gY29udGludWF0aW9uO1xuICAgICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgICAgICB9IHdoaWxlICgxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBxdWV1ZS5zcGxpY2UoMCwgaSArIDEpLCBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaXNGbHVzaGluZyA9ICExO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiZcbiAgICAgIFwiZnVuY3Rpb25cIiA9PT1cbiAgICAgICAgdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQgJiZcbiAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQoRXJyb3IoKSk7XG4gICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC50cmFuc2l0aW9uYWwuZWxlbWVudFwiKSxcbiAgICAgIFJFQUNUX1BPUlRBTF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnBvcnRhbFwiKSxcbiAgICAgIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZnJhZ21lbnRcIiksXG4gICAgICBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpLFxuICAgICAgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wcm9maWxlclwiKSxcbiAgICAgIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29uc3VtZXJcIiksXG4gICAgICBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuY29udGV4dFwiKSxcbiAgICAgIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlXCIpLFxuICAgICAgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlX2xpc3RcIiksXG4gICAgICBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKSxcbiAgICAgIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5sYXp5XCIpLFxuICAgICAgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5hY3Rpdml0eVwiKSxcbiAgICAgIE1BWUJFX0lURVJBVE9SX1NZTUJPTCA9IFN5bWJvbC5pdGVyYXRvcixcbiAgICAgIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudCA9IHt9LFxuICAgICAgUmVhY3ROb29wVXBkYXRlUXVldWUgPSB7XG4gICAgICAgIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICAgICAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgXCJmb3JjZVVwZGF0ZVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgICAgICAgd2Fybk5vb3AocHVibGljSW5zdGFuY2UsIFwicmVwbGFjZVN0YXRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgICAgICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBcInNldFN0YXRlXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbixcbiAgICAgIGVtcHR5T2JqZWN0ID0ge307XG4gICAgT2JqZWN0LmZyZWV6ZShlbXB0eU9iamVjdCk7XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgIT09IHR5cGVvZiBwYXJ0aWFsU3RhdGUgJiZcbiAgICAgICAgXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgcGFydGlhbFN0YXRlICYmXG4gICAgICAgIG51bGwgIT0gcGFydGlhbFN0YXRlXG4gICAgICApXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwidGFrZXMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcyB0byB1cGRhdGUgb3IgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuXCJcbiAgICAgICAgKTtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgcGFydGlhbFN0YXRlLCBjYWxsYmFjaywgXCJzZXRTdGF0ZVwiKTtcbiAgICB9O1xuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcywgY2FsbGJhY2ssIFwiZm9yY2VVcGRhdGVcIik7XG4gICAgfTtcbiAgICB2YXIgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICBpc01vdW50ZWQ6IFtcbiAgICAgICAgXCJpc01vdW50ZWRcIixcbiAgICAgICAgXCJJbnN0ZWFkLCBtYWtlIHN1cmUgdG8gY2xlYW4gdXAgc3Vic2NyaXB0aW9ucyBhbmQgcGVuZGluZyByZXF1ZXN0cyBpbiBjb21wb25lbnRXaWxsVW5tb3VudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy5cIlxuICAgICAgXSxcbiAgICAgIHJlcGxhY2VTdGF0ZTogW1xuICAgICAgICBcInJlcGxhY2VTdGF0ZVwiLFxuICAgICAgICBcIlJlZmFjdG9yIHlvdXIgY29kZSB0byB1c2Ugc2V0U3RhdGUgaW5zdGVhZCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMzIzNikuXCJcbiAgICAgIF1cbiAgICB9O1xuICAgIGZvciAoZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKVxuICAgICAgZGVwcmVjYXRlZEFQSXMuaGFzT3duUHJvcGVydHkoZm5OYW1lKSAmJlxuICAgICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcbiAgICBDb21wb25lbnREdW1teS5wcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gUHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50RHVtbXkoKTtcbiAgICBkZXByZWNhdGVkQVBJcy5jb25zdHJ1Y3RvciA9IFB1cmVDb21wb25lbnQ7XG4gICAgYXNzaWduKGRlcHJlY2F0ZWRBUElzLCBDb21wb25lbnQucHJvdG90eXBlKTtcbiAgICBkZXByZWNhdGVkQVBJcy5pc1B1cmVSZWFjdENvbXBvbmVudCA9ICEwO1xuICAgIHZhciBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcihcInJlYWN0LmNsaWVudC5yZWZlcmVuY2VcIiksXG4gICAgICBSZWFjdFNoYXJlZEludGVybmFscyA9IHtcbiAgICAgICAgSDogbnVsbCxcbiAgICAgICAgQTogbnVsbCxcbiAgICAgICAgVDogbnVsbCxcbiAgICAgICAgUzogbnVsbCxcbiAgICAgICAgYWN0UXVldWU6IG51bGwsXG4gICAgICAgIGFzeW5jVHJhbnNpdGlvbnM6IDAsXG4gICAgICAgIGlzQmF0Y2hpbmdMZWdhY3k6ICExLFxuICAgICAgICBkaWRTY2hlZHVsZUxlZ2FjeVVwZGF0ZTogITEsXG4gICAgICAgIGRpZFVzZVByb21pc2U6ICExLFxuICAgICAgICB0aHJvd25FcnJvcnM6IFtdLFxuICAgICAgICBnZXRDdXJyZW50U3RhY2s6IG51bGwsXG4gICAgICAgIHJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzOiAwXG4gICAgICB9LFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA/IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgZGVwcmVjYXRlZEFQSXMgPSB7XG4gICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uIChjYWxsU3RhY2tGb3JFcnJvcikge1xuICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biwgZGlkV2FybkFib3V0T2xkSlNYUnVudGltZTtcbiAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9O1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1N0YWNrID0gZGVwcmVjYXRlZEFQSXMucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoXG4gICAgICBkZXByZWNhdGVkQVBJcyxcbiAgICAgIFVua25vd25Pd25lclxuICAgICkoKTtcbiAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTtcbiAgICB2YXIgZGlkV2FybkFib3V0TWFwcyA9ICExLFxuICAgICAgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvXFwvKy9nLFxuICAgICAgcmVwb3J0R2xvYmFsRXJyb3IgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiByZXBvcnRFcnJvclxuICAgICAgICAgID8gcmVwb3J0RXJyb3JcbiAgICAgICAgICA6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHdpbmRvdyAmJlxuICAgICAgICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHdpbmRvdy5FcnJvckV2ZW50XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyB3aW5kb3cuRXJyb3JFdmVudChcImVycm9yXCIsIHtcbiAgICAgICAgICAgICAgICAgIGJ1YmJsZXM6ICEwLFxuICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogITAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gZXJyb3IgJiZcbiAgICAgICAgICAgICAgICAgICAgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICA/IFN0cmluZyhlcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHByb2Nlc3MgJiZcbiAgICAgICAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBwcm9jZXNzLmVtaXRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwidW5jYXVnaHRFeGNlcHRpb25cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICBkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCA9ICExLFxuICAgICAgZW5xdWV1ZVRhc2tJbXBsID0gbnVsbCxcbiAgICAgIGFjdFNjb3BlRGVwdGggPSAwLFxuICAgICAgZGlkV2Fybk5vQXdhaXRBY3QgPSAhMSxcbiAgICAgIGlzRmx1c2hpbmcgPSAhMSxcbiAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MgPVxuICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBxdWV1ZU1pY3JvdGFza1xuICAgICAgICAgID8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVldWVNaWNyb3Rhc2soY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IGVucXVldWVUYXNrO1xuICAgIGRlcHJlY2F0ZWRBUElzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICBfX3Byb3RvX186IG51bGwsXG4gICAgICBjOiBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vQ2FjaGUoc2l6ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGZuTmFtZSA9IHtcbiAgICAgIG1hcDogbWFwQ2hpbGRyZW4sXG4gICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICAgICAgICBtYXBDaGlsZHJlbihcbiAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3JFYWNoRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9yRWFjaENvbnRleHRcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBjb3VudDogZnVuY3Rpb24gKGNoaWxkcmVuKSB7XG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbjtcbiAgICAgIH0sXG4gICAgICB0b0FycmF5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgfSkgfHwgW11cbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBvbmx5OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpXG4gICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICBcIlJlYWN0LkNoaWxkcmVuLm9ubHkgZXhwZWN0ZWQgdG8gcmVjZWl2ZSBhIHNpbmdsZSBSZWFjdCBlbGVtZW50IGNoaWxkLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgfVxuICAgIH07XG4gICAgZXhwb3J0cy5BY3Rpdml0eSA9IFJFQUNUX0FDVElWSVRZX1RZUEU7XG4gICAgZXhwb3J0cy5DaGlsZHJlbiA9IGZuTmFtZTtcbiAgICBleHBvcnRzLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLlByb2ZpbGVyID0gUkVBQ1RfUFJPRklMRVJfVFlQRTtcbiAgICBleHBvcnRzLlB1cmVDb21wb25lbnQgPSBQdXJlQ29tcG9uZW50O1xuICAgIGV4cG9ydHMuU3RyaWN0TW9kZSA9IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7XG4gICAgZXhwb3J0cy5TdXNwZW5zZSA9IFJFQUNUX1NVU1BFTlNFX1RZUEU7XG4gICAgZXhwb3J0cy5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREUgPVxuICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHM7XG4gICAgZXhwb3J0cy5fX0NPTVBJTEVSX1JVTlRJTUUgPSBkZXByZWNhdGVkQVBJcztcbiAgICBleHBvcnRzLmFjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIHByZXZBY3RRdWV1ZSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlLFxuICAgICAgICBwcmV2QWN0U2NvcGVEZXB0aCA9IGFjdFNjb3BlRGVwdGg7XG4gICAgICBhY3RTY29wZURlcHRoKys7XG4gICAgICB2YXIgcXVldWUgPSAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPVxuICAgICAgICAgIG51bGwgIT09IHByZXZBY3RRdWV1ZSA/IHByZXZBY3RRdWV1ZSA6IFtdKSxcbiAgICAgICAgZGlkQXdhaXRBY3RDYWxsID0gITE7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGlmICgwIDwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aClcbiAgICAgICAgdGhyb3cgKFxuICAgICAgICAgIChwb3BBY3RTY29wZShwcmV2QWN0UXVldWUsIHByZXZBY3RTY29wZURlcHRoKSxcbiAgICAgICAgICAoY2FsbGJhY2sgPSBhZ2dyZWdhdGVFcnJvcnMoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzKSksXG4gICAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwKSxcbiAgICAgICAgICBjYWxsYmFjaylcbiAgICAgICAgKTtcbiAgICAgIGlmIChcbiAgICAgICAgbnVsbCAhPT0gcmVzdWx0ICYmXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiByZXN1bHQgJiZcbiAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmVzdWx0LnRoZW5cbiAgICAgICkge1xuICAgICAgICB2YXIgdGhlbmFibGUgPSByZXN1bHQ7XG4gICAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCB8fFxuICAgICAgICAgICAgZGlkV2Fybk5vQXdhaXRBY3QgfHxcbiAgICAgICAgICAgICgoZGlkV2Fybk5vQXdhaXRBY3QgPSAhMCksXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIllvdSBjYWxsZWQgYWN0KGFzeW5jICgpID0+IC4uLikgd2l0aG91dCBhd2FpdC4gVGhpcyBjb3VsZCBsZWFkIHRvIHVuZXhwZWN0ZWQgdGVzdGluZyBiZWhhdmlvdXIsIGludGVybGVhdmluZyBtdWx0aXBsZSBhY3QgY2FsbHMgYW5kIG1peGluZyB0aGVpciBzY29wZXMuIFlvdSBzaG91bGQgLSBhd2FpdCBhY3QoYXN5bmMgKCkgPT4gLi4uKTtcIlxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICEwO1xuICAgICAgICAgICAgdGhlbmFibGUudGhlbihcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKHJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHByZXZBY3RTY29wZURlcHRoKSB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmbHVzaEFjdFF1ZXVlKHF1ZXVlKSxcbiAgICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlVGFzayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yJDApIHtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLnB1c2goZXJyb3IkMCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aHJvd25FcnJvciA9IGFnZ3JlZ2F0ZUVycm9ycyhcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfdGhyb3duRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAgICAgICAgICAgMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgID8gKChlcnJvciA9IGFnZ3JlZ2F0ZUVycm9ycyhcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcikpXG4gICAgICAgICAgICAgICAgICA6IHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdmFyIHJldHVyblZhbHVlJGpzY29tcCQwID0gcmVzdWx0O1xuICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAwID09PSBwcmV2QWN0U2NvcGVEZXB0aCAmJlxuICAgICAgICAoZmx1c2hBY3RRdWV1ZShxdWV1ZSksXG4gICAgICAgIDAgIT09IHF1ZXVlLmxlbmd0aCAmJlxuICAgICAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlkQXdhaXRBY3RDYWxsIHx8XG4gICAgICAgICAgICAgIGRpZFdhcm5Ob0F3YWl0QWN0IHx8XG4gICAgICAgICAgICAgICgoZGlkV2Fybk5vQXdhaXRBY3QgPSAhMCksXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgXCJBIGNvbXBvbmVudCBzdXNwZW5kZWQgaW5zaWRlIGFuIGBhY3RgIHNjb3BlLCBidXQgdGhlIGBhY3RgIGNhbGwgd2FzIG5vdCBhd2FpdGVkLiBXaGVuIHRlc3RpbmcgUmVhY3QgY29tcG9uZW50cyB0aGF0IGRlcGVuZCBvbiBhc3luY2hyb25vdXMgZGF0YSwgeW91IG11c3QgYXdhaXQgdGhlIHJlc3VsdDpcXG5cXG5hd2FpdCBhY3QoKCkgPT4gLi4uKVwiXG4gICAgICAgICAgICAgICkpO1xuICAgICAgICAgIH0pLFxuICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPSBudWxsKSk7XG4gICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpXG4gICAgICAgIHRocm93IChcbiAgICAgICAgICAoKGNhbGxiYWNrID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycykpLFxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgY2FsbGJhY2spXG4gICAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aGVuOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgZGlkQXdhaXRBY3RDYWxsID0gITA7XG4gICAgICAgICAgMCA9PT0gcHJldkFjdFNjb3BlRGVwdGhcbiAgICAgICAgICAgID8gKChSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSA9IHF1ZXVlKSxcbiAgICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVseUZsdXNoQXN5bmNBY3RXb3JrKFxuICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUkanNjb21wJDAsXG4gICAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgcmVqZWN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICA6IHJlc29sdmUocmV0dXJuVmFsdWUkanNjb21wJDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5jYWNoZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5jYWNoZVNpZ25hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgZXhwb3J0cy5jYXB0dXJlT3duZXJTdGFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnZXRDdXJyZW50U3RhY2sgPSBSZWFjdFNoYXJlZEludGVybmFscy5nZXRDdXJyZW50U3RhY2s7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZ2V0Q3VycmVudFN0YWNrID8gbnVsbCA6IGdldEN1cnJlbnRTdGFjaygpO1xuICAgIH07XG4gICAgZXhwb3J0cy5jbG9uZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnLCBjaGlsZHJlbikge1xuICAgICAgaWYgKG51bGwgPT09IGVsZW1lbnQgfHwgdm9pZCAwID09PSBlbGVtZW50KVxuICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICBcIlRoZSBhcmd1bWVudCBtdXN0IGJlIGEgUmVhY3QgZWxlbWVudCwgYnV0IHlvdSBwYXNzZWQgXCIgK1xuICAgICAgICAgICAgZWxlbWVudCArXG4gICAgICAgICAgICBcIi5cIlxuICAgICAgICApO1xuICAgICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzKSxcbiAgICAgICAga2V5ID0gZWxlbWVudC5rZXksXG4gICAgICAgIG93bmVyID0gZWxlbWVudC5fb3duZXI7XG4gICAgICBpZiAobnVsbCAhPSBjb25maWcpIHtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDtcbiAgICAgICAgYToge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcInJlZlwiKSAmJlxuICAgICAgICAgICAgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgXCJyZWZcIlxuICAgICAgICAgICAgKS5nZXQpICYmXG4gICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQuaXNSZWFjdFdhcm5pbmdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICB9XG4gICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gdm9pZCAwICE9PSBjb25maWcucmVmO1xuICAgICAgICB9XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCAmJiAob3duZXIgPSBnZXRPd25lcigpKTtcbiAgICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAgIChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGNvbmZpZy5rZXkpLCAoa2V5ID0gXCJcIiArIGNvbmZpZy5rZXkpKTtcbiAgICAgICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpXG4gICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgfHxcbiAgICAgICAgICAgIFwia2V5XCIgPT09IHByb3BOYW1lIHx8XG4gICAgICAgICAgICBcIl9fc2VsZlwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgXCJfX3NvdXJjZVwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgKFwicmVmXCIgPT09IHByb3BOYW1lICYmIHZvaWQgMCA9PT0gY29uZmlnLnJlZikgfHxcbiAgICAgICAgICAgIChwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgICAgaWYgKDEgPT09IHByb3BOYW1lKSBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgZWxzZSBpZiAoMSA8IHByb3BOYW1lKSB7XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IEFycmF5KHByb3BOYW1lKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTmFtZTsgaSsrKVxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdFtpXSA9IGFyZ3VtZW50c1tpICsgMl07XG4gICAgICAgIHByb3BzLmNoaWxkcmVuID0gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0O1xuICAgICAgfVxuICAgICAgcHJvcHMgPSBSZWFjdEVsZW1lbnQoXG4gICAgICAgIGVsZW1lbnQudHlwZSxcbiAgICAgICAga2V5LFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgb3duZXIsXG4gICAgICAgIGVsZW1lbnQuX2RlYnVnU3RhY2ssXG4gICAgICAgIGVsZW1lbnQuX2RlYnVnVGFza1xuICAgICAgKTtcbiAgICAgIGZvciAoa2V5ID0gMjsga2V5IDwgYXJndW1lbnRzLmxlbmd0aDsga2V5KyspXG4gICAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGFyZ3VtZW50c1trZXldKTtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlRFWFRfVFlQRSxcbiAgICAgICAgX2N1cnJlbnRWYWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfY3VycmVudFZhbHVlMjogZGVmYXVsdFZhbHVlLFxuICAgICAgICBfdGhyZWFkQ291bnQ6IDAsXG4gICAgICAgIFByb3ZpZGVyOiBudWxsLFxuICAgICAgICBDb25zdW1lcjogbnVsbFxuICAgICAgfTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Qcm92aWRlciA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5Db25zdW1lciA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0NPTlNVTUVSX1RZUEUsXG4gICAgICAgIF9jb250ZXh0OiBkZWZhdWx0VmFsdWVcbiAgICAgIH07XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlciA9IG51bGw7XG4gICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlcjIgPSBudWxsO1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIGNoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoYXJndW1lbnRzW2ldKTtcbiAgICAgIGkgPSB7fTtcbiAgICAgIHZhciBrZXkgPSBudWxsO1xuICAgICAgaWYgKG51bGwgIT0gY29uZmlnKVxuICAgICAgICBmb3IgKHByb3BOYW1lIGluIChkaWRXYXJuQWJvdXRPbGRKU1hSdW50aW1lIHx8XG4gICAgICAgICAgIShcIl9fc2VsZlwiIGluIGNvbmZpZykgfHxcbiAgICAgICAgICBcImtleVwiIGluIGNvbmZpZyB8fFxuICAgICAgICAgICgoZGlkV2FybkFib3V0T2xkSlNYUnVudGltZSA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIllvdXIgYXBwIChvciBvbmUgb2YgaXRzIGRlcGVuZGVuY2llcykgaXMgdXNpbmcgYW4gb3V0ZGF0ZWQgSlNYIHRyYW5zZm9ybS4gVXBkYXRlIHRvIHRoZSBtb2Rlcm4gSlNYIHRyYW5zZm9ybSBmb3IgZmFzdGVyIHBlcmZvcm1hbmNlOiBodHRwczovL3JlYWN0LmRldi9saW5rL25ldy1qc3gtdHJhbnNmb3JtXCJcbiAgICAgICAgICApKSxcbiAgICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAgIChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGNvbmZpZy5rZXkpLCAoa2V5ID0gXCJcIiArIGNvbmZpZy5rZXkpKSxcbiAgICAgICAgY29uZmlnKSlcbiAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmXG4gICAgICAgICAgICBcImtleVwiICE9PSBwcm9wTmFtZSAmJlxuICAgICAgICAgICAgXCJfX3NlbGZcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIFwiX19zb3VyY2VcIiAhPT0gcHJvcE5hbWUgJiZcbiAgICAgICAgICAgIChpW3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgdmFyIGNoaWxkcmVuTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7XG4gICAgICBpZiAoMSA9PT0gY2hpbGRyZW5MZW5ndGgpIGkuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIGVsc2UgaWYgKDEgPCBjaGlsZHJlbkxlbmd0aCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIHZhciBjaGlsZEFycmF5ID0gQXJyYXkoY2hpbGRyZW5MZW5ndGgpLCBfaSA9IDA7XG4gICAgICAgICAgX2kgPCBjaGlsZHJlbkxlbmd0aDtcbiAgICAgICAgICBfaSsrXG4gICAgICAgIClcbiAgICAgICAgICBjaGlsZEFycmF5W19pXSA9IGFyZ3VtZW50c1tfaSArIDJdO1xuICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRBcnJheSk7XG4gICAgICAgIGkuY2hpbGRyZW4gPSBjaGlsZEFycmF5O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpXG4gICAgICAgIGZvciAocHJvcE5hbWUgaW4gKChjaGlsZHJlbkxlbmd0aCA9IHR5cGUuZGVmYXVsdFByb3BzKSwgY2hpbGRyZW5MZW5ndGgpKVxuICAgICAgICAgIHZvaWQgMCA9PT0gaVtwcm9wTmFtZV0gJiYgKGlbcHJvcE5hbWVdID0gY2hpbGRyZW5MZW5ndGhbcHJvcE5hbWVdKTtcbiAgICAgIGtleSAmJlxuICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihcbiAgICAgICAgICBpLFxuICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGVcbiAgICAgICAgICAgID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgXCJVbmtub3duXCJcbiAgICAgICAgICAgIDogdHlwZVxuICAgICAgICApO1xuICAgICAgdmFyIHByb3BOYW1lID0gMWU0ID4gUmVhY3RTaGFyZWRJbnRlcm5hbHMucmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3MrKztcbiAgICAgIHJldHVybiBSZWFjdEVsZW1lbnQoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGtleSxcbiAgICAgICAgaSxcbiAgICAgICAgZ2V0T3duZXIoKSxcbiAgICAgICAgcHJvcE5hbWUgPyBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKSA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHByb3BOYW1lID8gY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSkgOiB1bmtub3duT3duZXJEZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLmNyZWF0ZVJlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZWZPYmplY3QgPSB7IGN1cnJlbnQ6IG51bGwgfTtcbiAgICAgIE9iamVjdC5zZWFsKHJlZk9iamVjdCk7XG4gICAgICByZXR1cm4gcmVmT2JqZWN0O1xuICAgIH07XG4gICAgZXhwb3J0cy5mb3J3YXJkUmVmID0gZnVuY3Rpb24gKHJlbmRlcikge1xuICAgICAgbnVsbCAhPSByZW5kZXIgJiYgcmVuZGVyLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEVcbiAgICAgICAgPyBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCByZWNlaXZlZCBhIGBtZW1vYCBjb21wb25lbnQuIEluc3RlYWQgb2YgZm9yd2FyZFJlZihtZW1vKC4uLikpLCB1c2UgbWVtbyhmb3J3YXJkUmVmKC4uLikpLlwiXG4gICAgICAgICAgKVxuICAgICAgICA6IFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIHJlbmRlclxuICAgICAgICAgID8gY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCB3YXMgZ2l2ZW4gJXMuXCIsXG4gICAgICAgICAgICAgIG51bGwgPT09IHJlbmRlciA/IFwibnVsbFwiIDogdHlwZW9mIHJlbmRlclxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogMCAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgMiAhPT0gcmVuZGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJmb3J3YXJkUmVmIHJlbmRlciBmdW5jdGlvbnMgYWNjZXB0IGV4YWN0bHkgdHdvIHBhcmFtZXRlcnM6IHByb3BzIGFuZCByZWYuICVzXCIsXG4gICAgICAgICAgICAgIDEgPT09IHJlbmRlci5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IFwiRGlkIHlvdSBmb3JnZXQgdG8gdXNlIHRoZSByZWYgcGFyYW1ldGVyP1wiXG4gICAgICAgICAgICAgICAgOiBcIkFueSBhZGRpdGlvbmFsIHBhcmFtZXRlciB3aWxsIGJlIHVuZGVmaW5lZC5cIlxuICAgICAgICAgICAgKTtcbiAgICAgIG51bGwgIT0gcmVuZGVyICYmXG4gICAgICAgIG51bGwgIT0gcmVuZGVyLmRlZmF1bHRQcm9wcyAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiZm9yd2FyZFJlZiByZW5kZXIgZnVuY3Rpb25zIGRvIG5vdCBzdXBwb3J0IGRlZmF1bHRQcm9wcy4gRGlkIHlvdSBhY2NpZGVudGFsbHkgcGFzcyBhIFJlYWN0IGNvbXBvbmVudD9cIlxuICAgICAgICApO1xuICAgICAgdmFyIGVsZW1lbnRUeXBlID0geyAkJHR5cGVvZjogUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSwgcmVuZGVyOiByZW5kZXIgfSxcbiAgICAgICAgb3duTmFtZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50VHlwZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHJlbmRlci5uYW1lIHx8XG4gICAgICAgICAgICByZW5kZXIuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgIChPYmplY3QuZGVmaW5lUHJvcGVydHkocmVuZGVyLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgIChyZW5kZXIuZGlzcGxheU5hbWUgPSBuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlO1xuICAgIH07XG4gICAgZXhwb3J0cy5pc1ZhbGlkRWxlbWVudCA9IGlzVmFsaWRFbGVtZW50O1xuICAgIGV4cG9ydHMubGF6eSA9IGZ1bmN0aW9uIChjdG9yKSB7XG4gICAgICBjdG9yID0geyBfc3RhdHVzOiAtMSwgX3Jlc3VsdDogY3RvciB9O1xuICAgICAgdmFyIGxhenlUeXBlID0ge1xuICAgICAgICAgICQkdHlwZW9mOiBSRUFDVF9MQVpZX1RZUEUsXG4gICAgICAgICAgX3BheWxvYWQ6IGN0b3IsXG4gICAgICAgICAgX2luaXQ6IGxhenlJbml0aWFsaXplclxuICAgICAgICB9LFxuICAgICAgICBpb0luZm8gPSB7XG4gICAgICAgICAgbmFtZTogXCJsYXp5XCIsXG4gICAgICAgICAgc3RhcnQ6IC0xLFxuICAgICAgICAgIGVuZDogLTEsXG4gICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgb3duZXI6IG51bGwsXG4gICAgICAgICAgZGVidWdTdGFjazogRXJyb3IoXCJyZWFjdC1zdGFjay10b3AtZnJhbWVcIiksXG4gICAgICAgICAgZGVidWdUYXNrOiBjb25zb2xlLmNyZWF0ZVRhc2sgPyBjb25zb2xlLmNyZWF0ZVRhc2soXCJsYXp5KClcIikgOiBudWxsXG4gICAgICAgIH07XG4gICAgICBjdG9yLl9pb0luZm8gPSBpb0luZm87XG4gICAgICBsYXp5VHlwZS5fZGVidWdJbmZvID0gW3sgYXdhaXRlZDogaW9JbmZvIH1dO1xuICAgICAgcmV0dXJuIGxhenlUeXBlO1xuICAgIH07XG4gICAgZXhwb3J0cy5tZW1vID0gZnVuY3Rpb24gKHR5cGUsIGNvbXBhcmUpIHtcbiAgICAgIG51bGwgPT0gdHlwZSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwibWVtbzogVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBjb21wb25lbnQuIEluc3RlYWQgcmVjZWl2ZWQ6ICVzXCIsXG4gICAgICAgICAgbnVsbCA9PT0gdHlwZSA/IFwibnVsbFwiIDogdHlwZW9mIHR5cGVcbiAgICAgICAgKTtcbiAgICAgIGNvbXBhcmUgPSB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9NRU1PX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGNvbXBhcmU6IHZvaWQgMCA9PT0gY29tcGFyZSA/IG51bGwgOiBjb21wYXJlXG4gICAgICB9O1xuICAgICAgdmFyIG93bk5hbWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcGFyZSwgXCJkaXNwbGF5TmFtZVwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gb3duTmFtZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgIG93bk5hbWUgPSBuYW1lO1xuICAgICAgICAgIHR5cGUubmFtZSB8fFxuICAgICAgICAgICAgdHlwZS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KSxcbiAgICAgICAgICAgICh0eXBlLmRpc3BsYXlOYW1lID0gbmFtZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb21wYXJlO1xuICAgIH07XG4gICAgZXhwb3J0cy5zdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAgIHZhciBwcmV2VHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQsXG4gICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uID0ge307XG4gICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IG5ldyBTZXQoKTtcbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBjdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHNjb3BlKCksXG4gICAgICAgICAgb25TdGFydFRyYW5zaXRpb25GaW5pc2ggPSBSZWFjdFNoYXJlZEludGVybmFscy5TO1xuICAgICAgICBudWxsICE9PSBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaCAmJlxuICAgICAgICAgIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKGN1cnJlbnRUcmFuc2l0aW9uLCByZXR1cm5WYWx1ZSk7XG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZSAmJlxuICAgICAgICAgIG51bGwgIT09IHJldHVyblZhbHVlICYmXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbiAmJlxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy5hc3luY1RyYW5zaXRpb25zKyssXG4gICAgICAgICAgcmV0dXJuVmFsdWUudGhlbihyZWxlYXNlQXN5bmNUcmFuc2l0aW9uLCByZWxlYXNlQXN5bmNUcmFuc2l0aW9uKSxcbiAgICAgICAgICByZXR1cm5WYWx1ZS50aGVuKG5vb3AsIHJlcG9ydEdsb2JhbEVycm9yKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXBvcnRHbG9iYWxFcnJvcihlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBudWxsID09PSBwcmV2VHJhbnNpdGlvbiAmJlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzICYmXG4gICAgICAgICAgKChzY29wZSA9IGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLnNpemUpLFxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLmNsZWFyKCksXG4gICAgICAgICAgMTAgPCBzY29wZSAmJlxuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBcIkRldGVjdGVkIGEgbGFyZ2UgbnVtYmVyIG9mIHVwZGF0ZXMgaW5zaWRlIHN0YXJ0VHJhbnNpdGlvbi4gSWYgdGhpcyBpcyBkdWUgdG8gYSBzdWJzY3JpcHRpb24gcGxlYXNlIHJlLXdyaXRlIGl0IHRvIHVzZSBSZWFjdCBwcm92aWRlZCBob29rcy4gT3RoZXJ3aXNlIGNvbmN1cnJlbnQgbW9kZSBndWFyYW50ZWVzIGFyZSBvZmYgdGhlIHRhYmxlLlwiXG4gICAgICAgICAgICApKSxcbiAgICAgICAgICBudWxsICE9PSBwcmV2VHJhbnNpdGlvbiAmJlxuICAgICAgICAgICAgbnVsbCAhPT0gY3VycmVudFRyYW5zaXRpb24udHlwZXMgJiZcbiAgICAgICAgICAgIChudWxsICE9PSBwcmV2VHJhbnNpdGlvbi50eXBlcyAmJlxuICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbi50eXBlcyAhPT0gY3VycmVudFRyYW5zaXRpb24udHlwZXMgJiZcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICBcIldlIGV4cGVjdGVkIGlubmVyIFRyYW5zaXRpb25zIHRvIGhhdmUgdHJhbnNmZXJyZWQgdGhlIG91dGVyIHR5cGVzIHNldCBhbmQgdGhhdCB5b3UgY2Fubm90IGFkZCB0byB0aGUgb3V0ZXIgVHJhbnNpdGlvbiB3aGlsZSBpbnNpZGUgdGhlIGlubmVyLlRoaXMgaXMgYSBidWcgaW4gUmVhY3QuXCJcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIChwcmV2VHJhbnNpdGlvbi50eXBlcyA9IGN1cnJlbnRUcmFuc2l0aW9uLnR5cGVzKSksXG4gICAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2VHJhbnNpdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLnVuc3RhYmxlX3VzZUNhY2hlUmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUNhY2hlUmVmcmVzaCgpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2UgPSBmdW5jdGlvbiAodXNhYmxlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2UodXNhYmxlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlQWN0aW9uU3RhdGUgPSBmdW5jdGlvbiAoYWN0aW9uLCBpbml0aWFsU3RhdGUsIHBlcm1hbGluaykge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQWN0aW9uU3RhdGUoXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBwZXJtYWxpbmtcbiAgICAgICk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUNvbnRleHQgPSBmdW5jdGlvbiAoQ29udGV4dCkge1xuICAgICAgdmFyIGRpc3BhdGNoZXIgPSByZXNvbHZlRGlzcGF0Y2hlcigpO1xuICAgICAgQ29udGV4dC4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OU1VNRVJfVFlQRSAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQ2FsbGluZyB1c2VDb250ZXh0KENvbnRleHQuQ29uc3VtZXIpIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIHdpbGwgY2F1c2UgYnVncy4gRGlkIHlvdSBtZWFuIHRvIGNhbGwgdXNlQ29udGV4dChDb250ZXh0KSBpbnN0ZWFkP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hlci51c2VDb250ZXh0KENvbnRleHQpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWJ1Z1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXR0ZXJGbikge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlRGVidWdWYWx1ZSh2YWx1ZSwgZm9ybWF0dGVyRm4pO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VEZWZlcnJlZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBpbml0aWFsVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZURlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZUVmZmVjdCA9IGZ1bmN0aW9uIChjcmVhdGUsIGRlcHMpIHtcbiAgICAgIG51bGwgPT0gY3JlYXRlICYmXG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIlJlYWN0IEhvb2sgdXNlRWZmZWN0IHJlcXVpcmVzIGFuIGVmZmVjdCBjYWxsYmFjay4gRGlkIHlvdSBmb3JnZXQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIHRoZSBob29rP1wiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VFZmZlY3QoY3JlYXRlLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlRWZmZWN0RXZlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUVmZmVjdEV2ZW50KGNhbGxiYWNrKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJZCgpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VJbXBlcmF0aXZlSGFuZGxlID0gZnVuY3Rpb24gKHJlZiwgY3JlYXRlLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgY3JlYXRlLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSW5zZXJ0aW9uRWZmZWN0ID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VJbnNlcnRpb25FZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUluc2VydGlvbkVmZmVjdChjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VMYXlvdXRFZmZlY3QgPSBmdW5jdGlvbiAoY3JlYXRlLCBkZXBzKSB7XG4gICAgICBudWxsID09IGNyZWF0ZSAmJlxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJSZWFjdCBIb29rIHVzZUxheW91dEVmZmVjdCByZXF1aXJlcyBhbiBlZmZlY3QgY2FsbGJhY2suIERpZCB5b3UgZm9yZ2V0IHRvIHBhc3MgYSBjYWxsYmFjayB0byB0aGUgaG9vaz9cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlTGF5b3V0RWZmZWN0KGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZU1lbW8gPSBmdW5jdGlvbiAoY3JlYXRlLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vKGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZU9wdGltaXN0aWMgPSBmdW5jdGlvbiAocGFzc3Rocm91Z2gsIHJlZHVjZXIpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZU9wdGltaXN0aWMocGFzc3Rocm91Z2gsIHJlZHVjZXIpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VSZWR1Y2VyID0gZnVuY3Rpb24gKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVJlZHVjZXIocmVkdWNlciwgaW5pdGlhbEFyZywgaW5pdCk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZVJlZiA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVJlZihpbml0aWFsVmFsdWUpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VTdGF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVN0YXRlKGluaXRpYWxTdGF0ZSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZVN5bmNFeHRlcm5hbFN0b3JlID0gZnVuY3Rpb24gKFxuICAgICAgc3Vic2NyaWJlLFxuICAgICAgZ2V0U25hcHNob3QsXG4gICAgICBnZXRTZXJ2ZXJTbmFwc2hvdFxuICAgICkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICAgICAgZ2V0U25hcHNob3QsXG4gICAgICAgIGdldFNlcnZlclNuYXBzaG90XG4gICAgICApO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlVHJhbnNpdGlvbigpO1xuICAgIH07XG4gICAgZXhwb3J0cy52ZXJzaW9uID0gXCIxOS4yLjBcIjtcbiAgICBcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICYmXG4gICAgICBcImZ1bmN0aW9uXCIgPT09XG4gICAgICAgIHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AgJiZcbiAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcChFcnJvcigpKTtcbiAgfSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC5wcm9kdWN0aW9uLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LmRldmVsb3BtZW50LmpzJyk7XG59XG4iLCJ2YXIgU01BTExfV09SRFMgPSAvXFxiKD86YW4/ZD98YVtzdF18YmVjYXVzZXxidXR8Ynl8ZW58Zm9yfGlbZm5dfG5laXRoZXJ8bm9yfG9bZm5yXXxvbmx5fG92ZXJ8cGVyfHNvfHNvbWV8dGhhW3RuXXx0aGV8dG98dXB8dXBvbnx2cz9cXC4/fHZlcnN1c3x2aWF8d2hlbnx3aXRofHdpdGhvdXR8eWV0KVxcYi9pO1xudmFyIFRPS0VOUyA9IC9bXlxcczrigJPigJQtXSt8Li9nO1xudmFyIFdISVRFU1BBQ0UgPSAvXFxzLztcbnZhciBJU19NQU5VQUxfQ0FTRSA9IC8uKD89W0EtWl18XFwuLikvO1xudmFyIEFMUEhBTlVNRVJJQ19QQVRURVJOID0gL1tBLVphLXowLTlcXHUwMEMwLVxcdTAwRkZdLztcbmV4cG9ydCBmdW5jdGlvbiB0aXRsZUNhc2UoaW5wdXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICB2YXIgbTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB3aGlsZSAoKG0gPSBUT0tFTlMuZXhlYyhpbnB1dCkpICE9PSBudWxsKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IG1bMF0sIGluZGV4ID0gbS5pbmRleDtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBJZ25vcmUgYWxyZWFkeSBjYXBpdGFsaXplZCB3b3Jkcy5cbiAgICAgICAgIUlTX01BTlVBTF9DQVNFLnRlc3QodG9rZW4pICYmXG4gICAgICAgICAgICAvLyBJZ25vcmUgc21hbGwgd29yZHMgZXhjZXB0IGF0IGJlZ2lubmluZyBvciBlbmQuXG4gICAgICAgICAgICAoIVNNQUxMX1dPUkRTLnRlc3QodG9rZW4pIHx8XG4gICAgICAgICAgICAgICAgaW5kZXggPT09IDAgfHxcbiAgICAgICAgICAgICAgICBpbmRleCArIHRva2VuLmxlbmd0aCA9PT0gaW5wdXQubGVuZ3RoKSAmJlxuICAgICAgICAgICAgLy8gSWdub3JlIFVSTHMuXG4gICAgICAgICAgICAoaW5wdXQuY2hhckF0KGluZGV4ICsgdG9rZW4ubGVuZ3RoKSAhPT0gXCI6XCIgfHxcbiAgICAgICAgICAgICAgICBXSElURVNQQUNFLnRlc3QoaW5wdXQuY2hhckF0KGluZGV4ICsgdG9rZW4ubGVuZ3RoICsgMSkpKSkge1xuICAgICAgICAgICAgLy8gRmluZCBhbmQgdXBwZXJjYXNlIGZpcnN0IHdvcmQgY2hhcmFjdGVyLCBza2lwcyBvdmVyICptb2RpZmllcnMqLlxuICAgICAgICAgICAgcmVzdWx0ICs9IHRva2VuLnJlcGxhY2UoQUxQSEFOVU1FUklDX1BBVFRFUk4sIGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLnRvVXBwZXJDYXNlKCk7IH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLyoqXG4gKiBUaGlzIGZpbGUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZnJvbSBgcHJlLXB1Ymxpc2guanNgLlxuICogRG8gbm90IG1hbnVhbGx5IGVkaXQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwiYXJlYVwiOiB0cnVlLFxuICBcImJhc2VcIjogdHJ1ZSxcbiAgXCJiclwiOiB0cnVlLFxuICBcImNvbFwiOiB0cnVlLFxuICBcImVtYmVkXCI6IHRydWUsXG4gIFwiaHJcIjogdHJ1ZSxcbiAgXCJpbWdcIjogdHJ1ZSxcbiAgXCJpbnB1dFwiOiB0cnVlLFxuICBcImxpbmtcIjogdHJ1ZSxcbiAgXCJtZXRhXCI6IHRydWUsXG4gIFwicGFyYW1cIjogdHJ1ZSxcbiAgXCJzb3VyY2VcIjogdHJ1ZSxcbiAgXCJ0cmFja1wiOiB0cnVlLFxuICBcIndiclwiOiB0cnVlXG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiaW1wb3J0IHR5cGUgT3BlbkZpbiBmcm9tIFwiQG9wZW5maW4vY29yZVwiO1xuaW1wb3J0IHtcblx0QnJvd3NlckJ1dHRvblR5cGUsXG5cdFBhbmVsUG9zaXRpb24sXG5cdGdldEN1cnJlbnRTeW5jLFxuXHR0eXBlIEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0LFxuXHR0eXBlIEJyb3dzZXJXaW5kb3dNb2R1bGUsXG5cdHR5cGUgUGFnZSxcblx0dHlwZSBQYWdlTGF5b3V0LFxuXHR0eXBlIFBhZ2VMYXlvdXREZXRhaWxzLFxuXHR0eXBlIFBhZ2VXaXRoVXBkYXRhYmxlUnVudGltZUF0dHJpYnMsXG5cdHR5cGUgVG9vbGJhck9wdGlvbnNcbn0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybVwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XG5cdC8vIGNyZWF0ZSBicm93c2VyIHdpbmRvdyB3aXRoIHZpZXdcblx0Y29uc3QgY3JlYXRlQnJvd3NlcldpbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGF1bmNoLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAoY3JlYXRlQnJvd3NlcldpbkJ0bikge1xuXHRcdGNyZWF0ZUJyb3dzZXJXaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IGNyZWF0ZUJyb3dzZXJXaW5kb3coKSk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBubyBzYXZlIHJlcXVpcmVtZW50XG5cdGNvbnN0IGNyZWF0ZUJyb3dzZXJXaW5Ob1NhdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1icm93c2VyLXdpbmRvdy1uby1zYXZlXCIpO1xuXHRpZiAoY3JlYXRlQnJvd3Nlcldpbk5vU2F2ZUJ0bikge1xuXHRcdGNyZWF0ZUJyb3dzZXJXaW5Ob1NhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZUJyb3dzZXJXaW5kb3dXaXRob3V0UmVxdWlyaW5nU2F2ZSk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgbWF4aW1pemVkXG5cdGNvbnN0IGNyZWF0ZUJyb3dzZXJNYXhpbWl6ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1icm93c2VyLXdpbmRvdy1tYXhpbWl6ZWRcIik7XG5cdGlmIChjcmVhdGVCcm93c2VyTWF4aW1pemVkKSB7XG5cdFx0Y3JlYXRlQnJvd3Nlck1heGltaXplZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlQnJvd3NlcldpbmRvd01heGltaXplZCk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBjdXN0b20gc2F2ZSBwYWdlIGJ1dHRvblxuXHRjb25zdCBjdXN0b21Ub29sYmFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtYnJvd3Nlci13aW5kb3ctd2l0aC1jdXN0b20tYnRuXCIpO1xuXHRpZiAoY3VzdG9tVG9vbGJhckJ0bikge1xuXHRcdGN1c3RvbVRvb2xiYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZUN1c3RvbVRvb2xiYXJXaW5kb3cpO1xuXHR9XG5cblx0Ly8gY3JlYXRlIGJyb3dzZXIgd2luZG93IHdpdGggc2luZ2xlIHBhZ2UgYW5kIG5vIHRhYlxuXHRjb25zdCBzaW5nbGVQYWdlQnJvd3Nlcldpbk5vVGFiQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtbm9wYWdldGFiLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAoc2luZ2xlUGFnZUJyb3dzZXJXaW5Ob1RhYkJ0bikge1xuXHRcdHNpbmdsZVBhZ2VCcm93c2VyV2luTm9UYWJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZVNpbmdsZVBhZ2VOb1RhYldpbmRvdyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBtdWx0aXBsZSBwYWdlc1xuXHRjb25zdCBtdWx0aVBhZ2VCcm93c2VyV2luQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtbXVsdGlwYWdlLWJyb3dzZXItd2luZG93XCIpO1xuXHRpZiAobXVsdGlQYWdlQnJvd3NlcldpbkJ0bikge1xuXHRcdG11bHRpUGFnZUJyb3dzZXJXaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZU11bHRpUGFnZVdpbmRvdyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgYnJvd3NlciB3aW5kb3cgd2l0aCBmaXhlZCB2aWV3c1xuXHRjb25zdCBmaXhlZFZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXVuY2gtZml4ZWQtdmlld3NcIik7XG5cdGlmIChmaXhlZFZpZXdzKSB7XG5cdFx0Zml4ZWRWaWV3cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlV2luZG93V2l0aEZpeGVkVmlld3MpO1xuXHR9XG5cblx0Ly8gZ2V0IGFsbCBicm93c2VyIHBhZ2VzXG5cdGNvbnN0IGdldEJyb3dzZXJQYWdlc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2V0LWJyb3dzZXItcGFnZXNcIik7XG5cdGlmIChnZXRCcm93c2VyUGFnZXNCdG4pIHtcblx0XHRnZXRCcm93c2VyUGFnZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IChmaW4ubWUgYXMgT3BlbkZpbi5XaW5kb3cpLnNob3dEZXZlbG9wZXJUb29scygpO1xuXHRcdFx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRcdFx0Y29uc3QgbGFzdEZvY3VzZWRXaW5kb3cgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmdldExhc3RGb2N1c2VkV2luZG93KCk7XG5cdFx0XHRpZiAobGFzdEZvY3VzZWRXaW5kb3cpIHtcblx0XHRcdFx0Y29uc3QgcGFnZXMgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmdldEFsbEF0dGFjaGVkUGFnZXMoKTtcblx0XHRcdFx0Y29uc3QgbGFzdEZvY3VzZWRXaW5kb3dJZGVudGl0eSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuZ2V0TGFzdEZvY3VzZWRXaW5kb3coKTtcblx0XHRcdFx0aWYgKGxhc3RGb2N1c2VkV2luZG93SWRlbnRpdHkpIHtcblx0XHRcdFx0XHRjb25zdCB7IHV1aWQsIG5hbWUgfSA9IGxhc3RGb2N1c2VkV2luZG93SWRlbnRpdHk7XG5cdFx0XHRcdFx0Y29uc3Qgd3JhcHBlZEJyb3dzZXJXaW5kb3cgPSBwbGF0Zm9ybS5Ccm93c2VyLndyYXBTeW5jKHsgdXVpZCwgbmFtZSB9KTtcblx0XHRcdFx0XHRjb25zdCBsYXN0QnJvd3NlcldpbmRvd1BhZ2VzID0gYXdhaXQgd3JhcHBlZEJyb3dzZXJXaW5kb3cuZ2V0UGFnZXMoKTtcblx0XHRcdFx0XHRjb25zdCB1bnNhdmVkUGFnZXMgPSBsYXN0QnJvd3NlcldpbmRvd1BhZ2VzLmZpbHRlcigocGFnZSkgPT4gcGFnZS5oYXNVbnNhdmVkQ2hhbmdlcyk7XG5cdFx0XHRcdFx0Y29uc29sZS5kaXIoeyBtZXNzYWdlOiBcIkFsbCBQQUdFU1wiLCBwYWdlcyB9KTtcblx0XHRcdFx0XHRjb25zb2xlLmRpcih7IG1lc3NhZ2U6IFwiVU5TQVZFRCBQQUdFU1wiLCB1bnNhdmVkUGFnZXMgfSk7XG5cdFx0XHRcdFx0Y29uc29sZS5kaXIoeyBtZXNzYWdlOiBcIkxBU1QgRk9DVVNFRCBXSU5ET1dcIiwgd3JhcHBlZEJyb3dzZXJXaW5kb3cgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIENyZWF0ZSBicm93c2VyIHdpbmRvdyB3aXRoIGZpeGVkIHZpZXdzXG5cdGNvbnN0IHNpbmdsZUxvY2tlZFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xhdW5jaC1zaW5nbGUtbG9ja2VkLXBhZ2VcIik7XG5cdGlmIChzaW5nbGVMb2NrZWRQYWdlKSB7XG5cdFx0c2luZ2xlTG9ja2VkUGFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY3JlYXRlV2luZG93V2l0aExvY2tlZFBhZ2UpO1xuXHR9XG5cblx0Ly8gcXVpdCBsYXVuY2hlciAvIGJyb3dzZXJcblx0Y29uc3QgcXVpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcXVpdFwiKTtcblx0aWYgKHF1aXRCdG4pIHtcblx0XHRxdWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdFx0XHRhd2FpdCBwbGF0Zm9ybS5xdWl0KCk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhIGJyb3dzZXIgd2luZG93LlxuICogQHBhcmFtIGhhc1Vuc2F2ZWRDaGFuZ2VzIERldGVybWluZXMgaWYgdGhlIHdpbmRvdyBoYXMgdW5zYXZlZCBjaGFuZ2VkLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVCcm93c2VyV2luZG93KGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZSk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXG5cdFx0XCJVbnRpdGxlZCBQYWdlXCIsXG5cdFx0Y3JlYXRlRGVmYXVsdFBhZ2VMYXlvdXQoKSxcblx0XHRoYXNVbnNhdmVkQ2hhbmdlc1xuXHQpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzIH1cblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBicm93c2VyIHdpbmRvdyB3aGljaCBoYXMgY2hhbmdlcyBzbyByZXF1aXJlZCBzYXZpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQnJvd3NlcldpbmRvd1dpdGhvdXRSZXF1aXJpbmdTYXZlKCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRyZXR1cm4gY3JlYXRlQnJvd3NlcldpbmRvdyhmYWxzZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgYnJvd3NlciB3aW5kb3cgaW4gaXRzIG1heGltaXplZCBzdGF0ZS5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVCcm93c2VyV2luZG93TWF4aW1pemVkKCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzIH0sXG5cdFx0c3RhdGU6IFwibWF4aW1pemVkXCJcblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBicm93c2VyIHdpbmRvdyB3aGljaCBoYXMgYSBzaW5nbGUgcGFnZSBhbmQgaGlkZGVuIHRhYnMuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2luZ2xlUGFnZU5vVGFiV2luZG93KCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2VdO1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzLCBkaXNhYmxlTXVsdGlwbGVQYWdlczogdHJ1ZSB9LFxuXHRcdGV4cGVyaW1lbnRhbDoge1xuXHRcdFx0c2hvd0Zhdmljb25zOiBmYWxzZVxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGNvbnN0IGNyZWF0ZWRCcm93c2VyV2luOiBCcm93c2VyV2luZG93TW9kdWxlID0gYXdhaXQgcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3cob3B0aW9ucyk7XG5cdHJldHVybiBjcmVhdGVkQnJvd3Nlcldpbjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSB3aW5kb3cgd2hpY2ggaGFzIGEgY3VzdG9tIHRvb2xiYXIuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tVG9vbGJhcldpbmRvdygpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZXM6IFBhZ2VbXSA9IFtwYWdlXTtcblx0Y29uc3QgdG9vbGJhck9wdGlvbnM6IFRvb2xiYXJPcHRpb25zID0ge1xuXHRcdGJ1dHRvbnM6IFtcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuQ3VzdG9tLFxuXHRcdFx0XHR0b29sdGlwOiBcIlNhdmUgQ3VycmVudCBQYWdlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cHM6Ly93d3cub3BlbmZpbi5jby9mYXZpY29uLmljb1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJjdXN0b20tc2F2ZS1wYWdlXCIsXG5cdFx0XHRcdFx0Y3VzdG9tRGF0YToge1xuXHRcdFx0XHRcdFx0cGFnZUlkOiBwYWdlLnBhZ2VJZCxcblx0XHRcdFx0XHRcdGxheW91dDogcGFnZS5sYXlvdXRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJSZW5hbWUgQ3VycmVudCBQYWdlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cHM6Ly93d3cub3BlbmZpbi5jby9mYXZpY29uLmljb1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJyZW5hbWUtY3VycmVudC1wYWdlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuQ3VzdG9tLFxuXHRcdFx0XHR0b29sdGlwOiBcIkFubm91bmNlXCIsXG5cdFx0XHRcdGljb25Vcmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2ljb25zL2Fubm91bmNlLnN2Z1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJhbm5vdW5jZVwiXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJQcmludFwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pY29ucy9wcmludC5zdmdcIixcblx0XHRcdFx0YWN0aW9uOiB7XG5cdFx0XHRcdFx0aWQ6IFwiY3VzdG9tLXByaW50XCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuU2hvd0hpZGVUYWJzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5Db2xvckxpbmtpbmdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlByZXNldExheW91dHNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkxvY2tVbmxvY2tQYWdlXG5cdFx0XHR9XG5cdFx0XVxuXHR9O1xuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcywgdG9vbGJhck9wdGlvbnMgfVxuXHR9O1xuXG5cdGNvbnN0IHBsYXRmb3JtID0gZ2V0Q3VycmVudFN5bmMoKTtcblx0Y29uc3QgY3JlYXRlZEJyb3dzZXJXaW46IEJyb3dzZXJXaW5kb3dNb2R1bGUgPSBhd2FpdCBwbGF0Zm9ybS5Ccm93c2VyLmNyZWF0ZVdpbmRvdyhvcHRpb25zKTtcblx0cmV0dXJuIGNyZWF0ZWRCcm93c2VyV2luO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHdpbmRvdyB3aGljaCBoYXMgbXVsdGlwbGUgcGFnZXMuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBicm93c2VyIHdpbmRvdy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTXVsdGlQYWdlV2luZG93KCk6IFByb21pc2U8QnJvd3NlcldpbmRvd01vZHVsZT4ge1xuXHRjb25zdCBwYWdlOiBQYWdlID0gYXdhaXQgY3JlYXRlUGFnZVdpdGhMYXlvdXQoXCJVbnRpdGxlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBwYWdlMTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTI6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIlVudGl0bGVkIFBhZ2VcIiwgY3JlYXRlRGVmYXVsdFBhZ2VMYXlvdXQoKSk7XG5cdGNvbnN0IHBhZ2VzOiBQYWdlW10gPSBbcGFnZSwgcGFnZTEsIHBhZ2UyXTtcblxuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgd2luZG93IHdpdGggYSBsb2NrZWQgcGFnZS5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXaW5kb3dXaXRoTG9ja2VkUGFnZSgpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTE6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIkxvY2tlZCBQYWdlXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXHRjb25zdCBsb2NrUGFnZTE6IFBhZ2UgPSB7IGlzTG9ja2VkOiB0cnVlLCAuLi5wYWdlMSB9O1xuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2UsIGxvY2tQYWdlMV07XG5cdGNvbnN0IHRvb2xiYXJPcHRpb25zOiBUb29sYmFyT3B0aW9ucyA9IHtcblx0XHRidXR0b25zOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLkN1c3RvbSxcblx0XHRcdFx0dG9vbHRpcDogXCJTYXZlIEN1cnJlbnQgUGFnZVwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHBzOi8vd3d3Lm9wZW5maW4uY28vZmF2aWNvbi5pY29cIixcblx0XHRcdFx0YWN0aW9uOiB7XG5cdFx0XHRcdFx0aWQ6IFwiY3VzdG9tLXNhdmUtcGFnZVwiLFxuXHRcdFx0XHRcdGN1c3RvbURhdGE6IHtcblx0XHRcdFx0XHRcdHBhZ2VJZDogcGFnZS5wYWdlSWQsXG5cdFx0XHRcdFx0XHRsYXlvdXQ6IHBhZ2UubGF5b3V0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5DdXN0b20sXG5cdFx0XHRcdHRvb2x0aXA6IFwiTWFudWFsIExvY2sgUGFnZVwiLFxuXHRcdFx0XHRpY29uVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pY29ucy9sb2NrLnN2Z1wiLFxuXHRcdFx0XHRhY3Rpb246IHtcblx0XHRcdFx0XHRpZDogXCJsb2NrLXBhZ2UtdG9nZ2xlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogQnJvd3NlckJ1dHRvblR5cGUuU2hvd0hpZGVUYWJzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiBCcm93c2VyQnV0dG9uVHlwZS5Db2xvckxpbmtpbmdcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlByZXNldExheW91dHNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IEJyb3dzZXJCdXR0b25UeXBlLlNhdmVQYWdlXG5cdFx0XHR9XG5cdFx0XVxuXHR9O1xuXG5cdGNvbnN0IG9wdGlvbnM6IEJyb3dzZXJDcmVhdGVXaW5kb3dSZXF1ZXN0ID0ge1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7IHBhZ2VzLCB0b29sYmFyT3B0aW9ucyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgd2luZG93IHdoaWNoIGhhcyBmaXhlZCB2aWV3cy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGJyb3dzZXIgd2luZG93LlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXaW5kb3dXaXRoRml4ZWRWaWV3cygpOiBQcm9taXNlPEJyb3dzZXJXaW5kb3dNb2R1bGU+IHtcblx0Y29uc3QgcGFnZTogUGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFwiVW50aXRsZWQgUGFnZVwiLCBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpKTtcblx0Y29uc3QgcGFnZTI6IFBhZ2UgPSBhd2FpdCBjcmVhdGVQYWdlV2l0aExheW91dChcIlVudGl0bGVkIFBhZ2UgKDIpXCIsIGNyZWF0ZURlZmF1bHRQYWdlTGF5b3V0KCkpO1xuXG5cdHBhZ2UucGFuZWxzID0gW1xuXHRcdHtcblx0XHRcdHBvc2l0aW9uOiBQYW5lbFBvc2l0aW9uLlRvcCxcblx0XHRcdGhlaWdodDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvdG9wLXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cG9zaXRpb246IFBhbmVsUG9zaXRpb24uTGVmdCxcblx0XHRcdHdpZHRoOiBcIjUwcHhcIixcblx0XHRcdHZpZXdPcHRpb25zOiB7XG5cdFx0XHRcdHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODAvaHRtbC9sZWZ0LXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cG9zaXRpb246IFBhbmVsUG9zaXRpb24uUmlnaHQsXG5cdFx0XHR3aWR0aDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvcmlnaHQtcGFuZWwuaHRtbFwiXG5cdFx0XHR9XG5cdFx0fSxcblx0XHR7XG5cdFx0XHRwb3NpdGlvbjogUGFuZWxQb3NpdGlvbi5Cb3R0b20sXG5cdFx0XHRoZWlnaHQ6IFwiNTBweFwiLFxuXHRcdFx0dmlld09wdGlvbnM6IHtcblx0XHRcdFx0dXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9odG1sL2JvdHRvbS1wYW5lbC5odG1sXCJcblx0XHRcdH1cblx0XHR9XG5cdF07XG5cblx0cGFnZTIucGFuZWxzID0gW1xuXHRcdHtcblx0XHRcdHBvc2l0aW9uOiBQYW5lbFBvc2l0aW9uLlRvcCxcblx0XHRcdGhlaWdodDogXCI1MHB4XCIsXG5cdFx0XHR2aWV3T3B0aW9uczoge1xuXHRcdFx0XHR1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2h0bWwvdG9wLXBhbmVsLmh0bWxcIlxuXHRcdFx0fVxuXHRcdH1cblx0XTtcblxuXHRjb25zdCBwYWdlczogUGFnZVtdID0gW3BhZ2UsIHBhZ2UyXTtcblxuXHRjb25zdCBvcHRpb25zOiBCcm93c2VyQ3JlYXRlV2luZG93UmVxdWVzdCA9IHtcblx0XHR3b3Jrc3BhY2VQbGF0Zm9ybTogeyBwYWdlcyB9XG5cdH07XG5cblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRjb25zdCBjcmVhdGVkQnJvd3NlcldpbjogQnJvd3NlcldpbmRvd01vZHVsZSA9IGF3YWl0IHBsYXRmb3JtLkJyb3dzZXIuY3JlYXRlV2luZG93KG9wdGlvbnMpO1xuXHRyZXR1cm4gY3JlYXRlZEJyb3dzZXJXaW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcGFnZSB3aXRoIGEgc3BlY2lmaWMgbGF5b3V0LlxuICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgcGFnZS5cbiAqIEBwYXJhbSBsYXlvdXQgVGhlIGxheW91dCBmb3IgdGhlIHBhZ2UuXG4gKiBAcGFyYW0gaGFzVW5zYXZlZENoYW5nZXMgRmxhZyB0byBkZXRlcm1pbmUgaWYgaXQgaGFzIHVuc2F2ZWQgY2hhbmdlZC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHBhZ2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBhZ2VXaXRoTGF5b3V0KFxuXHR0aXRsZTogc3RyaW5nLFxuXHRsYXlvdXQ6IFBhZ2VMYXlvdXQsXG5cdGhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZVxuKTogUHJvbWlzZTxQYWdlV2l0aFVwZGF0YWJsZVJ1bnRpbWVBdHRyaWJzPiB7XG5cdHJldHVybiB7XG5cdFx0cGFnZUlkOiByYW5kb21VVUlEKCksXG5cdFx0dGl0bGUsXG5cdFx0bGF5b3V0OiB7XG5cdFx0XHQuLi5sYXlvdXQsXG5cdFx0XHRsYXlvdXREZXRhaWxzOiB7IGxheW91dElkOiBgbGF5b3V0LSR7cmFuZG9tVVVJRCgpfWAgfSBhcyB1bmtub3duIGFzIFBhZ2VMYXlvdXREZXRhaWxzXG5cdFx0fSxcblx0XHRpc1JlYWRPbmx5OiBmYWxzZSxcblx0XHRoYXNVbnNhdmVkQ2hhbmdlc1xuXHR9O1xufVxuXG4vKipcbiAqIENyZWF0ZSB0aGUgZGVmYXVsdCBwYWdlIGxheW91dC5cbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHBhZ2UgbGF5b3V0LlxuICovXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UGFnZUxheW91dCgpOiBQYWdlTGF5b3V0IHtcblx0cmV0dXJuIHtcblx0XHRjb250ZW50OiBbXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IFwic3RhY2tcIixcblx0XHRcdFx0Y29udGVudDogW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiY29tcG9uZW50XCIsXG5cdFx0XHRcdFx0XHRjb21wb25lbnROYW1lOiBcInZpZXdcIixcblx0XHRcdFx0XHRcdGNvbXBvbmVudFN0YXRlOiB7XG5cdFx0XHRcdFx0XHRcdHV1aWQ6IGZpbi5tZS51dWlkLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBgJHtyYW5kb21VVUlEKCl9LXYxYCxcblx0XHRcdFx0XHRcdFx0dXJsOiBcImh0dHBzOi8vZXhhbXBsZXMuY29tXCJcblx0XHRcdFx0XHRcdH0gYXMgUGFydGlhbDxPcGVuRmluLlZpZXdPcHRpb25zPlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dHlwZTogXCJjb21wb25lbnRcIixcblx0XHRcdFx0XHRcdGNvbXBvbmVudE5hbWU6IFwidmlld1wiLFxuXHRcdFx0XHRcdFx0Y29tcG9uZW50U3RhdGU6IHtcblx0XHRcdFx0XHRcdFx0dXVpZDogZmluLm1lLnV1aWQsXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGAke3JhbmRvbVVVSUQoKX0tdjJgLFxuXHRcdFx0XHRcdFx0XHR1cmw6IFwiaHR0cHM6Ly9vcGVuZmluLmNvXCJcblx0XHRcdFx0XHRcdH0gYXMgUGFydGlhbDxPcGVuRmluLlZpZXdPcHRpb25zPlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XVxuXHRcdFx0fVxuXHRcdF1cblx0fTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbHMgcmFuZG9tVVVJRCBpZiBydW5uaW5nIGluIGEgbm9uLXNlY3VyZSBjb250ZXh0LlxuICogQHJldHVybnMgVGhlIHJhbmRvbSBVVUlELlxuICovXG5mdW5jdGlvbiByYW5kb21VVUlEKCk6IHN0cmluZyB7XG5cdGlmIChcInJhbmRvbVVVSURcIiBpbiB3aW5kb3cuY3J5cHRvKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdFx0cmV0dXJuIHdpbmRvdy5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuXHR9XG5cdC8vIFBvbHlmaWxsIHRoZSB3aW5kb3cuY3J5cHRvLnJhbmRvbVVVSUQgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gYSBub24gc2VjdXJlIGNvbnRleHQgdGhhdCBkb2Vzbid0IGhhdmUgaXRcblx0Ly8gd2UgYXJlIHN0aWxsIHVzaW5nIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIHdoaWNoIGlzIGFsd2F5cyBhdmFpbGFibGVcblx0Ly8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjMvMjgwMDIxOFxuXHQvKipcblx0ICogR2V0IHJhbmRvbSBoZXggdmFsdWUuXG5cdCAqIEBwYXJhbSBjIFRoZSBudW1iZXIgdG8gYmFzZSB0aGUgcmFuZG9tIHZhbHVlIG9uLlxuXHQgKiBAcmV0dXJucyBUaGUgcmFuZG9tIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmFuZG9tSGV4KGM6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0XHRjb25zdCBybmQgPSB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAoMTUgPj4gKE51bWJlcihjKSAvIDQpKTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0XHRcdChOdW1iZXIoYykgXiBybmQpLnRvU3RyaW5nKDE2KVxuXHRcdCk7XG5cdH1cblx0cmV0dXJuIFwiMTAwMDAwMDAtMTAwMC00MDAwLTgwMDAtMTAwMDAwMDAwMDAwXCIucmVwbGFjZSgvWzAxOF0vZywgZ2V0UmFuZG9tSGV4KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==