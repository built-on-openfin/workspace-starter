var t,e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},o={};function n(t){return null==t}async function i(t){const e=await fin.System.getMonitorInfo(),o=t.x,i=t.y;if(!n(o)&&!n(i))for(const t of e.nonPrimaryMonitors)if(a({x:o,y:i},t.monitorRect))return t;return e.primaryMonitor}function a(t,e){return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom}async function r(t,e){if(!0===t?.disableWindowPositioningStrategy)return;let o;if(n(e))o=(await fin.System.getMonitorInfo()).primaryMonitor;else if(!n(e)&&"monitorRect"in e)o=e;else if(!n(e)&&"x"in e)o=await i(e);else{const t=await async function(t){let e,o;try{const e=fin.View.wrapSync(t);o=await e.getCurrentWindow()}catch{}if(n(e))try{const n=o??fin.Window.wrapSync(t);e=await n.getBounds()}catch{}if(n(e))try{e=await fin.me.getBounds()}catch{}return e}(e);o=n(t)?(await fin.System.getMonitorInfo()).primaryMonitor:await i({x:t.left,y:t.top})}const a=t?.defaults?.left??0,r=t?.defaults?.top??0,s=o.availableRect.left,l=o.availableRect.top,p=t?.windowPositioningStrategy?.x??30,c=t?.windowPositioningStrategy?.y??30,u=t?.windowPositioningStrategy?.maxIncrements??8,f=await async function(){const t=fin.Platform.getCurrentSync(),e=await t.Application.getChildWindows(),o=[];for(const t of e)try{await t.isShowing()&&o.push(t)}catch{}return o}(),y=await Promise.all(f.map((async t=>{try{const e=await t.getBounds();return{left:e.left,top:e.top,right:e.left+p,bottom:e.top+c}}catch{return{left:0,top:0,right:0,bottom:0}}})));let h=1e3,g=u;for(let t=0;t<u;t++){const e=a+t*p,o=r+t*c,n=y.filter((t=>t.left>=e+s&&t.right<=e+p+s&&t.top>=o+l&&t.bottom<=o+c+l));n.length<h&&(h=n.length,g=t)}return{left:a+g*p+s,top:r+g*c+l}}e.d(o,{k:()=>s}),function(t){t.CustomButton="CustomButton",t.StoreCustomButton="StoreCustomButton",t.CustomDropdownItem="CustomDropdownItem",t.GlobalContextMenu="GlobalContextMenu",t.ViewTabContextMenu="ViewTabContextMenu",t.PageTabContextMenu="PageTabContextMenu",t.SaveButtonContextMenu="SaveButtonContextMenu",t.API="API"}(t||(t={}));const s={actions:new class{async initialize(t,e,o){this._logger=e("FavoritesMenuProvider"),this._helpers=o,this._settings=t.data,this._logger.info("Initializing")}async get(e){const o={};return o["favorites-menu"]=async e=>{if(e.callerType===t.CustomButton&&this._helpers){const t=this._helpers?.getFavoriteClient;if(!n(t)){const o=await t();if(!n(o)){const t=o.getInfo(),i=[];if(t.enabledTypes){let e=!1;for(const n of t.enabledTypes){const t=await o.getSavedFavorites(n);if(t&&t.length>0){e&&i.push({type:"separator"}),t.sort(((t,e)=>(t.label??"").localeCompare(e.label??"")));for(const e of t)i.push({label:e.label??"",icon:e.icon,data:e});e=!0}}}const a=await this._helpers.getMenuClient(),s=this._settings?.popupMenuStyle??a.getPopupMenuStyle(),l=await a.showPopupMenu({x:e.x,y:48},e.windowIdentity,"There are no favorites",i,{popupMenuStyle:s});if(n(l))this._logger?.info("Favorites Menu Dismissed");else if(this._logger?.info("Favorites Menu Item Selected",l),"app"===l.type){if(!n(this._helpers?.launchApp)){let t;const o=await r(void 0,e.windowIdentity);n(o)||(t={bounds:o}),await(this._helpers?.launchApp(l.typeId,t))}}else"page"===l.type?n(this._helpers?.launchPage)||await(this._helpers?.launchPage(l.typeId,void 0,this._logger)):"workspace"===l.type?n(this._helpers?.launchWorkspace)||await(this._helpers?.launchWorkspace(l.typeId)):this._logger?.info(`Favorites Type ${l.type} no yet supported`,l)}}}},o}}};var l=o.k;export{l as entryPoints};
//# sourceMappingURL=favorites-menu.bundle.js.map