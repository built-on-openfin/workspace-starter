var t;function e(t){return null==t}!function(t){t.CustomButton="CustomButton",t.StoreCustomButton="StoreCustomButton",t.CustomDropdownItem="CustomDropdownItem",t.GlobalContextMenu="GlobalContextMenu",t.ViewTabContextMenu="ViewTabContextMenu",t.PageTabContextMenu="PageTabContextMenu",t.SaveButtonContextMenu="SaveButtonContextMenu",t.API="API"}(t||(t={}));const n={actions:new class{async initialize(t,e,n){this._logger=e("WindowPlatformActionsProvider"),this._helpers=n,this._logger.info("Initializing")}async get(e){const n={};return n["pin-window"]=async t=>{await this.pinUnpin(e,t,!0)},n["unpin-window"]=async t=>{await this.pinUnpin(e,t,!1)},n["move-view-to-new-window"]=async n=>{if(n.callerType===t.ViewTabContextMenu){const t=await e.createView({name:n.selectedViews[0].name});if(n.selectedViews.length>1){const i=await this.getViewWindowIdentity(t);for(let a=1;a<n.selectedViews.length;a++)await e.createView({name:n.selectedViews[a].name},i,t.identity)}}},n["move-page-to-new-window"]=async n=>{if(n.callerType===t.PageTabContextMenu){const t=e.Browser.wrapSync(n.windowIdentity),i=await t.getPage(n.pageId);await e.createWindow({workspacePlatform:{pages:[i]}}),await t.removePage(i.pageId)}},n}async pinUnpin(n,i,a){if(!e(this._helpers)&&(i.callerType===t.CustomButton||i.callerType===t.ViewTabContextMenu)){const t=n.Browser.wrapSync(i.windowIdentity),o=await t.openfinWindow.getOptions();if("platform"!==o.workspacePlatform.windowType){const n=o.workspacePlatform.toolbarOptions;if(await t.openfinWindow.updateOptions({alwaysOnTop:a}),!e(n)){const e=await this._helpers.updateToolbarButtons(n.buttons,i.customData.sourceId,i.customData.replacementId);await t.replaceToolbarOptions({buttons:e})}}}}async getViewWindowIdentity(t){const n=await t.getCurrentWindow();return e(n.identity.name)||n.identity.name===n.identity.uuid?new Promise((e,n)=>{t.on("target-changed",async function n(){const i=await t.getCurrentWindow();i.identity.name!==i.identity.uuid&&(await t.removeListener("target-changed",n),e(i.identity))}).catch(()=>{})}):n.identity}}};export{n as entryPoints};
//# sourceMappingURL=window-platform.bundle.js.map