/*! For license information please see provider.bundle.js.LICENSE.txt */
var e={2:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},25:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(b[e])e=b[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(D(r.r)&&D(r.g)&&D(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):D(r.h)&&D(r.s)&&D(r.v)?(l=I(r.s),u=I(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):D(r.h)&&D(r.s)&&D(r.l)&&(l=I(r.s),d=I(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[_(A(r)),_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function w(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function v(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(A(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(v,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:I(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var b=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(b);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function x(e){return parseInt(e,16)}function _(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function A(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return x(e)/255}var T,M,R,O=(M="[\\s|\\(]+("+(T="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",R="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",{CSS_UNIT:new RegExp(T),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function D(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},978:(e,t,r)=>{r.d(t,{Nt:()=>z});var a={};r.r(a),r.d(a,{getItem:()=>N,removeItem:()=>L,setItem:()=>F});var o=r(675),i=r(723);r(181);var s=r(70);const c=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise(e=>setTimeout(e,t));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch(e=>{throw console.error("makeDebouncedFunc",e),e}).finally(()=>{r=void 0}),r)};var l;!function(e){e.Top="top",e.Below="below"}(l||(l={}));const u=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};async function d(e,t,n,r,a,o){const i=!!e&&(0,s.Iq)(e),c=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,o);if(r===l.Below){if(!i||await u(i)){const e=i?(await(0,s.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,s.V1)(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:(0,s.V1)(c).left-t/2,top:a?c.bottom-128:c.bottom+12,width:t,height:n}}if(!i||await u(i)){const e=i?(await(0,s.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,s.V1)(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:(0,s.V1)(c).left-t/2,top:c.top+20,width:t,height:n}}c(async function(e,t,n,r,a){const o=t.getBoundingClientRect(),i=await d(e,o.width,o.height,n,r,a);if(0===i.width||0===i.height)return;const c=(0,s.Tv)();await c.setBounds(i),await c.show();const l=setTimeout(()=>c.close(),r?5e3:3e3),u=()=>{clearTimeout(l),c.close()};if(e){const t=(0,s.Iq)(e);t.on("bounds-changing",()=>u()),t.on("blurred",()=>u()),t.on("maximized",()=>u()),t.on("minimized",()=>u()),t.on("restored",()=>u())}},10),r(277),r(957);var p=r(438);const f=n(72);var h,g=r.n(f);!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(h||(h={}));const m=h;let w;async function y(){return w||(w=await fin.System.getMachineId()),w}var v=r(333);const b=async e=>({...e,layoutDetails:{machineId:await y(),machineName:localStorage.getItem(m.MachineName)??"unknown"}});var k=r(79),S=r(786),C=r(102);const P=new Map,x=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return r=n,P.has(r)||P.set(r,(0,C.A)(r)),P.get(r)();var r};var _,I,A,E,T;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(_||(_={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(I||(I={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(A||(A={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(E||(E={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(T||(T={}));const M={..._,...I,...T},R=(0,C.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),O=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await R()).dispatch(E.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await R()).dispatch(E.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await R()).dispatch(E.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await R()).dispatch(E.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await R()).dispatch(E.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetPagesForWindow,e),getPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>z().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await(0,k.bW)(e),a={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(k.OF.AddPage,a)},removePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>z().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await(0,k.bW)(e),a=(await r.dispatch(k.OF.GetAllAttachedPages,void 0)).find(({pageId:e})=>e===n);if(!a)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);a.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[a],insertionIndex:t.index};return r.dispatch(k.OF.AttachPagesToWindow,o)},setActivePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,k.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,k.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await(0,k.bW)(e),(await x(e)).dispatch(M.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await x(e)).dispatch(M.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,k.bW)(e)).dispatch(k.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,k.bW)(e)).dispatch(k.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,k.bW)(e)).dispatch(k.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,k.bW)(e)).dispatch(k.OF.HandleRequestNavigationInternal,t)}),D=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>O(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${(0,v.N)()}`;return S.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",()=>{S.A.markAndMeasure("browser-window-shown",e)})})(r),await(0,k.bW)(e);const a=await t.createWindow(n);return(e=>{S.A.markAndMeasure("browser-window-started",e)})(r),O(a.identity)},getAllAttachedPages:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>(await(0,k.bW)(e),(await(0,s.Io)()).map(e=>O(e.identity))),getUniquePageTitle:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetPageByViewIdentity,t)}},B=e=>({createPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetSavedPage,t),getPages:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetSavedPages,t),savePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SavePage,t),createWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=z(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await(0,k.N)(e)).dispatch(k.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetSavedWorkspaces,t),saveWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,k.N)(e)).dispatch(k.OF.SaveDockProviderConfig,t)});var W;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(W||(W={})),(0,C.A)("of-workspace-notifications-sync"),r(695);const F=(e,t)=>{localStorage.setItem(`${i.$h}-${e}`,t)},N=e=>localStorage.getItem(`${i.$h}-${e}`),L=e=>localStorage.removeItem(`${i.$h}-${e}`),$=o.qT.System,U=e=>Object.entries(e).reduce((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`,""),j=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(m.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(m.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(m.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=U({...e,...j(e,"light")}),this.darkPaletteVars=U({...t,...j(t,"dark")})}}setScheme(e){this.providerStorage.setItem(m.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(m.SelectedColorScheme)&&this.providerStorage.setItem(m.SelectedColorScheme,$),this.providerStorage.getItem(m.SelectedColorScheme)}}(a);const V=e=>({getThemes:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetSelectedScheme,void 0)}),z=()=>(e=>{const t=fin.Platform.wrapSync(e);let n;const r=Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then(e=>e),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:i.$h,name:i.vL,entityType:i.fT||"unknown"}),(await(0,k.N)(e)).dispatch(k.OF.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await(0,k.N)(e),a={actionId:t,payload:{...n,callerType:n.callerType||o.vc.API}};return r.dispatch(k.OF.InvokeCustomActionInternal,a)},_requestQuitPlatformDialog:async t=>(await(0,k.N)(e)).dispatch(k.OF.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await(0,k.N)(e)).dispatch(k.OF.ApplyWorkspace,{...t,options:n}),restoreLastSavedWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetLanguage),_getLanguageResources:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await(0,k.KZ)(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await(0,k.N)(e)).dispatch(k.OF.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.FocusAndExpandSearchInternal),Theme:V(e),Browser:D(e),Storage:B(e)});return r})(fin.me.identity),G=(e,t)=>e.content?{...e,content:e.content.map(e=>G(e,t))}:{...e,componentState:t(e.componentState)},H=e=>({...e,name:void 0}),q=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach(e=>{if("component"===e.type)return t.push(e.componentState);const n=q(e.content);t.push(...n)}),t};new Map,new Map;const K=(g()(async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?q(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&z().Browser.wrapSync(s.$p).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=z().Browser.wrapSync(s.$p);if("singleView"!==e.attachedPageType){const r=await(async e=>{const t=await(async(e,t)=>({pageId:(0,v.N)(),title:e,layout:await b(t),isReadOnly:!1}))(e.title,(e=>{const t={...e};return G(t,H)})(e.layout));return e.panels&&(t.panels=e.panels.map(e=>({...e,viewOptions:H(e.viewOptions)}))),{...e,...t}})(e),a=await z().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=(e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:r,dimensions:a}=n,o=await(async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType})(e);await t.replace({...n,settings:{...r,hasHeaders:!0,reorderEnabled:!0},dimensions:{...a,headerHeight:o?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}})({...s.$p,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}},50,{leading:!1,trailing:!0}),n(434),n(232));var J,Y;r.n(K)().t,new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise(e=>{this.locked?this.queue.push(e):(this.locked=!0,e())})}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}},new Map,(()=>{const e={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};e.workspacePlatform||(e.workspacePlatform={}),e.workspacePlatform._internalDeferShowOptions={setAsForeground:!1,deferShowEnabled:!0,autoShow:e.workspacePlatform?._internalAutoShow||e.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===e.autoShow||e.autoShow},e.autoShow=!1})(),new Map,r(523),s.Q.BrowserMenu,function(e,t){t&&t(t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach(e=>e(...r))})}(new Map,e=>i.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},"window.menu",e)),c(()=>(0,p.v1)().getChildWindows(),500),new Map,new Map,g()(async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===s.Q.BrowserMenu||r.identity.name===s.Q.BrowserSaveMenu?t=r:await(0,s.hb)(r.identity)&&(n=!0),n)break;!n&&t&&t.close()},100,{leading:!1,trailing:!0}),function(e){e.Save="Save",e.SaveAs="SaveAs"}(J||(J={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(Y||(Y={}));const Z=n(396),Q=e=>e+"-"+fin.me.uuid,X=(e,t)=>{const n=i.AT&&i.cI&&new Z.Dexie(e);return n&&n.version(.1).stores({[t]:""}),n},ee=(e,t)=>{const n=X(Q(e),t),r=X(e,t);if(!n||!r)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,n)=>{const r=N(m.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,F(m.HasMovedStore,JSON.stringify(a));const o=await e[n].toArray();await t[n].bulkPut(o)})(r,n,e),n},te="visited-sites",ne="removed-tab-stack",re=(i.AT&&i.cI&&ee("openfin-home-pages","pages"),i.AT&&i.cI&&new Z.Dexie(Q("openfin-enterprise-site-history")));re&&re.version(.1).stores({[te]:"id, url"});const ae=i.AT&&i.cI&&new Z.Dexie(Q("openfin-enterprise-tab-history"));var oe,ie;ae&&ae.version(.1).stores({[ne]:""}),function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(oe||(oe={})),oe.Separator,function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(ie||(ie={})),(0,C.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`);const se="dock-provider-configs",ce=i.AT&&i.cI&&new Z.Dexie(Q("dock-provider-configs"));ce&&ce.version(.1).stores({[se]:""}),i.AT&&i.cI&&ee("openfin-workspace-platform-workspaces","workspaces"),r(250),s.$p.uuid,s.Q.BrowserAddressSearchPrefix,r(179)},675:(e,t,n)=>{var r,a,o,i,s,c,l,u,d,p,f,h;n.d(t,{qT:()=>o,vc:()=>f}),n(179),n(250),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(r||(r={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(a||(a={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(l||(l={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(u||(u={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(d||(d={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(f||(f={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(h||(h={}))},248:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(438),a=n(786);const o=(e,t)=>{a.A.markStart(`${e}-registration`),(0,r.BY)().once("started",()=>a.A.markAndMeasure("workspace-app-started",`${e}-registration`));const n=fin.Window.wrapSync(t);n.once("initialized",()=>a.A.markAndMeasure(`${e}-window-initialized`,`${e}-registration`)),n.once("shown",()=>{a.A.markAndMeasure(`${e}-show`,`${e}-registration`)})}},834:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>v.PK,CLIFilterOptionType:()=>v.oo,CLITemplate:()=>v.fC,deregister:()=>S,hide:()=>P,register:()=>k,show:()=>C});var r=n(723),a=n(786),o=n(277),i=n(70),s=n(695),c=n(79),l=n(575),u=n(905);const d=()=>{},p=new Map;async function f(e){const{id:t,providerId:n}=e,r=w.getProviderOrFail(n);let a=p.get(t);a||(a=function(e,t){const n=new Set;let r=!1;return{close:()=>{r=!0;for(const e of n)e()},req:{id:e,...t,context:t?.context||{},onClose:e=>{n.add(e),r&&e()},removeListener:e=>{n.delete(e)}}}}(t,e),p.set(t,a));const o=function(){const e={};let t=[],n=[],r=null,a=u.Zo.Initial;e.getStatus=()=>a,e.getResultBuffer=()=>t,e.setResultBuffer=n=>{t=n,t?.length&&e.onChange()},e.getRevokedBuffer=()=>n,e.setRevokedBuffer=t=>{n=t,n?.length&&e.onChange()},e.setUpdatedContext=t=>{r=t,null!==r&&e.onChange()},e.getUpdatedContext=()=>r,e.onChange=d;const o={};return e.res=o,o.close=()=>{a!==u.Zo.Close&&(a=u.Zo.Close,e.onChange())},o.open=()=>{a!==u.Zo.Open&&(a=u.Zo.Open,e.onChange())},o.respond=t=>{const n=function(e=[],t=[],n="ascending"){const r=[],a=new Map;t.forEach(e=>{if(e.key)return a.set(e.key,e);r.push(e)});let o=e.map(e=>{if(e.key){const t=a.get(e.key);if(t)return a.delete(e.key),t}return e});return o.push(...a.values(),...r),o="ascending"===n?o.sort((e,t)=>(e?.score??1/0)-(t?.score??1/0)):o.sort((e,t)=>(t?.score??1/0)-(e?.score??1/0)),o}(e.getResultBuffer(),t,undefined);e.setResultBuffer(n)},o.revoke=(...t)=>{const n=new Set(t),r=e.getResultBuffer().filter(({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t});e.setResultBuffer(r),n.size&&(e.getRevokedBuffer().forEach(e=>n.add(e)),e.setRevokedBuffer([...n]))},o.updateContext=t=>{e.setUpdatedContext(t)},e}(),i=()=>{const e=o.getResultBuffer();o.setResultBuffer([]);const r=o.getRevokedBuffer();o.setRevokedBuffer([]);const a=o.getUpdatedContext();o.setUpdatedContext(null);const i=o.getStatus();!async function(e){(await(0,s.gj)()).dispatch("0",e)}({id:t,providerId:n,results:e,revoked:r,status:i,context:a})};let c=!0,l=!1;o.onChange=()=>{if(c)return c=!1,void i();l||(l=!0,setTimeout(()=>{l=!1,i()},100))};try{const{results:e,context:i}=await r.onUserInput(a.req,o.res),s=o.getStatus();return{id:t,providerId:n,status:s,results:e,context:i}}catch(e){return console.error(`OpenFin/Workspace/Home. Uncaught exception in search provider ${n} for search ${t}`,"This is likely a bug in the implementation of the search provider.",e),{id:t,providerId:n,error:e?.message}}}async function h(){for(const{req:e,close:t}of p.values())t(),p.delete(e.id)}async function g(e,t){const n=w.getProviderOrFail(e.providerId);return e.result.dispatcherIdentity=t,n.onResultDispatch?.(e.result)}function m(e){const t=p.get(e.id);t?.close(),p.delete(e.id)}const w=new l.xM("home");var y=n(248),v=n(872);let b;const k=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);(0,y.H)("home",i.F2);const t=await(async e=>{await(0,s.nA)(),(!("skipPlatformInitCheck"in e)||!0!==e.skipPlatformInitCheck)&&await(0,c.KZ)(fin.me.identity),w.assertNotAlreadyRegistered(e.id),w.setProvider(e);const t=await(0,s.gj)();return function(e){e.homeChannelActionsRegistered||(e.homeChannelActionsRegistered=!0,e.register("0",f),e.register("6",m),e.register("5",g),e.addDisconnectionListener(h))}(t),t.dispatch("2",{id:e.id,title:e.title,icon:e.icon,clientAPIVersion:r.et,identity:fin.me.identity,scoreOrder:e.scoreOrder,commandCode:e.commandCode,description:e.description,hidden:e.hidden,listTitle:e.listTitle,inputPlaceholder:e.inputPlaceholder,logoUrl:e.logoUrl,dispatchFocusEvents:e.dispatchFocusEvents})})(e);return b=new Promise((n,i)=>{try{(0,o.GR)({allowed:!0,componentVersion:t?.workspaceVersion}),r.et,n({...t,clientAPIVersion:r.et,setSearchQuery:async t=>(await(0,s.N7)()).dispatch("set-search-query",{query:t,providerID:e.id})})}catch(e){(0,o.GR)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),i(e)}finally{a.A.markEndAndMeasure("home-registration")}}),b},S=async e=>{w.deleteProvider(e);const t=await(0,s.gj)();await t.dispatch("3",e)};async function C(){a.A.markStart("home-show"),await b;const e=await(0,s.N7)();await e.dispatch("show-home",void 0)}async function P(){await b;const e=await(0,s.N7)();await e.dispatch("hide-home",void 0)}},575:(e,t,r)=>{r.d(t,{xM:()=>c});const a=n(570);class o extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`${n} Provider. ${n} Provider${t?` with id ${t}`:""} is not currently registered.`)}}class i extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`${n} Provider. ${n} Provider${t?` with id ${t}`:""} is already registered. Call \`deregister\` before registering again.`)}}class s extends Error{constructor(e,t){const n=(0,a.titleCase)(e);super(`Failed to get ${n} Provider. ${n} Provider with id ${t} is not currently registered.`)}}class c{constructor(e){this.providersMap=new Map,this.providerType=e}assertNotAlreadyRegistered(e){if(this.hasProvider(e))throw new i(this.providerType,e)}assertRegistered(e){if(!this.hasProvider(e))throw new o(this.providerType,e)}getProvider(e){return this.providersMap.get(e)}hasProvider(e){return this.providersMap.has(e)}setProvider(e){this.providersMap.set(e.id,e)}deleteProvider(e){this.providersMap.delete(e)}getProviderOrFail(e){const t=this.getProvider(e);if(!t)throw new s(this.providerType,e);return t}clearProviders(){this.providersMap.clear()}}},129:(e,t,n)=>{var r,a,o;n.d(t,{P:()=>a,R:()=>o}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(r||(r={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(a||(a={})),function(e){e.Active="active",e.Default="default"}(o||(o={}))},600:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(r||(r={}))},872:(e,t,n)=>{var r,a,o;n.d(t,{PK:()=>r,fC:()=>a,oo:()=>o}),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(a||(a={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,n)=>{n(129),n(872),n(710),n(184),n(600)},710:(e,t,n)=>{var r,a;n.d(t,{v:()=>r,z:()=>a}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(r||(r={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(a||(a={}))},184:(e,t,n)=>{n.d(t,{SM:()=>o,ce:()=>r,in:()=>i,np:()=>a});const r={Container:"Container",Button:"Button",SplitButton:"SplitButton"},a={Text:"Text",Image:"Image",List:"List"},o={...r,...a};var i;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(i||(i={}))},598:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>o.v,StorefrontTemplate:()=>o.z,deregister:()=>w,hide:()=>y,register:()=>m,show:()=>v});var r=n(277),a=n(695),o=n(710),i=n(723),s=n(786),c=n(70),l=n(79),u=n(575);let d=!1;async function p(e,t,n){const r=await(0,a.p4)();try{return await r.dispatch(e.action,e.payload)}catch(a){if(a instanceof Error&&-1!==a.toString().indexOf(e.action))return d||console.warn("You are using a newer version of the Workspace client library that is not supported by the currently running workspace provider. Please upgrade the Workspace to version 9.0 or later."),d=!0,await r.dispatch(t.action,t.payload),n;throw a}}const f=new u.xM("storefront");var h=n(248);let g;const m=async e=>{(0,h.H)("store",c.gQ);const t=await(async e=>{await(0,l.KZ)(fin.me.identity);const t=await(0,a.N7)();return f.assertNotAlreadyRegistered(e.id),f.setProvider(e),(e=>{e.storefrontChannelActionsRegistered||(e.storefrontChannelActionsRegistered=!0,e.register("get-storefront-provider-apps",e=>f.getProviderOrFail(e).getApps()),e.register("get-storefront-provider-footer",e=>f.getProviderOrFail(e).getFooter()),e.register("get-storefront-provider-landing-page",e=>f.getProviderOrFail(e).getLandingPage()),e.register("get-storefront-provider-navigation",e=>f.getProviderOrFail(e).getNavigation()),e.register("launch-storefront-provider-app",({id:e,app:t})=>f.getProviderOrFail(e).launchApp(t)))})(t),e.clientAPIVersion=i.et,p({action:"register-provider",payload:{providerType:"storefront",info:e}},{action:"register-storefront-provider",payload:e},{workspaceVersion:"unknown"})})(e);return g=new Promise((n,o)=>{try{(0,r.xt)({allowed:!0,componentVersion:t?.workspaceVersion}),i.et,n({clientAPIVersion:i.et,workspaceVersion:t?.workspaceVersion??"",updateAppCardButtons:async t=>{const n=await(0,a.mQ)();await n.dispatch("update-app-card-button-config",{...t,id:e.id,title:e.title,icon:e.icon,platformIdentity:fin.me.identity})}})}catch(e){(0,r.xt)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),o(e)}finally{s.A.markEndAndMeasure("store-registration")}}),g},w=async e=>(await g,f.assertRegistered(e),f.deleteProvider(e),await(0,a.nA)(),p({action:"deregister-provider",payload:{providerType:"storefront",id:e}},{action:"deregister-storefront-provider",payload:e})),y=async()=>(await g,await(0,a.nA)(),p({action:"hide-provider-window",payload:{providerType:"storefront"}},{action:"hide-storefront"})),v=async()=>(s.A.markStart("store-show"),await g,await(0,a.nA)(),p({action:"show-provider-window",payload:{providerType:"storefront"}},{action:"show-storefront"}))},250:(e,t,n)=>{var r;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(r||(r={}))},79:(e,t,n)=>{var r;n.d(t,{KZ:()=>o,N:()=>i,OF:()=>r,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(r||(r={}));const a=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await a(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},i=async e=>(await o(e),a(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return a(e)}},695:(e,t,n)=>{n.d(t,{N7:()=>h,gj:()=>u,mQ:()=>f,nA:()=>p,p4:()=>c});var r=n(102),a=n(723),o=n(70),i=n(905);const s=(0,r.A)("__of_workspace_protocol__"),c=s,l=s,u=(0,r.A)(i.BT),d=e=>{const t=new URL(e);return t.searchParams.append("isLaunchedViaLib","true"),t.toString()},p=async()=>{if(!await(0,o.C)(o.xt)){if(a.jw||-1===navigator.userAgent.indexOf("Win"))return void await fin.Application.startFromManifest(d(a.m7));await fin.System.openUrlWithBrowser(d(a.t8))}},f=async()=>(await p(),c()),h=async()=>(await p(),l())},905:(e,t,n)=>{n.d(t,{BT:()=>r,Zo:()=>o});const r="__search-openfin-browser-home-topic__";var a,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},957:(e,t,n)=>{var r=n(847),a=(n(70),n(978),n(675),n(877)),o=n.n(a),i=n(67);n.n(i)(),o(),n(695),n(79);r.Palette.brandPrimary,r.Palette.statusSuccess,r.Color.functional1,r.Palette.statusWarning,r.Color.functional10,r.Palette.statusCritical,r.Color.functional7,r.Palette.statusActive,r.Color.functional3,r.Palette.contentBackground1,r.Palette.contentBackground2,r.Palette.contentBackground3,r.Palette.contentBackground4,r.Palette.contentBackground5;r.Palette.background1,r.Color.white,r.Palette.background2,r.Color.lightGray1,r.Palette.background3,r.Color.lightGray2,r.Palette.background4,r.Color.lightGray3,r.Palette.background5,r.Color.lightGray4,r.Palette.background6,r.Color.lightGray5,r.Palette.brandSecondary,r.Color.lightGray4,r.Palette.inputBackground,r.Color.lightGray3,r.Palette.inputColor,r.Color.darkGray5,r.Palette.inputPlaceholder,r.Color.darkGray2,r.Palette.inputDisabled,r.Color.neutralGray,r.Palette.inputFocused,r.Color.lightGray5,r.Palette.inputBorder,r.Color.neutralGray,r.Palette.textDefault,r.Color.darkGray5,r.Palette.textHelp,r.Color.darkGray3,r.Palette.textInactive,r.Color.neutralGray,r.Palette.background1,r.Color.darkGray6,r.Palette.background2,r.Color.darkGray5,r.Palette.background3,r.Color.darkGray4,r.Palette.background4,r.Color.darkGray3,r.Palette.background5,r.Color.darkGray2,r.Palette.background6,r.Color.darkGray1,r.Palette.brandSecondary,r.Color.darkGray2,r.Palette.inputBackground,r.Color.darkGray1,r.Palette.inputColor,r.Color.white,r.Palette.inputPlaceholder,r.Color.lightGray5,r.Palette.inputDisabled,r.Color.neutralGray,r.Palette.inputFocused,r.Color.lightGray5,r.Palette.inputBorder,r.Color.neutralGray,r.Palette.textDefault,r.Color.white,r.Palette.textHelp,r.Color.lightGray5,r.Palette.textInactive,r.Color.neutralGray,r.Color.lightGray4,r.Color.darkGray5,r.Color.darkGray2,r.Color.darkGray5},438:(e,t,n)=>{n.d(t,{BY:()=>u,MW:()=>r,v1:()=>l});var r,a,o=n(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(a||(a={}));const i={uuid:o.$h},s={uuid:r.Workspace},c=e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)},l=()=>c(i),u=()=>c(s)},102:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(723);const a=r.YY&&"complete"!==document.readyState&&new Promise(e=>document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&e()}));function o(e){let t;const n=new Set;return()=>{if(!r.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await a;const o={clientAPIVersion:r.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection(async()=>{n.forEach(e=>e()),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0}),i})().then(e=>(e.addDisconnectionListener=e=>{n.add(e)},e)).catch(n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)})),t}}},723:(e,t,n)=>{var r;n.d(t,{$h:()=>c,AT:()=>i,YY:()=>o,cI:()=>a,et:()=>g,fT:()=>u,jw:()=>d,m7:()=>f,t8:()=>p,vL:()=>l}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(r||(r={}));const a="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:r.Local,c=a&&fin.me.uuid,l=a&&fin.me.name,u=a&&fin.me.entityType,d="prod"===r.Local,p=(r.Dev,r.Staging,r.Prod,"fins://system-apps/workspace"),f="https://workspace.openfin.co/workspace/21.0.16/app.json",h=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,g=(h("https://workspace.openfin.co/workspace/21.0.16"),h("https://workspace.openfin.co/workspace/21.0.16"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&h(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&h(WORKSPACE_DOCS_CLIENT_URL),"21.0.16");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},786:(e,t,n)=>{n.d(t,{A:()=>a});const r="of-workspace-",a=new class{mark(e){performance.mark(`${r}${e}`)}markStart(e){performance.mark(`${r}${e}-start`)}markEnd(e){performance.mark(`${r}${e}-end`)}markEndAndMeasure(e){performance.mark(`${r}${e}-end`);try{return performance.measure(`${r}${e}`,`${r}${e}-start`,`${r}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${r}${e}`);try{return performance.measure(`${r}${e}-measure`,`${r}${t}-start`,`${r}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter(e=>e.name.startsWith(r))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map(e=>({name:e.name.replace(`${r}`,"").replace("-measure",""),duration:e.duration}))}}},181:(e,t,n)=>{var r,a;n.d(t,{sP:()=>i}),function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(r||(r={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(a||(a={}));const o="/microsoft-365-integration-assets/",i={IconOpenFinLogo:"/icons/openfinlogo.svg",IconFilter:"/icons/filter.svg",LightStorefront:"/icons/store-icon-light.png",DarkStorefront:"/icons/store-icon-dark.png",CallIconLight:"/icons/call-icon-light.svg",CallIconDark:"/icons/call-icon-dark.svg",ChatIconLight:"/icons/chat-icon-light.svg",ChatIconDark:"/icons/chat-icon-dark.svg",MessageIconLight:"/icons/message-icon-light.svg",MessageIconDark:"/icons/message-icon-dark.svg",Microsoft365Assets:{Microsoft365DocumentIcon:`${o}microsoft-365-document-icon.svg`,Microsoft365ExcelIcon:`${o}microsoft-365-excel-icon.svg`,Microsoft365PowerpointIcon:`${o}microsoft-365-powerpoint-icon.svg`,Microsoft365OutlookIcon:`${o}microsoft-365-outlook-icon.svg`,Microsoft365TeamsIcon:`${o}microsoft-365-teams-icon.svg`,Microsoft365Icon:`${o}microsoft-365-icon.svg`,PDFFileIcon:`${o}pdf-file-icon.svg`},DockIconLight:"/icons/dock-icon-light.png",DockIconDark:"/icons/dock-icon-dark.png"};var s;!function(e){e.Search="search"}(s||(s={}))},523:(e,t,n)=>{var r;n.d(t,{OX:()=>o}),n(723),function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(r||(r={}));const a="/workspace/21.0.16";function o(e){return a+e}},277:(e,t,n)=>{n.d(t,{GR:()=>s,ki:()=>l,xt:()=>c});var r,a=n(723),o=n(70);n(978),function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(r||(r={}));const i=async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||a.et,componentName:e,componentVersion:t.componentVersion||a.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})},s=e=>{o.F2.uuid===o.$p.uuid&&o.F2.name===o.$p.name||i(r.Home,e)},c=e=>{i(r.Storefront,e)},l=e=>{i(r.Dock,e)};new Map},333:(e,t,n)=>{function r(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}n.d(t,{N:()=>r})},70:(e,t,n)=>{n.d(t,{$p:()=>c,C:()=>m,F2:()=>u,Io:()=>g,Iq:()=>s,Q:()=>r,T7:()=>d,Tv:()=>l,V1:()=>i,gQ:()=>p,hb:()=>h,ur:()=>w,xt:()=>f});var r,a=n(438),o=n(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(r||(r={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function s(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:o.vL,uuid:o.$h};function l(){return s(c)}const u={name:r.Home,uuid:a.MW.Workspace},d={name:r.Dock,uuid:a.MW.Workspace},p={name:r.Storefront,uuid:a.MW.Workspace},f={name:a.MW.Workspace,uuid:a.MW.Workspace},h=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function g(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map(async e=>h(e.identity)));return e.filter((e,n)=>t[n])}const m=e=>s(e).getOptions().then(()=>!0).catch(()=>!1);async function w(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce((t,n)=>{const r=function(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}(e,n);return r>t.percentage?{percentage:r,monitor:n}:t},{percentage:0,monitor:t.primaryMonitor}).monitor}}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{ActionTrigger:()=>Fe.P,AppManifestType:()=>Le.v,ButtonStyle:()=>Ne.in,CLIAction:()=>U.PK,CLIFilterOptionType:()=>U.oo,CLITemplate:()=>U.fC,ContainerTemplateFragmentNames:()=>Ne.ce,Dock:()=>e,DockButtonNames:()=>p.a,Home:()=>C,Integrations:()=>t,PresentationTemplateFragmentNames:()=>Ne.np,SearchTagBackground:()=>Fe.R,Storefront:()=>We,StorefrontTemplate:()=>Le.z,TemplateFragmentTypes:()=>Ne.SM});var e={};a.r(e),a.d(e,{DockButtonNames:()=>p.a,deregister:()=>w,minimize:()=>y,register:()=>m,show:()=>v});var t={};a.r(t),a.d(t,{Microsoft365WorkflowIntegration:()=>Be});var r=a(723),i=a(786),s=a(277),c=a(70),l=a(695),u=a(79),d=a(248),p=a(600);let f,h;const g=(e=[])=>{const t=e.filter(e=>!!e.id).map(e=>e.id);if(new Set(t).size!==t.length)throw new Error("Dock provider buttons must have unique identifiers if specified.")},m=async e=>{(0,d.H)("dock",c.T7);const t=await(async e=>{await(0,u.KZ)(fin.me.identity);const t=await(0,l.N7)();if(h)throw new Error("Error using `Dock.register`. A Dock provider for this Workspace Platform is already registered. Call `Dock.deregister` before calling `Dock.register` again.");return h=e,e.clientAPIVersion=r.et,t.dispatch("register-provider",{providerType:"dock",info:e})})(e);return f=new Promise((n,a)=>{try{(e=>{e.workspaceComponents&&!Array.isArray(e.workspaceComponents)&&console.warn("Using the `WorkspaceComponentButtonOptions` type to configure the Workspace Components Buttons is deprecated. Please use `WorkspaceButtonsConfig` instead.")})(e),g(e.buttons),(0,s.ki)({allowed:!0,componentVersion:t?.workspaceVersion}),r.et,n({clientAPIVersion:r.et,workspaceVersion:t?.workspaceVersion??"",updateDockProviderConfig:async t=>{if(!h)throw new Error("Error using `Dock.updateDockProviderConfig`. Dock provider is not registered. Make sure to call `Dock.register` first.");g(t.buttons);const n=await(0,l.N7)();await n.dispatch("update-provider",{providerType:"dock",provider:{...e,workspaceComponents:t.workspaceComponents,buttons:t.buttons,title:t.title,icon:t.icon,disableUserRearrangement:t.disableUserRearrangement,id:e.id}})}})}catch(e){(0,s.ki)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),a(e),f=void 0}finally{i.A.markEndAndMeasure("dock-registration")}}),f},w=async()=>{if(await f,!h)throw new Error("Error using `Dock.deregister`. Dock provider is not registered. Call `Dock.register` before calling `Dock.deregister`.");const e=await(0,l.N7)();await e.dispatch("deregister-provider",{providerType:"dock",id:h.id}),h=void 0,f=void 0},y=async()=>{await f,await(0,l.nA)(),await(async()=>(await(0,l.p4)()).dispatch("hide-provider-window",{providerType:"dock"}))()},v=async()=>{i.A.markStart("dock-show"),await f,await(0,l.nA)(),await(async()=>(await(0,l.p4)()).dispatch("show-provider-window",{providerType:"dock"}))()};var b,k,S,C=a(834),P=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},x=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};b=new WeakMap,k=new WeakMap,S=new WeakMap;const _=class{constructor(e){b.set(this,void 0),k.set(this,void 0),S.set(this,void 0),P(this,b,e,"f"),P(this,k,new Map,"f"),P(this,S,[],"f")}get(e){if(x(this,k,"f").has(e))return this.updateQueue(e),x(this,k,"f").get(e)}has(e){return x(this,k,"f").has(e)}put(e,t){if(x(this,k,"f").has(e))x(this,k,"f").set(e,t),this.updateQueue(e);else{if(x(this,S,"f").length===x(this,b,"f")){const e=x(this,S,"f").shift();e&&x(this,k,"f").delete(e)}x(this,k,"f").set(e,t),x(this,S,"f").push(e)}}updateQueue(e){const t=x(this,S,"f").indexOf(e);-1!==t&&(x(this,S,"f").splice(t,1),x(this,S,"f").push(e))}};function I(e){return e&&"object"==typeof e&&!Array.isArray(e)}function A(e,...t){if(!t.length)return e;const n=t.shift();return I(e)&&I(n)&&Object.entries(n).forEach(([t,n])=>{if(I(n))return e[t]||(e[t]={}),A(e[t],n);e[t]=n}),A(e,...t)}var E,T,M,R,O,D=a(181),B=a(523),W=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},F=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};T=new WeakMap,M=new WeakMap,R=new WeakMap,E=new WeakSet,O=function(){const e=Array.from(F(this,T,"f").entries()).reduce((e,t)=>!e||t[1].timestamp<e[1].timestamp?t:e,null);return e?e[0]:null};const N=class{constructor(e=3e5,t=100){E.add(this),T.set(this,void 0),M.set(this,void 0),R.set(this,void 0),W(this,T,new Map,"f"),W(this,M,e,"f"),W(this,R,t,"f")}get(e){const t=F(this,T,"f").get(e);return t?Date.now()-t.timestamp<F(this,M,"f")?t.value:(F(this,T,"f").delete(e),null):null}put(e,t){if(F(this,T,"f").size>=F(this,R,"f")){const e=F(this,E,"m",O).call(this);null!=e&&F(this,T,"f").delete(e)}F(this,T,"f").set(e,{value:t,timestamp:Date.now()})}remove(e){F(this,T,"f").delete(e)}clear(){F(this,T,"f").clear()}};var L,$=a(333),U=a(872),j=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const V={};class z{constructor(e){L.set(this,new Set),this._initializeWorkflows=async(e=this.config)=>{const{workflows:t}=e;for(const e in t)if(!t[e].disableAutoInitialize)try{j(this,L,"f").has(e)?console.warn(`Workflow ${e} already initialized.`):(j(this,L,"f").add(e),await this.initializeWorkflow(e))}catch(t){j(this,L,"f").delete(e),console.error(`Error registering ${e}:`,t)}};const t=A({},V,e);this.config=t}async initializeWorkflow(e){j(this,L,"f").add(e)}}L=new WeakMap;const G=n(352);let H=0;const q={chatMessage:"Chat Message",event:"Event",message:"Email",drive:"Document",contact:"Contact",user:"User",list:"List"},K={pdf:"PDF",docx:"Word",pptx:"PowerPoint",xlsx:"Excel",onenote:"OneNote"},J={chatMessage:["Chat.Read","ChannelMessage.Read.All"],list:["Sites.Read.All"],event:["Calendars.Read"],message:["Mail.ReadWrite.Shared"],contact:["Contacts.Read.Shared","Mail.ReadWrite.Shared"],user:["User.Read.All","Presence.Read.All"]},Y="MICROSOFT_365_SEARCH_TYPE_FILTER",Z="MICROSOFT_365_SEARCH_FILE_TYPE_FILTER",Q="MICROSOFT_365_SEARCH_DEPARTMENT_FILTER",X="MICROSOFT_365_SEARCH_JOB_TITLE_FILTER",ee="Teams Call",te="Teams Chat",ne="Email",re=(e,t)=>{const n=[],r={item:e.context.selectedFilters?.find(e=>e.id===Y),documentType:e.context.selectedFilters?.find(e=>e.id===Z)},a=[{value:"Document",isSelected:!!r.item?.options?.find(({value:e})=>"File"===e)?.isSelected},{value:"Contact",isSelected:!!r.item?.options?.find(({value:e})=>"Contact"===e)?.isSelected},{value:"Chat Message",isSelected:!!r.item?.options?.find(({value:e})=>"Chat Message"===e)?.isSelected},{value:"Email",isSelected:!!r.item?.options?.find(({value:e})=>"Email"===e)?.isSelected},{value:"Event",isSelected:!!r.item?.options?.find(({value:e})=>"Event"===e)?.isSelected},{value:"List",isSelected:!!r.item?.options?.find(({value:e})=>"List"===e)?.isSelected}];return n.push({id:Y,title:"Type",type:U.oo.MultiSelect,options:a.filter(e=>t.has(e.value))}),"Document"===r.item?.options?.filter(e=>e.isSelected)?.[0].value&&n.push({id:Z,title:"File Type",type:U.oo.MultiSelect,options:Object.entries(K).map(([,e])=>({value:e,isSelected:!!r.documentType?.options?.filter(e=>e.isSelected)?.find(({value:e})=>"File"===e)?.isSelected}))}),n},ae=(e,t)=>{const n=t.context.selectedFilters?.find(e=>e.id===Y)?.options;if(!Array.isArray(n)||!n.find(e=>"Contact"===e.value||"User"===e.value)?.isSelected)return[];const{department:r,jobTitle:a}=e.reduce((e,t)=>(t.department&&e.department.add(t.department),t.jobTitle&&e.jobTitle.add(t.jobTitle),e),{department:new Set,jobTitle:new Set}),o=t.context.selectedFilters?.find(e=>e.id===Q),i=Array.from(r).map(e=>({value:e,isSelected:!!o?.options?.find(({value:t})=>t===e)?.isSelected})),s=t.context.selectedFilters?.find(e=>e.id===Q),c=Array.from(a).map(e=>({value:e,isSelected:!!s?.options?.find(({value:t})=>t===e)?.isSelected}));return[{id:Q,title:"Department",type:U.oo.MultiSelect,options:i},{id:X,title:"Job Title",type:U.oo.MultiSelect,options:c}]},oe=e=>{const t=e.context.selectedFilters?.find(e=>e.id===Q),n=Array.isArray(t?.options)?t.options.filter(e=>e.isSelected).map(e=>e.value):[],r=e.context.selectedFilters?.find(e=>e.id===X);return{department:n,jobTitle:Array.isArray(r?.options)?r.options.filter(e=>e.isSelected).map(e=>e.value):[]}},ie=(e,t)=>{const{department:n,jobTitle:r}=t;return e.filter(e=>(!n.length||n.includes(e.department))&&(!r.length||r.includes(e.jobTitle)))},se=e=>{const t=Array.isArray(e.context.selectedFilters?.find(e=>e.id===Z)?.options)?e.context.selectedFilters.find(e=>e.id===Z)?.options:[];return{filterFiles:t&&t.some(({isSelected:e})=>e),showWord:t.find(({value:e})=>"Word"===e)?.isSelected,showExcel:t.find(({value:e})=>"Excel"===e)?.isSelected,showPowerPoint:t.find(({value:e})=>"PowerPoint"===e)?.isSelected,showPDF:t.find(({value:e})=>"PDF"===e)?.isSelected,showOneNote:t.find(({value:e})=>"OneNote"===e)?.isSelected}},ce=(e,t)=>{const n=[];return t.showWord&&n.push(".docx"),t.showExcel&&n.push(".xlsx"),t.showPowerPoint&&n.push(".pptx"),t.showPDF&&n.push(".pdf"),t.showOneNote&&n.push(".one"),e.filter(e=>{if(e.file){const t=e.name.substring(e.name.lastIndexOf("."));return n.includes(t)}return!1})},le=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return"Microsoft Word";case"xlsx":case"xls":return"Microsoft Excel";case"pptx":case"ppt":return"Microsoft PowerPoint";case"pdf":return"PDF";case"png":case"jpg":case"jpeg":case"gif":return"Image";case"txt":return"Text";default:return"File"}},ue=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365DocumentIcon);case"xlsx":case"xls":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365ExcelIcon);case"pptx":case"ppt":return(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365PowerpointIcon);case"pdf":return(0,B.OX)(D.sP.Microsoft365Assets.PDFFileIcon);default:return}},de=e=>e.replace(/\+/g,"_").replace(/\//g,"-");var pe,fe,he,ge,me,we,ye,ve,be,ke,Se,Ce,Pe,xe,_e,Ie,Ae,Ee,Te,Me,Re,Oe=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},De=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n};class Be extends z{constructor(e){const t=A({},{workflows:{search:(H+=1,{homeProvider:{description:"Microsoft 365 search results provider",id:`MS365-${fin.me.identity.uuid}-${H}`,logoUrl:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365Icon),icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365Icon),title:"Microsoft 365 Search",inputPlaceholder:"What would you like to search in Microsoft 365 today?",dispatchFocusEvents:!0},microsoftEntityTypeConfig:{message:!0,chatMessage:!0,drive:!0,event:!0,user:!0,contact:!0,list:!0},useTeamsDeepLink:!0})}},e);super(t),pe.add(this),fe.set(this,void 0),this.workflowIntegrationName="Microsoft 365",he.set(this,void 0),ge.set(this,void 0),me.set(this,1),we.set(this,new Set),ye.set(this,new _(100)),ve.set(this,new N(6e4)),this.connect=async(e=this.config.connect)=>{const{clientId:t,tenantId:n,redirectUri:r}=e,a=this.config.workflows?.search?Object.entries(this.config.workflows?.search?.microsoftEntityTypeConfig??{}).filter(([e,t])=>t).map(([e])=>J[e]).filter(e=>void 0!==e).flat():[];this.config.connect=e,De(this,fe,await(0,G.connect)(t,n,r,[...new Set(a)]),"f")},be.set(this,()=>{if(!Oe(this,fe,"f"))throw new Error("Microsoft365WorkflowIntegration not connected");return Oe(this,fe,"f")}),xe.set(this,async e=>{if(De(this,ge,e,"f"),e.data?.item?.id){const t=Oe(this,ve,"f").get(e.data.item.id);if(t)return void Oe(this,he,"f").respond([t])}"user"===e.data?.type&&Oe(this,Te,"f").call(this,e)}),_e.set(this,async e=>{await fin.Platform.getCurrentSync().createWindow({layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{url:e}}]}]},workspacePlatform:void 0})}),Ie.set(this,async e=>{if(e.data.item.channelIdentity.teamId){const t=new URL(`msteams:/l/channel/${e.data.item.channelIdentity.channelId}/${e.data.item.id}`);return!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"channel"})),void await fin.System.openUrlWithBrowser(t.toString())}const t=new URL(`msteams:/l/message/${e.data.item.chatId}/${e.data.item.id}`);!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"chat"})),await fin.System.openUrlWithBrowser(t.toString())}),Ae.set(this,async e=>{switch(e.action.name){case ee:{const t=new G.TeamsConnection(Oe(this,be,"f").call(this),this.config.workflows?.search?.useTeamsDeepLink);Oe(this,pe,"m",ke).call(this,()=>t.startCall([e.data.item.mail]));break}case ne:{const t=await this.executeApiRequest("/v1.0/me/messages","POST",{toRecipients:[{emailAddress:{address:e.data.item.mail}}]});let n=t.data.webLink;const r=new URL(t.data.webLink);if("/owa/"===r.pathname){const e=r.search.slice(1).split("&").reduce((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e},{});if(e.ItemID){const t=e.ItemID;n=`${r.origin}/mail/deeplink/compose/${t}?ItemID=${t}&exvsurl=1`}}await fin.Platform.getCurrentSync().createView({url:n});break}case te:{const t=Oe(this,be,"f").call(this),n=new G.TeamsConnection(t,this.config.workflows?.search?.useTeamsDeepLink);Oe(this,pe,"m",ke).call(this,()=>n.startChat({emailAddresses:[t.currentUser.mail,e.data.item.mail]}));break}default:console.warn("Unhandled user action for result:",e,`Unknown action "${e.action.name}"`)}}),Ee.set(this,async e=>{switch(e.data.type){case"driveItem":Oe(this,_e,"f").call(this,e.data.item.webUrl);break;case"event":{const t=e.data.item,n=await this.executeApiRequest(`/v1.0/me/events/${t.id}`);Oe(this,_e,"f").call(this,n.data.webLink);break}case"chatMessage":Oe(this,Ie,"f").call(this,e);break;case"message":Oe(this,_e,"f").call(this,e.data.item.webLink);break;case"list":{const t=e.data.item,n=await this.executeApiRequest(`/v1.0/sites/${t.parentReference?.siteId}/lists/${t.id}`);Oe(this,_e,"f").call(this,n.data.webUrl);break}case"user":Oe(this,Ae,"f").call(this,e);break;default:console.warn("Unhandled user action for result:",e,`Unknown result type "${e.data.type}"`)}}),Te.set(this,async e=>{let t,n;const r=[],a=e.data.item;Oe(this,ye,"f").has(a.id)?t=Oe(this,ye,"f").get(a.id):r.push({id:"contactPhoto",method:"GET",url:`/users/${e.data.item.id}/photo/$value`,headers:{ConsistencyLevel:"eventual"}}),r.push({id:"presence",method:"GET",url:`/users/${e.data.item.id}/presence`});try{const e=await Oe(this,pe,"m",Se).call(this,r),i=e.data?.responses.find(e=>"contactPhoto"===e.id);i&&200!==i.status&&console.warn("Error fetching user photo",i),i?.body&&200===i?.status&&(t=`data:image/jpeg;base64,${i.body}`,Oe(this,ye,"f").put(a.id,t));const s=e.data?.responses.find(e=>"presence"===e.id);200!==s.status&&console.warn("Error fetching user presence",s),s?.body&&200===s.status&&(o=s.body,n={available:"available",availableidle:"available",away:"away",berightback:"away",busy:"busy",busyidle:"busy",donotdisturb:"do-not-disturb",offline:"offline",presenceunknown:"offline"}[o.availability?.toLowerCase()])}catch(e){console.error("Error fetching user data",e)}var o;const i=[["Department",a.department||"N/A"],["Email",a.mail||"N/A"],["Work Phone",a.businessPhones?.[0]||"N/A"],["Mobile",a.mobilePhone||"N/A"],["Location",a.officeLocation||"N/A"]],s={...e,template:U.fC.Contact,templateContent:{name:e.data.item.displayName,title:e.data.item.jobTitle,details:[i],photoUrl:t,onlineStatus:n,buttons:[{type:"button",icon:{light:(0,B.OX)(D.sP.CallIconLight),dark:(0,B.OX)(D.sP.CallIconDark)},tooltip:"Teams Call",action:ee},{type:"button",icon:{light:(0,B.OX)(D.sP.ChatIconLight),dark:(0,B.OX)(D.sP.ChatIconDark)},tooltip:"Chat",action:te},{type:"button",icon:{light:(0,B.OX)(D.sP.MessageIconLight),dark:(0,B.OX)(D.sP.MessageIconDark)},tooltip:"E-mail",action:ne}]}};Oe(this,ve,"f").put(e.data.item.id,s),Oe(this,he,"f").respond([s])}),Me.set(this,async(e,t)=>{if(Oe(this,he,"f")&&Oe(this,he,"f").close(),De(this,he,t,"f"),Oe(this,he,"f").open(),e.query.length<Oe(this,me,"f"))return{results:[]};const n=encodeURIComponent(e.query),r=[],a=((e,t)=>{const n=Array.isArray(e.context.selectedFilters?.find(e=>e.id===Y)?.options)?e.context.selectedFilters.find(e=>e.id===Y)?.options:[],r=n.every(({isSelected:e})=>!e);return{showDocuments:t.has("Document")&&(r||!!n.find(({value:e})=>"Document"===e)?.isSelected),showContacts:t.has("Contact")&&(r||!!n.find(({value:e})=>"Contact"===e)?.isSelected),showChatMessages:t.has("Chat Message")&&(r||!!n.find(({value:e})=>"Chat Message"===e)?.isSelected),showMessages:t.has("Email")&&(r||!!n.find(({value:e})=>"Email"===e)?.isSelected),showEvents:t.has("Event")&&(r||!!n.find(({value:e})=>"Event"===e)?.isSelected),showLists:t.has("List")&&(r||!!n.find(({value:e})=>"List"===e)?.isSelected)}})(e,Oe(this,we,"f"));if(a.showDocuments){const e=`'${n}'`;r.push({id:"driveItem",method:"GET",url:`/me/drive/root/search(q=${encodeURIComponent(e)})`,headers:{ConsistencyLevel:"eventual"}})}if(a.showEvents&&r.push({id:"event",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["event"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),a.showContacts){const t=`"${e.query}"`;r.push({id:"contact",method:"GET",url:`/me/contacts?$search=${encodeURIComponent(t)}&$top=10`});const n=["displayName","givenName","surname"].map(t=>`"${t}:${e.query}"`).join(" OR ");r.push({id:"user",method:"GET",url:`/users?$search=${encodeURIComponent(n)}&$top=10&$select=id,displayName,department,mail,businessPhones,mobilePhone,officeLocation,jobTitle`,headers:{ConsistencyLevel:"eventual"}})}if(a.showMessages&&r.push({id:"message",method:"GET",url:`/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(`"${e.query}"`)}&$top=10`}),a.showChatMessages&&r.push({id:"chatMessage",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["chatMessage"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),a.showLists&&r.push({id:"list",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["list"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),0===r.length)return{results:[]};const{results:o,filters:i}=await Oe(this,pe,"m",Ce).call(this,r,e);return o.find(e=>e.key===Oe(this,ge,"f")?.key)?.template===U.fC.Loading&&Oe(this,xe,"f").call(this,Oe(this,ge,"f")),{results:o,context:{filters:i}}}),Re.set(this,async e=>{switch(e.action.trigger){case Fe.P.FocusChange:Oe(this,xe,"f").call(this,e);break;case Fe.P.UserAction:Oe(this,Ee,"f").call(this,e);break;case Fe.P.Reload:break;default:console.warn(`Unknown action trigger: ${e.action.trigger}`)}}),this.initializeWorkflow=async e=>{if("search"!==e)throw new Error(`Attempted to initialize unknown workflow: ${e}`);await C.register({...this.config.workflows.search.homeProvider,onUserInput:Oe(this,Me,"f"),onResultDispatch:Oe(this,Re,"f")}),(0,G.enableLogging)(),await this.connect(),super.initializeWorkflow(e)},Object.entries(t.workflows?.search?.microsoftEntityTypeConfig||{}).filter(([e,t])=>t).forEach(([e])=>{Oe(this,we,"f").add(q[e])})}async executeApiRequest(...e){return Oe(this,pe,"m",ke).call(this,()=>Oe(this,be,"f").call(this).executeApiRequest(...e))}}fe=new WeakMap,he=new WeakMap,ge=new WeakMap,me=new WeakMap,we=new WeakMap,ye=new WeakMap,ve=new WeakMap,be=new WeakMap,xe=new WeakMap,_e=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Me=new WeakMap,Re=new WeakMap,pe=new WeakSet,ke=async function(e){try{return await e()}catch(t){if(t instanceof G.AuthTokenExpiredError)return await this.connect(),e();throw t}},Se=async function(e){return this.executeApiRequest("/v1.0/$batch","POST",{requests:e})},Ce=async function(e,t){try{const n=await Oe(this,pe,"m",Se).call(this,e);return{filters:[...re(t,Oe(this,we,"f")),...ae(n.data.responses.find(e=>"user"===e.id)?.body?.value||[],t)],results:Oe(this,pe,"m",Pe).call(this,n,t)}}catch(e){return console.warn("Failed to execute Batch API request: ",e),{filters:[],results:[{key:(0,$.N)(),title:"Error Fetching Search Results",description:"",actions:[],template:U.fC.Error,templateContent:`Failed to execute Batch API request: ${JSON.stringify(e)}`}]}}},Pe=function(e,t){let n=[];for(const r of e.data.responses)if(200===r.status)switch(r.id){case"driveItem":{const e=se(t),a=e.filterFiles?ce(r.body.value,e):r.body.value;n.push(...(a||[]).map(e=>({key:e.id??(0,$.N)(),title:e.name??"",description:e.file?.mimeType??"",label:le(e.name),icon:ue(e.name),data:{type:"driveItem",item:e},actions:[{name:"Launch"}],template:U.fC.Plain,templateContent:void 0})));break}case"event":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.filter(e=>e.resource.subject).map(e=>{const t=e.resource,n=de(e.hitId);return{key:n,title:t.subject??"",label:"Calendar Event",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[{name:"Launch"}],data:{type:"event",item:{...t,id:n}},template:U.fC.Plain,templateContent:void 0}})||[]);break;case"contact":{const e=oe(t),a=ie(r.body.value||[],e);n.push(...(a||[]).map(e=>({key:e.id??(0,$.N)(),title:e.displayName??"",label:"Outlook contact",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"contact",item:e},template:U.fC.Plain,templateContent:void 0})));break}case"user":{const e=oe(t),a=ie(r.body.value||[],e);n.push(...(a||[]).map(e=>({key:e.id??(0,$.N)(),title:e.displayName??"",label:"Teams contact",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"user",item:e},template:U.fC.Loading,templateContent:void 0})));break}case"message":n.push(...(r.body.value||[]).map(e=>({key:e.id??(0,$.N)(),title:`${e.subject??"Untitled Message"}${e.isDraft?" (Draft)":""}`,label:"Email",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"message",item:e},template:U.fC.Plain,templateContent:void 0})));break;case"chatMessage":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map(e=>{const t=e.resource;return{key:t.id??(0,$.N)(),title:e.summary??"Untitled Message",label:"Chat",icon:(0,B.OX)(D.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"chatMessage",item:t},template:U.fC.Plain,templateContent:void 0}})||[]);break;case"list":n.push(...r.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map(e=>{const t=e.resource,n=de(e.hitId);return{key:n,title:t.displayName??"Untitled List",label:"List",actions:[{name:"Launch"}],data:{type:"list",item:{...t,id:n}},template:U.fC.Plain,templateContent:void 0}})||[]);break;default:console.warn(`Unknown batch response id: ${r.id}`,r.body)}else console.warn("Batch API request failed: ",r);return n=n.map(e=>{if(!e.data?.item?.id)return e;const t=Oe(this,ve,"f").get(e.data.item.id);return t?{...e,template:t.template,templateContent:t.templateContent}:e}),n.sort((e,t)=>e.title>t.title?1:-1)};var We=a(598),Fe=a(129),Ne=a(184),Le=a(710)})(),e.exports=o})()},41:(e,t,n)=>{e.exports=n(62)},62:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=(Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.consumer")),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=(Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy")),l=Symbol.iterator,u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,p={};function f(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||u}function h(){}function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||u}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=f.prototype;var m=g.prototype=new h;m.constructor=g,d(m,f.prototype),m.isPureReactComponent=!0;var w=Array.isArray,y={H:null,A:null,T:null,S:null,V:null},v=Object.prototype.hasOwnProperty;function b(e,t,r,a,o,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function P(){}function x(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u,d,p=!1;if(null===e)p=!0;else switch(s){case"bigint":case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case n:case r:p=!0;break;case c:return x((p=e._init)(e._payload),t,a,o,i)}}if(p)return i=i(e),p=""===o?"."+C(e,0):o,w(i)?(a="",null!=p&&(a=p.replace(S,"$&/")+"/"),x(i,t,a,"",function(e){return e})):null!=i&&(k(i)&&(u=i,d=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+p,i=b(u.type,d,void 0,0,0,u.props)),t.push(i)),1;p=0;var f,h=""===o?".":o+":";if(w(e))for(var g=0;g<e.length;g++)p+=x(o=e[g],t,a,s=h+C(o,g),i);else if("function"==typeof(g=null===(f=e)||"object"!=typeof f?null:"function"==typeof(f=l&&f[l]||f["@@iterator"])?f:null))for(e=g.call(e),g=0;!(o=e.next()).done;)p+=x(o=o.value,t,a,s=h+C(o,g++),i);else if("object"===s){if("function"==typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(P,P):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,o,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return p}function _(e,t,n){if(null==e)return e;var r=[],a=0;return x(e,r,"","",function(e){return t.call(n,e,a++)}),r}"function"==typeof reportError&&reportError;t.Children={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Fragment=a,t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=d({},e.props),a=e.key;if(null!=t)for(o in t.ref,void 0!==t.key&&(a=""+t.key),t)!v.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),s=0;s<o;s++)i[s]=arguments[s+2];r.children=i}return b(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)v.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var s=Array(i),c=0;c<i;c++)s[c]=arguments[c+2];a.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return b(e,o,void 0,0,0,a)},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=k,t.useCallback=function(e,t){return y.H.useCallback(e,t)},t.useContext=function(e){return y.H.useContext(e)},t.useEffect=function(e,t,n){var r=y.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useMemo=function(e,t){return y.H.useMemo(e,t)},t.useRef=function(e){return y.H.useRef(e)},t.useState=function(e){return y.H.useState(e)}},63:function(e){!function(t,n){e.exports=n()}(0,()=>{return e={3089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=class{constructor(){const e=new Promise((e,t)=>{this._resolve=e,this._reject=t});this._promise=e}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}}},5879:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.ChannelClientHandlers=void 0;const r=n(59603),a=n(33657),o=n(75762),i=n(27167),s=n(46451),c=n(52315);class l{}t.ChannelClientHandlers=l,l.handleDefaultAction=()=>!1,l.handleEventAction=e=>{(0,a.getEventRouter)().dispatchEvent(e)},l.handleWarnAction=async e=>{await o.Log.warn(e)},l.handleDisconnection=async()=>{(0,i.getChannelClient)()&&(await o.Log.warn("Disconnected from Notifications. Reconnecting..."),(0,i.clearAwaitedChannelClient)(),await p(),await f())};let u=null;t.register=async e=>{if(u)return u;try{return u=d(e),await u}finally{u=null}};const d=async e=>{if(null==e?void 0:e.customManifest){if(!e.customManifest.manifestUrl)throw new Error("manifestUrl must be provided.");if(!e.customManifest.manifestUuid)throw new Error("manifestUuid must be provided and must not be an empty string.");if(e.customManifest.manifestUuid===r.SERVICE_CHANNEL)throw new Error(`manifestUuid must not be ${r.SERVICE_CHANNEL}`);i.ChannelClientConfig.serviceChannel=`${e.customManifest.manifestUuid}-${r.SERVICE_CHANNEL}`,await p(e.customManifest.manifestUrl)}else i.ChannelClientConfig.serviceChannel=r.SERVICE_CHANNEL,await p();return await f(),{clientAPIVersion:"2.11.1",notificationsVersion:(await(0,s.getStatus)()).version||"unknown"}},p=async e=>{try{const t=window.navigator.userAgent.toLowerCase().includes("windows"),n=e||"fins://system-apps/notification-center";t?(await o.Log.info("Launching Notifications via fin.System.launchManifest..."),await c.finContext.System.launchManifest(n,{noUi:!0})):(await o.Log.info("Launching Notifications via fin.System.openUrlWithBrowser..."),await c.finContext.System.openUrlWithBrowser(n))}catch(e){throw e instanceof Error?await o.Log.error(`Failed to launch Notifications - ${e.name}: ${e.message}`):await o.Log.error(`Failed to launch Notifications - ${JSON.stringify(e)}`),e}},f=async()=>{try{const{channelClientPromise:e,isInit:t}=(0,i.initAwaitedChannelClient)(),n=await e;t&&(n.setDefaultAction(l.handleDefaultAction),n.register("event",l.handleEventAction),n.register("WARN",l.handleWarnAction),n.onDisconnection(l.handleDisconnection),c.finContext.Window.wrapSync(r.SERVICE_IDENTITY).once("closed",l.handleDisconnection))}catch(e){throw e instanceof Error?await o.Log.error(`Failed to connect to Notifications - ${e.name}: ${e.message}`):await o.Log.error(`Failed to connect to Notifications - ${JSON.stringify(e)}`),e}}},13154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15915:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22777:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3089);async function a(e,t){let n=0;for(const r of e)await t(r,n,e),n++}async function o(e,t){await Promise.all(e.map(t))}function i(e,t,n){const a=new r.DeferredPromise,o=e.add((...e)=>{t(...e)&&(o.remove(),a.resolve())});return n&&n.catch(e=>{o.remove(),a.reject(e)}),s(a.promise)}function s(e){return e.catch(()=>{}),e}t.serialForEach=a,t.serialMap=async function(e,t){const n=[];return await a(e,async(e,r,a)=>{n.push(await t(e,r,a))}),n},t.serialFilter=async function(e,t){const n=[];return await a(e,async(e,r,a)=>{await t(e,r,a)&&n.push(e)}),n},t.parallelForEach=o,t.parallelMap=async function(e,t){const n=[];return await o(e,async(e,r,a)=>{n[r]=await t(e,r,a)}),n},t.parallelFilter=async function(e,t){const n=[];return await o(e,async(e,r,a)=>{n[r]=await t(e,r,a)}),e.filter((e,t)=>n[t])},t.withStrictTimeout=function(e,t,n){const r=new Promise((t,r)=>setTimeout(()=>r(new Error(n)),e));return s(Promise.race([r,t]))},t.withTimeout=function(e,t){const n=new Promise(t=>setTimeout(()=>t([!0,void 0]),e)),r=t.then(e=>[!1,e]);return Promise.race([n,r])},t.untilTrue=function(e,t,n){return t()?Promise.resolve():i(e,t,n)},t.untilSignal=i,t.allowReject=s},27167:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getChannelClient=t.clearAwaitedChannelClient=t.initAwaitedChannelClient=t.ChannelClientConfig=void 0;const r=n(59603),a=n(75762),o=n(52315);t.ChannelClientConfig={serviceChannel:r.SERVICE_CHANNEL};const i=async({wait:e})=>{await a.Log.info("Connecting to Notifications...");const n=await o.finContext.InterApplicationBus.Channel.connect(t.ChannelClientConfig.serviceChannel,{wait:e,payload:{version:"2.11.1"}});return await a.Log.info("Successfully connected to Notifications."),n};let s,c;t.initAwaitedChannelClient=()=>s?{channelClientPromise:s,isInit:!1}:(s=i({wait:!0}),s.catch(e=>(0,t.clearAwaitedChannelClient)()),{channelClientPromise:s,isInit:!0}),t.clearAwaitedChannelClient=()=>{s=null},t.getChannelClient=async()=>s||(async()=>{if(!c){try{c=await i({wait:!1}),c.setDefaultAction(()=>!1)}catch(e){throw await a.Log.error('Could not find channel provider. Did you call "notifications.register()"?'),e}c.onDisconnection(()=>{c=null})}return c})()},28173:(e,t)=>{function n(e,t){let n;try{n=JSON.stringify(e)}catch(e){n=t}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.setValidationMethod=t.validateEnvironment=t.safeStringify=t.sanitizeEventType=t.sanitizeFunction=void 0,t.sanitizeFunction=function(e){if("function"!=typeof e)throw new Error(`Invalid argument passed: ${n(e,"The provided value")} is not a valid function`);return e},t.sanitizeEventType=function(e){if("notification-action"===e||"notification-created"===e||"notification-toast-dismissed"===e||"notification-closed"===e||"notifications-count-changed"===e||"notification-form-submitted"===e||"notification-reminder-created"===e||"notification-reminder-removed"===e||"notification-form-values-changed"===e||"notification-sound-toggled"===e)return e;throw new Error(`Invalid argument passed: ${n(e,"The provided event type")} is not a valid Notifications event type`)},t.safeStringify=n,t.validateEnvironment=()=>{throw new Error("fin is not defined. The openfin-notifications module is only intended for use in an OpenFin application.")},t.setValidationMethod=e=>{t.validateEnvironment=e}},33657:function(e,t,n){var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getEventRouter=t.eventEmitter=t.EventRouter=void 0;const a=n(37007),o=n(43816),i=n(59603);class s{constructor(e){this._emitterProviders={},this._deserializers={},this._defaultEmitter=e}registerEmitterProvider(e,t){this._emitterProviders[e]=t}registerDeserializer(e,t){this._deserializers[e]=t}dispatchEvent(e){const{type:t,target:n}=e,a=r(e,["type","target"]);let s;if(!n)throw new Error("Invalid event, no target specified");if("default"===n)s=this._defaultEmitter;else{if(!this._emitterProviders[n.type])throw new Error(`Invalid target, no provider registered for '${n.type}'`);s=this._emitterProviders[n.type](n.id)}const c=Object.assign({type:t},a),l=this._deserializers[t];l?s.emit(t,l(c)):"notification-form-submitted"===t?function(e,t){let n=!1;e.preventDefault=()=>n=!0,t.emit("notification-form-submitted",e),n||(0,o.tryServiceDispatch)(i.APITopic.SET_FORM_STATUS_OPTIONS,{formStatus:"submitted",_notificationId:e.notification.id})}(c,s):s.emit(t,c)}}let c;t.EventRouter=s,t.eventEmitter=new a.EventEmitter,t.getEventRouter=function(){return c||(c=new s(t.eventEmitter)),c}},33713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetType=t.TimeWidgetType=t.DateWidgetType=t.RadioGroupWidgetType=t.CheckboxGroupWidgetType=t.BooleanWidgetType=t.NumberWidgetType=t.StringWidgetType=void 0,t.StringWidgetType={Text:"Text",Dropdown:"Dropdown"},t.NumberWidgetType={Number:"Number"},t.BooleanWidgetType={Toggle:"Toggle",Checkbox:"Checkbox"},t.CheckboxGroupWidgetType={CheckboxGroup:"CheckboxGroup"},t.RadioGroupWidgetType={RadioGroup:"RadioGroup"},t.DateWidgetType={Date:"Date"},t.TimeWidgetType={Time:"Time"},t.WidgetType=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.StringWidgetType),t.NumberWidgetType),t.BooleanWidgetType),t.CheckboxGroupWidgetType),t.RadioGroupWidgetType),t.DateWidgetType),t.TimeWidgetType)},37007:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function a(o){r.once&&e.removeEventListener(t,a),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},40651:e=>{e.exports=function(e,t){for(var n=e.split("."),r=t.split("."),a=0;a<3;a++){var o=Number(n[a]),i=Number(r[a]);if(o>i)return 1;if(i>o)return-1;if(!isNaN(o)&&isNaN(i))return 1;if(isNaN(o)&&!isNaN(i))return-1}return 0}},40707:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.setAllowedOrigins=t.getUserSettingStatus=t.UserSettings=t.getNotificationsCount=t.hide=t.show=t.setDefaultPlatformShortcut=t.toggleNotificationCenter=t.clearAll=t.getAll=t.clear=t.update=t.create=t.removeEventListener=t.addEventListener=t.VERSION=t.NotificationIndicatorType=t.IndicatorColor=t.NotificationIndicatorWithCustomColor=t.NotificationIndicator=t.NotificationOptions=t.provider=t.actions=void 0;const c=n(86455),l=n(43816),u=n(59603),d=n(33657),p=o(n(46451));t.provider=p;const f=n(28173),h=n(46865);Object.defineProperty(t,"NotificationIndicator",{enumerable:!0,get:function(){return h.NotificationIndicator}}),Object.defineProperty(t,"NotificationIndicatorWithCustomColor",{enumerable:!0,get:function(){return h.NotificationIndicatorWithCustomColor}}),Object.defineProperty(t,"NotificationIndicatorType",{enumerable:!0,get:function(){return h.IndicatorType}}),Object.defineProperty(t,"IndicatorColor",{enumerable:!0,get:function(){return h.IndicatorColor}});const g=n(44415);Object.defineProperty(t,"NotificationOptions",{enumerable:!0,get:function(){return g.NotificationOptions}});const m=o(n(86455));t.actions=m,i(n(86455),t),i(n(87204),t),i(n(50295),t),i(n(68912),t),i(n(13154),t),i(n(75050),t),i(n(90512),t),t.VERSION="2.11.1";const w=(0,d.getEventRouter)();function y(e){const{notification:t}=e;return Object.assign(Object.assign({},e),{notification:Object.assign(Object.assign({},t),{date:new Date(t.date),expires:null!==t.expires?new Date(t.expires):null})})}w.registerDeserializer("notification-created",e=>y(e)),w.registerDeserializer("notification-toast-dismissed",e=>y(e)),w.registerDeserializer("notification-closed",e=>y(e)),w.registerDeserializer("notification-action",e=>{var t;const n=y(e),{controlSource:r,controlIndex:a}=n,o=s(n,["controlSource","controlIndex"]);return e.trigger===c.ActionTrigger.CONTROL?Object.assign(Object.assign({},o),{control:null===(t=e.notification[r])||void 0===t?void 0:t[a]}):o}),w.registerDeserializer("notifications-count-changed",e=>e),w.registerDeserializer("notification-reminder-created",e=>{const t=y(e),{reminderDate:n}=t,r=s(t,["reminderDate"]);return Object.assign(Object.assign({},r),{reminderDate:new Date(n)})}),w.registerDeserializer("notification-reminder-removed",e=>y(e)),w.registerDeserializer("notification-sound-toggled",e=>e),t.addEventListener=async function(e,t){(0,f.validateEnvironment)(),e=(0,f.sanitizeEventType)(e),t=(0,f.sanitizeFunction)(t);const n=d.eventEmitter.listenerCount(e);"notification-form-submitted"===e&&(t=function(e){return t=>{const n=t.notification.id;t.setFormStatus=e=>(0,l.tryServiceDispatch)(u.APITopic.SET_FORM_STATUS_OPTIONS,Object.assign(Object.assign({},e),{_notificationId:n})),e(t)}}(t)),"notification-form-values-changed"===e&&(t=function(e){return t=>{t.setErrors=e=>(0,l.tryServiceDispatch)(u.APITopic.SET_FORM_VALIDATION_ERRORS,{errors:e,notificationId:t.notification.id}),e(t)}}(t)),d.eventEmitter.addListener(e,t),0===n&&1===d.eventEmitter.listenerCount(e)&&await(0,l.tryServiceDispatch)(u.APITopic.ADD_EVENT_LISTENER,e)},t.removeEventListener=async function(e,t){(0,f.validateEnvironment)(),e=(0,f.sanitizeEventType)(e),t=(0,f.sanitizeFunction)(t),1===d.eventEmitter.listenerCount(e)&&d.eventEmitter.listeners(e)[0]===t&&await(0,l.tryServiceDispatch)(u.APITopic.REMOVE_EVENT_LISTENER,e),d.eventEmitter.removeListener(e,t)},t.create=async function(e,t){if("object"!=typeof e||null===e)throw new Error("Invalid argument passed to create: argument must be an object and must not be null");if(void 0!==e.date&&!(e.date instanceof Date))throw new Error('Invalid argument passed to create: "date" must be a valid Date object');if(void 0!==e.expires&&null!==e.expires&&!(e.expires instanceof Date))throw new Error('Invalid argument passed to create: "expires" must be null or a valid Date object');if(t&&t.reminderDate){if(!1===e.allowReminder)throw new Error('You must not specify a reminder date for a notification with "allowReminder" option set to false.');if(!(t.reminderDate instanceof Date))throw new Error('Invalid argument passed to reminder Options: "date" must a valid Date object');if(e.expires&&e.expires.getTime()<t.reminderDate.getTime())throw new Error("Expiration date must not be earlier than reminder date.")}void 0!==e.category&&null!==e.category||(e.category="default");const n=await(0,l.tryServiceDispatch)(u.APITopic.CREATE_NOTIFICATION,Object.assign(Object.assign({},e),{date:e.date&&e.date.valueOf(),expires:e.expires&&e.expires.valueOf(),reminder:(null==t?void 0:t.reminderDate)&&t.reminderDate.valueOf()}));return Object.assign(Object.assign({},n),{date:new Date(n.date),expires:null!==n.expires?new Date(n.expires):null})},t.update=async function(e){if("object"!=typeof e||null===e)throw new Error("Invalid argument passed to create: argument must be an object and must not be null");if(!e.id)throw new Error('Invalid argument passed to create: "id" must be Id of previously created Notification');const t=await(0,l.tryServiceDispatch)(u.APITopic.UPDATE_NOTIFICATION,Object.assign({},e));return Object.assign({},t)},t.clear=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.CLEAR_NOTIFICATION,{id:e})},t.getAll=async function(){return(await(0,l.tryServiceDispatch)(u.APITopic.GET_APP_NOTIFICATIONS,void 0)).map(e=>Object.assign(Object.assign({},e),{indicator:e.indicator||null,date:new Date(e.date),expires:null!==e.expires?new Date(e.expires):null}))},t.clearAll=async function(){return(0,l.tryServiceDispatch)(u.APITopic.CLEAR_APP_NOTIFICATIONS,void 0)},t.toggleNotificationCenter=async function(){return(0,l.tryServiceDispatch)(u.APITopic.TOGGLE_NOTIFICATION_CENTER,void 0)},t.setDefaultPlatformShortcut=function(e){return(0,l.tryServiceDispatch)(u.APITopic.SET_DEFAULT_PLATFORM_SHORTCUT,e)},t.show=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.SHOW_NOTIFICATION_CENTER,e)},t.hide=async function(){return(0,l.tryServiceDispatch)(u.APITopic.HIDE_NOTIFICATION_CENTER,void 0)},t.getNotificationsCount=async function(){return(0,l.tryServiceDispatch)(u.APITopic.GET_NOTIFICATIONS_COUNT,void 0)},(t.UserSettings||(t.UserSettings={})).SOUND_ENABLED="soundEnabled",t.getUserSettingStatus=async function(e){return(0,l.tryServiceDispatch)(u.APITopic.GET_USER_SETTINGS_STATUS,e)},t.setAllowedOrigins=async e=>(0,l.tryServiceDispatch)(u.APITopic.SET_NOTIFICATION_SECURITY_RULE,{allowedOrigins:e})},43816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setDispatchMethod=t.tryServiceDispatch=void 0,t.tryServiceDispatch=async(e,t)=>{throw new Error("Environment is not initialized..")},t.setDispatchMethod=e=>{t.tryServiceDispatch=e}},44415:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateFragmentNames=t.PresentationTemplateFragmentNames=t.ContainerTemplateFragmentNames=t.TemplateNames=void 0,t.TemplateNames={markdown:"markdown",list:"list",custom:"custom"},t.ContainerTemplateFragmentNames={container:"container"},t.PresentationTemplateFragmentNames={text:"text",image:"image",list:"list",actionableText:"actionableText"},t.TemplateFragmentNames=Object.assign(Object.assign({},t.ContainerTemplateFragmentNames),t.PresentationTemplateFragmentNames)},46451:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isConnectedToAtLeast=t.getStatus=void 0;const a=r(n(40651)),o=n(95785),i=n(43816),s=n(59603);function c(){return(0,o.withStrictTimeout)(500,(0,i.tryServiceDispatch)(s.APITopic.GET_PROVIDER_STATUS,void 0),"").catch(()=>({connected:!1,version:null,templateAPIVersion:null}))}t.getStatus=c,t.isConnectedToAtLeast=async function(e){const t=await c();if(t.connected&&null!==t.version){const n=(0,a.default)(t.version,e);if(0===n||1===n)return!0}return!1}},46865:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.IndicatorColor=t.IndicatorType=void 0,(r=t.IndicatorType||(t.IndicatorType={})).FAILURE="failure",r.WARNING="warning",r.SUCCESS="success",(n=t.IndicatorColor||(t.IndicatorColor={})).RED="red",n.GREEN="green",n.YELLOW="yellow",n.BLUE="blue",n.PURPLE="purple",n.GRAY="gray",n.ORANGE="orange",n.MAGENTA="magenta",n.TEAL="teal"},50295:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52315:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setFinContext=t.finContext=void 0,t.setFinContext=e=>{t.finContext=e}},59603:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.APITopic=t.getChannelName=t.SERVICE_CHANNEL=t.SERVICE_IDENTITY=void 0,t.SERVICE_IDENTITY={uuid:"notifications-service",name:"notifications-service"},t.SERVICE_CHANNEL="of-notifications-service-v1",t.getChannelName=e=>e===t.SERVICE_IDENTITY.uuid?t.SERVICE_CHANNEL:`${e}-${t.SERVICE_CHANNEL}`,(n=t.APITopic||(t.APITopic={})).CREATE_NOTIFICATION="create-notification",n.UPDATE_NOTIFICATION="update-notification",n.CLEAR_NOTIFICATION="clear-notification",n.GET_APP_NOTIFICATIONS="fetch-app-notifications",n.CLEAR_APP_NOTIFICATIONS="clear-app-notifications",n.TOGGLE_NOTIFICATION_CENTER="toggle-notification-center",n.ADD_EVENT_LISTENER="add-event-listener",n.REMOVE_EVENT_LISTENER="remove-event-listener",n.GET_PROVIDER_STATUS="get-provider-status",n.GET_NOTIFICATIONS_COUNT="get-notifications-count",n.SHOW_NOTIFICATION_CENTER="show-notification-center",n.HIDE_NOTIFICATION_CENTER="hide-notification-center",n.REGISTER_PLATFORM="register-notifications-platform",n.DEREGISTER_PLATFORM="deregister-notifications-platform",n.SET_FORM_STATUS_OPTIONS="set-form-status-options",n.SET_FORM_VALIDATION_ERRORS="set-form-validation-errors",n.GET_USER_SETTINGS_STATUS="get-user-settings-status",n.SET_DEFAULT_PLATFORM_SHORTCUT="set-default-platform-shortcut",n.SET_NOTIFICATION_SECURITY_RULE="set-notification-security-rule"},68912:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(93955),t),a(n(33713),t)},71474:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75762:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;const r=n(52315);class a{static async error(e){try{const t=a.getPrefixedMessage(e);console.error(t),await r.finContext.System.log("error",t)}catch(e){a.handleError(e,"Failed to log error")}}static async warn(e){try{const t=a.getPrefixedMessage(e);console.warn(t),await r.finContext.System.log("warning",t)}catch(e){a.handleError(e,"Failed to log warning")}}static async info(e){try{const t=a.getPrefixedMessage(e);console.info(t),await r.finContext.System.log("info",t)}catch(e){a.handleError(e,"Failed to log info")}}static getPrefixedMessage(e){return`${a.LOG_PREFIX} ${e}`}static handleError(e,t){e instanceof Error?console.error(`${t} - ${e.name}: ${e.message}`):console.error(`${t} - ${JSON.stringify(e)}`)}}t.Log=a,a.LOG_PREFIX="[openfin-notifications]"},78364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},80664:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsRegistration=t.register=void 0;const o=n(52315),i=n(86308),s=n(43816),c=n(28173);"undefined"!=typeof fin&&(0,o.setFinContext)(fin),(0,c.setValidationMethod)(i.defaultValidateEnvironment),(0,s.setDispatchMethod)(i.defaultDispatch),a(n(40707),t);var l=n(5879);Object.defineProperty(t,"register",{enumerable:!0,get:function(){return l.register}}),Object.defineProperty(t,"NotificationsRegistration",{enumerable:!0,get:function(){return l.NotificationsRegistration}})},86308:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultValidateEnvironment=t.defaultDispatch=void 0;const r=n(27167),a=n(52315);t.defaultDispatch=async function(e,t){return(await(0,r.getChannelClient)()).dispatch(e,t)},t.defaultValidateEnvironment=function(){if(void 0===a.finContext)throw new Error("fin is not defined. The openfin-notifications module is only intended for use in an OpenFin application.")}},86455:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionBodyClickType=t.ActionNoopType=t.ActionTrigger=void 0,(n=t.ActionTrigger||(t.ActionTrigger={})).CONTROL="control",n.SELECT="select",n.CLOSE="close",n.EXPIRE="expire",n.PROGRAMMATIC="programmatic",(t.ActionNoopType||(t.ActionNoopType={})).EVENT_DISMISS="event_dismiss",(t.ActionBodyClickType||(t.ActionBodyClickType={})).DISMISS_EVENT="dismiss_event"},87204:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},90512:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(78364),t),a(n(71474),t),a(n(44415),t),a(n(15915),t)},93955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldType=void 0,t.FieldType={string:"string",number:"number",boolean:"boolean",date:"date",checkboxGroup:"checkboxGroup",radioGroup:"radioGroup",time:"time"}},95785:(e,t,n)=>{function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(22777)),r(n(3089))}},t={},function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(80664);var e,t})},72:(e,t,n)=>{var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return u.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||i.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,o,i,s,c,l=0,u=!1,d=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=a;return r=a=void 0,l=t,i=e.apply(o,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function b(){var e=h();if(v(e))return k(e);s=setTimeout(b,function(e){var n=t-(e-c);return d?f(n,o-(e-l)):n}(e))}function k(e){return s=void 0,w&&r?y(e):(r=a=void 0,i)}function S(){var e=h(),n=v(e);if(r=arguments,a=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(b,t),u?y(e):i}(c);if(d)return s=setTimeout(b,t),y(c)}return void 0===s&&(s=setTimeout(b,t)),i}return t=m(t)||0,g(n)&&(u=!!n.leading,o=(d="maxWait"in n)?p(m(n.maxWait)||0,t):o,w="trailing"in n?!!n.trailing:w),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},S.flush=function(){return void 0===s?i:k(h())},S}},81:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(b[e])e=b[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(D(r.r)&&D(r.g)&&D(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):D(r.h)&&D(r.s)&&D(r.v)?(l=I(r.s),u=I(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):D(r.h)&&D(r.s)&&D(r.l)&&(l=I(r.s),d=I(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[_(A(r)),_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function w(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function v(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(A(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(v,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:I(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var b=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(b);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function x(e){return parseInt(e,16)}function _(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function A(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return x(e)/255}var T,M,R,O=(M="[\\s|\\(]+("+(T="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",R="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",{CSS_UNIT:new RegExp(T),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function D(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},978:(e,t,r)=>{r.d(t,{Nt:()=>G,Ag:()=>z});var a={};r.r(a),r.d(a,{getItem:()=>N,removeItem:()=>L,setItem:()=>F});var o=r(675),i=r(723);r(181);var s=r(70);const c=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise(e=>setTimeout(e,t));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch(e=>{throw console.error("makeDebouncedFunc",e),e}).finally(()=>{r=void 0}),r)};var l;!function(e){e.Top="top",e.Below="below"}(l||(l={}));const u=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};async function d(e,t,n,r,a,o){const i=!!e&&(0,s.Iq)(e),c=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,o);if(r===l.Below){if(!i||await u(i)){const e=i?(await(0,s.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,s.V1)(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:(0,s.V1)(c).left-t/2,top:a?c.bottom-128:c.bottom+12,width:t,height:n}}if(!i||await u(i)){const e=i?(await(0,s.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,s.V1)(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:(0,s.V1)(c).left-t/2,top:c.top+20,width:t,height:n}}c(async function(e,t,n,r,a){const o=t.getBoundingClientRect(),i=await d(e,o.width,o.height,n,r,a);if(0===i.width||0===i.height)return;const c=(0,s.Tv)();await c.setBounds(i),await c.show();const l=setTimeout(()=>c.close(),r?5e3:3e3),u=()=>{clearTimeout(l),c.close()};if(e){const t=(0,s.Iq)(e);t.on("bounds-changing",()=>u()),t.on("blurred",()=>u()),t.on("maximized",()=>u()),t.on("minimized",()=>u()),t.on("restored",()=>u())}},10),r(277),r(957);var p=r(438);const f=n(72);var h,g=r.n(f);!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(h||(h={}));const m=h;let w;async function y(){return w||(w=await fin.System.getMachineId()),w}var v=r(333);const b=async e=>({...e,layoutDetails:{machineId:await y(),machineName:localStorage.getItem(m.MachineName)??"unknown"}});var k=r(79),S=r(786),C=r(102);const P=new Map,x=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return r=n,P.has(r)||P.set(r,(0,C.A)(r)),P.get(r)();var r};var _,I,A,E,T;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(_||(_={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(I||(I={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(A||(A={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(E||(E={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(T||(T={}));const M={..._,...I,...T},R=(0,C.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),O=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await R()).dispatch(E.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await R()).dispatch(E.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await R()).dispatch(E.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await R()).dispatch(E.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await R()).dispatch(E.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetPagesForWindow,e),getPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>G().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await(0,k.bW)(e),a={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(k.OF.AddPage,a)},removePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>G().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await(0,k.bW)(e),a=(await r.dispatch(k.OF.GetAllAttachedPages,void 0)).find(({pageId:e})=>e===n);if(!a)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);a.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[a],insertionIndex:t.index};return r.dispatch(k.OF.AttachPagesToWindow,o)},setActivePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,k.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,k.bW)(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await(0,k.bW)(e),(await x(e)).dispatch(M.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await x(e)).dispatch(M.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await(0,k.bW)(e);return t.identity=e,n.dispatch(k.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,k.bW)(e)).dispatch(k.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,k.bW)(e)).dispatch(k.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,k.bW)(e)).dispatch(k.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,k.bW)(e)).dispatch(k.OF.HandleRequestNavigationInternal,t)}),D=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>O(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${(0,v.N)()}`;return S.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",()=>{S.A.markAndMeasure("browser-window-shown",e)})})(r),await(0,k.bW)(e);const a=await t.createWindow(n);return(e=>{S.A.markAndMeasure("browser-window-started",e)})(r),O(a.identity)},getAllAttachedPages:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>(await(0,k.bW)(e),(await(0,s.Io)()).map(e=>O(e.identity))),getUniquePageTitle:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,k.bW)(e)).dispatch(k.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetPageByViewIdentity,t)}},B=e=>({createPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetSavedPage,t),getPages:async t=>(await(0,k.bW)(e)).dispatch(k.OF.GetSavedPages,t),savePage:async t=>(await(0,k.bW)(e)).dispatch(k.OF.SavePage,t),createWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=G(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await(0,k.N)(e)).dispatch(k.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetSavedWorkspaces,t),saveWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,k.N)(e)).dispatch(k.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,k.N)(e)).dispatch(k.OF.SaveDockProviderConfig,t)});var W;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(W||(W={})),(0,C.A)("of-workspace-notifications-sync"),r(695);const F=(e,t)=>{localStorage.setItem(`${i.$h}-${e}`,t)},N=e=>localStorage.getItem(`${i.$h}-${e}`),L=e=>localStorage.removeItem(`${i.$h}-${e}`),$=o.qT.System,U=e=>Object.entries(e).reduce((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`,""),j=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(m.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(m.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(m.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=U({...e,...j(e,"light")}),this.darkPaletteVars=U({...t,...j(t,"dark")})}}setScheme(e){this.providerStorage.setItem(m.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(m.SelectedColorScheme)&&this.providerStorage.setItem(m.SelectedColorScheme,$),this.providerStorage.getItem(m.SelectedColorScheme)}}(a);const V=e=>({getThemes:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetSelectedScheme,void 0)}),z=e=>{const t=fin.Platform.wrapSync(e);let n;const r=Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then(e=>e),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:i.$h,name:i.vL,entityType:i.fT||"unknown"}),(await(0,k.N)(e)).dispatch(k.OF.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await(0,k.N)(e),a={actionId:t,payload:{...n,callerType:n.callerType||o.vc.API}};return r.dispatch(k.OF.InvokeCustomActionInternal,a)},_requestQuitPlatformDialog:async t=>(await(0,k.N)(e)).dispatch(k.OF.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await(0,k.N)(e)).dispatch(k.OF.ApplyWorkspace,{...t,options:n}),restoreLastSavedWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetLanguage),_getLanguageResources:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await(0,k.KZ)(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await(0,k.N)(e)).dispatch(k.OF.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,k.N)(e)).dispatch(k.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,k.N)(e)).dispatch(k.OF.FocusAndExpandSearchInternal),Theme:V(e),Browser:D(e),Storage:B(e)});return r},G=()=>z(fin.me.identity),H=(e,t)=>e.content?{...e,content:e.content.map(e=>H(e,t))}:{...e,componentState:t(e.componentState)},q=e=>({...e,name:void 0}),K=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach(e=>{if("component"===e.type)return t.push(e.componentState);const n=K(e.content);t.push(...n)}),t};new Map,new Map;const J=(g()(async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?K(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&G().Browser.wrapSync(s.$p).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=G().Browser.wrapSync(s.$p);if("singleView"!==e.attachedPageType){const r=await(async e=>{const t=await(async(e,t)=>({pageId:(0,v.N)(),title:e,layout:await b(t),isReadOnly:!1}))(e.title,(e=>{const t={...e};return H(t,q)})(e.layout));return e.panels&&(t.panels=e.panels.map(e=>({...e,viewOptions:q(e.viewOptions)}))),{...e,...t}})(e),a=await G().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=(e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:r,dimensions:a}=n,o=await(async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType})(e);await t.replace({...n,settings:{...r,hasHeaders:!0,reorderEnabled:!0},dimensions:{...a,headerHeight:o?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}})({...s.$p,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}},50,{leading:!1,trailing:!0}),n(434),n(232));var Y,Z;r.n(J)().t,new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise(e=>{this.locked?this.queue.push(e):(this.locked=!0,e())})}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}},new Map,(()=>{const e={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};e.workspacePlatform||(e.workspacePlatform={}),e.workspacePlatform._internalDeferShowOptions={setAsForeground:!1,deferShowEnabled:!0,autoShow:e.workspacePlatform?._internalAutoShow||e.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===e.autoShow||e.autoShow},e.autoShow=!1})(),new Map,r(523),s.Q.BrowserMenu,function(e,t){t&&t(t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach(e=>e(...r))})}(new Map,e=>i.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},"window.menu",e)),c(()=>(0,p.v1)().getChildWindows(),500),new Map,new Map,g()(async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===s.Q.BrowserMenu||r.identity.name===s.Q.BrowserSaveMenu?t=r:await(0,s.hb)(r.identity)&&(n=!0),n)break;!n&&t&&t.close()},100,{leading:!1,trailing:!0}),function(e){e.Save="Save",e.SaveAs="SaveAs"}(Y||(Y={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(Z||(Z={}));const Q=n(396),X=e=>e+"-"+fin.me.uuid,ee=(e,t)=>{const n=i.AT&&i.cI&&new Q.Dexie(e);return n&&n.version(.1).stores({[t]:""}),n},te=(e,t)=>{const n=ee(X(e),t),r=ee(e,t);if(!n||!r)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,n)=>{const r=N(m.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,F(m.HasMovedStore,JSON.stringify(a));const o=await e[n].toArray();await t[n].bulkPut(o)})(r,n,e),n},ne="visited-sites",re="removed-tab-stack",ae=(i.AT&&i.cI&&te("openfin-home-pages","pages"),i.AT&&i.cI&&new Q.Dexie(X("openfin-enterprise-site-history")));ae&&ae.version(.1).stores({[ne]:"id, url"});const oe=i.AT&&i.cI&&new Q.Dexie(X("openfin-enterprise-tab-history"));var ie,se;oe&&oe.version(.1).stores({[re]:""}),function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(ie||(ie={})),ie.Separator,function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(se||(se={})),(0,C.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`);const ce="dock-provider-configs",le=i.AT&&i.cI&&new Q.Dexie(X("dock-provider-configs"));le&&le.version(.1).stores({[ce]:""}),i.AT&&i.cI&&te("openfin-workspace-platform-workspaces","workspaces"),r(250),s.$p.uuid,s.Q.BrowserAddressSearchPrefix,r(179)},675:(e,t,n)=>{var r,a,o,i,s,c,l,u,d,p,f,h;n.d(t,{qT:()=>o,vc:()=>f}),n(179),n(250),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(r||(r={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(a||(a={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(l||(l={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(u||(u={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(d||(d={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(f||(f={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(h||(h={}))},129:()=>{var e,t,n;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(n||(n={}))},600:(e,t,n)=>{var r;!function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(r||(r={}))},872:(e,t,n)=>{var r,a,o;!function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(a||(a={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,n)=>{n(129),n(872),n(710),n(184),n(600)},710:(e,t,n)=>{var r,a;!function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(r||(r={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(a||(a={}))},184:(e,t,n)=>{var r;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(r||(r={}))},250:(e,t,n)=>{var r;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(r||(r={}))},79:(e,t,n)=>{var r;n.d(t,{KZ:()=>o,N:()=>i,OF:()=>r,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(r||(r={}));const a=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await a(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},i=async e=>(await o(e),a(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return a(e)}},695:(e,t,n)=>{var r=n(102),a=(n(723),n(70),n(905));(0,r.A)("__of_workspace_protocol__"),(0,r.A)(a.BT)},905:(e,t,n)=>{n.d(t,{BT:()=>r});const r="__search-openfin-browser-home-topic__";var a,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},957:(e,t,n)=>{n.d(t,{qq:()=>v});var r=n(847),a=n(898),o=n(70),i=n(978),s=(n(675),n(877)),c=n.n(s),l=n(67),u=n.n(l);const d={light:{symbol:u()?.src||""},dark:{symbol:c()?.src||""}};n(695),n(79);const p={[r.Palette.brandPrimary]:"#0A76D3",[r.Palette.statusSuccess]:r.Color.functional1,[r.Palette.statusWarning]:r.Color.functional10,[r.Palette.statusCritical]:r.Color.functional7,[r.Palette.statusActive]:r.Color.functional3,[r.Palette.contentBackground1]:"#0A76D3",[r.Palette.contentBackground2]:"#000000",[r.Palette.contentBackground3]:"#000000",[r.Palette.contentBackground4]:"#000000",[r.Palette.contentBackground5]:"#000000"},f={...p,[r.Palette.background1]:r.Color.white,[r.Palette.background2]:r.Color.lightGray1,[r.Palette.background3]:r.Color.lightGray2,[r.Palette.background4]:r.Color.lightGray3,[r.Palette.background5]:r.Color.lightGray4,[r.Palette.background6]:r.Color.lightGray5,[r.Palette.brandSecondary]:r.Color.lightGray4,[r.Palette.inputBackground]:r.Color.lightGray3,[r.Palette.inputColor]:r.Color.darkGray5,[r.Palette.inputPlaceholder]:r.Color.darkGray2,[r.Palette.inputDisabled]:r.Color.neutralGray,[r.Palette.inputFocused]:r.Color.lightGray5,[r.Palette.inputBorder]:r.Color.neutralGray,[r.Palette.textDefault]:r.Color.darkGray5,[r.Palette.textHelp]:r.Color.darkGray3,[r.Palette.textInactive]:r.Color.neutralGray},h={...p,[r.Palette.background1]:r.Color.darkGray6,[r.Palette.background2]:r.Color.darkGray5,[r.Palette.background3]:r.Color.darkGray4,[r.Palette.background4]:r.Color.darkGray3,[r.Palette.background5]:r.Color.darkGray2,[r.Palette.background6]:r.Color.darkGray1,[r.Palette.brandSecondary]:r.Color.darkGray2,[r.Palette.inputBackground]:r.Color.darkGray1,[r.Palette.inputColor]:r.Color.white,[r.Palette.inputPlaceholder]:r.Color.lightGray5,[r.Palette.inputDisabled]:r.Color.neutralGray,[r.Palette.inputFocused]:r.Color.lightGray5,[r.Palette.inputBorder]:r.Color.neutralGray,[r.Palette.textDefault]:r.Color.white,[r.Palette.textHelp]:r.Color.lightGray5,[r.Palette.textInactive]:r.Color.neutralGray},g=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...f,brandPrimary:"#0A76D3",brandSecondary:r.Color.lightGray4,backgroundPrimary:r.Color.darkGray5},dark:{...h,brandPrimary:"#0A76D3",brandSecondary:r.Color.darkGray2,backgroundPrimary:r.Color.darkGray5}}}],m=e=>{const{background:t,foreground:n}=e;return{background:t,foreground:n??"#FFFFFF"}},w=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||d[t].symbol}}),y=e=>{const{light:t,dark:n}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},o=(0,a.KD)(h,n),i=(0,a.KD)(f,t),s=((e,t)=>{const n={...e},r={...t};let o=t.backgroundPrimary?(0,a.pu)(t.backgroundPrimary,!0):{},i=e.backgroundPrimary?(0,a.pu)(e.backgroundPrimary):{};return o={...o,...r},i={...i,...n},{light:{...t,...o},dark:{...e,...i}}})(n,t),c={...(0,r.createTheme)({...o,...s?.dark}),brand:w(e,"dark")},l={...(0,r.createTheme)({...i,...s?.light}),brand:w(e,"light")},{light:u,dark:d}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const n={},r={};return t.forEach(t=>{const a=e.notificationIndicatorColors[t];"background"in a?(n[t]=m(a),r[t]=m(a)):(n[t]=m(a.dark??a.light),r[t]=m(a.light??a.dark))}),{light:r,dark:n}}return{light:null,dark:null}})(e);return c.notificationIndicatorColors=d,l.notificationIndicatorColors=u,{dark:c,light:l}},v=async e=>{const{themes:t,selectedScheme:n}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;return t&&e.uuid===o.$p.uuid?t:{themes:await(0,i.Ag)(e).Theme.getThemes(),selectedScheme:await(0,i.Ag)(e).Theme.getSelectedScheme()}})(e);var r,a;return(r=t?.length?t:g,a=n,r.map(e=>{const t="palettes"in e?e.default:"dark",{light:n,dark:r}=y(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:r,light:n},defaultScheme:a??t}}))[0]}},438:(e,t,n)=>{n.d(t,{MW:()=>r,v1:()=>c});var r,a,o=n(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(a||(a={}));const i={uuid:o.$h},s=(r.Workspace,e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),c=()=>s(i)},102:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(723);const a=r.YY&&"complete"!==document.readyState&&new Promise(e=>document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&e()}));function o(e){let t;const n=new Set;return()=>{if(!r.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await a;const o={clientAPIVersion:r.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection(async()=>{n.forEach(e=>e()),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0}),i})().then(e=>(e.addDisconnectionListener=e=>{n.add(e)},e)).catch(n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)})),t}}},723:(e,t,n)=>{var r;n.d(t,{$h:()=>c,AT:()=>i,YY:()=>o,cI:()=>a,et:()=>p,fT:()=>u,vL:()=>l}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(r||(r={}));const a="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:r.Local,c=a&&fin.me.uuid,l=a&&fin.me.name,u=a&&fin.me.entityType,d=(r.Local,r.Dev,r.Staging,r.Prod,e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e),p=(d("https://workspace.openfin.co/workspace/21.0.16"),d("https://workspace.openfin.co/workspace/21.0.16"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&d(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&d(WORKSPACE_DOCS_CLIENT_URL),"21.0.16");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},786:(e,t,n)=>{n.d(t,{A:()=>a});const r="of-workspace-",a=new class{mark(e){performance.mark(`${r}${e}`)}markStart(e){performance.mark(`${r}${e}-start`)}markEnd(e){performance.mark(`${r}${e}-end`)}markEndAndMeasure(e){performance.mark(`${r}${e}-end`);try{return performance.measure(`${r}${e}`,`${r}${e}-start`,`${r}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${r}${e}`);try{return performance.measure(`${r}${e}-measure`,`${r}${t}-start`,`${r}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter(e=>e.name.startsWith(r))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map(e=>({name:e.name.replace(`${r}`,"").replace("-measure",""),duration:e.duration}))}}},181:(e,t,n)=>{var r,a,o;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(r||(r={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(a||(a={})),function(e){e.Search="search"}(o||(o={}))},523:(e,t,n)=>{var r;n(723),function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(r||(r={}))},898:(e,t,n)=>{n.d(t,{KD:()=>i,pu:()=>o});const r=e=>e.replace(/[^\d,]/g,"").split(","),a=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,n=e[1]/255,r=e[2]/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=o-a;let s=0,c=0,l=0;return s=0===i?0:o===t?(n-r)/i%6:o===n?(r-t)/i+2:(t-n)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(o+a)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},o=(e,t=!1)=>{const n=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let n;if(t.includes("rgb")){const e=r(t);e.length>3&&e.pop(),n=a(e).hue}if(t.includes("#")){const e=(e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,n=0,r=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,r=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,r=`0x${e[5]}${e[6]}`}return[+t,+n,+r]})(t);n=a(e).hue}t.includes("hsl")&&(n=r(t)[0]);const o=n?.toString();if(!o)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return o})(e);return t?{background1:`hsla(${n}, 0%, 100%, 1)`,background2:`hsla(${n}, 67%, 99%, 1)`,background3:`hsla(${n}, 26%, 96%, 1)`,background4:`hsla(${n}, 15%, 94%, 1)`,background5:`hsla(${n}, 10%, 88%, 1)`,background6:`hsla(${n}, 80%, 80%, 1)`}:{background1:`hsla(${n}, 8%, 7%, 1)`,background2:`hsla(${n}, 8%, 13%, 1)`,background3:`hsla(${n}, 9%, 15%, 1)`,background4:`hsla(${n}, 6%, 23%, 1)`,background5:`hsla(${n}, 21%, 28%, 1)`,background6:`hsla(${n}, 5%, 51%, 1)`}},i=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{n[r]=t[r]?t[r]:e[r]}),n}},277:(e,t,n)=>{n.d(t,{os:()=>o});var r,a=n(723);n(70),n(978),function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(r||(r={}));const o=e=>{(async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||a.et,componentName:e,componentVersion:t.componentVersion||a.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})})(r.Notification,e)};new Map},333:(e,t,n)=>{function r(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}n.d(t,{N:()=>r})},70:(e,t,n)=>{n.d(t,{$p:()=>c,Io:()=>d,Iq:()=>s,Q:()=>r,Tv:()=>l,V1:()=>i,hb:()=>u,ur:()=>p});var r,a=n(438),o=n(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(r||(r={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function s(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:o.vL,uuid:o.$h};function l(){return s(c)}r.Home,a.MW.Workspace,r.Dock,a.MW.Workspace,r.Storefront,a.MW.Workspace,a.MW.Workspace,a.MW.Workspace;const u=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function d(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map(async e=>u(e.identity)));return e.filter((e,n)=>t[n])}async function p(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce((t,n)=>{const r=function(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}(e,n);return r>t.percentage?{percentage:r,monitor:n}:t},{percentage:0,monitor:t.primaryMonitor}).monitor}},432:e=>{e.exports=n(63)}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{deregister:()=>f,register:()=>p});var e=a(432),t=a(277),n=a(957),r={};for(const t in e)["default","register","deregister"].indexOf(t)<0&&(r[t]=()=>e[t]);a.d(o,r);const i=async t=>{if(t instanceof Error){let n=t.message;if(t.message.includes("register-notifications-platform")){if(n="Notifications platforms are not supported in versions below 1.13.0, try updating your notifications-service.",e?.provider?.getStatus){const{version:t}=await e.provider.getStatus();n+=` Your version is: ${t}`}return n}return t.message}return"string"==typeof t?t:"unknown error registering Notifications"},s=async e=>{if(e instanceof Error&&e.message.includes("register-notifications-platform"))throw new Error(await i(e));throw e},c="of-notifications-service-v1",l="of-workspace-notifications-sync",u={channelName:l},d=async(e,t)=>{const n=t.notificationsVersion.startsWith("2")?u.channelName:c,r=await fin.InterApplicationBus.Channel.connect(n,{wait:!1}),a=t.notificationsVersion.startsWith("2")?"register-platform":"register-notifications-platform";await r.dispatch(a,e)};async function p(r){try{const a=r&&"notificationsCustomManifest"in r?{customManifest:r.notificationsCustomManifest}:void 0;a&&a.customManifest?.manifestUuid&&(u.channelName=`${a.customManifest.manifestUuid}-${l}`);const o=await e.register(a);if(r){const e=await(0,n.qq)(fin.me.identity),t="notificationsPlatformOptions"in r?r.notificationsPlatformOptions:r;await d({theme:e.theme,scheme:e.defaultScheme,...t,workspacePlatform:{identity:fin.Platform.getCurrentSync().identity,analytics:{isSupported:!0}}},{notificationsVersion:o.notificationsVersion})}return(0,t.os)({allowed:!0,apiVersion:e.VERSION,componentVersion:o.notificationsVersion}),o}catch(r){(0,t.os)({allowed:!1,rejectionCode:await i(r),apiVersion:e.VERSION}),await s(r)}}const f=async t=>{try{const{version:n}=await e.provider.getStatus();if(null===n)throw new Error("Notifications service is not currently running.");await(async(e,t)=>{const n=t.notificationsVersion.startsWith("2")?u.channelName:c,r=await fin.InterApplicationBus.Channel.connect(n,{wait:!1}),a=t.notificationsVersion.startsWith("2")?"deregister-platform":"deregister-notifications-platform";await r.dispatch(a,e)})({id:t},{notificationsVersion:n})}catch(e){await s(e)}}})(),e.exports=o})()},232:e=>{const t=e=>"string"==typeof e,n=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},r=e=>null==e?"":""+e,a=/###/g,o=e=>e&&e.indexOf("###")>-1?e.replace(a,"."):e,i=e=>!e||t(e),s=(e,n,r)=>{const a=t(n)?n.split("."):n;let s=0;for(;s<a.length-1;){if(i(e))return{};const t=o(a[s]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return i(e)?{}:{obj:e,k:o(a[s])}},c=(e,t,n)=>{const{obj:r,k:a}=s(e,t,Object);if(void 0!==r||1===t.length)return void(r[a]=n);let o=t[t.length-1],i=t.slice(0,t.length-1),c=s(e,i,Object);for(;void 0===c.obj&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),c=s(e,i,Object),c&&c.obj&&void 0!==c.obj[`${c.k}.${o}`]&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=n},l=(e,t)=>{const{obj:n,k:r}=s(e,t);if(n)return n[r]},u=(e,n,r)=>{for(const a in n)"__proto__"!==a&&"constructor"!==a&&(a in e?t(e[a])||e[a]instanceof String||t(n[a])||n[a]instanceof String?r&&(e[a]=n[a]):u(e[a],n[a],r):e[a]=n[a]);return e},d=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const f=e=>t(e)?e.replace(/[&<>"'\/]/g,e=>p[e]):e,h=[" ",",","?","!",";"],g=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let a=e;for(let e=0;e<r.length;){if(!a||"object"!=typeof a)return;let t,o="";for(let i=e;i<r.length;++i)if(i!==e&&(o+=n),o+=r[i],t=a[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&i<r.length-1)continue;e+=i-e+1;break}a=t}return a},w=e=>e&&e.replace("_","-"),y={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class v{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||y,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(t(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new v(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new v(this.logger,e)}}var b=new v;class k{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(e=>{let[t,r]=e;for(let e=0;e<r;e++)t(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(t=>{let[r,a]=t;for(let t=0;t<a;t++)r.apply(r,[e,...n])})}}class S extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator,i=void 0!==a.ignoreJSONStructure?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):t(r)&&o?s.push(...r.split(o)):s.push(r)));const c=l(this.data,s);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),!c&&i&&t(r)?m(this.data&&this.data[e]&&this.data[e][n],r,o):c}addResource(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let i=[e,t];n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split("."),r=t,t=i[1]),this.addNamespaces(t),c(this.data,i,r),a.silent||this.emit("added",e,t,n,r)}addResources(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const a in r)(t(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),r=n,n=t,t=i[1]),this.addNamespaces(t);let s=l(this.data,i)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?u(s,n,a):s={...s,...n},c(this.data,i,s),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var C={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,a){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,a))}),t}};const P={};class x extends k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{t[e]&&(n[e]=t[e])})})(0,e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=b.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,n){let r=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const i=r&&e.indexOf(r)>-1,s=!(this.options.userDefinedKeySeparator||n.keySeparator||this.options.userDefinedNsSeparator||n.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=h.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const a=g.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let o=!a.test(e);if(!o){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(o=!0)}return o})(e,r,a));if(i&&!s){const n=e.match(this.interpolator.nestingRegexp);if(n&&n.length>0)return{key:e,namespaces:t(o)?[o]:o};const i=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(a)}return{key:e,namespaces:t(o)?[o]:o}}translate(e,n,r){if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n={...n}),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const a=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:i,namespaces:s}=this.extractFromKey(e[e.length-1],n),c=s[s.length-1],l=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){const e=n.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${e}${i}`,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${e}${i}`}return a?{res:i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:i}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||i,h=d&&d.exactUsedKey||i,g=Object.prototype.toString.apply(p),m=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!t(p)&&"boolean"!=typeof p&&"number"!=typeof p;if(!(w&&p&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(g)<0)||t(m)&&Array.isArray(p))if(w&&t(m)&&Array.isArray(p))p=p.join(m),p&&(p=this.extendTranslation(p,e,n,r));else{let a=!1,s=!1;const u=void 0!==n.count&&!t(n.count),f=x.hasDefaultValue(n),h=u?this.pluralResolver.getSuffix(l,n.count,n):"",g=n.ordinal&&u?this.pluralResolver.getSuffix(l,n.count,{ordinal:!1}):"",m=u&&!n.ordinal&&0===n.count&&this.pluralResolver.shouldUseIntlApi(),w=m&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${h}`]||n[`defaultValue${g}`]||n.defaultValue;!this.isValidLookup(p)&&f&&(a=!0,p=w),this.isValidLookup(p)||(s=!0,p=i);const y=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:p,v=f&&w!==p&&this.options.updateMissing;if(s||a||v){if(this.logger.log(v?"updateKey":"missingKey",l,c,i,v?w:p),o){const e=this.resolve(i,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const r=(e,t,r)=>{const a=f&&r!==p?r:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,t,a,v,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,c,t,a,v,n),this.emit("missingKey",e,c,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,n);m&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{r([e],i+t,n[`defaultValue${t}`]||w)})}):r(e,i,w))}p=this.extendTranslation(p,e,n,d,r),s&&p===i&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${i}`),(s||a)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${i}`:i,a?p:void 0):this.options.parseMissingKeyHandler(p))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${i} (${this.language})' returned an object instead of string.`;return a?(d.res=e,d.usedParams=this.getUsedParamsDetails(n),d):e}if(o){const e=Array.isArray(p),t=e?[]:{},r=e?h:f;for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e)){const a=`${r}${o}${e}`;t[e]=this.translate(a,{...n,joinArrays:!1,ns:s}),t[e]===a&&(t[e]=p[e])}p=t}}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const s=t(e)&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(s){const t=e.match(this.interpolator.nestingRegexp);c=t&&t.length}let l=r.replace&&!t(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,r.lng||this.language||a.usedLng,r),s){const t=e.match(this.interpolator.nestingRegexp);c<(t&&t.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&a&&a.res&&(r.lng=this.language||a.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o&&o[0]===t[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${n[0]}`),null):i.translate(...t,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,c=t(s)?[s]:s;return null!=e&&c&&c.length&&!1!==r.applyPostProcessor&&(e=C.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n,r,a,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(e,s),l=c.key;r=l;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=void 0!==s.count&&!t(s.count),p=d&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&(t(s.context)||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);u.forEach(e=>{this.isValidLookup(n)||(i=e,!P[`${h[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(i)&&(P[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(t=>{if(this.isValidLookup(n))return;o=t;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,t,e,s);else{let e;d&&(e=this.pluralResolver.getSuffix(t,s.count,s));const n=`${this.options.pluralSeparator}zero`,a=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(r.push(l+e),s.ordinal&&0===e.indexOf(a)&&r.push(l+e.replace(a,this.options.pluralSeparator)),p&&r.push(l+n)),f){const t=`${l}${this.options.contextSeparator}${s.context}`;r.push(t),d&&(r.push(t+e),s.ordinal&&0===e.indexOf(a)&&r.push(t+e.replace(a,this.options.pluralSeparator)),p&&r.push(t+n))}}let i;for(;i=r.pop();)this.isValidLookup(n)||(a=i,n=this.getResource(t,e,i,s))}))})}),{res:n,usedKey:r,exactUsedKey:a,usedLng:o,usedNS:i}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!t(e.replace);let a=r?e.replace:e;if(r&&void 0!==e.count&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const e of n)delete a[e]}return a}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}const _=e=>e.charAt(0).toUpperCase()+e.slice(1);class I{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=b.create("languageUtils")}getScriptPartFromCode(e){if(!(e=w(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=w(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(t(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(e){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(e=>e.toLowerCase()):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=_(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=_(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=_(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,n){if(!e)return[];if("function"==typeof e&&(e=e(n)),t(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],o=e=>{e&&(this.isSupportedCode(e)?a.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return t(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):t(e)&&o(this.formatLanguageCode(e)),r.forEach(e=>{a.indexOf(e)<0&&o(this.formatLanguageCode(e))}),a}}let A=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],E={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const T=["v1","v2","v3"],M=["v4"],R={zero:0,one:1,two:2,few:3,many:4,other:5};class O{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=b.create("pluralResolver"),this.options.compatibilityJSON&&!M.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return A.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:E[t.fc]}})}),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const n=w("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(n,{type:r})}catch(n){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(r,t)}return this.pluralRulesCache[a]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((e,t)=>R[e]-R[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):n.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const a=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?a():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!T.includes(this.options.compatibilityJSON)}}const D=function(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,n)=>{const r=l(e,n);return void 0!==r?r:l(t,n)})(e,n,r);return!i&&o&&t(r)&&(i=m(e,r,a),void 0===i&&(i=m(n,r,a))),i},B=e=>e.replace(/\$/g,"$$$$");class W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=b.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:a,prefixEscaped:o,suffix:i,suffixEscaped:s,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:p,nestingPrefixEscaped:h,nestingSuffix:g,nestingSuffixEscaped:m,nestingOptionsSeparator:w,maxReplaces:y,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:f,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=a?d(a):o||"{{",this.suffix=i?d(i):s||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=p?d(p):h||d("$t("),this.nestingSuffix=g?d(g):m||d(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=y||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,a,o){let i,s,c;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const t=D(n,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(t,void 0,a,{...o,...n,interpolationkey:e}):t}const t=e.split(this.formatSeparator),r=t.shift().trim(),i=t.join(this.formatSeparator).trim();return this.format(D(n,l,r,this.options.keySeparator,this.options.ignoreJSONStructure),i,a,{...o,...n,interpolationkey:r})};this.resetRegExp();const d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,p=o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>B(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?B(this.escape(e)):B(e)}].forEach(n=>{for(c=0;i=n.regex.exec(e);){const a=i[1].trim();if(s=u(a),void 0===s)if("function"==typeof d){const n=d(e,i,o);s=t(n)?n:""}else if(o&&Object.prototype.hasOwnProperty.call(o,a))s="";else{if(p){s=i[0];continue}this.logger.warn(`missed to pass in variable ${a} for interpolating ${e}`),s=""}else t(s)||this.useRawValueToEscape||(s=r(s));const l=n.safeValue(s);if(e=e.replace(i[0],l),p?(n.regex.lastIndex+=s.length,n.regex.lastIndex-=i[0].length):n.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let a,o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let a=`{${r[1]}`;e=r[0],a=this.interpolate(a,i);const o=a.match(/'/g),s=a.match(/"/g);(o&&o.length%2==0&&!s||s.length%2!=0)&&(a=a.replace(/'/g,'"'));try{i=JSON.parse(a),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${a}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;a=this.nestingRegexp.exec(e);){let l=[];i={...s},i=i.replace&&!t(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let u=!1;if(-1!==a[0].indexOf(this.formatSeparator)&&!/{.*}/.test(a[1])){const e=a[1].split(this.formatSeparator).map(e=>e.trim());a[1]=e.shift(),l=e,u=!0}if(o=n(c.call(this,a[1].trim(),i),i),o&&a[0]===e&&!t(o))return o;t(o)||(o=r(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),o=""),u&&(o=l.reduce((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:a[1].trim()}),o.trim())),e=e.replace(a[0],o),this.regexp.lastIndex=0}return e}}const F=e=>{const t={};return(n,r,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const i=r+JSON.stringify(o);let s=t[i];return s||(s=e(w(r),a),t[i]=s),s(n)}};class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=b.create("formatter"),this.options=e,this.formats={number:F((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:F((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:F((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:F((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:F((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=F(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(e=>e.indexOf(")")>-1)){const e=a.findIndex(e=>e.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}const o=a.reduce((e,t)=>{const{formatName:a,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),a=r.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();n[o]||(n[o]=a),"false"===a&&(n[o]=!1),"true"===a&&(n[o]=!0),isNaN(a)||(n[o]=parseInt(a,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{const i=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},s=i.locale||i.lng||r.locale||r.lng||n;t=this.formats[a](e,s,{...o,...r,...i})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${a}`),e},e);return o}}class L extends k{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=b.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const a={},o={},i={},s={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const i=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===o[i]&&(o[i]=!0):(this.state[i]=1,r=!1,void 0===o[i]&&(o[i]=!0),void 0===a[i]&&(a[i]=!0),void 0===s[t]&&(s[t]=!0)))}),r||(i[e]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const r=e.split("|"),a=r[0],o=r[1];t&&this.emit("failedLoading",a,o,t),!t&&n&&this.store.addResourceBundle(a,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const i={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:a}=s(e,t,Object);r[a]=r[a]||[],r[a].push(n)})(n.loaded,[a],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{i[e]||(i[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===i[e][t]&&(i[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",i),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:a,callback:o});this.readingCalls++;const i=(i,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&s&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*a,o)},a):o(i,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,i);try{const n=s(e,t);n&&"function"==typeof n.then?n.then(e=>i(null,e)).catch(i):i(null,n)}catch(e){i(e)}}prepareLoading(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();t(e)&&(e=this.languageUtils.toResolveHierarchy(e)),t(n)&&(n=[n]);const o=this.queueLoad(e,n,r,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],a=n[1];this.read(r,a,"read",void 0,void 0,(n,o)=>{n&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,o),this.loaded(e,n,o)})}saveMissing(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const s={...o,isUpdate:a},c=this.backend.create.bind(this.backend);if(c.length<6)try{let a;a=5===c.length?c(e,t,n,r,s):c(e,t,n,r),a&&"function"==typeof a.then?a.then(e=>i(null,e)).catch(i):i(null,a)}catch(e){i(e)}else c(e,t,n,r,i,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const $=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let n={};if("object"==typeof e[1]&&(n=e[1]),t(e[1])&&(n.defaultValue=e[1]),t(e[2])&&(n.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const t=e[3]||e[2];Object.keys(t).forEach(e=>{n[e]=t[e]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),U=e=>(t(e.ns)&&(e.ns=[e.ns]),t(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),t(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),j=()=>{};class V extends k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=U(e),this.services={},this.logger=b,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof r&&(a=r,r={}),!r.defaultNS&&!1!==r.defaultNS&&r.ns&&(t(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const o=$();this.options={...o,...this.options,...U(r)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),void 0!==r.keySeparator&&(this.options.userDefinedKeySeparator=r.keySeparator),void 0!==r.nsSeparator&&(this.options.userDefinedNsSeparator=r.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?b.init(i(this.modules.logger),this.options):b.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=N);const n=new I(this.options);this.store=new S(this.options.resources,this.options);const r=this.services;r.logger=b,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new O(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format||(r.formatter=i(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new W(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new L(i(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)}),this.modules.languageDetector&&(r.languageDetector=i(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=i(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new x(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit(t,...r)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,a||(a=j),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const s=n(),c=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(t),a(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),s}loadResources(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;const r=t(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};r?t(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload&&this.options.preload.forEach(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,r){const a=n();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=j),this.services.backendConnector.reload(e,t,e=>{a.resolve(),r(e)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&C.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,r){var a=this;this.isLanguageChangingTo=e;const o=n();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(e,t)=>{t?(i(t),this.translator.changeLanguage(t),this.isLanguageChangingTo=void 0,this.emit("languageChanged",t),this.logger.log("languageChanged",t)):this.isLanguageChangingTo=void 0,o.resolve(function(){return a.t(...arguments)}),r&&r(e,function(){return a.t(...arguments)})},c=n=>{e||n||!this.services.languageDetector||(n=[]);const r=t(n)?n:this.services.languageUtils.getBestMatchFromCodes(n);r&&(this.language||i(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(r)),this.loadResources(r,e=>{s(e,r)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e):c(this.services.languageDetector.detect()),o}getFixedT(e,n,r){var a=this;const o=function(e,t){let n;if("object"!=typeof t){for(var i=arguments.length,s=new Array(i>2?i-2:0),c=2;c<i;c++)s[c-2]=arguments[c];n=a.options.overloadTranslationOptionHandler([e,t].concat(s))}else n={...t};n.lng=n.lng||o.lng,n.lngs=n.lngs||o.lngs,n.ns=n.ns||o.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||r||o.keyPrefix);const l=a.options.keySeparator||".";let u;return u=n.keyPrefix&&Array.isArray(e)?e.map(e=>`${n.keyPrefix}${l}${e}`):n.keyPrefix?`${n.keyPrefix}${l}${e}`:e,a.t(u,n)};return t(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(n,e)||r&&!o(a,e)))}loadNamespaces(e,r){const a=n();return this.options.ns?(t(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{a.resolve(),r&&r(e)}),a):(r&&r(),Promise.resolve())}loadLanguages(e,r){const a=n();t(e)&&(e=[e]);const o=this.options.preload||[],i=e.filter(e=>o.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=o.concat(i),this.loadResources(e=>{a.resolve(),r&&r(e)}),a):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new I($());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new V(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new V(r);return void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e)),["store","services","language"].forEach(e=>{a[e]=this[e]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n&&(a.store=new S(this.store.data,r),a.services.resourceStore=a.store),a.translator=new x(a.services,r),a.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit(e,...n)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const z=V.createInstance();z.createInstance=V.createInstance,e.exports=z},303:function(e,t,n){e.exports=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,o=Object.keys,i=Array.isArray;function s(e,t){return"object"!=typeof t||o(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||a.Promise||(a.Promise=Promise);var c=Object.getPrototypeOf,l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(c(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach(function(n){f(e,n,t[n])})}var p=Object.defineProperty;function f(e,t,n,r){p(e,t,s(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function h(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor,m=[].slice;function w(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function b(e){a.setImmediate?setImmediate(e):setTimeout(e,0)}function k(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var o=k(e,t[r]);n.push(o)}return n}var i=t.indexOf(".");if(-1!==i){var s=e[t.substr(0,i)];return null==s?void 0:k(s,t.substr(i+1))}}function S(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)S(e,t[r],n[r])}else{var o,s,c=t.indexOf(".");-1!==c?(o=t.substr(0,c),""===(s=t.substr(c+1))?void 0===n?i(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n:S(c=(c=e[o])&&u(e,o)?c:e[o]={},s,n)):void 0===n?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function C(e){var t,n={};for(t in e)u(e,t)&&(n[t]=e[t]);return n}var P=[].concat;function x(e){return P.apply([],e)}var _="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return a[e]}),I=new Set(_.map(function(e){return a[e]})),A=null;function E(e){return A=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=A.get(t);if(n)return n;if(i(t)){n=[],A.set(t,n);for(var r=0,a=t.length;r<a;++r)n.push(e(t[r]))}else if(I.has(t.constructor))n=t;else{var o,s=c(t);for(o in n=s===Object.prototype?{}:Object.create(s),A.set(t,n),t)u(t,o)&&(n[o]=e(t[o]))}return n}(e),A=null,e}var T={}.toString;function M(e){return T.call(e).slice(8,-1)}var R="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",O="symbol"==typeof R?function(e){var t;return null!=e&&(t=e[R])&&t.apply(e)}:function(){return null};function D(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var B={};function W(e){var t,n,r,a;if(1===arguments.length){if(i(e))return e.slice();if(this===B&&"string"==typeof e)return[e];if(a=O(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var F="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},N=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),L={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this.name=e,this.message=t}function U(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function j(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=U(e,t)}function V(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=U(e,this.failures)}h($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),h(j).from($),h(V).from($);var z=N.reduce(function(e,t){return e[t]=t+"Error",e},{}),G=$,H=N.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=L[t]||n,this.inner=null)}return h(r).from(G),e[t]=r,e},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var q=se.reduce(function(e,t){return e[t+"Error"]=H[t],e},{}),K=N.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=H[t]),e},{});function J(){}function Y(e){return e}function Z(e,t){return null==e||e===Y?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function X(e,t){return e===J?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0!==o?o:n}}function ee(e,t){return e===J?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===J?t:function(n){var r=e.apply(this,arguments);s(n,r);var a=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Q(a,this.onsuccess):a),o&&(this.onerror=this.onerror?Q(o,this.onerror):o),void 0===r?void 0===n?void 0:n:s(r,n)}}function ne(e,t){return e===J?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===J?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}K.ModifyError=j,K.DexieError=$,K.BulkError=V;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(e){ae=e}var ie={},se=(_="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,c(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,c(t),e]}(),_[0]),ce=(N=_[1],_=_[2],N=N&&N.then,se&&se.constructor),le=!!_,ue=function(e,t){ye.push([e,t]),pe&&(queueMicrotask(Ae),pe=!1)},de=!0,pe=!0,fe=[],he=[],ge=Y,me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:J,pgp:!1,env:{},finalize:J},we=me,ye=[],ve=0,be=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=we;if("function"!=typeof e){if(e!==ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Pe(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ee();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof ke?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,xe(t)),r&&Te()}},Pe.bind(null,t))}catch(n){Pe(t,n)}}(this,e)}var Se={get:function(){var e=we,t=Ne;function n(n,r){var a=this,o=!e.global&&(e!==we||t!==Ne),i=o&&!je(),s=new ke(function(t,s){_e(a,new Ce(Ke(n,e,o,i),Ke(r,e,o,i),t,s,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=ie,n},set:function(e){f(this,"then",e&&e.prototype===ie?Se:{get:function(){return e},set:Se.set})}};function Ce(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function Pe(e,t){var n,r;he.push(t),null===e._state&&(n=e._lib&&Ee(),t=ge(t),e._state=!1,e._value=t,r=e,fe.some(function(e){return e._value===r._value})||fe.push(r),xe(e),n&&Te())}function xe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)_e(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===ve&&(++ve,ue(function(){0==--ve&&Me()},[]))}function _e(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ve,ue(Ie,[n,e,t])}else e._listeners.push(t)}function Ie(e,t,n){try{var r,a=t._value;!t._state&&he.length&&(he=[]),r=ae&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==he.indexOf(a)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--ve&&Me(),--n.psd.ref||n.psd.finalize()}}function Ae(){qe(me,function(){Ee()&&Te()})}function Ee(){var e=de;return pe=de=!1,e}function Te(){var e,t,n;do{for(;0<ye.length;)for(e=ye,ye=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<ye.length);pe=de=!0}function Me(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=be.slice(0),n=t.length;n;)t[--n]()}function Re(e){return new ke(ie,!1,e)}function Oe(e,t){var n=we;return function(){var r=Ee(),a=we;try{return Ge(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{Ge(a,!1),r&&Te()}}}d(ke.prototype,{then:Se,_then:function(e,t){_e(this,new Ce(null,null,e,t,we))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Re)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Re)(e)})},finally:function(e){return this.then(function(t){return ke.resolve(e()).then(function(){return t})},function(t){return ke.resolve(e()).then(function(){return Re(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ke(function(r,a){var o=setTimeout(function(){return a(new H.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),me.env=He(),d(ke,{all:function(){var e=W.apply(null,arguments).map(Ve);return new ke(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(a,o){return ke.resolve(a).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke(function(t,n){e.then(t,n)}):new ke(ie,!0,e)},reject:Re,race:function(){var e=W.apply(null,arguments).map(Ve);return new ke(function(t,n){e.map(function(e){return ke.resolve(e).then(t,n)})})},PSD:{get:function(){return we},set:function(e){return we=e}},totalEchoes:{get:function(){return Ne}},newPSD:$e,usePSD:qe,scheduler:{get:function(){return ue},set:function(e){ue=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new ke(function(n,r){return $e(function(t,n){var r=we;r.unhandleds=[],r.onunhandled=n,r.finalize=Q(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},be.push(function t(){e(),be.splice(be.indexOf(t),1)}),++ve,ue(function(){0==--ve&&Me()},[])},r.finalize),e()},t,n,r)})}}),ce&&(ce.allSettled&&f(ke,"allSettled",function(){var e=W.apply(null,arguments).map(Ve);return new ke(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,a){return ke.resolve(e).then(function(e){return r[a]={status:"fulfilled",value:e}},function(e){return r[a]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ce.any&&"undefined"!=typeof AggregateError&&f(ke,"any",function(){var e=W.apply(null,arguments).map(Ve);return new ke(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(e,o){return ke.resolve(e).then(function(e){return t(e)},function(e){a[o]=e,--r||n(new AggregateError(a))})})})}),ce.withResolvers&&(ke.withResolvers=ce.withResolvers));var De={awaits:0,echoes:0,id:0},Be=0,We=[],Fe=0,Ne=0,Le=0;function $e(e,t,n,r){var a=we,o=Object.create(a);return o.parent=a,o.ref=0,o.global=!1,o.id=++Le,me.env,o.env=le?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&s(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},r=qe(o,e,n,r),0===o.ref&&o.finalize(),r}function Ue(){return De.id||(De.id=++Be),++De.awaits,De.echoes+=100,De.id}function je(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=100*De.awaits,!0)}function Ve(e){return De.echoes&&e&&e.constructor===ce?(Ue(),e.then(function(e){return je(),e},function(e){return je(),Ye(e)})):e}function ze(){var e=We[We.length-1];We.pop(),Ge(e,!1)}function Ge(e,t){var n,r=we;(t?!De.echoes||Fe++&&e===we:!Fe||--Fe&&e===we)||queueMicrotask(t?function(e){++Ne,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),We.push(we),Ge(e,!0)}.bind(null,e):ze),e!==we&&(we=e,r===me&&(me.env=He()),le&&(n=me.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(a,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function He(){var e=a.Promise;return le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function qe(e,t,n,r,a){var o=we;try{return Ge(e,!0),t(n,r,a)}finally{Ge(o,!1)}}function Ke(e,t,n,r){return"function"!=typeof e?e:function(){var a=we;n&&Ue(),Ge(t,!0);try{return e.apply(this,arguments)}finally{Ge(a,!1),r&&queueMicrotask(je)}}}function Je(e){Promise===ce&&0===De.echoes?0===Fe?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+N).indexOf("[native code]")&&(Ue=je=J);var Ye=ke.reject,Ze=String.fromCharCode(65535),Qe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xe="String expected.",et=[],tt="__dbnames",nt="readonly",rt="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function it(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=E(t))[e],t}}function st(){throw H.Type()}function ct(e,t){try{var n=lt(e),r=lt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(ut(e),ut(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o){var i=ct(e[o],t[o]);if(0!==i)return i}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function lt(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=M(e))?"binary":e}function ut(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var dt=(pt.prototype._trans=function(e,t,n){var r=this._tx||we.trans,a=this.name,o=ae&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function i(e,n,r){if(!r.schema[a])throw new H.NotFound("Table "+a+" not part of transaction");return t(r.idbtrans,r)}var s=Ee();try{var c=r&&r.db._novip===this.db._novip?r===we.trans?r._promise(e,i,n):$e(function(){return r._promise(e,i,n)},{trans:r,transless:we.transless||we}):function e(t,n,r,a){if(t.idbdb&&(t._state.openComplete||we.letThrough||t._vip)){var o=t._createTransaction(n,r,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===z.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,a)})):Ye(o)}return o._promise(n,function(e,t){return $e(function(){return we.trans=o,a(e,t,o)})}).then(function(e){if("readwrite"===n)try{o.idbtrans.commit()}catch(e){}return"readonly"===n?e:o._completion.then(function(){return e})})}if(t._state.openComplete)return Ye(new H.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Ye(new H.DatabaseClosed);t.open().catch(J)}return t._state.dbReadyPromise.then(function(){return e(t,n,r,a)})}(this.db,e,[this.name],i);return o&&(c._consoleTask=o,c=c.catch(function(e){return console.trace(e),Ye(e)})),c}finally{s&&Te()}},pt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Ye(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},pt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Ze){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&ae&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function s(e,t){return 0===ct(e,t)}var c=t.reduce(function(t,n){var r=t[0],o=t[1],c=(t=a[n],e[n]);return[r||t,r||!t?at(o,t&&t.multi?function(e){return e=k(e,n),i(e)&&e.some(function(e){return s(c,e)})}:function(e){return s(c,k(e,n))}):o]},[null,null]);return r=c[0],c=c[1],r?this.where(r.name).equals(e[r.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},pt.prototype.filter=function(e){return this.toCollection().and(e)},pt.prototype.count=function(e){return this.toCollection().count(e)},pt.prototype.offset=function(e){return this.toCollection().offset(e)},pt.prototype.limit=function(e){return this.toCollection().limit(e)},pt.prototype.each=function(e){return this.toCollection().each(e)},pt.prototype.toArray=function(e){return this.toCollection().toArray(e)},pt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"[".concat(e.join("+"),"]"):e))},pt.prototype.reverse=function(){return this.toCollection().reverse()},pt.prototype.mapToClass=function(t){var n,r=this.db,a=this.name;function o(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof st&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(o,n=t),Object.defineProperty(o.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),o.prototype.table=function(){return a},t=o);for(var i=new Set,s=t.prototype;s;s=c(s))Object.getOwnPropertyNames(s).forEach(function(e){return i.add(e)});function l(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!i.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},pt.prototype.defineClass=function(){return this.mapToClass(function(e){s(this,e)})},pt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=it(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{S(e,o,t)}catch(t){}return t})},pt.prototype.update=function(e,t){return"object"!=typeof e||i(e)?this.where(":id").equals(e).modify(t):void 0===(e=k(e,this.schema.primKey.keyPath))?Ye(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},pt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,i=e;return o&&a&&(i=it(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{S(e,o,t)}catch(t){}return t})},pt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},pt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ot})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},pt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},pt.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&a)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length,s=s&&n?e.map(it(s)):e;return r.core.mutate({trans:t,type:"add",keys:a,values:s,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?n:a;throw new V("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(i," operations failed"),e)})})},pt.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&a)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length,s=s&&n?e.map(it(s)):e;return r.core.mutate({trans:t,type:"put",keys:a,values:s,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?n:a;throw new V("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(i," operations failed"),e)})})},pt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),o=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(s){var c=[],l=[];e.forEach(function(e,n){var r=e.key,a=e.changes,i=s[n];if(i){for(var u=0,d=Object.keys(a);u<d.length;u++){var p=d[u],f=a[p];if(p===t.schema.primKey.keyPath){if(0!==ct(f,r))throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else S(i,p,f)}o.push(n),c.push(r),l.push(i)}});var u=c.length;return n.mutate({trans:i,type:"put",keys:c,values:l,updates:{keys:r,changeSpecs:a}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var a=0,i=Object.keys(r);a<i.length;a++){var s,c=i[a],l=o[Number(c)];null!=l&&(s=r[c],delete r[c],r[l]=s)}throw new V("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},pt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,a=e.lastResult;if(e=e.failures,0===r)return a;throw new V("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},pt);function pt(){}function ft(e){function t(t,r){if(r){for(var a=arguments.length,o=new Array(a-1);--a;)o[a-1]=arguments[a];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=s;for(var r=1,a=arguments.length;r<a;++r)s(arguments[r]);return t;function s(e,r,a){if("object"!=typeof e){var c;r=r||ne;var l={subscribers:[],fire:a=a||J,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=r(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(r,a)}};return n[e]=t[e]=l}o(c=e).forEach(function(e){var t=c[e];if(i(t))s(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new H.InvalidArgument("Invalid event config");var n=s(e,Y,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function ht(e,t){return h(t).from({prototype:e}),t}function gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function mt(e,t){e.filter=at(e.filter,t)}function wt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return at(r(),t())}:t,e.justLimit=n&&!r}function yt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new H.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function vt(e,t,n){var r=yt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function bt(e,t,n,r){var a=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},i=function(e,n,r){var i,s;a&&!a(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"==(s=""+(i=n.primaryKey))&&(s=""+new Uint8Array(i)),u(o,s)||(o[s]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(i,n),kt(vt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return kt(vt(e,r,n),at(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function kt(e,t,n,r){var a=Oe(r?function(e,t,a){return n(r(e),t,a)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=J},function(t){e.fail(t),n=J})||a(e.value,e,function(e){return n=e}),n()})})}var St=(Ct.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(i(n))return r(r([],i(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var a=t.remove;if(i(a))return i(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(e){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Ct);function Ct(e){this["@@propmod"]=e}var Pt=(xt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ye.bind(null,n.error)):n.table._trans("readonly",e).then(t)},xt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ye.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},xt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=at(t.algorithm,e)},xt.prototype._iterate=function(e,t){return bt(this._ctx,e,t,this._ctx.table.core)},xt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},xt.prototype.raw=function(){return this._ctx.valueMapper=null,this},xt.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return bt(t,e,n,t.table.core)})},xt.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(gt(n,!0))return r.count({trans:e,query:{index:yt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var a=0;return bt(n,function(){return++a,!1},e,r).then(function(){return a})}).then(e)},xt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function s(e,t){return ct(o(e,a),o(t,a))*i}return this.toArray(function(e){return e.sort(s)}).then(t)},xt.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&gt(n,!0)&&0<n.limit){var r=n.valueMapper,a=yt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var o=[];return bt(n,function(e){return o.push(e)},e,n.table.core).then(function(){return o})},e)},xt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,gt(t)?wt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):wt(t,function(){var t=e;return function(){return--t<0}})),this},xt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},xt.prototype.until=function(e,t){return mt(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},xt.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},xt.prototype.last=function(e){return this.reverse().first(e)},xt.prototype.filter=function(e){var t;return mt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=at(t.isMatch,e),this},xt.prototype.and=function(e){return this.filter(e)},xt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},xt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xt.prototype.desc=function(){return this.reverse()},xt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},xt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},xt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},xt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},xt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&gt(t,!0)&&0<t.limit)return this._read(function(e){var n=yt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},xt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},xt.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},xt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},xt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return mt(this._ctx,function(e){var n=e.primaryKey.toString();return e=u(t,n),t[n]=!0,!e}),this},xt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a,i,s;s="function"==typeof e?e:(a=o(e),i=a.length,function(t){for(var n=!1,r=0;r<i;++r){var o=a[r],s=e[o],c=k(t,o);s instanceof St?(S(t,o,s.execute(c)),n=!0):c!==s&&(S(t,o,s),n=!0)}return n});var c,l=n.table.core,u=(c=l.schema.primaryKey).outbound,d=c.extractKey,p=200;function f(e,t){var n=t.failures;t=t.numFailures,g+=e-t;for(var r=0,a=o(n);r<a.length;r++){var i=a[r];h.push(n[i])}}(c=t.db._options.modifyChunkSize)&&(p="object"==typeof c?c[l.name]||c["*"]||200:c);var h=[],g=0,m=[];return t.clone().primaryKeys().then(function(t){var a=gt(n)&&n.limit===1/0&&("function"!=typeof e||e===_t)&&{index:n.index,range:n.range};return function n(o){var i=Math.min(p,t.length-o);return l.getMany({trans:r,keys:t.slice(o,o+i),cache:"immutable"}).then(function(c){for(var h=[],g=[],m=u?[]:null,w=[],y=0;y<i;++y){var v=c[y],b={value:E(v),primKey:t[o+y]};!1!==s.call(b,b.value,b)&&(null==b.value?w.push(t[o+y]):u||0===ct(d(v),d(b.value))?(g.push(b.value),u&&m.push(t[o+y])):(w.push(t[o+y]),h.push(b.value)))}return Promise.resolve(0<h.length&&l.mutate({trans:r,type:"add",values:h}).then(function(e){for(var t in e.failures)w.splice(parseInt(t),1);f(h.length,e)})).then(function(){return(0<g.length||a&&"object"==typeof e)&&l.mutate({trans:r,type:"put",keys:m,values:g,criteria:a,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<o}).then(function(e){return f(g.length,e)})}).then(function(){return(0<w.length||a&&e===_t)&&l.mutate({trans:r,type:"delete",keys:w,criteria:a,isAdditionalChunk:0<o}).then(function(e){return f(w.length,e)})}).then(function(){return t.length>o+i&&n(o+p)})})}(0).then(function(){if(0<h.length)throw new j("Error modifying one or more objects",h,g,m);return t.length})})})},xt.prototype.delete=function(){var e=this._ctx,t=e.range;return gt(e)&&(e.isPrimKey||3===t.type)?this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new j("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})}):this.modify(_t)},xt);function xt(){}var _t=function(e,t){return t.value=null};function It(e,t){return e<t?-1:e===t?0:1}function At(e,t){return t<e?-1:e===t?0:1}function Et(e,t,n){return(e=e instanceof Dt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Tt(e){return new e.Collection(e,function(){return Ot("")}).limit(0)}function Mt(e,t,n,r){var a,o,i,s,c,l,u,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return Et(e,Xe);function p(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},o="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},i="next"===e?It:At;var t=n.map(function(e){return{lower:o(e),upper:a(e)}}).sort(function(e,t){return i(e.lower,t.lower)});s=t.map(function(e){return e.upper}),c=t.map(function(e){return e.lower}),u="next"===(l=e)?"":r}p("next"),(e=new e.Collection(e,function(){return Rt(s[0],c[d-1]+r)}))._ondirectionchange=function(e){p(e)};var f=0;return e._addAlgorithm(function(e,n,r){var a=e.key;if("string"!=typeof a)return!1;var p=o(a);if(t(p,c,f))return!0;for(var h=null,g=f;g<d;++g){var m=function(e,t,n,r,a,o){for(var i=Math.min(e.length,r.length),s=-1,c=0;c<i;++c){var l=t[c];if(l!==r[c])return a(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):a(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):0<=s?e.substr(0,s)+t[s]+n.substr(s+1):null;a(e[c],l)<0&&(s=c)}return i<r.length&&"next"===o?e+n.substr(e.length):i<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}(a,p,s[g],c[g],i,l);null===m&&null===h?f=g+1:(null===h||0<i(h,m))&&(h=m)}return n(null!==h?function(){e.continue(h+u)}:r),!1}),e}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ot(e){return{type:1,lower:e,upper:e}}var Dt=(Object.defineProperty(Bt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Bt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Tt(this):new this.Collection(this,function(){return Rt(e,t,!n,!r)})}catch(e){return Et(this,Qe)}},Bt.prototype.equals=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Ot(e)})},Bt.prototype.above=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Rt(e,void 0,!0)})},Bt.prototype.aboveOrEqual=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Rt(e,void 0,!1)})},Bt.prototype.below=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Rt(void 0,e,!1,!0)})},Bt.prototype.belowOrEqual=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Rt(void 0,e)})},Bt.prototype.startsWith=function(e){return"string"!=typeof e?Et(this,Xe):this.between(e,e+Ze,!0,!0)},Bt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Mt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Ze)},Bt.prototype.equalsIgnoreCase=function(e){return Mt(this,function(e,t){return e===t[0]},[e],"")},Bt.prototype.anyOfIgnoreCase=function(){var e=W.apply(B,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Bt.prototype.startsWithAnyOfIgnoreCase=function(){var e=W.apply(B,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Ze)},Bt.prototype.anyOf=function(){var e=this,t=W.apply(B,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Et(this,Qe)}if(0===t.length)return Tt(this);var r=new this.Collection(this,function(){return Rt(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(e,r,o){for(var i=e.key;0<n(i,t[a]);)if(++a===t.length)return r(o),!1;return 0===n(i,t[a])||(r(function(){e.continue(t[a])}),!1)}),r},Bt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Bt.prototype.noneOf=function(){var e=W.apply(B,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Et(this,Qe)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Bt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,a=this._ascending,o=this._descending,i=this._min,s=this._max;if(0===e.length)return Tt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0}))return Et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var c,l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=a;function p(e,t){return d(e[0],t[0])}try{(c=e.reduce(function(e,t){for(var n=0,a=e.length;n<a;++n){var o=e[n];if(r(t[0],o[1])<0&&0<r(t[1],o[0])){o[0]=i(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===a&&e.push(t),e},[])).sort(p)}catch(e){return Et(this,Qe)}var f=0,h=u?function(e){return 0<a(e,c[f][1])}:function(e){return 0<=a(e,c[f][1])},g=l?function(e){return 0<o(e,c[f][0])}:function(e){return 0<=o(e,c[f][0])},m=h;return(e=new this.Collection(this,function(){return Rt(c[0][0],c[c.length-1][1],!l,!u)}))._ondirectionchange=function(e){d="next"===e?(m=h,a):(m=g,o),c.sort(p)},e._addAlgorithm(function(e,t,r){for(var o,i=e.key;m(i);)if(++f===c.length)return t(r),!1;return!h(o=i)&&!g(o)||(0===n._cmp(i,c[f][1])||0===n._cmp(i,c[f][0])||t(function(){d===a?e.continue(c[f][0]):e.continue(c[f][1])}),!1)}),e},Bt.prototype.startsWithAnyOf=function(){var e=W.apply(B,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Tt(this):this.inAnyRange(e.map(function(e){return[e,e+Ze]})):Et(this,"startsWithAnyOf() only works with strings")},Bt);function Bt(){}function Wt(e){return Oe(function(t){return Ft(t),e(t.target.error),!1})}function Ft(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Nt="storagemutated",Lt="x-storagemutated-1",$t=ft(null,Nt),Ut=(jt.prototype._lock=function(){return v(!we.global),++this._reculock,1!==this._reculock||we.global||(we.lockOwnerFor=this),this},jt.prototype._unlock=function(){if(v(!we.global),0==--this._reculock)for(we.global||(we.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{qe(e[1],e[0])}catch(e){}}return this},jt.prototype._locked=function(){return this._reculock&&we.lockOwnerFor!==this},jt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new H.DatabaseClosed(r);case"MissingAPIError":throw new H.MissingAPI(r.message,r);default:throw new H.OpenFailed(r)}if(!this.active)throw new H.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(n){Ft(n),t._reject(e.error)}),e.onabort=Oe(function(n){Ft(n),t.active&&t._reject(new H.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Oe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&$t.storagemutated.fire(e.mutatedParts)}),this},jt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Ye(new H.ReadOnly("Transaction is readonly"));if(!this.active)return Ye(new H.TransactionInactive);if(this._locked())return new ke(function(a,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,o)},we])});if(n)return $e(function(){var e=new ke(function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var a=new ke(function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)});return a._lib=!0,a},jt.prototype._root=function(){return this.parent?this.parent._root():this},jt.prototype.waitFor=function(e){var t,n=this._root(),r=ke.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=n._waitingFor;return new ke(function(e,t){r.then(function(t){return n._waitingQueue.push(Oe(e.bind(null,t)))},function(e){return n._waitingQueue.push(Oe(t.bind(null,e)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},jt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},jt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new H.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},jt);function jt(){}function Vt(e,t,n,r,a,o,i){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:o,src:(n&&!i?"&":"")+(r?"*":"")+(a?"++":"")+zt(t)}}function zt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Gt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t))&&(e[n[0]]=n[1]),e},{}))};var r}var Ht=function(e){try{return e.only([[]]),Ht=function(){return[[]]},[[]]}catch(e){return Ht=function(){return Ze},Ze}};function qt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return k(e,t)}:function(t){return k(t,e)};var t}function Kt(e){return[].slice.call(e)}var Jt=0;function Yt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Zt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,a=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!a):t.bound(n,r,!!a,!!e)}var a,o,s,c=(o=n,s=Kt((a=e).objectStoreNames),{schema:{name:a.name,tables:s.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=i(t),a={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:qt(t)},indexes:Kt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:i(e),keyPath:e,unique:n,multiEntry:r,extractKey:qt(e)},a[Yt(e)]=r}),getIndexByKeyPath:function(e){return a[Yt(e)]}},a[":id"]=n.primaryKey,null!=t&&(a[Yt(t)]=n.primaryKey),n})},hasGetAll:0<s.length&&"getAll"in o.objectStore(s[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),l=(n=c.schema,c.hasGetAll),u=(c=n.tables.map(function(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,a=e.type,o=e.keys,i=e.values,s=e.range;return new Promise(function(e,c){e=Oe(e);var l=t.objectStore(n),u=null==l.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var p,f=(o||i||{length:1}).length;if(o&&i&&o.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function h(e){++w,Ft(e)}var g=[],m=[],w=0;if("deleteRange"===a){if(4===s.type)return e({numFailures:w,failures:m,results:[],lastResult:void 0});3===s.type?g.push(p=l.clear()):g.push(p=l.delete(r(s)))}else{var y=(u=d?u?[i,o]:[i,null]:[o,null])[0],v=u[1];if(d)for(var b=0;b<f;++b)g.push(p=v&&void 0!==v[b]?l[a](y[b],v[b]):l[a](y[b])),p.onerror=h;else for(b=0;b<f;++b)g.push(p=l[a](y[b])),p.onerror=h}function k(t){t=t.target.result,g.forEach(function(e,t){return null!=e.error&&(m[t]=e.error)}),e({numFailures:w,failures:m,results:"delete"===a?o:g.map(function(e){return e.result}),lastResult:t})}p.onerror=function(e){h(e),k(e)},p.onsuccess=k})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,a){e=Oe(e);for(var o,i=t.objectStore(n),s=r.length,c=new Array(s),l=0,u=0,d=function(t){t=t.target,c[t._pos]=t.result,++u===l&&e(c)},p=Wt(a),f=0;f<s;++f)null!=r[f]&&((o=i.get(r[f]))._pos=f,o.onsuccess=d,o.onerror=p,++l);0===l&&e(c)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,a){e=Oe(e);var o=t.objectStore(n).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Wt(a)})},query:(t=l,function(e){return new Promise(function(a,o){a=Oe(a);var i,s,c,l=e.trans,u=e.values,d=e.limit,p=e.query,f=d===1/0?void 0:d,h=p.index;if(p=p.range,l=l.objectStore(n),h=h.isPrimaryKey?l:l.index(h.name),p=r(p),0===d)return a({result:[]});t?((f=u?h.getAll(p,f):h.getAllKeys(p,f)).onsuccess=function(e){return a({result:e.target.result})},f.onerror=Wt(o)):(i=0,s=!u&&"openKeyCursor"in h?h.openKeyCursor(p):h.openCursor(p),c=[],s.onsuccess=function(e){var t=s.result;return t?(c.push(u?t.value:t.primaryKey),++i===d?a({result:c}):void t.continue()):a({result:c})},s.onerror=Wt(o))})}),openCursor:function(e){var t=e.trans,a=e.values,o=e.query,i=e.reverse,s=e.unique;return new Promise(function(e,c){e=Oe(e);var l=o.index,u=o.range,d=t.objectStore(n),p=(d=l.isPrimaryKey?d:d.index(l.name),l=i?s?"prevunique":"prev":s?"nextunique":"next",!a&&"openKeyCursor"in d?d.openKeyCursor(r(u),l):d.openCursor(r(u),l));p.onerror=Wt(c),p.onsuccess=Oe(function(n){var r,a,o,i,s=p.result;s?(s.___id=++Jt,s.done=!1,r=s.continue.bind(s),a=(a=s.continuePrimaryKey)&&a.bind(s),o=s.advance.bind(s),i=function(){throw new Error("Cursor not stopped")},s.trans=t,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=Oe(c),s.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},s.start=function(e){function t(){if(p.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var n=new Promise(function(e,t){e=Oe(e),p.onerror=Wt(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=i,e(t)}});return p.onsuccess=Oe(function(e){p.onsuccess=t,t()}),s.continue=r,s.continuePrimaryKey=a,s.advance=o,t(),n},e(s)):e(null)},c)})},count:function(e){var t=e.query,a=e.trans,o=t.index,i=t.range;return new Promise(function(e,t){var s=a.objectStore(n),c=o.isPrimaryKey?s:s.index(o.name);(c=(s=r(i))?c.count(s):c.count()).onsuccess=Oe(function(t){return e(t.target.result)}),c.onerror=Wt(t)})}}}),{});return c.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:Ht(t),schema:n}}function Qt(e,n){var r=n.db;n=function(e,n,r,a){var o=r.IDBKeyRange;return r.indexedDB,{dbcore:(a=Zt(n,o,a),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},a))}}(e._middlewares,r,e._deps,n),e.core=n.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Xt(e,t,n,r){n.forEach(function(n){var a=r[n];t.forEach(function(t){var r=function e(t,n){return g(t,n)||(t=c(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){p(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,a))})})}function en(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function tn(e,t){return e._cfg.version-t._cfg.version}function nn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],o=t[n];if(a){var i={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)i.recreate=!0,r.change.push(i);else{var s=a.idxByName,c=o.idxByName,l=void 0;for(l in s)c[l]||i.del.push(l);for(l in c){var u=s[l],d=c[l];u?u.src!==d.src&&i.change.push(d):i.add.push(d)}(0<i.del.length||0<i.add.length||0<i.change.length)&&r.change.push(i)}}else r.add.push([n,o])}return r}function rn(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return on(a,e)}),a}function an(e,t){o(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ae&&console.debug("Dexie: Creating missing table",n),rn(t,n,e[n].primKey,e[n].indexes))})}function on(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function sn(e,t,n){var r={};return w(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),a=Vt(zt(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),o=[],i=0;i<t.indexNames.length;++i){var s=(c=t.index(t.indexNames[i])).keyPath,c=Vt(c.name,s,!!c.unique,!!c.multiEntry,!1,s&&"string"!=typeof s,!1);o.push(c)}r[e]=Gt(e,a,o)}),r}function cn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],s=n.objectStore(i);e._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var l=s.indexNames[c],u=s.index(l).keyPath,d="string"==typeof u?u:"["+w(u).join("+")+"]";!t[i]||(u=t[i].idxByName[d])&&(u.name=l,delete t[i].idxByName[d],t[i].idxByName[l]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ln(e){return e.split(",").map(function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Vt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),0===t)})}var un=(dn.prototype._parseStoresSpec=function(e,t){o(e).forEach(function(n){if(null!==e[n]){var r=ln(e[n]),a=r.shift();if(a.unique=!0,a.multi)throw new H.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),t[n]=Gt(n,a,r)}})},dn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,en(t,[t._allTables,t,t.Transaction.prototype]),Xt(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(r),r),t._storeNames=o(r),this},dn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||J,e),this},dn);function dn(){}function pn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Jn(tt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function fn(e){return e&&"function"==typeof e.databases}function hn(e){return $e(function(){return we.letThrough=!0,e()})}function gn(e){return!("from"in e)}var mn=function(e,t){if(!this){var n=new mn;return e&&"d"in e&&s(n,e),n}s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function wn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(gn(e))return s(e,{from:t,to:n,d:1});var a=e.l;if(r=e.r,ct(n,e.from)<0)return a?wn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},kn(e);if(0<ct(t,e.to))return r?wn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},kn(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&yn(e,a),r&&n&&yn(e,r)}}function yn(e,t){gn(t)||function e(t,n){var r=n.from,a=n.to,o=n.l;n=n.r,wn(t,r,a),o&&e(t,o),n&&e(t,n)}(e,t)}function vn(e,t){var n=bn(t),r=n.next();if(r.done)return!1;for(var a=r.value,o=bn(e),i=o.next(a.from),s=i.value;!r.done&&!i.done;){if(ct(s.from,a.to)<=0&&0<=ct(s.to,a.from))return!0;ct(a.from,s.from)<0?a=(r=n.next(s.from)).value:s=(i=o.next(a.from)).value}return!1}function bn(e){var t=gn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function kn(e){var n,r,a=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),o=1<a?"r":a<-1?"l":"";o&&(n="r"==o?"l":"r",r=t({},e),a=e[o],e.from=a.from,e.to=a.to,e[o]=a[o],r[o]=a[n],(e[n]=r).d=Sn(r)),e.d=Sn(e)}function Sn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cn(e,t){return o(t).forEach(function(n){e[n]?yn(e[n],t[n]):e[n]=function e(t){var n,r,a={};for(n in t)u(t,n)&&(r=t[n],a[n]=!r||"object"!=typeof r||I.has(r.constructor)?r:e(r));return a}(t[n])}),e}function Pn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&vn(t[n],e[n])})}d(mn.prototype,((N={add:function(e){return yn(this,e),this},addKey:function(e){return wn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return wn(t,e,e)}),this},hasKey:function(e){var t=bn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[R]=function(){return bn(this)},N));var xn={},_n={},In=!1;function An(e){Cn(_n,e),In||(In=!0,setTimeout(function(){In=!1,En(_n,!(_n={}))},0))}function En(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(xn);r<a.length;r++)Tn(i=a[r],e,n,t);else for(var o in e){var i,s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);s&&(o=s[1],s=s[2],(i=xn["idb://".concat(o,"/").concat(s)])&&Tn(i,e,n,t))}n.forEach(function(e){return e()})}function Tn(e,t,n,r){for(var a=[],o=0,i=Object.entries(e.queries.query);o<i.length;o++){for(var s=i[o],c=s[0],l=[],u=0,d=s[1];u<d.length;u++){var p=d[u];Pn(t,p.obsSet)?p.subscribers.forEach(function(e){return n.add(e)}):r&&l.push(p)}r&&a.push([c,l])}if(r)for(var f=0,h=a;f<h.length;f++){var g=h[f];c=g[0],l=g[1],e.queries.query[c]=l}}function Mn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Ye(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),i=!1;function s(){if(t.openCanceller!==r)throw new H.DatabaseClosed("db.open() was cancelled")}var c,l=t.dbReadyResolve,u=null,d=!1;return ke.race([r,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(function r(){return new ke(function(c,l){if(s(),!n)throw new H.MissingAPI;var p=e.name,f=t.autoSchema||!a?n.open(p):n.open(p,a);if(!f)throw new H.MissingAPI;f.onerror=Wt(l),f.onblocked=Oe(e._fireOnBlocked),f.onupgradeneeded=Oe(function(r){var a;u=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=Ft,u.abort(),f.result.close(),(a=n.deleteDatabase(p)).onsuccess=a.onerror=Oe(function(){l(new H.NoSuchDatabase("Database ".concat(p," doesnt exist")))})):(u.onerror=Wt(l),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,d=r<1,e.idbdb=f.result,i&&function(e,t){an(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=sn(0,e.idbdb,t);cn(e,e._dbSchema,t);for(var r=0,a=nn(n,e._dbSchema).change;r<a.length;r++){var o=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){ae&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),on(n,t)})}(a[r]);if("object"==typeof o)return o.value}}(e,u),function(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=Gt("$meta",ln("")[0],[]),e._storeNames.push("$meta"));var i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);var s=i._reject.bind(i),c=we.transless||we;$e(function(){return we.trans=i,we.transless=c,0!==t?(Qt(e,n),l=t,((r=i).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:l}):ke.resolve(l)).then(function(t){return a=t,s=i,c=n,l=[],t=(r=e)._versions,u=r._dbSchema=sn(0,r.idbdb,c),0!==(t=t.filter(function(e){return e._cfg.version>=a})).length?(t.forEach(function(e){l.push(function(){var t=u,n=e._cfg.dbschema;cn(r,t,c),cn(r,n,c),u=r._dbSchema=n;var i=nn(t,n);i.add.forEach(function(e){rn(c,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new H.Upgrade("Not yet support for changing primary key");var t=c.objectStore(e.name);e.add.forEach(function(e){return on(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),on(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>a){Qt(r,c),s._memoizedTables={};var d=C(n);i.del.forEach(function(e){d[e]=t[e]}),en(r,[r.Transaction.prototype]),Xt(r,[r.Transaction.prototype],o(d),d),s.schema=d;var p,f=F(l);return f&&Ue(),i=ke.follow(function(){var e;(p=l(s))&&f&&(e=je.bind(null,null),p.then(e,e))}),p&&"function"==typeof p.then?ke.resolve(p):i.then(function(){return p})}}),l.push(function(t){var n,a,o=e._cfg.dbschema;n=o,a=t,[].slice.call(a.db.objectStoreNames).forEach(function(e){return null==n[e]&&a.db.deleteObjectStore(e)}),en(r,[r.Transaction.prototype]),Xt(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),s.schema=r._dbSchema}),l.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return l.length?ke.resolve(l.shift()(s.idbtrans)).then(e):ke.resolve()}().then(function(){an(u,c)})):ke.resolve();var r,a,s,c,l,u}).catch(s)):(o(a).forEach(function(e){rn(n,e,a[e].primKey,a[e].indexes)}),Qt(e,n),void ke.follow(function(){return e.on.populate.fire(i)}).catch(s));var r,l})}(e,r/10,u,l))},l),f.onsuccess=Oe(function(){u=null;var n,s,l,h,g,m=e.idbdb=f.result,y=w(m.objectStoreNames);if(0<y.length)try{var v=m.transaction(1===(h=y).length?h[0]:h,"readonly");if(t.autoSchema)s=m,l=v,(n=e).verno=s.version/10,l=n._dbSchema=sn(0,s,l),n._storeNames=w(s.objectStoreNames,0),Xt(n,[n._allTables],o(l),l);else if(cn(e,e._dbSchema,v),((g=nn(sn(0,(g=e).idbdb,v),g._dbSchema)).add.length||g.change.some(function(e){return e.add.length||e.change.length}))&&!i)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),m.close(),a=m.version+1,i=!0,c(r());Qt(e,v)}catch(n){}et.push(e),m.onversionchange=Oe(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),m.onclose=Oe(function(t){e.on("close").fire(t)}),d&&(g=e._deps,v=p,m=g.indexedDB,g=g.IDBKeyRange,fn(m)||v===tt||pn(m,g).put({name:v}).catch(J)),c()},l)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),r();break;case"VersionError":if(0<a)return a=0,r()}return ke.reject(e)})})]).then(function(){return s(),t.onReadyBeingFired=[],ke.resolve(hn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,J);return t.onReadyBeingFired=[],ke.resolve(hn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{u&&u.abort()}catch(n){}return r===t.openCanceller&&e._close(),Ye(n)}).finally(function(){t.openComplete=!0,l()}).then(function(){var t;return d&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new mn(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new mn(-1/0,[[[]]])}),$t(Nt).fire(t),En(t,!0)),e})}function Rn(e){function t(t){return e.next(t)}var n=a(t),r=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t);return t=a.value,a.done?t:t&&"function"==typeof t.then?t.then(n,r):i(t)?Promise.all(t).then(n,r):n(t)}}return a(t)()}function On(e,t,n){for(var r=i(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var Dn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),a=r.schema,o={},i=[];function s(e,n,r){var a=Yt(e),c=o[a]=o[a]||[],l=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(a,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:l,extractKey:qt(e),unique:!u&&r.unique}),c.push(u),u.isPrimaryKey||i.push(u),1<l&&s(2===l?e[0]:e.slice(0,l-1),n+1,r),c.sort(function(e,t){return e.keyTail-t.keyTail}),u}n=s(a.primaryKey.keyPath,0,a.primaryKey),o[":id"]=[n];for(var c=0,l=a.indexes;c<l.length;c++){var u=l[c];s(u.keyPath,0,u)}function d(n){var r,a=n.query.index;return a.isVirtual?t(t({},n),{query:{index:a.lowLevelIndex,range:(r=n.query.range,a=a.keyTail,{type:1===r.type?2:r.type,lower:On(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:On(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},a),{primaryKey:n,indexes:i,getIndexByKeyPath:function(e){return(e=o[Yt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,a=n.keyTail,o=n.isVirtual,i=n.keyLength;return o?r.openCursor(d(t)).then(function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(On(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(On(t,e.MAX_KEY,a),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}})}(n)}):r.openCursor(t)}})}})}};function Bn(e,t,n,r){return n=n||{},r=r||"",o(e).forEach(function(a){var o,i,s;u(t,a)?(o=e[a],i=t[a],"object"==typeof o&&"object"==typeof i&&o&&i?(s=M(o))!==M(i)?n[r+a]=t[a]:"Object"===s?Bn(o,i,n,r+a+"."):o!==i&&(n[r+a]=t[a]):o!==i&&(n[r+a]=t[a])):n[r+a]=void 0}),o(t).forEach(function(a){u(e,a)||(n[r+a]=t[a])}),n}function Wn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Fn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var a=e.table(n),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var i=we.trans,s=i.table(n).hook,c=s.deleting,l=s.creating,d=s.updating;switch(e.type){case"add":if(l.fire===J)break;return i._promise("readwrite",function(){return p(e)},!0);case"put":if(l.fire===J&&d.fire===J)break;return i._promise("readwrite",function(){return p(e)},!0);case"delete":if(c.fire===J)break;return i._promise("readwrite",function(){return p(e)},!0);case"deleteRange":if(c.fire===J)break;return i._promise("readwrite",function(){return function e(n,r,i){return a.query({trans:n,values:!1,query:{index:o,range:r},limit:i}).then(function(a){var o=a.result;return p({type:"delete",keys:o,trans:n}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):o.length<i?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:o[o.length-1],lowerOpen:!0}),i)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function p(e){var n,i,s,p=we.trans,f=e.keys||Wn(o,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=a,s=f,("add"===(i=e).type?Promise.resolve([]):n.getMany({trans:i.trans,keys:s,cache:"immutable"})).then(function(t){var n=f.map(function(n,r){var a,i,s,f=t[r],h={onerror:null,onsuccess:null};return"delete"===e.type?c.fire.call(h,n,f,p):"add"===e.type||void 0===f?(a=l.fire.call(h,n,e.values[r],p),null==n&&null!=a&&(e.keys[r]=n=a,o.outbound||S(e.values[r],o.keyPath,n))):(a=Bn(f,e.values[r]),(i=d.fire.call(h,a,n,f,p))&&(s=e.values[r],Object.keys(i).forEach(function(e){u(s,e)?s[e]=i[e]:S(s,e,i[e])}))),h});return a.mutate(e).then(function(r){for(var a=r.failures,o=r.results,i=r.numFailures,s=(r=r.lastResult,0);s<f.length;++s){var c=(o||f)[s],l=n[s];null==c?l.onerror&&l.onerror(a[s]):l.onsuccess&&l.onsuccess("put"===e.type&&t[s]?e.values[s]:c)}return{failures:a,results:o,numFailures:i,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Nn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)0===ct(t.keys[a],e[o])&&(r.push(n?E(t.values[a]):t.values[a]),++o);return r.length===e.length?r:null}catch(e){return null}}var Ln={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Nn(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?E(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function $n(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Un(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var jn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new mn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(we.subscr&&"readonly"!==n)throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(we.querier));return e.transaction(t,n,r)},table:function(a){var s=e.table(a),c=s.schema,l=c.primaryKey,u=c.indexes,d=l.extractKey,p=l.outbound,f=l.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),h=t(t({},s),{mutate:function(t){function o(e){return e="idb://".concat(n,"/").concat(a,"/").concat(e),g[e]||(g[e]=new mn)}var u,d,p,h=t.trans,g=t.mutatedParts||(t.mutatedParts={}),m=o(""),w=o(":dels"),y=t.type,v="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Wn(l,t).filter(function(e){return e}),t.values]:[],b=v[0],k=v[1];return v=t.trans._cache,i(b)?(m.addKeys(b),(v="delete"===y||b.length===k.length?Nn(b,v):null)||w.addKeys(b),(v||k)&&(u=o,d=v,p=k,c.indexes.forEach(function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&i(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||p).forEach(function(e,t){var a=d&&n(d[t]);0!==ct(a,t=p&&n(p[t]))&&(null!=a&&r(a),null!=t&&r(t))})}))):b?(k={from:null!==(k=b.lower)&&void 0!==k?k:e.MIN_KEY,to:null!==(k=b.upper)&&void 0!==k?k:e.MAX_KEY},w.add(k),m.add(k)):(m.add(r),w.add(r),c.indexes.forEach(function(e){return o(e.name).add(r)})),s.mutate(t).then(function(e){return!b||"add"!==t.type&&"put"!==t.type||(m.addKeys(e.results),f&&f.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),a=n.keyPath.findIndex(function(e){return e===l.keyPath}),i=0,s=e.results.length;i<s;++i)r[i][a]=e.results[i];o(n.name).addKeys(r)})),h.mutatedParts=Cn(h.mutatedParts||{},g),e})}}),g=(u=function(t){t=(n=t.query).index;var n=n.range;return[t,new mn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[l,new mn(e.key)]},getMany:function(e){return[l,(new mn).addKeys(e.keys)]},count:u,query:u,openCursor:u});return o(g).forEach(function(e){h[e]=function(o){var i=!!(h=we.subscr),c=$n(we,s)&&Un(e,o)?o.obsSet={}:h;if(i){var l=function(e){return e="idb://".concat(n,"/").concat(a,"/").concat(e),c[e]||(c[e]=new mn)},u=l(""),f=l(":dels"),h=(i=(h=g[e](o))[0],h[1]);if(("query"===e&&i.isPrimaryKey&&!o.values?f:l(i.name||"")).add(h),!i.isPrimaryKey){if("count"!==e){var m="query"===e&&p&&o.values&&s.query(t(t({},o),{values:!1}));return s[e].apply(this,arguments).then(function(t){if("query"===e){if(p&&o.values)return m.then(function(e){return e=e.result,u.addKeys(e),t});var n=o.values?t.result.map(d):t.result;(o.values?u:f).addKeys(n)}else if("openCursor"===e){var r=t,a=o.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return a&&u.addKey(r.primaryKey),r.value}}})}return t})}f.add(r)}}return s[e].apply(this,arguments)}}),h}})}};function Vn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var a=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===a?null:(n=t({},n),i(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&i(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function zn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function Gn(e,t,n,r,a,o){if(!n||0===n.length)return e;var s=t.query.index,c=s.multiEntry,l=t.query.range,u=r.schema.primaryKey.extractKey,d=s.extractKey,p=(s.lowLevelIndex||s).extractKey;return n=n.reduce(function(e,n){var r=e,a=[];if("add"===n.type||"put"===n.type)for(var o=new mn,s=n.values.length-1;0<=s;--s){var p,f=n.values[s],h=u(f);o.hasKey(h)||(p=d(f),(c&&i(p)?p.some(function(e){return zn(e,l)}):zn(p,l))&&(o.addKey(h),a.push(f)))}switch(n.type){case"add":var g=(new mn).addKeys(t.values?e.map(function(e){return u(e)}):e);r=e.concat(t.values?a.filter(function(e){return e=u(e),!g.hasKey(e)&&(g.addKey(e),!0)}):a.map(function(e){return u(e)}).filter(function(e){return!g.hasKey(e)&&(g.addKey(e),!0)}));break;case"put":var m=(new mn).addKeys(n.values.map(function(e){return u(e)}));r=e.filter(function(e){return!m.hasKey(t.values?u(e):e)}).concat(t.values?a:a.map(function(e){return u(e)}));break;case"delete":var w=(new mn).addKeys(n.keys);r=e.filter(function(e){return!w.hasKey(t.values?u(e):e)});break;case"deleteRange":var y=n.range;r=e.filter(function(e){return!zn(u(e),y)})}return r},e),n===e?e:(n.sort(function(e,t){return ct(p(e),p(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(a.dirty=!0)),o?Object.freeze(n):n)}function Hn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var qn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,a){var o,i,s=e.transaction(t,r,a);return"readwrite"===r&&(i=(o=new AbortController).signal,a=function(a){return function(){if(o.abort(),"readwrite"===r){for(var i=new Set,c=0,l=t;c<l.length;c++){var u=l[c],d=xn["idb://".concat(n,"/").concat(u)];if(d){var p=e.table(u),f=d.optimisticOps.filter(function(e){return e.trans===s});if(s._explicit&&a&&s.mutatedParts)for(var h=0,g=Object.values(d.queries.query);h<g.length;h++)for(var m=0,w=(b=g[h]).slice();m<w.length;m++)Pn((k=w[m]).obsSet,s.mutatedParts)&&(D(b,k),k.subscribers.forEach(function(e){return i.add(e)}));else if(0<f.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==s});for(var y=0,v=Object.values(d.queries.query);y<v.length;y++)for(var b,k,S,C=0,P=(b=v[y]).slice();C<P.length;C++)null!=(k=P[C]).res&&s.mutatedParts&&(a&&!k.dirty?(S=Object.isFrozen(k.res),S=Gn(k.res,k.req,f,p,k,S),k.dirty?(D(b,k),k.subscribers.forEach(function(e){return i.add(e)})):S!==k.res&&(k.res=S,k.promise=ke.resolve({result:S}))):(k.dirty&&D(b,k),k.subscribers.forEach(function(e){return i.add(e)})))}}}i.forEach(function(e){return e()})}}},s.addEventListener("abort",a(!1),{signal:i}),s.addEventListener("error",a(!1),{signal:i}),s.addEventListener("complete",a(!0),{signal:i})),s},table:function(r){var a=e.table(r),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var i=we.trans;if(o.outbound||"disabled"===i.db._options.cache||i.explicit||"readwrite"!==i.idbtrans.mode)return a.mutate(e);var s=xn["idb://".concat(n,"/").concat(r)];return s?(i=a.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Wn(o,e).some(function(e){return null==e}))?(s.optimisticOps.push(e),e.mutatedParts&&An(e.mutatedParts),i.then(function(t){0<t.numFailures&&(D(s.optimisticOps,e),(t=Vn(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&An(e.mutatedParts))}),i.catch(function(){D(s.optimisticOps,e),e.mutatedParts&&An(e.mutatedParts)})):i.then(function(n){var r=Vn(0,t(t({},e),{values:e.values.map(function(e,r){var a;return n.failures[r]||S(e=null!==(a=o.keyPath)&&void 0!==a&&a.includes(".")?E(e):t({},e),o.keyPath,n.results[r]),e})}),n);s.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&An(e.mutatedParts)})}),i):a.mutate(e)},query:function(e){if(!$n(we,a)||!Un("query",e))return a.query(e);var t="immutable"===(null===(s=we.trans)||void 0===s?void 0:s.db._options.cache),o=(l=we).requery,i=l.signal,s=function(e,t,n,r){var a=xn["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[n]))return[null,!1,a,null];var o=t[(r.query?r.query.index.name:null)||""];if(!o)return[null,!1,a,null];switch(n){case"query":var i=o.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Hn(e.req.query.range,r.query.range)});return i?[i,!0,a,o]:[o.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&function(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(e.req.query.range,r.query.range)}),!1,a,o];case"count":return i=o.find(function(e){return Hn(e.req.query.range,r.query.range)}),[i,!!i,a,o]}}(n,r,"query",e),c=s[0],l=s[1],u=s[2],d=s[3];return c&&l?c.obsSet=e.obsSet:(l=a.query(e).then(function(e){var n=e.result;if(c&&(c.res=n),t){for(var r=0,a=n.length;r<a;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=E(n);return e}).catch(function(e){return d&&c&&D(d,c),Promise.reject(e)}),c={obsSet:e.obsSet,promise:l,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(c):(d=[c],(u=u||(xn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),function(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,a;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,a=t,setTimeout(function(){0===r.subscribers.size&&D(a,r)},3e3))})}(c,d,o,i),c.promise.then(function(n){return{result:Gn(n.result,e,null==u?void 0:u.optimisticOps,a,c,t)}})}})}})}};function Kn(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var Jn=(Yn.prototype.version=function(e){if(isNaN(e)||e<.1)throw new H.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(tn),n.stores({}),this._state.autoSchema=!1,n)},Yn.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?e():new ke(function(e,n){if(t._state.openComplete)return n(new H.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new H.DatabaseClosed);t.open().catch(J)}t._state.dbReadyPromise.then(e,n)}).then(e)},Yn.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:a}),e.sort(function(e,t){return e.level-t.level}),this},Yn.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},Yn.prototype.open=function(){var e=this;return qe(me,function(){return Mn(e)})},Yn.prototype._close=function(){var e=this._state,t=et.indexOf(this);if(0<=t&&et.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new ke(function(t,n){e.cancelOpen=n}))},Yn.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new H.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new H.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},Yn.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new ke(function(a,o){function i(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Oe(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,fn(r)||n===tt||pn(r,e).delete(n).catch(J),a()}),n.onerror=Wt(o),n.onblocked=t._fireOnBlocked}if(n)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},Yn.prototype.backendDB=function(){return this.idbdb},Yn.prototype.isOpen=function(){return null!==this.idbdb},Yn.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Yn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Yn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yn.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Yn.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new H.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];return n=a.pop(),[e,x(a),n]}.apply(this,arguments);return this._transaction.apply(this,e)},Yn.prototype._transaction=function(e,t,n){var r=this,a=we.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var o,i,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(i=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===nt)o=nt;else{if("rw"!=e&&e!=rt)throw new H.InvalidArgument("Invalid transaction mode: "+e);o=rt}if(a){if(a.mode===nt&&o===rt){if(!s)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&i.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!s)throw new H.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),s&&a&&!a.active&&(a=null)}}catch(n){return a?a._promise(null,function(e,t){t(n)}):Ye(n)}var c=function e(t,n,r,a,o){return ke.resolve().then(function(){var i=we.transless||we,s=t._createTransaction(n,r,t._dbSchema,a);if(s.explicit=!0,i={trans:s,transless:i},a)s.idbtrans=a.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(i){return i.name===z.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,o)})):Ye(i)}var c,l=F(o);return l&&Ue(),i=ke.follow(function(){var e;(c=o.call(s,s))&&(l?(e=je.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=Rn(c)))},i),(c&&"function"==typeof c.then?ke.resolve(c).then(function(e){return s.active?e:Ye(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):i.then(function(){return c})).then(function(e){return a&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),Ye(e)})})}.bind(null,this,o,i,a,n);return a?a._promise(o,c,"lock"):we.trans?qe(we.transless,function(){return r._whenReady(c)}):this._whenReady(c)},Yn.prototype.table=function(e){if(!u(this._allTables,e))throw new H.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Yn);function Yn(e,n){var r=this;this._middlewares={},this.verno=0;var a=Yn.dependencies;this._options=n=t({addons:Yn.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},a=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,i,s,c,l,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J,dbReadyPromise:null,cancelOpen:J,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new ke(function(e){u.dbReadyResolve=e}),u.openCanceller=new ke(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=ft(this,"populate","blocked","versionchange","close",{ready:[re,J]}),this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(t,n){Yn.vip(function(){var a,o=r._state;o.openComplete?(o.dbOpenError||ke.resolve().then(t),n&&e(t)):o.onReadyBeingFired?(o.onReadyBeingFired.push(t),n&&e(t)):(e(t),a=r,n||e(function e(){a.on.ready.unsubscribe(t),a.on.ready.unsubscribe(e)}))})}}),this.Collection=(o=this,ht(Pt.prototype,function(e,t){this.db=o;var n=ot,r=null;if(t)try{n=t()}catch(e){r=e}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:e!==Y?e:null}})),this.Table=(i=this,ht(dt.prototype,function(e,t,n){this.db=i,this._tx=n,this.name=e,this.schema=t,this.hook=i._allTables[e]?i._allTables[e].hook:ft(null,{creating:[X,J],reading:[Z,Y],updating:[te,J],deleting:[ee,J]})})),this.Transaction=(s=this,ht(Ut.prototype,function(e,t,n,r,a){var o=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=ft(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Ye(e)})})),this.Version=(c=this,ht(un.prototype,function(e){this.db=c,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(l=this,ht(Dt.prototype,function(e,t,n){if(this.db=l,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Ht(n.IDBKeyRange),this._createTransaction=function(e,t,n,a){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),et.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Ln),this.use(qn),this.use(jn),this.use(Dn),this.use(Fn);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return Kn(r.table(e),d)};var a=Reflect.get(e,t,n);return a instanceof dt?Kn(a,d):"tables"===t?a.map(function(e){return Kn(e,d)}):"_createTransaction"===t?function(){return Kn(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(r)})}N="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var Zn,Qn=(Xn.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},Xn.prototype[N]=function(){return this},Xn);function Xn(e){this._subscribe=e}try{Zn={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(_){Zn={indexedDB:null,IDBKeyRange:null}}function er(e){var t,n=!1,r=new Qn(function(r){var a,o=F(e),i=!1,s={},c={},l={get closed(){return i},unsubscribe:function(){i||(i=!0,a&&a.abort(),d&&$t.storagemutated.unsubscribe(f))}};r.start&&r.start(l);var d=!1,p=function(){return Je(h)},f=function(e){Cn(s,e),Pn(c,s)&&p()},h=function(){var l,h,g;!i&&Zn.indexedDB&&(s={},l={},a&&a.abort(),a=new AbortController,g=function(t){var n=Ee();try{o&&Ue();var r=$e(e,t);return r=o?r.finally(je):r}finally{n&&Te()}}(h={subscr:l,signal:a.signal,requery:p,querier:e,trans:null}),Promise.resolve(g).then(function(e){n=!0,t=e,i||h.signal.aborted||(s={},function(e){for(var t in e)if(u(e,t))return;return 1}(c=l)||d||($t(Nt,f),d=!0),Je(function(){return!i&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||i||Je(function(){i||r.error&&r.error(e)})}))};return setTimeout(p,0),l});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var tr=Jn;function nr(e){var t=ar;try{ar=!0,$t.storagemutated.fire(e),En(e,!0)}finally{ar=t}}d(tr,t(t({},K),{delete:function(e){return new tr(e,{addons:[]}).delete()},exists:function(e){return new tr(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=tr.dependencies).indexedDB,t=t.IDBKeyRange,(fn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==tt})}):pn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Ye(new H.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return we.trans?qe(we.transless,e):e()},vip:hn,async:function(e){return function(){try{var t=Rn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(t){return Ye(t)}}},spawn:function(e,t,n){try{var r=Rn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ke.resolve(r)}catch(e){return Ye(e)}},currentTransaction:{get:function(){return we.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?tr.ignoreTransaction(e):e).timeout(t||6e4),we.trans?we.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ae},set:function(e){oe(e)}},derive:h,extend:s,props:d,override:y,Events:ft,on:$t,liveQuery:er,extendObservabilitySet:Cn,getByKeyPath:k,setByKeyPath:S,delByKeyPath:function(e,t){"string"==typeof t?S(e,t,void 0):"length"in t&&[].map.call(t,function(t){S(e,t,void 0)})},shallowClone:C,deepClone:E,getObjectDiff:Bn,cmp:ct,asap:b,minKey:-1/0,addons:[],connections:et,errnames:z,dependencies:Zn,cache:xn,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),tr.maxKey=Ht(tr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&($t(Nt,function(e){ar||(e=new CustomEvent(Lt,{detail:e}),ar=!0,dispatchEvent(e),ar=!1)}),addEventListener(Lt,function(e){e=e.detail,ar||nr(e)}));var rr,ar=!1,or=function(){};return"undefined"!=typeof BroadcastChannel&&((or=function(){(rr=new BroadcastChannel(Lt)).onmessage=function(e){return e.data&&nr(e.data)}})(),"function"==typeof rr.unref&&rr.unref(),$t(Nt,function(e){ar||rr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!Jn.disableBfCache&&e.persisted){ae&&console.debug("Dexie: handling persisted pagehide"),null!=rr&&rr.close();for(var t=0,n=et;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Jn.disableBfCache&&e.persisted&&(ae&&console.debug("Dexie: handling persisted pageshow"),or(),nr({all:new mn(-1/0,[[]])}))})),ke.rejectionMapper=function(e,t){return!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!q[e.name]?e:(t=new q[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},oe(ae),t(Jn,Object.freeze({__proto__:null,Dexie:Jn,liveQuery:er,Entity:st,cmp:ct,PropModification:St,replacePrefix:function(e,t){return new St({replacePrefix:[e,t]})},add:function(e){return new St({add:e})},remove:function(e){return new St({remove:e})},default:Jn,RangeSet:mn,mergeRanges:yn,rangesOverlap:vn}),{default:Jn}),Jn}()},352:(e,t,n)=>{n.r(t),n.d(t,{ApiError:()=>s,ApiRequestError:()=>c,AuthTokenExpiredError:()=>l,AuthorizationError:()=>u,InitializationError:()=>d,InteropError:()=>p,ParameterError:()=>f,TeamsConnection:()=>h,connect:()=>g,disableLogging:()=>m,enableLogging:()=>w});var r={876:e=>{const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},60:(e,t)=>{t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),i=o[0],c=o[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,c)),u=0,d=c>0?i-4:i;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,o=[],i=16383,s=0,l=r-a;s<l;s+=i)o.push(c(e,s,s+i>l?l:s+i));return 1===a?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=o[i],r[o.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var a,o,i=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(o=a)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},485:(e,t,n)=>{const r=n(60),a=n(215),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=s(n);const a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const a=function(e){if(c.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|h(e))}function p(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function h(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(a)return r?-1:H(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,a){let o,i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*i}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function b(e,t,n,r){n=Number(n)||0;const a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;const o=t.length;let i;for(r>o/2&&(r=o/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(Y(r))return i;e[n+i]=r}return i}function k(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function S(e,t,n,r){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return K(q(t),e,n,r)}function P(e,t,n,r){return K(function(e,t){let n,r,a;const o=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);const r=[];let a=t;for(;a<n;){const t=e[a];let o=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=n){let n,r,s,c;switch(i){case 1:t<128&&(o=t);break;case 2:n=e[a+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[a+1],r=e[a+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[a+1],r=e[a+2],s=e[a+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=i}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))a+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,a){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(a>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0);const s=Math.min(o,i),l=this.slice(r,a),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){o=l[e],i=u[e];break}return o<i?-1:i<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function A(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function E(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function T(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let a="";for(let r=t;r<n;++r)a+=Z[e[r]];return a}function M(e,t,n){const r=e.slice(t,n);let a="";for(let e=0;e<r.length-1;e+=2)a+=String.fromCharCode(r[e]+256*r[e+1]);return a}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,a,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,a){j(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function B(e,t,n,r,a){j(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function W(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return t=+t,n>>>=0,o||W(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return t=+t,n>>>=0,o||W(e,0,n,8),a.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))}),c.prototype.readBigUInt64BE=Q(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(a)}),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);let r=t,a=1,o=this[e+--r];for(;r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=Q(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);let a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);let a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q(function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Q(function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let a=0,o=1,i=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let a=n-1,o=1,i=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q(function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Q(function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const a=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),i=o.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%i]}return this};const L={};function $(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,r,a,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let a;throw a=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new L.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(r,a,o)}function V(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),$("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,a=n;return Number.isInteger(n)&&Math.abs(n)>2**32?a=U(String(n)):"bigint"==typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=U(a)),a+="n"),r+=` It must be ${t}. Received ${a}`,r},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const r=e.length;let a=null;const o=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){let a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let a=0;a<16;++a)t[r+a]=e[n]+e[a]}return t}();function Q(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},465:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function a(o){r.once&&e.removeEventListener(t,a),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},215:(e,t)=>{t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=p,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,r),o-=l}return(f?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,l=8*o-a-1,u=(1<<l)-1,d=u>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*c-1)*Math.pow(2,a),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),i=0));a>=8;e[n+f]=255&s,f+=h,s/=256,a-=8);for(i=i<<a|s,l+=a;l>0;e[n+f]=255&i,f+=h,i/=256,l-=8);e[n+f-h]|=128*g}},951:function(e,t,n){var r;e=n.nmd(e),function(){var a,o="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",c=32,l=128,u=1/0,d=9007199254740991,p=NaN,f=4294967295,h=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",w="[object Boolean]",y="[object Date]",v="[object Error]",b="[object Function]",k="[object GeneratorFunction]",S="[object Map]",C="[object Number]",P="[object Object]",x="[object Promise]",_="[object RegExp]",I="[object Set]",A="[object String]",E="[object Symbol]",T="[object WeakMap]",M="[object ArrayBuffer]",R="[object DataView]",O="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",W="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",$="[object Uint16Array]",U="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,q=RegExp(G.source),K=RegExp(H.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ae=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,be=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",_e="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="["+ke+"]",Ee="["+Ie+"]",Te="["+Se+"]",Me="\\d+",Re="["+Ce+"]",Oe="["+Pe+"]",De="[^"+ke+Ie+Me+Ce+Pe+xe+"]",Be="\\ud83c[\\udffb-\\udfff]",We="[^"+ke+"]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+xe+"]",$e="\\u200d",Ue="(?:"+Oe+"|"+De+")",je="(?:"+Le+"|"+De+")",Ve="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Te+"|"+Be+")?",He="["+_e+"]?",qe=He+Ge+"(?:"+$e+"(?:"+[We,Fe,Ne].join("|")+")"+He+Ge+")*",Ke="(?:"+[Re,Fe,Ne].join("|")+")"+qe,Je="(?:"+[We+Te+"?",Te,Fe,Ne,Ae].join("|")+")",Ye=RegExp("['’]","g"),Ze=RegExp(Te,"g"),Qe=RegExp(Be+"(?="+Be+")|"+Je+qe,"g"),Xe=RegExp([Le+"?"+Oe+"+"+Ve+"(?="+[Ee,Le,"$"].join("|")+")",je+"+"+ze+"(?="+[Ee,Le+Ue,"$"].join("|")+")",Le+"?"+Ue+"+"+Ve,Le+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Me,Ke].join("|"),"g"),et=RegExp("["+$e+ke+Se+_e+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,at={};at[O]=at[D]=at[B]=at[W]=at[F]=at[N]=at[L]=at[$]=at[U]=!0,at[g]=at[m]=at[M]=at[w]=at[R]=at[y]=at[v]=at[b]=at[S]=at[C]=at[P]=at[_]=at[I]=at[A]=at[T]=!1;var ot={};ot[g]=ot[m]=ot[M]=ot[R]=ot[w]=ot[y]=ot[O]=ot[D]=ot[B]=ot[W]=ot[F]=ot[S]=ot[C]=ot[P]=ot[_]=ot[I]=ot[A]=ot[E]=ot[N]=ot[L]=ot[$]=ot[U]=!0,ot[v]=ot[b]=ot[T]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ct=parseInt,lt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ut="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ut||Function("return this")(),pt=t&&!t.nodeType&&t,ft=pt&&e&&!e.nodeType&&e,ht=ft&&ft.exports===pt,gt=ht&&lt.process,mt=function(){try{return ft&&ft.require&&ft.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),wt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,vt=mt&&mt.isMap,bt=mt&&mt.isRegExp,kt=mt&&mt.isSet,St=mt&&mt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(r,i,n(i),e)}return r}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function _t(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}function Et(e,t){return!(null==e||!e.length)&&Lt(e,t,0)>-1}function Tt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Mt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Rt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Ot(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}function Dt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Wt=Vt("length");function Ft(e,t,n){var r;return n(e,function(e,n,a){if(t(e,n,a))return r=n,!1}),r}function Nt(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function Lt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Nt(e,Ut,n)}function $t(e,t,n,r){for(var a=n-1,o=e.length;++a<o;)if(r(e[a],t))return a;return-1}function Ut(e){return e!=e}function jt(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:p}function Vt(e){return function(t){return null==t?a:t[e]}}function zt(e){return function(t){return null==e?a:e[t]}}function Gt(e,t,n,r,a){return a(e,function(e,a,o){n=r?(r=!1,e):t(n,e,a,o)}),n}function Ht(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);i!==a&&(n=n===a?i:n+i)}return n}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Jt(e){return function(t){return e(t)}}function Yt(e,t){return Mt(t,function(t){return e[t]})}function Zt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Lt(t,e[n],0)>-1;);return n}function Xt(e,t){for(var n=e.length;n--&&Lt(t,e[n],0)>-1;);return n}var en=zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tn=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+it[e]}function rn(e){return et.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function on(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n];i!==t&&i!==s||(e[n]=s,o[a++]=n)}return o}function cn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function ln(e){return rn(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Wt(e)}function un(e){return rn(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var pn=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fn=function e(t){var n,r=(t=null==t?dt:fn.defaults(dt.Object(),t,fn.pick(dt,nt))).Array,ae=t.Date,ke=t.Error,Se=t.Function,Ce=t.Math,Pe=t.Object,xe=t.RegExp,_e=t.String,Ie=t.TypeError,Ae=r.prototype,Ee=Se.prototype,Te=Pe.prototype,Me=t["__core-js_shared__"],Re=Ee.toString,Oe=Te.hasOwnProperty,De=0,Be=(n=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",We=Te.toString,Fe=Re.call(Pe),Ne=dt._,Le=xe("^"+Re.call(Oe).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=ht?t.Buffer:a,Ue=t.Symbol,je=t.Uint8Array,Ve=$e?$e.allocUnsafe:a,ze=on(Pe.getPrototypeOf,Pe),Ge=Pe.create,He=Te.propertyIsEnumerable,qe=Ae.splice,Ke=Ue?Ue.isConcatSpreadable:a,Je=Ue?Ue.iterator:a,Qe=Ue?Ue.toStringTag:a,et=function(){try{var e=so(Pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==dt.Date.now&&ae.now,ut=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,gt=Pe.getOwnPropertySymbols,mt=$e?$e.isBuffer:a,Wt=t.isFinite,zt=Ae.join,hn=on(Pe.keys,Pe),gn=Ce.max,mn=Ce.min,wn=ae.now,yn=t.parseInt,vn=Ce.random,bn=Ae.reverse,kn=so(t,"DataView"),Sn=so(t,"Map"),Cn=so(t,"Promise"),Pn=so(t,"Set"),xn=so(t,"WeakMap"),_n=so(Pe,"create"),In=xn&&new xn,An={},En=Do(kn),Tn=Do(Sn),Mn=Do(Cn),Rn=Do(Pn),On=Do(xn),Dn=Ue?Ue.prototype:a,Bn=Dn?Dn.valueOf:a,Wn=Dn?Dn.toString:a;function Fn(e){if(Zi(e)&&!$i(e)&&!(e instanceof Un)){if(e instanceof $n)return e;if(Oe.call(e,"__wrapped__"))return Bo(e)}return new $n(e)}var Nn=function(){function e(){}return function(t){if(!Yi(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Ln(){}function $n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new zn;++t<n;)this.add(e[t])}function Hn(e){var t=this.__data__=new Vn(e);this.size=t.size}function qn(e,t){var n=$i(e),r=!n&&Li(e),a=!n&&!r&&zi(e),o=!n&&!r&&!a&&os(e),i=n||r||a||o,s=i?qt(e.length,_e):[],c=s.length;for(var l in e)!t&&!Oe.call(e,l)||i&&("length"==l||a&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||go(l,c))||s.push(l);return s}function Kn(e){var t=e.length;return t?e[zr(0,t-1)]:a}function Jn(e,t){return Mo(xa(e),ar(t,0,e.length))}function Yn(e){return Mo(xa(e))}function Zn(e,t,n){(n!==a&&!Wi(e[t],n)||n===a&&!(t in e))&&nr(e,t,n)}function Qn(e,t,n){var r=e[t];Oe.call(e,t)&&Wi(r,n)&&(n!==a||t in e)||nr(e,t,n)}function Xn(e,t){for(var n=e.length;n--;)if(Wi(e[n][0],t))return n;return-1}function er(e,t,n,r){return lr(e,function(e,a,o){t(r,e,n(e),o)}),r}function tr(e,t){return e&&_a(t,Is(t),e)}function nr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(e,t){for(var n=-1,o=t.length,i=r(o),s=null==e;++n<o;)i[n]=s?a:Ss(e,t[n]);return i}function ar(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function or(e,t,n,r,o,i){var s,c=1&t,l=2&t,u=4&t;if(n&&(s=o?n(e,r,o,i):n(e)),s!==a)return s;if(!Yi(e))return e;var d=$i(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return xa(e,s)}else{var p=uo(e),f=p==b||p==k;if(zi(e))return va(e,c);if(p==P||p==g||f&&!o){if(s=l||f?{}:fo(e),!c)return l?function(e,t){return _a(e,lo(e),t)}(e,function(e,t){return e&&_a(t,As(t),e)}(s,e)):function(e,t){return _a(e,co(e),t)}(e,tr(s,e))}else{if(!ot[p])return o?e:{};s=function(e,t,n){var r,a=e.constructor;switch(t){case M:return ba(e);case w:case y:return new a(+e);case R:return function(e,t){var n=t?ba(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case D:case B:case W:case F:case N:case L:case $:case U:return ka(e,n);case S:return new a;case C:case A:return new a(e);case _:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new a;case E:return r=e,Bn?Pe(Bn.call(r)):{}}}(e,p,c)}}i||(i=new Hn);var h=i.get(e);if(h)return h;i.set(e,s),ns(e)?e.forEach(function(r){s.add(or(r,t,n,r,e,i))}):Qi(e)&&e.forEach(function(r,a){s.set(a,or(r,t,n,a,e,i))});var m=d?a:(u?l?eo:Xa:l?As:Is)(e);return xt(m||e,function(r,a){m&&(r=e[a=r]),Qn(s,a,or(r,t,n,a,e,i))}),s}function ir(e,t,n){var r=n.length;if(null==e)return!r;for(e=Pe(e);r--;){var o=n[r],i=t[o],s=e[o];if(s===a&&!(o in e)||!i(s))return!1}return!0}function sr(e,t,n){if("function"!=typeof e)throw new Ie(o);return Io(function(){e.apply(a,n)},t)}function cr(e,t,n,r){var a=-1,o=Et,i=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Mt(t,Jt(n))),r?(o=Tt,i=!1):t.length>=200&&(o=Zt,i=!1,t=new Gn(t));e:for(;++a<s;){var u=e[a],d=null==n?u:n(u);if(u=r||0!==u?u:0,i&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else o(t,d,r)||c.push(u)}return c}Fn.templateSettings={escape:J,evaluate:Y,interpolate:Z,variable:"",imports:{_:Fn}},Fn.prototype=Ln.prototype,Fn.prototype.constructor=Fn,$n.prototype=Nn(Ln.prototype),$n.prototype.constructor=$n,Un.prototype=Nn(Ln.prototype),Un.prototype.constructor=Un,jn.prototype.clear=function(){this.__data__=_n?_n(null):{},this.size=0},jn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jn.prototype.get=function(e){var t=this.__data__;if(_n){var n=t[e];return n===i?a:n}return Oe.call(t,e)?t[e]:a},jn.prototype.has=function(e){var t=this.__data__;return _n?t[e]!==a:Oe.call(t,e)},jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_n&&t===a?i:t,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(e){var t=this.__data__,n=Xn(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),--this.size,0))},Vn.prototype.get=function(e){var t=this.__data__,n=Xn(t,e);return n<0?a:t[n][1]},Vn.prototype.has=function(e){return Xn(this.__data__,e)>-1},Vn.prototype.set=function(e,t){var n=this.__data__,r=Xn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(Sn||Vn),string:new jn}},zn.prototype.delete=function(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t},zn.prototype.get=function(e){return oo(this,e).get(e)},zn.prototype.has=function(e){return oo(this,e).has(e)},zn.prototype.set=function(e,t){var n=oo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Gn.prototype.add=Gn.prototype.push=function(e){return this.__data__.set(e,i),this},Gn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Hn.prototype.get=function(e){return this.__data__.get(e)},Hn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zn(r)}return n.set(e,t),this.size=n.size,this};var lr=Ea(wr),ur=Ea(yr,!0);function dr(e,t){var n=!0;return lr(e,function(e,r,a){return n=!!t(e,r,a)}),n}function pr(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],s=t(i);if(null!=s&&(c===a?s==s&&!as(s):n(s,c)))var c=s,l=i}return l}function fr(e,t){var n=[];return lr(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function hr(e,t,n,r,a){var o=-1,i=e.length;for(n||(n=ho),a||(a=[]);++o<i;){var s=e[o];t>0&&n(s)?t>1?hr(s,t-1,n,r,a):Rt(a,s):r||(a[a.length]=s)}return a}var gr=Ta(),mr=Ta(!0);function wr(e,t){return e&&gr(e,t,Is)}function yr(e,t){return e&&mr(e,t,Is)}function vr(e,t){return At(t,function(t){return qi(e[t])})}function br(e,t){for(var n=0,r=(t=ga(t,e)).length;null!=e&&n<r;)e=e[Oo(t[n++])];return n&&n==r?e:a}function kr(e,t,n){var r=t(e);return $i(e)?r:Rt(r,n(e))}function Sr(e){return null==e?e===a?"[object Undefined]":"[object Null]":Qe&&Qe in Pe(e)?function(e){var t=Oe.call(e,Qe),n=e[Qe];try{e[Qe]=a;var r=!0}catch(e){}var o=We.call(e);return r&&(t?e[Qe]=n:delete e[Qe]),o}(e):function(e){return We.call(e)}(e)}function Cr(e,t){return e>t}function Pr(e,t){return null!=e&&Oe.call(e,t)}function xr(e,t){return null!=e&&t in Pe(e)}function _r(e,t,n){for(var o=n?Tt:Et,i=e[0].length,s=e.length,c=s,l=r(s),u=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Mt(p,Jt(t))),u=mn(p.length,u),l[c]=!n&&(t||i>=120&&p.length>=120)?new Gn(c&&p):a}p=e[0];var f=-1,h=l[0];e:for(;++f<i&&d.length<u;){var g=p[f],m=t?t(g):g;if(g=n||0!==g?g:0,!(h?Zt(h,m):o(d,m,n))){for(c=s;--c;){var w=l[c];if(!(w?Zt(w,m):o(e[c],m,n)))continue e}h&&h.push(m),d.push(g)}}return d}function Ir(e,t,n){var r=null==(e=Po(e,t=ga(t,e)))?e:e[Oo(Ho(t))];return null==r?a:Ct(r,e,n)}function Ar(e){return Zi(e)&&Sr(e)==g}function Er(e,t,n,r,o){return e===t||(null==e||null==t||!Zi(e)&&!Zi(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var s=$i(e),c=$i(t),l=s?m:uo(e),u=c?m:uo(t),d=(l=l==g?P:l)==P,p=(u=u==g?P:u)==P,f=l==u;if(f&&zi(e)){if(!zi(t))return!1;s=!0,d=!1}if(f&&!d)return i||(i=new Hn),s||os(e)?Za(e,t,n,r,o,i):function(e,t,n,r,a,o,i){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case w:case y:case C:return Wi(+e,+t);case v:return e.name==t.name&&e.message==t.message;case _:case A:return e==t+"";case S:var s=an;case I:var c=1&r;if(s||(s=cn),e.size!=t.size&&!c)return!1;var l=i.get(e);if(l)return l==t;r|=2,i.set(e,t);var u=Za(s(e),s(t),r,a,o,i);return i.delete(e),u;case E:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,l,n,r,o,i);if(!(1&n)){var h=d&&Oe.call(e,"__wrapped__"),b=p&&Oe.call(t,"__wrapped__");if(h||b){var k=h?e.value():e,x=b?t.value():t;return i||(i=new Hn),o(k,x,n,r,i)}}return!!f&&(i||(i=new Hn),function(e,t,n,r,o,i){var s=1&n,c=Xa(e),l=c.length;if(l!=Xa(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:Oe.call(t,d)))return!1}var p=i.get(e),f=i.get(t);if(p&&f)return p==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var g=s;++u<l;){var m=e[d=c[u]],w=t[d];if(r)var y=s?r(w,m,d,t,e,i):r(m,w,d,e,t,i);if(!(y===a?m===w||o(m,w,n,r,i):y)){h=!1;break}g||(g="constructor"==d)}if(h&&!g){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i))}(e,t,n,r,Er,o))}function Tr(e,t,n,r){var o=n.length,i=o,s=!r;if(null==e)return!i;for(e=Pe(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<i;){var l=(c=n[o])[0],u=e[l],d=c[1];if(s&&c[2]){if(u===a&&!(l in e))return!1}else{var p=new Hn;if(r)var f=r(u,d,l,e,t,p);if(!(f===a?Er(d,u,3,r,p):f))return!1}}return!0}function Mr(e){return!(!Yi(e)||(t=e,Be&&Be in t))&&(qi(e)?Le:ge).test(Do(e));var t}function Rr(e){return"function"==typeof e?e:null==e?Xs:"object"==typeof e?$i(e)?Fr(e[0],e[1]):Wr(e):cc(e)}function Or(e){if(!bo(e))return hn(e);var t=[];for(var n in Pe(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dr(e,t){return e<t}function Br(e,t){var n=-1,a=ji(e)?r(e.length):[];return lr(e,function(e,r,o){a[++n]=t(e,r,o)}),a}function Wr(e){var t=io(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(n){return n===e||Tr(n,e,t)}}function Fr(e,t){return wo(e)&&ko(t)?So(Oo(e),t):function(n){var r=Ss(n,e);return r===a&&r===t?Cs(n,e):Er(t,r,3)}}function Nr(e,t,n,r,o){e!==t&&gr(t,function(i,s){if(o||(o=new Hn),Yi(i))!function(e,t,n,r,o,i,s){var c=xo(e,n),l=xo(t,n),u=s.get(l);if(u)Zn(e,n,u);else{var d=i?i(c,l,n+"",e,t,s):a,p=d===a;if(p){var f=$i(l),h=!f&&zi(l),g=!f&&!h&&os(l);d=l,f||h||g?$i(c)?d=c:Vi(c)?d=xa(c):h?(p=!1,d=va(l,!0)):g?(p=!1,d=ka(l,!0)):d=[]:es(l)||Li(l)?(d=c,Li(c)?d=fs(c):Yi(c)&&!qi(c)||(d=fo(l))):p=!1}p&&(s.set(l,d),o(d,l,r,i,s),s.delete(l)),Zn(e,n,d)}}(e,t,s,n,Nr,r,o);else{var c=r?r(xo(e,s),i,s+"",e,t,o):a;c===a&&(c=i),Zn(e,s,c)}},As)}function Lr(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:a}function $r(e,t,n){t=t.length?Mt(t,function(e){return $i(e)?function(t){return br(t,1===e.length?e[0]:e)}:e}):[Xs];var r=-1;t=Mt(t,Jt(ao()));var a=Br(e,function(e,n,a){var o=Mt(t,function(t){return t(e)});return{criteria:o,index:++r,value:e}});return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,o=t.criteria,i=a.length,s=n.length;++r<i;){var c=Sa(a[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Ur(e,t,n){for(var r=-1,a=t.length,o={};++r<a;){var i=t[r],s=br(e,i);n(s,i)&&Jr(o,ga(i,e),s)}return o}function jr(e,t,n,r){var a=r?$t:Lt,o=-1,i=t.length,s=e;for(e===t&&(t=xa(t)),n&&(s=Mt(e,Jt(n)));++o<i;)for(var c=0,l=t[o],u=n?n(l):l;(c=a(s,u,c,r))>-1;)s!==e&&qe.call(s,c,1),qe.call(e,c,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==o){var o=a;go(a)?qe.call(e,a,1):sa(e,a)}}return e}function zr(e,t){return e+ft(vn()*(t-e+1))}function Gr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Hr(e,t){return Ao(Co(e,t,Xs),e+"")}function qr(e){return Kn(Ws(e))}function Kr(e,t){var n=Ws(e);return Mo(n,ar(t,0,n.length))}function Jr(e,t,n,r){if(!Yi(e))return e;for(var o=-1,i=(t=ga(t,e)).length,s=i-1,c=e;null!=c&&++o<i;){var l=Oo(t[o]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var d=c[l];(u=r?r(d,l,c):a)===a&&(u=Yi(d)?d:go(t[o+1])?[]:{})}Qn(c,l,u),c=c[l]}return e}var Yr=In?function(e,t){return In.set(e,t),e}:Xs,Zr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Ys(t),writable:!0})}:Xs;function Qr(e){return Mo(Ws(e))}function Xr(e,t,n){var a=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=r(o);++a<o;)i[a]=e[a+t];return i}function ea(e,t){var n;return lr(e,function(e,r,a){return!(n=t(e,r,a))}),!!n}function ta(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var o=r+a>>>1,i=e[o];null!==i&&!as(i)&&(n?i<=t:i<t)?r=o+1:a=o}return a}return na(e,t,Xs,n)}function na(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var s=(t=n(t))!=t,c=null===t,l=as(t),u=t===a;o<i;){var d=ft((o+i)/2),p=n(e[d]),f=p!==a,h=null===p,g=p==p,m=as(p);if(s)var w=r||g;else w=u?g&&(r||f):c?g&&f&&(r||!h):l?g&&f&&!h&&(r||!m):!h&&!m&&(r?p<=t:p<t);w?o=d+1:i=d}return mn(i,4294967294)}function ra(e,t){for(var n=-1,r=e.length,a=0,o=[];++n<r;){var i=e[n],s=t?t(i):i;if(!n||!Wi(s,c)){var c=s;o[a++]=0===i?0:i}}return o}function aa(e){return"number"==typeof e?e:as(e)?p:+e}function oa(e){if("string"==typeof e)return e;if($i(e))return Mt(e,oa)+"";if(as(e))return Wn?Wn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ia(e,t,n){var r=-1,a=Et,o=e.length,i=!0,s=[],c=s;if(n)i=!1,a=Tt;else if(o>=200){var l=t?null:Ga(e);if(l)return cn(l);i=!1,a=Zt,c=new Gn}else c=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,i&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else a(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function sa(e,t){return null==(e=Po(e,t=ga(t,e)))||delete e[Oo(Ho(t))]}function ca(e,t,n,r){return Jr(e,t,n(br(e,t)),r)}function la(e,t,n,r){for(var a=e.length,o=r?a:-1;(r?o--:++o<a)&&t(e[o],o,e););return n?Xr(e,r?0:o,r?o+1:a):Xr(e,r?o+1:0,r?a:o)}function ua(e,t){var n=e;return n instanceof Un&&(n=n.value()),Ot(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},n)}function da(e,t,n){var a=e.length;if(a<2)return a?ia(e[0]):[];for(var o=-1,i=r(a);++o<a;)for(var s=e[o],c=-1;++c<a;)c!=o&&(i[o]=cr(i[o]||s,e[c],t,n));return ia(hr(i,1),t,n)}function pa(e,t,n){for(var r=-1,o=e.length,i=t.length,s={};++r<o;){var c=r<i?t[r]:a;n(s,e[r],c)}return s}function fa(e){return Vi(e)?e:[]}function ha(e){return"function"==typeof e?e:Xs}function ga(e,t){return $i(e)?e:wo(e,t)?[e]:Ro(hs(e))}var ma=Hr;function wa(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Xr(e,t,n)}var ya=it||function(e){return dt.clearTimeout(e)};function va(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function ba(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function ka(e,t){var n=t?ba(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Sa(e,t){if(e!==t){var n=e!==a,r=null===e,o=e==e,i=as(e),s=t!==a,c=null===t,l=t==t,u=as(t);if(!c&&!u&&!i&&e>t||i&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!o)return 1;if(!r&&!i&&!u&&e<t||u&&n&&o&&!r&&!i||c&&n&&o||!s&&o||!l)return-1}return 0}function Ca(e,t,n,a){for(var o=-1,i=e.length,s=n.length,c=-1,l=t.length,u=gn(i-s,0),d=r(l+u),p=!a;++c<l;)d[c]=t[c];for(;++o<s;)(p||o<i)&&(d[n[o]]=e[o]);for(;u--;)d[c++]=e[o++];return d}function Pa(e,t,n,a){for(var o=-1,i=e.length,s=-1,c=n.length,l=-1,u=t.length,d=gn(i-c,0),p=r(d+u),f=!a;++o<d;)p[o]=e[o];for(var h=o;++l<u;)p[h+l]=t[l];for(;++s<c;)(f||o<i)&&(p[h+n[s]]=e[o++]);return p}function xa(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function _a(e,t,n,r){var o=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var c=t[i],l=r?r(n[c],e[c],c,n,e):a;l===a&&(l=e[c]),o?nr(n,c,l):Qn(n,c,l)}return n}function Ia(e,t){return function(n,r){var a=$i(n)?Pt:er,o=t?t():{};return a(n,e,ao(r,2),o)}}function Aa(e){return Hr(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:a,s=o>2?n[2]:a;for(i=e.length>3&&"function"==typeof i?(o--,i):a,s&&mo(n[0],n[1],s)&&(i=o<3?a:i,o=1),t=Pe(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t})}function Ea(e,t){return function(n,r){if(null==n)return n;if(!ji(n))return e(n,r);for(var a=n.length,o=t?a:-1,i=Pe(n);(t?o--:++o<a)&&!1!==r(i[o],o,i););return n}}function Ta(e){return function(t,n,r){for(var a=-1,o=Pe(t),i=r(t),s=i.length;s--;){var c=i[e?s:++a];if(!1===n(o[c],c,o))break}return t}}function Ma(e){return function(t){var n=rn(t=hs(t))?un(t):a,r=n?n[0]:t.charAt(0),o=n?wa(n,1).join(""):t.slice(1);return r[e]()+o}}function Ra(e){return function(t){return Ot(qs(Ls(t).replace(Ye,"")),e,"")}}function Oa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),r=e.apply(n,t);return Yi(r)?r:n}}function Da(e){return function(t,n,r){var o=Pe(t);if(!ji(t)){var i=ao(n,3);t=Is(t),n=function(e){return i(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[i?t[s]:s]:a}}function Ba(e){return Qa(function(t){var n=t.length,r=n,i=$n.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ie(o);if(i&&!c&&"wrapper"==no(s))var c=new $n([],!0)}for(r=c?r:n;++r<n;){var l=no(s=t[r]),u="wrapper"==l?to(s):a;c=u&&yo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[no(u[0])].apply(c,u[3]):1==s.length&&yo(s)?c[l]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&$i(r))return c.plant(r).value();for(var a=0,o=n?t[a].apply(this,e):r;++a<n;)o=t[a].call(this,o);return o}})}function Wa(e,t,n,o,i,s,c,u,d,p){var f=t&l,h=1&t,g=2&t,m=24&t,w=512&t,y=g?a:Oa(e);return function l(){for(var v=arguments.length,b=r(v),k=v;k--;)b[k]=arguments[k];if(m)var S=ro(l),C=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,S);if(o&&(b=Ca(b,o,i,m)),s&&(b=Pa(b,s,c,m)),v-=C,m&&v<p){var P=sn(b,S);return Va(e,t,Wa,l.placeholder,n,b,P,u,d,p-v)}var x=h?n:this,_=g?x[e]:e;return v=b.length,u?b=function(e,t){for(var n=e.length,r=mn(t.length,n),o=xa(e);r--;){var i=t[r];e[r]=go(i,n)?o[i]:a}return e}(b,u):w&&v>1&&b.reverse(),f&&d<v&&(b.length=d),this&&this!==dt&&this instanceof l&&(_=y||Oa(_)),_.apply(x,b)}}function Fa(e,t){return function(n,r){return function(e,t,n,r){return wr(e,function(e,a,o){t(r,n(e),a,o)}),r}(n,e,t(r),{})}}function Na(e,t){return function(n,r){var o;if(n===a&&r===a)return t;if(n!==a&&(o=n),r!==a){if(o===a)return r;"string"==typeof n||"string"==typeof r?(n=oa(n),r=oa(r)):(n=aa(n),r=aa(r)),o=e(n,r)}return o}}function La(e){return Qa(function(t){return t=Mt(t,Jt(ao())),Hr(function(n){var r=this;return e(t,function(e){return Ct(e,r,n)})})})}function $a(e,t){var n=(t=t===a?" ":oa(t)).length;if(n<2)return n?Gr(t,e):t;var r=Gr(t,pt(e/ln(t)));return rn(t)?wa(un(r),0,e).join(""):r.slice(0,e)}function Ua(e){return function(t,n,o){return o&&"number"!=typeof o&&mo(t,n,o)&&(n=o=a),t=ls(t),n===a?(n=t,t=0):n=ls(n),function(e,t,n,a){for(var o=-1,i=gn(pt((t-e)/(n||1)),0),s=r(i);i--;)s[a?i:++o]=e,e+=n;return s}(t,n,o=o===a?t<n?1:-1:ls(o),e)}}function ja(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ps(t),n=ps(n)),e(t,n)}}function Va(e,t,n,r,o,i,s,l,u,d){var p=8&t;t|=p?c:64,4&(t&=~(p?64:c))||(t&=-4);var f=[e,t,o,p?i:a,p?s:a,p?a:i,p?a:s,l,u,d],h=n.apply(a,f);return yo(e)&&_o(h,f),h.placeholder=r,Eo(h,e,t)}function za(e){var t=Ce[e];return function(e,n){if(e=ps(e),(n=null==n?0:mn(us(n),292))&&Wt(e)){var r=(hs(e)+"e").split("e");return+((r=(hs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ga=Pn&&1/cn(new Pn([,-0]))[1]==u?function(e){return new Pn(e)}:ac;function Ha(e){return function(t){var n=uo(t);return n==S?an(t):n==I?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Mt(t,function(t){return[t,e[t]]})}(t,e(t))}}function qa(e,t,n,i,u,d,p,f){var h=2&t;if(!h&&"function"!=typeof e)throw new Ie(o);var g=i?i.length:0;if(g||(t&=-97,i=u=a),p=p===a?p:gn(us(p),0),f=f===a?f:us(f),g-=u?u.length:0,64&t){var m=i,w=u;i=u=a}var y=h?a:to(e),v=[e,t,n,i,u,m,w,d,p,f];if(y&&function(e,t){var n=e[1],r=t[1],a=n|r,o=a<131,i=r==l&&8==n||r==l&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!i)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ca(u,c,t[4]):c,e[4]=u?sn(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Pa(u,c,t[6]):c,e[6]=u?sn(e[5],s):t[6]),(c=t[7])&&(e[7]=c),r&l&&(e[8]=null==e[8]?t[8]:mn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(v,y),e=v[0],t=v[1],n=v[2],i=v[3],u=v[4],!(f=v[9]=v[9]===a?h?0:e.length:gn(v[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var o=Oa(e);return function i(){for(var s=arguments.length,c=r(s),l=s,u=ro(i);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:sn(c,u);return(s-=d.length)<n?Va(e,t,Wa,i.placeholder,a,c,d,a,a,n-s):Ct(this&&this!==dt&&this instanceof i?o:e,this,c)}}(e,t,f):t!=c&&33!=t||u.length?Wa.apply(a,v):function(e,t,n,a){var o=1&t,i=Oa(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=a.length,d=r(u+c),p=this&&this!==dt&&this instanceof t?i:e;++l<u;)d[l]=a[l];for(;c--;)d[l++]=arguments[++s];return Ct(p,o?n:this,d)}}(e,t,n,i);else var b=function(e,t,n){var r=1&t,a=Oa(e);return function t(){return(this&&this!==dt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,n);return Eo((y?Yr:_o)(b,v),e,t)}function Ka(e,t,n,r){return e===a||Wi(e,Te[n])&&!Oe.call(r,n)?t:e}function Ja(e,t,n,r,o,i){return Yi(e)&&Yi(t)&&(i.set(t,e),Nr(e,t,a,Ja,i),i.delete(t)),e}function Ya(e){return es(e)?a:e}function Za(e,t,n,r,o,i){var s=1&n,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var p=-1,f=!0,h=2&n?new Gn:a;for(i.set(e,t),i.set(t,e);++p<c;){var g=e[p],m=t[p];if(r)var w=s?r(m,g,p,t,e,i):r(g,m,p,e,t,i);if(w!==a){if(w)continue;f=!1;break}if(h){if(!Bt(t,function(e,t){if(!Zt(h,t)&&(g===e||o(g,e,n,r,i)))return h.push(t)})){f=!1;break}}else if(g!==m&&!o(g,m,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Qa(e){return Ao(Co(e,a,Uo),e+"")}function Xa(e){return kr(e,Is,co)}function eo(e){return kr(e,As,lo)}var to=In?function(e){return In.get(e)}:ac;function no(e){for(var t=e.name+"",n=An[t],r=Oe.call(An,t)?n.length:0;r--;){var a=n[r],o=a.func;if(null==o||o==e)return a.name}return t}function ro(e){return(Oe.call(Fn,"placeholder")?Fn:e).placeholder}function ao(){var e=Fn.iteratee||ec;return e=e===ec?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function oo(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function io(e){for(var t=Is(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,ko(a)]}return t}function so(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Mr(n)?n:a}var co=gt?function(e){return null==e?[]:(e=Pe(e),At(gt(e),function(t){return He.call(e,t)}))}:dc,lo=gt?function(e){for(var t=[];e;)Rt(t,co(e)),e=ze(e);return t}:dc,uo=Sr;function po(e,t,n){for(var r=-1,a=(t=ga(t,e)).length,o=!1;++r<a;){var i=Oo(t[r]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&Ji(a)&&go(i,a)&&($i(e)||Li(e))}function fo(e){return"function"!=typeof e.constructor||bo(e)?{}:Nn(ze(e))}function ho(e){return $i(e)||Li(e)||!!(Ke&&e&&e[Ke])}function go(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function mo(e,t,n){if(!Yi(n))return!1;var r=typeof t;return!!("number"==r?ji(n)&&go(t,n.length):"string"==r&&t in n)&&Wi(n[t],e)}function wo(e,t){if($i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!as(e))||X.test(e)||!Q.test(e)||null!=t&&e in Pe(t)}function yo(e){var t=no(e),n=Fn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var r=to(n);return!!r&&e===r[0]}(kn&&uo(new kn(new ArrayBuffer(1)))!=R||Sn&&uo(new Sn)!=S||Cn&&uo(Cn.resolve())!=x||Pn&&uo(new Pn)!=I||xn&&uo(new xn)!=T)&&(uo=function(e){var t=Sr(e),n=t==P?e.constructor:a,r=n?Do(n):"";if(r)switch(r){case En:return R;case Tn:return S;case Mn:return x;case Rn:return I;case On:return T}return t});var vo=Me?qi:pc;function bo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Te)}function ko(e){return e==e&&!Yi(e)}function So(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in Pe(n))}}function Co(e,t,n){return t=gn(t===a?e.length-1:t,0),function(){for(var a=arguments,o=-1,i=gn(a.length-t,0),s=r(i);++o<i;)s[o]=a[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=a[o];return c[t]=n(s),Ct(e,this,c)}}function Po(e,t){return t.length<2?e:br(e,Xr(t,0,-1))}function xo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _o=To(Yr),Io=ut||function(e,t){return dt.setTimeout(e,t)},Ao=To(Zr);function Eo(e,t,n){var r=t+"";return Ao(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return xt(h,function(n){var r="_."+n[0];t&n[1]&&!Et(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ie);return t?t[1].split(se):[]}(r),n)))}function To(e){var t=0,n=0;return function(){var r=wn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Mo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===a?r:t;++n<t;){var i=zr(n,o),s=e[i];e[i]=e[n],e[n]=s}return e.length=t,e}var Ro=function(){var e=Ti(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,function(e,n,r,a){t.push(r?a.replace(ue,"$1"):n||e)}),t},function(e){return 500===t.size&&t.clear(),e}),t=e.cache;return e}();function Oo(e){if("string"==typeof e||as(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Do(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bo(e){if(e instanceof Un)return e.clone();var t=new $n(e.__wrapped__,e.__chain__);return t.__actions__=xa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Wo=Hr(function(e,t){return Vi(e)?cr(e,hr(t,1,Vi,!0)):[]}),Fo=Hr(function(e,t){var n=Ho(t);return Vi(n)&&(n=a),Vi(e)?cr(e,hr(t,1,Vi,!0),ao(n,2)):[]}),No=Hr(function(e,t){var n=Ho(t);return Vi(n)&&(n=a),Vi(e)?cr(e,hr(t,1,Vi,!0),a,n):[]});function Lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:us(n);return a<0&&(a=gn(r+a,0)),Nt(e,ao(t,3),a)}function $o(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==a&&(o=us(n),o=n<0?gn(r+o,0):mn(o,r-1)),Nt(e,ao(t,3),o,!0)}function Uo(e){return null!=e&&e.length?hr(e,1):[]}function jo(e){return e&&e.length?e[0]:a}var Vo=Hr(function(e){var t=Mt(e,fa);return t.length&&t[0]===e[0]?_r(t):[]}),zo=Hr(function(e){var t=Ho(e),n=Mt(e,fa);return t===Ho(n)?t=a:n.pop(),n.length&&n[0]===e[0]?_r(n,ao(t,2)):[]}),Go=Hr(function(e){var t=Ho(e),n=Mt(e,fa);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?_r(n,a,t):[]});function Ho(e){var t=null==e?0:e.length;return t?e[t-1]:a}var qo=Hr(Ko);function Ko(e,t){return e&&e.length&&t&&t.length?jr(e,t):e}var Jo=Qa(function(e,t){var n=null==e?0:e.length,r=rr(e,t);return Vr(e,Mt(t,function(e){return go(e,n)?+e:e}).sort(Sa)),r});function Yo(e){return null==e?e:bn.call(e)}var Zo=Hr(function(e){return ia(hr(e,1,Vi,!0))}),Qo=Hr(function(e){var t=Ho(e);return Vi(t)&&(t=a),ia(hr(e,1,Vi,!0),ao(t,2))}),Xo=Hr(function(e){var t=Ho(e);return t="function"==typeof t?t:a,ia(hr(e,1,Vi,!0),a,t)});function ei(e){if(!e||!e.length)return[];var t=0;return e=At(e,function(e){if(Vi(e))return t=gn(e.length,t),!0}),qt(t,function(t){return Mt(e,Vt(t))})}function ti(e,t){if(!e||!e.length)return[];var n=ei(e);return null==t?n:Mt(n,function(e){return Ct(t,a,e)})}var ni=Hr(function(e,t){return Vi(e)?cr(e,t):[]}),ri=Hr(function(e){return da(At(e,Vi))}),ai=Hr(function(e){var t=Ho(e);return Vi(t)&&(t=a),da(At(e,Vi),ao(t,2))}),oi=Hr(function(e){var t=Ho(e);return t="function"==typeof t?t:a,da(At(e,Vi),a,t)}),ii=Hr(ei),si=Hr(function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,ti(e,n)});function ci(e){var t=Fn(e);return t.__chain__=!0,t}function li(e,t){return t(e)}var ui=Qa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return rr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Un&&go(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:li,args:[o],thisArg:a}),new $n(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(o)}),di=Ia(function(e,t,n){Oe.call(e,n)?++e[n]:nr(e,n,1)}),pi=Da(Lo),fi=Da($o);function hi(e,t){return($i(e)?xt:lr)(e,ao(t,3))}function gi(e,t){return($i(e)?_t:ur)(e,ao(t,3))}var mi=Ia(function(e,t,n){Oe.call(e,n)?e[n].push(t):nr(e,n,[t])}),wi=Hr(function(e,t,n){var a=-1,o="function"==typeof t,i=ji(e)?r(e.length):[];return lr(e,function(e){i[++a]=o?Ct(t,e,n):Ir(e,t,n)}),i}),yi=Ia(function(e,t,n){nr(e,n,t)});function vi(e,t){return($i(e)?Mt:Br)(e,ao(t,3))}var bi=Ia(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ki=Hr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&mo(e,t[0],t[1])?t=[]:n>2&&mo(t[0],t[1],t[2])&&(t=[t[0]]),$r(e,hr(t,1),[])}),Si=lt||function(){return dt.Date.now()};function Ci(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,qa(e,l,a,a,a,a,t)}function Pi(e,t){var n;if("function"!=typeof t)throw new Ie(o);return e=us(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var xi=Hr(function(e,t,n){var r=1;if(n.length){var a=sn(n,ro(xi));r|=c}return qa(e,r,t,n,a)}),_i=Hr(function(e,t,n){var r=3;if(n.length){var a=sn(n,ro(_i));r|=c}return qa(t,r,e,n,a)});function Ii(e,t,n){var r,i,s,c,l,u,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new Ie(o);function g(t){var n=r,o=i;return r=i=a,d=t,c=e.apply(o,n)}function m(e){var n=e-u;return u===a||n>=t||n<0||f&&e-d>=s}function w(){var e=Si();if(m(e))return y(e);l=Io(w,function(e){var n=t-(e-u);return f?mn(n,s-(e-d)):n}(e))}function y(e){return l=a,h&&r?g(e):(r=i=a,c)}function v(){var e=Si(),n=m(e);if(r=arguments,i=this,u=e,n){if(l===a)return function(e){return d=e,l=Io(w,t),p?g(e):c}(u);if(f)return ya(l),l=Io(w,t),g(u)}return l===a&&(l=Io(w,t)),c}return t=ps(t)||0,Yi(n)&&(p=!!n.leading,s=(f="maxWait"in n)?gn(ps(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),v.cancel=function(){l!==a&&ya(l),d=0,r=u=i=l=a},v.flush=function(){return l===a?c:y(Si())},v}var Ai=Hr(function(e,t){return sr(e,1,t)}),Ei=Hr(function(e,t,n){return sr(e,ps(t)||0,n)});function Ti(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(o);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(Ti.Cache||zn),n}function Mi(e){if("function"!=typeof e)throw new Ie(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ti.Cache=zn;var Ri=ma(function(e,t){var n=(t=1==t.length&&$i(t[0])?Mt(t[0],Jt(ao())):Mt(hr(t,1),Jt(ao()))).length;return Hr(function(r){for(var a=-1,o=mn(r.length,n);++a<o;)r[a]=t[a].call(this,r[a]);return Ct(e,this,r)})}),Oi=Hr(function(e,t){var n=sn(t,ro(Oi));return qa(e,c,a,t,n)}),Di=Hr(function(e,t){var n=sn(t,ro(Di));return qa(e,64,a,t,n)}),Bi=Qa(function(e,t){return qa(e,256,a,a,a,t)});function Wi(e,t){return e===t||e!=e&&t!=t}var Fi=ja(Cr),Ni=ja(function(e,t){return e>=t}),Li=Ar(function(){return arguments}())?Ar:function(e){return Zi(e)&&Oe.call(e,"callee")&&!He.call(e,"callee")},$i=r.isArray,Ui=wt?Jt(wt):function(e){return Zi(e)&&Sr(e)==M};function ji(e){return null!=e&&Ji(e.length)&&!qi(e)}function Vi(e){return Zi(e)&&ji(e)}var zi=mt||pc,Gi=yt?Jt(yt):function(e){return Zi(e)&&Sr(e)==y};function Hi(e){if(!Zi(e))return!1;var t=Sr(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!es(e)}function qi(e){if(!Yi(e))return!1;var t=Sr(e);return t==b||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ki(e){return"number"==typeof e&&e==us(e)}function Ji(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Yi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Zi(e){return null!=e&&"object"==typeof e}var Qi=vt?Jt(vt):function(e){return Zi(e)&&uo(e)==S};function Xi(e){return"number"==typeof e||Zi(e)&&Sr(e)==C}function es(e){if(!Zi(e)||Sr(e)!=P)return!1;var t=ze(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Fe}var ts=bt?Jt(bt):function(e){return Zi(e)&&Sr(e)==_},ns=kt?Jt(kt):function(e){return Zi(e)&&uo(e)==I};function rs(e){return"string"==typeof e||!$i(e)&&Zi(e)&&Sr(e)==A}function as(e){return"symbol"==typeof e||Zi(e)&&Sr(e)==E}var os=St?Jt(St):function(e){return Zi(e)&&Ji(e.length)&&!!at[Sr(e)]},is=ja(Dr),ss=ja(function(e,t){return e<=t});function cs(e){if(!e)return[];if(ji(e))return rs(e)?un(e):xa(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=uo(e);return(t==S?an:t==I?cn:Ws)(e)}function ls(e){return e?(e=ps(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function us(e){var t=ls(e),n=t%1;return t==t?n?t-n:t:0}function ds(e){return e?ar(us(e),0,f):0}function ps(e){if("number"==typeof e)return e;if(as(e))return p;if(Yi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Yi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=he.test(e);return n||me.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?p:+e}function fs(e){return _a(e,As(e))}function hs(e){return null==e?"":oa(e)}var gs=Aa(function(e,t){if(bo(t)||ji(t))_a(t,Is(t),e);else for(var n in t)Oe.call(t,n)&&Qn(e,n,t[n])}),ms=Aa(function(e,t){_a(t,As(t),e)}),ws=Aa(function(e,t,n,r){_a(t,As(t),e,r)}),ys=Aa(function(e,t,n,r){_a(t,Is(t),e,r)}),vs=Qa(rr),bs=Hr(function(e,t){e=Pe(e);var n=-1,r=t.length,o=r>2?t[2]:a;for(o&&mo(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],s=As(i),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===a||Wi(d,Te[u])&&!Oe.call(e,u))&&(e[u]=i[u])}return e}),ks=Hr(function(e){return e.push(a,Ja),Ct(Ts,a,e)});function Ss(e,t,n){var r=null==e?a:br(e,t);return r===a?n:r}function Cs(e,t){return null!=e&&po(e,t,xr)}var Ps=Fa(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=We.call(t)),e[t]=n},Ys(Xs)),xs=Fa(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=We.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]},ao),_s=Hr(Ir);function Is(e){return ji(e)?qn(e):Or(e)}function As(e){return ji(e)?qn(e,!0):function(e){if(!Yi(e))return function(e){var t=[];if(null!=e)for(var n in Pe(e))t.push(n);return t}(e);var t=bo(e),n=[];for(var r in e)("constructor"!=r||!t&&Oe.call(e,r))&&n.push(r);return n}(e)}var Es=Aa(function(e,t,n){Nr(e,t,n)}),Ts=Aa(function(e,t,n,r){Nr(e,t,n,r)}),Ms=Qa(function(e,t){var n={};if(null==e)return n;var r=!1;t=Mt(t,function(t){return t=ga(t,e),r||(r=t.length>1),t}),_a(e,eo(e),n),r&&(n=or(n,7,Ya));for(var a=t.length;a--;)sa(n,t[a]);return n}),Rs=Qa(function(e,t){return null==e?{}:function(e,t){return Ur(e,t,function(t,n){return Cs(e,n)})}(e,t)});function Os(e,t){if(null==e)return{};var n=Mt(eo(e),function(e){return[e]});return t=ao(t),Ur(e,n,function(e,n){return t(e,n[0])})}var Ds=Ha(Is),Bs=Ha(As);function Ws(e){return null==e?[]:Yt(e,Is(e))}var Fs=Ra(function(e,t,n){return t=t.toLowerCase(),e+(n?Ns(t):t)});function Ns(e){return Hs(hs(e).toLowerCase())}function Ls(e){return(e=hs(e))&&e.replace(ye,en).replace(Ze,"")}var $s=Ra(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Us=Ra(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),js=Ma("toLowerCase"),Vs=Ra(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),zs=Ra(function(e,t,n){return e+(n?" ":"")+Hs(t)}),Gs=Ra(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Hs=Ma("toUpperCase");function qs(e,t,n){return e=hs(e),(t=n?a:t)===a?function(e){return tt.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Ks=Hr(function(e,t){try{return Ct(e,a,t)}catch(e){return Hi(e)?e:new ke(e)}}),Js=Qa(function(e,t){return xt(t,function(t){t=Oo(t),nr(e,t,xi(e[t],e))}),e});function Ys(e){return function(){return e}}var Zs=Ba(),Qs=Ba(!0);function Xs(e){return e}function ec(e){return Rr("function"==typeof e?e:or(e,1))}var tc=Hr(function(e,t){return function(n){return Ir(n,e,t)}}),nc=Hr(function(e,t){return function(n){return Ir(e,n,t)}});function rc(e,t,n){var r=Is(t),a=vr(t,r);null!=n||Yi(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=vr(t,Is(t)));var o=!(Yi(n)&&"chain"in n&&!n.chain),i=qi(e);return xt(a,function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=xa(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})}),e}function ac(){}var oc=La(Mt),ic=La(It),sc=La(Bt);function cc(e){return wo(e)?Vt(Oo(e)):function(e){return function(t){return br(t,e)}}(e)}var lc=Ua(),uc=Ua(!0);function dc(){return[]}function pc(){return!1}var fc,hc=Na(function(e,t){return e+t},0),gc=za("ceil"),mc=Na(function(e,t){return e/t},1),wc=za("floor"),yc=Na(function(e,t){return e*t},1),vc=za("round"),bc=Na(function(e,t){return e-t},0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Ie(o);return e=us(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Ci,Fn.assign=gs,Fn.assignIn=ms,Fn.assignInWith=ws,Fn.assignWith=ys,Fn.at=vs,Fn.before=Pi,Fn.bind=xi,Fn.bindAll=Js,Fn.bindKey=_i,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $i(e)?e:[e]},Fn.chain=ci,Fn.chunk=function(e,t,n){t=(n?mo(e,t,n):t===a)?1:gn(us(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,s=0,c=r(pt(o/t));i<o;)c[s++]=Xr(e,i,i+=t);return c},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var o=e[t];o&&(a[r++]=o)}return a},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Rt($i(n)?xa(n):[n],hr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=ao();return e=t?Mt(e,function(e){if("function"!=typeof e[1])throw new Ie(o);return[n(e[0]),e[1]]}):[],Hr(function(n){for(var r=-1;++r<t;){var a=e[r];if(Ct(a[0],this,n))return Ct(a[1],this,n)}})},Fn.conforms=function(e){return function(e){var t=Is(e);return function(n){return ir(n,e,t)}}(or(e,1))},Fn.constant=Ys,Fn.countBy=di,Fn.create=function(e,t){var n=Nn(e);return null==t?n:tr(n,t)},Fn.curry=function e(t,n,r){var o=qa(t,8,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Fn.curryRight=function e(t,n,r){var o=qa(t,16,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Fn.debounce=Ii,Fn.defaults=bs,Fn.defaultsDeep=ks,Fn.defer=Ai,Fn.delay=Ei,Fn.difference=Wo,Fn.differenceBy=Fo,Fn.differenceWith=No,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,(t=n||t===a?1:us(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,0,(t=r-(t=n||t===a?1:us(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!0):[]},Fn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&mo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=us(n))<0&&(n=-n>o?0:o+n),(r=r===a||r>o?o:us(r))<0&&(r+=o),r=n>r?0:ds(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return($i(e)?At:fr)(e,ao(t,3))},Fn.flatMap=function(e,t){return hr(vi(e,t),1)},Fn.flatMapDeep=function(e,t){return hr(vi(e,t),u)},Fn.flatMapDepth=function(e,t,n){return n=n===a?1:us(n),hr(vi(e,t),n)},Fn.flatten=Uo,Fn.flattenDeep=function(e){return null!=e&&e.length?hr(e,u):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?hr(e,t=t===a?1:us(t)):[]},Fn.flip=function(e){return qa(e,512)},Fn.flow=Zs,Fn.flowRight=Qs,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Fn.functions=function(e){return null==e?[]:vr(e,Is(e))},Fn.functionsIn=function(e){return null==e?[]:vr(e,As(e))},Fn.groupBy=mi,Fn.initial=function(e){return null!=e&&e.length?Xr(e,0,-1):[]},Fn.intersection=Vo,Fn.intersectionBy=zo,Fn.intersectionWith=Go,Fn.invert=Ps,Fn.invertBy=xs,Fn.invokeMap=wi,Fn.iteratee=ec,Fn.keyBy=yi,Fn.keys=Is,Fn.keysIn=As,Fn.map=vi,Fn.mapKeys=function(e,t){var n={};return t=ao(t,3),wr(e,function(e,r,a){nr(n,t(e,r,a),e)}),n},Fn.mapValues=function(e,t){var n={};return t=ao(t,3),wr(e,function(e,r,a){nr(n,r,t(e,r,a))}),n},Fn.matches=function(e){return Wr(or(e,1))},Fn.matchesProperty=function(e,t){return Fr(e,or(t,1))},Fn.memoize=Ti,Fn.merge=Es,Fn.mergeWith=Ts,Fn.method=tc,Fn.methodOf=nc,Fn.mixin=rc,Fn.negate=Mi,Fn.nthArg=function(e){return e=us(e),Hr(function(t){return Lr(t,e)})},Fn.omit=Ms,Fn.omitBy=function(e,t){return Os(e,Mi(ao(t)))},Fn.once=function(e){return Pi(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:($i(t)||(t=null==t?[]:[t]),$i(n=r?a:n)||(n=null==n?[]:[n]),$r(e,t,n))},Fn.over=oc,Fn.overArgs=Ri,Fn.overEvery=ic,Fn.overSome=sc,Fn.partial=Oi,Fn.partialRight=Di,Fn.partition=bi,Fn.pick=Rs,Fn.pickBy=Os,Fn.property=cc,Fn.propertyOf=function(e){return function(t){return null==e?a:br(e,t)}},Fn.pull=qo,Fn.pullAll=Ko,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,ao(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,a,n):e},Fn.pullAt=Jo,Fn.range=lc,Fn.rangeRight=uc,Fn.rearg=Bi,Fn.reject=function(e,t){return($i(e)?At:fr)(e,Mi(ao(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],o=e.length;for(t=ao(t,3);++r<o;){var i=e[r];t(i,r,e)&&(n.push(i),a.push(r))}return Vr(e,a),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Ie(o);return Hr(e,t=t===a?t:us(t))},Fn.reverse=Yo,Fn.sampleSize=function(e,t,n){return t=(n?mo(e,t,n):t===a)?1:us(t),($i(e)?Jn:Kr)(e,t)},Fn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Jr(e,t,n,r)},Fn.shuffle=function(e){return($i(e)?Yn:Qr)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&mo(e,t,n)?(t=0,n=r):(t=null==t?0:us(t),n=n===a?r:us(n)),Xr(e,t,n)):[]},Fn.sortBy=ki,Fn.sortedUniq=function(e){return e&&e.length?ra(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?ra(e,ao(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&mo(e,t,n)&&(t=n=a),(n=n===a?f:n>>>0)?(e=hs(e))&&("string"==typeof t||null!=t&&!ts(t))&&!(t=oa(t))&&rn(e)?wa(un(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Ie(o);return t=null==t?0:gn(us(t),0),Hr(function(n){var r=n[t],a=wa(n,0,t);return r&&Rt(a,r),Ct(e,this,a)})},Fn.tail=function(e){var t=null==e?0:e.length;return t?Xr(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?Xr(e,0,(t=n||t===a?1:us(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Xr(e,(t=r-(t=n||t===a?1:us(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?la(e,ao(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?la(e,ao(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Ie(o);return Yi(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Ii(e,t,{leading:r,maxWait:t,trailing:a})},Fn.thru=li,Fn.toArray=cs,Fn.toPairs=Ds,Fn.toPairsIn=Bs,Fn.toPath=function(e){return $i(e)?Mt(e,Oo):as(e)?[e]:xa(Ro(hs(e)))},Fn.toPlainObject=fs,Fn.transform=function(e,t,n){var r=$i(e),a=r||zi(e)||os(e);if(t=ao(t,4),null==n){var o=e&&e.constructor;n=a?r?new o:[]:Yi(e)&&qi(o)?Nn(ze(e)):{}}return(a?xt:wr)(e,function(e,r,a){return t(n,e,r,a)}),n},Fn.unary=function(e){return Ci(e,1)},Fn.union=Zo,Fn.unionBy=Qo,Fn.unionWith=Xo,Fn.uniq=function(e){return e&&e.length?ia(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?ia(e,ao(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?ia(e,a,t):[]},Fn.unset=function(e,t){return null==e||sa(e,t)},Fn.unzip=ei,Fn.unzipWith=ti,Fn.update=function(e,t,n){return null==e?e:ca(e,t,ha(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ca(e,t,ha(n),r)},Fn.values=Ws,Fn.valuesIn=function(e){return null==e?[]:Yt(e,As(e))},Fn.without=ni,Fn.words=qs,Fn.wrap=function(e,t){return Oi(ha(t),e)},Fn.xor=ri,Fn.xorBy=ai,Fn.xorWith=oi,Fn.zip=ii,Fn.zipObject=function(e,t){return pa(e||[],t||[],Qn)},Fn.zipObjectDeep=function(e,t){return pa(e||[],t||[],Jr)},Fn.zipWith=si,Fn.entries=Ds,Fn.entriesIn=Bs,Fn.extend=ms,Fn.extendWith=ws,rc(Fn,Fn),Fn.add=hc,Fn.attempt=Ks,Fn.camelCase=Fs,Fn.capitalize=Ns,Fn.ceil=gc,Fn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ps(n))==n?n:0),t!==a&&(t=(t=ps(t))==t?t:0),ar(ps(e),t,n)},Fn.clone=function(e){return or(e,4)},Fn.cloneDeep=function(e){return or(e,5)},Fn.cloneDeepWith=function(e,t){return or(e,5,t="function"==typeof t?t:a)},Fn.cloneWith=function(e,t){return or(e,4,t="function"==typeof t?t:a)},Fn.conformsTo=function(e,t){return null==t||ir(e,t,Is(t))},Fn.deburr=Ls,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=mc,Fn.endsWith=function(e,t,n){e=hs(e),t=oa(t);var r=e.length,o=n=n===a?r:ar(us(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Fn.eq=Wi,Fn.escape=function(e){return(e=hs(e))&&K.test(e)?e.replace(H,tn):e},Fn.escapeRegExp=function(e){return(e=hs(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Fn.every=function(e,t,n){var r=$i(e)?It:dr;return n&&mo(e,t,n)&&(t=a),r(e,ao(t,3))},Fn.find=pi,Fn.findIndex=Lo,Fn.findKey=function(e,t){return Ft(e,ao(t,3),wr)},Fn.findLast=fi,Fn.findLastIndex=$o,Fn.findLastKey=function(e,t){return Ft(e,ao(t,3),yr)},Fn.floor=wc,Fn.forEach=hi,Fn.forEachRight=gi,Fn.forIn=function(e,t){return null==e?e:gr(e,ao(t,3),As)},Fn.forInRight=function(e,t){return null==e?e:mr(e,ao(t,3),As)},Fn.forOwn=function(e,t){return e&&wr(e,ao(t,3))},Fn.forOwnRight=function(e,t){return e&&yr(e,ao(t,3))},Fn.get=Ss,Fn.gt=Fi,Fn.gte=Ni,Fn.has=function(e,t){return null!=e&&po(e,t,Pr)},Fn.hasIn=Cs,Fn.head=jo,Fn.identity=Xs,Fn.includes=function(e,t,n,r){e=ji(e)?e:Ws(e),n=n&&!r?us(n):0;var a=e.length;return n<0&&(n=gn(a+n,0)),rs(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Lt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:us(n);return a<0&&(a=gn(r+a,0)),Lt(e,t,a)},Fn.inRange=function(e,t,n){return t=ls(t),n===a?(n=t,t=0):n=ls(n),function(e,t,n){return e>=mn(t,n)&&e<gn(t,n)}(e=ps(e),t,n)},Fn.invoke=_s,Fn.isArguments=Li,Fn.isArray=$i,Fn.isArrayBuffer=Ui,Fn.isArrayLike=ji,Fn.isArrayLikeObject=Vi,Fn.isBoolean=function(e){return!0===e||!1===e||Zi(e)&&Sr(e)==w},Fn.isBuffer=zi,Fn.isDate=Gi,Fn.isElement=function(e){return Zi(e)&&1===e.nodeType&&!es(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(ji(e)&&($i(e)||"string"==typeof e||"function"==typeof e.splice||zi(e)||os(e)||Li(e)))return!e.length;var t=uo(e);if(t==S||t==I)return!e.size;if(bo(e))return!Or(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Er(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Er(e,t,a,n):!!r},Fn.isError=Hi,Fn.isFinite=function(e){return"number"==typeof e&&Wt(e)},Fn.isFunction=qi,Fn.isInteger=Ki,Fn.isLength=Ji,Fn.isMap=Qi,Fn.isMatch=function(e,t){return e===t||Tr(e,t,io(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Tr(e,t,io(t),n)},Fn.isNaN=function(e){return Xi(e)&&e!=+e},Fn.isNative=function(e){if(vo(e))throw new ke("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=Xi,Fn.isObject=Yi,Fn.isObjectLike=Zi,Fn.isPlainObject=es,Fn.isRegExp=ts,Fn.isSafeInteger=function(e){return Ki(e)&&e>=-9007199254740991&&e<=d},Fn.isSet=ns,Fn.isString=rs,Fn.isSymbol=as,Fn.isTypedArray=os,Fn.isUndefined=function(e){return e===a},Fn.isWeakMap=function(e){return Zi(e)&&uo(e)==T},Fn.isWeakSet=function(e){return Zi(e)&&"[object WeakSet]"==Sr(e)},Fn.join=function(e,t){return null==e?"":zt.call(e,t)},Fn.kebabCase=$s,Fn.last=Ho,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==a&&(o=(o=us(n))<0?gn(r+o,0):mn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Nt(e,Ut,o,!0)},Fn.lowerCase=Us,Fn.lowerFirst=js,Fn.lt=is,Fn.lte=ss,Fn.max=function(e){return e&&e.length?pr(e,Xs,Cr):a},Fn.maxBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Cr):a},Fn.mean=function(e){return jt(e,Xs)},Fn.meanBy=function(e,t){return jt(e,ao(t,2))},Fn.min=function(e){return e&&e.length?pr(e,Xs,Dr):a},Fn.minBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Dr):a},Fn.stubArray=dc,Fn.stubFalse=pc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=yc,Fn.nth=function(e,t){return e&&e.length?Lr(e,us(t)):a},Fn.noConflict=function(){return dt._===this&&(dt._=Ne),this},Fn.noop=ac,Fn.now=Si,Fn.pad=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return $a(ft(a),n)+e+$a(pt(a),n)},Fn.padEnd=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;return t&&r<t?e+$a(t-r,n):e},Fn.padStart=function(e,t,n){e=hs(e);var r=(t=us(t))?ln(e):0;return t&&r<t?$a(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),yn(hs(e).replace(re,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&mo(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=ls(e),t===a?(t=e,e=0):t=ls(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=vn();return mn(e+o*(t-e+st("1e-"+((o+"").length-1))),t)}return zr(e,t)},Fn.reduce=function(e,t,n){var r=$i(e)?Ot:Gt,a=arguments.length<3;return r(e,ao(t,4),n,a,lr)},Fn.reduceRight=function(e,t,n){var r=$i(e)?Dt:Gt,a=arguments.length<3;return r(e,ao(t,4),n,a,ur)},Fn.repeat=function(e,t,n){return t=(n?mo(e,t,n):t===a)?1:us(t),Gr(hs(e),t)},Fn.replace=function(){var e=arguments,t=hs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,o=(t=ga(t,e)).length;for(o||(o=1,e=a);++r<o;){var i=null==e?a:e[Oo(t[r])];i===a&&(r=o,i=n),e=qi(i)?i.call(e):i}return e},Fn.round=vc,Fn.runInContext=e,Fn.sample=function(e){return($i(e)?Kn:qr)(e)},Fn.size=function(e){if(null==e)return 0;if(ji(e))return rs(e)?ln(e):e.length;var t=uo(e);return t==S||t==I?e.size:Or(e).length},Fn.snakeCase=Vs,Fn.some=function(e,t,n){var r=$i(e)?Bt:ea;return n&&mo(e,t,n)&&(t=a),r(e,ao(t,3))},Fn.sortedIndex=function(e,t){return ta(e,t)},Fn.sortedIndexBy=function(e,t,n){return na(e,t,ao(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ta(e,t);if(r<n&&Wi(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ta(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return na(e,t,ao(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ta(e,t,!0)-1;if(Wi(e[n],t))return n}return-1},Fn.startCase=zs,Fn.startsWith=function(e,t,n){return e=hs(e),n=null==n?0:ar(us(n),0,e.length),t=oa(t),e.slice(n,n+t.length)==t},Fn.subtract=bc,Fn.sum=function(e){return e&&e.length?Ht(e,Xs):0},Fn.sumBy=function(e,t){return e&&e.length?Ht(e,ao(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&mo(e,t,n)&&(t=a),e=hs(e),t=ws({},t,r,Ka);var o,i,s=ws({},t.imports,r.imports,Ka),c=Is(s),l=Yt(s,c),u=0,d=t.interpolate||ve,p="__p += '",f=xe((t.escape||ve).source+"|"+d.source+"|"+(d===Z?de:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),h="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(f,function(t,n,r,a,s,c){return r||(r=a),p+=e.slice(u,c).replace(be,nn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(i=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t}),p+="';\n";var g=Oe.call(t,"variable")&&t.variable;if(g){if(le.test(g))throw new ke("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(i?p.replace(j,""):p).replace(V,"$1").replace(z,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Ks(function(){return Se(c,h+"return "+p).apply(a,l)});if(m.source=p,Hi(m))throw m;return m},Fn.times=function(e,t){if((e=us(e))<1||e>d)return[];var n=f,r=mn(e,f);t=ao(t),e-=f;for(var a=qt(r,t);++n<e;)t(n);return a},Fn.toFinite=ls,Fn.toInteger=us,Fn.toLength=ds,Fn.toLower=function(e){return hs(e).toLowerCase()},Fn.toNumber=ps,Fn.toSafeInteger=function(e){return e?ar(us(e),-9007199254740991,d):0===e?e:0},Fn.toString=hs,Fn.toUpper=function(e){return hs(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=hs(e))&&(n||t===a))return Kt(e);if(!e||!(t=oa(t)))return e;var r=un(e),o=un(t);return wa(r,Qt(r,o),Xt(r,o)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=hs(e))&&(n||t===a))return e.slice(0,dn(e)+1);if(!e||!(t=oa(t)))return e;var r=un(e);return wa(r,0,Xt(r,un(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=hs(e))&&(n||t===a))return e.replace(re,"");if(!e||!(t=oa(t)))return e;var r=un(e);return wa(r,Qt(r,un(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(Yi(t)){var o="separator"in t?t.separator:o;n="length"in t?us(t.length):n,r="omission"in t?oa(t.omission):r}var i=(e=hs(e)).length;if(rn(e)){var s=un(e);i=s.length}if(n>=i)return e;var c=n-ln(r);if(c<1)return r;var l=s?wa(s,0,c).join(""):e.slice(0,c);if(o===a)return l+r;if(s&&(c+=l.length-c),ts(o)){if(e.slice(c).search(o)){var u,d=l;for(o.global||(o=xe(o.source,hs(pe.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var p=u.index;l=l.slice(0,p===a?c:p)}}else if(e.indexOf(oa(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},Fn.unescape=function(e){return(e=hs(e))&&q.test(e)?e.replace(G,pn):e},Fn.uniqueId=function(e){var t=++De;return hs(e)+t},Fn.upperCase=Gs,Fn.upperFirst=Hs,Fn.each=hi,Fn.eachRight=gi,Fn.first=jo,rc(Fn,(fc={},wr(Fn,function(e,t){Oe.call(Fn.prototype,t)||(fc[t]=e)}),fc),{chain:!1}),Fn.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Fn[e].placeholder=Fn}),xt(["drop","take"],function(e,t){Un.prototype[e]=function(n){n=n===a?1:gn(us(n),0);var r=this.__filtered__&&!t?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),xt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ao(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),xt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}}),xt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}}),Un.prototype.compact=function(){return this.filter(Xs)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Hr(function(e,t){return"function"==typeof e?new Un(this):this.map(function(n){return Ir(n,e,t)})}),Un.prototype.reject=function(e){return this.filter(Mi(ao(e)))},Un.prototype.slice=function(e,t){e=us(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Un(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=us(t))<0?n.dropRight(-t):n.take(t-e)),n)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(f)},wr(Un.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Fn[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof Un,l=s[0],u=c||$i(t),d=function(e){var t=o.apply(Fn,Rt([e],s));return r&&p?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,h=i&&!p,g=c&&!f;if(!i&&u){t=g?t:new Un(this);var m=e.apply(t,s);return m.__actions__.push({func:li,args:[d],thisArg:a}),new $n(m,p)}return h&&g?e.apply(this,s):(m=this.thru(d),h?r?m.value()[0]:m.value():m)})}),xt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply($i(a)?a:[],e)}return this[n](function(n){return t.apply($i(n)?n:[],e)})}}),wr(Un.prototype,function(e,t){var n=Fn[t];if(n){var r=n.name+"";Oe.call(An,r)||(An[r]=[]),An[r].push({name:t,func:n})}}),An[Wa(a,2).name]=[{name:"wrapper",func:a}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=xa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xa(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$i(e),r=t<0,a=n?e.length:0,o=function(e,t,n){for(var r=-1,a=n.length;++r<a;){var o=n[r],i=o.size;switch(o.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=mn(t,e+i);break;case"takeRight":e=gn(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=o.start,s=o.end,c=s-i,l=r?s:i-1,u=this.__iteratees__,d=u.length,p=0,f=mn(c,this.__takeCount__);if(!n||!r&&a==c&&f==c)return ua(e,this.__actions__);var h=[];e:for(;c--&&p<f;){for(var g=-1,m=e[l+=t];++g<d;){var w=u[g],y=w.iteratee,v=w.type,b=y(m);if(2==v)m=b;else if(!b){if(1==v)continue e;break e}}h[p++]=m}return h},Fn.prototype.at=ui,Fn.prototype.chain=function(){return ci(this)},Fn.prototype.commit=function(){return new $n(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===a&&(this.__values__=cs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof Ln;){var r=Bo(n);r.__index__=0,r.__values__=a,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:li,args:[Yo],thisArg:a}),new $n(t,this.__chain__)}return this.thru(Yo)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return ua(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Je&&(Fn.prototype[Je]=function(){return this}),Fn}();dt._=fn,(r=function(){return fn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},300:(e,t,n)=>{var r,a;e=n.nmd(e),function(t){t.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},t.runningInMainNodeJSModule=function(){return t.runningInNodeJS()&&n.c[n.s]===e},t.commonJSAvailable=function(){return"object"==typeof e.exports},t.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},t.runningInNodeChildProcess=function(){return t.runningInNodeJS()&&"function"==typeof process.send},t.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&"http:"!==document.location.protocol&&"https:"!==document.location.protocol},t.webWorkersAvailable=function(){return!("function"!=typeof Worker||t.runningInNullOrigin()||t.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},t.log=function(e,t){void 0===t&&(t=!1),"object"==typeof console&&(console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>"))},t.createErrorMessage=function(e,n){if(void 0===n&&(n="Unhandled exception"),null==e)return n;if(n+=": ","object"==typeof e.content){if(t.runningInNodeJS())return n+e.content.stack;var r=JSON.stringify(e.content);return"{}"!==r?n+r:n+e.content}return"string"==typeof e.content?n+e.content:n+e},t.printExceptionAndStackTraceToConsole=function(e,n){void 0===n&&(n="Unhandled exception"),t.log(t.createErrorMessage(e,n))},t.getGlobalObject=function(){return"object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:{}},t.toString=Object.prototype.toString,t.commonJSAvailable()&&(e.exports=t)}(a||(a={})),function(){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(e,t){var n=function(e,t,n){return e<t?t:e>n?n:e};e|=0,t|=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},t=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],n=void 0;if("object"==typeof window?n=window:"object"==typeof self&&(n=self),void 0!==n)for(var r=0;r<t.length;r++)n[t[r]]&&(n[t[r]].prototype.subarray=e)}}(r||(r={})),function(e){var t=function(){function t(){}return t.compressAsync=function(t,n,r){var a=new e.Timer,o=new e.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof t)t=e.encodeUTF8(t);else if(null==t||!(t instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var i=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],c=function(t){if(t<i.length){var l=void 0;try{l=o.compressBlock(i[t])}catch(e){return void r(void 0,e)}s.push(l),a.getElapsedTime()<=20?c(t+1):(e.enqueueImmediate(function(){return c(t+1)}),a.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate(function(){var t;try{t=e.CompressionCommon.encodeCompressedBytes(u,n.outputEncoding)}catch(e){return void r(void 0,e)}e.enqueueImmediate(function(){return r(t)})})}};e.enqueueImmediate(function(){return c(0)})},t.createCompressionStream=function(){var t=new e.Compressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,a,o){var i;try{i=e.BufferTools.uint8ArrayToBuffer(t.compressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void r.emit("error",e)}r.push(i),o()},r},t}();e.AsyncCompressor=t}(a||(a={})),function(e){var t=function(){function t(){}return t.decompressAsync=function(t,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var a=new e.Timer;try{t=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding)}catch(e){return void r(void 0,e)}var o=new e.Decompressor,i=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],c=function(t){if(t<i.length){var l=void 0;try{l=o.decompressBlock(i[t])}catch(e){return void r(void 0,e)}s.push(l),a.getElapsedTime()<=20?c(t+1):(e.enqueueImmediate(function(){return c(t+1)}),a.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate(function(){var t;try{t=e.CompressionCommon.encodeDecompressedBytes(u,n.outputEncoding)}catch(e){return void r(void 0,e)}e.enqueueImmediate(function(){return r(t)})})}};e.enqueueImmediate(function(){return c(0)})},t.createDecompressionStream=function(){var t=new e.Decompressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,a,o){var i;try{i=e.BufferTools.uint8ArrayToBuffer(t.decompressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void r.emit("error",e)}r.push(i),o()},r},t}();e.AsyncDecompressor=t}(a||(a={})),function(e){var t;!function(t){t.compressAsync=function(e,n,r){if("ByteArray"!=n.inputEncoding||e instanceof Uint8Array){var a={token:Math.random().toString(),type:"compress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},o=function(e){var n=e.data;n&&n.token==a.token&&(t.globalWorker.removeEventListener("message",o),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",o),t.globalWorker.postMessage(a,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},t.decompressAsync=function(e,n,r){var a={token:Math.random().toString(),type:"decompress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},o=function(e){var n=e.data;n&&n.token==a.token&&(t.globalWorker.removeEventListener("message",o),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",o),t.globalWorker.postMessage(a,[])},t.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",function(t){var n=t.data;if("compress"==n.type){var r=void 0;try{r=e.compress(n.data,{outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(a={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(a,[a.data.buffer]):self.postMessage(a,[])}else if("decompress"==n.type){var a,o=void 0;try{o=e.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(a={token:n.token,type:"decompressionResult",data:o,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(a,[a.data.buffer]):self.postMessage(a,[])}}),self.addEventListener("error",function(t){e.log(e.createErrorMessage(t.error,"Unexpected LZUTF8 WebWorker exception"))}))},t.createGlobalWorkerIfNeeded=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!t.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(t.scriptURI=n.getAttribute("src")||void 0)}return!!t.scriptURI&&(t.globalWorker=new Worker(t.scriptURI),!0)},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)}}(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()}(a||(a={})),function(e){var t=function(){function e(e,t,n){this.container=e,this.startPosition=t,this.length=n}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(a||(a={})),function(e){!function(e){e.copyElements=function(e,t,n,r,a){for(;a--;)n[r++]=e[t++]},e.zeroElements=function(e,t,n){for(;n--;)e[t++]=0},e.countNonzeroValuesInArray=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},e.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=e.length-t,r=0;r<t;r++)e[r]=e[n+r];e.length=t},e.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},e.concatUint8Arrays=function(e){for(var t=0,n=0,r=e;n<r.length;n++)t+=(c=r[n]).length;for(var a=new Uint8Array(t),o=0,i=0,s=e;i<s.length;i++){var c=s[i];a.set(c,o),o+=c.length}return a},e.splitByteArray=function(e,t){for(var n=[],r=0;r<e.length;){var a=Math.min(t,e.length-r);n.push(e.subarray(r,r+a)),r+=a}return n}}(e.ArrayTools||(e.ArrayTools={}))}(a||(a={})),function(e){!function(e){e.convertToUint8ArrayIfNeeded=function(t){return"function"==typeof Buffer&&Buffer.isBuffer(t)?e.bufferToUint8Array(t):t},e.uint8ArrayToBuffer=function(e){if(Buffer.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,Buffer.prototype),t}for(var n=e.length,r=new Buffer(n),a=0;a<n;a++)r[a]=e[a];return r},e.bufferToUint8Array=function(e){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e[r];return n}}(e.BufferTools||(e.BufferTools={}))}(a||(a={})),function(e){!function(t){t.getCroppedBuffer=function(e,t,n,r){void 0===r&&(r=0);var a=new Uint8Array(n+r);return a.set(e.subarray(t,t+n)),a},t.getCroppedAndAppendedByteArray=function(t,n,r,a){return e.ArrayTools.concatUint8Arrays([t.subarray(n,n+r),a])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,n){switch(n){case"ByteArray":return t;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(t);case"Base64":return e.encodeBase64(t);case"BinaryString":return e.encodeBinaryString(t);case"StorageBinaryString":return e.encodeStorageBinaryString(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedBytes=function(t,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=e.BufferTools.convertToUint8ArrayIfNeeded(t);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(t);case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(t);case"StorageBinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(t);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},t.encodeDecompressedBytes=function(t,n){switch(n){case"String":return e.decodeUTF8(t);case"ByteArray":return t;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(e.CompressionCommon||(e.CompressionCommon={}))}(a||(a={})),function(e){var t;!function(t){var n,r=[];t.enqueueImmediate=function(e){r.push(e),1===r.length&&n()},t.initializeScheduler=function(){var t=function(){for(var t=0,n=r;t<n.length;t++){var a=n[t];try{a.call(void 0)}catch(t){e.printExceptionAndStackTraceToConsole(t,"enqueueImmediate exception")}}r.length=0};if(e.runningInNodeJS())n=function(){return setImmediate(function(){return t()})};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var a,o="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(e){e.data===o&&t()}),a=e.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(o,a)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var i=new MessageChannel;i.port1.onmessage=function(){return t()},n=function(){return i.port2.postMessage(0)}}else n=function(){return setTimeout(function(){return t()},0)}},t.initializeScheduler()}(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(a||(a={})),function(e){!function(e){e.override=function(t,n){return e.extend(t,n)},e.extend=function(e,t){if(null==e)throw new TypeError("obj is null or undefined");if("object"!=typeof e)throw new TypeError("obj is not an object");if(null==t&&(t={}),"object"!=typeof t)throw new TypeError("newProperties is not an object");if(null!=t)for(var n in t)e[n]=t[n];return e}}(e.ObjectTools||(e.ObjectTools={}))}(a||(a={})),function(e){e.getRandomIntegerInRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.getRandomUTF16StringOfLength=function(t){for(var n="",r=0;r<t;r++){var a=void 0;do{a=e.getRandomIntegerInRange(0,1114112)}while(a>=55296&&a<=57343);n+=e.Encoding.CodePoint.decodeToString(a)}return n}}(a||(a={})),function(e){var t=function(){function e(e){void 0===e&&(e=1024),this.outputBufferCapacity=e,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return e.prototype.appendCharCode=function(e){this.outputBuffer[this.outputPosition++]=e,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},e.prototype.appendCharCodes=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e[t])},e.prototype.appendString=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e.charCodeAt(t))},e.prototype.appendCodePoint=function(e){if(e<=65535)this.appendCharCode(e);else{if(!(e<=1114111))throw new Error("appendCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"));this.appendCharCode(55296+(e-65536>>>10)),this.appendCharCode(56320+(e-65536&1023))}},e.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(a||(a={})),function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),a="".concat(t,": ").concat(r.toFixed(3),"ms");return e.log(a,n),this.restart(),r},t.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},t.getMicrosecondTimestamp=function(){return Math.floor(1e3*t.getTimestamp())},t.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var e=0;this.timestampFunc=function(){var t=process.hrtime(),n=1e3*t[0]+t[1]/1e6;return e+n},e=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var t=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return t+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var r=Date.now()-performance.now();this.timestampFunc=function(){return r+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(a||(a={})),function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(null==t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.BufferTools.convertToUint8ArrayIfNeeded(t),this.compressUtf8Block(t)},t.prototype.compressUtf8Block=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var a=0,o=t;o<r;o++){var i=n[o],s=o<a;if(o>r-this.MinimumSequenceLength)s||this.outputRawByte(i);else{var c=this.getBucketIndexForPrefix(o);if(!s){var l=this.findLongestMatch(o,c);null!=l&&(this.outputPointerBytes(l.length,l.distance),a=o+l.length,s=!0)}s||this.outputRawByte(i);var u=this.inputBufferStreamOffset+o;this.prefixHashTable.addValueToBucket(c,u)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var n=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==n)return null;for(var r,a=this.inputBuffer,o=0,i=0;i<n.length;i++){var s,c=n.getInReversedOrder(i)-this.inputBufferStreamOffset,l=e-c;if(s=void 0===r?this.MinimumSequenceLength-1:r<128&&l>=128?o+(o>>>1):o,l>this.MaximumMatchDistance||s>=this.MaximumSequenceLength||e+s>=a.length)break;if(a[c+s]===a[e+s])for(var u=0;;u++){if(e+u===a.length||a[c+u]!==a[e+u]){u>s&&(r=l,o=u);break}if(u===this.MaximumSequenceLength)return{distance:l,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:o}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,t),this.inputBufferStreamOffset+=r,n},t}();e.Compressor=t}(a||(a={})),function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,n){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,a=this.bucketLocators[t];if(0===a)a=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[t+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(a,r,this.maximumBucketCapacity/2));var o=a+r;0===this.storage[o]?(this.storage[o]=n,o===this.storageIndex&&(this.storageIndex+=r)):(e.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,r),a=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[t]=a,this.bucketLocators[t+1]=r},t.prototype.truncateBucketToNewerElements=function(t,n,r){var a=t+n-r;return e.ArrayTools.copyElements(this.storage,a,this.storage,t,r),e.ArrayTools.zeroElements(this.storage,t+r,n-r),r},t.prototype.compact=function(){var t=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<t.length;r+=2){var a=t[r+1];0!==a&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=a,this.storageIndex+=Math.max(Math.min(2*a,this.maximumBucketCapacity),this.minimumBucketCapacity))}for(this.storage=new Uint32Array(8*this.storageIndex),r=0;r<t.length;r+=2){var o=t[r];if(0!==o){var i=this.bucketLocators[r],s=this.bucketLocators[r+1];e.ArrayTools.copyElements(n,o,this.storage,i,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,n){t<<=1;var r=this.bucketLocators[t];return 0===r?null:(void 0===n&&(n=new e.ArraySegment(this.storage,r,this.bucketLocators[t+1])),n)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(a||(a={})),function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,n){var r=this.buckets[t];void 0===r?this.buckets[t]=[n]:(r.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},t.prototype.getArraySegmentForBucketIndex=function(t,n){var r=this.buckets[t];return void 0===r?null:(void 0===n&&(n=new e.ArraySegment(r,0,r.length)),n)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(a||(a={})),function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.BufferTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){this.inputBufferRemainder&&(t=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),r=0,a=t.length;r<a;r++){var o=t[r];if(o>>>6==3){var i=o>>>5;if(r==a-1||r==a-2&&7==i){this.inputBufferRemainder=t.subarray(r);break}if(t[r+1]>>>7==1)this.outputByte(o);else{var s=31&o,c=void 0;6==i?(c=t[r+1],r+=1):(c=t[r+1]<<8|t[r+2],r+=2);for(var l=this.outputPosition-c,u=0;u<s;u++)this.outputByte(this.outputBuffer[l+u])}}else this.outputByte(o)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,t),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3==30||e<3&&t>>>4==14||e<2&&t>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(a||(a={})),function(e){!function(t){!function(t){var n=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]);t.encode=function(n){return n&&0!=n.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(n).toString("base64"):t.encodeWithJS(n):""},t.decode=function(n){return n?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(n,"base64")):t.decodeWithJS(n):new Uint8Array(0)},t.encodeWithJS=function(t,r){if(void 0===r&&(r=!0),!t||0==t.length)return"";for(var a,o=n,i=new e.StringBuilder,s=0,c=t.length;s<c;s+=3)s<=c-3?(a=t[s]<<16|t[s+1]<<8|t[s+2],i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),i.appendCharCode(o[a>>>6&63]),i.appendCharCode(o[63&a]),a=0):s===c-2?(a=t[s]<<16|t[s+1]<<8,i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),i.appendCharCode(o[a>>>6&63]),r&&i.appendCharCode(61)):s===c-1&&(a=t[s]<<16,i.appendCharCode(o[a>>>18&63]),i.appendCharCode(o[a>>>12&63]),r&&(i.appendCharCode(61),i.appendCharCode(61)));return i.getOutputString()},t.decodeWithJS=function(e,t){if(!e||0==e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+="==":3===n&&(e+="="),t||(t=new Uint8Array(e.length));for(var a=0,o=e.length,i=0;i<o;i+=4){var s=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)];t[a++]=s>>>16&255,t[a++]=s>>>8&255,t[a++]=255&s}return 61==e.charCodeAt(o-1)&&a--,61==e.charCodeAt(o-2)&&a--,t.subarray(0,a)}}(t.Base64||(t.Base64={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(t){t.encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var n=t.length,r=new e.StringBuilder,a=0,o=1,i=0;i<n;i+=2){var s;s=i==n-1?t[i]<<8:t[i]<<8|t[i+1],r.appendCharCode(a<<16-o|s>>>o),a=s&(1<<o)-1,15===o?(r.appendCharCode(a),a=0,o=1):o+=1,i>=n-2&&r.appendCharCode(a<<16-o)}return r.appendCharCode(32768|n%2),r.getOutputString()},t.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t=new Uint8Array(3*e.length),n=0,r=function(e){t[n++]=e>>>8,t[n++]=255&e},a=0,o=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s>=32768?(32769==s&&n--,o=0):(0==o?a=s:(r(a<<o|s>>>15-o),a=s&(1<<15-o)-1),15==o?o=0:o+=1)}return t.subarray(0,n)}}(t.BinaryString||(t.BinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){e.encodeFromString=function(e,t){var n=e.charCodeAt(t);if(n<55296||n>56319)return n;var r=e.charCodeAt(t+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},e.decodeToString=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"))}}(e.CodePoint||(e.CodePoint={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(e){var t=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];e.encode=function(e){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n.join(" ")}}(e.DecimalString||(e.DecimalString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(e){!function(t){t.encode=function(t){return e.BinaryString.encode(t).replace(/\0/g,"耂")},t.decode=function(t){return e.BinaryString.decode(t.replace(/\u8002/g,"\0"))}}(e.StorageBinaryString||(e.StorageBinaryString={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){!function(t){!function(n){var r,a;n.encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(t):n.encodeWithJS(t):new Uint8Array(0)},n.decode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?a.decode(t):n.decodeWithJS(t):""},n.encodeWithJS=function(e,n){if(!e||0==e.length)return new Uint8Array(0);n||(n=new Uint8Array(4*e.length));for(var r=0,a=0;a<e.length;a++){var o=t.CodePoint.encodeFromString(e,a);if(o<=127)n[r++]=o;else if(o<=2047)n[r++]=192|o>>>6,n[r++]=128|63&o;else if(o<=65535)n[r++]=224|o>>>12,n[r++]=128|o>>>6&63,n[r++]=128|63&o;else{if(!(o<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|o>>>18,n[r++]=128|o>>>12&63,n[r++]=128|o>>>6&63,n[r++]=128|63&o,a++}}return n.subarray(0,r)},n.decodeWithJS=function(t,n,r){if(void 0===n&&(n=0),!t||0==t.length)return"";void 0===r&&(r=t.length);for(var a,o,i=new e.StringBuilder,s=n,c=r;s<c;){if((o=t[s])>>>7==0)a=o,s+=1;else if(o>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(31&o)<<6|63&t[s+1],s+=2}else if(o>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(15&o)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3}else{if(o>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);a=(7&o)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4}i.appendCodePoint(a)}return i.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),a=new TextDecoder("utf-8"),!0)}}(t.UTF8||(t.UTF8={}))}(e.Encoding||(e.Encoding={}))}(a||(a={})),function(e){e.compress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("compress: undefined or null input received");var r=e.CompressionCommon.detectCompressionSourceEncoding(t);n=e.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var a=(new e.Compressor).compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(a,n.outputEncoding)},e.decompress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("decompress: undefined or null input received");n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding),a=(new e.Decompressor).decompressBlock(r);return e.CompressionCommon.encodeDecompressedBytes(a,n.outputEncoding)},e.compressAsync=function(t,n,r){var a;null==r&&(r=function(){});try{a=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(e){return void r(void 0,e)}n=e.ObjectTools.override({inputEncoding:a,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),e.enqueueImmediate(function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(t,n,r):e.AsyncCompressor.compressAsync(t,n,r)})},e.decompressAsync=function(t,n,r){if(null==r&&(r=function(){}),null!=t){n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var a=e.BufferTools.convertToUint8ArrayIfNeeded(t);e.EventLoop.enqueueImmediate(function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(a,n,r):e.AsyncDecompressor.decompressAsync(t,n,r)})}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},e.createCompressionStream=function(){return e.AsyncCompressor.createCompressionStream()},e.createDecompressionStream=function(){return e.AsyncDecompressor.createDecompressionStream()},e.encodeUTF8=function(t){return e.Encoding.UTF8.encode(t)},e.decodeUTF8=function(t){return e.Encoding.UTF8.decode(t)},e.encodeBase64=function(t){return e.Encoding.Base64.encode(t)},e.decodeBase64=function(t){return e.Encoding.Base64.decode(t)},e.encodeBinaryString=function(t){return e.Encoding.BinaryString.encode(t)},e.decodeBinaryString=function(t){return e.Encoding.BinaryString.decode(t)},e.encodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.encode(t)},e.decodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.decode(t)}}(a||(a={}))},374:(e,t,n)=>{const{AbortError:r,codes:a}=n(141),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:s}=n(132),c=n(86),{ERR_INVALID_ARG_TYPE:l}=a;e.exports.addAbortSignal=function(t,n){if((e=>{if("object"!=typeof e||!("aborted"in e))throw new l("signal","AbortSignal",e)})(t),!o(n)&&!i(n))throw new l("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const n=o(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?n():(e.addEventListener("abort",n),c(t,()=>e.removeEventListener("abort",n))),t}},616:(e,t,n)=>{const{StringPrototypeSlice:r,SymbolIterator:a,TypedArrayPrototypeSet:o,Uint8Array:i}=n(191),{Buffer:s}=n(485),{inspect:c}=n(775);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)o(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[a](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,a=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++a,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++a}while(null!==(n=n.next));return this.length-=a,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,a=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(o(t,s,n-e),++a,r.next?this.head=r.next:this.head=this.tail=null):(o(t,new i(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}o(t,s,n-e),e-=s.length,++a}while(null!==(r=r.next));return this.length-=a,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},818:(e,t,n)=>{const{pipeline:r}=n(754),a=n(182),{destroyer:o}=n(230),{isNodeStream:i,isReadable:s,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:d,isReadableStream:p}=n(132),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:g}}=n(141),m=n(86);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return a.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=a.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=a.from(e[t])}for(let n=0;n<e.length;++n)if(i(e[n])||l(e[n])){if(n<e.length-1&&!(s(e[n])||p(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(c(e[n])||d(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be writable")}let n,w,y,v,b;const k=e[0],S=r(e,function(e){const t=v;v=null,t?t(e):e?b.destroy(e):P||C||b.destroy()}),C=!!(c(k)||d(k)||u(k)),P=!!(s(S)||p(S)||u(S));if(b=new a({writableObjectMode:!(null==k||!k.writableObjectMode),readableObjectMode:!(null==S||!S.writableObjectMode),writable:C,readable:P}),C){if(i(k))b._write=function(e,t,r){k.write(e,t)?r():n=r},b._final=function(e){k.end(),w=e},k.on("drain",function(){if(n){const e=n;n=null,e()}});else if(l(k)){const e=(u(k)?k.writable:k).getWriter();b._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},b._final=async function(t){try{await e.ready,e.close().catch(()=>{}),w=t}catch(e){t(e)}}}const e=u(S)?S.readable:S;m(e,()=>{if(w){const e=w;w=null,e()}})}if(P)if(i(S))S.on("readable",function(){if(y){const e=y;y=null,e()}}),S.on("end",function(){b.push(null)}),b._read=function(){for(;;){const e=S.read();if(null===e)return void(y=b._read);if(!b.push(e))return}};else if(l(S)){const e=(u(S)?S.readable:S).getReader();b._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!b.push(t))return;if(n)return void b.push(null)}catch{return}}}return b._destroy=function(e,t){e||null===v||(e=new f),y=null,n=null,w=null,null===v?t(e):(v=t,i(S)&&o(S,e))},b}},230:(e,t,n)=>{const r=n(533),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=n(141),{Symbol:s}=n(191),{kDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:d}=n(132),p=s("kDestroy"),f=s("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function g(e,t,n){let a=!1;function o(t){if(a)return;a=!0;const o=e._readableState,i=e._writableState;h(t,i,o),i&&(i.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(m,e,t):r.nextTick(w,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function m(e,t){y(e,t),w(e)}function w(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function v(e,t,n){const a=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=a&&a.destroyed)return this;null!=a&&a.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),a&&!a.errored&&(a.errored=t),n?r.nextTick(y,e,t):y(e,t))}function b(e){let t=!1;function n(n){if(t)return void v(e,null!=n?n:new o);t=!0;const a=e._readableState,i=e._writableState,s=i||a;a&&(a.constructed=!0),i&&(i.constructed=!0),s.destroyed?e.emit(p,n):n?v(e,n,!0):r.nextTick(k,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function k(e){e.emit(f)}function S(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function C(e){e.emit("close")}function P(e,t){e.emit("error",t),r.nextTick(C,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,a=e._writableState;n&&(n.constructed=!1),a&&(a.constructed=!1),e.once(f,t),e.listenerCount(f)>1||r.nextTick(b,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new i),d(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(P,e,t):r.nextTick(C,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,o=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),o.constructed?g(this,e,t):this.once(p,function(n){g(this,a(n,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:v}},182:(e,t,n)=>{const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:o,ObjectSetPrototypeOf:i}=n(191);e.exports=l;const s=n(858),c=n(373);i(l.prototype,s.prototype),i(l,s);{const e=o(c.prototype);for(let t=0;t<e.length;t++){const n=e[t];l.prototype[n]||(l.prototype[n]=c.prototype[n])}}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function p(){return void 0===u&&(u={}),u}r(l.prototype,{writable:{__proto__:null,...a(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(c.prototype,"writableLength")},writableFinished:{__proto__:null,...a(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return p().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return p().newReadableWritablePairFromDuplex(e)},l.from=function(e){return d||(d=n(749)),d(e,"body")}},749:(e,t,n)=>{const r=n(533),a=n(485),{isReadable:o,isWritable:i,isIterable:s,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:d}=n(132),p=n(86),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:g}}=n(141),{destroyer:m}=n(230),w=n(182),y=n(858),{createDeferredPromise:v}=n(775),b=n(913),k=globalThis.Blob||a.Blob,S=void 0!==k?function(e){return e instanceof k}:function(e){return!1},C=globalThis.AbortController||n(876).AbortController,{FunctionPrototypeCall:P}=n(191);class x extends w{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function _(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,n=e.writable;let r,a,s,c,l,u=!!o(t),d=!!i(n);function h(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new x({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(p(n,e=>{d=!1,e&&m(t,e),h(e)}),l._write=function(e,t,a){n.write(e,t)?a():r=a},l._final=function(e){n.end(),a=e},n.on("drain",function(){if(r){const e=r;r=null,e()}}),n.on("finish",function(){if(a){const e=a;a=null,e()}})),u&&(p(t,e=>{u=!1,e&&m(t,e),h(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){l.push(null)}),l._read=function(){for(;;){const e=t.read();if(null===e)return void(s=l._read);if(!l.push(e))return}}),l._destroy=function(e,o){e||null===c||(e=new f),s=null,r=null,a=null,null===c?o(e):(c=o,m(n,e),m(t,e))},l}e.exports=function e(t,n){if(d(t))return t;if(l(t))return _({readable:t});if(u(t))return _({writable:t});if(c(t))return _({writable:!1,readable:!1});if("function"==typeof t){const{value:e,write:a,final:o,destroy:i}=function(e){let{promise:t,resolve:n}=v();const a=new C,o=a.signal,i=e(async function*(){for(;;){const e=t;t=null;const{chunk:a,done:i,cb:s}=await e;if(r.nextTick(s),i)return;if(o.aborted)throw new f(void 0,{cause:o.reason});({promise:t,resolve:n}=v()),yield a}}(),{signal:o});return{value:i,write(e,t,r){const a=n;n=null,a({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){a.abort(),t(e)}}}(t);if(s(e))return b(x,e,{objectMode:!0,write:a,final:o,destroy:i});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const n=P(c,e,e=>{if(null!=e)throw new g("nully","body",e)},e=>{m(t,e)});return t=new x({objectMode:!0,readable:!1,write:a,final(e){o(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:i})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,e)}if(S(t))return e(t.arrayBuffer());if(s(t))return b(x,t,{objectMode:!0,writable:!1});if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return _({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});const a=null==t?void 0:t.then;if("function"==typeof a){let e;return P(a,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{m(e,t)}),e=new x({objectMode:!0,writable:!1,read(){}})}throw new h(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},86:(e,t,n)=>{const r=n(533),{AbortError:a,codes:o}=n(141),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:c,once:l}=n(775),{validateAbortSignal:u,validateFunction:d,validateObject:p,validateBoolean:f}=n(904),{Promise:h,PromisePrototypeThen:g}=n(191),{isClosed:m,isReadable:w,isReadableNodeStream:y,isReadableStream:v,isReadableFinished:b,isReadableErrored:k,isWritable:S,isWritableNodeStream:C,isWritableStream:P,isWritableFinished:x,isWritableErrored:_,isNodeStream:I,willEmitClose:A,kIsClosedPromise:E}=n(132),T=()=>{};function M(e,t,n){var o,f;if(2===arguments.length?(n=t,t=c):null==t?t=c:p(t,"options"),d(n,"callback"),u(t.signal,"options.signal"),n=l(n),v(e)||P(e))return function(e,t,n){let o=!1,i=T;if(t.signal)if(i=()=>{o=!0,n.call(e,new a(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(i);else{const r=n;n=l((...n)=>{t.signal.removeEventListener("abort",i),r.apply(e,n)}),t.signal.addEventListener("abort",i)}const s=(...t)=>{o||r.nextTick(()=>n.apply(e,t))};return g(e[E].promise,s,s),T}(e,t,n);if(!I(e))throw new i("stream",["ReadableStream","WritableStream","Stream"],e);const h=null!==(o=t.readable)&&void 0!==o?o:y(e),M=null!==(f=t.writable)&&void 0!==f?f:C(e),R=e._writableState,O=e._readableState,D=()=>{e.writable||F()};let B=A(e)&&y(e)===h&&C(e)===M,W=x(e,!1);const F=()=>{W=!0,e.destroyed&&(B=!1),(!B||e.readable&&!h)&&(h&&!N||n.call(e))};let N=b(e,!1);const L=()=>{N=!0,e.destroyed&&(B=!1),(!B||e.writable&&!M)&&(M&&!W||n.call(e))},$=t=>{n.call(e,t)};let U=m(e);const j=()=>{U=!0;const t=_(e)||k(e);return t&&"boolean"!=typeof t?n.call(e,t):h&&!N&&y(e,!0)&&!b(e,!1)?n.call(e,new s):!M||W||x(e,!1)?void n.call(e):n.call(e,new s)},V=()=>{U=!0;const t=_(e)||k(e);if(t&&"boolean"!=typeof t)return n.call(e,t);n.call(e)},z=()=>{e.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?M&&!R&&(e.on("end",D),e.on("close",D)):(e.on("complete",F),B||e.on("abort",j),e.req?z():e.on("request",z)),B||"boolean"!=typeof e.aborted||e.on("aborted",j),e.on("end",L),e.on("finish",F),!1!==t.error&&e.on("error",$),e.on("close",j),U?r.nextTick(j):null!=R&&R.errorEmitted||null!=O&&O.errorEmitted?B||r.nextTick(V):(h||B&&!w(e)||!W&&!1!==S(e))&&(M||B&&!S(e)||!N&&!1!==w(e))?O&&e.req&&e.aborted&&r.nextTick(V):r.nextTick(V);const G=()=>{n=T,e.removeListener("aborted",j),e.removeListener("complete",F),e.removeListener("abort",j),e.removeListener("request",z),e.req&&e.req.removeListener("finish",F),e.removeListener("end",D),e.removeListener("close",D),e.removeListener("finish",F),e.removeListener("end",L),e.removeListener("error",$),e.removeListener("close",j)};if(t.signal&&!U){const o=()=>{const r=n;G(),r.call(e,new a(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(o);else{const r=n;n=l((...n)=>{t.signal.removeEventListener("abort",o),r.apply(e,n)}),t.signal.addEventListener("abort",o)}}return G}e.exports=M,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=c),null!==(n=t)&&void 0!==n&&n.cleanup&&(f(t.cleanup,"cleanup"),r=t.cleanup),new h((n,a)=>{const o=M(e,t,e=>{r&&o(),e?a(e):n()})})}},913:(e,t,n)=>{const r=n(533),{PromisePrototypeThen:a,SymbolAsyncIterator:o,SymbolIterator:i}=n(191),{Buffer:s}=n(485),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=n(141).codes;e.exports=function(e,t,n){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else{if(!t||!t[i])throw new c("iterable",["Iterable"],t);d=!1,u=t[i]()}const p=new e({objectMode:!0,highWaterMark:1,...n});let f=!1;return p._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)p.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(p.push(t))continue;f=!1}}catch(e){p.destroy(e)}break}}())},p._destroy=function(e,t){a(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},p}},200:(e,t,n)=>{const{ArrayIsArray:r,ObjectSetPrototypeOf:a}=n(191),{EventEmitter:o}=n(465);function i(e){o.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}a(i.prototype,o.prototype),a(i,o),i.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",c),n.on("close",l));let i=!1;function c(){i||(i=!0,e.end())}function l(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",c),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return s(n,"error",u),s(e,"error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:i,prependListener:s}},554:(e,t,n)=>{const r=globalThis.AbortController||n(876).AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:s},AbortError:c}=n(141),{validateAbortSignal:l,validateInteger:u,validateObject:d}=n(904),p=n(191).Symbol("kWeak"),{finished:f}=n(86),h=n(818),{addAbortSignalNoValidate:g}=n(374),{isWritable:m,isNodeStream:w}=n(132),{ArrayPrototypePush:y,MathFloor:v,Number:b,NumberIsNaN:k,Promise:S,PromiseReject:C,PromisePrototypeThen:P,Symbol:x}=n(191),_=x("kEmpty"),I=x("kEof");function A(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let n=1;return null!=(null==t?void 0:t.concurrency)&&(n=v(t.concurrency)),u(n,"concurrency",1),async function*(){var a,o;const i=new r,s=this,l=[],u=i.signal,d={signal:u},p=()=>i.abort();let f,h;null!=t&&null!==(a=t.signal)&&void 0!==a&&a.aborted&&p(),null==t||null===(o=t.signal)||void 0===o||o.addEventListener("abort",p);let g=!1;function m(){g=!0}!async function(){try{for await(let t of s){var r;if(g)return;if(u.aborted)throw new c;try{t=e(t,d)}catch(e){t=C(e)}t!==_&&("function"==typeof(null===(r=t)||void 0===r?void 0:r.catch)&&t.catch(m),l.push(t),f&&(f(),f=null),!g&&l.length&&l.length>=n&&await new S(e=>{h=e}))}l.push(I)}catch(e){const t=C(e);P(t,void 0,m),l.push(t)}finally{var a;g=!0,f&&(f(),f=null),null==t||null===(a=t.signal)||void 0===a||a.removeEventListener("abort",p)}}();try{for(;;){for(;l.length>0;){const e=await l[0];if(e===I)return;if(u.aborted)throw new c;e!==_&&(yield e),l.shift(),h&&(h(),h=null)}await new S(e=>{f=e})}}finally{i.abort(),g=!0,h&&(h(),h=null)}}.call(this)}async function E(e,t=void 0){for await(const n of T.call(this,e,t))return!0;return!1}function T(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return A.call(this,async function(t,n){return await e(t,n)?t:_},t)}class M extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function R(e){if(e=b(e),k(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c({cause:e.signal.reason});yield[t++,r]}}.call(this)},drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=R(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;e--<=0&&(yield n)}}.call(this)},filter:T,flatMap:function(e,t){const n=A.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:A,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=R(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;if(!(e-- >0))return;yield n}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),w(e)&&!m(e))throw new a("stream",e,"must be writable");const n=h(this,e);return null!=t&&t.signal&&g(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await E.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const n of A.call(this,async function(t,n){return await e(t,n),_},t));},reduce:async function(e,t,n){var a;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let i=arguments.length>1;if(null!=n&&null!==(a=n.signal)&&void 0!==a&&a.aborted){const e=new c(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(e)),e}const s=new r,u=s.signal;if(null!=n&&n.signal){const e={once:!0,[p]:this};n.signal.addEventListener("abort",()=>s.abort(),e)}let h=!1;try{for await(const r of this){var g;if(h=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new c;i?t=await e(t,r,{signal:u}):(t=r,i=!0)}if(!h&&!i)throw new M}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c(void 0,{cause:e.signal.reason});y(t,r)}return t},some:E,find:async function(e,t){for await(const n of T.call(this,e,t))return n}}},467:(e,t,n)=>{const{ObjectSetPrototypeOf:r}=n(191);e.exports=o;const a=n(210);function o(e){if(!(this instanceof o))return new o(e);a.call(this,e)}r(o.prototype,a.prototype),r(o,a),o.prototype._transform=function(e,t,n){n(null,e)}},754:(e,t,n)=>{const r=n(533),{ArrayIsArray:a,Promise:o,SymbolAsyncIterator:i}=n(191),s=n(86),{once:c}=n(775),l=n(230),u=n(182),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:w}=n(141),{validateFunction:y,validateAbortSignal:v}=n(904),{isIterable:b,isReadable:k,isReadableNodeStream:S,isNodeStream:C,isTransformStream:P,isWebStream:x,isReadableStream:_,isReadableEnded:I}=n(132),A=globalThis.AbortController||n(876).AbortController;let E,T;function M(e,t,n){let r=!1;return e.on("close",()=>{r=!0}),{destroy:t=>{r||(r=!0,l.destroyer(e,t||new g("pipe")))},cleanup:s(e,{readable:t,writable:n},e=>{r=!e})}}function R(e){if(b(e))return e;if(S(e))return async function*(e){T||(T=n(858)),yield*T.prototype[i].call(e)}(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function O(e,t,n,{end:r}){let a,i=null;const c=e=>{if(e&&(a=e),i){const e=i;i=null,e()}},l=()=>new o((e,t)=>{a?t(a):i=()=>{a?t(a):e()}});t.on("drain",c);const u=s(t,{readable:!1},c);try{t.writableNeedDrain&&await l();for await(const n of e)t.write(n)||await l();r&&t.end(),await l(),n()}catch(e){n(a!==e?d(a,e):e)}finally{u(),t.off("drain",c)}}async function D(e,t,n,{end:r}){P(t)&&(t=t.writable);const a=t.getWriter();try{for await(const t of e)await a.ready,a.write(t).catch(()=>{});await a.ready,r&&await a.close(),n()}catch(e){try{await a.abort(e),n(e)}catch(e){n(e)}}}function B(e,t,o){if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new h("streams");const i=new A,s=i.signal,c=null==o?void 0:o.signal,l=[];function d(){F(new w)}let g,m;v(c,"options.signal"),null==c||c.addEventListener("abort",d);const y=[];let I,T=0;function B(e){F(e,0==--T)}function F(e,n){if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||n){for(;y.length;)y.shift()(g);null==c||c.removeEventListener("abort",d),i.abort(),n&&(g||l.forEach(e=>e()),r.nextTick(t,g,m))}}for(let $=0;$<e.length;$++){const U=e[$],j=$<e.length-1,V=$>0,z=j||!1!==(null==o?void 0:o.end),G=$===e.length-1;if(C(U)){if(z){const{destroy:q,cleanup:K}=M(U,j,V);y.push(q),k(U)&&G&&l.push(K)}function H(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&B(e)}U.on("error",H),k(U)&&G&&l.push(()=>{U.removeListener("error",H)})}if(0===$)if("function"==typeof U){if(I=U({signal:s}),!b(I))throw new f("Iterable, AsyncIterable or Stream","source",I)}else I=b(U)||S(U)||P(U)?U:u.from(U);else if("function"==typeof U){var N;if(I=P(I)?R(null===(N=I)||void 0===N?void 0:N.readable):R(I),I=U(I,{signal:s}),j){if(!b(I,!0))throw new f("AsyncIterable",`transform[${$-1}]`,I)}else{var L;E||(E=n(467));const J=new E({objectMode:!0}),Y=null===(L=I)||void 0===L?void 0:L.then;if("function"==typeof Y)T++,Y.call(I,e=>{m=e,null!=e&&J.write(e),z&&J.end(),r.nextTick(B)},e=>{J.destroy(e),r.nextTick(B,e)});else if(b(I,!0))T++,O(I,J,B,{end:z});else{if(!_(I)&&!P(I))throw new f("AsyncIterable or Promise","destination",I);{const X=I.readable||I;T++,O(X,J,B,{end:z})}}I=J;const{destroy:Z,cleanup:Q}=M(I,!1,!0);y.push(Z),G&&l.push(Q)}}else if(C(U)){if(S(I)){T+=2;const ee=W(I,U,B,{end:z});k(U)&&G&&l.push(ee)}else if(P(I)||_(I)){const te=I.readable||I;T++,O(te,U,B,{end:z})}else{if(!b(I))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],I);T++,O(I,U,B,{end:z})}I=U}else if(x(U)){if(S(I))T++,D(R(I),U,B,{end:z});else if(_(I)||b(I))T++,D(I,U,B,{end:z});else{if(!P(I))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],I);T++,D(I.readable,U,B,{end:z})}I=U}else I=u.from(U)}return(null!=s&&s.aborted||null!=c&&c.aborted)&&r.nextTick(d),I}function W(e,t,n,{end:a}){let o=!1;if(t.on("close",()=>{o||n(new m)}),e.pipe(t,{end:!1}),a){function i(){o=!0,t.end()}I(e)?r.nextTick(i):e.once("end",i)}else n();return s(e,{readable:!0,writable:!1},t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)}),s(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:B,pipeline:function(...e){return B(e,c(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},858:(e,t,n)=>{const r=n(533),{ArrayPrototypeIndexOf:a,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:s,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:d,SafeSet:p,SymbolAsyncIterator:f,Symbol:h}=n(191);e.exports=L,L.ReadableState=N;const{EventEmitter:g}=n(465),{Stream:m,prependListener:w}=n(200),{Buffer:y}=n(485),{addAbortSignal:v}=n(374),b=n(86);let k=n(775).debuglog("stream",e=>{k=e});const S=n(616),C=n(230),{getHighWaterMark:P,getDefaultHighWaterMark:x}=n(498),{aggregateTwoErrors:_,codes:{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:T,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:M}}=n(141),{validateObject:R}=n(904),O=h("kPaused"),{StringDecoder:D}=n(464),B=n(913);u(L.prototype,m.prototype),u(L,m);const W=()=>{},{errorOrDestroy:F}=C;function N(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(182)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?P(this,e,"readableHighWaterMark",r):x(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new D(e.encoding),this.encoding=e.encoding)}function L(e){if(!(this instanceof L))return new L(e);const t=this instanceof n(182);this._readableState=new N(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&v(e.signal,this)),m.call(this,e),C.construct(this,()=>{this._readableState.needReadable&&G(this,this._readableState)})}function $(e,t,n,r){k("readableAddChunk",t);const a=e._readableState;let o;if(a.objectMode||("string"==typeof t?(n=n||a.defaultEncoding,a.encoding!==n&&(r&&a.encoding?t=y.from(t,n).toString(a.encoding):(t=y.from(t,n),n=""))):t instanceof y?n="":m._isUint8Array(t)?(t=m._uint8ArrayToBuffer(t),n=""):null!=t&&(o=new I("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)a.reading=!1,function(e,t){if(k("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?V(e):(t.needReadable=!1,t.emittedReadable=!0,z(e))}}(e,a);else if(a.objectMode||t&&t.length>0)if(r)if(a.endEmitted)F(e,new M);else{if(a.destroyed||a.errored)return!1;U(e,a,t,!0)}else if(a.ended)F(e,new T);else{if(a.destroyed||a.errored)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?U(e,a,t,!1):G(e,a)):U(e,a,t,!1)}else r||(a.reading=!1,G(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function U(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&V(e)),G(e,t)}function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:i(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function V(e){const t=e._readableState;k("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(z,e))}function z(e){const t=e._readableState;k("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Y(e)}function G(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(H,e,t))}function H(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(k("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function q(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[O]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function K(e){k("readable nexttick read 0"),e.read(0)}function J(e,t){k("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Y(e),t.flowing&&!t.reading&&e.read(0)}function Y(e){const t=e._readableState;for(k("flow",t.flowing);t.flowing&&null!==e.read(););}function Z(e,t){"function"!=typeof e.read&&(e=L.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=W;function a(t){this===e?(r(),r=W):r=t}e.on("readable",a);const o=b(e,{writable:!1},e=>{n=e?_(n,e):null,r(),r=W});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(a)}}}catch(e){throw n=_(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",a),o()):C.destroyer(e,null)}}(e,t);return n.stream=e,n}function Q(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function X(e){const t=e._readableState;k("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ee,t,e))}function ee(e,t){if(k("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ne;function re(){return void 0===ne&&(ne={}),ne}L.prototype.destroy=C.destroy,L.prototype._undestroy=C.undestroy,L.prototype._destroy=function(e,t){t(e)},L.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},L.prototype.push=function(e,t){return $(this,e,t,!1)},L.prototype.unshift=function(e,t){return $(this,e,t,!0)},L.prototype.isPaused=function(){const e=this._readableState;return!0===e[O]||!1===e.flowing},L.prototype.setEncoding=function(e){const t=new D(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this},L.prototype.read=function(e){k("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new E("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?X(this):V(this),null;if(0===(e=j(e,t))&&t.ended)return 0===t.length&&X(this),null;let r,a=t.needReadable;if(k("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,k("length less than watermark",a)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)a=!1,k("reading, ended or constructing",a);else if(a){k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(e){F(this,e)}t.sync=!1,t.reading||(e=j(n,t))}return r=e>0?Q(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&X(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},L.prototype._read=function(e){throw new A("_read()")},L.prototype.pipe=function(e,t){const n=this,a=this._readableState;1===a.pipes.length&&(a.multiAwaitDrain||(a.multiAwaitDrain=!0,a.awaitDrainWriters=new p(a.awaitDrainWriters?[a.awaitDrainWriters]:[]))),a.pipes.push(e),k("pipe count=%d opts=%j",a.pipes.length,t);const o=t&&!1===t.end||e===r.stdout||e===r.stderr?g:i;function i(){k("onend"),e.end()}let s;a.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",function t(r,o){k("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,k("cleanup"),e.removeListener("close",f),e.removeListener("finish",h),s&&e.removeListener("drain",s),e.removeListener("error",d),e.removeListener("unpipe",t),n.removeListener("end",i),n.removeListener("end",g),n.removeListener("data",u),c=!0,s&&a.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&s())});let c=!1;function l(){c||(1===a.pipes.length&&a.pipes[0]===e?(k("false write response, pause",0),a.awaitDrainWriters=e,a.multiAwaitDrain=!1):a.pipes.length>1&&a.pipes.includes(e)&&(k("false write response, pause",a.awaitDrainWriters.size),a.awaitDrainWriters.add(e)),n.pause()),s||(s=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(k("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(k("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",s))}function u(t){k("ondata");const n=e.write(t);k("dest.write",n),!1===n&&l()}function d(t){if(k("onerror",t),g(),e.removeListener("error",d),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?F(e,t):e.emit("error",t)}}function f(){e.removeListener("finish",h),g()}function h(){k("onfinish"),e.removeListener("close",f),g()}function g(){k("unpipe"),n.unpipe(e)}return n.on("data",u),w(e,"error",d),e.once("close",f),e.once("finish",h),e.emit("pipe",n),!0===e.writableNeedDrain?a.flowing&&l():a.flowing||(k("pipe resume"),n.resume()),e},L.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=a(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},L.prototype.on=function(e,t){const n=m.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,k("on readable",a.length,a.reading),a.length?V(this):a.reading||r.nextTick(K,this))),n},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(e,t){const n=m.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(q,this),n},L.prototype.off=L.prototype.removeListener,L.prototype.removeAllListeners=function(e){const t=m.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(q,this),t},L.prototype.resume=function(){const e=this._readableState;return e.flowing||(k("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(J,e,t))}(this,e)),e[O]=!1,this},L.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},L.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{F(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=l(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},L.prototype[f]=function(){return Z(this)},L.prototype.iterator=function(e){return void 0!==e&&R(e,"options"),Z(this,e)},c(L.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(N.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(e){this[O]=!!e}}}),L._fromList=Q,L.from=function(e,t){return B(L,e,t)},L.fromWeb=function(e,t){return re().newStreamReadableFromReadableStream(e,t)},L.toWeb=function(e,t){return re().newReadableStreamFromStreamReadable(e,t)},L.wrap=function(e,t){var n,r;return new L({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){C.destroyer(e,t),n(t)}}).wrap(e)}},498:(e,t,n)=>{const{MathFloor:r,NumberIsInteger:a}=n(191),{ERR_INVALID_ARG_VALUE:o}=n(141).codes;function i(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,n,s){const c=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=c){if(!a(c)||c<0)throw new o(s?`options.${n}`:"options.highWaterMark",c);return r(c)}return i(e.objectMode)},getDefaultHighWaterMark:i}},210:(e,t,n)=>{const{ObjectSetPrototypeOf:r,Symbol:a}=n(191);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:o}=n(141).codes,i=n(182),{getHighWaterMark:s}=n(498);r(l.prototype,i.prototype),r(l,i);const c=a("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),i.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())})}function d(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,n){throw new o("_transform()")},l.prototype._write=function(e,t,n){const r=this._readableState,a=this._writableState,o=r.length;this._transform(e,t,(e,t)=>{e?n(e):(null!=t&&this.push(t),a.ended||o===r.length||r.length<r.highWaterMark?n():this[c]=n)})},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},132:(e,t,n)=>{const{Symbol:r,SymbolAsyncIterator:a,SymbolIterator:o,SymbolFor:i}=n(191),s=r("kDestroyed"),c=r("kIsErrored"),l=r("kIsReadable"),u=r("kIsDisturbed"),d=i("nodejs.webstream.isClosedPromise"),p=i("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function m(e){return!(!e||g(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function w(e){return!(!e||g(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||g(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function v(e){if(!g(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!=r&&r.destroyed)}function b(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function k(e,t){if(!f(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function S(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!v(e)&&f(e)&&e.readable&&!k(e)}function C(e){return"boolean"!=typeof(null==e?void 0:e.writable)?null:!v(e)&&h(e)&&e.writable&&!b(e)}function P(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function x(e){return"boolean"==typeof e._sent100&&P(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,n,r,a,o,i,s,l,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(a=null!==(o=null!==(i=e[c])&&void 0!==i?i:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==a?a:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:c,isReadable:S,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:p,isClosed:function(e){if(!g(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&P(e)?e._closed:null},isDestroyed:v,isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return g(e)?!(!v(e)&&(!1!==(null==t?void 0:t.readable)&&S(e)||!1!==(null==t?void 0:t.writable)&&C(e))):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[a]:!1===t?"function"==typeof e[o]:"function"==typeof e[a]||"function"==typeof e[o])},isReadableNodeStream:f,isReadableStream:m,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:k,isReadableErrored:function(e){var t,n;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return m(e)||w(e)||y(e)},isWritable:C,isWritableNodeStream:h,isWritableStream:w,isWritableEnded:b,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:x,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&x(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:y}},373:(e,t,n)=>{const r=n(533),{ArrayPrototypeSlice:a,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:s,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:p}=n(191);e.exports=D,D.WritableState=R;const{EventEmitter:f}=n(465),h=n(200).Stream,{Buffer:g}=n(485),m=n(230),{addAbortSignal:w}=n(374),{getHighWaterMark:y,getDefaultHighWaterMark:v}=n(498),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:_,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:A}=n(141).codes,{errorOrDestroy:E}=m;function T(){}l(D.prototype,h.prototype),l(D,h);const M=d("kOnFinished");function R(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(182)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const a=!(!e||!1!==e.decodeStrings);this.decodeStrings=!a,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=N.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function D(e){const t=this instanceof n(182);if(!t&&!i(D,this))return new D(e);this._writableState=new R(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&w(e.signal,this)),h.call(this,e),m.construct(this,()=>{const e=this._writableState;e.writing||j(this,e),z(this,e)})}function B(e,t,n,a){const o=e._writableState;if("function"==typeof n)a=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new A(n)}else n=o.defaultEncoding;"function"!=typeof a&&(a=T)}if(null===t)throw new _;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=g.from(t,n),n="buffer");else if(t instanceof g)n="buffer";else{if(!h._isUint8Array(t))throw new b("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let i;return o.ending?i=new I:o.destroyed&&(i=new P("write")),i?(r.nextTick(a,i),E(e,i,!0),i):(o.pendingcb++,function(e,t,n,r,a){const o=t.objectMode?1:n.length;t.length+=o;const i=t.length<t.highWaterMark;return i||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:a}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&a!==T&&(t.allNoop=!1)):(t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),i&&!t.errored&&!t.destroyed}(e,o,t,n,a))}function W(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new P("write")):n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function F(e,t,n,r){--t.pendingcb,r(n),U(t),E(e,n)}function N(e,t){const n=e._writableState,a=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),a?r.nextTick(F,e,n,t,o):F(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&j(e,n),a?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(L,n.afterWriteTickInfo)):$(e,n,1,o))):E(e,new S)}function L({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,$(e,t,n,r)}function $(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&U(t),z(e,t)}function U(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:a}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,a(null!==(t=e.errored)&&void 0!==t?t:new P("write"))}const n=e[M].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new P("end"))}O(e)}function j(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:o}=t,i=n.length-r;if(!i)return;let s=r;if(t.bufferProcessing=!0,i>1&&e._writev){t.pendingcb-=i-1;const r=t.allNoop?T:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},o=t.allNoop&&0===s?n:a(n,s);o.allBuffers=t.allBuffers,W(e,t,!0,t.length,o,"",r),O(t)}else{do{const{chunk:r,encoding:a,callback:i}=n[s];n[s++]=null,W(e,t,!1,o?1:r.length,r,a,i)}while(s<n.length&&!t.writing);s===n.length?O(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(e,t,n){V(t)&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function a(a){if(n)E(e,null!=a?a:S());else if(n=!0,t.pendingcb--,a){const n=t[M].splice(0);for(let e=0;e<n.length;e++)n[e](a);E(e,a,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(G,e,t))}t.sync=!0,t.pendingcb++;try{e._final(a)}catch(e){a(e)}t.sync=!1}(e,t)))}(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{V(t)?G(e,t):t.pendingcb--},e,t)):V(t)&&(t.pendingcb++,G(e,t))))}function G(e,t){t.pendingcb--,t.finished=!0;const n=t[M].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}R.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},s(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(D,p,{__proto__:null,value:function(e){return!!i(this,e)||this===D&&e&&e._writableState instanceof R}}),D.prototype.pipe=function(){E(this,new C)},D.prototype.write=function(e,t,n){return!0===B(this,e,t,n)},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||j(this,e))},D.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!g.isEncoding(e))throw new A(e);return this._writableState.defaultEncoding=e,this},D.prototype._write=function(e,t,n){if(!this._writev)throw new k("_write()");this._writev([{chunk:e,encoding:t}],n)},D.prototype._writev=null,D.prototype.end=function(e,t,n){const a=this._writableState;let i;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=B(this,e,t);n instanceof o&&(i=n)}return a.corked&&(a.corked=1,this.uncork()),i||(a.errored||a.ending?a.finished?i=new x("end"):a.destroyed&&(i=new P("end")):(a.ending=!0,z(this,a,!0),a.ended=!0)),"function"==typeof n&&(i||a.finished?r.nextTick(n,i):a[M].push(n)),this},c(D.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const H=m.destroy;let q;function K(){return void 0===q&&(q={}),q}D.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[M].length)&&r.nextTick(U,n),H.call(this,e,t),this},D.prototype._undestroy=m.undestroy,D.prototype._destroy=function(e,t){t(e)},D.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},D.fromWeb=function(e,t){return K().newStreamWritableFromWritableStream(e,t)},D.toWeb=function(e){return K().newWritableStreamFromStreamWritable(e)}},904:(e,t,n)=>{const{ArrayIsArray:r,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:s,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:p,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:g,StringPrototypeTrim:m}=n(191),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:S}}=n(141),{normalizeEncoding:C}=n(775),{isAsyncFunction:P,isArrayBufferView:x}=n(775).types,_={},I=/^[0-7]+$/,A=w((e,t,n=u,r=l)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new k(t,"an integer",e);if(e<n||e>r)throw new k(t,`>= ${n} && <= ${r}`,e)}),E=w((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new k(t,"an integer",e);if(e<n||e>r)throw new k(t,`>= ${n} && <= ${r}`,e)}),T=w((e,t,n=!1)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new k(t,"an integer",e);const r=n?1:0,a=4294967295;if(e<r||e>a)throw new k(t,`>= ${r} && <= ${a}`,e)});function M(e,t){if("string"!=typeof e)throw new v(t,"string",e)}const R=w((e,t,n)=>{if(!a(n,e)){const r=o(i(n,e=>"string"==typeof e?`'${e}'`:h(e)),", ");throw new b(t,e,"must be one of: "+r)}});function O(e,t){if("boolean"!=typeof e)throw new v(t,"boolean",e)}function D(e,t,n){return null!=e&&p(e,t)?e[t]:n}const B=w((e,t,n=null)=>{const a=D(n,"allowArray",!1),o=D(n,"allowFunction",!1);if(!D(n,"nullable",!1)&&null===e||!a&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new v(t,"Object",e)}),W=w((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new v(t,"a dictionary",e)}),F=w((e,t,n=0)=>{if(!r(e))throw new v(t,"Array",e);if(e.length<n)throw new b(t,e,`must be longer than ${n}`)}),N=w((e,t="buffer")=>{if(!x(e))throw new v(t,["Buffer","TypedArray","DataView"],e)}),L=w((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new v(t,"AbortSignal",e)}),$=w((e,t)=>{if("function"!=typeof e)throw new v(t,"Function",e)}),U=w((e,t)=>{if("function"!=typeof e||P(e))throw new v(t,"Function",e)}),j=w((e,t)=>{if(void 0!==e)throw new v(t,"undefined",e)}),V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function z(e,t){if(void 0===e||!f(V,e))throw new b(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===f(I,e))throw new b(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return T(e,t),e},validateArray:F,validateStringArray:function(e,t){F(e,t);for(let n=0;n<e.length;n++)M(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){F(e,t);for(let n=0;n<e.length;n++)O(e[n],`${t}[${n}]`)},validateBoolean:O,validateBuffer:N,validateDictionary:W,validateEncoding:function(e,t){const n=C(t),r=e.length;if("hex"===n&&r%2!=0)throw new b("encoding",t,`is invalid for data of length ${r}`)},validateFunction:$,validateInt32:E,validateInteger:A,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new v(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&c(e))throw new k(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:B,validateOneOf:R,validatePlainFunction:U,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===m(e).length||+e!=+e>>>0||e>65535||0===e&&!n)throw new y(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(M(e,t),void 0===_[e]){if(void 0!==_[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:M,validateUint32:T,validateUndefined:j,validateUnion:function(e,t,n){if(!a(n,e))throw new v(t,`('${o(n,"|")}')`,e)},validateAbortSignal:L,validateLinkHeaderValue:function(e){if("string"==typeof e)return z(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const a=e[r];z(a,"hints"),n+=a,r!==t-1&&(n+=", ")}return n}throw new b("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},99:(e,t,n)=>{const r=n(292),a=n(760),o=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=o,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>a}),e.exports.Stream=r.Stream,e.exports.default=e.exports},141:(e,t,n)=>{const{format:r,inspect:a,AggregateError:o}=n(775),i=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function p(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function f(e,t,n){n||(n=Error);class a extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const a=(t.match(/%[dfijoOs]/g)||[]).length;return d(a===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${a}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(a.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),a.prototype.code=e,a.prototype[s]=!0,u[e]=a}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const o=[],i=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?o.push(e.toLowerCase()):l.test(e)?i.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(i.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),i.push("Object"))}if(o.length>0){switch(o.length){case 1:r+=`of type ${o[0]}`;break;case 2:r+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`one of type ${o.join(", ")}, or ${e}`}}(i.length>0||s.length>0)&&(r+=" or ")}if(i.length>0){switch(i.length){case 1:r+=`an instance of ${i[0]}`;break;case 2:r+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();r+=`an instance of ${i.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var u;null!==(u=n.constructor)&&void 0!==u&&u.name?r+=`. Received an instance of ${n.constructor.name}`:r+=`. Received ${a(n,{depth:-1})}`}else{let e=a(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=a(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,n)=>{let r;return d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=p(String(n)):"bigint"==typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=p(r)),r+="n"):r=a(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new i([t,e],t.message);return n.code=t.code,n}return e||t}),hideStackFrames:h,codes:u}},191:e=>{e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Uint8Array}},775:(e,t,n)=>{const r=n(485),a=Object.getPrototypeOf(async function(){}).constructor,o=globalThis.Blob||r.Blob,i=void 0!==o?function(e){return e instanceof o}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify:e=>new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))}),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,n]){const r=t.shift();return"f"===n?r.toFixed(6):"j"===n?JSON.stringify(r):"s"===n&&"object"==typeof r?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof a,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:i},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},292:(e,t,n)=>{const{Buffer:r}=n(485),{ObjectDefineProperty:a,ObjectKeys:o,ReflectApply:i}=n(191),{promisify:{custom:s}}=n(775),{streamReturningOperators:c,promiseReturningOperators:l}=n(554),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=n(141),d=n(818),{pipeline:p}=n(754),{destroyer:f}=n(230),h=n(86),g=n(760),m=n(132),w=e.exports=n(200).Stream;w.isDisturbed=m.isDisturbed,w.isErrored=m.isErrored,w.isReadable=m.isReadable,w.Readable=n(858);for(const v of o(c)){const b=c[v];function k(...e){if(new.target)throw u();return w.Readable.from(i(b,this,e))}a(k,"name",{__proto__:null,value:b.name}),a(k,"length",{__proto__:null,value:b.length}),a(w.Readable.prototype,v,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(l)){const C=l[S];function P(...e){if(new.target)throw u();return i(C,this,e)}a(P,"name",{__proto__:null,value:C.name}),a(P,"length",{__proto__:null,value:C.length}),a(w.Readable.prototype,S,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}w.Writable=n(373),w.Duplex=n(182),w.Transform=n(210),w.PassThrough=n(467),w.pipeline=p;const{addAbortSignal:y}=n(374);w.addAbortSignal=y,w.finished=h,w.destroy=f,w.compose=d,a(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),a(p,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),a(h,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),w.Stream=w,w._isUint8Array=function(e){return e instanceof Uint8Array},w._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},760:(e,t,n)=>{const{ArrayPrototypePop:r,Promise:a}=n(191),{isIterable:o,isNodeStream:i,isWebStream:s}=n(132),{pipelineImpl:c}=n(754),{finished:l}=n(86);n(91),e.exports={finished:l,pipeline:function(...e){return new a((t,n)=>{let a,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!i(u)&&!o(u)&&!s(u)){const t=r(e);a=t.signal,l=t.end}c(e,(e,r)=>{e?n(e):t(r)},{signal:a,end:l})})}}},533:e=>{var t,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||i(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},377:(e,t,n)=>{var r=n(485),a=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),o(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},464:(e,t,n)=>{var r=n(377).Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},54:(e,t,n)=>{n.d(t,{MS:()=>E,cF:()=>T,AK:()=>M,M_:()=>R,cX:()=>O,BT:()=>ne,_W:()=>B,Pg:()=>fe,$j:()=>ee,U$:()=>U,U7:()=>j});var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},a={};r.d(a,{MS:()=>o,cF:()=>i,AK:()=>c,M_:()=>s,cX:()=>l,Yd:()=>m,nj:()=>u,O4:()=>A,_W:()=>d,U$:()=>f,U7:()=>h});class o extends Error{constructor(e,t){var n,r;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An unexpected error has occurred"),this.name=this.constructor.name,this.stack=(e?this.stack:null!==(r=null==t?void 0:t.stack)&&void 0!==r?r:this.stack).replace(/^(\w*Error)/,`${this.constructor.name}`)}}class i extends o{constructor(e,t,n){var r;super(e=null!==(r=null!=e?e:null==n?void 0:n.message)&&void 0!==r?r:"An error occurred when executing the API request",n),this.status=t}}class s extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An authorization error occurred",t)}}class c extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"The API request failed as the authorization tokens have expired",t)}}class l extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An initialization error occurred",t)}}class u extends o{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"The method has not been implemented",t)}}class d extends o{constructor(e){super(e=null!=e?e:"Invalid parameter detected")}}const p=e=>{let t=fin.Integrations;t||(fin.Integrations={},t=fin.Integrations);let n=t[e];return n||(t[e]={},n=t[e]),n},f=e=>{p(e).loggingEnabled=!1},h=(e,t="0.0.0")=>{p(e).loggingEnabled=!0,console.log(g(e),`v${t}`)},g=e=>`[@openfin/${e.toLowerCase()}]`;class m{constructor(e){this.name=e,this.prefix=g(e),this.isLoggingEnabled=this.isLoggingEnabled.bind(this),this.logError=this.logError.bind(this),this.logInfo=this.logInfo.bind(this),this.logWarning=this.logWarning.bind(this)}isLoggingEnabled(){return p(this.name).loggingEnabled}logError(e){this.isLoggingEnabled()&&(e.innerError?console.error(this.prefix,e,"\n\n(inner)",e.innerError):console.error(this.prefix,e))}logInfo(...e){this.isLoggingEnabled()&&console.log(this.prefix,...e)}logWarning(...e){this.isLoggingEnabled()&&console.warn(this.prefix,...e)}}const w="oauth-api-auth-flow",y=(e,t,n,r,a,i,s,c)=>async l=>{const u=new URL(l);if(0!==u.href.toLowerCase().indexOf(a.toLowerCase()))return!1;if(window.clearInterval(c),window.clearTimeout(t),window.clearTimeout(n),e.removeAllListeners(),e.close(!0),u.searchParams.get("error")){const e=new o("Authorization error");return e.data=u.toString(),s(e),!0}if(u.searchParams.get("state")!==r){const e=new o("State mismatch");return e.data=u.toString(),s(e),!0}const d=u.searchParams.get("code");if(!d){const e=new o("Authorization code missing");return e.data=u.toString(),s(e),!0}return i(d),!0},v=(e,t,n,r)=>async(a,i)=>{let s;const c=window.setTimeout(()=>{window.clearInterval(s),window.clearTimeout(c),e.removeAllListeners(),e.close(!0),i(new o("Authorization timed out"))},3e5);e.addListener("closing",async()=>{r.logInfo("User closed auth window"),window.clearInterval(s),window.clearTimeout(c),e.removeAllListeners(),i(new o("Failed to complete authorization code flow"))});const l=window.setTimeout(async()=>{try{await e.isShowing()||(r.logInfo("Showing auth window"),await e.show(!0),await e.focus())}catch(e){r.logWarning("Unable to show auth window")}},2e3),{version:u}=await fin.System.getRuntimeInfo();parseInt(u.split(".")[0],10)>=30?await y(e,c,l,t,n,a,i)((await e.getInfo()).url)||await e.addListener("url-changed",o=>{r.logInfo("Auth window navigated to",o.url),y(e,c,l,t,n,a,i)(o.url)}):s=window.setInterval(()=>(async(e,t,n,r,a,i,s,c)=>{let l;try{l=await e.getInfo()}catch(e){return window.clearInterval(t),window.clearTimeout(n),window.clearTimeout(r),c(new o("Could not locate auth window")),!1}return y(e,n,r,a,i,s,c,t)(l.url)})(e,s,c,l,t,n,a,i),500)},b=()=>{let e,t,n,r;const a=async(t,n=!1)=>{const{command:r,data:i,id:s}=t,c={command:r,id:s};try{if(!e)throw new Error("Access token not found");const{apiRequestUrl:r,data:s,headers:l,httpMethod:u,includeAuthorization:d}=i,p=await(async(t,n,r,a,o)=>{var i,s;const c=Object.assign({Accept:"application/json"},a);"PATCH"!==n&&"POST"!==n&&"PUT"!==n||/content-type/i.test(Object.keys(c).join(","))||(c["Content-Type"]="application/json"),o&&(c.Authorization=`Bearer ${e}`);const l=await fetch(t,{body:"object"==typeof r?JSON.stringify(r):r,headers:c,method:n});if(!l.ok){const e={message:"Failed to execute API request"};return(null===(i=l.headers.get("Content-Type"))||void 0===i?void 0:i.includes("application/json"))&&(e.data=await l.json()),[l.status,void 0,void 0,e]}let u;const d=null!==(s=l.headers.get("Content-Type"))&&void 0!==s?s:"";switch(!0){case!d:break;case/^application\/(\w+\+)?json/i.test(d):u=await l.json();break;case/^multipart\/form-?data|^application\/x-?www-?form-?urlencoded/i.test(d):u=await l.formData();break;case/^application\/(([^/]+)?xml|vnd\.openxmlformats)|^text\/|^image\/svg/i.test(d):u=await l.text();break;default:u=await l.arrayBuffer()}return[l.status,u,d,void 0]})(r,u,s,l,d),[f,h,g,m]=p;if(c.status=f,m){if(!n&&401===f){const[e,n]=await o();return n?(c.status=e,c.error=n,c):await a(t,!0)}c.error=m}else h&&(c.data=h,c.type=g)}catch(e){e instanceof Error?c.error={message:e.message}:c.error={message:"Failed to execute API request"}}return Promise.resolve(c)},o=async()=>{var a;if(!n)throw new Error("Authorization server metadata not set");if(!t)throw new Error("Client ID not set");const o=`grant_type=refresh_token&client_id=${t}&refresh_token=${r}`,i=await fetch(n.token_endpoint,{body:o,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!i.ok){const e={message:"Failed to refresh access token"};return(null===(a=i.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(e.data=await i.json()),[i.status,e]}const s=await i.json();return e=s.access_token,[i.status]};self.onmessage=async o=>{const{command:i,id:s}=o.data;let c={command:i,id:s};switch(i){case"API_REQUEST":c=await a(o.data);break;case"CODE_EXCHANGE":c=await(async a=>{var o;const{command:i,data:s,id:c}=a,l={command:i,id:c};try{if(!n)throw new Error("Authorization server metadata not set");if(!t)throw new Error("Client ID not set");const{code:a,codeVerifier:i,redirectUri:c}=s,u=`grant_type=authorization_code&client_id=${t}&code=${a}&code_verifier=${i}&redirect_uri=${c}`,d=await fetch(n.token_endpoint,{body:u,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(d.ok){const t=await d.json();e=t.access_token,r=t.refresh_token}else{const e={message:"Failed to retrieve tokens"};(null===(o=d.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(e.data=await d.json()),l.error=e}}catch(e){e instanceof Error?l.error={message:e.message}:l.error={message:"Failed to retrieve tokens"}}return Promise.resolve(l)})(o.data);break;case"EXPIRE_TOKENS":c=await(async t=>{var a;const{command:o,expireAccessTokenOnly:i,id:s}=t,c={command:o,id:s};try{if(!i&&!r)throw new Error("Refresh token not found");if(!n)throw new Error("Authorization server metadata not set");if(!n.revocation_endpoint)throw new Error("Revocation endpoint missing in authorization server metadata");const t=i?e:r,o=await fetch(`${n.revocation_endpoint}?token=${t}`,{headers:{Accept:"application/json"}});if(!o.ok){const e={message:"Failed to revoke tokens"};(null===(a=o.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(e.data=await o.json()),c.error=e}}catch(e){e instanceof Error?c.error={message:e.message}:c.error={message:"Failed to revoke tokens"}}return Promise.resolve(c)})(o.data);break;case"INIT":c=await(async e=>{const{command:r,data:a,id:o}=e,i={command:r,id:o};return t=a.clientId,n=a.metadata,Promise.resolve(i)})(o.data);break;default:c.error=new Error(`Unexpected oauth worker command: ${i}`)}self.postMessage(c)}};var k;!function(e){e.ApiRequest="API_REQUEST",e.CodeExchange="CODE_EXCHANGE",e.ExpireTokens="EXPIRE_TOKENS",e.Init="INIT"}(k||(k={}));const S=[],C=e=>{S.push(e)},P=(e,t)=>(n,r,a)=>new Promise((o,i)=>{const s={command:k.CodeExchange,data:{code:n,codeVerifier:r,redirectUri:a},id:Date.now().toString()},{command:c,id:l}=s;C({command:c,id:l,reject:i,resolve:o}),e.postMessage(s),t.logInfo("Worker request sent",s)}),x=(e,t,n)=>(r,a,o,i,s)=>new Promise((c,l)=>{const u={command:k.ApiRequest,data:{apiRequestUrl:r,clientId:e,data:o,headers:i,httpMethod:a,includeAuthorization:s},id:Date.now().toString()},{command:d,id:p}=u;C({command:d,id:p,reject:l,resolve:c}),t.postMessage(u),n.logInfo("Worker request sent",u)}),_=(e,t)=>n=>new Promise((r,a)=>{const o={command:k.ExpireTokens,expireAccessTokenOnly:n,id:Date.now().toString()},{command:i,id:s}=o;C({command:i,id:s,reject:a,resolve:r}),e.postMessage(o),t.logInfo("Worker request sent",o)}),I=(e,t)=>async()=>{try{await _(e,t)(!1)}catch(e){t.logWarning(e.message)}e.terminate(),t.logInfo("Worker terminated")};class A{get apiOrigin(){return this._apiOrigin}get clientId(){return this._clientId}get logger(){return this._logger}get metadata(){return this._metadata}get worker(){return this._worker}constructor(e,t,n,r,a){if(this.executeApiRequest=async(e,t="GET",n,r,a=!0,o=!1)=>{this._logger.logInfo("ExecuteApiRequest started",e,t,n,r);try{const o=await((e,t)=>async(n,r,a,o,s)=>{try{return await t.executeApiRequest(`${e}${n}`,r,a,o,s)}catch(e){let t;const{data:n,message:r,status:a}=e;throw t=e instanceof Error?new i(r,a):"Failed to refresh access token"===r?new c(r):new i(r,a),t.data=n,t}})(this._apiOrigin,this._worker)(e,t,n,r,a);return this._logger.logInfo("ExecuteApiRequest completed",o),o}catch(e){if(e instanceof i){const{data:t,message:n,name:r,stack:a}=e,o=this.getErrorMessageFromServerResponse(t);o&&(e.message=o,e.stack=null==a?void 0:a.replace(`${r}: ${n}`,`${r}: ${o}`))}throw o&&this.logger.logError(e),e}},!(e&&t&&n&&r&&a))throw new l("Provider has not been properly initialized (call init to create new instances)");this._apiOrigin=e,this._clientId=t,this._metadata=n,this._worker=r,this._logger=a,this.authorize=this.authorize.bind(this),this.close=this.close.bind(this),this.executeApiRequest=this.executeApiRequest.bind(this),this.expireTokens=this.expireTokens.bind(this),this.getErrorMessageFromServerResponse=this.getErrorMessageFromServerResponse.bind(this)}async authorize(e,t,n){if(this._logger.logInfo("Authorize started",e,t,n),!this._metadata||!this._clientId||!this._worker)throw new l("Provider has not been properly initialized (call init to create new instances)");try{await(r=this._metadata,a=this._clientId,i=this._worker,c=this._logger,async(e,t,n)=>{const{authorization_endpoint:o}=r,s=fin.Application.getCurrentSync(),l=(await s.getChildWindows()).find(e=>e.identity.name===w);l&&await l.close(!0);const u=(new Date).getTime().toString(),d=(()=>{const e=new Uint32Array(64);return window.crypto.getRandomValues(e),Array.from(e,e=>`0${e.toString(16)}`.slice(-2)).join("")})(),p=(await(async e=>{const t=(new TextEncoder).encode(e),n=await window.crypto.subtle.digest("SHA-256",t),r=await(e=>new Promise((t,n)=>{try{const r=new Blob([e]),a=new FileReader;a.onload=e=>{var r,a;const o=null===(r=e.target)||void 0===r?void 0:r.result;if(o){const[,e]=Array.from(null!==(a=o.match(/base64,(.*)$/i))&&void 0!==a?a:[]);t(null!=e?e:"")}n(new Error("Unexpected empty result"))},a.readAsDataURL(r)}catch(e){n(e)}}))(n);return r.replace(/\+/g,"-").replace(/\//g,"_")})(d)).replace(/=+$/,"");let f="";t&&(f="&",f+=Object.entries(t).map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`).join("&"));const h=`${o}?client_id=${encodeURIComponent(a)}&redirect_uri=${encodeURIComponent(e)}&response_type=code&state=${u}&code_challenge=${p}&code_challenge_method=S256${f}`,g=null!=n?n:{},{defaultHeight:m,defaultWidth:y}=g,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(g,["defaultHeight","defaultWidth"]);c.logInfo("Starting OAuth flow",h);const k=await fin.Window.create(Object.assign({alwaysOnTop:!0,maximizable:!1,minimizable:!1,autoShow:!1,defaultCentered:!0,defaultHeight:null!=m?m:700,defaultWidth:null!=y?y:600,includeInSnapshots:!1,name:w,resizable:!1,saveWindowState:!1,showTaskbarIcon:!1,url:h},b)),S=await new Promise(v(k,u,e,c));c.logInfo("Received authorization code"),await i.exchangeCodeForTokens(S,d,e),c.logInfo("Received tokens")})(e,t,n),this._logger.logInfo("Authorize completed")}catch(e){let t;if(e instanceof o){const{data:n}=e,r=this.getErrorMessageFromServerResponse(n);t=new s(r,e),t.data=n}else t=new s(void 0,e);throw this.logger.logError(t),t}var r,a,i,c}async close(){var e;this._logger.logInfo("Close started");try{await(null===(e=this._worker)||void 0===e?void 0:e.terminate()),this._worker=void 0,this._apiOrigin=void 0,this._clientId=void 0,this._metadata=void 0,this._logger.logInfo("Close completed")}catch(e){const t=new o(void 0,e);throw this._logger.logError(t),t}}async expireTokens(e=!1){var t;this._logger.logInfo("ExpireTokens started");try{await(null===(t=this._worker)||void 0===t?void 0:t.expireTokens(e)),this._logger.logInfo("ExpireTokens completed")}catch(e){const t=new o(void 0,e);throw this._logger.logError(t),t}}getErrorMessageFromServerResponse(e){e&&this._logger.logWarning(e)}static async init(e,t,n,r,...a){const i=new m(r);let s;i.logInfo("Init started",e,t,n);try{s=new URL(t)}catch(e){const t=new d("Unexpected invalid API origin");throw i.logError(t),t}try{const t=await(async e=>{let t;try{t=new URL(e)}catch(e){throw new d("Unexpected invalid metadata URL")}const n=await fetch(t,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Failed to retrieve authorization server metadata");const r=await n.json();if(!r)throw new Error("Unexpected empty authorization server metadata response");if(!r.response_types_supported.find(e=>"code"===e.toLowerCase()))throw new Error("Authorization server does not support the authorization code response type");return r})(e),r=await(async(e,t,n)=>{const r=new Blob([`(${b})()`],{type:"text/javascript"}),a=URL.createObjectURL(r),o=new Worker(a);return o.onmessage=(e=>t=>{e.logInfo("Worker response received",t.data);const n=t.data,{command:r,error:a,id:o}=n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(n,["command","error","id"]),s=((e,t)=>S.find(n=>n.command===t&&n.id===e))(o,r);s?(a?("status"in i&&void 0!==i.status&&(a.status=i.status),s.reject(a)):s.resolve(i),((e,t)=>{const n=S.findIndex(n=>n.command===t&&n.id===e);n>=0&&S.splice(n,1)})(o,r)):e.logError(new Error("Unable to locate awaited request"))})(n),await((e,t,n,r)=>new Promise((a,o)=>{const i={command:k.Init,data:{clientId:t,metadata:e},id:Date.now().toString()},{command:s,id:c}=i;C({command:s,id:c,reject:o,resolve:a}),n.postMessage(i),r.logInfo("Worker request sent",i)}))(e,t,o,n),{exchangeCodeForTokens:P(o,n),executeApiRequest:x(t,o,n),expireTokens:_(o,n),terminate:I(o,n)}})(t,n,i);return i.logInfo("Init completed",t),new A(s.origin,n,t,r,i)}catch(e){let t;throw t=e instanceof o?e:new l(void 0,e),i.logError(t),t}}}var E=a.MS,T=a.cF,M=a.AK,R=a.M_,O=a.cX,D=a.O4,B=a._W,W=a.U$,F=a.U7,N=n(951);const L="1.0.1",$="Microsoft365",U=()=>{W($)},j=()=>{F($,L)};"undefined"!=typeof window&&("undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Microsoft365:{enableLogging:j,disableLogging:U}}}));const V=e=>async(t,n,r,a,o)=>{var i;return t=(i=t).startsWith("/")?i:`/${i}`,e.executeApiRequest(t,n,r,a,o,!0)},z=async(e,t,n=[])=>{const r=["id","userPrincipalName","userType",...n].join(","),a=await(async(e,t=[])=>{if(!(null==t?void 0:t.length))return[];const n=[];for(let r=0;r<t.length;r+=20){const a={requests:t.slice(r,r+20).map(e=>(e.id=crypto.randomUUID(),e))};n.push(e.executeApiRequest("/v1.0/$batch","POST",a))}const r=(await Promise.all(n)).flatMap(e=>e.data.responses);return t.map(e=>{var t;return null===(t=r.find(t=>t.id===e.id))||void 0===t?void 0:t.body})})(e,t.map(e=>({method:"GET",url:`/users?$filter=mail eq '${encodeURIComponent(e)}'&$select=${r}`}))),o=a.map(e=>{var t;return null===(t=e.value)||void 0===t?void 0:t[0]});return e.logger.logInfo("Resolved users from email addresses",o,t),o};var G=n(300);const H=e=>e.map(e=>e?{id:e.userPrincipalName,emailAddress:e.mail,name:e.displayName}:void 0),q=async(e,t)=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:L,componentName:e}})}catch(n){t.logWarning(`Unable to register usage for feature ${e}: ${null==n?void 0:n.message}`)}},K=e=>{let t=e;return Array.isArray(e)?e.filter(Boolean).map(K):("object"==typeof e&&(t=Object.fromEntries(Object.entries(e).filter(([,e])=>void 0!==(null!=e?e:void 0)).map(([e,t])=>[e,K(t)]))),t)},J=e=>/#EXT#@/.test(e.userPrincipalName);var Y;!function(e){e.MS365="MS-365",e.Teams="MS-TEAMS"}(Y||(Y={}));class Z extends D{get currentUser(){return this._currentUser}get redirectUri(){return this._redirectUri}get permissions(){return this._permissions}get tenantId(){return this._tenantId}constructor(e,t,n,r,a,o,i,s){super(e,t,o,i,s),this._permissions=a,this._redirectUri=r,this._tenantId=n,q(Y.MS365,s)}async authorize(e,t,n){await super.authorize(e,t,n);const r=await(async e=>{const{data:t}=await e.executeApiRequest("/v1.0/me");return t})(this);this._currentUser=r}getErrorMessageFromServerResponse(e){var t,n,r;if("string"==typeof e)try{return null===(n=null===(t=new URL(e).searchParams.get("error_description"))||void 0===t?void 0:t.split(/\r\n/))||void 0===n?void 0:n[0]}catch(e){return}return null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message}static async init(e,t,n,r,a,o,i){const s=await super.init(e,t,n,r);return new Z(t,n,a,o,i,null==s?void 0:s.metadata,null==s?void 0:s.worker,null==s?void 0:s.logger)}}const Q=["User.ReadBasic.All","Team.ReadBasic.All","Channel.ReadBasic.All","ChannelMessage.Send","Chat.Create","ChatMessage.Send","offline_access"];let X;const ee=async(e,t,n,r=[],a,o)=>{await te(e,t,n,r);const i=Object.assign({scope:[...Q,...r].join(" ")},a),s=Object.assign({defaultHeight:600,defaultWidth:550},o);return await X.authorize(n,i,s),{clientId:e,currentUser:X.currentUser,disconnect:X.close,executeApiRequest:V(X),provider:X,tenantId:t}},te=async(e,t,n,r)=>{if(!e)throw new B("Invalid client ID");if(!t)throw new B("Invalid tenant ID");if(!n)throw new B("Invalid redirect URI");const a=`https://login.microsoftonline.com/${t}/v2.0/.well-known/openid-configuration`;(!X||X.clientId!==e||X.tenantId!==t||X.redirectUri!==n||(0,N.xor)(X.permissions,r).length>0)&&(X=await Z.init(a,"https://graph.microsoft.com",e,$,t,n,r))};class ne extends E{constructor(e,t){var n;super(e=null!==(n=null!=e?e:null==t?void 0:t.message)&&void 0!==n?n:"An interop error occurred",t)}}var re,ae,oe,ie,se,ce;!function(e){e.AppNotFound="AppNotFound",e.ErrorOnLaunch="ErrorOnLaunch",e.AppTimeout="AppTimeout",e.ResolverUnavailable="ResolverUnavailable"}(re||(re={})),function(e){e.NoAppsFound="NoAppsFound",e.ResolverUnavailable="ResolverUnavailable",e.ResolverTimeout="ResolverTimeout"}(ae||(ae={})),function(e){e.NoChannelFound="NoChannelFound",e.AccessDenied="AccessDenied",e.CreationFailed="CreationFailed"}(oe||(oe={})),ie=function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new A(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return T()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",g={};function m(){}function w(){}function y(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(E([])));k&&k!==n&&r.call(k,o)&&(v=k);var S=y.prototype=m.prototype=Object.create(v);function C(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function P(e,t){function n(a,o,i,s){var c=u(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,i,s)},function(e){n("throw",e,i,s)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return n("throw",e,i,s)})}s(c.arg)}var a;this._invoke=function(e,r){function o(){return new t(function(t,a){n(e,r,t,a)})}return a=a?a.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return w.prototype=S.constructor=y,y.constructor=w,w.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(P.prototype),P.prototype[i]=function(){return this},e.AsyncIterator=P,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new P(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},C(S),c(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},ie({exports:{}}),function(e){e.Contact="fdc3.contact",e.ContactList="fdc3.contactList",e.Country="fdc3.country",e.Instrument="fdc3.instrument",e.Organization="fdc3.organization",e.Portfolio="fdc3.portfolio",e.Position="fdc3.position"}(se||(se={})),function(e){e.StartCall="StartCall",e.StartChat="StartChat",e.ViewChart="ViewChart",e.ViewContact="ViewContact",e.ViewQuote="ViewQuote",e.ViewNews="ViewNews",e.ViewInstrument="ViewInstrument",e.ViewAnalysis="ViewAnalysis"}(ce||(ce={}));const le="ofms365action",ue=e=>e?"msteams:":"https://teams.microsoft.com",de=async e=>{const t=null==e?void 0:e[le];if(t)try{const e=(e=>{const t=(0,G.decompress)(e,{inputEncoding:"Base64",outputEncoding:"String"});return JSON.parse(t)})(t),{context:n,intent:r}=e,a={context:n,name:r};return await fin.me.interop.fireIntent(a),a}catch(e){const t=e.message;throw new E("Failed to decompress share payload"+(t?` (${t})`:""),e)}},pe=async(e,t,n)=>{const r=await(async(e,t,n=[])=>{try{const r=["id",...n].join(","),{data:a}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(t)}?$select=${r}`);return a}catch(e){if(404!==e.status)throw e}})(e,t,["displayName"]);if(!r)return;let a;if(e.logger.logInfo("Resolved team",r),n){if(a=await(async(e,t,n,r=[])=>{try{const a=["id",...r].join(","),{data:o}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(n)}/channels/${encodeURIComponent(t)}?$select=${a}`);return o}catch(e){if(404!==e.status)throw e}})(e,n,t,["displayName"]),!a)return void e.logger.logWarning(`Could not resolve channel from id ${n}`)}else{e.logger.logInfo("No channel id supplied, using primary channel");const{data:n}=await e.executeApiRequest(`/v1.0/teams/${encodeURIComponent(t)}/primaryChannel?$select=displayName,id`);a=n}const o={channelId:a.id,channelName:a.displayName,teamId:r.id,teamName:r.displayName};return e.logger.logInfo("Resolved team channel",t,n,o),o};class fe{constructor(e,t=!0){this.logger=e.provider.logger,this.provider=e.provider,this.useMsTeamsProtocol=t,this.registerIntentHandlers=this.registerIntentHandlers.bind(this),this.share=this.share.bind(this),this.startCall=this.startCall.bind(this),this.startChat=this.startChat.bind(this),this.enableSharePayloadHandler(),q(Y.Teams,this.logger)}async enableSharePayloadHandler(){const{initialOptions:e}=await fin.Application.getCurrentSync().getInfo(),{userAppConfigArgs:t}=e,n=await de(t);n&&this.logger.logInfo("Firing intent",n),fin.Application.getCurrentSync().addListener("run-requested",async e=>{try{const t=await de(e.userAppConfigArgs);t&&this.logger.logInfo("Firing intent",t)}catch(e){this.logger.logError(e)}})}async openUrl(e){this.logger.logInfo("openUrl started",e);try{const t=this.useMsTeamsProtocol?e.replace(/^https:\/\/teams.microsoft.com\//i,"msteams:"):e;this.logger.logInfo("Opening url",t),await fin.System.openUrlWithBrowser(t),this.logger.logInfo("openUrl completed")}catch(e){throw this.logger.logError(e),e}}async registerIntentHandlers(){if(this.logger.logInfo("registerIntentHandlers started"),this.unsubscribeIntentHandlers)return{unsubscribe:this.unsubscribeIntentHandlers};try{await fin.me.interop.getContextGroups();const e=await fin.me.interop.registerIntentHandler(async e=>{try{await((e,t)=>async n=>{var r,a,o,i;if(e.logger.logInfo("handleStartCallIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==ce.StartCall.toLowerCase())throw new E(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(a=s.type)||void 0===a?void 0:a.toLowerCase())!==se.Contact.toLowerCase()&&(null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==se.ContactList.toLowerCase())throw new E(`Unexpected context type: ${s.type}`);const c=(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())===se.ContactList.toLowerCase()?s.contacts.map(e=>e.id.email).filter(Boolean):[s.id.email],l=await t(c);e.logger.logInfo("handleStartCallIntent completed",l)})(this.provider,this.startCall)(e)}catch(e){throw this.logger.logError(e),e}},"StartCall"),t=await fin.me.interop.registerIntentHandler(async e=>{try{await((e,t)=>async n=>{var r,a,o,i;if(e.logger.logInfo("handleStartChatIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==ce.StartChat.toLowerCase())throw new E(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(a=s.type)||void 0===a?void 0:a.toLowerCase())!==se.Contact.toLowerCase()&&(null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==se.ContactList.toLowerCase())throw new E(`Unexpected context type: ${s.type}`);const c=(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())===se.ContactList.toLowerCase()?s.contacts.map(e=>e.id.email).filter(Boolean):[s.id.email],l=await t({emailAddresses:c,topicName:s.name});e.logger.logInfo("handleStartChatIntent completed",l)})(this.provider,this.startChat)(e)}catch(e){throw this.logger.logError(e),e}},"StartChat");return this.unsubscribeIntentHandlers=async()=>{this.logger.logInfo("unsubscribeIntentHandlers started"),await e.unsubscribe(),await t.unsubscribe(),this.unsubscribeIntentHandlers=void 0,this.logger.logInfo("unsubscribeIntentHandlers completed")},this.logger.logInfo("registerIntentHandlers completed"),{unsubscribe:this.unsubscribeIntentHandlers}}catch(e){const t=new ne(e.message);throw this.logger.logError(t),t}}async share(e){var t,n,r,a;this.logger.logInfo("share started",e);try{if(!e.target)throw new B("Target not provided");if((null===(t=e.context)||void 0===t?void 0:t.type.toLowerCase())!==se.Instrument.toLowerCase())throw new B("Unsupported context type");if(!(null===(r=null===(n=e.context)||void 0===n?void 0:n.id)||void 0===r?void 0:r.ticker))throw new B("Ticker not provided");if(!e.chartImage&&null==e.priceCurrent)throw new B("Current price not provided");const o=null===(a=e.showMessage)||void 0===a||a,i=await(async(e,t)=>{var n,r,a,o;const{chartImage:i,context:s}=t,{priceCurrent:c,priceHigh:l,priceLow:u,priceOpen:d}=t,p=(null===(r=null===(n=s.id)||void 0===n?void 0:n.ticker)||void 0===r?void 0:r.trim())||void 0,f=(null===(a=s.name)||void 0===a?void 0:a.trim())||void 0;let h,g,m,w,y,v;if(null!=t.timestamp||!i)try{h=new Date(null!==(o=t.timestamp)&&void 0!==o?o:Date.now()).toISOString().replace(/\.\d+Z$/,"+00:00")}catch(n){e.logger.logWarning("Invalid timestamp",t.timestamp)}if(null!=c&&null!=d&&(g=c-d,m=g/d*100,y=g>0?"▲":g<0?"▼":"●",w=g>0?"Good":g<0?"Attention":"Warning"),i){if(!/^image\/(gif|jp(e|e?g)|png)$/i.test(i.type))throw new B("Chart image MIME type not supported");try{v=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=()=>n(new Error("Failed to convert blob to base64")),r.readAsDataURL(e)}))(i)}catch(e){throw new E("Failed to convert blob to base64",e)}}const b=(await fin.System.getRuntimeInfo()).manifestUrl,k=(S={context:s,intent:i?ce.ViewChart:ce.ViewInstrument,version:L},(0,G.compress)(JSON.stringify(S),{outputEncoding:"Base64"}));var S;const C=`${b}?$$${le}=${encodeURIComponent(k)}`,P=`https://start.openfin.co/?manifest=${encodeURIComponent(C)}`,x={$schema:"http://adaptivecards.io/schemas/adaptive-card.json",type:"AdaptiveCard",version:"1.4",body:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[{type:"Container",items:[{type:"TextBlock",text:null!=f?f:p.toUpperCase(),wrap:!0,size:"Large",spacing:"None"},f&&{type:"TextBlock",text:p.toUpperCase(),isSubtle:!0,wrap:!0,spacing:"None"},h&&{type:"TextBlock",text:`{{DATE(${h}, SHORT)}} {{TIME(${h})}}`,wrap:!0,size:"Small"}]}]},null!=c&&!v&&{type:"Column",width:"stretch",items:[{type:"TextBlock",text:c.toFixed(2),size:"ExtraLarge",wrap:!0,horizontalAlignment:"Right"},null!=g&&null!=m&&{type:"TextBlock",text:`${y} ${g.toFixed(2)} (${m.toFixed(2)}%)`,color:w,spacing:"None",wrap:!0,horizontalAlignment:"Right"},(null!=d||null!=l||null!=u)&&{type:"Container",horizontalAlignment:"Right",items:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[null!=d&&{type:"TextBlock",text:"Open",wrap:!0,horizontalAlignment:"Right",size:"Small",weight:"Bolder",spacing:"None"},null!=l&&{type:"TextBlock",text:"High",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"},null!=u&&{type:"TextBlock",text:"Low",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"}]},{type:"Column",width:"auto",items:[null!=d&&{type:"TextBlock",text:d.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=l&&{type:"TextBlock",text:l.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=u&&{type:"TextBlock",text:u.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"}]}]}],spacing:"Small"}]}]},v&&{type:"Image",url:"../hostedContents/1/$value",spacing:"Small"},{type:"ActionSet",actions:[{type:"Action.OpenUrl",url:P,title:"Open"}]}]},_={attachments:[{id:"1",contentType:"application/vnd.microsoft.card.adaptive",content:JSON.stringify(K(x))}],body:{contentType:"html",content:'<attachment id="1"></attachment>'},summary:"Test summary"};if(v){const[,e,t]=[...v.match(/^data:([^;]+);base64,(.+)$/i)];_.hostedContents=[{"@microsoft.graph.temporaryId":"1",contentBytes:t,contentType:e}]}return _})(this.provider,e);let s;if(Array.isArray(e.target)){const{target:t}=e,n=await z(this.provider,t,["displayName","mail"]),r=n.filter(Boolean);if(!r.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",t),t.map(()=>{});const{id:a,webUrl:c}=await(async(e,t)=>{const n={chatType:t.length>2?"group":"oneOnOne",members:t.map(t=>({"@odata.type":"#microsoft.graph.aadUserConversationMember",roles:J(t)?["guest"]:["owner"],"user@odata.bind":`${e.apiOrigin}/v1.0/users('${t.id}')`}))},{data:r}=await e.executeApiRequest("/v1.0/chats","POST",n);return r})(this.provider,[this.provider.currentUser,...r]),{data:l}=await this.provider.executeApiRequest(`/v1.0/chats/${encodeURIComponent(a)}/messages`,"POST",i);this.logger.logInfo("Sent chat message",l),o&&await this.openUrl(c),s=H(n)}else{const{target:t}=e,n=await pe(this.provider,t.teamId,t.channelId);if(!n)return void this.logger.logWarning("Could not resolve team/channel",t.teamId,t.channelId);const{channelId:r,teamId:a}=n,{data:c}=await this.provider.executeApiRequest(`/v1.0/teams/${encodeURIComponent(a)}/channels/${encodeURIComponent(r)}/messages`,"POST",i);this.logger.logInfo("Sent chat message",c),o&&await this.openUrl(c.webUrl),s=n}return this.logger.logInfo("share completed",s),s}catch(e){throw this.logger.logError(e),e}}async startCall(e=[],t=!1){this.logger.logInfo("startCall started",e);try{let n=`${ue(this.useMsTeamsProtocol)}/l/call/0/0?`;const r=await z(this.provider,e,["displayName","mail"]),a=r.filter(Boolean).map(e=>encodeURIComponent(e.userPrincipalName));if(!a.length)return this.logger.logWarning("Could not resolve any valid users from supplied emails",e),e.map(()=>{});n+=`users=${a.join(",")}&withVideo=${t}`,this.logger.logInfo("Opening Teams",n),await fin.System.openUrlWithBrowser(n);const o=H(r);return this.logger.logInfo("startCall completed",o),o}catch(e){throw this.logger.logError(e),e}}async startChat(e){this.logger.logInfo("startChat started",e);try{let t,n;if("teamId"in e){const{teamId:r,channelId:a}=e,o=await pe(this.provider,r,a);if(!o)return void this.logger.logWarning("Could not resolve team/channel",r,a);t=`${ue(this.useMsTeamsProtocol)}/l/channel/${encodeURIComponent(o.channelId)}/${encodeURIComponent(o.channelName)}?groupId=${o.teamId}&tenantId=${this.provider.tenantId}`,n=o}else{const{emailAddresses:r,message:a,topicName:o}=e;t=`${ue(this.useMsTeamsProtocol)}/l/chat/0/0?`;const i=await z(this.provider,r,["displayName","mail"]),s=i.filter(Boolean).map(e=>encodeURIComponent(e.userPrincipalName));if(!s.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",r),r.map(()=>{});t+=`users=${s.join(",")}`,o&&(t+=`&topicName=${encodeURIComponent(o)}`),a&&(t+=`&message=${encodeURIComponent(a)}`),n=H(i)}return this.logger.logInfo("Opening Teams",t),await fin.System.openUrlWithBrowser(t),this.logger.logInfo("startChat completed",n),n}catch(e){throw this.logger.logError(e),e}}}},91:()=>{}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.c=a,o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i=o(o.s=54),s=i.MS,c=i.cF,l=i.AK,u=i.M_,d=i.cX,p=i.BT,f=i._W,h=i.Pg,g=i.$j,m=i.U$,w=i.U7},396:(e,t,n)=>{n.r(t),n.d(t,{Dexie:()=>o,Entity:()=>d,PropModification:()=>p,RangeSet:()=>l,add:()=>h,cmp:()=>u,default:()=>m,liveQuery:()=>i,mergeRanges:()=>s,rangesOverlap:()=>c,remove:()=>g,replacePrefix:()=>f});var r=n(303);const a=Symbol.for("Dexie"),o=globalThis[a]||(globalThis[a]=r);if(r.semVer!==o.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${r.semVer} and ${o.semVer}`);const{liveQuery:i,mergeRanges:s,rangesOverlap:c,RangeSet:l,cmp:u,Entity:d,PropModification:p,replacePrefix:f,add:h,remove:g}=o,m=o},434:(e,t,n)=>{n.r(t),n.d(t,{I18nContext:()=>L,I18nextProvider:()=>K,Trans:()=>V,TransWithoutContext:()=>F,Translation:()=>q,composeInitialProps:()=>U,date:()=>Z,getDefaults:()=>A,getI18n:()=>M,getInitialProps:()=>j,initReactI18next:()=>N,number:()=>X,plural:()=>te,select:()=>ee,selectOrdinal:()=>ne,setDefaults:()=>I,setI18n:()=>T,time:()=>Q,useSSR:()=>J,useTranslation:()=>G,withSSR:()=>Y,withTranslation:()=>H});var r=n(41),a=n(2),o=n.n(a),i=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function s(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(o()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var a=new RegExp(i),s=null;null!==(s=a.exec(e));)if(s[0].trim())if(s[1]){var c=s[1].trim(),l=[c,""];c.indexOf("=")>-1&&(l=c.split("=")),t.attrs[l[0]]=l[1],a.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var c=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,l=/^\s*$/,u=Object.create(null);function d(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(d,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var p={parse:function(e,t){t||(t={}),t.components||(t.components=u);var n,r=[],a=[],o=-1,i=!1;if(0!==e.indexOf("<")){var d=e.indexOf("<");r.push({type:"text",content:-1===d?e:e.substring(0,d)})}return e.replace(c,function(c,u){if(i){if(c!=="</"+n.name+">")return;i=!1}var d,p="/"!==c.charAt(1),f=c.startsWith("\x3c!--"),h=u+c.length,g=e.charAt(h);if(f){var m=s(c);return o<0?(r.push(m),r):((d=a[o]).children.push(m),r)}if(p&&(o++,"tag"===(n=s(c)).type&&t.components[n.name]&&(n.type="component",i=!0),n.voidElement||i||!g||"<"===g||n.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),0===o&&r.push(n),(d=a[o-1])&&d.children.push(n),a[o]=n),(!p||n.voidElement)&&(o>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(o--,n=-1===o?r:a[o]),!i&&"<"!==g&&g)){d=-1===o?r:a[o].children;var w=e.indexOf("<",h),y=e.slice(h,-1===w?void 0:w);l.test(y)&&(y=" "),(w>-1&&o+d.length>=0||" "!==y)&&d.push({type:"text",content:y})}}),r},stringify:function(e){return e.reduce(function(e,t){return e+d("",t)},"")}};const f=p;function h(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];k(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const g={};function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];k(t[0])&&g[t[0]]||(k(t[0])&&(g[t[0]]=new Date),h(...t))}const w=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},y=(e,t,n)=>{e.loadNamespaces(t,w(e,n))},v=(e,t,n,r)=>{k(n)&&(n=[n]),n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,w(e,r))},b=e=>e.displayName||e.name||(k(e)&&e.length>0?e:"Unknown"),k=e=>"string"==typeof e,S=e=>"object"==typeof e&&null!==e,C=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,P={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},x=e=>P[e];let _={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(C,x)};const I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_={..._,...e}},A=()=>_;let E;const T=e=>{E=e},M=()=>E,R=(e,t)=>{if(!e)return!1;const n=e.props?e.props.children:e.children;return t?n.length>0:!!n},O=e=>{if(!e)return[];const t=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?D(t):t},D=e=>Array.isArray(e)?e:[e],B=(e,t)=>{if(!e)return"";let n="";const a=D(e),o=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return a.forEach((e,a)=>{if(k(e))n+=`${e}`;else if((0,r.isValidElement)(e)){const{props:r,type:i}=e,s=Object.keys(r).length,c=o.indexOf(i)>-1,l=r.children;if(l||!c||s)if(!l&&(!c||s)||r.i18nIsDynamicList)n+=`<${a}></${a}>`;else if(c&&1===s&&k(l))n+=`<${i}>${l}</${i}>`;else{const e=B(l,t);n+=`<${a}>${e}</${a}>`}else n+=`<${i}/>`}else if(null===e)h("Trans: the passed in value is invalid - seems you passed in a null child.");else if(S(e)){const{format:t,...r}=e,a=Object.keys(r);if(1===a.length){const e=t?`${a[0]}, ${t}`:a[0];n+=`{{${e}}}`}else h("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else h("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)}),n},W=(e,t,n,a,o,i)=>{if(""===t)return[];const s=a.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(s.map(e=>`<${e}`).join("|")).test(t);if(!e&&!c&&!i)return[t];const l={},u=e=>{D(e).forEach(e=>{k(e)||(R(e)?u(O(e)):S(e)&&!(0,r.isValidElement)(e)&&Object.assign(l,e))})};u(e);const d=f.parse(`<0>${t}</0>`),p={...l,...o},h=(e,t,n)=>{const a=O(e),o=m(a,t.children,n);return(e=>Array.isArray(e)&&e.every(r.isValidElement))(a)&&0===o.length||e.props&&e.props.i18nIsDynamicList?a:o},g=(e,t,n,a,o)=>{e.dummy?(e.children=t,n.push((0,r.cloneElement)(e,{key:a},o?void 0:t))):n.push(...r.Children.map([e],e=>{const n={...e.props};return delete n.i18nIsDynamicList,(0,r.createElement)(e.type,{...n,key:a,ref:e.ref},o?null:t)}))},m=(t,o,l)=>{const u=D(t);return D(o).reduce((t,o,d)=>{const f=o.children&&o.children[0]&&o.children[0].content&&n.services.interpolator.interpolate(o.children[0].content,p,n.language);if("tag"===o.type){let i=u[parseInt(o.name,10)];1!==l.length||i||(i=l[0][o.name]),i||(i={});const w=0!==Object.keys(o.attrs).length?((e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n})({props:o.attrs},i):i,y=(0,r.isValidElement)(w),v=y&&R(o,!0)&&!o.voidElement,b=c&&S(w)&&w.dummy&&!y,C=S(e)&&Object.hasOwnProperty.call(e,o.name);if(k(w)){const e=n.services.interpolator.interpolate(w,p,n.language);t.push(e)}else if(R(w)||v){const e=h(w,o,l);g(w,e,t,d)}else if(b){const e=m(u,o.children,l);g(w,e,t,d)}else if(Number.isNaN(parseFloat(o.name)))if(C){const e=h(w,o,l);g(w,e,t,d,o.voidElement)}else if(a.transSupportBasicHtmlNodes&&s.indexOf(o.name)>-1)if(o.voidElement)t.push((0,r.createElement)(o.name,{key:`${o.name}-${d}`}));else{const e=m(u,o.children,l);t.push((0,r.createElement)(o.name,{key:`${o.name}-${d}`},e))}else if(o.voidElement)t.push(`<${o.name} />`);else{const e=m(u,o.children,l);t.push(`<${o.name}>${e}</${o.name}>`)}else if(S(w)&&!y){const e=o.children[0]?f:null;e&&t.push(e)}else g(w,f,t,d,1!==o.children.length||!f)}else if("text"===o.type){const e=a.transWrapTextNodes,s=i?a.unescape(n.services.interpolator.interpolate(o.content,p,n.language)):n.services.interpolator.interpolate(o.content,p,n.language);e?t.push((0,r.createElement)(e,{key:`${o.name}-${d}`},s)):t.push(s)}return t},[])},w=m([{dummy:!0,children:e||[]}],d,D(e||[]));return O(w[0])};function F(e){let{children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s={},values:c,defaults:l,components:u,ns:d,i18n:p,t:f,shouldUnescape:h,...g}=e;const w=p||M();if(!w)return m("You will need to pass in an i18next instance by using i18nextReactModule"),t;const y=f||w.t.bind(w)||(e=>e),v={...A(),...w.options&&w.options.react};let b=d||y.ns||w.options&&w.options.defaultNS;b=k(b)?[b]:b||["translation"];const S=B(t,v),C=l||S||v.transEmptyNodeValue||o,{hashTransKey:P}=v,x=o||(P?P(S||C):S||C);w.options&&w.options.interpolation&&w.options.interpolation.defaultVariables&&(c=c&&Object.keys(c).length>0?{...c,...w.options.interpolation.defaultVariables}:{...w.options.interpolation.defaultVariables});const _=c||void 0!==n||!t?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},I={...s,context:i||s.context,count:n,...c,..._,defaultValue:C,ns:b},E=x?y(x,I):C;u&&Object.keys(u).forEach(e=>{const t=u[e];"function"==typeof t.type||!t.props||!t.props.children||E.indexOf(`${e}/>`)<0&&E.indexOf(`${e} />`)<0||(u[e]=(0,r.createElement)(function(){return(0,r.createElement)(r.Fragment,null,t)}))});const T=W(u||t,E,w,v,I,h),R=void 0!==a?a:v.defaultTransParent;return R?(0,r.createElement)(R,g,T):T}const N={type:"3rdParty",init(e){I(e.options.react),T(e)}},L=(0,r.createContext)();class ${constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const U=e=>async t=>({...e.getInitialProps?await e.getInitialProps(t):{},...j()}),j=()=>{const e=M(),t=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],n={},r={};return e.languages.forEach(n=>{r[n]={},t.forEach(t=>{r[n][t]=e.getResourceBundle(n,t)||{}})}),n.initialI18nStore=r,n.initialLanguage=e.language,n};function V(e){let{children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s={},values:c,defaults:l,components:u,ns:d,i18n:p,t:f,shouldUnescape:h,...g}=e;const{i18n:m,defaultNS:w}=(0,r.useContext)(L)||{},y=p||m||M(),v=f||y&&y.t.bind(y);return F({children:t,count:n,parent:a,i18nKey:o,context:i,tOptions:s,values:c,defaults:l,components:u,ns:d||v&&v.ns||w||y&&y.options&&y.options.defaultNS,i18n:y,t:f,shouldUnescape:h,...g})}const z=(e,t,n,r)=>e.getFixedT(t,n,r),G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:a,defaultNS:o}=(0,r.useContext)(L)||{},i=n||a||M();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new $),!i){m("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>k(t)?t:S(t)&&k(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}i.options.react&&void 0!==i.options.react.wait&&m("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...A(),...i.options.react,...t},{useSuspense:c,keyPrefix:l}=s;let u=e||o||i.options&&i.options.defaultNS;u=k(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.languages[0],a=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;const i=(e,n)=>{const r=t.services.backendConnector.state[`${e}|${n}`];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e)||!t.hasResourceBundle(r,e)&&t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages)&&(!i(r,e)||a&&!i(o,e)))}(e,t,n):(m("i18n.languages were undefined or empty",t.languages),!0)}(e,i,s)),p=((e,t,n,a)=>(0,r.useCallback)(z(e,t,n,a),[e,t,n,a]))(i,t.lng||null,"fallback"===s.nsMode?u:u[0],l),f=()=>p,h=()=>z(i,t.lng||null,"fallback"===s.nsMode?u:u[0],l),[g,w]=(0,r.useState)(f);let b=u.join();t.lng&&(b=`${t.lng}${b}`);const C=((e,t)=>{const n=(0,r.useRef)();return(0,r.useEffect)(()=>{n.current=e},[e,t]),n.current})(b),P=(0,r.useRef)(!0);(0,r.useEffect)(()=>{const{bindI18n:e,bindI18nStore:n}=s;P.current=!0,d||c||(t.lng?v(i,t.lng,u,()=>{P.current&&w(h)}):y(i,u,()=>{P.current&&w(h)})),d&&C&&C!==b&&P.current&&w(h);const r=()=>{P.current&&w(h)};return e&&i&&i.on(e,r),n&&i&&i.store.on(n,r),()=>{P.current=!1,e&&i&&e.split(" ").forEach(e=>i.off(e,r)),n&&i&&n.split(" ").forEach(e=>i.store.off(e,r))}},[i,b]),(0,r.useEffect)(()=>{P.current&&d&&w(f)},[i,l,d]);const x=[g,i,d];if(x.t=g,x.i18n=i,x.ready=d,d)return x;if(!d&&!c)return x;throw new Promise(e=>{t.lng?v(i,t.lng,u,()=>e()):y(i,u,()=>e())})},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function a(a){let{forwardedRef:o,...i}=a;const[s,c,l]=G(e,{...i,keyPrefix:t.keyPrefix}),u={...i,t:s,i18n:c,tReady:l};return t.withRef&&o?u.ref=o:!t.withRef&&o&&(u.forwardedRef=o),(0,r.createElement)(n,u)}return a.displayName=`withI18nextTranslation(${b(n)})`,a.WrappedComponent=n,t.withRef?(0,r.forwardRef)((e,t)=>(0,r.createElement)(a,Object.assign({},e,{forwardedRef:t}))):a}};function q(e){const{ns:t,children:n,...r}=e,[a,o,i]=G(t,r);return n(a,{i18n:o,lng:o.language},i)}function K(e){let{i18n:t,defaultNS:n,children:a}=e;const o=(0,r.useMemo)(()=>({i18n:t,defaultNS:n}),[t,n]);return(0,r.createElement)(L.Provider,{value:o},a)}const J=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{i18n:a}=n,{i18n:o}=(0,r.useContext)(L)||{},i=a||o||M();i.options&&i.options.isClone||(e&&!i.initializedStoreOnce&&(i.services.resourceStore.data=e,i.options.ns=Object.values(e).reduce((e,t)=>(Object.keys(t).forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e),i.options.ns),i.initializedStoreOnce=!0,i.isInitialized=!0),t&&!i.initializedLanguageOnce&&(i.changeLanguage(t),i.initializedLanguageOnce=!0))},Y=()=>function(e){function t(t){let{initialI18nStore:n,initialLanguage:a,...o}=t;return J(n,a),(0,r.createElement)(e,{...o})}return t.getInitialProps=U(e),t.displayName=`withI18nextSSR(${b(e)})`,t.WrappedComponent=e,t},Z=()=>"",Q=()=>"",X=()=>"",ee=()=>"",te=()=>"",ne=()=>""},570:(e,t,n)=>{n.r(t),n.d(t,{titleCase:()=>c});var r=/\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i,a=/[^\s:–—-]+|./g,o=/\s/,i=/.(?=[A-Z]|\..)/,s=/[A-Za-z0-9\u00C0-\u00FF]/;function c(e){for(var t,n="";null!==(t=a.exec(e));){var c=t[0],l=t.index;i.test(c)||r.test(c)&&0!==l&&l+c.length!==e.length||":"===e.charAt(l+c.length)&&!o.test(e.charAt(l+c.length+1))?n+=c:n+=c.replace(s,function(e){return e.toUpperCase()})}return n}},651:(e,t,n)=>{(()=>{var t={847:(e,t)=>{var n={2346:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const a=r(n(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,n)=>{if(n&&(n<0||n>100))throw new Error(`${n} must be a number between 0 and 100`);return(0,a.default)(e)[t](n).toString()};t.getMostReadable=(e,t)=>a.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const r=n(2317),a=n(2346),o=n(5939),i={fontFamily:r.FontFamily,fontSize:r.FontSize,fontWeight:r.FontWeight,lineHeight:r.LineHeight,iconSize:r.IconSize,radius:r.Radius,shadow:r.Shadow,transition:r.Transition,unit:r.Unit,px:r.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,a.darkenColor)(t,2),[`${e}Hover`]:(0,a.lightenColor)(t,5),[`${e}Focused`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5]),[`${e}Text`]:(0,a.getMostReadable)(t,[r.Color.white,r.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(a,o){if(o=o||{},(a=a||"")instanceof r)return a;if(!(this instanceof r))return new r(a,o);var i=function(r){var a,o,i,s={r:0,g:0,b:0},c=1,l=null,u=null,d=null,p=!1,f=!1;return"string"==typeof r&&(r=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,a=!1;if(b[e])e=b[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=O.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=O.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=O.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=O.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=O.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=O.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=O.hex8.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),a:E(r[4]),format:a?"name":"hex8"}:(r=O.hex6.exec(e))?{r:x(r[1]),g:x(r[2]),b:x(r[3]),format:a?"name":"hex"}:(r=O.hex4.exec(e))?{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),a:E(r[4]+""+r[4]),format:a?"name":"hex8"}:!!(r=O.hex3.exec(e))&&{r:x(r[1]+""+r[1]),g:x(r[2]+""+r[2]),b:x(r[3]+""+r[3]),format:a?"name":"hex"}}(r)),"object"==e(r)&&(D(r.r)&&D(r.g)&&D(r.b)?(a=r.r,o=r.g,i=r.b,s={r:255*C(a,255),g:255*C(o,255),b:255*C(i,255)},p=!0,f="%"===String(r.r).substr(-1)?"prgb":"rgb"):D(r.h)&&D(r.s)&&D(r.v)?(l=I(r.s),u=I(r.v),s=function(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var r=Math.floor(e),a=e-r,o=n*(1-t),i=n*(1-a*t),s=n*(1-(1-a)*t),c=r%6;return{r:255*[n,i,o,o,s,n][c],g:255*[s,n,n,i,o,o][c],b:255*[o,o,s,n,n,i][c]}}(r.h,l,u),p=!0,f="hsv"):D(r.h)&&D(r.s)&&D(r.l)&&(l=I(r.s),d=I(r.l),s=function(e,t,n){var r,a,o;function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)r=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;r=i(c,s,e+1/3),a=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*r,g:255*a,b:255*o}}(r.h,l,d),p=!0,f="hsl"),r.hasOwnProperty("a")&&(c=r.a)),c=S(c),{ok:p,format:r.format||f,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(a);this._originalInput=a,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=(o+i)/2;if(o==i)r=a=0;else{var c=o-i;switch(a=s>.5?c/(2-o-i):c/(o+i),o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:s}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var r,a,o=Math.max(e,t,n),i=Math.min(e,t,n),s=o,c=o-i;if(a=0===o?0:c/o,o==i)r=0;else{switch(o){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:s}}function i(e,t,n,r){var a=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function s(e,t,n,r){return[_(A(r)),_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=P(n.s),r(n)}function l(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=P(n.s),r(n)}function u(e){return r(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=P(n.l),r(n)}function p(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function f(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=P(n.l),r(n)}function h(e,t){var n=r(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,r(n)}function g(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),a=[r(e)],o=360/t,i=1;i<t;i++)a.push(r({h:(n.h+i*o)%360,s:n.s,l:n.l}));return a}function w(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var a=r(e).toHsl(),o=360/n,i=[r(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,i.push(r(a));return i}function v(e,t){t=t||6;for(var n=r(e).toHsv(),a=n.h,o=n.s,i=n.v,s=[],c=1/t;t--;)s.push(r({h:a,s:o,v:i})),i=(i+c)%1;return s}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[_(Math.round(e).toString(16)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(A(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=r(e);n="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(v,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]="a"===o?t[o]:I(t[o]));t=a}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var a=r(e).toRgb(),o=r(t).toRgb(),i=n/100;return r({r:(o.r-a.r)*i+a.r,g:(o.g-a.g)*i+a.g,b:(o.b-a.b)*i+a.b,a:(o.a-a.a)*i+a.a})},r.readability=function(e,t){var n=r(e),a=r(t);return(Math.max(n.getLuminance(),a.getLuminance())+.05)/(Math.min(n.getLuminance(),a.getLuminance())+.05)},r.isReadable=function(e,t,n){var a,o,i,s,c,l=r.readability(e,t);switch(o=!1,(i=n,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),a={level:s,size:c}).level+a.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},r.mostReadable=function(e,t,n){var a,o,i,s,c=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,s=n.size;for(var u=0;u<t.length;u++)(a=r.readability(e,t[u]))>l&&(l=a,c=r(t[u]));return r.isReadable(e,c,{level:i,size:s})||!o?c:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var b=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=r.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(b);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return Math.min(1,Math.max(0,e))}function x(e){return parseInt(e,16)}function _(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function A(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return x(e)/255}var T,M,R,O=(M="[\\s|\\(]+("+(T="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",R="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",{CSS_UNIT:new RegExp(T),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function D(e){return!!O.CSS_UNIT.exec(e)}return r}()}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,a),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=a(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var n=a(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return n.Palette}});var r=a(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return r.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{AppManifestType:()=>l,BookmarkItemContextMenuOptionType:()=>v,BrowserButtonType:()=>k,ColorSchemeOptionType:()=>m,CustomActionCallerType:()=>P,EnterpriseMainContextMenuOptionType:()=>y,GlobalContextMenuOptionType:()=>g,PageChangeEventType:()=>h,PageTabContextMenuOptionType:()=>w,PanelPosition:()=>f,SUPPORTED_LANGUAGES:()=>_,SaveButtonContextMenuOptionType:()=>S,SaveModalType:()=>I,ViewTabMenuOptionType:()=>b,WindowType:()=>C,getCurrentSync:()=>kn,init:()=>vi,initDockCompanion:()=>wi,wrapSync:()=>bn});var e,t,r,i,s,c,l,u,d,p,f,h,g,m,w,y,v,b,k,S,C,P,x={};a.r(x),a.d(x,{getItem:()=>en,removeItem:()=>tn,setItem:()=>Xt}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(r||(r={})),function(e){e.Suggestion="suggestion"}(i||(i={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(s||(s={})),function(e){e.MultiSelect="MultiSelect"}(c||(c={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(l||(l={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(u||(u={})),function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(d||(d={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(p||(p={})),function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(f||(f={})),function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(h||(h={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(g||(g={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(m||(m={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(w||(w={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(y||(y={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(v||(v={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(b||(b={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(k||(k={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(S||(S={})),function(e){e.Browser="browser",e.Platform="platform"}(C||(C={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(P||(P={}));const _=["en-US","ja-JP","zh-CN","ko-KR","ru-RU","de-DE","zh-Hant"];var I,A;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(I||(I={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(A||(A={}));const E="undefined"!=typeof window&&"undefined"!=typeof fin,T=("undefined"==typeof process||process.env,"undefined"!=typeof window),M=T&&"undefined"!=typeof indexedDB,R=T?window.origin:A.Local,O=E&&fin.me.uuid,D=E&&fin.me.name,B=E&&fin.me.entityType,W=(A.Local,A.Dev,A.Staging,"prod"===A.Prod),F=e=>e.startsWith("http://")||e.startsWith("https://")?e:R+e,N=F("https://workspace.openfin.co/workspace/21.0.16"),L=F("https://workspace.openfin.co/workspace/21.0.16"),$=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&F(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&F(WORKSPACE_DOCS_CLIENT_URL),"41.134.102.4"),U="21.0.16";var j,V;"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA,function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(j||(j={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(V||(V={}));const z={...j,...V};var G;!function(e){e.Search="search"}(G||(G={}));const H=z;async function q(){const{manifest:e,initialOptions:t}=await fin.Application.getCurrentSync().getInfo();return e?.platform.workspace||e?.platform.home||t?.workspace||t?.home||console.warn("getManifestOverrides: Missing Home development manifest overrides, using Desktop Owner Settings."),e?.platform.workspace?(JSON.stringify(e?.platform.workspace),e?.platform.workspace):e?.platform.home?(JSON.stringify(e?.platform.home),e?.platform.home):t?.workspace?(JSON.stringify(t?.workspace),t?.workspace):t?.home?(JSON.stringify(t?.home),t?.home):{}}const K=e=>fin.System.getSystemAppConfig(e);async function J(){const e="getDOSOverrides";if(!E)return console.warn(`${e}: the fin API was not available, returning no result`),{};try{let t=await K("workspace").catch(t=>{console.warn(`${e}: customConfig entry for SystemApp workspace not available in Desktop Owner Settings. ${t?.message}`)});return t||(t=await K("home")),JSON.stringify(t),t}catch(t){if(!W)return{};if(!(t instanceof Error))throw t;console.warn(`${e}: Missing Workspace Desktop Owner Settings configuration, using defaults. ${t?.message}`)}return{}}let Y,Z;async function Q(){if(Y)return Y;if(!E)return T&&console.warn("getOverrides: The Fin API was not available. Returning an empty result."),{};const[e,t]=await Promise.all([J(),q()]);return Y={...t,...e,disableRuntimeValidation:t.disableRuntimeValidation||e.disableRuntimeValidation},Y}function X(e){Z=e}const ee=e=>e.replace(/\/$/,"");async function te(){const e=(await Q()).browserBaseUrl;if(e)try{const t=new URL(e);if(t.pathname.endsWith("/"))t.pathname=ee(t.pathname);else{if("/workspace"===t.pathname)return t.pathname+=`/${U}`,t.toString();console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url, with path: /workspace. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}}catch(t){console.warn(`@openfin/workspace-platform: browserOverrideBaseUrl must be a valid url. Expected <protocol>://<optional subdomain>.<domain>/workspace but got ${e}`)}return Z??L}async function ne(e=!1){const t=await te()+H.Browser;return e?t:ee(t)}async function re(e=!1){const t=await te()+H.EnterpriseBrowser;return e?t:ee(t)}async function ae(){return await re()+"/landing/"}const oe=async(e,t=!1)=>e?re(t):ne(t);var ie,se;!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(ie||(ie={})),function(e){e.FinProtocol="fin-protocol"}(se||(se={}));const ce={uuid:O},le=(ie.Workspace,e=>{if(!E)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),ue=()=>le(ce);var de;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(de||(de={}));const pe=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function fe(e){if(!E)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const he={name:D,uuid:O};de.Home,ie.Workspace,de.Dock,ie.Workspace;const ge={name:de.Storefront,uuid:ie.Workspace};async function me(e){const t=fe(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.focus()}ie.Workspace,ie.Workspace;const we=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function ye(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map(async e=>we(e.identity)));return e.filter((e,n)=>t[n])}const ve=e=>fe(e).getOptions().then(()=>!0).catch(()=>!1),be=()=>ve(ge);function ke(e,t){const n=e.top,r=e.left,a=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,l=t.monitorRect.right;if(n>c||a<i||r>l||o<s)return 0;const u=Math.max(n,i),d=Math.max(r,s);return(Math.min(a,c)-u)*(Math.min(o,l)-d)/(e.height*e.width)}async function Se(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce((t,n)=>{const r=ke(e,n);return r>t.percentage?{percentage:r,monitor:n}:t},{percentage:0,monitor:t.primaryMonitor}).monitor}const Ce=(e,t)=>{const n=e;return n.workspacePlatform||(n.workspacePlatform={}),n.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:n.workspacePlatform?._internalAutoShow||n.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===n.autoShow||n.autoShow},n.autoShow=!1,n},Pe=56,xe=728,_e=150,Ie=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),n=await t.getOptions();return n.workspacePlatform?.windowType&&"enterprise"===n.workspacePlatform.windowType},Ae=e=>{const t=e?.defaultWindowOptions?.workspacePlatform?.windowType;return"enterprise"===t};let Ee;const Te=(e,t=0)=>{let n,r,a=!1;const o=async r=>{const i=await e(...r);if(a){await new Promise(e=>setTimeout(e,t));const e=n;return n=void 0,a=!1,o(e)}return i};return(...e)=>(r?(a=!0,n=e):r=o(e).catch(e=>{throw console.error("makeDebouncedFunc",e),e}).finally(()=>{r=void 0}),r)};var Me;!function(e){e.Top="top",e.Below="below"}(Me||(Me={}));const Re=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};Te(async function(e,t,n,r,a){const o=t.getBoundingClientRect(),i=await async function(e,t,n,r,a,o){const i=!!e&&fe(e),s=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(i,o);if(r===Me.Below){if(!i||await Re(i)){const e=i?(await Se(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:pe(e).left-t/2,top:a?e.bottom-128:e.bottom+12,width:t,height:n}}return{left:pe(s).left-t/2,top:a?s.bottom-128:s.bottom+12,width:t,height:n}}if(!i||await Re(i)){const e=i?(await Se(s)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:pe(e).left-t/2,top:e.top+20,width:t,height:n}}return{left:pe(s).left-t/2,top:s.top+20,width:t,height:n}}(e,o.width,o.height,n,r,a);if(0===i.width||0===i.height)return;const s=fe(he);await s.setBounds(i),await s.show();const c=setTimeout(()=>s.close(),r?5e3:3e3),l=()=>{clearTimeout(c),s.close()};if(e){const t=fe(e);t.on("bounds-changing",()=>l()),t.on("blurred",()=>l()),t.on("maximized",()=>l()),t.on("minimized",()=>l()),t.on("restored",()=>l())}},10);const Oe=async e=>{const t=e&&await fe(e).getBounds();return{left:((n=(e?await Se(t):(await fin.System.getMonitorInfo()).primaryMonitor).availableRect).left+n.right)/2,top:(n.top+n.bottom)/2};var n},De=async(e,t,n=!1)=>{let r;if(n)r=await Oe(t);else{const e=fe(t),n=await e.getBounds();r=r??pe(n)}const{defaultHeight:a,defaultWidth:o}=e;return((e,t)=>{const n=t.width/2,r=t.height/2;return{left:Math.round(e.left-n),top:Math.round(e.top-r),width:t.width,height:t.height}})(r,{height:a,width:o})};async function Be(e,t,n=!1){const r=t&&"maximized"===await fe(t).getState(),a=n||r||!t,o=await De(e,t,a);return await(async e=>{const t=await fin.System.getMonitorInfo(),n=[t.primaryMonitor,...t.nonPrimaryMonitors];for(const t of n)if(1===ke(e,t))return!1;return!0})(o)?(await fe(t).center(),De(e,t,a)):(console.warn("Response modal isn't off screen, not centering parent window"),o)}var We;!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(We||(We={}));const Fe=async(e,t,n="workspace-licensing")=>{const r={apiVersion:t.apiVersion||U,componentName:e,componentVersion:t.componentVersion||U,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:n,data:r})};let Ne=!1;const Le=new Map,$e=e=>{let t=Le.get(e.uuid);return t||(t=bn(e),t.once("closed",()=>{Le.delete(e.uuid)}),Le.set(e.uuid,t)),t},Ue=async(e,t)=>{try{await e._raiseAnalytics([t])}catch(e){console.error("failed to raise analytics event",e)}},je=async e=>{await Ue($e(fin.me.identity),{source:"Browser",...e})};var Ve=a(847);const ze=e=>e.replace(/[^\d,]/g,"").split(","),Ge=e=>{if(e.length<2)throw new Error("Invalid color object, cannot convert to HSL.");const t=e[0]/255,n=e[1]/255,r=e[2]/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=o-a;let s=0,c=0,l=0;return s=0===i?0:o===t?(n-r)/i%6:o===n?(r-t)/i+2:(t-n)/i+4,s=Math.round(60*s),s<0&&(s+=360),l=(o+a)/2,c=0==i?0:i/(1-Math.abs(2*l-1)),c=+(100*c).toFixed(1),l=+(100*l).toFixed(1),{hsl:`hsl(${s}, ${c}%, ${l}%)`,hsla:`hsl(${s}, ${c}%, ${l}%, 1)`,hue:s,lightness:l,saturation:c}},He=(e,t=!1)=>{const n=(e=>{if(!e)throw new Error("Color is not defined");const t=e.toLowerCase();let n;if(t.includes("rgb")){const e=ze(t);e.length>3&&e.pop(),n=Ge(e).hue}if(t.includes("#")){const e=(e=>{if(!e.includes("#"))throw new Error("Invalid hex value, cannot convert to RGB. Hex value begins with a hashtag.");let t=0,n=0,r=0;if(4===e.length)t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,r=`0x${e[3]}${e[3]}`;else{if(7!==e.length)throw new Error("Invalid hex string length, cannot convert to RGB.");t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,r=`0x${e[5]}${e[6]}`}return[+t,+n,+r]})(t);n=Ge(e).hue}t.includes("hsl")&&(n=ze(t)[0]);const r=n?.toString();if(!r)throw new Error(`Hue was unable to be extracted from "${t}", check color format. Accepted formats are: rgb(), rgba(), hex, hsl(), and hsla()`);return r})(e);return t?{background1:`hsla(${n}, 0%, 100%, 1)`,background2:`hsla(${n}, 67%, 99%, 1)`,background3:`hsla(${n}, 26%, 96%, 1)`,background4:`hsla(${n}, 15%, 94%, 1)`,background5:`hsla(${n}, 10%, 88%, 1)`,background6:`hsla(${n}, 80%, 80%, 1)`}:{background1:`hsla(${n}, 8%, 7%, 1)`,background2:`hsla(${n}, 8%, 13%, 1)`,background3:`hsla(${n}, 9%, 15%, 1)`,background4:`hsla(${n}, 6%, 23%, 1)`,background5:`hsla(${n}, 21%, 28%, 1)`,background6:`hsla(${n}, 5%, 51%, 1)`}},qe=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{n[r]=t[r]?t[r]:e[r]}),n};var Ke=a(877),Je=a.n(Ke),Ye=a(67),Ze=a.n(Ye);const Qe={light:{symbol:Ze()?.src||""},dark:{symbol:Je()?.src||""}},Xe=T&&"complete"!==document.readyState&&new Promise(e=>document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&e()}));function et(e){let t;const n=new Set;return()=>{if(!E)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await Xe;const r={clientAPIVersion:U},a=await fin.InterApplicationBus.Channel.connect(e,{payload:r});return a.onDisconnection(async()=>{n.forEach(e=>e()),n.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0}),a})().then(e=>(e.addDisconnectionListener=e=>{n.add(e)},e)).catch(n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)})),t}}var tt,nt;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(tt||(tt={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(nt||(nt={}));const rt=et("__of_workspace_protocol__");var at;et("__search-openfin-browser-home-topic__"),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(at||(at={}));const ot=async e=>fin.Platform.wrapSync(e).getClient(),it=async e=>{const t=await ot(e),n="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let r;try{r=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(n)}if("boolean"==typeof r&&r)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),r;if("object"==typeof r&&r.isWorkspacePlatform)return r;throw new Error(n)},st=async e=>(await it(e),ot(e)),ct=async e=>{const t=await it(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return ot(e)},lt={[Ve.Palette.brandPrimary]:"#0A76D3",[Ve.Palette.statusSuccess]:Ve.Color.functional1,[Ve.Palette.statusWarning]:Ve.Color.functional10,[Ve.Palette.statusCritical]:Ve.Color.functional7,[Ve.Palette.statusActive]:Ve.Color.functional3,[Ve.Palette.contentBackground1]:"#0A76D3",[Ve.Palette.contentBackground2]:"#000000",[Ve.Palette.contentBackground3]:"#000000",[Ve.Palette.contentBackground4]:"#000000",[Ve.Palette.contentBackground5]:"#000000"},ut={...lt,[Ve.Palette.background1]:Ve.Color.white,[Ve.Palette.background2]:Ve.Color.lightGray1,[Ve.Palette.background3]:Ve.Color.lightGray2,[Ve.Palette.background4]:Ve.Color.lightGray3,[Ve.Palette.background5]:Ve.Color.lightGray4,[Ve.Palette.background6]:Ve.Color.lightGray5,[Ve.Palette.brandSecondary]:Ve.Color.lightGray4,[Ve.Palette.inputBackground]:Ve.Color.lightGray3,[Ve.Palette.inputColor]:Ve.Color.darkGray5,[Ve.Palette.inputPlaceholder]:Ve.Color.darkGray2,[Ve.Palette.inputDisabled]:Ve.Color.neutralGray,[Ve.Palette.inputFocused]:Ve.Color.lightGray5,[Ve.Palette.inputBorder]:Ve.Color.neutralGray,[Ve.Palette.textDefault]:Ve.Color.darkGray5,[Ve.Palette.textHelp]:Ve.Color.darkGray3,[Ve.Palette.textInactive]:Ve.Color.neutralGray},dt={...lt,[Ve.Palette.background1]:Ve.Color.darkGray6,[Ve.Palette.background2]:Ve.Color.darkGray5,[Ve.Palette.background3]:Ve.Color.darkGray4,[Ve.Palette.background4]:Ve.Color.darkGray3,[Ve.Palette.background5]:Ve.Color.darkGray2,[Ve.Palette.background6]:Ve.Color.darkGray1,[Ve.Palette.brandSecondary]:Ve.Color.darkGray2,[Ve.Palette.inputBackground]:Ve.Color.darkGray1,[Ve.Palette.inputColor]:Ve.Color.white,[Ve.Palette.inputPlaceholder]:Ve.Color.lightGray5,[Ve.Palette.inputDisabled]:Ve.Color.neutralGray,[Ve.Palette.inputFocused]:Ve.Color.lightGray5,[Ve.Palette.inputBorder]:Ve.Color.neutralGray,[Ve.Palette.textDefault]:Ve.Color.white,[Ve.Palette.textHelp]:Ve.Color.lightGray5,[Ve.Palette.textInactive]:Ve.Color.neutralGray},pt=[{label:"OpenFin Default Light and Dark Theme",palettes:{light:{...ut,brandPrimary:"#0A76D3",brandSecondary:Ve.Color.lightGray4,backgroundPrimary:Ve.Color.darkGray5},dark:{...dt,brandPrimary:"#0A76D3",brandSecondary:Ve.Color.darkGray2,backgroundPrimary:Ve.Color.darkGray5}}}],ft=e=>{const{background:t,foreground:n}=e;return{background:t,foreground:n??"#FFFFFF"}},ht=(e,t)=>({icons:{symbol:e.brand?.icons?.[t]?.symbol||Qe[t].symbol}}),gt=async e=>{const{themes:t,selectedScheme:n}=await(async e=>{const t=fin?.__internal_?.initialOptions?.workspacePlatform?._themeData;return t&&e.uuid===he.uuid?t:{themes:await bn(e).Theme.getThemes(),selectedScheme:await bn(e).Theme.getSelectedScheme()}})(e);var r,a;return(r=t?.length?t:pt,a=n,r.map(e=>{const t="palettes"in e?e.default:"dark",{light:n,dark:r}=(e=>{const{light:t,dark:n}="palettes"in e?e.palettes:{light:e.palette,dark:e.palette},r=qe(dt,n),a=qe(ut,t),o=((e,t)=>{const n={...e},r={...t};let a=t.backgroundPrimary?He(t.backgroundPrimary,!0):{},o=e.backgroundPrimary?He(e.backgroundPrimary):{};return a={...a,...r},o={...o,...n},{light:{...t,...a},dark:{...e,...o}}})(n,t),i={...(0,Ve.createTheme)({...r,...o?.dark}),brand:ht(e,"dark")},s={...(0,Ve.createTheme)({...a,...o?.light}),brand:ht(e,"light")},{light:c,dark:l}=(e=>{const t=Object.keys(e.notificationIndicatorColors??{});if(t?.length){const n={},r={};return t.forEach(t=>{const a=e.notificationIndicatorColors[t];"background"in a?(n[t]=ft(a),r[t]=ft(a)):(n[t]=ft(a.dark??a.light),r[t]=ft(a.light??a.dark))}),{light:r,dark:n}}return{light:null,dark:null}})(e);return i.notificationIndicatorColors=l,s.notificationIndicatorColors=c,{dark:i,light:s}})(e);return{label:e.label,logoUrl:e.logoUrl,theme:{dark:r,light:n},defaultScheme:a??t}}))[0]},mt=async e=>{const t=await st(e||fin.me.identity),n=await t.dispatch(at.GetSelectedScheme,void 0);return n===m.System?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n},wt=async(e,t)=>{const n=await gt(fin.me.identity),r=await mt(fin.me.identity)===m.Dark,a=n?.theme;return a?.[r?m.Dark:m.Light]?.palette?.[e]||t};let yt;const vt=async e=>{yt||(yt=new TextEncoder);const t=yt.encode(e),n=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")};function bt(e){return e&&"object"==typeof e&&!Array.isArray(e)}function kt(e,...t){if(!t.length)return e;const n=t.shift();return bt(e)&&bt(n)&&Object.entries(n).forEach(([t,n])=>{if(bt(n))return e[t]||(e[t]={}),kt(e[t],n);e[t]=n}),kt(e,...t)}const St=n(72);var Ct,Pt=a.n(St);function xt(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(Ct||(Ct={}));const _t=Ct;function It(){return localStorage.getItem(_t.MachineName)??"unknown"}let At;async function Et(){return At||(At=await fin.System.getMachineId()),At}const Tt=e=>{if(Array.isArray(e.workspacePlatform?.pages)&&(e.layoutSnapshot||e.layout)){const t=e.workspacePlatform.pages.find(e=>e.isActive);if(t){const n=e.layoutSnapshot?e.layoutSnapshot.layouts[t.layoutContainerKey]:e.layout;if(n)if(t.isLocked){const r=Mn(n,t.layout);t.layout=r,e.layout=r}else t.layout=n,e.layout=n}}return e};async function Mt(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const n=It();return{...t,snapshotDetails:{...t.snapshotDetails,machineId:await Et(),machineName:n}}}const Rt=async e=>({...e,layoutDetails:{machineId:await Et(),machineName:It()}}),Ot=async(e,t)=>({pageId:xt(),title:e,layout:await Rt(t),isReadOnly:!1}),Dt=async e=>{const t=await Ot(e.title,In(e.layout));return e.panels&&(t.panels=e.panels.map(e=>({...e,viewOptions:_n(e.viewOptions)}))),{...e,...t}},Bt=e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const n=await t.getConfig(),{settings:r,dimensions:a}=n,o=await Ie(e);await t.replace({...n,settings:{...r,hasHeaders:!0,reorderEnabled:!0},dimensions:{...a,headerHeight:o?28:30}})},hide:async e=>{const n=await t.getConfig(),{settings:r,dimensions:a}=await n;await t.replace({...n,settings:{...r,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...a,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:n}=await e;return n.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}},Wt="of-workspace-",Ft=new class{mark(e){performance.mark(`${Wt}${e}`)}markStart(e){performance.mark(`${Wt}${e}-start`)}markEnd(e){performance.mark(`${Wt}${e}-end`)}markEndAndMeasure(e){performance.mark(`${Wt}${e}-end`);try{return performance.measure(`${Wt}${e}`,`${Wt}${e}-start`,`${Wt}${e}-end`)}catch(e){}}markAndMeasure(e,t){performance.mark(`${Wt}${e}`);try{return performance.measure(`${Wt}${e}-measure`,`${Wt}${t}-start`,`${Wt}${e}`)}catch(e){}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter(e=>e.name.startsWith(Wt))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map(e=>({name:e.name.replace(`${Wt}`,"").replace("-measure",""),duration:e.duration}))}},Nt=new Map,Lt=e=>(Nt.has(e)||Nt.set(e,et(e)),Nt.get(e)()),$t=(e,t)=>{const n=((e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`)(e,t);return Lt(n)};var Ut,jt,Vt,zt,Gt;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(Ut||(Ut={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(jt||(jt={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(Vt||(Vt={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(zt||(zt={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(Gt||(Gt={}));const Ht={...Ut,...jt,...Gt},qt=et(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),Kt=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await qt()).dispatch(zt.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await qt()).dispatch(zt.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await qt()).dispatch(zt.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await qt()).dispatch(zt.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await qt()).dispatch(zt.DeleteBookmarkNode,e))(e)},getPages:async()=>(await ct(e)).dispatch(at.GetPagesForWindow,e),getPage:async t=>(await ct(e)).dispatch(at.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>kn().Browser.wrapSync(e)._addPage(t),_addPage:async(t,n)=>{const r=await ct(e),a={identity:e,page:t,insertionIndex:n?.index,multiInstanceViewBehavior:n?.multiInstanceViewBehavior};return r.dispatch(at.AddPage,a)},removePage:async t=>(await ct(e)).dispatch(at.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>kn().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:n}=t,r=await ct(e),a=(await r.dispatch(at.GetAllAttachedPages,void 0)).find(({pageId:e})=>e===n);if(!a)throw new Error(`Reparent Page Error: Target page with pageId ${n} not found`);a.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[a],insertionIndex:t.index};return r.dispatch(at.AttachPagesToWindow,o)},setActivePage:async t=>(await ct(e)).dispatch(at.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.UpdatePageForWindow,t)},reorderPages:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await ct(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await ct(e);const n=fin.Window.wrapSync(e);await n.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const n=fin.Window.wrapSync(e);"string"!=typeof t?await n.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>(await ct(e),(await $t(e)).dispatch(Ht.OpenSaveModalInternal,t)),_getLayoutsWithSelectedViews:async()=>(await $t(e)).dispatch(Ht.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const n=await ct(e);return t.identity=e,n.dispatch(at.AddDefaultPage,t)},_trackRemovedTab:async t=>(await ct(e)).dispatch(at.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await ct(e)).dispatch(at.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await ct(e)).dispatch(at.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await ct(e)).dispatch(at.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await ct(e)).dispatch(at.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await ct(e)).dispatch(at.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await ct(e)).dispatch(at.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await ct(e)).dispatch(at.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await ct(e)).dispatch(at.HandleRequestNavigationInternal,t)}),Jt=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>Kt(e),createWindow:async n=>{const r=(()=>{const e=`browser-window-startup-${xt()}`;return Ft.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",()=>{Ft.markAndMeasure("browser-window-shown",e)})})(r),await ct(e);const a=await t.createWindow(n);return(e=>{Ft.markAndMeasure("browser-window-started",e)})(r),Kt(a.identity)},getAllAttachedPages:async()=>(await ct(e)).dispatch(at.GetAllAttachedPages,void 0),getAllWindows:async()=>(await ct(e),(await ye()).map(e=>Kt(e.identity))),getUniquePageTitle:async t=>(await ct(e)).dispatch(at.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await ct(e)).dispatch(at.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await ct(e)).dispatch(at.GetPageByViewIdentity,t)}},Yt=e=>({createPage:async t=>(await ct(e)).dispatch(at.CreateSavedPageInternal,t),deletePage:async t=>(await ct(e)).dispatch(at.DeleteSavedPageInternal,t),updatePage:async t=>(await ct(e)).dispatch(at.UpdateSavedPageInternal,t),getPage:async t=>(await ct(e)).dispatch(at.GetSavedPage,t),getPages:async t=>(await ct(e)).dispatch(at.GetSavedPages,t),savePage:async t=>(await ct(e)).dispatch(at.SavePage,t),createWorkspace:async t=>(await st(e)).dispatch(at.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const n=kn(),r=await n.getCurrentWorkspace();if(r.workspaceId===t)throw new Error(`Cannot delete current active workspace ${r.title}`);return(await st(e)).dispatch(at.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await st(e)).dispatch(at.UpdateSavedWorkspace,t),getWorkspace:async t=>(await st(e)).dispatch(at.GetSavedWorkspace,t),getWorkspaces:async t=>(await st(e)).dispatch(at.GetSavedWorkspaces,t),saveWorkspace:async t=>(await st(e)).dispatch(at.SaveWorkspace,t),getDockProviderConfig:async t=>(await st(e)).dispatch(at.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await st(e)).dispatch(at.SaveDockProviderConfig,t)});var Zt;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(Zt||(Zt={}));const Qt=et("of-workspace-notifications-sync"),Xt=(e,t)=>{localStorage.setItem(`${O}-${e}`,t)},en=e=>localStorage.getItem(`${O}-${e}`),tn=e=>localStorage.removeItem(`${O}-${e}`),nn=m.System,rn=e=>Object.entries(e).reduce((e,[t,n])=>`${e}--workspace-palette-${t}: ${n};`,""),an=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1}),on=new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(_t.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(_t.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(_t.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=rn({...e,...an(e,"light")}),this.darkPaletteVars=rn({...t,...an(t,"dark")})}}setScheme(e){this.providerStorage.setItem(_t.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(_t.SelectedColorScheme)&&this.providerStorage.setItem(_t.SelectedColorScheme,nn),this.providerStorage.getItem(_t.SelectedColorScheme)}}(x),sn=()=>on,cn=e=>({getThemes:async()=>(await st(e)).dispatch(at.GetThemes,void 0),setSelectedScheme:async t=>(await st(e)).dispatch(at.SetSelectedScheme,t),getSelectedScheme:async()=>(await st(e)).dispatch(at.GetSelectedScheme,void 0)}),ln=async e=>{const t=await rt();await t.dispatch("set-selected-scheme",e)},un=async e=>{const t=await Qt();await t.dispatch(Zt.UpdatePlatformThemeScheme,{scheme:e})},dn=async e=>{const t=await ye();return Promise.all(t.map(async t=>{const n=await $t(t.identity);await n.dispatch(Ht.SetSelectedScheme,e)}))},pn=async e=>{const t=new Array,n=fin.Application.getCurrentSync(),r=await n.getViews();for(const e of r)-1!==e.identity.name.indexOf(de.BrowserAddressSearchPrefix)&&t.push(e.identity),-1!==(await e.getOptions()).url.indexOf(H.EnterpriseBrowser)&&t.push(e.identity);return Promise.all(t.map(async t=>{const n=await $t(t,"theme-change-listener");await n.dispatch(Ht.SetSelectedScheme,e)}))},fn=async e=>{const t=await async function(){return(await fin.Application.getCurrentSync().getChildWindows()).filter(e=>e.identity.name.startsWith(de.BrowserMenu))}();return Promise.all(t.map(async t=>{const n=await $t(t.identity);await n.dispatch(Ht.SetSelectedScheme,e)}))},hn=async e=>{const t=await $t({uuid:he.uuid,name:de.EnterpriseContextMenu});await t.dispatch(Ht.SetSelectedScheme,e)},gn=async e=>{const t=await $t({uuid:he.uuid,name:de.EnterpriseBookmarkDialogWindow});await t.dispatch(Ht.SetSelectedScheme,e).catch(()=>{})},mn=async e=>{const t=await $t({uuid:he.uuid,name:de.DropdownMenu});await t.dispatch(Ht.SetSelectedScheme,e).catch(()=>{})},wn=async e=>{const t=await $t({uuid:he.uuid,name:de.DockCompanion});await t.dispatch(Ht.SetSelectedScheme,e).catch(()=>{})},yn=async e=>{try{const t=sn();t.setScheme(e),await Promise.all([t.trySynchronizeWorkspaceStorage(),pn(e),un(e),dn(e),fn(e),hn(e),ln(e),gn(e),mn(e),wn(e)])}catch(e){console.error("failed to set the selected scheme: ",e)}},vn=()=>{try{return sn().getScheme()}catch(e){console.error("failed to get the selected scheme: ",e)}},bn=e=>{const t=fin.Platform.wrapSync(e);let n;return Object.assign(t,{applySnapshot:async(t,n)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,n)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then(e=>e),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,n,r)=>fin.Platform.wrapSync(e).createView(t,n,r),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:O,name:D,entityType:B||"unknown"}),(await st(e)).dispatch(at.LaunchApp,t)),_invokeCustomAction:async(t,n)=>{const r=await st(e),a={actionId:t,payload:{...n,callerType:n.callerType||P.API}};return r.dispatch(at.InvokeCustomActionInternal,a)},_requestQuitPlatformDialog:async t=>(await st(e)).dispatch(at.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await st(e)).dispatch(at.GetCurrentWorkspace,void 0),applyWorkspace:async(t,n)=>(await st(e)).dispatch(at.ApplyWorkspace,{...t,options:n}),restoreLastSavedWorkspace:async t=>(await st(e)).dispatch(at.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await st(e)).dispatch(at.SetActiveWorkspace,t),getLanguage:async()=>(await st(e)).dispatch(at.GetLanguage),_getLanguageResources:async()=>(await st(e)).dispatch(at.GetLanguageResourcesInternal),setLanguage:async t=>(await st(e)).dispatch(at.SetLanguage,t),_raiseAnalytics:async t=>{if(n||(n=await it(e)),"object"==typeof n&&n?.analytics?.isSupported)return(await st(e)).dispatch(at.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await st(e)).dispatch(at.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await st(e)).dispatch(at.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await st(e)).dispatch(at.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await st(e)).dispatch(at.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await st(e)).dispatch(at.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await st(e)).dispatch(at.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await st(e)).dispatch(at.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await st(e)).dispatch(at.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await st(e)).dispatch(at.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await st(e)).dispatch(at.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await st(e)).dispatch(at.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await st(e)).dispatch(at.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await st(e)).dispatch(at.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await st(e)).dispatch(at.FocusAndExpandSearchInternal),Theme:cn(e),Browser:Jt(e),Storage:Yt(e)})},kn=()=>bn(fin.me.identity),Sn={contextMenuOptions:{enabled:!0,template:["spellCheck","separator","print","separator","cut","copy","paste","undo","redo","selectAll","inspect","reload"]},downloadShelf:{enabled:!0}};function Cn(e,t){return kt({},Sn,t,e)}const Pn="internal-generated-view-",xn=(e,t)=>e.content?{...e,content:e.content.map(e=>xn(e,t))}:{...e,componentState:t(e.componentState)},_n=e=>({...e,name:void 0}),In=e=>{const t={...e};return xn(t,_n)},An=e=>{const t={...e};return xn(t,e=>e.name&&e.name.startsWith(Pn)?_n(e):e)},En=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach(e=>{if("component"===e.type)return t.push(e.componentState);const n=En(e.content);t.push(...n)}),t},Tn=async(e,t,n=he)=>{let r;return await we(n)&&(r=(await fe(n).getOptions()).layout||{settings:{}}),{...r,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map,new Map;const Mn=(e,t)=>{const n=En(t.content);return{...xn(e,e=>{const t=n.find(t=>t._internalWorkspaceData?.viewIdentifier===e._internalWorkspaceData?.viewIdentifier),r=t?t.isClosable:e.isClosable;return{...e,isClosable:r}}),settings:t.settings}},Rn=e=>e?En(e).length:0,On=(Pt()(async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),n=t.content?En(t.content):[],r=n.length;r>1?(e=>{"multiView"!==e.attachedPageType&&kn().Browser.wrapSync(he).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===r&&(async(e,t)=>{const n=kn().Browser.wrapSync(he);if("singleView"!==e.attachedPageType){const r=await Dt(e),a=await kn().Browser.getUniquePageTitle();delete r.layout;const o={...r,singleViewName:t,title:a,hasUnsavedChanges:!1,attachedPageType:"singleView"};await n.updatePage({pageId:e.pageId,page:o})}})(e,n[0].name),await(async(e,t)=>{const n=Bt({...he,layoutName:e.layoutContainerKey}),r=await n.isShowingTabs();t>1?r||await n.show():1===t&&r&&await n.hide({settings:{reorderEnabled:!0}})})(e,r)}catch(e){}},50,{leading:!1,trailing:!0}),n(434)),Dn=n(232);var Bn=a.n(Dn);const Wn=JSON.parse('{"contextMenu.newWindow":"新建窗口","contextMenu.newPage":"新建页面","contextMenu.restore":"还原到上次保存的更改","contextMenu.switchWorkspace":"切换工作区","contextMenu.appearance":"外观","contextMenu.saveWorkspace":"保存工作区","contextMenu.saveWorkspaceAs":"将工作区另存为...","contextMenu.renameWorkspace":"重命名工作区","contextMenu.deleteWorkspace":"删除工作区","contextMenu.downloads":"下载","contextMenu.savePage":"保存页面","contextMenu.savePageAs":"将页面另存为...","contextMenu.print":"打印...","contextMenu.printScreen":"打印屏幕","contextMenu.closeWindow":"关闭窗口","contextMenu.openStorefront":"开放式店面","contextMenu.quitPlatform":"退出平台","contextMenu.newView":"新建视图","contextMenu.openView":"使用默认 Web 浏览器打开视图","contextMenu.openViews":"使用默认 Web 浏览器打开视图","contextMenu.reload":"Reload CN","contextMenu.reloadView":"重新加载视图","contextMenu.reloadViews":"重新加载视图","contextMenu.duplicate":"Duplicate CN","contextMenu.duplicateView":"复制视图","contextMenu.duplicateViews":"复制视图","contextMenu.addView":"将视图添加到频道","contextMenu.addViews":"将视图添加到频道","contextMenu.removeView":"从频道中移除视图","contextMenu.removeViews":"从频道中移除视图","contextMenu.closeView":"关闭视图","contextMenu.closeViews":"关闭视图","contextMenu.closeTab":"Close Tab CN","contextMenu.duplicatePage":"复制页面","contextMenu.submenu.print":"打印","contextMenu.submenu.printAll":"全部打印","saveMenu.saveWorkspaceAs":"将工作区另存为","saveMenu.savePageAs":"将页面另存为","saveModal.enterValue":"Please enter a value CN","saveModal.alreadyExists":"{{title}} 已存在。","saveModal.pleaseEnterValidName":"请输入有效名称","saveModal.renamePage":"重新命名页面","saveModal.closePage":"关闭页面","saveModal.discardChanges":"放弃更改","saveModal.discardAll":"全部放弃","saveModal.saveAll":"全部保存","saveModal.savePagesCount":"关闭前保存 ({{count}}) 个页面？","defaultPageTitle":"Untitled Page CN","enterpriseDefaultPageTitle":"Untitled Supertab CN","addNewPage":"添加新页面","addNewTab":"添加新选项卡","addNewView":"新建视图","restoreModal":"您确定要还原到上次保存的更改吗？","modal.discardWarning":"任何未保存的更改都将丢失","modal.discardPageWarning":"对此页的任何未保存的更改都将丢失。","modal.saveChangesPrompt":"关闭前保存更改？","modal.pageClose":"关闭页面","switchWorkspaceModal":"您确定要切换到 {{workspace}} 吗？","switchWorkspaceModal.warning":"任何未保存的更改都将丢失","deleteWorkspaceModal":"您确定要永久删除此工作区吗？","replaceWorkspaceModal.warning":"名称为 {{workspace}} 的工作区已存在。您是否要替换它？","replaceWorkspaceModal.warning.body":"已存在同名的工作区。替换它将覆盖其当前内容。","replaceWorkspaceModal.replace":"替换","closePlatform":"关闭平台","closePlatform.workspace":"关闭 {{workspace}} 平台","closePlatform.warning":"关闭平台将关闭所有工作区、应用或任何正在运行的进程。","back":"后退","forward":"前进","reload":"重新加载","green":"绿色","purple":"紫色","orange":"橙色","red":"红色","pink":"粉红色","yellow":"黄色","theme.light":"浅色","theme.dark":"深色","theme.system":"与操作系统设置同步","toolbar.hideTabs":"隐藏选项卡","toolbar.showTabs":"显示选项卡","toolbar.lock":"锁定","toolbar.unlock":"解锁","toolbar.colorLinking":"颜色链接","toolbar.changeLayout":"更改布局","toolbar.saveMenu":"保存菜单","toolbar.maximizeWindow":"最大化窗口","toolbar.restoreWindow":"还原窗口","toolbar.minimizeWindow":"最小化窗口","changeLayout.fullWidth":"全宽","changeLayout.columns":"列数","changeLayout.Rows":"行数","changeLayout.Grid":"网格","successIndicator.workspaceSwitched":"已切换工作区","successIndicator.hidden":"选项卡已隐藏","successIndicator.shown":"选项卡已显示","successIndicator.locked":"页面已锁定","successIndicator.unlocked":"页面已解锁","successIndicator.workspaceSaved":"工作区已保存","successIndicator.workspaceSavedAs":"工作区已另存为 {{workspace}}","successIndicator.workspaceRenamed":"工作区已重命名","successIndicator.pageSaved":"页面已保存","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. CN","successIndicator.pageCopySaved":"页面已另存为 {{title}}","successIndicator.pageRenamed":"页面已重命名","successIndicator.contextGroupApplied":"已应用上下文组","successIndicator.namedContextGroupApplied":"已应用 {{colorName}} 上下文组","successIndicator.viewRemoved":"从上下文组中移除视图","successIndicator.viewsRemoved":"从上下文组中移除视图","successIndicator.layoutApplied":"已应用 {{layoutName}} 布局","successIndicator.workspaceDeleted":"工作区已删除","errorIndicator.pageSaveFailed":"页面保存失败","errorIndicator.workspaceSaveFailed":"工作区保存失败","errorIndicator.failedToDuplicatePage":"复制页面失败","infoIndicator.colorLinkAttempt":"我们尝试对此选项卡进行颜色链接，但网站/内容所有者尚未启用该功能","global.cancel":"取消","global.confirm":"确认","global.save":"保存","global.delete":"Delete CN","appResults.header":"Featured Content CN","recentlyClosed.header":"Recently Closed CN","landingPage.subheader":"Apps and websites selected by an admin will show here CN","aria.openBrowser":"打开浏览器菜单","aria.browserTabs":"浏览器选项卡","aria.viewTab":"查看 {{title}} 的选项卡","aria.closePage":"关闭 {{title}} 的页面选项卡按钮","aria.closeTab":"关闭选项卡 {{title}}","aria.title":"标题","aria.closeContextGroup":"使用转义关闭上下文组选择对话框","aria.colorLinking":"显示或隐藏颜色链接","aria.applyColorLinking":"请选择一个视图以应用颜色链接","aria.assignColorLinkingCurrentView":"分配给 {{name}} 上下文组的当前视图","aria.assignColorLinkingCurrentViews":"分配给 {{name}} 上下文组的当前视图","aria.setColorLinkingActiveView":"将活动视图设置为 {{name}} 上下文组","aria.setColorLinkingActiveViews":"将活动视图设置为 {{name}} 上下文组","aria.escapeLayoutDialog":"使用转义关闭更改布局对话框","global.supertab":"Supertab CN","global.tab":"Tab CN","bookmarks.editBookmark":"Edit Bookmark CN","bookmarks.bookmarkAdded":"Bookmark added CN","bookmarks.done":"Done CN","bookmarks.remove":"Remove CN","bookmarks.bookmarksPanel":"Bookmarks Panel CN","bookmarks.closePanel":"Close Bookmarks Panel CN","bookmarks.bookmarks":"Bookmarks CN","bookmarks.allBookmarks":"All Bookmarks CN","bookmarks.favorites":"Favorites CN","bookmarks.searchBookmarks":"Search Bookmarks CN","bookmarks.clearSearchInput":"Clear Search Input CN","bookmarks.createFolder":"Create New Folder CN","bookmarks.exitFolder":"Exit Folder CN","bookmarks.newFolder":"New Folder CN","bookmarks.namedFolder":"{{name}} Folder CN","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings CN","bookmarks.folderSettings":"{{name}} Folder Settings CN","bookmarks.noResultsFound":"No results found CN","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search CN","bookmarks.nothingToShow":"Nothing to show yet CN","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder CN","bookmarks.resultsFoundIn":"Results found in {{name}} CN","bookmarks.resultsInOtherFolders":"Results found in other folders CN","bookmarks.allResultsFoundIn":"All results found in CN","bookmarks.editName":"Edit Name CN","bookmarks.move":"Move CN","bookmarks.bookmarkAddedTitle":"Bookmark Added CN","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" CN","bookmarks.bookmarkEditedTitle":"Bookmark Edited CN","enterpriseContextMenu.saveSupertab":"Save Supertab CN","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... CN","enterpriseContextMenu.duplicate":"Duplicate CN","enterpriseContextMenu.deleteSupertab":"Delete Supertab CN","enterpriseContextMenu.newTab":"New Tab CN","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As CN","enterpriseSaveModal.renameSupertab":"Rename CN","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. CN","enterpriseSaveModal.closeTab":"Close Tab CN","enterpriseSaveModal.closeSupertab":"Close Supertab CN","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? CN","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. CN","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? CN","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. CN","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved CN","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. CN","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted CN","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. CN","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab CN","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab CN","enterpriseCommandBar.switchToSupertab":"Switch to Supertab CN","enterpriseCommandBar.goTo":"Go to {{type}} CN","enterpriseCommandBar.viewMore":"View More CN","contextMenu.quitEnterpriseBrowser":"Quit CN"}'),Fn=JSON.parse('{"contextMenu.newWindow":"新視窗","contextMenu.newPage":"新頁面","contextMenu.restore":"還原到上次儲存的變更","contextMenu.switchWorkspace":"切換工作空間","contextMenu.appearance":"外觀","contextMenu.saveWorkspace":"儲存工作空間","contextMenu.saveWorkspaceAs":"將工作空間另存為...","contextMenu.renameWorkspace":"重新命名工作空間","contextMenu.deleteWorkspace":"刪除工作空間","contextMenu.downloads":"下載","contextMenu.savePage":"儲存頁面","contextMenu.savePageAs":"將頁面另存為...","contextMenu.print":"列印...","contextMenu.printScreen":"擷取畫面","contextMenu.closeWindow":"關閉視窗","contextMenu.openStorefront":"打開 Storefront","contextMenu.quitPlatform":"退出平台","contextMenu.newView":"新視圖","contextMenu.openView":"使用預設網頁瀏覽器打開視圖","contextMenu.openViews":"使用預設網頁瀏覽器打開視圖","contextMenu.reload":"Reload ZH","contextMenu.reloadView":"重新載入視圖","contextMenu.reloadViews":"重新載入視圖","contextMenu.duplicate":"Duplicate ZH","contextMenu.duplicateView":"複寫視圖","contextMenu.duplicateViews":"複寫視圖","contextMenu.addView":"將視圖新增至頻道","contextMenu.addViews":"將視圖新增至頻道","contextMenu.removeView":"從頻道中移除視圖","contextMenu.removeViews":"從頻道中移除視圖","contextMenu.closeView":"關閉視圖","contextMenu.closeViews":"關閉視圖","contextMenu.closeTab":"Close Tab ZH","contextMenu.duplicatePage":"複寫頁面","contextMenu.submenu.print":"列印","contextMenu.submenu.printAll":"列印全部","saveMenu.saveWorkspaceAs":"將工作空間另存為","saveMenu.savePageAs":"頁面另存為","saveModal.enterValue":"Please enter a value ZH","saveModal.alreadyExists":"{{title}} 已經存在。","saveModal.pleaseEnterValidName":"請輸入一個有效的名稱","saveModal.renamePage":"重新命名頁面","saveModal.closePage":"關閉頁面","saveModal.discardChanges":"捨棄變更","saveModal.discardAll":"全部捨棄","saveModal.saveAll":"儲存全部","saveModal.savePagesCount":"要先儲存 ({{count}}) 個頁面再關閉嗎？","defaultPageTitle":"Untitled Page ZH","enterpriseDefaultPageTitle":"Untitled Supertab ZH","addNewPage":"新增新頁面","addNewTab":"新增新索引標籤","addNewView":"新視圖","restoreModal":"您確定要還原到上次儲存的變更嗎？","modal.discardWarning":"任何未儲存的變更都將被捨棄","modal.discardPageWarning":"在此頁面任何未儲存的變更都將遺失。","modal.saveChangesPrompt":"要先儲存變更再關閉嗎？","modal.pageClose":"頁面關閉","switchWorkspaceModal":"您確定要切換到 {{workspace}}？","switchWorkspaceModal.warning":"任何未儲存的變更都將被捨棄","deleteWorkspaceModal":"您確定要永久刪除此工作空間嗎？","replaceWorkspaceModal.warning":"具有名稱 {{workspace}} 的工作空間已經存在。你要更換它嗎？","replaceWorkspaceModal.warning.body":"相同名稱的工作空間已經存在。更換它後，將會覆蓋目前內容。","replaceWorkspaceModal.replace":"更換","closePlatform":"關閉平台","closePlatform.workspace":"關閉 {{workspace}} 平台","closePlatform.warning":"關閉平台後，將關閉正在執行的任何工作空間、APP 或流程。","back":"上一頁","forward":"下一頁","reload":"重新載入","green":"綠","purple":"紫","orange":"橘","red":"紅色","pink":"粉紅","yellow":"黃","theme.light":"淺","theme.dark":"深","theme.system":"與 OS 設定同步","toolbar.hideTabs":"隱藏索引標籤","toolbar.showTabs":"顯示索引標籤","toolbar.lock":"上鎖","toolbar.unlock":"解鎖","toolbar.colorLinking":"顏色連結","toolbar.changeLayout":"變更版面","toolbar.saveMenu":"儲存選單","toolbar.maximizeWindow":"最大化視窗","toolbar.restoreWindow":"還原視窗","toolbar.minimizeWindow":"最小化視窗","changeLayout.fullWidth":"全螢幕寬度","changeLayout.columns":"行","changeLayout.Rows":"列","changeLayout.Grid":"網格","successIndicator.workspaceSwitched":"工作空間已切換","successIndicator.hidden":"索引標籤已隱藏","successIndicator.shown":"索引標籤已顯示","successIndicator.locked":"頁面已上鎖","successIndicator.unlocked":"頁面已解鎖","successIndicator.workspaceSaved":"工作空間已儲存","successIndicator.workspaceSavedAs":"工作空間已另存為 {{workspace}}","successIndicator.workspaceRenamed":"工作空間已重新命名","successIndicator.pageSaved":"頁面已儲存","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. ZH","successIndicator.pageCopySaved":"頁面已另存為 {{title}}","successIndicator.pageRenamed":"頁面已重新命名","successIndicator.contextGroupApplied":"脈絡群組已套用","successIndicator.namedContextGroupApplied":"{{colorName}} 脈絡群組已套用","successIndicator.viewRemoved":"從脈絡群組中移除的視圖","successIndicator.viewsRemoved":"從脈絡群組中移除的視圖","successIndicator.layoutApplied":"{{layoutName}} 版面已套用","successIndicator.workspaceDeleted":"工作空間已刪除","errorIndicator.pageSaveFailed":"頁面無法儲存","errorIndicator.workspaceSaveFailed":"工作空間無法儲存","errorIndicator.failedToDuplicatePage":"無法複寫頁面","infoIndicator.colorLinkAttempt":"我們嘗試對此索引標籤進行顏色連結，但網站/內容所有者尚未啟用該功能","global.cancel":"取消","global.confirm":"確認","global.save":"儲存","global.delete":"Delete ZH","appResults.header":"Featured Content ZH","recentlyClosed.header":"Recently Closed ZH","landingPage.subheader":"Apps and websites selected by an admin will show here ZH","aria.openBrowser":"開啟瀏覽器選單","aria.browserTabs":"瀏覽器索引標籤","aria.viewTab":"{{title}} 的視圖索引標籤","aria.closePage":"關閉 {{title}} 的頁面索引標籤按鈕","aria.closeTab":"關閉索引標籤 {{title}}","aria.title":"標題","aria.closeContextGroup":"使用 Esc 鍵關閉脈絡群組選取對話框","aria.colorLinking":"顯示或隱藏顏色連結","aria.applyColorLinking":"請選取要套用顏色連結的視圖","aria.assignColorLinkingCurrentView":"目前視圖分配給 {{name}} 脈絡群組","aria.assignColorLinkingCurrentViews":"目前視圖分配給 {{name}} 脈絡群組","aria.setColorLinkingActiveView":"將啟用視圖設定為 {{name}} 脈絡群組","aria.setColorLinkingActiveViews":"將啟用視圖設定為 {{name}} 脈絡群組","aria.escapeLayoutDialog":"使用 Esc 鍵關閉變更版面對話框","global.supertab":"Supertab ZH","global.tab":"Tab ZH","bookmarks.editBookmark":"Edit Bookmark ZH","bookmarks.bookmarkAdded":"Bookmark added ZH","bookmarks.done":"Done ZH","bookmarks.remove":"Remove ZH","bookmarks.bookmarksPanel":"Bookmarks Panel ZH","bookmarks.closePanel":"Close Bookmarks Panel ZH","bookmarks.bookmarks":"Bookmarks ZH","bookmarks.allBookmarks":"All Bookmarks ZH","bookmarks.favorites":"Favorites ZH","bookmarks.searchBookmarks":"Search Bookmarks ZH","bookmarks.clearSearchInput":"Clear Search Input ZH","bookmarks.createFolder":"Create New Folder ZH","bookmarks.exitFolder":"Exit Folder ZH","bookmarks.newFolder":"New Folder ZH","bookmarks.namedFolder":"{{name}} Folder ZH","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings ZH","bookmarks.folderSettings":"{{name}} Folder Settings ZH","bookmarks.noResultsFound":"No results found ZH","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search ZH","bookmarks.nothingToShow":"Nothing to show yet ZH","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder ZH","bookmarks.resultsFoundIn":"Results found in {{name}} ZH","bookmarks.resultsInOtherFolders":"Results found in other folders ZH","bookmarks.allResultsFoundIn":"All results found in ZH","bookmarks.editName":"Edit Name ZH","bookmarks.move":"Move ZH","bookmarks.bookmarkAddedTitle":"Bookmark Added ZH","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" ZH","bookmarks.bookmarkEditedTitle":"Bookmark Edited ZH","enterpriseContextMenu.saveSupertab":"Save Supertab ZH","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... ZH","enterpriseContextMenu.duplicate":"Duplicate ZH","enterpriseContextMenu.deleteSupertab":"Delete Supertab ZH","enterpriseContextMenu.newTab":"New Tab ZH","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As ZH","enterpriseSaveModal.renameSupertab":"Rename ZH","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. ZH","enterpriseSaveModal.closeTab":"Close Tab ZH","enterpriseSaveModal.closeSupertab":"Close Supertab ZH","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? ZH","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. ZH","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? ZH","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. ZH","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved ZH","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. ZH","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted ZH","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. ZH","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab ZH","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab ZH","enterpriseCommandBar.switchToSupertab":"Switch to Supertab ZH","enterpriseCommandBar.goTo":"Go to {{type}} ZH","enterpriseCommandBar.viewMore":"View More ZH","contextMenu.quitEnterpriseBrowser":"Quit ZH"}'),Nn=JSON.parse('{"contextMenu.newWindow":"New Window","contextMenu.newPage":"New Page","contextMenu.restore":"Restore to Last Saved Changes","contextMenu.switchWorkspace":"Switch Workspace","contextMenu.appearance":"Appearance","contextMenu.saveWorkspace":"Save Workspace","contextMenu.saveWorkspaceAs":"Save Workspace As...","contextMenu.renameWorkspace":"Rename Workspace","contextMenu.deleteWorkspace":"Delete Workspace","contextMenu.downloads":"Downloads","contextMenu.savePage":"Save Page","contextMenu.savePageAs":"Save Page As...","contextMenu.print":"Print...","contextMenu.printScreen":"Print Screen","contextMenu.closeWindow":"Close Window","contextMenu.openStorefront":"Open Storefront","contextMenu.quitPlatform":"Quit {{platformLabel}}","contextMenu.newView":"New View","contextMenu.openView":"Open View with Default Web Browser","contextMenu.openViews":"Open Views with Default Web Browser","contextMenu.reload":"Reload","contextMenu.reloadView":"Reload View","contextMenu.reloadViews":"Reload Views","contextMenu.duplicate":"Duplicate","contextMenu.duplicateView":"Duplicate View","contextMenu.duplicateViews":"Duplicate Views","contextMenu.addView":"Add View to Channel","contextMenu.addViews":"Add Views to Channel","contextMenu.removeView":"Remove View from Channel","contextMenu.removeViews":"Remove Views from Channel","contextMenu.closeView":"Close View","contextMenu.closeViews":"Close Views","contextMenu.closeTab":"Close Tab","contextMenu.duplicatePage":"Duplicate Page","contextMenu.submenu.print":"Print","contextMenu.submenu.printAll":"Print All","saveMenu.saveWorkspaceAs":"Save Workspace As","saveMenu.savePageAs":"Save Page As","saveModal.enterValue":"Please enter a value","saveModal.alreadyExists":"{{title}} already exists.","saveModal.pleaseEnterValidName":"Please enter a valid name","saveModal.renamePage":"Rename Page","saveModal.closePage":"Close Page","saveModal.discardChanges":"Discard Changes","saveModal.discardAll":"Discard All","saveModal.saveAll":"Save All","saveModal.savePagesCount":"Save ({{count}}) pages before closing?","defaultPageTitle":"Untitled Page","enterpriseDefaultPageTitle":"Untitled Supertab","addNewPage":"New Page","addNewTab":"Add New Tab","addNewView":"New View","restoreModal":"Are you sure you want to restore to last saved changes?","modal.discardWarning":"Any unsaved changes will be discarded","modal.discardPageWarning":"Any unsaved changes to this page will be lost.","modal.saveChangesPrompt":"Save changes before closing?","modal.pageClose":"Page Close","switchWorkspaceModal":"Are you sure you want to switch to {{workspace}}?","switchWorkspaceModal.warning":"Any unsaved changes will be discarded","deleteWorkspaceModal":"Are you sure you want to permanently delete this workspace?","replaceWorkspaceModal.warning":"A Workspace with the name {{workspace}} already exists. Do you want to replace it?","replaceWorkspaceModal.warning.body":"A workspace with the same name already exists. Replacing it will overwrite its current contents.","replaceWorkspaceModal.replace":"Replace","closePlatform":"Close the platform","closePlatform.workspace":"Close the {{workspace}} Platform","closePlatform.warning":"Closing a platform will close any workspaces, apps or any processes that are running.","back":"Back","forward":"Forward","reload":"Reload","green":"Green","purple":"Purple","orange":"Orange","red":"Red","pink":"Pink","yellow":"Yellow","theme.light":"Light","theme.dark":"Dark","theme.system":"Sync with OS setting","toolbar.hideTabs":"Hide Tabs","toolbar.showTabs":"Show Tabs","toolbar.lock":"Lock","toolbar.unlock":"Unlock","toolbar.colorLinking":"Color Linking","toolbar.changeLayout":"Change Layout","toolbar.saveMenu":"Save Menu","toolbar.maximizeWindow":"Maximize Window","toolbar.restoreWindow":"Restore Window","toolbar.minimizeWindow":"Minimize Window","changeLayout.fullWidth":"Full Width","changeLayout.columns":"Columns","changeLayout.Rows":"Rows","changeLayout.Grid":"Grid","successIndicator.workspaceSwitched":"Workspace Switched","successIndicator.hidden":"Tabs are Hidden","successIndicator.shown":"Tabs are Shown","successIndicator.locked":"Page is Locked","successIndicator.unlocked":"Page is Unlocked","successIndicator.workspaceSaved":"Workspace saved","successIndicator.workspaceSavedAs":"Workspace saved as {{workspace}}","successIndicator.workspaceRenamed":"Workspace renamed","successIndicator.pageSaved":"Page Saved","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved.","successIndicator.pageCopySaved":"Page saved as {{title}}","successIndicator.pageRenamed":"Page renamed","successIndicator.contextGroupApplied":"Context group applied","successIndicator.namedContextGroupApplied":"{{colorName}} context group applied","successIndicator.viewRemoved":"View removed from context group","successIndicator.viewsRemoved":"Views removed from context group","successIndicator.layoutApplied":"{{layoutName}} layout applied","successIndicator.workspaceDeleted":"Workspace deleted","errorIndicator.pageSaveFailed":"Page failed to save","errorIndicator.workspaceSaveFailed":"Workspace failed to save","errorIndicator.failedToDuplicatePage":"Failed to duplicate Page","infoIndicator.colorLinkAttempt":"We attempted to color link this tab, but the site/content owner has not enabled it yet","global.cancel":"Cancel","global.confirm":"Confirm","global.save":"Save","global.delete":"Delete","appResults.header":"Featured Content","recentlyClosed.header":"Recently Closed","landingPage.subheader":"Apps and websites selected by an admin will show here","aria.openBrowser":"Open Browser Menu","aria.browserTabs":"Browser Tabs","aria.viewTab":"View Tab for {{title}}","aria.closePage":"Close Page Tab Button for {{title}}","aria.closeTab":"Close Tab {{title}}","aria.title":"Title","aria.closeContextGroup":"Use escape to close context group selection dialog","aria.colorLinking":"Show or hide color linking","aria.applyColorLinking":"Please select a view to apply color linking","aria.assignColorLinkingCurrentView":"Current view assigned to {{name}} context group","aria.assignColorLinkingCurrentViews":"Current views assigned to {{name}} context group","aria.setColorLinkingActiveView":"Set active view to {{name}} context group","aria.setColorLinkingActiveViews":"Set active views to {{name}} context group","aria.escapeLayoutDialog":"Use escape to close change layout dialog","global.supertab":"Supertab","global.tab":"Tab","bookmarks.editBookmark":"Edit Bookmark","bookmarks.bookmarkAdded":"Bookmark added","bookmarks.done":"Done","bookmarks.remove":"Remove","bookmarks.bookmarksPanel":"Bookmarks Panel","bookmarks.closePanel":"Close Bookmarks Panel","bookmarks.bookmarks":"Bookmarks","bookmarks.allBookmarks":"All Bookmarks","bookmarks.favorites":"Favorites","bookmarks.searchBookmarks":"Search Bookmarks","bookmarks.clearSearchInput":"Clear Search Input","bookmarks.createFolder":"Create New Folder","bookmarks.exitFolder":"Exit Folder","bookmarks.newFolder":"New Folder","bookmarks.namedFolder":"{{name}} Folder","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings","bookmarks.folderSettings":"{{name}} Folder Settings","bookmarks.noResultsFound":"No results found","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search","bookmarks.nothingToShow":"Nothing to show yet","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder","bookmarks.resultsFoundIn":"Results found in {{name}}","bookmarks.resultsInOtherFolders":"Results found in other folders","bookmarks.allResultsFoundIn":"All results found in","bookmarks.editName":"Edit Name","bookmarks.move":"Move","bookmarks.bookmarkAddedTitle":"Bookmark Added","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\"","bookmarks.bookmarkEditedTitle":"Bookmark Edited","enterpriseContextMenu.saveSupertab":"Save Supertab","enterpriseContextMenu.saveSupertabAs":"Save Supertab As...","enterpriseContextMenu.duplicate":"Duplicate","enterpriseContextMenu.deleteSupertab":"Delete Supertab","enterpriseContextMenu.newTab":"New Tab","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As","enterpriseSaveModal.renameSupertab":"Rename","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab.","enterpriseSaveModal.closeTab":"Close Tab","enterpriseSaveModal.closeSupertab":"Close Supertab","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing?","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost.","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab?","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent.","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted.","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab","enterpriseCommandBar.switchToSupertab":"Switch to Supertab","enterpriseCommandBar.goTo":"Go to {{type}}","enterpriseCommandBar.viewMore":"View More","contextMenu.quitEnterpriseBrowser":"Quit","dock.removeFavorite":"Remove"}'),Ln=JSON.parse('{"contextMenu.newWindow":"Neues Fenster","contextMenu.newPage":"Neue Seite","contextMenu.restore":"Wiederherstellen der zuletzt gespeicherten Änderungen","contextMenu.switchWorkspace":"Workspace wechseln","contextMenu.appearance":"Erscheinungsbild","contextMenu.saveWorkspace":"Workspace speichern","contextMenu.saveWorkspaceAs":"Workspace speichern unter...","contextMenu.renameWorkspace":"Workspace umbenennen","contextMenu.deleteWorkspace":"Workspace löschen","contextMenu.downloads":"Downloads","contextMenu.savePage":"Seite speichern","contextMenu.savePageAs":"Seite speichern unter...","contextMenu.print":"Drucken...","contextMenu.printScreen":"Bildschirmansicht drucken","contextMenu.closeWindow":"Fenster schließen","contextMenu.openStorefront":"Schaufenster öffnen","contextMenu.quitPlatform":"Plattform verlassen","contextMenu.newView":"Neue Ansicht","contextMenu.openView":"Ansicht mit Standard-Webbrowser öffnen","contextMenu.openViews":"Ansichten mit Standard-Webbrowser öffnen","contextMenu.reload":"Reload DE","contextMenu.reloadView":"Ansicht neu laden","contextMenu.reloadViews":"Ansichten neu laden","contextMenu.duplicate":"Duplicate DE","contextMenu.duplicateView":"Ansicht duplizieren","contextMenu.duplicateViews":"Ansichten duplizieren","contextMenu.addView":"Ansicht zum Channel hinzufügen","contextMenu.addViews":"Ansichten zum Channel hinzufügen","contextMenu.removeView":"Ansicht aus dem Channel entfernen","contextMenu.removeViews":"Ansichten aus dem Channel entfernen","contextMenu.closeView":"Ansicht schließen","contextMenu.closeViews":"Ansichten schließen","contextMenu.closeTab":"Close Tab DE","contextMenu.duplicatePage":"Seite duplizieren","contextMenu.submenu.print":"Drucken","contextMenu.submenu.printAll":"Alle drucken","saveMenu.saveWorkspaceAs":"Workspace speichern unter","saveMenu.savePageAs":"Seite speichern unter","saveModal.enterValue":"Please enter a value DE","saveModal.alreadyExists":"{{title}} existiert bereits.","saveModal.pleaseEnterValidName":"Bitte geben Sie einen gültigen Namen ein","saveModal.renamePage":"Seite umbenennen","saveModal.closePage":"Seite schließen","saveModal.discardChanges":"Änderungen verwerfen","saveModal.discardAll":"Alle verwerfen","saveModal.saveAll":"Alle speichern","saveModal.savePagesCount":"({{count}}) Seiten vor dem Schließen speichern?","defaultPageTitle":"Untitled Page DE","enterpriseDefaultPageTitle":"Untitled Supertab DE","addNewPage":"Neue Seite hinzufügen","addNewTab":"Neuen Tab hinzufügen","addNewView":"Neue Ansicht","restoreModal":"Sind Sie sicher, dass Sie die zuletzt gespeicherten Änderungen wiederherstellen wollen?","modal.discardWarning":"Alle nicht gespeicherten Änderungen werden verworfen","modal.discardPageWarning":"Alle nicht gespeicherten Änderungen auf dieser Seite gehen verloren.","modal.saveChangesPrompt":"Änderungen vor dem Schließen speichern?","modal.pageClose":"Seite schließen","switchWorkspaceModal":"Sind Sie sicher, dass Sie zu {{workspace}}wechseln wollen?","switchWorkspaceModal.warning":"Alle nicht gespeicherten Änderungen werden verworfen","deleteWorkspaceModal":"Sind Sie sicher, dass Sie diesen Workspace dauerhaft löschen wollen?","replaceWorkspaceModal.warning":"Ein Workspace mit dem Namen {{workspace}} existiert bereits. Möchten Sie ihn ersetzen?","replaceWorkspaceModal.warning.body":"Ein Workspace mit demselben Namen existiert bereits. Wenn Sie ihn ersetzen, wird der aktuelle Inhalt überschrieben.","replaceWorkspaceModal.replace":"Ersetzen","closePlatform":"Plattform schließen","closePlatform.workspace":"Die {{workspace}} Plattform schließen","closePlatform.warning":"Wenn Sie eine Plattform schließen, werden alle Workspaces, Apps und laufenden Prozesse beendet.","back":"Zurück","forward":"Weiter","reload":"Neu laden","green":"Grün","purple":"Lila","orange":"Orange","red":"Rot","pink":"Pink","yellow":"Gelb","theme.light":"Hell","theme.dark":"Dunkel","theme.system":"Synchronisierung mit OS-Einstellung","toolbar.hideTabs":"Tabs ausblenden","toolbar.showTabs":"Tabs anzeigen","toolbar.lock":"Sperren","toolbar.unlock":"Freischalten","toolbar.colorLinking":"Farbverknüpfung","toolbar.changeLayout":"Layout ändern","toolbar.saveMenu":"Menü speichern","toolbar.maximizeWindow":"Fenster maximieren","toolbar.restoreWindow":"Fenster wiederherstellen","toolbar.minimizeWindow":"Fenster minimieren","changeLayout.fullWidth":"Volle Breite","changeLayout.columns":"Spalten","changeLayout.Rows":"Zeilen","changeLayout.Grid":"Raster","successIndicator.workspaceSwitched":"Workspace gewechselt","successIndicator.hidden":"Tabs sind ausgeblendet","successIndicator.shown":"Tabs werden angezeigt","successIndicator.locked":"Seite ist gesperrt","successIndicator.unlocked":"Seite ist freigeschaltet","successIndicator.workspaceSaved":"Workspace gespeichert","successIndicator.workspaceSavedAs":"Workspace gespeichert als {{workspace}}","successIndicator.workspaceRenamed":"Workspace umbenannt","successIndicator.pageSaved":"Seite gespeichert","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. DE","successIndicator.pageCopySaved":"Seite gespeichert als {{title}}","successIndicator.pageRenamed":"Seite umbenannt","successIndicator.contextGroupApplied":"Angewandte Kontextgruppe","successIndicator.namedContextGroupApplied":"{{colorName}} angewandte Kontextgruppe","successIndicator.viewRemoved":"Ansicht aus der Kontextgruppe entfernt","successIndicator.viewsRemoved":"Ansichten aus der Kontextgruppe entfernt","successIndicator.layoutApplied":"{{layoutName}} angewandtes Layout","successIndicator.workspaceDeleted":"Workspace gelöscht","errorIndicator.pageSaveFailed":"Seite konnte nicht gespeichert werden","errorIndicator.workspaceSaveFailed":"Workspace konnte nicht gespeichert werden","errorIndicator.failedToDuplicatePage":"Seite kann nicht dupliziert werden","infoIndicator.colorLinkAttempt":"Wir haben versucht, diesem Tab eine Farbe zuordnen, aber der Eigentümer der Website/des Inhalts hat sie noch nicht aktiviert","global.cancel":"Abbrechen","global.confirm":"Bestätigen","global.save":"Speichern","global.delete":"Delete DE","appResults.header":"Featured Content DC","recentlyClosed.header":"Recently Closed DC","landingPage.subheader":"Apps and websites selected by an admin will show here DE","aria.openBrowser":"Browser-Menü öffnen","aria.browserTabs":"Browser-Tab","aria.viewTab":"Tab „Ansicht“ für {{title}}","aria.closePage":"Button „Seite schließen“ für {{title}}","aria.closeTab":"Tab schließen {{title}}","aria.title":"Bezeichnung","aria.closeContextGroup":"Verwenden Sie die Escape-Taste, um den Dialog zur Auswahl von Kontextgruppen zu schließen","aria.colorLinking":"Farbverknüpfung ein- oder ausblenden","aria.applyColorLinking":"Bitte wählen Sie eine Ansicht, um die Farbverknüpfung anzuwenden","aria.assignColorLinkingCurrentView":"Aktuelle Ansicht, die der Kontextgruppe {{name}} zugeordnet ist","aria.assignColorLinkingCurrentViews":"Aktuelle Ansichten, die der Kontextgruppe {{name}} zugeordnet sind","aria.setColorLinkingActiveView":"Aktive Ansicht auf die Kontextgruppe {{name}} setzen","aria.setColorLinkingActiveViews":"Aktive Ansichten auf die Kontextgruppe {{name}} setzen","aria.escapeLayoutDialog":"Verwenden Sie die Escape-Taste, um den Dialog zur Layoutänderung zu schließen","global.supertab":"Supertab DE","global.tab":"Tab DE","bookmarks.editBookmark":"Edit Bookmark DE","bookmarks.bookmarkAdded":"Bookmark added DE","bookmarks.done":"Done DE","bookmarks.remove":"Remove DE","bookmarks.bookmarksPanel":"Bookmarks Panel DE","bookmarks.closePanel":"Close Bookmarks Panel DE","bookmarks.bookmarks":"Bookmarks DE","bookmarks.allBookmarks":"All Bookmarks DE","bookmarks.favorites":"Favorites DE","bookmarks.searchBookmarks":"Search Bookmarks DE","bookmarks.clearSearchInput":"Clear Search Input DE","bookmarks.createFolder":"Create New Folder DE","bookmarks.exitFolder":"Exit Folder DE","bookmarks.newFolder":"New Folder DE","bookmarks.namedFolder":"{{name}} Folder DE","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings DE","bookmarks.folderSettings":"{{name}} Folder Settings DE","bookmarks.noResultsFound":"No results found DE","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search DE","bookmarks.nothingToShow":"Nothing to show yet DE","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder DE","bookmarks.resultsFoundIn":"Results found in {{name}} DE","bookmarks.resultsInOtherFolders":"Results found in other folders DE","bookmarks.allResultsFoundIn":"All results found in DE","bookmarks.editName":"Edit Name DE","bookmarks.move":"Move DE","bookmarks.bookmarkAddedTitle":"Bookmark Added DE","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" DE","bookmarks.bookmarkEditedTitle":"Bookmark Edited DE","enterpriseContextMenu.saveSupertab":"Save Supertab DE","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... DE","enterpriseContextMenu.duplicate":"Duplicate DE","enterpriseContextMenu.deleteSupertab":"Delete Supertab DE","enterpriseContextMenu.newTab":"New Tab DE","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As DE","enterpriseSaveModal.renameSupertab":"Rename DE","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. DE","enterpriseSaveModal.closeTab":"Close Tab DE","enterpriseSaveModal.closeSupertab":"Close Supertab DE","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? DE","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. DE","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? DE","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. DE","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved DE","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. DE","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted DE","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. DE","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab DE","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab DE","enterpriseCommandBar.switchToSupertab":"Switch to Supertab DE","enterpriseCommandBar.goTo":"Go to {{type}} DE","enterpriseCommandBar.viewMore":"View More DE","contextMenu.quitEnterpriseBrowser":"Quit DE"}'),$n=JSON.parse('{"contextMenu.newWindow":"新しいウィンドウ","contextMenu.newPage":"新しいページ","contextMenu.restore":"最後に保存された変更に戻す","contextMenu.switchWorkspace":"ワークスペースに切り替える","contextMenu.appearance":"外観","contextMenu.saveWorkspace":"ワークスペースを保存","contextMenu.saveWorkspaceAs":"ワークスペースを別名で保存...","contextMenu.renameWorkspace":"ワークスペース名を変更","contextMenu.deleteWorkspace":"ワークスペースを削除","contextMenu.downloads":"ダウンロード","contextMenu.savePage":"ページを保存","contextMenu.savePageAs":"ページを別名で保存...","contextMenu.print":"印刷...","contextMenu.printScreen":"プリントスクリーン","contextMenu.closeWindow":"ウィンドウを閉じる","contextMenu.openStorefront":"ストアフロントを開く","contextMenu.quitPlatform":"プラットフォームを終了する","contextMenu.newView":"新しいビュー","contextMenu.openView":"デフォルトのウェブブラウザーでビューを開く","contextMenu.openViews":"デフォルトのウェブブラウザーでビューを開く","contextMenu.reload":"Reload JP","contextMenu.reloadView":"ビューをリロード","contextMenu.reloadViews":"ビューをリロード","contextMenu.duplicate":"Duplicate JP","contextMenu.duplicateView":"ビューを複製","contextMenu.duplicateViews":"ビューを複製","contextMenu.addView":"ビューをチャネルに追加","contextMenu.addViews":"ビューをチャネルに追加","contextMenu.removeView":"チャネルからビューを削除","contextMenu.removeViews":"チャネルからビューを削除","contextMenu.closeView":"ビューを閉じる","contextMenu.closeViews":"ビューを閉じる","contextMenu.closeTab":"Close Tab JP","contextMenu.duplicatePage":"ページを複製","contextMenu.submenu.print":"印刷","contextMenu.submenu.printAll":"すべてを印刷","saveMenu.saveWorkspaceAs":"ワークスペースを別名で保存","saveMenu.savePageAs":"ページを別名で保存","saveModal.enterValue":"Please enter a value JP","saveModal.alreadyExists":"{{title}}はすでに存在しています。","saveModal.pleaseEnterValidName":"有効な名前を入力してください","saveModal.renamePage":"ページ名を変更","saveModal.closePage":"ページを閉じる","saveModal.discardChanges":"変更を破棄","saveModal.discardAll":"すべて破棄","saveModal.saveAll":"すべて保存","saveModal.savePagesCount":"閉じる前に（{{count}}）つのページを保存しますか？","defaultPageTitle":"Untitled Page JP","enterpriseDefaultPageTitle":"Untitled Supertab JP","addNewPage":"新しいページを追加","addNewTab":"新しいタブを追加","addNewView":"新しいビュー","restoreModal":"本当に最後に保存された変更に戻しますか？","modal.discardWarning":"保存されていない変更は破棄されます","modal.discardPageWarning":"保存されていないこのページへの変更は失われます。","modal.saveChangesPrompt":"閉じる前に変更を保存しますか？","modal.pageClose":"ページを閉じる","switchWorkspaceModal":"本当に{{workspace}}に切り替えますか？","switchWorkspaceModal.warning":"保存されていない変更は破棄されます","deleteWorkspaceModal":"このワークスペースを永久に削除してもよろしいですか？","replaceWorkspaceModal.warning":"{{workspace}}という名前のワークスペースがすでに存在します。置き換えますか？","replaceWorkspaceModal.warning.body":"同じ名前のワークスペースがすでに存在します。置き換えると、現在の内容は上書きされます。","replaceWorkspaceModal.replace":"置き換える","closePlatform":"プラットフォームを閉じる","closePlatform.workspace":"{{workspace}}プラットフォームを閉じる","closePlatform.warning":"プラットフォームを閉じると、実行中のワークスペース、アプリ、プロセスがすべて閉じます。","back":"戻る","forward":"進む","reload":"リロード","green":"グリーン","purple":"パープル","orange":"オレンジ","red":"レッド","pink":"ピンク","yellow":"イエロー","theme.light":"ライト","theme.dark":"ダーク","theme.system":"OSの設定と同期","toolbar.hideTabs":"タブを非表示","toolbar.showTabs":"タブを表示","toolbar.lock":"ロック","toolbar.unlock":"ロック解除","toolbar.colorLinking":"カラーリンク","toolbar.changeLayout":"レイアウトを変更","toolbar.saveMenu":"メニューを保存","toolbar.maximizeWindow":"ウィンドウを最大化する","toolbar.restoreWindow":"ウィンドウを復元","toolbar.minimizeWindow":"ウィンドウを最小化する","changeLayout.fullWidth":"全幅","changeLayout.columns":"列","changeLayout.Rows":"行","changeLayout.Grid":"グリッド","successIndicator.workspaceSwitched":"ワークスペースが切り替わりました","successIndicator.hidden":"タブが非表示になっています","successIndicator.shown":"タブが表示されています","successIndicator.locked":"ページがロックされています","successIndicator.unlocked":"ページのロックが解除されています","successIndicator.workspaceSaved":"ワークスペースが保存されました","successIndicator.workspaceSavedAs":"ワークスペースが{{workspace}}として保存されました","successIndicator.workspaceRenamed":"ワークスペース名が変更されました","successIndicator.pageSaved":"ページが保存されました","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. JP","successIndicator.pageCopySaved":"ページが{{title}}として保存されました","successIndicator.pageRenamed":"ページ名が変更されました","successIndicator.contextGroupApplied":"コンテキストグループが適用されました","successIndicator.namedContextGroupApplied":"{{colorName}}コンテキストグループが適用されました","successIndicator.viewRemoved":"コンテキストグループからビューが削除されました","successIndicator.viewsRemoved":"コンテキストグループからビューが削除されました","successIndicator.layoutApplied":"{{layoutName}}レイアウトが適用されました","successIndicator.workspaceDeleted":"ワークスペースが削除されました","errorIndicator.pageSaveFailed":"ページを保存できませんでした","errorIndicator.workspaceSaveFailed":"ワークスペースを保存できませんでした","errorIndicator.failedToDuplicatePage":"ページを複製できませんでした","infoIndicator.colorLinkAttempt":"このタブをカラーリンクしようとしましたが、サイト/コンテンツのオーナーがまだこれを有効にしていません","global.cancel":"キャンセル","global.confirm":"確認","global.save":"保存","global.delete":"Delete JP","appResults.header":"Featured content JP","recentlyClosed.header":"Recently Closed JP","landingPage.subheader":"Apps and websites selected by an admin will show here JP","aria.openBrowser":"ブラウザーメニューを開く","aria.browserTabs":"ブラウザータブ","aria.viewTab":"{{title}}のタブを表示","aria.closePage":"{{title}}のページタブボタンを閉じる","aria.closeTab":"{{title}}タブを閉じる","aria.title":"タイトル","aria.closeContextGroup":"エスケープを使用して、コンテキストグループ選択ダイアログを閉じる","aria.colorLinking":"カラーリンクの表示/非表示","aria.applyColorLinking":"カラーリンクを適用するビューを選択してください","aria.assignColorLinkingCurrentView":"現在のビューは{{name}}コンテキストグループに割り当てられています","aria.assignColorLinkingCurrentViews":"現在のビューは{{name}}コンテキストグループに割り当てられています","aria.setColorLinkingActiveView":"アクティブビューを{{name}}コンテキストグループに設定","aria.setColorLinkingActiveViews":"アクティブビューを{{name}}コンテキストグループに設定","aria.escapeLayoutDialog":"エスケープを使用して、レイアウト変更選択ダイアログを閉じる","global.supertab":"Supertab JP","global.tab":"Tab JP","bookmarks.editBookmark":"Edit Bookmark JP","bookmarks.bookmarkAdded":"Bookmark added JP","bookmarks.done":"Done JP","bookmarks.remove":"Remove JP","bookmarks.bookmarksPanel":"Bookmarks Panel JP","bookmarks.closePanel":"Close Bookmarks Panel JP","bookmarks.bookmarks":"Bookmarks JP","bookmarks.allBookmarks":"All Bookmarks JP","bookmarks.favorites":"Favorites JP","bookmarks.searchBookmarks":"Search Bookmarks JP","bookmarks.clearSearchInput":"Clear Search Input JP","bookmarks.createFolder":"Create New Folder JP","bookmarks.exitFolder":"Exit Folder JP","bookmarks.newFolder":"New Folder JP","bookmarks.namedFolder":"{{name}} Folder JP","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings JP","bookmarks.folderSettings":"{{name}} Folder Settings JP","bookmarks.noResultsFound":"No results found JP","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search JP","bookmarks.nothingToShow":"Nothing to show yet JP","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder JP","bookmarks.resultsFoundIn":"Results found in {{name}} JP","bookmarks.resultsInOtherFolders":"Results found in other folders JP","bookmarks.allResultsFoundIn":"All results found in JP","bookmarks.editName":"Edit Name JP","bookmarks.move":"Move JP","bookmarks.bookmarkAddedTitle":"Bookmark Added JP","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" JP","bookmarks.bookmarkEditedTitle":"Bookmark Edited JP","enterpriseContextMenu.saveSupertab":"Save Supertab JP","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... JP","enterpriseContextMenu.duplicate":"Duplicate JP","enterpriseContextMenu.deleteSupertab":"Delete Supertab JP","enterpriseContextMenu.newTab":"New Tab JP","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As JP","enterpriseSaveModal.renameSupertab":"Rename JP","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. JP","enterpriseSaveModal.closeTab":"Close Tab JP","enterpriseSaveModal.closeSupertab":"Close Supertab JP","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? JP","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. JP","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? JP","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. JP","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved JP","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. JP","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted JP","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. JP","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab JP","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab JP","enterpriseCommandBar.switchToSupertab":"Switch to Supertab JP","enterpriseCommandBar.goTo":"Go to {{type}} JP","enterpriseCommandBar.viewMore":"View More JP","contextMenu.quitEnterpriseBrowser":"Quit JP"}'),Un=JSON.parse('{"contextMenu.newWindow":"새 창","contextMenu.newPage":"새 페이지","contextMenu.restore":"마지막으로 저장한 변경 사항으로 복원","contextMenu.switchWorkspace":"작업 공간 전환","contextMenu.appearance":"모양","contextMenu.saveWorkspace":"작업 공간 저장","contextMenu.saveWorkspaceAs":"다른 이름으로 작업 공간 저장...","contextMenu.renameWorkspace":"작업 공간 이름 바꾸기","contextMenu.deleteWorkspace":"작업 공간 삭제","contextMenu.downloads":"다운로드","contextMenu.savePage":"페이지 저장","contextMenu.savePageAs":"다른 이름으로 페이지 저장...","contextMenu.print":"인쇄...","contextMenu.printScreen":"화면 인쇄","contextMenu.closeWindow":"창 닫기","contextMenu.openStorefront":"매장 열기","contextMenu.quitPlatform":"플랫폼 종료","contextMenu.newView":"새 뷰","contextMenu.openView":"기본 웹 브라우저로 뷰 열기","contextMenu.openViews":"기본 웹 브라우저로 뷰 열기","contextMenu.reload":"Reload KR","contextMenu.reloadView":"뷰 다시 로드","contextMenu.reloadViews":"뷰 다시 로드","contextMenu.duplicate":"Duplicate KR","contextMenu.duplicateView":"뷰 복제","contextMenu.duplicateViews":"뷰 복제","contextMenu.addView":"채널에 뷰 추가","contextMenu.addViews":"채널에 뷰 추가","contextMenu.removeView":"채널에서 뷰 제거","contextMenu.removeViews":"채널에서 뷰 제거","contextMenu.closeView":"뷰 닫기","contextMenu.closeViews":"뷰 닫기","contextMenu.closeTab":"Close Tab KR","contextMenu.duplicatePage":"페이지 복제","contextMenu.submenu.print":"인쇄","contextMenu.submenu.printAll":"모두 인쇄","saveMenu.saveWorkspaceAs":"다른 이름으로 작업 공간 저장","saveMenu.savePageAs":"다른 이름으로 페이지 저장","saveModal.enterValue":"Please enter a value KR","saveModal.alreadyExists":"{{title}}이(가) 이미 존재합니다.","saveModal.pleaseEnterValidName":"유효한 이름을 입력하십시오.","saveModal.renamePage":"페이지 이름 바꾸기","saveModal.closePage":"페이지 닫기","saveModal.discardChanges":"변경 사항 폐기","saveModal.discardAll":"모두 폐기","saveModal.saveAll":"모두 저장","saveModal.savePagesCount":"닫기 전에 페이지({{count}}개)를 저장하시겠습니까?","defaultPageTitle":"Untitled Page KR","enterpriseDefaultPageTitle":"Untitled Supertab KR","addNewPage":"새 페이지 추가","addNewTab":"새 탭 추가","addNewView":"새 뷰","restoreModal":"마지막으로 저장한 변경 사항으로 복원하시겠습니까?","modal.discardWarning":"저장하지 않은 변경 사항은 모두 폐기됩니다","modal.discardPageWarning":"이 페이지의 저장하지 않은 변경 사항은 모두 손실됩니다.","modal.saveChangesPrompt":"닫기 전에 변경 사항을 저장하시겠습니까?","modal.pageClose":"페이지 닫기","switchWorkspaceModal":"{{workspace}}(으)로 전환하시겠습니까?","switchWorkspaceModal.warning":"저장하지 않은 변경 사항은 모두 폐기됩니다","deleteWorkspaceModal":"이 작업 공간을 영구적으로 삭제하시겠습니까?","replaceWorkspaceModal.warning":"{{workspace}}(이)라는 이름의 작업 공간이 이미 존재합니다. 교체하시겠습니까?","replaceWorkspaceModal.warning.body":"같은 이름의 작업 공간이 이미 존재합니다. 교체하면 현재 내용을 덮어쓰게 됩니다.","replaceWorkspaceModal.replace":"교체","closePlatform":"플랫폼 닫기","closePlatform.workspace":"{{workspace}} 플랫폼 닫기","closePlatform.warning":"플랫폼을 닫으면 실행 중인 모든 작업 공간, 앱 또는 프로세스가 닫힙니다.","back":"뒤로 가기","forward":"앞으로 가기","reload":"새로고침","green":"녹색","purple":"보라색","orange":"오렌지색","red":"빨간색","pink":"핑크색","yellow":"노란색","theme.light":"밝은","theme.dark":"어두운","theme.system":"OS 설정과 동기화","toolbar.hideTabs":"탭 숨기기","toolbar.showTabs":"탭 표시","toolbar.lock":"잠금","toolbar.unlock":"잠금 해제","toolbar.colorLinking":"색상 연결","toolbar.changeLayout":"레이아웃 변경","toolbar.saveMenu":"저장 메뉴","toolbar.maximizeWindow":"창 최대화","toolbar.restoreWindow":"창 복원","toolbar.minimizeWindow":"창 최소화","changeLayout.fullWidth":"전체 너비","changeLayout.columns":"열","changeLayout.Rows":"행","changeLayout.Grid":"그리드","successIndicator.workspaceSwitched":"작업 공간 전환","successIndicator.hidden":"탭 숨김","successIndicator.shown":"탭 표시","successIndicator.locked":"페이지 잠금","successIndicator.unlocked":"페이지 잠금 해제됨","successIndicator.workspaceSaved":"작업 공간 저장됨","successIndicator.workspaceSavedAs":"작업 공간이 {{workspace}}(으)로 저장됨","successIndicator.workspaceRenamed":"작업 공간 이름 변경됨","successIndicator.pageSaved":"페이지 저장됨","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. KR","successIndicator.pageCopySaved":"페이지가 {{title}}(으)로 저장됨","successIndicator.pageRenamed":"페이지 이름 변경됨","successIndicator.contextGroupApplied":"컨텍스트 그룹 적용됨","successIndicator.namedContextGroupApplied":"{{colorName}} 컨텍스트 그룹 적용됨","successIndicator.viewRemoved":"컨텍스트 그룹에서 뷰 제거됨","successIndicator.viewsRemoved":"컨텍스트 그룹에서 뷰 제거됨","successIndicator.layoutApplied":"{{layoutName}} 레이아웃 적용됨","successIndicator.workspaceDeleted":"작업 공간 삭제됨","errorIndicator.pageSaveFailed":"페이지 저장 실패","errorIndicator.workspaceSaveFailed":"작업 공간 저장 실패","errorIndicator.failedToDuplicatePage":"페이지 복제 실패","infoIndicator.colorLinkAttempt":"이 탭의 색상 링크를 시도했지만 사이트/콘텐츠 소유자가 아직 활성화하지 않았습니다.","global.cancel":"취소","global.confirm":"확인","global.save":"저장","global.delete":"Delete KR","appResults.header":"Featured Content KR","recentlyClosed.header":"Recently Closed KR","landingPage.subheader":"Apps and websites selected by an admin will show here KR","aria.openBrowser":"브라우저 메뉴 열기","aria.browserTabs":"브라우저 탭","aria.viewTab":"{{title}}의 뷰 탭","aria.closePage":"{{title}}의 페이지 닫기 탭","aria.closeTab":"탭 {{title}} 닫기","aria.title":"제목","aria.closeContextGroup":"이스케이프를 사용하여 컨텍스트 그룹 선택 대화상자 닫기","aria.colorLinking":"색상 연결 표시 또는 숨기기","aria.applyColorLinking":"색상 연결을 적용하려면 뷰를 선택하십시오.","aria.assignColorLinkingCurrentView":"{{name}} 컨텍스트 그룹에 할당된 현재 뷰","aria.assignColorLinkingCurrentViews":"{{name}} 컨텍스트 그룹에 할당된 현재 뷰","aria.setColorLinkingActiveView":"활성 뷰를 {{name}} 컨텍스트 그룹으로 설정","aria.setColorLinkingActiveViews":"활성 뷰를 {{name}} 컨텍스트 그룹으로 설정","aria.escapeLayoutDialog":"이스케이프를 사용하여 레이아웃 변경 대화상자 닫기","global.supertab":"Supertab KR","global.tab":"Tab KR","bookmarks.editBookmark":"Edit Bookmark KR","bookmarks.bookmarkAdded":"Bookmark added KR","bookmarks.done":"Done KR","bookmarks.remove":"Remove KR","bookmarks.bookmarksPanel":"Bookmarks Panel KR","bookmarks.closePanel":"Close Bookmarks Panel KR","bookmarks.bookmarks":"Bookmarks KR","bookmarks.allBookmarks":"All Bookmarks KR","bookmarks.favorites":"Favorites KR","bookmarks.searchBookmarks":"Search Bookmarks KR","bookmarks.clearSearchInput":"Clear Search Input KR","bookmarks.createFolder":"Create New Folder KR","bookmarks.exitFolder":"Exit Folder KR","bookmarks.newFolder":"New Folder KR","bookmarks.namedFolder":"{{name}} Folder KR","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings KR","bookmarks.folderSettings":"{{name}} Folder Settings KR","bookmarks.noResultsFound":"No results found KR","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search KR","bookmarks.nothingToShow":"Nothing to show yet KR","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder KR","bookmarks.resultsFoundIn":"Results found in {{name}} KR","bookmarks.resultsInOtherFolders":"Results found in other folders KR","bookmarks.allResultsFoundIn":"All results found in KR","bookmarks.editName":"Edit Name KR","bookmarks.move":"Move KR","bookmarks.bookmarkAddedTitle":"Bookmark Added KR","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" KR","bookmarks.bookmarkEditedTitle":"Bookmark Edited KR","enterpriseContextMenu.saveSupertab":"Save Supertab KR","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... KR","enterpriseContextMenu.duplicate":"Duplicate KR","enterpriseContextMenu.deleteSupertab":"Delete Supertab KR","enterpriseContextMenu.newTab":"New Tab KR","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As KR","enterpriseSaveModal.renameSupertab":"Rename KR","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. KR","enterpriseSaveModal.closeTab":"Close Tab KR","enterpriseSaveModal.closeSupertab":"Close Supertab KR","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? KR","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. KR","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? KR","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. KR","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved KR","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved. KR","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted KR","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. KR","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab KR","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab KR","enterpriseCommandBar.switchToSupertab":"Switch to Supertab KR","enterpriseCommandBar.goTo":"Go to {{type}} KR","enterpriseCommandBar.viewMore":"View More KR","contextMenu.quitEnterpriseBrowser":"Quit KR"}'),jn=JSON.parse('{"contextMenu.newWindow":"Новое окно","contextMenu.newPage":"Новая страница","contextMenu.restore":"Восстановить последние сохраненные изменения","contextMenu.switchWorkspace":"Переключить рабочую область","contextMenu.appearance":"Внешний вид","contextMenu.saveWorkspace":"Сохранить рабочую область","contextMenu.saveWorkspaceAs":"Сохранить рабочую область как...","contextMenu.renameWorkspace":"Переименовать рабочую область","contextMenu.deleteWorkspace":"Удалить рабочую область","contextMenu.downloads":"Загрузки","contextMenu.savePage":"Сохранить страницу","contextMenu.savePageAs":"Сохранить страницу как...","contextMenu.print":"Печать...","contextMenu.printScreen":"Распечатать экран","contextMenu.closeWindow":"Закрыть окно","contextMenu.openStorefront":"Открыть Storefront","contextMenu.quitPlatform":"Выйти из платформы","contextMenu.newView":"Новое представление","contextMenu.openView":"Открыть представление с помощью веб-браузера по умолчанию","contextMenu.openViews":"Открыть представления с помощью веб-браузера по умолчанию","contextMenu.reload":"Reload RU","contextMenu.reloadView":"Перезагрузить представление","contextMenu.reloadViews":"Перезагрузить представления","contextMenu.duplicate":"Duplicate RU","contextMenu.duplicateView":"Дублировать представление","contextMenu.duplicateViews":"Дублировать представления","contextMenu.addView":"Добавить представление на канал","contextMenu.addViews":"Добавить представления на канал","contextMenu.removeView":"Удалить представление из канала","contextMenu.removeViews":"Удалить представления из канала","contextMenu.closeView":"Закрыть представление","contextMenu.closeViews":"Закрыть представления","contextMenu.closeTab":"Close Tab RU","contextMenu.duplicatePage":"Дублировать страницу","contextMenu.submenu.print":"Печатать","contextMenu.submenu.printAll":"Печатать все","saveMenu.saveWorkspaceAs":"Сохранить рабочую область как","saveMenu.savePageAs":"Сохранить страницу как","saveModal.enterValue":"Please enter a value RU","saveModal.alreadyExists":"{{title}} уже существует.","saveModal.pleaseEnterValidName":"Введите подходящее имя","saveModal.renamePage":"Переименовать страницу","saveModal.closePage":"Закрыть страницу","saveModal.discardChanges":"Отменить изменения","saveModal.discardAll":"Отменить все","saveModal.saveAll":"Сохранить все","saveModal.savePagesCount":"Сохранить ({{count}}) страниц перед закрытием?","defaultPageTitle":"Untitled Page RU","enterpriseDefaultPageTitle":"Untitled Supertab RU","addNewPage":"Добавить новую страницу","addNewTab":"Добавить новую вкладку","addNewView":"Новое представление","restoreModal":"Вы уверены, что хотите восстановить последние сохраненные изменения?","modal.discardWarning":"Все несохраненные изменения будут отменены","modal.discardPageWarning":"Все несохраненные изменения на этой странице будут потеряны.","modal.saveChangesPrompt":"Сохранить изменения перед закрытием?","modal.pageClose":"Закрыть страницу","switchWorkspaceModal":"Вы уверены, что хотите перейти в {{workspace}}?","switchWorkspaceModal.warning":"Все несохраненные изменения будут отменены","deleteWorkspaceModal":"Вы уверены, что хотите навсегда удалить эту рабочую область?","replaceWorkspaceModal.warning":"Рабочая область с именем {{workspace}} уже существует. Вы хотите заменить ее?","replaceWorkspaceModal.warning.body":"Рабочая область с таким же именем уже существует. При ее замене текущее содержимое будет перезаписано.","replaceWorkspaceModal.replace":"Заменить","closePlatform":"Закрыть платформу","closePlatform.workspace":"Закрыть платформу {{workspace}}","closePlatform.warning":"Закрытие платформы приведет к закрытию всех рабочих областей, приложений и запущенных процессов.","back":"Назад","forward":"Вперед","reload":"Перезагрузить ","green":"Зеленый","purple":"Фиолетовый","orange":"Оранжевый","red":"Красный","pink":"Розовый","yellow":"Желтый","theme.light":"Светлый","theme.dark":"Темный","theme.system":"Синхронизировать с настройками ОС","toolbar.hideTabs":"Скрыть вкладки","toolbar.showTabs":"Показать вкладки","toolbar.lock":"Заблокировать","toolbar.unlock":"Разблокировать","toolbar.colorLinking":"Привязка к цвету","toolbar.changeLayout":"Изменить макет","toolbar.saveMenu":"Меню сохранения","toolbar.maximizeWindow":"Увеличить окно","toolbar.restoreWindow":"Восстановить окно","toolbar.minimizeWindow":"Свернуть окно","changeLayout.fullWidth":"Полная ширина","changeLayout.columns":"Столбцы","changeLayout.Rows":"Строки","changeLayout.Grid":"Сетка","successIndicator.workspaceSwitched":"Рабочая область переключена","successIndicator.hidden":"Вкладки скрыты","successIndicator.shown":"Вкладки показаны","successIndicator.locked":"Страница заблокирована","successIndicator.unlocked":"Страница разблокирована","successIndicator.workspaceSaved":"Рабочая область сохранена","successIndicator.workspaceSavedAs":"Рабочая область сохранена как {{workspace}}","successIndicator.workspaceRenamed":"Рабочая область переименована","successIndicator.pageSaved":"Страница сохранена","successIndicator.pageHasBeenSaved":"\\"{{title}}\\" has been saved. RU","successIndicator.pageCopySaved":"Страница сохранена как {{title}}","successIndicator.pageRenamed":"Страница переименована","successIndicator.contextGroupApplied":"Контекстная группа применена","successIndicator.namedContextGroupApplied":"Контекстная группа {{colorName}} применена","successIndicator.viewRemoved":"Представление удалено из контекстной группы","successIndicator.viewsRemoved":"Представления удалены из контекстной группы","successIndicator.layoutApplied":"Макет {{layoutName}} применен","successIndicator.workspaceDeleted":"Рабочая область удалена","errorIndicator.pageSaveFailed":"Не удалось сохранить страницу","errorIndicator.workspaceSaveFailed":"Не удалось сохранить рабочую область","errorIndicator.failedToDuplicatePage":"Не удалось продублировать страницу","infoIndicator.colorLinkAttempt":"Мы попытались привязать цвет к этой вкладке, но владелец сайта/контента еще не включил эту возможность","global.cancel":"Отменить","global.confirm":"Подтвердить","global.save":"Сохранить","global.delete":"Delete RU","appResults.header":"Featured Content RU","recentlyClosed.header":"Recently Closed RU","landingPage.subheader":"Apps and websites selected by an admin will show here RU","aria.openBrowser":"Открыть меню браузера","aria.browserTabs":"Вкладки браузера","aria.viewTab":"Вкладка представления {{title}}","aria.closePage":"Кнопка «Закрыть» на вкладке для страницы {{title}}","aria.closeTab":"Закрыть вкладку {{title}}","aria.title":"Название","aria.closeContextGroup":"Чтобы закрыть диалог выбора контекстной группы, используйте escape","aria.colorLinking":"Показать или скрыть привязку к цвету","aria.applyColorLinking":"Выберите представление, чтобы применить привязку к цвету","aria.assignColorLinkingCurrentView":"Текущее представление, назначенное контекстной группе {{name}}","aria.assignColorLinkingCurrentViews":"Текущие представления, назначенные контекстной группе {{name}}","aria.setColorLinkingActiveView":"Установить активное представление в контекстную группу {{name}}","aria.setColorLinkingActiveViews":"Установить активные представления в контекстную группу {{name}}","aria.escapeLayoutDialog":"Чтобы закрыть диалог изменения макета, используйте escape","global.supertab":"Supertab RU","global.tab":"Tab RU","bookmarks.editBookmark":"Edit Bookmark RU","bookmarks.bookmarkAdded":"Bookmark added RU","bookmarks.done":"Done RU","bookmarks.remove":"Remove RU","bookmarks.bookmarksPanel":"Bookmarks Panel RU","bookmarks.closePanel":"Close Bookmarks Panel RU","bookmarks.bookmarks":"Bookmarks RU","bookmarks.allBookmarks":"All Bookmarks RU","bookmarks.favorites":"Favorites RU","bookmarks.searchBookmarks":"Search Bookmarks RU","bookmarks.clearSearchInput":"Clear Search Input RU","bookmarks.createFolder":"Create New Folder RU","bookmarks.exitFolder":"Exit Folder RU","bookmarks.newFolder":"New Folder RU","bookmarks.namedFolder":"{{name}} Folder RU","bookmarks.bookmarkSettings":"{{name}} Bookmark Settings RU","bookmarks.folderSettings":"{{name}} Folder Settings RU","bookmarks.noResultsFound":"No results found RU","bookmarks.noResultsFoundSubtext":"There are no bookmarks that match your search RU","bookmarks.nothingToShow":"Nothing to show yet RU","bookmarks.nothingToShowSubtext":"Add a bookmark to this folder RU","bookmarks.resultsFoundIn":"Results found in {{name}} RU","bookmarks.resultsInOtherFolders":"Results found in other folders RU","bookmarks.allResultsFoundIn":"All results found in RU","bookmarks.editName":"Edit Name RU","bookmarks.move":"Move RU","bookmarks.bookmarkAddedTitle":"Bookmark Added RU","bookmarks.bookmarkAddedToFolder":"Your bookmark was added to \\"{{folderName}}\\" RU","bookmarks.bookmarkEditedTitle":"Bookmark Edited RU","enterpriseContextMenu.saveSupertab":"Save Supertab RU","enterpriseContextMenu.saveSupertabAs":"Save Supertab As... RU","enterpriseContextMenu.duplicate":"Duplicate RU","enterpriseContextMenu.deleteSupertab":"Delete Supertab RU","enterpriseContextMenu.newTab":"New Tab RU","enterpriseSaveMenu.saveSupertabAs":"Save Supertab As RU","enterpriseSaveModal.renameSupertab":"Rename RU","enterpriseSaveModal.unsavedChanges":"You have unsaved changes in this Tab. RU","enterpriseSaveModal.closeTab":"Close Tab RU","enterpriseSaveModal.closeSupertab":"Close Supertab RU","enterpriseSaveModal.saveSupertabCount":"Save {{count}} Supertabs before closing? RU","enterpriseModal.discardSupertabWarning":"Any unsaved changes to this Supertab will be lost. RU","enterpriseDeleteModal.deleteSupertab":"Delete the \\"{{title}}\\" Supertab? RU","enterpriseDeleteModal.deleteSupertabWarning":"Are you sure you want to delete this Supertab? This action cannot be undone and is permanent. RU","enterpriseSuccessIndicator.supertabSaved":"Supertab Saved RU","enterpriseSuccessIndicator.supertabHasBeenSaved":"\\"{{title}}\\" Supertab has been saved.RU","enterpriseSuccessIndicator.supertabDeleted":"Supertab Deleted RU","enterpriseSuccessIndicator.supertabHasBeenDeleted":"\\"{{title}}\\" Supertab has been deleted. RU","enterpriseErrorIndicator.failedToDuplicateTab":"Failed to duplicate Tab RU","enterpriseErrorIndicator.failedToDuplicateSupertab":"Failed to duplicate Supertab RU","enterpriseCommandBar.switchToSupertab":"Switch to Supertab RU","enterpriseCommandBar.goTo":"Go to {{type}} RU","enterpriseCommandBar.viewMore":"View More RU","contextMenu.quitEnterpriseBrowser":"Quit RU"}'),Vn=Bn().t,zn=async e=>{const t=await $t(e);return await t.dispatch(Ht.GetPages)},Gn=async e=>(await $t(e.identity)).dispatch(Ht.UpdatePageForWindow,e);let Hn=!1;async function qn(e,t){const n=!!t;let r=new Set;if(n){const{identity:e,pageId:n}=t,a=kn().Browser.wrapSync(e),o=await a.getPage(n);o?.panels&&(r=new Set(o.panels.map(({viewOptions:e})=>e.name)))}return e.map(e=>{const t=e.viewOptions.name,a=t?.startsWith(Pn);a&&(!n||n&&!r.has(t))&&delete e.viewOptions.name;const o=(i=e.viewOptions,i.name||=`${Pn}${xt()}`,i);var i;return{...e,viewOptions:{...o,uuid:he.uuid}}})}async function Kn(e){for(const t of e)t.panels&&await Yn(t.panels)}const Jn=e=>null!==e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&/ERR_([A-Z]+_*)+/.test(e.message);async function Yn(e){const t=e.map(e=>fin.Platform.getCurrentSync().createView(e.viewOptions,fin.me.identity).catch(e=>{if(!Jn(e))throw e;console.error(e)}));return await Promise.all(t)}const Zn=(e,t)=>!t.find(t=>t===e),Qn=(e,t)=>`${e} (${t})`,Xn=(e,t)=>{if(Zn(e,t))return e;let n=1;const r=e.replace(/ *\(\d+\)$/,"");for(;!Zn(Qn(r,n),t);)n+=1;return Qn(r,n)},er=async()=>{const e=await ye();return(await Promise.all(e.map(async e=>{try{return zn(e.identity)}catch(t){JSON.stringify(e.identity);const n=await e.getOptions();return n.workspacePlatform?.pages||[]}}))).reduce((e,t)=>e.concat(t),[])},tr=async()=>(await st(he)).dispatch(at.GetSavedPages,void 0),nr=async e=>(await st(he)).dispatch(at.GetSavedPage,e),rr=async(e,t)=>{const n=await(async e=>(await er()).find(t=>t.pageId===e))(e);return!n||n.title===t.title&&e===t.pageId||await Gn({identity:n.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),n},ar=async({page:e})=>{await rr(e.pageId,e),await(async e=>(await st(he)).dispatch(at.CreateSavedPage,e))({page:e})},or=async e=>{await nr(e)&&await(async e=>(await st(he)).dispatch(at.DeleteSavedPage,e))(e)},ir=async({pageId:e,page:t})=>(await rr(e,t),await(async e=>(await st(he)).dispatch(at.UpdateSavedPage,e))({pageId:e,page:t})),sr=async e=>await nr(e.pageId)?ir({pageId:e.pageId,page:e}):ar({page:e}),cr=async e=>{const t={...e.page,panels:e.page.panels&&await qn(e.page.panels,e)};t.panels&&await Yn(t.panels),await Gn({...e,page:t})},lr=async e=>{await(async e=>(await $t(e.identity)).dispatch(Ht.DetachPagesFromWindow,e))(e)},ur=async e=>{await(async e=>(await $t(e.identity)).dispatch(Ht.SetActivePageForWindow,e))(e)},dr=e=>zn(e),pr=async({identity:e,pageId:t})=>(await dr(e)).find(e=>e.pageId===t),fr=async e=>{await(async e=>(await $t(e.identity)).dispatch(Ht.ReorderPagesForWindow,e))(e)},hr=new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise(e=>{this.locked?this.queue.push(e):(this.locked=!0,e())})}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};async function gr(e){await hr.lock();try{const t=Vn(Hn?"enterpriseDefaultPageTitle":"defaultPageTitle"),n=e??t,[r,a]=await Promise.all([tr(),er()]),o=[...r,...a].map(({title:e})=>e);return Xn(n,o)}finally{hr.unlock()}}async function mr({page:e}){return{shouldShowModal:!(!e||!e.hasUnsavedChanges)}}async function wr({page:e,identity:t}){const n=fin.Application.getCurrentSync();if((await n.getInfo()).initialOptions.enableBeforeUnload){const n=await fin.Application.getCurrentSync().getViews(),r=En(e.layout.content).filter(e=>e.name&&n.some(t=>t.identity.name===e.name)).map(e=>fin.View.wrapSync({name:e.name,uuid:t.uuid})),a=await this.checkViewsForPreventUnload(r);if(a.viewsPreventingUnload.length>0&&(await this.getUserDecisionForBeforeUnload({...a,windowId:t,windowShouldClose:!1,closeType:"page"})).viewsToClose.length!==r.length)return e.pageId,{shouldPageClose:!1}}return{shouldPageClose:!0}}async function yr({pages:e,identity:t}){const n=await Promise.all(e.map(e=>this.shouldPageClose({page:e,closeType:"window",identity:t}))),{pagesPreventingClose:r,pagesNotPreventingClose:a}=e.reduce((e,t,r)=>n[r].shouldPageClose?{pagesPreventingClose:e.pagesPreventingClose,pagesNotPreventingClose:[...e.pagesNotPreventingClose,t]}:{pagesNotPreventingClose:e.pagesNotPreventingClose,pagesPreventingClose:[...e.pagesPreventingClose,t]},{pagesPreventingClose:[],pagesNotPreventingClose:[]});return this.handlePagesAndWindowClose({pagesNotPreventingClose:a,pagesPreventingClose:r,identity:t})}async function vr({pagesPreventingClose:e,pagesNotPreventingClose:t,identity:n}){return{shouldWindowClose:0===e.length}}async function br({page:e}){return Dt(e)}async function kr(e){return{hasUnsavedChanges:!0}}const Sr=async()=>{const e=kn(),t=(await ye()).map(t=>e.Browser.wrapSync(t.identity));await Promise.all(t.map(async e=>{const t=await e.getPages();await Promise.all(t.map(async t=>{t.title,await e.updatePage({pageId:t.pageId,page:{hasUnsavedChanges:!1}}),t.pageId,t.title,await sr({...t,hasUnsavedChanges:!1})}))}))},Cr=new Map,Pr=e=>Cr.delete(e);let xr,_r,Ir,Ar=!1;const Er=async()=>(void 0===Ir&&(Ir=!!(await Q()).disableOpenFinAnalytics),Ir);async function Tr(e){e.forEach(e=>{var t,n;"Page"===e.type?"Open Page"===e.action?(t=e.data.uuid,n=e,Cr.set(t,n)):"Close Page"===e.action&&Pr(e.data.uuid):"Store"===e.source&&"Close"!==e.action&&(Ar||(Ar=!0,fin.Window.wrapSync(ge).once("closed",()=>{Ar=!1,(async e=>{await Ue($e(e),{source:"Store",type:"Navigation",action:"Close Store",skipValueHashing:!0})})(fin.me.identity)})))}),await(async e=>{xr?.sendToOpenFin&&(await Er()||e.forEach(async e=>{const t=kt({},e);t.entityId&&(t.entityId.uuid=await vt(t.entityId.uuid),t.entityId.name=await vt(t.entityId.name)),!e.skipValueHashing&&"value"in t&&(t.value=await vt(t.value)),_r(t)}))})(e);const t=e.map(({skipValueHashing:e,...t})=>t);this.handleAnalytics(t)}const Mr=Ce({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1}),Rr=function(e=Mr){const t=new Map;return async(n,r,a,o,i)=>{if(t.has(n)){const{currentUrl:e,currentName:a}=t.get(n);if(e===r)return;const o=fin.Window.wrapSync({uuid:fin.me.uuid,name:a});await o.close()}const s=`${de.HomeInternal}-${Date.now()}${Math.random()}`;t.set(n,{currentUrl:r,currentName:s});const c=`New ${o} indicator: ${a} ${i}`,l=await fin.Platform.getCurrentSync().createWindow({...e,name:s,url:r});(e=>{const t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(t),document.body.appendChild(t),setTimeout(()=>{t.innerHTML=e},300),setTimeout(()=>{document.body.removeChild(t)},1e3)})(c),l.once("closed",()=>{t.delete(n)})}}();async function Or(e,t,n,r,a,o){if(n&&fin.me.name!==n){const i={type:e,message:t,parentBrowserName:n,secondaryMessage:r,icon:a,isEnterprise:o};return(await $t({uuid:fin.me.uuid,name:n})).dispatch(Ht.ShowBrowserIndicator,i)}const i=new URLSearchParams;if(i.append("type",e),i.append("message",t),i.append("parentName",n||""),i.append("secondaryMessage",r||""),i.append("icon",a||""),i.append("isEnterprise",`${o}`||""),n){const e=fe(n?{uuid:O,name:n}:void 0),t=`${(s=await e.getBounds()).top},${s.left},${s.height},${s.width},${s.bottom},${s.right},${s.content.top},${s.content.left},${s.content.height},${s.content.width}`;i.append("parentBounds",t)}var s;const c=`${(o?await re():await ne())+H.BrowserIndicator}#${i.toString()}`;return Rr("browser"+n,c,t,e,r)}async function Dr(e,t,n,r){const a=await Ie(t);return Or("success",e,t.name,n,r,a)}const Br=async(e=he)=>{const{workspacePlatform:t}=await fe(e).getOptions(),n=t?.newPageUrl,r=t?.newTabUrl;return{newPageUrl:n,newTabUrl:r}},Wr=async(e=he)=>{const t=await Ie(e)||Hn,n=await kn().Browser.getUniquePageTitle();let r;if(e&&await we(e))r=await(async(e,t=he)=>{const{newPageUrl:n}=await Br(t);if(!n)throw new Error("Trying to create a new page without a newPageUrl set");return Tn(e,n,t)})(n,e);else if(t){const e=await ae();r=await Tn(n,e)}t&&(r.settings=r.settings??{},r.dimensions=r.dimensions??{},r.settings.hasHeaders=!1,r.settings.reorderEnabled=!0,r.dimensions.headerHeight=0);const a=await Ot(n,r);return t&&(a.hasUnsavedChanges=!1),a};var Fr;function Nr(e,t){return async(n,...r)=>{e.has(n)&&e.get(n).forEach(e=>e(...r)),t&&await t({event:n,payload:r})}}function Lr(e,t){return t&&t(t=>{const{event:n,payload:r}=t;e.has(n)&&e.get(n).forEach(e=>e(...r))}),(t,n)=>{e.has(t)||e.set(t,new Set),e.get(t).add(n)}}function $r(e){return(t,n)=>{e.has(t)||e.set(t,new Set);const r=e.get(t),a=(...e)=>{n(...e),r.delete(a)};r.add(a)}}function Ur(e){return(t,n)=>{e.has(t)&&e.get(t).delete(n)}}!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(Fr||(Fr={}));const jr={name:de.BrowserMenu,alwaysOnTop:!0,autoShow:!0,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!1,saveWindowState:!1};function Vr(e){const t={...jr,...e};return t.url=function(e){if(!T)throw new Error("resolveAbsolutePath can only be used in a window");const t=window.location;if(/^(?:[a-z]+:)?\/\//i.test(e))return e;const n=`${t.protocol}//${t.hostname}`;return new URL(e,n).href}(t.url??""),t}const zr=function(e){const t=new Map;return{emit:Nr(t,t=>E&&fin.InterApplicationBus.publish(e,t)),addListener:Lr(t,t=>E&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t)),addListenerWithUUID:n=>Lr(t,t=>E&&fin.InterApplicationBus.subscribe({uuid:n},e,t)),removeListener:Ur(t),once:$r(t)}}("window.menu"),Gr=(e,t)=>fin.Window.wrapSync(e).updateOptions({opacity:t}),Hr=e=>zr.emit("response",e),qr=Te(()=>ue().getChildWindows(),500),Kr=new Map;async function Jr(e,t){const n=Vr(e),r={top:n.top,left:n.left,width:n.defaultWidth||n.width,height:n.defaultHeight||n.height};return t.set("parentName",fin.Window.getCurrentSync().identity.name),{name:n.name,bounds:r,route:`${n.url}#${t.toString()}`}}const Yr=async({options:e,content:t,parameters:n})=>{const r=n??new URLSearchParams;r.set("content",JSON.stringify({...t,invocationId:xt()}));const a={...e,name:`${e.name}--${e.modalParentIdentity?.name??""}`};return await async function({options:e,parameters:t}){const n=t??new URLSearchParams,r=Vr(e),{name:a,modalParentIdentity:o}=r;if(!n.has("isEnterprise")){const e=`${await(async e=>(Ee||(Ee=await Ie(e)),Ee))(o)}`;n.set("isEnterprise",e)}let i=await async function(e){return(await qr()).find(t=>t.identity.name===e)}(a);if(i)await async function(e,t){const{name:n,bounds:r,route:a}=await Jr(e,t),o={uuid:fin.me.identity.uuid,name:n},i=fin.Window.wrapSync(o);await Promise.all([Gr(o,0),i.setBounds(r)]),i.once("blurred",()=>{Gr(o,0),i.hide(),Hr({name:o.name,data:{actionName:"Cancel"}})}),zr.emit("update",n,r,a),await Hr({name:n,data:{actionName:"Cancel"}})}(r,n);else{const{route:t,bounds:a}=await Jr(e,n);i=await async function(e,t,n){const r=Vr(e),a=await gt(fin.me.identity),o=await mt(fin.me.identity)===m.Dark,i=a?.theme;return r.backgroundColor=i?.[o?m.Dark:m.Light]?.palette?.inputBackground||r.backgroundColor,Kr.has(r.name)?Kr.get(r.name):new Promise(e=>{zr.once("ready",async t=>{if(t.name===r.name){const n=await Kr.get(r.name);n.once("blurred",async()=>{if(Gr(t,0),n.hide(),Hr({name:r.name,data:{actionName:"Cancel"}}),n.identity.name===de.BrowserSaveMenu){const e=await n.getOptions();"submitting"!==e.customContext&&"error"!==e.customContext&&n.close()}else n.identity.name.startsWith(de.BrowserMenu)&&n.close()}),setTimeout(async()=>{await Gr(t,1),1!==(await fin.Window.wrapSync(t).getOptions()).opacity&&Gr(t,1)}),e(n)}});const a=(async()=>{const e=await fin.Platform.getCurrentSync().createWindow(Ce({...r,opacity:0,url:t||r.url,defaultLeft:n?.left,defaultTop:n?.top,defaultWidth:n?.width,defaultHeight:n?.height},!0));return e.once("closed",()=>{Kr.delete(r.name)}),e})();Kr.set(r.name,a)})}({...r},t,a)}return i}({options:a,parameters:r}),new Promise(e=>{zr.once("response",async t=>{t.name===a.name&&e({data:t.data})})})},Zr=async(e,t,n)=>{const{windowOptions:r,content:a}=await(async(e,t,n)=>{const r=await Ie(e);return{title:"Platform Quit",windowOptions:{url:await oe(r,!1)+H.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:n?void 0:e},content:{title:Vn("Platform"===t?"closePlatform":"closePlatform.workspace",{workspace:t}),body:Vn("closePlatform.warning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t,n),o=await Be(r,e,n),i={...r,top:o.top,left:o.left};return"Confirm"===(await Yr({options:i,content:a})).data.actionName};async function Qr({options:e,...t}){if(!e?.skipPrompt&&!await(async(e,t,n)=>{const{windowOptions:r,content:a}=await(async(e,t)=>{const n=await Ie(t);return{title:"Switch Workspace",windowOptions:{url:await oe(n,!1)+H.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:t},content:{title:Vn("switchWorkspaceModal",{workspace:e}),body:Vn("switchWorkspaceModal.warning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(t,n?void 0:e),o=await Be(r,e,n),i={...r,top:o.top,left:o.left};return"Confirm"===(await Yr({options:i,content:a})).data.actionName})(e?.promptContainerWindowIdentity,t.title,e?.shouldCenterModalOnMonitor))return!1;const n=kn();return await n.applySnapshot(t.snapshot,{...e?.applySnapshotOptions??{},closeExistingWindows:e?.applySnapshotOptions?.closeExistingWindows??!0}),ta(t),Or("success",Vn("successIndicator.workspaceSwitched")).catch(console.warn),!0}async function Xr(e){try{return await Qr(e)}catch(e){return console.error("failed to apply the current workspace: ",e),!1}}async function ea(e){try{const t=await async function(){const e=kn(),t=await e.getCurrentWorkspace();return(await e.Storage.getWorkspaces()).find(e=>e.workspaceId===t.workspaceId)}();return t?e?.skipPrompt||await(async e=>{const{windowOptions:t,content:n}=await(async e=>{const t=await Ie(e);return{title:"Restore Changes",windowOptions:{url:await oe(t,!1)+H.ResponseModal,name:de.BrowserMenu,defaultHeight:134,defaultWidth:410,modalParentIdentity:e},content:{title:Vn("restoreModal"),body:Vn("modal.discardWarning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e),r=await Be(t,t.modalParentIdentity),a={...t,top:r.top,left:r.left};return"Confirm"===(await Yr({options:a,content:n})).data.actionName})(e?.promptContainerWindowIdentity)?(await Qr({options:{skipPrompt:!0,applySnapshotOptions:e?.applySnapshotOptions},...t}),"success"):"user-declined":"not-saved-workspace"}catch(e){throw console.error("failed to restore last saved workspace: ",e),e}}function ta(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);Xt(_t.CurrentWorkspaceId,t)}catch(e){console.error("failed to set the active workspace: ",e)}}async function na(){const e=kn(),t=await e.getSnapshot();return{workspaceId:xt(),title:await ia(),metadata:{APIVersion:U},snapshot:t}}async function ra(){if("undefined"==typeof localStorage)return na();const e=en(_t.CurrentWorkspaceId);if(!e)return na();const t=JSON.parse(e),n=kn(),r=await n.getSnapshot();return{...t,metadata:{APIVersion:U},snapshot:r}}const aa=async()=>(await st(he)).dispatch(at.GetSavedWorkspaces,void 0),oa=async e=>await(async e=>(await st(he)).dispatch(at.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await st(he)).dispatch(at.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await st(he)).dispatch(at.CreateSavedWorkspace,e))({workspace:e});async function ia(e="Untitled Workspace"){const t=(await aa()).map(({title:e})=>e);return Xn(e,t)}const sa=async e=>{const t=kn(),n=await t.getCurrentWorkspace(),r=await t.Storage.getWorkspaces(),a=n.workspaceId;if(r.some(e=>e.workspaceId===a))await(async(e,t)=>{const n=t??kn();await n.Storage.saveWorkspace((e=>({...e,snapshot:{...e.snapshot,windows:e.snapshot.windows.map(e=>({...e,workspacePlatform:{...e.workspacePlatform,pages:e.workspacePlatform?.pages?.map(e=>({...e,hasUnsavedChanges:!1}))}}))}}))(e)),await(async()=>(await st(he)).dispatch(at.MarkUnsavedPagesAsSavedInternal,void 0))()})(n,t),await t.setActiveWorkspace(n),await Dr(Vn("successIndicator.workspaceSaved"),e);else{const n=t.Browser.wrapSync(e);await n._openSaveModal({menuType:I.SAVE_WORKSPACE})}},ca=e=>{kn().Browser.wrapSync(e)._openSaveModal({menuType:I.SAVE_WORKSPACE_AS})},la=async e=>{const t=kn().Browser.wrapSync(e),{newPageUrl:n}=await Br(),r=await Wr(e),a=n||void 0;await t._addDefaultPage({identity:e,page:r,newPageUrl:a})},ua=async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await kn().Storage.getPages(),a=(await n.getPages()).find(e=>t?e.pageId===t:e.isActive),o=r.some(e=>a.pageId===e.pageId),i=await Ie(e);if(o)try{await kn().Storage.savePage((s=a,{...s,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0,layout:An(s.layout)})),await n.updatePage({pageId:a.pageId,page:{hasUnsavedChanges:!1}}),Dr(Vn(i?"enterpriseSuccessIndicator.supertabSaved":"successIndicator.pageSaved"),e,Vn(i?"enterpriseSuccessIndicator.supertabHasBeenSaved":"successIndicator.pageHasBeenSaved",{title:a.title}))}catch{Or("error",Vn("errorIndicator.pageSaveFailed"),a.parentIdentity.name,void 0)}else n._openSaveModal({id:a.pageId,menuType:I.SAVE_PAGE});var s},da=async(e,t)=>{const n=kn().Browser.wrapSync(e),r=(await n.getPages()).find(e=>t?e.pageId===t:e.isActive);n._openSaveModal({id:r.pageId,menuType:I.SAVE_PAGE_AS}),je({type:"Page Modal",action:"Select Save As",value:r.title,skipValueHashing:!0})},pa={title:"Downloads",pageId:"downloads-page-id",layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{name:"show-download-view",url:"chrome://downloads/"}}]}]}},fa=async e=>{const t=fe(e),n=await t.getCurrentViews(),r=(await kn().Browser.wrapSync(t.identity).getPages()).find(e=>e.isActive);try{const t=(await Promise.all(n.map(async e=>({identity:e.identity,info:await fin.View.wrapSync(e.identity).getInfo()})))).find(e=>"chrome://downloads/"===e.info.url);if(t)await fin.View.wrapSync(t.identity).focus();else{const t=kn();if(r?.isLocked){const e=(await fin.Application.getCurrentSync().getChildWindows()).find(e=>"show-download-window"===e.identity.name);return void(e?await e.focus():t.Browser.createWindow({name:"show-download-window",workspacePlatform:{pages:[pa]}}))}(await kn().createView({name:"show-download-view",url:"chrome://downloads/",target:e},e)).focus()}}catch(e){console.error("Couldn't open downloads view",e)}},ha=async e=>{const t=e.map(e=>fin.View.wrapSync(e).print());await Promise.all(t)},ga=e=>{const[t,n,r]=e.split(".").map(e=>"x"===e?0:1);return 100*t+10*n+1*r};class ma extends Error{}function wa(){return Bn().language}const ya=async e=>{ba(e),(e=>{Bn().changeLanguage(e)})(e),await(async e=>{const t=await ye();return Promise.all(t.map(async t=>{const n=await $t(t.identity);await n.dispatch(Ht.SetSelectedLanguage,e)}))})(e)};function va(){if(!Bn().options.resources)throw new Error("No language resources found");return{currentLanguage:wa(),resources:Bn().options.resources}}function ba(e){if(!_.includes(e))throw new Error(`The ISO language provided ${e} is not supported`)}const ka=["green","purple","orange","red","pink","yellow"],Sa="CONTEXT_GROUP_PAGE",Ca=()=>e=>class extends e{getContextGroups(){return super.getContextGroups().map(e=>ka.includes(e.displayMetadata?.name)?{...e,displayMetadata:{...e.displayMetadata,name:Vn(e.displayMetadata?.name)}}:e)}},Pa=()=>{const e=new Set;return t=>class extends t{constructor(){super(),this.onClientConnected=e=>{e.name.startsWith("internal-generated-view")&&this.joinContextGroup({contextGroupId:Sa,target:e},{uuid:this.fin.me.uuid,name:this.fin.me.name})};const e=this.interopClients.set;this.interopClients.set=(t,n)=>{e.call(this.interopClients,t,n),this.onClientConnected(n.clientIdentity)}}async joinContextGroup({contextGroupId:t,target:n},r){if(t!==Sa)return super.joinContextGroup({contextGroupId:t,target:n},r);try{const t=(await kn().Browser.getPageByViewIdentity(n)).page.layoutName;if(!t)throw new Error("View does not belong to a page");if(!e.has(t)&&(e.add(t),!this.contextGroupsById.has(t))){const e=new Map;this.contextGroupsById.set(t,e)}await super.joinContextGroup({contextGroupId:t,target:n},r),n.name}catch(e){JSON.stringify(n),e.stack}}getContextGroups(){return Array.from(e).map(e=>({id:e,displayMetadata:{}}))}setContextForGroup(e,t){if(!this.contextGroupsById.has(t)){const e=new Map;this.contextGroupsById.set(t,e)}return super.setContextForGroup(e,t)}}},xa=(e,t)=>{const n=(e=>Ae(e)?Pa():Ca())(t);try{return"function"==typeof e?t=>e(n(t)):Array.isArray(e)?[...e,n]:e=>new(n(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}},_a=new Map;async function Ia(){if("undefined"!=typeof localStorage)try{const e=en(_t.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await ve(t))return t}catch(e){throw new Error(`failed to get last focused browser window: ${e}`)}}async function Aa(e=fin.me.identity){await we(e)&&(_a.delete(e.name),_a.set(e.name,e),function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);Xt(_t.LastFocusedBrowserWindow,t)}catch(e){console.error("failed to save last focused browser window: ",e)}}(e))}async function Ea(e=fin.me.identity){_a.delete(e.name)}const Ta=Pt()(async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,n=!1;for(const r of e)if(r.identity.name===de.BrowserMenu||r.identity.name===de.BrowserSaveMenu?t=r:await we(r.identity)&&(n=!0),n)break;!n&&t&&t.close()},100,{leading:!1,trailing:!0});let Ma={};const Ra=async({actionId:e,payload:t})=>{if("function"!=typeof Ma[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return Ma[e](t)},Oa=()=>fin.InterApplicationBus.Channel.connect(`custom-context-menu-${kn().identity.uuid}-${U}`);var Da,Ba;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(Da||(Da={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(Ba||(Ba={}));const Wa=n(396),Fa=e=>e+"-"+fin.me.uuid,Na=(e,t)=>{const n=M&&E&&new Wa.Dexie(e);return n&&n.version(.1).stores({[t]:""}),n},La=(e,t)=>{const n=Na(Fa(e),t),r=Na(e,t);if(!n||!r)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,n)=>{const r=en(_t.HasMovedStore),a=r?JSON.parse(r):{};if(a&&a[n])return;a[n]=!0,Xt(_t.HasMovedStore,JSON.stringify(a));const o=await e[n].toArray();await t[n].bulkPut(o)})(r,n,e),n},$a=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),Ua="visited-sites",ja="removed-tab-stack",Va=M&&E&&La("openfin-home-pages","pages"),za=M&&E&&new Wa.Dexie(Fa("openfin-enterprise-site-history"));za&&za.version(.1).stores({[Ua]:"id, url"});const Ga=M&&E&&new Wa.Dexie(Fa("openfin-enterprise-tab-history"));async function Ha(e){if(!Va)throw new Error("Unable to get page - IndexDB not supported");const t=await Va.pages.get(e);if(t)return t.pageId=e.toString(),t.title=t.title||t.pageId,t}async function qa(e){if(!Va)throw new Error("Unable to get page list - IndexDB not supported");const t=await Va.pages.toCollection().keys(),n=(await Promise.all(t.map(e=>Ha(e.toString())))).filter(e=>!!e);return e?n.filter(t=>$a(t.title,e)):n}async function Ka({page:e}){if(!Va)throw new Error("Unable to create page - IndexDB not supported");await Va.pages.put(e,e.pageId)}async function Ja(e){if(!Va)throw new Error("Unable to delete page - IndexDB not supported");await Va.pages.delete(e)}async function Ya({pageId:e,page:t}){if(!Va)throw new Error("Unable to update page - IndexDB not supported");if(void 0===await Ha(e))throw new Error("page not found");await Ka({page:t}),e!==t.pageId&&await Ja(e)}Ga&&Ga.version(.1).stores({[ja]:""});const Za=async e=>{if(!Ga)throw new Error("Unable to add removed tab - IndexDB not supported");const t=Date.now().toString(),n={...e,id:t};await Ga[ja].put(n,t)},Qa=async e=>{if("website"===e.type){const t=e,n=t.url||"";let r=await za[Ua].get(n);r&&function(e){return"app"===e.type||"website"===e.type}(r)?(r.icon=t.icon,r.title=t.title,r.type=t.type,r.visitCount=(r.visitCount||0)+1,r.url=t.url):r={...t,id:n,visitCount:1,accessTime:void 0},r.accessTime=Date.now(),await za[Ua].put(r,n)}},Xa=async()=>{if(!za)throw new Error("Unable to get frequently visited sites - IndexDB not supported");const e=za[Ua],t=await e.toCollection().toArray();return t.sort((e,t)=>(t.visitCount||0)-(e.visitCount||0)),(t.length>5?t.slice(0,5):t).map(({id:e,...t})=>t)},eo=async()=>(await fin.System.getHostSpecs()).name.toLowerCase().includes("windows");var to;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(to||(to={}));const no={type:to.Separator,data:void 0},ro=async()=>({type:to.Submenu,label:Vn("contextMenu.print"),submenu:[{type:to.Label,label:Vn("contextMenu.submenu.print"),data:{type:b.Print}},{type:to.Label,label:Vn("contextMenu.submenu.printAll"),data:{type:b.PrintAll}},no,{type:to.Label,label:Vn("contextMenu.printScreen"),data:{type:b.PrintScreen}}]}),ao=()=>({type:to.Label,label:Vn("contextMenu.closeWindow"),data:{type:g.CloseWindow}}),oo=e=>({type:to.Label,label:Vn(e?"contextMenu.quitEnterpriseBrowser":"contextMenu.quitPlatform"),data:{type:g.Quit}}),io=()=>({type:to.Label,label:Vn("contextMenu.newWindow"),data:{type:g.NewWindow}}),so=e=>({type:to.Label,label:Vn(e?"enterpriseContextMenu.saveSupertab":"contextMenu.savePage"),data:{type:g.SavePage}}),co=e=>({type:to.Label,label:Vn(e?"enterpriseContextMenu.saveSupertabAs":"contextMenu.savePageAs"),data:{type:g.SavePageAs}}),lo=(e,t)=>({type:to.Label,label:Vn(t?"enterpriseContextMenu.newTab":"contextMenu.newPage"),data:{type:g.NewPage},enabled:e}),uo=()=>({label:Vn("contextMenu.switchWorkspace")}),po=()=>({label:Vn("contextMenu.deleteWorkspace")}),fo=()=>({label:Vn("contextMenu.appearance")}),ho=(e,t,n)=>t.map(t=>{const r=t.workspaceId===e.workspaceId;return{label:t.title,type:to.Checkbox,enabled:!r,checked:r,data:{type:n,workspaceId:t.workspaceId}}}),go=async()=>{const e=await kn().Theme.getSelectedScheme();return[{label:Vn("theme.light"),type:to.Checkbox,checked:e===m.Light,data:{type:g.Appearance,scheme:m.Light}},{label:Vn("theme.dark"),type:to.Checkbox,checked:e===m.Dark,data:{type:g.Appearance,scheme:m.Dark}},{label:Vn("theme.system"),type:to.Checkbox,checked:e===m.System,data:{type:g.Appearance,scheme:m.System}}]},mo=async(e,t,n)=>{const r={newChannelId:t,selectedViews:n};(await $t(e)).dispatch(Ht.AddToChannel,r)},wo=async(e,t)=>{(await $t(e)).dispatch(Ht.RemoveFromChannel,t)},yo=async(e,t)=>{if(!e)return;const n=t.identity,r=fin.Window.wrapSync(n);switch(je({type:"View Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e.type){case b.Back:await(async e=>{const t=e.map(e=>fin.View.wrapSync(e).navigateBack());await Promise.all(t)})(t.selectedViews);break;case b.Forward:await(async e=>{const t=e.map(e=>fin.View.wrapSync(e).navigateForward());await Promise.all(t)})(t.selectedViews);break;case b.Print:await ha(t.selectedViews);break;case b.PrintAll:await r.print({content:"views",includeSelf:!1});break;case b.PrintScreen:await r.print({content:"screenshot"});break;case b.CloseViews:await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=(await n.getPages()).find(e=>e.isActive),a=await fin.Window.wrapSync(e).getCurrentViews();if(t.length===a.length-(r.panels??[]).length)return void(await $t(e)).dispatch(Ht.ClosePage,{pageId:r?.pageId});const o=fin.Platform.getCurrentSync();t.forEach(async t=>{const a=await fin.View.wrapSync(t).getParentLayout();await o.closeView(t);const{hasUnsavedChanges:i}=await(async e=>(await ct(he)).dispatch(at.HandlePageChanges,e))({page:{...r,layout:await a.getConfig()},identity:e,eventDetails:{type:h.ViewRemoved,viewIdentity:t}});i&&await n.updatePage({pageId:r.pageId,page:{hasUnsavedChanges:!0}})})})(n,t.selectedViews);break;case b.OpenWithDefaultBrowser:await(async(e,t)=>{const n=await(e=>Promise.all(e.map(async e=>fin.View.wrapSync(e).getInfo())))(t),{newPageUrl:r,newTabUrl:a}=await Br(e);n.forEach(async e=>{e.url!==r&&e.url!==a&&await fin.System.openUrlWithBrowser(e.url)})})(n,t.selectedViews);break;case b.ReloadViews:t.selectedViews.forEach(async e=>{const t=fin.View.wrapSync(e);await t.reload()});break;case b.NewView:await(async(e,t)=>{const n=t.selectedViews[0],r=fin.View.wrapSync(n),a=await(async e=>{const{newTabUrl:t}=await Br(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{url:t,target:e,title:"New Tab"}})(e);await kn().createView(a,e,r.identity)})(n,t);break;case b.DuplicateViews:((e,t)=>{t.forEach(async t=>{const n=fin.View.wrapSync(t);await(async(e,t)=>{const{url:n}=await t.getInfo(),r={...await t.getOptions(),url:n,target:e,name:void 0};await kn().createView(r,e,t.identity)})(e,n)})})(n,t.selectedViews);break;case b.AddToChannel:mo(n,e.option,t.selectedViews);break;case b.RemoveFromChannel:wo(n,t.selectedViews);break;case b.Custom:if(e.action){const r={callerType:P.ViewTabContextMenu,windowIdentity:n,selectedViews:t.selectedViews,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,r)}}};let vo="Platform";const bo=async()=>vo,ko=async(e,t)=>{if(!e)return;const n=t.identity,r=await $t(n),a=kn().Browser.wrapSync(n),o=fin.Window.wrapSync(n);if(je({type:"Global Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0,data:{action:e.action?.id}}),await Ie(n)){const n=await(async(e,t)=>{const n=t.identity,r=kn().Browser.wrapSync(n),a=(await r.getPages()).find(e=>e.isActive),o=Bt({...n,layoutName:a.layoutContainerKey}),i=t.selectedViews;switch(e?.type){case y.Lock:await r.updatePage({pageId:a.pageId,page:{isLocked:!a.isLocked}});break;case y.AddToChanel:e.option?await mo(n,e.option,i):null===e.option&&await wo(n,i);break;case g.NewWindow:{const e=await Wr(n);await kn().Browser.createWindow({workspacePlatform:{pages:[e],windowType:"enterprise"}});break}case y.Pin:{const{alwaysOnTop:e}=await r.openfinWindow.getOptions();await r.openfinWindow.updateOptions({alwaysOnTop:!e});break}case y.ShowHideTabs:await o.isShowingTabs()?await o.hide():await o.show();break;default:return!1}return!0})(e,t);if(n)return}switch(e.type){case g.NewWindow:{const{newPageUrl:e}=await Br(n);if(!e)throw new Error("Trying to create a new empty window without a newPageUrl set");kn().createView({target:void 0,url:e});break}case g.NewPage:await la(n);break;case g.CloseWindow:r.dispatch(Ht.CloseBrowserWindow);break;case g.SaveWorkspace:await sa(n);break;case g.SavePage:await ua(n);break;case g.SavePageAs:await da(n);break;case g.SaveWorkspaceAs:await ca(n);break;case g.RenameWorkspace:a._openSaveModal({menuType:I.RENAME_WORKSPACE});break;case g.SwitchWorkspace:await(async(e,t)=>{const n=kn(),r=(await n.Storage.getWorkspaces()).find(e=>e.workspaceId===t.workspaceId);n.applyWorkspace(r,{skipPrompt:!1,promptContainerWindowIdentity:e})})(n,e);break;case g.DeleteWorkspace:await(async(e,t)=>{const n=kn(),r=(await n.Storage.getWorkspaces()).find(e=>e.workspaceId===t.workspaceId);r&&await(async(e,t)=>{const{windowOptions:n,content:r}=await(async(e,t)=>{const n=await Ie(e);return{title:"Delete Workspace",windowOptions:{url:await oe(n,!1)+H.ResponseModal,name:de.BrowserMenu,defaultHeight:144,defaultWidth:410,modalParentIdentity:e},content:{title:Vn("deleteWorkspaceModal"),body:`${t}`,buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel"},{label:Vn("global.confirm"),type:"primary",id:"Confirm"}]}}}})(e,t),a=await Be(n,n.modalParentIdentity),o={...n,top:a.top,left:a.left};return"Confirm"===(await Yr({options:o,content:r})).data.actionName})(e,r.title)&&(await n.Storage.deleteWorkspace(t.workspaceId),Dr(Vn("successIndicator.workspaceDeleted"),e))})(n,e);break;case g.Downloads:await fa(n);break;case g.Appearance:await kn().Theme.setSelectedScheme(e.scheme);break;case g.Quit:{const e=bo();await Zr(n,await e)&&fin.Platform.getCurrentSync().quit()}break;case g.OpenStorefront:(async()=>{await be()&&me(ge)})();break;case g.RestoreChanges:await ea();break;case g.Print:await ha(t.selectedViews);break;case g.PrintAll:await o.print({content:"views",includeSelf:!1});break;case g.PrintScreen:await o.print({content:"screenshot"});break;case g.Custom:if(e.action){const t={callerType:P.GlobalContextMenu,windowIdentity:n,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,t)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}},So=async(e,t)=>{if(e?.type){const n=t.identity;switch(e.type){case S.SavePage:await ua(n);break;case S.SaveWorkspace:await sa(n);break;case S.SavePageAs:await da(n);break;case S.SaveWorkspaceAs:await ca(n);break;case S.Custom:if(e.action){const n={callerType:P.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,n)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`)}}};var Co;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(Co||(Co={}));const Po=async(e,t,n,r)=>{const{x:a,y:o,identity:i,template:s,callback:c}=e,l=await Ie(i),{data:u}=l?await(async(e,t,n,r)=>{if(!E)throw new Error("showEnterpriseContextMenu can only be used in a Here env. Avoid calling this method during pre-rendering.");if(!r&&!fin.me.isWindow)throw new Error("showEnterpriseContextMenu can only be used in a Here window.");const a=fin.Window.wrapSync({uuid:he.uuid,name:de.EnterpriseContextMenu});await a.isShowing()&&await a.blur();const o=await Oa(),i=new Promise((e,t)=>{o.register("response",t=>{e(t)})}),{x:s,y:c,template:l}=e;return await o.dispatch("open",{parentIdentity:r.identity,responseIdentity:he,type:t,anchorBehavior:n,x:s,y:c,payload:{template:l}}),i})({x:a,y:o,template:s},n,r,fin.Window.wrapSync(i)):await function(e,t){if(!E)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:a,y:o,template:s},fin.Window.wrapSync(i));c(u,e)};async function xo(e,t){const n=await Ie(e.identity),r=n?await(async({identity:e,selectedViews:t})=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await r.getPages()).find(e=>e.isActive),o=Rn(a.layout.content)>1,i=await Ie(e),s=await n.Theme.getThemes(),c=s[0]&&"palettes"in s[0]||!s[0]||0===s.length,l={...so(i),enabled:o},u={...co(i),enabled:o};return[io(),lo(!0,i),{type:to.Separator},l,u,{type:to.Separator},...c?[{type:to.Submenu,label:fo().label,submenu:await go()}]:[],{type:to.Separator},ao(),{type:to.Separator},oo(!0)]})({identity:e.identity,selectedViews:e.selectedViews}):await(async(e,t=[])=>{const n=await be(),{newPageUrl:r}=await Br(e),a=await(async e=>{const t=fe(e),{workspacePlatform:n}=await t.getOptions();return n?.disableMultiplePages})(e),o=await(async e=>{const t=fe(e),{workspacePlatform:n}=await t.getOptions();return n?.isLocked})(e),i=await Ie(e),s=[],c=t.length>0;r&&(s.push(io()),a||s.push(lo(!o,i))),s.push(no);const l=kn(),u=await l.getCurrentWorkspace(),d=await l.Storage.getWorkspaces(),p=d.find(e=>e.workspaceId===u.workspaceId);s.push({type:to.Label,label:Vn("contextMenu.restore"),data:{type:g.RestoreChanges},enabled:!!p}),s.push({type:to.Label,label:Vn("contextMenu.saveWorkspace"),data:{type:g.SaveWorkspace},enabled:!!p}),s.push({type:to.Label,label:Vn("contextMenu.saveWorkspaceAs"),data:{type:g.SaveWorkspaceAs}}),s.push({type:to.Label,label:Vn("contextMenu.renameWorkspace"),data:{type:g.RenameWorkspace},enabled:!!p}),d.some(e=>e.workspaceId!==u.workspaceId)?s.push({label:uo().label,submenu:ho(u,d,g.SwitchWorkspace),data:void 0},{label:po().label,submenu:ho(u,d,g.DeleteWorkspace),data:void 0}):s.push({label:uo().label,enabled:!1,data:void 0},{label:po().label,enabled:!1,data:void 0}),s.push({label:Vn("contextMenu.downloads"),data:{type:g.Downloads}});const f=await l.Theme.getThemes();return(f[0]&&"palettes"in f[0]||!f[0]||0===f.length)&&s.push({label:fo().label,submenu:await go(),data:void 0}),s.push(no,so(i),co(i),await(async e=>{const t=await eo();return{label:Vn("contextMenu.print"),submenu:[{type:to.Label,label:Vn("contextMenu.submenu.print"),data:{type:g.Print},enabled:e},{type:to.Label,label:Vn("contextMenu.submenu.printAll"),data:{type:g.PrintAll}},...t?[no,{type:to.Label,label:Vn("contextMenu.printScreen"),data:{type:g.PrintScreen}}]:[]],data:void 0}})(c)),n?[...s,ao(),no,{type:to.Label,label:Vn("contextMenu.openStorefront"),data:{type:g.OpenStorefront}},no,oo()]:[...s,no,ao(),no,oo()]})(e.identity,e.selectedViews),a=await bo();n||(r.find(e=>e.data?.type===g.Quit).label=`Quit ${a}`);const{rect:o,...i}=e,{x:s,y:c}=n?{x:o.left+o.width,y:o.bottom}:e,l={...i,x:s,y:c,template:r,callback:ko};await this.openGlobalContextMenu(l,t)}async function _o(e,t){const n={...e,callback:yo};await this.openViewTabContextMenu(n,t)}async function Io(e,t){const n=await(async(e,t)=>{const n=await kn().Storage.getPage(e),r=await er(),a=await Ie(t),o=r.find(t=>t.pageId===e),i=Rn(o.layout.content)>1,{workspacePlatform:s}=await fe(t).getOptions(),c=!(s.isLocked||s.preventPageClose||o.closeButton?.disabled||o.closeButton?.hidden),l=[{type:to.Label,label:Vn("enterpriseContextMenu.newTab"),data:{type:w.NewPage}},no,{type:to.Label,label:Vn("reload"),data:{type:w.Refresh}},{type:to.Label,label:Vn("enterpriseContextMenu.duplicate"),data:{type:w.Duplicate},enabled:!s.isLocked},await ro(),no,{type:to.Label,label:Vn(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:w.Close},enabled:c}],u=[{type:to.Label,label:Vn("enterpriseContextMenu.newTab"),data:{type:w.NewPage}},no,{type:to.Label,label:Vn("enterpriseSaveModal.renameSupertab"),data:{type:w.Rename},enabled:!s.isLocked&&!!n&&i},{type:to.Label,label:Vn("enterpriseContextMenu.duplicate"),data:{type:w.Duplicate},enabled:!s.isLocked},no,{type:to.Label,label:Vn("enterpriseContextMenu.saveSupertab"),data:{type:w.Save},enabled:i},{type:to.Label,label:Vn("enterpriseContextMenu.saveSupertabAs"),data:{type:w.SaveAs},enabled:i},no,{type:to.Label,label:Vn("enterpriseContextMenu.deleteSupertab"),data:{type:w.DeletePage},enabled:!!n},no,{type:to.Label,label:Vn(i?"enterpriseSaveModal.closeSupertab":"enterpriseSaveModal.closeTab"),data:{type:w.Close},enabled:c}],d=[{type:to.Label,label:Vn("contextMenu.savePage"),data:{type:w.Save},enabled:!0},{type:to.Label,label:Vn("saveMenu.savePageAs"),data:{type:w.SaveAs},enabled:!0},{type:to.Label,label:"Save Workspace As",data:{type:w.SaveWorkspaceAs}},{type:to.Label,label:"Refresh",data:{type:w.Refresh}},no,{type:to.Label,label:Vn("saveModal.renamePage"),data:{type:w.Rename},enabled:!!n},{type:to.Label,label:Vn("contextMenu.duplicatePage"),data:{type:w.Duplicate},enabled:!s.isLocked},no,{type:to.Label,label:Vn("saveModal.closePage"),data:{type:w.Close},enabled:c}];return a?i?u:l:d})(e.pageId,e.identity),r={...e,template:n,callback:(t,n)=>{(async(e,t,n)=>{const r=kn().Browser.wrapSync(t.identity),a=fin.Window.wrapSync(t.identity),o=await $t(t.identity),i=await Ie();switch(e&&je({type:"Page Tab Menu",action:"Select Menu Item",value:e.type,skipValueHashing:!0}),e?.type){case w.Save:await ua(t.identity,t.pageId);break;case w.SaveAs:await da(t.identity,t.pageId);break;case w.NewPage:await la(t.identity);break;case w.DeletePage:await(async(e,t)=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await n.Storage.getPages()).find(e=>e.pageId===t);a&&await(async(e,t)=>{const{windowOptions:n,content:r}=await(async(e,t)=>{const n=await Ie(e);return{title:"Delete Page",windowOptions:{url:new URL(await oe(n,!1)+H.ResponseModal).toString(),name:de.BrowserMenu,defaultHeight:172,defaultWidth:464,modalParentIdentity:e},content:{title:Vn("enterpriseDeleteModal.deleteSupertab",{title:t}),body:Vn("enterpriseDeleteModal.deleteSupertabWarning"),buttons:{right:[{label:Vn("global.cancel"),type:"secondary",id:"Cancel",variant:n?"outline":void 0},{label:Vn("global.delete"),type:"primary",id:"Delete",variant:n?"submit":void 0}]}}}})(e,t),a=await Be(n,n.modalParentIdentity),o={...n,top:a.top,left:a.left};return"Delete"===(await Yr({options:o,content:r})).data.actionName})(e,a.title)&&(await n.Storage.deletePage(a.pageId),await r.removePage(t),Dr(Vn("enterpriseSuccessIndicator.supertabDeleted"),e,Vn("enterpriseSuccessIndicator.supertabHasBeenDeleted",{title:a.title})))})(t.identity,t.pageId);break;case w.Rename:if(await Ie(t.identity)){await r.setActivePage(t.pageId);const e=await Oa();await e.dispatch("open",{parentIdentity:t.identity,type:Ba.RenameSupertab,anchorBehavior:Co.Center,x:n.left+n.width/2-164,y:n.bottom-8,payload:{pageId:t.pageId}})}else await r._openSaveModal({menuType:I.RENAME_PAGE,id:t.pageId});break;case w.Duplicate:o.dispatch(Ht.DuplicatePage,t.pageId);break;case w.Close:i?await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await n.getPages();for(const a of r)if(a.pageId===t){await n.removePage(a.pageId),await n._trackRemovedTab({identity:e,page:a});break}})(t.identity,t.pageId):o.dispatch(Ht.ClosePage,{pageId:t.pageId});break;case w.Custom:if(e.action){const n={callerType:P.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};kn()._invokeCustomAction(e.action.id,n)}else console.warn(`Encountered a Custom context menu option with an "action" property with value "${e.action}"`);break;case w.Refresh:await(async(e,t)=>{const n=kn(),r=n.Browser.wrapSync(e),a=(await r.getPages()).find(e=>t?e.pageId===t:e.isActive);a?.layout?.content&&En(a.layout.content).forEach(async e=>{(await fin.View.wrap({uuid:n.identity.uuid,name:e.name})).reload()})})(t.identity,t.pageId);break;case w.CloseOthers:await(async(e,t)=>{const n=kn().Browser.wrapSync(e),r=await n.getPages();for(const a of r)a.pageId!==t&&(await n.removePage(a.pageId),await n._trackRemovedTab({identity:e,page:a}))})(t.identity,t.pageId);break;case w.SaveWorkspaceAs:await ca(t.identity);break;case w.Print:{const e=await r._getLayoutsWithSelectedViews(),{selectedViews:n}=e.find(e=>e.pageId===t.pageId);await ha(n);break}case w.PrintAll:await r.setActivePage(t.pageId),await a.print({content:"views",includeSelf:!1});break;case w.PrintScreen:await r.setActivePage(t.pageId),await a.print({content:"screenshot"})}})(t,n,e.rect)}};await this.openPageTabContextMenu(r,t)}async function Ao(e,t){const n={...e,template:await(async()=>{const e=kn(),t=await e.getCurrentWorkspace(),n=(await e.Storage.getWorkspaces()).find(e=>e.workspaceId===t.workspaceId);return[{type:to.Label,label:Vn("contextMenu.saveWorkspace"),enabled:!!n,data:{type:S.SaveWorkspace}},{type:to.Label,label:Vn("saveMenu.saveWorkspaceAs"),data:{type:S.SaveWorkspaceAs}},{type:to.Separator,data:void 0},{type:to.Label,label:Vn("contextMenu.savePage"),data:{type:S.SavePage}},{type:to.Label,label:Vn("saveMenu.savePageAs"),data:{type:S.SavePageAs}}]})(),callback:So};await this.openSaveButtonContextMenu(n,t)}const Eo="dock-companion-updates",To=async()=>(await fin.Application.getCurrentSync().getChildWindows()).find(e=>e.identity.name===de.DockCompanion),Mo=et(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`),Ro="dock-provider-configs",Oo=M&&E&&new Wa.Dexie(Fa("dock-provider-configs"));async function Do(e){if(!Oo)throw new Error("Unable to get Dock provider config - IndexDB not supported");try{return await Oo[Ro].get(e)}catch(e){return void console.warn("Failed to retrieve Dock provider config from IndexedDB",e)}}async function Bo(e){if(!Oo)throw new Error("Unable to save Dock provider config - IndexDB not supported");await Oo[Ro].put(e,e.id)}Oo&&Oo.version(.1).stores({[Ro]:""});const Wo="workspaces",Fo=M&&E&&La("openfin-workspace-platform-workspaces",Wo);async function No(e){if(!Fo)throw new Error("Unable to get workspace - IndexDB not supported");const t=await Fo[Wo].get(e);return t&&(t.workspaceId=e.toString(),t.title=t.title||t.workspaceId),t}async function Lo(e){if(!Fo)throw new Error("Unable to get workspaces - IndexDB not supported");const t=await Fo[Wo].toCollection().keys(),n=(await Promise.all(t.map(e=>No(e.toString())))).filter(e=>!!e);return e?n.filter(t=>$a(t.title,e)):n}async function $o({workspace:e}){if(!Fo)throw new Error("Unable to create workspace - IndexDB not supported");const t=(await Lo()).find(t=>t.title===e.title);if(t&&t.workspaceId!==e.workspaceId)throw new Error(`Workspace with title '${e.title}' already exists.`);await Fo[Wo].put(e,e.workspaceId)}async function Uo(e){if(!Fo)throw new Error("Unable to delete workspace - IndexDB not supported");await Fo[Wo].delete(e)}async function jo({workspaceId:e,workspace:t}){if(!Fo)throw new Error("Unable to update workspace - IndexDB not supported");if(!await No(e))throw new Error("workspace not found");await $o({workspace:t}),e!==t.workspaceId&&await Uo(e)}const Vo=async(e,t,n)=>{const r=await kn().Browser.getAllAttachedPages(),a=new Set(r.map(e=>e.title).filter(e=>!!e)),o=new Set(r.map(e=>e.pageId).filter(e=>!!e)),i=t?.defaultPageOptions,s="enterprise"===n?.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType,c=await te(),l=await(async(e,t,n)=>{if(n)return ae();const r=t?.workspacePlatform?.newTabUrl;if(r)return r;const a=e?.defaultWindowOptions?.workspacePlatform?.newTabUrl;return a||void 0})(t,n,s);return Promise.all(e.map(async e=>{if("reparent"===e.multiInstanceViewBehavior)return{...e,layoutContainerKey:xt()};((e,t)=>{e.pageId||=xt(),t.has(e.pageId)&&(console.warn("PageID collision detected. All Page IDs should be unique. A random new pageId will be generated"),e.pageId=xt()),t.add(e.pageId)})(e,o),s?e.iconUrl=`${c}/enterprise/icons/enterprise-page.svg`:e.title=Xn(e.title,Array.from(a.keys())),a.add(e.title),e.panels?.reduce((e,t)=>{const n=Object.values(f);if(!n.includes(t.position))throw new Error(`Encountered a panel with unsupported position "${t.position}". Supported positions are: ${n.toString()}`);if(1==e[t.position])throw new Error(`Found more than 1 panel at position: ${t.position}. Only 1 panel at a given position is currently supported.`);return{...e,[t.position]:e[t.position]+1}},{[f.Left]:0,[f.Right]:0,[f.Top]:0,[f.Bottom]:0});const n="panels"in e?e.panels:i?.panels;let r=(u=e.layout,d=t?.defaultViewOptions,xn({...u},e=>((e,t)=>{return n=Cn(e,t),{...n,name:n.name?n.name:`internal-generated-view-${xt()}`,_internalWorkspaceData:{...n._internalWorkspaceData,viewIdentifier:n._internalWorkspaceData?.viewIdentifier||xt()}};var n})(e,d)));var u,d;return l&&!r?.settings?.newTabButton&&(r={...r,settings:{...r?.settings,newTabButton:{url:l}}}),{...i,...e,panels:n&&await qn(n),layoutContainerKey:xt(),layout:r,isLayoutCreated:!1}}))};async function zo(e){return e?"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==":(await Q()).displayViewTabDefaultIcon?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":"data:image/svg+xml,%3Csvg%20style%3D%22background-color%3A%237D808A%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%2010%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M4.64648%200.874962C4.84174%200.6797%205.15833%200.6797%205.35359%200.874962L9.12482%204.6462C9.32009%204.84146%209.32009%205.15804%209.12482%205.3533L5.35359%209.12454C5.15833%209.3198%204.84174%209.3198%204.64648%209.12454L0.875245%205.3533C0.679982%205.15804%200.679982%204.84146%200.875245%204.6462L4.64648%200.874962ZM5.00003%201.93562L1.9359%204.99975L5.00003%208.06388L8.06416%204.99975L5.00003%201.93562Z%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E"}const Go={dimensions:{borderWidth:3,headerHeight:30}},Ho=(he.uuid,de.BrowserAddressSearchPrefix);const qo=async(e,t)=>{const n={uuid:t.uuid,name:t.name};await Zr(n,e.title??await bo(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()},Ko=e=>{const t=e.name===de.Home,n=e.name?.startsWith(de.HomeInternal),r=e.name?.startsWith(de.BrowserMenu)||e.name?.startsWith(de.BrowserSaveMenu);return!t&&!n&&!r},Jo=e=>JSON.parse(JSON.stringify(e));async function Yo(e,t,n){const r=e.manifestUrl?await t({manifestUrl:e.manifestUrl},n):void 0;if(r?.interop&&e.interop){const t={...e,...r,interop:e.interop};return delete t.manifestUrl,t}return e}const Zo=e=>{const t=Jo(e);return t._internalWorkspaceData?.browserNavigationButtons&&(t.workspacePlatform={...t.workspacePlatform,browserNavigationButtons:t._internalWorkspaceData.browserNavigationButtons},delete t._internalWorkspaceData.browserNavigationButtons),t},Qo=e=>{const t=Jo(e);return t.workspacePlatform&&(t._internalWorkspaceData={...t._internalWorkspaceData,...t.workspacePlatform},delete t.workspacePlatform),t},Xo={reload:[{keys:"Ctrl+R",preventDefault:!0}],back:[{keys:"Alt+Left",preventDefault:!0}],forward:[{keys:"Alt+Right",preventDefault:!0}]},ei={reload:[{keys:"Cmd+R",preventDefault:!0}],back:[{keys:"Cmd+[",preventDefault:!0},{keys:"Cmd+Left",preventDefault:!0}],forward:[{keys:"Cmd+]",preventDefault:!0},{keys:"Cmd+Right",preventDefault:!0}]},ti=async()=>await eo()?Xo:ei,ni=(e,t)=>Jo(e).map(e=>("componentState"in e?e.componentState=t(e.componentState):"content"in e&&(e.content=ni(e.content,t)),e)),ri=e=>{if(e){const t=Jo(e);return t.content&&(t.content=ni(t.content,Zo)),t}return e},ai=e=>{if(e){const t=Jo(e);return t.content&&(t.content=ni(t.content,Qo)),t}return e};async function oi({app:e,target:t}){const n=fin.Platform.getCurrentSync();switch(e.manifestType){case l.Snapshot:return n.applySnapshot(e.manifest);case l.View:return async function(e,t){const n=fin.Platform.getCurrentSync();if("view"===t.entityType){const n=fin.View.wrapSync(t),r=await n.getParentLayout();return await r.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),n.destroy()}return n.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case l.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}let ii;const si=()=>{if(!ii){const e=et(`${"undefined"!=typeof fin&&fin.me.identity.uuid}-enterprise-app-directory`);ii=e()}return ii};async function ci(e){return await Ie(e.identity)?(await si()).dispatch(Vt.GetApps,e.req):[]}async function li(e){return await Ie(e.identity)?(await si()).dispatch(Vt.GetSearchProviders,e):[]}async function ui(e){return(await si()).dispatch(Vt.GetCuratedContent,e)}async function di(e){return(await si()).dispatch(Vt.GetRecentlyVisited,e)}let pi=[];const fi=()=>pi,hi=(e,t)=>n=>{const r=null!==e;return class extends n{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e,analytics:{isSupported:!0}}),this.detachPagesFromWindow=lr,this.getAllAttachedPages=er,this.getPagesForWindow=dr,this.getPageForWindow=pr,this.markUnsavedPagesAsSavedInternal=Sr,this.launchApp=oi,this.savePage=sr,this.saveWorkspace=oa,this.createSavedPageInternal=ar,this.updateSavedPageInternal=ir,this.deleteSavedPageInternal=or,this.reorderPagesForWindow=fr,this.getUniquePageTitle=gr,this.updatePageForWindow=cr,this.getLastFocusedBrowserWindow=Ia,this.getThemes=fi,this.invokeCustomActionInternal=Ra,this.requestQuitPlatformDialogInternal=qo,this.getCurrentWorkspace=ra,this.setActiveWorkspace=ta,this.getLanguageResourcesInternal=va,this.getPageByViewIdentity=async e=>{const t=await fin.Platform.Layout.getLayoutByViewIdentity(e),n=t.identity;if(!("layoutName"in n))throw new Error("Failed to get layout's identity");const r=await kn().Browser.wrapSync(t.identity).getPages(),a=r.findIndex(e=>e.layoutName===n.layoutName);if(-1===a)throw new Error("Failed to get page's index");return{windowIdentity:{name:t.identity.name,uuid:t.identity.uuid},page:r[a],pageIndex:a}},this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.getDockProviderConfig=this.getDockProviderConfig.bind(this),this.saveDockProviderConfig=this.saveDockProviderConfig.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.restoreLastSavedWorkspaceInternal=this.restoreLastSavedWorkspaceInternal.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this),this.getSelectedScheme=this.getSelectedScheme.bind(this),this.setSelectedScheme=this.setSelectedScheme.bind(this),this.analyticsInternal=this.analyticsInternal.bind(this),this.handleAnalytics=this.handleAnalytics.bind(this),this.getLanguage=this.getLanguage.bind(this),this.setLanguage=this.setLanguage.bind(this),this.handleSaveModalOnPageClose=this.handleSaveModalOnPageClose.bind(this),this.shouldPageClose=this.shouldPageClose.bind(this),this.shouldWindowClose=this.shouldWindowClose.bind(this),this.handlePagesAndWindowClose=this.handlePagesAndWindowClose.bind(this),this.setActivePage=this.setActivePage.bind(this),this.handlePageChanges=this.handlePageChanges.bind(this),this.copyPage=this.copyPage.bind(this),this.addPage=this.addPage.bind(this),this.addDefaultPage=this.addDefaultPage.bind(this),this.markUnsavedPagesAsSavedInternal=this.markUnsavedPagesAsSavedInternal.bind(this),this.trackRemovedTabInternal=this.trackRemovedTabInternal.bind(this),this.restoreRemovedTabInternal=this.restoreRemovedTabInternal.bind(this),this.trackVisitedSiteInternal=this.trackVisitedSiteInternal.bind(this),this.getRecentlyVisitedSitesInternal=this.getRecentlyVisitedSitesInternal.bind(this),this.getFrequentlyVisitedSitesInternal=this.getFrequentlyVisitedSitesInternal.bind(this),this.searchSitesInternal=this.searchSitesInternal.bind(this),this.getSearchProvidersInternal=this.getSearchProvidersInternal.bind(this),this.getCuratedContentInternal=this.getCuratedContentInternal.bind(this),this.handleRequestNavigationInternal=this.handleRequestNavigationInternal.bind(this),this.refreshBookmarksInternal=this.refreshBookmarksInternal.bind(this),this.launchBookmarkInternal=this.launchBookmarkInternal.bind(this),this.getNotificationsConfig=this.getNotificationsConfig.bind(this),this.updateDockFavoritesInternal=this.updateDockFavoritesInternal.bind(this),this.updateContentMenuInternal=this.updateContentMenuInternal.bind(this),this.launchDockEntryInternal=this.launchDockEntryInternal.bind(this),this.setDockFavoritesOrderInternal=this.setDockFavoritesOrderInternal.bind(this),this.navigateContentMenuInternal=this.navigateContentMenuInternal.bind(this),this.setDefaultDockButtonsOrderInternal=this.setDefaultDockButtonsOrderInternal.bind(this),this.getDockWorkspacesContextMenuInternal=this.getDockWorkspacesContextMenuInternal.bind(this),this.handleDockWorkspacesMenuResponseInternal=this.handleDockWorkspacesMenuResponseInternal.bind(this),this.removeDockFavoriteInternal=this.removeDockFavoriteInternal.bind(this),this.addDockFavoriteInternal=this.addDockFavoriteInternal.bind(this),this.focusAndExpandSearchInternal=this.focusAndExpandSearchInternal.bind(this)}async applyWorkspace(...e){return Xr.apply(this,e)}async restoreLastSavedWorkspaceInternal(...e){return ea.apply(this,e)}async getSnapshot(){const e=r?await async function(e){const t=(await ye()).map(async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await $t(e)).dispatch(Ht.UpdatePagesWindowOptions))(e.identity)});return await Promise.all(t),e?e():Mt()}(async()=>Mt(await super.getSnapshot(void 0,fin.me.identity))):await Mt(await super.getSnapshot(void 0,fin.me.identity));let t={...e,windows:e.windows.filter(Ko).map(Tt)};return t=(e=>{const t=Jo(e);return t.windows.forEach(e=>{e.layout&&(e.layout=ri(e.layout)),e.workspacePlatform?.pages?.forEach(e=>{e?.layout&&(e.layout=ri(e.layout))})}),t})(t),t}async getViewSnapshot(e){let t=await super.getViewSnapshot(e);return t=Zo(t),t}async applySnapshot({snapshot:e,options:t}){let n=e;"string"==typeof n&&(n=await super.fetchManifest({manifestUrl:n},fin.me.identity));const a=function(e){for(const t of e.windows)if(t.workspacePlatform?.pages?.length)return!0;return!1}(n);if(!r&&a)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return n=(e=>{const t=Jo(e);return t.windows.forEach(e=>{e.layout=ai(e.layout),e.workspacePlatform?.pages?.forEach(e=>{e.layout=ai(e.layout)})}),t})(n),super.applySnapshot({snapshot:n,options:t})}async createWindow(t,n){if(r&&"tearout"===t.reason){const e=await fin.Window.wrapSync(n).getOptions(),r=e.workspacePlatform?.windowType;t.taskbarIconGroup=e.taskbarIconGroup,r&&(t.workspacePlatform||={},t.workspacePlatform.windowType=e.workspacePlatform.windowType,r===C.Platform&&(t.url=e.url))}if(!r||t.workspacePlatform?.windowType===C.Platform){const e=await super.createWindow(t,n);return je({type:"Window",action:"Open Window",value:e.identity.name,data:{uuid:e.identity.uuid}}),e}var a;a={allowed:!0},Ne||(Ne=!0,Fe(We.Browser,a)),((e=[])=>{const t=e.filter(e=>e.type!==k.Custom),n=new Set,r=[];for(const e of t)n.has(e.type)&&r.push(e.type),n.add(e.type);if(r.length>0){const e=r.join(", ");throw new Error(`Encountered a duplicate "${e}" toolbar button. No more than one instance of a button type may be provided.`)}})(t.workspacePlatform?.toolbarOptions?.buttons);let o=(e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...n})=>({...n,workspacePlatform:{pages:t||e||null}}))(e))(t);e?.defaultWindowOptions?.hotkeys&&(o.hotkeys=e.defaultWindowOptions.hotkeys),o=await async function(e,t,n){let r=e;const a="enterprise"===r.workspacePlatform?.windowType||"enterprise"===t?.defaultWindowOptions?.workspacePlatform?.windowType;if(r.layout&&!r.workspacePlatform?.pages?.length){const e=await gr(),n={...await Ot(e,r.layout),isActive:!0};r.workspacePlatform||={},r.workspacePlatform.pages=await Vo([n],t,r)}t?.browserIconSize&&(r.workspacePlatform||={},r.workspacePlatform.browserIconSize=t.browserIconSize);const o=n?.themes?.[0];if(r.workspacePlatform?.pages?.length){const e=await Vo(r.workspacePlatform.pages,t,r),i=e,s=(e=>{if(!e)return;let t=e.find(e=>e.isActive);return!t&&e.length>0&&(e[0].isActive=!0,t=e[0]),t})(i);if(i.forEach(e=>{e.pageId!==s?.pageId&&(e.isActive=!1)}),await Kn(i),r.workspacePlatform.pages=e,r=kt({},await(async e=>({contextMenuOptions:{enabled:!1},experimental:{showFavicons:!0,defaultFaviconUrl:await zo(e)},viewVisibility:{showViewsOnSplitterDrag:{enabled:!0},showViewsOnWindowResize:{enabled:!0}}}))(a),t?.defaultWindowOptions,r,await(async e=>({backgroundThrottling:!0,url:await oe(e,!0),contextMenu:!0,closeOnLastViewRemoved:!1,permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}}))(a)),s.layout=kt(s.layout,Go),async function(e){if(e.icon||e.taskbarIcon){const t=fin.Application.getCurrentSync(),n=await(await t.getWindow()).getOptions();e.taskbarIconGroup||=n.taskbarIconGroup||fin.me.identity.uuid}if(e.workspacePlatform.icon)if("object"==typeof e.workspacePlatform.icon){const t=window.matchMedia("(prefers-color-scheme: dark)");e.icon=t.matches?e.workspacePlatform.icon.dark:e.workspacePlatform.icon.light}else e.icon=e.workspacePlatform.icon}(r),!r.backgroundColor&&o)if("palette"in o)r.backgroundColor=o?.palette?.background2||o?.palette?.backgroundPrimary;else{const e=n.selectedScheme===m.Dark||n.selectedScheme===m.System&&window.matchMedia("(prefers-color-scheme: dark)")?o?.palettes.dark:o?.palettes.light;r.backgroundColor=e?.background2||e?.backgroundPrimary}r=Ce(r,!0);const c=await oe(a,!0);c&&(r.url=c),r.layout=s.layout,r.layoutSnapshot=((e,t)=>({layouts:e.reduce((e,n)=>{if(!n.isActive){if(!t)return e;if(!(e=>{const t=e.layout,n=t.content?En(t.content):[],r=n.length;return r>1?{...e,singleViewName:null}:1===r?{...e,singleViewName:n[0].name}:void 0})(n).singleViewName)return e}return e[n.layoutContainerKey]=n.layout,e},{}),pages:e}))(r.workspacePlatform.pages,a),r.workspacePlatform.windowType=r.workspacePlatform.windowType??C.Browser}if(r.cornerRounding&&delete r.cornerRounding,r.name||r.layoutSnapshot?r.contextMenuOptions?.template?.length>0?r.contextMenuOptions.template=r.contextMenuOptions.template.filter(e=>"print"!==e):r.contextMenuOptions={template:[],enabled:!1}:r.name=`${de.ClassicWindow}-${xt()}`,r.workspacePlatform&&n&&(r.workspacePlatform._themeData=n),a){const e=await ae();r.workspacePlatform.newPageUrl=e,r.workspacePlatform.newTabUrl=e,r.layout&&(r.layout.dimensions.borderWidth=4,r.layout.dimensions.headerHeight=28),r.name=r.name||`${de.BrowserWindow}-${xt()}`;const t=Ho+r.name,n=fin.Application.getCurrentSync();if(!(await n.getViews()).some(e=>e.identity.name===t)&&r.name.startsWith(de.BrowserWindow)){const e=await re()+H.BrowserPopupMenuAddressSearchResultsView;(await fin.View.create({name:t,contextMenuOptions:{enabled:!0},url:e,target:fin.me.identity,bounds:{top:0,left:0,width:0,height:0}})).navigate(e)}}return r}(o,e,{themes:fi(),selectedScheme:this.getSelectedScheme()}),o=await(async e=>{const t=await fin.System.getMonitorInfo();let n=t.primaryMonitor;const r=e.defaultLeft,a=e.defaultTop;t.nonPrimaryMonitors.forEach(e=>{const{top:t,bottom:o,left:i,right:s}=e.availableRect;r>=i&&r<=s&&a>=t&&a<=o&&(n=e)});const o=n.availableRect.bottom-n.availableRect.top,i=n.availableRect.right-n.availableRect.left;return e.defaultHeight=Math.min(e.defaultHeight||800,o),e.defaultWidth=Math.min(e.defaultWidth||800,i),e})(o);const i=await(e=>async(t,n)=>{let r=!1;const a=await e(t,n);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await a.addListener("show-requested",async()=>{if(r)return;const e=await a.getOptions();await a.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),r=!0}),a):a})((e,t)=>super.createWindow(e,t))(o,n);return je({type:"Window",action:"Open Window",value:i.identity.name,data:{uuid:i.identity.uuid}}),i}async createView(t,n){t.opts=Cn(t.opts,e?.defaultViewOptions),e?.defaultViewOptions?.hotkeys&&(t.opts.hotkeys=e.defaultViewOptions.hotkeys),t.opts=await Yo(t.opts,this.fetchManifest,n),t.opts=await(async e=>{const t=Jo(e),n=t.workspacePlatform?.browserNavigationButtons;if(n){const e=Object.keys(n);for(const r of e)if(n[r]){const e=(await ti())[r];t.hotkeys?t.hotkeys.push(...e):t.hotkeys=[...e]}}return t})(t.opts),t.opts=Qo(t.opts);const r=await super.createView(t,n);return((e,t)=>{const n=fin.View.wrapSync(e);if(!t)return;const r=e=>{(async(e,t,n)=>{if("keyDown"!==n.inputType)return;const r=await(async e=>{const t=await e.getCurrentWindow(),n=await t.getOptions(),r=n.workspacePlatform?.navigationButtons;return r.enabled&&!r.hotkeysDisabled})(e),a=await eo();if(r){if(t.reload){const r=n.ctrlKey&&!n.altKey&&!n.metaKey&&!n.shiftKey&&"r"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"r"===n.key;(a?r:o)&&t?.reload&&(e.reload(),je({type:"View",action:"Reload",value:e.identity.name}))}if(t.back){const r=!n.ctrlKey&&n.altKey&&!n.metaKey&&!n.shiftKey&&"ArrowLeft"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"ArrowLeft"===n.key,i=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"["===n.key;(a?r:o||i)&&t?.back&&(e.navigateBack(),je({type:"View",action:"Back",value:e.identity.name}))}if(t.forward){const r=!n.ctrlKey&&n.altKey&&!n.metaKey&&!n.shiftKey&&"ArrowRight"===n.key,o=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"ArrowRight"===n.key,i=!n.ctrlKey&&!n.altKey&&n.metaKey&&!n.shiftKey&&"]"===n.key;(a?r:o||i)&&t?.forward&&(e.navigateForward(),je({type:"View",action:"Forward",value:e.identity.name}))}}})(n,t,e)};n.addListener("hotkey",r),n.once("destroyed",()=>{n.removeListener("hotkey",r)})})(r.identity,t.opts._internalWorkspaceData?.browserNavigationButtons),r}async replaceView(t,n){return t.opts.newView=await Cn(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await Yo(t.opts.newView,this.fetchManifest,n),super.replaceView(t,n)}async replaceLayout(e,t){return await Ie(t)||delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async getSavedPage(...e){return Ha.apply(this,e)}async getSavedPages(...e){return qa.apply(this,e)}async createSavedPage(...e){return Ka.apply(this,e)}async deleteSavedPage(...e){return Ja.apply(this,e)}async updateSavedPage(...e){return Ya.apply(this,e)}async getSavedWorkspace(...e){return No.apply(this,e)}async getSavedWorkspaces(...e){return Lo.apply(this,e)}async createSavedWorkspace(...e){return $o.apply(this,e)}async deleteSavedWorkspace(...e){return Uo.apply(this,e)}async updateSavedWorkspace(...e){return jo.apply(this,e)}async getDockProviderConfig(...e){return Do.apply(this,e)}async saveDockProviderConfig(...e){return Bo.apply(this,e)}async attachPagesToWindow(t){const n=await Vo(t.pages,e);await Kn(n),await(async e=>{await(async e=>(await $t(e.identity)).dispatch(Ht.AttachPagesToWindow,e))(e)})({...t,pages:n})}async addPage(e){const t=await Ie(e.identity),n=await ct(e.identity),{page:r,insertionIndex:a}=e;r?.title||(r.title=await n.dispatch(at.GetUniquePageTitle,void 0));const o=(await this.getAllAttachedPages()).find(e=>e.pageId===r.pageId||e.title===r.title);if(o){if(o.pageId===r.pageId)throw new Error(`page with id ${r.pageId} is already attached to a browser window ${o.parentIdentity.name}`);if(!t)throw new Error(`addPage title collision, page with title ${r.title} already exists, conflicting page id: ${o.pageId} with title ${o.title}`)}const i={identity:e.identity,pages:[{...r,multiInstanceViewBehavior:e.multiInstanceViewBehavior||"duplicate"}],insertionIndex:a};await this.attachPagesToWindow(i)}async addDefaultPage(e){await this.addPage(e),await this.setActivePage({identity:e.identity,pageId:e.page.pageId})}async setActivePage(...e){return ur.apply(this,e)}async openGlobalContextMenuInternal(...e){return xo.apply(this,e)}async openGlobalContextMenu(...e){return Po.apply(this,[...e,Ba.GlobalMenu,Co.BottomRight])}async openViewTabContextMenuInternal(...e){return _o.apply(this,e)}async openViewTabContextMenu(...e){return Po.apply(this,[...e,Ba.ContextMenu])}async openPageTabContextMenuInternal(...e){return Io.apply(this,e)}async openPageTabContextMenu(...e){return Po.apply(this,[...e,Ba.ContextMenu])}async openSaveButtonContextMenu(...e){return Po.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return Ao.apply(this,e)}getSelectedScheme(...e){return vn.apply(this,e)}async setSelectedScheme(...e){return yn.apply(this,e)}async handlePageChanges(...e){return kr.apply(this,e)}async analyticsInternal(...e){return Tr.apply(this,e)}async handleAnalytics(...e){}async handleSaveModalOnPageClose(...e){return mr.apply(this,e)}async shouldPageClose(...e){return wr.apply(this,e)}async shouldWindowClose(...e){return yr.apply(this,e)}handlePagesAndWindowClose(...e){return vr.apply(this,e)}async copyPage(...e){return br.apply(this,e)}async getNotificationsConfig(){return t}async setLanguage(...e){return ya.apply(this,e)}async getLanguage(){return wa.apply(this)}async trackRemovedTabInternal(...e){return Za.apply(this,e)}async restoreRemovedTabInternal(){const e=await(async()=>{if(!Ga)throw new Error("Unable to pop last removed tab - IndexDB not supported");const e=Ga[ja],t=await e.toCollection().keys();if(t.length>0){const n=Math.max(...t.map(e=>Number(e))).toString(),r=await e.get(n);if(r){await e.delete(n);const{id:t,...a}=r;return a}}})();if("page"in e)if(await ve(e.identity)){const t=kn().Browser.wrapSync(e.identity);await t.addPage(e.page),await t.setActivePage(e.page.pageId)}else kn().createWindow({name:e.identity.name,workspacePlatform:{pages:[e.page],windowType:C.Browser}});else(function(e){return"window"in e})(e)&&kn().createWindow({workspacePlatform:{pages:e.window.pages,windowType:C.Browser}})}async trackVisitedSiteInternal(...e){return Qa.apply(this,e)}async getRecentlyVisitedSitesInternal(...e){return await di.apply(this,e)}async getFrequentlyVisitedSitesInternal(...e){return Xa.apply(this,e)}async searchSitesInternal(...e){return await ci.apply(this,e)}async getSearchProvidersInternal(...e){return await li.apply(this,e)}async getCuratedContentInternal(...e){return await ui.apply(this,e)}async handleRequestNavigationInternal(...e){}async refreshBookmarksInternal(){(await kn().Browser.getAllWindows()).forEach(async({identity:e})=>{(await $t(e)).dispatch(Ht.RefreshBookmarksInternal)}),(await Lt(`custom-bookmark-context-menu-${kn().identity.uuid}-${U}`)).dispatch(Ht.RefreshBookmarksInternal),await(async()=>{const e=await To();if(e){const t=await $t(e.identity,Eo);await t.dispatch(Ht.RefreshBookmarksInternal)}})()}async launchBookmarkInternal(e){return(async e=>{const{ctrlKey:t,metaKey:n,shiftKey:r}=e.sourceEvent,{url:a}=e.bookmark,{sourceIdentity:o}=e,i=await eo();if(!await we(o))return await(async e=>{const t=kn(),n=await Tn(e.url,e.url),r=await Ot(e.url,n);me((await t.Browser.createWindow({workspacePlatform:{pages:[r]}})).identity)})(e.bookmark);const s=kn().Browser.wrapSync(o),c=await s.getPages(),l=(await s._getLayoutsWithSelectedViews()).find(e=>e.isActive);if(!l)throw Error(`Browser ${o} does not have any active layouts`);const u=c.find(e=>e.isActive),d=1===Rn(u.layout.content),p=l.selectedViews[0];d?await(async({isWindows:e,ctrlKey:t,metaKey:n,currentViewId:r,browserIdentity:a,url:o,shiftKey:i,activePage:s,pages:c})=>{if(e?t:n){const e=kn().Browser.wrapSync(a),t=await Tn(o,o,a),n={...await Ot(o,t),attachedPageType:"singleView",singleViewName:o},r=c.findIndex(e=>e.pageId===s.pageId);await e._addPage(n,{index:r+1}),i&&e.setActivePage(n.pageId)}else fin.View.wrapSync(r).navigate(o)})({isWindows:i,ctrlKey:t,metaKey:n,currentViewId:p,browserIdentity:o,url:a,shiftKey:r,activePage:u,pages:c}):await(async({isWindows:e,ctrlKey:t,metaKey:n,currentViewId:r,browserIdentity:a,url:o,shiftKey:i,activeLayout:s})=>{if(e?t:n){const e=fin.View.wrapSync(r),t=await e.getCurrentStack(),n=(await t.getViews()).findIndex(e=>e.name===r.name),i={url:o,browserIdentity:a,title:o};await t.addView(i,{index:n+1})}else await fin.View.wrapSync(s.selectedViews[0]).navigate(o)})({isWindows:i,ctrlKey:t,metaKey:n,currentViewId:p,browserIdentity:o,url:a,shiftKey:r,activeLayout:l})})(e)}async updateDockFavoritesInternal(e){return(async e=>{const t=await To();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Eo);await n.dispatch(Gt.UpdateFavoriteEntries,e)}})(e)}async updateContentMenuInternal(e){return(async e=>{const t=await To();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Eo);await n.dispatch(Gt.UpdateContentMenu,e)}})(e)}async launchDockEntryInternal(e){return(async e=>(await Mo()).dispatch("launch-entry",e))(e)}async setDefaultDockButtonsOrderInternal(e){return(async e=>(await Mo()).dispatch("set-default-dock-buttons-order",e))(e)}async setDockFavoritesOrderInternal(e){return(async e=>(await Mo()).dispatch("set-dock-favorites-order",e))(e)}async addDockFavoriteInternal(e){return(async e=>(await Mo()).dispatch("add-favorite-entry",e))(e)}async removeDockFavoriteInternal(e){return(async e=>(await Mo()).dispatch("remove-favorite-entry",e))(e)}async navigateContentMenuInternal(e){return(async e=>{const t=await To();if(!t)throw new Error("Companion Dock window not found");{const n=await $t(t.identity,Eo);await n.dispatch(Gt.NavigateContentMenu,e)}})(e)}async getDockWorkspacesContextMenuInternal(){return(async()=>(await Mo()).dispatch("get-dock-workspaces-context-menu",void 0))()}async handleDockWorkspacesMenuResponseInternal(e){return(async e=>(await Mo()).dispatch("handle-dock-workspaces-menu-response",e))(e)}async focusAndExpandSearchInternal(){return(async()=>{const e=kn();let t=await async function(){const e=Array.from(_a.values());for(let t=e.length-1;t>=0;t--){const n=fin.Window.wrapSync(e[t]);if(await n.isShowing())return e[t]}}();if(t){const n=e.Browser.wrapSync(t),r=(await n.getPages()).at(-1),a=En(r.layout.content);if(1===a.length&&(e=>{if(e)try{return new URL(e).pathname.includes(H.EnterpriseBrowser)}catch(t){console.error("error parsing url: %O",e)}return!1})(a[0].url))await n.setActivePage(r.pageId);else{const e=await Wr(t),{newPageUrl:r}=await Br();await n._addDefaultPage({identity:n.identity,page:e,newPageUrl:r||void 0})}}else{const n=fin.Window.wrapSync({uuid:fin.me.uuid,name:de.DockCompanion}),r=await Se(await n.getBounds()),a=await async function(e,t,n){const r=await fin.System.getMonitorInfo(),a=n?.availableRect??r.primaryMonitor.availableRect,o={width:a.right-a.left,height:a.bottom-a.top},i=Math.min(600,o.height),s=Math.min(900,o.width),c=a.top+Math.floor((o.height-i)/2);return{height:i,width:s,left:a.left+Math.floor((o.width-s)/2),top:c}}(0,0,r),o=await Wr();t=(await e.Browser.createWindow({defaultHeight:600,defaultWidth:900,defaultLeft:a.left,defaultTop:a.top,workspacePlatform:{pages:[o]}})).identity}(await $t(t)).dispatch(Ht.FocusAndExpandSearchInternal)})()}}};function gi(e,t,n){const r=hi(e,n);try{return"function"==typeof t?e=>t(r(e)):Array.isArray(t)?[...t,r]:e=>new(r(e))}catch(e){throw new Error("WorkspacePlatform.init Error:",e)}}let mi;async function wi(e,t){if(!await ve({uuid:he.uuid,name:de.DockCompanion})){const n=await Oe(he);await t.createWindow(Ce({name:de.DockCompanion,url:await re()+H.EnterpriseDock,autoShow:!0,frame:!1,smallWindow:!0,saveWindowState:!1,defaultHeight:Pe,defaultWidth:xe,includeInSnapshots:!1,defaultTop:e.dockPosition?.top??_e,defaultLeft:e.dockPosition?.left??n.left-xe/2,workspacePlatform:{windowType:"enterprise",...e},throttling:"disabled",resizable:!1,maximizable:!1,backgroundColor:await wt("background1")}))}}function yi({overrideCallback:e,interopOverride:t,browser:n,notifications:r,analytics:a,integrations:o=[],workspaceAsar:i}){if(!E)throw new Error("Cannot be used outside an OpenFin env.");return mi||(mi=(async()=>{const s=fin.Platform.getCurrentSync();var c,l;if(s.once("platform-api-ready",()=>async function(){(async()=>{ue().on("window-closed",Ta)})(),async function(){const e=fin.Application.getCurrentSync();await e.addListener("window-focused",Aa),await e.addListener("window-closed",Ea)}(),ta(await na())}()),s.on("window-show-all-downloads",({name:e,uuid:t})=>{fa({name:e,uuid:t})}),n?.title&&(c=n.title,vo=c),(async e=>{xr=e,xr?.sendToOpenFin&&!await Er()&&(()=>{const e=N,t=e+H.Analytics,n=document.createElement("IFRAME");n.setAttribute("src",t),n.setAttribute("style","width: 0px !important"),n.setAttribute("style","height: 0px !important"),n.setAttribute("style","display: none !important"),document.body.appendChild(n),_r=async t=>{n.contentWindow.postMessage(t,e)}})();const t=fin.Application.getCurrentSync();t.addListener("view-created",async e=>{var t;je({type:"View",action:"Open View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid,url:await(t=e.viewIdentity,fin.View.wrapSync(t).getInfo().then(e=>e.url))}})}),t.addListener("view-destroyed",async e=>{je({type:"View",action:"Close View",value:e.viewIdentity.name,data:{uuid:e.viewIdentity.uuid}})}),t.addListener("window-closed",e=>{e.name.startsWith(de.BrowserMenu)||(je({type:"Window",action:"Close Window",value:e.name,data:{uuid:e.uuid}}),(async()=>{const e=Cr,t=await er();if(t.length===e.size)return;const n=t.reduce((e,t)=>e.set(t.pageId,1),new Map);for(const[t,r]of e)n.has(t)||(r.action="Close Page",je(r),Pr(t))})())})})(a),i){const e=`workspace-${encodeURIComponent(fin.me.uuid)}`,{baseUrl:t}=await fin.System.serveAsset({...i,hostName:e});X(t)}if(n?.browserBaseUrl&&X(n.browserBaseUrl),Ae(n)){Hn=!0;const e=sn();e.setWorkspaceStorageProxy(await(async e=>{const t=`storage-proxy-window-${crypto.randomUUID()}`,[n,r]=await Promise.all([fin.InterApplicationBus.Channel.connect(`channel-${t}`,{wait:!0}),fin.Window.create({autoShow:!1,includeInSnapshots:!1,name:t,url:e})]);return{setItem:(e,t)=>n.dispatch("setItem",{key:e,value:t}),destroy:()=>r.close()}})(`${await te()}${H.EnterpriseStorageProxy}`)),await e.trySynchronizeWorkspaceStorage()}return await fin.Platform.init({overrideCallback:gi(n,e||n?.overrideCallback,r),interopOverride:xa(t||n?.interopOverride,n)}),l={allowed:!0},Fe(We.Platform,l),await Promise.all(o.map(async e=>{((e,t)=>{Fe(`${We.Microflow}:${e}`,t,"integration-feature")})(e.workflowIntegrationName,{allowed:!0,apiVersion:$}),await e._initializeWorkflows()})),s})()),mi}const vi=async({theme:e,customActions:t,language:n,...r})=>{const a=$.split(".").map(e=>parseInt(e)),o=await(async e=>{if((await Q()).disableRuntimeValidation)return!0;if(await Ie())return!0;const t=(await fin.System.getVersion()).split(".").map(e=>parseInt(e));return e.every((n,r)=>!(r<3)||t[r]===e[r])})(a);if(!o)throw new Error(`Runtime version is not supported.  ${a[0]}.${a[1]}.${a[2]}.* is required`);var i;return e&&(async function(e){const t=e=>{if(!e.includes("#")&&!e.includes("rgb")&&!e.includes("hsl"))throw new Error("Background primary color is not the right format.")};e.forEach(e=>{"palette"in e&&t(e.palette.backgroundPrimary),"palettes"in e&&(t(e.palettes.dark.backgroundPrimary),t(e.palettes.light.backgroundPrimary))}),(e=>{const t=e[0];if("palette"in t){const{palette:e}=t;on.setPalettes({dark:e,light:e})}if("palettes"in t){const{dark:e,light:n}=t.palettes;on.setPalettes({dark:e,light:n})}})(e),pi=e}(e),i={allowed:!0},Fe(We.Theming,i)),t&&(Ma=t),await async function(e="en-US"){ba(e),function(e="en-US"){Bn().use(On.initReactI18next).init({lng:e,fallbackLng:"en-US",resources:{"en-US":{translation:Nn},"ja-JP":{translation:$n},"zh-CN":{translation:Wn},"ko-KR":{translation:Un},"ru-RU":{translation:jn},"de-DE":{translation:Ln},"zh-Hant":{translation:Fn}},interpolation:{escapeValue:!1}})}(e),await(async e=>{try{const n=await async function(){const e=await Q(),t=e?.translationOverridesUrl??"https://workspace.openfin.co/workspace/assets/translation-override.json";if(""===t)throw new ma("Empty string provided as url to translationOverridesUrl, overrides will not be fetched.");return await fetch(t).then(e=>e.json())}();(t=(e=>{const t=U.split(".");return Object.keys(e).filter(e=>{const n=e.split(".");if(3!==n.length)return console.warn(`Encountered a translation override version string in an unsupported format: ${e}. Versions must be in A.B.C format where A, B, C are either integers or the wildcard symbol 'x'.`),!1;const[r,a,o]=n;return!(r!==t[0]&&"x"!==r||a!==t[1]&&"x"!==a||o!==t[2]&&"x"!==o)})})(n),[...t].sort((e,t)=>ga(e)-ga(t))).forEach(t=>{const r=n[t];Object.keys(r).forEach(t=>{e.addResourceBundle(t,"translation",r[t],!0,!0)})})}catch(e){e instanceof ma?console.warn(e.message):console.error("Error applying a translation override: ",e)}var t})(Bn())}(n?.initialLanguage),yi(r)}})(),e.exports=o})()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{deepEqual:()=>k,deepMerge:()=>S,formatError:()=>P,getCommandLineArgs:()=>_,isBoolean:()=>y,isEmpty:()=>p,isInteger:()=>v,isNumber:()=>m,isNumberValue:()=>w,isObject:()=>f,isString:()=>h,isStringValue:()=>g,objectClone:()=>b,randomUUID:()=>C,sanitizeString:()=>x});var a={};n.r(a),n.d(a,{action:()=>$,getEndpointClient:()=>N,hasEndpoint:()=>L,init:()=>F,requestResponse:()=>U,requestStream:()=>j});var o={};n.r(o),n.d(o,{getToolbarButtons:()=>Me,updateBrowserWindowButtonsColorScheme:()=>Oe,updateToolbarButtons:()=>Re});var i={};n.r(i),n.d(i,{applyDecoratedSnapshot:()=>Ct,decorateSnapshot:()=>kt,getAppAssetExecutablePath:()=>xt,getSnapServer:()=>_t,init:()=>vt,isEnabled:()=>bt,launchApp:()=>Pt,prepareToApplyDecoratedSnapshot:()=>St});var s={};n.r(s),n.d(s,{centerContentInIdentity:()=>It,centerContentInRect:()=>At,findMonitorContainingPoint:()=>Tt,getAllVisibleWindows:()=>Bt,getBoundsCenter:()=>Rt,getIdentityBounds:()=>Et,getWindowPositionOptions:()=>Ot,getWindowPositionUsingStrategy:()=>Dt,pointInRect:()=>Mt});var c={};n.r(c),n.d(c,{deleteSavedFavorite:()=>Ar,getInfo:()=>Er,getPlatformActions:()=>Tr,getSavedFavorite:()=>_r,getSavedFavorites:()=>xr,init:()=>Pr,setSavedFavorite:()=>Ir});var l={};n.r(l),n.d(l,{createApp:()=>fa,createButton:()=>ca,createContainer:()=>aa,createHelp:()=>ra,createImage:()=>sa,createLabelledValue:()=>la,createLayout:()=>pa,createLink:()=>da,createTable:()=>ua,createText:()=>ia,createTitle:()=>oa});var u=n(651);class d{constructor(e,t){this._options=e,this._endpointProvider=t,this._logger=li(`Endpoint Client:${this._options.id}`)}hasEndpoint(e){return!!Array.isArray(this._options?.endpointIds)&&(!!this._options.endpointIds.some(t=>"*"===t||t===e)&&this._endpointProvider.hasEndpoint(e))}async action(e,t){return this.hasEndpoint(e)?this._endpointProvider.action(e,t):(this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for this action. Returning false.`),!1)}async requestResponse(e,t){if(this.hasEndpoint(e))return this._endpointProvider.requestResponse(e,t);this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for a request/response. Returning undefined.`)}async requestStream(e,t){if(this.hasEndpoint(e))return this._endpointProvider.requestStream(e,t);this._logger.warn(`The endpoint Id ${e} does not exist or you do not have permission to use it for a requestStream. Returning undefined.`)}}function p(e){return null==e}function f(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}function h(e){return null!=e&&"string"==typeof e}function g(e){return h(e)&&e.trim().length>0}function m(e){return null!=e&&"number"==typeof e}function w(e){return m(e)&&!Number.isNaN(e)&&Number.isFinite(e)}function y(e){return null!=e&&"boolean"==typeof e}function v(e){return m(e)&&Number.isInteger(e)}function b(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))}function k(e,t,n=!0){if(f(e)&&f(t)){const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n&&JSON.stringify(r)!==JSON.stringify(a))return!1;for(const a of r)if(!k(e[a],t[a],n))return!1;return!0}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!k(e[r],t[r],n))return!1}return JSON.stringify(e)===JSON.stringify(t)}function S(e,...t){if(!Array.isArray(t)||0===t.length)return e;const n=e,r=t.shift();let a;if(f(n)&&f(r))a=Object.keys(r);else if(Array.isArray(r)){if(!Array.isArray(e))return r;a=Object.keys(r).map(e=>Number.parseInt(e,10))}if(a){const e=r;for(const t of a){const r=e[t];f(r)?(p(n[t])&&(n[t]={}),S(n[t],r)):Array.isArray(r)?(p(n[t])&&(n[t]=[]),S(n[t],r)):n[t]=r}}return S(e,...t)}function C(){return"randomUUID"in globalThis.crypto?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){const t=globalThis.crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4;return(Number(e)^t).toString(16)})}function P(e){return p(e)?"":e instanceof Error?e.message:g(e)?e:f(e)&&"message"in e&&h(e.message)?e.message:JSON.stringify(e)}function x(e){return g(e)?e.replace(/<[^>]*>?/gm,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/\n\s*\n/g,"\n"):""}function _(e){if(!g(e))return[];const t=e.match(/(\w+=)?("[^"]*"|'[^']*'|[^ ]+)/g);return p(t)?[]:t}const I=["GET","POST","DELETE","PUT","PATCH"],A=li("Endpoint"),E=[];let T,M,R,O=[],D=!1,B=!0,W=!0;async function F(e,t){if(e){const n=e.endpoints??[];n.length>0&&(A.info("Adding the following endpoints to the endpoint provider",n),E.push(...n)),O=await qo(e,"endpoint"),await Jo(O,t),D=!0,W=e?.endpointClients?.restrictToListed??!0,T=e?.endpointClients?.clientOptions??[],M={...e?.endpointClients?.defaults},B=!W||0!==T.length,R={hasEndpoint:L,action:$,requestResponse:U,requestStream:j}}}async function N(e){if(!D)return void A.warn("A endpoint client was requested before the endpoint provider was registered.",e);if(!B)return void A.warn("Endpoint client creation is disabled. If you this is not expected please check you Endpoint Provider -> Endpoint Clients settings.");const t=T.find(t=>t.id===e.id);if(W&&p(t))return void A.warn(`Endpoint client creation is limited to those listed in the endpoint clients section of the endpoint provider. We have been unable to find an entry with the id: ${e.id}. `);if(!p(t)&&!1===t.enabled)return void A.warn(`The options passed to create a endpoint client was a listed entry and it's enabled setting is set to false so a endpoint client will not be created. Id: ${e.id}`);const n=Object.assign(e,M,t??{});return new d(n,R)}function L(e){return E.some(t=>t.id===e)}async function $(e,t){const n=function(e){const t=E.find(t=>t.id===e);return p(t)&&A.warn(`Specified Endpoint Id ${e} is not available`),t}(e);if(p(n))return!1;const r=n.type;if("fetch"===r){const{url:a,...o}=n.options;if(a){const n=z(a,o,t);if(!g(n.options.method)||!I.includes(n.options.method))return A.warn(`${e} specifies a type: ${r} with a method ${n.options.method} that is not supported.`),!1;try{return(await fetch(n.url,n.options)).ok}catch(t){A.error(`${e} action returned an error during fetch`,t)}}}else if("module"===r){const e=await V(n.typeId);return!!e?.action&&e.action(n,t)}return A.warn(`${e} specifies a type: ${r} that is not supported`),!1}async function U(e,t){const n=E.find(t=>t.id===e);if(p(n))return;const r=n.type;if("fetch"===r){const{url:a,...o}=n.options;let i=a;if(p(i)&&(i=b(t).url),i){const n=z(i,o,t);if(!g(n.options.method)||!I.includes(n.options.method))return void A.warn(`${e} specifies a type: ${r} with a method ${n.options.method} that is not supported.`);try{const e=await fetch(n.url,n.options);if(e.ok)return await e.json()}catch(t){A.error(`${e} requestResponse returned an error during fetch`,t)}}return}if("module"===r){const e=await V(n.typeId);if(!e?.requestResponse)return;return e.requestResponse(n,t)}A.warn(`${e} specifies a type: ${r} that is not supported`)}async function j(e,t){const n=E.find(t=>t.id===e);if(p(n))return;const r=n.type;if("module"===r){const e=await V(n.typeId);if(!e?.requestStream)return;return e.requestStream(n,t)}A.warn(`${e} specifies a type: ${r} that is not supported`)}async function V(e){const t=O.find(t=>t.definition.id===e);if(!p(t))return t.implementation;A.warn(`Specified Endpoint Module Id: ${e} is not available`)}function z(e,t,n){const r=b(n);if(!p(r)){const n=Object.keys(r);for(const t of n){const n=`[${t}]`;e.includes(n)&&(e=e.replace(n,encodeURIComponent(r[t])),delete r[t])}t.headers=t.headers??{},t.headers.Accept="application/json","POST"!==t.method&&"PUT"!==t.method&&"PATCH"!==t.method||(t.body=JSON.stringify(r),t.headers["Content-Type"]="application/json")}return{url:e,options:t}}const G={View:{id:"view",label:"View",description:"This manifest type expects the manifest setting to be pointed to a json file that contains view options."},InlineView:{id:"inline-view",label:"View",description:"This manifest type expects the manifest setting to have the options inline rather than a url to a json file."},Window:{id:"window",label:"Window",description:"This manifest type expects the manifest setting to point to a json file that contains classic window options."},InlineWindow:{id:"inline-window",label:"Window",description:"This manifest type expects the manifest setting to have the classic window options inline rather than a url to a json file."},Snapshot:{id:"snapshot",label:"Snapshot",description:"This manifest type expects the manifest setting to point to a json file that contains a snapshot (one or more windows)"},InlineSnapshot:{id:"inline-snapshot",label:"Snapshot",description:"This manifest type expects the manifest setting to have a snapshot inline rather than a url to a json file that contains a snapshot (one or more windows)"},Manifest:{id:"manifest",label:"App",description:"This manifest type expects the manifest setting to point to a json file that is an openfin manifest. An openfin app."},External:{id:"external",label:"Native App",description:"This manifest type expects the manifest setting to point to an exe."},InlineExternal:{id:"inline-external",label:"Native App",description:"This manifest type expects the manifest setting to point to an exe using an inline launch external process request."},Appasset:{id:"appasset",label:"Native App",description:"This manifest type expects the manifest setting to point to an app asset name."},InlineAppAsset:{id:"inline-appasset",label:"Native App",description:"This manifest type expects the manifest setting to point to an app asset config using an inline launch external process request."},DesktopBrowser:{id:"desktop-browser",label:"Desktop Browser",description:"This manifest type expects the manifest setting to point to a url which will be launched in the default desktop browser."},Endpoint:{id:"endpoint",label:"Endpoint",description:"This manifest type expects the manifest setting to point to an endpoint (which should be defined in the endpointProvider). Action will be called on that endpoint and passed the specified app."},Connection:{id:"connection",label:"Connected App",description:"This manifest type expects the manifest setting to have a uuid. This must match to a connection registered in the connectionProvider with app support."},UnregisteredApp:{id:"unregistered-app",label:"Unregistered App",description:"This manifest type represents web page instances that have been launched that are not linked to an app. This manifest type should not be in the permitted manifest type list for app feeds as it is for dynamic urls."}};let H=[];const q=li("Lifecycle"),K={};async function J(e,t,n){q.info(`Request to fire lifecycle event ${t} received`);const r=K[t];if(!p(r)){r.platform=e,r.lastPayload=n,q.info(`Notifying ${r.subscribers.length} subscribers of lifecycle event ${t}`);const a=[...r.subscribers];await Promise.all(a.map(async r=>{q.info(`Notifying subscriber ${r.id} of event ${t}`),await r.handler(e,n)}))}}function Y(e,t){const n=C(),r=K[e]??{subscribers:[]};return r.subscribers.push({id:n,handler:t}),K[e]=r,q.info(`Subscription for lifecycle event ${e} received. Subscription id: ${n} returned`),p(r.platform)||setTimeout(async()=>{p(r.platform)||await t(r.platform,r.lastPayload)},0),n}function Z(e,t){q.info(`Request to unsubscribe from lifecycle event ${t} with id: ${e}`);const n=K[t];if(!p(n)){const t=n.subscribers,r=t.findIndex(t=>t.id===e);r>=0&&t.splice(r,1)}}const Q=li("ConditionProvider"),X={};let ee,te=[];function ne(e,t,n=!0){p(X[e])?(Q.info("Registering condition",e),X[e]=t):n?(Q.warn("Replacing existing condition checker that has been registered with this name:",e),X[e]=t):Q.warn("Not replacing existing condition checker that has been registered with this name:",e)}async function re(e,t,n){if(Array.isArray(t))for(const r of t)if(!await ae(e,r,n))return!1;return!0}async function ae(e,t,n){return!p(X[t])&&X[t](e,n)}async function oe(e){const t=(0,u.getCurrentSync)();await J(t,"condition-changed",{conditionId:e})}const ie=li("Settings"),se="platform-settings";async function ce(){const e=await fin.Application.getCurrent();return(await e.getManifest()).customSettings??{}}async function le(){if(p(ee)){ee=await ce();const e=ee?.endpointProvider;if(!p(e)){const t=Qo();if(await F(e,t),L(se)){ie.info(`${se} endpoint specified. Fetching platform settings.`);const e=await U(se);return ie.info("Merging platform-settings over manifest settings."),ee={...ee,...e},ee}}ie.info("Settings based on manifest settings.")}return ee}function ue(e,t){if(e.startsWith("file:///")){const n=e.replace("file:///","").toLowerCase();return t.some(e=>n.startsWith(e.toLowerCase()))?n:void 0}const n=new URL(e);return t.includes(n.hostname)?n.hostname:void 0}const de={light:{brandPrimary:"#0A76D3",brandSecondary:"#1E1F23",backgroundPrimary:"#FAFBFE",background1:"#FFFFFF",background2:"#FAFBFE",background3:"#F3F5F8",background4:"#ECEEF1",background5:"#DDDFE4",background6:"#C9CBD2",statusSuccess:"#35C759",statusWarning:"#F48F00",statusCritical:"#BE1D1F",statusActive:"#0498FB",inputBackground:"#ECEEF1",inputColor:"#1E1F23",inputPlaceholder:"#383A40",inputDisabled:"#7D808A",inputFocused:"#C9CBD2",textDefault:"#1E1F23",textHelp:"#2F3136",textInactive:"#7D808A",contentBackground1:"#0A76D3",contentBackground2:"#000000",contentBackground3:"#000000",contentBackground4:"#000000",contentBackground5:"#000000",linkDefault:"#6CADE5",linkHover:"#0A76D3"},dark:{brandPrimary:"#0A76D3",brandSecondary:"#383A40",backgroundPrimary:"#1E1F23",background1:"#111214",background2:"#1E1F23",background3:"#24262B",background4:"#2F3136",background5:"#383A40",background6:"#53565F",statusSuccess:"#35C759",statusWarning:"#F48F00",statusCritical:"#BE1D1F",statusActive:"#0498FB",inputBackground:"#53565F",inputColor:"#FFFFFF",inputPlaceholder:"#C9CBD2",inputDisabled:"#7D808A",inputFocused:"#C9CBD2",textDefault:"#FFFFFF",textHelp:"#C9CBD2",textInactive:"#7D808A",contentBackground1:"#0A76D3",contentBackground2:"#000000",contentBackground3:"#000000",contentBackground4:"#000000",contentBackground5:"#000000",linkDefault:"#6CADE5",linkHover:"#0A76D3"}};var pe;!function(e){e.Light="light",e.Dark="dark"}(pe||(pe={}));const fe=li("Themes");let he,ge,me;async function we(){const e=await Ce(),t=await ye();return 0===e.length?de[t]:"palette"in e[0]?e[0].palette:e[0].palettes[t]}async function ye(){if(!ge)try{const e=(0,u.getCurrentSync)(),t=await e.Theme.getSelectedScheme();if(t===u.ColorSchemeOptionType.System?ge=Ae():t===u.ColorSchemeOptionType.Dark?ge=pe.Dark:t===u.ColorSchemeOptionType.Light&&(ge=pe.Light),!ge){ge=pe.Dark;const e=await Ce();e.length>0&&(ge=e[0].default??pe.Dark,"palette"in e[0]&&e[0].label.toLowerCase().includes("light")&&(ge=pe.Light))}}catch{}return ge??pe.Dark}async function ve(e){ge=p(e)?Ae():e,await Se()}async function be(){const e=await Ce();return 0===e.length?"default":e[0].id??e[0].label}async function ke(){const e=await Ce();return 0===e.length?"default":e[0].iconFolder??e[0].id??e[0].label}async function Se(){const e=(0,u.getCurrentSync)(),[t,n,r]=await Promise.all([le(),ye(),we()]);await J(e,"theme-changed",{schemeType:n,palette:r});const a=await fin.me.interop.joinSessionContextGroup("platform/events");await a.setContext({type:"platform.theme",prefix:t?.themeProvider?.cssVarPrefix,schemeNames:t?.themeProvider?.schemaNames,schemeType:n,palette:r})}async function Ce(){if(!he){const e=await le();he=function(e){const t=[];if(Array.isArray(e)){const n=Ae();for(const r of e){const e=r;if("palette"in e&&p(e.palette)&&delete e.palette,"palettes"in e&&p(e.palettes)&&delete e.palettes,"palette"in e||"palettes"in e){let r=!1;if("palette"in e)e.palette=_e(e.palette,e.label??"",de[pe.Dark]),r=!p(e.palette);else if("palettes"in e){const t={dark:_e(e.palettes?.[pe.Dark],e.label??"",de[pe.Dark]),light:_e(e.palettes?.[pe.Light],e.label??"",de[pe.Light])};r=!p(t[pe.Dark])&&!p(t[pe.Light]),e.palettes=t}r?Ie(e,n)?(fe.info(`Found a theme that matches system color scheme preferences and making it the default theme: ${n}`),t.unshift(e)):t.push(e):fe.warn(`Found a theme that does not contain any colors: ${e.id??e.label}`)}}}return t}(e?.themeProvider?.themes)}return he.slice()}async function Pe(){return{getThemeId:be,getIconFolder:ke,getPalette:we,getColorSchemeMode:ye,themeUrl:async e=>Ee(e,await ke(),await ye())}}async function xe(){return{...await Pe(),setCurrentColorSchemeMode:ve}}function _e(e,t,n){if(!e)return;const r=Object.keys(e);if(0===r.length)return;const a={...n};for(const t of r){const n=e[t];g(n)&&(a[t]=n)}const o="brandPrimary",i="brandSecondary",s="backgroundPrimary";return e[o]||fe.warn(`Theme: ${t} : ${o} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[o]}`),e[i]||fe.warn(`Theme: ${t} : ${i} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[i]}`),e[s]||fe.warn(`Theme: ${t} : ${s} not specified (it is required if specifying other theme palette settings). Providing default of: ${n[s]}`),a}function Ie(e,t){return"palette"in e?e.label.toLowerCase().includes(t):"palettes"in e&&!p(e.palettes[t])}function Ae(){return window.matchMedia?.("(prefers-color-scheme: dark)").matches?pe.Dark:pe.Light}function Ee(e,t,n){return e?e.replace(/{theme}/g,t).replace(/{scheme}/g,n):void 0}let Te=!1;async function Me(e){let t;const n=await De();if(!p(n)){const r=await ke(),a=await ye(),o=(0,u.getCurrentSync)();t=[];for(const i of n)i.include&&await re(o,i.conditions,{callerType:"browser",customData:e})&&t.push(Be(i.button,r,a))}return t}async function Re(e,t,n){const r=e.findIndex(e=>e.type===u.BrowserButtonType.Custom&&e.action.customData.sourceId===t);if(-1!==r){const t=await De();if(!p(t)){const a=t.find(e=>{if(e.button.type===u.BrowserButtonType.Custom){const t=e.button;return t?.action?.customData?.sourceId===n}return!1});if(a){const t=await ke(),n=await ye();e[r]=Be(a.button,t,n)}return e}}return e}async function Oe(e){if(me){const t=await e.openfinWindow.getOptions();if("platform"!==t.workspacePlatform.windowType){const n=t.workspacePlatform.toolbarOptions?.buttons;if(Array.isArray(n)){const t=[],r=await ke(),a=await ye();for(const e of n){if(e.type===u.BrowserButtonType.Custom){const t=e.action?.id;if(t){const n=me.find(e=>e.button.action?.id===t),o=n?.button;o?.iconUrl&&(e.iconUrl=Ee(o.iconUrl,r,a))}}t.push(e)}await e.replaceToolbarOptions({buttons:t})}}}}async function De(){if(Te)return me;const e=await le();return me=e?.browserProvider?.toolbarButtons,Te=!0,Y("theme-changed",async()=>{const e=(0,u.getCurrentSync)(),t=await e.Browser.getAllWindows();await Promise.all(t.map(async e=>Oe(e)))}),me}function Be(e,t,n){const r=b(e),a=Object.keys(r);for(const e of a)if(e.toLowerCase().endsWith("iconurl")){const a=r[e];if(h(a))r[e]=Ee(a,t,n);else if(f(a))for(const e of Object.keys(a))a[e]=Ee(a[e],t,n)}return r}let We="setAsForeground";function Fe(e){const t=[];return JSON.stringify(e,(e,n)=>(n?.name?.length&&!p(n.url)&&t.push(n.name),n)),t}async function Ne(e){let t;if(p(e.identity)?p(e.view)||(t=e.view):t=fin.View.wrapSync(e.identity),!p(t)){const e=await async function(e){const t=await e.getCurrentWindow();let n=[];const r=(0,u.getCurrentSync)();if(t.identity.name===fin.me.identity.uuid)n=await r.Browser.getAllAttachedPages();else{const e=r.Browser.wrapSync(t.identity);n=await e.getPages()}let a;for(const t of n)if(Fe(t.layout).includes(e.identity.name)){a=t;break}return a}(t);if(p(e)){const e=await t.getCurrentWindow();await Le({window:e})}else await async function(e){let t,n;const r=(0,u.getCurrentSync)(),a=e.identity?.pageId,o=e?.identity?.window,i=e.page;if(p(a)||p(o)?p(i)||p(i.parentIdentity)||(t=i,n=r.Browser.wrapSync(i.parentIdentity)):(n=r.Browser.wrapSync(o),t=await n.getPage(a)),!p(n)){if(!p(t))try{(await n.getPages()).length>1&&await n.setActivePage(t.pageId)}catch{}await Le({identity:n.identity})}}({page:e});await t.focus()}}async function Le(e,t){let n;p(e.identity)?p(e.window)||(n=e.window):n=fin.Window.wrapSync(e.identity);const r=t??We;n&&("minimized"===await n.getState()&&await n.restore(),await n.isShowing()&&("bringToFront"===r?await n.bringToFront():"bringToFrontAndFocus"===r?(await n.bringToFront(),await n.focus()):await n.setAsForeground()))}async function $e(e,t){const n=(0,u.getCurrentSync)();let r;return r=h(e)?{url:e,target:void 0}:e,n.createView(r,t)}var Ue={827:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,a)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function a(o){r.once&&e.removeEventListener(t,a),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},je={};function Ve(e){var t=je[e];if(void 0!==t)return t.exports;var n=je[e]={exports:{}};return Ue[e](n,n.exports,Ve),n.exports}Ve.d=(e,t)=>{for(var n in t)Ve.o(t,n)&&!Ve.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Ve.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ze={};Ve.d(ze,{q:()=>Ye});var Ge=Ve(827);const He="openfin-snap",qe="1.3.0",Ke=(e,t)=>`${e} ${t instanceof Error?t.message:"string"==typeof t?t:JSON.stringify(t)}`,Je="internal-generated-window-";class Ye{constructor(e){if(this.server_id=e,this.emitter=new Ge.EventEmitter,this.__extensions=[],!fin)throw new Error("OpenFin is not available")}async start(e){try{const e=await fin.System.getRuntimeInfo();"x64"!==e?.architecture&&console.warn(`The architecture of the connected OpenFin runtime is '${e.architecture}' - Window snapping is currently only supported with 64-bit applications. Snapping will be disabled.`)}catch(e){console.warn(`Could not get runtime info: ${e}`)}const t=await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");if(!t.granted)throw new Error("The 'System.launchExternalProcess' permission is required to launch the Snap server");if(t.rawValue){if(e?.executablePath&&!t.rawValue?.executables?.enabled)throw new Error("The 'System.launchExternalProcess.assets' permission is required to launch the Snap server from an executable path");if(!e?.executablePath&&!t.rawValue?.assets?.enabled)throw new Error("The 'System.launchExternalProcess.assets' permission is required to launch the Snap server from a URL")}e?.executablePath||await(async e=>{const t=await fin.Application.getCurrentSync().getManifest(),n=t.appAssets?.find(e=>e.alias===He);if(n)return void console.warn("Detected Snap package in app manifest appAssets",n);if(await(async()=>{try{return(await fin.System.getAppAssetInfo({alias:He})).version===qe}catch(e){return!1}})())return void console.info("Using existing Snap package");const r=e??`https://cdn.openfin.co/release/snap/${qe}/snap.zip`;console.info(`Downloading Snap asset from: '${r}'`);const a={alias:He,src:`${r}`,target:"OpenFinSnap.exe",version:qe};console.info("Downloading Snap package",a);try{await fin.System.downloadAsset(a,()=>{})}catch(e){throw new Error(Ke("Unable to download Snap package.",e))}})(e?.customSnapAssetSource);const n=await this.build_command_line(e);let r={alias:He,arguments:n,lifetime:"window"};e?.executablePath&&(r={path:e.executablePath,arguments:n,lifetime:"window"});try{this.snap_identity=await fin.System.launchExternalProcess(r)}catch(e){throw new Error(Ke("Failed to launch the Snap server.",e))}return this.connect()}async connect(){this.client=await fin.InterApplicationBus.Channel.connect(`snap-server-core-${this.server_id}`),this.client.register("snap_handshake",async(e,t)=>{try{await fin.System.registerUsage({type:"adapter-feature",data:{apiVersion:e.version,componentName:"snap-server"}})}catch{console.warn("SnapSDK: Failed to register usage for Snap Server")}});try{await fin.System.registerUsage({type:"adapter-feature",data:{apiVersion:"1.3.0",componentName:"snap-client"}})}catch{console.warn("SnapSDK: Failed to register usage for Snap Server")}this.client.register("snap_updates",(e,t)=>this.handleSnapEvents(e,t)),this.__extensions.forEach(e=>e.onConnected(this.client))}__addExtension(e){this.__extensions.push(e)}async stop(){if(!this.client)throw new Error("Snap server is not running");await(this.client?.dispatch("snap_api_invoke",{action:"shutdown"}))}async getLayout(){if(!this.client)throw new Error("Snap server is not running");const e=await(this.client?.dispatch("snap_api_invoke",{action:"serialiseLayout"}));return e?.payload.layout}async setLayout(e,t=!0){if(!this.client)throw new Error("Snap server is not running");await(this.client?.dispatch("snap_api_invoke",{action:"deserialiseLayout",payload:{layout:e,reset:t}}))}async prepareToApplySnapshot(e,t){if(!e||e.options?.closeExistingWindows||e.options?.closeSnapshotWindows)return this.needToResetLayout=!0,void await(this.client?.dispatch("snap_api_invoke",{action:"resetAll"}));this.needToResetLayout=!1;const n=e.snapshot,r=JSON.stringify(n,null,2),a=n.snap;if(!a)return;const o=t??nt,i=(await this.getLayout())?.clients.map(e=>e.id)??[],s=et(n.windows),c=Array.from(s.keys()).filter(e=>i.includes(e));a.clients.filter(e=>c.includes(e.id)).forEach(e=>{const t=e.id,n=o(t);e.id=n,tt(a.connections,t,n);const r=s.get(t);r.customData.snapClientId=n,r.name=n});const l=JSON.stringify(n,null,2);console.debug(`Snap SDK modified snapshot data before applying it.\nOriginal snapshot:\n${r}\nModified snapshot:\n${l}`)}async decorateSnapshot(e){return{...e,snap:await this.getLayout()}}async applySnapshot(e){e.snap&&await this.setLayout(e.snap,this.needToResetLayout)}async launch(e){if(!this.client)throw new Error("Not connected to an Snap server");e.appAssetInfo&&(e.path=await Ze({target:e.path,...e.appAssetInfo})),console.log("options: ",e);const t={action:"startProcess",payload:{...e,args:e.args||[]}};if(e.strategy){const{type:n,...r}=e.strategy;t.payload.strategy={type:n,parameters:{...r}}}const n=await(this.client?.dispatch("snap_api_invoke",t));if(n?.payload?.success)return{process_id:n.payload.process_id};throw new Error(`Failed to launch process: ${n?.payload?.error}`)}async registerWindow(e,t,n){await(this.client?.dispatch("snap_api_invoke",{action:"hookAndRegisterWindow",payload:{clientId:e,windowHandle:t,resizingBehavior:n}}))}async enableAutoWindowRegistration(){const e=e=>this.handleNewWindow(e);return await fin.Platform.getCurrentSync().addListener("window-created",e),async()=>{await fin.System.removeListener("window-created",e)}}async attachWindows(e,t,n,r){await(this.client?.dispatch("snap_api_invoke",{action:"attach",payload:{targetClientId:e,toAttachClientId:t,targetSide:n,offset:r}}))}async detachFromGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"detachFromGroup",payload:{clientId:e}}))}async getAttached(e){return(await(this.client?.dispatch("snap_api_invoke",{action:"getAttachedInstances",payload:{clientId:e}}))).payload.attached}async hasAttachments(e){return(await(this.client?.dispatch("snap_api_invoke",{action:"hasAttachments",payload:{clientId:e}}))).payload.hasAttachments}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}once(e,t){this.emitter.once(e,t)}async getGroupIdForWindow(e){const t="number"==typeof e?{nativeWindowId:e}:{clientId:e},n=await(this.client?.dispatch("snap_api_invoke",{action:"getGroupIdForWindow",payload:t}));if(!n.payload.groupId)throw new Error("No group found for window");return n.payload.groupId}async getWindowResizable(e){const t="number"==typeof e?{nativeWindowId:e}:{clientId:e},n=await(this.client?.dispatch("snap_api_invoke",{action:"getResizable",payload:t}));if(null===n.payload.resizable)throw new Error("No window found for given ID");return n.payload.resizable}async setWindowResizable(e,t){const n="number"==typeof e?{nativeWindowId:e,resizable:t}:{clientId:e,resizable:t};await(this.client?.dispatch("snap_api_invoke",{action:"setResizable",payload:n}))}async getWindowsInGroup(e){const t=await(this.client?.dispatch("snap_api_invoke",{action:"getWindowsInGroup",payload:{groupId:e}}));return t.payload.windows?t.payload.windows.map(e=>({nativeId:e[0],clientId:e[1]})):[]}async getAllGroupIds(){return(await(this.client?.dispatch("snap_api_invoke",{action:"getAllGroupIds"}))).payload.groupIds}async minimizeGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"minimizeGroup",payload:{groupId:e}}))}async restoreGroup(e){await(this.client?.dispatch("snap_api_invoke",{action:"restoreGroup",payload:{groupId:e}}))}async handleNewWindow(e){const t=await fin.Window.wrap({uuid:e.uuid,name:e.name}),n=await t.getNativeId();let r=t.identity.name;const a=await t.getOptions();if(void 0!==a.includeInSnapshots&&!1===a.includeInSnapshots)return void console.log(`SnapSDK: Not registering ${e.uuid}:${e.name}, Window is explicitly excluded -includeInSnapshots == false`);const o=a.customData||{};o.snapClientId?r=o.snapClientId:await t.updateOptions({customData:{...o,snapClientId:r}}),console.log(`SnapSDK: Auto-registering window: snapClientId:${r}, handle ${n}, uuid:${e.uuid}, name:${e.name}`),await this.registerWindow(r,n,o.snapResizingBehavior)}emit_event(e,...t){this.emitter.emit(e,...t)}handleSnapEvents(e,t){switch(this.emit_event("all-events",{type:e.action,payload:e.payload}),e.action){case"clientRegistered":this.emit_event("client-registered",{clientId:e.payload.clientId,windowHandle:`#${e.payload.windowHandle.toString(16).toUpperCase()}`,owningProcessId:e.payload.owningProcessId});break;case"clientUnRegistered":this.emit_event("client-unregistered",{...e.payload});break;case"moveSizeCompleted":this.emit_event("move-size-completed",{...e.payload});break;case"clientsAttached":this.emit_event("clients-attached",{...e.payload});break;case"clientDetached":this.emit_event("client-detached",{...e.payload});break;case"groupsChanged":this.emit_event("groups-changed",{...e.payload});break;case"clientActivated":this.emit_event("client-activated",{...e.payload});break;case"clientDeactivated":this.emit_event("client-deactivated",{...e.payload})}}async build_command_line(e){let t=`--id ${this.server_id} `;e?.showDebug&&(t+=" --show-debug "),e?.disableGPUAcceleratedDragging&&(t+=" --disable-gpu-accelerated-dragging true "),e?.disableBlurDropPreview&&(t+=" --blur-drop-preview false "),void 0!==e?.blurEffectPerformanceThreshold&&(t+=` --blur-effect-performance-threshold=${e?.blurEffectPerformanceThreshold} `),e?.disableUserUnstick&&(t+=" --disable-user-unstick "),!0!==e?.keyToStick&&"string"!=typeof e?.keyToStick||(t+=` --ks=${!0===e.keyToStick?"ctrl":e.keyToStick} `),e?.keyToUnstick&&(t+=` --kus=${e.keyToUnstick} `),e?.hideTaskbarEntry&&(t+=" --no-tb "),e?.taskbarIconGroup&&(t+=` --tb-id=${e?.taskbarIconGroup} `),e?.taskbarIcon&&(t+=` --tb-icon=${e?.taskbarIcon} `),e?.disableRuntimeHeartbeating&&(t+=" --no-hb "),e?.autoHideClientTaskbarIcons&&(t+=" --tb-auto-hide "),e?.theme&&(t+=` --thm=${e.theme} `),e?.defaultResizingBehavior&&(t+=` --res=${e?.defaultResizingBehavior} `);const n=await fin.System.getRuntimeInfo();return t+=`--runtime-port ${n.port} `,t+=`--runtime-version ${n.version} `,t.trim()}}const Ze=async e=>{let t=(await fin.System.getRuntimeInfo()).args["local-startup-url"].replace("config.json","");const n=t.includes("\\")?"\\":"/";return t.endsWith(n)&&(t=t.slice(0,-1)),[t,"assets",e.alias,e.version,e.target].join(n)},Qe=()=>"undefined"!=typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),Xe=e=>/^app:\/[^/]+\/[^/]+$/.test(e??""),et=e=>{const t=new Map;return e.forEach(e=>{const n=!e.name,r=e.name?.startsWith(Je)??!1,a=e.customData?.snapClientId;(n||r||Xe(e.name))&&a&&t.set(a,e)}),t},tt=(e,t,n)=>{Object.values(e).forEach(e=>{e.attachedClientId===t?e.attachedClientId=n:e.targetClientId===t&&(e.targetClientId=n)})},nt=e=>{if(!Xe(e))return`${Je}${Qe()}`;const t=e.split("/");return t[t.length-1]=Qe(),t.join("/")};var rt=ze.q;let at;const ot=`splash-${C()}`;let it,st,ct,lt,ut;async function dt(e){if(it&&st)try{await it.dispatch(st,"progress",{progress:e})}catch(e){console.error(e)}}async function pt(e){if(!p(ct))return ct;try{const e=await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");ct=e?.granted}catch(t){e?.error("Error while querying for System.launchExternalProcess permission",t),ct=!1}const t=await ht();return ct=ct&&t,ct}async function ft(e){if(!p(lt))return lt;try{const e=await fin.System.queryPermissionForCurrentContext("System.downloadAsset");lt=e?.granted}catch(t){e?.error("Error while querying for System.downloadAsset permission",t),lt=!1}const t=await ht();return lt=lt&&t,lt}async function ht(){if(!p(ut))return ut;const e=await fin.System.getHostSpecs();return ut=!e.name.toLowerCase().startsWith("mac"),ut}const gt=li("Snap"),mt="app:";let wt,yt=!1;async function vt(e){if(!p(e)&&e?.enabled){if(p(e?.id))return void gt.error("Cannot initialize Snap without the SnapProvider.id");if(p(e.serverOptions)&&(e.serverOptions={}),await dt("Snap"),!g(e.serverOptions.executablePath)&&!p(e?.serverAssetInfo)){const t=e.serverAssetInfo;if(p(t.src))return void gt.error("Cannot initialize Snap without the SnapProvider.serverAssetInfo.src");const n=t.alias;if(p(n))return void gt.error("Cannot initialize Snap without the SnapProvider.serverAssetInfo.alias");const r=t.target;if(p(r))return void gt.error("Cannot initialize Snap without the SnapProvider.serverAssetInfo.target");const a=t.version;if(p(a))return void gt.error("Cannot initialize Snap without the SnapProvider.serverAssetInfo.version");if("SNAP_ASSET_URL"===t.src)return void gt.error("Please request the SNAP_ASSET_URL from OpenFin and update SnapProvider.serverAssetInfo.src before running the platform");if(!await ft(gt))return void gt.warn("Snap is enabled but the platform does not have the capability or permission to download app assets.");try{await fin.System.downloadAsset(t,e=>{const t=Math.floor(e.downloadedBytes/e.totalBytes*100);gt.info(`Downloaded ${t}% of Snap Server asset`)}),e.serverOptions.executablePath=await xt({alias:n,target:r,version:a})}catch(e){gt.error("Unable to start Snap Server while trying to fetch and determine path of app asset",P(e))}}if(!await pt(gt))return void gt.warn("Snap is enabled but the platform does not have the capability or permission to launch external processes.");try{wt=new rt(e.id);const t=e.showDebugWindow;!p(t)&&p(e?.serverOptions?.showDebug)&&(e.serverOptions.showDebug=t),await wt.start(e.serverOptions),(e.enableAutoWindowRegistration??1)&&await wt.enableAutoWindowRegistration(),yt=!0}catch(e){gt.error("Unable to start Snap Server",P(e))}}}function bt(){return yt}async function kt(e){try{wt&&(e=await wt.decorateSnapshot(e))}catch(e){console.error("Failed to decorate snapshot.",P(e))}return e}async function St(){try{if(wt){const e=await wt.getLayout(),t={clients:e.clients.filter(e=>e.id.startsWith(mt)),connections:[],version:e.version};return await wt.setLayout(t),t.clients}}catch(e){console.error("Failed to prepare decorated snapshot.",P(e))}return[]}async function Ct(e,t){try{const n=e;if(wt&&!p(n.snap)){const r=[],a=[];for(const e of n.snap.clients)if(e.id.startsWith(mt)){const n=t.findIndex(t=>t.id===e.id);n>=0?t.splice(n,1):r.push(e)}for(const e of r){const r=e.id.split("/")[1],o=t.findIndex(e=>e.id.includes(`/${r}/`));if(o>=0){for(const r of n.snap.connections)r.attachedClientId===e.id?r.attachedClientId=t[o]:r.targetClientId===e.id&&(r.targetClientId=t[o]);e.id=t[o].id,t.splice(o,1)}else a.push(e)}for(const e of t)e.state="minimized",n.snap.clients.push(e);const o=new Map;for(const e of a){const t=e.id.split("/"),n=t[1],r=t[2],a=await qn(n),i=`${n}/${r}`;o.has(i)?gt.info(`App with id ${n} and instanceId ${r} is already being launched, skipping`):(o.set(i,!0),a?a.manifestType===G.External.id||a.manifestType===G.InlineExternal.id?await Gt(a,r):a.manifestType!==G.Appasset.id&&a.manifestType!==G.InlineAppAsset.id||await zt(a,r):gt.error(`Unable to find app with id ${n} to relaunch it`))}await wt.applySnapshot(e)}}catch(e){console.error("Failed to apply decorated snapshot.",P(e))}}async function Pt(e,t,n,r,a){try{if(wt){if(e.endsWith(".jar")&&!e.includes("java.exe")&&!e.includes("javaw.exe")){gt.info("Launching a jar file, checking JAVA_HOME environment variable");const n=await fin.System.getEnvironmentVariable("JAVA_HOME");if(p(n))gt.warn("JAVA_HOME environment variable is not set, unable to update the path. Passing as is to snap to try to resolve.");else{const r=`${n}\\bin\\javaw.exe`;t?.unshift(e),t?.unshift("-jar"),e=r,gt.info(`Using ${r} to launch the jar file and moved the original path to the args`)}}const o=`${mt}/${r}/${a}`;let i=!0;if(r===a){const e=await wt.getLayout(),t=e.clients.findIndex(e=>e.id.startsWith(o));t>=0&&(i=!1,"minimized"===e.clients[t].state&&(e.clients[t].state="normal",await wt.setLayout(e)))}return i&&await wt.launch({path:e,clientId:o,args:t,strategy:n}),o}}catch(e){console.error("Failed to launch app.",P(e))}}async function xt(e){let t=(await fin.System.getRuntimeInfo()).args["local-startup-url"].replace("config.json","");const n=t.includes("\\")?"\\":"/";return t.endsWith(n)&&(t=t.slice(0,-1)),[t,"assets",e.alias,e.version,e.target].join(n)}async function _t(){return wt}async function It(e,t){const n=Rt(await Et(e));return At((await Tt(n)).availableRect,t)}function At(e,t){const n=e.bottom-e.top,r=(e.right-e.left)/2,a=n/2,o=t.width/2,i=t.height/2,s=e.left+r-o,c=e.top+a-i;return{x:Math.round(s),y:Math.round(c)}}async function Et(e){let t,n;try{const t=fin.View.wrapSync(e);n=await t.getCurrentWindow()}catch{}if(p(t))try{const r=n??fin.Window.wrapSync(e);t=await r.getBounds()}catch{}if(p(t))try{t=await fin.me.getBounds()}catch{}return t}async function Tt(e){const t=await fin.System.getMonitorInfo(),n=e.x,r=e.y;if(!p(n)&&!p(r))for(const e of t.nonPrimaryMonitors)if(Mt({x:n,y:r},e.monitorRect))return e;return t.primaryMonitor}function Mt(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom}function Rt(e){let t,n;if(!p(e)){const r=e.width/2,a=e.height/2;return t=e.left+r,n=e.top+a,{x:Math.round(t),y:Math.round(n)}}return{}}async function Ot(e){const t={defaults:{}};if(p(e)||(t.windowPositioningStrategy=e.windowPositioningStrategy,t.disableWindowPositioningStrategy=e.disableWindowPositioningStrategy,p(e?.defaultWindowOptions?.defaultLeft)||(t.defaults.left=e.defaultWindowOptions.defaultLeft),p(e?.defaultWindowOptions?.defaultTop)||(t.defaults.top=e.defaultWindowOptions.defaultTop)),p(t.defaults.left)||p(t.defaults.top)){const e=await fin.Application.getCurrent(),n=await e.getManifest();p(n?.platform?.defaultWindowOptions?.defaultLeft)||(t.defaults.left=n.platform.defaultWindowOptions.defaultLeft),p(n?.platform?.defaultWindowOptions?.defaultTop)||(t.defaults.top=n.platform.defaultWindowOptions.defaultTop)}return t}async function Dt(e,t){if(!0===e?.disableWindowPositioningStrategy)return;let n;if(p(t))n=(await fin.System.getMonitorInfo()).primaryMonitor;else if(!p(t)&&"monitorRect"in t)n=t;else if(!p(t)&&"x"in t)n=await Tt(t);else{const e=await Et(t);n=p(e)?(await fin.System.getMonitorInfo()).primaryMonitor:await Tt({x:e.left,y:e.top})}const r=e?.defaults?.left??0,a=e?.defaults?.top??0,o=n.availableRect.left,i=n.availableRect.top,s=e?.windowPositioningStrategy?.x??30,c=e?.windowPositioningStrategy?.y??30,l=e?.windowPositioningStrategy?.maxIncrements??8,u=await Bt(),d=await Promise.all(u.map(async e=>{try{const t=await e.getBounds();return{left:t.left,top:t.top,right:t.left+s,bottom:t.top+c}}catch{return{left:0,top:0,right:0,bottom:0}}}));let f=1e3,h=l;for(let e=0;e<l;e++){const t=r+e*s,n=a+e*c,l=d.filter(e=>e.left>=t+o&&e.right<=t+s+o&&e.top>=n+i&&e.bottom<=n+c+i);l.length<f&&(f=l.length,h=e)}return{left:r+h*s+o,top:a+h*c+i}}async function Bt(){const e=fin.Platform.getCurrentSync(),t=await e.Application.getChildWindows(),n=[];for(const e of t)try{await e.isShowing()&&n.push(e)}catch{}return n}const Wt=li("Launch");let Ft;async function Nt(e,t,n){try{if(Wt.info("Application launch requested",e),p(e))return Wt.warn("An empty app definition was passed to launch"),[];const r=b(e),a=[];switch(r.manifestType){case G.External.id:case G.InlineExternal.id:{const e=await Gt(r,void 0,t);e&&a.push(e);break}case G.Appasset.id:case G.InlineAppAsset.id:{const e=await zt(r,void 0,t);e&&a.push(e);break}case G.InlineView.id:case G.View.id:{const e=await async function(e,t,n){if(p(e))return void Wt.warn("No app was passed to launchView");if(e.manifestType!==G.View.id&&e.manifestType!==G.InlineView.id)return void Wt.warn(`The app passed was not of manifestType ${G.View.id} or ${G.InlineView.id}.`);let r;if(r=e.manifestType===G.View.id?await jt(e):Ut(e),p(r))return void Wt.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);let a=r.name,o=!p(a);o||"single"!==e?.instanceMode?o||(a=`${e.appId}/${C()}`,r.name=a):(Wt.info(`A unique name was not provided in the manifest of this view but the custom config indicates that this app is supposed to have a single instance so we are using the appId: ${e.appId} as the unique name.`),a=e.appId,r.name=a,o=!0);let i={uuid:fin.me.identity.uuid,name:a},s=!1;if(o&&(s=await async function(e,t=!1){const n=fin.View.wrapSync(e);let r=!1;try{await n.getInfo(),t&&await Ne({view:n}),r=!0}catch{r=!1}return r}(i,!0)),!s)try{const a=(0,u.getCurrentSync)(),o=b(e.launchPreference)??{},s=b(e.launchPreference?.options)??{type:"view"},c=Kn(e,"bounds"),l=Kn(e,"centered"),d=Kn(e,"host-options"),f=Kn(e,"custom-data"),h=Kn(e,"interop"),m=Kn(e,"url");if(!(p(c)||p(t?.bounds)&&p(n))){const e=await Jt(n);o.bounds={...o.bounds,...e,...t?.bounds}}p(l)||p(t?.defaultCentered)||(o.defaultCentered=t?.defaultCentered),"view"===s?.type&&"view"===t?.options?.type&&(p(s.host)&&(s.host={}),p(d)||p(t?.options?.host)||(g(s.host?.url)&&g(t.options.host?.url)&&!qt(s.host.url,t.options.host.url,d.constraint)&&(t.options.host.url=void 0),s.host={...s.host,...t.options?.host}),p(f)||p(t?.options?.view?.customData)||(p(s.view)&&(s.view={}),s.view.customData={...s.view?.customData,...t.options?.view?.customData}),p(h)||p(t?.options?.view?.interop)||(p(s.view)&&(s.view={}),s.view.interop=t?.options.view?.interop),p(m)||p(t?.options?.view?.url)||(p(s.view)&&(s.view={}),qt(r.url,t.options.view.url,m.constraint)&&(s.view.url=t.options.view.url))),"view"!==s?.type||p(s?.view)||(g(s.view.url)&&(Wt.debug(`Updating app with id: ${e.appId} url with launch preferences: ${r.url} with ${s.view.url}`),r.url=s.view.url),p(s.view?.customData)||(Wt.debug(`Updating app with id: ${e.appId} customData with merged launch preferences.`,s.view.customData),r.customData=s.view.customData),p(s?.view?.interop)||(Wt.debug(`Updating app with id: ${e.appId} interop config with launch preferences.`,s.view.interop),r.interop=s.view.interop));const w=o?.bounds,y=p(s)||"view"!==s.type?void 0:s?.host,v=o?.defaultCentered??!1;if(p(w)&&p(y)){const e=await a.createView(r);i=e.identity}else{let e={};const t={content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:r}]}],settings:{hasHeaders:y?.hasHeaders}};if(e={windowType:p(y?.url)?void 0:u.WindowType.Platform,disableMultiplePages:y?.disableMultiplePages,title:y?.title,favicon:y?.icon},!p(y?.pageTitle)||!p(y?.pageIcon)){const n={pageId:`page-${C()}`,iconUrl:y?.pageIcon,title:await a.Browser.getUniquePageTitle(y?.pageTitle),layout:t};e.pages=[n]}!0===y?.disableToolbarOptions&&(e.toolbarOptions={buttons:[]}),0===Object.keys(e).length&&(e=void 0);const n=await a.createWindow({workspacePlatform:e,url:y?.url,height:w?.height,defaultHeight:w?.height,defaultWidth:w?.width,defaultLeft:w?.left,defaultTop:w?.top,width:w?.width,defaultCentered:v,layout:t}),o=await n.getCurrentViews();if(1===o.length){if(o[0].identity.name!==i.name)return void Wt.warn(`The specified view id: ${i.name} was not found in the returned view so we will be returning undefined as we cannot confirm the view was created.`);i=o[0].identity}else{Wt.warn(`We expected to create a single view with identity ${i.name} but a preference was specified and the created window had more than the requested view ${o.length}`);const e=o.find(e=>e.identity.name===i.name);if(p(e))return void Wt.warn(`The specified view id: ${i.name} was not found in the list of returned views so we will be returning undefined as we cannot confirm the view was created.`);i=e.identity}}}catch(e){return void Wt.error("Error launching view",e)}return{...i,appId:e.appId}}(r,t,n);e&&a.push(e);break}case G.Window.id:case G.InlineWindow.id:{const e=await async function(e,t,n){if(p(e))return void Wt.warn("No app was passed to launchWindow");if(e.manifestType!==G.Window.id&&e.manifestType!==G.InlineWindow.id)return void Wt.warn(`The app passed was not of manifestType ${G.Window.id} or ${G.InlineWindow.id}.`);let r;if(r=e.manifestType===G.Window.id?await jt(e):Ut(e),p(r))return void Wt.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);let a=r.name,o=!p(a);o||"single"!==e?.instanceMode?o||(a=`${e.appId}/${C()}`,r.name=a):(Wt.info(`A unique name was not provided in the manifest of this window but the custom config indicates that this app is supposed to have a single instance so we are using the appId: ${e.appId} as the unique name.`),a=e.appId,r.name=a,o=!0);let i={uuid:fin.me.identity.uuid,name:a},s=!1;if(o&&(s=await async function(e,t=!1){const n=fin.Window.wrapSync(e);let r=!1;try{await n.getInfo(),r=!0,t&&await Le({window:n})}catch{r=!1}return r}(i,!0)),!s)try{const a=b(e.launchPreference)??{},o=b(e.launchPreference?.options)??{type:"window"},s=Kn(e,"bounds"),c=Kn(e,"centered"),l=Kn(e,"custom-data"),d=Kn(e,"interop"),f=Kn(e,"url");if(!p(s)&&!p(t?.bounds)){const e=await Jt(n);a.bounds={...a.bounds,...e,...t?.bounds}}p(c)||p(t?.defaultCentered)||(a.defaultCentered=t?.defaultCentered),"window"===o?.type&&"window"===t?.options?.type&&(p(l)||p(t?.options?.window?.customData)||(p(o.window)&&(o.window={}),o.window.customData={...o.window?.customData,...t.options?.window?.customData}),p(d)||p(t?.options?.window?.interop)||(p(o.window)&&(o.window={}),o.window.interop=t?.options.window?.interop),p(f)||p(t?.options?.window?.url)||(p(o.window)&&(o.window={}),qt(r.url,t.options.window.url,f.constraint)&&(o.window.url=t.options.window.url)));const h=(0,u.getCurrentSync)();r.defaultHeight=a?.bounds?.height??r.defaultHeight,r.height=a?.bounds?.height??r.height,r.defaultWidth=a?.bounds?.width??r.defaultWidth,r.width=a?.bounds?.width??r.width,r.defaultCentered=a?.defaultCentered??r.defaultCentered,r.x=a.bounds?.left??r.x,r.defaultLeft=a.bounds?.left??r.defaultLeft,r.y=a.bounds?.top??r.y,r.defaultTop=a.bounds?.top??r.defaultTop,!p(o?.window)&&g(o?.window?.url)&&(Wt.debug(`Updating app with id: ${e.appId}. The url of the window app is defined via launch preferences: ${r.url} is being replaced with ${o.window?.url}`),r.url=o.window.url),p(o?.window?.customData)||(Wt.debug(`Updating app with id: ${e.appId}. The custom data is being updated with launch preferences:`,o.window?.customData),r.customData=o.window?.customData),p(o?.window)||p(o?.window?.interop)||(Wt.debug(`Updating app with id: ${e.appId}. The interop definition is being updated with launch preferences:`,o.window?.interop),r.interop=o.window.interop);const m=await h.createWindow(r);i=m.identity,await Le({window:m})}catch(e){return void Wt.error("Error launching window",e)}return{...i,appId:e.appId}}(r,t,n);e&&a.push(e);break}case G.Snapshot.id:case G.InlineSnapshot.id:{const e=await async function(e){if(p(e))return void Wt.warn("No app was passed to launchSnapshot");if(e.manifestType!==G.Snapshot.id&&e.manifestType!==G.InlineSnapshot.id)return void Wt.warn(`The app passed was not of manifestType ${G.Snapshot.id} or ${G.InlineSnapshot.id}`);let t;if(e.manifestType===G.Snapshot.id?(Wt.info(`Fetching snapshot for app ${e.appId} from url: ${e.manifest}`),t=await jt(e)):(Wt.info(`Using snapshot defined in manifest setting of app ${e.appId}`),t=Ut(e)),p(t))return void Wt.error(`There was a problem encountered while trying to fetch the manifest for app: ${e.appId}. Returning without launching.`);const n=t.windows,r=[];if(Array.isArray(n)){const a=[],o=[];for(const t of n){if(Array.isArray(t.workspacePlatform?.pages))for(let e=0;e<t.workspacePlatform.pages.length;e++){const n=t.workspacePlatform.pages[e];p(n.layout)||(n.layout=Kt(n.layout)),t.workspacePlatform.pages[e]=n}else t.layout=Kt(t.layout);const n=C(),o=t.name??`${e.appId}/${n}`;t.name=o,r.push(t),a.push(o)}if(t.windows=r,r.length>0){const e=(0,u.getCurrentSync)();try{await e.applySnapshot(t)}catch(e){Wt.error("Error trying to apply snapshot to platform",e,t)}}for(const t of a){const n=await $t(t,fin.me.identity.uuid,e.appId);o.push(...n)}return o}}(r);e&&a.push(...e);break}case G.Manifest.id:{const e=await fin.Application.startFromManifest(r.manifest),t=e?.identity?.uuid;p(t)||a.push({uuid:t,name:t,appId:r.appId});break}case G.DesktopBrowser.id:await fin.System.openUrlWithBrowser(r.manifest);break;case G.Endpoint.id:if(L(r.manifest)){const e=await U(r.manifest,{payload:r,launchPreference:t,callerIdentity:n});p(e)?Wt.warn(`App with id: ${r.appId} encountered when launched using endpoint: ${r.manifest}.`):a.push({...e,appId:r.appId})}else Wt.warn(`App with id: ${r.appId} could not be launched as it is of manifestType: ${r.manifestType} and the endpoint: ${r.manifest} is not available.`);break;case G.Connection.id:{Wt.info("An app defined by a connection (connected app) has been selected. Passing selection to connection");const e=await async function(e){const t=(await pn()).find(t=>t.identity.uuid===e.manifest);if(e.manifestType===G.Connection.id&&!p(t))return Xt.info(`Launching app: ${e.appId} against connection: ${t.identity.uuid}`),await rn.dispatch(t.identity,"launchApp",e),t.identity;Xt.warn(`A request to launch app ${e.appId} was not successful. Either the manifestType is not ${G.Connection.id}:${e.manifestType} or the connection ${e.manifest} is either not registered in the connectionProvider with ${Yt} support or hasn't connected to this platform.`)}(r);p(e)||a.push({...e,appId:r.appId});break}default:Wt.error("We do not support the manifest type so this app cannot be launched.",r)}return Wt.info("Finished application launch request"),a}catch(e){Wt.error("Failed during application launch request",e)}}async function Lt(e,t){switch(e.manifestType){case G.External.id:case G.InlineExternal.id:case G.Manifest.id:case G.DesktopBrowser.id:case G.Endpoint.id:case G.Connection.id:Wt.info(`Bringing apps of type: ${e.manifestType} to front is not supported.`);break;case G.InlineView.id:case G.View.id:Array.isArray(t)&&1===t.length?await Ne({identity:t[0]}):Wt.warn(`A request to bring a view app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case G.Window.id:case G.InlineWindow.id:Array.isArray(t)&&1===t.length?await Le({identity:t[0]}):Wt.warn(`A request to bring a window app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case G.UnregisteredApp.id:if(Array.isArray(t)&&1===t.length){let e=!0;try{const e=fin.View.wrapSync(t[0]),n=await e.getInfo();Wt.info("View Info",n)}catch{e=!1}e?await Ne({identity:t[0]}):await Le({identity:t[0]})}else Wt.warn(`A request to bring a window app to front was received but we didn't receive exactly one identity for app: ${e.appId}.`);break;case G.Snapshot.id:if(Array.isArray(t)&&t.length>0)for(const e of t)await Ne({identity:e});else Wt.warn(`A request to bring a snapshot app to front was received but we didn't receive at least one view for app: ${e.appId}.`);break;default:Wt.error("We do not support the manifest type so this app cannot be brought to front.",e)}}async function $t(e,t,n){const r={uuid:t,name:e},a=fin.Window.wrapSync(r),o=(await a.getCurrentViews()).map(e=>({...e.identity,appId:n}));return await Le({window:a}),o}function Ut(e){return g(e.manifest)&&e.manifest.startsWith("{")?JSON.parse(e.manifest):e.manifest}async function jt(e){const t=Vt(),n=Vt(e.appId);let r;L(n)?r=n:L(t)&&(r=t);try{if(p(r)){const t=await fetch(e.manifest);return await t.json()}return await U(r,{url:e.manifest,appId:e.appId})}catch(t){Wt.error(`There was an error while trying to fetch the manifest: ${e.manifest} for appId: ${e.appId}`,t)}}function Vt(e){const t="manifest-get";return p(e)?t:`${t}-${e}`}async function zt(e,t,n){const r={};if(Wt.info(`Request to launch app asset app of type ${e.manifestType}`),e.manifestType===G.Appasset.id)r.alias=e.manifest;else{if(e.manifestType!==G.InlineAppAsset.id)return void Wt.warn("An app asset app was passed to launch app asset but it didn't match the supported manifest types.");{const t=Ut(e);let n;try{n=await fin.System.getAppAssetInfo({alias:t.alias})}catch(e){Wt.debug(`App asset info for alias: ${t.alias} is not available. Response from getAppAssetInfo: ${P(e)}`)}if(p(n)||t.version!==n.version){Wt.info(`App asset with alias: ${t.alias} does not exist in memory. Fetching it.`);try{await fin.System.downloadAsset(t,t=>{const n=Math.floor(t.downloadedBytes/t.totalBytes*100);Wt.info(`Downloaded ${n}% of app asset with appId of ${e.appId}`)})}catch(t){return void Wt.error(`Error trying to download app asset with app id: ${e.appId}`,t)}}r.alias=t.alias,r.arguments=t.args}}"single"===e.instanceMode?r.uuid=r.uuid??e.appId:r.uuid=`${r.uuid??e.appId}/${g(t)?t:C()}`;try{Wt.info(`Launching app asset with appId: ${e.appId} with the following options:`,r);const a=await Ht(e,r,t,n);return Wt.info(`External app with appId: ${e.appId} launched with the following identity`,a),a}catch(t){Wt.error(`Error trying to launch app asset with appId: ${e.appId}}`,t)}}async function Gt(e,t,n){let r={};if(Wt.info(`Request to external app of type ${e.manifestType}`),e.manifestType===G.External.id)r.path=e.manifest;else{if(e.manifestType!==G.InlineExternal.id)return void Wt.warn("An external app was passed to launch but it didn't match the supported manifest types.");r=Ut(e)}"single"===e.instanceMode?r.uuid=r.uuid??e.appId:r.uuid=`${r.uuid??e.appId}/${g(t)?t:C()}`;try{Wt.info(`Launching external app asset with appId: ${e.appId} with the following options:`,r);const a=await Ht(e,r,t,n);return Wt.info(`External app with appId: ${e.appId} launched with the following identity`,a),a}catch(t){Wt.error(`Error trying to launch external with appId: ${e.appId}`,t)}}async function Ht(e,t,n,r){const a=b(e.launchPreference?.options)??{type:"native"},o=Kn(e,"arguments"),i=g(t.path);let s,c;!p(o)&&"native"===r?.options?.type&&Array.isArray(r?.options?.native?.arguments)&&(c=r.options.native?.arguments,Wt.debug(`Using passed launch preference for the args for app ${e.appId}`,c)),p(c)&&"native"===a.type&&Array.isArray(a.native?.arguments)&&(c=a.native?.arguments,Wt.debug(`Using app definition based args for app ${e.appId}`,c)),p(c)&&g(t.arguments)?c=[t.arguments]:p(c)&&(c=[]);const l=fin.me.identity.uuid,u=t.uuid??e.appId,d=c.map(e=>e.replace("{OF-PLAT-UUID}",l).replace("{OF-EXT-UUID}",u));if(c=d,bt()&&"native"===a?.type&&!p(a?.snap?.strategy)){let r=t.path;if(!i&&g(t.alias)){const e=await fin.System.getAppAssetInfo({alias:t.alias});r=await xt({alias:e.alias,version:e.version,target:e.target??""})}if(g(r)){g(n)||(n="single"===e.instanceMode?e.appId:C()),1===c.length&&(c=_(c[0]));const o=await Pt(r,c,a.snap?.strategy,e.appId,n);o?s={uuid:t.uuid??e.appId,name:t.uuid??o,appId:e.appId}:Wt.warn(`The app with id ${e.appId} could not be launched with snap support, falling back to launch without snap`)}else Wt.warn(`The app with id ${e.appId} specifies a snap launch strategy, but it has neither a path property or app asset alias/version/target combination, falling back to launch without snap`)}if(p(s)&&"single"===e.instanceMode){const n=(await fin.System.getAllExternalApplications()).find(e=>e.uuid===t.uuid);n&&(Wt.info(`External application with App id ${e.appId} already exists. Returning identity.`),s={uuid:n.uuid,name:n.name??n.uuid,appId:e.appId})}if(p(s)){const n=b(t);n.arguments=c.join(" ");const r=await fin.System.launchExternalProcess(n);s={uuid:r.uuid??e.appId,name:r.name??r.uuid,appId:e.appId}}return s}function qt(e,t,n){if(p(t))return!1;if(!g(n))return!0;if("url-none"===n)return!1;if("url-any"===n)return!0;if(p(e))return!1;const r=new URL(e),a=new URL(t);return"url-page"===n?(r.origin+r.pathname).toLowerCase()===(a.origin+a.pathname).toLowerCase():"url-domain"!==n||r.origin===a.origin}function Kt(e){return JSON.parse(JSON.stringify(e,(e,t)=>(g(t?.name)&&!p(t.url)&&(/\/[\d,a-z-]{36}$/.test(t.name)&&(t.name=t.name.replace(/([\d,a-z-]{36}$)/,C())),/-[\d,a-z-]{36}$/.test(t.name)&&(t.name=t.name.replace(/(-[\d,a-z-]{36}$)/,C()))),t)))}async function Jt(e){if(!p(e)){if(p(Ft)){const e=await le();Ft=await Ot(e?.browserProvider)}return await Dt(Ft,e)}}const Yt="appSource",Zt="snapshotSource",Qt="actions",Xt=li("Connections"),en={},tn={};let nn,rn,an=!1;function on(e,t){return p(tn[e])?(Xt.info(`Adding action ${e} to available actions list`),tn[e]=t,!0):(Xt.warn(`Not adding action ${e} to available actions list as it is already registered`),!1)}async function sn(){const e=[],t=Object.values(en);for(const n of t){const t=n.connectionTypes.find(e=>e.type===Zt);t?.type===Zt&&e.push({identity:n.identity,connectionData:t})}return e}async function cn(e,t,n){const r={isValid:!1};try{if(p(e?.uuid))return Xt.warn("An identity without a UUID was passed to the validate connection function. Validation cannot happen.",e,n),r;if(p(nn?.connections))return"broker"===n?.type?(Xt.info("No connection provider options specified and broker connection requested. Implementing default broker behavior which is to allow a connection."),r.isValid=!0,r):(Xt.warn("A connection verification request was made but connection provider options have not been defined so we cannot validate the connection request."),r);const a=await gn(e);if(p(a))return Xt.warn("Connection is not allowed so unable to validate request",e),r;if(a.validatePayload){const a=nn?.connectionValidationEndpoint;if(!g(a))return Xt.warn("This connection has been defined as requiring payload verification but the platform has not provided a connection validation endpoint to use for the verification process. For backwards compatibility this connection is valid unless the broker specifies it wishes to validate."),r.isValid=!0,r;if(!L(a))return Xt.warn("This connection has been defined as requiring payload verification but the specified connectionValidationEndpoint is not a valid endpoint."),r;{const o={identity:e,payload:t,options:n};Xt.info(`Connection validation being handled by endpoint: ${a}`);const i=await U(a,o);if(!i?.isValid)return Xt.warn(`Connection validation request for ${JSON.stringify(e)} failed validation`),r;Xt.info("Connection has passed validation.")}}const o=n?.type;if(!p(o)){if(p(a.connectionTypes.find(e=>e.type===o)))return Xt.warn(`The connection that is being validated does not support the required connection type: ${o}`),r;Xt.info("Connection type requested is supported.")}r.isValid=!0}catch(e){Xt.error("An error occurred while trying to valid a connection request.",e)}return Xt.info("Returning: ",r),r}async function ln(e){const t=await sn();if(0===t.length)return e;const n=await Promise.all(t.map(async e=>{const t=await fin.SnapshotSource.wrap({uuid:e.identity.uuid});try{Xt.info(`Snapshot source: ${e.identity.uuid}. Requesting a snapshot.`);const n=await t.getSnapshot();return{identity:e.identity,snapshot:n}}catch{Xt.info(`Snapshot source: ${e.identity.uuid} was not available.`)}}));return Object.assign(e,{clientSnapshots:n.filter(e=>!p(e))})}async function un(e){if(Array.isArray(e?.clientSnapshots)){const t=await sn();await Promise.all(e.clientSnapshots.map(async e=>{if(e)if(t.some(t=>t.identity.uuid===e.identity.uuid))try{const t=await fin.SnapshotSource.wrap(e.identity);Xt.info(`Snapshot source: ${e.identity.uuid} is running and has a snapshot entry. Applying snapshot.`),await t.applySnapshot(e.snapshot)}catch{Xt.warn(`Snapshot source: ${e.identity.uuid} is not able to apply the snapshot.`)}else if(p(e?.snapshot))Xt.warn(`Client snapshot was available but the source ${e.identity.uuid} was not connected and it didn't provide an app/App entry as part of the snapshot to trigger a launch.`);else{const t=e?.snapshot,n=t?.App??t?.app;p(n)||(Xt.info(`Client not connected but snapshot contains an app definition. Launching app definition for ${e.identity.uuid}`),Xt.debug("Client app definition:",n),await Nt(n))}}))}}async function dn(){return{isConnectionValid:cn}}async function pn(){const e=[],t=Object.values(en);for(const n of t){const t=n.connectionTypes.find(e=>e.type===Yt);t?.type===Yt&&e.push({identity:n.identity,connectionData:t})}return e}function fn(e,t){const n=en[e.uuid],r=t?.action,a=tn[r],o=n.connectionTypes.find(e=>e.type===Qt);let i=nn?.supportedActions??[];return!(o?.type!==Qt||(Array.isArray(o.supportedActions)&&o.supportedActions.length>0&&(i=o.supportedActions),p(a)||!i.includes(r)))}async function hn(e){delete en[e.uuid],0===Object.keys(en).length&&Xt.info("No connections left")}async function gn(e){const t=nn?.connections.find(t=>t.identity.uuid===e.uuid);if(!p(t))return t;const n=nn?.connections.find(e=>"*"===e.identity.uuid);if(!p(n)){Xt.info(`A specific listing for connection ${e.uuid} isn't listed but there is a default * entry and it will be used for this connection.`);const t=b(n);return t.identity=e,t}return n}function mn(e){return{appId:e.appId,name:e.name??e.appId,title:e.title??e.name,manifestType:e.manifestType,manifest:bn(e),description:e.description,customConfig:e.customConfig,intents:e.intents,interop:wn(e.intents),tags:kn(e),version:e.version,publisher:e.publisher??"",contactEmail:e.contactEmail,supportEmail:e.supportEmail,icons:yn(e.icons),images:vn(e.images),private:Sn(e),autostart:Cn(e),instanceMode:e.customConfig?.instanceMode,tooltip:e.tooltip,launchPreference:e.customConfig?.launchPreference}}function wn(e){if(p(e))return;const t={};for(const n of e)t[n.name]={contexts:n.contexts,customConfig:n.customConfig,displayName:n.displayName};return{intents:{listensFor:t}}}function yn(e){if(!Array.isArray(e))return[];const t=[];for(const n of e)t.push({src:n.icon});return t}function vn(e){if(!Array.isArray(e))return[];const t=[];for(const n of e)t.push({src:n.url});return t}function bn(e){return g(e.manifest)&&e.manifest.startsWith("{")?JSON.parse(e.manifest):e.manifest}function kn(e){const t=e.tags??e.categories??[];return 0===t.length&&t.push(e.manifestType),t}function Sn(e){return Pn(e?.customConfig?.private,!1)}function Cn(e){return Pn(e?.customConfig?.autostart,!1)}function Pn(e,t){if(g(e)||y(e))switch(e){case"False":case"false":case!1:return!1;case"True":case"true":case!0:return!0;default:return!t}return t}function xn(e){return{appId:e.appId,name:e.name??e.appId,title:e.title??e.name,manifestType:In(e),manifest:An(e),description:e.description,instanceMode:e?.hostManifests?.OpenFin?.config?.instanceMode,intents:_n(e.interop),interop:e.interop,customConfig:e.customConfig,tags:e.categories,version:e.version,publisher:e.publisher??"",contactEmail:e.contactEmail,supportEmail:e.supportEmail,icons:e.icons??[],images:e.screenshots,private:e?.hostManifests?.OpenFin?.config?.private,autostart:e?.hostManifests?.OpenFin?.config?.autostart,launchPreference:e?.hostManifests?.OpenFin?.config?.launchPreference}}function _n(e){const t=[],n=e?.intents?.listensFor;if(p(n))return t;const r=Object.keys(n);for(const e of r)t.push({name:e,displayName:n[e].displayName??"",contexts:n[e].contexts});return t}function In(e){let t;switch(e.type){case"web":t="inline-view";break;case"native":t="inline-external";break;case"onlineNative":t="desktop-browser";break;case"other":t=e.hostManifests?.OpenFin?.type??"";break;default:t=e.type}return t}function An(e){let t;switch(e.type){case"web":if(!p(e?.details)){const n=e.hostManifests?.OpenFin?.details;t=f(n)?{url:(e?.details).url,fdc3InteropApi:"2.0",...n}:{url:(e?.details).url,fdc3InteropApi:"2.0"}}break;case"native":p(e?.details)||(t=e.details);break;case"onlineNative":p(e?.details)||(t=(e?.details).url);break;case"other":t=e.hostManifests?.OpenFin?.details;break;default:t=e.details}return t}const En=li("Directory");let Tn,Mn=[],Rn=!1;function On(e){if(Tn){if(p(e?.id))return En.error("A directory entry didn't specify an id and it needs an id to be registered. It cannot be added as a directory endpoint.",e),!1;if(0!==Mn.length&&-1!==Mn.findIndex(t=>t.id===e.id))return En.error(`A directory entry with this id: ${e.id} already exists so this passed endpoint cannot be added.`,e),!1;if(p(e.endpointId)&&p(e.map)&&p(e.url))return En.error("A directory endpoint must either specify a url, endpoint or a map."),!1;if(!p(e?.endpointId)&&!Tn.hasEndpoint(e.endpointId))return En.error(`A directory entry specifies an endpoint that does not exist: ${e.endpointId} and it can therefore not be added as a directory endpoint. Id: ${e.id}`,e),!1;if(p(e?.map)){if(!(p(e?.url)||0!==e.url.path.trim().length&&e.url.path.startsWith("http")))return En.error(`A directory entry specifies an endpoint url path that is either not specified or is in the wrong format: ${e?.url?.path} and it can therefore not be added as a directory endpoint. Id: ${e.id}`,e),!1}else{if(!Tn.hasEndpoint(e.map.inputId))return En.error(`A directory entry specifies an endpoint map input id that does not exist: ${e.map.inputId} and it can therefore not be added as a directory endpoint. Id: ${e.id}`,e),!1;if(e.map.outputId&&!Tn.hasEndpoint(e.map.outputId))return En.error(`A directory entry specifies an endpoint map output id that does not exist: ${e.map.outputId} and it can therefore not be added as a directory endpoint. Id: ${e.id}`,e),!1}return Mn.push(e),!0}return!1}async function Dn(e){if(Array.isArray(e))return function(e){const t=[];for(const n of e)Array.isArray(n.intents)&&p(n.interop)?n.interop=wn(n.intents):p(n.interop)||Array.isArray(n.intents)||(n.intents=_n(n.interop)),t.push(n);return t}(e);if("fdc3"!==e.metadata?.type||p(e?.metadata?.version)){if(Array.isArray(e.applications)&&e.applications.length>0)return"type"in e.applications[0]?e.applications.map(e=>xn(e)):e.applications.map(e=>mn(e))}else{const t=e.metadata.version;switch(t){case"1.2":return e.applications.map(e=>mn(e));case"2.0":return e.applications.map(e=>xn(e));default:throw new Error(`Unknown/Unsupported FDC3 version specified: ${t}`)}}return[]}async function Bn(e){if(Tn)if(p(e.endpointId)){if(!p(e.url)){En.info(`Fetching apps from url: ${e.url.path}`);const t=await fetch(e.url.path,{credentials:e.url.credentials});return Dn(await t.json())}if(!p(e.map))if(e.map.outputId){En.info(`Mapping from App Source: ${e.map.inputId} to Platform App using: ${e.map.outputId}`);const t=await Tn.requestResponse(e.map.inputId);En.info(`Received response from ${e.map.inputId}`);const n=await Tn.requestResponse(e.map.outputId,t);if(n)return Dn(n)}else En.error(`Mapping from App Source: ${e.map.inputId} has no outputId`)}else{En.info(`Fetching apps from endpoint id: ${e.endpointId}.`);const t=await Tn.requestResponse(e.endpointId);if(t)return Dn(t)}return En.error(`Directory entry ${e.id} does not have any supported way of fetching applications.`),[]}const Wn=li("Apps");let Fn,Nn,Ln,$n=[],Un=0,jn="on-demand",Vn=0,zn=!1;async function Gn(e){if(zn){Wn.info("Requesting apps");try{const t=await Jn();if(e){if(!p(e.private)&&!p(e.autostart))return t.filter(t=>{const n=t.private??!1,r=t.autostart??!1;return e.private===n&&e.autostart===r});if(!p(e.private))return t.filter(t=>{const n=t.private??!1;return e.private===n});if(!p(e.autostart))return t.filter(t=>{const n=t.autostart??!1;return e.autostart===n})}return t}catch(e){return Wn.error("Error retrieving apps. Returning empty list",e),[]}}else Wn.warn("Calling getApps before app provider is initialized");return[]}async function Hn(e,t=!1,n){return(await Gn(n)).filter(n=>{if(p(n.tags))return!1;let r=!1;for(const a of e)if(n.tags.includes(a)){if(!t)return!0;r=!0}else if(t)return!1;return r})}async function qn(e){if(!e)return;const t=await Gn();let n=t.find(t=>t.appId===e);return p(n)&&(n=t.find(t=>t.name===e),Wn.info(`App not found when using lookup id: ${e} against appId. Fell back to name to see if it is a reference against name. App found: ${!p(n)}`)),n}function Kn(e,t){if(Array.isArray(e?.launchPreference?.options?.updatable))for(const n of e.launchPreference.options.updatable)if(n.name===t)return n;if(Array.isArray(Nn))return Nn.find(e=>e.name===t)}async function Jn(){if(p(Ln)){let e=!0;if("on-demand"===jn){e=!1;const t=Date.now();t-Vn>Un&&(Vn=t,e=!0)}if(e){Ln=[],Wn.info("Apps cache expired refreshing");const e=[];try{Wn.info("Getting directory apps.");const t=await async function(){if(0===Mn.length)return[];const e=[...Mn],t=[];for(const n of e)try{En.info(`Fetching apps from directory id: ${n.id}.`);const e=await Bn(n);En.info(`Fetched ${e.length} apps from directory id: ${n.id}.`),t.push(...e)}catch(e){En.error(`Error fetching apps from directory ${JSON.stringify(n)}`,e)}return t}();e.push(...t),Wn.info("Getting connected apps.");const n=await async function(){const e=await pn(),t=[];for(const n of e){const e=await rn.dispatch(n.identity,"getApps"),r=n?.connectionData?.manifestTypes??[];let a=[];a=r.length>0?e.filter(e=>e.manifestType&&r.includes(e.manifestType)):e;for(const e of a)e.manifestType===G.Connection.id&&(e.manifest=n.identity.uuid);t.push(...a)}return t}();n.length>0&&(Wn.info(`Adding ${n.length} apps from connected apps to the apps list to be validated`),e.push(...n))}catch(e){Wn.error("Error fetching apps.",e)}const t=JSON.stringify($n);if($n=await async function(e){const t=await pt(Wn),n=await ft(Wn),r=[],a=[];for(const o of e){const e=o.manifestType;if(e){let i=!0;!p(Fn)&&Fn.length>0&&(i=Fn.includes(e)),i?e!==G.External.id&&e!==G.InlineExternal.id&&e!==G.Appasset.id&&e!==G.InlineAppAsset.id||t&&(e!==G.Appasset.id&&e!==G.InlineAppAsset.id||n)?r.push(o):a.push(o.appId):Wn.warn("Application is not in the list of supported manifest types",o.appId,e)}else Wn.warn("Application does not have a manifestType",o.appId)}return a.length>0&&Wn.warn("Not passing the following list of applications as they will not be able to run on this machine due to missing permissions. Alternatively this logic could be moved to the launch function where a selection is not launched but the user is presented with a modal saying they can't launch it due to permissions",a),r}(e),Ln.length>0){Wn.info("Resolving getEntry promises");for(const e of Ln)e($n)}if(Ln=void 0,JSON.stringify($n)!==t){const e=(0,u.getCurrentSync)();await J(e,"apps-changed")}}return $n}return new Promise(e=>{Ln?(Wn.info("Storing getEntry resolver"),Ln.push(e)):e($n)})}const Yn=li("Auth");let Zn,Qn,Xn=!1,er=!1;function tr(){return er}function nr(e,t){if(p(Qn))return void Yn.warn("Please initialize auth before trying to use subscribe");let n;"logged-in"===e&&(n=async()=>{setTimeout(async()=>{await t(Zn?.includeLoggedInUserInfo??1?await ir():void 0)},0)});const r=Qn.subscribe(e,n??t);return"logged-in"===e&&setTimeout(async()=>{n&&!await or()&&await n()},0),r}async function rr(){return p(Qn)?(Yn.warn("Please initialize auth before trying to use login"),!1):(Yn.info("Log in requested"),Qn.login())}async function ar(){return p(Qn)?(Yn.warn("Please initialize auth before trying to use logout"),!1):(Yn.info("Log out requested"),Qn.logout())}async function or(){return p(Qn)?(Yn.info("Auth may not be required for this app. If it is please initialize auth before trying to use isAuthenticationRequired"),!1):(Yn.info("isAuthenticationRequired requested"),Qn.isAuthenticationRequired())}async function ir(){return p(Qn)?(Yn.warn("Please initialize auth before trying to use getUserInfo"),null):(Yn.info("getUserInfo requested"),Qn.getUserInfo())}async function sr(){if(!p(Qn))return{isAuthenticationRequired:or,login:rr,logout:ar,getUserInfo:ir};Yn.warn("Please initialize auth before trying to use getAuthClient or auth may not be required for this app")}const cr=li("Dialog");let lr;async function ur(e,t){const n=await we(),r=await ye(),a=t?fin.Window.wrapSync(t):fin.Window.getCurrentSync(),o=lr?.dialogHtml??"https://built-on-openfin.github.io/workspace-starter/dev/john/workspace-v21-patch/workspace-platform-starter/common/popups/dialog/index.html";let i;if(cr.info("Showing confirmation dialog",e),e.message=e.message.replace(/\n/g,"<br>"),e.message=e.message.replace(/\*{3}(.*?)\*{3}/g,"<b><i>$1</i></b>"),e.message=e.message.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>"),e.message=e.message.replace(/\*(.*?)\*/g,"<i>$1</i>"),t)i=await a.getBounds();else{const e=(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;i={width:e.right-e.left,height:e.bottom-e.top}}const s=lr?.defaultWidth??500,c=lr?.defaultHeight??250,l=(i.width-s)/2,u=(i.height-c)/2,d=await a.showPopupWindow({name:`modal-${C()}`,initialOptions:{showTaskbarIcon:!1,defaultCentered:!0,backgroundColor:n?.backgroundPrimary,customData:{...e,palette:n,colorScheme:r}},x:l,y:u,width:s,height:c,url:o,blurBehavior:"modal"});if("clicked"===d.result)return cr.info("Dialog Result",d.data),d.data;cr.info("Dialog dismissed")}const dr="app",pr="workspace",fr="page",hr="query",gr=li("Favorites");let mr,wr,yr,vr=!1;const br="favorite-list",kr="favorite-get",Sr="favorite-set",Cr="favorite-remove";async function Pr(e,t,n){if(vr)gr.warn("The favorite service is already initialized");else{yr=t,wr=n,p(e)?gr.warn("Options were not passed to the favorite provider so it cannot be initialized."):(vr=!0,mr=e),ne("favorites",async()=>e?.enabled??!1);for(const t of[dr,pr,fr,hr])ne(`favorites-${t}`,async()=>(e?.enabled??!1)&&(p(e?.supportedFavoriteTypes)||(e?.supportedFavoriteTypes??[]).includes(t)))}}async function xr(e){if(wr.hasEndpoint(br)){const t=await wr.requestResponse(br,{favoriteType:e,platform:fin.me.identity.uuid});if(!p(t)&&Array.isArray(t.entries)){let n=t.entries.map(e=>e.payload);return p(e)?gr.info("Returning saved favorites from custom storage"):(gr.info(`Returning saved favorites by type ${e} from custom storage`),n=n.filter(t=>t.type===e)),n}return gr.warn("No response getting saved favorites from custom storage"),[]}gr.warn(`There has been a request for a list of favorites but no endpoint with the \n    id: ${br} is listed in your endpoint configuration.`)}async function _r(e){if(wr.hasEndpoint(kr)){const t=await wr.requestResponse(kr,{id:e,platform:fin.me.identity.uuid});return t?(gr.info(`Returning saved favorite with id ${e} from custom storage`),t.payload):void gr.warn(`No response getting saved favorite with id ${e} from custom storage`)}gr.warn(`There has been a request for a favorite but no endpoint with the \n    id: ${kr} is listed in your endpoint configuration.`)}async function Ir(e){if(p(e.id))return gr.warn("No id was passed for the favorite to save so we are unable to save it. If it is a new entry please generate a guid."),!1;if(p(e.timestamp)&&(gr.info("Setting timestamp."),e.timestamp=new Date),wr.hasEndpoint(Sr)){const t=await wr.action(Sr,{id:e.id,platform:fin.me.identity.uuid,metaData:{version:{workspacePlatformClient:yr.workspacePlatformClient,platformClient:yr.platformClient}},payload:e});if(t){gr.info(`Saved favorite with id: ${e.id} to custom storage`);const t=(0,u.getCurrentSync)();await J(t,"favorite-changed",{action:"set",favorite:e})}else gr.info(`Unable to save favorite with id: ${e.id} to custom storage`);return t}return gr.warn(`There has been a request to save a favorite but no endpoint with the \n    id: ${Sr} is listed in your endpoint configuration.`),!1}async function Ar(e){if(p(e))return gr.warn("No id was passed for the favorite to delete so we are unable to delete it."),!1;if(wr.hasEndpoint(Cr)){const t=await _r(e);let n=!1;if(p(t))gr.warn(`Unable to delete favorite with id: ${e} from custom storage as it does not exist`);else if(n=await wr.action(Cr,{id:e,platform:fin.me.identity.uuid}),n){gr.info(`Saved favorite with id: ${e} was deleted from custom storage`);const n=(0,u.getCurrentSync)();await J(n,"favorite-changed",{action:"delete",favorite:t})}else gr.warn(`Unable to delete favorite with id: ${e} from custom storage`);return n}return gr.warn(`There has been a request to delete a favorite but no endpoint with the \n    id: ${Cr} is listed in your endpoint configuration.`),!1}function Er(){return p(mr)?{isEnabled:!1}:{isEnabled:mr.enabled??!0,favoriteIcon:mr.favoriteIcon,unfavoriteIcon:mr.unfavoriteIcon,command:mr.favoriteCommand,enabledTypes:mr.supportedFavoriteTypes}}async function Tr(){return{"favorite-add":async e=>{if(e.callerType===u.CustomActionCallerType.CustomButton||e.callerType===u.CustomActionCallerType.StoreCustomButton){const t=e.customData;p(t)?gr.error("Can only add to favorites if favorite data is provided in customData"):await Ir(t)}},"favorite-remove":async e=>{if(e.callerType===u.CustomActionCallerType.CustomButton||e.callerType===u.CustomActionCallerType.StoreCustomButton){const t=e.customData;p(t)?gr.error("Can only remove from favorites if favorite data is provided in customData"):await Ar(t.id)}}}}var Mr=n(81);const Rr="action",Or="-----default-if-no-param-----",Dr=li("InitOptions");let Br={},Wr={};const Fr={},Nr={};async function Lr(e,t,n){Br={},Wr={},Dr.info("Initializing init options provider.");const r=await qo(e,"initOptions");await Jo(r,t);const a=(0,u.getCurrentSync)();for(const e of r){const t=e.definition.data?.supportedActions??[];for(const n of t)$r(n,e.definition.data?.lifecycle??"after-bootstrap",async(t,r,o)=>{await re(a,e.definition.data?.conditions,{callerType:"init-options",customData:{module:e,supportedAction:n}})&&(Dr.info(`Action: ${t} being handled by module ${e.definition.id}`),await e.implementation.action(t,r,o))})}const o=fin.Application.getCurrentSync(),i=(await o.getInfo()).initialOptions;p(i?.userAppConfigArgs)||(Dr.info("Received during startup",i?.userAppConfigArgs),p(i?.userAppConfigArgs[Rr])?await Vr(i?.userAppConfigArgs,"launch"):await jr(i?.userAppConfigArgs,n,"launch")),"after-bootstrap"===n&&await a.Application.addListener("run-requested",zr),Dr.info("Init options provider initialized.")}function $r(e,t,n){const r=C();return Br[e]||(Br[e]={}),Br[e][r]={lifecycle:t,actionHandler:n},Wr[r]=e,r}function Ur(e,t){if(t===Rr)return void Dr.warn("Please use registerActionListener if you wish to listen for an action");g(t)||(t=Or);const n=C();return Fr[t]||(Fr[t]={}),Fr[t][n]=e,Nr[n]=t,n}async function jr(e,t,n){const r=e[Rr],a=p(e.payload)?void 0:function(e){try{const t=e?.payload;if(g(t)){const e=atob(t),n=JSON.parse(e);return Dr.info("Extracted payload",n),n}}catch(t){Dr.error("Error decoding payload, it should be Base64 encoded",e,t)}}(e),o=Br[Array.isArray(r)?r[0]:r];if(!p(o)){const e=Object.keys(o);for(const i of e){Dr.info(`Notifying subscriber with subscription Id: ${i} of action: ${r}`);const e=o[i];if(e?.lifecycle===t)try{const e=o[i];e&&await e.actionHandler(Array.isArray(r)?r[0]:r,a,n)}catch(e){Dr.error(`Error executing action: ${r} against registered listener: ${i}.`,e)}}}}async function Vr(e,t){const n=Object.keys(Fr);let r;for(const t of n)if(!p(e[t])){r=t;break}if(p(r)&&(p(e)||0===Object.keys(e).length)&&(Dr.info("No init options passed, calling default listeners"),r=Or),!p(r)){Dr.info(`Init param has been passed and it has a matching listener (${r}). Passing on init options to listeners`);const n=Fr[r];if(!p(n)){const a=Object.keys(n);for(const o of a){Dr.info(`Notifying subscriber with subscription Id: ${o} of request: ${r}`);try{const r=n[o];r&&await r(e,t)}catch(e){Dr.error(`Error executing handler for parameter: ${r} against registered listener: ${o}.`,e)}}}}}async function zr(e){p(e?.userAppConfigArgs)?Dr.info("Received while platform is running but no init options were passed"):(Dr.info("Received while platform is running",e.userAppConfigArgs),p(e.userAppConfigArgs[Rr])?await Vr(e.userAppConfigArgs,"running"):await jr(e.userAppConfigArgs,"after-bootstrap","running"))}const Gr=li("Share");let Hr,qr,Kr,Jr=[],Yr=!1;async function Zr(e,t,n){p(e)||(Hr=e,Kr=n,Hr.enabled&&(Yr?Gr.warn("Share cannot be initialized more than once."):(Yr=!0,Jr=await qo(e,"share"),await Jo(Jr,t),qr=Ur(async e=>{if(Gr.info("Received share request."),g(e.shareType)){let t;g(e.payload)&&(t=JSON.parse(atob(e.payload))),await async function(e,t){let n=!1;for(const r of Jr)(await r.implementation.getShareTypes()).includes(e)&&(await r.implementation.handle(e,t),n=!0);n||Gr.warn(`Received shareType ${e} but no module was found to handle it.`)}(e.shareType,t)}else Gr.warn("shareType passed but it wasn't a string")},"shareType"))))}function Qr(){return Yr&&Array.isArray(Jr)&&Jr.length>0}async function Xr(e){if(Array.isArray(Jr))for(const t of Jr)if((await t.implementation.getShareTypes()).includes(e))return!0;return!1}async function ea(e,t){let n=!1;for(const r of Jr)(await r.implementation.getShareTypes()).includes(e)&&(await r.implementation.share(e,t),n=!0);n||Gr.warn(`Received shareType ${e} but no module was found to handle it.`)}async function ta(e,t,n){let r=t??Hr?.confirmationMode??"notification";if("notification"===r){const e=(0,u.getCurrentSync)();await ae(e,"notifications")||(r="modal")}if("modal"===r)await ur({title:e.title,message:e.message,iconUrl:e.iconUrl??Kr,buttons:[{label:"Dismiss",id:"dismiss"}]},n);else if("notification"===r){const t={shared:Mr.IndicatorColor.GREEN,loaded:Mr.IndicatorColor.BLUE,error:Mr.IndicatorColor.RED},n={expires:new Date(Date.now()+3e4),body:e.message,buttons:[{submit:!1,onClick:null,index:3,iconUrl:"",cta:!1,title:"Dismiss",type:"button"}],stream:{id:"share-requests",displayName:"Share Request",appId:fin.me.identity.uuid},priority:1,icon:e.iconUrl??Kr,indicator:{color:t[e.status],text:e.title},category:"share",title:e.title,template:"markdown"};await(0,Mr.create)(n)}}var na=n(25);async function ra(e,t,n){const r=await we(),a={},o=[];for(let e=0;e<t.length;e++){const n=`desc-${e}`;a[n]=t[e],o.push(await ia(n,12,{padding:"6px 0px"}))}const i=[];for(let e=0;e<n.length;e++){const t=`line-${e}`;a[t]=n[e],i.push(await ia(t,12,{fontFamily:"monospace",whiteSpace:"nowrap"}))}i.length>0&&o.push(await aa("column",i,{padding:"10px",marginTop:"6px",backgroundColor:r.inputBackground,color:r.inputColor,borderRadius:"5px",overflow:"auto"}));const s=await pa(e,void 0,o);return{layout:s.layout,data:{...s.data,...a}}}async function aa(e,t,n){return{type:na.TemplateFragmentTypes.Container,style:{display:"flex",flexDirection:e,...n},children:t}}async function oa(e,t=12,n="bold",r){const a=await we();return{type:na.TemplateFragmentTypes.Text,dataKey:e,style:{color:a.textDefault??"#ffffff",fontSize:`${t??12}px`,fontWeight:n,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",...r}}}async function ia(e,t=12,n){return{type:na.TemplateFragmentTypes.Text,dataKey:e,style:{fontSize:`${t??12}px`,...n}}}async function sa(e,t,n){return{type:na.TemplateFragmentTypes.Image,dataKey:e,alternativeText:t,style:{...n}}}async function ca(e,t,n,r,a){const o=await we(),i=e===na.ButtonStyle.Secondary?{border:`1px solid ${o.inputColor}`}:{};return{type:na.TemplateFragmentTypes.Button,buttonStyle:e,children:a??[await ia(t,12)],action:n,style:{...i,...r}}}async function la(e,t,n){const r=await we();return{type:na.TemplateFragmentTypes.Container,style:{display:"flex",flexDirection:"column",marginBottom:"9px",...n},children:[await ia(e,11,{fontWeight:"bold",color:r.brandPrimary}),await ia(t,14)]}}async function ua(e,t,n,r){const a=await we(),o=await ye(),i=o===pe.Dark?a.background2:a.background5,s=o===pe.Dark?a.background5:a.background2,c=[],l=t.slice();for(let a=0;a<e[0].length;a++){const o=`table${n}_header${a}`;r[o]=e[0][a]??"",c.push(await ia(o,10,{padding:"3px",whiteSpace:"nowrap",fontWeight:"bold",backgroundColor:i})),0===t.length&&l.push(1)}for(let t=1;t<e.length;t++)for(let a=0;a<e[0].length;a++){const o=`table${n}_col${a}_row${t}`;r[o]=e[t][a]??"",c.push(await ia(o,10,{padding:"3px",whiteSpace:"nowrap"}))}return aa("row",c,{display:"grid",gridTemplateColumns:l.map(e=>`${e}fr`).join(" "),marginBottom:"10px",overflow:"auto",background:s,border:`1px solid ${i}`})}async function da(e,t,n=10,r){return{type:na.TemplateFragmentTypes.Button,buttonStyle:na.ButtonStyle.TextOnly,children:[await ia(e,n)],action:t,style:{padding:0,border:0,fontWeight:"normal",textDecoration:"underline",...r}}}async function pa(e,t,n,r,a){const o=await we(),i={title:e},s=[];if(t&&(s.push(await sa("icon","",{width:"16px",height:"16px"})),i.icon=t),s.push(await oa("title",void 0,void 0,{flex:"1"})),Array.isArray(a))for(let e=0;e<a.length;e++)s.push(await ca(na.ButtonStyle.Primary,"",a[e].action,{background:"none",border:0,padding:0},[await sa(`headerButtonIcon${e}`,"",{width:"16px",height:"16px"})])),i[`headerButtonIcon${e}`]=a[e].icon;const c=[];if(Array.isArray(r))for(let e=0;e<r.length;e++)c.push(await ca(na.ButtonStyle.Primary,`buttonTitle${e}`,r[e].action)),i[`buttonTitle${e}`]=r[e].title;return{layout:await aa("column",[await aa("row",s,{borderBottom:`1px solid ${o.background6}`,paddingBottom:"5px",gap:"5px",alignItems:"center"}),await aa("column",n,{flex:"1",gap:"10px"}),await aa("row",c,{justifyContent:"center",gap:"10px"})],{padding:"10px",gap:"10px",flex:"1"}),data:i}}async function fa(e,t,n,r){const a=await we(),o={},i=[];e.description&&(i.push(await ia("description",12)),o.description=e.description),Array.isArray(e.images)&&e.images.length>0&&e.images[0].src&&(i.push(await sa("screenshot","Screenshot",{border:`1px solid ${a.background6}`})),o.screenshot=e.images[0].src);const s=await pa(e.title,t,i,[{title:n,action:n}],r);return{layout:s.layout,data:{...s.data,...o}}}const ha={};let ga,ma,wa,ya,va,ba,ka,Sa,Ca=[],Pa=[],xa=!1,_a=!1;const Ia=li("VersionProvider");function Aa(e,t){let n,r=!1;switch(e){case"app":Ia.warn("You cannot set the version for app as this can only be specified via the settings provided on application launch inside of the version provider settings.");break;case"notificationCenter":n="Notification Center Version",r=p(ha.notificationCenter),r?ha.notificationCenter=t:Ia.warn(`${n} already set to: ${ha.notificationCenter} so we are unable to set it to ${t}`);break;case"platformClient":n="Platform Client Version",r=p(ha.platformClient),r?ha.platformClient=t:Ia.warn(`${n} already set to: ${ha.platformClient} so we are unable to set it to ${t}`);break;case"rvm":n="RVM Version",r=p(ha.rvm),r?ha.rvm=t:Ia.warn(`${n} already set to: ${ha.rvm} so we are unable to set it to ${t}`);break;case"runtime":n="Runtime Version",r=p(ha.runtime),r?ha.runtime=t:Ia.warn(`${n} already set to: ${ha.runtime} so we are unable to set it to ${t}`);break;case"workspacePlatformClient":n="Workspace Platform Client Version",r=p(ha.workspacePlatformClient),r?ha.workspacePlatformClient=t:Ia.warn(`${n} already set to: ${ha.workspacePlatformClient} so we are unable to set it to ${t}`);break;case"workspace":n="Workspace Version",r=p(ha.workspace),r?ha.workspace=t:Ia.warn(`${n} already set to: ${ha.workspace} so we are unable to set it to ${t}`);break;case"workspaceClient":n="Workspace Client Version",r=p(ha.workspaceClient),r?ha.workspaceClient=t:Ia.warn(`${n} already set to: ${ha.workspaceClient} so we are unable to set it to ${t}`)}r&&Ia.info(`${n} has been set to ${t}`)}async function Ea(){return ha}async function Ta(){if(p(ma))Ia.info("No minimum versions have been specified.");else{const e=Object.keys(ma);for(const t of e){const e=t;p(ha[e])||Fa(e,!0,ha[e],ma[e])}}if(p(wa))Ia.info("No maximum versions have been specified.");else{const e=Object.keys(wa);for(const t of e){const e=t;p(ha[e])||Fa(e,!1,ha[e],wa[e])}}if(p(ba)||p(va)||!va.hasEndpoint(ba))ga&&(xa=!0,ya=Da(ga.versionWindow));else try{const e=await va.requestResponse(ba,Ba());Ia.info("Response received from version endpoint: ",e);const t=e?.status;p(t)||(Array.isArray(t.minFail)&&(Ca=t?.minFail),Array.isArray(t.maxFail)&&(Pa=t.maxFail)),t?.minVersion&&(ma=t.minVersion),t?.maxVersion&&(wa=t.maxVersion);const n=e?.windowOptions;p(n)||(xa=!1,ya=Da(n),Ia.info("Fetched version window configuration from endpoint:",ba))}catch(e){Ia.error("Error while checking for version status.",e)}let e;return e=Ca.includes("app")?"upgradeable":0===Ca.length&&0===Pa.length?"compatible":"incompatible",Ia.info("Current version status: ",e),e}async function Ma(e){if("compatible"!==e){const e=Da(ya);if(p(e))return Ia.warn("The status of the platform version is in a non compatible state but we do not have a window to launch to react to this state."),!0;const t=await fin.Window.create(e);return e.autoShow&&await t.setAsForeground(),!0}return!1}async function Ra(){_a?p(ka)?(Ia.info("Monitoring is enabled and not running. Starting the monitoring process."),await Oa()):Ia.info("Monitoring has been requested but is already running."):Ia.warn("Monitoring is not setup via the version provider settings.")}async function Oa(){p(ka)||(clearTimeout(ka),ka=void 0),ka=window.setTimeout(async()=>{const e=await Ta();await Ma(e)?Ia.info(`Version status needed management: ${e}. Stopping monitoring.`):(Ia.info(`Version status is good: ${e}. Continuing monitoring.`),await Oa())},1e3*Sa)}function Da(e){if(p(e))return void Ia.info("No version window configuration provided.");const t={...e};if(!p(t.url))return p(t.name)&&(t.name=`${fin.me.identity.uuid}-versioning`),xa&&(p(t.customData)?(Ia.info("Setting customData for version window configuration."),t.customData=Ba()):(Ia.info("Enriching customData provided by version window configuration."),t.customData={...t.customData,...Ba()})),Ia.info("Returning version window configuration."),t;Ia.error("A version window configuration was set but a url was not provided. A window cannot be launched.")}function Ba(){return{minVersion:ma,maxVersion:wa,versionInfo:ha,minFail:Ca,maxFail:Pa}}function Wa(e,t,n,r,a){const o=t?"minimum":"maximum";return Number.parseInt(r,10)>Number.parseInt(a,10)?(Ia.info(`Finished check for ${e}. Current ${n} version: ${r} is greater than ${o} ${n} version: ${a}`),!!t):Number.parseInt(r,10)<Number.parseInt(a,10)?(Ia.info(`Finished check for ${e}. Current ${n} version: ${r} is less than ${o} ${n} version: ${a}`),!t):void 0}function Fa(e,t,n,r){if(p(n)||p(r))return Ia.warn(`A check was requested for ${e} but either the base version or limit version was not specified.`),!0;const a=n.split("."),o=r.split("."),i=t?"minimum":"maximum";if(o.length!==a.length)return Ia.warn(`A current version ${n} and ${i} version ${r} for ${e} was specified but both need to have the same number of digits.`),!0;const s=["Major","Minor","Patch","Build"];for(let r=0;r<n.length;r++){const n=Wa(e,t,s[r],a[r],o[r]);if(!p(n))return n||(t?Ca.push(e):Pa.push(e)),n}return!0}const Na="openfin-workspace",La=li("Integrations");let $a,Ua,ja=[];const Va="Populate Query",za="integration-preferences-set",Ga="integration-preferences-get";async function Ha(e){if(L(Ga)){const t=await U(Ga,{platform:fin.me.identity.uuid,id:e});return p(t?.payload)?La.info(`Unable to get preference for integration: ${e}`):La.info(`Retrieved preference for integration: ${e}`),t?.payload}}async function qa(e,t,n,r,a){const o=a?"Turn Off Integration":"Turn On Integration";return{key:`integration-${e}`,title:`${t}`,icon:r,actions:[],data:{providerId:"integration-provider",integrationId:e,autoStart:a},template:na.CLITemplate.Custom,templateContent:{layout:await aa("column",[await aa("column",[await aa("row",[await sa("icon",t,{width:"32px",height:"32px"}),await oa("title")],{alignItems:"center",gap:"10px"}),await ia("description",12)],{gap:"20px"}),await aa("column",[await ia("status",12,{paddingBottom:"10px",fontFamily:"monospace"}),await ca(a?na.ButtonStyle.Primary:na.ButtonStyle.Secondary,"btnText",o)])],{padding:"10px",flex:1,justifyContent:"space-between"}),data:{title:t,description:n??"You can enable/disable an integrations features",icon:r??"",status:"Integration State: "+(a?"On":"Off"),btnText:o}}}}const Ka="sources",Ja="Source",Ya=li("Home");let Za,Qa,Xa,eo,to;async function no(){return Ya.info("Show Home called."),na.Home.show()}async function ro(e,t){const n=!Za?.sourceFilter?.disabled;if(to=e.id,eo&&(window.clearTimeout(eo),eo=void 0),p(Xa)||Xa.close(),"?"===e.query)return Ya.info("Integration Help requested."),{results:await async function(){if(!$a)return La.error("IntegrationProvider is not available, make sure your have called init"),[];let e=[];if($a.isManagementEnabled){const t=$a.command??"integrations",n=`/${t}`,r={key:"integration-provider-help",title:n,label:"Help",icon:$a.icon,actions:[{name:Va,hotkey:"enter"}],data:{providerId:"integration-provider",populateQuery:`/${$a.command??"integrations"}`},template:na.CLITemplate.Custom,templateContent:await ra(n,[$a.commandDescription??`Allows the management of ${t} for this platform. You can decide whether enabled integrations should be included when a query is entered.`],[n])};e.push(r)}for(const t of ja)if(t.isInitialized&&t.implementation.getHelpSearchEntries)try{const n=await t.implementation.getHelpSearchEntries();if(Ua?.setSearchQuery)for(const e of n)e.data?.populateQuery&&(e.actions=e.actions??[],e.actions.push({name:Va,hotkey:"enter"}));e=e.concat(n)}catch(e){La.error(`Failed creating search entries for module ${t.definition.id}`,e)}return e}(),context:{filters:n?[oo()]:[]}};Xa=t,Xa.open();const r=e?.context?.selectedFilters??[];let a=[];if(n&&r){const e=r.find(e=>e.id===Ka);e&&(Array.isArray(e.options)?a=e.options.filter(e=>e.isSelected).map(e=>e.value):e.options.isSelected&&a.push(e.options.value))}const o={queryMinLength:Za?.queryMinLength??3,queryAgainst:Za?.queryAgainst??["title"],isSuggestion:e.context?.isSuggestion??!1};eo=window.setTimeout(async()=>{try{if(e.id!==to)return void Ya.info(`This request was scheduled to handle a query which is no longer the latest query. The query will not be actioned. Assigned Query Id: ${e.id}, latest Query Id: ${to}`);Ya.info(`Search results requested. Query Id: ${e.id}. Last Query Id: ${to}.`);const t=[];let i;const s=await async function(e,t,n,r,a){const o={results:[],context:{filters:[]},sourceFilters:[]},i=[];if(!p($a)){if($a.isManagementEnabled&&e.startsWith(`/${$a.command??"integrations"}`))return async function(){const e={results:[],context:{filters:[]}};if(!$a)return La.error("IntegrationProvider is not available, make sure your have called init"),e;for(const t of ja){const n=await qa(t.definition.id,t.definition.title,t.definition.description,t.definition.icon,t?.isInitialized??!1);e.results.push(n)}if(0===e.results.length){const t="You either have no integrations listed or none of them are enabled. Please check with support if you believe you should have access to integrations",n={key:"integration-provider-no-results",title:"No integrations available",data:{},actions:[],icon:$a.icon,description:t,shortDescription:t,template:na.CLITemplate.SimpleText,templateContent:t};e.results.push(n),La.error("Integration management is enabled but you have no integrations listed in your settings or none of them are enabled")}return e}();const s=[];for(const o of ja)o.isInitialized&&o.implementation.getSearchResults&&((o.definition.excludeFromSourceFilter??0===r.length)||r.includes(o.definition.title))&&s.push(o.implementation.getSearchResults(e,t,n,a)),o.definition.excludeFromSourceFilter||i.push(o.definition.title);const c=await Promise.allSettled(s);for(const e of c)if("fulfilled"===e.status){Array.isArray(e.value.results)&&(o.results=o.results.concat(e.value.results));const t=e.value.context?.filters;Array.isArray(t)&&o.context?.filters&&(o.context.filters=o.context.filters.concat(t))}else La.error(e.reason)}return{...o,sourceFilters:i}}(e.query,r,{...Xa,updateContext:e=>{const n=e?.filters;if(!p(n)){for(const e of n)if(Array.isArray(e.options)&&e.options.length>0){const n=t.findIndex(t=>t.id===e.id);n>=0?t.splice(n,1,e):t.unshift(e)}const e=(i?[...t,i]:t).slice().reverse();Xa.updateContext({filters:e})}}},a,o);if(e.id!==to)return void Ya.info(`This request was scheduled to handle a query which is no longer the latest query. The results for the previous query have come in but they will not be applied. Assigned Query Id: ${e.id}, latest Query Id: ${to}`);Array.isArray(s?.results)?Ya.info(`${s.results.length} results returned for query: ${e.query} with Query Id: ${e.id}. Last Query Id: ${to}.`):Ya.info(`No results array returned for query: ${e.query} with Query Id: ${e.id}. Last Query Id: ${to}.`),Xa.revoke("home-searching"),Xa.respond(s.results);const c=s.context?.filters;if(Array.isArray(c))for(const e of c)Array.isArray(e.options)&&e.options.length>0&&t.push(e);n&&(i=Array.isArray(s.sourceFilters)&&s.sourceFilters.length>0?{id:Ka,title:Za?.sourceFilter?.label??Ja,options:s.sourceFilters.map(e=>({value:e,isSelected:!0}))}:oo());const l=(i?[...t,i]:t).slice().reverse();Xa.updateContext({filters:l})}catch(e){Ya.error("Exception while getting search list results",e)}},200);const i=await async function(e,t,n,r){let a=[];if(!p($a)){const o=[];for(const a of ja)a.isInitialized&&a.implementation.getSearchResultsProgress&&((a.definition.excludeFromSourceFilter??0===n.length)||n.includes(a.definition.title))&&o.push(a.implementation.getSearchResultsProgress(e,t,r));const i=await Promise.allSettled(o);for(const e of i)"fulfilled"===e.status?Array.isArray(e.value)&&(a=a.concat(e.value)):La.error(e.reason)}return a}(e.query,Xa,a,o);return{results:[{key:"home-searching",title:"Searching ...",icon:Za?.icon,actions:[],template:na.CLITemplate.Loading,templateContent:""},...i],context:{filters:n?[oo()]:[]}}}async function ao(e){if(p(e.data))"user-action"===e.action.trigger&&Ya.warn("Unable to execute result without data being passed");else{const t=await async function(e,t){if(e.data){if(Ua?.setSearchQuery&&"user-action"===e.action.trigger&&e.action.name===Va&&g(e.data?.populateQuery))return await Ua.setSearchQuery(e.data.populateQuery),!0;if("integration-provider"===e.data?.providerId)return"user-action"===e.action.trigger&&async function(e,t,n){$a||La.error("IntegrationProvider is not available, make sure your have called init");const r=ja.find(e=>e.definition.id===t);if(p(r))return La.warn(`Unable to find specified integration: ${t} in enabled modules`),!1;n&&!r.isInitialized?await Yo(r,Ua):!n&&r.isInitialized&&await Zo(r);const a=await qa(r.definition.id,r.definition.title,r.definition.description,r.definition.icon,n);return e.respond([a]),await async function(e,t){if(L(za)){const n=await Ea();await $(za,{platform:fin.me.identity.uuid,metaData:{version:{workspacePlatformClient:n.workspacePlatformClient,platformClient:n.platformClient}},id:e,payload:t})?La.info(`Saved integration: ${e} preference. AutoStart: ${t.autoStart}`):La.info(`Unable to save integration: ${e} preference. AutoStart: ${t.autoStart}`)}}(r.definition.id,{autoStart:n}),!0}(t,e.data.integrationId,!e.data.autoStart);const n=ja.find(t=>t.definition.id===e.data?.providerId);if(n?.implementation?.itemSelection){if(e.dispatcherIdentity.uuid===e.dispatcherIdentity.name){const t={uuid:Na,name:"openfin-home"};e.dispatcherIdentity.name=t.name}return n.implementation.itemSelection(e,t)}}return!1}(e,Xa);"user-action"===e.action.trigger&&(t?Ya.info(`The action for result with title: '${e.title}' for provider: '${e.data?.providerId??"unknown"}' was handled`):Ya.error(`The action for result with title: '${e.title}' for provider: '${e.data?.providerId??"unknown"}' was not handled`))}}function oo(){return{id:Ka,title:Za?.sourceFilter?.label??Ja,options:[{value:"All",isSelected:!0}]}}class io{constructor(e,t){this._listenerRegister=[],this._updateTrackedCount=async()=>{const e=await this.getAll();this._currentCount=e.length},this._options=e,this._idPrefix=e.idPrefix??`${e.id}`,this._platformId=t,this._listenerRegister=[],this._currentCount=0,this._isCountTracked=!1,this._logger=li(`Notification Client:${this._idPrefix}`)}async create(e,t){return this.hasId(e.id)||(e.id=this.createId(e.id)),!0!==this._options.enforceIcon&&!p(e.icon)||p(this._options.icon)||(e.icon=this._options.icon),this._options.includeInPlatform?e.platform=this._platformId:e.platform===this._platformId&&(e.platform=void 0),(0,Mr.create)(e,t)}async update(e){return this.hasId(e.id)||(e.id=this.createId(e.id)),(0,Mr.update)(e)}async getAll(){return(await(0,Mr.getAll)()).filter(e=>e.id.startsWith(this._idPrefix))}async clear(e){const t=this.createId(e);return(0,Mr.clear)(t)}async clearAll(){const e=await this.getAll();let t=0;for(const n of e)await this.clear(n.id)&&t++;return t}async show(e){await(0,Mr.show)(e)}async hide(){await(0,Mr.hide)()}async addEventListener(e,t){"notifications-count-changed"!==e||this._isCountTracked||(this._isCountTracked=!0,await this.trackCount());const n={id:C(),eventType:e,listener:t,wrappedListener:e=>{"notification"in e&&this.hasId(e.notification.id)?t(e):"notifications-count-changed"===e.type&&(e.count=this._currentCount,t(e))}};this._listenerRegister.push(n),(0,Mr.addEventListener)(e,n.wrappedListener)}async removeEventListener(e,t){const n=this._listenerRegister.find(e=>e.listener===t);if(!p(n)&&(await(0,Mr.removeEventListener)(e,n.wrappedListener),this._listenerRegister=this._listenerRegister.filter(e=>e.id!==n.id),"notifications-count-changed"===e)){const t=this._listenerRegister.filter(t=>t.eventType===e);1===t.length&&(this._logger.info("Removing the count tracking as there are no more listeners for notification count."),await this.removeEventListener(e,t[0].listener),this._isCountTracked=!1)}}hasId(e){return!p(e)&&e.startsWith(`${this._options.id}-`)}createId(e){return p(e)||!this.hasId(e)?`${this._idPrefix}-${e??C()}`:e}async trackCount(){const e=await this.getAll();this._currentCount=e.length,await this.addEventListener("notifications-count-changed",this._updateTrackedCount)}}const so=li("Notifications");let co,lo,uo,po,fo,ho=!1,go=!0,mo=!1;const wo=li("Actions");let yo;const vo={};let bo,ko=!1;const So="launch-app";async function Co(e,t){if(!ko)return ko=!0,e&&(wo.info("Initializing with options",e),yo=await qo(e,"actions"),await Jo(yo,{...t,updateToolbarButtons:Re})),await async function(){bo=await async function(){const e={"home-show":async()=>{await no()},"notification-toggle":async()=>{await async function(){return so.info("Toggle Notifications called."),Mr.toggleNotificationCenter()}()},quit:async()=>{await fin.Platform.getCurrentSync().quit()},"logout-and-quit":async()=>{await ar()}};return e[So]=async e=>{if(e.callerType===u.CustomActionCallerType.CustomButton||e.callerType===u.CustomActionCallerType.CustomDropdownItem||e.callerType===u.CustomActionCallerType.StoreCustomButton)if(e.customData?.appId){const t=await qn(e.customData.appId);t?await xo(t,e.windowIdentity):wo.error(`Unable to find app with id '${e.customData.appId}' in call to launchApp action from source '${e.customData?.source??"unknown source"}'`)}else wo.error("No appId specified in payload.customData in launchApp action")},e["launch-view"]=async e=>{if(e.callerType===u.CustomActionCallerType.CustomButton||e.callerType===u.CustomActionCallerType.CustomDropdownItem)if(e.customData?.url){const t={appId:"action-launch-view",title:"View Url",icons:[],publisher:"",manifestType:"inline-view",manifest:{url:e.customData.url}};await xo(t,e.windowIdentity)}else wo.error("No url specified in payload.customData in launchView action")},e}();const e=await async function(){return{share:async e=>{e.callerType===u.CustomActionCallerType.CustomButton&&await async function(e){if(Yr){Gr.info("Share called with payload:",e);const t=e.windowIdentity,n=[];for(const e of Jr){const r=await e.implementation.getEntries(t);if(Array.isArray(r))for(const e of r){const{label:t,type:r,payload:a}=e;n.push({label:t,data:{type:r,payload:a}})}}const r=await Uo({x:e.x,y:e.y},e.windowIdentity,"",n);p(r)?Gr.info("share menu dismissed."):await ea(r.type,r.payload)}else Gr.warn("Share cannot be triggered as it hasn't been registered yet.")}(e)}}}(),t=await Tr(),n=await async function(){return{"popup-menu":async e=>{if(e.callerType===u.CustomActionCallerType.CustomButton){const t=e.customData,n=await Uo("dock"===t.source?{x:e.x,y:48}:{x:e.x,y:e.y},e.windowIdentity,t.noEntryText,t.menuEntries,t.options);p(n)||await Po(n.id,{...e,customData:n.customData})}}}}(),r=await async function(){return{"toggle-scheme":async e=>{e.callerType!==u.CustomActionCallerType.CustomButton&&e.callerType!==u.CustomActionCallerType.CustomDropdownItem||await async function(){const e=(0,u.getCurrentSync)();ge===pe.Light?await e.Theme.setSelectedScheme(u.ColorSchemeOptionType.Dark):await e.Theme.setSelectedScheme(u.ColorSchemeOptionType.Light)}()}}}();if(bo={...bo,...e,...t,...n,...r,...vo},!p(yo)){const e=(0,u.getCurrentSync)();for(const t of yo){const n=await t.implementation.get(e);bo={...bo,...n}}}wo.info("Action Ids",Object.keys(bo))}(),bo;wo.error("The actions can only be used once when configuring the platform")}async function Po(e,t){return!(p(bo)||!bo[e]||(await bo[e](t),0))}async function xo(e,t){p(e)?wo.error("Unable to do launch app action as an app object was not passed"):await Nt(e,void 0,t)}const _o=new Map;async function Io(e,t){if(!g(e))return;const n=`${e}_${t}`,r=_o.get(n);return r?r.dataUri:new Promise(r=>{try{const a=document.createElement("img");a.width=t,a.height=t,a.crossOrigin="anonymous",a.addEventListener("load",()=>{let e;try{const r=document.createElement("canvas");r.width=t,r.height=t;const o=r.getContext("2d");o&&(o.drawImage(a,0,0,t,t),e=r.toDataURL("image/png",1),_o.set(n,{dataUri:e}))}catch{}r(e)}),a.addEventListener("error",()=>{_o.set(n,{dataUri:void 0}),r(void 0)}),a.src=e}catch{_o.set(n,{dataUri:void 0}),r(void 0)}})}const Ao=li("Menu");let Eo,To,Mo,Ro,Oo=[];async function Do(e,t){const n=e??[];if(Array.isArray(t)){const e=(0,u.getCurrentSync)();for(const r of t){const{position:t,include:a,conditions:o,separator:i,...s}=r;if((a??p(a))&&await re(e,o,{callerType:"menu",customData:r})){const e=No(n,t?.type,t?.operation,t?.customId,s);if(e>=0){const t={type:"separator"};"before"===i?0===e?n.unshift(t):n.splice(e,0,t):"after"===i&&(e===n.length-1?n.push(t):n.splice(e+1,0,t))}}}}return n}async function Bo(e,t){const n=await le(),r=(n?.browserProvider?.globalMenu??[]).concat(await Lo("global",t)),a=n?.browserProvider?.menuOptions?.includeDefaults?.globalMenu;return y(a)&&!a?Do(void 0,r):Do(e,r)}async function Wo(e,t){const n=await le(),r=(n?.browserProvider?.pageMenu??[]).concat(await Lo("page",t)),a=n?.browserProvider?.menuOptions?.includeDefaults?.pageMenu;return y(a)&&!a?Do(void 0,r):Do(e,r)}async function Fo(e,t){const n=await le(),r=(n?.browserProvider?.viewMenu??[]).concat(await Lo("view",t)),a=n?.browserProvider?.menuOptions?.includeDefaults?.viewMenu;return y(a)&&!a?Do(void 0,r):Do(e,r)}function No(e,t,n,r,a){if("start"===n)a?e.unshift(a):Ao.warn("Entry type is specified as start but no entry provided");else if("end"===n)a?e.push(a):Ao.warn("Entry type is specified as end but no entry provided");else{let o;if("Custom"===t?(p(r)&&Ao.warn("Entry type is specified as custom but no customId was provided"),o=e.findIndex(e=>e.data?.type===t&&e.data?.action?.id===r),-1===o&&Ao.warn(`Unable to find menu with entry type: ${JSON.stringify(t)} and customId: ${r}`)):(o=e.findIndex(e=>e.data?.type===t),-1===o&&Ao.warn(`Unable to find menu with entry type: ${t}`)),-1!==o&&n)switch(n){case"delete":e.splice(o,1);break;case"replaceLabel":{const n=a?.label;p(n)?Ao.warn(`Asked to replace label of menu entry but not provided an entry to grab a label from or given an empty label. Target menu data type: ${t}`):e[o].label=n;break}case"after":p(a)?Ao.warn(`You cannot insert a menu entry after the menu entry with data type: ${t} if you do not specify a menu entry`):e.splice(o+1,0,a);break;case"before":p(a)?Ao.warn(`You cannot insert a menu entry before the menu entry with data type: ${t} if you do not specify a menu entry`):0===o?e.unshift(a):e.splice(o,0,a)}}return a?e.indexOf(a):-1}async function Lo(e,t){const n=(0,u.getCurrentSync)();let r=[];for(const a of Oo){const o=await a.implementation.get(e,n,t);o&&(r=r.concat(o))}return r}function $o(){return Eo?.popupMenuStyle??"platform"}async function Uo(e,t,n,r,a){const o=$o(),i=a?.popupMenuStyle??o;return"platform"===i||"native"===i?async function(e,t,n,r){const a=fin.Window.wrapSync(t),o=[],i=await ke(),s=await async function(){return Ae()}();for(const e of r.filter(e=>e.visible??!0)){let t=Ee(e.icon,i,s);g(t)&&(t=await Io(t,20)),o.push({...e,icon:t})}(p(o)||0===o.length)&&o.push({label:n,enabled:!1});const c=await a.showPopupMenu({template:o,x:e.x,y:e.y});if("clicked"===c.result)return c.data}(e,t,n,r):async function(e,t,n,r){if(Mo)try{const e=fin.Window.wrapSync({uuid:fin.me.uuid,name:Mo});await e.close()}catch{}finally{Mo=void 0}Ro&&(window.clearInterval(Ro),Ro=void 0);const a=fin.Window.wrapSync(t),o=await a.getBounds(),i=fin.Window.wrapSync(fin.me.identity),s=await we(),c=await ke(),l=await ye(),u=jo(c,l,r,n);let d=Math.floor(o.left+e.x),p=Math.floor(o.top+e.y);const f=u.width,h=u.height,g=await Tt({x:d,y:p});d+f>g.availableRect.right&&(d=g.availableRect.right-f-20),p+h>g.availableRect.bottom&&(p=g.availableRect.bottom-h-20);const m={x:d,y:p,width:f,height:h},w=Eo?.popupHtml??`${To}/common/popups/menu/index.html`;return Mo=C(),Ro=window.setInterval(async()=>{try{if(Mo){const e=fin.Window.wrapSync({uuid:fin.me.identity.uuid,name:Mo});"normal"!==await e.getState()&&(Mo=void 0,window.clearInterval(Ro),Ro=void 0)}}catch{Mo=void 0,window.clearInterval(Ro),Ro=void 0}},1e3),new Promise(e=>{window.setTimeout(async()=>{let t;try{const e=await i.showPopupWindow({name:Mo,initialOptions:{showTaskbarIcon:!1,smallWindow:!0,contextMenu:!1,backgroundColor:s?.backgroundPrimary,customData:{noEntryText:n,menuEntries:u.entries,palette:s,colorScheme:l,menuProviderOptions:Eo,popupUrl:w,monitorRect:g,bounds:m}},url:w,...m,blurBehavior:"modal"});Mo=void 0,window.clearInterval(Ro),Ro=void 0,"clicked"===e.result&&(t=e.data)}catch{}e(t)},100)})}({x:e.x-16,y:e.y-8},t,n,r)}function jo(e,t,n,r){const a=[];let o="";const i=Eo?.menuItemHeight??24,s=Eo?.menuItemSeparatorHeight??12;let c=0,l=0,u=0;for(const d of n.filter(e=>e.visible??!0)){if(d.y=c,g(d.icon)&&(d.icon=Ee(d.icon,e,t),l++),"checkbox"!==d.type&&p(d.checked)||l++,"separator"===d.type?c+=s:c+=i,"submenu"===d.type||Array.isArray(d.submenu)){u++;const n=jo(e,t,d.submenu??[],r);d.submenu=n.entries,d.submenuDimensions={width:n.width,height:n.height}}d.label&&d.label?.length>o.length&&(o=d.label),a.push(d)}0===o.length&&(o=r);const d=Eo?.menuFontSize??12;let f=o.length*d/1.6;const h=document.createElement("canvas");h.width=1e3,document.body.append(h);const m=h.getContext("2d");m&&(m.font=`${d}px Inter`,f=m.measureText(o).width,h.remove());let w=40;return l>0&&(w+=28),u>0&&(w+=18),{entries:a,width:Math.floor(Eo?.menuWidth??f+w),height:Math.floor(c+s)}}const Vo=li("Modules");let zo,Go=!1;const Ho={};async function qo(e,t){const n=[],r=e?.modules;if(Array.isArray(r))for(const e of r){e.moduleType=t;const r=await Ko(e,t);r&&n.push(r)}return n}async function Ko(e,t){if(e.id){if(e.enabled??1){if(!e.url)return void Vo.error(`Module '${e.id}' can not be loaded without a url`);if(Ho[e.url]){Vo.info(`Module already loaded '${e.url}' using cached version`);const n=Ho[e.url][t];if(!n)return void Vo.error(`Module from cache does not contain an entry point for type ${t}`);n.definition=e}else try{Vo.info(`Loading module '${e.url}' for type ${t}`);const n=await import(e.url);if(!n.entryPoints)return void Vo.error(`Module '${e.id}' has no exported entryPoints`);const r=Object.keys(n.entryPoints);if(!r.includes(t))return void Vo.error(`Module was loaded, but is does not contain an entry point for type ${t}, it only contains ${r.join(", ")}`);Vo.info(`Module contains implementations for ${r.join(", ")}`),Ho[e.url]={};for(const a of r)Ho[e.url][a]={definition:a===t?e:{},isInitialized:!1,implementation:n.entryPoints[a]??{}}}catch(t){return void Vo.error(`Error loading module ${e.url}`,t)}return Ho[e.url][t]}}else Vo.warn("Module does not have an id defined")}async function Jo(e,t,n){for(const r of e)n&&await n(r.definition),await Yo(r,t)}async function Yo(e,t){if(!e.isInitialized)if(e.implementation?.initialize)try{Vo.info(`Initializing module '${e.definition.id}' of type '${e.definition.moduleType}'`);const n="log"===e.definition.moduleType?si:li,r="auth"===e.definition.moduleType?void 0:sr,a={...t,getAuthClient:r,getNotificationClient:ti(e.definition),getEndpointClient:ni(e.definition)};await e.implementation.initialize(e.definition,n,a),e.isInitialized=!0}catch(t){Vo.error(`Error initializing module ${e.definition.id}`,t)}else e.isInitialized=!0;return e.isInitialized?e.implementation:void 0}async function Zo(e){if(e.isInitialized)if(e.implementation?.closedown)try{Vo.info(`Closing down module '${e.definition.id}'`),await e.implementation.closedown(),e.isInitialized=!1}catch(t){Vo.error(`Error closing down module ${e.definition.id}`,t)}else e.isInitialized=!1}function Qo(){return{sessionId:zo,bringAppToFront:Lt,getPlatform:u.getCurrentSync,getAnalyticsClient:async()=>async function(){if(gi())return{handleAnalytics:async e=>{if(Array.isArray(e))return mi(e.map(e=>({...e,source:di})))}}}(),getApps:async()=>(Vo.info("getApps: getting public apps for module."),Gn({private:!1})),getApp:qn,getVersionInfo:Ea,getInteropClient:Xo,getFavoriteClient:ei,getThemeClient:Pe,getMenuClient:ri,getConditionsClient:ai,getShareClient:oi,getDialogClient:ii,launchApp:async(e,t,n)=>{Vo.info(`launchApp: Looking up appId: ${e}`);const r=await qn(e);let a;return p(r)?Vo.warn(`launchApp: The specified appId: ${e} is not listed in this platform.`):(Vo.info(`launchApp: Launching app with appId: ${e}`),a=await Nt(r,t,n),Vo.info(`launchApp: App with appId: ${e} launched.`)),a},launchPage:async(e,t,n)=>{const r=(0,u.getCurrentSync)(),a=await r.Storage.getPage(e);if(a)return async function(e,t,n){p(e)&&n?.error("Page is empty and cannot be attached to a window.");const r=(0,u.getCurrentSync)(),a=await r.Browser.getAllAttachedPages(),o=a.find(t=>t.pageId===e.pageId)?.parentIdentity,i=t?.targetWindowIdentity;if(!p(i)){if(!p(o)&&o.name!==i.name&&!t?.createCopyIfExists){const t=r.Browser.wrapSync(o);return await t.setActivePage(e.pageId),n?.warn("Activating page in window which is not the specified target window",{pageId:e.pageId,attachedWindowId:o.name,targetWindowIdentity:i.name}),await Le({identity:t.identity}),t}const a=r.Browser.wrapSync(i),s=(await a.getPages()).find(t=>t.pageId===e.pageId);return!s||t?.createCopyIfExists?(n?.info(s?"Page exists in target window, but createCopyIfExists flag is set, adding":"Page does not exist in target window, adding",{pageId:e.pageId,targetWindowIdentity:i.name}),await a.addPage(e)):n?.info("Page exists in target window, activating",{pageId:e.pageId,targetWindowIdentity:i.name}),await a.setActivePage(e.pageId),await Le({identity:a.identity}),a}if(!p(o)&&!t?.createCopyIfExists){const t=r.Browser.wrapSync(o);return n?.info("Page exists in target window, activating",{pageId:e.pageId,attachedWindowId:o.name}),await t.setActivePage(e.pageId),await Le({identity:t.identity}),t}let s=t?.bounds;p(s)&&!p(e.customData?.windowBounds)&&(s=e.customData.windowBounds);let c=t?.state;p(c)&&!p(e.customData?.windowState)&&(c=e.customData.windowState);const l={workspacePlatform:{pages:[e]}};if(!p(s)){const e=await fin.System.getMonitorInfo();l.height=s.height,l.width=s.width,l.defaultHeight=s.height,l.defaultWidth=s.width,p(e.virtualScreen)||(!p(e.virtualScreen.left)&&s.left>=e.virtualScreen.left&&(l.x=s.left,l.defaultLeft=s.left),!p(e.virtualScreen.top)&&s.top>=e.virtualScreen.top&&(l.y=s.top,l.defaultTop=s.top))}p(c)||(l.state=c);const d=await r.Browser.createWindow(l);return n?.info("Page does not exist, creating new window and adding page",{pageId:e.pageId,newWindowId:d.identity.name}),d}(a,t,n);p(n)?Vo.error(`The passed pageId: ${e} does not exist`):n.error(`The passed pageId: ${e} does not exist`)},launchWorkspace:async e=>{const t=(0,u.getCurrentSync)(),n=await t.Storage.getWorkspace(e);return n?t.applyWorkspace(n):(Vo.warn(`Unable to launch workspace with id ${e} as it does not exist`),!1)},launchView:$e,launchSnapshot:async e=>{const t=await Nt({manifestType:G.Snapshot.id,manifest:e,appId:"",title:"",icons:[],publisher:""});return t?t.map(e=>({uuid:e.uuid,name:e.name})):[]},subscribeLifecycleEvent:Y,unsubscribeLifecycleEvent:Z,getUtilClient:()=>({general:r,position:s}),getConnectionClient:async()=>dn(),getAuthClient:sr}}async function Xo(){if(Go)return fin.Interop.connectSync(fin.me.uuid,{});Vo.warn("A request was made for the interop client before bootstrapping had completed. Please listen for the lifeCycle event 'after-bootstrap' before use.")}async function ei(){if(Er().isEnabled)return c}function ti(e){const t=b(e);return async()=>async function(e){if(!ho)return void so.warn("A notification client was requested before the notification provider was registered.",e);if(!go)return void so.warn("Notification client creation is disabled. If you this is not expected please check you Notification Provider -> Notification Clients settings.");const t=uo.find(t=>t.id===e.id);if(mo&&p(t))return void so.warn(`Notification client creation is limited to those listed in the notification clients section of the notification provider. We have been unable to find an entry with the id: ${e.id}. `);if(!p(t)&&!1===t.enabled)return void so.warn(`The options passed to create a notification client was a listed entry and it's enabled setting is set to false so a notification client will not be created. Id: ${e.id}`);if(!p(t)&&!1===t.restricted)return so.info(`The options passed to create a notification client requests a non-scoped notification client for the module with Id: ${e.id}`),Mr;const n=Object.assign(e,po,t??{});return p(n.icon)&&(so.info(`No default icon was specified for ${e.id}, providing notification platform default icon of: ${co?.icon} for cases where an icon was not provided.`),n.icon=co?.icon),new io(n,fo)}(t)}function ni(e){const t=b(e);return async()=>N(t)}async function ri(){return{getPopupMenuStyle:$o,showPopupMenu:Uo}}async function ai(){return{check:async(e,t)=>ae((0,u.getCurrentSync)(),e,t),changed:oe}}async function oi(){if(Qr())return{typeEnabled:Xr,share:ea,confirmation:ta}}async function ii(){return{showConfirmation:ur}}function si(e){return console.info(`${e}: Creating local logger for a log module. Log modules will not be able to use the logger to send messages to log modules as it would be sending messages to itself as well as other log sinks. This will be logged to the console of the provider.`),{info:(t,...n)=>console.log(`${e}: ${t}`,...n),warn:(t,...n)=>console.warn(`${e}: ${t}`,...n),error:(t,...n)=>console.error(`${e}: ${t}`,...n),trace:(t,...n)=>console.debug(`${e}: ${t}`,...n),debug:(t,...n)=>console.debug(`${e}: ${t}`,...n)}}let ci=[];function li(e){return{info:(t,...n)=>ui(e,"info",t,...n),warn:(t,...n)=>ui(e,"warn",t,...n),error:(t,...n)=>ui(e,"error",t,...n),trace:(t,...n)=>ui(e,"trace",t,...n),debug:(t,...n)=>ui(e,"debug",t,...n)}}function ui(e,t,n,...r){let a=!1;for(const o of ci)a=!0,o.implementation.log(fin.me.identity.name,e,t,n,...r);a||console[t](`[${e}]`,`[${fin.me.identity.name}]`,n,...r)}const di="Module";let pi=[],fi=!1;const hi=li("Analytics");function gi(){return fi}async function mi(e){for(const t of pi)await t.implementation.handleAnalytics(e)}const wi=li("Tray"),yi=li("Dock"),vi="dock-get",bi="dock-set";let ki,Si,Ci;const Pi=new Set;let xi,_i,Ii,Ai,Ei;async function Ti(e){if(Ci)return Ei=e,{id:Ci.id,title:Ci.title,icon:Ci.icon,workspaceComponents:Mi(Array.isArray(ki?.workspaceComponents)?ki?.workspaceComponents:void 0),disableUserRearrangement:Ci?.disableUserRearrangement??!1,buttons:b(Ei)}}function Mi(e=[]){const t=new Set;Ci?.workspaceComponents?.hideWorkspacesButton||t.add("switchWorkspace"),!Ci?.workspaceComponents?.hideHomeButton&&xi?.home&&t.add("home"),!Ci?.workspaceComponents?.hideNotificationsButton&&xi?.notifications&&t.add("notifications"),!Ci?.workspaceComponents?.hideStorefrontButton&&xi?.store&&t.add("store");const n=[];for(const r of e)t.has(r)&&(n.push(r),t.delete(r));return t.size>0&&n.push(...t),n}async function Ri(){if(Ci){const e=Array.isArray(Ci.entries)?[...Ci.entries]:[];return Pi.clear(),Oi(e)}return[]}async function Oi(e){const[t,n]=await Promise.all([ke(),ye()]),r=(0,u.getCurrentSync)(),a=e.map(async e=>{const a=e.visible??!0;if(Array.isArray(e.conditions))for(const t of e.conditions)Pi.add(t);if(a&&await re(r,e.conditions,{callerType:"dock",customData:e})){if("appId"in e)return async function(e,t,n){let r=e.tooltip,a=e.iconUrl;if(!g(r)||!g(a)){const t=await qn(e.appId);t&&(g(r)||(r=t.title),g(a)||(a=Li(t)))}return{id:e.id,type:na.DockButtonNames.ActionButton,tooltip:r??"",iconUrl:Ee(a,t,n),action:{id:So,customData:{source:"dock",appId:e.appId}}}}(e,t,n);if("action"in e)return async function(e,t,n){if(g(e.tooltip))return{id:e.id,type:na.DockButtonNames.ActionButton,tooltip:e.tooltip,iconUrl:Ee(e.iconUrl,t,n),action:e.action};yi.error("You must specify the tooltip for a DockButtonAction")}(e,t,n);if("options"in e)return async function(e,t,n,r){if(g(e.tooltip)){const a=e.options.map(async e=>{if(Array.isArray(e.conditions))for(const t of e.conditions)Pi.add(t);if(await re(r,e.conditions,{callerType:"dock",customData:{...e,id:""}})){if("options"in e){const t=await Oi(e.options);return{type:na.DockButtonNames.DropdownButton,tooltip:e.tooltip??"",iconUrl:e.iconUrl,options:t}}if("appId"in e){const t=await qn(e.appId);let n=e.iconUrl;return!g(e.iconUrl)&&t&&(n=Li(t)),{type:na.DockButtonNames.ActionButton,tooltip:e.tooltip??t?.title??"",iconUrl:n,action:{id:So,customData:{source:"dock",appId:e.appId}}}}if("tags"in e)return Di(e,t,n);if("action"in e)return{type:na.DockButtonNames.ActionButton,tooltip:e.tooltip??"",iconUrl:e.iconUrl,action:e.action}}}),o=(await Promise.all(a)).flat().filter(e=>!p(e));return 0===o.length?{tooltip:e.noEntries??"There are no entries",disabled:!0,action:{id:"noop"}}:$i(e.id,e.tooltip??"",Ee(e.iconUrl,t,n),o)}yi.error("You must specify the tooltip for a DockButtonDropdown")}(e,t,n,r);if("tags"in e)return Di(e,t,n)}});return(await Promise.all(a)).flat().filter(e=>!p(e))}async function Di(e,t,n){if(Array.isArray(e.tags)){const r=await Hn(e.tags,!1,{private:!1});if("individual"===e.display){const a=[];for(const o of r){const r=e.iconUrl??Li(o);a.push({id:`${e.id}-${o.appId}`,tooltip:e.tooltip??o.title,iconUrl:Ee(r,t,n),action:{id:So,customData:{source:"dock",appId:o.appId}}})}return a}if("group"===e.display){if(g(e.tooltip)){let a=e.iconUrl;const o=[];for(const e of r){const t=Li(e);g(a)||(a=t),o.push({tooltip:e.title,action:{id:So,customData:{source:"dock",appId:e.appId}},iconUrl:a})}return 0===o.length&&o.push({tooltip:e.noEntries??"There are no entries",disabled:!0,action:{id:"noop"}}),[await $i(e.id,e.tooltip??"",Ee(a,t,n),o)]}yi.error("You must specify the tooltip for a grouped DockButtonAppsByTag")}}else yi.error("You must specify an array for the tags parameter for an DockButtonAppsByTag")}async function Bi(){return yi.info("Dock show called."),na.Dock.show()}async function Wi(e,t){let n;yi.info(`Checking for custom dock storage with endpoint id: ${vi}`);const r=b(Ei??[]);if(L(vi)){yi.info("Requesting dock config from custom storage");const t=await U(vi,{platform:fin.me.identity.uuid,id:e,availableButtons:r});t?(yi.info("Returning dock config from custom storage"),n=t.config):yi.warn("No response getting dock config from custom storage")}else if(yi.info("Requesting dock config from default storage"),n=await t(e),!p(n)&&!p(n.buttons)){const e=[];for(const t of n.buttons)if(g(t.id)){const n=r.findIndex(e=>e.id===t.id);n>=0&&(e.push(r[n]),r.splice(n,1))}e.push(...r),n.buttons=e}return p(n)||(n.workspaceComponents=Mi(Array.isArray(n.workspaceComponents)?n.workspaceComponents:void 0)),n}async function Fi(e,t){if(Ci?.entries){const t=[],n=new Map;for(const e of Ci.entries)n.set(e.id,e);for(const r of e.buttons??[])if(g(r.id)){const e=n.get(r.id);e&&(t.push(e),n.delete(r.id))}const r=n.values();n.size>0&&yi.warn(`Failed to find ${n.size} buttons in the new config, they will be appended to the end of the dock`),t.push(...r),Ci.entries=t}if(ki?.workspaceComponents&&(ki.workspaceComponents=e.workspaceComponents),yi.info(`Checking for custom dock storage with endpoint id: ${bi}`),L(bi)){yi.info("Storing dock config in custom storage");const t=await Ea();await $(bi,{platform:fin.me.identity.uuid,metaData:{version:{workspacePlatformClient:t.workspacePlatformClient,platformClient:t.platformClient}},config:e})?yi.info(`Saved dock config with id: ${e.id} to custom storage`):yi.info(`Unable to save dock config with id: ${e.id} to custom storage`)}else yi.info("Storing dock config in default storage"),await t(e)}async function Ni(){if(!p(Si)){const e=await Ri();if(JSON.stringify(e)!==JSON.stringify(Ei)){const t=await Ti(e);t&&await Si.updateDockProviderConfig(t)}}}function Li(e){if(Array.isArray(e.icons)&&e.icons.length>0)return e.icons[0].src}async function $i(e,t,n,r){const a=Ci?.popupMenuStyle??$o();return"platform"===a?(await Promise.all(r.map(async e=>{e.iconUrl=await Io(e.iconUrl,20)})),{id:e,type:na.DockButtonNames.DropdownButton,tooltip:t,iconUrl:n,options:r}):{id:e,type:na.DockButtonNames.ActionButton,tooltip:t,iconUrl:n,action:{id:"popup-menu",customData:{source:"dock",noEntryText:"No Entries",menuEntries:r.map(e=>({label:e.tooltip,enabled:!e.disabled,icon:e.iconUrl,data:e.action})),options:{popupMenuStyle:a}}}}}const Ui=li("Low Code Integrations");let ji,Vi;const zi=[];const Gi=li("Store");let Hi,qi,Ki;async function Ji(){return Gi.info("Showing the store."),na.Storefront.show()}function Yi(e,t=[]){let n=e.replaceAll(" ","-");return n+=`-${t.join("-")}`,n.toLowerCase()}function Zi(e,t,n,r,a){if(p(e))Gi.warn(`${t}: ${n}`);else{if(r.includes(e))return Gi.error(`${t}: The id is used in more than one place. Please have a unique and idempotent id: ${e}`),!0;r.push(e)}return a}async function Qi(e,t,n){const r={id:e??Yi(t,n),title:t,templateId:na.StorefrontTemplate.AppGrid,templateData:{apps:[]}},a=await Hn(n,!1,{private:!1});return!p(a)&&a.length>0&&(r.templateData.apps=a),r}async function Xi(e,t){const n=[];e.length>t&&Gi.warn(`You have defined too many navigation items (${e.length}). Please limit it to ${t} as we will only take the first ${t}`);for(const r of e.slice(0,t)){const e=await Qi(r.id,r.title,r.tags);n.push(e)}return n}async function es(e,t){e.items.length>t&&Gi.warn(`You have defined too many storefront detailed navigation items (${e.items.length}). Please keep it to the limit of ${t} as only the first ${t} will be returned.`);const n=[];for(const r of e.items.slice(0,t)){const e=await Qi(r.id,r.title,r.tags),t={description:r.description,image:r.image,buttonTitle:r.buttonTitle,...e};n.push(t)}return{title:e.title,items:n}}async function ts(e){const t=Hi?.primaryButton,n=Hi?.secondaryButtons,r=Er(),a={};let o=!1;if((Hi?.favoritesEnabled??1)&&r.isEnabled&&(p(r.enabledTypes)||r.enabledTypes.includes(dr))){o=!0;const e=await xr(dr);if(e)for(const t of e)a[t.typeId]=t}const i=!p(n)&&Array.isArray(n);return!p(t)||i||o?e.map(e=>({...e,...ns(e,t,n,o,a[e.appId])})):e}function ns(e,t,n,r,a){const o=n?.map(t=>({title:t.title,action:{id:t.action.id,customData:t.action.customData??e}}))??[];return r&&o.push({title:a?"Remove Favorite":"Add Favorite",action:{id:a?"favorite-remove":"favorite-add",customData:a??{id:C(),type:dr,typeId:e.appId,label:e.title,icon:rs(e)}}}),{primaryButton:e.primaryButton??t??{title:"Launch",action:{id:So,customData:e}},secondaryButtons:o}}function rs(e){if(Array.isArray(e.icons)&&e.icons.length>0)return e.icons[0].src}const as=li("Bootstrapper");let os,is=!1;async function ss(){as.info("Initializing the bootstrapper");const e=await le();os={...e?.bootstrap},os.home=os.home??!0,os.store=os.store??!1,os.dock=os.dock??!1,os.notifications=os.notifications??!1,os.autoShow=os.autoShow??[],os.autostartApps=os.autostartApps??!0;const t=Qo(),n=[];let r,a,o;if(await dt("Integrations"),as.info("Registering integrations"),await async function(e,t){if(e){if(e.modules=e.modules??e.integrations,La.info("Initializing integrations."),$a=e,Ua={...t,templateHelpers:l,openUrl:async e=>fin.System.openUrlWithBrowser(e),setSearchQuery:async e=>{r?.setSearchQuery?await(r?.setSearchQuery(e)):as.warn("Home registration setSearchQuery called by integration, but it is not available")}},e.modules)for(const t of e.modules)t.url=t.url??t.moduleUrl,delete t.moduleUrl;ja=await qo(e,"integrations");const n=[];for(const e of ja){const t=await Ha(e.definition.id);e.definition.autoStart=t?.autoStart??e.definition.autoStart??!0,e.definition.autoStart&&n.push(e)}await Jo(n,Ua,async e=>{await dt(`${e.title} Integration`)}),La.info("Integrations has been initialized.")}}(e?.integrationProvider,t),os.home){await dt("Home");let t=e?.homeProvider;if(p(t)){const e=await fin.Application.getCurrent(),n=await e.getManifest();t={id:fin.me.identity.uuid,title:"Home",icon:n.platform?.icon??""}}r=await async function(e){if(!Qa){if(Za=e,Ya.info("Initializing home"),p(Za)||p(Za.id)||p(Za.title))return void Ya.warn("Provider not configured in the customSettings of your manifest correctly. Ensure you have the homeProvider object defined in customSettings with the following defined: id, title");const t={...Za,onUserInput:ro,onResultDispatch:ao,dispatchFocusEvents:!0};Qa=await na.Home.register(t),Ya.info("Version:",Qa),Ya.info("Home provider initialized")}return Qa}(t),r&&(a={workspaceVersion:r.workspaceVersion,clientAPIVersion:r.clientAPIVersion},n.push("home"),us())}if(os.store){await dt("Store");const t=await async function(e){if(e&&(Hi=e,Gi.info("Initializing the storefront provider"),function(){const e=[];let t=!1;if(p(Hi)||p(Hi.id)||p(Hi.title)||p(Hi.footer)||p(Hi.landingPage)||p(Hi.landingPage?.topRow)||p(Hi.landingPage?.middleRow)||p(Hi.landingPage?.bottomRow)||p(Hi.navigation))return Gi.error("StorefrontProvider is not correctly configured in the customSettings of this manifest. You must ensure that storefrontProvider is defined, that it has an id and title and that the footer, landingPage (top row, middle row and bottom row) and navigation sections have been defined"),!1;const n="The id is not defined. This demo will generate an id based on title but you should have a unique and idempotent id when building your own store";Gi.info("Validating settings storefrontProvider navigation config");const r=Hi.navigation;for(let a=0;a<r.length;a++){t=Zi(r[a].id,`storefrontProvider.navigation[${a}].id`,n,e,t);const o=r[a].items;for(let r=0;r<o.length;r++)t=Zi(o[r].id,`storefrontProvider.navigation[${a}].items[${r}].id`,n,e,t)}Gi.info("Validating settings storefrontProvider landing page hero config");const a=Hi.landingPage;p(a?.hero?.cta)||(t=Zi(a?.hero?.cta.id,"storefrontProvider.landingPage.hero.cta.id",n,e,t)),Gi.info("Validating settings storefrontProvider landing page top row config");const o=a.topRow;if(!p(o.items))for(let r=0;r<o.items.length;r++)t=Zi(o.items[r].id,`storefrontProvider.landingPage.topRow.items[${r}].id`,n,e,t);Gi.info("Validating settings storefrontProvider landing page bottom row config");const i=a.bottomRow;if(!p(i.items))for(let r=0;r<i.items.length;r++)t=Zi(i.items[r].id,`storefrontProvider.landingPage.bottomRow.items[${r}].id`,n,e,t);return Gi.info("Validating ids, checking for duplicate ids"),!t||(Gi.error("You have defined duplicate ids (please see the other error messages) which could result in strange behavior (if we are routing by id and you have two or more items that resolve to the same id then it could navigate to something unexpected. Please ensure ids are unique and idempotent"),!1)}()))try{qi=await na.Storefront.register({id:Hi.id,title:Hi.title,icon:Hi.icon,getNavigation:async()=>async function(){const e=Hi?.navigation;if(p(e))return[];Gi.info("Showing the store navigation");const t=[];for(const n of e){if(2===t.length){Gi.info("More than 2 navigation sections defined in StorefrontProvider settings. Only two are taken");break}const e={id:n.id??Yi(n.title),title:n.title,items:await Xi(n.items,5)};t.push(e)}return t}(),getLandingPage:async()=>async function(){Gi.info("Getting the store landing page");const e={},t=Hi?.landingPage,n=t?.hero;if(!p(n)){const t=await Qi(n.cta.id,n.cta.title,n.cta.tags);e.hero={title:n.title,image:n.image,description:n.description,cta:t}}const r=t?.topRow;if(p(r))Gi.error("You need to have a topRow defined in your landing page");else{const t=await es(r,4);e.topRow={title:t.title,items:t.items}}const a=t?.middleRow;if(p(a))Gi.error("You need to have a middleRow defined in your landing page");else{const t=await Hn(a.tags,!1,{private:!1});t.length>6&&Gi.warn(`Too many apps (${t.length}) have been returned by the middle row tag definition ${a.tags.join(" ")}. Only 6 will be shown.`);const n=await ts(t.slice(0,6));e.middleRow={title:a.title,apps:n}}const o=t?.bottomRow;if(p(o))Gi.error("You need to have a bottomRow defined in your landing page");else{const t=await es(o,3);e.bottomRow={title:t.title,items:t.items}}return e}(),getFooter:async()=>async function(){Gi.info("Getting the store footer");const e=Hi?.footer;return p(e)?(Gi.error("Storefront is being initialized without a footer configured"),{}):e}(),getApps:async()=>ts(await Gn({private:!1})),launchApp:async e=>{await Nt(e,void 0,{uuid:Na,name:"openfin-storefront"})}}),Ki=Y("favorite-changed",async(e,t)=>{p(t)||await async function(e){const t=e.favorite;if((Hi?.favoritesEnabled??1)&&!p(qi)&&!p(t)&&("set"===e.action||"delete"===e.action)&&t.type===dr){const n=await qn(t.typeId);p(n)?Gi.warn(`Favorite update for appId ${t.typeId} which does not exist`):await qi.updateAppCardButtons({appId:t.typeId,...ns(n,Hi?.primaryButton,Hi?.secondaryButtons,!0,"set"===e.action?t:void 0)})}}(t)}),Gi.info("Version:",qi),Gi.info("Storefront provider initialized")}catch(e){Gi.error("An error was encountered while trying to register the content store provider",e)}return qi}(e?.storefrontProvider);t&&(a||(a=t),n.push("store"),on("show-store",async()=>{await Ji()}),on("hide-store",async()=>{await async function(){return Gi.info("Hiding the store."),na.Storefront.hide()}()}))}if(os.dock){await dt("Dock");const t=await async function(e,t){if(!Si&&e){Ci=e,xi=t;const n=await Ri();yi.info("Dock register about to be called."),ki=await Ti(n),ki&&(Si=await na.Dock.register(ki),yi.info("Version:",Si),yi.info("Dock provider initialized"),_i=Y("theme-changed",async()=>Ni()),Ii=Y("apps-changed",async()=>Ni()),Ai=Y("condition-changed",async(e,t)=>{if(Pi.size>0){const e=t?.conditionId;(p(e)||Pi.has(e))&&await Ni()}}))}return Si}(e?.dockProvider,os);t&&(a||(a=t),n.push("dock"),on("show-dock",async()=>{await Bi()}),on("minimize-dock",async()=>{await async function(){return yi.info("Dock minimize called."),na.Dock.minimize()}()}))}p(a)||(Aa("workspacePlatformClient",a.clientAPIVersion),Aa("workspaceClient",a.clientAPIVersion),Aa("workspace",a.workspaceVersion)),os.notifications&&(await dt("Notifications"),o=await async function(e){if(!ho){co=e,so.info("Gathering notification center status and version."),so.info("Registering platform with Notification Center.");const t=await le();if(p(t)||p(t?.notificationProvider))so.warn("Unable to register notifications platform as we do not have it defined as part of settings");else{const{notificationClients:e,notificationsCustomManifest:n,...r}=t.notificationProvider;fo=r?.id??fin.me.identity.uuid,r.id=fo;try{const t=await Mr.register({notificationsPlatformOptions:r,notificationsCustomManifest:n});lo={workspaceVersion:t.notificationsVersion??"",clientAPIVersion:t.clientAPIVersion},so.info("Notifications registered and Versioning information collected.",lo),ho=!0,mo=e?.restrictToListed??!1,uo=e?.clientOptions??[],po={enforceIcon:!1,includeInPlatform:!0,...e?.defaults},mo&&(Array.isArray(uo)?0===uo.length&&(go=!1):(so.warn("You have specified that only listed clients should receive a notification client but the clientOptions setting is undefined. Please set to an empty array if you want no one to have clients or add the clients you wish to enable."),go=!1)),so.info("Registered notifications")}catch(e){so.error("We were unable to register with Notification Center",e)}}}return lo}(e?.notificationProvider),on("show-notifications",async()=>{await async function(){return so.info("Show Notifications called."),Mr.show(void 0)}()}),on("hide-notifications",async()=>{await async function(){return so.info("Hide Notifications called."),Mr.hide()}()})),ne("notifications",async()=>os?.notifications??!1,!1),p(o)||Aa("notificationCenter",o.workspaceVersion);const i=await Ta(),s=await Ea();if(as.info("Loaded with the following versions.",s),gi()){as.info("Analytics Provider enabled. Capturing versioning information.");const e={source:"WorkspacePlatform",type:"version",timestamp:new Date,data:s,action:"load"};await mi([e])}if(await dt("Versions"),as.info("Checking to see if version management is required."),await Ma(i))return await ls(),as.warn("Platform bootstrapping stopped as the current versioning required stopping."),!1;as.info("Checking to see if version monitoring is required."),await Ra(),!p(Vi)&&Object.keys(Vi).length>0&&(await dt("Low Code Integrations"),await async function(){if(zi.length>0){Ui.info(`Registering ${zi.length} low code integrations against Home`);for(const e of zi)try{Ui.info(`Initializing workflow search for low code integration ${e}.`),await(Vi[e]?.initializeWorkflow("search")),Ui.info(`Workflow search for low code integration ${e} initialized.`)}catch(t){Ui.error(`Error initializing low code integration with id: ${e}. It had the following error`,t)}zi.length=0}}(),!p(Vi)&&Object.values(Vi)?.length>0&&0===zi.length&&!n.includes("home")&&(n.push("home"),us())),as.info("Validating auto show list:",os.autoShow),os.autoShow=os.autoShow.filter(e=>n.includes(e)||"none"===e),as.info("Validated auto show list:",os.autoShow),0===os.autoShow.length&&n.length>0&&(as.info(`No auto show options specified but at least one Workspace Component is registered. Showing the first registered component: ${n[0]}`),os.autoShow=[n[0]]),await cs();let c=!0;Ur(async e=>{c&&os?.autoShow&&await cs()}),!p(e?.trayProvider)&&e?.trayProvider.enabled&&(await dt("Tray"),await async function(e){if(e?.enabled){wi.info("Initializing Tray");const t=await fin.Application.getCurrent();let n=e?.icon;if(!g(n)){const e=await t.getManifest();n=e.platform?.icon??"https://built-on-openfin.github.io/workspace-starter/dev/john/workspace-v21-patch/workspace-platform-starter/common/images/icon-blue.png"}await t.setTrayIcon(n);const r=e?.menuEntries,a=e?.defaultAction;p(a)&&p(r)?wi.warn("You have no default action or menu entries defined for the tray"):p(a)||p(r)?await t.addListener("tray-icon-clicked",async t=>{wi.info("Tray Clicked",t);const n=e?.activateButton??"any",o=t.button??0;if("any"===n||0===o&&"left"===n||2===o&&"right"===n){let n;if(p(a)){if(!p(r)){let a;try{const o={name:C(),includeInSnapshots:!1,showTaskbarIcon:!1,saveWindowState:!1,defaultWidth:0,defaultHeight:0,url:"about:blank",frame:!1,alwaysOnTop:!0,smallWindow:!0,opacity:0};a=await fin.Window.create(o),await a.focus();const i=e?.popupMenuStyle??$o(),s=await Do(void 0,r),c=await Uo({x:t.x-20,y:t.y-20},{uuid:fin.me.identity.uuid,name:o.name},"",s,{popupMenuStyle:i});c&&(n=c.action)}finally{a&&await a.close()}}}else n=a;!p(n)&&g(n.id)&&await Po(n.id,{callerType:u.CustomActionCallerType.CustomButton,x:t.x,y:t.y,windowIdentity:fin.me.identity,customData:n.customData})}}):wi.warn("You cannot define a default action and menu entries for the tray")}}(e?.trayProvider));const d=(0,u.getCurrentSync)();tr()&&(as.info("Setting up listeners for authentication events"),nr("logged-in",async e=>{await J(d,"auth-logged-in",{user:e}),c=!0}),nr("session-expired",async()=>{await J(d,"auth-session-expired"),c=!1}),nr("before-logged-out",async()=>{await J(d,"auth-before-logged-out")})),as.info("Setting up dispose handler.");const f=fin.Window.getCurrentSync();return await f.once("close-requested",async e=>{await ls(),await fin.Platform.getCurrentSync().quit()}),await Lr(e?.initOptionsProvider,t,"after-bootstrap"),await J(d,"after-bootstrap"),os.autostartApps&&await async function(){const e=await Gn({autostart:!0});if(Array.isArray(e)&&e.length>0){await dt("Auto Start Apps"),as.info(`Apps have been marked that they should autostart after the bootstrapping process and the platform has not set autostartApps to false in the bootstrapping options. ${e.length} app(s) will be launched.`);for(const t of e)setTimeout(async()=>{try{as.info(`Launching app: ${t.appId}`);const e=await Nt(t);as.info(`App: ${t.appId} launched with the following identifier`,e)}catch(e){as.error(`Error launching app: ${t.appId}.`,e)}},1e3)}}(),as.info("Finished the bootstrapping process."),!0}async function cs(){const e=os?.autoShow;if(Array.isArray(e))for(const t of e)"home"===t?await no():"store"===t?await Ji():"dock"===t&&await Bi()}async function ls(){is||(as.info("Deregister has been called."),await async function(){await async function(){for(const e in Ho){const t=Ho[e].integrations;t&&await Zo(t)}}()}(),os?.dock&&await async function(){if(Si)return _i&&Z(_i,"theme-changed"),_i=void 0,Ii&&Z(Ii,"apps-changed"),Ai=void 0,Ai&&Z(Ai,"condition-changed"),Ii=void 0,Si=void 0,Ci=void 0,yi.info("Dock deregister about to be called."),na.Dock.deregister();yi.warn("Unable to deregister dock as there is an indication it was never registered")}(),os?.store&&await async function(){qi?(Gi.info("About to deregister Store."),g(Ki)&&(Z(Ki,"favorite-changed"),Ki=void 0),Hi&&(await na.Storefront.deregister(Hi.id),qi=void 0)):Gi.warn("Unable to call store deregister as there is an indication it was never registered successfully.")}(),os?.home&&await async function(){Qa&&(Qa=void 0,Ya.info("About to call Home deregister."),Za&&(await na.Home.deregister(Za.id),Za=void 0)),Ya.warn("Unable to deregister home as there is an indication it was never registered")}(),os?.notifications&&await async function(){if(ho)if(ho=!1,p(co))so.warn("Unable to deregister platform notifications as we do not have notifications defined as part of settings");else{so.info("Deregister platform from notifications");try{await Mr.deregister(co.id)}catch(e){so.error("Unable to deregister platform from notifications.",e)}co=void 0}}(),as.info("Finished deregister."),is=!0)}function us(){on("show-home",async()=>{await no()}),on("hide-home",async()=>{await async function(){return Ya.info("Hide Home called."),na.Home.hide()}()})}let ds,ps=!1;async function fs(e,t,n,r=!1){if(ds=n,!await async function(){ie.info("Validating source of initial settings");const e=window.location.href.toLowerCase(),t=["platform/provider.html","provider.html","shell/shell.html","shell.html"].find(t=>e.endsWith(t));let n,r=[];p(t)||(n=e.replace(t,"manifest-hosts.json"),ie.info("Using hosts validation url:",n),r=await async function(e){const t=e;try{ie.info(`Getting valid hosts for initial settings from ${t}`);const e=await fetch(t);return await e.json()}catch{return ie.info(`Valid hosts endpoint (${t}) not provided.`),[]}}(n));const a=await fin.Application.getCurrent(),o=(await a.getInfo()).manifestUrl;ie.info(`Source of initial settings: ${o}`);let i=ue(location.href,r);p(i)&&(i=location.hostname,ie.info("Adding current host to the list of valid hosts:",i),r.push(i));const s=ue(o,r);return ie.info(`Checking manifest host: ${s} vs valid list: ${JSON.stringify(r)}`),s?ie.info("The source of the initial settings is valid"):ie.warn(`The source of the initial settings ${o} does not match any of the valid host names. Please update the list if required.`),!p(s)}())return ds.error("The application cannot startup as the source of the setting used to bootstrap this application is not from a valid host. Please update the the list or this logic if required"),!1;ds.info("Initializing Auth Check");const a=Qo();if(await async function(e,t){if(Zn=e,p(Zn))Yn.info("Unable to initialize authentication without settings. If this platform requires auth please ensure you have set the authProvider settings");else if(Xn)Yn.warn("The auth provider has already been initialized");else{Xn=!0;const e=await qo(Zn,"auth");e.length>0&&(e.length>1&&Yn.warn("You have more than one auth module enabled, only the first will be used"),await Yo(e[0],t),Qn=e[0].implementation,er=!0)}}(e,a),tr()){await dt("Authentication");const e=await or();if(r&&(nr("session-expired",gs),nr("logged-out",hs)),e)return new Promise((e,r)=>{const a=nr("logged-in",async()=>{var r;n.info("Platform logged in. Setting up platform"),ps=await t(),n.info("Unsubscribing from logged in events as platform has been initialized"),a&&(r=a,p(Qn)?Yn.warn("Please initialize auth before trying to use unsubscribe"):Qn.unsubscribe(r)),e(ps)});gs().then(e=>(n.info("Manage Auth Flow executed."),!0)).catch(e=>{r(e)})})}return t()}async function hs(){if(ps){ds?.info("Calling quit on platform");const e=fin.Platform.getCurrentSync();await e.quit()}else{ds?.info("Platform not yet initialized. Closing provider window");const e=fin.Window.wrapSync(fin.me.identity);await e.close(!0)}}async function gs(){ds?.info("Authentication required. Requesting login"),await rr()?ds?.info("Logged in"):(ds?.warn("User process was cancelled. At this point you should close the application so that the user can relaunch and try again. We are closing the platform"),await hs())}const ms=li("ContentCreation");let ws=[],ys=!1;async function vs(e){e.contentCreation??={rules:[]},e.contentCreation.rules??=[];for(const t of ws)if(t.implementation.getRules){const n=await t.implementation.getRules();e.contentCreation.rules.push(...n)}}async function bs(e,t){let n=-1;return e.implementation?.getRules&&!p(t.rule)&&(n=(await e.implementation.getRules()).findIndex(e=>e.behavior===t.rule.behavior&&JSON.stringify(e.match)===JSON.stringify(t.rule.match))),n}const ks=li("InteropProvider"),Ss=[];let Cs=[],Ps=!1;const xs=li("PlatformProvider"),_s=[];let Is=[],As=!1;const Es=li("Platform");async function Ts(){await dt("Platform");const e=await ce(),t=await fs(e?.authProvider,async()=>async function(e){await async function(e){Vo.info(`Initializing and listening for the after bootstrap lifecycle event and setting the passed sessionId: ${e}`),zo=e;const t=Y("after-bootstrap",async e=>{Go=!0,Z(t,"after-bootstrap")})}(C()),await dt("Init Options");const t=Qo();await Lr(e?.initOptionsProvider,t,"after-auth");const n=await le();await dt("Logger"),await async function(e,t){e&&(ci=await qo(e,"log"),await Jo(ci,t))}(n?.loggerProvider,t),Es.info("Initializing Core Services"),await dt("Endpoints"),await F(n?.endpointProvider,t),await dt("Versioning");const r=await fin.System.getVersion();await async function(e,t){p(e)?Ia.info("Version provider options not passed"):(ga=e,ha.app=e.appVersion,ma=e.minVersion,wa=e.maxVersion,ya=e.versionWindow,ba=e.endpointId,xa=!p(ya),v(e.versionCheckIntervalInSeconds)&&(Sa=e.versionCheckIntervalInSeconds),t&&(_a=!p(Sa)&&!p(e.endpointId)&&t.hasEndpoint(e.endpointId)),Ia.info("Initialized with the following settings",e)),va=t}(n?.versionProvider,a),Aa("runtime",r);try{Aa("rvm",(await fin.System.getRvmInfo()).version)}catch{Es.warn("RVM version information unavailable.")}Aa("platformClient","21.0.0"),await dt("Connections"),await async function(e){if(an)return;an=!0,nn=e;const t=nn?.connectionId;if(p(t))Xt.info("This platform is not configured to support a connectionProvider");else try{rn=await fin.InterApplicationBus.Channel.create(`${fin.me.identity.uuid}-${t}`),Xt.info("Configuring connection provider"),rn.onConnection(async(e,t)=>{Xt.info("Client connection request identity",JSON.stringify(e)),Xt.info("Client connection has request payload",!p(t));const n=await gn(e);let r=!1,a="This connection has failed the validation check and cannot connect to the requested application";if(p(n)||(r=!0,n.validatePayload&&(r=(await cn(e,t)).isValid),r&&(p(en[e.uuid])?(n.identity=e,en[e.uuid]=n,Xt.info(`The following connection has been added to the connected list: ${e.uuid}`)):(r=!1,a=`This platform can only accept one connection from an external connection. The uuid (${e.uuid}) is already registered.`))),!r)throw Xt.warn(`The following connection has not been added to the connected list: ${e.uuid} as it failed validation`),new Error(a)}),rn.onDisconnection(async e=>{Xt.info(`Client disconnected uuid: ${e.uuid}, name: ${e.name}`),await hn(e)}),rn.register("action",async(e,t)=>{Xt.info("Action received from client",t,e);const n=await async function(e,t){const n=t?.action;if(fn(e,t)){const t=tn[n];return Xt.info(`Executing action: ${n} on behalf of connection: ${e.uuid}`),await t(),!0}return Xt.info(`Not Executing action: ${n} on behalf of connection: ${e.uuid} as the action was either not provided or not listed in the supported ${Qt} definition.`),!1}(t,e);return{result:n}}),rn.register("canAction",async(e,t)=>(Xt.info("Check for action permission received from client",t,e),{result:fn(t,e)})),rn.register("disconnect",async(e,t)=>{Xt.info("Request for disconnection received from client",t,e),await hn(t)})}catch(e){Xt.error("There was an error trying to create the channel that will act as connection provider. This functionality will not be available",e)}}(n?.connectionProvider),await dt("Menus"),await async function(e,t,n){p(e)||(To=n,Eo=e,Oo=await qo(e,"menus"),await Jo(Oo,t))}(n?.menusProvider,t,n?.platformProvider?.rootUrl),await dt("Dialogs"),await async function(e){lr=e}(n?.dialogProvider),await dt("Analytics"),await async function(e,t){if(e){hi.info("Initializing with options",e),pi=await qo(e,"analytics");const{getAnalyticsClient:n,...r}=t;n&&hi.info("getAnalyticsClient is defined as part of helpers but not passed to analytics modules. This is to prevent an endless loop where an analytics module may be feeding events to itself."),await Jo(pi,r),fi=pi.length>0}}(n?.analyticsProvider,t),await dt("Apps"),await async function(e,t){if(zn)Wn.warn("The app service is already initialized");else if(e){if(zn=!0,await async function(e){Rn?En.warn("The app service is already initialized"):(Rn=!0,Tn=e)}(t),p(e?.appsSourceUrl)){if(Array.isArray(e?.endpointIds)){Wn.info("Using the following passed endpoints",e.endpointIds);for(const t of e.endpointIds)h(t)?t.startsWith("http")?On({id:C(),url:{path:t,credentials:e?.includeCredentialOnSourceRequest}}):On({id:C(),endpointId:t}):On({id:C(),map:t})}}else if(Wn.info("Using appsSourceUrl as it was specified. Backwards compatibility mode. Try to use the endpointIds setting instead and define some endpoints"),Array.isArray(e?.appsSourceUrl)){Wn.info("appsSourceUrl specified as an array of urls");const t=e?.appsSourceUrl||[];for(const n of t)On({id:C(),url:{path:n,credentials:e?.includeCredentialOnSourceRequest}})}else Wn.info("appsSourceUrl specified as a single url"),On({id:C(),url:{path:e?.appsSourceUrl,credentials:e?.includeCredentialOnSourceRequest}});if(m(e?.cacheDurationInSeconds)&&(Un+=1e3*e?.cacheDurationInSeconds),m(e?.cacheDurationInMinutes)&&(Un+=60*e?.cacheDurationInMinutes*1e3),Fn=e?.manifestTypes??[],Nn=e?.updatableLaunchPreference??[],jn=e?.cacheRetrievalStrategy??jn,Un>0&&"interval"===jn){let e=!1;window.setInterval(async()=>{if(!e){e=!0;try{await Jn()}finally{e=!1}}},Un)}}}(n?.appProvider,a),await dt("Conditions"),await async function(e,t){if(e){te=await qo(e,"conditions"),await Jo(te,t),Q.info("Getting conditions...");for(const e of te){const t=await e.implementation.get();for(const e in t)X[e]=t[e],Q.info(`Added condition: ${e}`)}Q.info("Finished getting conditions.")}}(n?.conditionsProvider,t),ne("authenticated",async()=>tr()&&!await or(),!1),ne("sharing",async()=>Qr(),!1),ne("themed",async()=>async function(){const e=await Ce();return 0===e.length||!("palette"in e[0])}(),!1),await dt("Lifecycles"),await async function(e,t){if(e){q.info("Initializing lifecycle provider"),H=await qo(e,"lifecycle"),await Jo(H,t);for(const e of H){const t=await e.implementation.get();for(const e in t){const n=e,r=t[n];r&&Y(n,r)}}}}(n?.lifecycleProvider,t);const s=n?.shareProvider??{};s.enabled??=!0,s.enabled&&(await dt("Sharing"),await Zr(s,t,n?.homeProvider?.icon)),!p(n?.favoriteProvider)&&(n?.favoriteProvider.enabled??1)&&(await dt("Favorites"),await Pr(n?.favoriteProvider,await Ea(),a)),Es.info("Initializing platform");const c={};var l;p(n?.browserProvider?.title)||(c.title=n?.browserProvider?.title),p(n?.browserProvider)||(c.defaultWindowOptions=await async function(e){if(p(e))return{};const t=e.defaultWindowOptions??{},n=e.windowOptions??{};let r=t.workspacePlatform;if(p(r)&&(r={pages:null}),r&&"platform"!==r.windowType){g(n.title)&&!g(r.title)&&(r.title=n.title),g(n.newPageUrl)&&!g(r?.newPageUrl)&&(r.newPageUrl=n.newPageUrl),g(n.newTabUrl)&&!g(r?.newTabUrl)&&(r.newTabUrl=n.newTabUrl),g(n?.icon)&&!g(t?.icon)&&(t.icon=n.icon),"platform"!==t?.workspacePlatform?.windowType&&g(t?.icon)&&!g(t?.workspacePlatform?.favicon)&&(r.favicon=t.icon);const e=await Me();p(e)||(r.toolbarOptions={buttons:e}),t.workspacePlatform=r}return t}(n?.browserProvider)),p(n?.browserProvider?.defaultPageOptions)||(c.defaultPageOptions=n?.browserProvider?.defaultPageOptions),p(n?.browserProvider?.defaultViewOptions)||(c.defaultViewOptions=n?.browserProvider?.defaultViewOptions),p(n?.browserProvider?.bringToFrontStrategy)||(l=n.browserProvider.bringToFrontStrategy,We=l);const d=await Co(n?.actionsProvider,t),f=await Ce();await async function(e){p(e)||(Ui.info("LowCodeIntegrationProvider initialized with options."),ji=e)}(n?.lowCodeIntegrationProvider);const w=await async function(){return p(Vi)&&await async function(){const e=ji?.modules??[];e.length>0&&Ui.info("Initializing defined and enabled Low Code Integrations.");for(const t of e)if(p(t.enabled)||t.enabled)if(p(Vi)&&(Vi={}),"ms365"===t.type)try{if(p(t.data))Ui.warn(`Unable to initialize Low Code Integration with id: ${t.id} as it did not have a configuration specified via it's data setting.`);else{const e=new na.Integrations.Microsoft365WorkflowIntegration(t.data);Vi[t.id]=e,Ui.info(`Initialized low code integration with id: ${t.id}`),t.data?.workflows?.search?.disableAutoInitialize&&(zi.push(t.id),Ui.info(`Low Code Integration with id: ${t.id} is not auto registered against home. Adding to the queue for later initialization.`))}}catch(e){Ui.error(`Error initializing Low Code Integration with id: ${t.id} and type: ${t.type}`,e)}else Ui.error(`Unable to add Low Code Integration definition with id: ${t.id} as the type: ${t.type} is unsupported.`)}(),p(Vi)?[]:Object.values(Vi)}();await vt(n?.snapProvider),ne("snap",async()=>bt(),!1),await async function(e,t){if(!p(e)&&(await dt("Content Creation Rules"),ms.info("Initializing"),ws=await qo(e,"contentCreation"),ws.length>0)){ys=!0,await Jo(ws,t);const e=(0,u.getCurrentSync)();await e.addListener("view-child-view-created",async t=>{let n=!1;for(const r of ws)if(r.implementation.handleViewCreated){const a=await bs(r,t);await r.implementation.handleViewCreated(e,t,a,n)&&(n=!0)}n||await e.createView(t.childOptions,t.target)}),await e.addListener("view-child-window-created",async t=>{for(const n of ws)if(n.implementation.handleWindowCreated){const r=await bs(n,t);await n.implementation.handleWindowCreated(e,t,r)}}),await e.addListener("view-child-content-opened-in-browser",async t=>{for(const n of ws)if(n.implementation.handleBrowserCreated){const r=await bs(n,t);await n.implementation.handleBrowserCreated(e,t,r)}}),await e.addListener("view-child-content-blocked",async t=>{for(const n of ws)if(n.implementation.handleBlocked){const r=await bs(n,t);await n.implementation.handleBlocked(e,t,r)}})}}(n?.contentCreationProvider,t),ys&&(c.defaultViewOptions=c.defaultViewOptions??{},await vs(c.defaultViewOptions),c.defaultWindowOptions=c.defaultWindowOptions??{},await vs(c.defaultWindowOptions));const y=await Ot(n?.browserProvider);await async function(e,t,n){if(e&&!Ps){const{modules:r,...a}=e?.interop??{},o=a;o.windowPositionOptions=t,o.platformRootUrl=e?.rootUrl,o.intentOptions={intentTimeout:15e3,...e?.interop?.intentOptions},o.intentResolver=o?.intentResolver??{fdc3InteropApi:"2.0",url:`${e.rootUrl}/common/windows/intents/instance-picker.html`,title:"Intent Resolver"},o.openOptions={openStrategy:"fdc3",...o?.openOptions};const i={...n,getApps:Gn};Array.isArray(r)&&(Cs=await qo(e.interop,"interopOverride"),await Jo(Cs,i)),ks.info("Getting interop overrides...");for(const e of Cs){const t=await e.implementation.getConstructorOverride(o);Ss.push(t),ks.info(`Added interopOverride module: ${e.definition.id}`)}ks.info("Finished setting up interop overrides."),Ps=!0}}(n?.platformProvider,y,t);const b=(0,u.getCurrentSync)();await b.once("platform-api-ready",async()=>{Es.info("Platform API Ready"),fin.me.interop=fin.Interop.connectSync(fin.me.uuid,{}),await Se(),Y("before-quit",async()=>{await async function(){qr&&(function(e){let t=!1;if(!p(Nr[e])){const n=Nr[e],r=Fr[n];delete Nr[e],r[e]&&(delete r[e],t=!0)}}(qr),qr=void 0)}()})}),await async function(e,t,n){if(e&&!As){const r=e?.modules,a={...n,getApps:Gn};Array.isArray(r)&&(Is=await qo(e,"platformOverride"),await Jo(Is,a)),xs.info("Getting platform overrides...");for(const n of Is){const r=await n.implementation.getConstructorOverride({platformProviderOptions:e,browserProviderOptions:t});_s.push(r),xs.info(`Added platformOverride module: ${n.definition.id}`)}xs.info("Finished setting up interop overrides."),As=!0}}(n?.platformProvider,n?.browserProvider??{},{...t,getApps:async()=>(Es.info("getApps: getting public apps for module."),Gn()),getAnalyticsClient:async()=>async function(){if(gi())return{handleAnalytics:async e=>{if(Array.isArray(e))return mi(e)}}}(),getSnapClient:async()=>i,fireLifecycleEvent:J,getMenuClient:async()=>({getPopupMenuStyle:$o,showPopupMenu:Uo,getGlobalMenu:Bo,getPageMenu:Wo,getViewMenu:Fo}),getButtonClient:async()=>o,getDockClient:async()=>({loadConfig:Wi,saveConfig:Fi}),getThemeClient:xe,getConnectionClient:async()=>async function(){return{...await dn(),decorateSnapshot:ln,applyClientSnapshot:un}}()});const k=function(){if(!Ps)throw new Error("Interop provider has not been initialized");return Ss}(),S=function(){if(!As)throw new Error("Platform provider has not been initialized");return _s}(),P=g(n?.platformProvider?.workspaceAsar?.alias)&&!1!==n?.platformProvider?.workspaceAsar?.enabled&&await ft()?n?.platformProvider?.workspaceAsar:void 0;return await(0,u.init)({browser:c,language:g(n?.platformProvider?.language?.initialLanguage)?{initialLanguage:n?.platformProvider?.language?.initialLanguage}:void 0,theme:f,notifications:n?.notificationProvider?.notificationsCustomManifest,customActions:d,interopOverride:k,overrideCallback:S,integrations:w,workspaceAsar:P,analytics:n?.analyticsProvider?.sendToOpenFin?{sendToOpenFin:!0}:void 0}),!0}(e),Es,!0);return t||Es.error("The platform cannot startup as there was a problem with the initialization of the auth flow."),t}async function Ms(){await async function(){const e=await fin.Application.getCurrent(),t=await e.getManifest();if(!0!==t?.platform?.preventQuitOnLastWindowClosed)return void console.warn("The manifest does not contain the platform.preventQuitOnLastWindowClosed flag set to true, the splash screen can not be shown without this flag set");const n=await ce();if(!n?.splashScreenProvider?.disabled){try{const e=n?.splashScreenProvider?.title??t.shortcut?.name??"OpenFin",r=n?.splashScreenProvider?.icon??t.platform?.icon??"../common/images/icon-blue.png";let a=n?.splashScreenProvider?.backgroundColor,o=n?.splashScreenProvider?.textColor,i=n?.splashScreenProvider?.borderColor;const s=g(a),c=g(o),l=g(i);if((!s||!c||!l)&&n?.themeProvider?.themes?.length){const e=n.themeProvider.themes[0];if("palettes"in e){const t=e.palettes[e.default??Object.keys(e.palettes)[0]];s||(a=t?.backgroundPrimary),c||(o=t?.textDefault),l||(i=t?.background4)}}const u=`platform-${ot}`;at=await fin.Window.create({name:u,url:n?.splashScreenProvider?.url??`${window.location.href.replace("provider.html","splash.html")}`,alwaysOnTop:!0,maximizable:!1,minimizable:!1,frame:!1,autoShow:!1,defaultCentered:!0,defaultWidth:n?.splashScreenProvider?.width??400,defaultHeight:n?.splashScreenProvider?.height??130,includeInSnapshots:!1,resizable:!1,saveWindowState:!1,showTaskbarIcon:!0,icon:n?.splashScreenProvider?.taskbarIcon??r,customData:{channelName:ot,style:{title:e,icon:r,backgroundColor:a,textColor:o,borderColor:i}}}),it=await fin.InterApplicationBus.Channel.create(ot),it.onConnection(e=>e.uuid===fin.me.identity.uuid&&e.name===u&&(st=e,!0))}catch(e){console.error("Unable to display splash screen",P(e))}at&&(await at.updateOptions({alwaysOnTop:!1}),await at.show())}}();try{return await new Promise((e,t)=>{const n=li("Provider");fin.Platform.getCurrentSync().once("platform-api-ready",()=>{n.info("Platform API Ready event received."),ss().then(t=>(n.info("Bootstrap return success:",t),n.info("Listener for Platform API Ready event setup."),e(t),t)).catch(t=>{n.error("Failed bootstrap execution for the following reason:",t),e(!1)})}).catch(async t=>{n.error("Listener for Platform API Ready event had a problem being setup:",t),e(!1)}),Ts().then(t=>(n.info("Platform Initialized with success:",t),t||e(t),t)).catch(e=>{n.error("Error encountered when trying to initiate platform:",e),t(e)})})}finally{await async function(){at&&(await at.close(),at=void 0)}()}}export{Ms as init};
//# sourceMappingURL=provider.bundle.js.map