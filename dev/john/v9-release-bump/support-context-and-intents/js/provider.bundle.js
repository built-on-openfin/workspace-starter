/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/workspace-platform/index.js":
/*!***************************************************************!*\
  !*** ../../node_modules/@openfin/workspace-platform/index.js ***!
  \***************************************************************/
/***/ ((module) => {

/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={525:e=>{var t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var i,s,c=o(e),d=1;d<arguments.length;d++){for(var p in i=Object(arguments[d]))a.call(i,p)&&(c[p]=i[p]);if(t){s=t(i);for(var l=0;l<s.length;l++)n.call(i,s[l])&&(c[s[l]]=i[s[l]])}}return c}},535:(e,t,a)=>{var n=a(525),o=60103,r=60106;var i=60109,s=60110,c=60112;var d=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var l=Symbol.for;o=l("react.element"),r=l("react.portal"),l("react.fragment"),l("react.strict_mode"),l("react.profiler"),i=l("react.provider"),s=l("react.context"),c=l("react.forward_ref"),l("react.suspense"),d=l("react.memo"),p=l("react.lazy")}var u="function"==typeof Symbol&&Symbol.iterator;function w(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function y(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||f}function h(){}function m(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(w(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=y.prototype;var v=m.prototype=new h;v.constructor=m,n(v,y.prototype),v.isPureReactComponent=!0;var S={current:null},P=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var n,r={},i=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)P.call(t,n)&&!b.hasOwnProperty(n)&&(r[n]=t[n]);var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];r.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===r[n]&&(r[n]=c[n]);return{$$typeof:o,type:e,key:i,ref:s,props:r,_owner:S.current}}function W(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var C=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case r:c=!0}}if(c)return i=i(c=e),e=""===n?"."+I(c,0):n,Array.isArray(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),A(i,t,a,"",(function(e){return e}))):null!=i&&(W(i)&&(i=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(c=0,n=""===n?".":n+":",Array.isArray(e))for(var d=0;d<e.length;d++){var p=n+I(s=e[d],d);c+=A(s,t,a,p,i)}else if(p=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=u&&e[u]||e["@@iterator"])?e:null}(e),"function"==typeof p)for(e=p.call(e),d=0;!(s=e.next()).done;)c+=A(s=s.value,t,a,p=n+I(s,d++),i);else if("object"===s)throw t=""+e,Error(w(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function M(e,t,a){if(null==e)return e;var n=[],o=0;return A(e,n,"","",(function(e){return t.call(a,e,o++)})),n}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function E(){var e=T.current;if(null===e)throw Error(w(321));return e}},378:(e,t,a)=>{a(535)}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{var e,t,o,r,i,s,c,d;a.r(n),a.d(n,{AppManifestType:()=>c,BrowserButtonType:()=>g,CustomActionCallerType:()=>h,GlobalContextMenuOptionType:()=>u,PageTabContextMenuOptionType:()=>w,SaveButtonContextMenuOptionType:()=>y,SaveModalType:()=>m,ViewTabMenuOptionType:()=>f,getCurrentSync:()=>Ft,init:()=>In,wrapSync:()=>Ut}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(e||(e={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(t||(t={})),function(e){e.Active="active",e.Default="default"}(o||(o={})),function(e){e.Suggestion="suggestion"}(r||(r={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(i||(i={})),function(e){e.MultiSelect="MultiSelect"}(s||(s={})),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(c||(c={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(d||(d={}));var p,l,u,w,f,g,y,h,m,v;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(p||(p={})),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(l||(l={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.OpenStorefront="OpenStorefront",e.Quit="Quit",e.Custom="Custom"}(u||(u={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.Custom="Custom"}(w||(w={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Custom="Custom"}(f||(f={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(g||(g={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(y||(y={})),function(e){e.CustomButton="CustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(h||(h={})),function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(m||(m={})),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(v||(v={}));const S="undefined"!=typeof window&&"undefined"!=typeof fin,P=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),b=P&&"undefined"!=typeof indexedDB,k=P?window.origin:v.Local,W=S&&fin.me.uuid,C=S&&fin.me.name,I=S&&fin.me.entityType,A=(v.Local,v.Dev,v.Staging,v.Prod,e=>e.startsWith("http://")||e.startsWith("https://")?e:k+e),M=(A("https://cdn.openfin.co/workspace/9.0.11"),A("https://cdn.openfin.co/workspace/9.0.11")),O=("undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&A(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&A(WORKSPACE_DOCS_CLIENT_URL),"26.102.71.7"),T="9.0.11";var E,B,x;!function(e){e.Workspace="openfin-browser"}(E||(E={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(B||(B={})),function(e){e.FinProtocol="fin-protocol"}(x||(x={}));const R={uuid:W},_=(E.Workspace,e=>{if(!S)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)}),L=()=>_(R);var V,D,U;!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(V||(V={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(D||(D={})),function(e){e.BeforeUnload="beforeunload"}(U||(U={}));function F(e){if(!S)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const G={name:C,uuid:W};function $(){return F(G)}V.Home,E.Workspace,V.Dock,E.Workspace;const N={name:V.Storefront,uuid:E.Workspace};E.Workspace,E.Workspace;async function j(e){const t=F(e);"minimized"===await t.getState()&&await t.restore(),await t.show(),await t.setAsForeground()}const H=e=>e.startsWith(V.BrowserWindow);async function q(){return(await fin.Application.getCurrentSync().getChildWindows()).filter((e=>H(e.identity.name)))}const K=e=>F(e).getOptions().then((()=>!0)).catch((()=>!1)),Q=()=>K(N);var z;!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(z||(z={}));const J=async(e,t)=>{const a={apiVersion:t.apiVersion||T,componentName:e,componentVersion:t.componentVersion||T,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:a})};a(378);const X=e=>fin.System.getSystemAppConfig(e);let Y;async function Z(){if(Y)return Y;if(!S)return{};const e=await async function(){if(S)try{let e=await X("workspace").catch((e=>{}));return e||(e=await X("home")),e}catch(e){}}(),t=await async function(){const{manifest:e,initialOptions:t}=await fin.Application.getCurrentSync().getInfo();return e?.workspace||e?.home||t?.workspace||t?.home,e?.workspace?e?.workspace:e?.home?e?.home:t?.workspace?t?.workspace:t?.home?t?.home:void 0}();return Y={...t,...e},Y}var ee;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition"}(ee||(ee={}));const te=ee,ae=(e,t)=>{localStorage.setItem(`${W}-${e}`,t)},ne=e=>localStorage.getItem(`${W}-${e}`);var oe;!function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.SharePage="sharePage",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetThemes="getThemes",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized"}(oe||(oe={}));const re=async e=>fin.Platform.wrapSync(e).getClient(),ie=async e=>{const t=await re(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if(!0!==n?.isWorkspacePlatform)throw new Error(a);return n},se=async e=>(await ie(e),re(e)),ce=async e=>{if(!0!==(await ie(e))?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return re(e)},de=(e,t)=>!t.find((t=>t===e)),pe=(e,t)=>`${e} (${t})`,le=(e,t)=>{let a=1;const n=e.replace(/ \(.+\)$/,"");for(;!de(pe(n,a),t);)a+=1;return pe(n,a)};async function ue(e){try{const t=Ft();await t.applySnapshot(e.snapshot,{closeExistingWindows:!0}),we(e)}catch(e){}}function we(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);ae(te.CurrentWorkspaceId,t)}catch(e){}}async function fe(){if("undefined"==typeof localStorage)return;const e=Ft(),t=await e.getSnapshot();return{workspaceId:crypto.randomUUID(),title:await he(),metadata:{APIVersion:T},snapshot:t}}async function ge(){if("undefined"==typeof localStorage)return;const e=ne(te.CurrentWorkspaceId);if(!e)return fe();const t=JSON.parse(e),a=Ft(),n=await a.getSnapshot();return{...t,metadata:{APIVersion:T},snapshot:n}}const ye=async e=>await(async e=>(await se(G)).dispatch(oe.GetSavedWorkspace,e))(e.workspaceId)?(async e=>(await se(G)).dispatch(oe.UpdateSavedWorkspace,e))({workspaceId:e.workspaceId,workspace:e}):(async e=>(await se(G)).dispatch(oe.CreateSavedWorkspace,e))({workspace:e});async function he(e="Untitled Workspace"){const t=(await(async()=>(await se(G)).dispatch(oe.GetSavedWorkspaces,void 0))()).map((({title:e})=>e));return t.find((t=>t===e))?le(e,t):e}async function me(){if("undefined"!=typeof localStorage)try{const e=ne(te.LastFocusedBrowserWindow);if(!e)return;const t=JSON.parse(e);if(await K(t))return t}catch(e){throw new Error(`failed to get last focused browser window: ${e}`)}}function ve(e=fin.me.identity){H(e.name)&&function(e){if("undefined"!=typeof localStorage)try{const t=JSON.stringify(e);ae(te.LastFocusedBrowserWindow,t)}catch(e){}}(e)}const Se=(e,t=0)=>{let a,n,o=!1;const r=async n=>{const i=await e(...n);if(o){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,o=!1,r(e)}return i};return(...e)=>(n?(o=!0,a=e):n=r(e).catch((e=>{throw e})).finally((()=>{n=void 0})),n)};var Pe;!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(Pe||(Pe={}));const be=(e,t)=>e.content?{...e,content:e.content.map((e=>be(e,t)))}:{...e,componentState:t(e.componentState)},ke=e=>({...e,name:e.name?e.name:crypto.randomUUID()}),We=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=We(e.content);t.push(...a)})),t},Ce=async(e,t,a=G)=>{let n;if(H(a.name)){n=(await F(a).getOptions()).layout||{settings:{}}}return{...n,content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{title:e,url:t}}]}]}};new Map;function Ie(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function Ae(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function Me(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),o=(...e)=>{a(...e),n.delete(o)};n.add(o)}}function Oe(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}const Te=P&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function Ee(e){let t;return()=>{if(!S)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await Te;const a={clientAPIVersion:T},n=await fin.InterApplicationBus.Channel.connect(e,{payload:a});return n.onDisconnection((async()=>{t=void 0})),n})().then((e=>e)).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}const Be=e=>`__browser_window__-${e.uuid}-${e.name}`,xe=new Map,Re=e=>{const t=Be(e);return xe.has(t)||xe.set(t,Ee(t)),xe.get(t)()};var _e,Le;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page"}(_e||(_e={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(Le||(Le={}));const Ve={..._e,...Le};var De;!function(e){e.AttachedPagesToWindow="attached-pages-to-window",e.DetachedPagesFromWindow="detached-pages-from-window"}(De||(De={}));new Map;const Ue=async e=>{const t=await Re(e);return await t.dispatch(Ve.GetPages)},Fe=async e=>(await Re(e.identity)).dispatch(Ve.UpdatePageForWindow,e),Ge=async()=>{const e=await q();return(await Promise.all(e.map((async({identity:e})=>Ue(e))))).reduce(((e,t)=>e.concat(t)),[])},$e=async()=>(await se(G)).dispatch(oe.GetSavedPages,void 0),Ne=async e=>(await se(G)).dispatch(oe.GetSavedPage,e),je=async(e,t)=>{const a=await(async e=>(await Ge()).find((t=>t.pageId===e)))(e);return!a||a.title===t.title&&e===t.pageId||await Fe({identity:a.parentIdentity,pageId:e,page:{pageId:t.pageId,title:t.title}}),a},He=async({page:e})=>{await je(e.pageId,e),await(async e=>(await se(G)).dispatch(oe.CreateSavedPage,e))({page:e})},qe=async e=>{await Ne(e)&&await(async e=>(await se(G)).dispatch(oe.DeleteSavedPage,e))(e)},Ke=async({pageId:e,page:t})=>{await je(e,t);return await(async e=>(await se(G)).dispatch(oe.UpdateSavedPage,e))({pageId:e,page:t})},Qe=async e=>await Ne(e.pageId)?Ke({pageId:e.pageId,page:e}):He({page:e}),ze=async e=>{await(async e=>(await Re(e.identity)).dispatch(Ve.AttachPagesToWindow,e))(e)},Je=async e=>{await Fe(e)},Xe=async e=>{await(async e=>(await Re(e.identity)).dispatch(Ve.DetachPagesFromWindow,e))(e)},Ye=async e=>{await(async e=>(await Re(e.identity)).dispatch(Ve.SetActivePageForWindow,e))(e)},Ze=e=>Ue(e),et=async({identity:e,pageId:t})=>(await Ze(e)).find((e=>e.pageId===t)),tt=async e=>{await(async e=>(await Re(e.identity)).dispatch(Ve.ReorderPagesForWindow,e))(e)};async function at(e="Untitled Page"){const[t,a]=await Promise.all([$e(),Ge()]),n=[...t,...a].map((({title:e})=>e));return n.find((t=>t===e))?le(e,n):e}const nt=new Map,ot=e=>`${e.uuid}-${e.name}`;const rt=Se((async function(){let e=[];try{e=await Ge()}catch(e){return void nt.forEach(((e,t)=>{clearTimeout(e),nt.delete(t)}))}const t=new Set;e.forEach((e=>{We(e.layout.content).forEach((e=>{if(e.name){const a=ot(e);t.add(a)}}))}));const a=$();(await a.getCurrentViews()).forEach((({identity:e})=>{const a=ot(e);if(t.has(a)||nt.has(a))return;const n=setTimeout((()=>{fin.View.wrapSync(e).destroy(),nt.delete(a)}),5e3);nt.set(a,n)})),nt.forEach(((e,a)=>{t.has(a)&&(clearTimeout(e),nt.delete(a))}))}),2500),it=({name:e})=>{e&&H(e)&&rt().catch((()=>{}))};let st={};const ct=({actionId:e,payload:t})=>{if("function"!=typeof st[e])throw new Error(`Cannot find a configured function for the action '${e}'`);return st[e](t)};function dt(){return localStorage.getItem(te.MachineName)}let pt;async function lt(){return pt||(pt=await fin.System.getMachineId()),pt}const ut=e=>{if(e.layout&&Array.isArray(e.workspacePlatform?.pages)){const t=e.workspacePlatform.pages.find((e=>e.isActive));if(t)if(t.isLocked){const a=((e,t)=>{const a=We(t.content);return{...be(e,(e=>{const t=a.find((t=>t.name===e.name&&t.uuid===e.uuid)),n=t?t.isClosable:e.isClosable;return{...e,isClosable:n}})),settings:t.settings}})(e.layout,t.layout);t.layout=a,e.layout=a}else t.layout=e.layout}return e};async function wt(e){const t=e||await fin.Platform.getCurrentSync().getSnapshot();if(t.snapshotDetails?.machineId)return t;const a=dt();return{...t,snapshotDetails:{...e.snapshotDetails,machineId:await lt(),machineName:a}}}function ft(e){return new Promise(((t,a)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>a(e.error)}))}function gt(e,t){const a=indexedDB.open(e);a.onupgradeneeded=()=>a.result.createObjectStore(t);const n=ft(a);return(e,a)=>n.then((n=>a(n.transaction(t,e).objectStore(t))))}let yt;function ht(){return yt||(yt=gt("keyval-store","keyval")),yt}function mt(e,t=ht()){return t("readonly",(t=>ft(t.get(e))))}function vt(e,t,a=ht()){return a("readwrite",(a=>(a.put(t,e),ft(a.transaction))))}function St(e,t=ht()){return t("readwrite",(t=>(t.delete(e),ft(t.transaction))))}function Pt(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ft(e.transaction)}function bt(e=ht()){return e("readonly",(e=>{if(e.getAllKeys)return ft(e.getAllKeys());const t=[];return Pt(e,(e=>t.push(e.key))).then((()=>t))}))}const kt=(e,t="")=>e.toLowerCase().includes(t.toLowerCase()),Wt=b&&gt("openfin-home-pages","pages");async function Ct(e){const t=await mt(e,Wt);return t?(t.pageId=e.toString(),t.title=t.title||t.pageId,t):null}async function It(e){const t=await bt(Wt),a=await Promise.all(t.map((e=>Ct(e.toString()))));return e?a.filter((t=>kt(t.title,e))):a}async function At({page:e}){await vt(e.pageId,e,Wt)}async function Mt(e){await St(e,Wt)}async function Ot({pageId:e,page:t}){if(void 0===await Ct(e))throw new Error("page not found");await At({page:t}),e!==t.pageId&&await Mt(e)}var Tt;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(Tt||(Tt={}));const Et={type:Tt.Separator,data:void 0};var Bt;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(Bt||(Bt={}));Ee("__of_workspace_protocol__");const xt=async(e,t)=>{const a=await(async e=>({...e,layoutDetails:{machineId:await lt(),machineName:dt()}}))(t);return{pageId:crypto.randomUUID(),title:e,layout:a,isReadOnly:!1,hasUnsavedChanges:!0}},Rt=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),getPages:async()=>(await ce(e)).dispatch(oe.GetPagesForWindow,e),getPage:async t=>(await ce(e)).dispatch(oe.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>{const a=await ce(e);t?.title||(t.title=await a.dispatch(oe.GetUniquePageTitle,void 0));const n=(await a.dispatch(oe.GetAllAttachedPages,void 0)).find((e=>e.pageId===t.pageId||e.title===t.title));if(n)throw n.pageId===t.pageId?new Error(`page with id ${t.pageId} is already attached to a browser window ${n.parentIdentity.name}`):new Error(`page with title ${t.title} is already attached to a browser window ${n.parentIdentity.name}`);const o={identity:e,pages:[t]};return a.dispatch(oe.AttachPagesToWindow,o)},removePage:async t=>(await ce(e)).dispatch(oe.DetachPagesFromWindow,{identity:e,pageIds:[t]}),setActivePage:async t=>(await ce(e)).dispatch(oe.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await ce(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await ce(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},_openViewTabContextMenu:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await ce(e);return(await Re(e)).dispatch(Ve.OpenSaveModalInternal,t)},_openSaveButtonContextMenu:async t=>{const a=await ce(e);return t.identity=e,a.dispatch(oe.OpenSaveButtonContextMenuInternal,t)}});let _t=!1;const Lt=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>Rt(e),createWindow:async a=>{await ce(e),_t||(_t=!0,(async e=>{J(z.Browser,e)})({allowed:!0}));const n=await t.createWindow(a);return Rt(n.identity)},getAllAttachedPages:async()=>(await ce(e)).dispatch(oe.GetAllAttachedPages,void 0),getAllWindows:async()=>{await ce(e);return(await fin.Application.wrapSync(e).getChildWindows()).filter((e=>e.identity.name.includes("internal-generated-window-"))).map((e=>Rt(e.identity)))},getUniquePageTitle:async t=>(await ce(e)).dispatch(oe.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await ce(e)).dispatch(oe.GetLastFocusedBrowserWindow,void 0)}},Vt=e=>({createPage:async t=>(await ce(e)).dispatch(oe.CreateSavedPageInternal,t),deletePage:async t=>(await ce(e)).dispatch(oe.DeleteSavedPageInternal,t),updatePage:async t=>(await ce(e)).dispatch(oe.UpdateSavedPageInternal,t),getPage:async t=>(await ce(e)).dispatch(oe.GetSavedPage,t),getPages:async t=>(await ce(e)).dispatch(oe.GetSavedPages,t),savePage:async t=>(await ce(e)).dispatch(oe.SavePage,t),createWorkspace:async t=>(await se(e)).dispatch(oe.CreateSavedWorkspace,t),deleteWorkspace:async t=>(await se(e)).dispatch(oe.DeleteSavedWorkspace,t),updateWorkspace:async t=>(await se(e)).dispatch(oe.UpdateSavedWorkspace,t),getWorkspace:async t=>(await se(e)).dispatch(oe.GetSavedWorkspace,t),getWorkspaces:async t=>(await se(e)).dispatch(oe.GetSavedWorkspaces,t),saveWorkspace:async t=>(await se(e)).dispatch(oe.SaveWorkspace,t)}),Dt=e=>({getThemes:async()=>(await se(e)).dispatch(oe.GetThemes,void 0)}),Ut=e=>{const t=fin.Platform.wrapSync(e);return Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),launchApp:async t=>{t.target||(t.target={uuid:W,name:C,entityType:I||"unknown"});return(await se(e)).dispatch(oe.LaunchApp,t)},_invokeCustomAction:async(t,a)=>{const n=await se(e),o={actionId:t,payload:{...a,callerType:a.callerType||h.API}};return n.dispatch(oe.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await se(e)).dispatch(oe.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await se(e)).dispatch(oe.GetCurrentWorkspace,void 0),applyWorkspace:async t=>(await se(e)).dispatch(oe.ApplyWorkspace,t),setActiveWorkspace:async t=>(await se(e)).dispatch(oe.SetActiveWorkspace,t),Theme:Dt(e),Browser:Lt(e),Storage:Vt(e)})},Ft=()=>Ut(fin.me.identity),Gt=async(e=G)=>{const{workspacePlatform:t}=await F(e).getOptions(),a=t?.newPageUrl,n=t?.newTabUrl;return{newPageUrl:a,newTabUrl:n}},$t=async(e=G)=>{const t=await Ft().Browser.getUniquePageTitle("Untitled Page"),a=await(async(e=G)=>{const{newPageUrl:t}=await Gt(e);if(!t)throw new Error("Trying to create a new page without a newPageUrl set");return Ce("New Tab",t,e)})(e);return xt(t,a)},Nt={type:Tt.Label,label:"Close Window",data:{type:u.CloseWindow}},jt={type:Tt.Label,label:"Open Storefront",data:{type:u.OpenStorefront}},Ht={type:Tt.Label,label:"Quit Platform",data:{type:u.Quit}},qt={type:Tt.Label,label:"New Window",data:{type:u.NewWindow}},Kt={type:Tt.Label,label:"Save Page",data:{type:u.SavePage}},Qt={type:Tt.Label,label:"Save Page As...",data:{type:u.SavePageAs}},zt={type:Tt.Label,label:"Restore to Last Saved Changes",data:{type:u.RestoreChanges}},Jt={type:Tt.Label,label:"Save Workspace",data:{type:u.SaveWorkspace}},Xt={type:Tt.Label,label:"Save Workspace As...",data:{type:u.SaveWorkspaceAs}},Yt={type:Tt.Label,label:"Rename Workspace",data:{type:u.RenameWorkspace}},Zt="Switch Workspace",ea="Delete Workspace",ta=[Nt,Et,jt,Et,Ht],aa=[Et,Nt,Et,Ht],na=(e,t,a)=>t.map((t=>{const n=t.workspaceId===e.workspaceId;return{label:t.title,type:Tt.Checkbox,enabled:!n,checked:n,data:{type:a,workspaceId:t.workspaceId}}})),oa=async e=>{const t=await Q(),{newPageUrl:a}=await Gt(e),n=await(async e=>{const t=F(e),{workspacePlatform:a}=await t.getOptions();return a?.disableMultiplePages})(e),o=await(async e=>{const t=F(e),{workspacePlatform:a}=await t.getOptions();return a?.isLocked})(e),r=[];var i;a&&(r.push(qt),n||r.push((i=!o,{type:Tt.Label,label:"New Page",data:{type:u.NewPage},enabled:i}))),r.push(Et);const s=Ft(),c=await s.getCurrentWorkspace(),d=await s.Storage.getWorkspaces(),p=d.find((e=>e.workspaceId===c.workspaceId));return p?r.push(zt):r.push({label:zt.label,enabled:!1}),r.push(Jt,Xt),p?r.push(Yt):r.push({label:Yt.label,enabled:!1}),d.some((e=>e.workspaceId!==c.workspaceId))?r.push({label:Zt,submenu:na(c,d,u.SwitchWorkspace)},{label:ea,submenu:na(c,d,u.DeleteWorkspace)}):r.push({label:Zt,enabled:!1},{label:ea,enabled:!1}),r.push(Et,Kt,Qt),t?[...r,...ta]:[...r,...aa]};let ra="Platform";const ia=async()=>ra;var sa,ca,da;!function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.BrowserPagesLanding="/browser/pages/landing/",e.HomeIndicator="/home/indicator/",e.Browser="/browser/",e.BrowserPopupMenu="/browser/popup-menu/",e.Provider="/provider/",e.BrowserPopupMenuSharePage="/browser/popup-menu/share-page/",e.BrowserPopupMenuSaveModal="/browser/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/browser/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/browser/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/browser/indicator/",e.ResponseModal="/browser/popup-menu/response-modal/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/"}(sa||(sa={})),function(e){e.IconOpenFinLogo="/icons/openfinlogo.svg",e.IconFilter="/icons/filter.svg"}(ca||(ca={})),function(e){e.Search="search"}(da||(da={}));const pa={...ca,...sa};var la;!function(e){e.Home="/home",e.Browser="/browser",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(la||(la={}));const ua="/workspace/9.0.11";function wa(){return ua.substring(0,ua.length-"".length)}function fa(e){if(!P)throw new Error("getAbsoluteRoutePath can only be used in a window");return function(){if(!window)throw new Error("getAbsoluteBasePath can only be used in a window");return`${window.origin}${wa()}`}()+e}const ga={name:V.BrowserMenu,alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,backgroundColor:"#2f3136",smallWindow:!0,showTaskbarIcon:!1,backgroundThrottling:!0};function ya(e){const t={...ga,...e};return t.url=function(e){if(!P)throw new Error("resolveAbsolutePath can only be used in a window");return e.startsWith("http")?e:`${window.origin}${e}`}(t.url),t}var ha,ma;!function(e){e.Update="update",e.Response="response"}(ha||(ha={})),function(e){e.Canceled="canceled",e.Negative="negative",e.Affirmative="affirmative"}(ma||(ma={}));const va=function(e){const t=new Map;return{emit:Ie(t,(t=>S&&fin.InterApplicationBus.publish(e,t))),addListener:Ae(t,(t=>S&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),removeListener:Oe(t),once:Me(t)}}("window.menu"),Sa=e=>va.emit(ha.Response,e),Pa=Se((()=>L().getChildWindows()),500);const ba=new Map;async function ka({options:e,parameters:t},a){const n=ya(e),{name:o}=n;let r=await async function(e){return(await Pa()).find((t=>t.identity.name===e))}(o);return r||(r=await async function(e){const t=ya(e);if(!ba.has(t.name)){const e=(async()=>{const e=await fin.Platform.getCurrentSync().createWindow(t);return e.once("closed",(()=>{ba.delete(t.name)})),e})();ba.set(t.name,e)}return ba.get(t.name)}(n)),await async function(e,t){const a=ya(e),{top:n,left:o,defaultWidth:r,defaultHeight:i}=a,s={top:n,left:o,width:r,height:i},c={parentName:fin.Window.getCurrentSync().identity.name};for(const[e,a]of Object.entries(c))t.set(e,a);const d=t.toString(),p=`${a.url}?${d}`;va.emit(ha.Update,a.name,s,p),await Sa({name:a.name,data:ma.Canceled})}(e,t||new URLSearchParams),a&&r.center(),r}const Wa=async(e,t,a)=>{const n=t?F(t):$();if(!a){await(async(e=fin.me.identity)=>{const t=F(e),a=await t.getBounds();(a.right>screen.availLeft+screen.width||a.left<screen.availLeft||a.bottom>screen.availTop+screen.height||a.top<screen.availTop)&&await t.center()})(n.identity);const t=(e=>({left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}))(await n.getBounds()),{defaultHeight:a,defaultWidth:o}=e;return((e,t)=>{const{height:a,width:n}=t,o=n/2,r=a/2;return{left:e.left-o,top:e.top-r}})(t,{height:a,width:o})}return await n.getBounds()},Ca=async({options:e,content:t},a)=>{const n=new URLSearchParams({...t});return await ka({options:e,parameters:n},a),new Promise((t=>{va.once(ha.Response,(a=>{a.name===e.name&&t(a)}))}))},Ia=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>({title:"Switch Workspace",windowOptions:{url:M+pa.ResponseModal,name:V.BrowserMenu,defaultHeight:112,defaultWidth:424,modalParentIdentity:e},content:{title:`Are you sure you want to switch to ${t}`,body:"Any unsaved changes will be discarded",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e,t),o=await Wa(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return(await Ca({options:r,content:n})).data===ma.Affirmative},Aa=async(e,t)=>{const{windowOptions:a,content:n}=await(async(e,t)=>({title:"Delete Workspace",windowOptions:{url:M+pa.ResponseModal,name:V.BrowserMenu,defaultHeight:144,defaultWidth:372,modalParentIdentity:e},content:{title:"Are you sure you want to permanently delete this workspace?",body:`${t}`,affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e,t),o=await Wa(a,a.modalParentIdentity),r={...a,top:o.top,left:o.left};return(await Ca({options:r,content:n})).data===ma.Affirmative},Ma=async(e,t,a)=>{const n=a?void 0:e,{windowOptions:o,content:r}=await(async(e,t)=>({title:"Platform Quit",windowOptions:{url:M+pa.ResponseModal,name:V.BrowserMenu,defaultHeight:134,defaultWidth:474,modalParentIdentity:t},content:{title:`Close the ${"Platform"===e?"platform":`${e} Platform`}?`,body:"Closing a platform will close any workspaces, apps or any processes that are running.",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(t,n),i=await Wa(o,o.modalParentIdentity),s={...o,top:i.top,left:i.left};return(await Ca({options:s,content:r},a)).data===ma.Affirmative},Oa=async e=>{const{windowOptions:t,content:a}=await(async e=>({title:"Restore Changes",windowOptions:{url:M+pa.ResponseModal,name:V.BrowserMenu,defaultHeight:112,defaultWidth:424,modalParentIdentity:e},content:{title:"Are you sure you want to restore to last saved changes?",body:"Any unsaved changes will be discarded",affirmativeButton:"Confirm",negativeButton:"Cancel"}}))(e),n=await Wa(t,t.modalParentIdentity),o={...t,top:n.top,left:n.left};return(await Ca({options:o,content:a})).data===ma.Affirmative};var Ta;!function(e){e.ERROR="error",e.SUCCESS="success",e.INFO="info"}(Ta||(Ta={}));const Ea={alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1};var Ba;!function(e){e.Locked="LockClosedIcon",e.Unlocked="LockOpen1Icon"}(Ba||(Ba={}));const xa=function(e=Ea){const t=new Map;return async(a,n,o,r)=>{if(t.has(a)){const{currentUrl:e,currentName:o}=t.get(a);if(e===n)return;const r=fin.Window.wrapSync({uuid:fin.me.uuid,name:o});await r.close()}const i=`${V.HomeInternal}-${Date.now()}${Math.random()}`;t.set(a,{currentUrl:n,currentName:i});const s=await fin.Platform.getCurrentSync().createWindow({...e,name:i,url:n});((e,t)=>{const a=document.createElement("div");a.setAttribute("aria-live",t||"polite"),(e=>{e.style.position="absolute",e.style.width="1px",e.style.height="1px",e.style.padding="0",e.style.margin="-1px",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.border="0"})(a),document.body.appendChild(a),setTimeout((()=>{a.innerHTML=e}),100),setTimeout((()=>{document.body.removeChild(a)}),1e3)})(`New ${r} indicator: ${o}`),s.once("closed",(()=>{t.delete(a)}))}}();async function Ra(e,t,a,n){const o=new URLSearchParams;o.append("type",e),o.append("message",t),o.append("parentName",a||""),o.append("icon",n||"");const r=`${fa(pa.BrowserIndicator)}?${o.toString()}`;return xa("browser"+a,r,t,e)}function _a(e,t,a){return Ra(Ta.SUCCESS,e,t,a)}const La=async e=>{const t=Ft(),a=await t.getCurrentWorkspace(),n=await t.Storage.getWorkspaces(),o=a.workspaceId;if(n.some((e=>e.workspaceId===o)))t.Storage.saveWorkspace(a),t.setActiveWorkspace(a),_a("Workspace Saved",e.name);else{t.Browser.wrapSync(e)._openSaveModal({menuType:m.SAVE_WORKSPACE})}},Va=e=>{Ft().Browser.wrapSync(e)._openSaveModal({menuType:m.SAVE_WORKSPACE_AS})},Da=async(e,t)=>{const a=Ft().Browser.wrapSync(e),n=await Ft().Storage.getPages(),o=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive)),r=n.some((e=>o.pageId===e.pageId));if(r)try{await Ft().Storage.savePage((d=o,{...d,hasUnsavedChanges:void 0,parentIdentity:void 0,isActive:void 0})),await a.updatePage({pageId:o.pageId,page:{hasUnsavedChanges:!1}}),_a("Page saved",o.parentIdentity.name)}catch{i="Page failed to save",s=o.parentIdentity.name,Ra(Ta.ERROR,i,s,c)}else a._openSaveModal({id:o.pageId,menuType:m.SAVE_PAGE});var i,s,c,d},Ua=async(e,t)=>{const a=Ft().Browser.wrapSync(e),n=(await a.getPages()).find((e=>t?e.pageId===t:e.isActive));a._openSaveModal({id:n.pageId,menuType:m.SAVE_PAGE_AS})},Fa=async(e,t)=>{if(!e)return;const a=t.identity,n=await Re(a),o=Ft().Browser.wrapSync(t.identity);switch(e.type){case u.NewWindow:const{newPageUrl:t}=await Gt(a);if(!t)throw new Error("Trying to create a new empty window without a newPageUrl set");Ft().createView({target:void 0,url:t});break;case u.NewPage:await(async e=>{const t=Ft().Browser.wrapSync(e),a=await $t(e);await t.addPage(a),await t.setActivePage(a.pageId)})(a);break;case u.CloseWindow:n.dispatch(Ve.CloseBrowserWindow);break;case u.SaveWorkspace:await La(a);break;case u.SavePage:await Da(a);break;case u.SavePageAs:await Ua(a);break;case u.SaveWorkspaceAs:await Va(a);break;case u.RenameWorkspace:o._openSaveModal({menuType:m.RENAME_WORKSPACE});break;case u.SwitchWorkspace:await(async(e,t)=>{const a=Ft(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n&&await Ia(e,n.title)&&(await a.applyWorkspace(n),_a("Workspace Switched!",null))})(a,e);break;case u.DeleteWorkspace:await(async(e,t)=>{const a=Ft(),n=(await a.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId));n&&await Aa(e,n.title)&&(await a.Storage.deleteWorkspace(t.workspaceId),_a("Workspace Deleted!",e.name))})(a,e);break;case u.Quit:const r=await ia();await Ma(a,r)&&fin.Platform.getCurrentSync().quit();break;case u.OpenStorefront:(async()=>{await Q()&&j(N)})();break;case u.RestoreChanges:const i=await async function(){const e=Ft(),t=await e.getCurrentWorkspace();return(await e.Storage.getWorkspaces()).find((e=>e.workspaceId===t.workspaceId))}();await Oa(a)&&await ue(i);break;case u.Custom:if(e.action){const t={callerType:h.GlobalContextMenu,windowIdentity:a,customData:e.action.customData};Ft()._invokeCustomAction(e.action.id,t)}}},Ga=async(e,t)=>{const a=await Re(t.identity),n=Ft();switch(e?.type){case w.Save:await Da(t.identity,t.pageId);break;case w.SaveAs:await Ua(t.identity,t.pageId);break;case w.Rename:await n.Browser.wrapSync(t.identity)._openSaveModal({menuType:m.RENAME_PAGE,id:t.pageId});break;case w.Duplicate:a.dispatch(Ve.DuplicatePage,t.pageId);break;case w.Close:a.dispatch(Ve.ClosePage,t.pageId);break;case w.Custom:if(e.action){const a={callerType:h.PageTabContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Ft()._invokeCustomAction(e.action.id,a)}}},$a=async(e,t)=>{if(e?.type){const a=t.identity;switch(e.type){case y.SavePage:await Da(a);break;case y.SaveWorkspace:await La(a);break;case y.SavePageAs:await Ua(a);break;case y.SaveWorkspaceAs:await Va(a);break;case y.Custom:if(e.action){const a={callerType:h.SaveButtonContextMenu,windowIdentity:t.identity,pageId:t.pageId,customData:e.action.customData};Ft()._invokeCustomAction(e.action.id,a)}}}},Na=async(e,t)=>{const a=t.selectedViews[0],n=fin.View.wrapSync(a),o=await(async e=>{const{newTabUrl:t}=await Gt(e);if(!t)throw new Error("Trying to create a new page without a newTabUrl set");return{...Ce("New View",t),url:t,target:e}})(e);await Ft().createView(o,e,n.identity)},ja=async(e,t)=>{const a=await(e=>Promise.all(e.map((async e=>fin.View.wrapSync(e).getInfo()))))(t),{newPageUrl:n,newTabUrl:o}=await Gt(e);a.forEach((async e=>{e.url!==n&&e.url!==o&&await fin.System.openUrlWithBrowser(e.url)}))},Ha=(e,t)=>{t.forEach((async t=>{const a=fin.View.wrapSync(t);await(async(e,t)=>{const{url:a}=await t.getInfo(),n={...await t.getOptions(),url:a,target:e,name:void 0};await Ft().createView(n,e,t.identity)})(e,a)}))},qa=async(e,t)=>{if(!e)return;const a=t.identity;switch(e.type){case f.CloseViews:await(async(e,t)=>{if((await fin.Window.wrapSync(e).getCurrentViews()).length!==t.length)t.forEach((async e=>{const t=fin.View.wrapSync(e);await t.destroy()}));else{const t=(await Ft().Browser.wrapSync(e).getPages()).find((e=>e.isActive));(await Re(e)).dispatch(Ve.ClosePage,t?.pageId)}})(a,t.selectedViews);break;case f.OpenWithDefaultBrowser:await ja(a,t.selectedViews);break;case f.ReloadViews:t.selectedViews.forEach((async e=>{const t=fin.View.wrapSync(e);await t.reload()}));break;case f.NewView:await Na(a,t);break;case f.DuplicateViews:Ha(a,t.selectedViews);break;case f.AddToChannel:(async(e,t,a)=>{const n={newChannelId:t,selectedViews:a};(await Re(e)).dispatch(Ve.AddToChannel,n)})(a,e.option,t.selectedViews);break;case f.RemoveFromChannel:(async(e,t)=>{(await Re(e)).dispatch(Ve.RemoveFromChannel,t)})(a,t.selectedViews);break;case f.Custom:if(e.action){const n={callerType:h.ViewTabContextMenu,windowIdentity:a,selectedViews:t.selectedViews,customData:e.action.customData};Ft()._invokeCustomAction(e.action.id,n)}}};async function Ka(e,t){const a=await oa(e.identity),n=await ia();a.find((e=>e.data?.type===u.Quit)).label=`Quit ${n}`;const o={...e,template:a,callback:Fa};await this.openGlobalContextMenu(o,t)}const Qa=async(e,t)=>{const{x:a,y:n,identity:o,template:r,callback:i}=e,{data:s}=await function(e,t){if(!S)throw new Error("showContextMenu can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");if(!t&&!fin.me.isWindow)throw new Error("showContextMenu can only be used in an OpenFin window.");return(t||fin.Window.getCurrentSync()).showPopupMenu(e)}({x:a,y:n,template:r},fin.Window.wrapSync(o));i(s,e)};async function za(e,t){const a={...e,callback:qa};await this.openViewTabContextMenu(a,t)}async function Ja(e,t){const a=await(async(e,t)=>{const a=await Ft().Storage.getPage(e),n=(await Ge()).find((t=>t.pageId===e)),{workspacePlatform:o}=await F(t).getOptions(),r=!(o.isLocked||o.preventPageClose||n.closeButton?.disabled||n.closeButton?.hidden);return[{type:Tt.Label,label:"Save Page",data:{type:w.Save}},{type:Tt.Label,label:"Save Page As",data:{type:w.SaveAs}},Et,{type:Tt.Label,label:"Rename Page",data:{type:w.Rename},enabled:!!a},{type:Tt.Label,label:"Duplicate Page",data:{type:w.Duplicate},enabled:!o.isLocked},Et,{type:Tt.Label,label:"Close Page",data:{type:w.Close},enabled:r}]})(e.pageId,e.identity),n={...e,template:a,callback:Ga};await this.openPageTabContextMenu(n,t)}async function Xa(e,t){const a={...e,template:await(async()=>[{type:Tt.Label,label:"Save Workspace",data:{type:y.SaveWorkspace}},{type:Tt.Label,label:"Save Workspace As",data:{type:y.SaveWorkspaceAs}},{type:Tt.Separator,data:void 0},{type:Tt.Label,label:"Save Page",data:{type:y.SavePage}},{type:Tt.Label,label:"Save Page As",data:{type:y.SavePageAs}}])(),callback:$a};await this.openSaveButtonContextMenu(a,t)}const Ya=b&&gt("openfin-workspace-platform-workspaces","workspaces");async function Za(e){const t=await mt(e,Ya);return t?(t.workspaceId=e.toString(),t.title=t.title||t.workspaceId,t):null}async function en(e){const t=await bt(Ya),a=await Promise.all(t.map((e=>Za(e.toString()))));return e?a.filter((t=>kt(t.title,e))):a}async function tn({workspace:e}){await vt(e.workspaceId,e,Ya)}async function an(e){await St(e,Ya)}async function nn({workspaceId:e,workspace:t}){if(void 0===await Za(e))throw new Error("workspace not found");await tn({workspace:t}),e!==t.workspaceId&&await an(e)}async function on({app:e,target:t}){const a=fin.Platform.getCurrentSync();switch(e.manifestType){case c.Snapshot:return a.applySnapshot(e.manifest);case c.View:return async function(e,t){const a=fin.Platform.getCurrentSync();if("view"===t.entityType){const a=fin.View.wrapSync(t),n=await a.getParentLayout();return await n.replaceView(t,{manifestUrl:e.manifest,url:void 0,target:void 0}),a.destroy()}return a.createView({name:void 0,url:void 0,manifestUrl:e.manifest,target:void 0})}(e,t);case c.External:return fin.System.launchExternalProcess({path:e.manifest,uuid:e.appId});default:return fin.Application.startFromManifest(e.manifest)}}const rn=e=>e&&"object"==typeof e&&!Array.isArray(e);function sn(e,...t){if(!t.length)return e;const a=t.shift();return rn(e)&&rn(a)&&Object.entries(a).forEach((([t,a])=>{if(rn(a))return e[t]||(e[t]={}),sn(e[t],a);e[t]=a})),sn(e,...t)}const cn=M+pa.Browser;function dn(e,t){const a=sn({},t,e);return a.detachOnClose=!0,a}async function pn(e,t,a){const n=e.manifestUrl?await t({manifestUrl:e.manifestUrl},a):void 0;if(n?.interop&&e.interop){const t={...e,...n,interop:e.interop};return delete t.manifestUrl,t}return e}const ln=e=>{const t=e.name===V.Home,a=e.name?.startsWith(V.HomeInternal),n=e.name?.startsWith(V.BrowserMenu);return!t&&!a&&!n},un=e=>"workspacePlatform"in e?e:(({workstacks:e,pages:t,...a})=>({...a,workspacePlatform:{pages:t||e||null}}))(e),wn={contextMenuSettings:{reload:!1},backgroundThrottling:!0,url:cn,contextMenu:!0,closeOnLastViewRemoved:!1,experimental:{showFavicons:!0,defaultFaviconUrl:`${M}/icons/defaultFavicon.svg`},permissions:{System:{openUrlWithBrowser:{enabled:!0,protocols:["mailto"]}}}},fn={dimensions:{borderWidth:3,headerHeight:30}},gn=async(e,t)=>{const a=await Ft().Storage.getPages(),n=await Ft().Browser.getAllAttachedPages();return e.map((e=>{let o=e.title;void 0===e.pageId&&(e.pageId=crypto.randomUUID());const r=a.find((e=>e.title===o));return(r&&r.pageId!==e.pageId||n.find((e=>e.title===o)))&&(o=le(e.title,[...a,...n].map((e=>e.title)))),n.push({...e,title:o}),{...t,...e,title:o,layout:(i=e.layout,be({...i},ke))};var i}))};var yn;!function(e){e.Browser="browser",e.Platform="platform",e.Classic="classic",e.Mixed="mixed"}(yn||(yn={}));const hn=e=>{const t=fin.Window.wrapSync(e);return Promise.all([t.bringToFront(),t.restore(),t.focus()])};async function mn(e){const t=(await q()).map((async e=>{const t=await e.getOptions();t.workspacePlatform?.pages&&t.layout&&await(async e=>(await Re(e)).dispatch(Ve.UpdatePagesWindowOptions))(e.identity)}));return await Promise.all(t),e?e():wt()}const vn=async e=>{await Ma(fin.me.identity,e.title??await ia(),e.shouldCenterOnMonitor)&&fin.Platform.getCurrentSync().quit()};let Sn=[];const Pn=()=>Sn;const bn=(e,t)=>async a=>{const n=null!==e;class o extends a{constructor(){super(),this.isWorkspacePlatform=()=>({isWorkspacePlatform:!0,isBrowserInitialized:!!e}),this.addPage=this.attachPagesToWindow,this.detachPagesFromWindow=Xe,this.getAllAttachedPages=Ge,this.getPagesForWindow=Ze,this.getPageForWindow=et,this.setActivePage=Ye,this.launchApp=on,this.savePage=Qe,this.saveWorkspace=ye,this.createSavedPageInternal=He,this.updateSavedPageInternal=Ke,this.deleteSavedPageInternal=qe,this.reorderPagesForWindow=tt,this.getUniquePageTitle=at,this.updatePageForWindow=Je,this.getLastFocusedBrowserWindow=me,this.getThemes=Pn,this.invokeCustomActionInternal=ct,this.requestQuitPlatformDialogInternal=vn,this.getCurrentWorkspace=ge,this.applyWorkspace=ue,this.setActiveWorkspace=we,this.openGlobalContextMenuInternal=this.openGlobalContextMenuInternal.bind(this),this.openGlobalContextMenu=this.openGlobalContextMenu.bind(this),this.getSavedPages=this.getSavedPages.bind(this),this.getSavedPage=this.getSavedPage.bind(this),this.createSavedPage=this.createSavedPage.bind(this),this.updateSavedPage=this.updateSavedPage.bind(this),this.deleteSavedPage=this.deleteSavedPage.bind(this),this.attachPagesToWindow=this.attachPagesToWindow.bind(this),this.openViewTabContextMenuInternal=this.openViewTabContextMenuInternal.bind(this),this.openViewTabContextMenu=this.openViewTabContextMenu.bind(this),this.openPageTabContextMenuInternal=this.openPageTabContextMenuInternal.bind(this),this.openPageTabContextMenu=this.openPageTabContextMenu.bind(this),this.getSavedWorkspaces=this.getSavedWorkspaces.bind(this),this.getSavedWorkspace=this.getSavedWorkspace.bind(this),this.createSavedWorkspace=this.createSavedWorkspace.bind(this),this.updateSavedWorkspace=this.updateSavedWorkspace.bind(this),this.deleteSavedWorkspace=this.deleteSavedWorkspace.bind(this),this.getCurrentWorkspace=this.getCurrentWorkspace.bind(this),this.applyWorkspace=this.applyWorkspace.bind(this),this.setActiveWorkspace=this.setActiveWorkspace.bind(this),this.openSaveButtonContextMenu=this.openSaveButtonContextMenu.bind(this),this.openSaveButtonContextMenuInternal=this.openSaveButtonContextMenuInternal.bind(this)}async getSnapshot(){const e=n?await mn((async()=>wt(await super.getSnapshot(void 0,fin.me.identity)))):await wt(await super.getSnapshot(void 0,fin.me.identity));return{...e,windows:e.windows.filter(ln).map(ut)}}async applySnapshot({snapshot:e,options:t}){const a=e=>super.applySnapshot({snapshot:e,options:{...t,closeExistingWindows:!1}});let o=e;"string"==typeof o&&(o=await super.fetchManifest({manifestUrl:o},fin.me.identity));const r=function(e){let t=!1,a=!1;for(const n of e.windows){if(t&&a)break;n.workspacePlatform?.pages?.length?a=!0:n.layout&&(t=!0)}return t&&a?yn.Mixed:t?yn.Platform:a?yn.Browser:e.windows.length?yn.Classic:null}(o);if(r===yn.Mixed)throw new Error("This snapshot cannot be applied as it contains a mixture of browser and platform windows.");if(n)yn.Platform;else if(r===yn.Browser)throw new Error("This snapshot cannot be applied as the platform has been initialized without the browser.");return t?.closeExistingWindows&&await async function(){const e=await q();await Promise.all(e.map((e=>e.close(!0).catch((()=>{})))))}(),n?async function(e,t){const a=await Ge(),n=e.snapshotDetails?.monitorInfo||await fin.System.getMonitorInfo(),[o,r]=(e.windows||[]).reduce((([e,t],a)=>a?.workspacePlatform?.pages?.length?[[...e,a],t]:[e,[...t,a]]),[[],[]]),i=new Map;a.forEach((e=>i.set(e.pageId,e)));const s=[],c=o.map((async e=>{const t=un(e),a=[],n=(e=>{let t=!1;const a=(e||[]).map((e=>{const a=function({id:e,name:t,...a}){return{pageId:e,title:t,...a}}(e);return t&&a.isActive&&(a.isActive=!1),a.isActive&&(t=!0),a}));return!t&&a.length&&(a[0].isActive=!0),a})(t?.workspacePlatform?.pages);if(!n?.length){const e=await at();a.push(await xt(e,t.layout))}let o;n.forEach((e=>{const t=i.get(e.pageId);t?o=t:a.push(e)})),o&&await Promise.all([Ye({identity:o.parentIdentity,pageId:o.pageId}),hn(o.parentIdentity)]),a.length&&s.push({...t,workspacePlatform:{...t.workspacePlatform,pages:a}})}));if(await Promise.all(c),!s.length&&!r.length)return;const d=fin.Platform.getCurrentSync();return(t||d.applySnapshot.bind(d))({...e,snapshotDetails:{...e.snapshotDetails,monitorInfo:n},windows:[...s,...r]})}(o,a):a(o)}async createWindow(t,a){t.workspacePlatform?.toolbarOptions?.buttons&&(e=>{const t=e.filter((e=>e.type!==g.Custom)),a=new Set;for(const e of t){if(a.has(e.type))throw new Error(`Encountered a duplicate of ${e.type} button. No more than one instance of a button type may be provided.`);a.add(e.type)}})(t.workspacePlatform.toolbarOptions.buttons);let o=un(t);if(n){const t=this.getThemes();o=await(async(e,t,a)=>{let n=e;const o=n?.workspacePlatform?.pages;if(o){const e=o.find((e=>e.isActive));e?n.layout=e.layout:(o[0].isActive=!0,n.layout=o[0].layout)}if(n.layout){if(n=sn({},t.defaultWindowOptions,n,wn),n.layout=sn(n.layout,fn),(n.icon||n.taskbarIcon)&&(n.taskbarIconGroup=n.taskbarIconGroup||fin.me.identity.uuid),!n.backgroundColor){const e=a?.palette;n.backgroundColor=e?.background2||e?.backgroundPrimary}const e=n.workspacePlatform.newTabUrl;if(e&&(n.layout.settings||(n.layout.settings={}),n.layout.settings.newTabButton={url:e}),n=((e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a})(n,!0),!n.workspacePlatform.pages?.length){const e=await at("Untitled Page"),t={...await xt(e,n.layout),isActive:!0};n.workspacePlatform.pages=[t]}}return n.workspacePlatform?.pages&&(n.workspacePlatform.pages=await gn(n.workspacePlatform.pages,t?.defaultPageOptions)),n.cornerRounding&&delete n.cornerRounding,n})(o,e,t[0])}o=await(async e=>{const t=await fin.System.getMonitorInfo(),a=t.primaryMonitor.availableRect.bottom-t.primaryMonitor.availableRect.top,n=t.primaryMonitor.availableRect.right-t.primaryMonitor.availableRect.left;return e.defaultHeight=e.defaultHeight||"800",e.defaultWidth=e.defaultWidth||"800",a<e.defaultHeight&&(e.defaultHeight=a),n<e.defaultWidth&&(e.defaultWidth=n),e})(o);const r=(e,t)=>super.createWindow(e,t),i=n?(e=>async(t,a)=>{let n=!1;const o=await e(t,a);return t?.workspacePlatform?._internalDeferShowOptions?.deferShowEnabled?(await o.addListener(D.ShowRequested,(async()=>{if(n)return;const e=await o.getOptions();await o.updateOptions({workspacePlatform:{...e.workspacePlatform,_internalDeferShowOptions:{...e.workspacePlatform._internalDeferShowOptions,autoShow:!0}}}),n=!0})),o):o})(r):r;return i(o,a)}async createView(t,a){return t.opts=dn(t.opts,e?.defaultViewOptions),t.opts=await pn(t.opts,this.fetchManifest,a),super.createView(t,a)}async replaceView(t,a){return t.opts.newView=await dn(t.opts.newView,e?.defaultViewOptions),t.opts.newView=await pn(t.opts.newView,this.fetchManifest,a),super.replaceView(t,a)}async replaceLayout(e,t){return delete e.opts.layout?.dimensions,super.replaceLayout(e,t)}async closeView(e,t){const a=fin.View.wrapSync(e.view);await super.closeView(e,t),await a.destroy().catch((e=>e))}async getSavedPage(...e){return Ct.apply(this,e)}async getSavedPages(...e){return It.apply(this,e)}async createSavedPage(...e){return At.apply(this,e)}async deleteSavedPage(...e){return Mt.apply(this,e)}async updateSavedPage(...e){return Ot.apply(this,e)}async getSavedWorkspace(...e){return Za.apply(this,e)}async getSavedWorkspaces(...e){return en.apply(this,e)}async createSavedWorkspace(...e){return tn.apply(this,e)}async deleteSavedWorkspace(...e){return an.apply(this,e)}async updateSavedWorkspace(...e){return nn.apply(this,e)}async attachPagesToWindow(t){t.pages=await gn(t.pages,e?.defaultPageOptions),await ze(t)}async openGlobalContextMenuInternal(...e){return Ka.apply(this,e)}async openGlobalContextMenu(...e){return Qa.apply(this,e)}async openViewTabContextMenuInternal(...e){return za.apply(this,e)}async openViewTabContextMenu(...e){return Qa.apply(this,e)}async openPageTabContextMenuInternal(...e){return Ja.apply(this,e)}async openPageTabContextMenu(...e){return Qa.apply(this,e)}async openSaveButtonContextMenu(...e){return Qa.apply(this,e)}async openSaveButtonContextMenuInternal(...e){return Xa.apply(this,e)}}return"function"==typeof t?t(o):new o};async function kn(){!function(){const e=L();e.addListener(B.WindowOptionsChanged,rt),e.addListener(B.WindowClosed,it),e.addListener(B.WindowCreated,it),fin.InterApplicationBus.subscribe({uuid:fin.me.identity.uuid},"browser-window-ready",it)}(),async function(){const e=fin.Application.getCurrentSync();await e.addListener("window-focused",ve)}();we(await fe())}let Wn;function Cn({overrideCallback:e,interopOverride:t,browser:a}){if(!S)throw new Error("Cannot be used outside an OpenFin env.");if(!Wn){fin.Platform.getCurrentSync().once("platform-api-ready",(()=>kn())),a?.title&&(n=a.title,ra=n),Wn=fin.Platform.init({overrideCallback:bn(a,e||a?.overrideCallback),interopOverride:t||a?.interopOverride}),(async e=>{J(z.Platform,e)})({allowed:!0})}var n;return Wn}const In=async({theme:e,customActions:t,...a})=>{const n=O.split(".").map((e=>parseInt(e))),o=await(async e=>new Promise((async t=>{(await Z()).disableRuntimeValidation&&t(!0);const a=(await fin.System.getVersion()).split(".").map((e=>parseInt(e)));t(e.every(((t,n)=>!(n<3)||a[n]===e[n])))})))(n);var r;if(e&&((r=e).forEach((e=>{const t=e.palette.backgroundPrimary;if(!t.includes("#")&&!t.includes("rgb")&&!t.includes("hsl"))throw new Error("Background primary color is not the right format.")})),Sn=r,(async e=>{J(z.Theming,e)})({allowed:!0})),t&&(st=t),o)return Cn(a);throw new Error(`Runtime version is not supported.  ${n[0]}.${n[1]}.${n[2]}.* is required`)}})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module) => {

(()=>{"use strict";var e={703:(e,t,n)=>{n.r(t),n.d(t,{CLIAction:()=>l.Pt,CLIFilterOptionType:()=>l.el,CLITemplate:()=>l.yW,deregister:()=>et,hide:()=>nt,register:()=>Ye,show:()=>tt});var o={};n.r(o),n.d(o,{subscribe:()=>ae});var r={};n.r(r),n.d(r,{create:()=>He});var i=n(678),s=n(532),a=n(436);const c="home";var d;!function(e){e.Commands="home-commands"}(d||(d={}));var u,p=n(806),l=(n(298),n(758));n(114),n(109),n(427);!function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(u||(u={}));var f=n(316);const w="all",g="0",h="5",y="6",v=()=>{};function m(e,t){return e?`${e}-${t}`:t}function S(e){return`__search-${e}-topic__`}const P=new Map;function C(e,t){P.has(e)||P.set(e,new Set),P.get(e).add(t)}function k(e,t){const n=P.get(e);n&&n.delete(t)}const W=new Map;function R(e,t){W.has(e)||W.set(e,new Set),W.get(e).add(t)}function T(e,t){const n=W.get(e);n&&n.delete(t)}const I=new Map;async function b(e,t){I.has(e)||I.set(e,new Map),I.get(e).set(t.id,t);const n=P.get(e);if(!n)return;const o=[...n].map((e=>e()));await Promise.all(o)}async function D(e,t){const n=I.get(e);if(!n)return;n.delete(t);const o=W.get(e);if(!o)return;const r=[...o].map((e=>e()));await Promise.all(r)}function B(e){return I.get(e)?[...I.get(e).values()]:[]}function F(e){const t=I.get(e);t&&t.clear()}function L(e,t){const n=I.get(e);return n?n.get(t):null}function A(e,t,n){return{...e,action:n||{...e.actions[0],trigger:f.px.UserAction},dispatcherIdentity:t}}function O(e,t,n="ascending"){const o=e||[];if(!t?.length)return o;const r=[],i=new Map;t.forEach((e=>{if(e.key)return i.set(e.key,e);r.push(e)}));let s=o.map((e=>{const{key:t}=e;if(t&&i.has(t)){const e=i.get(t);return i.delete(t),e}return e}));return s.push(...i.values(),...r),s="ascending"===n?s.sort(((e,t)=>(null!==e.score&&void 0!==e.score?e.score:1/0)-(null!==t.score&&void 0!==t.score?t.score:1/0))):s.sort(((e,t)=>(null!==t.score&&void 0!==t.score?t.score:1/0)-(null!==e.score&&void 0!==e.score?e.score:1/0))),s}function x(e){const t={};let n=[];let o=[];let r=u.Initial;t.getStatus=()=>r,t.getResultBuffer=()=>n,t.setResultBuffer=e=>{n=e,n?.length&&t.onChange()},t.getRevokedBuffer=()=>o,t.setRevokedBuffer=e=>{o=e,o?.length&&t.onChange()},t.onChange=v;const i={};return t.res=i,i.close=()=>{r!==u.Close&&(r=u.Close,t.onChange())},i.open=()=>{r!==u.Open&&(r=u.Open,t.onChange())},i.respond=n=>{const o=O(t.getResultBuffer(),n,e);t.setResultBuffer(o)},i.revoke=(...e)=>{const n=new Set(e),o=t.getResultBuffer().filter((({key:e})=>{const t=n.has(e);return t&&n.delete(e),!t}));t.setResultBuffer(o),n.size&&(t.getRevokedBuffer().forEach((e=>n.add(e))),t.setRevokedBuffer([...n]))},t}function E(e,t,n){const o=new Set;let r=!1;return{close:()=>{r=!0;for(const e of o)e()},req:{id:t,topic:e,...n,context:n?.context||{},onClose:e=>{o.add(e),r&&e()},removeListener:e=>{o.delete(e)}}}}function V(){return{name:fin.me.name,uuid:fin.me.uuid}}function M(){let e;try{const t=fin.Platform.getCurrentSync();if(!t?.identity)return;e=t.identity.uuid}catch(e){}return e}const _="deregistered or does not exist",$=new Error(`provider ${_}`),q=new Error("provider with name already exists"),G=new Error("bad payload"),H=new Error("subscription rejected"),N=new Error(`channel ${_}`),U=new Map;function j(e){const t=X(e);if(t)return t;throw N}function X(e){const t=U.get(e);if(t)return t}function K(e,t){U.set(e,t)}const J=new Map;function z(e){J.has(e)||J.set(e,new Map);const t=J.get(e);return{getRequestsForIdentity:e=>{const n=function(e){return`${e.uuid}:${e.name}`}(e);return t.has(n)||t.set(n,new Map),t.get(n)}}}async function Z(e,t){return(await j(e)).dispatch(g,t)}function Q({namespacedTopic:e,topic:t}){const n=L.bind(null,e),o=z(e),r=Z.bind(null,e);return async(e,i)=>{if(!e||!e.id||!e.providerId){const e=G;return{error:e.message}}const{id:s,providerId:a}=e,c=n(a);if(!c){const e=$;return{error:e.message}}const d=o.getRequestsForIdentity(i);let u=d.get(e.id);u||(u=E(t,s,e),d.set(e.id,u));const p=x(),l=()=>{const e=p.getResultBuffer();p.setResultBuffer([]);const t=p.getRevokedBuffer();p.setRevokedBuffer([]);const n=p.getStatus();r({id:s,providerId:a,results:e,revoked:t,status:n})};let f=!0,w=!1;p.onChange=()=>{if(f)return f=!1,void l();w||(w=!0,setTimeout((()=>{w=!1,l()}),100))};try{const{results:e,context:t}=await c.onUserInput(u.req,p.res),n=p.getStatus();return{id:s,providerId:a,status:n,results:e,context:t}}catch(e){return{id:s,providerId:a,error:e.message}}}}async function Y(e,t,n){const o=n||await j(e),r=V(),i={identity:r,...t,onUserInput:void 0,onResultDispatch:void 0},s=await o.dispatch("2",i);return await b(e,{identity:r,...t}),s}async function ee(e,t){const n=await j(e);return await n.dispatch("3",t),D(e,t)}async function te(e,t,n,o){const r=A(n,V(),o),i=L(e,t);if(i){const{onResultDispatch:e}=i;if(!e)return;return e(r)}const s={providerId:t,result:r};return(await j(e)).dispatch(h,s)}async function ne(e,t){const n={...t,context:t?.context||{}},o={},r=async function*(e,t,{setState:n}){const o=await j(e);for(;;){const e=await o.dispatch("1",t),r=e.error;if(r)throw new Error(r);const i=e;if(t.id=i.id,n(i.state),i.done)return i.value;yield i.value}}(e,n,{setState:e=>{o.state=e}});let i=await r.next();return o.id=n.id,o.close=()=>{!async function(e,t){(await j(e)).dispatch(y,{id:t})}(e,o.id)},o.next=()=>{if(i){const e=i;return i=void 0,e}return r.next()},o}async function oe(e){return(await j(e)).dispatch("4",null)}async function re(e){const t=await j(e);var n;n=e,U.delete(n),F(e),await t.disconnect()}function ie(e){const{namespacedTopic:t}=e,n=z(t);return async o=>{if(!X(t))return;const r=n.getRequestsForIdentity(o);for(const{req:e,close:t}of r.values())t(),r.delete(e.id);K(t,(async e=>{const{namespacedTopic:t}=e,n=await se(e);for(const e of B(t))await Y(t,e,n);return n})(e))}}async function se(e){const{namespacedTopic:t}=e,n=S(t),o=await async function(e){for(let t=0;t<50;t++)try{return await fin.InterApplicationBus.Channel.connect(e,{wait:!1})}catch(e){if(49===t)throw e;await new Promise((e=>setTimeout(e,1e3)))}}(n);return o.register(g,Q(e)),o.register(y,function(e){const t=z(e);return(e,n)=>{const o=t.getRequestsForIdentity(n),r=o.get(e.id);r&&(r.close(),o.delete(e.id))}}(t)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)return;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o.onDisconnection(ie(e)),o}async function ae(e){const t=("string"==typeof e?e:e?.topic)||w,n=("string"==typeof e?null:e?.uuid)||M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=X(o);return i||(i=se(r),K(o,i),await i),{getAllProviders:oe.bind(null,o),register:Y.bind(null,o),search:ne.bind(null,o),deregister:ee.bind(null,o),dispatch:te.bind(null,o),disconnect:re.bind(null,o)}}const ce=new Map;function de(e){const t=ue(e);if(t)return t;throw N}function ue(e){const t=ce.get(e);if(t)return t}const pe=new Map;function le(e,t){pe.has(e)||pe.set(e,new Set),pe.get(e).add(t)}function fe(e,t){const n=pe.get(e);n&&n.delete(t)}function we(e){return[...B(e)].map((e=>({...e,onUserInput:void 0,onResultDispatch:void 0})))}async function ge(e,t){if(L(e,t.id))throw new Error("provider with name already exists");const n=V();await b(e,{identity:n,...t})}function he(e,t){D(e,t)}async function ye(e,t,n,o){const r=L(e,t);if(!r)throw $;const{onResultDispatch:i}=r;if(!i)return;return i(A(n,V(),o))}async function*ve(e,t,n){const o=function(e,t){const n=[],o=[],r=[],i=[];for(const s of e){const e=x(s.scoreOrder),a={results:[],provider:{id:s.id,identity:s.identity,title:s.title,scoreOrder:s.scoreOrder,icon:s.icon,dispatchFocusEvents:s.dispatchFocusEvents}};n.push(a),o.push(e);const c=(async()=>{try{const{results:n,context:o}=await s.onUserInput(t,e.res);a.results=O(a.results,n),a.context={...a.context,...o}}catch(e){a.error=e}})();c.finally((()=>{c.done=!0})),i.push(c),r.push(r.length)}return{providerResponses:n,listenerResponses:o,openListenerResponses:r,initialResponsePromises:i}}(t.targets?t.targets.map((t=>L(e,t))).filter((e=>!!e)):[...B(e).filter((e=>!e.hidden))],t),{providerResponses:r,listenerResponses:i}=o;let{openListenerResponses:s,initialResponsePromises:a}=o,c=f.De.Fetching;const d=e=>{c=e,n.setState(c)};let p,l=!1;t.onClose((()=>{l=!0,p&&p()}));do{let e=!1;if(a.length){const t=[];for(const n of a)n.done?e=!0:t.push(n);a=t,a.length||(d(f.De.Fetched),e=!0)}let t,n=!1;const o=()=>{n=!0,t&&t()},w=[];for(const t of s){const n=i[t],s=r[t],a=n.getStatus();(a===u.Open||c===f.De.Fetching&&a===u.Initial)&&(w.push(t),n.onChange=o);const d=n.getResultBuffer();d.length&&(n.setResultBuffer([]),s.results=O(s.results,d),e=!0);const p=n.getRevokedBuffer();if(p.length){n.setRevokedBuffer([]);const t=new Set(p);s.results=s.results.filter((({key:e})=>!t.has(e))),e=!0}}if(s=w,e&&(yield r),l)break;n||(s.length||a.length)&&await Promise.race([...a,new Promise((e=>{t=e})),new Promise((e=>{p=e}))])}while(s.length||a.length);return d(f.De.Complete),r}let me=0;function Se({namespacedTopic:e,topic:t},n){me+=1;const o=E(t,me.toString(),n),r=ve(e,o.req,{setState:e=>{r.state=e}});return r.id=me.toString(),r.close=o.close,r.state=f.De.Fetching,r}const Pe=new Map;function Ce(e,t){return`${e}:${t}`}function ke(e){return async(t,...n)=>{if(!t)return{error:G.message};let o;if(t.id)o=Ce(e.namespacedTopic,t.id);else{const n=Se(e,t);o=Ce(e.namespacedTopic,n.id),t.id=n.id,Pe.set(o,{generator:n})}const r=Pe.get(o);clearTimeout(r.timeout);const i=await r.generator.next();return r.timeout=function(e){return window.setTimeout((()=>{Pe.delete(e)}),1e4)}(o),{...i,id:t.id,state:r.generator.state}}}function We(e,t,n){return de(e).dispatch(t,y,{id:n})}function Re(e){return t=>function(e,t){const n=Ce(e,t),o=Pe.get(n);o&&o.generator.close()}(e,t.id)}async function Te(e,t,{id:n,query:o,context:r,targets:i}){const s=de(e),a={id:n,query:o,context:r,targets:i,providerId:t.id},c=await s.dispatch(t.identity,g,a),d=c.error;if(d)throw new Error(d);return c}const Ie=new Map;function be(e,t,n){return`${e}:${t.name}:${t.uuid}:${n}`}const De=new Map;function Be(e,t,n){return`${e}:${t}:${n}`}function Fe(e,t){const n=be.bind(null,e,t.identity),o=We.bind(null,e,t.identity),r=Te.bind(null,e,t);return async(i,s)=>{const a=n(i.id);if(!Ie.has(a)){const e=()=>{o(i.id),Ie.delete(a)};Ie.set(a,e),i.onClose(e)}const c=Be(e,t.id,i.id),d=()=>{De.delete(c),s.close()};i.onClose(d),De.set(c,(e=>{e.results?.length&&s.respond(e.results),e.revoked?.length&&s.revoke(...e.revoked),e.status===u.Open&&s.open(),e.status===u.Close&&d()}));const p=await r(i);return p.status===u.Open&&s.open(),p.status!==u.Close&&p.status!==u.Initial||d(),p}}function Le(e,t){return async n=>{const o=de(e),r={providerId:t.id,result:n};return o.dispatch(t.identity,h,r)}}const Ae=new Map;function Oe(e,t){return`${e}-${t.name}-${t.uuid}`}function xe(e){return async(t,n)=>{if(!t||!t.id)return void new Error(JSON.stringify(t));if(L(e,t.id))throw q;return t.identity=n,await async function(e,t){const n=Oe(e,t.identity);Ae.has(n)||Ae.set(n,[]),Ae.get(n).push(t.id),await b(e,{...t,onUserInput:Fe(e,t),onResultDispatch:Le(e,t)})}(e,t),{workspaceVersion:i.u0,clientAPIVersion:t.clientAPIVersion}}}function Ee(e){return t=>{t&&function(e,t){const n=L(e,t);if(!n)return;const o=Oe(e,n.identity),r=Ae.get(o);if(r){const n=r.findIndex((e=>e===t));-1!==n&&(r.splice(n,1),D(e,t))}}(e,t)}}const Ve=new Map;function Me(e,t){Ve.has(e)||Ve.set(e,new Set),Ve.get(e).add(t)}function _e(e,t){const n=Ve.get(e);n&&n.delete(t)}function $e(e){return async t=>{!function(e,t){const n=Oe(e,t),o=Ae.get(n);if(o){for(const t of o)D(e,t);Ae.delete(n)}}(e,t);const n=Ve.get(e);n&&n.forEach((e=>e(t)))}}async function qe(e){const{namespacedTopic:t}=e,n=S(e.namespacedTopic),o=await(r=n,fin.InterApplicationBus.Channel.create(r));var r;return o.onConnection(function({namespacedTopic:e}){return async t=>{const n=pe.get(e);if(n)for(const e of n)if(!await e(t))throw H}}(e)),o.onDisconnection($e(t)),o.register(y,Re(t)),o.register(g,function(e){return t=>{const n=Be(e,t.providerId,t.id),o=De.get(n);o&&o(t)}}(t)),o.register("2",xe(t)),o.register("3",Ee(t)),o.register("4",function(e){return async()=>we(e)}(t)),o.register("1",ke(e)),o.register(h,function(e){return async(t,n)=>{if(!t||!t.providerId||!t.result)return;const o=L(e,t.providerId);if(!o)throw $;const{onResultDispatch:r}=o;return r?(t.result.dispatcherIdentity=n,r(t.result)):void 0}}(t)),o}async function Ge(e){const t=de(e);var n;n=e,ce.delete(n),await t.destroy(),F(e)}async function He(e){const t=("string"==typeof e?e:e?.topic)||w,n=M(),o=m(n,t),r={topic:t,namespace:n,namespacedTopic:o};let i=ue(o);i||(i=await qe(r),function(e,t){ce.set(e,t)}(o,i));const s=fe.bind(null,o),a=_e.bind(null,o),c=k.bind(null,o),d=T.bind(null,o);return{getAllProviders:we.bind(null,o),search:Se.bind(null,r),register:ge.bind(null,o),deregister:he.bind(null,o),onSubscription:le.bind(null,o),onDisconnect:Me.bind(null,o),onRegister:C.bind(null,o),onDeregister:R.bind(null,o),dispatch:ye.bind(null,r),disconnect:Ge.bind(null,o),removeListener:e=>{s(e),a(e),c(e),d(e)}}}const{create:Ne}=r,{subscribe:Ue}=o,je={create:Ne,subscribe:Ue,defaultTopic:"all"},Xe=()=>{window.search=je},Ke=e=>{const t=()=>{Xe(),window.removeEventListener(e,t)};return t};if("undefined"!=typeof window){Xe();const e="load",t=Ke(e);window.addEventListener(e,t);const n="DOMContentLoaded",o=Ke(n);window.addEventListener(n,o)}const Je=new Map;async function ze(){await async function(e){Je.set(e,await Ue({topic:e,uuid:p.q9.Workspace}))}(c)}let Ze;async function Qe(e){return await async function(){return Ze||(Ze=ze()),Ze}(),Je.get(e)}const Ye=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);await(0,a.aB)();const t=await Qe(c);try{e.clientAPIVersion=i.u0;const n=await t.register(e);return(0,s.ck)({allowed:!0,componentVersion:n?.workspaceVersion}),n}catch(e){throw(0,s.ck)({allowed:!1,rejectionCode:e.message}),e}},et=async e=>{await(0,a.aB)();return(await Qe(c)).deregister(e)};async function tt(){return(await(0,a.Xl)()).dispatch(a.WF.ShowHome,void 0)}async function nt(){return(await(0,a.Xl)()).dispatch(a.WF.HideHome,void 0)}},298:(e,t,n)=>{n.d(t,{p:()=>o.px,w:()=>o.wt});var o=n(316)},427:(e,t,n)=>{var o;n.d(t,{v:()=>o}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(o||(o={}))},758:(e,t,n)=>{var o,r,i;n.d(t,{Pt:()=>o,el:()=>i,yW:()=>r}),function(e){e.Suggestion="suggestion"}(o||(o={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(i||(i={}))},114:(e,t,n)=>{var o,r;n.d(t,{L:()=>o,T:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(o||(o={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},109:(e,t,n)=>{n.d(t,{Go:()=>r,ZJ:()=>s,bI:()=>i,p6:()=>o});const o={Container:"Container",Button:"Button"},r={Text:"Text",Image:"Image",List:"List"},i={...o,...r};var s;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(s||(s={}))},528:(e,t,n)=>{n.r(t),n.d(t,{AppManifestType:()=>s.L,StorefrontTemplate:()=>s.T,deregister:()=>g,hide:()=>h,register:()=>w,show:()=>y});var o=n(532),r=n(436),i=n(82),s=n(114),a=n(678);let c,d=!1;async function u(e,t,n){const o=await(0,r.Dm)();try{return await o.dispatch(e.action,e.payload)}catch(r){if(-1!==r.toString().indexOf(e.action))return d=!0,await o.dispatch(t.action,t.payload),n;throw r}}const p=new Map,l=e=>{if(!p.has(e))throw new Error(`Storefront Provider with id ${e} is not registered`);return p.get(e)},f=async e=>{const t=await(0,r.Xl)();if(p.has(e.id))throw new Error(`Storefront provider with id ${e.id} already registered`);return p.set(e.id,e),(e=>{e.isStorefrontActionsRegistered||(e.isStorefrontActionsRegistered=!0,e.register(r.WF.GetStorefrontProviderApps,(e=>l(e).getApps())),e.register(r.WF.GetStorefrontProviderFooter,(e=>l(e).getFooter())),e.register(r.WF.GetStorefrontProviderLandingPage,(e=>l(e).getLandingPage())),e.register(r.WF.GetStorefrontProviderNavigation,(e=>l(e).getNavigation())),e.register(r.WF.LaunchStorefrontProviderApp,(({id:e,app:t})=>l(e).launchApp(t))))})(t),e.clientAPIVersion=a.u0,u({action:r.WF.RegisterProvider,payload:{providerType:i.lP.Storefront,info:e}},{action:r.WF.RegisterStorefrontProvider,payload:e},{workspaceVersion:"unknown"})},w=e=>(c=new Promise((async(t,n)=>{try{const n=await f(e);(0,o.d9)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:a.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,o.d9)({allowed:!1,rejectionCode:e.message}),n(e)}})),c),g=async e=>(await c,p.delete(e),await(0,r.aB)(),u({action:r.WF.DeregisterProvider,payload:{providerType:i.lP.Storefront,id:e}},{action:r.WF.DeregisterStorefrontProvider,payload:e})),h=async()=>(await c,await(0,r.aB)(),u({action:r.WF.HideProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.HideStorefront})),y=async()=>(await c,await(0,r.aB)(),u({action:r.WF.ShowProviderWindow,payload:{providerType:i.lP.Storefront}},{action:r.WF.ShowStorefront}))},436:(e,t,n)=>{n.d(t,{WF:()=>s,Dm:()=>a,Xl:()=>p,aB:()=>u});var o=n(678);const r=o.Ax&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));var i=n(121);var s;!function(e){e.RegisterProvider="register-provider",e.DeregisterProvider="deregister-provider",e.CreateProviderWindow="create-provider-window",e.GetProviders="get-providers",e.ShowProviderWindow="show-provider-window",e.HideProviderWindow="hide-provider-window",e.GetStorefrontProviderApps="get-storefront-provider-apps",e.GetStorefrontProviderLandingPage="get-storefront-provider-landing-page",e.GetStorefrontProviderFooter="get-storefront-provider-footer",e.GetStorefrontProviderNavigation="get-storefront-provider-navigation",e.LaunchStorefrontProviderApp="launch-storefront-provider-app",e.ShowHome="show-home",e.HideHome="hide-home",e.AssignHomeSearchContext="assign-home-search-context",e.GetLegacyPages="get-legacy-pages",e.GetLegacyWorkspaces="get-legacy-workspaces",e.GetComputedPlatformTheme="get-computed-platform-theme",e.RegisterStorefrontProvider="register-storefront-provider",e.DeregisterStorefrontProvider="deregister-storefront-provider",e.HideStorefront="hide-storefront",e.ShowStorefront="show-storefront"}(s||(s={}));const a=function(e){let t;return()=>{if(!o.sS)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const n={clientAPIVersion:o.u0},i=await fin.InterApplicationBus.Channel.connect(e,{payload:n});return i.onDisconnection((async()=>{t=void 0})),i})().then((e=>e)).catch((n=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${n}`)}))),t}}("__of_workspace_protocol__"),c="isLaunchedViaLib",d=e=>{const t=new URL(e);return t.searchParams.append(c,"true"),t.toString()},u=async()=>{if(!await(0,i.JV)(i.iW))return(o.ZK||-1===navigator.userAgent.indexOf("Win"))&&await fin.Application.startFromManifest(d(o.aW)),fin.System.openUrlWithBrowser(d(o.GX))},p=async()=>(await u(),a())},82:(e,t,n)=>{n.d(t,{R8:()=>s,X_:()=>i,lP:()=>o});var o,r=n(436);!function(e){e.Storefront="storefront",e.Dock="dock"}(o||(o={}));const i=async e=>(await(0,r.Dm)()).dispatch(r.WF.ShowProviderWindow,{providerType:e}),s=async e=>(await(0,r.Dm)()).dispatch(r.WF.HideProviderWindow,{providerType:e})},806:(e,t,n)=>{n.d(t,{q9:()=>o});var o,r,i,s=n(678);!function(e){e.Workspace="openfin-browser"}(o||(o={})),function(e){e.RunRequested="run-requested",e.WindowOptionsChanged="window-options-changed",e.WindowClosed="window-closed",e.WindowCreated="window-created"}(r||(r={})),function(e){e.FinProtocol="fin-protocol"}(i||(i={}));s.AB,o.Workspace},678:(e,t,n)=>{var o;n.d(t,{AB:()=>a,Ax:()=>i,GX:()=>u,ZK:()=>d,aW:()=>p,oC:()=>c,sS:()=>r,u0:()=>f}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(o||(o={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,i=("undefined"==typeof process||process.env?.JEST_WORKER_ID,"undefined"!=typeof window),s=i?window.origin:o.Local,a=r&&fin.me.uuid,c=r&&fin.me.name,d=(r&&fin.me.entityType,"prod"===o.Local),u=(o.Dev,o.Staging,o.Prod,"fins://system-apps/workspace"),p="https://cdn.openfin.co/workspace/9.0.11/app.json",l=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,f=(l("https://cdn.openfin.co/workspace/9.0.11"),l("https://cdn.openfin.co/workspace/9.0.11"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&l(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&l(WORKSPACE_DOCS_CLIENT_URL),"9.0.11")},532:(e,t,n)=>{n.d(t,{Wn:()=>d,ck:()=>a,d9:()=>c});var o,r=n(678),i=n(121);!function(e){e.Browser="Browser",e.Dock="Dock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming"}(o||(o={}));const s=async(e,t)=>{const n={apiVersion:t.apiVersion||r.u0,componentName:e,componentVersion:t.componentVersion||r.u0,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:"workspace-licensing",data:n})},a=async e=>{i.OI.uuid===i.Gi.uuid&&i.OI.name===i.Gi.name||s(o.Home,e)},c=async e=>{s(o.Storefront,e)},d=async e=>{s(o.Dock,e)}},121:(e,t,n)=>{n.d(t,{Gi:()=>d,JV:()=>l,OI:()=>u,iW:()=>p});var o,r,i,s=n(806),a=n(678);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window"}(o||(o={})),function(e){e.Shown="shown",e.BoundsChanged="bounds-changed",e.LayoutReady="layout-ready",e.EndUserBoundsChanging="end-user-bounds-changing",e.Blurred="blurred",e.Closed="closed",e.CloseRequested="close-requested",e.Focused="focused",e.ShowRequested="show-requested",e.ViewCrashed="view-crashed",e.ViewAttached="view-attached",e.ViewDetached="view-detached",e.ViewPageTitleUpdated="view-page-title-updated",e.ViewDestroyed="view-destroyed",e.OptionsChanged="options-changed"}(r||(r={})),function(e){e.BeforeUnload="beforeunload"}(i||(i={}));function c(e){if(!a.sS)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const d={name:a.oC,uuid:a.AB};const u={name:o.Home,uuid:s.q9.Workspace},p=(o.Dock,s.q9.Workspace,o.Storefront,s.q9.Workspace,{name:s.q9.Workspace,uuid:s.q9.Workspace});const l=e=>c(e).getOptions().then((()=>!0)).catch((()=>!1))},316:(e,t,n)=>{var o,r,i;n.d(t,{De:()=>o,px:()=>r,wt:()=>i}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(o||(o={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(i||(i={}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{ActionTrigger:()=>P.p,AppManifestType:()=>W.L,ButtonStyle:()=>C.ZJ,CLIAction:()=>k.Pt,CLIFilterOptionType:()=>k.el,CLITemplate:()=>k.yW,ContainerTemplateFragmentNames:()=>C.p6,Dock:()=>e,DockButtonNames:()=>c.v,Home:()=>h,Legacy:()=>t,PresentationTemplateFragmentNames:()=>C.Go,SearchTagBackground:()=>P.w,Storefront:()=>S,StorefrontTemplate:()=>W.T,TemplateFragmentTypes:()=>C.bI});var e={};n.r(e),n.d(e,{DockButtonNames:()=>c.v,deregister:()=>l,minimize:()=>f,register:()=>p,show:()=>w});var t={};n.r(t),n.d(t,{getPages:()=>v,getWorkspaces:()=>m});var r=n(678),i=n(532),s=n(436),a=n(82),c=n(427);let d,u=!1;const p=e=>(d=new Promise((async(t,n)=>{try{const n=await(async e=>{const t=await(0,s.Xl)();if(u)throw new Error("A dock provider for the platform is already registered.");return u=!0,e.clientAPIVersion=r.u0,t.dispatch(s.WF.RegisterProvider,{providerType:a.lP.Dock,info:e})})(e);(0,i.Wn)({allowed:!0,componentVersion:n?.workspaceVersion}),t({clientAPIVersion:r.u0,workspaceVersion:n.workspaceVersion||""})}catch(e){(0,i.Wn)({allowed:!1,rejectionCode:e.message}),n(e),d=null}})),d),l=async()=>{await d,u=!1;return(await(0,s.Xl)()).dispatch(s.WF.DeregisterProvider,{providerType:a.lP.Dock})},f=async()=>{await d,await(0,s.aB)(),await(0,a.R8)(a.lP.Dock)},w=async()=>{await d,await(0,s.aB)(),await(0,a.X_)(a.lP.Dock)};var g,h=n(703);n(121);!function(e){e.TabCreated="tab-created",e.ContainerCreated="container-created",e.ContainerResized="container-resized"}(g||(g={}));new Map;var y;!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition"}(y||(y={}));const v=()=>async function(){return(await(0,s.Dm)()).dispatch(s.WF.GetLegacyPages,void 0)}(),m=()=>(async()=>(await(0,s.Dm)()).dispatch(s.WF.GetLegacyWorkspaces,void 0))();var S=n(528),P=n(298),C=n(109),k=n(758),W=n(114)})(),module.exports=o})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./client/src/apps.ts":
/*!****************************!*\
  !*** ./client/src/apps.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getApp": () => (/* binding */ getApp),
/* harmony export */   "getApps": () => (/* binding */ getApps),
/* harmony export */   "getAppsByIntent": () => (/* binding */ getAppsByIntent),
/* harmony export */   "getAppsByTag": () => (/* binding */ getAppsByTag),
/* harmony export */   "getIntent": () => (/* binding */ getIntent),
/* harmony export */   "getIntentsByContext": () => (/* binding */ getIntentsByContext)
/* harmony export */ });
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");

let cachedApps;
async function validateEntries(apps) {
    let canLaunchExternalProcessResponse;
    try {
        canLaunchExternalProcessResponse = await fin.System.queryPermissionForCurrentContext("System.launchExternalProcess");
    }
    catch (error) {
        console.error("Error while querying for System.launchExternalProcess permission", error);
    }
    const canLaunchExternalProcess = canLaunchExternalProcessResponse?.granted;
    let canDownloadAppAssetsResponse;
    try {
        canDownloadAppAssetsResponse = await fin.System.queryPermissionForCurrentContext("System.downloadAsset");
    }
    catch (error) {
        console.error("Error while querying for System.downloadAsset permission", error);
    }
    const canDownloadAppAssets = canDownloadAppAssetsResponse?.granted;
    const validatedApps = [];
    const rejectedAppIds = [];
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_0__.getSettings)();
    const appAssetTag = settings?.appProvider?.appAssetTag ?? "appasset";
    const supportedManifestTypes = settings?.appProvider?.manifestTypes;
    for (let i = 0; i < apps.length; i++) {
        let validApp = true;
        if (supportedManifestTypes !== undefined && supportedManifestTypes.length > 0) {
            validApp = supportedManifestTypes.includes(apps[i].manifestType);
        }
        if (validApp) {
            if (apps[i].manifestType !== "external") {
                validatedApps.push(apps[i]);
            }
            else if (canLaunchExternalProcess === false) {
                rejectedAppIds.push(apps[i].appId);
            }
            else if (Array.isArray(apps[i].tags) &&
                apps[i].tags.includes(appAssetTag) &&
                canDownloadAppAssets === false) {
                rejectedAppIds.push(apps[i].appId);
            }
            else {
                validatedApps.push(apps[i]);
            }
        }
    }
    if (rejectedAppIds.length > 0) {
        console.warn("Apps.ts: validateEntries: Not passing the following list of applications as they will not be able to run on this machine due to missing permissions. Alternatively this logic could be moved to the launch function where a selection is not launched but the user is presented with a modal saying they can't launch it due to permissions.", rejectedAppIds);
    }
    return validatedApps;
}
async function getRestEntries(url, credentials, cacheDuration) {
    const options = credentials !== undefined ? { credentials } : undefined;
    if (url === undefined) {
        return [];
    }
    const response = await fetch(url, options);
    const apps = await response.json();
    cachedApps = await validateEntries(apps);
    if (cacheDuration !== undefined) {
        const setTimeoutInMs = cacheDuration * 60 * 1000;
        setTimeout(() => {
            console.log("Clearing cache of apps as cache duration has passed.");
            cachedApps = undefined;
        }, setTimeoutInMs);
    }
    return cachedApps;
}
function updateEntry(source, intent, app) {
    if (source[intent.name] === undefined) {
        // in a production app you would either need to ensure that every app was populated with the same name & displayName for an intent from a golden source (e.g. intents table) so picking the first entry wouldn't make a difference.
        // or you could pull in a golden source of intents from a service and then do a lookup using the intent name to get an object with intent name and official display name.
        source[intent.name] = {
            intent: {
                name: intent.name,
                displayName: intent.displayName
            },
            apps: []
        };
    }
    source[intent.name].apps.push(app);
    return source;
}
async function getApps() {
    console.log("Requesting apps.");
    try {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_0__.getSettings)();
        const apps = cachedApps ??
            (await getRestEntries(settings?.appProvider?.appsSourceUrl, settings?.appProvider?.includeCredentialOnSourceRequest, settings?.appProvider?.cacheDurationInMinutes));
        return apps;
    }
    catch (err) {
        console.error("Error retrieving apps. Returning empty list.", err);
        return [];
    }
}
async function getAppsByTag(tags) {
    const apps = await getApps();
    const filteredApps = apps.filter((value) => {
        if (value.tags === undefined) {
            return false;
        }
        for (let i = 0; i < tags.length; i++) {
            if (value.tags.includes(tags[i])) {
                return true;
            }
        }
        return false;
    });
    return filteredApps;
}
async function getApp(requestedApp) {
    const apps = await getApps();
    let appId;
    if (requestedApp !== undefined) {
        if (typeof requestedApp === "string") {
            appId = requestedApp;
        }
        else {
            appId = requestedApp.appId;
        }
    }
    if (appId === undefined) {
        return undefined;
    }
    const app = apps.find((entry) => entry.appId === appId);
    return app;
}
async function getAppsByIntent(intent) {
    const apps = await getApps();
    const filteredApps = apps.filter((value) => {
        if (value.intents === undefined) {
            return false;
        }
        for (let i = 0; i < value.intents.length; i++) {
            if (value.intents[i].name.toLowerCase() === intent.toLowerCase()) {
                return true;
            }
        }
        return false;
    });
    return filteredApps;
}
async function getIntent(intent, contextType) {
    const apps = await getApps();
    let intents = {};
    if (Array.isArray(apps)) {
        for (const value of apps) {
            if (value.intents !== undefined) {
                for (let i = 0; i < value.intents.length; i++) {
                    if (value.intents[i].name === intent) {
                        if (contextType === undefined) {
                            intents = updateEntry(intents, value.intents[i], value);
                        }
                        else if (Array.isArray(value.intents[i].contexts) &&
                            value.intents[i].contexts.includes(contextType)) {
                            intents = updateEntry(intents, value.intents[i], value);
                        }
                    }
                }
            }
        }
        const results = Object.values(intents);
        if (results.length === 0) {
            console.log(`No results found for findIntent for intent ${intent} and context ${contextType}`);
            return null;
        }
        else if (results.length === 1) {
            return results[0];
        }
        console.warn(`Received more than one result for findIntent for intent ${intent} and context ${contextType}. Returning the first entry.`);
        return results[0];
    }
    console.warn("There was no apps returned so we are unable to find apps that support an intent.");
    return null;
}
async function getIntentsByContext(contextType) {
    const apps = await getApps();
    let intents = {};
    if (Array.isArray(apps)) {
        for (const value of apps) {
            if (value.intents !== undefined) {
                for (let i = 0; i < value.intents.length; i++) {
                    if (Array.isArray(value.intents[i].contexts) && value.intents[i].contexts.includes(contextType)) {
                        intents = updateEntry(intents, value.intents[i], value);
                    }
                }
            }
        }
        return Object.values(intents);
    }
    console.warn("Unable to get apps so we can not get apps and intents that support a particular context");
    return [];
}


/***/ }),

/***/ "./client/src/bootstrapper.ts":
/*!************************************!*\
  !*** ./client/src/bootstrapper.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "init": () => (/* binding */ init)
/* harmony export */ });
/* harmony import */ var _home__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./home */ "./client/src/home.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store */ "./client/src/store.ts");



async function init() {
    // you can kick off your bootstrapping process here where you may decide to prompt for authentication,
    // gather reference data etc before starting workspace and interacting with it.
    console.log("Initialising the bootstrapper");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_1__.getSettings)();
    let workspaceLoaded = false;
    const setupHome = settings?.bootstrap?.home ?? true;
    const setupStore = settings?.bootstrap?.store ?? true;
    if (setupHome) {
        // only register search logic once workspace is running
        await (0,_home__WEBPACK_IMPORTED_MODULE_0__.register)();
        workspaceLoaded = true;
        await (0,_home__WEBPACK_IMPORTED_MODULE_0__.show)();
    }
    if (setupStore) {
        await (0,_store__WEBPACK_IMPORTED_MODULE_2__.register)();
        if (!workspaceLoaded) {
            await (0,_store__WEBPACK_IMPORTED_MODULE_2__.show)();
        }
    }
    const providerWindow = fin.Window.getCurrentSync();
    await providerWindow.once("close-requested", async (event) => {
        await (0,_store__WEBPACK_IMPORTED_MODULE_2__.deregister)();
        await (0,_home__WEBPACK_IMPORTED_MODULE_0__.deregister)();
        await fin.Platform.getCurrentSync().quit();
    });
}


/***/ }),

/***/ "./client/src/browser.ts":
/*!*******************************!*\
  !*** ./client/src/browser.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deletePage": () => (/* binding */ deletePage),
/* harmony export */   "getPage": () => (/* binding */ getPage),
/* harmony export */   "getPages": () => (/* binding */ getPages),
/* harmony export */   "launchPage": () => (/* binding */ launchPage),
/* harmony export */   "launchView": () => (/* binding */ launchView)
/* harmony export */ });
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);

async function getPage(pageId) {
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    return platform.Storage.getPage(pageId);
}
async function getPages() {
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    return platform.Storage.getPages();
}
async function deletePage(pageId) {
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    return platform.Storage.deletePage(pageId);
}
async function launchPage(page) {
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    return platform.Browser.createWindow({
        workspacePlatform: {
            pages: [page]
        }
    });
}
async function launchView(view, targetIdentity) {
    const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
    let viewOptions;
    if (typeof view === "string") {
        viewOptions = { url: view, target: null };
    }
    else {
        viewOptions = view;
    }
    return platform.createView(viewOptions, targetIdentity);
}


/***/ }),

/***/ "./client/src/home.ts":
/*!****************************!*\
  !*** ./client/src/home.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deregister": () => (/* binding */ deregister),
/* harmony export */   "hide": () => (/* binding */ hide),
/* harmony export */   "register": () => (/* binding */ register),
/* harmony export */   "show": () => (/* binding */ show)
/* harmony export */ });
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apps */ "./client/src/apps.ts");
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./browser */ "./client/src/browser.ts");
/* harmony import */ var _launch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./launch */ "./client/src/launch.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");





const HOME_ACTION_DELETE_PAGE = "Delete Page";
const HOME_ACTION_LAUNCH_PAGE = "Launch Page";
let isHomeRegistered = false;
function getSearchFilters(tags) {
    if (Array.isArray(tags)) {
        const filters = [];
        const uniqueTags = [...new Set(tags.sort())];
        const tagFilter = {
            id: "tags",
            title: "Tags",
            type: _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLIFilterOptionType.MultiSelect,
            options: []
        };
        for (const tag of uniqueTags) {
            if (Array.isArray(tagFilter.options)) {
                tagFilter.options.push({
                    value: tag,
                    isSelected: false
                });
            }
        }
        filters.push(tagFilter);
        return filters;
    }
    return [];
}
function mapAppEntriesToSearchEntries(apps) {
    const appResults = [];
    if (Array.isArray(apps)) {
        for (let i = 0; i < apps.length; i++) {
            const action = { name: "Launch View", hotkey: "enter" };
            const entry = {
                key: apps[i].appId,
                title: apps[i].title,
                data: apps[i]
            };
            if (apps[i].manifestType === "view") {
                entry.label = "View";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "snapshot") {
                entry.label = "Snapshot";
                action.name = "Launch Snapshot";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "manifest") {
                entry.label = "App";
                action.name = "Launch App";
                entry.actions = [action];
            }
            if (apps[i].manifestType === "external") {
                action.name = "Launch Native App";
                entry.actions = [action];
                entry.label = "Native App";
            }
            if (Array.isArray(apps[i].icons) && apps[i].icons.length > 0) {
                entry.icon = apps[i].icons[0].src;
            }
            if (apps[i].description !== undefined) {
                entry.description = apps[i].description;
                entry.shortDescription = apps[i].description;
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.SimpleText;
                entry.templateContent = apps[i].description;
            }
            else {
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.Plain;
            }
            appResults.push(entry);
        }
    }
    return appResults;
}
function mapPageEntriesToSearchEntries(pages) {
    const pageResults = [];
    if (Array.isArray(pages)) {
        for (let i = 0; i < pages.length; i++) {
            const entry = {
                key: pages[i].pageId,
                title: pages[i].title,
                label: "Page",
                actions: [
                    { name: HOME_ACTION_DELETE_PAGE, hotkey: "CmdOrCtrl+Shift+D" },
                    { name: HOME_ACTION_LAUNCH_PAGE, hotkey: "Enter" }
                ],
                data: { tags: ["page"], pageId: pages[i].pageId }
            };
            if (pages[i].description !== undefined) {
                entry.description = pages[i].description;
                entry.shortDescription = pages[i].description;
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.SimpleText;
                entry.templateContent = pages[i].description;
            }
            else {
                entry.template = _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.CLITemplate.Plain;
            }
            pageResults.push(entry);
        }
    }
    return pageResults;
}
async function getResults(query, queryMinLength = 3, queryAgainst = ["title"], filters) {
    const apps = await (0,_apps__WEBPACK_IMPORTED_MODULE_1__.getApps)();
    const pages = await (0,_browser__WEBPACK_IMPORTED_MODULE_2__.getPages)();
    const tags = [];
    const appSearchEntries = mapAppEntriesToSearchEntries(apps);
    const pageSearchEntries = mapPageEntriesToSearchEntries(pages);
    const initialResults = [...appSearchEntries, ...pageSearchEntries];
    if (initialResults.length > 0) {
        const finalResults = initialResults.filter((entry) => {
            let textMatchFound = true;
            let filterMatchFound = true;
            if (query !== undefined && query !== null && query.length >= queryMinLength) {
                textMatchFound = queryAgainst.some((target) => {
                    const path = target.split(".");
                    if (path.length === 1) {
                        const targetValue = entry[path[0]];
                        if (targetValue !== undefined && targetValue !== null && typeof targetValue === "string") {
                            return targetValue.toLowerCase().includes(query);
                        }
                    }
                    else if (path.length === 2) {
                        const targetEntry = entry[path[0]];
                        let targetValue;
                        if (targetEntry !== undefined && targetEntry !== null) {
                            targetValue = targetEntry[path[1]];
                        }
                        if (targetValue !== undefined && targetValue !== null && typeof targetValue === "string") {
                            return targetValue.toLowerCase().includes(query);
                        }
                        if (targetValue !== undefined && targetValue !== null && Array.isArray(targetValue)) {
                            if (targetValue.length > 0 &&
                                typeof targetValue[0] === "string" &&
                                targetValue.some((target2) => target2.toLowerCase().startsWith(query))) {
                                return true;
                            }
                            console.warn(`Manifest configuration for search specified a queryAgainst target that is an array but not an array of strings. Only string values and arrays are supported: ${targetEntry}`);
                        }
                    }
                    else {
                        console.warn("The manifest configuration for search has a queryAgainst entry that has a depth greater than 1. You can search for e.g. data.tags if data has tags in it and it is either a string or an array of strings.");
                    }
                    return false;
                });
            }
            if (Array.isArray(filters) && filters.length > 0) {
                filterMatchFound = filters.some((filter) => {
                    if (Array.isArray(filter.options)) {
                        if (entry.data?.tags !== undefined) {
                            return filter.options.every((option) => !option.isSelected || entry.data.tags.includes(option.value));
                        }
                    }
                    else if (filter.options.isSelected && entry.data?.tags !== undefined) {
                        return entry.data?.tags.indexOf(filter.options.value) > -1;
                    }
                    return true;
                });
            }
            if (textMatchFound && Array.isArray(entry.data?.tags)) {
                tags.push(...entry.data.tags);
            }
            return textMatchFound && filterMatchFound;
        });
        const response = {
            results: finalResults,
            context: {
                filters: getSearchFilters(tags)
            }
        };
        return response;
    }
    return {
        results: []
    };
}
async function register() {
    console.log("Initialising home.");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_4__.getSettings)();
    if (settings.homeProvider === undefined ||
        settings.homeProvider.id === undefined ||
        settings.homeProvider.title === undefined) {
        console.warn("homeProvider: not configured in the customSettings of your manifest correctly. Ensure you have the homeProvider object defined in customSettings with the following defined: id, title");
        return;
    }
    const queryMinLength = settings?.homeProvider?.queryMinLength || 3;
    const queryAgainst = settings?.homeProvider?.queryAgainst;
    let lastResponse;
    const onUserInput = async (request, response) => {
        const query = request.query.toLowerCase();
        if (query.startsWith("/")) {
            return { results: [] };
        }
        const filters = request?.context?.selectedFilters;
        if (lastResponse !== undefined) {
            lastResponse.close();
        }
        lastResponse = response;
        lastResponse.open();
        const results = await getResults(query, queryMinLength, queryAgainst, filters);
        return results;
    };
    const onSelection = async (result) => {
        if (result.data !== undefined) {
            const data = result.data;
            if (data.pageId !== undefined) {
                if (result.action.name === HOME_ACTION_DELETE_PAGE) {
                    await (0,_browser__WEBPACK_IMPORTED_MODULE_2__.deletePage)(data.pageId);
                    if (lastResponse !== undefined && lastResponse !== null) {
                        lastResponse.revoke(result.key);
                    }
                }
                else {
                    const pageToLaunch = await (0,_browser__WEBPACK_IMPORTED_MODULE_2__.getPage)(data.pageId);
                    await (0,_browser__WEBPACK_IMPORTED_MODULE_2__.launchPage)(pageToLaunch);
                }
            }
            else {
                await (0,_launch__WEBPACK_IMPORTED_MODULE_3__.launch)(data);
            }
        }
        else {
            console.warn("Unable to execute result without data being passed");
        }
    };
    const cliProvider = {
        title: settings.homeProvider.title,
        id: settings.homeProvider.id,
        icon: settings.homeProvider.icon,
        onUserInput,
        onResultDispatch: onSelection
    };
    await _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.register(cliProvider);
    isHomeRegistered = true;
    console.log("Home configured.");
}
async function show() {
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.show();
}
async function hide() {
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.hide();
}
async function deregister() {
    if (isHomeRegistered) {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_4__.getSettings)();
        return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Home.deregister(settings.homeProvider.id);
    }
    console.warn("Unable to deregister home as there is an indication it was never registered");
}


/***/ }),

/***/ "./client/src/interopbroker.ts":
/*!*************************************!*\
  !*** ./client/src/interopbroker.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "interopOverride": () => (/* binding */ interopOverride)
/* harmony export */ });
/* harmony import */ var _apps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apps */ "./client/src/apps.ts");
/* harmony import */ var _launch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./launch */ "./client/src/launch.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");



const NO_APPS_FOUND = "NoAppsFound";
const RESOLVER_TIMEOUT = "ResolverTimeout";
function interopOverride(InteropBroker, provider, options, ...args) {
    class InteropOverride extends InteropBroker {
        async launchAppWithIntent(app, intent) {
            console.log("Launching app with intent.");
            if (app.manifestType !== "view" &&
                app.manifestType !== "inline-view" &&
                app.manifestType !== "snapshot") {
                // optional logic show a prompt to the user to let them know
                console.warn("Unable to raise intent against app as only view/snapshot based apps are supported.");
                return null;
            }
            if (app.manifestType === "view" || app.manifestType === "inline-view") {
                console.log(`The supporting app is a view (${app.manifestType})`);
                const identity = await (0,_launch__WEBPACK_IMPORTED_MODULE_1__.launchView)(app);
                if (identity === null) {
                    // optional logic show a prompt to the user to let them know
                    console.warn("Unable to raise intent against view as no identity was returned.");
                    return null;
                }
                await super.setIntentTarget(intent, identity);
            }
            if (app.manifestType === "snapshot") {
                console.log("The supporting app is a view.");
                const identities = await (0,_launch__WEBPACK_IMPORTED_MODULE_1__.launchSnapshot)(app);
                if (identities === null) {
                    // optional logic show a prompt to the user to let them know
                    console.warn("Unable to raise intent against target as no identity was returned.");
                    return null;
                }
                for (let i = 0; i < identities.length; i++) {
                    await super.setIntentTarget(intent, identities[i]);
                }
            }
            return {
                source: app.appId,
                version: app.version
            };
        }
        async getTargetIdentity(appId) {
            if (appId === undefined || appId === null) {
                return;
            }
            const passedIdentity = appId.split("@");
            const name = passedIdentity[0];
            let uuid = fin.me.identity.uuid;
            if (passedIdentity.length === 2) {
                uuid = passedIdentity[1];
            }
            const resolvedIdentity = { uuid, name };
            try {
                const targetView = await fin.View.wrap({ uuid, name });
                await targetView.getInfo();
                // passed identity found
                return resolvedIdentity;
            }
            catch {
                // passed identity does not exist
            }
        }
        async launchAppPicker(launchOptions) {
            // show menu
            // launch a new window and optionally pass the available intents as customData.apps as part of the window options
            // the window can then use raiseIntent against a specific app (the selected one). This is a very basic example.
            const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_2__.getSettings)();
            const height = settings?.platformProvider?.intentPicker?.height || 400;
            const width = settings?.platformProvider?.intentPicker?.width || 400;
            // this logic runs in the provider so we are using it as a way of determining the root (so it works with root hosting and subdirectory based hosting if a url is not provided)
            const url = settings?.platformProvider?.intentPicker.url ||
                window.location.href.replace("platform/provider.html", "common/windows/intents/picker.html");
            const winOption = {
                name: "intent-picker",
                includeInSnapshot: false,
                fdc3InteropApi: "1.2",
                defaultWidth: width,
                defaultHeight: height,
                showTaskbarIcon: false,
                saveWindowState: false,
                defaultCentered: true,
                customData: {
                    apps: launchOptions.apps,
                    intent: launchOptions.intent,
                    intents: launchOptions.intents
                },
                url,
                frame: false,
                autoShow: true,
                alwaysOnTop: true
            };
            const win = await fin.Window.create(winOption);
            const webWindow = win.getWebWindow();
            try {
                // eslint-disable-next-line @typescript-eslint/dot-notation
                const selectedAppId = await webWindow["getIntentSelection"]();
                return selectedAppId;
            }
            catch {
                console.error("App for intent not selected/launched.", launchOptions.intent);
                return null;
            }
        }
        async isConnectionAuthorized(id, payload) {
            console.log("Interop connection being made by the following identity with payload:", id, payload);
            // perform connection validation checks here if required and return false if it shouldn't be permissioned.
            return true;
        }
        async isActionAuthorized(action, payload, identity) {
            console.log("Interop Broker is action authorized:", action, payload, identity);
            // perform check here if you wish and return true/false accordingly
            return true;
        }
        async handleInfoForIntentsByContext(context, clientIdentity) {
            const intents = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getIntentsByContext)(context.type);
            if (intents.length === 0) {
                throw new Error(NO_APPS_FOUND);
            }
            const mappedIntents = intents.map((entry) => ({
                intent: entry.intent,
                apps: entry.apps.map((app) => ({
                    name: app.appId,
                    appId: app.appId,
                    title: app.title
                }))
            }));
            return mappedIntents;
        }
        async handleInfoForIntent(intentOptions, clientIdentity) {
            const result = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getIntent)(intentOptions.name, intentOptions.context?.type);
            if (result === null) {
                throw new Error(NO_APPS_FOUND);
            }
            const response = {
                intent: result.intent,
                apps: result.apps.map((app) => {
                    const appEntry = {
                        name: app.appId,
                        appId: app.appId,
                        title: app.title
                    };
                    return appEntry;
                })
            };
            return response;
        }
        async handleFiredIntentForContext(contextForIntent, clientIdentity) {
            const availableIntents = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getIntentsByContext)(contextForIntent.type);
            if (availableIntents.length === 0) {
                throw new Error(NO_APPS_FOUND);
            }
            const intent = {
                context: contextForIntent,
                name: undefined,
                displayName: undefined
            };
            let targetApp;
            let targetAppIntent;
            let targetAppIntentCount = 0;
            if (contextForIntent.metadata?.target !== undefined) {
                targetApp = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getApp)(contextForIntent.metadata?.target);
            }
            if (targetApp !== undefined && Array.isArray(targetApp.intents)) {
                for (let i = 0; i < targetApp.intents.length; i++) {
                    targetAppIntent = targetApp.intents[i];
                    if (Array.isArray(targetAppIntent.contexts) &&
                        targetAppIntent.contexts.includes(contextForIntent.type)) {
                        targetAppIntentCount++;
                    }
                }
            }
            if (targetApp !== undefined && targetAppIntent !== undefined && targetAppIntentCount === 1) {
                // a preferred name for an app was given with the context object
                // the app existed and it supported the context type and there was only one intent that supported
                // that context type. Launch the app with that intent otherwise present the user with a list of
                // everything that supports that context type
                intent.name = targetAppIntent.name;
                intent.displayName = targetAppIntent.name;
                const intentResolver = await this.launchAppWithIntent(targetApp, intent);
                if (intentResolver === null) {
                    throw new Error(NO_APPS_FOUND);
                }
                return intentResolver;
            }
            if (availableIntents.length === 1) {
                intent.name = availableIntents[0].intent.name;
                intent.displayName = availableIntents[0].intent.name;
                if (availableIntents[0].apps.length === 1) {
                    const intentResolver = await this.launchAppWithIntent(availableIntents[0].apps[0], intent);
                    if (intentResolver === null) {
                        throw new Error(NO_APPS_FOUND);
                    }
                    return intentResolver;
                }
                if (availableIntents[0].apps.length > 1) {
                    try {
                        const userSelection = await this.launchAppPicker({
                            apps: availableIntents[0].apps,
                            intent
                        });
                        const selectedApp = availableIntents[0].apps.find((entry) => entry.appId === userSelection.appId && entry.appId !== undefined);
                        if (selectedApp !== null && selectedApp !== undefined) {
                            const intentResolver = await this.launchAppWithIntent(selectedApp, intent);
                            if (intentResolver === null) {
                                throw new Error(NO_APPS_FOUND);
                            }
                            return intentResolver;
                        }
                        console.error("We were returned a non existent appId to launch with the intent.");
                        throw new Error(NO_APPS_FOUND);
                    }
                    catch {
                        console.error("App for intent by context not selected/launched.", intent);
                        throw new Error(RESOLVER_TIMEOUT);
                    }
                }
            }
            else {
                try {
                    const userSelection = await this.launchAppPicker({
                        intent,
                        intents: availableIntents
                    });
                    const selectedIntent = availableIntents.find((entry) => entry.intent.name === userSelection.intent.name);
                    if (selectedIntent === undefined) {
                        console.error("The user selected an intent but it's name doesn't match the available intents.", userSelection);
                        throw new Error(NO_APPS_FOUND);
                    }
                    const selectedApp = selectedIntent.apps.find((entry) => entry.appId === userSelection.appId && entry.appId !== undefined);
                    if (selectedApp !== null && selectedApp !== undefined) {
                        intent.displayName = userSelection.intent.displayName;
                        intent.name = userSelection.intent.name;
                        const intentResolver = await this.launchAppWithIntent(selectedApp, intent);
                        if (intentResolver === null) {
                            throw new Error(NO_APPS_FOUND);
                        }
                        return intentResolver;
                    }
                    console.error("We were returned a non existent appId to launch with the intent.");
                    throw new Error(NO_APPS_FOUND);
                }
                catch {
                    console.error("App for intent by context not selected/launched.", intent);
                    throw new Error(RESOLVER_TIMEOUT);
                }
            }
        }
        async handleFiredIntent(intent) {
            console.log("Received request for a raised intent:", intent);
            let intentApps = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getAppsByIntent)(intent.name);
            let targetApp;
            if (intent.metadata?.target !== undefined) {
                targetApp = await (0,_apps__WEBPACK_IMPORTED_MODULE_0__.getApp)(intent.metadata.target);
                if (targetApp === undefined) {
                    // check to see if you have been passed a specific identity for a view that should be targetted instead of an app
                    const targetIdentity = await this.getTargetIdentity(intent.metadata?.target);
                    if (targetIdentity !== undefined) {
                        console.log("We were passed a view identity instead of an app entry when raising/firing an intent. We will fire the intent at that as it exists and no app entry exists with that name.:", targetIdentity, intent);
                        await super.setIntentTarget(intent, targetIdentity);
                        return {
                            source: targetIdentity.name
                        };
                    }
                }
            }
            if (intentApps.length === 0) {
                console.log("No apps support this intent.");
                throw new Error(NO_APPS_FOUND);
            }
            if (targetApp !== undefined && intentApps.includes(targetApp)) {
                console.log("Assigning selected application with intent.", intent);
                intentApps = [targetApp];
            }
            if (intentApps.length === 1) {
                // handle single entry
                const intentResolver = await this.launchAppWithIntent(intentApps[0], intent);
                if (intentResolver === null) {
                    throw new Error(NO_APPS_FOUND);
                }
                return intentResolver;
            }
            // show menu
            // launch a new window and optionally pass the available intents as customData.apps as part of the window options
            // the window can then use raiseIntent against a specific app (the selected one). This is a very basic example.
            try {
                const userSelection = await this.launchAppPicker({
                    apps: intentApps,
                    intent
                });
                if (intentApps === undefined) {
                    console.warn("We should have a list of apps to search from.");
                    intentApps = [];
                }
                const selectedApp = intentApps.find((entry) => entry.appId === userSelection.appId && entry.appId !== undefined);
                if (selectedApp !== null && selectedApp !== undefined) {
                    const intentResolver = await this.launchAppWithIntent(selectedApp, intent);
                    if (intentResolver === null) {
                        throw new Error(NO_APPS_FOUND);
                    }
                    return intentResolver;
                }
                console.error("We were returned a non existent appId to launch with the intent.");
                throw new Error(NO_APPS_FOUND);
            }
            catch {
                console.error("App for intent not selected/launched.", intent);
                throw new Error(RESOLVER_TIMEOUT);
            }
        }
    }
    return new InteropOverride(provider, options, ...args);
}


/***/ }),

/***/ "./client/src/launch.ts":
/*!******************************!*\
  !*** ./client/src/launch.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "launch": () => (/* binding */ launch),
/* harmony export */   "launchSnapshot": () => (/* binding */ launchSnapshot),
/* harmony export */   "launchView": () => (/* binding */ launchView)
/* harmony export */ });
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");


async function getViewIdentities(name, uuid) {
    const identity = { uuid, name };
    const win = fin.Window.wrapSync(identity);
    const views = await win.getCurrentViews();
    const viewIdentities = views.map((view) => view.identity);
    await win.setAsForeground();
    return viewIdentities;
}
async function doesViewExist(name, uuid) {
    const view = fin.View.wrapSync({ name, uuid });
    let exists = false;
    try {
        await view.getInfo();
        const viewHost = await view.getCurrentWindow();
        await viewHost.bringToFront();
        exists = true;
    }
    catch {
        exists = false;
    }
    return exists;
}
function findViewNames(layout) {
    const collectedNames = [];
    JSON.stringify(layout, (_, nestedValue) => {
        // check to ensure that we have a name field and that we also have a url field in this object (in case name was added to a random part of the layout)
        if (nestedValue?.name?.length && nestedValue.url !== undefined) {
            collectedNames.push(nestedValue.name);
        }
        return nestedValue;
    });
    return collectedNames;
}
async function launchView(viewApp) {
    if (viewApp === undefined || viewApp === null) {
        console.warn("No app was passed to launchView");
        return null;
    }
    if (viewApp.manifestType !== "view" && viewApp.manifestType !== "inline-view") {
        console.warn("The app passed was not of manifestType view or inline-view.");
        return null;
    }
    let manifest;
    if (viewApp.manifestType === "view") {
        const manifestResponse = await fetch(viewApp.manifest);
        manifest = await manifestResponse.json();
    }
    else {
        // conversion because of manifestType. In most use cases manifest is always a path to an executable or to a manifest file. For views we are demonstrating how it could be used
        // for passing the manifest inline
        manifest = viewApp.manifest;
    }
    const name = manifest.name;
    let identity = { uuid: fin.me.identity.uuid, name };
    const wasNameSpecified = name !== undefined;
    let viewExists = false;
    if (wasNameSpecified) {
        viewExists = await doesViewExist(identity.name, identity.uuid);
    }
    if (!viewExists) {
        try {
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            const createdView = await platform.createView(manifest);
            identity = createdView.identity;
        }
        catch (err) {
            console.error("Error launching view", err);
            return null;
        }
    }
    return identity;
}
async function launchSnapshot(snapshotApp) {
    if (snapshotApp === undefined || snapshotApp === null) {
        console.warn("No app was passed to launchSnapshot");
        return null;
    }
    if (snapshotApp.manifestType !== "snapshot") {
        console.warn("The app passed was not of manifestType snapshot.");
        return null;
    }
    const manifestResponse = await fetch(snapshotApp.manifest);
    const manifest = await manifestResponse.json();
    const windows = manifest.windows;
    const windowsToCreate = [];
    if (Array.isArray(windows)) {
        const windowsToGather = [];
        const viewIds = [];
        for (let i = 0; i < windows.length; i++) {
            const getViewIdsForLayout = findViewNames(windows[i].layout);
            if (getViewIdsForLayout.length === 0) {
                const uuid = window.crypto.randomUUID();
                const name = `internal-generated-window-${uuid}`;
                windows[i].name = name;
                windowsToCreate.push(windows[i]);
                windowsToGather.push(name);
            }
            else {
                // we have views. Grab the first one to validate existence.
                const viewId = getViewIdsForLayout[0];
                for (const entry of getViewIdsForLayout) {
                    viewIds.push({ name: entry, uuid: fin.me.identity.uuid });
                }
                // these views should be readonly and cannot be pulled out of the page or closed
                if (!(await doesViewExist(viewId, fin.me.identity.uuid))) {
                    windowsToCreate.push(windows[i]);
                }
            }
        }
        manifest.windows = windowsToCreate;
        if (windowsToCreate.length > 0) {
            const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
            try {
                await platform.applySnapshot(manifest);
            }
            catch (err) {
                console.error("Error trying to apply snapshot to platform.", err, manifest);
            }
        }
        for (let w = 0; w < windowsToGather.length; w++) {
            const windowViewIds = await getViewIdentities(windowsToGather[w], fin.me.identity.uuid);
            viewIds.push(...windowViewIds);
        }
        return viewIds;
    }
    return null;
}
async function launch(appEntry) {
    console.log("Application launch requested:", appEntry);
    if (appEntry.manifestType === "external") {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_1__.getSettings)();
        const appAssetTag = settings?.appProvider?.appAssetTag ?? "appasset";
        if (appEntry.tags?.includes(appAssetTag)) {
            console.log("Application requested is a native app with a tag of appasset so it is provided by this workspace platform. Managing request via platform and not Workspace.");
            const options = {};
            options.alias = appEntry.manifest;
            options.uuid = appEntry.appId;
            await fin.System.launchExternalProcess(options);
        }
        else {
            console.log("Application requested is a native app. Managing request via platform and not Workspace.");
            const options = {};
            options.path = appEntry.manifest;
            options.uuid = appEntry.appId;
            await fin.System.launchExternalProcess(options);
        }
    }
    else if (appEntry.manifestType === "inline-view") {
        await launchView(appEntry);
    }
    else {
        const platform = (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.getCurrentSync)();
        await platform.launchApp({ app: appEntry });
    }
    console.log("Finished application launch request");
}


/***/ }),

/***/ "./client/src/platform.ts":
/*!********************************!*\
  !*** ./client/src/platform.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "init": () => (/* binding */ init)
/* harmony export */ });
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace-platform */ "../../node_modules/@openfin/workspace-platform/index.js");
/* harmony import */ var _openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _interopbroker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interopbroker */ "./client/src/interopbroker.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");



async function init() {
    console.log("Initialising platform");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_2__.getSettings)();
    const browser = {};
    if (settings.browserProvider !== undefined) {
        browser.defaultWindowOptions = {
            icon: settings.browserProvider.windowOptions?.icon,
            workspacePlatform: {
                pages: null,
                title: settings.browserProvider.windowOptions?.title,
                favicon: settings.browserProvider.windowOptions?.icon,
                newTabUrl: settings.browserProvider.windowOptions?.newTabUrl,
                newPageUrl: settings.browserProvider.windowOptions?.newPageUrl
            }
        };
        // Fix this type overload when openfin-adapter references are removed from WS
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        browser.interopOverride = _interopbroker__WEBPACK_IMPORTED_MODULE_1__.interopOverride;
    }
    console.log("Specifying following browser options:", browser);
    await (0,_openfin_workspace_platform__WEBPACK_IMPORTED_MODULE_0__.init)({
        browser,
        theme: (0,_settings__WEBPACK_IMPORTED_MODULE_2__.validateThemes)(settings?.themeProvider?.themes)
    });
}


/***/ }),

/***/ "./client/src/settings.ts":
/*!********************************!*\
  !*** ./client/src/settings.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSettings": () => (/* binding */ getSettings),
/* harmony export */   "validateThemes": () => (/* binding */ validateThemes)
/* harmony export */ });
let settings;
async function getConfiguredSettings() {
    const app = await fin.Application.getCurrent();
    const manifest = await app.getManifest();
    if (manifest.customSettings !== undefined) {
        settings = manifest.customSettings;
    }
    else {
        settings = {};
    }
    return settings;
}
async function getSettings() {
    if (settings === undefined) {
        settings = await getConfiguredSettings();
    }
    return settings;
}
function validatePalette(themePalette, themeLabel) {
    const palette = {};
    const keys = Object.keys(themePalette);
    for (const key of keys) {
        if (themePalette[key] !== undefined &&
            themePalette[key] !== null &&
            themePalette[key].trim().length > 0) {
            palette[key] = themePalette[key];
        }
    }
    const brandPrimaryKey = "brandPrimary";
    const brandPrimaryValue = "#504CFF";
    const brandSecondaryKey = "brandSecondary";
    const brandSecondaryValue = "#383A40";
    const backgroundPrimaryKey = "backgroundPrimary";
    const backgroundPrimaryValue = "#111214";
    if (palette[brandPrimaryKey] === undefined) {
        console.warn(`Theme: ${themeLabel} : ${brandPrimaryKey} not specified (it is required if specifying other theme palette settings). Providing default of: ${brandPrimaryValue}`);
        palette[brandPrimaryKey] = brandPrimaryValue;
    }
    if (palette[brandSecondaryKey] === undefined) {
        console.warn(`Theme: ${themeLabel} : ${brandSecondaryKey} not specified (it is required if specifying other theme palette settings). Providing default of: ${brandSecondaryValue}`);
        palette[brandSecondaryKey] = brandSecondaryValue;
    }
    if (palette[backgroundPrimaryKey] === undefined) {
        console.warn(`Theme: ${themeLabel} : ${backgroundPrimaryKey} not specified (it is required if specifying other theme palette settings). Providing default of: ${backgroundPrimaryValue}`);
        palette[backgroundPrimaryKey] = backgroundPrimaryValue;
    }
    return palette;
}
function validateThemes(themes) {
    const validatedThemes = [];
    if (Array.isArray(themes)) {
        for (let i = 0; i < themes.length; i++) {
            const themeToValidate = themes[i];
            const palette = validatePalette(themeToValidate.palette, themeToValidate.label);
            if (palette !== null) {
                themeToValidate.palette = palette;
            }
            else {
                // don't pass an empty object as there are no theme properties
                themeToValidate.palette = undefined;
            }
            validatedThemes.push(themeToValidate);
        }
    }
    return validatedThemes;
}


/***/ }),

/***/ "./client/src/store.ts":
/*!*****************************!*\
  !*** ./client/src/store.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deregister": () => (/* binding */ deregister),
/* harmony export */   "hide": () => (/* binding */ hide),
/* harmony export */   "register": () => (/* binding */ register),
/* harmony export */   "show": () => (/* binding */ show)
/* harmony export */ });
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apps */ "./client/src/apps.ts");
/* harmony import */ var _launch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./launch */ "./client/src/launch.ts");
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings */ "./client/src/settings.ts");




let isStoreRegistered = false;
async function register() {
    console.log("Initialising the storefront provider.");
    const provider = await getStoreProvider();
    if (provider !== null) {
        try {
            await _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Storefront.register(provider);
            isStoreRegistered = true;
            console.log("Storefront provider initialised.");
        }
        catch (err) {
            console.error("An error was encountered while trying to register the content store provider", err);
        }
    }
}
async function deregister() {
    if (isStoreRegistered) {
        const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_3__.getSettings)();
        await _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Storefront.deregister(settings.storefrontProvider.id);
    }
    else {
        console.warn("Unable to call store deregister as there is an indication it was never registered successfully.");
    }
}
async function show() {
    console.log("Showing the store.");
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Storefront.show();
}
async function hide() {
    console.log("Hiding the store.");
    return _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.Storefront.hide();
}
/**
 * This function is used when a navigation item or section hasn't been configured with an ID. This is to simplify configuration for this demo.
 * In a real application you would need an idempotent and unique ID (think GUID) that doesn't change for that navigation item/section regardless of how
 * many times it is regenerated (e.g. more items can be added to the item/section but the ID stays the same).
 * As you navigate around the store this ID is used as a route. So if a user clicks on a link, navigates to a new page and the re-requested navigation item has
 * a different ID then the store will not be able to find a match and it won't be able to render the navigation item.
 * A real application would not use this approach (as an update to the tag list would result in a new ID which would fail if the config was fetched from a server and not a manifest)
 */
function getId(title, tags = []) {
    const search = " ";
    const replaceWith = "-";
    let result = title.replaceAll(search, replaceWith);
    result += `-${tags.join("-")}`;
    return result.toLowerCase();
}
function isStorefrontConfigurationValid(config) {
    const idList = [];
    let hasDuplicateIds = false;
    if (config === undefined ||
        config.storefrontProvider === undefined ||
        config.storefrontProvider.id === undefined ||
        config.storefrontProvider.title === undefined ||
        (config.storefrontProvider.footer === undefined &&
            config.storefrontProvider.landingPage !== undefined &&
            config.storefrontProvider.landingPage.topRow !== undefined &&
            config.storefrontProvider.landingPage.middleRow !== undefined &&
            config.storefrontProvider.landingPage.bottomRow !== undefined &&
            config.storefrontProvider.navigation !== undefined)) {
        console.error("StorefrontProvider is not correctly configured in the customSettings of this manifest. You must ensure that storefrontProvider is defined, that it has an id and title and that the footer, landingPage (top row, middle row and bottom row) and navigation sections have been defined.");
        return false;
    }
    const validateId = (id, namespace, warning) => {
        if (id === undefined) {
            console.warn(`${namespace}: ${warning}`);
        }
        else if (idList.includes(id)) {
            hasDuplicateIds = true;
            console.error(`${namespace}: The id is used in more than one place. Please have a unique and idempotent id: ${id}`);
        }
        else {
            idList.push(id);
        }
    };
    const warningMessage = "The id is not defined. This demo will generate an id based on title but you should have a unique and idempotent id when building your own store.";
    console.log("Validating settings storefrontProvider navigation config");
    const navigation = config.storefrontProvider.navigation;
    for (let i = 0; i < navigation.length; i++) {
        validateId(navigation[i].id, `storefrontProvider.navigation[${i}].id`, warningMessage);
        const items = navigation[i].items;
        for (let n = 0; n < items.length; n++) {
            validateId(items[n].id, `storefrontProvider.navigation[${i}].items[${n}].id`, warningMessage);
        }
    }
    console.log("Validating settings storefrontProvider landing page hero config");
    const landingPage = config.storefrontProvider.landingPage;
    if (landingPage?.hero?.cta !== undefined) {
        validateId(landingPage.hero.cta.id, "storefrontProvider.landingPage.hero.cta.id", warningMessage);
    }
    console.log("Validating settings storefrontProvider landing page top row config");
    const topRow = landingPage.topRow;
    if (topRow.items !== undefined) {
        for (let i = 0; i < topRow.items.length; i++) {
            validateId(topRow.items[i].id, `storefrontProvider.landingPage.topRow.items[${i}].id`, warningMessage);
        }
    }
    console.log("Validating settings storefrontProvider landing page bottom row config");
    const bottomRow = landingPage.bottomRow;
    if (bottomRow.items !== undefined) {
        for (let i = 0; i < bottomRow.items.length; i++) {
            validateId(bottomRow.items[i].id, `storefrontProvider.landingPage.bottomRow.items[${i}].id`, warningMessage);
        }
    }
    console.log("Validating ids, checking for duplicate ids.");
    if (hasDuplicateIds) {
        console.error("You have defined duplicate ids (please see the other error messages) which could result in strange behaviour (if we are routing by id and you have two or more items that resolve to the same id then it could navigate to something unexpected. Please ensure ids are unique and idempotent.");
        return false;
    }
    return true;
}
async function getStoreProvider() {
    console.log("Getting the store provider.");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_3__.getSettings)();
    if (isStorefrontConfigurationValid(settings)) {
        return {
            id: settings.storefrontProvider.id,
            title: settings.storefrontProvider.title,
            icon: settings.storefrontProvider.icon,
            getNavigation: getNavigation.bind(this),
            getLandingPage: getLandingPage.bind(this),
            getFooter: getFooter.bind(this),
            getApps: _apps__WEBPACK_IMPORTED_MODULE_1__.getApps,
            launchApp: _launch__WEBPACK_IMPORTED_MODULE_2__.launch
        };
    }
    return null;
}
async function getNavigation() {
    console.log("Showing the store navigation.");
    const navigationSectionItemLimit = 5;
    const navigationSectionLimit = 2;
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_3__.getSettings)();
    const navigationSections = [];
    if (settings?.storefrontProvider?.navigation === undefined) {
        return [];
    }
    for (let i = 0; i < settings.storefrontProvider.navigation.length; i++) {
        if (navigationSections.length === navigationSectionLimit) {
            console.log("More than 2 navigation sections defined in StorefrontProvider settings. Only two are taken.");
            break;
        }
        const navigationSection = {
            id: settings.storefrontProvider.navigation[i].id ??
                getId(settings.storefrontProvider.navigation[i].title),
            title: settings.storefrontProvider.navigation[i].title,
            items: (await getNavigationItems(settings.storefrontProvider.navigation[i].items, navigationSectionItemLimit))
        };
        navigationSections.push(navigationSection);
    }
    return navigationSections;
}
async function getLandingPage() {
    console.log("Getting the store landing page.");
    const landingPage = {
        topRow: null,
        middleRow: null,
        bottomRow: null
    };
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_3__.getSettings)();
    const storeFrontDetailedNavigationItemBottomRowLimit = 3;
    const storeFrontDetailedNavigationItemTopRowLimit = 4;
    const middleRowAppLimit = 6;
    if (settings?.storefrontProvider?.landingPage?.hero !== undefined) {
        const hero = settings.storefrontProvider.landingPage.hero;
        const cta = await getNavigationItem(hero.cta.id, hero.cta.title, hero.cta.tags);
        landingPage.hero = {
            title: hero.title,
            image: hero.image,
            description: hero.description,
            cta
        };
    }
    if (settings?.storefrontProvider?.landingPage?.topRow !== undefined) {
        const row = await getLandingPageRow(settings?.storefrontProvider?.landingPage?.topRow, storeFrontDetailedNavigationItemTopRowLimit);
        landingPage.topRow = {
            title: row.title,
            items: row.items
        };
    }
    else {
        console.error("You need to have a topRow defined in your landing page.");
    }
    if (settings?.storefrontProvider?.landingPage?.middleRow !== undefined) {
        const middleRow = settings.storefrontProvider.landingPage.middleRow;
        const middleRowApps = await (0,_apps__WEBPACK_IMPORTED_MODULE_1__.getAppsByTag)(middleRow.tags);
        if (middleRowApps.length > middleRowAppLimit) {
            console.warn(`Too many apps (${middleRowApps.length}) have been returned by the middle row tag definition ${middleRow.tags.join(" ")}. Only ${middleRowAppLimit} will be shown.`);
        }
        const validatedMiddleRowApps = middleRowApps.slice(0, middleRowAppLimit);
        landingPage.middleRow = {
            title: middleRow.title,
            apps: validatedMiddleRowApps
        };
    }
    else {
        console.error("You need to have a middleRow defined in your landing page.");
    }
    if (settings?.storefrontProvider?.landingPage?.bottomRow !== undefined) {
        const row = await getLandingPageRow(settings.storefrontProvider.landingPage.bottomRow, storeFrontDetailedNavigationItemBottomRowLimit);
        landingPage.bottomRow = {
            title: row.title,
            items: row.items
        };
    }
    else {
        console.error("You need to have a bottomRow defined in your landing page.");
    }
    return landingPage;
}
async function getFooter() {
    console.log("Getting the store footer.");
    const settings = await (0,_settings__WEBPACK_IMPORTED_MODULE_3__.getSettings)();
    if (settings?.storefrontProvider?.footer !== undefined) {
        return settings.storefrontProvider.footer;
    }
    console.error("Storefront is being initialised without a footer configured.");
    return null;
}
/**
 * This section generates a navigation item for Storefront based on some configuration.
 * @param id
 * This id should be unique and idempotent and isn't changed regardless of how often the same navigation item is regenerated.
 * The reason for this is because it is used for routing in Storefront. If a user navigated from a link and the id changes when the item
 * is re-requested by storefront then it will not be able to render the contents.
 * @param title
 * @param tags
 * Tags are used as a way of filtering out which apps should be assigned to a StorefrontNavigationItem.
 * This allows apps to be tagged on the server and the store would automatically update the apps assigned to a particular section.
 * @returns StorefrontNavigationItem
 */
async function getNavigationItem(id, title, tags) {
    const navigationItem = {
        id: id ?? getId(title, tags),
        title,
        templateId: _openfin_workspace__WEBPACK_IMPORTED_MODULE_0__.StorefrontTemplate.AppGrid,
        templateData: {
            apps: []
        }
    };
    const apps = await (0,_apps__WEBPACK_IMPORTED_MODULE_1__.getAppsByTag)(tags);
    if (apps !== undefined && apps.length > 0) {
        navigationItem.templateData.apps = apps;
    }
    return navigationItem;
}
async function getNavigationItems(items, limit) {
    const navigationItems = [];
    for (let i = 0; i < items.length; i++) {
        const navigationItem = await getNavigationItem(items[i].id, items[i].title, items[i].tags);
        navigationItems.push(navigationItem);
    }
    if (navigationItems.length > limit) {
        console.warn(`You have defined too many navigations items (${navigationItems.length}). Please limit it to ${limit} as we will only take the first ${limit}`);
    }
    return navigationItems.slice(0, limit);
}
async function getLandingPageRow(definition, limit) {
    const items = [];
    for (let i = 0; i < definition.items.length; i++) {
        const navigationItem = await getNavigationItem(definition.items[i].id, definition.items[i].title, definition.items[i].tags);
        const item = {
            description: definition.items[i].description,
            image: definition.items[i].image,
            ...navigationItem
        };
        items.push(item);
    }
    if (items.length > limit) {
        console.warn(`You have defined too many storefront detailed navigation items (${items.length}). Please keep it to the limit of ${limit} as only the first ${limit} will be returned.`);
    }
    const detailedNavigationItems = items.slice(0, limit);
    return {
        title: definition.title,
        items: detailedNavigationItems
    };
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!********************************!*\
  !*** ./client/src/provider.ts ***!
  \********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bootstrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bootstrapper */ "./client/src/bootstrapper.ts");
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./platform */ "./client/src/platform.ts");


window.addEventListener("DOMContentLoaded", async () => {
    const platform = fin.Platform.getCurrentSync();
    await platform.once("platform-api-ready", async () => (0,_bootstrapper__WEBPACK_IMPORTED_MODULE_0__.init)());
    await (0,_platform__WEBPACK_IMPORTED_MODULE_1__.init)();
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsTUFBTSxxQ0FBcUMsS0FBSyxzQkFBc0IsS0FBSyxvQkFBb0IsQ0FDeEssQ0FBQztLQUNGO0lBRUQsTUFBTSx1QkFBdUIsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUV0RCxPQUFPO1FBQ04sS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLO1FBQ3ZCLEtBQUssRUFBRSx1QkFBdUI7S0FDOUIsQ0FBQztBQUNILENBQUM7Ozs7Ozs7VUMxWUQ7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7Ozs7O0FDTm1EO0FBQ0s7QUFFeEQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLEtBQUssSUFBSSxFQUFFO0lBQ3RELE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDL0MsTUFBTSxRQUFRLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEtBQUssSUFBSSxFQUFFLENBQUMsbURBQVMsRUFBRSxDQUFDLENBQUM7SUFDbkUsTUFBTSwrQ0FBa0IsRUFBRSxDQUFDO0FBQzVCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtL2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1zdXBwb3J0LWNvbnRleHQtYW5kLWludGVudHMvLi4vLi4vbm9kZV9tb2R1bGVzL0BvcGVuZmluL3dvcmtzcGFjZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tc3VwcG9ydC1jb250ZXh0LWFuZC1pbnRlbnRzLy4vY2xpZW50L3NyYy9hcHBzLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1zdXBwb3J0LWNvbnRleHQtYW5kLWludGVudHMvLi9jbGllbnQvc3JjL2Jvb3RzdHJhcHBlci50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tc3VwcG9ydC1jb250ZXh0LWFuZC1pbnRlbnRzLy4vY2xpZW50L3NyYy9icm93c2VyLnRzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1zdXBwb3J0LWNvbnRleHQtYW5kLWludGVudHMvLi9jbGllbnQvc3JjL2hvbWUudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uL2NsaWVudC9zcmMvaW50ZXJvcGJyb2tlci50cyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tc3VwcG9ydC1jb250ZXh0LWFuZC1pbnRlbnRzLy4vY2xpZW50L3NyYy9sYXVuY2gudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uL2NsaWVudC9zcmMvcGxhdGZvcm0udHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uL2NsaWVudC9zcmMvc2V0dGluZ3MudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uL2NsaWVudC9zcmMvc3RvcmUudHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tc3VwcG9ydC1jb250ZXh0LWFuZC1pbnRlbnRzL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1zdXBwb3J0LWNvbnRleHQtYW5kLWludGVudHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1zdXBwb3J0LWNvbnRleHQtYW5kLWludGVudHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0tc3VwcG9ydC1jb250ZXh0LWFuZC1pbnRlbnRzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLXN1cHBvcnQtY29udGV4dC1hbmQtaW50ZW50cy8uL2NsaWVudC9zcmMvcHJvdmlkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgaW5kZXguanMuTElDRU5TRS50eHQgKi9cbigoKT0+e1widXNlIHN0cmljdFwiO3ZhciBlPXs1MjU6ZT0+e3ZhciB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG49T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtmdW5jdGlvbiBvKGUpe2lmKG51bGw9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBPYmplY3QoZSl9ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dHJ5e2lmKCFPYmplY3QuYXNzaWduKXJldHVybiExO3ZhciBlPW5ldyBTdHJpbmcoXCJhYmNcIik7aWYoZVs1XT1cImRlXCIsXCI1XCI9PT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKVswXSlyZXR1cm4hMTtmb3IodmFyIHQ9e30sYT0wO2E8MTA7YSsrKXRbXCJfXCIrU3RyaW5nLmZyb21DaGFyQ29kZShhKV09YTtpZihcIjAxMjM0NTY3ODlcIiE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KSkuam9pbihcIlwiKSlyZXR1cm4hMTt2YXIgbj17fTtyZXR1cm5cImFiY2RlZmdoaWprbG1ub3BxcnN0XCIuc3BsaXQoXCJcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bltlXT1lfSkpLFwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIj09PU9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sbikpLmpvaW4oXCJcIil9Y2F0Y2goZSl7cmV0dXJuITF9fSgpP09iamVjdC5hc3NpZ246ZnVuY3Rpb24oZSxyKXtmb3IodmFyIGkscyxjPW8oZSksZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe2Zvcih2YXIgcCBpbiBpPU9iamVjdChhcmd1bWVudHNbZF0pKWEuY2FsbChpLHApJiYoY1twXT1pW3BdKTtpZih0KXtzPXQoaSk7Zm9yKHZhciBsPTA7bDxzLmxlbmd0aDtsKyspbi5jYWxsKGksc1tsXSkmJihjW3NbbF1dPWlbc1tsXV0pfX1yZXR1cm4gY319LDUzNTooZSx0LGEpPT57dmFyIG49YSg1MjUpLG89NjAxMDMscj02MDEwNjt2YXIgaT02MDEwOSxzPTYwMTEwLGM9NjAxMTI7dmFyIGQ9NjAxMTUscD02MDExNjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5mb3Ipe3ZhciBsPVN5bWJvbC5mb3I7bz1sKFwicmVhY3QuZWxlbWVudFwiKSxyPWwoXCJyZWFjdC5wb3J0YWxcIiksbChcInJlYWN0LmZyYWdtZW50XCIpLGwoXCJyZWFjdC5zdHJpY3RfbW9kZVwiKSxsKFwicmVhY3QucHJvZmlsZXJcIiksaT1sKFwicmVhY3QucHJvdmlkZXJcIikscz1sKFwicmVhY3QuY29udGV4dFwiKSxjPWwoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKSxsKFwicmVhY3Quc3VzcGVuc2VcIiksZD1sKFwicmVhY3QubWVtb1wiKSxwPWwoXCJyZWFjdC5sYXp5XCIpfXZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yO2Z1bmN0aW9uIHcoZSl7Zm9yKHZhciB0PVwiaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9XCIrZSxhPTE7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl0Kz1cIiZhcmdzW109XCIrZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1thXSk7cmV0dXJuXCJNaW5pZmllZCBSZWFjdCBlcnJvciAjXCIrZStcIjsgdmlzaXQgXCIrdCtcIiBmb3IgdGhlIGZ1bGwgbWVzc2FnZSBvciB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgZm9yIGZ1bGwgZXJyb3JzIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuXCJ9dmFyIGY9e2lzTW91bnRlZDpmdW5jdGlvbigpe3JldHVybiExfSxlbnF1ZXVlRm9yY2VVcGRhdGU6ZnVuY3Rpb24oKXt9LGVucXVldWVSZXBsYWNlU3RhdGU6ZnVuY3Rpb24oKXt9LGVucXVldWVTZXRTdGF0ZTpmdW5jdGlvbigpe319LGc9e307ZnVuY3Rpb24geShlLHQsYSl7dGhpcy5wcm9wcz1lLHRoaXMuY29udGV4dD10LHRoaXMucmVmcz1nLHRoaXMudXBkYXRlcj1hfHxmfWZ1bmN0aW9uIGgoKXt9ZnVuY3Rpb24gbShlLHQsYSl7dGhpcy5wcm9wcz1lLHRoaXMuY29udGV4dD10LHRoaXMucmVmcz1nLHRoaXMudXBkYXRlcj1hfHxmfXkucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQ9e30seS5wcm90b3R5cGUuc2V0U3RhdGU9ZnVuY3Rpb24oZSx0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9ZSl0aHJvdyBFcnJvcih3KDg1KSk7dGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLGUsdCxcInNldFN0YXRlXCIpfSx5LnByb3RvdHlwZS5mb3JjZVVwZGF0ZT1mdW5jdGlvbihlKXt0aGlzLnVwZGF0ZXIuZW5xdWV1ZUZvcmNlVXBkYXRlKHRoaXMsZSxcImZvcmNlVXBkYXRlXCIpfSxoLnByb3RvdHlwZT15LnByb3RvdHlwZTt2YXIgdj1tLnByb3RvdHlwZT1uZXcgaDt2LmNvbnN0cnVjdG9yPW0sbih2LHkucHJvdG90eXBlKSx2LmlzUHVyZVJlYWN0Q29tcG9uZW50PSEwO3ZhciBTPXtjdXJyZW50Om51bGx9LFA9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxiPXtrZXk6ITAscmVmOiEwLF9fc2VsZjohMCxfX3NvdXJjZTohMH07ZnVuY3Rpb24gayhlLHQsYSl7dmFyIG4scj17fSxpPW51bGwscz1udWxsO2lmKG51bGwhPXQpZm9yKG4gaW4gdm9pZCAwIT09dC5yZWYmJihzPXQucmVmKSx2b2lkIDAhPT10LmtleSYmKGk9XCJcIit0LmtleSksdClQLmNhbGwodCxuKSYmIWIuaGFzT3duUHJvcGVydHkobikmJihyW25dPXRbbl0pO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGgtMjtpZigxPT09YylyLmNoaWxkcmVuPWE7ZWxzZSBpZigxPGMpe2Zvcih2YXIgZD1BcnJheShjKSxwPTA7cDxjO3ArKylkW3BdPWFyZ3VtZW50c1twKzJdO3IuY2hpbGRyZW49ZH1pZihlJiZlLmRlZmF1bHRQcm9wcylmb3IobiBpbiBjPWUuZGVmYXVsdFByb3BzKXZvaWQgMD09PXJbbl0mJihyW25dPWNbbl0pO3JldHVybnskJHR5cGVvZjpvLHR5cGU6ZSxrZXk6aSxyZWY6cyxwcm9wczpyLF9vd25lcjpTLmN1cnJlbnR9fWZ1bmN0aW9uIFcoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZlLiQkdHlwZW9mPT09b312YXIgQz0vXFwvKy9nO2Z1bmN0aW9uIEkoZSx0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJm51bGwhPWUua2V5P2Z1bmN0aW9uKGUpe3ZhciB0PXtcIj1cIjpcIj0wXCIsXCI6XCI6XCI9MlwifTtyZXR1cm5cIiRcIitlLnJlcGxhY2UoL1s9Ol0vZywoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KSl9KFwiXCIrZS5rZXkpOnQudG9TdHJpbmcoMzYpfWZ1bmN0aW9uIEEoZSx0LGEsbixpKXt2YXIgcz10eXBlb2YgZTtcInVuZGVmaW5lZFwiIT09cyYmXCJib29sZWFuXCIhPT1zfHwoZT1udWxsKTt2YXIgYz0hMTtpZihudWxsPT09ZSljPSEwO2Vsc2Ugc3dpdGNoKHMpe2Nhc2VcInN0cmluZ1wiOmNhc2VcIm51bWJlclwiOmM9ITA7YnJlYWs7Y2FzZVwib2JqZWN0XCI6c3dpdGNoKGUuJCR0eXBlb2Ype2Nhc2UgbzpjYXNlIHI6Yz0hMH19aWYoYylyZXR1cm4gaT1pKGM9ZSksZT1cIlwiPT09bj9cIi5cIitJKGMsMCk6bixBcnJheS5pc0FycmF5KGkpPyhhPVwiXCIsbnVsbCE9ZSYmKGE9ZS5yZXBsYWNlKEMsXCIkJi9cIikrXCIvXCIpLEEoaSx0LGEsXCJcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkpOm51bGwhPWkmJihXKGkpJiYoaT1mdW5jdGlvbihlLHQpe3JldHVybnskJHR5cGVvZjpvLHR5cGU6ZS50eXBlLGtleTp0LHJlZjplLnJlZixwcm9wczplLnByb3BzLF9vd25lcjplLl9vd25lcn19KGksYSsoIWkua2V5fHxjJiZjLmtleT09PWkua2V5P1wiXCI6KFwiXCIraS5rZXkpLnJlcGxhY2UoQyxcIiQmL1wiKStcIi9cIikrZSkpLHQucHVzaChpKSksMTtpZihjPTAsbj1cIlwiPT09bj9cIi5cIjpuK1wiOlwiLEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciBkPTA7ZDxlLmxlbmd0aDtkKyspe3ZhciBwPW4rSShzPWVbZF0sZCk7Yys9QShzLHQsYSxwLGkpfWVsc2UgaWYocD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlP251bGw6XCJmdW5jdGlvblwiPT10eXBlb2YoZT11JiZlW3VdfHxlW1wiQEBpdGVyYXRvclwiXSk/ZTpudWxsfShlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBwKWZvcihlPXAuY2FsbChlKSxkPTA7IShzPWUubmV4dCgpKS5kb25lOyljKz1BKHM9cy52YWx1ZSx0LGEscD1uK0kocyxkKyspLGkpO2Vsc2UgaWYoXCJvYmplY3RcIj09PXMpdGhyb3cgdD1cIlwiK2UsRXJyb3IodygzMSxcIltvYmplY3QgT2JqZWN0XVwiPT09dD9cIm9iamVjdCB3aXRoIGtleXMge1wiK09iamVjdC5rZXlzKGUpLmpvaW4oXCIsIFwiKStcIn1cIjp0KSk7cmV0dXJuIGN9ZnVuY3Rpb24gTShlLHQsYSl7aWYobnVsbD09ZSlyZXR1cm4gZTt2YXIgbj1bXSxvPTA7cmV0dXJuIEEoZSxuLFwiXCIsXCJcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2FsbChhLGUsbysrKX0pKSxufWZ1bmN0aW9uIE8oZSl7aWYoLTE9PT1lLl9zdGF0dXMpe3ZhciB0PWUuX3Jlc3VsdDt0PXQoKSxlLl9zdGF0dXM9MCxlLl9yZXN1bHQ9dCx0LnRoZW4oKGZ1bmN0aW9uKHQpezA9PT1lLl9zdGF0dXMmJih0PXQuZGVmYXVsdCxlLl9zdGF0dXM9MSxlLl9yZXN1bHQ9dCl9KSwoZnVuY3Rpb24odCl7MD09PWUuX3N0YXR1cyYmKGUuX3N0YXR1cz0yLGUuX3Jlc3VsdD10KX0pKX1pZigxPT09ZS5fc3RhdHVzKXJldHVybiBlLl9yZXN1bHQ7dGhyb3cgZS5fcmVzdWx0fXZhciBUPXtjdXJyZW50Om51bGx9O2Z1bmN0aW9uIEUoKXt2YXIgZT1ULmN1cnJlbnQ7aWYobnVsbD09PWUpdGhyb3cgRXJyb3IodygzMjEpKTtyZXR1cm4gZX19LDM3ODooZSx0LGEpPT57YSg1MzUpfX0sdD17fTtmdW5jdGlvbiBhKG4pe3ZhciBvPXRbbl07aWYodm9pZCAwIT09bylyZXR1cm4gby5leHBvcnRzO3ZhciByPXRbbl09e2V4cG9ydHM6e319O3JldHVybiBlW25dKHIsci5leHBvcnRzLGEpLHIuZXhwb3J0c31hLmQ9KGUsdCk9Pntmb3IodmFyIG4gaW4gdClhLm8odCxuKSYmIWEubyhlLG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiEwLGdldDp0W25dfSl9LGEubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCksYS5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgbj17fTsoKCk9Pnt2YXIgZSx0LG8scixpLHMsYyxkO2EucihuKSxhLmQobix7QXBwTWFuaWZlc3RUeXBlOigpPT5jLEJyb3dzZXJCdXR0b25UeXBlOigpPT5nLEN1c3RvbUFjdGlvbkNhbGxlclR5cGU6KCk9PmgsR2xvYmFsQ29udGV4dE1lbnVPcHRpb25UeXBlOigpPT51LFBhZ2VUYWJDb250ZXh0TWVudU9wdGlvblR5cGU6KCk9PncsU2F2ZUJ1dHRvbkNvbnRleHRNZW51T3B0aW9uVHlwZTooKT0+eSxTYXZlTW9kYWxUeXBlOigpPT5tLFZpZXdUYWJNZW51T3B0aW9uVHlwZTooKT0+ZixnZXRDdXJyZW50U3luYzooKT0+RnQsaW5pdDooKT0+SW4sd3JhcFN5bmM6KCk9PlV0fSksZnVuY3Rpb24oZSl7ZS5GZXRjaGluZz1cImZldGNoaW5nXCIsZS5GZXRjaGVkPVwiZmV0Y2hlZFwiLGUuQ29tcGxldGU9XCJjb21wbGV0ZVwifShlfHwoZT17fSkpLGZ1bmN0aW9uKGUpe2UuVXNlckFjdGlvbj1cInVzZXItYWN0aW9uXCIsZS5Gb2N1c0NoYW5nZT1cImZvY3VzLWNoYW5nZVwiLGUuUmVsb2FkPVwicmVsb2FkXCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZS5BY3RpdmU9XCJhY3RpdmVcIixlLkRlZmF1bHQ9XCJkZWZhdWx0XCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5TdWdnZXN0aW9uPVwic3VnZ2VzdGlvblwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuQ29udGFjdD1cIkNvbnRhY3RcIixlLkN1c3RvbT1cIkN1c3RvbVwiLGUuTGlzdD1cIkxpc3RcIixlLlBsYWluPVwiUGxhaW5cIixlLlNpbXBsZVRleHQ9XCJTaW1wbGVUZXh0XCIsZS5Mb2FkaW5nPVwiTG9hZGluZ1wiLGUuRXJyb3I9XCJFcnJvclwifShpfHwoaT17fSkpLGZ1bmN0aW9uKGUpe2UuTXVsdGlTZWxlY3Q9XCJNdWx0aVNlbGVjdFwifShzfHwocz17fSkpLGZ1bmN0aW9uKGUpe2UuU25hcHNob3Q9XCJzbmFwc2hvdFwiLGUuTWFuaWZlc3Q9XCJtYW5pZmVzdFwiLGUuVmlldz1cInZpZXdcIixlLkV4dGVybmFsPVwiZXh0ZXJuYWxcIn0oY3x8KGM9e30pKSxmdW5jdGlvbihlKXtlLkxhbmRpbmdQYWdlPVwibGFuZGluZ1BhZ2VcIixlLkFwcEdyaWQ9XCJhcHBHcmlkXCJ9KGR8fChkPXt9KSk7dmFyIHAsbCx1LHcsZixnLHksaCxtLHY7IWZ1bmN0aW9uKGUpe2UuUHJpbWFyeT1cInByaW1hcnlcIixlLlNlY29uZGFyeT1cInNlY29uZGFyeVwiLGUuVGV4dE9ubHk9XCJ0ZXh0T25seVwifShwfHwocD17fSkpLGZ1bmN0aW9uKGUpe2UuQWN0aW9uQnV0dG9uPVwiQWN0aW9uQnV0dG9uXCIsZS5Ecm9wZG93bkJ1dHRvbj1cIkRyb3Bkb3duQnV0dG9uXCJ9KGx8fChsPXt9KSksZnVuY3Rpb24oZSl7ZS5OZXdXaW5kb3c9XCJOZXdXaW5kb3dcIixlLk5ld1BhZ2U9XCJOZXdQYWdlXCIsZS5TYXZlUGFnZT1cIlNhdmVQYWdlXCIsZS5TYXZlUGFnZUFzPVwiU2F2ZVBhZ2VBc1wiLGUuQ2xvc2VXaW5kb3c9XCJDbG9zZVdpbmRvd1wiLGUuUmVzdG9yZUNoYW5nZXM9XCJSZXN0b3JlQ2hhbmdlc1wiLGUuU2F2ZVdvcmtzcGFjZT1cIlNhdmVXb3Jrc3BhY2VcIixlLlNhdmVXb3Jrc3BhY2VBcz1cIlNhdmVXb3Jrc3BhY2VBc1wiLGUuUmVuYW1lV29ya3NwYWNlPVwiUmVuYW1lV29ya3NwYWNlXCIsZS5Td2l0Y2hXb3Jrc3BhY2U9XCJTd2l0Y2hXb3Jrc3BhY2VcIixlLkRlbGV0ZVdvcmtzcGFjZT1cIkRlbGV0ZVdvcmtzcGFjZVwiLGUuT3BlblN0b3JlZnJvbnQ9XCJPcGVuU3RvcmVmcm9udFwiLGUuUXVpdD1cIlF1aXRcIixlLkN1c3RvbT1cIkN1c3RvbVwifSh1fHwodT17fSkpLGZ1bmN0aW9uKGUpe2UuQ2xvc2U9XCJDbG9zZVwiLGUuRHVwbGljYXRlPVwiRHVwbGljYXRlXCIsZS5SZW5hbWU9XCJSZW5hbWVcIixlLlNhdmU9XCJTYXZlXCIsZS5TYXZlQXM9XCJTYXZlIEFzXCIsZS5DdXN0b209XCJDdXN0b21cIn0od3x8KHc9e30pKSxmdW5jdGlvbihlKXtlLk5ld1ZpZXc9XCJOZXdWaWV3XCIsZS5EdXBsaWNhdGVWaWV3cz1cIkR1cGxpY2F0ZVZpZXdcIixlLk9wZW5XaXRoRGVmYXVsdEJyb3dzZXI9XCJPcGVuV2l0aERlZmF1bHRCcm93c2VyXCIsZS5SZWxvYWRWaWV3cz1cIlJlbG9hZFRhYlwiLGUuQ2xvc2VWaWV3cz1cIkNsb3NlVGFiXCIsZS5BZGRUb0NoYW5uZWw9XCJBZGRUb0NoYW5uZWxcIixlLlJlbW92ZUZyb21DaGFubmVsPVwiUmVtb3ZlRnJvbUNoYW5uZWxcIixlLkN1c3RvbT1cIkN1c3RvbVwifShmfHwoZj17fSkpLGZ1bmN0aW9uKGUpe2UuU2hvd0hpZGVUYWJzPVwiU2hvd0hpZGVUYWJzXCIsZS5Db2xvckxpbmtpbmc9XCJDb2xvckxpbmtpbmdcIixlLlByZXNldExheW91dHM9XCJQcmVzZXRMYXlvdXRzXCIsZS5Mb2NrVW5sb2NrUGFnZT1cIkxvY2tVbmxvY2tQYWdlXCIsZS5TYXZlTWVudT1cIlNhdmVNZW51XCIsZS5TYXZlUGFnZT1cIlNhdmVQYWdlXCIsZS5NaW5pbWlzZT1cIk1pbmltaXNlXCIsZS5NYXhpbWlzZT1cIk1heGltaXNlXCIsZS5DbG9zZT1cIkNsb3NlXCIsZS5DdXN0b209XCJDdXN0b21cIn0oZ3x8KGc9e30pKSxmdW5jdGlvbihlKXtlLlNhdmVQYWdlPVwiU2F2ZVBhZ2VcIixlLlNhdmVXb3Jrc3BhY2U9XCJTYXZlV29ya3NwYWNlXCIsZS5TYXZlUGFnZUFzPVwiU2F2ZVBhZ2VBc1wiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5DdXN0b209XCJDdXN0b21cIn0oeXx8KHk9e30pKSxmdW5jdGlvbihlKXtlLkN1c3RvbUJ1dHRvbj1cIkN1c3RvbUJ1dHRvblwiLGUuQ3VzdG9tRHJvcGRvd25JdGVtPVwiQ3VzdG9tRHJvcGRvd25JdGVtXCIsZS5HbG9iYWxDb250ZXh0TWVudT1cIkdsb2JhbENvbnRleHRNZW51XCIsZS5WaWV3VGFiQ29udGV4dE1lbnU9XCJWaWV3VGFiQ29udGV4dE1lbnVcIixlLlBhZ2VUYWJDb250ZXh0TWVudT1cIlBhZ2VUYWJDb250ZXh0TWVudVwiLGUuU2F2ZUJ1dHRvbkNvbnRleHRNZW51PVwiU2F2ZUJ1dHRvbkNvbnRleHRNZW51XCIsZS5BUEk9XCJBUElcIn0oaHx8KGg9e30pKSxmdW5jdGlvbihlKXtlLlNBVkVfUEFHRT1cIlNBVkVfUEFHRVwiLGUuU0FWRV9XT1JLU1BBQ0U9XCJTQVZFX1dPUktTUEFDRVwiLGUuU0FWRV9QQUdFX0FTPVwiU0FWRV9QQUdFX0FTXCIsZS5TQVZFX1dPUktTUEFDRV9BUz1cIlNBVkVfV09SS1NQQUNFX0FTXCIsZS5SRU5BTUVfUEFHRT1cIlJFTkFNRV9QQUdFXCIsZS5SRU5BTUVfV09SS1NQQUNFPVwiUkVOQU1FX1dPUktTUEFDRVwifShtfHwobT17fSkpLGZ1bmN0aW9uKGUpe2UuTG9jYWw9XCJsb2NhbFwiLGUuRGV2PVwiZGV2XCIsZS5TdGFnaW5nPVwic3RhZ2luZ1wiLGUuUHJvZD1cInByb2RcIn0odnx8KHY9e30pKTtjb25zdCBTPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4sUD0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHByb2Nlc3N8fHByb2Nlc3MuZW52Py5KRVNUX1dPUktFUl9JRCxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSxiPVAmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBpbmRleGVkREIsaz1QP3dpbmRvdy5vcmlnaW46di5Mb2NhbCxXPVMmJmZpbi5tZS51dWlkLEM9UyYmZmluLm1lLm5hbWUsST1TJiZmaW4ubWUuZW50aXR5VHlwZSxBPSh2LkxvY2FsLHYuRGV2LHYuU3RhZ2luZyx2LlByb2QsZT0+ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik/ZTprK2UpLE09KEEoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuMTFcIiksQShcImh0dHBzOi8vY2RuLm9wZW5maW4uY28vd29ya3NwYWNlLzkuMC4xMVwiKSksTz0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmQShXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZBKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiMjYuMTAyLjcxLjdcIiksVD1cIjkuMC4xMVwiO3ZhciBFLEIseDshZnVuY3Rpb24oZSl7ZS5Xb3Jrc3BhY2U9XCJvcGVuZmluLWJyb3dzZXJcIn0oRXx8KEU9e30pKSxmdW5jdGlvbihlKXtlLlJ1blJlcXVlc3RlZD1cInJ1bi1yZXF1ZXN0ZWRcIixlLldpbmRvd09wdGlvbnNDaGFuZ2VkPVwid2luZG93LW9wdGlvbnMtY2hhbmdlZFwiLGUuV2luZG93Q2xvc2VkPVwid2luZG93LWNsb3NlZFwiLGUuV2luZG93Q3JlYXRlZD1cIndpbmRvdy1jcmVhdGVkXCJ9KEJ8fChCPXt9KSksZnVuY3Rpb24oZSl7ZS5GaW5Qcm90b2NvbD1cImZpbi1wcm90b2NvbFwifSh4fHwoeD17fSkpO2NvbnN0IFI9e3V1aWQ6V30sXz0oRS5Xb3Jrc3BhY2UsZT0+e2lmKCFTKXRocm93IG5ldyBFcnJvcihcImdldEFwcGxpY2F0aW9uIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uIE9wZW5GaW4gZW52LiBBdm9pZCB1c2luZyB0aGlzIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKGUpfSksTD0oKT0+XyhSKTt2YXIgVixELFU7IWZ1bmN0aW9uKGUpe2UuSG9tZT1cIm9wZW5maW4taG9tZVwiLGUuRG9jaz1cIm9wZW5maW4tZG9ja1wiLGUuU3RvcmVmcm9udD1cIm9wZW5maW4tc3RvcmVmcm9udFwiLGUuSG9tZUludGVybmFsPVwib3BlbmZpbi1ob21lLWludGVybmFsXCIsZS5Ccm93c2VyTWVudT1cIm9wZW5maW4tYnJvd3Nlci1tZW51XCIsZS5Ccm93c2VySW5kaWNhdG9yPVwib3BlbmZpbi1icm93c2VyLWluZGljYXRvclwiLGUuQnJvd3NlcldpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC13aW5kb3dcIn0oVnx8KFY9e30pKSxmdW5jdGlvbihlKXtlLlNob3duPVwic2hvd25cIixlLkJvdW5kc0NoYW5nZWQ9XCJib3VuZHMtY2hhbmdlZFwiLGUuTGF5b3V0UmVhZHk9XCJsYXlvdXQtcmVhZHlcIixlLkVuZFVzZXJCb3VuZHNDaGFuZ2luZz1cImVuZC11c2VyLWJvdW5kcy1jaGFuZ2luZ1wiLGUuQmx1cnJlZD1cImJsdXJyZWRcIixlLkNsb3NlZD1cImNsb3NlZFwiLGUuQ2xvc2VSZXF1ZXN0ZWQ9XCJjbG9zZS1yZXF1ZXN0ZWRcIixlLkZvY3VzZWQ9XCJmb2N1c2VkXCIsZS5TaG93UmVxdWVzdGVkPVwic2hvdy1yZXF1ZXN0ZWRcIixlLlZpZXdDcmFzaGVkPVwidmlldy1jcmFzaGVkXCIsZS5WaWV3QXR0YWNoZWQ9XCJ2aWV3LWF0dGFjaGVkXCIsZS5WaWV3RGV0YWNoZWQ9XCJ2aWV3LWRldGFjaGVkXCIsZS5WaWV3UGFnZVRpdGxlVXBkYXRlZD1cInZpZXctcGFnZS10aXRsZS11cGRhdGVkXCIsZS5WaWV3RGVzdHJveWVkPVwidmlldy1kZXN0cm95ZWRcIixlLk9wdGlvbnNDaGFuZ2VkPVwib3B0aW9ucy1jaGFuZ2VkXCJ9KER8fChEPXt9KSksZnVuY3Rpb24oZSl7ZS5CZWZvcmVVbmxvYWQ9XCJiZWZvcmV1bmxvYWRcIn0oVXx8KFU9e30pKTtmdW5jdGlvbiBGKGUpe2lmKCFTKXRocm93IG5ldyBFcnJvcihcImdldE9GV2luZG93IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKGUpfWNvbnN0IEc9e25hbWU6Qyx1dWlkOld9O2Z1bmN0aW9uICQoKXtyZXR1cm4gRihHKX1WLkhvbWUsRS5Xb3Jrc3BhY2UsVi5Eb2NrLEUuV29ya3NwYWNlO2NvbnN0IE49e25hbWU6Vi5TdG9yZWZyb250LHV1aWQ6RS5Xb3Jrc3BhY2V9O0UuV29ya3NwYWNlLEUuV29ya3NwYWNlO2FzeW5jIGZ1bmN0aW9uIGooZSl7Y29uc3QgdD1GKGUpO1wibWluaW1pemVkXCI9PT1hd2FpdCB0LmdldFN0YXRlKCkmJmF3YWl0IHQucmVzdG9yZSgpLGF3YWl0IHQuc2hvdygpLGF3YWl0IHQuc2V0QXNGb3JlZ3JvdW5kKCl9Y29uc3QgSD1lPT5lLnN0YXJ0c1dpdGgoVi5Ccm93c2VyV2luZG93KTthc3luYyBmdW5jdGlvbiBxKCl7cmV0dXJuKGF3YWl0IGZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLmdldENoaWxkV2luZG93cygpKS5maWx0ZXIoKGU9PkgoZS5pZGVudGl0eS5uYW1lKSkpfWNvbnN0IEs9ZT0+RihlKS5nZXRPcHRpb25zKCkudGhlbigoKCk9PiEwKSkuY2F0Y2goKCgpPT4hMSkpLFE9KCk9PksoTik7dmFyIHo7IWZ1bmN0aW9uKGUpe2UuQnJvd3Nlcj1cIkJyb3dzZXJcIixlLkRvY2s9XCJEb2NrXCIsZS5Ib21lPVwiSG9tZVwiLGUuTm90aWZpY2F0aW9uPVwiTm90aWZpY2F0aW9uXCIsZS5TdG9yZWZyb250PVwiU3RvcmVmcm9udFwiLGUuUGxhdGZvcm09XCJQbGF0Zm9ybVwiLGUuVGhlbWluZz1cIlRoZW1pbmdcIn0oenx8KHo9e30pKTtjb25zdCBKPWFzeW5jKGUsdCk9Pntjb25zdCBhPXthcGlWZXJzaW9uOnQuYXBpVmVyc2lvbnx8VCxjb21wb25lbnROYW1lOmUsY29tcG9uZW50VmVyc2lvbjp0LmNvbXBvbmVudFZlcnNpb258fFQsYWxsb3dlZDp0LmFsbG93ZWQscmVqZWN0aW9uQ29kZTp0LnJlamVjdGlvbkNvZGV9O2Zpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTpcIndvcmtzcGFjZS1saWNlbnNpbmdcIixkYXRhOmF9KX07YSgzNzgpO2NvbnN0IFg9ZT0+ZmluLlN5c3RlbS5nZXRTeXN0ZW1BcHBDb25maWcoZSk7bGV0IFk7YXN5bmMgZnVuY3Rpb24gWigpe2lmKFkpcmV0dXJuIFk7aWYoIVMpcmV0dXJue307Y29uc3QgZT1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2lmKFMpdHJ5e2xldCBlPWF3YWl0IFgoXCJ3b3Jrc3BhY2VcIikuY2F0Y2goKGU9Pnt9KSk7cmV0dXJuIGV8fChlPWF3YWl0IFgoXCJob21lXCIpKSxlfWNhdGNoKGUpe319KCksdD1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2NvbnN0e21hbmlmZXN0OmUsaW5pdGlhbE9wdGlvbnM6dH09YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0SW5mbygpO3JldHVybiBlPy53b3Jrc3BhY2V8fGU/LmhvbWV8fHQ/LndvcmtzcGFjZXx8dD8uaG9tZSxlPy53b3Jrc3BhY2U/ZT8ud29ya3NwYWNlOmU/LmhvbWU/ZT8uaG9tZTp0Py53b3Jrc3BhY2U/dD8ud29ya3NwYWNlOnQ/LmhvbWU/dD8uaG9tZTp2b2lkIDB9KCk7cmV0dXJuIFk9ey4uLnQsLi4uZX0sWX12YXIgZWU7IWZ1bmN0aW9uKGUpe2UuQ3VycmVudFdvcmtzcGFjZUlkPVwiY3VycmVudFdvcmtzcGFjZUlkXCIsZS5MYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJsYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLk1hY2hpbmVOYW1lPVwibWFjaGluZU5hbWVcIixlLk5ld1RhYlBhZ2VMYXlvdXQ9XCJOZXdUYWJQYWdlTGF5b3V0XCIsZS5OZXdUYWJQYWdlU29ydD1cIk5ld1RhYlBhZ2VTb3J0XCIsZS5Eb2NrUG9zaXRpb249XCJEb2NrUG9zaXRpb25cIn0oZWV8fChlZT17fSkpO2NvbnN0IHRlPWVlLGFlPShlLHQpPT57bG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7V30tJHtlfWAsdCl9LG5lPWU9PmxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke1d9LSR7ZX1gKTt2YXIgb2U7IWZ1bmN0aW9uKGUpe2UuTGF1bmNoQXBwPVwibGF1bmNoQXBwXCIsZS5TYXZlUGFnZT1cInNhdmVQYWdlXCIsZS5HZXRTYXZlZFBhZ2U9XCJnZXRTYXZlZFBhZ2VcIixlLkNyZWF0ZVNhdmVkUGFnZT1cImNyZWF0ZVNhdmVkUGFnZVwiLGUuVXBkYXRlU2F2ZWRQYWdlPVwidXBkYXRlU2F2ZWRQYWdlXCIsZS5EZWxldGVTYXZlZFBhZ2U9XCJkZWxldGVTYXZlZFBhZ2VcIixlLkdldFNhdmVkUGFnZXM9XCJnZXRTYXZlZFBhZ2VzXCIsZS5DcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbD1cImNyZWF0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5VcGRhdGVTYXZlZFBhZ2VJbnRlcm5hbD1cInVwZGF0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5EZWxldGVTYXZlZFBhZ2VJbnRlcm5hbD1cImRlbGV0ZVNhdmVkUGFnZUludGVybmFsXCIsZS5TaGFyZVBhZ2U9XCJzaGFyZVBhZ2VcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGVQYWdlRm9yV2luZG93XCIsZS5BdHRhY2hQYWdlc1RvV2luZG93PVwiYXR0YWNoUGFnZXNUb1dpbmRvd1wiLGUuRGV0YWNoUGFnZXNGcm9tV2luZG93PVwiZGV0YWNoUGFnZXNGcm9tV2luZG93XCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyUGFnZXNGb3JXaW5kb3dcIixlLlNldEFjdGl2ZVBhZ2U9XCJzZXRBY3RpdmVQYWdlXCIsZS5HZXRBbGxBdHRhY2hlZFBhZ2VzPVwiZ2V0QWxsQXR0YWNoZWRQYWdlc1wiLGUuR2V0QWN0aXZlUGFnZUlkRm9yV2luZG93PVwiZ2V0QWN0aXZlUGFnZUlkRm9yV2luZG93XCIsZS5HZXRQYWdlc0ZvcldpbmRvdz1cImdldFBhZ2VzRm9yV2luZG93XCIsZS5HZXRQYWdlRm9yV2luZG93PVwiZ2V0UGFnZUZvcldpbmRvd1wiLGUuR2V0U2F2ZWRQYWdlTWV0YWRhdGE9XCJnZXRTYXZlZFBhZ2VNZXRhZGF0YVwiLGUuR2V0VW5pcXVlUGFnZVRpdGxlPVwiZ2V0VW5pcXVlUGFnZVRpdGxlXCIsZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3c9XCJnZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3dcIixlLkdldFRoZW1lcz1cImdldFRoZW1lc1wiLGUuT3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsPVwib3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSW52b2tlQ3VzdG9tQWN0aW9uSW50ZXJuYWw9XCJpbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbFwiLGUuUmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPVwicmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsXCIsZS5HZXRTYXZlZFdvcmtzcGFjZT1cImdldFNhdmVkV29ya3NwYWNlXCIsZS5DcmVhdGVTYXZlZFdvcmtzcGFjZT1cImNyZWF0ZVNhdmVkV29ya3NwYWNlXCIsZS5VcGRhdGVTYXZlZFdvcmtzcGFjZT1cInVwZGF0ZVNhdmVkV29ya3NwYWNlXCIsZS5EZWxldGVTYXZlZFdvcmtzcGFjZT1cImRlbGV0ZVNhdmVkV29ya3NwYWNlXCIsZS5HZXRTYXZlZFdvcmtzcGFjZXM9XCJnZXRTYXZlZFdvcmtzcGFjZXNcIixlLlNhdmVXb3Jrc3BhY2U9XCJzYXZlV29ya3NwYWNlXCIsZS5HZXRDdXJyZW50V29ya3NwYWNlPVwiZ2V0Q3VycmVudFdvcmtzcGFjZVwiLGUuQXBwbHlXb3Jrc3BhY2U9XCJhcHBseVdvcmtzcGFjZVwiLGUuU2V0QWN0aXZlV29ya3NwYWNlPVwic2V0QWN0aXZlV29ya3NwYWNlXCIsZS5Jc0Jyb3dzZXJJbml0aWFsaXplZD1cImlzQnJvd3NlckluaXRpYWxpemVkXCJ9KG9lfHwob2U9e30pKTtjb25zdCByZT1hc3luYyBlPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0Q2xpZW50KCksaWU9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgcmUoZSksYT1cIlRhcmdldCBpcyBub3QgYSBXb3Jrc3BhY2UgUGxhdGZvcm0uIFRhcmdldCBtdXN0IGNhbGwgV29ya3NwYWNlUGxhdGZvcm0uaW5pdFwiO2xldCBuO3RyeXtuPWF3YWl0IHQuZGlzcGF0Y2goXCJpc1dvcmtzcGFjZVBsYXRmb3JtXCIpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihhKX1pZighMCE9PW4/LmlzV29ya3NwYWNlUGxhdGZvcm0pdGhyb3cgbmV3IEVycm9yKGEpO3JldHVybiBufSxzZT1hc3luYyBlPT4oYXdhaXQgaWUoZSkscmUoZSkpLGNlPWFzeW5jIGU9PntpZighMCE9PShhd2FpdCBpZShlKSk/LmlzQnJvd3NlckluaXRpYWxpemVkKXRocm93IG5ldyBFcnJvcihcIlRhcmdldCBpcyBub3QgYSBCcm93c2VyLWVuYWJsZWQgV29ya3NwYWNlIFBsYXRmb3JtLlwiKTtyZXR1cm4gcmUoZSl9LGRlPShlLHQpPT4hdC5maW5kKCh0PT50PT09ZSkpLHBlPShlLHQpPT5gJHtlfSAoJHt0fSlgLGxlPShlLHQpPT57bGV0IGE9MTtjb25zdCBuPWUucmVwbGFjZSgvIFxcKC4rXFwpJC8sXCJcIik7Zm9yKDshZGUocGUobixhKSx0KTspYSs9MTtyZXR1cm4gcGUobixhKX07YXN5bmMgZnVuY3Rpb24gdWUoZSl7dHJ5e2NvbnN0IHQ9RnQoKTthd2FpdCB0LmFwcGx5U25hcHNob3QoZS5zbmFwc2hvdCx7Y2xvc2VFeGlzdGluZ1dpbmRvd3M6ITB9KSx3ZShlKX1jYXRjaChlKXt9fWZ1bmN0aW9uIHdlKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IHQ9SlNPTi5zdHJpbmdpZnkoZSk7YWUodGUuQ3VycmVudFdvcmtzcGFjZUlkLHQpfWNhdGNoKGUpe319YXN5bmMgZnVuY3Rpb24gZmUoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgbG9jYWxTdG9yYWdlKXJldHVybjtjb25zdCBlPUZ0KCksdD1hd2FpdCBlLmdldFNuYXBzaG90KCk7cmV0dXJue3dvcmtzcGFjZUlkOmNyeXB0by5yYW5kb21VVUlEKCksdGl0bGU6YXdhaXQgaGUoKSxtZXRhZGF0YTp7QVBJVmVyc2lvbjpUfSxzbmFwc2hvdDp0fX1hc3luYyBmdW5jdGlvbiBnZSgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBsb2NhbFN0b3JhZ2UpcmV0dXJuO2NvbnN0IGU9bmUodGUuQ3VycmVudFdvcmtzcGFjZUlkKTtpZighZSlyZXR1cm4gZmUoKTtjb25zdCB0PUpTT04ucGFyc2UoZSksYT1GdCgpLG49YXdhaXQgYS5nZXRTbmFwc2hvdCgpO3JldHVybnsuLi50LG1ldGFkYXRhOntBUElWZXJzaW9uOlR9LHNuYXBzaG90Om59fWNvbnN0IHllPWFzeW5jIGU9PmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBzZShHKSkuZGlzcGF0Y2gob2UuR2V0U2F2ZWRXb3Jrc3BhY2UsZSkpKGUud29ya3NwYWNlSWQpPyhhc3luYyBlPT4oYXdhaXQgc2UoRykpLmRpc3BhdGNoKG9lLlVwZGF0ZVNhdmVkV29ya3NwYWNlLGUpKSh7d29ya3NwYWNlSWQ6ZS53b3Jrc3BhY2VJZCx3b3Jrc3BhY2U6ZX0pOihhc3luYyBlPT4oYXdhaXQgc2UoRykpLmRpc3BhdGNoKG9lLkNyZWF0ZVNhdmVkV29ya3NwYWNlLGUpKSh7d29ya3NwYWNlOmV9KTthc3luYyBmdW5jdGlvbiBoZShlPVwiVW50aXRsZWQgV29ya3NwYWNlXCIpe2NvbnN0IHQ9KGF3YWl0KGFzeW5jKCk9Pihhd2FpdCBzZShHKSkuZGlzcGF0Y2gob2UuR2V0U2F2ZWRXb3Jrc3BhY2VzLHZvaWQgMCkpKCkpLm1hcCgoKHt0aXRsZTplfSk9PmUpKTtyZXR1cm4gdC5maW5kKCh0PT50PT09ZSkpP2xlKGUsdCk6ZX1hc3luYyBmdW5jdGlvbiBtZSgpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhbFN0b3JhZ2UpdHJ5e2NvbnN0IGU9bmUodGUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93KTtpZighZSlyZXR1cm47Y29uc3QgdD1KU09OLnBhcnNlKGUpO2lmKGF3YWl0IEsodCkpcmV0dXJuIHR9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGBmYWlsZWQgdG8gZ2V0IGxhc3QgZm9jdXNlZCBicm93c2VyIHdpbmRvdzogJHtlfWApfX1mdW5jdGlvbiB2ZShlPWZpbi5tZS5pZGVudGl0eSl7SChlLm5hbWUpJiZmdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYWxTdG9yYWdlKXRyeXtjb25zdCB0PUpTT04uc3RyaW5naWZ5KGUpO2FlKHRlLkxhc3RGb2N1c2VkQnJvd3NlcldpbmRvdyx0KX1jYXRjaChlKXt9fShlKX1jb25zdCBTZT0oZSx0PTApPT57bGV0IGEsbixvPSExO2NvbnN0IHI9YXN5bmMgbj0+e2NvbnN0IGk9YXdhaXQgZSguLi5uKTtpZihvKXthd2FpdCBuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLHQpKSk7Y29uc3QgZT1hO3JldHVybiBhPXZvaWQgMCxvPSExLHIoZSl9cmV0dXJuIGl9O3JldHVybiguLi5lKT0+KG4/KG89ITAsYT1lKTpuPXIoZSkuY2F0Y2goKGU9Pnt0aHJvdyBlfSkpLmZpbmFsbHkoKCgpPT57bj12b2lkIDB9KSksbil9O3ZhciBQZTshZnVuY3Rpb24oZSl7ZS5UYWJDcmVhdGVkPVwidGFiLWNyZWF0ZWRcIixlLkNvbnRhaW5lckNyZWF0ZWQ9XCJjb250YWluZXItY3JlYXRlZFwiLGUuQ29udGFpbmVyUmVzaXplZD1cImNvbnRhaW5lci1yZXNpemVkXCJ9KFBlfHwoUGU9e30pKTtjb25zdCBiZT0oZSx0KT0+ZS5jb250ZW50P3suLi5lLGNvbnRlbnQ6ZS5jb250ZW50Lm1hcCgoZT0+YmUoZSx0KSkpfTp7Li4uZSxjb21wb25lbnRTdGF0ZTp0KGUuY29tcG9uZW50U3RhdGUpfSxrZT1lPT4oey4uLmUsbmFtZTplLm5hbWU/ZS5uYW1lOmNyeXB0by5yYW5kb21VVUlEKCl9KSxXZT1lPT57Y29uc3QgdD1bXTtyZXR1cm4oZSYmQXJyYXkuaXNBcnJheShlKT9lOltdKS5mb3JFYWNoKChlPT57aWYoXCJjb21wb25lbnRcIj09PWUudHlwZSlyZXR1cm4gdC5wdXNoKGUuY29tcG9uZW50U3RhdGUpO2NvbnN0IGE9V2UoZS5jb250ZW50KTt0LnB1c2goLi4uYSl9KSksdH0sQ2U9YXN5bmMoZSx0LGE9Ryk9PntsZXQgbjtpZihIKGEubmFtZSkpe249KGF3YWl0IEYoYSkuZ2V0T3B0aW9ucygpKS5sYXlvdXR8fHtzZXR0aW5nczp7fX19cmV0dXJuey4uLm4sY29udGVudDpbe3R5cGU6XCJzdGFja1wiLGNvbnRlbnQ6W3t0eXBlOlwiY29tcG9uZW50XCIsY29tcG9uZW50TmFtZTpcInZpZXdcIixjb21wb25lbnRTdGF0ZTp7dGl0bGU6ZSx1cmw6dH19XX1dfX07bmV3IE1hcDtmdW5jdGlvbiBJZShlLHQpe3JldHVybiBhc3luYyhhLC4uLm4pPT57ZS5oYXMoYSkmJmUuZ2V0KGEpLmZvckVhY2goKGU9PmUoLi4ubikpKSx0JiZhd2FpdCB0KHtldmVudDphLHBheWxvYWQ6bn0pfX1mdW5jdGlvbiBBZShlLHQpe3JldHVybiB0JiZ0KCh0PT57Y29uc3R7ZXZlbnQ6YSxwYXlsb2FkOm59PXQ7ZS5oYXMoYSkmJmUuZ2V0KGEpLmZvckVhY2goKGU9PmUoLi4ubikpKX0pKSwodCxhKT0+e2UuaGFzKHQpfHxlLnNldCh0LG5ldyBTZXQpLGUuZ2V0KHQpLmFkZChhKX19ZnVuY3Rpb24gTWUoZSl7cmV0dXJuKHQsYSk9PntlLmhhcyh0KXx8ZS5zZXQodCxuZXcgU2V0KTtjb25zdCBuPWUuZ2V0KHQpLG89KC4uLmUpPT57YSguLi5lKSxuLmRlbGV0ZShvKX07bi5hZGQobyl9fWZ1bmN0aW9uIE9lKGUpe3JldHVybih0LGEpPT57ZS5oYXModCkmJmUuZ2V0KHQpLmRlbGV0ZShhKX19Y29uc3QgVGU9UCYmXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmbmV3IFByb21pc2UoKGU9PmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsKCgpPT57XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZSgpfSkpKSk7ZnVuY3Rpb24gRWUoZSl7bGV0IHQ7cmV0dXJuKCk9PntpZighUyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRDaGFubmVsQ2xpZW50IGNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuIEF2b2lkIHVzaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gdHx8KHQ9KGFzeW5jKCk9Pnthd2FpdCBUZTtjb25zdCBhPXtjbGllbnRBUElWZXJzaW9uOlR9LG49YXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3BheWxvYWQ6YX0pO3JldHVybiBuLm9uRGlzY29ubmVjdGlvbigoYXN5bmMoKT0+e3Q9dm9pZCAwfSkpLG59KSgpLnRoZW4oKGU9PmUpKS5jYXRjaCgoYT0+e3Rocm93IHQ9dm9pZCAwLG5ldyBFcnJvcihgZmFpbGVkIHRvIGNvbm5lY3QgdG8gY2hhbm5lbCBwcm92aWRlciAke2V9OiAke2F9YCl9KSkpLHR9fWNvbnN0IEJlPWU9PmBfX2Jyb3dzZXJfd2luZG93X18tJHtlLnV1aWR9LSR7ZS5uYW1lfWAseGU9bmV3IE1hcCxSZT1lPT57Y29uc3QgdD1CZShlKTtyZXR1cm4geGUuaGFzKHQpfHx4ZS5zZXQodCxFZSh0KSkseGUuZ2V0KHQpKCl9O3ZhciBfZSxMZTshZnVuY3Rpb24oZSl7ZS5DbG9zZUJyb3dzZXJXaW5kb3c9XCJjbG9zZS1icm93c2VyLXdpbmRvd1wiLGUuUXVpdFBsYXRmb3JtPVwicXVpdC1wbGF0Zm9ybVwiLGUuQ2xvc2VQYWdlPVwiY2xvc2UtcGFnZVwiLGUuQWRkVG9DaGFubmVsPVwiYWRkLXRvLWNoYW5uZWxcIixlLlJlbW92ZUZyb21DaGFubmVsPVwicmVtb3ZlLWZyb20tY2hhbm5lbFwiLGUuT3BlblNhdmVNb2RhbEludGVybmFsPVwib3Blbi1zYXZlLW1vZGFsLWludGVybmFsXCIsZS5EdXBsaWNhdGVQYWdlPVwiZHVwbGljYXRlLXBhZ2VcIn0oX2V8fChfZT17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0UGFnZXM9XCJnZXQtcGFnZXNcIixlLkdldEFjdGl2ZVBhZ2VGb3JXaW5kb3c9XCJnZXQtYWN0aXZlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuQXR0YWNoUGFnZXNUb1dpbmRvdz1cImF0dGFjaC1wYWdlcy10by13aW5kb3dcIixlLkRldGFjaFBhZ2VzRnJvbVdpbmRvdz1cImRldGFjaC1wYWdlcy1mcm9tLXdpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZUZvcldpbmRvdz1cInNldC1hY3RpdmUtcGFnZS1mb3Itd2luZG93XCIsZS5SZW5hbWVQYWdlPVwicmVuYW1lLXBhZ2VcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXItcGFnZXMtZm9yLXdpbmRvd1wiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZS1wYWdlLWZvci13aW5kb3dcIixlLlVwZGF0ZVBhZ2VzV2luZG93T3B0aW9ucz1cInVwZGF0ZS1wYWdlcy13aW5kb3ctb3B0aW9uc1wiLGUuSXNEZXRhY2hpbmdQYWdlcz1cImlzLWRldGFjaGluZy1wYWdlc1wiLGUuSXNBY3RpdmVQYWdlQ2hhbmdpbmc9XCJpcy1hY3RpdmUtcGFnZS1jaGFuZ2luZ1wifShMZXx8KExlPXt9KSk7Y29uc3QgVmU9ey4uLl9lLC4uLkxlfTt2YXIgRGU7IWZ1bmN0aW9uKGUpe2UuQXR0YWNoZWRQYWdlc1RvV2luZG93PVwiYXR0YWNoZWQtcGFnZXMtdG8td2luZG93XCIsZS5EZXRhY2hlZFBhZ2VzRnJvbVdpbmRvdz1cImRldGFjaGVkLXBhZ2VzLWZyb20td2luZG93XCJ9KERlfHwoRGU9e30pKTtuZXcgTWFwO2NvbnN0IFVlPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IFJlKGUpO3JldHVybiBhd2FpdCB0LmRpc3BhdGNoKFZlLkdldFBhZ2VzKX0sRmU9YXN5bmMgZT0+KGF3YWl0IFJlKGUuaWRlbnRpdHkpKS5kaXNwYXRjaChWZS5VcGRhdGVQYWdlRm9yV2luZG93LGUpLEdlPWFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IHEoKTtyZXR1cm4oYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGFzeW5jKHtpZGVudGl0eTplfSk9PlVlKGUpKSkpKS5yZWR1Y2UoKChlLHQpPT5lLmNvbmNhdCh0KSksW10pfSwkZT1hc3luYygpPT4oYXdhaXQgc2UoRykpLmRpc3BhdGNoKG9lLkdldFNhdmVkUGFnZXMsdm9pZCAwKSxOZT1hc3luYyBlPT4oYXdhaXQgc2UoRykpLmRpc3BhdGNoKG9lLkdldFNhdmVkUGFnZSxlKSxqZT1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdChhc3luYyBlPT4oYXdhaXQgR2UoKSkuZmluZCgodD0+dC5wYWdlSWQ9PT1lKSkpKGUpO3JldHVybiFhfHxhLnRpdGxlPT09dC50aXRsZSYmZT09PXQucGFnZUlkfHxhd2FpdCBGZSh7aWRlbnRpdHk6YS5wYXJlbnRJZGVudGl0eSxwYWdlSWQ6ZSxwYWdlOntwYWdlSWQ6dC5wYWdlSWQsdGl0bGU6dC50aXRsZX19KSxhfSxIZT1hc3luYyh7cGFnZTplfSk9Pnthd2FpdCBqZShlLnBhZ2VJZCxlKSxhd2FpdChhc3luYyBlPT4oYXdhaXQgc2UoRykpLmRpc3BhdGNoKG9lLkNyZWF0ZVNhdmVkUGFnZSxlKSkoe3BhZ2U6ZX0pfSxxZT1hc3luYyBlPT57YXdhaXQgTmUoZSkmJmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBzZShHKSkuZGlzcGF0Y2gob2UuRGVsZXRlU2F2ZWRQYWdlLGUpKShlKX0sS2U9YXN5bmMoe3BhZ2VJZDplLHBhZ2U6dH0pPT57YXdhaXQgamUoZSx0KTtyZXR1cm4gYXdhaXQoYXN5bmMgZT0+KGF3YWl0IHNlKEcpKS5kaXNwYXRjaChvZS5VcGRhdGVTYXZlZFBhZ2UsZSkpKHtwYWdlSWQ6ZSxwYWdlOnR9KX0sUWU9YXN5bmMgZT0+YXdhaXQgTmUoZS5wYWdlSWQpP0tlKHtwYWdlSWQ6ZS5wYWdlSWQscGFnZTplfSk6SGUoe3BhZ2U6ZX0pLHplPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgUmUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKFZlLkF0dGFjaFBhZ2VzVG9XaW5kb3csZSkpKGUpfSxKZT1hc3luYyBlPT57YXdhaXQgRmUoZSl9LFhlPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgUmUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKFZlLkRldGFjaFBhZ2VzRnJvbVdpbmRvdyxlKSkoZSl9LFllPWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgUmUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKFZlLlNldEFjdGl2ZVBhZ2VGb3JXaW5kb3csZSkpKGUpfSxaZT1lPT5VZShlKSxldD1hc3luYyh7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pPT4oYXdhaXQgWmUoZSkpLmZpbmQoKGU9PmUucGFnZUlkPT09dCkpLHR0PWFzeW5jIGU9Pnthd2FpdChhc3luYyBlPT4oYXdhaXQgUmUoZS5pZGVudGl0eSkpLmRpc3BhdGNoKFZlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdyxlKSkoZSl9O2FzeW5jIGZ1bmN0aW9uIGF0KGU9XCJVbnRpdGxlZCBQYWdlXCIpe2NvbnN0W3QsYV09YXdhaXQgUHJvbWlzZS5hbGwoWyRlKCksR2UoKV0pLG49Wy4uLnQsLi4uYV0ubWFwKCgoe3RpdGxlOmV9KT0+ZSkpO3JldHVybiBuLmZpbmQoKHQ9PnQ9PT1lKSk/bGUoZSxuKTplfWNvbnN0IG50PW5ldyBNYXAsb3Q9ZT0+YCR7ZS51dWlkfS0ke2UubmFtZX1gO2NvbnN0IHJ0PVNlKChhc3luYyBmdW5jdGlvbigpe2xldCBlPVtdO3RyeXtlPWF3YWl0IEdlKCl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgbnQuZm9yRWFjaCgoKGUsdCk9PntjbGVhclRpbWVvdXQoZSksbnQuZGVsZXRlKHQpfSkpfWNvbnN0IHQ9bmV3IFNldDtlLmZvckVhY2goKGU9PntXZShlLmxheW91dC5jb250ZW50KS5mb3JFYWNoKChlPT57aWYoZS5uYW1lKXtjb25zdCBhPW90KGUpO3QuYWRkKGEpfX0pKX0pKTtjb25zdCBhPSQoKTsoYXdhaXQgYS5nZXRDdXJyZW50Vmlld3MoKSkuZm9yRWFjaCgoKHtpZGVudGl0eTplfSk9Pntjb25zdCBhPW90KGUpO2lmKHQuaGFzKGEpfHxudC5oYXMoYSkpcmV0dXJuO2NvbnN0IG49c2V0VGltZW91dCgoKCk9PntmaW4uVmlldy53cmFwU3luYyhlKS5kZXN0cm95KCksbnQuZGVsZXRlKGEpfSksNWUzKTtudC5zZXQoYSxuKX0pKSxudC5mb3JFYWNoKCgoZSxhKT0+e3QuaGFzKGEpJiYoY2xlYXJUaW1lb3V0KGUpLG50LmRlbGV0ZShhKSl9KSl9KSwyNTAwKSxpdD0oe25hbWU6ZX0pPT57ZSYmSChlKSYmcnQoKS5jYXRjaCgoKCk9Pnt9KSl9O2xldCBzdD17fTtjb25zdCBjdD0oe2FjdGlvbklkOmUscGF5bG9hZDp0fSk9PntpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBzdFtlXSl0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmaW5kIGEgY29uZmlndXJlZCBmdW5jdGlvbiBmb3IgdGhlIGFjdGlvbiAnJHtlfSdgKTtyZXR1cm4gc3RbZV0odCl9O2Z1bmN0aW9uIGR0KCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRlLk1hY2hpbmVOYW1lKX1sZXQgcHQ7YXN5bmMgZnVuY3Rpb24gbHQoKXtyZXR1cm4gcHR8fChwdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1hY2hpbmVJZCgpKSxwdH1jb25zdCB1dD1lPT57aWYoZS5sYXlvdXQmJkFycmF5LmlzQXJyYXkoZS53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXMpKXtjb25zdCB0PWUud29ya3NwYWNlUGxhdGZvcm0ucGFnZXMuZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO2lmKHQpaWYodC5pc0xvY2tlZCl7Y29uc3QgYT0oKGUsdCk9Pntjb25zdCBhPVdlKHQuY29udGVudCk7cmV0dXJuey4uLmJlKGUsKGU9Pntjb25zdCB0PWEuZmluZCgodD0+dC5uYW1lPT09ZS5uYW1lJiZ0LnV1aWQ9PT1lLnV1aWQpKSxuPXQ/dC5pc0Nsb3NhYmxlOmUuaXNDbG9zYWJsZTtyZXR1cm57Li4uZSxpc0Nsb3NhYmxlOm59fSkpLHNldHRpbmdzOnQuc2V0dGluZ3N9fSkoZS5sYXlvdXQsdC5sYXlvdXQpO3QubGF5b3V0PWEsZS5sYXlvdXQ9YX1lbHNlIHQubGF5b3V0PWUubGF5b3V0fXJldHVybiBlfTthc3luYyBmdW5jdGlvbiB3dChlKXtjb25zdCB0PWV8fGF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmdldFNuYXBzaG90KCk7aWYodC5zbmFwc2hvdERldGFpbHM/Lm1hY2hpbmVJZClyZXR1cm4gdDtjb25zdCBhPWR0KCk7cmV0dXJuey4uLnQsc25hcHNob3REZXRhaWxzOnsuLi5lLnNuYXBzaG90RGV0YWlscyxtYWNoaW5lSWQ6YXdhaXQgbHQoKSxtYWNoaW5lTmFtZTphfX19ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxhKT0+e2Uub25jb21wbGV0ZT1lLm9uc3VjY2Vzcz0oKT0+dChlLnJlc3VsdCksZS5vbmFib3J0PWUub25lcnJvcj0oKT0+YShlLmVycm9yKX0pKX1mdW5jdGlvbiBndChlLHQpe2NvbnN0IGE9aW5kZXhlZERCLm9wZW4oZSk7YS5vbnVwZ3JhZGVuZWVkZWQ9KCk9PmEucmVzdWx0LmNyZWF0ZU9iamVjdFN0b3JlKHQpO2NvbnN0IG49ZnQoYSk7cmV0dXJuKGUsYSk9Pm4udGhlbigobj0+YShuLnRyYW5zYWN0aW9uKHQsZSkub2JqZWN0U3RvcmUodCkpKSl9bGV0IHl0O2Z1bmN0aW9uIGh0KCl7cmV0dXJuIHl0fHwoeXQ9Z3QoXCJrZXl2YWwtc3RvcmVcIixcImtleXZhbFwiKSkseXR9ZnVuY3Rpb24gbXQoZSx0PWh0KCkpe3JldHVybiB0KFwicmVhZG9ubHlcIiwodD0+ZnQodC5nZXQoZSkpKSl9ZnVuY3Rpb24gdnQoZSx0LGE9aHQoKSl7cmV0dXJuIGEoXCJyZWFkd3JpdGVcIiwoYT0+KGEucHV0KHQsZSksZnQoYS50cmFuc2FjdGlvbikpKSl9ZnVuY3Rpb24gU3QoZSx0PWh0KCkpe3JldHVybiB0KFwicmVhZHdyaXRlXCIsKHQ9Pih0LmRlbGV0ZShlKSxmdCh0LnRyYW5zYWN0aW9uKSkpKX1mdW5jdGlvbiBQdChlLHQpe3JldHVybiBlLm9wZW5DdXJzb3IoKS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt0aGlzLnJlc3VsdCYmKHQodGhpcy5yZXN1bHQpLHRoaXMucmVzdWx0LmNvbnRpbnVlKCkpfSxmdChlLnRyYW5zYWN0aW9uKX1mdW5jdGlvbiBidChlPWh0KCkpe3JldHVybiBlKFwicmVhZG9ubHlcIiwoZT0+e2lmKGUuZ2V0QWxsS2V5cylyZXR1cm4gZnQoZS5nZXRBbGxLZXlzKCkpO2NvbnN0IHQ9W107cmV0dXJuIFB0KGUsKGU9PnQucHVzaChlLmtleSkpKS50aGVuKCgoKT0+dCkpfSkpfWNvbnN0IGt0PShlLHQ9XCJcIik9PmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpLFd0PWImJmd0KFwib3BlbmZpbi1ob21lLXBhZ2VzXCIsXCJwYWdlc1wiKTthc3luYyBmdW5jdGlvbiBDdChlKXtjb25zdCB0PWF3YWl0IG10KGUsV3QpO3JldHVybiB0Pyh0LnBhZ2VJZD1lLnRvU3RyaW5nKCksdC50aXRsZT10LnRpdGxlfHx0LnBhZ2VJZCx0KTpudWxsfWFzeW5jIGZ1bmN0aW9uIEl0KGUpe2NvbnN0IHQ9YXdhaXQgYnQoV3QpLGE9YXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9PkN0KGUudG9TdHJpbmcoKSkpKSk7cmV0dXJuIGU/YS5maWx0ZXIoKHQ9Pmt0KHQudGl0bGUsZSkpKTphfWFzeW5jIGZ1bmN0aW9uIEF0KHtwYWdlOmV9KXthd2FpdCB2dChlLnBhZ2VJZCxlLFd0KX1hc3luYyBmdW5jdGlvbiBNdChlKXthd2FpdCBTdChlLFd0KX1hc3luYyBmdW5jdGlvbiBPdCh7cGFnZUlkOmUscGFnZTp0fSl7aWYodm9pZCAwPT09YXdhaXQgQ3QoZSkpdGhyb3cgbmV3IEVycm9yKFwicGFnZSBub3QgZm91bmRcIik7YXdhaXQgQXQoe3BhZ2U6dH0pLGUhPT10LnBhZ2VJZCYmYXdhaXQgTXQoZSl9dmFyIFR0OyFmdW5jdGlvbihlKXtlLkxhYmVsPVwibm9ybWFsXCIsZS5TZXBhcmF0b3I9XCJzZXBhcmF0b3JcIixlLlN1Ym1lbnU9XCJzdWJtZW51XCIsZS5DaGVja2JveD1cImNoZWNrYm94XCJ9KFR0fHwoVHQ9e30pKTtjb25zdCBFdD17dHlwZTpUdC5TZXBhcmF0b3IsZGF0YTp2b2lkIDB9O3ZhciBCdDshZnVuY3Rpb24oZSl7ZS5SZWdpc3RlclByb3ZpZGVyPVwicmVnaXN0ZXItcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJQcm92aWRlcj1cImRlcmVnaXN0ZXItcHJvdmlkZXJcIixlLkNyZWF0ZVByb3ZpZGVyV2luZG93PVwiY3JlYXRlLXByb3ZpZGVyLXdpbmRvd1wiLGUuR2V0UHJvdmlkZXJzPVwiZ2V0LXByb3ZpZGVyc1wiLGUuU2hvd1Byb3ZpZGVyV2luZG93PVwic2hvdy1wcm92aWRlci13aW5kb3dcIixlLkhpZGVQcm92aWRlcldpbmRvdz1cImhpZGUtcHJvdmlkZXItd2luZG93XCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItYXBwc1wiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2U9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1sYW5kaW5nLXBhZ2VcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckZvb3Rlcj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWZvb3RlclwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTmF2aWdhdGlvbj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLW5hdmlnYXRpb25cIixlLkxhdW5jaFN0b3JlZnJvbnRQcm92aWRlckFwcD1cImxhdW5jaC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcFwiLGUuU2hvd0hvbWU9XCJzaG93LWhvbWVcIixlLkhpZGVIb21lPVwiaGlkZS1ob21lXCIsZS5Bc3NpZ25Ib21lU2VhcmNoQ29udGV4dD1cImFzc2lnbi1ob21lLXNlYXJjaC1jb250ZXh0XCIsZS5HZXRMZWdhY3lQYWdlcz1cImdldC1sZWdhY3ktcGFnZXNcIixlLkdldExlZ2FjeVdvcmtzcGFjZXM9XCJnZXQtbGVnYWN5LXdvcmtzcGFjZXNcIixlLkdldENvbXB1dGVkUGxhdGZvcm1UaGVtZT1cImdldC1jb21wdXRlZC1wbGF0Zm9ybS10aGVtZVwiLGUuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5EZXJlZ2lzdGVyU3RvcmVmcm9udFByb3ZpZGVyPVwiZGVyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5IaWRlU3RvcmVmcm9udD1cImhpZGUtc3RvcmVmcm9udFwiLGUuU2hvd1N0b3JlZnJvbnQ9XCJzaG93LXN0b3JlZnJvbnRcIn0oQnR8fChCdD17fSkpO0VlKFwiX19vZl93b3Jrc3BhY2VfcHJvdG9jb2xfX1wiKTtjb25zdCB4dD1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdChhc3luYyBlPT4oey4uLmUsbGF5b3V0RGV0YWlsczp7bWFjaGluZUlkOmF3YWl0IGx0KCksbWFjaGluZU5hbWU6ZHQoKX19KSkodCk7cmV0dXJue3BhZ2VJZDpjcnlwdG8ucmFuZG9tVVVJRCgpLHRpdGxlOmUsbGF5b3V0OmEsaXNSZWFkT25seTohMSxoYXNVbnNhdmVkQ2hhbmdlczohMH19LFJ0PWU9Pih7aWRlbnRpdHk6ZSxvcGVuZmluV2luZG93OmZpbi5XaW5kb3cud3JhcFN5bmMoZSksZ2V0UGFnZXM6YXN5bmMoKT0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5HZXRQYWdlc0ZvcldpbmRvdyxlKSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCBjZShlKSkuZGlzcGF0Y2gob2UuR2V0UGFnZUZvcldpbmRvdyx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLGFkZFBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgY2UoZSk7dD8udGl0bGV8fCh0LnRpdGxlPWF3YWl0IGEuZGlzcGF0Y2gob2UuR2V0VW5pcXVlUGFnZVRpdGxlLHZvaWQgMCkpO2NvbnN0IG49KGF3YWl0IGEuZGlzcGF0Y2gob2UuR2V0QWxsQXR0YWNoZWRQYWdlcyx2b2lkIDApKS5maW5kKChlPT5lLnBhZ2VJZD09PXQucGFnZUlkfHxlLnRpdGxlPT09dC50aXRsZSkpO2lmKG4pdGhyb3cgbi5wYWdlSWQ9PT10LnBhZ2VJZD9uZXcgRXJyb3IoYHBhZ2Ugd2l0aCBpZCAke3QucGFnZUlkfSBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGEgYnJvd3NlciB3aW5kb3cgJHtuLnBhcmVudElkZW50aXR5Lm5hbWV9YCk6bmV3IEVycm9yKGBwYWdlIHdpdGggdGl0bGUgJHt0LnRpdGxlfSBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIGEgYnJvd3NlciB3aW5kb3cgJHtuLnBhcmVudElkZW50aXR5Lm5hbWV9YCk7Y29uc3Qgbz17aWRlbnRpdHk6ZSxwYWdlczpbdF19O3JldHVybiBhLmRpc3BhdGNoKG9lLkF0dGFjaFBhZ2VzVG9XaW5kb3csbyl9LHJlbW92ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5EZXRhY2hQYWdlc0Zyb21XaW5kb3cse2lkZW50aXR5OmUscGFnZUlkczpbdF19KSxzZXRBY3RpdmVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBjZShlKSkuZGlzcGF0Y2gob2UuU2V0QWN0aXZlUGFnZSx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQgY2UoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKG9lLlVwZGF0ZVBhZ2VGb3JXaW5kb3csdCl9LHJlb3JkZXJQYWdlczphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBjZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gob2UuUmVvcmRlclBhZ2VzRm9yV2luZG93LHQpfSxfb3Blbkdsb2JhbENvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IGNlKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChvZS5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0scmVwbGFjZVRvb2xiYXJPcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCBjZShlKTtjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7dG9vbGJhck9wdGlvbnM6dH19KX0scmVwbGFjZVdpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczphc3luYyB0PT57YXdhaXQgY2UoZSk7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKGUpO2F3YWl0IGEudXBkYXRlT3B0aW9ucyh7d29ya3NwYWNlUGxhdGZvcm06e3dpbmRvd1N0YXRlQnV0dG9uT3B0aW9uczp0fX0pfSxfb3BlblZpZXdUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBjZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gob2UuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblBhZ2VUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCBjZShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2gob2UuT3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblNhdmVNb2RhbDphc3luYyB0PT57YXdhaXQgY2UoZSk7cmV0dXJuKGF3YWl0IFJlKGUpKS5kaXNwYXRjaChWZS5PcGVuU2F2ZU1vZGFsSW50ZXJuYWwsdCl9LF9vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0IGNlKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChvZS5PcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51SW50ZXJuYWwsdCl9fSk7bGV0IF90PSExO2NvbnN0IEx0PWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm57d3JhcFN5bmM6ZT0+UnQoZSksY3JlYXRlV2luZG93OmFzeW5jIGE9Pnthd2FpdCBjZShlKSxfdHx8KF90PSEwLChhc3luYyBlPT57Sih6LkJyb3dzZXIsZSl9KSh7YWxsb3dlZDohMH0pKTtjb25zdCBuPWF3YWl0IHQuY3JlYXRlV2luZG93KGEpO3JldHVybiBSdChuLmlkZW50aXR5KX0sZ2V0QWxsQXR0YWNoZWRQYWdlczphc3luYygpPT4oYXdhaXQgY2UoZSkpLmRpc3BhdGNoKG9lLkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSxnZXRBbGxXaW5kb3dzOmFzeW5jKCk9Pnthd2FpdCBjZShlKTtyZXR1cm4oYXdhaXQgZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKGUpLmdldENoaWxkV2luZG93cygpKS5maWx0ZXIoKGU9PmUuaWRlbnRpdHkubmFtZS5pbmNsdWRlcyhcImludGVybmFsLWdlbmVyYXRlZC13aW5kb3ctXCIpKSkubWFwKChlPT5SdChlLmlkZW50aXR5KSkpfSxnZXRVbmlxdWVQYWdlVGl0bGU6YXN5bmMgdD0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5HZXRVbmlxdWVQYWdlVGl0bGUsdCksZ2V0TGFzdEZvY3VzZWRXaW5kb3c6YXN5bmMoKT0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5HZXRMYXN0Rm9jdXNlZEJyb3dzZXJXaW5kb3csdm9pZCAwKX19LFZ0PWU9Pih7Y3JlYXRlUGFnZTphc3luYyB0PT4oYXdhaXQgY2UoZSkpLmRpc3BhdGNoKG9lLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsLHQpLGRlbGV0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5EZWxldGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSx1cGRhdGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCBjZShlKSkuZGlzcGF0Y2gob2UuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksZ2V0UGFnZTphc3luYyB0PT4oYXdhaXQgY2UoZSkpLmRpc3BhdGNoKG9lLkdldFNhdmVkUGFnZSx0KSxnZXRQYWdlczphc3luYyB0PT4oYXdhaXQgY2UoZSkpLmRpc3BhdGNoKG9lLkdldFNhdmVkUGFnZXMsdCksc2F2ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0IGNlKGUpKS5kaXNwYXRjaChvZS5TYXZlUGFnZSx0KSxjcmVhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5DcmVhdGVTYXZlZFdvcmtzcGFjZSx0KSxkZWxldGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5EZWxldGVTYXZlZFdvcmtzcGFjZSx0KSx1cGRhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5VcGRhdGVTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5HZXRTYXZlZFdvcmtzcGFjZSx0KSxnZXRXb3Jrc3BhY2VzOmFzeW5jIHQ9Pihhd2FpdCBzZShlKSkuZGlzcGF0Y2gob2UuR2V0U2F2ZWRXb3Jrc3BhY2VzLHQpLHNhdmVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5TYXZlV29ya3NwYWNlLHQpfSksRHQ9ZT0+KHtnZXRUaGVtZXM6YXN5bmMoKT0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5HZXRUaGVtZXMsdm9pZCAwKX0pLFV0PWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm4gT2JqZWN0LmFzc2lnbih0LHthcHBseVNuYXBzaG90OmFzeW5jKHQsYSk9PntpZihcInN0cmluZ1wiIT10eXBlb2YgdCYmIXQ/LndpbmRvd3MpdGhyb3cgbmV3IEVycm9yKFwiTm90IGEgdmFsaWQgYnJvd3NlciBzbmFwc2hvdFwiKTtyZXR1cm4gZmluLlBsYXRmb3JtLndyYXBTeW5jKGUpLmFwcGx5U25hcHNob3QodCxhKX0sZ2V0U25hcHNob3Q6KCk9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRTbmFwc2hvdCgpLnRoZW4oKGU9PmUpKSxsYXVuY2hBcHA6YXN5bmMgdD0+e3QudGFyZ2V0fHwodC50YXJnZXQ9e3V1aWQ6VyxuYW1lOkMsZW50aXR5VHlwZTpJfHxcInVua25vd25cIn0pO3JldHVybihhd2FpdCBzZShlKSkuZGlzcGF0Y2gob2UuTGF1bmNoQXBwLHQpfSxfaW52b2tlQ3VzdG9tQWN0aW9uOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0IHNlKGUpLG89e2FjdGlvbklkOnQscGF5bG9hZDp7Li4uYSxjYWxsZXJUeXBlOmEuY2FsbGVyVHlwZXx8aC5BUEl9fTtyZXR1cm4gbi5kaXNwYXRjaChvZS5JbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbCxvKX0sX3JlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2c6YXN5bmMgdD0+KGF3YWl0IHNlKGUpKS5kaXNwYXRjaChvZS5SZXF1ZXN0UXVpdFBsYXRmb3JtRGlhbG9nSW50ZXJuYWwsdCksZ2V0Q3VycmVudFdvcmtzcGFjZTphc3luYygpPT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG9lLkdldEN1cnJlbnRXb3Jrc3BhY2Usdm9pZCAwKSxhcHBseVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG9lLkFwcGx5V29ya3NwYWNlLHQpLHNldEFjdGl2ZVdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQgc2UoZSkpLmRpc3BhdGNoKG9lLlNldEFjdGl2ZVdvcmtzcGFjZSx0KSxUaGVtZTpEdChlKSxCcm93c2VyOkx0KGUpLFN0b3JhZ2U6VnQoZSl9KX0sRnQ9KCk9PlV0KGZpbi5tZS5pZGVudGl0eSksR3Q9YXN5bmMoZT1HKT0+e2NvbnN0e3dvcmtzcGFjZVBsYXRmb3JtOnR9PWF3YWl0IEYoZSkuZ2V0T3B0aW9ucygpLGE9dD8ubmV3UGFnZVVybCxuPXQ/Lm5ld1RhYlVybDtyZXR1cm57bmV3UGFnZVVybDphLG5ld1RhYlVybDpufX0sJHQ9YXN5bmMoZT1HKT0+e2NvbnN0IHQ9YXdhaXQgRnQoKS5Ccm93c2VyLmdldFVuaXF1ZVBhZ2VUaXRsZShcIlVudGl0bGVkIFBhZ2VcIiksYT1hd2FpdChhc3luYyhlPUcpPT57Y29uc3R7bmV3UGFnZVVybDp0fT1hd2FpdCBHdChlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gY3JlYXRlIGEgbmV3IHBhZ2Ugd2l0aG91dCBhIG5ld1BhZ2VVcmwgc2V0XCIpO3JldHVybiBDZShcIk5ldyBUYWJcIix0LGUpfSkoZSk7cmV0dXJuIHh0KHQsYSl9LE50PXt0eXBlOlR0LkxhYmVsLGxhYmVsOlwiQ2xvc2UgV2luZG93XCIsZGF0YTp7dHlwZTp1LkNsb3NlV2luZG93fX0sanQ9e3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJPcGVuIFN0b3JlZnJvbnRcIixkYXRhOnt0eXBlOnUuT3BlblN0b3JlZnJvbnR9fSxIdD17dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlF1aXQgUGxhdGZvcm1cIixkYXRhOnt0eXBlOnUuUXVpdH19LHF0PXt0eXBlOlR0LkxhYmVsLGxhYmVsOlwiTmV3IFdpbmRvd1wiLGRhdGE6e3R5cGU6dS5OZXdXaW5kb3d9fSxLdD17dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZVwiLGRhdGE6e3R5cGU6dS5TYXZlUGFnZX19LFF0PXt0eXBlOlR0LkxhYmVsLGxhYmVsOlwiU2F2ZSBQYWdlIEFzLi4uXCIsZGF0YTp7dHlwZTp1LlNhdmVQYWdlQXN9fSx6dD17dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlJlc3RvcmUgdG8gTGFzdCBTYXZlZCBDaGFuZ2VzXCIsZGF0YTp7dHlwZTp1LlJlc3RvcmVDaGFuZ2VzfX0sSnQ9e3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJTYXZlIFdvcmtzcGFjZVwiLGRhdGE6e3R5cGU6dS5TYXZlV29ya3NwYWNlfX0sWHQ9e3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJTYXZlIFdvcmtzcGFjZSBBcy4uLlwiLGRhdGE6e3R5cGU6dS5TYXZlV29ya3NwYWNlQXN9fSxZdD17dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlJlbmFtZSBXb3Jrc3BhY2VcIixkYXRhOnt0eXBlOnUuUmVuYW1lV29ya3NwYWNlfX0sWnQ9XCJTd2l0Y2ggV29ya3NwYWNlXCIsZWE9XCJEZWxldGUgV29ya3NwYWNlXCIsdGE9W050LEV0LGp0LEV0LEh0XSxhYT1bRXQsTnQsRXQsSHRdLG5hPShlLHQsYSk9PnQubWFwKCh0PT57Y29uc3Qgbj10LndvcmtzcGFjZUlkPT09ZS53b3Jrc3BhY2VJZDtyZXR1cm57bGFiZWw6dC50aXRsZSx0eXBlOlR0LkNoZWNrYm94LGVuYWJsZWQ6IW4sY2hlY2tlZDpuLGRhdGE6e3R5cGU6YSx3b3Jrc3BhY2VJZDp0LndvcmtzcGFjZUlkfX19KSksb2E9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQgUSgpLHtuZXdQYWdlVXJsOmF9PWF3YWl0IEd0KGUpLG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9RihlKSx7d29ya3NwYWNlUGxhdGZvcm06YX09YXdhaXQgdC5nZXRPcHRpb25zKCk7cmV0dXJuIGE/LmRpc2FibGVNdWx0aXBsZVBhZ2VzfSkoZSksbz1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1GKGUpLHt3b3Jrc3BhY2VQbGF0Zm9ybTphfT1hd2FpdCB0LmdldE9wdGlvbnMoKTtyZXR1cm4gYT8uaXNMb2NrZWR9KShlKSxyPVtdO3ZhciBpO2EmJihyLnB1c2gocXQpLG58fHIucHVzaCgoaT0hbyx7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIk5ldyBQYWdlXCIsZGF0YTp7dHlwZTp1Lk5ld1BhZ2V9LGVuYWJsZWQ6aX0pKSksci5wdXNoKEV0KTtjb25zdCBzPUZ0KCksYz1hd2FpdCBzLmdldEN1cnJlbnRXb3Jrc3BhY2UoKSxkPWF3YWl0IHMuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCkscD1kLmZpbmQoKGU9PmUud29ya3NwYWNlSWQ9PT1jLndvcmtzcGFjZUlkKSk7cmV0dXJuIHA/ci5wdXNoKHp0KTpyLnB1c2goe2xhYmVsOnp0LmxhYmVsLGVuYWJsZWQ6ITF9KSxyLnB1c2goSnQsWHQpLHA/ci5wdXNoKFl0KTpyLnB1c2goe2xhYmVsOll0LmxhYmVsLGVuYWJsZWQ6ITF9KSxkLnNvbWUoKGU9PmUud29ya3NwYWNlSWQhPT1jLndvcmtzcGFjZUlkKSk/ci5wdXNoKHtsYWJlbDpadCxzdWJtZW51Om5hKGMsZCx1LlN3aXRjaFdvcmtzcGFjZSl9LHtsYWJlbDplYSxzdWJtZW51Om5hKGMsZCx1LkRlbGV0ZVdvcmtzcGFjZSl9KTpyLnB1c2goe2xhYmVsOlp0LGVuYWJsZWQ6ITF9LHtsYWJlbDplYSxlbmFibGVkOiExfSksci5wdXNoKEV0LEt0LFF0KSx0P1suLi5yLC4uLnRhXTpbLi4uciwuLi5hYV19O2xldCByYT1cIlBsYXRmb3JtXCI7Y29uc3QgaWE9YXN5bmMoKT0+cmE7dmFyIHNhLGNhLGRhOyFmdW5jdGlvbihlKXtlLkhvbWU9XCIvaG9tZS9cIixlLkhvbWVTZWFyY2g9XCIvaG9tZS8/ZGVlcGxpbms9c2VhcmNoXCIsZS5Ib21lUGFnZXNSZW5hbWU9XCIvaG9tZS9wYWdlcy9yZW5hbWUvXCIsZS5Eb2NrPVwiL2RvY2svXCIsZS5Ccm93c2VyUGFnZXNMYW5kaW5nPVwiL2Jyb3dzZXIvcGFnZXMvbGFuZGluZy9cIixlLkhvbWVJbmRpY2F0b3I9XCIvaG9tZS9pbmRpY2F0b3IvXCIsZS5Ccm93c2VyPVwiL2Jyb3dzZXIvXCIsZS5Ccm93c2VyUG9wdXBNZW51PVwiL2Jyb3dzZXIvcG9wdXAtbWVudS9cIixlLlByb3ZpZGVyPVwiL3Byb3ZpZGVyL1wiLGUuQnJvd3NlclBvcHVwTWVudVNoYXJlUGFnZT1cIi9icm93c2VyL3BvcHVwLW1lbnUvc2hhcmUtcGFnZS9cIixlLkJyb3dzZXJQb3B1cE1lbnVTYXZlTW9kYWw9XCIvYnJvd3Nlci9wb3B1cC1tZW51L3NhdmUtbW9kYWwvXCIsZS5Ccm93c2VyUG9wdXBNZW51TGF5b3V0cz1cIi9icm93c2VyL3BvcHVwLW1lbnUvbGF5b3V0cy9sYXlvdXRzL1wiLGUuQnJvd3NlclBvcHVwTWVudUNvbG9yTGlua2luZz1cIi9icm93c2VyL3BvcHVwLW1lbnUvY29sb3ItbGlua2luZy9jb2xvci1saW5raW5nL1wiLGUuQnJvd3NlckluZGljYXRvcj1cIi9icm93c2VyL2luZGljYXRvci9cIixlLlJlc3BvbnNlTW9kYWw9XCIvYnJvd3Nlci9wb3B1cC1tZW51L3Jlc3BvbnNlLW1vZGFsL1wiLGUuRG9jcz1cIi9wcm92aWRlci9kb2NzL1wiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250L1wiLGUuRGVwcmVjYXRlZEFsZXJ0PVwiL3Byb3ZpZGVyL2RlcHJlY2F0ZWQtYWxlcnQvXCJ9KHNhfHwoc2E9e30pKSxmdW5jdGlvbihlKXtlLkljb25PcGVuRmluTG9nbz1cIi9pY29ucy9vcGVuZmlubG9nby5zdmdcIixlLkljb25GaWx0ZXI9XCIvaWNvbnMvZmlsdGVyLnN2Z1wifShjYXx8KGNhPXt9KSksZnVuY3Rpb24oZSl7ZS5TZWFyY2g9XCJzZWFyY2hcIn0oZGF8fChkYT17fSkpO2NvbnN0IHBhPXsuLi5jYSwuLi5zYX07dmFyIGxhOyFmdW5jdGlvbihlKXtlLkhvbWU9XCIvaG9tZVwiLGUuQnJvd3Nlcj1cIi9icm93c2VyXCIsZS5Qcm92aWRlcj1cIi9wcm92aWRlclwiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250XCIsZS5Eb2NrPVwiL2RvY2tcIn0obGF8fChsYT17fSkpO2NvbnN0IHVhPVwiL3dvcmtzcGFjZS85LjAuMTFcIjtmdW5jdGlvbiB3YSgpe3JldHVybiB1YS5zdWJzdHJpbmcoMCx1YS5sZW5ndGgtXCJcIi5sZW5ndGgpfWZ1bmN0aW9uIGZhKGUpe2lmKCFQKXRocm93IG5ldyBFcnJvcihcImdldEFic29sdXRlUm91dGVQYXRoIGNhbiBvbmx5IGJlIHVzZWQgaW4gYSB3aW5kb3dcIik7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIXdpbmRvdyl0aHJvdyBuZXcgRXJyb3IoXCJnZXRBYnNvbHV0ZUJhc2VQYXRoIGNhbiBvbmx5IGJlIHVzZWQgaW4gYSB3aW5kb3dcIik7cmV0dXJuYCR7d2luZG93Lm9yaWdpbn0ke3dhKCl9YH0oKStlfWNvbnN0IGdhPXtuYW1lOlYuQnJvd3Nlck1lbnUsYWx3YXlzT25Ub3A6ITAsYXV0b1Nob3c6ITEsZnJhbWU6ITEscmVzaXphYmxlOiExLGJhY2tncm91bmRDb2xvcjpcIiMyZjMxMzZcIixzbWFsbFdpbmRvdzohMCxzaG93VGFza2Jhckljb246ITEsYmFja2dyb3VuZFRocm90dGxpbmc6ITB9O2Z1bmN0aW9uIHlhKGUpe2NvbnN0IHQ9ey4uLmdhLC4uLmV9O3JldHVybiB0LnVybD1mdW5jdGlvbihlKXtpZighUCl0aHJvdyBuZXcgRXJyb3IoXCJyZXNvbHZlQWJzb2x1dGVQYXRoIGNhbiBvbmx5IGJlIHVzZWQgaW4gYSB3aW5kb3dcIik7cmV0dXJuIGUuc3RhcnRzV2l0aChcImh0dHBcIik/ZTpgJHt3aW5kb3cub3JpZ2lufSR7ZX1gfSh0LnVybCksdH12YXIgaGEsbWE7IWZ1bmN0aW9uKGUpe2UuVXBkYXRlPVwidXBkYXRlXCIsZS5SZXNwb25zZT1cInJlc3BvbnNlXCJ9KGhhfHwoaGE9e30pKSxmdW5jdGlvbihlKXtlLkNhbmNlbGVkPVwiY2FuY2VsZWRcIixlLk5lZ2F0aXZlPVwibmVnYXRpdmVcIixlLkFmZmlybWF0aXZlPVwiYWZmaXJtYXRpdmVcIn0obWF8fChtYT17fSkpO2NvbnN0IHZhPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9bmV3IE1hcDtyZXR1cm57ZW1pdDpJZSh0LCh0PT5TJiZmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5wdWJsaXNoKGUsdCkpKSxhZGRMaXN0ZW5lcjpBZSh0LCh0PT5TJiZmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5zdWJzY3JpYmUoe3V1aWQ6ZmluLm1lLnV1aWR9LGUsdCkpKSxyZW1vdmVMaXN0ZW5lcjpPZSh0KSxvbmNlOk1lKHQpfX0oXCJ3aW5kb3cubWVudVwiKSxTYT1lPT52YS5lbWl0KGhhLlJlc3BvbnNlLGUpLFBhPVNlKCgoKT0+TCgpLmdldENoaWxkV2luZG93cygpKSw1MDApO2NvbnN0IGJhPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24ga2Eoe29wdGlvbnM6ZSxwYXJhbWV0ZXJzOnR9LGEpe2NvbnN0IG49eWEoZSkse25hbWU6b309bjtsZXQgcj1hd2FpdCBhc3luYyBmdW5jdGlvbihlKXtyZXR1cm4oYXdhaXQgUGEoKSkuZmluZCgodD0+dC5pZGVudGl0eS5uYW1lPT09ZSkpfShvKTtyZXR1cm4gcnx8KHI9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSl7Y29uc3QgdD15YShlKTtpZighYmEuaGFzKHQubmFtZSkpe2NvbnN0IGU9KGFzeW5jKCk9Pntjb25zdCBlPWF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmNyZWF0ZVdpbmRvdyh0KTtyZXR1cm4gZS5vbmNlKFwiY2xvc2VkXCIsKCgpPT57YmEuZGVsZXRlKHQubmFtZSl9KSksZX0pKCk7YmEuc2V0KHQubmFtZSxlKX1yZXR1cm4gYmEuZ2V0KHQubmFtZSl9KG4pKSxhd2FpdCBhc3luYyBmdW5jdGlvbihlLHQpe2NvbnN0IGE9eWEoZSkse3RvcDpuLGxlZnQ6byxkZWZhdWx0V2lkdGg6cixkZWZhdWx0SGVpZ2h0Oml9PWEscz17dG9wOm4sbGVmdDpvLHdpZHRoOnIsaGVpZ2h0Oml9LGM9e3BhcmVudE5hbWU6ZmluLldpbmRvdy5nZXRDdXJyZW50U3luYygpLmlkZW50aXR5Lm5hbWV9O2Zvcihjb25zdFtlLGFdb2YgT2JqZWN0LmVudHJpZXMoYykpdC5zZXQoZSxhKTtjb25zdCBkPXQudG9TdHJpbmcoKSxwPWAke2EudXJsfT8ke2R9YDt2YS5lbWl0KGhhLlVwZGF0ZSxhLm5hbWUscyxwKSxhd2FpdCBTYSh7bmFtZTphLm5hbWUsZGF0YTptYS5DYW5jZWxlZH0pfShlLHR8fG5ldyBVUkxTZWFyY2hQYXJhbXMpLGEmJnIuY2VudGVyKCkscn1jb25zdCBXYT1hc3luYyhlLHQsYSk9Pntjb25zdCBuPXQ/Rih0KTokKCk7aWYoIWEpe2F3YWl0KGFzeW5jKGU9ZmluLm1lLmlkZW50aXR5KT0+e2NvbnN0IHQ9RihlKSxhPWF3YWl0IHQuZ2V0Qm91bmRzKCk7KGEucmlnaHQ+c2NyZWVuLmF2YWlsTGVmdCtzY3JlZW4ud2lkdGh8fGEubGVmdDxzY3JlZW4uYXZhaWxMZWZ0fHxhLmJvdHRvbT5zY3JlZW4uYXZhaWxUb3Arc2NyZWVuLmhlaWdodHx8YS50b3A8c2NyZWVuLmF2YWlsVG9wKSYmYXdhaXQgdC5jZW50ZXIoKX0pKG4uaWRlbnRpdHkpO2NvbnN0IHQ9KGU9Pih7bGVmdDooZS5sZWZ0K2UucmlnaHQpLzIsdG9wOihlLnRvcCtlLmJvdHRvbSkvMn0pKShhd2FpdCBuLmdldEJvdW5kcygpKSx7ZGVmYXVsdEhlaWdodDphLGRlZmF1bHRXaWR0aDpvfT1lO3JldHVybigoZSx0KT0+e2NvbnN0e2hlaWdodDphLHdpZHRoOm59PXQsbz1uLzIscj1hLzI7cmV0dXJue2xlZnQ6ZS5sZWZ0LW8sdG9wOmUudG9wLXJ9fSkodCx7aGVpZ2h0OmEsd2lkdGg6b30pfXJldHVybiBhd2FpdCBuLmdldEJvdW5kcygpfSxDYT1hc3luYyh7b3B0aW9uczplLGNvbnRlbnQ6dH0sYSk9Pntjb25zdCBuPW5ldyBVUkxTZWFyY2hQYXJhbXMoey4uLnR9KTtyZXR1cm4gYXdhaXQga2Eoe29wdGlvbnM6ZSxwYXJhbWV0ZXJzOm59LGEpLG5ldyBQcm9taXNlKCh0PT57dmEub25jZShoYS5SZXNwb25zZSwoYT0+e2EubmFtZT09PWUubmFtZSYmdChhKX0pKX0pKX0sSWE9YXN5bmMoZSx0KT0+e2NvbnN0e3dpbmRvd09wdGlvbnM6YSxjb250ZW50Om59PWF3YWl0KGFzeW5jKGUsdCk9Pih7dGl0bGU6XCJTd2l0Y2ggV29ya3NwYWNlXCIsd2luZG93T3B0aW9uczp7dXJsOk0rcGEuUmVzcG9uc2VNb2RhbCxuYW1lOlYuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxMTIsZGVmYXVsdFdpZHRoOjQyNCxtb2RhbFBhcmVudElkZW50aXR5OmV9LGNvbnRlbnQ6e3RpdGxlOmBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc3dpdGNoIHRvICR7dH1gLGJvZHk6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsYWZmaXJtYXRpdmVCdXR0b246XCJDb25maXJtXCIsbmVnYXRpdmVCdXR0b246XCJDYW5jZWxcIn19KSkoZSx0KSxvPWF3YWl0IFdhKGEsYS5tb2RhbFBhcmVudElkZW50aXR5KSxyPXsuLi5hLHRvcDpvLnRvcCxsZWZ0Om8ubGVmdH07cmV0dXJuKGF3YWl0IENhKHtvcHRpb25zOnIsY29udGVudDpufSkpLmRhdGE9PT1tYS5BZmZpcm1hdGl2ZX0sQWE9YXN5bmMoZSx0KT0+e2NvbnN0e3dpbmRvd09wdGlvbnM6YSxjb250ZW50Om59PWF3YWl0KGFzeW5jKGUsdCk9Pih7dGl0bGU6XCJEZWxldGUgV29ya3NwYWNlXCIsd2luZG93T3B0aW9uczp7dXJsOk0rcGEuUmVzcG9uc2VNb2RhbCxuYW1lOlYuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxNDQsZGVmYXVsdFdpZHRoOjM3Mixtb2RhbFBhcmVudElkZW50aXR5OmV9LGNvbnRlbnQ6e3RpdGxlOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBlcm1hbmVudGx5IGRlbGV0ZSB0aGlzIHdvcmtzcGFjZT9cIixib2R5OmAke3R9YCxhZmZpcm1hdGl2ZUJ1dHRvbjpcIkNvbmZpcm1cIixuZWdhdGl2ZUJ1dHRvbjpcIkNhbmNlbFwifX0pKShlLHQpLG89YXdhaXQgV2EoYSxhLm1vZGFsUGFyZW50SWRlbnRpdHkpLHI9ey4uLmEsdG9wOm8udG9wLGxlZnQ6by5sZWZ0fTtyZXR1cm4oYXdhaXQgQ2Eoe29wdGlvbnM6cixjb250ZW50Om59KSkuZGF0YT09PW1hLkFmZmlybWF0aXZlfSxNYT1hc3luYyhlLHQsYSk9Pntjb25zdCBuPWE/dm9pZCAwOmUse3dpbmRvd09wdGlvbnM6byxjb250ZW50OnJ9PWF3YWl0KGFzeW5jKGUsdCk9Pih7dGl0bGU6XCJQbGF0Zm9ybSBRdWl0XCIsd2luZG93T3B0aW9uczp7dXJsOk0rcGEuUmVzcG9uc2VNb2RhbCxuYW1lOlYuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxMzQsZGVmYXVsdFdpZHRoOjQ3NCxtb2RhbFBhcmVudElkZW50aXR5OnR9LGNvbnRlbnQ6e3RpdGxlOmBDbG9zZSB0aGUgJHtcIlBsYXRmb3JtXCI9PT1lP1wicGxhdGZvcm1cIjpgJHtlfSBQbGF0Zm9ybWB9P2AsYm9keTpcIkNsb3NpbmcgYSBwbGF0Zm9ybSB3aWxsIGNsb3NlIGFueSB3b3Jrc3BhY2VzLCBhcHBzIG9yIGFueSBwcm9jZXNzZXMgdGhhdCBhcmUgcnVubmluZy5cIixhZmZpcm1hdGl2ZUJ1dHRvbjpcIkNvbmZpcm1cIixuZWdhdGl2ZUJ1dHRvbjpcIkNhbmNlbFwifX0pKSh0LG4pLGk9YXdhaXQgV2EobyxvLm1vZGFsUGFyZW50SWRlbnRpdHkpLHM9ey4uLm8sdG9wOmkudG9wLGxlZnQ6aS5sZWZ0fTtyZXR1cm4oYXdhaXQgQ2Eoe29wdGlvbnM6cyxjb250ZW50OnJ9LGEpKS5kYXRhPT09bWEuQWZmaXJtYXRpdmV9LE9hPWFzeW5jIGU9Pntjb25zdHt3aW5kb3dPcHRpb25zOnQsY29udGVudDphfT1hd2FpdChhc3luYyBlPT4oe3RpdGxlOlwiUmVzdG9yZSBDaGFuZ2VzXCIsd2luZG93T3B0aW9uczp7dXJsOk0rcGEuUmVzcG9uc2VNb2RhbCxuYW1lOlYuQnJvd3Nlck1lbnUsZGVmYXVsdEhlaWdodDoxMTIsZGVmYXVsdFdpZHRoOjQyNCxtb2RhbFBhcmVudElkZW50aXR5OmV9LGNvbnRlbnQ6e3RpdGxlOlwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlc3RvcmUgdG8gbGFzdCBzYXZlZCBjaGFuZ2VzP1wiLGJvZHk6XCJBbnkgdW5zYXZlZCBjaGFuZ2VzIHdpbGwgYmUgZGlzY2FyZGVkXCIsYWZmaXJtYXRpdmVCdXR0b246XCJDb25maXJtXCIsbmVnYXRpdmVCdXR0b246XCJDYW5jZWxcIn19KSkoZSksbj1hd2FpdCBXYSh0LHQubW9kYWxQYXJlbnRJZGVudGl0eSksbz17Li4udCx0b3A6bi50b3AsbGVmdDpuLmxlZnR9O3JldHVybihhd2FpdCBDYSh7b3B0aW9uczpvLGNvbnRlbnQ6YX0pKS5kYXRhPT09bWEuQWZmaXJtYXRpdmV9O3ZhciBUYTshZnVuY3Rpb24oZSl7ZS5FUlJPUj1cImVycm9yXCIsZS5TVUNDRVNTPVwic3VjY2Vzc1wiLGUuSU5GTz1cImluZm9cIn0oVGF8fChUYT17fSkpO2NvbnN0IEVhPXthbHdheXNPblRvcDohMCxhdXRvU2hvdzohMSxmcmFtZTohMSxyZXNpemFibGU6ITEsc2hvd1Rhc2tiYXJJY29uOiExfTt2YXIgQmE7IWZ1bmN0aW9uKGUpe2UuTG9ja2VkPVwiTG9ja0Nsb3NlZEljb25cIixlLlVubG9ja2VkPVwiTG9ja09wZW4xSWNvblwifShCYXx8KEJhPXt9KSk7Y29uc3QgeGE9ZnVuY3Rpb24oZT1FYSl7Y29uc3QgdD1uZXcgTWFwO3JldHVybiBhc3luYyhhLG4sbyxyKT0+e2lmKHQuaGFzKGEpKXtjb25zdHtjdXJyZW50VXJsOmUsY3VycmVudE5hbWU6b309dC5nZXQoYSk7aWYoZT09PW4pcmV0dXJuO2NvbnN0IHI9ZmluLldpbmRvdy53cmFwU3luYyh7dXVpZDpmaW4ubWUudXVpZCxuYW1lOm99KTthd2FpdCByLmNsb3NlKCl9Y29uc3QgaT1gJHtWLkhvbWVJbnRlcm5hbH0tJHtEYXRlLm5vdygpfSR7TWF0aC5yYW5kb20oKX1gO3Quc2V0KGEse2N1cnJlbnRVcmw6bixjdXJyZW50TmFtZTppfSk7Y29uc3Qgcz1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5jcmVhdGVXaW5kb3coey4uLmUsbmFtZTppLHVybDpufSk7KChlLHQpPT57Y29uc3QgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsdHx8XCJwb2xpdGVcIiksKGU9PntlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLndpZHRoPVwiMXB4XCIsZS5zdHlsZS5oZWlnaHQ9XCIxcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIwXCIsZS5zdHlsZS5tYXJnaW49XCItMXB4XCIsZS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLGUuc3R5bGUud2hpdGVTcGFjZT1cIm5vd3JhcFwiLGUuc3R5bGUuYm9yZGVyPVwiMFwifSkoYSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSxzZXRUaW1lb3V0KCgoKT0+e2EuaW5uZXJIVE1MPWV9KSwxMDApLHNldFRpbWVvdXQoKCgpPT57ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX0pLDFlMyl9KShgTmV3ICR7cn0gaW5kaWNhdG9yOiAke299YCkscy5vbmNlKFwiY2xvc2VkXCIsKCgpPT57dC5kZWxldGUoYSl9KSl9fSgpO2FzeW5jIGZ1bmN0aW9uIFJhKGUsdCxhLG4pe2NvbnN0IG89bmV3IFVSTFNlYXJjaFBhcmFtcztvLmFwcGVuZChcInR5cGVcIixlKSxvLmFwcGVuZChcIm1lc3NhZ2VcIix0KSxvLmFwcGVuZChcInBhcmVudE5hbWVcIixhfHxcIlwiKSxvLmFwcGVuZChcImljb25cIixufHxcIlwiKTtjb25zdCByPWAke2ZhKHBhLkJyb3dzZXJJbmRpY2F0b3IpfT8ke28udG9TdHJpbmcoKX1gO3JldHVybiB4YShcImJyb3dzZXJcIithLHIsdCxlKX1mdW5jdGlvbiBfYShlLHQsYSl7cmV0dXJuIFJhKFRhLlNVQ0NFU1MsZSx0LGEpfWNvbnN0IExhPWFzeW5jIGU9Pntjb25zdCB0PUZ0KCksYT1hd2FpdCB0LmdldEN1cnJlbnRXb3Jrc3BhY2UoKSxuPWF3YWl0IHQuU3RvcmFnZS5nZXRXb3Jrc3BhY2VzKCksbz1hLndvcmtzcGFjZUlkO2lmKG4uc29tZSgoZT0+ZS53b3Jrc3BhY2VJZD09PW8pKSl0LlN0b3JhZ2Uuc2F2ZVdvcmtzcGFjZShhKSx0LnNldEFjdGl2ZVdvcmtzcGFjZShhKSxfYShcIldvcmtzcGFjZSBTYXZlZFwiLGUubmFtZSk7ZWxzZXt0LkJyb3dzZXIud3JhcFN5bmMoZSkuX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOm0uU0FWRV9XT1JLU1BBQ0V9KX19LFZhPWU9PntGdCgpLkJyb3dzZXIud3JhcFN5bmMoZSkuX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOm0uU0FWRV9XT1JLU1BBQ0VfQVN9KX0sRGE9YXN5bmMoZSx0KT0+e2NvbnN0IGE9RnQoKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49YXdhaXQgRnQoKS5TdG9yYWdlLmdldFBhZ2VzKCksbz0oYXdhaXQgYS5nZXRQYWdlcygpKS5maW5kKChlPT50P2UucGFnZUlkPT09dDplLmlzQWN0aXZlKSkscj1uLnNvbWUoKGU9Pm8ucGFnZUlkPT09ZS5wYWdlSWQpKTtpZihyKXRyeXthd2FpdCBGdCgpLlN0b3JhZ2Uuc2F2ZVBhZ2UoKGQ9byx7Li4uZCxoYXNVbnNhdmVkQ2hhbmdlczp2b2lkIDAscGFyZW50SWRlbnRpdHk6dm9pZCAwLGlzQWN0aXZlOnZvaWQgMH0pKSxhd2FpdCBhLnVwZGF0ZVBhZ2Uoe3BhZ2VJZDpvLnBhZ2VJZCxwYWdlOntoYXNVbnNhdmVkQ2hhbmdlczohMX19KSxfYShcIlBhZ2Ugc2F2ZWRcIixvLnBhcmVudElkZW50aXR5Lm5hbWUpfWNhdGNoe2k9XCJQYWdlIGZhaWxlZCB0byBzYXZlXCIscz1vLnBhcmVudElkZW50aXR5Lm5hbWUsUmEoVGEuRVJST1IsaSxzLGMpfWVsc2UgYS5fb3BlblNhdmVNb2RhbCh7aWQ6by5wYWdlSWQsbWVudVR5cGU6bS5TQVZFX1BBR0V9KTt2YXIgaSxzLGMsZH0sVWE9YXN5bmMoZSx0KT0+e2NvbnN0IGE9RnQoKS5Ccm93c2VyLndyYXBTeW5jKGUpLG49KGF3YWl0IGEuZ2V0UGFnZXMoKSkuZmluZCgoZT0+dD9lLnBhZ2VJZD09PXQ6ZS5pc0FjdGl2ZSkpO2EuX29wZW5TYXZlTW9kYWwoe2lkOm4ucGFnZUlkLG1lbnVUeXBlOm0uU0FWRV9QQUdFX0FTfSl9LEZhPWFzeW5jKGUsdCk9PntpZighZSlyZXR1cm47Y29uc3QgYT10LmlkZW50aXR5LG49YXdhaXQgUmUoYSksbz1GdCgpLkJyb3dzZXIud3JhcFN5bmModC5pZGVudGl0eSk7c3dpdGNoKGUudHlwZSl7Y2FzZSB1Lk5ld1dpbmRvdzpjb25zdHtuZXdQYWdlVXJsOnR9PWF3YWl0IEd0KGEpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBjcmVhdGUgYSBuZXcgZW1wdHkgd2luZG93IHdpdGhvdXQgYSBuZXdQYWdlVXJsIHNldFwiKTtGdCgpLmNyZWF0ZVZpZXcoe3RhcmdldDp2b2lkIDAsdXJsOnR9KTticmVhaztjYXNlIHUuTmV3UGFnZTphd2FpdChhc3luYyBlPT57Y29uc3QgdD1GdCgpLkJyb3dzZXIud3JhcFN5bmMoZSksYT1hd2FpdCAkdChlKTthd2FpdCB0LmFkZFBhZ2UoYSksYXdhaXQgdC5zZXRBY3RpdmVQYWdlKGEucGFnZUlkKX0pKGEpO2JyZWFrO2Nhc2UgdS5DbG9zZVdpbmRvdzpuLmRpc3BhdGNoKFZlLkNsb3NlQnJvd3NlcldpbmRvdyk7YnJlYWs7Y2FzZSB1LlNhdmVXb3Jrc3BhY2U6YXdhaXQgTGEoYSk7YnJlYWs7Y2FzZSB1LlNhdmVQYWdlOmF3YWl0IERhKGEpO2JyZWFrO2Nhc2UgdS5TYXZlUGFnZUFzOmF3YWl0IFVhKGEpO2JyZWFrO2Nhc2UgdS5TYXZlV29ya3NwYWNlQXM6YXdhaXQgVmEoYSk7YnJlYWs7Y2FzZSB1LlJlbmFtZVdvcmtzcGFjZTpvLl9vcGVuU2F2ZU1vZGFsKHttZW51VHlwZTptLlJFTkFNRV9XT1JLU1BBQ0V9KTticmVhaztjYXNlIHUuU3dpdGNoV29ya3NwYWNlOmF3YWl0KGFzeW5jKGUsdCk9Pntjb25zdCBhPUZ0KCksbj0oYXdhaXQgYS5TdG9yYWdlLmdldFdvcmtzcGFjZXMoKSkuZmluZCgoZT0+ZS53b3Jrc3BhY2VJZD09PXQud29ya3NwYWNlSWQpKTtuJiZhd2FpdCBJYShlLG4udGl0bGUpJiYoYXdhaXQgYS5hcHBseVdvcmtzcGFjZShuKSxfYShcIldvcmtzcGFjZSBTd2l0Y2hlZCFcIixudWxsKSl9KShhLGUpO2JyZWFrO2Nhc2UgdS5EZWxldGVXb3Jrc3BhY2U6YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9RnQoKSxuPShhd2FpdCBhLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpO24mJmF3YWl0IEFhKGUsbi50aXRsZSkmJihhd2FpdCBhLlN0b3JhZ2UuZGVsZXRlV29ya3NwYWNlKHQud29ya3NwYWNlSWQpLF9hKFwiV29ya3NwYWNlIERlbGV0ZWQhXCIsZS5uYW1lKSl9KShhLGUpO2JyZWFrO2Nhc2UgdS5RdWl0OmNvbnN0IHI9YXdhaXQgaWEoKTthd2FpdCBNYShhLHIpJiZmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5xdWl0KCk7YnJlYWs7Y2FzZSB1Lk9wZW5TdG9yZWZyb250Oihhc3luYygpPT57YXdhaXQgUSgpJiZqKE4pfSkoKTticmVhaztjYXNlIHUuUmVzdG9yZUNoYW5nZXM6Y29uc3QgaT1hd2FpdCBhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9RnQoKSx0PWF3YWl0IGUuZ2V0Q3VycmVudFdvcmtzcGFjZSgpO3JldHVybihhd2FpdCBlLlN0b3JhZ2UuZ2V0V29ya3NwYWNlcygpKS5maW5kKChlPT5lLndvcmtzcGFjZUlkPT09dC53b3Jrc3BhY2VJZCkpfSgpO2F3YWl0IE9hKGEpJiZhd2FpdCB1ZShpKTticmVhaztjYXNlIHUuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCB0PXtjYWxsZXJUeXBlOmguR2xvYmFsQ29udGV4dE1lbnUsd2luZG93SWRlbnRpdHk6YSxjdXN0b21EYXRhOmUuYWN0aW9uLmN1c3RvbURhdGF9O0Z0KCkuX2ludm9rZUN1c3RvbUFjdGlvbihlLmFjdGlvbi5pZCx0KX19fSxHYT1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBSZSh0LmlkZW50aXR5KSxuPUZ0KCk7c3dpdGNoKGU/LnR5cGUpe2Nhc2Ugdy5TYXZlOmF3YWl0IERhKHQuaWRlbnRpdHksdC5wYWdlSWQpO2JyZWFrO2Nhc2Ugdy5TYXZlQXM6YXdhaXQgVWEodC5pZGVudGl0eSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSB3LlJlbmFtZTphd2FpdCBuLkJyb3dzZXIud3JhcFN5bmModC5pZGVudGl0eSkuX29wZW5TYXZlTW9kYWwoe21lbnVUeXBlOm0uUkVOQU1FX1BBR0UsaWQ6dC5wYWdlSWR9KTticmVhaztjYXNlIHcuRHVwbGljYXRlOmEuZGlzcGF0Y2goVmUuRHVwbGljYXRlUGFnZSx0LnBhZ2VJZCk7YnJlYWs7Y2FzZSB3LkNsb3NlOmEuZGlzcGF0Y2goVmUuQ2xvc2VQYWdlLHQucGFnZUlkKTticmVhaztjYXNlIHcuQ3VzdG9tOmlmKGUuYWN0aW9uKXtjb25zdCBhPXtjYWxsZXJUeXBlOmguUGFnZVRhYkNvbnRleHRNZW51LHdpbmRvd0lkZW50aXR5OnQuaWRlbnRpdHkscGFnZUlkOnQucGFnZUlkLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07RnQoKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLGEpfX19LCRhPWFzeW5jKGUsdCk9PntpZihlPy50eXBlKXtjb25zdCBhPXQuaWRlbnRpdHk7c3dpdGNoKGUudHlwZSl7Y2FzZSB5LlNhdmVQYWdlOmF3YWl0IERhKGEpO2JyZWFrO2Nhc2UgeS5TYXZlV29ya3NwYWNlOmF3YWl0IExhKGEpO2JyZWFrO2Nhc2UgeS5TYXZlUGFnZUFzOmF3YWl0IFVhKGEpO2JyZWFrO2Nhc2UgeS5TYXZlV29ya3NwYWNlQXM6YXdhaXQgVmEoYSk7YnJlYWs7Y2FzZSB5LkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3QgYT17Y2FsbGVyVHlwZTpoLlNhdmVCdXR0b25Db250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTp0LmlkZW50aXR5LHBhZ2VJZDp0LnBhZ2VJZCxjdXN0b21EYXRhOmUuYWN0aW9uLmN1c3RvbURhdGF9O0Z0KCkuX2ludm9rZUN1c3RvbUFjdGlvbihlLmFjdGlvbi5pZCxhKX19fX0sTmE9YXN5bmMoZSx0KT0+e2NvbnN0IGE9dC5zZWxlY3RlZFZpZXdzWzBdLG49ZmluLlZpZXcud3JhcFN5bmMoYSksbz1hd2FpdChhc3luYyBlPT57Y29uc3R7bmV3VGFiVXJsOnR9PWF3YWl0IEd0KGUpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBjcmVhdGUgYSBuZXcgcGFnZSB3aXRob3V0IGEgbmV3VGFiVXJsIHNldFwiKTtyZXR1cm57Li4uQ2UoXCJOZXcgVmlld1wiLHQpLHVybDp0LHRhcmdldDplfX0pKGUpO2F3YWl0IEZ0KCkuY3JlYXRlVmlldyhvLGUsbi5pZGVudGl0eSl9LGphPWFzeW5jKGUsdCk9Pntjb25zdCBhPWF3YWl0KGU9PlByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT5maW4uVmlldy53cmFwU3luYyhlKS5nZXRJbmZvKCkpKSkpKHQpLHtuZXdQYWdlVXJsOm4sbmV3VGFiVXJsOm99PWF3YWl0IEd0KGUpO2EuZm9yRWFjaCgoYXN5bmMgZT0+e2UudXJsIT09biYmZS51cmwhPT1vJiZhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3NlcihlLnVybCl9KSl9LEhhPShlLHQpPT57dC5mb3JFYWNoKChhc3luYyB0PT57Y29uc3QgYT1maW4uVmlldy53cmFwU3luYyh0KTthd2FpdChhc3luYyhlLHQpPT57Y29uc3R7dXJsOmF9PWF3YWl0IHQuZ2V0SW5mbygpLG49ey4uLmF3YWl0IHQuZ2V0T3B0aW9ucygpLHVybDphLHRhcmdldDplLG5hbWU6dm9pZCAwfTthd2FpdCBGdCgpLmNyZWF0ZVZpZXcobixlLHQuaWRlbnRpdHkpfSkoZSxhKX0pKX0scWE9YXN5bmMoZSx0KT0+e2lmKCFlKXJldHVybjtjb25zdCBhPXQuaWRlbnRpdHk7c3dpdGNoKGUudHlwZSl7Y2FzZSBmLkNsb3NlVmlld3M6YXdhaXQoYXN5bmMoZSx0KT0+e2lmKChhd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKGUpLmdldEN1cnJlbnRWaWV3cygpKS5sZW5ndGghPT10Lmxlbmd0aCl0LmZvckVhY2goKGFzeW5jIGU9Pntjb25zdCB0PWZpbi5WaWV3LndyYXBTeW5jKGUpO2F3YWl0IHQuZGVzdHJveSgpfSkpO2Vsc2V7Y29uc3QgdD0oYXdhaXQgRnQoKS5Ccm93c2VyLndyYXBTeW5jKGUpLmdldFBhZ2VzKCkpLmZpbmQoKGU9PmUuaXNBY3RpdmUpKTsoYXdhaXQgUmUoZSkpLmRpc3BhdGNoKFZlLkNsb3NlUGFnZSx0Py5wYWdlSWQpfX0pKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIGYuT3BlbldpdGhEZWZhdWx0QnJvd3Nlcjphd2FpdCBqYShhLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBmLlJlbG9hZFZpZXdzOnQuc2VsZWN0ZWRWaWV3cy5mb3JFYWNoKChhc3luYyBlPT57Y29uc3QgdD1maW4uVmlldy53cmFwU3luYyhlKTthd2FpdCB0LnJlbG9hZCgpfSkpO2JyZWFrO2Nhc2UgZi5OZXdWaWV3OmF3YWl0IE5hKGEsdCk7YnJlYWs7Y2FzZSBmLkR1cGxpY2F0ZVZpZXdzOkhhKGEsdC5zZWxlY3RlZFZpZXdzKTticmVhaztjYXNlIGYuQWRkVG9DaGFubmVsOihhc3luYyhlLHQsYSk9Pntjb25zdCBuPXtuZXdDaGFubmVsSWQ6dCxzZWxlY3RlZFZpZXdzOmF9Oyhhd2FpdCBSZShlKSkuZGlzcGF0Y2goVmUuQWRkVG9DaGFubmVsLG4pfSkoYSxlLm9wdGlvbix0LnNlbGVjdGVkVmlld3MpO2JyZWFrO2Nhc2UgZi5SZW1vdmVGcm9tQ2hhbm5lbDooYXN5bmMoZSx0KT0+eyhhd2FpdCBSZShlKSkuZGlzcGF0Y2goVmUuUmVtb3ZlRnJvbUNoYW5uZWwsdCl9KShhLHQuc2VsZWN0ZWRWaWV3cyk7YnJlYWs7Y2FzZSBmLkN1c3RvbTppZihlLmFjdGlvbil7Y29uc3Qgbj17Y2FsbGVyVHlwZTpoLlZpZXdUYWJDb250ZXh0TWVudSx3aW5kb3dJZGVudGl0eTphLHNlbGVjdGVkVmlld3M6dC5zZWxlY3RlZFZpZXdzLGN1c3RvbURhdGE6ZS5hY3Rpb24uY3VzdG9tRGF0YX07RnQoKS5faW52b2tlQ3VzdG9tQWN0aW9uKGUuYWN0aW9uLmlkLG4pfX19O2FzeW5jIGZ1bmN0aW9uIEthKGUsdCl7Y29uc3QgYT1hd2FpdCBvYShlLmlkZW50aXR5KSxuPWF3YWl0IGlhKCk7YS5maW5kKChlPT5lLmRhdGE/LnR5cGU9PT11LlF1aXQpKS5sYWJlbD1gUXVpdCAke259YDtjb25zdCBvPXsuLi5lLHRlbXBsYXRlOmEsY2FsbGJhY2s6RmF9O2F3YWl0IHRoaXMub3Blbkdsb2JhbENvbnRleHRNZW51KG8sdCl9Y29uc3QgUWE9YXN5bmMoZSx0KT0+e2NvbnN0e3g6YSx5Om4saWRlbnRpdHk6byx0ZW1wbGF0ZTpyLGNhbGxiYWNrOml9PWUse2RhdGE6c309YXdhaXQgZnVuY3Rpb24oZSx0KXtpZighUyl0aHJvdyBuZXcgRXJyb3IoXCJzaG93Q29udGV4dE1lbnUgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbiBPcGVuRmluIGVudi4gQXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7aWYoIXQmJiFmaW4ubWUuaXNXaW5kb3cpdGhyb3cgbmV3IEVycm9yKFwic2hvd0NvbnRleHRNZW51IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiB3aW5kb3cuXCIpO3JldHVybih0fHxmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCkpLnNob3dQb3B1cE1lbnUoZSl9KHt4OmEseTpuLHRlbXBsYXRlOnJ9LGZpbi5XaW5kb3cud3JhcFN5bmMobykpO2kocyxlKX07YXN5bmMgZnVuY3Rpb24gemEoZSx0KXtjb25zdCBhPXsuLi5lLGNhbGxiYWNrOnFhfTthd2FpdCB0aGlzLm9wZW5WaWV3VGFiQ29udGV4dE1lbnUoYSx0KX1hc3luYyBmdW5jdGlvbiBKYShlLHQpe2NvbnN0IGE9YXdhaXQoYXN5bmMoZSx0KT0+e2NvbnN0IGE9YXdhaXQgRnQoKS5TdG9yYWdlLmdldFBhZ2UoZSksbj0oYXdhaXQgR2UoKSkuZmluZCgodD0+dC5wYWdlSWQ9PT1lKSkse3dvcmtzcGFjZVBsYXRmb3JtOm99PWF3YWl0IEYodCkuZ2V0T3B0aW9ucygpLHI9IShvLmlzTG9ja2VkfHxvLnByZXZlbnRQYWdlQ2xvc2V8fG4uY2xvc2VCdXR0b24/LmRpc2FibGVkfHxuLmNsb3NlQnV0dG9uPy5oaWRkZW4pO3JldHVyblt7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZVwiLGRhdGE6e3R5cGU6dy5TYXZlfX0se3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJTYXZlIFBhZ2UgQXNcIixkYXRhOnt0eXBlOncuU2F2ZUFzfX0sRXQse3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJSZW5hbWUgUGFnZVwiLGRhdGE6e3R5cGU6dy5SZW5hbWV9LGVuYWJsZWQ6ISFhfSx7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIkR1cGxpY2F0ZSBQYWdlXCIsZGF0YTp7dHlwZTp3LkR1cGxpY2F0ZX0sZW5hYmxlZDohby5pc0xvY2tlZH0sRXQse3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJDbG9zZSBQYWdlXCIsZGF0YTp7dHlwZTp3LkNsb3NlfSxlbmFibGVkOnJ9XX0pKGUucGFnZUlkLGUuaWRlbnRpdHkpLG49ey4uLmUsdGVtcGxhdGU6YSxjYWxsYmFjazpHYX07YXdhaXQgdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51KG4sdCl9YXN5bmMgZnVuY3Rpb24gWGEoZSx0KXtjb25zdCBhPXsuLi5lLHRlbXBsYXRlOmF3YWl0KGFzeW5jKCk9Plt7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlNhdmUgV29ya3NwYWNlXCIsZGF0YTp7dHlwZTp5LlNhdmVXb3Jrc3BhY2V9fSx7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlNhdmUgV29ya3NwYWNlIEFzXCIsZGF0YTp7dHlwZTp5LlNhdmVXb3Jrc3BhY2VBc319LHt0eXBlOlR0LlNlcGFyYXRvcixkYXRhOnZvaWQgMH0se3R5cGU6VHQuTGFiZWwsbGFiZWw6XCJTYXZlIFBhZ2VcIixkYXRhOnt0eXBlOnkuU2F2ZVBhZ2V9fSx7dHlwZTpUdC5MYWJlbCxsYWJlbDpcIlNhdmUgUGFnZSBBc1wiLGRhdGE6e3R5cGU6eS5TYXZlUGFnZUFzfX1dKSgpLGNhbGxiYWNrOiRhfTthd2FpdCB0aGlzLm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnUoYSx0KX1jb25zdCBZYT1iJiZndChcIm9wZW5maW4td29ya3NwYWNlLXBsYXRmb3JtLXdvcmtzcGFjZXNcIixcIndvcmtzcGFjZXNcIik7YXN5bmMgZnVuY3Rpb24gWmEoZSl7Y29uc3QgdD1hd2FpdCBtdChlLFlhKTtyZXR1cm4gdD8odC53b3Jrc3BhY2VJZD1lLnRvU3RyaW5nKCksdC50aXRsZT10LnRpdGxlfHx0LndvcmtzcGFjZUlkLHQpOm51bGx9YXN5bmMgZnVuY3Rpb24gZW4oZSl7Y29uc3QgdD1hd2FpdCBidChZYSksYT1hd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgoZT0+WmEoZS50b1N0cmluZygpKSkpKTtyZXR1cm4gZT9hLmZpbHRlcigodD0+a3QodC50aXRsZSxlKSkpOmF9YXN5bmMgZnVuY3Rpb24gdG4oe3dvcmtzcGFjZTplfSl7YXdhaXQgdnQoZS53b3Jrc3BhY2VJZCxlLFlhKX1hc3luYyBmdW5jdGlvbiBhbihlKXthd2FpdCBTdChlLFlhKX1hc3luYyBmdW5jdGlvbiBubih7d29ya3NwYWNlSWQ6ZSx3b3Jrc3BhY2U6dH0pe2lmKHZvaWQgMD09PWF3YWl0IFphKGUpKXRocm93IG5ldyBFcnJvcihcIndvcmtzcGFjZSBub3QgZm91bmRcIik7YXdhaXQgdG4oe3dvcmtzcGFjZTp0fSksZSE9PXQud29ya3NwYWNlSWQmJmF3YWl0IGFuKGUpfWFzeW5jIGZ1bmN0aW9uIG9uKHthcHA6ZSx0YXJnZXQ6dH0pe2NvbnN0IGE9ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCk7c3dpdGNoKGUubWFuaWZlc3RUeXBlKXtjYXNlIGMuU25hcHNob3Q6cmV0dXJuIGEuYXBwbHlTbmFwc2hvdChlLm1hbmlmZXN0KTtjYXNlIGMuVmlldzpyZXR1cm4gYXN5bmMgZnVuY3Rpb24oZSx0KXtjb25zdCBhPWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO2lmKFwidmlld1wiPT09dC5lbnRpdHlUeXBlKXtjb25zdCBhPWZpbi5WaWV3LndyYXBTeW5jKHQpLG49YXdhaXQgYS5nZXRQYXJlbnRMYXlvdXQoKTtyZXR1cm4gYXdhaXQgbi5yZXBsYWNlVmlldyh0LHttYW5pZmVzdFVybDplLm1hbmlmZXN0LHVybDp2b2lkIDAsdGFyZ2V0OnZvaWQgMH0pLGEuZGVzdHJveSgpfXJldHVybiBhLmNyZWF0ZVZpZXcoe25hbWU6dm9pZCAwLHVybDp2b2lkIDAsbWFuaWZlc3RVcmw6ZS5tYW5pZmVzdCx0YXJnZXQ6dm9pZCAwfSl9KGUsdCk7Y2FzZSBjLkV4dGVybmFsOnJldHVybiBmaW4uU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzcyh7cGF0aDplLm1hbmlmZXN0LHV1aWQ6ZS5hcHBJZH0pO2RlZmF1bHQ6cmV0dXJuIGZpbi5BcHBsaWNhdGlvbi5zdGFydEZyb21NYW5pZmVzdChlLm1hbmlmZXN0KX19Y29uc3Qgcm49ZT0+ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpO2Z1bmN0aW9uIHNuKGUsLi4udCl7aWYoIXQubGVuZ3RoKXJldHVybiBlO2NvbnN0IGE9dC5zaGlmdCgpO3JldHVybiBybihlKSYmcm4oYSkmJk9iamVjdC5lbnRyaWVzKGEpLmZvckVhY2goKChbdCxhXSk9PntpZihybihhKSlyZXR1cm4gZVt0XXx8KGVbdF09e30pLHNuKGVbdF0sYSk7ZVt0XT1hfSkpLHNuKGUsLi4udCl9Y29uc3QgY249TStwYS5Ccm93c2VyO2Z1bmN0aW9uIGRuKGUsdCl7Y29uc3QgYT1zbih7fSx0LGUpO3JldHVybiBhLmRldGFjaE9uQ2xvc2U9ITAsYX1hc3luYyBmdW5jdGlvbiBwbihlLHQsYSl7Y29uc3Qgbj1lLm1hbmlmZXN0VXJsP2F3YWl0IHQoe21hbmlmZXN0VXJsOmUubWFuaWZlc3RVcmx9LGEpOnZvaWQgMDtpZihuPy5pbnRlcm9wJiZlLmludGVyb3Ape2NvbnN0IHQ9ey4uLmUsLi4ubixpbnRlcm9wOmUuaW50ZXJvcH07cmV0dXJuIGRlbGV0ZSB0Lm1hbmlmZXN0VXJsLHR9cmV0dXJuIGV9Y29uc3QgbG49ZT0+e2NvbnN0IHQ9ZS5uYW1lPT09Vi5Ib21lLGE9ZS5uYW1lPy5zdGFydHNXaXRoKFYuSG9tZUludGVybmFsKSxuPWUubmFtZT8uc3RhcnRzV2l0aChWLkJyb3dzZXJNZW51KTtyZXR1cm4hdCYmIWEmJiFufSx1bj1lPT5cIndvcmtzcGFjZVBsYXRmb3JtXCJpbiBlP2U6KCh7d29ya3N0YWNrczplLHBhZ2VzOnQsLi4uYX0pPT4oey4uLmEsd29ya3NwYWNlUGxhdGZvcm06e3BhZ2VzOnR8fGV8fG51bGx9fSkpKGUpLHduPXtjb250ZXh0TWVudVNldHRpbmdzOntyZWxvYWQ6ITF9LGJhY2tncm91bmRUaHJvdHRsaW5nOiEwLHVybDpjbixjb250ZXh0TWVudTohMCxjbG9zZU9uTGFzdFZpZXdSZW1vdmVkOiExLGV4cGVyaW1lbnRhbDp7c2hvd0Zhdmljb25zOiEwLGRlZmF1bHRGYXZpY29uVXJsOmAke019L2ljb25zL2RlZmF1bHRGYXZpY29uLnN2Z2B9LHBlcm1pc3Npb25zOntTeXN0ZW06e29wZW5VcmxXaXRoQnJvd3Nlcjp7ZW5hYmxlZDohMCxwcm90b2NvbHM6W1wibWFpbHRvXCJdfX19fSxmbj17ZGltZW5zaW9uczp7Ym9yZGVyV2lkdGg6MyxoZWFkZXJIZWlnaHQ6MzB9fSxnbj1hc3luYyhlLHQpPT57Y29uc3QgYT1hd2FpdCBGdCgpLlN0b3JhZ2UuZ2V0UGFnZXMoKSxuPWF3YWl0IEZ0KCkuQnJvd3Nlci5nZXRBbGxBdHRhY2hlZFBhZ2VzKCk7cmV0dXJuIGUubWFwKChlPT57bGV0IG89ZS50aXRsZTt2b2lkIDA9PT1lLnBhZ2VJZCYmKGUucGFnZUlkPWNyeXB0by5yYW5kb21VVUlEKCkpO2NvbnN0IHI9YS5maW5kKChlPT5lLnRpdGxlPT09bykpO3JldHVybihyJiZyLnBhZ2VJZCE9PWUucGFnZUlkfHxuLmZpbmQoKGU9PmUudGl0bGU9PT1vKSkpJiYobz1sZShlLnRpdGxlLFsuLi5hLC4uLm5dLm1hcCgoZT0+ZS50aXRsZSkpKSksbi5wdXNoKHsuLi5lLHRpdGxlOm99KSx7Li4udCwuLi5lLHRpdGxlOm8sbGF5b3V0OihpPWUubGF5b3V0LGJlKHsuLi5pfSxrZSkpfTt2YXIgaX0pKX07dmFyIHluOyFmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJicm93c2VyXCIsZS5QbGF0Zm9ybT1cInBsYXRmb3JtXCIsZS5DbGFzc2ljPVwiY2xhc3NpY1wiLGUuTWl4ZWQ9XCJtaXhlZFwifSh5bnx8KHluPXt9KSk7Y29uc3QgaG49ZT0+e2NvbnN0IHQ9ZmluLldpbmRvdy53cmFwU3luYyhlKTtyZXR1cm4gUHJvbWlzZS5hbGwoW3QuYnJpbmdUb0Zyb250KCksdC5yZXN0b3JlKCksdC5mb2N1cygpXSl9O2FzeW5jIGZ1bmN0aW9uIG1uKGUpe2NvbnN0IHQ9KGF3YWl0IHEoKSkubWFwKChhc3luYyBlPT57Y29uc3QgdD1hd2FpdCBlLmdldE9wdGlvbnMoKTt0LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcyYmdC5sYXlvdXQmJmF3YWl0KGFzeW5jIGU9Pihhd2FpdCBSZShlKSkuZGlzcGF0Y2goVmUuVXBkYXRlUGFnZXNXaW5kb3dPcHRpb25zKSkoZS5pZGVudGl0eSl9KSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKHQpLGU/ZSgpOnd0KCl9Y29uc3Qgdm49YXN5bmMgZT0+e2F3YWl0IE1hKGZpbi5tZS5pZGVudGl0eSxlLnRpdGxlPz9hd2FpdCBpYSgpLGUuc2hvdWxkQ2VudGVyT25Nb25pdG9yKSYmZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkucXVpdCgpfTtsZXQgU249W107Y29uc3QgUG49KCk9PlNuO2NvbnN0IGJuPShlLHQpPT5hc3luYyBhPT57Y29uc3Qgbj1udWxsIT09ZTtjbGFzcyBvIGV4dGVuZHMgYXtjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5pc1dvcmtzcGFjZVBsYXRmb3JtPSgpPT4oe2lzV29ya3NwYWNlUGxhdGZvcm06ITAsaXNCcm93c2VySW5pdGlhbGl6ZWQ6ISFlfSksdGhpcy5hZGRQYWdlPXRoaXMuYXR0YWNoUGFnZXNUb1dpbmRvdyx0aGlzLmRldGFjaFBhZ2VzRnJvbVdpbmRvdz1YZSx0aGlzLmdldEFsbEF0dGFjaGVkUGFnZXM9R2UsdGhpcy5nZXRQYWdlc0ZvcldpbmRvdz1aZSx0aGlzLmdldFBhZ2VGb3JXaW5kb3c9ZXQsdGhpcy5zZXRBY3RpdmVQYWdlPVllLHRoaXMubGF1bmNoQXBwPW9uLHRoaXMuc2F2ZVBhZ2U9UWUsdGhpcy5zYXZlV29ya3NwYWNlPXllLHRoaXMuY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWw9SGUsdGhpcy51cGRhdGVTYXZlZFBhZ2VJbnRlcm5hbD1LZSx0aGlzLmRlbGV0ZVNhdmVkUGFnZUludGVybmFsPXFlLHRoaXMucmVvcmRlclBhZ2VzRm9yV2luZG93PXR0LHRoaXMuZ2V0VW5pcXVlUGFnZVRpdGxlPWF0LHRoaXMudXBkYXRlUGFnZUZvcldpbmRvdz1KZSx0aGlzLmdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1tZSx0aGlzLmdldFRoZW1lcz1Qbix0aGlzLmludm9rZUN1c3RvbUFjdGlvbkludGVybmFsPWN0LHRoaXMucmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPXZuLHRoaXMuZ2V0Q3VycmVudFdvcmtzcGFjZT1nZSx0aGlzLmFwcGx5V29ya3NwYWNlPXVlLHRoaXMuc2V0QWN0aXZlV29ya3NwYWNlPXdlLHRoaXMub3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWw9dGhpcy5vcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbC5iaW5kKHRoaXMpLHRoaXMub3Blbkdsb2JhbENvbnRleHRNZW51PXRoaXMub3Blbkdsb2JhbENvbnRleHRNZW51LmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFBhZ2VzPXRoaXMuZ2V0U2F2ZWRQYWdlcy5iaW5kKHRoaXMpLHRoaXMuZ2V0U2F2ZWRQYWdlPXRoaXMuZ2V0U2F2ZWRQYWdlLmJpbmQodGhpcyksdGhpcy5jcmVhdGVTYXZlZFBhZ2U9dGhpcy5jcmVhdGVTYXZlZFBhZ2UuYmluZCh0aGlzKSx0aGlzLnVwZGF0ZVNhdmVkUGFnZT10aGlzLnVwZGF0ZVNhdmVkUGFnZS5iaW5kKHRoaXMpLHRoaXMuZGVsZXRlU2F2ZWRQYWdlPXRoaXMuZGVsZXRlU2F2ZWRQYWdlLmJpbmQodGhpcyksdGhpcy5hdHRhY2hQYWdlc1RvV2luZG93PXRoaXMuYXR0YWNoUGFnZXNUb1dpbmRvdy5iaW5kKHRoaXMpLHRoaXMub3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsPXRoaXMub3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5vcGVuVmlld1RhYkNvbnRleHRNZW51PXRoaXMub3BlblZpZXdUYWJDb250ZXh0TWVudS5iaW5kKHRoaXMpLHRoaXMub3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsPXRoaXMub3BlblBhZ2VUYWJDb250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyksdGhpcy5vcGVuUGFnZVRhYkNvbnRleHRNZW51PXRoaXMub3BlblBhZ2VUYWJDb250ZXh0TWVudS5iaW5kKHRoaXMpLHRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2VzPXRoaXMuZ2V0U2F2ZWRXb3Jrc3BhY2VzLmJpbmQodGhpcyksdGhpcy5nZXRTYXZlZFdvcmtzcGFjZT10aGlzLmdldFNhdmVkV29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5jcmVhdGVTYXZlZFdvcmtzcGFjZT10aGlzLmNyZWF0ZVNhdmVkV29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy51cGRhdGVTYXZlZFdvcmtzcGFjZT10aGlzLnVwZGF0ZVNhdmVkV29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5kZWxldGVTYXZlZFdvcmtzcGFjZT10aGlzLmRlbGV0ZVNhdmVkV29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5nZXRDdXJyZW50V29ya3NwYWNlPXRoaXMuZ2V0Q3VycmVudFdvcmtzcGFjZS5iaW5kKHRoaXMpLHRoaXMuYXBwbHlXb3Jrc3BhY2U9dGhpcy5hcHBseVdvcmtzcGFjZS5iaW5kKHRoaXMpLHRoaXMuc2V0QWN0aXZlV29ya3NwYWNlPXRoaXMuc2V0QWN0aXZlV29ya3NwYWNlLmJpbmQodGhpcyksdGhpcy5vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51PXRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudS5iaW5kKHRoaXMpLHRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsPXRoaXMub3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsLmJpbmQodGhpcyl9YXN5bmMgZ2V0U25hcHNob3QoKXtjb25zdCBlPW4/YXdhaXQgbW4oKGFzeW5jKCk9Pnd0KGF3YWl0IHN1cGVyLmdldFNuYXBzaG90KHZvaWQgMCxmaW4ubWUuaWRlbnRpdHkpKSkpOmF3YWl0IHd0KGF3YWl0IHN1cGVyLmdldFNuYXBzaG90KHZvaWQgMCxmaW4ubWUuaWRlbnRpdHkpKTtyZXR1cm57Li4uZSx3aW5kb3dzOmUud2luZG93cy5maWx0ZXIobG4pLm1hcCh1dCl9fWFzeW5jIGFwcGx5U25hcHNob3Qoe3NuYXBzaG90OmUsb3B0aW9uczp0fSl7Y29uc3QgYT1lPT5zdXBlci5hcHBseVNuYXBzaG90KHtzbmFwc2hvdDplLG9wdGlvbnM6ey4uLnQsY2xvc2VFeGlzdGluZ1dpbmRvd3M6ITF9fSk7bGV0IG89ZTtcInN0cmluZ1wiPT10eXBlb2YgbyYmKG89YXdhaXQgc3VwZXIuZmV0Y2hNYW5pZmVzdCh7bWFuaWZlc3RVcmw6b30sZmluLm1lLmlkZW50aXR5KSk7Y29uc3Qgcj1mdW5jdGlvbihlKXtsZXQgdD0hMSxhPSExO2Zvcihjb25zdCBuIG9mIGUud2luZG93cyl7aWYodCYmYSlicmVhaztuLndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcz8ubGVuZ3RoP2E9ITA6bi5sYXlvdXQmJih0PSEwKX1yZXR1cm4gdCYmYT95bi5NaXhlZDp0P3luLlBsYXRmb3JtOmE/eW4uQnJvd3NlcjplLndpbmRvd3MubGVuZ3RoP3luLkNsYXNzaWM6bnVsbH0obyk7aWYocj09PXluLk1peGVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgc25hcHNob3QgY2Fubm90IGJlIGFwcGxpZWQgYXMgaXQgY29udGFpbnMgYSBtaXh0dXJlIG9mIGJyb3dzZXIgYW5kIHBsYXRmb3JtIHdpbmRvd3MuXCIpO2lmKG4peW4uUGxhdGZvcm07ZWxzZSBpZihyPT09eW4uQnJvd3Nlcil0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNuYXBzaG90IGNhbm5vdCBiZSBhcHBsaWVkIGFzIHRoZSBwbGF0Zm9ybSBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRob3V0IHRoZSBicm93c2VyLlwiKTtyZXR1cm4gdD8uY2xvc2VFeGlzdGluZ1dpbmRvd3MmJmF3YWl0IGFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgZT1hd2FpdCBxKCk7YXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGU9PmUuY2xvc2UoITApLmNhdGNoKCgoKT0+e30pKSkpKX0oKSxuP2FzeW5jIGZ1bmN0aW9uKGUsdCl7Y29uc3QgYT1hd2FpdCBHZSgpLG49ZS5zbmFwc2hvdERldGFpbHM/Lm1vbml0b3JJbmZvfHxhd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCksW28scl09KGUud2luZG93c3x8W10pLnJlZHVjZSgoKFtlLHRdLGEpPT5hPy53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXM/Lmxlbmd0aD9bWy4uLmUsYV0sdF06W2UsWy4uLnQsYV1dKSxbW10sW11dKSxpPW5ldyBNYXA7YS5mb3JFYWNoKChlPT5pLnNldChlLnBhZ2VJZCxlKSkpO2NvbnN0IHM9W10sYz1vLm1hcCgoYXN5bmMgZT0+e2NvbnN0IHQ9dW4oZSksYT1bXSxuPShlPT57bGV0IHQ9ITE7Y29uc3QgYT0oZXx8W10pLm1hcCgoZT0+e2NvbnN0IGE9ZnVuY3Rpb24oe2lkOmUsbmFtZTp0LC4uLmF9KXtyZXR1cm57cGFnZUlkOmUsdGl0bGU6dCwuLi5hfX0oZSk7cmV0dXJuIHQmJmEuaXNBY3RpdmUmJihhLmlzQWN0aXZlPSExKSxhLmlzQWN0aXZlJiYodD0hMCksYX0pKTtyZXR1cm4hdCYmYS5sZW5ndGgmJihhWzBdLmlzQWN0aXZlPSEwKSxhfSkodD8ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzKTtpZighbj8ubGVuZ3RoKXtjb25zdCBlPWF3YWl0IGF0KCk7YS5wdXNoKGF3YWl0IHh0KGUsdC5sYXlvdXQpKX1sZXQgbztuLmZvckVhY2goKGU9Pntjb25zdCB0PWkuZ2V0KGUucGFnZUlkKTt0P289dDphLnB1c2goZSl9KSksbyYmYXdhaXQgUHJvbWlzZS5hbGwoW1llKHtpZGVudGl0eTpvLnBhcmVudElkZW50aXR5LHBhZ2VJZDpvLnBhZ2VJZH0pLGhuKG8ucGFyZW50SWRlbnRpdHkpXSksYS5sZW5ndGgmJnMucHVzaCh7Li4udCx3b3Jrc3BhY2VQbGF0Zm9ybTp7Li4udC53b3Jrc3BhY2VQbGF0Zm9ybSxwYWdlczphfX0pfSkpO2lmKGF3YWl0IFByb21pc2UuYWxsKGMpLCFzLmxlbmd0aCYmIXIubGVuZ3RoKXJldHVybjtjb25zdCBkPWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO3JldHVybih0fHxkLmFwcGx5U25hcHNob3QuYmluZChkKSkoey4uLmUsc25hcHNob3REZXRhaWxzOnsuLi5lLnNuYXBzaG90RGV0YWlscyxtb25pdG9ySW5mbzpufSx3aW5kb3dzOlsuLi5zLC4uLnJdfSl9KG8sYSk6YShvKX1hc3luYyBjcmVhdGVXaW5kb3codCxhKXt0LndvcmtzcGFjZVBsYXRmb3JtPy50b29sYmFyT3B0aW9ucz8uYnV0dG9ucyYmKGU9Pntjb25zdCB0PWUuZmlsdGVyKChlPT5lLnR5cGUhPT1nLkN1c3RvbSkpLGE9bmV3IFNldDtmb3IoY29uc3QgZSBvZiB0KXtpZihhLmhhcyhlLnR5cGUpKXRocm93IG5ldyBFcnJvcihgRW5jb3VudGVyZWQgYSBkdXBsaWNhdGUgb2YgJHtlLnR5cGV9IGJ1dHRvbi4gTm8gbW9yZSB0aGFuIG9uZSBpbnN0YW5jZSBvZiBhIGJ1dHRvbiB0eXBlIG1heSBiZSBwcm92aWRlZC5gKTthLmFkZChlLnR5cGUpfX0pKHQud29ya3NwYWNlUGxhdGZvcm0udG9vbGJhck9wdGlvbnMuYnV0dG9ucyk7bGV0IG89dW4odCk7aWYobil7Y29uc3QgdD10aGlzLmdldFRoZW1lcygpO289YXdhaXQoYXN5bmMoZSx0LGEpPT57bGV0IG49ZTtjb25zdCBvPW4/LndvcmtzcGFjZVBsYXRmb3JtPy5wYWdlcztpZihvKXtjb25zdCBlPW8uZmluZCgoZT0+ZS5pc0FjdGl2ZSkpO2U/bi5sYXlvdXQ9ZS5sYXlvdXQ6KG9bMF0uaXNBY3RpdmU9ITAsbi5sYXlvdXQ9b1swXS5sYXlvdXQpfWlmKG4ubGF5b3V0KXtpZihuPXNuKHt9LHQuZGVmYXVsdFdpbmRvd09wdGlvbnMsbix3biksbi5sYXlvdXQ9c24obi5sYXlvdXQsZm4pLChuLmljb258fG4udGFza2Jhckljb24pJiYobi50YXNrYmFySWNvbkdyb3VwPW4udGFza2Jhckljb25Hcm91cHx8ZmluLm1lLmlkZW50aXR5LnV1aWQpLCFuLmJhY2tncm91bmRDb2xvcil7Y29uc3QgZT1hPy5wYWxldHRlO24uYmFja2dyb3VuZENvbG9yPWU/LmJhY2tncm91bmQyfHxlPy5iYWNrZ3JvdW5kUHJpbWFyeX1jb25zdCBlPW4ud29ya3NwYWNlUGxhdGZvcm0ubmV3VGFiVXJsO2lmKGUmJihuLmxheW91dC5zZXR0aW5nc3x8KG4ubGF5b3V0LnNldHRpbmdzPXt9KSxuLmxheW91dC5zZXR0aW5ncy5uZXdUYWJCdXR0b249e3VybDplfSksbj0oKGUsdCk9Pntjb25zdCBhPWU7cmV0dXJuIGEud29ya3NwYWNlUGxhdGZvcm18fChhLndvcmtzcGFjZVBsYXRmb3JtPXt9KSxhLndvcmtzcGFjZVBsYXRmb3JtLl9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM9e3NldEFzRm9yZWdyb3VuZDohIXQsZGVmZXJTaG93RW5hYmxlZDohMCxhdXRvU2hvdzphLndvcmtzcGFjZVBsYXRmb3JtPy5faW50ZXJuYWxBdXRvU2hvd3x8YS53b3Jrc3BhY2VQbGF0Zm9ybT8uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucz8uYXV0b1Nob3d8fHZvaWQgMD09PWEuYXV0b1Nob3d8fGEuYXV0b1Nob3d9LGEuYXV0b1Nob3c9ITEsYX0pKG4sITApLCFuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzPy5sZW5ndGgpe2NvbnN0IGU9YXdhaXQgYXQoXCJVbnRpdGxlZCBQYWdlXCIpLHQ9ey4uLmF3YWl0IHh0KGUsbi5sYXlvdXQpLGlzQWN0aXZlOiEwfTtuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzPVt0XX19cmV0dXJuIG4ud29ya3NwYWNlUGxhdGZvcm0/LnBhZ2VzJiYobi53b3Jrc3BhY2VQbGF0Zm9ybS5wYWdlcz1hd2FpdCBnbihuLndvcmtzcGFjZVBsYXRmb3JtLnBhZ2VzLHQ/LmRlZmF1bHRQYWdlT3B0aW9ucykpLG4uY29ybmVyUm91bmRpbmcmJmRlbGV0ZSBuLmNvcm5lclJvdW5kaW5nLG59KShvLGUsdFswXSl9bz1hd2FpdChhc3luYyBlPT57Y29uc3QgdD1hd2FpdCBmaW4uU3lzdGVtLmdldE1vbml0b3JJbmZvKCksYT10LnByaW1hcnlNb25pdG9yLmF2YWlsYWJsZVJlY3QuYm90dG9tLXQucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdC50b3Asbj10LnByaW1hcnlNb25pdG9yLmF2YWlsYWJsZVJlY3QucmlnaHQtdC5wcmltYXJ5TW9uaXRvci5hdmFpbGFibGVSZWN0LmxlZnQ7cmV0dXJuIGUuZGVmYXVsdEhlaWdodD1lLmRlZmF1bHRIZWlnaHR8fFwiODAwXCIsZS5kZWZhdWx0V2lkdGg9ZS5kZWZhdWx0V2lkdGh8fFwiODAwXCIsYTxlLmRlZmF1bHRIZWlnaHQmJihlLmRlZmF1bHRIZWlnaHQ9YSksbjxlLmRlZmF1bHRXaWR0aCYmKGUuZGVmYXVsdFdpZHRoPW4pLGV9KShvKTtjb25zdCByPShlLHQpPT5zdXBlci5jcmVhdGVXaW5kb3coZSx0KSxpPW4/KGU9PmFzeW5jKHQsYSk9PntsZXQgbj0hMTtjb25zdCBvPWF3YWl0IGUodCxhKTtyZXR1cm4gdD8ud29ya3NwYWNlUGxhdGZvcm0/Ll9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM/LmRlZmVyU2hvd0VuYWJsZWQ/KGF3YWl0IG8uYWRkTGlzdGVuZXIoRC5TaG93UmVxdWVzdGVkLChhc3luYygpPT57aWYobilyZXR1cm47Y29uc3QgZT1hd2FpdCBvLmdldE9wdGlvbnMoKTthd2FpdCBvLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnsuLi5lLndvcmtzcGFjZVBsYXRmb3JtLF9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM6ey4uLmUud29ya3NwYWNlUGxhdGZvcm0uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucyxhdXRvU2hvdzohMH19fSksbj0hMH0pKSxvKTpvfSkocik6cjtyZXR1cm4gaShvLGEpfWFzeW5jIGNyZWF0ZVZpZXcodCxhKXtyZXR1cm4gdC5vcHRzPWRuKHQub3B0cyxlPy5kZWZhdWx0Vmlld09wdGlvbnMpLHQub3B0cz1hd2FpdCBwbih0Lm9wdHMsdGhpcy5mZXRjaE1hbmlmZXN0LGEpLHN1cGVyLmNyZWF0ZVZpZXcodCxhKX1hc3luYyByZXBsYWNlVmlldyh0LGEpe3JldHVybiB0Lm9wdHMubmV3Vmlldz1hd2FpdCBkbih0Lm9wdHMubmV3VmlldyxlPy5kZWZhdWx0Vmlld09wdGlvbnMpLHQub3B0cy5uZXdWaWV3PWF3YWl0IHBuKHQub3B0cy5uZXdWaWV3LHRoaXMuZmV0Y2hNYW5pZmVzdCxhKSxzdXBlci5yZXBsYWNlVmlldyh0LGEpfWFzeW5jIHJlcGxhY2VMYXlvdXQoZSx0KXtyZXR1cm4gZGVsZXRlIGUub3B0cy5sYXlvdXQ/LmRpbWVuc2lvbnMsc3VwZXIucmVwbGFjZUxheW91dChlLHQpfWFzeW5jIGNsb3NlVmlldyhlLHQpe2NvbnN0IGE9ZmluLlZpZXcud3JhcFN5bmMoZS52aWV3KTthd2FpdCBzdXBlci5jbG9zZVZpZXcoZSx0KSxhd2FpdCBhLmRlc3Ryb3koKS5jYXRjaCgoZT0+ZSkpfWFzeW5jIGdldFNhdmVkUGFnZSguLi5lKXtyZXR1cm4gQ3QuYXBwbHkodGhpcyxlKX1hc3luYyBnZXRTYXZlZFBhZ2VzKC4uLmUpe3JldHVybiBJdC5hcHBseSh0aGlzLGUpfWFzeW5jIGNyZWF0ZVNhdmVkUGFnZSguLi5lKXtyZXR1cm4gQXQuYXBwbHkodGhpcyxlKX1hc3luYyBkZWxldGVTYXZlZFBhZ2UoLi4uZSl7cmV0dXJuIE10LmFwcGx5KHRoaXMsZSl9YXN5bmMgdXBkYXRlU2F2ZWRQYWdlKC4uLmUpe3JldHVybiBPdC5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNhdmVkV29ya3NwYWNlKC4uLmUpe3JldHVybiBaYS5hcHBseSh0aGlzLGUpfWFzeW5jIGdldFNhdmVkV29ya3NwYWNlcyguLi5lKXtyZXR1cm4gZW4uYXBwbHkodGhpcyxlKX1hc3luYyBjcmVhdGVTYXZlZFdvcmtzcGFjZSguLi5lKXtyZXR1cm4gdG4uYXBwbHkodGhpcyxlKX1hc3luYyBkZWxldGVTYXZlZFdvcmtzcGFjZSguLi5lKXtyZXR1cm4gYW4uYXBwbHkodGhpcyxlKX1hc3luYyB1cGRhdGVTYXZlZFdvcmtzcGFjZSguLi5lKXtyZXR1cm4gbm4uYXBwbHkodGhpcyxlKX1hc3luYyBhdHRhY2hQYWdlc1RvV2luZG93KHQpe3QucGFnZXM9YXdhaXQgZ24odC5wYWdlcyxlPy5kZWZhdWx0UGFnZU9wdGlvbnMpLGF3YWl0IHplKHQpfWFzeW5jIG9wZW5HbG9iYWxDb250ZXh0TWVudUludGVybmFsKC4uLmUpe3JldHVybiBLYS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5HbG9iYWxDb250ZXh0TWVudSguLi5lKXtyZXR1cm4gUWEuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuVmlld1RhYkNvbnRleHRNZW51SW50ZXJuYWwoLi4uZSl7cmV0dXJuIHphLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3BlblZpZXdUYWJDb250ZXh0TWVudSguLi5lKXtyZXR1cm4gUWEuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWwoLi4uZSl7cmV0dXJuIEphLmFwcGx5KHRoaXMsZSl9YXN5bmMgb3BlblBhZ2VUYWJDb250ZXh0TWVudSguLi5lKXtyZXR1cm4gUWEuYXBwbHkodGhpcyxlKX1hc3luYyBvcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51KC4uLmUpe3JldHVybiBRYS5hcHBseSh0aGlzLGUpfWFzeW5jIG9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbCguLi5lKXtyZXR1cm4gWGEuYXBwbHkodGhpcyxlKX19cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90KG8pOm5ldyBvfTthc3luYyBmdW5jdGlvbiBrbigpeyFmdW5jdGlvbigpe2NvbnN0IGU9TCgpO2UuYWRkTGlzdGVuZXIoQi5XaW5kb3dPcHRpb25zQ2hhbmdlZCxydCksZS5hZGRMaXN0ZW5lcihCLldpbmRvd0Nsb3NlZCxpdCksZS5hZGRMaXN0ZW5lcihCLldpbmRvd0NyZWF0ZWQsaXQpLGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnN1YnNjcmliZSh7dXVpZDpmaW4ubWUuaWRlbnRpdHkudXVpZH0sXCJicm93c2VyLXdpbmRvdy1yZWFkeVwiLGl0KX0oKSxhc3luYyBmdW5jdGlvbigpe2NvbnN0IGU9ZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCk7YXdhaXQgZS5hZGRMaXN0ZW5lcihcIndpbmRvdy1mb2N1c2VkXCIsdmUpfSgpO3dlKGF3YWl0IGZlKCkpfWxldCBXbjtmdW5jdGlvbiBDbih7b3ZlcnJpZGVDYWxsYmFjazplLGludGVyb3BPdmVycmlkZTp0LGJyb3dzZXI6YX0pe2lmKCFTKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBiZSB1c2VkIG91dHNpZGUgYW4gT3BlbkZpbiBlbnYuXCIpO2lmKCFXbil7ZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkub25jZShcInBsYXRmb3JtLWFwaS1yZWFkeVwiLCgoKT0+a24oKSkpLGE/LnRpdGxlJiYobj1hLnRpdGxlLHJhPW4pLFduPWZpbi5QbGF0Zm9ybS5pbml0KHtvdmVycmlkZUNhbGxiYWNrOmJuKGEsZXx8YT8ub3ZlcnJpZGVDYWxsYmFjayksaW50ZXJvcE92ZXJyaWRlOnR8fGE/LmludGVyb3BPdmVycmlkZX0pLChhc3luYyBlPT57Sih6LlBsYXRmb3JtLGUpfSkoe2FsbG93ZWQ6ITB9KX12YXIgbjtyZXR1cm4gV259Y29uc3QgSW49YXN5bmMoe3RoZW1lOmUsY3VzdG9tQWN0aW9uczp0LC4uLmF9KT0+e2NvbnN0IG49Ty5zcGxpdChcIi5cIikubWFwKChlPT5wYXJzZUludChlKSkpLG89YXdhaXQoYXN5bmMgZT0+bmV3IFByb21pc2UoKGFzeW5jIHQ9PnsoYXdhaXQgWigpKS5kaXNhYmxlUnVudGltZVZhbGlkYXRpb24mJnQoITApO2NvbnN0IGE9KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0VmVyc2lvbigpKS5zcGxpdChcIi5cIikubWFwKChlPT5wYXJzZUludChlKSkpO3QoZS5ldmVyeSgoKHQsbik9PiEobjwzKXx8YVtuXT09PWVbbl0pKSl9KSkpKG4pO3ZhciByO2lmKGUmJigocj1lKS5mb3JFYWNoKChlPT57Y29uc3QgdD1lLnBhbGV0dGUuYmFja2dyb3VuZFByaW1hcnk7aWYoIXQuaW5jbHVkZXMoXCIjXCIpJiYhdC5pbmNsdWRlcyhcInJnYlwiKSYmIXQuaW5jbHVkZXMoXCJoc2xcIikpdGhyb3cgbmV3IEVycm9yKFwiQmFja2dyb3VuZCBwcmltYXJ5IGNvbG9yIGlzIG5vdCB0aGUgcmlnaHQgZm9ybWF0LlwiKX0pKSxTbj1yLChhc3luYyBlPT57Sih6LlRoZW1pbmcsZSl9KSh7YWxsb3dlZDohMH0pKSx0JiYoc3Q9dCksbylyZXR1cm4gQ24oYSk7dGhyb3cgbmV3IEVycm9yKGBSdW50aW1lIHZlcnNpb24gaXMgbm90IHN1cHBvcnRlZC4gICR7blswXX0uJHtuWzFdfS4ke25bMl19LiogaXMgcmVxdWlyZWRgKX19KSgpLG1vZHVsZS5leHBvcnRzPW59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiKCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9ezcwMzooZSx0LG4pPT57bi5yKHQpLG4uZCh0LHtDTElBY3Rpb246KCk9PmwuUHQsQ0xJRmlsdGVyT3B0aW9uVHlwZTooKT0+bC5lbCxDTElUZW1wbGF0ZTooKT0+bC55VyxkZXJlZ2lzdGVyOigpPT5ldCxoaWRlOigpPT5udCxyZWdpc3RlcjooKT0+WWUsc2hvdzooKT0+dHR9KTt2YXIgbz17fTtuLnIobyksbi5kKG8se3N1YnNjcmliZTooKT0+YWV9KTt2YXIgcj17fTtuLnIociksbi5kKHIse2NyZWF0ZTooKT0+SGV9KTt2YXIgaT1uKDY3OCkscz1uKDUzMiksYT1uKDQzNik7Y29uc3QgYz1cImhvbWVcIjt2YXIgZDshZnVuY3Rpb24oZSl7ZS5Db21tYW5kcz1cImhvbWUtY29tbWFuZHNcIn0oZHx8KGQ9e30pKTt2YXIgdSxwPW4oODA2KSxsPShuKDI5OCksbig3NTgpKTtuKDExNCksbigxMDkpLG4oNDI3KTshZnVuY3Rpb24oZSl7ZVtlLkluaXRpYWw9MF09XCJJbml0aWFsXCIsZVtlLk9wZW49MV09XCJPcGVuXCIsZVtlLkNsb3NlPTJdPVwiQ2xvc2VcIn0odXx8KHU9e30pKTt2YXIgZj1uKDMxNik7Y29uc3Qgdz1cImFsbFwiLGc9XCIwXCIsaD1cIjVcIix5PVwiNlwiLHY9KCk9Pnt9O2Z1bmN0aW9uIG0oZSx0KXtyZXR1cm4gZT9gJHtlfS0ke3R9YDp0fWZ1bmN0aW9uIFMoZSl7cmV0dXJuYF9fc2VhcmNoLSR7ZX0tdG9waWNfX2B9Y29uc3QgUD1uZXcgTWFwO2Z1bmN0aW9uIEMoZSx0KXtQLmhhcyhlKXx8UC5zZXQoZSxuZXcgU2V0KSxQLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gayhlLHQpe2NvbnN0IG49UC5nZXQoZSk7biYmbi5kZWxldGUodCl9Y29uc3QgVz1uZXcgTWFwO2Z1bmN0aW9uIFIoZSx0KXtXLmhhcyhlKXx8Vy5zZXQoZSxuZXcgU2V0KSxXLmdldChlKS5hZGQodCl9ZnVuY3Rpb24gVChlLHQpe2NvbnN0IG49Vy5nZXQoZSk7biYmbi5kZWxldGUodCl9Y29uc3QgST1uZXcgTWFwO2FzeW5jIGZ1bmN0aW9uIGIoZSx0KXtJLmhhcyhlKXx8SS5zZXQoZSxuZXcgTWFwKSxJLmdldChlKS5zZXQodC5pZCx0KTtjb25zdCBuPVAuZ2V0KGUpO2lmKCFuKXJldHVybjtjb25zdCBvPVsuLi5uXS5tYXAoKGU9PmUoKSkpO2F3YWl0IFByb21pc2UuYWxsKG8pfWFzeW5jIGZ1bmN0aW9uIEQoZSx0KXtjb25zdCBuPUkuZ2V0KGUpO2lmKCFuKXJldHVybjtuLmRlbGV0ZSh0KTtjb25zdCBvPVcuZ2V0KGUpO2lmKCFvKXJldHVybjtjb25zdCByPVsuLi5vXS5tYXAoKGU9PmUoKSkpO2F3YWl0IFByb21pc2UuYWxsKHIpfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIEkuZ2V0KGUpP1suLi5JLmdldChlKS52YWx1ZXMoKV06W119ZnVuY3Rpb24gRihlKXtjb25zdCB0PUkuZ2V0KGUpO3QmJnQuY2xlYXIoKX1mdW5jdGlvbiBMKGUsdCl7Y29uc3Qgbj1JLmdldChlKTtyZXR1cm4gbj9uLmdldCh0KTpudWxsfWZ1bmN0aW9uIEEoZSx0LG4pe3JldHVybnsuLi5lLGFjdGlvbjpufHx7Li4uZS5hY3Rpb25zWzBdLHRyaWdnZXI6Zi5weC5Vc2VyQWN0aW9ufSxkaXNwYXRjaGVySWRlbnRpdHk6dH19ZnVuY3Rpb24gTyhlLHQsbj1cImFzY2VuZGluZ1wiKXtjb25zdCBvPWV8fFtdO2lmKCF0Py5sZW5ndGgpcmV0dXJuIG87Y29uc3Qgcj1bXSxpPW5ldyBNYXA7dC5mb3JFYWNoKChlPT57aWYoZS5rZXkpcmV0dXJuIGkuc2V0KGUua2V5LGUpO3IucHVzaChlKX0pKTtsZXQgcz1vLm1hcCgoZT0+e2NvbnN0e2tleTp0fT1lO2lmKHQmJmkuaGFzKHQpKXtjb25zdCBlPWkuZ2V0KHQpO3JldHVybiBpLmRlbGV0ZSh0KSxlfXJldHVybiBlfSkpO3JldHVybiBzLnB1c2goLi4uaS52YWx1ZXMoKSwuLi5yKSxzPVwiYXNjZW5kaW5nXCI9PT1uP3Muc29ydCgoKGUsdCk9PihudWxsIT09ZS5zY29yZSYmdm9pZCAwIT09ZS5zY29yZT9lLnNjb3JlOjEvMCktKG51bGwhPT10LnNjb3JlJiZ2b2lkIDAhPT10LnNjb3JlP3Quc2NvcmU6MS8wKSkpOnMuc29ydCgoKGUsdCk9PihudWxsIT09dC5zY29yZSYmdm9pZCAwIT09dC5zY29yZT90LnNjb3JlOjEvMCktKG51bGwhPT1lLnNjb3JlJiZ2b2lkIDAhPT1lLnNjb3JlP2Uuc2NvcmU6MS8wKSkpLHN9ZnVuY3Rpb24geChlKXtjb25zdCB0PXt9O2xldCBuPVtdO2xldCBvPVtdO2xldCByPXUuSW5pdGlhbDt0LmdldFN0YXR1cz0oKT0+cix0LmdldFJlc3VsdEJ1ZmZlcj0oKT0+bix0LnNldFJlc3VsdEJ1ZmZlcj1lPT57bj1lLG4/Lmxlbmd0aCYmdC5vbkNoYW5nZSgpfSx0LmdldFJldm9rZWRCdWZmZXI9KCk9Pm8sdC5zZXRSZXZva2VkQnVmZmVyPWU9PntvPWUsbz8ubGVuZ3RoJiZ0Lm9uQ2hhbmdlKCl9LHQub25DaGFuZ2U9djtjb25zdCBpPXt9O3JldHVybiB0LnJlcz1pLGkuY2xvc2U9KCk9PntyIT09dS5DbG9zZSYmKHI9dS5DbG9zZSx0Lm9uQ2hhbmdlKCkpfSxpLm9wZW49KCk9PntyIT09dS5PcGVuJiYocj11Lk9wZW4sdC5vbkNoYW5nZSgpKX0saS5yZXNwb25kPW49Pntjb25zdCBvPU8odC5nZXRSZXN1bHRCdWZmZXIoKSxuLGUpO3Quc2V0UmVzdWx0QnVmZmVyKG8pfSxpLnJldm9rZT0oLi4uZSk9Pntjb25zdCBuPW5ldyBTZXQoZSksbz10LmdldFJlc3VsdEJ1ZmZlcigpLmZpbHRlcigoKHtrZXk6ZX0pPT57Y29uc3QgdD1uLmhhcyhlKTtyZXR1cm4gdCYmbi5kZWxldGUoZSksIXR9KSk7dC5zZXRSZXN1bHRCdWZmZXIobyksbi5zaXplJiYodC5nZXRSZXZva2VkQnVmZmVyKCkuZm9yRWFjaCgoZT0+bi5hZGQoZSkpKSx0LnNldFJldm9rZWRCdWZmZXIoWy4uLm5dKSl9LHR9ZnVuY3Rpb24gRShlLHQsbil7Y29uc3Qgbz1uZXcgU2V0O2xldCByPSExO3JldHVybntjbG9zZTooKT0+e3I9ITA7Zm9yKGNvbnN0IGUgb2YgbyllKCl9LHJlcTp7aWQ6dCx0b3BpYzplLC4uLm4sY29udGV4dDpuPy5jb250ZXh0fHx7fSxvbkNsb3NlOmU9PntvLmFkZChlKSxyJiZlKCl9LHJlbW92ZUxpc3RlbmVyOmU9PntvLmRlbGV0ZShlKX19fX1mdW5jdGlvbiBWKCl7cmV0dXJue25hbWU6ZmluLm1lLm5hbWUsdXVpZDpmaW4ubWUudXVpZH19ZnVuY3Rpb24gTSgpe2xldCBlO3RyeXtjb25zdCB0PWZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpO2lmKCF0Py5pZGVudGl0eSlyZXR1cm47ZT10LmlkZW50aXR5LnV1aWR9Y2F0Y2goZSl7fXJldHVybiBlfWNvbnN0IF89XCJkZXJlZ2lzdGVyZWQgb3IgZG9lcyBub3QgZXhpc3RcIiwkPW5ldyBFcnJvcihgcHJvdmlkZXIgJHtffWApLHE9bmV3IEVycm9yKFwicHJvdmlkZXIgd2l0aCBuYW1lIGFscmVhZHkgZXhpc3RzXCIpLEc9bmV3IEVycm9yKFwiYmFkIHBheWxvYWRcIiksSD1uZXcgRXJyb3IoXCJzdWJzY3JpcHRpb24gcmVqZWN0ZWRcIiksTj1uZXcgRXJyb3IoYGNoYW5uZWwgJHtffWApLFU9bmV3IE1hcDtmdW5jdGlvbiBqKGUpe2NvbnN0IHQ9WChlKTtpZih0KXJldHVybiB0O3Rocm93IE59ZnVuY3Rpb24gWChlKXtjb25zdCB0PVUuZ2V0KGUpO2lmKHQpcmV0dXJuIHR9ZnVuY3Rpb24gSyhlLHQpe1Uuc2V0KGUsdCl9Y29uc3QgSj1uZXcgTWFwO2Z1bmN0aW9uIHooZSl7Si5oYXMoZSl8fEouc2V0KGUsbmV3IE1hcCk7Y29uc3QgdD1KLmdldChlKTtyZXR1cm57Z2V0UmVxdWVzdHNGb3JJZGVudGl0eTplPT57Y29uc3Qgbj1mdW5jdGlvbihlKXtyZXR1cm5gJHtlLnV1aWR9OiR7ZS5uYW1lfWB9KGUpO3JldHVybiB0LmhhcyhuKXx8dC5zZXQobixuZXcgTWFwKSx0LmdldChuKX19fWFzeW5jIGZ1bmN0aW9uIFooZSx0KXtyZXR1cm4oYXdhaXQgaihlKSkuZGlzcGF0Y2goZyx0KX1mdW5jdGlvbiBRKHtuYW1lc3BhY2VkVG9waWM6ZSx0b3BpYzp0fSl7Y29uc3Qgbj1MLmJpbmQobnVsbCxlKSxvPXooZSkscj1aLmJpbmQobnVsbCxlKTtyZXR1cm4gYXN5bmMoZSxpKT0+e2lmKCFlfHwhZS5pZHx8IWUucHJvdmlkZXJJZCl7Y29uc3QgZT1HO3JldHVybntlcnJvcjplLm1lc3NhZ2V9fWNvbnN0e2lkOnMscHJvdmlkZXJJZDphfT1lLGM9bihhKTtpZighYyl7Y29uc3QgZT0kO3JldHVybntlcnJvcjplLm1lc3NhZ2V9fWNvbnN0IGQ9by5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KGkpO2xldCB1PWQuZ2V0KGUuaWQpO3V8fCh1PUUodCxzLGUpLGQuc2V0KGUuaWQsdSkpO2NvbnN0IHA9eCgpLGw9KCk9Pntjb25zdCBlPXAuZ2V0UmVzdWx0QnVmZmVyKCk7cC5zZXRSZXN1bHRCdWZmZXIoW10pO2NvbnN0IHQ9cC5nZXRSZXZva2VkQnVmZmVyKCk7cC5zZXRSZXZva2VkQnVmZmVyKFtdKTtjb25zdCBuPXAuZ2V0U3RhdHVzKCk7cih7aWQ6cyxwcm92aWRlcklkOmEscmVzdWx0czplLHJldm9rZWQ6dCxzdGF0dXM6bn0pfTtsZXQgZj0hMCx3PSExO3Aub25DaGFuZ2U9KCk9PntpZihmKXJldHVybiBmPSExLHZvaWQgbCgpO3d8fCh3PSEwLHNldFRpbWVvdXQoKCgpPT57dz0hMSxsKCl9KSwxMDApKX07dHJ5e2NvbnN0e3Jlc3VsdHM6ZSxjb250ZXh0OnR9PWF3YWl0IGMub25Vc2VySW5wdXQodS5yZXEscC5yZXMpLG49cC5nZXRTdGF0dXMoKTtyZXR1cm57aWQ6cyxwcm92aWRlcklkOmEsc3RhdHVzOm4scmVzdWx0czplLGNvbnRleHQ6dH19Y2F0Y2goZSl7cmV0dXJue2lkOnMscHJvdmlkZXJJZDphLGVycm9yOmUubWVzc2FnZX19fX1hc3luYyBmdW5jdGlvbiBZKGUsdCxuKXtjb25zdCBvPW58fGF3YWl0IGooZSkscj1WKCksaT17aWRlbnRpdHk6ciwuLi50LG9uVXNlcklucHV0OnZvaWQgMCxvblJlc3VsdERpc3BhdGNoOnZvaWQgMH0scz1hd2FpdCBvLmRpc3BhdGNoKFwiMlwiLGkpO3JldHVybiBhd2FpdCBiKGUse2lkZW50aXR5OnIsLi4udH0pLHN9YXN5bmMgZnVuY3Rpb24gZWUoZSx0KXtjb25zdCBuPWF3YWl0IGooZSk7cmV0dXJuIGF3YWl0IG4uZGlzcGF0Y2goXCIzXCIsdCksRChlLHQpfWFzeW5jIGZ1bmN0aW9uIHRlKGUsdCxuLG8pe2NvbnN0IHI9QShuLFYoKSxvKSxpPUwoZSx0KTtpZihpKXtjb25zdHtvblJlc3VsdERpc3BhdGNoOmV9PWk7aWYoIWUpcmV0dXJuO3JldHVybiBlKHIpfWNvbnN0IHM9e3Byb3ZpZGVySWQ6dCxyZXN1bHQ6cn07cmV0dXJuKGF3YWl0IGooZSkpLmRpc3BhdGNoKGgscyl9YXN5bmMgZnVuY3Rpb24gbmUoZSx0KXtjb25zdCBuPXsuLi50LGNvbnRleHQ6dD8uY29udGV4dHx8e319LG89e30scj1hc3luYyBmdW5jdGlvbiooZSx0LHtzZXRTdGF0ZTpufSl7Y29uc3Qgbz1hd2FpdCBqKGUpO2Zvcig7Oyl7Y29uc3QgZT1hd2FpdCBvLmRpc3BhdGNoKFwiMVwiLHQpLHI9ZS5lcnJvcjtpZihyKXRocm93IG5ldyBFcnJvcihyKTtjb25zdCBpPWU7aWYodC5pZD1pLmlkLG4oaS5zdGF0ZSksaS5kb25lKXJldHVybiBpLnZhbHVlO3lpZWxkIGkudmFsdWV9fShlLG4se3NldFN0YXRlOmU9PntvLnN0YXRlPWV9fSk7bGV0IGk9YXdhaXQgci5uZXh0KCk7cmV0dXJuIG8uaWQ9bi5pZCxvLmNsb3NlPSgpPT57IWFzeW5jIGZ1bmN0aW9uKGUsdCl7KGF3YWl0IGooZSkpLmRpc3BhdGNoKHkse2lkOnR9KX0oZSxvLmlkKX0sby5uZXh0PSgpPT57aWYoaSl7Y29uc3QgZT1pO3JldHVybiBpPXZvaWQgMCxlfXJldHVybiByLm5leHQoKX0sb31hc3luYyBmdW5jdGlvbiBvZShlKXtyZXR1cm4oYXdhaXQgaihlKSkuZGlzcGF0Y2goXCI0XCIsbnVsbCl9YXN5bmMgZnVuY3Rpb24gcmUoZSl7Y29uc3QgdD1hd2FpdCBqKGUpO3ZhciBuO249ZSxVLmRlbGV0ZShuKSxGKGUpLGF3YWl0IHQuZGlzY29ubmVjdCgpfWZ1bmN0aW9uIGllKGUpe2NvbnN0e25hbWVzcGFjZWRUb3BpYzp0fT1lLG49eih0KTtyZXR1cm4gYXN5bmMgbz0+e2lmKCFYKHQpKXJldHVybjtjb25zdCByPW4uZ2V0UmVxdWVzdHNGb3JJZGVudGl0eShvKTtmb3IoY29uc3R7cmVxOmUsY2xvc2U6dH1vZiByLnZhbHVlcygpKXQoKSxyLmRlbGV0ZShlLmlkKTtLKHQsKGFzeW5jIGU9Pntjb25zdHtuYW1lc3BhY2VkVG9waWM6dH09ZSxuPWF3YWl0IHNlKGUpO2Zvcihjb25zdCBlIG9mIEIodCkpYXdhaXQgWSh0LGUsbik7cmV0dXJuIG59KShlKSl9fWFzeW5jIGZ1bmN0aW9uIHNlKGUpe2NvbnN0e25hbWVzcGFjZWRUb3BpYzp0fT1lLG49Uyh0KSxvPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe2ZvcihsZXQgdD0wO3Q8NTA7dCsrKXRyeXtyZXR1cm4gYXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3dhaXQ6ITF9KX1jYXRjaChlKXtpZig0OT09PXQpdGhyb3cgZTthd2FpdCBuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLDFlMykpKX19KG4pO3JldHVybiBvLnJlZ2lzdGVyKGcsUShlKSksby5yZWdpc3Rlcih5LGZ1bmN0aW9uKGUpe2NvbnN0IHQ9eihlKTtyZXR1cm4oZSxuKT0+e2NvbnN0IG89dC5nZXRSZXF1ZXN0c0ZvcklkZW50aXR5KG4pLHI9by5nZXQoZS5pZCk7ciYmKHIuY2xvc2UoKSxvLmRlbGV0ZShlLmlkKSl9fSh0KSksby5yZWdpc3RlcihoLGZ1bmN0aW9uKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LnByb3ZpZGVySWR8fCF0LnJlc3VsdClyZXR1cm47Y29uc3Qgbz1MKGUsdC5wcm92aWRlcklkKTtpZighbylyZXR1cm47Y29uc3R7b25SZXN1bHREaXNwYXRjaDpyfT1vO3JldHVybiByPyh0LnJlc3VsdC5kaXNwYXRjaGVySWRlbnRpdHk9bixyKHQucmVzdWx0KSk6dm9pZCAwfX0odCkpLG8ub25EaXNjb25uZWN0aW9uKGllKGUpKSxvfWFzeW5jIGZ1bmN0aW9uIGFlKGUpe2NvbnN0IHQ9KFwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZT8udG9waWMpfHx3LG49KFwic3RyaW5nXCI9PXR5cGVvZiBlP251bGw6ZT8udXVpZCl8fE0oKSxvPW0obix0KSxyPXt0b3BpYzp0LG5hbWVzcGFjZTpuLG5hbWVzcGFjZWRUb3BpYzpvfTtsZXQgaT1YKG8pO3JldHVybiBpfHwoaT1zZShyKSxLKG8saSksYXdhaXQgaSkse2dldEFsbFByb3ZpZGVyczpvZS5iaW5kKG51bGwsbykscmVnaXN0ZXI6WS5iaW5kKG51bGwsbyksc2VhcmNoOm5lLmJpbmQobnVsbCxvKSxkZXJlZ2lzdGVyOmVlLmJpbmQobnVsbCxvKSxkaXNwYXRjaDp0ZS5iaW5kKG51bGwsbyksZGlzY29ubmVjdDpyZS5iaW5kKG51bGwsbyl9fWNvbnN0IGNlPW5ldyBNYXA7ZnVuY3Rpb24gZGUoZSl7Y29uc3QgdD11ZShlKTtpZih0KXJldHVybiB0O3Rocm93IE59ZnVuY3Rpb24gdWUoZSl7Y29uc3QgdD1jZS5nZXQoZSk7aWYodClyZXR1cm4gdH1jb25zdCBwZT1uZXcgTWFwO2Z1bmN0aW9uIGxlKGUsdCl7cGUuaGFzKGUpfHxwZS5zZXQoZSxuZXcgU2V0KSxwZS5nZXQoZSkuYWRkKHQpfWZ1bmN0aW9uIGZlKGUsdCl7Y29uc3Qgbj1wZS5nZXQoZSk7biYmbi5kZWxldGUodCl9ZnVuY3Rpb24gd2UoZSl7cmV0dXJuWy4uLkIoZSldLm1hcCgoZT0+KHsuLi5lLG9uVXNlcklucHV0OnZvaWQgMCxvblJlc3VsdERpc3BhdGNoOnZvaWQgMH0pKSl9YXN5bmMgZnVuY3Rpb24gZ2UoZSx0KXtpZihMKGUsdC5pZCkpdGhyb3cgbmV3IEVycm9yKFwicHJvdmlkZXIgd2l0aCBuYW1lIGFscmVhZHkgZXhpc3RzXCIpO2NvbnN0IG49VigpO2F3YWl0IGIoZSx7aWRlbnRpdHk6biwuLi50fSl9ZnVuY3Rpb24gaGUoZSx0KXtEKGUsdCl9YXN5bmMgZnVuY3Rpb24geWUoZSx0LG4sbyl7Y29uc3Qgcj1MKGUsdCk7aWYoIXIpdGhyb3cgJDtjb25zdHtvblJlc3VsdERpc3BhdGNoOml9PXI7aWYoIWkpcmV0dXJuO3JldHVybiBpKEEobixWKCksbykpfWFzeW5jIGZ1bmN0aW9uKnZlKGUsdCxuKXtjb25zdCBvPWZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1bXSxvPVtdLHI9W10saT1bXTtmb3IoY29uc3QgcyBvZiBlKXtjb25zdCBlPXgocy5zY29yZU9yZGVyKSxhPXtyZXN1bHRzOltdLHByb3ZpZGVyOntpZDpzLmlkLGlkZW50aXR5OnMuaWRlbnRpdHksdGl0bGU6cy50aXRsZSxzY29yZU9yZGVyOnMuc2NvcmVPcmRlcixpY29uOnMuaWNvbixkaXNwYXRjaEZvY3VzRXZlbnRzOnMuZGlzcGF0Y2hGb2N1c0V2ZW50c319O24ucHVzaChhKSxvLnB1c2goZSk7Y29uc3QgYz0oYXN5bmMoKT0+e3RyeXtjb25zdHtyZXN1bHRzOm4sY29udGV4dDpvfT1hd2FpdCBzLm9uVXNlcklucHV0KHQsZS5yZXMpO2EucmVzdWx0cz1PKGEucmVzdWx0cyxuKSxhLmNvbnRleHQ9ey4uLmEuY29udGV4dCwuLi5vfX1jYXRjaChlKXthLmVycm9yPWV9fSkoKTtjLmZpbmFsbHkoKCgpPT57Yy5kb25lPSEwfSkpLGkucHVzaChjKSxyLnB1c2goci5sZW5ndGgpfXJldHVybntwcm92aWRlclJlc3BvbnNlczpuLGxpc3RlbmVyUmVzcG9uc2VzOm8sb3Blbkxpc3RlbmVyUmVzcG9uc2VzOnIsaW5pdGlhbFJlc3BvbnNlUHJvbWlzZXM6aX19KHQudGFyZ2V0cz90LnRhcmdldHMubWFwKCh0PT5MKGUsdCkpKS5maWx0ZXIoKGU9PiEhZSkpOlsuLi5CKGUpLmZpbHRlcigoZT0+IWUuaGlkZGVuKSldLHQpLHtwcm92aWRlclJlc3BvbnNlczpyLGxpc3RlbmVyUmVzcG9uc2VzOml9PW87bGV0e29wZW5MaXN0ZW5lclJlc3BvbnNlczpzLGluaXRpYWxSZXNwb25zZVByb21pc2VzOmF9PW8sYz1mLkRlLkZldGNoaW5nO2NvbnN0IGQ9ZT0+e2M9ZSxuLnNldFN0YXRlKGMpfTtsZXQgcCxsPSExO3Qub25DbG9zZSgoKCk9PntsPSEwLHAmJnAoKX0pKTtkb3tsZXQgZT0hMTtpZihhLmxlbmd0aCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgbiBvZiBhKW4uZG9uZT9lPSEwOnQucHVzaChuKTthPXQsYS5sZW5ndGh8fChkKGYuRGUuRmV0Y2hlZCksZT0hMCl9bGV0IHQsbj0hMTtjb25zdCBvPSgpPT57bj0hMCx0JiZ0KCl9LHc9W107Zm9yKGNvbnN0IHQgb2Ygcyl7Y29uc3Qgbj1pW3RdLHM9clt0XSxhPW4uZ2V0U3RhdHVzKCk7KGE9PT11Lk9wZW58fGM9PT1mLkRlLkZldGNoaW5nJiZhPT09dS5Jbml0aWFsKSYmKHcucHVzaCh0KSxuLm9uQ2hhbmdlPW8pO2NvbnN0IGQ9bi5nZXRSZXN1bHRCdWZmZXIoKTtkLmxlbmd0aCYmKG4uc2V0UmVzdWx0QnVmZmVyKFtdKSxzLnJlc3VsdHM9TyhzLnJlc3VsdHMsZCksZT0hMCk7Y29uc3QgcD1uLmdldFJldm9rZWRCdWZmZXIoKTtpZihwLmxlbmd0aCl7bi5zZXRSZXZva2VkQnVmZmVyKFtdKTtjb25zdCB0PW5ldyBTZXQocCk7cy5yZXN1bHRzPXMucmVzdWx0cy5maWx0ZXIoKCh7a2V5OmV9KT0+IXQuaGFzKGUpKSksZT0hMH19aWYocz13LGUmJih5aWVsZCByKSxsKWJyZWFrO258fChzLmxlbmd0aHx8YS5sZW5ndGgpJiZhd2FpdCBQcm9taXNlLnJhY2UoWy4uLmEsbmV3IFByb21pc2UoKGU9Pnt0PWV9KSksbmV3IFByb21pc2UoKGU9PntwPWV9KSldKX13aGlsZShzLmxlbmd0aHx8YS5sZW5ndGgpO3JldHVybiBkKGYuRGUuQ29tcGxldGUpLHJ9bGV0IG1lPTA7ZnVuY3Rpb24gU2Uoe25hbWVzcGFjZWRUb3BpYzplLHRvcGljOnR9LG4pe21lKz0xO2NvbnN0IG89RSh0LG1lLnRvU3RyaW5nKCksbikscj12ZShlLG8ucmVxLHtzZXRTdGF0ZTplPT57ci5zdGF0ZT1lfX0pO3JldHVybiByLmlkPW1lLnRvU3RyaW5nKCksci5jbG9zZT1vLmNsb3NlLHIuc3RhdGU9Zi5EZS5GZXRjaGluZyxyfWNvbnN0IFBlPW5ldyBNYXA7ZnVuY3Rpb24gQ2UoZSx0KXtyZXR1cm5gJHtlfToke3R9YH1mdW5jdGlvbiBrZShlKXtyZXR1cm4gYXN5bmModCwuLi5uKT0+e2lmKCF0KXJldHVybntlcnJvcjpHLm1lc3NhZ2V9O2xldCBvO2lmKHQuaWQpbz1DZShlLm5hbWVzcGFjZWRUb3BpYyx0LmlkKTtlbHNle2NvbnN0IG49U2UoZSx0KTtvPUNlKGUubmFtZXNwYWNlZFRvcGljLG4uaWQpLHQuaWQ9bi5pZCxQZS5zZXQobyx7Z2VuZXJhdG9yOm59KX1jb25zdCByPVBlLmdldChvKTtjbGVhclRpbWVvdXQoci50aW1lb3V0KTtjb25zdCBpPWF3YWl0IHIuZ2VuZXJhdG9yLm5leHQoKTtyZXR1cm4gci50aW1lb3V0PWZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dCgoKCk9PntQZS5kZWxldGUoZSl9KSwxZTQpfShvKSx7Li4uaSxpZDp0LmlkLHN0YXRlOnIuZ2VuZXJhdG9yLnN0YXRlfX19ZnVuY3Rpb24gV2UoZSx0LG4pe3JldHVybiBkZShlKS5kaXNwYXRjaCh0LHkse2lkOm59KX1mdW5jdGlvbiBSZShlKXtyZXR1cm4gdD0+ZnVuY3Rpb24oZSx0KXtjb25zdCBuPUNlKGUsdCksbz1QZS5nZXQobik7byYmby5nZW5lcmF0b3IuY2xvc2UoKX0oZSx0LmlkKX1hc3luYyBmdW5jdGlvbiBUZShlLHQse2lkOm4scXVlcnk6byxjb250ZXh0OnIsdGFyZ2V0czppfSl7Y29uc3Qgcz1kZShlKSxhPXtpZDpuLHF1ZXJ5Om8sY29udGV4dDpyLHRhcmdldHM6aSxwcm92aWRlcklkOnQuaWR9LGM9YXdhaXQgcy5kaXNwYXRjaCh0LmlkZW50aXR5LGcsYSksZD1jLmVycm9yO2lmKGQpdGhyb3cgbmV3IEVycm9yKGQpO3JldHVybiBjfWNvbnN0IEllPW5ldyBNYXA7ZnVuY3Rpb24gYmUoZSx0LG4pe3JldHVybmAke2V9OiR7dC5uYW1lfToke3QudXVpZH06JHtufWB9Y29uc3QgRGU9bmV3IE1hcDtmdW5jdGlvbiBCZShlLHQsbil7cmV0dXJuYCR7ZX06JHt0fToke259YH1mdW5jdGlvbiBGZShlLHQpe2NvbnN0IG49YmUuYmluZChudWxsLGUsdC5pZGVudGl0eSksbz1XZS5iaW5kKG51bGwsZSx0LmlkZW50aXR5KSxyPVRlLmJpbmQobnVsbCxlLHQpO3JldHVybiBhc3luYyhpLHMpPT57Y29uc3QgYT1uKGkuaWQpO2lmKCFJZS5oYXMoYSkpe2NvbnN0IGU9KCk9PntvKGkuaWQpLEllLmRlbGV0ZShhKX07SWUuc2V0KGEsZSksaS5vbkNsb3NlKGUpfWNvbnN0IGM9QmUoZSx0LmlkLGkuaWQpLGQ9KCk9PntEZS5kZWxldGUoYykscy5jbG9zZSgpfTtpLm9uQ2xvc2UoZCksRGUuc2V0KGMsKGU9PntlLnJlc3VsdHM/Lmxlbmd0aCYmcy5yZXNwb25kKGUucmVzdWx0cyksZS5yZXZva2VkPy5sZW5ndGgmJnMucmV2b2tlKC4uLmUucmV2b2tlZCksZS5zdGF0dXM9PT11Lk9wZW4mJnMub3BlbigpLGUuc3RhdHVzPT09dS5DbG9zZSYmZCgpfSkpO2NvbnN0IHA9YXdhaXQgcihpKTtyZXR1cm4gcC5zdGF0dXM9PT11Lk9wZW4mJnMub3BlbigpLHAuc3RhdHVzIT09dS5DbG9zZSYmcC5zdGF0dXMhPT11LkluaXRpYWx8fGQoKSxwfX1mdW5jdGlvbiBMZShlLHQpe3JldHVybiBhc3luYyBuPT57Y29uc3Qgbz1kZShlKSxyPXtwcm92aWRlcklkOnQuaWQscmVzdWx0Om59O3JldHVybiBvLmRpc3BhdGNoKHQuaWRlbnRpdHksaCxyKX19Y29uc3QgQWU9bmV3IE1hcDtmdW5jdGlvbiBPZShlLHQpe3JldHVybmAke2V9LSR7dC5uYW1lfS0ke3QudXVpZH1gfWZ1bmN0aW9uIHhlKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LmlkKXJldHVybiB2b2lkIG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeSh0KSk7aWYoTChlLHQuaWQpKXRocm93IHE7cmV0dXJuIHQuaWRlbnRpdHk9bixhd2FpdCBhc3luYyBmdW5jdGlvbihlLHQpe2NvbnN0IG49T2UoZSx0LmlkZW50aXR5KTtBZS5oYXMobil8fEFlLnNldChuLFtdKSxBZS5nZXQobikucHVzaCh0LmlkKSxhd2FpdCBiKGUsey4uLnQsb25Vc2VySW5wdXQ6RmUoZSx0KSxvblJlc3VsdERpc3BhdGNoOkxlKGUsdCl9KX0oZSx0KSx7d29ya3NwYWNlVmVyc2lvbjppLnUwLGNsaWVudEFQSVZlcnNpb246dC5jbGllbnRBUElWZXJzaW9ufX19ZnVuY3Rpb24gRWUoZSl7cmV0dXJuIHQ9Pnt0JiZmdW5jdGlvbihlLHQpe2NvbnN0IG49TChlLHQpO2lmKCFuKXJldHVybjtjb25zdCBvPU9lKGUsbi5pZGVudGl0eSkscj1BZS5nZXQobyk7aWYocil7Y29uc3Qgbj1yLmZpbmRJbmRleCgoZT0+ZT09PXQpKTstMSE9PW4mJihyLnNwbGljZShuLDEpLEQoZSx0KSl9fShlLHQpfX1jb25zdCBWZT1uZXcgTWFwO2Z1bmN0aW9uIE1lKGUsdCl7VmUuaGFzKGUpfHxWZS5zZXQoZSxuZXcgU2V0KSxWZS5nZXQoZSkuYWRkKHQpfWZ1bmN0aW9uIF9lKGUsdCl7Y29uc3Qgbj1WZS5nZXQoZSk7biYmbi5kZWxldGUodCl9ZnVuY3Rpb24gJGUoZSl7cmV0dXJuIGFzeW5jIHQ9PnshZnVuY3Rpb24oZSx0KXtjb25zdCBuPU9lKGUsdCksbz1BZS5nZXQobik7aWYobyl7Zm9yKGNvbnN0IHQgb2YgbylEKGUsdCk7QWUuZGVsZXRlKG4pfX0oZSx0KTtjb25zdCBuPVZlLmdldChlKTtuJiZuLmZvckVhY2goKGU9PmUodCkpKX19YXN5bmMgZnVuY3Rpb24gcWUoZSl7Y29uc3R7bmFtZXNwYWNlZFRvcGljOnR9PWUsbj1TKGUubmFtZXNwYWNlZFRvcGljKSxvPWF3YWl0KHI9bixmaW4uSW50ZXJBcHBsaWNhdGlvbkJ1cy5DaGFubmVsLmNyZWF0ZShyKSk7dmFyIHI7cmV0dXJuIG8ub25Db25uZWN0aW9uKGZ1bmN0aW9uKHtuYW1lc3BhY2VkVG9waWM6ZX0pe3JldHVybiBhc3luYyB0PT57Y29uc3Qgbj1wZS5nZXQoZSk7aWYobilmb3IoY29uc3QgZSBvZiBuKWlmKCFhd2FpdCBlKHQpKXRocm93IEh9fShlKSksby5vbkRpc2Nvbm5lY3Rpb24oJGUodCkpLG8ucmVnaXN0ZXIoeSxSZSh0KSksby5yZWdpc3RlcihnLGZ1bmN0aW9uKGUpe3JldHVybiB0PT57Y29uc3Qgbj1CZShlLHQucHJvdmlkZXJJZCx0LmlkKSxvPURlLmdldChuKTtvJiZvKHQpfX0odCkpLG8ucmVnaXN0ZXIoXCIyXCIseGUodCkpLG8ucmVnaXN0ZXIoXCIzXCIsRWUodCkpLG8ucmVnaXN0ZXIoXCI0XCIsZnVuY3Rpb24oZSl7cmV0dXJuIGFzeW5jKCk9PndlKGUpfSh0KSksby5yZWdpc3RlcihcIjFcIixrZShlKSksby5yZWdpc3RlcihoLGZ1bmN0aW9uKGUpe3JldHVybiBhc3luYyh0LG4pPT57aWYoIXR8fCF0LnByb3ZpZGVySWR8fCF0LnJlc3VsdClyZXR1cm47Y29uc3Qgbz1MKGUsdC5wcm92aWRlcklkKTtpZighbyl0aHJvdyAkO2NvbnN0e29uUmVzdWx0RGlzcGF0Y2g6cn09bztyZXR1cm4gcj8odC5yZXN1bHQuZGlzcGF0Y2hlcklkZW50aXR5PW4scih0LnJlc3VsdCkpOnZvaWQgMH19KHQpKSxvfWFzeW5jIGZ1bmN0aW9uIEdlKGUpe2NvbnN0IHQ9ZGUoZSk7dmFyIG47bj1lLGNlLmRlbGV0ZShuKSxhd2FpdCB0LmRlc3Ryb3koKSxGKGUpfWFzeW5jIGZ1bmN0aW9uIEhlKGUpe2NvbnN0IHQ9KFwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZT8udG9waWMpfHx3LG49TSgpLG89bShuLHQpLHI9e3RvcGljOnQsbmFtZXNwYWNlOm4sbmFtZXNwYWNlZFRvcGljOm99O2xldCBpPXVlKG8pO2l8fChpPWF3YWl0IHFlKHIpLGZ1bmN0aW9uKGUsdCl7Y2Uuc2V0KGUsdCl9KG8saSkpO2NvbnN0IHM9ZmUuYmluZChudWxsLG8pLGE9X2UuYmluZChudWxsLG8pLGM9ay5iaW5kKG51bGwsbyksZD1ULmJpbmQobnVsbCxvKTtyZXR1cm57Z2V0QWxsUHJvdmlkZXJzOndlLmJpbmQobnVsbCxvKSxzZWFyY2g6U2UuYmluZChudWxsLHIpLHJlZ2lzdGVyOmdlLmJpbmQobnVsbCxvKSxkZXJlZ2lzdGVyOmhlLmJpbmQobnVsbCxvKSxvblN1YnNjcmlwdGlvbjpsZS5iaW5kKG51bGwsbyksb25EaXNjb25uZWN0Ok1lLmJpbmQobnVsbCxvKSxvblJlZ2lzdGVyOkMuYmluZChudWxsLG8pLG9uRGVyZWdpc3RlcjpSLmJpbmQobnVsbCxvKSxkaXNwYXRjaDp5ZS5iaW5kKG51bGwsciksZGlzY29ubmVjdDpHZS5iaW5kKG51bGwsbykscmVtb3ZlTGlzdGVuZXI6ZT0+e3MoZSksYShlKSxjKGUpLGQoZSl9fX1jb25zdHtjcmVhdGU6TmV9PXIse3N1YnNjcmliZTpVZX09byxqZT17Y3JlYXRlOk5lLHN1YnNjcmliZTpVZSxkZWZhdWx0VG9waWM6XCJhbGxcIn0sWGU9KCk9Pnt3aW5kb3cuc2VhcmNoPWplfSxLZT1lPT57Y29uc3QgdD0oKT0+e1hlKCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX07cmV0dXJuIHR9O2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe1hlKCk7Y29uc3QgZT1cImxvYWRcIix0PUtlKGUpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGUsdCk7Y29uc3Qgbj1cIkRPTUNvbnRlbnRMb2FkZWRcIixvPUtlKG4pO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKG4sbyl9Y29uc3QgSmU9bmV3IE1hcDthc3luYyBmdW5jdGlvbiB6ZSgpe2F3YWl0IGFzeW5jIGZ1bmN0aW9uKGUpe0plLnNldChlLGF3YWl0IFVlKHt0b3BpYzplLHV1aWQ6cC5xOS5Xb3Jrc3BhY2V9KSl9KGMpfWxldCBaZTthc3luYyBmdW5jdGlvbiBRZShlKXtyZXR1cm4gYXdhaXQgYXN5bmMgZnVuY3Rpb24oKXtyZXR1cm4gWmV8fChaZT16ZSgpKSxaZX0oKSxKZS5nZXQoZSl9Y29uc3QgWWU9YXN5bmMgZT0+e2lmKCFlLmljb24pdGhyb3cgbmV3IEVycm9yKGAke2UuaWR9IHByb3ZpZGVyIG5lZWRzIHRvIGhhdmUgaWNvbiBwcm9wZXJ0eSBkZWZpbmVkLmApO2F3YWl0KDAsYS5hQikoKTtjb25zdCB0PWF3YWl0IFFlKGMpO3RyeXtlLmNsaWVudEFQSVZlcnNpb249aS51MDtjb25zdCBuPWF3YWl0IHQucmVnaXN0ZXIoZSk7cmV0dXJuKDAscy5jaykoe2FsbG93ZWQ6ITAsY29tcG9uZW50VmVyc2lvbjpuPy53b3Jrc3BhY2VWZXJzaW9ufSksbn1jYXRjaChlKXt0aHJvdygwLHMuY2spKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZS5tZXNzYWdlfSksZX19LGV0PWFzeW5jIGU9Pnthd2FpdCgwLGEuYUIpKCk7cmV0dXJuKGF3YWl0IFFlKGMpKS5kZXJlZ2lzdGVyKGUpfTthc3luYyBmdW5jdGlvbiB0dCgpe3JldHVybihhd2FpdCgwLGEuWGwpKCkpLmRpc3BhdGNoKGEuV0YuU2hvd0hvbWUsdm9pZCAwKX1hc3luYyBmdW5jdGlvbiBudCgpe3JldHVybihhd2FpdCgwLGEuWGwpKCkpLmRpc3BhdGNoKGEuV0YuSGlkZUhvbWUsdm9pZCAwKX19LDI5ODooZSx0LG4pPT57bi5kKHQse3A6KCk9Pm8ucHgsdzooKT0+by53dH0pO3ZhciBvPW4oMzE2KX0sNDI3OihlLHQsbik9Pnt2YXIgbztuLmQodCx7djooKT0+b30pLGZ1bmN0aW9uKGUpe2UuQWN0aW9uQnV0dG9uPVwiQWN0aW9uQnV0dG9uXCIsZS5Ecm9wZG93bkJ1dHRvbj1cIkRyb3Bkb3duQnV0dG9uXCJ9KG98fChvPXt9KSl9LDc1ODooZSx0LG4pPT57dmFyIG8scixpO24uZCh0LHtQdDooKT0+byxlbDooKT0+aSx5VzooKT0+cn0pLGZ1bmN0aW9uKGUpe2UuU3VnZ2VzdGlvbj1cInN1Z2dlc3Rpb25cIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLkNvbnRhY3Q9XCJDb250YWN0XCIsZS5DdXN0b209XCJDdXN0b21cIixlLkxpc3Q9XCJMaXN0XCIsZS5QbGFpbj1cIlBsYWluXCIsZS5TaW1wbGVUZXh0PVwiU2ltcGxlVGV4dFwiLGUuTG9hZGluZz1cIkxvYWRpbmdcIixlLkVycm9yPVwiRXJyb3JcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLk11bHRpU2VsZWN0PVwiTXVsdGlTZWxlY3RcIn0oaXx8KGk9e30pKX0sMTE0OihlLHQsbik9Pnt2YXIgbyxyO24uZCh0LHtMOigpPT5vLFQ6KCk9PnJ9KSxmdW5jdGlvbihlKXtlLlNuYXBzaG90PVwic25hcHNob3RcIixlLk1hbmlmZXN0PVwibWFuaWZlc3RcIixlLlZpZXc9XCJ2aWV3XCIsZS5FeHRlcm5hbD1cImV4dGVybmFsXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5MYW5kaW5nUGFnZT1cImxhbmRpbmdQYWdlXCIsZS5BcHBHcmlkPVwiYXBwR3JpZFwifShyfHwocj17fSkpfSwxMDk6KGUsdCxuKT0+e24uZCh0LHtHbzooKT0+cixaSjooKT0+cyxiSTooKT0+aSxwNjooKT0+b30pO2NvbnN0IG89e0NvbnRhaW5lcjpcIkNvbnRhaW5lclwiLEJ1dHRvbjpcIkJ1dHRvblwifSxyPXtUZXh0OlwiVGV4dFwiLEltYWdlOlwiSW1hZ2VcIixMaXN0OlwiTGlzdFwifSxpPXsuLi5vLC4uLnJ9O3ZhciBzOyFmdW5jdGlvbihlKXtlLlByaW1hcnk9XCJwcmltYXJ5XCIsZS5TZWNvbmRhcnk9XCJzZWNvbmRhcnlcIixlLlRleHRPbmx5PVwidGV4dE9ubHlcIn0oc3x8KHM9e30pKX0sNTI4OihlLHQsbik9PntuLnIodCksbi5kKHQse0FwcE1hbmlmZXN0VHlwZTooKT0+cy5MLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+cy5ULGRlcmVnaXN0ZXI6KCk9PmcsaGlkZTooKT0+aCxyZWdpc3RlcjooKT0+dyxzaG93OigpPT55fSk7dmFyIG89big1MzIpLHI9big0MzYpLGk9big4Mikscz1uKDExNCksYT1uKDY3OCk7bGV0IGMsZD0hMTthc3luYyBmdW5jdGlvbiB1KGUsdCxuKXtjb25zdCBvPWF3YWl0KDAsci5EbSkoKTt0cnl7cmV0dXJuIGF3YWl0IG8uZGlzcGF0Y2goZS5hY3Rpb24sZS5wYXlsb2FkKX1jYXRjaChyKXtpZigtMSE9PXIudG9TdHJpbmcoKS5pbmRleE9mKGUuYWN0aW9uKSlyZXR1cm4gZD0hMCxhd2FpdCBvLmRpc3BhdGNoKHQuYWN0aW9uLHQucGF5bG9hZCksbjt0aHJvdyByfX1jb25zdCBwPW5ldyBNYXAsbD1lPT57aWYoIXAuaGFzKGUpKXRocm93IG5ldyBFcnJvcihgU3RvcmVmcm9udCBQcm92aWRlciB3aXRoIGlkICR7ZX0gaXMgbm90IHJlZ2lzdGVyZWRgKTtyZXR1cm4gcC5nZXQoZSl9LGY9YXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQoMCxyLlhsKSgpO2lmKHAuaGFzKGUuaWQpKXRocm93IG5ldyBFcnJvcihgU3RvcmVmcm9udCBwcm92aWRlciB3aXRoIGlkICR7ZS5pZH0gYWxyZWFkeSByZWdpc3RlcmVkYCk7cmV0dXJuIHAuc2V0KGUuaWQsZSksKGU9PntlLmlzU3RvcmVmcm9udEFjdGlvbnNSZWdpc3RlcmVkfHwoZS5pc1N0b3JlZnJvbnRBY3Rpb25zUmVnaXN0ZXJlZD0hMCxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyQXBwcywoZT0+bChlKS5nZXRBcHBzKCkpKSxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyRm9vdGVyLChlPT5sKGUpLmdldEZvb3RlcigpKSksZS5yZWdpc3RlcihyLldGLkdldFN0b3JlZnJvbnRQcm92aWRlckxhbmRpbmdQYWdlLChlPT5sKGUpLmdldExhbmRpbmdQYWdlKCkpKSxlLnJlZ2lzdGVyKHIuV0YuR2V0U3RvcmVmcm9udFByb3ZpZGVyTmF2aWdhdGlvbiwoZT0+bChlKS5nZXROYXZpZ2F0aW9uKCkpKSxlLnJlZ2lzdGVyKHIuV0YuTGF1bmNoU3RvcmVmcm9udFByb3ZpZGVyQXBwLCgoe2lkOmUsYXBwOnR9KT0+bChlKS5sYXVuY2hBcHAodCkpKSl9KSh0KSxlLmNsaWVudEFQSVZlcnNpb249YS51MCx1KHthY3Rpb246ci5XRi5SZWdpc3RlclByb3ZpZGVyLHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTppLmxQLlN0b3JlZnJvbnQsaW5mbzplfX0se2FjdGlvbjpyLldGLlJlZ2lzdGVyU3RvcmVmcm9udFByb3ZpZGVyLHBheWxvYWQ6ZX0se3dvcmtzcGFjZVZlcnNpb246XCJ1bmtub3duXCJ9KX0sdz1lPT4oYz1uZXcgUHJvbWlzZSgoYXN5bmModCxuKT0+e3RyeXtjb25zdCBuPWF3YWl0IGYoZSk7KDAsby5kOSkoe2FsbG93ZWQ6ITAsY29tcG9uZW50VmVyc2lvbjpuPy53b3Jrc3BhY2VWZXJzaW9ufSksdCh7Y2xpZW50QVBJVmVyc2lvbjphLnUwLHdvcmtzcGFjZVZlcnNpb246bi53b3Jrc3BhY2VWZXJzaW9ufHxcIlwifSl9Y2F0Y2goZSl7KDAsby5kOSkoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplLm1lc3NhZ2V9KSxuKGUpfX0pKSxjKSxnPWFzeW5jIGU9Pihhd2FpdCBjLHAuZGVsZXRlKGUpLGF3YWl0KDAsci5hQikoKSx1KHthY3Rpb246ci5XRi5EZXJlZ2lzdGVyUHJvdmlkZXIscGF5bG9hZDp7cHJvdmlkZXJUeXBlOmkubFAuU3RvcmVmcm9udCxpZDplfX0se2FjdGlvbjpyLldGLkRlcmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXIscGF5bG9hZDplfSkpLGg9YXN5bmMoKT0+KGF3YWl0IGMsYXdhaXQoMCxyLmFCKSgpLHUoe2FjdGlvbjpyLldGLkhpZGVQcm92aWRlcldpbmRvdyxwYXlsb2FkOntwcm92aWRlclR5cGU6aS5sUC5TdG9yZWZyb250fX0se2FjdGlvbjpyLldGLkhpZGVTdG9yZWZyb250fSkpLHk9YXN5bmMoKT0+KGF3YWl0IGMsYXdhaXQoMCxyLmFCKSgpLHUoe2FjdGlvbjpyLldGLlNob3dQcm92aWRlcldpbmRvdyxwYXlsb2FkOntwcm92aWRlclR5cGU6aS5sUC5TdG9yZWZyb250fX0se2FjdGlvbjpyLldGLlNob3dTdG9yZWZyb250fSkpfSw0MzY6KGUsdCxuKT0+e24uZCh0LHtXRjooKT0+cyxEbTooKT0+YSxYbDooKT0+cCxhQjooKT0+dX0pO3ZhciBvPW4oNjc4KTtjb25zdCByPW8uQXgmJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUmJm5ldyBQcm9taXNlKChlPT5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLCgoKT0+e1wiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJmUoKX0pKSkpO3ZhciBpPW4oMTIxKTt2YXIgczshZnVuY3Rpb24oZSl7ZS5SZWdpc3RlclByb3ZpZGVyPVwicmVnaXN0ZXItcHJvdmlkZXJcIixlLkRlcmVnaXN0ZXJQcm92aWRlcj1cImRlcmVnaXN0ZXItcHJvdmlkZXJcIixlLkNyZWF0ZVByb3ZpZGVyV2luZG93PVwiY3JlYXRlLXByb3ZpZGVyLXdpbmRvd1wiLGUuR2V0UHJvdmlkZXJzPVwiZ2V0LXByb3ZpZGVyc1wiLGUuU2hvd1Byb3ZpZGVyV2luZG93PVwic2hvdy1wcm92aWRlci13aW5kb3dcIixlLkhpZGVQcm92aWRlcldpbmRvdz1cImhpZGUtcHJvdmlkZXItd2luZG93XCIsZS5HZXRTdG9yZWZyb250UHJvdmlkZXJBcHBzPVwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItYXBwc1wiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTGFuZGluZ1BhZ2U9XCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1sYW5kaW5nLXBhZ2VcIixlLkdldFN0b3JlZnJvbnRQcm92aWRlckZvb3Rlcj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWZvb3RlclwiLGUuR2V0U3RvcmVmcm9udFByb3ZpZGVyTmF2aWdhdGlvbj1cImdldC1zdG9yZWZyb250LXByb3ZpZGVyLW5hdmlnYXRpb25cIixlLkxhdW5jaFN0b3JlZnJvbnRQcm92aWRlckFwcD1cImxhdW5jaC1zdG9yZWZyb250LXByb3ZpZGVyLWFwcFwiLGUuU2hvd0hvbWU9XCJzaG93LWhvbWVcIixlLkhpZGVIb21lPVwiaGlkZS1ob21lXCIsZS5Bc3NpZ25Ib21lU2VhcmNoQ29udGV4dD1cImFzc2lnbi1ob21lLXNlYXJjaC1jb250ZXh0XCIsZS5HZXRMZWdhY3lQYWdlcz1cImdldC1sZWdhY3ktcGFnZXNcIixlLkdldExlZ2FjeVdvcmtzcGFjZXM9XCJnZXQtbGVnYWN5LXdvcmtzcGFjZXNcIixlLkdldENvbXB1dGVkUGxhdGZvcm1UaGVtZT1cImdldC1jb21wdXRlZC1wbGF0Zm9ybS10aGVtZVwiLGUuUmVnaXN0ZXJTdG9yZWZyb250UHJvdmlkZXI9XCJyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5EZXJlZ2lzdGVyU3RvcmVmcm9udFByb3ZpZGVyPVwiZGVyZWdpc3Rlci1zdG9yZWZyb250LXByb3ZpZGVyXCIsZS5IaWRlU3RvcmVmcm9udD1cImhpZGUtc3RvcmVmcm9udFwiLGUuU2hvd1N0b3JlZnJvbnQ9XCJzaG93LXN0b3JlZnJvbnRcIn0oc3x8KHM9e30pKTtjb25zdCBhPWZ1bmN0aW9uKGUpe2xldCB0O3JldHVybigpPT57aWYoIW8uc1MpdGhyb3cgbmV3IEVycm9yKFwiZ2V0Q2hhbm5lbENsaWVudCBjYW5ub3QgYmUgdXNlZCBvdXRzaWRlIGFuIE9wZW5GaW4gZW52LiBBdm9pZCB1c2luZyB0aGlzIG1ldGhvZCBkdXJpbmcgcHJlLXJlbmRlcmluZy5cIik7cmV0dXJuIHR8fCh0PShhc3luYygpPT57YXdhaXQgcjtjb25zdCBuPXtjbGllbnRBUElWZXJzaW9uOm8udTB9LGk9YXdhaXQgZmluLkludGVyQXBwbGljYXRpb25CdXMuQ2hhbm5lbC5jb25uZWN0KGUse3BheWxvYWQ6bn0pO3JldHVybiBpLm9uRGlzY29ubmVjdGlvbigoYXN5bmMoKT0+e3Q9dm9pZCAwfSkpLGl9KSgpLnRoZW4oKGU9PmUpKS5jYXRjaCgobj0+e3Rocm93IHQ9dm9pZCAwLG5ldyBFcnJvcihgZmFpbGVkIHRvIGNvbm5lY3QgdG8gY2hhbm5lbCBwcm92aWRlciAke2V9OiAke259YCl9KSkpLHR9fShcIl9fb2Zfd29ya3NwYWNlX3Byb3RvY29sX19cIiksYz1cImlzTGF1bmNoZWRWaWFMaWJcIixkPWU9Pntjb25zdCB0PW5ldyBVUkwoZSk7cmV0dXJuIHQuc2VhcmNoUGFyYW1zLmFwcGVuZChjLFwidHJ1ZVwiKSx0LnRvU3RyaW5nKCl9LHU9YXN5bmMoKT0+e2lmKCFhd2FpdCgwLGkuSlYpKGkuaVcpKXJldHVybihvLlpLfHwtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpblwiKSkmJmF3YWl0IGZpbi5BcHBsaWNhdGlvbi5zdGFydEZyb21NYW5pZmVzdChkKG8uYVcpKSxmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3NlcihkKG8uR1gpKX0scD1hc3luYygpPT4oYXdhaXQgdSgpLGEoKSl9LDgyOihlLHQsbik9PntuLmQodCx7Ujg6KCk9PnMsWF86KCk9PmksbFA6KCk9Pm99KTt2YXIgbyxyPW4oNDM2KTshZnVuY3Rpb24oZSl7ZS5TdG9yZWZyb250PVwic3RvcmVmcm9udFwiLGUuRG9jaz1cImRvY2tcIn0ob3x8KG89e30pKTtjb25zdCBpPWFzeW5jIGU9Pihhd2FpdCgwLHIuRG0pKCkpLmRpc3BhdGNoKHIuV0YuU2hvd1Byb3ZpZGVyV2luZG93LHtwcm92aWRlclR5cGU6ZX0pLHM9YXN5bmMgZT0+KGF3YWl0KDAsci5EbSkoKSkuZGlzcGF0Y2goci5XRi5IaWRlUHJvdmlkZXJXaW5kb3cse3Byb3ZpZGVyVHlwZTplfSl9LDgwNjooZSx0LG4pPT57bi5kKHQse3E5OigpPT5vfSk7dmFyIG8scixpLHM9big2NzgpOyFmdW5jdGlvbihlKXtlLldvcmtzcGFjZT1cIm9wZW5maW4tYnJvd3NlclwifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuUnVuUmVxdWVzdGVkPVwicnVuLXJlcXVlc3RlZFwiLGUuV2luZG93T3B0aW9uc0NoYW5nZWQ9XCJ3aW5kb3ctb3B0aW9ucy1jaGFuZ2VkXCIsZS5XaW5kb3dDbG9zZWQ9XCJ3aW5kb3ctY2xvc2VkXCIsZS5XaW5kb3dDcmVhdGVkPVwid2luZG93LWNyZWF0ZWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkZpblByb3RvY29sPVwiZmluLXByb3RvY29sXCJ9KGl8fChpPXt9KSk7cy5BQixvLldvcmtzcGFjZX0sNjc4OihlLHQsbik9Pnt2YXIgbztuLmQodCx7QUI6KCk9PmEsQXg6KCk9PmksR1g6KCk9PnUsWks6KCk9PmQsYVc6KCk9PnAsb0M6KCk9PmMsc1M6KCk9PnIsdTA6KCk9PmZ9KSxmdW5jdGlvbihlKXtlLkxvY2FsPVwibG9jYWxcIixlLkRldj1cImRldlwiLGUuU3RhZ2luZz1cInN0YWdpbmdcIixlLlByb2Q9XCJwcm9kXCJ9KG98fChvPXt9KSk7Y29uc3Qgcj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZmluLGk9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwcm9jZXNzfHxwcm9jZXNzLmVudj8uSkVTVF9XT1JLRVJfSUQsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdykscz1pP3dpbmRvdy5vcmlnaW46by5Mb2NhbCxhPXImJmZpbi5tZS51dWlkLGM9ciYmZmluLm1lLm5hbWUsZD0ociYmZmluLm1lLmVudGl0eVR5cGUsXCJwcm9kXCI9PT1vLkxvY2FsKSx1PShvLkRldixvLlN0YWdpbmcsby5Qcm9kLFwiZmluczovL3N5c3RlbS1hcHBzL3dvcmtzcGFjZVwiKSxwPVwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby93b3Jrc3BhY2UvOS4wLjExL2FwcC5qc29uXCIsbD1lPT5lLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpfHxlLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKT9lOnMrZSxmPShsKFwiaHR0cHM6Ly9jZG4ub3BlbmZpbi5jby93b3Jrc3BhY2UvOS4wLjExXCIpLGwoXCJodHRwczovL2Nkbi5vcGVuZmluLmNvL3dvcmtzcGFjZS85LjAuMTFcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9ET0NTX1BMQVRGT1JNX1VSTCYmbChXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMJiZsKFdPUktTUEFDRV9ET0NTX0NMSUVOVF9VUkwpLFwiOS4wLjExXCIpfSw1MzI6KGUsdCxuKT0+e24uZCh0LHtXbjooKT0+ZCxjazooKT0+YSxkOTooKT0+Y30pO3ZhciBvLHI9big2NzgpLGk9bigxMjEpOyFmdW5jdGlvbihlKXtlLkJyb3dzZXI9XCJCcm93c2VyXCIsZS5Eb2NrPVwiRG9ja1wiLGUuSG9tZT1cIkhvbWVcIixlLk5vdGlmaWNhdGlvbj1cIk5vdGlmaWNhdGlvblwiLGUuU3RvcmVmcm9udD1cIlN0b3JlZnJvbnRcIixlLlBsYXRmb3JtPVwiUGxhdGZvcm1cIixlLlRoZW1pbmc9XCJUaGVtaW5nXCJ9KG98fChvPXt9KSk7Y29uc3Qgcz1hc3luYyhlLHQpPT57Y29uc3Qgbj17YXBpVmVyc2lvbjp0LmFwaVZlcnNpb258fHIudTAsY29tcG9uZW50TmFtZTplLGNvbXBvbmVudFZlcnNpb246dC5jb21wb25lbnRWZXJzaW9ufHxyLnUwLGFsbG93ZWQ6dC5hbGxvd2VkLHJlamVjdGlvbkNvZGU6dC5yZWplY3Rpb25Db2RlfTtmaW4uU3lzdGVtLnJlZ2lzdGVyVXNhZ2Uoe3R5cGU6XCJ3b3Jrc3BhY2UtbGljZW5zaW5nXCIsZGF0YTpufSl9LGE9YXN5bmMgZT0+e2kuT0kudXVpZD09PWkuR2kudXVpZCYmaS5PSS5uYW1lPT09aS5HaS5uYW1lfHxzKG8uSG9tZSxlKX0sYz1hc3luYyBlPT57cyhvLlN0b3JlZnJvbnQsZSl9LGQ9YXN5bmMgZT0+e3Moby5Eb2NrLGUpfX0sMTIxOihlLHQsbik9PntuLmQodCx7R2k6KCk9PmQsSlY6KCk9PmwsT0k6KCk9PnUsaVc6KCk9PnB9KTt2YXIgbyxyLGkscz1uKDgwNiksYT1uKDY3OCk7IWZ1bmN0aW9uKGUpe2UuSG9tZT1cIm9wZW5maW4taG9tZVwiLGUuRG9jaz1cIm9wZW5maW4tZG9ja1wiLGUuU3RvcmVmcm9udD1cIm9wZW5maW4tc3RvcmVmcm9udFwiLGUuSG9tZUludGVybmFsPVwib3BlbmZpbi1ob21lLWludGVybmFsXCIsZS5Ccm93c2VyTWVudT1cIm9wZW5maW4tYnJvd3Nlci1tZW51XCIsZS5Ccm93c2VySW5kaWNhdG9yPVwib3BlbmZpbi1icm93c2VyLWluZGljYXRvclwiLGUuQnJvd3NlcldpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC13aW5kb3dcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlLlNob3duPVwic2hvd25cIixlLkJvdW5kc0NoYW5nZWQ9XCJib3VuZHMtY2hhbmdlZFwiLGUuTGF5b3V0UmVhZHk9XCJsYXlvdXQtcmVhZHlcIixlLkVuZFVzZXJCb3VuZHNDaGFuZ2luZz1cImVuZC11c2VyLWJvdW5kcy1jaGFuZ2luZ1wiLGUuQmx1cnJlZD1cImJsdXJyZWRcIixlLkNsb3NlZD1cImNsb3NlZFwiLGUuQ2xvc2VSZXF1ZXN0ZWQ9XCJjbG9zZS1yZXF1ZXN0ZWRcIixlLkZvY3VzZWQ9XCJmb2N1c2VkXCIsZS5TaG93UmVxdWVzdGVkPVwic2hvdy1yZXF1ZXN0ZWRcIixlLlZpZXdDcmFzaGVkPVwidmlldy1jcmFzaGVkXCIsZS5WaWV3QXR0YWNoZWQ9XCJ2aWV3LWF0dGFjaGVkXCIsZS5WaWV3RGV0YWNoZWQ9XCJ2aWV3LWRldGFjaGVkXCIsZS5WaWV3UGFnZVRpdGxlVXBkYXRlZD1cInZpZXctcGFnZS10aXRsZS11cGRhdGVkXCIsZS5WaWV3RGVzdHJveWVkPVwidmlldy1kZXN0cm95ZWRcIixlLk9wdGlvbnNDaGFuZ2VkPVwib3B0aW9ucy1jaGFuZ2VkXCJ9KHJ8fChyPXt9KSksZnVuY3Rpb24oZSl7ZS5CZWZvcmVVbmxvYWQ9XCJiZWZvcmV1bmxvYWRcIn0oaXx8KGk9e30pKTtmdW5jdGlvbiBjKGUpe2lmKCFhLnNTKXRocm93IG5ldyBFcnJvcihcImdldE9GV2luZG93IGNhbiBvbmx5IGJlIHVzZWQgaW4gYW4gT3BlbkZpbiBlbnYuIEF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiBmaW4uV2luZG93LndyYXBTeW5jKGUpfWNvbnN0IGQ9e25hbWU6YS5vQyx1dWlkOmEuQUJ9O2NvbnN0IHU9e25hbWU6by5Ib21lLHV1aWQ6cy5xOS5Xb3Jrc3BhY2V9LHA9KG8uRG9jayxzLnE5LldvcmtzcGFjZSxvLlN0b3JlZnJvbnQscy5xOS5Xb3Jrc3BhY2Use25hbWU6cy5xOS5Xb3Jrc3BhY2UsdXVpZDpzLnE5LldvcmtzcGFjZX0pO2NvbnN0IGw9ZT0+YyhlKS5nZXRPcHRpb25zKCkudGhlbigoKCk9PiEwKSkuY2F0Y2goKCgpPT4hMSkpfSwzMTY6KGUsdCxuKT0+e3ZhciBvLHIsaTtuLmQodCx7RGU6KCk9Pm8scHg6KCk9PnIsd3Q6KCk9Pml9KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KG98fChvPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0oaXx8KGk9e30pKX19LHQ9e307ZnVuY3Rpb24gbihvKXt2YXIgcj10W29dO2lmKHZvaWQgMCE9PXIpcmV0dXJuIHIuZXhwb3J0czt2YXIgaT10W29dPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtvXShpLGkuZXhwb3J0cyxuKSxpLmV4cG9ydHN9bi5kPShlLHQpPT57Zm9yKHZhciBvIGluIHQpbi5vKHQsbykmJiFuLm8oZSxvKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtvXX0pfSxuLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLG4ucj1lPT57XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX07dmFyIG89e307KCgpPT57bi5yKG8pLG4uZChvLHtBY3Rpb25UcmlnZ2VyOigpPT5QLnAsQXBwTWFuaWZlc3RUeXBlOigpPT5XLkwsQnV0dG9uU3R5bGU6KCk9PkMuWkosQ0xJQWN0aW9uOigpPT5rLlB0LENMSUZpbHRlck9wdGlvblR5cGU6KCk9PmsuZWwsQ0xJVGVtcGxhdGU6KCk9PmsueVcsQ29udGFpbmVyVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLnA2LERvY2s6KCk9PmUsRG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsSG9tZTooKT0+aCxMZWdhY3k6KCk9PnQsUHJlc2VudGF0aW9uVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5DLkdvLFNlYXJjaFRhZ0JhY2tncm91bmQ6KCk9PlAudyxTdG9yZWZyb250OigpPT5TLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+Vy5ULFRlbXBsYXRlRnJhZ21lbnRUeXBlczooKT0+Qy5iSX0pO3ZhciBlPXt9O24ucihlKSxuLmQoZSx7RG9ja0J1dHRvbk5hbWVzOigpPT5jLnYsZGVyZWdpc3RlcjooKT0+bCxtaW5pbWl6ZTooKT0+ZixyZWdpc3RlcjooKT0+cCxzaG93OigpPT53fSk7dmFyIHQ9e307bi5yKHQpLG4uZCh0LHtnZXRQYWdlczooKT0+dixnZXRXb3Jrc3BhY2VzOigpPT5tfSk7dmFyIHI9big2NzgpLGk9big1MzIpLHM9big0MzYpLGE9big4MiksYz1uKDQyNyk7bGV0IGQsdT0hMTtjb25zdCBwPWU9PihkPW5ldyBQcm9taXNlKChhc3luYyh0LG4pPT57dHJ5e2NvbnN0IG49YXdhaXQoYXN5bmMgZT0+e2NvbnN0IHQ9YXdhaXQoMCxzLlhsKSgpO2lmKHUpdGhyb3cgbmV3IEVycm9yKFwiQSBkb2NrIHByb3ZpZGVyIGZvciB0aGUgcGxhdGZvcm0gaXMgYWxyZWFkeSByZWdpc3RlcmVkLlwiKTtyZXR1cm4gdT0hMCxlLmNsaWVudEFQSVZlcnNpb249ci51MCx0LmRpc3BhdGNoKHMuV0YuUmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9jayxpbmZvOmV9KX0pKGUpOygwLGkuV24pKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246bj8ud29ya3NwYWNlVmVyc2lvbn0pLHQoe2NsaWVudEFQSVZlcnNpb246ci51MCx3b3Jrc3BhY2VWZXJzaW9uOm4ud29ya3NwYWNlVmVyc2lvbnx8XCJcIn0pfWNhdGNoKGUpeygwLGkuV24pKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZS5tZXNzYWdlfSksbihlKSxkPW51bGx9fSkpLGQpLGw9YXN5bmMoKT0+e2F3YWl0IGQsdT0hMTtyZXR1cm4oYXdhaXQoMCxzLlhsKSgpKS5kaXNwYXRjaChzLldGLkRlcmVnaXN0ZXJQcm92aWRlcix7cHJvdmlkZXJUeXBlOmEubFAuRG9ja30pfSxmPWFzeW5jKCk9Pnthd2FpdCBkLGF3YWl0KDAscy5hQikoKSxhd2FpdCgwLGEuUjgpKGEubFAuRG9jayl9LHc9YXN5bmMoKT0+e2F3YWl0IGQsYXdhaXQoMCxzLmFCKSgpLGF3YWl0KDAsYS5YXykoYS5sUC5Eb2NrKX07dmFyIGcsaD1uKDcwMyk7bigxMjEpOyFmdW5jdGlvbihlKXtlLlRhYkNyZWF0ZWQ9XCJ0YWItY3JlYXRlZFwiLGUuQ29udGFpbmVyQ3JlYXRlZD1cImNvbnRhaW5lci1jcmVhdGVkXCIsZS5Db250YWluZXJSZXNpemVkPVwiY29udGFpbmVyLXJlc2l6ZWRcIn0oZ3x8KGc9e30pKTtuZXcgTWFwO3ZhciB5OyFmdW5jdGlvbihlKXtlLkN1cnJlbnRXb3Jrc3BhY2VJZD1cImN1cnJlbnRXb3Jrc3BhY2VJZFwiLGUuTGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwibGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5NYWNoaW5lTmFtZT1cIm1hY2hpbmVOYW1lXCIsZS5OZXdUYWJQYWdlTGF5b3V0PVwiTmV3VGFiUGFnZUxheW91dFwiLGUuTmV3VGFiUGFnZVNvcnQ9XCJOZXdUYWJQYWdlU29ydFwiLGUuRG9ja1Bvc2l0aW9uPVwiRG9ja1Bvc2l0aW9uXCJ9KHl8fCh5PXt9KSk7Y29uc3Qgdj0oKT0+YXN5bmMgZnVuY3Rpb24oKXtyZXR1cm4oYXdhaXQoMCxzLkRtKSgpKS5kaXNwYXRjaChzLldGLkdldExlZ2FjeVBhZ2VzLHZvaWQgMCl9KCksbT0oKT0+KGFzeW5jKCk9Pihhd2FpdCgwLHMuRG0pKCkpLmRpc3BhdGNoKHMuV0YuR2V0TGVnYWN5V29ya3NwYWNlcyx2b2lkIDApKSgpO3ZhciBTPW4oNTI4KSxQPW4oMjk4KSxDPW4oMTA5KSxrPW4oNzU4KSxXPW4oMTE0KX0pKCksbW9kdWxlLmV4cG9ydHM9b30pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmxldCBjYWNoZWRBcHBzOiBBcHBbXTtcblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVFbnRyaWVzKGFwcHM6IEFwcFtdKSB7XG5cdGxldCBjYW5MYXVuY2hFeHRlcm5hbFByb2Nlc3NSZXNwb25zZTtcblxuXHR0cnkge1xuXHRcdGNhbkxhdW5jaEV4dGVybmFsUHJvY2Vzc1Jlc3BvbnNlID0gYXdhaXQgZmluLlN5c3RlbS5xdWVyeVBlcm1pc3Npb25Gb3JDdXJyZW50Q29udGV4dChcblx0XHRcdFwiU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2Vzc1wiXG5cdFx0KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgcXVlcnlpbmcgZm9yIFN5c3RlbS5sYXVuY2hFeHRlcm5hbFByb2Nlc3MgcGVybWlzc2lvblwiLCBlcnJvcik7XG5cdH1cblx0Y29uc3QgY2FuTGF1bmNoRXh0ZXJuYWxQcm9jZXNzID0gY2FuTGF1bmNoRXh0ZXJuYWxQcm9jZXNzUmVzcG9uc2U/LmdyYW50ZWQ7XG5cblx0bGV0IGNhbkRvd25sb2FkQXBwQXNzZXRzUmVzcG9uc2U7XG5cblx0dHJ5IHtcblx0XHRjYW5Eb3dubG9hZEFwcEFzc2V0c1Jlc3BvbnNlID0gYXdhaXQgZmluLlN5c3RlbS5xdWVyeVBlcm1pc3Npb25Gb3JDdXJyZW50Q29udGV4dChcIlN5c3RlbS5kb3dubG9hZEFzc2V0XCIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBxdWVyeWluZyBmb3IgU3lzdGVtLmRvd25sb2FkQXNzZXQgcGVybWlzc2lvblwiLCBlcnJvcik7XG5cdH1cblxuXHRjb25zdCBjYW5Eb3dubG9hZEFwcEFzc2V0cyA9IGNhbkRvd25sb2FkQXBwQXNzZXRzUmVzcG9uc2U/LmdyYW50ZWQ7XG5cblx0Y29uc3QgdmFsaWRhdGVkQXBwczogQXBwW10gPSBbXTtcblx0Y29uc3QgcmVqZWN0ZWRBcHBJZHMgPSBbXTtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRjb25zdCBhcHBBc3NldFRhZyA9IHNldHRpbmdzPy5hcHBQcm92aWRlcj8uYXBwQXNzZXRUYWcgPz8gXCJhcHBhc3NldFwiO1xuXHRjb25zdCBzdXBwb3J0ZWRNYW5pZmVzdFR5cGVzID0gc2V0dGluZ3M/LmFwcFByb3ZpZGVyPy5tYW5pZmVzdFR5cGVzO1xuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYXBwcy5sZW5ndGg7IGkrKykge1xuXHRcdGxldCB2YWxpZEFwcCA9IHRydWU7XG5cdFx0aWYgKHN1cHBvcnRlZE1hbmlmZXN0VHlwZXMgIT09IHVuZGVmaW5lZCAmJiBzdXBwb3J0ZWRNYW5pZmVzdFR5cGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdHZhbGlkQXBwID0gc3VwcG9ydGVkTWFuaWZlc3RUeXBlcy5pbmNsdWRlcyhhcHBzW2ldLm1hbmlmZXN0VHlwZSk7XG5cdFx0fVxuXG5cdFx0aWYgKHZhbGlkQXBwKSB7XG5cdFx0XHRpZiAoYXBwc1tpXS5tYW5pZmVzdFR5cGUgIT09IFwiZXh0ZXJuYWxcIikge1xuXHRcdFx0XHR2YWxpZGF0ZWRBcHBzLnB1c2goYXBwc1tpXSk7XG5cdFx0XHR9IGVsc2UgaWYgKGNhbkxhdW5jaEV4dGVybmFsUHJvY2VzcyA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmVqZWN0ZWRBcHBJZHMucHVzaChhcHBzW2ldLmFwcElkKTtcblx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdEFycmF5LmlzQXJyYXkoYXBwc1tpXS50YWdzKSAmJlxuXHRcdFx0XHRhcHBzW2ldLnRhZ3MuaW5jbHVkZXMoYXBwQXNzZXRUYWcpICYmXG5cdFx0XHRcdGNhbkRvd25sb2FkQXBwQXNzZXRzID09PSBmYWxzZVxuXHRcdFx0KSB7XG5cdFx0XHRcdHJlamVjdGVkQXBwSWRzLnB1c2goYXBwc1tpXS5hcHBJZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWxpZGF0ZWRBcHBzLnB1c2goYXBwc1tpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKHJlamVjdGVkQXBwSWRzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRcIkFwcHMudHM6IHZhbGlkYXRlRW50cmllczogTm90IHBhc3NpbmcgdGhlIGZvbGxvd2luZyBsaXN0IG9mIGFwcGxpY2F0aW9ucyBhcyB0aGV5IHdpbGwgbm90IGJlIGFibGUgdG8gcnVuIG9uIHRoaXMgbWFjaGluZSBkdWUgdG8gbWlzc2luZyBwZXJtaXNzaW9ucy4gQWx0ZXJuYXRpdmVseSB0aGlzIGxvZ2ljIGNvdWxkIGJlIG1vdmVkIHRvIHRoZSBsYXVuY2ggZnVuY3Rpb24gd2hlcmUgYSBzZWxlY3Rpb24gaXMgbm90IGxhdW5jaGVkIGJ1dCB0aGUgdXNlciBpcyBwcmVzZW50ZWQgd2l0aCBhIG1vZGFsIHNheWluZyB0aGV5IGNhbid0IGxhdW5jaCBpdCBkdWUgdG8gcGVybWlzc2lvbnMuXCIsXG5cdFx0XHRyZWplY3RlZEFwcElkc1xuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gdmFsaWRhdGVkQXBwcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVzdEVudHJpZXMoXG5cdHVybDogc3RyaW5nLFxuXHRjcmVkZW50aWFscz86IFwib21pdFwiIHwgXCJzYW1lLW9yaWdpblwiIHwgXCJpbmNsdWRlXCIsXG5cdGNhY2hlRHVyYXRpb24/OiBudW1iZXJcbik6IFByb21pc2U8QXBwW10+IHtcblx0Y29uc3Qgb3B0aW9ucyA9IGNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQgPyB7IGNyZWRlbnRpYWxzIH0gOiB1bmRlZmluZWQ7XG5cdGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBbXTtcblx0fVxuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucyk7XG5cblx0Y29uc3QgYXBwczogQXBwW10gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cblx0Y2FjaGVkQXBwcyA9IGF3YWl0IHZhbGlkYXRlRW50cmllcyhhcHBzKTtcblxuXHRpZiAoY2FjaGVEdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y29uc3Qgc2V0VGltZW91dEluTXMgPSBjYWNoZUR1cmF0aW9uICogNjAgKiAxMDAwO1xuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coXCJDbGVhcmluZyBjYWNoZSBvZiBhcHBzIGFzIGNhY2hlIGR1cmF0aW9uIGhhcyBwYXNzZWQuXCIpO1xuXHRcdFx0Y2FjaGVkQXBwcyA9IHVuZGVmaW5lZDtcblx0XHR9LCBzZXRUaW1lb3V0SW5Ncyk7XG5cdH1cblxuXHRyZXR1cm4gY2FjaGVkQXBwcztcbn1cblxuZnVuY3Rpb24gdXBkYXRlRW50cnkoXG5cdHNvdXJjZToge1xuXHRcdFtrZXk6IHN0cmluZ106IHtcblx0XHRcdGludGVudDogeyBuYW1lOiBzdHJpbmc7IGRpc3BsYXlOYW1lOiBzdHJpbmcgfTtcblx0XHRcdGFwcHM6IEFwcFtdO1xuXHRcdH07XG5cdH0sXG5cdGludGVudCxcblx0YXBwOiBBcHBcbikge1xuXHRpZiAoc291cmNlW2ludGVudC5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gaW4gYSBwcm9kdWN0aW9uIGFwcCB5b3Ugd291bGQgZWl0aGVyIG5lZWQgdG8gZW5zdXJlIHRoYXQgZXZlcnkgYXBwIHdhcyBwb3B1bGF0ZWQgd2l0aCB0aGUgc2FtZSBuYW1lICYgZGlzcGxheU5hbWUgZm9yIGFuIGludGVudCBmcm9tIGEgZ29sZGVuIHNvdXJjZSAoZS5nLiBpbnRlbnRzIHRhYmxlKSBzbyBwaWNraW5nIHRoZSBmaXJzdCBlbnRyeSB3b3VsZG4ndCBtYWtlIGEgZGlmZmVyZW5jZS5cblx0XHQvLyBvciB5b3UgY291bGQgcHVsbCBpbiBhIGdvbGRlbiBzb3VyY2Ugb2YgaW50ZW50cyBmcm9tIGEgc2VydmljZSBhbmQgdGhlbiBkbyBhIGxvb2t1cCB1c2luZyB0aGUgaW50ZW50IG5hbWUgdG8gZ2V0IGFuIG9iamVjdCB3aXRoIGludGVudCBuYW1lIGFuZCBvZmZpY2lhbCBkaXNwbGF5IG5hbWUuXG5cdFx0c291cmNlW2ludGVudC5uYW1lXSA9IHtcblx0XHRcdGludGVudDoge1xuXHRcdFx0XHRuYW1lOiBpbnRlbnQubmFtZSxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IGludGVudC5kaXNwbGF5TmFtZVxuXHRcdFx0fSxcblx0XHRcdGFwcHM6IFtdXG5cdFx0fTtcblx0fVxuXHRzb3VyY2VbaW50ZW50Lm5hbWVdLmFwcHMucHVzaChhcHApO1xuXHRyZXR1cm4gc291cmNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwcygpOiBQcm9taXNlPEFwcFtdPiB7XG5cdGNvbnNvbGUubG9nKFwiUmVxdWVzdGluZyBhcHBzLlwiKTtcblx0dHJ5IHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3QgYXBwcyA9XG5cdFx0XHRjYWNoZWRBcHBzID8/XG5cdFx0XHQoYXdhaXQgZ2V0UmVzdEVudHJpZXMoXG5cdFx0XHRcdHNldHRpbmdzPy5hcHBQcm92aWRlcj8uYXBwc1NvdXJjZVVybCxcblx0XHRcdFx0c2V0dGluZ3M/LmFwcFByb3ZpZGVyPy5pbmNsdWRlQ3JlZGVudGlhbE9uU291cmNlUmVxdWVzdCxcblx0XHRcdFx0c2V0dGluZ3M/LmFwcFByb3ZpZGVyPy5jYWNoZUR1cmF0aW9uSW5NaW51dGVzXG5cdFx0XHQpKTtcblx0XHRyZXR1cm4gYXBwcztcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgYXBwcy4gUmV0dXJuaW5nIGVtcHR5IGxpc3QuXCIsIGVycik7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBcHBzQnlUYWcodGFnczogc3RyaW5nW10pOiBQcm9taXNlPEFwcFtdPiB7XG5cdGNvbnN0IGFwcHMgPSBhd2FpdCBnZXRBcHBzKCk7XG5cdGNvbnN0IGZpbHRlcmVkQXBwcyA9IGFwcHMuZmlsdGVyKCh2YWx1ZSkgPT4ge1xuXHRcdGlmICh2YWx1ZS50YWdzID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodmFsdWUudGFncy5pbmNsdWRlcyh0YWdzW2ldKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0cmV0dXJuIGZpbHRlcmVkQXBwcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcChyZXF1ZXN0ZWRBcHA6IHN0cmluZyB8IHsgYXBwSWQ6IHN0cmluZyB9KTogUHJvbWlzZTxBcHA+IHtcblx0Y29uc3QgYXBwcyA9IGF3YWl0IGdldEFwcHMoKTtcblx0bGV0IGFwcElkO1xuXHRpZiAocmVxdWVzdGVkQXBwICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAodHlwZW9mIHJlcXVlc3RlZEFwcCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0YXBwSWQgPSByZXF1ZXN0ZWRBcHA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFwcElkID0gcmVxdWVzdGVkQXBwLmFwcElkO1xuXHRcdH1cblx0fVxuXHRpZiAoYXBwSWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblx0Y29uc3QgYXBwID0gYXBwcy5maW5kKChlbnRyeSkgPT4gZW50cnkuYXBwSWQgPT09IGFwcElkKTtcblxuXHRyZXR1cm4gYXBwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwc0J5SW50ZW50KGludGVudDogc3RyaW5nKTogUHJvbWlzZTxBcHBbXT4ge1xuXHRjb25zdCBhcHBzID0gYXdhaXQgZ2V0QXBwcygpO1xuXHRjb25zdCBmaWx0ZXJlZEFwcHMgPSBhcHBzLmZpbHRlcigodmFsdWUpID0+IHtcblx0XHRpZiAodmFsdWUuaW50ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUuaW50ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHZhbHVlLmludGVudHNbaV0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBpbnRlbnQudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0cmV0dXJuIGZpbHRlcmVkQXBwcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEludGVudChcblx0aW50ZW50OiBzdHJpbmcsXG5cdGNvbnRleHRUeXBlPzogc3RyaW5nXG4pOiBQcm9taXNlPHsgaW50ZW50OiB7IG5hbWU6IHN0cmluZzsgZGlzcGxheU5hbWU6IHN0cmluZyB9OyBhcHBzOiBBcHBbXSB9PiB7XG5cdGNvbnN0IGFwcHMgPSBhd2FpdCBnZXRBcHBzKCk7XG5cdGxldCBpbnRlbnRzOiB7XG5cdFx0W2tleTogc3RyaW5nXToge1xuXHRcdFx0aW50ZW50OiB7IG5hbWU6IHN0cmluZzsgZGlzcGxheU5hbWU6IHN0cmluZyB9O1xuXHRcdFx0YXBwczogQXBwW107XG5cdFx0fTtcblx0fSA9IHt9O1xuXG5cdGlmIChBcnJheS5pc0FycmF5KGFwcHMpKSB7XG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiBhcHBzKSB7XG5cdFx0XHRpZiAodmFsdWUuaW50ZW50cyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUuaW50ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmICh2YWx1ZS5pbnRlbnRzW2ldLm5hbWUgPT09IGludGVudCkge1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRleHRUeXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0aW50ZW50cyA9IHVwZGF0ZUVudHJ5KGludGVudHMsIHZhbHVlLmludGVudHNbaV0sIHZhbHVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdFx0XHRcdEFycmF5LmlzQXJyYXkodmFsdWUuaW50ZW50c1tpXS5jb250ZXh0cykgJiZcblx0XHRcdFx0XHRcdFx0dmFsdWUuaW50ZW50c1tpXS5jb250ZXh0cy5pbmNsdWRlcyhjb250ZXh0VHlwZSlcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRpbnRlbnRzID0gdXBkYXRlRW50cnkoaW50ZW50cywgdmFsdWUuaW50ZW50c1tpXSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3VsdHMgPSBPYmplY3QudmFsdWVzKGludGVudHMpO1xuXHRcdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc29sZS5sb2coYE5vIHJlc3VsdHMgZm91bmQgZm9yIGZpbmRJbnRlbnQgZm9yIGludGVudCAke2ludGVudH0gYW5kIGNvbnRleHQgJHtjb250ZXh0VHlwZX1gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSBpZiAocmVzdWx0cy5sZW5ndGggPT09IDEpIHtcblx0XHRcdHJldHVybiByZXN1bHRzWzBdO1xuXHRcdH1cblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRgUmVjZWl2ZWQgbW9yZSB0aGFuIG9uZSByZXN1bHQgZm9yIGZpbmRJbnRlbnQgZm9yIGludGVudCAke2ludGVudH0gYW5kIGNvbnRleHQgJHtjb250ZXh0VHlwZX0uIFJldHVybmluZyB0aGUgZmlyc3QgZW50cnkuYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3VsdHNbMF07XG5cdH1cblx0Y29uc29sZS53YXJuKFwiVGhlcmUgd2FzIG5vIGFwcHMgcmV0dXJuZWQgc28gd2UgYXJlIHVuYWJsZSB0byBmaW5kIGFwcHMgdGhhdCBzdXBwb3J0IGFuIGludGVudC5cIik7XG5cdHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW50ZW50c0J5Q29udGV4dChcblx0Y29udGV4dFR5cGU6IHN0cmluZ1xuKTogUHJvbWlzZTx7IGludGVudDogeyBuYW1lOiBzdHJpbmc7IGRpc3BsYXlOYW1lOiBzdHJpbmcgfTsgYXBwczogQXBwW10gfVtdPiB7XG5cdGNvbnN0IGFwcHMgPSBhd2FpdCBnZXRBcHBzKCk7XG5cdGxldCBpbnRlbnRzOiB7XG5cdFx0W2tleTogc3RyaW5nXToge1xuXHRcdFx0aW50ZW50OiB7IG5hbWU6IHN0cmluZzsgZGlzcGxheU5hbWU6IHN0cmluZyB9O1xuXHRcdFx0YXBwczogQXBwW107XG5cdFx0fTtcblx0fSA9IHt9O1xuXG5cdGlmIChBcnJheS5pc0FycmF5KGFwcHMpKSB7XG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiBhcHBzKSB7XG5cdFx0XHRpZiAodmFsdWUuaW50ZW50cyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUuaW50ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHZhbHVlLmludGVudHNbaV0uY29udGV4dHMpICYmIHZhbHVlLmludGVudHNbaV0uY29udGV4dHMuaW5jbHVkZXMoY29udGV4dFR5cGUpKSB7XG5cdFx0XHRcdFx0XHRpbnRlbnRzID0gdXBkYXRlRW50cnkoaW50ZW50cywgdmFsdWUuaW50ZW50c1tpXSwgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBPYmplY3QudmFsdWVzKGludGVudHMpO1xuXHR9XG5cdGNvbnNvbGUud2FybihcIlVuYWJsZSB0byBnZXQgYXBwcyBzbyB3ZSBjYW4gbm90IGdldCBhcHBzIGFuZCBpbnRlbnRzIHRoYXQgc3VwcG9ydCBhIHBhcnRpY3VsYXIgY29udGV4dFwiKTtcblxuXHRyZXR1cm4gW107XG59XG4iLCJpbXBvcnQgeyBkZXJlZ2lzdGVyIGFzIGRlcmVnaXN0ZXJIb21lLCByZWdpc3RlciBhcyByZWdpc3RlckhvbWUsIHNob3cgYXMgc2hvd0hvbWUgfSBmcm9tIFwiLi9ob21lXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBkZXJlZ2lzdGVyIGFzIGRlcmVnaXN0ZXJTdG9yZSwgcmVnaXN0ZXIgYXMgcmVnaXN0ZXJTdG9yZSwgc2hvdyBhcyBzaG93U3RvcmUgfSBmcm9tIFwiLi9zdG9yZVwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHtcblx0Ly8geW91IGNhbiBraWNrIG9mZiB5b3VyIGJvb3RzdHJhcHBpbmcgcHJvY2VzcyBoZXJlIHdoZXJlIHlvdSBtYXkgZGVjaWRlIHRvIHByb21wdCBmb3IgYXV0aGVudGljYXRpb24sXG5cdC8vIGdhdGhlciByZWZlcmVuY2UgZGF0YSBldGMgYmVmb3JlIHN0YXJ0aW5nIHdvcmtzcGFjZSBhbmQgaW50ZXJhY3Rpbmcgd2l0aCBpdC5cblx0Y29uc29sZS5sb2coXCJJbml0aWFsaXNpbmcgdGhlIGJvb3RzdHJhcHBlclwiKTtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRsZXQgd29ya3NwYWNlTG9hZGVkID0gZmFsc2U7XG5cdGNvbnN0IHNldHVwSG9tZSA9IHNldHRpbmdzPy5ib290c3RyYXA/LmhvbWUgPz8gdHJ1ZTtcblx0Y29uc3Qgc2V0dXBTdG9yZSA9IHNldHRpbmdzPy5ib290c3RyYXA/LnN0b3JlID8/IHRydWU7XG5cblx0aWYgKHNldHVwSG9tZSkge1xuXHRcdC8vIG9ubHkgcmVnaXN0ZXIgc2VhcmNoIGxvZ2ljIG9uY2Ugd29ya3NwYWNlIGlzIHJ1bm5pbmdcblx0XHRhd2FpdCByZWdpc3RlckhvbWUoKTtcblx0XHR3b3Jrc3BhY2VMb2FkZWQgPSB0cnVlO1xuXHRcdGF3YWl0IHNob3dIb21lKCk7XG5cdH1cblxuXHRpZiAoc2V0dXBTdG9yZSkge1xuXHRcdGF3YWl0IHJlZ2lzdGVyU3RvcmUoKTtcblx0XHRpZiAoIXdvcmtzcGFjZUxvYWRlZCkge1xuXHRcdFx0YXdhaXQgc2hvd1N0b3JlKCk7XG5cdFx0fVxuXHR9XG5cblx0Y29uc3QgcHJvdmlkZXJXaW5kb3cgPSBmaW4uV2luZG93LmdldEN1cnJlbnRTeW5jKCk7XG5cdGF3YWl0IHByb3ZpZGVyV2luZG93Lm9uY2UoXCJjbG9zZS1yZXF1ZXN0ZWRcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG5cdFx0YXdhaXQgZGVyZWdpc3RlclN0b3JlKCk7XG5cdFx0YXdhaXQgZGVyZWdpc3RlckhvbWUoKTtcblx0XHRhd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5xdWl0KCk7XG5cdH0pO1xufVxuIiwiaW1wb3J0IHsgZ2V0Q3VycmVudFN5bmMsIFBhZ2UgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWdlKHBhZ2VJZDogc3RyaW5nKSB7XG5cdGNvbnN0IHBsYXRmb3JtID0gZ2V0Q3VycmVudFN5bmMoKTtcblx0cmV0dXJuIHBsYXRmb3JtLlN0b3JhZ2UuZ2V0UGFnZShwYWdlSWQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZXMoKSB7XG5cdGNvbnN0IHBsYXRmb3JtID0gZ2V0Q3VycmVudFN5bmMoKTtcblx0cmV0dXJuIHBsYXRmb3JtLlN0b3JhZ2UuZ2V0UGFnZXMoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBhZ2UocGFnZUlkOiBzdHJpbmcpIHtcblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRyZXR1cm4gcGxhdGZvcm0uU3RvcmFnZS5kZWxldGVQYWdlKHBhZ2VJZCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsYXVuY2hQYWdlKHBhZ2U6IFBhZ2UpIHtcblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRyZXR1cm4gcGxhdGZvcm0uQnJvd3Nlci5jcmVhdGVXaW5kb3coe1xuXHRcdHdvcmtzcGFjZVBsYXRmb3JtOiB7XG5cdFx0XHRwYWdlczogW3BhZ2VdXG5cdFx0fVxuXHR9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxhdW5jaFZpZXcoXG5cdHZpZXc6IE9wZW5GaW4uUGxhdGZvcm1WaWV3Q3JlYXRpb25PcHRpb25zIHwgc3RyaW5nLFxuXHR0YXJnZXRJZGVudGl0eT86IE9wZW5GaW4uSWRlbnRpdHlcbikge1xuXHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdGxldCB2aWV3T3B0aW9uczogT3BlbkZpbi5QbGF0Zm9ybVZpZXdDcmVhdGlvbk9wdGlvbnM7XG5cdGlmICh0eXBlb2YgdmlldyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHZpZXdPcHRpb25zID0geyB1cmw6IHZpZXcsIHRhcmdldDogbnVsbCB9O1xuXHR9IGVsc2Uge1xuXHRcdHZpZXdPcHRpb25zID0gdmlldztcblx0fVxuXHRyZXR1cm4gcGxhdGZvcm0uY3JlYXRlVmlldyh2aWV3T3B0aW9ucywgdGFyZ2V0SWRlbnRpdHkpO1xufVxuIiwiaW1wb3J0IHtcblx0QXBwLFxuXHRDTElEaXNwYXRjaGVkU2VhcmNoUmVzdWx0LFxuXHRDTElGaWx0ZXIsXG5cdENMSUZpbHRlck9wdGlvblR5cGUsXG5cdENMSVByb3ZpZGVyLFxuXHRDTElTZWFyY2hMaXN0ZW5lclJlcXVlc3QsXG5cdENMSVNlYXJjaExpc3RlbmVyUmVzcG9uc2UsXG5cdENMSVNlYXJjaFJlc3BvbnNlLFxuXHRDTElUZW1wbGF0ZSxcblx0SG9tZSxcblx0SG9tZVNlYXJjaFJlc3VsdFxufSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybVwiO1xuaW1wb3J0IHsgZ2V0QXBwcyB9IGZyb20gXCIuL2FwcHNcIjtcbmltcG9ydCB7IGRlbGV0ZVBhZ2UsIGdldFBhZ2UsIGdldFBhZ2VzLCBsYXVuY2hQYWdlIH0gZnJvbSBcIi4vYnJvd3NlclwiO1xuaW1wb3J0IHsgbGF1bmNoIH0gZnJvbSBcIi4vbGF1bmNoXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmNvbnN0IEhPTUVfQUNUSU9OX0RFTEVURV9QQUdFID0gXCJEZWxldGUgUGFnZVwiO1xuY29uc3QgSE9NRV9BQ1RJT05fTEFVTkNIX1BBR0UgPSBcIkxhdW5jaCBQYWdlXCI7XG5sZXQgaXNIb21lUmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBnZXRTZWFyY2hGaWx0ZXJzKHRhZ3M6IHN0cmluZ1tdKTogQ0xJRmlsdGVyW10ge1xuXHRpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSkge1xuXHRcdGNvbnN0IGZpbHRlcnM6IENMSUZpbHRlcltdID0gW107XG5cdFx0Y29uc3QgdW5pcXVlVGFncyA9IFsuLi5uZXcgU2V0KHRhZ3Muc29ydCgpKV07XG5cdFx0Y29uc3QgdGFnRmlsdGVyOiBDTElGaWx0ZXIgPSB7XG5cdFx0XHRpZDogXCJ0YWdzXCIsXG5cdFx0XHR0aXRsZTogXCJUYWdzXCIsXG5cdFx0XHR0eXBlOiBDTElGaWx0ZXJPcHRpb25UeXBlLk11bHRpU2VsZWN0LFxuXHRcdFx0b3B0aW9uczogW11cblx0XHR9O1xuXG5cdFx0Zm9yIChjb25zdCB0YWcgb2YgdW5pcXVlVGFncykge1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodGFnRmlsdGVyLm9wdGlvbnMpKSB7XG5cdFx0XHRcdHRhZ0ZpbHRlci5vcHRpb25zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiB0YWcsXG5cdFx0XHRcdFx0aXNTZWxlY3RlZDogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZmlsdGVycy5wdXNoKHRhZ0ZpbHRlcik7XG5cdFx0cmV0dXJuIGZpbHRlcnM7XG5cdH1cblx0cmV0dXJuIFtdO1xufVxuXG5mdW5jdGlvbiBtYXBBcHBFbnRyaWVzVG9TZWFyY2hFbnRyaWVzKGFwcHM6IEFwcFtdKTogSG9tZVNlYXJjaFJlc3VsdFtdIHtcblx0Y29uc3QgYXBwUmVzdWx0czogSG9tZVNlYXJjaFJlc3VsdFtdID0gW107XG5cdGlmIChBcnJheS5pc0FycmF5KGFwcHMpKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhcHBzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBhY3Rpb24gPSB7IG5hbWU6IFwiTGF1bmNoIFZpZXdcIiwgaG90a2V5OiBcImVudGVyXCIgfTtcblx0XHRcdGNvbnN0IGVudHJ5OiBQYXJ0aWFsPEhvbWVTZWFyY2hSZXN1bHQ+ID0ge1xuXHRcdFx0XHRrZXk6IGFwcHNbaV0uYXBwSWQsXG5cdFx0XHRcdHRpdGxlOiBhcHBzW2ldLnRpdGxlLFxuXHRcdFx0XHRkYXRhOiBhcHBzW2ldXG5cdFx0XHR9O1xuXG5cdFx0XHRpZiAoYXBwc1tpXS5tYW5pZmVzdFR5cGUgPT09IFwidmlld1wiKSB7XG5cdFx0XHRcdGVudHJ5LmxhYmVsID0gXCJWaWV3XCI7XG5cdFx0XHRcdGVudHJ5LmFjdGlvbnMgPSBbYWN0aW9uXTtcblx0XHRcdH1cblx0XHRcdGlmIChhcHBzW2ldLm1hbmlmZXN0VHlwZSA9PT0gXCJzbmFwc2hvdFwiKSB7XG5cdFx0XHRcdGVudHJ5LmxhYmVsID0gXCJTbmFwc2hvdFwiO1xuXHRcdFx0XHRhY3Rpb24ubmFtZSA9IFwiTGF1bmNoIFNuYXBzaG90XCI7XG5cdFx0XHRcdGVudHJ5LmFjdGlvbnMgPSBbYWN0aW9uXTtcblx0XHRcdH1cblx0XHRcdGlmIChhcHBzW2ldLm1hbmlmZXN0VHlwZSA9PT0gXCJtYW5pZmVzdFwiKSB7XG5cdFx0XHRcdGVudHJ5LmxhYmVsID0gXCJBcHBcIjtcblx0XHRcdFx0YWN0aW9uLm5hbWUgPSBcIkxhdW5jaCBBcHBcIjtcblx0XHRcdFx0ZW50cnkuYWN0aW9ucyA9IFthY3Rpb25dO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFwcHNbaV0ubWFuaWZlc3RUeXBlID09PSBcImV4dGVybmFsXCIpIHtcblx0XHRcdFx0YWN0aW9uLm5hbWUgPSBcIkxhdW5jaCBOYXRpdmUgQXBwXCI7XG5cdFx0XHRcdGVudHJ5LmFjdGlvbnMgPSBbYWN0aW9uXTtcblx0XHRcdFx0ZW50cnkubGFiZWwgPSBcIk5hdGl2ZSBBcHBcIjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoYXBwc1tpXS5pY29ucykgJiYgYXBwc1tpXS5pY29ucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGVudHJ5Lmljb24gPSBhcHBzW2ldLmljb25zWzBdLnNyYztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGFwcHNbaV0uZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRlbnRyeS5kZXNjcmlwdGlvbiA9IGFwcHNbaV0uZGVzY3JpcHRpb247XG5cdFx0XHRcdGVudHJ5LnNob3J0RGVzY3JpcHRpb24gPSBhcHBzW2ldLmRlc2NyaXB0aW9uO1xuXHRcdFx0XHRlbnRyeS50ZW1wbGF0ZSA9IENMSVRlbXBsYXRlLlNpbXBsZVRleHQ7XG5cdFx0XHRcdGVudHJ5LnRlbXBsYXRlQ29udGVudCA9IGFwcHNbaV0uZGVzY3JpcHRpb247XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbnRyeS50ZW1wbGF0ZSA9IENMSVRlbXBsYXRlLlBsYWluO1xuXHRcdFx0fVxuXG5cdFx0XHRhcHBSZXN1bHRzLnB1c2goZW50cnkgYXMgSG9tZVNlYXJjaFJlc3VsdCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhcHBSZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBtYXBQYWdlRW50cmllc1RvU2VhcmNoRW50cmllcyhwYWdlczogUGFnZVtdKTogSG9tZVNlYXJjaFJlc3VsdFtdIHtcblx0Y29uc3QgcGFnZVJlc3VsdHM6IEhvbWVTZWFyY2hSZXN1bHRbXSA9IFtdO1xuXHRpZiAoQXJyYXkuaXNBcnJheShwYWdlcykpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBlbnRyeTogUGFydGlhbDxIb21lU2VhcmNoUmVzdWx0PiA9IHtcblx0XHRcdFx0a2V5OiBwYWdlc1tpXS5wYWdlSWQsXG5cdFx0XHRcdHRpdGxlOiBwYWdlc1tpXS50aXRsZSxcblx0XHRcdFx0bGFiZWw6IFwiUGFnZVwiLFxuXHRcdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdFx0eyBuYW1lOiBIT01FX0FDVElPTl9ERUxFVEVfUEFHRSwgaG90a2V5OiBcIkNtZE9yQ3RybCtTaGlmdCtEXCIgfSxcblx0XHRcdFx0XHR7IG5hbWU6IEhPTUVfQUNUSU9OX0xBVU5DSF9QQUdFLCBob3RrZXk6IFwiRW50ZXJcIiB9XG5cdFx0XHRcdF0sXG5cdFx0XHRcdGRhdGE6IHsgdGFnczogW1wicGFnZVwiXSwgcGFnZUlkOiBwYWdlc1tpXS5wYWdlSWQgfVxuXHRcdFx0fTtcblxuXHRcdFx0aWYgKHBhZ2VzW2ldLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZW50cnkuZGVzY3JpcHRpb24gPSBwYWdlc1tpXS5kZXNjcmlwdGlvbjtcblx0XHRcdFx0ZW50cnkuc2hvcnREZXNjcmlwdGlvbiA9IHBhZ2VzW2ldLmRlc2NyaXB0aW9uO1xuXHRcdFx0XHRlbnRyeS50ZW1wbGF0ZSA9IENMSVRlbXBsYXRlLlNpbXBsZVRleHQ7XG5cdFx0XHRcdGVudHJ5LnRlbXBsYXRlQ29udGVudCA9IHBhZ2VzW2ldLmRlc2NyaXB0aW9uO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZW50cnkudGVtcGxhdGUgPSBDTElUZW1wbGF0ZS5QbGFpbjtcblx0XHRcdH1cblxuXHRcdFx0cGFnZVJlc3VsdHMucHVzaChlbnRyeSBhcyBIb21lU2VhcmNoUmVzdWx0KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHBhZ2VSZXN1bHRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSZXN1bHRzKFxuXHRxdWVyeT86IHN0cmluZyxcblx0cXVlcnlNaW5MZW5ndGggPSAzLFxuXHRxdWVyeUFnYWluc3Q6IHN0cmluZ1tdID0gW1widGl0bGVcIl0sXG5cdGZpbHRlcnM/OiBDTElGaWx0ZXJbXVxuKTogUHJvbWlzZTxDTElTZWFyY2hSZXNwb25zZT4ge1xuXHRjb25zdCBhcHBzID0gYXdhaXQgZ2V0QXBwcygpO1xuXHRjb25zdCBwYWdlcyA9IGF3YWl0IGdldFBhZ2VzKCk7XG5cblx0Y29uc3QgdGFnczogc3RyaW5nW10gPSBbXTtcblx0Y29uc3QgYXBwU2VhcmNoRW50cmllcyA9IG1hcEFwcEVudHJpZXNUb1NlYXJjaEVudHJpZXMoYXBwcyk7XG5cdGNvbnN0IHBhZ2VTZWFyY2hFbnRyaWVzID0gbWFwUGFnZUVudHJpZXNUb1NlYXJjaEVudHJpZXMocGFnZXMpO1xuXG5cdGNvbnN0IGluaXRpYWxSZXN1bHRzOiBIb21lU2VhcmNoUmVzdWx0W10gPSBbLi4uYXBwU2VhcmNoRW50cmllcywgLi4ucGFnZVNlYXJjaEVudHJpZXNdO1xuXG5cdGlmIChpbml0aWFsUmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgZmluYWxSZXN1bHRzID0gaW5pdGlhbFJlc3VsdHMuZmlsdGVyKChlbnRyeSkgPT4ge1xuXHRcdFx0bGV0IHRleHRNYXRjaEZvdW5kID0gdHJ1ZTtcblx0XHRcdGxldCBmaWx0ZXJNYXRjaEZvdW5kID0gdHJ1ZTtcblxuXHRcdFx0aWYgKHF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgcXVlcnkgIT09IG51bGwgJiYgcXVlcnkubGVuZ3RoID49IHF1ZXJ5TWluTGVuZ3RoKSB7XG5cdFx0XHRcdHRleHRNYXRjaEZvdW5kID0gcXVlcnlBZ2FpbnN0LnNvbWUoKHRhcmdldCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHBhdGggPSB0YXJnZXQuc3BsaXQoXCIuXCIpO1xuXHRcdFx0XHRcdGlmIChwYXRoLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFyZ2V0VmFsdWUgPSBlbnRyeVtwYXRoWzBdXTtcblxuXHRcdFx0XHRcdFx0aWYgKHRhcmdldFZhbHVlICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0VmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHRhcmdldFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0YXJnZXRWYWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYgKHBhdGgubGVuZ3RoID09PSAyKSB7XG5cdFx0XHRcdFx0XHRjb25zdCB0YXJnZXRFbnRyeSA9IGVudHJ5W3BhdGhbMF1dO1xuXHRcdFx0XHRcdFx0bGV0IHRhcmdldFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXTtcblx0XHRcdFx0XHRcdGlmICh0YXJnZXRFbnRyeSAhPT0gdW5kZWZpbmVkICYmIHRhcmdldEVudHJ5ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldFZhbHVlID0gdGFyZ2V0RW50cnlbcGF0aFsxXV07XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0YXJnZXRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIHRhcmdldFZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB0YXJnZXRWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGFyZ2V0VmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICh0YXJnZXRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIHRhcmdldFZhbHVlICE9PSBudWxsICYmIEFycmF5LmlzQXJyYXkodGFyZ2V0VmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXRWYWx1ZS5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHRhcmdldFZhbHVlWzBdID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0VmFsdWUuc29tZSgodGFyZ2V0MikgPT4gdGFyZ2V0Mi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgocXVlcnkpKVxuXHRcdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRcdFx0XHRcdFx0YE1hbmlmZXN0IGNvbmZpZ3VyYXRpb24gZm9yIHNlYXJjaCBzcGVjaWZpZWQgYSBxdWVyeUFnYWluc3QgdGFyZ2V0IHRoYXQgaXMgYW4gYXJyYXkgYnV0IG5vdCBhbiBhcnJheSBvZiBzdHJpbmdzLiBPbmx5IHN0cmluZyB2YWx1ZXMgYW5kIGFycmF5cyBhcmUgc3VwcG9ydGVkOiAke3RhcmdldEVudHJ5fWBcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XHRcdFx0XHRcIlRoZSBtYW5pZmVzdCBjb25maWd1cmF0aW9uIGZvciBzZWFyY2ggaGFzIGEgcXVlcnlBZ2FpbnN0IGVudHJ5IHRoYXQgaGFzIGEgZGVwdGggZ3JlYXRlciB0aGFuIDEuIFlvdSBjYW4gc2VhcmNoIGZvciBlLmcuIGRhdGEudGFncyBpZiBkYXRhIGhhcyB0YWdzIGluIGl0IGFuZCBpdCBpcyBlaXRoZXIgYSBzdHJpbmcgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncy5cIlxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZmlsdGVycykgJiYgZmlsdGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGZpbHRlck1hdGNoRm91bmQgPSBmaWx0ZXJzLnNvbWUoKGZpbHRlcikgPT4ge1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGZpbHRlci5vcHRpb25zKSkge1xuXHRcdFx0XHRcdFx0aWYgKGVudHJ5LmRhdGE/LnRhZ3MgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmlsdGVyLm9wdGlvbnMuZXZlcnkoXG5cdFx0XHRcdFx0XHRcdFx0KG9wdGlvbikgPT4gIW9wdGlvbi5pc1NlbGVjdGVkIHx8IGVudHJ5LmRhdGEudGFncy5pbmNsdWRlcyhvcHRpb24udmFsdWUpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChmaWx0ZXIub3B0aW9ucy5pc1NlbGVjdGVkICYmIGVudHJ5LmRhdGE/LnRhZ3MgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVudHJ5LmRhdGE/LnRhZ3MuaW5kZXhPZihmaWx0ZXIub3B0aW9ucy52YWx1ZSkgPiAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGV4dE1hdGNoRm91bmQgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5kYXRhPy50YWdzKSkge1xuXHRcdFx0XHR0YWdzLnB1c2goLi4uKGVudHJ5LmRhdGEudGFncyBhcyBzdHJpbmdbXSkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRleHRNYXRjaEZvdW5kICYmIGZpbHRlck1hdGNoRm91bmQ7XG5cdFx0fSk7XG5cblx0XHRjb25zdCByZXNwb25zZTogQ0xJU2VhcmNoUmVzcG9uc2UgPSB7XG5cdFx0XHRyZXN1bHRzOiBmaW5hbFJlc3VsdHMsXG5cdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdGZpbHRlcnM6IGdldFNlYXJjaEZpbHRlcnModGFncylcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0cmVzdWx0czogW11cblx0fTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuXHRjb25zb2xlLmxvZyhcIkluaXRpYWxpc2luZyBob21lLlwiKTtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRpZiAoXG5cdFx0c2V0dGluZ3MuaG9tZVByb3ZpZGVyID09PSB1bmRlZmluZWQgfHxcblx0XHRzZXR0aW5ncy5ob21lUHJvdmlkZXIuaWQgPT09IHVuZGVmaW5lZCB8fFxuXHRcdHNldHRpbmdzLmhvbWVQcm92aWRlci50aXRsZSA9PT0gdW5kZWZpbmVkXG5cdCkge1xuXHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFwiaG9tZVByb3ZpZGVyOiBub3QgY29uZmlndXJlZCBpbiB0aGUgY3VzdG9tU2V0dGluZ3Mgb2YgeW91ciBtYW5pZmVzdCBjb3JyZWN0bHkuIEVuc3VyZSB5b3UgaGF2ZSB0aGUgaG9tZVByb3ZpZGVyIG9iamVjdCBkZWZpbmVkIGluIGN1c3RvbVNldHRpbmdzIHdpdGggdGhlIGZvbGxvd2luZyBkZWZpbmVkOiBpZCwgdGl0bGVcIlxuXHRcdCk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgcXVlcnlNaW5MZW5ndGggPSBzZXR0aW5ncz8uaG9tZVByb3ZpZGVyPy5xdWVyeU1pbkxlbmd0aCB8fCAzO1xuXHRjb25zdCBxdWVyeUFnYWluc3QgPSBzZXR0aW5ncz8uaG9tZVByb3ZpZGVyPy5xdWVyeUFnYWluc3Q7XG5cdGxldCBsYXN0UmVzcG9uc2U6IENMSVNlYXJjaExpc3RlbmVyUmVzcG9uc2U7XG5cblx0Y29uc3Qgb25Vc2VySW5wdXQgPSBhc3luYyAoXG5cdFx0cmVxdWVzdDogQ0xJU2VhcmNoTGlzdGVuZXJSZXF1ZXN0LFxuXHRcdHJlc3BvbnNlOiBDTElTZWFyY2hMaXN0ZW5lclJlc3BvbnNlXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzcG9uc2U+ID0+IHtcblx0XHRjb25zdCBxdWVyeSA9IHJlcXVlc3QucXVlcnkudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAocXVlcnkuc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHRcdHJldHVybiB7IHJlc3VsdHM6IFtdIH07XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsdGVyczogQ0xJRmlsdGVyW10gPSByZXF1ZXN0Py5jb250ZXh0Py5zZWxlY3RlZEZpbHRlcnM7XG5cdFx0aWYgKGxhc3RSZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRsYXN0UmVzcG9uc2UuY2xvc2UoKTtcblx0XHR9XG5cdFx0bGFzdFJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdFx0bGFzdFJlc3BvbnNlLm9wZW4oKTtcblx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgZ2V0UmVzdWx0cyhxdWVyeSwgcXVlcnlNaW5MZW5ndGgsIHF1ZXJ5QWdhaW5zdCwgZmlsdGVycyk7XG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH07XG5cblx0Y29uc3Qgb25TZWxlY3Rpb24gPSBhc3luYyAocmVzdWx0OiBDTElEaXNwYXRjaGVkU2VhcmNoUmVzdWx0KSA9PiB7XG5cdFx0aWYgKHJlc3VsdC5kYXRhICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnN0IGRhdGE6IHtcblx0XHRcdFx0cGFnZUlkPzogc3RyaW5nO1xuXHRcdFx0fSAmIEFwcCA9IHJlc3VsdC5kYXRhO1xuXHRcdFx0aWYgKGRhdGEucGFnZUlkICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYgKHJlc3VsdC5hY3Rpb24ubmFtZSA9PT0gSE9NRV9BQ1RJT05fREVMRVRFX1BBR0UpIHtcblx0XHRcdFx0XHRhd2FpdCBkZWxldGVQYWdlKGRhdGEucGFnZUlkKTtcblx0XHRcdFx0XHRpZiAobGFzdFJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgbGFzdFJlc3BvbnNlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRsYXN0UmVzcG9uc2UucmV2b2tlKHJlc3VsdC5rZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBwYWdlVG9MYXVuY2ggPSBhd2FpdCBnZXRQYWdlKGRhdGEucGFnZUlkKTtcblx0XHRcdFx0XHRhd2FpdCBsYXVuY2hQYWdlKHBhZ2VUb0xhdW5jaCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGF3YWl0IGxhdW5jaChkYXRhKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiVW5hYmxlIHRvIGV4ZWN1dGUgcmVzdWx0IHdpdGhvdXQgZGF0YSBiZWluZyBwYXNzZWRcIik7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IGNsaVByb3ZpZGVyOiBDTElQcm92aWRlciA9IHtcblx0XHR0aXRsZTogc2V0dGluZ3MuaG9tZVByb3ZpZGVyLnRpdGxlLFxuXHRcdGlkOiBzZXR0aW5ncy5ob21lUHJvdmlkZXIuaWQsXG5cdFx0aWNvbjogc2V0dGluZ3MuaG9tZVByb3ZpZGVyLmljb24sXG5cdFx0b25Vc2VySW5wdXQsXG5cdFx0b25SZXN1bHREaXNwYXRjaDogb25TZWxlY3Rpb25cblx0fTtcblxuXHRhd2FpdCBIb21lLnJlZ2lzdGVyKGNsaVByb3ZpZGVyKTtcblx0aXNIb21lUmVnaXN0ZXJlZCA9IHRydWU7XG5cdGNvbnNvbGUubG9nKFwiSG9tZSBjb25maWd1cmVkLlwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3coKSB7XG5cdHJldHVybiBIb21lLnNob3coKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhpZGUoKSB7XG5cdHJldHVybiBIb21lLmhpZGUoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcmVnaXN0ZXIoKSB7XG5cdGlmIChpc0hvbWVSZWdpc3RlcmVkKSB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRcdHJldHVybiBIb21lLmRlcmVnaXN0ZXIoc2V0dGluZ3MuaG9tZVByb3ZpZGVyLmlkKTtcblx0fVxuXHRjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gZGVyZWdpc3RlciBob21lIGFzIHRoZXJlIGlzIGFuIGluZGljYXRpb24gaXQgd2FzIG5ldmVyIHJlZ2lzdGVyZWRcIik7XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBBcHBJbnRlbnQgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5pbXBvcnQgeyBnZXRBcHAsIGdldEFwcHNCeUludGVudCwgZ2V0SW50ZW50LCBnZXRJbnRlbnRzQnlDb250ZXh0IH0gZnJvbSBcIi4vYXBwc1wiO1xuaW1wb3J0IHsgbGF1bmNoU25hcHNob3QsIGxhdW5jaFZpZXcgfSBmcm9tIFwiLi9sYXVuY2hcIjtcbmltcG9ydCB7IGdldFNldHRpbmdzIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuY29uc3QgTk9fQVBQU19GT1VORCA9IFwiTm9BcHBzRm91bmRcIjtcbmNvbnN0IFJFU09MVkVSX1RJTUVPVVQgPSBcIlJlc29sdmVyVGltZW91dFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJvcE92ZXJyaWRlKFxuXHRJbnRlcm9wQnJva2VyOiBPcGVuRmluLkNvbnN0cnVjdG9yPE9wZW5GaW4uSW50ZXJvcEJyb2tlcj4sXG5cdHByb3ZpZGVyPzogT3BlbkZpbi5DaGFubmVsUHJvdmlkZXIsXG5cdG9wdGlvbnM/OiBPcGVuRmluLkludGVyb3BCcm9rZXJPcHRpb25zLFxuXHQuLi5hcmdzOiB1bmtub3duW11cbik6IE9wZW5GaW4uSW50ZXJvcEJyb2tlciB7XG5cdGNsYXNzIEludGVyb3BPdmVycmlkZSBleHRlbmRzIEludGVyb3BCcm9rZXIge1xuXHRcdHB1YmxpYyBhc3luYyBsYXVuY2hBcHBXaXRoSW50ZW50KGFwcDogQXBwLCBpbnRlbnQ6IE9wZW5GaW4uSW50ZW50KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkxhdW5jaGluZyBhcHAgd2l0aCBpbnRlbnQuXCIpO1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGFwcC5tYW5pZmVzdFR5cGUgIT09IFwidmlld1wiICYmXG5cdFx0XHRcdGFwcC5tYW5pZmVzdFR5cGUgIT09IFwiaW5saW5lLXZpZXdcIiAmJlxuXHRcdFx0XHRhcHAubWFuaWZlc3RUeXBlICE9PSBcInNuYXBzaG90XCJcblx0XHRcdCkge1xuXHRcdFx0XHQvLyBvcHRpb25hbCBsb2dpYyBzaG93IGEgcHJvbXB0IHRvIHRoZSB1c2VyIHRvIGxldCB0aGVtIGtub3dcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiVW5hYmxlIHRvIHJhaXNlIGludGVudCBhZ2FpbnN0IGFwcCBhcyBvbmx5IHZpZXcvc25hcHNob3QgYmFzZWQgYXBwcyBhcmUgc3VwcG9ydGVkLlwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhcHAubWFuaWZlc3RUeXBlID09PSBcInZpZXdcIiB8fCBhcHAubWFuaWZlc3RUeXBlID09PSBcImlubGluZS12aWV3XCIpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYFRoZSBzdXBwb3J0aW5nIGFwcCBpcyBhIHZpZXcgKCR7YXBwLm1hbmlmZXN0VHlwZX0pYCk7XG5cblx0XHRcdFx0Y29uc3QgaWRlbnRpdHkgPSBhd2FpdCBsYXVuY2hWaWV3KGFwcCk7XG5cdFx0XHRcdGlmIChpZGVudGl0eSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdC8vIG9wdGlvbmFsIGxvZ2ljIHNob3cgYSBwcm9tcHQgdG8gdGhlIHVzZXIgdG8gbGV0IHRoZW0ga25vd1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIlVuYWJsZSB0byByYWlzZSBpbnRlbnQgYWdhaW5zdCB2aWV3IGFzIG5vIGlkZW50aXR5IHdhcyByZXR1cm5lZC5cIik7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgc3VwZXIuc2V0SW50ZW50VGFyZ2V0KGludGVudCwgaWRlbnRpdHkpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYXBwLm1hbmlmZXN0VHlwZSA9PT0gXCJzbmFwc2hvdFwiKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiVGhlIHN1cHBvcnRpbmcgYXBwIGlzIGEgdmlldy5cIik7XG5cblx0XHRcdFx0Y29uc3QgaWRlbnRpdGllcyA9IGF3YWl0IGxhdW5jaFNuYXBzaG90KGFwcCk7XG5cdFx0XHRcdGlmIChpZGVudGl0aWVzID09PSBudWxsKSB7XG5cdFx0XHRcdFx0Ly8gb3B0aW9uYWwgbG9naWMgc2hvdyBhIHByb21wdCB0byB0aGUgdXNlciB0byBsZXQgdGhlbSBrbm93XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiVW5hYmxlIHRvIHJhaXNlIGludGVudCBhZ2FpbnN0IHRhcmdldCBhcyBubyBpZGVudGl0eSB3YXMgcmV0dXJuZWQuXCIpO1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaWRlbnRpdGllcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGF3YWl0IHN1cGVyLnNldEludGVudFRhcmdldChpbnRlbnQsIGlkZW50aXRpZXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHNvdXJjZTogYXBwLmFwcElkLFxuXHRcdFx0XHR2ZXJzaW9uOiBhcHAudmVyc2lvblxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRwdWJsaWMgYXN5bmMgZ2V0VGFyZ2V0SWRlbnRpdHkoYXBwSWQpIHtcblx0XHRcdGlmIChhcHBJZCA9PT0gdW5kZWZpbmVkIHx8IGFwcElkID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHBhc3NlZElkZW50aXR5ID0gYXBwSWQuc3BsaXQoXCJAXCIpO1xuXHRcdFx0Y29uc3QgbmFtZSA9IHBhc3NlZElkZW50aXR5WzBdO1xuXHRcdFx0bGV0IHV1aWQgPSBmaW4ubWUuaWRlbnRpdHkudXVpZDtcblx0XHRcdGlmIChwYXNzZWRJZGVudGl0eS5sZW5ndGggPT09IDIpIHtcblx0XHRcdFx0dXVpZCA9IHBhc3NlZElkZW50aXR5WzFdO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmVzb2x2ZWRJZGVudGl0eSA9IHsgdXVpZCwgbmFtZSB9O1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB0YXJnZXRWaWV3ID0gYXdhaXQgZmluLlZpZXcud3JhcCh7IHV1aWQsIG5hbWUgfSk7XG5cdFx0XHRcdGF3YWl0IHRhcmdldFZpZXcuZ2V0SW5mbygpO1xuXHRcdFx0XHQvLyBwYXNzZWQgaWRlbnRpdHkgZm91bmRcblx0XHRcdFx0cmV0dXJuIHJlc29sdmVkSWRlbnRpdHk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Ly8gcGFzc2VkIGlkZW50aXR5IGRvZXMgbm90IGV4aXN0XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHVibGljIGFzeW5jIGxhdW5jaEFwcFBpY2tlcihsYXVuY2hPcHRpb25zOiB7XG5cdFx0XHRhcHBzPzogQXBwW107XG5cdFx0XHRpbnRlbnQ/OiBQYXJ0aWFsPEFwcEludGVudD47XG5cdFx0XHRpbnRlbnRzPzogeyBpbnRlbnQ6IFBhcnRpYWw8QXBwSW50ZW50PjsgYXBwczogQXBwW10gfVtdO1xuXHRcdH0pOiBQcm9taXNlPHtcblx0XHRcdGFwcElkOiBzdHJpbmc7XG5cdFx0XHRpbnRlbnQ6IFBhcnRpYWw8QXBwSW50ZW50Pjtcblx0XHR9PiB7XG5cdFx0XHQvLyBzaG93IG1lbnVcblx0XHRcdC8vIGxhdW5jaCBhIG5ldyB3aW5kb3cgYW5kIG9wdGlvbmFsbHkgcGFzcyB0aGUgYXZhaWxhYmxlIGludGVudHMgYXMgY3VzdG9tRGF0YS5hcHBzIGFzIHBhcnQgb2YgdGhlIHdpbmRvdyBvcHRpb25zXG5cdFx0XHQvLyB0aGUgd2luZG93IGNhbiB0aGVuIHVzZSByYWlzZUludGVudCBhZ2FpbnN0IGEgc3BlY2lmaWMgYXBwICh0aGUgc2VsZWN0ZWQgb25lKS4gVGhpcyBpcyBhIHZlcnkgYmFzaWMgZXhhbXBsZS5cblx0XHRcdGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcblxuXHRcdFx0Y29uc3QgaGVpZ2h0ID0gc2V0dGluZ3M/LnBsYXRmb3JtUHJvdmlkZXI/LmludGVudFBpY2tlcj8uaGVpZ2h0IHx8IDQwMDtcblx0XHRcdGNvbnN0IHdpZHRoID0gc2V0dGluZ3M/LnBsYXRmb3JtUHJvdmlkZXI/LmludGVudFBpY2tlcj8ud2lkdGggfHwgNDAwO1xuXHRcdFx0Ly8gdGhpcyBsb2dpYyBydW5zIGluIHRoZSBwcm92aWRlciBzbyB3ZSBhcmUgdXNpbmcgaXQgYXMgYSB3YXkgb2YgZGV0ZXJtaW5pbmcgdGhlIHJvb3QgKHNvIGl0IHdvcmtzIHdpdGggcm9vdCBob3N0aW5nIGFuZCBzdWJkaXJlY3RvcnkgYmFzZWQgaG9zdGluZyBpZiBhIHVybCBpcyBub3QgcHJvdmlkZWQpXG5cdFx0XHRjb25zdCB1cmwgPVxuXHRcdFx0XHRzZXR0aW5ncz8ucGxhdGZvcm1Qcm92aWRlcj8uaW50ZW50UGlja2VyLnVybCB8fFxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKFwicGxhdGZvcm0vcHJvdmlkZXIuaHRtbFwiLCBcImNvbW1vbi93aW5kb3dzL2ludGVudHMvcGlja2VyLmh0bWxcIik7XG5cblx0XHRcdGNvbnN0IHdpbk9wdGlvbiA9IHtcblx0XHRcdFx0bmFtZTogXCJpbnRlbnQtcGlja2VyXCIsXG5cdFx0XHRcdGluY2x1ZGVJblNuYXBzaG90OiBmYWxzZSxcblx0XHRcdFx0ZmRjM0ludGVyb3BBcGk6IFwiMS4yXCIsXG5cdFx0XHRcdGRlZmF1bHRXaWR0aDogd2lkdGgsXG5cdFx0XHRcdGRlZmF1bHRIZWlnaHQ6IGhlaWdodCxcblx0XHRcdFx0c2hvd1Rhc2tiYXJJY29uOiBmYWxzZSxcblx0XHRcdFx0c2F2ZVdpbmRvd1N0YXRlOiBmYWxzZSxcblx0XHRcdFx0ZGVmYXVsdENlbnRlcmVkOiB0cnVlLFxuXHRcdFx0XHRjdXN0b21EYXRhOiB7XG5cdFx0XHRcdFx0YXBwczogbGF1bmNoT3B0aW9ucy5hcHBzLFxuXHRcdFx0XHRcdGludGVudDogbGF1bmNoT3B0aW9ucy5pbnRlbnQsXG5cdFx0XHRcdFx0aW50ZW50czogbGF1bmNoT3B0aW9ucy5pbnRlbnRzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVybCxcblx0XHRcdFx0ZnJhbWU6IGZhbHNlLFxuXHRcdFx0XHRhdXRvU2hvdzogdHJ1ZSxcblx0XHRcdFx0YWx3YXlzT25Ub3A6IHRydWVcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHdpbiA9IGF3YWl0IGZpbi5XaW5kb3cuY3JlYXRlKHdpbk9wdGlvbik7XG5cdFx0XHRjb25zdCB3ZWJXaW5kb3cgPSB3aW4uZ2V0V2ViV2luZG93KCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2RvdC1ub3RhdGlvblxuXHRcdFx0XHRjb25zdCBzZWxlY3RlZEFwcElkID0gYXdhaXQgd2ViV2luZG93W1wiZ2V0SW50ZW50U2VsZWN0aW9uXCJdKCk7XG5cdFx0XHRcdHJldHVybiBzZWxlY3RlZEFwcElkIGFzIHtcblx0XHRcdFx0XHRhcHBJZDogc3RyaW5nO1xuXHRcdFx0XHRcdGludGVudDogQXBwSW50ZW50O1xuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJBcHAgZm9yIGludGVudCBub3Qgc2VsZWN0ZWQvbGF1bmNoZWQuXCIsIGxhdW5jaE9wdGlvbnMuaW50ZW50KTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cHVibGljIGFzeW5jIGlzQ29ubmVjdGlvbkF1dGhvcml6ZWQoaWQ6IE9wZW5GaW4uSWRlbnRpdHksIHBheWxvYWQ/OiB1bmtub3duKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkludGVyb3AgY29ubmVjdGlvbiBiZWluZyBtYWRlIGJ5IHRoZSBmb2xsb3dpbmcgaWRlbnRpdHkgd2l0aCBwYXlsb2FkOlwiLCBpZCwgcGF5bG9hZCk7XG5cdFx0XHQvLyBwZXJmb3JtIGNvbm5lY3Rpb24gdmFsaWRhdGlvbiBjaGVja3MgaGVyZSBpZiByZXF1aXJlZCBhbmQgcmV0dXJuIGZhbHNlIGlmIGl0IHNob3VsZG4ndCBiZSBwZXJtaXNzaW9uZWQuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRwdWJsaWMgYXN5bmMgaXNBY3Rpb25BdXRob3JpemVkKFxuXHRcdFx0YWN0aW9uOiBzdHJpbmcsXG5cdFx0XHRwYXlsb2FkOiB1bmtub3duLFxuXHRcdFx0aWRlbnRpdHk6IE9wZW5GaW4uQ2xpZW50SWRlbnRpdHlcblx0XHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRcdGNvbnNvbGUubG9nKFwiSW50ZXJvcCBCcm9rZXIgaXMgYWN0aW9uIGF1dGhvcml6ZWQ6XCIsIGFjdGlvbiwgcGF5bG9hZCwgaWRlbnRpdHkpO1xuXHRcdFx0Ly8gcGVyZm9ybSBjaGVjayBoZXJlIGlmIHlvdSB3aXNoIGFuZCByZXR1cm4gdHJ1ZS9mYWxzZSBhY2NvcmRpbmdseVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cHVibGljIGFzeW5jIGhhbmRsZUluZm9Gb3JJbnRlbnRzQnlDb250ZXh0KGNvbnRleHQ6IHsgdHlwZTogc3RyaW5nIH0sIGNsaWVudElkZW50aXR5KSB7XG5cdFx0XHRjb25zdCBpbnRlbnRzID0gYXdhaXQgZ2V0SW50ZW50c0J5Q29udGV4dChjb250ZXh0LnR5cGUpO1xuXG5cdFx0XHRpZiAoaW50ZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBtYXBwZWRJbnRlbnRzID0gaW50ZW50cy5tYXAoKGVudHJ5KSA9PiAoe1xuXHRcdFx0XHRpbnRlbnQ6IGVudHJ5LmludGVudCxcblx0XHRcdFx0YXBwczogZW50cnkuYXBwcy5tYXAoKGFwcCkgPT4gKHtcblx0XHRcdFx0XHRuYW1lOiBhcHAuYXBwSWQsXG5cdFx0XHRcdFx0YXBwSWQ6IGFwcC5hcHBJZCxcblx0XHRcdFx0XHR0aXRsZTogYXBwLnRpdGxlXG5cdFx0XHRcdH0pKVxuXHRcdFx0fSkpO1xuXG5cdFx0XHRyZXR1cm4gbWFwcGVkSW50ZW50cztcblx0XHR9XG5cblx0XHRwdWJsaWMgYXN5bmMgaGFuZGxlSW5mb0ZvckludGVudChcblx0XHRcdGludGVudE9wdGlvbnM6IHsgbmFtZTogc3RyaW5nOyBjb250ZXh0PzogeyB0eXBlOiBzdHJpbmcgfSB9LFxuXHRcdFx0Y2xpZW50SWRlbnRpdHlcblx0XHQpIHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEludGVudChpbnRlbnRPcHRpb25zLm5hbWUsIGludGVudE9wdGlvbnMuY29udGV4dD8udHlwZSk7XG5cdFx0XHRpZiAocmVzdWx0ID09PSBudWxsKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihOT19BUFBTX0ZPVU5EKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHJlc3BvbnNlID0ge1xuXHRcdFx0XHRpbnRlbnQ6IHJlc3VsdC5pbnRlbnQsXG5cdFx0XHRcdGFwcHM6IHJlc3VsdC5hcHBzLm1hcCgoYXBwKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgYXBwRW50cnkgPSB7XG5cdFx0XHRcdFx0XHRuYW1lOiBhcHAuYXBwSWQsXG5cdFx0XHRcdFx0XHRhcHBJZDogYXBwLmFwcElkLFxuXHRcdFx0XHRcdFx0dGl0bGU6IGFwcC50aXRsZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIGFwcEVudHJ5O1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHRcdH1cblxuXHRcdHB1YmxpYyBhc3luYyBoYW5kbGVGaXJlZEludGVudEZvckNvbnRleHQoXG5cdFx0XHRjb250ZXh0Rm9ySW50ZW50OiB7IHR5cGU6IHN0cmluZzsgbWV0YWRhdGE/OiB7IHRhcmdldD86IHN0cmluZyB9IH0sXG5cdFx0XHRjbGllbnRJZGVudGl0eVxuXHRcdCkge1xuXHRcdFx0Y29uc3QgYXZhaWxhYmxlSW50ZW50cyA9IGF3YWl0IGdldEludGVudHNCeUNvbnRleHQoY29udGV4dEZvckludGVudC50eXBlKTtcblx0XHRcdGlmIChhdmFpbGFibGVJbnRlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoTk9fQVBQU19GT1VORCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBpbnRlbnQgPSB7XG5cdFx0XHRcdGNvbnRleHQ6IGNvbnRleHRGb3JJbnRlbnQsXG5cdFx0XHRcdG5hbWU6IHVuZGVmaW5lZCxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IHVuZGVmaW5lZFxuXHRcdFx0fTtcblx0XHRcdGxldCB0YXJnZXRBcHA6IEFwcDtcblx0XHRcdGxldCB0YXJnZXRBcHBJbnRlbnQ7XG5cdFx0XHRsZXQgdGFyZ2V0QXBwSW50ZW50Q291bnQgPSAwO1xuXG5cdFx0XHRpZiAoY29udGV4dEZvckludGVudC5tZXRhZGF0YT8udGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dGFyZ2V0QXBwID0gYXdhaXQgZ2V0QXBwKGNvbnRleHRGb3JJbnRlbnQubWV0YWRhdGE/LnRhcmdldCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0YXJnZXRBcHAgIT09IHVuZGVmaW5lZCAmJiBBcnJheS5pc0FycmF5KHRhcmdldEFwcC5pbnRlbnRzKSkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldEFwcC5pbnRlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dGFyZ2V0QXBwSW50ZW50ID0gdGFyZ2V0QXBwLmludGVudHNbaV07XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0QXJyYXkuaXNBcnJheSh0YXJnZXRBcHBJbnRlbnQuY29udGV4dHMpICYmXG5cdFx0XHRcdFx0XHR0YXJnZXRBcHBJbnRlbnQuY29udGV4dHMuaW5jbHVkZXMoY29udGV4dEZvckludGVudC50eXBlKVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0QXBwSW50ZW50Q291bnQrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHRhcmdldEFwcCAhPT0gdW5kZWZpbmVkICYmIHRhcmdldEFwcEludGVudCAhPT0gdW5kZWZpbmVkICYmIHRhcmdldEFwcEludGVudENvdW50ID09PSAxKSB7XG5cdFx0XHRcdC8vIGEgcHJlZmVycmVkIG5hbWUgZm9yIGFuIGFwcCB3YXMgZ2l2ZW4gd2l0aCB0aGUgY29udGV4dCBvYmplY3Rcblx0XHRcdFx0Ly8gdGhlIGFwcCBleGlzdGVkIGFuZCBpdCBzdXBwb3J0ZWQgdGhlIGNvbnRleHQgdHlwZSBhbmQgdGhlcmUgd2FzIG9ubHkgb25lIGludGVudCB0aGF0IHN1cHBvcnRlZFxuXHRcdFx0XHQvLyB0aGF0IGNvbnRleHQgdHlwZS4gTGF1bmNoIHRoZSBhcHAgd2l0aCB0aGF0IGludGVudCBvdGhlcndpc2UgcHJlc2VudCB0aGUgdXNlciB3aXRoIGEgbGlzdCBvZlxuXHRcdFx0XHQvLyBldmVyeXRoaW5nIHRoYXQgc3VwcG9ydHMgdGhhdCBjb250ZXh0IHR5cGVcblx0XHRcdFx0aW50ZW50Lm5hbWUgPSB0YXJnZXRBcHBJbnRlbnQubmFtZTtcblx0XHRcdFx0aW50ZW50LmRpc3BsYXlOYW1lID0gdGFyZ2V0QXBwSW50ZW50Lm5hbWU7XG5cdFx0XHRcdGNvbnN0IGludGVudFJlc29sdmVyID0gYXdhaXQgdGhpcy5sYXVuY2hBcHBXaXRoSW50ZW50KHRhcmdldEFwcCwgaW50ZW50KTtcblx0XHRcdFx0aWYgKGludGVudFJlc29sdmVyID09PSBudWxsKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBpbnRlbnRSZXNvbHZlcjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGF2YWlsYWJsZUludGVudHMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdGludGVudC5uYW1lID0gYXZhaWxhYmxlSW50ZW50c1swXS5pbnRlbnQubmFtZTtcblx0XHRcdFx0aW50ZW50LmRpc3BsYXlOYW1lID0gYXZhaWxhYmxlSW50ZW50c1swXS5pbnRlbnQubmFtZTtcblx0XHRcdFx0aWYgKGF2YWlsYWJsZUludGVudHNbMF0uYXBwcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHRjb25zdCBpbnRlbnRSZXNvbHZlciA9IGF3YWl0IHRoaXMubGF1bmNoQXBwV2l0aEludGVudChhdmFpbGFibGVJbnRlbnRzWzBdLmFwcHNbMF0sIGludGVudCk7XG5cdFx0XHRcdFx0aWYgKGludGVudFJlc29sdmVyID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoTk9fQVBQU19GT1VORCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBpbnRlbnRSZXNvbHZlcjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoYXZhaWxhYmxlSW50ZW50c1swXS5hcHBzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc3QgdXNlclNlbGVjdGlvbiA9IGF3YWl0IHRoaXMubGF1bmNoQXBwUGlja2VyKHtcblx0XHRcdFx0XHRcdFx0YXBwczogYXZhaWxhYmxlSW50ZW50c1swXS5hcHBzLFxuXHRcdFx0XHRcdFx0XHRpbnRlbnRcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZEFwcCA9IGF2YWlsYWJsZUludGVudHNbMF0uYXBwcy5maW5kKFxuXHRcdFx0XHRcdFx0XHQoZW50cnkpID0+IGVudHJ5LmFwcElkID09PSB1c2VyU2VsZWN0aW9uLmFwcElkICYmIGVudHJ5LmFwcElkICE9PSB1bmRlZmluZWRcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRBcHAgIT09IG51bGwgJiYgc2VsZWN0ZWRBcHAgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpbnRlbnRSZXNvbHZlciA9IGF3YWl0IHRoaXMubGF1bmNoQXBwV2l0aEludGVudChzZWxlY3RlZEFwcCwgaW50ZW50KTtcblx0XHRcdFx0XHRcdFx0aWYgKGludGVudFJlc29sdmVyID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiBpbnRlbnRSZXNvbHZlcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJXZSB3ZXJlIHJldHVybmVkIGEgbm9uIGV4aXN0ZW50IGFwcElkIHRvIGxhdW5jaCB3aXRoIHRoZSBpbnRlbnQuXCIpO1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkFwcCBmb3IgaW50ZW50IGJ5IGNvbnRleHQgbm90IHNlbGVjdGVkL2xhdW5jaGVkLlwiLCBpbnRlbnQpO1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFJFU09MVkVSX1RJTUVPVVQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCB1c2VyU2VsZWN0aW9uID0gYXdhaXQgdGhpcy5sYXVuY2hBcHBQaWNrZXIoe1xuXHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0aW50ZW50czogYXZhaWxhYmxlSW50ZW50c1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRJbnRlbnQgPSBhdmFpbGFibGVJbnRlbnRzLmZpbmQoXG5cdFx0XHRcdFx0XHQoZW50cnkpID0+IGVudHJ5LmludGVudC5uYW1lID09PSB1c2VyU2VsZWN0aW9uLmludGVudC5uYW1lXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdGlmIChzZWxlY3RlZEludGVudCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIlRoZSB1c2VyIHNlbGVjdGVkIGFuIGludGVudCBidXQgaXQncyBuYW1lIGRvZXNuJ3QgbWF0Y2ggdGhlIGF2YWlsYWJsZSBpbnRlbnRzLlwiLFxuXHRcdFx0XHRcdFx0XHR1c2VyU2VsZWN0aW9uXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZEFwcCA9IHNlbGVjdGVkSW50ZW50LmFwcHMuZmluZChcblx0XHRcdFx0XHRcdChlbnRyeSkgPT4gZW50cnkuYXBwSWQgPT09IHVzZXJTZWxlY3Rpb24uYXBwSWQgJiYgZW50cnkuYXBwSWQgIT09IHVuZGVmaW5lZFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkQXBwICE9PSBudWxsICYmIHNlbGVjdGVkQXBwICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGludGVudC5kaXNwbGF5TmFtZSA9IHVzZXJTZWxlY3Rpb24uaW50ZW50LmRpc3BsYXlOYW1lO1xuXHRcdFx0XHRcdFx0aW50ZW50Lm5hbWUgPSB1c2VyU2VsZWN0aW9uLmludGVudC5uYW1lO1xuXHRcdFx0XHRcdFx0Y29uc3QgaW50ZW50UmVzb2x2ZXIgPSBhd2FpdCB0aGlzLmxhdW5jaEFwcFdpdGhJbnRlbnQoc2VsZWN0ZWRBcHAsIGludGVudCk7XG5cdFx0XHRcdFx0XHRpZiAoaW50ZW50UmVzb2x2ZXIgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKE5PX0FQUFNfRk9VTkQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIGludGVudFJlc29sdmVyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiV2Ugd2VyZSByZXR1cm5lZCBhIG5vbiBleGlzdGVudCBhcHBJZCB0byBsYXVuY2ggd2l0aCB0aGUgaW50ZW50LlwiKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoTk9fQVBQU19GT1VORCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJBcHAgZm9yIGludGVudCBieSBjb250ZXh0IG5vdCBzZWxlY3RlZC9sYXVuY2hlZC5cIiwgaW50ZW50KTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoUkVTT0xWRVJfVElNRU9VVCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRwdWJsaWMgYXN5bmMgaGFuZGxlRmlyZWRJbnRlbnQoaW50ZW50OiBPcGVuRmluLkludGVudCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJSZWNlaXZlZCByZXF1ZXN0IGZvciBhIHJhaXNlZCBpbnRlbnQ6XCIsIGludGVudCk7XG5cdFx0XHRsZXQgaW50ZW50QXBwcyA9IGF3YWl0IGdldEFwcHNCeUludGVudChpbnRlbnQubmFtZSk7XG5cdFx0XHRsZXQgdGFyZ2V0QXBwOiBBcHA7XG5cblx0XHRcdGlmIChpbnRlbnQubWV0YWRhdGE/LnRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHRhcmdldEFwcCA9IGF3YWl0IGdldEFwcChpbnRlbnQubWV0YWRhdGEudGFyZ2V0IGFzIHN0cmluZyk7XG5cdFx0XHRcdGlmICh0YXJnZXRBcHAgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdC8vIGNoZWNrIHRvIHNlZSBpZiB5b3UgaGF2ZSBiZWVuIHBhc3NlZCBhIHNwZWNpZmljIGlkZW50aXR5IGZvciBhIHZpZXcgdGhhdCBzaG91bGQgYmUgdGFyZ2V0dGVkIGluc3RlYWQgb2YgYW4gYXBwXG5cdFx0XHRcdFx0Y29uc3QgdGFyZ2V0SWRlbnRpdHkgPSBhd2FpdCB0aGlzLmdldFRhcmdldElkZW50aXR5KGludGVudC5tZXRhZGF0YT8udGFyZ2V0KTtcblx0XHRcdFx0XHRpZiAodGFyZ2V0SWRlbnRpdHkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdFx0XHRcdFwiV2Ugd2VyZSBwYXNzZWQgYSB2aWV3IGlkZW50aXR5IGluc3RlYWQgb2YgYW4gYXBwIGVudHJ5IHdoZW4gcmFpc2luZy9maXJpbmcgYW4gaW50ZW50LiBXZSB3aWxsIGZpcmUgdGhlIGludGVudCBhdCB0aGF0IGFzIGl0IGV4aXN0cyBhbmQgbm8gYXBwIGVudHJ5IGV4aXN0cyB3aXRoIHRoYXQgbmFtZS46XCIsXG5cdFx0XHRcdFx0XHRcdHRhcmdldElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRpbnRlbnRcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRhd2FpdCBzdXBlci5zZXRJbnRlbnRUYXJnZXQoaW50ZW50LCB0YXJnZXRJZGVudGl0eSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzb3VyY2U6IHRhcmdldElkZW50aXR5Lm5hbWVcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbnRlbnRBcHBzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vIGFwcHMgc3VwcG9ydCB0aGlzIGludGVudC5cIik7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihOT19BUFBTX0ZPVU5EKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRhcmdldEFwcCAhPT0gdW5kZWZpbmVkICYmIGludGVudEFwcHMuaW5jbHVkZXModGFyZ2V0QXBwKSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkFzc2lnbmluZyBzZWxlY3RlZCBhcHBsaWNhdGlvbiB3aXRoIGludGVudC5cIiwgaW50ZW50KTtcblx0XHRcdFx0aW50ZW50QXBwcyA9IFt0YXJnZXRBcHBdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaW50ZW50QXBwcy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0Ly8gaGFuZGxlIHNpbmdsZSBlbnRyeVxuXHRcdFx0XHRjb25zdCBpbnRlbnRSZXNvbHZlciA9IGF3YWl0IHRoaXMubGF1bmNoQXBwV2l0aEludGVudChpbnRlbnRBcHBzWzBdLCBpbnRlbnQpO1xuXHRcdFx0XHRpZiAoaW50ZW50UmVzb2x2ZXIgPT09IG51bGwpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoTk9fQVBQU19GT1VORCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGludGVudFJlc29sdmVyO1xuXHRcdFx0fVxuXHRcdFx0Ly8gc2hvdyBtZW51XG5cdFx0XHQvLyBsYXVuY2ggYSBuZXcgd2luZG93IGFuZCBvcHRpb25hbGx5IHBhc3MgdGhlIGF2YWlsYWJsZSBpbnRlbnRzIGFzIGN1c3RvbURhdGEuYXBwcyBhcyBwYXJ0IG9mIHRoZSB3aW5kb3cgb3B0aW9uc1xuXHRcdFx0Ly8gdGhlIHdpbmRvdyBjYW4gdGhlbiB1c2UgcmFpc2VJbnRlbnQgYWdhaW5zdCBhIHNwZWNpZmljIGFwcCAodGhlIHNlbGVjdGVkIG9uZSkuIFRoaXMgaXMgYSB2ZXJ5IGJhc2ljIGV4YW1wbGUuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1c2VyU2VsZWN0aW9uID0gYXdhaXQgdGhpcy5sYXVuY2hBcHBQaWNrZXIoe1xuXHRcdFx0XHRcdGFwcHM6IGludGVudEFwcHMsXG5cdFx0XHRcdFx0aW50ZW50XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoaW50ZW50QXBwcyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiV2Ugc2hvdWxkIGhhdmUgYSBsaXN0IG9mIGFwcHMgdG8gc2VhcmNoIGZyb20uXCIpO1xuXHRcdFx0XHRcdGludGVudEFwcHMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBzZWxlY3RlZEFwcCA9IGludGVudEFwcHMuZmluZChcblx0XHRcdFx0XHQoZW50cnkpID0+IGVudHJ5LmFwcElkID09PSB1c2VyU2VsZWN0aW9uLmFwcElkICYmIGVudHJ5LmFwcElkICE9PSB1bmRlZmluZWRcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKHNlbGVjdGVkQXBwICE9PSBudWxsICYmIHNlbGVjdGVkQXBwICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjb25zdCBpbnRlbnRSZXNvbHZlciA9IGF3YWl0IHRoaXMubGF1bmNoQXBwV2l0aEludGVudChzZWxlY3RlZEFwcCwgaW50ZW50KTtcblx0XHRcdFx0XHRpZiAoaW50ZW50UmVzb2x2ZXIgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihOT19BUFBTX0ZPVU5EKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGludGVudFJlc29sdmVyO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJXZSB3ZXJlIHJldHVybmVkIGEgbm9uIGV4aXN0ZW50IGFwcElkIHRvIGxhdW5jaCB3aXRoIHRoZSBpbnRlbnQuXCIpO1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoTk9fQVBQU19GT1VORCk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkFwcCBmb3IgaW50ZW50IG5vdCBzZWxlY3RlZC9sYXVuY2hlZC5cIiwgaW50ZW50KTtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFJFU09MVkVSX1RJTUVPVVQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXcgSW50ZXJvcE92ZXJyaWRlKHByb3ZpZGVyLCBvcHRpb25zLCAuLi5hcmdzKTtcbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCJAb3BlbmZpbi93b3Jrc3BhY2VcIjtcbmltcG9ydCB7IEJyb3dzZXJTbmFwc2hvdCwgZ2V0Q3VycmVudFN5bmMgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZXdJZGVudGl0aWVzKG5hbWU6IHN0cmluZywgdXVpZDogc3RyaW5nKSB7XG5cdGNvbnN0IGlkZW50aXR5ID0geyB1dWlkLCBuYW1lIH07XG5cdGNvbnN0IHdpbiA9IGZpbi5XaW5kb3cud3JhcFN5bmMoaWRlbnRpdHkpO1xuXHRjb25zdCB2aWV3cyA9IGF3YWl0IHdpbi5nZXRDdXJyZW50Vmlld3MoKTtcblx0Y29uc3Qgdmlld0lkZW50aXRpZXMgPSB2aWV3cy5tYXAoKHZpZXcpID0+IHZpZXcuaWRlbnRpdHkpO1xuXHRhd2FpdCB3aW4uc2V0QXNGb3JlZ3JvdW5kKCk7XG5cdHJldHVybiB2aWV3SWRlbnRpdGllcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gZG9lc1ZpZXdFeGlzdChuYW1lOiBzdHJpbmcsIHV1aWQ6IHN0cmluZykge1xuXHRjb25zdCB2aWV3ID0gZmluLlZpZXcud3JhcFN5bmMoeyBuYW1lLCB1dWlkIH0pO1xuXHRsZXQgZXhpc3RzID0gZmFsc2U7XG5cdHRyeSB7XG5cdFx0YXdhaXQgdmlldy5nZXRJbmZvKCk7XG5cdFx0Y29uc3Qgdmlld0hvc3QgPSBhd2FpdCB2aWV3LmdldEN1cnJlbnRXaW5kb3coKTtcblx0XHRhd2FpdCB2aWV3SG9zdC5icmluZ1RvRnJvbnQoKTtcblx0XHRleGlzdHMgPSB0cnVlO1xuXHR9IGNhdGNoIHtcblx0XHRleGlzdHMgPSBmYWxzZTtcblx0fVxuXHRyZXR1cm4gZXhpc3RzO1xufVxuXG5mdW5jdGlvbiBmaW5kVmlld05hbWVzKGxheW91dCkge1xuXHRjb25zdCBjb2xsZWN0ZWROYW1lczogc3RyaW5nW10gPSBbXTtcblxuXHRKU09OLnN0cmluZ2lmeShsYXlvdXQsIChfLCBuZXN0ZWRWYWx1ZSkgPT4ge1xuXHRcdC8vIGNoZWNrIHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgYSBuYW1lIGZpZWxkIGFuZCB0aGF0IHdlIGFsc28gaGF2ZSBhIHVybCBmaWVsZCBpbiB0aGlzIG9iamVjdCAoaW4gY2FzZSBuYW1lIHdhcyBhZGRlZCB0byBhIHJhbmRvbSBwYXJ0IG9mIHRoZSBsYXlvdXQpXG5cdFx0aWYgKG5lc3RlZFZhbHVlPy5uYW1lPy5sZW5ndGggJiYgbmVzdGVkVmFsdWUudXJsICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbGxlY3RlZE5hbWVzLnB1c2gobmVzdGVkVmFsdWUubmFtZSBhcyBzdHJpbmcpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmVzdGVkVmFsdWUgYXMgdW5rbm93bjtcblx0fSk7XG5cblx0cmV0dXJuIGNvbGxlY3RlZE5hbWVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGF1bmNoVmlldyh2aWV3QXBwOiBBcHApOiBQcm9taXNlPE9wZW5GaW4uSWRlbnRpdHk+IHtcblx0aWYgKHZpZXdBcHAgPT09IHVuZGVmaW5lZCB8fCB2aWV3QXBwID09PSBudWxsKSB7XG5cdFx0Y29uc29sZS53YXJuKFwiTm8gYXBwIHdhcyBwYXNzZWQgdG8gbGF1bmNoVmlld1wiKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGlmICh2aWV3QXBwLm1hbmlmZXN0VHlwZSAhPT0gXCJ2aWV3XCIgJiYgdmlld0FwcC5tYW5pZmVzdFR5cGUgIT09IFwiaW5saW5lLXZpZXdcIikge1xuXHRcdGNvbnNvbGUud2FybihcIlRoZSBhcHAgcGFzc2VkIHdhcyBub3Qgb2YgbWFuaWZlc3RUeXBlIHZpZXcgb3IgaW5saW5lLXZpZXcuXCIpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGxldCBtYW5pZmVzdDogT3BlbkZpbi5WaWV3T3B0aW9ucztcblxuXHRpZiAodmlld0FwcC5tYW5pZmVzdFR5cGUgPT09IFwidmlld1wiKSB7XG5cdFx0Y29uc3QgbWFuaWZlc3RSZXNwb25zZSA9IGF3YWl0IGZldGNoKHZpZXdBcHAubWFuaWZlc3QpO1xuXHRcdG1hbmlmZXN0ID0gYXdhaXQgbWFuaWZlc3RSZXNwb25zZS5qc29uKCk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gY29udmVyc2lvbiBiZWNhdXNlIG9mIG1hbmlmZXN0VHlwZS4gSW4gbW9zdCB1c2UgY2FzZXMgbWFuaWZlc3QgaXMgYWx3YXlzIGEgcGF0aCB0byBhbiBleGVjdXRhYmxlIG9yIHRvIGEgbWFuaWZlc3QgZmlsZS4gRm9yIHZpZXdzIHdlIGFyZSBkZW1vbnN0cmF0aW5nIGhvdyBpdCBjb3VsZCBiZSB1c2VkXG5cdFx0Ly8gZm9yIHBhc3NpbmcgdGhlIG1hbmlmZXN0IGlubGluZVxuXHRcdG1hbmlmZXN0ID0gdmlld0FwcC5tYW5pZmVzdCBhcyB1bmtub3duIGFzIE9wZW5GaW4uVmlld09wdGlvbnM7XG5cdH1cblxuXHRjb25zdCBuYW1lID0gbWFuaWZlc3QubmFtZTtcblx0bGV0IGlkZW50aXR5ID0geyB1dWlkOiBmaW4ubWUuaWRlbnRpdHkudXVpZCwgbmFtZSB9O1xuXHRjb25zdCB3YXNOYW1lU3BlY2lmaWVkID0gbmFtZSAhPT0gdW5kZWZpbmVkO1xuXHRsZXQgdmlld0V4aXN0cyA9IGZhbHNlO1xuXG5cdGlmICh3YXNOYW1lU3BlY2lmaWVkKSB7XG5cdFx0dmlld0V4aXN0cyA9IGF3YWl0IGRvZXNWaWV3RXhpc3QoaWRlbnRpdHkubmFtZSwgaWRlbnRpdHkudXVpZCk7XG5cdH1cblxuXHRpZiAoIXZpZXdFeGlzdHMpIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRcdFx0Y29uc3QgY3JlYXRlZFZpZXcgPSBhd2FpdCBwbGF0Zm9ybS5jcmVhdGVWaWV3KG1hbmlmZXN0KTtcblx0XHRcdGlkZW50aXR5ID0gY3JlYXRlZFZpZXcuaWRlbnRpdHk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbGF1bmNoaW5nIHZpZXdcIiwgZXJyKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gaWRlbnRpdHk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsYXVuY2hTbmFwc2hvdChzbmFwc2hvdEFwcDogQXBwKTogUHJvbWlzZTxPcGVuRmluLklkZW50aXR5W10+IHtcblx0aWYgKHNuYXBzaG90QXBwID09PSB1bmRlZmluZWQgfHwgc25hcHNob3RBcHAgPT09IG51bGwpIHtcblx0XHRjb25zb2xlLndhcm4oXCJObyBhcHAgd2FzIHBhc3NlZCB0byBsYXVuY2hTbmFwc2hvdFwiKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGlmIChzbmFwc2hvdEFwcC5tYW5pZmVzdFR5cGUgIT09IFwic25hcHNob3RcIikge1xuXHRcdGNvbnNvbGUud2FybihcIlRoZSBhcHAgcGFzc2VkIHdhcyBub3Qgb2YgbWFuaWZlc3RUeXBlIHNuYXBzaG90LlwiKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGNvbnN0IG1hbmlmZXN0UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzbmFwc2hvdEFwcC5tYW5pZmVzdCk7XG5cdGNvbnN0IG1hbmlmZXN0OiBCcm93c2VyU25hcHNob3QgPSBhd2FpdCBtYW5pZmVzdFJlc3BvbnNlLmpzb24oKTtcblxuXHRjb25zdCB3aW5kb3dzID0gbWFuaWZlc3Qud2luZG93cztcblx0Y29uc3Qgd2luZG93c1RvQ3JlYXRlID0gW107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkod2luZG93cykpIHtcblx0XHRjb25zdCB3aW5kb3dzVG9HYXRoZXI6IHN0cmluZ1tdID0gW107XG5cdFx0Y29uc3Qgdmlld0lkczogT3BlbkZpbi5JZGVudGl0eVtdID0gW107XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvd3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGdldFZpZXdJZHNGb3JMYXlvdXQgPSBmaW5kVmlld05hbWVzKHdpbmRvd3NbaV0ubGF5b3V0KTtcblx0XHRcdGlmIChnZXRWaWV3SWRzRm9yTGF5b3V0Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb25zdCB1dWlkID0gd2luZG93LmNyeXB0by5yYW5kb21VVUlEKCk7XG5cdFx0XHRcdGNvbnN0IG5hbWUgPSBgaW50ZXJuYWwtZ2VuZXJhdGVkLXdpbmRvdy0ke3V1aWR9YDtcblx0XHRcdFx0d2luZG93c1tpXS5uYW1lID0gbmFtZTtcblx0XHRcdFx0d2luZG93c1RvQ3JlYXRlLnB1c2god2luZG93c1tpXSk7XG5cdFx0XHRcdHdpbmRvd3NUb0dhdGhlci5wdXNoKG5hbWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gd2UgaGF2ZSB2aWV3cy4gR3JhYiB0aGUgZmlyc3Qgb25lIHRvIHZhbGlkYXRlIGV4aXN0ZW5jZS5cblx0XHRcdFx0Y29uc3Qgdmlld0lkID0gZ2V0Vmlld0lkc0ZvckxheW91dFswXTtcblxuXHRcdFx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIGdldFZpZXdJZHNGb3JMYXlvdXQpIHtcblx0XHRcdFx0XHR2aWV3SWRzLnB1c2goeyBuYW1lOiBlbnRyeSwgdXVpZDogZmluLm1lLmlkZW50aXR5LnV1aWQgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyB0aGVzZSB2aWV3cyBzaG91bGQgYmUgcmVhZG9ubHkgYW5kIGNhbm5vdCBiZSBwdWxsZWQgb3V0IG9mIHRoZSBwYWdlIG9yIGNsb3NlZFxuXHRcdFx0XHRpZiAoIShhd2FpdCBkb2VzVmlld0V4aXN0KHZpZXdJZCwgZmluLm1lLmlkZW50aXR5LnV1aWQpKSkge1xuXHRcdFx0XHRcdHdpbmRvd3NUb0NyZWF0ZS5wdXNoKHdpbmRvd3NbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bWFuaWZlc3Qud2luZG93cyA9IHdpbmRvd3NUb0NyZWF0ZTtcblxuXHRcdGlmICh3aW5kb3dzVG9DcmVhdGUubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgcGxhdGZvcm0gPSBnZXRDdXJyZW50U3luYygpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgcGxhdGZvcm0uYXBwbHlTbmFwc2hvdChtYW5pZmVzdCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHRyeWluZyB0byBhcHBseSBzbmFwc2hvdCB0byBwbGF0Zm9ybS5cIiwgZXJyLCBtYW5pZmVzdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQgdyA9IDA7IHcgPCB3aW5kb3dzVG9HYXRoZXIubGVuZ3RoOyB3KyspIHtcblx0XHRcdGNvbnN0IHdpbmRvd1ZpZXdJZHMgPSBhd2FpdCBnZXRWaWV3SWRlbnRpdGllcyh3aW5kb3dzVG9HYXRoZXJbd10sIGZpbi5tZS5pZGVudGl0eS51dWlkKTtcblx0XHRcdHZpZXdJZHMucHVzaCguLi53aW5kb3dWaWV3SWRzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlld0lkcztcblx0fVxuXG5cdHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGF1bmNoKGFwcEVudHJ5OiBBcHApIHtcblx0Y29uc29sZS5sb2coXCJBcHBsaWNhdGlvbiBsYXVuY2ggcmVxdWVzdGVkOlwiLCBhcHBFbnRyeSk7XG5cdGlmIChhcHBFbnRyeS5tYW5pZmVzdFR5cGUgPT09IFwiZXh0ZXJuYWxcIikge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcblx0XHRjb25zdCBhcHBBc3NldFRhZyA9IHNldHRpbmdzPy5hcHBQcm92aWRlcj8uYXBwQXNzZXRUYWcgPz8gXCJhcHBhc3NldFwiO1xuXG5cdFx0aWYgKGFwcEVudHJ5LnRhZ3M/LmluY2x1ZGVzKGFwcEFzc2V0VGFnKSkge1xuXHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdFwiQXBwbGljYXRpb24gcmVxdWVzdGVkIGlzIGEgbmF0aXZlIGFwcCB3aXRoIGEgdGFnIG9mIGFwcGFzc2V0IHNvIGl0IGlzIHByb3ZpZGVkIGJ5IHRoaXMgd29ya3NwYWNlIHBsYXRmb3JtLiBNYW5hZ2luZyByZXF1ZXN0IHZpYSBwbGF0Zm9ybSBhbmQgbm90IFdvcmtzcGFjZS5cIlxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IG9wdGlvbnM6IE9wZW5GaW4uRXh0ZXJuYWxQcm9jZXNzUmVxdWVzdFR5cGUgPSB7fTtcblx0XHRcdG9wdGlvbnMuYWxpYXMgPSBhcHBFbnRyeS5tYW5pZmVzdDtcblx0XHRcdG9wdGlvbnMudXVpZCA9IGFwcEVudHJ5LmFwcElkO1xuXG5cdFx0XHRhd2FpdCBmaW4uU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2VzcyhvcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJBcHBsaWNhdGlvbiByZXF1ZXN0ZWQgaXMgYSBuYXRpdmUgYXBwLiBNYW5hZ2luZyByZXF1ZXN0IHZpYSBwbGF0Zm9ybSBhbmQgbm90IFdvcmtzcGFjZS5cIik7XG5cdFx0XHRjb25zdCBvcHRpb25zOiBPcGVuRmluLkV4dGVybmFsUHJvY2Vzc1JlcXVlc3RUeXBlID0ge307XG5cdFx0XHRvcHRpb25zLnBhdGggPSBhcHBFbnRyeS5tYW5pZmVzdDtcblx0XHRcdG9wdGlvbnMudXVpZCA9IGFwcEVudHJ5LmFwcElkO1xuXG5cdFx0XHRhd2FpdCBmaW4uU3lzdGVtLmxhdW5jaEV4dGVybmFsUHJvY2VzcyhvcHRpb25zKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoYXBwRW50cnkubWFuaWZlc3RUeXBlID09PSBcImlubGluZS12aWV3XCIpIHtcblx0XHRhd2FpdCBsYXVuY2hWaWV3KGFwcEVudHJ5KTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBwbGF0Zm9ybSA9IGdldEN1cnJlbnRTeW5jKCk7XG5cdFx0YXdhaXQgcGxhdGZvcm0ubGF1bmNoQXBwKHsgYXBwOiBhcHBFbnRyeSB9KTtcblx0fVxuXHRjb25zb2xlLmxvZyhcIkZpbmlzaGVkIGFwcGxpY2F0aW9uIGxhdW5jaCByZXF1ZXN0XCIpO1xufVxuIiwiaW1wb3J0IHsgQnJvd3NlckluaXRDb25maWcsIGluaXQgYXMgd29ya3NwYWNlUGxhdGZvcm1Jbml0IH0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybVwiO1xuaW1wb3J0IHsgaW50ZXJvcE92ZXJyaWRlIH0gZnJvbSBcIi4vaW50ZXJvcGJyb2tlclwiO1xuaW1wb3J0IHsgZ2V0U2V0dGluZ3MsIHZhbGlkYXRlVGhlbWVzIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XG5cdGNvbnNvbGUubG9nKFwiSW5pdGlhbGlzaW5nIHBsYXRmb3JtXCIpO1xuXHRjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFNldHRpbmdzKCk7XG5cdGNvbnN0IGJyb3dzZXI6IEJyb3dzZXJJbml0Q29uZmlnID0ge307XG5cblx0aWYgKHNldHRpbmdzLmJyb3dzZXJQcm92aWRlciAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0YnJvd3Nlci5kZWZhdWx0V2luZG93T3B0aW9ucyA9IHtcblx0XHRcdGljb246IHNldHRpbmdzLmJyb3dzZXJQcm92aWRlci53aW5kb3dPcHRpb25zPy5pY29uLFxuXHRcdFx0d29ya3NwYWNlUGxhdGZvcm06IHtcblx0XHRcdFx0cGFnZXM6IG51bGwsXG5cdFx0XHRcdHRpdGxlOiBzZXR0aW5ncy5icm93c2VyUHJvdmlkZXIud2luZG93T3B0aW9ucz8udGl0bGUsXG5cdFx0XHRcdGZhdmljb246IHNldHRpbmdzLmJyb3dzZXJQcm92aWRlci53aW5kb3dPcHRpb25zPy5pY29uLFxuXHRcdFx0XHRuZXdUYWJVcmw6IHNldHRpbmdzLmJyb3dzZXJQcm92aWRlci53aW5kb3dPcHRpb25zPy5uZXdUYWJVcmwsXG5cdFx0XHRcdG5ld1BhZ2VVcmw6IHNldHRpbmdzLmJyb3dzZXJQcm92aWRlci53aW5kb3dPcHRpb25zPy5uZXdQYWdlVXJsXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIEZpeCB0aGlzIHR5cGUgb3ZlcmxvYWQgd2hlbiBvcGVuZmluLWFkYXB0ZXIgcmVmZXJlbmNlcyBhcmUgcmVtb3ZlZCBmcm9tIFdTXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblx0XHRicm93c2VyLmludGVyb3BPdmVycmlkZSA9IGludGVyb3BPdmVycmlkZSBhcyBhbnk7XG5cdH1cblxuXHRjb25zb2xlLmxvZyhcIlNwZWNpZnlpbmcgZm9sbG93aW5nIGJyb3dzZXIgb3B0aW9uczpcIiwgYnJvd3Nlcik7XG5cdGF3YWl0IHdvcmtzcGFjZVBsYXRmb3JtSW5pdCh7XG5cdFx0YnJvd3Nlcixcblx0XHR0aGVtZTogdmFsaWRhdGVUaGVtZXMoc2V0dGluZ3M/LnRoZW1lUHJvdmlkZXI/LnRoZW1lcylcblx0fSk7XG59XG4iLCJpbXBvcnQgeyBDdXN0b21UaGVtZXMgfSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlLXBsYXRmb3JtXCI7XG5pbXBvcnQgeyBDdXN0b21QYWxldHRlU2V0IH0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybS9jb21tb24vc3JjL2FwaS90aGVtaW5nXCI7XG5pbXBvcnQgeyBDdXN0b21TZXR0aW5ncyB9IGZyb20gXCIuL3NoYXBlc1wiO1xuXG5sZXQgc2V0dGluZ3M6IEN1c3RvbVNldHRpbmdzO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRDb25maWd1cmVkU2V0dGluZ3MoKTogUHJvbWlzZTxDdXN0b21TZXR0aW5ncz4ge1xuXHRjb25zdCBhcHAgPSBhd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudCgpO1xuXHRjb25zdCBtYW5pZmVzdDogT3BlbkZpbi5NYW5pZmVzdCAmIHsgY3VzdG9tU2V0dGluZ3M/OiBDdXN0b21TZXR0aW5ncyB9ID0gYXdhaXQgYXBwLmdldE1hbmlmZXN0KCk7XG5cblx0aWYgKG1hbmlmZXN0LmN1c3RvbVNldHRpbmdzICE9PSB1bmRlZmluZWQpIHtcblx0XHRzZXR0aW5ncyA9IG1hbmlmZXN0LmN1c3RvbVNldHRpbmdzO1xuXHR9IGVsc2Uge1xuXHRcdHNldHRpbmdzID0ge307XG5cdH1cblxuXHRyZXR1cm4gc2V0dGluZ3M7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXR0aW5ncygpOiBQcm9taXNlPEN1c3RvbVNldHRpbmdzPiB7XG5cdGlmIChzZXR0aW5ncyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0c2V0dGluZ3MgPSBhd2FpdCBnZXRDb25maWd1cmVkU2V0dGluZ3MoKTtcblx0fVxuXHRyZXR1cm4gc2V0dGluZ3M7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUGFsZXR0ZSh0aGVtZVBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsIHRoZW1lTGFiZWw6IHN0cmluZyk6IEN1c3RvbVBhbGV0dGVTZXQge1xuXHRjb25zdCBwYWxldHRlOiBQYXJ0aWFsPEN1c3RvbVBhbGV0dGVTZXQ+ID0ge307XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoZW1lUGFsZXR0ZSk7XG5cblx0Zm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuXHRcdGlmIChcblx0XHRcdHRoZW1lUGFsZXR0ZVtrZXldICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdHRoZW1lUGFsZXR0ZVtrZXldICE9PSBudWxsICYmXG5cdFx0XHR0aGVtZVBhbGV0dGVba2V5XS50cmltKCkubGVuZ3RoID4gMFxuXHRcdCkge1xuXHRcdFx0cGFsZXR0ZVtrZXldID0gdGhlbWVQYWxldHRlW2tleV07XG5cdFx0fVxuXHR9XG5cblx0Y29uc3QgYnJhbmRQcmltYXJ5S2V5ID0gXCJicmFuZFByaW1hcnlcIjtcblx0Y29uc3QgYnJhbmRQcmltYXJ5VmFsdWUgPSBcIiM1MDRDRkZcIjtcblx0Y29uc3QgYnJhbmRTZWNvbmRhcnlLZXkgPSBcImJyYW5kU2Vjb25kYXJ5XCI7XG5cdGNvbnN0IGJyYW5kU2Vjb25kYXJ5VmFsdWUgPSBcIiMzODNBNDBcIjtcblx0Y29uc3QgYmFja2dyb3VuZFByaW1hcnlLZXkgPSBcImJhY2tncm91bmRQcmltYXJ5XCI7XG5cdGNvbnN0IGJhY2tncm91bmRQcmltYXJ5VmFsdWUgPSBcIiMxMTEyMTRcIjtcblxuXHRpZiAocGFsZXR0ZVticmFuZFByaW1hcnlLZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRgVGhlbWU6ICR7dGhlbWVMYWJlbH0gOiAke2JyYW5kUHJpbWFyeUtleX0gbm90IHNwZWNpZmllZCAoaXQgaXMgcmVxdWlyZWQgaWYgc3BlY2lmeWluZyBvdGhlciB0aGVtZSBwYWxldHRlIHNldHRpbmdzKS4gUHJvdmlkaW5nIGRlZmF1bHQgb2Y6ICR7YnJhbmRQcmltYXJ5VmFsdWV9YFxuXHRcdCk7XG5cdFx0cGFsZXR0ZVticmFuZFByaW1hcnlLZXldID0gYnJhbmRQcmltYXJ5VmFsdWU7XG5cdH1cblxuXHRpZiAocGFsZXR0ZVticmFuZFNlY29uZGFyeUtleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdGNvbnNvbGUud2Fybihcblx0XHRcdGBUaGVtZTogJHt0aGVtZUxhYmVsfSA6ICR7YnJhbmRTZWNvbmRhcnlLZXl9IG5vdCBzcGVjaWZpZWQgKGl0IGlzIHJlcXVpcmVkIGlmIHNwZWNpZnlpbmcgb3RoZXIgdGhlbWUgcGFsZXR0ZSBzZXR0aW5ncykuIFByb3ZpZGluZyBkZWZhdWx0IG9mOiAke2JyYW5kU2Vjb25kYXJ5VmFsdWV9YFxuXHRcdCk7XG5cdFx0cGFsZXR0ZVticmFuZFNlY29uZGFyeUtleV0gPSBicmFuZFNlY29uZGFyeVZhbHVlO1xuXHR9XG5cblx0aWYgKHBhbGV0dGVbYmFja2dyb3VuZFByaW1hcnlLZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRgVGhlbWU6ICR7dGhlbWVMYWJlbH0gOiAke2JhY2tncm91bmRQcmltYXJ5S2V5fSBub3Qgc3BlY2lmaWVkIChpdCBpcyByZXF1aXJlZCBpZiBzcGVjaWZ5aW5nIG90aGVyIHRoZW1lIHBhbGV0dGUgc2V0dGluZ3MpLiBQcm92aWRpbmcgZGVmYXVsdCBvZjogJHtiYWNrZ3JvdW5kUHJpbWFyeVZhbHVlfWBcblx0XHQpO1xuXHRcdHBhbGV0dGVbYmFja2dyb3VuZFByaW1hcnlLZXldID0gYmFja2dyb3VuZFByaW1hcnlWYWx1ZTtcblx0fVxuXG5cdHJldHVybiBwYWxldHRlIGFzIEN1c3RvbVBhbGV0dGVTZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRoZW1lcyh0aGVtZXM6IEN1c3RvbVRoZW1lcyk6IEN1c3RvbVRoZW1lcyB7XG5cdGNvbnN0IHZhbGlkYXRlZFRoZW1lczogQ3VzdG9tVGhlbWVzID0gW107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkodGhlbWVzKSkge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhlbWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCB0aGVtZVRvVmFsaWRhdGUgPSB0aGVtZXNbaV07XG5cdFx0XHRjb25zdCBwYWxldHRlID0gdmFsaWRhdGVQYWxldHRlKHRoZW1lVG9WYWxpZGF0ZS5wYWxldHRlLCB0aGVtZVRvVmFsaWRhdGUubGFiZWwpO1xuXHRcdFx0aWYgKHBhbGV0dGUgIT09IG51bGwpIHtcblx0XHRcdFx0dGhlbWVUb1ZhbGlkYXRlLnBhbGV0dGUgPSBwYWxldHRlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gZG9uJ3QgcGFzcyBhbiBlbXB0eSBvYmplY3QgYXMgdGhlcmUgYXJlIG5vIHRoZW1lIHByb3BlcnRpZXNcblx0XHRcdFx0dGhlbWVUb1ZhbGlkYXRlLnBhbGV0dGUgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHR2YWxpZGF0ZWRUaGVtZXMucHVzaCh0aGVtZVRvVmFsaWRhdGUpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB2YWxpZGF0ZWRUaGVtZXM7XG59XG4iLCJpbXBvcnQge1xuXHRTdG9yZWZyb250LFxuXHRTdG9yZWZyb250TGFuZGluZ1BhZ2UsXG5cdFN0b3JlZnJvbnROYXZpZ2F0aW9uU2VjdGlvbixcblx0U3RvcmVmcm9udEZvb3Rlcixcblx0QXBwLFxuXHRTdG9yZWZyb250UHJvdmlkZXIsXG5cdFN0b3JlZnJvbnRUZW1wbGF0ZSxcblx0U3RvcmVmcm9udE5hdmlnYXRpb25JdGVtLFxuXHRTdG9yZWZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbVxufSBmcm9tIFwiQG9wZW5maW4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBnZXRBcHBzLCBnZXRBcHBzQnlUYWcgfSBmcm9tIFwiLi9hcHBzXCI7XG5pbXBvcnQgeyBsYXVuY2ggfSBmcm9tIFwiLi9sYXVuY2hcIjtcbmltcG9ydCB7IGdldFNldHRpbmdzIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IEN1c3RvbVNldHRpbmdzLCBTdG9yZWZyb250U2V0dGluZ3NMYW5kaW5nUGFnZVJvdywgU3RvcmVmcm9udFNldHRpbmdzTmF2aWdhdGlvbkl0ZW0gfSBmcm9tIFwiLi9zaGFwZXNcIjtcblxubGV0IGlzU3RvcmVSZWdpc3RlcmVkID0gZmFsc2U7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlcigpIHtcblx0Y29uc29sZS5sb2coXCJJbml0aWFsaXNpbmcgdGhlIHN0b3JlZnJvbnQgcHJvdmlkZXIuXCIpO1xuXHRjb25zdCBwcm92aWRlciA9IGF3YWl0IGdldFN0b3JlUHJvdmlkZXIoKTtcblx0aWYgKHByb3ZpZGVyICE9PSBudWxsKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IFN0b3JlZnJvbnQucmVnaXN0ZXIocHJvdmlkZXIpO1xuXHRcdFx0aXNTdG9yZVJlZ2lzdGVyZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS5sb2coXCJTdG9yZWZyb250IHByb3ZpZGVyIGluaXRpYWxpc2VkLlwiKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJBbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyIHRoZSBjb250ZW50IHN0b3JlIHByb3ZpZGVyXCIsIGVycik7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXJlZ2lzdGVyKCkge1xuXHRpZiAoaXNTdG9yZVJlZ2lzdGVyZWQpIHtcblx0XHRjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFNldHRpbmdzKCk7XG5cdFx0YXdhaXQgU3RvcmVmcm9udC5kZXJlZ2lzdGVyKHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5pZCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XCJVbmFibGUgdG8gY2FsbCBzdG9yZSBkZXJlZ2lzdGVyIGFzIHRoZXJlIGlzIGFuIGluZGljYXRpb24gaXQgd2FzIG5ldmVyIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5LlwiXG5cdFx0KTtcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvdygpIHtcblx0Y29uc29sZS5sb2coXCJTaG93aW5nIHRoZSBzdG9yZS5cIik7XG5cdHJldHVybiBTdG9yZWZyb250LnNob3coKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhpZGUoKSB7XG5cdGNvbnNvbGUubG9nKFwiSGlkaW5nIHRoZSBzdG9yZS5cIik7XG5cdHJldHVybiBTdG9yZWZyb250LmhpZGUoKTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBhIG5hdmlnYXRpb24gaXRlbSBvciBzZWN0aW9uIGhhc24ndCBiZWVuIGNvbmZpZ3VyZWQgd2l0aCBhbiBJRC4gVGhpcyBpcyB0byBzaW1wbGlmeSBjb25maWd1cmF0aW9uIGZvciB0aGlzIGRlbW8uXG4gKiBJbiBhIHJlYWwgYXBwbGljYXRpb24geW91IHdvdWxkIG5lZWQgYW4gaWRlbXBvdGVudCBhbmQgdW5pcXVlIElEICh0aGluayBHVUlEKSB0aGF0IGRvZXNuJ3QgY2hhbmdlIGZvciB0aGF0IG5hdmlnYXRpb24gaXRlbS9zZWN0aW9uIHJlZ2FyZGxlc3Mgb2YgaG93XG4gKiBtYW55IHRpbWVzIGl0IGlzIHJlZ2VuZXJhdGVkIChlLmcuIG1vcmUgaXRlbXMgY2FuIGJlIGFkZGVkIHRvIHRoZSBpdGVtL3NlY3Rpb24gYnV0IHRoZSBJRCBzdGF5cyB0aGUgc2FtZSkuXG4gKiBBcyB5b3UgbmF2aWdhdGUgYXJvdW5kIHRoZSBzdG9yZSB0aGlzIElEIGlzIHVzZWQgYXMgYSByb3V0ZS4gU28gaWYgYSB1c2VyIGNsaWNrcyBvbiBhIGxpbmssIG5hdmlnYXRlcyB0byBhIG5ldyBwYWdlIGFuZCB0aGUgcmUtcmVxdWVzdGVkIG5hdmlnYXRpb24gaXRlbSBoYXNcbiAqIGEgZGlmZmVyZW50IElEIHRoZW4gdGhlIHN0b3JlIHdpbGwgbm90IGJlIGFibGUgdG8gZmluZCBhIG1hdGNoIGFuZCBpdCB3b24ndCBiZSBhYmxlIHRvIHJlbmRlciB0aGUgbmF2aWdhdGlvbiBpdGVtLlxuICogQSByZWFsIGFwcGxpY2F0aW9uIHdvdWxkIG5vdCB1c2UgdGhpcyBhcHByb2FjaCAoYXMgYW4gdXBkYXRlIHRvIHRoZSB0YWcgbGlzdCB3b3VsZCByZXN1bHQgaW4gYSBuZXcgSUQgd2hpY2ggd291bGQgZmFpbCBpZiB0aGUgY29uZmlnIHdhcyBmZXRjaGVkIGZyb20gYSBzZXJ2ZXIgYW5kIG5vdCBhIG1hbmlmZXN0KVxuICovXG5mdW5jdGlvbiBnZXRJZCh0aXRsZTogc3RyaW5nLCB0YWdzOiBzdHJpbmdbXSA9IFtdKSB7XG5cdGNvbnN0IHNlYXJjaCA9IFwiIFwiO1xuXHRjb25zdCByZXBsYWNlV2l0aCA9IFwiLVwiO1xuXHRsZXQgcmVzdWx0ID0gdGl0bGUucmVwbGFjZUFsbChzZWFyY2gsIHJlcGxhY2VXaXRoKTtcblx0cmVzdWx0ICs9IGAtJHt0YWdzLmpvaW4oXCItXCIpfWA7XG5cdHJldHVybiByZXN1bHQudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gaXNTdG9yZWZyb250Q29uZmlndXJhdGlvblZhbGlkKGNvbmZpZzogQ3VzdG9tU2V0dGluZ3MpOiBib29sZWFuIHtcblx0Y29uc3QgaWRMaXN0ID0gW107XG5cdGxldCBoYXNEdXBsaWNhdGVJZHMgPSBmYWxzZTtcblxuXHRpZiAoXG5cdFx0Y29uZmlnID09PSB1bmRlZmluZWQgfHxcblx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyID09PSB1bmRlZmluZWQgfHxcblx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLmlkID09PSB1bmRlZmluZWQgfHxcblx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLnRpdGxlID09PSB1bmRlZmluZWQgfHxcblx0XHQoY29uZmlnLnN0b3JlZnJvbnRQcm92aWRlci5mb290ZXIgPT09IHVuZGVmaW5lZCAmJlxuXHRcdFx0Y29uZmlnLnN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZSAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLmxhbmRpbmdQYWdlLnRvcFJvdyAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLmxhbmRpbmdQYWdlLm1pZGRsZVJvdyAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLmxhbmRpbmdQYWdlLmJvdHRvbVJvdyAhPT0gdW5kZWZpbmVkICYmXG5cdFx0XHRjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLm5hdmlnYXRpb24gIT09IHVuZGVmaW5lZClcblx0KSB7XG5cdFx0Y29uc29sZS5lcnJvcihcblx0XHRcdFwiU3RvcmVmcm9udFByb3ZpZGVyIGlzIG5vdCBjb3JyZWN0bHkgY29uZmlndXJlZCBpbiB0aGUgY3VzdG9tU2V0dGluZ3Mgb2YgdGhpcyBtYW5pZmVzdC4gWW91IG11c3QgZW5zdXJlIHRoYXQgc3RvcmVmcm9udFByb3ZpZGVyIGlzIGRlZmluZWQsIHRoYXQgaXQgaGFzIGFuIGlkIGFuZCB0aXRsZSBhbmQgdGhhdCB0aGUgZm9vdGVyLCBsYW5kaW5nUGFnZSAodG9wIHJvdywgbWlkZGxlIHJvdyBhbmQgYm90dG9tIHJvdykgYW5kIG5hdmlnYXRpb24gc2VjdGlvbnMgaGF2ZSBiZWVuIGRlZmluZWQuXCJcblx0XHQpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGNvbnN0IHZhbGlkYXRlSWQgPSAoaWQ6IHN0cmluZywgbmFtZXNwYWNlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuXHRcdGlmIChpZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYCR7bmFtZXNwYWNlfTogJHt3YXJuaW5nfWApO1xuXHRcdH0gZWxzZSBpZiAoaWRMaXN0LmluY2x1ZGVzKGlkKSkge1xuXHRcdFx0aGFzRHVwbGljYXRlSWRzID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXG5cdFx0XHRcdGAke25hbWVzcGFjZX06IFRoZSBpZCBpcyB1c2VkIGluIG1vcmUgdGhhbiBvbmUgcGxhY2UuIFBsZWFzZSBoYXZlIGEgdW5pcXVlIGFuZCBpZGVtcG90ZW50IGlkOiAke2lkfWBcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlkTGlzdC5wdXNoKGlkKTtcblx0XHR9XG5cdH07XG5cblx0Y29uc3Qgd2FybmluZ01lc3NhZ2UgPVxuXHRcdFwiVGhlIGlkIGlzIG5vdCBkZWZpbmVkLiBUaGlzIGRlbW8gd2lsbCBnZW5lcmF0ZSBhbiBpZCBiYXNlZCBvbiB0aXRsZSBidXQgeW91IHNob3VsZCBoYXZlIGEgdW5pcXVlIGFuZCBpZGVtcG90ZW50IGlkIHdoZW4gYnVpbGRpbmcgeW91ciBvd24gc3RvcmUuXCI7XG5cblx0Y29uc29sZS5sb2coXCJWYWxpZGF0aW5nIHNldHRpbmdzIHN0b3JlZnJvbnRQcm92aWRlciBuYXZpZ2F0aW9uIGNvbmZpZ1wiKTtcblx0Y29uc3QgbmF2aWdhdGlvbiA9IGNvbmZpZy5zdG9yZWZyb250UHJvdmlkZXIubmF2aWdhdGlvbjtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYXZpZ2F0aW9uLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFsaWRhdGVJZChuYXZpZ2F0aW9uW2ldLmlkLCBgc3RvcmVmcm9udFByb3ZpZGVyLm5hdmlnYXRpb25bJHtpfV0uaWRgLCB3YXJuaW5nTWVzc2FnZSk7XG5cdFx0Y29uc3QgaXRlbXMgPSBuYXZpZ2F0aW9uW2ldLml0ZW1zO1xuXHRcdGZvciAobGV0IG4gPSAwOyBuIDwgaXRlbXMubGVuZ3RoOyBuKyspIHtcblx0XHRcdHZhbGlkYXRlSWQoaXRlbXNbbl0uaWQsIGBzdG9yZWZyb250UHJvdmlkZXIubmF2aWdhdGlvblske2l9XS5pdGVtc1ske259XS5pZGAsIHdhcm5pbmdNZXNzYWdlKTtcblx0XHR9XG5cdH1cblxuXHRjb25zb2xlLmxvZyhcIlZhbGlkYXRpbmcgc2V0dGluZ3Mgc3RvcmVmcm9udFByb3ZpZGVyIGxhbmRpbmcgcGFnZSBoZXJvIGNvbmZpZ1wiKTtcblx0Y29uc3QgbGFuZGluZ1BhZ2UgPSBjb25maWcuc3RvcmVmcm9udFByb3ZpZGVyLmxhbmRpbmdQYWdlO1xuXG5cdGlmIChsYW5kaW5nUGFnZT8uaGVybz8uY3RhICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YWxpZGF0ZUlkKGxhbmRpbmdQYWdlLmhlcm8uY3RhLmlkLCBcInN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS5oZXJvLmN0YS5pZFwiLCB3YXJuaW5nTWVzc2FnZSk7XG5cdH1cblxuXHRjb25zb2xlLmxvZyhcIlZhbGlkYXRpbmcgc2V0dGluZ3Mgc3RvcmVmcm9udFByb3ZpZGVyIGxhbmRpbmcgcGFnZSB0b3Agcm93IGNvbmZpZ1wiKTtcblx0Y29uc3QgdG9wUm93ID0gbGFuZGluZ1BhZ2UudG9wUm93O1xuXG5cdGlmICh0b3BSb3cuaXRlbXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdG9wUm93Lml0ZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YWxpZGF0ZUlkKHRvcFJvdy5pdGVtc1tpXS5pZCwgYHN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS50b3BSb3cuaXRlbXNbJHtpfV0uaWRgLCB3YXJuaW5nTWVzc2FnZSk7XG5cdFx0fVxuXHR9XG5cblx0Y29uc29sZS5sb2coXCJWYWxpZGF0aW5nIHNldHRpbmdzIHN0b3JlZnJvbnRQcm92aWRlciBsYW5kaW5nIHBhZ2UgYm90dG9tIHJvdyBjb25maWdcIik7XG5cdGNvbnN0IGJvdHRvbVJvdyA9IGxhbmRpbmdQYWdlLmJvdHRvbVJvdztcblx0aWYgKGJvdHRvbVJvdy5pdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBib3R0b21Sb3cuaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhbGlkYXRlSWQoXG5cdFx0XHRcdGJvdHRvbVJvdy5pdGVtc1tpXS5pZCxcblx0XHRcdFx0YHN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS5ib3R0b21Sb3cuaXRlbXNbJHtpfV0uaWRgLFxuXHRcdFx0XHR3YXJuaW5nTWVzc2FnZVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRjb25zb2xlLmxvZyhcIlZhbGlkYXRpbmcgaWRzLCBjaGVja2luZyBmb3IgZHVwbGljYXRlIGlkcy5cIik7XG5cdGlmIChoYXNEdXBsaWNhdGVJZHMpIHtcblx0XHRjb25zb2xlLmVycm9yKFxuXHRcdFx0XCJZb3UgaGF2ZSBkZWZpbmVkIGR1cGxpY2F0ZSBpZHMgKHBsZWFzZSBzZWUgdGhlIG90aGVyIGVycm9yIG1lc3NhZ2VzKSB3aGljaCBjb3VsZCByZXN1bHQgaW4gc3RyYW5nZSBiZWhhdmlvdXIgKGlmIHdlIGFyZSByb3V0aW5nIGJ5IGlkIGFuZCB5b3UgaGF2ZSB0d28gb3IgbW9yZSBpdGVtcyB0aGF0IHJlc29sdmUgdG8gdGhlIHNhbWUgaWQgdGhlbiBpdCBjb3VsZCBuYXZpZ2F0ZSB0byBzb21ldGhpbmcgdW5leHBlY3RlZC4gUGxlYXNlIGVuc3VyZSBpZHMgYXJlIHVuaXF1ZSBhbmQgaWRlbXBvdGVudC5cIlxuXHRcdCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFN0b3JlUHJvdmlkZXIoKTogUHJvbWlzZTxTdG9yZWZyb250UHJvdmlkZXI+IHtcblx0Y29uc29sZS5sb2coXCJHZXR0aW5nIHRoZSBzdG9yZSBwcm92aWRlci5cIik7XG5cdGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcblx0aWYgKGlzU3RvcmVmcm9udENvbmZpZ3VyYXRpb25WYWxpZChzZXR0aW5ncykpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aWQ6IHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5pZCxcblx0XHRcdHRpdGxlOiBzZXR0aW5ncy5zdG9yZWZyb250UHJvdmlkZXIudGl0bGUsXG5cdFx0XHRpY29uOiBzZXR0aW5ncy5zdG9yZWZyb250UHJvdmlkZXIuaWNvbixcblx0XHRcdGdldE5hdmlnYXRpb246IGdldE5hdmlnYXRpb24uYmluZCh0aGlzKSxcblx0XHRcdGdldExhbmRpbmdQYWdlOiBnZXRMYW5kaW5nUGFnZS5iaW5kKHRoaXMpLFxuXHRcdFx0Z2V0Rm9vdGVyOiBnZXRGb290ZXIuYmluZCh0aGlzKSxcblx0XHRcdGdldEFwcHMsXG5cdFx0XHRsYXVuY2hBcHA6IGxhdW5jaFxuXHRcdH07XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE5hdmlnYXRpb24oKTogUHJvbWlzZTxbU3RvcmVmcm9udE5hdmlnYXRpb25TZWN0aW9uPywgU3RvcmVmcm9udE5hdmlnYXRpb25TZWN0aW9uP10+IHtcblx0Y29uc29sZS5sb2coXCJTaG93aW5nIHRoZSBzdG9yZSBuYXZpZ2F0aW9uLlwiKTtcblx0Y29uc3QgbmF2aWdhdGlvblNlY3Rpb25JdGVtTGltaXQgPSA1O1xuXHRjb25zdCBuYXZpZ2F0aW9uU2VjdGlvbkxpbWl0ID0gMjtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRjb25zdCBuYXZpZ2F0aW9uU2VjdGlvbnM6IFtTdG9yZWZyb250TmF2aWdhdGlvblNlY3Rpb24/LCBTdG9yZWZyb250TmF2aWdhdGlvblNlY3Rpb24/XSA9IFtdO1xuXG5cdGlmIChzZXR0aW5ncz8uc3RvcmVmcm9udFByb3ZpZGVyPy5uYXZpZ2F0aW9uID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5uYXZpZ2F0aW9uLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKG5hdmlnYXRpb25TZWN0aW9ucy5sZW5ndGggPT09IG5hdmlnYXRpb25TZWN0aW9uTGltaXQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFxuXHRcdFx0XHRcIk1vcmUgdGhhbiAyIG5hdmlnYXRpb24gc2VjdGlvbnMgZGVmaW5lZCBpbiBTdG9yZWZyb250UHJvdmlkZXIgc2V0dGluZ3MuIE9ubHkgdHdvIGFyZSB0YWtlbi5cIlxuXHRcdFx0KTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRjb25zdCBuYXZpZ2F0aW9uU2VjdGlvbjogU3RvcmVmcm9udE5hdmlnYXRpb25TZWN0aW9uID0ge1xuXHRcdFx0aWQ6XG5cdFx0XHRcdHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5uYXZpZ2F0aW9uW2ldLmlkID8/XG5cdFx0XHRcdGdldElkKHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5uYXZpZ2F0aW9uW2ldLnRpdGxlKSxcblx0XHRcdHRpdGxlOiBzZXR0aW5ncy5zdG9yZWZyb250UHJvdmlkZXIubmF2aWdhdGlvbltpXS50aXRsZSxcblx0XHRcdGl0ZW1zOiAoYXdhaXQgZ2V0TmF2aWdhdGlvbkl0ZW1zKFxuXHRcdFx0XHRzZXR0aW5ncy5zdG9yZWZyb250UHJvdmlkZXIubmF2aWdhdGlvbltpXS5pdGVtcyxcblx0XHRcdFx0bmF2aWdhdGlvblNlY3Rpb25JdGVtTGltaXRcblx0XHRcdCkpIGFzIFtcblx0XHRcdFx0U3RvcmVmcm9udE5hdmlnYXRpb25JdGVtLFxuXHRcdFx0XHRTdG9yZWZyb250TmF2aWdhdGlvbkl0ZW0/LFxuXHRcdFx0XHRTdG9yZWZyb250TmF2aWdhdGlvbkl0ZW0/LFxuXHRcdFx0XHRTdG9yZWZyb250TmF2aWdhdGlvbkl0ZW0/LFxuXHRcdFx0XHRTdG9yZWZyb250TmF2aWdhdGlvbkl0ZW0/XG5cdFx0XHRdXG5cdFx0fTtcblx0XHRuYXZpZ2F0aW9uU2VjdGlvbnMucHVzaChuYXZpZ2F0aW9uU2VjdGlvbik7XG5cdH1cblxuXHRyZXR1cm4gbmF2aWdhdGlvblNlY3Rpb25zO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMYW5kaW5nUGFnZSgpOiBQcm9taXNlPFN0b3JlZnJvbnRMYW5kaW5nUGFnZT4ge1xuXHRjb25zb2xlLmxvZyhcIkdldHRpbmcgdGhlIHN0b3JlIGxhbmRpbmcgcGFnZS5cIik7XG5cdGNvbnN0IGxhbmRpbmdQYWdlOiBTdG9yZWZyb250TGFuZGluZ1BhZ2UgPSB7XG5cdFx0dG9wUm93OiBudWxsLFxuXHRcdG1pZGRsZVJvdzogbnVsbCxcblx0XHRib3R0b21Sb3c6IG51bGxcblx0fTtcblxuXHRjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFNldHRpbmdzKCk7XG5cdGNvbnN0IHN0b3JlRnJvbnREZXRhaWxlZE5hdmlnYXRpb25JdGVtQm90dG9tUm93TGltaXQgPSAzO1xuXHRjb25zdCBzdG9yZUZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbVRvcFJvd0xpbWl0ID0gNDtcblx0Y29uc3QgbWlkZGxlUm93QXBwTGltaXQgPSA2O1xuXG5cdGlmIChzZXR0aW5ncz8uc3RvcmVmcm9udFByb3ZpZGVyPy5sYW5kaW5nUGFnZT8uaGVybyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y29uc3QgaGVybyA9IHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS5oZXJvO1xuXHRcdGNvbnN0IGN0YSA9IGF3YWl0IGdldE5hdmlnYXRpb25JdGVtKGhlcm8uY3RhLmlkLCBoZXJvLmN0YS50aXRsZSwgaGVyby5jdGEudGFncyk7XG5cdFx0bGFuZGluZ1BhZ2UuaGVybyA9IHtcblx0XHRcdHRpdGxlOiBoZXJvLnRpdGxlLFxuXHRcdFx0aW1hZ2U6IGhlcm8uaW1hZ2UsXG5cdFx0XHRkZXNjcmlwdGlvbjogaGVyby5kZXNjcmlwdGlvbixcblx0XHRcdGN0YVxuXHRcdH07XG5cdH1cblxuXHRpZiAoc2V0dGluZ3M/LnN0b3JlZnJvbnRQcm92aWRlcj8ubGFuZGluZ1BhZ2U/LnRvcFJvdyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y29uc3Qgcm93ID0gYXdhaXQgZ2V0TGFuZGluZ1BhZ2VSb3coXG5cdFx0XHRzZXR0aW5ncz8uc3RvcmVmcm9udFByb3ZpZGVyPy5sYW5kaW5nUGFnZT8udG9wUm93LFxuXHRcdFx0c3RvcmVGcm9udERldGFpbGVkTmF2aWdhdGlvbkl0ZW1Ub3BSb3dMaW1pdFxuXHRcdCk7XG5cdFx0bGFuZGluZ1BhZ2UudG9wUm93ID0ge1xuXHRcdFx0dGl0bGU6IHJvdy50aXRsZSxcblx0XHRcdGl0ZW1zOiByb3cuaXRlbXMgYXMgW1xuXHRcdFx0XHRTdG9yZWZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbT8sXG5cdFx0XHRcdFN0b3JlZnJvbnREZXRhaWxlZE5hdmlnYXRpb25JdGVtPyxcblx0XHRcdFx0U3RvcmVmcm9udERldGFpbGVkTmF2aWdhdGlvbkl0ZW0/LFxuXHRcdFx0XHRTdG9yZWZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbT9cblx0XHRcdF1cblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUuZXJyb3IoXCJZb3UgbmVlZCB0byBoYXZlIGEgdG9wUm93IGRlZmluZWQgaW4geW91ciBsYW5kaW5nIHBhZ2UuXCIpO1xuXHR9XG5cblx0aWYgKHNldHRpbmdzPy5zdG9yZWZyb250UHJvdmlkZXI/LmxhbmRpbmdQYWdlPy5taWRkbGVSb3cgIT09IHVuZGVmaW5lZCkge1xuXHRcdGNvbnN0IG1pZGRsZVJvdyA9IHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS5taWRkbGVSb3c7XG5cdFx0Y29uc3QgbWlkZGxlUm93QXBwcyA9IGF3YWl0IGdldEFwcHNCeVRhZyhtaWRkbGVSb3cudGFncyk7XG5cdFx0aWYgKG1pZGRsZVJvd0FwcHMubGVuZ3RoID4gbWlkZGxlUm93QXBwTGltaXQpIHtcblx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0YFRvbyBtYW55IGFwcHMgKCR7XG5cdFx0XHRcdFx0bWlkZGxlUm93QXBwcy5sZW5ndGhcblx0XHRcdFx0fSkgaGF2ZSBiZWVuIHJldHVybmVkIGJ5IHRoZSBtaWRkbGUgcm93IHRhZyBkZWZpbml0aW9uICR7bWlkZGxlUm93LnRhZ3Muam9pbihcblx0XHRcdFx0XHRcIiBcIlxuXHRcdFx0XHQpfS4gT25seSAke21pZGRsZVJvd0FwcExpbWl0fSB3aWxsIGJlIHNob3duLmBcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGNvbnN0IHZhbGlkYXRlZE1pZGRsZVJvd0FwcHMgPSBtaWRkbGVSb3dBcHBzLnNsaWNlKDAsIG1pZGRsZVJvd0FwcExpbWl0KSBhcyBbXG5cdFx0XHRBcHA/LFxuXHRcdFx0QXBwPyxcblx0XHRcdEFwcD8sXG5cdFx0XHRBcHA/LFxuXHRcdFx0QXBwPyxcblx0XHRcdEFwcD9cblx0XHRdO1xuXHRcdGxhbmRpbmdQYWdlLm1pZGRsZVJvdyA9IHtcblx0XHRcdHRpdGxlOiBtaWRkbGVSb3cudGl0bGUsXG5cdFx0XHRhcHBzOiB2YWxpZGF0ZWRNaWRkbGVSb3dBcHBzXG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmVycm9yKFwiWW91IG5lZWQgdG8gaGF2ZSBhIG1pZGRsZVJvdyBkZWZpbmVkIGluIHlvdXIgbGFuZGluZyBwYWdlLlwiKTtcblx0fVxuXG5cdGlmIChzZXR0aW5ncz8uc3RvcmVmcm9udFByb3ZpZGVyPy5sYW5kaW5nUGFnZT8uYm90dG9tUm93ICE9PSB1bmRlZmluZWQpIHtcblx0XHRjb25zdCByb3cgPSBhd2FpdCBnZXRMYW5kaW5nUGFnZVJvdyhcblx0XHRcdHNldHRpbmdzLnN0b3JlZnJvbnRQcm92aWRlci5sYW5kaW5nUGFnZS5ib3R0b21Sb3csXG5cdFx0XHRzdG9yZUZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbUJvdHRvbVJvd0xpbWl0XG5cdFx0KTtcblx0XHRsYW5kaW5nUGFnZS5ib3R0b21Sb3cgPSB7XG5cdFx0XHR0aXRsZTogcm93LnRpdGxlLFxuXHRcdFx0aXRlbXM6IHJvdy5pdGVtcyBhcyBbXG5cdFx0XHRcdFN0b3JlZnJvbnREZXRhaWxlZE5hdmlnYXRpb25JdGVtPyxcblx0XHRcdFx0U3RvcmVmcm9udERldGFpbGVkTmF2aWdhdGlvbkl0ZW0/LFxuXHRcdFx0XHRTdG9yZWZyb250RGV0YWlsZWROYXZpZ2F0aW9uSXRlbT9cblx0XHRcdF1cblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUuZXJyb3IoXCJZb3UgbmVlZCB0byBoYXZlIGEgYm90dG9tUm93IGRlZmluZWQgaW4geW91ciBsYW5kaW5nIHBhZ2UuXCIpO1xuXHR9XG5cblx0cmV0dXJuIGxhbmRpbmdQYWdlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRGb290ZXIoKTogUHJvbWlzZTxTdG9yZWZyb250Rm9vdGVyPiB7XG5cdGNvbnNvbGUubG9nKFwiR2V0dGluZyB0aGUgc3RvcmUgZm9vdGVyLlwiKTtcblx0Y29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRTZXR0aW5ncygpO1xuXHRpZiAoc2V0dGluZ3M/LnN0b3JlZnJvbnRQcm92aWRlcj8uZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gc2V0dGluZ3Muc3RvcmVmcm9udFByb3ZpZGVyLmZvb3Rlcjtcblx0fVxuXHRjb25zb2xlLmVycm9yKFwiU3RvcmVmcm9udCBpcyBiZWluZyBpbml0aWFsaXNlZCB3aXRob3V0IGEgZm9vdGVyIGNvbmZpZ3VyZWQuXCIpO1xuXHRyZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaGlzIHNlY3Rpb24gZ2VuZXJhdGVzIGEgbmF2aWdhdGlvbiBpdGVtIGZvciBTdG9yZWZyb250IGJhc2VkIG9uIHNvbWUgY29uZmlndXJhdGlvbi5cbiAqIEBwYXJhbSBpZFxuICogVGhpcyBpZCBzaG91bGQgYmUgdW5pcXVlIGFuZCBpZGVtcG90ZW50IGFuZCBpc24ndCBjaGFuZ2VkIHJlZ2FyZGxlc3Mgb2YgaG93IG9mdGVuIHRoZSBzYW1lIG5hdmlnYXRpb24gaXRlbSBpcyByZWdlbmVyYXRlZC5cbiAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgYmVjYXVzZSBpdCBpcyB1c2VkIGZvciByb3V0aW5nIGluIFN0b3JlZnJvbnQuIElmIGEgdXNlciBuYXZpZ2F0ZWQgZnJvbSBhIGxpbmsgYW5kIHRoZSBpZCBjaGFuZ2VzIHdoZW4gdGhlIGl0ZW1cbiAqIGlzIHJlLXJlcXVlc3RlZCBieSBzdG9yZWZyb250IHRoZW4gaXQgd2lsbCBub3QgYmUgYWJsZSB0byByZW5kZXIgdGhlIGNvbnRlbnRzLlxuICogQHBhcmFtIHRpdGxlXG4gKiBAcGFyYW0gdGFnc1xuICogVGFncyBhcmUgdXNlZCBhcyBhIHdheSBvZiBmaWx0ZXJpbmcgb3V0IHdoaWNoIGFwcHMgc2hvdWxkIGJlIGFzc2lnbmVkIHRvIGEgU3RvcmVmcm9udE5hdmlnYXRpb25JdGVtLlxuICogVGhpcyBhbGxvd3MgYXBwcyB0byBiZSB0YWdnZWQgb24gdGhlIHNlcnZlciBhbmQgdGhlIHN0b3JlIHdvdWxkIGF1dG9tYXRpY2FsbHkgdXBkYXRlIHRoZSBhcHBzIGFzc2lnbmVkIHRvIGEgcGFydGljdWxhciBzZWN0aW9uLlxuICogQHJldHVybnMgU3RvcmVmcm9udE5hdmlnYXRpb25JdGVtXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldE5hdmlnYXRpb25JdGVtKFxuXHRpZDogc3RyaW5nLFxuXHR0aXRsZTogc3RyaW5nLFxuXHR0YWdzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxTdG9yZWZyb250TmF2aWdhdGlvbkl0ZW0+IHtcblx0Y29uc3QgbmF2aWdhdGlvbkl0ZW06IFN0b3JlZnJvbnROYXZpZ2F0aW9uSXRlbSA9IHtcblx0XHRpZDogaWQgPz8gZ2V0SWQodGl0bGUsIHRhZ3MpLFxuXHRcdHRpdGxlLFxuXHRcdHRlbXBsYXRlSWQ6IFN0b3JlZnJvbnRUZW1wbGF0ZS5BcHBHcmlkLFxuXHRcdHRlbXBsYXRlRGF0YToge1xuXHRcdFx0YXBwczogW11cblx0XHR9XG5cdH07XG5cblx0Y29uc3QgYXBwcyA9IGF3YWl0IGdldEFwcHNCeVRhZyh0YWdzKTtcblxuXHRpZiAoYXBwcyAhPT0gdW5kZWZpbmVkICYmIGFwcHMubGVuZ3RoID4gMCkge1xuXHRcdG5hdmlnYXRpb25JdGVtLnRlbXBsYXRlRGF0YS5hcHBzID0gYXBwcztcblx0fVxuXG5cdHJldHVybiBuYXZpZ2F0aW9uSXRlbTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TmF2aWdhdGlvbkl0ZW1zKGl0ZW1zOiBTdG9yZWZyb250U2V0dGluZ3NOYXZpZ2F0aW9uSXRlbVtdLCBsaW1pdDogbnVtYmVyKSB7XG5cdGNvbnN0IG5hdmlnYXRpb25JdGVtczogU3RvcmVmcm9udE5hdmlnYXRpb25JdGVtW10gPSBbXTtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgbmF2aWdhdGlvbkl0ZW0gPSBhd2FpdCBnZXROYXZpZ2F0aW9uSXRlbShpdGVtc1tpXS5pZCwgaXRlbXNbaV0udGl0bGUsIGl0ZW1zW2ldLnRhZ3MpO1xuXHRcdG5hdmlnYXRpb25JdGVtcy5wdXNoKG5hdmlnYXRpb25JdGVtKTtcblx0fVxuXG5cdGlmIChuYXZpZ2F0aW9uSXRlbXMubGVuZ3RoID4gbGltaXQpIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRgWW91IGhhdmUgZGVmaW5lZCB0b28gbWFueSBuYXZpZ2F0aW9ucyBpdGVtcyAoJHtuYXZpZ2F0aW9uSXRlbXMubGVuZ3RofSkuIFBsZWFzZSBsaW1pdCBpdCB0byAke2xpbWl0fSBhcyB3ZSB3aWxsIG9ubHkgdGFrZSB0aGUgZmlyc3QgJHtsaW1pdH1gXG5cdFx0KTtcblx0fVxuXHRyZXR1cm4gbmF2aWdhdGlvbkl0ZW1zLnNsaWNlKDAsIGxpbWl0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGFuZGluZ1BhZ2VSb3coZGVmaW5pdGlvbjogU3RvcmVmcm9udFNldHRpbmdzTGFuZGluZ1BhZ2VSb3csIGxpbWl0OiBudW1iZXIpIHtcblx0Y29uc3QgaXRlbXM6IFN0b3JlZnJvbnREZXRhaWxlZE5hdmlnYXRpb25JdGVtW10gPSBbXTtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGRlZmluaXRpb24uaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBuYXZpZ2F0aW9uSXRlbSA9IGF3YWl0IGdldE5hdmlnYXRpb25JdGVtKFxuXHRcdFx0ZGVmaW5pdGlvbi5pdGVtc1tpXS5pZCxcblx0XHRcdGRlZmluaXRpb24uaXRlbXNbaV0udGl0bGUsXG5cdFx0XHRkZWZpbml0aW9uLml0ZW1zW2ldLnRhZ3Ncblx0XHQpO1xuXHRcdGNvbnN0IGl0ZW06IFN0b3JlZnJvbnREZXRhaWxlZE5hdmlnYXRpb25JdGVtID0ge1xuXHRcdFx0ZGVzY3JpcHRpb246IGRlZmluaXRpb24uaXRlbXNbaV0uZGVzY3JpcHRpb24sXG5cdFx0XHRpbWFnZTogZGVmaW5pdGlvbi5pdGVtc1tpXS5pbWFnZSxcblx0XHRcdC4uLm5hdmlnYXRpb25JdGVtXG5cdFx0fTtcblx0XHRpdGVtcy5wdXNoKGl0ZW0pO1xuXHR9XG5cblx0aWYgKGl0ZW1zLmxlbmd0aCA+IGxpbWl0KSB7XG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0YFlvdSBoYXZlIGRlZmluZWQgdG9vIG1hbnkgc3RvcmVmcm9udCBkZXRhaWxlZCBuYXZpZ2F0aW9uIGl0ZW1zICgke2l0ZW1zLmxlbmd0aH0pLiBQbGVhc2Uga2VlcCBpdCB0byB0aGUgbGltaXQgb2YgJHtsaW1pdH0gYXMgb25seSB0aGUgZmlyc3QgJHtsaW1pdH0gd2lsbCBiZSByZXR1cm5lZC5gXG5cdFx0KTtcblx0fVxuXG5cdGNvbnN0IGRldGFpbGVkTmF2aWdhdGlvbkl0ZW1zID0gaXRlbXMuc2xpY2UoMCwgbGltaXQpO1xuXG5cdHJldHVybiB7XG5cdFx0dGl0bGU6IGRlZmluaXRpb24udGl0bGUsXG5cdFx0aXRlbXM6IGRldGFpbGVkTmF2aWdhdGlvbkl0ZW1zXG5cdH07XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgaW5pdCBhcyBib290c3RyYXAgfSBmcm9tIFwiLi9ib290c3RyYXBwZXJcIjtcbmltcG9ydCB7IGluaXQgYXMgaW5pdGlhbGlzZVBsYXRmb3JtIH0gZnJvbSBcIi4vcGxhdGZvcm1cIjtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGFzeW5jICgpID0+IHtcblx0Y29uc3QgcGxhdGZvcm0gPSBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKTtcblx0YXdhaXQgcGxhdGZvcm0ub25jZShcInBsYXRmb3JtLWFwaS1yZWFkeVwiLCBhc3luYyAoKSA9PiBib290c3RyYXAoKSk7XG5cdGF3YWl0IGluaXRpYWxpc2VQbGF0Zm9ybSgpO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=