<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible"
        content="IE=edge,chrome=1" />
  <title>Example Application</title>
  <meta name="description"
        content="" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1" />
  <link rel="preconnect"
        href="https://fonts.googleapis.com" />
  <link rel="preconnect"
        href="https://fonts.gstatic.com"
        crossorigin="" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
  <link rel="stylesheet"
        href="../style/app.css" />
</head>

<body class="col fill gap20">
  <header class="row spread middle">
    <div class="col">
      <h1>Example Application</h1>
      <h1 class="tag">Demonstrate integrating Server Authentication.</h1>
    </div>
    <div class="row middle gap20">
      <image src="../images/icon-blue.png"
             alt="OpenFin"
             height="40px"></image>
    </div>
  </header>
  <main class="col fill gap10">
    <p>Welcome to the authenticated application.</p>
  </main>
  <footer class="row right gap20">
    <button id="btnLogout">Logout and Exit</button>
    <button id="btnExit">Exit</button>
  </footer>

  <script>
    const btnLogout = document.querySelector("#btnLogout");
    btnLogout.addEventListener("click", () => {
      // On logout the session cookies are cleared and close the app
      fetch("http://localhost:8080/app/logout", {
        method: "post",
        redirect: "follow"
      })
        .then(async (response) => {
          await fin.Platform.getCurrentSync().quit();
        });
    });
    const btnExit = document.querySelector("#btnExit");
    btnExit.addEventListener("click", async () => {
      await fin.Platform.getCurrentSync().quit();
    });
  </script>
</body>

</html>