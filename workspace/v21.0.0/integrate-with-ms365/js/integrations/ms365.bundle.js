/******/ var __webpack_modules__ = ({

/***/ "../../node_modules/@openfin/microsoft365/openfin.ms365.js":
/*!*****************************************************************!*\
  !*** ../../node_modules/@openfin/microsoft365/openfin.ms365.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ApiError: () => (/* binding */ o),
/* harmony export */   ApiRequestError: () => (/* binding */ i),
/* harmony export */   AuthTokenExpiredError: () => (/* binding */ a),
/* harmony export */   AuthorizationError: () => (/* binding */ s),
/* harmony export */   InitializationError: () => (/* binding */ u),
/* harmony export */   InteropError: () => (/* binding */ l),
/* harmony export */   ParameterError: () => (/* binding */ c),
/* harmony export */   TeamsConnection: () => (/* binding */ f),
/* harmony export */   connect: () => (/* binding */ d),
/* harmony export */   disableLogging: () => (/* binding */ h),
/* harmony export */   enableLogging: () => (/* binding */ p)
/* harmony export */ });
/*! For license information please see openfin.ms365.js.LICENSE.txt */
var t={876:t=>{const{AbortController:e,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;t.exports=e,t.exports.AbortSignal=n,t.exports.default=e},60:(t,e)=>{e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=s(t),a=i[0],u=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),c=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,l=r-o;s<l;s+=a)i.push(u(t,s,s+a>l?l:s+a));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},485:(t,e,n)=>{const r=n(60),o=n(215),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=s(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const o=function(t){if(u.isBuffer(t)){const e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||K(t.length)?s(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return c(t),s(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(o)return r?-1:V(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,o){let i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function w(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(K(r))return a;t[n+a]=r}return a}function _(t,e,n,r){return J(V(e,t.length-n),t,n,r)}function E(t,e,n,r){return J(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return J(G(e),t,n,r)}function A(t,e,n,r){return J(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(i=u));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=R));return n}(r)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},u.allocUnsafe=function(t){return f(t)},u.allocUnsafeSlow=function(t){return f(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Y(e,Uint8Array))o+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,o){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),l=this.slice(r,o),c=t.slice(e,n);for(let t=0;t<s;++t)if(l[t]!==c[t]){i=l[t],a=c[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function x(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function C(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function B(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=X[t[r]];return o}function k(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r,o){F(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function j(t,e,n,r,o){F(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function N(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Z((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Z((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const W={};function $(t,e,n){W[t]=class NodeError extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function D(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function F(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new W.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||q(e,t.length-(n+1))}(r,o,i)}function z(t,e){if("number"!=typeof t)throw new W.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=D(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=D(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},465:t=>{var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}g(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,n)}(t,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var o,i,a,l;if(s(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,l=c,console&&console.warn&&console.warn(l)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function d(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):p(o,o.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)r(c[n],this,e)}return!0},i.prototype.addListener=function(t,e){return l(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return l(this,t,e,!0)},i.prototype.once=function(t,e){return s(e),this.on(t,f(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,f(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,o,i,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return d(this,t,!0)},i.prototype.rawListeners=function(t){return d(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},215:(t,e)=>{e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=t[e+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+t[e+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[n+h]=255&a,h+=p,a/=256,l-=8);t[n+h-p]|=128*g}},951:function(t,e,n){var r;t=n.nmd(t),function(){var o,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,f=128,d=256,h=1/0,p=9007199254740991,g=NaN,y=4294967295,m=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",d]],v="[object Arguments]",b="[object Array]",w="[object Boolean]",_="[object Date]",E="[object Error]",S="[object Function]",A="[object GeneratorFunction]",I="[object Map]",T="[object Number]",R="[object Object]",x="[object Promise]",C="[object RegExp]",B="[object Set]",k="[object String]",L="[object Symbol]",O="[object WeakMap]",U="[object ArrayBuffer]",j="[object DataView]",N="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",W="[object Int16Array]",$="[object Int32Array]",D="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",H=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(J.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,it=RegExp(ot.source),at=/^\s+/,st=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,St=/['\n\r\u2028\u2029\\]/g,At="\\ud800-\\udfff",It="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Tt="\\u2700-\\u27bf",Rt="a-z\\xdf-\\xf6\\xf8-\\xff",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",Bt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="['’]",Lt="["+At+"]",Ot="["+Bt+"]",Ut="["+It+"]",jt="\\d+",Nt="["+Tt+"]",Mt="["+Rt+"]",Pt="[^"+At+Bt+jt+Tt+Rt+xt+"]",Wt="\\ud83c[\\udffb-\\udfff]",$t="[^"+At+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+xt+"]",qt="\\u200d",Ht="(?:"+Mt+"|"+Pt+")",Vt="(?:"+zt+"|"+Pt+")",Gt="(?:['’](?:d|ll|m|re|s|t|ve))?",Jt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Ut+"|"+Wt+")"+"?",Kt="["+Ct+"]?",Xt=Kt+Yt+("(?:"+qt+"(?:"+[$t,Dt,Ft].join("|")+")"+Kt+Yt+")*"),Zt="(?:"+[Nt,Dt,Ft].join("|")+")"+Xt,Qt="(?:"+[$t+Ut+"?",Ut,Dt,Ft,Lt].join("|")+")",te=RegExp(kt,"g"),ee=RegExp(Ut,"g"),ne=RegExp(Wt+"(?="+Wt+")|"+Qt+Xt,"g"),re=RegExp([zt+"?"+Mt+"+"+Gt+"(?="+[Ot,zt,"$"].join("|")+")",Vt+"+"+Jt+"(?="+[Ot,zt+Ht,"$"].join("|")+")",zt+"?"+Ht+"+"+Gt,zt+"+"+Jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt,Zt].join("|"),"g"),oe=RegExp("["+qt+At+It+Ct+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ue={};ue[N]=ue[M]=ue[P]=ue[W]=ue[$]=ue[D]=ue[F]=ue[z]=ue[q]=!0,ue[v]=ue[b]=ue[U]=ue[w]=ue[j]=ue[_]=ue[E]=ue[S]=ue[I]=ue[T]=ue[R]=ue[C]=ue[B]=ue[k]=ue[O]=!1;var le={};le[v]=le[b]=le[U]=le[j]=le[w]=le[_]=le[N]=le[M]=le[P]=le[W]=le[$]=le[I]=le[T]=le[R]=le[C]=le[B]=le[k]=le[L]=le[D]=le[F]=le[z]=le[q]=!0,le[E]=le[S]=le[O]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fe=parseFloat,de=parseInt,he="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,ge=he||pe||Function("return this")(),ye=e&&!e.nodeType&&e,me=ye&&t&&!t.nodeType&&t,ve=me&&me.exports===ye,be=ve&&he.process,we=function(){try{var t=me&&me.require&&me.require("util").types;return t||be&&be.binding&&be.binding("util")}catch(t){}}(),_e=we&&we.isArrayBuffer,Ee=we&&we.isDate,Se=we&&we.isMap,Ae=we&&we.isRegExp,Ie=we&&we.isSet,Te=we&&we.isTypedArray;function Re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xe(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Le(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function Oe(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Ue(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ne(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Me(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Pe(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function We(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var $e=Ge("length");function De(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function Fe(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function ze(t,e,n){return e==e?function(t,e,n){var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Fe(t,He,n)}function qe(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function He(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:g}function Ge(t){return function(e){return null==e?o:e[t]}}function Je(t){return function(e){return null==t?o:t[e]}}function Ye(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}function Ke(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ze(t){return t?t.slice(0,yn(t)+1).replace(at,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return je(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&ze(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}var on=Je({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),an=Je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ce[t]}function un(t){return oe.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function fn(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,i[o++]=n)}return i}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return un(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):$e(t)}function gn(t){return un(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function yn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var mn=Je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n,r=(e=null==e?ge:vn.defaults(ge.Object(),e,vn.pick(ge,ae))).Array,st=e.Date,At=e.Error,It=e.Function,Tt=e.Math,Rt=e.Object,xt=e.RegExp,Ct=e.String,Bt=e.TypeError,kt=r.prototype,Lt=It.prototype,Ot=Rt.prototype,Ut=e["__core-js_shared__"],jt=Lt.toString,Nt=Ot.hasOwnProperty,Mt=0,Pt=(n=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Wt=Ot.toString,$t=jt.call(Rt),Dt=ge._,Ft=xt("^"+jt.call(Nt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=ve?e.Buffer:o,qt=e.Symbol,Ht=e.Uint8Array,Vt=zt?zt.allocUnsafe:o,Gt=cn(Rt.getPrototypeOf,Rt),Jt=Rt.create,Yt=Ot.propertyIsEnumerable,Kt=kt.splice,Xt=qt?qt.isConcatSpreadable:o,Zt=qt?qt.iterator:o,Qt=qt?qt.toStringTag:o,ne=function(){try{var t=hi(Rt,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ce=st&&st.now!==ge.Date.now&&st.now,he=e.setTimeout!==ge.setTimeout&&e.setTimeout,pe=Tt.ceil,ye=Tt.floor,me=Rt.getOwnPropertySymbols,be=zt?zt.isBuffer:o,we=e.isFinite,$e=kt.join,Je=cn(Rt.keys,Rt),bn=Tt.max,wn=Tt.min,_n=st.now,En=e.parseInt,Sn=Tt.random,An=kt.reverse,In=hi(e,"DataView"),Tn=hi(e,"Map"),Rn=hi(e,"Promise"),xn=hi(e,"Set"),Cn=hi(e,"WeakMap"),Bn=hi(Rt,"create"),kn=Cn&&new Cn,Ln={},On=Wi(In),Un=Wi(Tn),jn=Wi(Rn),Nn=Wi(xn),Mn=Wi(Cn),Pn=qt?qt.prototype:o,Wn=Pn?Pn.valueOf:o,$n=Pn?Pn.toString:o;function Dn(t){if(ns(t)&&!Ha(t)&&!(t instanceof Hn)){if(t instanceof qn)return t;if(Nt.call(t,"__wrapped__"))return $i(t)}return new qn(t)}var Fn=function(){function t(){}return function(e){if(!es(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function zn(){}function qn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Jn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Xn(t,e){var n=Ha(t),r=!n&&qa(t),o=!n&&!r&&Ya(t),i=!n&&!r&&!o&&cs(t),a=n||r||o||i,s=a?Xe(t.length,Ct):[],u=s.length;for(var l in t)!e&&!Nt.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wi(l,u))||s.push(l);return s}function Zn(t){var e=t.length;return e?t[Yr(0,e-1)]:o}function Qn(t,e){return Ni(ko(t),ur(e,0,t.length))}function tr(t){return Ni(ko(t))}function er(t,e,n){(n!==o&&!Da(t[e],n)||n===o&&!(e in t))&&ar(t,e,n)}function nr(t,e,n){var r=t[e];Nt.call(t,e)&&Da(r,n)&&(n!==o||e in t)||ar(t,e,n)}function rr(t,e){for(var n=t.length;n--;)if(Da(t[n][0],e))return n;return-1}function or(t,e,n,r){return hr(t,(function(t,o,i){e(r,t,n(t),i)})),r}function ir(t,e){return t&&Lo(e,Ls(e),t)}function ar(t,e,n){"__proto__"==e&&ne?ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var n=-1,i=e.length,a=r(i),s=null==t;++n<i;)a[n]=s?o:Rs(t,e[n]);return a}function ur(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function lr(t,e,n,r,i,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!es(t))return t;var f=Ha(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return ko(t,s)}else{var d=yi(t),h=d==S||d==A;if(Ya(t))return Io(t,u);if(d==R||d==v||h&&!i){if(s=l||h?{}:vi(t),!u)return l?function(t,e){return Lo(t,gi(t),e)}(t,function(t,e){return t&&Lo(e,Os(e),t)}(s,t)):function(t,e){return Lo(t,pi(t),e)}(t,ir(s,t))}else{if(!le[d])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case U:return To(t);case w:case _:return new r(+t);case j:return function(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case M:case P:case W:case $:case D:case F:case z:case q:return Ro(t,n);case I:return new r;case T:case k:return new r(t);case C:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case B:return new r;case L:return o=t,Wn?Rt(Wn.call(o)):{}}var o}(t,d,u)}}a||(a=new Kn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,o){s.set(o,lr(r,e,n,o,t,a))}));var g=f?o:(c?l?ai:ii:l?Os:Ls)(t);return Ce(g||t,(function(r,o){g&&(r=t[o=r]),nr(s,o,lr(r,e,n,o,t,a))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Rt(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function fr(t,e,n){if("function"!=typeof t)throw new Bt(i);return Li((function(){t.apply(o,n)}),e)}function dr(t,e,n,r){var o=-1,i=Oe,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=je(e,Qe(n))),r?(i=Ue,a=!1):e.length>=200&&(i=en,a=!1,e=new Yn(e));t:for(;++o<s;){var c=t[o],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=l;d--;)if(e[d]===f)continue t;u.push(c)}else i(e,f,r)||u.push(c)}return u}Dn.templateSettings={escape:Z,evaluate:Q,interpolate:tt,variable:"",imports:{_:Dn}},Dn.prototype=zn.prototype,Dn.prototype.constructor=Dn,qn.prototype=Fn(zn.prototype),qn.prototype.constructor=qn,Hn.prototype=Fn(zn.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=Bn?Bn(null):{},this.size=0},Vn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vn.prototype.get=function(t){var e=this.__data__;if(Bn){var n=e[t];return n===a?o:n}return Nt.call(e,t)?e[t]:o},Vn.prototype.has=function(t){var e=this.__data__;return Bn?e[t]!==o:Nt.call(e,t)},Vn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bn&&e===o?a:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Kt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,n=rr(e,t);return n<0?o:e[n][1]},Gn.prototype.has=function(t){return rr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(Tn||Gn),string:new Vn}},Jn.prototype.delete=function(t){var e=fi(this,t).delete(t);return this.size-=e?1:0,e},Jn.prototype.get=function(t){return fi(this,t).get(t)},Jn.prototype.has=function(t){return fi(this,t).has(t)},Jn.prototype.set=function(t,e){var n=fi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,a),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jn(r)}return n.set(t,e),this.size=n.size,this};var hr=jo(_r),pr=jo(Er,!0);function gr(t,e){var n=!0;return hr(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function yr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(u===o?s==s&&!ls(s):n(s,u)))var u=s,l=a}return l}function mr(t,e){var n=[];return hr(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function vr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=bi),o||(o=[]);++i<a;){var s=t[i];e>0&&n(s)?e>1?vr(s,e-1,n,r,o):Ne(o,s):r||(o[o.length]=s)}return o}var br=No(),wr=No(!0);function _r(t,e){return t&&br(t,e,Ls)}function Er(t,e){return t&&wr(t,e,Ls)}function Sr(t,e){return Le(e,(function(e){return Za(t[e])}))}function Ar(t,e){for(var n=0,r=(e=_o(e,t)).length;null!=t&&n<r;)t=t[Pi(e[n++])];return n&&n==r?t:o}function Ir(t,e,n){var r=e(t);return Ha(t)?r:Ne(r,n(t))}function Tr(t){return null==t?t===o?"[object Undefined]":"[object Null]":Qt&&Qt in Rt(t)?function(t){var e=Nt.call(t,Qt),n=t[Qt];try{t[Qt]=o;var r=!0}catch(t){}var i=Wt.call(t);r&&(e?t[Qt]=n:delete t[Qt]);return i}(t):function(t){return Wt.call(t)}(t)}function Rr(t,e){return t>e}function xr(t,e){return null!=t&&Nt.call(t,e)}function Cr(t,e){return null!=t&&e in Rt(t)}function Br(t,e,n){for(var i=n?Ue:Oe,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,f=[];u--;){var d=t[u];u&&e&&(d=je(d,Qe(e))),c=wn(d.length,c),l[u]=!n&&(e||a>=120&&d.length>=120)?new Yn(u&&d):o}d=t[0];var h=-1,p=l[0];t:for(;++h<a&&f.length<c;){var g=d[h],y=e?e(g):g;if(g=n||0!==g?g:0,!(p?en(p,y):i(f,y,n))){for(u=s;--u;){var m=l[u];if(!(m?en(m,y):i(t[u],y,n)))continue t}p&&p.push(y),f.push(g)}}return f}function kr(t,e,n){var r=null==(t=Ci(t,e=_o(e,t)))?t:t[Pi(Xi(e))];return null==r?o:Re(r,t,n)}function Lr(t){return ns(t)&&Tr(t)==v}function Or(t,e,n,r,i){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var s=Ha(t),u=Ha(e),l=s?b:yi(t),c=u?b:yi(e),f=(l=l==v?R:l)==R,d=(c=c==v?R:c)==R,h=l==c;if(h&&Ya(t)){if(!Ya(e))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Kn),s||cs(t)?ri(t,e,n,r,i,a):function(t,e,n,r,o,i,a){switch(n){case j:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case U:return!(t.byteLength!=e.byteLength||!i(new Ht(t),new Ht(e)));case w:case _:case T:return Da(+t,+e);case E:return t.name==e.name&&t.message==e.message;case C:case k:return t==e+"";case I:var s=ln;case B:var u=1&r;if(s||(s=dn),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=ri(s(t),s(e),r,o,i,a);return a.delete(t),c;case L:if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(t,e,l,n,r,i,a);if(!(1&n)){var p=f&&Nt.call(t,"__wrapped__"),g=d&&Nt.call(e,"__wrapped__");if(p||g){var y=p?t.value():t,m=g?e.value():e;return a||(a=new Kn),i(y,m,n,r,a)}}if(!h)return!1;return a||(a=new Kn),function(t,e,n,r,i,a){var s=1&n,u=ii(t),l=u.length,c=ii(e),f=c.length;if(l!=f&&!s)return!1;var d=l;for(;d--;){var h=u[d];if(!(s?h in e:Nt.call(e,h)))return!1}var p=a.get(t),g=a.get(e);if(p&&g)return p==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);var m=s;for(;++d<l;){var v=t[h=u[d]],b=e[h];if(r)var w=s?r(b,v,h,e,t,a):r(v,b,h,t,e,a);if(!(w===o?v===b||i(v,b,n,r,a):w)){y=!1;break}m||(m="constructor"==h)}if(y&&!m){var _=t.constructor,E=e.constructor;_==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E||(y=!1)}return a.delete(t),a.delete(e),y}(t,e,n,r,i,a)}(t,e,n,r,Or,i))}function Ur(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=Rt(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var l=(u=n[i])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===o&&!(l in t))return!1}else{var d=new Kn;if(r)var h=r(c,f,l,t,e,d);if(!(h===o?Or(f,c,3,r,d):h))return!1}}return!0}function jr(t){return!(!es(t)||(e=t,Pt&&Pt in e))&&(Za(t)?Ft:vt).test(Wi(t));// removed by dead control flow
 var e; }function Nr(t){return"function"==typeof t?t:null==t?ou:"object"==typeof t?Ha(t)?Fr(t[0],t[1]):Dr(t):hu(t)}function Mr(t){if(!Ii(t))return Je(t);var e=[];for(var n in Rt(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pr(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Rt(t))e.push(n);return e}(t);var e=Ii(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}function Wr(t,e){return t<e}function $r(t,e){var n=-1,o=Ga(t)?r(t.length):[];return hr(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}function Dr(t){var e=di(t);return 1==e.length&&e[0][2]?Ri(e[0][0],e[0][1]):function(n){return n===t||Ur(n,t,e)}}function Fr(t,e){return Ei(t)&&Ti(e)?Ri(Pi(t),e):function(n){var r=Rs(n,t);return r===o&&r===e?xs(n,t):Or(e,r,3)}}function zr(t,e,n,r,i){t!==e&&br(e,(function(a,s){if(i||(i=new Kn),es(a))!function(t,e,n,r,i,a,s){var u=Bi(t,n),l=Bi(e,n),c=s.get(l);if(c)return void er(t,n,c);var f=a?a(u,l,n+"",t,e,s):o,d=f===o;if(d){var h=Ha(l),p=!h&&Ya(l),g=!h&&!p&&cs(l);f=l,h||p||g?Ha(u)?f=u:Ja(u)?f=ko(u):p?(d=!1,f=Io(l,!0)):g?(d=!1,f=Ro(l,!0)):f=[]:is(l)||qa(l)?(f=u,qa(u)?f=vs(u):es(u)&&!Za(u)||(f=vi(l))):d=!1}d&&(s.set(l,f),i(f,l,r,a,s),s.delete(l));er(t,n,f)}(t,e,s,n,zr,r,i);else{var u=r?r(Bi(t,s),a,s+"",t,e,i):o;u===o&&(u=a),er(t,s,u)}}),Os)}function qr(t,e){var n=t.length;if(n)return wi(e+=e<0?n:0,n)?t[e]:o}function Hr(t,e,n){e=e.length?je(e,(function(t){return Ha(t)?function(e){return Ar(e,1===t.length?t[0]:t)}:t})):[ou];var r=-1;e=je(e,Qe(ci()));var o=$r(t,(function(t,n,o){var i=je(e,(function(e){return e(t)}));return{criteria:i,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(o,(function(t,e){return function(t,e,n){var r=-1,o=t.criteria,i=e.criteria,a=o.length,s=n.length;for(;++r<a;){var u=xo(o[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Vr(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],s=Ar(t,a);n(s,a)&&to(i,_o(a,t),s)}return i}function Gr(t,e,n,r){var o=r?qe:ze,i=-1,a=e.length,s=t;for(t===e&&(e=ko(e)),n&&(s=je(t,Qe(n)));++i<a;)for(var u=0,l=e[i],c=n?n(l):l;(u=o(s,c,u,r))>-1;)s!==t&&Kt.call(s,u,1),Kt.call(t,u,1);return t}function Jr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;wi(o)?Kt.call(t,o,1):ho(t,o)}}return t}function Yr(t,e){return t+ye(Sn()*(e-t+1))}function Kr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Oi(xi(t,e,ou),t+"")}function Zr(t){return Zn(Ds(t))}function Qr(t,e){var n=Ds(t);return Ni(n,ur(e,0,n.length))}function to(t,e,n,r){if(!es(t))return t;for(var i=-1,a=(e=_o(e,t)).length,s=a-1,u=t;null!=u&&++i<a;){var l=Pi(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var f=u[l];(c=r?r(f,l,u):o)===o&&(c=es(f)?f:wi(e[i+1])?[]:{})}nr(u,l,c),u=u[l]}return t}var eo=kn?function(t,e){return kn.set(t,e),t}:ou,no=ne?function(t,e){return ne(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ou;function ro(t){return Ni(Ds(t))}function oo(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=r(i);++o<i;)a[o]=t[o+e];return a}function io(t,e){var n;return hr(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function ao(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return so(t,e,ou,n)}function so(t,e,n,r){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ls(e),c=e===o;i<a;){var f=ye((i+a)/2),d=n(t[f]),h=d!==o,p=null===d,g=d==d,y=ls(d);if(s)var m=r||g;else m=c?g&&(r||h):u?g&&h&&(r||!p):l?g&&h&&!p&&(r||!y):!p&&!y&&(r?d<=e:d<e);m?i=f+1:a=f}return wn(a,4294967294)}function uo(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Da(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function lo(t){return"number"==typeof t?t:ls(t)?g:+t}function co(t){if("string"==typeof t)return t;if(Ha(t))return je(t,co)+"";if(ls(t))return $n?$n.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fo(t,e,n){var r=-1,o=Oe,i=t.length,a=!0,s=[],u=s;if(n)a=!1,o=Ue;else if(i>=200){var l=e?null:Xo(t);if(l)return dn(l);a=!1,o=en,u=new Yn}else u=e?[]:s;t:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),s.push(c)}else o(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function ho(t,e){return null==(t=Ci(t,e=_o(e,t)))||delete t[Pi(Xi(e))]}function po(t,e,n,r){return to(t,e,n(Ar(t,e)),r)}function go(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?oo(t,r?0:i,r?i+1:o):oo(t,r?i+1:0,r?o:i)}function yo(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function mo(t,e,n){var o=t.length;if(o<2)return o?fo(t[0]):[];for(var i=-1,a=r(o);++i<o;)for(var s=t[i],u=-1;++u<o;)u!=i&&(a[i]=dr(a[i]||s,t[u],e,n));return fo(vr(a,1),e,n)}function vo(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function bo(t){return Ja(t)?t:[]}function wo(t){return"function"==typeof t?t:ou}function _o(t,e){return Ha(t)?t:Ei(t,e)?[t]:Mi(bs(t))}var Eo=Xr;function So(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:oo(t,e,n)}var Ao=oe||function(t){return ge.clearTimeout(t)};function Io(t,e){if(e)return t.slice();var n=t.length,r=Vt?Vt(n):new t.constructor(n);return t.copy(r),r}function To(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function Ro(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xo(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=ls(t),s=e!==o,u=null===e,l=e==e,c=ls(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!l)return-1}return 0}function Co(t,e,n,o){for(var i=-1,a=t.length,s=n.length,u=-1,l=e.length,c=bn(a-s,0),f=r(l+c),d=!o;++u<l;)f[u]=e[u];for(;++i<s;)(d||i<a)&&(f[n[i]]=t[i]);for(;c--;)f[u++]=t[i++];return f}function Bo(t,e,n,o){for(var i=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,f=bn(a-u,0),d=r(f+c),h=!o;++i<f;)d[i]=t[i];for(var p=i;++l<c;)d[p+l]=e[l];for(;++s<u;)(h||i<a)&&(d[p+n[s]]=t[i++]);return d}function ko(t,e){var n=-1,o=t.length;for(e||(e=r(o));++n<o;)e[n]=t[n];return e}function Lo(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):o;l===o&&(l=t[u]),i?ar(n,u,l):nr(n,u,l)}return n}function Oo(t,e){return function(n,r){var o=Ha(n)?xe:or,i=e?e():{};return o(n,t,ci(r,2),i)}}function Uo(t){return Xr((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&_i(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=Rt(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e}))}function jo(t,e){return function(n,r){if(null==n)return n;if(!Ga(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Rt(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function No(t){return function(e,n,r){for(var o=-1,i=Rt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}function Mo(t){return function(e){var n=un(e=bs(e))?gn(e):o,r=n?n[0]:e.charAt(0),i=n?So(n,1).join(""):e.slice(1);return r[t]()+i}}function Po(t){return function(e){return Me(Zs(qs(e).replace(te,"")),t,"")}}function Wo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function $o(t){return function(e,n,r){var i=Rt(e);if(!Ga(e)){var a=ci(n,3);e=Ls(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function Do(t){return oi((function(e){var n=e.length,r=n,a=qn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Bt(i);if(a&&!u&&"wrapper"==ui(s))var u=new qn([],!0)}for(r=u?r:n;++r<n;){var l=ui(s=e[r]),c="wrapper"==l?si(s):o;u=c&&Si(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ui(c[0])].apply(u,c[3]):1==s.length&&Si(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ha(r))return u.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}}))}function Fo(t,e,n,i,a,s,u,l,c,d){var h=e&f,p=1&e,g=2&e,y=24&e,m=512&e,v=g?o:Wo(t);return function f(){for(var b=arguments.length,w=r(b),_=b;_--;)w[_]=arguments[_];if(y)var E=li(f),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,E);if(i&&(w=Co(w,i,a,y)),s&&(w=Bo(w,s,u,y)),b-=S,y&&b<d){var A=fn(w,E);return Yo(t,e,Fo,f.placeholder,n,w,A,l,c,d-b)}var I=p?n:this,T=g?I[t]:t;return b=w.length,l?w=function(t,e){var n=t.length,r=wn(e.length,n),i=ko(t);for(;r--;){var a=e[r];t[r]=wi(a,n)?i[a]:o}return t}(w,l):m&&b>1&&w.reverse(),h&&c<b&&(w.length=c),this&&this!==ge&&this instanceof f&&(T=v||Wo(T)),T.apply(I,w)}}function zo(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,o,i){e(r,n(t),o,i)})),r}(n,t,e(r),{})}}function qo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=co(n),r=co(r)):(n=lo(n),r=lo(r)),i=t(n,r)}return i}}function Ho(t){return oi((function(e){return e=je(e,Qe(ci())),Xr((function(n){var r=this;return t(e,(function(t){return Re(t,r,n)}))}))}))}function Vo(t,e){var n=(e=e===o?" ":co(e)).length;if(n<2)return n?Kr(e,t):e;var r=Kr(e,pe(t/pn(e)));return un(e)?So(gn(r),0,t).join(""):r.slice(0,t)}function Go(t){return function(e,n,i){return i&&"number"!=typeof i&&_i(e,n,i)&&(n=i=o),e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n,o){for(var i=-1,a=bn(pe((e-t)/(n||1)),0),s=r(a);a--;)s[o?a:++i]=t,t+=n;return s}(e,n,i=i===o?e<n?1:-1:ps(i),t)}}function Jo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Yo(t,e,n,r,i,a,s,u,f,d){var h=8&e;e|=h?l:c,4&(e&=~(h?c:l))||(e&=-4);var p=[t,e,i,h?a:o,h?s:o,h?o:a,h?o:s,u,f,d],g=n.apply(o,p);return Si(t)&&ki(g,p),g.placeholder=r,Ui(g,t,e)}function Ko(t){var e=Tt[t];return function(t,n){if(t=ms(t),(n=null==n?0:wn(gs(n),292))&&we(t)){var r=(bs(t)+"e").split("e");return+((r=(bs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xo=xn&&1/dn(new xn([,-0]))[1]==h?function(t){return new xn(t)}:lu;function Zo(t){return function(e){var n=yi(e);return n==I?ln(e):n==B?hn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qo(t,e,n,a,h,p,g,y){var m=2&e;if(!m&&"function"!=typeof t)throw new Bt(i);var v=a?a.length:0;if(v||(e&=-97,a=h=o),g=g===o?g:bn(gs(g),0),y=y===o?y:gs(y),v-=h?h.length:0,e&c){var b=a,w=h;a=h=o}var _=m?o:si(t),E=[t,e,n,a,h,b,w,p,g,y];if(_&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=r==f&&8==n||r==f&&n==d&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Co(l,u,e[4]):u,t[4]=l?fn(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Bo(l,u,e[6]):u,t[6]=l?fn(t[5],s):e[6]);(u=e[7])&&(t[7]=u);r&f&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=o}(E,_),t=E[0],e=E[1],n=E[2],a=E[3],h=E[4],!(y=E[9]=E[9]===o?m?0:t.length:bn(E[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==u?function(t,e,n){var i=Wo(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=li(a);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:fn(u,c);return(s-=f.length)<n?Yo(t,e,Fo,a.placeholder,o,u,f,o,o,n-s):Re(this&&this!==ge&&this instanceof a?i:t,this,u)}}(t,e,y):e!=l&&33!=e||h.length?Fo.apply(o,E):function(t,e,n,o){var i=1&e,a=Wo(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=o.length,f=r(c+u),d=this&&this!==ge&&this instanceof e?a:t;++l<c;)f[l]=o[l];for(;u--;)f[l++]=arguments[++s];return Re(d,i?n:this,f)}}(t,e,n,a);else var S=function(t,e,n){var r=1&e,o=Wo(t);return function e(){return(this&&this!==ge&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,n);return Ui((_?eo:ki)(S,E),t,e)}function ti(t,e,n,r){return t===o||Da(t,Ot[n])&&!Nt.call(r,n)?e:t}function ei(t,e,n,r,i,a){return es(t)&&es(e)&&(a.set(e,t),zr(t,e,o,ei,a),a.delete(e)),t}function ni(t){return is(t)?o:t}function ri(t,e,n,r,i,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),f=a.get(e);if(c&&f)return c==e&&f==t;var d=-1,h=!0,p=2&n?new Yn:o;for(a.set(t,e),a.set(e,t);++d<u;){var g=t[d],y=e[d];if(r)var m=s?r(y,g,d,e,t,a):r(g,y,d,t,e,a);if(m!==o){if(m)continue;h=!1;break}if(p){if(!We(e,(function(t,e){if(!en(p,e)&&(g===t||i(g,t,n,r,a)))return p.push(e)}))){h=!1;break}}else if(g!==y&&!i(g,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function oi(t){return Oi(xi(t,o,Vi),t+"")}function ii(t){return Ir(t,Ls,pi)}function ai(t){return Ir(t,Os,gi)}var si=kn?function(t){return kn.get(t)}:lu;function ui(t){for(var e=t.name+"",n=Ln[e],r=Nt.call(Ln,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function li(t){return(Nt.call(Dn,"placeholder")?Dn:t).placeholder}function ci(){var t=Dn.iteratee||iu;return t=t===iu?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function fi(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function di(t){for(var e=Ls(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Ti(o)]}return e}function hi(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return jr(n)?n:o}var pi=me?function(t){return null==t?[]:(t=Rt(t),Le(me(t),(function(e){return Yt.call(t,e)})))}:yu,gi=me?function(t){for(var e=[];t;)Ne(e,pi(t)),t=Gt(t);return e}:yu,yi=Tr;function mi(t,e,n){for(var r=-1,o=(e=_o(e,t)).length,i=!1;++r<o;){var a=Pi(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ts(o)&&wi(a,o)&&(Ha(t)||qa(t))}function vi(t){return"function"!=typeof t.constructor||Ii(t)?{}:Fn(Gt(t))}function bi(t){return Ha(t)||qa(t)||!!(Xt&&t&&t[Xt])}function wi(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function _i(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Ga(n)&&wi(e,n.length):"string"==r&&e in n)&&Da(n[e],t)}function Ei(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Rt(e))}function Si(t){var e=ui(t),n=Dn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=si(n);return!!r&&t===r[0]}(In&&yi(new In(new ArrayBuffer(1)))!=j||Tn&&yi(new Tn)!=I||Rn&&yi(Rn.resolve())!=x||xn&&yi(new xn)!=B||Cn&&yi(new Cn)!=O)&&(yi=function(t){var e=Tr(t),n=e==R?t.constructor:o,r=n?Wi(n):"";if(r)switch(r){case On:return j;case Un:return I;case jn:return x;case Nn:return B;case Mn:return O}return e});var Ai=Ut?Za:mu;function Ii(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function Ti(t){return t==t&&!es(t)}function Ri(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in Rt(n)))}}function xi(t,e,n){return e=bn(e===o?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=bn(o.length-e,0),s=r(a);++i<a;)s[i]=o[e+i];i=-1;for(var u=r(e+1);++i<e;)u[i]=o[i];return u[e]=n(s),Re(t,this,u)}}function Ci(t,e){return e.length<2?t:Ar(t,oo(e,0,-1))}function Bi(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ki=ji(eo),Li=he||function(t,e){return ge.setTimeout(t,e)},Oi=ji(no);function Ui(t,e,n){var r=e+"";return Oi(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(m,(function(n){var r="_."+n[0];e&n[1]&&!Oe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ct):[]}(r),n)))}function ji(t){var e=0,n=0;return function(){var r=_n(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ni(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=Yr(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Mi=function(t){var e=ja(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,o){e.push(r?o.replace(ht,"$1"):n||t)})),e}));function Pi(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Wi(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $i(t){if(t instanceof Hn)return t.clone();var e=new qn(t.__wrapped__,t.__chain__);return e.__actions__=ko(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Di=Xr((function(t,e){return Ja(t)?dr(t,vr(e,1,Ja,!0)):[]})),Fi=Xr((function(t,e){var n=Xi(e);return Ja(n)&&(n=o),Ja(t)?dr(t,vr(e,1,Ja,!0),ci(n,2)):[]})),zi=Xr((function(t,e){var n=Xi(e);return Ja(n)&&(n=o),Ja(t)?dr(t,vr(e,1,Ja,!0),o,n):[]}));function qi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=bn(r+o,0)),Fe(t,ci(e,3),o)}function Hi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?bn(r+i,0):wn(i,r-1)),Fe(t,ci(e,3),i,!0)}function Vi(t){return(null==t?0:t.length)?vr(t,1):[]}function Gi(t){return t&&t.length?t[0]:o}var Ji=Xr((function(t){var e=je(t,bo);return e.length&&e[0]===t[0]?Br(e):[]})),Yi=Xr((function(t){var e=Xi(t),n=je(t,bo);return e===Xi(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Br(n,ci(e,2)):[]})),Ki=Xr((function(t){var e=Xi(t),n=je(t,bo);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Br(n,o,e):[]}));function Xi(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Zi=Xr(Qi);function Qi(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var ta=oi((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Jr(t,je(e,(function(t){return wi(t,n)?+t:t})).sort(xo)),r}));function ea(t){return null==t?t:An.call(t)}var na=Xr((function(t){return fo(vr(t,1,Ja,!0))})),ra=Xr((function(t){var e=Xi(t);return Ja(e)&&(e=o),fo(vr(t,1,Ja,!0),ci(e,2))})),oa=Xr((function(t){var e=Xi(t);return e="function"==typeof e?e:o,fo(vr(t,1,Ja,!0),o,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=Le(t,(function(t){if(Ja(t))return e=bn(t.length,e),!0})),Xe(e,(function(e){return je(t,Ge(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:je(n,(function(t){return Re(e,o,t)}))}var sa=Xr((function(t,e){return Ja(t)?dr(t,e):[]})),ua=Xr((function(t){return mo(Le(t,Ja))})),la=Xr((function(t){var e=Xi(t);return Ja(e)&&(e=o),mo(Le(t,Ja),ci(e,2))})),ca=Xr((function(t){var e=Xi(t);return e="function"==typeof e?e:o,mo(Le(t,Ja),o,e)})),fa=Xr(ia);var da=Xr((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,aa(t,n)}));function ha(t){var e=Dn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=oi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&wi(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[i],thisArg:o}),new qn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));var ya=Oo((function(t,e,n){Nt.call(t,n)?++t[n]:ar(t,n,1)}));var ma=$o(qi),va=$o(Hi);function ba(t,e){return(Ha(t)?Ce:hr)(t,ci(e,3))}function wa(t,e){return(Ha(t)?Be:pr)(t,ci(e,3))}var _a=Oo((function(t,e,n){Nt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var Ea=Xr((function(t,e,n){var o=-1,i="function"==typeof e,a=Ga(t)?r(t.length):[];return hr(t,(function(t){a[++o]=i?Re(e,t,n):kr(t,e,n)})),a})),Sa=Oo((function(t,e,n){ar(t,n,e)}));function Aa(t,e){return(Ha(t)?je:$r)(t,ci(e,3))}var Ia=Oo((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ta=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_i(t,e[0],e[1])?e=[]:n>2&&_i(e[0],e[1],e[2])&&(e=[e[0]]),Hr(t,vr(e,1),[])})),Ra=ce||function(){return ge.Date.now()};function xa(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Qo(t,f,o,o,o,o,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new Bt(i);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ba=Xr((function(t,e,n){var r=1;if(n.length){var o=fn(n,li(Ba));r|=l}return Qo(t,r,e,n,o)})),ka=Xr((function(t,e,n){var r=3;if(n.length){var o=fn(n,li(ka));r|=l}return Qo(e,r,t,n,o)}));function La(t,e,n){var r,a,s,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof t)throw new Bt(i);function g(e){var n=r,i=a;return r=a=o,f=e,u=t.apply(i,n)}function y(t){var n=t-c;return c===o||n>=e||n<0||h&&t-f>=s}function m(){var t=Ra();if(y(t))return v(t);l=Li(m,function(t){var n=e-(t-c);return h?wn(n,s-(t-f)):n}(t))}function v(t){return l=o,p&&r?g(t):(r=a=o,u)}function b(){var t=Ra(),n=y(t);if(r=arguments,a=this,c=t,n){if(l===o)return function(t){return f=t,l=Li(m,e),d?g(t):u}(c);if(h)return Ao(l),l=Li(m,e),g(c)}return l===o&&(l=Li(m,e)),u}return e=ms(e)||0,es(n)&&(d=!!n.leading,s=(h="maxWait"in n)?bn(ms(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==o&&Ao(l),f=0,r=c=a=l=o},b.flush=function(){return l===o?u:v(Ra())},b}var Oa=Xr((function(t,e){return fr(t,1,e)})),Ua=Xr((function(t,e,n){return fr(t,ms(e)||0,n)}));function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Bt(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ja.Cache||Jn),n}function Na(t){if("function"!=typeof t)throw new Bt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Jn;var Ma=Eo((function(t,e){var n=(e=1==e.length&&Ha(e[0])?je(e[0],Qe(ci())):je(vr(e,1),Qe(ci()))).length;return Xr((function(r){for(var o=-1,i=wn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return Re(t,this,r)}))})),Pa=Xr((function(t,e){var n=fn(e,li(Pa));return Qo(t,l,o,e,n)})),Wa=Xr((function(t,e){var n=fn(e,li(Wa));return Qo(t,c,o,e,n)})),$a=oi((function(t,e){return Qo(t,d,o,o,o,e)}));function Da(t,e){return t===e||t!=t&&e!=e}var Fa=Jo(Rr),za=Jo((function(t,e){return t>=e})),qa=Lr(function(){return arguments}())?Lr:function(t){return ns(t)&&Nt.call(t,"callee")&&!Yt.call(t,"callee")},Ha=r.isArray,Va=_e?Qe(_e):function(t){return ns(t)&&Tr(t)==U};function Ga(t){return null!=t&&ts(t.length)&&!Za(t)}function Ja(t){return ns(t)&&Ga(t)}var Ya=be||mu,Ka=Ee?Qe(Ee):function(t){return ns(t)&&Tr(t)==_};function Xa(t){if(!ns(t))return!1;var e=Tr(t);return e==E||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Za(t){if(!es(t))return!1;var e=Tr(t);return e==S||e==A||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=Se?Qe(Se):function(t){return ns(t)&&yi(t)==I};function os(t){return"number"==typeof t||ns(t)&&Tr(t)==T}function is(t){if(!ns(t)||Tr(t)!=R)return!1;var e=Gt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==$t}var as=Ae?Qe(Ae):function(t){return ns(t)&&Tr(t)==C};var ss=Ie?Qe(Ie):function(t){return ns(t)&&yi(t)==B};function us(t){return"string"==typeof t||!Ha(t)&&ns(t)&&Tr(t)==k}function ls(t){return"symbol"==typeof t||ns(t)&&Tr(t)==L}var cs=Te?Qe(Te):function(t){return ns(t)&&ts(t.length)&&!!ue[Tr(t)]};var fs=Jo(Wr),ds=Jo((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(Ga(t))return us(t)?gn(t):ko(t);if(Zt&&t[Zt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Zt]());var e=yi(t);return(e==I?ln:e==B?dn:Ds)(t)}function ps(t){return t?(t=ms(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ys(t){return t?ur(gs(t),0,y):0}function ms(t){if("number"==typeof t)return t;if(ls(t))return g;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ze(t);var n=mt.test(t);return n||bt.test(t)?de(t.slice(2),n?2:8):yt.test(t)?g:+t}function vs(t){return Lo(t,Os(t))}function bs(t){return null==t?"":co(t)}var ws=Uo((function(t,e){if(Ii(e)||Ga(e))Lo(e,Ls(e),t);else for(var n in e)Nt.call(e,n)&&nr(t,n,e[n])})),_s=Uo((function(t,e){Lo(e,Os(e),t)})),Es=Uo((function(t,e,n,r){Lo(e,Os(e),t,r)})),Ss=Uo((function(t,e,n,r){Lo(e,Ls(e),t,r)})),As=oi(sr);var Is=Xr((function(t,e){t=Rt(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&_i(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=Os(a),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===o||Da(f,Ot[c])&&!Nt.call(t,c))&&(t[c]=a[c])}return t})),Ts=Xr((function(t){return t.push(o,ei),Re(js,o,t)}));function Rs(t,e,n){var r=null==t?o:Ar(t,e);return r===o?n:r}function xs(t,e){return null!=t&&mi(t,e,Cr)}var Cs=zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),t[e]=n}),eu(ou)),Bs=zo((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Wt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),ci),ks=Xr(kr);function Ls(t){return Ga(t)?Xn(t):Mr(t)}function Os(t){return Ga(t)?Xn(t,!0):Pr(t)}var Us=Uo((function(t,e,n){zr(t,e,n)})),js=Uo((function(t,e,n,r){zr(t,e,n,r)})),Ns=oi((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=_o(e,t),r||(r=e.length>1),e})),Lo(t,ai(t),n),r&&(n=lr(n,7,ni));for(var o=e.length;o--;)ho(n,e[o]);return n}));var Ms=oi((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return xs(t,n)}))}(t,e)}));function Ps(t,e){if(null==t)return{};var n=je(ai(t),(function(t){return[t]}));return e=ci(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Zo(Ls),$s=Zo(Os);function Ds(t){return null==t?[]:tn(t,Ls(t))}var Fs=Po((function(t,e,n){return e=e.toLowerCase(),t+(n?zs(e):e)}));function zs(t){return Xs(bs(t).toLowerCase())}function qs(t){return(t=bs(t))&&t.replace(_t,on).replace(ee,"")}var Hs=Po((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Vs=Po((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Gs=Mo("toLowerCase");var Js=Po((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ys=Po((function(t,e,n){return t+(n?" ":"")+Xs(e)}));var Ks=Po((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Mo("toUpperCase");function Zs(t,e,n){return t=bs(t),(e=n?o:e)===o?function(t){return ie.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ft)||[]}(t):t.match(e)||[]}var Qs=Xr((function(t,e){try{return Re(t,o,e)}catch(t){return Xa(t)?t:new At(t)}})),tu=oi((function(t,e){return Ce(e,(function(e){e=Pi(e),ar(t,e,Ba(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Do(),ru=Do(!0);function ou(t){return t}function iu(t){return Nr("function"==typeof t?t:lr(t,1))}var au=Xr((function(t,e){return function(n){return kr(n,t,e)}})),su=Xr((function(t,e){return function(n){return kr(t,n,e)}}));function uu(t,e,n){var r=Ls(e),o=Sr(e,r);null!=n||es(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Sr(e,Ls(e)));var i=!(es(n)&&"chain"in n&&!n.chain),a=Za(t);return Ce(o,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__);return(n.__actions__=ko(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function lu(){}var cu=Ho(je),fu=Ho(ke),du=Ho(We);function hu(t){return Ei(t)?Ge(Pi(t)):function(t){return function(e){return Ar(e,t)}}(t)}var pu=Go(),gu=Go(!0);function yu(){return[]}function mu(){return!1}var vu=qo((function(t,e){return t+e}),0),bu=Ko("ceil"),wu=qo((function(t,e){return t/e}),1),_u=Ko("floor");var Eu,Su=qo((function(t,e){return t*e}),1),Au=Ko("round"),Iu=qo((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Bt(i);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=xa,Dn.assign=ws,Dn.assignIn=_s,Dn.assignInWith=Es,Dn.assignWith=Ss,Dn.at=As,Dn.before=Ca,Dn.bind=Ba,Dn.bindAll=tu,Dn.bindKey=ka,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},Dn.chain=ha,Dn.chunk=function(t,e,n){e=(n?_i(t,e,n):e===o)?1:bn(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,u=r(pe(i/e));a<i;)u[s++]=oo(t,a,a+=e);return u},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Ne(Ha(n)?ko(n):[n],vr(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=ci();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Bt(i);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var o=t[r];if(Re(o[0],this,n))return Re(o[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Ls(t);return function(n){return cr(n,t,e)}}(lr(t,1))},Dn.constant=eu,Dn.countBy=ya,Dn.create=function(t,e){var n=Fn(t);return null==e?n:ir(n,e)},Dn.curry=function t(e,n,r){var i=Qo(e,8,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Dn.curryRight=function t(e,n,r){var i=Qo(e,u,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Dn.debounce=La,Dn.defaults=Is,Dn.defaultsDeep=Ts,Dn.defer=Oa,Dn.delay=Ua,Dn.difference=Di,Dn.differenceBy=Fi,Dn.differenceWith=zi,Dn.drop=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,(e=n||e===o?1:gs(e))<0?0:e,r):[]},Dn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,0,(e=r-(e=n||e===o?1:gs(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!0):[]},Dn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&_i(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ys(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Dn.filter=function(t,e){return(Ha(t)?Le:mr)(t,ci(e,3))},Dn.flatMap=function(t,e){return vr(Aa(t,e),1)},Dn.flatMapDeep=function(t,e){return vr(Aa(t,e),h)},Dn.flatMapDepth=function(t,e,n){return n=n===o?1:gs(n),vr(Aa(t,e),n)},Dn.flatten=Vi,Dn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,h):[]},Dn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===o?1:gs(e)):[]},Dn.flip=function(t){return Qo(t,512)},Dn.flow=nu,Dn.flowRight=ru,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},Dn.functions=function(t){return null==t?[]:Sr(t,Ls(t))},Dn.functionsIn=function(t){return null==t?[]:Sr(t,Os(t))},Dn.groupBy=_a,Dn.initial=function(t){return(null==t?0:t.length)?oo(t,0,-1):[]},Dn.intersection=Ji,Dn.intersectionBy=Yi,Dn.intersectionWith=Ki,Dn.invert=Cs,Dn.invertBy=Bs,Dn.invokeMap=Ea,Dn.iteratee=iu,Dn.keyBy=Sa,Dn.keys=Ls,Dn.keysIn=Os,Dn.map=Aa,Dn.mapKeys=function(t,e){var n={};return e=ci(e,3),_r(t,(function(t,r,o){ar(n,e(t,r,o),t)})),n},Dn.mapValues=function(t,e){var n={};return e=ci(e,3),_r(t,(function(t,r,o){ar(n,r,e(t,r,o))})),n},Dn.matches=function(t){return Dr(lr(t,1))},Dn.matchesProperty=function(t,e){return Fr(t,lr(e,1))},Dn.memoize=ja,Dn.merge=Us,Dn.mergeWith=js,Dn.method=au,Dn.methodOf=su,Dn.mixin=uu,Dn.negate=Na,Dn.nthArg=function(t){return t=gs(t),Xr((function(e){return qr(e,t)}))},Dn.omit=Ns,Dn.omitBy=function(t,e){return Ps(t,Na(ci(e)))},Dn.once=function(t){return Ca(2,t)},Dn.orderBy=function(t,e,n,r){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=r?o:n)||(n=null==n?[]:[n]),Hr(t,e,n))},Dn.over=cu,Dn.overArgs=Ma,Dn.overEvery=fu,Dn.overSome=du,Dn.partial=Pa,Dn.partialRight=Wa,Dn.partition=Ia,Dn.pick=Ms,Dn.pickBy=Ps,Dn.property=hu,Dn.propertyOf=function(t){return function(e){return null==t?o:Ar(t,e)}},Dn.pull=Zi,Dn.pullAll=Qi,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,ci(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,o,n):t},Dn.pullAt=ta,Dn.range=pu,Dn.rangeRight=gu,Dn.rearg=$a,Dn.reject=function(t,e){return(Ha(t)?Le:mr)(t,Na(ci(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ci(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Jr(t,o),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Bt(i);return Xr(t,e=e===o?e:gs(e))},Dn.reverse=ea,Dn.sampleSize=function(t,e,n){return e=(n?_i(t,e,n):e===o)?1:gs(e),(Ha(t)?Qn:Qr)(t,e)},Dn.set=function(t,e,n){return null==t?t:to(t,e,n)},Dn.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:to(t,e,n,r)},Dn.shuffle=function(t){return(Ha(t)?tr:ro)(t)},Dn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&_i(t,e,n)?(e=0,n=r):(e=null==e?0:gs(e),n=n===o?r:gs(n)),oo(t,e,n)):[]},Dn.sortBy=Ta,Dn.sortedUniq=function(t){return t&&t.length?uo(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?uo(t,ci(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&_i(t,e,n)&&(e=n=o),(n=n===o?y:n>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=co(e))&&un(t)?So(gn(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Bt(i);return e=null==e?0:bn(gs(e),0),Xr((function(n){var r=n[e],o=So(n,0,e);return r&&Ne(o,r),Re(t,this,o)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?oo(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?oo(t,0,(e=n||e===o?1:gs(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?oo(t,(e=r-(e=n||e===o?1:gs(e)))<0?0:e,r):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?go(t,ci(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?go(t,ci(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Bt(i);return es(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),La(t,e,{leading:r,maxWait:e,trailing:o})},Dn.thru=pa,Dn.toArray=hs,Dn.toPairs=Ws,Dn.toPairsIn=$s,Dn.toPath=function(t){return Ha(t)?je(t,Pi):ls(t)?[t]:ko(Mi(bs(t)))},Dn.toPlainObject=vs,Dn.transform=function(t,e,n){var r=Ha(t),o=r||Ya(t)||cs(t);if(e=ci(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:es(t)&&Za(i)?Fn(Gt(t)):{}}return(o?Ce:_r)(t,(function(t,r,o){return e(n,t,r,o)})),n},Dn.unary=function(t){return xa(t,1)},Dn.union=na,Dn.unionBy=ra,Dn.unionWith=oa,Dn.uniq=function(t){return t&&t.length?fo(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?fo(t,ci(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?fo(t,o,e):[]},Dn.unset=function(t,e){return null==t||ho(t,e)},Dn.unzip=ia,Dn.unzipWith=aa,Dn.update=function(t,e,n){return null==t?t:po(t,e,wo(n))},Dn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:po(t,e,wo(n),r)},Dn.values=Ds,Dn.valuesIn=function(t){return null==t?[]:tn(t,Os(t))},Dn.without=sa,Dn.words=Zs,Dn.wrap=function(t,e){return Pa(wo(e),t)},Dn.xor=ua,Dn.xorBy=la,Dn.xorWith=ca,Dn.zip=fa,Dn.zipObject=function(t,e){return vo(t||[],e||[],nr)},Dn.zipObjectDeep=function(t,e){return vo(t||[],e||[],to)},Dn.zipWith=da,Dn.entries=Ws,Dn.entriesIn=$s,Dn.extend=_s,Dn.extendWith=Es,uu(Dn,Dn),Dn.add=vu,Dn.attempt=Qs,Dn.camelCase=Fs,Dn.capitalize=zs,Dn.ceil=bu,Dn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=ms(n))==n?n:0),e!==o&&(e=(e=ms(e))==e?e:0),ur(ms(t),e,n)},Dn.clone=function(t){return lr(t,4)},Dn.cloneDeep=function(t){return lr(t,5)},Dn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:o)},Dn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:o)},Dn.conformsTo=function(t,e){return null==e||cr(t,e,Ls(e))},Dn.deburr=qs,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=wu,Dn.endsWith=function(t,e,n){t=bs(t),e=co(e);var r=t.length,i=n=n===o?r:ur(gs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Dn.eq=Da,Dn.escape=function(t){return(t=bs(t))&&X.test(t)?t.replace(Y,an):t},Dn.escapeRegExp=function(t){return(t=bs(t))&&it.test(t)?t.replace(ot,"\\$&"):t},Dn.every=function(t,e,n){var r=Ha(t)?ke:gr;return n&&_i(t,e,n)&&(e=o),r(t,ci(e,3))},Dn.find=ma,Dn.findIndex=qi,Dn.findKey=function(t,e){return De(t,ci(e,3),_r)},Dn.findLast=va,Dn.findLastIndex=Hi,Dn.findLastKey=function(t,e){return De(t,ci(e,3),Er)},Dn.floor=_u,Dn.forEach=ba,Dn.forEachRight=wa,Dn.forIn=function(t,e){return null==t?t:br(t,ci(e,3),Os)},Dn.forInRight=function(t,e){return null==t?t:wr(t,ci(e,3),Os)},Dn.forOwn=function(t,e){return t&&_r(t,ci(e,3))},Dn.forOwnRight=function(t,e){return t&&Er(t,ci(e,3))},Dn.get=Rs,Dn.gt=Fa,Dn.gte=za,Dn.has=function(t,e){return null!=t&&mi(t,e,xr)},Dn.hasIn=xs,Dn.head=Gi,Dn.identity=ou,Dn.includes=function(t,e,n,r){t=Ga(t)?t:Ds(t),n=n&&!r?gs(n):0;var o=t.length;return n<0&&(n=bn(o+n,0)),us(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&ze(t,e,n)>-1},Dn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=bn(r+o,0)),ze(t,e,o)},Dn.inRange=function(t,e,n){return e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=ms(t),e,n)},Dn.invoke=ks,Dn.isArguments=qa,Dn.isArray=Ha,Dn.isArrayBuffer=Va,Dn.isArrayLike=Ga,Dn.isArrayLikeObject=Ja,Dn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Tr(t)==w},Dn.isBuffer=Ya,Dn.isDate=Ka,Dn.isElement=function(t){return ns(t)&&1===t.nodeType&&!is(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Ga(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||cs(t)||qa(t)))return!t.length;var e=yi(t);if(e==I||e==B)return!t.size;if(Ii(t))return!Mr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Or(t,e)},Dn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?Or(t,e,o,n):!!r},Dn.isError=Xa,Dn.isFinite=function(t){return"number"==typeof t&&we(t)},Dn.isFunction=Za,Dn.isInteger=Qa,Dn.isLength=ts,Dn.isMap=rs,Dn.isMatch=function(t,e){return t===e||Ur(t,e,di(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,Ur(t,e,di(e),n)},Dn.isNaN=function(t){return os(t)&&t!=+t},Dn.isNative=function(t){if(Ai(t))throw new At("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jr(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=os,Dn.isObject=es,Dn.isObjectLike=ns,Dn.isPlainObject=is,Dn.isRegExp=as,Dn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=p},Dn.isSet=ss,Dn.isString=us,Dn.isSymbol=ls,Dn.isTypedArray=cs,Dn.isUndefined=function(t){return t===o},Dn.isWeakMap=function(t){return ns(t)&&yi(t)==O},Dn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Tr(t)},Dn.join=function(t,e){return null==t?"":$e.call(t,e)},Dn.kebabCase=Hs,Dn.last=Xi,Dn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?bn(r+i,0):wn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Fe(t,He,i,!0)},Dn.lowerCase=Vs,Dn.lowerFirst=Gs,Dn.lt=fs,Dn.lte=ds,Dn.max=function(t){return t&&t.length?yr(t,ou,Rr):o},Dn.maxBy=function(t,e){return t&&t.length?yr(t,ci(e,2),Rr):o},Dn.mean=function(t){return Ve(t,ou)},Dn.meanBy=function(t,e){return Ve(t,ci(e,2))},Dn.min=function(t){return t&&t.length?yr(t,ou,Wr):o},Dn.minBy=function(t,e){return t&&t.length?yr(t,ci(e,2),Wr):o},Dn.stubArray=yu,Dn.stubFalse=mu,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=Su,Dn.nth=function(t,e){return t&&t.length?qr(t,gs(e)):o},Dn.noConflict=function(){return ge._===this&&(ge._=Dt),this},Dn.noop=lu,Dn.now=Ra,Dn.pad=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Vo(ye(o),n)+t+Vo(pe(o),n)},Dn.padEnd=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?t+Vo(e-r,n):t},Dn.padStart=function(t,e,n){t=bs(t);var r=(e=gs(e))?pn(t):0;return e&&r<e?Vo(e-r,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),En(bs(t).replace(at,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&_i(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=ps(t),e===o?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Sn();return wn(t+i*(e-t+fe("1e-"+((i+"").length-1))),e)}return Yr(t,e)},Dn.reduce=function(t,e,n){var r=Ha(t)?Me:Ye,o=arguments.length<3;return r(t,ci(e,4),n,o,hr)},Dn.reduceRight=function(t,e,n){var r=Ha(t)?Pe:Ye,o=arguments.length<3;return r(t,ci(e,4),n,o,pr)},Dn.repeat=function(t,e,n){return e=(n?_i(t,e,n):e===o)?1:gs(e),Kr(bs(t),e)},Dn.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var r=-1,i=(e=_o(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[Pi(e[r])];a===o&&(r=i,a=n),t=Za(a)?a.call(t):a}return t},Dn.round=Au,Dn.runInContext=t,Dn.sample=function(t){return(Ha(t)?Zn:Zr)(t)},Dn.size=function(t){if(null==t)return 0;if(Ga(t))return us(t)?pn(t):t.length;var e=yi(t);return e==I||e==B?t.size:Mr(t).length},Dn.snakeCase=Js,Dn.some=function(t,e,n){var r=Ha(t)?We:io;return n&&_i(t,e,n)&&(e=o),r(t,ci(e,3))},Dn.sortedIndex=function(t,e){return ao(t,e)},Dn.sortedIndexBy=function(t,e,n){return so(t,e,ci(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ao(t,e);if(r<n&&Da(t[r],e))return r}return-1},Dn.sortedLastIndex=function(t,e){return ao(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return so(t,e,ci(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ao(t,e,!0)-1;if(Da(t[n],e))return n}return-1},Dn.startCase=Ys,Dn.startsWith=function(t,e,n){return t=bs(t),n=null==n?0:ur(gs(n),0,t.length),e=co(e),t.slice(n,n+e.length)==e},Dn.subtract=Iu,Dn.sum=function(t){return t&&t.length?Ke(t,ou):0},Dn.sumBy=function(t,e){return t&&t.length?Ke(t,ci(e,2)):0},Dn.template=function(t,e,n){var r=Dn.templateSettings;n&&_i(t,e,n)&&(e=o),t=bs(t),e=Es({},e,r,ti);var i,a,s=Es({},e.imports,r.imports,ti),u=Ls(s),l=tn(s,u),c=0,f=e.interpolate||Et,d="__p += '",h=xt((e.escape||Et).source+"|"+f.source+"|"+(f===tt?pt:Et).source+"|"+(e.evaluate||Et).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(h,(function(e,n,r,o,s,u){return r||(r=o),d+=t.slice(c,u).replace(St,sn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),d+="';\n";var g=Nt.call(e,"variable")&&e.variable;if(g){if(dt.test(g))throw new At("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(H,""):d).replace(V,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Qs((function(){return It(u,p+"return "+d).apply(o,l)}));if(y.source=d,Xa(y))throw y;return y},Dn.times=function(t,e){if((t=gs(t))<1||t>p)return[];var n=y,r=wn(t,y);e=ci(e),t-=y;for(var o=Xe(r,e);++n<t;)e(n);return o},Dn.toFinite=ps,Dn.toInteger=gs,Dn.toLength=ys,Dn.toLower=function(t){return bs(t).toLowerCase()},Dn.toNumber=ms,Dn.toSafeInteger=function(t){return t?ur(gs(t),-9007199254740991,p):0===t?t:0},Dn.toString=bs,Dn.toUpper=function(t){return bs(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=bs(t))&&(n||e===o))return Ze(t);if(!t||!(e=co(e)))return t;var r=gn(t),i=gn(e);return So(r,nn(r,i),rn(r,i)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=bs(t))&&(n||e===o))return t.slice(0,yn(t)+1);if(!t||!(e=co(e)))return t;var r=gn(t);return So(r,0,rn(r,gn(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=bs(t))&&(n||e===o))return t.replace(at,"");if(!t||!(e=co(e)))return t;var r=gn(t);return So(r,nn(r,gn(e))).join("")},Dn.truncate=function(t,e){var n=30,r="...";if(es(e)){var i="separator"in e?e.separator:i;n="length"in e?gs(e.length):n,r="omission"in e?co(e.omission):r}var a=(t=bs(t)).length;if(un(t)){var s=gn(t);a=s.length}if(n>=a)return t;var u=n-pn(r);if(u<1)return r;var l=s?So(s,0,u).join(""):t.slice(0,u);if(i===o)return l+r;if(s&&(u+=l.length-u),as(i)){if(t.slice(u).search(i)){var c,f=l;for(i.global||(i=xt(i.source,bs(gt.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;l=l.slice(0,d===o?u:d)}}else if(t.indexOf(co(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},Dn.unescape=function(t){return(t=bs(t))&&K.test(t)?t.replace(J,mn):t},Dn.uniqueId=function(t){var e=++Mt;return bs(t)+e},Dn.upperCase=Ks,Dn.upperFirst=Xs,Dn.each=ba,Dn.eachRight=wa,Dn.first=Gi,uu(Dn,(Eu={},_r(Dn,(function(t,e){Nt.call(Dn.prototype,e)||(Eu[e]=t)})),Eu),{chain:!1}),Dn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),Ce(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===o?1:bn(gs(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,y),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ci(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return kr(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Na(ci(t)))},Hn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(y)},_r(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Dn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(Dn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Hn,l=s[0],c=u||Ha(e),f=function(t){var e=i.apply(Dn,Ne([t],s));return r&&d?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,g=u&&!h;if(!a&&c){e=g?e:new Hn(this);var y=t.apply(e,s);return y.__actions__.push({func:pa,args:[f],thisArg:o}),new qn(y,d)}return p&&g?t.apply(this,s):(y=this.thru(f),p?r?y.value()[0]:y.value():y)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Ha(o)?o:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),_r(Hn.prototype,(function(t,e){var n=Dn[e];if(n){var r=n.name+"";Nt.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:e,func:n})}})),Ln[Fo(o,2).name]=[{name:"wrapper",func:o}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=ko(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ko(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ko(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),r=e<0,o=n?t.length:0,i=function(t,e,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=wn(u,this.__takeCount__);if(!n||!r&&o==u&&h==u)return yo(t,this.__actions__);var p=[];t:for(;u--&&d<h;){for(var g=-1,y=t[l+=e];++g<f;){var m=c[g],v=m.iteratee,b=m.type,w=v(y);if(2==b)y=w;else if(!w){if(1==b)continue t;break t}}p[d++]=y}return p},Dn.prototype.at=ga,Dn.prototype.chain=function(){return ha(this)},Dn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===o&&(this.__values__=hs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=$i(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:o}),new qn(e,this.__chain__)}return this.thru(ea)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return yo(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,Zt&&(Dn.prototype[Zt]=function(){return this}),Dn}();ge._=vn,(r=function(){return vn}.call(e,n,e,t))===o||(t.exports=r)}.call(this)},300:(t,e,n)=>{var r,o;t=n.nmd(t),function(e){e.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},e.runningInMainNodeJSModule=function(){return e.runningInNodeJS()&&n.c[n.s]===t},e.commonJSAvailable=function(){return"object"==typeof t.exports},e.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},e.runningInNodeChildProcess=function(){return e.runningInNodeJS()&&"function"==typeof process.send},e.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)},e.webWorkersAvailable=function(){return"function"==typeof Worker&&!e.runningInNullOrigin()&&(!e.runningInNodeJS()&&!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0))},e.log=function(t,e){void 0===e&&(e=!1),"object"==typeof console&&(console.log(t),e&&"object"==typeof document&&(document.body.innerHTML+=t+"<br/>"))},e.createErrorMessage=function(t,n){if(void 0===n&&(n="Unhandled exception"),null==t)return n;if(n+=": ","object"==typeof t.content){if(e.runningInNodeJS())return n+t.content.stack;var r=JSON.stringify(t.content);return"{}"!==r?n+r:n+t.content}return"string"==typeof t.content?n+t.content:n+t},e.printExceptionAndStackTraceToConsole=function(t,n){void 0===n&&(n="Unhandled exception"),e.log(e.createErrorMessage(t,n))},e.getGlobalObject=function(){return"object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:{}},e.toString=Object.prototype.toString,e.commonJSAvailable()&&(t.exports=e)}(o||(o={})),function(t){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(t,e){var n=function(t,e,n){return t<e?e:t>n?n:t};t|=0,e|=0,arguments.length<1&&(t=0),arguments.length<2&&(e=this.length),t<0&&(t=this.length+t),e<0&&(e=this.length+e),t=n(t,0,this.length);var r=(e=n(e,0,this.length))-t;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+t*this.BYTES_PER_ELEMENT,r)},n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],r=void 0;if("object"==typeof window?r=window:"object"==typeof self&&(r=self),void 0!==r)for(var o=0;o<n.length;o++)r[n[o]]&&(r[n[o]].prototype.subarray=e)}}(r||(r={})),function(t){var e=function(){function e(){}return e.compressAsync=function(e,n,r){var o=new t.Timer,i=new t.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof e)e=t.encodeUTF8(e);else if(null==e||!(e instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],u=function(e){if(e<a.length){var l=void 0;try{l=i.compressBlock(a[e])}catch(t){return void r(void 0,t)}s.push(l),o.getElapsedTime()<=20?u(e+1):(t.enqueueImmediate((function(){return u(e+1)})),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate((function(){var e;try{e=t.CompressionCommon.encodeCompressedBytes(c,n.outputEncoding)}catch(t){return void r(void 0,t)}t.enqueueImmediate((function(){return r(e)}))}))}};t.enqueueImmediate((function(){return u(0)}))},e.createCompressionStream=function(){var e=new t.Compressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(e.compressBlock(t.BufferTools.bufferToUint8Array(n)))}catch(t){return void r.emit("error",t)}r.push(a),i()},r},e}();t.AsyncCompressor=e}(o||(o={})),function(t){var e=function(){function e(){}return e.decompressAsync=function(e,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var o=new t.Timer;try{e=t.CompressionCommon.decodeCompressedBytes(e,n.inputEncoding)}catch(t){return void r(void 0,t)}var i=new t.Decompressor,a=t.ArrayTools.splitByteArray(e,n.blockSize),s=[],u=function(e){if(e<a.length){var l=void 0;try{l=i.decompressBlock(a[e])}catch(t){return void r(void 0,t)}s.push(l),o.getElapsedTime()<=20?u(e+1):(t.enqueueImmediate((function(){return u(e+1)})),o.restart())}else{var c=t.ArrayTools.concatUint8Arrays(s);t.enqueueImmediate((function(){var e;try{e=t.CompressionCommon.encodeDecompressedBytes(c,n.outputEncoding)}catch(t){return void r(void 0,t)}t.enqueueImmediate((function(){return r(e)}))}))}};t.enqueueImmediate((function(){return u(0)}))},e.createDecompressionStream=function(){var e=new t.Decompressor,r=new(n(99).Transform)({decodeStrings:!0,highWaterMark:65536});return r._transform=function(n,o,i){var a;try{a=t.BufferTools.uint8ArrayToBuffer(e.decompressBlock(t.BufferTools.bufferToUint8Array(n)))}catch(t){return void r.emit("error",t)}r.push(a),i()},r},e}();t.AsyncDecompressor=e}(o||(o={})),function(t){var e;!function(e){e.compressAsync=function(t,n,r){if("ByteArray"!=n.inputEncoding||t instanceof Uint8Array){var o={token:Math.random().toString(),type:"compress",data:t,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(t){var n=t.data;n&&n.token==o.token&&(e.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};e.globalWorker.addEventListener("message",i),e.globalWorker.postMessage(o,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},e.decompressAsync=function(t,n,r){var o={token:Math.random().toString(),type:"decompress",data:t,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(t){var n=t.data;n&&n.token==o.token&&(e.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};e.globalWorker.addEventListener("message",i),e.globalWorker.postMessage(o,[])},e.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",(function(e){var n=e.data;if("compress"==n.type){var r=void 0;try{r=t.compress(n.data,{outputEncoding:n.outputEncoding})}catch(e){return void self.postMessage({token:n.token,type:"error",error:t.createErrorMessage(e)},[])}(o={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if("decompress"==n.type){var o,i=void 0;try{i=t.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(e){return void self.postMessage({token:n.token,type:"error",error:t.createErrorMessage(e)},[])}(o={token:n.token,type:"decompressionResult",data:i,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}})),self.addEventListener("error",(function(e){t.log(t.createErrorMessage(e.error,"Unexpected LZUTF8 WebWorker exception"))})))},e.createGlobalWorkerIfNeeded=function(){if(e.globalWorker)return!0;if(!t.webWorkersAvailable())return!1;if(!e.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(e.scriptURI=n.getAttribute("src")||void 0)}return!!e.scriptURI&&(e.globalWorker=new Worker(e.scriptURI),!0)},e.terminate=function(){e.globalWorker&&(e.globalWorker.terminate(),e.globalWorker=void 0)}}(e=t.WebWorker||(t.WebWorker={})),e.installWebWorkerIfNeeded()}(o||(o={})),function(t){var e=function(){function t(t,e,n){this.container=t,this.startPosition=e,this.length=n}return t.prototype.get=function(t){return this.container[this.startPosition+t]},t.prototype.getInReversedOrder=function(t){return this.container[this.startPosition+this.length-1-t]},t.prototype.set=function(t,e){this.container[this.startPosition+t]=e},t}();t.ArraySegment=e}(o||(o={})),function(t){!function(t){t.copyElements=function(t,e,n,r,o){for(;o--;)n[r++]=t[e++]},t.zeroElements=function(t,e,n){for(;n--;)t[e++]=0},t.countNonzeroValuesInArray=function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&e++;return e},t.truncateStartingElements=function(t,e){if(t.length<=e)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=t.length-e,r=0;r<e;r++)t[r]=t[n+r];t.length=e},t.doubleByteArrayCapacity=function(t){var e=new Uint8Array(2*t.length);return e.set(t),e},t.concatUint8Arrays=function(t){for(var e=0,n=0,r=t;n<r.length;n++){e+=(u=r[n]).length}for(var o=new Uint8Array(e),i=0,a=0,s=t;a<s.length;a++){var u=s[a];o.set(u,i),i+=u.length}return o},t.splitByteArray=function(t,e){for(var n=[],r=0;r<t.length;){var o=Math.min(e,t.length-r);n.push(t.subarray(r,r+o)),r+=o}return n}}(t.ArrayTools||(t.ArrayTools={}))}(o||(o={})),function(t){!function(t){t.convertToUint8ArrayIfNeeded=function(e){return"function"==typeof Buffer&&Buffer.isBuffer(e)?t.bufferToUint8Array(e):e},t.uint8ArrayToBuffer=function(t){if(Buffer.prototype instanceof Uint8Array){var e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return Object.setPrototypeOf(e,Buffer.prototype),e}for(var n=t.length,r=new Buffer(n),o=0;o<n;o++)r[o]=t[o];return r},t.bufferToUint8Array=function(t){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t[r];return n}}(t.BufferTools||(t.BufferTools={}))}(o||(o={})),function(t){!function(e){e.getCroppedBuffer=function(t,e,n,r){void 0===r&&(r=0);var o=new Uint8Array(n+r);return o.set(t.subarray(e,e+n)),o},e.getCroppedAndAppendedByteArray=function(e,n,r,o){return t.ArrayTools.concatUint8Arrays([e.subarray(n,n+r),o])},e.detectCompressionSourceEncoding=function(t){if(null==t)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof t)return"String";if(t instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(t))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},e.encodeCompressedBytes=function(e,n){switch(n){case"ByteArray":return e;case"Buffer":return t.BufferTools.uint8ArrayToBuffer(e);case"Base64":return t.encodeBase64(e);case"BinaryString":return t.encodeBinaryString(e);case"StorageBinaryString":return t.encodeStorageBinaryString(e);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},e.decodeCompressedBytes=function(e,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=t.BufferTools.convertToUint8ArrayIfNeeded(e);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return t.decodeBase64(e);case"BinaryString":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return t.decodeBinaryString(e);case"StorageBinaryString":if("string"!=typeof e)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return t.decodeStorageBinaryString(e);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},e.encodeDecompressedBytes=function(e,n){switch(n){case"String":return t.decodeUTF8(e);case"ByteArray":return e;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return t.BufferTools.uint8ArrayToBuffer(e);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(t.CompressionCommon||(t.CompressionCommon={}))}(o||(o={})),function(t){var e;!function(e){var n,r=[];e.enqueueImmediate=function(t){r.push(t),1===r.length&&n()},e.initializeScheduler=function(){var e=function(){for(var e=0,n=r;e<n.length;e++){var o=n[e];try{o.call(void 0)}catch(e){t.printExceptionAndStackTraceToConsole(e,"enqueueImmediate exception")}}r.length=0};if(t.runningInNodeJS())n=function(){return setImmediate((function(){return e()}))};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var o,i="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",(function(t){t.data===i&&e()})),o=t.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(i,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var a=new MessageChannel;a.port1.onmessage=function(){return e()},n=function(){return a.port2.postMessage(0)}}else n=function(){return setTimeout((function(){return e()}),0)}},e.initializeScheduler()}(e=t.EventLoop||(t.EventLoop={})),t.enqueueImmediate=function(t){return e.enqueueImmediate(t)}}(o||(o={})),function(t){!function(t){t.override=function(e,n){return t.extend(e,n)},t.extend=function(t,e){if(null==t)throw new TypeError("obj is null or undefined");if("object"!=typeof t)throw new TypeError("obj is not an object");if(null==e&&(e={}),"object"!=typeof e)throw new TypeError("newProperties is not an object");if(null!=e)for(var n in e)t[n]=e[n];return t}}(t.ObjectTools||(t.ObjectTools={}))}(o||(o={})),function(t){t.getRandomIntegerInRange=function(t,e){return t+Math.floor(Math.random()*(e-t))},t.getRandomUTF16StringOfLength=function(e){for(var n="",r=0;r<e;r++){var o=void 0;do{o=t.getRandomIntegerInRange(0,1114112)}while(o>=55296&&o<=57343);n+=t.Encoding.CodePoint.decodeToString(o)}return n}}(o||(o={})),function(t){var e=function(){function t(t){void 0===t&&(t=1024),this.outputBufferCapacity=t,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return t.prototype.appendCharCode=function(t){this.outputBuffer[this.outputPosition++]=t,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},t.prototype.appendCharCodes=function(t){for(var e=0,n=t.length;e<n;e++)this.appendCharCode(t[e])},t.prototype.appendString=function(t){for(var e=0,n=t.length;e<n;e++)this.appendCharCode(t.charCodeAt(e))},t.prototype.appendCodePoint=function(t){if(t<=65535)this.appendCharCode(t);else{if(!(t<=1114111))throw new Error("appendCodePoint: A code point of ".concat(t," cannot be encoded in UTF-16"));this.appendCharCode(55296+(t-65536>>>10)),this.appendCharCode(56320+(t-65536&1023))}},t.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},t.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},t}();t.StringBuilder=e}(o||(o={})),function(t){var e=function(){function e(){this.restart()}return e.prototype.restart=function(){this.startTime=e.getTimestamp()},e.prototype.getElapsedTime=function(){return e.getTimestamp()-this.startTime},e.prototype.getElapsedTimeAndRestart=function(){var t=this.getElapsedTime();return this.restart(),t},e.prototype.logAndRestart=function(e,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),o="".concat(e,": ").concat(r.toFixed(3),"ms");return t.log(o,n),this.restart(),r},e.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},e.getMicrosecondTimestamp=function(){return Math.floor(1e3*e.getTimestamp())},e.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var t=0;this.timestampFunc=function(){var e=process.hrtime(),n=1e3*e[0]+e[1]/1e6;return t+n},t=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var e=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return e+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var r=Date.now()-performance.now();this.timestampFunc=function(){return r+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},e}();t.Timer=e}(o||(o={})),function(t){var e=function(){function e(e){void 0===e&&(e=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,e&&"function"==typeof Uint32Array?this.prefixHashTable=new t.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new t.CompressorSimpleHashTable(this.PrefixHashTableSize)}return e.prototype.compressBlock=function(e){if(null==e)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof e&&(e=t.encodeUTF8(e)),e=t.BufferTools.convertToUint8ArrayIfNeeded(e),this.compressUtf8Block(e)},e.prototype.compressUtf8Block=function(t){if(!t||0==t.length)return new Uint8Array(0);var e=this.cropAndAddNewBytesToInputBuffer(t),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(t.length),this.outputBufferPosition=0;for(var o=0,i=e;i<r;i++){var a=n[i],s=i<o;if(i>r-this.MinimumSequenceLength)s||this.outputRawByte(a);else{var u=this.getBucketIndexForPrefix(i);if(!s){var l=this.findLongestMatch(i,u);null!=l&&(this.outputPointerBytes(l.length,l.distance),o=i+l.length,s=!0)}s||this.outputRawByte(a);var c=this.inputBufferStreamOffset+i;this.prefixHashTable.addValueToBucket(u,c)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},e.prototype.findLongestMatch=function(t,e){var n=this.prefixHashTable.getArraySegmentForBucketIndex(e,this.reusableArraySegmentObject);if(null==n)return null;for(var r,o=this.inputBuffer,i=0,a=0;a<n.length;a++){var s=n.getInReversedOrder(a)-this.inputBufferStreamOffset,u=t-s,l=void 0;if(l=void 0===r?this.MinimumSequenceLength-1:r<128&&u>=128?i+(i>>>1):i,u>this.MaximumMatchDistance||l>=this.MaximumSequenceLength||t+l>=o.length)break;if(o[s+l]===o[t+l])for(var c=0;;c++){if(t+c===o.length||o[s+c]!==o[t+c]){c>l&&(r=u,i=c);break}if(c===this.MaximumSequenceLength)return{distance:u,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:i}:null},e.prototype.getBucketIndexForPrefix=function(t){return(7880599*this.inputBuffer[t]+39601*this.inputBuffer[t+1]+199*this.inputBuffer[t+2]+this.inputBuffer[t+3])%this.PrefixHashTableSize},e.prototype.outputPointerBytes=function(t,e){e<128?(this.outputRawByte(192|t),this.outputRawByte(e)):(this.outputRawByte(224|t),this.outputRawByte(e>>>8),this.outputRawByte(255&e))},e.prototype.outputRawByte=function(t){this.outputBuffer[this.outputBufferPosition++]=t},e.prototype.cropAndAddNewBytesToInputBuffer=function(e){if(void 0===this.inputBuffer)return this.inputBuffer=e,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=t.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,e),this.inputBufferStreamOffset+=r,n},e}();t.Compressor=e}(o||(o={})),function(t){var e=function(){function e(t){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*t),this.storage=new Uint32Array(2*t),this.storageIndex=1}return e.prototype.addValueToBucket=function(e,n){e<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,o=this.bucketLocators[e];if(0===o)o=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[e+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(o,r,this.maximumBucketCapacity/2));var i=o+r;0===this.storage[i]?(this.storage[i]=n,i===this.storageIndex&&(this.storageIndex+=r)):(t.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,r),o=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[e]=o,this.bucketLocators[e+1]=r},e.prototype.truncateBucketToNewerElements=function(e,n,r){var o=e+n-r;return t.ArrayTools.copyElements(this.storage,o,this.storage,e,r),t.ArrayTools.zeroElements(this.storage,e+r,n-r),r},e.prototype.compact=function(){var e=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<e.length;r+=2){var o=e[r+1];0!==o&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(r=0;r<e.length;r+=2){var i=e[r];if(0!==i){var a=this.bucketLocators[r],s=this.bucketLocators[r+1];t.ArrayTools.copyElements(n,i,this.storage,a,s)}}},e.prototype.getArraySegmentForBucketIndex=function(e,n){e<<=1;var r=this.bucketLocators[e];return 0===r?null:(void 0===n&&(n=new t.ArraySegment(this.storage,r,this.bucketLocators[e+1])),n)},e.prototype.getUsedBucketCount=function(){return Math.floor(t.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},e.prototype.getTotalElementCount=function(){for(var t=0,e=0;e<this.bucketLocators.length;e+=2)t+=this.bucketLocators[e+1];return t},e}();t.CompressorCustomHashTable=e}(o||(o={})),function(t){var e=function(){function e(t){this.maximumBucketCapacity=64,this.buckets=new Array(t)}return e.prototype.addValueToBucket=function(e,n){var r=this.buckets[e];void 0===r?this.buckets[e]=[n]:(r.length===this.maximumBucketCapacity-1&&t.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},e.prototype.getArraySegmentForBucketIndex=function(e,n){var r=this.buckets[e];return void 0===r?null:(void 0===n&&(n=new t.ArraySegment(r,0,r.length)),n)},e.prototype.getUsedBucketCount=function(){return t.ArrayTools.countNonzeroValuesInArray(this.buckets)},e.prototype.getTotalElementCount=function(){for(var t=0,e=0;e<this.buckets.length;e++)void 0!==this.buckets[e]&&(t+=this.buckets[e].length);return t},e}();t.CompressorSimpleHashTable=e}(o||(o={})),function(t){var e=function(){function e(){this.MaximumMatchDistance=32767,this.outputPosition=0}return e.prototype.decompressBlockToString=function(e){return e=t.BufferTools.convertToUint8ArrayIfNeeded(e),t.decodeUTF8(this.decompressBlock(e))},e.prototype.decompressBlock=function(e){this.inputBufferRemainder&&(e=t.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,e]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*e.length,1024)),r=0,o=e.length;r<o;r++){var i=e[r];if(i>>>6==3){var a=i>>>5;if(r==o-1||r==o-2&&7==a){this.inputBufferRemainder=e.subarray(r);break}if(e[r+1]>>>7==1)this.outputByte(i);else{var s=31&i,u=void 0;6==a?(u=e[r+1],r+=1):(u=e[r+1]<<8|e[r+2],r+=2);for(var l=this.outputPosition-u,c=0;c<s;c++)this.outputByte(this.outputBuffer[l+c])}}else this.outputByte(i)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),t.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},e.prototype.outputByte=function(e){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=t.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=e},e.prototype.cropOutputBufferToWindowAndInitialize=function(e){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(e),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=t.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,e),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},e.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var t=1;t<=4&&this.outputPosition-t>=0;t++){var e=this.outputBuffer[this.outputPosition-t];if(t<4&&e>>>3==30||t<3&&e>>>4==14||t<2&&e>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-t,this.outputPosition),void(this.outputPosition-=t)}},e}();t.Decompressor=e}(o||(o={})),function(t){!function(e){!function(e){var n=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]);e.encode=function(n){return n&&0!=n.length?t.runningInNodeJS()?t.BufferTools.uint8ArrayToBuffer(n).toString("base64"):e.encodeWithJS(n):""},e.decode=function(n){return n?t.runningInNodeJS()?t.BufferTools.bufferToUint8Array(Buffer.from(n,"base64")):e.decodeWithJS(n):new Uint8Array(0)},e.encodeWithJS=function(e,r){if(void 0===r&&(r=!0),!e||0==e.length)return"";for(var o,i=n,a=new t.StringBuilder,s=0,u=e.length;s<u;s+=3)s<=u-3?(o=e[s]<<16|e[s+1]<<8|e[s+2],a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),a.appendCharCode(i[63&o]),o=0):s===u-2?(o=e[s]<<16|e[s+1]<<8,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),r&&a.appendCharCode(61)):s===u-1&&(o=e[s]<<16,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),r&&(a.appendCharCode(61),a.appendCharCode(61)));return a.getOutputString()},e.decodeWithJS=function(t,e){if(!t||0==t.length)return new Uint8Array(0);var n=t.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?t+="==":3===n&&(t+="="),e||(e=new Uint8Array(t.length));for(var o=0,i=t.length,a=0;a<i;a+=4){var s=r[t.charCodeAt(a)]<<18|r[t.charCodeAt(a+1)]<<12|r[t.charCodeAt(a+2)]<<6|r[t.charCodeAt(a+3)];e[o++]=s>>>16&255,e[o++]=s>>>8&255,e[o++]=255&s}return 61==t.charCodeAt(i-1)&&o--,61==t.charCodeAt(i-2)&&o--,e.subarray(0,o)}}(e.Base64||(e.Base64={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(e){!function(e){e.encode=function(e){if(null==e)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===e.length)return"";for(var n=e.length,r=new t.StringBuilder,o=0,i=1,a=0;a<n;a+=2){var s=void 0;s=a==n-1?e[a]<<8:e[a]<<8|e[a+1],r.appendCharCode(o<<16-i|s>>>i),o=s&(1<<i)-1,15===i?(r.appendCharCode(o),o=0,i=1):i+=1,a>=n-2&&r.appendCharCode(o<<16-i)}return r.appendCharCode(32768|n%2),r.getOutputString()},e.decode=function(t){if("string"!=typeof t)throw new TypeError("BinaryString.decode: invalid input type");if(""==t)return new Uint8Array(0);for(var e=new Uint8Array(3*t.length),n=0,r=function(t){e[n++]=t>>>8,e[n++]=255&t},o=0,i=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);s>=32768?(32769==s&&n--,i=0):(0==i?o=s:(r(o<<i|s>>>15-i),o=s&(1<<15-i)-1),15==i?i=0:i+=1)}return e.subarray(0,n)}}(e.BinaryString||(e.BinaryString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(t){t.encodeFromString=function(t,e){var n=t.charCodeAt(e);if(n<55296||n>56319)return n;var r=t.charCodeAt(e+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},t.decodeToString=function(t){if(t<=65535)return String.fromCharCode(t);if(t<=1114111)return String.fromCharCode(55296+(t-65536>>>10),56320+(t-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(t," cannot be encoded in UTF-16"))}}(t.CodePoint||(t.CodePoint={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(t){var e=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];t.encode=function(t){for(var n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n.join(" ")}}(t.DecimalString||(t.DecimalString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(t){!function(e){e.encode=function(e){return t.BinaryString.encode(e).replace(/\0/g,"耂")},e.decode=function(e){return t.BinaryString.decode(e.replace(/\u8002/g,"\0"))}}(t.StorageBinaryString||(t.StorageBinaryString={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){!function(e){!function(n){var r,o;n.encode=function(e){return e&&0!=e.length?t.runningInNodeJS()?t.BufferTools.bufferToUint8Array(Buffer.from(e,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(e):n.encodeWithJS(e):new Uint8Array(0)},n.decode=function(e){return e&&0!=e.length?t.runningInNodeJS()?t.BufferTools.uint8ArrayToBuffer(e).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?o.decode(e):n.decodeWithJS(e):""},n.encodeWithJS=function(t,n){if(!t||0==t.length)return new Uint8Array(0);n||(n=new Uint8Array(4*t.length));for(var r=0,o=0;o<t.length;o++){var i=e.CodePoint.encodeFromString(t,o);if(i<=127)n[r++]=i;else if(i<=2047)n[r++]=192|i>>>6,n[r++]=128|63&i;else if(i<=65535)n[r++]=224|i>>>12,n[r++]=128|i>>>6&63,n[r++]=128|63&i;else{if(!(i<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|i>>>18,n[r++]=128|i>>>12&63,n[r++]=128|i>>>6&63,n[r++]=128|63&i,o++}}return n.subarray(0,r)},n.decodeWithJS=function(e,n,r){if(void 0===n&&(n=0),!e||0==e.length)return"";void 0===r&&(r=e.length);for(var o,i,a=new t.StringBuilder,s=n,u=r;s<u;){if((i=e[s])>>>7==0)o=i,s+=1;else if(i>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(31&i)<<6|63&e[s+1],s+=2}else if(i>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(15&i)<<12|(63&e[s+1])<<6|63&e[s+2],s+=3}else{if(i>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(7&i)<<18|(63&e[s+1])<<12|(63&e[s+2])<<6|63&e[s+3],s+=4}a.appendCodePoint(o)}return a.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),o=new TextDecoder("utf-8"),!0)}}(e.UTF8||(e.UTF8={}))}(t.Encoding||(t.Encoding={}))}(o||(o={})),function(t){t.compress=function(e,n){if(void 0===n&&(n={}),null==e)throw new TypeError("compress: undefined or null input received");var r=t.CompressionCommon.detectCompressionSourceEncoding(e);n=t.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var o=(new t.Compressor).compressBlock(e);return t.CompressionCommon.encodeCompressedBytes(o,n.outputEncoding)},t.decompress=function(e,n){if(void 0===n&&(n={}),null==e)throw new TypeError("decompress: undefined or null input received");n=t.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=t.CompressionCommon.decodeCompressedBytes(e,n.inputEncoding),o=(new t.Decompressor).decompressBlock(r);return t.CompressionCommon.encodeDecompressedBytes(o,n.outputEncoding)},t.compressAsync=function(e,n,r){var o;null==r&&(r=function(){});try{o=t.CompressionCommon.detectCompressionSourceEncoding(e)}catch(t){return void r(void 0,t)}n=t.ObjectTools.override({inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),t.enqueueImmediate((function(){n.useWebWorker&&t.WebWorker.createGlobalWorkerIfNeeded()?t.WebWorker.compressAsync(e,n,r):t.AsyncCompressor.compressAsync(e,n,r)}))},t.decompressAsync=function(e,n,r){if(null==r&&(r=function(){}),null!=e){n=t.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var o=t.BufferTools.convertToUint8ArrayIfNeeded(e);t.EventLoop.enqueueImmediate((function(){n.useWebWorker&&t.WebWorker.createGlobalWorkerIfNeeded()?t.WebWorker.decompressAsync(o,n,r):t.AsyncDecompressor.decompressAsync(e,n,r)}))}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},t.createCompressionStream=function(){return t.AsyncCompressor.createCompressionStream()},t.createDecompressionStream=function(){return t.AsyncDecompressor.createDecompressionStream()},t.encodeUTF8=function(e){return t.Encoding.UTF8.encode(e)},t.decodeUTF8=function(e){return t.Encoding.UTF8.decode(e)},t.encodeBase64=function(e){return t.Encoding.Base64.encode(e)},t.decodeBase64=function(e){return t.Encoding.Base64.decode(e)},t.encodeBinaryString=function(e){return t.Encoding.BinaryString.encode(e)},t.decodeBinaryString=function(e){return t.Encoding.BinaryString.decode(e)},t.encodeStorageBinaryString=function(e){return t.Encoding.StorageBinaryString.encode(e)},t.decodeStorageBinaryString=function(e){return t.Encoding.StorageBinaryString.decode(e)}}(o||(o={}))},374:(t,e,n)=>{const{AbortError:r,codes:o}=n(141),{isNodeStream:i,isWebStream:a,kControllerErrorFunction:s}=n(132),u=n(86),{ERR_INVALID_ARG_TYPE:l}=o;t.exports.addAbortSignal=function(e,n){if(((t,e)=>{if("object"!=typeof t||!("aborted"in t))throw new l(e,"AbortSignal",t)})(e,"signal"),!i(n)&&!a(n))throw new l("stream",["ReadableStream","WritableStream","Stream"],n);return t.exports.addAbortSignalNoValidate(e,n)},t.exports.addAbortSignalNoValidate=function(t,e){if("object"!=typeof t||!("aborted"in t))return e;const n=i(e)?()=>{e.destroy(new r(void 0,{cause:t.reason}))}:()=>{e[s](new r(void 0,{cause:t.reason}))};return t.aborted?n():(t.addEventListener("abort",n),u(e,(()=>t.removeEventListener("abort",n)))),e}},616:(t,e,n)=>{const{StringPrototypeSlice:r,SymbolIterator:o,TypedArrayPrototypeSet:i,Uint8Array:a}=n(191),{Buffer:s}=n(485),{inspect:u}=n(775);t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(t){const e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}shift(){if(0===this.length)return;const t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(0===this.length)return"";let e=this.head,n=""+e.data;for(;null!==(e=e.next);)n+=t+e.data;return n}concat(t){if(0===this.length)return s.alloc(0);const e=s.allocUnsafe(t>>>0);let n=this.head,r=0;for(;n;)i(e,n.data,r),r+=n.data.length,n=n.next;return e}consume(t,e){const n=this.head.data;if(t<n.length){const e=n.slice(0,t);return this.head.data=n.slice(t),e}return t===n.length?this.shift():e?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[o](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let e="",n=this.head,o=0;do{const i=n.data;if(!(t>i.length)){t===i.length?(e+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(e+=r(i,0,t),this.head=n,n.data=r(i,t));break}e+=i,t-=i.length,++o}while(null!==(n=n.next));return this.length-=o,e}_getBuffer(t){const e=s.allocUnsafe(t),n=t;let r=this.head,o=0;do{const s=r.data;if(!(t>s.length)){t===s.length?(i(e,s,n-t),++o,r.next?this.head=r.next:this.head=this.tail=null):(i(e,new a(s.buffer,s.byteOffset,t),n-t),this.head=r,r.data=s.slice(t));break}i(e,s,n-t),t-=s.length,++o}while(null!==(r=r.next));return this.length-=o,e}[Symbol.for("nodejs.util.inspect.custom")](t,e){return u(this,{...e,depth:0,customInspect:!1})}}},818:(t,e,n)=>{const{pipeline:r}=n(754),o=n(182),{destroyer:i}=n(230),{isNodeStream:a,isReadable:s,isWritable:u,isWebStream:l,isTransformStream:c,isWritableStream:f,isReadableStream:d}=n(132),{AbortError:h,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=n(141),y=n(86);t.exports=function(...t){if(0===t.length)throw new g("streams");if(1===t.length)return o.from(t[0]);const e=[...t];if("function"==typeof t[0]&&(t[0]=o.from(t[0])),"function"==typeof t[t.length-1]){const e=t.length-1;t[e]=o.from(t[e])}for(let n=0;n<t.length;++n)if(a(t[n])||l(t[n])){if(n<t.length-1&&!(s(t[n])||d(t[n])||c(t[n])))throw new p(`streams[${n}]`,e[n],"must be readable");if(n>0&&!(u(t[n])||f(t[n])||c(t[n])))throw new p(`streams[${n}]`,e[n],"must be writable")}let n,m,v,b,w;const _=t[0],E=r(t,(function(t){const e=b;b=null,e?e(t):t?w.destroy(t):A||S||w.destroy()})),S=!!(u(_)||f(_)||c(_)),A=!!(s(E)||d(E)||c(E));if(w=new o({writableObjectMode:!(null==_||!_.writableObjectMode),readableObjectMode:!(null==E||!E.writableObjectMode),writable:S,readable:A}),S){if(a(_))w._write=function(t,e,r){_.write(t,e)?r():n=r},w._final=function(t){_.end(),m=t},_.on("drain",(function(){if(n){const t=n;n=null,t()}}));else if(l(_)){const t=(c(_)?_.writable:_).getWriter();w._write=async function(e,n,r){try{await t.ready,t.write(e).catch((()=>{})),r()}catch(t){r(t)}},w._final=async function(e){try{await t.ready,t.close().catch((()=>{})),m=e}catch(t){e(t)}}}const t=c(E)?E.readable:E;y(t,(()=>{if(m){const t=m;m=null,t()}}))}if(A)if(a(E))E.on("readable",(function(){if(v){const t=v;v=null,t()}})),E.on("end",(function(){w.push(null)})),w._read=function(){for(;;){const t=E.read();if(null===t)return void(v=w._read);if(!w.push(t))return}};else if(l(E)){const t=(c(E)?E.readable:E).getReader();w._read=async function(){for(;;)try{const{value:e,done:n}=await t.read();if(!w.push(e))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(t,e){t||null===b||(t=new h),v=null,n=null,m=null,null===b?e(t):(b=e,a(E)&&i(E,t))},w}},230:(t,e,n)=>{const r=n(533),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=n(141),{Symbol:s}=n(191),{kDestroyed:u,isDestroyed:l,isFinished:c,isServerRequest:f}=n(132),d=s("kDestroy"),h=s("kConstruct");function p(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function g(t,e,n){let o=!1;function i(e){if(o)return;o=!0;const i=t._readableState,a=t._writableState;p(e,a,i),a&&(a.closed=!0),i&&(i.closed=!0),"function"==typeof n&&n(e),e?r.nextTick(y,t,e):r.nextTick(m,t)}try{t._destroy(e||null,i)}catch(e){i(e)}}function y(t,e){v(t,e),m(t)}function m(t){const e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(null!=n&&n.emitClose||null!=e&&e.emitClose)&&t.emit("close")}function v(t,e){const n=t._readableState,r=t._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function b(t,e,n){const o=t._readableState,i=t._writableState;if(null!=i&&i.destroyed||null!=o&&o.destroyed)return this;null!=o&&o.autoDestroy||null!=i&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),o&&!o.errored&&(o.errored=e),n?r.nextTick(v,t,e):v(t,e))}function w(t){let e=!1;function n(n){if(e)return void b(t,null!=n?n:new i);e=!0;const o=t._readableState,a=t._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?t.emit(d,n):n?b(t,n,!0):r.nextTick(_,t)}try{t._construct((t=>{r.nextTick(n,t)}))}catch(t){r.nextTick(n,t)}}function _(t){t.emit(h)}function E(t){return(null==t?void 0:t.setHeader)&&"function"==typeof t.abort}function S(t){t.emit("close")}function A(t,e){t.emit("error",e),r.nextTick(S,t)}t.exports={construct:function(t,e){if("function"!=typeof t._construct)return;const n=t._readableState,o=t._writableState;n&&(n.constructed=!1),o&&(o.constructed=!1),t.once(h,e),t.listenerCount(h)>1||r.nextTick(w,t)},destroyer:function(t,e){t&&!l(t)&&(e||c(t)||(e=new a),f(t)?(t.socket=null,t.destroy(e)):E(t)?t.abort():E(t.req)?t.req.abort():"function"==typeof t.destroy?t.destroy(e):"function"==typeof t.close?t.close():e?r.nextTick(A,t,e):r.nextTick(S,t),t.destroyed||(t[u]=!0))},destroy:function(t,e){const n=this._readableState,r=this._writableState,i=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof e&&e(),this):(p(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?g(this,t,e):this.once(d,(function(n){g(this,o(n,t),e)})),this)},undestroy:function(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=!1===t.readable,t.endEmitted=!1===t.readable),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=!1===e.writable,e.ending=!1===e.writable,e.finished=!1===e.writable)},errorOrDestroy:b}},182:(t,e,n)=>{const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:i,ObjectSetPrototypeOf:a}=n(191);t.exports=l;const s=n(858),u=n(373);a(l.prototype,s.prototype),a(l,s);{const t=i(u.prototype);for(let e=0;e<t.length;e++){const n=t[e];l.prototype[n]||(l.prototype[n]=u.prototype[n])}}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),u.call(this,t),t?(this.allowHalfOpen=!1!==t.allowHalfOpen,!1===t.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===t.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,f;function d(){return void 0===c&&(c={}),c}r(l.prototype,{writable:{__proto__:null,...o(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(u.prototype,"writableLength")},writableFinished:{__proto__:null,...o(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}}),l.fromWeb=function(t,e){return d().newStreamDuplexFromReadableWritablePair(t,e)},l.toWeb=function(t){return d().newReadableWritablePairFromDuplex(t)},l.from=function(t){return f||(f=n(749)),f(t,"body")}},749:(t,e,n)=>{const r=n(533),o=n(485),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:u,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:f}=n(132),d=n(86),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=n(141),{destroyer:y}=n(230),m=n(182),v=n(858),{createDeferredPromise:b}=n(775),w=n(913),_=globalThis.Blob||o.Blob,E=void 0!==_?function(t){return t instanceof _}:function(t){return!1},S=globalThis.AbortController||n(876).AbortController,{FunctionPrototypeCall:A}=n(191);class I extends m{constructor(t){super(t),!1===(null==t?void 0:t.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==t?void 0:t.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(t){const e=t.readable&&"function"!=typeof t.readable.read?v.wrap(t.readable):t.readable,n=t.writable;let r,o,s,u,l,c=!!i(e),f=!!a(n);function p(t){const e=u;u=null,e?e(t):t&&l.destroy(t)}return l=new I({readableObjectMode:!(null==e||!e.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:c,writable:f}),f&&(d(n,(t=>{f=!1,t&&y(e,t),p(t)})),l._write=function(t,e,o){n.write(t,e)?o():r=o},l._final=function(t){n.end(),o=t},n.on("drain",(function(){if(r){const t=r;r=null,t()}})),n.on("finish",(function(){if(o){const t=o;o=null,t()}}))),c&&(d(e,(t=>{c=!1,t&&y(e,t),p(t)})),e.on("readable",(function(){if(s){const t=s;s=null,t()}})),e.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const t=e.read();if(null===t)return void(s=l._read);if(!l.push(t))return}}),l._destroy=function(t,i){t||null===u||(t=new h),s=null,r=null,o=null,null===u?i(t):(u=i,y(n,t),y(e,t))},l}t.exports=function t(e,n){if(f(e))return e;if(l(e))return T({readable:e});if(c(e))return T({writable:e});if(u(e))return T({writable:!1,readable:!1});if("function"==typeof e){const{value:t,write:o,final:i,destroy:a}=function(t){let{promise:e,resolve:n}=b();const o=new S,i=o.signal,a=t(async function*(){for(;;){const t=e;e=null;const{chunk:o,done:a,cb:s}=await t;if(r.nextTick(s),a)return;if(i.aborted)throw new h(void 0,{cause:i.reason});({promise:e,resolve:n}=b()),yield o}}(),{signal:i});return{value:a,write(t,e,r){const o=n;n=null,o({chunk:t,done:!1,cb:r})},final(t){const e=n;n=null,e({done:!0,cb:t})},destroy(t,e){o.abort(),e(t)}}}(e);if(s(t))return w(I,t,{objectMode:!0,write:o,final:i,destroy:a});const u=null==t?void 0:t.then;if("function"==typeof u){let e;const n=A(u,t,(t=>{if(null!=t)throw new g("nully","body",t)}),(t=>{y(e,t)}));return e=new I({objectMode:!0,readable:!1,write:o,final(t){i((async()=>{try{await n,r.nextTick(t,null)}catch(e){r.nextTick(t,e)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,t)}if(E(e))return t(e.arrayBuffer());if(s(e))return w(I,e,{objectMode:!0,writable:!1});if("object"==typeof(null==e?void 0:e.writable)||"object"==typeof(null==e?void 0:e.readable)){return T({readable:null!=e&&e.readable?l(null==e?void 0:e.readable)?null==e?void 0:e.readable:t(e.readable):void 0,writable:null!=e&&e.writable?c(null==e?void 0:e.writable)?null==e?void 0:e.writable:t(e.writable):void 0})}const o=null==e?void 0:e.then;if("function"==typeof o){let t;return A(o,e,(e=>{null!=e&&t.push(e),t.push(null)}),(e=>{y(t,e)})),t=new I({objectMode:!0,writable:!1,read(){}})}throw new p(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)}},86:(t,e,n)=>{const r=n(533),{AbortError:o,codes:i}=n(141),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:u,once:l}=n(775),{validateAbortSignal:c,validateFunction:f,validateObject:d,validateBoolean:h}=n(904),{Promise:p,PromisePrototypeThen:g}=n(191),{isClosed:y,isReadable:m,isReadableNodeStream:v,isReadableStream:b,isReadableFinished:w,isReadableErrored:_,isWritable:E,isWritableNodeStream:S,isWritableStream:A,isWritableFinished:I,isWritableErrored:T,isNodeStream:R,willEmitClose:x,kIsClosedPromise:C}=n(132);const B=()=>{};function k(t,e,n){var i,h;if(2===arguments.length?(n=e,e=u):null==e?e=u:d(e,"options"),f(n,"callback"),c(e.signal,"options.signal"),n=l(n),b(t)||A(t))return function(t,e,n){let i=!1,a=B;if(e.signal)if(a=()=>{i=!0,n.call(t,new o(void 0,{cause:e.signal.reason}))},e.signal.aborted)r.nextTick(a);else{const r=n;n=l(((...n)=>{e.signal.removeEventListener("abort",a),r.apply(t,n)})),e.signal.addEventListener("abort",a)}const s=(...e)=>{i||r.nextTick((()=>n.apply(t,e)))};return g(t[C].promise,s,s),B}(t,e,n);if(!R(t))throw new a("stream",["ReadableStream","WritableStream","Stream"],t);const p=null!==(i=e.readable)&&void 0!==i?i:v(t),k=null!==(h=e.writable)&&void 0!==h?h:S(t),L=t._writableState,O=t._readableState,U=()=>{t.writable||M()};let j=x(t)&&v(t)===p&&S(t)===k,N=I(t,!1);const M=()=>{N=!0,t.destroyed&&(j=!1),(!j||t.readable&&!p)&&(p&&!P||n.call(t))};let P=w(t,!1);const W=()=>{P=!0,t.destroyed&&(j=!1),(!j||t.writable&&!k)&&(k&&!N||n.call(t))},$=e=>{n.call(t,e)};let D=y(t);const F=()=>{D=!0;const e=T(t)||_(t);return e&&"boolean"!=typeof e?n.call(t,e):p&&!P&&v(t,!0)&&!w(t,!1)?n.call(t,new s):!k||N||I(t,!1)?void n.call(t):n.call(t,new s)},z=()=>{D=!0;const e=T(t)||_(t);if(e&&"boolean"!=typeof e)return n.call(t,e);n.call(t)},q=()=>{t.req.on("finish",M)};!function(t){return t.setHeader&&"function"==typeof t.abort}(t)?k&&!L&&(t.on("end",U),t.on("close",U)):(t.on("complete",M),j||t.on("abort",F),t.req?q():t.on("request",q)),j||"boolean"!=typeof t.aborted||t.on("aborted",F),t.on("end",W),t.on("finish",M),!1!==e.error&&t.on("error",$),t.on("close",F),D?r.nextTick(F):null!=L&&L.errorEmitted||null!=O&&O.errorEmitted?j||r.nextTick(z):(p||j&&!m(t)||!N&&!1!==E(t))&&(k||j&&!E(t)||!P&&!1!==m(t))?O&&t.req&&t.aborted&&r.nextTick(z):r.nextTick(z);const H=()=>{n=B,t.removeListener("aborted",F),t.removeListener("complete",M),t.removeListener("abort",F),t.removeListener("request",q),t.req&&t.req.removeListener("finish",M),t.removeListener("end",U),t.removeListener("close",U),t.removeListener("finish",M),t.removeListener("end",W),t.removeListener("error",$),t.removeListener("close",F)};if(e.signal&&!D){const i=()=>{const r=n;H(),r.call(t,new o(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)r.nextTick(i);else{const r=n;n=l(((...n)=>{e.signal.removeEventListener("abort",i),r.apply(t,n)})),e.signal.addEventListener("abort",i)}}return H}t.exports=k,t.exports.finished=function(t,e){var n;let r=!1;return null===e&&(e=u),null!==(n=e)&&void 0!==n&&n.cleanup&&(h(e.cleanup,"cleanup"),r=e.cleanup),new p(((n,o)=>{const i=k(t,e,(t=>{r&&i(),t?o(t):n()}))}))}},913:(t,e,n)=>{const r=n(533),{PromisePrototypeThen:o,SymbolAsyncIterator:i,SymbolIterator:a}=n(191),{Buffer:s}=n(485),{ERR_INVALID_ARG_TYPE:u,ERR_STREAM_NULL_VALUES:l}=n(141).codes;t.exports=function(t,e,n){let c,f;if("string"==typeof e||e instanceof s)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});if(e&&e[i])f=!0,c=e[i]();else{if(!e||!e[a])throw new u("iterable",["Iterable"],e);f=!1,c=e[a]()}const d=new t({objectMode:!0,highWaterMark:1,...n});let h=!1;return d._read=function(){h||(h=!0,async function(){for(;;){try{const{value:t,done:e}=f?await c.next():c.next();if(e)d.push(null);else{const e=t&&"function"==typeof t.then?await t:t;if(null===e)throw h=!1,new l;if(d.push(e))continue;h=!1}}catch(t){d.destroy(t)}break}}())},d._destroy=function(t,e){o(async function(t){const e=null!=t,n="function"==typeof c.throw;if(e&&n){const{value:e,done:n}=await c.throw(t);if(await e,n)return}if("function"==typeof c.return){const{value:t}=await c.return();await t}}(t),(()=>r.nextTick(e,t)),(n=>r.nextTick(e,n||t)))},d}},200:(t,e,n)=>{const{ArrayIsArray:r,ObjectSetPrototypeOf:o}=n(191),{EventEmitter:i}=n(465);function a(t){i.call(this,t)}function s(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}o(a.prototype,i.prototype),o(a,i),a.prototype.pipe=function(t,e){const n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",u),n.on("close",l));let a=!1;function u(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){f(),0===i.listenerCount(this,"error")&&this.emit("error",t)}function f(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",u),n.removeListener("close",l),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",f),n.removeListener("close",f),t.removeListener("close",f)}return s(n,"error",c),s(t,"error",c),n.on("end",f),n.on("close",f),t.on("close",f),t.emit("pipe",n),t},t.exports={Stream:a,prependListener:s}},554:(t,e,n)=>{const r=globalThis.AbortController||n(876).AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:u}=n(141),{validateAbortSignal:l,validateInteger:c,validateObject:f}=n(904),d=n(191).Symbol("kWeak"),{finished:h}=n(86),p=n(818),{addAbortSignalNoValidate:g}=n(374),{isWritable:y,isNodeStream:m}=n(132),{ArrayPrototypePush:v,MathFloor:b,Number:w,NumberIsNaN:_,Promise:E,PromiseReject:S,PromisePrototypeThen:A,Symbol:I}=n(191),T=I("kEmpty"),R=I("kEof");function x(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");let n=1;return null!=(null==e?void 0:e.concurrency)&&(n=b(e.concurrency)),c(n,"concurrency",1),async function*(){var o,i;const a=new r,s=this,l=[],c=a.signal,f={signal:c},d=()=>a.abort();let h,p;null!=e&&null!==(o=e.signal)&&void 0!==o&&o.aborted&&d(),null==e||null===(i=e.signal)||void 0===i||i.addEventListener("abort",d);let g=!1;function y(){g=!0}!async function(){try{for await(let e of s){var r;if(g)return;if(c.aborted)throw new u;try{e=t(e,f)}catch(t){e=S(t)}e!==T&&("function"==typeof(null===(r=e)||void 0===r?void 0:r.catch)&&e.catch(y),l.push(e),h&&(h(),h=null),!g&&l.length&&l.length>=n&&await new E((t=>{p=t})))}l.push(R)}catch(t){const e=S(t);A(e,void 0,y),l.push(e)}finally{var o;g=!0,h&&(h(),h=null),null==e||null===(o=e.signal)||void 0===o||o.removeEventListener("abort",d)}}();try{for(;;){for(;l.length>0;){const t=await l[0];if(t===R)return;if(c.aborted)throw new u;t!==T&&(yield t),l.shift(),p&&(p(),p=null)}await new E((t=>{h=t}))}}finally{a.abort(),g=!0,p&&(p(),p=null)}}.call(this)}async function C(t,e=void 0){for await(const n of B.call(this,t,e))return!0;return!1}function B(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);return x.call(this,(async function(e,n){return await t(e,n)?e:T}),e)}class k extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function L(t){if(t=w(t),_(t))return 0;if(t<0)throw new s("number",">= 0",t);return t}t.exports.streamReturningOperators={asIndexedPairs:function(t=void 0){return null!=t&&f(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),async function*(){let e=0;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new u({cause:t.signal.reason});yield[e++,r]}}.call(this)},drop:function(t,e=void 0){return null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),t=L(t),async function*(){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new u;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new u;t--<=0&&(yield n)}}.call(this)},filter:B,flatMap:function(t,e){const n=x.call(this,t,e);return async function*(){for await(const t of n)yield*t}.call(this)},map:x,take:function(t,e=void 0){return null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),t=L(t),async function*(){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new u;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new u;if(!(t-- >0))return;yield n}}.call(this)},compose:function(t,e){if(null!=e&&f(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),m(t)&&!y(t))throw new o("stream",t,"must be writable");const n=p(this,t);return null!=e&&e.signal&&g(e.signal,n),n}},t.exports.promiseReturningOperators={every:async function(t,e=void 0){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);return!await C.call(this,(async(...e)=>!await t(...e)),e)},forEach:async function(t,e){if("function"!=typeof t)throw new i("fn",["Function","AsyncFunction"],t);for await(const n of x.call(this,(async function(e,n){return await t(e,n),T}),e));},reduce:async function(t,e,n){var o;if("function"!=typeof t)throw new i("reducer",["Function","AsyncFunction"],t);null!=n&&f(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(o=n.signal)&&void 0!==o&&o.aborted){const t=new u(void 0,{cause:n.signal.reason});throw this.once("error",(()=>{})),await h(this.destroy(t)),t}const s=new r,c=s.signal;if(null!=n&&n.signal){const t={once:!0,[d]:this};n.signal.addEventListener("abort",(()=>s.abort()),t)}let p=!1;try{for await(const r of this){var g;if(p=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new u;a?e=await t(e,r,{signal:c}):(e=r,a=!0)}if(!p&&!a)throw new k}finally{s.abort()}return e},toArray:async function(t){null!=t&&f(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");const e=[];for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new u(void 0,{cause:t.signal.reason});v(e,r)}return e},some:C,find:async function(t,e){for await(const n of B.call(this,t,e))return n}}},467:(t,e,n)=>{const{ObjectSetPrototypeOf:r}=n(191);t.exports=i;const o=n(210);function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}r(i.prototype,o.prototype),r(i,o),i.prototype._transform=function(t,e,n){n(null,t)}},754:(t,e,n)=>{const r=n(533),{ArrayIsArray:o,Promise:i,SymbolAsyncIterator:a}=n(191),s=n(86),{once:u}=n(775),l=n(230),c=n(182),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:m}=n(141),{validateFunction:v,validateAbortSignal:b}=n(904),{isIterable:w,isReadable:_,isReadableNodeStream:E,isNodeStream:S,isTransformStream:A,isWebStream:I,isReadableStream:T,isReadableEnded:R}=n(132),x=globalThis.AbortController||n(876).AbortController;let C,B;function k(t,e,n){let r=!1;t.on("close",(()=>{r=!0}));return{destroy:e=>{r||(r=!0,l.destroyer(t,e||new g("pipe")))},cleanup:s(t,{readable:e,writable:n},(t=>{r=!t}))}}function L(t){if(w(t))return t;if(E(t))return async function*(t){B||(B=n(858));yield*B.prototype[a].call(t)}(t);throw new d("val",["Readable","Iterable","AsyncIterable"],t)}async function O(t,e,n,{end:r}){let o,a=null;const u=t=>{if(t&&(o=t),a){const t=a;a=null,t()}},l=()=>new i(((t,e)=>{o?e(o):a=()=>{o?e(o):t()}}));e.on("drain",u);const c=s(e,{readable:!1},u);try{e.writableNeedDrain&&await l();for await(const n of t)e.write(n)||await l();r&&e.end(),await l(),n()}catch(t){n(o!==t?f(o,t):t)}finally{c(),e.off("drain",u)}}async function U(t,e,n,{end:r}){A(e)&&(e=e.writable);const o=e.getWriter();try{for await(const e of t)await o.ready,o.write(e).catch((()=>{}));await o.ready,r&&await o.close(),n()}catch(t){try{await o.abort(t),n(t)}catch(t){n(t)}}}function j(t,e,i){if(1===t.length&&o(t[0])&&(t=t[0]),t.length<2)throw new p("streams");const a=new x,s=a.signal,u=null==i?void 0:i.signal,l=[];function f(){M(new m)}let g,y;b(u,"options.signal"),null==u||u.addEventListener("abort",f);const v=[];let R,B=0;function j(t){M(t,0==--B)}function M(t,n){if(!t||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=t),g||n){for(;v.length;)v.shift()(g);null==u||u.removeEventListener("abort",f),a.abort(),n&&(g||l.forEach((t=>t())),r.nextTick(e,g,y))}}for(let D=0;D<t.length;D++){const F=t[D],z=D<t.length-1,q=D>0,H=z||!1!==(null==i?void 0:i.end),V=D===t.length-1;if(S(F)){if(H){const{destroy:G,cleanup:J}=k(F,z,q);v.push(G),_(F)&&V&&l.push(J)}function P(t){t&&"AbortError"!==t.name&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code&&j(t)}F.on("error",P),_(F)&&V&&l.push((()=>{F.removeListener("error",P)}))}if(0===D)if("function"==typeof F){if(R=F({signal:s}),!w(R))throw new h("Iterable, AsyncIterable or Stream","source",R)}else R=w(F)||E(F)||A(F)?F:c.from(F);else if("function"==typeof F){var W;if(A(R))R=L(null===(W=R)||void 0===W?void 0:W.readable);else R=L(R);if(R=F(R,{signal:s}),z){if(!w(R,!0))throw new h("AsyncIterable",`transform[${D-1}]`,R)}else{var $;C||(C=n(467));const Y=new C({objectMode:!0}),K=null===($=R)||void 0===$?void 0:$.then;if("function"==typeof K)B++,K.call(R,(t=>{y=t,null!=t&&Y.write(t),H&&Y.end(),r.nextTick(j)}),(t=>{Y.destroy(t),r.nextTick(j,t)}));else if(w(R,!0))B++,O(R,Y,j,{end:H});else{if(!T(R)&&!A(R))throw new h("AsyncIterable or Promise","destination",R);{const Q=R.readable||R;B++,O(Q,Y,j,{end:H})}}R=Y;const{destroy:X,cleanup:Z}=k(R,!1,!0);v.push(X),V&&l.push(Z)}}else if(S(F)){if(E(R)){B+=2;const tt=N(R,F,j,{end:H});_(F)&&V&&l.push(tt)}else if(A(R)||T(R)){const et=R.readable||R;B++,O(et,F,j,{end:H})}else{if(!w(R))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,O(R,F,j,{end:H})}R=F}else if(I(F)){if(E(R))B++,U(L(R),F,j,{end:H});else if(T(R)||w(R))B++,U(R,F,j,{end:H});else{if(!A(R))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);B++,U(R.readable,F,j,{end:H})}R=F}else R=c.from(F)}return(null!=s&&s.aborted||null!=u&&u.aborted)&&r.nextTick(f),R}function N(t,e,n,{end:o}){let i=!1;if(e.on("close",(()=>{i||n(new y)})),t.pipe(e,{end:!1}),o){function a(){i=!0,e.end()}R(t)?r.nextTick(a):t.once("end",a)}else n();return s(t,{readable:!0,writable:!1},(e=>{const r=t._readableState;e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?t.once("end",n).once("error",n):n(e)})),s(e,{readable:!1,writable:!0},n)}t.exports={pipelineImpl:j,pipeline:function(...t){return j(t,u(function(t){return v(t[t.length-1],"streams[stream.length - 1]"),t.pop()}(t)))}}},858:(t,e,n)=>{const r=n(533),{ArrayPrototypeIndexOf:o,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:u,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:f,SafeSet:d,SymbolAsyncIterator:h,Symbol:p}=n(191);t.exports=W,W.ReadableState=P;const{EventEmitter:g}=n(465),{Stream:y,prependListener:m}=n(200),{Buffer:v}=n(485),{addAbortSignal:b}=n(374),w=n(86);let _=n(775).debuglog("stream",(t=>{_=t}));const E=n(616),S=n(230),{getHighWaterMark:A,getDefaultHighWaterMark:I}=n(498),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:B,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:k}}=n(141),{validateObject:L}=n(904),O=p("kPaused"),{StringDecoder:U}=n(464),j=n(913);c(W.prototype,y.prototype),c(W,y);const N=()=>{},{errorOrDestroy:M}=S;function P(t,e,r){"boolean"!=typeof r&&(r=e instanceof n(182)),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.readableObjectMode)),this.highWaterMark=t?A(this,t,"readableHighWaterMark",r):I(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[O]=null,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new U(t.encoding),this.encoding=t.encoding)}function W(t){if(!(this instanceof W))return new W(t);const e=this instanceof n(182);this._readableState=new P(t,this,e),t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&!e&&b(t.signal,this)),y.call(this,t),S.construct(this,(()=>{this._readableState.needReadable&&H(this,this._readableState)}))}function $(t,e,n,r){_("readableAddChunk",e);const o=t._readableState;let i;if(o.objectMode||("string"==typeof e?(n=n||o.defaultEncoding,o.encoding!==n&&(r&&o.encoding?e=v.from(e,n).toString(o.encoding):(e=v.from(e,n),n=""))):e instanceof v?n="":y._isUint8Array(e)?(e=y._uint8ArrayToBuffer(e),n=""):null!=e&&(i=new R("chunk",["string","Buffer","Uint8Array"],e))),i)M(t,i);else if(null===e)o.reading=!1,function(t,e){if(_("onEofChunk"),e.ended)return;if(e.decoder){const t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?z(t):(e.needReadable=!1,e.emittedReadable=!0,q(t))}(t,o);else if(o.objectMode||e&&e.length>0)if(r)if(o.endEmitted)M(t,new k);else{if(o.destroyed||o.errored)return!1;D(t,o,e,!0)}else if(o.ended)M(t,new B);else{if(o.destroyed||o.errored)return!1;o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?D(t,o,e,!1):H(t,o)):D(t,o,e,!1)}else r||(o.reading=!1,H(t,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function D(t,e,n,r){e.flowing&&0===e.length&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&z(t)),H(t,e)}W.prototype.destroy=S.destroy,W.prototype._undestroy=S.undestroy,W.prototype._destroy=function(t,e){e(t)},W.prototype[g.captureRejectionSymbol]=function(t){this.destroy(t)},W.prototype.push=function(t,e){return $(this,t,e,!1)},W.prototype.unshift=function(t,e){return $(this,t,e,!0)},W.prototype.isPaused=function(){const t=this._readableState;return!0===t[O]||!1===t.flowing},W.prototype.setEncoding=function(t){const e=new U(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const t of n)r+=e.write(t);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function F(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:a(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}function z(t){const e=t._readableState;_("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,r.nextTick(q,t))}function q(t){const e=t._readableState;_("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||e.errored||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,K(t)}function H(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,r.nextTick(V,t,e))}function V(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){const n=e.length;if(_("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function G(t){const e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!1===e[O]?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function J(t){_("readable nexttick read 0"),t.read(0)}function Y(t,e){_("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),K(t),e.flowing&&!e.reading&&t.read(0)}function K(t){const e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function X(t,e){"function"!=typeof t.read&&(t=W.wrap(t,{objectMode:!0}));const n=async function*(t,e){let n,r=N;function o(e){this===t?(r(),r=N):r=e}t.on("readable",o);const i=w(t,{writable:!1},(t=>{n=t?T(n,t):null,r(),r=N}));try{for(;;){const e=t.destroyed?null:t.read();if(null!==e)yield e;else{if(n)throw n;if(null===n)return;await new f(o)}}}catch(t){throw n=T(n,t),n}finally{!n&&!1===(null==e?void 0:e.destroyOnReturn)||void 0!==n&&!t._readableState.autoDestroy?(t.off("readable",o),i()):S.destroyer(t,null)}}(t,e);return n.stream=t,n}function Z(t,e){if(0===e.length)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function Q(t){const e=t._readableState;_("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,r.nextTick(tt,e,t))}function tt(t,e){if(_("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,e.emit("end"),e.writable&&!1===e.allowHalfOpen)r.nextTick(et,e);else if(t.autoDestroy){const t=e._writableState;(!t||t.autoDestroy&&(t.finished||!1===t.writable))&&e.destroy()}}function et(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}let nt;function rt(){return void 0===nt&&(nt={}),nt}W.prototype.read=function(t){_("read",t),void 0===t?t=NaN:i(t)||(t=s(t,10));const e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=function(t){if(t>1073741824)throw new C("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,++t}(t)),0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?Q(this):z(this),null;if(0===(t=F(t,e))&&e.ended)return 0===e.length&&Q(this),null;let r,o=e.needReadable;if(_("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&(o=!0,_("length less than watermark",o)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)o=!1,_("reading, ended or constructing",o);else if(o){_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(t){M(this,t)}e.sync=!1,e.reading||(t=F(n,e))}return r=t>0?Z(t,e):null,null===r?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&Q(this)),null===r||e.errorEmitted||e.closeEmitted||(e.dataEmitted=!0,this.emit("data",r)),r},W.prototype._read=function(t){throw new x("_read()")},W.prototype.pipe=function(t,e){const n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new d(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(t),_("pipe count=%d opts=%j",o.pipes.length,e);const i=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?s:y;function a(e,r){_("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){_("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),u&&t.removeListener("drain",u);t.removeListener("error",h),t.removeListener("unpipe",a),n.removeListener("end",s),n.removeListener("end",y),n.removeListener("data",f),l=!0,u&&o.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}())}function s(){_("onend"),t.end()}let u;o.endEmitted?r.nextTick(i):n.once("end",i),t.on("unpipe",a);let l=!1;function c(){l||(1===o.pipes.length&&o.pipes[0]===t?(_("false write response, pause",0),o.awaitDrainWriters=t,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(t)&&(_("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(t)),n.pause()),u||(u=function(t,e){return function(){const n=t._readableState;n.awaitDrainWriters===e?(_("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(_("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!t.listenerCount("data")||t.resume()}}(n,t),t.on("drain",u))}function f(e){_("ondata");const n=t.write(e);_("dest.write",n),!1===n&&c()}function h(e){if(_("onerror",e),y(),t.removeListener("error",h),0===t.listenerCount("error")){const n=t._writableState||t._readableState;n&&!n.errorEmitted?M(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",g),y()}function g(){_("onfinish"),t.removeListener("close",p),y()}function y(){_("unpipe"),n.unpipe(t)}return n.on("data",f),m(t,"error",h),t.once("close",p),t.once("finish",g),t.emit("pipe",n),!0===t.writableNeedDrain?o.flowing&&c():o.flowing||(_("pipe resume"),n.resume()),t},W.prototype.unpipe=function(t){const e=this._readableState;if(0===e.pipes.length)return this;if(!t){const t=e.pipes;e.pipes=[],this.pause();for(let e=0;e<t.length;e++)t[e].emit("unpipe",this,{hasUnpiped:!1});return this}const n=o(e.pipes,t);return-1===n||(e.pipes.splice(n,1),0===e.pipes.length&&this.pause(),t.emit("unpipe",this,{hasUnpiped:!1})),this},W.prototype.on=function(t,e){const n=y.prototype.on.call(this,t,e),o=this._readableState;return"data"===t?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===t&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,_("on readable",o.length,o.reading),o.length?z(this):o.reading||r.nextTick(J,this))),n},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(t,e){const n=y.prototype.removeListener.call(this,t,e);return"readable"===t&&r.nextTick(G,this),n},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(t){const e=y.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||r.nextTick(G,this),e},W.prototype.resume=function(){const t=this._readableState;return t.flowing||(_("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(Y,t,e))}(this,t)),t[O]=!1,this},W.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[O]=!0,this},W.prototype.wrap=function(t){let e=!1;t.on("data",(n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())})),t.on("end",(()=>{this.push(null)})),t.on("error",(t=>{M(this,t)})),t.on("close",(()=>{this.destroy()})),t.on("destroy",(()=>{this.destroy()})),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};const n=l(t);for(let e=1;e<n.length;e++){const r=n[e];void 0===this[r]&&"function"==typeof t[r]&&(this[r]=t[r].bind(t))}return this},W.prototype[h]=function(){return X(this)},W.prototype.iterator=function(t){return void 0!==t&&L(t,"options"),X(this,t)},u(W.prototype,{readable:{__proto__:null,get(){const t=this._readableState;return!(!t||!1===t.readable||t.destroyed||t.errorEmitted||t.endEmitted)},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),u(P.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[O]},set(t){this[O]=!!t}}}),W._fromList=Z,W.from=function(t,e){return j(W,t,e)},W.fromWeb=function(t,e){return rt().newStreamReadableFromReadableStream(t,e)},W.toWeb=function(t,e){return rt().newReadableStreamFromStreamReadable(t,e)},W.wrap=function(t,e){var n,r;return new W({objectMode:null===(n=null!==(r=t.readableObjectMode)&&void 0!==r?r:t.objectMode)||void 0===n||n,...e,destroy(e,n){S.destroyer(t,e),n(e)}}).wrap(t)}},498:(t,e,n)=>{const{MathFloor:r,NumberIsInteger:o}=n(191),{ERR_INVALID_ARG_VALUE:i}=n(141).codes;function a(t){return t?16:16384}t.exports={getHighWaterMark:function(t,e,n,s){const u=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,s,n);if(null!=u){if(!o(u)||u<0){throw new i(s?`options.${n}`:"options.highWaterMark",u)}return r(u)}return a(t.objectMode)},getDefaultHighWaterMark:a}},210:(t,e,n)=>{const{ObjectSetPrototypeOf:r,Symbol:o}=n(191);t.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=n(141).codes,a=n(182),{getHighWaterMark:s}=n(498);r(l.prototype,a.prototype),r(l,a);const u=o("kCallback");function l(t){if(!(this instanceof l))return new l(t);const e=t?s(this,t,"readableHighWaterMark",!0):null;0===e&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),a.call(this,t),this._readableState.sync=!1,this[u]=null,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",f)}function c(t){"function"!=typeof this._flush||this.destroyed?(this.push(null),t&&t()):this._flush(((e,n)=>{e?t?t(e):this.destroy(e):(null!=n&&this.push(n),this.push(null),t&&t())}))}function f(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(t,e,n){throw new i("_transform()")},l.prototype._write=function(t,e,n){const r=this._readableState,o=this._writableState,i=r.length;this._transform(t,e,((t,e)=>{t?n(t):(null!=e&&this.push(e),o.ended||i===r.length||r.length<r.highWaterMark?n():this[u]=n)}))},l.prototype._read=function(){if(this[u]){const t=this[u];this[u]=null,t()}}},132:(t,e,n)=>{const{Symbol:r,SymbolAsyncIterator:o,SymbolIterator:i,SymbolFor:a}=n(191),s=r("kDestroyed"),u=r("kIsErrored"),l=r("kIsReadable"),c=r("kIsDisturbed"),f=a("nodejs.webstream.isClosedPromise"),d=a("nodejs.webstream.controllerErrorFunction");function h(t,e=!1){var n;return!(!t||"function"!=typeof t.pipe||"function"!=typeof t.on||e&&("function"!=typeof t.pause||"function"!=typeof t.resume)||t._writableState&&!1===(null===(n=t._readableState)||void 0===n?void 0:n.readable)||t._writableState&&!t._readableState)}function p(t){var e;return!(!t||"function"!=typeof t.write||"function"!=typeof t.on||t._readableState&&!1===(null===(e=t._writableState)||void 0===e?void 0:e.writable))}function g(t){return t&&(t._readableState||t._writableState||"function"==typeof t.write&&"function"==typeof t.on||"function"==typeof t.pipe&&"function"==typeof t.on)}function y(t){return!(!t||g(t)||"function"!=typeof t.pipeThrough||"function"!=typeof t.getReader||"function"!=typeof t.cancel)}function m(t){return!(!t||g(t)||"function"!=typeof t.getWriter||"function"!=typeof t.abort)}function v(t){return!(!t||g(t)||"object"!=typeof t.readable||"object"!=typeof t.writable)}function b(t){if(!g(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[s]||null!=r&&r.destroyed)}function w(t){if(!p(t))return null;if(!0===t.writableEnded)return!0;const e=t._writableState;return(null==e||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)}function _(t,e){if(!h(t))return null;const n=t._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===e&&!0===n.ended&&0===n.length))}function E(t){return t&&null!=t[l]?t[l]:"boolean"!=typeof(null==t?void 0:t.readable)?null:!b(t)&&(h(t)&&t.readable&&!_(t))}function S(t){return"boolean"!=typeof(null==t?void 0:t.writable)?null:!b(t)&&(p(t)&&t.writable&&!w(t))}function A(t){return"boolean"==typeof t._closed&&"boolean"==typeof t._defaultKeepAlive&&"boolean"==typeof t._removedConnection&&"boolean"==typeof t._removedContLen}function I(t){return"boolean"==typeof t._sent100&&A(t)}t.exports={kDestroyed:s,isDisturbed:function(t){var e;return!(!t||!(null!==(e=t[c])&&void 0!==e?e:t.readableDidRead||t.readableAborted))},kIsDisturbed:c,isErrored:function(t){var e,n,r,o,i,a,s,l,c,f;return!(!t||!(null!==(e=null!==(n=null!==(r=null!==(o=null!==(i=null!==(a=t[u])&&void 0!==a?a:t.readableErrored)&&void 0!==i?i:t.writableErrored)&&void 0!==o?o:null===(s=t._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(l=t._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=t._readableState)||void 0===c?void 0:c.errored)&&void 0!==e?e:null===(f=t._writableState)||void 0===f?void 0:f.errored))},kIsErrored:u,isReadable:E,kIsReadable:l,kIsClosedPromise:f,kControllerErrorFunction:d,isClosed:function(t){if(!g(t))return null;if("boolean"==typeof t.closed)return t.closed;const e=t._writableState,n=t._readableState;return"boolean"==typeof(null==e?void 0:e.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==e?void 0:e.closed)||(null==n?void 0:n.closed):"boolean"==typeof t._closed&&A(t)?t._closed:null},isDestroyed:b,isDuplexNodeStream:function(t){return!(!t||"function"!=typeof t.pipe||!t._readableState||"function"!=typeof t.on||"function"!=typeof t.write)},isFinished:function(t,e){return g(t)?!!b(t)||(!1===(null==e?void 0:e.readable)||!E(t))&&(!1===(null==e?void 0:e.writable)||!S(t)):null},isIterable:function(t,e){return null!=t&&(!0===e?"function"==typeof t[o]:!1===e?"function"==typeof t[i]:"function"==typeof t[o]||"function"==typeof t[i])},isReadableNodeStream:h,isReadableStream:y,isReadableEnded:function(t){if(!h(t))return null;if(!0===t.readableEnded)return!0;const e=t._readableState;return!(!e||e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)},isReadableFinished:_,isReadableErrored:function(t){var e,n;return g(t)?t.readableErrored?t.readableErrored:null!==(e=null===(n=t._readableState)||void 0===n?void 0:n.errored)&&void 0!==e?e:null:null},isNodeStream:g,isWebStream:function(t){return y(t)||m(t)||v(t)},isWritable:S,isWritableNodeStream:p,isWritableStream:m,isWritableEnded:w,isWritableFinished:function(t,e){if(!p(t))return null;if(!0===t.writableFinished)return!0;const n=t._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===e&&!0===n.ended&&0===n.length))},isWritableErrored:function(t){var e,n;return g(t)?t.writableErrored?t.writableErrored:null!==(e=null===(n=t._writableState)||void 0===n?void 0:n.errored)&&void 0!==e?e:null:null},isServerRequest:function(t){var e;return"boolean"==typeof t._consuming&&"boolean"==typeof t._dumped&&void 0===(null===(e=t.req)||void 0===e?void 0:e.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(t){if(!g(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!r&&I(t)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:v}},373:(t,e,n)=>{const r=n(533),{ArrayPrototypeSlice:o,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:u,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:f,SymbolHasInstance:d}=n(191);t.exports=U,U.WritableState=L;const{EventEmitter:h}=n(465),p=n(200).Stream,{Buffer:g}=n(485),y=n(230),{addAbortSignal:m}=n(374),{getHighWaterMark:v,getDefaultHighWaterMark:b}=n(498),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:x}=n(141).codes,{errorOrDestroy:C}=y;function B(){}l(U.prototype,p.prototype),l(U,p);const k=f("kOnFinished");function L(t,e,r){"boolean"!=typeof r&&(r=e instanceof n(182)),this.objectMode=!(!t||!t.objectMode),r&&(this.objectMode=this.objectMode||!(!t||!t.writableObjectMode)),this.highWaterMark=t?v(this,t,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const o=!(!t||!1!==t.decodeStrings);this.decodeStrings=!o,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=P.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function O(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}function U(t){const e=this instanceof n(182);if(!e&&!a(U,this))return new U(t);this._writableState=new L(t,this,e),t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&m(t.signal,this)),p.call(this,t),y.construct(this,(()=>{const t=this._writableState;t.writing||F(this,t),H(this,t)}))}function j(t,e,n,o){const i=t._writableState;if("function"==typeof n)o=n,n=i.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new x(n)}else n=i.defaultEncoding;"function"!=typeof o&&(o=B)}if(null===e)throw new T;if(!i.objectMode)if("string"==typeof e)!1!==i.decodeStrings&&(e=g.from(e,n),n="buffer");else if(e instanceof g)n="buffer";else{if(!p._isUint8Array(e))throw new w("chunk",["string","Buffer","Uint8Array"],e);e=p._uint8ArrayToBuffer(e),n="buffer"}let a;return i.ending?a=new R:i.destroyed&&(a=new A("write")),a?(r.nextTick(o,a),C(t,a,!0),a):(i.pendingcb++,function(t,e,n,r,o){const i=e.objectMode?1:n.length;e.length+=i;const a=e.length<e.highWaterMark;a||(e.needDrain=!0);e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:o}),e.allBuffers&&"buffer"!==r&&(e.allBuffers=!1),e.allNoop&&o!==B&&(e.allNoop=!1)):(e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1);return a&&!e.errored&&!e.destroyed}(t,i,e,n,o))}function N(t,e,n,r,o,i,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new A("write")):n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function M(t,e,n,r){--e.pendingcb,r(n),D(e),C(t,n)}function P(t,e){const n=t._writableState,o=n.sync,i=n.writecb;"function"==typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),o?r.nextTick(M,t,n,e,i):M(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&F(t,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},r.nextTick(W,n.afterWriteTickInfo)):$(t,n,1,i))):C(t,new E)}function W({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,$(t,e,n,r)}function $(t,e,n,r){for(!e.ending&&!t.destroyed&&0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&D(e),H(t,e)}function D(t){if(t.writing)return;for(let n=t.bufferedIndex;n<t.buffered.length;++n){var e;const{chunk:r,callback:o}=t.buffered[n],i=t.objectMode?1:r.length;t.length-=i,o(null!==(e=t.errored)&&void 0!==e?e:new A("write"))}const n=t[k].splice(0);for(let e=0;e<n.length;e++){var r;n[e](null!==(r=t.errored)&&void 0!==r?r:new A("end"))}O(t)}function F(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:i}=e,a=n.length-r;if(!a)return;let s=r;if(e.bufferProcessing=!0,a>1&&t._writev){e.pendingcb-=a-1;const r=e.allNoop?B:t=>{for(let e=s;e<n.length;++e)n[e].callback(t)},i=e.allNoop&&0===s?n:o(n,s);i.allBuffers=e.allBuffers,N(t,e,!0,e.length,i,"",r),O(e)}else{do{const{chunk:r,encoding:o,callback:a}=n[s];n[s++]=null;N(t,e,!1,i?1:r.length,r,o,a)}while(s<n.length&&!e.writing);s===n.length?O(e):s>256?(n.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}function z(t){return t.ending&&!t.destroyed&&t.constructed&&0===t.length&&!t.errored&&0===t.buffered.length&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function q(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.finalCalled=!0,function(t,e){let n=!1;function o(o){if(n)C(t,null!=o?o:E());else if(n=!0,e.pendingcb--,o){const n=e[k].splice(0);for(let t=0;t<n.length;t++)n[t](o);C(t,o,e.sync)}else z(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,r.nextTick(V,t,e))}e.sync=!0,e.pendingcb++;try{t._final(o)}catch(t){o(t)}e.sync=!1}(t,e)))}function H(t,e,n){z(e)&&(q(t,e),0===e.pendingcb&&(n?(e.pendingcb++,r.nextTick(((t,e)=>{z(e)?V(t,e):e.pendingcb--}),t,e)):z(e)&&(e.pendingcb++,V(t,e))))}function V(t,e){e.pendingcb--,e.finished=!0;const n=e[k].splice(0);for(let t=0;t<n.length;t++)n[t]();if(t.emit("finish"),e.autoDestroy){const e=t._readableState;(!e||e.autoDestroy&&(e.endEmitted||!1===e.readable))&&t.destroy()}}L.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},s(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(U,d,{__proto__:null,value:function(t){return!!a(this,t)||this===U&&(t&&t._writableState instanceof L)}}),U.prototype.pipe=function(){C(this,new S)},U.prototype.write=function(t,e,n){return!0===j(this,t,e,n)},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){const t=this._writableState;t.corked&&(t.corked--,t.writing||F(this,t))},U.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=c(t)),!g.isEncoding(t))throw new x(t);return this._writableState.defaultEncoding=t,this},U.prototype._write=function(t,e,n){if(!this._writev)throw new _("_write()");this._writev([{chunk:t,encoding:e}],n)},U.prototype._writev=null,U.prototype.end=function(t,e,n){const o=this._writableState;let a;if("function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t){const n=j(this,t,e);n instanceof i&&(a=n)}return o.corked&&(o.corked=1,this.uncork()),a||(o.errored||o.ending?o.finished?a=new I("end"):o.destroyed&&(a=new A("end")):(o.ending=!0,H(this,o,!0),o.ended=!0)),"function"==typeof n&&(a||o.finished?r.nextTick(n,a):o[k].push(n)),this},u(U.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){const t=this._writableState;return!(!t||!1===t.writable||t.destroyed||t.errored||t.ending||t.ended)},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const t=this._writableState;return!!t&&(!t.destroyed&&!t.ending&&t.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=y.destroy;let J;function Y(){return void 0===J&&(J={}),J}U.prototype.destroy=function(t,e){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[k].length)&&r.nextTick(D,n),G.call(this,t,e),this},U.prototype._undestroy=y.undestroy,U.prototype._destroy=function(t,e){e(t)},U.prototype[h.captureRejectionSymbol]=function(t){this.destroy(t)},U.fromWeb=function(t,e){return Y().newStreamWritableFromWritableStream(t,e)},U.toWeb=function(t){return Y().newWritableStreamFromStreamWritable(t)}},904:(t,e,n)=>{const{ArrayIsArray:r,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:f,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:h,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:y}=n(191),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=n(141),{normalizeEncoding:S}=n(775),{isAsyncFunction:A,isArrayBufferView:I}=n(775).types,T={};const R=/^[0-7]+$/;const x=m(((t,e,n=c,r=l)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);if(t<n||t>r)throw new _(e,`>= ${n} && <= ${r}`,t)})),C=m(((t,e,n=-2147483648,r=2147483647)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);if(t<n||t>r)throw new _(e,`>= ${n} && <= ${r}`,t)})),B=m(((t,e,n=!1)=>{if("number"!=typeof t)throw new b(e,"number",t);if(!s(t))throw new _(e,"an integer",t);const r=n?1:0,o=4294967295;if(t<r||t>o)throw new _(e,`>= ${r} && <= ${o}`,t)}));function k(t,e){if("string"!=typeof t)throw new b(e,"string",t)}const L=m(((t,e,n)=>{if(!o(n,t)){const r=i(a(n,(t=>"string"==typeof t?`'${t}'`:p(t))),", ");throw new w(e,t,"must be one of: "+r)}}));function O(t,e){if("boolean"!=typeof t)throw new b(e,"boolean",t)}function U(t,e,n){return null!=t&&d(t,e)?t[e]:n}const j=m(((t,e,n=null)=>{const o=U(n,"allowArray",!1),i=U(n,"allowFunction",!1);if(!U(n,"nullable",!1)&&null===t||!o&&r(t)||"object"!=typeof t&&(!i||"function"!=typeof t))throw new b(e,"Object",t)})),N=m(((t,e)=>{if(null!=t&&"object"!=typeof t&&"function"!=typeof t)throw new b(e,"a dictionary",t)})),M=m(((t,e,n=0)=>{if(!r(t))throw new b(e,"Array",t);if(t.length<n){throw new w(e,t,`must be longer than ${n}`)}}));const P=m(((t,e="buffer")=>{if(!I(t))throw new b(e,["Buffer","TypedArray","DataView"],t)}));const W=m(((t,e)=>{if(void 0!==t&&(null===t||"object"!=typeof t||!("aborted"in t)))throw new b(e,"AbortSignal",t)})),$=m(((t,e)=>{if("function"!=typeof t)throw new b(e,"Function",t)})),D=m(((t,e)=>{if("function"!=typeof t||A(t))throw new b(e,"Function",t)})),F=m(((t,e)=>{if(void 0!==t)throw new b(e,"undefined",t)}));const z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function q(t,e){if(void 0===t||!h(z,t))throw new w(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(t){return t===(0|t)},isUint32:function(t){return t===t>>>0},parseFileMode:function(t,e,n){if(void 0===t&&(t=n),"string"==typeof t){if(null===h(R,t))throw new w(e,t,"must be a 32-bit unsigned integer or an octal string");t=f(t,8)}return B(t,e),t},validateArray:M,validateStringArray:function(t,e){M(t,e);for(let n=0;n<t.length;n++)k(t[n],`${e}[${n}]`)},validateBooleanArray:function(t,e){M(t,e);for(let n=0;n<t.length;n++)O(t[n],`${e}[${n}]`)},validateBoolean:O,validateBuffer:P,validateDictionary:N,validateEncoding:function(t,e){const n=S(e),r=t.length;if("hex"===n&&r%2!=0)throw new w("encoding",e,`is invalid for data of length ${r}`)},validateFunction:$,validateInt32:C,validateInteger:x,validateNumber:function(t,e,n=void 0,r){if("number"!=typeof t)throw new b(e,"number",t);if(null!=n&&t<n||null!=r&&t>r||(null!=n||null!=r)&&u(t))throw new _(e,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,t)},validateObject:j,validateOneOf:L,validatePlainFunction:D,validatePort:function(t,e="Port",n=!0){if("number"!=typeof t&&"string"!=typeof t||"string"==typeof t&&0===y(t).length||+t!=+t>>>0||t>65535||0===t&&!n)throw new v(e,t,n);return 0|t},validateSignalName:function(t,e="signal"){if(k(t,e),void 0===T[t]){if(void 0!==T[g(t)])throw new E(t+" (signals must use all capital letters)");throw new E(t)}},validateString:k,validateUint32:B,validateUndefined:F,validateUnion:function(t,e,n){if(!o(n,t))throw new b(e,`('${i(n,"|")}')`,t)},validateAbortSignal:W,validateLinkHeaderValue:function(t){if("string"==typeof t)return q(t,"hints"),t;if(r(t)){const e=t.length;let n="";if(0===e)return n;for(let r=0;r<e;r++){const o=t[r];q(o,"hints"),n+=o,r!==e-1&&(n+=", ")}return n}throw new w("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},99:(t,e,n)=>{const r=n(292),o=n(760),i=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=i,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>o}),t.exports.Stream=r.Stream,t.exports.default=t.exports},141:(t,e,n)=>{const{format:r,inspect:o,AggregateError:i}=n(775),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),u=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c={};function f(t,e){if(!t)throw new c.ERR_INTERNAL_ASSERTION(e)}function d(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function h(t,e,n){n||(n=Error);class NodeError extends n{constructor(...n){super(function(t,e,n){if("function"==typeof e)return f(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);const o=(e.match(/%[dfijoOs]/g)||[]).length;return f(o===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${o}).`),0===n.length?e:r(e,...n)}(t,e,n))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(NodeError.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),NodeError.prototype.code=t,NodeError.prototype[s]=!0,c[t]=NodeError}function p(t){const e="__node_internal_"+t.name;return Object.defineProperty(t,"name",{value:e}),t}class AbortError extends Error{constructor(t="The operation was aborted",e=void 0){if(void 0!==e&&"object"!=typeof e)throw new c.ERR_INVALID_ARG_TYPE("options","Object",e);super(t,e),this.code="ABORT_ERR",this.name="AbortError"}}h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",((t,e,n)=>{f("string"==typeof t,"'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";const i=[],a=[],s=[];for(const t of e)f("string"==typeof t,"All expected entries have to be of type string"),u.includes(t)?i.push(t.toLowerCase()):l.test(t)?a.push(t):(f("object"!==t,'The value "object" should be written as "Object"'),s.push(t));if(a.length>0){const t=i.indexOf("object");-1!==t&&(i.splice(i,t,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const t=i.pop();r+=`one of type ${i.join(", ")}, or ${t}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const t=a.pop();r+=`an instance of ${a.join(", ")}, or ${t}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const t=s.pop();r+=`one of ${s.join(", ")}, or ${t}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var c;if(null!==(c=n.constructor)&&void 0!==c&&c.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${o(n,{depth:-1})}`}}else{let t=o(n,{colors:!1});t.length>25&&(t=`${t.slice(0,25)}...`),r+=`. Received type ${typeof n} (${t})`}return r}),TypeError),h("ERR_INVALID_ARG_VALUE",((t,e,n="is invalid")=>{let r=o(e);r.length>128&&(r=r.slice(0,128)+"...");return`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`}),TypeError),h("ERR_INVALID_RETURN_VALUE",((t,e,n)=>{var r;return`Expected ${t} to be returned from the "${e}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`}),TypeError),h("ERR_MISSING_ARGS",((...t)=>{let e;f(t.length>0,"At least one arg needs to be specified");const n=t.length;switch(t=(Array.isArray(t)?t:[t]).map((t=>`"${t}"`)).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}}return`${e} must be specified`}),TypeError),h("ERR_OUT_OF_RANGE",((t,e,n)=>{let r;return f(e,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=d(String(n)):"bigint"==typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=d(r)),r+="n"):r=o(n),`The value of "${t}" is out of range. It must be ${e}. Received ${r}`}),RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError,aggregateTwoErrors:p((function(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const n=new a([e,t],e.message);return n.code=e.code,n}return t||e})),hideStackFrames:p,codes:c}},191:t=>{t.exports={ArrayIsArray:t=>Array.isArray(t),ArrayPrototypeIncludes:(t,e)=>t.includes(e),ArrayPrototypeIndexOf:(t,e)=>t.indexOf(e),ArrayPrototypeJoin:(t,e)=>t.join(e),ArrayPrototypeMap:(t,e)=>t.map(e),ArrayPrototypePop:(t,e)=>t.pop(e),ArrayPrototypePush:(t,e)=>t.push(e),ArrayPrototypeSlice:(t,e,n)=>t.slice(e,n),Error,FunctionPrototypeCall:(t,e,...n)=>t.call(e,...n),FunctionPrototypeSymbolHasInstance:(t,e)=>Function.prototype[Symbol.hasInstance].call(t,e),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(t,e)=>Object.defineProperties(t,e),ObjectDefineProperty:(t,e,n)=>Object.defineProperty(t,e,n),ObjectGetOwnPropertyDescriptor:(t,e)=>Object.getOwnPropertyDescriptor(t,e),ObjectKeys:t=>Object.keys(t),ObjectSetPrototypeOf:(t,e)=>Object.setPrototypeOf(t,e),Promise,PromisePrototypeCatch:(t,e)=>t.catch(e),PromisePrototypeThen:(t,e,n)=>t.then(e,n),PromiseReject:t=>Promise.reject(t),ReflectApply:Reflect.apply,RegExpPrototypeTest:(t,e)=>t.test(e),SafeSet:Set,String,StringPrototypeSlice:(t,e,n)=>t.slice(e,n),StringPrototypeToLowerCase:t=>t.toLowerCase(),StringPrototypeToUpperCase:t=>t.toUpperCase(),StringPrototypeTrim:t=>t.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(t,e,n)=>t.set(e,n),Uint8Array}},775:(t,e,n)=>{const r=n(485),o=Object.getPrototypeOf((async function(){})).constructor,i=globalThis.Blob||r.Blob,a=void 0!==i?function(t){return t instanceof i}:function(t){return!1};class AggregateError extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e="";for(let n=0;n<t.length;n++)e+=`    ${t[n].stack}\n`;super(e),this.name="AggregateError",this.errors=t}}t.exports={AggregateError,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise(((n,r)=>{t=n,e=r})),resolve:t,reject:e}},promisify:t=>new Promise(((e,n)=>{t(((t,...r)=>t?n(t):e(...r)))})),debuglog:()=>function(){},format:(t,...e)=>t.replace(/%([sdifj])/g,(function(...[t,n]){const r=e.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()})),inspect(t){switch(typeof t){case"string":if(t.includes("'")){if(!t.includes('"'))return`"${t}"`;if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction:t=>t instanceof o,isArrayBufferView:t=>ArrayBuffer.isView(t)},isBlob:a},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},292:(t,e,n)=>{const{Buffer:r}=n(485),{ObjectDefineProperty:o,ObjectKeys:i,ReflectApply:a}=n(191),{promisify:{custom:s}}=n(775),{streamReturningOperators:u,promiseReturningOperators:l}=n(554),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=n(141),f=n(818),{pipeline:d}=n(754),{destroyer:h}=n(230),p=n(86),g=n(760),y=n(132),m=t.exports=n(200).Stream;m.isDisturbed=y.isDisturbed,m.isErrored=y.isErrored,m.isReadable=y.isReadable,m.Readable=n(858);for(const w of i(u)){const _=u[w];function v(...t){if(new.target)throw c();return m.Readable.from(a(_,this,t))}o(v,"name",{__proto__:null,value:_.name}),o(v,"length",{__proto__:null,value:_.length}),o(m.Readable.prototype,w,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const E of i(l)){const S=l[E];function v(...t){if(new.target)throw c();return a(S,this,t)}o(v,"name",{__proto__:null,value:S.name}),o(v,"length",{__proto__:null,value:S.length}),o(m.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}m.Writable=n(373),m.Duplex=n(182),m.Transform=n(210),m.PassThrough=n(467),m.pipeline=d;const{addAbortSignal:b}=n(374);m.addAbortSignal=b,m.finished=p,m.destroy=h,m.compose=f,o(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),o(d,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),o(p,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),m.Stream=m,m._isUint8Array=function(t){return t instanceof Uint8Array},m._uint8ArrayToBuffer=function(t){return r.from(t.buffer,t.byteOffset,t.byteLength)}},760:(t,e,n)=>{const{ArrayPrototypePop:r,Promise:o}=n(191),{isIterable:i,isNodeStream:a,isWebStream:s}=n(132),{pipelineImpl:u}=n(754),{finished:l}=n(86);n(91),t.exports={finished:l,pipeline:function(...t){return new o(((e,n)=>{let o,l;const c=t[t.length-1];if(c&&"object"==typeof c&&!a(c)&&!i(c)&&!s(c)){const e=r(t);o=e.signal,l=e.end}u(t,((t,r)=>{t?n(t):e(r)}),{signal:o,end:l})}))}}},533:t=>{var e,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var s,u=[],l=!1,c=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},377:(t,e,n)=>{var r=n(485),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},464:(t,e,n)=>{var r=n(377).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=f,e=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=i,i.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},i.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=a(e[r]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=a(e[r]),o>=0)return o>0&&(t.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=a(e[r]),o>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},54:(t,e,n)=>{n.d(e,{MS:()=>A,cF:()=>I,AK:()=>T,M_:()=>R,cX:()=>x,BT:()=>InteropError,_W:()=>B,Pg:()=>lt,$j:()=>Y,U$:()=>N,U7:()=>M});var r={d:(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},o={};r.d(o,{MS:()=>ApiError,cF:()=>ApiRequestError,AK:()=>AuthTokenExpiredError,M_:()=>AuthorizationError,cX:()=>InitializationError,Yd:()=>l,nj:()=>NotImplementedError,O4:()=>S,_W:()=>ParameterError,U$:()=>a,U7:()=>s});class ApiError extends Error{constructor(t,e){var n,r;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An unexpected error has occurred"),this.name=this.constructor.name,this.stack=(t?this.stack:null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:this.stack).replace(/^(\w*Error)/,`${this.constructor.name}`)}}class ApiRequestError extends ApiError{constructor(t,e,n){var r;super(t=null!==(r=null!=t?t:null==n?void 0:n.message)&&void 0!==r?r:"An error occurred when executing the API request",n),this.status=e}}class AuthorizationError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An authorization error occurred",e)}}class AuthTokenExpiredError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"The API request failed as the authorization tokens have expired",e)}}class InitializationError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An initialization error occurred",e)}}class NotImplementedError extends ApiError{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"The method has not been implemented",e)}}class ParameterError extends ApiError{constructor(t){super(t=null!=t?t:"Invalid parameter detected")}}const i=t=>{let e=fin.Integrations;e||(fin.Integrations={},e=fin.Integrations);let n=e[t];return n||(e[t]={},n=e[t]),n},a=t=>{i(t).loggingEnabled=!1},s=(t,e="0.0.0")=>{i(t).loggingEnabled=!0,console.log(u(t),`v${e}`)},u=t=>`[@openfin/${t.toLowerCase()}]`;class l{constructor(t){this.name=t,this.prefix=u(t),this.isLoggingEnabled=this.isLoggingEnabled.bind(this),this.logError=this.logError.bind(this),this.logInfo=this.logInfo.bind(this),this.logWarning=this.logWarning.bind(this)}isLoggingEnabled(){return i(this.name).loggingEnabled}logError(t){this.isLoggingEnabled()&&(t.innerError?console.error(this.prefix,t,"\n\n(inner)",t.innerError):console.error(this.prefix,t))}logInfo(...t){this.isLoggingEnabled()&&console.log(this.prefix,...t)}logWarning(...t){this.isLoggingEnabled()&&console.warn(this.prefix,...t)}}const c="oauth-api-auth-flow",f=(t,e,n,r,o,i,a,s)=>async u=>{const l=new URL(u);if(0!==l.href.toLowerCase().indexOf(o.toLowerCase()))return!1;if(window.clearInterval(s),window.clearTimeout(e),window.clearTimeout(n),t.removeAllListeners(),t.close(!0),l.searchParams.get("error")){const t=new ApiError("Authorization error");return t.data=l.toString(),a(t),!0}if(l.searchParams.get("state")!==r){const t=new ApiError("State mismatch");return t.data=l.toString(),a(t),!0}const c=l.searchParams.get("code");if(!c){const t=new ApiError("Authorization code missing");return t.data=l.toString(),a(t),!0}return i(c),!0},d=(t,e,n,r)=>async(o,i)=>{let a;const s=window.setTimeout((()=>{window.clearInterval(a),window.clearTimeout(s),t.removeAllListeners(),t.close(!0),i(new ApiError("Authorization timed out"))}),3e5);t.addListener("closing",(async()=>{r.logInfo("User closed auth window"),window.clearInterval(a),window.clearTimeout(s),t.removeAllListeners(),i(new ApiError("Failed to complete authorization code flow"))}));const u=window.setTimeout((async()=>{try{await t.isShowing()||(r.logInfo("Showing auth window"),await t.show(!0),await t.focus())}catch(t){r.logWarning("Unable to show auth window")}}),2e3),{version:l}=await fin.System.getRuntimeInfo();parseInt(l.split(".")[0],10)>=30?await f(t,s,u,e,n,o,i)((await t.getInfo()).url)||await t.addListener("url-changed",(a=>{r.logInfo("Auth window navigated to",a.url),f(t,s,u,e,n,o,i)(a.url)})):a=window.setInterval((()=>(async(t,e,n,r,o,i,a,s)=>{let u;try{u=await t.getInfo()}catch(t){return window.clearInterval(e),window.clearTimeout(n),window.clearTimeout(r),s(new ApiError("Could not locate auth window")),!1}return f(t,n,r,o,i,a,s,e)(u.url)})(t,a,s,u,e,n,o,i)),500)},h=()=>{let t,e,n,r;const o=async(e,n=!1)=>{const{command:r,data:a,id:s}=e,u={command:r,id:s};try{if(!t)throw new Error("Access token not found");const{apiRequestUrl:r,data:s,headers:l,httpMethod:c,includeAuthorization:f}=a,d=await(async(e,n,r,o,i)=>{var a,s;const u=Object.assign({Accept:"application/json"},o);"PATCH"!==n&&"POST"!==n&&"PUT"!==n||/content-type/i.test(Object.keys(u).join(","))||(u["Content-Type"]="application/json"),i&&(u.Authorization=`Bearer ${t}`);const l=await fetch(e,{body:"object"==typeof r?JSON.stringify(r):r,headers:u,method:n});if(!l.ok){const t={message:"Failed to execute API request"};return(null===(a=l.headers.get("Content-Type"))||void 0===a?void 0:a.includes("application/json"))&&(t.data=await l.json()),[l.status,void 0,void 0,t]}let c;const f=null!==(s=l.headers.get("Content-Type"))&&void 0!==s?s:"";switch(!0){case!f:break;case/^application\/(\w+\+)?json/i.test(f):c=await l.json();break;case/^multipart\/form-?data|^application\/x-?www-?form-?urlencoded/i.test(f):c=await l.formData();break;case/^application\/(([^/]+)?xml|vnd\.openxmlformats)|^text\/|^image\/svg/i.test(f):c=await l.text();break;default:c=await l.arrayBuffer()}return[l.status,c,f,void 0]})(r,c,s,l,f),[h,p,g,y]=d;if(u.status=h,y){if(!n&&401===h){const[t,n]=await i();return n?(u.status=t,u.error=n,u):await o(e,!0)}u.error=y}else p&&(u.data=p,u.type=g)}catch(t){t instanceof Error?u.error={message:t.message}:u.error={message:"Failed to execute API request"}}return Promise.resolve(u)},i=async()=>{var o;if(!n)throw new Error("Authorization server metadata not set");if(!e)throw new Error("Client ID not set");const i=`grant_type=refresh_token&client_id=${e}&refresh_token=${r}`,a=await fetch(n.token_endpoint,{body:i,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!a.ok){const t={message:"Failed to refresh access token"};return(null===(o=a.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(t.data=await a.json()),[a.status,t]}const s=await a.json();return t=s.access_token,[a.status]};self.onmessage=async i=>{const{command:a,id:s}=i.data;let u={command:a,id:s};switch(a){case"API_REQUEST":u=await o(i.data);break;case"CODE_EXCHANGE":u=await(async o=>{var i;const{command:a,data:s,id:u}=o,l={command:a,id:u};try{if(!n)throw new Error("Authorization server metadata not set");if(!e)throw new Error("Client ID not set");const{code:o,codeVerifier:a,redirectUri:u}=s,c=`grant_type=authorization_code&client_id=${e}&code=${o}&code_verifier=${a}&redirect_uri=${u}`,f=await fetch(n.token_endpoint,{body:c,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(f.ok){const e=await f.json();t=e.access_token,r=e.refresh_token}else{const t={message:"Failed to retrieve tokens"};(null===(i=f.headers.get("Content-Type"))||void 0===i?void 0:i.includes("application/json"))&&(t.data=await f.json()),l.error=t}}catch(t){t instanceof Error?l.error={message:t.message}:l.error={message:"Failed to retrieve tokens"}}return Promise.resolve(l)})(i.data);break;case"EXPIRE_TOKENS":u=await(async e=>{var o;const{command:i,expireAccessTokenOnly:a,id:s}=e,u={command:i,id:s};try{if(!a&&!r)throw new Error("Refresh token not found");if(!n)throw new Error("Authorization server metadata not set");if(!n.revocation_endpoint)throw new Error("Revocation endpoint missing in authorization server metadata");const e=a?t:r,i=await fetch(`${n.revocation_endpoint}?token=${e}`,{headers:{Accept:"application/json"}});if(!i.ok){const t={message:"Failed to revoke tokens"};(null===(o=i.headers.get("Content-Type"))||void 0===o?void 0:o.includes("application/json"))&&(t.data=await i.json()),u.error=t}}catch(t){t instanceof Error?u.error={message:t.message}:u.error={message:"Failed to revoke tokens"}}return Promise.resolve(u)})(i.data);break;case"INIT":u=await(async t=>{const{command:r,data:o,id:i}=t,a={command:r,id:i};return e=o.clientId,n=o.metadata,Promise.resolve(a)})(i.data);break;default:u.error=new Error(`Unexpected oauth worker command: ${a}`)}self.postMessage(u)}};var p;!function(t){t.ApiRequest="API_REQUEST",t.CodeExchange="CODE_EXCHANGE",t.ExpireTokens="EXPIRE_TOKENS",t.Init="INIT"}(p||(p={}));const g=[],y=t=>{g.push(t)},m=(t,e)=>(n,r,o)=>new Promise(((i,a)=>{const s={command:p.CodeExchange,data:{code:n,codeVerifier:r,redirectUri:o},id:Date.now().toString()},{command:u,id:l}=s;y({command:u,id:l,reject:a,resolve:i}),t.postMessage(s),e.logInfo("Worker request sent",s)})),v=(t,e,n)=>(r,o,i,a,s)=>new Promise(((u,l)=>{const c={command:p.ApiRequest,data:{apiRequestUrl:r,clientId:t,data:i,headers:a,httpMethod:o,includeAuthorization:s},id:Date.now().toString()},{command:f,id:d}=c;y({command:f,id:d,reject:l,resolve:u}),e.postMessage(c),n.logInfo("Worker request sent",c)})),b=(t,e)=>n=>new Promise(((r,o)=>{const i={command:p.ExpireTokens,expireAccessTokenOnly:n,id:Date.now().toString()},{command:a,id:s}=i;y({command:a,id:s,reject:o,resolve:r}),t.postMessage(i),e.logInfo("Worker request sent",i)})),w=t=>e=>{t.logInfo("Worker response received",e.data);const n=e.data,{command:r,error:o,id:i}=n,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(n,["command","error","id"]),s=((t,e)=>g.find((n=>n.command===e&&n.id===t)))(i,r);s?(o?("status"in a&&void 0!==a.status&&(o.status=a.status),s.reject(o)):s.resolve(a),_(i,r)):t.logError(new Error("Unable to locate awaited request"))},_=(t,e)=>{const n=g.findIndex((n=>n.command===e&&n.id===t));n>=0&&g.splice(n,1)},E=(t,e)=>async()=>{try{await b(t,e)(!1)}catch(t){e.logWarning(t.message)}t.terminate(),e.logInfo("Worker terminated")};class S{get apiOrigin(){return this._apiOrigin}get clientId(){return this._clientId}get logger(){return this._logger}get metadata(){return this._metadata}get worker(){return this._worker}constructor(t,e,n,r,o){if(this.executeApiRequest=async(t,e="GET",n,r,o=!0,i=!1)=>{this._logger.logInfo("ExecuteApiRequest started",t,e,n,r);try{const i=await((t,e)=>async(n,r,o,i,a)=>{try{return await e.executeApiRequest(`${t}${n}`,r,o,i,a)}catch(t){let e;const{data:n,message:r,status:o}=t;throw e=t instanceof Error?new ApiRequestError(r,o):"Failed to refresh access token"===r?new AuthTokenExpiredError(r):new ApiRequestError(r,o),e.data=n,e}})(this._apiOrigin,this._worker)(t,e,n,r,o);return this._logger.logInfo("ExecuteApiRequest completed",i),i}catch(t){if(t instanceof ApiRequestError){const{data:e,message:n,name:r,stack:o}=t,i=this.getErrorMessageFromServerResponse(e);i&&(t.message=i,t.stack=null==o?void 0:o.replace(`${r}: ${n}`,`${r}: ${i}`))}throw i&&this.logger.logError(t),t}},!(t&&e&&n&&r&&o))throw new InitializationError("Provider has not been properly initialized (call init to create new instances)");this._apiOrigin=t,this._clientId=e,this._metadata=n,this._worker=r,this._logger=o,this.authorize=this.authorize.bind(this),this.close=this.close.bind(this),this.executeApiRequest=this.executeApiRequest.bind(this),this.expireTokens=this.expireTokens.bind(this),this.getErrorMessageFromServerResponse=this.getErrorMessageFromServerResponse.bind(this)}async authorize(t,e,n){if(this._logger.logInfo("Authorize started",t,e,n),!this._metadata||!this._clientId||!this._worker)throw new InitializationError("Provider has not been properly initialized (call init to create new instances)");try{await(r=this._metadata,o=this._clientId,i=this._worker,a=this._logger,async(t,e,n)=>{const{authorization_endpoint:s}=r,u=fin.Application.getCurrentSync(),l=(await u.getChildWindows()).find((t=>t.identity.name===c));l&&await l.close(!0);const f=(new Date).getTime().toString(),h=(()=>{const t=new Uint32Array(64);return window.crypto.getRandomValues(t),Array.from(t,(t=>`0${t.toString(16)}`.slice(-2))).join("")})(),p=(await(async t=>{const e=(new TextEncoder).encode(t),n=await window.crypto.subtle.digest("SHA-256",e),r=await(t=>new Promise(((e,n)=>{try{const r=new Blob([t]),o=new FileReader;o.onload=t=>{var r,o;const i=null===(r=t.target)||void 0===r?void 0:r.result;if(i){const[,t]=Array.from(null!==(o=i.match(/base64,(.*)$/i))&&void 0!==o?o:[]);e(null!=t?t:"")}n(new Error("Unexpected empty result"))},o.readAsDataURL(r)}catch(t){n(t)}})))(n);return r.replace(/\+/g,"-").replace(/\//g,"_")})(h)).replace(/=+$/,"");let g="";e&&(g="&",g+=Object.entries(e).map((t=>`${encodeURIComponent(t[0])}=${encodeURIComponent(t[1])}`)).join("&"));const y=`${s}?client_id=${encodeURIComponent(o)}&redirect_uri=${encodeURIComponent(t)}&response_type=code&state=${f}&code_challenge=${p}&code_challenge_method=S256${g}`,m=null!=n?n:{},{defaultHeight:v,defaultWidth:b}=m,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(m,["defaultHeight","defaultWidth"]);a.logInfo("Starting OAuth flow",y);const _=await fin.Window.create(Object.assign({alwaysOnTop:!0,maximizable:!1,minimizable:!1,autoShow:!1,defaultCentered:!0,defaultHeight:null!=v?v:700,defaultWidth:null!=b?b:600,includeInSnapshots:!1,name:c,resizable:!1,saveWindowState:!1,showTaskbarIcon:!1,url:y},w)),E=await new Promise(d(_,f,t,a));a.logInfo("Received authorization code"),await i.exchangeCodeForTokens(E,h,t),a.logInfo("Received tokens")})(t,e,n),this._logger.logInfo("Authorize completed")}catch(t){let e;if(t instanceof ApiError){const{data:n}=t,r=this.getErrorMessageFromServerResponse(n);e=new AuthorizationError(r,t),e.data=n}else e=new AuthorizationError(void 0,t);throw this.logger.logError(e),e}var r,o,i,a}async close(){var t;this._logger.logInfo("Close started");try{await(null===(t=this._worker)||void 0===t?void 0:t.terminate()),this._worker=void 0,this._apiOrigin=void 0,this._clientId=void 0,this._metadata=void 0,this._logger.logInfo("Close completed")}catch(t){const e=new ApiError(void 0,t);throw this._logger.logError(e),e}}async expireTokens(t=!1){var e;this._logger.logInfo("ExpireTokens started");try{await(null===(e=this._worker)||void 0===e?void 0:e.expireTokens(t)),this._logger.logInfo("ExpireTokens completed")}catch(t){const e=new ApiError(void 0,t);throw this._logger.logError(e),e}}getErrorMessageFromServerResponse(t){t&&this._logger.logWarning(t)}static async init(t,e,n,r,...o){const i=new l(r);let a;i.logInfo("Init started",t,e,n);try{a=new URL(e)}catch(t){const e=new ParameterError("Unexpected invalid API origin");throw i.logError(e),e}try{const e=await(async t=>{let e;try{e=new URL(t)}catch(t){throw new ParameterError("Unexpected invalid metadata URL")}const n=await fetch(e,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Failed to retrieve authorization server metadata");const r=await n.json();if(!r)throw new Error("Unexpected empty authorization server metadata response");if(!r.response_types_supported.find((t=>"code"===t.toLowerCase())))throw new Error("Authorization server does not support the authorization code response type");return r})(t),r=await(async(t,e,n)=>{const r=new Blob([`(${h})()`],{type:"text/javascript"}),o=URL.createObjectURL(r),i=new Worker(o);return i.onmessage=w(n),await((t,e,n,r)=>new Promise(((o,i)=>{const a={command:p.Init,data:{clientId:e,metadata:t},id:Date.now().toString()},{command:s,id:u}=a;y({command:s,id:u,reject:i,resolve:o}),n.postMessage(a),r.logInfo("Worker request sent",a)})))(t,e,i,n),{exchangeCodeForTokens:m(i,n),executeApiRequest:v(e,i,n),expireTokens:b(i,n),terminate:E(i,n)}})(e,n,i);return i.logInfo("Init completed",e),new S(a.origin,n,e,r,i)}catch(t){let e;throw e=t instanceof ApiError?t:new InitializationError(void 0,t),i.logError(e),e}}}var A=o.MS,I=o.cF,T=o.AK,R=o.M_,x=o.cX,C=o.O4,B=o._W,k=o.U$,L=o.U7,O=n(951);const U="1.0.1",j="Microsoft365",N=()=>{k(j)},M=()=>{L(j,U)};"undefined"!=typeof window&&("undefined"==typeof fin&&Object.assign(window,{fin:{}}),Object.assign(fin,{Integrations:{Microsoft365:{enableLogging:M,disableLogging:N}}}));const P=t=>async(e,n,r,o,i)=>{var a;return e=(a=e).startsWith("/")?a:`/${a}`,t.executeApiRequest(e,n,r,o,i,!0)},W=async(t,e,n=[])=>{const r=["id","userPrincipalName","userType",...n].join(","),o=await(async(t,e=[])=>{if(!(null==e?void 0:e.length))return[];const n=[];for(let r=0;r<e.length;r+=20){const o={requests:e.slice(r,r+20).map((t=>(t.id=crypto.randomUUID(),t)))};n.push(t.executeApiRequest("/v1.0/$batch","POST",o))}const r=(await Promise.all(n)).flatMap((t=>t.data.responses));return e.map((t=>{var e;return null===(e=r.find((e=>e.id===t.id)))||void 0===e?void 0:e.body}))})(t,e.map((t=>({method:"GET",url:`/users?$filter=mail eq '${encodeURIComponent(t)}'&$select=${r}`})))),i=o.map((t=>{var e;return null===(e=t.value)||void 0===e?void 0:e[0]}));return t.logger.logInfo("Resolved users from email addresses",i,e),i};var $=n(300);const D=t=>t.map((t=>t?{id:t.userPrincipalName,emailAddress:t.mail,name:t.displayName}:void 0)),F=async(t,e)=>{try{await fin.System.registerUsage({type:"integration-feature",data:{apiVersion:U,componentName:t}})}catch(n){e.logWarning(`Unable to register usage for feature ${t}: ${null==n?void 0:n.message}`)}},z=t=>{let e=t;return Array.isArray(t)?t.filter(Boolean).map(z):("object"==typeof t&&(e=Object.fromEntries(Object.entries(t).filter((([,t])=>void 0!==(null!=t?t:void 0))).map((([t,e])=>[t,z(e)])))),e)},q=t=>/#EXT#@/.test(t.userPrincipalName);var H;!function(t){t.MS365="MS-365",t.Teams="MS-TEAMS"}(H||(H={}));class V extends C{get currentUser(){return this._currentUser}get redirectUri(){return this._redirectUri}get permissions(){return this._permissions}get tenantId(){return this._tenantId}constructor(t,e,n,r,o,i,a,s){super(t,e,i,a,s),this._permissions=o,this._redirectUri=r,this._tenantId=n,F(H.MS365,s)}async authorize(t,e,n){await super.authorize(t,e,n);const r=await(async t=>{const{data:e}=await t.executeApiRequest("/v1.0/me");return e})(this);this._currentUser=r}getErrorMessageFromServerResponse(t){var e,n,r;if("string"==typeof t)try{return null===(n=null===(e=new URL(t).searchParams.get("error_description"))||void 0===e?void 0:e.split(/\r\n/))||void 0===n?void 0:n[0]}catch(t){return}return null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.message}static async init(t,e,n,r,o,i,a){const s=await super.init(t,e,n,r);return new V(e,n,o,i,a,null==s?void 0:s.metadata,null==s?void 0:s.worker,null==s?void 0:s.logger)}}const G=["User.ReadBasic.All","Team.ReadBasic.All","Channel.ReadBasic.All","ChannelMessage.Send","Chat.Create","ChatMessage.Send","offline_access"];let J;const Y=async(t,e,n,r=[],o,i)=>{await K(t,e,n,r);const a=Object.assign({scope:[...G,...r].join(" ")},o),s=Object.assign({defaultHeight:600,defaultWidth:550},i);return await J.authorize(n,a,s),{clientId:t,currentUser:J.currentUser,disconnect:J.close,executeApiRequest:P(J),provider:J,tenantId:e}},K=async(t,e,n,r)=>{if(!t)throw new B("Invalid client ID");if(!e)throw new B("Invalid tenant ID");if(!n)throw new B("Invalid redirect URI");const o=`https://login.microsoftonline.com/${e}/v2.0/.well-known/openid-configuration`;(!J||J.clientId!==t||J.tenantId!==e||J.redirectUri!==n||(0,O.xor)(J.permissions,r).length>0)&&(J=await V.init(o,"https://graph.microsoft.com",t,j,e,n,r))};class InteropError extends A{constructor(t,e){var n;super(t=null!==(n=null!=t?t:null==e?void 0:e.message)&&void 0!==n?n:"An interop error occurred",e)}}var X,Z,Q;!function(t){t.AppNotFound="AppNotFound",t.ErrorOnLaunch="ErrorOnLaunch",t.AppTimeout="AppTimeout",t.ResolverUnavailable="ResolverUnavailable"}(X||(X={})),function(t){t.NoAppsFound="NoAppsFound",t.ResolverUnavailable="ResolverUnavailable",t.ResolverTimeout="ResolverTimeout"}(Z||(Z={})),function(t){t.NoChannelFound="NoChannelFound",t.AccessDenied="AccessDenied",t.CreationFailed="CreationFailed"}(Q||(Q={}));var tt,et;tt=function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return B()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",g={};function y(){}function m(){}function v(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(C([])));_&&_!==n&&r.call(_,i)&&(b=_);var E=v.prototype=y.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(o,i,a,s){var u=c(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function I(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:B}}function B(){return{value:e,done:!0}}return m.prototype=E.constructor=v,v.constructor=m,m.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(A.prototype),A.prototype[a]=function(){return this},t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},tt(et={exports:{}},et.exports);var nt;!function(t){t.Contact="fdc3.contact",t.ContactList="fdc3.contactList",t.Country="fdc3.country",t.Instrument="fdc3.instrument",t.Organization="fdc3.organization",t.Portfolio="fdc3.portfolio",t.Position="fdc3.position"}(nt||(nt={}));var rt;!function(t){t.StartCall="StartCall",t.StartChat="StartChat",t.ViewChart="ViewChart",t.ViewContact="ViewContact",t.ViewQuote="ViewQuote",t.ViewNews="ViewNews",t.ViewInstrument="ViewInstrument",t.ViewAnalysis="ViewAnalysis"}(rt||(rt={}));const ot="ofms365action",it=async(t,e)=>{var n,r,o,i;const{chartImage:a,context:s}=e,{priceCurrent:u,priceHigh:l,priceLow:c,priceOpen:f}=e,d=(null===(r=null===(n=s.id)||void 0===n?void 0:n.ticker)||void 0===r?void 0:r.trim())||void 0,h=(null===(o=s.name)||void 0===o?void 0:o.trim())||void 0;let p,g,y,m,v,b;if(null!=e.timestamp||!a)try{p=new Date(null!==(i=e.timestamp)&&void 0!==i?i:Date.now()).toISOString().replace(/\.\d+Z$/,"+00:00")}catch(n){t.logger.logWarning("Invalid timestamp",e.timestamp)}if(null!=u&&null!=f&&(g=u-f,y=g/f*100,v=g>0?"▲":g<0?"▼":"●",m=g>0?"Good":g<0?"Attention":"Warning"),a){if(!/^image\/(gif|jp(e|e?g)|png)$/i.test(a.type))throw new B("Chart image MIME type not supported");try{b=await(async t=>new Promise(((e,n)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=()=>n(new Error("Failed to convert blob to base64")),r.readAsDataURL(t)})))(a)}catch(t){throw new A("Failed to convert blob to base64",t)}}const w=(await fin.System.getRuntimeInfo()).manifestUrl,_={context:s,intent:a?rt.ViewChart:rt.ViewInstrument,version:U},E=(S=_,(0,$.compress)(JSON.stringify(S),{outputEncoding:"Base64"}));var S;const I=`${w}?$$${ot}=${encodeURIComponent(E)}`,T=`https://start.openfin.co/?manifest=${encodeURIComponent(I)}`,R={$schema:"http://adaptivecards.io/schemas/adaptive-card.json",type:"AdaptiveCard",version:"1.4",body:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[{type:"Container",items:[{type:"TextBlock",text:null!=h?h:d.toUpperCase(),wrap:!0,size:"Large",spacing:"None"},h&&{type:"TextBlock",text:d.toUpperCase(),isSubtle:!0,wrap:!0,spacing:"None"},p&&{type:"TextBlock",text:`{{DATE(${p}, SHORT)}} {{TIME(${p})}}`,wrap:!0,size:"Small"}]}]},null!=u&&!b&&{type:"Column",width:"stretch",items:[{type:"TextBlock",text:u.toFixed(2),size:"ExtraLarge",wrap:!0,horizontalAlignment:"Right"},null!=g&&null!=y&&{type:"TextBlock",text:`${v} ${g.toFixed(2)} (${y.toFixed(2)}%)`,color:m,spacing:"None",wrap:!0,horizontalAlignment:"Right"},(null!=f||null!=l||null!=c)&&{type:"Container",horizontalAlignment:"Right",items:[{type:"ColumnSet",columns:[{type:"Column",width:"stretch",items:[null!=f&&{type:"TextBlock",text:"Open",wrap:!0,horizontalAlignment:"Right",size:"Small",weight:"Bolder",spacing:"None"},null!=l&&{type:"TextBlock",text:"High",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"},null!=c&&{type:"TextBlock",text:"Low",wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small",weight:"Bolder"}]},{type:"Column",width:"auto",items:[null!=f&&{type:"TextBlock",text:f.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=l&&{type:"TextBlock",text:l.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"},null!=c&&{type:"TextBlock",text:c.toFixed(2),wrap:!0,spacing:"None",horizontalAlignment:"Right",size:"Small"}]}]}],spacing:"Small"}]}]},b&&{type:"Image",url:"../hostedContents/1/$value",spacing:"Small"},{type:"ActionSet",actions:[{type:"Action.OpenUrl",url:T,title:"Open"}]}]},x={attachments:[{id:"1",contentType:"application/vnd.microsoft.card.adaptive",content:JSON.stringify(z(R))}],body:{contentType:"html",content:'<attachment id="1"></attachment>'},summary:"Test summary"};if(b){const[,t,e]=[...b.match(/^data:([^;]+);base64,(.+)$/i)];x.hostedContents=[{"@microsoft.graph.temporaryId":"1",contentBytes:e,contentType:t}]}return x},at=t=>t?"msteams:":"https://teams.microsoft.com",st=async t=>{const e=null==t?void 0:t[ot];if(e)try{const t=(t=>{const e=(0,$.decompress)(t,{inputEncoding:"Base64",outputEncoding:"String"});return JSON.parse(e)})(e),{context:n,intent:r}=t,o={context:n,name:r};return await fin.me.interop.fireIntent(o),o}catch(t){const e=t.message;throw new A("Failed to decompress share payload"+(e?` (${e})`:""),t)}},ut=async(t,e,n)=>{const r=await(async(t,e,n=[])=>{try{const r=["id",...n].join(","),{data:o}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(e)}?$select=${r}`);return o}catch(t){if(404!==t.status)throw t}})(t,e,["displayName"]);if(!r)return;let o;if(t.logger.logInfo("Resolved team",r),n){if(o=await(async(t,e,n,r=[])=>{try{const o=["id",...r].join(","),{data:i}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(n)}/channels/${encodeURIComponent(e)}?$select=${o}`);return i}catch(t){if(404!==t.status)throw t}})(t,n,e,["displayName"]),!o)return void t.logger.logWarning(`Could not resolve channel from id ${n}`)}else{t.logger.logInfo("No channel id supplied, using primary channel");const{data:n}=await t.executeApiRequest(`/v1.0/teams/${encodeURIComponent(e)}/primaryChannel?$select=displayName,id`);o=n}const i={channelId:o.id,channelName:o.displayName,teamId:r.id,teamName:r.displayName};return t.logger.logInfo("Resolved team channel",e,n,i),i};class lt{constructor(t,e=!0){this.logger=t.provider.logger,this.provider=t.provider,this.useMsTeamsProtocol=e,this.registerIntentHandlers=this.registerIntentHandlers.bind(this),this.share=this.share.bind(this),this.startCall=this.startCall.bind(this),this.startChat=this.startChat.bind(this),this.enableSharePayloadHandler(),F(H.Teams,this.logger)}async enableSharePayloadHandler(){const{initialOptions:t}=await fin.Application.getCurrentSync().getInfo(),{userAppConfigArgs:e}=t,n=await st(e);n&&this.logger.logInfo("Firing intent",n),fin.Application.getCurrentSync().addListener("run-requested",(async t=>{try{const e=await st(t.userAppConfigArgs);e&&this.logger.logInfo("Firing intent",e)}catch(t){this.logger.logError(t)}}))}async openUrl(t){this.logger.logInfo("openUrl started",t);try{const e=this.useMsTeamsProtocol?t.replace(/^https:\/\/teams.microsoft.com\//i,"msteams:"):t;this.logger.logInfo("Opening url",e),await fin.System.openUrlWithBrowser(e),this.logger.logInfo("openUrl completed")}catch(t){throw this.logger.logError(t),t}}async registerIntentHandlers(){if(this.logger.logInfo("registerIntentHandlers started"),this.unsubscribeIntentHandlers)return{unsubscribe:this.unsubscribeIntentHandlers};try{await fin.me.interop.getContextGroups();const t=await fin.me.interop.registerIntentHandler((async t=>{try{await((t,e)=>async n=>{var r,o,i,a;if(t.logger.logInfo("handleStartCallIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==rt.StartCall.toLowerCase())throw new A(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==nt.Contact.toLowerCase()&&(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())!==nt.ContactList.toLowerCase())throw new A(`Unexpected context type: ${s.type}`);const u=(null===(a=s.type)||void 0===a?void 0:a.toLowerCase())===nt.ContactList.toLowerCase()?s.contacts.map((t=>t.id.email)).filter(Boolean):[s.id.email],l=await e(u);t.logger.logInfo("handleStartCallIntent completed",l)})(this.provider,this.startCall)(t)}catch(t){throw this.logger.logError(t),t}}),"StartCall"),e=await fin.me.interop.registerIntentHandler((async t=>{try{await((t,e)=>async n=>{var r,o,i,a;if(t.logger.logInfo("handleStartChatIntent started",n),(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())!==rt.StartChat.toLowerCase())throw new A(`Unexpected intent type: ${n.name}`);const{context:s}=n;if((null===(o=s.type)||void 0===o?void 0:o.toLowerCase())!==nt.Contact.toLowerCase()&&(null===(i=s.type)||void 0===i?void 0:i.toLowerCase())!==nt.ContactList.toLowerCase())throw new A(`Unexpected context type: ${s.type}`);const u=(null===(a=s.type)||void 0===a?void 0:a.toLowerCase())===nt.ContactList.toLowerCase()?s.contacts.map((t=>t.id.email)).filter(Boolean):[s.id.email],l=await e({emailAddresses:u,topicName:s.name});t.logger.logInfo("handleStartChatIntent completed",l)})(this.provider,this.startChat)(t)}catch(t){throw this.logger.logError(t),t}}),"StartChat");return this.unsubscribeIntentHandlers=async()=>{this.logger.logInfo("unsubscribeIntentHandlers started"),await t.unsubscribe(),await e.unsubscribe(),this.unsubscribeIntentHandlers=void 0,this.logger.logInfo("unsubscribeIntentHandlers completed")},this.logger.logInfo("registerIntentHandlers completed"),{unsubscribe:this.unsubscribeIntentHandlers}}catch(t){const e=new InteropError(t.message);throw this.logger.logError(e),e}}async share(t){var e,n,r,o;this.logger.logInfo("share started",t);try{if(!t.target)throw new B("Target not provided");if((null===(e=t.context)||void 0===e?void 0:e.type.toLowerCase())!==nt.Instrument.toLowerCase())throw new B("Unsupported context type");if(!(null===(r=null===(n=t.context)||void 0===n?void 0:n.id)||void 0===r?void 0:r.ticker))throw new B("Ticker not provided");if(!t.chartImage&&null==t.priceCurrent)throw new B("Current price not provided");const i=null===(o=t.showMessage)||void 0===o||o,a=await it(this.provider,t);let s;if(Array.isArray(t.target)){const{target:e}=t,n=await W(this.provider,e,["displayName","mail"]),r=n.filter(Boolean);if(!r.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",e),e.map((()=>{}));const{id:o,webUrl:u}=await(async(t,e)=>{const n={chatType:e.length>2?"group":"oneOnOne",members:e.map((e=>({"@odata.type":"#microsoft.graph.aadUserConversationMember",roles:q(e)?["guest"]:["owner"],"user@odata.bind":`${t.apiOrigin}/v1.0/users('${e.id}')`})))},{data:r}=await t.executeApiRequest("/v1.0/chats","POST",n);return r})(this.provider,[this.provider.currentUser,...r]),{data:l}=await this.provider.executeApiRequest(`/v1.0/chats/${encodeURIComponent(o)}/messages`,"POST",a);this.logger.logInfo("Sent chat message",l),i&&await this.openUrl(u),s=D(n)}else{const{target:e}=t,n=await ut(this.provider,e.teamId,e.channelId);if(!n)return void this.logger.logWarning("Could not resolve team/channel",e.teamId,e.channelId);const{channelId:r,teamId:o}=n,{data:u}=await this.provider.executeApiRequest(`/v1.0/teams/${encodeURIComponent(o)}/channels/${encodeURIComponent(r)}/messages`,"POST",a);this.logger.logInfo("Sent chat message",u),i&&await this.openUrl(u.webUrl),s=n}return this.logger.logInfo("share completed",s),s}catch(t){throw this.logger.logError(t),t}}async startCall(t=[],e=!1){this.logger.logInfo("startCall started",t);try{let n=`${at(this.useMsTeamsProtocol)}/l/call/0/0?`;const r=await W(this.provider,t,["displayName","mail"]),o=r.filter(Boolean).map((t=>encodeURIComponent(t.userPrincipalName)));if(!o.length)return this.logger.logWarning("Could not resolve any valid users from supplied emails",t),t.map((()=>{}));n+=`users=${o.join(",")}&withVideo=${e}`,this.logger.logInfo("Opening Teams",n),await fin.System.openUrlWithBrowser(n);const i=D(r);return this.logger.logInfo("startCall completed",i),i}catch(t){throw this.logger.logError(t),t}}async startChat(t){this.logger.logInfo("startChat started",t);try{let e,n;if("teamId"in t){const{teamId:r,channelId:o}=t,i=await ut(this.provider,r,o);if(!i)return void this.logger.logWarning("Could not resolve team/channel",r,o);e=`${at(this.useMsTeamsProtocol)}/l/channel/${encodeURIComponent(i.channelId)}/${encodeURIComponent(i.channelName)}?groupId=${i.teamId}&tenantId=${this.provider.tenantId}`,n=i}else{const{emailAddresses:r,message:o,topicName:i}=t;e=`${at(this.useMsTeamsProtocol)}/l/chat/0/0?`;const a=await W(this.provider,r,["displayName","mail"]),s=a.filter(Boolean).map((t=>encodeURIComponent(t.userPrincipalName)));if(!s.length)return this.logger.logWarning("Could not resolve any valid users from email addresses",r),r.map((()=>{}));e+=`users=${s.join(",")}`,i&&(e+=`&topicName=${encodeURIComponent(i)}`),o&&(e+=`&message=${encodeURIComponent(o)}`),n=D(a)}return this.logger.logInfo("Opening Teams",e),await fin.System.openUrlWithBrowser(e),this.logger.logInfo("startChat completed",n),n}catch(t){throw this.logger.logError(t),t}}}},91:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.c=e,n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r=n(n.s=54),o=r.MS,i=r.cF,a=r.AK,s=r.M_,u=r.cX,l=r.BT,c=r._W,f=r.Pg,d=r.$j,h=r.U$,p=r.U7;

/***/ }),

/***/ "../../node_modules/@openfin/workspace/index.js":
/*!******************************************************!*\
  !*** ../../node_modules/@openfin/workspace/index.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

(()=>{var e={847:(e,t)=>{var a={2346:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMostReadable=t.darkenColor=t.lightenColor=void 0;const r=n(a(6535));t.lightenColor=(e,t)=>o(e,"lighten",t),t.darkenColor=(e,t)=>o(e,"darken",t);const o=(e,t,a)=>{if(a&&(a<0||a>100))throw new Error(`${a} must be a number between 0 and 100`);return(0,r.default)(e)[t](a).toString()};t.getMostReadable=(e,t)=>r.default.mostReadable(e,t).toHexString()},2317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconSize=t.Transition=t.LineHeight=t.FontWeight=t.FontSize=t.FontFamily=t.Shadow=t.Radius=t.UnitPx=t.Unit=t.SizeName=t.Size=t.Color=void 0,t.Color={white:"#FFFFFF",lightGray1:"#FAFBFE",lightGray2:"#F3F5F8",lightGray3:"#ECEEF1",lightGray4:"#DDDFE4",lightGray5:"#C9CBD2",neutralGray:"#7D808A",neutralGray80:"rgba(125,128,138,0.8)",silverGray:"#C0C1C2",darkGray1:"#53565F",darkGray2:"#383A40",darkGray3:"#2F3136",darkGray4:"#24262B",darkGray5:"#1E1F23",darkGray6:"#111214",openFinDarkest:"#3D39CD",openFinDarker:"#4642E0",openFin:"#504CFF",openFinLight:"#5254FB",openFinLighter:"#5C5EFE",openFinLightest:"#6864FF",functional1:"#207735",functional2:"#46C8F1",functional3:"#0A76D3",functional4:"#6CADE5",functional5:"#0A76D3",functional6:"#882BFE",functional7:"#F31818",functional8:"#C93400",functional9:"#FF5E60",functional10:"#F48F00",purple:"#8C61FF",lightblue:"#36C3FE",aqua:"#00CC88",yellow:"#FFEB00",salmon:"#FF8C4C",pink:"#FF5E60",lightpink:"#FF8FB8",white00:"rgba(255,255,255,0.0)",white10:"rgba(255,255,255,0.1)",white20:"rgba(255,255,255,0.2)",white30:"rgba(255,255,255,0.3)",white40:"rgba(255,255,255,0.4)",white50:"rgba(255,255,255,0.5)",white60:"rgba(255,255,255,0.6)",white70:"rgba(255,255,255,0.7)",white80:"rgba(255,255,255,0.8)",white90:"rgba(255,255,255,0.9)",black00:"rgba(0,0,0,0.0)",black10:"rgba(0,0,0,0.1)",black20:"rgba(0,0,0,0.2)",black30:"rgba(0,0,0,0.3)",black40:"rgba(0,0,0,0.4)",black50:"rgba(0,0,0,0.5)",black60:"rgba(0,0,0,0.6)",black70:"rgba(0,0,0,0.7)",black80:"rgba(0,0,0,0.8)",black90:"rgba(0,0,0,0.9)",transparent:"transparent"},t.Size={xsmall:"xsmall",small:"small",base:"base",large:"large",xlarge:"xlarge",xxlarge:"xxlarge",xxxlarge:"xxxlarge",xxxxlarge:"xxxxlarge"},t.SizeName={[t.Size.xsmall]:"Extra Small",[t.Size.small]:"Small",[t.Size.base]:"Base",[t.Size.large]:"Large",[t.Size.xlarge]:"Extra Large",[t.Size.xxlarge]:"2X Large",[t.Size.xxxlarge]:"3X Large",[t.Size.xxxxlarge]:"4X Large"},t.Unit={[t.Size.xsmall]:4,[t.Size.small]:8,[t.Size.base]:12,[t.Size.large]:16,[t.Size.xlarge]:20,[t.Size.xxlarge]:24,[t.Size.xxxlarge]:32,[t.Size.xxxxlarge]:48},t.UnitPx={[t.Size.xsmall]:"4px",[t.Size.small]:"8px",[t.Size.base]:"12px",[t.Size.large]:"16px",[t.Size.xlarge]:"20px",[t.Size.xxlarge]:"24px",[t.Size.xxxlarge]:"32px",[t.Size.xxxxlarge]:"48px"},t.Radius={[t.Size.xsmall]:"2px",[t.Size.small]:"4px",[t.Size.base]:"8px",[t.Size.large]:"24px",pill:"100vh",round:"50%",none:"0"},t.Shadow={[t.Size.base]:"0 4px 4px rgba(0, 0, 0, 0.25)"},t.FontFamily=["Inter","system-ui","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"].join(","),t.FontSize={[t.Size.xsmall]:"8px",[t.Size.small]:"10px",[t.Size.base]:"12px",[t.Size.large]:"14px",[t.Size.xlarge]:"16px",[t.Size.xxlarge]:"18px",[t.Size.xxxlarge]:"20px",[t.Size.xxxxlarge]:"40px"},t.FontWeight={normal:400,bold:600},t.LineHeight={ui:1,heading:1.2,text:1.5},t.Transition={base:"200ms cubic-bezier(0.16, 1, 0.3, 1)",none:"0ms"},t.IconSize={[t.Size.xsmall]:t.UnitPx.small,[t.Size.small]:t.UnitPx.base,[t.Size.base]:"15px",[t.Size.large]:t.UnitPx.xlarge,[t.Size.xlarge]:t.UnitPx.xxlarge,[t.Size.xxlarge]:t.UnitPx.xxxlarge,[t.Size.xxxlarge]:t.UnitPx.xxxxlarge}},6893:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTheme=void 0;const n=a(2317),r=a(2346),o=a(5939),i={fontFamily:n.FontFamily,fontSize:n.FontSize,fontWeight:n.FontWeight,lineHeight:n.LineHeight,iconSize:n.IconSize,radius:n.Radius,shadow:n.Shadow,transition:n.Transition,unit:n.Unit,px:n.UnitPx},s=(e,t)=>({[`${e}Active`]:(0,r.darkenColor)(t,2),[`${e}Hover`]:(0,r.lightenColor)(t,5),[`${e}Focused`]:(0,r.getMostReadable)(t,[n.Color.white,n.Color.darkGray5]),[`${e}Text`]:(0,r.getMostReadable)(t,[n.Color.white,n.Color.darkGray5])});t.createTheme=e=>Object.assign(Object.assign({},i),{palette:Object.assign(Object.assign(Object.assign({},e),s(o.Palette.brandPrimary,e.brandPrimary)),s(o.Palette.brandSecondary,e.brandSecondary))})},5939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0,t.Palette={background1:"background1",background2:"background2",background3:"background3",background4:"background4",background5:"background5",background6:"background6",brandPrimary:"brandPrimary",brandSecondary:"brandSecondary",brandPrimaryActive:"brandPrimaryActive",brandPrimaryHover:"brandPrimaryHover",brandPrimaryFocused:"brandPrimaryFocused",brandPrimaryText:"brandPrimaryText",brandSecondaryActive:"brandSecondaryActive",brandSecondaryHover:"brandSecondaryHover",brandSecondaryFocused:"brandSecondaryFocused",brandSecondaryText:"brandSecondaryText",inputBackground:"inputBackground",inputColor:"inputColor",inputPlaceholder:"inputPlaceholder",inputDisabled:"inputDisabled",inputFocused:"inputFocused",inputBorder:"inputBorder",statusSuccess:"statusSuccess",statusWarning:"statusWarning",statusCritical:"statusCritical",statusActive:"statusActive",textDefault:"textDefault",textHelp:"textHelp",textInactive:"textInactive",borderNeutral:"borderNeutral",contentBackground1:"contentBackground1",contentBackground2:"contentBackground2",contentBackground3:"contentBackground3",contentBackground4:"contentBackground4",contentBackground5:"contentBackground5",linkDefault:"linkDefault",linkHover:"linkHover"}},6535:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,a=/\s+$/;function n(r,o){if(o=o||{},(r=r||"")instanceof n)return r;if(!(this instanceof n))return new n(r,o);var i=function(n){var r,o,i,s={r:0,g:0,b:0},c=1,d=null,l=null,u=null,p=!1,h=!1;return"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(a,"").toLowerCase();var n,r=!1;if(k[e])e=k[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=O.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=O.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=O.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=O.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=O.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=O.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=O.hex8.exec(e))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),a:F(n[4]),format:r?"name":"hex8"}:(n=O.hex6.exec(e))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),format:r?"name":"hex"}:(n=O.hex4.exec(e))?{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),a:F(n[4]+""+n[4]),format:r?"name":"hex8"}:!!(n=O.hex3.exec(e))&&{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),format:r?"name":"hex"}}(n)),"object"==e(n)&&(D(n.r)&&D(n.g)&&D(n.b)?(r=n.r,o=n.g,i=n.b,s={r:255*P(r,255),g:255*P(o,255),b:255*P(i,255)},p=!0,h="%"===String(n.r).substr(-1)?"prgb":"rgb"):D(n.h)&&D(n.s)&&D(n.v)?(d=M(n.s),l=M(n.v),s=function(e,t,a){e=6*P(e,360),t=P(t,100),a=P(a,100);var n=Math.floor(e),r=e-n,o=a*(1-t),i=a*(1-r*t),s=a*(1-(1-r)*t),c=n%6;return{r:255*[a,i,o,o,s,a][c],g:255*[s,a,a,i,o,o][c],b:255*[o,o,s,a,a,i][c]}}(n.h,d,l),p=!0,h="hsv"):D(n.h)&&D(n.s)&&D(n.l)&&(d=M(n.s),u=M(n.l),s=function(e,t,a){var n,r,o;function i(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=P(e,360),t=P(t,100),a=P(a,100),0===t)n=r=o=a;else{var s=a<.5?a*(1+t):a+t-a*t,c=2*a-s;n=i(c,s,e+1/3),r=i(c,s,e),o=i(c,s,e-1/3)}return{r:255*n,g:255*r,b:255*o}}(n.h,d,u),p=!0,h="hsl"),n.hasOwnProperty("a")&&(c=n.a)),c=S(c),{ok:p,format:n.format||h,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:c}}(r);this._originalInput=r,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||i.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function r(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,r,o=Math.max(e,t,a),i=Math.min(e,t,a),s=(o+i)/2;if(o==i)n=r=0;else{var c=o-i;switch(r=s>.5?c/(2-o-i):c/(o+i),o){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:r,l:s}}function o(e,t,a){e=P(e,255),t=P(t,255),a=P(a,255);var n,r,o=Math.max(e,t,a),i=Math.min(e,t,a),s=o,c=o-i;if(r=0===o?0:c/o,o==i)n=0;else{switch(o){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:r,v:s}}function i(e,t,a,n){var r=[A(Math.round(e).toString(16)),A(Math.round(t).toString(16)),A(Math.round(a).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(e,t,a,n){return[A(I(n)),A(Math.round(e).toString(16)),A(Math.round(t).toString(16)),A(Math.round(a).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s-=t/100,a.s=C(a.s),n(a)}function d(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.s+=t/100,a.s=C(a.s),n(a)}function l(e){return n(e).desaturate(100)}function u(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l+=t/100,a.l=C(a.l),n(a)}function p(e,t){t=0===t?0:t||10;var a=n(e).toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(-t/100*255))),a.g=Math.max(0,Math.min(255,a.g-Math.round(-t/100*255))),a.b=Math.max(0,Math.min(255,a.b-Math.round(-t/100*255))),n(a)}function h(e,t){t=0===t?0:t||10;var a=n(e).toHsl();return a.l-=t/100,a.l=C(a.l),n(a)}function f(e,t){var a=n(e).toHsl(),r=(a.h+t)%360;return a.h=r<0?360+r:r,n(a)}function g(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function m(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var a=n(e).toHsl(),r=[n(e)],o=360/t,i=1;i<t;i++)r.push(n({h:(a.h+i*o)%360,s:a.s,l:a.l}));return r}function w(e){var t=n(e).toHsl(),a=t.h;return[n(e),n({h:(a+72)%360,s:t.s,l:t.l}),n({h:(a+216)%360,s:t.s,l:t.l})]}function y(e,t,a){t=t||6,a=a||30;var r=n(e).toHsl(),o=360/a,i=[n(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(n(r));return i}function v(e,t){t=t||6;for(var a=n(e).toHsv(),r=a.h,o=a.s,i=a.v,s=[],c=1/t;t--;)s.push(n({h:r,s:o,v:i})),i=(i+c)%1;return s}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,a,n=this.toRgb();return e=n.r/255,t=n.g/255,a=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+n+"%)":"hsva("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+n+"%)":"hsla("+t+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return i(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,a,n,r){var o=[A(Math.round(e).toString(16)),A(Math.round(t).toString(16)),A(Math.round(a).toString(16)),A(I(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*P(this._r,255))+"%",g:Math.round(100*P(this._g,255))+"%",b:Math.round(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%)":"rgba("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(b[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),a=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=n(e);a="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(h,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(l,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(v,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},n.fromRatio=function(t,a){if("object"==e(t)){var r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]="a"===o?t[o]:M(t[o]));t=r}return n(t,a)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(e,t,a){a=0===a?0:a||50;var r=n(e).toRgb(),o=n(t).toRgb(),i=a/100;return n({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},n.readability=function(e,t){var a=n(e),r=n(t);return(Math.max(a.getLuminance(),r.getLuminance())+.05)/(Math.min(a.getLuminance(),r.getLuminance())+.05)},n.isReadable=function(e,t,a){var r,o,i,s,c,d=n.readability(e,t);switch(o=!1,(i=a,"AA"!==(s=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(c=(i.size||"small").toLowerCase())&&"large"!==c&&(c="small"),r={level:s,size:c}).level+r.size){case"AAsmall":case"AAAlarge":o=d>=4.5;break;case"AAlarge":o=d>=3;break;case"AAAsmall":o=d>=7}return o},n.mostReadable=function(e,t,a){var r,o,i,s,c=null,d=0;o=(a=a||{}).includeFallbackColors,i=a.level,s=a.size;for(var l=0;l<t.length;l++)(r=n.readability(e,t[l]))>d&&(d=r,c=n(t[l]));return n.isReadable(e,c,{level:i,size:s})||!o?c:(a.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],a))};var k=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},b=n.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(k);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var a=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return Math.min(1,Math.max(0,e))}function x(e){return parseInt(e,16)}function A(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}function I(e){return Math.round(255*parseFloat(e)).toString(16)}function F(e){return x(e)/255}var W,T,_,O=(T="[\\s|\\(]+("+(W="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",_="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+_),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+_),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+_),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function D(e){return!!O.CSS_UNIT.exec(e)}return n}()}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return a[e].call(o.exports,o,o.exports,r),o.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.createTheme=e.Palette=e.Color=void 0;var t=r(2317);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return t.Color}});var a=r(5939);Object.defineProperty(e,"Palette",{enumerable:!0,get:function(){return a.Palette}});var n=r(6893);Object.defineProperty(e,"createTheme",{enumerable:!0,get:function(){return n.createTheme}})})();var i=t;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})},877:()=>{},67:()=>{},978:(e,t,a)=>{"use strict";a.d(t,{Nt:()=>j});var n={};a.r(n),a.d(n,{getItem:()=>G,removeItem:()=>U,setItem:()=>$});var r=a(675),o=a(723);a(181);var i=a(70);const s=async e=>{const t=e?fin.Window.wrapSync(e):fin.Window.getCurrentSync(),a=await t.getOptions();return a.workspacePlatform?.windowType&&"enterprise"===a.workspacePlatform.windowType};const c=(e,t=0)=>{let a,n,r=!1;const o=async n=>{const i=await e(...n);if(r){await new Promise((e=>setTimeout(e,t)));const e=a;return a=void 0,r=!1,o(e)}return i};return(...e)=>(n?(r=!0,a=e):n=o(e).catch((e=>{throw console.error("makeDebouncedFunc",e),e})).finally((()=>{n=void 0})),n)};var d;!function(e){e.Top="top",e.Below="below"}(d||(d={}));const l=async e=>{try{return!!e&&"maximized"===await e.getState()}catch(e){return console.warn("parentWindowMaximized - Failed to get parent window state",e),!1}};async function u(e,t,a,n,r,o){const s=!!e&&(0,i.Iq)(e),c=await(async(e,t)=>{try{return e?await e.getBounds():t}catch(e){return console.warn("getParentWindowBounds - Failed to get parent window bounds",e),t}})(s,o);if(n===d.Below){if(!s||await l(s)){const e=s?(await(0,i.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,i.V1)(e).left-t/2,top:r?e.bottom-128:e.bottom+12,width:t,height:a}}return{left:(0,i.V1)(c).left-t/2,top:r?c.bottom-128:c.bottom+12,width:t,height:a}}if(!s||await l(s)){const e=s?(await(0,i.ur)(c)).availableRect:(await fin.System.getMonitorInfo()).primaryMonitor.availableRect;return{left:(0,i.V1)(e).left-t/2,top:e.top+20,width:t,height:a}}return{left:(0,i.V1)(c).left-t/2,top:c.top+20,width:t,height:a}}c((async function(e,t,a,n,r){const o=t.getBoundingClientRect(),s=await u(e,o.width,o.height,a,n,r);if(0===s.width||0===s.height)return;const c=(0,i.Tv)();await c.setBounds(s),await c.show();const d=setTimeout((()=>c.close()),n?5e3:3e3),l=()=>{clearTimeout(d),c.close()};if(e){const t=(0,i.Iq)(e);t.on("bounds-changing",(()=>l())),t.on("blurred",(()=>l())),t.on("maximized",(()=>l())),t.on("minimized",(()=>l())),t.on("restored",(()=>l()))}}),10);a(277),a(957);var p=a(438);const h=__webpack_require__(/*! lodash.debounce */ "../../node_modules/lodash.debounce/index.js");var f,g=a.n(h);!function(e){e.CurrentWorkspaceId="currentWorkspaceId",e.LastFocusedBrowserWindow="lastFocusedBrowserWindow",e.MachineName="machineName",e.NewTabPageLayout="NewTabPageLayout",e.NewTabPageSort="NewTabPageSort",e.DockPosition="DockPosition",e.SelectedColorScheme="SelectedColorScheme",e.ThemePaletteSheet="ThemePaletteSheet",e.HasMovedStore="HasMovedStore",e.PageDragState="BrowserPageDragState"}(f||(f={}));const m=f;function w(){return localStorage.getItem(m.MachineName)??"unknown"}let y;async function v(){return y||(y=await fin.System.getMachineId()),y}var k=a(333);const b=async e=>({...e,layoutDetails:{machineId:await v(),machineName:w()}}),S=async e=>{const t=await(async(e,t)=>({pageId:(0,k.N)(),title:e,layout:await b(t),isReadOnly:!1}))(e.title,Q(e.layout));return e.panels&&(t.panels=e.panels.map((e=>({...e,viewOptions:K(e.viewOptions)})))),{...e,...t}};var P=a(79),C=a(786);var x=a(102);const A=(e,t)=>t?`${t}-${e.uuid}-${e.name}`:`__browser_window__-${e.uuid}-${e.name}`,M=new Map,I=(e,t)=>{const a=A(e,t);return n=a,M.has(n)||M.set(n,(0,x.A)(n)),M.get(n)();// removed by dead control flow
 var n; };var F,W,T,_,O;!function(e){e.CloseBrowserWindow="close-browser-window",e.QuitPlatform="quit-platform",e.ClosePage="close-page",e.AddToChannel="add-to-channel",e.RemoveFromChannel="remove-from-channel",e.OpenSaveModalInternal="open-save-modal-internal",e.DuplicatePage="duplicate-page",e.SetSelectedScheme="set-selected-scheme",e.ShowBrowserIndicator="show-browser-indicator",e.SetSelectedLanguage="set-selected-language",e.RefreshBookmarksInternal="refresh-bookmarks",e.GetLayoutsWithSelectedViewsInternal="get-layouts-with-selected-views",e.FocusAndExpandSearchInternal="focus-and-expand-search"}(F||(F={})),function(e){e.GetPages="get-pages",e.GetActivePageForWindow="get-active-page-for-window",e.AttachPagesToWindow="attach-pages-to-window",e.DetachPagesFromWindow="detach-pages-from-window",e.SetActivePageForWindow="set-active-page-for-window",e.RenamePage="rename-page",e.ReorderPagesForWindow="reorder-pages-for-window",e.UpdatePageForWindow="update-page-for-window",e.UpdatePagesWindowOptions="update-pages-window-options",e.IsDetachingPages="is-detaching-pages",e.IsActivePageChanging="is-active-page-changing"}(W||(W={})),function(e){e.GetApps="get-apps",e.GetCuratedContent="get-curated-content",e.GetRecentlyVisited="get-recently-visited",e.GetSearchProviders="get-search-providers"}(T||(T={})),function(e){e.CreateBookmarkNode="create-bookmark-node",e.GetBookmarkNode="get-bookmark-node",e.SearchBookmarkNodes="search-bookmark-nodes",e.UpdateBookmarkNode="update-bookmark-node",e.DeleteBookmarkNode="delete-bookmark-node"}(_||(_={})),function(e){e.UpdateFavoriteEntries="update-favorite-entries",e.UpdateContentMenu="update-content-menu",e.NavigateContentMenu="navigate-content-menu"}(O||(O={}));const D={...F,...W,...O},E=(0,x.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-bookmarks`),R=e=>({identity:e,openfinWindow:fin.Window.wrapSync(e),_bookmarks:{_createBookmarkNode:async e=>(async e=>(await E()).dispatch(_.CreateBookmarkNode,e))(e),_getBookmarkNode:async e=>(async e=>(await E()).dispatch(_.GetBookmarkNode,e))(e),_searchBookmarkNodes:async e=>(async e=>(await E()).dispatch(_.SearchBookmarkNodes,e))(e),_updateBookmarkNode:async e=>(async e=>(await E()).dispatch(_.UpdateBookmarkNode,e))(e),_deleteBookmarkNode:async e=>(async e=>(await E()).dispatch(_.DeleteBookmarkNode,e))(e)},getPages:async()=>(await(0,P.bW)(e)).dispatch(P.OF.GetPagesForWindow,e),getPage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetPageForWindow,{identity:e,pageId:t}),addPage:async t=>j().Browser.wrapSync(e)._addPage(t),_addPage:async(t,a)=>{const n=await(0,P.bW)(e),r={identity:e,page:t,insertionIndex:a?.index,multiInstanceViewBehavior:a?.multiInstanceViewBehavior};return n.dispatch(P.OF.AddPage,r)},removePage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.DetachPagesFromWindow,{identity:e,pageIds:[t]}),reparentPage:async t=>j().Browser.wrapSync(e)._reparentPage(t),_reparentPage:async t=>{const{pageId:a}=t,n=await(0,P.bW)(e),r=(await n.dispatch(P.OF.GetAllAttachedPages,void 0)).find((({pageId:e})=>e===a));if(!r)throw new Error(`Reparent Page Error: Target page with pageId ${a} not found`);r.multiInstanceViewBehavior="reparent";const o={identity:e,pages:[r],insertionIndex:t.index};return n.dispatch(P.OF.AttachPagesToWindow,o)},setActivePage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.SetActivePage,{identity:e,pageId:t}),updatePage:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.UpdatePageForWindow,t)},reorderPages:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.ReorderPagesForWindow,t)},_openGlobalContextMenu:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.OpenGlobalContextMenuInternal,t)},replaceToolbarOptions:async t=>{await(0,P.bW)(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{toolbarOptions:t}})},replaceWindowStateButtonOptions:async t=>{await(0,P.bW)(e);const a=fin.Window.wrapSync(e);await a.updateOptions({workspacePlatform:{windowStateButtonOptions:t}})},updateBrowserWindowTitle:async t=>{const a=fin.Window.wrapSync(e);"string"!=typeof t?await a.updateOptions({workspacePlatform:{title:t}}):console.warn("Type string for window title is deprecated, please use WindowTitle type instead",t)},_openViewTabContextMenu:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.OpenViewTabContextMenuInternal,t)},_openPageTabContextMenu:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.OpenPageTabContextMenuInternal,t)},_openSaveModal:async t=>{await(0,P.bW)(e);return(await I(e)).dispatch(D.OpenSaveModalInternal,t)},_getLayoutsWithSelectedViews:async()=>(await I(e)).dispatch(D.GetLayoutsWithSelectedViewsInternal,e),_openSaveButtonContextMenu:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.OpenSaveButtonContextMenuInternal,t)},_addDefaultPage:async t=>{const a=await(0,P.bW)(e);return t.identity=e,a.dispatch(P.OF.AddDefaultPage,t)},_trackRemovedTab:async t=>(await(0,P.bW)(e)).dispatch(P.OF.TrackRemovedTabInternal,t),_restoreRemovedTab:async t=>(await(0,P.bW)(e)).dispatch(P.OF.RestoreRemovedTabInternal,t),_trackVisitedSite:async t=>(await(0,P.bW)(e)).dispatch(P.OF.TrackVisitedSiteInternal,t),_getRecentlyVisitedSites:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetRecentlyVisitedSitesInternal,t),_getFrequentlyVisitedSites:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetFrequentlyVisitedSitesInternal,t),_searchSites:async t=>(await(0,P.bW)(e)).dispatch(P.OF.SearchSitesInternal,{identity:e,req:t}),_getSearchProviders:async()=>(await(0,P.bW)(e)).dispatch(P.OF.GetSearchProvidersInternal,{identity:e}),_getCuratedContent:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetCuratedContentInternal,{identity:e,req:t}),_handleRequestNavigation:async t=>(await(0,P.bW)(e)).dispatch(P.OF.HandleRequestNavigationInternal,t)}),B=e=>{const t=fin.Platform.wrapSync(e);return{wrapSync:e=>R(e),createWindow:async a=>{const n=(()=>{const e=`browser-window-startup-${(0,k.N)()}`;return C.A.markStart(e),e})();(e=>{fin.Application.wrapSync({uuid:fin.me.identity.uuid}).once("window-shown",(()=>{C.A.markAndMeasure("browser-window-shown",e)}))})(n),await(0,P.bW)(e);const r=await t.createWindow(a);return(e=>{C.A.markAndMeasure("browser-window-started",e)})(n),R(r.identity)},getAllAttachedPages:async()=>(await(0,P.bW)(e)).dispatch(P.OF.GetAllAttachedPages,void 0),getAllWindows:async()=>{await(0,P.bW)(e);return(await(0,i.Io)()).map((e=>R(e.identity)))},getUniquePageTitle:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetUniquePageTitle,t),getLastFocusedWindow:async()=>(await(0,P.bW)(e)).dispatch(P.OF.GetLastFocusedBrowserWindow,void 0),getPageByViewIdentity:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetPageByViewIdentity,t)}},N=e=>({createPage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.CreateSavedPageInternal,t),deletePage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.DeleteSavedPageInternal,t),updatePage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.UpdateSavedPageInternal,t),getPage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetSavedPage,t),getPages:async t=>(await(0,P.bW)(e)).dispatch(P.OF.GetSavedPages,t),savePage:async t=>(await(0,P.bW)(e)).dispatch(P.OF.SavePage,t),createWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.CreateSavedWorkspace,t),deleteWorkspace:async t=>{const a=j(),n=await a.getCurrentWorkspace();if(n.workspaceId===t)throw new Error(`Cannot delete current active workspace ${n.title}`);return(await(0,P.N)(e)).dispatch(P.OF.DeleteSavedWorkspace,t)},updateWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.UpdateSavedWorkspace,t),getWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.GetSavedWorkspace,t),getWorkspaces:async t=>(await(0,P.N)(e)).dispatch(P.OF.GetSavedWorkspaces,t),saveWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.SaveWorkspace,t),getDockProviderConfig:async t=>(await(0,P.N)(e)).dispatch(P.OF.GetDockProviderConfig,t),saveDockProviderConfig:async t=>(await(0,P.N)(e)).dispatch(P.OF.SaveDockProviderConfig,t)});var L;!function(e){e.UpdatePlatformThemeScheme="update-platform-theme-scheme"}(L||(L={}));(0,x.A)("of-workspace-notifications-sync");a(695);const $=(e,t)=>{localStorage.setItem(`${o.$h}-${e}`,t)},G=e=>localStorage.getItem(`${o.$h}-${e}`),U=e=>localStorage.removeItem(`${o.$h}-${e}`),V=r.qT.System,z=e=>Object.entries(e).reduce(((e,[t,a])=>`${e}--workspace-palette-${t}: ${a};`),""),H=(e,t)=>({selectedTab:"dark"===t?e.background3:e.background1});new class{constructor(e){this.providerStorage=e,this.getVarsByScheme=e=>"dark"===e?this.darkPaletteVars:this.lightPaletteVars,this.setWorkspaceStorageProxy=e=>{this.workspaceStorage=e},this.trySynchronizeWorkspaceStorage=async()=>{if(this.workspaceStorage){const e=this.getScheme();if(await this.workspaceStorage.setItem(m.SelectedColorScheme,e),this.darkPaletteVars&&this.lightPaletteVars)if("dark"===e||"light"===e)await this.workspaceStorage.setItem(m.ThemePaletteSheet,`:root{${this.getVarsByScheme(e)}}`);else{const e=`@media (prefers-color-scheme: dark){:root {${this.getVarsByScheme("dark")}}}`,t=`@media (prefers-color-scheme: light){:root{${this.getVarsByScheme("light")}}}`;await this.workspaceStorage.setItem(m.ThemePaletteSheet,`${t}${e}`)}}},this.setPalettes=async({light:e,dark:t})=>{this.lightPaletteVars=z({...e,...H(e,"light")}),this.darkPaletteVars=z({...t,...H(t,"dark")})}}setScheme(e){this.providerStorage.setItem(m.SelectedColorScheme,e)}getScheme(){return null===this.providerStorage.getItem(m.SelectedColorScheme)&&this.providerStorage.setItem(m.SelectedColorScheme,V),this.providerStorage.getItem(m.SelectedColorScheme)}}(n);const q=e=>({getThemes:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetThemes,void 0),setSelectedScheme:async t=>(await(0,P.N)(e)).dispatch(P.OF.SetSelectedScheme,t),getSelectedScheme:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetSelectedScheme,void 0)}),j=()=>(e=>{const t=fin.Platform.wrapSync(e);let a;const n=Object.assign(t,{applySnapshot:async(t,a)=>{if("string"!=typeof t&&!t?.windows)throw new Error("Not a valid browser snapshot");return fin.Platform.wrapSync(e).applySnapshot(t,a)},getSnapshot:()=>fin.Platform.wrapSync(e).getSnapshot().then((e=>e)),getViewSnapshot:t=>fin.Platform.wrapSync(e).getViewSnapshot(t),createView:(t,a,n)=>fin.Platform.wrapSync(e).createView(t,a,n),launchApp:async t=>(console.warn("launchApp method is deprecated. It is recommended to use createView - https://developers.openfin.co/of-docs/docs/platform-getting-started#add-a-view-to-an-existing-window or  createWindow - https://developers.openfin.co/of-docs/docs/platform-getting-started#create-a-platform-window instead."),t.target||(t.target={uuid:o.$h,name:o.vL,entityType:o.fT||"unknown"}),(await(0,P.N)(e)).dispatch(P.OF.LaunchApp,t)),_invokeCustomAction:async(t,a)=>{const n=await(0,P.N)(e),o={actionId:t,payload:{...a,callerType:a.callerType||r.vc.API}};return n.dispatch(P.OF.InvokeCustomActionInternal,o)},_requestQuitPlatformDialog:async t=>(await(0,P.N)(e)).dispatch(P.OF.RequestQuitPlatformDialogInternal,t),getCurrentWorkspace:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetCurrentWorkspace,void 0),applyWorkspace:async(t,a)=>(await(0,P.N)(e)).dispatch(P.OF.ApplyWorkspace,{...t,options:a}),restoreLastSavedWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.RestoreLastSavedWorkspaceInternal,t),setActiveWorkspace:async t=>(await(0,P.N)(e)).dispatch(P.OF.SetActiveWorkspace,t),getLanguage:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetLanguage),_getLanguageResources:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetLanguageResourcesInternal),setLanguage:async t=>(await(0,P.N)(e)).dispatch(P.OF.SetLanguage,t),_raiseAnalytics:async t=>{if(a||(a=await(0,P.KZ)(e)),"object"==typeof a&&a?.analytics?.isSupported)return(await(0,P.N)(e)).dispatch(P.OF.Analytics,t);e.uuid},getNotificationsConfig:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetNotificationsConfig),_refreshBookmarksInternal:async()=>(await(0,P.N)(e)).dispatch(P.OF.RefreshBookmarksInternal),_launchBookmarkInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.LaunchBookmarkInternal,t),_updateDockFavoritesInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.UpdateDockFavoritesInternal,t),_updateContentMenuInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.UpdateContentMenuInternal,t),_launchDockEntryInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.LaunchDockEntryInternal,t),_setDockFavoritesInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.SetDockFavoritesOrderInternal,t),_setDefaultDockButtonsOrderInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.SetDefaultDockButtonsOrderInternal,t),_removeDockFavoriteInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.RemoveDockFavoriteInternal,t),_addDockFavoriteInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.AddDockFavoriteInternal,t),_navigateContentMenuInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.NavigateContentMenuInternal,t),_openDockWorkspacesContextMenuInternal:async()=>(await(0,P.N)(e)).dispatch(P.OF.GetDockWorkspacesContextMenuInternal),_handleDockWorkspacesMenuResponseInternal:async t=>(await(0,P.N)(e)).dispatch(P.OF.HandleDockWorkspacesMenuResponseInternal,t),_focusAndExpandSearchInternal:async()=>(await(0,P.N)(e)).dispatch(P.OF.FocusAndExpandSearchInternal),Theme:q(e),Browser:B(e),Storage:N(e)});return n})(fin.me.identity);const X=(e,t)=>e.content?{...e,content:e.content.map((e=>X(e,t)))}:{...e,componentState:t(e.componentState)},K=e=>({...e,name:void 0}),Q=e=>{const t={...e};return X(t,K)},Z=e=>{const t=[];return(e&&Array.isArray(e)?e:[]).forEach((e=>{if("component"===e.type)return t.push(e.componentState);const a=Z(e.content);t.push(...a)})),t};new Map,new Map;const Y=async(e,t)=>{const a=(e=>{const t=fin.Platform.Layout.wrapSync(e);return{show:async()=>{const a=await t.getConfig(),{settings:n,dimensions:r}=a,o=await s(e);await t.replace({...a,settings:{...n,hasHeaders:!0,reorderEnabled:!0},dimensions:{...r,headerHeight:o?28:30}})},hide:async e=>{const a=await t.getConfig(),{settings:n,dimensions:r}=await a;await t.replace({...a,settings:{...n,hasHeaders:!1,reorderEnabled:e?.settings?.reorderEnabled??!1},dimensions:{...r,headerHeight:0}})},isShowingTabs:async()=>{try{const e=await t.getConfig(),{settings:a}=await e;return a.hasHeaders}catch(e){return console.error("failed to get layout config: ",e),!0}}}})({...i.$p,layoutName:e.layoutContainerKey}),n=await a.isShowingTabs();t>1?n||await a.show():1===t&&n&&await a.hide({settings:{reorderEnabled:!0}})},J=(g()((async e=>{try{const t=await(async e=>fin.Platform.Layout.wrapSync({...fin.me.identity,layoutName:e}).getConfig())(e.layoutContainerKey),a=t.content?Z(t.content):[],n=a.length;n>1?(e=>{"multiView"!==e.attachedPageType&&j().Browser.wrapSync(i.$p).updatePage({pageId:e.pageId,page:{singleViewName:null,attachedPageType:"multiView"}})})(e):1===n&&(async(e,t)=>{const a=j().Browser.wrapSync(i.$p);if("singleView"!==e.attachedPageType){const n=await S(e),r=await j().Browser.getUniquePageTitle();delete n.layout;const o={...n,singleViewName:t,title:r,hasUnsavedChanges:!1,attachedPageType:"singleView"};await a.updatePage({pageId:e.pageId,page:o})}})(e,a[0].name),await Y(e,n)}catch(e){}}),50,{leading:!1,trailing:!0}),__webpack_require__(/*! react-i18next */ "../../node_modules/react-i18next/dist/es/index.js"),__webpack_require__(/*! i18next */ "../../node_modules/i18next/dist/cjs/i18next.js"));a.n(J)().t;new class{constructor(){this.queue=[],this.locked=!1}lock(){return new Promise((e=>{this.locked?this.queue.push(e):(this.locked=!0,e())}))}unlock(){if(this.queue.length>0){const e=this.queue.shift();e&&e()}else this.locked=!1}};new Map;const ee=((e,t)=>{const a=e;return a.workspacePlatform||(a.workspacePlatform={}),a.workspacePlatform._internalDeferShowOptions={setAsForeground:!!t,deferShowEnabled:!0,autoShow:a.workspacePlatform?._internalAutoShow||a.workspacePlatform?._internalDeferShowOptions?.autoShow||void 0===a.autoShow||a.autoShow},a.autoShow=!1,a})({alwaysOnTop:!0,autoShow:!1,frame:!1,resizable:!1,showTaskbarIcon:!1});!function(e=ee){const t=new Map}();a(523);function te(e,t){return async(a,...n)=>{e.has(a)&&e.get(a).forEach((e=>e(...n))),t&&await t({event:a,payload:n})}}function ae(e,t){return t&&t((t=>{const{event:a,payload:n}=t;e.has(a)&&e.get(a).forEach((e=>e(...n)))})),(t,a)=>{e.has(t)||e.set(t,new Set),e.get(t).add(a)}}function ne(e){return(t,a)=>{e.has(t)||e.set(t,new Set);const n=e.get(t),r=(...e)=>{a(...e),n.delete(r)};n.add(r)}}function re(e){return(t,a)=>{e.has(t)&&e.get(t).delete(a)}}i.Q.BrowserMenu;(function(e){const t=new Map;te(t,(t=>o.cI&&fin.InterApplicationBus.publish(e,t))),ae(t,(t=>o.cI&&fin.InterApplicationBus.subscribe({uuid:fin.me.uuid},e,t))),re(t),ne(t)})("window.menu"),c((()=>(0,p.v1)().getChildWindows()),500);new Map;new Map;g()((async()=>{const e=await fin.Platform.getCurrentSync().Application.getChildWindows();let t,a=!1;for(const n of e)if(n.identity.name===i.Q.BrowserMenu||n.identity.name===i.Q.BrowserSaveMenu?t=n:await(0,i.hb)(n.identity)&&(a=!0),a)break;!a&&t&&t.close()}),100,{leading:!1,trailing:!0});var oe,ie;!function(e){e.Save="Save",e.SaveAs="SaveAs"}(oe||(oe={})),function(e){e.GlobalMenu="global-menu",e.ContextMenu="context-menu",e.RenameSupertab="rename-supertab",e.AddEditBookmark="add-edit-bookmark",e.DropdownMenu="dropdown-menu"}(ie||(ie={}));const se=__webpack_require__(/*! dexie */ "../../node_modules/dexie/import-wrapper.mjs"),ce=e=>e+"-"+fin.me.uuid,de=(e,t)=>{const a=o.AT&&o.cI&&new se.Dexie(e);return a&&a.version(.1).stores({[t]:""}),a},le=(e,t)=>{const a=de(ce(e),t),n=de(e,t);if(!a||!n)throw new Error("Unable to migrate store - IndexDB not supported");return(async(e,t,a)=>{const n=G(m.HasMovedStore),r=n?JSON.parse(n):{};if(r&&r[a])return;r[a]=!0,$(m.HasMovedStore,JSON.stringify(r));const o=await e[a].toArray();await t[a].bulkPut(o)})(n,a,e),a},ue="visited-sites",pe="removed-tab-stack",he=(o.AT&&o.cI&&le("openfin-home-pages","pages"),o.AT&&o.cI&&new se.Dexie(ce("openfin-enterprise-site-history")));he&&he.version(.1).stores({[ue]:"id, url"});const fe=o.AT&&o.cI&&new se.Dexie(ce("openfin-enterprise-tab-history"));fe&&fe.version(.1).stores({[pe]:""});var ge;!function(e){e.Label="normal",e.Separator="separator",e.Submenu="submenu",e.Checkbox="checkbox"}(ge||(ge={}));ge.Separator;var me;!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(me||(me={}));(0,x.A)(`${"undefined"!=typeof fin&&fin?.me.identity.uuid}-enterprise-dock`);const we="dock-provider-configs",ye=o.AT&&o.cI&&new se.Dexie(ce("dock-provider-configs"));ye&&ye.version(.1).stores({[we]:""});const ve="workspaces";o.AT&&o.cI&&le("openfin-workspace-platform-workspaces",ve);a(250);i.$p.uuid,i.Q.BrowserAddressSearchPrefix;a(179)},675:(e,t,a)=>{"use strict";a.d(t,{qT:()=>o,vc:()=>h});var n,r,o,i,s,c,d,l,u,p,h;a(179),a(250);!function(e){e.UrlChange="URL_CHANGE",e.ViewAdded="VIEW_ADDED",e.ViewRemoved="VIEW_REMOVED",e.PageContextAdded="PAGE_CONTEXT_ADDED",e.PageContextRemoved="PAGE_CONTEXT_REMOVED"}(n||(n={})),function(e){e.NewWindow="NewWindow",e.NewPage="NewPage",e.SavePage="SavePage",e.SavePageAs="SavePageAs",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.CloseWindow="CloseWindow",e.RestoreChanges="RestoreChanges",e.SaveWorkspace="SaveWorkspace",e.SaveWorkspaceAs="SaveWorkspaceAs",e.RenameWorkspace="RenameWorkspace",e.SwitchWorkspace="SwitchWorkspace",e.DeleteWorkspace="DeleteWorkspace",e.Downloads="Downloads",e.OpenStorefront="OpenStorefront",e.Appearance="Appearance",e.Quit="Quit",e.Custom="Custom"}(r||(r={})),function(e){e.Light="light",e.Dark="dark",e.System="system"}(o||(o={})),function(e){e.Close="Close",e.Duplicate="Duplicate",e.Rename="Rename",e.Save="Save",e.SaveAs="Save As",e.NewPage="New Page",e.DeletePage="Delete Page",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Refresh="Refresh",e.CloseOthers="Close others",e.Delete="Delete",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(i||(i={})),function(e){e.Lock="Lock",e.ShowHideTabs="ShowHideTabs",e.AddToChanel="AddToChannel",e.Print="Print",e.Pin="Pin"}(s||(s={})),function(e){e.EditName="Edit Name",e.Move="Move",e.Delete="Delete"}(c||(c={})),function(e){e.NewView="NewView",e.DuplicateViews="DuplicateView",e.OpenWithDefaultBrowser="OpenWithDefaultBrowser",e.ReloadViews="ReloadTab",e.CloseViews="CloseTab",e.AddToChannel="AddToChannel",e.RemoveFromChannel="RemoveFromChannel",e.Back="Back",e.Forward="Forward",e.Print="Print",e.PrintAll="PrintAll",e.PrintScreen="PrintScreen",e.Custom="Custom"}(d||(d={})),function(e){e.ShowHideTabs="ShowHideTabs",e.ColorLinking="ColorLinking",e.PresetLayouts="PresetLayouts",e.LockUnlockPage="LockUnlockPage",e.SaveMenu="SaveMenu",e.SavePage="SavePage",e.Minimise="Minimise",e.Maximise="Maximise",e.Close="Close",e.Custom="Custom"}(l||(l={})),function(e){e.SavePage="SavePage",e.SaveWorkspace="SaveWorkspace",e.SavePageAs="SavePageAs",e.SaveWorkspaceAs="SaveWorkspaceAs",e.Custom="Custom"}(u||(u={})),function(e){e.Browser="browser",e.Platform="platform"}(p||(p={})),function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(h||(h={}));var f;!function(e){e.SAVE_PAGE="SAVE_PAGE",e.SAVE_WORKSPACE="SAVE_WORKSPACE",e.SAVE_PAGE_AS="SAVE_PAGE_AS",e.SAVE_WORKSPACE_AS="SAVE_WORKSPACE_AS",e.RENAME_PAGE="RENAME_PAGE",e.RENAME_WORKSPACE="RENAME_WORKSPACE"}(f||(f={}))},248:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var n=a(438),r=a(786);const o=(e,t)=>{r.A.markStart(`${e}-registration`),(0,n.BY)().once("started",(()=>r.A.markAndMeasure("workspace-app-started",`${e}-registration`)));const a=fin.Window.wrapSync(t);a.once("initialized",(()=>r.A.markAndMeasure(`${e}-window-initialized`,`${e}-registration`))),a.once("shown",(()=>{r.A.markAndMeasure(`${e}-show`,`${e}-registration`)}))}},834:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CLIAction:()=>A.PK,CLIFilterOptionType:()=>A.oo,CLITemplate:()=>A.fC,deregister:()=>F,hide:()=>T,register:()=>I,show:()=>W});var n=a(723),r=a(786),o=a(277),i=a(70);const s="0",c="2",d="3",l="5",u="6";var p=a(695),h=a(79),f=a(575);var g=a(905);const m=()=>{};function w(e){const t={};let a=[];let n=[];let r=null;let o=g.Zo.Initial;t.getStatus=()=>o,t.getResultBuffer=()=>a,t.setResultBuffer=e=>{a=e,a?.length&&t.onChange()},t.getRevokedBuffer=()=>n,t.setRevokedBuffer=e=>{n=e,n?.length&&t.onChange()},t.setUpdatedContext=e=>{r=e,null!==r&&t.onChange()},t.getUpdatedContext=()=>r,t.onChange=m;const i={};return t.res=i,i.close=()=>{o!==g.Zo.Close&&(o=g.Zo.Close,t.onChange())},i.open=()=>{o!==g.Zo.Open&&(o=g.Zo.Open,t.onChange())},i.respond=a=>{const n=function(e=[],t=[],a="ascending"){const n=[],r=new Map;t.forEach((e=>{if(e.key)return r.set(e.key,e);n.push(e)}));let o=e.map((e=>{if(e.key){const t=r.get(e.key);if(t)return r.delete(e.key),t}return e}));return o.push(...r.values(),...n),o="ascending"===a?o.sort(((e,t)=>(e?.score??1/0)-(t?.score??1/0))):o.sort(((e,t)=>(t?.score??1/0)-(e?.score??1/0))),o}(t.getResultBuffer(),a,e);t.setResultBuffer(n)},i.revoke=(...e)=>{const a=new Set(e),n=t.getResultBuffer().filter((({key:e})=>{const t=a.has(e);return t&&a.delete(e),!t}));t.setResultBuffer(n),a.size&&(t.getRevokedBuffer().forEach((e=>a.add(e))),t.setRevokedBuffer([...a]))},i.updateContext=e=>{t.setUpdatedContext(e)},t}const y=new Map;async function v(e){const{id:t,providerId:a}=e,n=P.getProviderOrFail(a);let r=y.get(t);r||(r=function(e,t){const a=new Set;let n=!1;return{close:()=>{n=!0;for(const e of a)e()},req:{id:e,...t,context:t?.context||{},onClose:e=>{a.add(e),n&&e()},removeListener:e=>{a.delete(e)}}}}(t,e),y.set(t,r));const o=w(),i=()=>{const e=o.getResultBuffer();o.setResultBuffer([]);const n=o.getRevokedBuffer();o.setRevokedBuffer([]);const r=o.getUpdatedContext();o.setUpdatedContext(null);const i=o.getStatus();!async function(e){(await(0,p.gj)()).dispatch(s,e)}({id:t,providerId:a,results:e,revoked:n,status:i,context:r})};let c=!0,d=!1;o.onChange=()=>{if(c)return c=!1,void i();d||(d=!0,setTimeout((()=>{d=!1,i()}),100))};try{const{results:e,context:i}=await n.onUserInput(r.req,o.res),s=o.getStatus();return{id:t,providerId:a,status:s,results:e,context:i}}catch(e){return console.error(`OpenFin/Workspace/Home. Uncaught exception in search provider ${a} for search ${t}`,"This is likely a bug in the implementation of the search provider.",e),{id:t,providerId:a,error:e?.message}}}async function k(){for(const{req:e,close:t}of y.values())t(),y.delete(e.id)}async function b(e,t){const a=P.getProviderOrFail(e.providerId);return e.result.dispatcherIdentity=t,a.onResultDispatch?.(e.result)}function S(e){const t=y.get(e.id);t?.close(),y.delete(e.id)}const P=new f.xM("home"),C=async e=>{await(0,p.nA)();!("skipPlatformInitCheck"in e&&!0===e.skipPlatformInitCheck)&&await(0,h.KZ)(fin.me.identity);P.assertNotAlreadyRegistered(e.id),P.setProvider(e);const t=await(0,p.gj)();return function(e){e.homeChannelActionsRegistered||(e.homeChannelActionsRegistered=!0,e.register(s,v),e.register(u,S),e.register(l,b),e.addDisconnectionListener(k))}(t),t.dispatch(c,{id:e.id,title:e.title,icon:e.icon,clientAPIVersion:n.et,identity:fin.me.identity,scoreOrder:e.scoreOrder,commandCode:e.commandCode,description:e.description,hidden:e.hidden,listTitle:e.listTitle,inputPlaceholder:e.inputPlaceholder,logoUrl:e.logoUrl,dispatchFocusEvents:e.dispatchFocusEvents})};var x=a(248),A=a(872);let M;const I=async e=>{if(!e.icon)throw new Error(`${e.id} provider needs to have icon property defined.`);(0,x.H)("home",i.F2);const t=await C(e);return M=new Promise(((a,i)=>{try{(0,o.GR)({allowed:!0,componentVersion:t?.workspaceVersion}),n.et,a({...t,clientAPIVersion:n.et,setSearchQuery:async t=>(await(0,p.N7)()).dispatch("set-search-query",{query:t,providerID:e.id})})}catch(e){(0,o.GR)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),i(e)}finally{r.A.markEndAndMeasure("home-registration")}})),M},F=async e=>{P.deleteProvider(e);const t=await(0,p.gj)();await t.dispatch(d,e)};async function W(){r.A.markStart("home-show"),await M;const e=await(0,p.N7)();await e.dispatch("show-home",void 0)}async function T(){await M;const e=await(0,p.N7)();await e.dispatch("hide-home",void 0)}},575:(e,t,a)=>{"use strict";a.d(t,{xM:()=>s});const n=__webpack_require__(/*! title-case */ "../../node_modules/title-case/dist.es2015/index.js");class r extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`${a} Provider. ${a} Provider${t?` with id ${t}`:""} is not currently registered.`)}}class o extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`${a} Provider. ${a} Provider${t?` with id ${t}`:""} is already registered. Call \`deregister\` before registering again.`)}}class i extends Error{constructor(e,t){const a=(0,n.titleCase)(e);super(`Failed to get ${a} Provider. ${a} Provider with id ${t} is not currently registered.`)}}class s{constructor(e){this.providersMap=new Map,this.providerType=e}assertNotAlreadyRegistered(e){if(this.hasProvider(e))throw new o(this.providerType,e)}assertRegistered(e){if(!this.hasProvider(e))throw new r(this.providerType,e)}getProvider(e){return this.providersMap.get(e)}hasProvider(e){return this.providersMap.has(e)}setProvider(e){this.providersMap.set(e.id,e)}deleteProvider(e){this.providersMap.delete(e)}getProviderOrFail(e){const t=this.getProvider(e);if(!t)throw new i(this.providerType,e);return t}clearProviders(){this.providersMap.clear()}}},129:(e,t,a)=>{"use strict";var n,r,o;a.d(t,{P:()=>r,R:()=>o}),function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(n||(n={})),function(e){e.UserAction="user-action",e.FocusChange="focus-change",e.Reload="reload"}(r||(r={})),function(e){e.Active="active",e.Default="default"}(o||(o={}))},600:(e,t,a)=>{"use strict";var n;a.d(t,{a:()=>n}),function(e){e.ActionButton="ActionButton",e.DropdownButton="DropdownButton"}(n||(n={}))},872:(e,t,a)=>{"use strict";var n,r,o;a.d(t,{PK:()=>n,fC:()=>r,oo:()=>o}),function(e){e.Suggestion="suggestion"}(n||(n={})),function(e){e.Contact="Contact",e.Custom="Custom",e.List="List",e.Plain="Plain",e.SimpleText="SimpleText",e.Loading="Loading",e.Error="Error"}(r||(r={})),function(e){e.MultiSelect="MultiSelect"}(o||(o={}))},179:(e,t,a)=>{"use strict";a(129),a(872),a(710),a(184),a(600)},710:(e,t,a)=>{"use strict";var n,r;a.d(t,{v:()=>n,z:()=>r}),function(e){e.Snapshot="snapshot",e.Manifest="manifest",e.View="view",e.External="external"}(n||(n={})),function(e){e.LandingPage="landingPage",e.AppGrid="appGrid"}(r||(r={}))},184:(e,t,a)=>{"use strict";a.d(t,{SM:()=>o,ce:()=>n,in:()=>i,np:()=>r});const n={Container:"Container",Button:"Button",SplitButton:"SplitButton"},r={Text:"Text",Image:"Image",List:"List"},o={...n,...r};var i;!function(e){e.Primary="primary",e.Secondary="secondary",e.TextOnly="textOnly"}(i||(i={}))},598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppManifestType:()=>o.v,StorefrontTemplate:()=>o.z,deregister:()=>y,hide:()=>v,register:()=>w,show:()=>k});var n=a(277),r=a(695),o=a(710),i=a(723),s=a(786),c=a(70),d=a(79),l=a(575);let u=!1;async function p(e,t,a){const n=await(0,r.p4)();try{return await n.dispatch(e.action,e.payload)}catch(r){if(r instanceof Error&&-1!==r.toString().indexOf(e.action))return u||console.warn("You are using a newer version of the Workspace client library that is not supported by the currently running workspace provider. Please upgrade the Workspace to version 9.0 or later."),u=!0,await n.dispatch(t.action,t.payload),a;throw r}}const h=new l.xM("storefront"),f=async e=>{await(0,d.KZ)(fin.me.identity);const t=await(0,r.N7)();return h.assertNotAlreadyRegistered(e.id),h.setProvider(e),(e=>{e.storefrontChannelActionsRegistered||(e.storefrontChannelActionsRegistered=!0,e.register("get-storefront-provider-apps",(e=>h.getProviderOrFail(e).getApps())),e.register("get-storefront-provider-footer",(e=>h.getProviderOrFail(e).getFooter())),e.register("get-storefront-provider-landing-page",(e=>h.getProviderOrFail(e).getLandingPage())),e.register("get-storefront-provider-navigation",(e=>h.getProviderOrFail(e).getNavigation())),e.register("launch-storefront-provider-app",(({id:e,app:t})=>h.getProviderOrFail(e).launchApp(t))))})(t),e.clientAPIVersion=i.et,p({action:"register-provider",payload:{providerType:"storefront",info:e}},{action:"register-storefront-provider",payload:e},{workspaceVersion:"unknown"})};var g=a(248);let m;const w=async e=>{(0,g.H)("store",c.gQ);const t=await f(e);return m=new Promise(((a,o)=>{try{(0,n.xt)({allowed:!0,componentVersion:t?.workspaceVersion}),i.et,a({clientAPIVersion:i.et,workspaceVersion:t?.workspaceVersion??"",updateAppCardButtons:async t=>{const a=await(0,r.mQ)();await a.dispatch("update-app-card-button-config",{...t,id:e.id,title:e.title,icon:e.icon,platformIdentity:fin.me.identity})}})}catch(e){(0,n.xt)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),o(e)}finally{s.A.markEndAndMeasure("store-registration")}})),m},y=async e=>(await m,h.assertRegistered(e),h.deleteProvider(e),await(0,r.nA)(),p({action:"deregister-provider",payload:{providerType:"storefront",id:e}},{action:"deregister-storefront-provider",payload:e})),v=async()=>(await m,await(0,r.nA)(),p({action:"hide-provider-window",payload:{providerType:"storefront"}},{action:"hide-storefront"})),k=async()=>(s.A.markStart("store-show"),await m,await(0,r.nA)(),p({action:"show-provider-window",payload:{providerType:"storefront"}},{action:"show-storefront"}))},250:(e,t,a)=>{"use strict";var n;!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(n||(n={}))},79:(e,t,a)=>{"use strict";var n;a.d(t,{KZ:()=>o,N:()=>i,OF:()=>n,bW:()=>s}),function(e){e.LaunchApp="launchApp",e.SavePage="savePage",e.GetSavedPage="getSavedPage",e.CreateSavedPage="createSavedPage",e.UpdateSavedPage="updateSavedPage",e.DeleteSavedPage="deleteSavedPage",e.GetSavedPages="getSavedPages",e.CreateSavedPageInternal="createSavedPageInternal",e.UpdateSavedPageInternal="updateSavedPageInternal",e.DeleteSavedPageInternal="deleteSavedPageInternal",e.UpdatePageForWindow="updatePageForWindow",e.AttachPagesToWindow="attachPagesToWindow",e.DetachPagesFromWindow="detachPagesFromWindow",e.ReorderPagesForWindow="reorderPagesForWindow",e.SetActivePage="setActivePage",e.AddPage="addPage",e.AddDefaultPage="addDefaultPage",e.GetAllAttachedPages="getAllAttachedPages",e.GetActivePageIdForWindow="getActivePageIdForWindow",e.GetPagesForWindow="getPagesForWindow",e.GetPageForWindow="getPageForWindow",e.GetSavedPageMetadata="getSavedPageMetadata",e.GetUniquePageTitle="getUniquePageTitle",e.GetLastFocusedBrowserWindow="getLastFocusedBrowserWindow",e.GetPageByViewIdentity="getPageByViewIdentity",e.GetThemes="getThemes",e.GetSelectedScheme="getSelectedScheme",e.SetSelectedScheme="setSelectedScheme",e.OpenGlobalContextMenuInternal="openGlobalContextMenuInternal",e.OpenViewTabContextMenuInternal="openViewTabContextMenuInternal",e.OpenPageTabContextMenuInternal="openPageTabContextMenuInternal",e.OpenSaveButtonContextMenuInternal="openSaveButtonContextMenuInternal",e.InvokeCustomActionInternal="invokeCustomActionInternal",e.RequestQuitPlatformDialogInternal="requestQuitPlatformDialogInternal",e.GetSavedWorkspace="getSavedWorkspace",e.CreateSavedWorkspace="createSavedWorkspace",e.UpdateSavedWorkspace="updateSavedWorkspace",e.DeleteSavedWorkspace="deleteSavedWorkspace",e.GetSavedWorkspaces="getSavedWorkspaces",e.SaveWorkspace="saveWorkspace",e.GetCurrentWorkspace="getCurrentWorkspace",e.ApplyWorkspace="applyWorkspace",e.RestoreLastSavedWorkspaceInternal="restoreLastSavedWorkspaceInternal",e.SetActiveWorkspace="setActiveWorkspace",e.IsBrowserInitialized="isBrowserInitialized",e.Analytics="analyticsInternal",e.GetLanguage="getLanguage",e.GetLanguageResourcesInternal="getLanguageResourcesInternal",e.SetLanguage="setLanguage",e.GetDockProviderConfig="getDockProviderConfig",e.SaveDockProviderConfig="saveDockProviderConfig",e.HandleSaveModalOnPageClose="handleSaveModalOnPageClose",e.ShouldPageClose="shouldPageClose",e.ShouldWindowClose="shouldWindowClose",e.CopyPage="copyPage",e.HandlePageChanges="handlePageChanges",e.MarkUnsavedPagesAsSavedInternal="markUnsavedPagesAsSavedInternal",e.TrackRemovedTabInternal="trackRemovedTabInternal",e.RestoreRemovedTabInternal="restoreRemovedTabInternal",e.TrackVisitedSiteInternal="trackVisitedSiteInternal",e.GetRecentlyVisitedSitesInternal="getRecentlyVisitedSitesInternal",e.GetFrequentlyVisitedSitesInternal="getFrequentlyVisitedSitesInternal",e.SearchSitesInternal="searchSitesInternal",e.GetSearchProvidersInternal="getSearchProvidersInternal",e.GetCuratedContentInternal="getCuratedContentInternal",e.HandleRequestNavigationInternal="handleRequestNavigationInternal",e.RefreshBookmarksInternal="refreshBookmarksInternal",e.LaunchBookmarkInternal="launchBookmarkInternal",e.GetNotificationsConfig="getNotificationsConfig",e.UpdateDockFavoritesInternal="updateDockFavoritesInternal",e.UpdateContentMenuInternal="updateContentMenuInternal",e.LaunchDockEntryInternal="launchDockEntryInternal",e.SetDockFavoritesOrderInternal="setDockFavoritesOrderInternal",e.NavigateContentMenuInternal="navigateContentMenuInternal",e.SetDefaultDockButtonsOrderInternal="setDefaultDockButtonsOrderInternal",e.GetDockWorkspacesContextMenuInternal="getDockWorkspacesContextMenuInternal",e.HandleDockWorkspacesMenuResponseInternal="handleDockWorkspacesMenuResponseInternal",e.RemoveDockFavoriteInternal="removeDockFavoriteInternal",e.AddDockFavoriteInternal="addDockFavoriteInternal",e.FocusAndExpandSearchInternal="focusAndExpandSearchInternal"}(n||(n={}));const r=async e=>fin.Platform.wrapSync(e).getClient(),o=async e=>{const t=await r(e),a="Target is not a Workspace Platform. Target must call WorkspacePlatform.init";let n;try{n=await t.dispatch("isWorkspacePlatform")}catch(e){throw new Error(a)}if("boolean"==typeof n&&n)return console.warn("You are using an older version of the workspace platform. Please update your workspace platform."),n;if("object"==typeof n&&n.isWorkspacePlatform)return n;throw new Error(a)},i=async e=>(await o(e),r(e)),s=async e=>{const t=await o(e);if("object"==typeof t&&!0!==t?.isBrowserInitialized)throw new Error("Target is not a Browser-enabled Workspace Platform.");return r(e)}},695:(e,t,a)=>{"use strict";a.d(t,{N7:()=>f,gj:()=>l,mQ:()=>h,nA:()=>p,p4:()=>c});var n=a(102),r=a(723),o=a(70),i=a(905);const s=(0,n.A)("__of_workspace_protocol__"),c=s,d=s,l=(0,n.A)(i.BT),u=e=>{const t=new URL(e);return t.searchParams.append("isLaunchedViaLib","true"),t.toString()},p=async()=>{if(!await(0,o.C)(o.xt)){if(r.jw||-1===navigator.userAgent.indexOf("Win"))return void await fin.Application.startFromManifest(u(r.m7));await fin.System.openUrlWithBrowser(u(r.t8))}},h=async()=>(await p(),c()),f=async()=>(await p(),d())},905:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Zo:()=>o});const n="__search-openfin-browser-home-topic__";var r,o;!function(e){e.Fetching="fetching",e.Fetched="fetched",e.Complete="complete"}(r||(r={})),function(e){e[e.Initial=0]="Initial",e[e.Open=1]="Open",e[e.Close=2]="Close"}(o||(o={}))},957:(e,t,a)=>{"use strict";var n=a(847),r=(a(70),a(978),a(675),a(877)),o=a.n(r),i=a(67),s=a.n(i);s(),o();a(695),a(79);const c={[n.Palette.brandPrimary]:"#0A76D3",[n.Palette.statusSuccess]:n.Color.functional1,[n.Palette.statusWarning]:n.Color.functional10,[n.Palette.statusCritical]:n.Color.functional7,[n.Palette.statusActive]:n.Color.functional3,[n.Palette.contentBackground1]:"#0A76D3",[n.Palette.contentBackground2]:"#000000",[n.Palette.contentBackground3]:"#000000",[n.Palette.contentBackground4]:"#000000",[n.Palette.contentBackground5]:"#000000"},d={...c,[n.Palette.background1]:n.Color.white,[n.Palette.background2]:n.Color.lightGray1,[n.Palette.background3]:n.Color.lightGray2,[n.Palette.background4]:n.Color.lightGray3,[n.Palette.background5]:n.Color.lightGray4,[n.Palette.background6]:n.Color.lightGray5,[n.Palette.brandSecondary]:n.Color.lightGray4,[n.Palette.inputBackground]:n.Color.lightGray3,[n.Palette.inputColor]:n.Color.darkGray5,[n.Palette.inputPlaceholder]:n.Color.darkGray2,[n.Palette.inputDisabled]:n.Color.neutralGray,[n.Palette.inputFocused]:n.Color.lightGray5,[n.Palette.inputBorder]:n.Color.neutralGray,[n.Palette.textDefault]:n.Color.darkGray5,[n.Palette.textHelp]:n.Color.darkGray3,[n.Palette.textInactive]:n.Color.neutralGray},l={...c,[n.Palette.background1]:n.Color.darkGray6,[n.Palette.background2]:n.Color.darkGray5,[n.Palette.background3]:n.Color.darkGray4,[n.Palette.background4]:n.Color.darkGray3,[n.Palette.background5]:n.Color.darkGray2,[n.Palette.background6]:n.Color.darkGray1,[n.Palette.brandSecondary]:n.Color.darkGray2,[n.Palette.inputBackground]:n.Color.darkGray1,[n.Palette.inputColor]:n.Color.white,[n.Palette.inputPlaceholder]:n.Color.lightGray5,[n.Palette.inputDisabled]:n.Color.neutralGray,[n.Palette.inputFocused]:n.Color.lightGray5,[n.Palette.inputBorder]:n.Color.neutralGray,[n.Palette.textDefault]:n.Color.white,[n.Palette.textHelp]:n.Color.lightGray5,[n.Palette.textInactive]:n.Color.neutralGray};n.Color.lightGray4,n.Color.darkGray5,n.Color.darkGray2,n.Color.darkGray5},438:(e,t,a)=>{"use strict";a.d(t,{BY:()=>l,MW:()=>n,v1:()=>d});var n,r,o=a(723);!function(e){e.Workspace="openfin-workspace",e.OldWorkspace="openfin-browser"}(n||(n={})),function(e){e.FinProtocol="fin-protocol"}(r||(r={}));const i={uuid:o.$h},s={uuid:n.Workspace},c=e=>{if(!o.cI)throw new Error("getApplication cannot be used in a non OpenFin env. Avoid using this during pre-rendering.");return fin.Application.wrapSync(e)},d=()=>c(i),l=()=>c(s)},102:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(723);const r=n.YY&&"complete"!==document.readyState&&new Promise((e=>document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))));function o(e){let t;const a=new Set;return()=>{if(!n.cI)throw new Error("getChannelClient cannot be used outside an OpenFin env. Avoid using this method during pre-rendering.");return t||(t=(async()=>{await r;const o={clientAPIVersion:n.et},i=await fin.InterApplicationBus.Channel.connect(e,{payload:o});return i.onDisconnection((async()=>{a.forEach((e=>e())),a.clear(),console.warn(`disconnected from channel provider ${e}`),t=void 0})),i})().then((e=>(e.addDisconnectionListener=e=>{a.add(e)},e))).catch((a=>{throw t=void 0,new Error(`failed to connect to channel provider ${e}: ${a}`)}))),t}}},723:(e,t,a)=>{"use strict";var n;a.d(t,{$h:()=>c,AT:()=>i,YY:()=>o,cI:()=>r,et:()=>g,fT:()=>l,jw:()=>u,m7:()=>h,t8:()=>p,vL:()=>d}),function(e){e.Local="local",e.Dev="dev",e.Staging="staging",e.Prod="prod"}(n||(n={}));const r="undefined"!=typeof window&&"undefined"!=typeof fin,o=("undefined"==typeof process||process.env,"undefined"!=typeof window),i=o&&"undefined"!=typeof indexedDB,s=o?window.origin:n.Local,c=r&&fin.me.uuid,d=r&&fin.me.name,l=r&&fin.me.entityType,u="prod"===n.Local,p=(n.Dev,n.Staging,n.Prod,"fins://system-apps/workspace"),h="https://workspace.openfin.co/workspace/21.0.18/app.json",f=e=>e.startsWith("http://")||e.startsWith("https://")?e:s+e,g=(f("https://workspace.openfin.co/workspace/21.0.18"),f("https://workspace.openfin.co/workspace/21.0.18"),"undefined"!=typeof WORKSPACE_DOCS_PLATFORM_URL&&f(WORKSPACE_DOCS_PLATFORM_URL),"undefined"!=typeof WORKSPACE_DOCS_CLIENT_URL&&f(WORKSPACE_DOCS_CLIENT_URL),"21.0.18");"undefined"!=typeof WORKSPACE_BUILD_SHA&&WORKSPACE_BUILD_SHA},786:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});const n="of-workspace-";const r=new class{mark(e){performance.mark(`${n}${e}`)}markStart(e){performance.mark(`${n}${e}-start`)}markEnd(e){performance.mark(`${n}${e}-end`)}markEndAndMeasure(e){performance.mark(`${n}${e}-end`);try{return performance.measure(`${n}${e}`,`${n}${e}-start`,`${n}${e}-end`)}catch(e){0}}markAndMeasure(e,t){performance.mark(`${n}${e}`);try{return performance.measure(`${n}${e}-measure`,`${n}${t}-start`,`${n}${e}`)}catch(e){0}}reportWorkspacePerformanceEntries(){return performance.getEntriesByType("measure").filter((e=>e.name.startsWith(n)))}reportWorkspacePerformance(){return this.reportWorkspacePerformanceEntries().map((e=>({name:e.name.replace(`${n}`,"").replace("-measure",""),duration:e.duration})))}}},181:(e,t,a)=>{"use strict";var n,r;a.d(t,{sP:()=>i}),function(e){e.Home="/home/",e.HomeSearch="/home/?deeplink=search",e.HomePagesRename="/home/pages/rename/",e.Dock="/dock/",e.Docs="/provider/docs/",e.Storefront="/storefront/",e.DeprecatedAlert="/provider/deprecated-alert/",e.Analytics="/provider/analytics/",e.Provider="/provider/"}(n||(n={})),function(e){e.Browser="/browser/",e.BrowserPopupMenu="/popup-menu/",e.BrowserPopupMenuSaveModal="/popup-menu/save-modal/",e.BrowserPopupMenuLayouts="/popup-menu/layouts/layouts/",e.BrowserPopupMenuColorLinking="/popup-menu/color-linking/color-linking/",e.BrowserIndicator="/indicator/",e.BrowserPopupMenuAddressSearchResultsView="/popup-menu/address-search-results-view/",e.ResponseModal="/popup-menu/response-modal/",e.CloseConfirmationModal="/popup-menu/close-confirmation-modal/",e.EnterpriseBrowser="/enterprise/",e.EnterpriseContextMenu="/context-menu/",e.EnterpriseBookmarkDialog="/bookmark-dialog/",e.EnterpriseStorageProxy="/enterprise/storage-proxy",e.DropdownMenu="/dropdown-menu/",e.EnterpriseDock="/dock/"}(r||(r={}));const o="/microsoft-365-integration-assets/",i={IconOpenFinLogo:"/icons/openfinlogo.svg",IconFilter:"/icons/filter.svg",LightStorefront:"/icons/store-icon-light.png",DarkStorefront:"/icons/store-icon-dark.png",CallIconLight:"/icons/call-icon-light.svg",CallIconDark:"/icons/call-icon-dark.svg",ChatIconLight:"/icons/chat-icon-light.svg",ChatIconDark:"/icons/chat-icon-dark.svg",MessageIconLight:"/icons/message-icon-light.svg",MessageIconDark:"/icons/message-icon-dark.svg",Microsoft365Assets:{Microsoft365DocumentIcon:`${o}microsoft-365-document-icon.svg`,Microsoft365ExcelIcon:`${o}microsoft-365-excel-icon.svg`,Microsoft365PowerpointIcon:`${o}microsoft-365-powerpoint-icon.svg`,Microsoft365OutlookIcon:`${o}microsoft-365-outlook-icon.svg`,Microsoft365TeamsIcon:`${o}microsoft-365-teams-icon.svg`,Microsoft365Icon:`${o}microsoft-365-icon.svg`,PDFFileIcon:`${o}pdf-file-icon.svg`},DockIconLight:"/icons/dock-icon-light.png",DockIconDark:"/icons/dock-icon-dark.png"};var s;!function(e){e.Search="search"}(s||(s={}))},523:(e,t,a)=>{"use strict";a.d(t,{OX:()=>o});var n;a(723);!function(e){e.Home="/home",e.Browser="/browser",e.Enterprise="/enterprise",e.Provider="/provider",e.Storefront="/storefront",e.Dock="/dock"}(n||(n={}));const r="/workspace/21.0.18";function o(e){return r+e}},277:(e,t,a)=>{"use strict";a.d(t,{GR:()=>s,ki:()=>d,xt:()=>c});var n,r=a(723),o=a(70);a(978);!function(e){e.Browser="Browser",e.Dock="Dock",e.EnterpriseDock="EnterpriseDock",e.Home="Home",e.Notification="Notification",e.Storefront="Storefront",e.Platform="Platform",e.Theming="Theming",e.Microflow="Microflow"}(n||(n={}));const i=async(e,t,a="workspace-licensing")=>{const n={apiVersion:t.apiVersion||r.et,componentName:e,componentVersion:t.componentVersion||r.et,allowed:t.allowed,rejectionCode:t.rejectionCode};fin.System.registerUsage({type:a,data:n})};const s=e=>{o.F2.uuid===o.$p.uuid&&o.F2.name===o.$p.name||i(n.Home,e)},c=e=>{i(n.Storefront,e)},d=e=>{i(n.Dock,e)};new Map},333:(e,t,a)=>{"use strict";function n(){return void 0!==typeof crypto&&"randomUUID"in crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}a.d(t,{N:()=>n})},70:(e,t,a)=>{"use strict";a.d(t,{$p:()=>c,C:()=>m,F2:()=>l,Io:()=>g,Iq:()=>s,Q:()=>n,T7:()=>u,Tv:()=>d,V1:()=>i,gQ:()=>p,hb:()=>f,ur:()=>w,xt:()=>h});var n,r=a(438),o=a(723);!function(e){e.Home="openfin-home",e.Dock="openfin-dock",e.Storefront="openfin-storefront",e.HomeInternal="openfin-home-internal",e.BrowserMenu="openfin-browser-menu",e.BrowserSaveMenu="openfin-browser-save-menu",e.BrowserIndicator="openfin-browser-indicator",e.BrowserWindow="internal-generated-window",e.ClassicWindow="internal-generated-classic-window",e.EnterpriseContextMenu="openfin-enterprise-context-menu",e.BrowserAddressSearchPrefix="openfin-browser-menu-address-search-",e.EnterpriseBookmarkDialogWindow="openfin-enterprise-bookmark-dialog",e.DropdownMenu="openfin-enterprise-dropdown-menu",e.DockCompanion="openfin-dock-companion"}(n||(n={}));const i=e=>({left:(e.left+(e.right??e.left+e.width))/2,top:(e.top+(e.bottom??e.top+e.height))/2});function s(e){if(!o.cI)throw new Error("getOFWindow can only be used in an OpenFin env. Avoid calling this method during pre-rendering.");return fin.Window.wrapSync(e)}const c={name:o.vL,uuid:o.$h};function d(){return s(c)}const l={name:n.Home,uuid:r.MW.Workspace},u={name:n.Dock,uuid:r.MW.Workspace},p={name:n.Storefront,uuid:r.MW.Workspace},h={name:r.MW.Workspace,uuid:r.MW.Workspace};const f=async e=>{try{const t=await fin.Window.wrapSync({name:e.name,uuid:e.uuid??fin.me.uuid}).getOptions();return("browser"===t.workspacePlatform?.windowType||"enterprise"===t.workspacePlatform?.windowType)&&t.workspacePlatform?.pages}catch(e){return console.warn("isBrowserWindow error: ",e),!1}};async function g(){const e=await fin.Application.getCurrentSync().getChildWindows(),t=await Promise.all(e.map((async e=>f(e.identity))));return e.filter(((e,a)=>t[a]))}const m=e=>s(e).getOptions().then((()=>!0)).catch((()=>!1));async function w(e){const t=await fin.System.getMonitorInfo();return[t.primaryMonitor,...t.nonPrimaryMonitors].reduce(((t,a)=>{const n=function(e,t){const a=e.top,n=e.left,r=e.top+e.height,o=e.left+e.width,i=t.monitorRect.top,s=t.monitorRect.left,c=t.monitorRect.bottom,d=t.monitorRect.right;if(a>c||r<i||n>d||o<s)return 0;const l=Math.max(a,i),u=Math.max(n,s);return(Math.min(r,c)-l)*(Math.min(o,d)-u)/(e.height*e.width)}(e,a);return n>t.percentage?{percentage:n,monitor:a}:t}),{percentage:0,monitor:t.primaryMonitor}).monitor}}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";a.r(n),a.d(n,{ActionTrigger:()=>Re.P,AppManifestType:()=>Ne.v,ButtonStyle:()=>Be.in,CLIAction:()=>$.PK,CLIFilterOptionType:()=>$.oo,CLITemplate:()=>$.fC,ContainerTemplateFragmentNames:()=>Be.ce,Dock:()=>e,DockButtonNames:()=>u.a,Home:()=>S,Integrations:()=>t,PresentationTemplateFragmentNames:()=>Be.np,SearchTagBackground:()=>Re.R,Storefront:()=>Ee,StorefrontTemplate:()=>Ne.z,TemplateFragmentTypes:()=>Be.SM});var e={};a.r(e),a.d(e,{DockButtonNames:()=>u.a,deregister:()=>m,minimize:()=>w,register:()=>g,show:()=>y});var t={};a.r(t),a.d(t,{Microsoft365WorkflowIntegration:()=>De});var r=a(723),o=a(786),i=a(277),s=a(70),c=a(695),d=a(79);var l=a(248),u=a(600);let p,h;const f=(e=[])=>{const t=e.filter((e=>!!e.id)).map((e=>e.id));if(new Set(t).size!==t.length)throw new Error("Dock provider buttons must have unique identifiers if specified.")},g=async e=>{(0,l.H)("dock",s.T7);const t=await(async e=>{await(0,d.KZ)(fin.me.identity);const t=await(0,c.N7)();if(h)throw new Error("Error using `Dock.register`. A Dock provider for this Workspace Platform is already registered. Call `Dock.deregister` before calling `Dock.register` again.");return h=e,e.clientAPIVersion=r.et,t.dispatch("register-provider",{providerType:"dock",info:e})})(e);return p=new Promise(((a,n)=>{try{(e=>{e.workspaceComponents&&!Array.isArray(e.workspaceComponents)&&console.warn("Using the `WorkspaceComponentButtonOptions` type to configure the Workspace Components Buttons is deprecated. Please use `WorkspaceButtonsConfig` instead.")})(e),f(e.buttons),(0,i.ki)({allowed:!0,componentVersion:t?.workspaceVersion}),r.et,a({clientAPIVersion:r.et,workspaceVersion:t?.workspaceVersion??"",updateDockProviderConfig:async t=>{if(!h)throw new Error("Error using `Dock.updateDockProviderConfig`. Dock provider is not registered. Make sure to call `Dock.register` first.");f(t.buttons);const a=await(0,c.N7)();await a.dispatch("update-provider",{providerType:"dock",provider:{...e,workspaceComponents:t.workspaceComponents,buttons:t.buttons,title:t.title,icon:t.icon,disableUserRearrangement:t.disableUserRearrangement,id:e.id}})}})}catch(e){(0,i.ki)({allowed:!1,rejectionCode:e instanceof Error?e.message:"unknown"}),n(e),p=void 0}finally{o.A.markEndAndMeasure("dock-registration")}})),p},m=async()=>{if(await p,!h)throw new Error("Error using `Dock.deregister`. Dock provider is not registered. Call `Dock.register` before calling `Dock.deregister`.");const e=await(0,c.N7)();await e.dispatch("deregister-provider",{providerType:"dock",id:h.id}),h=void 0,p=void 0},w=async()=>{await p,await(0,c.nA)(),await(async e=>(await(0,c.p4)()).dispatch("hide-provider-window",{providerType:e}))("dock")},y=async()=>{o.A.markStart("dock-show"),await p,await(0,c.nA)(),await(async e=>(await(0,c.p4)()).dispatch("show-provider-window",{providerType:e}))("dock")};var v,k,b,S=a(834),P=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a},C=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};v=new WeakMap,k=new WeakMap,b=new WeakMap;const x=class{constructor(e){v.set(this,void 0),k.set(this,void 0),b.set(this,void 0),P(this,v,e,"f"),P(this,k,new Map,"f"),P(this,b,[],"f")}get(e){if(C(this,k,"f").has(e))return this.updateQueue(e),C(this,k,"f").get(e)}has(e){return C(this,k,"f").has(e)}put(e,t){if(C(this,k,"f").has(e))C(this,k,"f").set(e,t),this.updateQueue(e);else{if(C(this,b,"f").length===C(this,v,"f")){const e=C(this,b,"f").shift();e&&C(this,k,"f").delete(e)}C(this,k,"f").set(e,t),C(this,b,"f").push(e)}}updateQueue(e){const t=C(this,b,"f").indexOf(e);-1!==t&&(C(this,b,"f").splice(t,1),C(this,b,"f").push(e))}};function A(e){return e&&"object"==typeof e&&!Array.isArray(e)}function M(e,...t){if(!t.length)return e;const a=t.shift();return A(e)&&A(a)&&Object.entries(a).forEach((([t,a])=>{if(A(a))return e[t]||(e[t]={}),M(e[t],a);e[t]=a})),M(e,...t)}var I,F,W,T,_,O=a(181),D=a(523),E=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a},R=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};F=new WeakMap,W=new WeakMap,T=new WeakMap,I=new WeakSet,_=function(){const e=Array.from(R(this,F,"f").entries()).reduce(((e,t)=>!e||t[1].timestamp<e[1].timestamp?t:e),null);return e?e[0]:null};const B=class{constructor(e=3e5,t=100){I.add(this),F.set(this,void 0),W.set(this,void 0),T.set(this,void 0),E(this,F,new Map,"f"),E(this,W,e,"f"),E(this,T,t,"f")}get(e){const t=R(this,F,"f").get(e);if(!t)return null;return Date.now()-t.timestamp<R(this,W,"f")?t.value:(R(this,F,"f").delete(e),null)}put(e,t){if(R(this,F,"f").size>=R(this,T,"f")){const e=R(this,I,"m",_).call(this);null!=e&&R(this,F,"f").delete(e)}R(this,F,"f").set(e,{value:t,timestamp:Date.now()})}remove(e){R(this,F,"f").delete(e)}clear(){R(this,F,"f").clear()}};var N,L=a(333),$=a(872),G=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)};const U={};class V{constructor(e){N.set(this,new Set),this._initializeWorkflows=async(e=this.config)=>{const{workflows:t}=e;for(const e in t){if(!t[e].disableAutoInitialize)try{G(this,N,"f").has(e)?console.warn(`Workflow ${e} already initialized.`):(G(this,N,"f").add(e),await this.initializeWorkflow(e))}catch(t){G(this,N,"f").delete(e),console.error(`Error registering ${e}:`,t)}}};const t=M({},U,e);this.config=t}async initializeWorkflow(e){G(this,N,"f").add(e)}}N=new WeakMap;const z=__webpack_require__(/*! @openfin/microsoft365 */ "../../node_modules/@openfin/microsoft365/openfin.ms365.js");let H=0;const q={chatMessage:"Chat Message",event:"Event",message:"Email",drive:"Document",contact:"Contact",user:"User",list:"List"},j={pdf:"PDF",docx:"Word",pptx:"PowerPoint",xlsx:"Excel",onenote:"OneNote"},X={chatMessage:["Chat.Read","ChannelMessage.Read.All"],list:["Sites.Read.All"],event:["Calendars.Read"],message:["Mail.ReadWrite.Shared"],contact:["Contacts.Read.Shared","Mail.ReadWrite.Shared"],user:["User.Read.All","Presence.Read.All"]},K="MICROSOFT_365_SEARCH_TYPE_FILTER",Q="MICROSOFT_365_SEARCH_FILE_TYPE_FILTER",Z="MICROSOFT_365_SEARCH_DEPARTMENT_FILTER",Y="MICROSOFT_365_SEARCH_JOB_TITLE_FILTER",J="Teams Call",ee="Teams Chat",te="Email",ae=(e,t)=>{const a=[],n={item:e.context.selectedFilters?.find((e=>e.id===K)),documentType:e.context.selectedFilters?.find((e=>e.id===Q))},r=[{value:"Document",isSelected:!!n.item?.options?.find((({value:e})=>"File"===e))?.isSelected},{value:"Contact",isSelected:!!n.item?.options?.find((({value:e})=>"Contact"===e))?.isSelected},{value:"Chat Message",isSelected:!!n.item?.options?.find((({value:e})=>"Chat Message"===e))?.isSelected},{value:"Email",isSelected:!!n.item?.options?.find((({value:e})=>"Email"===e))?.isSelected},{value:"Event",isSelected:!!n.item?.options?.find((({value:e})=>"Event"===e))?.isSelected},{value:"List",isSelected:!!n.item?.options?.find((({value:e})=>"List"===e))?.isSelected}];return a.push({id:K,title:"Type",type:$.oo.MultiSelect,options:r.filter((e=>t.has(e.value)))}),"Document"===n.item?.options?.filter((e=>e.isSelected))?.[0].value&&a.push({id:Q,title:"File Type",type:$.oo.MultiSelect,options:Object.entries(j).map((([,e])=>({value:e,isSelected:!!n.documentType?.options?.filter((e=>e.isSelected))?.find((({value:e})=>"File"===e))?.isSelected})))}),a},ne=(e,t)=>{const a=t.context.selectedFilters?.find((e=>e.id===K))?.options;if(!Array.isArray(a)||!a.find((e=>"Contact"===e.value||"User"===e.value))?.isSelected)return[];const{department:n,jobTitle:r}=e.reduce(((e,t)=>(t.department&&e.department.add(t.department),t.jobTitle&&e.jobTitle.add(t.jobTitle),e)),{department:new Set,jobTitle:new Set}),o=t.context.selectedFilters?.find((e=>e.id===Z)),i=Array.from(n).map((e=>({value:e,isSelected:!!o?.options?.find((({value:t})=>t===e))?.isSelected}))),s=t.context.selectedFilters?.find((e=>e.id===Z)),c=Array.from(r).map((e=>({value:e,isSelected:!!s?.options?.find((({value:t})=>t===e))?.isSelected})));return[{id:Z,title:"Department",type:$.oo.MultiSelect,options:i},{id:Y,title:"Job Title",type:$.oo.MultiSelect,options:c}]},re=e=>{const t=e.context.selectedFilters?.find((e=>e.id===Z)),a=Array.isArray(t?.options)?t.options.filter((e=>e.isSelected)).map((e=>e.value)):[],n=e.context.selectedFilters?.find((e=>e.id===Y));return{department:a,jobTitle:Array.isArray(n?.options)?n.options.filter((e=>e.isSelected)).map((e=>e.value)):[]}},oe=(e,t)=>{const{department:a,jobTitle:n}=t;return e.filter((e=>(!a.length||a.includes(e.department))&&(!n.length||n.includes(e.jobTitle))))},ie=e=>{const t=Array.isArray(e.context.selectedFilters?.find((e=>e.id===Q))?.options)?e.context.selectedFilters.find((e=>e.id===Q))?.options:[];return{filterFiles:t&&t.some((({isSelected:e})=>e)),showWord:t.find((({value:e})=>"Word"===e))?.isSelected,showExcel:t.find((({value:e})=>"Excel"===e))?.isSelected,showPowerPoint:t.find((({value:e})=>"PowerPoint"===e))?.isSelected,showPDF:t.find((({value:e})=>"PDF"===e))?.isSelected,showOneNote:t.find((({value:e})=>"OneNote"===e))?.isSelected}},se=(e,t)=>{const a=[];return t.showWord&&a.push(".docx"),t.showExcel&&a.push(".xlsx"),t.showPowerPoint&&a.push(".pptx"),t.showPDF&&a.push(".pdf"),t.showOneNote&&a.push(".one"),e.filter((e=>{if(e.file){const t=e.name.substring(e.name.lastIndexOf("."));return a.includes(t)}return!1}))},ce=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return"Microsoft Word";case"xlsx":case"xls":return"Microsoft Excel";case"pptx":case"ppt":return"Microsoft PowerPoint";case"pdf":return"PDF";case"png":case"jpg":case"jpeg":case"gif":return"Image";case"txt":return"Text";default:return"File"}},de=(e="")=>{switch(e.split(".").pop()?.toLowerCase()??""){case"docx":case"doc":return(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365DocumentIcon);case"xlsx":case"xls":return(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365ExcelIcon);case"pptx":case"ppt":return(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365PowerpointIcon);case"pdf":return(0,D.OX)(O.sP.Microsoft365Assets.PDFFileIcon);default:return}},le=e=>e.replace(/\+/g,"_").replace(/\//g,"-");var ue,pe,he,fe,ge,me,we,ye,ve,ke,be,Se,Pe,Ce,xe,Ae,Me,Ie,Fe,We,Te,_e=function(e,t,a,n){if("a"===a&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)},Oe=function(e,t,a,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a};class De extends V{constructor(e){const t=M({},{workflows:{search:(H+=1,{homeProvider:{description:"Microsoft 365 search results provider",id:`MS365-${fin.me.identity.uuid}-${H}`,logoUrl:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365Icon),icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365Icon),title:"Microsoft 365 Search",inputPlaceholder:"What would you like to search in Microsoft 365 today?",dispatchFocusEvents:!0},microsoftEntityTypeConfig:{message:!0,chatMessage:!0,drive:!0,event:!0,user:!0,contact:!0,list:!0},useTeamsDeepLink:!0})}},e);super(t),ue.add(this),pe.set(this,void 0),this.workflowIntegrationName="Microsoft 365",he.set(this,void 0),fe.set(this,void 0),ge.set(this,1),me.set(this,new Set),we.set(this,new x(100)),ye.set(this,new B(6e4)),this.connect=async(e=this.config.connect)=>{const{clientId:t,tenantId:a,redirectUri:n}=e,r=this.config.workflows?.search?Object.entries(this.config.workflows?.search?.microsoftEntityTypeConfig??{}).filter((([e,t])=>t)).map((([e])=>X[e])).filter((e=>void 0!==e)).flat():[];this.config.connect=e,Oe(this,pe,await(0,z.connect)(t,a,n,[...new Set(r)]),"f")},ve.set(this,(()=>{if(!_e(this,pe,"f"))throw new Error("Microsoft365WorkflowIntegration not connected");return _e(this,pe,"f")})),Ce.set(this,(async e=>{if(Oe(this,fe,e,"f"),e.data?.item?.id){const t=_e(this,ye,"f").get(e.data.item.id);if(t)return void _e(this,he,"f").respond([t])}if("user"===e.data?.type)_e(this,Fe,"f").call(this,e)})),xe.set(this,(async e=>{await fin.Platform.getCurrentSync().createWindow({layout:{content:[{type:"stack",content:[{type:"component",componentName:"view",componentState:{url:e}}]}]},workspacePlatform:void 0})})),Ae.set(this,(async e=>{if(e.data.item.channelIdentity.teamId){const t=new URL(`msteams:/l/channel/${e.data.item.channelIdentity.channelId}/${e.data.item.id}`);return!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"channel"})),void await fin.System.openUrlWithBrowser(t.toString())}const t=new URL(`msteams:/l/message/${e.data.item.chatId}/${e.data.item.id}`);!1===this.config.workflows?.search?.useTeamsDeepLink&&(t.protocol="https:"),t.searchParams.append("context",JSON.stringify({contextType:"chat"})),await fin.System.openUrlWithBrowser(t.toString())})),Me.set(this,(async e=>{switch(e.action.name){case J:{const t=new z.TeamsConnection(_e(this,ve,"f").call(this),this.config.workflows?.search?.useTeamsDeepLink);_e(this,ue,"m",ke).call(this,(()=>t.startCall([e.data.item.mail])));break}case te:{const t=await this.executeApiRequest("/v1.0/me/messages","POST",{toRecipients:[{emailAddress:{address:e.data.item.mail}}]});let a=t.data.webLink;const n=new URL(t.data.webLink);if("/owa/"===n.pathname){const e=n.search.slice(1).split("&").reduce(((e,t)=>{const[a,n]=t.split("=");return e[a]=n,e}),{});if(e.ItemID){const t=e.ItemID;a=`${n.origin}/mail/deeplink/compose/${t}?ItemID=${t}&exvsurl=1`}}await fin.Platform.getCurrentSync().createView({url:a});break}case ee:{const t=_e(this,ve,"f").call(this),a=new z.TeamsConnection(t,this.config.workflows?.search?.useTeamsDeepLink);_e(this,ue,"m",ke).call(this,(()=>a.startChat({emailAddresses:[t.currentUser.mail,e.data.item.mail]})));break}default:console.warn("Unhandled user action for result:",e,`Unknown action "${e.action.name}"`)}})),Ie.set(this,(async e=>{switch(e.data.type){case"driveItem":_e(this,xe,"f").call(this,e.data.item.webUrl);break;case"event":{const t=e.data.item,a=await this.executeApiRequest(`/v1.0/me/events/${t.id}`);_e(this,xe,"f").call(this,a.data.webLink);break}case"chatMessage":_e(this,Ae,"f").call(this,e);break;case"message":_e(this,xe,"f").call(this,e.data.item.webLink);break;case"list":{const t=e.data.item,a=await this.executeApiRequest(`/v1.0/sites/${t.parentReference?.siteId}/lists/${t.id}`);_e(this,xe,"f").call(this,a.data.webUrl);break}case"user":_e(this,Me,"f").call(this,e);break;default:console.warn("Unhandled user action for result:",e,`Unknown result type "${e.data.type}"`)}})),Fe.set(this,(async e=>{let t,a;const n=[],r=e.data.item;_e(this,we,"f").has(r.id)?t=_e(this,we,"f").get(r.id):n.push({id:"contactPhoto",method:"GET",url:`/users/${e.data.item.id}/photo/$value`,headers:{ConsistencyLevel:"eventual"}}),n.push({id:"presence",method:"GET",url:`/users/${e.data.item.id}/presence`});try{const e=await _e(this,ue,"m",be).call(this,n),i=e.data?.responses.find((e=>"contactPhoto"===e.id));i&&200!==i.status&&console.warn("Error fetching user photo",i),i?.body&&200===i?.status&&(t=`data:image/jpeg;base64,${i.body}`,_e(this,we,"f").put(r.id,t));const s=e.data?.responses.find((e=>"presence"===e.id));200!==s.status&&console.warn("Error fetching user presence",s),s?.body&&200===s.status&&(o=s.body,a={available:"available",availableidle:"available",away:"away",berightback:"away",busy:"busy",busyidle:"busy",donotdisturb:"do-not-disturb",offline:"offline",presenceunknown:"offline"}[o.availability?.toLowerCase()])}catch(e){console.error("Error fetching user data",e)}var o;const i=[["Department",r.department||"N/A"],["Email",r.mail||"N/A"],["Work Phone",r.businessPhones?.[0]||"N/A"],["Mobile",r.mobilePhone||"N/A"],["Location",r.officeLocation||"N/A"]],s={...e,template:$.fC.Contact,templateContent:{name:e.data.item.displayName,title:e.data.item.jobTitle,details:[i],photoUrl:t,onlineStatus:a,buttons:[{type:"button",icon:{light:(0,D.OX)(O.sP.CallIconLight),dark:(0,D.OX)(O.sP.CallIconDark)},tooltip:"Teams Call",action:J},{type:"button",icon:{light:(0,D.OX)(O.sP.ChatIconLight),dark:(0,D.OX)(O.sP.ChatIconDark)},tooltip:"Chat",action:ee},{type:"button",icon:{light:(0,D.OX)(O.sP.MessageIconLight),dark:(0,D.OX)(O.sP.MessageIconDark)},tooltip:"E-mail",action:te}]}};_e(this,ye,"f").put(e.data.item.id,s),_e(this,he,"f").respond([s])})),We.set(this,(async(e,t)=>{if(_e(this,he,"f")&&_e(this,he,"f").close(),Oe(this,he,t,"f"),_e(this,he,"f").open(),e.query.length<_e(this,ge,"f"))return{results:[]};const a=encodeURIComponent(e.query),n=[],r=((e,t)=>{const a=Array.isArray(e.context.selectedFilters?.find((e=>e.id===K))?.options)?e.context.selectedFilters.find((e=>e.id===K))?.options:[],n=a.every((({isSelected:e})=>!e));return{showDocuments:t.has("Document")&&(n||!!a.find((({value:e})=>"Document"===e))?.isSelected),showContacts:t.has("Contact")&&(n||!!a.find((({value:e})=>"Contact"===e))?.isSelected),showChatMessages:t.has("Chat Message")&&(n||!!a.find((({value:e})=>"Chat Message"===e))?.isSelected),showMessages:t.has("Email")&&(n||!!a.find((({value:e})=>"Email"===e))?.isSelected),showEvents:t.has("Event")&&(n||!!a.find((({value:e})=>"Event"===e))?.isSelected),showLists:t.has("List")&&(n||!!a.find((({value:e})=>"List"===e))?.isSelected)}})(e,_e(this,me,"f"));if(r.showDocuments){const e=`'${a}'`;n.push({id:"driveItem",method:"GET",url:`/me/drive/root/search(q=${encodeURIComponent(e)})`,headers:{ConsistencyLevel:"eventual"}})}if(r.showEvents&&n.push({id:"event",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["event"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),r.showContacts){const t=`"${e.query}"`;n.push({id:"contact",method:"GET",url:`/me/contacts?$search=${encodeURIComponent(t)}&$top=10`});const a=["displayName","givenName","surname"].map((t=>`"${t}:${e.query}"`)).join(" OR ");n.push({id:"user",method:"GET",url:`/users?$search=${encodeURIComponent(a)}&$top=10&$select=id,displayName,department,mail,businessPhones,mobilePhone,officeLocation,jobTitle`,headers:{ConsistencyLevel:"eventual"}})}if(r.showMessages&&n.push({id:"message",method:"GET",url:`/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(`"${e.query}"`)}&$top=10`}),r.showChatMessages&&n.push({id:"chatMessage",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["chatMessage"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),r.showLists&&n.push({id:"list",url:"/search/query",method:"POST",body:{requests:[{entityTypes:["list"],query:{queryString:e.query},from:0,size:10}]},headers:{"Content-Type":"application/json"}}),0===n.length)return{results:[]};const{results:o,filters:i}=await _e(this,ue,"m",Se).call(this,n,e);return o.find((e=>e.key===_e(this,fe,"f")?.key))?.template===$.fC.Loading&&_e(this,Ce,"f").call(this,_e(this,fe,"f")),{results:o,context:{filters:i}}})),Te.set(this,(async e=>{switch(e.action.trigger){case Re.P.FocusChange:_e(this,Ce,"f").call(this,e);break;case Re.P.UserAction:_e(this,Ie,"f").call(this,e);break;case Re.P.Reload:break;default:console.warn(`Unknown action trigger: ${e.action.trigger}`)}})),this.initializeWorkflow=async e=>{if("search"!==e)throw new Error(`Attempted to initialize unknown workflow: ${e}`);await S.register({...this.config.workflows.search.homeProvider,onUserInput:_e(this,We,"f"),onResultDispatch:_e(this,Te,"f")}),(0,z.enableLogging)(),await this.connect(),super.initializeWorkflow(e)},Object.entries(t.workflows?.search?.microsoftEntityTypeConfig||{}).filter((([e,t])=>t)).forEach((([e])=>{_e(this,me,"f").add(q[e])}))}async executeApiRequest(...e){return _e(this,ue,"m",ke).call(this,(()=>_e(this,ve,"f").call(this).executeApiRequest(...e)))}}pe=new WeakMap,he=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,we=new WeakMap,ye=new WeakMap,ve=new WeakMap,Ce=new WeakMap,xe=new WeakMap,Ae=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,We=new WeakMap,Te=new WeakMap,ue=new WeakSet,ke=async function(e){try{return await e()}catch(t){if(t instanceof z.AuthTokenExpiredError)return await this.connect(),e();throw t}},be=async function(e){return this.executeApiRequest("/v1.0/$batch","POST",{requests:e})},Se=async function(e,t){try{const a=await _e(this,ue,"m",be).call(this,e);return{filters:[...ae(t,_e(this,me,"f")),...ne(a.data.responses.find((e=>"user"===e.id))?.body?.value||[],t)],results:_e(this,ue,"m",Pe).call(this,a,t)}}catch(e){return console.warn("Failed to execute Batch API request: ",e),{filters:[],results:[{key:(0,L.N)(),title:"Error Fetching Search Results",description:"",actions:[],template:$.fC.Error,templateContent:`Failed to execute Batch API request: ${JSON.stringify(e)}`}]}}},Pe=function(e,t){let a=[];for(const n of e.data.responses)if(200===n.status)switch(n.id){case"driveItem":{const e=ie(t),r=e.filterFiles?se(n.body.value,e):n.body.value;a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.name??"",description:e.file?.mimeType??"",label:ce(e.name),icon:de(e.name),data:{type:"driveItem",item:e},actions:[{name:"Launch"}],template:$.fC.Plain,templateContent:void 0}))));break}case"event":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.filter((e=>e.resource.subject)).map((e=>{const t=e.resource,a=le(e.hitId);return{key:a,title:t.subject??"",label:"Calendar Event",icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[{name:"Launch"}],data:{type:"event",item:{...t,id:a}},template:$.fC.Plain,templateContent:void 0}}))||[]);break;case"contact":{const e=re(t),r=oe(n.body.value||[],e);a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.displayName??"",label:"Outlook contact",icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"contact",item:e},template:$.fC.Plain,templateContent:void 0}))));break}case"user":{const e=re(t),r=oe(n.body.value||[],e);a.push(...(r||[]).map((e=>({key:e.id??(0,L.N)(),title:e.displayName??"",label:"Teams contact",icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"user",item:e},template:$.fC.Loading,templateContent:void 0}))));break}case"message":a.push(...(n.body.value||[]).map((e=>({key:e.id??(0,L.N)(),title:`${e.subject??"Untitled Message"}${e.isDraft?" (Draft)":""}`,label:"Email",icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365OutlookIcon),actions:[],data:{type:"message",item:e},template:$.fC.Plain,templateContent:void 0}))));break;case"chatMessage":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource;return{key:t.id??(0,L.N)(),title:e.summary??"Untitled Message",label:"Chat",icon:(0,D.OX)(O.sP.Microsoft365Assets.Microsoft365TeamsIcon),actions:[],data:{type:"chatMessage",item:t},template:$.fC.Plain,templateContent:void 0}}))||[]);break;case"list":a.push(...n.body?.value?.[0]?.hitsContainers?.[0]?.hits?.map((e=>{const t=e.resource,a=le(e.hitId);return{key:a,title:t.displayName??"Untitled List",label:"List",actions:[{name:"Launch"}],data:{type:"list",item:{...t,id:a}},template:$.fC.Plain,templateContent:void 0}}))||[]);break;default:console.warn(`Unknown batch response id: ${n.id}`,n.body)}else console.warn("Batch API request failed: ",n);return a=a.map((e=>{if(!e.data?.item?.id)return e;const t=_e(this,ye,"f").get(e.data.item.id);return t?{...e,template:t.template,templateContent:t.templateContent}:e})),a.sort(((e,t)=>e.title>t.title?1:-1))};var Ee=a(598),Re=a(129),Be=a(184),Ne=a(710)})(),module.exports=n})();
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/dexie/dist/dexie.js":
/*!**********************************************!*\
  !*** ../../node_modules/dexie/dist/dexie.js ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*
 * Dexie.js - a minimalistic wrapper for IndexedDB
 * ===============================================
 *
 * By David Fahlander, david.fahlander@gmail.com
 *
 * Version 4.2.0, Wed Aug 13 2025
 *
 * https://dexie.org
 *
 * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/
 */
 
(function (global, factory) {
     true ? module.exports = factory() :
    0;
})(this, (function () { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);
                ar[i] = from[i];
            }
        }
        return to.concat(ar || Array.prototype.slice.call(from));
    }

    var _global = typeof globalThis !== 'undefined' ? globalThis :
        typeof self !== 'undefined' ? self :
            typeof window !== 'undefined' ? window :
                __webpack_require__.g;

    var keys = Object.keys;
    var isArray = Array.isArray;
    if (typeof Promise !== 'undefined' && !_global.Promise) {
        _global.Promise = Promise;
    }
    function extend(obj, extension) {
        if (typeof extension !== 'object')
            return obj;
        keys(extension).forEach(function (key) {
            obj[key] = extension[key];
        });
        return obj;
    }
    var getProto = Object.getPrototypeOf;
    var _hasOwn = {}.hasOwnProperty;
    function hasOwn(obj, prop) {
        return _hasOwn.call(obj, prop);
    }
    function props(proto, extension) {
        if (typeof extension === 'function')
            extension = extension(getProto(proto));
        (typeof Reflect === "undefined" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {
            setProp(proto, key, extension[key]);
        });
    }
    var defineProperty = Object.defineProperty;
    function setProp(obj, prop, functionOrGetSet, options) {
        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, "get") && typeof functionOrGetSet.get === 'function' ?
            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :
            { value: functionOrGetSet, configurable: true, writable: true }, options));
    }
    function derive(Child) {
        return {
            from: function (Parent) {
                Child.prototype = Object.create(Parent.prototype);
                setProp(Child.prototype, "constructor", Child);
                return {
                    extend: props.bind(null, Child.prototype)
                };
            }
        };
    }
    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    function getPropertyDescriptor(obj, prop) {
        var pd = getOwnPropertyDescriptor(obj, prop);
        var proto;
        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);
    }
    var _slice = [].slice;
    function slice(args, start, end) {
        return _slice.call(args, start, end);
    }
    function override(origFunc, overridedFactory) {
        return overridedFactory(origFunc);
    }
    function assert(b) {
        if (!b)
            throw new Error("Assertion Failed");
    }
    function asap$1(fn) {
        if (_global.setImmediate)
            setImmediate(fn);
        else
            setTimeout(fn, 0);
    }
    function arrayToObject(array, extractor) {
        return array.reduce(function (result, item, i) {
            var nameAndValue = extractor(item, i);
            if (nameAndValue)
                result[nameAndValue[0]] = nameAndValue[1];
            return result;
        }, {});
    }
    function getByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))
            return obj[keyPath];
        if (!keyPath)
            return obj;
        if (typeof keyPath !== 'string') {
            var rv = [];
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                var val = getByKeyPath(obj, keyPath[i]);
                rv.push(val);
            }
            return rv;
        }
        var period = keyPath.indexOf('.');
        if (period !== -1) {
            var innerObj = obj[keyPath.substr(0, period)];
            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));
        }
        return undefined;
    }
    function setByKeyPath(obj, keyPath, value) {
        if (!obj || keyPath === undefined)
            return;
        if ('isFrozen' in Object && Object.isFrozen(obj))
            return;
        if (typeof keyPath !== 'string' && 'length' in keyPath) {
            assert(typeof value !== 'string' && 'length' in value);
            for (var i = 0, l = keyPath.length; i < l; ++i) {
                setByKeyPath(obj, keyPath[i], value[i]);
            }
        }
        else {
            var period = keyPath.indexOf('.');
            if (period !== -1) {
                var currentKeyPath = keyPath.substr(0, period);
                var remainingKeyPath = keyPath.substr(period + 1);
                if (remainingKeyPath === "")
                    if (value === undefined) {
                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))
                            obj.splice(currentKeyPath, 1);
                        else
                            delete obj[currentKeyPath];
                    }
                    else
                        obj[currentKeyPath] = value;
                else {
                    var innerObj = obj[currentKeyPath];
                    if (!innerObj || !hasOwn(obj, currentKeyPath))
                        innerObj = (obj[currentKeyPath] = {});
                    setByKeyPath(innerObj, remainingKeyPath, value);
                }
            }
            else {
                if (value === undefined) {
                    if (isArray(obj) && !isNaN(parseInt(keyPath)))
                        obj.splice(keyPath, 1);
                    else
                        delete obj[keyPath];
                }
                else
                    obj[keyPath] = value;
            }
        }
    }
    function delByKeyPath(obj, keyPath) {
        if (typeof keyPath === 'string')
            setByKeyPath(obj, keyPath, undefined);
        else if ('length' in keyPath)
            [].map.call(keyPath, function (kp) {
                setByKeyPath(obj, kp, undefined);
            });
    }
    function shallowClone(obj) {
        var rv = {};
        for (var m in obj) {
            if (hasOwn(obj, m))
                rv[m] = obj[m];
        }
        return rv;
    }
    var concat = [].concat;
    function flatten(a) {
        return concat.apply([], a);
    }
    var intrinsicTypeNames = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey"
        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return ["Int", "Uint", "Float"].map(function (t) { return t + num + "Array"; }); }))).filter(function (t) { return _global[t]; });
    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));
    function cloneSimpleObjectTree(o) {
        var rv = {};
        for (var k in o)
            if (hasOwn(o, k)) {
                var v = o[k];
                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);
            }
        return rv;
    }
    function objectIsEmpty(o) {
        for (var k in o)
            if (hasOwn(o, k))
                return false;
        return true;
    }
    var circularRefs = null;
    function deepClone(any) {
        circularRefs = new WeakMap();
        var rv = innerDeepClone(any);
        circularRefs = null;
        return rv;
    }
    function innerDeepClone(x) {
        if (!x || typeof x !== 'object')
            return x;
        var rv = circularRefs.get(x);
        if (rv)
            return rv;
        if (isArray(x)) {
            rv = [];
            circularRefs.set(x, rv);
            for (var i = 0, l = x.length; i < l; ++i) {
                rv.push(innerDeepClone(x[i]));
            }
        }
        else if (intrinsicTypes.has(x.constructor)) {
            rv = x;
        }
        else {
            var proto = getProto(x);
            rv = proto === Object.prototype ? {} : Object.create(proto);
            circularRefs.set(x, rv);
            for (var prop in x) {
                if (hasOwn(x, prop)) {
                    rv[prop] = innerDeepClone(x[prop]);
                }
            }
        }
        return rv;
    }
    var toString = {}.toString;
    function toStringTag(o) {
        return toString.call(o).slice(8, -1);
    }
    var iteratorSymbol = typeof Symbol !== 'undefined' ?
        Symbol.iterator :
        '@@iterator';
    var getIteratorOf = typeof iteratorSymbol === "symbol" ? function (x) {
        var i;
        return x != null && (i = x[iteratorSymbol]) && i.apply(x);
    } : function () { return null; };
    function delArrayItem(a, x) {
        var i = a.indexOf(x);
        if (i >= 0)
            a.splice(i, 1);
        return i >= 0;
    }
    var NO_CHAR_ARRAY = {};
    function getArrayOf(arrayLike) {
        var i, a, x, it;
        if (arguments.length === 1) {
            if (isArray(arrayLike))
                return arrayLike.slice();
            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')
                return [arrayLike];
            if ((it = getIteratorOf(arrayLike))) {
                a = [];
                while ((x = it.next()), !x.done)
                    a.push(x.value);
                return a;
            }
            if (arrayLike == null)
                return [arrayLike];
            i = arrayLike.length;
            if (typeof i === 'number') {
                a = new Array(i);
                while (i--)
                    a[i] = arrayLike[i];
                return a;
            }
            return [arrayLike];
        }
        i = arguments.length;
        a = new Array(i);
        while (i--)
            a[i] = arguments[i];
        return a;
    }
    var isAsyncFunction = typeof Symbol !== 'undefined'
        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }
        : function () { return false; };

    var dexieErrorNames = [
        'Modify',
        'Bulk',
        'OpenFailed',
        'VersionChange',
        'Schema',
        'Upgrade',
        'InvalidTable',
        'MissingAPI',
        'NoSuchDatabase',
        'InvalidArgument',
        'SubTransaction',
        'Unsupported',
        'Internal',
        'DatabaseClosed',
        'PrematureCommit',
        'ForeignAwait'
    ];
    var idbDomErrorNames = [
        'Unknown',
        'Constraint',
        'Data',
        'TransactionInactive',
        'ReadOnly',
        'Version',
        'NotFound',
        'InvalidState',
        'InvalidAccess',
        'Abort',
        'Timeout',
        'QuotaExceeded',
        'Syntax',
        'DataClone'
    ];
    var errorList = dexieErrorNames.concat(idbDomErrorNames);
    var defaultTexts = {
        VersionChanged: "Database version changed by other database connection",
        DatabaseClosed: "Database has been closed",
        Abort: "Transaction aborted",
        TransactionInactive: "Transaction has already completed or failed",
        MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
    };
    function DexieError(name, msg) {
        this.name = name;
        this.message = msg;
    }
    derive(DexieError).from(Error).extend({
        toString: function () { return this.name + ": " + this.message; }
    });
    function getMultiErrorMessage(msg, failures) {
        return msg + ". Errors: " + Object.keys(failures)
            .map(function (key) { return failures[key].toString(); })
            .filter(function (v, i, s) { return s.indexOf(v) === i; })
            .join('\n');
    }
    function ModifyError(msg, failures, successCount, failedKeys) {
        this.failures = failures;
        this.failedKeys = failedKeys;
        this.successCount = successCount;
        this.message = getMultiErrorMessage(msg, failures);
    }
    derive(ModifyError).from(DexieError);
    function BulkError(msg, failures) {
        this.name = "BulkError";
        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });
        this.failuresByPos = failures;
        this.message = getMultiErrorMessage(msg, this.failures);
    }
    derive(BulkError).from(DexieError);
    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + "Error", obj); }, {});
    var BaseException = DexieError;
    var exceptions = errorList.reduce(function (obj, name) {
        var fullName = name + "Error";
        function DexieError(msgOrInner, inner) {
            this.name = fullName;
            if (!msgOrInner) {
                this.message = defaultTexts[name] || fullName;
                this.inner = null;
            }
            else if (typeof msgOrInner === 'string') {
                this.message = "".concat(msgOrInner).concat(!inner ? '' : '\n ' + inner);
                this.inner = inner || null;
            }
            else if (typeof msgOrInner === 'object') {
                this.message = "".concat(msgOrInner.name, " ").concat(msgOrInner.message);
                this.inner = msgOrInner;
            }
        }
        derive(DexieError).from(BaseException);
        obj[name] = DexieError;
        return obj;
    }, {});
    exceptions.Syntax = SyntaxError;
    exceptions.Type = TypeError;
    exceptions.Range = RangeError;
    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {
        obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    function mapError(domError, message) {
        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])
            return domError;
        var rv = new exceptionMap[domError.name](message || domError.message, domError);
        if ("stack" in domError) {
            setProp(rv, "stack", { get: function () {
                    return this.inner.stack;
                } });
        }
        return rv;
    }
    var fullNameExceptions = errorList.reduce(function (obj, name) {
        if (["Syntax", "Type", "Range"].indexOf(name) === -1)
            obj[name + "Error"] = exceptions[name];
        return obj;
    }, {});
    fullNameExceptions.ModifyError = ModifyError;
    fullNameExceptions.DexieError = DexieError;
    fullNameExceptions.BulkError = BulkError;

    function nop() { }
    function mirror(val) { return val; }
    function pureFunctionChain(f1, f2) {
        if (f1 == null || f1 === mirror)
            return f2;
        return function (val) {
            return f2(f1(val));
        };
    }
    function callBoth(on1, on2) {
        return function () {
            on1.apply(this, arguments);
            on2.apply(this, arguments);
        };
    }
    function hookCreatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res !== undefined)
                arguments[0] = res;
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res2 !== undefined ? res2 : res;
        };
    }
    function hookDeletingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            f1.apply(this, arguments);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = this.onerror = null;
            f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
        };
    }
    function hookUpdatingChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function (modifications) {
            var res = f1.apply(this, arguments);
            extend(modifications, res);
            var onsuccess = this.onsuccess,
            onerror = this.onerror;
            this.onsuccess = null;
            this.onerror = null;
            var res2 = f2.apply(this, arguments);
            if (onsuccess)
                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;
            if (onerror)
                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;
            return res === undefined ?
                (res2 === undefined ? undefined : res2) :
                (extend(res, res2));
        };
    }
    function reverseStoppableEventChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            if (f2.apply(this, arguments) === false)
                return false;
            return f1.apply(this, arguments);
        };
    }
    function promisableChain(f1, f2) {
        if (f1 === nop)
            return f2;
        return function () {
            var res = f1.apply(this, arguments);
            if (res && typeof res.then === 'function') {
                var thiz = this, i = arguments.length, args = new Array(i);
                while (i--)
                    args[i] = arguments[i];
                return res.then(function () {
                    return f2.apply(thiz, args);
                });
            }
            return f2.apply(this, arguments);
        };
    }

    var debug = typeof location !== 'undefined' &&
        /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
    function setDebug(value, filter) {
        debug = value;
    }

    var INTERNAL = {};
    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?
        [] :
        (function () {
            var globalP = Promise.resolve();
            if (typeof crypto === 'undefined' || !crypto.subtle)
                return [globalP, getProto(globalP), globalP];
            var nativeP = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
            return [
                nativeP,
                getProto(nativeP),
                globalP
            ];
        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;
    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;
    var patchGlobalPromise = !!resolvedGlobalPromise;
    function schedulePhysicalTick() {
        queueMicrotask(physicalTick);
    }
    var asap = function (callback, args) {
        microtickQueue.push([callback, args]);
        if (needsNewPhysicalTick) {
            schedulePhysicalTick();
            needsNewPhysicalTick = false;
        }
    };
    var isOutsideMicroTick = true,
    needsNewPhysicalTick = true,
    unhandledErrors = [],
    rejectingErrors = [],
    rejectionMapper = mirror;
    var globalPSD = {
        id: 'global',
        global: true,
        ref: 0,
        unhandleds: [],
        onunhandled: nop,
        pgp: false,
        env: {},
        finalize: nop
    };
    var PSD = globalPSD;
    var microtickQueue = [];
    var numScheduledCalls = 0;
    var tickFinalizers = [];
    function DexiePromise(fn) {
        if (typeof this !== 'object')
            throw new TypeError('Promises must be constructed via new');
        this._listeners = [];
        this._lib = false;
        var psd = (this._PSD = PSD);
        if (typeof fn !== 'function') {
            if (fn !== INTERNAL)
                throw new TypeError('Not a function');
            this._state = arguments[1];
            this._value = arguments[2];
            if (this._state === false)
                handleRejection(this, this._value);
            return;
        }
        this._state = null;
        this._value = null;
        ++psd.ref;
        executePromiseTask(this, fn);
    }
    var thenProp = {
        get: function () {
            var psd = PSD, microTaskId = totalEchoes;
            function then(onFulfilled, onRejected) {
                var _this = this;
                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);
                var cleanup = possibleAwait && !decrementExpectedAwaits();
                var rv = new DexiePromise(function (resolve, reject) {
                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));
                });
                if (this._consoleTask)
                    rv._consoleTask = this._consoleTask;
                return rv;
            }
            then.prototype = INTERNAL;
            return then;
        },
        set: function (value) {
            setProp(this, 'then', value && value.prototype === INTERNAL ?
                thenProp :
                {
                    get: function () {
                        return value;
                    },
                    set: thenProp.set
                });
        }
    };
    props(DexiePromise.prototype, {
        then: thenProp,
        _then: function (onFulfilled, onRejected) {
            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));
        },
        catch: function (onRejected) {
            if (arguments.length === 1)
                return this.then(null, onRejected);
            var type = arguments[0], handler = arguments[1];
            return typeof type === 'function' ? this.then(null, function (err) {
                return err instanceof type ? handler(err) : PromiseReject(err);
            })
                : this.then(null, function (err) {
                    return err && err.name === type ? handler(err) : PromiseReject(err);
                });
        },
        finally: function (onFinally) {
            return this.then(function (value) {
                return DexiePromise.resolve(onFinally()).then(function () { return value; });
            }, function (err) {
                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });
            });
        },
        timeout: function (ms, msg) {
            var _this = this;
            return ms < Infinity ?
                new DexiePromise(function (resolve, reject) {
                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);
                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));
                }) : this;
        }
    });
    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)
        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');
    globalPSD.env = snapShot();
    function Listener(onFulfilled, onRejected, resolve, reject, zone) {
        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
        this.onRejected = typeof onRejected === 'function' ? onRejected : null;
        this.resolve = resolve;
        this.reject = reject;
        this.psd = zone;
    }
    props(DexiePromise, {
        all: function () {
            var values = getArrayOf.apply(null, arguments)
                .map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                if (values.length === 0)
                    resolve([]);
                var remaining = values.length;
                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {
                    values[i] = x;
                    if (!--remaining)
                        resolve(values);
                }, reject); });
            });
        },
        resolve: function (value) {
            if (value instanceof DexiePromise)
                return value;
            if (value && typeof value.then === 'function')
                return new DexiePromise(function (resolve, reject) {
                    value.then(resolve, reject);
                });
            var rv = new DexiePromise(INTERNAL, true, value);
            return rv;
        },
        reject: PromiseReject,
        race: function () {
            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
            return new DexiePromise(function (resolve, reject) {
                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });
            });
        },
        PSD: {
            get: function () { return PSD; },
            set: function (value) { return PSD = value; }
        },
        totalEchoes: { get: function () { return totalEchoes; } },
        newPSD: newScope,
        usePSD: usePSD,
        scheduler: {
            get: function () { return asap; },
            set: function (value) { asap = value; }
        },
        rejectionMapper: {
            get: function () { return rejectionMapper; },
            set: function (value) { rejectionMapper = value; }
        },
        follow: function (fn, zoneProps) {
            return new DexiePromise(function (resolve, reject) {
                return newScope(function (resolve, reject) {
                    var psd = PSD;
                    psd.unhandleds = [];
                    psd.onunhandled = reject;
                    psd.finalize = callBoth(function () {
                        var _this = this;
                        run_at_end_of_this_or_next_physical_tick(function () {
                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);
                        });
                    }, psd.finalize);
                    fn();
                }, zoneProps, resolve, reject);
            });
        }
    });
    if (NativePromise) {
        if (NativePromise.allSettled)
            setProp(DexiePromise, "allSettled", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve) {
                    if (possiblePromises.length === 0)
                        resolve([]);
                    var remaining = possiblePromises.length;
                    var results = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: "fulfilled", value: value }; }, function (reason) { return results[i] = { status: "rejected", reason: reason }; })
                        .then(function () { return --remaining || resolve(results); }); });
                });
            });
        if (NativePromise.any && typeof AggregateError !== 'undefined')
            setProp(DexiePromise, "any", function () {
                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);
                return new DexiePromise(function (resolve, reject) {
                    if (possiblePromises.length === 0)
                        reject(new AggregateError([]));
                    var remaining = possiblePromises.length;
                    var failures = new Array(remaining);
                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {
                        failures[i] = failure;
                        if (!--remaining)
                            reject(new AggregateError(failures));
                    }); });
                });
            });
        if (NativePromise.withResolvers)
            DexiePromise.withResolvers = NativePromise.withResolvers;
    }
    function executePromiseTask(promise, fn) {
        try {
            fn(function (value) {
                if (promise._state !== null)
                    return;
                if (value === promise)
                    throw new TypeError('A promise cannot be resolved with itself.');
                var shouldExecuteTick = promise._lib && beginMicroTickScope();
                if (value && typeof value.then === 'function') {
                    executePromiseTask(promise, function (resolve, reject) {
                        value instanceof DexiePromise ?
                            value._then(resolve, reject) :
                            value.then(resolve, reject);
                    });
                }
                else {
                    promise._state = true;
                    promise._value = value;
                    propagateAllListeners(promise);
                }
                if (shouldExecuteTick)
                    endMicroTickScope();
            }, handleRejection.bind(null, promise));
        }
        catch (ex) {
            handleRejection(promise, ex);
        }
    }
    function handleRejection(promise, reason) {
        rejectingErrors.push(reason);
        if (promise._state !== null)
            return;
        var shouldExecuteTick = promise._lib && beginMicroTickScope();
        reason = rejectionMapper(reason);
        promise._state = false;
        promise._value = reason;
        addPossiblyUnhandledError(promise);
        propagateAllListeners(promise);
        if (shouldExecuteTick)
            endMicroTickScope();
    }
    function propagateAllListeners(promise) {
        var listeners = promise._listeners;
        promise._listeners = [];
        for (var i = 0, len = listeners.length; i < len; ++i) {
            propagateToListener(promise, listeners[i]);
        }
        var psd = promise._PSD;
        --psd.ref || psd.finalize();
        if (numScheduledCalls === 0) {
            ++numScheduledCalls;
            asap(function () {
                if (--numScheduledCalls === 0)
                    finalizePhysicalTick();
            }, []);
        }
    }
    function propagateToListener(promise, listener) {
        if (promise._state === null) {
            promise._listeners.push(listener);
            return;
        }
        var cb = promise._state ? listener.onFulfilled : listener.onRejected;
        if (cb === null) {
            return (promise._state ? listener.resolve : listener.reject)(promise._value);
        }
        ++listener.psd.ref;
        ++numScheduledCalls;
        asap(callListener, [cb, promise, listener]);
    }
    function callListener(cb, promise, listener) {
        try {
            var ret, value = promise._value;
            if (!promise._state && rejectingErrors.length)
                rejectingErrors = [];
            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);
            if (!promise._state && rejectingErrors.indexOf(value) === -1) {
                markErrorAsHandled(promise);
            }
            listener.resolve(ret);
        }
        catch (e) {
            listener.reject(e);
        }
        finally {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
            --listener.psd.ref || listener.psd.finalize();
        }
    }
    function physicalTick() {
        usePSD(globalPSD, function () {
            beginMicroTickScope() && endMicroTickScope();
        });
    }
    function beginMicroTickScope() {
        var wasRootExec = isOutsideMicroTick;
        isOutsideMicroTick = false;
        needsNewPhysicalTick = false;
        return wasRootExec;
    }
    function endMicroTickScope() {
        var callbacks, i, l;
        do {
            while (microtickQueue.length > 0) {
                callbacks = microtickQueue;
                microtickQueue = [];
                l = callbacks.length;
                for (i = 0; i < l; ++i) {
                    var item = callbacks[i];
                    item[0].apply(null, item[1]);
                }
            }
        } while (microtickQueue.length > 0);
        isOutsideMicroTick = true;
        needsNewPhysicalTick = true;
    }
    function finalizePhysicalTick() {
        var unhandledErrs = unhandledErrors;
        unhandledErrors = [];
        unhandledErrs.forEach(function (p) {
            p._PSD.onunhandled.call(null, p._value, p);
        });
        var finalizers = tickFinalizers.slice(0);
        var i = finalizers.length;
        while (i)
            finalizers[--i]();
    }
    function run_at_end_of_this_or_next_physical_tick(fn) {
        function finalizer() {
            fn();
            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);
        }
        tickFinalizers.push(finalizer);
        ++numScheduledCalls;
        asap(function () {
            if (--numScheduledCalls === 0)
                finalizePhysicalTick();
        }, []);
    }
    function addPossiblyUnhandledError(promise) {
        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))
            unhandledErrors.push(promise);
    }
    function markErrorAsHandled(promise) {
        var i = unhandledErrors.length;
        while (i)
            if (unhandledErrors[--i]._value === promise._value) {
                unhandledErrors.splice(i, 1);
                return;
            }
    }
    function PromiseReject(reason) {
        return new DexiePromise(INTERNAL, false, reason);
    }
    function wrap(fn, errorCatcher) {
        var psd = PSD;
        return function () {
            var wasRootExec = beginMicroTickScope(), outerScope = PSD;
            try {
                switchToZone(psd, true);
                return fn.apply(this, arguments);
            }
            catch (e) {
                errorCatcher && errorCatcher(e);
            }
            finally {
                switchToZone(outerScope, false);
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
    }
    var task = { awaits: 0, echoes: 0, id: 0 };
    var taskCounter = 0;
    var zoneStack = [];
    var zoneEchoes = 0;
    var totalEchoes = 0;
    var zone_id_counter = 0;
    function newScope(fn, props, a1, a2) {
        var parent = PSD, psd = Object.create(parent);
        psd.parent = parent;
        psd.ref = 0;
        psd.global = false;
        psd.id = ++zone_id_counter;
        globalPSD.env;
        psd.env = patchGlobalPromise ? {
            Promise: DexiePromise,
            PromiseProp: { value: DexiePromise, configurable: true, writable: true },
            all: DexiePromise.all,
            race: DexiePromise.race,
            allSettled: DexiePromise.allSettled,
            any: DexiePromise.any,
            resolve: DexiePromise.resolve,
            reject: DexiePromise.reject,
        } : {};
        if (props)
            extend(psd, props);
        ++parent.ref;
        psd.finalize = function () {
            --this.parent.ref || this.parent.finalize();
        };
        var rv = usePSD(psd, fn, a1, a2);
        if (psd.ref === 0)
            psd.finalize();
        return rv;
    }
    function incrementExpectedAwaits() {
        if (!task.id)
            task.id = ++taskCounter;
        ++task.awaits;
        task.echoes += ZONE_ECHO_LIMIT;
        return task.id;
    }
    function decrementExpectedAwaits() {
        if (!task.awaits)
            return false;
        if (--task.awaits === 0)
            task.id = 0;
        task.echoes = task.awaits * ZONE_ECHO_LIMIT;
        return true;
    }
    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {
        incrementExpectedAwaits = decrementExpectedAwaits = nop;
    }
    function onPossibleParallellAsync(possiblePromise) {
        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {
            incrementExpectedAwaits();
            return possiblePromise.then(function (x) {
                decrementExpectedAwaits();
                return x;
            }, function (e) {
                decrementExpectedAwaits();
                return rejection(e);
            });
        }
        return possiblePromise;
    }
    function zoneEnterEcho(targetZone) {
        ++totalEchoes;
        if (!task.echoes || --task.echoes === 0) {
            task.echoes = task.awaits = task.id = 0;
        }
        zoneStack.push(PSD);
        switchToZone(targetZone, true);
    }
    function zoneLeaveEcho() {
        var zone = zoneStack[zoneStack.length - 1];
        zoneStack.pop();
        switchToZone(zone, false);
    }
    function switchToZone(targetZone, bEnteringZone) {
        var currentZone = PSD;
        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {
            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);
        }
        if (targetZone === PSD)
            return;
        PSD = targetZone;
        if (currentZone === globalPSD)
            globalPSD.env = snapShot();
        if (patchGlobalPromise) {
            var GlobalPromise = globalPSD.env.Promise;
            var targetEnv = targetZone.env;
            if (currentZone.global || targetZone.global) {
                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);
                GlobalPromise.all = targetEnv.all;
                GlobalPromise.race = targetEnv.race;
                GlobalPromise.resolve = targetEnv.resolve;
                GlobalPromise.reject = targetEnv.reject;
                if (targetEnv.allSettled)
                    GlobalPromise.allSettled = targetEnv.allSettled;
                if (targetEnv.any)
                    GlobalPromise.any = targetEnv.any;
            }
        }
    }
    function snapShot() {
        var GlobalPromise = _global.Promise;
        return patchGlobalPromise ? {
            Promise: GlobalPromise,
            PromiseProp: Object.getOwnPropertyDescriptor(_global, "Promise"),
            all: GlobalPromise.all,
            race: GlobalPromise.race,
            allSettled: GlobalPromise.allSettled,
            any: GlobalPromise.any,
            resolve: GlobalPromise.resolve,
            reject: GlobalPromise.reject,
        } : {};
    }
    function usePSD(psd, fn, a1, a2, a3) {
        var outerScope = PSD;
        try {
            switchToZone(psd, true);
            return fn(a1, a2, a3);
        }
        finally {
            switchToZone(outerScope, false);
        }
    }
    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {
        return typeof fn !== 'function' ? fn : function () {
            var outerZone = PSD;
            if (possibleAwait)
                incrementExpectedAwaits();
            switchToZone(zone, true);
            try {
                return fn.apply(this, arguments);
            }
            finally {
                switchToZone(outerZone, false);
                if (cleanup)
                    queueMicrotask(decrementExpectedAwaits);
            }
        };
    }
    function execInGlobalContext(cb) {
        if (Promise === NativePromise && task.echoes === 0) {
            if (zoneEchoes === 0) {
                cb();
            }
            else {
                enqueueNativeMicroTask(cb);
            }
        }
        else {
            setTimeout(cb, 0);
        }
    }
    var rejection = DexiePromise.reject;

    function tempTransaction(db, mode, storeNames, fn) {
        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {
            if (db._state.openComplete) {
                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));
            }
            if (!db._state.isBeingOpened) {
                if (!db._state.autoOpen)
                    return rejection(new exceptions.DatabaseClosed());
                db.open().catch(nop);
            }
            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });
        }
        else {
            var trans = db._createTransaction(mode, storeNames, db._dbSchema);
            try {
                trans.create();
                db._state.PR1398_maxLoop = 3;
            }
            catch (ex) {
                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                    console.warn('Dexie: Need to reopen db');
                    db.close({ disableAutoOpen: false });
                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });
                }
                return rejection(ex);
            }
            return trans._promise(mode, function (resolve, reject) {
                return newScope(function () {
                    PSD.trans = trans;
                    return fn(resolve, reject, trans);
                });
            }).then(function (result) {
                if (mode === 'readwrite')
                    try {
                        trans.idbtrans.commit();
                    }
                    catch (_a) { }
                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });
            });
        }
    }

    var DEXIE_VERSION = '4.2.0';
    var maxString = String.fromCharCode(65535);
    var minKey = -Infinity;
    var INVALID_KEY_ARGUMENT = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";
    var STRING_EXPECTED = "String expected.";
    var connections = [];
    var DBNAMES_DB = '__dbnames';
    var READONLY = 'readonly';
    var READWRITE = 'readwrite';

    function combine(filter1, filter2) {
        return filter1 ?
            filter2 ?
                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :
                filter1 :
            filter2;
    }

    var AnyRange = {
        type: 3 ,
        lower: -Infinity,
        lowerOpen: false,
        upper: [[]],
        upperOpen: false
    };

    function workaroundForUndefinedPrimKey(keyPath) {
        return typeof keyPath === "string" && !/\./.test(keyPath)
            ? function (obj) {
                if (obj[keyPath] === undefined && (keyPath in obj)) {
                    obj = deepClone(obj);
                    delete obj[keyPath];
                }
                return obj;
            }
            : function (obj) { return obj; };
    }

    function Entity() {
        throw exceptions.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.");
    }

    function cmp(a, b) {
        try {
            var ta = type(a);
            var tb = type(b);
            if (ta !== tb) {
                if (ta === 'Array')
                    return 1;
                if (tb === 'Array')
                    return -1;
                if (ta === 'binary')
                    return 1;
                if (tb === 'binary')
                    return -1;
                if (ta === 'string')
                    return 1;
                if (tb === 'string')
                    return -1;
                if (ta === 'Date')
                    return 1;
                if (tb !== 'Date')
                    return NaN;
                return -1;
            }
            switch (ta) {
                case 'number':
                case 'Date':
                case 'string':
                    return a > b ? 1 : a < b ? -1 : 0;
                case 'binary': {
                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));
                }
                case 'Array':
                    return compareArrays(a, b);
            }
        }
        catch (_a) { }
        return NaN;
    }
    function compareArrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            var res = cmp(a[i], b[i]);
            if (res !== 0)
                return res;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function compareUint8Arrays(a, b) {
        var al = a.length;
        var bl = b.length;
        var l = al < bl ? al : bl;
        for (var i = 0; i < l; ++i) {
            if (a[i] !== b[i])
                return a[i] < b[i] ? -1 : 1;
        }
        return al === bl ? 0 : al < bl ? -1 : 1;
    }
    function type(x) {
        var t = typeof x;
        if (t !== 'object')
            return t;
        if (ArrayBuffer.isView(x))
            return 'binary';
        var tsTag = toStringTag(x);
        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;
    }
    function getUint8Array(a) {
        if (a instanceof Uint8Array)
            return a;
        if (ArrayBuffer.isView(a))
            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);
        return new Uint8Array(a);
    }

    function builtInDeletionTrigger(table, keys, res) {
        var yProps = table.schema.yProps;
        if (!yProps)
            return res;
        if (keys && res.numFailures > 0)
            keys = keys.filter(function (_, i) { return !res.failures[i]; });
        return Promise.all(yProps.map(function (_a) {
            var updatesTable = _a.updatesTable;
            return keys
                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()
                : table.db.table(updatesTable).clear();
        })).then(function () { return res; });
    }

    var Table =  (function () {
        function Table() {
        }
        Table.prototype._trans = function (mode, fn, writeLocked) {
            var trans = this._tx || PSD.trans;
            var tableName = this.name;
            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask("Dexie: ".concat(mode === 'readonly' ? 'read' : 'write', " ").concat(this.name));
            function checkTableInTransaction(resolve, reject, trans) {
                if (!trans.schema[tableName])
                    throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
                return fn(trans.idbtrans, trans);
            }
            var wasRootExec = beginMicroTickScope();
            try {
                var p = trans && trans.db._novip === this.db._novip ?
                    trans === PSD.trans ?
                        trans._promise(mode, checkTableInTransaction, writeLocked) :
                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :
                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);
                if (task) {
                    p._consoleTask = task;
                    p = p.catch(function (err) {
                        console.trace(err);
                        return rejection(err);
                    });
                }
                return p;
            }
            finally {
                if (wasRootExec)
                    endMicroTickScope();
            }
        };
        Table.prototype.get = function (keyOrCrit, cb) {
            var _this = this;
            if (keyOrCrit && keyOrCrit.constructor === Object)
                return this.where(keyOrCrit).first(cb);
            if (keyOrCrit == null)
                return rejection(new exceptions.Type("Invalid argument to Table.get()"));
            return this._trans('readonly', function (trans) {
                return _this.core.get({ trans: trans, key: keyOrCrit })
                    .then(function (res) { return _this.hook.reading.fire(res); });
            }).then(cb);
        };
        Table.prototype.where = function (indexOrCrit) {
            if (typeof indexOrCrit === 'string')
                return new this.db.WhereClause(this, indexOrCrit);
            if (isArray(indexOrCrit))
                return new this.db.WhereClause(this, "[".concat(indexOrCrit.join('+'), "]"));
            var keyPaths = keys(indexOrCrit);
            if (keyPaths.length === 1)
                return this
                    .where(keyPaths[0])
                    .equals(indexOrCrit[keyPaths[0]]);
            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {
                if (ix.compound &&
                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {
                    for (var i = 0; i < keyPaths.length; ++i) {
                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)
                            return false;
                    }
                    return true;
                }
                return false;
            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];
            if (compoundIndex && this.db._maxKey !== maxString) {
                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);
                return this
                    .where(keyPathsInValidOrder)
                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));
            }
            if (!compoundIndex && debug)
                console.warn("The query ".concat(JSON.stringify(indexOrCrit), " on ").concat(this.name, " would benefit from a ") +
                    "compound index [".concat(keyPaths.join('+'), "]"));
            var idxByName = this.schema.idxByName;
            function equals(a, b) {
                return cmp(a, b) === 0;
            }
            var _a = keyPaths.reduce(function (_a, keyPath) {
                var prevIndex = _a[0], prevFilterFn = _a[1];
                var index = idxByName[keyPath];
                var value = indexOrCrit[keyPath];
                return [
                    prevIndex || index,
                    prevIndex || !index ?
                        combine(prevFilterFn, index && index.multi ?
                            function (x) {
                                var prop = getByKeyPath(x, keyPath);
                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });
                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })
                        : prevFilterFn
                ];
            }, [null, null]), idx = _a[0], filterFunction = _a[1];
            return idx ?
                this.where(idx.name).equals(indexOrCrit[idx.keyPath])
                    .filter(filterFunction) :
                compoundIndex ?
                    this.filter(filterFunction) :
                    this.where(keyPaths).equals('');
        };
        Table.prototype.filter = function (filterFunction) {
            return this.toCollection().and(filterFunction);
        };
        Table.prototype.count = function (thenShortcut) {
            return this.toCollection().count(thenShortcut);
        };
        Table.prototype.offset = function (offset) {
            return this.toCollection().offset(offset);
        };
        Table.prototype.limit = function (numRows) {
            return this.toCollection().limit(numRows);
        };
        Table.prototype.each = function (callback) {
            return this.toCollection().each(callback);
        };
        Table.prototype.toArray = function (thenShortcut) {
            return this.toCollection().toArray(thenShortcut);
        };
        Table.prototype.toCollection = function () {
            return new this.db.Collection(new this.db.WhereClause(this));
        };
        Table.prototype.orderBy = function (index) {
            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?
                "[".concat(index.join('+'), "]") :
                index));
        };
        Table.prototype.reverse = function () {
            return this.toCollection().reverse();
        };
        Table.prototype.mapToClass = function (constructor) {
            var _a = this, db = _a.db, tableName = _a.name;
            this.schema.mappedClass = constructor;
            if (constructor.prototype instanceof Entity) {
                constructor =  (function (_super) {
                    __extends(class_1, _super);
                    function class_1() {
                        return _super !== null && _super.apply(this, arguments) || this;
                    }
                    Object.defineProperty(class_1.prototype, "db", {
                        get: function () { return db; },
                        enumerable: false,
                        configurable: true
                    });
                    class_1.prototype.table = function () { return tableName; };
                    return class_1;
                }(constructor));
            }
            var inheritedProps = new Set();
            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {
                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });
            }
            var readHook = function (obj) {
                if (!obj)
                    return obj;
                var res = Object.create(constructor.prototype);
                for (var m in obj)
                    if (!inheritedProps.has(m))
                        try {
                            res[m] = obj[m];
                        }
                        catch (_) { }
                return res;
            };
            if (this.schema.readHook) {
                this.hook.reading.unsubscribe(this.schema.readHook);
            }
            this.schema.readHook = readHook;
            this.hook("reading", readHook);
            return constructor;
        };
        Table.prototype.defineClass = function () {
            function Class(content) {
                extend(this, content);
            }
            return this.mapToClass(Class);
        };
        Table.prototype.add = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });
            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.update = function (keyOrObject, modifications) {
            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {
                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);
                if (key === undefined)
                    return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));
                return this.where(":id").equals(key).modify(modifications);
            }
            else {
                return this.where(":id").equals(keyOrObject).modify(modifications);
            }
        };
        Table.prototype.put = function (obj, key) {
            var _this = this;
            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
            var objToAdd = obj;
            if (keyPath && auto) {
                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);
            }
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })
                .then(function (lastResult) {
                if (keyPath) {
                    try {
                        setByKeyPath(obj, keyPath, lastResult);
                    }
                    catch (_) { }
                }
                return lastResult;
            });
        };
        Table.prototype.delete = function (key) {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })
                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });
        };
        Table.prototype.clear = function () {
            var _this = this;
            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })
                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })
                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });
        };
        Table.prototype.bulkGet = function (keys) {
            var _this = this;
            return this._trans('readonly', function (trans) {
                return _this.core.getMany({
                    keys: keys,
                    trans: trans
                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });
            });
        };
        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToAdd = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkAdd(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {
            var _this = this;
            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;
            options = options || (keys ? undefined : keysOrOptions);
            var wantResults = options ? options.allKeys : undefined;
            return this._trans('readwrite', function (trans) {
                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;
                if (keyPath && keys)
                    throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
                if (keys && keys.length !== objects.length)
                    throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");
                var numObjects = objects.length;
                var objectsToPut = keyPath && auto ?
                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :
                    objects;
                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })
                    .then(function (_a) {
                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;
                    var result = wantResults ? results : lastResult;
                    if (numFailures === 0)
                        return result;
                    throw new BulkError("".concat(_this.name, ".bulkPut(): ").concat(numFailures, " of ").concat(numObjects, " operations failed"), failures);
                });
            });
        };
        Table.prototype.bulkUpdate = function (keysAndChanges) {
            var _this = this;
            var coreTable = this.core;
            var keys = keysAndChanges.map(function (entry) { return entry.key; });
            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });
            var offsetMap = [];
            return this._trans('readwrite', function (trans) {
                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {
                    var resultKeys = [];
                    var resultObjs = [];
                    keysAndChanges.forEach(function (_a, idx) {
                        var key = _a.key, changes = _a.changes;
                        var obj = objs[idx];
                        if (obj) {
                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {
                                var keyPath = _b[_i];
                                var value = changes[keyPath];
                                if (keyPath === _this.schema.primKey.keyPath) {
                                    if (cmp(value, key) !== 0) {
                                        throw new exceptions.Constraint("Cannot update primary key in bulkUpdate()");
                                    }
                                }
                                else {
                                    setByKeyPath(obj, keyPath, value);
                                }
                            }
                            offsetMap.push(idx);
                            resultKeys.push(key);
                            resultObjs.push(obj);
                        }
                    });
                    var numEntries = resultKeys.length;
                    return coreTable
                        .mutate({
                        trans: trans,
                        type: 'put',
                        keys: resultKeys,
                        values: resultObjs,
                        updates: {
                            keys: keys,
                            changeSpecs: changeSpecs
                        }
                    })
                        .then(function (_a) {
                        var numFailures = _a.numFailures, failures = _a.failures;
                        if (numFailures === 0)
                            return numEntries;
                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {
                            var offset = _b[_i];
                            var mappedOffset = offsetMap[Number(offset)];
                            if (mappedOffset != null) {
                                var failure = failures[offset];
                                delete failures[offset];
                                failures[mappedOffset] = failure;
                            }
                        }
                        throw new BulkError("".concat(_this.name, ".bulkUpdate(): ").concat(numFailures, " of ").concat(numEntries, " operations failed"), failures);
                    });
                });
            });
        };
        Table.prototype.bulkDelete = function (keys) {
            var _this = this;
            var numKeys = keys.length;
            return this._trans('readwrite', function (trans) {
                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })
                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });
            }).then(function (_a) {
                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;
                if (numFailures === 0)
                    return lastResult;
                throw new BulkError("".concat(_this.name, ".bulkDelete(): ").concat(numFailures, " of ").concat(numKeys, " operations failed"), failures);
            });
        };
        return Table;
    }());

    function Events(ctx) {
        var evs = {};
        var rv = function (eventName, subscriber) {
            if (subscriber) {
                var i = arguments.length, args = new Array(i - 1);
                while (--i)
                    args[i - 1] = arguments[i];
                evs[eventName].subscribe.apply(null, args);
                return ctx;
            }
            else if (typeof (eventName) === 'string') {
                return evs[eventName];
            }
        };
        rv.addEventType = add;
        for (var i = 1, l = arguments.length; i < l; ++i) {
            add(arguments[i]);
        }
        return rv;
        function add(eventName, chainFunction, defaultFunction) {
            if (typeof eventName === 'object')
                return addConfiguredEvents(eventName);
            if (!chainFunction)
                chainFunction = reverseStoppableEventChain;
            if (!defaultFunction)
                defaultFunction = nop;
            var context = {
                subscribers: [],
                fire: defaultFunction,
                subscribe: function (cb) {
                    if (context.subscribers.indexOf(cb) === -1) {
                        context.subscribers.push(cb);
                        context.fire = chainFunction(context.fire, cb);
                    }
                },
                unsubscribe: function (cb) {
                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });
                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);
                }
            };
            evs[eventName] = rv[eventName] = context;
            return context;
        }
        function addConfiguredEvents(cfg) {
            keys(cfg).forEach(function (eventName) {
                var args = cfg[eventName];
                if (isArray(args)) {
                    add(eventName, cfg[eventName][0], cfg[eventName][1]);
                }
                else if (args === 'asap') {
                    var context = add(eventName, mirror, function fire() {
                        var i = arguments.length, args = new Array(i);
                        while (i--)
                            args[i] = arguments[i];
                        context.subscribers.forEach(function (fn) {
                            asap$1(function fireEvent() {
                                fn.apply(null, args);
                            });
                        });
                    });
                }
                else
                    throw new exceptions.InvalidArgument("Invalid event config");
            });
        }
    }

    function makeClassConstructor(prototype, constructor) {
        derive(constructor).from({ prototype: prototype });
        return constructor;
    }

    function createTableConstructor(db) {
        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {
            this.db = db;
            this._tx = trans;
            this.name = name;
            this.schema = tableSchema;
            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {
                "creating": [hookCreatingChain, nop],
                "reading": [pureFunctionChain, mirror],
                "updating": [hookUpdatingChain, nop],
                "deleting": [hookDeletingChain, nop]
            });
        });
    }

    function isPlainKeyRange(ctx, ignoreLimitFilter) {
        return !(ctx.filter || ctx.algorithm || ctx.or) &&
            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);
    }
    function addFilter(ctx, fn) {
        ctx.filter = combine(ctx.filter, fn);
    }
    function addReplayFilter(ctx, factory, isLimitFilter) {
        var curr = ctx.replayFilter;
        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;
        ctx.justLimit = isLimitFilter && !curr;
    }
    function addMatchFilter(ctx, fn) {
        ctx.isMatch = combine(ctx.isMatch, fn);
    }
    function getIndexOrStore(ctx, coreSchema) {
        if (ctx.isPrimKey)
            return coreSchema.primaryKey;
        var index = coreSchema.getIndexByKeyPath(ctx.index);
        if (!index)
            throw new exceptions.Schema("KeyPath " + ctx.index + " on object store " + coreSchema.name + " is not indexed");
        return index;
    }
    function openCursor(ctx, coreTable, trans) {
        var index = getIndexOrStore(ctx, coreTable.schema);
        return coreTable.openCursor({
            trans: trans,
            values: !ctx.keysOnly,
            reverse: ctx.dir === 'prev',
            unique: !!ctx.unique,
            query: {
                index: index,
                range: ctx.range
            }
        });
    }
    function iter(ctx, fn, coreTrans, coreTable) {
        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;
        if (!ctx.or) {
            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);
        }
        else {
            var set_1 = {};
            var union = function (item, cursor, advance) {
                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {
                    var primaryKey = cursor.primaryKey;
                    var key = '' + primaryKey;
                    if (key === '[object ArrayBuffer]')
                        key = '' + new Uint8Array(primaryKey);
                    if (!hasOwn(set_1, key)) {
                        set_1[key] = true;
                        fn(item, cursor, advance);
                    }
                }
            };
            return Promise.all([
                ctx.or._iterate(union, coreTrans),
                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)
            ]);
        }
    }
    function iterate(cursorPromise, filter, fn, valueMapper) {
        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;
        var wrappedFn = wrap(mappedFn);
        return cursorPromise.then(function (cursor) {
            if (cursor) {
                return cursor.start(function () {
                    var c = function () { return cursor.continue(); };
                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))
                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });
                    c();
                });
            }
        });
    }

    var PropModification =  (function () {
        function PropModification(spec) {
            this["@@propmod"] = spec;
        }
        PropModification.prototype.execute = function (value) {
            var _a;
            var spec = this["@@propmod"];
            if (spec.add !== undefined) {
                var term = spec.add;
                if (isArray(term)) {
                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();
                }
                if (typeof term === 'number')
                    return (Number(value) || 0) + term;
                if (typeof term === 'bigint') {
                    try {
                        return BigInt(value) + term;
                    }
                    catch (_b) {
                        return BigInt(0) + term;
                    }
                }
                throw new TypeError("Invalid term ".concat(term));
            }
            if (spec.remove !== undefined) {
                var subtrahend_1 = spec.remove;
                if (isArray(subtrahend_1)) {
                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];
                }
                if (typeof subtrahend_1 === 'number')
                    return Number(value) - subtrahend_1;
                if (typeof subtrahend_1 === 'bigint') {
                    try {
                        return BigInt(value) - subtrahend_1;
                    }
                    catch (_c) {
                        return BigInt(0) - subtrahend_1;
                    }
                }
                throw new TypeError("Invalid subtrahend ".concat(subtrahend_1));
            }
            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];
            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {
                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);
            }
            return value;
        };
        return PropModification;
    }());

    var Collection =  (function () {
        function Collection() {
        }
        Collection.prototype._read = function (fn, cb) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readonly', fn).then(cb);
        };
        Collection.prototype._write = function (fn) {
            var ctx = this._ctx;
            return ctx.error ?
                ctx.table._trans(null, rejection.bind(null, ctx.error)) :
                ctx.table._trans('readwrite', fn, "locked");
        };
        Collection.prototype._addAlgorithm = function (fn) {
            var ctx = this._ctx;
            ctx.algorithm = combine(ctx.algorithm, fn);
        };
        Collection.prototype._iterate = function (fn, coreTrans) {
            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);
        };
        Collection.prototype.clone = function (props) {
            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);
            if (props)
                extend(ctx, props);
            rv._ctx = ctx;
            return rv;
        };
        Collection.prototype.raw = function () {
            this._ctx.valueMapper = null;
            return this;
        };
        Collection.prototype.each = function (fn) {
            var ctx = this._ctx;
            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });
        };
        Collection.prototype.count = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                var coreTable = ctx.table.core;
                if (isPlainKeyRange(ctx, true)) {
                    return coreTable.count({
                        trans: trans,
                        query: {
                            index: getIndexOrStore(ctx, coreTable.schema),
                            range: ctx.range
                        }
                    }).then(function (count) { return Math.min(count, ctx.limit); });
                }
                else {
                    var count = 0;
                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)
                        .then(function () { return count; });
                }
            }).then(cb);
        };
        Collection.prototype.sortBy = function (keyPath, cb) {
            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;
            function getval(obj, i) {
                if (i)
                    return getval(obj[parts[i]], i - 1);
                return obj[lastPart];
            }
            var order = this._ctx.dir === "next" ? 1 : -1;
            function sorter(a, b) {
                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);
                return cmp(aVal, bVal) * order;
            }
            return this.toArray(function (a) {
                return a.sort(sorter);
            }).then(cb);
        };
        Collection.prototype.toArray = function (cb) {
            var _this = this;
            return this._read(function (trans) {
                var ctx = _this._ctx;
                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                    var valueMapper_1 = ctx.valueMapper;
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        limit: ctx.limit,
                        values: true,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    }).then(function (_a) {
                        var result = _a.result;
                        return valueMapper_1 ? result.map(valueMapper_1) : result;
                    });
                }
                else {
                    var a_1 = [];
                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });
                }
            }, cb);
        };
        Collection.prototype.offset = function (offset) {
            var ctx = this._ctx;
            if (offset <= 0)
                return this;
            ctx.offset += offset;
            if (isPlainKeyRange(ctx)) {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function (cursor, advance) {
                        if (offsetLeft === 0)
                            return true;
                        if (offsetLeft === 1) {
                            --offsetLeft;
                            return false;
                        }
                        advance(function () {
                            cursor.advance(offsetLeft);
                            offsetLeft = 0;
                        });
                        return false;
                    };
                });
            }
            else {
                addReplayFilter(ctx, function () {
                    var offsetLeft = offset;
                    return function () { return (--offsetLeft < 0); };
                });
            }
            return this;
        };
        Collection.prototype.limit = function (numRows) {
            this._ctx.limit = Math.min(this._ctx.limit, numRows);
            addReplayFilter(this._ctx, function () {
                var rowsLeft = numRows;
                return function (cursor, advance, resolve) {
                    if (--rowsLeft <= 0)
                        advance(resolve);
                    return rowsLeft >= 0;
                };
            }, true);
            return this;
        };
        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {
            addFilter(this._ctx, function (cursor, advance, resolve) {
                if (filterFunction(cursor.value)) {
                    advance(resolve);
                    return bIncludeStopEntry;
                }
                else {
                    return true;
                }
            });
            return this;
        };
        Collection.prototype.first = function (cb) {
            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.last = function (cb) {
            return this.reverse().first(cb);
        };
        Collection.prototype.filter = function (filterFunction) {
            addFilter(this._ctx, function (cursor) {
                return filterFunction(cursor.value);
            });
            addMatchFilter(this._ctx, filterFunction);
            return this;
        };
        Collection.prototype.and = function (filter) {
            return this.filter(filter);
        };
        Collection.prototype.or = function (indexName) {
            return new this.db.WhereClause(this._ctx.table, indexName, this);
        };
        Collection.prototype.reverse = function () {
            this._ctx.dir = (this._ctx.dir === "prev" ? "next" : "prev");
            if (this._ondirectionchange)
                this._ondirectionchange(this._ctx.dir);
            return this;
        };
        Collection.prototype.desc = function () {
            return this.reverse();
        };
        Collection.prototype.eachKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.key, cursor); });
        };
        Collection.prototype.eachUniqueKey = function (cb) {
            this._ctx.unique = "unique";
            return this.eachKey(cb);
        };
        Collection.prototype.eachPrimaryKey = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });
        };
        Collection.prototype.keys = function (cb) {
            var ctx = this._ctx;
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.key);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.primaryKeys = function (cb) {
            var ctx = this._ctx;
            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {
                return this._read(function (trans) {
                    var index = getIndexOrStore(ctx, ctx.table.core.schema);
                    return ctx.table.core.query({
                        trans: trans,
                        values: false,
                        limit: ctx.limit,
                        query: {
                            index: index,
                            range: ctx.range
                        }
                    });
                }).then(function (_a) {
                    var result = _a.result;
                    return result;
                }).then(cb);
            }
            ctx.keysOnly = !ctx.isMatch;
            var a = [];
            return this.each(function (item, cursor) {
                a.push(cursor.primaryKey);
            }).then(function () {
                return a;
            }).then(cb);
        };
        Collection.prototype.uniqueKeys = function (cb) {
            this._ctx.unique = "unique";
            return this.keys(cb);
        };
        Collection.prototype.firstKey = function (cb) {
            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);
        };
        Collection.prototype.lastKey = function (cb) {
            return this.reverse().firstKey(cb);
        };
        Collection.prototype.distinct = function () {
            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];
            if (!idx || !idx.multi)
                return this;
            var set = {};
            addFilter(this._ctx, function (cursor) {
                var strKey = cursor.primaryKey.toString();
                var found = hasOwn(set, strKey);
                set[strKey] = true;
                return !found;
            });
            return this;
        };
        Collection.prototype.modify = function (changes) {
            var _this = this;
            var ctx = this._ctx;
            return this._write(function (trans) {
                var modifyer;
                if (typeof changes === 'function') {
                    modifyer = changes;
                }
                else {
                    var keyPaths = keys(changes);
                    var numKeys = keyPaths.length;
                    modifyer = function (item) {
                        var anythingModified = false;
                        for (var i = 0; i < numKeys; ++i) {
                            var keyPath = keyPaths[i];
                            var val = changes[keyPath];
                            var origVal = getByKeyPath(item, keyPath);
                            if (val instanceof PropModification) {
                                setByKeyPath(item, keyPath, val.execute(origVal));
                                anythingModified = true;
                            }
                            else if (origVal !== val) {
                                setByKeyPath(item, keyPath, val);
                                anythingModified = true;
                            }
                        }
                        return anythingModified;
                    };
                }
                var coreTable = ctx.table.core;
                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;
                var limit = 200;
                var modifyChunkSize = _this.db._options.modifyChunkSize;
                if (modifyChunkSize) {
                    if (typeof modifyChunkSize == 'object') {
                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;
                    }
                    else {
                        limit = modifyChunkSize;
                    }
                }
                var totalFailures = [];
                var successCount = 0;
                var failedKeys = [];
                var applyMutateResult = function (expectedCount, res) {
                    var failures = res.failures, numFailures = res.numFailures;
                    successCount += expectedCount - numFailures;
                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {
                        var pos = _a[_i];
                        totalFailures.push(failures[pos]);
                    }
                };
                var isUnconditionalDelete = changes === deleteCallback;
                return _this.clone().primaryKeys().then(function (keys) {
                    var criteria = isPlainKeyRange(ctx) &&
                        ctx.limit === Infinity &&
                        (typeof changes !== 'function' || isUnconditionalDelete) && {
                        index: ctx.index,
                        range: ctx.range
                    };
                    var nextChunk = function (offset) {
                        var count = Math.min(limit, keys.length - offset);
                        var keysInChunk = keys.slice(offset, offset + count);
                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({
                            trans: trans,
                            keys: keysInChunk,
                            cache: "immutable"
                        })).then(function (values) {
                            var addValues = [];
                            var putValues = [];
                            var putKeys = outbound ? [] : null;
                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];
                            if (!isUnconditionalDelete)
                                for (var i = 0; i < count; ++i) {
                                    var origValue = values[i];
                                    var ctx_1 = {
                                        value: deepClone(origValue),
                                        primKey: keys[offset + i]
                                    };
                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {
                                        if (ctx_1.value == null) {
                                            deleteKeys.push(keys[offset + i]);
                                        }
                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {
                                            deleteKeys.push(keys[offset + i]);
                                            addValues.push(ctx_1.value);
                                        }
                                        else {
                                            putValues.push(ctx_1.value);
                                            if (outbound)
                                                putKeys.push(keys[offset + i]);
                                        }
                                    }
                                }
                            return Promise.resolve(addValues.length > 0 &&
                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })
                                    .then(function (res) {
                                    for (var pos in res.failures) {
                                        deleteKeys.splice(parseInt(pos), 1);
                                    }
                                    applyMutateResult(addValues.length, res);
                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'put',
                                    keys: putKeys,
                                    values: putValues,
                                    criteria: criteria,
                                    changeSpec: typeof changes !== 'function'
                                        && changes,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&
                                coreTable.mutate({
                                    trans: trans,
                                    type: 'delete',
                                    keys: deleteKeys,
                                    criteria: criteria,
                                    isAdditionalChunk: offset > 0
                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })
                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {
                                return keys.length > offset + count && nextChunk(offset + limit);
                            });
                        });
                    };
                    return nextChunk(0).then(function () {
                        if (totalFailures.length > 0)
                            throw new ModifyError("Error modifying one or more objects", totalFailures, successCount, failedKeys);
                        return keys.length;
                    });
                });
            });
        };
        Collection.prototype.delete = function () {
            var ctx = this._ctx, range = ctx.range;
            if (isPlainKeyRange(ctx) &&
                !ctx.table.schema.yProps &&
                (ctx.isPrimKey || range.type === 3 ))
             {
                return this._write(function (trans) {
                    var primaryKey = ctx.table.core.schema.primaryKey;
                    var coreRange = range;
                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {
                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })
                            .then(function (_a) {
                            var failures = _a.failures, numFailures = _a.numFailures;
                            if (numFailures)
                                throw new ModifyError("Could not delete some values", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);
                            return count - numFailures;
                        });
                    });
                });
            }
            return this.modify(deleteCallback);
        };
        return Collection;
    }());
    var deleteCallback = function (value, ctx) { return ctx.value = null; };

    function createCollectionConstructor(db) {
        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {
            this.db = db;
            var keyRange = AnyRange, error = null;
            if (keyRangeGenerator)
                try {
                    keyRange = keyRangeGenerator();
                }
                catch (ex) {
                    error = ex;
                }
            var whereCtx = whereClause._ctx;
            var table = whereCtx.table;
            var readingHook = table.hook.reading.fire;
            this._ctx = {
                table: table,
                index: whereCtx.index,
                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),
                range: keyRange,
                keysOnly: false,
                dir: "next",
                unique: "",
                algorithm: null,
                filter: null,
                replayFilter: null,
                justLimit: true,
                isMatch: null,
                offset: 0,
                limit: Infinity,
                error: error,
                or: whereCtx.or,
                valueMapper: readingHook !== mirror ? readingHook : null
            };
        });
    }

    function simpleCompare(a, b) {
        return a < b ? -1 : a === b ? 0 : 1;
    }
    function simpleCompareReverse(a, b) {
        return a > b ? -1 : a === b ? 0 : 1;
    }

    function fail(collectionOrWhereClause, err, T) {
        var collection = collectionOrWhereClause instanceof WhereClause ?
            new collectionOrWhereClause.Collection(collectionOrWhereClause) :
            collectionOrWhereClause;
        collection._ctx.error = T ? new T(err) : new TypeError(err);
        return collection;
    }
    function emptyCollection(whereClause) {
        return new whereClause.Collection(whereClause, function () { return rangeEqual(""); }).limit(0);
    }
    function upperFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toUpperCase(); } :
            function (s) { return s.toLowerCase(); };
    }
    function lowerFactory(dir) {
        return dir === "next" ?
            function (s) { return s.toLowerCase(); } :
            function (s) { return s.toUpperCase(); };
    }
    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {
        var length = Math.min(key.length, lowerNeedle.length);
        var llp = -1;
        for (var i = 0; i < length; ++i) {
            var lwrKeyChar = lowerKey[i];
            if (lwrKeyChar !== lowerNeedle[i]) {
                if (cmp(key[i], upperNeedle[i]) < 0)
                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);
                if (cmp(key[i], lowerNeedle[i]) < 0)
                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);
                if (llp >= 0)
                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);
                return null;
            }
            if (cmp(key[i], lwrKeyChar) < 0)
                llp = i;
        }
        if (length < lowerNeedle.length && dir === "next")
            return key + upperNeedle.substr(key.length);
        if (length < key.length && dir === "prev")
            return key.substr(0, upperNeedle.length);
        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));
    }
    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {
        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;
        if (!needles.every(function (s) { return typeof s === 'string'; })) {
            return fail(whereClause, STRING_EXPECTED);
        }
        function initDirection(dir) {
            upper = upperFactory(dir);
            lower = lowerFactory(dir);
            compare = (dir === "next" ? simpleCompare : simpleCompareReverse);
            var needleBounds = needles.map(function (needle) {
                return { lower: lower(needle), upper: upper(needle) };
            }).sort(function (a, b) {
                return compare(a.lower, b.lower);
            });
            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });
            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });
            direction = dir;
            nextKeySuffix = (dir === "next" ? "" : suffix);
        }
        initDirection("next");
        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });
        c._ondirectionchange = function (direction) {
            initDirection(direction);
        };
        var firstPossibleNeedle = 0;
        c._addAlgorithm(function (cursor, advance, resolve) {
            var key = cursor.key;
            if (typeof key !== 'string')
                return false;
            var lowerKey = lower(key);
            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {
                return true;
            }
            else {
                var lowestPossibleCasing = null;
                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {
                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);
                    if (casing === null && lowestPossibleCasing === null)
                        firstPossibleNeedle = i + 1;
                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {
                        lowestPossibleCasing = casing;
                    }
                }
                if (lowestPossibleCasing !== null) {
                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });
                }
                else {
                    advance(resolve);
                }
                return false;
            }
        });
        return c;
    }
    function createRange(lower, upper, lowerOpen, upperOpen) {
        return {
            type: 2 ,
            lower: lower,
            upper: upper,
            lowerOpen: lowerOpen,
            upperOpen: upperOpen
        };
    }
    function rangeEqual(value) {
        return {
            type: 1 ,
            lower: value,
            upper: value
        };
    }

    var WhereClause =  (function () {
        function WhereClause() {
        }
        Object.defineProperty(WhereClause.prototype, "Collection", {
            get: function () {
                return this._ctx.table.db.Collection;
            },
            enumerable: false,
            configurable: true
        });
        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {
            includeLower = includeLower !== false;
            includeUpper = includeUpper === true;
            try {
                if ((this._cmp(lower, upper) > 0) ||
                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))
                    return emptyCollection(this);
                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
        };
        WhereClause.prototype.equals = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return rangeEqual(value); });
        };
        WhereClause.prototype.above = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, true); });
        };
        WhereClause.prototype.aboveOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(value, undefined, false); });
        };
        WhereClause.prototype.below = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });
        };
        WhereClause.prototype.belowOrEqual = function (value) {
            if (value == null)
                return fail(this, INVALID_KEY_ARGUMENT);
            return new this.Collection(this, function () { return createRange(undefined, value); });
        };
        WhereClause.prototype.startsWith = function (str) {
            if (typeof str !== 'string')
                return fail(this, STRING_EXPECTED);
            return this.between(str, str + maxString, true, true);
        };
        WhereClause.prototype.startsWithIgnoreCase = function (str) {
            if (str === "")
                return this.startsWith(str);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);
        };
        WhereClause.prototype.equalsIgnoreCase = function (str) {
            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], "");
        };
        WhereClause.prototype.anyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, "");
        };
        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return emptyCollection(this);
            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);
        };
        WhereClause.prototype.anyOf = function () {
            var _this = this;
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            var compare = this._cmp;
            try {
                set.sort(compare);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            if (set.length === 0)
                return emptyCollection(this);
            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });
            c._ondirectionchange = function (direction) {
                compare = (direction === "next" ?
                    _this._ascending :
                    _this._descending);
                set.sort(compare);
            };
            var i = 0;
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (compare(key, set[i]) > 0) {
                    ++i;
                    if (i === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (compare(key, set[i]) === 0) {
                    return true;
                }
                else {
                    advance(function () { cursor.continue(set[i]); });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.notEqual = function (value) {
            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.noneOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (set.length === 0)
                return new this.Collection(this);
            try {
                set.sort(this._ascending);
            }
            catch (e) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var ranges = set.reduce(function (res, val) { return res ?
                res.concat([[res[res.length - 1][1], val]]) :
                [[minKey, val]]; }, null);
            ranges.push([set[set.length - 1], this.db._maxKey]);
            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });
        };
        WhereClause.prototype.inAnyRange = function (ranges, options) {
            var _this = this;
            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;
            if (ranges.length === 0)
                return emptyCollection(this);
            if (!ranges.every(function (range) {
                return range[0] !== undefined &&
                    range[1] !== undefined &&
                    ascending(range[0], range[1]) <= 0;
            })) {
                return fail(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", exceptions.InvalidArgument);
            }
            var includeLowers = !options || options.includeLowers !== false;
            var includeUppers = options && options.includeUppers === true;
            function addRange(ranges, newRange) {
                var i = 0, l = ranges.length;
                for (; i < l; ++i) {
                    var range = ranges[i];
                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {
                        range[0] = min(range[0], newRange[0]);
                        range[1] = max(range[1], newRange[1]);
                        break;
                    }
                }
                if (i === l)
                    ranges.push(newRange);
                return ranges;
            }
            var sortDirection = ascending;
            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }
            var set;
            try {
                set = ranges.reduce(addRange, []);
                set.sort(rangeSorter);
            }
            catch (ex) {
                return fail(this, INVALID_KEY_ARGUMENT);
            }
            var rangePos = 0;
            var keyIsBeyondCurrentEntry = includeUppers ?
                function (key) { return ascending(key, set[rangePos][1]) > 0; } :
                function (key) { return ascending(key, set[rangePos][1]) >= 0; };
            var keyIsBeforeCurrentEntry = includeLowers ?
                function (key) { return descending(key, set[rangePos][0]) > 0; } :
                function (key) { return descending(key, set[rangePos][0]) >= 0; };
            function keyWithinCurrentRange(key) {
                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);
            }
            var checkKey = keyIsBeyondCurrentEntry;
            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });
            c._ondirectionchange = function (direction) {
                if (direction === "next") {
                    checkKey = keyIsBeyondCurrentEntry;
                    sortDirection = ascending;
                }
                else {
                    checkKey = keyIsBeforeCurrentEntry;
                    sortDirection = descending;
                }
                set.sort(rangeSorter);
            };
            c._addAlgorithm(function (cursor, advance, resolve) {
                var key = cursor.key;
                while (checkKey(key)) {
                    ++rangePos;
                    if (rangePos === set.length) {
                        advance(resolve);
                        return false;
                    }
                }
                if (keyWithinCurrentRange(key)) {
                    return true;
                }
                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {
                    return false;
                }
                else {
                    advance(function () {
                        if (sortDirection === ascending)
                            cursor.continue(set[rangePos][0]);
                        else
                            cursor.continue(set[rangePos][1]);
                    });
                    return false;
                }
            });
            return c;
        };
        WhereClause.prototype.startsWithAnyOf = function () {
            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);
            if (!set.every(function (s) { return typeof s === 'string'; })) {
                return fail(this, "startsWithAnyOf() only works with strings");
            }
            if (set.length === 0)
                return emptyCollection(this);
            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));
        };
        return WhereClause;
    }());

    function createWhereClauseConstructor(db) {
        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {
            this.db = db;
            this._ctx = {
                table: table,
                index: index === ":id" ? null : index,
                or: orCollection
            };
            this._cmp = this._ascending = cmp;
            this._descending = function (a, b) { return cmp(b, a); };
            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };
            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };
            this._IDBKeyRange = db._deps.IDBKeyRange;
            if (!this._IDBKeyRange)
                throw new exceptions.MissingAPI();
        });
    }

    function eventRejectHandler(reject) {
        return wrap(function (event) {
            preventDefault(event);
            reject(event.target.error);
            return false;
        });
    }
    function preventDefault(event) {
        if (event.stopPropagation)
            event.stopPropagation();
        if (event.preventDefault)
            event.preventDefault();
    }

    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';
    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';
    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);

    var Transaction =  (function () {
        function Transaction() {
        }
        Transaction.prototype._lock = function () {
            assert(!PSD.global);
            ++this._reculock;
            if (this._reculock === 1 && !PSD.global)
                PSD.lockOwnerFor = this;
            return this;
        };
        Transaction.prototype._unlock = function () {
            assert(!PSD.global);
            if (--this._reculock === 0) {
                if (!PSD.global)
                    PSD.lockOwnerFor = null;
                while (this._blockedFuncs.length > 0 && !this._locked()) {
                    var fnAndPSD = this._blockedFuncs.shift();
                    try {
                        usePSD(fnAndPSD[1], fnAndPSD[0]);
                    }
                    catch (e) { }
                }
            }
            return this;
        };
        Transaction.prototype._locked = function () {
            return this._reculock && PSD.lockOwnerFor !== this;
        };
        Transaction.prototype.create = function (idbtrans) {
            var _this = this;
            if (!this.mode)
                return this;
            var idbdb = this.db.idbdb;
            var dbOpenError = this.db._state.dbOpenError;
            assert(!this.idbtrans);
            if (!idbtrans && !idbdb) {
                switch (dbOpenError && dbOpenError.name) {
                    case "DatabaseClosedError":
                        throw new exceptions.DatabaseClosed(dbOpenError);
                    case "MissingAPIError":
                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);
                    default:
                        throw new exceptions.OpenFailed(dbOpenError);
                }
            }
            if (!this.active)
                throw new exceptions.TransactionInactive();
            assert(this._completion._state === null);
            idbtrans = this.idbtrans = idbtrans ||
                (this.db.core
                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })
                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));
            idbtrans.onerror = wrap(function (ev) {
                preventDefault(ev);
                _this._reject(idbtrans.error);
            });
            idbtrans.onabort = wrap(function (ev) {
                preventDefault(ev);
                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));
                _this.active = false;
                _this.on("abort").fire(ev);
            });
            idbtrans.oncomplete = wrap(function () {
                _this.active = false;
                _this._resolve();
                if ('mutatedParts' in idbtrans) {
                    globalEvents.storagemutated.fire(idbtrans["mutatedParts"]);
                }
            });
            return this;
        };
        Transaction.prototype._promise = function (mode, fn, bWriteLock) {
            var _this = this;
            if (mode === 'readwrite' && this.mode !== 'readwrite')
                return rejection(new exceptions.ReadOnly("Transaction is readonly"));
            if (!this.active)
                return rejection(new exceptions.TransactionInactive());
            if (this._locked()) {
                return new DexiePromise(function (resolve, reject) {
                    _this._blockedFuncs.push([function () {
                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);
                        }, PSD]);
                });
            }
            else if (bWriteLock) {
                return newScope(function () {
                    var p = new DexiePromise(function (resolve, reject) {
                        _this._lock();
                        var rv = fn(resolve, reject, _this);
                        if (rv && rv.then)
                            rv.then(resolve, reject);
                    });
                    p.finally(function () { return _this._unlock(); });
                    p._lib = true;
                    return p;
                });
            }
            else {
                var p = new DexiePromise(function (resolve, reject) {
                    var rv = fn(resolve, reject, _this);
                    if (rv && rv.then)
                        rv.then(resolve, reject);
                });
                p._lib = true;
                return p;
            }
        };
        Transaction.prototype._root = function () {
            return this.parent ? this.parent._root() : this;
        };
        Transaction.prototype.waitFor = function (promiseLike) {
            var root = this._root();
            var promise = DexiePromise.resolve(promiseLike);
            if (root._waitingFor) {
                root._waitingFor = root._waitingFor.then(function () { return promise; });
            }
            else {
                root._waitingFor = promise;
                root._waitingQueue = [];
                var store = root.idbtrans.objectStore(root.storeNames[0]);
                (function spin() {
                    ++root._spinCount;
                    while (root._waitingQueue.length)
                        (root._waitingQueue.shift())();
                    if (root._waitingFor)
                        store.get(-Infinity).onsuccess = spin;
                }());
            }
            var currentWaitPromise = root._waitingFor;
            return new DexiePromise(function (resolve, reject) {
                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {
                    if (root._waitingFor === currentWaitPromise) {
                        root._waitingFor = null;
                    }
                });
            });
        };
        Transaction.prototype.abort = function () {
            if (this.active) {
                this.active = false;
                if (this.idbtrans)
                    this.idbtrans.abort();
                this._reject(new exceptions.Abort());
            }
        };
        Transaction.prototype.table = function (tableName) {
            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));
            if (hasOwn(memoizedTables, tableName))
                return memoizedTables[tableName];
            var tableSchema = this.schema[tableName];
            if (!tableSchema) {
                throw new exceptions.NotFound("Table " + tableName + " not part of transaction");
            }
            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);
            transactionBoundTable.core = this.db.core.table(tableName);
            memoizedTables[tableName] = transactionBoundTable;
            return transactionBoundTable;
        };
        return Transaction;
    }());

    function createTransactionConstructor(db) {
        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {
            var _this = this;
            if (mode !== 'readonly')
                storeNames.forEach(function (storeName) {
                    var _a;
                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;
                    if (yProps)
                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));
                });
            this.db = db;
            this.mode = mode;
            this.storeNames = storeNames;
            this.schema = dbschema;
            this.chromeTransactionDurability = chromeTransactionDurability;
            this.idbtrans = null;
            this.on = Events(this, "complete", "error", "abort");
            this.parent = parent || null;
            this.active = true;
            this._reculock = 0;
            this._blockedFuncs = [];
            this._resolve = null;
            this._reject = null;
            this._waitingFor = null;
            this._waitingQueue = null;
            this._spinCount = 0;
            this._completion = new DexiePromise(function (resolve, reject) {
                _this._resolve = resolve;
                _this._reject = reject;
            });
            this._completion.then(function () {
                _this.active = false;
                _this.on.complete.fire();
            }, function (e) {
                var wasActive = _this.active;
                _this.active = false;
                _this.on.error.fire(e);
                _this.parent ?
                    _this.parent._reject(e) :
                    wasActive && _this.idbtrans && _this.idbtrans.abort();
                return rejection(e);
            });
        });
    }

    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {
        return {
            name: name,
            keyPath: keyPath,
            unique: unique,
            multi: multi,
            auto: auto,
            compound: compound,
            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? "++" : "") + nameFromKeyPath(keyPath),
            type: type
        };
    }
    function nameFromKeyPath(keyPath) {
        return typeof keyPath === 'string' ?
            keyPath :
            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : "";
    }

    function createTableSchema(name, primKey, indexes) {
        return {
            name: name,
            primKey: primKey,
            indexes: indexes,
            mappedClass: null,
            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),
        };
    }

    function safariMultiStoreFix(storeNames) {
        return storeNames.length === 1 ? storeNames[0] : storeNames;
    }
    var getMaxKey = function (IdbKeyRange) {
        try {
            IdbKeyRange.only([[]]);
            getMaxKey = function () { return [[]]; };
            return [[]];
        }
        catch (e) {
            getMaxKey = function () { return maxString; };
            return maxString;
        }
    };

    function getKeyExtractor(keyPath) {
        if (keyPath == null) {
            return function () { return undefined; };
        }
        else if (typeof keyPath === 'string') {
            return getSinglePathKeyExtractor(keyPath);
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }
    function getSinglePathKeyExtractor(keyPath) {
        var split = keyPath.split('.');
        if (split.length === 1) {
            return function (obj) { return obj[keyPath]; };
        }
        else {
            return function (obj) { return getByKeyPath(obj, keyPath); };
        }
    }

    function arrayify(arrayLike) {
        return [].slice.call(arrayLike);
    }
    var _id_counter = 0;
    function getKeyPathAlias(keyPath) {
        return keyPath == null ?
            ":id" :
            typeof keyPath === 'string' ?
                keyPath :
                "[".concat(keyPath.join('+'), "]");
    }
    function createDBCore(db, IdbKeyRange, tmpTrans) {
        function extractSchema(db, trans) {
            var tables = arrayify(db.objectStoreNames);
            return {
                schema: {
                    name: db.name,
                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {
                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;
                        var compound = isArray(keyPath);
                        var outbound = keyPath == null;
                        var indexByKeyPath = {};
                        var result = {
                            name: store.name,
                            primaryKey: {
                                name: null,
                                isPrimaryKey: true,
                                outbound: outbound,
                                compound: compound,
                                keyPath: keyPath,
                                autoIncrement: autoIncrement,
                                unique: true,
                                extractKey: getKeyExtractor(keyPath)
                            },
                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })
                                .map(function (index) {
                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;
                                var compound = isArray(keyPath);
                                var result = {
                                    name: name,
                                    compound: compound,
                                    keyPath: keyPath,
                                    unique: unique,
                                    multiEntry: multiEntry,
                                    extractKey: getKeyExtractor(keyPath)
                                };
                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;
                                return result;
                            }),
                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }
                        };
                        indexByKeyPath[":id"] = result.primaryKey;
                        if (keyPath != null) {
                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;
                        }
                        return result;
                    })
                },
                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&
                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
                        !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
                        [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
            };
        }
        function makeIDBKeyRange(range) {
            if (range.type === 3 )
                return null;
            if (range.type === 4 )
                throw new Error("Cannot convert never type to IDBKeyRange");
            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;
            var idbRange = lower === undefined ?
                upper === undefined ?
                    null :
                    IdbKeyRange.upperBound(upper, !!upperOpen) :
                upper === undefined ?
                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :
                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);
            return idbRange;
        }
        function createDbCoreTable(tableSchema) {
            var tableName = tableSchema.name;
            function mutate(_a) {
                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var store = trans.objectStore(tableName);
                    var outbound = store.keyPath == null;
                    var isAddOrPut = type === "put" || type === "add";
                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')
                        throw new Error("Invalid operation type: " + type);
                    var length = (keys || values || { length: 1 }).length;
                    if (keys && values && keys.length !== values.length) {
                        throw new Error("Given keys array must have same length as given values array.");
                    }
                    if (length === 0)
                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });
                    var req;
                    var reqs = [];
                    var failures = [];
                    var numFailures = 0;
                    var errorHandler = function (event) {
                        ++numFailures;
                        preventDefault(event);
                    };
                    if (type === 'deleteRange') {
                        if (range.type === 4 )
                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });
                        if (range.type === 3 )
                            reqs.push(req = store.clear());
                        else
                            reqs.push(req = store.delete(makeIDBKeyRange(range)));
                    }
                    else {
                        var _a = isAddOrPut ?
                            outbound ?
                                [values, keys] :
                                [values, null] :
                            [keys, null], args1 = _a[0], args2 = _a[1];
                        if (isAddOrPut) {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = (args2 && args2[i] !== undefined ?
                                    store[type](args1[i], args2[i]) :
                                    store[type](args1[i])));
                                req.onerror = errorHandler;
                            }
                        }
                        else {
                            for (var i = 0; i < length; ++i) {
                                reqs.push(req = store[type](args1[i]));
                                req.onerror = errorHandler;
                            }
                        }
                    }
                    var done = function (event) {
                        var lastResult = event.target.result;
                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });
                        resolve({
                            numFailures: numFailures,
                            failures: failures,
                            results: type === "delete" ? keys : reqs.map(function (req) { return req.result; }),
                            lastResult: lastResult
                        });
                    };
                    req.onerror = function (event) {
                        errorHandler(event);
                        done(event);
                    };
                    req.onsuccess = done;
                });
            }
            function openCursor(_a) {
                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;
                return new Promise(function (resolve, reject) {
                    resolve = wrap(resolve);
                    var index = query.index, range = query.range;
                    var store = trans.objectStore(tableName);
                    var source = index.isPrimaryKey ?
                        store :
                        store.index(index.name);
                    var direction = reverse ?
                        unique ?
                            "prevunique" :
                            "prev" :
                        unique ?
                            "nextunique" :
                            "next";
                    var req = values || !('openKeyCursor' in source) ?
                        source.openCursor(makeIDBKeyRange(range), direction) :
                        source.openKeyCursor(makeIDBKeyRange(range), direction);
                    req.onerror = eventRejectHandler(reject);
                    req.onsuccess = wrap(function (ev) {
                        var cursor = req.result;
                        if (!cursor) {
                            resolve(null);
                            return;
                        }
                        cursor.___id = ++_id_counter;
                        cursor.done = false;
                        var _cursorContinue = cursor.continue.bind(cursor);
                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;
                        if (_cursorContinuePrimaryKey)
                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);
                        var _cursorAdvance = cursor.advance.bind(cursor);
                        var doThrowCursorIsNotStarted = function () { throw new Error("Cursor not started"); };
                        var doThrowCursorIsStopped = function () { throw new Error("Cursor not stopped"); };
                        cursor.trans = trans;
                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;
                        cursor.fail = wrap(reject);
                        cursor.next = function () {
                            var _this = this;
                            var gotOne = 1;
                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });
                        };
                        cursor.start = function (callback) {
                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {
                                resolveIteration = wrap(resolveIteration);
                                req.onerror = eventRejectHandler(rejectIteration);
                                cursor.fail = rejectIteration;
                                cursor.stop = function (value) {
                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;
                                    resolveIteration(value);
                                };
                            });
                            var guardedCallback = function () {
                                if (req.result) {
                                    try {
                                        callback();
                                    }
                                    catch (err) {
                                        cursor.fail(err);
                                    }
                                }
                                else {
                                    cursor.done = true;
                                    cursor.start = function () { throw new Error("Cursor behind last entry"); };
                                    cursor.stop();
                                }
                            };
                            req.onsuccess = wrap(function (ev) {
                                req.onsuccess = guardedCallback;
                                guardedCallback();
                            });
                            cursor.continue = _cursorContinue;
                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;
                            cursor.advance = _cursorAdvance;
                            guardedCallback();
                            return iterationPromise;
                        };
                        resolve(cursor);
                    }, reject);
                });
            }
            function query(hasGetAll) {
                return function (request) {
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;
                        var nonInfinitLimit = limit === Infinity ? undefined : limit;
                        var index = query.index, range = query.range;
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        if (limit === 0)
                            return resolve({ result: [] });
                        if (hasGetAll) {
                            var req = values ?
                                source.getAll(idbKeyRange, nonInfinitLimit) :
                                source.getAllKeys(idbKeyRange, nonInfinitLimit);
                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };
                            req.onerror = eventRejectHandler(reject);
                        }
                        else {
                            var count_1 = 0;
                            var req_1 = values || !('openKeyCursor' in source) ?
                                source.openCursor(idbKeyRange) :
                                source.openKeyCursor(idbKeyRange);
                            var result_1 = [];
                            req_1.onsuccess = function (event) {
                                var cursor = req_1.result;
                                if (!cursor)
                                    return resolve({ result: result_1 });
                                result_1.push(values ? cursor.value : cursor.primaryKey);
                                if (++count_1 === limit)
                                    return resolve({ result: result_1 });
                                cursor.continue();
                            };
                            req_1.onerror = eventRejectHandler(reject);
                        }
                    });
                };
            }
            return {
                name: tableName,
                schema: tableSchema,
                mutate: mutate,
                getMany: function (_a) {
                    var trans = _a.trans, keys = _a.keys;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var length = keys.length;
                        var result = new Array(length);
                        var keyCount = 0;
                        var callbackCount = 0;
                        var req;
                        var successHandler = function (event) {
                            var req = event.target;
                            if ((result[req._pos] = req.result) != null)
                                ;
                            if (++callbackCount === keyCount)
                                resolve(result);
                        };
                        var errorHandler = eventRejectHandler(reject);
                        for (var i = 0; i < length; ++i) {
                            var key = keys[i];
                            if (key != null) {
                                req = store.get(keys[i]);
                                req._pos = i;
                                req.onsuccess = successHandler;
                                req.onerror = errorHandler;
                                ++keyCount;
                            }
                        }
                        if (keyCount === 0)
                            resolve(result);
                    });
                },
                get: function (_a) {
                    var trans = _a.trans, key = _a.key;
                    return new Promise(function (resolve, reject) {
                        resolve = wrap(resolve);
                        var store = trans.objectStore(tableName);
                        var req = store.get(key);
                        req.onsuccess = function (event) { return resolve(event.target.result); };
                        req.onerror = eventRejectHandler(reject);
                    });
                },
                query: query(hasGetAll),
                openCursor: openCursor,
                count: function (_a) {
                    var query = _a.query, trans = _a.trans;
                    var index = query.index, range = query.range;
                    return new Promise(function (resolve, reject) {
                        var store = trans.objectStore(tableName);
                        var source = index.isPrimaryKey ? store : store.index(index.name);
                        var idbKeyRange = makeIDBKeyRange(range);
                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();
                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });
                        req.onerror = eventRejectHandler(reject);
                    });
                }
            };
        }
        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;
        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });
        var tableMap = {};
        tables.forEach(function (table) { return tableMap[table.name] = table; });
        return {
            stack: "dbcore",
            transaction: db.transaction.bind(db),
            table: function (name) {
                var result = tableMap[name];
                if (!result)
                    throw new Error("Table '".concat(name, "' not found"));
                return tableMap[name];
            },
            MIN_KEY: -Infinity,
            MAX_KEY: getMaxKey(IdbKeyRange),
            schema: schema
        };
    }

    function createMiddlewareStack(stackImpl, middlewares) {
        return middlewares.reduce(function (down, _a) {
            var create = _a.create;
            return (__assign(__assign({}, down), create(down)));
        }, stackImpl);
    }
    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {
        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;
        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);
        return {
            dbcore: dbcore
        };
    }
    function generateMiddlewareStacks(db, tmpTrans) {
        var idbdb = tmpTrans.db;
        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);
        db.core = stacks.dbcore;
        db.tables.forEach(function (table) {
            var tableName = table.name;
            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {
                table.core = db.core.table(tableName);
                if (db[tableName] instanceof db.Table) {
                    db[tableName].core = table.core;
                }
            }
        });
    }

    function setApiOnPlace(db, objs, tableNames, dbschema) {
        tableNames.forEach(function (tableName) {
            var schema = dbschema[tableName];
            objs.forEach(function (obj) {
                var propDesc = getPropertyDescriptor(obj, tableName);
                if (!propDesc || ("value" in propDesc && propDesc.value === undefined)) {
                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {
                        setProp(obj, tableName, {
                            get: function () { return this.table(tableName); },
                            set: function (value) {
                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });
                            }
                        });
                    }
                    else {
                        obj[tableName] = new db.Table(tableName, schema);
                    }
                }
            });
        });
    }
    function removeTablesApi(db, objs) {
        objs.forEach(function (obj) {
            for (var key in obj) {
                if (obj[key] instanceof db.Table)
                    delete obj[key];
            }
        });
    }
    function lowerVersionFirst(a, b) {
        return a._cfg.version - b._cfg.version;
    }
    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {
        var globalSchema = db._dbSchema;
        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {
            globalSchema.$meta = createTableSchema("$meta", parseIndexSyntax("")[0], []);
            db._storeNames.push('$meta');
        }
        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);
        trans.create(idbUpgradeTrans);
        trans._completion.catch(reject);
        var rejectTransaction = trans._reject.bind(trans);
        var transless = PSD.transless || PSD;
        newScope(function () {
            PSD.trans = trans;
            PSD.transless = transless;
            if (oldVersion === 0) {
                keys(globalSchema).forEach(function (tableName) {
                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);
                });
                generateMiddlewareStacks(db, idbUpgradeTrans);
                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);
            }
            else {
                generateMiddlewareStacks(db, idbUpgradeTrans);
                return getExistingVersion(db, trans, oldVersion)
                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })
                    .catch(rejectTransaction);
            }
        });
    }
    function patchCurrentVersion(db, idbUpgradeTrans) {
        createMissingTables(db._dbSchema, idbUpgradeTrans);
        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {
            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');
        }
        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);
        var diff = getSchemaDiff(globalSchema, db._dbSchema);
        var _loop_1 = function (tableChange) {
            if (tableChange.change.length || tableChange.recreate) {
                console.warn("Unable to patch indexes of table ".concat(tableChange.name, " because it has changes on the type of index or primary key."));
                return { value: void 0 };
            }
            var store = idbUpgradeTrans.objectStore(tableChange.name);
            tableChange.add.forEach(function (idx) {
                if (debug)
                    console.debug("Dexie upgrade patch: Creating missing index ".concat(tableChange.name, ".").concat(idx.src));
                addIndex(store, idx);
            });
        };
        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {
            var tableChange = _a[_i];
            var state_1 = _loop_1(tableChange);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    }
    function getExistingVersion(db, trans, oldVersion) {
        if (trans.storeNames.includes('$meta')) {
            return trans.table('$meta').get('version').then(function (metaVersion) {
                return metaVersion != null ? metaVersion : oldVersion;
            });
        }
        else {
            return DexiePromise.resolve(oldVersion);
        }
    }
    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {
        var queue = [];
        var versions = db._versions;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);
        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });
        if (versToRun.length === 0) {
            return DexiePromise.resolve();
        }
        versToRun.forEach(function (version) {
            queue.push(function () {
                var oldSchema = globalSchema;
                var newSchema = version._cfg.dbschema;
                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);
                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);
                globalSchema = db._dbSchema = newSchema;
                var diff = getSchemaDiff(oldSchema, newSchema);
                diff.add.forEach(function (tuple) {
                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);
                });
                diff.change.forEach(function (change) {
                    if (change.recreate) {
                        throw new exceptions.Upgrade("Not yet support for changing primary key");
                    }
                    else {
                        var store_1 = idbUpgradeTrans.objectStore(change.name);
                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });
                        change.change.forEach(function (idx) {
                            store_1.deleteIndex(idx.name);
                            addIndex(store_1, idx);
                        });
                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });
                    }
                });
                var contentUpgrade = version._cfg.contentUpgrade;
                if (contentUpgrade && version._cfg.version > oldVersion) {
                    generateMiddlewareStacks(db, idbUpgradeTrans);
                    trans._memoizedTables = {};
                    var upgradeSchema_1 = shallowClone(newSchema);
                    diff.del.forEach(function (table) {
                        upgradeSchema_1[table] = oldSchema[table];
                    });
                    removeTablesApi(db, [db.Transaction.prototype]);
                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);
                    trans.schema = upgradeSchema_1;
                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);
                    if (contentUpgradeIsAsync_1) {
                        incrementExpectedAwaits();
                    }
                    var returnValue_1;
                    var promiseFollowed = DexiePromise.follow(function () {
                        returnValue_1 = contentUpgrade(trans);
                        if (returnValue_1) {
                            if (contentUpgradeIsAsync_1) {
                                var decrementor = decrementExpectedAwaits.bind(null, null);
                                returnValue_1.then(decrementor, decrementor);
                            }
                        }
                    });
                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?
                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));
                }
            });
            queue.push(function (idbtrans) {
                var newSchema = version._cfg.dbschema;
                deleteRemovedTables(newSchema, idbtrans);
                removeTablesApi(db, [db.Transaction.prototype]);
                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);
                trans.schema = db._dbSchema;
            });
            queue.push(function (idbtrans) {
                if (db.idbdb.objectStoreNames.contains('$meta')) {
                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {
                        db.idbdb.deleteObjectStore('$meta');
                        delete db._dbSchema.$meta;
                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });
                    }
                    else {
                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');
                    }
                }
            });
        });
        function runQueue() {
            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :
                DexiePromise.resolve();
        }
        return runQueue().then(function () {
            createMissingTables(globalSchema, idbUpgradeTrans);
        });
    }
    function getSchemaDiff(oldSchema, newSchema) {
        var diff = {
            del: [],
            add: [],
            change: []
        };
        var table;
        for (table in oldSchema) {
            if (!newSchema[table])
                diff.del.push(table);
        }
        for (table in newSchema) {
            var oldDef = oldSchema[table], newDef = newSchema[table];
            if (!oldDef) {
                diff.add.push([table, newDef]);
            }
            else {
                var change = {
                    name: table,
                    def: newDef,
                    recreate: false,
                    del: [],
                    add: [],
                    change: []
                };
                if ((
                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||
                    (oldDef.primKey.auto !== newDef.primKey.auto)) {
                    change.recreate = true;
                    diff.change.push(change);
                }
                else {
                    var oldIndexes = oldDef.idxByName;
                    var newIndexes = newDef.idxByName;
                    var idxName = void 0;
                    for (idxName in oldIndexes) {
                        if (!newIndexes[idxName])
                            change.del.push(idxName);
                    }
                    for (idxName in newIndexes) {
                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];
                        if (!oldIdx)
                            change.add.push(newIdx);
                        else if (oldIdx.src !== newIdx.src)
                            change.change.push(newIdx);
                    }
                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {
                        diff.change.push(change);
                    }
                }
            }
        }
        return diff;
    }
    function createTable(idbtrans, tableName, primKey, indexes) {
        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?
            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :
            { autoIncrement: primKey.auto });
        indexes.forEach(function (idx) { return addIndex(store, idx); });
        return store;
    }
    function createMissingTables(newSchema, idbtrans) {
        keys(newSchema).forEach(function (tableName) {
            if (!idbtrans.db.objectStoreNames.contains(tableName)) {
                if (debug)
                    console.debug('Dexie: Creating missing table', tableName);
                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);
            }
        });
    }
    function deleteRemovedTables(newSchema, idbtrans) {
        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {
            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);
        });
    }
    function addIndex(store, idx) {
        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });
    }
    function buildGlobalSchema(db, idbdb, tmpTrans) {
        var globalSchema = {};
        var dbStoreNames = slice(idbdb.objectStoreNames, 0);
        dbStoreNames.forEach(function (storeName) {
            var store = tmpTrans.objectStore(storeName);
            var keyPath = store.keyPath;
            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || "", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== "string", true);
            var indexes = [];
            for (var j = 0; j < store.indexNames.length; ++j) {
                var idbindex = store.index(store.indexNames[j]);
                keyPath = idbindex.keyPath;
                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== "string", false);
                indexes.push(index);
            }
            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);
        });
        return globalSchema;
    }
    function readGlobalSchema(db, idbdb, tmpTrans) {
        db.verno = idbdb.version / 10;
        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);
        db._storeNames = slice(idbdb.objectStoreNames, 0);
        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);
    }
    function verifyInstalledSchema(db, tmpTrans) {
        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);
        var diff = getSchemaDiff(installedSchema, db._dbSchema);
        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));
    }
    function adjustToExistingIndexNames(db, schema, idbtrans) {
        var storeNames = idbtrans.db.objectStoreNames;
        for (var i = 0; i < storeNames.length; ++i) {
            var storeName = storeNames[i];
            var store = idbtrans.objectStore(storeName);
            db._hasGetAll = 'getAll' in store;
            for (var j = 0; j < store.indexNames.length; ++j) {
                var indexName = store.indexNames[j];
                var keyPath = store.index(indexName).keyPath;
                var dexieName = typeof keyPath === 'string' ? keyPath : "[" + slice(keyPath).join('+') + "]";
                if (schema[storeName]) {
                    var indexSpec = schema[storeName].idxByName[dexieName];
                    if (indexSpec) {
                        indexSpec.name = indexName;
                        delete schema[storeName].idxByName[dexieName];
                        schema[storeName].idxByName[indexName] = indexSpec;
                    }
                }
            }
        }
        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&
            !/(Chrome\/|Edge\/)/.test(navigator.userAgent) &&
            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&
            [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604) {
            db._hasGetAll = false;
        }
    }
    function parseIndexSyntax(primKeyAndIndexes) {
        return primKeyAndIndexes.split(',').map(function (index, indexNum) {
            var _a;
            var typeSplit = index.split(':');
            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();
            index = typeSplit[0].trim();
            var name = index.replace(/([&*]|\+\+)/g, "");
            var keyPath = /^\[/.test(name) ? name.match(/^\[(.*)\]$/)[1].split('+') : name;
            return createIndexSpec(name, keyPath || null, /\&/.test(index), /\*/.test(index), /\+\+/.test(index), isArray(keyPath), indexNum === 0, type);
        });
    }

    var Version =  (function () {
        function Version() {
        }
        Version.prototype._createTableSchema = function (name, primKey, indexes) {
            return createTableSchema(name, primKey, indexes);
        };
        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {
            return parseIndexSyntax(primKeyAndIndexes);
        };
        Version.prototype._parseStoresSpec = function (stores, outSchema) {
            var _this = this;
            keys(stores).forEach(function (tableName) {
                if (stores[tableName] !== null) {
                    var indexes = _this._parseIndexSyntax(stores[tableName]);
                    var primKey = indexes.shift();
                    if (!primKey) {
                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);
                    }
                    primKey.unique = true;
                    if (primKey.multi)
                        throw new exceptions.Schema('Primary key cannot be multiEntry*');
                    indexes.forEach(function (idx) {
                        if (idx.auto)
                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');
                        if (!idx.keyPath)
                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');
                    });
                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);
                    outSchema[tableName] = tblSchema;
                }
            });
        };
        Version.prototype.stores = function (stores) {
            var db = this.db;
            this._cfg.storesSource = this._cfg.storesSource
                ? extend(this._cfg.storesSource, stores)
                : stores;
            var versions = db._versions;
            var storesSpec = {};
            var dbschema = {};
            versions.forEach(function (version) {
                extend(storesSpec, version._cfg.storesSource);
                dbschema = version._cfg.dbschema = {};
                version._parseStoresSpec(storesSpec, dbschema);
            });
            db._dbSchema = dbschema;
            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);
            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);
            db._storeNames = keys(dbschema);
            return this;
        };
        Version.prototype.upgrade = function (upgradeFunction) {
            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);
            return this;
        };
        return Version;
    }());

    function createVersionConstructor(db) {
        return makeClassConstructor(Version.prototype, function Version(versionNumber) {
            this.db = db;
            this._cfg = {
                version: versionNumber,
                storesSource: null,
                dbschema: {},
                tables: {},
                contentUpgrade: null
            };
        });
    }

    function getDbNamesTable(indexedDB, IDBKeyRange) {
        var dbNamesDB = indexedDB["_dbNamesDB"];
        if (!dbNamesDB) {
            dbNamesDB = indexedDB["_dbNamesDB"] = new Dexie$1(DBNAMES_DB, {
                addons: [],
                indexedDB: indexedDB,
                IDBKeyRange: IDBKeyRange,
            });
            dbNamesDB.version(1).stores({ dbnames: "name" });
        }
        return dbNamesDB.table("dbnames");
    }
    function hasDatabasesNative(indexedDB) {
        return indexedDB && typeof indexedDB.databases === "function";
    }
    function getDatabaseNames(_a) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        return hasDatabasesNative(indexedDB)
            ? Promise.resolve(indexedDB.databases()).then(function (infos) {
                return infos
                    .map(function (info) { return info.name; })
                    .filter(function (name) { return name !== DBNAMES_DB; });
            })
            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();
    }
    function _onDatabaseCreated(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);
    }
    function _onDatabaseDeleted(_a, name) {
        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;
        !hasDatabasesNative(indexedDB) &&
            name !== DBNAMES_DB &&
            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);
    }

    function vip(fn) {
        return newScope(function () {
            PSD.letThrough = true;
            return fn();
        });
    }

    function idbReady() {
        var isSafari = !navigator.userAgentData &&
            /Safari\//.test(navigator.userAgent) &&
            !/Chrom(e|ium)\//.test(navigator.userAgent);
        if (!isSafari || !indexedDB.databases)
            return Promise.resolve();
        var intervalId;
        return new Promise(function (resolve) {
            var tryIdb = function () { return indexedDB.databases().finally(resolve); };
            intervalId = setInterval(tryIdb, 100);
            tryIdb();
        }).finally(function () { return clearInterval(intervalId); });
    }

    var _a;
    function isEmptyRange(node) {
        return !("from" in node);
    }
    var RangeSet = function (fromOrTree, to) {
        if (this) {
            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });
        }
        else {
            var rv = new RangeSet();
            if (fromOrTree && ("d" in fromOrTree)) {
                extend(rv, fromOrTree);
            }
            return rv;
        }
    };
    props(RangeSet.prototype, (_a = {
            add: function (rangeSet) {
                mergeRanges(this, rangeSet);
                return this;
            },
            addKey: function (key) {
                addRange(this, key, key);
                return this;
            },
            addKeys: function (keys) {
                var _this = this;
                keys.forEach(function (key) { return addRange(_this, key, key); });
                return this;
            },
            hasKey: function (key) {
                var node = getRangeSetIterator(this).next(key).value;
                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;
            }
        },
        _a[iteratorSymbol] = function () {
            return getRangeSetIterator(this);
        },
        _a));
    function addRange(target, from, to) {
        var diff = cmp(from, to);
        if (isNaN(diff))
            return;
        if (diff > 0)
            throw RangeError();
        if (isEmptyRange(target))
            return extend(target, { from: from, to: to, d: 1 });
        var left = target.l;
        var right = target.r;
        if (cmp(to, target.from) < 0) {
            left
                ? addRange(left, from, to)
                : (target.l = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.to) > 0) {
            right
                ? addRange(right, from, to)
                : (target.r = { from: from, to: to, d: 1, l: null, r: null });
            return rebalance(target);
        }
        if (cmp(from, target.from) < 0) {
            target.from = from;
            target.l = null;
            target.d = right ? right.d + 1 : 1;
        }
        if (cmp(to, target.to) > 0) {
            target.to = to;
            target.r = null;
            target.d = target.l ? target.l.d + 1 : 1;
        }
        var rightWasCutOff = !target.r;
        if (left && !target.l) {
            mergeRanges(target, left);
        }
        if (right && rightWasCutOff) {
            mergeRanges(target, right);
        }
    }
    function mergeRanges(target, newSet) {
        function _addRangeSet(target, _a) {
            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;
            addRange(target, from, to);
            if (l)
                _addRangeSet(target, l);
            if (r)
                _addRangeSet(target, r);
        }
        if (!isEmptyRange(newSet))
            _addRangeSet(target, newSet);
    }
    function rangesOverlap(rangeSet1, rangeSet2) {
        var i1 = getRangeSetIterator(rangeSet2);
        var nextResult1 = i1.next();
        if (nextResult1.done)
            return false;
        var a = nextResult1.value;
        var i2 = getRangeSetIterator(rangeSet1);
        var nextResult2 = i2.next(a.from);
        var b = nextResult2.value;
        while (!nextResult1.done && !nextResult2.done) {
            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)
                return true;
            cmp(a.from, b.from) < 0
                ? (a = (nextResult1 = i1.next(b.from)).value)
                : (b = (nextResult2 = i2.next(a.from)).value);
        }
        return false;
    }
    function getRangeSetIterator(node) {
        var state = isEmptyRange(node) ? null : { s: 0, n: node };
        return {
            next: function (key) {
                var keyProvided = arguments.length > 0;
                while (state) {
                    switch (state.s) {
                        case 0:
                            state.s = 1;
                            if (keyProvided) {
                                while (state.n.l && cmp(key, state.n.from) < 0)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                            else {
                                while (state.n.l)
                                    state = { up: state, n: state.n.l, s: 1 };
                            }
                        case 1:
                            state.s = 2;
                            if (!keyProvided || cmp(key, state.n.to) <= 0)
                                return { value: state.n, done: false };
                        case 2:
                            if (state.n.r) {
                                state.s = 3;
                                state = { up: state, n: state.n.r, s: 0 };
                                continue;
                            }
                        case 3:
                            state = state.up;
                    }
                }
                return { done: true };
            },
        };
    }
    function rebalance(target) {
        var _a, _b;
        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);
        var r = diff > 1 ? "r" : diff < -1 ? "l" : "";
        if (r) {
            var l = r === "r" ? "l" : "r";
            var rootClone = __assign({}, target);
            var oldRootRight = target[r];
            target.from = oldRootRight.from;
            target.to = oldRootRight.to;
            target[r] = oldRootRight[r];
            rootClone[r] = oldRootRight[l];
            target[l] = rootClone;
            rootClone.d = computeDepth(rootClone);
        }
        target.d = computeDepth(target);
    }
    function computeDepth(_a) {
        var r = _a.r, l = _a.l;
        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;
    }

    function extendObservabilitySet(target, newSet) {
        keys(newSet).forEach(function (part) {
            if (target[part])
                mergeRanges(target[part], newSet[part]);
            else
                target[part] = cloneSimpleObjectTree(newSet[part]);
        });
        return target;
    }

    function obsSetsOverlap(os1, os2) {
        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });
    }

    var cache = {};

    var unsignaledParts = {};
    var isTaskEnqueued = false;
    function signalSubscribersLazily(part, optimistic) {
        extendObservabilitySet(unsignaledParts, part);
        if (!isTaskEnqueued) {
            isTaskEnqueued = true;
            setTimeout(function () {
                isTaskEnqueued = false;
                var parts = unsignaledParts;
                unsignaledParts = {};
                signalSubscribersNow(parts, false);
            }, 0);
        }
    }
    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {
        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }
        var queriesToSignal = new Set();
        if (updatedParts.all) {
            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {
                var tblCache = _a[_i];
                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
            }
        }
        else {
            for (var key in updatedParts) {
                var parts = /^idb\:\/\/(.*)\/(.*)\//.exec(key);
                if (parts) {
                    var dbName = parts[1], tableName = parts[2];
                    var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                    if (tblCache)
                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);
                }
            }
        }
        queriesToSignal.forEach(function (requery) { return requery(); });
    }
    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {
        var updatedEntryLists = [];
        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {
            var _b = _a[_i], indexName = _b[0], entries = _b[1];
            var filteredEntries = [];
            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {
                var entry = entries_1[_c];
                if (obsSetsOverlap(updatedParts, entry.obsSet)) {
                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });
                }
                else if (deleteAffectedCacheEntries) {
                    filteredEntries.push(entry);
                }
            }
            if (deleteAffectedCacheEntries)
                updatedEntryLists.push([indexName, filteredEntries]);
        }
        if (deleteAffectedCacheEntries) {
            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {
                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];
                tblCache.queries.query[indexName] = filteredEntries;
            }
        }
    }

    function dexieOpen(db) {
        var state = db._state;
        var indexedDB = db._deps.indexedDB;
        if (state.isBeingOpened || db.idbdb)
            return state.dbReadyPromise.then(function () { return state.dbOpenError ?
                rejection(state.dbOpenError) :
                db; });
        state.isBeingOpened = true;
        state.dbOpenError = null;
        state.openComplete = false;
        var openCanceller = state.openCanceller;
        var nativeVerToOpen = Math.round(db.verno * 10);
        var schemaPatchMode = false;
        function throwIfCancelled() {
            if (state.openCanceller !== openCanceller)
                throw new exceptions.DatabaseClosed('db.open() was cancelled');
        }
        var resolveDbReady = state.dbReadyResolve,
        upgradeTransaction = null, wasCreated = false;
        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {
            throwIfCancelled();
            if (!indexedDB)
                throw new exceptions.MissingAPI();
            var dbName = db.name;
            var req = state.autoSchema || !nativeVerToOpen ?
                indexedDB.open(dbName) :
                indexedDB.open(dbName, nativeVerToOpen);
            if (!req)
                throw new exceptions.MissingAPI();
            req.onerror = eventRejectHandler(reject);
            req.onblocked = wrap(db._fireOnBlocked);
            req.onupgradeneeded = wrap(function (e) {
                upgradeTransaction = req.transaction;
                if (state.autoSchema && !db._options.allowEmptyDB) {
                    req.onerror = preventDefault;
                    upgradeTransaction.abort();
                    req.result.close();
                    var delreq = indexedDB.deleteDatabase(dbName);
                    delreq.onsuccess = delreq.onerror = wrap(function () {
                        reject(new exceptions.NoSuchDatabase("Database ".concat(dbName, " doesnt exist")));
                    });
                }
                else {
                    upgradeTransaction.onerror = eventRejectHandler(reject);
                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;
                    wasCreated = oldVer < 1;
                    db.idbdb = req.result;
                    if (schemaPatchMode) {
                        patchCurrentVersion(db, upgradeTransaction);
                    }
                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);
                }
            }, reject);
            req.onsuccess = wrap(function () {
                upgradeTransaction = null;
                var idbdb = db.idbdb = req.result;
                var objectStoreNames = slice(idbdb.objectStoreNames);
                if (objectStoreNames.length > 0)
                    try {
                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');
                        if (state.autoSchema)
                            readGlobalSchema(db, idbdb, tmpTrans);
                        else {
                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);
                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {
                                console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.");
                                idbdb.close();
                                nativeVerToOpen = idbdb.version + 1;
                                schemaPatchMode = true;
                                return resolve(tryOpenDB());
                            }
                        }
                        generateMiddlewareStacks(db, tmpTrans);
                    }
                    catch (e) {
                    }
                connections.push(db);
                idbdb.onversionchange = wrap(function (ev) {
                    state.vcFired = true;
                    db.on("versionchange").fire(ev);
                });
                idbdb.onclose = wrap(function (ev) {
                    db.on("close").fire(ev);
                });
                if (wasCreated)
                    _onDatabaseCreated(db._deps, dbName);
                resolve();
            }, reject);
        }).catch(function (err) {
            switch (err === null || err === void 0 ? void 0 : err.name) {
                case "UnknownError":
                    if (state.PR1398_maxLoop > 0) {
                        state.PR1398_maxLoop--;
                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');
                        return tryOpenDB();
                    }
                    break;
                case "VersionError":
                    if (nativeVerToOpen > 0) {
                        nativeVerToOpen = 0;
                        return tryOpenDB();
                    }
                    break;
            }
            return DexiePromise.reject(err);
        }); };
        return DexiePromise.race([
            openCanceller,
            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)
        ]).then(function () {
            throwIfCancelled();
            state.onReadyBeingFired = [];
            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {
                if (state.onReadyBeingFired.length > 0) {
                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);
                    state.onReadyBeingFired = [];
                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);
                }
            });
        }).finally(function () {
            if (state.openCanceller === openCanceller) {
                state.onReadyBeingFired = null;
                state.isBeingOpened = false;
            }
        }).catch(function (err) {
            state.dbOpenError = err;
            try {
                upgradeTransaction && upgradeTransaction.abort();
            }
            catch (_a) { }
            if (openCanceller === state.openCanceller) {
                db._close();
            }
            return rejection(err);
        }).finally(function () {
            state.openComplete = true;
            resolveDbReady();
        }).then(function () {
            if (wasCreated) {
                var everything_1 = {};
                db.tables.forEach(function (table) {
                    table.schema.indexes.forEach(function (idx) {
                        if (idx.name)
                            everything_1["idb://".concat(db.name, "/").concat(table.name, "/").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);
                    });
                    everything_1["idb://".concat(db.name, "/").concat(table.name, "/")] = everything_1["idb://".concat(db.name, "/").concat(table.name, "/:dels")] = new RangeSet(-Infinity, [[[]]]);
                });
                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);
                signalSubscribersNow(everything_1, true);
            }
            return db;
        });
    }

    function awaitIterator(iterator) {
        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);
        function step(getNext) {
            return function (val) {
                var next = getNext(val), value = next.value;
                return next.done ? value :
                    (!value || typeof value.then !== 'function' ?
                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :
                        value.then(onSuccess, onError));
            };
        }
        return step(callNext)();
    }

    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {
        var i = arguments.length;
        if (i < 2)
            throw new exceptions.InvalidArgument("Too few arguments");
        var args = new Array(i - 1);
        while (--i)
            args[i - 1] = arguments[i];
        scopeFunc = args.pop();
        var tables = flatten(args);
        return [mode, tables, scopeFunc];
    }
    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {
        return DexiePromise.resolve().then(function () {
            var transless = PSD.transless || PSD;
            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);
            trans.explicit = true;
            var zoneProps = {
                trans: trans,
                transless: transless
            };
            if (parentTransaction) {
                trans.idbtrans = parentTransaction.idbtrans;
            }
            else {
                try {
                    trans.create();
                    trans.idbtrans._explicit = true;
                    db._state.PR1398_maxLoop = 3;
                }
                catch (ex) {
                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {
                        console.warn('Dexie: Need to reopen db');
                        db.close({ disableAutoOpen: false });
                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });
                    }
                    return rejection(ex);
                }
            }
            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);
            if (scopeFuncIsAsync) {
                incrementExpectedAwaits();
            }
            var returnValue;
            var promiseFollowed = DexiePromise.follow(function () {
                returnValue = scopeFunc.call(trans, trans);
                if (returnValue) {
                    if (scopeFuncIsAsync) {
                        var decrementor = decrementExpectedAwaits.bind(null, null);
                        returnValue.then(decrementor, decrementor);
                    }
                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {
                        returnValue = awaitIterator(returnValue);
                    }
                }
            }, zoneProps);
            return (returnValue && typeof returnValue.then === 'function' ?
                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?
                    x
                    : rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")); })
                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {
                if (parentTransaction)
                    trans._resolve();
                return trans._completion.then(function () { return x; });
            }).catch(function (e) {
                trans._reject(e);
                return rejection(e);
            });
        });
    }

    function pad(a, value, count) {
        var result = isArray(a) ? a.slice() : [a];
        for (var i = 0; i < count; ++i)
            result.push(value);
        return result;
    }
    function createVirtualIndexMiddleware(down) {
        return __assign(__assign({}, down), { table: function (tableName) {
                var table = down.table(tableName);
                var schema = table.schema;
                var indexLookup = {};
                var allVirtualIndexes = [];
                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {
                    var keyPathAlias = getKeyPathAlias(keyPath);
                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);
                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;
                    var isVirtual = keyTail > 0;
                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual
                            ? "".concat(keyPathAlias, "(virtual-from:").concat(lowLevelIndex.name, ")")
                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });
                    indexList.push(virtualIndex);
                    if (!virtualIndex.isPrimaryKey) {
                        allVirtualIndexes.push(virtualIndex);
                    }
                    if (keyLength > 1) {
                        var virtualKeyPath = keyLength === 2 ?
                            keyPath[0] :
                            keyPath.slice(0, keyLength - 1);
                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);
                    }
                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });
                    return virtualIndex;
                }
                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);
                indexLookup[":id"] = [primaryKey];
                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {
                    var index = _a[_i];
                    addVirtualIndexes(index.keyPath, 0, index);
                }
                function findBestIndex(keyPath) {
                    var result = indexLookup[getKeyPathAlias(keyPath)];
                    return result && result[0];
                }
                function translateRange(range, keyTail) {
                    return {
                        type: range.type === 1  ?
                            2  :
                            range.type,
                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),
                        lowerOpen: true,
                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),
                        upperOpen: true
                    };
                }
                function translateRequest(req) {
                    var index = req.query.index;
                    return index.isVirtual ? __assign(__assign({}, req), { query: {
                            index: index.lowLevelIndex,
                            range: translateRange(req.query.range, index.keyTail)
                        } }) : req;
                }
                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {
                        return table.count(translateRequest(req));
                    }, query: function (req) {
                        return table.query(translateRequest(req));
                    }, openCursor: function (req) {
                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;
                        if (!isVirtual)
                            return table.openCursor(req);
                        function createVirtualCursor(cursor) {
                            function _continue(key) {
                                key != null ?
                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :
                                    req.unique ?
                                        cursor.continue(cursor.key.slice(0, keyLength)
                                            .concat(req.reverse
                                            ? down.MIN_KEY
                                            : down.MAX_KEY, keyTail)) :
                                        cursor.continue();
                            }
                            var virtualCursor = Object.create(cursor, {
                                continue: { value: _continue },
                                continuePrimaryKey: {
                                    value: function (key, primaryKey) {
                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);
                                    }
                                },
                                primaryKey: {
                                    get: function () {
                                        return cursor.primaryKey;
                                    }
                                },
                                key: {
                                    get: function () {
                                        var key = cursor.key;
                                        return keyLength === 1 ?
                                            key[0] :
                                            key.slice(0, keyLength);
                                    }
                                },
                                value: {
                                    get: function () {
                                        return cursor.value;
                                    }
                                }
                            });
                            return virtualCursor;
                        }
                        return table.openCursor(translateRequest(req))
                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });
                    } });
                return result;
            } });
    }
    var virtualIndexMiddleware = {
        stack: "dbcore",
        name: "VirtualIndexMiddleware",
        level: 1,
        create: createVirtualIndexMiddleware
    };

    function getObjectDiff(a, b, rv, prfx) {
        rv = rv || {};
        prfx = prfx || '';
        keys(a).forEach(function (prop) {
            if (!hasOwn(b, prop)) {
                rv[prfx + prop] = undefined;
            }
            else {
                var ap = a[prop], bp = b[prop];
                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {
                    var apTypeName = toStringTag(ap);
                    var bpTypeName = toStringTag(bp);
                    if (apTypeName !== bpTypeName) {
                        rv[prfx + prop] = b[prop];
                    }
                    else if (apTypeName === 'Object') {
                        getObjectDiff(ap, bp, rv, prfx + prop + '.');
                    }
                    else if (ap !== bp) {
                        rv[prfx + prop] = b[prop];
                    }
                }
                else if (ap !== bp)
                    rv[prfx + prop] = b[prop];
            }
        });
        keys(b).forEach(function (prop) {
            if (!hasOwn(a, prop)) {
                rv[prfx + prop] = b[prop];
            }
        });
        return rv;
    }

    function getEffectiveKeys(primaryKey, req) {
        if (req.type === 'delete')
            return req.keys;
        return req.keys || req.values.map(primaryKey.extractKey);
    }

    var hooksMiddleware = {
        stack: "dbcore",
        name: "HooksMiddleware",
        level: 2,
        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {
                var downTable = downCore.table(tableName);
                var primaryKey = downTable.schema.primaryKey;
                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {
                        var dxTrans = PSD.trans;
                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;
                        switch (req.type) {
                            case 'add':
                                if (creating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'put':
                                if (creating.fire === nop && updating.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'delete':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);
                            case 'deleteRange':
                                if (deleting.fire === nop)
                                    break;
                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);
                        }
                        return downTable.mutate(req);
                        function addPutOrDelete(req) {
                            var dxTrans = PSD.trans;
                            var keys = req.keys || getEffectiveKeys(primaryKey, req);
                            if (!keys)
                                throw new Error("Keys missing");
                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);
                            if (req.type !== 'delete')
                                req.values = __spreadArray([], req.values, true);
                            if (req.keys)
                                req.keys = __spreadArray([], req.keys, true);
                            return getExistingValues(downTable, req, keys).then(function (existingValues) {
                                var contexts = keys.map(function (key, i) {
                                    var existingValue = existingValues[i];
                                    var ctx = { onerror: null, onsuccess: null };
                                    if (req.type === 'delete') {
                                        deleting.fire.call(ctx, key, existingValue, dxTrans);
                                    }
                                    else if (req.type === 'add' || existingValue === undefined) {
                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);
                                        if (key == null && generatedPrimaryKey != null) {
                                            key = generatedPrimaryKey;
                                            req.keys[i] = key;
                                            if (!primaryKey.outbound) {
                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);
                                            }
                                        }
                                    }
                                    else {
                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);
                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);
                                        if (additionalChanges_1) {
                                            var requestedValue_1 = req.values[i];
                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {
                                                if (hasOwn(requestedValue_1, keyPath)) {
                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];
                                                }
                                                else {
                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);
                                                }
                                            });
                                        }
                                    }
                                    return ctx;
                                });
                                return downTable.mutate(req).then(function (_a) {
                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;
                                    for (var i = 0; i < keys.length; ++i) {
                                        var primKey = results ? results[i] : keys[i];
                                        var ctx = contexts[i];
                                        if (primKey == null) {
                                            ctx.onerror && ctx.onerror(failures[i]);
                                        }
                                        else {
                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?
                                                req.values[i] :
                                                primKey
                                            );
                                        }
                                    }
                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };
                                }).catch(function (error) {
                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });
                                    return Promise.reject(error);
                                });
                            });
                        }
                        function deleteRange(req) {
                            return deleteNextChunk(req.trans, req.range, 10000);
                        }
                        function deleteNextChunk(trans, range, limit) {
                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })
                                .then(function (_a) {
                                var result = _a.result;
                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {
                                    if (res.numFailures > 0)
                                        return Promise.reject(res.failures[0]);
                                    if (result.length < limit) {
                                        return { failures: [], numFailures: 0, lastResult: undefined };
                                    }
                                    else {
                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);
                                    }
                                });
                            });
                        }
                    } });
                return tableMiddleware;
            } })); }
    };
    function getExistingValues(table, req, effectiveKeys) {
        return req.type === "add"
            ? Promise.resolve([])
            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: "immutable" });
    }

    function getFromTransactionCache(keys, cache, clone) {
        try {
            if (!cache)
                return null;
            if (cache.keys.length < keys.length)
                return null;
            var result = [];
            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {
                if (cmp(cache.keys[i], keys[j]) !== 0)
                    continue;
                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);
                ++j;
            }
            return result.length === keys.length ? result : null;
        }
        catch (_a) {
            return null;
        }
    }
    var cacheExistingValuesMiddleware = {
        stack: "dbcore",
        level: -1,
        create: function (core) {
            return {
                table: function (tableName) {
                    var table = core.table(tableName);
                    return __assign(__assign({}, table), { getMany: function (req) {
                            if (!req.cache) {
                                return table.getMany(req);
                            }
                            var cachedResult = getFromTransactionCache(req.keys, req.trans["_cache"], req.cache === "clone");
                            if (cachedResult) {
                                return DexiePromise.resolve(cachedResult);
                            }
                            return table.getMany(req).then(function (res) {
                                req.trans["_cache"] = {
                                    keys: req.keys,
                                    values: req.cache === "clone" ? deepClone(res) : res,
                                };
                                return res;
                            });
                        }, mutate: function (req) {
                            if (req.type !== "add")
                                req.trans["_cache"] = null;
                            return table.mutate(req);
                        } });
                },
            };
        },
    };

    function isCachableContext(ctx, table) {
        return (ctx.trans.mode === 'readonly' &&
            !!ctx.subscr &&
            !ctx.trans.explicit &&
            ctx.trans.db._options.cache !== 'disabled' &&
            !table.schema.primaryKey.outbound);
    }

    function isCachableRequest(type, req) {
        switch (type) {
            case 'query':
                return req.values && !req.unique;
            case 'get':
                return false;
            case 'getMany':
                return false;
            case 'count':
                return false;
            case 'openCursor':
                return false;
        }
    }

    var observabilityMiddleware = {
        stack: "dbcore",
        level: 0,
        name: "Observability",
        create: function (core) {
            var dbName = core.schema.name;
            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);
            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    if (PSD.subscr && mode !== 'readonly') {
                        throw new exceptions.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(PSD.querier));
                    }
                    return core.transaction(stores, mode, options);
                }, table: function (tableName) {
                    var table = core.table(tableName);
                    var schema = table.schema;
                    var primaryKey = schema.primaryKey, indexes = schema.indexes;
                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;
                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });
                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {
                            var _a, _b;
                            var trans = req.trans;
                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});
                            var getRangeSet = function (indexName) {
                                var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                return (mutatedParts[part] ||
                                    (mutatedParts[part] = new RangeSet()));
                            };
                            var pkRangeSet = getRangeSet("");
                            var delsRangeSet = getRangeSet(":dels");
                            var type = req.type;
                            var _c = req.type === "deleteRange"
                                ? [req.range]
                                : req.type === "delete"
                                    ? [req.keys]
                                    : req.values.length < 50
                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]
                                        : [], keys = _c[0], newObjs = _c[1];
                            var oldCache = req.trans["_cache"];
                            if (isArray(keys)) {
                                pkRangeSet.addKeys(keys);
                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;
                                if (!oldObjs) {
                                    delsRangeSet.addKeys(keys);
                                }
                                if (oldObjs || newObjs) {
                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);
                                }
                            }
                            else if (keys) {
                                var range = {
                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,
                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY
                                };
                                delsRangeSet.add(range);
                                pkRangeSet.add(range);
                            }
                            else {
                                pkRangeSet.add(FULL_RANGE);
                                delsRangeSet.add(FULL_RANGE);
                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });
                            }
                            return table.mutate(req).then(function (res) {
                                if (keys && (req.type === 'add' || req.type === 'put')) {
                                    pkRangeSet.addKeys(res.results);
                                    if (indexesWithAutoIncPK) {
                                        indexesWithAutoIncPK.forEach(function (idx) {
                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });
                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });
                                            for (var i = 0, len = res.results.length; i < len; ++i) {
                                                idxVals[i][pkPos] = res.results[i];
                                            }
                                            getRangeSet(idx.name).addKeys(idxVals);
                                        });
                                    }
                                }
                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);
                                return res;
                            });
                        } });
                    var getRange = function (_a) {
                        var _b, _c;
                        var _d = _a.query, index = _d.index, range = _d.range;
                        return [
                            index,
                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),
                        ];
                    };
                    var readSubscribers = {
                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },
                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },
                        count: getRange,
                        query: getRange,
                        openCursor: getRange,
                    };
                    keys(readSubscribers).forEach(function (method) {
                        tableClone[method] = function (req) {
                            var subscr = PSD.subscr;
                            var isLiveQuery = !!subscr;
                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);
                            var obsSet = cachable
                                ? req.obsSet = {}
                                : subscr;
                            if (isLiveQuery) {
                                var getRangeSet = function (indexName) {
                                    var part = "idb://".concat(dbName, "/").concat(tableName, "/").concat(indexName);
                                    return (obsSet[part] ||
                                        (obsSet[part] = new RangeSet()));
                                };
                                var pkRangeSet_1 = getRangeSet("");
                                var delsRangeSet_1 = getRangeSet(":dels");
                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];
                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {
                                    delsRangeSet_1.add(queriedRanges);
                                }
                                else {
                                    getRangeSet(queriedIndex.name || "").add(queriedRanges);
                                }
                                if (!queriedIndex.isPrimaryKey) {
                                    if (method === "count") {
                                        delsRangeSet_1.add(FULL_RANGE);
                                    }
                                    else {
                                        var keysPromise_1 = method === "query" &&
                                            outbound &&
                                            req.values &&
                                            table.query(__assign(__assign({}, req), { values: false }));
                                        return table[method].apply(this, arguments).then(function (res) {
                                            if (method === "query") {
                                                if (outbound && req.values) {
                                                    return keysPromise_1.then(function (_a) {
                                                        var resultingKeys = _a.result;
                                                        pkRangeSet_1.addKeys(resultingKeys);
                                                        return res;
                                                    });
                                                }
                                                var pKeys = req.values
                                                    ? res.result.map(extractKey)
                                                    : res.result;
                                                if (req.values) {
                                                    pkRangeSet_1.addKeys(pKeys);
                                                }
                                                else {
                                                    delsRangeSet_1.addKeys(pKeys);
                                                }
                                            }
                                            else if (method === "openCursor") {
                                                var cursor_1 = res;
                                                var wantValues_1 = req.values;
                                                return (cursor_1 &&
                                                    Object.create(cursor_1, {
                                                        key: {
                                                            get: function () {
                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.key;
                                                            },
                                                        },
                                                        primaryKey: {
                                                            get: function () {
                                                                var pkey = cursor_1.primaryKey;
                                                                delsRangeSet_1.addKey(pkey);
                                                                return pkey;
                                                            },
                                                        },
                                                        value: {
                                                            get: function () {
                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);
                                                                return cursor_1.value;
                                                            },
                                                        },
                                                    }));
                                            }
                                            return res;
                                        });
                                    }
                                }
                            }
                            return table[method].apply(this, arguments);
                        };
                    });
                    return tableClone;
                } });
        },
    };
    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {
        function addAffectedIndex(ix) {
            var rangeSet = getRangeSet(ix.name || "");
            function extractKey(obj) {
                return obj != null ? ix.extractKey(obj) : null;
            }
            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)
                ? key.forEach(function (key) { return rangeSet.addKey(key); })
                : rangeSet.addKey(key); };
            (oldObjs || newObjs).forEach(function (_, i) {
                var oldKey = oldObjs && extractKey(oldObjs[i]);
                var newKey = newObjs && extractKey(newObjs[i]);
                if (cmp(oldKey, newKey) !== 0) {
                    if (oldKey != null)
                        addKeyOrKeys(oldKey);
                    if (newKey != null)
                        addKeyOrKeys(newKey);
                }
            });
        }
        schema.indexes.forEach(addAffectedIndex);
    }

    function adjustOptimisticFromFailures(tblCache, req, res) {
        if (res.numFailures === 0)
            return req;
        if (req.type === 'deleteRange') {
            return null;
        }
        var numBulkOps = req.keys
            ? req.keys.length
            : 'values' in req && req.values
                ? req.values.length
                : 1;
        if (res.numFailures === numBulkOps) {
            return null;
        }
        var clone = __assign({}, req);
        if (isArray(clone.keys)) {
            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });
        }
        if ('values' in clone && isArray(clone.values)) {
            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });
        }
        return clone;
    }

    function isAboveLower(key, range) {
        return range.lower === undefined
            ? true
            : range.lowerOpen
                ? cmp(key, range.lower) > 0
                : cmp(key, range.lower) >= 0;
    }
    function isBelowUpper(key, range) {
        return range.upper === undefined
            ? true
            : range.upperOpen
                ? cmp(key, range.upper) < 0
                : cmp(key, range.upper) <= 0;
    }
    function isWithinRange(key, range) {
        return isAboveLower(key, range) && isBelowUpper(key, range);
    }

    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {
        if (!ops || ops.length === 0)
            return result;
        var index = req.query.index;
        var multiEntry = index.multiEntry;
        var queryRange = req.query.range;
        var primaryKey = table.schema.primaryKey;
        var extractPrimKey = primaryKey.extractKey;
        var extractIndex = index.extractKey;
        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;
        var finalResult = ops.reduce(function (result, op) {
            var modifedResult = result;
            var includedValues = [];
            if (op.type === 'add' || op.type === 'put') {
                var includedPKs = new RangeSet();
                for (var i = op.values.length - 1; i >= 0; --i) {
                    var value = op.values[i];
                    var pk = extractPrimKey(value);
                    if (includedPKs.hasKey(pk))
                        continue;
                    var key = extractIndex(value);
                    if (multiEntry && isArray(key)
                        ? key.some(function (k) { return isWithinRange(k, queryRange); })
                        : isWithinRange(key, queryRange)) {
                        includedPKs.addKey(pk);
                        includedValues.push(value);
                    }
                }
            }
            switch (op.type) {
                case 'add': {
                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);
                    modifedResult = result.concat(req.values
                        ? includedValues.filter(function (v) {
                            var key = extractPrimKey(v);
                            if (existingKeys_1.hasKey(key))
                                return false;
                            existingKeys_1.addKey(key);
                            return true;
                        })
                        : includedValues
                            .map(function (v) { return extractPrimKey(v); })
                            .filter(function (k) {
                            if (existingKeys_1.hasKey(k))
                                return false;
                            existingKeys_1.addKey(k);
                            return true;
                        }));
                    break;
                }
                case 'put': {
                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));
                    modifedResult = result
                        .filter(
                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })
                        .concat(
                    req.values
                        ? includedValues
                        : includedValues.map(function (v) { return extractPrimKey(v); }));
                    break;
                }
                case 'delete':
                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);
                    modifedResult = result.filter(function (item) {
                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);
                    });
                    break;
                case 'deleteRange':
                    var range_1 = op.range;
                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });
                    break;
            }
            return modifedResult;
        }, result);
        if (finalResult === result)
            return result;
        finalResult.sort(function (a, b) {
            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||
                cmp(extractPrimKey(a), extractPrimKey(b));
        });
        if (req.limit && req.limit < Infinity) {
            if (finalResult.length > req.limit) {
                finalResult.length = req.limit;
            }
            else if (result.length === req.limit && finalResult.length < req.limit) {
                cacheEntry.dirty = true;
            }
        }
        return immutable ? Object.freeze(finalResult) : finalResult;
    }

    function areRangesEqual(r1, r2) {
        return (cmp(r1.lower, r2.lower) === 0 &&
            cmp(r1.upper, r2.upper) === 0 &&
            !!r1.lowerOpen === !!r2.lowerOpen &&
            !!r1.upperOpen === !!r2.upperOpen);
    }

    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {
        if (lower1 === undefined)
            return lower2 !== undefined ? -1 : 0;
        if (lower2 === undefined)
            return 1;
        var c = cmp(lower1, lower2);
        if (c === 0) {
            if (lowerOpen1 && lowerOpen2)
                return 0;
            if (lowerOpen1)
                return 1;
            if (lowerOpen2)
                return -1;
        }
        return c;
    }
    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {
        if (upper1 === undefined)
            return upper2 !== undefined ? 1 : 0;
        if (upper2 === undefined)
            return -1;
        var c = cmp(upper1, upper2);
        if (c === 0) {
            if (upperOpen1 && upperOpen2)
                return 0;
            if (upperOpen1)
                return -1;
            if (upperOpen2)
                return 1;
        }
        return c;
    }
    function isSuperRange(r1, r2) {
        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&
            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);
    }

    function findCompatibleQuery(dbName, tableName, type, req) {
        var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
        if (!tblCache)
            return [];
        var queries = tblCache.queries[type];
        if (!queries)
            return [null, false, tblCache, null];
        var indexName = req.query ? req.query.index.name : null;
        var entries = queries[indexName || ''];
        if (!entries)
            return [null, false, tblCache, null];
        switch (type) {
            case 'query':
                var equalEntry = entries.find(function (entry) {
                    return entry.req.limit === req.limit &&
                        entry.req.values === req.values &&
                        areRangesEqual(entry.req.query.range, req.query.range);
                });
                if (equalEntry)
                    return [
                        equalEntry,
                        true,
                        tblCache,
                        entries,
                    ];
                var superEntry = entries.find(function (entry) {
                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;
                    return (limit >= req.limit &&
                        (req.values ? entry.req.values : true) &&
                        isSuperRange(entry.req.query.range, req.query.range));
                });
                return [superEntry, false, tblCache, entries];
            case 'count':
                var countQuery = entries.find(function (entry) {
                    return areRangesEqual(entry.req.query.range, req.query.range);
                });
                return [countQuery, !!countQuery, tblCache, entries];
        }
    }

    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {
        cacheEntry.subscribers.add(requery);
        signal.addEventListener("abort", function () {
            cacheEntry.subscribers.delete(requery);
            if (cacheEntry.subscribers.size === 0) {
                enqueForDeletion(cacheEntry, container);
            }
        });
    }
    function enqueForDeletion(cacheEntry, container) {
        setTimeout(function () {
            if (cacheEntry.subscribers.size === 0) {
                delArrayItem(container, cacheEntry);
            }
        }, 3000);
    }

    var cacheMiddleware = {
        stack: 'dbcore',
        level: 0,
        name: 'Cache',
        create: function (core) {
            var dbName = core.schema.name;
            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {
                    var idbtrans = core.transaction(stores, mode, options);
                    if (mode === 'readwrite') {
                        var ac_1 = new AbortController();
                        var signal = ac_1.signal;
                        var endTransaction = function (wasCommitted) { return function () {
                            ac_1.abort();
                            if (mode === 'readwrite') {
                                var affectedSubscribers_1 = new Set();
                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {
                                    var storeName = stores_1[_i];
                                    var tblCache = cache["idb://".concat(dbName, "/").concat(storeName)];
                                    if (tblCache) {
                                        var table = core.table(storeName);
                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });
                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {
                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {
                                                var entries = _b[_a];
                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {
                                                    var entry = _d[_c];
                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {
                                                        delArrayItem(entries, entry);
                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                    }
                                                }
                                            }
                                        }
                                        else if (ops.length > 0) {
                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });
                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {
                                                var entries = _f[_e];
                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {
                                                    var entry = _h[_g];
                                                    if (entry.res != null &&
                                                        idbtrans.mutatedParts
    ) {
                                                        if (wasCommitted && !entry.dirty) {
                                                            var freezeResults = Object.isFrozen(entry.res);
                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                            }
                                                            else if (modRes !== entry.res) {
                                                                entry.res = modRes;
                                                                entry.promise = DexiePromise.resolve({ result: modRes });
                                                            }
                                                        }
                                                        else {
                                                            if (entry.dirty) {
                                                                delArrayItem(entries, entry);
                                                            }
                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                affectedSubscribers_1.forEach(function (requery) { return requery(); });
                            }
                        }; };
                        idbtrans.addEventListener('abort', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('error', endTransaction(false), {
                            signal: signal,
                        });
                        idbtrans.addEventListener('complete', endTransaction(true), {
                            signal: signal,
                        });
                    }
                    return idbtrans;
                }, table: function (tableName) {
                    var downTable = core.table(tableName);
                    var primKey = downTable.schema.primaryKey;
                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {
                            var trans = PSD.trans;
                            if (primKey.outbound ||
                                trans.db._options.cache === 'disabled' ||
                                trans.explicit ||
                                trans.idbtrans.mode !== 'readwrite'
                            ) {
                                return downTable.mutate(req);
                            }
                            var tblCache = cache["idb://".concat(dbName, "/").concat(tableName)];
                            if (!tblCache)
                                return downTable.mutate(req);
                            var promise = downTable.mutate(req);
                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {
                                promise.then(function (res) {
                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {
                                            var _a;
                                            if (res.failures[i])
                                                return value;
                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))
                                                ? deepClone(value)
                                                : __assign({}, value);
                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);
                                            return valueWithKey;
                                        }) });
                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);
                                    tblCache.optimisticOps.push(adjustedReq);
                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });
                                });
                            }
                            else {
                                tblCache.optimisticOps.push(req);
                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                promise.then(function (res) {
                                    if (res.numFailures > 0) {
                                        delArrayItem(tblCache.optimisticOps, req);
                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);
                                        if (adjustedReq) {
                                            tblCache.optimisticOps.push(adjustedReq);
                                        }
                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                    }
                                });
                                promise.catch(function () {
                                    delArrayItem(tblCache.optimisticOps, req);
                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);
                                });
                            }
                            return promise;
                        }, query: function (req) {
                            var _a;
                            if (!isCachableContext(PSD, downTable) || !isCachableRequest("query", req))
                                return downTable.query(req);
                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';
                            var _b = PSD, requery = _b.requery, signal = _b.signal;
                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];
                            if (cacheEntry && exactMatch) {
                                cacheEntry.obsSet = req.obsSet;
                            }
                            else {
                                var promise = downTable.query(req).then(function (res) {
                                    var result = res.result;
                                    if (cacheEntry)
                                        cacheEntry.res = result;
                                    if (freezeResults) {
                                        for (var i = 0, l = result.length; i < l; ++i) {
                                            Object.freeze(result[i]);
                                        }
                                        Object.freeze(result);
                                    }
                                    else {
                                        res.result = deepClone(result);
                                    }
                                    return res;
                                }).catch(function (error) {
                                    if (container && cacheEntry)
                                        delArrayItem(container, cacheEntry);
                                    return Promise.reject(error);
                                });
                                cacheEntry = {
                                    obsSet: req.obsSet,
                                    promise: promise,
                                    subscribers: new Set(),
                                    type: 'query',
                                    req: req,
                                    dirty: false,
                                };
                                if (container) {
                                    container.push(cacheEntry);
                                }
                                else {
                                    container = [cacheEntry];
                                    if (!tblCache) {
                                        tblCache = cache["idb://".concat(dbName, "/").concat(tableName)] = {
                                            queries: {
                                                query: {},
                                                count: {},
                                            },
                                            objs: new Map(),
                                            optimisticOps: [],
                                            unsignaledParts: {}
                                        };
                                    }
                                    tblCache.queries.query[req.query.index.name || ''] = container;
                                }
                            }
                            subscribeToCacheEntry(cacheEntry, container, requery, signal);
                            return cacheEntry.promise.then(function (res) {
                                return {
                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),
                                };
                            });
                        } });
                    return tableMW;
                } });
            return coreMW;
        },
    };

    function vipify(target, vipDb) {
        return new Proxy(target, {
            get: function (target, prop, receiver) {
                if (prop === 'db')
                    return vipDb;
                return Reflect.get(target, prop, receiver);
            }
        });
    }

    var Dexie$1 =  (function () {
        function Dexie(name, options) {
            var _this = this;
            this._middlewares = {};
            this.verno = 0;
            var deps = Dexie.dependencies;
            this._options = options = __assign({
                addons: Dexie.addons, autoOpen: true,
                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);
            this._deps = {
                indexedDB: options.indexedDB,
                IDBKeyRange: options.IDBKeyRange
            };
            var addons = options.addons;
            this._dbSchema = {};
            this._versions = [];
            this._storeNames = [];
            this._allTables = {};
            this.idbdb = null;
            this._novip = this;
            var state = {
                dbOpenError: null,
                isBeingOpened: false,
                onReadyBeingFired: null,
                openComplete: false,
                dbReadyResolve: nop,
                dbReadyPromise: null,
                cancelOpen: nop,
                openCanceller: null,
                autoSchema: true,
                PR1398_maxLoop: 3,
                autoOpen: options.autoOpen,
            };
            state.dbReadyPromise = new DexiePromise(function (resolve) {
                state.dbReadyResolve = resolve;
            });
            state.openCanceller = new DexiePromise(function (_, reject) {
                state.cancelOpen = reject;
            });
            this._state = state;
            this.name = name;
            this.on = Events(this, "populate", "blocked", "versionchange", "close", { ready: [promisableChain, nop] });
            this.once = function (event, callback) {
                var fn = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    _this.on(event).unsubscribe(fn);
                    callback.apply(_this, args);
                };
                return _this.on(event, fn);
            };
            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {
                return function (subscriber, bSticky) {
                    Dexie.vip(function () {
                        var state = _this._state;
                        if (state.openComplete) {
                            if (!state.dbOpenError)
                                DexiePromise.resolve().then(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else if (state.onReadyBeingFired) {
                            state.onReadyBeingFired.push(subscriber);
                            if (bSticky)
                                subscribe(subscriber);
                        }
                        else {
                            subscribe(subscriber);
                            var db_1 = _this;
                            if (!bSticky)
                                subscribe(function unsubscribe() {
                                    db_1.on.ready.unsubscribe(subscriber);
                                    db_1.on.ready.unsubscribe(unsubscribe);
                                });
                        }
                    });
                };
            });
            this.Collection = createCollectionConstructor(this);
            this.Table = createTableConstructor(this);
            this.Transaction = createTransactionConstructor(this);
            this.Version = createVersionConstructor(this);
            this.WhereClause = createWhereClauseConstructor(this);
            this.on("versionchange", function (ev) {
                if (ev.newVersion > 0)
                    console.warn("Another connection wants to upgrade database '".concat(_this.name, "'. Closing db now to resume the upgrade."));
                else
                    console.warn("Another connection wants to delete database '".concat(_this.name, "'. Closing db now to resume the delete request."));
                _this.close({ disableAutoOpen: false });
            });
            this.on("blocked", function (ev) {
                if (!ev.newVersion || ev.newVersion < ev.oldVersion)
                    console.warn("Dexie.delete('".concat(_this.name, "') was blocked"));
                else
                    console.warn("Upgrade '".concat(_this.name, "' blocked by other connection holding version ").concat(ev.oldVersion / 10));
            });
            this._maxKey = getMaxKey(options.IDBKeyRange);
            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };
            this._fireOnBlocked = function (ev) {
                _this.on("blocked").fire(ev);
                connections
                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })
                    .map(function (c) { return c.on("versionchange").fire(ev); });
            };
            this.use(cacheExistingValuesMiddleware);
            this.use(cacheMiddleware);
            this.use(observabilityMiddleware);
            this.use(virtualIndexMiddleware);
            this.use(hooksMiddleware);
            var vipDB = new Proxy(this, {
                get: function (_, prop, receiver) {
                    if (prop === '_vip')
                        return true;
                    if (prop === 'table')
                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };
                    var rv = Reflect.get(_, prop, receiver);
                    if (rv instanceof Table)
                        return vipify(rv, vipDB);
                    if (prop === 'tables')
                        return rv.map(function (t) { return vipify(t, vipDB); });
                    if (prop === '_createTransaction')
                        return function () {
                            var tx = rv.apply(this, arguments);
                            return vipify(tx, vipDB);
                        };
                    return rv;
                }
            });
            this.vip = vipDB;
            addons.forEach(function (addon) { return addon(_this); });
        }
        Dexie.prototype.version = function (versionNumber) {
            if (isNaN(versionNumber) || versionNumber < 0.1)
                throw new exceptions.Type("Given version is not a positive number");
            versionNumber = Math.round(versionNumber * 10) / 10;
            if (this.idbdb || this._state.isBeingOpened)
                throw new exceptions.Schema("Cannot add version when database is open");
            this.verno = Math.max(this.verno, versionNumber);
            var versions = this._versions;
            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];
            if (versionInstance)
                return versionInstance;
            versionInstance = new this.Version(versionNumber);
            versions.push(versionInstance);
            versions.sort(lowerVersionFirst);
            versionInstance.stores({});
            this._state.autoSchema = false;
            return versionInstance;
        };
        Dexie.prototype._whenReady = function (fn) {
            var _this = this;
            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {
                if (_this._state.openComplete) {
                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));
                }
                if (!_this._state.isBeingOpened) {
                    if (!_this._state.autoOpen) {
                        reject(new exceptions.DatabaseClosed());
                        return;
                    }
                    _this.open().catch(nop);
                }
                _this._state.dbReadyPromise.then(resolve, reject);
            }).then(fn);
        };
        Dexie.prototype.use = function (_a) {
            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;
            if (name)
                this.unuse({ stack: stack, name: name });
            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);
            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });
            middlewares.sort(function (a, b) { return a.level - b.level; });
            return this;
        };
        Dexie.prototype.unuse = function (_a) {
            var stack = _a.stack, name = _a.name, create = _a.create;
            if (stack && this._middlewares[stack]) {
                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {
                    return create ? mw.create !== create :
                        name ? mw.name !== name :
                            false;
                });
            }
            return this;
        };
        Dexie.prototype.open = function () {
            var _this = this;
            return usePSD(globalPSD,
            function () { return dexieOpen(_this); });
        };
        Dexie.prototype._close = function () {
            this.on.close.fire(new CustomEvent('close'));
            var state = this._state;
            var idx = connections.indexOf(this);
            if (idx >= 0)
                connections.splice(idx, 1);
            if (this.idbdb) {
                try {
                    this.idbdb.close();
                }
                catch (e) { }
                this.idbdb = null;
            }
            if (!state.isBeingOpened) {
                state.dbReadyPromise = new DexiePromise(function (resolve) {
                    state.dbReadyResolve = resolve;
                });
                state.openCanceller = new DexiePromise(function (_, reject) {
                    state.cancelOpen = reject;
                });
            }
        };
        Dexie.prototype.close = function (_a) {
            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;
            var state = this._state;
            if (disableAutoOpen) {
                if (state.isBeingOpened) {
                    state.cancelOpen(new exceptions.DatabaseClosed());
                }
                this._close();
                state.autoOpen = false;
                state.dbOpenError = new exceptions.DatabaseClosed();
            }
            else {
                this._close();
                state.autoOpen = this._options.autoOpen ||
                    state.isBeingOpened;
                state.openComplete = false;
                state.dbOpenError = null;
            }
        };
        Dexie.prototype.delete = function (closeOptions) {
            var _this = this;
            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }
            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';
            var state = this._state;
            return new DexiePromise(function (resolve, reject) {
                var doDelete = function () {
                    _this.close(closeOptions);
                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);
                    req.onsuccess = wrap(function () {
                        _onDatabaseDeleted(_this._deps, _this.name);
                        resolve();
                    });
                    req.onerror = eventRejectHandler(reject);
                    req.onblocked = _this._fireOnBlocked;
                };
                if (hasInvalidArguments)
                    throw new exceptions.InvalidArgument("Invalid closeOptions argument to db.delete()");
                if (state.isBeingOpened) {
                    state.dbReadyPromise.then(doDelete);
                }
                else {
                    doDelete();
                }
            });
        };
        Dexie.prototype.backendDB = function () {
            return this.idbdb;
        };
        Dexie.prototype.isOpen = function () {
            return this.idbdb !== null;
        };
        Dexie.prototype.hasBeenClosed = function () {
            var dbOpenError = this._state.dbOpenError;
            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');
        };
        Dexie.prototype.hasFailed = function () {
            return this._state.dbOpenError !== null;
        };
        Dexie.prototype.dynamicallyOpened = function () {
            return this._state.autoSchema;
        };
        Object.defineProperty(Dexie.prototype, "tables", {
            get: function () {
                var _this = this;
                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });
            },
            enumerable: false,
            configurable: true
        });
        Dexie.prototype.transaction = function () {
            var args = extractTransactionArgs.apply(this, arguments);
            return this._transaction.apply(this, args);
        };
        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {
            var _this = this;
            var parentTransaction = PSD.trans;
            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)
                parentTransaction = null;
            var onlyIfCompatible = mode.indexOf('?') !== -1;
            mode = mode.replace('!', '').replace('?', '');
            var idbMode, storeNames;
            try {
                storeNames = tables.map(function (table) {
                    var storeName = table instanceof _this.Table ? table.name : table;
                    if (typeof storeName !== 'string')
                        throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
                    return storeName;
                });
                if (mode == "r" || mode === READONLY)
                    idbMode = READONLY;
                else if (mode == "rw" || mode == READWRITE)
                    idbMode = READWRITE;
                else
                    throw new exceptions.InvalidArgument("Invalid transaction mode: " + mode);
                if (parentTransaction) {
                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {
                        if (onlyIfCompatible) {
                            parentTransaction = null;
                        }
                        else
                            throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
                    }
                    if (parentTransaction) {
                        storeNames.forEach(function (storeName) {
                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {
                                if (onlyIfCompatible) {
                                    parentTransaction = null;
                                }
                                else
                                    throw new exceptions.SubTransaction("Table " + storeName +
                                        " not included in parent transaction.");
                            }
                        });
                    }
                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {
                        parentTransaction = null;
                    }
                }
            }
            catch (e) {
                return parentTransaction ?
                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :
                    rejection(e);
            }
            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);
            return (parentTransaction ?
                parentTransaction._promise(idbMode, enterTransaction, "lock") :
                PSD.trans ?
                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :
                    this._whenReady(enterTransaction));
        };
        Dexie.prototype.table = function (tableName) {
            if (!hasOwn(this._allTables, tableName)) {
                throw new exceptions.InvalidTable("Table ".concat(tableName, " does not exist"));
            }
            return this._allTables[tableName];
        };
        return Dexie;
    }());

    var symbolObservable = typeof Symbol !== "undefined" && "observable" in Symbol
        ? Symbol.observable
        : "@@observable";
    var Observable =  (function () {
        function Observable(subscribe) {
            this._subscribe = subscribe;
        }
        Observable.prototype.subscribe = function (x, error, complete) {
            return this._subscribe(!x || typeof x === "function" ? { next: x, error: error, complete: complete } : x);
        };
        Observable.prototype[symbolObservable] = function () {
            return this;
        };
        return Observable;
    }());

    var domDeps;
    try {
        domDeps = {
            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,
            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange
        };
    }
    catch (e) {
        domDeps = { indexedDB: null, IDBKeyRange: null };
    }

    function liveQuery(querier) {
        var hasValue = false;
        var currentValue;
        var observable = new Observable(function (observer) {
            var scopeFuncIsAsync = isAsyncFunction(querier);
            function execute(ctx) {
                var wasRootExec = beginMicroTickScope();
                try {
                    if (scopeFuncIsAsync) {
                        incrementExpectedAwaits();
                    }
                    var rv = newScope(querier, ctx);
                    if (scopeFuncIsAsync) {
                        rv = rv.finally(decrementExpectedAwaits);
                    }
                    return rv;
                }
                finally {
                    wasRootExec && endMicroTickScope();
                }
            }
            var closed = false;
            var abortController;
            var accumMuts = {};
            var currentObs = {};
            var subscription = {
                get closed() {
                    return closed;
                },
                unsubscribe: function () {
                    if (closed)
                        return;
                    closed = true;
                    if (abortController)
                        abortController.abort();
                    if (startedListening)
                        globalEvents.storagemutated.unsubscribe(mutationListener);
                },
            };
            observer.start && observer.start(subscription);
            var startedListening = false;
            var doQuery = function () { return execInGlobalContext(_doQuery); };
            function shouldNotify() {
                return obsSetsOverlap(currentObs, accumMuts);
            }
            var mutationListener = function (parts) {
                extendObservabilitySet(accumMuts, parts);
                if (shouldNotify()) {
                    doQuery();
                }
            };
            var _doQuery = function () {
                if (closed ||
                    !domDeps.indexedDB)
                 {
                    return;
                }
                accumMuts = {};
                var subscr = {};
                if (abortController)
                    abortController.abort();
                abortController = new AbortController();
                var ctx = {
                    subscr: subscr,
                    signal: abortController.signal,
                    requery: doQuery,
                    querier: querier,
                    trans: null
                };
                var ret = execute(ctx);
                Promise.resolve(ret).then(function (result) {
                    hasValue = true;
                    currentValue = result;
                    if (closed || ctx.signal.aborted) {
                        return;
                    }
                    accumMuts = {};
                    currentObs = subscr;
                    if (!objectIsEmpty(currentObs) && !startedListening) {
                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);
                        startedListening = true;
                    }
                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });
                }, function (err) {
                    hasValue = false;
                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {
                        if (!closed)
                            execInGlobalContext(function () {
                                if (closed)
                                    return;
                                observer.error && observer.error(err);
                            });
                    }
                });
            };
            setTimeout(doQuery, 0);
            return subscription;
        });
        observable.hasValue = function () { return hasValue; };
        observable.getValue = function () { return currentValue; };
        return observable;
    }

    var Dexie = Dexie$1;
    props(Dexie, __assign(__assign({}, fullNameExceptions), {
        delete: function (databaseName) {
            var db = new Dexie(databaseName, { addons: [] });
            return db.delete();
        },
        exists: function (name) {
            return new Dexie(name, { addons: [] }).open().then(function (db) {
                db.close();
                return true;
            }).catch('NoSuchDatabaseError', function () { return false; });
        },
        getDatabaseNames: function (cb) {
            try {
                return getDatabaseNames(Dexie.dependencies).then(cb);
            }
            catch (_a) {
                return rejection(new exceptions.MissingAPI());
            }
        },
        defineClass: function () {
            function Class(content) {
                extend(this, content);
            }
            return Class;
        }, ignoreTransaction: function (scopeFunc) {
            return PSD.trans ?
                usePSD(PSD.transless, scopeFunc) :
                scopeFunc();
        }, vip: vip, async: function (generatorFn) {
            return function () {
                try {
                    var rv = awaitIterator(generatorFn.apply(this, arguments));
                    if (!rv || typeof rv.then !== 'function')
                        return DexiePromise.resolve(rv);
                    return rv;
                }
                catch (e) {
                    return rejection(e);
                }
            };
        }, spawn: function (generatorFn, args, thiz) {
            try {
                var rv = awaitIterator(generatorFn.apply(thiz, args || []));
                if (!rv || typeof rv.then !== 'function')
                    return DexiePromise.resolve(rv);
                return rv;
            }
            catch (e) {
                return rejection(e);
            }
        },
        currentTransaction: {
            get: function () { return PSD.trans || null; }
        }, waitFor: function (promiseOrFunction, optionalTimeout) {
            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?
                Dexie.ignoreTransaction(promiseOrFunction) :
                promiseOrFunction)
                .timeout(optionalTimeout || 60000);
            return PSD.trans ?
                PSD.trans.waitFor(promise) :
                promise;
        },
        Promise: DexiePromise,
        debug: {
            get: function () { return debug; },
            set: function (value) {
                setDebug(value);
            }
        },
        derive: derive, extend: extend, props: props, override: override,
        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,
        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,
        minKey: minKey,
        addons: [],
        connections: connections,
        errnames: errnames,
        dependencies: domDeps, cache: cache,
        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')
            .map(function (n) { return parseInt(n); })
            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));
    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);

    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {
            if (!propagatingLocally) {
                var event_1;
                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {
                    detail: updatedParts
                });
                propagatingLocally = true;
                dispatchEvent(event_1);
                propagatingLocally = false;
            }
        });
        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {
            var detail = _a.detail;
            if (!propagatingLocally) {
                propagateLocally(detail);
            }
        });
    }
    function propagateLocally(updateParts) {
        var wasMe = propagatingLocally;
        try {
            propagatingLocally = true;
            globalEvents.storagemutated.fire(updateParts);
            signalSubscribersNow(updateParts, true);
        }
        finally {
            propagatingLocally = wasMe;
        }
    }
    var propagatingLocally = false;

    var bc;
    var createBC = function () { };
    if (typeof BroadcastChannel !== 'undefined') {
        createBC = function () {
            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);
            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };
        };
        createBC();
        if (typeof bc.unref === 'function') {
            bc.unref();
        }
        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {
            if (!propagatingLocally) {
                bc.postMessage(changedParts);
            }
        });
    }

    if (typeof addEventListener !== 'undefined') {
        addEventListener('pagehide', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pagehide');
                bc === null || bc === void 0 ? void 0 : bc.close();
                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {
                    var db = connections_1[_i];
                    db.close({ disableAutoOpen: false });
                }
            }
        });
        addEventListener('pageshow', function (event) {
            if (!Dexie$1.disableBfCache && event.persisted) {
                if (debug)
                    console.debug('Dexie: handling persisted pageshow');
                createBC();
                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });
            }
        });
    }

    function add(value) {
        return new PropModification({ add: value });
    }

    function remove(value) {
        return new PropModification({ remove: value });
    }

    function replacePrefix(a, b) {
        return new PropModification({ replacePrefix: [a, b] });
    }

    DexiePromise.rejectionMapper = mapError;
    setDebug(debug);

    var namedExports = /*#__PURE__*/Object.freeze({
        __proto__: null,
        Dexie: Dexie$1,
        liveQuery: liveQuery,
        Entity: Entity,
        cmp: cmp,
        PropModification: PropModification,
        replacePrefix: replacePrefix,
        add: add,
        remove: remove,
        'default': Dexie$1,
        RangeSet: RangeSet,
        mergeRanges: mergeRanges,
        rangesOverlap: rangesOverlap
    });

    __assign(Dexie$1, namedExports, { default: Dexie$1 });

    return Dexie$1;

}));
//# sourceMappingURL=dexie.js.map


/***/ }),

/***/ "../../node_modules/dexie/import-wrapper.mjs":
/*!***************************************************!*\
  !*** ../../node_modules/dexie/import-wrapper.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dexie: () => (/* binding */ Dexie),
/* harmony export */   DexieYProvider: () => (/* binding */ DexieYProvider),
/* harmony export */   Entity: () => (/* binding */ Entity),
/* harmony export */   PropModification: () => (/* binding */ PropModification),
/* harmony export */   RangeSet: () => (/* binding */ RangeSet),
/* harmony export */   add: () => (/* binding */ add),
/* harmony export */   cmp: () => (/* binding */ cmp),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   liveQuery: () => (/* binding */ liveQuery),
/* harmony export */   mergeRanges: () => (/* binding */ mergeRanges),
/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),
/* harmony export */   remove: () => (/* binding */ remove),
/* harmony export */   replacePrefix: () => (/* binding */ replacePrefix)
/* harmony export */ });
/* harmony import */ var _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/dexie.js */ "../../node_modules/dexie/dist/dexie.js");
// Making the module version consumable via require - to prohibit
// multiple occurrancies of the same module in the same app
// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)

const DexieSymbol = Symbol.for("Dexie");
const Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__);
if (_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer !== Dexie.semVer) {
    throw new Error(`Two different versions of Dexie loaded in the same app: ${_dist_dexie_js__WEBPACK_IMPORTED_MODULE_0__.semVer} and ${Dexie.semVer}`);
}
const { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,
    PropModification, replacePrefix, add, remove,
    DexieYProvider } = Dexie;

    
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dexie);


/***/ }),

/***/ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js":
/*!***********************************************************************************!*\
  !*** ../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! void-elements */ "../../node_modules/void-elements/index.js");
/* harmony import */ var void_elements__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(void_elements__WEBPACK_IMPORTED_MODULE_0__);
var t=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],((void_elements__WEBPACK_IMPORTED_MODULE_0___default())[i[1]]||"/"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith("!--"))){var s=n.indexOf("--\x3e");return{type:"comment",comment:-1!==s?n.slice(4,s):""}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i=/^\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(a,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf("<")){var u=e.indexOf("<");c.push({type:"text",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!=="</"+a.name+">")return;m=!1}var u,f="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,"tag"===(a=n(r)).type&&t.components[a.name]&&(a.type="component",m=!0),a.voidElement||m||!d||"<"===d||a.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&"<"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf("<",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=" "),(x>-1&&l+u.length>=0||" "!==g)&&u.push({type:"text",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a("",t)},"")}};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (c);
//# sourceMappingURL=html-parse-stringify.module.js.map


/***/ }),

/***/ "../../node_modules/i18next/dist/cjs/i18next.js":
/*!******************************************************!*\
  !*** ../../node_modules/i18next/dist/cjs/i18next.js ***!
  \******************************************************/
/***/ ((module) => {



const isString = obj => typeof obj === 'string';
const defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
const makeString = object => {
  if (object == null) return '';
  return '' + object;
};
const copy = (a, s, t) => {
  a.forEach(m => {
    if (s[m]) t[m] = s[m];
  });
};
const lastOfPathSeparatorRegExp = /###/g;
const cleanKey = key => key && key.indexOf('###') > -1 ? key.replace(lastOfPathSeparatorRegExp, '.') : key;
const canNotTraverseDeeper = object => !object || isString(object);
const getLastOfPath = (object, path, Empty) => {
  const stack = !isString(path) ? path : path.split('.');
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object)) return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty) object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object)) return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
const setPath = (object, path, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  if (obj !== undefined || path.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path[path.length - 1];
  let p = path.slice(0, path.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === undefined && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== 'undefined') {
      last.obj = undefined;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
const pushPath = (object, path, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
const getPath = (object, path) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path);
  if (!obj) return undefined;
  return obj[k];
};
const getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== undefined) {
    return value;
  }
  return getPath(defaultData, key);
};
const deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== '__proto__' && prop !== 'constructor') {
      if (prop in target) {
        if (isString(target[prop]) || target[prop] instanceof String || isString(source[prop]) || source[prop] instanceof String) {
          if (overwrite) target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
const regexEscape = str => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
var _entityMap = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '/': '&#x2F;'
};
const escape = data => {
  if (isString(data)) {
    return data.replace(/[&<>"'\/]/g, s => _entityMap[s]);
  }
  return data;
};
class RegExpCache {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== undefined) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
}
const chars = [' ', ',', '?', '!', ';'];
const looksLikeObjectPathRegExpCache = new RegExpCache(20);
const looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || '';
  keySeparator = keySeparator || '';
  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0) return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map(c => c === '?' ? '\\?' : c).join('|')})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
const deepFind = function (obj, path) {
  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';
  if (!obj) return undefined;
  if (obj[path]) return obj[path];
  const tokens = path.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length;) {
    if (!current || typeof current !== 'object') {
      return undefined;
    }
    let next;
    let nextPath = '';
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== undefined) {
        if (['string', 'number', 'boolean'].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
const getCleanedCode = code => code && code.replace('_', '-');

const consoleLogger = {
  type: 'logger',
  log(args) {
    this.output('log', args);
  },
  warn(args) {
    this.output('warn', args);
  },
  error(args) {
    this.output('error', args);
  },
  output(type, args) {
    if (console && console[type]) console[type].apply(console, args);
  }
};
class Logger {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, 'log', '', true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, 'warn', '', true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, 'error', '');
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (isString(args[0])) args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new Logger(this.logger, options);
  }
}
var baseLogger = new Logger();

class EventEmitter {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(' ').forEach(event => {
      if (!this.observers[event]) this.observers[event] = new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event]) return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach(_ref => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers['*']) {
      const cloned = Array.from(this.observers['*'].entries());
      cloned.forEach(_ref2 => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
}

class ResourceStore extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      ns: ['translation'],
      defaultNS: 'translation'
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    if (this.options.ignoreJSONStructure === undefined) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path;
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    } else {
      path = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path.push(...key);
        } else if (isString(key) && keySeparator) {
          path.push(...key.split(keySeparator));
        } else {
          path.push(key);
        }
      }
    }
    const result = getPath(this.data, path);
    if (!result && !ns && !key && lng.indexOf('.') > -1) {
      lng = path[0];
      ns = path[1];
      key = path.slice(2).join('.');
    }
    if (result || !ignoreJSONStructure || !isString(key)) return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path, value);
    if (!options.silent) this.emit('added', lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (isString(resources[m]) || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {
        silent: true
      });
    }
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path) || {};
    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path, pack);
    if (!options.silent) this.emit('added', lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit('removed', lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  }
  getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === 'v1') return {
      ...{},
      ...this.getResource(lng, ns)
    };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
}

var postProcessor = {
  processors: {},
  addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach(processor => {
      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};

const checkedLoadedFor = {};
class Translator extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    super();
    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);
    this.options = options;
    if (this.options.keySeparator === undefined) {
      this.options.keySeparator = '.';
    }
    this.logger = baseLogger.create('translator');
  }
  changeLanguage(lng) {
    if (lng) this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    if (key === undefined || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces: isString(namespaces) ? [namespaces] : namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    return {
      key,
      namespaces: isString(namespaces) ? [namespaces] : namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === 'object') options = {
      ...options
    };
    if (!options) options = {};
    if (keys === undefined || keys === null) return '';
    if (!Array.isArray(keys)) keys = [String(keys)];
    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = !isString(res) && typeof res !== 'boolean' && typeof res !== 'number';
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(isString(joinArrays) && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy[m] === deepKey) copy[m] = res[m];
          }
        }
        res = copy;
      }
    } else if (handleAsObjectInI18nFormat && isString(joinArrays) && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const hasDefaultValue = Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : '';
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit('missingKey', l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach(language => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach(suffix => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== 'v1') {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation) this.interpolator.init({
        ...options,
        ...{
          interpolation: {
            ...this.options.interpolation,
            ...options.interpolation
          }
        }
      });
      const skipOnVariables = isString(res) && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && !isString(options.replace) ? options.replace : options;
      if (this.options.interpolation.defaultVariables) data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft) options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = this.language || resolved.usedLng;
      if (options.nest !== false) res = this.interpolator.nest(res, function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (lastKey && lastKey[0] === args[0] && !options.context) {
          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
          return null;
        }
        return _this.translate(...args, key);
      }, options);
      if (options.interpolation) this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = isString(postProcess) ? [postProcess] : postProcess;
    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (isString(keys)) keys = [keys];
    keys.forEach(k => {
      if (this.isValidLookup(found)) return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== undefined && !isString(options.count);
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== undefined && (isString(options.context) || typeof options.context === 'number') && options.context !== '';
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach(ns => {
        if (this.isValidLookup(found)) return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(', ')}" won't get resolved as namespace "${usedNS}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
        }
        codes.forEach(code => {
          if (this.isValidLookup(found)) return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];
    const useOptionsReplaceForData = options.replace && !isString(options.replace);
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = 'defaultValue';
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {
        return true;
      }
    }
    return false;
  }
}

const capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);
class LanguageUtil {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create('languageUtils');
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return null;
    const p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === 'x') return null;
    return this.formatLanguageCode(p.join('-'));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf('-') < 0) return code;
    const p = code.split('-');
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (isString(code) && code.indexOf('-') > -1) {
      if (typeof Intl !== 'undefined' && typeof Intl.getCanonicalLocales !== 'undefined') {
        try {
          let formattedCode = Intl.getCanonicalLocales(code)[0];
          if (formattedCode && this.options.lowerCaseLng) {
            formattedCode = formattedCode.toLowerCase();
          }
          if (formattedCode) return formattedCode;
        } catch (e) {}
      }
      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      let p = code.split('-');
      if (this.options.lowerCaseLng) {
        p = p.map(part => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join('-');
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes) return null;
    let found;
    codes.forEach(code => {
      if (found) return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach(code => {
        if (found) return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly)) return found = lngOnly;
        found = this.options.supportedLngs.find(supportedLng => {
          if (supportedLng === lngOnly) return supportedLng;
          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;
          if (supportedLng.indexOf('-') > 0 && lngOnly.indexOf('-') < 0 && supportedLng.substring(0, supportedLng.indexOf('-')) === lngOnly) return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;
        });
      });
    }
    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);
    if (isString(fallbacks)) fallbacks = [fallbacks];
    if (Array.isArray(fallbacks)) return fallbacks;
    if (!code) return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found) found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = c => {
      if (!c) return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (isString(code) && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (isString(code)) {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach(fc => {
      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
}

let sets = [{
  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],
  nr: [1],
  fc: 3
}, {
  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ['ar'],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ['cs', 'sk'],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ['csb', 'pl'],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ['cy'],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ['fr'],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ['ga'],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ['gd'],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ['is'],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ['jv'],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ['kw'],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ['lt'],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ['lv'],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ['mk'],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ['mnk'],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ['mt'],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ['or'],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ['ro'],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ['sl'],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ['he', 'iw'],
  nr: [1, 2, 20, 21],
  fc: 22
}];
let _rulesPluralsTypes = {
  1: n => Number(n > 1),
  2: n => Number(n != 1),
  3: n => 0,
  4: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: n => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: n => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: n => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: n => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: n => Number(n >= 2),
  10: n => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: n => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: n => Number(n % 10 != 1 || n % 100 == 11),
  13: n => Number(n !== 0),
  14: n => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: n => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: n => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: n => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: n => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: n => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: n => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
const nonIntlVersions = ['v1', 'v2', 'v3'];
const intlVersions = ['v4'];
const suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
const createRules = () => {
  const rules = {};
  sets.forEach(set => {
    set.lngs.forEach(l => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
class PluralResolver {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create('pluralResolver');
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {
      this.options.compatibilityJSON = 'v3';
      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      const cleanedCode = getCleanedCode(code === 'dev' ? 'en' : code);
      const type = options.ordinal ? 'ordinal' : 'cardinal';
      const cacheKey = JSON.stringify({
        cleanedCode,
        type
      });
      if (cacheKey in this.pluralRulesCache) {
        return this.pluralRulesCache[cacheKey];
      }
      let rule;
      try {
        rule = new Intl.PluralRules(cleanedCode, {
          type
        });
      } catch (err) {
        if (!code.match(/-|_/)) return;
        const lngPart = this.languageUtils.getLanguagePartFromCode(code);
        rule = this.getRule(lngPart, options);
      }
      this.pluralRulesCache[cacheKey] = rule;
      return rule;
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);
    }
    return rule.numbers.map(number => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return '';
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = 'plural';
      } else if (suffix === 1) {
        suffix = '';
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === 'v1') {
      if (suffix === 1) return '';
      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === 'v2') {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
}

const deepFindWithDefaults = function (data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  let path = getPathWithDefaults(data, defaultData, key);
  if (!path && ignoreJSONStructure && isString(key)) {
    path = deepFind(data, key, keySeparator);
    if (path === undefined) path = deepFind(defaultData, key, keySeparator);
  }
  return path;
};
const regexSafe = val => val.replace(/\$/g, '$$$$');
class Interpolator {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('interpolator');
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || (value => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    if (!options.interpolation) options.interpolation = {
      escapeValue: true
    };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== undefined ? escape$1 : escape;
    this.escapeValue = escapeValue !== undefined ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== undefined ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || '{{';
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || '}}';
    this.formatSeparator = formatSeparator || ',';
    this.unescapePrefix = unescapeSuffix ? '' : unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : unescapeSuffix || '';
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(')');
    this.nestingOptionsSeparator = nestingOptionsSeparator || ',';
    this.maxReplaces = maxReplaces || 1000;
    this.alwaysFormat = alwaysFormat !== undefined ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options) this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, 'g');
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = key => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path, undefined, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: val => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach(todo => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === undefined) {
          if (typeof missingInterpolationHandler === 'function') {
            const temp = missingInterpolationHandler(str, match, options);
            value = isString(temp) ? temp : '';
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = '';
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = '';
          }
        } else if (!isString(value) && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0) return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions) clonedOptions = {
          ...inheritedOptions,
          ...clonedOptions
        };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && !isString(clonedOptions.replace) ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && !isString(value)) return value;
      if (!isString(value)) value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = '';
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
}

const parseFormatStr = formatStr => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf('(') > -1) {
    const p = formatStr.split('(');
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === 'currency' && optStr.indexOf(':') < 0) {
      if (!formatOptions.currency) formatOptions.currency = optStr.trim();
    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {
      if (!formatOptions.range) formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(';');
      opts.forEach(opt => {
        if (opt) {
          const [key, ...rest] = opt.split(':');
          const val = rest.join(':').trim().replace(/^'+|'+$/g, '');
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;
          if (val === 'false') formatOptions[trimmedKey] = false;
          if (val === 'true') formatOptions[trimmedKey] = true;
          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
const createCachedFormatter = fn => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: undefined
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
class Formatter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    this.logger = baseLogger.create('formatter');
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: 'currency'
        });
        return val => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return val => formatter.format(val, opt.range || 'day');
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return val => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      interpolation: {}
    };
    this.formatSeparator = options.interpolation.formatSeparator || ',';
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf('(') > 1 && formats[0].indexOf(')') < 0 && formats.find(f => f.indexOf(')') > -1)) {
      const lastIndex = formats.findIndex(f => f.indexOf(')') > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
}

const removePending = (q, name) => {
  if (q.pending[name] !== undefined) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
class Connector extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create('backendConnector');
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach(lng => {
      let hasAllNamespaces = true;
      namespaces.forEach(ns => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {
          if (pending[name] === undefined) pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === undefined) pending[name] = true;
          if (toLoad[name] === undefined) toLoad[name] = true;
          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces) toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    if (err) this.emit('failedLoading', lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, undefined, undefined, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data) this.state[name] = 0;
    const loaded = {};
    this.queue.forEach(q => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err) q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach(l => {
          if (!loaded[l]) loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach(n => {
              if (loaded[l][n] === undefined) loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit('loaded', loaded);
    this.queue = this.queue.filter(q => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : undefined;
    if (!lng.length) return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === 'function') {
          r.then(data => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : undefined;
    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    if (isString(languages)) languages = this.languageUtils.toResolveHierarchy(languages);
    if (isString(namespaces)) namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback();
      return null;
    }
    toLoad.toLoad.forEach(name => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    const s = name.split('|');
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {
      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');
      return;
    }
    if (key === undefined || key === null || key === '') return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === 'function') {
            r.then(data => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
}

const get = () => ({
  debug: false,
  initImmediate: true,
  ns: ['translation'],
  defaultNS: ['translation'],
  fallbackLng: ['dev'],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: 'all',
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: '.',
  nsSeparator: ':',
  pluralSeparator: '_',
  contextSeparator: '_',
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: 'fallback',
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: args => {
    let ret = {};
    if (typeof args[1] === 'object') ret = args[1];
    if (isString(args[1])) ret.defaultValue = args[1];
    if (isString(args[2])) ret.tDescription = args[2];
    if (typeof args[2] === 'object' || typeof args[3] === 'object') {
      const options = args[3] || args[2];
      Object.keys(options).forEach(key => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: value => value,
    prefix: '{{',
    suffix: '}}',
    formatSeparator: ',',
    unescapePrefix: '-',
    nestingPrefix: '$t(',
    nestingSuffix: ')',
    nestingOptionsSeparator: ',',
    maxReplaces: 1000,
    skipOnVariables: true
  }
});
const transformOptions = options => {
  if (isString(options.ns)) options.ns = [options.ns];
  if (isString(options.fallbackLng)) options.fallbackLng = [options.fallbackLng];
  if (isString(options.fallbackNS)) options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {
    options.supportedLngs = options.supportedLngs.concat(['cimode']);
  }
  return options;
};

const noop = () => {};
const bindMemberFunctions = inst => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach(mem => {
    if (typeof inst[mem] === 'function') {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
class I18n extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    this.isInitializing = true;
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (isString(options.ns)) {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf('translation') < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== 'v1') {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== undefined) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== undefined) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = ClassOrObject => {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== 'undefined') {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init) s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on('*', function (event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach(m => {
        if (m.init) m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn('init: no languageDetector is used and no lng is defined');
    }
    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];
    storeApi.forEach(fcName => {
      this[fcName] = function () {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];
    storeApiChained.forEach(fcName => {
      this[fcName] = function () {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');
        this.isInitialized = true;
        if (!this.options.isClone) this.logger.log('initialized', this.options);
        this.emit('initialized', this.options);
        deferred.resolve(t);
        callback(err, t);
      };
      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = isString(language) ? language : this.language;
    if (typeof language === 'function') usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();
      const toLoad = [];
      const append = lng => {
        if (!lng) return;
        if (lng === 'cimode') return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(l => {
          if (l === 'cimode') return;
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(l => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach(l => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, e => {
        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === 'function') {
      callback = lngs;
      lngs = undefined;
    }
    if (typeof ns === 'function') {
      callback = ns;
      ns = undefined;
    }
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    if (!callback) callback = noop;
    this.services.backendConnector.reload(lngs, ns, err => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module) {
    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');
    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');
    if (module.type === 'backend') {
      this.modules.backend = module;
    }
    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }
    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }
    if (module.type === 'i18nFormat') {
      this.modules.i18nFormat = module;
    }
    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }
    if (module.type === 'formatter') {
      this.modules.formatter = module;
    }
    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages) return;
    if (['cimode', 'dev'].indexOf(l) > -1) return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit('languageChanging', lng);
    const setLngProps = l => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = undefined;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = undefined;
        this.emit('languageChanged', l);
        this.logger.log('languageChanged', l);
      } else {
        this.isLanguageChangingTo = undefined;
      }
      deferred.resolve(function () {
        return _this2.t(...arguments);
      });
      if (callback) callback(err, function () {
        return _this2.t(...arguments);
      });
    };
    const setLng = lngs => {
      if (!lng && !lngs && this.services.languageDetector) lngs = [];
      const l = isString(lngs) ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language) this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, err => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function (key, opts) {
      let options;
      if (typeof opts !== 'object') {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== '') options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || '.';
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (isString(lng)) {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === 'cimode') return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== undefined) return preResult;
    }
    if (this.hasResourceBundle(lng, ns)) return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback) callback();
      return Promise.resolve();
    }
    if (isString(ns)) ns = [ns];
    ns.forEach(n => {
      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);
    });
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (isString(lngs)) lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback) callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(err => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng) return 'rtl';
    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : undefined;
    return new I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore) delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new I18n(mergedOptions);
    if (options.debug !== undefined || options.prefix !== undefined) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(m => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on('*', function (event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
}
const instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;

module.exports = instance;


/***/ }),

/***/ "../../node_modules/lodash.debounce/index.js":
/*!***************************************************!*\
  !*** ../../node_modules/lodash.debounce/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = debounce;


/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/I18nextProvider.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/I18nextProvider.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nextProvider: () => (/* binding */ I18nextProvider)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


function I18nextProvider(_ref) {
  let {
    i18n,
    defaultNS,
    children
  } = _ref;
  const value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({
    i18n,
    defaultNS
  }), [i18n, defaultNS]);
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext.Provider, {
    value
  }, children);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Trans.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Trans.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");




function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_2__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const t = tFromProps || i18n && i18n.t.bind(i18n);
  return (0,_TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans)({
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions,
    values,
    defaults,
    components,
    ns: ns || t && t.ns || defaultNSFromContext || i18n && i18n.options && i18n.options.defaultNS,
    i18n,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  });
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/TransWithoutContext.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Trans: () => (/* binding */ Trans),
/* harmony export */   nodesToString: () => (/* binding */ nodesToString)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-parse-stringify */ "../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");





const hasChildren = (node, checkLength) => {
  if (!node) return false;
  const base = node.props ? node.props.children : node.children;
  if (checkLength) return base.length > 0;
  return !!base;
};
const getChildren = node => {
  if (!node) return [];
  const children = node.props ? node.props.children : node.children;
  return node.props && node.props.i18nIsDynamicList ? getAsArray(children) : children;
};
const hasValidReactChildren = children => Array.isArray(children) && children.every(react__WEBPACK_IMPORTED_MODULE_0__.isValidElement);
const getAsArray = data => Array.isArray(data) ? data : [data];
const mergeProps = (source, target) => {
  const newTarget = {
    ...target
  };
  newTarget.props = Object.assign(source.props, target.props);
  return newTarget;
};
const nodesToString = (children, i18nOptions) => {
  if (!children) return '';
  let stringNode = '';
  const childrenArray = getAsArray(children);
  const keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];
  childrenArray.forEach((child, childIndex) => {
    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
      stringNode += `${child}`;
    } else if ((0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) {
      const {
        props,
        type
      } = child;
      const childPropsCount = Object.keys(props).length;
      const shouldKeepChild = keepArray.indexOf(type) > -1;
      const childChildren = props.children;
      if (!childChildren && shouldKeepChild && !childPropsCount) {
        stringNode += `<${type}/>`;
      } else if (!childChildren && (!shouldKeepChild || childPropsCount) || props.i18nIsDynamicList) {
        stringNode += `<${childIndex}></${childIndex}>`;
      } else if (shouldKeepChild && childPropsCount === 1 && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(childChildren)) {
        stringNode += `<${type}>${childChildren}</${type}>`;
      } else {
        const content = nodesToString(childChildren, i18nOptions);
        stringNode += `<${childIndex}>${content}</${childIndex}>`;
      }
    } else if (child === null) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a null child.`);
    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child)) {
      const {
        format,
        ...clone
      } = child;
      const keys = Object.keys(clone);
      if (keys.length === 1) {
        const value = format ? `${keys[0]}, ${format}` : keys[0];
        stringNode += `{{${value}}}`;
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.`, child);
      }
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warn)(`Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.`, child);
    }
  });
  return stringNode;
};
const renderNodes = (children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) => {
  if (targetString === '') return [];
  const keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];
  const emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.map(keep => `<${keep}`).join('|')).test(targetString);
  if (!children && !emptyChildrenButNeedsHandling && !shouldUnescape) return [targetString];
  const data = {};
  const getData = childs => {
    const childrenArray = getAsArray(childs);
    childrenArray.forEach(child => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) return;
      if (hasChildren(child)) getData(getChildren(child));else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)) Object.assign(data, child);
    });
  };
  getData(children);
  const ast = html_parse_stringify__WEBPACK_IMPORTED_MODULE_1__["default"].parse(`<0>${targetString}</0>`);
  const opts = {
    ...data,
    ...combinedTOpts
  };
  const renderInner = (child, node, rootReactNode) => {
    const childs = getChildren(child);
    const mappedChildren = mapAST(childs, node.children, rootReactNode);
    return hasValidReactChildren(childs) && mappedChildren.length === 0 || child.props && child.props.i18nIsDynamicList ? childs : mappedChildren;
  };
  const pushTranslatedJSX = (child, inner, mem, i, isVoid) => {
    if (child.dummy) {
      child.children = inner;
      mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child, {
        key: i
      }, isVoid ? undefined : inner));
    } else {
      mem.push(...react__WEBPACK_IMPORTED_MODULE_0__.Children.map([child], c => {
        const props = {
          ...c.props
        };
        delete props.i18nIsDynamicList;
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(c.type, {
          ...props,
          key: i,
          ref: c.ref
        }, isVoid ? null : inner);
      }));
    }
  };
  const mapAST = (reactNode, astNode, rootReactNode) => {
    const reactNodes = getAsArray(reactNode);
    const astNodes = getAsArray(astNode);
    return astNodes.reduce((mem, node, i) => {
      const translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);
      if (node.type === 'tag') {
        let tmp = reactNodes[parseInt(node.name, 10)];
        if (rootReactNode.length === 1 && !tmp) tmp = rootReactNode[0][node.name];
        if (!tmp) tmp = {};
        const child = Object.keys(node.attrs).length !== 0 ? mergeProps({
          props: node.attrs
        }, tmp) : tmp;
        const isElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child);
        const isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;
        const isEmptyTransWithHTML = emptyChildrenButNeedsHandling && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && child.dummy && !isElement;
        const isKnownComponent = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(children) && Object.hasOwnProperty.call(children, node.name);
        if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(child)) {
          const value = i18n.services.interpolator.interpolate(child, opts, i18n.language);
          mem.push(value);
        } else if (hasChildren(child) || isValidTranslationWithChildren) {
          const inner = renderInner(child, node, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (isEmptyTransWithHTML) {
          const inner = mapAST(reactNodes, node.children, rootReactNode);
          pushTranslatedJSX(child, inner, mem, i);
        } else if (Number.isNaN(parseFloat(node.name))) {
          if (isKnownComponent) {
            const inner = renderInner(child, node, rootReactNode);
            pushTranslatedJSX(child, inner, mem, i, node.voidElement);
          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {
            if (node.voidElement) {
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }));
            } else {
              const inner = mapAST(reactNodes, node.children, rootReactNode);
              mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(node.name, {
                key: `${node.name}-${i}`
              }, inner));
            }
          } else if (node.voidElement) {
            mem.push(`<${node.name} />`);
          } else {
            const inner = mapAST(reactNodes, node.children, rootReactNode);
            mem.push(`<${node.name}>${inner}</${node.name}>`);
          }
        } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(child) && !isElement) {
          const content = node.children[0] ? translationContent : null;
          if (content) mem.push(content);
        } else {
          pushTranslatedJSX(child, translationContent, mem, i, node.children.length !== 1 || !translationContent);
        }
      } else if (node.type === 'text') {
        const wrapTextNodes = i18nOptions.transWrapTextNodes;
        const content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);
        if (wrapTextNodes) {
          mem.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(wrapTextNodes, {
            key: `${node.name}-${i}`
          }, content));
        } else {
          mem.push(content);
        }
      }
      return mem;
    }, []);
  };
  const result = mapAST([{
    dummy: true,
    children: children || []
  }], ast, getAsArray(children || []));
  return getChildren(result[0]);
};
function Trans(_ref) {
  let {
    children,
    count,
    parent,
    i18nKey,
    context,
    tOptions = {},
    values,
    defaults,
    components,
    ns,
    i18n: i18nFromProps,
    t: tFromProps,
    shouldUnescape,
    ...additionalProps
  } = _ref;
  const i18n = i18nFromProps || (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_4__.getI18n)();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using i18nextReactModule');
    return children;
  }
  const t = tFromProps || i18n.t.bind(i18n) || (k => k);
  const reactI18nextOptions = {
    ...(0,_defaults_js__WEBPACK_IMPORTED_MODULE_3__.getDefaults)(),
    ...(i18n.options && i18n.options.react)
  };
  let namespaces = ns || t.ns || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  const nodeAsString = nodesToString(children, reactI18nextOptions);
  const defaultValue = defaults || nodeAsString || reactI18nextOptions.transEmptyNodeValue || i18nKey;
  const {
    hashTransKey
  } = reactI18nextOptions;
  const key = i18nKey || (hashTransKey ? hashTransKey(nodeAsString || defaultValue) : nodeAsString || defaultValue);
  if (i18n.options && i18n.options.interpolation && i18n.options.interpolation.defaultVariables) {
    values = values && Object.keys(values).length > 0 ? {
      ...values,
      ...i18n.options.interpolation.defaultVariables
    } : {
      ...i18n.options.interpolation.defaultVariables
    };
  }
  const interpolationOverride = values || count !== undefined || !children ? tOptions.interpolation : {
    interpolation: {
      ...tOptions.interpolation,
      prefix: '#$?',
      suffix: '?$#'
    }
  };
  const combinedTOpts = {
    ...tOptions,
    context: context || tOptions.context,
    count,
    ...values,
    ...interpolationOverride,
    defaultValue,
    ns: namespaces
  };
  const translation = key ? t(key, combinedTOpts) : defaultValue;
  if (components) {
    Object.keys(components).forEach(c => {
      const comp = components[c];
      if (typeof comp.type === 'function' || !comp.props || !comp.props.children || translation.indexOf(`${c}/>`) < 0 && translation.indexOf(`${c} />`) < 0) return;
      function Componentized() {
        return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, comp);
      }
      components[c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(Componentized);
    });
  }
  const content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);
  const useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;
  return useAsParent ? (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(useAsParent, additionalProps, content) : content;
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/Translation.js":
/*!***************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/Translation.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Translation: () => (/* binding */ Translation)
/* harmony export */ });
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");

function Translation(props) {
  const {
    ns,
    children,
    ...options
  } = props;
  const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_0__.useTranslation)(ns, options);
  return children(t, {
    i18n,
    lng: i18n.language
  }, ready);
}

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/context.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/context.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* binding */ I18nContext),
/* harmony export */   ReportNamespaces: () => (/* binding */ ReportNamespaces),
/* harmony export */   composeInitialProps: () => (/* binding */ composeInitialProps),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n),
/* harmony export */   getInitialProps: () => (/* binding */ getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__.initReactI18next),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_1__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.setI18n)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");





const I18nContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();
class ReportNamespaces {
  constructor() {
    this.usedNamespaces = {};
  }
  addUsedNamespaces(namespaces) {
    namespaces.forEach(ns => {
      if (!this.usedNamespaces[ns]) this.usedNamespaces[ns] = true;
    });
  }
  getUsedNamespaces = () => Object.keys(this.usedNamespaces);
}
const composeInitialProps = ForComponent => async ctx => {
  const componentsInitialProps = ForComponent.getInitialProps ? await ForComponent.getInitialProps(ctx) : {};
  const i18nInitialProps = getInitialProps();
  return {
    ...componentsInitialProps,
    ...i18nInitialProps
  };
};
const getInitialProps = () => {
  const i18n = (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_2__.getI18n)();
  const namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];
  const ret = {};
  const initialI18nStore = {};
  i18n.languages.forEach(l => {
    initialI18nStore[l] = {};
    namespaces.forEach(ns => {
      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};
    });
  });
  ret.initialI18nStore = initialI18nStore;
  ret.initialLanguage = i18n.language;
  return ret;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/defaults.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/defaults.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaults: () => (/* binding */ getDefaults),
/* harmony export */   setDefaults: () => (/* binding */ setDefaults)
/* harmony export */ });
/* harmony import */ var _unescape_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unescape.js */ "../../node_modules/react-i18next/dist/es/unescape.js");

let defaultOptions = {
  bindI18n: 'languageChanged',
  bindI18nStore: '',
  transEmptyNodeValue: '',
  transSupportBasicHtmlNodes: true,
  transWrapTextNodes: '',
  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],
  useSuspense: true,
  unescape: _unescape_js__WEBPACK_IMPORTED_MODULE_0__.unescape
};
const setDefaults = function () {
  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  defaultOptions = {
    ...defaultOptions,
    ...options
  };
};
const getDefaults = () => defaultOptions;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/i18nInstance.js":
/*!****************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/i18nInstance.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getI18n: () => (/* binding */ getI18n),
/* harmony export */   setI18n: () => (/* binding */ setI18n)
/* harmony export */ });
let i18nInstance;
const setI18n = instance => {
  i18nInstance = instance;
};
const getI18n = () => i18nInstance;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/index.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nContext: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.I18nContext),
/* harmony export */   I18nextProvider: () => (/* reexport safe */ _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__.I18nextProvider),
/* harmony export */   Trans: () => (/* reexport safe */ _Trans_js__WEBPACK_IMPORTED_MODULE_0__.Trans),
/* harmony export */   TransWithoutContext: () => (/* reexport safe */ _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__.Trans),
/* harmony export */   Translation: () => (/* reexport safe */ _Translation_js__WEBPACK_IMPORTED_MODULE_4__.Translation),
/* harmony export */   composeInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.composeInitialProps),
/* harmony export */   date: () => (/* binding */ date),
/* harmony export */   getDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.getDefaults),
/* harmony export */   getI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.getI18n),
/* harmony export */   getInitialProps: () => (/* reexport safe */ _context_js__WEBPACK_IMPORTED_MODULE_11__.getInitialProps),
/* harmony export */   initReactI18next: () => (/* reexport safe */ _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__.initReactI18next),
/* harmony export */   number: () => (/* binding */ number),
/* harmony export */   plural: () => (/* binding */ plural),
/* harmony export */   select: () => (/* binding */ select),
/* harmony export */   selectOrdinal: () => (/* binding */ selectOrdinal),
/* harmony export */   setDefaults: () => (/* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_9__.setDefaults),
/* harmony export */   setI18n: () => (/* reexport safe */ _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__.setI18n),
/* harmony export */   time: () => (/* binding */ time),
/* harmony export */   useSSR: () => (/* reexport safe */ _useSSR_js__WEBPACK_IMPORTED_MODULE_7__.useSSR),
/* harmony export */   useTranslation: () => (/* reexport safe */ _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__.useTranslation),
/* harmony export */   withSSR: () => (/* reexport safe */ _withSSR_js__WEBPACK_IMPORTED_MODULE_6__.withSSR),
/* harmony export */   withTranslation: () => (/* reexport safe */ _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__.withTranslation)
/* harmony export */ });
/* harmony import */ var _Trans_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Trans.js */ "../../node_modules/react-i18next/dist/es/Trans.js");
/* harmony import */ var _TransWithoutContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransWithoutContext.js */ "../../node_modules/react-i18next/dist/es/TransWithoutContext.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _withTranslation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./withTranslation.js */ "../../node_modules/react-i18next/dist/es/withTranslation.js");
/* harmony import */ var _Translation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Translation.js */ "../../node_modules/react-i18next/dist/es/Translation.js");
/* harmony import */ var _I18nextProvider_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./I18nextProvider.js */ "../../node_modules/react-i18next/dist/es/I18nextProvider.js");
/* harmony import */ var _withSSR_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./withSSR.js */ "../../node_modules/react-i18next/dist/es/withSSR.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _initReactI18next_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./initReactI18next.js */ "../../node_modules/react-i18next/dist/es/initReactI18next.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");












const date = () => '';
const time = () => '';
const number = () => '';
const select = () => '';
const plural = () => '';
const selectOrdinal = () => '';

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/initReactI18next.js":
/*!********************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/initReactI18next.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initReactI18next: () => (/* binding */ initReactI18next)
/* harmony export */ });
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults.js */ "../../node_modules/react-i18next/dist/es/defaults.js");
/* harmony import */ var _i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./i18nInstance.js */ "../../node_modules/react-i18next/dist/es/i18nInstance.js");


const initReactI18next = {
  type: '3rdParty',
  init(instance) {
    (0,_defaults_js__WEBPACK_IMPORTED_MODULE_0__.setDefaults)(instance.options.react);
    (0,_i18nInstance_js__WEBPACK_IMPORTED_MODULE_1__.setI18n)(instance);
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/unescape.js":
/*!************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/unescape.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unescape: () => (/* binding */ unescape)
/* harmony export */ });
const matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;
const htmlEntities = {
  '&amp;': '&',
  '&#38;': '&',
  '&lt;': '<',
  '&#60;': '<',
  '&gt;': '>',
  '&#62;': '>',
  '&apos;': "'",
  '&#39;': "'",
  '&quot;': '"',
  '&#34;': '"',
  '&nbsp;': ' ',
  '&#160;': ' ',
  '&copy;': '©',
  '&#169;': '©',
  '&reg;': '®',
  '&#174;': '®',
  '&hellip;': '…',
  '&#8230;': '…',
  '&#x2F;': '/',
  '&#47;': '/'
};
const unescapeHtmlEntity = m => htmlEntities[m];
const unescape = text => text.replace(matchHtmlEntity, unescapeHtmlEntity);

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useSSR.js":
/*!**********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useSSR.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useSSR: () => (/* binding */ useSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");


const useSSR = function (initialI18nStore, initialLanguage) {
  let props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n.options && i18n.options.isClone) return;
  if (initialI18nStore && !i18n.initializedStoreOnce) {
    i18n.services.resourceStore.data = initialI18nStore;
    i18n.options.ns = Object.values(initialI18nStore).reduce((mem, lngResources) => {
      Object.keys(lngResources).forEach(ns => {
        if (mem.indexOf(ns) < 0) mem.push(ns);
      });
      return mem;
    }, i18n.options.ns);
    i18n.initializedStoreOnce = true;
    i18n.isInitialized = true;
  }
  if (initialLanguage && !i18n.initializedLanguageOnce) {
    i18n.changeLanguage(initialLanguage);
    i18n.initializedLanguageOnce = true;
  }
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/useTranslation.js":
/*!******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/useTranslation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useTranslation: () => (/* binding */ useTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const usePrevious = (value, ignore) => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    ref.current = ignore ? ref.current : value;
  }, [value, ignore]);
  return ref.current;
};
const alwaysNewT = (i18n, language, namespace, keyPrefix) => i18n.getFixedT(language, namespace, keyPrefix);
const useMemoizedT = (i18n, language, namespace, keyPrefix) => (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(alwaysNewT(i18n, language, namespace, keyPrefix), [i18n, language, namespace, keyPrefix]);
const useTranslation = function (ns) {
  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  const {
    i18n: i18nFromProps
  } = props;
  const {
    i18n: i18nFromContext,
    defaultNS: defaultNSFromContext
  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_js__WEBPACK_IMPORTED_MODULE_1__.I18nContext) || {};
  const i18n = i18nFromProps || i18nFromContext || (0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getI18n)();
  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new _context_js__WEBPACK_IMPORTED_MODULE_1__.ReportNamespaces();
  if (!i18n) {
    (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('You will need to pass in an i18next instance by using initReactI18next');
    const notReadyT = (k, optsOrDefaultValue) => {
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue)) return optsOrDefaultValue;
      if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(optsOrDefaultValue) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(optsOrDefaultValue.defaultValue)) return optsOrDefaultValue.defaultValue;
      return Array.isArray(k) ? k[k.length - 1] : k;
    };
    const retNotReady = [notReadyT, {}, false];
    retNotReady.t = notReadyT;
    retNotReady.i18n = {};
    retNotReady.ready = false;
    return retNotReady;
  }
  if (i18n.options.react && i18n.options.react.wait !== undefined) (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.warnOnce)('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');
  const i18nOptions = {
    ...(0,_context_js__WEBPACK_IMPORTED_MODULE_1__.getDefaults)(),
    ...i18n.options.react,
    ...props
  };
  const {
    useSuspense,
    keyPrefix
  } = i18nOptions;
  let namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;
  namespaces = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isString)(namespaces) ? [namespaces] : namespaces || ['translation'];
  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);
  const ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(n => (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.hasLoadedNamespace)(n, i18n, i18nOptions));
  const memoGetT = useMemoizedT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const getT = () => memoGetT;
  const getNewT = () => alwaysNewT(i18n, props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);
  const [t, setT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getT);
  let joinedNS = namespaces.join();
  if (props.lng) joinedNS = `${props.lng}${joinedNS}`;
  const previousJoinedNS = usePrevious(joinedNS);
  const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    const {
      bindI18n,
      bindI18nStore
    } = i18nOptions;
    isMounted.current = true;
    if (!ready && !useSuspense) {
      if (props.lng) {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      } else {
        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => {
          if (isMounted.current) setT(getNewT);
        });
      }
    }
    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {
      setT(getNewT);
    }
    const boundReset = () => {
      if (isMounted.current) setT(getNewT);
    };
    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);
    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);
    return () => {
      isMounted.current = false;
      if (bindI18n && i18n) bindI18n.split(' ').forEach(e => i18n.off(e, boundReset));
      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(e => i18n.store.off(e, boundReset));
    };
  }, [i18n, joinedNS]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (isMounted.current && ready) {
      setT(getT);
    }
  }, [i18n, keyPrefix, ready]);
  const ret = [t, i18n, ready];
  ret.t = t;
  ret.i18n = i18n;
  ret.ready = ready;
  if (ready) return ret;
  if (!ready && !useSuspense) return ret;
  throw new Promise(resolve => {
    if (props.lng) {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadLanguages)(i18n, props.lng, namespaces, () => resolve());
    } else {
      (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.loadNamespaces)(i18n, namespaces, () => resolve());
    }
  });
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/utils.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDisplayName: () => (/* binding */ getDisplayName),
/* harmony export */   hasLoadedNamespace: () => (/* binding */ hasLoadedNamespace),
/* harmony export */   isObject: () => (/* binding */ isObject),
/* harmony export */   isString: () => (/* binding */ isString),
/* harmony export */   loadLanguages: () => (/* binding */ loadLanguages),
/* harmony export */   loadNamespaces: () => (/* binding */ loadNamespaces),
/* harmony export */   warn: () => (/* binding */ warn),
/* harmony export */   warnOnce: () => (/* binding */ warnOnce)
/* harmony export */ });
function warn() {
  if (console && console.warn) {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (isString(args[0])) args[0] = `react-i18next:: ${args[0]}`;
    console.warn(...args);
  }
}
const alreadyWarned = {};
function warnOnce() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }
  if (isString(args[0]) && alreadyWarned[args[0]]) return;
  if (isString(args[0])) alreadyWarned[args[0]] = new Date();
  warn(...args);
}
const loadedClb = (i18n, cb) => () => {
  if (i18n.isInitialized) {
    cb();
  } else {
    const initialized = () => {
      setTimeout(() => {
        i18n.off('initialized', initialized);
      }, 0);
      cb();
    };
    i18n.on('initialized', initialized);
  }
};
const loadNamespaces = (i18n, ns, cb) => {
  i18n.loadNamespaces(ns, loadedClb(i18n, cb));
};
const loadLanguages = (i18n, lng, ns, cb) => {
  if (isString(ns)) ns = [ns];
  ns.forEach(n => {
    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);
  });
  i18n.loadLanguages(lng, loadedClb(i18n, cb));
};
const oldI18nextHasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const lng = i18n.languages[0];
  const fallbackLng = i18n.options ? i18n.options.fallbackLng : false;
  const lastLng = i18n.languages[i18n.languages.length - 1];
  if (lng.toLowerCase() === 'cimode') return true;
  const loadNotPending = (l, n) => {
    const loadState = i18n.services.backendConnector.state[`${l}|${n}`];
    return loadState === -1 || loadState === 2;
  };
  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;
  if (i18n.hasResourceBundle(lng, ns)) return true;
  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;
  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
  return false;
};
const hasLoadedNamespace = function (ns, i18n) {
  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  if (!i18n.languages || !i18n.languages.length) {
    warnOnce('i18n.languages were undefined or empty', i18n.languages);
    return true;
  }
  const isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;
  if (!isNewerI18next) {
    return oldI18nextHasLoadedNamespace(ns, i18n, options);
  }
  return i18n.hasLoadedNamespace(ns, {
    lng: options.lng,
    precheck: (i18nInstance, loadNotPending) => {
      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;
    }
  });
};
const getDisplayName = Component => Component.displayName || Component.name || (isString(Component) && Component.length > 0 ? Component : 'Unknown');
const isString = obj => typeof obj === 'string';
const isObject = obj => typeof obj === 'object' && obj !== null;

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withSSR.js":
/*!***********************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withSSR.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withSSR: () => (/* binding */ withSSR)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useSSR_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useSSR.js */ "../../node_modules/react-i18next/dist/es/useSSR.js");
/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ "../../node_modules/react-i18next/dist/es/context.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");




const withSSR = () => function Extend(WrappedComponent) {
  function I18nextWithSSR(_ref) {
    let {
      initialI18nStore,
      initialLanguage,
      ...rest
    } = _ref;
    (0,_useSSR_js__WEBPACK_IMPORTED_MODULE_1__.useSSR)(initialI18nStore, initialLanguage);
    return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, {
      ...rest
    });
  }
  I18nextWithSSR.getInitialProps = (0,_context_js__WEBPACK_IMPORTED_MODULE_2__.composeInitialProps)(WrappedComponent);
  I18nextWithSSR.displayName = `withI18nextSSR(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.getDisplayName)(WrappedComponent)})`;
  I18nextWithSSR.WrappedComponent = WrappedComponent;
  return I18nextWithSSR;
};

/***/ }),

/***/ "../../node_modules/react-i18next/dist/es/withTranslation.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/react-i18next/dist/es/withTranslation.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withTranslation: () => (/* binding */ withTranslation)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../node_modules/react/index.js");
/* harmony import */ var _useTranslation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTranslation.js */ "../../node_modules/react-i18next/dist/es/useTranslation.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "../../node_modules/react-i18next/dist/es/utils.js");



const withTranslation = function (ns) {
  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return function Extend(WrappedComponent) {
    function I18nextWithTranslation(_ref) {
      let {
        forwardedRef,
        ...rest
      } = _ref;
      const [t, i18n, ready] = (0,_useTranslation_js__WEBPACK_IMPORTED_MODULE_1__.useTranslation)(ns, {
        ...rest,
        keyPrefix: options.keyPrefix
      });
      const passDownProps = {
        ...rest,
        t,
        i18n,
        tReady: ready
      };
      if (options.withRef && forwardedRef) {
        passDownProps.ref = forwardedRef;
      } else if (!options.withRef && forwardedRef) {
        passDownProps.forwardedRef = forwardedRef;
      }
      return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(WrappedComponent, passDownProps);
    }
    I18nextWithTranslation.displayName = `withI18nextTranslation(${(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getDisplayName)(WrappedComponent)})`;
    I18nextWithTranslation.WrappedComponent = WrappedComponent;
    const forwardRef = (props, ref) => (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(I18nextWithTranslation, Object.assign({}, props, {
      forwardedRef: ref
    }));
    return options.withRef ? (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(forwardRef) : I18nextWithTranslation;
  };
};

/***/ }),

/***/ "../../node_modules/react/cjs/react.development.js":
/*!*********************************************************!*\
  !*** ../../node_modules/react/cjs/react.development.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

/* module decorator */ module = __webpack_require__.nmd(module);
/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */


 true &&
  (function () {
    function defineDeprecationWarning(methodName, info) {
      Object.defineProperty(Component.prototype, methodName, {
        get: function () {
          console.warn(
            "%s(...) is deprecated in plain JavaScript React classes. %s",
            info[0],
            info[1]
          );
        }
      });
    }
    function getIteratorFn(maybeIterable) {
      if (null === maybeIterable || "object" !== typeof maybeIterable)
        return null;
      maybeIterable =
        (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||
        maybeIterable["@@iterator"];
      return "function" === typeof maybeIterable ? maybeIterable : null;
    }
    function warnNoop(publicInstance, callerName) {
      publicInstance =
        ((publicInstance = publicInstance.constructor) &&
          (publicInstance.displayName || publicInstance.name)) ||
        "ReactClass";
      var warningKey = publicInstance + "." + callerName;
      didWarnStateUpdateForUnmountedComponent[warningKey] ||
        (console.error(
          "Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",
          callerName,
          publicInstance
        ),
        (didWarnStateUpdateForUnmountedComponent[warningKey] = !0));
    }
    function Component(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function ComponentDummy() {}
    function PureComponent(props, context, updater) {
      this.props = props;
      this.context = context;
      this.refs = emptyObject;
      this.updater = updater || ReactNoopUpdateQueue;
    }
    function testStringCoercion(value) {
      return "" + value;
    }
    function checkKeyStringCoercion(value) {
      try {
        testStringCoercion(value);
        var JSCompiler_inline_result = !1;
      } catch (e) {
        JSCompiler_inline_result = !0;
      }
      if (JSCompiler_inline_result) {
        JSCompiler_inline_result = console;
        var JSCompiler_temp_const = JSCompiler_inline_result.error;
        var JSCompiler_inline_result$jscomp$0 =
          ("function" === typeof Symbol &&
            Symbol.toStringTag &&
            value[Symbol.toStringTag]) ||
          value.constructor.name ||
          "Object";
        JSCompiler_temp_const.call(
          JSCompiler_inline_result,
          "The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",
          JSCompiler_inline_result$jscomp$0
        );
        return testStringCoercion(value);
      }
    }
    function getComponentNameFromType(type) {
      if (null == type) return null;
      if ("function" === typeof type)
        return type.$$typeof === REACT_CLIENT_REFERENCE
          ? null
          : type.displayName || type.name || null;
      if ("string" === typeof type) return type;
      switch (type) {
        case REACT_FRAGMENT_TYPE:
          return "Fragment";
        case REACT_PROFILER_TYPE:
          return "Profiler";
        case REACT_STRICT_MODE_TYPE:
          return "StrictMode";
        case REACT_SUSPENSE_TYPE:
          return "Suspense";
        case REACT_SUSPENSE_LIST_TYPE:
          return "SuspenseList";
        case REACT_ACTIVITY_TYPE:
          return "Activity";
      }
      if ("object" === typeof type)
        switch (
          ("number" === typeof type.tag &&
            console.error(
              "Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."
            ),
          type.$$typeof)
        ) {
          case REACT_PORTAL_TYPE:
            return "Portal";
          case REACT_CONTEXT_TYPE:
            return (type.displayName || "Context") + ".Provider";
          case REACT_CONSUMER_TYPE:
            return (type._context.displayName || "Context") + ".Consumer";
          case REACT_FORWARD_REF_TYPE:
            var innerType = type.render;
            type = type.displayName;
            type ||
              ((type = innerType.displayName || innerType.name || ""),
              (type = "" !== type ? "ForwardRef(" + type + ")" : "ForwardRef"));
            return type;
          case REACT_MEMO_TYPE:
            return (
              (innerType = type.displayName || null),
              null !== innerType
                ? innerType
                : getComponentNameFromType(type.type) || "Memo"
            );
          case REACT_LAZY_TYPE:
            innerType = type._payload;
            type = type._init;
            try {
              return getComponentNameFromType(type(innerType));
            } catch (x) {}
        }
      return null;
    }
    function getTaskName(type) {
      if (type === REACT_FRAGMENT_TYPE) return "<>";
      if (
        "object" === typeof type &&
        null !== type &&
        type.$$typeof === REACT_LAZY_TYPE
      )
        return "<...>";
      try {
        var name = getComponentNameFromType(type);
        return name ? "<" + name + ">" : "<...>";
      } catch (x) {
        return "<...>";
      }
    }
    function getOwner() {
      var dispatcher = ReactSharedInternals.A;
      return null === dispatcher ? null : dispatcher.getOwner();
    }
    function UnknownOwner() {
      return Error("react-stack-top-frame");
    }
    function hasValidKey(config) {
      if (hasOwnProperty.call(config, "key")) {
        var getter = Object.getOwnPropertyDescriptor(config, "key").get;
        if (getter && getter.isReactWarning) return !1;
      }
      return void 0 !== config.key;
    }
    function defineKeyPropWarningGetter(props, displayName) {
      function warnAboutAccessingKey() {
        specialPropKeyWarningShown ||
          ((specialPropKeyWarningShown = !0),
          console.error(
            "%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",
            displayName
          ));
      }
      warnAboutAccessingKey.isReactWarning = !0;
      Object.defineProperty(props, "key", {
        get: warnAboutAccessingKey,
        configurable: !0
      });
    }
    function elementRefGetterWithDeprecationWarning() {
      var componentName = getComponentNameFromType(this.type);
      didWarnAboutElementRef[componentName] ||
        ((didWarnAboutElementRef[componentName] = !0),
        console.error(
          "Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release."
        ));
      componentName = this.props.ref;
      return void 0 !== componentName ? componentName : null;
    }
    function ReactElement(
      type,
      key,
      self,
      source,
      owner,
      props,
      debugStack,
      debugTask
    ) {
      self = props.ref;
      type = {
        $$typeof: REACT_ELEMENT_TYPE,
        type: type,
        key: key,
        props: props,
        _owner: owner
      };
      null !== (void 0 !== self ? self : null)
        ? Object.defineProperty(type, "ref", {
            enumerable: !1,
            get: elementRefGetterWithDeprecationWarning
          })
        : Object.defineProperty(type, "ref", { enumerable: !1, value: null });
      type._store = {};
      Object.defineProperty(type._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: 0
      });
      Object.defineProperty(type, "_debugInfo", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: null
      });
      Object.defineProperty(type, "_debugStack", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugStack
      });
      Object.defineProperty(type, "_debugTask", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: debugTask
      });
      Object.freeze && (Object.freeze(type.props), Object.freeze(type));
      return type;
    }
    function cloneAndReplaceKey(oldElement, newKey) {
      newKey = ReactElement(
        oldElement.type,
        newKey,
        void 0,
        void 0,
        oldElement._owner,
        oldElement.props,
        oldElement._debugStack,
        oldElement._debugTask
      );
      oldElement._store &&
        (newKey._store.validated = oldElement._store.validated);
      return newKey;
    }
    function isValidElement(object) {
      return (
        "object" === typeof object &&
        null !== object &&
        object.$$typeof === REACT_ELEMENT_TYPE
      );
    }
    function escape(key) {
      var escaperLookup = { "=": "=0", ":": "=2" };
      return (
        "$" +
        key.replace(/[=:]/g, function (match) {
          return escaperLookup[match];
        })
      );
    }
    function getElementKey(element, index) {
      return "object" === typeof element &&
        null !== element &&
        null != element.key
        ? (checkKeyStringCoercion(element.key), escape("" + element.key))
        : index.toString(36);
    }
    function noop$1() {}
    function resolveThenable(thenable) {
      switch (thenable.status) {
        case "fulfilled":
          return thenable.value;
        case "rejected":
          throw thenable.reason;
        default:
          switch (
            ("string" === typeof thenable.status
              ? thenable.then(noop$1, noop$1)
              : ((thenable.status = "pending"),
                thenable.then(
                  function (fulfilledValue) {
                    "pending" === thenable.status &&
                      ((thenable.status = "fulfilled"),
                      (thenable.value = fulfilledValue));
                  },
                  function (error) {
                    "pending" === thenable.status &&
                      ((thenable.status = "rejected"),
                      (thenable.reason = error));
                  }
                )),
            thenable.status)
          ) {
            case "fulfilled":
              return thenable.value;
            case "rejected":
              throw thenable.reason;
          }
      }
      throw thenable;
    }
    function mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {
      var type = typeof children;
      if ("undefined" === type || "boolean" === type) children = null;
      var invokeCallback = !1;
      if (null === children) invokeCallback = !0;
      else
        switch (type) {
          case "bigint":
          case "string":
          case "number":
            invokeCallback = !0;
            break;
          case "object":
            switch (children.$$typeof) {
              case REACT_ELEMENT_TYPE:
              case REACT_PORTAL_TYPE:
                invokeCallback = !0;
                break;
              case REACT_LAZY_TYPE:
                return (
                  (invokeCallback = children._init),
                  mapIntoArray(
                    invokeCallback(children._payload),
                    array,
                    escapedPrefix,
                    nameSoFar,
                    callback
                  )
                );
            }
        }
      if (invokeCallback) {
        invokeCallback = children;
        callback = callback(invokeCallback);
        var childKey =
          "" === nameSoFar ? "." + getElementKey(invokeCallback, 0) : nameSoFar;
        isArrayImpl(callback)
          ? ((escapedPrefix = ""),
            null != childKey &&
              (escapedPrefix =
                childKey.replace(userProvidedKeyEscapeRegex, "$&/") + "/"),
            mapIntoArray(callback, array, escapedPrefix, "", function (c) {
              return c;
            }))
          : null != callback &&
            (isValidElement(callback) &&
              (null != callback.key &&
                ((invokeCallback && invokeCallback.key === callback.key) ||
                  checkKeyStringCoercion(callback.key)),
              (escapedPrefix = cloneAndReplaceKey(
                callback,
                escapedPrefix +
                  (null == callback.key ||
                  (invokeCallback && invokeCallback.key === callback.key)
                    ? ""
                    : ("" + callback.key).replace(
                        userProvidedKeyEscapeRegex,
                        "$&/"
                      ) + "/") +
                  childKey
              )),
              "" !== nameSoFar &&
                null != invokeCallback &&
                isValidElement(invokeCallback) &&
                null == invokeCallback.key &&
                invokeCallback._store &&
                !invokeCallback._store.validated &&
                (escapedPrefix._store.validated = 2),
              (callback = escapedPrefix)),
            array.push(callback));
        return 1;
      }
      invokeCallback = 0;
      childKey = "" === nameSoFar ? "." : nameSoFar + ":";
      if (isArrayImpl(children))
        for (var i = 0; i < children.length; i++)
          (nameSoFar = children[i]),
            (type = childKey + getElementKey(nameSoFar, i)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if (((i = getIteratorFn(children)), "function" === typeof i))
        for (
          i === children.entries &&
            (didWarnAboutMaps ||
              console.warn(
                "Using Maps as children is not supported. Use an array of keyed ReactElements instead."
              ),
            (didWarnAboutMaps = !0)),
            children = i.call(children),
            i = 0;
          !(nameSoFar = children.next()).done;

        )
          (nameSoFar = nameSoFar.value),
            (type = childKey + getElementKey(nameSoFar, i++)),
            (invokeCallback += mapIntoArray(
              nameSoFar,
              array,
              escapedPrefix,
              type,
              callback
            ));
      else if ("object" === type) {
        if ("function" === typeof children.then)
          return mapIntoArray(
            resolveThenable(children),
            array,
            escapedPrefix,
            nameSoFar,
            callback
          );
        array = String(children);
        throw Error(
          "Objects are not valid as a React child (found: " +
            ("[object Object]" === array
              ? "object with keys {" + Object.keys(children).join(", ") + "}"
              : array) +
            "). If you meant to render a collection of children, use an array instead."
        );
      }
      return invokeCallback;
    }
    function mapChildren(children, func, context) {
      if (null == children) return children;
      var result = [],
        count = 0;
      mapIntoArray(children, result, "", "", function (child) {
        return func.call(context, child, count++);
      });
      return result;
    }
    function lazyInitializer(payload) {
      if (-1 === payload._status) {
        var ctor = payload._result;
        ctor = ctor();
        ctor.then(
          function (moduleObject) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 1), (payload._result = moduleObject);
          },
          function (error) {
            if (0 === payload._status || -1 === payload._status)
              (payload._status = 2), (payload._result = error);
          }
        );
        -1 === payload._status &&
          ((payload._status = 0), (payload._result = ctor));
      }
      if (1 === payload._status)
        return (
          (ctor = payload._result),
          void 0 === ctor &&
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))\n\nDid you accidentally put curly braces around the import?",
              ctor
            ),
          "default" in ctor ||
            console.error(
              "lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",
              ctor
            ),
          ctor.default
        );
      throw payload._result;
    }
    function resolveDispatcher() {
      var dispatcher = ReactSharedInternals.H;
      null === dispatcher &&
        console.error(
          "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem."
        );
      return dispatcher;
    }
    function noop() {}
    function enqueueTask(task) {
      if (null === enqueueTaskImpl)
        try {
          var requireString = ("require" + Math.random()).slice(0, 7);
          enqueueTaskImpl = (module && module[requireString]).call(
            module,
            "timers"
          ).setImmediate;
        } catch (_err) {
          enqueueTaskImpl = function (callback) {
            !1 === didWarnAboutMessageChannel &&
              ((didWarnAboutMessageChannel = !0),
              "undefined" === typeof MessageChannel &&
                console.error(
                  "This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."
                ));
            var channel = new MessageChannel();
            channel.port1.onmessage = callback;
            channel.port2.postMessage(void 0);
          };
        }
      return enqueueTaskImpl(task);
    }
    function aggregateErrors(errors) {
      return 1 < errors.length && "function" === typeof AggregateError
        ? new AggregateError(errors)
        : errors[0];
    }
    function popActScope(prevActQueue, prevActScopeDepth) {
      prevActScopeDepth !== actScopeDepth - 1 &&
        console.error(
          "You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "
        );
      actScopeDepth = prevActScopeDepth;
    }
    function recursivelyFlushAsyncActWork(returnValue, resolve, reject) {
      var queue = ReactSharedInternals.actQueue;
      if (null !== queue)
        if (0 !== queue.length)
          try {
            flushActQueue(queue);
            enqueueTask(function () {
              return recursivelyFlushAsyncActWork(returnValue, resolve, reject);
            });
            return;
          } catch (error) {
            ReactSharedInternals.thrownErrors.push(error);
          }
        else ReactSharedInternals.actQueue = null;
      0 < ReactSharedInternals.thrownErrors.length
        ? ((queue = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          reject(queue))
        : resolve(returnValue);
    }
    function flushActQueue(queue) {
      if (!isFlushing) {
        isFlushing = !0;
        var i = 0;
        try {
          for (; i < queue.length; i++) {
            var callback = queue[i];
            do {
              ReactSharedInternals.didUsePromise = !1;
              var continuation = callback(!1);
              if (null !== continuation) {
                if (ReactSharedInternals.didUsePromise) {
                  queue[i] = callback;
                  queue.splice(0, i);
                  return;
                }
                callback = continuation;
              } else break;
            } while (1);
          }
          queue.length = 0;
        } catch (error) {
          queue.splice(0, i + 1), ReactSharedInternals.thrownErrors.push(error);
        } finally {
          isFlushing = !1;
        }
      }
    }
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var REACT_ELEMENT_TYPE = Symbol.for("react.transitional.element"),
      REACT_PORTAL_TYPE = Symbol.for("react.portal"),
      REACT_FRAGMENT_TYPE = Symbol.for("react.fragment"),
      REACT_STRICT_MODE_TYPE = Symbol.for("react.strict_mode"),
      REACT_PROFILER_TYPE = Symbol.for("react.profiler");
    Symbol.for("react.provider");
    var REACT_CONSUMER_TYPE = Symbol.for("react.consumer"),
      REACT_CONTEXT_TYPE = Symbol.for("react.context"),
      REACT_FORWARD_REF_TYPE = Symbol.for("react.forward_ref"),
      REACT_SUSPENSE_TYPE = Symbol.for("react.suspense"),
      REACT_SUSPENSE_LIST_TYPE = Symbol.for("react.suspense_list"),
      REACT_MEMO_TYPE = Symbol.for("react.memo"),
      REACT_LAZY_TYPE = Symbol.for("react.lazy"),
      REACT_ACTIVITY_TYPE = Symbol.for("react.activity"),
      MAYBE_ITERATOR_SYMBOL = Symbol.iterator,
      didWarnStateUpdateForUnmountedComponent = {},
      ReactNoopUpdateQueue = {
        isMounted: function () {
          return !1;
        },
        enqueueForceUpdate: function (publicInstance) {
          warnNoop(publicInstance, "forceUpdate");
        },
        enqueueReplaceState: function (publicInstance) {
          warnNoop(publicInstance, "replaceState");
        },
        enqueueSetState: function (publicInstance) {
          warnNoop(publicInstance, "setState");
        }
      },
      assign = Object.assign,
      emptyObject = {};
    Object.freeze(emptyObject);
    Component.prototype.isReactComponent = {};
    Component.prototype.setState = function (partialState, callback) {
      if (
        "object" !== typeof partialState &&
        "function" !== typeof partialState &&
        null != partialState
      )
        throw Error(
          "takes an object of state variables to update or a function which returns an object of state variables."
        );
      this.updater.enqueueSetState(this, partialState, callback, "setState");
    };
    Component.prototype.forceUpdate = function (callback) {
      this.updater.enqueueForceUpdate(this, callback, "forceUpdate");
    };
    var deprecatedAPIs = {
        isMounted: [
          "isMounted",
          "Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."
        ],
        replaceState: [
          "replaceState",
          "Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."
        ]
      },
      fnName;
    for (fnName in deprecatedAPIs)
      deprecatedAPIs.hasOwnProperty(fnName) &&
        defineDeprecationWarning(fnName, deprecatedAPIs[fnName]);
    ComponentDummy.prototype = Component.prototype;
    deprecatedAPIs = PureComponent.prototype = new ComponentDummy();
    deprecatedAPIs.constructor = PureComponent;
    assign(deprecatedAPIs, Component.prototype);
    deprecatedAPIs.isPureReactComponent = !0;
    var isArrayImpl = Array.isArray,
      REACT_CLIENT_REFERENCE = Symbol.for("react.client.reference"),
      ReactSharedInternals = {
        H: null,
        A: null,
        T: null,
        S: null,
        V: null,
        actQueue: null,
        isBatchingLegacy: !1,
        didScheduleLegacyUpdate: !1,
        didUsePromise: !1,
        thrownErrors: [],
        getCurrentStack: null,
        recentlyCreatedOwnerStacks: 0
      },
      hasOwnProperty = Object.prototype.hasOwnProperty,
      createTask = console.createTask
        ? console.createTask
        : function () {
            return null;
          };
    deprecatedAPIs = {
      react_stack_bottom_frame: function (callStackForError) {
        return callStackForError();
      }
    };
    var specialPropKeyWarningShown, didWarnAboutOldJSXRuntime;
    var didWarnAboutElementRef = {};
    var unknownOwnerDebugStack = deprecatedAPIs.react_stack_bottom_frame.bind(
      deprecatedAPIs,
      UnknownOwner
    )();
    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));
    var didWarnAboutMaps = !1,
      userProvidedKeyEscapeRegex = /\/+/g,
      reportGlobalError =
        "function" === typeof reportError
          ? reportError
          : function (error) {
              if (
                "object" === typeof window &&
                "function" === typeof window.ErrorEvent
              ) {
                var event = new window.ErrorEvent("error", {
                  bubbles: !0,
                  cancelable: !0,
                  message:
                    "object" === typeof error &&
                    null !== error &&
                    "string" === typeof error.message
                      ? String(error.message)
                      : String(error),
                  error: error
                });
                if (!window.dispatchEvent(event)) return;
              } else if (
                "object" === typeof process &&
                "function" === typeof process.emit
              ) {
                process.emit("uncaughtException", error);
                return;
              }
              console.error(error);
            },
      didWarnAboutMessageChannel = !1,
      enqueueTaskImpl = null,
      actScopeDepth = 0,
      didWarnNoAwaitAct = !1,
      isFlushing = !1,
      queueSeveralMicrotasks =
        "function" === typeof queueMicrotask
          ? function (callback) {
              queueMicrotask(function () {
                return queueMicrotask(callback);
              });
            }
          : enqueueTask;
    deprecatedAPIs = Object.freeze({
      __proto__: null,
      c: function (size) {
        return resolveDispatcher().useMemoCache(size);
      }
    });
    exports.Children = {
      map: mapChildren,
      forEach: function (children, forEachFunc, forEachContext) {
        mapChildren(
          children,
          function () {
            forEachFunc.apply(this, arguments);
          },
          forEachContext
        );
      },
      count: function (children) {
        var n = 0;
        mapChildren(children, function () {
          n++;
        });
        return n;
      },
      toArray: function (children) {
        return (
          mapChildren(children, function (child) {
            return child;
          }) || []
        );
      },
      only: function (children) {
        if (!isValidElement(children))
          throw Error(
            "React.Children.only expected to receive a single React element child."
          );
        return children;
      }
    };
    exports.Component = Component;
    exports.Fragment = REACT_FRAGMENT_TYPE;
    exports.Profiler = REACT_PROFILER_TYPE;
    exports.PureComponent = PureComponent;
    exports.StrictMode = REACT_STRICT_MODE_TYPE;
    exports.Suspense = REACT_SUSPENSE_TYPE;
    exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =
      ReactSharedInternals;
    exports.__COMPILER_RUNTIME = deprecatedAPIs;
    exports.act = function (callback) {
      var prevActQueue = ReactSharedInternals.actQueue,
        prevActScopeDepth = actScopeDepth;
      actScopeDepth++;
      var queue = (ReactSharedInternals.actQueue =
          null !== prevActQueue ? prevActQueue : []),
        didAwaitActCall = !1;
      try {
        var result = callback();
      } catch (error) {
        ReactSharedInternals.thrownErrors.push(error);
      }
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          (popActScope(prevActQueue, prevActScopeDepth),
          (callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      if (
        null !== result &&
        "object" === typeof result &&
        "function" === typeof result.then
      ) {
        var thenable = result;
        queueSeveralMicrotasks(function () {
          didAwaitActCall ||
            didWarnNoAwaitAct ||
            ((didWarnNoAwaitAct = !0),
            console.error(
              "You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"
            ));
        });
        return {
          then: function (resolve, reject) {
            didAwaitActCall = !0;
            thenable.then(
              function (returnValue) {
                popActScope(prevActQueue, prevActScopeDepth);
                if (0 === prevActScopeDepth) {
                  try {
                    flushActQueue(queue),
                      enqueueTask(function () {
                        return recursivelyFlushAsyncActWork(
                          returnValue,
                          resolve,
                          reject
                        );
                      });
                  } catch (error$0) {
                    ReactSharedInternals.thrownErrors.push(error$0);
                  }
                  if (0 < ReactSharedInternals.thrownErrors.length) {
                    var _thrownError = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    );
                    ReactSharedInternals.thrownErrors.length = 0;
                    reject(_thrownError);
                  }
                } else resolve(returnValue);
              },
              function (error) {
                popActScope(prevActQueue, prevActScopeDepth);
                0 < ReactSharedInternals.thrownErrors.length
                  ? ((error = aggregateErrors(
                      ReactSharedInternals.thrownErrors
                    )),
                    (ReactSharedInternals.thrownErrors.length = 0),
                    reject(error))
                  : reject(error);
              }
            );
          }
        };
      }
      var returnValue$jscomp$0 = result;
      popActScope(prevActQueue, prevActScopeDepth);
      0 === prevActScopeDepth &&
        (flushActQueue(queue),
        0 !== queue.length &&
          queueSeveralMicrotasks(function () {
            didAwaitActCall ||
              didWarnNoAwaitAct ||
              ((didWarnNoAwaitAct = !0),
              console.error(
                "A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"
              ));
          }),
        (ReactSharedInternals.actQueue = null));
      if (0 < ReactSharedInternals.thrownErrors.length)
        throw (
          ((callback = aggregateErrors(ReactSharedInternals.thrownErrors)),
          (ReactSharedInternals.thrownErrors.length = 0),
          callback)
        );
      return {
        then: function (resolve, reject) {
          didAwaitActCall = !0;
          0 === prevActScopeDepth
            ? ((ReactSharedInternals.actQueue = queue),
              enqueueTask(function () {
                return recursivelyFlushAsyncActWork(
                  returnValue$jscomp$0,
                  resolve,
                  reject
                );
              }))
            : resolve(returnValue$jscomp$0);
        }
      };
    };
    exports.cache = function (fn) {
      return function () {
        return fn.apply(null, arguments);
      };
    };
    exports.captureOwnerStack = function () {
      var getCurrentStack = ReactSharedInternals.getCurrentStack;
      return null === getCurrentStack ? null : getCurrentStack();
    };
    exports.cloneElement = function (element, config, children) {
      if (null === element || void 0 === element)
        throw Error(
          "The argument must be a React element, but you passed " +
            element +
            "."
        );
      var props = assign({}, element.props),
        key = element.key,
        owner = element._owner;
      if (null != config) {
        var JSCompiler_inline_result;
        a: {
          if (
            hasOwnProperty.call(config, "ref") &&
            (JSCompiler_inline_result = Object.getOwnPropertyDescriptor(
              config,
              "ref"
            ).get) &&
            JSCompiler_inline_result.isReactWarning
          ) {
            JSCompiler_inline_result = !1;
            break a;
          }
          JSCompiler_inline_result = void 0 !== config.ref;
        }
        JSCompiler_inline_result && (owner = getOwner());
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (key = "" + config.key));
        for (propName in config)
          !hasOwnProperty.call(config, propName) ||
            "key" === propName ||
            "__self" === propName ||
            "__source" === propName ||
            ("ref" === propName && void 0 === config.ref) ||
            (props[propName] = config[propName]);
      }
      var propName = arguments.length - 2;
      if (1 === propName) props.children = children;
      else if (1 < propName) {
        JSCompiler_inline_result = Array(propName);
        for (var i = 0; i < propName; i++)
          JSCompiler_inline_result[i] = arguments[i + 2];
        props.children = JSCompiler_inline_result;
      }
      props = ReactElement(
        element.type,
        key,
        void 0,
        void 0,
        owner,
        props,
        element._debugStack,
        element._debugTask
      );
      for (key = 2; key < arguments.length; key++)
        (owner = arguments[key]),
          isValidElement(owner) && owner._store && (owner._store.validated = 1);
      return props;
    };
    exports.createContext = function (defaultValue) {
      defaultValue = {
        $$typeof: REACT_CONTEXT_TYPE,
        _currentValue: defaultValue,
        _currentValue2: defaultValue,
        _threadCount: 0,
        Provider: null,
        Consumer: null
      };
      defaultValue.Provider = defaultValue;
      defaultValue.Consumer = {
        $$typeof: REACT_CONSUMER_TYPE,
        _context: defaultValue
      };
      defaultValue._currentRenderer = null;
      defaultValue._currentRenderer2 = null;
      return defaultValue;
    };
    exports.createElement = function (type, config, children) {
      for (var i = 2; i < arguments.length; i++) {
        var node = arguments[i];
        isValidElement(node) && node._store && (node._store.validated = 1);
      }
      i = {};
      node = null;
      if (null != config)
        for (propName in (didWarnAboutOldJSXRuntime ||
          !("__self" in config) ||
          "key" in config ||
          ((didWarnAboutOldJSXRuntime = !0),
          console.warn(
            "Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform"
          )),
        hasValidKey(config) &&
          (checkKeyStringCoercion(config.key), (node = "" + config.key)),
        config))
          hasOwnProperty.call(config, propName) &&
            "key" !== propName &&
            "__self" !== propName &&
            "__source" !== propName &&
            (i[propName] = config[propName]);
      var childrenLength = arguments.length - 2;
      if (1 === childrenLength) i.children = children;
      else if (1 < childrenLength) {
        for (
          var childArray = Array(childrenLength), _i = 0;
          _i < childrenLength;
          _i++
        )
          childArray[_i] = arguments[_i + 2];
        Object.freeze && Object.freeze(childArray);
        i.children = childArray;
      }
      if (type && type.defaultProps)
        for (propName in ((childrenLength = type.defaultProps), childrenLength))
          void 0 === i[propName] && (i[propName] = childrenLength[propName]);
      node &&
        defineKeyPropWarningGetter(
          i,
          "function" === typeof type
            ? type.displayName || type.name || "Unknown"
            : type
        );
      var propName = 1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;
      return ReactElement(
        type,
        node,
        void 0,
        void 0,
        getOwner(),
        i,
        propName ? Error("react-stack-top-frame") : unknownOwnerDebugStack,
        propName ? createTask(getTaskName(type)) : unknownOwnerDebugTask
      );
    };
    exports.createRef = function () {
      var refObject = { current: null };
      Object.seal(refObject);
      return refObject;
    };
    exports.forwardRef = function (render) {
      null != render && render.$$typeof === REACT_MEMO_TYPE
        ? console.error(
            "forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."
          )
        : "function" !== typeof render
          ? console.error(
              "forwardRef requires a render function but was given %s.",
              null === render ? "null" : typeof render
            )
          : 0 !== render.length &&
            2 !== render.length &&
            console.error(
              "forwardRef render functions accept exactly two parameters: props and ref. %s",
              1 === render.length
                ? "Did you forget to use the ref parameter?"
                : "Any additional parameter will be undefined."
            );
      null != render &&
        null != render.defaultProps &&
        console.error(
          "forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?"
        );
      var elementType = { $$typeof: REACT_FORWARD_REF_TYPE, render: render },
        ownName;
      Object.defineProperty(elementType, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          render.name ||
            render.displayName ||
            (Object.defineProperty(render, "name", { value: name }),
            (render.displayName = name));
        }
      });
      return elementType;
    };
    exports.isValidElement = isValidElement;
    exports.lazy = function (ctor) {
      return {
        $$typeof: REACT_LAZY_TYPE,
        _payload: { _status: -1, _result: ctor },
        _init: lazyInitializer
      };
    };
    exports.memo = function (type, compare) {
      null == type &&
        console.error(
          "memo: The first argument must be a component. Instead received: %s",
          null === type ? "null" : typeof type
        );
      compare = {
        $$typeof: REACT_MEMO_TYPE,
        type: type,
        compare: void 0 === compare ? null : compare
      };
      var ownName;
      Object.defineProperty(compare, "displayName", {
        enumerable: !1,
        configurable: !0,
        get: function () {
          return ownName;
        },
        set: function (name) {
          ownName = name;
          type.name ||
            type.displayName ||
            (Object.defineProperty(type, "name", { value: name }),
            (type.displayName = name));
        }
      });
      return compare;
    };
    exports.startTransition = function (scope) {
      var prevTransition = ReactSharedInternals.T,
        currentTransition = {};
      ReactSharedInternals.T = currentTransition;
      currentTransition._updatedFibers = new Set();
      try {
        var returnValue = scope(),
          onStartTransitionFinish = ReactSharedInternals.S;
        null !== onStartTransitionFinish &&
          onStartTransitionFinish(currentTransition, returnValue);
        "object" === typeof returnValue &&
          null !== returnValue &&
          "function" === typeof returnValue.then &&
          returnValue.then(noop, reportGlobalError);
      } catch (error) {
        reportGlobalError(error);
      } finally {
        null === prevTransition &&
          currentTransition._updatedFibers &&
          ((scope = currentTransition._updatedFibers.size),
          currentTransition._updatedFibers.clear(),
          10 < scope &&
            console.warn(
              "Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."
            )),
          (ReactSharedInternals.T = prevTransition);
      }
    };
    exports.unstable_useCacheRefresh = function () {
      return resolveDispatcher().useCacheRefresh();
    };
    exports.use = function (usable) {
      return resolveDispatcher().use(usable);
    };
    exports.useActionState = function (action, initialState, permalink) {
      return resolveDispatcher().useActionState(
        action,
        initialState,
        permalink
      );
    };
    exports.useCallback = function (callback, deps) {
      return resolveDispatcher().useCallback(callback, deps);
    };
    exports.useContext = function (Context) {
      var dispatcher = resolveDispatcher();
      Context.$$typeof === REACT_CONSUMER_TYPE &&
        console.error(
          "Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"
        );
      return dispatcher.useContext(Context);
    };
    exports.useDebugValue = function (value, formatterFn) {
      return resolveDispatcher().useDebugValue(value, formatterFn);
    };
    exports.useDeferredValue = function (value, initialValue) {
      return resolveDispatcher().useDeferredValue(value, initialValue);
    };
    exports.useEffect = function (create, createDeps, update) {
      null == create &&
        console.warn(
          "React Hook useEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      var dispatcher = resolveDispatcher();
      if ("function" === typeof update)
        throw Error(
          "useEffect CRUD overload is not enabled in this build of React."
        );
      return dispatcher.useEffect(create, createDeps);
    };
    exports.useId = function () {
      return resolveDispatcher().useId();
    };
    exports.useImperativeHandle = function (ref, create, deps) {
      return resolveDispatcher().useImperativeHandle(ref, create, deps);
    };
    exports.useInsertionEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useInsertionEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useInsertionEffect(create, deps);
    };
    exports.useLayoutEffect = function (create, deps) {
      null == create &&
        console.warn(
          "React Hook useLayoutEffect requires an effect callback. Did you forget to pass a callback to the hook?"
        );
      return resolveDispatcher().useLayoutEffect(create, deps);
    };
    exports.useMemo = function (create, deps) {
      return resolveDispatcher().useMemo(create, deps);
    };
    exports.useOptimistic = function (passthrough, reducer) {
      return resolveDispatcher().useOptimistic(passthrough, reducer);
    };
    exports.useReducer = function (reducer, initialArg, init) {
      return resolveDispatcher().useReducer(reducer, initialArg, init);
    };
    exports.useRef = function (initialValue) {
      return resolveDispatcher().useRef(initialValue);
    };
    exports.useState = function (initialState) {
      return resolveDispatcher().useState(initialState);
    };
    exports.useSyncExternalStore = function (
      subscribe,
      getSnapshot,
      getServerSnapshot
    ) {
      return resolveDispatcher().useSyncExternalStore(
        subscribe,
        getSnapshot,
        getServerSnapshot
      );
    };
    exports.useTransition = function () {
      return resolveDispatcher().useTransition();
    };
    exports.version = "19.1.1";
    "undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&
      "function" ===
        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&
      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  })();


/***/ }),

/***/ "../../node_modules/react/index.js":
/*!*****************************************!*\
  !*** ../../node_modules/react/index.js ***!
  \*****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



if (false) // removed by dead control flow
{} else {
  module.exports = __webpack_require__(/*! ./cjs/react.development.js */ "../../node_modules/react/cjs/react.development.js");
}


/***/ }),

/***/ "../../node_modules/title-case/dist.es2015/index.js":
/*!**********************************************************!*\
  !*** ../../node_modules/title-case/dist.es2015/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   titleCase: () => (/* binding */ titleCase)
/* harmony export */ });
var SMALL_WORDS = /\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i;
var TOKENS = /[^\s:–—-]+|./g;
var WHITESPACE = /\s/;
var IS_MANUAL_CASE = /.(?=[A-Z]|\..)/;
var ALPHANUMERIC_PATTERN = /[A-Za-z0-9\u00C0-\u00FF]/;
function titleCase(input) {
    var result = "";
    var m;
    // tslint:disable-next-line
    while ((m = TOKENS.exec(input)) !== null) {
        var token = m[0], index = m.index;
        if (
        // Ignore already capitalized words.
        !IS_MANUAL_CASE.test(token) &&
            // Ignore small words except at beginning or end.
            (!SMALL_WORDS.test(token) ||
                index === 0 ||
                index + token.length === input.length) &&
            // Ignore URLs.
            (input.charAt(index + token.length) !== ":" ||
                WHITESPACE.test(input.charAt(index + token.length + 1)))) {
            // Find and uppercase first word character, skips over *modifiers*.
            result += token.replace(ALPHANUMERIC_PATTERN, function (m) { return m.toUpperCase(); });
            continue;
        }
        result += token;
    }
    return result;
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/void-elements/index.js":
/*!*************************************************!*\
  !*** ../../node_modules/void-elements/index.js ***!
  \*************************************************/
/***/ ((module) => {

/**
 * This file automatically generated from `pre-publish.js`.
 * Do not manually edit.
 */

module.exports = {
  "area": true,
  "base": true,
  "br": true,
  "col": true,
  "embed": true,
  "hr": true,
  "img": true,
  "input": true,
  "link": true,
  "meta": true,
  "param": true,
  "source": true,
  "track": true,
  "wbr": true
};


/***/ }),

/***/ "./client/src/ms365-integration.ts":
/*!*****************************************!*\
  !*** ./client/src/ms365-integration.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Microsoft365Integration: () => (/* binding */ Microsoft365Integration)
/* harmony export */ });
/* harmony import */ var _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openfin/microsoft365 */ "../../node_modules/@openfin/microsoft365/openfin.ms365.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openfin/workspace */ "../../node_modules/@openfin/workspace/index.js");
/* harmony import */ var _openfin_workspace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__);


/**
 * Implement the integration provider for microsoft 365 results.
 */
class Microsoft365Integration {
    /**
     * Create a new instance of Microsoft365Provider.
     */
    constructor() {
        this._profileImageCache = {};
        this._teamsAndChannelsCache = [];
        this._cacheCounter = 0;
    }
    /**
     * Initialize the module.
     * @param definition The definition of the module from configuration include custom options.
     * @param definition.id The id to use when the integration is used as a module.
     * @param definition.title The title to use when the integration is used as a module.
     * @param definition.data The settings for the module.
     * @param loggerCreator For logging entries.
     * @param helpers Helper methods for the module to interact with the application core.
     * @returns Nothing.
     */
    async initialize(definition, loggerCreator, helpers) {
        this._definition = definition;
        this._settings = definition.data;
        this._integrationHelpers = helpers;
        this._definition.title ??= "Microsoft 365";
        this._settings.graphExplorerPrefix ??= "ms";
        this._logger = loggerCreator(this._definition.title);
        this._logger.info(`Initializing ${this._definition.title}`);
        if (!this._settings.clientId) {
            this._logger.error("Configuration is missing clientId");
            return;
        }
        if (!this._settings.tenantId) {
            this._logger.error("Configuration is missing tenantId");
            return;
        }
        await this.connectToMS365();
        // For themed icons we fetch the svg content so that we can replace colors
        // when they are used, instead of linking directly to the source
        const themedIcons = [
            "calendar",
            "call",
            "channel",
            "chat",
            "contact",
            "email",
            "share",
            "team",
            "file",
            "folder"
        ];
        for (const themedIcon of themedIcons) {
            const response = await fetch(this._settings.images[themedIcon]);
            const svg = await response.text();
            this._settings.images[themedIcon] = this.svgToInline(svg);
        }
    }
    /**
     * The module is being deregistered.
     * @returns Nothing.
     */
    async closedown() {
        if (this._ms365Connection) {
            this._logger?.info("Disconnecting from MS Graph API");
            await this._ms365Connection.disconnect();
            this._ms365Connection = undefined;
        }
        if (this._cacheIntervalId) {
            window.clearInterval(this._cacheIntervalId);
            this._cacheIntervalId = undefined;
        }
    }
    /**
     * Get a list of the static help entries.
     * @returns The list of help entries.
     */
    async getHelpSearchEntries() {
        if (this._integrationHelpers) {
            const additionalDescription = [];
            const additionalHelp = [];
            if (!this._settings?.disableGraphExplorer) {
                additionalDescription.push(`You can also specify a query as a graph explorer path and parameters, by using the /${this._settings?.graphExplorerPrefix} prefix`);
                additionalHelp.push(`/${this._settings?.graphExplorerPrefix}/me`, `/${this._settings?.graphExplorerPrefix}/users?$filter=startsWith(displayName,'john')`);
            }
            return [
                {
                    key: `${this._definition?.id}-help1`,
                    score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
                    title: this._definition?.title ?? "",
                    label: "Help",
                    icon: this._settings?.images.microsoft365,
                    actions: [],
                    data: {
                        providerId: this._definition?.id
                    },
                    template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
                    templateContent: await this._integrationHelpers?.templateHelpers.createHelp("Microsoft 365", [
                        "The Microsoft 365 integration can be used to search multiple data source in your platform.",
                        "Using a freeform query will search the content of Users, Contacts, E-mail, Events, Chat Messages, Teams and Channels"
                    ].concat(additionalDescription), additionalHelp)
                },
                {
                    key: `${this._definition?.id}-help2`,
                    score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
                    title: `${this._definition?.title} Recent`,
                    label: "Help",
                    icon: this._settings?.images.microsoft365,
                    actions: [],
                    data: {
                        providerId: this._definition?.id,
                        populateQuery: "/recent"
                    },
                    template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
                    templateContent: await this._integrationHelpers?.templateHelpers.createHelp("Microsoft 365 Recent", ["Running this command will retrieve the most recent files from MS365"], ["/recent"])
                }
            ];
        }
        return [];
    }
    /**
     * Get entries to show while the integration is searching.
     * @param query The query to search for.
     * @param lastResponse The last search response used for updating existing results.
     * @param options Options for the search query.
     * @param options.queryMinLength The minimum length before a query is actioned.
     * @param options.queryAgainst The fields in the data to query against.
     * @param options.isSuggestion Is the query from a suggestion.
     * @returns The list of results and new filters.
     */
    async getSearchResultsProgress(query, lastResponse, options) {
        if (!this._ms365Connection && this._integrationHelpers) {
            const themeClient = await this._integrationHelpers.getThemeClient();
            this._connectLastResponse = lastResponse;
            const results = [];
            if (this._connectionError) {
                const connectResult = await this.createConnectResult(this._integrationHelpers.templateHelpers, await themeClient.getPalette());
                if (connectResult) {
                    results.push(connectResult);
                }
            }
            return results;
        }
        const minLength = options?.queryMinLength ?? 3;
        return query.length >= minLength ? [this.createSearchingResult()] : [];
    }
    /**
     * Get a list of search results based on the query and filters.
     * @param query The query to search for.
     * @param filters The filters to apply.
     * @param lastResponse The last search response used for updating existing results.
     * @param options Options for the search query.
     * @param options.queryMinLength The minimum length of the query before showing results.
     * @param options.queryAgainst The field to search against.
     * @returns The list of results and new filters.
     */
    async getSearchResults(query, filters, lastResponse, options) {
        const isRecent = query === "/recent";
        const defaultFilters = isRecent
            ? ["File"]
            : ["User", "Contact", "Event", "Message", "Channel", "Team", "ChatMessage", "File"];
        const minLength = options?.queryMinLength ?? 3;
        if (this._ms365Connection && this._integrationHelpers) {
            const themeClient = await this._integrationHelpers.getThemeClient();
            const palette = await themeClient.getPalette();
            try {
                // If query starts with ms just do a passthrough to the graph API
                if (!this._settings?.disableGraphExplorer &&
                    query.startsWith(`/${this._settings?.graphExplorerPrefix}/`)) {
                    const path = query.replace(`/${this._settings?.graphExplorerPrefix}/`, "");
                    if (path.length > 0) {
                        const fullPath = `/v1.0/${path}`;
                        this._logger?.info("Graph API Request", fullPath);
                        const response = await this._ms365Connection.executeApiRequest(fullPath);
                        const jsonResult = await this.createGraphJsonResult(this._integrationHelpers.templateHelpers, palette, response);
                        lastResponse.respond([jsonResult]);
                    }
                }
                else if (isRecent || (query.length >= minLength && !query.startsWith("/"))) {
                    const ms365Filter = filters?.find((f) => f.id === Microsoft365Integration._MS365_FILTERS);
                    let includeOptions = [...defaultFilters];
                    if (ms365Filter?.options && Array.isArray(ms365Filter.options)) {
                        includeOptions = ms365Filter.options
                            .filter((o) => o.isSelected)
                            .map((o) => o.value);
                    }
                    const batchRequests = [];
                    if (includeOptions.includes("User")) {
                        const userSearchFields = [
                            "displayName",
                            "givenName",
                            "surname",
                            "department",
                            "jobTitle",
                            "mobilePhone"
                        ];
                        const userSearchQuery = userSearchFields.map((s) => `"${s}:${query}"`).join(" OR ");
                        batchRequests.push({
                            id: "User",
                            method: "GET",
                            url: `/users?$search=${encodeURIComponent(userSearchQuery)}&$top=10`,
                            headers: {
                                ConsistencyLevel: "eventual"
                            }
                        });
                    }
                    if (includeOptions.includes("Contact")) {
                        const contactSearchQuery = `"${query}"`;
                        batchRequests.push({
                            id: "Contact",
                            method: "GET",
                            url: `/me/contacts?$search=${encodeURIComponent(contactSearchQuery)}&$top=10`
                        });
                    }
                    if (includeOptions.includes("Message")) {
                        const messageSearchQuery = `"${query}"`;
                        batchRequests.push({
                            id: "Message",
                            method: "GET",
                            url: `/me/messages?$select=sender,subject,bodyPreview,receivedDateTime,webLink&$search=${encodeURIComponent(messageSearchQuery)}&$top=10`
                        });
                    }
                    if (includeOptions.includes("Event")) {
                        batchRequests.push({
                            id: "Event",
                            url: "/search/query",
                            method: "POST",
                            body: {
                                requests: [
                                    {
                                        entityTypes: ["event"],
                                        query: {
                                            queryString: query
                                        },
                                        from: 0,
                                        size: 10
                                    }
                                ]
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        });
                    }
                    if (includeOptions.includes("ChatMessage")) {
                        batchRequests.push({
                            id: "ChatMessage",
                            url: "/search/query",
                            method: "POST",
                            body: {
                                requests: [
                                    {
                                        entityTypes: ["chatMessage"],
                                        query: {
                                            queryString: query
                                        },
                                        from: 0,
                                        size: 10
                                    }
                                ]
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        });
                    }
                    if (includeOptions.includes("File")) {
                        const fileSearchQuery = `'${query}'`;
                        batchRequests.push({
                            id: "File",
                            url: isRecent
                                ? "/me/drive/recent"
                                : `/me/drive/root/search(q=${encodeURIComponent(fileSearchQuery)})?$top=10&$orderby=lastModifiedDateTime desc&$expand=thumbnails`,
                            method: "GET"
                        });
                    }
                    const homeResults = await this.sendBatchQuery(query, includeOptions, batchRequests);
                    if (includeOptions.includes("Team") || includeOptions.includes("Channel")) {
                        const lowerQuery = query.toLowerCase();
                        for (const teamAndChannels of this._teamsAndChannelsCache) {
                            if (includeOptions.includes("Team") &&
                                (teamAndChannels.team.displayName?.toLowerCase().includes(lowerQuery) ??
                                    teamAndChannels.team.description?.toLowerCase().includes(lowerQuery))) {
                                homeResults.push(await this.createLoadingResult(this._integrationHelpers.templateHelpers, palette, teamAndChannels.team, "displayName", "Team"));
                            }
                            if (includeOptions.includes("Channel")) {
                                for (const channel of teamAndChannels.channels) {
                                    if (channel.displayName?.toLowerCase().includes(lowerQuery) ??
                                        channel.description?.toLowerCase().includes(lowerQuery)) {
                                        homeResults.push(await this.createLoadingResult(this._integrationHelpers.templateHelpers, palette, {
                                            ...channel,
                                            team: teamAndChannels.team
                                        }, "displayName", "Channel"));
                                    }
                                }
                            }
                        }
                    }
                    lastResponse.respond(homeResults);
                    const resultTypes = new Set();
                    for (const searchResult of homeResults) {
                        if (searchResult.label) {
                            resultTypes.add(searchResult.label);
                        }
                    }
                    const newFilters = resultTypes.entries();
                    lastResponse.updateContext({
                        filters: [
                            {
                                id: Microsoft365Integration._MS365_FILTERS,
                                title: "Microsoft 365",
                                options: [...newFilters].map((f) => ({
                                    value: f[0],
                                    isSelected: true
                                }))
                            }
                        ]
                    });
                }
            }
            catch (err) {
                const message = err instanceof Error ? err.message : err;
                lastResponse.respond([
                    await this.createGraphJsonResult(this._integrationHelpers.templateHelpers, palette, {
                        status: 400,
                        data: message
                    })
                ]);
            }
        }
        lastResponse.revoke(`${this._definition?.id}-searching`);
        return {
            results: []
        };
    }
    /**
     * An entry has been selected.
     * @param result The dispatched result.
     * @param lastResponse The last response.
     * @returns True if the item was handled.
     */
    async itemSelection(result, lastResponse) {
        if (result.action.trigger === "focus-change") {
            if (result.data?.state === "loading" && this._ms365Connection && this._integrationHelpers) {
                const themeClient = await this._integrationHelpers.getThemeClient();
                const palette = await themeClient.getPalette();
                const templateHelpers = this._integrationHelpers.templateHelpers;
                const actionData = result.data;
                const objType = actionData.objType;
                const resultHandlers = {
                    User: async () => this.createUserResult(templateHelpers, palette, actionData.obj),
                    Contact: async () => this.createContactResult(templateHelpers, palette, actionData.obj),
                    Message: async () => this.createMessageResult(templateHelpers, palette, actionData.obj),
                    Event: async () => this.createEventResult(templateHelpers, palette, actionData.obj),
                    ChatMessage: async () => this.createChatMessageResult(templateHelpers, palette, actionData.obj),
                    Channel: async () => this.createChannelResult(templateHelpers, palette, actionData.obj),
                    Team: async () => this.createTeamResult(templateHelpers, palette, actionData.obj),
                    File: async () => this.createFileResult(templateHelpers, palette, actionData.obj)
                };
                const typeHandler = resultHandlers[objType];
                if (typeHandler) {
                    const res = await typeHandler();
                    if (res) {
                        lastResponse.respond([res]);
                    }
                }
            }
            return true;
        }
        else if (result.action.trigger === "user-action") {
            return this.handleAction(result.action.name, result.data, lastResponse);
        }
        return false;
    }
    /**
     * Connect to the graph API.
     */
    async connectToMS365() {
        try {
            if (!this._settings?.clientId || !this._settings?.tenantId || !this._settings?.redirectUri) {
                throw new Error("Configuration missing clientId, tenantId or redirectUri");
            }
            this._logger?.info("Connecting to MS Graph API", {
                clientId: this._settings.clientId,
                tenantId: this._settings.tenantId,
                redirectUri: this._settings.redirectUri
            });
            if (this._settings.enableLibLogging) {
                (0,_openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.enableLogging)();
            }
            this._connectionError = undefined;
            this._ms365Connection = await (0,_openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.connect)(this._settings.clientId, this._settings.tenantId, this._settings.redirectUri, this._settings.permissions);
            this._cacheIntervalId = window.setInterval(async () => this.updateCache(), 30000);
            window.setTimeout(async () => {
                await this.updateCache();
            }, 0);
            if (this._connectLastResponse) {
                this._connectLastResponse.revoke(`${this._definition?.id}-connect`);
                this._connectLastResponse = undefined;
            }
        }
        catch (err) {
            this._ms365Connection = undefined;
            this._connectionError = this.formatError(err);
            this._logger?.error("Connecting to MS Graph API failed", err);
            if (this._connectLastResponse && this._integrationHelpers) {
                const themeClient = await this._integrationHelpers.getThemeClient();
                this._connectLastResponse.respond([
                    await this.createConnectResult(this._integrationHelpers.templateHelpers, await themeClient.getPalette())
                ]);
            }
        }
    }
    /**
     * Handle an action from a home template.
     * @param actionName The name of the action.
     * @param actionData The data associated with the action.
     * @param lastResponse The last response in case we need to update the results.
     * @returns True if the action was handled.
     */
    async handleAction(actionName, actionData, lastResponse) {
        switch (actionName) {
            case Microsoft365Integration._ACTION_CONNECT:
                lastResponse.revoke(`${this._definition?.id}-connect`);
                await this.connectToMS365();
                return true;
            case Microsoft365Integration._ACTION_TEAMS_CALL:
                return this.handleTeamsCall(actionData);
            case Microsoft365Integration._ACTION_TEAMS_MEETING:
                return this.handleTeamsMeeting(actionData);
            case Microsoft365Integration._ACTION_TEAMS_CHAT:
                return this.handleTeamsChat(actionData);
            case Microsoft365Integration._ACTION_OUTLOOK_EMAIL:
                return this.handleOutlookMail(actionData);
            case Microsoft365Integration._ACTION_OUTLOOK_EVENT:
                return this.handleOutlookEvent(actionData);
            case Microsoft365Integration._ACTION_PHONE_CALL:
                return this.handlePhoneCall(actionData);
            case Microsoft365Integration._ACTION_SHARE_CONTACT:
                return this.handleShareContact(actionData);
            case Microsoft365Integration._ACTION_COPY:
                return this.handleCopy(actionData);
            default:
                if (actionName.startsWith(Microsoft365Integration._ACTION_OPEN)) {
                    return this.handleOpen(actionName, actionData);
                }
                return false;
        }
    }
    /**
     * Handle a teams call.
     * @param actionData The data for the call.
     * @returns True if it was handled.
     */
    async handleTeamsCall(actionData) {
        if (this._ms365Connection) {
            this._logger?.info("Teams Call", actionData.emails);
            const teamsConnection = new _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.TeamsConnection(this._ms365Connection);
            await teamsConnection.startCall(actionData.emails);
            return true;
        }
        this._logger?.error("No connection");
        return false;
    }
    /**
     * Handle a teams meeting.
     * @param actionData The data for the meeting.
     * @returns True if it was handled.
     */
    async handleTeamsMeeting(actionData) {
        if (this._ms365Connection && actionData.emails) {
            this._logger?.info("Teams Meeting", this._ms365Connection.currentUser.mail, actionData.emails);
            await fin.System.openUrlWithBrowser(`${Microsoft365Integration._TEAMS_PROTOCOL}/l/meeting/new?attendees=${this._ms365Connection.currentUser.mail},${actionData.emails.join(",")}`);
            return true;
        }
        this._logger?.error("No connection, or action emails", actionData.emails);
        return false;
    }
    /**
     * Handle a teams chat.
     * @param actionData The data for the chat.
     * @returns True if it was handled.
     */
    async handleTeamsChat(actionData) {
        if (this._ms365Connection?.currentUser?.mail) {
            this._logger?.info("Teams Chat", this._ms365Connection.currentUser.mail, actionData.teamId, actionData.channelId, actionData.emails);
            const teamsConnection = new _openfin_microsoft365__WEBPACK_IMPORTED_MODULE_0__.TeamsConnection(this._ms365Connection);
            if (actionData.chatId && actionData.messageId) {
                await fin.System.openUrlWithBrowser(`${Microsoft365Integration._TEAMS_PROTOCOL}/l/message/${actionData.chatId}/${actionData.messageId}`);
            }
            else if (actionData.teamId) {
                await teamsConnection.startChat({ teamId: actionData.teamId, channelId: actionData.channelId });
            }
            else if (actionData.emails) {
                await teamsConnection.startChat({
                    emailAddresses: [this._ms365Connection.currentUser.mail, ...actionData.emails]
                });
            }
            return true;
        }
        this._logger?.error("No connection user mail, or action emails", this._ms365Connection?.currentUser?.mail, actionData.emails);
        return false;
    }
    /**
     * Handle an outlook email.
     * @param actionData The data for the email.
     * @returns True if it was handled.
     */
    async handleOutlookMail(actionData) {
        if (this._integrationHelpers && this._ms365Connection && actionData.emails) {
            this._logger?.info("Open Outlook Mail", actionData.emails);
            const response = await this._ms365Connection.executeApiRequest("/v1.0/me/messages", "POST", {
                toRecipients: actionData.emails.map((e) => ({
                    emailAddress: {
                        address: e
                    }
                }))
            });
            if (response?.data?.webLink) {
                await this._integrationHelpers.launchView({ url: response.data.webLink });
                return true;
            }
            this._logger?.error("No webLink in response data", response.data);
        }
        return false;
    }
    /**
     * Handle an outlook event.
     * @param actionData The data for the event.
     * @returns True if it was handled.
     */
    async handleOutlookEvent(actionData) {
        if (this._integrationHelpers && this._ms365Connection && actionData.emails) {
            this._logger?.info("Open Outlook Event", actionData.emails);
            const response = await this._ms365Connection.executeApiRequest("/v1.0/me/events", "POST", {
                attendees: actionData.emails.map((e) => ({
                    emailAddress: {
                        address: e
                    }
                }))
            });
            if (response?.data?.webLink) {
                await this._integrationHelpers.launchView({ url: response.data.webLink });
                return true;
            }
            this._logger?.error("No webLink in response data", response.data);
        }
        return false;
    }
    /**
     * Handle a phone call.
     * @param actionData The data for the call.
     * @returns True if it was handled.
     */
    async handlePhoneCall(actionData) {
        this._logger?.info("Phone Call", actionData.phone);
        await fin.System.openUrlWithBrowser(`tel:${actionData.phone}`);
        return true;
    }
    /**
     * Handle open of a url.
     * @param actionName The name of the action.
     * @param actionData The data for the url opening.
     * @returns True if the url was opened.
     */
    async handleOpen(actionName, actionData) {
        const linkIndex = actionName.indexOf("_");
        const u = linkIndex < 0 ? actionData.url : actionData.urls?.[actionName.slice(linkIndex + 1)];
        if (u) {
            this._logger?.info("Open", u);
            if (u.startsWith(Microsoft365Integration._TEAMS_URL)) {
                await fin.System.openUrlWithBrowser(u.replace(Microsoft365Integration._TEAMS_URL, Microsoft365Integration._TEAMS_PROTOCOL));
            }
            else if (this._integrationHelpers) {
                await this._integrationHelpers.launchView({ url: u });
            }
            return true;
        }
        this._logger?.error(`Url not found in actionData, linkIndex ${linkIndex}`);
        return false;
    }
    /**
     * Handle sharing a contact.
     * @param actionData The data for the sharing.
     * @returns True if the url was opened.
     */
    async handleShareContact(actionData) {
        if (actionData?.emails?.[0]) {
            const fdc3Contact = {
                type: "fdc3.contact",
                name: actionData.name,
                id: {
                    email: actionData.emails[0]
                }
            };
            if (window.fdc3) {
                this._logger?.info("Share Contact", fdc3Contact);
                await window?.fdc3.raiseIntent("ViewContact", fdc3Contact);
                return true;
            }
            this._logger?.error("FDC3 API is not available so ViewContact cannot be raised.", fdc3Contact);
            return false;
        }
        this._logger?.error("No contact information to share", actionData.emails);
        return false;
    }
    /**
     * Handle copy to clipboard for JSON data.
     * @param actionData The data for copying.
     * @returns True if the url was opened.
     */
    async handleCopy(actionData) {
        this._logger?.info("Copy JSON", actionData.json);
        await fin.Clipboard.writeText({ data: JSON.stringify(actionData.json, undefined, "\t") });
        return true;
    }
    /**
     * Send a batch query to the MS365 graph.
     * @param query The query to send.
     * @param includeOptions The object types to include.
     * @param batchRequests The batch requests to send.
     * @returns The results to display in home.
     */
    async sendBatchQuery(query, includeOptions, batchRequests) {
        const homeResults = [];
        if (this._ms365Connection && this._integrationHelpers) {
            this._logger?.info("Graph API Batch Request", batchRequests);
            try {
                const batchResponses = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests
                });
                if (batchResponses.data?.responses && Array.isArray(batchResponses.data.responses)) {
                    const themeClient = await this._integrationHelpers.getThemeClient();
                    const palette = await themeClient.getPalette();
                    for (const batchResponse of batchResponses.data.responses) {
                        if (batchResponse.status === 200) {
                            this._logger?.info(`${batchResponse.id} Response`, batchResponse.body);
                            await this.handleBatchQueryResponse(this._integrationHelpers.templateHelpers, palette, includeOptions, batchResponse, homeResults);
                        }
                        else {
                            this._logger?.error(`${batchResponse.id} Response Failed`, batchResponse.status, batchResponse.body);
                        }
                    }
                }
            }
            catch (err) {
                this._logger?.error("Batch Response Failed", err);
            }
        }
        else {
            this._logger?.error("No connection for sending batch request");
        }
        return homeResults;
    }
    /**
     * Handle the response from a batch query.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param includeOptions The object types that were included in the batch request.
     * @param batchResponse The response from the query.
     * @param homeResults The results for the responses.
     */
    async handleBatchQueryResponse(templateHelpers, palette, includeOptions, batchResponse, homeResults) {
        const type = batchResponse.id.split("-")[0];
        if (includeOptions.includes(type)) {
            if (type === "User") {
                const users = batchResponse.body.value;
                if (users?.length) {
                    for (const u of users) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, u, "displayName", "User"));
                    }
                }
            }
            else if (type === "Contact") {
                const contacts = batchResponse.body.value;
                if (contacts?.length) {
                    for (const c of contacts) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, c, "displayName", "Contact"));
                    }
                }
            }
            else if (type === "Message") {
                const messages = batchResponse.body.value;
                if (messages?.length) {
                    for (const msg of messages.filter((m) => m.subject && !m.subject.startsWith("Canceled") && !m.subject.startsWith("Undeliverable"))) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, msg, "subject", "Message"));
                    }
                }
            }
            else if (type === "Event") {
                const graphResponse = batchResponse.body;
                const searchResponse = graphResponse?.value?.[0];
                const events = searchResponse?.hitsContainers?.[0]?.hits;
                if (events?.length) {
                    for (const evt of events.filter((e) => e.resource.subject)) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, {
                            id: this.base64IdToUrl(evt.hitId),
                            ...evt.resource
                        }, "subject", "Event"));
                    }
                }
            }
            else if (type === "ChatMessage") {
                const graphResponse = batchResponse.body;
                const searchResponse = graphResponse?.value?.[0];
                const chatMessages = searchResponse?.hitsContainers?.[0]?.hits;
                if (chatMessages?.length) {
                    for (const cht of chatMessages) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, {
                            id: this.base64IdToUrl(cht.hitId),
                            ...cht.resource,
                            summary: cht.summary
                        }, "summary", "ChatMessage"));
                    }
                }
            }
            else if (type === "File") {
                const files = batchResponse.body.value;
                if (files?.length) {
                    for (const f of files) {
                        homeResults.push(await this.createLoadingResult(templateHelpers, palette, f, "name", "File"));
                    }
                }
            }
        }
    }
    /**
     * Create a result for home to allow reconnection.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @returns The connect template.
     */
    async createConnectResult(templateHelpers, palette) {
        const layout = await templateHelpers.createContainer("column", [
            await templateHelpers.createContainer("row", [await templateHelpers.createText("title", 12, { fontWeight: "bold" })], {
                borderBottom: `1px solid ${palette.background6}`,
                paddingBottom: "5px",
                gap: "5px"
            }),
            await templateHelpers.createText("description", 12),
            await templateHelpers.createText("error", 12, {
                fontFamily: "monospace",
                flex: 1
            }),
            await templateHelpers.createButton(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.ButtonStyle.Primary, "connect", Microsoft365Integration._ACTION_CONNECT)
        ], {
            padding: "10px",
            gap: "15px",
            flex: "1"
        });
        return {
            key: `${this._definition?.id}-connect`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: this._definition?.title ?? "",
            label: "Connect",
            icon: this._settings?.images.microsoft365,
            actions: [
                {
                    name: Microsoft365Integration._ACTION_CONNECT,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout,
                data: {
                    title: `${this._definition?.title} Connection`,
                    description: `${this._definition?.title} failed to connect due to the following error`,
                    error: this._connectionError ?? "Unknown connection error",
                    connect: "Connect"
                }
            }
        };
    }
    /**
     * Create a result to show we are searching.
     * @returns Home template for searching.
     */
    createSearchingResult() {
        return {
            key: `${this._definition?.id}-searching`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: "Searching ...",
            icon: this._settings?.images.microsoft365,
            actions: [],
            data: {
                providerId: this._definition?.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Loading,
            templateContent: ""
        };
    }
    /**
     * Create a home search result which display JSON.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param response The response to convert to the home template.
     * @returns The home template.
     */
    async createGraphJsonResult(templateHelpers, palette, response) {
        return {
            key: `${this._definition?.id}-rest`,
            score: this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE,
            title: "Graph Result",
            label: response.status === 200 ? "JSON" : "Error",
            icon: this._settings?.images.microsoft365,
            actions: [
                {
                    name: Microsoft365Integration._ACTION_COPY,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                json: response.data
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createText("json", 12, {
                    fontSize: "12px",
                    fontFamily: "monospace",
                    color: response.status === 200 ? palette.textDefault : "red",
                    whiteSpace: "pre",
                    overflow: "auto",
                    flex: 1
                }),
                data: {
                    json: JSON.stringify(response.data, undefined, "  ")
                }
            }
        };
    }
    /**
     * Create a result which show a loading template.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param obj The object to display loading for.
     * @param title The title of the item.
     * @param objType The type of the item.
     * @returns The home search result.
     */
    async createLoadingResult(templateHelpers, palette, obj, title, objType) {
        const icons = {
            User: "teams",
            Contact: "contact",
            Message: "email",
            Event: "calendar",
            Channel: "channel",
            Team: "team",
            ChatMessage: "chat",
            File: "file"
        };
        let label = objType.split(/(?=[A-Z])/).join(" ");
        let mimeIcon;
        if (objType === "File") {
            mimeIcon = this.getMimeIcon(obj, palette);
            if (this.driveItemIsFolder(obj)) {
                label = "Folder";
            }
            else if (this.driveItemIsImage(obj)) {
                label = "Image";
            }
        }
        return {
            key: `${this._definition?.id}-${obj.id}`,
            score: this.objectTypeToOrder(objType),
            title: obj[title] ?? `Untitled ${objType}`,
            label,
            icon: mimeIcon ?? this.getThemedIcon(icons[objType], palette),
            actions: [],
            data: {
                providerId: this._definition?.id,
                objType,
                obj,
                state: "loading"
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Loading,
            templateContent: ""
        };
    }
    /**
     * Create a result to display a user.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param user The user to display.
     * @returns The created template.
     */
    async createUserResult(templateHelpers, palette, user) {
        let picData;
        let presence;
        let availableColor = "red";
        let availableIcon = this._settings?.images.cross;
        let availability = "Unknown";
        const teams = [];
        if (this._ms365Connection) {
            const batchRequests = [];
            batchRequests.push(`/users/${user.id}/presence`, `/users/${user.id}/memberOf`);
            if (user.id) {
                if (this._profileImageCache[user.id]) {
                    picData = this._profileImageCache[user.id].data;
                }
                else {
                    batchRequests.push(`/users/${user.id}/photo/$value`);
                }
            }
            try {
                this._logger?.info("Graph API Batch Request", batchRequests);
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const presenceResponse = response.data?.responses.find((r) => r.id === "1");
                if (presenceResponse?.status === 200) {
                    presence = presenceResponse.body;
                    // Availability is in Pascal case, so split on capitals and join with space
                    availability = presence?.availability?.split(/(?=[A-Z])/).join(" ") ?? availability;
                    if (presence?.availability === "Available") {
                        availableColor = "green";
                        availableIcon = this._settings?.images.check;
                    }
                    else if (presence?.availability === "Away" || presence?.availability === "BeRightBack") {
                        availableColor = "orange";
                        availableIcon = this._settings?.images.clock;
                    }
                }
                else {
                    this._logger?.error("Failed getting user presence", presenceResponse?.status, presenceResponse?.body);
                }
                const teamsResponse = response.data?.responses.find((r) => r.id === "2");
                if (teamsResponse?.status === 200) {
                    const memberOf = teamsResponse.body.value;
                    if (memberOf) {
                        const excludeGroups = ["All Users"];
                        const teamsMember = memberOf.filter((m) => m["@odata.type"] === "#microsoft.graph.group" && !excludeGroups.includes(m.displayName ?? ""));
                        for (const member of teamsMember) {
                            if (member.displayName) {
                                teams.push(member.displayName);
                            }
                        }
                    }
                }
                else {
                    this._logger?.error("Failed getting user teams", teamsResponse?.status, teamsResponse?.body);
                }
                const profileResponse = response.data?.responses.find((r) => r.id === "3");
                if (profileResponse) {
                    if (profileResponse?.status === 200) {
                        picData = `data:image/jpeg;base64,${profileResponse.body}`;
                        this._profileImageCache[user.id ?? ""] = {
                            data: picData,
                            added: Date.now()
                        };
                    }
                    else {
                        // If the request failed the JSON error is still base64 encoded
                        this._logger?.error("Failed getting user profile pic", profileResponse.status, atob(profileResponse.body));
                    }
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (user.jobTitle) {
            pairs.push({ label: "Title", value: user.jobTitle });
        }
        if (user.department) {
            pairs.push({ label: "Department", value: user.department });
        }
        if (user.mail) {
            pairs.push({ label: "E-mail", value: user.mail });
        }
        let phone;
        if (user.mobilePhone) {
            pairs.push({ label: "Cell", value: user.mobilePhone });
            phone = user.mobilePhone;
        }
        if (user.businessPhones?.length) {
            pairs.push({ label: "Business", value: user.businessPhones[0] });
            phone = phone ?? user.businessPhones[0];
        }
        if (teams.length > 0) {
            pairs.push({ label: "Teams", value: teams.join(", ") });
        }
        const buttons = [
            {
                titleKey: "callTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "callImage",
                imageAltText: "Teams Call"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "E-mail"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${user.id}`,
            score: this.objectTypeToOrder("User"),
            title: user.displayName ?? "",
            label: "User",
            icon: this.getThemedIcon("teams", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "User",
                obj: user,
                emails: [user.mail],
                phone,
                name: user.displayName
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [
                        await templateHelpers.createImage("picData", user.displayName ?? "", {
                            width: "44px",
                            height: "44px",
                            objectFit: "cover",
                            borderRadius: "50%"
                        }),
                        await templateHelpers.createImage("status", availability, {
                            width: "16px",
                            height: "16px",
                            backgroundColor: availableColor,
                            borderRadius: "50%",
                            border: "2px solid white",
                            padding: "2px",
                            position: "relative",
                            left: "-14px",
                            top: "28px"
                        }),
                        await templateHelpers.createContainer("column", [
                            await templateHelpers.createTitle("displayName"),
                            await templateHelpers.createText("availability", 10, {})
                        ], {
                            overflow: "hidden"
                        })
                    ], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    picData: picData ?? this.getThemedIcon("contact", palette),
                    status: availableIcon ?? "",
                    displayName: user.displayName ?? "",
                    availability,
                    ...this.mapPairsToData(pairs),
                    callTitle: "Teams Call",
                    callImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create a result to show a contact.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param contact The contact details.
     * @returns The contact template.
     */
    async createContactResult(templateHelpers, palette, contact) {
        let picData;
        try {
            if (this._ms365Connection && contact.id) {
                if (this._profileImageCache[contact.id]) {
                    picData = this._profileImageCache[contact.id].data;
                }
                else {
                    const batchRequests = [`/me/contacts/${contact.id}/photo/$value`];
                    this._logger?.info("Graph API Batch Request", {
                        photo: batchRequests[0]
                    });
                    const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                        requests: batchRequests.map((r, idx) => ({
                            id: (idx + 1).toString(),
                            method: "GET",
                            url: r
                        }))
                    });
                    const profileResponse = response.data?.responses.find((r) => r.id === "1");
                    if (profileResponse?.status === 200) {
                        picData = `data:image/jpeg;base64,${profileResponse.body}`;
                        this._profileImageCache[contact.id] = {
                            data: picData,
                            added: Date.now()
                        };
                    }
                    else {
                        // If the request failed the JSON error is still base64 encoded
                        this._logger?.error("Failed getting contact profile pic", profileResponse?.status, atob(profileResponse?.body));
                    }
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed performing API batch request", err);
        }
        const pairs = [];
        if (contact.companyName) {
            pairs.push({ label: "Company", value: contact.companyName });
        }
        if (contact.jobTitle) {
            pairs.push({ label: "Title", value: contact.jobTitle });
        }
        if (contact.department) {
            pairs.push({ label: "Department", value: contact.department });
        }
        let phone;
        let email;
        if (contact.mobilePhone) {
            pairs.push({ label: "Cell", value: contact.mobilePhone });
            phone = contact.mobilePhone;
        }
        if (contact.businessPhones?.length) {
            pairs.push({ label: "Business", value: contact.businessPhones[0] });
            phone = phone ?? contact.businessPhones[0];
        }
        if (contact.emailAddresses?.length) {
            for (const e of contact.emailAddresses) {
                if (e.address?.length) {
                    pairs.push({ label: "E-mail", value: e.address });
                    email = email ?? e.address;
                    break;
                }
            }
        }
        const buttons = [];
        if (phone) {
            buttons.push({
                titleKey: "callTitle",
                action: Microsoft365Integration._ACTION_PHONE_CALL,
                imageKey: "callImage",
                imageAltText: "Call"
            });
        }
        if (email) {
            buttons.push({
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "E-mail"
            });
            buttons.push({
                titleKey: "calendarTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EVENT,
                imageKey: "calendarImage",
                imageAltText: "Calendar"
            });
        }
        return {
            key: `${this._definition?.id}-${contact.id}`,
            score: this.objectTypeToOrder("Contact"),
            title: contact.displayName ?? "",
            label: "Contact",
            icon: this.getThemedIcon("contact", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_PHONE_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Contact",
                obj: contact,
                emails: [email],
                phone,
                name: contact.displayName
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [
                        await templateHelpers.createImage("picData", contact.displayName ?? "", {
                            width: "44px",
                            height: "44px",
                            objectFit: "cover",
                            borderRadius: "50%"
                        }),
                        await templateHelpers.createContainer("column", [
                            await templateHelpers.createTitle("displayName"),
                            await templateHelpers.createText("company", 10, {})
                        ], {
                            overflow: "hidden"
                        })
                    ], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    picData: picData ?? this.getThemedIcon("contact", palette),
                    displayName: contact.displayName ?? "",
                    ...this.mapPairsToData(pairs),
                    callTitle: "Call",
                    callImage: this.getThemedIcon("call", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    calendarTitle: "Outlook Calendar",
                    calendarImage: this.getThemedIcon("calendar", palette)
                }
            }
        };
    }
    /**
     * Create a result to display a message.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param message The message data.
     * @returns The message template.
     */
    async createMessageResult(templateHelpers, palette, message) {
        const pairs = [];
        if (message.sender?.emailAddress?.name ?? message.sender?.emailAddress?.address) {
            pairs.push({
                label: "From",
                value: message.sender.emailAddress?.name ?? message.sender.emailAddress?.address ?? ""
            });
        }
        if (message.receivedDateTime) {
            pairs.push({
                label: "Received",
                value: new Date(message.receivedDateTime).toLocaleString()
            });
        }
        if (message.bodyPreview) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(message.bodyPreview),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${message.id}`,
            score: this.objectTypeToOrder("Message"),
            title: message.subject ?? "Untitled Message",
            label: "Message",
            icon: this.getThemedIcon("email", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Message",
                obj: message,
                url: message.webLink
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("subject")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    subject: message.subject ?? "No Subject",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Outlook",
                    openImage: this.getThemedIcon("outlook", palette)
                }
            }
        };
    }
    /**
     * Create a result template for event.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param event The event data.
     * @returns The event template.
     */
    async createEventResult(templateHelpers, palette, event) {
        if (this._ms365Connection) {
            const batchRequests = [`/me/events/${event.id}`];
            try {
                this._logger?.info("Graph API Batch Request", {
                    photo: batchRequests[0]
                });
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const eventResponse = response.data?.responses.find((r) => r.id === "1");
                if (eventResponse?.status === 200) {
                    event = {
                        ...event,
                        ...eventResponse.body
                    };
                }
                else {
                    this._logger?.error("Failed getting event", eventResponse?.status, eventResponse?.body);
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (event.start?.dateTime) {
            pairs.push({
                label: "Start",
                value: new Date(event.start?.dateTime).toLocaleString()
            });
        }
        if (event.end?.dateTime) {
            pairs.push({
                label: "End",
                value: new Date(event.end?.dateTime).toLocaleString()
            });
        }
        if (event.bodyPreview) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(event.bodyPreview),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${event.id}`,
            score: this.objectTypeToOrder("Event"),
            title: event.subject ?? "Untitled Event",
            label: "Event",
            icon: this.getThemedIcon("calendar", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Event",
                obj: event,
                url: event.webLink
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("subject")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    subject: event.subject ?? "Untitled Event",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Outlook",
                    openImage: this.getThemedIcon("outlook", palette)
                }
            }
        };
    }
    /**
     * Create a result for a chat message.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param chatMessage The chat message data.
     * @returns The chat message template.
     */
    async createChatMessageResult(templateHelpers, palette, chatMessage) {
        if (this._ms365Connection) {
            try {
                const batchRequests = [`/chats/${chatMessage.chatId}/messages/${chatMessage.etag}`];
                this._logger?.info("Graph API Batch Request", {
                    photo: batchRequests[0]
                });
                const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                    requests: batchRequests.map((r, idx) => ({
                        id: (idx + 1).toString(),
                        method: "GET",
                        url: r
                    }))
                });
                const chatMessageResponse = response.data?.responses.find((r) => r.id === "1");
                if (chatMessageResponse?.status === 200) {
                    chatMessage = {
                        ...chatMessage,
                        ...chatMessageResponse.body,
                        summary: chatMessageResponse.body.summary ?? chatMessage.summary
                    };
                }
                else {
                    this._logger?.error("Failed getting event", chatMessageResponse?.status, chatMessageResponse?.body);
                }
            }
            catch (err) {
                this._logger?.error("Failed performing API batch request", err);
            }
        }
        const pairs = [];
        if (chatMessage.lastModifiedDateTime) {
            pairs.push({
                label: "Date/Time",
                value: new Date(chatMessage.lastModifiedDateTime).toLocaleString()
            });
        }
        if (chatMessage.from?.user?.displayName) {
            pairs.push({
                label: "From",
                value: chatMessage.from.user.displayName
            });
        }
        if (chatMessage.body?.content) {
            pairs.push({
                label: "Preview",
                value: this.sanitizeString(chatMessage.body?.content),
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        return {
            key: `${this._definition?.id}-${chatMessage.id}`,
            score: this.objectTypeToOrder("ChatMessage"),
            title: chatMessage.summary ?? "Untitled Chat Message",
            label: "Chat Message",
            icon: this.getThemedIcon("chat", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CHAT,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "ChatMessage",
                obj: chatMessage,
                url: chatMessage.webUrl,
                chatId: chatMessage.chatId,
                messageId: chatMessage.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("summary")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    summary: chatMessage.summary ?? "Untitled Chat Message",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Chat Message",
                    openImage: this.getThemedIcon("teams", palette)
                }
            }
        };
    }
    /**
     * Create the result for a team.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param team The team data.
     * @returns The team result template.
     */
    async createTeamResult(templateHelpers, palette, team) {
        const teamMembers = team.id ? await this.getTeamMembers(team.id) : [];
        const pairs = [];
        const urls = {};
        if (team.channels?.length) {
            pairs.push({
                label: "Channel List",
                links: team.channels?.map((c) => c.displayName ?? "")
            });
            for (let i = 0; i < team.channels.length; i++) {
                urls[`Channel List_link_${i}`] = team.channels[i].webUrl ?? "";
            }
        }
        if (teamMembers.length) {
            const userPhotos = await this.getUserPhotos(teamMembers, 16);
            pairs.push({
                label: "Member List",
                srcs: userPhotos
            });
        }
        if (team.description) {
            pairs.push({
                label: "Description",
                value: team.description,
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "openImage",
                imageAltText: "Open"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "Email"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${team.id}`,
            score: this.objectTypeToOrder("Team"),
            title: team.displayName ?? "Untitled Team",
            label: "Team",
            icon: this.getThemedIcon("team", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Team",
                obj: team,
                url: team.webUrl,
                urls,
                emails: teamMembers.filter((t) => t.email).map((t) => t.email),
                teamId: team.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: team.displayName ?? "Untitled Team",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Teams",
                    openImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create a result template for a channel.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param channel The channel data.
     * @returns The channel result template.
     */
    async createChannelResult(templateHelpers, palette, channel) {
        const channelMembers = channel.team?.id && channel?.id ? await this.getChannelMembers(channel.team.id, channel.id) : [];
        const pairs = [];
        if (channel.team.displayName) {
            pairs.push({
                label: "Team",
                value: channel.team.displayName
            });
        }
        if (channelMembers.length) {
            const userPhotos = await this.getUserPhotos(channelMembers, 16);
            pairs.push({
                label: "Member List",
                srcs: userPhotos
            });
        }
        if (channel.description) {
            pairs.push({
                label: "Description",
                value: channel.description,
                wide: true
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CALL,
                imageKey: "openImage",
                imageAltText: "Open"
            },
            {
                titleKey: "emailTitle",
                action: Microsoft365Integration._ACTION_OUTLOOK_EMAIL,
                imageKey: "emailImage",
                imageAltText: "Email"
            },
            {
                titleKey: "meetingTitle",
                action: Microsoft365Integration._ACTION_TEAMS_MEETING,
                imageKey: "meetingImage",
                imageAltText: "Meeting"
            },
            {
                titleKey: "chatTitle",
                action: Microsoft365Integration._ACTION_TEAMS_CHAT,
                imageKey: "chatImage",
                imageAltText: "Chat"
            }
        ];
        return {
            key: `${this._definition?.id}-${channel.id}`,
            score: this.objectTypeToOrder("Channel"),
            title: channel.displayName ?? "Untitled Channel",
            label: "Channel",
            icon: this.getThemedIcon("channel", palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_TEAMS_CALL,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "Channel",
                obj: channel,
                url: channel.webUrl,
                emails: channelMembers.filter((m) => m.email).map((m) => m.email),
                teamId: channel.team.id,
                channelId: channel.id
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: channel.displayName ?? "Untitled Channel",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open Teams",
                    openImage: this.getThemedIcon("teams", palette),
                    emailTitle: "Outlook E-mail",
                    emailImage: this.getThemedIcon("email", palette),
                    meetingTitle: "Teams Meeting",
                    meetingImage: this.getThemedIcon("calendar", palette),
                    chatTitle: "Teams Chat",
                    chatImage: this.getThemedIcon("chat", palette)
                }
            }
        };
    }
    /**
     * Create the result template for a drive item.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param driveItem The drive item data.
     * @returns The result template for the drive item.
     */
    async createFileResult(templateHelpers, palette, driveItem) {
        const pairs = [];
        const urls = {};
        const mimeIcon = this.getMimeIcon(driveItem, palette);
        if (driveItem.createdBy?.user?.displayName) {
            pairs.push({
                label: "Created By",
                value: driveItem.createdBy?.user?.displayName
            });
        }
        if (driveItem.createdDateTime) {
            pairs.push({
                label: "Created On",
                value: new Date(driveItem.createdDateTime).toLocaleString()
            });
        }
        if (driveItem.lastModifiedBy?.user?.displayName) {
            pairs.push({
                label: "Updated By",
                value: driveItem.lastModifiedBy?.user?.displayName
            });
        }
        if (driveItem.lastModifiedDateTime) {
            pairs.push({
                label: "Updated On",
                value: new Date(driveItem.lastModifiedDateTime).toLocaleString()
            });
        }
        const buttons = [
            {
                titleKey: "openTitle",
                action: Microsoft365Integration._ACTION_OPEN,
                imageKey: "openImage",
                imageAltText: "Open"
            }
        ];
        const isFolder = this.driveItemIsFolder(driveItem);
        const typeName = isFolder ? "Folder" : "File";
        return {
            key: `${this._definition?.id}-${driveItem.id}`,
            score: this.objectTypeToOrder("File"),
            title: driveItem.name ?? `Untitled ${typeName}`,
            label: typeName,
            icon: mimeIcon ?? this.getThemedIcon(typeName.toLowerCase(), palette),
            actions: [
                {
                    name: Microsoft365Integration._ACTION_OPEN,
                    hotkey: "Enter"
                }
            ],
            data: {
                providerId: this._definition?.id,
                objType: "File",
                obj: driveItem,
                url: driveItem.webUrl,
                urls
            },
            template: _openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.CLITemplate.Custom,
            templateContent: {
                layout: await templateHelpers.createContainer("column", [
                    await templateHelpers.createContainer("row", [await templateHelpers.createTitle("displayName")], {
                        borderBottom: `1px solid ${palette.background6}`,
                        paddingBottom: "5px",
                        gap: "5px",
                        overflow: "hidden"
                    }),
                    await this.createPairsLayout(templateHelpers, palette, pairs),
                    await this.createButtonsLayout(templateHelpers, palette, buttons)
                ], {
                    padding: "10px",
                    gap: "15px",
                    flex: "1"
                }),
                data: {
                    displayName: driveItem.name ?? "Untitled File",
                    ...this.mapPairsToData(pairs),
                    openTitle: "Open File",
                    openImage: mimeIcon ?? this.getThemedIcon("file", palette)
                }
            }
        };
    }
    /**
     * Get team members for a team.
     * @param teamId The id of the team to get the members.
     * @returns The ActiveDirectory data for the team members.
     */
    async getTeamMembers(teamId) {
        try {
            if (this._ms365Connection) {
                this._logger?.info("Get Team Members Request");
                const response = await this._ms365Connection.executeApiRequest(`/v1.0/teams/${teamId}/members`, "GET");
                this._logger?.info("Get Team Members Response", response.data);
                if (response.data?.value) {
                    return response.data.value;
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed getting team members", err);
        }
        return [];
    }
    /**
     * Get the members of a teams channel.
     * @param teamId The team id.
     * @param channelId The channel id.
     * @returns The ActiveDirectory data for the team channel members.
     */
    async getChannelMembers(teamId, channelId) {
        try {
            if (this._ms365Connection) {
                this._logger?.info("Get Channel Members Request");
                const response = await this._ms365Connection.executeApiRequest(`/v1.0/teams/${teamId}/channels/${channelId}/members`, "GET");
                this._logger?.info("Get Channel Members Response", response.data);
                if (response.data?.value) {
                    return response.data.value;
                }
            }
        }
        catch (err) {
            this._logger?.error("Failed getting channel members", err);
        }
        return [];
    }
    /**
     * Get users photos.
     * @param users The users to get the photos for.
     * @param size The size of the photos.
     * @returns List of urls to the photos.
     */
    async getUserPhotos(users, size) {
        try {
            if (this._ms365Connection) {
                const lookupUsers = users.filter((u) => !this._profileImageCache[u.id ?? ""]);
                if (lookupUsers.length > 0) {
                    const chunkCount = Math.ceil(lookupUsers.length / 20);
                    for (let i = 0; i < chunkCount; i++) {
                        const response = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                            requests: lookupUsers.slice(i * 20, (i + 1) * 20).map((u, idx) => ({
                                id: `photos${idx + 1}`,
                                method: "GET",
                                url: `/users/${u.userId}/photo/$value`
                            }))
                        });
                        if (response.data?.responses) {
                            for (const r of response.data.responses) {
                                const lookupIdx = Number.parseInt(r.id.replace("photos", ""), 10);
                                const user = lookupUsers[lookupIdx - 1];
                                if (user.id) {
                                    let picData;
                                    if (r.status === 200) {
                                        picData = `data:image/jpeg;base64,${r.body}`;
                                    }
                                    else {
                                        picData = this.svgToInline(this.imageProfileNone(size, user.displayName ?? "?"));
                                    }
                                    this._profileImageCache[user.id] = {
                                        data: picData,
                                        added: Date.now()
                                    };
                                }
                            }
                        }
                    }
                }
                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
                return users.map((u) => u.id && this._profileImageCache[u.id].data).filter(Boolean);
            }
        }
        catch (err) {
            this._logger?.error("Failed getting user photos", err);
        }
        return [];
    }
    /**
     * Map data to template layout.
     * @param pairs The data pairs to map.
     * @returns The mapped data.
     */
    mapPairsToData(pairs) {
        const pairData = {};
        for (const pair of pairs) {
            pairData[`${pair.label}Title`] = pair.label;
            if (pair.value) {
                pairData[pair.label] = this.sanitizeString(pair.value);
            }
            if (pair.links) {
                for (let i = 0; i < pair.links.length; i++) {
                    pairData[`${pair.label}_link_${i}`] = pair.links[i];
                }
            }
            if (pair.srcs) {
                for (let i = 0; i < pair.srcs.length; i++) {
                    pairData[`${pair.label}_src_${i}`] = pair.srcs[i];
                }
            }
        }
        return pairData;
    }
    /**
     * Create the template layout for a pair.
     * @param templateHelpers Template helpers.
     * @param palette The palette.
     * @param pairs The pair to create the entry for.
     * @returns The pair template.
     */
    async createPairsLayout(templateHelpers, palette, pairs) {
        return templateHelpers.createContainer("column", await Promise.all(pairs.map(async (p) => this.createPairLayout(templateHelpers, palette, p))), { gap: "5px", flex: "1" });
    }
    /**
     * Create the pairs layout.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param pair The pair data.
     * @param pair.label Label for the pair.
     * @param pair.value The value for the pair.
     * @param pair.links Any links to display in the pair.
     * @param pair.srcs Any image sources for the pair.
     * @param pair.wide Display the pair in wide format.
     * @returns The formatted pairs.
     */
    async createPairLayout(templateHelpers, palette, pair) {
        const elements = [
            await templateHelpers.createText(`${pair.label}Title`, 10, {
                color: palette.inputPlaceholder,
                flex: 1
            })
        ];
        if (pair.value) {
            elements.push(await templateHelpers.createText(`${pair.label}`, 10, {
                flex: pair.wide ? 1 : 3,
                display: "flex",
                flexWrap: "wrap",
                justifyContent: pair.wide ? "flex-start" : "flex-end",
                wordBreak: "break-all"
            }));
        }
        if (pair.links?.length) {
            elements.push(await templateHelpers.createContainer("row", await Promise.all(pair.links.map(async (l, idx) => templateHelpers.createLink(`${pair.label}_link_${idx}`, `${Microsoft365Integration._ACTION_OPEN}_${pair.label}_link_${idx}`, 10))), { gap: "5px", flex: 3, justifyContent: "flex-end", flexWrap: "wrap" }));
        }
        if (pair.srcs?.length) {
            elements.push(await templateHelpers.createContainer("row", await Promise.all(pair.srcs.map(async (s, idx) => templateHelpers.createImage(`${pair.label}_src_${idx}`, "Member", {
                width: "16px",
                height: "16px",
                objectFit: "cover",
                borderRadius: "50%"
            }))), { gap: "5px", flex: 3, justifyContent: "flex-end", flexWrap: "wrap" }));
        }
        return templateHelpers.createContainer(pair.wide ? "column" : "row", elements, {
            justifyContent: "space-between",
            gap: pair.wide ? "5px" : "10px"
        });
    }
    /**
     * Create a layout with buttons.
     * @param templateHelpers To help with creating templates.
     * @param palette The current palette.
     * @param buttons The buttons to display.
     * @returns The buttons layout.
     */
    async createButtonsLayout(templateHelpers, palette, buttons) {
        return templateHelpers.createContainer("row", await Promise.all(buttons.map(async (b) => templateHelpers.createButton(_openfin_workspace__WEBPACK_IMPORTED_MODULE_1__.ButtonStyle.Secondary, b.titleKey, b.action, {
            border: "none",
            borderRadius: "50%",
            width: "40px",
            height: "40px",
            padding: "0px",
            justifyContent: "center",
            backgroundColor: palette.background2
        }, [
            await templateHelpers.createImage(b.imageKey, b.imageAltText, {
                width: "16px",
                height: "16px"
            })
        ]))), {
            justifyContent: "space-around",
            gap: "10px"
        });
    }
    /**
     * Create a profile image using initials.
     * @param size The size of the image to create.
     * @param name The name of the user.
     * @returns SVG image.
     */
    imageProfileNone(size, name) {
        return `<svg fill="#DDDDDD" viewBox="0 0 512 512" height="${size}px" width="${size}px" xmlns="http://www.w3.org/2000/svg">
		<style>text{font: bold 350px sans-serif;fill: black;}</style>
		<rect width="512" height="512" />
		<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">${name[0]}</text>
		</svg>`;
    }
    /**
     * Convert and svg into inline format.
     * @param svg The SVG to convert.
     * @returns The converted image.
     */
    svgToInline(svg) {
        return `data:image/svg+xml;utf8,${svg.replace(/#/g, "%23")}`;
    }
    /**
     * Convert a base64 ID in to url format.
     * @param b64Id The base64 id to convert.
     * @returns The url form of the id.
     */
    base64IdToUrl(b64Id) {
        return b64Id ? b64Id.replace(/\+/g, "_").replace(/\//g, "-") : b64Id;
    }
    /**
     * A basic string sanitize function that removes angle brackets <> from a string.
     * @param content the content to sanitize
     * @returns a string without angle brackets <>
     */
    sanitizeString(content) {
        if (content !== undefined && content !== null && typeof content === "string") {
            return content
                .replace(/<[^>]*>?/gm, "")
                .replace(/&gt;/g, ">")
                .replace(/&lt;/g, "<")
                .replace(/&amp;/g, "&")
                .replace(/&nbsp;/g, " ")
                .replace(/\n\s*\n/g, "\n");
        }
        return content;
    }
    /**
     * Convert the object type to a value for ordering.
     * @param objType The object type.
     * @returns The ordering number.
     */
    objectTypeToOrder(objType) {
        const objTypeOrder = {
            User: 100,
            Contact: 200,
            Message: 300,
            ChatMessage: 400,
            Event: 500,
            Team: 600,
            Channel: 700,
            File: 800
        };
        return ((this._definition?.baseScore ?? Microsoft365Integration._DEFAULT_BASE_SCORE) + objTypeOrder[objType]);
    }
    /**
     * Update the cache and remove any stale data.
     */
    async updateCache() {
        // Cleanup any old cached profile images
        const keys = Object.keys(this._profileImageCache);
        const now = Date.now();
        const ttl = keys.length > 50 ? 30000 : 300000;
        for (const id of keys) {
            if (now - this._profileImageCache[id].added > ttl) {
                delete this._profileImageCache[id];
            }
        }
        // Update the teams and channels
        if (this._ms365Connection && this._cacheCounter % 6 === 0) {
            // Update every 3 minutes
            try {
                const response = await this._ms365Connection.executeApiRequest("/v1.0/me/joinedTeams");
                const joinedTeams = response.data?.value ?? [];
                const channelsForTeam = {};
                if (joinedTeams.length) {
                    const batchChannels = joinedTeams.map((t) => `/teams/${t.id}/channels`);
                    const batchResponses = await this._ms365Connection.executeApiRequest("/v1.0/$batch", "POST", {
                        requests: batchChannels.map((url, idx) => ({
                            id: `TeamChannels-${(idx + 1).toString()}`,
                            method: "GET",
                            url
                        }))
                    });
                    if (batchResponses.data?.responses && Array.isArray(batchResponses.data?.responses)) {
                        for (const batchResponse of batchResponses.data.responses) {
                            if (batchResponse.status === 200) {
                                this._logger?.info(`${batchResponse.id} Response`, batchResponse.body);
                                const channels = batchResponse.body;
                                if (channels.value) {
                                    for (const channel of channels.value) {
                                        // The webUrl for the teams management page needs constructing from the first channel in each team
                                        // we also connect the team to the channels and vice versa
                                        if (channel.webUrl) {
                                            const webUrl = new URL(channel.webUrl);
                                            if (webUrl.searchParams.has("groupId")) {
                                                const groupId = webUrl.searchParams.get("groupId");
                                                const team = joinedTeams.find((t) => t.id === groupId);
                                                if (team?.id) {
                                                    team.webUrl = channel.webUrl;
                                                    channelsForTeam[team.id] = channelsForTeam[team.id] ?? [];
                                                    channelsForTeam[team.id].push(channel);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            else {
                                this._logger?.error(`${batchResponse.id} Response Failed`, batchResponse.status, batchResponse.body);
                            }
                        }
                    }
                }
                this._teamsAndChannelsCache = joinedTeams.map((t) => ({
                    team: t,
                    channels: channelsForTeam[t.id ?? ""] ?? []
                }));
            }
            catch (err) {
                this._logger?.error("Error retrieving joined teams", err);
            }
        }
        this._cacheCounter++;
    }
    /**
     * Get the icon based on the MIME type for a drive item.
     * @param driveItem The drive item.
     * @param palette The palette for theming.
     * @returns The icons for the drive item.
     */
    getMimeIcon(driveItem, palette) {
        const mimeType = driveItem.file?.mimeType ?? "";
        const filename = driveItem.name ?? "";
        const packageType = driveItem.package?.type ?? "";
        if (mimeType === "application/vnd.openxmlformats-officedocument.wordprocessingml.document" ||
            mimeType === "application/msword" ||
            filename.endsWith(".docx") ||
            filename.endsWith(".doc")) {
            return this._settings?.images.word;
        }
        else if (mimeType === "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" ||
            mimeType === "application/vnd.ms-excel" ||
            filename.endsWith(".xlsx") ||
            filename.endsWith(".xls")) {
            return this._settings?.images.excel;
        }
        else if (mimeType === "application/vnd.openxmlformats-officedocument.presentationml.presentation" ||
            mimeType === "application/vnd.ms-powerpoint" ||
            filename.endsWith(".pptx") ||
            filename.endsWith(".ppt")) {
            return this._settings?.images.powerpoint;
        }
        else if (this.driveItemIsImage(driveItem)) {
            if (driveItem.thumbnails && Array.isArray(driveItem.thumbnails) && driveItem.thumbnails.length > 0) {
                const thumbnailSet = driveItem.thumbnails[0];
                if (thumbnailSet?.small ?? thumbnailSet.medium) {
                    return thumbnailSet.small?.url ?? thumbnailSet.medium?.url;
                }
            }
        }
        else if (packageType === "oneNote" || filename.endsWith("onetoc2") || filename.endsWith("one")) {
            return this._settings?.images.onenote;
        }
        else if (this.driveItemIsFolder(driveItem)) {
            return this.getThemedIcon("folder", palette);
        }
    }
    /**
     * Get a theme version of an icon.
     * @param themedIcon The theme icon to them.
     * @param palette The palette to use for theming.
     * @returns The themed icon.
     */
    getThemedIcon(themedIcon, palette) {
        if (!this._settings?.images[themedIcon]) {
            return "";
        }
        const icon = this._settings.images[themedIcon];
        if (icon.startsWith("data:image/svg+xml")) {
            return icon.replace(/rgb\(0,0,0\)/g, palette.textDefault?.replace(/#/g, "%23") ?? "0,0,0");
        }
        return icon;
    }
    /**
     * Check to see if a drive item is folder.
     * @param driveItem The driver item to check.
     * @returns True if the item is a folder.
     */
    driveItemIsFolder(driveItem) {
        return driveItem.file === undefined && driveItem.folder !== undefined;
    }
    /**
     * Check to see if a drive item is an image.
     * @param driveItem The drive item to check.
     * @returns True if the item is an
     */
    driveItemIsImage(driveItem) {
        return (driveItem.file?.mimeType?.startsWith("image/") ??
            driveItem.name?.endsWith(".jpeg") ??
            driveItem.name?.endsWith(".jpg") ??
            driveItem.name?.endsWith(".gif") ??
            driveItem.name?.endsWith(".webp") ??
            driveItem.name?.endsWith(".png") ??
            false);
    }
    /**
     * Format an error to a readable string.
     * @param err The error to format.
     * @returns The formatted error.
     */
    formatError(err) {
        if (err instanceof Error) {
            return err.message;
        }
        else if (typeof err === "string") {
            return err;
        }
        return JSON.stringify(err);
    }
}
/**
 * The default base score for ordering.
 * @internal
 */
Microsoft365Integration._DEFAULT_BASE_SCORE = 500000;
/**
 * The key to use for a call key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_CALL = "Teams Call";
/**
 * The key to use for a outlook email key action.
 * @internal
 */
Microsoft365Integration._ACTION_OUTLOOK_EMAIL = "Outlook Email";
/**
 * The key to use for a teams meeting key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_MEETING = "Teams Meeting";
/**
 * The key to use for a outlook event key action.
 * @internal
 */
Microsoft365Integration._ACTION_OUTLOOK_EVENT = "Outlook Event";
/**
 * The key to use for a chat key action.
 * @internal
 */
Microsoft365Integration._ACTION_TEAMS_CHAT = "Teams Chat";
/**
 * The key to use for a call key action.
 * @internal
 */
Microsoft365Integration._ACTION_PHONE_CALL = "Call";
/**
 * The key to use for an open key action.
 * @internal
 */
Microsoft365Integration._ACTION_OPEN = "Open";
/**
 * The key to use for an share contact.
 * @internal
 */
Microsoft365Integration._ACTION_SHARE_CONTACT = "Share Contact";
/**
 * The key to use for a copy key action.
 * @internal
 */
Microsoft365Integration._ACTION_COPY = "Copy JSON to Clipboard";
/**
 * The key to use for a connect key action.
 * @internal
 */
Microsoft365Integration._ACTION_CONNECT = "Connect";
/**
 * The key for the ms 365 filters.
 * @internal
 */
Microsoft365Integration._MS365_FILTERS = "MS365";
/**
 * The url for teams.
 * @internal
 */
Microsoft365Integration._TEAMS_URL = "https://teams.microsoft.com/";
/**
 * The protocol for teams.
 * @internal
 */
Microsoft365Integration._TEAMS_PROTOCOL = "msteams:";


/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		id: moduleId,
/******/ 		loaded: false,
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Flag the module as loaded
/******/ 	module.loaded = true;
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/global */
/******/ (() => {
/******/ 	__webpack_require__.g = (function() {
/******/ 		if (typeof globalThis === 'object') return globalThis;
/******/ 		try {
/******/ 			return this || new Function('return this')();
/******/ 		} catch (e) {
/******/ 			if (typeof window === 'object') return window;
/******/ 		}
/******/ 	})();
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/node module decorator */
/******/ (() => {
/******/ 	__webpack_require__.nmd = (module) => {
/******/ 		module.paths = [];
/******/ 		if (!module.children) module.children = [];
/******/ 		return module;
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
/*!******************************************!*\
  !*** ./client/src/module-entry-point.ts ***!
  \******************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   entryPoints: () => (/* binding */ entryPoints)
/* harmony export */ });
/* harmony import */ var _ms365_integration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ms365-integration */ "./client/src/ms365-integration.ts");

/**
 * This entry point is used by webpack to create a module file which can be consumed
 * by the workspace-platform-starter example.
 */
const entryPoints = {
    integrations: new _ms365_integration__WEBPACK_IMPORTED_MODULE_0__.Microsoft365Integration()
};

})();

const __webpack_exports__entryPoints = __webpack_exports__.entryPoints;
export { __webpack_exports__entryPoints as entryPoints };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBa0Msa0NBQWtDO0FBQ3BFLHlDQUF5Qyw0QkFBNEI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSx1QkFBdUI7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsMkNBQTJDLElBQUk7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxp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QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseURBQXlEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELG1EQUFtRDtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3QkFBd0I7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QSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGdGQUFnRixFQUFFO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FB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QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsYUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsZUFBZTtBQUNsSDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDRCQUE0QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRLFdBQVc7QUFDOUIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlDQUF5QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LGFBQWE7VUFDN0QsRTs7Ozs7VUNOQTtVQUNBO1VBQ0E7VUFDQTtVQUNBLEU7Ozs7Ozs7Ozs7Ozs7OztBQ0o4RDtBQUU5RDs7O0dBR0c7QUFDSSxNQUFNLFdBQVcsR0FBOEM7SUFDckUsWUFBWSxFQUFFLElBQUksdUVBQXVCLEVBQUU7Q0FDM0MsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5maW4vbWljcm9zb2Z0MzY1L29wZW5maW4ubXMzNjUuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmZpbi93b3Jrc3BhY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9kZXhpZS9kaXN0L2RleGllLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvZGV4aWUvaW1wb3J0LXdyYXBwZXIubWpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbC1wYXJzZS1zdHJpbmdpZnkvZGlzdC9odG1sLXBhcnNlLXN0cmluZ2lmeS5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9pMThuZXh0L2Rpc3QvY2pzL2kxOG5leHQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvSTE4bmV4dFByb3ZpZGVyLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL1RyYW5zLmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtaTE4bmV4dC9kaXN0L2VzL1RyYW5zV2l0aG91dENvbnRleHQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvVHJhbnNsYXRpb24uanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvY29udGV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy9pMThuSW5zdGFuY2UuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvaW5pdFJlYWN0STE4bmV4dC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91bmVzY2FwZS5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy91c2VTU1IuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvdXNlVHJhbnNsYXRpb24uanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1pMThuZXh0L2Rpc3QvZXMvd2l0aFNTUi5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWkxOG5leHQvZGlzdC9lcy93aXRoVHJhbnNsYXRpb24uanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9janMvcmVhY3QuZGV2ZWxvcG1lbnQuanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9pbmRleC5qcyIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvLi4vLi4vbm9kZV9tb2R1bGVzL3RpdGxlLWNhc2UvZGlzdC5lczIwMTUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1Ly4uLy4uL25vZGVfbW9kdWxlcy92b2lkLWVsZW1lbnRzL2luZGV4LmpzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uL2NsaWVudC9zcmMvbXMzNjUtaW50ZWdyYXRpb24udHMiLCJ3ZWJwYWNrOi8vb3BlbmZpbi13b3Jrc3BhY2UtLWludGVncmF0ZS13aXRoLW1zMzY1L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9vcGVuZmluLXdvcmtzcGFjZS0taW50ZWdyYXRlLXdpdGgtbXMzNjUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL29wZW5maW4td29ya3NwYWNlLS1pbnRlZ3JhdGUtd2l0aC1tczM2NS8uL2NsaWVudC9zcmMvbW9kdWxlLWVudHJ5LXBvaW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBGb3IgbGljZW5zZSBpbmZvcm1hdGlvbiBwbGVhc2Ugc2VlIG9wZW5maW4ubXMzNjUuanMuTElDRU5TRS50eHQgKi9cbnZhciB0PXs4NzY6dD0+e2NvbnN0e0Fib3J0Q29udHJvbGxlcjplLEFib3J0U2lnbmFsOm59PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwO3QuZXhwb3J0cz1lLHQuZXhwb3J0cy5BYm9ydFNpZ25hbD1uLHQuZXhwb3J0cy5kZWZhdWx0PWV9LDYwOih0LGUpPT57ZS5ieXRlTGVuZ3RoPWZ1bmN0aW9uKHQpe3ZhciBlPXModCksbj1lWzBdLHI9ZVsxXTtyZXR1cm4gMyoobityKS80LXJ9LGUudG9CeXRlQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGUsbixpPXModCksYT1pWzBdLHU9aVsxXSxsPW5ldyBvKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMyooZStuKS80LW59KDAsYSx1KSksYz0wLGY9dT4wP2EtNDphO2ZvcihuPTA7bjxmO24rPTQpZT1yW3QuY2hhckNvZGVBdChuKV08PDE4fHJbdC5jaGFyQ29kZUF0KG4rMSldPDwxMnxyW3QuY2hhckNvZGVBdChuKzIpXTw8NnxyW3QuY2hhckNvZGVBdChuKzMpXSxsW2MrK109ZT4+MTYmMjU1LGxbYysrXT1lPj44JjI1NSxsW2MrK109MjU1JmU7Mj09PXUmJihlPXJbdC5jaGFyQ29kZUF0KG4pXTw8MnxyW3QuY2hhckNvZGVBdChuKzEpXT4+NCxsW2MrK109MjU1JmUpOzE9PT11JiYoZT1yW3QuY2hhckNvZGVBdChuKV08PDEwfHJbdC5jaGFyQ29kZUF0KG4rMSldPDw0fHJbdC5jaGFyQ29kZUF0KG4rMildPj4yLGxbYysrXT1lPj44JjI1NSxsW2MrK109MjU1JmUpO3JldHVybiBsfSxlLmZyb21CeXRlQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9dC5sZW5ndGgsbz1yJTMsaT1bXSxhPTE2MzgzLHM9MCxsPXItbztzPGw7cys9YSlpLnB1c2godSh0LHMscythPmw/bDpzK2EpKTsxPT09bz8oZT10W3ItMV0saS5wdXNoKG5bZT4+Ml0rbltlPDw0JjYzXStcIj09XCIpKToyPT09byYmKGU9KHRbci0yXTw8OCkrdFtyLTFdLGkucHVzaChuW2U+PjEwXStuW2U+PjQmNjNdK25bZTw8MiY2M10rXCI9XCIpKTtyZXR1cm4gaS5qb2luKFwiXCIpfTtmb3IodmFyIG49W10scj1bXSxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXksaT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixhPTA7YTw2NDsrK2EpblthXT1pW2FdLHJbaS5jaGFyQ29kZUF0KGEpXT1hO2Z1bmN0aW9uIHModCl7dmFyIGU9dC5sZW5ndGg7aWYoZSU0PjApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNFwiKTt2YXIgbj10LmluZGV4T2YoXCI9XCIpO3JldHVybi0xPT09biYmKG49ZSksW24sbj09PWU/MDo0LW4lNF19ZnVuY3Rpb24gdSh0LGUscil7Zm9yKHZhciBvLGksYT1bXSxzPWU7czxyO3MrPTMpbz0odFtzXTw8MTYmMTY3MTE2ODApKyh0W3MrMV08PDgmNjUyODApKygyNTUmdFtzKzJdKSxhLnB1c2goblsoaT1vKT4+MTgmNjNdK25baT4+MTImNjNdK25baT4+NiY2M10rbls2MyZpXSk7cmV0dXJuIGEuam9pbihcIlwiKX1yW1wiLVwiLmNoYXJDb2RlQXQoMCldPTYyLHJbXCJfXCIuY2hhckNvZGVBdCgwKV09NjN9LDQ4NToodCxlLG4pPT57Y29uc3Qgcj1uKDYwKSxvPW4oMjE1KSxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sLmZvcj9TeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIik6bnVsbDtlLkJ1ZmZlcj11LGUuU2xvd0J1ZmZlcj1mdW5jdGlvbih0KXsrdCE9dCYmKHQ9MCk7cmV0dXJuIHUuYWxsb2MoK3QpfSxlLklOU1BFQ1RfTUFYX0JZVEVTPTUwO2NvbnN0IGE9MjE0NzQ4MzY0NztmdW5jdGlvbiBzKHQpe2lmKHQ+YSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJyt0KydcIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gXCJzaXplXCInKTtjb25zdCBlPW5ldyBVaW50OEFycmF5KHQpO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx1LnByb3RvdHlwZSksZX1mdW5jdGlvbiB1KHQsZSxuKXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKTtyZXR1cm4gZih0KX1yZXR1cm4gbCh0LGUsbil9ZnVuY3Rpb24gbCh0LGUsbil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIGZ1bmN0aW9uKHQsZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJlwiXCIhPT1lfHwoZT1cInV0ZjhcIik7aWYoIXUuaXNFbmNvZGluZyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZSk7Y29uc3Qgbj0wfGcodCxlKTtsZXQgcj1zKG4pO2NvbnN0IG89ci53cml0ZSh0LGUpO28hPT1uJiYocj1yLnNsaWNlKDAsbykpO3JldHVybiByfSh0LGUpO2lmKEFycmF5QnVmZmVyLmlzVmlldyh0KSlyZXR1cm4gZnVuY3Rpb24odCl7aWYoWSh0LFVpbnQ4QXJyYXkpKXtjb25zdCBlPW5ldyBVaW50OEFycmF5KHQpO3JldHVybiBoKGUuYnVmZmVyLGUuYnl0ZU9mZnNldCxlLmJ5dGVMZW5ndGgpfXJldHVybiBkKHQpfSh0KTtpZihudWxsPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSBcIit0eXBlb2YgdCk7aWYoWSh0LEFycmF5QnVmZmVyKXx8dCYmWSh0LmJ1ZmZlcixBcnJheUJ1ZmZlcikpcmV0dXJuIGgodCxlLG4pO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciYmKFkodCxTaGFyZWRBcnJheUJ1ZmZlcil8fHQmJlkodC5idWZmZXIsU2hhcmVkQXJyYXlCdWZmZXIpKSlyZXR1cm4gaCh0LGUsbik7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwidmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKTtjb25zdCByPXQudmFsdWVPZiYmdC52YWx1ZU9mKCk7aWYobnVsbCE9ciYmciE9PXQpcmV0dXJuIHUuZnJvbShyLGUsbik7Y29uc3Qgbz1mdW5jdGlvbih0KXtpZih1LmlzQnVmZmVyKHQpKXtjb25zdCBlPTB8cCh0Lmxlbmd0aCksbj1zKGUpO3JldHVybiAwPT09bi5sZW5ndGh8fHQuY29weShuLDAsMCxlKSxufWlmKHZvaWQgMCE9PXQubGVuZ3RoKXJldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0Lmxlbmd0aHx8Syh0Lmxlbmd0aCk/cygwKTpkKHQpO2lmKFwiQnVmZmVyXCI9PT10LnR5cGUmJkFycmF5LmlzQXJyYXkodC5kYXRhKSlyZXR1cm4gZCh0LmRhdGEpfSh0KTtpZihvKXJldHVybiBvO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPVN5bWJvbC50b1ByaW1pdGl2ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdFtTeW1ib2wudG9QcmltaXRpdmVdKXJldHVybiB1LmZyb20odFtTeW1ib2wudG9QcmltaXRpdmVdKFwic3RyaW5nXCIpLGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiB0KX1mdW5jdGlvbiBjKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKTtpZih0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrdCsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9ZnVuY3Rpb24gZih0KXtyZXR1cm4gYyh0KSxzKHQ8MD8wOjB8cCh0KSl9ZnVuY3Rpb24gZCh0KXtjb25zdCBlPXQubGVuZ3RoPDA/MDowfHAodC5sZW5ndGgpLG49cyhlKTtmb3IobGV0IHI9MDtyPGU7cis9MSluW3JdPTI1NSZ0W3JdO3JldHVybiBufWZ1bmN0aW9uIGgodCxlLG4pe2lmKGU8MHx8dC5ieXRlTGVuZ3RoPGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wib2Zmc2V0XCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJyk7aWYodC5ieXRlTGVuZ3RoPGUrKG58fDApKXRocm93IG5ldyBSYW5nZUVycm9yKCdcImxlbmd0aFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpO2xldCByO3JldHVybiByPXZvaWQgMD09PWUmJnZvaWQgMD09PW4/bmV3IFVpbnQ4QXJyYXkodCk6dm9pZCAwPT09bj9uZXcgVWludDhBcnJheSh0LGUpOm5ldyBVaW50OEFycmF5KHQsZSxuKSxPYmplY3Quc2V0UHJvdG90eXBlT2Yocix1LnByb3RvdHlwZSkscn1mdW5jdGlvbiBwKHQpe2lmKHQ+PWEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4XCIrYS50b1N0cmluZygxNikrXCIgYnl0ZXNcIik7cmV0dXJuIDB8dH1mdW5jdGlvbiBnKHQsZSl7aWYodS5pc0J1ZmZlcih0KSlyZXR1cm4gdC5sZW5ndGg7aWYoQXJyYXlCdWZmZXIuaXNWaWV3KHQpfHxZKHQsQXJyYXlCdWZmZXIpKXJldHVybiB0LmJ5dGVMZW5ndGg7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgb3IgQXJyYXlCdWZmZXIuIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgdCk7Y29uc3Qgbj10Lmxlbmd0aCxyPWFyZ3VtZW50cy5sZW5ndGg+MiYmITA9PT1hcmd1bWVudHNbMl07aWYoIXImJjA9PT1uKXJldHVybiAwO2xldCBvPSExO2Zvcig7Oylzd2l0Y2goZSl7Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gbjtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gVih0KS5sZW5ndGg7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIDIqbjtjYXNlXCJoZXhcIjpyZXR1cm4gbj4+PjE7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIEcodCkubGVuZ3RoO2RlZmF1bHQ6aWYobylyZXR1cm4gcj8tMTpWKHQpLmxlbmd0aDtlPShcIlwiK2UpLnRvTG93ZXJDYXNlKCksbz0hMH19ZnVuY3Rpb24geSh0LGUsbil7bGV0IHI9ITE7aWYoKHZvaWQgMD09PWV8fGU8MCkmJihlPTApLGU+dGhpcy5sZW5ndGgpcmV0dXJuXCJcIjtpZigodm9pZCAwPT09bnx8bj50aGlzLmxlbmd0aCkmJihuPXRoaXMubGVuZ3RoKSxuPD0wKXJldHVyblwiXCI7aWYoKG4+Pj49MCk8PShlPj4+PTApKXJldHVyblwiXCI7Zm9yKHR8fCh0PVwidXRmOFwiKTs7KXN3aXRjaCh0KXtjYXNlXCJoZXhcIjpyZXR1cm4gQih0aGlzLGUsbik7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIFQodGhpcyxlLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIHgodGhpcyxlLG4pO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBDKHRoaXMsZSxuKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gSSh0aGlzLGUsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIGsodGhpcyxlLG4pO2RlZmF1bHQ6aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrdCk7dD0odCtcIlwiKS50b0xvd2VyQ2FzZSgpLHI9ITB9fWZ1bmN0aW9uIG0odCxlLG4pe2NvbnN0IHI9dFtlXTt0W2VdPXRbbl0sdFtuXT1yfWZ1bmN0aW9uIHYodCxlLG4scixvKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuLTE7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4/KHI9bixuPTApOm4+MjE0NzQ4MzY0Nz9uPTIxNDc0ODM2NDc6bjwtMjE0NzQ4MzY0OCYmKG49LTIxNDc0ODM2NDgpLEsobj0rbikmJihuPW8/MDp0Lmxlbmd0aC0xKSxuPDAmJihuPXQubGVuZ3RoK24pLG4+PXQubGVuZ3RoKXtpZihvKXJldHVybi0xO249dC5sZW5ndGgtMX1lbHNlIGlmKG48MCl7aWYoIW8pcmV0dXJuLTE7bj0wfWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT11LmZyb20oZSxyKSksdS5pc0J1ZmZlcihlKSlyZXR1cm4gMD09PWUubGVuZ3RoPy0xOmIodCxlLG4scixvKTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gZSY9MjU1LFwiZnVuY3Rpb25cIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/bz9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodCxlLG4pOlVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwodCxlLG4pOmIodCxbZV0sbixyLG8pO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXJcIil9ZnVuY3Rpb24gYih0LGUsbixyLG8pe2xldCBpLGE9MSxzPXQubGVuZ3RoLHU9ZS5sZW5ndGg7aWYodm9pZCAwIT09ciYmKFwidWNzMlwiPT09KHI9U3RyaW5nKHIpLnRvTG93ZXJDYXNlKCkpfHxcInVjcy0yXCI9PT1yfHxcInV0ZjE2bGVcIj09PXJ8fFwidXRmLTE2bGVcIj09PXIpKXtpZih0Lmxlbmd0aDwyfHxlLmxlbmd0aDwyKXJldHVybi0xO2E9MixzLz0yLHUvPTIsbi89Mn1mdW5jdGlvbiBsKHQsZSl7cmV0dXJuIDE9PT1hP3RbZV06dC5yZWFkVUludDE2QkUoZSphKX1pZihvKXtsZXQgcj0tMTtmb3IoaT1uO2k8cztpKyspaWYobCh0LGkpPT09bChlLC0xPT09cj8wOmktcikpe2lmKC0xPT09ciYmKHI9aSksaS1yKzE9PT11KXJldHVybiByKmF9ZWxzZS0xIT09ciYmKGktPWktcikscj0tMX1lbHNlIGZvcihuK3U+cyYmKG49cy11KSxpPW47aT49MDtpLS0pe2xldCBuPSEwO2ZvcihsZXQgcj0wO3I8dTtyKyspaWYobCh0LGkrcikhPT1sKGUscikpe249ITE7YnJlYWt9aWYobilyZXR1cm4gaX1yZXR1cm4tMX1mdW5jdGlvbiB3KHQsZSxuLHIpe249TnVtYmVyKG4pfHwwO2NvbnN0IG89dC5sZW5ndGgtbjtyPyhyPU51bWJlcihyKSk+byYmKHI9byk6cj1vO2NvbnN0IGk9ZS5sZW5ndGg7bGV0IGE7Zm9yKHI+aS8yJiYocj1pLzIpLGE9MDthPHI7KythKXtjb25zdCByPXBhcnNlSW50KGUuc3Vic3RyKDIqYSwyKSwxNik7aWYoSyhyKSlyZXR1cm4gYTt0W24rYV09cn1yZXR1cm4gYX1mdW5jdGlvbiBfKHQsZSxuLHIpe3JldHVybiBKKFYoZSx0Lmxlbmd0aC1uKSx0LG4scil9ZnVuY3Rpb24gRSh0LGUsbixyKXtyZXR1cm4gSihmdW5jdGlvbih0KXtjb25zdCBlPVtdO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7KytuKWUucHVzaCgyNTUmdC5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gZX0oZSksdCxuLHIpfWZ1bmN0aW9uIFModCxlLG4scil7cmV0dXJuIEooRyhlKSx0LG4scil9ZnVuY3Rpb24gQSh0LGUsbixyKXtyZXR1cm4gSihmdW5jdGlvbih0LGUpe2xldCBuLHIsbztjb25zdCBpPVtdO2ZvcihsZXQgYT0wO2E8dC5sZW5ndGgmJiEoKGUtPTIpPDApOysrYSluPXQuY2hhckNvZGVBdChhKSxyPW4+Pjgsbz1uJTI1NixpLnB1c2gobyksaS5wdXNoKHIpO3JldHVybiBpfShlLHQubGVuZ3RoLW4pLHQsbixyKX1mdW5jdGlvbiBJKHQsZSxuKXtyZXR1cm4gMD09PWUmJm49PT10Lmxlbmd0aD9yLmZyb21CeXRlQXJyYXkodCk6ci5mcm9tQnl0ZUFycmF5KHQuc2xpY2UoZSxuKSl9ZnVuY3Rpb24gVCh0LGUsbil7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtjb25zdCByPVtdO2xldCBvPWU7Zm9yKDtvPG47KXtjb25zdCBlPXRbb107bGV0IGk9bnVsbCxhPWU+MjM5PzQ6ZT4yMjM/MzplPjE5MT8yOjE7aWYobythPD1uKXtsZXQgbixyLHMsdTtzd2l0Y2goYSl7Y2FzZSAxOmU8MTI4JiYoaT1lKTticmVhaztjYXNlIDI6bj10W28rMV0sMTI4PT0oMTkyJm4pJiYodT0oMzEmZSk8PDZ8NjMmbix1PjEyNyYmKGk9dSkpO2JyZWFrO2Nhc2UgMzpuPXRbbysxXSxyPXRbbysyXSwxMjg9PSgxOTImbikmJjEyOD09KDE5MiZyKSYmKHU9KDE1JmUpPDwxMnwoNjMmbik8PDZ8NjMmcix1PjIwNDcmJih1PDU1Mjk2fHx1PjU3MzQzKSYmKGk9dSkpO2JyZWFrO2Nhc2UgNDpuPXRbbysxXSxyPXRbbysyXSxzPXRbbyszXSwxMjg9PSgxOTImbikmJjEyOD09KDE5MiZyKSYmMTI4PT0oMTkyJnMpJiYodT0oMTUmZSk8PDE4fCg2MyZuKTw8MTJ8KDYzJnIpPDw2fDYzJnMsdT42NTUzNSYmdTwxMTE0MTEyJiYoaT11KSl9fW51bGw9PT1pPyhpPTY1NTMzLGE9MSk6aT42NTUzNSYmKGktPTY1NTM2LHIucHVzaChpPj4+MTAmMTAyM3w1NTI5NiksaT01NjMyMHwxMDIzJmkpLHIucHVzaChpKSxvKz1hfXJldHVybiBmdW5jdGlvbih0KXtjb25zdCBlPXQubGVuZ3RoO2lmKGU8PVIpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQpO2xldCBuPVwiXCIscj0wO2Zvcig7cjxlOyluKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0LnNsaWNlKHIscis9UikpO3JldHVybiBufShyKX1lLmtNYXhMZW5ndGg9YSx1LlRZUEVEX0FSUkFZX1NVUFBPUlQ9ZnVuY3Rpb24oKXt0cnl7Y29uc3QgdD1uZXcgVWludDhBcnJheSgxKSxlPXtmb286ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9fTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsVWludDhBcnJheS5wcm90b3R5cGUpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpLDQyPT09dC5mb28oKX1jYXRjaCh0KXtyZXR1cm4hMX19KCksdS5UWVBFRF9BUlJBWV9TVVBQT1JUfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgY29uc29sZS5lcnJvcnx8Y29uc29sZS5lcnJvcihcIlRoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSBgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LlwiKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsXCJwYXJlbnRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtpZih1LmlzQnVmZmVyKHRoaXMpKXJldHVybiB0aGlzLmJ1ZmZlcn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodS5wcm90b3R5cGUsXCJvZmZzZXRcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtpZih1LmlzQnVmZmVyKHRoaXMpKXJldHVybiB0aGlzLmJ5dGVPZmZzZXR9fSksdS5wb29sU2l6ZT04MTkyLHUuZnJvbT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGwodCxlLG4pfSxPYmplY3Quc2V0UHJvdG90eXBlT2YodS5wcm90b3R5cGUsVWludDhBcnJheS5wcm90b3R5cGUpLE9iamVjdC5zZXRQcm90b3R5cGVPZih1LFVpbnQ4QXJyYXkpLHUuYWxsb2M9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbih0LGUsbil7cmV0dXJuIGModCksdDw9MD9zKHQpOnZvaWQgMCE9PWU/XCJzdHJpbmdcIj09dHlwZW9mIG4/cyh0KS5maWxsKGUsbik6cyh0KS5maWxsKGUpOnModCl9KHQsZSxuKX0sdS5hbGxvY1Vuc2FmZT1mdW5jdGlvbih0KXtyZXR1cm4gZih0KX0sdS5hbGxvY1Vuc2FmZVNsb3c9ZnVuY3Rpb24odCl7cmV0dXJuIGYodCl9LHUuaXNCdWZmZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJiEwPT09dC5faXNCdWZmZXImJnQhPT11LnByb3RvdHlwZX0sdS5jb21wYXJlPWZ1bmN0aW9uKHQsZSl7aWYoWSh0LFVpbnQ4QXJyYXkpJiYodD11LmZyb20odCx0Lm9mZnNldCx0LmJ5dGVMZW5ndGgpKSxZKGUsVWludDhBcnJheSkmJihlPXUuZnJvbShlLGUub2Zmc2V0LGUuYnl0ZUxlbmd0aCkpLCF1LmlzQnVmZmVyKHQpfHwhdS5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJidWYxXCIsIFwiYnVmMlwiIGFyZ3VtZW50cyBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5Jyk7aWYodD09PWUpcmV0dXJuIDA7bGV0IG49dC5sZW5ndGgscj1lLmxlbmd0aDtmb3IobGV0IG89MCxpPU1hdGgubWluKG4scik7bzxpOysrbylpZih0W29dIT09ZVtvXSl7bj10W29dLHI9ZVtvXTticmVha31yZXR1cm4gbjxyPy0xOnI8bj8xOjB9LHUuaXNFbmNvZGluZz1mdW5jdGlvbih0KXtzd2l0Y2goU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHUuY29uY2F0PWZ1bmN0aW9uKHQsZSl7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PXQubGVuZ3RoKXJldHVybiB1LmFsbG9jKDApO2xldCBuO2lmKHZvaWQgMD09PWUpZm9yKGU9MCxuPTA7bjx0Lmxlbmd0aDsrK24pZSs9dFtuXS5sZW5ndGg7Y29uc3Qgcj11LmFsbG9jVW5zYWZlKGUpO2xldCBvPTA7Zm9yKG49MDtuPHQubGVuZ3RoOysrbil7bGV0IGU9dFtuXTtpZihZKGUsVWludDhBcnJheSkpbytlLmxlbmd0aD5yLmxlbmd0aD8odS5pc0J1ZmZlcihlKXx8KGU9dS5mcm9tKGUpKSxlLmNvcHkocixvKSk6VWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwocixlLG8pO2Vsc2V7aWYoIXUuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7ZS5jb3B5KHIsbyl9bys9ZS5sZW5ndGh9cmV0dXJuIHJ9LHUuYnl0ZUxlbmd0aD1nLHUucHJvdG90eXBlLl9pc0J1ZmZlcj0hMCx1LnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMubGVuZ3RoO2lmKHQlMiE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzXCIpO2ZvcihsZXQgZT0wO2U8dDtlKz0yKW0odGhpcyxlLGUrMSk7cmV0dXJuIHRoaXN9LHUucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7aWYodCU0IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHNcIik7Zm9yKGxldCBlPTA7ZTx0O2UrPTQpbSh0aGlzLGUsZSszKSxtKHRoaXMsZSsxLGUrMik7cmV0dXJuIHRoaXN9LHUucHJvdG90eXBlLnN3YXA2ND1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5sZW5ndGg7aWYodCU4IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHNcIik7Zm9yKGxldCBlPTA7ZTx0O2UrPTgpbSh0aGlzLGUsZSs3KSxtKHRoaXMsZSsxLGUrNiksbSh0aGlzLGUrMixlKzUpLG0odGhpcyxlKzMsZSs0KTtyZXR1cm4gdGhpc30sdS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMubGVuZ3RoO3JldHVybiAwPT09dD9cIlwiOjA9PT1hcmd1bWVudHMubGVuZ3RoP1QodGhpcywwLHQpOnkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1LnByb3RvdHlwZS50b0xvY2FsZVN0cmluZz11LnByb3RvdHlwZS50b1N0cmluZyx1LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24odCl7aWYoIXUuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7cmV0dXJuIHRoaXM9PT10fHwwPT09dS5jb21wYXJlKHRoaXMsdCl9LHUucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXtsZXQgdD1cIlwiO2NvbnN0IG49ZS5JTlNQRUNUX01BWF9CWVRFUztyZXR1cm4gdD10aGlzLnRvU3RyaW5nKFwiaGV4XCIsMCxuKS5yZXBsYWNlKC8oLnsyfSkvZyxcIiQxIFwiKS50cmltKCksdGhpcy5sZW5ndGg+biYmKHQrPVwiIC4uLiBcIiksXCI8QnVmZmVyIFwiK3QrXCI+XCJ9LGkmJih1LnByb3RvdHlwZVtpXT11LnByb3RvdHlwZS5pbnNwZWN0KSx1LnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7aWYoWSh0LFVpbnQ4QXJyYXkpJiYodD11LmZyb20odCx0Lm9mZnNldCx0LmJ5dGVMZW5ndGgpKSwhdS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJ0YXJnZXRcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5LiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIHQpO2lmKHZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQ/dC5sZW5ndGg6MCksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89dGhpcy5sZW5ndGgpLGU8MHx8bj50Lmxlbmd0aHx8cjwwfHxvPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwib3V0IG9mIHJhbmdlIGluZGV4XCIpO2lmKHI+PW8mJmU+PW4pcmV0dXJuIDA7aWYocj49bylyZXR1cm4tMTtpZihlPj1uKXJldHVybiAxO2lmKHRoaXM9PT10KXJldHVybiAwO2xldCBpPShvPj4+PTApLShyPj4+PTApLGE9KG4+Pj49MCktKGU+Pj49MCk7Y29uc3Qgcz1NYXRoLm1pbihpLGEpLGw9dGhpcy5zbGljZShyLG8pLGM9dC5zbGljZShlLG4pO2ZvcihsZXQgdD0wO3Q8czsrK3QpaWYobFt0XSE9PWNbdF0pe2k9bFt0XSxhPWNbdF07YnJlYWt9cmV0dXJuIGk8YT8tMTphPGk/MTowfSx1LnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbih0LGUsbil7cmV0dXJuLTEhPT10aGlzLmluZGV4T2YodCxlLG4pfSx1LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdih0aGlzLHQsZSxuLCEwKX0sdS5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2KHRoaXMsdCxlLG4sITEpfSx1LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0LGUsbixyKXtpZih2b2lkIDA9PT1lKXI9XCJ1dGY4XCIsbj10aGlzLmxlbmd0aCxlPTA7ZWxzZSBpZih2b2lkIDA9PT1uJiZcInN0cmluZ1wiPT10eXBlb2YgZSlyPWUsbj10aGlzLmxlbmd0aCxlPTA7ZWxzZXtpZighaXNGaW5pdGUoZSkpdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIik7ZT4+Pj0wLGlzRmluaXRlKG4pPyhuPj4+PTAsdm9pZCAwPT09ciYmKHI9XCJ1dGY4XCIpKToocj1uLG49dm9pZCAwKX1jb25zdCBvPXRoaXMubGVuZ3RoLWU7aWYoKHZvaWQgMD09PW58fG4+bykmJihuPW8pLHQubGVuZ3RoPjAmJihuPDB8fGU8MCl8fGU+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kc1wiKTtyfHwocj1cInV0ZjhcIik7bGV0IGk9ITE7Zm9yKDs7KXN3aXRjaChyKXtjYXNlXCJoZXhcIjpyZXR1cm4gdyh0aGlzLHQsZSxuKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gXyh0aGlzLHQsZSxuKTtjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBFKHRoaXMsdCxlLG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiBTKHRoaXMsdCxlLG4pO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiBBKHRoaXMsdCxlLG4pO2RlZmF1bHQ6aWYoaSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrcik7cj0oXCJcIityKS50b0xvd2VyQ2FzZSgpLGk9ITB9fSx1LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkJ1ZmZlclwiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07Y29uc3QgUj00MDk2O2Z1bmN0aW9uIHgodCxlLG4pe2xldCByPVwiXCI7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtmb3IobGV0IG89ZTtvPG47KytvKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI3JnRbb10pO3JldHVybiByfWZ1bmN0aW9uIEModCxlLG4pe2xldCByPVwiXCI7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtmb3IobGV0IG89ZTtvPG47KytvKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtvXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQih0LGUsbil7Y29uc3Qgcj10Lmxlbmd0aDsoIWV8fGU8MCkmJihlPTApLCghbnx8bjwwfHxuPnIpJiYobj1yKTtsZXQgbz1cIlwiO2ZvcihsZXQgcj1lO3I8bjsrK3Ipbys9WFt0W3JdXTtyZXR1cm4gb31mdW5jdGlvbiBrKHQsZSxuKXtjb25zdCByPXQuc2xpY2UoZSxuKTtsZXQgbz1cIlwiO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGgtMTt0Kz0yKW8rPVN0cmluZy5mcm9tQ2hhckNvZGUoclt0XSsyNTYqclt0KzFdKTtyZXR1cm4gb31mdW5jdGlvbiBMKHQsZSxuKXtpZih0JTEhPTB8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm9mZnNldCBpcyBub3QgdWludFwiKTtpZih0K2U+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIil9ZnVuY3Rpb24gTyh0LGUsbixyLG8saSl7aWYoIXUuaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYoZT5vfHxlPGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYobityPnQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIFUodCxlLG4scixvKXtGKGUscixvLHQsbiw3KTtsZXQgaT1OdW1iZXIoZSZCaWdJbnQoNDI5NDk2NzI5NSkpO3RbbisrXT1pLGk+Pj04LHRbbisrXT1pLGk+Pj04LHRbbisrXT1pLGk+Pj04LHRbbisrXT1pO2xldCBhPU51bWJlcihlPj5CaWdJbnQoMzIpJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7cmV0dXJuIHRbbisrXT1hLGE+Pj04LHRbbisrXT1hLGE+Pj04LHRbbisrXT1hLGE+Pj04LHRbbisrXT1hLG59ZnVuY3Rpb24gaih0LGUsbixyLG8pe0YoZSxyLG8sdCxuLDcpO2xldCBpPU51bWJlcihlJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7dFtuKzddPWksaT4+PTgsdFtuKzZdPWksaT4+PTgsdFtuKzVdPWksaT4+PTgsdFtuKzRdPWk7bGV0IGE9TnVtYmVyKGU+PkJpZ0ludCgzMikmQmlnSW50KDQyOTQ5NjcyOTUpKTtyZXR1cm4gdFtuKzNdPWEsYT4+PTgsdFtuKzJdPWEsYT4+PTgsdFtuKzFdPWEsYT4+PTgsdFtuXT1hLG4rOH1mdW5jdGlvbiBOKHQsZSxuLHIsbyxpKXtpZihuK3I+dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYobjwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIE0odCxlLG4scixpKXtyZXR1cm4gZT0rZSxuPj4+PTAsaXx8Tih0LDAsbiw0KSxvLndyaXRlKHQsZSxuLHIsMjMsNCksbis0fWZ1bmN0aW9uIFAodCxlLG4scixpKXtyZXR1cm4gZT0rZSxuPj4+PTAsaXx8Tih0LDAsbiw4KSxvLndyaXRlKHQsZSxuLHIsNTIsOCksbis4fXUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLmxlbmd0aDsodD1+fnQpPDA/KHQrPW4pPDAmJih0PTApOnQ+biYmKHQ9biksKGU9dm9pZCAwPT09ZT9uOn5+ZSk8MD8oZSs9bik8MCYmKGU9MCk6ZT5uJiYoZT1uKSxlPHQmJihlPXQpO2NvbnN0IHI9dGhpcy5zdWJhcnJheSh0LGUpO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Yocix1LnByb3RvdHlwZSkscn0sdS5wcm90b3R5cGUucmVhZFVpbnRMRT11LnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKHQsZSxuKXt0Pj4+PTAsZT4+Pj0wLG58fEwodCxlLHRoaXMubGVuZ3RoKTtsZXQgcj10aGlzW3RdLG89MSxpPTA7Zm9yKDsrK2k8ZSYmKG8qPTI1Nik7KXIrPXRoaXNbdCtpXSpvO3JldHVybiByfSx1LnByb3RvdHlwZS5yZWFkVWludEJFPXUucHJvdG90eXBlLnJlYWRVSW50QkU9ZnVuY3Rpb24odCxlLG4pe3Q+Pj49MCxlPj4+PTAsbnx8TCh0LGUsdGhpcy5sZW5ndGgpO2xldCByPXRoaXNbdCstLWVdLG89MTtmb3IoO2U+MCYmKG8qPTI1Nik7KXIrPXRoaXNbdCstLWVdKm87cmV0dXJuIHJ9LHUucHJvdG90eXBlLnJlYWRVaW50OD11LnByb3RvdHlwZS5yZWFkVUludDg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCwxLHRoaXMubGVuZ3RoKSx0aGlzW3RdfSx1LnByb3RvdHlwZS5yZWFkVWludDE2TEU9dS5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsMix0aGlzLmxlbmd0aCksdGhpc1t0XXx0aGlzW3QrMV08PDh9LHUucHJvdG90eXBlLnJlYWRVaW50MTZCRT11LnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCwyLHRoaXMubGVuZ3RoKSx0aGlzW3RdPDw4fHRoaXNbdCsxXX0sdS5wcm90b3R5cGUucmVhZFVpbnQzMkxFPXUucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDQsdGhpcy5sZW5ndGgpLCh0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2KSsxNjc3NzIxNip0aGlzW3QrM119LHUucHJvdG90eXBlLnJlYWRVaW50MzJCRT11LnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW3RdKyh0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM10pfSx1LnByb3RvdHlwZS5yZWFkQmlnVUludDY0TEU9WigoZnVuY3Rpb24odCl7eih0Pj4+PTAsXCJvZmZzZXRcIik7Y29uc3QgZT10aGlzW3RdLG49dGhpc1t0KzddO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PW58fHEodCx0aGlzLmxlbmd0aC04KTtjb25zdCByPWUrMjU2KnRoaXNbKyt0XSs2NTUzNip0aGlzWysrdF0rdGhpc1srK3RdKjIqKjI0LG89dGhpc1srK3RdKzI1Nip0aGlzWysrdF0rNjU1MzYqdGhpc1srK3RdK24qMioqMjQ7cmV0dXJuIEJpZ0ludChyKSsoQmlnSW50KG8pPDxCaWdJbnQoMzIpKX0pKSx1LnByb3RvdHlwZS5yZWFkQmlnVUludDY0QkU9WigoZnVuY3Rpb24odCl7eih0Pj4+PTAsXCJvZmZzZXRcIik7Y29uc3QgZT10aGlzW3RdLG49dGhpc1t0KzddO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PW58fHEodCx0aGlzLmxlbmd0aC04KTtjb25zdCByPWUqMioqMjQrNjU1MzYqdGhpc1srK3RdKzI1Nip0aGlzWysrdF0rdGhpc1srK3RdLG89dGhpc1srK3RdKjIqKjI0KzY1NTM2KnRoaXNbKyt0XSsyNTYqdGhpc1srK3RdK247cmV0dXJuKEJpZ0ludChyKTw8QmlnSW50KDMyKSkrQmlnSW50KG8pfSkpLHUucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbih0LGUsbil7dD4+Pj0wLGU+Pj49MCxufHxMKHQsZSx0aGlzLmxlbmd0aCk7bGV0IHI9dGhpc1t0XSxvPTEsaT0wO2Zvcig7KytpPGUmJihvKj0yNTYpOylyKz10aGlzW3QraV0qbztyZXR1cm4gbyo9MTI4LHI+PW8mJihyLT1NYXRoLnBvdygyLDgqZSkpLHJ9LHUucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbih0LGUsbil7dD4+Pj0wLGU+Pj49MCxufHxMKHQsZSx0aGlzLmxlbmd0aCk7bGV0IHI9ZSxvPTEsaT10aGlzW3QrLS1yXTtmb3IoO3I+MCYmKG8qPTI1Nik7KWkrPXRoaXNbdCstLXJdKm87cmV0dXJuIG8qPTEyOCxpPj1vJiYoaS09TWF0aC5wb3coMiw4KmUpKSxpfSx1LnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW3RdPy0xKigyNTUtdGhpc1t0XSsxKTp0aGlzW3RdfSx1LnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbih0LGUpe3Q+Pj49MCxlfHxMKHQsMix0aGlzLmxlbmd0aCk7Y29uc3Qgbj10aGlzW3RdfHRoaXNbdCsxXTw8ODtyZXR1cm4gMzI3Njgmbj80Mjk0OTAxNzYwfG46bn0sdS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24odCxlKXt0Pj4+PTAsZXx8TCh0LDIsdGhpcy5sZW5ndGgpO2NvbnN0IG49dGhpc1t0KzFdfHRoaXNbdF08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LHUucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+Pj49MCxlfHxMKHQsNCx0aGlzLmxlbmd0aCksdGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNnx0aGlzW3QrM108PDI0fSx1LnByb3RvdHlwZS5yZWFkSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDQsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDI0fHRoaXNbdCsxXTw8MTZ8dGhpc1t0KzJdPDw4fHRoaXNbdCszXX0sdS5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEU9WigoZnVuY3Rpb24odCl7eih0Pj4+PTAsXCJvZmZzZXRcIik7Y29uc3QgZT10aGlzW3RdLG49dGhpc1t0KzddO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PW58fHEodCx0aGlzLmxlbmd0aC04KTtjb25zdCByPXRoaXNbdCs0XSsyNTYqdGhpc1t0KzVdKzY1NTM2KnRoaXNbdCs2XSsobjw8MjQpO3JldHVybihCaWdJbnQocik8PEJpZ0ludCgzMikpK0JpZ0ludChlKzI1Nip0aGlzWysrdF0rNjU1MzYqdGhpc1srK3RdK3RoaXNbKyt0XSoyKioyNCl9KSksdS5wcm90b3R5cGUucmVhZEJpZ0ludDY0QkU9WigoZnVuY3Rpb24odCl7eih0Pj4+PTAsXCJvZmZzZXRcIik7Y29uc3QgZT10aGlzW3RdLG49dGhpc1t0KzddO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PW58fHEodCx0aGlzLmxlbmd0aC04KTtjb25zdCByPShlPDwyNCkrNjU1MzYqdGhpc1srK3RdKzI1Nip0aGlzWysrdF0rdGhpc1srK3RdO3JldHVybihCaWdJbnQocik8PEJpZ0ludCgzMikpK0JpZ0ludCh0aGlzWysrdF0qMioqMjQrNjU1MzYqdGhpc1srK3RdKzI1Nip0aGlzWysrdF0rbil9KSksdS5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD4+Pj0wLGV8fEwodCw0LHRoaXMubGVuZ3RoKSxvLnJlYWQodGhpcyx0LCEwLDIzLDQpfSx1LnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDQsdGhpcy5sZW5ndGgpLG8ucmVhZCh0aGlzLHQsITEsMjMsNCl9LHUucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDgsdGhpcy5sZW5ndGgpLG8ucmVhZCh0aGlzLHQsITAsNTIsOCl9LHUucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbih0LGUpe3JldHVybiB0Pj4+PTAsZXx8TCh0LDgsdGhpcy5sZW5ndGgpLG8ucmVhZCh0aGlzLHQsITEsNTIsOCl9LHUucHJvdG90eXBlLndyaXRlVWludExFPXUucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHQ9K3QsZT4+Pj0wLG4+Pj49MCwhcil7Tyh0aGlzLHQsZSxuLE1hdGgucG93KDIsOCpuKS0xLDApfWxldCBvPTEsaT0wO2Zvcih0aGlzW2VdPTI1NSZ0OysraTxuJiYobyo9MjU2KTspdGhpc1tlK2ldPXQvbyYyNTU7cmV0dXJuIGUrbn0sdS5wcm90b3R5cGUud3JpdGVVaW50QkU9dS5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24odCxlLG4scil7aWYodD0rdCxlPj4+PTAsbj4+Pj0wLCFyKXtPKHRoaXMsdCxlLG4sTWF0aC5wb3coMiw4Km4pLTEsMCl9bGV0IG89bi0xLGk9MTtmb3IodGhpc1tlK29dPTI1NSZ0Oy0tbz49MCYmKGkqPTI1Nik7KXRoaXNbZStvXT10L2kmMjU1O3JldHVybiBlK259LHUucHJvdG90eXBlLndyaXRlVWludDg9dS5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsMSwyNTUsMCksdGhpc1tlXT0yNTUmdCxlKzF9LHUucHJvdG90eXBlLndyaXRlVWludDE2TEU9dS5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsMiw2NTUzNSwwKSx0aGlzW2VdPTI1NSZ0LHRoaXNbZSsxXT10Pj4+OCxlKzJ9LHUucHJvdG90eXBlLndyaXRlVWludDE2QkU9dS5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsMiw2NTUzNSwwKSx0aGlzW2VdPXQ+Pj44LHRoaXNbZSsxXT0yNTUmdCxlKzJ9LHUucHJvdG90eXBlLndyaXRlVWludDMyTEU9dS5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsNCw0Mjk0OTY3Mjk1LDApLHRoaXNbZSszXT10Pj4+MjQsdGhpc1tlKzJdPXQ+Pj4xNix0aGlzW2UrMV09dD4+PjgsdGhpc1tlXT0yNTUmdCxlKzR9LHUucHJvdG90eXBlLndyaXRlVWludDMyQkU9dS5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsNCw0Mjk0OTY3Mjk1LDApLHRoaXNbZV09dD4+PjI0LHRoaXNbZSsxXT10Pj4+MTYsdGhpc1tlKzJdPXQ+Pj44LHRoaXNbZSszXT0yNTUmdCxlKzR9LHUucHJvdG90eXBlLndyaXRlQmlnVUludDY0TEU9WigoZnVuY3Rpb24odCxlPTApe3JldHVybiBVKHRoaXMsdCxlLEJpZ0ludCgwKSxCaWdJbnQoXCIweGZmZmZmZmZmZmZmZmZmZmZcIikpfSkpLHUucHJvdG90eXBlLndyaXRlQmlnVUludDY0QkU9WigoZnVuY3Rpb24odCxlPTApe3JldHVybiBqKHRoaXMsdCxlLEJpZ0ludCgwKSxCaWdJbnQoXCIweGZmZmZmZmZmZmZmZmZmZmZcIikpfSkpLHUucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24odCxlLG4scil7aWYodD0rdCxlPj4+PTAsIXIpe2NvbnN0IHI9TWF0aC5wb3coMiw4Km4tMSk7Tyh0aGlzLHQsZSxuLHItMSwtcil9bGV0IG89MCxpPTEsYT0wO2Zvcih0aGlzW2VdPTI1NSZ0OysrbzxuJiYoaSo9MjU2KTspdDwwJiYwPT09YSYmMCE9PXRoaXNbZStvLTFdJiYoYT0xKSx0aGlzW2Urb109KHQvaT4+MCktYSYyNTU7cmV0dXJuIGUrbn0sdS5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbih0LGUsbixyKXtpZih0PSt0LGU+Pj49MCwhcil7Y29uc3Qgcj1NYXRoLnBvdygyLDgqbi0xKTtPKHRoaXMsdCxlLG4sci0xLC1yKX1sZXQgbz1uLTEsaT0xLGE9MDtmb3IodGhpc1tlK29dPTI1NSZ0Oy0tbz49MCYmKGkqPTI1Nik7KXQ8MCYmMD09PWEmJjAhPT10aGlzW2UrbysxXSYmKGE9MSksdGhpc1tlK29dPSh0L2k+PjApLWEmMjU1O3JldHVybiBlK259LHUucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsMSwxMjcsLTEyOCksdDwwJiYodD0yNTUrdCsxKSx0aGlzW2VdPTI1NSZ0LGUrMX0sdS5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD0rdCxlPj4+PTAsbnx8Tyh0aGlzLHQsZSwyLDMyNzY3LC0zMjc2OCksdGhpc1tlXT0yNTUmdCx0aGlzW2UrMV09dD4+PjgsZSsyfSx1LnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGU+Pj49MCxufHxPKHRoaXMsdCxlLDIsMzI3NjcsLTMyNzY4KSx0aGlzW2VdPXQ+Pj44LHRoaXNbZSsxXT0yNTUmdCxlKzJ9LHUucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9K3QsZT4+Pj0wLG58fE8odGhpcyx0LGUsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSx0aGlzW2VdPTI1NSZ0LHRoaXNbZSsxXT10Pj4+OCx0aGlzW2UrMl09dD4+PjE2LHRoaXNbZSszXT10Pj4+MjQsZSs0fSx1LnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PSt0LGU+Pj49MCxufHxPKHRoaXMsdCxlLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksdDwwJiYodD00Mjk0OTY3Mjk1K3QrMSksdGhpc1tlXT10Pj4+MjQsdGhpc1tlKzFdPXQ+Pj4xNix0aGlzW2UrMl09dD4+PjgsdGhpc1tlKzNdPTI1NSZ0LGUrNH0sdS5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NExFPVooKGZ1bmN0aW9uKHQsZT0wKXtyZXR1cm4gVSh0aGlzLHQsZSwtQmlnSW50KFwiMHg4MDAwMDAwMDAwMDAwMDAwXCIpLEJpZ0ludChcIjB4N2ZmZmZmZmZmZmZmZmZmZlwiKSl9KSksdS5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFPVooKGZ1bmN0aW9uKHQsZT0wKXtyZXR1cm4gaih0aGlzLHQsZSwtQmlnSW50KFwiMHg4MDAwMDAwMDAwMDAwMDAwXCIpLEJpZ0ludChcIjB4N2ZmZmZmZmZmZmZmZmZmZlwiKSl9KSksdS5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTSh0aGlzLHQsZSwhMCxuKX0sdS5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTSh0aGlzLHQsZSwhMSxuKX0sdS5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFAodGhpcyx0LGUsITAsbil9LHUucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBQKHRoaXMsdCxlLCExLG4pfSx1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCF1LmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXJcIik7aWYobnx8KG49MCkscnx8MD09PXJ8fChyPXRoaXMubGVuZ3RoKSxlPj10Lmxlbmd0aCYmKGU9dC5sZW5ndGgpLGV8fChlPTApLHI+MCYmcjxuJiYocj1uKSxyPT09bilyZXR1cm4gMDtpZigwPT09dC5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZihlPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzXCIpO2lmKG48MHx8bj49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIik7cj50aGlzLmxlbmd0aCYmKHI9dGhpcy5sZW5ndGgpLHQubGVuZ3RoLWU8ci1uJiYocj10Lmxlbmd0aC1lK24pO2NvbnN0IG89ci1uO3JldHVybiB0aGlzPT09dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbj90aGlzLmNvcHlXaXRoaW4oZSxuLHIpOlVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKHQsdGhpcy5zdWJhcnJheShuLHIpLGUpLG99LHUucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24odCxlLG4scil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlPyhyPWUsZT0wLG49dGhpcy5sZW5ndGgpOlwic3RyaW5nXCI9PXR5cGVvZiBuJiYocj1uLG49dGhpcy5sZW5ndGgpLHZvaWQgMCE9PXImJlwic3RyaW5nXCIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoXCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiByJiYhdS5pc0VuY29kaW5nKHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIityKTtpZigxPT09dC5sZW5ndGgpe2NvbnN0IGU9dC5jaGFyQ29kZUF0KDApOyhcInV0ZjhcIj09PXImJmU8MTI4fHxcImxhdGluMVwiPT09cikmJih0PWUpfX1lbHNlXCJudW1iZXJcIj09dHlwZW9mIHQ/dCY9MjU1OlwiYm9vbGVhblwiPT10eXBlb2YgdCYmKHQ9TnVtYmVyKHQpKTtpZihlPDB8fHRoaXMubGVuZ3RoPGV8fHRoaXMubGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJPdXQgb2YgcmFuZ2UgaW5kZXhcIik7aWYobjw9ZSlyZXR1cm4gdGhpcztsZXQgbztpZihlPj4+PTAsbj12b2lkIDA9PT1uP3RoaXMubGVuZ3RoOm4+Pj4wLHR8fCh0PTApLFwibnVtYmVyXCI9PXR5cGVvZiB0KWZvcihvPWU7bzxuOysrbyl0aGlzW29dPXQ7ZWxzZXtjb25zdCBpPXUuaXNCdWZmZXIodCk/dDp1LmZyb20odCxyKSxhPWkubGVuZ3RoO2lmKDA9PT1hKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrdCsnXCIgaXMgaW52YWxpZCBmb3IgYXJndW1lbnQgXCJ2YWx1ZVwiJyk7Zm9yKG89MDtvPG4tZTsrK28pdGhpc1tvK2VdPWlbbyVhXX1yZXR1cm4gdGhpc307Y29uc3QgVz17fTtmdW5jdGlvbiAkKHQsZSxuKXtXW3RdPWNsYXNzIE5vZGVFcnJvciBleHRlbmRzIG57Y29uc3RydWN0b3IoKXtzdXBlcigpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibWVzc2FnZVwiLHt2YWx1ZTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0aGlzLm5hbWU9YCR7dGhpcy5uYW1lfSBbJHt0fV1gLHRoaXMuc3RhY2ssZGVsZXRlIHRoaXMubmFtZX1nZXQgY29kZSgpe3JldHVybiB0fXNldCBjb2RlKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29kZVwiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTp0LHdyaXRhYmxlOiEwfSl9dG9TdHJpbmcoKXtyZXR1cm5gJHt0aGlzLm5hbWV9IFske3R9XTogJHt0aGlzLm1lc3NhZ2V9YH19fWZ1bmN0aW9uIEQodCl7bGV0IGU9XCJcIixuPXQubGVuZ3RoO2NvbnN0IHI9XCItXCI9PT10WzBdPzE6MDtmb3IoO24+PXIrNDtuLT0zKWU9YF8ke3Quc2xpY2Uobi0zLG4pfSR7ZX1gO3JldHVybmAke3Quc2xpY2UoMCxuKX0ke2V9YH1mdW5jdGlvbiBGKHQsZSxuLHIsbyxpKXtpZih0Pm58fHQ8ZSl7Y29uc3Qgcj1cImJpZ2ludFwiPT10eXBlb2YgZT9cIm5cIjpcIlwiO2xldCBvO3Rocm93IG89aT4zPzA9PT1lfHxlPT09QmlnSW50KDApP2A+PSAwJHtyfSBhbmQgPCAyJHtyfSAqKiAkezgqKGkrMSl9JHtyfWA6YD49IC0oMiR7cn0gKiogJHs4KihpKzEpLTF9JHtyfSkgYW5kIDwgMiAqKiAkezgqKGkrMSktMX0ke3J9YDpgPj0gJHtlfSR7cn0gYW5kIDw9ICR7bn0ke3J9YCxuZXcgVy5FUlJfT1VUX09GX1JBTkdFKFwidmFsdWVcIixvLHQpfSFmdW5jdGlvbih0LGUsbil7eihlLFwib2Zmc2V0XCIpLHZvaWQgMCE9PXRbZV0mJnZvaWQgMCE9PXRbZStuXXx8cShlLHQubGVuZ3RoLShuKzEpKX0ocixvLGkpfWZ1bmN0aW9uIHoodCxlKXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVy5FUlJfSU5WQUxJRF9BUkdfVFlQRShlLFwibnVtYmVyXCIsdCl9ZnVuY3Rpb24gcSh0LGUsbil7aWYoTWF0aC5mbG9vcih0KSE9PXQpdGhyb3cgeih0LG4pLG5ldyBXLkVSUl9PVVRfT0ZfUkFOR0Uobnx8XCJvZmZzZXRcIixcImFuIGludGVnZXJcIix0KTtpZihlPDApdGhyb3cgbmV3IFcuRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTO3Rocm93IG5ldyBXLkVSUl9PVVRfT0ZfUkFOR0Uobnx8XCJvZmZzZXRcIixgPj0gJHtuPzE6MH0gYW5kIDw9ICR7ZX1gLHQpfSQoXCJFUlJfQlVGRkVSX09VVF9PRl9CT1VORFNcIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQ/YCR7dH0gaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzYDpcIkF0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIn0pLFJhbmdlRXJyb3IpLCQoXCJFUlJfSU5WQUxJRF9BUkdfVFlQRVwiLChmdW5jdGlvbih0LGUpe3JldHVybmBUaGUgXCIke3R9XCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAke3R5cGVvZiBlfWB9KSxUeXBlRXJyb3IpLCQoXCJFUlJfT1VUX09GX1JBTkdFXCIsKGZ1bmN0aW9uKHQsZSxuKXtsZXQgcj1gVGhlIHZhbHVlIG9mIFwiJHt0fVwiIGlzIG91dCBvZiByYW5nZS5gLG89bjtyZXR1cm4gTnVtYmVyLmlzSW50ZWdlcihuKSYmTWF0aC5hYnMobik+MioqMzI/bz1EKFN0cmluZyhuKSk6XCJiaWdpbnRcIj09dHlwZW9mIG4mJihvPVN0cmluZyhuKSwobj5CaWdJbnQoMikqKkJpZ0ludCgzMil8fG48LShCaWdJbnQoMikqKkJpZ0ludCgzMikpKSYmKG89RChvKSksbys9XCJuXCIpLHIrPWAgSXQgbXVzdCBiZSAke2V9LiBSZWNlaXZlZCAke299YCxyfSksUmFuZ2VFcnJvcik7Y29uc3QgSD0vW14rLzAtOUEtWmEtei1fXS9nO2Z1bmN0aW9uIFYodCxlKXtsZXQgbjtlPWV8fDEvMDtjb25zdCByPXQubGVuZ3RoO2xldCBvPW51bGw7Y29uc3QgaT1bXTtmb3IobGV0IGE9MDthPHI7KythKXtpZihuPXQuY2hhckNvZGVBdChhKSxuPjU1Mjk1JiZuPDU3MzQ0KXtpZighbyl7aWYobj41NjMxOSl7KGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWlmKGErMT09PXIpeyhlLT0zKT4tMSYmaS5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1vPW47Y29udGludWV9aWYobjw1NjMyMCl7KGUtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpLG89bjtjb250aW51ZX1uPTY1NTM2KyhvLTU1Mjk2PDwxMHxuLTU2MzIwKX1lbHNlIG8mJihlLT0zKT4tMSYmaS5wdXNoKDIzOSwxOTEsMTg5KTtpZihvPW51bGwsbjwxMjgpe2lmKChlLT0xKTwwKWJyZWFrO2kucHVzaChuKX1lbHNlIGlmKG48MjA0OCl7aWYoKGUtPTIpPDApYnJlYWs7aS5wdXNoKG4+PjZ8MTkyLDYzJm58MTI4KX1lbHNlIGlmKG48NjU1MzYpe2lmKChlLT0zKTwwKWJyZWFrO2kucHVzaChuPj4xMnwyMjQsbj4+NiY2M3wxMjgsNjMmbnwxMjgpfWVsc2V7aWYoIShuPDExMTQxMTIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29kZSBwb2ludFwiKTtpZigoZS09NCk8MClicmVhaztpLnB1c2gobj4+MTh8MjQwLG4+PjEyJjYzfDEyOCxuPj42JjYzfDEyOCw2MyZufDEyOCl9fXJldHVybiBpfWZ1bmN0aW9uIEcodCl7cmV0dXJuIHIudG9CeXRlQXJyYXkoZnVuY3Rpb24odCl7aWYoKHQ9KHQ9dC5zcGxpdChcIj1cIilbMF0pLnRyaW0oKS5yZXBsYWNlKEgsXCJcIikpLmxlbmd0aDwyKXJldHVyblwiXCI7Zm9yKDt0Lmxlbmd0aCU0IT0wOyl0Kz1cIj1cIjtyZXR1cm4gdH0odCkpfWZ1bmN0aW9uIEoodCxlLG4scil7bGV0IG87Zm9yKG89MDtvPHImJiEobytuPj1lLmxlbmd0aHx8bz49dC5sZW5ndGgpOysrbyllW28rbl09dFtvXTtyZXR1cm4gb31mdW5jdGlvbiBZKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfHxudWxsIT10JiZudWxsIT10LmNvbnN0cnVjdG9yJiZudWxsIT10LmNvbnN0cnVjdG9yLm5hbWUmJnQuY29uc3RydWN0b3IubmFtZT09PWUubmFtZX1mdW5jdGlvbiBLKHQpe3JldHVybiB0IT10fWNvbnN0IFg9ZnVuY3Rpb24oKXtjb25zdCB0PVwiMDEyMzQ1Njc4OWFiY2RlZlwiLGU9bmV3IEFycmF5KDI1Nik7Zm9yKGxldCBuPTA7bjwxNjsrK24pe2NvbnN0IHI9MTYqbjtmb3IobGV0IG89MDtvPDE2OysrbyllW3Irb109dFtuXSt0W29dfXJldHVybiBlfSgpO2Z1bmN0aW9uIFoodCl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIEJpZ0ludD9ROnR9ZnVuY3Rpb24gUSgpe3Rocm93IG5ldyBFcnJvcihcIkJpZ0ludCBub3Qgc3VwcG9ydGVkXCIpfX0sNDY1OnQ9Pnt2YXIgZSxuPVwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0P1JlZmxlY3Q6bnVsbCxyPW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYXBwbHk/bi5hcHBseTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKHQsZSxuKX07ZT1uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm93bktleXM/bi5vd25LZXlzOk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKX06ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpfTt2YXIgbz1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKHQpe3JldHVybiB0IT10fTtmdW5jdGlvbiBpKCl7aS5pbml0LmNhbGwodGhpcyl9dC5leHBvcnRzPWksdC5leHBvcnRzLm9uY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7ZnVuY3Rpb24gbyhuKXt0LnJlbW92ZUxpc3RlbmVyKGUsaSkscihuKX1mdW5jdGlvbiBpKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdC5yZW1vdmVMaXN0ZW5lciYmdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsbyksbihbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfWcodCxlLGkse29uY2U6ITB9KSxcImVycm9yXCIhPT1lJiZmdW5jdGlvbih0LGUsbil7XCJmdW5jdGlvblwiPT10eXBlb2YgdC5vbiYmZyh0LFwiZXJyb3JcIixlLG4pfSh0LG8se29uY2U6ITB9KX0pKX0saS5FdmVudEVtaXR0ZXI9aSxpLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMCxpLnByb3RvdHlwZS5fZXZlbnRzQ291bnQ9MCxpLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMDt2YXIgYT0xMDtmdW5jdGlvbiBzKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgdCl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdm9pZCAwPT09dC5fbWF4TGlzdGVuZXJzP2kuZGVmYXVsdE1heExpc3RlbmVyczp0Ll9tYXhMaXN0ZW5lcnN9ZnVuY3Rpb24gbCh0LGUsbixyKXt2YXIgbyxpLGEsbDtpZihzKG4pLHZvaWQgMD09PShpPXQuX2V2ZW50cyk/KGk9dC5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdC5fZXZlbnRzQ291bnQ9MCk6KHZvaWQgMCE9PWkubmV3TGlzdGVuZXImJih0LmVtaXQoXCJuZXdMaXN0ZW5lclwiLGUsbi5saXN0ZW5lcj9uLmxpc3RlbmVyOm4pLGk9dC5fZXZlbnRzKSxhPWlbZV0pLHZvaWQgMD09PWEpYT1pW2VdPW4sKyt0Ll9ldmVudHNDb3VudDtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YT1pW2VdPXI/W24sYV06W2Esbl06cj9hLnVuc2hpZnQobik6YS5wdXNoKG4pLChvPXUodCkpPjAmJmEubGVuZ3RoPm8mJiFhLndhcm5lZCl7YS53YXJuZWQ9ITA7dmFyIGM9bmV3IEVycm9yKFwiUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiBcIithLmxlbmd0aCtcIiBcIitTdHJpbmcoZSkrXCIgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdFwiKTtjLm5hbWU9XCJNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmdcIixjLmVtaXR0ZXI9dCxjLnR5cGU9ZSxjLmNvdW50PWEubGVuZ3RoLGw9Yyxjb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihsKX1yZXR1cm4gdH1mdW5jdGlvbiBjKCl7aWYoIXRoaXMuZmlyZWQpcmV0dXJuIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSx0aGlzLndyYXBGbiksdGhpcy5maXJlZD0hMCwwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpOnRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsYXJndW1lbnRzKX1mdW5jdGlvbiBmKHQsZSxuKXt2YXIgcj17ZmlyZWQ6ITEsd3JhcEZuOnZvaWQgMCx0YXJnZXQ6dCx0eXBlOmUsbGlzdGVuZXI6bn0sbz1jLmJpbmQocik7cmV0dXJuIG8ubGlzdGVuZXI9bixyLndyYXBGbj1vLG99ZnVuY3Rpb24gZCh0LGUsbil7dmFyIHI9dC5fZXZlbnRzO2lmKHZvaWQgMD09PXIpcmV0dXJuW107dmFyIG89cltlXTtyZXR1cm4gdm9pZCAwPT09bz9bXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBvP24/W28ubGlzdGVuZXJ8fG9dOltvXTpuP2Z1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodC5sZW5ndGgpLG49MDtuPGUubGVuZ3RoOysrbillW25dPXRbbl0ubGlzdGVuZXJ8fHRbbl07cmV0dXJuIGV9KG8pOnAobyxvLmxlbmd0aCl9ZnVuY3Rpb24gaCh0KXt2YXIgZT10aGlzLl9ldmVudHM7aWYodm9pZCAwIT09ZSl7dmFyIG49ZVt0XTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKXJldHVybiAxO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4ubGVuZ3RofXJldHVybiAwfWZ1bmN0aW9uIHAodCxlKXtmb3IodmFyIG49bmV3IEFycmF5KGUpLHI9MDtyPGU7KytyKW5bcl09dFtyXTtyZXR1cm4gbn1mdW5jdGlvbiBnKHQsZSxuLHIpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQub24pci5vbmNlP3Qub25jZShlLG4pOnQub24oZSxuKTtlbHNle2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lcil0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJlbWl0dGVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEV2ZW50RW1pdHRlci4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiB0KTt0LmFkZEV2ZW50TGlzdGVuZXIoZSwoZnVuY3Rpb24gbyhpKXtyLm9uY2UmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG8pLG4oaSl9KSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiZGVmYXVsdE1heExpc3RlbmVyc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8byh0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcrdCtcIi5cIik7YT10fX0pLGkuaW5pdD1mdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9LGkucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbih0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHxvKHQpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyt0K1wiLlwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPXQsdGhpc30saS5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHUodGhpcyl9LGkucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWUucHVzaChhcmd1bWVudHNbbl0pO3ZhciBvPVwiZXJyb3JcIj09PXQsaT10aGlzLl9ldmVudHM7aWYodm9pZCAwIT09aSlvPW8mJnZvaWQgMD09PWkuZXJyb3I7ZWxzZSBpZighbylyZXR1cm4hMTtpZihvKXt2YXIgYTtpZihlLmxlbmd0aD4wJiYoYT1lWzBdKSxhIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgYTt2YXIgcz1uZXcgRXJyb3IoXCJVbmhhbmRsZWQgZXJyb3IuXCIrKGE/XCIgKFwiK2EubWVzc2FnZStcIilcIjpcIlwiKSk7dGhyb3cgcy5jb250ZXh0PWEsc312YXIgdT1pW3RdO2lmKHZvaWQgMD09PXUpcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdSlyKHUsdGhpcyxlKTtlbHNle3ZhciBsPXUubGVuZ3RoLGM9cCh1LGwpO2ZvcihuPTA7bjxsOysrbilyKGNbbl0sdGhpcyxlKX1yZXR1cm4hMH0saS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbCh0aGlzLHQsZSwhMSl9LGkucHJvdG90eXBlLm9uPWkucHJvdG90eXBlLmFkZExpc3RlbmVyLGkucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiBsKHRoaXMsdCxlLCEwKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe3JldHVybiBzKGUpLHRoaXMub24odCxmKHRoaXMsdCxlKSksdGhpc30saS5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiBzKGUpLHRoaXMucHJlcGVuZExpc3RlbmVyKHQsZih0aGlzLHQsZSkpLHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGksYTtpZihzKGUpLHZvaWQgMD09PShyPXRoaXMuX2V2ZW50cykpcmV0dXJuIHRoaXM7aWYodm9pZCAwPT09KG49clt0XSkpcmV0dXJuIHRoaXM7aWYobj09PWV8fG4ubGlzdGVuZXI9PT1lKTA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk6KGRlbGV0ZSByW3RdLHIucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxuLmxpc3RlbmVyfHxlKSk7ZWxzZSBpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuKXtmb3Iobz0tMSxpPW4ubGVuZ3RoLTE7aT49MDtpLS0paWYobltpXT09PWV8fG5baV0ubGlzdGVuZXI9PT1lKXthPW5baV0ubGlzdGVuZXIsbz1pO2JyZWFrfWlmKG88MClyZXR1cm4gdGhpczswPT09bz9uLnNoaWZ0KCk6ZnVuY3Rpb24odCxlKXtmb3IoO2UrMTx0Lmxlbmd0aDtlKyspdFtlXT10W2UrMV07dC5wb3AoKX0obixvKSwxPT09bi5sZW5ndGgmJihyW3RdPW5bMF0pLHZvaWQgMCE9PXIucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxhfHxlKX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbih0KXt2YXIgZSxuLHI7aWYodm9pZCAwPT09KG49dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT1uLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCk6dm9pZCAwIT09blt0XSYmKDA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk6ZGVsZXRlIG5bdF0pLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBvLGk9T2JqZWN0LmtleXMobik7Zm9yKHI9MDtyPGkubGVuZ3RoOysrcilcInJlbW92ZUxpc3RlbmVyXCIhPT0obz1pW3JdKSYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMobyk7cmV0dXJuIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwicmVtb3ZlTGlzdGVuZXJcIiksdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCx0aGlzfWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9blt0XSkpdGhpcy5yZW1vdmVMaXN0ZW5lcih0LGUpO2Vsc2UgaWYodm9pZCAwIT09ZSlmb3Iocj1lLmxlbmd0aC0xO3I+PTA7ci0tKXRoaXMucmVtb3ZlTGlzdGVuZXIodCxlW3JdKTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiBkKHRoaXMsdCwhMCl9LGkucHJvdG90eXBlLnJhd0xpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gZCh0aGlzLHQsITEpfSxpLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lmxpc3RlbmVyQ291bnQ/dC5saXN0ZW5lckNvdW50KGUpOmguY2FsbCh0LGUpfSxpLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWgsaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHNDb3VudD4wP2UodGhpcy5fZXZlbnRzKTpbXX19LDIxNToodCxlKT0+e2UucmVhZD1mdW5jdGlvbih0LGUsbixyLG8pe3ZhciBpLGEscz04Km8tci0xLHU9KDE8PHMpLTEsbD11Pj4xLGM9LTcsZj1uP28tMTowLGQ9bj8tMToxLGg9dFtlK2ZdO2ZvcihmKz1kLGk9aCYoMTw8LWMpLTEsaD4+PS1jLGMrPXM7Yz4wO2k9MjU2KmkrdFtlK2ZdLGYrPWQsYy09OCk7Zm9yKGE9aSYoMTw8LWMpLTEsaT4+PS1jLGMrPXI7Yz4wO2E9MjU2KmErdFtlK2ZdLGYrPWQsYy09OCk7aWYoMD09PWkpaT0xLWw7ZWxzZXtpZihpPT09dSlyZXR1cm4gYT9OYU46MS8wKihoPy0xOjEpO2ErPU1hdGgucG93KDIsciksaS09bH1yZXR1cm4oaD8tMToxKSphKk1hdGgucG93KDIsaS1yKX0sZS53cml0ZT1mdW5jdGlvbih0LGUsbixyLG8saSl7dmFyIGEscyx1LGw9OCppLW8tMSxjPSgxPDxsKS0xLGY9Yz4+MSxkPTIzPT09bz9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsaD1yPzA6aS0xLHA9cj8xOi0xLGc9ZTwwfHwwPT09ZSYmMS9lPDA/MTowO2ZvcihlPU1hdGguYWJzKGUpLGlzTmFOKGUpfHxlPT09MS8wPyhzPWlzTmFOKGUpPzE6MCxhPWMpOihhPU1hdGguZmxvb3IoTWF0aC5sb2coZSkvTWF0aC5MTjIpLGUqKHU9TWF0aC5wb3coMiwtYSkpPDEmJihhLS0sdSo9MiksKGUrPWErZj49MT9kL3U6ZCpNYXRoLnBvdygyLDEtZikpKnU+PTImJihhKyssdS89MiksYStmPj1jPyhzPTAsYT1jKTphK2Y+PTE/KHM9KGUqdS0xKSpNYXRoLnBvdygyLG8pLGErPWYpOihzPWUqTWF0aC5wb3coMixmLTEpKk1hdGgucG93KDIsbyksYT0wKSk7bz49ODt0W24raF09MjU1JnMsaCs9cCxzLz0yNTYsby09OCk7Zm9yKGE9YTw8b3xzLGwrPW87bD4wO3RbbitoXT0yNTUmYSxoKz1wLGEvPTI1NixsLT04KTt0W24raC1wXXw9MTI4Kmd9fSw5NTE6ZnVuY3Rpb24odCxlLG4pe3ZhciByO3Q9bi5ubWQodCksZnVuY3Rpb24oKXt2YXIgbyxpPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLGE9XCJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fXCIscz1cIl9fbG9kYXNoX3BsYWNlaG9sZGVyX19cIix1PTE2LGw9MzIsYz02NCxmPTEyOCxkPTI1NixoPTEvMCxwPTkwMDcxOTkyNTQ3NDA5OTEsZz1OYU4seT00Mjk0OTY3Mjk1LG09W1tcImFyeVwiLGZdLFtcImJpbmRcIiwxXSxbXCJiaW5kS2V5XCIsMl0sW1wiY3VycnlcIiw4XSxbXCJjdXJyeVJpZ2h0XCIsdV0sW1wiZmxpcFwiLDUxMl0sW1wicGFydGlhbFwiLGxdLFtcInBhcnRpYWxSaWdodFwiLGNdLFtcInJlYXJnXCIsZF1dLHY9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixiPVwiW29iamVjdCBBcnJheV1cIix3PVwiW29iamVjdCBCb29sZWFuXVwiLF89XCJbb2JqZWN0IERhdGVdXCIsRT1cIltvYmplY3QgRXJyb3JdXCIsUz1cIltvYmplY3QgRnVuY3Rpb25dXCIsQT1cIltvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dXCIsST1cIltvYmplY3QgTWFwXVwiLFQ9XCJbb2JqZWN0IE51bWJlcl1cIixSPVwiW29iamVjdCBPYmplY3RdXCIseD1cIltvYmplY3QgUHJvbWlzZV1cIixDPVwiW29iamVjdCBSZWdFeHBdXCIsQj1cIltvYmplY3QgU2V0XVwiLGs9XCJbb2JqZWN0IFN0cmluZ11cIixMPVwiW29iamVjdCBTeW1ib2xdXCIsTz1cIltvYmplY3QgV2Vha01hcF1cIixVPVwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIixqPVwiW29iamVjdCBEYXRhVmlld11cIixOPVwiW29iamVjdCBGbG9hdDMyQXJyYXldXCIsTT1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiLFA9XCJbb2JqZWN0IEludDhBcnJheV1cIixXPVwiW29iamVjdCBJbnQxNkFycmF5XVwiLCQ9XCJbb2JqZWN0IEludDMyQXJyYXldXCIsRD1cIltvYmplY3QgVWludDhBcnJheV1cIixGPVwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV1cIix6PVwiW29iamVjdCBVaW50MTZBcnJheV1cIixxPVwiW29iamVjdCBVaW50MzJBcnJheV1cIixIPS9cXGJfX3AgXFwrPSAnJzsvZyxWPS9cXGIoX19wIFxcKz0pICcnIFxcKy9nLEc9LyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZyxKPS8mKD86YW1wfGx0fGd0fHF1b3R8IzM5KTsvZyxZPS9bJjw+XCInXS9nLEs9UmVnRXhwKEouc291cmNlKSxYPVJlZ0V4cChZLnNvdXJjZSksWj0vPCUtKFtcXHNcXFNdKz8pJT4vZyxRPS88JShbXFxzXFxTXSs/KSU+L2csdHQ9LzwlPShbXFxzXFxTXSs/KSU+L2csZXQ9L1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxudD0vXlxcdyokLyxydD0vW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oPzpcXC58XFxbXFxdKSg/OlxcLnxcXFtcXF18JCkpL2csb3Q9L1tcXFxcXiQuKis/KClbXFxde318XS9nLGl0PVJlZ0V4cChvdC5zb3VyY2UpLGF0PS9eXFxzKy8sc3Q9L1xccy8sdXQ9L1xceyg/OlxcblxcL1xcKiBcXFt3cmFwcGVkIHdpdGggLitcXF0gXFwqXFwvKT9cXG4/LyxsdD0vXFx7XFxuXFwvXFwqIFxcW3dyYXBwZWQgd2l0aCAoLispXFxdIFxcKi8sY3Q9Lyw/ICYgLyxmdD0vW15cXHgwMC1cXHgyZlxceDNhLVxceDQwXFx4NWItXFx4NjBcXHg3Yi1cXHg3Zl0rL2csZHQ9L1soKT0se31cXFtcXF1cXC9cXHNdLyxodD0vXFxcXChcXFxcKT8vZyxwdD0vXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2csZ3Q9L1xcdyokLyx5dD0vXlstK10weFswLTlhLWZdKyQvaSxtdD0vXjBiWzAxXSskL2ksdnQ9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxidD0vXjBvWzAtN10rJC9pLHd0PS9eKD86MHxbMS05XVxcZCopJC8sX3Q9L1tcXHhjMC1cXHhkNlxceGQ4LVxceGY2XFx4ZjgtXFx4ZmZcXHUwMTAwLVxcdTAxN2ZdL2csRXQ9LygkXikvLFN0PS9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZyxBdD1cIlxcXFx1ZDgwMC1cXFxcdWRmZmZcIixJdD1cIlxcXFx1MDMwMC1cXFxcdTAzNmZcXFxcdWZlMjAtXFxcXHVmZTJmXFxcXHUyMGQwLVxcXFx1MjBmZlwiLFR0PVwiXFxcXHUyNzAwLVxcXFx1MjdiZlwiLFJ0PVwiYS16XFxcXHhkZi1cXFxceGY2XFxcXHhmOC1cXFxceGZmXCIseHQ9XCJBLVpcXFxceGMwLVxcXFx4ZDZcXFxceGQ4LVxcXFx4ZGVcIixDdD1cIlxcXFx1ZmUwZVxcXFx1ZmUwZlwiLEJ0PVwiXFxcXHhhY1xcXFx4YjFcXFxceGQ3XFxcXHhmN1xcXFx4MDAtXFxcXHgyZlxcXFx4M2EtXFxcXHg0MFxcXFx4NWItXFxcXHg2MFxcXFx4N2ItXFxcXHhiZlxcXFx1MjAwMC1cXFxcdTIwNmYgXFxcXHRcXFxceDBiXFxcXGZcXFxceGEwXFxcXHVmZWZmXFxcXG5cXFxcclxcXFx1MjAyOFxcXFx1MjAyOVxcXFx1MTY4MFxcXFx1MTgwZVxcXFx1MjAwMFxcXFx1MjAwMVxcXFx1MjAwMlxcXFx1MjAwM1xcXFx1MjAwNFxcXFx1MjAwNVxcXFx1MjAwNlxcXFx1MjAwN1xcXFx1MjAwOFxcXFx1MjAwOVxcXFx1MjAwYVxcXFx1MjAyZlxcXFx1MjA1ZlxcXFx1MzAwMFwiLGt0PVwiWyfigJldXCIsTHQ9XCJbXCIrQXQrXCJdXCIsT3Q9XCJbXCIrQnQrXCJdXCIsVXQ9XCJbXCIrSXQrXCJdXCIsanQ9XCJcXFxcZCtcIixOdD1cIltcIitUdCtcIl1cIixNdD1cIltcIitSdCtcIl1cIixQdD1cIlteXCIrQXQrQnQranQrVHQrUnQreHQrXCJdXCIsV3Q9XCJcXFxcdWQ4M2NbXFxcXHVkZmZiLVxcXFx1ZGZmZl1cIiwkdD1cIlteXCIrQXQrXCJdXCIsRHQ9XCIoPzpcXFxcdWQ4M2NbXFxcXHVkZGU2LVxcXFx1ZGRmZl0pezJ9XCIsRnQ9XCJbXFxcXHVkODAwLVxcXFx1ZGJmZl1bXFxcXHVkYzAwLVxcXFx1ZGZmZl1cIix6dD1cIltcIit4dCtcIl1cIixxdD1cIlxcXFx1MjAwZFwiLEh0PVwiKD86XCIrTXQrXCJ8XCIrUHQrXCIpXCIsVnQ9XCIoPzpcIit6dCtcInxcIitQdCtcIilcIixHdD1cIig/Olsn4oCZXSg/OmR8bGx8bXxyZXxzfHR8dmUpKT9cIixKdD1cIig/Olsn4oCZXSg/OkR8TEx8TXxSRXxTfFR8VkUpKT9cIixZdD1cIig/OlwiK1V0K1wifFwiK1d0K1wiKVwiK1wiP1wiLEt0PVwiW1wiK0N0K1wiXT9cIixYdD1LdCtZdCsoXCIoPzpcIitxdCtcIig/OlwiK1skdCxEdCxGdF0uam9pbihcInxcIikrXCIpXCIrS3QrWXQrXCIpKlwiKSxadD1cIig/OlwiK1tOdCxEdCxGdF0uam9pbihcInxcIikrXCIpXCIrWHQsUXQ9XCIoPzpcIitbJHQrVXQrXCI/XCIsVXQsRHQsRnQsTHRdLmpvaW4oXCJ8XCIpK1wiKVwiLHRlPVJlZ0V4cChrdCxcImdcIiksZWU9UmVnRXhwKFV0LFwiZ1wiKSxuZT1SZWdFeHAoV3QrXCIoPz1cIitXdCtcIil8XCIrUXQrWHQsXCJnXCIpLHJlPVJlZ0V4cChbenQrXCI/XCIrTXQrXCIrXCIrR3QrXCIoPz1cIitbT3QsenQsXCIkXCJdLmpvaW4oXCJ8XCIpK1wiKVwiLFZ0K1wiK1wiK0p0K1wiKD89XCIrW090LHp0K0h0LFwiJFwiXS5qb2luKFwifFwiKStcIilcIix6dCtcIj9cIitIdCtcIitcIitHdCx6dCtcIitcIitKdCxcIlxcXFxkKig/OjFTVHwyTkR8M1JEfCg/IVsxMjNdKVxcXFxkVEgpKD89XFxcXGJ8W2Etel9dKVwiLFwiXFxcXGQqKD86MXN0fDJuZHwzcmR8KD8hWzEyM10pXFxcXGR0aCkoPz1cXFxcYnxbQS1aX10pXCIsanQsWnRdLmpvaW4oXCJ8XCIpLFwiZ1wiKSxvZT1SZWdFeHAoXCJbXCIrcXQrQXQrSXQrQ3QrXCJdXCIpLGllPS9bYS16XVtBLVpdfFtBLVpdezJ9W2Etel18WzAtOV1bYS16QS1aXXxbYS16QS1aXVswLTldfFteYS16QS1aMC05IF0vLGFlPVtcIkFycmF5XCIsXCJCdWZmZXJcIixcIkRhdGFWaWV3XCIsXCJEYXRlXCIsXCJFcnJvclwiLFwiRmxvYXQzMkFycmF5XCIsXCJGbG9hdDY0QXJyYXlcIixcIkZ1bmN0aW9uXCIsXCJJbnQ4QXJyYXlcIixcIkludDE2QXJyYXlcIixcIkludDMyQXJyYXlcIixcIk1hcFwiLFwiTWF0aFwiLFwiT2JqZWN0XCIsXCJQcm9taXNlXCIsXCJSZWdFeHBcIixcIlNldFwiLFwiU3RyaW5nXCIsXCJTeW1ib2xcIixcIlR5cGVFcnJvclwiLFwiVWludDhBcnJheVwiLFwiVWludDhDbGFtcGVkQXJyYXlcIixcIlVpbnQxNkFycmF5XCIsXCJVaW50MzJBcnJheVwiLFwiV2Vha01hcFwiLFwiX1wiLFwiY2xlYXJUaW1lb3V0XCIsXCJpc0Zpbml0ZVwiLFwicGFyc2VJbnRcIixcInNldFRpbWVvdXRcIl0sc2U9LTEsdWU9e307dWVbTl09dWVbTV09dWVbUF09dWVbV109dWVbJF09dWVbRF09dWVbRl09dWVbel09dWVbcV09ITAsdWVbdl09dWVbYl09dWVbVV09dWVbd109dWVbal09dWVbX109dWVbRV09dWVbU109dWVbSV09dWVbVF09dWVbUl09dWVbQ109dWVbQl09dWVba109dWVbT109ITE7dmFyIGxlPXt9O2xlW3ZdPWxlW2JdPWxlW1VdPWxlW2pdPWxlW3ddPWxlW19dPWxlW05dPWxlW01dPWxlW1BdPWxlW1ddPWxlWyRdPWxlW0ldPWxlW1RdPWxlW1JdPWxlW0NdPWxlW0JdPWxlW2tdPWxlW0xdPWxlW0RdPWxlW0ZdPWxlW3pdPWxlW3FdPSEwLGxlW0VdPWxlW1NdPWxlW09dPSExO3ZhciBjZT17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXFx1MjAyOFwiOlwidTIwMjhcIixcIlxcdTIwMjlcIjpcInUyMDI5XCJ9LGZlPXBhcnNlRmxvYXQsZGU9cGFyc2VJbnQsaGU9XCJvYmplY3RcIj09dHlwZW9mIG4uZyYmbi5nJiZuLmcuT2JqZWN0PT09T2JqZWN0JiZuLmcscGU9XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGdlPWhlfHxwZXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLHllPWUmJiFlLm5vZGVUeXBlJiZlLG1lPXllJiZ0JiYhdC5ub2RlVHlwZSYmdCx2ZT1tZSYmbWUuZXhwb3J0cz09PXllLGJlPXZlJiZoZS5wcm9jZXNzLHdlPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PW1lJiZtZS5yZXF1aXJlJiZtZS5yZXF1aXJlKFwidXRpbFwiKS50eXBlcztyZXR1cm4gdHx8YmUmJmJlLmJpbmRpbmcmJmJlLmJpbmRpbmcoXCJ1dGlsXCIpfWNhdGNoKHQpe319KCksX2U9d2UmJndlLmlzQXJyYXlCdWZmZXIsRWU9d2UmJndlLmlzRGF0ZSxTZT13ZSYmd2UuaXNNYXAsQWU9d2UmJndlLmlzUmVnRXhwLEllPXdlJiZ3ZS5pc1NldCxUZT13ZSYmd2UuaXNUeXBlZEFycmF5O2Z1bmN0aW9uIFJlKHQsZSxuKXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdC5jYWxsKGUpO2Nhc2UgMTpyZXR1cm4gdC5jYWxsKGUsblswXSk7Y2FzZSAyOnJldHVybiB0LmNhbGwoZSxuWzBdLG5bMV0pO2Nhc2UgMzpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdLG5bMl0pfXJldHVybiB0LmFwcGx5KGUsbil9ZnVuY3Rpb24geGUodCxlLG4scil7Zm9yKHZhciBvPS0xLGk9bnVsbD09dD8wOnQubGVuZ3RoOysrbzxpOyl7dmFyIGE9dFtvXTtlKHIsYSxuKGEpLHQpfXJldHVybiByfWZ1bmN0aW9uIENlKHQsZSl7Zm9yKHZhciBuPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoOysrbjxyJiYhMSE9PWUodFtuXSxuLHQpOyk7cmV0dXJuIHR9ZnVuY3Rpb24gQmUodCxlKXtmb3IodmFyIG49bnVsbD09dD8wOnQubGVuZ3RoO24tLSYmITEhPT1lKHRbbl0sbix0KTspO3JldHVybiB0fWZ1bmN0aW9uIGtlKHQsZSl7Zm9yKHZhciBuPS0xLHI9bnVsbD09dD8wOnQubGVuZ3RoOysrbjxyOylpZighZSh0W25dLG4sdCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gTGUodCxlKXtmb3IodmFyIG49LTEscj1udWxsPT10PzA6dC5sZW5ndGgsbz0wLGk9W107KytuPHI7KXt2YXIgYT10W25dO2UoYSxuLHQpJiYoaVtvKytdPWEpfXJldHVybiBpfWZ1bmN0aW9uIE9lKHQsZSl7cmV0dXJuISEobnVsbD09dD8wOnQubGVuZ3RoKSYmemUodCxlLDApPi0xfWZ1bmN0aW9uIFVlKHQsZSxuKXtmb3IodmFyIHI9LTEsbz1udWxsPT10PzA6dC5sZW5ndGg7KytyPG87KWlmKG4oZSx0W3JdKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBqZSh0LGUpe2Zvcih2YXIgbj0tMSxyPW51bGw9PXQ/MDp0Lmxlbmd0aCxvPUFycmF5KHIpOysrbjxyOylvW25dPWUodFtuXSxuLHQpO3JldHVybiBvfWZ1bmN0aW9uIE5lKHQsZSl7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsbz10Lmxlbmd0aDsrK248cjspdFtvK25dPWVbbl07cmV0dXJuIHR9ZnVuY3Rpb24gTWUodCxlLG4scil7dmFyIG89LTEsaT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHImJmkmJihuPXRbKytvXSk7KytvPGk7KW49ZShuLHRbb10sbyx0KTtyZXR1cm4gbn1mdW5jdGlvbiBQZSh0LGUsbixyKXt2YXIgbz1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHImJm8mJihuPXRbLS1vXSk7by0tOyluPWUobix0W29dLG8sdCk7cmV0dXJuIG59ZnVuY3Rpb24gV2UodCxlKXtmb3IodmFyIG49LTEscj1udWxsPT10PzA6dC5sZW5ndGg7KytuPHI7KWlmKGUodFtuXSxuLHQpKXJldHVybiEwO3JldHVybiExfXZhciAkZT1HZShcImxlbmd0aFwiKTtmdW5jdGlvbiBEZSh0LGUsbil7dmFyIHI7cmV0dXJuIG4odCwoZnVuY3Rpb24odCxuLG8pe2lmKGUodCxuLG8pKXJldHVybiByPW4sITF9KSkscn1mdW5jdGlvbiBGZSh0LGUsbixyKXtmb3IodmFyIG89dC5sZW5ndGgsaT1uKyhyPzE6LTEpO3I/aS0tOisraTxvOylpZihlKHRbaV0saSx0KSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiB6ZSh0LGUsbil7cmV0dXJuIGU9PWU/ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4tMSxvPXQubGVuZ3RoO2Zvcig7KytyPG87KWlmKHRbcl09PT1lKXJldHVybiByO3JldHVybi0xfSh0LGUsbik6RmUodCxIZSxuKX1mdW5jdGlvbiBxZSh0LGUsbixyKXtmb3IodmFyIG89bi0xLGk9dC5sZW5ndGg7KytvPGk7KWlmKHIodFtvXSxlKSlyZXR1cm4gbztyZXR1cm4tMX1mdW5jdGlvbiBIZSh0KXtyZXR1cm4gdCE9dH1mdW5jdGlvbiBWZSh0LGUpe3ZhciBuPW51bGw9PXQ/MDp0Lmxlbmd0aDtyZXR1cm4gbj9LZSh0LGUpL246Z31mdW5jdGlvbiBHZSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/bzplW3RdfX1mdW5jdGlvbiBKZSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQ/bzp0W2VdfX1mdW5jdGlvbiBZZSh0LGUsbixyLG8pe3JldHVybiBvKHQsKGZ1bmN0aW9uKHQsbyxpKXtuPXI/KHI9ITEsdCk6ZShuLHQsbyxpKX0pKSxufWZ1bmN0aW9uIEtlKHQsZSl7Zm9yKHZhciBuLHI9LTEsaT10Lmxlbmd0aDsrK3I8aTspe3ZhciBhPWUodFtyXSk7YSE9PW8mJihuPW49PT1vP2E6bithKX1yZXR1cm4gbn1mdW5jdGlvbiBYZSh0LGUpe2Zvcih2YXIgbj0tMSxyPUFycmF5KHQpOysrbjx0OylyW25dPWUobik7cmV0dXJuIHJ9ZnVuY3Rpb24gWmUodCl7cmV0dXJuIHQ/dC5zbGljZSgwLHluKHQpKzEpLnJlcGxhY2UoYXQsXCJcIik6dH1mdW5jdGlvbiBRZSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9fWZ1bmN0aW9uIHRuKHQsZSl7cmV0dXJuIGplKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkpfWZ1bmN0aW9uIGVuKHQsZSl7cmV0dXJuIHQuaGFzKGUpfWZ1bmN0aW9uIG5uKHQsZSl7Zm9yKHZhciBuPS0xLHI9dC5sZW5ndGg7KytuPHImJnplKGUsdFtuXSwwKT4tMTspO3JldHVybiBufWZ1bmN0aW9uIHJuKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoO24tLSYmemUoZSx0W25dLDApPi0xOyk7cmV0dXJuIG59dmFyIG9uPUplKHvDgDpcIkFcIizDgTpcIkFcIizDgjpcIkFcIizDgzpcIkFcIizDhDpcIkFcIizDhTpcIkFcIizDoDpcImFcIizDoTpcImFcIizDojpcImFcIizDozpcImFcIizDpDpcImFcIizDpTpcImFcIizDhzpcIkNcIizDpzpcImNcIizDkDpcIkRcIizDsDpcImRcIizDiDpcIkVcIizDiTpcIkVcIizDijpcIkVcIizDizpcIkVcIizDqDpcImVcIizDqTpcImVcIizDqjpcImVcIizDqzpcImVcIizDjDpcIklcIizDjTpcIklcIizDjjpcIklcIizDjzpcIklcIizDrDpcImlcIizDrTpcImlcIizDrjpcImlcIizDrzpcImlcIizDkTpcIk5cIizDsTpcIm5cIizDkjpcIk9cIizDkzpcIk9cIizDlDpcIk9cIizDlTpcIk9cIizDljpcIk9cIizDmDpcIk9cIizDsjpcIm9cIizDszpcIm9cIizDtDpcIm9cIizDtTpcIm9cIizDtjpcIm9cIizDuDpcIm9cIizDmTpcIlVcIizDmjpcIlVcIizDmzpcIlVcIizDnDpcIlVcIizDuTpcInVcIizDujpcInVcIizDuzpcInVcIizDvDpcInVcIizDnTpcIllcIizDvTpcInlcIizDvzpcInlcIizDhjpcIkFlXCIsw6Y6XCJhZVwiLMOeOlwiVGhcIizDvjpcInRoXCIsw586XCJzc1wiLMSAOlwiQVwiLMSCOlwiQVwiLMSEOlwiQVwiLMSBOlwiYVwiLMSDOlwiYVwiLMSFOlwiYVwiLMSGOlwiQ1wiLMSIOlwiQ1wiLMSKOlwiQ1wiLMSMOlwiQ1wiLMSHOlwiY1wiLMSJOlwiY1wiLMSLOlwiY1wiLMSNOlwiY1wiLMSOOlwiRFwiLMSQOlwiRFwiLMSPOlwiZFwiLMSROlwiZFwiLMSSOlwiRVwiLMSUOlwiRVwiLMSWOlwiRVwiLMSYOlwiRVwiLMSaOlwiRVwiLMSTOlwiZVwiLMSVOlwiZVwiLMSXOlwiZVwiLMSZOlwiZVwiLMSbOlwiZVwiLMScOlwiR1wiLMSeOlwiR1wiLMSgOlwiR1wiLMSiOlwiR1wiLMSdOlwiZ1wiLMSfOlwiZ1wiLMShOlwiZ1wiLMSjOlwiZ1wiLMSkOlwiSFwiLMSmOlwiSFwiLMSlOlwiaFwiLMSnOlwiaFwiLMSoOlwiSVwiLMSqOlwiSVwiLMSsOlwiSVwiLMSuOlwiSVwiLMSwOlwiSVwiLMSpOlwiaVwiLMSrOlwiaVwiLMStOlwiaVwiLMSvOlwiaVwiLMSxOlwiaVwiLMS0OlwiSlwiLMS1OlwialwiLMS2OlwiS1wiLMS3Olwia1wiLMS4Olwia1wiLMS5OlwiTFwiLMS7OlwiTFwiLMS9OlwiTFwiLMS/OlwiTFwiLMWBOlwiTFwiLMS6OlwibFwiLMS8OlwibFwiLMS+OlwibFwiLMWAOlwibFwiLMWCOlwibFwiLMWDOlwiTlwiLMWFOlwiTlwiLMWHOlwiTlwiLMWKOlwiTlwiLMWEOlwiblwiLMWGOlwiblwiLMWIOlwiblwiLMWLOlwiblwiLMWMOlwiT1wiLMWOOlwiT1wiLMWQOlwiT1wiLMWNOlwib1wiLMWPOlwib1wiLMWROlwib1wiLMWUOlwiUlwiLMWWOlwiUlwiLMWYOlwiUlwiLMWVOlwiclwiLMWXOlwiclwiLMWZOlwiclwiLMWaOlwiU1wiLMWcOlwiU1wiLMWeOlwiU1wiLMWgOlwiU1wiLMWbOlwic1wiLMWdOlwic1wiLMWfOlwic1wiLMWhOlwic1wiLMWiOlwiVFwiLMWkOlwiVFwiLMWmOlwiVFwiLMWjOlwidFwiLMWlOlwidFwiLMWnOlwidFwiLMWoOlwiVVwiLMWqOlwiVVwiLMWsOlwiVVwiLMWuOlwiVVwiLMWwOlwiVVwiLMWyOlwiVVwiLMWpOlwidVwiLMWrOlwidVwiLMWtOlwidVwiLMWvOlwidVwiLMWxOlwidVwiLMWzOlwidVwiLMW0OlwiV1wiLMW1Olwid1wiLMW2OlwiWVwiLMW3OlwieVwiLMW4OlwiWVwiLMW5OlwiWlwiLMW7OlwiWlwiLMW9OlwiWlwiLMW6OlwielwiLMW8OlwielwiLMW+OlwielwiLMSyOlwiSUpcIizEszpcImlqXCIsxZI6XCJPZVwiLMWTOlwib2VcIizFiTpcIiduXCIsxb86XCJzXCJ9KSxhbj1KZSh7XCImXCI6XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjMzk7XCJ9KTtmdW5jdGlvbiBzbih0KXtyZXR1cm5cIlxcXFxcIitjZVt0XX1mdW5jdGlvbiB1bih0KXtyZXR1cm4gb2UudGVzdCh0KX1mdW5jdGlvbiBsbih0KXt2YXIgZT0tMSxuPUFycmF5KHQuc2l6ZSk7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtuWysrZV09W3IsdF19KSksbn1mdW5jdGlvbiBjbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdChlKG4pKX19ZnVuY3Rpb24gZm4odCxlKXtmb3IodmFyIG49LTEscj10Lmxlbmd0aCxvPTAsaT1bXTsrK248cjspe3ZhciBhPXRbbl07YSE9PWUmJmEhPT1zfHwodFtuXT1zLGlbbysrXT1uKX1yZXR1cm4gaX1mdW5jdGlvbiBkbih0KXt2YXIgZT0tMSxuPUFycmF5KHQuc2l6ZSk7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7blsrK2VdPXR9KSksbn1mdW5jdGlvbiBobih0KXt2YXIgZT0tMSxuPUFycmF5KHQuc2l6ZSk7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7blsrK2VdPVt0LHRdfSkpLG59ZnVuY3Rpb24gcG4odCl7cmV0dXJuIHVuKHQpP2Z1bmN0aW9uKHQpe3ZhciBlPW5lLmxhc3RJbmRleD0wO2Zvcig7bmUudGVzdCh0KTspKytlO3JldHVybiBlfSh0KTokZSh0KX1mdW5jdGlvbiBnbih0KXtyZXR1cm4gdW4odCk/ZnVuY3Rpb24odCl7cmV0dXJuIHQubWF0Y2gobmUpfHxbXX0odCk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoXCJcIil9KHQpfWZ1bmN0aW9uIHluKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDtlLS0mJnN0LnRlc3QodC5jaGFyQXQoZSkpOyk7cmV0dXJuIGV9dmFyIG1uPUplKHtcIiZhbXA7XCI6XCImXCIsXCImbHQ7XCI6XCI8XCIsXCImZ3Q7XCI6XCI+XCIsXCImcXVvdDtcIjonXCInLFwiJiMzOTtcIjpcIidcIn0pO3ZhciB2bj1mdW5jdGlvbiB0KGUpe3ZhciBuLHI9KGU9bnVsbD09ZT9nZTp2bi5kZWZhdWx0cyhnZS5PYmplY3QoKSxlLHZuLnBpY2soZ2UsYWUpKSkuQXJyYXksc3Q9ZS5EYXRlLEF0PWUuRXJyb3IsSXQ9ZS5GdW5jdGlvbixUdD1lLk1hdGgsUnQ9ZS5PYmplY3QseHQ9ZS5SZWdFeHAsQ3Q9ZS5TdHJpbmcsQnQ9ZS5UeXBlRXJyb3Isa3Q9ci5wcm90b3R5cGUsTHQ9SXQucHJvdG90eXBlLE90PVJ0LnByb3RvdHlwZSxVdD1lW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdLGp0PUx0LnRvU3RyaW5nLE50PU90Lmhhc093blByb3BlcnR5LE10PTAsUHQ9KG49L1teLl0rJC8uZXhlYyhVdCYmVXQua2V5cyYmVXQua2V5cy5JRV9QUk9UT3x8XCJcIikpP1wiU3ltYm9sKHNyYylfMS5cIituOlwiXCIsV3Q9T3QudG9TdHJpbmcsJHQ9anQuY2FsbChSdCksRHQ9Z2UuXyxGdD14dChcIl5cIitqdC5jYWxsKE50KS5yZXBsYWNlKG90LFwiXFxcXCQmXCIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csXCIkMS4qP1wiKStcIiRcIiksenQ9dmU/ZS5CdWZmZXI6byxxdD1lLlN5bWJvbCxIdD1lLlVpbnQ4QXJyYXksVnQ9enQ/enQuYWxsb2NVbnNhZmU6byxHdD1jbihSdC5nZXRQcm90b3R5cGVPZixSdCksSnQ9UnQuY3JlYXRlLFl0PU90LnByb3BlcnR5SXNFbnVtZXJhYmxlLEt0PWt0LnNwbGljZSxYdD1xdD9xdC5pc0NvbmNhdFNwcmVhZGFibGU6byxadD1xdD9xdC5pdGVyYXRvcjpvLFF0PXF0P3F0LnRvU3RyaW5nVGFnOm8sbmU9ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9aGkoUnQsXCJkZWZpbmVQcm9wZXJ0eVwiKTtyZXR1cm4gdCh7fSxcIlwiLHt9KSx0fWNhdGNoKHQpe319KCksb2U9ZS5jbGVhclRpbWVvdXQhPT1nZS5jbGVhclRpbWVvdXQmJmUuY2xlYXJUaW1lb3V0LGNlPXN0JiZzdC5ub3chPT1nZS5EYXRlLm5vdyYmc3Qubm93LGhlPWUuc2V0VGltZW91dCE9PWdlLnNldFRpbWVvdXQmJmUuc2V0VGltZW91dCxwZT1UdC5jZWlsLHllPVR0LmZsb29yLG1lPVJ0LmdldE93blByb3BlcnR5U3ltYm9scyxiZT16dD96dC5pc0J1ZmZlcjpvLHdlPWUuaXNGaW5pdGUsJGU9a3Quam9pbixKZT1jbihSdC5rZXlzLFJ0KSxibj1UdC5tYXgsd249VHQubWluLF9uPXN0Lm5vdyxFbj1lLnBhcnNlSW50LFNuPVR0LnJhbmRvbSxBbj1rdC5yZXZlcnNlLEluPWhpKGUsXCJEYXRhVmlld1wiKSxUbj1oaShlLFwiTWFwXCIpLFJuPWhpKGUsXCJQcm9taXNlXCIpLHhuPWhpKGUsXCJTZXRcIiksQ249aGkoZSxcIldlYWtNYXBcIiksQm49aGkoUnQsXCJjcmVhdGVcIiksa249Q24mJm5ldyBDbixMbj17fSxPbj1XaShJbiksVW49V2koVG4pLGpuPVdpKFJuKSxObj1XaSh4biksTW49V2koQ24pLFBuPXF0P3F0LnByb3RvdHlwZTpvLFduPVBuP1BuLnZhbHVlT2Y6bywkbj1Qbj9Qbi50b1N0cmluZzpvO2Z1bmN0aW9uIERuKHQpe2lmKG5zKHQpJiYhSGEodCkmJiEodCBpbnN0YW5jZW9mIEhuKSl7aWYodCBpbnN0YW5jZW9mIHFuKXJldHVybiB0O2lmKE50LmNhbGwodCxcIl9fd3JhcHBlZF9fXCIpKXJldHVybiAkaSh0KX1yZXR1cm4gbmV3IHFuKHQpfXZhciBGbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFlcyhlKSlyZXR1cm57fTtpZihKdClyZXR1cm4gSnQoZSk7dC5wcm90b3R5cGU9ZTt2YXIgbj1uZXcgdDtyZXR1cm4gdC5wcm90b3R5cGU9byxufX0oKTtmdW5jdGlvbiB6bigpe31mdW5jdGlvbiBxbih0LGUpe3RoaXMuX193cmFwcGVkX189dCx0aGlzLl9fYWN0aW9uc19fPVtdLHRoaXMuX19jaGFpbl9fPSEhZSx0aGlzLl9faW5kZXhfXz0wLHRoaXMuX192YWx1ZXNfXz1vfWZ1bmN0aW9uIEhuKHQpe3RoaXMuX193cmFwcGVkX189dCx0aGlzLl9fYWN0aW9uc19fPVtdLHRoaXMuX19kaXJfXz0xLHRoaXMuX19maWx0ZXJlZF9fPSExLHRoaXMuX19pdGVyYXRlZXNfXz1bXSx0aGlzLl9fdGFrZUNvdW50X189eSx0aGlzLl9fdmlld3NfXz1bXX1mdW5jdGlvbiBWbih0KXt2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1mdW5jdGlvbiBHbih0KXt2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1mdW5jdGlvbiBKbih0KXt2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1mdW5jdGlvbiBZbih0KXt2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5fX2RhdGFfXz1uZXcgSm47KytlPG47KXRoaXMuYWRkKHRbZV0pfWZ1bmN0aW9uIEtuKHQpe3ZhciBlPXRoaXMuX19kYXRhX189bmV3IEduKHQpO3RoaXMuc2l6ZT1lLnNpemV9ZnVuY3Rpb24gWG4odCxlKXt2YXIgbj1IYSh0KSxyPSFuJiZxYSh0KSxvPSFuJiYhciYmWWEodCksaT0hbiYmIXImJiFvJiZjcyh0KSxhPW58fHJ8fG98fGkscz1hP1hlKHQubGVuZ3RoLEN0KTpbXSx1PXMubGVuZ3RoO2Zvcih2YXIgbCBpbiB0KSFlJiYhTnQuY2FsbCh0LGwpfHxhJiYoXCJsZW5ndGhcIj09bHx8byYmKFwib2Zmc2V0XCI9PWx8fFwicGFyZW50XCI9PWwpfHxpJiYoXCJidWZmZXJcIj09bHx8XCJieXRlTGVuZ3RoXCI9PWx8fFwiYnl0ZU9mZnNldFwiPT1sKXx8d2kobCx1KSl8fHMucHVzaChsKTtyZXR1cm4gc31mdW5jdGlvbiBabih0KXt2YXIgZT10Lmxlbmd0aDtyZXR1cm4gZT90W1lyKDAsZS0xKV06b31mdW5jdGlvbiBRbih0LGUpe3JldHVybiBOaShrbyh0KSx1cihlLDAsdC5sZW5ndGgpKX1mdW5jdGlvbiB0cih0KXtyZXR1cm4gTmkoa28odCkpfWZ1bmN0aW9uIGVyKHQsZSxuKXsobiE9PW8mJiFEYSh0W2VdLG4pfHxuPT09byYmIShlIGluIHQpKSYmYXIodCxlLG4pfWZ1bmN0aW9uIG5yKHQsZSxuKXt2YXIgcj10W2VdO050LmNhbGwodCxlKSYmRGEocixuKSYmKG4hPT1vfHxlIGluIHQpfHxhcih0LGUsbil9ZnVuY3Rpb24gcnIodCxlKXtmb3IodmFyIG49dC5sZW5ndGg7bi0tOylpZihEYSh0W25dWzBdLGUpKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIG9yKHQsZSxuLHIpe3JldHVybiBocih0LChmdW5jdGlvbih0LG8saSl7ZShyLHQsbih0KSxpKX0pKSxyfWZ1bmN0aW9uIGlyKHQsZSl7cmV0dXJuIHQmJkxvKGUsTHMoZSksdCl9ZnVuY3Rpb24gYXIodCxlLG4pe1wiX19wcm90b19fXCI9PWUmJm5lP25lKHQsZSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6bix3cml0YWJsZTohMH0pOnRbZV09bn1mdW5jdGlvbiBzcih0LGUpe2Zvcih2YXIgbj0tMSxpPWUubGVuZ3RoLGE9cihpKSxzPW51bGw9PXQ7KytuPGk7KWFbbl09cz9vOlJzKHQsZVtuXSk7cmV0dXJuIGF9ZnVuY3Rpb24gdXIodCxlLG4pe3JldHVybiB0PT10JiYobiE9PW8mJih0PXQ8PW4/dDpuKSxlIT09byYmKHQ9dD49ZT90OmUpKSx0fWZ1bmN0aW9uIGxyKHQsZSxuLHIsaSxhKXt2YXIgcyx1PTEmZSxsPTImZSxjPTQmZTtpZihuJiYocz1pP24odCxyLGksYSk6bih0KSkscyE9PW8pcmV0dXJuIHM7aWYoIWVzKHQpKXJldHVybiB0O3ZhciBmPUhhKHQpO2lmKGYpe2lmKHM9ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsbj1uZXcgdC5jb25zdHJ1Y3RvcihlKTtlJiZcInN0cmluZ1wiPT10eXBlb2YgdFswXSYmTnQuY2FsbCh0LFwiaW5kZXhcIikmJihuLmluZGV4PXQuaW5kZXgsbi5pbnB1dD10LmlucHV0KTtyZXR1cm4gbn0odCksIXUpcmV0dXJuIGtvKHQscyl9ZWxzZXt2YXIgZD15aSh0KSxoPWQ9PVN8fGQ9PUE7aWYoWWEodCkpcmV0dXJuIElvKHQsdSk7aWYoZD09Unx8ZD09dnx8aCYmIWkpe2lmKHM9bHx8aD97fTp2aSh0KSwhdSlyZXR1cm4gbD9mdW5jdGlvbih0LGUpe3JldHVybiBMbyh0LGdpKHQpLGUpfSh0LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJkxvKGUsT3MoZSksdCl9KHMsdCkpOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIExvKHQscGkodCksZSl9KHQsaXIocyx0KSl9ZWxzZXtpZighbGVbZF0pcmV0dXJuIGk/dDp7fTtzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LmNvbnN0cnVjdG9yO3N3aXRjaChlKXtjYXNlIFU6cmV0dXJuIFRvKHQpO2Nhc2UgdzpjYXNlIF86cmV0dXJuIG5ldyByKCt0KTtjYXNlIGo6cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49ZT9Ubyh0LmJ1ZmZlcik6dC5idWZmZXI7cmV0dXJuIG5ldyB0LmNvbnN0cnVjdG9yKG4sdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCl9KHQsbik7Y2FzZSBOOmNhc2UgTTpjYXNlIFA6Y2FzZSBXOmNhc2UgJDpjYXNlIEQ6Y2FzZSBGOmNhc2UgejpjYXNlIHE6cmV0dXJuIFJvKHQsbik7Y2FzZSBJOnJldHVybiBuZXcgcjtjYXNlIFQ6Y2FzZSBrOnJldHVybiBuZXcgcih0KTtjYXNlIEM6cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB0LmNvbnN0cnVjdG9yKHQuc291cmNlLGd0LmV4ZWModCkpO3JldHVybiBlLmxhc3RJbmRleD10Lmxhc3RJbmRleCxlfSh0KTtjYXNlIEI6cmV0dXJuIG5ldyByO2Nhc2UgTDpyZXR1cm4gbz10LFduP1J0KFduLmNhbGwobykpOnt9fXZhciBvfSh0LGQsdSl9fWF8fChhPW5ldyBLbik7dmFyIHA9YS5nZXQodCk7aWYocClyZXR1cm4gcDthLnNldCh0LHMpLHNzKHQpP3QuZm9yRWFjaCgoZnVuY3Rpb24ocil7cy5hZGQobHIocixlLG4scix0LGEpKX0pKTpycyh0KSYmdC5mb3JFYWNoKChmdW5jdGlvbihyLG8pe3Muc2V0KG8sbHIocixlLG4sbyx0LGEpKX0pKTt2YXIgZz1mP286KGM/bD9haTppaTpsP09zOkxzKSh0KTtyZXR1cm4gQ2UoZ3x8dCwoZnVuY3Rpb24ocixvKXtnJiYocj10W289cl0pLG5yKHMsbyxscihyLGUsbixvLHQsYSkpfSkpLHN9ZnVuY3Rpb24gY3IodCxlLG4pe3ZhciByPW4ubGVuZ3RoO2lmKG51bGw9PXQpcmV0dXJuIXI7Zm9yKHQ9UnQodCk7ci0tOyl7dmFyIGk9bltyXSxhPWVbaV0scz10W2ldO2lmKHM9PT1vJiYhKGkgaW4gdCl8fCFhKHMpKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGZyKHQsZSxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTtyZXR1cm4gTGkoKGZ1bmN0aW9uKCl7dC5hcHBseShvLG4pfSksZSl9ZnVuY3Rpb24gZHIodCxlLG4scil7dmFyIG89LTEsaT1PZSxhPSEwLHM9dC5sZW5ndGgsdT1bXSxsPWUubGVuZ3RoO2lmKCFzKXJldHVybiB1O24mJihlPWplKGUsUWUobikpKSxyPyhpPVVlLGE9ITEpOmUubGVuZ3RoPj0yMDAmJihpPWVuLGE9ITEsZT1uZXcgWW4oZSkpO3Q6Zm9yKDsrK288czspe3ZhciBjPXRbb10sZj1udWxsPT1uP2M6bihjKTtpZihjPXJ8fDAhPT1jP2M6MCxhJiZmPT1mKXtmb3IodmFyIGQ9bDtkLS07KWlmKGVbZF09PT1mKWNvbnRpbnVlIHQ7dS5wdXNoKGMpfWVsc2UgaShlLGYscil8fHUucHVzaChjKX1yZXR1cm4gdX1Ebi50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6WixldmFsdWF0ZTpRLGludGVycG9sYXRlOnR0LHZhcmlhYmxlOlwiXCIsaW1wb3J0czp7XzpEbn19LERuLnByb3RvdHlwZT16bi5wcm90b3R5cGUsRG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPURuLHFuLnByb3RvdHlwZT1Gbih6bi5wcm90b3R5cGUpLHFuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1xbixIbi5wcm90b3R5cGU9Rm4oem4ucHJvdG90eXBlKSxIbi5wcm90b3R5cGUuY29uc3RydWN0b3I9SG4sVm4ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1Cbj9CbihudWxsKTp7fSx0aGlzLnNpemU9MH0sVm4ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmhhcyh0KSYmZGVsZXRlIHRoaXMuX19kYXRhX19bdF07cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX0sVm4ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fO2lmKEJuKXt2YXIgbj1lW3RdO3JldHVybiBuPT09YT9vOm59cmV0dXJuIE50LmNhbGwoZSx0KT9lW3RdOm99LFZuLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gQm4/ZVt0XSE9PW86TnQuY2FsbChlLHQpfSxWbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXztyZXR1cm4gdGhpcy5zaXplKz10aGlzLmhhcyh0KT8wOjEsblt0XT1CbiYmZT09PW8/YTplLHRoaXN9LEduLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189W10sdGhpcy5zaXplPTB9LEduLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPXJyKGUsdCk7cmV0dXJuIShuPDApJiYobj09ZS5sZW5ndGgtMT9lLnBvcCgpOkt0LmNhbGwoZSxuLDEpLC0tdGhpcy5zaXplLCEwKX0sR24ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49cnIoZSx0KTtyZXR1cm4gbjwwP286ZVtuXVsxXX0sR24ucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gcnIodGhpcy5fX2RhdGFfXyx0KT4tMX0sR24ucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX19kYXRhX18scj1ycihuLHQpO3JldHVybiByPDA/KCsrdGhpcy5zaXplLG4ucHVzaChbdCxlXSkpOm5bcl1bMV09ZSx0aGlzfSxKbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNpemU9MCx0aGlzLl9fZGF0YV9fPXtoYXNoOm5ldyBWbixtYXA6bmV3KFRufHxHbiksc3RyaW5nOm5ldyBWbn19LEpuLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9ZmkodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX0sSm4ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gZmkodGhpcyx0KS5nZXQodCl9LEpuLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIGZpKHRoaXMsdCkuaGFzKHQpfSxKbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZmkodGhpcyx0KSxyPW4uc2l6ZTtyZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemUrPW4uc2l6ZT09cj8wOjEsdGhpc30sWW4ucHJvdG90eXBlLmFkZD1Zbi5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCxhKSx0aGlzfSxZbi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX0sS24ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1uZXcgR24sdGhpcy5zaXplPTB9LEtuLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPWUuZGVsZXRlKHQpO3JldHVybiB0aGlzLnNpemU9ZS5zaXplLG59LEtuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KHQpfSxLbi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX0sS24ucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187aWYobiBpbnN0YW5jZW9mIEduKXt2YXIgcj1uLl9fZGF0YV9fO2lmKCFUbnx8ci5sZW5ndGg8MTk5KXJldHVybiByLnB1c2goW3QsZV0pLHRoaXMuc2l6ZT0rK24uc2l6ZSx0aGlzO249dGhpcy5fX2RhdGFfXz1uZXcgSm4ocil9cmV0dXJuIG4uc2V0KHQsZSksdGhpcy5zaXplPW4uc2l6ZSx0aGlzfTt2YXIgaHI9am8oX3IpLHByPWpvKEVyLCEwKTtmdW5jdGlvbiBncih0LGUpe3ZhciBuPSEwO3JldHVybiBocih0LChmdW5jdGlvbih0LHIsbyl7cmV0dXJuIG49ISFlKHQscixvKX0pKSxufWZ1bmN0aW9uIHlyKHQsZSxuKXtmb3IodmFyIHI9LTEsaT10Lmxlbmd0aDsrK3I8aTspe3ZhciBhPXRbcl0scz1lKGEpO2lmKG51bGwhPXMmJih1PT09bz9zPT1zJiYhbHMocyk6bihzLHUpKSl2YXIgdT1zLGw9YX1yZXR1cm4gbH1mdW5jdGlvbiBtcih0LGUpe3ZhciBuPVtdO3JldHVybiBocih0LChmdW5jdGlvbih0LHIsbyl7ZSh0LHIsbykmJm4ucHVzaCh0KX0pKSxufWZ1bmN0aW9uIHZyKHQsZSxuLHIsbyl7dmFyIGk9LTEsYT10Lmxlbmd0aDtmb3Iobnx8KG49YmkpLG98fChvPVtdKTsrK2k8YTspe3ZhciBzPXRbaV07ZT4wJiZuKHMpP2U+MT92cihzLGUtMSxuLHIsbyk6TmUobyxzKTpyfHwob1tvLmxlbmd0aF09cyl9cmV0dXJuIG99dmFyIGJyPU5vKCksd3I9Tm8oITApO2Z1bmN0aW9uIF9yKHQsZSl7cmV0dXJuIHQmJmJyKHQsZSxMcyl9ZnVuY3Rpb24gRXIodCxlKXtyZXR1cm4gdCYmd3IodCxlLExzKX1mdW5jdGlvbiBTcih0LGUpe3JldHVybiBMZShlLChmdW5jdGlvbihlKXtyZXR1cm4gWmEodFtlXSl9KSl9ZnVuY3Rpb24gQXIodCxlKXtmb3IodmFyIG49MCxyPShlPV9vKGUsdCkpLmxlbmd0aDtudWxsIT10JiZuPHI7KXQ9dFtQaShlW24rK10pXTtyZXR1cm4gbiYmbj09cj90Om99ZnVuY3Rpb24gSXIodCxlLG4pe3ZhciByPWUodCk7cmV0dXJuIEhhKHQpP3I6TmUocixuKHQpKX1mdW5jdGlvbiBUcih0KXtyZXR1cm4gbnVsbD09dD90PT09bz9cIltvYmplY3QgVW5kZWZpbmVkXVwiOlwiW29iamVjdCBOdWxsXVwiOlF0JiZRdCBpbiBSdCh0KT9mdW5jdGlvbih0KXt2YXIgZT1OdC5jYWxsKHQsUXQpLG49dFtRdF07dHJ5e3RbUXRdPW87dmFyIHI9ITB9Y2F0Y2godCl7fXZhciBpPVd0LmNhbGwodCk7ciYmKGU/dFtRdF09bjpkZWxldGUgdFtRdF0pO3JldHVybiBpfSh0KTpmdW5jdGlvbih0KXtyZXR1cm4gV3QuY2FsbCh0KX0odCl9ZnVuY3Rpb24gUnIodCxlKXtyZXR1cm4gdD5lfWZ1bmN0aW9uIHhyKHQsZSl7cmV0dXJuIG51bGwhPXQmJk50LmNhbGwodCxlKX1mdW5jdGlvbiBDcih0LGUpe3JldHVybiBudWxsIT10JiZlIGluIFJ0KHQpfWZ1bmN0aW9uIEJyKHQsZSxuKXtmb3IodmFyIGk9bj9VZTpPZSxhPXRbMF0ubGVuZ3RoLHM9dC5sZW5ndGgsdT1zLGw9cihzKSxjPTEvMCxmPVtdO3UtLTspe3ZhciBkPXRbdV07dSYmZSYmKGQ9amUoZCxRZShlKSkpLGM9d24oZC5sZW5ndGgsYyksbFt1XT0hbiYmKGV8fGE+PTEyMCYmZC5sZW5ndGg+PTEyMCk/bmV3IFluKHUmJmQpOm99ZD10WzBdO3ZhciBoPS0xLHA9bFswXTt0OmZvcig7KytoPGEmJmYubGVuZ3RoPGM7KXt2YXIgZz1kW2hdLHk9ZT9lKGcpOmc7aWYoZz1ufHwwIT09Zz9nOjAsIShwP2VuKHAseSk6aShmLHksbikpKXtmb3IodT1zOy0tdTspe3ZhciBtPWxbdV07aWYoIShtP2VuKG0seSk6aSh0W3VdLHksbikpKWNvbnRpbnVlIHR9cCYmcC5wdXNoKHkpLGYucHVzaChnKX19cmV0dXJuIGZ9ZnVuY3Rpb24ga3IodCxlLG4pe3ZhciByPW51bGw9PSh0PUNpKHQsZT1fbyhlLHQpKSk/dDp0W1BpKFhpKGUpKV07cmV0dXJuIG51bGw9PXI/bzpSZShyLHQsbil9ZnVuY3Rpb24gTHIodCl7cmV0dXJuIG5zKHQpJiZUcih0KT09dn1mdW5jdGlvbiBPcih0LGUsbixyLGkpe3JldHVybiB0PT09ZXx8KG51bGw9PXR8fG51bGw9PWV8fCFucyh0KSYmIW5zKGUpP3QhPXQmJmUhPWU6ZnVuY3Rpb24odCxlLG4scixpLGEpe3ZhciBzPUhhKHQpLHU9SGEoZSksbD1zP2I6eWkodCksYz11P2I6eWkoZSksZj0obD1sPT12P1I6bCk9PVIsZD0oYz1jPT12P1I6Yyk9PVIsaD1sPT1jO2lmKGgmJllhKHQpKXtpZighWWEoZSkpcmV0dXJuITE7cz0hMCxmPSExfWlmKGgmJiFmKXJldHVybiBhfHwoYT1uZXcgS24pLHN8fGNzKHQpP3JpKHQsZSxuLHIsaSxhKTpmdW5jdGlvbih0LGUsbixyLG8saSxhKXtzd2l0Y2gobil7Y2FzZSBqOmlmKHQuYnl0ZUxlbmd0aCE9ZS5ieXRlTGVuZ3RofHx0LmJ5dGVPZmZzZXQhPWUuYnl0ZU9mZnNldClyZXR1cm4hMTt0PXQuYnVmZmVyLGU9ZS5idWZmZXI7Y2FzZSBVOnJldHVybiEodC5ieXRlTGVuZ3RoIT1lLmJ5dGVMZW5ndGh8fCFpKG5ldyBIdCh0KSxuZXcgSHQoZSkpKTtjYXNlIHc6Y2FzZSBfOmNhc2UgVDpyZXR1cm4gRGEoK3QsK2UpO2Nhc2UgRTpyZXR1cm4gdC5uYW1lPT1lLm5hbWUmJnQubWVzc2FnZT09ZS5tZXNzYWdlO2Nhc2UgQzpjYXNlIGs6cmV0dXJuIHQ9PWUrXCJcIjtjYXNlIEk6dmFyIHM9bG47Y2FzZSBCOnZhciB1PTEmcjtpZihzfHwocz1kbiksdC5zaXplIT1lLnNpemUmJiF1KXJldHVybiExO3ZhciBsPWEuZ2V0KHQpO2lmKGwpcmV0dXJuIGw9PWU7cnw9MixhLnNldCh0LGUpO3ZhciBjPXJpKHModCkscyhlKSxyLG8saSxhKTtyZXR1cm4gYS5kZWxldGUodCksYztjYXNlIEw6aWYoV24pcmV0dXJuIFduLmNhbGwodCk9PVduLmNhbGwoZSl9cmV0dXJuITF9KHQsZSxsLG4scixpLGEpO2lmKCEoMSZuKSl7dmFyIHA9ZiYmTnQuY2FsbCh0LFwiX193cmFwcGVkX19cIiksZz1kJiZOdC5jYWxsKGUsXCJfX3dyYXBwZWRfX1wiKTtpZihwfHxnKXt2YXIgeT1wP3QudmFsdWUoKTp0LG09Zz9lLnZhbHVlKCk6ZTtyZXR1cm4gYXx8KGE9bmV3IEtuKSxpKHksbSxuLHIsYSl9fWlmKCFoKXJldHVybiExO3JldHVybiBhfHwoYT1uZXcgS24pLGZ1bmN0aW9uKHQsZSxuLHIsaSxhKXt2YXIgcz0xJm4sdT1paSh0KSxsPXUubGVuZ3RoLGM9aWkoZSksZj1jLmxlbmd0aDtpZihsIT1mJiYhcylyZXR1cm4hMTt2YXIgZD1sO2Zvcig7ZC0tOyl7dmFyIGg9dVtkXTtpZighKHM/aCBpbiBlOk50LmNhbGwoZSxoKSkpcmV0dXJuITF9dmFyIHA9YS5nZXQodCksZz1hLmdldChlKTtpZihwJiZnKXJldHVybiBwPT1lJiZnPT10O3ZhciB5PSEwO2Euc2V0KHQsZSksYS5zZXQoZSx0KTt2YXIgbT1zO2Zvcig7KytkPGw7KXt2YXIgdj10W2g9dVtkXV0sYj1lW2hdO2lmKHIpdmFyIHc9cz9yKGIsdixoLGUsdCxhKTpyKHYsYixoLHQsZSxhKTtpZighKHc9PT1vP3Y9PT1ifHxpKHYsYixuLHIsYSk6dykpe3k9ITE7YnJlYWt9bXx8KG09XCJjb25zdHJ1Y3RvclwiPT1oKX1pZih5JiYhbSl7dmFyIF89dC5jb25zdHJ1Y3RvcixFPWUuY29uc3RydWN0b3I7Xz09RXx8IShcImNvbnN0cnVjdG9yXCJpbiB0KXx8IShcImNvbnN0cnVjdG9yXCJpbiBlKXx8XCJmdW5jdGlvblwiPT10eXBlb2YgXyYmXyBpbnN0YW5jZW9mIF8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIEUmJkUgaW5zdGFuY2VvZiBFfHwoeT0hMSl9cmV0dXJuIGEuZGVsZXRlKHQpLGEuZGVsZXRlKGUpLHl9KHQsZSxuLHIsaSxhKX0odCxlLG4scixPcixpKSl9ZnVuY3Rpb24gVXIodCxlLG4scil7dmFyIGk9bi5sZW5ndGgsYT1pLHM9IXI7aWYobnVsbD09dClyZXR1cm4hYTtmb3IodD1SdCh0KTtpLS07KXt2YXIgdT1uW2ldO2lmKHMmJnVbMl0/dVsxXSE9PXRbdVswXV06ISh1WzBdaW4gdCkpcmV0dXJuITF9Zm9yKDsrK2k8YTspe3ZhciBsPSh1PW5baV0pWzBdLGM9dFtsXSxmPXVbMV07aWYocyYmdVsyXSl7aWYoYz09PW8mJiEobCBpbiB0KSlyZXR1cm4hMX1lbHNle3ZhciBkPW5ldyBLbjtpZihyKXZhciBoPXIoYyxmLGwsdCxlLGQpO2lmKCEoaD09PW8/T3IoZixjLDMscixkKTpoKSlyZXR1cm4hMX19cmV0dXJuITB9ZnVuY3Rpb24ganIodCl7cmV0dXJuISghZXModCl8fChlPXQsUHQmJlB0IGluIGUpKSYmKFphKHQpP0Z0OnZ0KS50ZXN0KFdpKHQpKTt2YXIgZX1mdW5jdGlvbiBOcih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6bnVsbD09dD9vdTpcIm9iamVjdFwiPT10eXBlb2YgdD9IYSh0KT9Gcih0WzBdLHRbMV0pOkRyKHQpOmh1KHQpfWZ1bmN0aW9uIE1yKHQpe2lmKCFJaSh0KSlyZXR1cm4gSmUodCk7dmFyIGU9W107Zm9yKHZhciBuIGluIFJ0KHQpKU50LmNhbGwodCxuKSYmXCJjb25zdHJ1Y3RvclwiIT1uJiZlLnB1c2gobik7cmV0dXJuIGV9ZnVuY3Rpb24gUHIodCl7aWYoIWVzKHQpKXJldHVybiBmdW5jdGlvbih0KXt2YXIgZT1bXTtpZihudWxsIT10KWZvcih2YXIgbiBpbiBSdCh0KSllLnB1c2gobik7cmV0dXJuIGV9KHQpO3ZhciBlPUlpKHQpLG49W107Zm9yKHZhciByIGluIHQpKFwiY29uc3RydWN0b3JcIiE9cnx8IWUmJk50LmNhbGwodCxyKSkmJm4ucHVzaChyKTtyZXR1cm4gbn1mdW5jdGlvbiBXcih0LGUpe3JldHVybiB0PGV9ZnVuY3Rpb24gJHIodCxlKXt2YXIgbj0tMSxvPUdhKHQpP3IodC5sZW5ndGgpOltdO3JldHVybiBocih0LChmdW5jdGlvbih0LHIsaSl7b1srK25dPWUodCxyLGkpfSkpLG99ZnVuY3Rpb24gRHIodCl7dmFyIGU9ZGkodCk7cmV0dXJuIDE9PWUubGVuZ3RoJiZlWzBdWzJdP1JpKGVbMF1bMF0sZVswXVsxXSk6ZnVuY3Rpb24obil7cmV0dXJuIG49PT10fHxVcihuLHQsZSl9fWZ1bmN0aW9uIEZyKHQsZSl7cmV0dXJuIEVpKHQpJiZUaShlKT9SaShQaSh0KSxlKTpmdW5jdGlvbihuKXt2YXIgcj1ScyhuLHQpO3JldHVybiByPT09byYmcj09PWU/eHMobix0KTpPcihlLHIsMyl9fWZ1bmN0aW9uIHpyKHQsZSxuLHIsaSl7dCE9PWUmJmJyKGUsKGZ1bmN0aW9uKGEscyl7aWYoaXx8KGk9bmV3IEtuKSxlcyhhKSkhZnVuY3Rpb24odCxlLG4scixpLGEscyl7dmFyIHU9QmkodCxuKSxsPUJpKGUsbiksYz1zLmdldChsKTtpZihjKXJldHVybiB2b2lkIGVyKHQsbixjKTt2YXIgZj1hP2EodSxsLG4rXCJcIix0LGUscyk6byxkPWY9PT1vO2lmKGQpe3ZhciBoPUhhKGwpLHA9IWgmJllhKGwpLGc9IWgmJiFwJiZjcyhsKTtmPWwsaHx8cHx8Zz9IYSh1KT9mPXU6SmEodSk/Zj1rbyh1KTpwPyhkPSExLGY9SW8obCwhMCkpOmc/KGQ9ITEsZj1SbyhsLCEwKSk6Zj1bXTppcyhsKXx8cWEobCk/KGY9dSxxYSh1KT9mPXZzKHUpOmVzKHUpJiYhWmEodSl8fChmPXZpKGwpKSk6ZD0hMX1kJiYocy5zZXQobCxmKSxpKGYsbCxyLGEscykscy5kZWxldGUobCkpO2VyKHQsbixmKX0odCxlLHMsbix6cixyLGkpO2Vsc2V7dmFyIHU9cj9yKEJpKHQscyksYSxzK1wiXCIsdCxlLGkpOm87dT09PW8mJih1PWEpLGVyKHQscyx1KX19KSxPcyl9ZnVuY3Rpb24gcXIodCxlKXt2YXIgbj10Lmxlbmd0aDtpZihuKXJldHVybiB3aShlKz1lPDA/bjowLG4pP3RbZV06b31mdW5jdGlvbiBIcih0LGUsbil7ZT1lLmxlbmd0aD9qZShlLChmdW5jdGlvbih0KXtyZXR1cm4gSGEodCk/ZnVuY3Rpb24oZSl7cmV0dXJuIEFyKGUsMT09PXQubGVuZ3RoP3RbMF06dCl9OnR9KSk6W291XTt2YXIgcj0tMTtlPWplKGUsUWUoY2koKSkpO3ZhciBvPSRyKHQsKGZ1bmN0aW9uKHQsbixvKXt2YXIgaT1qZShlLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0KX0pKTtyZXR1cm57Y3JpdGVyaWE6aSxpbmRleDorK3IsdmFsdWU6dH19KSk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5sZW5ndGg7Zm9yKHQuc29ydChlKTtuLS07KXRbbl09dFtuXS52YWx1ZTtyZXR1cm4gdH0obywoZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByPS0xLG89dC5jcml0ZXJpYSxpPWUuY3JpdGVyaWEsYT1vLmxlbmd0aCxzPW4ubGVuZ3RoO2Zvcig7KytyPGE7KXt2YXIgdT14byhvW3JdLGlbcl0pO2lmKHUpcmV0dXJuIHI+PXM/dTp1KihcImRlc2NcIj09bltyXT8tMToxKX1yZXR1cm4gdC5pbmRleC1lLmluZGV4fSh0LGUsbil9KSl9ZnVuY3Rpb24gVnIodCxlLG4pe2Zvcih2YXIgcj0tMSxvPWUubGVuZ3RoLGk9e307KytyPG87KXt2YXIgYT1lW3JdLHM9QXIodCxhKTtuKHMsYSkmJnRvKGksX28oYSx0KSxzKX1yZXR1cm4gaX1mdW5jdGlvbiBHcih0LGUsbixyKXt2YXIgbz1yP3FlOnplLGk9LTEsYT1lLmxlbmd0aCxzPXQ7Zm9yKHQ9PT1lJiYoZT1rbyhlKSksbiYmKHM9amUodCxRZShuKSkpOysraTxhOylmb3IodmFyIHU9MCxsPWVbaV0sYz1uP24obCk6bDsodT1vKHMsYyx1LHIpKT4tMTspcyE9PXQmJkt0LmNhbGwocyx1LDEpLEt0LmNhbGwodCx1LDEpO3JldHVybiB0fWZ1bmN0aW9uIEpyKHQsZSl7Zm9yKHZhciBuPXQ/ZS5sZW5ndGg6MCxyPW4tMTtuLS07KXt2YXIgbz1lW25dO2lmKG49PXJ8fG8hPT1pKXt2YXIgaT1vO3dpKG8pP0t0LmNhbGwodCxvLDEpOmhvKHQsbyl9fXJldHVybiB0fWZ1bmN0aW9uIFlyKHQsZSl7cmV0dXJuIHQreWUoU24oKSooZS10KzEpKX1mdW5jdGlvbiBLcih0LGUpe3ZhciBuPVwiXCI7aWYoIXR8fGU8MXx8ZT5wKXJldHVybiBuO2Rve2UlMiYmKG4rPXQpLChlPXllKGUvMikpJiYodCs9dCl9d2hpbGUoZSk7cmV0dXJuIG59ZnVuY3Rpb24gWHIodCxlKXtyZXR1cm4gT2koeGkodCxlLG91KSx0K1wiXCIpfWZ1bmN0aW9uIFpyKHQpe3JldHVybiBabihEcyh0KSl9ZnVuY3Rpb24gUXIodCxlKXt2YXIgbj1Ecyh0KTtyZXR1cm4gTmkobix1cihlLDAsbi5sZW5ndGgpKX1mdW5jdGlvbiB0byh0LGUsbixyKXtpZighZXModCkpcmV0dXJuIHQ7Zm9yKHZhciBpPS0xLGE9KGU9X28oZSx0KSkubGVuZ3RoLHM9YS0xLHU9dDtudWxsIT11JiYrK2k8YTspe3ZhciBsPVBpKGVbaV0pLGM9bjtpZihcIl9fcHJvdG9fX1wiPT09bHx8XCJjb25zdHJ1Y3RvclwiPT09bHx8XCJwcm90b3R5cGVcIj09PWwpcmV0dXJuIHQ7aWYoaSE9cyl7dmFyIGY9dVtsXTsoYz1yP3IoZixsLHUpOm8pPT09byYmKGM9ZXMoZik/Zjp3aShlW2krMV0pP1tdOnt9KX1ucih1LGwsYyksdT11W2xdfXJldHVybiB0fXZhciBlbz1rbj9mdW5jdGlvbih0LGUpe3JldHVybiBrbi5zZXQodCxlKSx0fTpvdSxubz1uZT9mdW5jdGlvbih0LGUpe3JldHVybiBuZSh0LFwidG9TdHJpbmdcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsdmFsdWU6ZXUoZSksd3JpdGFibGU6ITB9KX06b3U7ZnVuY3Rpb24gcm8odCl7cmV0dXJuIE5pKERzKHQpKX1mdW5jdGlvbiBvbyh0LGUsbil7dmFyIG89LTEsaT10Lmxlbmd0aDtlPDAmJihlPS1lPmk/MDppK2UpLChuPW4+aT9pOm4pPDAmJihuKz1pKSxpPWU+bj8wOm4tZT4+PjAsZT4+Pj0wO2Zvcih2YXIgYT1yKGkpOysrbzxpOylhW29dPXRbbytlXTtyZXR1cm4gYX1mdW5jdGlvbiBpbyh0LGUpe3ZhciBuO3JldHVybiBocih0LChmdW5jdGlvbih0LHIsbyl7cmV0dXJuIShuPWUodCxyLG8pKX0pKSwhIW59ZnVuY3Rpb24gYW8odCxlLG4pe3ZhciByPTAsbz1udWxsPT10P3I6dC5sZW5ndGg7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUmJmU9PWUmJm88PTIxNDc0ODM2NDcpe2Zvcig7cjxvOyl7dmFyIGk9citvPj4+MSxhPXRbaV07bnVsbCE9PWEmJiFscyhhKSYmKG4/YTw9ZTphPGUpP3I9aSsxOm89aX1yZXR1cm4gb31yZXR1cm4gc28odCxlLG91LG4pfWZ1bmN0aW9uIHNvKHQsZSxuLHIpe3ZhciBpPTAsYT1udWxsPT10PzA6dC5sZW5ndGg7aWYoMD09PWEpcmV0dXJuIDA7Zm9yKHZhciBzPShlPW4oZSkpIT1lLHU9bnVsbD09PWUsbD1scyhlKSxjPWU9PT1vO2k8YTspe3ZhciBmPXllKChpK2EpLzIpLGQ9bih0W2ZdKSxoPWQhPT1vLHA9bnVsbD09PWQsZz1kPT1kLHk9bHMoZCk7aWYocyl2YXIgbT1yfHxnO2Vsc2UgbT1jP2cmJihyfHxoKTp1P2cmJmgmJihyfHwhcCk6bD9nJiZoJiYhcCYmKHJ8fCF5KTohcCYmIXkmJihyP2Q8PWU6ZDxlKTttP2k9ZisxOmE9Zn1yZXR1cm4gd24oYSw0Mjk0OTY3Mjk0KX1mdW5jdGlvbiB1byh0LGUpe2Zvcih2YXIgbj0tMSxyPXQubGVuZ3RoLG89MCxpPVtdOysrbjxyOyl7dmFyIGE9dFtuXSxzPWU/ZShhKTphO2lmKCFufHwhRGEocyx1KSl7dmFyIHU9cztpW28rK109MD09PWE/MDphfX1yZXR1cm4gaX1mdW5jdGlvbiBsbyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90OmxzKHQpP2c6K3R9ZnVuY3Rpb24gY28odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYoSGEodCkpcmV0dXJuIGplKHQsY28pK1wiXCI7aWYobHModCkpcmV0dXJuICRuPyRuLmNhbGwodCk6XCJcIjt2YXIgZT10K1wiXCI7cmV0dXJuXCIwXCI9PWUmJjEvdD09LTEvMD9cIi0wXCI6ZX1mdW5jdGlvbiBmbyh0LGUsbil7dmFyIHI9LTEsbz1PZSxpPXQubGVuZ3RoLGE9ITAscz1bXSx1PXM7aWYobilhPSExLG89VWU7ZWxzZSBpZihpPj0yMDApe3ZhciBsPWU/bnVsbDpYbyh0KTtpZihsKXJldHVybiBkbihsKTthPSExLG89ZW4sdT1uZXcgWW59ZWxzZSB1PWU/W106czt0OmZvcig7KytyPGk7KXt2YXIgYz10W3JdLGY9ZT9lKGMpOmM7aWYoYz1ufHwwIT09Yz9jOjAsYSYmZj09Zil7Zm9yKHZhciBkPXUubGVuZ3RoO2QtLTspaWYodVtkXT09PWYpY29udGludWUgdDtlJiZ1LnB1c2goZikscy5wdXNoKGMpfWVsc2Ugbyh1LGYsbil8fCh1IT09cyYmdS5wdXNoKGYpLHMucHVzaChjKSl9cmV0dXJuIHN9ZnVuY3Rpb24gaG8odCxlKXtyZXR1cm4gbnVsbD09KHQ9Q2kodCxlPV9vKGUsdCkpKXx8ZGVsZXRlIHRbUGkoWGkoZSkpXX1mdW5jdGlvbiBwbyh0LGUsbixyKXtyZXR1cm4gdG8odCxlLG4oQXIodCxlKSkscil9ZnVuY3Rpb24gZ28odCxlLG4scil7Zm9yKHZhciBvPXQubGVuZ3RoLGk9cj9vOi0xOyhyP2ktLTorK2k8bykmJmUodFtpXSxpLHQpOyk7cmV0dXJuIG4/b28odCxyPzA6aSxyP2krMTpvKTpvbyh0LHI/aSsxOjAscj9vOmkpfWZ1bmN0aW9uIHlvKHQsZSl7dmFyIG49dDtyZXR1cm4gbiBpbnN0YW5jZW9mIEhuJiYobj1uLnZhbHVlKCkpLE1lKGUsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZnVuYy5hcHBseShlLnRoaXNBcmcsTmUoW3RdLGUuYXJncykpfSksbil9ZnVuY3Rpb24gbW8odCxlLG4pe3ZhciBvPXQubGVuZ3RoO2lmKG88MilyZXR1cm4gbz9mbyh0WzBdKTpbXTtmb3IodmFyIGk9LTEsYT1yKG8pOysraTxvOylmb3IodmFyIHM9dFtpXSx1PS0xOysrdTxvOyl1IT1pJiYoYVtpXT1kcihhW2ldfHxzLHRbdV0sZSxuKSk7cmV0dXJuIGZvKHZyKGEsMSksZSxuKX1mdW5jdGlvbiB2byh0LGUsbil7Zm9yKHZhciByPS0xLGk9dC5sZW5ndGgsYT1lLmxlbmd0aCxzPXt9OysrcjxpOyl7dmFyIHU9cjxhP2Vbcl06bztuKHMsdFtyXSx1KX1yZXR1cm4gc31mdW5jdGlvbiBibyh0KXtyZXR1cm4gSmEodCk/dDpbXX1mdW5jdGlvbiB3byh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6b3V9ZnVuY3Rpb24gX28odCxlKXtyZXR1cm4gSGEodCk/dDpFaSh0LGUpP1t0XTpNaShicyh0KSl9dmFyIEVvPVhyO2Z1bmN0aW9uIFNvKHQsZSxuKXt2YXIgcj10Lmxlbmd0aDtyZXR1cm4gbj1uPT09bz9yOm4sIWUmJm4+PXI/dDpvbyh0LGUsbil9dmFyIEFvPW9lfHxmdW5jdGlvbih0KXtyZXR1cm4gZ2UuY2xlYXJUaW1lb3V0KHQpfTtmdW5jdGlvbiBJbyh0LGUpe2lmKGUpcmV0dXJuIHQuc2xpY2UoKTt2YXIgbj10Lmxlbmd0aCxyPVZ0P1Z0KG4pOm5ldyB0LmNvbnN0cnVjdG9yKG4pO3JldHVybiB0LmNvcHkocikscn1mdW5jdGlvbiBUbyh0KXt2YXIgZT1uZXcgdC5jb25zdHJ1Y3Rvcih0LmJ5dGVMZW5ndGgpO3JldHVybiBuZXcgSHQoZSkuc2V0KG5ldyBIdCh0KSksZX1mdW5jdGlvbiBSbyh0LGUpe3ZhciBuPWU/VG8odC5idWZmZXIpOnQuYnVmZmVyO3JldHVybiBuZXcgdC5jb25zdHJ1Y3RvcihuLHQuYnl0ZU9mZnNldCx0Lmxlbmd0aCl9ZnVuY3Rpb24geG8odCxlKXtpZih0IT09ZSl7dmFyIG49dCE9PW8scj1udWxsPT09dCxpPXQ9PXQsYT1scyh0KSxzPWUhPT1vLHU9bnVsbD09PWUsbD1lPT1lLGM9bHMoZSk7aWYoIXUmJiFjJiYhYSYmdD5lfHxhJiZzJiZsJiYhdSYmIWN8fHImJnMmJmx8fCFuJiZsfHwhaSlyZXR1cm4gMTtpZighciYmIWEmJiFjJiZ0PGV8fGMmJm4mJmkmJiFyJiYhYXx8dSYmbiYmaXx8IXMmJml8fCFsKXJldHVybi0xfXJldHVybiAwfWZ1bmN0aW9uIENvKHQsZSxuLG8pe2Zvcih2YXIgaT0tMSxhPXQubGVuZ3RoLHM9bi5sZW5ndGgsdT0tMSxsPWUubGVuZ3RoLGM9Ym4oYS1zLDApLGY9cihsK2MpLGQ9IW87Kyt1PGw7KWZbdV09ZVt1XTtmb3IoOysraTxzOykoZHx8aTxhKSYmKGZbbltpXV09dFtpXSk7Zm9yKDtjLS07KWZbdSsrXT10W2krK107cmV0dXJuIGZ9ZnVuY3Rpb24gQm8odCxlLG4sbyl7Zm9yKHZhciBpPS0xLGE9dC5sZW5ndGgscz0tMSx1PW4ubGVuZ3RoLGw9LTEsYz1lLmxlbmd0aCxmPWJuKGEtdSwwKSxkPXIoZitjKSxoPSFvOysraTxmOylkW2ldPXRbaV07Zm9yKHZhciBwPWk7KytsPGM7KWRbcCtsXT1lW2xdO2Zvcig7KytzPHU7KShofHxpPGEpJiYoZFtwK25bc11dPXRbaSsrXSk7cmV0dXJuIGR9ZnVuY3Rpb24ga28odCxlKXt2YXIgbj0tMSxvPXQubGVuZ3RoO2ZvcihlfHwoZT1yKG8pKTsrK248bzspZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIExvKHQsZSxuLHIpe3ZhciBpPSFuO258fChuPXt9KTtmb3IodmFyIGE9LTEscz1lLmxlbmd0aDsrK2E8czspe3ZhciB1PWVbYV0sbD1yP3Ioblt1XSx0W3VdLHUsbix0KTpvO2w9PT1vJiYobD10W3VdKSxpP2FyKG4sdSxsKTpucihuLHUsbCl9cmV0dXJuIG59ZnVuY3Rpb24gT28odCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgbz1IYShuKT94ZTpvcixpPWU/ZSgpOnt9O3JldHVybiBvKG4sdCxjaShyLDIpLGkpfX1mdW5jdGlvbiBVbyh0KXtyZXR1cm4gWHIoKGZ1bmN0aW9uKGUsbil7dmFyIHI9LTEsaT1uLmxlbmd0aCxhPWk+MT9uW2ktMV06byxzPWk+Mj9uWzJdOm87Zm9yKGE9dC5sZW5ndGg+MyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYT8oaS0tLGEpOm8scyYmX2koblswXSxuWzFdLHMpJiYoYT1pPDM/bzphLGk9MSksZT1SdChlKTsrK3I8aTspe3ZhciB1PW5bcl07dSYmdChlLHUscixhKX1yZXR1cm4gZX0pKX1mdW5jdGlvbiBqbyh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe2lmKG51bGw9PW4pcmV0dXJuIG47aWYoIUdhKG4pKXJldHVybiB0KG4scik7Zm9yKHZhciBvPW4ubGVuZ3RoLGk9ZT9vOi0xLGE9UnQobik7KGU/aS0tOisraTxvKSYmITEhPT1yKGFbaV0saSxhKTspO3JldHVybiBufX1mdW5jdGlvbiBObyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe2Zvcih2YXIgbz0tMSxpPVJ0KGUpLGE9cihlKSxzPWEubGVuZ3RoO3MtLTspe3ZhciB1PWFbdD9zOisrb107aWYoITE9PT1uKGlbdV0sdSxpKSlicmVha31yZXR1cm4gZX19ZnVuY3Rpb24gTW8odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXVuKGU9YnMoZSkpP2duKGUpOm8scj1uP25bMF06ZS5jaGFyQXQoMCksaT1uP1NvKG4sMSkuam9pbihcIlwiKTplLnNsaWNlKDEpO3JldHVybiByW3RdKCkraX19ZnVuY3Rpb24gUG8odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBNZShacyhxcyhlKS5yZXBsYWNlKHRlLFwiXCIpKSx0LFwiXCIpfX1mdW5jdGlvbiBXbyh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoZVswXSk7Y2FzZSAyOnJldHVybiBuZXcgdChlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSk7Y2FzZSA1OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0pO2Nhc2UgNjpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0pO2Nhc2UgNzpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0sZVs2XSl9dmFyIG49Rm4odC5wcm90b3R5cGUpLHI9dC5hcHBseShuLGUpO3JldHVybiBlcyhyKT9yOm59fWZ1bmN0aW9uICRvKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7dmFyIGk9UnQoZSk7aWYoIUdhKGUpKXt2YXIgYT1jaShuLDMpO2U9THMoZSksbj1mdW5jdGlvbih0KXtyZXR1cm4gYShpW3RdLHQsaSl9fXZhciBzPXQoZSxuLHIpO3JldHVybiBzPi0xP2lbYT9lW3NdOnNdOm99fWZ1bmN0aW9uIERvKHQpe3JldHVybiBvaSgoZnVuY3Rpb24oZSl7dmFyIG49ZS5sZW5ndGgscj1uLGE9cW4ucHJvdG90eXBlLnRocnU7Zm9yKHQmJmUucmV2ZXJzZSgpO3ItLTspe3ZhciBzPWVbcl07aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygcyl0aHJvdyBuZXcgQnQoaSk7aWYoYSYmIXUmJlwid3JhcHBlclwiPT11aShzKSl2YXIgdT1uZXcgcW4oW10sITApfWZvcihyPXU/cjpuOysrcjxuOyl7dmFyIGw9dWkocz1lW3JdKSxjPVwid3JhcHBlclwiPT1sP3NpKHMpOm87dT1jJiZTaShjWzBdKSYmNDI0PT1jWzFdJiYhY1s0XS5sZW5ndGgmJjE9PWNbOV0/dVt1aShjWzBdKV0uYXBwbHkodSxjWzNdKToxPT1zLmxlbmd0aCYmU2kocyk/dVtsXSgpOnUudGhydShzKX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMscj10WzBdO2lmKHUmJjE9PXQubGVuZ3RoJiZIYShyKSlyZXR1cm4gdS5wbGFudChyKS52YWx1ZSgpO2Zvcih2YXIgbz0wLGk9bj9lW29dLmFwcGx5KHRoaXMsdCk6cjsrK288bjspaT1lW29dLmNhbGwodGhpcyxpKTtyZXR1cm4gaX19KSl9ZnVuY3Rpb24gRm8odCxlLG4saSxhLHMsdSxsLGMsZCl7dmFyIGg9ZSZmLHA9MSZlLGc9MiZlLHk9MjQmZSxtPTUxMiZlLHY9Zz9vOldvKHQpO3JldHVybiBmdW5jdGlvbiBmKCl7Zm9yKHZhciBiPWFyZ3VtZW50cy5sZW5ndGgsdz1yKGIpLF89YjtfLS07KXdbX109YXJndW1lbnRzW19dO2lmKHkpdmFyIEU9bGkoZiksUz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aCxyPTA7bi0tOyl0W25dPT09ZSYmKytyO3JldHVybiByfSh3LEUpO2lmKGkmJih3PUNvKHcsaSxhLHkpKSxzJiYodz1Cbyh3LHMsdSx5KSksYi09Uyx5JiZiPGQpe3ZhciBBPWZuKHcsRSk7cmV0dXJuIFlvKHQsZSxGbyxmLnBsYWNlaG9sZGVyLG4sdyxBLGwsYyxkLWIpfXZhciBJPXA/bjp0aGlzLFQ9Zz9JW3RdOnQ7cmV0dXJuIGI9dy5sZW5ndGgsbD93PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5sZW5ndGgscj13bihlLmxlbmd0aCxuKSxpPWtvKHQpO2Zvcig7ci0tOyl7dmFyIGE9ZVtyXTt0W3JdPXdpKGEsbik/aVthXTpvfXJldHVybiB0fSh3LGwpOm0mJmI+MSYmdy5yZXZlcnNlKCksaCYmYzxiJiYody5sZW5ndGg9YyksdGhpcyYmdGhpcyE9PWdlJiZ0aGlzIGluc3RhbmNlb2YgZiYmKFQ9dnx8V28oVCkpLFQuYXBwbHkoSSx3KX19ZnVuY3Rpb24gem8odCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIF9yKHQsKGZ1bmN0aW9uKHQsbyxpKXtlKHIsbih0KSxvLGkpfSkpLHJ9KG4sdCxlKHIpLHt9KX19ZnVuY3Rpb24gcW8odCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgaTtpZihuPT09byYmcj09PW8pcmV0dXJuIGU7aWYobiE9PW8mJihpPW4pLHIhPT1vKXtpZihpPT09bylyZXR1cm4gcjtcInN0cmluZ1wiPT10eXBlb2Ygbnx8XCJzdHJpbmdcIj09dHlwZW9mIHI/KG49Y28obikscj1jbyhyKSk6KG49bG8obikscj1sbyhyKSksaT10KG4scil9cmV0dXJuIGl9fWZ1bmN0aW9uIEhvKHQpe3JldHVybiBvaSgoZnVuY3Rpb24oZSl7cmV0dXJuIGU9amUoZSxRZShjaSgpKSksWHIoKGZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7cmV0dXJuIHQoZSwoZnVuY3Rpb24odCl7cmV0dXJuIFJlKHQscixuKX0pKX0pKX0pKX1mdW5jdGlvbiBWbyh0LGUpe3ZhciBuPShlPWU9PT1vP1wiIFwiOmNvKGUpKS5sZW5ndGg7aWYobjwyKXJldHVybiBuP0tyKGUsdCk6ZTt2YXIgcj1LcihlLHBlKHQvcG4oZSkpKTtyZXR1cm4gdW4oZSk/U28oZ24ociksMCx0KS5qb2luKFwiXCIpOnIuc2xpY2UoMCx0KX1mdW5jdGlvbiBHbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBpJiZcIm51bWJlclwiIT10eXBlb2YgaSYmX2koZSxuLGkpJiYobj1pPW8pLGU9cHMoZSksbj09PW8/KG49ZSxlPTApOm49cHMobiksZnVuY3Rpb24odCxlLG4sbyl7Zm9yKHZhciBpPS0xLGE9Ym4ocGUoKGUtdCkvKG58fDEpKSwwKSxzPXIoYSk7YS0tOylzW28/YTorK2ldPXQsdCs9bjtyZXR1cm4gc30oZSxuLGk9aT09PW8/ZTxuPzE6LTE6cHMoaSksdCl9fWZ1bmN0aW9uIEpvKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZcInN0cmluZ1wiPT10eXBlb2Ygbnx8KGU9bXMoZSksbj1tcyhuKSksdChlLG4pfX1mdW5jdGlvbiBZbyh0LGUsbixyLGksYSxzLHUsZixkKXt2YXIgaD04JmU7ZXw9aD9sOmMsNCYoZSY9fihoP2M6bCkpfHwoZSY9LTQpO3ZhciBwPVt0LGUsaSxoP2E6byxoP3M6byxoP286YSxoP286cyx1LGYsZF0sZz1uLmFwcGx5KG8scCk7cmV0dXJuIFNpKHQpJiZraShnLHApLGcucGxhY2Vob2xkZXI9cixVaShnLHQsZSl9ZnVuY3Rpb24gS28odCl7dmFyIGU9VHRbdF07cmV0dXJuIGZ1bmN0aW9uKHQsbil7aWYodD1tcyh0KSwobj1udWxsPT1uPzA6d24oZ3MobiksMjkyKSkmJndlKHQpKXt2YXIgcj0oYnModCkrXCJlXCIpLnNwbGl0KFwiZVwiKTtyZXR1cm4rKChyPShicyhlKHJbMF0rXCJlXCIrKCtyWzFdK24pKSkrXCJlXCIpLnNwbGl0KFwiZVwiKSlbMF0rXCJlXCIrKCtyWzFdLW4pKX1yZXR1cm4gZSh0KX19dmFyIFhvPXhuJiYxL2RuKG5ldyB4bihbLC0wXSkpWzFdPT1oP2Z1bmN0aW9uKHQpe3JldHVybiBuZXcgeG4odCl9Omx1O2Z1bmN0aW9uIFpvKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj15aShlKTtyZXR1cm4gbj09ST9sbihlKTpuPT1CP2huKGUpOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGplKGUsKGZ1bmN0aW9uKGUpe3JldHVybltlLHRbZV1dfSkpfShlLHQoZSkpfX1mdW5jdGlvbiBRbyh0LGUsbixhLGgscCxnLHkpe3ZhciBtPTImZTtpZighbSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgQnQoaSk7dmFyIHY9YT9hLmxlbmd0aDowO2lmKHZ8fChlJj0tOTcsYT1oPW8pLGc9Zz09PW8/ZzpibihncyhnKSwwKSx5PXk9PT1vP3k6Z3MoeSksdi09aD9oLmxlbmd0aDowLGUmYyl7dmFyIGI9YSx3PWg7YT1oPW99dmFyIF89bT9vOnNpKHQpLEU9W3QsZSxuLGEsaCxiLHcscCxnLHldO2lmKF8mJmZ1bmN0aW9uKHQsZSl7dmFyIG49dFsxXSxyPWVbMV0sbz1ufHIsaT1vPDEzMSxhPXI9PWYmJjg9PW58fHI9PWYmJm49PWQmJnRbN10ubGVuZ3RoPD1lWzhdfHwzODQ9PXImJmVbN10ubGVuZ3RoPD1lWzhdJiY4PT1uO2lmKCFpJiYhYSlyZXR1cm4gdDsxJnImJih0WzJdPWVbMl0sb3w9MSZuPzA6NCk7dmFyIHU9ZVszXTtpZih1KXt2YXIgbD10WzNdO3RbM109bD9DbyhsLHUsZVs0XSk6dSx0WzRdPWw/Zm4odFszXSxzKTplWzRdfSh1PWVbNV0pJiYobD10WzVdLHRbNV09bD9CbyhsLHUsZVs2XSk6dSx0WzZdPWw/Zm4odFs1XSxzKTplWzZdKTsodT1lWzddKSYmKHRbN109dSk7ciZmJiYodFs4XT1udWxsPT10WzhdP2VbOF06d24odFs4XSxlWzhdKSk7bnVsbD09dFs5XSYmKHRbOV09ZVs5XSk7dFswXT1lWzBdLHRbMV09b30oRSxfKSx0PUVbMF0sZT1FWzFdLG49RVsyXSxhPUVbM10saD1FWzRdLCEoeT1FWzldPUVbOV09PT1vP20/MDp0Lmxlbmd0aDpibihFWzldLXYsMCkpJiYyNCZlJiYoZSY9LTI1KSxlJiYxIT1lKVM9OD09ZXx8ZT09dT9mdW5jdGlvbih0LGUsbil7dmFyIGk9V28odCk7cmV0dXJuIGZ1bmN0aW9uIGEoKXtmb3IodmFyIHM9YXJndW1lbnRzLmxlbmd0aCx1PXIocyksbD1zLGM9bGkoYSk7bC0tOyl1W2xdPWFyZ3VtZW50c1tsXTt2YXIgZj1zPDMmJnVbMF0hPT1jJiZ1W3MtMV0hPT1jP1tdOmZuKHUsYyk7cmV0dXJuKHMtPWYubGVuZ3RoKTxuP1lvKHQsZSxGbyxhLnBsYWNlaG9sZGVyLG8sdSxmLG8sbyxuLXMpOlJlKHRoaXMmJnRoaXMhPT1nZSYmdGhpcyBpbnN0YW5jZW9mIGE/aTp0LHRoaXMsdSl9fSh0LGUseSk6ZSE9bCYmMzMhPWV8fGgubGVuZ3RoP0ZvLmFwcGx5KG8sRSk6ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGk9MSZlLGE9V28odCk7cmV0dXJuIGZ1bmN0aW9uIGUoKXtmb3IodmFyIHM9LTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9LTEsYz1vLmxlbmd0aCxmPXIoYyt1KSxkPXRoaXMmJnRoaXMhPT1nZSYmdGhpcyBpbnN0YW5jZW9mIGU/YTp0OysrbDxjOylmW2xdPW9bbF07Zm9yKDt1LS07KWZbbCsrXT1hcmd1bWVudHNbKytzXTtyZXR1cm4gUmUoZCxpP246dGhpcyxmKX19KHQsZSxuLGEpO2Vsc2UgdmFyIFM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPTEmZSxvPVdvKHQpO3JldHVybiBmdW5jdGlvbiBlKCl7cmV0dXJuKHRoaXMmJnRoaXMhPT1nZSYmdGhpcyBpbnN0YW5jZW9mIGU/bzp0KS5hcHBseShyP246dGhpcyxhcmd1bWVudHMpfX0odCxlLG4pO3JldHVybiBVaSgoXz9lbzpraSkoUyxFKSx0LGUpfWZ1bmN0aW9uIHRpKHQsZSxuLHIpe3JldHVybiB0PT09b3x8RGEodCxPdFtuXSkmJiFOdC5jYWxsKHIsbik/ZTp0fWZ1bmN0aW9uIGVpKHQsZSxuLHIsaSxhKXtyZXR1cm4gZXModCkmJmVzKGUpJiYoYS5zZXQoZSx0KSx6cih0LGUsbyxlaSxhKSxhLmRlbGV0ZShlKSksdH1mdW5jdGlvbiBuaSh0KXtyZXR1cm4gaXModCk/bzp0fWZ1bmN0aW9uIHJpKHQsZSxuLHIsaSxhKXt2YXIgcz0xJm4sdT10Lmxlbmd0aCxsPWUubGVuZ3RoO2lmKHUhPWwmJiEocyYmbD51KSlyZXR1cm4hMTt2YXIgYz1hLmdldCh0KSxmPWEuZ2V0KGUpO2lmKGMmJmYpcmV0dXJuIGM9PWUmJmY9PXQ7dmFyIGQ9LTEsaD0hMCxwPTImbj9uZXcgWW46bztmb3IoYS5zZXQodCxlKSxhLnNldChlLHQpOysrZDx1Oyl7dmFyIGc9dFtkXSx5PWVbZF07aWYocil2YXIgbT1zP3IoeSxnLGQsZSx0LGEpOnIoZyx5LGQsdCxlLGEpO2lmKG0hPT1vKXtpZihtKWNvbnRpbnVlO2g9ITE7YnJlYWt9aWYocCl7aWYoIVdlKGUsKGZ1bmN0aW9uKHQsZSl7aWYoIWVuKHAsZSkmJihnPT09dHx8aShnLHQsbixyLGEpKSlyZXR1cm4gcC5wdXNoKGUpfSkpKXtoPSExO2JyZWFrfX1lbHNlIGlmKGchPT15JiYhaShnLHksbixyLGEpKXtoPSExO2JyZWFrfX1yZXR1cm4gYS5kZWxldGUodCksYS5kZWxldGUoZSksaH1mdW5jdGlvbiBvaSh0KXtyZXR1cm4gT2koeGkodCxvLFZpKSx0K1wiXCIpfWZ1bmN0aW9uIGlpKHQpe3JldHVybiBJcih0LExzLHBpKX1mdW5jdGlvbiBhaSh0KXtyZXR1cm4gSXIodCxPcyxnaSl9dmFyIHNpPWtuP2Z1bmN0aW9uKHQpe3JldHVybiBrbi5nZXQodCl9Omx1O2Z1bmN0aW9uIHVpKHQpe2Zvcih2YXIgZT10Lm5hbWUrXCJcIixuPUxuW2VdLHI9TnQuY2FsbChMbixlKT9uLmxlbmd0aDowO3ItLTspe3ZhciBvPW5bcl0saT1vLmZ1bmM7aWYobnVsbD09aXx8aT09dClyZXR1cm4gby5uYW1lfXJldHVybiBlfWZ1bmN0aW9uIGxpKHQpe3JldHVybihOdC5jYWxsKERuLFwicGxhY2Vob2xkZXJcIik/RG46dCkucGxhY2Vob2xkZXJ9ZnVuY3Rpb24gY2koKXt2YXIgdD1Ebi5pdGVyYXRlZXx8aXU7cmV0dXJuIHQ9dD09PWl1P05yOnQsYXJndW1lbnRzLmxlbmd0aD90KGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pOnR9ZnVuY3Rpb24gZmkodCxlKXt2YXIgbixyLG89dC5fX2RhdGFfXztyZXR1cm4oXCJzdHJpbmdcIj09KHI9dHlwZW9mKG49ZSkpfHxcIm51bWJlclwiPT1yfHxcInN5bWJvbFwiPT1yfHxcImJvb2xlYW5cIj09cj9cIl9fcHJvdG9fX1wiIT09bjpudWxsPT09bik/b1tcInN0cmluZ1wiPT10eXBlb2YgZT9cInN0cmluZ1wiOlwiaGFzaFwiXTpvLm1hcH1mdW5jdGlvbiBkaSh0KXtmb3IodmFyIGU9THModCksbj1lLmxlbmd0aDtuLS07KXt2YXIgcj1lW25dLG89dFtyXTtlW25dPVtyLG8sVGkobyldfXJldHVybiBlfWZ1bmN0aW9uIGhpKHQsZSl7dmFyIG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD9vOnRbZV19KHQsZSk7cmV0dXJuIGpyKG4pP246b312YXIgcGk9bWU/ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106KHQ9UnQodCksTGUobWUodCksKGZ1bmN0aW9uKGUpe3JldHVybiBZdC5jYWxsKHQsZSl9KSkpfTp5dSxnaT1tZT9mdW5jdGlvbih0KXtmb3IodmFyIGU9W107dDspTmUoZSxwaSh0KSksdD1HdCh0KTtyZXR1cm4gZX06eXUseWk9VHI7ZnVuY3Rpb24gbWkodCxlLG4pe2Zvcih2YXIgcj0tMSxvPShlPV9vKGUsdCkpLmxlbmd0aCxpPSExOysrcjxvOyl7dmFyIGE9UGkoZVtyXSk7aWYoIShpPW51bGwhPXQmJm4odCxhKSkpYnJlYWs7dD10W2FdfXJldHVybiBpfHwrK3IhPW8/aTohIShvPW51bGw9PXQ/MDp0Lmxlbmd0aCkmJnRzKG8pJiZ3aShhLG8pJiYoSGEodCl8fHFhKHQpKX1mdW5jdGlvbiB2aSh0KXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmNvbnN0cnVjdG9yfHxJaSh0KT97fTpGbihHdCh0KSl9ZnVuY3Rpb24gYmkodCl7cmV0dXJuIEhhKHQpfHxxYSh0KXx8ISEoWHQmJnQmJnRbWHRdKX1mdW5jdGlvbiB3aSh0LGUpe3ZhciBuPXR5cGVvZiB0O3JldHVybiEhKGU9bnVsbD09ZT9wOmUpJiYoXCJudW1iZXJcIj09bnx8XCJzeW1ib2xcIiE9biYmd3QudGVzdCh0KSkmJnQ+LTEmJnQlMT09MCYmdDxlfWZ1bmN0aW9uIF9pKHQsZSxuKXtpZighZXMobikpcmV0dXJuITE7dmFyIHI9dHlwZW9mIGU7cmV0dXJuISEoXCJudW1iZXJcIj09cj9HYShuKSYmd2koZSxuLmxlbmd0aCk6XCJzdHJpbmdcIj09ciYmZSBpbiBuKSYmRGEobltlXSx0KX1mdW5jdGlvbiBFaSh0LGUpe2lmKEhhKHQpKXJldHVybiExO3ZhciBuPXR5cGVvZiB0O3JldHVybiEoXCJudW1iZXJcIiE9biYmXCJzeW1ib2xcIiE9biYmXCJib29sZWFuXCIhPW4mJm51bGwhPXQmJiFscyh0KSl8fChudC50ZXN0KHQpfHwhZXQudGVzdCh0KXx8bnVsbCE9ZSYmdCBpbiBSdChlKSl9ZnVuY3Rpb24gU2kodCl7dmFyIGU9dWkodCksbj1EbltlXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBufHwhKGUgaW4gSG4ucHJvdG90eXBlKSlyZXR1cm4hMTtpZih0PT09bilyZXR1cm4hMDt2YXIgcj1zaShuKTtyZXR1cm4hIXImJnQ9PT1yWzBdfShJbiYmeWkobmV3IEluKG5ldyBBcnJheUJ1ZmZlcigxKSkpIT1qfHxUbiYmeWkobmV3IFRuKSE9SXx8Um4mJnlpKFJuLnJlc29sdmUoKSkhPXh8fHhuJiZ5aShuZXcgeG4pIT1CfHxDbiYmeWkobmV3IENuKSE9TykmJih5aT1mdW5jdGlvbih0KXt2YXIgZT1Ucih0KSxuPWU9PVI/dC5jb25zdHJ1Y3RvcjpvLHI9bj9XaShuKTpcIlwiO2lmKHIpc3dpdGNoKHIpe2Nhc2UgT246cmV0dXJuIGo7Y2FzZSBVbjpyZXR1cm4gSTtjYXNlIGpuOnJldHVybiB4O2Nhc2UgTm46cmV0dXJuIEI7Y2FzZSBNbjpyZXR1cm4gT31yZXR1cm4gZX0pO3ZhciBBaT1VdD9aYTptdTtmdW5jdGlvbiBJaSh0KXt2YXIgZT10JiZ0LmNvbnN0cnVjdG9yO3JldHVybiB0PT09KFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUucHJvdG90eXBlfHxPdCl9ZnVuY3Rpb24gVGkodCl7cmV0dXJuIHQ9PXQmJiFlcyh0KX1mdW5jdGlvbiBSaSh0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbnVsbCE9biYmKG5bdF09PT1lJiYoZSE9PW98fHQgaW4gUnQobikpKX19ZnVuY3Rpb24geGkodCxlLG4pe3JldHVybiBlPWJuKGU9PT1vP3QubGVuZ3RoLTE6ZSwwKSxmdW5jdGlvbigpe2Zvcih2YXIgbz1hcmd1bWVudHMsaT0tMSxhPWJuKG8ubGVuZ3RoLWUsMCkscz1yKGEpOysraTxhOylzW2ldPW9bZStpXTtpPS0xO2Zvcih2YXIgdT1yKGUrMSk7KytpPGU7KXVbaV09b1tpXTtyZXR1cm4gdVtlXT1uKHMpLFJlKHQsdGhpcyx1KX19ZnVuY3Rpb24gQ2kodCxlKXtyZXR1cm4gZS5sZW5ndGg8Mj90OkFyKHQsb28oZSwwLC0xKSl9ZnVuY3Rpb24gQmkodCxlKXtpZigoXCJjb25zdHJ1Y3RvclwiIT09ZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdFtlXSkmJlwiX19wcm90b19fXCIhPWUpcmV0dXJuIHRbZV19dmFyIGtpPWppKGVvKSxMaT1oZXx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gZ2Uuc2V0VGltZW91dCh0LGUpfSxPaT1qaShubyk7ZnVuY3Rpb24gVWkodCxlLG4pe3ZhciByPWUrXCJcIjtyZXR1cm4gT2kodCxmdW5jdGlvbih0LGUpe3ZhciBuPWUubGVuZ3RoO2lmKCFuKXJldHVybiB0O3ZhciByPW4tMTtyZXR1cm4gZVtyXT0obj4xP1wiJiBcIjpcIlwiKStlW3JdLGU9ZS5qb2luKG4+Mj9cIiwgXCI6XCIgXCIpLHQucmVwbGFjZSh1dCxcIntcXG4vKiBbd3JhcHBlZCB3aXRoIFwiK2UrXCJdICovXFxuXCIpfShyLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIENlKG0sKGZ1bmN0aW9uKG4pe3ZhciByPVwiXy5cIituWzBdO2UmblsxXSYmIU9lKHQscikmJnQucHVzaChyKX0pKSx0LnNvcnQoKX0oZnVuY3Rpb24odCl7dmFyIGU9dC5tYXRjaChsdCk7cmV0dXJuIGU/ZVsxXS5zcGxpdChjdCk6W119KHIpLG4pKSl9ZnVuY3Rpb24gamkodCl7dmFyIGU9MCxuPTA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9X24oKSxpPTE2LShyLW4pO2lmKG49cixpPjApe2lmKCsrZT49ODAwKXJldHVybiBhcmd1bWVudHNbMF19ZWxzZSBlPTA7cmV0dXJuIHQuYXBwbHkobyxhcmd1bWVudHMpfX1mdW5jdGlvbiBOaSh0LGUpe3ZhciBuPS0xLHI9dC5sZW5ndGgsaT1yLTE7Zm9yKGU9ZT09PW8/cjplOysrbjxlOyl7dmFyIGE9WXIobixpKSxzPXRbYV07dFthXT10W25dLHRbbl09c31yZXR1cm4gdC5sZW5ndGg9ZSx0fXZhciBNaT1mdW5jdGlvbih0KXt2YXIgZT1qYSh0LChmdW5jdGlvbih0KXtyZXR1cm4gNTAwPT09bi5zaXplJiZuLmNsZWFyKCksdH0pKSxuPWUuY2FjaGU7cmV0dXJuIGV9KChmdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gNDY9PT10LmNoYXJDb2RlQXQoMCkmJmUucHVzaChcIlwiKSx0LnJlcGxhY2UocnQsKGZ1bmN0aW9uKHQsbixyLG8pe2UucHVzaChyP28ucmVwbGFjZShodCxcIiQxXCIpOm58fHQpfSkpLGV9KSk7ZnVuY3Rpb24gUGkodCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fGxzKHQpKXJldHVybiB0O3ZhciBlPXQrXCJcIjtyZXR1cm5cIjBcIj09ZSYmMS90PT0tMS8wP1wiLTBcIjplfWZ1bmN0aW9uIFdpKHQpe2lmKG51bGwhPXQpe3RyeXtyZXR1cm4ganQuY2FsbCh0KX1jYXRjaCh0KXt9dHJ5e3JldHVybiB0K1wiXCJ9Y2F0Y2godCl7fX1yZXR1cm5cIlwifWZ1bmN0aW9uICRpKHQpe2lmKHQgaW5zdGFuY2VvZiBIbilyZXR1cm4gdC5jbG9uZSgpO3ZhciBlPW5ldyBxbih0Ll9fd3JhcHBlZF9fLHQuX19jaGFpbl9fKTtyZXR1cm4gZS5fX2FjdGlvbnNfXz1rbyh0Ll9fYWN0aW9uc19fKSxlLl9faW5kZXhfXz10Ll9faW5kZXhfXyxlLl9fdmFsdWVzX189dC5fX3ZhbHVlc19fLGV9dmFyIERpPVhyKChmdW5jdGlvbih0LGUpe3JldHVybiBKYSh0KT9kcih0LHZyKGUsMSxKYSwhMCkpOltdfSkpLEZpPVhyKChmdW5jdGlvbih0LGUpe3ZhciBuPVhpKGUpO3JldHVybiBKYShuKSYmKG49byksSmEodCk/ZHIodCx2cihlLDEsSmEsITApLGNpKG4sMikpOltdfSkpLHppPVhyKChmdW5jdGlvbih0LGUpe3ZhciBuPVhpKGUpO3JldHVybiBKYShuKSYmKG49byksSmEodCk/ZHIodCx2cihlLDEsSmEsITApLG8sbik6W119KSk7ZnVuY3Rpb24gcWkodCxlLG4pe3ZhciByPW51bGw9PXQ/MDp0Lmxlbmd0aDtpZighcilyZXR1cm4tMTt2YXIgbz1udWxsPT1uPzA6Z3Mobik7cmV0dXJuIG88MCYmKG89Ym4ocitvLDApKSxGZSh0LGNpKGUsMyksbyl9ZnVuY3Rpb24gSGkodCxlLG4pe3ZhciByPW51bGw9PXQ/MDp0Lmxlbmd0aDtpZighcilyZXR1cm4tMTt2YXIgaT1yLTE7cmV0dXJuIG4hPT1vJiYoaT1ncyhuKSxpPW48MD9ibihyK2ksMCk6d24oaSxyLTEpKSxGZSh0LGNpKGUsMyksaSwhMCl9ZnVuY3Rpb24gVmkodCl7cmV0dXJuKG51bGw9PXQ/MDp0Lmxlbmd0aCk/dnIodCwxKTpbXX1mdW5jdGlvbiBHaSh0KXtyZXR1cm4gdCYmdC5sZW5ndGg/dFswXTpvfXZhciBKaT1YcigoZnVuY3Rpb24odCl7dmFyIGU9amUodCxibyk7cmV0dXJuIGUubGVuZ3RoJiZlWzBdPT09dFswXT9CcihlKTpbXX0pKSxZaT1YcigoZnVuY3Rpb24odCl7dmFyIGU9WGkodCksbj1qZSh0LGJvKTtyZXR1cm4gZT09PVhpKG4pP2U9bzpuLnBvcCgpLG4ubGVuZ3RoJiZuWzBdPT09dFswXT9CcihuLGNpKGUsMikpOltdfSkpLEtpPVhyKChmdW5jdGlvbih0KXt2YXIgZT1YaSh0KSxuPWplKHQsYm8pO3JldHVybihlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpvKSYmbi5wb3AoKSxuLmxlbmd0aCYmblswXT09PXRbMF0/QnIobixvLGUpOltdfSkpO2Z1bmN0aW9uIFhpKHQpe3ZhciBlPW51bGw9PXQ/MDp0Lmxlbmd0aDtyZXR1cm4gZT90W2UtMV06b312YXIgWmk9WHIoUWkpO2Z1bmN0aW9uIFFpKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoJiZlJiZlLmxlbmd0aD9Hcih0LGUpOnR9dmFyIHRhPW9pKChmdW5jdGlvbih0LGUpe3ZhciBuPW51bGw9PXQ/MDp0Lmxlbmd0aCxyPXNyKHQsZSk7cmV0dXJuIEpyKHQsamUoZSwoZnVuY3Rpb24odCl7cmV0dXJuIHdpKHQsbik/K3Q6dH0pKS5zb3J0KHhvKSkscn0pKTtmdW5jdGlvbiBlYSh0KXtyZXR1cm4gbnVsbD09dD90OkFuLmNhbGwodCl9dmFyIG5hPVhyKChmdW5jdGlvbih0KXtyZXR1cm4gZm8odnIodCwxLEphLCEwKSl9KSkscmE9WHIoKGZ1bmN0aW9uKHQpe3ZhciBlPVhpKHQpO3JldHVybiBKYShlKSYmKGU9byksZm8odnIodCwxLEphLCEwKSxjaShlLDIpKX0pKSxvYT1YcigoZnVuY3Rpb24odCl7dmFyIGU9WGkodCk7cmV0dXJuIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8sZm8odnIodCwxLEphLCEwKSxvLGUpfSkpO2Z1bmN0aW9uIGlhKHQpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuW107dmFyIGU9MDtyZXR1cm4gdD1MZSh0LChmdW5jdGlvbih0KXtpZihKYSh0KSlyZXR1cm4gZT1ibih0Lmxlbmd0aCxlKSwhMH0pKSxYZShlLChmdW5jdGlvbihlKXtyZXR1cm4gamUodCxHZShlKSl9KSl9ZnVuY3Rpb24gYWEodCxlKXtpZighdHx8IXQubGVuZ3RoKXJldHVybltdO3ZhciBuPWlhKHQpO3JldHVybiBudWxsPT1lP246amUobiwoZnVuY3Rpb24odCl7cmV0dXJuIFJlKGUsbyx0KX0pKX12YXIgc2E9WHIoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEphKHQpP2RyKHQsZSk6W119KSksdWE9WHIoKGZ1bmN0aW9uKHQpe3JldHVybiBtbyhMZSh0LEphKSl9KSksbGE9WHIoKGZ1bmN0aW9uKHQpe3ZhciBlPVhpKHQpO3JldHVybiBKYShlKSYmKGU9byksbW8oTGUodCxKYSksY2koZSwyKSl9KSksY2E9WHIoKGZ1bmN0aW9uKHQpe3ZhciBlPVhpKHQpO3JldHVybiBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpvLG1vKExlKHQsSmEpLG8sZSl9KSksZmE9WHIoaWEpO3ZhciBkYT1YcigoZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsbj1lPjE/dFtlLTFdOm87cmV0dXJuIG49XCJmdW5jdGlvblwiPT10eXBlb2Ygbj8odC5wb3AoKSxuKTpvLGFhKHQsbil9KSk7ZnVuY3Rpb24gaGEodCl7dmFyIGU9RG4odCk7cmV0dXJuIGUuX19jaGFpbl9fPSEwLGV9ZnVuY3Rpb24gcGEodCxlKXtyZXR1cm4gZSh0KX12YXIgZ2E9b2koKGZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLG49ZT90WzBdOjAscj10aGlzLl9fd3JhcHBlZF9fLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIHNyKGUsdCl9O3JldHVybiEoZT4xfHx0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCkmJnIgaW5zdGFuY2VvZiBIbiYmd2kobik/KChyPXIuc2xpY2UobiwrbisoZT8xOjApKSkuX19hY3Rpb25zX18ucHVzaCh7ZnVuYzpwYSxhcmdzOltpXSx0aGlzQXJnOm99KSxuZXcgcW4ocix0aGlzLl9fY2hhaW5fXykudGhydSgoZnVuY3Rpb24odCl7cmV0dXJuIGUmJiF0Lmxlbmd0aCYmdC5wdXNoKG8pLHR9KSkpOnRoaXMudGhydShpKX0pKTt2YXIgeWE9T28oKGZ1bmN0aW9uKHQsZSxuKXtOdC5jYWxsKHQsbik/Kyt0W25dOmFyKHQsbiwxKX0pKTt2YXIgbWE9JG8ocWkpLHZhPSRvKEhpKTtmdW5jdGlvbiBiYSh0LGUpe3JldHVybihIYSh0KT9DZTpocikodCxjaShlLDMpKX1mdW5jdGlvbiB3YSh0LGUpe3JldHVybihIYSh0KT9CZTpwcikodCxjaShlLDMpKX12YXIgX2E9T28oKGZ1bmN0aW9uKHQsZSxuKXtOdC5jYWxsKHQsbik/dFtuXS5wdXNoKGUpOmFyKHQsbixbZV0pfSkpO3ZhciBFYT1YcigoZnVuY3Rpb24odCxlLG4pe3ZhciBvPS0xLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgZSxhPUdhKHQpP3IodC5sZW5ndGgpOltdO3JldHVybiBocih0LChmdW5jdGlvbih0KXthWysrb109aT9SZShlLHQsbik6a3IodCxlLG4pfSkpLGF9KSksU2E9T28oKGZ1bmN0aW9uKHQsZSxuKXthcih0LG4sZSl9KSk7ZnVuY3Rpb24gQWEodCxlKXtyZXR1cm4oSGEodCk/amU6JHIpKHQsY2koZSwzKSl9dmFyIElhPU9vKChmdW5jdGlvbih0LGUsbil7dFtuPzA6MV0ucHVzaChlKX0pLChmdW5jdGlvbigpe3JldHVybltbXSxbXV19KSk7dmFyIFRhPVhyKChmdW5jdGlvbih0LGUpe2lmKG51bGw9PXQpcmV0dXJuW107dmFyIG49ZS5sZW5ndGg7cmV0dXJuIG4+MSYmX2kodCxlWzBdLGVbMV0pP2U9W106bj4yJiZfaShlWzBdLGVbMV0sZVsyXSkmJihlPVtlWzBdXSksSHIodCx2cihlLDEpLFtdKX0pKSxSYT1jZXx8ZnVuY3Rpb24oKXtyZXR1cm4gZ2UuRGF0ZS5ub3coKX07ZnVuY3Rpb24geGEodCxlLG4pe3JldHVybiBlPW4/bzplLGU9dCYmbnVsbD09ZT90Lmxlbmd0aDplLFFvKHQsZixvLG8sbyxvLGUpfWZ1bmN0aW9uIENhKHQsZSl7dmFyIG47aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuIHQ9Z3ModCksZnVuY3Rpb24oKXtyZXR1cm4tLXQ+MCYmKG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHQ8PTEmJihlPW8pLG59fXZhciBCYT1YcigoZnVuY3Rpb24odCxlLG4pe3ZhciByPTE7aWYobi5sZW5ndGgpe3ZhciBvPWZuKG4sbGkoQmEpKTtyfD1sfXJldHVybiBRbyh0LHIsZSxuLG8pfSkpLGthPVhyKChmdW5jdGlvbih0LGUsbil7dmFyIHI9MztpZihuLmxlbmd0aCl7dmFyIG89Zm4obixsaShrYSkpO3J8PWx9cmV0dXJuIFFvKGUscix0LG4sbyl9KSk7ZnVuY3Rpb24gTGEodCxlLG4pe3ZhciByLGEscyx1LGwsYyxmPTAsZD0hMSxoPSExLHA9ITA7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgQnQoaSk7ZnVuY3Rpb24gZyhlKXt2YXIgbj1yLGk9YTtyZXR1cm4gcj1hPW8sZj1lLHU9dC5hcHBseShpLG4pfWZ1bmN0aW9uIHkodCl7dmFyIG49dC1jO3JldHVybiBjPT09b3x8bj49ZXx8bjwwfHxoJiZ0LWY+PXN9ZnVuY3Rpb24gbSgpe3ZhciB0PVJhKCk7aWYoeSh0KSlyZXR1cm4gdih0KTtsPUxpKG0sZnVuY3Rpb24odCl7dmFyIG49ZS0odC1jKTtyZXR1cm4gaD93bihuLHMtKHQtZikpOm59KHQpKX1mdW5jdGlvbiB2KHQpe3JldHVybiBsPW8scCYmcj9nKHQpOihyPWE9byx1KX1mdW5jdGlvbiBiKCl7dmFyIHQ9UmEoKSxuPXkodCk7aWYocj1hcmd1bWVudHMsYT10aGlzLGM9dCxuKXtpZihsPT09bylyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGY9dCxsPUxpKG0sZSksZD9nKHQpOnV9KGMpO2lmKGgpcmV0dXJuIEFvKGwpLGw9TGkobSxlKSxnKGMpfXJldHVybiBsPT09byYmKGw9TGkobSxlKSksdX1yZXR1cm4gZT1tcyhlKXx8MCxlcyhuKSYmKGQ9ISFuLmxlYWRpbmcscz0oaD1cIm1heFdhaXRcImluIG4pP2JuKG1zKG4ubWF4V2FpdCl8fDAsZSk6cyxwPVwidHJhaWxpbmdcImluIG4/ISFuLnRyYWlsaW5nOnApLGIuY2FuY2VsPWZ1bmN0aW9uKCl7bCE9PW8mJkFvKGwpLGY9MCxyPWM9YT1sPW99LGIuZmx1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gbD09PW8/dTp2KFJhKCkpfSxifXZhciBPYT1YcigoZnVuY3Rpb24odCxlKXtyZXR1cm4gZnIodCwxLGUpfSkpLFVhPVhyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIGZyKHQsbXMoZSl8fDAsbil9KSk7ZnVuY3Rpb24gamEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHxudWxsIT1lJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBCdChpKTt2YXIgbj1mdW5jdGlvbigpe3ZhciByPWFyZ3VtZW50cyxvPWU/ZS5hcHBseSh0aGlzLHIpOnJbMF0saT1uLmNhY2hlO2lmKGkuaGFzKG8pKXJldHVybiBpLmdldChvKTt2YXIgYT10LmFwcGx5KHRoaXMscik7cmV0dXJuIG4uY2FjaGU9aS5zZXQobyxhKXx8aSxhfTtyZXR1cm4gbi5jYWNoZT1uZXcoamEuQ2FjaGV8fEpuKSxufWZ1bmN0aW9uIE5hKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEJ0KGkpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4hdC5jYWxsKHRoaXMpO2Nhc2UgMTpyZXR1cm4hdC5jYWxsKHRoaXMsZVswXSk7Y2FzZSAyOnJldHVybiF0LmNhbGwodGhpcyxlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4hdC5jYWxsKHRoaXMsZVswXSxlWzFdLGVbMl0pfXJldHVybiF0LmFwcGx5KHRoaXMsZSl9fWphLkNhY2hlPUpuO3ZhciBNYT1FbygoZnVuY3Rpb24odCxlKXt2YXIgbj0oZT0xPT1lLmxlbmd0aCYmSGEoZVswXSk/amUoZVswXSxRZShjaSgpKSk6amUodnIoZSwxKSxRZShjaSgpKSkpLmxlbmd0aDtyZXR1cm4gWHIoKGZ1bmN0aW9uKHIpe2Zvcih2YXIgbz0tMSxpPXduKHIubGVuZ3RoLG4pOysrbzxpOylyW29dPWVbb10uY2FsbCh0aGlzLHJbb10pO3JldHVybiBSZSh0LHRoaXMscil9KSl9KSksUGE9WHIoKGZ1bmN0aW9uKHQsZSl7dmFyIG49Zm4oZSxsaShQYSkpO3JldHVybiBRbyh0LGwsbyxlLG4pfSkpLFdhPVhyKChmdW5jdGlvbih0LGUpe3ZhciBuPWZuKGUsbGkoV2EpKTtyZXR1cm4gUW8odCxjLG8sZSxuKX0pKSwkYT1vaSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gUW8odCxkLG8sbyxvLGUpfSkpO2Z1bmN0aW9uIERhKHQsZSl7cmV0dXJuIHQ9PT1lfHx0IT10JiZlIT1lfXZhciBGYT1KbyhSciksemE9Sm8oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+PWV9KSkscWE9THIoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKT9McjpmdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJk50LmNhbGwodCxcImNhbGxlZVwiKSYmIVl0LmNhbGwodCxcImNhbGxlZVwiKX0sSGE9ci5pc0FycmF5LFZhPV9lP1FlKF9lKTpmdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJlRyKHQpPT1VfTtmdW5jdGlvbiBHYSh0KXtyZXR1cm4gbnVsbCE9dCYmdHModC5sZW5ndGgpJiYhWmEodCl9ZnVuY3Rpb24gSmEodCl7cmV0dXJuIG5zKHQpJiZHYSh0KX12YXIgWWE9YmV8fG11LEthPUVlP1FlKEVlKTpmdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJlRyKHQpPT1ffTtmdW5jdGlvbiBYYSh0KXtpZighbnModCkpcmV0dXJuITE7dmFyIGU9VHIodCk7cmV0dXJuIGU9PUV8fFwiW29iamVjdCBET01FeGNlcHRpb25dXCI9PWV8fFwic3RyaW5nXCI9PXR5cGVvZiB0Lm1lc3NhZ2UmJlwic3RyaW5nXCI9PXR5cGVvZiB0Lm5hbWUmJiFpcyh0KX1mdW5jdGlvbiBaYSh0KXtpZighZXModCkpcmV0dXJuITE7dmFyIGU9VHIodCk7cmV0dXJuIGU9PVN8fGU9PUF8fFwiW29iamVjdCBBc3luY0Z1bmN0aW9uXVwiPT1lfHxcIltvYmplY3QgUHJveHldXCI9PWV9ZnVuY3Rpb24gUWEodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ9PWdzKHQpfWZ1bmN0aW9uIHRzKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJnQ8PXB9ZnVuY3Rpb24gZXModCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfWZ1bmN0aW9uIG5zKHQpe3JldHVybiBudWxsIT10JiZcIm9iamVjdFwiPT10eXBlb2YgdH12YXIgcnM9U2U/UWUoU2UpOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmeWkodCk9PUl9O2Z1bmN0aW9uIG9zKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fHxucyh0KSYmVHIodCk9PVR9ZnVuY3Rpb24gaXModCl7aWYoIW5zKHQpfHxUcih0KSE9UilyZXR1cm4hMTt2YXIgZT1HdCh0KTtpZihudWxsPT09ZSlyZXR1cm4hMDt2YXIgbj1OdC5jYWxsKGUsXCJjb25zdHJ1Y3RvclwiKSYmZS5jb25zdHJ1Y3RvcjtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuIGluc3RhbmNlb2YgbiYmanQuY2FsbChuKT09JHR9dmFyIGFzPUFlP1FlKEFlKTpmdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJlRyKHQpPT1DfTt2YXIgc3M9SWU/UWUoSWUpOmZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmeWkodCk9PUJ9O2Z1bmN0aW9uIHVzKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0fHwhSGEodCkmJm5zKHQpJiZUcih0KT09a31mdW5jdGlvbiBscyh0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdHx8bnModCkmJlRyKHQpPT1MfXZhciBjcz1UZT9RZShUZSk6ZnVuY3Rpb24odCl7cmV0dXJuIG5zKHQpJiZ0cyh0Lmxlbmd0aCkmJiEhdWVbVHIodCldfTt2YXIgZnM9Sm8oV3IpLGRzPUpvKChmdW5jdGlvbih0LGUpe3JldHVybiB0PD1lfSkpO2Z1bmN0aW9uIGhzKHQpe2lmKCF0KXJldHVybltdO2lmKEdhKHQpKXJldHVybiB1cyh0KT9nbih0KTprbyh0KTtpZihadCYmdFtadF0pcmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPVtdOyEoZT10Lm5leHQoKSkuZG9uZTspbi5wdXNoKGUudmFsdWUpO3JldHVybiBufSh0W1p0XSgpKTt2YXIgZT15aSh0KTtyZXR1cm4oZT09ST9sbjplPT1CP2RuOkRzKSh0KX1mdW5jdGlvbiBwcyh0KXtyZXR1cm4gdD8odD1tcyh0KSk9PT1ofHx0PT09LTEvMD8xNzk3NjkzMTM0ODYyMzE1N2UyOTIqKHQ8MD8tMToxKTp0PT10P3Q6MDowPT09dD90OjB9ZnVuY3Rpb24gZ3ModCl7dmFyIGU9cHModCksbj1lJTE7cmV0dXJuIGU9PWU/bj9lLW46ZTowfWZ1bmN0aW9uIHlzKHQpe3JldHVybiB0P3VyKGdzKHQpLDAseSk6MH1mdW5jdGlvbiBtcyh0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gdDtpZihscyh0KSlyZXR1cm4gZztpZihlcyh0KSl7dmFyIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdC52YWx1ZU9mP3QudmFsdWVPZigpOnQ7dD1lcyhlKT9lK1wiXCI6ZX1pZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PVplKHQpO3ZhciBuPW10LnRlc3QodCk7cmV0dXJuIG58fGJ0LnRlc3QodCk/ZGUodC5zbGljZSgyKSxuPzI6OCk6eXQudGVzdCh0KT9nOit0fWZ1bmN0aW9uIHZzKHQpe3JldHVybiBMbyh0LE9zKHQpKX1mdW5jdGlvbiBicyh0KXtyZXR1cm4gbnVsbD09dD9cIlwiOmNvKHQpfXZhciB3cz1VbygoZnVuY3Rpb24odCxlKXtpZihJaShlKXx8R2EoZSkpTG8oZSxMcyhlKSx0KTtlbHNlIGZvcih2YXIgbiBpbiBlKU50LmNhbGwoZSxuKSYmbnIodCxuLGVbbl0pfSkpLF9zPVVvKChmdW5jdGlvbih0LGUpe0xvKGUsT3MoZSksdCl9KSksRXM9VW8oKGZ1bmN0aW9uKHQsZSxuLHIpe0xvKGUsT3MoZSksdCxyKX0pKSxTcz1VbygoZnVuY3Rpb24odCxlLG4scil7TG8oZSxMcyhlKSx0LHIpfSkpLEFzPW9pKHNyKTt2YXIgSXM9WHIoKGZ1bmN0aW9uKHQsZSl7dD1SdCh0KTt2YXIgbj0tMSxyPWUubGVuZ3RoLGk9cj4yP2VbMl06bztmb3IoaSYmX2koZVswXSxlWzFdLGkpJiYocj0xKTsrK248cjspZm9yKHZhciBhPWVbbl0scz1PcyhhKSx1PS0xLGw9cy5sZW5ndGg7Kyt1PGw7KXt2YXIgYz1zW3VdLGY9dFtjXTsoZj09PW98fERhKGYsT3RbY10pJiYhTnQuY2FsbCh0LGMpKSYmKHRbY109YVtjXSl9cmV0dXJuIHR9KSksVHM9WHIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnB1c2gobyxlaSksUmUoanMsbyx0KX0pKTtmdW5jdGlvbiBScyh0LGUsbil7dmFyIHI9bnVsbD09dD9vOkFyKHQsZSk7cmV0dXJuIHI9PT1vP246cn1mdW5jdGlvbiB4cyh0LGUpe3JldHVybiBudWxsIT10JiZtaSh0LGUsQ3IpfXZhciBDcz16bygoZnVuY3Rpb24odCxlLG4pe251bGwhPWUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUudG9TdHJpbmcmJihlPVd0LmNhbGwoZSkpLHRbZV09bn0pLGV1KG91KSksQnM9em8oKGZ1bmN0aW9uKHQsZSxuKXtudWxsIT1lJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLnRvU3RyaW5nJiYoZT1XdC5jYWxsKGUpKSxOdC5jYWxsKHQsZSk/dFtlXS5wdXNoKG4pOnRbZV09W25dfSksY2kpLGtzPVhyKGtyKTtmdW5jdGlvbiBMcyh0KXtyZXR1cm4gR2EodCk/WG4odCk6TXIodCl9ZnVuY3Rpb24gT3ModCl7cmV0dXJuIEdhKHQpP1huKHQsITApOlByKHQpfXZhciBVcz1VbygoZnVuY3Rpb24odCxlLG4pe3pyKHQsZSxuKX0pKSxqcz1VbygoZnVuY3Rpb24odCxlLG4scil7enIodCxlLG4scil9KSksTnM9b2koKGZ1bmN0aW9uKHQsZSl7dmFyIG49e307aWYobnVsbD09dClyZXR1cm4gbjt2YXIgcj0hMTtlPWplKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBlPV9vKGUsdCkscnx8KHI9ZS5sZW5ndGg+MSksZX0pKSxMbyh0LGFpKHQpLG4pLHImJihuPWxyKG4sNyxuaSkpO2Zvcih2YXIgbz1lLmxlbmd0aDtvLS07KWhvKG4sZVtvXSk7cmV0dXJuIG59KSk7dmFyIE1zPW9pKChmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P3t9OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIFZyKHQsZSwoZnVuY3Rpb24oZSxuKXtyZXR1cm4geHModCxuKX0pKX0odCxlKX0pKTtmdW5jdGlvbiBQcyh0LGUpe2lmKG51bGw9PXQpcmV0dXJue307dmFyIG49amUoYWkodCksKGZ1bmN0aW9uKHQpe3JldHVyblt0XX0pKTtyZXR1cm4gZT1jaShlKSxWcih0LG4sKGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUodCxuWzBdKX0pKX12YXIgV3M9Wm8oTHMpLCRzPVpvKE9zKTtmdW5jdGlvbiBEcyh0KXtyZXR1cm4gbnVsbD09dD9bXTp0bih0LExzKHQpKX12YXIgRnM9UG8oKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKCksdCsobj96cyhlKTplKX0pKTtmdW5jdGlvbiB6cyh0KXtyZXR1cm4gWHMoYnModCkudG9Mb3dlckNhc2UoKSl9ZnVuY3Rpb24gcXModCl7cmV0dXJuKHQ9YnModCkpJiZ0LnJlcGxhY2UoX3Qsb24pLnJlcGxhY2UoZWUsXCJcIil9dmFyIEhzPVBvKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/XCItXCI6XCJcIikrZS50b0xvd2VyQ2FzZSgpfSkpLFZzPVBvKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/XCIgXCI6XCJcIikrZS50b0xvd2VyQ2FzZSgpfSkpLEdzPU1vKFwidG9Mb3dlckNhc2VcIik7dmFyIEpzPVBvKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/XCJfXCI6XCJcIikrZS50b0xvd2VyQ2FzZSgpfSkpO3ZhciBZcz1QbygoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuP1wiIFwiOlwiXCIpK1hzKGUpfSkpO3ZhciBLcz1QbygoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuP1wiIFwiOlwiXCIpK2UudG9VcHBlckNhc2UoKX0pKSxYcz1NbyhcInRvVXBwZXJDYXNlXCIpO2Z1bmN0aW9uIFpzKHQsZSxuKXtyZXR1cm4gdD1icyh0KSwoZT1uP286ZSk9PT1vP2Z1bmN0aW9uKHQpe3JldHVybiBpZS50ZXN0KHQpfSh0KT9mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXRjaChyZSl8fFtdfSh0KTpmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXRjaChmdCl8fFtdfSh0KTp0Lm1hdGNoKGUpfHxbXX12YXIgUXM9WHIoKGZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiBSZSh0LG8sZSl9Y2F0Y2godCl7cmV0dXJuIFhhKHQpP3Q6bmV3IEF0KHQpfX0pKSx0dT1vaSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gQ2UoZSwoZnVuY3Rpb24oZSl7ZT1QaShlKSxhcih0LGUsQmEodFtlXSx0KSl9KSksdH0pKTtmdW5jdGlvbiBldSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19dmFyIG51PURvKCkscnU9RG8oITApO2Z1bmN0aW9uIG91KHQpe3JldHVybiB0fWZ1bmN0aW9uIGl1KHQpe3JldHVybiBOcihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6bHIodCwxKSl9dmFyIGF1PVhyKChmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4ga3Iobix0LGUpfX0pKSxzdT1YcigoZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGtyKHQsbixlKX19KSk7ZnVuY3Rpb24gdXUodCxlLG4pe3ZhciByPUxzKGUpLG89U3IoZSxyKTtudWxsIT1ufHxlcyhlKSYmKG8ubGVuZ3RofHwhci5sZW5ndGgpfHwobj1lLGU9dCx0PXRoaXMsbz1TcihlLExzKGUpKSk7dmFyIGk9IShlcyhuKSYmXCJjaGFpblwiaW4gbiYmIW4uY2hhaW4pLGE9WmEodCk7cmV0dXJuIENlKG8sKGZ1bmN0aW9uKG4pe3ZhciByPWVbbl07dFtuXT1yLGEmJih0LnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX19jaGFpbl9fO2lmKGl8fGUpe3ZhciBuPXQodGhpcy5fX3dyYXBwZWRfXyk7cmV0dXJuKG4uX19hY3Rpb25zX189a28odGhpcy5fX2FjdGlvbnNfXykpLnB1c2goe2Z1bmM6cixhcmdzOmFyZ3VtZW50cyx0aGlzQXJnOnR9KSxuLl9fY2hhaW5fXz1lLG59cmV0dXJuIHIuYXBwbHkodCxOZShbdGhpcy52YWx1ZSgpXSxhcmd1bWVudHMpKX0pfSkpLHR9ZnVuY3Rpb24gbHUoKXt9dmFyIGN1PUhvKGplKSxmdT1IbyhrZSksZHU9SG8oV2UpO2Z1bmN0aW9uIGh1KHQpe3JldHVybiBFaSh0KT9HZShQaSh0KSk6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBBcihlLHQpfX0odCl9dmFyIHB1PUdvKCksZ3U9R28oITApO2Z1bmN0aW9uIHl1KCl7cmV0dXJuW119ZnVuY3Rpb24gbXUoKXtyZXR1cm4hMX12YXIgdnU9cW8oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0pLDApLGJ1PUtvKFwiY2VpbFwiKSx3dT1xbygoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC9lfSksMSksX3U9S28oXCJmbG9vclwiKTt2YXIgRXUsU3U9cW8oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQqZX0pLDEpLEF1PUtvKFwicm91bmRcIiksSXU9cW8oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQtZX0pLDApO3JldHVybiBEbi5hZnRlcj1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEJ0KGkpO3JldHVybiB0PWdzKHQpLGZ1bmN0aW9uKCl7aWYoLS10PDEpcmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sRG4uYXJ5PXhhLERuLmFzc2lnbj13cyxEbi5hc3NpZ25Jbj1fcyxEbi5hc3NpZ25JbldpdGg9RXMsRG4uYXNzaWduV2l0aD1TcyxEbi5hdD1BcyxEbi5iZWZvcmU9Q2EsRG4uYmluZD1CYSxEbi5iaW5kQWxsPXR1LERuLmJpbmRLZXk9a2EsRG4uY2FzdEFycmF5PWZ1bmN0aW9uKCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuW107dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBIYSh0KT90Olt0XX0sRG4uY2hhaW49aGEsRG4uY2h1bms9ZnVuY3Rpb24odCxlLG4pe2U9KG4/X2kodCxlLG4pOmU9PT1vKT8xOmJuKGdzKGUpLDApO3ZhciBpPW51bGw9PXQ/MDp0Lmxlbmd0aDtpZighaXx8ZTwxKXJldHVybltdO2Zvcih2YXIgYT0wLHM9MCx1PXIocGUoaS9lKSk7YTxpOyl1W3MrK109b28odCxhLGErPWUpO3JldHVybiB1fSxEbi5jb21wYWN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxyPTAsbz1bXTsrK2U8bjspe3ZhciBpPXRbZV07aSYmKG9bcisrXT1pKX1yZXR1cm4gb30sRG4uY29uY2F0PWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDtpZighdClyZXR1cm5bXTtmb3IodmFyIGU9cih0LTEpLG49YXJndW1lbnRzWzBdLG89dDtvLS07KWVbby0xXT1hcmd1bWVudHNbb107cmV0dXJuIE5lKEhhKG4pP2tvKG4pOltuXSx2cihlLDEpKX0sRG4uY29uZD1mdW5jdGlvbih0KXt2YXIgZT1udWxsPT10PzA6dC5sZW5ndGgsbj1jaSgpO3JldHVybiB0PWU/amUodCwoZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdFsxXSl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuW24odFswXSksdFsxXV19KSk6W10sWHIoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0tMTsrK3I8ZTspe3ZhciBvPXRbcl07aWYoUmUob1swXSx0aGlzLG4pKXJldHVybiBSZShvWzFdLHRoaXMsbil9fSkpfSxEbi5jb25mb3Jtcz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9THModCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBjcihuLHQsZSl9fShscih0LDEpKX0sRG4uY29uc3RhbnQ9ZXUsRG4uY291bnRCeT15YSxEbi5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1Gbih0KTtyZXR1cm4gbnVsbD09ZT9uOmlyKG4sZSl9LERuLmN1cnJ5PWZ1bmN0aW9uIHQoZSxuLHIpe3ZhciBpPVFvKGUsOCxvLG8sbyxvLG8sbj1yP286bik7cmV0dXJuIGkucGxhY2Vob2xkZXI9dC5wbGFjZWhvbGRlcixpfSxEbi5jdXJyeVJpZ2h0PWZ1bmN0aW9uIHQoZSxuLHIpe3ZhciBpPVFvKGUsdSxvLG8sbyxvLG8sbj1yP286bik7cmV0dXJuIGkucGxhY2Vob2xkZXI9dC5wbGFjZWhvbGRlcixpfSxEbi5kZWJvdW5jZT1MYSxEbi5kZWZhdWx0cz1JcyxEbi5kZWZhdWx0c0RlZXA9VHMsRG4uZGVmZXI9T2EsRG4uZGVsYXk9VWEsRG4uZGlmZmVyZW5jZT1EaSxEbi5kaWZmZXJlbmNlQnk9RmksRG4uZGlmZmVyZW5jZVdpdGg9emksRG4uZHJvcD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiByP29vKHQsKGU9bnx8ZT09PW8/MTpncyhlKSk8MD8wOmUscik6W119LERuLmRyb3BSaWdodD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiByP29vKHQsMCwoZT1yLShlPW58fGU9PT1vPzE6Z3MoZSkpKTwwPzA6ZSk6W119LERuLmRyb3BSaWdodFdoaWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP2dvKHQsY2koZSwzKSwhMCwhMCk6W119LERuLmRyb3BXaGlsZT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9nbyh0LGNpKGUsMyksITApOltdfSxEbi5maWxsPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPW51bGw9PXQ/MDp0Lmxlbmd0aDtyZXR1cm4gaT8obiYmXCJudW1iZXJcIiE9dHlwZW9mIG4mJl9pKHQsZSxuKSYmKG49MCxyPWkpLGZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPXQubGVuZ3RoO2Zvcigobj1ncyhuKSk8MCYmKG49LW4+aT8wOmkrbiksKHI9cj09PW98fHI+aT9pOmdzKHIpKTwwJiYocis9aSkscj1uPnI/MDp5cyhyKTtuPHI7KXRbbisrXT1lO3JldHVybiB0fSh0LGUsbixyKSk6W119LERuLmZpbHRlcj1mdW5jdGlvbih0LGUpe3JldHVybihIYSh0KT9MZTptcikodCxjaShlLDMpKX0sRG4uZmxhdE1hcD1mdW5jdGlvbih0LGUpe3JldHVybiB2cihBYSh0LGUpLDEpfSxEbi5mbGF0TWFwRGVlcD1mdW5jdGlvbih0LGUpe3JldHVybiB2cihBYSh0LGUpLGgpfSxEbi5mbGF0TWFwRGVwdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuPW49PT1vPzE6Z3MobiksdnIoQWEodCxlKSxuKX0sRG4uZmxhdHRlbj1WaSxEbi5mbGF0dGVuRGVlcD1mdW5jdGlvbih0KXtyZXR1cm4obnVsbD09dD8wOnQubGVuZ3RoKT92cih0LGgpOltdfSxEbi5mbGF0dGVuRGVwdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4obnVsbD09dD8wOnQubGVuZ3RoKT92cih0LGU9ZT09PW8/MTpncyhlKSk6W119LERuLmZsaXA9ZnVuY3Rpb24odCl7cmV0dXJuIFFvKHQsNTEyKX0sRG4uZmxvdz1udSxEbi5mbG93UmlnaHQ9cnUsRG4uZnJvbVBhaXJzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxyPXt9OysrZTxuOyl7dmFyIG89dFtlXTtyW29bMF1dPW9bMV19cmV0dXJuIHJ9LERuLmZ1bmN0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXTpTcih0LExzKHQpKX0sRG4uZnVuY3Rpb25zSW49ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106U3IodCxPcyh0KSl9LERuLmdyb3VwQnk9X2EsRG4uaW5pdGlhbD1mdW5jdGlvbih0KXtyZXR1cm4obnVsbD09dD8wOnQubGVuZ3RoKT9vbyh0LDAsLTEpOltdfSxEbi5pbnRlcnNlY3Rpb249SmksRG4uaW50ZXJzZWN0aW9uQnk9WWksRG4uaW50ZXJzZWN0aW9uV2l0aD1LaSxEbi5pbnZlcnQ9Q3MsRG4uaW52ZXJ0Qnk9QnMsRG4uaW52b2tlTWFwPUVhLERuLml0ZXJhdGVlPWl1LERuLmtleUJ5PVNhLERuLmtleXM9THMsRG4ua2V5c0luPU9zLERuLm1hcD1BYSxEbi5tYXBLZXlzPWZ1bmN0aW9uKHQsZSl7dmFyIG49e307cmV0dXJuIGU9Y2koZSwzKSxfcih0LChmdW5jdGlvbih0LHIsbyl7YXIobixlKHQscixvKSx0KX0pKSxufSxEbi5tYXBWYWx1ZXM9ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtyZXR1cm4gZT1jaShlLDMpLF9yKHQsKGZ1bmN0aW9uKHQscixvKXthcihuLHIsZSh0LHIsbykpfSkpLG59LERuLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIERyKGxyKHQsMSkpfSxEbi5tYXRjaGVzUHJvcGVydHk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRnIodCxscihlLDEpKX0sRG4ubWVtb2l6ZT1qYSxEbi5tZXJnZT1VcyxEbi5tZXJnZVdpdGg9anMsRG4ubWV0aG9kPWF1LERuLm1ldGhvZE9mPXN1LERuLm1peGluPXV1LERuLm5lZ2F0ZT1OYSxEbi5udGhBcmc9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9Z3ModCksWHIoKGZ1bmN0aW9uKGUpe3JldHVybiBxcihlLHQpfSkpfSxEbi5vbWl0PU5zLERuLm9taXRCeT1mdW5jdGlvbih0LGUpe3JldHVybiBQcyh0LE5hKGNpKGUpKSl9LERuLm9uY2U9ZnVuY3Rpb24odCl7cmV0dXJuIENhKDIsdCl9LERuLm9yZGVyQnk9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG51bGw9PXQ/W106KEhhKGUpfHwoZT1udWxsPT1lP1tdOltlXSksSGEobj1yP286bil8fChuPW51bGw9PW4/W106W25dKSxIcih0LGUsbikpfSxEbi5vdmVyPWN1LERuLm92ZXJBcmdzPU1hLERuLm92ZXJFdmVyeT1mdSxEbi5vdmVyU29tZT1kdSxEbi5wYXJ0aWFsPVBhLERuLnBhcnRpYWxSaWdodD1XYSxEbi5wYXJ0aXRpb249SWEsRG4ucGljaz1NcyxEbi5waWNrQnk9UHMsRG4ucHJvcGVydHk9aHUsRG4ucHJvcGVydHlPZj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQ/bzpBcih0LGUpfX0sRG4ucHVsbD1aaSxEbi5wdWxsQWxsPVFpLERuLnB1bGxBbGxCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQmJnQubGVuZ3RoJiZlJiZlLmxlbmd0aD9Hcih0LGUsY2kobiwyKSk6dH0sRG4ucHVsbEFsbFdpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0JiZ0Lmxlbmd0aCYmZSYmZS5sZW5ndGg/R3IodCxlLG8sbik6dH0sRG4ucHVsbEF0PXRhLERuLnJhbmdlPXB1LERuLnJhbmdlUmlnaHQ9Z3UsRG4ucmVhcmc9JGEsRG4ucmVqZWN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuKEhhKHQpP0xlOm1yKSh0LE5hKGNpKGUsMykpKX0sRG4ucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dmFyIG49W107aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm4gbjt2YXIgcj0tMSxvPVtdLGk9dC5sZW5ndGg7Zm9yKGU9Y2koZSwzKTsrK3I8aTspe3ZhciBhPXRbcl07ZShhLHIsdCkmJihuLnB1c2goYSksby5wdXNoKHIpKX1yZXR1cm4gSnIodCxvKSxufSxEbi5yZXN0PWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuIFhyKHQsZT1lPT09bz9lOmdzKGUpKX0sRG4ucmV2ZXJzZT1lYSxEbi5zYW1wbGVTaXplPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT0obj9faSh0LGUsbik6ZT09PW8pPzE6Z3MoZSksKEhhKHQpP1FuOlFyKSh0LGUpfSxEbi5zZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT10P3Q6dG8odCxlLG4pfSxEbi5zZXRXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiByPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/cjpvLG51bGw9PXQ/dDp0byh0LGUsbixyKX0sRG4uc2h1ZmZsZT1mdW5jdGlvbih0KXtyZXR1cm4oSGEodCk/dHI6cm8pKHQpfSxEbi5zbGljZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO3JldHVybiByPyhuJiZcIm51bWJlclwiIT10eXBlb2YgbiYmX2kodCxlLG4pPyhlPTAsbj1yKTooZT1udWxsPT1lPzA6Z3MoZSksbj1uPT09bz9yOmdzKG4pKSxvbyh0LGUsbikpOltdfSxEbi5zb3J0Qnk9VGEsRG4uc29ydGVkVW5pcT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5sZW5ndGg/dW8odCk6W119LERuLnNvcnRlZFVuaXFCeT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD91byh0LGNpKGUsMikpOltdfSxEbi5zcGxpdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG4mJlwibnVtYmVyXCIhPXR5cGVvZiBuJiZfaSh0LGUsbikmJihlPW49byksKG49bj09PW8/eTpuPj4+MCk/KHQ9YnModCkpJiYoXCJzdHJpbmdcIj09dHlwZW9mIGV8fG51bGwhPWUmJiFhcyhlKSkmJiEoZT1jbyhlKSkmJnVuKHQpP1NvKGduKHQpLDAsbik6dC5zcGxpdChlLG4pOltdfSxEbi5zcHJlYWQ9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBCdChpKTtyZXR1cm4gZT1udWxsPT1lPzA6Ym4oZ3MoZSksMCksWHIoKGZ1bmN0aW9uKG4pe3ZhciByPW5bZV0sbz1TbyhuLDAsZSk7cmV0dXJuIHImJk5lKG8sciksUmUodCx0aGlzLG8pfSkpfSxEbi50YWlsPWZ1bmN0aW9uKHQpe3ZhciBlPW51bGw9PXQ/MDp0Lmxlbmd0aDtyZXR1cm4gZT9vbyh0LDEsZSk6W119LERuLnRha2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0JiZ0Lmxlbmd0aD9vbyh0LDAsKGU9bnx8ZT09PW8/MTpncyhlKSk8MD8wOmUpOltdfSxEbi50YWtlUmlnaHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGw9PXQ/MDp0Lmxlbmd0aDtyZXR1cm4gcj9vbyh0LChlPXItKGU9bnx8ZT09PW8/MTpncyhlKSkpPDA/MDplLHIpOltdfSxEbi50YWtlUmlnaHRXaGlsZT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9nbyh0LGNpKGUsMyksITEsITApOltdfSxEbi50YWtlV2hpbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/Z28odCxjaShlLDMpKTpbXX0sRG4udGFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUodCksdH0sRG4udGhyb3R0bGU9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSEwLG89ITA7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgQnQoaSk7cmV0dXJuIGVzKG4pJiYocj1cImxlYWRpbmdcImluIG4/ISFuLmxlYWRpbmc6cixvPVwidHJhaWxpbmdcImluIG4/ISFuLnRyYWlsaW5nOm8pLExhKHQsZSx7bGVhZGluZzpyLG1heFdhaXQ6ZSx0cmFpbGluZzpvfSl9LERuLnRocnU9cGEsRG4udG9BcnJheT1ocyxEbi50b1BhaXJzPVdzLERuLnRvUGFpcnNJbj0kcyxEbi50b1BhdGg9ZnVuY3Rpb24odCl7cmV0dXJuIEhhKHQpP2plKHQsUGkpOmxzKHQpP1t0XTprbyhNaShicyh0KSkpfSxEbi50b1BsYWluT2JqZWN0PXZzLERuLnRyYW5zZm9ybT1mdW5jdGlvbih0LGUsbil7dmFyIHI9SGEodCksbz1yfHxZYSh0KXx8Y3ModCk7aWYoZT1jaShlLDQpLG51bGw9PW4pe3ZhciBpPXQmJnQuY29uc3RydWN0b3I7bj1vP3I/bmV3IGk6W106ZXModCkmJlphKGkpP0ZuKEd0KHQpKTp7fX1yZXR1cm4obz9DZTpfcikodCwoZnVuY3Rpb24odCxyLG8pe3JldHVybiBlKG4sdCxyLG8pfSkpLG59LERuLnVuYXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB4YSh0LDEpfSxEbi51bmlvbj1uYSxEbi51bmlvbkJ5PXJhLERuLnVuaW9uV2l0aD1vYSxEbi51bmlxPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD9mbyh0KTpbXX0sRG4udW5pcUJ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP2ZvKHQsY2koZSwyKSk6W119LERuLnVuaXFXaXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm8sdCYmdC5sZW5ndGg/Zm8odCxvLGUpOltdfSxEbi51bnNldD1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10fHxobyh0LGUpfSxEbi51bnppcD1pYSxEbi51bnppcFdpdGg9YWEsRG4udXBkYXRlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbnVsbD09dD90OnBvKHQsZSx3byhuKSl9LERuLnVwZGF0ZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHI9XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yOm8sbnVsbD09dD90OnBvKHQsZSx3byhuKSxyKX0sRG4udmFsdWVzPURzLERuLnZhbHVlc0luPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P1tdOnRuKHQsT3ModCkpfSxEbi53aXRob3V0PXNhLERuLndvcmRzPVpzLERuLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUGEod28oZSksdCl9LERuLnhvcj11YSxEbi54b3JCeT1sYSxEbi54b3JXaXRoPWNhLERuLnppcD1mYSxEbi56aXBPYmplY3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm8odHx8W10sZXx8W10sbnIpfSxEbi56aXBPYmplY3REZWVwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvKHR8fFtdLGV8fFtdLHRvKX0sRG4uemlwV2l0aD1kYSxEbi5lbnRyaWVzPVdzLERuLmVudHJpZXNJbj0kcyxEbi5leHRlbmQ9X3MsRG4uZXh0ZW5kV2l0aD1Fcyx1dShEbixEbiksRG4uYWRkPXZ1LERuLmF0dGVtcHQ9UXMsRG4uY2FtZWxDYXNlPUZzLERuLmNhcGl0YWxpemU9enMsRG4uY2VpbD1idSxEbi5jbGFtcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG49PT1vJiYobj1lLGU9byksbiE9PW8mJihuPShuPW1zKG4pKT09bj9uOjApLGUhPT1vJiYoZT0oZT1tcyhlKSk9PWU/ZTowKSx1cihtcyh0KSxlLG4pfSxEbi5jbG9uZT1mdW5jdGlvbih0KXtyZXR1cm4gbHIodCw0KX0sRG4uY2xvbmVEZWVwPWZ1bmN0aW9uKHQpe3JldHVybiBscih0LDUpfSxEbi5jbG9uZURlZXBXaXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGxyKHQsNSxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpvKX0sRG4uY2xvbmVXaXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGxyKHQsNCxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpvKX0sRG4uY29uZm9ybXNUbz1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT1lfHxjcih0LGUsTHMoZSkpfSxEbi5kZWJ1cnI9cXMsRG4uZGVmYXVsdFRvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXR8fHQhPXQ/ZTp0fSxEbi5kaXZpZGU9d3UsRG4uZW5kc1dpdGg9ZnVuY3Rpb24odCxlLG4pe3Q9YnModCksZT1jbyhlKTt2YXIgcj10Lmxlbmd0aCxpPW49bj09PW8/cjp1cihncyhuKSwwLHIpO3JldHVybihuLT1lLmxlbmd0aCk+PTAmJnQuc2xpY2UobixpKT09ZX0sRG4uZXE9RGEsRG4uZXNjYXBlPWZ1bmN0aW9uKHQpe3JldHVybih0PWJzKHQpKSYmWC50ZXN0KHQpP3QucmVwbGFjZShZLGFuKTp0fSxEbi5lc2NhcGVSZWdFeHA9ZnVuY3Rpb24odCl7cmV0dXJuKHQ9YnModCkpJiZpdC50ZXN0KHQpP3QucmVwbGFjZShvdCxcIlxcXFwkJlwiKTp0fSxEbi5ldmVyeT1mdW5jdGlvbih0LGUsbil7dmFyIHI9SGEodCk/a2U6Z3I7cmV0dXJuIG4mJl9pKHQsZSxuKSYmKGU9bykscih0LGNpKGUsMykpfSxEbi5maW5kPW1hLERuLmZpbmRJbmRleD1xaSxEbi5maW5kS2V5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIERlKHQsY2koZSwzKSxfcil9LERuLmZpbmRMYXN0PXZhLERuLmZpbmRMYXN0SW5kZXg9SGksRG4uZmluZExhc3RLZXk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRGUodCxjaShlLDMpLEVyKX0sRG4uZmxvb3I9X3UsRG4uZm9yRWFjaD1iYSxEbi5mb3JFYWNoUmlnaHQ9d2EsRG4uZm9ySW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD90OmJyKHQsY2koZSwzKSxPcyl9LERuLmZvckluUmlnaHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD90OndyKHQsY2koZSwzKSxPcyl9LERuLmZvck93bj1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZfcih0LGNpKGUsMykpfSxEbi5mb3JPd25SaWdodD1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZFcih0LGNpKGUsMykpfSxEbi5nZXQ9UnMsRG4uZ3Q9RmEsRG4uZ3RlPXphLERuLmhhcz1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT10JiZtaSh0LGUseHIpfSxEbi5oYXNJbj14cyxEbi5oZWFkPUdpLERuLmlkZW50aXR5PW91LERuLmluY2x1ZGVzPWZ1bmN0aW9uKHQsZSxuLHIpe3Q9R2EodCk/dDpEcyh0KSxuPW4mJiFyP2dzKG4pOjA7dmFyIG89dC5sZW5ndGg7cmV0dXJuIG48MCYmKG49Ym4obytuLDApKSx1cyh0KT9uPD1vJiZ0LmluZGV4T2YoZSxuKT4tMTohIW8mJnplKHQsZSxuKT4tMX0sRG4uaW5kZXhPZj1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO2lmKCFyKXJldHVybi0xO3ZhciBvPW51bGw9PW4/MDpncyhuKTtyZXR1cm4gbzwwJiYobz1ibihyK28sMCkpLHplKHQsZSxvKX0sRG4uaW5SYW5nZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9cHMoZSksbj09PW8/KG49ZSxlPTApOm49cHMobiksZnVuY3Rpb24odCxlLG4pe3JldHVybiB0Pj13bihlLG4pJiZ0PGJuKGUsbil9KHQ9bXModCksZSxuKX0sRG4uaW52b2tlPWtzLERuLmlzQXJndW1lbnRzPXFhLERuLmlzQXJyYXk9SGEsRG4uaXNBcnJheUJ1ZmZlcj1WYSxEbi5pc0FycmF5TGlrZT1HYSxEbi5pc0FycmF5TGlrZU9iamVjdD1KYSxEbi5pc0Jvb2xlYW49ZnVuY3Rpb24odCl7cmV0dXJuITA9PT10fHwhMT09PXR8fG5zKHQpJiZUcih0KT09d30sRG4uaXNCdWZmZXI9WWEsRG4uaXNEYXRlPUthLERuLmlzRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJjE9PT10Lm5vZGVUeXBlJiYhaXModCl9LERuLmlzRW1wdHk9ZnVuY3Rpb24odCl7aWYobnVsbD09dClyZXR1cm4hMDtpZihHYSh0KSYmKEhhKHQpfHxcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJmdW5jdGlvblwiPT10eXBlb2YgdC5zcGxpY2V8fFlhKHQpfHxjcyh0KXx8cWEodCkpKXJldHVybiF0Lmxlbmd0aDt2YXIgZT15aSh0KTtpZihlPT1JfHxlPT1CKXJldHVybiF0LnNpemU7aWYoSWkodCkpcmV0dXJuIU1yKHQpLmxlbmd0aDtmb3IodmFyIG4gaW4gdClpZihOdC5jYWxsKHQsbikpcmV0dXJuITE7cmV0dXJuITB9LERuLmlzRXF1YWw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT3IodCxlKX0sRG4uaXNFcXVhbFdpdGg9ZnVuY3Rpb24odCxlLG4pe3ZhciByPShuPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpvKT9uKHQsZSk6bztyZXR1cm4gcj09PW8/T3IodCxlLG8sbik6ISFyfSxEbi5pc0Vycm9yPVhhLERuLmlzRmluaXRlPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ3ZSh0KX0sRG4uaXNGdW5jdGlvbj1aYSxEbi5pc0ludGVnZXI9UWEsRG4uaXNMZW5ndGg9dHMsRG4uaXNNYXA9cnMsRG4uaXNNYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZXx8VXIodCxlLGRpKGUpKX0sRG4uaXNNYXRjaFdpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpvLFVyKHQsZSxkaShlKSxuKX0sRG4uaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIG9zKHQpJiZ0IT0rdH0sRG4uaXNOYXRpdmU9ZnVuY3Rpb24odCl7aWYoQWkodCkpdGhyb3cgbmV3IEF0KFwiVW5zdXBwb3J0ZWQgY29yZS1qcyB1c2UuIFRyeSBodHRwczovL25wbXMuaW8vc2VhcmNoP3E9cG9ueWZpbGwuXCIpO3JldHVybiBqcih0KX0sRG4uaXNOaWw9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXR9LERuLmlzTnVsbD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXR9LERuLmlzTnVtYmVyPW9zLERuLmlzT2JqZWN0PWVzLERuLmlzT2JqZWN0TGlrZT1ucyxEbi5pc1BsYWluT2JqZWN0PWlzLERuLmlzUmVnRXhwPWFzLERuLmlzU2FmZUludGVnZXI9ZnVuY3Rpb24odCl7cmV0dXJuIFFhKHQpJiZ0Pj0tOTAwNzE5OTI1NDc0MDk5MSYmdDw9cH0sRG4uaXNTZXQ9c3MsRG4uaXNTdHJpbmc9dXMsRG4uaXNTeW1ib2w9bHMsRG4uaXNUeXBlZEFycmF5PWNzLERuLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09b30sRG4uaXNXZWFrTWFwPWZ1bmN0aW9uKHQpe3JldHVybiBucyh0KSYmeWkodCk9PU99LERuLmlzV2Vha1NldD1mdW5jdGlvbih0KXtyZXR1cm4gbnModCkmJlwiW29iamVjdCBXZWFrU2V0XVwiPT1Ucih0KX0sRG4uam9pbj1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P1wiXCI6JGUuY2FsbCh0LGUpfSxEbi5rZWJhYkNhc2U9SHMsRG4ubGFzdD1YaSxEbi5sYXN0SW5kZXhPZj1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD8wOnQubGVuZ3RoO2lmKCFyKXJldHVybi0xO3ZhciBpPXI7cmV0dXJuIG4hPT1vJiYoaT0oaT1ncyhuKSk8MD9ibihyK2ksMCk6d24oaSxyLTEpKSxlPT1lP2Z1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9bisxO3ItLTspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuIHJ9KHQsZSxpKTpGZSh0LEhlLGksITApfSxEbi5sb3dlckNhc2U9VnMsRG4ubG93ZXJGaXJzdD1HcyxEbi5sdD1mcyxEbi5sdGU9ZHMsRG4ubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD95cih0LG91LFJyKTpvfSxEbi5tYXhCeT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD95cih0LGNpKGUsMiksUnIpOm99LERuLm1lYW49ZnVuY3Rpb24odCl7cmV0dXJuIFZlKHQsb3UpfSxEbi5tZWFuQnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gVmUodCxjaShlLDIpKX0sRG4ubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD95cih0LG91LFdyKTpvfSxEbi5taW5CeT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD95cih0LGNpKGUsMiksV3IpOm99LERuLnN0dWJBcnJheT15dSxEbi5zdHViRmFsc2U9bXUsRG4uc3R1Yk9iamVjdD1mdW5jdGlvbigpe3JldHVybnt9fSxEbi5zdHViU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sRG4uc3R1YlRydWU9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sRG4ubXVsdGlwbHk9U3UsRG4ubnRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3FyKHQsZ3MoZSkpOm99LERuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZ2UuXz09PXRoaXMmJihnZS5fPUR0KSx0aGlzfSxEbi5ub29wPWx1LERuLm5vdz1SYSxEbi5wYWQ9ZnVuY3Rpb24odCxlLG4pe3Q9YnModCk7dmFyIHI9KGU9Z3MoZSkpP3BuKHQpOjA7aWYoIWV8fHI+PWUpcmV0dXJuIHQ7dmFyIG89KGUtcikvMjtyZXR1cm4gVm8oeWUobyksbikrdCtWbyhwZShvKSxuKX0sRG4ucGFkRW5kPWZ1bmN0aW9uKHQsZSxuKXt0PWJzKHQpO3ZhciByPShlPWdzKGUpKT9wbih0KTowO3JldHVybiBlJiZyPGU/dCtWbyhlLXIsbik6dH0sRG4ucGFkU3RhcnQ9ZnVuY3Rpb24odCxlLG4pe3Q9YnModCk7dmFyIHI9KGU9Z3MoZSkpP3BuKHQpOjA7cmV0dXJuIGUmJnI8ZT9WbyhlLXIsbikrdDp0fSxEbi5wYXJzZUludD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG58fG51bGw9PWU/ZT0wOmUmJihlPStlKSxFbihicyh0KS5yZXBsYWNlKGF0LFwiXCIpLGV8fDApfSxEbi5yYW5kb209ZnVuY3Rpb24odCxlLG4pe2lmKG4mJlwiYm9vbGVhblwiIT10eXBlb2YgbiYmX2kodCxlLG4pJiYoZT1uPW8pLG49PT1vJiYoXCJib29sZWFuXCI9PXR5cGVvZiBlPyhuPWUsZT1vKTpcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD1vKSksdD09PW8mJmU9PT1vPyh0PTAsZT0xKToodD1wcyh0KSxlPT09bz8oZT10LHQ9MCk6ZT1wcyhlKSksdD5lKXt2YXIgcj10O3Q9ZSxlPXJ9aWYobnx8dCUxfHxlJTEpe3ZhciBpPVNuKCk7cmV0dXJuIHduKHQraSooZS10K2ZlKFwiMWUtXCIrKChpK1wiXCIpLmxlbmd0aC0xKSkpLGUpfXJldHVybiBZcih0LGUpfSxEbi5yZWR1Y2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByPUhhKHQpP01lOlllLG89YXJndW1lbnRzLmxlbmd0aDwzO3JldHVybiByKHQsY2koZSw0KSxuLG8saHIpfSxEbi5yZWR1Y2VSaWdodD1mdW5jdGlvbih0LGUsbil7dmFyIHI9SGEodCk/UGU6WWUsbz1hcmd1bWVudHMubGVuZ3RoPDM7cmV0dXJuIHIodCxjaShlLDQpLG4sbyxwcil9LERuLnJlcGVhdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9KG4/X2kodCxlLG4pOmU9PT1vKT8xOmdzKGUpLEtyKGJzKHQpLGUpfSxEbi5yZXBsYWNlPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLGU9YnModFswXSk7cmV0dXJuIHQubGVuZ3RoPDM/ZTplLnJlcGxhY2UodFsxXSx0WzJdKX0sRG4ucmVzdWx0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0tMSxpPShlPV9vKGUsdCkpLmxlbmd0aDtmb3IoaXx8KGk9MSx0PW8pOysrcjxpOyl7dmFyIGE9bnVsbD09dD9vOnRbUGkoZVtyXSldO2E9PT1vJiYocj1pLGE9biksdD1aYShhKT9hLmNhbGwodCk6YX1yZXR1cm4gdH0sRG4ucm91bmQ9QXUsRG4ucnVuSW5Db250ZXh0PXQsRG4uc2FtcGxlPWZ1bmN0aW9uKHQpe3JldHVybihIYSh0KT9abjpacikodCl9LERuLnNpemU9ZnVuY3Rpb24odCl7aWYobnVsbD09dClyZXR1cm4gMDtpZihHYSh0KSlyZXR1cm4gdXModCk/cG4odCk6dC5sZW5ndGg7dmFyIGU9eWkodCk7cmV0dXJuIGU9PUl8fGU9PUI/dC5zaXplOk1yKHQpLmxlbmd0aH0sRG4uc25ha2VDYXNlPUpzLERuLnNvbWU9ZnVuY3Rpb24odCxlLG4pe3ZhciByPUhhKHQpP1dlOmlvO3JldHVybiBuJiZfaSh0LGUsbikmJihlPW8pLHIodCxjaShlLDMpKX0sRG4uc29ydGVkSW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYW8odCxlKX0sRG4uc29ydGVkSW5kZXhCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHNvKHQsZSxjaShuLDIpKX0sRG4uc29ydGVkSW5kZXhPZj1mdW5jdGlvbih0LGUpe3ZhciBuPW51bGw9PXQ/MDp0Lmxlbmd0aDtpZihuKXt2YXIgcj1hbyh0LGUpO2lmKHI8biYmRGEodFtyXSxlKSlyZXR1cm4gcn1yZXR1cm4tMX0sRG4uc29ydGVkTGFzdEluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFvKHQsZSwhMCl9LERuLnNvcnRlZExhc3RJbmRleEJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gc28odCxlLGNpKG4sMiksITApfSxEbi5zb3J0ZWRMYXN0SW5kZXhPZj1mdW5jdGlvbih0LGUpe2lmKG51bGw9PXQ/MDp0Lmxlbmd0aCl7dmFyIG49YW8odCxlLCEwKS0xO2lmKERhKHRbbl0sZSkpcmV0dXJuIG59cmV0dXJuLTF9LERuLnN0YXJ0Q2FzZT1ZcyxEbi5zdGFydHNXaXRoPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD1icyh0KSxuPW51bGw9PW4/MDp1cihncyhuKSwwLHQubGVuZ3RoKSxlPWNvKGUpLHQuc2xpY2UobixuK2UubGVuZ3RoKT09ZX0sRG4uc3VidHJhY3Q9SXUsRG4uc3VtPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD9LZSh0LG91KTowfSxEbi5zdW1CeT1mdW5jdGlvbih0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9LZSh0LGNpKGUsMikpOjB9LERuLnRlbXBsYXRlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1Ebi50ZW1wbGF0ZVNldHRpbmdzO24mJl9pKHQsZSxuKSYmKGU9byksdD1icyh0KSxlPUVzKHt9LGUscix0aSk7dmFyIGksYSxzPUVzKHt9LGUuaW1wb3J0cyxyLmltcG9ydHMsdGkpLHU9THMocyksbD10bihzLHUpLGM9MCxmPWUuaW50ZXJwb2xhdGV8fEV0LGQ9XCJfX3AgKz0gJ1wiLGg9eHQoKGUuZXNjYXBlfHxFdCkuc291cmNlK1wifFwiK2Yuc291cmNlK1wifFwiKyhmPT09dHQ/cHQ6RXQpLnNvdXJjZStcInxcIisoZS5ldmFsdWF0ZXx8RXQpLnNvdXJjZStcInwkXCIsXCJnXCIpLHA9XCIvLyMgc291cmNlVVJMPVwiKyhOdC5jYWxsKGUsXCJzb3VyY2VVUkxcIik/KGUuc291cmNlVVJMK1wiXCIpLnJlcGxhY2UoL1xccy9nLFwiIFwiKTpcImxvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbXCIrICsrc2UrXCJdXCIpK1wiXFxuXCI7dC5yZXBsYWNlKGgsKGZ1bmN0aW9uKGUsbixyLG8scyx1KXtyZXR1cm4gcnx8KHI9byksZCs9dC5zbGljZShjLHUpLnJlcGxhY2UoU3Qsc24pLG4mJihpPSEwLGQrPVwiJyArXFxuX19lKFwiK24rXCIpICtcXG4nXCIpLHMmJihhPSEwLGQrPVwiJztcXG5cIitzK1wiO1xcbl9fcCArPSAnXCIpLHImJihkKz1cIicgK1xcbigoX190ID0gKFwiK3IrXCIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcXG4nXCIpLGM9dStlLmxlbmd0aCxlfSkpLGQrPVwiJztcXG5cIjt2YXIgZz1OdC5jYWxsKGUsXCJ2YXJpYWJsZVwiKSYmZS52YXJpYWJsZTtpZihnKXtpZihkdC50ZXN0KGcpKXRocm93IG5ldyBBdChcIkludmFsaWQgYHZhcmlhYmxlYCBvcHRpb24gcGFzc2VkIGludG8gYF8udGVtcGxhdGVgXCIpfWVsc2UgZD1cIndpdGggKG9iaikge1xcblwiK2QrXCJcXG59XFxuXCI7ZD0oYT9kLnJlcGxhY2UoSCxcIlwiKTpkKS5yZXBsYWNlKFYsXCIkMVwiKS5yZXBsYWNlKEcsXCIkMTtcIiksZD1cImZ1bmN0aW9uKFwiKyhnfHxcIm9ialwiKStcIikge1xcblwiKyhnP1wiXCI6XCJvYmogfHwgKG9iaiA9IHt9KTtcXG5cIikrXCJ2YXIgX190LCBfX3AgPSAnJ1wiKyhpP1wiLCBfX2UgPSBfLmVzY2FwZVwiOlwiXCIpKyhhP1wiLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG5mdW5jdGlvbiBwcmludCgpIHsgX19wICs9IF9fai5jYWxsKGFyZ3VtZW50cywgJycpIH1cXG5cIjpcIjtcXG5cIikrZCtcInJldHVybiBfX3BcXG59XCI7dmFyIHk9UXMoKGZ1bmN0aW9uKCl7cmV0dXJuIEl0KHUscCtcInJldHVybiBcIitkKS5hcHBseShvLGwpfSkpO2lmKHkuc291cmNlPWQsWGEoeSkpdGhyb3cgeTtyZXR1cm4geX0sRG4udGltZXM9ZnVuY3Rpb24odCxlKXtpZigodD1ncyh0KSk8MXx8dD5wKXJldHVybltdO3ZhciBuPXkscj13bih0LHkpO2U9Y2koZSksdC09eTtmb3IodmFyIG89WGUocixlKTsrK248dDspZShuKTtyZXR1cm4gb30sRG4udG9GaW5pdGU9cHMsRG4udG9JbnRlZ2VyPWdzLERuLnRvTGVuZ3RoPXlzLERuLnRvTG93ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGJzKHQpLnRvTG93ZXJDYXNlKCl9LERuLnRvTnVtYmVyPW1zLERuLnRvU2FmZUludGVnZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dXIoZ3ModCksLTkwMDcxOTkyNTQ3NDA5OTEscCk6MD09PXQ/dDowfSxEbi50b1N0cmluZz1icyxEbi50b1VwcGVyPWZ1bmN0aW9uKHQpe3JldHVybiBicyh0KS50b1VwcGVyQ2FzZSgpfSxEbi50cmltPWZ1bmN0aW9uKHQsZSxuKXtpZigodD1icyh0KSkmJihufHxlPT09bykpcmV0dXJuIFplKHQpO2lmKCF0fHwhKGU9Y28oZSkpKXJldHVybiB0O3ZhciByPWduKHQpLGk9Z24oZSk7cmV0dXJuIFNvKHIsbm4ocixpKSxybihyLGkpKzEpLmpvaW4oXCJcIil9LERuLnRyaW1FbmQ9ZnVuY3Rpb24odCxlLG4pe2lmKCh0PWJzKHQpKSYmKG58fGU9PT1vKSlyZXR1cm4gdC5zbGljZSgwLHluKHQpKzEpO2lmKCF0fHwhKGU9Y28oZSkpKXJldHVybiB0O3ZhciByPWduKHQpO3JldHVybiBTbyhyLDAscm4ocixnbihlKSkrMSkuam9pbihcIlwiKX0sRG4udHJpbVN0YXJ0PWZ1bmN0aW9uKHQsZSxuKXtpZigodD1icyh0KSkmJihufHxlPT09bykpcmV0dXJuIHQucmVwbGFjZShhdCxcIlwiKTtpZighdHx8IShlPWNvKGUpKSlyZXR1cm4gdDt2YXIgcj1nbih0KTtyZXR1cm4gU28ocixubihyLGduKGUpKSkuam9pbihcIlwiKX0sRG4udHJ1bmNhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj0zMCxyPVwiLi4uXCI7aWYoZXMoZSkpe3ZhciBpPVwic2VwYXJhdG9yXCJpbiBlP2Uuc2VwYXJhdG9yOmk7bj1cImxlbmd0aFwiaW4gZT9ncyhlLmxlbmd0aCk6bixyPVwib21pc3Npb25cImluIGU/Y28oZS5vbWlzc2lvbik6cn12YXIgYT0odD1icyh0KSkubGVuZ3RoO2lmKHVuKHQpKXt2YXIgcz1nbih0KTthPXMubGVuZ3RofWlmKG4+PWEpcmV0dXJuIHQ7dmFyIHU9bi1wbihyKTtpZih1PDEpcmV0dXJuIHI7dmFyIGw9cz9TbyhzLDAsdSkuam9pbihcIlwiKTp0LnNsaWNlKDAsdSk7aWYoaT09PW8pcmV0dXJuIGwrcjtpZihzJiYodSs9bC5sZW5ndGgtdSksYXMoaSkpe2lmKHQuc2xpY2UodSkuc2VhcmNoKGkpKXt2YXIgYyxmPWw7Zm9yKGkuZ2xvYmFsfHwoaT14dChpLnNvdXJjZSxicyhndC5leGVjKGkpKStcImdcIikpLGkubGFzdEluZGV4PTA7Yz1pLmV4ZWMoZik7KXZhciBkPWMuaW5kZXg7bD1sLnNsaWNlKDAsZD09PW8/dTpkKX19ZWxzZSBpZih0LmluZGV4T2YoY28oaSksdSkhPXUpe3ZhciBoPWwubGFzdEluZGV4T2YoaSk7aD4tMSYmKGw9bC5zbGljZSgwLGgpKX1yZXR1cm4gbCtyfSxEbi51bmVzY2FwZT1mdW5jdGlvbih0KXtyZXR1cm4odD1icyh0KSkmJksudGVzdCh0KT90LnJlcGxhY2UoSixtbik6dH0sRG4udW5pcXVlSWQ9ZnVuY3Rpb24odCl7dmFyIGU9KytNdDtyZXR1cm4gYnModCkrZX0sRG4udXBwZXJDYXNlPUtzLERuLnVwcGVyRmlyc3Q9WHMsRG4uZWFjaD1iYSxEbi5lYWNoUmlnaHQ9d2EsRG4uZmlyc3Q9R2ksdXUoRG4sKEV1PXt9LF9yKERuLChmdW5jdGlvbih0LGUpe050LmNhbGwoRG4ucHJvdG90eXBlLGUpfHwoRXVbZV09dCl9KSksRXUpLHtjaGFpbjohMX0pLERuLlZFUlNJT049XCI0LjE3LjIxXCIsQ2UoW1wiYmluZFwiLFwiYmluZEtleVwiLFwiY3VycnlcIixcImN1cnJ5UmlnaHRcIixcInBhcnRpYWxcIixcInBhcnRpYWxSaWdodFwiXSwoZnVuY3Rpb24odCl7RG5bdF0ucGxhY2Vob2xkZXI9RG59KSksQ2UoW1wiZHJvcFwiLFwidGFrZVwiXSwoZnVuY3Rpb24odCxlKXtIbi5wcm90b3R5cGVbdF09ZnVuY3Rpb24obil7bj1uPT09bz8xOmJuKGdzKG4pLDApO3ZhciByPXRoaXMuX19maWx0ZXJlZF9fJiYhZT9uZXcgSG4odGhpcyk6dGhpcy5jbG9uZSgpO3JldHVybiByLl9fZmlsdGVyZWRfXz9yLl9fdGFrZUNvdW50X189d24obixyLl9fdGFrZUNvdW50X18pOnIuX192aWV3c19fLnB1c2goe3NpemU6d24obix5KSx0eXBlOnQrKHIuX19kaXJfXzwwP1wiUmlnaHRcIjpcIlwiKX0pLHJ9LEhuLnByb3RvdHlwZVt0K1wiUmlnaHRcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpW3RdKGUpLnJldmVyc2UoKX19KSksQ2UoW1wiZmlsdGVyXCIsXCJtYXBcIixcInRha2VXaGlsZVwiXSwoZnVuY3Rpb24odCxlKXt2YXIgbj1lKzEscj0xPT1ufHwzPT1uO0huLnByb3RvdHlwZVt0XT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNsb25lKCk7cmV0dXJuIGUuX19pdGVyYXRlZXNfXy5wdXNoKHtpdGVyYXRlZTpjaSh0LDMpLHR5cGU6bn0pLGUuX19maWx0ZXJlZF9fPWUuX19maWx0ZXJlZF9ffHxyLGV9fSkpLENlKFtcImhlYWRcIixcImxhc3RcIl0sKGZ1bmN0aW9uKHQsZSl7dmFyIG49XCJ0YWtlXCIrKGU/XCJSaWdodFwiOlwiXCIpO0huLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzW25dKDEpLnZhbHVlKClbMF19fSkpLENlKFtcImluaXRpYWxcIixcInRhaWxcIl0sKGZ1bmN0aW9uKHQsZSl7dmFyIG49XCJkcm9wXCIrKGU/XCJcIjpcIlJpZ2h0XCIpO0huLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZmlsdGVyZWRfXz9uZXcgSG4odGhpcyk6dGhpc1tuXSgxKX19KSksSG4ucHJvdG90eXBlLmNvbXBhY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIob3UpfSxIbi5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maWx0ZXIodCkuaGVhZCgpfSxIbi5wcm90b3R5cGUuZmluZExhc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpLmZpbmQodCl9LEhuLnByb3RvdHlwZS5pbnZva2VNYXA9WHIoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD9uZXcgSG4odGhpcyk6dGhpcy5tYXAoKGZ1bmN0aW9uKG4pe3JldHVybiBrcihuLHQsZSl9KSl9KSksSG4ucHJvdG90eXBlLnJlamVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maWx0ZXIoTmEoY2kodCkpKX0sSG4ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7dD1ncyh0KTt2YXIgbj10aGlzO3JldHVybiBuLl9fZmlsdGVyZWRfXyYmKHQ+MHx8ZTwwKT9uZXcgSG4obik6KHQ8MD9uPW4udGFrZVJpZ2h0KC10KTp0JiYobj1uLmRyb3AodCkpLGUhPT1vJiYobj0oZT1ncyhlKSk8MD9uLmRyb3BSaWdodCgtZSk6bi50YWtlKGUtdCkpLG4pfSxIbi5wcm90b3R5cGUudGFrZVJpZ2h0V2hpbGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpLnRha2VXaGlsZSh0KS5yZXZlcnNlKCl9LEhuLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFrZSh5KX0sX3IoSG4ucHJvdG90eXBlLChmdW5jdGlvbih0LGUpe3ZhciBuPS9eKD86ZmlsdGVyfGZpbmR8bWFwfHJlamVjdCl8V2hpbGUkLy50ZXN0KGUpLHI9L14oPzpoZWFkfGxhc3QpJC8udGVzdChlKSxpPURuW3I/XCJ0YWtlXCIrKFwibGFzdFwiPT1lP1wiUmlnaHRcIjpcIlwiKTplXSxhPXJ8fC9eZmluZC8udGVzdChlKTtpJiYoRG4ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fX3dyYXBwZWRfXyxzPXI/WzFdOmFyZ3VtZW50cyx1PWUgaW5zdGFuY2VvZiBIbixsPXNbMF0sYz11fHxIYShlKSxmPWZ1bmN0aW9uKHQpe3ZhciBlPWkuYXBwbHkoRG4sTmUoW3RdLHMpKTtyZXR1cm4gciYmZD9lWzBdOmV9O2MmJm4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGwmJjEhPWwubGVuZ3RoJiYodT1jPSExKTt2YXIgZD10aGlzLl9fY2hhaW5fXyxoPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgscD1hJiYhZCxnPXUmJiFoO2lmKCFhJiZjKXtlPWc/ZTpuZXcgSG4odGhpcyk7dmFyIHk9dC5hcHBseShlLHMpO3JldHVybiB5Ll9fYWN0aW9uc19fLnB1c2goe2Z1bmM6cGEsYXJnczpbZl0sdGhpc0FyZzpvfSksbmV3IHFuKHksZCl9cmV0dXJuIHAmJmc/dC5hcHBseSh0aGlzLHMpOih5PXRoaXMudGhydShmKSxwP3I/eS52YWx1ZSgpWzBdOnkudmFsdWUoKTp5KX0pfSkpLENlKFtcInBvcFwiLFwicHVzaFwiLFwic2hpZnRcIixcInNvcnRcIixcInNwbGljZVwiLFwidW5zaGlmdFwiXSwoZnVuY3Rpb24odCl7dmFyIGU9a3RbdF0sbj0vXig/OnB1c2h8c29ydHx1bnNoaWZ0KSQvLnRlc3QodCk/XCJ0YXBcIjpcInRocnVcIixyPS9eKD86cG9wfHNoaWZ0KSQvLnRlc3QodCk7RG4ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzO2lmKHImJiF0aGlzLl9fY2hhaW5fXyl7dmFyIG89dGhpcy52YWx1ZSgpO3JldHVybiBlLmFwcGx5KEhhKG8pP286W10sdCl9cmV0dXJuIHRoaXNbbl0oKGZ1bmN0aW9uKG4pe3JldHVybiBlLmFwcGx5KEhhKG4pP246W10sdCl9KSl9fSkpLF9yKEhuLnByb3RvdHlwZSwoZnVuY3Rpb24odCxlKXt2YXIgbj1EbltlXTtpZihuKXt2YXIgcj1uLm5hbWUrXCJcIjtOdC5jYWxsKExuLHIpfHwoTG5bcl09W10pLExuW3JdLnB1c2goe25hbWU6ZSxmdW5jOm59KX19KSksTG5bRm8obywyKS5uYW1lXT1be25hbWU6XCJ3cmFwcGVyXCIsZnVuYzpvfV0sSG4ucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEhuKHRoaXMuX193cmFwcGVkX18pO3JldHVybiB0Ll9fYWN0aW9uc19fPWtvKHRoaXMuX19hY3Rpb25zX18pLHQuX19kaXJfXz10aGlzLl9fZGlyX18sdC5fX2ZpbHRlcmVkX189dGhpcy5fX2ZpbHRlcmVkX18sdC5fX2l0ZXJhdGVlc19fPWtvKHRoaXMuX19pdGVyYXRlZXNfXyksdC5fX3Rha2VDb3VudF9fPXRoaXMuX190YWtlQ291bnRfXyx0Ll9fdmlld3NfXz1rbyh0aGlzLl9fdmlld3NfXyksdH0sSG4ucHJvdG90eXBlLnJldmVyc2U9ZnVuY3Rpb24oKXtpZih0aGlzLl9fZmlsdGVyZWRfXyl7dmFyIHQ9bmV3IEhuKHRoaXMpO3QuX19kaXJfXz0tMSx0Ll9fZmlsdGVyZWRfXz0hMH1lbHNlKHQ9dGhpcy5jbG9uZSgpKS5fX2Rpcl9fKj0tMTtyZXR1cm4gdH0sSG4ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fX3dyYXBwZWRfXy52YWx1ZSgpLGU9dGhpcy5fX2Rpcl9fLG49SGEodCkscj1lPDAsbz1uP3QubGVuZ3RoOjAsaT1mdW5jdGlvbih0LGUsbil7dmFyIHI9LTEsbz1uLmxlbmd0aDtmb3IoOysrcjxvOyl7dmFyIGk9bltyXSxhPWkuc2l6ZTtzd2l0Y2goaS50eXBlKXtjYXNlXCJkcm9wXCI6dCs9YTticmVhaztjYXNlXCJkcm9wUmlnaHRcIjplLT1hO2JyZWFrO2Nhc2VcInRha2VcIjplPXduKGUsdCthKTticmVhaztjYXNlXCJ0YWtlUmlnaHRcIjp0PWJuKHQsZS1hKX19cmV0dXJue3N0YXJ0OnQsZW5kOmV9fSgwLG8sdGhpcy5fX3ZpZXdzX18pLGE9aS5zdGFydCxzPWkuZW5kLHU9cy1hLGw9cj9zOmEtMSxjPXRoaXMuX19pdGVyYXRlZXNfXyxmPWMubGVuZ3RoLGQ9MCxoPXduKHUsdGhpcy5fX3Rha2VDb3VudF9fKTtpZighbnx8IXImJm89PXUmJmg9PXUpcmV0dXJuIHlvKHQsdGhpcy5fX2FjdGlvbnNfXyk7dmFyIHA9W107dDpmb3IoO3UtLSYmZDxoOyl7Zm9yKHZhciBnPS0xLHk9dFtsKz1lXTsrK2c8Zjspe3ZhciBtPWNbZ10sdj1tLml0ZXJhdGVlLGI9bS50eXBlLHc9dih5KTtpZigyPT1iKXk9dztlbHNlIGlmKCF3KXtpZigxPT1iKWNvbnRpbnVlIHQ7YnJlYWsgdH19cFtkKytdPXl9cmV0dXJuIHB9LERuLnByb3RvdHlwZS5hdD1nYSxEbi5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oKXtyZXR1cm4gaGEodGhpcyl9LERuLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFuKHRoaXMudmFsdWUoKSx0aGlzLl9fY2hhaW5fXyl9LERuLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dGhpcy5fX3ZhbHVlc19fPT09byYmKHRoaXMuX192YWx1ZXNfXz1ocyh0aGlzLnZhbHVlKCkpKTt2YXIgdD10aGlzLl9faW5kZXhfXz49dGhpcy5fX3ZhbHVlc19fLmxlbmd0aDtyZXR1cm57ZG9uZTp0LHZhbHVlOnQ/bzp0aGlzLl9fdmFsdWVzX19bdGhpcy5fX2luZGV4X18rK119fSxEbi5wcm90b3R5cGUucGxhbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dGhpcztuIGluc3RhbmNlb2Ygem47KXt2YXIgcj0kaShuKTtyLl9faW5kZXhfXz0wLHIuX192YWx1ZXNfXz1vLGU/aS5fX3dyYXBwZWRfXz1yOmU9cjt2YXIgaT1yO249bi5fX3dyYXBwZWRfX31yZXR1cm4gaS5fX3dyYXBwZWRfXz10LGV9LERuLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fX3dyYXBwZWRfXztpZih0IGluc3RhbmNlb2YgSG4pe3ZhciBlPXQ7cmV0dXJuIHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoJiYoZT1uZXcgSG4odGhpcykpLChlPWUucmV2ZXJzZSgpKS5fX2FjdGlvbnNfXy5wdXNoKHtmdW5jOnBhLGFyZ3M6W2VhXSx0aGlzQXJnOm99KSxuZXcgcW4oZSx0aGlzLl9fY2hhaW5fXyl9cmV0dXJuIHRoaXMudGhydShlYSl9LERuLnByb3RvdHlwZS50b0pTT049RG4ucHJvdG90eXBlLnZhbHVlT2Y9RG4ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHlvKHRoaXMuX193cmFwcGVkX18sdGhpcy5fX2FjdGlvbnNfXyl9LERuLnByb3RvdHlwZS5maXJzdD1Ebi5wcm90b3R5cGUuaGVhZCxadCYmKERuLnByb3RvdHlwZVtadF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLERufSgpO2dlLl89dm4sKHI9ZnVuY3Rpb24oKXtyZXR1cm4gdm59LmNhbGwoZSxuLGUsdCkpPT09b3x8KHQuZXhwb3J0cz1yKX0uY2FsbCh0aGlzKX0sMzAwOih0LGUsbik9Pnt2YXIgcixvO3Q9bi5ubWQodCksZnVuY3Rpb24oZSl7ZS5ydW5uaW5nSW5Ob2RlSlM9ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MudmVyc2lvbnMmJlwic3RyaW5nXCI9PXR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGV9LGUucnVubmluZ0luTWFpbk5vZGVKU01vZHVsZT1mdW5jdGlvbigpe3JldHVybiBlLnJ1bm5pbmdJbk5vZGVKUygpJiZuLmNbbi5zXT09PXR9LGUuY29tbW9uSlNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdC5leHBvcnRzfSxlLnJ1bm5pbmdJbldlYldvcmtlcj1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cmJlwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzZWxmLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHNlbGYuY2xvc2V9LGUucnVubmluZ0luTm9kZUNoaWxkUHJvY2Vzcz1mdW5jdGlvbigpe3JldHVybiBlLnJ1bm5pbmdJbk5vZGVKUygpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwcm9jZXNzLnNlbmR9LGUucnVubmluZ0luTnVsbE9yaWdpbj1mdW5jdGlvbigpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJlwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cubG9jYXRpb24mJlwib2JqZWN0XCI9PXR5cGVvZiBkb2N1bWVudCYmKFwiaHR0cDpcIiE9PWRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sJiZcImh0dHBzOlwiIT09ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wpfSxlLndlYldvcmtlcnNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBXb3JrZXImJiFlLnJ1bm5pbmdJbk51bGxPcmlnaW4oKSYmKCFlLnJ1bm5pbmdJbk5vZGVKUygpJiYhKG5hdmlnYXRvciYmbmF2aWdhdG9yLnVzZXJBZ2VudCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiQW5kcm9pZCA0LjNcIik+PTApKX0sZS5sb2c9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSksXCJvYmplY3RcIj09dHlwZW9mIGNvbnNvbGUmJihjb25zb2xlLmxvZyh0KSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZG9jdW1lbnQmJihkb2N1bWVudC5ib2R5LmlubmVySFRNTCs9dCtcIjxici8+XCIpKX0sZS5jcmVhdGVFcnJvck1lc3NhZ2U9ZnVuY3Rpb24odCxuKXtpZih2b2lkIDA9PT1uJiYobj1cIlVuaGFuZGxlZCBleGNlcHRpb25cIiksbnVsbD09dClyZXR1cm4gbjtpZihuKz1cIjogXCIsXCJvYmplY3RcIj09dHlwZW9mIHQuY29udGVudCl7aWYoZS5ydW5uaW5nSW5Ob2RlSlMoKSlyZXR1cm4gbit0LmNvbnRlbnQuc3RhY2s7dmFyIHI9SlNPTi5zdHJpbmdpZnkodC5jb250ZW50KTtyZXR1cm5cInt9XCIhPT1yP24rcjpuK3QuY29udGVudH1yZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdC5jb250ZW50P24rdC5jb250ZW50Om4rdH0sZS5wcmludEV4Y2VwdGlvbkFuZFN0YWNrVHJhY2VUb0NvbnNvbGU9ZnVuY3Rpb24odCxuKXt2b2lkIDA9PT1uJiYobj1cIlVuaGFuZGxlZCBleGNlcHRpb25cIiksZS5sb2coZS5jcmVhdGVFcnJvck1lc3NhZ2UodCxuKSl9LGUuZ2V0R2xvYmFsT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIG4uZz9uLmc6XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJvYmplY3RcIj09dHlwZW9mIHNlbGY/c2VsZjp7fX0sZS50b1N0cmluZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGUuY29tbW9uSlNBdmFpbGFibGUoKSYmKHQuZXhwb3J0cz1lKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50OEFycmF5JiYwIT09bmV3IFVpbnQ4QXJyYXkoMSkuc3ViYXJyYXkoMSkuYnl0ZUxlbmd0aCl7dmFyIGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8ZT9lOnQ+bj9uOnR9O3R8PTAsZXw9MCxhcmd1bWVudHMubGVuZ3RoPDEmJih0PTApLGFyZ3VtZW50cy5sZW5ndGg8MiYmKGU9dGhpcy5sZW5ndGgpLHQ8MCYmKHQ9dGhpcy5sZW5ndGgrdCksZTwwJiYoZT10aGlzLmxlbmd0aCtlKSx0PW4odCwwLHRoaXMubGVuZ3RoKTt2YXIgcj0oZT1uKGUsMCx0aGlzLmxlbmd0aCkpLXQ7cmV0dXJuIHI8MCYmKHI9MCksbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3QqdGhpcy5CWVRFU19QRVJfRUxFTUVOVCxyKX0sbj1bXCJJbnQ4QXJyYXlcIixcIlVpbnQ4QXJyYXlcIixcIlVpbnQ4Q2xhbXBlZEFycmF5XCIsXCJJbnQxNkFycmF5XCIsXCJVaW50MTZBcnJheVwiLFwiSW50MzJBcnJheVwiLFwiVWludDMyQXJyYXlcIixcIkZsb2F0MzJBcnJheVwiLFwiRmxvYXQ2NEFycmF5XCJdLHI9dm9pZCAwO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3c/cj13aW5kb3c6XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJihyPXNlbGYpLHZvaWQgMCE9PXIpZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspcltuW29dXSYmKHJbbltvXV0ucHJvdG90eXBlLnN1YmFycmF5PWUpfX0ocnx8KHI9e30pKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuY29tcHJlc3NBc3luYz1mdW5jdGlvbihlLG4scil7dmFyIG89bmV3IHQuVGltZXIsaT1uZXcgdC5Db21wcmVzc29yO2lmKCFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wcmVzc0FzeW5jOiBObyBjYWxsYmFjayBhcmd1bWVudCBnaXZlblwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSllPXQuZW5jb2RlVVRGOChlKTtlbHNlIGlmKG51bGw9PWV8fCEoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXJldHVybiB2b2lkIHIodm9pZCAwLG5ldyBUeXBlRXJyb3IoXCJjb21wcmVzc0FzeW5jOiBJbnZhbGlkIGlucHV0IGFyZ3VtZW50LCBvbmx5ICdzdHJpbmcnIGFuZCAnVWludDhBcnJheScgYXJlIHN1cHBvcnRlZFwiKSk7dmFyIGE9dC5BcnJheVRvb2xzLnNwbGl0Qnl0ZUFycmF5KGUsbi5ibG9ja1NpemUpLHM9W10sdT1mdW5jdGlvbihlKXtpZihlPGEubGVuZ3RoKXt2YXIgbD12b2lkIDA7dHJ5e2w9aS5jb21wcmVzc0Jsb2NrKGFbZV0pfWNhdGNoKHQpe3JldHVybiB2b2lkIHIodm9pZCAwLHQpfXMucHVzaChsKSxvLmdldEVsYXBzZWRUaW1lKCk8PTIwP3UoZSsxKToodC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiB1KGUrMSl9KSksby5yZXN0YXJ0KCkpfWVsc2V7dmFyIGM9dC5BcnJheVRvb2xzLmNvbmNhdFVpbnQ4QXJyYXlzKHMpO3QuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT10LkNvbXByZXNzaW9uQ29tbW9uLmVuY29kZUNvbXByZXNzZWRCeXRlcyhjLG4ub3V0cHV0RW5jb2RpbmcpfWNhdGNoKHQpe3JldHVybiB2b2lkIHIodm9pZCAwLHQpfXQuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXtyZXR1cm4gcihlKX0pKX0pKX19O3QuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXtyZXR1cm4gdSgwKX0pKX0sZS5jcmVhdGVDb21wcmVzc2lvblN0cmVhbT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0LkNvbXByZXNzb3Iscj1uZXcobig5OSkuVHJhbnNmb3JtKSh7ZGVjb2RlU3RyaW5nczohMCxoaWdoV2F0ZXJNYXJrOjY1NTM2fSk7cmV0dXJuIHIuX3RyYW5zZm9ybT1mdW5jdGlvbihuLG8saSl7dmFyIGE7dHJ5e2E9dC5CdWZmZXJUb29scy51aW50OEFycmF5VG9CdWZmZXIoZS5jb21wcmVzc0Jsb2NrKHQuQnVmZmVyVG9vbHMuYnVmZmVyVG9VaW50OEFycmF5KG4pKSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgci5lbWl0KFwiZXJyb3JcIix0KX1yLnB1c2goYSksaSgpfSxyfSxlfSgpO3QuQXN5bmNDb21wcmVzc29yPWV9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmRlY29tcHJlc3NBc3luYz1mdW5jdGlvbihlLG4scil7aWYoIXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlY29tcHJlc3NBc3luYzogTm8gY2FsbGJhY2sgYXJndW1lbnQgZ2l2ZW5cIik7dmFyIG89bmV3IHQuVGltZXI7dHJ5e2U9dC5Db21wcmVzc2lvbkNvbW1vbi5kZWNvZGVDb21wcmVzc2VkQnl0ZXMoZSxuLmlucHV0RW5jb2RpbmcpfWNhdGNoKHQpe3JldHVybiB2b2lkIHIodm9pZCAwLHQpfXZhciBpPW5ldyB0LkRlY29tcHJlc3NvcixhPXQuQXJyYXlUb29scy5zcGxpdEJ5dGVBcnJheShlLG4uYmxvY2tTaXplKSxzPVtdLHU9ZnVuY3Rpb24oZSl7aWYoZTxhLmxlbmd0aCl7dmFyIGw9dm9pZCAwO3RyeXtsPWkuZGVjb21wcmVzc0Jsb2NrKGFbZV0pfWNhdGNoKHQpe3JldHVybiB2b2lkIHIodm9pZCAwLHQpfXMucHVzaChsKSxvLmdldEVsYXBzZWRUaW1lKCk8PTIwP3UoZSsxKToodC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiB1KGUrMSl9KSksby5yZXN0YXJ0KCkpfWVsc2V7dmFyIGM9dC5BcnJheVRvb2xzLmNvbmNhdFVpbnQ4QXJyYXlzKHMpO3QuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT10LkNvbXByZXNzaW9uQ29tbW9uLmVuY29kZURlY29tcHJlc3NlZEJ5dGVzKGMsbi5vdXRwdXRFbmNvZGluZyl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiByKGUpfSkpfSkpfX07dC5lbnF1ZXVlSW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiB1KDApfSkpfSxlLmNyZWF0ZURlY29tcHJlc3Npb25TdHJlYW09ZnVuY3Rpb24oKXt2YXIgZT1uZXcgdC5EZWNvbXByZXNzb3Iscj1uZXcobig5OSkuVHJhbnNmb3JtKSh7ZGVjb2RlU3RyaW5nczohMCxoaWdoV2F0ZXJNYXJrOjY1NTM2fSk7cmV0dXJuIHIuX3RyYW5zZm9ybT1mdW5jdGlvbihuLG8saSl7dmFyIGE7dHJ5e2E9dC5CdWZmZXJUb29scy51aW50OEFycmF5VG9CdWZmZXIoZS5kZWNvbXByZXNzQmxvY2sodC5CdWZmZXJUb29scy5idWZmZXJUb1VpbnQ4QXJyYXkobikpKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByLmVtaXQoXCJlcnJvclwiLHQpfXIucHVzaChhKSxpKCl9LHJ9LGV9KCk7dC5Bc3luY0RlY29tcHJlc3Nvcj1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbihlKXtlLmNvbXByZXNzQXN5bmM9ZnVuY3Rpb24odCxuLHIpe2lmKFwiQnl0ZUFycmF5XCIhPW4uaW5wdXRFbmNvZGluZ3x8dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe3ZhciBvPXt0b2tlbjpNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksdHlwZTpcImNvbXByZXNzXCIsZGF0YTp0LGlucHV0RW5jb2Rpbmc6bi5pbnB1dEVuY29kaW5nLG91dHB1dEVuY29kaW5nOm4ub3V0cHV0RW5jb2Rpbmd9LGk9ZnVuY3Rpb24odCl7dmFyIG49dC5kYXRhO24mJm4udG9rZW49PW8udG9rZW4mJihlLmdsb2JhbFdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGkpLFwiZXJyb3JcIj09bi50eXBlP3Iodm9pZCAwLG5ldyBFcnJvcihuLmVycm9yKSk6cihuLmRhdGEpKX07ZS5nbG9iYWxXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpKSxlLmdsb2JhbFdvcmtlci5wb3N0TWVzc2FnZShvLFtdKX1lbHNlIHIodm9pZCAwLG5ldyBUeXBlRXJyb3IoXCJjb21wcmVzc0FzeW5jOiBpbnB1dCBpcyBub3QgYSBVaW50OEFycmF5XCIpKX0sZS5kZWNvbXByZXNzQXN5bmM9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPXt0b2tlbjpNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksdHlwZTpcImRlY29tcHJlc3NcIixkYXRhOnQsaW5wdXRFbmNvZGluZzpuLmlucHV0RW5jb2Rpbmcsb3V0cHV0RW5jb2Rpbmc6bi5vdXRwdXRFbmNvZGluZ30saT1mdW5jdGlvbih0KXt2YXIgbj10LmRhdGE7biYmbi50b2tlbj09by50b2tlbiYmKGUuZ2xvYmFsV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsaSksXCJlcnJvclwiPT1uLnR5cGU/cih2b2lkIDAsbmV3IEVycm9yKG4uZXJyb3IpKTpyKG4uZGF0YSkpfTtlLmdsb2JhbFdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGkpLGUuZ2xvYmFsV29ya2VyLnBvc3RNZXNzYWdlKG8sW10pfSxlLmluc3RhbGxXZWJXb3JrZXJJZk5lZWRlZD1mdW5jdGlvbigpe1wib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZ2b2lkIDA9PT1zZWxmLmRvY3VtZW50JiZudWxsIT1zZWxmLmFkZEV2ZW50TGlzdGVuZXImJihzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YTtpZihcImNvbXByZXNzXCI9PW4udHlwZSl7dmFyIHI9dm9pZCAwO3RyeXtyPXQuY29tcHJlc3Mobi5kYXRhLHtvdXRwdXRFbmNvZGluZzpuLm91dHB1dEVuY29kaW5nfSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgc2VsZi5wb3N0TWVzc2FnZSh7dG9rZW46bi50b2tlbix0eXBlOlwiZXJyb3JcIixlcnJvcjp0LmNyZWF0ZUVycm9yTWVzc2FnZShlKX0sW10pfShvPXt0b2tlbjpuLnRva2VuLHR5cGU6XCJjb21wcmVzc2lvblJlc3VsdFwiLGRhdGE6cixlbmNvZGluZzpuLm91dHB1dEVuY29kaW5nfSkuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJi0xPT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgMTBcIik/c2VsZi5wb3N0TWVzc2FnZShvLFtvLmRhdGEuYnVmZmVyXSk6c2VsZi5wb3N0TWVzc2FnZShvLFtdKX1lbHNlIGlmKFwiZGVjb21wcmVzc1wiPT1uLnR5cGUpe3ZhciBvLGk9dm9pZCAwO3RyeXtpPXQuZGVjb21wcmVzcyhuLmRhdGEse2lucHV0RW5jb2Rpbmc6bi5pbnB1dEVuY29kaW5nLG91dHB1dEVuY29kaW5nOm4ub3V0cHV0RW5jb2Rpbmd9KX1jYXRjaChlKXtyZXR1cm4gdm9pZCBzZWxmLnBvc3RNZXNzYWdlKHt0b2tlbjpuLnRva2VuLHR5cGU6XCJlcnJvclwiLGVycm9yOnQuY3JlYXRlRXJyb3JNZXNzYWdlKGUpfSxbXSl9KG89e3Rva2VuOm4udG9rZW4sdHlwZTpcImRlY29tcHJlc3Npb25SZXN1bHRcIixkYXRhOmksZW5jb2Rpbmc6bi5vdXRwdXRFbmNvZGluZ30pLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYtMT09PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDEwXCIpP3NlbGYucG9zdE1lc3NhZ2Uobyxbby5kYXRhLmJ1ZmZlcl0pOnNlbGYucG9zdE1lc3NhZ2UobyxbXSl9fSkpLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsKGZ1bmN0aW9uKGUpe3QubG9nKHQuY3JlYXRlRXJyb3JNZXNzYWdlKGUuZXJyb3IsXCJVbmV4cGVjdGVkIExaVVRGOCBXZWJXb3JrZXIgZXhjZXB0aW9uXCIpKX0pKSl9LGUuY3JlYXRlR2xvYmFsV29ya2VySWZOZWVkZWQ9ZnVuY3Rpb24oKXtpZihlLmdsb2JhbFdvcmtlcilyZXR1cm4hMDtpZighdC53ZWJXb3JrZXJzQXZhaWxhYmxlKCkpcmV0dXJuITE7aWYoIWUuc2NyaXB0VVJJJiZcIm9iamVjdFwiPT10eXBlb2YgZG9jdW1lbnQpe3ZhciBuPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibHp1dGY4XCIpO251bGwhPW4mJihlLnNjcmlwdFVSST1uLmdldEF0dHJpYnV0ZShcInNyY1wiKXx8dm9pZCAwKX1yZXR1cm4hIWUuc2NyaXB0VVJJJiYoZS5nbG9iYWxXb3JrZXI9bmV3IFdvcmtlcihlLnNjcmlwdFVSSSksITApfSxlLnRlcm1pbmF0ZT1mdW5jdGlvbigpe2UuZ2xvYmFsV29ya2VyJiYoZS5nbG9iYWxXb3JrZXIudGVybWluYXRlKCksZS5nbG9iYWxXb3JrZXI9dm9pZCAwKX19KGU9dC5XZWJXb3JrZXJ8fCh0LldlYldvcmtlcj17fSkpLGUuaW5zdGFsbFdlYldvcmtlcklmTmVlZGVkKCl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXt0aGlzLmNvbnRhaW5lcj10LHRoaXMuc3RhcnRQb3NpdGlvbj1lLHRoaXMubGVuZ3RoPW59cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250YWluZXJbdGhpcy5zdGFydFBvc2l0aW9uK3RdfSx0LnByb3RvdHlwZS5nZXRJblJldmVyc2VkT3JkZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGFpbmVyW3RoaXMuc3RhcnRQb3NpdGlvbit0aGlzLmxlbmd0aC0xLXRdfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmNvbnRhaW5lclt0aGlzLnN0YXJ0UG9zaXRpb24rdF09ZX0sdH0oKTt0LkFycmF5U2VnbWVudD1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt0LmNvcHlFbGVtZW50cz1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcig7by0tOyluW3IrK109dFtlKytdfSx0Lnplcm9FbGVtZW50cz1mdW5jdGlvbih0LGUsbil7Zm9yKDtuLS07KXRbZSsrXT0wfSx0LmNvdW50Tm9uemVyb1ZhbHVlc0luQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO248dC5sZW5ndGg7bisrKXRbbl0mJmUrKztyZXR1cm4gZX0sdC50cnVuY2F0ZVN0YXJ0aW5nRWxlbWVudHM9ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDw9ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInRydW5jYXRlU3RhcnRpbmdFbGVtZW50czogUmVxdWVzdGVkIGxlbmd0aCBzaG91bGQgYmUgc21hbGxlciB0aGFuIGFycmF5IGxlbmd0aFwiKTtmb3IodmFyIG49dC5sZW5ndGgtZSxyPTA7cjxlO3IrKyl0W3JdPXRbbityXTt0Lmxlbmd0aD1lfSx0LmRvdWJsZUJ5dGVBcnJheUNhcGFjaXR5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50OEFycmF5KDIqdC5sZW5ndGgpO3JldHVybiBlLnNldCh0KSxlfSx0LmNvbmNhdFVpbnQ4QXJyYXlzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MCxyPXQ7bjxyLmxlbmd0aDtuKyspe2UrPSh1PXJbbl0pLmxlbmd0aH1mb3IodmFyIG89bmV3IFVpbnQ4QXJyYXkoZSksaT0wLGE9MCxzPXQ7YTxzLmxlbmd0aDthKyspe3ZhciB1PXNbYV07by5zZXQodSxpKSxpKz11Lmxlbmd0aH1yZXR1cm4gb30sdC5zcGxpdEJ5dGVBcnJheT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDspe3ZhciBvPU1hdGgubWluKGUsdC5sZW5ndGgtcik7bi5wdXNoKHQuc3ViYXJyYXkocixyK28pKSxyKz1vfXJldHVybiBufX0odC5BcnJheVRvb2xzfHwodC5BcnJheVRvb2xzPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpe3QuY29udmVydFRvVWludDhBcnJheUlmTmVlZGVkPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIEJ1ZmZlciYmQnVmZmVyLmlzQnVmZmVyKGUpP3QuYnVmZmVyVG9VaW50OEFycmF5KGUpOmV9LHQudWludDhBcnJheVRvQnVmZmVyPWZ1bmN0aW9uKHQpe2lmKEJ1ZmZlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KXt2YXIgZT1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsQnVmZmVyLnByb3RvdHlwZSksZX1mb3IodmFyIG49dC5sZW5ndGgscj1uZXcgQnVmZmVyKG4pLG89MDtvPG47bysrKXJbb109dFtvXTtyZXR1cm4gcn0sdC5idWZmZXJUb1VpbnQ4QXJyYXk9ZnVuY3Rpb24odCl7aWYoQnVmZmVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIG5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpO2Zvcih2YXIgZT10Lmxlbmd0aCxuPW5ldyBVaW50OEFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09dFtyXTtyZXR1cm4gbn19KHQuQnVmZmVyVG9vbHN8fCh0LkJ1ZmZlclRvb2xzPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpe2UuZ2V0Q3JvcHBlZEJ1ZmZlcj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKTt2YXIgbz1uZXcgVWludDhBcnJheShuK3IpO3JldHVybiBvLnNldCh0LnN1YmFycmF5KGUsZStuKSksb30sZS5nZXRDcm9wcGVkQW5kQXBwZW5kZWRCeXRlQXJyYXk9ZnVuY3Rpb24oZSxuLHIsbyl7cmV0dXJuIHQuQXJyYXlUb29scy5jb25jYXRVaW50OEFycmF5cyhbZS5zdWJhcnJheShuLG4rciksb10pfSxlLmRldGVjdENvbXByZXNzaW9uU291cmNlRW5jb2Rpbmc9ZnVuY3Rpb24odCl7aWYobnVsbD09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGV0ZWN0Q29tcHJlc3Npb25Tb3VyY2VFbmNvZGluZzogaW5wdXQgaXMgbnVsbCBvciB1bmRlZmluZWRcIik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuXCJTdHJpbmdcIjtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheXx8XCJmdW5jdGlvblwiPT10eXBlb2YgQnVmZmVyJiZCdWZmZXIuaXNCdWZmZXIodCkpcmV0dXJuXCJCeXRlQXJyYXlcIjt0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGV0ZWN0Q29tcHJlc3Npb25Tb3VyY2VFbmNvZGluZzogaW5wdXQgbXVzdCBiZSBvZiB0eXBlICdzdHJpbmcnLCAnVWludDhBcnJheScgb3IgJ0J1ZmZlcidcIil9LGUuZW5jb2RlQ29tcHJlc3NlZEJ5dGVzPWZ1bmN0aW9uKGUsbil7c3dpdGNoKG4pe2Nhc2VcIkJ5dGVBcnJheVwiOnJldHVybiBlO2Nhc2VcIkJ1ZmZlclwiOnJldHVybiB0LkJ1ZmZlclRvb2xzLnVpbnQ4QXJyYXlUb0J1ZmZlcihlKTtjYXNlXCJCYXNlNjRcIjpyZXR1cm4gdC5lbmNvZGVCYXNlNjQoZSk7Y2FzZVwiQmluYXJ5U3RyaW5nXCI6cmV0dXJuIHQuZW5jb2RlQmluYXJ5U3RyaW5nKGUpO2Nhc2VcIlN0b3JhZ2VCaW5hcnlTdHJpbmdcIjpyZXR1cm4gdC5lbmNvZGVTdG9yYWdlQmluYXJ5U3RyaW5nKGUpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kZUNvbXByZXNzZWRCeXRlczogaW52YWxpZCBvdXRwdXQgZW5jb2RpbmcgcmVxdWVzdGVkXCIpfX0sZS5kZWNvZGVDb21wcmVzc2VkQnl0ZXM9ZnVuY3Rpb24oZSxuKXtpZihudWxsPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvZGVDb21wcmVzc2VkRGF0YTogSW5wdXQgaXMgbnVsbCBvciB1bmRlZmluZWRcIik7c3dpdGNoKG4pe2Nhc2VcIkJ5dGVBcnJheVwiOmNhc2VcIkJ1ZmZlclwiOnZhciByPXQuQnVmZmVyVG9vbHMuY29udmVydFRvVWludDhBcnJheUlmTmVlZGVkKGUpO2lmKCEociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvZGVDb21wcmVzc2VkRGF0YTogJ0J5dGVBcnJheScgb3IgJ0J1ZmZlcicgaW5wdXQgdHlwZSB3YXMgc3BlY2lmaWVkIGJ1dCBpbnB1dCBpcyBub3QgYSBVaW50OEFycmF5IG9yIEJ1ZmZlclwiKTtyZXR1cm4gcjtjYXNlXCJCYXNlNjRcIjppZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVjb2RlQ29tcHJlc3NlZERhdGE6ICdCYXNlNjQnIGlucHV0IHR5cGUgd2FzIHNwZWNpZmllZCBidXQgaW5wdXQgaXMgbm90IGEgc3RyaW5nXCIpO3JldHVybiB0LmRlY29kZUJhc2U2NChlKTtjYXNlXCJCaW5hcnlTdHJpbmdcIjppZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVjb2RlQ29tcHJlc3NlZERhdGE6ICdCaW5hcnlTdHJpbmcnIGlucHV0IHR5cGUgd2FzIHNwZWNpZmllZCBidXQgaW5wdXQgaXMgbm90IGEgc3RyaW5nXCIpO3JldHVybiB0LmRlY29kZUJpbmFyeVN0cmluZyhlKTtjYXNlXCJTdG9yYWdlQmluYXJ5U3RyaW5nXCI6aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlY29kZUNvbXByZXNzZWREYXRhOiAnU3RvcmFnZUJpbmFyeVN0cmluZycgaW5wdXQgdHlwZSB3YXMgc3BlY2lmaWVkIGJ1dCBpbnB1dCBpcyBub3QgYSBzdHJpbmdcIik7cmV0dXJuIHQuZGVjb2RlU3RvcmFnZUJpbmFyeVN0cmluZyhlKTtkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWNvZGVDb21wcmVzc2VkRGF0YTogaW52YWxpZCBpbnB1dCBlbmNvZGluZyByZXF1ZXN0ZWQ6ICdcIi5jb25jYXQobixcIidcIikpfX0sZS5lbmNvZGVEZWNvbXByZXNzZWRCeXRlcz1mdW5jdGlvbihlLG4pe3N3aXRjaChuKXtjYXNlXCJTdHJpbmdcIjpyZXR1cm4gdC5kZWNvZGVVVEY4KGUpO2Nhc2VcIkJ5dGVBcnJheVwiOnJldHVybiBlO2Nhc2VcIkJ1ZmZlclwiOmlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIEJ1ZmZlcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiZW5jb2RlRGVjb21wcmVzc2VkQnl0ZXM6IGEgJ0J1ZmZlcicgdHlwZSB3YXMgc3BlY2lmaWVkIGJ1dCBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoZSBjdXJyZW50IGVudmlybm1lbnRcIik7cmV0dXJuIHQuQnVmZmVyVG9vbHMudWludDhBcnJheVRvQnVmZmVyKGUpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcImVuY29kZURlY29tcHJlc3NlZEJ5dGVzOiBpbnZhbGlkIG91dHB1dCBlbmNvZGluZyByZXF1ZXN0ZWRcIil9fX0odC5Db21wcmVzc2lvbkNvbW1vbnx8KHQuQ29tcHJlc3Npb25Db21tb249e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24oZSl7dmFyIG4scj1bXTtlLmVucXVldWVJbW1lZGlhdGU9ZnVuY3Rpb24odCl7ci5wdXNoKHQpLDE9PT1yLmxlbmd0aCYmbigpfSxlLmluaXRpYWxpemVTY2hlZHVsZXI9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLG49cjtlPG4ubGVuZ3RoO2UrKyl7dmFyIG89bltlXTt0cnl7by5jYWxsKHZvaWQgMCl9Y2F0Y2goZSl7dC5wcmludEV4Y2VwdGlvbkFuZFN0YWNrVHJhY2VUb0NvbnNvbGUoZSxcImVucXVldWVJbW1lZGlhdGUgZXhjZXB0aW9uXCIpfX1yLmxlbmd0aD0wfTtpZih0LnJ1bm5pbmdJbk5vZGVKUygpKW49ZnVuY3Rpb24oKXtyZXR1cm4gc2V0SW1tZWRpYXRlKChmdW5jdGlvbigpe3JldHVybiBlKCl9KSl9O2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmXCJmdW5jdGlvblwiPT10eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5wb3N0TWVzc2FnZSl7dmFyIG8saT1cImVucXVldWVJbW1lZGlhdGUtXCIrTWF0aC5yYW5kb20oKS50b1N0cmluZygpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLChmdW5jdGlvbih0KXt0LmRhdGE9PT1pJiZlKCl9KSksbz10LnJ1bm5pbmdJbk51bGxPcmlnaW4oKT9cIipcIjp3aW5kb3cubG9jYXRpb24uaHJlZixuPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5wb3N0TWVzc2FnZShpLG8pfX1lbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIE1lc3NhZ2VDaGFubmVsJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBNZXNzYWdlUG9ydCl7dmFyIGE9bmV3IE1lc3NhZ2VDaGFubmVsO2EucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0sbj1mdW5jdGlvbigpe3JldHVybiBhLnBvcnQyLnBvc3RNZXNzYWdlKDApfX1lbHNlIG49ZnVuY3Rpb24oKXtyZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSksMCl9fSxlLmluaXRpYWxpemVTY2hlZHVsZXIoKX0oZT10LkV2ZW50TG9vcHx8KHQuRXZlbnRMb29wPXt9KSksdC5lbnF1ZXVlSW1tZWRpYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBlLmVucXVldWVJbW1lZGlhdGUodCl9fShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt0Lm92ZXJyaWRlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZXh0ZW5kKGUsbil9LHQuZXh0ZW5kPWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwib2JqIGlzIG51bGwgb3IgdW5kZWZpbmVkXCIpO2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJvYmogaXMgbm90IGFuIG9iamVjdFwiKTtpZihudWxsPT1lJiYoZT17fSksXCJvYmplY3RcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5ld1Byb3BlcnRpZXMgaXMgbm90IGFuIG9iamVjdFwiKTtpZihudWxsIT1lKWZvcih2YXIgbiBpbiBlKXRbbl09ZVtuXTtyZXR1cm4gdH19KHQuT2JqZWN0VG9vbHN8fCh0Lk9iamVjdFRvb2xzPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dC5nZXRSYW5kb21JbnRlZ2VySW5SYW5nZT1mdW5jdGlvbih0LGUpe3JldHVybiB0K01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooZS10KSl9LHQuZ2V0UmFuZG9tVVRGMTZTdHJpbmdPZkxlbmd0aD1mdW5jdGlvbihlKXtmb3IodmFyIG49XCJcIixyPTA7cjxlO3IrKyl7dmFyIG89dm9pZCAwO2Rve289dC5nZXRSYW5kb21JbnRlZ2VySW5SYW5nZSgwLDExMTQxMTIpfXdoaWxlKG8+PTU1Mjk2JiZvPD01NzM0Myk7bis9dC5FbmNvZGluZy5Db2RlUG9pbnQuZGVjb2RlVG9TdHJpbmcobyl9cmV0dXJuIG59fShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD0xMDI0KSx0aGlzLm91dHB1dEJ1ZmZlckNhcGFjaXR5PXQsdGhpcy5vdXRwdXRQb3NpdGlvbj0wLHRoaXMub3V0cHV0U3RyaW5nPVwiXCIsdGhpcy5vdXRwdXRCdWZmZXI9bmV3IFVpbnQxNkFycmF5KHRoaXMub3V0cHV0QnVmZmVyQ2FwYWNpdHkpfXJldHVybiB0LnByb3RvdHlwZS5hcHBlbmRDaGFyQ29kZT1mdW5jdGlvbih0KXt0aGlzLm91dHB1dEJ1ZmZlclt0aGlzLm91dHB1dFBvc2l0aW9uKytdPXQsdGhpcy5vdXRwdXRQb3NpdGlvbj09PXRoaXMub3V0cHV0QnVmZmVyQ2FwYWNpdHkmJnRoaXMuZmx1c2hCdWZmZXJUb091dHB1dFN0cmluZygpfSx0LnByb3RvdHlwZS5hcHBlbmRDaGFyQ29kZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMuYXBwZW5kQ2hhckNvZGUodFtlXSl9LHQucHJvdG90eXBlLmFwcGVuZFN0cmluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy5hcHBlbmRDaGFyQ29kZSh0LmNoYXJDb2RlQXQoZSkpfSx0LnByb3RvdHlwZS5hcHBlbmRDb2RlUG9pbnQ9ZnVuY3Rpb24odCl7aWYodDw9NjU1MzUpdGhpcy5hcHBlbmRDaGFyQ29kZSh0KTtlbHNle2lmKCEodDw9MTExNDExMSkpdGhyb3cgbmV3IEVycm9yKFwiYXBwZW5kQ29kZVBvaW50OiBBIGNvZGUgcG9pbnQgb2YgXCIuY29uY2F0KHQsXCIgY2Fubm90IGJlIGVuY29kZWQgaW4gVVRGLTE2XCIpKTt0aGlzLmFwcGVuZENoYXJDb2RlKDU1Mjk2Kyh0LTY1NTM2Pj4+MTApKSx0aGlzLmFwcGVuZENoYXJDb2RlKDU2MzIwKyh0LTY1NTM2JjEwMjMpKX19LHQucHJvdG90eXBlLmdldE91dHB1dFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZsdXNoQnVmZmVyVG9PdXRwdXRTdHJpbmcoKSx0aGlzLm91dHB1dFN0cmluZ30sdC5wcm90b3R5cGUuZmx1c2hCdWZmZXJUb091dHB1dFN0cmluZz1mdW5jdGlvbigpe3RoaXMub3V0cHV0UG9zaXRpb249PT10aGlzLm91dHB1dEJ1ZmZlckNhcGFjaXR5P3RoaXMub3V0cHV0U3RyaW5nKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdGhpcy5vdXRwdXRCdWZmZXIpOnRoaXMub3V0cHV0U3RyaW5nKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdGhpcy5vdXRwdXRCdWZmZXIuc3ViYXJyYXkoMCx0aGlzLm91dHB1dFBvc2l0aW9uKSksdGhpcy5vdXRwdXRQb3NpdGlvbj0wfSx0fSgpO3QuU3RyaW5nQnVpbGRlcj1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVzdGFydCgpfXJldHVybiBlLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5zdGFydFRpbWU9ZS5nZXRUaW1lc3RhbXAoKX0sZS5wcm90b3R5cGUuZ2V0RWxhcHNlZFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRUaW1lc3RhbXAoKS10aGlzLnN0YXJ0VGltZX0sZS5wcm90b3R5cGUuZ2V0RWxhcHNlZFRpbWVBbmRSZXN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRFbGFwc2VkVGltZSgpO3JldHVybiB0aGlzLnJlc3RhcnQoKSx0fSxlLnByb3RvdHlwZS5sb2dBbmRSZXN0YXJ0PWZ1bmN0aW9uKGUsbil7dm9pZCAwPT09biYmKG49ITApO3ZhciByPXRoaXMuZ2V0RWxhcHNlZFRpbWUoKSxvPVwiXCIuY29uY2F0KGUsXCI6IFwiKS5jb25jYXQoci50b0ZpeGVkKDMpLFwibXNcIik7cmV0dXJuIHQubG9nKG8sbiksdGhpcy5yZXN0YXJ0KCkscn0sZS5nZXRUaW1lc3RhbXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aW1lc3RhbXBGdW5jfHx0aGlzLmNyZWF0ZUdsb2JhbFRpbWVzdGFtcEZ1bmN0aW9uKCksdGhpcy50aW1lc3RhbXBGdW5jKCl9LGUuZ2V0TWljcm9zZWNvbmRUaW1lc3RhbXA9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcigxZTMqZS5nZXRUaW1lc3RhbXAoKSl9LGUuY3JlYXRlR2xvYmFsVGltZXN0YW1wRnVuY3Rpb249ZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJmdW5jdGlvblwiPT10eXBlb2YgcHJvY2Vzcy5ocnRpbWUpe3ZhciB0PTA7dGhpcy50aW1lc3RhbXBGdW5jPWZ1bmN0aW9uKCl7dmFyIGU9cHJvY2Vzcy5ocnRpbWUoKSxuPTFlMyplWzBdK2VbMV0vMWU2O3JldHVybiB0K259LHQ9RGF0ZS5ub3coKS10aGlzLnRpbWVzdGFtcEZ1bmMoKX1lbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBjaHJvbWUmJmNocm9tZS5JbnRlcnZhbCl7dmFyIGU9RGF0ZS5ub3coKSxuPW5ldyBjaHJvbWUuSW50ZXJ2YWw7bi5zdGFydCgpLHRoaXMudGltZXN0YW1wRnVuYz1mdW5jdGlvbigpe3JldHVybiBlK24ubWljcm9zZWNvbmRzKCkvMWUzfX1lbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBwZXJmb3JtYW5jZSYmcGVyZm9ybWFuY2Uubm93KXt2YXIgcj1EYXRlLm5vdygpLXBlcmZvcm1hbmNlLm5vdygpO3RoaXMudGltZXN0YW1wRnVuYz1mdW5jdGlvbigpe3JldHVybiByK3BlcmZvcm1hbmNlLm5vdygpfX1lbHNlIERhdGUubm93P3RoaXMudGltZXN0YW1wRnVuYz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpfTp0aGlzLnRpbWVzdGFtcEZ1bmM9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19LGV9KCk7dC5UaW1lcj1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2b2lkIDA9PT1lJiYoZT0hMCksdGhpcy5NaW5pbXVtU2VxdWVuY2VMZW5ndGg9NCx0aGlzLk1heGltdW1TZXF1ZW5jZUxlbmd0aD0zMSx0aGlzLk1heGltdW1NYXRjaERpc3RhbmNlPTMyNzY3LHRoaXMuUHJlZml4SGFzaFRhYmxlU2l6ZT02NTUzNyx0aGlzLmlucHV0QnVmZmVyU3RyZWFtT2Zmc2V0PTEsZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDMyQXJyYXk/dGhpcy5wcmVmaXhIYXNoVGFibGU9bmV3IHQuQ29tcHJlc3NvckN1c3RvbUhhc2hUYWJsZSh0aGlzLlByZWZpeEhhc2hUYWJsZVNpemUpOnRoaXMucHJlZml4SGFzaFRhYmxlPW5ldyB0LkNvbXByZXNzb3JTaW1wbGVIYXNoVGFibGUodGhpcy5QcmVmaXhIYXNoVGFibGVTaXplKX1yZXR1cm4gZS5wcm90b3R5cGUuY29tcHJlc3NCbG9jaz1mdW5jdGlvbihlKXtpZihudWxsPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wcmVzc0Jsb2NrOiB1bmRlZmluZWQgb3IgbnVsbCBpbnB1dCByZWNlaXZlZFwiKTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9dC5lbmNvZGVVVEY4KGUpKSxlPXQuQnVmZmVyVG9vbHMuY29udmVydFRvVWludDhBcnJheUlmTmVlZGVkKGUpLHRoaXMuY29tcHJlc3NVdGY4QmxvY2soZSl9LGUucHJvdG90eXBlLmNvbXByZXNzVXRmOEJsb2NrPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7dmFyIGU9dGhpcy5jcm9wQW5kQWRkTmV3Qnl0ZXNUb0lucHV0QnVmZmVyKHQpLG49dGhpcy5pbnB1dEJ1ZmZlcixyPXRoaXMuaW5wdXRCdWZmZXIubGVuZ3RoO3RoaXMub3V0cHV0QnVmZmVyPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKSx0aGlzLm91dHB1dEJ1ZmZlclBvc2l0aW9uPTA7Zm9yKHZhciBvPTAsaT1lO2k8cjtpKyspe3ZhciBhPW5baV0scz1pPG87aWYoaT5yLXRoaXMuTWluaW11bVNlcXVlbmNlTGVuZ3RoKXN8fHRoaXMub3V0cHV0UmF3Qnl0ZShhKTtlbHNle3ZhciB1PXRoaXMuZ2V0QnVja2V0SW5kZXhGb3JQcmVmaXgoaSk7aWYoIXMpe3ZhciBsPXRoaXMuZmluZExvbmdlc3RNYXRjaChpLHUpO251bGwhPWwmJih0aGlzLm91dHB1dFBvaW50ZXJCeXRlcyhsLmxlbmd0aCxsLmRpc3RhbmNlKSxvPWkrbC5sZW5ndGgscz0hMCl9c3x8dGhpcy5vdXRwdXRSYXdCeXRlKGEpO3ZhciBjPXRoaXMuaW5wdXRCdWZmZXJTdHJlYW1PZmZzZXQraTt0aGlzLnByZWZpeEhhc2hUYWJsZS5hZGRWYWx1ZVRvQnVja2V0KHUsYyl9fXJldHVybiB0aGlzLm91dHB1dEJ1ZmZlci5zdWJhcnJheSgwLHRoaXMub3V0cHV0QnVmZmVyUG9zaXRpb24pfSxlLnByb3RvdHlwZS5maW5kTG9uZ2VzdE1hdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wcmVmaXhIYXNoVGFibGUuZ2V0QXJyYXlTZWdtZW50Rm9yQnVja2V0SW5kZXgoZSx0aGlzLnJldXNhYmxlQXJyYXlTZWdtZW50T2JqZWN0KTtpZihudWxsPT1uKXJldHVybiBudWxsO2Zvcih2YXIgcixvPXRoaXMuaW5wdXRCdWZmZXIsaT0wLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHM9bi5nZXRJblJldmVyc2VkT3JkZXIoYSktdGhpcy5pbnB1dEJ1ZmZlclN0cmVhbU9mZnNldCx1PXQtcyxsPXZvaWQgMDtpZihsPXZvaWQgMD09PXI/dGhpcy5NaW5pbXVtU2VxdWVuY2VMZW5ndGgtMTpyPDEyOCYmdT49MTI4P2krKGk+Pj4xKTppLHU+dGhpcy5NYXhpbXVtTWF0Y2hEaXN0YW5jZXx8bD49dGhpcy5NYXhpbXVtU2VxdWVuY2VMZW5ndGh8fHQrbD49by5sZW5ndGgpYnJlYWs7aWYob1tzK2xdPT09b1t0K2xdKWZvcih2YXIgYz0wOztjKyspe2lmKHQrYz09PW8ubGVuZ3RofHxvW3MrY10hPT1vW3QrY10pe2M+bCYmKHI9dSxpPWMpO2JyZWFrfWlmKGM9PT10aGlzLk1heGltdW1TZXF1ZW5jZUxlbmd0aClyZXR1cm57ZGlzdGFuY2U6dSxsZW5ndGg6dGhpcy5NYXhpbXVtU2VxdWVuY2VMZW5ndGh9fX1yZXR1cm4gdm9pZCAwIT09cj97ZGlzdGFuY2U6cixsZW5ndGg6aX06bnVsbH0sZS5wcm90b3R5cGUuZ2V0QnVja2V0SW5kZXhGb3JQcmVmaXg9ZnVuY3Rpb24odCl7cmV0dXJuKDc4ODA1OTkqdGhpcy5pbnB1dEJ1ZmZlclt0XSszOTYwMSp0aGlzLmlucHV0QnVmZmVyW3QrMV0rMTk5KnRoaXMuaW5wdXRCdWZmZXJbdCsyXSt0aGlzLmlucHV0QnVmZmVyW3QrM10pJXRoaXMuUHJlZml4SGFzaFRhYmxlU2l6ZX0sZS5wcm90b3R5cGUub3V0cHV0UG9pbnRlckJ5dGVzPWZ1bmN0aW9uKHQsZSl7ZTwxMjg/KHRoaXMub3V0cHV0UmF3Qnl0ZSgxOTJ8dCksdGhpcy5vdXRwdXRSYXdCeXRlKGUpKToodGhpcy5vdXRwdXRSYXdCeXRlKDIyNHx0KSx0aGlzLm91dHB1dFJhd0J5dGUoZT4+PjgpLHRoaXMub3V0cHV0UmF3Qnl0ZSgyNTUmZSkpfSxlLnByb3RvdHlwZS5vdXRwdXRSYXdCeXRlPWZ1bmN0aW9uKHQpe3RoaXMub3V0cHV0QnVmZmVyW3RoaXMub3V0cHV0QnVmZmVyUG9zaXRpb24rK109dH0sZS5wcm90b3R5cGUuY3JvcEFuZEFkZE5ld0J5dGVzVG9JbnB1dEJ1ZmZlcj1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT10aGlzLmlucHV0QnVmZmVyKXJldHVybiB0aGlzLmlucHV0QnVmZmVyPWUsMDt2YXIgbj1NYXRoLm1pbih0aGlzLmlucHV0QnVmZmVyLmxlbmd0aCx0aGlzLk1heGltdW1NYXRjaERpc3RhbmNlKSxyPXRoaXMuaW5wdXRCdWZmZXIubGVuZ3RoLW47cmV0dXJuIHRoaXMuaW5wdXRCdWZmZXI9dC5Db21wcmVzc2lvbkNvbW1vbi5nZXRDcm9wcGVkQW5kQXBwZW5kZWRCeXRlQXJyYXkodGhpcy5pbnB1dEJ1ZmZlcixyLG4sZSksdGhpcy5pbnB1dEJ1ZmZlclN0cmVhbU9mZnNldCs9cixufSxlfSgpO3QuQ29tcHJlc3Nvcj1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt0aGlzLm1pbmltdW1CdWNrZXRDYXBhY2l0eT00LHRoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5PTY0LHRoaXMuYnVja2V0TG9jYXRvcnM9bmV3IFVpbnQzMkFycmF5KDIqdCksdGhpcy5zdG9yYWdlPW5ldyBVaW50MzJBcnJheSgyKnQpLHRoaXMuc3RvcmFnZUluZGV4PTF9cmV0dXJuIGUucHJvdG90eXBlLmFkZFZhbHVlVG9CdWNrZXQ9ZnVuY3Rpb24oZSxuKXtlPDw9MSx0aGlzLnN0b3JhZ2VJbmRleD49dGhpcy5zdG9yYWdlLmxlbmd0aD4+PjEmJnRoaXMuY29tcGFjdCgpO3ZhciByLG89dGhpcy5idWNrZXRMb2NhdG9yc1tlXTtpZigwPT09bylvPXRoaXMuc3RvcmFnZUluZGV4LHI9MSx0aGlzLnN0b3JhZ2VbdGhpcy5zdG9yYWdlSW5kZXhdPW4sdGhpcy5zdG9yYWdlSW5kZXgrPXRoaXMubWluaW11bUJ1Y2tldENhcGFjaXR5O2Vsc2V7KHI9dGhpcy5idWNrZXRMb2NhdG9yc1tlKzFdKT09PXRoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5LTEmJihyPXRoaXMudHJ1bmNhdGVCdWNrZXRUb05ld2VyRWxlbWVudHMobyxyLHRoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5LzIpKTt2YXIgaT1vK3I7MD09PXRoaXMuc3RvcmFnZVtpXT8odGhpcy5zdG9yYWdlW2ldPW4saT09PXRoaXMuc3RvcmFnZUluZGV4JiYodGhpcy5zdG9yYWdlSW5kZXgrPXIpKToodC5BcnJheVRvb2xzLmNvcHlFbGVtZW50cyh0aGlzLnN0b3JhZ2Usbyx0aGlzLnN0b3JhZ2UsdGhpcy5zdG9yYWdlSW5kZXgsciksbz10aGlzLnN0b3JhZ2VJbmRleCx0aGlzLnN0b3JhZ2VJbmRleCs9cix0aGlzLnN0b3JhZ2VbdGhpcy5zdG9yYWdlSW5kZXgrK109bix0aGlzLnN0b3JhZ2VJbmRleCs9cikscisrfXRoaXMuYnVja2V0TG9jYXRvcnNbZV09byx0aGlzLmJ1Y2tldExvY2F0b3JzW2UrMV09cn0sZS5wcm90b3R5cGUudHJ1bmNhdGVCdWNrZXRUb05ld2VyRWxlbWVudHM9ZnVuY3Rpb24oZSxuLHIpe3ZhciBvPWUrbi1yO3JldHVybiB0LkFycmF5VG9vbHMuY29weUVsZW1lbnRzKHRoaXMuc3RvcmFnZSxvLHRoaXMuc3RvcmFnZSxlLHIpLHQuQXJyYXlUb29scy56ZXJvRWxlbWVudHModGhpcy5zdG9yYWdlLGUrcixuLXIpLHJ9LGUucHJvdG90eXBlLmNvbXBhY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJ1Y2tldExvY2F0b3JzLG49dGhpcy5zdG9yYWdlO3RoaXMuYnVja2V0TG9jYXRvcnM9bmV3IFVpbnQzMkFycmF5KHRoaXMuYnVja2V0TG9jYXRvcnMubGVuZ3RoKSx0aGlzLnN0b3JhZ2VJbmRleD0xO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cis9Mil7dmFyIG89ZVtyKzFdOzAhPT1vJiYodGhpcy5idWNrZXRMb2NhdG9yc1tyXT10aGlzLnN0b3JhZ2VJbmRleCx0aGlzLmJ1Y2tldExvY2F0b3JzW3IrMV09byx0aGlzLnN0b3JhZ2VJbmRleCs9TWF0aC5tYXgoTWF0aC5taW4oMipvLHRoaXMubWF4aW11bUJ1Y2tldENhcGFjaXR5KSx0aGlzLm1pbmltdW1CdWNrZXRDYXBhY2l0eSkpfXRoaXMuc3RvcmFnZT1uZXcgVWludDMyQXJyYXkoOCp0aGlzLnN0b3JhZ2VJbmRleCk7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrPTIpe3ZhciBpPWVbcl07aWYoMCE9PWkpe3ZhciBhPXRoaXMuYnVja2V0TG9jYXRvcnNbcl0scz10aGlzLmJ1Y2tldExvY2F0b3JzW3IrMV07dC5BcnJheVRvb2xzLmNvcHlFbGVtZW50cyhuLGksdGhpcy5zdG9yYWdlLGEscyl9fX0sZS5wcm90b3R5cGUuZ2V0QXJyYXlTZWdtZW50Rm9yQnVja2V0SW5kZXg9ZnVuY3Rpb24oZSxuKXtlPDw9MTt2YXIgcj10aGlzLmJ1Y2tldExvY2F0b3JzW2VdO3JldHVybiAwPT09cj9udWxsOih2b2lkIDA9PT1uJiYobj1uZXcgdC5BcnJheVNlZ21lbnQodGhpcy5zdG9yYWdlLHIsdGhpcy5idWNrZXRMb2NhdG9yc1tlKzFdKSksbil9LGUucHJvdG90eXBlLmdldFVzZWRCdWNrZXRDb3VudD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKHQuQXJyYXlUb29scy5jb3VudE5vbnplcm9WYWx1ZXNJbkFycmF5KHRoaXMuYnVja2V0TG9jYXRvcnMpLzIpfSxlLnByb3RvdHlwZS5nZXRUb3RhbEVsZW1lbnRDb3VudD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuYnVja2V0TG9jYXRvcnMubGVuZ3RoO2UrPTIpdCs9dGhpcy5idWNrZXRMb2NhdG9yc1tlKzFdO3JldHVybiB0fSxlfSgpO3QuQ29tcHJlc3NvckN1c3RvbUhhc2hUYWJsZT1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt0aGlzLm1heGltdW1CdWNrZXRDYXBhY2l0eT02NCx0aGlzLmJ1Y2tldHM9bmV3IEFycmF5KHQpfXJldHVybiBlLnByb3RvdHlwZS5hZGRWYWx1ZVRvQnVja2V0PWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5idWNrZXRzW2VdO3ZvaWQgMD09PXI/dGhpcy5idWNrZXRzW2VdPVtuXTooci5sZW5ndGg9PT10aGlzLm1heGltdW1CdWNrZXRDYXBhY2l0eS0xJiZ0LkFycmF5VG9vbHMudHJ1bmNhdGVTdGFydGluZ0VsZW1lbnRzKHIsdGhpcy5tYXhpbXVtQnVja2V0Q2FwYWNpdHkvMiksci5wdXNoKG4pKX0sZS5wcm90b3R5cGUuZ2V0QXJyYXlTZWdtZW50Rm9yQnVja2V0SW5kZXg9ZnVuY3Rpb24oZSxuKXt2YXIgcj10aGlzLmJ1Y2tldHNbZV07cmV0dXJuIHZvaWQgMD09PXI/bnVsbDoodm9pZCAwPT09biYmKG49bmV3IHQuQXJyYXlTZWdtZW50KHIsMCxyLmxlbmd0aCkpLG4pfSxlLnByb3RvdHlwZS5nZXRVc2VkQnVja2V0Q291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5BcnJheVRvb2xzLmNvdW50Tm9uemVyb1ZhbHVlc0luQXJyYXkodGhpcy5idWNrZXRzKX0sZS5wcm90b3R5cGUuZ2V0VG90YWxFbGVtZW50Q291bnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTx0aGlzLmJ1Y2tldHMubGVuZ3RoO2UrKyl2b2lkIDAhPT10aGlzLmJ1Y2tldHNbZV0mJih0Kz10aGlzLmJ1Y2tldHNbZV0ubGVuZ3RoKTtyZXR1cm4gdH0sZX0oKTt0LkNvbXByZXNzb3JTaW1wbGVIYXNoVGFibGU9ZX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLk1heGltdW1NYXRjaERpc3RhbmNlPTMyNzY3LHRoaXMub3V0cHV0UG9zaXRpb249MH1yZXR1cm4gZS5wcm90b3R5cGUuZGVjb21wcmVzc0Jsb2NrVG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dC5CdWZmZXJUb29scy5jb252ZXJ0VG9VaW50OEFycmF5SWZOZWVkZWQoZSksdC5kZWNvZGVVVEY4KHRoaXMuZGVjb21wcmVzc0Jsb2NrKGUpKX0sZS5wcm90b3R5cGUuZGVjb21wcmVzc0Jsb2NrPWZ1bmN0aW9uKGUpe3RoaXMuaW5wdXRCdWZmZXJSZW1haW5kZXImJihlPXQuQXJyYXlUb29scy5jb25jYXRVaW50OEFycmF5cyhbdGhpcy5pbnB1dEJ1ZmZlclJlbWFpbmRlcixlXSksdGhpcy5pbnB1dEJ1ZmZlclJlbWFpbmRlcj12b2lkIDApO2Zvcih2YXIgbj10aGlzLmNyb3BPdXRwdXRCdWZmZXJUb1dpbmRvd0FuZEluaXRpYWxpemUoTWF0aC5tYXgoNCplLmxlbmd0aCwxMDI0KSkscj0wLG89ZS5sZW5ndGg7cjxvO3IrKyl7dmFyIGk9ZVtyXTtpZihpPj4+Nj09Myl7dmFyIGE9aT4+PjU7aWYocj09by0xfHxyPT1vLTImJjc9PWEpe3RoaXMuaW5wdXRCdWZmZXJSZW1haW5kZXI9ZS5zdWJhcnJheShyKTticmVha31pZihlW3IrMV0+Pj43PT0xKXRoaXMub3V0cHV0Qnl0ZShpKTtlbHNle3ZhciBzPTMxJmksdT12b2lkIDA7Nj09YT8odT1lW3IrMV0scis9MSk6KHU9ZVtyKzFdPDw4fGVbcisyXSxyKz0yKTtmb3IodmFyIGw9dGhpcy5vdXRwdXRQb3NpdGlvbi11LGM9MDtjPHM7YysrKXRoaXMub3V0cHV0Qnl0ZSh0aGlzLm91dHB1dEJ1ZmZlcltsK2NdKX19ZWxzZSB0aGlzLm91dHB1dEJ5dGUoaSl9cmV0dXJuIHRoaXMucm9sbEJhY2tJZk91dHB1dEJ1ZmZlckVuZHNXaXRoQVRydW5jYXRlZE11bHRpYnl0ZVNlcXVlbmNlKCksdC5Db21wcmVzc2lvbkNvbW1vbi5nZXRDcm9wcGVkQnVmZmVyKHRoaXMub3V0cHV0QnVmZmVyLG4sdGhpcy5vdXRwdXRQb3NpdGlvbi1uKX0sZS5wcm90b3R5cGUub3V0cHV0Qnl0ZT1mdW5jdGlvbihlKXt0aGlzLm91dHB1dFBvc2l0aW9uPT09dGhpcy5vdXRwdXRCdWZmZXIubGVuZ3RoJiYodGhpcy5vdXRwdXRCdWZmZXI9dC5BcnJheVRvb2xzLmRvdWJsZUJ5dGVBcnJheUNhcGFjaXR5KHRoaXMub3V0cHV0QnVmZmVyKSksdGhpcy5vdXRwdXRCdWZmZXJbdGhpcy5vdXRwdXRQb3NpdGlvbisrXT1lfSxlLnByb3RvdHlwZS5jcm9wT3V0cHV0QnVmZmVyVG9XaW5kb3dBbmRJbml0aWFsaXplPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLm91dHB1dEJ1ZmZlcilyZXR1cm4gdGhpcy5vdXRwdXRCdWZmZXI9bmV3IFVpbnQ4QXJyYXkoZSksMDt2YXIgbj1NYXRoLm1pbih0aGlzLm91dHB1dFBvc2l0aW9uLHRoaXMuTWF4aW11bU1hdGNoRGlzdGFuY2UpO2lmKHRoaXMub3V0cHV0QnVmZmVyPXQuQ29tcHJlc3Npb25Db21tb24uZ2V0Q3JvcHBlZEJ1ZmZlcih0aGlzLm91dHB1dEJ1ZmZlcix0aGlzLm91dHB1dFBvc2l0aW9uLW4sbixlKSx0aGlzLm91dHB1dFBvc2l0aW9uPW4sdGhpcy5vdXRwdXRCdWZmZXJSZW1haW5kZXIpe2Zvcih2YXIgcj0wO3I8dGhpcy5vdXRwdXRCdWZmZXJSZW1haW5kZXIubGVuZ3RoO3IrKyl0aGlzLm91dHB1dEJ5dGUodGhpcy5vdXRwdXRCdWZmZXJSZW1haW5kZXJbcl0pO3RoaXMub3V0cHV0QnVmZmVyUmVtYWluZGVyPXZvaWQgMH1yZXR1cm4gbn0sZS5wcm90b3R5cGUucm9sbEJhY2tJZk91dHB1dEJ1ZmZlckVuZHNXaXRoQVRydW5jYXRlZE11bHRpYnl0ZVNlcXVlbmNlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTE7dDw9NCYmdGhpcy5vdXRwdXRQb3NpdGlvbi10Pj0wO3QrKyl7dmFyIGU9dGhpcy5vdXRwdXRCdWZmZXJbdGhpcy5vdXRwdXRQb3NpdGlvbi10XTtpZih0PDQmJmU+Pj4zPT0zMHx8dDwzJiZlPj4+ND09MTR8fHQ8MiYmZT4+PjU9PTYpcmV0dXJuIHRoaXMub3V0cHV0QnVmZmVyUmVtYWluZGVyPXRoaXMub3V0cHV0QnVmZmVyLnN1YmFycmF5KHRoaXMub3V0cHV0UG9zaXRpb24tdCx0aGlzLm91dHB1dFBvc2l0aW9uKSx2b2lkKHRoaXMub3V0cHV0UG9zaXRpb24tPXQpfX0sZX0oKTt0LkRlY29tcHJlc3Nvcj1lfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIG49bmV3IFVpbnQ4QXJyYXkoWzY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDk3LDk4LDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMDcsMTA4LDEwOSwxMTAsMTExLDExMiwxMTMsMTE0LDExNSwxMTYsMTE3LDExOCwxMTksMTIwLDEyMSwxMjIsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNDMsNDddKSxyPW5ldyBVaW50OEFycmF5KFsyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTUsNjIsMjU1LDI1NSwyNTUsNjMsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsMjU1LDI1NSwyNTUsMCwyNTUsMjU1LDI1NSwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDI1NSwyNTUsMjU1LDI1NV0pO2UuZW5jb2RlPWZ1bmN0aW9uKG4pe3JldHVybiBuJiYwIT1uLmxlbmd0aD90LnJ1bm5pbmdJbk5vZGVKUygpP3QuQnVmZmVyVG9vbHMudWludDhBcnJheVRvQnVmZmVyKG4pLnRvU3RyaW5nKFwiYmFzZTY0XCIpOmUuZW5jb2RlV2l0aEpTKG4pOlwiXCJ9LGUuZGVjb2RlPWZ1bmN0aW9uKG4pe3JldHVybiBuP3QucnVubmluZ0luTm9kZUpTKCk/dC5CdWZmZXJUb29scy5idWZmZXJUb1VpbnQ4QXJyYXkoQnVmZmVyLmZyb20obixcImJhc2U2NFwiKSk6ZS5kZWNvZGVXaXRoSlMobik6bmV3IFVpbnQ4QXJyYXkoMCl9LGUuZW5jb2RlV2l0aEpTPWZ1bmN0aW9uKGUscil7aWYodm9pZCAwPT09ciYmKHI9ITApLCFlfHwwPT1lLmxlbmd0aClyZXR1cm5cIlwiO2Zvcih2YXIgbyxpPW4sYT1uZXcgdC5TdHJpbmdCdWlsZGVyLHM9MCx1PWUubGVuZ3RoO3M8dTtzKz0zKXM8PXUtMz8obz1lW3NdPDwxNnxlW3MrMV08PDh8ZVtzKzJdLGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTgmNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbbz4+PjEyJjYzXSksYS5hcHBlbmRDaGFyQ29kZShpW28+Pj42JjYzXSksYS5hcHBlbmRDaGFyQ29kZShpWzYzJm9dKSxvPTApOnM9PT11LTI/KG89ZVtzXTw8MTZ8ZVtzKzFdPDw4LGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTgmNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbbz4+PjEyJjYzXSksYS5hcHBlbmRDaGFyQ29kZShpW28+Pj42JjYzXSksciYmYS5hcHBlbmRDaGFyQ29kZSg2MSkpOnM9PT11LTEmJihvPWVbc108PDE2LGEuYXBwZW5kQ2hhckNvZGUoaVtvPj4+MTgmNjNdKSxhLmFwcGVuZENoYXJDb2RlKGlbbz4+PjEyJjYzXSksciYmKGEuYXBwZW5kQ2hhckNvZGUoNjEpLGEuYXBwZW5kQ2hhckNvZGUoNjEpKSk7cmV0dXJuIGEuZ2V0T3V0cHV0U3RyaW5nKCl9LGUuZGVjb2RlV2l0aEpTPWZ1bmN0aW9uKHQsZSl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBuZXcgVWludDhBcnJheSgwKTt2YXIgbj10Lmxlbmd0aCU0O2lmKDE9PT1uKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQmFzZTY0IHN0cmluZzogbGVuZ3RoICUgNCA9PSAxXCIpOzI9PT1uP3QrPVwiPT1cIjozPT09biYmKHQrPVwiPVwiKSxlfHwoZT1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCkpO2Zvcih2YXIgbz0wLGk9dC5sZW5ndGgsYT0wO2E8aTthKz00KXt2YXIgcz1yW3QuY2hhckNvZGVBdChhKV08PDE4fHJbdC5jaGFyQ29kZUF0KGErMSldPDwxMnxyW3QuY2hhckNvZGVBdChhKzIpXTw8NnxyW3QuY2hhckNvZGVBdChhKzMpXTtlW28rK109cz4+PjE2JjI1NSxlW28rK109cz4+PjgmMjU1LGVbbysrXT0yNTUmc31yZXR1cm4gNjE9PXQuY2hhckNvZGVBdChpLTEpJiZvLS0sNjE9PXQuY2hhckNvZGVBdChpLTIpJiZvLS0sZS5zdWJhcnJheSgwLG8pfX0oZS5CYXNlNjR8fChlLkJhc2U2ND17fSkpfSh0LkVuY29kaW5nfHwodC5FbmNvZGluZz17fSkpfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7ZS5lbmNvZGU9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmluYXJ5U3RyaW5nLmVuY29kZTogdW5kZWZpbmVkIG9yIG51bGwgaW5wdXQgcmVjZWl2ZWRcIik7aWYoMD09PWUubGVuZ3RoKXJldHVyblwiXCI7Zm9yKHZhciBuPWUubGVuZ3RoLHI9bmV3IHQuU3RyaW5nQnVpbGRlcixvPTAsaT0xLGE9MDthPG47YSs9Mil7dmFyIHM9dm9pZCAwO3M9YT09bi0xP2VbYV08PDg6ZVthXTw8OHxlW2ErMV0sci5hcHBlbmRDaGFyQ29kZShvPDwxNi1pfHM+Pj5pKSxvPXMmKDE8PGkpLTEsMTU9PT1pPyhyLmFwcGVuZENoYXJDb2RlKG8pLG89MCxpPTEpOmkrPTEsYT49bi0yJiZyLmFwcGVuZENoYXJDb2RlKG88PDE2LWkpfXJldHVybiByLmFwcGVuZENoYXJDb2RlKDMyNzY4fG4lMiksci5nZXRPdXRwdXRTdHJpbmcoKX0sZS5kZWNvZGU9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJpbmFyeVN0cmluZy5kZWNvZGU6IGludmFsaWQgaW5wdXQgdHlwZVwiKTtpZihcIlwiPT10KXJldHVybiBuZXcgVWludDhBcnJheSgwKTtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkoMyp0Lmxlbmd0aCksbj0wLHI9ZnVuY3Rpb24odCl7ZVtuKytdPXQ+Pj44LGVbbisrXT0yNTUmdH0sbz0wLGk9MCxhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBzPXQuY2hhckNvZGVBdChhKTtzPj0zMjc2OD8oMzI3Njk9PXMmJm4tLSxpPTApOigwPT1pP289czoocihvPDxpfHM+Pj4xNS1pKSxvPXMmKDE8PDE1LWkpLTEpLDE1PT1pP2k9MDppKz0xKX1yZXR1cm4gZS5zdWJhcnJheSgwLG4pfX0oZS5CaW5hcnlTdHJpbmd8fChlLkJpbmFyeVN0cmluZz17fSkpfSh0LkVuY29kaW5nfHwodC5FbmNvZGluZz17fSkpfShvfHwobz17fSkpLGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7dC5lbmNvZGVGcm9tU3RyaW5nPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jaGFyQ29kZUF0KGUpO2lmKG48NTUyOTZ8fG4+NTYzMTkpcmV0dXJuIG47dmFyIHI9dC5jaGFyQ29kZUF0KGUrMSk7aWYocj49NTYzMjAmJnI8PTU3MzQzKXJldHVybiByLTU2MzIwKyhuLTU1Mjk2PDwxMCkrNjU1MzY7dGhyb3cgbmV3IEVycm9yKFwiZ2V0VW5pY29kZUNvZGVQb2ludDogUmVjZWl2ZWQgYSBsZWFkIHN1cnJvZ2F0ZSBjaGFyYWN0ZXIsIGNoYXIgY29kZSBcIi5jb25jYXQobixcIiwgZm9sbG93ZWQgYnkgXCIpLmNvbmNhdChyLFwiLCB3aGljaCBpcyBub3QgYSB0cmFpbGluZyBzdXJyb2dhdGUgY2hhcmFjdGVyIGNvZGUuXCIpKX0sdC5kZWNvZGVUb1N0cmluZz1mdW5jdGlvbih0KXtpZih0PD02NTUzNSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh0KTtpZih0PD0xMTE0MTExKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2Kyh0LTY1NTM2Pj4+MTApLDU2MzIwKyh0LTY1NTM2JjEwMjMpKTt0aHJvdyBuZXcgRXJyb3IoXCJnZXRTdHJpbmdGcm9tVW5pY29kZUNvZGVQb2ludDogQSBjb2RlIHBvaW50IG9mIFwiLmNvbmNhdCh0LFwiIGNhbm5vdCBiZSBlbmNvZGVkIGluIFVURi0xNlwiKSl9fSh0LkNvZGVQb2ludHx8KHQuQ29kZVBvaW50PXt9KSl9KHQuRW5jb2Rpbmd8fCh0LkVuY29kaW5nPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT1bXCIwMDBcIixcIjAwMVwiLFwiMDAyXCIsXCIwMDNcIixcIjAwNFwiLFwiMDA1XCIsXCIwMDZcIixcIjAwN1wiLFwiMDA4XCIsXCIwMDlcIixcIjAxMFwiLFwiMDExXCIsXCIwMTJcIixcIjAxM1wiLFwiMDE0XCIsXCIwMTVcIixcIjAxNlwiLFwiMDE3XCIsXCIwMThcIixcIjAxOVwiLFwiMDIwXCIsXCIwMjFcIixcIjAyMlwiLFwiMDIzXCIsXCIwMjRcIixcIjAyNVwiLFwiMDI2XCIsXCIwMjdcIixcIjAyOFwiLFwiMDI5XCIsXCIwMzBcIixcIjAzMVwiLFwiMDMyXCIsXCIwMzNcIixcIjAzNFwiLFwiMDM1XCIsXCIwMzZcIixcIjAzN1wiLFwiMDM4XCIsXCIwMzlcIixcIjA0MFwiLFwiMDQxXCIsXCIwNDJcIixcIjA0M1wiLFwiMDQ0XCIsXCIwNDVcIixcIjA0NlwiLFwiMDQ3XCIsXCIwNDhcIixcIjA0OVwiLFwiMDUwXCIsXCIwNTFcIixcIjA1MlwiLFwiMDUzXCIsXCIwNTRcIixcIjA1NVwiLFwiMDU2XCIsXCIwNTdcIixcIjA1OFwiLFwiMDU5XCIsXCIwNjBcIixcIjA2MVwiLFwiMDYyXCIsXCIwNjNcIixcIjA2NFwiLFwiMDY1XCIsXCIwNjZcIixcIjA2N1wiLFwiMDY4XCIsXCIwNjlcIixcIjA3MFwiLFwiMDcxXCIsXCIwNzJcIixcIjA3M1wiLFwiMDc0XCIsXCIwNzVcIixcIjA3NlwiLFwiMDc3XCIsXCIwNzhcIixcIjA3OVwiLFwiMDgwXCIsXCIwODFcIixcIjA4MlwiLFwiMDgzXCIsXCIwODRcIixcIjA4NVwiLFwiMDg2XCIsXCIwODdcIixcIjA4OFwiLFwiMDg5XCIsXCIwOTBcIixcIjA5MVwiLFwiMDkyXCIsXCIwOTNcIixcIjA5NFwiLFwiMDk1XCIsXCIwOTZcIixcIjA5N1wiLFwiMDk4XCIsXCIwOTlcIixcIjEwMFwiLFwiMTAxXCIsXCIxMDJcIixcIjEwM1wiLFwiMTA0XCIsXCIxMDVcIixcIjEwNlwiLFwiMTA3XCIsXCIxMDhcIixcIjEwOVwiLFwiMTEwXCIsXCIxMTFcIixcIjExMlwiLFwiMTEzXCIsXCIxMTRcIixcIjExNVwiLFwiMTE2XCIsXCIxMTdcIixcIjExOFwiLFwiMTE5XCIsXCIxMjBcIixcIjEyMVwiLFwiMTIyXCIsXCIxMjNcIixcIjEyNFwiLFwiMTI1XCIsXCIxMjZcIixcIjEyN1wiLFwiMTI4XCIsXCIxMjlcIixcIjEzMFwiLFwiMTMxXCIsXCIxMzJcIixcIjEzM1wiLFwiMTM0XCIsXCIxMzVcIixcIjEzNlwiLFwiMTM3XCIsXCIxMzhcIixcIjEzOVwiLFwiMTQwXCIsXCIxNDFcIixcIjE0MlwiLFwiMTQzXCIsXCIxNDRcIixcIjE0NVwiLFwiMTQ2XCIsXCIxNDdcIixcIjE0OFwiLFwiMTQ5XCIsXCIxNTBcIixcIjE1MVwiLFwiMTUyXCIsXCIxNTNcIixcIjE1NFwiLFwiMTU1XCIsXCIxNTZcIixcIjE1N1wiLFwiMTU4XCIsXCIxNTlcIixcIjE2MFwiLFwiMTYxXCIsXCIxNjJcIixcIjE2M1wiLFwiMTY0XCIsXCIxNjVcIixcIjE2NlwiLFwiMTY3XCIsXCIxNjhcIixcIjE2OVwiLFwiMTcwXCIsXCIxNzFcIixcIjE3MlwiLFwiMTczXCIsXCIxNzRcIixcIjE3NVwiLFwiMTc2XCIsXCIxNzdcIixcIjE3OFwiLFwiMTc5XCIsXCIxODBcIixcIjE4MVwiLFwiMTgyXCIsXCIxODNcIixcIjE4NFwiLFwiMTg1XCIsXCIxODZcIixcIjE4N1wiLFwiMTg4XCIsXCIxODlcIixcIjE5MFwiLFwiMTkxXCIsXCIxOTJcIixcIjE5M1wiLFwiMTk0XCIsXCIxOTVcIixcIjE5NlwiLFwiMTk3XCIsXCIxOThcIixcIjE5OVwiLFwiMjAwXCIsXCIyMDFcIixcIjIwMlwiLFwiMjAzXCIsXCIyMDRcIixcIjIwNVwiLFwiMjA2XCIsXCIyMDdcIixcIjIwOFwiLFwiMjA5XCIsXCIyMTBcIixcIjIxMVwiLFwiMjEyXCIsXCIyMTNcIixcIjIxNFwiLFwiMjE1XCIsXCIyMTZcIixcIjIxN1wiLFwiMjE4XCIsXCIyMTlcIixcIjIyMFwiLFwiMjIxXCIsXCIyMjJcIixcIjIyM1wiLFwiMjI0XCIsXCIyMjVcIixcIjIyNlwiLFwiMjI3XCIsXCIyMjhcIixcIjIyOVwiLFwiMjMwXCIsXCIyMzFcIixcIjIzMlwiLFwiMjMzXCIsXCIyMzRcIixcIjIzNVwiLFwiMjM2XCIsXCIyMzdcIixcIjIzOFwiLFwiMjM5XCIsXCIyNDBcIixcIjI0MVwiLFwiMjQyXCIsXCIyNDNcIixcIjI0NFwiLFwiMjQ1XCIsXCIyNDZcIixcIjI0N1wiLFwiMjQ4XCIsXCIyNDlcIixcIjI1MFwiLFwiMjUxXCIsXCIyNTJcIixcIjI1M1wiLFwiMjU0XCIsXCIyNTVcIl07dC5lbmNvZGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyluLnB1c2goZVt0W3JdXSk7cmV0dXJuIG4uam9pbihcIiBcIil9fSh0LkRlY2ltYWxTdHJpbmd8fCh0LkRlY2ltYWxTdHJpbmc9e30pKX0odC5FbmNvZGluZ3x8KHQuRW5jb2Rpbmc9e30pKX0ob3x8KG89e30pKSxmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpe2UuZW5jb2RlPWZ1bmN0aW9uKGUpe3JldHVybiB0LkJpbmFyeVN0cmluZy5lbmNvZGUoZSkucmVwbGFjZSgvXFwwL2csXCLogIJcIil9LGUuZGVjb2RlPWZ1bmN0aW9uKGUpe3JldHVybiB0LkJpbmFyeVN0cmluZy5kZWNvZGUoZS5yZXBsYWNlKC9cXHU4MDAyL2csXCJcXDBcIikpfX0odC5TdG9yYWdlQmluYXJ5U3RyaW5nfHwodC5TdG9yYWdlQmluYXJ5U3RyaW5nPXt9KSl9KHQuRW5jb2Rpbmd8fCh0LkVuY29kaW5nPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihuKXt2YXIgcixvO24uZW5jb2RlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiYwIT1lLmxlbmd0aD90LnJ1bm5pbmdJbk5vZGVKUygpP3QuQnVmZmVyVG9vbHMuYnVmZmVyVG9VaW50OEFycmF5KEJ1ZmZlci5mcm9tKGUsXCJ1dGY4XCIpKTpuLmNyZWF0ZU5hdGl2ZVRleHRFbmNvZGVyQW5kRGVjb2RlcklmQXZhaWxhYmxlKCk/ci5lbmNvZGUoZSk6bi5lbmNvZGVXaXRoSlMoZSk6bmV3IFVpbnQ4QXJyYXkoMCl9LG4uZGVjb2RlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiYwIT1lLmxlbmd0aD90LnJ1bm5pbmdJbk5vZGVKUygpP3QuQnVmZmVyVG9vbHMudWludDhBcnJheVRvQnVmZmVyKGUpLnRvU3RyaW5nKFwidXRmOFwiKTpuLmNyZWF0ZU5hdGl2ZVRleHRFbmNvZGVyQW5kRGVjb2RlcklmQXZhaWxhYmxlKCk/by5kZWNvZGUoZSk6bi5kZWNvZGVXaXRoSlMoZSk6XCJcIn0sbi5lbmNvZGVXaXRoSlM9ZnVuY3Rpb24odCxuKXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO258fChuPW5ldyBVaW50OEFycmF5KDQqdC5sZW5ndGgpKTtmb3IodmFyIHI9MCxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBpPWUuQ29kZVBvaW50LmVuY29kZUZyb21TdHJpbmcodCxvKTtpZihpPD0xMjcpbltyKytdPWk7ZWxzZSBpZihpPD0yMDQ3KW5bcisrXT0xOTJ8aT4+PjYsbltyKytdPTEyOHw2MyZpO2Vsc2UgaWYoaTw9NjU1MzUpbltyKytdPTIyNHxpPj4+MTIsbltyKytdPTEyOHxpPj4+NiY2MyxuW3IrK109MTI4fDYzJmk7ZWxzZXtpZighKGk8PTExMTQxMTEpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVRGLTE2IHN0cmluZzogRW5jb3VudGVyZWQgYSBjaGFyYWN0ZXIgdW5zdXBwb3J0ZWQgYnkgVVRGLTgvMTYgKFJGQyAzNjI5KVwiKTtuW3IrK109MjQwfGk+Pj4xOCxuW3IrK109MTI4fGk+Pj4xMiY2MyxuW3IrK109MTI4fGk+Pj42JjYzLG5bcisrXT0xMjh8NjMmaSxvKyt9fXJldHVybiBuLnN1YmFycmF5KDAscil9LG4uZGVjb2RlV2l0aEpTPWZ1bmN0aW9uKGUsbixyKXtpZih2b2lkIDA9PT1uJiYobj0wKSwhZXx8MD09ZS5sZW5ndGgpcmV0dXJuXCJcIjt2b2lkIDA9PT1yJiYocj1lLmxlbmd0aCk7Zm9yKHZhciBvLGksYT1uZXcgdC5TdHJpbmdCdWlsZGVyLHM9bix1PXI7czx1Oyl7aWYoKGk9ZVtzXSk+Pj43PT0wKW89aSxzKz0xO2Vsc2UgaWYoaT4+PjU9PTYpe2lmKHMrMT49cil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFVURi04IHN0cmVhbTogVHJ1bmNhdGVkIGNvZGVwb2ludCBzZXF1ZW5jZSBlbmNvdW50ZXJlZCBhdCBwb3NpdGlvbiBcIitzKTtvPSgzMSZpKTw8Nnw2MyZlW3MrMV0scys9Mn1lbHNlIGlmKGk+Pj40PT0xNCl7aWYocysyPj1yKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVRGLTggc3RyZWFtOiBUcnVuY2F0ZWQgY29kZXBvaW50IHNlcXVlbmNlIGVuY291bnRlcmVkIGF0IHBvc2l0aW9uIFwiK3MpO289KDE1JmkpPDwxMnwoNjMmZVtzKzFdKTw8Nnw2MyZlW3MrMl0scys9M31lbHNle2lmKGk+Pj4zIT0zMCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFVURi04IHN0cmVhbTogQW4gaW52YWxpZCBsZWFkIGJ5dGUgdmFsdWUgZW5jb3VudGVyZWQgYXQgcG9zaXRpb24gXCIrcyk7aWYocyszPj1yKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVRGLTggc3RyZWFtOiBUcnVuY2F0ZWQgY29kZXBvaW50IHNlcXVlbmNlIGVuY291bnRlcmVkIGF0IHBvc2l0aW9uIFwiK3MpO289KDcmaSk8PDE4fCg2MyZlW3MrMV0pPDwxMnwoNjMmZVtzKzJdKTw8Nnw2MyZlW3MrM10scys9NH1hLmFwcGVuZENvZGVQb2ludChvKX1yZXR1cm4gYS5nZXRPdXRwdXRTdHJpbmcoKX0sbi5jcmVhdGVOYXRpdmVUZXh0RW5jb2RlckFuZERlY29kZXJJZkF2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiEhcnx8XCJmdW5jdGlvblwiPT10eXBlb2YgVGV4dEVuY29kZXImJihyPW5ldyBUZXh0RW5jb2RlcihcInV0Zi04XCIpLG89bmV3IFRleHREZWNvZGVyKFwidXRmLThcIiksITApfX0oZS5VVEY4fHwoZS5VVEY4PXt9KSl9KHQuRW5jb2Rpbmd8fCh0LkVuY29kaW5nPXt9KSl9KG98fChvPXt9KSksZnVuY3Rpb24odCl7dC5jb21wcmVzcz1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSxudWxsPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjb21wcmVzczogdW5kZWZpbmVkIG9yIG51bGwgaW5wdXQgcmVjZWl2ZWRcIik7dmFyIHI9dC5Db21wcmVzc2lvbkNvbW1vbi5kZXRlY3RDb21wcmVzc2lvblNvdXJjZUVuY29kaW5nKGUpO249dC5PYmplY3RUb29scy5vdmVycmlkZSh7aW5wdXRFbmNvZGluZzpyLG91dHB1dEVuY29kaW5nOlwiQnl0ZUFycmF5XCJ9LG4pO3ZhciBvPShuZXcgdC5Db21wcmVzc29yKS5jb21wcmVzc0Jsb2NrKGUpO3JldHVybiB0LkNvbXByZXNzaW9uQ29tbW9uLmVuY29kZUNvbXByZXNzZWRCeXRlcyhvLG4ub3V0cHV0RW5jb2RpbmcpfSx0LmRlY29tcHJlc3M9ZnVuY3Rpb24oZSxuKXtpZih2b2lkIDA9PT1uJiYobj17fSksbnVsbD09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVjb21wcmVzczogdW5kZWZpbmVkIG9yIG51bGwgaW5wdXQgcmVjZWl2ZWRcIik7bj10Lk9iamVjdFRvb2xzLm92ZXJyaWRlKHtpbnB1dEVuY29kaW5nOlwiQnl0ZUFycmF5XCIsb3V0cHV0RW5jb2Rpbmc6XCJTdHJpbmdcIn0sbik7dmFyIHI9dC5Db21wcmVzc2lvbkNvbW1vbi5kZWNvZGVDb21wcmVzc2VkQnl0ZXMoZSxuLmlucHV0RW5jb2RpbmcpLG89KG5ldyB0LkRlY29tcHJlc3NvcikuZGVjb21wcmVzc0Jsb2NrKHIpO3JldHVybiB0LkNvbXByZXNzaW9uQ29tbW9uLmVuY29kZURlY29tcHJlc3NlZEJ5dGVzKG8sbi5vdXRwdXRFbmNvZGluZyl9LHQuY29tcHJlc3NBc3luYz1mdW5jdGlvbihlLG4scil7dmFyIG87bnVsbD09ciYmKHI9ZnVuY3Rpb24oKXt9KTt0cnl7bz10LkNvbXByZXNzaW9uQ29tbW9uLmRldGVjdENvbXByZXNzaW9uU291cmNlRW5jb2RpbmcoZSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih2b2lkIDAsdCl9bj10Lk9iamVjdFRvb2xzLm92ZXJyaWRlKHtpbnB1dEVuY29kaW5nOm8sb3V0cHV0RW5jb2Rpbmc6XCJCeXRlQXJyYXlcIix1c2VXZWJXb3JrZXI6ITAsYmxvY2tTaXplOjY1NTM2fSxuKSx0LmVucXVldWVJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7bi51c2VXZWJXb3JrZXImJnQuV2ViV29ya2VyLmNyZWF0ZUdsb2JhbFdvcmtlcklmTmVlZGVkKCk/dC5XZWJXb3JrZXIuY29tcHJlc3NBc3luYyhlLG4scik6dC5Bc3luY0NvbXByZXNzb3IuY29tcHJlc3NBc3luYyhlLG4scil9KSl9LHQuZGVjb21wcmVzc0FzeW5jPWZ1bmN0aW9uKGUsbixyKXtpZihudWxsPT1yJiYocj1mdW5jdGlvbigpe30pLG51bGwhPWUpe249dC5PYmplY3RUb29scy5vdmVycmlkZSh7aW5wdXRFbmNvZGluZzpcIkJ5dGVBcnJheVwiLG91dHB1dEVuY29kaW5nOlwiU3RyaW5nXCIsdXNlV2ViV29ya2VyOiEwLGJsb2NrU2l6ZTo2NTUzNn0sbik7dmFyIG89dC5CdWZmZXJUb29scy5jb252ZXJ0VG9VaW50OEFycmF5SWZOZWVkZWQoZSk7dC5FdmVudExvb3AuZW5xdWV1ZUltbWVkaWF0ZSgoZnVuY3Rpb24oKXtuLnVzZVdlYldvcmtlciYmdC5XZWJXb3JrZXIuY3JlYXRlR2xvYmFsV29ya2VySWZOZWVkZWQoKT90LldlYldvcmtlci5kZWNvbXByZXNzQXN5bmMobyxuLHIpOnQuQXN5bmNEZWNvbXByZXNzb3IuZGVjb21wcmVzc0FzeW5jKGUsbixyKX0pKX1lbHNlIHIodm9pZCAwLG5ldyBUeXBlRXJyb3IoXCJkZWNvbXByZXNzQXN5bmM6IHVuZGVmaW5lZCBvciBudWxsIGlucHV0IHJlY2VpdmVkXCIpKX0sdC5jcmVhdGVDb21wcmVzc2lvblN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0LkFzeW5jQ29tcHJlc3Nvci5jcmVhdGVDb21wcmVzc2lvblN0cmVhbSgpfSx0LmNyZWF0ZURlY29tcHJlc3Npb25TdHJlYW09ZnVuY3Rpb24oKXtyZXR1cm4gdC5Bc3luY0RlY29tcHJlc3Nvci5jcmVhdGVEZWNvbXByZXNzaW9uU3RyZWFtKCl9LHQuZW5jb2RlVVRGOD1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5VVEY4LmVuY29kZShlKX0sdC5kZWNvZGVVVEY4PWZ1bmN0aW9uKGUpe3JldHVybiB0LkVuY29kaW5nLlVURjguZGVjb2RlKGUpfSx0LmVuY29kZUJhc2U2ND1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5CYXNlNjQuZW5jb2RlKGUpfSx0LmRlY29kZUJhc2U2ND1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5CYXNlNjQuZGVjb2RlKGUpfSx0LmVuY29kZUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5CaW5hcnlTdHJpbmcuZW5jb2RlKGUpfSx0LmRlY29kZUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5CaW5hcnlTdHJpbmcuZGVjb2RlKGUpfSx0LmVuY29kZVN0b3JhZ2VCaW5hcnlTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuRW5jb2RpbmcuU3RvcmFnZUJpbmFyeVN0cmluZy5lbmNvZGUoZSl9LHQuZGVjb2RlU3RvcmFnZUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdC5FbmNvZGluZy5TdG9yYWdlQmluYXJ5U3RyaW5nLmRlY29kZShlKX19KG98fChvPXt9KSl9LDM3NDoodCxlLG4pPT57Y29uc3R7QWJvcnRFcnJvcjpyLGNvZGVzOm99PW4oMTQxKSx7aXNOb2RlU3RyZWFtOmksaXNXZWJTdHJlYW06YSxrQ29udHJvbGxlckVycm9yRnVuY3Rpb246c309bigxMzIpLHU9big4Nikse0VSUl9JTlZBTElEX0FSR19UWVBFOmx9PW87dC5leHBvcnRzLmFkZEFib3J0U2lnbmFsPWZ1bmN0aW9uKGUsbil7aWYoKCh0LGUpPT57aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fCEoXCJhYm9ydGVkXCJpbiB0KSl0aHJvdyBuZXcgbChlLFwiQWJvcnRTaWduYWxcIix0KX0pKGUsXCJzaWduYWxcIiksIWkobikmJiFhKG4pKXRocm93IG5ldyBsKFwic3RyZWFtXCIsW1wiUmVhZGFibGVTdHJlYW1cIixcIldyaXRhYmxlU3RyZWFtXCIsXCJTdHJlYW1cIl0sbik7cmV0dXJuIHQuZXhwb3J0cy5hZGRBYm9ydFNpZ25hbE5vVmFsaWRhdGUoZSxuKX0sdC5leHBvcnRzLmFkZEFib3J0U2lnbmFsTm9WYWxpZGF0ZT1mdW5jdGlvbih0LGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0fHwhKFwiYWJvcnRlZFwiaW4gdCkpcmV0dXJuIGU7Y29uc3Qgbj1pKGUpPygpPT57ZS5kZXN0cm95KG5ldyByKHZvaWQgMCx7Y2F1c2U6dC5yZWFzb259KSl9OigpPT57ZVtzXShuZXcgcih2b2lkIDAse2NhdXNlOnQucmVhc29ufSkpfTtyZXR1cm4gdC5hYm9ydGVkP24oKToodC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIixuKSx1KGUsKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLG4pKSkpLGV9fSw2MTY6KHQsZSxuKT0+e2NvbnN0e1N0cmluZ1Byb3RvdHlwZVNsaWNlOnIsU3ltYm9sSXRlcmF0b3I6byxUeXBlZEFycmF5UHJvdG90eXBlU2V0OmksVWludDhBcnJheTphfT1uKDE5MSkse0J1ZmZlcjpzfT1uKDQ4NSkse2luc3BlY3Q6dX09big3NzUpO3QuZXhwb3J0cz1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuaGVhZD1udWxsLHRoaXMudGFpbD1udWxsLHRoaXMubGVuZ3RoPTB9cHVzaCh0KXtjb25zdCBlPXtkYXRhOnQsbmV4dDpudWxsfTt0aGlzLmxlbmd0aD4wP3RoaXMudGFpbC5uZXh0PWU6dGhpcy5oZWFkPWUsdGhpcy50YWlsPWUsKyt0aGlzLmxlbmd0aH11bnNoaWZ0KHQpe2NvbnN0IGU9e2RhdGE6dCxuZXh0OnRoaXMuaGVhZH07MD09PXRoaXMubGVuZ3RoJiYodGhpcy50YWlsPWUpLHRoaXMuaGVhZD1lLCsrdGhpcy5sZW5ndGh9c2hpZnQoKXtpZigwPT09dGhpcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9dGhpcy5oZWFkLmRhdGE7cmV0dXJuIDE9PT10aGlzLmxlbmd0aD90aGlzLmhlYWQ9dGhpcy50YWlsPW51bGw6dGhpcy5oZWFkPXRoaXMuaGVhZC5uZXh0LC0tdGhpcy5sZW5ndGgsdH1jbGVhcigpe3RoaXMuaGVhZD10aGlzLnRhaWw9bnVsbCx0aGlzLmxlbmd0aD0wfWpvaW4odCl7aWYoMD09PXRoaXMubGVuZ3RoKXJldHVyblwiXCI7bGV0IGU9dGhpcy5oZWFkLG49XCJcIitlLmRhdGE7Zm9yKDtudWxsIT09KGU9ZS5uZXh0KTspbis9dCtlLmRhdGE7cmV0dXJuIG59Y29uY2F0KHQpe2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm4gcy5hbGxvYygwKTtjb25zdCBlPXMuYWxsb2NVbnNhZmUodD4+PjApO2xldCBuPXRoaXMuaGVhZCxyPTA7Zm9yKDtuOylpKGUsbi5kYXRhLHIpLHIrPW4uZGF0YS5sZW5ndGgsbj1uLm5leHQ7cmV0dXJuIGV9Y29uc3VtZSh0LGUpe2NvbnN0IG49dGhpcy5oZWFkLmRhdGE7aWYodDxuLmxlbmd0aCl7Y29uc3QgZT1uLnNsaWNlKDAsdCk7cmV0dXJuIHRoaXMuaGVhZC5kYXRhPW4uc2xpY2UodCksZX1yZXR1cm4gdD09PW4ubGVuZ3RoP3RoaXMuc2hpZnQoKTplP3RoaXMuX2dldFN0cmluZyh0KTp0aGlzLl9nZXRCdWZmZXIodCl9Zmlyc3QoKXtyZXR1cm4gdGhpcy5oZWFkLmRhdGF9KltvXSgpe2ZvcihsZXQgdD10aGlzLmhlYWQ7dDt0PXQubmV4dCl5aWVsZCB0LmRhdGF9X2dldFN0cmluZyh0KXtsZXQgZT1cIlwiLG49dGhpcy5oZWFkLG89MDtkb3tjb25zdCBpPW4uZGF0YTtpZighKHQ+aS5sZW5ndGgpKXt0PT09aS5sZW5ndGg/KGUrPWksKytvLG4ubmV4dD90aGlzLmhlYWQ9bi5uZXh0OnRoaXMuaGVhZD10aGlzLnRhaWw9bnVsbCk6KGUrPXIoaSwwLHQpLHRoaXMuaGVhZD1uLG4uZGF0YT1yKGksdCkpO2JyZWFrfWUrPWksdC09aS5sZW5ndGgsKytvfXdoaWxlKG51bGwhPT0obj1uLm5leHQpKTtyZXR1cm4gdGhpcy5sZW5ndGgtPW8sZX1fZ2V0QnVmZmVyKHQpe2NvbnN0IGU9cy5hbGxvY1Vuc2FmZSh0KSxuPXQ7bGV0IHI9dGhpcy5oZWFkLG89MDtkb3tjb25zdCBzPXIuZGF0YTtpZighKHQ+cy5sZW5ndGgpKXt0PT09cy5sZW5ndGg/KGkoZSxzLG4tdCksKytvLHIubmV4dD90aGlzLmhlYWQ9ci5uZXh0OnRoaXMuaGVhZD10aGlzLnRhaWw9bnVsbCk6KGkoZSxuZXcgYShzLmJ1ZmZlcixzLmJ5dGVPZmZzZXQsdCksbi10KSx0aGlzLmhlYWQ9cixyLmRhdGE9cy5zbGljZSh0KSk7YnJlYWt9aShlLHMsbi10KSx0LT1zLmxlbmd0aCwrK299d2hpbGUobnVsbCE9PShyPXIubmV4dCkpO3JldHVybiB0aGlzLmxlbmd0aC09byxlfVtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKHQsZSl7cmV0dXJuIHUodGhpcyx7Li4uZSxkZXB0aDowLGN1c3RvbUluc3BlY3Q6ITF9KX19fSw4MTg6KHQsZSxuKT0+e2NvbnN0e3BpcGVsaW5lOnJ9PW4oNzU0KSxvPW4oMTgyKSx7ZGVzdHJveWVyOml9PW4oMjMwKSx7aXNOb2RlU3RyZWFtOmEsaXNSZWFkYWJsZTpzLGlzV3JpdGFibGU6dSxpc1dlYlN0cmVhbTpsLGlzVHJhbnNmb3JtU3RyZWFtOmMsaXNXcml0YWJsZVN0cmVhbTpmLGlzUmVhZGFibGVTdHJlYW06ZH09bigxMzIpLHtBYm9ydEVycm9yOmgsY29kZXM6e0VSUl9JTlZBTElEX0FSR19WQUxVRTpwLEVSUl9NSVNTSU5HX0FSR1M6Z319PW4oMTQxKSx5PW4oODYpO3QuZXhwb3J0cz1mdW5jdGlvbiguLi50KXtpZigwPT09dC5sZW5ndGgpdGhyb3cgbmV3IGcoXCJzdHJlYW1zXCIpO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gby5mcm9tKHRbMF0pO2NvbnN0IGU9Wy4uLnRdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHRbMF0mJih0WzBdPW8uZnJvbSh0WzBdKSksXCJmdW5jdGlvblwiPT10eXBlb2YgdFt0Lmxlbmd0aC0xXSl7Y29uc3QgZT10Lmxlbmd0aC0xO3RbZV09by5mcm9tKHRbZV0pfWZvcihsZXQgbj0wO248dC5sZW5ndGg7KytuKWlmKGEodFtuXSl8fGwodFtuXSkpe2lmKG48dC5sZW5ndGgtMSYmIShzKHRbbl0pfHxkKHRbbl0pfHxjKHRbbl0pKSl0aHJvdyBuZXcgcChgc3RyZWFtc1ske259XWAsZVtuXSxcIm11c3QgYmUgcmVhZGFibGVcIik7aWYobj4wJiYhKHUodFtuXSl8fGYodFtuXSl8fGModFtuXSkpKXRocm93IG5ldyBwKGBzdHJlYW1zWyR7bn1dYCxlW25dLFwibXVzdCBiZSB3cml0YWJsZVwiKX1sZXQgbixtLHYsYix3O2NvbnN0IF89dFswXSxFPXIodCwoZnVuY3Rpb24odCl7Y29uc3QgZT1iO2I9bnVsbCxlP2UodCk6dD93LmRlc3Ryb3kodCk6QXx8U3x8dy5kZXN0cm95KCl9KSksUz0hISh1KF8pfHxmKF8pfHxjKF8pKSxBPSEhKHMoRSl8fGQoRSl8fGMoRSkpO2lmKHc9bmV3IG8oe3dyaXRhYmxlT2JqZWN0TW9kZTohKG51bGw9PV98fCFfLndyaXRhYmxlT2JqZWN0TW9kZSkscmVhZGFibGVPYmplY3RNb2RlOiEobnVsbD09RXx8IUUud3JpdGFibGVPYmplY3RNb2RlKSx3cml0YWJsZTpTLHJlYWRhYmxlOkF9KSxTKXtpZihhKF8pKXcuX3dyaXRlPWZ1bmN0aW9uKHQsZSxyKXtfLndyaXRlKHQsZSk/cigpOm49cn0sdy5fZmluYWw9ZnVuY3Rpb24odCl7Xy5lbmQoKSxtPXR9LF8ub24oXCJkcmFpblwiLChmdW5jdGlvbigpe2lmKG4pe2NvbnN0IHQ9bjtuPW51bGwsdCgpfX0pKTtlbHNlIGlmKGwoXykpe2NvbnN0IHQ9KGMoXyk/Xy53cml0YWJsZTpfKS5nZXRXcml0ZXIoKTt3Ll93cml0ZT1hc3luYyBmdW5jdGlvbihlLG4scil7dHJ5e2F3YWl0IHQucmVhZHksdC53cml0ZShlKS5jYXRjaCgoKCk9Pnt9KSkscigpfWNhdGNoKHQpe3IodCl9fSx3Ll9maW5hbD1hc3luYyBmdW5jdGlvbihlKXt0cnl7YXdhaXQgdC5yZWFkeSx0LmNsb3NlKCkuY2F0Y2goKCgpPT57fSkpLG09ZX1jYXRjaCh0KXtlKHQpfX19Y29uc3QgdD1jKEUpP0UucmVhZGFibGU6RTt5KHQsKCgpPT57aWYobSl7Y29uc3QgdD1tO209bnVsbCx0KCl9fSkpfWlmKEEpaWYoYShFKSlFLm9uKFwicmVhZGFibGVcIiwoZnVuY3Rpb24oKXtpZih2KXtjb25zdCB0PXY7dj1udWxsLHQoKX19KSksRS5vbihcImVuZFwiLChmdW5jdGlvbigpe3cucHVzaChudWxsKX0pKSx3Ll9yZWFkPWZ1bmN0aW9uKCl7Zm9yKDs7KXtjb25zdCB0PUUucmVhZCgpO2lmKG51bGw9PT10KXJldHVybiB2b2lkKHY9dy5fcmVhZCk7aWYoIXcucHVzaCh0KSlyZXR1cm59fTtlbHNlIGlmKGwoRSkpe2NvbnN0IHQ9KGMoRSk/RS5yZWFkYWJsZTpFKS5nZXRSZWFkZXIoKTt3Ll9yZWFkPWFzeW5jIGZ1bmN0aW9uKCl7Zm9yKDs7KXRyeXtjb25zdHt2YWx1ZTplLGRvbmU6bn09YXdhaXQgdC5yZWFkKCk7aWYoIXcucHVzaChlKSlyZXR1cm47aWYobilyZXR1cm4gdm9pZCB3LnB1c2gobnVsbCl9Y2F0Y2h7cmV0dXJufX19cmV0dXJuIHcuX2Rlc3Ryb3k9ZnVuY3Rpb24odCxlKXt0fHxudWxsPT09Ynx8KHQ9bmV3IGgpLHY9bnVsbCxuPW51bGwsbT1udWxsLG51bGw9PT1iP2UodCk6KGI9ZSxhKEUpJiZpKEUsdCkpfSx3fX0sMjMwOih0LGUsbik9Pntjb25zdCByPW4oNTMzKSx7YWdncmVnYXRlVHdvRXJyb3JzOm8sY29kZXM6e0VSUl9NVUxUSVBMRV9DQUxMQkFDSzppfSxBYm9ydEVycm9yOmF9PW4oMTQxKSx7U3ltYm9sOnN9PW4oMTkxKSx7a0Rlc3Ryb3llZDp1LGlzRGVzdHJveWVkOmwsaXNGaW5pc2hlZDpjLGlzU2VydmVyUmVxdWVzdDpmfT1uKDEzMiksZD1zKFwia0Rlc3Ryb3lcIiksaD1zKFwia0NvbnN0cnVjdFwiKTtmdW5jdGlvbiBwKHQsZSxuKXt0JiYodC5zdGFjayxlJiYhZS5lcnJvcmVkJiYoZS5lcnJvcmVkPXQpLG4mJiFuLmVycm9yZWQmJihuLmVycm9yZWQ9dCkpfWZ1bmN0aW9uIGcodCxlLG4pe2xldCBvPSExO2Z1bmN0aW9uIGkoZSl7aWYobylyZXR1cm47bz0hMDtjb25zdCBpPXQuX3JlYWRhYmxlU3RhdGUsYT10Ll93cml0YWJsZVN0YXRlO3AoZSxhLGkpLGEmJihhLmNsb3NlZD0hMCksaSYmKGkuY2xvc2VkPSEwKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuKGUpLGU/ci5uZXh0VGljayh5LHQsZSk6ci5uZXh0VGljayhtLHQpfXRyeXt0Ll9kZXN0cm95KGV8fG51bGwsaSl9Y2F0Y2goZSl7aShlKX19ZnVuY3Rpb24geSh0LGUpe3YodCxlKSxtKHQpfWZ1bmN0aW9uIG0odCl7Y29uc3QgZT10Ll9yZWFkYWJsZVN0YXRlLG49dC5fd3JpdGFibGVTdGF0ZTtuJiYobi5jbG9zZUVtaXR0ZWQ9ITApLGUmJihlLmNsb3NlRW1pdHRlZD0hMCksKG51bGwhPW4mJm4uZW1pdENsb3NlfHxudWxsIT1lJiZlLmVtaXRDbG9zZSkmJnQuZW1pdChcImNsb3NlXCIpfWZ1bmN0aW9uIHYodCxlKXtjb25zdCBuPXQuX3JlYWRhYmxlU3RhdGUscj10Ll93cml0YWJsZVN0YXRlO251bGwhPXImJnIuZXJyb3JFbWl0dGVkfHxudWxsIT1uJiZuLmVycm9yRW1pdHRlZHx8KHImJihyLmVycm9yRW1pdHRlZD0hMCksbiYmKG4uZXJyb3JFbWl0dGVkPSEwKSx0LmVtaXQoXCJlcnJvclwiLGUpKX1mdW5jdGlvbiBiKHQsZSxuKXtjb25zdCBvPXQuX3JlYWRhYmxlU3RhdGUsaT10Ll93cml0YWJsZVN0YXRlO2lmKG51bGwhPWkmJmkuZGVzdHJveWVkfHxudWxsIT1vJiZvLmRlc3Ryb3llZClyZXR1cm4gdGhpcztudWxsIT1vJiZvLmF1dG9EZXN0cm95fHxudWxsIT1pJiZpLmF1dG9EZXN0cm95P3QuZGVzdHJveShlKTplJiYoZS5zdGFjayxpJiYhaS5lcnJvcmVkJiYoaS5lcnJvcmVkPWUpLG8mJiFvLmVycm9yZWQmJihvLmVycm9yZWQ9ZSksbj9yLm5leHRUaWNrKHYsdCxlKTp2KHQsZSkpfWZ1bmN0aW9uIHcodCl7bGV0IGU9ITE7ZnVuY3Rpb24gbihuKXtpZihlKXJldHVybiB2b2lkIGIodCxudWxsIT1uP246bmV3IGkpO2U9ITA7Y29uc3Qgbz10Ll9yZWFkYWJsZVN0YXRlLGE9dC5fd3JpdGFibGVTdGF0ZSxzPWF8fG87byYmKG8uY29uc3RydWN0ZWQ9ITApLGEmJihhLmNvbnN0cnVjdGVkPSEwKSxzLmRlc3Ryb3llZD90LmVtaXQoZCxuKTpuP2IodCxuLCEwKTpyLm5leHRUaWNrKF8sdCl9dHJ5e3QuX2NvbnN0cnVjdCgodD0+e3IubmV4dFRpY2sobix0KX0pKX1jYXRjaCh0KXtyLm5leHRUaWNrKG4sdCl9fWZ1bmN0aW9uIF8odCl7dC5lbWl0KGgpfWZ1bmN0aW9uIEUodCl7cmV0dXJuKG51bGw9PXQ/dm9pZCAwOnQuc2V0SGVhZGVyKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5hYm9ydH1mdW5jdGlvbiBTKHQpe3QuZW1pdChcImNsb3NlXCIpfWZ1bmN0aW9uIEEodCxlKXt0LmVtaXQoXCJlcnJvclwiLGUpLHIubmV4dFRpY2soUyx0KX10LmV4cG9ydHM9e2NvbnN0cnVjdDpmdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuX2NvbnN0cnVjdClyZXR1cm47Y29uc3Qgbj10Ll9yZWFkYWJsZVN0YXRlLG89dC5fd3JpdGFibGVTdGF0ZTtuJiYobi5jb25zdHJ1Y3RlZD0hMSksbyYmKG8uY29uc3RydWN0ZWQ9ITEpLHQub25jZShoLGUpLHQubGlzdGVuZXJDb3VudChoKT4xfHxyLm5leHRUaWNrKHcsdCl9LGRlc3Ryb3llcjpmdW5jdGlvbih0LGUpe3QmJiFsKHQpJiYoZXx8Yyh0KXx8KGU9bmV3IGEpLGYodCk/KHQuc29ja2V0PW51bGwsdC5kZXN0cm95KGUpKTpFKHQpP3QuYWJvcnQoKTpFKHQucmVxKT90LnJlcS5hYm9ydCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGVzdHJveT90LmRlc3Ryb3koZSk6XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jbG9zZT90LmNsb3NlKCk6ZT9yLm5leHRUaWNrKEEsdCxlKTpyLm5leHRUaWNrKFMsdCksdC5kZXN0cm95ZWR8fCh0W3VdPSEwKSl9LGRlc3Ryb3k6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXRoaXMuX3JlYWRhYmxlU3RhdGUscj10aGlzLl93cml0YWJsZVN0YXRlLGk9cnx8bjtyZXR1cm4gbnVsbCE9ciYmci5kZXN0cm95ZWR8fG51bGwhPW4mJm4uZGVzdHJveWVkPyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlKCksdGhpcyk6KHAodCxyLG4pLHImJihyLmRlc3Ryb3llZD0hMCksbiYmKG4uZGVzdHJveWVkPSEwKSxpLmNvbnN0cnVjdGVkP2codGhpcyx0LGUpOnRoaXMub25jZShkLChmdW5jdGlvbihuKXtnKHRoaXMsbyhuLHQpLGUpfSkpLHRoaXMpfSx1bmRlc3Ryb3k6ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX3JlYWRhYmxlU3RhdGUsZT10aGlzLl93cml0YWJsZVN0YXRlO3QmJih0LmNvbnN0cnVjdGVkPSEwLHQuY2xvc2VkPSExLHQuY2xvc2VFbWl0dGVkPSExLHQuZGVzdHJveWVkPSExLHQuZXJyb3JlZD1udWxsLHQuZXJyb3JFbWl0dGVkPSExLHQucmVhZGluZz0hMSx0LmVuZGVkPSExPT09dC5yZWFkYWJsZSx0LmVuZEVtaXR0ZWQ9ITE9PT10LnJlYWRhYmxlKSxlJiYoZS5jb25zdHJ1Y3RlZD0hMCxlLmRlc3Ryb3llZD0hMSxlLmNsb3NlZD0hMSxlLmNsb3NlRW1pdHRlZD0hMSxlLmVycm9yZWQ9bnVsbCxlLmVycm9yRW1pdHRlZD0hMSxlLmZpbmFsQ2FsbGVkPSExLGUucHJlZmluaXNoZWQ9ITEsZS5lbmRlZD0hMT09PWUud3JpdGFibGUsZS5lbmRpbmc9ITE9PT1lLndyaXRhYmxlLGUuZmluaXNoZWQ9ITE9PT1lLndyaXRhYmxlKX0sZXJyb3JPckRlc3Ryb3k6Yn19LDE4MjoodCxlLG4pPT57Y29uc3R7T2JqZWN0RGVmaW5lUHJvcGVydGllczpyLE9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvcjpvLE9iamVjdEtleXM6aSxPYmplY3RTZXRQcm90b3R5cGVPZjphfT1uKDE5MSk7dC5leHBvcnRzPWw7Y29uc3Qgcz1uKDg1OCksdT1uKDM3Myk7YShsLnByb3RvdHlwZSxzLnByb3RvdHlwZSksYShsLHMpO3tjb25zdCB0PWkodS5wcm90b3R5cGUpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCBuPXRbZV07bC5wcm90b3R5cGVbbl18fChsLnByb3RvdHlwZVtuXT11LnByb3RvdHlwZVtuXSl9fWZ1bmN0aW9uIGwodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbCkpcmV0dXJuIG5ldyBsKHQpO3MuY2FsbCh0aGlzLHQpLHUuY2FsbCh0aGlzLHQpLHQ/KHRoaXMuYWxsb3dIYWxmT3Blbj0hMSE9PXQuYWxsb3dIYWxmT3BlbiwhMT09PXQucmVhZGFibGUmJih0aGlzLl9yZWFkYWJsZVN0YXRlLnJlYWRhYmxlPSExLHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQ9ITAsdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkPSEwKSwhMT09PXQud3JpdGFibGUmJih0aGlzLl93cml0YWJsZVN0YXRlLndyaXRhYmxlPSExLHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nPSEwLHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQ9ITAsdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZD0hMCkpOnRoaXMuYWxsb3dIYWxmT3Blbj0hMH1sZXQgYyxmO2Z1bmN0aW9uIGQoKXtyZXR1cm4gdm9pZCAwPT09YyYmKGM9e30pLGN9cihsLnByb3RvdHlwZSx7d3JpdGFibGU6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZVwiKX0sd3JpdGFibGVIaWdoV2F0ZXJNYXJrOntfX3Byb3RvX186bnVsbCwuLi5vKHUucHJvdG90eXBlLFwid3JpdGFibGVIaWdoV2F0ZXJNYXJrXCIpfSx3cml0YWJsZU9iamVjdE1vZGU6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZU9iamVjdE1vZGVcIil9LHdyaXRhYmxlQnVmZmVyOntfX3Byb3RvX186bnVsbCwuLi5vKHUucHJvdG90eXBlLFwid3JpdGFibGVCdWZmZXJcIil9LHdyaXRhYmxlTGVuZ3RoOntfX3Byb3RvX186bnVsbCwuLi5vKHUucHJvdG90eXBlLFwid3JpdGFibGVMZW5ndGhcIil9LHdyaXRhYmxlRmluaXNoZWQ6e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZUZpbmlzaGVkXCIpfSx3cml0YWJsZUNvcmtlZDp7X19wcm90b19fOm51bGwsLi4ubyh1LnByb3RvdHlwZSxcIndyaXRhYmxlQ29ya2VkXCIpfSx3cml0YWJsZUVuZGVkOntfX3Byb3RvX186bnVsbCwuLi5vKHUucHJvdG90eXBlLFwid3JpdGFibGVFbmRlZFwiKX0sd3JpdGFibGVOZWVkRHJhaW46e19fcHJvdG9fXzpudWxsLC4uLm8odS5wcm90b3R5cGUsXCJ3cml0YWJsZU5lZWREcmFpblwiKX0sZGVzdHJveWVkOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5fcmVhZGFibGVTdGF0ZSYmdm9pZCAwIT09dGhpcy5fd3JpdGFibGVTdGF0ZSYmKHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkJiZ0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCl9LHNldCh0KXt0aGlzLl9yZWFkYWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlJiYodGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9dCx0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZD10KX19fSksbC5mcm9tV2ViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGQoKS5uZXdTdHJlYW1EdXBsZXhGcm9tUmVhZGFibGVXcml0YWJsZVBhaXIodCxlKX0sbC50b1dlYj1mdW5jdGlvbih0KXtyZXR1cm4gZCgpLm5ld1JlYWRhYmxlV3JpdGFibGVQYWlyRnJvbUR1cGxleCh0KX0sbC5mcm9tPWZ1bmN0aW9uKHQpe3JldHVybiBmfHwoZj1uKDc0OSkpLGYodCxcImJvZHlcIil9fSw3NDk6KHQsZSxuKT0+e2NvbnN0IHI9big1MzMpLG89big0ODUpLHtpc1JlYWRhYmxlOmksaXNXcml0YWJsZTphLGlzSXRlcmFibGU6cyxpc05vZGVTdHJlYW06dSxpc1JlYWRhYmxlTm9kZVN0cmVhbTpsLGlzV3JpdGFibGVOb2RlU3RyZWFtOmMsaXNEdXBsZXhOb2RlU3RyZWFtOmZ9PW4oMTMyKSxkPW4oODYpLHtBYm9ydEVycm9yOmgsY29kZXM6e0VSUl9JTlZBTElEX0FSR19UWVBFOnAsRVJSX0lOVkFMSURfUkVUVVJOX1ZBTFVFOmd9fT1uKDE0MSkse2Rlc3Ryb3llcjp5fT1uKDIzMCksbT1uKDE4Miksdj1uKDg1OCkse2NyZWF0ZURlZmVycmVkUHJvbWlzZTpifT1uKDc3NSksdz1uKDkxMyksXz1nbG9iYWxUaGlzLkJsb2J8fG8uQmxvYixFPXZvaWQgMCE9PV8/ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBffTpmdW5jdGlvbih0KXtyZXR1cm4hMX0sUz1nbG9iYWxUaGlzLkFib3J0Q29udHJvbGxlcnx8big4NzYpLkFib3J0Q29udHJvbGxlcix7RnVuY3Rpb25Qcm90b3R5cGVDYWxsOkF9PW4oMTkxKTtjbGFzcyBJIGV4dGVuZHMgbXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSwhMT09PShudWxsPT10P3ZvaWQgMDp0LnJlYWRhYmxlKSYmKHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGFibGU9ITEsdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRlZD0hMCx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ9ITApLCExPT09KG51bGw9PXQ/dm9pZCAwOnQud3JpdGFibGUpJiYodGhpcy5fd3JpdGFibGVTdGF0ZS53cml0YWJsZT0hMSx0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZz0hMCx0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkPSEwLHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQ9ITApfX1mdW5jdGlvbiBUKHQpe2NvbnN0IGU9dC5yZWFkYWJsZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdC5yZWFkYWJsZS5yZWFkP3Yud3JhcCh0LnJlYWRhYmxlKTp0LnJlYWRhYmxlLG49dC53cml0YWJsZTtsZXQgcixvLHMsdSxsLGM9ISFpKGUpLGY9ISFhKG4pO2Z1bmN0aW9uIHAodCl7Y29uc3QgZT11O3U9bnVsbCxlP2UodCk6dCYmbC5kZXN0cm95KHQpfXJldHVybiBsPW5ldyBJKHtyZWFkYWJsZU9iamVjdE1vZGU6IShudWxsPT1lfHwhZS5yZWFkYWJsZU9iamVjdE1vZGUpLHdyaXRhYmxlT2JqZWN0TW9kZTohKG51bGw9PW58fCFuLndyaXRhYmxlT2JqZWN0TW9kZSkscmVhZGFibGU6Yyx3cml0YWJsZTpmfSksZiYmKGQobiwodD0+e2Y9ITEsdCYmeShlLHQpLHAodCl9KSksbC5fd3JpdGU9ZnVuY3Rpb24odCxlLG8pe24ud3JpdGUodCxlKT9vKCk6cj1vfSxsLl9maW5hbD1mdW5jdGlvbih0KXtuLmVuZCgpLG89dH0sbi5vbihcImRyYWluXCIsKGZ1bmN0aW9uKCl7aWYocil7Y29uc3QgdD1yO3I9bnVsbCx0KCl9fSkpLG4ub24oXCJmaW5pc2hcIiwoZnVuY3Rpb24oKXtpZihvKXtjb25zdCB0PW87bz1udWxsLHQoKX19KSkpLGMmJihkKGUsKHQ9PntjPSExLHQmJnkoZSx0KSxwKHQpfSkpLGUub24oXCJyZWFkYWJsZVwiLChmdW5jdGlvbigpe2lmKHMpe2NvbnN0IHQ9cztzPW51bGwsdCgpfX0pKSxlLm9uKFwiZW5kXCIsKGZ1bmN0aW9uKCl7bC5wdXNoKG51bGwpfSkpLGwuX3JlYWQ9ZnVuY3Rpb24oKXtmb3IoOzspe2NvbnN0IHQ9ZS5yZWFkKCk7aWYobnVsbD09PXQpcmV0dXJuIHZvaWQocz1sLl9yZWFkKTtpZighbC5wdXNoKHQpKXJldHVybn19KSxsLl9kZXN0cm95PWZ1bmN0aW9uKHQsaSl7dHx8bnVsbD09PXV8fCh0PW5ldyBoKSxzPW51bGwscj1udWxsLG89bnVsbCxudWxsPT09dT9pKHQpOih1PWkseShuLHQpLHkoZSx0KSl9LGx9dC5leHBvcnRzPWZ1bmN0aW9uIHQoZSxuKXtpZihmKGUpKXJldHVybiBlO2lmKGwoZSkpcmV0dXJuIFQoe3JlYWRhYmxlOmV9KTtpZihjKGUpKXJldHVybiBUKHt3cml0YWJsZTplfSk7aWYodShlKSlyZXR1cm4gVCh7d3JpdGFibGU6ITEscmVhZGFibGU6ITF9KTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXtjb25zdHt2YWx1ZTp0LHdyaXRlOm8sZmluYWw6aSxkZXN0cm95OmF9PWZ1bmN0aW9uKHQpe2xldHtwcm9taXNlOmUscmVzb2x2ZTpufT1iKCk7Y29uc3Qgbz1uZXcgUyxpPW8uc2lnbmFsLGE9dChhc3luYyBmdW5jdGlvbiooKXtmb3IoOzspe2NvbnN0IHQ9ZTtlPW51bGw7Y29uc3R7Y2h1bms6byxkb25lOmEsY2I6c309YXdhaXQgdDtpZihyLm5leHRUaWNrKHMpLGEpcmV0dXJuO2lmKGkuYWJvcnRlZCl0aHJvdyBuZXcgaCh2b2lkIDAse2NhdXNlOmkucmVhc29ufSk7KHtwcm9taXNlOmUscmVzb2x2ZTpufT1iKCkpLHlpZWxkIG99fSgpLHtzaWduYWw6aX0pO3JldHVybnt2YWx1ZTphLHdyaXRlKHQsZSxyKXtjb25zdCBvPW47bj1udWxsLG8oe2NodW5rOnQsZG9uZTohMSxjYjpyfSl9LGZpbmFsKHQpe2NvbnN0IGU9bjtuPW51bGwsZSh7ZG9uZTohMCxjYjp0fSl9LGRlc3Ryb3kodCxlKXtvLmFib3J0KCksZSh0KX19fShlKTtpZihzKHQpKXJldHVybiB3KEksdCx7b2JqZWN0TW9kZTohMCx3cml0ZTpvLGZpbmFsOmksZGVzdHJveTphfSk7Y29uc3QgdT1udWxsPT10P3ZvaWQgMDp0LnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdSl7bGV0IGU7Y29uc3Qgbj1BKHUsdCwodD0+e2lmKG51bGwhPXQpdGhyb3cgbmV3IGcoXCJudWxseVwiLFwiYm9keVwiLHQpfSksKHQ9Pnt5KGUsdCl9KSk7cmV0dXJuIGU9bmV3IEkoe29iamVjdE1vZGU6ITAscmVhZGFibGU6ITEsd3JpdGU6byxmaW5hbCh0KXtpKChhc3luYygpPT57dHJ5e2F3YWl0IG4sci5uZXh0VGljayh0LG51bGwpfWNhdGNoKGUpe3IubmV4dFRpY2sodCxlKX19KSl9LGRlc3Ryb3k6YX0pfXRocm93IG5ldyBnKFwiSXRlcmFibGUsIEFzeW5jSXRlcmFibGUgb3IgQXN5bmNGdW5jdGlvblwiLG4sdCl9aWYoRShlKSlyZXR1cm4gdChlLmFycmF5QnVmZmVyKCkpO2lmKHMoZSkpcmV0dXJuIHcoSSxlLHtvYmplY3RNb2RlOiEwLHdyaXRhYmxlOiExfSk7aWYoXCJvYmplY3RcIj09dHlwZW9mKG51bGw9PWU/dm9pZCAwOmUud3JpdGFibGUpfHxcIm9iamVjdFwiPT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5yZWFkYWJsZSkpe3JldHVybiBUKHtyZWFkYWJsZTpudWxsIT1lJiZlLnJlYWRhYmxlP2wobnVsbD09ZT92b2lkIDA6ZS5yZWFkYWJsZSk/bnVsbD09ZT92b2lkIDA6ZS5yZWFkYWJsZTp0KGUucmVhZGFibGUpOnZvaWQgMCx3cml0YWJsZTpudWxsIT1lJiZlLndyaXRhYmxlP2MobnVsbD09ZT92b2lkIDA6ZS53cml0YWJsZSk/bnVsbD09ZT92b2lkIDA6ZS53cml0YWJsZTp0KGUud3JpdGFibGUpOnZvaWQgMH0pfWNvbnN0IG89bnVsbD09ZT92b2lkIDA6ZS50aGVuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG8pe2xldCB0O3JldHVybiBBKG8sZSwoZT0+e251bGwhPWUmJnQucHVzaChlKSx0LnB1c2gobnVsbCl9KSwoZT0+e3kodCxlKX0pKSx0PW5ldyBJKHtvYmplY3RNb2RlOiEwLHdyaXRhYmxlOiExLHJlYWQoKXt9fSl9dGhyb3cgbmV3IHAobixbXCJCbG9iXCIsXCJSZWFkYWJsZVN0cmVhbVwiLFwiV3JpdGFibGVTdHJlYW1cIixcIlN0cmVhbVwiLFwiSXRlcmFibGVcIixcIkFzeW5jSXRlcmFibGVcIixcIkZ1bmN0aW9uXCIsXCJ7IHJlYWRhYmxlLCB3cml0YWJsZSB9IHBhaXJcIixcIlByb21pc2VcIl0sZSl9fSw4NjoodCxlLG4pPT57Y29uc3Qgcj1uKDUzMykse0Fib3J0RXJyb3I6byxjb2RlczppfT1uKDE0MSkse0VSUl9JTlZBTElEX0FSR19UWVBFOmEsRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0U6c309aSx7a0VtcHR5T2JqZWN0OnUsb25jZTpsfT1uKDc3NSkse3ZhbGlkYXRlQWJvcnRTaWduYWw6Yyx2YWxpZGF0ZUZ1bmN0aW9uOmYsdmFsaWRhdGVPYmplY3Q6ZCx2YWxpZGF0ZUJvb2xlYW46aH09big5MDQpLHtQcm9taXNlOnAsUHJvbWlzZVByb3RvdHlwZVRoZW46Z309bigxOTEpLHtpc0Nsb3NlZDp5LGlzUmVhZGFibGU6bSxpc1JlYWRhYmxlTm9kZVN0cmVhbTp2LGlzUmVhZGFibGVTdHJlYW06Yixpc1JlYWRhYmxlRmluaXNoZWQ6dyxpc1JlYWRhYmxlRXJyb3JlZDpfLGlzV3JpdGFibGU6RSxpc1dyaXRhYmxlTm9kZVN0cmVhbTpTLGlzV3JpdGFibGVTdHJlYW06QSxpc1dyaXRhYmxlRmluaXNoZWQ6SSxpc1dyaXRhYmxlRXJyb3JlZDpULGlzTm9kZVN0cmVhbTpSLHdpbGxFbWl0Q2xvc2U6eCxrSXNDbG9zZWRQcm9taXNlOkN9PW4oMTMyKTtjb25zdCBCPSgpPT57fTtmdW5jdGlvbiBrKHQsZSxuKXt2YXIgaSxoO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoPyhuPWUsZT11KTpudWxsPT1lP2U9dTpkKGUsXCJvcHRpb25zXCIpLGYobixcImNhbGxiYWNrXCIpLGMoZS5zaWduYWwsXCJvcHRpb25zLnNpZ25hbFwiKSxuPWwobiksYih0KXx8QSh0KSlyZXR1cm4gZnVuY3Rpb24odCxlLG4pe2xldCBpPSExLGE9QjtpZihlLnNpZ25hbClpZihhPSgpPT57aT0hMCxuLmNhbGwodCxuZXcgbyh2b2lkIDAse2NhdXNlOmUuc2lnbmFsLnJlYXNvbn0pKX0sZS5zaWduYWwuYWJvcnRlZClyLm5leHRUaWNrKGEpO2Vsc2V7Y29uc3Qgcj1uO249bCgoKC4uLm4pPT57ZS5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsYSksci5hcHBseSh0LG4pfSkpLGUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGEpfWNvbnN0IHM9KC4uLmUpPT57aXx8ci5uZXh0VGljaygoKCk9Pm4uYXBwbHkodCxlKSkpfTtyZXR1cm4gZyh0W0NdLnByb21pc2UscyxzKSxCfSh0LGUsbik7aWYoIVIodCkpdGhyb3cgbmV3IGEoXCJzdHJlYW1cIixbXCJSZWFkYWJsZVN0cmVhbVwiLFwiV3JpdGFibGVTdHJlYW1cIixcIlN0cmVhbVwiXSx0KTtjb25zdCBwPW51bGwhPT0oaT1lLnJlYWRhYmxlKSYmdm9pZCAwIT09aT9pOnYodCksaz1udWxsIT09KGg9ZS53cml0YWJsZSkmJnZvaWQgMCE9PWg/aDpTKHQpLEw9dC5fd3JpdGFibGVTdGF0ZSxPPXQuX3JlYWRhYmxlU3RhdGUsVT0oKT0+e3Qud3JpdGFibGV8fE0oKX07bGV0IGo9eCh0KSYmdih0KT09PXAmJlModCk9PT1rLE49SSh0LCExKTtjb25zdCBNPSgpPT57Tj0hMCx0LmRlc3Ryb3llZCYmKGo9ITEpLCghanx8dC5yZWFkYWJsZSYmIXApJiYocCYmIVB8fG4uY2FsbCh0KSl9O2xldCBQPXcodCwhMSk7Y29uc3QgVz0oKT0+e1A9ITAsdC5kZXN0cm95ZWQmJihqPSExKSwoIWp8fHQud3JpdGFibGUmJiFrKSYmKGsmJiFOfHxuLmNhbGwodCkpfSwkPWU9PntuLmNhbGwodCxlKX07bGV0IEQ9eSh0KTtjb25zdCBGPSgpPT57RD0hMDtjb25zdCBlPVQodCl8fF8odCk7cmV0dXJuIGUmJlwiYm9vbGVhblwiIT10eXBlb2YgZT9uLmNhbGwodCxlKTpwJiYhUCYmdih0LCEwKSYmIXcodCwhMSk/bi5jYWxsKHQsbmV3IHMpOiFrfHxOfHxJKHQsITEpP3ZvaWQgbi5jYWxsKHQpOm4uY2FsbCh0LG5ldyBzKX0sej0oKT0+e0Q9ITA7Y29uc3QgZT1UKHQpfHxfKHQpO2lmKGUmJlwiYm9vbGVhblwiIT10eXBlb2YgZSlyZXR1cm4gbi5jYWxsKHQsZSk7bi5jYWxsKHQpfSxxPSgpPT57dC5yZXEub24oXCJmaW5pc2hcIixNKX07IWZ1bmN0aW9uKHQpe3JldHVybiB0LnNldEhlYWRlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5hYm9ydH0odCk/ayYmIUwmJih0Lm9uKFwiZW5kXCIsVSksdC5vbihcImNsb3NlXCIsVSkpOih0Lm9uKFwiY29tcGxldGVcIixNKSxqfHx0Lm9uKFwiYWJvcnRcIixGKSx0LnJlcT9xKCk6dC5vbihcInJlcXVlc3RcIixxKSksanx8XCJib29sZWFuXCIhPXR5cGVvZiB0LmFib3J0ZWR8fHQub24oXCJhYm9ydGVkXCIsRiksdC5vbihcImVuZFwiLFcpLHQub24oXCJmaW5pc2hcIixNKSwhMSE9PWUuZXJyb3ImJnQub24oXCJlcnJvclwiLCQpLHQub24oXCJjbG9zZVwiLEYpLEQ/ci5uZXh0VGljayhGKTpudWxsIT1MJiZMLmVycm9yRW1pdHRlZHx8bnVsbCE9TyYmTy5lcnJvckVtaXR0ZWQ/anx8ci5uZXh0VGljayh6KToocHx8aiYmIW0odCl8fCFOJiYhMSE9PUUodCkpJiYoa3x8aiYmIUUodCl8fCFQJiYhMSE9PW0odCkpP08mJnQucmVxJiZ0LmFib3J0ZWQmJnIubmV4dFRpY2soeik6ci5uZXh0VGljayh6KTtjb25zdCBIPSgpPT57bj1CLHQucmVtb3ZlTGlzdGVuZXIoXCJhYm9ydGVkXCIsRiksdC5yZW1vdmVMaXN0ZW5lcihcImNvbXBsZXRlXCIsTSksdC5yZW1vdmVMaXN0ZW5lcihcImFib3J0XCIsRiksdC5yZW1vdmVMaXN0ZW5lcihcInJlcXVlc3RcIixxKSx0LnJlcSYmdC5yZXEucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIixNKSx0LnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsVSksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsVSksdC5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLE0pLHQucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixXKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIiwkKSx0LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixGKX07aWYoZS5zaWduYWwmJiFEKXtjb25zdCBpPSgpPT57Y29uc3Qgcj1uO0goKSxyLmNhbGwodCxuZXcgbyh2b2lkIDAse2NhdXNlOmUuc2lnbmFsLnJlYXNvbn0pKX07aWYoZS5zaWduYWwuYWJvcnRlZClyLm5leHRUaWNrKGkpO2Vsc2V7Y29uc3Qgcj1uO249bCgoKC4uLm4pPT57ZS5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsaSksci5hcHBseSh0LG4pfSkpLGUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLGkpfX1yZXR1cm4gSH10LmV4cG9ydHM9ayx0LmV4cG9ydHMuZmluaXNoZWQ9ZnVuY3Rpb24odCxlKXt2YXIgbjtsZXQgcj0hMTtyZXR1cm4gbnVsbD09PWUmJihlPXUpLG51bGwhPT0obj1lKSYmdm9pZCAwIT09biYmbi5jbGVhbnVwJiYoaChlLmNsZWFudXAsXCJjbGVhbnVwXCIpLHI9ZS5jbGVhbnVwKSxuZXcgcCgoKG4sbyk9Pntjb25zdCBpPWsodCxlLCh0PT57ciYmaSgpLHQ/byh0KTpuKCl9KSl9KSl9fSw5MTM6KHQsZSxuKT0+e2NvbnN0IHI9big1MzMpLHtQcm9taXNlUHJvdG90eXBlVGhlbjpvLFN5bWJvbEFzeW5jSXRlcmF0b3I6aSxTeW1ib2xJdGVyYXRvcjphfT1uKDE5MSkse0J1ZmZlcjpzfT1uKDQ4NSkse0VSUl9JTlZBTElEX0FSR19UWVBFOnUsRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUzpsfT1uKDE0MSkuY29kZXM7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtsZXQgYyxmO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlfHxlIGluc3RhbmNlb2YgcylyZXR1cm4gbmV3IHQoe29iamVjdE1vZGU6ITAsLi4ubixyZWFkKCl7dGhpcy5wdXNoKGUpLHRoaXMucHVzaChudWxsKX19KTtpZihlJiZlW2ldKWY9ITAsYz1lW2ldKCk7ZWxzZXtpZighZXx8IWVbYV0pdGhyb3cgbmV3IHUoXCJpdGVyYWJsZVwiLFtcIkl0ZXJhYmxlXCJdLGUpO2Y9ITEsYz1lW2FdKCl9Y29uc3QgZD1uZXcgdCh7b2JqZWN0TW9kZTohMCxoaWdoV2F0ZXJNYXJrOjEsLi4ubn0pO2xldCBoPSExO3JldHVybiBkLl9yZWFkPWZ1bmN0aW9uKCl7aHx8KGg9ITAsYXN5bmMgZnVuY3Rpb24oKXtmb3IoOzspe3RyeXtjb25zdHt2YWx1ZTp0LGRvbmU6ZX09Zj9hd2FpdCBjLm5leHQoKTpjLm5leHQoKTtpZihlKWQucHVzaChudWxsKTtlbHNle2NvbnN0IGU9dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVuP2F3YWl0IHQ6dDtpZihudWxsPT09ZSl0aHJvdyBoPSExLG5ldyBsO2lmKGQucHVzaChlKSljb250aW51ZTtoPSExfX1jYXRjaCh0KXtkLmRlc3Ryb3kodCl9YnJlYWt9fSgpKX0sZC5fZGVzdHJveT1mdW5jdGlvbih0LGUpe28oYXN5bmMgZnVuY3Rpb24odCl7Y29uc3QgZT1udWxsIT10LG49XCJmdW5jdGlvblwiPT10eXBlb2YgYy50aHJvdztpZihlJiZuKXtjb25zdHt2YWx1ZTplLGRvbmU6bn09YXdhaXQgYy50aHJvdyh0KTtpZihhd2FpdCBlLG4pcmV0dXJufWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGMucmV0dXJuKXtjb25zdHt2YWx1ZTp0fT1hd2FpdCBjLnJldHVybigpO2F3YWl0IHR9fSh0KSwoKCk9PnIubmV4dFRpY2soZSx0KSksKG49PnIubmV4dFRpY2soZSxufHx0KSkpfSxkfX0sMjAwOih0LGUsbik9Pntjb25zdHtBcnJheUlzQXJyYXk6cixPYmplY3RTZXRQcm90b3R5cGVPZjpvfT1uKDE5MSkse0V2ZW50RW1pdHRlcjppfT1uKDQ2NSk7ZnVuY3Rpb24gYSh0KXtpLmNhbGwodGhpcyx0KX1mdW5jdGlvbiBzKHQsZSxuKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnByZXBlbmRMaXN0ZW5lcilyZXR1cm4gdC5wcmVwZW5kTGlzdGVuZXIoZSxuKTt0Ll9ldmVudHMmJnQuX2V2ZW50c1tlXT9yKHQuX2V2ZW50c1tlXSk/dC5fZXZlbnRzW2VdLnVuc2hpZnQobik6dC5fZXZlbnRzW2VdPVtuLHQuX2V2ZW50c1tlXV06dC5vbihlLG4pfW8oYS5wcm90b3R5cGUsaS5wcm90b3R5cGUpLG8oYSxpKSxhLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzO2Z1bmN0aW9uIHIoZSl7dC53cml0YWJsZSYmITE9PT10LndyaXRlKGUpJiZuLnBhdXNlJiZuLnBhdXNlKCl9ZnVuY3Rpb24gbygpe24ucmVhZGFibGUmJm4ucmVzdW1lJiZuLnJlc3VtZSgpfW4ub24oXCJkYXRhXCIsciksdC5vbihcImRyYWluXCIsbyksdC5faXNTdGRpb3x8ZSYmITE9PT1lLmVuZHx8KG4ub24oXCJlbmRcIix1KSxuLm9uKFwiY2xvc2VcIixsKSk7bGV0IGE9ITE7ZnVuY3Rpb24gdSgpe2F8fChhPSEwLHQuZW5kKCkpfWZ1bmN0aW9uIGwoKXthfHwoYT0hMCxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmRlc3Ryb3kmJnQuZGVzdHJveSgpKX1mdW5jdGlvbiBjKHQpe2YoKSwwPT09aS5saXN0ZW5lckNvdW50KHRoaXMsXCJlcnJvclwiKSYmdGhpcy5lbWl0KFwiZXJyb3JcIix0KX1mdW5jdGlvbiBmKCl7bi5yZW1vdmVMaXN0ZW5lcihcImRhdGFcIixyKSx0LnJlbW92ZUxpc3RlbmVyKFwiZHJhaW5cIixvKSxuLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsdSksbi5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsbCksbi5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYyksdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYyksbi5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLGYpLG4ucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGYpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGYpfXJldHVybiBzKG4sXCJlcnJvclwiLGMpLHModCxcImVycm9yXCIsYyksbi5vbihcImVuZFwiLGYpLG4ub24oXCJjbG9zZVwiLGYpLHQub24oXCJjbG9zZVwiLGYpLHQuZW1pdChcInBpcGVcIixuKSx0fSx0LmV4cG9ydHM9e1N0cmVhbTphLHByZXBlbmRMaXN0ZW5lcjpzfX0sNTU0Oih0LGUsbik9Pntjb25zdCByPWdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyfHxuKDg3NikuQWJvcnRDb250cm9sbGVyLHtjb2Rlczp7RVJSX0lOVkFMSURfQVJHX1ZBTFVFOm8sRVJSX0lOVkFMSURfQVJHX1RZUEU6aSxFUlJfTUlTU0lOR19BUkdTOmEsRVJSX09VVF9PRl9SQU5HRTpzfSxBYm9ydEVycm9yOnV9PW4oMTQxKSx7dmFsaWRhdGVBYm9ydFNpZ25hbDpsLHZhbGlkYXRlSW50ZWdlcjpjLHZhbGlkYXRlT2JqZWN0OmZ9PW4oOTA0KSxkPW4oMTkxKS5TeW1ib2woXCJrV2Vha1wiKSx7ZmluaXNoZWQ6aH09big4NikscD1uKDgxOCkse2FkZEFib3J0U2lnbmFsTm9WYWxpZGF0ZTpnfT1uKDM3NCkse2lzV3JpdGFibGU6eSxpc05vZGVTdHJlYW06bX09bigxMzIpLHtBcnJheVByb3RvdHlwZVB1c2g6dixNYXRoRmxvb3I6YixOdW1iZXI6dyxOdW1iZXJJc05hTjpfLFByb21pc2U6RSxQcm9taXNlUmVqZWN0OlMsUHJvbWlzZVByb3RvdHlwZVRoZW46QSxTeW1ib2w6SX09bigxOTEpLFQ9SShcImtFbXB0eVwiKSxSPUkoXCJrRW9mXCIpO2Z1bmN0aW9uIHgodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBpKFwiZm5cIixbXCJGdW5jdGlvblwiLFwiQXN5bmNGdW5jdGlvblwiXSx0KTtudWxsIT1lJiZmKGUsXCJvcHRpb25zXCIpLG51bGwhPShudWxsPT1lP3ZvaWQgMDplLnNpZ25hbCkmJmwoZS5zaWduYWwsXCJvcHRpb25zLnNpZ25hbFwiKTtsZXQgbj0xO3JldHVybiBudWxsIT0obnVsbD09ZT92b2lkIDA6ZS5jb25jdXJyZW5jeSkmJihuPWIoZS5jb25jdXJyZW5jeSkpLGMobixcImNvbmN1cnJlbmN5XCIsMSksYXN5bmMgZnVuY3Rpb24qKCl7dmFyIG8saTtjb25zdCBhPW5ldyByLHM9dGhpcyxsPVtdLGM9YS5zaWduYWwsZj17c2lnbmFsOmN9LGQ9KCk9PmEuYWJvcnQoKTtsZXQgaCxwO251bGwhPWUmJm51bGwhPT0obz1lLnNpZ25hbCkmJnZvaWQgMCE9PW8mJm8uYWJvcnRlZCYmZCgpLG51bGw9PWV8fG51bGw9PT0oaT1lLnNpZ25hbCl8fHZvaWQgMD09PWl8fGkuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsZCk7bGV0IGc9ITE7ZnVuY3Rpb24geSgpe2c9ITB9IWFzeW5jIGZ1bmN0aW9uKCl7dHJ5e2ZvciBhd2FpdChsZXQgZSBvZiBzKXt2YXIgcjtpZihnKXJldHVybjtpZihjLmFib3J0ZWQpdGhyb3cgbmV3IHU7dHJ5e2U9dChlLGYpfWNhdGNoKHQpe2U9Uyh0KX1lIT09VCYmKFwiZnVuY3Rpb25cIj09dHlwZW9mKG51bGw9PT0ocj1lKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jYXRjaCkmJmUuY2F0Y2goeSksbC5wdXNoKGUpLGgmJihoKCksaD1udWxsKSwhZyYmbC5sZW5ndGgmJmwubGVuZ3RoPj1uJiZhd2FpdCBuZXcgRSgodD0+e3A9dH0pKSl9bC5wdXNoKFIpfWNhdGNoKHQpe2NvbnN0IGU9Uyh0KTtBKGUsdm9pZCAwLHkpLGwucHVzaChlKX1maW5hbGx5e3ZhciBvO2c9ITAsaCYmKGgoKSxoPW51bGwpLG51bGw9PWV8fG51bGw9PT0obz1lLnNpZ25hbCl8fHZvaWQgMD09PW98fG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsZCl9fSgpO3RyeXtmb3IoOzspe2Zvcig7bC5sZW5ndGg+MDspe2NvbnN0IHQ9YXdhaXQgbFswXTtpZih0PT09UilyZXR1cm47aWYoYy5hYm9ydGVkKXRocm93IG5ldyB1O3QhPT1UJiYoeWllbGQgdCksbC5zaGlmdCgpLHAmJihwKCkscD1udWxsKX1hd2FpdCBuZXcgRSgodD0+e2g9dH0pKX19ZmluYWxseXthLmFib3J0KCksZz0hMCxwJiYocCgpLHA9bnVsbCl9fS5jYWxsKHRoaXMpfWFzeW5jIGZ1bmN0aW9uIEModCxlPXZvaWQgMCl7Zm9yIGF3YWl0KGNvbnN0IG4gb2YgQi5jYWxsKHRoaXMsdCxlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBCKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgaShcImZuXCIsW1wiRnVuY3Rpb25cIixcIkFzeW5jRnVuY3Rpb25cIl0sdCk7cmV0dXJuIHguY2FsbCh0aGlzLChhc3luYyBmdW5jdGlvbihlLG4pe3JldHVybiBhd2FpdCB0KGUsbik/ZTpUfSksZSl9Y2xhc3MgayBleHRlbmRzIGF7Y29uc3RydWN0b3IoKXtzdXBlcihcInJlZHVjZVwiKSx0aGlzLm1lc3NhZ2U9XCJSZWR1Y2Ugb2YgYW4gZW1wdHkgc3RyZWFtIHJlcXVpcmVzIGFuIGluaXRpYWwgdmFsdWVcIn19ZnVuY3Rpb24gTCh0KXtpZih0PXcodCksXyh0KSlyZXR1cm4gMDtpZih0PDApdGhyb3cgbmV3IHMoXCJudW1iZXJcIixcIj49IDBcIix0KTtyZXR1cm4gdH10LmV4cG9ydHMuc3RyZWFtUmV0dXJuaW5nT3BlcmF0b3JzPXthc0luZGV4ZWRQYWlyczpmdW5jdGlvbih0PXZvaWQgMCl7cmV0dXJuIG51bGwhPXQmJmYodCxcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PXQ/dm9pZCAwOnQuc2lnbmFsKSYmbCh0LnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpLGFzeW5jIGZ1bmN0aW9uKigpe2xldCBlPTA7Zm9yIGF3YWl0KGNvbnN0IHIgb2YgdGhpcyl7dmFyIG47aWYobnVsbCE9dCYmbnVsbCE9PShuPXQuc2lnbmFsKSYmdm9pZCAwIT09biYmbi5hYm9ydGVkKXRocm93IG5ldyB1KHtjYXVzZTp0LnNpZ25hbC5yZWFzb259KTt5aWVsZFtlKysscl19fS5jYWxsKHRoaXMpfSxkcm9wOmZ1bmN0aW9uKHQsZT12b2lkIDApe3JldHVybiBudWxsIT1lJiZmKGUsXCJvcHRpb25zXCIpLG51bGwhPShudWxsPT1lP3ZvaWQgMDplLnNpZ25hbCkmJmwoZS5zaWduYWwsXCJvcHRpb25zLnNpZ25hbFwiKSx0PUwodCksYXN5bmMgZnVuY3Rpb24qKCl7dmFyIG47aWYobnVsbCE9ZSYmbnVsbCE9PShuPWUuc2lnbmFsKSYmdm9pZCAwIT09biYmbi5hYm9ydGVkKXRocm93IG5ldyB1O2ZvciBhd2FpdChjb25zdCBuIG9mIHRoaXMpe3ZhciByO2lmKG51bGwhPWUmJm51bGwhPT0ocj1lLnNpZ25hbCkmJnZvaWQgMCE9PXImJnIuYWJvcnRlZCl0aHJvdyBuZXcgdTt0LS08PTAmJih5aWVsZCBuKX19LmNhbGwodGhpcyl9LGZpbHRlcjpCLGZsYXRNYXA6ZnVuY3Rpb24odCxlKXtjb25zdCBuPXguY2FsbCh0aGlzLHQsZSk7cmV0dXJuIGFzeW5jIGZ1bmN0aW9uKigpe2ZvciBhd2FpdChjb25zdCB0IG9mIG4peWllbGQqdH0uY2FsbCh0aGlzKX0sbWFwOngsdGFrZTpmdW5jdGlvbih0LGU9dm9pZCAwKXtyZXR1cm4gbnVsbCE9ZSYmZihlLFwib3B0aW9uc1wiKSxudWxsIT0obnVsbD09ZT92b2lkIDA6ZS5zaWduYWwpJiZsKGUuc2lnbmFsLFwib3B0aW9ucy5zaWduYWxcIiksdD1MKHQpLGFzeW5jIGZ1bmN0aW9uKigpe3ZhciBuO2lmKG51bGwhPWUmJm51bGwhPT0obj1lLnNpZ25hbCkmJnZvaWQgMCE9PW4mJm4uYWJvcnRlZCl0aHJvdyBuZXcgdTtmb3IgYXdhaXQoY29uc3QgbiBvZiB0aGlzKXt2YXIgcjtpZihudWxsIT1lJiZudWxsIT09KHI9ZS5zaWduYWwpJiZ2b2lkIDAhPT1yJiZyLmFib3J0ZWQpdGhyb3cgbmV3IHU7aWYoISh0LS0gPjApKXJldHVybjt5aWVsZCBufX0uY2FsbCh0aGlzKX0sY29tcG9zZTpmdW5jdGlvbih0LGUpe2lmKG51bGwhPWUmJmYoZSxcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PWU/dm9pZCAwOmUuc2lnbmFsKSYmbChlLnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpLG0odCkmJiF5KHQpKXRocm93IG5ldyBvKFwic3RyZWFtXCIsdCxcIm11c3QgYmUgd3JpdGFibGVcIik7Y29uc3Qgbj1wKHRoaXMsdCk7cmV0dXJuIG51bGwhPWUmJmUuc2lnbmFsJiZnKGUuc2lnbmFsLG4pLG59fSx0LmV4cG9ydHMucHJvbWlzZVJldHVybmluZ09wZXJhdG9ycz17ZXZlcnk6YXN5bmMgZnVuY3Rpb24odCxlPXZvaWQgMCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgaShcImZuXCIsW1wiRnVuY3Rpb25cIixcIkFzeW5jRnVuY3Rpb25cIl0sdCk7cmV0dXJuIWF3YWl0IEMuY2FsbCh0aGlzLChhc3luYyguLi5lKT0+IWF3YWl0IHQoLi4uZSkpLGUpfSxmb3JFYWNoOmFzeW5jIGZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgaShcImZuXCIsW1wiRnVuY3Rpb25cIixcIkFzeW5jRnVuY3Rpb25cIl0sdCk7Zm9yIGF3YWl0KGNvbnN0IG4gb2YgeC5jYWxsKHRoaXMsKGFzeW5jIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGF3YWl0IHQoZSxuKSxUfSksZSkpO30scmVkdWNlOmFzeW5jIGZ1bmN0aW9uKHQsZSxuKXt2YXIgbztpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBpKFwicmVkdWNlclwiLFtcIkZ1bmN0aW9uXCIsXCJBc3luY0Z1bmN0aW9uXCJdLHQpO251bGwhPW4mJmYobixcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PW4/dm9pZCAwOm4uc2lnbmFsKSYmbChuLnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpO2xldCBhPWFyZ3VtZW50cy5sZW5ndGg+MTtpZihudWxsIT1uJiZudWxsIT09KG89bi5zaWduYWwpJiZ2b2lkIDAhPT1vJiZvLmFib3J0ZWQpe2NvbnN0IHQ9bmV3IHUodm9pZCAwLHtjYXVzZTpuLnNpZ25hbC5yZWFzb259KTt0aHJvdyB0aGlzLm9uY2UoXCJlcnJvclwiLCgoKT0+e30pKSxhd2FpdCBoKHRoaXMuZGVzdHJveSh0KSksdH1jb25zdCBzPW5ldyByLGM9cy5zaWduYWw7aWYobnVsbCE9biYmbi5zaWduYWwpe2NvbnN0IHQ9e29uY2U6ITAsW2RdOnRoaXN9O24uc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCgoKT0+cy5hYm9ydCgpKSx0KX1sZXQgcD0hMTt0cnl7Zm9yIGF3YWl0KGNvbnN0IHIgb2YgdGhpcyl7dmFyIGc7aWYocD0hMCxudWxsIT1uJiZudWxsIT09KGc9bi5zaWduYWwpJiZ2b2lkIDAhPT1nJiZnLmFib3J0ZWQpdGhyb3cgbmV3IHU7YT9lPWF3YWl0IHQoZSxyLHtzaWduYWw6Y30pOihlPXIsYT0hMCl9aWYoIXAmJiFhKXRocm93IG5ldyBrfWZpbmFsbHl7cy5hYm9ydCgpfXJldHVybiBlfSx0b0FycmF5OmFzeW5jIGZ1bmN0aW9uKHQpe251bGwhPXQmJmYodCxcIm9wdGlvbnNcIiksbnVsbCE9KG51bGw9PXQ/dm9pZCAwOnQuc2lnbmFsKSYmbCh0LnNpZ25hbCxcIm9wdGlvbnMuc2lnbmFsXCIpO2NvbnN0IGU9W107Zm9yIGF3YWl0KGNvbnN0IHIgb2YgdGhpcyl7dmFyIG47aWYobnVsbCE9dCYmbnVsbCE9PShuPXQuc2lnbmFsKSYmdm9pZCAwIT09biYmbi5hYm9ydGVkKXRocm93IG5ldyB1KHZvaWQgMCx7Y2F1c2U6dC5zaWduYWwucmVhc29ufSk7dihlLHIpfXJldHVybiBlfSxzb21lOkMsZmluZDphc3luYyBmdW5jdGlvbih0LGUpe2ZvciBhd2FpdChjb25zdCBuIG9mIEIuY2FsbCh0aGlzLHQsZSkpcmV0dXJuIG59fX0sNDY3Oih0LGUsbik9Pntjb25zdHtPYmplY3RTZXRQcm90b3R5cGVPZjpyfT1uKDE5MSk7dC5leHBvcnRzPWk7Y29uc3Qgbz1uKDIxMCk7ZnVuY3Rpb24gaSh0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBpKSlyZXR1cm4gbmV3IGkodCk7by5jYWxsKHRoaXMsdCl9cihpLnByb3RvdHlwZSxvLnByb3RvdHlwZSkscihpLG8pLGkucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24odCxlLG4pe24obnVsbCx0KX19LDc1NDoodCxlLG4pPT57Y29uc3Qgcj1uKDUzMykse0FycmF5SXNBcnJheTpvLFByb21pc2U6aSxTeW1ib2xBc3luY0l0ZXJhdG9yOmF9PW4oMTkxKSxzPW4oODYpLHtvbmNlOnV9PW4oNzc1KSxsPW4oMjMwKSxjPW4oMTgyKSx7YWdncmVnYXRlVHdvRXJyb3JzOmYsY29kZXM6e0VSUl9JTlZBTElEX0FSR19UWVBFOmQsRVJSX0lOVkFMSURfUkVUVVJOX1ZBTFVFOmgsRVJSX01JU1NJTkdfQVJHUzpwLEVSUl9TVFJFQU1fREVTVFJPWUVEOmcsRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0U6eX0sQWJvcnRFcnJvcjptfT1uKDE0MSkse3ZhbGlkYXRlRnVuY3Rpb246dix2YWxpZGF0ZUFib3J0U2lnbmFsOmJ9PW4oOTA0KSx7aXNJdGVyYWJsZTp3LGlzUmVhZGFibGU6Xyxpc1JlYWRhYmxlTm9kZVN0cmVhbTpFLGlzTm9kZVN0cmVhbTpTLGlzVHJhbnNmb3JtU3RyZWFtOkEsaXNXZWJTdHJlYW06SSxpc1JlYWRhYmxlU3RyZWFtOlQsaXNSZWFkYWJsZUVuZGVkOlJ9PW4oMTMyKSx4PWdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyfHxuKDg3NikuQWJvcnRDb250cm9sbGVyO2xldCBDLEI7ZnVuY3Rpb24gayh0LGUsbil7bGV0IHI9ITE7dC5vbihcImNsb3NlXCIsKCgpPT57cj0hMH0pKTtyZXR1cm57ZGVzdHJveTplPT57cnx8KHI9ITAsbC5kZXN0cm95ZXIodCxlfHxuZXcgZyhcInBpcGVcIikpKX0sY2xlYW51cDpzKHQse3JlYWRhYmxlOmUsd3JpdGFibGU6bn0sKHQ9PntyPSF0fSkpfX1mdW5jdGlvbiBMKHQpe2lmKHcodCkpcmV0dXJuIHQ7aWYoRSh0KSlyZXR1cm4gYXN5bmMgZnVuY3Rpb24qKHQpe0J8fChCPW4oODU4KSk7eWllbGQqQi5wcm90b3R5cGVbYV0uY2FsbCh0KX0odCk7dGhyb3cgbmV3IGQoXCJ2YWxcIixbXCJSZWFkYWJsZVwiLFwiSXRlcmFibGVcIixcIkFzeW5jSXRlcmFibGVcIl0sdCl9YXN5bmMgZnVuY3Rpb24gTyh0LGUsbix7ZW5kOnJ9KXtsZXQgbyxhPW51bGw7Y29uc3QgdT10PT57aWYodCYmKG89dCksYSl7Y29uc3QgdD1hO2E9bnVsbCx0KCl9fSxsPSgpPT5uZXcgaSgoKHQsZSk9PntvP2Uobyk6YT0oKT0+e28/ZShvKTp0KCl9fSkpO2Uub24oXCJkcmFpblwiLHUpO2NvbnN0IGM9cyhlLHtyZWFkYWJsZTohMX0sdSk7dHJ5e2Uud3JpdGFibGVOZWVkRHJhaW4mJmF3YWl0IGwoKTtmb3IgYXdhaXQoY29uc3QgbiBvZiB0KWUud3JpdGUobil8fGF3YWl0IGwoKTtyJiZlLmVuZCgpLGF3YWl0IGwoKSxuKCl9Y2F0Y2godCl7bihvIT09dD9mKG8sdCk6dCl9ZmluYWxseXtjKCksZS5vZmYoXCJkcmFpblwiLHUpfX1hc3luYyBmdW5jdGlvbiBVKHQsZSxuLHtlbmQ6cn0pe0EoZSkmJihlPWUud3JpdGFibGUpO2NvbnN0IG89ZS5nZXRXcml0ZXIoKTt0cnl7Zm9yIGF3YWl0KGNvbnN0IGUgb2YgdClhd2FpdCBvLnJlYWR5LG8ud3JpdGUoZSkuY2F0Y2goKCgpPT57fSkpO2F3YWl0IG8ucmVhZHksciYmYXdhaXQgby5jbG9zZSgpLG4oKX1jYXRjaCh0KXt0cnl7YXdhaXQgby5hYm9ydCh0KSxuKHQpfWNhdGNoKHQpe24odCl9fX1mdW5jdGlvbiBqKHQsZSxpKXtpZigxPT09dC5sZW5ndGgmJm8odFswXSkmJih0PXRbMF0pLHQubGVuZ3RoPDIpdGhyb3cgbmV3IHAoXCJzdHJlYW1zXCIpO2NvbnN0IGE9bmV3IHgscz1hLnNpZ25hbCx1PW51bGw9PWk/dm9pZCAwOmkuc2lnbmFsLGw9W107ZnVuY3Rpb24gZigpe00obmV3IG0pfWxldCBnLHk7Yih1LFwib3B0aW9ucy5zaWduYWxcIiksbnVsbD09dXx8dS5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIixmKTtjb25zdCB2PVtdO2xldCBSLEI9MDtmdW5jdGlvbiBqKHQpe00odCwwPT0tLUIpfWZ1bmN0aW9uIE0odCxuKXtpZighdHx8ZyYmXCJFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRVwiIT09Zy5jb2RlfHwoZz10KSxnfHxuKXtmb3IoO3YubGVuZ3RoOyl2LnNoaWZ0KCkoZyk7bnVsbD09dXx8dS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIixmKSxhLmFib3J0KCksbiYmKGd8fGwuZm9yRWFjaCgodD0+dCgpKSksci5uZXh0VGljayhlLGcseSkpfX1mb3IobGV0IEQ9MDtEPHQubGVuZ3RoO0QrKyl7Y29uc3QgRj10W0RdLHo9RDx0Lmxlbmd0aC0xLHE9RD4wLEg9enx8ITEhPT0obnVsbD09aT92b2lkIDA6aS5lbmQpLFY9RD09PXQubGVuZ3RoLTE7aWYoUyhGKSl7aWYoSCl7Y29uc3R7ZGVzdHJveTpHLGNsZWFudXA6Sn09ayhGLHoscSk7di5wdXNoKEcpLF8oRikmJlYmJmwucHVzaChKKX1mdW5jdGlvbiBQKHQpe3QmJlwiQWJvcnRFcnJvclwiIT09dC5uYW1lJiZcIkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFXCIhPT10LmNvZGUmJmoodCl9Ri5vbihcImVycm9yXCIsUCksXyhGKSYmViYmbC5wdXNoKCgoKT0+e0YucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLFApfSkpfWlmKDA9PT1EKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEYpe2lmKFI9Rih7c2lnbmFsOnN9KSwhdyhSKSl0aHJvdyBuZXcgaChcIkl0ZXJhYmxlLCBBc3luY0l0ZXJhYmxlIG9yIFN0cmVhbVwiLFwic291cmNlXCIsUil9ZWxzZSBSPXcoRil8fEUoRil8fEEoRik/RjpjLmZyb20oRik7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBGKXt2YXIgVztpZihBKFIpKVI9TChudWxsPT09KFc9Uil8fHZvaWQgMD09PVc/dm9pZCAwOlcucmVhZGFibGUpO2Vsc2UgUj1MKFIpO2lmKFI9RihSLHtzaWduYWw6c30pLHope2lmKCF3KFIsITApKXRocm93IG5ldyBoKFwiQXN5bmNJdGVyYWJsZVwiLGB0cmFuc2Zvcm1bJHtELTF9XWAsUil9ZWxzZXt2YXIgJDtDfHwoQz1uKDQ2NykpO2NvbnN0IFk9bmV3IEMoe29iamVjdE1vZGU6ITB9KSxLPW51bGw9PT0oJD1SKXx8dm9pZCAwPT09JD92b2lkIDA6JC50aGVuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEspQisrLEsuY2FsbChSLCh0PT57eT10LG51bGwhPXQmJlkud3JpdGUodCksSCYmWS5lbmQoKSxyLm5leHRUaWNrKGopfSksKHQ9PntZLmRlc3Ryb3kodCksci5uZXh0VGljayhqLHQpfSkpO2Vsc2UgaWYodyhSLCEwKSlCKyssTyhSLFksaix7ZW5kOkh9KTtlbHNle2lmKCFUKFIpJiYhQShSKSl0aHJvdyBuZXcgaChcIkFzeW5jSXRlcmFibGUgb3IgUHJvbWlzZVwiLFwiZGVzdGluYXRpb25cIixSKTt7Y29uc3QgUT1SLnJlYWRhYmxlfHxSO0IrKyxPKFEsWSxqLHtlbmQ6SH0pfX1SPVk7Y29uc3R7ZGVzdHJveTpYLGNsZWFudXA6Wn09ayhSLCExLCEwKTt2LnB1c2goWCksViYmbC5wdXNoKFopfX1lbHNlIGlmKFMoRikpe2lmKEUoUikpe0IrPTI7Y29uc3QgdHQ9TihSLEYsaix7ZW5kOkh9KTtfKEYpJiZWJiZsLnB1c2godHQpfWVsc2UgaWYoQShSKXx8VChSKSl7Y29uc3QgZXQ9Ui5yZWFkYWJsZXx8UjtCKyssTyhldCxGLGose2VuZDpIfSl9ZWxzZXtpZighdyhSKSl0aHJvdyBuZXcgZChcInZhbFwiLFtcIlJlYWRhYmxlXCIsXCJJdGVyYWJsZVwiLFwiQXN5bmNJdGVyYWJsZVwiLFwiUmVhZGFibGVTdHJlYW1cIixcIlRyYW5zZm9ybVN0cmVhbVwiXSxSKTtCKyssTyhSLEYsaix7ZW5kOkh9KX1SPUZ9ZWxzZSBpZihJKEYpKXtpZihFKFIpKUIrKyxVKEwoUiksRixqLHtlbmQ6SH0pO2Vsc2UgaWYoVChSKXx8dyhSKSlCKyssVShSLEYsaix7ZW5kOkh9KTtlbHNle2lmKCFBKFIpKXRocm93IG5ldyBkKFwidmFsXCIsW1wiUmVhZGFibGVcIixcIkl0ZXJhYmxlXCIsXCJBc3luY0l0ZXJhYmxlXCIsXCJSZWFkYWJsZVN0cmVhbVwiLFwiVHJhbnNmb3JtU3RyZWFtXCJdLFIpO0IrKyxVKFIucmVhZGFibGUsRixqLHtlbmQ6SH0pfVI9Rn1lbHNlIFI9Yy5mcm9tKEYpfXJldHVybihudWxsIT1zJiZzLmFib3J0ZWR8fG51bGwhPXUmJnUuYWJvcnRlZCkmJnIubmV4dFRpY2soZiksUn1mdW5jdGlvbiBOKHQsZSxuLHtlbmQ6b30pe2xldCBpPSExO2lmKGUub24oXCJjbG9zZVwiLCgoKT0+e2l8fG4obmV3IHkpfSkpLHQucGlwZShlLHtlbmQ6ITF9KSxvKXtmdW5jdGlvbiBhKCl7aT0hMCxlLmVuZCgpfVIodCk/ci5uZXh0VGljayhhKTp0Lm9uY2UoXCJlbmRcIixhKX1lbHNlIG4oKTtyZXR1cm4gcyh0LHtyZWFkYWJsZTohMCx3cml0YWJsZTohMX0sKGU9Pntjb25zdCByPXQuX3JlYWRhYmxlU3RhdGU7ZSYmXCJFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRVwiPT09ZS5jb2RlJiZyJiZyLmVuZGVkJiYhci5lcnJvcmVkJiYhci5lcnJvckVtaXR0ZWQ/dC5vbmNlKFwiZW5kXCIsbikub25jZShcImVycm9yXCIsbik6bihlKX0pKSxzKGUse3JlYWRhYmxlOiExLHdyaXRhYmxlOiEwfSxuKX10LmV4cG9ydHM9e3BpcGVsaW5lSW1wbDpqLHBpcGVsaW5lOmZ1bmN0aW9uKC4uLnQpe3JldHVybiBqKHQsdShmdW5jdGlvbih0KXtyZXR1cm4gdih0W3QubGVuZ3RoLTFdLFwic3RyZWFtc1tzdHJlYW0ubGVuZ3RoIC0gMV1cIiksdC5wb3AoKX0odCkpKX19fSw4NTg6KHQsZSxuKT0+e2NvbnN0IHI9big1MzMpLHtBcnJheVByb3RvdHlwZUluZGV4T2Y6byxOdW1iZXJJc0ludGVnZXI6aSxOdW1iZXJJc05hTjphLE51bWJlclBhcnNlSW50OnMsT2JqZWN0RGVmaW5lUHJvcGVydGllczp1LE9iamVjdEtleXM6bCxPYmplY3RTZXRQcm90b3R5cGVPZjpjLFByb21pc2U6ZixTYWZlU2V0OmQsU3ltYm9sQXN5bmNJdGVyYXRvcjpoLFN5bWJvbDpwfT1uKDE5MSk7dC5leHBvcnRzPVcsVy5SZWFkYWJsZVN0YXRlPVA7Y29uc3R7RXZlbnRFbWl0dGVyOmd9PW4oNDY1KSx7U3RyZWFtOnkscHJlcGVuZExpc3RlbmVyOm19PW4oMjAwKSx7QnVmZmVyOnZ9PW4oNDg1KSx7YWRkQWJvcnRTaWduYWw6Yn09bigzNzQpLHc9big4Nik7bGV0IF89big3NzUpLmRlYnVnbG9nKFwic3RyZWFtXCIsKHQ9PntfPXR9KSk7Y29uc3QgRT1uKDYxNiksUz1uKDIzMCkse2dldEhpZ2hXYXRlck1hcms6QSxnZXREZWZhdWx0SGlnaFdhdGVyTWFyazpJfT1uKDQ5OCkse2FnZ3JlZ2F0ZVR3b0Vycm9yczpULGNvZGVzOntFUlJfSU5WQUxJRF9BUkdfVFlQRTpSLEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEOngsRVJSX09VVF9PRl9SQU5HRTpDLEVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0Y6QixFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UOmt9fT1uKDE0MSkse3ZhbGlkYXRlT2JqZWN0Okx9PW4oOTA0KSxPPXAoXCJrUGF1c2VkXCIpLHtTdHJpbmdEZWNvZGVyOlV9PW4oNDY0KSxqPW4oOTEzKTtjKFcucHJvdG90eXBlLHkucHJvdG90eXBlKSxjKFcseSk7Y29uc3QgTj0oKT0+e30se2Vycm9yT3JEZXN0cm95Ok19PVM7ZnVuY3Rpb24gUCh0LGUscil7XCJib29sZWFuXCIhPXR5cGVvZiByJiYocj1lIGluc3RhbmNlb2YgbigxODIpKSx0aGlzLm9iamVjdE1vZGU9ISghdHx8IXQub2JqZWN0TW9kZSksciYmKHRoaXMub2JqZWN0TW9kZT10aGlzLm9iamVjdE1vZGV8fCEoIXR8fCF0LnJlYWRhYmxlT2JqZWN0TW9kZSkpLHRoaXMuaGlnaFdhdGVyTWFyaz10P0EodGhpcyx0LFwicmVhZGFibGVIaWdoV2F0ZXJNYXJrXCIscik6SSghMSksdGhpcy5idWZmZXI9bmV3IEUsdGhpcy5sZW5ndGg9MCx0aGlzLnBpcGVzPVtdLHRoaXMuZmxvd2luZz1udWxsLHRoaXMuZW5kZWQ9ITEsdGhpcy5lbmRFbWl0dGVkPSExLHRoaXMucmVhZGluZz0hMSx0aGlzLmNvbnN0cnVjdGVkPSEwLHRoaXMuc3luYz0hMCx0aGlzLm5lZWRSZWFkYWJsZT0hMSx0aGlzLmVtaXR0ZWRSZWFkYWJsZT0hMSx0aGlzLnJlYWRhYmxlTGlzdGVuaW5nPSExLHRoaXMucmVzdW1lU2NoZWR1bGVkPSExLHRoaXNbT109bnVsbCx0aGlzLmVycm9yRW1pdHRlZD0hMSx0aGlzLmVtaXRDbG9zZT0hdHx8ITEhPT10LmVtaXRDbG9zZSx0aGlzLmF1dG9EZXN0cm95PSF0fHwhMSE9PXQuYXV0b0Rlc3Ryb3ksdGhpcy5kZXN0cm95ZWQ9ITEsdGhpcy5lcnJvcmVkPW51bGwsdGhpcy5jbG9zZWQ9ITEsdGhpcy5jbG9zZUVtaXR0ZWQ9ITEsdGhpcy5kZWZhdWx0RW5jb2Rpbmc9dCYmdC5kZWZhdWx0RW5jb2Rpbmd8fFwidXRmOFwiLHRoaXMuYXdhaXREcmFpbldyaXRlcnM9bnVsbCx0aGlzLm11bHRpQXdhaXREcmFpbj0hMSx0aGlzLnJlYWRpbmdNb3JlPSExLHRoaXMuZGF0YUVtaXR0ZWQ9ITEsdGhpcy5kZWNvZGVyPW51bGwsdGhpcy5lbmNvZGluZz1udWxsLHQmJnQuZW5jb2RpbmcmJih0aGlzLmRlY29kZXI9bmV3IFUodC5lbmNvZGluZyksdGhpcy5lbmNvZGluZz10LmVuY29kaW5nKX1mdW5jdGlvbiBXKHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFcpKXJldHVybiBuZXcgVyh0KTtjb25zdCBlPXRoaXMgaW5zdGFuY2VvZiBuKDE4Mik7dGhpcy5fcmVhZGFibGVTdGF0ZT1uZXcgUCh0LHRoaXMsZSksdCYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQucmVhZCYmKHRoaXMuX3JlYWQ9dC5yZWFkKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmRlc3Ryb3kmJih0aGlzLl9kZXN0cm95PXQuZGVzdHJveSksXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3QmJih0aGlzLl9jb25zdHJ1Y3Q9dC5jb25zdHJ1Y3QpLHQuc2lnbmFsJiYhZSYmYih0LnNpZ25hbCx0aGlzKSkseS5jYWxsKHRoaXMsdCksUy5jb25zdHJ1Y3QodGhpcywoKCk9Pnt0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSYmSCh0aGlzLHRoaXMuX3JlYWRhYmxlU3RhdGUpfSkpfWZ1bmN0aW9uICQodCxlLG4scil7XyhcInJlYWRhYmxlQWRkQ2h1bmtcIixlKTtjb25zdCBvPXQuX3JlYWRhYmxlU3RhdGU7bGV0IGk7aWYoby5vYmplY3RNb2RlfHwoXCJzdHJpbmdcIj09dHlwZW9mIGU/KG49bnx8by5kZWZhdWx0RW5jb2Rpbmcsby5lbmNvZGluZyE9PW4mJihyJiZvLmVuY29kaW5nP2U9di5mcm9tKGUsbikudG9TdHJpbmcoby5lbmNvZGluZyk6KGU9di5mcm9tKGUsbiksbj1cIlwiKSkpOmUgaW5zdGFuY2VvZiB2P249XCJcIjp5Ll9pc1VpbnQ4QXJyYXkoZSk/KGU9eS5fdWludDhBcnJheVRvQnVmZmVyKGUpLG49XCJcIik6bnVsbCE9ZSYmKGk9bmV3IFIoXCJjaHVua1wiLFtcInN0cmluZ1wiLFwiQnVmZmVyXCIsXCJVaW50OEFycmF5XCJdLGUpKSksaSlNKHQsaSk7ZWxzZSBpZihudWxsPT09ZSlvLnJlYWRpbmc9ITEsZnVuY3Rpb24odCxlKXtpZihfKFwib25Fb2ZDaHVua1wiKSxlLmVuZGVkKXJldHVybjtpZihlLmRlY29kZXIpe2NvbnN0IHQ9ZS5kZWNvZGVyLmVuZCgpO3QmJnQubGVuZ3RoJiYoZS5idWZmZXIucHVzaCh0KSxlLmxlbmd0aCs9ZS5vYmplY3RNb2RlPzE6dC5sZW5ndGgpfWUuZW5kZWQ9ITAsZS5zeW5jP3oodCk6KGUubmVlZFJlYWRhYmxlPSExLGUuZW1pdHRlZFJlYWRhYmxlPSEwLHEodCkpfSh0LG8pO2Vsc2UgaWYoby5vYmplY3RNb2RlfHxlJiZlLmxlbmd0aD4wKWlmKHIpaWYoby5lbmRFbWl0dGVkKU0odCxuZXcgayk7ZWxzZXtpZihvLmRlc3Ryb3llZHx8by5lcnJvcmVkKXJldHVybiExO0QodCxvLGUsITApfWVsc2UgaWYoby5lbmRlZClNKHQsbmV3IEIpO2Vsc2V7aWYoby5kZXN0cm95ZWR8fG8uZXJyb3JlZClyZXR1cm4hMTtvLnJlYWRpbmc9ITEsby5kZWNvZGVyJiYhbj8oZT1vLmRlY29kZXIud3JpdGUoZSksby5vYmplY3RNb2RlfHwwIT09ZS5sZW5ndGg/RCh0LG8sZSwhMSk6SCh0LG8pKTpEKHQsbyxlLCExKX1lbHNlIHJ8fChvLnJlYWRpbmc9ITEsSCh0LG8pKTtyZXR1cm4hby5lbmRlZCYmKG8ubGVuZ3RoPG8uaGlnaFdhdGVyTWFya3x8MD09PW8ubGVuZ3RoKX1mdW5jdGlvbiBEKHQsZSxuLHIpe2UuZmxvd2luZyYmMD09PWUubGVuZ3RoJiYhZS5zeW5jJiZ0Lmxpc3RlbmVyQ291bnQoXCJkYXRhXCIpPjA/KGUubXVsdGlBd2FpdERyYWluP2UuYXdhaXREcmFpbldyaXRlcnMuY2xlYXIoKTplLmF3YWl0RHJhaW5Xcml0ZXJzPW51bGwsZS5kYXRhRW1pdHRlZD0hMCx0LmVtaXQoXCJkYXRhXCIsbikpOihlLmxlbmd0aCs9ZS5vYmplY3RNb2RlPzE6bi5sZW5ndGgscj9lLmJ1ZmZlci51bnNoaWZ0KG4pOmUuYnVmZmVyLnB1c2gobiksZS5uZWVkUmVhZGFibGUmJnoodCkpLEgodCxlKX1XLnByb3RvdHlwZS5kZXN0cm95PVMuZGVzdHJveSxXLnByb3RvdHlwZS5fdW5kZXN0cm95PVMudW5kZXN0cm95LFcucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKHQsZSl7ZSh0KX0sVy5wcm90b3R5cGVbZy5jYXB0dXJlUmVqZWN0aW9uU3ltYm9sXT1mdW5jdGlvbih0KXt0aGlzLmRlc3Ryb3kodCl9LFcucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXtyZXR1cm4gJCh0aGlzLHQsZSwhMSl9LFcucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gJCh0aGlzLHQsZSwhMCl9LFcucHJvdG90eXBlLmlzUGF1c2VkPWZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiEwPT09dFtPXXx8ITE9PT10LmZsb3dpbmd9LFcucHJvdG90eXBlLnNldEVuY29kaW5nPWZ1bmN0aW9uKHQpe2NvbnN0IGU9bmV3IFUodCk7dGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyPWUsdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmNvZGluZz10aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIuZW5jb2Rpbmc7Y29uc3Qgbj10aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlcjtsZXQgcj1cIlwiO2Zvcihjb25zdCB0IG9mIG4pcis9ZS53cml0ZSh0KTtyZXR1cm4gbi5jbGVhcigpLFwiXCIhPT1yJiZuLnB1c2gociksdGhpcy5fcmVhZGFibGVTdGF0ZS5sZW5ndGg9ci5sZW5ndGgsdGhpc307ZnVuY3Rpb24gRih0LGUpe3JldHVybiB0PD0wfHwwPT09ZS5sZW5ndGgmJmUuZW5kZWQ/MDplLm9iamVjdE1vZGU/MTphKHQpP2UuZmxvd2luZyYmZS5sZW5ndGg/ZS5idWZmZXIuZmlyc3QoKS5sZW5ndGg6ZS5sZW5ndGg6dDw9ZS5sZW5ndGg/dDplLmVuZGVkP2UubGVuZ3RoOjB9ZnVuY3Rpb24geih0KXtjb25zdCBlPXQuX3JlYWRhYmxlU3RhdGU7XyhcImVtaXRSZWFkYWJsZVwiLGUubmVlZFJlYWRhYmxlLGUuZW1pdHRlZFJlYWRhYmxlKSxlLm5lZWRSZWFkYWJsZT0hMSxlLmVtaXR0ZWRSZWFkYWJsZXx8KF8oXCJlbWl0UmVhZGFibGVcIixlLmZsb3dpbmcpLGUuZW1pdHRlZFJlYWRhYmxlPSEwLHIubmV4dFRpY2socSx0KSl9ZnVuY3Rpb24gcSh0KXtjb25zdCBlPXQuX3JlYWRhYmxlU3RhdGU7XyhcImVtaXRSZWFkYWJsZV9cIixlLmRlc3Ryb3llZCxlLmxlbmd0aCxlLmVuZGVkKSxlLmRlc3Ryb3llZHx8ZS5lcnJvcmVkfHwhZS5sZW5ndGgmJiFlLmVuZGVkfHwodC5lbWl0KFwicmVhZGFibGVcIiksZS5lbWl0dGVkUmVhZGFibGU9ITEpLGUubmVlZFJlYWRhYmxlPSFlLmZsb3dpbmcmJiFlLmVuZGVkJiZlLmxlbmd0aDw9ZS5oaWdoV2F0ZXJNYXJrLEsodCl9ZnVuY3Rpb24gSCh0LGUpeyFlLnJlYWRpbmdNb3JlJiZlLmNvbnN0cnVjdGVkJiYoZS5yZWFkaW5nTW9yZT0hMCxyLm5leHRUaWNrKFYsdCxlKSl9ZnVuY3Rpb24gVih0LGUpe2Zvcig7IWUucmVhZGluZyYmIWUuZW5kZWQmJihlLmxlbmd0aDxlLmhpZ2hXYXRlck1hcmt8fGUuZmxvd2luZyYmMD09PWUubGVuZ3RoKTspe2NvbnN0IG49ZS5sZW5ndGg7aWYoXyhcIm1heWJlUmVhZE1vcmUgcmVhZCAwXCIpLHQucmVhZCgwKSxuPT09ZS5sZW5ndGgpYnJlYWt9ZS5yZWFkaW5nTW9yZT0hMX1mdW5jdGlvbiBHKHQpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtlLnJlYWRhYmxlTGlzdGVuaW5nPXQubGlzdGVuZXJDb3VudChcInJlYWRhYmxlXCIpPjAsZS5yZXN1bWVTY2hlZHVsZWQmJiExPT09ZVtPXT9lLmZsb3dpbmc9ITA6dC5saXN0ZW5lckNvdW50KFwiZGF0YVwiKT4wP3QucmVzdW1lKCk6ZS5yZWFkYWJsZUxpc3RlbmluZ3x8KGUuZmxvd2luZz1udWxsKX1mdW5jdGlvbiBKKHQpe18oXCJyZWFkYWJsZSBuZXh0dGljayByZWFkIDBcIiksdC5yZWFkKDApfWZ1bmN0aW9uIFkodCxlKXtfKFwicmVzdW1lXCIsZS5yZWFkaW5nKSxlLnJlYWRpbmd8fHQucmVhZCgwKSxlLnJlc3VtZVNjaGVkdWxlZD0hMSx0LmVtaXQoXCJyZXN1bWVcIiksSyh0KSxlLmZsb3dpbmcmJiFlLnJlYWRpbmcmJnQucmVhZCgwKX1mdW5jdGlvbiBLKHQpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtmb3IoXyhcImZsb3dcIixlLmZsb3dpbmcpO2UuZmxvd2luZyYmbnVsbCE9PXQucmVhZCgpOyk7fWZ1bmN0aW9uIFgodCxlKXtcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnJlYWQmJih0PVcud3JhcCh0LHtvYmplY3RNb2RlOiEwfSkpO2NvbnN0IG49YXN5bmMgZnVuY3Rpb24qKHQsZSl7bGV0IG4scj1OO2Z1bmN0aW9uIG8oZSl7dGhpcz09PXQ/KHIoKSxyPU4pOnI9ZX10Lm9uKFwicmVhZGFibGVcIixvKTtjb25zdCBpPXcodCx7d3JpdGFibGU6ITF9LCh0PT57bj10P1Qobix0KTpudWxsLHIoKSxyPU59KSk7dHJ5e2Zvcig7Oyl7Y29uc3QgZT10LmRlc3Ryb3llZD9udWxsOnQucmVhZCgpO2lmKG51bGwhPT1lKXlpZWxkIGU7ZWxzZXtpZihuKXRocm93IG47aWYobnVsbD09PW4pcmV0dXJuO2F3YWl0IG5ldyBmKG8pfX19Y2F0Y2godCl7dGhyb3cgbj1UKG4sdCksbn1maW5hbGx5eyFuJiYhMT09PShudWxsPT1lP3ZvaWQgMDplLmRlc3Ryb3lPblJldHVybil8fHZvaWQgMCE9PW4mJiF0Ll9yZWFkYWJsZVN0YXRlLmF1dG9EZXN0cm95Pyh0Lm9mZihcInJlYWRhYmxlXCIsbyksaSgpKTpTLmRlc3Ryb3llcih0LG51bGwpfX0odCxlKTtyZXR1cm4gbi5zdHJlYW09dCxufWZ1bmN0aW9uIFoodCxlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIG51bGw7bGV0IG47cmV0dXJuIGUub2JqZWN0TW9kZT9uPWUuYnVmZmVyLnNoaWZ0KCk6IXR8fHQ+PWUubGVuZ3RoPyhuPWUuZGVjb2Rlcj9lLmJ1ZmZlci5qb2luKFwiXCIpOjE9PT1lLmJ1ZmZlci5sZW5ndGg/ZS5idWZmZXIuZmlyc3QoKTplLmJ1ZmZlci5jb25jYXQoZS5sZW5ndGgpLGUuYnVmZmVyLmNsZWFyKCkpOm49ZS5idWZmZXIuY29uc3VtZSh0LGUuZGVjb2Rlciksbn1mdW5jdGlvbiBRKHQpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTtfKFwiZW5kUmVhZGFibGVcIixlLmVuZEVtaXR0ZWQpLGUuZW5kRW1pdHRlZHx8KGUuZW5kZWQ9ITAsci5uZXh0VGljayh0dCxlLHQpKX1mdW5jdGlvbiB0dCh0LGUpe2lmKF8oXCJlbmRSZWFkYWJsZU5UXCIsdC5lbmRFbWl0dGVkLHQubGVuZ3RoKSwhdC5lcnJvcmVkJiYhdC5jbG9zZUVtaXR0ZWQmJiF0LmVuZEVtaXR0ZWQmJjA9PT10Lmxlbmd0aClpZih0LmVuZEVtaXR0ZWQ9ITAsZS5lbWl0KFwiZW5kXCIpLGUud3JpdGFibGUmJiExPT09ZS5hbGxvd0hhbGZPcGVuKXIubmV4dFRpY2soZXQsZSk7ZWxzZSBpZih0LmF1dG9EZXN0cm95KXtjb25zdCB0PWUuX3dyaXRhYmxlU3RhdGU7KCF0fHx0LmF1dG9EZXN0cm95JiYodC5maW5pc2hlZHx8ITE9PT10LndyaXRhYmxlKSkmJmUuZGVzdHJveSgpfX1mdW5jdGlvbiBldCh0KXt0LndyaXRhYmxlJiYhdC53cml0YWJsZUVuZGVkJiYhdC5kZXN0cm95ZWQmJnQuZW5kKCl9bGV0IG50O2Z1bmN0aW9uIHJ0KCl7cmV0dXJuIHZvaWQgMD09PW50JiYobnQ9e30pLG50fVcucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7XyhcInJlYWRcIix0KSx2b2lkIDA9PT10P3Q9TmFOOmkodCl8fCh0PXModCwxMCkpO2NvbnN0IGU9dGhpcy5fcmVhZGFibGVTdGF0ZSxuPXQ7aWYodD5lLmhpZ2hXYXRlck1hcmsmJihlLmhpZ2hXYXRlck1hcms9ZnVuY3Rpb24odCl7aWYodD4xMDczNzQxODI0KXRocm93IG5ldyBDKFwic2l6ZVwiLFwiPD0gMUdpQlwiLHQpO3JldHVybiB0LS0sdHw9dD4+PjEsdHw9dD4+PjIsdHw9dD4+PjQsdHw9dD4+PjgsdHw9dD4+PjE2LCsrdH0odCkpLDAhPT10JiYoZS5lbWl0dGVkUmVhZGFibGU9ITEpLDA9PT10JiZlLm5lZWRSZWFkYWJsZSYmKCgwIT09ZS5oaWdoV2F0ZXJNYXJrP2UubGVuZ3RoPj1lLmhpZ2hXYXRlck1hcms6ZS5sZW5ndGg+MCl8fGUuZW5kZWQpKXJldHVybiBfKFwicmVhZDogZW1pdFJlYWRhYmxlXCIsZS5sZW5ndGgsZS5lbmRlZCksMD09PWUubGVuZ3RoJiZlLmVuZGVkP1EodGhpcyk6eih0aGlzKSxudWxsO2lmKDA9PT0odD1GKHQsZSkpJiZlLmVuZGVkKXJldHVybiAwPT09ZS5sZW5ndGgmJlEodGhpcyksbnVsbDtsZXQgcixvPWUubmVlZFJlYWRhYmxlO2lmKF8oXCJuZWVkIHJlYWRhYmxlXCIsbyksKDA9PT1lLmxlbmd0aHx8ZS5sZW5ndGgtdDxlLmhpZ2hXYXRlck1hcmspJiYobz0hMCxfKFwibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmtcIixvKSksZS5lbmRlZHx8ZS5yZWFkaW5nfHxlLmRlc3Ryb3llZHx8ZS5lcnJvcmVkfHwhZS5jb25zdHJ1Y3RlZClvPSExLF8oXCJyZWFkaW5nLCBlbmRlZCBvciBjb25zdHJ1Y3RpbmdcIixvKTtlbHNlIGlmKG8pe18oXCJkbyByZWFkXCIpLGUucmVhZGluZz0hMCxlLnN5bmM9ITAsMD09PWUubGVuZ3RoJiYoZS5uZWVkUmVhZGFibGU9ITApO3RyeXt0aGlzLl9yZWFkKGUuaGlnaFdhdGVyTWFyayl9Y2F0Y2godCl7TSh0aGlzLHQpfWUuc3luYz0hMSxlLnJlYWRpbmd8fCh0PUYobixlKSl9cmV0dXJuIHI9dD4wP1oodCxlKTpudWxsLG51bGw9PT1yPyhlLm5lZWRSZWFkYWJsZT1lLmxlbmd0aDw9ZS5oaWdoV2F0ZXJNYXJrLHQ9MCk6KGUubGVuZ3RoLT10LGUubXVsdGlBd2FpdERyYWluP2UuYXdhaXREcmFpbldyaXRlcnMuY2xlYXIoKTplLmF3YWl0RHJhaW5Xcml0ZXJzPW51bGwpLDA9PT1lLmxlbmd0aCYmKGUuZW5kZWR8fChlLm5lZWRSZWFkYWJsZT0hMCksbiE9PXQmJmUuZW5kZWQmJlEodGhpcykpLG51bGw9PT1yfHxlLmVycm9yRW1pdHRlZHx8ZS5jbG9zZUVtaXR0ZWR8fChlLmRhdGFFbWl0dGVkPSEwLHRoaXMuZW1pdChcImRhdGFcIixyKSkscn0sVy5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IHgoXCJfcmVhZCgpXCIpfSxXLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLG89dGhpcy5fcmVhZGFibGVTdGF0ZTsxPT09by5waXBlcy5sZW5ndGgmJihvLm11bHRpQXdhaXREcmFpbnx8KG8ubXVsdGlBd2FpdERyYWluPSEwLG8uYXdhaXREcmFpbldyaXRlcnM9bmV3IGQoby5hd2FpdERyYWluV3JpdGVycz9bby5hd2FpdERyYWluV3JpdGVyc106W10pKSksby5waXBlcy5wdXNoKHQpLF8oXCJwaXBlIGNvdW50PSVkIG9wdHM9JWpcIixvLnBpcGVzLmxlbmd0aCxlKTtjb25zdCBpPSghZXx8ITEhPT1lLmVuZCkmJnQhPT1yLnN0ZG91dCYmdCE9PXIuc3RkZXJyP3M6eTtmdW5jdGlvbiBhKGUscil7XyhcIm9udW5waXBlXCIpLGU9PT1uJiZyJiYhMT09PXIuaGFzVW5waXBlZCYmKHIuaGFzVW5waXBlZD0hMCxmdW5jdGlvbigpe18oXCJjbGVhbnVwXCIpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHApLHQucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIixnKSx1JiZ0LnJlbW92ZUxpc3RlbmVyKFwiZHJhaW5cIix1KTt0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixoKSx0LnJlbW92ZUxpc3RlbmVyKFwidW5waXBlXCIsYSksbi5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLHMpLG4ucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIix5KSxuLnJlbW92ZUxpc3RlbmVyKFwiZGF0YVwiLGYpLGw9ITAsdSYmby5hd2FpdERyYWluV3JpdGVycyYmKCF0Ll93cml0YWJsZVN0YXRlfHx0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikmJnUoKX0oKSl9ZnVuY3Rpb24gcygpe18oXCJvbmVuZFwiKSx0LmVuZCgpfWxldCB1O28uZW5kRW1pdHRlZD9yLm5leHRUaWNrKGkpOm4ub25jZShcImVuZFwiLGkpLHQub24oXCJ1bnBpcGVcIixhKTtsZXQgbD0hMTtmdW5jdGlvbiBjKCl7bHx8KDE9PT1vLnBpcGVzLmxlbmd0aCYmby5waXBlc1swXT09PXQ/KF8oXCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2VcIiwwKSxvLmF3YWl0RHJhaW5Xcml0ZXJzPXQsby5tdWx0aUF3YWl0RHJhaW49ITEpOm8ucGlwZXMubGVuZ3RoPjEmJm8ucGlwZXMuaW5jbHVkZXModCkmJihfKFwiZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlXCIsby5hd2FpdERyYWluV3JpdGVycy5zaXplKSxvLmF3YWl0RHJhaW5Xcml0ZXJzLmFkZCh0KSksbi5wYXVzZSgpKSx1fHwodT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe2NvbnN0IG49dC5fcmVhZGFibGVTdGF0ZTtuLmF3YWl0RHJhaW5Xcml0ZXJzPT09ZT8oXyhcInBpcGVPbkRyYWluXCIsMSksbi5hd2FpdERyYWluV3JpdGVycz1udWxsKTpuLm11bHRpQXdhaXREcmFpbiYmKF8oXCJwaXBlT25EcmFpblwiLG4uYXdhaXREcmFpbldyaXRlcnMuc2l6ZSksbi5hd2FpdERyYWluV3JpdGVycy5kZWxldGUoZSkpLG4uYXdhaXREcmFpbldyaXRlcnMmJjAhPT1uLmF3YWl0RHJhaW5Xcml0ZXJzLnNpemV8fCF0Lmxpc3RlbmVyQ291bnQoXCJkYXRhXCIpfHx0LnJlc3VtZSgpfX0obix0KSx0Lm9uKFwiZHJhaW5cIix1KSl9ZnVuY3Rpb24gZihlKXtfKFwib25kYXRhXCIpO2NvbnN0IG49dC53cml0ZShlKTtfKFwiZGVzdC53cml0ZVwiLG4pLCExPT09biYmYygpfWZ1bmN0aW9uIGgoZSl7aWYoXyhcIm9uZXJyb3JcIixlKSx5KCksdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsaCksMD09PXQubGlzdGVuZXJDb3VudChcImVycm9yXCIpKXtjb25zdCBuPXQuX3dyaXRhYmxlU3RhdGV8fHQuX3JlYWRhYmxlU3RhdGU7biYmIW4uZXJyb3JFbWl0dGVkP00odCxlKTp0LmVtaXQoXCJlcnJvclwiLGUpfX1mdW5jdGlvbiBwKCl7dC5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLGcpLHkoKX1mdW5jdGlvbiBnKCl7XyhcIm9uZmluaXNoXCIpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHApLHkoKX1mdW5jdGlvbiB5KCl7XyhcInVucGlwZVwiKSxuLnVucGlwZSh0KX1yZXR1cm4gbi5vbihcImRhdGFcIixmKSxtKHQsXCJlcnJvclwiLGgpLHQub25jZShcImNsb3NlXCIscCksdC5vbmNlKFwiZmluaXNoXCIsZyksdC5lbWl0KFwicGlwZVwiLG4pLCEwPT09dC53cml0YWJsZU5lZWREcmFpbj9vLmZsb3dpbmcmJmMoKTpvLmZsb3dpbmd8fChfKFwicGlwZSByZXN1bWVcIiksbi5yZXN1bWUoKSksdH0sVy5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZigwPT09ZS5waXBlcy5sZW5ndGgpcmV0dXJuIHRoaXM7aWYoIXQpe2NvbnN0IHQ9ZS5waXBlcztlLnBpcGVzPVtdLHRoaXMucGF1c2UoKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdLmVtaXQoXCJ1bnBpcGVcIix0aGlzLHtoYXNVbnBpcGVkOiExfSk7cmV0dXJuIHRoaXN9Y29uc3Qgbj1vKGUucGlwZXMsdCk7cmV0dXJuLTE9PT1ufHwoZS5waXBlcy5zcGxpY2UobiwxKSwwPT09ZS5waXBlcy5sZW5ndGgmJnRoaXMucGF1c2UoKSx0LmVtaXQoXCJ1bnBpcGVcIix0aGlzLHtoYXNVbnBpcGVkOiExfSkpLHRoaXN9LFcucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj15LnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsdCxlKSxvPXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuXCJkYXRhXCI9PT10PyhvLnJlYWRhYmxlTGlzdGVuaW5nPXRoaXMubGlzdGVuZXJDb3VudChcInJlYWRhYmxlXCIpPjAsITEhPT1vLmZsb3dpbmcmJnRoaXMucmVzdW1lKCkpOlwicmVhZGFibGVcIj09PXQmJihvLmVuZEVtaXR0ZWR8fG8ucmVhZGFibGVMaXN0ZW5pbmd8fChvLnJlYWRhYmxlTGlzdGVuaW5nPW8ubmVlZFJlYWRhYmxlPSEwLG8uZmxvd2luZz0hMSxvLmVtaXR0ZWRSZWFkYWJsZT0hMSxfKFwib24gcmVhZGFibGVcIixvLmxlbmd0aCxvLnJlYWRpbmcpLG8ubGVuZ3RoP3oodGhpcyk6by5yZWFkaW5nfHxyLm5leHRUaWNrKEosdGhpcykpKSxufSxXLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1XLnByb3RvdHlwZS5vbixXLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe2NvbnN0IG49eS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIuY2FsbCh0aGlzLHQsZSk7cmV0dXJuXCJyZWFkYWJsZVwiPT09dCYmci5uZXh0VGljayhHLHRoaXMpLG59LFcucHJvdG90eXBlLm9mZj1XLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixXLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7Y29uc3QgZT15LnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVyblwicmVhZGFibGVcIiE9PXQmJnZvaWQgMCE9PXR8fHIubmV4dFRpY2soRyx0aGlzKSxlfSxXLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtjb25zdCB0PXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuIHQuZmxvd2luZ3x8KF8oXCJyZXN1bWVcIiksdC5mbG93aW5nPSF0LnJlYWRhYmxlTGlzdGVuaW5nLGZ1bmN0aW9uKHQsZSl7ZS5yZXN1bWVTY2hlZHVsZWR8fChlLnJlc3VtZVNjaGVkdWxlZD0hMCxyLm5leHRUaWNrKFksdCxlKSl9KHRoaXMsdCkpLHRbT109ITEsdGhpc30sVy5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtyZXR1cm4gXyhcImNhbGwgcGF1c2UgZmxvd2luZz0lalwiLHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyksITEhPT10aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcmJihfKFwicGF1c2VcIiksdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nPSExLHRoaXMuZW1pdChcInBhdXNlXCIpKSx0aGlzLl9yZWFkYWJsZVN0YXRlW09dPSEwLHRoaXN9LFcucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24odCl7bGV0IGU9ITE7dC5vbihcImRhdGFcIiwobj0+eyF0aGlzLnB1c2gobikmJnQucGF1c2UmJihlPSEwLHQucGF1c2UoKSl9KSksdC5vbihcImVuZFwiLCgoKT0+e3RoaXMucHVzaChudWxsKX0pKSx0Lm9uKFwiZXJyb3JcIiwodD0+e00odGhpcyx0KX0pKSx0Lm9uKFwiY2xvc2VcIiwoKCk9Pnt0aGlzLmRlc3Ryb3koKX0pKSx0Lm9uKFwiZGVzdHJveVwiLCgoKT0+e3RoaXMuZGVzdHJveSgpfSkpLHRoaXMuX3JlYWQ9KCk9PntlJiZ0LnJlc3VtZSYmKGU9ITEsdC5yZXN1bWUoKSl9O2NvbnN0IG49bCh0KTtmb3IobGV0IGU9MTtlPG4ubGVuZ3RoO2UrKyl7Y29uc3Qgcj1uW2VdO3ZvaWQgMD09PXRoaXNbcl0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRbcl0mJih0aGlzW3JdPXRbcl0uYmluZCh0KSl9cmV0dXJuIHRoaXN9LFcucHJvdG90eXBlW2hdPWZ1bmN0aW9uKCl7cmV0dXJuIFgodGhpcyl9LFcucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiZMKHQsXCJvcHRpb25zXCIpLFgodGhpcyx0KX0sdShXLnByb3RvdHlwZSx7cmVhZGFibGU6e19fcHJvdG9fXzpudWxsLGdldCgpe2NvbnN0IHQ9dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm4hKCF0fHwhMT09PXQucmVhZGFibGV8fHQuZGVzdHJveWVkfHx0LmVycm9yRW1pdHRlZHx8dC5lbmRFbWl0dGVkKX0sc2V0KHQpe3RoaXMuX3JlYWRhYmxlU3RhdGUmJih0aGlzLl9yZWFkYWJsZVN0YXRlLnJlYWRhYmxlPSEhdCl9fSxyZWFkYWJsZURpZFJlYWQ6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGF0YUVtaXR0ZWR9fSxyZWFkYWJsZUFib3J0ZWQ6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISghMT09PXRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGFibGV8fCF0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCYmIXRoaXMuX3JlYWRhYmxlU3RhdGUuZXJyb3JlZHx8dGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKX19LHJlYWRhYmxlSGlnaFdhdGVyTWFyazp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrfX0scmVhZGFibGVCdWZmZXI6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUmJnRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyfX0scmVhZGFibGVGbG93aW5nOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmd9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZWFkYWJsZVN0YXRlJiYodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nPXQpfX0scmVhZGFibGVMZW5ndGg6e19fcHJvdG9fXzpudWxsLGVudW1lcmFibGU6ITEsZ2V0KCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUubGVuZ3RofX0scmVhZGFibGVPYmplY3RNb2RlOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiEhdGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5vYmplY3RNb2RlfX0scmVhZGFibGVFbmNvZGluZzp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQoKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZT90aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nOm51bGx9fSxlcnJvcmVkOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlP3RoaXMuX3JlYWRhYmxlU3RhdGUuZXJyb3JlZDpudWxsfX0sY2xvc2VkOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4hIXRoaXMuX3JlYWRhYmxlU3RhdGUmJnRoaXMuX3JlYWRhYmxlU3RhdGUuY2xvc2VkfX0sZGVzdHJveWVkOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiEhdGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWR9LHNldCh0KXt0aGlzLl9yZWFkYWJsZVN0YXRlJiYodGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9dCl9fSxyZWFkYWJsZUVuZGVkOntfX3Byb3RvX186bnVsbCxlbnVtZXJhYmxlOiExLGdldCgpe3JldHVybiEhdGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkfX19KSx1KFAucHJvdG90eXBlLHtwaXBlc0NvdW50OntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdGhpcy5waXBlcy5sZW5ndGh9fSxwYXVzZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiExIT09dGhpc1tPXX0sc2V0KHQpe3RoaXNbT109ISF0fX19KSxXLl9mcm9tTGlzdD1aLFcuZnJvbT1mdW5jdGlvbih0LGUpe3JldHVybiBqKFcsdCxlKX0sVy5mcm9tV2ViPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHJ0KCkubmV3U3RyZWFtUmVhZGFibGVGcm9tUmVhZGFibGVTdHJlYW0odCxlKX0sVy50b1dlYj1mdW5jdGlvbih0LGUpe3JldHVybiBydCgpLm5ld1JlYWRhYmxlU3RyZWFtRnJvbVN0cmVhbVJlYWRhYmxlKHQsZSl9LFcud3JhcD1mdW5jdGlvbih0LGUpe3ZhciBuLHI7cmV0dXJuIG5ldyBXKHtvYmplY3RNb2RlOm51bGw9PT0obj1udWxsIT09KHI9dC5yZWFkYWJsZU9iamVjdE1vZGUpJiZ2b2lkIDAhPT1yP3I6dC5vYmplY3RNb2RlKXx8dm9pZCAwPT09bnx8biwuLi5lLGRlc3Ryb3koZSxuKXtTLmRlc3Ryb3llcih0LGUpLG4oZSl9fSkud3JhcCh0KX19LDQ5ODoodCxlLG4pPT57Y29uc3R7TWF0aEZsb29yOnIsTnVtYmVySXNJbnRlZ2VyOm99PW4oMTkxKSx7RVJSX0lOVkFMSURfQVJHX1ZBTFVFOml9PW4oMTQxKS5jb2RlcztmdW5jdGlvbiBhKHQpe3JldHVybiB0PzE2OjE2Mzg0fXQuZXhwb3J0cz17Z2V0SGlnaFdhdGVyTWFyazpmdW5jdGlvbih0LGUsbixzKXtjb25zdCB1PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbnVsbCE9dC5oaWdoV2F0ZXJNYXJrP3QuaGlnaFdhdGVyTWFyazplP3Rbbl06bnVsbH0oZSxzLG4pO2lmKG51bGwhPXUpe2lmKCFvKHUpfHx1PDApe3Rocm93IG5ldyBpKHM/YG9wdGlvbnMuJHtufWA6XCJvcHRpb25zLmhpZ2hXYXRlck1hcmtcIix1KX1yZXR1cm4gcih1KX1yZXR1cm4gYSh0Lm9iamVjdE1vZGUpfSxnZXREZWZhdWx0SGlnaFdhdGVyTWFyazphfX0sMjEwOih0LGUsbik9Pntjb25zdHtPYmplY3RTZXRQcm90b3R5cGVPZjpyLFN5bWJvbDpvfT1uKDE5MSk7dC5leHBvcnRzPWw7Y29uc3R7RVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQ6aX09bigxNDEpLmNvZGVzLGE9bigxODIpLHtnZXRIaWdoV2F0ZXJNYXJrOnN9PW4oNDk4KTtyKGwucHJvdG90eXBlLGEucHJvdG90eXBlKSxyKGwsYSk7Y29uc3QgdT1vKFwia0NhbGxiYWNrXCIpO2Z1bmN0aW9uIGwodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbCkpcmV0dXJuIG5ldyBsKHQpO2NvbnN0IGU9dD9zKHRoaXMsdCxcInJlYWRhYmxlSGlnaFdhdGVyTWFya1wiLCEwKTpudWxsOzA9PT1lJiYodD17Li4udCxoaWdoV2F0ZXJNYXJrOm51bGwscmVhZGFibGVIaWdoV2F0ZXJNYXJrOmUsd3JpdGFibGVIaWdoV2F0ZXJNYXJrOnQud3JpdGFibGVIaWdoV2F0ZXJNYXJrfHwwfSksYS5jYWxsKHRoaXMsdCksdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jPSExLHRoaXNbdV09bnVsbCx0JiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC50cmFuc2Zvcm0mJih0aGlzLl90cmFuc2Zvcm09dC50cmFuc2Zvcm0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZmx1c2gmJih0aGlzLl9mbHVzaD10LmZsdXNoKSksdGhpcy5vbihcInByZWZpbmlzaFwiLGYpfWZ1bmN0aW9uIGModCl7XCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5fZmx1c2h8fHRoaXMuZGVzdHJveWVkPyh0aGlzLnB1c2gobnVsbCksdCYmdCgpKTp0aGlzLl9mbHVzaCgoKGUsbik9PntlP3Q/dChlKTp0aGlzLmRlc3Ryb3koZSk6KG51bGwhPW4mJnRoaXMucHVzaChuKSx0aGlzLnB1c2gobnVsbCksdCYmdCgpKX0pKX1mdW5jdGlvbiBmKCl7dGhpcy5fZmluYWwhPT1jJiZjLmNhbGwodGhpcyl9bC5wcm90b3R5cGUuX2ZpbmFsPWMsbC5wcm90b3R5cGUuX3RyYW5zZm9ybT1mdW5jdGlvbih0LGUsbil7dGhyb3cgbmV3IGkoXCJfdHJhbnNmb3JtKClcIil9LGwucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbih0LGUsbil7Y29uc3Qgcj10aGlzLl9yZWFkYWJsZVN0YXRlLG89dGhpcy5fd3JpdGFibGVTdGF0ZSxpPXIubGVuZ3RoO3RoaXMuX3RyYW5zZm9ybSh0LGUsKCh0LGUpPT57dD9uKHQpOihudWxsIT1lJiZ0aGlzLnB1c2goZSksby5lbmRlZHx8aT09PXIubGVuZ3RofHxyLmxlbmd0aDxyLmhpZ2hXYXRlck1hcms/bigpOnRoaXNbdV09bil9KSl9LGwucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKCl7aWYodGhpc1t1XSl7Y29uc3QgdD10aGlzW3VdO3RoaXNbdV09bnVsbCx0KCl9fX0sMTMyOih0LGUsbik9Pntjb25zdHtTeW1ib2w6cixTeW1ib2xBc3luY0l0ZXJhdG9yOm8sU3ltYm9sSXRlcmF0b3I6aSxTeW1ib2xGb3I6YX09bigxOTEpLHM9cihcImtEZXN0cm95ZWRcIiksdT1yKFwia0lzRXJyb3JlZFwiKSxsPXIoXCJrSXNSZWFkYWJsZVwiKSxjPXIoXCJrSXNEaXN0dXJiZWRcIiksZj1hKFwibm9kZWpzLndlYnN0cmVhbS5pc0Nsb3NlZFByb21pc2VcIiksZD1hKFwibm9kZWpzLndlYnN0cmVhbS5jb250cm9sbGVyRXJyb3JGdW5jdGlvblwiKTtmdW5jdGlvbiBoKHQsZT0hMSl7dmFyIG47cmV0dXJuISghdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5waXBlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0Lm9ufHxlJiYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5wYXVzZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5yZXN1bWUpfHx0Ll93cml0YWJsZVN0YXRlJiYhMT09PShudWxsPT09KG49dC5fcmVhZGFibGVTdGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucmVhZGFibGUpfHx0Ll93cml0YWJsZVN0YXRlJiYhdC5fcmVhZGFibGVTdGF0ZSl9ZnVuY3Rpb24gcCh0KXt2YXIgZTtyZXR1cm4hKCF0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LndyaXRlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0Lm9ufHx0Ll9yZWFkYWJsZVN0YXRlJiYhMT09PShudWxsPT09KGU9dC5fd3JpdGFibGVTdGF0ZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUud3JpdGFibGUpKX1mdW5jdGlvbiBnKHQpe3JldHVybiB0JiYodC5fcmVhZGFibGVTdGF0ZXx8dC5fd3JpdGFibGVTdGF0ZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgdC53cml0ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5vbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgdC5waXBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9uKX1mdW5jdGlvbiB5KHQpe3JldHVybiEoIXR8fGcodCl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQucGlwZVRocm91Z2h8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuZ2V0UmVhZGVyfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmNhbmNlbCl9ZnVuY3Rpb24gbSh0KXtyZXR1cm4hKCF0fHxnKHQpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmdldFdyaXRlcnx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5hYm9ydCl9ZnVuY3Rpb24gdih0KXtyZXR1cm4hKCF0fHxnKHQpfHxcIm9iamVjdFwiIT10eXBlb2YgdC5yZWFkYWJsZXx8XCJvYmplY3RcIiE9dHlwZW9mIHQud3JpdGFibGUpfWZ1bmN0aW9uIGIodCl7aWYoIWcodCkpcmV0dXJuIG51bGw7Y29uc3QgZT10Ll93cml0YWJsZVN0YXRlLG49dC5fcmVhZGFibGVTdGF0ZSxyPWV8fG47cmV0dXJuISEodC5kZXN0cm95ZWR8fHRbc118fG51bGwhPXImJnIuZGVzdHJveWVkKX1mdW5jdGlvbiB3KHQpe2lmKCFwKHQpKXJldHVybiBudWxsO2lmKCEwPT09dC53cml0YWJsZUVuZGVkKXJldHVybiEwO2NvbnN0IGU9dC5fd3JpdGFibGVTdGF0ZTtyZXR1cm4obnVsbD09ZXx8IWUuZXJyb3JlZCkmJihcImJvb2xlYW5cIiE9dHlwZW9mKG51bGw9PWU/dm9pZCAwOmUuZW5kZWQpP251bGw6ZS5lbmRlZCl9ZnVuY3Rpb24gXyh0LGUpe2lmKCFoKHQpKXJldHVybiBudWxsO2NvbnN0IG49dC5fcmVhZGFibGVTdGF0ZTtyZXR1cm4obnVsbD09bnx8IW4uZXJyb3JlZCkmJihcImJvb2xlYW5cIiE9dHlwZW9mKG51bGw9PW4/dm9pZCAwOm4uZW5kRW1pdHRlZCk/bnVsbDohIShuLmVuZEVtaXR0ZWR8fCExPT09ZSYmITA9PT1uLmVuZGVkJiYwPT09bi5sZW5ndGgpKX1mdW5jdGlvbiBFKHQpe3JldHVybiB0JiZudWxsIT10W2xdP3RbbF06XCJib29sZWFuXCIhPXR5cGVvZihudWxsPT10P3ZvaWQgMDp0LnJlYWRhYmxlKT9udWxsOiFiKHQpJiYoaCh0KSYmdC5yZWFkYWJsZSYmIV8odCkpfWZ1bmN0aW9uIFModCl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZihudWxsPT10P3ZvaWQgMDp0LndyaXRhYmxlKT9udWxsOiFiKHQpJiYocCh0KSYmdC53cml0YWJsZSYmIXcodCkpfWZ1bmN0aW9uIEEodCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9jbG9zZWQmJlwiYm9vbGVhblwiPT10eXBlb2YgdC5fZGVmYXVsdEtlZXBBbGl2ZSYmXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9yZW1vdmVkQ29ubmVjdGlvbiYmXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9yZW1vdmVkQ29udExlbn1mdW5jdGlvbiBJKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdC5fc2VudDEwMCYmQSh0KX10LmV4cG9ydHM9e2tEZXN0cm95ZWQ6cyxpc0Rpc3R1cmJlZDpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCF0fHwhKG51bGwhPT0oZT10W2NdKSYmdm9pZCAwIT09ZT9lOnQucmVhZGFibGVEaWRSZWFkfHx0LnJlYWRhYmxlQWJvcnRlZCkpfSxrSXNEaXN0dXJiZWQ6Yyxpc0Vycm9yZWQ6ZnVuY3Rpb24odCl7dmFyIGUsbixyLG8saSxhLHMsbCxjLGY7cmV0dXJuISghdHx8IShudWxsIT09KGU9bnVsbCE9PShuPW51bGwhPT0ocj1udWxsIT09KG89bnVsbCE9PShpPW51bGwhPT0oYT10W3VdKSYmdm9pZCAwIT09YT9hOnQucmVhZGFibGVFcnJvcmVkKSYmdm9pZCAwIT09aT9pOnQud3JpdGFibGVFcnJvcmVkKSYmdm9pZCAwIT09bz9vOm51bGw9PT0ocz10Ll9yZWFkYWJsZVN0YXRlKXx8dm9pZCAwPT09cz92b2lkIDA6cy5lcnJvckVtaXR0ZWQpJiZ2b2lkIDAhPT1yP3I6bnVsbD09PShsPXQuX3dyaXRhYmxlU3RhdGUpfHx2b2lkIDA9PT1sP3ZvaWQgMDpsLmVycm9yRW1pdHRlZCkmJnZvaWQgMCE9PW4/bjpudWxsPT09KGM9dC5fcmVhZGFibGVTdGF0ZSl8fHZvaWQgMD09PWM/dm9pZCAwOmMuZXJyb3JlZCkmJnZvaWQgMCE9PWU/ZTpudWxsPT09KGY9dC5fd3JpdGFibGVTdGF0ZSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZXJyb3JlZCkpfSxrSXNFcnJvcmVkOnUsaXNSZWFkYWJsZTpFLGtJc1JlYWRhYmxlOmwsa0lzQ2xvc2VkUHJvbWlzZTpmLGtDb250cm9sbGVyRXJyb3JGdW5jdGlvbjpkLGlzQ2xvc2VkOmZ1bmN0aW9uKHQpe2lmKCFnKHQpKXJldHVybiBudWxsO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgdC5jbG9zZWQpcmV0dXJuIHQuY2xvc2VkO2NvbnN0IGU9dC5fd3JpdGFibGVTdGF0ZSxuPXQuX3JlYWRhYmxlU3RhdGU7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZihudWxsPT1lP3ZvaWQgMDplLmNsb3NlZCl8fFwiYm9vbGVhblwiPT10eXBlb2YobnVsbD09bj92b2lkIDA6bi5jbG9zZWQpPyhudWxsPT1lP3ZvaWQgMDplLmNsb3NlZCl8fChudWxsPT1uP3ZvaWQgMDpuLmNsb3NlZCk6XCJib29sZWFuXCI9PXR5cGVvZiB0Ll9jbG9zZWQmJkEodCk/dC5fY2xvc2VkOm51bGx9LGlzRGVzdHJveWVkOmIsaXNEdXBsZXhOb2RlU3RyZWFtOmZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQucGlwZXx8IXQuX3JlYWRhYmxlU3RhdGV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQub258fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQud3JpdGUpfSxpc0ZpbmlzaGVkOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGcodCk/ISFiKHQpfHwoITE9PT0obnVsbD09ZT92b2lkIDA6ZS5yZWFkYWJsZSl8fCFFKHQpKSYmKCExPT09KG51bGw9PWU/dm9pZCAwOmUud3JpdGFibGUpfHwhUyh0KSk6bnVsbH0saXNJdGVyYWJsZTpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT10JiYoITA9PT1lP1wiZnVuY3Rpb25cIj09dHlwZW9mIHRbb106ITE9PT1lP1wiZnVuY3Rpb25cIj09dHlwZW9mIHRbaV06XCJmdW5jdGlvblwiPT10eXBlb2YgdFtvXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgdFtpXSl9LGlzUmVhZGFibGVOb2RlU3RyZWFtOmgsaXNSZWFkYWJsZVN0cmVhbTp5LGlzUmVhZGFibGVFbmRlZDpmdW5jdGlvbih0KXtpZighaCh0KSlyZXR1cm4gbnVsbDtpZighMD09PXQucmVhZGFibGVFbmRlZClyZXR1cm4hMDtjb25zdCBlPXQuX3JlYWRhYmxlU3RhdGU7cmV0dXJuISghZXx8ZS5lcnJvcmVkKSYmKFwiYm9vbGVhblwiIT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5lbmRlZCk/bnVsbDplLmVuZGVkKX0saXNSZWFkYWJsZUZpbmlzaGVkOl8saXNSZWFkYWJsZUVycm9yZWQ6ZnVuY3Rpb24odCl7dmFyIGUsbjtyZXR1cm4gZyh0KT90LnJlYWRhYmxlRXJyb3JlZD90LnJlYWRhYmxlRXJyb3JlZDpudWxsIT09KGU9bnVsbD09PShuPXQuX3JlYWRhYmxlU3RhdGUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmVycm9yZWQpJiZ2b2lkIDAhPT1lP2U6bnVsbDpudWxsfSxpc05vZGVTdHJlYW06Zyxpc1dlYlN0cmVhbTpmdW5jdGlvbih0KXtyZXR1cm4geSh0KXx8bSh0KXx8dih0KX0saXNXcml0YWJsZTpTLGlzV3JpdGFibGVOb2RlU3RyZWFtOnAsaXNXcml0YWJsZVN0cmVhbTptLGlzV3JpdGFibGVFbmRlZDp3LGlzV3JpdGFibGVGaW5pc2hlZDpmdW5jdGlvbih0LGUpe2lmKCFwKHQpKXJldHVybiBudWxsO2lmKCEwPT09dC53cml0YWJsZUZpbmlzaGVkKXJldHVybiEwO2NvbnN0IG49dC5fd3JpdGFibGVTdGF0ZTtyZXR1cm4obnVsbD09bnx8IW4uZXJyb3JlZCkmJihcImJvb2xlYW5cIiE9dHlwZW9mKG51bGw9PW4/dm9pZCAwOm4uZmluaXNoZWQpP251bGw6ISEobi5maW5pc2hlZHx8ITE9PT1lJiYhMD09PW4uZW5kZWQmJjA9PT1uLmxlbmd0aCkpfSxpc1dyaXRhYmxlRXJyb3JlZDpmdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiBnKHQpP3Qud3JpdGFibGVFcnJvcmVkP3Qud3JpdGFibGVFcnJvcmVkOm51bGwhPT0oZT1udWxsPT09KG49dC5fd3JpdGFibGVTdGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZXJyb3JlZCkmJnZvaWQgMCE9PWU/ZTpudWxsOm51bGx9LGlzU2VydmVyUmVxdWVzdDpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHQuX2NvbnN1bWluZyYmXCJib29sZWFuXCI9PXR5cGVvZiB0Ll9kdW1wZWQmJnZvaWQgMD09PShudWxsPT09KGU9dC5yZXEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnVwZ3JhZGVPckNvbm5lY3QpfSxpc1NlcnZlclJlc3BvbnNlOkksd2lsbEVtaXRDbG9zZTpmdW5jdGlvbih0KXtpZighZyh0KSlyZXR1cm4gbnVsbDtjb25zdCBlPXQuX3dyaXRhYmxlU3RhdGUsbj10Ll9yZWFkYWJsZVN0YXRlLHI9ZXx8bjtyZXR1cm4hciYmSSh0KXx8ISEociYmci5hdXRvRGVzdHJveSYmci5lbWl0Q2xvc2UmJiExPT09ci5jbG9zZWQpfSxpc1RyYW5zZm9ybVN0cmVhbTp2fX0sMzczOih0LGUsbik9Pntjb25zdCByPW4oNTMzKSx7QXJyYXlQcm90b3R5cGVTbGljZTpvLEVycm9yOmksRnVuY3Rpb25Qcm90b3R5cGVTeW1ib2xIYXNJbnN0YW5jZTphLE9iamVjdERlZmluZVByb3BlcnR5OnMsT2JqZWN0RGVmaW5lUHJvcGVydGllczp1LE9iamVjdFNldFByb3RvdHlwZU9mOmwsU3RyaW5nUHJvdG90eXBlVG9Mb3dlckNhc2U6YyxTeW1ib2w6ZixTeW1ib2xIYXNJbnN0YW5jZTpkfT1uKDE5MSk7dC5leHBvcnRzPVUsVS5Xcml0YWJsZVN0YXRlPUw7Y29uc3R7RXZlbnRFbWl0dGVyOmh9PW4oNDY1KSxwPW4oMjAwKS5TdHJlYW0se0J1ZmZlcjpnfT1uKDQ4NSkseT1uKDIzMCkse2FkZEFib3J0U2lnbmFsOm19PW4oMzc0KSx7Z2V0SGlnaFdhdGVyTWFyazp2LGdldERlZmF1bHRIaWdoV2F0ZXJNYXJrOmJ9PW4oNDk4KSx7RVJSX0lOVkFMSURfQVJHX1RZUEU6dyxFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRDpfLEVSUl9NVUxUSVBMRV9DQUxMQkFDSzpFLEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEU6UyxFUlJfU1RSRUFNX0RFU1RST1lFRDpBLEVSUl9TVFJFQU1fQUxSRUFEWV9GSU5JU0hFRDpJLEVSUl9TVFJFQU1fTlVMTF9WQUxVRVM6VCxFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORDpSLEVSUl9VTktOT1dOX0VOQ09ESU5HOnh9PW4oMTQxKS5jb2Rlcyx7ZXJyb3JPckRlc3Ryb3k6Q309eTtmdW5jdGlvbiBCKCl7fWwoVS5wcm90b3R5cGUscC5wcm90b3R5cGUpLGwoVSxwKTtjb25zdCBrPWYoXCJrT25GaW5pc2hlZFwiKTtmdW5jdGlvbiBMKHQsZSxyKXtcImJvb2xlYW5cIiE9dHlwZW9mIHImJihyPWUgaW5zdGFuY2VvZiBuKDE4MikpLHRoaXMub2JqZWN0TW9kZT0hKCF0fHwhdC5vYmplY3RNb2RlKSxyJiYodGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISghdHx8IXQud3JpdGFibGVPYmplY3RNb2RlKSksdGhpcy5oaWdoV2F0ZXJNYXJrPXQ/dih0aGlzLHQsXCJ3cml0YWJsZUhpZ2hXYXRlck1hcmtcIixyKTpiKCExKSx0aGlzLmZpbmFsQ2FsbGVkPSExLHRoaXMubmVlZERyYWluPSExLHRoaXMuZW5kaW5nPSExLHRoaXMuZW5kZWQ9ITEsdGhpcy5maW5pc2hlZD0hMSx0aGlzLmRlc3Ryb3llZD0hMTtjb25zdCBvPSEoIXR8fCExIT09dC5kZWNvZGVTdHJpbmdzKTt0aGlzLmRlY29kZVN0cmluZ3M9IW8sdGhpcy5kZWZhdWx0RW5jb2Rpbmc9dCYmdC5kZWZhdWx0RW5jb2Rpbmd8fFwidXRmOFwiLHRoaXMubGVuZ3RoPTAsdGhpcy53cml0aW5nPSExLHRoaXMuY29ya2VkPTAsdGhpcy5zeW5jPSEwLHRoaXMuYnVmZmVyUHJvY2Vzc2luZz0hMSx0aGlzLm9ud3JpdGU9UC5iaW5kKHZvaWQgMCxlKSx0aGlzLndyaXRlY2I9bnVsbCx0aGlzLndyaXRlbGVuPTAsdGhpcy5hZnRlcldyaXRlVGlja0luZm89bnVsbCxPKHRoaXMpLHRoaXMucGVuZGluZ2NiPTAsdGhpcy5jb25zdHJ1Y3RlZD0hMCx0aGlzLnByZWZpbmlzaGVkPSExLHRoaXMuZXJyb3JFbWl0dGVkPSExLHRoaXMuZW1pdENsb3NlPSF0fHwhMSE9PXQuZW1pdENsb3NlLHRoaXMuYXV0b0Rlc3Ryb3k9IXR8fCExIT09dC5hdXRvRGVzdHJveSx0aGlzLmVycm9yZWQ9bnVsbCx0aGlzLmNsb3NlZD0hMSx0aGlzLmNsb3NlRW1pdHRlZD0hMSx0aGlzW2tdPVtdfWZ1bmN0aW9uIE8odCl7dC5idWZmZXJlZD1bXSx0LmJ1ZmZlcmVkSW5kZXg9MCx0LmFsbEJ1ZmZlcnM9ITAsdC5hbGxOb29wPSEwfWZ1bmN0aW9uIFUodCl7Y29uc3QgZT10aGlzIGluc3RhbmNlb2YgbigxODIpO2lmKCFlJiYhYShVLHRoaXMpKXJldHVybiBuZXcgVSh0KTt0aGlzLl93cml0YWJsZVN0YXRlPW5ldyBMKHQsdGhpcyxlKSx0JiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC53cml0ZSYmKHRoaXMuX3dyaXRlPXQud3JpdGUpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQud3JpdGV2JiYodGhpcy5fd3JpdGV2PXQud3JpdGV2KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmRlc3Ryb3kmJih0aGlzLl9kZXN0cm95PXQuZGVzdHJveSksXCJmdW5jdGlvblwiPT10eXBlb2YgdC5maW5hbCYmKHRoaXMuX2ZpbmFsPXQuZmluYWwpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0JiYodGhpcy5fY29uc3RydWN0PXQuY29uc3RydWN0KSx0LnNpZ25hbCYmbSh0LnNpZ25hbCx0aGlzKSkscC5jYWxsKHRoaXMsdCkseS5jb25zdHJ1Y3QodGhpcywoKCk9Pntjb25zdCB0PXRoaXMuX3dyaXRhYmxlU3RhdGU7dC53cml0aW5nfHxGKHRoaXMsdCksSCh0aGlzLHQpfSkpfWZ1bmN0aW9uIGoodCxlLG4sbyl7Y29uc3QgaT10Ll93cml0YWJsZVN0YXRlO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pbz1uLG49aS5kZWZhdWx0RW5jb2Rpbmc7ZWxzZXtpZihuKXtpZihcImJ1ZmZlclwiIT09biYmIWcuaXNFbmNvZGluZyhuKSl0aHJvdyBuZXcgeChuKX1lbHNlIG49aS5kZWZhdWx0RW5jb2Rpbmc7XCJmdW5jdGlvblwiIT10eXBlb2YgbyYmKG89Qil9aWYobnVsbD09PWUpdGhyb3cgbmV3IFQ7aWYoIWkub2JqZWN0TW9kZSlpZihcInN0cmluZ1wiPT10eXBlb2YgZSkhMSE9PWkuZGVjb2RlU3RyaW5ncyYmKGU9Zy5mcm9tKGUsbiksbj1cImJ1ZmZlclwiKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBnKW49XCJidWZmZXJcIjtlbHNle2lmKCFwLl9pc1VpbnQ4QXJyYXkoZSkpdGhyb3cgbmV3IHcoXCJjaHVua1wiLFtcInN0cmluZ1wiLFwiQnVmZmVyXCIsXCJVaW50OEFycmF5XCJdLGUpO2U9cC5fdWludDhBcnJheVRvQnVmZmVyKGUpLG49XCJidWZmZXJcIn1sZXQgYTtyZXR1cm4gaS5lbmRpbmc/YT1uZXcgUjppLmRlc3Ryb3llZCYmKGE9bmV3IEEoXCJ3cml0ZVwiKSksYT8oci5uZXh0VGljayhvLGEpLEModCxhLCEwKSxhKTooaS5wZW5kaW5nY2IrKyxmdW5jdGlvbih0LGUsbixyLG8pe2NvbnN0IGk9ZS5vYmplY3RNb2RlPzE6bi5sZW5ndGg7ZS5sZW5ndGgrPWk7Y29uc3QgYT1lLmxlbmd0aDxlLmhpZ2hXYXRlck1hcms7YXx8KGUubmVlZERyYWluPSEwKTtlLndyaXRpbmd8fGUuY29ya2VkfHxlLmVycm9yZWR8fCFlLmNvbnN0cnVjdGVkPyhlLmJ1ZmZlcmVkLnB1c2goe2NodW5rOm4sZW5jb2Rpbmc6cixjYWxsYmFjazpvfSksZS5hbGxCdWZmZXJzJiZcImJ1ZmZlclwiIT09ciYmKGUuYWxsQnVmZmVycz0hMSksZS5hbGxOb29wJiZvIT09QiYmKGUuYWxsTm9vcD0hMSkpOihlLndyaXRlbGVuPWksZS53cml0ZWNiPW8sZS53cml0aW5nPSEwLGUuc3luYz0hMCx0Ll93cml0ZShuLHIsZS5vbndyaXRlKSxlLnN5bmM9ITEpO3JldHVybiBhJiYhZS5lcnJvcmVkJiYhZS5kZXN0cm95ZWR9KHQsaSxlLG4sbykpfWZ1bmN0aW9uIE4odCxlLG4scixvLGksYSl7ZS53cml0ZWxlbj1yLGUud3JpdGVjYj1hLGUud3JpdGluZz0hMCxlLnN5bmM9ITAsZS5kZXN0cm95ZWQ/ZS5vbndyaXRlKG5ldyBBKFwid3JpdGVcIikpOm4/dC5fd3JpdGV2KG8sZS5vbndyaXRlKTp0Ll93cml0ZShvLGksZS5vbndyaXRlKSxlLnN5bmM9ITF9ZnVuY3Rpb24gTSh0LGUsbixyKXstLWUucGVuZGluZ2NiLHIobiksRChlKSxDKHQsbil9ZnVuY3Rpb24gUCh0LGUpe2NvbnN0IG49dC5fd3JpdGFibGVTdGF0ZSxvPW4uc3luYyxpPW4ud3JpdGVjYjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBpPyhuLndyaXRpbmc9ITEsbi53cml0ZWNiPW51bGwsbi5sZW5ndGgtPW4ud3JpdGVsZW4sbi53cml0ZWxlbj0wLGU/KGUuc3RhY2ssbi5lcnJvcmVkfHwobi5lcnJvcmVkPWUpLHQuX3JlYWRhYmxlU3RhdGUmJiF0Ll9yZWFkYWJsZVN0YXRlLmVycm9yZWQmJih0Ll9yZWFkYWJsZVN0YXRlLmVycm9yZWQ9ZSksbz9yLm5leHRUaWNrKE0sdCxuLGUsaSk6TSh0LG4sZSxpKSk6KG4uYnVmZmVyZWQubGVuZ3RoPm4uYnVmZmVyZWRJbmRleCYmRih0LG4pLG8/bnVsbCE9PW4uYWZ0ZXJXcml0ZVRpY2tJbmZvJiZuLmFmdGVyV3JpdGVUaWNrSW5mby5jYj09PWk/bi5hZnRlcldyaXRlVGlja0luZm8uY291bnQrKzoobi5hZnRlcldyaXRlVGlja0luZm89e2NvdW50OjEsY2I6aSxzdHJlYW06dCxzdGF0ZTpufSxyLm5leHRUaWNrKFcsbi5hZnRlcldyaXRlVGlja0luZm8pKTokKHQsbiwxLGkpKSk6Qyh0LG5ldyBFKX1mdW5jdGlvbiBXKHtzdHJlYW06dCxzdGF0ZTplLGNvdW50Om4sY2I6cn0pe3JldHVybiBlLmFmdGVyV3JpdGVUaWNrSW5mbz1udWxsLCQodCxlLG4scil9ZnVuY3Rpb24gJCh0LGUsbixyKXtmb3IoIWUuZW5kaW5nJiYhdC5kZXN0cm95ZWQmJjA9PT1lLmxlbmd0aCYmZS5uZWVkRHJhaW4mJihlLm5lZWREcmFpbj0hMSx0LmVtaXQoXCJkcmFpblwiKSk7bi0tID4wOyllLnBlbmRpbmdjYi0tLHIoKTtlLmRlc3Ryb3llZCYmRChlKSxIKHQsZSl9ZnVuY3Rpb24gRCh0KXtpZih0LndyaXRpbmcpcmV0dXJuO2ZvcihsZXQgbj10LmJ1ZmZlcmVkSW5kZXg7bjx0LmJ1ZmZlcmVkLmxlbmd0aDsrK24pe3ZhciBlO2NvbnN0e2NodW5rOnIsY2FsbGJhY2s6b309dC5idWZmZXJlZFtuXSxpPXQub2JqZWN0TW9kZT8xOnIubGVuZ3RoO3QubGVuZ3RoLT1pLG8obnVsbCE9PShlPXQuZXJyb3JlZCkmJnZvaWQgMCE9PWU/ZTpuZXcgQShcIndyaXRlXCIpKX1jb25zdCBuPXRba10uc3BsaWNlKDApO2ZvcihsZXQgZT0wO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcjtuW2VdKG51bGwhPT0ocj10LmVycm9yZWQpJiZ2b2lkIDAhPT1yP3I6bmV3IEEoXCJlbmRcIikpfU8odCl9ZnVuY3Rpb24gRih0LGUpe2lmKGUuY29ya2VkfHxlLmJ1ZmZlclByb2Nlc3Npbmd8fGUuZGVzdHJveWVkfHwhZS5jb25zdHJ1Y3RlZClyZXR1cm47Y29uc3R7YnVmZmVyZWQ6bixidWZmZXJlZEluZGV4OnIsb2JqZWN0TW9kZTppfT1lLGE9bi5sZW5ndGgtcjtpZighYSlyZXR1cm47bGV0IHM9cjtpZihlLmJ1ZmZlclByb2Nlc3Npbmc9ITAsYT4xJiZ0Ll93cml0ZXYpe2UucGVuZGluZ2NiLT1hLTE7Y29uc3Qgcj1lLmFsbE5vb3A/Qjp0PT57Zm9yKGxldCBlPXM7ZTxuLmxlbmd0aDsrK2UpbltlXS5jYWxsYmFjayh0KX0saT1lLmFsbE5vb3AmJjA9PT1zP246byhuLHMpO2kuYWxsQnVmZmVycz1lLmFsbEJ1ZmZlcnMsTih0LGUsITAsZS5sZW5ndGgsaSxcIlwiLHIpLE8oZSl9ZWxzZXtkb3tjb25zdHtjaHVuazpyLGVuY29kaW5nOm8sY2FsbGJhY2s6YX09bltzXTtuW3MrK109bnVsbDtOKHQsZSwhMSxpPzE6ci5sZW5ndGgscixvLGEpfXdoaWxlKHM8bi5sZW5ndGgmJiFlLndyaXRpbmcpO3M9PT1uLmxlbmd0aD9PKGUpOnM+MjU2PyhuLnNwbGljZSgwLHMpLGUuYnVmZmVyZWRJbmRleD0wKTplLmJ1ZmZlcmVkSW5kZXg9c31lLmJ1ZmZlclByb2Nlc3Npbmc9ITF9ZnVuY3Rpb24geih0KXtyZXR1cm4gdC5lbmRpbmcmJiF0LmRlc3Ryb3llZCYmdC5jb25zdHJ1Y3RlZCYmMD09PXQubGVuZ3RoJiYhdC5lcnJvcmVkJiYwPT09dC5idWZmZXJlZC5sZW5ndGgmJiF0LmZpbmlzaGVkJiYhdC53cml0aW5nJiYhdC5lcnJvckVtaXR0ZWQmJiF0LmNsb3NlRW1pdHRlZH1mdW5jdGlvbiBxKHQsZSl7ZS5wcmVmaW5pc2hlZHx8ZS5maW5hbENhbGxlZHx8KFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuX2ZpbmFsfHxlLmRlc3Ryb3llZD8oZS5wcmVmaW5pc2hlZD0hMCx0LmVtaXQoXCJwcmVmaW5pc2hcIikpOihlLmZpbmFsQ2FsbGVkPSEwLGZ1bmN0aW9uKHQsZSl7bGV0IG49ITE7ZnVuY3Rpb24gbyhvKXtpZihuKUModCxudWxsIT1vP286RSgpKTtlbHNlIGlmKG49ITAsZS5wZW5kaW5nY2ItLSxvKXtjb25zdCBuPWVba10uc3BsaWNlKDApO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKW5bdF0obyk7Qyh0LG8sZS5zeW5jKX1lbHNlIHooZSkmJihlLnByZWZpbmlzaGVkPSEwLHQuZW1pdChcInByZWZpbmlzaFwiKSxlLnBlbmRpbmdjYisrLHIubmV4dFRpY2soVix0LGUpKX1lLnN5bmM9ITAsZS5wZW5kaW5nY2IrKzt0cnl7dC5fZmluYWwobyl9Y2F0Y2godCl7byh0KX1lLnN5bmM9ITF9KHQsZSkpKX1mdW5jdGlvbiBIKHQsZSxuKXt6KGUpJiYocSh0LGUpLDA9PT1lLnBlbmRpbmdjYiYmKG4/KGUucGVuZGluZ2NiKyssci5uZXh0VGljaygoKHQsZSk9Pnt6KGUpP1YodCxlKTplLnBlbmRpbmdjYi0tfSksdCxlKSk6eihlKSYmKGUucGVuZGluZ2NiKyssVih0LGUpKSkpfWZ1bmN0aW9uIFYodCxlKXtlLnBlbmRpbmdjYi0tLGUuZmluaXNoZWQ9ITA7Y29uc3Qgbj1lW2tdLnNwbGljZSgwKTtmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKyluW3RdKCk7aWYodC5lbWl0KFwiZmluaXNoXCIpLGUuYXV0b0Rlc3Ryb3kpe2NvbnN0IGU9dC5fcmVhZGFibGVTdGF0ZTsoIWV8fGUuYXV0b0Rlc3Ryb3kmJihlLmVuZEVtaXR0ZWR8fCExPT09ZS5yZWFkYWJsZSkpJiZ0LmRlc3Ryb3koKX19TC5wcm90b3R5cGUuZ2V0QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy5idWZmZXJlZCx0aGlzLmJ1ZmZlcmVkSW5kZXgpfSxzKEwucHJvdG90eXBlLFwiYnVmZmVyZWRSZXF1ZXN0Q291bnRcIix7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuIHRoaXMuYnVmZmVyZWQubGVuZ3RoLXRoaXMuYnVmZmVyZWRJbmRleH19KSxzKFUsZCx7X19wcm90b19fOm51bGwsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISFhKHRoaXMsdCl8fHRoaXM9PT1VJiYodCYmdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIEwpfX0pLFUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXtDKHRoaXMsbmV3IFMpfSxVLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuITA9PT1qKHRoaXMsdCxlLG4pfSxVLnByb3RvdHlwZS5jb3JrPWZ1bmN0aW9uKCl7dGhpcy5fd3JpdGFibGVTdGF0ZS5jb3JrZWQrK30sVS5wcm90b3R5cGUudW5jb3JrPWZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLl93cml0YWJsZVN0YXRlO3QuY29ya2VkJiYodC5jb3JrZWQtLSx0LndyaXRpbmd8fEYodGhpcyx0KSl9LFUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZz1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9Yyh0KSksIWcuaXNFbmNvZGluZyh0KSl0aHJvdyBuZXcgeCh0KTtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2Rpbmc9dCx0aGlzfSxVLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24odCxlLG4pe2lmKCF0aGlzLl93cml0ZXYpdGhyb3cgbmV3IF8oXCJfd3JpdGUoKVwiKTt0aGlzLl93cml0ZXYoW3tjaHVuazp0LGVuY29kaW5nOmV9XSxuKX0sVS5wcm90b3R5cGUuX3dyaXRldj1udWxsLFUucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0LGUsbil7Y29uc3Qgbz10aGlzLl93cml0YWJsZVN0YXRlO2xldCBhO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/KG49dCx0PW51bGwsZT1udWxsKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYobj1lLGU9bnVsbCksbnVsbCE9dCl7Y29uc3Qgbj1qKHRoaXMsdCxlKTtuIGluc3RhbmNlb2YgaSYmKGE9bil9cmV0dXJuIG8uY29ya2VkJiYoby5jb3JrZWQ9MSx0aGlzLnVuY29yaygpKSxhfHwoby5lcnJvcmVkfHxvLmVuZGluZz9vLmZpbmlzaGVkP2E9bmV3IEkoXCJlbmRcIik6by5kZXN0cm95ZWQmJihhPW5ldyBBKFwiZW5kXCIpKTooby5lbmRpbmc9ITAsSCh0aGlzLG8sITApLG8uZW5kZWQ9ITApKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoYXx8by5maW5pc2hlZD9yLm5leHRUaWNrKG4sYSk6b1trXS5wdXNoKG4pKSx0aGlzfSx1KFUucHJvdG90eXBlLHtjbG9zZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiEhdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5jbG9zZWR9fSxkZXN0cm95ZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiEhdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWR9LHNldCh0KXt0aGlzLl93cml0YWJsZVN0YXRlJiYodGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ9dCl9fSx3cml0YWJsZTp7X19wcm90b19fOm51bGwsZ2V0KCl7Y29uc3QgdD10aGlzLl93cml0YWJsZVN0YXRlO3JldHVybiEoIXR8fCExPT09dC53cml0YWJsZXx8dC5kZXN0cm95ZWR8fHQuZXJyb3JlZHx8dC5lbmRpbmd8fHQuZW5kZWQpfSxzZXQodCl7dGhpcy5fd3JpdGFibGVTdGF0ZSYmKHRoaXMuX3dyaXRhYmxlU3RhdGUud3JpdGFibGU9ISF0KX19LHdyaXRhYmxlRmluaXNoZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiEhdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZH19LHdyaXRhYmxlT2JqZWN0TW9kZTp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuISF0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLm9iamVjdE1vZGV9fSx3cml0YWJsZUJ1ZmZlcjp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCl9fSx3cml0YWJsZUVuZGVkOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4hIXRoaXMuX3dyaXRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nfX0sd3JpdGFibGVOZWVkRHJhaW46e19fcHJvdG9fXzpudWxsLGdldCgpe2NvbnN0IHQ9dGhpcy5fd3JpdGFibGVTdGF0ZTtyZXR1cm4hIXQmJighdC5kZXN0cm95ZWQmJiF0LmVuZGluZyYmdC5uZWVkRHJhaW4pfX0sd3JpdGFibGVIaWdoV2F0ZXJNYXJrOntfX3Byb3RvX186bnVsbCxnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrfX0sd3JpdGFibGVDb3JrZWQ6e19fcHJvdG9fXzpudWxsLGdldCgpe3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlP3RoaXMuX3dyaXRhYmxlU3RhdGUuY29ya2VkOjB9fSx3cml0YWJsZUxlbmd0aDp7X19wcm90b19fOm51bGwsZ2V0KCl7cmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUubGVuZ3RofX0sZXJyb3JlZDp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZT90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yZWQ6bnVsbH19LHdyaXRhYmxlQWJvcnRlZDp7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCExPT09dGhpcy5fd3JpdGFibGVTdGF0ZS53cml0YWJsZXx8IXRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkJiYhdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvcmVkfHx0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkKX19fSk7Y29uc3QgRz15LmRlc3Ryb3k7bGV0IEo7ZnVuY3Rpb24gWSgpe3JldHVybiB2b2lkIDA9PT1KJiYoSj17fSksSn1VLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj10aGlzLl93cml0YWJsZVN0YXRlO3JldHVybiFuLmRlc3Ryb3llZCYmKG4uYnVmZmVyZWRJbmRleDxuLmJ1ZmZlcmVkLmxlbmd0aHx8bltrXS5sZW5ndGgpJiZyLm5leHRUaWNrKEQsbiksRy5jYWxsKHRoaXMsdCxlKSx0aGlzfSxVLnByb3RvdHlwZS5fdW5kZXN0cm95PXkudW5kZXN0cm95LFUucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKHQsZSl7ZSh0KX0sVS5wcm90b3R5cGVbaC5jYXB0dXJlUmVqZWN0aW9uU3ltYm9sXT1mdW5jdGlvbih0KXt0aGlzLmRlc3Ryb3kodCl9LFUuZnJvbVdlYj1mdW5jdGlvbih0LGUpe3JldHVybiBZKCkubmV3U3RyZWFtV3JpdGFibGVGcm9tV3JpdGFibGVTdHJlYW0odCxlKX0sVS50b1dlYj1mdW5jdGlvbih0KXtyZXR1cm4gWSgpLm5ld1dyaXRhYmxlU3RyZWFtRnJvbVN0cmVhbVdyaXRhYmxlKHQpfX0sOTA0Oih0LGUsbik9Pntjb25zdHtBcnJheUlzQXJyYXk6cixBcnJheVByb3RvdHlwZUluY2x1ZGVzOm8sQXJyYXlQcm90b3R5cGVKb2luOmksQXJyYXlQcm90b3R5cGVNYXA6YSxOdW1iZXJJc0ludGVnZXI6cyxOdW1iZXJJc05hTjp1LE51bWJlck1BWF9TQUZFX0lOVEVHRVI6bCxOdW1iZXJNSU5fU0FGRV9JTlRFR0VSOmMsTnVtYmVyUGFyc2VJbnQ6ZixPYmplY3RQcm90b3R5cGVIYXNPd25Qcm9wZXJ0eTpkLFJlZ0V4cFByb3RvdHlwZUV4ZWM6aCxTdHJpbmc6cCxTdHJpbmdQcm90b3R5cGVUb1VwcGVyQ2FzZTpnLFN0cmluZ1Byb3RvdHlwZVRyaW06eX09bigxOTEpLHtoaWRlU3RhY2tGcmFtZXM6bSxjb2Rlczp7RVJSX1NPQ0tFVF9CQURfUE9SVDp2LEVSUl9JTlZBTElEX0FSR19UWVBFOmIsRVJSX0lOVkFMSURfQVJHX1ZBTFVFOncsRVJSX09VVF9PRl9SQU5HRTpfLEVSUl9VTktOT1dOX1NJR05BTDpFfX09bigxNDEpLHtub3JtYWxpemVFbmNvZGluZzpTfT1uKDc3NSkse2lzQXN5bmNGdW5jdGlvbjpBLGlzQXJyYXlCdWZmZXJWaWV3Okl9PW4oNzc1KS50eXBlcyxUPXt9O2NvbnN0IFI9L15bMC03XSskLztjb25zdCB4PW0oKCh0LGUsbj1jLHI9bCk9PntpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgYihlLFwibnVtYmVyXCIsdCk7aWYoIXModCkpdGhyb3cgbmV3IF8oZSxcImFuIGludGVnZXJcIix0KTtpZih0PG58fHQ+cil0aHJvdyBuZXcgXyhlLGA+PSAke259ICYmIDw9ICR7cn1gLHQpfSkpLEM9bSgoKHQsZSxuPS0yMTQ3NDgzNjQ4LHI9MjE0NzQ4MzY0Nyk9PntpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgYihlLFwibnVtYmVyXCIsdCk7aWYoIXModCkpdGhyb3cgbmV3IF8oZSxcImFuIGludGVnZXJcIix0KTtpZih0PG58fHQ+cil0aHJvdyBuZXcgXyhlLGA+PSAke259ICYmIDw9ICR7cn1gLHQpfSkpLEI9bSgoKHQsZSxuPSExKT0+e2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBiKGUsXCJudW1iZXJcIix0KTtpZighcyh0KSl0aHJvdyBuZXcgXyhlLFwiYW4gaW50ZWdlclwiLHQpO2NvbnN0IHI9bj8xOjAsbz00Mjk0OTY3Mjk1O2lmKHQ8cnx8dD5vKXRocm93IG5ldyBfKGUsYD49ICR7cn0gJiYgPD0gJHtvfWAsdCl9KSk7ZnVuY3Rpb24gayh0LGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXRocm93IG5ldyBiKGUsXCJzdHJpbmdcIix0KX1jb25zdCBMPW0oKCh0LGUsbik9PntpZighbyhuLHQpKXtjb25zdCByPWkoYShuLCh0PT5cInN0cmluZ1wiPT10eXBlb2YgdD9gJyR7dH0nYDpwKHQpKSksXCIsIFwiKTt0aHJvdyBuZXcgdyhlLHQsXCJtdXN0IGJlIG9uZSBvZjogXCIrcil9fSkpO2Z1bmN0aW9uIE8odCxlKXtpZihcImJvb2xlYW5cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcImJvb2xlYW5cIix0KX1mdW5jdGlvbiBVKHQsZSxuKXtyZXR1cm4gbnVsbCE9dCYmZCh0LGUpP3RbZV06bn1jb25zdCBqPW0oKCh0LGUsbj1udWxsKT0+e2NvbnN0IG89VShuLFwiYWxsb3dBcnJheVwiLCExKSxpPVUobixcImFsbG93RnVuY3Rpb25cIiwhMSk7aWYoIVUobixcIm51bGxhYmxlXCIsITEpJiZudWxsPT09dHx8IW8mJnIodCl8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiYoIWl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpKXRocm93IG5ldyBiKGUsXCJPYmplY3RcIix0KX0pKSxOPW0oKCh0LGUpPT57aWYobnVsbCE9dCYmXCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcImEgZGljdGlvbmFyeVwiLHQpfSkpLE09bSgoKHQsZSxuPTApPT57aWYoIXIodCkpdGhyb3cgbmV3IGIoZSxcIkFycmF5XCIsdCk7aWYodC5sZW5ndGg8bil7dGhyb3cgbmV3IHcoZSx0LGBtdXN0IGJlIGxvbmdlciB0aGFuICR7bn1gKX19KSk7Y29uc3QgUD1tKCgodCxlPVwiYnVmZmVyXCIpPT57aWYoIUkodCkpdGhyb3cgbmV3IGIoZSxbXCJCdWZmZXJcIixcIlR5cGVkQXJyYXlcIixcIkRhdGFWaWV3XCJdLHQpfSkpO2NvbnN0IFc9bSgoKHQsZSk9PntpZih2b2lkIDAhPT10JiYobnVsbD09PXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0fHwhKFwiYWJvcnRlZFwiaW4gdCkpKXRocm93IG5ldyBiKGUsXCJBYm9ydFNpZ25hbFwiLHQpfSkpLCQ9bSgoKHQsZSk9PntpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBiKGUsXCJGdW5jdGlvblwiLHQpfSkpLEQ9bSgoKHQsZSk9PntpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHxBKHQpKXRocm93IG5ldyBiKGUsXCJGdW5jdGlvblwiLHQpfSkpLEY9bSgoKHQsZSk9PntpZih2b2lkIDAhPT10KXRocm93IG5ldyBiKGUsXCJ1bmRlZmluZWRcIix0KX0pKTtjb25zdCB6PS9eKD86PFtePl0qPikoPzpcXHMqO1xccypbXjtcIlxcc10rKD86PShcIik/W147XCJcXHNdKlxcMSk/KSokLztmdW5jdGlvbiBxKHQsZSl7aWYodm9pZCAwPT09dHx8IWgoeix0KSl0aHJvdyBuZXcgdyhlLHQsJ211c3QgYmUgYW4gYXJyYXkgb3Igc3RyaW5nIG9mIGZvcm1hdCBcIjwvc3R5bGVzLmNzcz47IHJlbD1wcmVsb2FkOyBhcz1zdHlsZVwiJyl9dC5leHBvcnRzPXtpc0ludDMyOmZ1bmN0aW9uKHQpe3JldHVybiB0PT09KDB8dCl9LGlzVWludDMyOmZ1bmN0aW9uKHQpe3JldHVybiB0PT09dD4+PjB9LHBhcnNlRmlsZU1vZGU6ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PXQmJih0PW4pLFwic3RyaW5nXCI9PXR5cGVvZiB0KXtpZihudWxsPT09aChSLHQpKXRocm93IG5ldyB3KGUsdCxcIm11c3QgYmUgYSAzMi1iaXQgdW5zaWduZWQgaW50ZWdlciBvciBhbiBvY3RhbCBzdHJpbmdcIik7dD1mKHQsOCl9cmV0dXJuIEIodCxlKSx0fSx2YWxpZGF0ZUFycmF5Ok0sdmFsaWRhdGVTdHJpbmdBcnJheTpmdW5jdGlvbih0LGUpe00odCxlKTtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKylrKHRbbl0sYCR7ZX1bJHtufV1gKX0sdmFsaWRhdGVCb29sZWFuQXJyYXk6ZnVuY3Rpb24odCxlKXtNKHQsZSk7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspTyh0W25dLGAke2V9WyR7bn1dYCl9LHZhbGlkYXRlQm9vbGVhbjpPLHZhbGlkYXRlQnVmZmVyOlAsdmFsaWRhdGVEaWN0aW9uYXJ5Ok4sdmFsaWRhdGVFbmNvZGluZzpmdW5jdGlvbih0LGUpe2NvbnN0IG49UyhlKSxyPXQubGVuZ3RoO2lmKFwiaGV4XCI9PT1uJiZyJTIhPTApdGhyb3cgbmV3IHcoXCJlbmNvZGluZ1wiLGUsYGlzIGludmFsaWQgZm9yIGRhdGEgb2YgbGVuZ3RoICR7cn1gKX0sdmFsaWRhdGVGdW5jdGlvbjokLHZhbGlkYXRlSW50MzI6Qyx2YWxpZGF0ZUludGVnZXI6eCx2YWxpZGF0ZU51bWJlcjpmdW5jdGlvbih0LGUsbj12b2lkIDAscil7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IGIoZSxcIm51bWJlclwiLHQpO2lmKG51bGwhPW4mJnQ8bnx8bnVsbCE9ciYmdD5yfHwobnVsbCE9bnx8bnVsbCE9cikmJnUodCkpdGhyb3cgbmV3IF8oZSxgJHtudWxsIT1uP2A+PSAke259YDpcIlwifSR7bnVsbCE9biYmbnVsbCE9cj9cIiAmJiBcIjpcIlwifSR7bnVsbCE9cj9gPD0gJHtyfWA6XCJcIn1gLHQpfSx2YWxpZGF0ZU9iamVjdDpqLHZhbGlkYXRlT25lT2Y6TCx2YWxpZGF0ZVBsYWluRnVuY3Rpb246RCx2YWxpZGF0ZVBvcnQ6ZnVuY3Rpb24odCxlPVwiUG9ydFwiLG49ITApe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0JiZcInN0cmluZ1wiIT10eXBlb2YgdHx8XCJzdHJpbmdcIj09dHlwZW9mIHQmJjA9PT15KHQpLmxlbmd0aHx8K3QhPSt0Pj4+MHx8dD42NTUzNXx8MD09PXQmJiFuKXRocm93IG5ldyB2KGUsdCxuKTtyZXR1cm4gMHx0fSx2YWxpZGF0ZVNpZ25hbE5hbWU6ZnVuY3Rpb24odCxlPVwic2lnbmFsXCIpe2lmKGsodCxlKSx2b2lkIDA9PT1UW3RdKXtpZih2b2lkIDAhPT1UW2codCldKXRocm93IG5ldyBFKHQrXCIgKHNpZ25hbHMgbXVzdCB1c2UgYWxsIGNhcGl0YWwgbGV0dGVycylcIik7dGhyb3cgbmV3IEUodCl9fSx2YWxpZGF0ZVN0cmluZzprLHZhbGlkYXRlVWludDMyOkIsdmFsaWRhdGVVbmRlZmluZWQ6Rix2YWxpZGF0ZVVuaW9uOmZ1bmN0aW9uKHQsZSxuKXtpZighbyhuLHQpKXRocm93IG5ldyBiKGUsYCgnJHtpKG4sXCJ8XCIpfScpYCx0KX0sdmFsaWRhdGVBYm9ydFNpZ25hbDpXLHZhbGlkYXRlTGlua0hlYWRlclZhbHVlOmZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBxKHQsXCJoaW50c1wiKSx0O2lmKHIodCkpe2NvbnN0IGU9dC5sZW5ndGg7bGV0IG49XCJcIjtpZigwPT09ZSlyZXR1cm4gbjtmb3IobGV0IHI9MDtyPGU7cisrKXtjb25zdCBvPXRbcl07cShvLFwiaGludHNcIiksbis9byxyIT09ZS0xJiYobis9XCIsIFwiKX1yZXR1cm4gbn10aHJvdyBuZXcgdyhcImhpbnRzXCIsdCwnbXVzdCBiZSBhbiBhcnJheSBvciBzdHJpbmcgb2YgZm9ybWF0IFwiPC9zdHlsZXMuY3NzPjsgcmVsPXByZWxvYWQ7IGFzPXN0eWxlXCInKX19fSw5OToodCxlLG4pPT57Y29uc3Qgcj1uKDI5Miksbz1uKDc2MCksaT1yLlJlYWRhYmxlLmRlc3Ryb3k7dC5leHBvcnRzPXIuUmVhZGFibGUsdC5leHBvcnRzLl91aW50OEFycmF5VG9CdWZmZXI9ci5fdWludDhBcnJheVRvQnVmZmVyLHQuZXhwb3J0cy5faXNVaW50OEFycmF5PXIuX2lzVWludDhBcnJheSx0LmV4cG9ydHMuaXNEaXN0dXJiZWQ9ci5pc0Rpc3R1cmJlZCx0LmV4cG9ydHMuaXNFcnJvcmVkPXIuaXNFcnJvcmVkLHQuZXhwb3J0cy5pc1JlYWRhYmxlPXIuaXNSZWFkYWJsZSx0LmV4cG9ydHMuUmVhZGFibGU9ci5SZWFkYWJsZSx0LmV4cG9ydHMuV3JpdGFibGU9ci5Xcml0YWJsZSx0LmV4cG9ydHMuRHVwbGV4PXIuRHVwbGV4LHQuZXhwb3J0cy5UcmFuc2Zvcm09ci5UcmFuc2Zvcm0sdC5leHBvcnRzLlBhc3NUaHJvdWdoPXIuUGFzc1Rocm91Z2gsdC5leHBvcnRzLmFkZEFib3J0U2lnbmFsPXIuYWRkQWJvcnRTaWduYWwsdC5leHBvcnRzLmZpbmlzaGVkPXIuZmluaXNoZWQsdC5leHBvcnRzLmRlc3Ryb3k9ci5kZXN0cm95LHQuZXhwb3J0cy5kZXN0cm95PWksdC5leHBvcnRzLnBpcGVsaW5lPXIucGlwZWxpbmUsdC5leHBvcnRzLmNvbXBvc2U9ci5jb21wb3NlLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwicHJvbWlzZXNcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OigpPT5vfSksdC5leHBvcnRzLlN0cmVhbT1yLlN0cmVhbSx0LmV4cG9ydHMuZGVmYXVsdD10LmV4cG9ydHN9LDE0MToodCxlLG4pPT57Y29uc3R7Zm9ybWF0OnIsaW5zcGVjdDpvLEFnZ3JlZ2F0ZUVycm9yOml9PW4oNzc1KSxhPWdsb2JhbFRoaXMuQWdncmVnYXRlRXJyb3J8fGkscz1TeW1ib2woXCJrSXNOb2RlRXJyb3JcIiksdT1bXCJzdHJpbmdcIixcImZ1bmN0aW9uXCIsXCJudW1iZXJcIixcIm9iamVjdFwiLFwiRnVuY3Rpb25cIixcIk9iamVjdFwiLFwiYm9vbGVhblwiLFwiYmlnaW50XCIsXCJzeW1ib2xcIl0sbD0vXihbQS1aXVthLXowLTldKikrJC8sYz17fTtmdW5jdGlvbiBmKHQsZSl7aWYoIXQpdGhyb3cgbmV3IGMuRVJSX0lOVEVSTkFMX0FTU0VSVElPTihlKX1mdW5jdGlvbiBkKHQpe2xldCBlPVwiXCIsbj10Lmxlbmd0aDtjb25zdCByPVwiLVwiPT09dFswXT8xOjA7Zm9yKDtuPj1yKzQ7bi09MyllPWBfJHt0LnNsaWNlKG4tMyxuKX0ke2V9YDtyZXR1cm5gJHt0LnNsaWNlKDAsbil9JHtlfWB9ZnVuY3Rpb24gaCh0LGUsbil7bnx8KG49RXJyb3IpO2NsYXNzIE5vZGVFcnJvciBleHRlbmRzIG57Y29uc3RydWN0b3IoLi4ubil7c3VwZXIoZnVuY3Rpb24odCxlLG4pe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIGYoZS5sZW5ndGg8PW4ubGVuZ3RoLGBDb2RlOiAke3R9OyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzIGxlbmd0aCAoJHtuLmxlbmd0aH0pIGRvZXMgbm90IG1hdGNoIHRoZSByZXF1aXJlZCBvbmVzICgke2UubGVuZ3RofSkuYCksZSguLi5uKTtjb25zdCBvPShlLm1hdGNoKC8lW2RmaWpvT3NdL2cpfHxbXSkubGVuZ3RoO3JldHVybiBmKG89PT1uLmxlbmd0aCxgQ29kZTogJHt0fTsgVGhlIHByb3ZpZGVkIGFyZ3VtZW50cyBsZW5ndGggKCR7bi5sZW5ndGh9KSBkb2VzIG5vdCBtYXRjaCB0aGUgcmVxdWlyZWQgb25lcyAoJHtvfSkuYCksMD09PW4ubGVuZ3RoP2U6cihlLC4uLm4pfSh0LGUsbikpfXRvU3RyaW5nKCl7cmV0dXJuYCR7dGhpcy5uYW1lfSBbJHt0fV06ICR7dGhpcy5tZXNzYWdlfWB9fU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE5vZGVFcnJvci5wcm90b3R5cGUse25hbWU6e3ZhbHVlOm4ubmFtZSx3cml0YWJsZTohMCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0sdG9TdHJpbmc6e3ZhbHVlKCl7cmV0dXJuYCR7dGhpcy5uYW1lfSBbJHt0fV06ICR7dGhpcy5tZXNzYWdlfWB9LHdyaXRhYmxlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfX0pLE5vZGVFcnJvci5wcm90b3R5cGUuY29kZT10LE5vZGVFcnJvci5wcm90b3R5cGVbc109ITAsY1t0XT1Ob2RlRXJyb3J9ZnVuY3Rpb24gcCh0KXtjb25zdCBlPVwiX19ub2RlX2ludGVybmFsX1wiK3QubmFtZTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJuYW1lXCIse3ZhbHVlOmV9KSx0fWNsYXNzIEFib3J0RXJyb3IgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0PVwiVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZFwiLGU9dm9pZCAwKXtpZih2b2lkIDAhPT1lJiZcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBuZXcgYy5FUlJfSU5WQUxJRF9BUkdfVFlQRShcIm9wdGlvbnNcIixcIk9iamVjdFwiLGUpO3N1cGVyKHQsZSksdGhpcy5jb2RlPVwiQUJPUlRfRVJSXCIsdGhpcy5uYW1lPVwiQWJvcnRFcnJvclwifX1oKFwiRVJSX0FTU0VSVElPTlwiLFwiJXNcIixFcnJvciksaChcIkVSUl9JTlZBTElEX0FSR19UWVBFXCIsKCh0LGUsbik9PntmKFwic3RyaW5nXCI9PXR5cGVvZiB0LFwiJ25hbWUnIG11c3QgYmUgYSBzdHJpbmdcIiksQXJyYXkuaXNBcnJheShlKXx8KGU9W2VdKTtsZXQgcj1cIlRoZSBcIjt0LmVuZHNXaXRoKFwiIGFyZ3VtZW50XCIpP3IrPWAke3R9IGA6cis9YFwiJHt0fVwiICR7dC5pbmNsdWRlcyhcIi5cIik/XCJwcm9wZXJ0eVwiOlwiYXJndW1lbnRcIn0gYCxyKz1cIm11c3QgYmUgXCI7Y29uc3QgaT1bXSxhPVtdLHM9W107Zm9yKGNvbnN0IHQgb2YgZSlmKFwic3RyaW5nXCI9PXR5cGVvZiB0LFwiQWxsIGV4cGVjdGVkIGVudHJpZXMgaGF2ZSB0byBiZSBvZiB0eXBlIHN0cmluZ1wiKSx1LmluY2x1ZGVzKHQpP2kucHVzaCh0LnRvTG93ZXJDYXNlKCkpOmwudGVzdCh0KT9hLnB1c2godCk6KGYoXCJvYmplY3RcIiE9PXQsJ1RoZSB2YWx1ZSBcIm9iamVjdFwiIHNob3VsZCBiZSB3cml0dGVuIGFzIFwiT2JqZWN0XCInKSxzLnB1c2godCkpO2lmKGEubGVuZ3RoPjApe2NvbnN0IHQ9aS5pbmRleE9mKFwib2JqZWN0XCIpOy0xIT09dCYmKGkuc3BsaWNlKGksdCwxKSxhLnB1c2goXCJPYmplY3RcIikpfWlmKGkubGVuZ3RoPjApe3N3aXRjaChpLmxlbmd0aCl7Y2FzZSAxOnIrPWBvZiB0eXBlICR7aVswXX1gO2JyZWFrO2Nhc2UgMjpyKz1gb25lIG9mIHR5cGUgJHtpWzBdfSBvciAke2lbMV19YDticmVhaztkZWZhdWx0Ontjb25zdCB0PWkucG9wKCk7cis9YG9uZSBvZiB0eXBlICR7aS5qb2luKFwiLCBcIil9LCBvciAke3R9YH19KGEubGVuZ3RoPjB8fHMubGVuZ3RoPjApJiYocis9XCIgb3IgXCIpfWlmKGEubGVuZ3RoPjApe3N3aXRjaChhLmxlbmd0aCl7Y2FzZSAxOnIrPWBhbiBpbnN0YW5jZSBvZiAke2FbMF19YDticmVhaztjYXNlIDI6cis9YGFuIGluc3RhbmNlIG9mICR7YVswXX0gb3IgJHthWzFdfWA7YnJlYWs7ZGVmYXVsdDp7Y29uc3QgdD1hLnBvcCgpO3IrPWBhbiBpbnN0YW5jZSBvZiAke2Euam9pbihcIiwgXCIpfSwgb3IgJHt0fWB9fXMubGVuZ3RoPjAmJihyKz1cIiBvciBcIil9c3dpdGNoKHMubGVuZ3RoKXtjYXNlIDA6YnJlYWs7Y2FzZSAxOnNbMF0udG9Mb3dlckNhc2UoKSE9PXNbMF0mJihyKz1cImFuIFwiKSxyKz1gJHtzWzBdfWA7YnJlYWs7Y2FzZSAyOnIrPWBvbmUgb2YgJHtzWzBdfSBvciAke3NbMV19YDticmVhaztkZWZhdWx0Ontjb25zdCB0PXMucG9wKCk7cis9YG9uZSBvZiAke3Muam9pbihcIiwgXCIpfSwgb3IgJHt0fWB9fWlmKG51bGw9PW4pcis9YC4gUmVjZWl2ZWQgJHtufWA7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLm5hbWUpcis9YC4gUmVjZWl2ZWQgZnVuY3Rpb24gJHtuLm5hbWV9YDtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBuKXt2YXIgYztpZihudWxsIT09KGM9bi5jb25zdHJ1Y3RvcikmJnZvaWQgMCE9PWMmJmMubmFtZSlyKz1gLiBSZWNlaXZlZCBhbiBpbnN0YW5jZSBvZiAke24uY29uc3RydWN0b3IubmFtZX1gO2Vsc2V7cis9YC4gUmVjZWl2ZWQgJHtvKG4se2RlcHRoOi0xfSl9YH19ZWxzZXtsZXQgdD1vKG4se2NvbG9yczohMX0pO3QubGVuZ3RoPjI1JiYodD1gJHt0LnNsaWNlKDAsMjUpfS4uLmApLHIrPWAuIFJlY2VpdmVkIHR5cGUgJHt0eXBlb2Ygbn0gKCR7dH0pYH1yZXR1cm4gcn0pLFR5cGVFcnJvciksaChcIkVSUl9JTlZBTElEX0FSR19WQUxVRVwiLCgodCxlLG49XCJpcyBpbnZhbGlkXCIpPT57bGV0IHI9byhlKTtyLmxlbmd0aD4xMjgmJihyPXIuc2xpY2UoMCwxMjgpK1wiLi4uXCIpO3JldHVybmBUaGUgJHt0LmluY2x1ZGVzKFwiLlwiKT9cInByb3BlcnR5XCI6XCJhcmd1bWVudFwifSAnJHt0fScgJHtufS4gUmVjZWl2ZWQgJHtyfWB9KSxUeXBlRXJyb3IpLGgoXCJFUlJfSU5WQUxJRF9SRVRVUk5fVkFMVUVcIiwoKHQsZSxuKT0+e3ZhciByO3JldHVybmBFeHBlY3RlZCAke3R9IHRvIGJlIHJldHVybmVkIGZyb20gdGhlIFwiJHtlfVwiIGZ1bmN0aW9uIGJ1dCBnb3QgJHtudWxsIT1uJiZudWxsIT09KHI9bi5jb25zdHJ1Y3RvcikmJnZvaWQgMCE9PXImJnIubmFtZT9gaW5zdGFuY2Ugb2YgJHtuLmNvbnN0cnVjdG9yLm5hbWV9YDpcInR5cGUgXCIrdHlwZW9mIG59LmB9KSxUeXBlRXJyb3IpLGgoXCJFUlJfTUlTU0lOR19BUkdTXCIsKCguLi50KT0+e2xldCBlO2YodC5sZW5ndGg+MCxcIkF0IGxlYXN0IG9uZSBhcmcgbmVlZHMgdG8gYmUgc3BlY2lmaWVkXCIpO2NvbnN0IG49dC5sZW5ndGg7c3dpdGNoKHQ9KEFycmF5LmlzQXJyYXkodCk/dDpbdF0pLm1hcCgodD0+YFwiJHt0fVwiYCkpLmpvaW4oXCIgb3IgXCIpLG4pe2Nhc2UgMTplKz1gVGhlICR7dFswXX0gYXJndW1lbnRgO2JyZWFrO2Nhc2UgMjplKz1gVGhlICR7dFswXX0gYW5kICR7dFsxXX0gYXJndW1lbnRzYDticmVhaztkZWZhdWx0Ontjb25zdCBuPXQucG9wKCk7ZSs9YFRoZSAke3Quam9pbihcIiwgXCIpfSwgYW5kICR7bn0gYXJndW1lbnRzYH19cmV0dXJuYCR7ZX0gbXVzdCBiZSBzcGVjaWZpZWRgfSksVHlwZUVycm9yKSxoKFwiRVJSX09VVF9PRl9SQU5HRVwiLCgodCxlLG4pPT57bGV0IHI7cmV0dXJuIGYoZSwnTWlzc2luZyBcInJhbmdlXCIgYXJndW1lbnQnKSxOdW1iZXIuaXNJbnRlZ2VyKG4pJiZNYXRoLmFicyhuKT4yKiozMj9yPWQoU3RyaW5nKG4pKTpcImJpZ2ludFwiPT10eXBlb2Ygbj8ocj1TdHJpbmcobiksKG4+Mm4qKjMybnx8bjwtKDJuKiozMm4pKSYmKHI9ZChyKSkscis9XCJuXCIpOnI9byhuKSxgVGhlIHZhbHVlIG9mIFwiJHt0fVwiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSAke2V9LiBSZWNlaXZlZCAke3J9YH0pLFJhbmdlRXJyb3IpLGgoXCJFUlJfTVVMVElQTEVfQ0FMTEJBQ0tcIixcIkNhbGxiYWNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1wiLEVycm9yKSxoKFwiRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URURcIixcIlRoZSAlcyBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkXCIsRXJyb3IpLGgoXCJFUlJfU1RSRUFNX0FMUkVBRFlfRklOSVNIRURcIixcIkNhbm5vdCBjYWxsICVzIGFmdGVyIGEgc3RyZWFtIHdhcyBmaW5pc2hlZFwiLEVycm9yKSxoKFwiRVJSX1NUUkVBTV9DQU5OT1RfUElQRVwiLFwiQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZVwiLEVycm9yKSxoKFwiRVJSX1NUUkVBTV9ERVNUUk9ZRURcIixcIkNhbm5vdCBjYWxsICVzIGFmdGVyIGEgc3RyZWFtIHdhcyBkZXN0cm95ZWRcIixFcnJvciksaChcIkVSUl9TVFJFQU1fTlVMTF9WQUxVRVNcIixcIk1heSBub3Qgd3JpdGUgbnVsbCB2YWx1ZXMgdG8gc3RyZWFtXCIsVHlwZUVycm9yKSxoKFwiRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0VcIixcIlByZW1hdHVyZSBjbG9zZVwiLEVycm9yKSxoKFwiRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRlwiLFwic3RyZWFtLnB1c2goKSBhZnRlciBFT0ZcIixFcnJvciksaChcIkVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlRcIixcInN0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50XCIsRXJyb3IpLGgoXCJFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORFwiLFwid3JpdGUgYWZ0ZXIgZW5kXCIsRXJyb3IpLGgoXCJFUlJfVU5LTk9XTl9FTkNPRElOR1wiLFwiVW5rbm93biBlbmNvZGluZzogJXNcIixUeXBlRXJyb3IpLHQuZXhwb3J0cz17QWJvcnRFcnJvcixhZ2dyZWdhdGVUd29FcnJvcnM6cCgoZnVuY3Rpb24odCxlKXtpZih0JiZlJiZ0IT09ZSl7aWYoQXJyYXkuaXNBcnJheShlLmVycm9ycykpcmV0dXJuIGUuZXJyb3JzLnB1c2godCksZTtjb25zdCBuPW5ldyBhKFtlLHRdLGUubWVzc2FnZSk7cmV0dXJuIG4uY29kZT1lLmNvZGUsbn1yZXR1cm4gdHx8ZX0pKSxoaWRlU3RhY2tGcmFtZXM6cCxjb2RlczpjfX0sMTkxOnQ9Pnt0LmV4cG9ydHM9e0FycmF5SXNBcnJheTp0PT5BcnJheS5pc0FycmF5KHQpLEFycmF5UHJvdG90eXBlSW5jbHVkZXM6KHQsZSk9PnQuaW5jbHVkZXMoZSksQXJyYXlQcm90b3R5cGVJbmRleE9mOih0LGUpPT50LmluZGV4T2YoZSksQXJyYXlQcm90b3R5cGVKb2luOih0LGUpPT50LmpvaW4oZSksQXJyYXlQcm90b3R5cGVNYXA6KHQsZSk9PnQubWFwKGUpLEFycmF5UHJvdG90eXBlUG9wOih0LGUpPT50LnBvcChlKSxBcnJheVByb3RvdHlwZVB1c2g6KHQsZSk9PnQucHVzaChlKSxBcnJheVByb3RvdHlwZVNsaWNlOih0LGUsbik9PnQuc2xpY2UoZSxuKSxFcnJvcixGdW5jdGlvblByb3RvdHlwZUNhbGw6KHQsZSwuLi5uKT0+dC5jYWxsKGUsLi4ubiksRnVuY3Rpb25Qcm90b3R5cGVTeW1ib2xIYXNJbnN0YW5jZToodCxlKT0+RnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0uY2FsbCh0LGUpLE1hdGhGbG9vcjpNYXRoLmZsb29yLE51bWJlcixOdW1iZXJJc0ludGVnZXI6TnVtYmVyLmlzSW50ZWdlcixOdW1iZXJJc05hTjpOdW1iZXIuaXNOYU4sTnVtYmVyTUFYX1NBRkVfSU5URUdFUjpOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixOdW1iZXJNSU5fU0FGRV9JTlRFR0VSOk51bWJlci5NSU5fU0FGRV9JTlRFR0VSLE51bWJlclBhcnNlSW50Ok51bWJlci5wYXJzZUludCxPYmplY3REZWZpbmVQcm9wZXJ0aWVzOih0LGUpPT5PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LGUpLE9iamVjdERlZmluZVByb3BlcnR5Oih0LGUsbik9Pk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsbiksT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOih0LGUpPT5PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSksT2JqZWN0S2V5czp0PT5PYmplY3Qua2V5cyh0KSxPYmplY3RTZXRQcm90b3R5cGVPZjoodCxlKT0+T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSksUHJvbWlzZSxQcm9taXNlUHJvdG90eXBlQ2F0Y2g6KHQsZSk9PnQuY2F0Y2goZSksUHJvbWlzZVByb3RvdHlwZVRoZW46KHQsZSxuKT0+dC50aGVuKGUsbiksUHJvbWlzZVJlamVjdDp0PT5Qcm9taXNlLnJlamVjdCh0KSxSZWZsZWN0QXBwbHk6UmVmbGVjdC5hcHBseSxSZWdFeHBQcm90b3R5cGVUZXN0Oih0LGUpPT50LnRlc3QoZSksU2FmZVNldDpTZXQsU3RyaW5nLFN0cmluZ1Byb3RvdHlwZVNsaWNlOih0LGUsbik9PnQuc2xpY2UoZSxuKSxTdHJpbmdQcm90b3R5cGVUb0xvd2VyQ2FzZTp0PT50LnRvTG93ZXJDYXNlKCksU3RyaW5nUHJvdG90eXBlVG9VcHBlckNhc2U6dD0+dC50b1VwcGVyQ2FzZSgpLFN0cmluZ1Byb3RvdHlwZVRyaW06dD0+dC50cmltKCksU3ltYm9sLFN5bWJvbEZvcjpTeW1ib2wuZm9yLFN5bWJvbEFzeW5jSXRlcmF0b3I6U3ltYm9sLmFzeW5jSXRlcmF0b3IsU3ltYm9sSGFzSW5zdGFuY2U6U3ltYm9sLmhhc0luc3RhbmNlLFN5bWJvbEl0ZXJhdG9yOlN5bWJvbC5pdGVyYXRvcixUeXBlZEFycmF5UHJvdG90eXBlU2V0Oih0LGUsbik9PnQuc2V0KGUsbiksVWludDhBcnJheX19LDc3NToodCxlLG4pPT57Y29uc3Qgcj1uKDQ4NSksbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoKGFzeW5jIGZ1bmN0aW9uKCl7fSkpLmNvbnN0cnVjdG9yLGk9Z2xvYmFsVGhpcy5CbG9ifHxyLkJsb2IsYT12b2lkIDAhPT1pP2Z1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgaX06ZnVuY3Rpb24odCl7cmV0dXJuITF9O2NsYXNzIEFnZ3JlZ2F0ZUVycm9yIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IodCl7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGlucHV0IHRvIGJlIGFuIEFycmF5LCBnb3QgXCIrdHlwZW9mIHQpO2xldCBlPVwiXCI7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspZSs9YCAgICAke3Rbbl0uc3RhY2t9XFxuYDtzdXBlcihlKSx0aGlzLm5hbWU9XCJBZ2dyZWdhdGVFcnJvclwiLHRoaXMuZXJyb3JzPXR9fXQuZXhwb3J0cz17QWdncmVnYXRlRXJyb3Isa0VtcHR5T2JqZWN0Ok9iamVjdC5mcmVlemUoe30pLG9uY2UodCl7bGV0IGU9ITE7cmV0dXJuIGZ1bmN0aW9uKC4uLm4pe2V8fChlPSEwLHQuYXBwbHkodGhpcyxuKSl9fSxjcmVhdGVEZWZlcnJlZFByb21pc2U6ZnVuY3Rpb24oKXtsZXQgdCxlO3JldHVybntwcm9taXNlOm5ldyBQcm9taXNlKCgobixyKT0+e3Q9bixlPXJ9KSkscmVzb2x2ZTp0LHJlamVjdDplfX0scHJvbWlzaWZ5OnQ9Pm5ldyBQcm9taXNlKCgoZSxuKT0+e3QoKCh0LC4uLnIpPT50P24odCk6ZSguLi5yKSkpfSkpLGRlYnVnbG9nOigpPT5mdW5jdGlvbigpe30sZm9ybWF0Oih0LC4uLmUpPT50LnJlcGxhY2UoLyUoW3NkaWZqXSkvZywoZnVuY3Rpb24oLi4uW3Qsbl0pe2NvbnN0IHI9ZS5zaGlmdCgpO2lmKFwiZlwiPT09bilyZXR1cm4gci50b0ZpeGVkKDYpO2lmKFwialwiPT09bilyZXR1cm4gSlNPTi5zdHJpbmdpZnkocik7aWYoXCJzXCI9PT1uJiZcIm9iamVjdFwiPT10eXBlb2Ygcil7cmV0dXJuYCR7ci5jb25zdHJ1Y3RvciE9PU9iamVjdD9yLmNvbnN0cnVjdG9yLm5hbWU6XCJcIn0ge31gLnRyaW0oKX1yZXR1cm4gci50b1N0cmluZygpfSkpLGluc3BlY3QodCl7c3dpdGNoKHR5cGVvZiB0KXtjYXNlXCJzdHJpbmdcIjppZih0LmluY2x1ZGVzKFwiJ1wiKSl7aWYoIXQuaW5jbHVkZXMoJ1wiJykpcmV0dXJuYFwiJHt0fVwiYDtpZighdC5pbmNsdWRlcyhcImBcIikmJiF0LmluY2x1ZGVzKFwiJHtcIikpcmV0dXJuYFxcYCR7dH1cXGBgfXJldHVybmAnJHt0fSdgO2Nhc2VcIm51bWJlclwiOnJldHVybiBpc05hTih0KT9cIk5hTlwiOk9iamVjdC5pcyh0LC0wKT9TdHJpbmcodCk6dDtjYXNlXCJiaWdpbnRcIjpyZXR1cm5gJHtTdHJpbmcodCl9bmA7Y2FzZVwiYm9vbGVhblwiOmNhc2VcInVuZGVmaW5lZFwiOnJldHVybiBTdHJpbmcodCk7Y2FzZVwib2JqZWN0XCI6cmV0dXJuXCJ7fVwifX0sdHlwZXM6e2lzQXN5bmNGdW5jdGlvbjp0PT50IGluc3RhbmNlb2Ygbyxpc0FycmF5QnVmZmVyVmlldzp0PT5BcnJheUJ1ZmZlci5pc1ZpZXcodCl9LGlzQmxvYjphfSx0LmV4cG9ydHMucHJvbWlzaWZ5LmN1c3RvbT1TeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwucHJvbWlzaWZ5LmN1c3RvbVwiKX0sMjkyOih0LGUsbik9Pntjb25zdHtCdWZmZXI6cn09big0ODUpLHtPYmplY3REZWZpbmVQcm9wZXJ0eTpvLE9iamVjdEtleXM6aSxSZWZsZWN0QXBwbHk6YX09bigxOTEpLHtwcm9taXNpZnk6e2N1c3RvbTpzfX09big3NzUpLHtzdHJlYW1SZXR1cm5pbmdPcGVyYXRvcnM6dSxwcm9taXNlUmV0dXJuaW5nT3BlcmF0b3JzOmx9PW4oNTU0KSx7Y29kZXM6e0VSUl9JTExFR0FMX0NPTlNUUlVDVE9SOmN9fT1uKDE0MSksZj1uKDgxOCkse3BpcGVsaW5lOmR9PW4oNzU0KSx7ZGVzdHJveWVyOmh9PW4oMjMwKSxwPW4oODYpLGc9big3NjApLHk9bigxMzIpLG09dC5leHBvcnRzPW4oMjAwKS5TdHJlYW07bS5pc0Rpc3R1cmJlZD15LmlzRGlzdHVyYmVkLG0uaXNFcnJvcmVkPXkuaXNFcnJvcmVkLG0uaXNSZWFkYWJsZT15LmlzUmVhZGFibGUsbS5SZWFkYWJsZT1uKDg1OCk7Zm9yKGNvbnN0IHcgb2YgaSh1KSl7Y29uc3QgXz11W3ddO2Z1bmN0aW9uIHYoLi4udCl7aWYobmV3LnRhcmdldCl0aHJvdyBjKCk7cmV0dXJuIG0uUmVhZGFibGUuZnJvbShhKF8sdGhpcyx0KSl9byh2LFwibmFtZVwiLHtfX3Byb3RvX186bnVsbCx2YWx1ZTpfLm5hbWV9KSxvKHYsXCJsZW5ndGhcIix7X19wcm90b19fOm51bGwsdmFsdWU6Xy5sZW5ndGh9KSxvKG0uUmVhZGFibGUucHJvdG90eXBlLHcse19fcHJvdG9fXzpudWxsLHZhbHVlOnYsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KX1mb3IoY29uc3QgRSBvZiBpKGwpKXtjb25zdCBTPWxbRV07ZnVuY3Rpb24gdiguLi50KXtpZihuZXcudGFyZ2V0KXRocm93IGMoKTtyZXR1cm4gYShTLHRoaXMsdCl9byh2LFwibmFtZVwiLHtfX3Byb3RvX186bnVsbCx2YWx1ZTpTLm5hbWV9KSxvKHYsXCJsZW5ndGhcIix7X19wcm90b19fOm51bGwsdmFsdWU6Uy5sZW5ndGh9KSxvKG0uUmVhZGFibGUucHJvdG90eXBlLEUse19fcHJvdG9fXzpudWxsLHZhbHVlOnYsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KX1tLldyaXRhYmxlPW4oMzczKSxtLkR1cGxleD1uKDE4MiksbS5UcmFuc2Zvcm09bigyMTApLG0uUGFzc1Rocm91Z2g9big0NjcpLG0ucGlwZWxpbmU9ZDtjb25zdHthZGRBYm9ydFNpZ25hbDpifT1uKDM3NCk7bS5hZGRBYm9ydFNpZ25hbD1iLG0uZmluaXNoZWQ9cCxtLmRlc3Ryb3k9aCxtLmNvbXBvc2U9ZixvKG0sXCJwcm9taXNlc1wiLHtfX3Byb3RvX186bnVsbCxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6KCk9Pmd9KSxvKGQscyx7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMCxnZXQ6KCk9PmcucGlwZWxpbmV9KSxvKHAscyx7X19wcm90b19fOm51bGwsZW51bWVyYWJsZTohMCxnZXQ6KCk9PmcuZmluaXNoZWR9KSxtLlN0cmVhbT1tLG0uX2lzVWludDhBcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl9LG0uX3VpbnQ4QXJyYXlUb0J1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4gci5mcm9tKHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpfX0sNzYwOih0LGUsbik9Pntjb25zdHtBcnJheVByb3RvdHlwZVBvcDpyLFByb21pc2U6b309bigxOTEpLHtpc0l0ZXJhYmxlOmksaXNOb2RlU3RyZWFtOmEsaXNXZWJTdHJlYW06c309bigxMzIpLHtwaXBlbGluZUltcGw6dX09big3NTQpLHtmaW5pc2hlZDpsfT1uKDg2KTtuKDkxKSx0LmV4cG9ydHM9e2ZpbmlzaGVkOmwscGlwZWxpbmU6ZnVuY3Rpb24oLi4udCl7cmV0dXJuIG5ldyBvKCgoZSxuKT0+e2xldCBvLGw7Y29uc3QgYz10W3QubGVuZ3RoLTFdO2lmKGMmJlwib2JqZWN0XCI9PXR5cGVvZiBjJiYhYShjKSYmIWkoYykmJiFzKGMpKXtjb25zdCBlPXIodCk7bz1lLnNpZ25hbCxsPWUuZW5kfXUodCwoKHQscik9Pnt0P24odCk6ZShyKX0pLHtzaWduYWw6byxlbmQ6bH0pfSkpfX19LDUzMzp0PT57dmFyIGUsbixyPXQuZXhwb3J0cz17fTtmdW5jdGlvbiBvKCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIGEodCl7aWYoZT09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigoZT09PW98fCFlKSYmc2V0VGltZW91dClyZXR1cm4gZT1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIGUodCwwKX1jYXRjaChuKXt0cnl7cmV0dXJuIGUuY2FsbChudWxsLHQsMCl9Y2F0Y2gobil7cmV0dXJuIGUuY2FsbCh0aGlzLHQsMCl9fX0hZnVuY3Rpb24oKXt0cnl7ZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6b31jYXRjaCh0KXtlPW99dHJ5e249XCJmdW5jdGlvblwiPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDppfWNhdGNoKHQpe249aX19KCk7dmFyIHMsdT1bXSxsPSExLGM9LTE7ZnVuY3Rpb24gZigpe2wmJnMmJihsPSExLHMubGVuZ3RoP3U9cy5jb25jYXQodSk6Yz0tMSx1Lmxlbmd0aCYmZCgpKX1mdW5jdGlvbiBkKCl7aWYoIWwpe3ZhciB0PWEoZik7bD0hMDtmb3IodmFyIGU9dS5sZW5ndGg7ZTspe2ZvcihzPXUsdT1bXTsrK2M8ZTspcyYmc1tjXS5ydW4oKTtjPS0xLGU9dS5sZW5ndGh9cz1udWxsLGw9ITEsZnVuY3Rpb24odCl7aWYobj09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KHQpO2lmKChuPT09aXx8IW4pJiZjbGVhclRpbWVvdXQpcmV0dXJuIG49Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dCh0KTt0cnl7cmV0dXJuIG4odCl9Y2F0Y2goZSl7dHJ5e3JldHVybiBuLmNhbGwobnVsbCx0KX1jYXRjaChlKXtyZXR1cm4gbi5jYWxsKHRoaXMsdCl9fX0odCl9fWZ1bmN0aW9uIGgodCxlKXt0aGlzLmZ1bj10LHRoaXMuYXJyYXk9ZX1mdW5jdGlvbiBwKCl7fXIubmV4dFRpY2s9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTt1LnB1c2gobmV3IGgodCxlKSksMSE9PXUubGVuZ3RofHxsfHxhKGQpfSxoLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxyLnRpdGxlPVwiYnJvd3NlclwiLHIuYnJvd3Nlcj0hMCxyLmVudj17fSxyLmFyZ3Y9W10sci52ZXJzaW9uPVwiXCIsci52ZXJzaW9ucz17fSxyLm9uPXAsci5hZGRMaXN0ZW5lcj1wLHIub25jZT1wLHIub2ZmPXAsci5yZW1vdmVMaXN0ZW5lcj1wLHIucmVtb3ZlQWxsTGlzdGVuZXJzPXAsci5lbWl0PXAsci5wcmVwZW5kTGlzdGVuZXI9cCxyLnByZXBlbmRPbmNlTGlzdGVuZXI9cCxyLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm5bXX0sci5iaW5kaW5nPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxyLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxyLmNoZGlyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sci51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sMzc3Oih0LGUsbik9Pnt2YXIgcj1uKDQ4NSksbz1yLkJ1ZmZlcjtmdW5jdGlvbiBpKHQsZSl7Zm9yKHZhciBuIGluIHQpZVtuXT10W25dfWZ1bmN0aW9uIGEodCxlLG4pe3JldHVybiBvKHQsZSxuKX1vLmZyb20mJm8uYWxsb2MmJm8uYWxsb2NVbnNhZmUmJm8uYWxsb2NVbnNhZmVTbG93P3QuZXhwb3J0cz1yOihpKHIsZSksZS5CdWZmZXI9YSksaShvLGEpLGEuZnJvbT1mdW5jdGlvbih0LGUsbil7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyXCIpO3JldHVybiBvKHQsZSxuKX0sYS5hbGxvYz1mdW5jdGlvbih0LGUsbil7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXJcIik7dmFyIHI9byh0KTtyZXR1cm4gdm9pZCAwIT09ZT9cInN0cmluZ1wiPT10eXBlb2Ygbj9yLmZpbGwoZSxuKTpyLmZpbGwoZSk6ci5maWxsKDApLHJ9LGEuYWxsb2NVbnNhZmU9ZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXJcIik7cmV0dXJuIG8odCl9LGEuYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyXCIpO3JldHVybiByLlNsb3dCdWZmZXIodCl9fSw0NjQ6KHQsZSxuKT0+e3ZhciByPW4oMzc3KS5CdWZmZXIsbz1yLmlzRW5jb2Rpbmd8fGZ1bmN0aW9uKHQpe3N3aXRjaCgodD1cIlwiK3QpJiZ0LnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6Y2FzZVwicmF3XCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19O2Z1bmN0aW9uIGkodCl7dmFyIGU7c3dpdGNoKHRoaXMuZW5jb2Rpbmc9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuXCJ1dGY4XCI7Zm9yKHZhciBlOzspc3dpdGNoKHQpe2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVyblwidXRmOFwiO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVyblwidXRmMTZsZVwiO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVyblwibGF0aW4xXCI7Y2FzZVwiYmFzZTY0XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJoZXhcIjpyZXR1cm4gdDtkZWZhdWx0OmlmKGUpcmV0dXJuO3Q9KFwiXCIrdCkudG9Mb3dlckNhc2UoKSxlPSEwfX0odCk7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihyLmlzRW5jb2Rpbmc9PT1vfHwhbyh0KSkpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrdCk7cmV0dXJuIGV8fHR9KHQpLHRoaXMuZW5jb2Rpbmcpe2Nhc2VcInV0ZjE2bGVcIjp0aGlzLnRleHQ9dSx0aGlzLmVuZD1sLGU9NDticmVhaztjYXNlXCJ1dGY4XCI6dGhpcy5maWxsTGFzdD1zLGU9NDticmVhaztjYXNlXCJiYXNlNjRcIjp0aGlzLnRleHQ9Yyx0aGlzLmVuZD1mLGU9MzticmVhaztkZWZhdWx0OnJldHVybiB0aGlzLndyaXRlPWQsdm9pZCh0aGlzLmVuZD1oKX10aGlzLmxhc3ROZWVkPTAsdGhpcy5sYXN0VG90YWw9MCx0aGlzLmxhc3RDaGFyPXIuYWxsb2NVbnNhZmUoZSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdDw9MTI3PzA6dD4+NT09Nj8yOnQ+PjQ9PTE0PzM6dD4+Mz09MzA/NDp0Pj42PT0yPy0xOi0yfWZ1bmN0aW9uIHModCl7dmFyIGU9dGhpcy5sYXN0VG90YWwtdGhpcy5sYXN0TmVlZCxuPWZ1bmN0aW9uKHQsZSxuKXtpZigxMjghPSgxOTImZVswXSkpcmV0dXJuIHQubGFzdE5lZWQ9MCxcIu+/vVwiO2lmKHQubGFzdE5lZWQ+MSYmZS5sZW5ndGg+MSl7aWYoMTI4IT0oMTkyJmVbMV0pKXJldHVybiB0Lmxhc3ROZWVkPTEsXCLvv71cIjtpZih0Lmxhc3ROZWVkPjImJmUubGVuZ3RoPjImJjEyOCE9KDE5MiZlWzJdKSlyZXR1cm4gdC5sYXN0TmVlZD0yLFwi77+9XCJ9fSh0aGlzLHQpO3JldHVybiB2b2lkIDAhPT1uP246dGhpcy5sYXN0TmVlZDw9dC5sZW5ndGg/KHQuY29weSh0aGlzLmxhc3RDaGFyLGUsMCx0aGlzLmxhc3ROZWVkKSx0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCx0aGlzLmxhc3RUb3RhbCkpOih0LmNvcHkodGhpcy5sYXN0Q2hhcixlLDAsdC5sZW5ndGgpLHZvaWQodGhpcy5sYXN0TmVlZC09dC5sZW5ndGgpKX1mdW5jdGlvbiB1KHQsZSl7aWYoKHQubGVuZ3RoLWUpJTI9PTApe3ZhciBuPXQudG9TdHJpbmcoXCJ1dGYxNmxlXCIsZSk7aWYobil7dmFyIHI9bi5jaGFyQ29kZUF0KG4ubGVuZ3RoLTEpO2lmKHI+PTU1Mjk2JiZyPD01NjMxOSlyZXR1cm4gdGhpcy5sYXN0TmVlZD0yLHRoaXMubGFzdFRvdGFsPTQsdGhpcy5sYXN0Q2hhclswXT10W3QubGVuZ3RoLTJdLHRoaXMubGFzdENoYXJbMV09dFt0Lmxlbmd0aC0xXSxuLnNsaWNlKDAsLTEpfXJldHVybiBufXJldHVybiB0aGlzLmxhc3ROZWVkPTEsdGhpcy5sYXN0VG90YWw9Mix0aGlzLmxhc3RDaGFyWzBdPXRbdC5sZW5ndGgtMV0sdC50b1N0cmluZyhcInV0ZjE2bGVcIixlLHQubGVuZ3RoLTEpfWZ1bmN0aW9uIGwodCl7dmFyIGU9dCYmdC5sZW5ndGg/dGhpcy53cml0ZSh0KTpcIlwiO2lmKHRoaXMubGFzdE5lZWQpe3ZhciBuPXRoaXMubGFzdFRvdGFsLXRoaXMubGFzdE5lZWQ7cmV0dXJuIGUrdGhpcy5sYXN0Q2hhci50b1N0cmluZyhcInV0ZjE2bGVcIiwwLG4pfXJldHVybiBlfWZ1bmN0aW9uIGModCxlKXt2YXIgbj0odC5sZW5ndGgtZSklMztyZXR1cm4gMD09PW4/dC50b1N0cmluZyhcImJhc2U2NFwiLGUpOih0aGlzLmxhc3ROZWVkPTMtbix0aGlzLmxhc3RUb3RhbD0zLDE9PT1uP3RoaXMubGFzdENoYXJbMF09dFt0Lmxlbmd0aC0xXToodGhpcy5sYXN0Q2hhclswXT10W3QubGVuZ3RoLTJdLHRoaXMubGFzdENoYXJbMV09dFt0Lmxlbmd0aC0xXSksdC50b1N0cmluZyhcImJhc2U2NFwiLGUsdC5sZW5ndGgtbikpfWZ1bmN0aW9uIGYodCl7dmFyIGU9dCYmdC5sZW5ndGg/dGhpcy53cml0ZSh0KTpcIlwiO3JldHVybiB0aGlzLmxhc3ROZWVkP2UrdGhpcy5sYXN0Q2hhci50b1N0cmluZyhcImJhc2U2NFwiLDAsMy10aGlzLmxhc3ROZWVkKTplfWZ1bmN0aW9uIGQodCl7cmV0dXJuIHQudG9TdHJpbmcodGhpcy5lbmNvZGluZyl9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdCYmdC5sZW5ndGg/dGhpcy53cml0ZSh0KTpcIlwifWUuU3RyaW5nRGVjb2Rlcj1pLGkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm5cIlwiO3ZhciBlLG47aWYodGhpcy5sYXN0TmVlZCl7aWYodm9pZCAwPT09KGU9dGhpcy5maWxsTGFzdCh0KSkpcmV0dXJuXCJcIjtuPXRoaXMubGFzdE5lZWQsdGhpcy5sYXN0TmVlZD0wfWVsc2Ugbj0wO3JldHVybiBuPHQubGVuZ3RoP2U/ZSt0aGlzLnRleHQodCxuKTp0aGlzLnRleHQodCxuKTplfHxcIlwifSxpLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5sZW5ndGg/dGhpcy53cml0ZSh0KTpcIlwiO3JldHVybiB0aGlzLmxhc3ROZWVkP2UrXCLvv71cIjplfSxpLnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUubGVuZ3RoLTE7aWYocjxuKXJldHVybiAwO3ZhciBvPWEoZVtyXSk7aWYobz49MClyZXR1cm4gbz4wJiYodC5sYXN0TmVlZD1vLTEpLG87aWYoLS1yPG58fC0yPT09bylyZXR1cm4gMDtpZihvPWEoZVtyXSksbz49MClyZXR1cm4gbz4wJiYodC5sYXN0TmVlZD1vLTIpLG87aWYoLS1yPG58fC0yPT09bylyZXR1cm4gMDtpZihvPWEoZVtyXSksbz49MClyZXR1cm4gbz4wJiYoMj09PW8/bz0wOnQubGFzdE5lZWQ9by0zKSxvO3JldHVybiAwfSh0aGlzLHQsZSk7aWYoIXRoaXMubGFzdE5lZWQpcmV0dXJuIHQudG9TdHJpbmcoXCJ1dGY4XCIsZSk7dGhpcy5sYXN0VG90YWw9bjt2YXIgcj10Lmxlbmd0aC0obi10aGlzLmxhc3ROZWVkKTtyZXR1cm4gdC5jb3B5KHRoaXMubGFzdENoYXIsMCxyKSx0LnRvU3RyaW5nKFwidXRmOFwiLGUscil9LGkucHJvdG90eXBlLmZpbGxMYXN0PWZ1bmN0aW9uKHQpe2lmKHRoaXMubGFzdE5lZWQ8PXQubGVuZ3RoKXJldHVybiB0LmNvcHkodGhpcy5sYXN0Q2hhcix0aGlzLmxhc3RUb3RhbC10aGlzLmxhc3ROZWVkLDAsdGhpcy5sYXN0TmVlZCksdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLDAsdGhpcy5sYXN0VG90YWwpO3QuY29weSh0aGlzLmxhc3RDaGFyLHRoaXMubGFzdFRvdGFsLXRoaXMubGFzdE5lZWQsMCx0Lmxlbmd0aCksdGhpcy5sYXN0TmVlZC09dC5sZW5ndGh9fSw1NDoodCxlLG4pPT57bi5kKGUse01TOigpPT5BLGNGOigpPT5JLEFLOigpPT5ULE1fOigpPT5SLGNYOigpPT54LEJUOigpPT5JbnRlcm9wRXJyb3IsX1c6KCk9PkIsUGc6KCk9Pmx0LCRqOigpPT5ZLFUkOigpPT5OLFU3OigpPT5NfSk7dmFyIHI9e2Q6KHQsZSk9Pntmb3IodmFyIG4gaW4gZSlyLm8oZSxuKSYmIXIubyh0LG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDplW25dfSl9LG86KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxvPXt9O3IuZChvLHtNUzooKT0+QXBpRXJyb3IsY0Y6KCk9PkFwaVJlcXVlc3RFcnJvcixBSzooKT0+QXV0aFRva2VuRXhwaXJlZEVycm9yLE1fOigpPT5BdXRob3JpemF0aW9uRXJyb3IsY1g6KCk9PkluaXRpYWxpemF0aW9uRXJyb3IsWWQ6KCk9Pmwsbmo6KCk9Pk5vdEltcGxlbWVudGVkRXJyb3IsTzQ6KCk9PlMsX1c6KCk9PlBhcmFtZXRlckVycm9yLFUkOigpPT5hLFU3OigpPT5zfSk7Y2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LGUpe3ZhciBuLHI7c3VwZXIodD1udWxsIT09KG49bnVsbCE9dD90Om51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PW4/bjpcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkXCIpLHRoaXMubmFtZT10aGlzLmNvbnN0cnVjdG9yLm5hbWUsdGhpcy5zdGFjaz0odD90aGlzLnN0YWNrOm51bGwhPT0ocj1udWxsPT1lP3ZvaWQgMDplLnN0YWNrKSYmdm9pZCAwIT09cj9yOnRoaXMuc3RhY2spLnJlcGxhY2UoL14oXFx3KkVycm9yKS8sYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWApfX1jbGFzcyBBcGlSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3Rvcih0LGUsbil7dmFyIHI7c3VwZXIodD1udWxsIT09KHI9bnVsbCE9dD90Om51bGw9PW4/dm9pZCAwOm4ubWVzc2FnZSkmJnZvaWQgMCE9PXI/cjpcIkFuIGVycm9yIG9jY3VycmVkIHdoZW4gZXhlY3V0aW5nIHRoZSBBUEkgcmVxdWVzdFwiLG4pLHRoaXMuc3RhdHVzPWV9fWNsYXNzIEF1dGhvcml6YXRpb25FcnJvciBleHRlbmRzIEFwaUVycm9ye2NvbnN0cnVjdG9yKHQsZSl7dmFyIG47c3VwZXIodD1udWxsIT09KG49bnVsbCE9dD90Om51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PW4/bjpcIkFuIGF1dGhvcml6YXRpb24gZXJyb3Igb2NjdXJyZWRcIixlKX19Y2xhc3MgQXV0aFRva2VuRXhwaXJlZEVycm9yIGV4dGVuZHMgQXBpRXJyb3J7Y29uc3RydWN0b3IodCxlKXt2YXIgbjtzdXBlcih0PW51bGwhPT0obj1udWxsIT10P3Q6bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiVGhlIEFQSSByZXF1ZXN0IGZhaWxlZCBhcyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbnMgaGF2ZSBleHBpcmVkXCIsZSl9fWNsYXNzIEluaXRpYWxpemF0aW9uRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3Rvcih0LGUpe3ZhciBuO3N1cGVyKHQ9bnVsbCE9PShuPW51bGwhPXQ/dDpudWxsPT1lP3ZvaWQgMDplLm1lc3NhZ2UpJiZ2b2lkIDAhPT1uP246XCJBbiBpbml0aWFsaXphdGlvbiBlcnJvciBvY2N1cnJlZFwiLGUpfX1jbGFzcyBOb3RJbXBsZW1lbnRlZEVycm9yIGV4dGVuZHMgQXBpRXJyb3J7Y29uc3RydWN0b3IodCxlKXt2YXIgbjtzdXBlcih0PW51bGwhPT0obj1udWxsIT10P3Q6bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bj9uOlwiVGhlIG1ldGhvZCBoYXMgbm90IGJlZW4gaW1wbGVtZW50ZWRcIixlKX19Y2xhc3MgUGFyYW1ldGVyRXJyb3IgZXh0ZW5kcyBBcGlFcnJvcntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0PW51bGwhPXQ/dDpcIkludmFsaWQgcGFyYW1ldGVyIGRldGVjdGVkXCIpfX1jb25zdCBpPXQ9PntsZXQgZT1maW4uSW50ZWdyYXRpb25zO2V8fChmaW4uSW50ZWdyYXRpb25zPXt9LGU9ZmluLkludGVncmF0aW9ucyk7bGV0IG49ZVt0XTtyZXR1cm4gbnx8KGVbdF09e30sbj1lW3RdKSxufSxhPXQ9PntpKHQpLmxvZ2dpbmdFbmFibGVkPSExfSxzPSh0LGU9XCIwLjAuMFwiKT0+e2kodCkubG9nZ2luZ0VuYWJsZWQ9ITAsY29uc29sZS5sb2codSh0KSxgdiR7ZX1gKX0sdT10PT5gW0BvcGVuZmluLyR7dC50b0xvd2VyQ2FzZSgpfV1gO2NsYXNzIGx7Y29uc3RydWN0b3IodCl7dGhpcy5uYW1lPXQsdGhpcy5wcmVmaXg9dSh0KSx0aGlzLmlzTG9nZ2luZ0VuYWJsZWQ9dGhpcy5pc0xvZ2dpbmdFbmFibGVkLmJpbmQodGhpcyksdGhpcy5sb2dFcnJvcj10aGlzLmxvZ0Vycm9yLmJpbmQodGhpcyksdGhpcy5sb2dJbmZvPXRoaXMubG9nSW5mby5iaW5kKHRoaXMpLHRoaXMubG9nV2FybmluZz10aGlzLmxvZ1dhcm5pbmcuYmluZCh0aGlzKX1pc0xvZ2dpbmdFbmFibGVkKCl7cmV0dXJuIGkodGhpcy5uYW1lKS5sb2dnaW5nRW5hYmxlZH1sb2dFcnJvcih0KXt0aGlzLmlzTG9nZ2luZ0VuYWJsZWQoKSYmKHQuaW5uZXJFcnJvcj9jb25zb2xlLmVycm9yKHRoaXMucHJlZml4LHQsXCJcXG5cXG4oaW5uZXIpXCIsdC5pbm5lckVycm9yKTpjb25zb2xlLmVycm9yKHRoaXMucHJlZml4LHQpKX1sb2dJbmZvKC4uLnQpe3RoaXMuaXNMb2dnaW5nRW5hYmxlZCgpJiZjb25zb2xlLmxvZyh0aGlzLnByZWZpeCwuLi50KX1sb2dXYXJuaW5nKC4uLnQpe3RoaXMuaXNMb2dnaW5nRW5hYmxlZCgpJiZjb25zb2xlLndhcm4odGhpcy5wcmVmaXgsLi4udCl9fWNvbnN0IGM9XCJvYXV0aC1hcGktYXV0aC1mbG93XCIsZj0odCxlLG4scixvLGksYSxzKT0+YXN5bmMgdT0+e2NvbnN0IGw9bmV3IFVSTCh1KTtpZigwIT09bC5ocmVmLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihvLnRvTG93ZXJDYXNlKCkpKXJldHVybiExO2lmKHdpbmRvdy5jbGVhckludGVydmFsKHMpLHdpbmRvdy5jbGVhclRpbWVvdXQoZSksd2luZG93LmNsZWFyVGltZW91dChuKSx0LnJlbW92ZUFsbExpc3RlbmVycygpLHQuY2xvc2UoITApLGwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpKXtjb25zdCB0PW5ldyBBcGlFcnJvcihcIkF1dGhvcml6YXRpb24gZXJyb3JcIik7cmV0dXJuIHQuZGF0YT1sLnRvU3RyaW5nKCksYSh0KSwhMH1pZihsLnNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0ZVwiKSE9PXIpe2NvbnN0IHQ9bmV3IEFwaUVycm9yKFwiU3RhdGUgbWlzbWF0Y2hcIik7cmV0dXJuIHQuZGF0YT1sLnRvU3RyaW5nKCksYSh0KSwhMH1jb25zdCBjPWwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIik7aWYoIWMpe2NvbnN0IHQ9bmV3IEFwaUVycm9yKFwiQXV0aG9yaXphdGlvbiBjb2RlIG1pc3NpbmdcIik7cmV0dXJuIHQuZGF0YT1sLnRvU3RyaW5nKCksYSh0KSwhMH1yZXR1cm4gaShjKSwhMH0sZD0odCxlLG4scik9PmFzeW5jKG8saSk9PntsZXQgYTtjb25zdCBzPXdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e3dpbmRvdy5jbGVhckludGVydmFsKGEpLHdpbmRvdy5jbGVhclRpbWVvdXQocyksdC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSx0LmNsb3NlKCEwKSxpKG5ldyBBcGlFcnJvcihcIkF1dGhvcml6YXRpb24gdGltZWQgb3V0XCIpKX0pLDNlNSk7dC5hZGRMaXN0ZW5lcihcImNsb3NpbmdcIiwoYXN5bmMoKT0+e3IubG9nSW5mbyhcIlVzZXIgY2xvc2VkIGF1dGggd2luZG93XCIpLHdpbmRvdy5jbGVhckludGVydmFsKGEpLHdpbmRvdy5jbGVhclRpbWVvdXQocyksdC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSxpKG5ldyBBcGlFcnJvcihcIkZhaWxlZCB0byBjb21wbGV0ZSBhdXRob3JpemF0aW9uIGNvZGUgZmxvd1wiKSl9KSk7Y29uc3QgdT13aW5kb3cuc2V0VGltZW91dCgoYXN5bmMoKT0+e3RyeXthd2FpdCB0LmlzU2hvd2luZygpfHwoci5sb2dJbmZvKFwiU2hvd2luZyBhdXRoIHdpbmRvd1wiKSxhd2FpdCB0LnNob3coITApLGF3YWl0IHQuZm9jdXMoKSl9Y2F0Y2godCl7ci5sb2dXYXJuaW5nKFwiVW5hYmxlIHRvIHNob3cgYXV0aCB3aW5kb3dcIil9fSksMmUzKSx7dmVyc2lvbjpsfT1hd2FpdCBmaW4uU3lzdGVtLmdldFJ1bnRpbWVJbmZvKCk7cGFyc2VJbnQobC5zcGxpdChcIi5cIilbMF0sMTApPj0zMD9hd2FpdCBmKHQscyx1LGUsbixvLGkpKChhd2FpdCB0LmdldEluZm8oKSkudXJsKXx8YXdhaXQgdC5hZGRMaXN0ZW5lcihcInVybC1jaGFuZ2VkXCIsKGE9PntyLmxvZ0luZm8oXCJBdXRoIHdpbmRvdyBuYXZpZ2F0ZWQgdG9cIixhLnVybCksZih0LHMsdSxlLG4sbyxpKShhLnVybCl9KSk6YT13aW5kb3cuc2V0SW50ZXJ2YWwoKCgpPT4oYXN5bmModCxlLG4scixvLGksYSxzKT0+e2xldCB1O3RyeXt1PWF3YWl0IHQuZ2V0SW5mbygpfWNhdGNoKHQpe3JldHVybiB3aW5kb3cuY2xlYXJJbnRlcnZhbChlKSx3aW5kb3cuY2xlYXJUaW1lb3V0KG4pLHdpbmRvdy5jbGVhclRpbWVvdXQocikscyhuZXcgQXBpRXJyb3IoXCJDb3VsZCBub3QgbG9jYXRlIGF1dGggd2luZG93XCIpKSwhMX1yZXR1cm4gZih0LG4scixvLGksYSxzLGUpKHUudXJsKX0pKHQsYSxzLHUsZSxuLG8saSkpLDUwMCl9LGg9KCk9PntsZXQgdCxlLG4scjtjb25zdCBvPWFzeW5jKGUsbj0hMSk9Pntjb25zdHtjb21tYW5kOnIsZGF0YTphLGlkOnN9PWUsdT17Y29tbWFuZDpyLGlkOnN9O3RyeXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJBY2Nlc3MgdG9rZW4gbm90IGZvdW5kXCIpO2NvbnN0e2FwaVJlcXVlc3RVcmw6cixkYXRhOnMsaGVhZGVyczpsLGh0dHBNZXRob2Q6YyxpbmNsdWRlQXV0aG9yaXphdGlvbjpmfT1hLGQ9YXdhaXQoYXN5bmMoZSxuLHIsbyxpKT0+e3ZhciBhLHM7Y29uc3QgdT1PYmplY3QuYXNzaWduKHtBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCJ9LG8pO1wiUEFUQ0hcIiE9PW4mJlwiUE9TVFwiIT09biYmXCJQVVRcIiE9PW58fC9jb250ZW50LXR5cGUvaS50ZXN0KE9iamVjdC5rZXlzKHUpLmpvaW4oXCIsXCIpKXx8KHVbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi9qc29uXCIpLGkmJih1LkF1dGhvcml6YXRpb249YEJlYXJlciAke3R9YCk7Y29uc3QgbD1hd2FpdCBmZXRjaChlLHtib2R5Olwib2JqZWN0XCI9PXR5cGVvZiByP0pTT04uc3RyaW5naWZ5KHIpOnIsaGVhZGVyczp1LG1ldGhvZDpufSk7aWYoIWwub2spe2NvbnN0IHQ9e21lc3NhZ2U6XCJGYWlsZWQgdG8gZXhlY3V0ZSBBUEkgcmVxdWVzdFwifTtyZXR1cm4obnVsbD09PShhPWwuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkmJih0LmRhdGE9YXdhaXQgbC5qc29uKCkpLFtsLnN0YXR1cyx2b2lkIDAsdm9pZCAwLHRdfWxldCBjO2NvbnN0IGY9bnVsbCE9PShzPWwuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikpJiZ2b2lkIDAhPT1zP3M6XCJcIjtzd2l0Y2goITApe2Nhc2UhZjpicmVhaztjYXNlL15hcHBsaWNhdGlvblxcLyhcXHcrXFwrKT9qc29uL2kudGVzdChmKTpjPWF3YWl0IGwuanNvbigpO2JyZWFrO2Nhc2UvXm11bHRpcGFydFxcL2Zvcm0tP2RhdGF8XmFwcGxpY2F0aW9uXFwveC0/d3d3LT9mb3JtLT91cmxlbmNvZGVkL2kudGVzdChmKTpjPWF3YWl0IGwuZm9ybURhdGEoKTticmVhaztjYXNlL15hcHBsaWNhdGlvblxcLygoW14vXSspP3htbHx2bmRcXC5vcGVueG1sZm9ybWF0cyl8XnRleHRcXC98XmltYWdlXFwvc3ZnL2kudGVzdChmKTpjPWF3YWl0IGwudGV4dCgpO2JyZWFrO2RlZmF1bHQ6Yz1hd2FpdCBsLmFycmF5QnVmZmVyKCl9cmV0dXJuW2wuc3RhdHVzLGMsZix2b2lkIDBdfSkocixjLHMsbCxmKSxbaCxwLGcseV09ZDtpZih1LnN0YXR1cz1oLHkpe2lmKCFuJiY0MDE9PT1oKXtjb25zdFt0LG5dPWF3YWl0IGkoKTtyZXR1cm4gbj8odS5zdGF0dXM9dCx1LmVycm9yPW4sdSk6YXdhaXQgbyhlLCEwKX11LmVycm9yPXl9ZWxzZSBwJiYodS5kYXRhPXAsdS50eXBlPWcpfWNhdGNoKHQpe3QgaW5zdGFuY2VvZiBFcnJvcj91LmVycm9yPXttZXNzYWdlOnQubWVzc2FnZX06dS5lcnJvcj17bWVzc2FnZTpcIkZhaWxlZCB0byBleGVjdXRlIEFQSSByZXF1ZXN0XCJ9fXJldHVybiBQcm9taXNlLnJlc29sdmUodSl9LGk9YXN5bmMoKT0+e3ZhciBvO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIkF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIG5vdCBzZXRcIik7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IElEIG5vdCBzZXRcIik7Y29uc3QgaT1gZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuJmNsaWVudF9pZD0ke2V9JnJlZnJlc2hfdG9rZW49JHtyfWAsYT1hd2FpdCBmZXRjaChuLnRva2VuX2VuZHBvaW50LHtib2R5OmksaGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwiLFwiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIn0sbWV0aG9kOlwiUE9TVFwifSk7aWYoIWEub2spe2NvbnN0IHQ9e21lc3NhZ2U6XCJGYWlsZWQgdG8gcmVmcmVzaCBhY2Nlc3MgdG9rZW5cIn07cmV0dXJuKG51bGw9PT0obz1hLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1UeXBlXCIpKXx8dm9pZCAwPT09bz92b2lkIDA6by5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpJiYodC5kYXRhPWF3YWl0IGEuanNvbigpKSxbYS5zdGF0dXMsdF19Y29uc3Qgcz1hd2FpdCBhLmpzb24oKTtyZXR1cm4gdD1zLmFjY2Vzc190b2tlbixbYS5zdGF0dXNdfTtzZWxmLm9ubWVzc2FnZT1hc3luYyBpPT57Y29uc3R7Y29tbWFuZDphLGlkOnN9PWkuZGF0YTtsZXQgdT17Y29tbWFuZDphLGlkOnN9O3N3aXRjaChhKXtjYXNlXCJBUElfUkVRVUVTVFwiOnU9YXdhaXQgbyhpLmRhdGEpO2JyZWFrO2Nhc2VcIkNPREVfRVhDSEFOR0VcIjp1PWF3YWl0KGFzeW5jIG89Pnt2YXIgaTtjb25zdHtjb21tYW5kOmEsZGF0YTpzLGlkOnV9PW8sbD17Y29tbWFuZDphLGlkOnV9O3RyeXtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJBdXRob3JpemF0aW9uIHNlcnZlciBtZXRhZGF0YSBub3Qgc2V0XCIpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNsaWVudCBJRCBub3Qgc2V0XCIpO2NvbnN0e2NvZGU6byxjb2RlVmVyaWZpZXI6YSxyZWRpcmVjdFVyaTp1fT1zLGM9YGdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlJmNsaWVudF9pZD0ke2V9JmNvZGU9JHtvfSZjb2RlX3ZlcmlmaWVyPSR7YX0mcmVkaXJlY3RfdXJpPSR7dX1gLGY9YXdhaXQgZmV0Y2gobi50b2tlbl9lbmRwb2ludCx7Ym9keTpjLGhlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJ9LG1ldGhvZDpcIlBPU1RcIn0pO2lmKGYub2spe2NvbnN0IGU9YXdhaXQgZi5qc29uKCk7dD1lLmFjY2Vzc190b2tlbixyPWUucmVmcmVzaF90b2tlbn1lbHNle2NvbnN0IHQ9e21lc3NhZ2U6XCJGYWlsZWQgdG8gcmV0cmlldmUgdG9rZW5zXCJ9OyhudWxsPT09KGk9Zi5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSYmKHQuZGF0YT1hd2FpdCBmLmpzb24oKSksbC5lcnJvcj10fX1jYXRjaCh0KXt0IGluc3RhbmNlb2YgRXJyb3I/bC5lcnJvcj17bWVzc2FnZTp0Lm1lc3NhZ2V9OmwuZXJyb3I9e21lc3NhZ2U6XCJGYWlsZWQgdG8gcmV0cmlldmUgdG9rZW5zXCJ9fXJldHVybiBQcm9taXNlLnJlc29sdmUobCl9KShpLmRhdGEpO2JyZWFrO2Nhc2VcIkVYUElSRV9UT0tFTlNcIjp1PWF3YWl0KGFzeW5jIGU9Pnt2YXIgbztjb25zdHtjb21tYW5kOmksZXhwaXJlQWNjZXNzVG9rZW5Pbmx5OmEsaWQ6c309ZSx1PXtjb21tYW5kOmksaWQ6c307dHJ5e2lmKCFhJiYhcil0aHJvdyBuZXcgRXJyb3IoXCJSZWZyZXNoIHRva2VuIG5vdCBmb3VuZFwiKTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJBdXRob3JpemF0aW9uIHNlcnZlciBtZXRhZGF0YSBub3Qgc2V0XCIpO2lmKCFuLnJldm9jYXRpb25fZW5kcG9pbnQpdGhyb3cgbmV3IEVycm9yKFwiUmV2b2NhdGlvbiBlbmRwb2ludCBtaXNzaW5nIGluIGF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhXCIpO2NvbnN0IGU9YT90OnIsaT1hd2FpdCBmZXRjaChgJHtuLnJldm9jYXRpb25fZW5kcG9pbnR9P3Rva2VuPSR7ZX1gLHtoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSk7aWYoIWkub2spe2NvbnN0IHQ9e21lc3NhZ2U6XCJGYWlsZWQgdG8gcmV2b2tlIHRva2Vuc1wifTsobnVsbD09PShvPWkuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkmJih0LmRhdGE9YXdhaXQgaS5qc29uKCkpLHUuZXJyb3I9dH19Y2F0Y2godCl7dCBpbnN0YW5jZW9mIEVycm9yP3UuZXJyb3I9e21lc3NhZ2U6dC5tZXNzYWdlfTp1LmVycm9yPXttZXNzYWdlOlwiRmFpbGVkIHRvIHJldm9rZSB0b2tlbnNcIn19cmV0dXJuIFByb21pc2UucmVzb2x2ZSh1KX0pKGkuZGF0YSk7YnJlYWs7Y2FzZVwiSU5JVFwiOnU9YXdhaXQoYXN5bmMgdD0+e2NvbnN0e2NvbW1hbmQ6cixkYXRhOm8saWQ6aX09dCxhPXtjb21tYW5kOnIsaWQ6aX07cmV0dXJuIGU9by5jbGllbnRJZCxuPW8ubWV0YWRhdGEsUHJvbWlzZS5yZXNvbHZlKGEpfSkoaS5kYXRhKTticmVhaztkZWZhdWx0OnUuZXJyb3I9bmV3IEVycm9yKGBVbmV4cGVjdGVkIG9hdXRoIHdvcmtlciBjb21tYW5kOiAke2F9YCl9c2VsZi5wb3N0TWVzc2FnZSh1KX19O3ZhciBwOyFmdW5jdGlvbih0KXt0LkFwaVJlcXVlc3Q9XCJBUElfUkVRVUVTVFwiLHQuQ29kZUV4Y2hhbmdlPVwiQ09ERV9FWENIQU5HRVwiLHQuRXhwaXJlVG9rZW5zPVwiRVhQSVJFX1RPS0VOU1wiLHQuSW5pdD1cIklOSVRcIn0ocHx8KHA9e30pKTtjb25zdCBnPVtdLHk9dD0+e2cucHVzaCh0KX0sbT0odCxlKT0+KG4scixvKT0+bmV3IFByb21pc2UoKChpLGEpPT57Y29uc3Qgcz17Y29tbWFuZDpwLkNvZGVFeGNoYW5nZSxkYXRhOntjb2RlOm4sY29kZVZlcmlmaWVyOnIscmVkaXJlY3RVcmk6b30saWQ6RGF0ZS5ub3coKS50b1N0cmluZygpfSx7Y29tbWFuZDp1LGlkOmx9PXM7eSh7Y29tbWFuZDp1LGlkOmwscmVqZWN0OmEscmVzb2x2ZTppfSksdC5wb3N0TWVzc2FnZShzKSxlLmxvZ0luZm8oXCJXb3JrZXIgcmVxdWVzdCBzZW50XCIscyl9KSksdj0odCxlLG4pPT4ocixvLGksYSxzKT0+bmV3IFByb21pc2UoKCh1LGwpPT57Y29uc3QgYz17Y29tbWFuZDpwLkFwaVJlcXVlc3QsZGF0YTp7YXBpUmVxdWVzdFVybDpyLGNsaWVudElkOnQsZGF0YTppLGhlYWRlcnM6YSxodHRwTWV0aG9kOm8saW5jbHVkZUF1dGhvcml6YXRpb246c30saWQ6RGF0ZS5ub3coKS50b1N0cmluZygpfSx7Y29tbWFuZDpmLGlkOmR9PWM7eSh7Y29tbWFuZDpmLGlkOmQscmVqZWN0OmwscmVzb2x2ZTp1fSksZS5wb3N0TWVzc2FnZShjKSxuLmxvZ0luZm8oXCJXb3JrZXIgcmVxdWVzdCBzZW50XCIsYyl9KSksYj0odCxlKT0+bj0+bmV3IFByb21pc2UoKChyLG8pPT57Y29uc3QgaT17Y29tbWFuZDpwLkV4cGlyZVRva2VucyxleHBpcmVBY2Nlc3NUb2tlbk9ubHk6bixpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCl9LHtjb21tYW5kOmEsaWQ6c309aTt5KHtjb21tYW5kOmEsaWQ6cyxyZWplY3Q6byxyZXNvbHZlOnJ9KSx0LnBvc3RNZXNzYWdlKGkpLGUubG9nSW5mbyhcIldvcmtlciByZXF1ZXN0IHNlbnRcIixpKX0pKSx3PXQ9PmU9Pnt0LmxvZ0luZm8oXCJXb3JrZXIgcmVzcG9uc2UgcmVjZWl2ZWRcIixlLmRhdGEpO2NvbnN0IG49ZS5kYXRhLHtjb21tYW5kOnIsZXJyb3I6byxpZDppfT1uLGE9ZnVuY3Rpb24odCxlKXt2YXIgbj17fTtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmZS5pbmRleE9mKHIpPDAmJihuW3JdPXRbcl0pO2lmKG51bGwhPXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBvPTA7Zm9yKHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtvPHIubGVuZ3RoO28rKyllLmluZGV4T2YocltvXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHQscltvXSkmJihuW3Jbb11dPXRbcltvXV0pfXJldHVybiBufShuLFtcImNvbW1hbmRcIixcImVycm9yXCIsXCJpZFwiXSkscz0oKHQsZSk9PmcuZmluZCgobj0+bi5jb21tYW5kPT09ZSYmbi5pZD09PXQpKSkoaSxyKTtzPyhvPyhcInN0YXR1c1wiaW4gYSYmdm9pZCAwIT09YS5zdGF0dXMmJihvLnN0YXR1cz1hLnN0YXR1cykscy5yZWplY3QobykpOnMucmVzb2x2ZShhKSxfKGkscikpOnQubG9nRXJyb3IobmV3IEVycm9yKFwiVW5hYmxlIHRvIGxvY2F0ZSBhd2FpdGVkIHJlcXVlc3RcIikpfSxfPSh0LGUpPT57Y29uc3Qgbj1nLmZpbmRJbmRleCgobj0+bi5jb21tYW5kPT09ZSYmbi5pZD09PXQpKTtuPj0wJiZnLnNwbGljZShuLDEpfSxFPSh0LGUpPT5hc3luYygpPT57dHJ5e2F3YWl0IGIodCxlKSghMSl9Y2F0Y2godCl7ZS5sb2dXYXJuaW5nKHQubWVzc2FnZSl9dC50ZXJtaW5hdGUoKSxlLmxvZ0luZm8oXCJXb3JrZXIgdGVybWluYXRlZFwiKX07Y2xhc3MgU3tnZXQgYXBpT3JpZ2luKCl7cmV0dXJuIHRoaXMuX2FwaU9yaWdpbn1nZXQgY2xpZW50SWQoKXtyZXR1cm4gdGhpcy5fY2xpZW50SWR9Z2V0IGxvZ2dlcigpe3JldHVybiB0aGlzLl9sb2dnZXJ9Z2V0IG1ldGFkYXRhKCl7cmV0dXJuIHRoaXMuX21ldGFkYXRhfWdldCB3b3JrZXIoKXtyZXR1cm4gdGhpcy5fd29ya2VyfWNvbnN0cnVjdG9yKHQsZSxuLHIsbyl7aWYodGhpcy5leGVjdXRlQXBpUmVxdWVzdD1hc3luYyh0LGU9XCJHRVRcIixuLHIsbz0hMCxpPSExKT0+e3RoaXMuX2xvZ2dlci5sb2dJbmZvKFwiRXhlY3V0ZUFwaVJlcXVlc3Qgc3RhcnRlZFwiLHQsZSxuLHIpO3RyeXtjb25zdCBpPWF3YWl0KCh0LGUpPT5hc3luYyhuLHIsbyxpLGEpPT57dHJ5e3JldHVybiBhd2FpdCBlLmV4ZWN1dGVBcGlSZXF1ZXN0KGAke3R9JHtufWAscixvLGksYSl9Y2F0Y2godCl7bGV0IGU7Y29uc3R7ZGF0YTpuLG1lc3NhZ2U6cixzdGF0dXM6b309dDt0aHJvdyBlPXQgaW5zdGFuY2VvZiBFcnJvcj9uZXcgQXBpUmVxdWVzdEVycm9yKHIsbyk6XCJGYWlsZWQgdG8gcmVmcmVzaCBhY2Nlc3MgdG9rZW5cIj09PXI/bmV3IEF1dGhUb2tlbkV4cGlyZWRFcnJvcihyKTpuZXcgQXBpUmVxdWVzdEVycm9yKHIsbyksZS5kYXRhPW4sZX19KSh0aGlzLl9hcGlPcmlnaW4sdGhpcy5fd29ya2VyKSh0LGUsbixyLG8pO3JldHVybiB0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkV4ZWN1dGVBcGlSZXF1ZXN0IGNvbXBsZXRlZFwiLGkpLGl9Y2F0Y2godCl7aWYodCBpbnN0YW5jZW9mIEFwaVJlcXVlc3RFcnJvcil7Y29uc3R7ZGF0YTplLG1lc3NhZ2U6bixuYW1lOnIsc3RhY2s6b309dCxpPXRoaXMuZ2V0RXJyb3JNZXNzYWdlRnJvbVNlcnZlclJlc3BvbnNlKGUpO2kmJih0Lm1lc3NhZ2U9aSx0LnN0YWNrPW51bGw9PW8/dm9pZCAwOm8ucmVwbGFjZShgJHtyfTogJHtufWAsYCR7cn06ICR7aX1gKSl9dGhyb3cgaSYmdGhpcy5sb2dnZXIubG9nRXJyb3IodCksdH19LCEodCYmZSYmbiYmciYmbykpdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXCJQcm92aWRlciBoYXMgbm90IGJlZW4gcHJvcGVybHkgaW5pdGlhbGl6ZWQgKGNhbGwgaW5pdCB0byBjcmVhdGUgbmV3IGluc3RhbmNlcylcIik7dGhpcy5fYXBpT3JpZ2luPXQsdGhpcy5fY2xpZW50SWQ9ZSx0aGlzLl9tZXRhZGF0YT1uLHRoaXMuX3dvcmtlcj1yLHRoaXMuX2xvZ2dlcj1vLHRoaXMuYXV0aG9yaXplPXRoaXMuYXV0aG9yaXplLmJpbmQodGhpcyksdGhpcy5jbG9zZT10aGlzLmNsb3NlLmJpbmQodGhpcyksdGhpcy5leGVjdXRlQXBpUmVxdWVzdD10aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0LmJpbmQodGhpcyksdGhpcy5leHBpcmVUb2tlbnM9dGhpcy5leHBpcmVUb2tlbnMuYmluZCh0aGlzKSx0aGlzLmdldEVycm9yTWVzc2FnZUZyb21TZXJ2ZXJSZXNwb25zZT10aGlzLmdldEVycm9yTWVzc2FnZUZyb21TZXJ2ZXJSZXNwb25zZS5iaW5kKHRoaXMpfWFzeW5jIGF1dGhvcml6ZSh0LGUsbil7aWYodGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJBdXRob3JpemUgc3RhcnRlZFwiLHQsZSxuKSwhdGhpcy5fbWV0YWRhdGF8fCF0aGlzLl9jbGllbnRJZHx8IXRoaXMuX3dvcmtlcil0aHJvdyBuZXcgSW5pdGlhbGl6YXRpb25FcnJvcihcIlByb3ZpZGVyIGhhcyBub3QgYmVlbiBwcm9wZXJseSBpbml0aWFsaXplZCAoY2FsbCBpbml0IHRvIGNyZWF0ZSBuZXcgaW5zdGFuY2VzKVwiKTt0cnl7YXdhaXQocj10aGlzLl9tZXRhZGF0YSxvPXRoaXMuX2NsaWVudElkLGk9dGhpcy5fd29ya2VyLGE9dGhpcy5fbG9nZ2VyLGFzeW5jKHQsZSxuKT0+e2NvbnN0e2F1dGhvcml6YXRpb25fZW5kcG9pbnQ6c309cix1PWZpbi5BcHBsaWNhdGlvbi5nZXRDdXJyZW50U3luYygpLGw9KGF3YWl0IHUuZ2V0Q2hpbGRXaW5kb3dzKCkpLmZpbmQoKHQ9PnQuaWRlbnRpdHkubmFtZT09PWMpKTtsJiZhd2FpdCBsLmNsb3NlKCEwKTtjb25zdCBmPShuZXcgRGF0ZSkuZ2V0VGltZSgpLnRvU3RyaW5nKCksaD0oKCk9Pntjb25zdCB0PW5ldyBVaW50MzJBcnJheSg2NCk7cmV0dXJuIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpLEFycmF5LmZyb20odCwodD0+YDAke3QudG9TdHJpbmcoMTYpfWAuc2xpY2UoLTIpKSkuam9pbihcIlwiKX0pKCkscD0oYXdhaXQoYXN5bmMgdD0+e2NvbnN0IGU9KG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpLG49YXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLGUpLHI9YXdhaXQodD0+bmV3IFByb21pc2UoKChlLG4pPT57dHJ5e2NvbnN0IHI9bmV3IEJsb2IoW3RdKSxvPW5ldyBGaWxlUmVhZGVyO28ub25sb2FkPXQ9Pnt2YXIgcixvO2NvbnN0IGk9bnVsbD09PShyPXQudGFyZ2V0KXx8dm9pZCAwPT09cj92b2lkIDA6ci5yZXN1bHQ7aWYoaSl7Y29uc3RbLHRdPUFycmF5LmZyb20obnVsbCE9PShvPWkubWF0Y2goL2Jhc2U2NCwoLiopJC9pKSkmJnZvaWQgMCE9PW8/bzpbXSk7ZShudWxsIT10P3Q6XCJcIil9bihuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVtcHR5IHJlc3VsdFwiKSl9LG8ucmVhZEFzRGF0YVVSTChyKX1jYXRjaCh0KXtuKHQpfX0pKSkobik7cmV0dXJuIHIucmVwbGFjZSgvXFwrL2csXCItXCIpLnJlcGxhY2UoL1xcLy9nLFwiX1wiKX0pKGgpKS5yZXBsYWNlKC89KyQvLFwiXCIpO2xldCBnPVwiXCI7ZSYmKGc9XCImXCIsZys9T2JqZWN0LmVudHJpZXMoZSkubWFwKCh0PT5gJHtlbmNvZGVVUklDb21wb25lbnQodFswXSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRbMV0pfWApKS5qb2luKFwiJlwiKSk7Y29uc3QgeT1gJHtzfT9jbGllbnRfaWQ9JHtlbmNvZGVVUklDb21wb25lbnQobyl9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudCh0KX0mcmVzcG9uc2VfdHlwZT1jb2RlJnN0YXRlPSR7Zn0mY29kZV9jaGFsbGVuZ2U9JHtwfSZjb2RlX2NoYWxsZW5nZV9tZXRob2Q9UzI1NiR7Z31gLG09bnVsbCE9bj9uOnt9LHtkZWZhdWx0SGVpZ2h0OnYsZGVmYXVsdFdpZHRoOmJ9PW0sdz1mdW5jdGlvbih0LGUpe3ZhciBuPXt9O2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiZlLmluZGV4T2Yocik8MCYmKG5bcl09dFtyXSk7aWYobnVsbCE9dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG89MDtmb3Iocj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO288ci5sZW5ndGg7bysrKWUuaW5kZXhPZihyW29dKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodCxyW29dKSYmKG5bcltvXV09dFtyW29dXSl9cmV0dXJuIG59KG0sW1wiZGVmYXVsdEhlaWdodFwiLFwiZGVmYXVsdFdpZHRoXCJdKTthLmxvZ0luZm8oXCJTdGFydGluZyBPQXV0aCBmbG93XCIseSk7Y29uc3QgXz1hd2FpdCBmaW4uV2luZG93LmNyZWF0ZShPYmplY3QuYXNzaWduKHthbHdheXNPblRvcDohMCxtYXhpbWl6YWJsZTohMSxtaW5pbWl6YWJsZTohMSxhdXRvU2hvdzohMSxkZWZhdWx0Q2VudGVyZWQ6ITAsZGVmYXVsdEhlaWdodDpudWxsIT12P3Y6NzAwLGRlZmF1bHRXaWR0aDpudWxsIT1iP2I6NjAwLGluY2x1ZGVJblNuYXBzaG90czohMSxuYW1lOmMscmVzaXphYmxlOiExLHNhdmVXaW5kb3dTdGF0ZTohMSxzaG93VGFza2Jhckljb246ITEsdXJsOnl9LHcpKSxFPWF3YWl0IG5ldyBQcm9taXNlKGQoXyxmLHQsYSkpO2EubG9nSW5mbyhcIlJlY2VpdmVkIGF1dGhvcml6YXRpb24gY29kZVwiKSxhd2FpdCBpLmV4Y2hhbmdlQ29kZUZvclRva2VucyhFLGgsdCksYS5sb2dJbmZvKFwiUmVjZWl2ZWQgdG9rZW5zXCIpfSkodCxlLG4pLHRoaXMuX2xvZ2dlci5sb2dJbmZvKFwiQXV0aG9yaXplIGNvbXBsZXRlZFwiKX1jYXRjaCh0KXtsZXQgZTtpZih0IGluc3RhbmNlb2YgQXBpRXJyb3Ipe2NvbnN0e2RhdGE6bn09dCxyPXRoaXMuZ2V0RXJyb3JNZXNzYWdlRnJvbVNlcnZlclJlc3BvbnNlKG4pO2U9bmV3IEF1dGhvcml6YXRpb25FcnJvcihyLHQpLGUuZGF0YT1ufWVsc2UgZT1uZXcgQXV0aG9yaXphdGlvbkVycm9yKHZvaWQgMCx0KTt0aHJvdyB0aGlzLmxvZ2dlci5sb2dFcnJvcihlKSxlfXZhciByLG8saSxhfWFzeW5jIGNsb3NlKCl7dmFyIHQ7dGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJDbG9zZSBzdGFydGVkXCIpO3RyeXthd2FpdChudWxsPT09KHQ9dGhpcy5fd29ya2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC50ZXJtaW5hdGUoKSksdGhpcy5fd29ya2VyPXZvaWQgMCx0aGlzLl9hcGlPcmlnaW49dm9pZCAwLHRoaXMuX2NsaWVudElkPXZvaWQgMCx0aGlzLl9tZXRhZGF0YT12b2lkIDAsdGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJDbG9zZSBjb21wbGV0ZWRcIil9Y2F0Y2godCl7Y29uc3QgZT1uZXcgQXBpRXJyb3Iodm9pZCAwLHQpO3Rocm93IHRoaXMuX2xvZ2dlci5sb2dFcnJvcihlKSxlfX1hc3luYyBleHBpcmVUb2tlbnModD0hMSl7dmFyIGU7dGhpcy5fbG9nZ2VyLmxvZ0luZm8oXCJFeHBpcmVUb2tlbnMgc3RhcnRlZFwiKTt0cnl7YXdhaXQobnVsbD09PShlPXRoaXMuX3dvcmtlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuZXhwaXJlVG9rZW5zKHQpKSx0aGlzLl9sb2dnZXIubG9nSW5mbyhcIkV4cGlyZVRva2VucyBjb21wbGV0ZWRcIil9Y2F0Y2godCl7Y29uc3QgZT1uZXcgQXBpRXJyb3Iodm9pZCAwLHQpO3Rocm93IHRoaXMuX2xvZ2dlci5sb2dFcnJvcihlKSxlfX1nZXRFcnJvck1lc3NhZ2VGcm9tU2VydmVyUmVzcG9uc2UodCl7dCYmdGhpcy5fbG9nZ2VyLmxvZ1dhcm5pbmcodCl9c3RhdGljIGFzeW5jIGluaXQodCxlLG4sciwuLi5vKXtjb25zdCBpPW5ldyBsKHIpO2xldCBhO2kubG9nSW5mbyhcIkluaXQgc3RhcnRlZFwiLHQsZSxuKTt0cnl7YT1uZXcgVVJMKGUpfWNhdGNoKHQpe2NvbnN0IGU9bmV3IFBhcmFtZXRlckVycm9yKFwiVW5leHBlY3RlZCBpbnZhbGlkIEFQSSBvcmlnaW5cIik7dGhyb3cgaS5sb2dFcnJvcihlKSxlfXRyeXtjb25zdCBlPWF3YWl0KGFzeW5jIHQ9PntsZXQgZTt0cnl7ZT1uZXcgVVJMKHQpfWNhdGNoKHQpe3Rocm93IG5ldyBQYXJhbWV0ZXJFcnJvcihcIlVuZXhwZWN0ZWQgaW52YWxpZCBtZXRhZGF0YSBVUkxcIil9Y29uc3Qgbj1hd2FpdCBmZXRjaChlLHtoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSk7aWYoIW4ub2spdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJldHJpZXZlIGF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhXCIpO2NvbnN0IHI9YXdhaXQgbi5qc29uKCk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBlbXB0eSBhdXRob3JpemF0aW9uIHNlcnZlciBtZXRhZGF0YSByZXNwb25zZVwiKTtpZighci5yZXNwb25zZV90eXBlc19zdXBwb3J0ZWQuZmluZCgodD0+XCJjb2RlXCI9PT10LnRvTG93ZXJDYXNlKCkpKSl0aHJvdyBuZXcgRXJyb3IoXCJBdXRob3JpemF0aW9uIHNlcnZlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSBhdXRob3JpemF0aW9uIGNvZGUgcmVzcG9uc2UgdHlwZVwiKTtyZXR1cm4gcn0pKHQpLHI9YXdhaXQoYXN5bmModCxlLG4pPT57Y29uc3Qgcj1uZXcgQmxvYihbYCgke2h9KSgpYF0se3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIn0pLG89VVJMLmNyZWF0ZU9iamVjdFVSTChyKSxpPW5ldyBXb3JrZXIobyk7cmV0dXJuIGkub25tZXNzYWdlPXcobiksYXdhaXQoKHQsZSxuLHIpPT5uZXcgUHJvbWlzZSgoKG8saSk9Pntjb25zdCBhPXtjb21tYW5kOnAuSW5pdCxkYXRhOntjbGllbnRJZDplLG1ldGFkYXRhOnR9LGlkOkRhdGUubm93KCkudG9TdHJpbmcoKX0se2NvbW1hbmQ6cyxpZDp1fT1hO3koe2NvbW1hbmQ6cyxpZDp1LHJlamVjdDppLHJlc29sdmU6b30pLG4ucG9zdE1lc3NhZ2UoYSksci5sb2dJbmZvKFwiV29ya2VyIHJlcXVlc3Qgc2VudFwiLGEpfSkpKSh0LGUsaSxuKSx7ZXhjaGFuZ2VDb2RlRm9yVG9rZW5zOm0oaSxuKSxleGVjdXRlQXBpUmVxdWVzdDp2KGUsaSxuKSxleHBpcmVUb2tlbnM6YihpLG4pLHRlcm1pbmF0ZTpFKGksbil9fSkoZSxuLGkpO3JldHVybiBpLmxvZ0luZm8oXCJJbml0IGNvbXBsZXRlZFwiLGUpLG5ldyBTKGEub3JpZ2luLG4sZSxyLGkpfWNhdGNoKHQpe2xldCBlO3Rocm93IGU9dCBpbnN0YW5jZW9mIEFwaUVycm9yP3Q6bmV3IEluaXRpYWxpemF0aW9uRXJyb3Iodm9pZCAwLHQpLGkubG9nRXJyb3IoZSksZX19fXZhciBBPW8uTVMsST1vLmNGLFQ9by5BSyxSPW8uTV8seD1vLmNYLEM9by5PNCxCPW8uX1csaz1vLlUkLEw9by5VNyxPPW4oOTUxKTtjb25zdCBVPVwiMS4wLjFcIixqPVwiTWljcm9zb2Z0MzY1XCIsTj0oKT0+e2soail9LE09KCk9PntMKGosVSl9O1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihcInVuZGVmaW5lZFwiPT10eXBlb2YgZmluJiZPYmplY3QuYXNzaWduKHdpbmRvdyx7ZmluOnt9fSksT2JqZWN0LmFzc2lnbihmaW4se0ludGVncmF0aW9uczp7TWljcm9zb2Z0MzY1OntlbmFibGVMb2dnaW5nOk0sZGlzYWJsZUxvZ2dpbmc6Tn19fSkpO2NvbnN0IFA9dD0+YXN5bmMoZSxuLHIsbyxpKT0+e3ZhciBhO3JldHVybiBlPShhPWUpLnN0YXJ0c1dpdGgoXCIvXCIpP2E6YC8ke2F9YCx0LmV4ZWN1dGVBcGlSZXF1ZXN0KGUsbixyLG8saSwhMCl9LFc9YXN5bmModCxlLG49W10pPT57Y29uc3Qgcj1bXCJpZFwiLFwidXNlclByaW5jaXBhbE5hbWVcIixcInVzZXJUeXBlXCIsLi4ubl0uam9pbihcIixcIiksbz1hd2FpdChhc3luYyh0LGU9W10pPT57aWYoIShudWxsPT1lP3ZvaWQgMDplLmxlbmd0aCkpcmV0dXJuW107Y29uc3Qgbj1bXTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrPTIwKXtjb25zdCBvPXtyZXF1ZXN0czplLnNsaWNlKHIscisyMCkubWFwKCh0PT4odC5pZD1jcnlwdG8ucmFuZG9tVVVJRCgpLHQpKSl9O24ucHVzaCh0LmV4ZWN1dGVBcGlSZXF1ZXN0KFwiL3YxLjAvJGJhdGNoXCIsXCJQT1NUXCIsbykpfWNvbnN0IHI9KGF3YWl0IFByb21pc2UuYWxsKG4pKS5mbGF0TWFwKCh0PT50LmRhdGEucmVzcG9uc2VzKSk7cmV0dXJuIGUubWFwKCh0PT57dmFyIGU7cmV0dXJuIG51bGw9PT0oZT1yLmZpbmQoKGU9PmUuaWQ9PT10LmlkKSkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmJvZHl9KSl9KSh0LGUubWFwKCh0PT4oe21ldGhvZDpcIkdFVFwiLHVybDpgL3VzZXJzPyRmaWx0ZXI9bWFpbCBlcSAnJHtlbmNvZGVVUklDb21wb25lbnQodCl9JyYkc2VsZWN0PSR7cn1gfSkpKSksaT1vLm1hcCgodD0+e3ZhciBlO3JldHVybiBudWxsPT09KGU9dC52YWx1ZSl8fHZvaWQgMD09PWU/dm9pZCAwOmVbMF19KSk7cmV0dXJuIHQubG9nZ2VyLmxvZ0luZm8oXCJSZXNvbHZlZCB1c2VycyBmcm9tIGVtYWlsIGFkZHJlc3Nlc1wiLGksZSksaX07dmFyICQ9bigzMDApO2NvbnN0IEQ9dD0+dC5tYXAoKHQ9PnQ/e2lkOnQudXNlclByaW5jaXBhbE5hbWUsZW1haWxBZGRyZXNzOnQubWFpbCxuYW1lOnQuZGlzcGxheU5hbWV9OnZvaWQgMCkpLEY9YXN5bmModCxlKT0+e3RyeXthd2FpdCBmaW4uU3lzdGVtLnJlZ2lzdGVyVXNhZ2Uoe3R5cGU6XCJpbnRlZ3JhdGlvbi1mZWF0dXJlXCIsZGF0YTp7YXBpVmVyc2lvbjpVLGNvbXBvbmVudE5hbWU6dH19KX1jYXRjaChuKXtlLmxvZ1dhcm5pbmcoYFVuYWJsZSB0byByZWdpc3RlciB1c2FnZSBmb3IgZmVhdHVyZSAke3R9OiAke251bGw9PW4/dm9pZCAwOm4ubWVzc2FnZX1gKX19LHo9dD0+e2xldCBlPXQ7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dC5maWx0ZXIoQm9vbGVhbikubWFwKHopOihcIm9iamVjdFwiPT10eXBlb2YgdCYmKGU9T2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHQpLmZpbHRlcigoKFssdF0pPT52b2lkIDAhPT0obnVsbCE9dD90OnZvaWQgMCkpKS5tYXAoKChbdCxlXSk9Plt0LHooZSldKSkpKSxlKX0scT10PT4vI0VYVCNALy50ZXN0KHQudXNlclByaW5jaXBhbE5hbWUpO3ZhciBIOyFmdW5jdGlvbih0KXt0Lk1TMzY1PVwiTVMtMzY1XCIsdC5UZWFtcz1cIk1TLVRFQU1TXCJ9KEh8fChIPXt9KSk7Y2xhc3MgViBleHRlbmRzIEN7Z2V0IGN1cnJlbnRVc2VyKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyfWdldCByZWRpcmVjdFVyaSgpe3JldHVybiB0aGlzLl9yZWRpcmVjdFVyaX1nZXQgcGVybWlzc2lvbnMoKXtyZXR1cm4gdGhpcy5fcGVybWlzc2lvbnN9Z2V0IHRlbmFudElkKCl7cmV0dXJuIHRoaXMuX3RlbmFudElkfWNvbnN0cnVjdG9yKHQsZSxuLHIsbyxpLGEscyl7c3VwZXIodCxlLGksYSxzKSx0aGlzLl9wZXJtaXNzaW9ucz1vLHRoaXMuX3JlZGlyZWN0VXJpPXIsdGhpcy5fdGVuYW50SWQ9bixGKEguTVMzNjUscyl9YXN5bmMgYXV0aG9yaXplKHQsZSxuKXthd2FpdCBzdXBlci5hdXRob3JpemUodCxlLG4pO2NvbnN0IHI9YXdhaXQoYXN5bmMgdD0+e2NvbnN0e2RhdGE6ZX09YXdhaXQgdC5leGVjdXRlQXBpUmVxdWVzdChcIi92MS4wL21lXCIpO3JldHVybiBlfSkodGhpcyk7dGhpcy5fY3VycmVudFVzZXI9cn1nZXRFcnJvck1lc3NhZ2VGcm9tU2VydmVyUmVzcG9uc2UodCl7dmFyIGUsbixyO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXRyeXtyZXR1cm4gbnVsbD09PShuPW51bGw9PT0oZT1uZXcgVVJMKHQpLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3BsaXQoL1xcclxcbi8pKXx8dm9pZCAwPT09bj92b2lkIDA6blswXX1jYXRjaCh0KXtyZXR1cm59cmV0dXJuIG51bGw9PT0ocj1udWxsPT10P3ZvaWQgMDp0LmVycm9yKXx8dm9pZCAwPT09cj92b2lkIDA6ci5tZXNzYWdlfXN0YXRpYyBhc3luYyBpbml0KHQsZSxuLHIsbyxpLGEpe2NvbnN0IHM9YXdhaXQgc3VwZXIuaW5pdCh0LGUsbixyKTtyZXR1cm4gbmV3IFYoZSxuLG8saSxhLG51bGw9PXM/dm9pZCAwOnMubWV0YWRhdGEsbnVsbD09cz92b2lkIDA6cy53b3JrZXIsbnVsbD09cz92b2lkIDA6cy5sb2dnZXIpfX1jb25zdCBHPVtcIlVzZXIuUmVhZEJhc2ljLkFsbFwiLFwiVGVhbS5SZWFkQmFzaWMuQWxsXCIsXCJDaGFubmVsLlJlYWRCYXNpYy5BbGxcIixcIkNoYW5uZWxNZXNzYWdlLlNlbmRcIixcIkNoYXQuQ3JlYXRlXCIsXCJDaGF0TWVzc2FnZS5TZW5kXCIsXCJvZmZsaW5lX2FjY2Vzc1wiXTtsZXQgSjtjb25zdCBZPWFzeW5jKHQsZSxuLHI9W10sbyxpKT0+e2F3YWl0IEsodCxlLG4scik7Y29uc3QgYT1PYmplY3QuYXNzaWduKHtzY29wZTpbLi4uRywuLi5yXS5qb2luKFwiIFwiKX0sbykscz1PYmplY3QuYXNzaWduKHtkZWZhdWx0SGVpZ2h0OjYwMCxkZWZhdWx0V2lkdGg6NTUwfSxpKTtyZXR1cm4gYXdhaXQgSi5hdXRob3JpemUobixhLHMpLHtjbGllbnRJZDp0LGN1cnJlbnRVc2VyOkouY3VycmVudFVzZXIsZGlzY29ubmVjdDpKLmNsb3NlLGV4ZWN1dGVBcGlSZXF1ZXN0OlAoSikscHJvdmlkZXI6Six0ZW5hbnRJZDplfX0sSz1hc3luYyh0LGUsbixyKT0+e2lmKCF0KXRocm93IG5ldyBCKFwiSW52YWxpZCBjbGllbnQgSURcIik7aWYoIWUpdGhyb3cgbmV3IEIoXCJJbnZhbGlkIHRlbmFudCBJRFwiKTtpZighbil0aHJvdyBuZXcgQihcIkludmFsaWQgcmVkaXJlY3QgVVJJXCIpO2NvbnN0IG89YGh0dHBzOi8vbG9naW4ubWljcm9zb2Z0b25saW5lLmNvbS8ke2V9L3YyLjAvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gOyghSnx8Si5jbGllbnRJZCE9PXR8fEoudGVuYW50SWQhPT1lfHxKLnJlZGlyZWN0VXJpIT09bnx8KDAsTy54b3IpKEoucGVybWlzc2lvbnMscikubGVuZ3RoPjApJiYoSj1hd2FpdCBWLmluaXQobyxcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbVwiLHQsaixlLG4scikpfTtjbGFzcyBJbnRlcm9wRXJyb3IgZXh0ZW5kcyBBe2NvbnN0cnVjdG9yKHQsZSl7dmFyIG47c3VwZXIodD1udWxsIT09KG49bnVsbCE9dD90Om51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PW4/bjpcIkFuIGludGVyb3AgZXJyb3Igb2NjdXJyZWRcIixlKX19dmFyIFgsWixROyFmdW5jdGlvbih0KXt0LkFwcE5vdEZvdW5kPVwiQXBwTm90Rm91bmRcIix0LkVycm9yT25MYXVuY2g9XCJFcnJvck9uTGF1bmNoXCIsdC5BcHBUaW1lb3V0PVwiQXBwVGltZW91dFwiLHQuUmVzb2x2ZXJVbmF2YWlsYWJsZT1cIlJlc29sdmVyVW5hdmFpbGFibGVcIn0oWHx8KFg9e30pKSxmdW5jdGlvbih0KXt0Lk5vQXBwc0ZvdW5kPVwiTm9BcHBzRm91bmRcIix0LlJlc29sdmVyVW5hdmFpbGFibGU9XCJSZXNvbHZlclVuYXZhaWxhYmxlXCIsdC5SZXNvbHZlclRpbWVvdXQ9XCJSZXNvbHZlclRpbWVvdXRcIn0oWnx8KFo9e30pKSxmdW5jdGlvbih0KXt0Lk5vQ2hhbm5lbEZvdW5kPVwiTm9DaGFubmVsRm91bmRcIix0LkFjY2Vzc0RlbmllZD1cIkFjY2Vzc0RlbmllZFwiLHQuQ3JlYXRpb25GYWlsZWQ9XCJDcmVhdGlvbkZhaWxlZFwifShRfHwoUT17fSkpO3ZhciB0dCxldDt0dD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZSxuPU9iamVjdC5wcm90b3R5cGUscj1uLmhhc093blByb3BlcnR5LG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxpPW8uaXRlcmF0b3J8fFwiQEBpdGVyYXRvclwiLGE9by5hc3luY0l0ZXJhdG9yfHxcIkBAYXN5bmNJdGVyYXRvclwiLHM9by50b1N0cmluZ1RhZ3x8XCJAQHRvU3RyaW5nVGFnXCI7ZnVuY3Rpb24gdSh0LGUsbil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXt1KHt9LFwiXCIpfWNhdGNoKHQpe3U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW59fWZ1bmN0aW9uIGwodCxlLG4scil7dmFyIG89ZSYmZS5wcm90b3R5cGUgaW5zdGFuY2VvZiB5P2U6eSxpPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGE9bmV3IHgocnx8W10pO3JldHVybiBpLl9pbnZva2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWY7cmV0dXJuIGZ1bmN0aW9uKG8saSl7aWYocj09PWgpdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtpZihyPT09cCl7aWYoXCJ0aHJvd1wiPT09byl0aHJvdyBpO3JldHVybiBCKCl9Zm9yKG4ubWV0aG9kPW8sbi5hcmc9aTs7KXt2YXIgYT1uLmRlbGVnYXRlO2lmKGEpe3ZhciBzPUkoYSxuKTtpZihzKXtpZihzPT09Zyljb250aW51ZTtyZXR1cm4gc319aWYoXCJuZXh0XCI9PT1uLm1ldGhvZCluLnNlbnQ9bi5fc2VudD1uLmFyZztlbHNlIGlmKFwidGhyb3dcIj09PW4ubWV0aG9kKXtpZihyPT09Zil0aHJvdyByPXAsbi5hcmc7bi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyl9ZWxzZVwicmV0dXJuXCI9PT1uLm1ldGhvZCYmbi5hYnJ1cHQoXCJyZXR1cm5cIixuLmFyZyk7cj1oO3ZhciB1PWModCxlLG4pO2lmKFwibm9ybWFsXCI9PT11LnR5cGUpe2lmKHI9bi5kb25lP3A6ZCx1LmFyZz09PWcpY29udGludWU7cmV0dXJue3ZhbHVlOnUuYXJnLGRvbmU6bi5kb25lfX1cInRocm93XCI9PT11LnR5cGUmJihyPXAsbi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPXUuYXJnKX19fSh0LG4sYSksaX1mdW5jdGlvbiBjKHQsZSxuKXt0cnl7cmV0dXJue3R5cGU6XCJub3JtYWxcIixhcmc6dC5jYWxsKGUsbil9fWNhdGNoKHQpe3JldHVybnt0eXBlOlwidGhyb3dcIixhcmc6dH19fXQud3JhcD1sO3ZhciBmPVwic3VzcGVuZGVkU3RhcnRcIixkPVwic3VzcGVuZGVkWWllbGRcIixoPVwiZXhlY3V0aW5nXCIscD1cImNvbXBsZXRlZFwiLGc9e307ZnVuY3Rpb24geSgpe31mdW5jdGlvbiBtKCl7fWZ1bmN0aW9uIHYoKXt9dmFyIGI9e307YltpXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgdz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsXz13JiZ3KHcoQyhbXSkpKTtfJiZfIT09biYmci5jYWxsKF8saSkmJihiPV8pO3ZhciBFPXYucHJvdG90eXBlPXkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYik7ZnVuY3Rpb24gUyh0KXtbXCJuZXh0XCIsXCJ0aHJvd1wiLFwicmV0dXJuXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3UodCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24gQSh0LGUpe2Z1bmN0aW9uIG4obyxpLGEscyl7dmFyIHU9Yyh0W29dLHQsaSk7aWYoXCJ0aHJvd1wiIT09dS50eXBlKXt2YXIgbD11LmFyZyxmPWwudmFsdWU7cmV0dXJuIGYmJlwib2JqZWN0XCI9PXR5cGVvZiBmJiZyLmNhbGwoZixcIl9fYXdhaXRcIik/ZS5yZXNvbHZlKGYuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7bihcIm5leHRcIix0LGEscyl9KSwoZnVuY3Rpb24odCl7bihcInRocm93XCIsdCxhLHMpfSkpOmUucmVzb2x2ZShmKS50aGVuKChmdW5jdGlvbih0KXtsLnZhbHVlPXQsYShsKX0pLChmdW5jdGlvbih0KXtyZXR1cm4gbihcInRocm93XCIsdCxhLHMpfSkpfXModS5hcmcpfXZhciBvO3RoaXMuX2ludm9rZT1mdW5jdGlvbih0LHIpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gbmV3IGUoKGZ1bmN0aW9uKGUsbyl7bih0LHIsZSxvKX0pKX1yZXR1cm4gbz1vP28udGhlbihpLGkpOmkoKX19ZnVuY3Rpb24gSSh0LG4pe3ZhciByPXQuaXRlcmF0b3Jbbi5tZXRob2RdO2lmKHI9PT1lKXtpZihuLmRlbGVnYXRlPW51bGwsXCJ0aHJvd1wiPT09bi5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYobi5tZXRob2Q9XCJyZXR1cm5cIixuLmFyZz1lLEkodCxuKSxcInRocm93XCI9PT1uLm1ldGhvZCkpcmV0dXJuIGc7bi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPW5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpfXJldHVybiBnfXZhciBvPWMocix0Lml0ZXJhdG9yLG4uYXJnKTtpZihcInRocm93XCI9PT1vLnR5cGUpcmV0dXJuIG4ubWV0aG9kPVwidGhyb3dcIixuLmFyZz1vLmFyZyxuLmRlbGVnYXRlPW51bGwsZzt2YXIgaT1vLmFyZztyZXR1cm4gaT9pLmRvbmU/KG5bdC5yZXN1bHROYW1lXT1pLnZhbHVlLG4ubmV4dD10Lm5leHRMb2MsXCJyZXR1cm5cIiE9PW4ubWV0aG9kJiYobi5tZXRob2Q9XCJuZXh0XCIsbi5hcmc9ZSksbi5kZWxlZ2F0ZT1udWxsLGcpOmk6KG4ubWV0aG9kPVwidGhyb3dcIixuLmFyZz1uZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksbi5kZWxlZ2F0ZT1udWxsLGcpfWZ1bmN0aW9uIFQodCl7dmFyIGU9e3RyeUxvYzp0WzBdfTsxIGluIHQmJihlLmNhdGNoTG9jPXRbMV0pLDIgaW4gdCYmKGUuZmluYWxseUxvYz10WzJdLGUuYWZ0ZXJMb2M9dFszXSksdGhpcy50cnlFbnRyaWVzLnB1c2goZSl9ZnVuY3Rpb24gUih0KXt2YXIgZT10LmNvbXBsZXRpb258fHt9O2UudHlwZT1cIm5vcm1hbFwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiB4KHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzpcInJvb3RcIn1dLHQuZm9yRWFjaChULHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIEModCl7aWYodCl7dmFyIG49dFtpXTtpZihuKXJldHVybiBuLmNhbGwodCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5uZXh0KXJldHVybiB0O2lmKCFpc05hTih0Lmxlbmd0aCkpe3ZhciBvPS0xLGE9ZnVuY3Rpb24gbigpe2Zvcig7KytvPHQubGVuZ3RoOylpZihyLmNhbGwodCxvKSlyZXR1cm4gbi52YWx1ZT10W29dLG4uZG9uZT0hMSxuO3JldHVybiBuLnZhbHVlPWUsbi5kb25lPSEwLG59O3JldHVybiBhLm5leHQ9YX19cmV0dXJue25leHQ6Qn19ZnVuY3Rpb24gQigpe3JldHVybnt2YWx1ZTplLGRvbmU6ITB9fXJldHVybiBtLnByb3RvdHlwZT1FLmNvbnN0cnVjdG9yPXYsdi5jb25zdHJ1Y3Rvcj1tLG0uZGlzcGxheU5hbWU9dSh2LHMsXCJHZW5lcmF0b3JGdW5jdGlvblwiKSx0LmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIWUmJihlPT09bXx8XCJHZW5lcmF0b3JGdW5jdGlvblwiPT09KGUuZGlzcGxheU5hbWV8fGUubmFtZSkpfSx0Lm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCx2KToodC5fX3Byb3RvX189dix1KHQscyxcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUpLHR9LHQuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LFMoQS5wcm90b3R5cGUpLEEucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHQuQXN5bmNJdGVyYXRvcj1BLHQuYXN5bmM9ZnVuY3Rpb24oZSxuLHIsbyxpKXt2b2lkIDA9PT1pJiYoaT1Qcm9taXNlKTt2YXIgYT1uZXcgQShsKGUsbixyLG8pLGkpO3JldHVybiB0LmlzR2VuZXJhdG9yRnVuY3Rpb24obik/YTphLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6YS5uZXh0KCl9KSl9LFMoRSksdShFLHMsXCJHZW5lcmF0b3JcIiksRVtpXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxFLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IEdlbmVyYXRvcl1cIn0sdC5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gZS5yZXZlcnNlKCksZnVuY3Rpb24gbigpe2Zvcig7ZS5sZW5ndGg7KXt2YXIgcj1lLnBvcCgpO2lmKHIgaW4gdClyZXR1cm4gbi52YWx1ZT1yLG4uZG9uZT0hMSxufXJldHVybiBuLmRvbmU9ITAsbn19LHQudmFsdWVzPUMseC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOngscmVzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9ZSx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMuYXJnPWUsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goUiksIXQpZm9yKHZhciBuIGluIHRoaXMpXCJ0XCI9PT1uLmNoYXJBdCgwKSYmci5jYWxsKHRoaXMsbikmJiFpc05hTigrbi5zbGljZSgxKSkmJih0aGlzW25dPWUpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmRvbmUpdGhyb3cgdDt2YXIgbj10aGlzO2Z1bmN0aW9uIG8ocixvKXtyZXR1cm4gcy50eXBlPVwidGhyb3dcIixzLmFyZz10LG4ubmV4dD1yLG8mJihuLm1ldGhvZD1cIm5leHRcIixuLmFyZz1lKSwhIW99Zm9yKHZhciBpPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtpPj0wOy0taSl7dmFyIGE9dGhpcy50cnlFbnRyaWVzW2ldLHM9YS5jb21wbGV0aW9uO2lmKFwicm9vdFwiPT09YS50cnlMb2MpcmV0dXJuIG8oXCJlbmRcIik7aWYoYS50cnlMb2M8PXRoaXMucHJldil7dmFyIHU9ci5jYWxsKGEsXCJjYXRjaExvY1wiKSxsPXIuY2FsbChhLFwiZmluYWxseUxvY1wiKTtpZih1JiZsKXtpZih0aGlzLnByZXY8YS5jYXRjaExvYylyZXR1cm4gbyhhLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8YS5maW5hbGx5TG9jKXJldHVybiBvKGEuZmluYWxseUxvYyl9ZWxzZSBpZih1KXtpZih0aGlzLnByZXY8YS5jYXRjaExvYylyZXR1cm4gbyhhLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFsKXRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO2lmKHRoaXMucHJldjxhLmZpbmFsbHlMb2MpcmV0dXJuIG8oYS5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIG89dGhpcy50cnlFbnRyaWVzW25dO2lmKG8udHJ5TG9jPD10aGlzLnByZXYmJnIuY2FsbChvLFwiZmluYWxseUxvY1wiKSYmdGhpcy5wcmV2PG8uZmluYWxseUxvYyl7dmFyIGk9bzticmVha319aSYmKFwiYnJlYWtcIj09PXR8fFwiY29udGludWVcIj09PXQpJiZpLnRyeUxvYzw9ZSYmZTw9aS5maW5hbGx5TG9jJiYoaT1udWxsKTt2YXIgYT1pP2kuY29tcGxldGlvbjp7fTtyZXR1cm4gYS50eXBlPXQsYS5hcmc9ZSxpPyh0aGlzLm1ldGhvZD1cIm5leHRcIix0aGlzLm5leHQ9aS5maW5hbGx5TG9jLGcpOnRoaXMuY29tcGxldGUoYSl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoXCJ0aHJvd1wiPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVyblwiYnJlYWtcIj09PXQudHlwZXx8XCJjb250aW51ZVwiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzpcInJldHVyblwiPT09dC50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9dC5hcmcsdGhpcy5tZXRob2Q9XCJyZXR1cm5cIix0aGlzLm5leHQ9XCJlbmRcIik6XCJub3JtYWxcIj09PXQudHlwZSYmZSYmKHRoaXMubmV4dD1lKSxnfSxmaW5pc2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIG49dGhpcy50cnlFbnRyaWVzW2VdO2lmKG4uZmluYWxseUxvYz09PXQpcmV0dXJuIHRoaXMuY29tcGxldGUobi5jb21wbGV0aW9uLG4uYWZ0ZXJMb2MpLFIobiksZ319LGNhdGNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tlXTtpZihuLnRyeUxvYz09PXQpe3ZhciByPW4uY29tcGxldGlvbjtpZihcInRocm93XCI9PT1yLnR5cGUpe3ZhciBvPXIuYXJnO1Iobil9cmV0dXJuIG99fXRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LG4scil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOkModCkscmVzdWx0TmFtZTpuLG5leHRMb2M6cn0sXCJuZXh0XCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPWUpLGd9fSx0fSh0LmV4cG9ydHMpO3RyeXtyZWdlbmVyYXRvclJ1bnRpbWU9ZX1jYXRjaCh0KXtGdW5jdGlvbihcInJcIixcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikoZSl9fSx0dChldD17ZXhwb3J0czp7fX0sZXQuZXhwb3J0cyk7dmFyIG50OyFmdW5jdGlvbih0KXt0LkNvbnRhY3Q9XCJmZGMzLmNvbnRhY3RcIix0LkNvbnRhY3RMaXN0PVwiZmRjMy5jb250YWN0TGlzdFwiLHQuQ291bnRyeT1cImZkYzMuY291bnRyeVwiLHQuSW5zdHJ1bWVudD1cImZkYzMuaW5zdHJ1bWVudFwiLHQuT3JnYW5pemF0aW9uPVwiZmRjMy5vcmdhbml6YXRpb25cIix0LlBvcnRmb2xpbz1cImZkYzMucG9ydGZvbGlvXCIsdC5Qb3NpdGlvbj1cImZkYzMucG9zaXRpb25cIn0obnR8fChudD17fSkpO3ZhciBydDshZnVuY3Rpb24odCl7dC5TdGFydENhbGw9XCJTdGFydENhbGxcIix0LlN0YXJ0Q2hhdD1cIlN0YXJ0Q2hhdFwiLHQuVmlld0NoYXJ0PVwiVmlld0NoYXJ0XCIsdC5WaWV3Q29udGFjdD1cIlZpZXdDb250YWN0XCIsdC5WaWV3UXVvdGU9XCJWaWV3UXVvdGVcIix0LlZpZXdOZXdzPVwiVmlld05ld3NcIix0LlZpZXdJbnN0cnVtZW50PVwiVmlld0luc3RydW1lbnRcIix0LlZpZXdBbmFseXNpcz1cIlZpZXdBbmFseXNpc1wifShydHx8KHJ0PXt9KSk7Y29uc3Qgb3Q9XCJvZm1zMzY1YWN0aW9uXCIsaXQ9YXN5bmModCxlKT0+e3ZhciBuLHIsbyxpO2NvbnN0e2NoYXJ0SW1hZ2U6YSxjb250ZXh0OnN9PWUse3ByaWNlQ3VycmVudDp1LHByaWNlSGlnaDpsLHByaWNlTG93OmMscHJpY2VPcGVuOmZ9PWUsZD0obnVsbD09PShyPW51bGw9PT0obj1zLmlkKXx8dm9pZCAwPT09bj92b2lkIDA6bi50aWNrZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRyaW0oKSl8fHZvaWQgMCxoPShudWxsPT09KG89cy5uYW1lKXx8dm9pZCAwPT09bz92b2lkIDA6by50cmltKCkpfHx2b2lkIDA7bGV0IHAsZyx5LG0sdixiO2lmKG51bGwhPWUudGltZXN0YW1wfHwhYSl0cnl7cD1uZXcgRGF0ZShudWxsIT09KGk9ZS50aW1lc3RhbXApJiZ2b2lkIDAhPT1pP2k6RGF0ZS5ub3coKSkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQrWiQvLFwiKzAwOjAwXCIpfWNhdGNoKG4pe3QubG9nZ2VyLmxvZ1dhcm5pbmcoXCJJbnZhbGlkIHRpbWVzdGFtcFwiLGUudGltZXN0YW1wKX1pZihudWxsIT11JiZudWxsIT1mJiYoZz11LWYseT1nL2YqMTAwLHY9Zz4wP1wi4payXCI6ZzwwP1wi4pa8XCI6XCLil49cIixtPWc+MD9cIkdvb2RcIjpnPDA/XCJBdHRlbnRpb25cIjpcIldhcm5pbmdcIiksYSl7aWYoIS9eaW1hZ2VcXC8oZ2lmfGpwKGV8ZT9nKXxwbmcpJC9pLnRlc3QoYS50eXBlKSl0aHJvdyBuZXcgQihcIkNoYXJ0IGltYWdlIE1JTUUgdHlwZSBub3Qgc3VwcG9ydGVkXCIpO3RyeXtiPWF3YWl0KGFzeW5jIHQ9Pm5ldyBQcm9taXNlKCgoZSxuKT0+e2NvbnN0IHI9bmV3IEZpbGVSZWFkZXI7ci5vbmxvYWRlbmQ9KCk9PmUoci5yZXN1bHQpLHIub25lcnJvcj0oKT0+bihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY29udmVydCBibG9iIHRvIGJhc2U2NFwiKSksci5yZWFkQXNEYXRhVVJMKHQpfSkpKShhKX1jYXRjaCh0KXt0aHJvdyBuZXcgQShcIkZhaWxlZCB0byBjb252ZXJ0IGJsb2IgdG8gYmFzZTY0XCIsdCl9fWNvbnN0IHc9KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0UnVudGltZUluZm8oKSkubWFuaWZlc3RVcmwsXz17Y29udGV4dDpzLGludGVudDphP3J0LlZpZXdDaGFydDpydC5WaWV3SW5zdHJ1bWVudCx2ZXJzaW9uOlV9LEU9KFM9XywoMCwkLmNvbXByZXNzKShKU09OLnN0cmluZ2lmeShTKSx7b3V0cHV0RW5jb2Rpbmc6XCJCYXNlNjRcIn0pKTt2YXIgUztjb25zdCBJPWAke3d9PyQkJHtvdH09JHtlbmNvZGVVUklDb21wb25lbnQoRSl9YCxUPWBodHRwczovL3N0YXJ0Lm9wZW5maW4uY28vP21hbmlmZXN0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KEkpfWAsUj17JHNjaGVtYTpcImh0dHA6Ly9hZGFwdGl2ZWNhcmRzLmlvL3NjaGVtYXMvYWRhcHRpdmUtY2FyZC5qc29uXCIsdHlwZTpcIkFkYXB0aXZlQ2FyZFwiLHZlcnNpb246XCIxLjRcIixib2R5Olt7dHlwZTpcIkNvbHVtblNldFwiLGNvbHVtbnM6W3t0eXBlOlwiQ29sdW1uXCIsd2lkdGg6XCJzdHJldGNoXCIsaXRlbXM6W3t0eXBlOlwiQ29udGFpbmVyXCIsaXRlbXM6W3t0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpudWxsIT1oP2g6ZC50b1VwcGVyQ2FzZSgpLHdyYXA6ITAsc2l6ZTpcIkxhcmdlXCIsc3BhY2luZzpcIk5vbmVcIn0saCYme3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0OmQudG9VcHBlckNhc2UoKSxpc1N1YnRsZTohMCx3cmFwOiEwLHNwYWNpbmc6XCJOb25lXCJ9LHAmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpge3tEQVRFKCR7cH0sIFNIT1JUKX19IHt7VElNRSgke3B9KX19YCx3cmFwOiEwLHNpemU6XCJTbWFsbFwifV19XX0sbnVsbCE9dSYmIWImJnt0eXBlOlwiQ29sdW1uXCIsd2lkdGg6XCJzdHJldGNoXCIsaXRlbXM6W3t0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDp1LnRvRml4ZWQoMiksc2l6ZTpcIkV4dHJhTGFyZ2VcIix3cmFwOiEwLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwifSxudWxsIT1nJiZudWxsIT15JiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6YCR7dn0gJHtnLnRvRml4ZWQoMil9ICgke3kudG9GaXhlZCgyKX0lKWAsY29sb3I6bSxzcGFjaW5nOlwiTm9uZVwiLHdyYXA6ITAsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCJ9LChudWxsIT1mfHxudWxsIT1sfHxudWxsIT1jKSYme3R5cGU6XCJDb250YWluZXJcIixob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIixpdGVtczpbe3R5cGU6XCJDb2x1bW5TZXRcIixjb2x1bW5zOlt7dHlwZTpcIkNvbHVtblwiLHdpZHRoOlwic3RyZXRjaFwiLGl0ZW1zOltudWxsIT1mJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6XCJPcGVuXCIsd3JhcDohMCxob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIixzaXplOlwiU21hbGxcIix3ZWlnaHQ6XCJCb2xkZXJcIixzcGFjaW5nOlwiTm9uZVwifSxudWxsIT1sJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6XCJIaWdoXCIsd3JhcDohMCxzcGFjaW5nOlwiTm9uZVwiLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwiLHNpemU6XCJTbWFsbFwiLHdlaWdodDpcIkJvbGRlclwifSxudWxsIT1jJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6XCJMb3dcIix3cmFwOiEwLHNwYWNpbmc6XCJOb25lXCIsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCIsc2l6ZTpcIlNtYWxsXCIsd2VpZ2h0OlwiQm9sZGVyXCJ9XX0se3R5cGU6XCJDb2x1bW5cIix3aWR0aDpcImF1dG9cIixpdGVtczpbbnVsbCE9ZiYme3R5cGU6XCJUZXh0QmxvY2tcIix0ZXh0OmYudG9GaXhlZCgyKSx3cmFwOiEwLHNwYWNpbmc6XCJOb25lXCIsaG9yaXpvbnRhbEFsaWdubWVudDpcIlJpZ2h0XCIsc2l6ZTpcIlNtYWxsXCJ9LG51bGwhPWwmJnt0eXBlOlwiVGV4dEJsb2NrXCIsdGV4dDpsLnRvRml4ZWQoMiksd3JhcDohMCxzcGFjaW5nOlwiTm9uZVwiLGhvcml6b250YWxBbGlnbm1lbnQ6XCJSaWdodFwiLHNpemU6XCJTbWFsbFwifSxudWxsIT1jJiZ7dHlwZTpcIlRleHRCbG9ja1wiLHRleHQ6Yy50b0ZpeGVkKDIpLHdyYXA6ITAsc3BhY2luZzpcIk5vbmVcIixob3Jpem9udGFsQWxpZ25tZW50OlwiUmlnaHRcIixzaXplOlwiU21hbGxcIn1dfV19XSxzcGFjaW5nOlwiU21hbGxcIn1dfV19LGImJnt0eXBlOlwiSW1hZ2VcIix1cmw6XCIuLi9ob3N0ZWRDb250ZW50cy8xLyR2YWx1ZVwiLHNwYWNpbmc6XCJTbWFsbFwifSx7dHlwZTpcIkFjdGlvblNldFwiLGFjdGlvbnM6W3t0eXBlOlwiQWN0aW9uLk9wZW5VcmxcIix1cmw6VCx0aXRsZTpcIk9wZW5cIn1dfV19LHg9e2F0dGFjaG1lbnRzOlt7aWQ6XCIxXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi92bmQubWljcm9zb2Z0LmNhcmQuYWRhcHRpdmVcIixjb250ZW50OkpTT04uc3RyaW5naWZ5KHooUikpfV0sYm9keTp7Y29udGVudFR5cGU6XCJodG1sXCIsY29udGVudDonPGF0dGFjaG1lbnQgaWQ9XCIxXCI+PC9hdHRhY2htZW50Pid9LHN1bW1hcnk6XCJUZXN0IHN1bW1hcnlcIn07aWYoYil7Y29uc3RbLHQsZV09Wy4uLmIubWF0Y2goL15kYXRhOihbXjtdKyk7YmFzZTY0LCguKykkL2kpXTt4Lmhvc3RlZENvbnRlbnRzPVt7XCJAbWljcm9zb2Z0LmdyYXBoLnRlbXBvcmFyeUlkXCI6XCIxXCIsY29udGVudEJ5dGVzOmUsY29udGVudFR5cGU6dH1dfXJldHVybiB4fSxhdD10PT50P1wibXN0ZWFtczpcIjpcImh0dHBzOi8vdGVhbXMubWljcm9zb2Z0LmNvbVwiLHN0PWFzeW5jIHQ9Pntjb25zdCBlPW51bGw9PXQ/dm9pZCAwOnRbb3RdO2lmKGUpdHJ5e2NvbnN0IHQ9KHQ9Pntjb25zdCBlPSgwLCQuZGVjb21wcmVzcykodCx7aW5wdXRFbmNvZGluZzpcIkJhc2U2NFwiLG91dHB1dEVuY29kaW5nOlwiU3RyaW5nXCJ9KTtyZXR1cm4gSlNPTi5wYXJzZShlKX0pKGUpLHtjb250ZXh0Om4saW50ZW50OnJ9PXQsbz17Y29udGV4dDpuLG5hbWU6cn07cmV0dXJuIGF3YWl0IGZpbi5tZS5pbnRlcm9wLmZpcmVJbnRlbnQobyksb31jYXRjaCh0KXtjb25zdCBlPXQubWVzc2FnZTt0aHJvdyBuZXcgQShcIkZhaWxlZCB0byBkZWNvbXByZXNzIHNoYXJlIHBheWxvYWRcIisoZT9gICgke2V9KWA6XCJcIiksdCl9fSx1dD1hc3luYyh0LGUsbik9Pntjb25zdCByPWF3YWl0KGFzeW5jKHQsZSxuPVtdKT0+e3RyeXtjb25zdCByPVtcImlkXCIsLi4ubl0uam9pbihcIixcIikse2RhdGE6b309YXdhaXQgdC5leGVjdXRlQXBpUmVxdWVzdChgL3YxLjAvdGVhbXMvJHtlbmNvZGVVUklDb21wb25lbnQoZSl9PyRzZWxlY3Q9JHtyfWApO3JldHVybiBvfWNhdGNoKHQpe2lmKDQwNCE9PXQuc3RhdHVzKXRocm93IHR9fSkodCxlLFtcImRpc3BsYXlOYW1lXCJdKTtpZighcilyZXR1cm47bGV0IG87aWYodC5sb2dnZXIubG9nSW5mbyhcIlJlc29sdmVkIHRlYW1cIixyKSxuKXtpZihvPWF3YWl0KGFzeW5jKHQsZSxuLHI9W10pPT57dHJ5e2NvbnN0IG89W1wiaWRcIiwuLi5yXS5qb2luKFwiLFwiKSx7ZGF0YTppfT1hd2FpdCB0LmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC90ZWFtcy8ke2VuY29kZVVSSUNvbXBvbmVudChuKX0vY2hhbm5lbHMvJHtlbmNvZGVVUklDb21wb25lbnQoZSl9PyRzZWxlY3Q9JHtvfWApO3JldHVybiBpfWNhdGNoKHQpe2lmKDQwNCE9PXQuc3RhdHVzKXRocm93IHR9fSkodCxuLGUsW1wiZGlzcGxheU5hbWVcIl0pLCFvKXJldHVybiB2b2lkIHQubG9nZ2VyLmxvZ1dhcm5pbmcoYENvdWxkIG5vdCByZXNvbHZlIGNoYW5uZWwgZnJvbSBpZCAke259YCl9ZWxzZXt0LmxvZ2dlci5sb2dJbmZvKFwiTm8gY2hhbm5lbCBpZCBzdXBwbGllZCwgdXNpbmcgcHJpbWFyeSBjaGFubmVsXCIpO2NvbnN0e2RhdGE6bn09YXdhaXQgdC5leGVjdXRlQXBpUmVxdWVzdChgL3YxLjAvdGVhbXMvJHtlbmNvZGVVUklDb21wb25lbnQoZSl9L3ByaW1hcnlDaGFubmVsPyRzZWxlY3Q9ZGlzcGxheU5hbWUsaWRgKTtvPW59Y29uc3QgaT17Y2hhbm5lbElkOm8uaWQsY2hhbm5lbE5hbWU6by5kaXNwbGF5TmFtZSx0ZWFtSWQ6ci5pZCx0ZWFtTmFtZTpyLmRpc3BsYXlOYW1lfTtyZXR1cm4gdC5sb2dnZXIubG9nSW5mbyhcIlJlc29sdmVkIHRlYW0gY2hhbm5lbFwiLGUsbixpKSxpfTtjbGFzcyBsdHtjb25zdHJ1Y3Rvcih0LGU9ITApe3RoaXMubG9nZ2VyPXQucHJvdmlkZXIubG9nZ2VyLHRoaXMucHJvdmlkZXI9dC5wcm92aWRlcix0aGlzLnVzZU1zVGVhbXNQcm90b2NvbD1lLHRoaXMucmVnaXN0ZXJJbnRlbnRIYW5kbGVycz10aGlzLnJlZ2lzdGVySW50ZW50SGFuZGxlcnMuYmluZCh0aGlzKSx0aGlzLnNoYXJlPXRoaXMuc2hhcmUuYmluZCh0aGlzKSx0aGlzLnN0YXJ0Q2FsbD10aGlzLnN0YXJ0Q2FsbC5iaW5kKHRoaXMpLHRoaXMuc3RhcnRDaGF0PXRoaXMuc3RhcnRDaGF0LmJpbmQodGhpcyksdGhpcy5lbmFibGVTaGFyZVBheWxvYWRIYW5kbGVyKCksRihILlRlYW1zLHRoaXMubG9nZ2VyKX1hc3luYyBlbmFibGVTaGFyZVBheWxvYWRIYW5kbGVyKCl7Y29uc3R7aW5pdGlhbE9wdGlvbnM6dH09YXdhaXQgZmluLkFwcGxpY2F0aW9uLmdldEN1cnJlbnRTeW5jKCkuZ2V0SW5mbygpLHt1c2VyQXBwQ29uZmlnQXJnczplfT10LG49YXdhaXQgc3QoZSk7biYmdGhpcy5sb2dnZXIubG9nSW5mbyhcIkZpcmluZyBpbnRlbnRcIixuKSxmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5hZGRMaXN0ZW5lcihcInJ1bi1yZXF1ZXN0ZWRcIiwoYXN5bmMgdD0+e3RyeXtjb25zdCBlPWF3YWl0IHN0KHQudXNlckFwcENvbmZpZ0FyZ3MpO2UmJnRoaXMubG9nZ2VyLmxvZ0luZm8oXCJGaXJpbmcgaW50ZW50XCIsZSl9Y2F0Y2godCl7dGhpcy5sb2dnZXIubG9nRXJyb3IodCl9fSkpfWFzeW5jIG9wZW5VcmwodCl7dGhpcy5sb2dnZXIubG9nSW5mbyhcIm9wZW5Vcmwgc3RhcnRlZFwiLHQpO3RyeXtjb25zdCBlPXRoaXMudXNlTXNUZWFtc1Byb3RvY29sP3QucmVwbGFjZSgvXmh0dHBzOlxcL1xcL3RlYW1zLm1pY3Jvc29mdC5jb21cXC8vaSxcIm1zdGVhbXM6XCIpOnQ7dGhpcy5sb2dnZXIubG9nSW5mbyhcIk9wZW5pbmcgdXJsXCIsZSksYXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIoZSksdGhpcy5sb2dnZXIubG9nSW5mbyhcIm9wZW5VcmwgY29tcGxldGVkXCIpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKHQpLHR9fWFzeW5jIHJlZ2lzdGVySW50ZW50SGFuZGxlcnMoKXtpZih0aGlzLmxvZ2dlci5sb2dJbmZvKFwicmVnaXN0ZXJJbnRlbnRIYW5kbGVycyBzdGFydGVkXCIpLHRoaXMudW5zdWJzY3JpYmVJbnRlbnRIYW5kbGVycylyZXR1cm57dW5zdWJzY3JpYmU6dGhpcy51bnN1YnNjcmliZUludGVudEhhbmRsZXJzfTt0cnl7YXdhaXQgZmluLm1lLmludGVyb3AuZ2V0Q29udGV4dEdyb3VwcygpO2NvbnN0IHQ9YXdhaXQgZmluLm1lLmludGVyb3AucmVnaXN0ZXJJbnRlbnRIYW5kbGVyKChhc3luYyB0PT57dHJ5e2F3YWl0KCh0LGUpPT5hc3luYyBuPT57dmFyIHIsbyxpLGE7aWYodC5sb2dnZXIubG9nSW5mbyhcImhhbmRsZVN0YXJ0Q2FsbEludGVudCBzdGFydGVkXCIsbiksKG51bGw9PT0ocj1uLm5hbWUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRvTG93ZXJDYXNlKCkpIT09cnQuU3RhcnRDYWxsLnRvTG93ZXJDYXNlKCkpdGhyb3cgbmV3IEEoYFVuZXhwZWN0ZWQgaW50ZW50IHR5cGU6ICR7bi5uYW1lfWApO2NvbnN0e2NvbnRleHQ6c309bjtpZigobnVsbD09PShvPXMudHlwZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9Mb3dlckNhc2UoKSkhPT1udC5Db250YWN0LnRvTG93ZXJDYXNlKCkmJihudWxsPT09KGk9cy50eXBlKXx8dm9pZCAwPT09aT92b2lkIDA6aS50b0xvd2VyQ2FzZSgpKSE9PW50LkNvbnRhY3RMaXN0LnRvTG93ZXJDYXNlKCkpdGhyb3cgbmV3IEEoYFVuZXhwZWN0ZWQgY29udGV4dCB0eXBlOiAke3MudHlwZX1gKTtjb25zdCB1PShudWxsPT09KGE9cy50eXBlKXx8dm9pZCAwPT09YT92b2lkIDA6YS50b0xvd2VyQ2FzZSgpKT09PW50LkNvbnRhY3RMaXN0LnRvTG93ZXJDYXNlKCk/cy5jb250YWN0cy5tYXAoKHQ9PnQuaWQuZW1haWwpKS5maWx0ZXIoQm9vbGVhbik6W3MuaWQuZW1haWxdLGw9YXdhaXQgZSh1KTt0LmxvZ2dlci5sb2dJbmZvKFwiaGFuZGxlU3RhcnRDYWxsSW50ZW50IGNvbXBsZXRlZFwiLGwpfSkodGhpcy5wcm92aWRlcix0aGlzLnN0YXJ0Q2FsbCkodCl9Y2F0Y2godCl7dGhyb3cgdGhpcy5sb2dnZXIubG9nRXJyb3IodCksdH19KSxcIlN0YXJ0Q2FsbFwiKSxlPWF3YWl0IGZpbi5tZS5pbnRlcm9wLnJlZ2lzdGVySW50ZW50SGFuZGxlcigoYXN5bmMgdD0+e3RyeXthd2FpdCgodCxlKT0+YXN5bmMgbj0+e3ZhciByLG8saSxhO2lmKHQubG9nZ2VyLmxvZ0luZm8oXCJoYW5kbGVTdGFydENoYXRJbnRlbnQgc3RhcnRlZFwiLG4pLChudWxsPT09KHI9bi5uYW1lKXx8dm9pZCAwPT09cj92b2lkIDA6ci50b0xvd2VyQ2FzZSgpKSE9PXJ0LlN0YXJ0Q2hhdC50b0xvd2VyQ2FzZSgpKXRocm93IG5ldyBBKGBVbmV4cGVjdGVkIGludGVudCB0eXBlOiAke24ubmFtZX1gKTtjb25zdHtjb250ZXh0OnN9PW47aWYoKG51bGw9PT0obz1zLnR5cGUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnRvTG93ZXJDYXNlKCkpIT09bnQuQ29udGFjdC50b0xvd2VyQ2FzZSgpJiYobnVsbD09PShpPXMudHlwZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkudG9Mb3dlckNhc2UoKSkhPT1udC5Db250YWN0TGlzdC50b0xvd2VyQ2FzZSgpKXRocm93IG5ldyBBKGBVbmV4cGVjdGVkIGNvbnRleHQgdHlwZTogJHtzLnR5cGV9YCk7Y29uc3QgdT0obnVsbD09PShhPXMudHlwZSl8fHZvaWQgMD09PWE/dm9pZCAwOmEudG9Mb3dlckNhc2UoKSk9PT1udC5Db250YWN0TGlzdC50b0xvd2VyQ2FzZSgpP3MuY29udGFjdHMubWFwKCh0PT50LmlkLmVtYWlsKSkuZmlsdGVyKEJvb2xlYW4pOltzLmlkLmVtYWlsXSxsPWF3YWl0IGUoe2VtYWlsQWRkcmVzc2VzOnUsdG9waWNOYW1lOnMubmFtZX0pO3QubG9nZ2VyLmxvZ0luZm8oXCJoYW5kbGVTdGFydENoYXRJbnRlbnQgY29tcGxldGVkXCIsbCl9KSh0aGlzLnByb3ZpZGVyLHRoaXMuc3RhcnRDaGF0KSh0KX1jYXRjaCh0KXt0aHJvdyB0aGlzLmxvZ2dlci5sb2dFcnJvcih0KSx0fX0pLFwiU3RhcnRDaGF0XCIpO3JldHVybiB0aGlzLnVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnM9YXN5bmMoKT0+e3RoaXMubG9nZ2VyLmxvZ0luZm8oXCJ1bnN1YnNjcmliZUludGVudEhhbmRsZXJzIHN0YXJ0ZWRcIiksYXdhaXQgdC51bnN1YnNjcmliZSgpLGF3YWl0IGUudW5zdWJzY3JpYmUoKSx0aGlzLnVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnM9dm9pZCAwLHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJ1bnN1YnNjcmliZUludGVudEhhbmRsZXJzIGNvbXBsZXRlZFwiKX0sdGhpcy5sb2dnZXIubG9nSW5mbyhcInJlZ2lzdGVySW50ZW50SGFuZGxlcnMgY29tcGxldGVkXCIpLHt1bnN1YnNjcmliZTp0aGlzLnVuc3Vic2NyaWJlSW50ZW50SGFuZGxlcnN9fWNhdGNoKHQpe2NvbnN0IGU9bmV3IEludGVyb3BFcnJvcih0Lm1lc3NhZ2UpO3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKGUpLGV9fWFzeW5jIHNoYXJlKHQpe3ZhciBlLG4scixvO3RoaXMubG9nZ2VyLmxvZ0luZm8oXCJzaGFyZSBzdGFydGVkXCIsdCk7dHJ5e2lmKCF0LnRhcmdldCl0aHJvdyBuZXcgQihcIlRhcmdldCBub3QgcHJvdmlkZWRcIik7aWYoKG51bGw9PT0oZT10LmNvbnRleHQpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnR5cGUudG9Mb3dlckNhc2UoKSkhPT1udC5JbnN0cnVtZW50LnRvTG93ZXJDYXNlKCkpdGhyb3cgbmV3IEIoXCJVbnN1cHBvcnRlZCBjb250ZXh0IHR5cGVcIik7aWYoIShudWxsPT09KHI9bnVsbD09PShuPXQuY29udGV4dCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRpY2tlcikpdGhyb3cgbmV3IEIoXCJUaWNrZXIgbm90IHByb3ZpZGVkXCIpO2lmKCF0LmNoYXJ0SW1hZ2UmJm51bGw9PXQucHJpY2VDdXJyZW50KXRocm93IG5ldyBCKFwiQ3VycmVudCBwcmljZSBub3QgcHJvdmlkZWRcIik7Y29uc3QgaT1udWxsPT09KG89dC5zaG93TWVzc2FnZSl8fHZvaWQgMD09PW98fG8sYT1hd2FpdCBpdCh0aGlzLnByb3ZpZGVyLHQpO2xldCBzO2lmKEFycmF5LmlzQXJyYXkodC50YXJnZXQpKXtjb25zdHt0YXJnZXQ6ZX09dCxuPWF3YWl0IFcodGhpcy5wcm92aWRlcixlLFtcImRpc3BsYXlOYW1lXCIsXCJtYWlsXCJdKSxyPW4uZmlsdGVyKEJvb2xlYW4pO2lmKCFyLmxlbmd0aClyZXR1cm4gdGhpcy5sb2dnZXIubG9nV2FybmluZyhcIkNvdWxkIG5vdCByZXNvbHZlIGFueSB2YWxpZCB1c2VycyBmcm9tIGVtYWlsIGFkZHJlc3Nlc1wiLGUpLGUubWFwKCgoKT0+e30pKTtjb25zdHtpZDpvLHdlYlVybDp1fT1hd2FpdChhc3luYyh0LGUpPT57Y29uc3Qgbj17Y2hhdFR5cGU6ZS5sZW5ndGg+Mj9cImdyb3VwXCI6XCJvbmVPbk9uZVwiLG1lbWJlcnM6ZS5tYXAoKGU9Pih7XCJAb2RhdGEudHlwZVwiOlwiI21pY3Jvc29mdC5ncmFwaC5hYWRVc2VyQ29udmVyc2F0aW9uTWVtYmVyXCIscm9sZXM6cShlKT9bXCJndWVzdFwiXTpbXCJvd25lclwiXSxcInVzZXJAb2RhdGEuYmluZFwiOmAke3QuYXBpT3JpZ2lufS92MS4wL3VzZXJzKCcke2UuaWR9JylgfSkpKX0se2RhdGE6cn09YXdhaXQgdC5leGVjdXRlQXBpUmVxdWVzdChcIi92MS4wL2NoYXRzXCIsXCJQT1NUXCIsbik7cmV0dXJuIHJ9KSh0aGlzLnByb3ZpZGVyLFt0aGlzLnByb3ZpZGVyLmN1cnJlbnRVc2VyLC4uLnJdKSx7ZGF0YTpsfT1hd2FpdCB0aGlzLnByb3ZpZGVyLmV4ZWN1dGVBcGlSZXF1ZXN0KGAvdjEuMC9jaGF0cy8ke2VuY29kZVVSSUNvbXBvbmVudChvKX0vbWVzc2FnZXNgLFwiUE9TVFwiLGEpO3RoaXMubG9nZ2VyLmxvZ0luZm8oXCJTZW50IGNoYXQgbWVzc2FnZVwiLGwpLGkmJmF3YWl0IHRoaXMub3BlblVybCh1KSxzPUQobil9ZWxzZXtjb25zdHt0YXJnZXQ6ZX09dCxuPWF3YWl0IHV0KHRoaXMucHJvdmlkZXIsZS50ZWFtSWQsZS5jaGFubmVsSWQpO2lmKCFuKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLmxvZ1dhcm5pbmcoXCJDb3VsZCBub3QgcmVzb2x2ZSB0ZWFtL2NoYW5uZWxcIixlLnRlYW1JZCxlLmNoYW5uZWxJZCk7Y29uc3R7Y2hhbm5lbElkOnIsdGVhbUlkOm99PW4se2RhdGE6dX09YXdhaXQgdGhpcy5wcm92aWRlci5leGVjdXRlQXBpUmVxdWVzdChgL3YxLjAvdGVhbXMvJHtlbmNvZGVVUklDb21wb25lbnQobyl9L2NoYW5uZWxzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHIpfS9tZXNzYWdlc2AsXCJQT1NUXCIsYSk7dGhpcy5sb2dnZXIubG9nSW5mbyhcIlNlbnQgY2hhdCBtZXNzYWdlXCIsdSksaSYmYXdhaXQgdGhpcy5vcGVuVXJsKHUud2ViVXJsKSxzPW59cmV0dXJuIHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJzaGFyZSBjb21wbGV0ZWRcIixzKSxzfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKHQpLHR9fWFzeW5jIHN0YXJ0Q2FsbCh0PVtdLGU9ITEpe3RoaXMubG9nZ2VyLmxvZ0luZm8oXCJzdGFydENhbGwgc3RhcnRlZFwiLHQpO3RyeXtsZXQgbj1gJHthdCh0aGlzLnVzZU1zVGVhbXNQcm90b2NvbCl9L2wvY2FsbC8wLzA/YDtjb25zdCByPWF3YWl0IFcodGhpcy5wcm92aWRlcix0LFtcImRpc3BsYXlOYW1lXCIsXCJtYWlsXCJdKSxvPXIuZmlsdGVyKEJvb2xlYW4pLm1hcCgodD0+ZW5jb2RlVVJJQ29tcG9uZW50KHQudXNlclByaW5jaXBhbE5hbWUpKSk7aWYoIW8ubGVuZ3RoKXJldHVybiB0aGlzLmxvZ2dlci5sb2dXYXJuaW5nKFwiQ291bGQgbm90IHJlc29sdmUgYW55IHZhbGlkIHVzZXJzIGZyb20gc3VwcGxpZWQgZW1haWxzXCIsdCksdC5tYXAoKCgpPT57fSkpO24rPWB1c2Vycz0ke28uam9pbihcIixcIil9JndpdGhWaWRlbz0ke2V9YCx0aGlzLmxvZ2dlci5sb2dJbmZvKFwiT3BlbmluZyBUZWFtc1wiLG4pLGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKG4pO2NvbnN0IGk9RChyKTtyZXR1cm4gdGhpcy5sb2dnZXIubG9nSW5mbyhcInN0YXJ0Q2FsbCBjb21wbGV0ZWRcIixpKSxpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmxvZ0Vycm9yKHQpLHR9fWFzeW5jIHN0YXJ0Q2hhdCh0KXt0aGlzLmxvZ2dlci5sb2dJbmZvKFwic3RhcnRDaGF0IHN0YXJ0ZWRcIix0KTt0cnl7bGV0IGUsbjtpZihcInRlYW1JZFwiaW4gdCl7Y29uc3R7dGVhbUlkOnIsY2hhbm5lbElkOm99PXQsaT1hd2FpdCB1dCh0aGlzLnByb3ZpZGVyLHIsbyk7aWYoIWkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIubG9nV2FybmluZyhcIkNvdWxkIG5vdCByZXNvbHZlIHRlYW0vY2hhbm5lbFwiLHIsbyk7ZT1gJHthdCh0aGlzLnVzZU1zVGVhbXNQcm90b2NvbCl9L2wvY2hhbm5lbC8ke2VuY29kZVVSSUNvbXBvbmVudChpLmNoYW5uZWxJZCl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KGkuY2hhbm5lbE5hbWUpfT9ncm91cElkPSR7aS50ZWFtSWR9JnRlbmFudElkPSR7dGhpcy5wcm92aWRlci50ZW5hbnRJZH1gLG49aX1lbHNle2NvbnN0e2VtYWlsQWRkcmVzc2VzOnIsbWVzc2FnZTpvLHRvcGljTmFtZTppfT10O2U9YCR7YXQodGhpcy51c2VNc1RlYW1zUHJvdG9jb2wpfS9sL2NoYXQvMC8wP2A7Y29uc3QgYT1hd2FpdCBXKHRoaXMucHJvdmlkZXIscixbXCJkaXNwbGF5TmFtZVwiLFwibWFpbFwiXSkscz1hLmZpbHRlcihCb29sZWFuKS5tYXAoKHQ9PmVuY29kZVVSSUNvbXBvbmVudCh0LnVzZXJQcmluY2lwYWxOYW1lKSkpO2lmKCFzLmxlbmd0aClyZXR1cm4gdGhpcy5sb2dnZXIubG9nV2FybmluZyhcIkNvdWxkIG5vdCByZXNvbHZlIGFueSB2YWxpZCB1c2VycyBmcm9tIGVtYWlsIGFkZHJlc3Nlc1wiLHIpLHIubWFwKCgoKT0+e30pKTtlKz1gdXNlcnM9JHtzLmpvaW4oXCIsXCIpfWAsaSYmKGUrPWAmdG9waWNOYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGkpfWApLG8mJihlKz1gJm1lc3NhZ2U9JHtlbmNvZGVVUklDb21wb25lbnQobyl9YCksbj1EKGEpfXJldHVybiB0aGlzLmxvZ2dlci5sb2dJbmZvKFwiT3BlbmluZyBUZWFtc1wiLGUpLGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGUpLHRoaXMubG9nZ2VyLmxvZ0luZm8oXCJzdGFydENoYXQgY29tcGxldGVkXCIsbiksbn1jYXRjaCh0KXt0aHJvdyB0aGlzLmxvZ2dlci5sb2dFcnJvcih0KSx0fX19fSw5MTooKT0+e319LGU9e307ZnVuY3Rpb24gbihyKXt2YXIgbz1lW3JdO2lmKHZvaWQgMCE9PW8pcmV0dXJuIG8uZXhwb3J0czt2YXIgaT1lW3JdPXtpZDpyLGxvYWRlZDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxuKSxpLmxvYWRlZD0hMCxpLmV4cG9ydHN9bi5jPWUsbi5kPSh0LGUpPT57Zm9yKHZhciByIGluIGUpbi5vKGUscikmJiFuLm8odCxyKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7ZW51bWVyYWJsZTohMCxnZXQ6ZVtyXX0pfSxuLmc9ZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsVGhpcylyZXR1cm4gZ2xvYmFsVGhpczt0cnl7cmV0dXJuIHRoaXN8fG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl9Y2F0Y2godCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdylyZXR1cm4gd2luZG93fX0oKSxuLm89KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpLG4ubm1kPXQ9Pih0LnBhdGhzPVtdLHQuY2hpbGRyZW58fCh0LmNoaWxkcmVuPVtdKSx0KTt2YXIgcj1uKG4ucz01NCksbz1yLk1TLGk9ci5jRixhPXIuQUsscz1yLk1fLHU9ci5jWCxsPXIuQlQsYz1yLl9XLGY9ci5QZyxkPXIuJGosaD1yLlUkLHA9ci5VNztleHBvcnR7byBhcyBBcGlFcnJvcixpIGFzIEFwaVJlcXVlc3RFcnJvcixhIGFzIEF1dGhUb2tlbkV4cGlyZWRFcnJvcixzIGFzIEF1dGhvcml6YXRpb25FcnJvcix1IGFzIEluaXRpYWxpemF0aW9uRXJyb3IsbCBhcyBJbnRlcm9wRXJyb3IsYyBhcyBQYXJhbWV0ZXJFcnJvcixmIGFzIFRlYW1zQ29ubmVjdGlvbixkIGFzIGNvbm5lY3QsaCBhcyBkaXNhYmxlTG9nZ2luZyxwIGFzIGVuYWJsZUxvZ2dpbmd9OyIsIigoKT0+e3ZhciBlPXs4NDc6KGUsdCk9Pnt2YXIgYT17MjM0NjpmdW5jdGlvbihlLHQsYSl7dmFyIG49dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXRNb3N0UmVhZGFibGU9dC5kYXJrZW5Db2xvcj10LmxpZ2h0ZW5Db2xvcj12b2lkIDA7Y29uc3Qgcj1uKGEoNjUzNSkpO3QubGlnaHRlbkNvbG9yPShlLHQpPT5vKGUsXCJsaWdodGVuXCIsdCksdC5kYXJrZW5Db2xvcj0oZSx0KT0+byhlLFwiZGFya2VuXCIsdCk7Y29uc3Qgbz0oZSx0LGEpPT57aWYoYSYmKGE8MHx8YT4xMDApKXRocm93IG5ldyBFcnJvcihgJHthfSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwYCk7cmV0dXJuKDAsci5kZWZhdWx0KShlKVt0XShhKS50b1N0cmluZygpfTt0LmdldE1vc3RSZWFkYWJsZT0oZSx0KT0+ci5kZWZhdWx0Lm1vc3RSZWFkYWJsZShlLHQpLnRvSGV4U3RyaW5nKCl9LDIzMTc6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lkljb25TaXplPXQuVHJhbnNpdGlvbj10LkxpbmVIZWlnaHQ9dC5Gb250V2VpZ2h0PXQuRm9udFNpemU9dC5Gb250RmFtaWx5PXQuU2hhZG93PXQuUmFkaXVzPXQuVW5pdFB4PXQuVW5pdD10LlNpemVOYW1lPXQuU2l6ZT10LkNvbG9yPXZvaWQgMCx0LkNvbG9yPXt3aGl0ZTpcIiNGRkZGRkZcIixsaWdodEdyYXkxOlwiI0ZBRkJGRVwiLGxpZ2h0R3JheTI6XCIjRjNGNUY4XCIsbGlnaHRHcmF5MzpcIiNFQ0VFRjFcIixsaWdodEdyYXk0OlwiI0REREZFNFwiLGxpZ2h0R3JheTU6XCIjQzlDQkQyXCIsbmV1dHJhbEdyYXk6XCIjN0Q4MDhBXCIsbmV1dHJhbEdyYXk4MDpcInJnYmEoMTI1LDEyOCwxMzgsMC44KVwiLHNpbHZlckdyYXk6XCIjQzBDMUMyXCIsZGFya0dyYXkxOlwiIzUzNTY1RlwiLGRhcmtHcmF5MjpcIiMzODNBNDBcIixkYXJrR3JheTM6XCIjMkYzMTM2XCIsZGFya0dyYXk0OlwiIzI0MjYyQlwiLGRhcmtHcmF5NTpcIiMxRTFGMjNcIixkYXJrR3JheTY6XCIjMTExMjE0XCIsb3BlbkZpbkRhcmtlc3Q6XCIjM0QzOUNEXCIsb3BlbkZpbkRhcmtlcjpcIiM0NjQyRTBcIixvcGVuRmluOlwiIzUwNENGRlwiLG9wZW5GaW5MaWdodDpcIiM1MjU0RkJcIixvcGVuRmluTGlnaHRlcjpcIiM1QzVFRkVcIixvcGVuRmluTGlnaHRlc3Q6XCIjNjg2NEZGXCIsZnVuY3Rpb25hbDE6XCIjMjA3NzM1XCIsZnVuY3Rpb25hbDI6XCIjNDZDOEYxXCIsZnVuY3Rpb25hbDM6XCIjMEE3NkQzXCIsZnVuY3Rpb25hbDQ6XCIjNkNBREU1XCIsZnVuY3Rpb25hbDU6XCIjMEE3NkQzXCIsZnVuY3Rpb25hbDY6XCIjODgyQkZFXCIsZnVuY3Rpb25hbDc6XCIjRjMxODE4XCIsZnVuY3Rpb25hbDg6XCIjQzkzNDAwXCIsZnVuY3Rpb25hbDk6XCIjRkY1RTYwXCIsZnVuY3Rpb25hbDEwOlwiI0Y0OEYwMFwiLHB1cnBsZTpcIiM4QzYxRkZcIixsaWdodGJsdWU6XCIjMzZDM0ZFXCIsYXF1YTpcIiMwMENDODhcIix5ZWxsb3c6XCIjRkZFQjAwXCIsc2FsbW9uOlwiI0ZGOEM0Q1wiLHBpbms6XCIjRkY1RTYwXCIsbGlnaHRwaW5rOlwiI0ZGOEZCOFwiLHdoaXRlMDA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMClcIix3aGl0ZTEwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjEpXCIsd2hpdGUyMDpcInJnYmEoMjU1LDI1NSwyNTUsMC4yKVwiLHdoaXRlMzA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuMylcIix3aGl0ZTQwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjQpXCIsd2hpdGU1MDpcInJnYmEoMjU1LDI1NSwyNTUsMC41KVwiLHdoaXRlNjA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuNilcIix3aGl0ZTcwOlwicmdiYSgyNTUsMjU1LDI1NSwwLjcpXCIsd2hpdGU4MDpcInJnYmEoMjU1LDI1NSwyNTUsMC44KVwiLHdoaXRlOTA6XCJyZ2JhKDI1NSwyNTUsMjU1LDAuOSlcIixibGFjazAwOlwicmdiYSgwLDAsMCwwLjApXCIsYmxhY2sxMDpcInJnYmEoMCwwLDAsMC4xKVwiLGJsYWNrMjA6XCJyZ2JhKDAsMCwwLDAuMilcIixibGFjazMwOlwicmdiYSgwLDAsMCwwLjMpXCIsYmxhY2s0MDpcInJnYmEoMCwwLDAsMC40KVwiLGJsYWNrNTA6XCJyZ2JhKDAsMCwwLDAuNSlcIixibGFjazYwOlwicmdiYSgwLDAsMCwwLjYpXCIsYmxhY2s3MDpcInJnYmEoMCwwLDAsMC43KVwiLGJsYWNrODA6XCJyZ2JhKDAsMCwwLDAuOClcIixibGFjazkwOlwicmdiYSgwLDAsMCwwLjkpXCIsdHJhbnNwYXJlbnQ6XCJ0cmFuc3BhcmVudFwifSx0LlNpemU9e3hzbWFsbDpcInhzbWFsbFwiLHNtYWxsOlwic21hbGxcIixiYXNlOlwiYmFzZVwiLGxhcmdlOlwibGFyZ2VcIix4bGFyZ2U6XCJ4bGFyZ2VcIix4eGxhcmdlOlwieHhsYXJnZVwiLHh4eGxhcmdlOlwieHh4bGFyZ2VcIix4eHh4bGFyZ2U6XCJ4eHh4bGFyZ2VcIn0sdC5TaXplTmFtZT17W3QuU2l6ZS54c21hbGxdOlwiRXh0cmEgU21hbGxcIixbdC5TaXplLnNtYWxsXTpcIlNtYWxsXCIsW3QuU2l6ZS5iYXNlXTpcIkJhc2VcIixbdC5TaXplLmxhcmdlXTpcIkxhcmdlXCIsW3QuU2l6ZS54bGFyZ2VdOlwiRXh0cmEgTGFyZ2VcIixbdC5TaXplLnh4bGFyZ2VdOlwiMlggTGFyZ2VcIixbdC5TaXplLnh4eGxhcmdlXTpcIjNYIExhcmdlXCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNFggTGFyZ2VcIn0sdC5Vbml0PXtbdC5TaXplLnhzbWFsbF06NCxbdC5TaXplLnNtYWxsXTo4LFt0LlNpemUuYmFzZV06MTIsW3QuU2l6ZS5sYXJnZV06MTYsW3QuU2l6ZS54bGFyZ2VdOjIwLFt0LlNpemUueHhsYXJnZV06MjQsW3QuU2l6ZS54eHhsYXJnZV06MzIsW3QuU2l6ZS54eHh4bGFyZ2VdOjQ4fSx0LlVuaXRQeD17W3QuU2l6ZS54c21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5zbWFsbF06XCI4cHhcIixbdC5TaXplLmJhc2VdOlwiMTJweFwiLFt0LlNpemUubGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueGxhcmdlXTpcIjIwcHhcIixbdC5TaXplLnh4bGFyZ2VdOlwiMjRweFwiLFt0LlNpemUueHh4bGFyZ2VdOlwiMzJweFwiLFt0LlNpemUueHh4eGxhcmdlXTpcIjQ4cHhcIn0sdC5SYWRpdXM9e1t0LlNpemUueHNtYWxsXTpcIjJweFwiLFt0LlNpemUuc21hbGxdOlwiNHB4XCIsW3QuU2l6ZS5iYXNlXTpcIjhweFwiLFt0LlNpemUubGFyZ2VdOlwiMjRweFwiLHBpbGw6XCIxMDB2aFwiLHJvdW5kOlwiNTAlXCIsbm9uZTpcIjBcIn0sdC5TaGFkb3c9e1t0LlNpemUuYmFzZV06XCIwIDRweCA0cHggcmdiYSgwLCAwLCAwLCAwLjI1KVwifSx0LkZvbnRGYW1pbHk9W1wiSW50ZXJcIixcInN5c3RlbS11aVwiLFwiQmxpbmtNYWNTeXN0ZW1Gb250XCIsXCJTZWdvZSBVSVwiLFwiUm9ib3RvXCIsXCJPeHlnZW4tU2Fuc1wiLFwiVWJ1bnR1XCIsXCJDYW50YXJlbGxcIixcIkhlbHZldGljYSBOZXVlXCIsXCJzYW5zLXNlcmlmXCJdLmpvaW4oXCIsXCIpLHQuRm9udFNpemU9e1t0LlNpemUueHNtYWxsXTpcIjhweFwiLFt0LlNpemUuc21hbGxdOlwiMTBweFwiLFt0LlNpemUuYmFzZV06XCIxMnB4XCIsW3QuU2l6ZS5sYXJnZV06XCIxNHB4XCIsW3QuU2l6ZS54bGFyZ2VdOlwiMTZweFwiLFt0LlNpemUueHhsYXJnZV06XCIxOHB4XCIsW3QuU2l6ZS54eHhsYXJnZV06XCIyMHB4XCIsW3QuU2l6ZS54eHh4bGFyZ2VdOlwiNDBweFwifSx0LkZvbnRXZWlnaHQ9e25vcm1hbDo0MDAsYm9sZDo2MDB9LHQuTGluZUhlaWdodD17dWk6MSxoZWFkaW5nOjEuMix0ZXh0OjEuNX0sdC5UcmFuc2l0aW9uPXtiYXNlOlwiMjAwbXMgY3ViaWMtYmV6aWVyKDAuMTYsIDEsIDAuMywgMSlcIixub25lOlwiMG1zXCJ9LHQuSWNvblNpemU9e1t0LlNpemUueHNtYWxsXTp0LlVuaXRQeC5zbWFsbCxbdC5TaXplLnNtYWxsXTp0LlVuaXRQeC5iYXNlLFt0LlNpemUuYmFzZV06XCIxNXB4XCIsW3QuU2l6ZS5sYXJnZV06dC5Vbml0UHgueGxhcmdlLFt0LlNpemUueGxhcmdlXTp0LlVuaXRQeC54eGxhcmdlLFt0LlNpemUueHhsYXJnZV06dC5Vbml0UHgueHh4bGFyZ2UsW3QuU2l6ZS54eHhsYXJnZV06dC5Vbml0UHgueHh4eGxhcmdlfX0sNjg5MzooZSx0LGEpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jcmVhdGVUaGVtZT12b2lkIDA7Y29uc3Qgbj1hKDIzMTcpLHI9YSgyMzQ2KSxvPWEoNTkzOSksaT17Zm9udEZhbWlseTpuLkZvbnRGYW1pbHksZm9udFNpemU6bi5Gb250U2l6ZSxmb250V2VpZ2h0Om4uRm9udFdlaWdodCxsaW5lSGVpZ2h0Om4uTGluZUhlaWdodCxpY29uU2l6ZTpuLkljb25TaXplLHJhZGl1czpuLlJhZGl1cyxzaGFkb3c6bi5TaGFkb3csdHJhbnNpdGlvbjpuLlRyYW5zaXRpb24sdW5pdDpuLlVuaXQscHg6bi5Vbml0UHh9LHM9KGUsdCk9Pih7W2Ake2V9QWN0aXZlYF06KDAsci5kYXJrZW5Db2xvcikodCwyKSxbYCR7ZX1Ib3ZlcmBdOigwLHIubGlnaHRlbkNvbG9yKSh0LDUpLFtgJHtlfUZvY3VzZWRgXTooMCxyLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pLFtgJHtlfVRleHRgXTooMCxyLmdldE1vc3RSZWFkYWJsZSkodCxbbi5Db2xvci53aGl0ZSxuLkNvbG9yLmRhcmtHcmF5NV0pfSk7dC5jcmVhdGVUaGVtZT1lPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3BhbGV0dGU6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkscyhvLlBhbGV0dGUuYnJhbmRQcmltYXJ5LGUuYnJhbmRQcmltYXJ5KSkscyhvLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnksZS5icmFuZFNlY29uZGFyeSkpfSl9LDU5Mzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBhbGV0dGU9dm9pZCAwLHQuUGFsZXR0ZT17YmFja2dyb3VuZDE6XCJiYWNrZ3JvdW5kMVwiLGJhY2tncm91bmQyOlwiYmFja2dyb3VuZDJcIixiYWNrZ3JvdW5kMzpcImJhY2tncm91bmQzXCIsYmFja2dyb3VuZDQ6XCJiYWNrZ3JvdW5kNFwiLGJhY2tncm91bmQ1OlwiYmFja2dyb3VuZDVcIixiYWNrZ3JvdW5kNjpcImJhY2tncm91bmQ2XCIsYnJhbmRQcmltYXJ5OlwiYnJhbmRQcmltYXJ5XCIsYnJhbmRTZWNvbmRhcnk6XCJicmFuZFNlY29uZGFyeVwiLGJyYW5kUHJpbWFyeUFjdGl2ZTpcImJyYW5kUHJpbWFyeUFjdGl2ZVwiLGJyYW5kUHJpbWFyeUhvdmVyOlwiYnJhbmRQcmltYXJ5SG92ZXJcIixicmFuZFByaW1hcnlGb2N1c2VkOlwiYnJhbmRQcmltYXJ5Rm9jdXNlZFwiLGJyYW5kUHJpbWFyeVRleHQ6XCJicmFuZFByaW1hcnlUZXh0XCIsYnJhbmRTZWNvbmRhcnlBY3RpdmU6XCJicmFuZFNlY29uZGFyeUFjdGl2ZVwiLGJyYW5kU2Vjb25kYXJ5SG92ZXI6XCJicmFuZFNlY29uZGFyeUhvdmVyXCIsYnJhbmRTZWNvbmRhcnlGb2N1c2VkOlwiYnJhbmRTZWNvbmRhcnlGb2N1c2VkXCIsYnJhbmRTZWNvbmRhcnlUZXh0OlwiYnJhbmRTZWNvbmRhcnlUZXh0XCIsaW5wdXRCYWNrZ3JvdW5kOlwiaW5wdXRCYWNrZ3JvdW5kXCIsaW5wdXRDb2xvcjpcImlucHV0Q29sb3JcIixpbnB1dFBsYWNlaG9sZGVyOlwiaW5wdXRQbGFjZWhvbGRlclwiLGlucHV0RGlzYWJsZWQ6XCJpbnB1dERpc2FibGVkXCIsaW5wdXRGb2N1c2VkOlwiaW5wdXRGb2N1c2VkXCIsaW5wdXRCb3JkZXI6XCJpbnB1dEJvcmRlclwiLHN0YXR1c1N1Y2Nlc3M6XCJzdGF0dXNTdWNjZXNzXCIsc3RhdHVzV2FybmluZzpcInN0YXR1c1dhcm5pbmdcIixzdGF0dXNDcml0aWNhbDpcInN0YXR1c0NyaXRpY2FsXCIsc3RhdHVzQWN0aXZlOlwic3RhdHVzQWN0aXZlXCIsdGV4dERlZmF1bHQ6XCJ0ZXh0RGVmYXVsdFwiLHRleHRIZWxwOlwidGV4dEhlbHBcIix0ZXh0SW5hY3RpdmU6XCJ0ZXh0SW5hY3RpdmVcIixib3JkZXJOZXV0cmFsOlwiYm9yZGVyTmV1dHJhbFwiLGNvbnRlbnRCYWNrZ3JvdW5kMTpcImNvbnRlbnRCYWNrZ3JvdW5kMVwiLGNvbnRlbnRCYWNrZ3JvdW5kMjpcImNvbnRlbnRCYWNrZ3JvdW5kMlwiLGNvbnRlbnRCYWNrZ3JvdW5kMzpcImNvbnRlbnRCYWNrZ3JvdW5kM1wiLGNvbnRlbnRCYWNrZ3JvdW5kNDpcImNvbnRlbnRCYWNrZ3JvdW5kNFwiLGNvbnRlbnRCYWNrZ3JvdW5kNTpcImNvbnRlbnRCYWNrZ3JvdW5kNVwiLGxpbmtEZWZhdWx0OlwibGlua0RlZmF1bHRcIixsaW5rSG92ZXI6XCJsaW5rSG92ZXJcIn19LDY1MzU6ZnVuY3Rpb24oZSl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4oZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkodCl9dmFyIHQ9L15cXHMrLyxhPS9cXHMrJC87ZnVuY3Rpb24gbihyLG8pe2lmKG89b3x8e30sKHI9cnx8XCJcIilpbnN0YW5jZW9mIG4pcmV0dXJuIHI7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKHIsbyk7dmFyIGk9ZnVuY3Rpb24obil7dmFyIHIsbyxpLHM9e3I6MCxnOjAsYjowfSxjPTEsZD1udWxsLGw9bnVsbCx1PW51bGwscD0hMSxoPSExO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuJiYobj1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSh0LFwiXCIpLnJlcGxhY2UoYSxcIlwiKS50b0xvd2VyQ2FzZSgpO3ZhciBuLHI9ITE7aWYoa1tlXSllPWtbZV0scj0hMDtlbHNlIGlmKFwidHJhbnNwYXJlbnRcIj09ZSlyZXR1cm57cjowLGc6MCxiOjAsYTowLGZvcm1hdDpcIm5hbWVcIn07cmV0dXJuKG49Ty5yZ2IuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdfToobj1PLnJnYmEuZXhlYyhlKSk/e3I6blsxXSxnOm5bMl0sYjpuWzNdLGE6bls0XX06KG49Ty5oc2wuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdfToobj1PLmhzbGEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sbDpuWzNdLGE6bls0XX06KG49Ty5oc3YuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdfToobj1PLmhzdmEuZXhlYyhlKSk/e2g6blsxXSxzOm5bMl0sdjpuWzNdLGE6bls0XX06KG49Ty5oZXg4LmV4ZWMoZSkpP3tyOngoblsxXSksZzp4KG5bMl0pLGI6eChuWzNdKSxhOkYobls0XSksZm9ybWF0OnI/XCJuYW1lXCI6XCJoZXg4XCJ9OihuPU8uaGV4Ni5leGVjKGUpKT97cjp4KG5bMV0pLGc6eChuWzJdKSxiOngoblszXSksZm9ybWF0OnI/XCJuYW1lXCI6XCJoZXhcIn06KG49Ty5oZXg0LmV4ZWMoZSkpP3tyOngoblsxXStcIlwiK25bMV0pLGc6eChuWzJdK1wiXCIrblsyXSksYjp4KG5bM10rXCJcIituWzNdKSxhOkYobls0XStcIlwiK25bNF0pLGZvcm1hdDpyP1wibmFtZVwiOlwiaGV4OFwifTohIShuPU8uaGV4My5leGVjKGUpKSYme3I6eChuWzFdK1wiXCIrblsxXSksZzp4KG5bMl0rXCJcIituWzJdKSxiOngoblszXStcIlwiK25bM10pLGZvcm1hdDpyP1wibmFtZVwiOlwiaGV4XCJ9fShuKSksXCJvYmplY3RcIj09ZShuKSYmKEQobi5yKSYmRChuLmcpJiZEKG4uYik/KHI9bi5yLG89bi5nLGk9bi5iLHM9e3I6MjU1KlAociwyNTUpLGc6MjU1KlAobywyNTUpLGI6MjU1KlAoaSwyNTUpfSxwPSEwLGg9XCIlXCI9PT1TdHJpbmcobi5yKS5zdWJzdHIoLTEpP1wicHJnYlwiOlwicmdiXCIpOkQobi5oKSYmRChuLnMpJiZEKG4udik/KGQ9TShuLnMpLGw9TShuLnYpLHM9ZnVuY3Rpb24oZSx0LGEpe2U9NipQKGUsMzYwKSx0PVAodCwxMDApLGE9UChhLDEwMCk7dmFyIG49TWF0aC5mbG9vcihlKSxyPWUtbixvPWEqKDEtdCksaT1hKigxLXIqdCkscz1hKigxLSgxLXIpKnQpLGM9biU2O3JldHVybntyOjI1NSpbYSxpLG8sbyxzLGFdW2NdLGc6MjU1KltzLGEsYSxpLG8sb11bY10sYjoyNTUqW28sbyxzLGEsYSxpXVtjXX19KG4uaCxkLGwpLHA9ITAsaD1cImhzdlwiKTpEKG4uaCkmJkQobi5zKSYmRChuLmwpJiYoZD1NKG4ucyksdT1NKG4ubCkscz1mdW5jdGlvbihlLHQsYSl7dmFyIG4scixvO2Z1bmN0aW9uIGkoZSx0LGEpe3JldHVybiBhPDAmJihhKz0xKSxhPjEmJihhLT0xKSxhPDEvNj9lKzYqKHQtZSkqYTphPC41P3Q6YTwyLzM/ZSsodC1lKSooMi8zLWEpKjY6ZX1pZihlPVAoZSwzNjApLHQ9UCh0LDEwMCksYT1QKGEsMTAwKSwwPT09dCluPXI9bz1hO2Vsc2V7dmFyIHM9YTwuNT9hKigxK3QpOmErdC1hKnQsYz0yKmEtcztuPWkoYyxzLGUrMS8zKSxyPWkoYyxzLGUpLG89aShjLHMsZS0xLzMpfXJldHVybntyOjI1NSpuLGc6MjU1KnIsYjoyNTUqb319KG4uaCxkLHUpLHA9ITAsaD1cImhzbFwiKSxuLmhhc093blByb3BlcnR5KFwiYVwiKSYmKGM9bi5hKSksYz1TKGMpLHtvazpwLGZvcm1hdDpuLmZvcm1hdHx8aCxyOk1hdGgubWluKDI1NSxNYXRoLm1heChzLnIsMCkpLGc6TWF0aC5taW4oMjU1LE1hdGgubWF4KHMuZywwKSksYjpNYXRoLm1pbigyNTUsTWF0aC5tYXgocy5iLDApKSxhOmN9fShyKTt0aGlzLl9vcmlnaW5hbElucHV0PXIsdGhpcy5fcj1pLnIsdGhpcy5fZz1pLmcsdGhpcy5fYj1pLmIsdGhpcy5fYT1pLmEsdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzLl9mb3JtYXQ9by5mb3JtYXR8fGkuZm9ybWF0LHRoaXMuX2dyYWRpZW50VHlwZT1vLmdyYWRpZW50VHlwZSx0aGlzLl9yPDEmJih0aGlzLl9yPU1hdGgucm91bmQodGhpcy5fcikpLHRoaXMuX2c8MSYmKHRoaXMuX2c9TWF0aC5yb3VuZCh0aGlzLl9nKSksdGhpcy5fYjwxJiYodGhpcy5fYj1NYXRoLnJvdW5kKHRoaXMuX2IpKSx0aGlzLl9vaz1pLm9rfWZ1bmN0aW9uIHIoZSx0LGEpe2U9UChlLDI1NSksdD1QKHQsMjU1KSxhPVAoYSwyNTUpO3ZhciBuLHIsbz1NYXRoLm1heChlLHQsYSksaT1NYXRoLm1pbihlLHQsYSkscz0obytpKS8yO2lmKG89PWkpbj1yPTA7ZWxzZXt2YXIgYz1vLWk7c3dpdGNoKHI9cz4uNT9jLygyLW8taSk6Yy8obytpKSxvKXtjYXNlIGU6bj0odC1hKS9jKyh0PGE/NjowKTticmVhaztjYXNlIHQ6bj0oYS1lKS9jKzI7YnJlYWs7Y2FzZSBhOm49KGUtdCkvYys0fW4vPTZ9cmV0dXJue2g6bixzOnIsbDpzfX1mdW5jdGlvbiBvKGUsdCxhKXtlPVAoZSwyNTUpLHQ9UCh0LDI1NSksYT1QKGEsMjU1KTt2YXIgbixyLG89TWF0aC5tYXgoZSx0LGEpLGk9TWF0aC5taW4oZSx0LGEpLHM9byxjPW8taTtpZihyPTA9PT1vPzA6Yy9vLG89PWkpbj0wO2Vsc2V7c3dpdGNoKG8pe2Nhc2UgZTpuPSh0LWEpL2MrKHQ8YT82OjApO2JyZWFrO2Nhc2UgdDpuPShhLWUpL2MrMjticmVhaztjYXNlIGE6bj0oZS10KS9jKzR9bi89Nn1yZXR1cm57aDpuLHM6cix2OnN9fWZ1bmN0aW9uIGkoZSx0LGEsbil7dmFyIHI9W0EoTWF0aC5yb3VuZChlKS50b1N0cmluZygxNikpLEEoTWF0aC5yb3VuZCh0KS50b1N0cmluZygxNikpLEEoTWF0aC5yb3VuZChhKS50b1N0cmluZygxNikpXTtyZXR1cm4gbiYmclswXS5jaGFyQXQoMCk9PXJbMF0uY2hhckF0KDEpJiZyWzFdLmNoYXJBdCgwKT09clsxXS5jaGFyQXQoMSkmJnJbMl0uY2hhckF0KDApPT1yWzJdLmNoYXJBdCgxKT9yWzBdLmNoYXJBdCgwKStyWzFdLmNoYXJBdCgwKStyWzJdLmNoYXJBdCgwKTpyLmpvaW4oXCJcIil9ZnVuY3Rpb24gcyhlLHQsYSxuKXtyZXR1cm5bQShJKG4pKSxBKE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSxBKE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSxBKE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKV0uam9pbihcIlwiKX1mdW5jdGlvbiBjKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5zLT10LzEwMCxhLnM9QyhhLnMpLG4oYSl9ZnVuY3Rpb24gZChlLHQpe3Q9MD09PXQ/MDp0fHwxMDt2YXIgYT1uKGUpLnRvSHNsKCk7cmV0dXJuIGEucys9dC8xMDAsYS5zPUMoYS5zKSxuKGEpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIG4oZSkuZGVzYXR1cmF0ZSgxMDApfWZ1bmN0aW9uIHUoZSx0KXt0PTA9PT10PzA6dHx8MTA7dmFyIGE9bihlKS50b0hzbCgpO3JldHVybiBhLmwrPXQvMTAwLGEubD1DKGEubCksbihhKX1mdW5jdGlvbiBwKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9SZ2IoKTtyZXR1cm4gYS5yPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuci1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5nPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuZy1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksYS5iPU1hdGgubWF4KDAsTWF0aC5taW4oMjU1LGEuYi1NYXRoLnJvdW5kKC10LzEwMCoyNTUpKSksbihhKX1mdW5jdGlvbiBoKGUsdCl7dD0wPT09dD8wOnR8fDEwO3ZhciBhPW4oZSkudG9Ic2woKTtyZXR1cm4gYS5sLT10LzEwMCxhLmw9QyhhLmwpLG4oYSl9ZnVuY3Rpb24gZihlLHQpe3ZhciBhPW4oZSkudG9Ic2woKSxyPShhLmgrdCklMzYwO3JldHVybiBhLmg9cjwwPzM2MCtyOnIsbihhKX1mdW5jdGlvbiBnKGUpe3ZhciB0PW4oZSkudG9Ic2woKTtyZXR1cm4gdC5oPSh0LmgrMTgwKSUzNjAsbih0KX1mdW5jdGlvbiBtKGUsdCl7aWYoaXNOYU4odCl8fHQ8PTApdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgdG8gcG9seWFkIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7Zm9yKHZhciBhPW4oZSkudG9Ic2woKSxyPVtuKGUpXSxvPTM2MC90LGk9MTtpPHQ7aSsrKXIucHVzaChuKHtoOihhLmgraSpvKSUzNjAsczphLnMsbDphLmx9KSk7cmV0dXJuIHJ9ZnVuY3Rpb24gdyhlKXt2YXIgdD1uKGUpLnRvSHNsKCksYT10Lmg7cmV0dXJuW24oZSksbih7aDooYSs3MiklMzYwLHM6dC5zLGw6dC5sfSksbih7aDooYSsyMTYpJTM2MCxzOnQucyxsOnQubH0pXX1mdW5jdGlvbiB5KGUsdCxhKXt0PXR8fDYsYT1hfHwzMDt2YXIgcj1uKGUpLnRvSHNsKCksbz0zNjAvYSxpPVtuKGUpXTtmb3Ioci5oPShyLmgtKG8qdD4+MSkrNzIwKSUzNjA7LS10OylyLmg9KHIuaCtvKSUzNjAsaS5wdXNoKG4ocikpO3JldHVybiBpfWZ1bmN0aW9uIHYoZSx0KXt0PXR8fDY7Zm9yKHZhciBhPW4oZSkudG9Ic3YoKSxyPWEuaCxvPWEucyxpPWEudixzPVtdLGM9MS90O3QtLTspcy5wdXNoKG4oe2g6cixzOm8sdjppfSkpLGk9KGkrYyklMTtyZXR1cm4gc31uLnByb3RvdHlwZT17aXNEYXJrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QnJpZ2h0bmVzcygpPDEyOH0saXNMaWdodDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRGFyaygpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29rfSxnZXRPcmlnaW5hbElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWdpbmFsSW5wdXR9LGdldEZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JtYXR9LGdldEFscGhhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F9LGdldEJyaWdodG5lc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRvUmdiKCk7cmV0dXJuKDI5OSplLnIrNTg3KmUuZysxMTQqZS5iKS8xZTN9LGdldEx1bWluYW5jZTpmdW5jdGlvbigpe3ZhciBlLHQsYSxuPXRoaXMudG9SZ2IoKTtyZXR1cm4gZT1uLnIvMjU1LHQ9bi5nLzI1NSxhPW4uYi8yNTUsLjIxMjYqKGU8PS4wMzkyOD9lLzEyLjkyOk1hdGgucG93KChlKy4wNTUpLzEuMDU1LDIuNCkpKy43MTUyKih0PD0uMDM5Mjg/dC8xMi45MjpNYXRoLnBvdygodCsuMDU1KS8xLjA1NSwyLjQpKSsuMDcyMiooYTw9LjAzOTI4P2EvMTIuOTI6TWF0aC5wb3coKGErLjA1NSkvMS4wNTUsMi40KSl9LHNldEFscGhhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hPVMoZSksdGhpcy5fcm91bmRBPU1hdGgucm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzfSx0b0hzdjpmdW5jdGlvbigpe3ZhciBlPW8odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsdjplLnYsYTp0aGlzLl9hfX0sdG9Ic3ZTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS52KTtyZXR1cm4gMT09dGhpcy5fYT9cImhzdihcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc3ZhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hzbDpmdW5jdGlvbigpe3ZhciBlPXIodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCplLmgsczplLnMsbDplLmwsYTp0aGlzLl9hfX0sdG9Ic2xTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSx0PU1hdGgucm91bmQoMzYwKmUuaCksYT1NYXRoLnJvdW5kKDEwMCplLnMpLG49TWF0aC5yb3VuZCgxMDAqZS5sKTtyZXR1cm4gMT09dGhpcy5fYT9cImhzbChcIit0K1wiLCBcIithK1wiJSwgXCIrbitcIiUpXCI6XCJoc2xhKFwiK3QrXCIsIFwiK2ErXCIlLCBcIituK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hleDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYixlKX0sdG9IZXhTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCIjXCIrdGhpcy50b0hleChlKX0sdG9IZXg4OmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQsYSxuLHIpe3ZhciBvPVtBKE1hdGgucm91bmQoZSkudG9TdHJpbmcoMTYpKSxBKE1hdGgucm91bmQodCkudG9TdHJpbmcoMTYpKSxBKE1hdGgucm91bmQoYSkudG9TdHJpbmcoMTYpKSxBKEkobikpXTtyZXR1cm4gciYmb1swXS5jaGFyQXQoMCk9PW9bMF0uY2hhckF0KDEpJiZvWzFdLmNoYXJBdCgwKT09b1sxXS5jaGFyQXQoMSkmJm9bMl0uY2hhckF0KDApPT1vWzJdLmNoYXJBdCgxKSYmb1szXS5jaGFyQXQoMCk9PW9bM10uY2hhckF0KDEpP29bMF0uY2hhckF0KDApK29bMV0uY2hhckF0KDApK29bMl0uY2hhckF0KDApK29bM10uY2hhckF0KDApOm8uam9pbihcIlwiKX0odGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsdGhpcy5fYSxlKX0sdG9IZXg4U3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVyblwiI1wiK3RoaXMudG9IZXg4KGUpfSx0b1JnYjpmdW5jdGlvbigpe3JldHVybntyOk1hdGgucm91bmQodGhpcy5fciksZzpNYXRoLnJvdW5kKHRoaXMuX2cpLGI6TWF0aC5yb3VuZCh0aGlzLl9iKSxhOnRoaXMuX2F9fSx0b1JnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQodGhpcy5fcikrXCIsIFwiK01hdGgucm91bmQodGhpcy5fZykrXCIsIFwiK01hdGgucm91bmQodGhpcy5fYikrXCIsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9QZXJjZW50YWdlUmdiOmZ1bmN0aW9uKCl7cmV0dXJue3I6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9yLDI1NSkpK1wiJVwiLGc6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9nLDI1NSkpK1wiJVwiLGI6TWF0aC5yb3VuZCgxMDAqUCh0aGlzLl9iLDI1NSkpK1wiJVwiLGE6dGhpcy5fYX19LHRvUGVyY2VudGFnZVJnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiAxPT10aGlzLl9hP1wicmdiKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUpXCI6XCJyZ2JhKFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fciwyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fZywyNTUpKStcIiUsIFwiK01hdGgucm91bmQoMTAwKlAodGhpcy5fYiwyNTUpKStcIiUsIFwiK3RoaXMuX3JvdW5kQStcIilcIn0sdG9OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9hP1widHJhbnNwYXJlbnRcIjohKHRoaXMuX2E8MSkmJihiW2kodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsITApXXx8ITEpfSx0b0ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgdD1cIiNcIitzKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iLHRoaXMuX2EpLGE9dCxyPXRoaXMuX2dyYWRpZW50VHlwZT9cIkdyYWRpZW50VHlwZSA9IDEsIFwiOlwiXCI7aWYoZSl7dmFyIG89bihlKTthPVwiI1wiK3Moby5fcixvLl9nLG8uX2Isby5fYSl9cmV0dXJuXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoXCIrcitcInN0YXJ0Q29sb3JzdHI9XCIrdCtcIixlbmRDb2xvcnN0cj1cIithK1wiKVwifSx0b1N0cmluZzpmdW5jdGlvbihlKXt2YXIgdD0hIWU7ZT1lfHx0aGlzLl9mb3JtYXQ7dmFyIGE9ITEsbj10aGlzLl9hPDEmJnRoaXMuX2E+PTA7cmV0dXJuIHR8fCFufHxcImhleFwiIT09ZSYmXCJoZXg2XCIhPT1lJiZcImhleDNcIiE9PWUmJlwiaGV4NFwiIT09ZSYmXCJoZXg4XCIhPT1lJiZcIm5hbWVcIiE9PWU/KFwicmdiXCI9PT1lJiYoYT10aGlzLnRvUmdiU3RyaW5nKCkpLFwicHJnYlwiPT09ZSYmKGE9dGhpcy50b1BlcmNlbnRhZ2VSZ2JTdHJpbmcoKSksXCJoZXhcIiE9PWUmJlwiaGV4NlwiIT09ZXx8KGE9dGhpcy50b0hleFN0cmluZygpKSxcImhleDNcIj09PWUmJihhPXRoaXMudG9IZXhTdHJpbmcoITApKSxcImhleDRcIj09PWUmJihhPXRoaXMudG9IZXg4U3RyaW5nKCEwKSksXCJoZXg4XCI9PT1lJiYoYT10aGlzLnRvSGV4OFN0cmluZygpKSxcIm5hbWVcIj09PWUmJihhPXRoaXMudG9OYW1lKCkpLFwiaHNsXCI9PT1lJiYoYT10aGlzLnRvSHNsU3RyaW5nKCkpLFwiaHN2XCI9PT1lJiYoYT10aGlzLnRvSHN2U3RyaW5nKCkpLGF8fHRoaXMudG9IZXhTdHJpbmcoKSk6XCJuYW1lXCI9PT1lJiYwPT09dGhpcy5fYT90aGlzLnRvTmFtZSgpOnRoaXMudG9SZ2JTdHJpbmcoKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlzLnRvU3RyaW5nKCkpfSxfYXBwbHlNb2RpZmljYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgYT1lLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKHQpKSk7cmV0dXJuIHRoaXMuX3I9YS5fcix0aGlzLl9nPWEuX2csdGhpcy5fYj1hLl9iLHRoaXMuc2V0QWxwaGEoYS5fYSksdGhpc30sbGlnaHRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbih1LGFyZ3VtZW50cyl9LGJyaWdodGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHAsYXJndW1lbnRzKX0sZGFya2VuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGgsYXJndW1lbnRzKX0sZGVzYXR1cmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihjLGFyZ3VtZW50cyl9LHNhdHVyYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGQsYXJndW1lbnRzKX0sZ3JleXNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGwsYXJndW1lbnRzKX0sc3BpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihmLGFyZ3VtZW50cyl9LF9hcHBseUNvbWJpbmF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwodCkpKX0sYW5hbG9nb3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oeSxhcmd1bWVudHMpfSxjb21wbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oZyxhcmd1bWVudHMpfSxtb25vY2hyb21hdGljOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24odixhcmd1bWVudHMpfSxzcGxpdGNvbXBsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbih3LGFyZ3VtZW50cyl9LHRyaWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24obSxbM10pfSx0ZXRyYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtLFs0XSl9fSxuLmZyb21SYXRpbz1mdW5jdGlvbih0LGEpe2lmKFwib2JqZWN0XCI9PWUodCkpe3ZhciByPXt9O2Zvcih2YXIgbyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJihyW29dPVwiYVwiPT09bz90W29dOk0odFtvXSkpO3Q9cn1yZXR1cm4gbih0LGEpfSxuLmVxdWFscz1mdW5jdGlvbihlLHQpe3JldHVybiEoIWV8fCF0KSYmbihlKS50b1JnYlN0cmluZygpPT1uKHQpLnRvUmdiU3RyaW5nKCl9LG4ucmFuZG9tPWZ1bmN0aW9uKCl7cmV0dXJuIG4uZnJvbVJhdGlvKHtyOk1hdGgucmFuZG9tKCksZzpNYXRoLnJhbmRvbSgpLGI6TWF0aC5yYW5kb20oKX0pfSxuLm1peD1mdW5jdGlvbihlLHQsYSl7YT0wPT09YT8wOmF8fDUwO3ZhciByPW4oZSkudG9SZ2IoKSxvPW4odCkudG9SZ2IoKSxpPWEvMTAwO3JldHVybiBuKHtyOihvLnItci5yKSppK3IucixnOihvLmctci5nKSppK3IuZyxiOihvLmItci5iKSppK3IuYixhOihvLmEtci5hKSppK3IuYX0pfSxuLnJlYWRhYmlsaXR5PWZ1bmN0aW9uKGUsdCl7dmFyIGE9bihlKSxyPW4odCk7cmV0dXJuKE1hdGgubWF4KGEuZ2V0THVtaW5hbmNlKCksci5nZXRMdW1pbmFuY2UoKSkrLjA1KS8oTWF0aC5taW4oYS5nZXRMdW1pbmFuY2UoKSxyLmdldEx1bWluYW5jZSgpKSsuMDUpfSxuLmlzUmVhZGFibGU9ZnVuY3Rpb24oZSx0LGEpe3ZhciByLG8saSxzLGMsZD1uLnJlYWRhYmlsaXR5KGUsdCk7c3dpdGNoKG89ITEsKGk9YSxcIkFBXCIhPT0ocz0oKGk9aXx8e2xldmVsOlwiQUFcIixzaXplOlwic21hbGxcIn0pLmxldmVsfHxcIkFBXCIpLnRvVXBwZXJDYXNlKCkpJiZcIkFBQVwiIT09cyYmKHM9XCJBQVwiKSxcInNtYWxsXCIhPT0oYz0oaS5zaXplfHxcInNtYWxsXCIpLnRvTG93ZXJDYXNlKCkpJiZcImxhcmdlXCIhPT1jJiYoYz1cInNtYWxsXCIpLHI9e2xldmVsOnMsc2l6ZTpjfSkubGV2ZWwrci5zaXplKXtjYXNlXCJBQXNtYWxsXCI6Y2FzZVwiQUFBbGFyZ2VcIjpvPWQ+PTQuNTticmVhaztjYXNlXCJBQWxhcmdlXCI6bz1kPj0zO2JyZWFrO2Nhc2VcIkFBQXNtYWxsXCI6bz1kPj03fXJldHVybiBvfSxuLm1vc3RSZWFkYWJsZT1mdW5jdGlvbihlLHQsYSl7dmFyIHIsbyxpLHMsYz1udWxsLGQ9MDtvPShhPWF8fHt9KS5pbmNsdWRlRmFsbGJhY2tDb2xvcnMsaT1hLmxldmVsLHM9YS5zaXplO2Zvcih2YXIgbD0wO2w8dC5sZW5ndGg7bCsrKShyPW4ucmVhZGFiaWxpdHkoZSx0W2xdKSk+ZCYmKGQ9cixjPW4odFtsXSkpO3JldHVybiBuLmlzUmVhZGFibGUoZSxjLHtsZXZlbDppLHNpemU6c30pfHwhbz9jOihhLmluY2x1ZGVGYWxsYmFja0NvbG9ycz0hMSxuLm1vc3RSZWFkYWJsZShlLFtcIiNmZmZcIixcIiMwMDBcIl0sYSkpfTt2YXIgaz1uLm5hbWVzPXthbGljZWJsdWU6XCJmMGY4ZmZcIixhbnRpcXVld2hpdGU6XCJmYWViZDdcIixhcXVhOlwiMGZmXCIsYXF1YW1hcmluZTpcIjdmZmZkNFwiLGF6dXJlOlwiZjBmZmZmXCIsYmVpZ2U6XCJmNWY1ZGNcIixiaXNxdWU6XCJmZmU0YzRcIixibGFjazpcIjAwMFwiLGJsYW5jaGVkYWxtb25kOlwiZmZlYmNkXCIsYmx1ZTpcIjAwZlwiLGJsdWV2aW9sZXQ6XCI4YTJiZTJcIixicm93bjpcImE1MmEyYVwiLGJ1cmx5d29vZDpcImRlYjg4N1wiLGJ1cm50c2llbm5hOlwiZWE3ZTVkXCIsY2FkZXRibHVlOlwiNWY5ZWEwXCIsY2hhcnRyZXVzZTpcIjdmZmYwMFwiLGNob2NvbGF0ZTpcImQyNjkxZVwiLGNvcmFsOlwiZmY3ZjUwXCIsY29ybmZsb3dlcmJsdWU6XCI2NDk1ZWRcIixjb3Juc2lsazpcImZmZjhkY1wiLGNyaW1zb246XCJkYzE0M2NcIixjeWFuOlwiMGZmXCIsZGFya2JsdWU6XCIwMDAwOGJcIixkYXJrY3lhbjpcIjAwOGI4YlwiLGRhcmtnb2xkZW5yb2Q6XCJiODg2MGJcIixkYXJrZ3JheTpcImE5YTlhOVwiLGRhcmtncmVlbjpcIjAwNjQwMFwiLGRhcmtncmV5OlwiYTlhOWE5XCIsZGFya2toYWtpOlwiYmRiNzZiXCIsZGFya21hZ2VudGE6XCI4YjAwOGJcIixkYXJrb2xpdmVncmVlbjpcIjU1NmIyZlwiLGRhcmtvcmFuZ2U6XCJmZjhjMDBcIixkYXJrb3JjaGlkOlwiOTkzMmNjXCIsZGFya3JlZDpcIjhiMDAwMFwiLGRhcmtzYWxtb246XCJlOTk2N2FcIixkYXJrc2VhZ3JlZW46XCI4ZmJjOGZcIixkYXJrc2xhdGVibHVlOlwiNDgzZDhiXCIsZGFya3NsYXRlZ3JheTpcIjJmNGY0ZlwiLGRhcmtzbGF0ZWdyZXk6XCIyZjRmNGZcIixkYXJrdHVycXVvaXNlOlwiMDBjZWQxXCIsZGFya3Zpb2xldDpcIjk0MDBkM1wiLGRlZXBwaW5rOlwiZmYxNDkzXCIsZGVlcHNreWJsdWU6XCIwMGJmZmZcIixkaW1ncmF5OlwiNjk2OTY5XCIsZGltZ3JleTpcIjY5Njk2OVwiLGRvZGdlcmJsdWU6XCIxZTkwZmZcIixmaXJlYnJpY2s6XCJiMjIyMjJcIixmbG9yYWx3aGl0ZTpcImZmZmFmMFwiLGZvcmVzdGdyZWVuOlwiMjI4YjIyXCIsZnVjaHNpYTpcImYwZlwiLGdhaW5zYm9ybzpcImRjZGNkY1wiLGdob3N0d2hpdGU6XCJmOGY4ZmZcIixnb2xkOlwiZmZkNzAwXCIsZ29sZGVucm9kOlwiZGFhNTIwXCIsZ3JheTpcIjgwODA4MFwiLGdyZWVuOlwiMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCJhZGZmMmZcIixncmV5OlwiODA4MDgwXCIsaG9uZXlkZXc6XCJmMGZmZjBcIixob3RwaW5rOlwiZmY2OWI0XCIsaW5kaWFucmVkOlwiY2Q1YzVjXCIsaW5kaWdvOlwiNGIwMDgyXCIsaXZvcnk6XCJmZmZmZjBcIixraGFraTpcImYwZTY4Y1wiLGxhdmVuZGVyOlwiZTZlNmZhXCIsbGF2ZW5kZXJibHVzaDpcImZmZjBmNVwiLGxhd25ncmVlbjpcIjdjZmMwMFwiLGxlbW9uY2hpZmZvbjpcImZmZmFjZFwiLGxpZ2h0Ymx1ZTpcImFkZDhlNlwiLGxpZ2h0Y29yYWw6XCJmMDgwODBcIixsaWdodGN5YW46XCJlMGZmZmZcIixsaWdodGdvbGRlbnJvZHllbGxvdzpcImZhZmFkMlwiLGxpZ2h0Z3JheTpcImQzZDNkM1wiLGxpZ2h0Z3JlZW46XCI5MGVlOTBcIixsaWdodGdyZXk6XCJkM2QzZDNcIixsaWdodHBpbms6XCJmZmI2YzFcIixsaWdodHNhbG1vbjpcImZmYTA3YVwiLGxpZ2h0c2VhZ3JlZW46XCIyMGIyYWFcIixsaWdodHNreWJsdWU6XCI4N2NlZmFcIixsaWdodHNsYXRlZ3JheTpcIjc4OVwiLGxpZ2h0c2xhdGVncmV5OlwiNzg5XCIsbGlnaHRzdGVlbGJsdWU6XCJiMGM0ZGVcIixsaWdodHllbGxvdzpcImZmZmZlMFwiLGxpbWU6XCIwZjBcIixsaW1lZ3JlZW46XCIzMmNkMzJcIixsaW5lbjpcImZhZjBlNlwiLG1hZ2VudGE6XCJmMGZcIixtYXJvb246XCI4MDAwMDBcIixtZWRpdW1hcXVhbWFyaW5lOlwiNjZjZGFhXCIsbWVkaXVtYmx1ZTpcIjAwMDBjZFwiLG1lZGl1bW9yY2hpZDpcImJhNTVkM1wiLG1lZGl1bXB1cnBsZTpcIjkzNzBkYlwiLG1lZGl1bXNlYWdyZWVuOlwiM2NiMzcxXCIsbWVkaXVtc2xhdGVibHVlOlwiN2I2OGVlXCIsbWVkaXVtc3ByaW5nZ3JlZW46XCIwMGZhOWFcIixtZWRpdW10dXJxdW9pc2U6XCI0OGQxY2NcIixtZWRpdW12aW9sZXRyZWQ6XCJjNzE1ODVcIixtaWRuaWdodGJsdWU6XCIxOTE5NzBcIixtaW50Y3JlYW06XCJmNWZmZmFcIixtaXN0eXJvc2U6XCJmZmU0ZTFcIixtb2NjYXNpbjpcImZmZTRiNVwiLG5hdmFqb3doaXRlOlwiZmZkZWFkXCIsbmF2eTpcIjAwMDA4MFwiLG9sZGxhY2U6XCJmZGY1ZTZcIixvbGl2ZTpcIjgwODAwMFwiLG9saXZlZHJhYjpcIjZiOGUyM1wiLG9yYW5nZTpcImZmYTUwMFwiLG9yYW5nZXJlZDpcImZmNDUwMFwiLG9yY2hpZDpcImRhNzBkNlwiLHBhbGVnb2xkZW5yb2Q6XCJlZWU4YWFcIixwYWxlZ3JlZW46XCI5OGZiOThcIixwYWxldHVycXVvaXNlOlwiYWZlZWVlXCIscGFsZXZpb2xldHJlZDpcImRiNzA5M1wiLHBhcGF5YXdoaXA6XCJmZmVmZDVcIixwZWFjaHB1ZmY6XCJmZmRhYjlcIixwZXJ1OlwiY2Q4NTNmXCIscGluazpcImZmYzBjYlwiLHBsdW06XCJkZGEwZGRcIixwb3dkZXJibHVlOlwiYjBlMGU2XCIscHVycGxlOlwiODAwMDgwXCIscmViZWNjYXB1cnBsZTpcIjY2MzM5OVwiLHJlZDpcImYwMFwiLHJvc3licm93bjpcImJjOGY4ZlwiLHJveWFsYmx1ZTpcIjQxNjllMVwiLHNhZGRsZWJyb3duOlwiOGI0NTEzXCIsc2FsbW9uOlwiZmE4MDcyXCIsc2FuZHlicm93bjpcImY0YTQ2MFwiLHNlYWdyZWVuOlwiMmU4YjU3XCIsc2Vhc2hlbGw6XCJmZmY1ZWVcIixzaWVubmE6XCJhMDUyMmRcIixzaWx2ZXI6XCJjMGMwYzBcIixza3libHVlOlwiODdjZWViXCIsc2xhdGVibHVlOlwiNmE1YWNkXCIsc2xhdGVncmF5OlwiNzA4MDkwXCIsc2xhdGVncmV5OlwiNzA4MDkwXCIsc25vdzpcImZmZmFmYVwiLHNwcmluZ2dyZWVuOlwiMDBmZjdmXCIsc3RlZWxibHVlOlwiNDY4MmI0XCIsdGFuOlwiZDJiNDhjXCIsdGVhbDpcIjAwODA4MFwiLHRoaXN0bGU6XCJkOGJmZDhcIix0b21hdG86XCJmZjYzNDdcIix0dXJxdW9pc2U6XCI0MGUwZDBcIix2aW9sZXQ6XCJlZTgyZWVcIix3aGVhdDpcImY1ZGViM1wiLHdoaXRlOlwiZmZmXCIsd2hpdGVzbW9rZTpcImY1ZjVmNVwiLHllbGxvdzpcImZmMFwiLHllbGxvd2dyZWVuOlwiOWFjZDMyXCJ9LGI9bi5oZXhOYW1lcz1mdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIGEgaW4gZSllLmhhc093blByb3BlcnR5KGEpJiYodFtlW2FdXT1hKTtyZXR1cm4gdH0oayk7ZnVuY3Rpb24gUyhlKXtyZXR1cm4gZT1wYXJzZUZsb2F0KGUpLChpc05hTihlKXx8ZTwwfHxlPjEpJiYoZT0xKSxlfWZ1bmN0aW9uIFAoZSx0KXsoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIuXCIpJiYxPT09cGFyc2VGbG9hdChlKX0pKGUpJiYoZT1cIjEwMCVcIik7dmFyIGE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xIT1lLmluZGV4T2YoXCIlXCIpfShlKTtyZXR1cm4gZT1NYXRoLm1pbih0LE1hdGgubWF4KDAscGFyc2VGbG9hdChlKSkpLGEmJihlPXBhcnNlSW50KGUqdCwxMCkvMTAwKSxNYXRoLmFicyhlLXQpPDFlLTY/MTplJXQvcGFyc2VGbG9hdCh0KX1mdW5jdGlvbiBDKGUpe3JldHVybiBNYXRoLm1pbigxLE1hdGgubWF4KDAsZSkpfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIHBhcnNlSW50KGUsMTYpfWZ1bmN0aW9uIEEoZSl7cmV0dXJuIDE9PWUubGVuZ3RoP1wiMFwiK2U6XCJcIitlfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIGU8PTEmJihlPTEwMCplK1wiJVwiKSxlfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIE1hdGgucm91bmQoMjU1KnBhcnNlRmxvYXQoZSkpLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBGKGUpe3JldHVybiB4KGUpLzI1NX12YXIgVyxULF8sTz0oVD1cIltcXFxcc3xcXFxcKF0rKFwiKyhXPVwiKD86Wy1cXFxcK10/XFxcXGQqXFxcXC5cXFxcZCslPyl8KD86Wy1cXFxcK10/XFxcXGQrJT8pXCIpK1wiKVssfFxcXFxzXSsoXCIrVytcIilbLHxcXFxcc10rKFwiK1crXCIpXFxcXHMqXFxcXCk/XCIsXz1cIltcXFxcc3xcXFxcKF0rKFwiK1crXCIpWyx8XFxcXHNdKyhcIitXK1wiKVssfFxcXFxzXSsoXCIrVytcIilbLHxcXFxcc10rKFwiK1crXCIpXFxcXHMqXFxcXCk/XCIse0NTU19VTklUOm5ldyBSZWdFeHAoVykscmdiOm5ldyBSZWdFeHAoXCJyZ2JcIitUKSxyZ2JhOm5ldyBSZWdFeHAoXCJyZ2JhXCIrXyksaHNsOm5ldyBSZWdFeHAoXCJoc2xcIitUKSxoc2xhOm5ldyBSZWdFeHAoXCJoc2xhXCIrXyksaHN2Om5ldyBSZWdFeHAoXCJoc3ZcIitUKSxoc3ZhOm5ldyBSZWdFeHAoXCJoc3ZhXCIrXyksaGV4MzovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8saGV4NjovXiM/KFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC8saGV4NDovXiM/KFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KSQvLGhleDg6L14jPyhbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkL30pO2Z1bmN0aW9uIEQoZSl7cmV0dXJuISFPLkNTU19VTklULmV4ZWMoZSl9cmV0dXJuIG59KCl9fSxuPXt9O2Z1bmN0aW9uIHIoZSl7dmFyIHQ9bltlXTtpZih2b2lkIDAhPT10KXJldHVybiB0LmV4cG9ydHM7dmFyIG89bltlXT17ZXhwb3J0czp7fX07cmV0dXJuIGFbZV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsciksby5leHBvcnRzfXZhciBvPXt9OygoKT0+e3ZhciBlPW87T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5jcmVhdGVUaGVtZT1lLlBhbGV0dGU9ZS5Db2xvcj12b2lkIDA7dmFyIHQ9cigyMzE3KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIkNvbG9yXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuQ29sb3J9fSk7dmFyIGE9cig1OTM5KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlBhbGV0dGVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5QYWxldHRlfX0pO3ZhciBuPXIoNjg5Myk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJjcmVhdGVUaGVtZVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZVRoZW1lfX0pfSkoKTt2YXIgaT10O2Zvcih2YXIgcyBpbiBvKWlbc109b1tzXTtvLl9fZXNNb2R1bGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSw4Nzc6KCk9Pnt9LDY3OigpPT57fSw5Nzg6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtOdDooKT0+an0pO3ZhciBuPXt9O2EucihuKSxhLmQobix7Z2V0SXRlbTooKT0+RyxyZW1vdmVJdGVtOigpPT5VLHNldEl0ZW06KCk9PiR9KTt2YXIgcj1hKDY3NSksbz1hKDcyMyk7YSgxODEpO3ZhciBpPWEoNzApO2NvbnN0IHM9YXN5bmMgZT0+e2NvbnN0IHQ9ZT9maW4uV2luZG93LndyYXBTeW5jKGUpOmZpbi5XaW5kb3cuZ2V0Q3VycmVudFN5bmMoKSxhPWF3YWl0IHQuZ2V0T3B0aW9ucygpO3JldHVybiBhLndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlJiZcImVudGVycHJpc2VcIj09PWEud29ya3NwYWNlUGxhdGZvcm0ud2luZG93VHlwZX07Y29uc3QgYz0oZSx0PTApPT57bGV0IGEsbixyPSExO2NvbnN0IG89YXN5bmMgbj0+e2NvbnN0IGk9YXdhaXQgZSguLi5uKTtpZihyKXthd2FpdCBuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLHQpKSk7Y29uc3QgZT1hO3JldHVybiBhPXZvaWQgMCxyPSExLG8oZSl9cmV0dXJuIGl9O3JldHVybiguLi5lKT0+KG4/KHI9ITAsYT1lKTpuPW8oZSkuY2F0Y2goKGU9Pnt0aHJvdyBjb25zb2xlLmVycm9yKFwibWFrZURlYm91bmNlZEZ1bmNcIixlKSxlfSkpLmZpbmFsbHkoKCgpPT57bj12b2lkIDB9KSksbil9O3ZhciBkOyFmdW5jdGlvbihlKXtlLlRvcD1cInRvcFwiLGUuQmVsb3c9XCJiZWxvd1wifShkfHwoZD17fSkpO2NvbnN0IGw9YXN5bmMgZT0+e3RyeXtyZXR1cm4hIWUmJlwibWF4aW1pemVkXCI9PT1hd2FpdCBlLmdldFN0YXRlKCl9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybihcInBhcmVudFdpbmRvd01heGltaXplZCAtIEZhaWxlZCB0byBnZXQgcGFyZW50IHdpbmRvdyBzdGF0ZVwiLGUpLCExfX07YXN5bmMgZnVuY3Rpb24gdShlLHQsYSxuLHIsbyl7Y29uc3Qgcz0hIWUmJigwLGkuSXEpKGUpLGM9YXdhaXQoYXN5bmMoZSx0KT0+e3RyeXtyZXR1cm4gZT9hd2FpdCBlLmdldEJvdW5kcygpOnR9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybihcImdldFBhcmVudFdpbmRvd0JvdW5kcyAtIEZhaWxlZCB0byBnZXQgcGFyZW50IHdpbmRvdyBib3VuZHNcIixlKSx0fX0pKHMsbyk7aWYobj09PWQuQmVsb3cpe2lmKCFzfHxhd2FpdCBsKHMpKXtjb25zdCBlPXM/KGF3YWl0KDAsaS51cikoYykpLmF2YWlsYWJsZVJlY3Q6KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSkucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdDtyZXR1cm57bGVmdDooMCxpLlYxKShlKS5sZWZ0LXQvMix0b3A6cj9lLmJvdHRvbS0xMjg6ZS5ib3R0b20rMTIsd2lkdGg6dCxoZWlnaHQ6YX19cmV0dXJue2xlZnQ6KDAsaS5WMSkoYykubGVmdC10LzIsdG9wOnI/Yy5ib3R0b20tMTI4OmMuYm90dG9tKzEyLHdpZHRoOnQsaGVpZ2h0OmF9fWlmKCFzfHxhd2FpdCBsKHMpKXtjb25zdCBlPXM/KGF3YWl0KDAsaS51cikoYykpLmF2YWlsYWJsZVJlY3Q6KGF3YWl0IGZpbi5TeXN0ZW0uZ2V0TW9uaXRvckluZm8oKSkucHJpbWFyeU1vbml0b3IuYXZhaWxhYmxlUmVjdDtyZXR1cm57bGVmdDooMCxpLlYxKShlKS5sZWZ0LXQvMix0b3A6ZS50b3ArMjAsd2lkdGg6dCxoZWlnaHQ6YX19cmV0dXJue2xlZnQ6KDAsaS5WMSkoYykubGVmdC10LzIsdG9wOmMudG9wKzIwLHdpZHRoOnQsaGVpZ2h0OmF9fWMoKGFzeW5jIGZ1bmN0aW9uKGUsdCxhLG4scil7Y29uc3Qgbz10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHM9YXdhaXQgdShlLG8ud2lkdGgsby5oZWlnaHQsYSxuLHIpO2lmKDA9PT1zLndpZHRofHwwPT09cy5oZWlnaHQpcmV0dXJuO2NvbnN0IGM9KDAsaS5UdikoKTthd2FpdCBjLnNldEJvdW5kcyhzKSxhd2FpdCBjLnNob3coKTtjb25zdCBkPXNldFRpbWVvdXQoKCgpPT5jLmNsb3NlKCkpLG4/NWUzOjNlMyksbD0oKT0+e2NsZWFyVGltZW91dChkKSxjLmNsb3NlKCl9O2lmKGUpe2NvbnN0IHQ9KDAsaS5JcSkoZSk7dC5vbihcImJvdW5kcy1jaGFuZ2luZ1wiLCgoKT0+bCgpKSksdC5vbihcImJsdXJyZWRcIiwoKCk9PmwoKSkpLHQub24oXCJtYXhpbWl6ZWRcIiwoKCk9PmwoKSkpLHQub24oXCJtaW5pbWl6ZWRcIiwoKCk9PmwoKSkpLHQub24oXCJyZXN0b3JlZFwiLCgoKT0+bCgpKSl9fSksMTApO2EoMjc3KSxhKDk1Nyk7dmFyIHA9YSg0MzgpO2NvbnN0IGg9cmVxdWlyZShcImxvZGFzaC5kZWJvdW5jZVwiKTt2YXIgZixnPWEubihoKTshZnVuY3Rpb24oZSl7ZS5DdXJyZW50V29ya3NwYWNlSWQ9XCJjdXJyZW50V29ya3NwYWNlSWRcIixlLkxhc3RGb2N1c2VkQnJvd3NlcldpbmRvdz1cImxhc3RGb2N1c2VkQnJvd3NlcldpbmRvd1wiLGUuTWFjaGluZU5hbWU9XCJtYWNoaW5lTmFtZVwiLGUuTmV3VGFiUGFnZUxheW91dD1cIk5ld1RhYlBhZ2VMYXlvdXRcIixlLk5ld1RhYlBhZ2VTb3J0PVwiTmV3VGFiUGFnZVNvcnRcIixlLkRvY2tQb3NpdGlvbj1cIkRvY2tQb3NpdGlvblwiLGUuU2VsZWN0ZWRDb2xvclNjaGVtZT1cIlNlbGVjdGVkQ29sb3JTY2hlbWVcIixlLlRoZW1lUGFsZXR0ZVNoZWV0PVwiVGhlbWVQYWxldHRlU2hlZXRcIixlLkhhc01vdmVkU3RvcmU9XCJIYXNNb3ZlZFN0b3JlXCIsZS5QYWdlRHJhZ1N0YXRlPVwiQnJvd3NlclBhZ2VEcmFnU3RhdGVcIn0oZnx8KGY9e30pKTtjb25zdCBtPWY7ZnVuY3Rpb24gdygpe3JldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShtLk1hY2hpbmVOYW1lKT8/XCJ1bmtub3duXCJ9bGV0IHk7YXN5bmMgZnVuY3Rpb24gdigpe3JldHVybiB5fHwoeT1hd2FpdCBmaW4uU3lzdGVtLmdldE1hY2hpbmVJZCgpKSx5fXZhciBrPWEoMzMzKTtjb25zdCBiPWFzeW5jIGU9Pih7Li4uZSxsYXlvdXREZXRhaWxzOnttYWNoaW5lSWQ6YXdhaXQgdigpLG1hY2hpbmVOYW1lOncoKX19KSxTPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0KGFzeW5jKGUsdCk9Pih7cGFnZUlkOigwLGsuTikoKSx0aXRsZTplLGxheW91dDphd2FpdCBiKHQpLGlzUmVhZE9ubHk6ITF9KSkoZS50aXRsZSxRKGUubGF5b3V0KSk7cmV0dXJuIGUucGFuZWxzJiYodC5wYW5lbHM9ZS5wYW5lbHMubWFwKChlPT4oey4uLmUsdmlld09wdGlvbnM6SyhlLnZpZXdPcHRpb25zKX0pKSkpLHsuLi5lLC4uLnR9fTt2YXIgUD1hKDc5KSxDPWEoNzg2KTt2YXIgeD1hKDEwMik7Y29uc3QgQT0oZSx0KT0+dD9gJHt0fS0ke2UudXVpZH0tJHtlLm5hbWV9YDpgX19icm93c2VyX3dpbmRvd19fLSR7ZS51dWlkfS0ke2UubmFtZX1gLE09bmV3IE1hcCxJPShlLHQpPT57Y29uc3QgYT1BKGUsdCk7cmV0dXJuIG49YSxNLmhhcyhuKXx8TS5zZXQobiwoMCx4LkEpKG4pKSxNLmdldChuKSgpO3ZhciBufTt2YXIgRixXLFQsXyxPOyFmdW5jdGlvbihlKXtlLkNsb3NlQnJvd3NlcldpbmRvdz1cImNsb3NlLWJyb3dzZXItd2luZG93XCIsZS5RdWl0UGxhdGZvcm09XCJxdWl0LXBsYXRmb3JtXCIsZS5DbG9zZVBhZ2U9XCJjbG9zZS1wYWdlXCIsZS5BZGRUb0NoYW5uZWw9XCJhZGQtdG8tY2hhbm5lbFwiLGUuUmVtb3ZlRnJvbUNoYW5uZWw9XCJyZW1vdmUtZnJvbS1jaGFubmVsXCIsZS5PcGVuU2F2ZU1vZGFsSW50ZXJuYWw9XCJvcGVuLXNhdmUtbW9kYWwtaW50ZXJuYWxcIixlLkR1cGxpY2F0ZVBhZ2U9XCJkdXBsaWNhdGUtcGFnZVwiLGUuU2V0U2VsZWN0ZWRTY2hlbWU9XCJzZXQtc2VsZWN0ZWQtc2NoZW1lXCIsZS5TaG93QnJvd3NlckluZGljYXRvcj1cInNob3ctYnJvd3Nlci1pbmRpY2F0b3JcIixlLlNldFNlbGVjdGVkTGFuZ3VhZ2U9XCJzZXQtc2VsZWN0ZWQtbGFuZ3VhZ2VcIixlLlJlZnJlc2hCb29rbWFya3NJbnRlcm5hbD1cInJlZnJlc2gtYm9va21hcmtzXCIsZS5HZXRMYXlvdXRzV2l0aFNlbGVjdGVkVmlld3NJbnRlcm5hbD1cImdldC1sYXlvdXRzLXdpdGgtc2VsZWN0ZWQtdmlld3NcIixlLkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWw9XCJmb2N1cy1hbmQtZXhwYW5kLXNlYXJjaFwifShGfHwoRj17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0UGFnZXM9XCJnZXQtcGFnZXNcIixlLkdldEFjdGl2ZVBhZ2VGb3JXaW5kb3c9XCJnZXQtYWN0aXZlLXBhZ2UtZm9yLXdpbmRvd1wiLGUuQXR0YWNoUGFnZXNUb1dpbmRvdz1cImF0dGFjaC1wYWdlcy10by13aW5kb3dcIixlLkRldGFjaFBhZ2VzRnJvbVdpbmRvdz1cImRldGFjaC1wYWdlcy1mcm9tLXdpbmRvd1wiLGUuU2V0QWN0aXZlUGFnZUZvcldpbmRvdz1cInNldC1hY3RpdmUtcGFnZS1mb3Itd2luZG93XCIsZS5SZW5hbWVQYWdlPVwicmVuYW1lLXBhZ2VcIixlLlJlb3JkZXJQYWdlc0ZvcldpbmRvdz1cInJlb3JkZXItcGFnZXMtZm9yLXdpbmRvd1wiLGUuVXBkYXRlUGFnZUZvcldpbmRvdz1cInVwZGF0ZS1wYWdlLWZvci13aW5kb3dcIixlLlVwZGF0ZVBhZ2VzV2luZG93T3B0aW9ucz1cInVwZGF0ZS1wYWdlcy13aW5kb3ctb3B0aW9uc1wiLGUuSXNEZXRhY2hpbmdQYWdlcz1cImlzLWRldGFjaGluZy1wYWdlc1wiLGUuSXNBY3RpdmVQYWdlQ2hhbmdpbmc9XCJpcy1hY3RpdmUtcGFnZS1jaGFuZ2luZ1wifShXfHwoVz17fSkpLGZ1bmN0aW9uKGUpe2UuR2V0QXBwcz1cImdldC1hcHBzXCIsZS5HZXRDdXJhdGVkQ29udGVudD1cImdldC1jdXJhdGVkLWNvbnRlbnRcIixlLkdldFJlY2VudGx5VmlzaXRlZD1cImdldC1yZWNlbnRseS12aXNpdGVkXCIsZS5HZXRTZWFyY2hQcm92aWRlcnM9XCJnZXQtc2VhcmNoLXByb3ZpZGVyc1wifShUfHwoVD17fSkpLGZ1bmN0aW9uKGUpe2UuQ3JlYXRlQm9va21hcmtOb2RlPVwiY3JlYXRlLWJvb2ttYXJrLW5vZGVcIixlLkdldEJvb2ttYXJrTm9kZT1cImdldC1ib29rbWFyay1ub2RlXCIsZS5TZWFyY2hCb29rbWFya05vZGVzPVwic2VhcmNoLWJvb2ttYXJrLW5vZGVzXCIsZS5VcGRhdGVCb29rbWFya05vZGU9XCJ1cGRhdGUtYm9va21hcmstbm9kZVwiLGUuRGVsZXRlQm9va21hcmtOb2RlPVwiZGVsZXRlLWJvb2ttYXJrLW5vZGVcIn0oX3x8KF89e30pKSxmdW5jdGlvbihlKXtlLlVwZGF0ZUZhdm9yaXRlRW50cmllcz1cInVwZGF0ZS1mYXZvcml0ZS1lbnRyaWVzXCIsZS5VcGRhdGVDb250ZW50TWVudT1cInVwZGF0ZS1jb250ZW50LW1lbnVcIixlLk5hdmlnYXRlQ29udGVudE1lbnU9XCJuYXZpZ2F0ZS1jb250ZW50LW1lbnVcIn0oT3x8KE89e30pKTtjb25zdCBEPXsuLi5GLC4uLlcsLi4uT30sRT0oMCx4LkEpKGAke1widW5kZWZpbmVkXCIhPXR5cGVvZiBmaW4mJmZpbj8ubWUuaWRlbnRpdHkudXVpZH0tZW50ZXJwcmlzZS1ib29rbWFya3NgKSxSPWU9Pih7aWRlbnRpdHk6ZSxvcGVuZmluV2luZG93OmZpbi5XaW5kb3cud3JhcFN5bmMoZSksX2Jvb2ttYXJrczp7X2NyZWF0ZUJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IEUoKSkuZGlzcGF0Y2goXy5DcmVhdGVCb29rbWFya05vZGUsZSkpKGUpLF9nZXRCb29rbWFya05vZGU6YXN5bmMgZT0+KGFzeW5jIGU9Pihhd2FpdCBFKCkpLmRpc3BhdGNoKF8uR2V0Qm9va21hcmtOb2RlLGUpKShlKSxfc2VhcmNoQm9va21hcmtOb2Rlczphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IEUoKSkuZGlzcGF0Y2goXy5TZWFyY2hCb29rbWFya05vZGVzLGUpKShlKSxfdXBkYXRlQm9va21hcmtOb2RlOmFzeW5jIGU9Pihhc3luYyBlPT4oYXdhaXQgRSgpKS5kaXNwYXRjaChfLlVwZGF0ZUJvb2ttYXJrTm9kZSxlKSkoZSksX2RlbGV0ZUJvb2ttYXJrTm9kZTphc3luYyBlPT4oYXN5bmMgZT0+KGF3YWl0IEUoKSkuZGlzcGF0Y2goXy5EZWxldGVCb29rbWFya05vZGUsZSkpKGUpfSxnZXRQYWdlczphc3luYygpPT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRQYWdlc0ZvcldpbmRvdyxlKSxnZXRQYWdlOmFzeW5jIHQ9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkdldFBhZ2VGb3JXaW5kb3cse2lkZW50aXR5OmUscGFnZUlkOnR9KSxhZGRQYWdlOmFzeW5jIHQ9PmooKS5Ccm93c2VyLndyYXBTeW5jKGUpLl9hZGRQYWdlKHQpLF9hZGRQYWdlOmFzeW5jKHQsYSk9Pntjb25zdCBuPWF3YWl0KDAsUC5iVykoZSkscj17aWRlbnRpdHk6ZSxwYWdlOnQsaW5zZXJ0aW9uSW5kZXg6YT8uaW5kZXgsbXVsdGlJbnN0YW5jZVZpZXdCZWhhdmlvcjphPy5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yfTtyZXR1cm4gbi5kaXNwYXRjaChQLk9GLkFkZFBhZ2Uscil9LHJlbW92ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuRGV0YWNoUGFnZXNGcm9tV2luZG93LHtpZGVudGl0eTplLHBhZ2VJZHM6W3RdfSkscmVwYXJlbnRQYWdlOmFzeW5jIHQ9PmooKS5Ccm93c2VyLndyYXBTeW5jKGUpLl9yZXBhcmVudFBhZ2UodCksX3JlcGFyZW50UGFnZTphc3luYyB0PT57Y29uc3R7cGFnZUlkOmF9PXQsbj1hd2FpdCgwLFAuYlcpKGUpLHI9KGF3YWl0IG4uZGlzcGF0Y2goUC5PRi5HZXRBbGxBdHRhY2hlZFBhZ2VzLHZvaWQgMCkpLmZpbmQoKCh7cGFnZUlkOmV9KT0+ZT09PWEpKTtpZighcil0aHJvdyBuZXcgRXJyb3IoYFJlcGFyZW50IFBhZ2UgRXJyb3I6IFRhcmdldCBwYWdlIHdpdGggcGFnZUlkICR7YX0gbm90IGZvdW5kYCk7ci5tdWx0aUluc3RhbmNlVmlld0JlaGF2aW9yPVwicmVwYXJlbnRcIjtjb25zdCBvPXtpZGVudGl0eTplLHBhZ2VzOltyXSxpbnNlcnRpb25JbmRleDp0LmluZGV4fTtyZXR1cm4gbi5kaXNwYXRjaChQLk9GLkF0dGFjaFBhZ2VzVG9XaW5kb3csbyl9LHNldEFjdGl2ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuU2V0QWN0aXZlUGFnZSx7aWRlbnRpdHk6ZSxwYWdlSWQ6dH0pLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxQLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goUC5PRi5VcGRhdGVQYWdlRm9yV2luZG93LHQpfSxyZW9yZGVyUGFnZXM6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxQLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goUC5PRi5SZW9yZGVyUGFnZXNGb3JXaW5kb3csdCl9LF9vcGVuR2xvYmFsQ29udGV4dE1lbnU6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxQLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goUC5PRi5PcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0scmVwbGFjZVRvb2xiYXJPcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCgwLFAuYlcpKGUpO2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlKTthd2FpdCBhLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnt0b29sYmFyT3B0aW9uczp0fX0pfSxyZXBsYWNlV2luZG93U3RhdGVCdXR0b25PcHRpb25zOmFzeW5jIHQ9Pnthd2FpdCgwLFAuYlcpKGUpO2NvbnN0IGE9ZmluLldpbmRvdy53cmFwU3luYyhlKTthd2FpdCBhLnVwZGF0ZU9wdGlvbnMoe3dvcmtzcGFjZVBsYXRmb3JtOnt3aW5kb3dTdGF0ZUJ1dHRvbk9wdGlvbnM6dH19KX0sdXBkYXRlQnJvd3NlcldpbmRvd1RpdGxlOmFzeW5jIHQ9Pntjb25zdCBhPWZpbi5XaW5kb3cud3JhcFN5bmMoZSk7XCJzdHJpbmdcIiE9dHlwZW9mIHQ/YXdhaXQgYS51cGRhdGVPcHRpb25zKHt3b3Jrc3BhY2VQbGF0Zm9ybTp7dGl0bGU6dH19KTpjb25zb2xlLndhcm4oXCJUeXBlIHN0cmluZyBmb3Igd2luZG93IHRpdGxlIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgV2luZG93VGl0bGUgdHlwZSBpbnN0ZWFkXCIsdCl9LF9vcGVuVmlld1RhYkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0KDAsUC5iVykoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKFAuT0YuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsLHQpfSxfb3BlblBhZ2VUYWJDb250ZXh0TWVudTphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLFAuYlcpKGUpO3JldHVybiB0LmlkZW50aXR5PWUsYS5kaXNwYXRjaChQLk9GLk9wZW5QYWdlVGFiQ29udGV4dE1lbnVJbnRlcm5hbCx0KX0sX29wZW5TYXZlTW9kYWw6YXN5bmMgdD0+e2F3YWl0KDAsUC5iVykoZSk7cmV0dXJuKGF3YWl0IEkoZSkpLmRpc3BhdGNoKEQuT3BlblNhdmVNb2RhbEludGVybmFsLHQpfSxfZ2V0TGF5b3V0c1dpdGhTZWxlY3RlZFZpZXdzOmFzeW5jKCk9Pihhd2FpdCBJKGUpKS5kaXNwYXRjaChELkdldExheW91dHNXaXRoU2VsZWN0ZWRWaWV3c0ludGVybmFsLGUpLF9vcGVuU2F2ZUJ1dHRvbkNvbnRleHRNZW51OmFzeW5jIHQ9Pntjb25zdCBhPWF3YWl0KDAsUC5iVykoZSk7cmV0dXJuIHQuaWRlbnRpdHk9ZSxhLmRpc3BhdGNoKFAuT0YuT3BlblNhdmVCdXR0b25Db250ZXh0TWVudUludGVybmFsLHQpfSxfYWRkRGVmYXVsdFBhZ2U6YXN5bmMgdD0+e2NvbnN0IGE9YXdhaXQoMCxQLmJXKShlKTtyZXR1cm4gdC5pZGVudGl0eT1lLGEuZGlzcGF0Y2goUC5PRi5BZGREZWZhdWx0UGFnZSx0KX0sX3RyYWNrUmVtb3ZlZFRhYjphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5UcmFja1JlbW92ZWRUYWJJbnRlcm5hbCx0KSxfcmVzdG9yZVJlbW92ZWRUYWI6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuUmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbCx0KSxfdHJhY2tWaXNpdGVkU2l0ZTphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5UcmFja1Zpc2l0ZWRTaXRlSW50ZXJuYWwsdCksX2dldFJlY2VudGx5VmlzaXRlZFNpdGVzOmFzeW5jIHQ9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkdldFJlY2VudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWwsdCksX2dldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXM6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuR2V0RnJlcXVlbnRseVZpc2l0ZWRTaXRlc0ludGVybmFsLHQpLF9zZWFyY2hTaXRlczphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5TZWFyY2hTaXRlc0ludGVybmFsLHtpZGVudGl0eTplLHJlcTp0fSksX2dldFNlYXJjaFByb3ZpZGVyczphc3luYygpPT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRTZWFyY2hQcm92aWRlcnNJbnRlcm5hbCx7aWRlbnRpdHk6ZX0pLF9nZXRDdXJhdGVkQ29udGVudDphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRDdXJhdGVkQ29udGVudEludGVybmFsLHtpZGVudGl0eTplLHJlcTp0fSksX2hhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uOmFzeW5jIHQ9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkhhbmRsZVJlcXVlc3ROYXZpZ2F0aW9uSW50ZXJuYWwsdCl9KSxCPWU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtyZXR1cm57d3JhcFN5bmM6ZT0+UihlKSxjcmVhdGVXaW5kb3c6YXN5bmMgYT0+e2NvbnN0IG49KCgpPT57Y29uc3QgZT1gYnJvd3Nlci13aW5kb3ctc3RhcnR1cC0keygwLGsuTikoKX1gO3JldHVybiBDLkEubWFya1N0YXJ0KGUpLGV9KSgpOyhlPT57ZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKHt1dWlkOmZpbi5tZS5pZGVudGl0eS51dWlkfSkub25jZShcIndpbmRvdy1zaG93blwiLCgoKT0+e0MuQS5tYXJrQW5kTWVhc3VyZShcImJyb3dzZXItd2luZG93LXNob3duXCIsZSl9KSl9KShuKSxhd2FpdCgwLFAuYlcpKGUpO2NvbnN0IHI9YXdhaXQgdC5jcmVhdGVXaW5kb3coYSk7cmV0dXJuKGU9PntDLkEubWFya0FuZE1lYXN1cmUoXCJicm93c2VyLXdpbmRvdy1zdGFydGVkXCIsZSl9KShuKSxSKHIuaWRlbnRpdHkpfSxnZXRBbGxBdHRhY2hlZFBhZ2VzOmFzeW5jKCk9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkdldEFsbEF0dGFjaGVkUGFnZXMsdm9pZCAwKSxnZXRBbGxXaW5kb3dzOmFzeW5jKCk9Pnthd2FpdCgwLFAuYlcpKGUpO3JldHVybihhd2FpdCgwLGkuSW8pKCkpLm1hcCgoZT0+UihlLmlkZW50aXR5KSkpfSxnZXRVbmlxdWVQYWdlVGl0bGU6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuR2V0VW5pcXVlUGFnZVRpdGxlLHQpLGdldExhc3RGb2N1c2VkV2luZG93OmFzeW5jKCk9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkdldExhc3RGb2N1c2VkQnJvd3NlcldpbmRvdyx2b2lkIDApLGdldFBhZ2VCeVZpZXdJZGVudGl0eTphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRQYWdlQnlWaWV3SWRlbnRpdHksdCl9fSxOPWU9Pih7Y3JlYXRlUGFnZTphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5DcmVhdGVTYXZlZFBhZ2VJbnRlcm5hbCx0KSxkZWxldGVQYWdlOmFzeW5jIHQ9Pihhd2FpdCgwLFAuYlcpKGUpKS5kaXNwYXRjaChQLk9GLkRlbGV0ZVNhdmVkUGFnZUludGVybmFsLHQpLHVwZGF0ZVBhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuVXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWwsdCksZ2V0UGFnZTphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRTYXZlZFBhZ2UsdCksZ2V0UGFnZXM6YXN5bmMgdD0+KGF3YWl0KDAsUC5iVykoZSkpLmRpc3BhdGNoKFAuT0YuR2V0U2F2ZWRQYWdlcyx0KSxzYXZlUGFnZTphc3luYyB0PT4oYXdhaXQoMCxQLmJXKShlKSkuZGlzcGF0Y2goUC5PRi5TYXZlUGFnZSx0KSxjcmVhdGVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5DcmVhdGVTYXZlZFdvcmtzcGFjZSx0KSxkZWxldGVXb3Jrc3BhY2U6YXN5bmMgdD0+e2NvbnN0IGE9aigpLG49YXdhaXQgYS5nZXRDdXJyZW50V29ya3NwYWNlKCk7aWYobi53b3Jrc3BhY2VJZD09PXQpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGVsZXRlIGN1cnJlbnQgYWN0aXZlIHdvcmtzcGFjZSAke24udGl0bGV9YCk7cmV0dXJuKGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5EZWxldGVTYXZlZFdvcmtzcGFjZSx0KX0sdXBkYXRlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuVXBkYXRlU2F2ZWRXb3Jrc3BhY2UsdCksZ2V0V29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuR2V0U2F2ZWRXb3Jrc3BhY2UsdCksZ2V0V29ya3NwYWNlczphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLkdldFNhdmVkV29ya3NwYWNlcyx0KSxzYXZlV29ya3NwYWNlOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuU2F2ZVdvcmtzcGFjZSx0KSxnZXREb2NrUHJvdmlkZXJDb25maWc6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5HZXREb2NrUHJvdmlkZXJDb25maWcsdCksc2F2ZURvY2tQcm92aWRlckNvbmZpZzphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLlNhdmVEb2NrUHJvdmlkZXJDb25maWcsdCl9KTt2YXIgTDshZnVuY3Rpb24oZSl7ZS5VcGRhdGVQbGF0Zm9ybVRoZW1lU2NoZW1lPVwidXBkYXRlLXBsYXRmb3JtLXRoZW1lLXNjaGVtZVwifShMfHwoTD17fSkpOygwLHguQSkoXCJvZi13b3Jrc3BhY2Utbm90aWZpY2F0aW9ucy1zeW5jXCIpO2EoNjk1KTtjb25zdCAkPShlLHQpPT57bG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7by4kaH0tJHtlfWAsdCl9LEc9ZT0+bG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7by4kaH0tJHtlfWApLFU9ZT0+bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYCR7by4kaH0tJHtlfWApLFY9ci5xVC5TeXN0ZW0sej1lPT5PYmplY3QuZW50cmllcyhlKS5yZWR1Y2UoKChlLFt0LGFdKT0+YCR7ZX0tLXdvcmtzcGFjZS1wYWxldHRlLSR7dH06ICR7YX07YCksXCJcIiksSD0oZSx0KT0+KHtzZWxlY3RlZFRhYjpcImRhcmtcIj09PXQ/ZS5iYWNrZ3JvdW5kMzplLmJhY2tncm91bmQxfSk7bmV3IGNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvdmlkZXJTdG9yYWdlPWUsdGhpcy5nZXRWYXJzQnlTY2hlbWU9ZT0+XCJkYXJrXCI9PT1lP3RoaXMuZGFya1BhbGV0dGVWYXJzOnRoaXMubGlnaHRQYWxldHRlVmFycyx0aGlzLnNldFdvcmtzcGFjZVN0b3JhZ2VQcm94eT1lPT57dGhpcy53b3Jrc3BhY2VTdG9yYWdlPWV9LHRoaXMudHJ5U3luY2hyb25pemVXb3Jrc3BhY2VTdG9yYWdlPWFzeW5jKCk9PntpZih0aGlzLndvcmtzcGFjZVN0b3JhZ2Upe2NvbnN0IGU9dGhpcy5nZXRTY2hlbWUoKTtpZihhd2FpdCB0aGlzLndvcmtzcGFjZVN0b3JhZ2Uuc2V0SXRlbShtLlNlbGVjdGVkQ29sb3JTY2hlbWUsZSksdGhpcy5kYXJrUGFsZXR0ZVZhcnMmJnRoaXMubGlnaHRQYWxldHRlVmFycylpZihcImRhcmtcIj09PWV8fFwibGlnaHRcIj09PWUpYXdhaXQgdGhpcy53b3Jrc3BhY2VTdG9yYWdlLnNldEl0ZW0obS5UaGVtZVBhbGV0dGVTaGVldCxgOnJvb3R7JHt0aGlzLmdldFZhcnNCeVNjaGVtZShlKX19YCk7ZWxzZXtjb25zdCBlPWBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKXs6cm9vdCB7JHt0aGlzLmdldFZhcnNCeVNjaGVtZShcImRhcmtcIil9fX1gLHQ9YEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGxpZ2h0KXs6cm9vdHske3RoaXMuZ2V0VmFyc0J5U2NoZW1lKFwibGlnaHRcIil9fX1gO2F3YWl0IHRoaXMud29ya3NwYWNlU3RvcmFnZS5zZXRJdGVtKG0uVGhlbWVQYWxldHRlU2hlZXQsYCR7dH0ke2V9YCl9fX0sdGhpcy5zZXRQYWxldHRlcz1hc3luYyh7bGlnaHQ6ZSxkYXJrOnR9KT0+e3RoaXMubGlnaHRQYWxldHRlVmFycz16KHsuLi5lLC4uLkgoZSxcImxpZ2h0XCIpfSksdGhpcy5kYXJrUGFsZXR0ZVZhcnM9eih7Li4udCwuLi5IKHQsXCJkYXJrXCIpfSl9fXNldFNjaGVtZShlKXt0aGlzLnByb3ZpZGVyU3RvcmFnZS5zZXRJdGVtKG0uU2VsZWN0ZWRDb2xvclNjaGVtZSxlKX1nZXRTY2hlbWUoKXtyZXR1cm4gbnVsbD09PXRoaXMucHJvdmlkZXJTdG9yYWdlLmdldEl0ZW0obS5TZWxlY3RlZENvbG9yU2NoZW1lKSYmdGhpcy5wcm92aWRlclN0b3JhZ2Uuc2V0SXRlbShtLlNlbGVjdGVkQ29sb3JTY2hlbWUsViksdGhpcy5wcm92aWRlclN0b3JhZ2UuZ2V0SXRlbShtLlNlbGVjdGVkQ29sb3JTY2hlbWUpfX0obik7Y29uc3QgcT1lPT4oe2dldFRoZW1lczphc3luYygpPT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLkdldFRoZW1lcyx2b2lkIDApLHNldFNlbGVjdGVkU2NoZW1lOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuU2V0U2VsZWN0ZWRTY2hlbWUsdCksZ2V0U2VsZWN0ZWRTY2hlbWU6YXN5bmMoKT0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRTZWxlY3RlZFNjaGVtZSx2b2lkIDApfSksaj0oKT0+KGU9Pntjb25zdCB0PWZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKTtsZXQgYTtjb25zdCBuPU9iamVjdC5hc3NpZ24odCx7YXBwbHlTbmFwc2hvdDphc3luYyh0LGEpPT57aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiF0Py53aW5kb3dzKXRocm93IG5ldyBFcnJvcihcIk5vdCBhIHZhbGlkIGJyb3dzZXIgc25hcHNob3RcIik7cmV0dXJuIGZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5hcHBseVNuYXBzaG90KHQsYSl9LGdldFNuYXBzaG90OigpPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0U25hcHNob3QoKS50aGVuKChlPT5lKSksZ2V0Vmlld1NuYXBzaG90OnQ9PmZpbi5QbGF0Zm9ybS53cmFwU3luYyhlKS5nZXRWaWV3U25hcHNob3QodCksY3JlYXRlVmlldzoodCxhLG4pPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuY3JlYXRlVmlldyh0LGEsbiksbGF1bmNoQXBwOmFzeW5jIHQ9Pihjb25zb2xlLndhcm4oXCJsYXVuY2hBcHAgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBjcmVhdGVWaWV3IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNhZGQtYS12aWV3LXRvLWFuLWV4aXN0aW5nLXdpbmRvdyBvciAgY3JlYXRlV2luZG93IC0gaHR0cHM6Ly9kZXZlbG9wZXJzLm9wZW5maW4uY28vb2YtZG9jcy9kb2NzL3BsYXRmb3JtLWdldHRpbmctc3RhcnRlZCNjcmVhdGUtYS1wbGF0Zm9ybS13aW5kb3cgaW5zdGVhZC5cIiksdC50YXJnZXR8fCh0LnRhcmdldD17dXVpZDpvLiRoLG5hbWU6by52TCxlbnRpdHlUeXBlOm8uZlR8fFwidW5rbm93blwifSksKGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5MYXVuY2hBcHAsdCkpLF9pbnZva2VDdXN0b21BY3Rpb246YXN5bmModCxhKT0+e2NvbnN0IG49YXdhaXQoMCxQLk4pKGUpLG89e2FjdGlvbklkOnQscGF5bG9hZDp7Li4uYSxjYWxsZXJUeXBlOmEuY2FsbGVyVHlwZXx8ci52Yy5BUEl9fTtyZXR1cm4gbi5kaXNwYXRjaChQLk9GLkludm9rZUN1c3RvbUFjdGlvbkludGVybmFsLG8pfSxfcmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZzphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLlJlcXVlc3RRdWl0UGxhdGZvcm1EaWFsb2dJbnRlcm5hbCx0KSxnZXRDdXJyZW50V29ya3NwYWNlOmFzeW5jKCk9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuR2V0Q3VycmVudFdvcmtzcGFjZSx2b2lkIDApLGFwcGx5V29ya3NwYWNlOmFzeW5jKHQsYSk9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuQXBwbHlXb3Jrc3BhY2Usey4uLnQsb3B0aW9uczphfSkscmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZTphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLlJlc3RvcmVMYXN0U2F2ZWRXb3Jrc3BhY2VJbnRlcm5hbCx0KSxzZXRBY3RpdmVXb3Jrc3BhY2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5TZXRBY3RpdmVXb3Jrc3BhY2UsdCksZ2V0TGFuZ3VhZ2U6YXN5bmMoKT0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5HZXRMYW5ndWFnZSksX2dldExhbmd1YWdlUmVzb3VyY2VzOmFzeW5jKCk9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuR2V0TGFuZ3VhZ2VSZXNvdXJjZXNJbnRlcm5hbCksc2V0TGFuZ3VhZ2U6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5TZXRMYW5ndWFnZSx0KSxfcmFpc2VBbmFseXRpY3M6YXN5bmMgdD0+e2lmKGF8fChhPWF3YWl0KDAsUC5LWikoZSkpLFwib2JqZWN0XCI9PXR5cGVvZiBhJiZhPy5hbmFseXRpY3M/LmlzU3VwcG9ydGVkKXJldHVybihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuQW5hbHl0aWNzLHQpO2UudXVpZH0sZ2V0Tm90aWZpY2F0aW9uc0NvbmZpZzphc3luYygpPT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLkdldE5vdGlmaWNhdGlvbnNDb25maWcpLF9yZWZyZXNoQm9va21hcmtzSW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5SZWZyZXNoQm9va21hcmtzSW50ZXJuYWwpLF9sYXVuY2hCb29rbWFya0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuTGF1bmNoQm9va21hcmtJbnRlcm5hbCx0KSxfdXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuVXBkYXRlRG9ja0Zhdm9yaXRlc0ludGVybmFsLHQpLF91cGRhdGVDb250ZW50TWVudUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuVXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbCx0KSxfbGF1bmNoRG9ja0VudHJ5SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5MYXVuY2hEb2NrRW50cnlJbnRlcm5hbCx0KSxfc2V0RG9ja0Zhdm9yaXRlc0ludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuU2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWwsdCksX3NldERlZmF1bHREb2NrQnV0dG9uc09yZGVySW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5TZXREZWZhdWx0RG9ja0J1dHRvbnNPcmRlckludGVybmFsLHQpLF9yZW1vdmVEb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsLHQpLF9hZGREb2NrRmF2b3JpdGVJbnRlcm5hbDphc3luYyB0PT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLkFkZERvY2tGYXZvcml0ZUludGVybmFsLHQpLF9uYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWw6YXN5bmMgdD0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5OYXZpZ2F0ZUNvbnRlbnRNZW51SW50ZXJuYWwsdCksX29wZW5Eb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWw6YXN5bmMoKT0+KGF3YWl0KDAsUC5OKShlKSkuZGlzcGF0Y2goUC5PRi5HZXREb2NrV29ya3NwYWNlc0NvbnRleHRNZW51SW50ZXJuYWwpLF9oYW5kbGVEb2NrV29ya3NwYWNlc01lbnVSZXNwb25zZUludGVybmFsOmFzeW5jIHQ9Pihhd2FpdCgwLFAuTikoZSkpLmRpc3BhdGNoKFAuT0YuSGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbCx0KSxfZm9jdXNBbmRFeHBhbmRTZWFyY2hJbnRlcm5hbDphc3luYygpPT4oYXdhaXQoMCxQLk4pKGUpKS5kaXNwYXRjaChQLk9GLkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWwpLFRoZW1lOnEoZSksQnJvd3NlcjpCKGUpLFN0b3JhZ2U6TihlKX0pO3JldHVybiBufSkoZmluLm1lLmlkZW50aXR5KTtjb25zdCBYPShlLHQpPT5lLmNvbnRlbnQ/ey4uLmUsY29udGVudDplLmNvbnRlbnQubWFwKChlPT5YKGUsdCkpKX06ey4uLmUsY29tcG9uZW50U3RhdGU6dChlLmNvbXBvbmVudFN0YXRlKX0sSz1lPT4oey4uLmUsbmFtZTp2b2lkIDB9KSxRPWU9Pntjb25zdCB0PXsuLi5lfTtyZXR1cm4gWCh0LEspfSxaPWU9Pntjb25zdCB0PVtdO3JldHVybihlJiZBcnJheS5pc0FycmF5KGUpP2U6W10pLmZvckVhY2goKGU9PntpZihcImNvbXBvbmVudFwiPT09ZS50eXBlKXJldHVybiB0LnB1c2goZS5jb21wb25lbnRTdGF0ZSk7Y29uc3QgYT1aKGUuY29udGVudCk7dC5wdXNoKC4uLmEpfSkpLHR9O25ldyBNYXAsbmV3IE1hcDtjb25zdCBZPWFzeW5jKGUsdCk9Pntjb25zdCBhPShlPT57Y29uc3QgdD1maW4uUGxhdGZvcm0uTGF5b3V0LndyYXBTeW5jKGUpO3JldHVybntzaG93OmFzeW5jKCk9Pntjb25zdCBhPWF3YWl0IHQuZ2V0Q29uZmlnKCkse3NldHRpbmdzOm4sZGltZW5zaW9uczpyfT1hLG89YXdhaXQgcyhlKTthd2FpdCB0LnJlcGxhY2Uoey4uLmEsc2V0dGluZ3M6ey4uLm4saGFzSGVhZGVyczohMCxyZW9yZGVyRW5hYmxlZDohMH0sZGltZW5zaW9uczp7Li4ucixoZWFkZXJIZWlnaHQ6bz8yODozMH19KX0saGlkZTphc3luYyBlPT57Y29uc3QgYT1hd2FpdCB0LmdldENvbmZpZygpLHtzZXR0aW5nczpuLGRpbWVuc2lvbnM6cn09YXdhaXQgYTthd2FpdCB0LnJlcGxhY2Uoey4uLmEsc2V0dGluZ3M6ey4uLm4saGFzSGVhZGVyczohMSxyZW9yZGVyRW5hYmxlZDplPy5zZXR0aW5ncz8ucmVvcmRlckVuYWJsZWQ/PyExfSxkaW1lbnNpb25zOnsuLi5yLGhlYWRlckhlaWdodDowfX0pfSxpc1Nob3dpbmdUYWJzOmFzeW5jKCk9Pnt0cnl7Y29uc3QgZT1hd2FpdCB0LmdldENvbmZpZygpLHtzZXR0aW5nczphfT1hd2FpdCBlO3JldHVybiBhLmhhc0hlYWRlcnN9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gZ2V0IGxheW91dCBjb25maWc6IFwiLGUpLCEwfX19fSkoey4uLmkuJHAsbGF5b3V0TmFtZTplLmxheW91dENvbnRhaW5lcktleX0pLG49YXdhaXQgYS5pc1Nob3dpbmdUYWJzKCk7dD4xP258fGF3YWl0IGEuc2hvdygpOjE9PT10JiZuJiZhd2FpdCBhLmhpZGUoe3NldHRpbmdzOntyZW9yZGVyRW5hYmxlZDohMH19KX0sSj0oZygpKChhc3luYyBlPT57dHJ5e2NvbnN0IHQ9YXdhaXQoYXN5bmMgZT0+ZmluLlBsYXRmb3JtLkxheW91dC53cmFwU3luYyh7Li4uZmluLm1lLmlkZW50aXR5LGxheW91dE5hbWU6ZX0pLmdldENvbmZpZygpKShlLmxheW91dENvbnRhaW5lcktleSksYT10LmNvbnRlbnQ/Wih0LmNvbnRlbnQpOltdLG49YS5sZW5ndGg7bj4xPyhlPT57XCJtdWx0aVZpZXdcIiE9PWUuYXR0YWNoZWRQYWdlVHlwZSYmaigpLkJyb3dzZXIud3JhcFN5bmMoaS4kcCkudXBkYXRlUGFnZSh7cGFnZUlkOmUucGFnZUlkLHBhZ2U6e3NpbmdsZVZpZXdOYW1lOm51bGwsYXR0YWNoZWRQYWdlVHlwZTpcIm11bHRpVmlld1wifX0pfSkoZSk6MT09PW4mJihhc3luYyhlLHQpPT57Y29uc3QgYT1qKCkuQnJvd3Nlci53cmFwU3luYyhpLiRwKTtpZihcInNpbmdsZVZpZXdcIiE9PWUuYXR0YWNoZWRQYWdlVHlwZSl7Y29uc3Qgbj1hd2FpdCBTKGUpLHI9YXdhaXQgaigpLkJyb3dzZXIuZ2V0VW5pcXVlUGFnZVRpdGxlKCk7ZGVsZXRlIG4ubGF5b3V0O2NvbnN0IG89ey4uLm4sc2luZ2xlVmlld05hbWU6dCx0aXRsZTpyLGhhc1Vuc2F2ZWRDaGFuZ2VzOiExLGF0dGFjaGVkUGFnZVR5cGU6XCJzaW5nbGVWaWV3XCJ9O2F3YWl0IGEudXBkYXRlUGFnZSh7cGFnZUlkOmUucGFnZUlkLHBhZ2U6b30pfX0pKGUsYVswXS5uYW1lKSxhd2FpdCBZKGUsbil9Y2F0Y2goZSl7fX0pLDUwLHtsZWFkaW5nOiExLHRyYWlsaW5nOiEwfSkscmVxdWlyZShcInJlYWN0LWkxOG5leHRcIikscmVxdWlyZShcImkxOG5leHRcIikpO2EubihKKSgpLnQ7bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5xdWV1ZT1bXSx0aGlzLmxvY2tlZD0hMX1sb2NrKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlPT57dGhpcy5sb2NrZWQ/dGhpcy5xdWV1ZS5wdXNoKGUpOih0aGlzLmxvY2tlZD0hMCxlKCkpfSkpfXVubG9jaygpe2lmKHRoaXMucXVldWUubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5xdWV1ZS5zaGlmdCgpO2UmJmUoKX1lbHNlIHRoaXMubG9ja2VkPSExfX07bmV3IE1hcDtjb25zdCBlZT0oKGUsdCk9Pntjb25zdCBhPWU7cmV0dXJuIGEud29ya3NwYWNlUGxhdGZvcm18fChhLndvcmtzcGFjZVBsYXRmb3JtPXt9KSxhLndvcmtzcGFjZVBsYXRmb3JtLl9pbnRlcm5hbERlZmVyU2hvd09wdGlvbnM9e3NldEFzRm9yZWdyb3VuZDohIXQsZGVmZXJTaG93RW5hYmxlZDohMCxhdXRvU2hvdzphLndvcmtzcGFjZVBsYXRmb3JtPy5faW50ZXJuYWxBdXRvU2hvd3x8YS53b3Jrc3BhY2VQbGF0Zm9ybT8uX2ludGVybmFsRGVmZXJTaG93T3B0aW9ucz8uYXV0b1Nob3d8fHZvaWQgMD09PWEuYXV0b1Nob3d8fGEuYXV0b1Nob3d9LGEuYXV0b1Nob3c9ITEsYX0pKHthbHdheXNPblRvcDohMCxhdXRvU2hvdzohMSxmcmFtZTohMSxyZXNpemFibGU6ITEsc2hvd1Rhc2tiYXJJY29uOiExfSk7IWZ1bmN0aW9uKGU9ZWUpe2NvbnN0IHQ9bmV3IE1hcH0oKTthKDUyMyk7ZnVuY3Rpb24gdGUoZSx0KXtyZXR1cm4gYXN5bmMoYSwuLi5uKT0+e2UuaGFzKGEpJiZlLmdldChhKS5mb3JFYWNoKChlPT5lKC4uLm4pKSksdCYmYXdhaXQgdCh7ZXZlbnQ6YSxwYXlsb2FkOm59KX19ZnVuY3Rpb24gYWUoZSx0KXtyZXR1cm4gdCYmdCgodD0+e2NvbnN0e2V2ZW50OmEscGF5bG9hZDpufT10O2UuaGFzKGEpJiZlLmdldChhKS5mb3JFYWNoKChlPT5lKC4uLm4pKSl9KSksKHQsYSk9PntlLmhhcyh0KXx8ZS5zZXQodCxuZXcgU2V0KSxlLmdldCh0KS5hZGQoYSl9fWZ1bmN0aW9uIG5lKGUpe3JldHVybih0LGEpPT57ZS5oYXModCl8fGUuc2V0KHQsbmV3IFNldCk7Y29uc3Qgbj1lLmdldCh0KSxyPSguLi5lKT0+e2EoLi4uZSksbi5kZWxldGUocil9O24uYWRkKHIpfX1mdW5jdGlvbiByZShlKXtyZXR1cm4odCxhKT0+e2UuaGFzKHQpJiZlLmdldCh0KS5kZWxldGUoYSl9fWkuUS5Ccm93c2VyTWVudTsoZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgTWFwO3RlKHQsKHQ9Pm8uY0kmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnB1Ymxpc2goZSx0KSkpLGFlKHQsKHQ9Pm8uY0kmJmZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLnN1YnNjcmliZSh7dXVpZDpmaW4ubWUudXVpZH0sZSx0KSkpLHJlKHQpLG5lKHQpfSkoXCJ3aW5kb3cubWVudVwiKSxjKCgoKT0+KDAscC52MSkoKS5nZXRDaGlsZFdpbmRvd3MoKSksNTAwKTtuZXcgTWFwO25ldyBNYXA7ZygpKChhc3luYygpPT57Y29uc3QgZT1hd2FpdCBmaW4uUGxhdGZvcm0uZ2V0Q3VycmVudFN5bmMoKS5BcHBsaWNhdGlvbi5nZXRDaGlsZFdpbmRvd3MoKTtsZXQgdCxhPSExO2Zvcihjb25zdCBuIG9mIGUpaWYobi5pZGVudGl0eS5uYW1lPT09aS5RLkJyb3dzZXJNZW51fHxuLmlkZW50aXR5Lm5hbWU9PT1pLlEuQnJvd3NlclNhdmVNZW51P3Q9bjphd2FpdCgwLGkuaGIpKG4uaWRlbnRpdHkpJiYoYT0hMCksYSlicmVhazshYSYmdCYmdC5jbG9zZSgpfSksMTAwLHtsZWFkaW5nOiExLHRyYWlsaW5nOiEwfSk7dmFyIG9lLGllOyFmdW5jdGlvbihlKXtlLlNhdmU9XCJTYXZlXCIsZS5TYXZlQXM9XCJTYXZlQXNcIn0ob2V8fChvZT17fSkpLGZ1bmN0aW9uKGUpe2UuR2xvYmFsTWVudT1cImdsb2JhbC1tZW51XCIsZS5Db250ZXh0TWVudT1cImNvbnRleHQtbWVudVwiLGUuUmVuYW1lU3VwZXJ0YWI9XCJyZW5hbWUtc3VwZXJ0YWJcIixlLkFkZEVkaXRCb29rbWFyaz1cImFkZC1lZGl0LWJvb2ttYXJrXCIsZS5Ecm9wZG93bk1lbnU9XCJkcm9wZG93bi1tZW51XCJ9KGllfHwoaWU9e30pKTtjb25zdCBzZT1yZXF1aXJlKFwiZGV4aWVcIiksY2U9ZT0+ZStcIi1cIitmaW4ubWUudXVpZCxkZT0oZSx0KT0+e2NvbnN0IGE9by5BVCYmby5jSSYmbmV3IHNlLkRleGllKGUpO3JldHVybiBhJiZhLnZlcnNpb24oLjEpLnN0b3Jlcyh7W3RdOlwiXCJ9KSxhfSxsZT0oZSx0KT0+e2NvbnN0IGE9ZGUoY2UoZSksdCksbj1kZShlLHQpO2lmKCFhfHwhbil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gbWlncmF0ZSBzdG9yZSAtIEluZGV4REIgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4oYXN5bmMoZSx0LGEpPT57Y29uc3Qgbj1HKG0uSGFzTW92ZWRTdG9yZSkscj1uP0pTT04ucGFyc2Uobik6e307aWYociYmclthXSlyZXR1cm47clthXT0hMCwkKG0uSGFzTW92ZWRTdG9yZSxKU09OLnN0cmluZ2lmeShyKSk7Y29uc3Qgbz1hd2FpdCBlW2FdLnRvQXJyYXkoKTthd2FpdCB0W2FdLmJ1bGtQdXQobyl9KShuLGEsZSksYX0sdWU9XCJ2aXNpdGVkLXNpdGVzXCIscGU9XCJyZW1vdmVkLXRhYi1zdGFja1wiLGhlPShvLkFUJiZvLmNJJiZsZShcIm9wZW5maW4taG9tZS1wYWdlc1wiLFwicGFnZXNcIiksby5BVCYmby5jSSYmbmV3IHNlLkRleGllKGNlKFwib3BlbmZpbi1lbnRlcnByaXNlLXNpdGUtaGlzdG9yeVwiKSkpO2hlJiZoZS52ZXJzaW9uKC4xKS5zdG9yZXMoe1t1ZV06XCJpZCwgdXJsXCJ9KTtjb25zdCBmZT1vLkFUJiZvLmNJJiZuZXcgc2UuRGV4aWUoY2UoXCJvcGVuZmluLWVudGVycHJpc2UtdGFiLWhpc3RvcnlcIikpO2ZlJiZmZS52ZXJzaW9uKC4xKS5zdG9yZXMoe1twZV06XCJcIn0pO3ZhciBnZTshZnVuY3Rpb24oZSl7ZS5MYWJlbD1cIm5vcm1hbFwiLGUuU2VwYXJhdG9yPVwic2VwYXJhdG9yXCIsZS5TdWJtZW51PVwic3VibWVudVwiLGUuQ2hlY2tib3g9XCJjaGVja2JveFwifShnZXx8KGdlPXt9KSk7Z2UuU2VwYXJhdG9yO3ZhciBtZTshZnVuY3Rpb24oZSl7ZVtlLlRvcExlZnQ9MF09XCJUb3BMZWZ0XCIsZVtlLlRvcFJpZ2h0PTFdPVwiVG9wUmlnaHRcIixlW2UuQm90dG9tTGVmdD0yXT1cIkJvdHRvbUxlZnRcIixlW2UuQm90dG9tUmlnaHQ9M109XCJCb3R0b21SaWdodFwiLGVbZS5DZW50ZXI9NF09XCJDZW50ZXJcIn0obWV8fChtZT17fSkpOygwLHguQSkoYCR7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbiYmZmluPy5tZS5pZGVudGl0eS51dWlkfS1lbnRlcnByaXNlLWRvY2tgKTtjb25zdCB3ZT1cImRvY2stcHJvdmlkZXItY29uZmlnc1wiLHllPW8uQVQmJm8uY0kmJm5ldyBzZS5EZXhpZShjZShcImRvY2stcHJvdmlkZXItY29uZmlnc1wiKSk7eWUmJnllLnZlcnNpb24oLjEpLnN0b3Jlcyh7W3dlXTpcIlwifSk7Y29uc3QgdmU9XCJ3b3Jrc3BhY2VzXCI7by5BVCYmby5jSSYmbGUoXCJvcGVuZmluLXdvcmtzcGFjZS1wbGF0Zm9ybS13b3Jrc3BhY2VzXCIsdmUpO2EoMjUwKTtpLiRwLnV1aWQsaS5RLkJyb3dzZXJBZGRyZXNzU2VhcmNoUHJlZml4O2EoMTc5KX0sNjc1OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7cVQ6KCk9Pm8sdmM6KCk9Pmh9KTt2YXIgbixyLG8saSxzLGMsZCxsLHUscCxoO2EoMTc5KSxhKDI1MCk7IWZ1bmN0aW9uKGUpe2UuVXJsQ2hhbmdlPVwiVVJMX0NIQU5HRVwiLGUuVmlld0FkZGVkPVwiVklFV19BRERFRFwiLGUuVmlld1JlbW92ZWQ9XCJWSUVXX1JFTU9WRURcIixlLlBhZ2VDb250ZXh0QWRkZWQ9XCJQQUdFX0NPTlRFWFRfQURERURcIixlLlBhZ2VDb250ZXh0UmVtb3ZlZD1cIlBBR0VfQ09OVEVYVF9SRU1PVkVEXCJ9KG58fChuPXt9KSksZnVuY3Rpb24oZSl7ZS5OZXdXaW5kb3c9XCJOZXdXaW5kb3dcIixlLk5ld1BhZ2U9XCJOZXdQYWdlXCIsZS5TYXZlUGFnZT1cIlNhdmVQYWdlXCIsZS5TYXZlUGFnZUFzPVwiU2F2ZVBhZ2VBc1wiLGUuUHJpbnQ9XCJQcmludFwiLGUuUHJpbnRBbGw9XCJQcmludEFsbFwiLGUuUHJpbnRTY3JlZW49XCJQcmludFNjcmVlblwiLGUuQ2xvc2VXaW5kb3c9XCJDbG9zZVdpbmRvd1wiLGUuUmVzdG9yZUNoYW5nZXM9XCJSZXN0b3JlQ2hhbmdlc1wiLGUuU2F2ZVdvcmtzcGFjZT1cIlNhdmVXb3Jrc3BhY2VcIixlLlNhdmVXb3Jrc3BhY2VBcz1cIlNhdmVXb3Jrc3BhY2VBc1wiLGUuUmVuYW1lV29ya3NwYWNlPVwiUmVuYW1lV29ya3NwYWNlXCIsZS5Td2l0Y2hXb3Jrc3BhY2U9XCJTd2l0Y2hXb3Jrc3BhY2VcIixlLkRlbGV0ZVdvcmtzcGFjZT1cIkRlbGV0ZVdvcmtzcGFjZVwiLGUuRG93bmxvYWRzPVwiRG93bmxvYWRzXCIsZS5PcGVuU3RvcmVmcm9udD1cIk9wZW5TdG9yZWZyb250XCIsZS5BcHBlYXJhbmNlPVwiQXBwZWFyYW5jZVwiLGUuUXVpdD1cIlF1aXRcIixlLkN1c3RvbT1cIkN1c3RvbVwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2UuTGlnaHQ9XCJsaWdodFwiLGUuRGFyaz1cImRhcmtcIixlLlN5c3RlbT1cInN5c3RlbVwifShvfHwobz17fSkpLGZ1bmN0aW9uKGUpe2UuQ2xvc2U9XCJDbG9zZVwiLGUuRHVwbGljYXRlPVwiRHVwbGljYXRlXCIsZS5SZW5hbWU9XCJSZW5hbWVcIixlLlNhdmU9XCJTYXZlXCIsZS5TYXZlQXM9XCJTYXZlIEFzXCIsZS5OZXdQYWdlPVwiTmV3IFBhZ2VcIixlLkRlbGV0ZVBhZ2U9XCJEZWxldGUgUGFnZVwiLGUuU2F2ZVdvcmtzcGFjZUFzPVwiU2F2ZVdvcmtzcGFjZUFzXCIsZS5SZWZyZXNoPVwiUmVmcmVzaFwiLGUuQ2xvc2VPdGhlcnM9XCJDbG9zZSBvdGhlcnNcIixlLkRlbGV0ZT1cIkRlbGV0ZVwiLGUuUHJpbnQ9XCJQcmludFwiLGUuUHJpbnRBbGw9XCJQcmludEFsbFwiLGUuUHJpbnRTY3JlZW49XCJQcmludFNjcmVlblwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KGl8fChpPXt9KSksZnVuY3Rpb24oZSl7ZS5Mb2NrPVwiTG9ja1wiLGUuU2hvd0hpZGVUYWJzPVwiU2hvd0hpZGVUYWJzXCIsZS5BZGRUb0NoYW5lbD1cIkFkZFRvQ2hhbm5lbFwiLGUuUHJpbnQ9XCJQcmludFwiLGUuUGluPVwiUGluXCJ9KHN8fChzPXt9KSksZnVuY3Rpb24oZSl7ZS5FZGl0TmFtZT1cIkVkaXQgTmFtZVwiLGUuTW92ZT1cIk1vdmVcIixlLkRlbGV0ZT1cIkRlbGV0ZVwifShjfHwoYz17fSkpLGZ1bmN0aW9uKGUpe2UuTmV3Vmlldz1cIk5ld1ZpZXdcIixlLkR1cGxpY2F0ZVZpZXdzPVwiRHVwbGljYXRlVmlld1wiLGUuT3BlbldpdGhEZWZhdWx0QnJvd3Nlcj1cIk9wZW5XaXRoRGVmYXVsdEJyb3dzZXJcIixlLlJlbG9hZFZpZXdzPVwiUmVsb2FkVGFiXCIsZS5DbG9zZVZpZXdzPVwiQ2xvc2VUYWJcIixlLkFkZFRvQ2hhbm5lbD1cIkFkZFRvQ2hhbm5lbFwiLGUuUmVtb3ZlRnJvbUNoYW5uZWw9XCJSZW1vdmVGcm9tQ2hhbm5lbFwiLGUuQmFjaz1cIkJhY2tcIixlLkZvcndhcmQ9XCJGb3J3YXJkXCIsZS5QcmludD1cIlByaW50XCIsZS5QcmludEFsbD1cIlByaW50QWxsXCIsZS5QcmludFNjcmVlbj1cIlByaW50U2NyZWVuXCIsZS5DdXN0b209XCJDdXN0b21cIn0oZHx8KGQ9e30pKSxmdW5jdGlvbihlKXtlLlNob3dIaWRlVGFicz1cIlNob3dIaWRlVGFic1wiLGUuQ29sb3JMaW5raW5nPVwiQ29sb3JMaW5raW5nXCIsZS5QcmVzZXRMYXlvdXRzPVwiUHJlc2V0TGF5b3V0c1wiLGUuTG9ja1VubG9ja1BhZ2U9XCJMb2NrVW5sb2NrUGFnZVwiLGUuU2F2ZU1lbnU9XCJTYXZlTWVudVwiLGUuU2F2ZVBhZ2U9XCJTYXZlUGFnZVwiLGUuTWluaW1pc2U9XCJNaW5pbWlzZVwiLGUuTWF4aW1pc2U9XCJNYXhpbWlzZVwiLGUuQ2xvc2U9XCJDbG9zZVwiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KGx8fChsPXt9KSksZnVuY3Rpb24oZSl7ZS5TYXZlUGFnZT1cIlNhdmVQYWdlXCIsZS5TYXZlV29ya3NwYWNlPVwiU2F2ZVdvcmtzcGFjZVwiLGUuU2F2ZVBhZ2VBcz1cIlNhdmVQYWdlQXNcIixlLlNhdmVXb3Jrc3BhY2VBcz1cIlNhdmVXb3Jrc3BhY2VBc1wiLGUuQ3VzdG9tPVwiQ3VzdG9tXCJ9KHV8fCh1PXt9KSksZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiYnJvd3NlclwiLGUuUGxhdGZvcm09XCJwbGF0Zm9ybVwifShwfHwocD17fSkpLGZ1bmN0aW9uKGUpe2UuQ3VzdG9tQnV0dG9uPVwiQ3VzdG9tQnV0dG9uXCIsZS5TdG9yZUN1c3RvbUJ1dHRvbj1cIlN0b3JlQ3VzdG9tQnV0dG9uXCIsZS5DdXN0b21Ecm9wZG93bkl0ZW09XCJDdXN0b21Ecm9wZG93bkl0ZW1cIixlLkdsb2JhbENvbnRleHRNZW51PVwiR2xvYmFsQ29udGV4dE1lbnVcIixlLlZpZXdUYWJDb250ZXh0TWVudT1cIlZpZXdUYWJDb250ZXh0TWVudVwiLGUuUGFnZVRhYkNvbnRleHRNZW51PVwiUGFnZVRhYkNvbnRleHRNZW51XCIsZS5TYXZlQnV0dG9uQ29udGV4dE1lbnU9XCJTYXZlQnV0dG9uQ29udGV4dE1lbnVcIixlLkFQST1cIkFQSVwifShofHwoaD17fSkpO3ZhciBmOyFmdW5jdGlvbihlKXtlLlNBVkVfUEFHRT1cIlNBVkVfUEFHRVwiLGUuU0FWRV9XT1JLU1BBQ0U9XCJTQVZFX1dPUktTUEFDRVwiLGUuU0FWRV9QQUdFX0FTPVwiU0FWRV9QQUdFX0FTXCIsZS5TQVZFX1dPUktTUEFDRV9BUz1cIlNBVkVfV09SS1NQQUNFX0FTXCIsZS5SRU5BTUVfUEFHRT1cIlJFTkFNRV9QQUdFXCIsZS5SRU5BTUVfV09SS1NQQUNFPVwiUkVOQU1FX1dPUktTUEFDRVwifShmfHwoZj17fSkpfSwyNDg6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtIOigpPT5vfSk7dmFyIG49YSg0MzgpLHI9YSg3ODYpO2NvbnN0IG89KGUsdCk9PntyLkEubWFya1N0YXJ0KGAke2V9LXJlZ2lzdHJhdGlvbmApLCgwLG4uQlkpKCkub25jZShcInN0YXJ0ZWRcIiwoKCk9PnIuQS5tYXJrQW5kTWVhc3VyZShcIndvcmtzcGFjZS1hcHAtc3RhcnRlZFwiLGAke2V9LXJlZ2lzdHJhdGlvbmApKSk7Y29uc3QgYT1maW4uV2luZG93LndyYXBTeW5jKHQpO2Eub25jZShcImluaXRpYWxpemVkXCIsKCgpPT5yLkEubWFya0FuZE1lYXN1cmUoYCR7ZX0td2luZG93LWluaXRpYWxpemVkYCxgJHtlfS1yZWdpc3RyYXRpb25gKSkpLGEub25jZShcInNob3duXCIsKCgpPT57ci5BLm1hcmtBbmRNZWFzdXJlKGAke2V9LXNob3dgLGAke2V9LXJlZ2lzdHJhdGlvbmApfSkpfX0sODM0OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLnIodCksYS5kKHQse0NMSUFjdGlvbjooKT0+QS5QSyxDTElGaWx0ZXJPcHRpb25UeXBlOigpPT5BLm9vLENMSVRlbXBsYXRlOigpPT5BLmZDLGRlcmVnaXN0ZXI6KCk9PkYsaGlkZTooKT0+VCxyZWdpc3RlcjooKT0+SSxzaG93OigpPT5XfSk7dmFyIG49YSg3MjMpLHI9YSg3ODYpLG89YSgyNzcpLGk9YSg3MCk7Y29uc3Qgcz1cIjBcIixjPVwiMlwiLGQ9XCIzXCIsbD1cIjVcIix1PVwiNlwiO3ZhciBwPWEoNjk1KSxoPWEoNzkpLGY9YSg1NzUpO3ZhciBnPWEoOTA1KTtjb25zdCBtPSgpPT57fTtmdW5jdGlvbiB3KGUpe2NvbnN0IHQ9e307bGV0IGE9W107bGV0IG49W107bGV0IHI9bnVsbDtsZXQgbz1nLlpvLkluaXRpYWw7dC5nZXRTdGF0dXM9KCk9Pm8sdC5nZXRSZXN1bHRCdWZmZXI9KCk9PmEsdC5zZXRSZXN1bHRCdWZmZXI9ZT0+e2E9ZSxhPy5sZW5ndGgmJnQub25DaGFuZ2UoKX0sdC5nZXRSZXZva2VkQnVmZmVyPSgpPT5uLHQuc2V0UmV2b2tlZEJ1ZmZlcj1lPT57bj1lLG4/Lmxlbmd0aCYmdC5vbkNoYW5nZSgpfSx0LnNldFVwZGF0ZWRDb250ZXh0PWU9PntyPWUsbnVsbCE9PXImJnQub25DaGFuZ2UoKX0sdC5nZXRVcGRhdGVkQ29udGV4dD0oKT0+cix0Lm9uQ2hhbmdlPW07Y29uc3QgaT17fTtyZXR1cm4gdC5yZXM9aSxpLmNsb3NlPSgpPT57byE9PWcuWm8uQ2xvc2UmJihvPWcuWm8uQ2xvc2UsdC5vbkNoYW5nZSgpKX0saS5vcGVuPSgpPT57byE9PWcuWm8uT3BlbiYmKG89Zy5aby5PcGVuLHQub25DaGFuZ2UoKSl9LGkucmVzcG9uZD1hPT57Y29uc3Qgbj1mdW5jdGlvbihlPVtdLHQ9W10sYT1cImFzY2VuZGluZ1wiKXtjb25zdCBuPVtdLHI9bmV3IE1hcDt0LmZvckVhY2goKGU9PntpZihlLmtleSlyZXR1cm4gci5zZXQoZS5rZXksZSk7bi5wdXNoKGUpfSkpO2xldCBvPWUubWFwKChlPT57aWYoZS5rZXkpe2NvbnN0IHQ9ci5nZXQoZS5rZXkpO2lmKHQpcmV0dXJuIHIuZGVsZXRlKGUua2V5KSx0fXJldHVybiBlfSkpO3JldHVybiBvLnB1c2goLi4uci52YWx1ZXMoKSwuLi5uKSxvPVwiYXNjZW5kaW5nXCI9PT1hP28uc29ydCgoKGUsdCk9PihlPy5zY29yZT8/MS8wKS0odD8uc2NvcmU/PzEvMCkpKTpvLnNvcnQoKChlLHQpPT4odD8uc2NvcmU/PzEvMCktKGU/LnNjb3JlPz8xLzApKSksb30odC5nZXRSZXN1bHRCdWZmZXIoKSxhLGUpO3Quc2V0UmVzdWx0QnVmZmVyKG4pfSxpLnJldm9rZT0oLi4uZSk9Pntjb25zdCBhPW5ldyBTZXQoZSksbj10LmdldFJlc3VsdEJ1ZmZlcigpLmZpbHRlcigoKHtrZXk6ZX0pPT57Y29uc3QgdD1hLmhhcyhlKTtyZXR1cm4gdCYmYS5kZWxldGUoZSksIXR9KSk7dC5zZXRSZXN1bHRCdWZmZXIobiksYS5zaXplJiYodC5nZXRSZXZva2VkQnVmZmVyKCkuZm9yRWFjaCgoZT0+YS5hZGQoZSkpKSx0LnNldFJldm9rZWRCdWZmZXIoWy4uLmFdKSl9LGkudXBkYXRlQ29udGV4dD1lPT57dC5zZXRVcGRhdGVkQ29udGV4dChlKX0sdH1jb25zdCB5PW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gdihlKXtjb25zdHtpZDp0LHByb3ZpZGVySWQ6YX09ZSxuPVAuZ2V0UHJvdmlkZXJPckZhaWwoYSk7bGV0IHI9eS5nZXQodCk7cnx8KHI9ZnVuY3Rpb24oZSx0KXtjb25zdCBhPW5ldyBTZXQ7bGV0IG49ITE7cmV0dXJue2Nsb3NlOigpPT57bj0hMDtmb3IoY29uc3QgZSBvZiBhKWUoKX0scmVxOntpZDplLC4uLnQsY29udGV4dDp0Py5jb250ZXh0fHx7fSxvbkNsb3NlOmU9PnthLmFkZChlKSxuJiZlKCl9LHJlbW92ZUxpc3RlbmVyOmU9PnthLmRlbGV0ZShlKX19fX0odCxlKSx5LnNldCh0LHIpKTtjb25zdCBvPXcoKSxpPSgpPT57Y29uc3QgZT1vLmdldFJlc3VsdEJ1ZmZlcigpO28uc2V0UmVzdWx0QnVmZmVyKFtdKTtjb25zdCBuPW8uZ2V0UmV2b2tlZEJ1ZmZlcigpO28uc2V0UmV2b2tlZEJ1ZmZlcihbXSk7Y29uc3Qgcj1vLmdldFVwZGF0ZWRDb250ZXh0KCk7by5zZXRVcGRhdGVkQ29udGV4dChudWxsKTtjb25zdCBpPW8uZ2V0U3RhdHVzKCk7IWFzeW5jIGZ1bmN0aW9uKGUpeyhhd2FpdCgwLHAuZ2opKCkpLmRpc3BhdGNoKHMsZSl9KHtpZDp0LHByb3ZpZGVySWQ6YSxyZXN1bHRzOmUscmV2b2tlZDpuLHN0YXR1czppLGNvbnRleHQ6cn0pfTtsZXQgYz0hMCxkPSExO28ub25DaGFuZ2U9KCk9PntpZihjKXJldHVybiBjPSExLHZvaWQgaSgpO2R8fChkPSEwLHNldFRpbWVvdXQoKCgpPT57ZD0hMSxpKCl9KSwxMDApKX07dHJ5e2NvbnN0e3Jlc3VsdHM6ZSxjb250ZXh0Oml9PWF3YWl0IG4ub25Vc2VySW5wdXQoci5yZXEsby5yZXMpLHM9by5nZXRTdGF0dXMoKTtyZXR1cm57aWQ6dCxwcm92aWRlcklkOmEsc3RhdHVzOnMscmVzdWx0czplLGNvbnRleHQ6aX19Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoYE9wZW5GaW4vV29ya3NwYWNlL0hvbWUuIFVuY2F1Z2h0IGV4Y2VwdGlvbiBpbiBzZWFyY2ggcHJvdmlkZXIgJHthfSBmb3Igc2VhcmNoICR7dH1gLFwiVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBzZWFyY2ggcHJvdmlkZXIuXCIsZSkse2lkOnQscHJvdmlkZXJJZDphLGVycm9yOmU/Lm1lc3NhZ2V9fX1hc3luYyBmdW5jdGlvbiBrKCl7Zm9yKGNvbnN0e3JlcTplLGNsb3NlOnR9b2YgeS52YWx1ZXMoKSl0KCkseS5kZWxldGUoZS5pZCl9YXN5bmMgZnVuY3Rpb24gYihlLHQpe2NvbnN0IGE9UC5nZXRQcm92aWRlck9yRmFpbChlLnByb3ZpZGVySWQpO3JldHVybiBlLnJlc3VsdC5kaXNwYXRjaGVySWRlbnRpdHk9dCxhLm9uUmVzdWx0RGlzcGF0Y2g/LihlLnJlc3VsdCl9ZnVuY3Rpb24gUyhlKXtjb25zdCB0PXkuZ2V0KGUuaWQpO3Q/LmNsb3NlKCkseS5kZWxldGUoZS5pZCl9Y29uc3QgUD1uZXcgZi54TShcImhvbWVcIiksQz1hc3luYyBlPT57YXdhaXQoMCxwLm5BKSgpOyEoXCJza2lwUGxhdGZvcm1Jbml0Q2hlY2tcImluIGUmJiEwPT09ZS5za2lwUGxhdGZvcm1Jbml0Q2hlY2spJiZhd2FpdCgwLGguS1opKGZpbi5tZS5pZGVudGl0eSk7UC5hc3NlcnROb3RBbHJlYWR5UmVnaXN0ZXJlZChlLmlkKSxQLnNldFByb3ZpZGVyKGUpO2NvbnN0IHQ9YXdhaXQoMCxwLmdqKSgpO3JldHVybiBmdW5jdGlvbihlKXtlLmhvbWVDaGFubmVsQWN0aW9uc1JlZ2lzdGVyZWR8fChlLmhvbWVDaGFubmVsQWN0aW9uc1JlZ2lzdGVyZWQ9ITAsZS5yZWdpc3RlcihzLHYpLGUucmVnaXN0ZXIodSxTKSxlLnJlZ2lzdGVyKGwsYiksZS5hZGREaXNjb25uZWN0aW9uTGlzdGVuZXIoaykpfSh0KSx0LmRpc3BhdGNoKGMse2lkOmUuaWQsdGl0bGU6ZS50aXRsZSxpY29uOmUuaWNvbixjbGllbnRBUElWZXJzaW9uOm4uZXQsaWRlbnRpdHk6ZmluLm1lLmlkZW50aXR5LHNjb3JlT3JkZXI6ZS5zY29yZU9yZGVyLGNvbW1hbmRDb2RlOmUuY29tbWFuZENvZGUsZGVzY3JpcHRpb246ZS5kZXNjcmlwdGlvbixoaWRkZW46ZS5oaWRkZW4sbGlzdFRpdGxlOmUubGlzdFRpdGxlLGlucHV0UGxhY2Vob2xkZXI6ZS5pbnB1dFBsYWNlaG9sZGVyLGxvZ29Vcmw6ZS5sb2dvVXJsLGRpc3BhdGNoRm9jdXNFdmVudHM6ZS5kaXNwYXRjaEZvY3VzRXZlbnRzfSl9O3ZhciB4PWEoMjQ4KSxBPWEoODcyKTtsZXQgTTtjb25zdCBJPWFzeW5jIGU9PntpZighZS5pY29uKXRocm93IG5ldyBFcnJvcihgJHtlLmlkfSBwcm92aWRlciBuZWVkcyB0byBoYXZlIGljb24gcHJvcGVydHkgZGVmaW5lZC5gKTsoMCx4LkgpKFwiaG9tZVwiLGkuRjIpO2NvbnN0IHQ9YXdhaXQgQyhlKTtyZXR1cm4gTT1uZXcgUHJvbWlzZSgoKGEsaSk9Pnt0cnl7KDAsby5HUikoe2FsbG93ZWQ6ITAsY29tcG9uZW50VmVyc2lvbjp0Py53b3Jrc3BhY2VWZXJzaW9ufSksbi5ldCxhKHsuLi50LGNsaWVudEFQSVZlcnNpb246bi5ldCxzZXRTZWFyY2hRdWVyeTphc3luYyB0PT4oYXdhaXQoMCxwLk43KSgpKS5kaXNwYXRjaChcInNldC1zZWFyY2gtcXVlcnlcIix7cXVlcnk6dCxwcm92aWRlcklEOmUuaWR9KX0pfWNhdGNoKGUpeygwLG8uR1IpKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZSBpbnN0YW5jZW9mIEVycm9yP2UubWVzc2FnZTpcInVua25vd25cIn0pLGkoZSl9ZmluYWxseXtyLkEubWFya0VuZEFuZE1lYXN1cmUoXCJob21lLXJlZ2lzdHJhdGlvblwiKX19KSksTX0sRj1hc3luYyBlPT57UC5kZWxldGVQcm92aWRlcihlKTtjb25zdCB0PWF3YWl0KDAscC5naikoKTthd2FpdCB0LmRpc3BhdGNoKGQsZSl9O2FzeW5jIGZ1bmN0aW9uIFcoKXtyLkEubWFya1N0YXJ0KFwiaG9tZS1zaG93XCIpLGF3YWl0IE07Y29uc3QgZT1hd2FpdCgwLHAuTjcpKCk7YXdhaXQgZS5kaXNwYXRjaChcInNob3ctaG9tZVwiLHZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gVCgpe2F3YWl0IE07Y29uc3QgZT1hd2FpdCgwLHAuTjcpKCk7YXdhaXQgZS5kaXNwYXRjaChcImhpZGUtaG9tZVwiLHZvaWQgMCl9fSw1NzU6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHt4TTooKT0+c30pO2NvbnN0IG49cmVxdWlyZShcInRpdGxlLWNhc2VcIik7Y2xhc3MgciBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCl7Y29uc3QgYT0oMCxuLnRpdGxlQ2FzZSkoZSk7c3VwZXIoYCR7YX0gUHJvdmlkZXIuICR7YX0gUHJvdmlkZXIke3Q/YCB3aXRoIGlkICR7dH1gOlwiXCJ9IGlzIG5vdCBjdXJyZW50bHkgcmVnaXN0ZXJlZC5gKX19Y2xhc3MgbyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCl7Y29uc3QgYT0oMCxuLnRpdGxlQ2FzZSkoZSk7c3VwZXIoYCR7YX0gUHJvdmlkZXIuICR7YX0gUHJvdmlkZXIke3Q/YCB3aXRoIGlkICR7dH1gOlwiXCJ9IGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4gQ2FsbCBcXGBkZXJlZ2lzdGVyXFxgIGJlZm9yZSByZWdpc3RlcmluZyBhZ2Fpbi5gKX19Y2xhc3MgaSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCl7Y29uc3QgYT0oMCxuLnRpdGxlQ2FzZSkoZSk7c3VwZXIoYEZhaWxlZCB0byBnZXQgJHthfSBQcm92aWRlci4gJHthfSBQcm92aWRlciB3aXRoIGlkICR7dH0gaXMgbm90IGN1cnJlbnRseSByZWdpc3RlcmVkLmApfX1jbGFzcyBze2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvdmlkZXJzTWFwPW5ldyBNYXAsdGhpcy5wcm92aWRlclR5cGU9ZX1hc3NlcnROb3RBbHJlYWR5UmVnaXN0ZXJlZChlKXtpZih0aGlzLmhhc1Byb3ZpZGVyKGUpKXRocm93IG5ldyBvKHRoaXMucHJvdmlkZXJUeXBlLGUpfWFzc2VydFJlZ2lzdGVyZWQoZSl7aWYoIXRoaXMuaGFzUHJvdmlkZXIoZSkpdGhyb3cgbmV3IHIodGhpcy5wcm92aWRlclR5cGUsZSl9Z2V0UHJvdmlkZXIoZSl7cmV0dXJuIHRoaXMucHJvdmlkZXJzTWFwLmdldChlKX1oYXNQcm92aWRlcihlKXtyZXR1cm4gdGhpcy5wcm92aWRlcnNNYXAuaGFzKGUpfXNldFByb3ZpZGVyKGUpe3RoaXMucHJvdmlkZXJzTWFwLnNldChlLmlkLGUpfWRlbGV0ZVByb3ZpZGVyKGUpe3RoaXMucHJvdmlkZXJzTWFwLmRlbGV0ZShlKX1nZXRQcm92aWRlck9yRmFpbChlKXtjb25zdCB0PXRoaXMuZ2V0UHJvdmlkZXIoZSk7aWYoIXQpdGhyb3cgbmV3IGkodGhpcy5wcm92aWRlclR5cGUsZSk7cmV0dXJuIHR9Y2xlYXJQcm92aWRlcnMoKXt0aGlzLnByb3ZpZGVyc01hcC5jbGVhcigpfX19LDEyOTooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG4scixvO2EuZCh0LHtQOigpPT5yLFI6KCk9Pm99KSxmdW5jdGlvbihlKXtlLkZldGNoaW5nPVwiZmV0Y2hpbmdcIixlLkZldGNoZWQ9XCJmZXRjaGVkXCIsZS5Db21wbGV0ZT1cImNvbXBsZXRlXCJ9KG58fChuPXt9KSksZnVuY3Rpb24oZSl7ZS5Vc2VyQWN0aW9uPVwidXNlci1hY3Rpb25cIixlLkZvY3VzQ2hhbmdlPVwiZm9jdXMtY2hhbmdlXCIsZS5SZWxvYWQ9XCJyZWxvYWRcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLkFjdGl2ZT1cImFjdGl2ZVwiLGUuRGVmYXVsdD1cImRlZmF1bHRcIn0ob3x8KG89e30pKX0sNjAwOihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjt2YXIgbjthLmQodCx7YTooKT0+bn0pLGZ1bmN0aW9uKGUpe2UuQWN0aW9uQnV0dG9uPVwiQWN0aW9uQnV0dG9uXCIsZS5Ecm9wZG93bkJ1dHRvbj1cIkRyb3Bkb3duQnV0dG9uXCJ9KG58fChuPXt9KSl9LDg3MjooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG4scixvO2EuZCh0LHtQSzooKT0+bixmQzooKT0+cixvbzooKT0+b30pLGZ1bmN0aW9uKGUpe2UuU3VnZ2VzdGlvbj1cInN1Z2dlc3Rpb25cIn0obnx8KG49e30pKSxmdW5jdGlvbihlKXtlLkNvbnRhY3Q9XCJDb250YWN0XCIsZS5DdXN0b209XCJDdXN0b21cIixlLkxpc3Q9XCJMaXN0XCIsZS5QbGFpbj1cIlBsYWluXCIsZS5TaW1wbGVUZXh0PVwiU2ltcGxlVGV4dFwiLGUuTG9hZGluZz1cIkxvYWRpbmdcIixlLkVycm9yPVwiRXJyb3JcIn0ocnx8KHI9e30pKSxmdW5jdGlvbihlKXtlLk11bHRpU2VsZWN0PVwiTXVsdGlTZWxlY3RcIn0ob3x8KG89e30pKX0sMTc5OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthKDEyOSksYSg4NzIpLGEoNzEwKSxhKDE4NCksYSg2MDApfSw3MTA6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO3ZhciBuLHI7YS5kKHQse3Y6KCk9Pm4sejooKT0+cn0pLGZ1bmN0aW9uKGUpe2UuU25hcHNob3Q9XCJzbmFwc2hvdFwiLGUuTWFuaWZlc3Q9XCJtYW5pZmVzdFwiLGUuVmlldz1cInZpZXdcIixlLkV4dGVybmFsPVwiZXh0ZXJuYWxcIn0obnx8KG49e30pKSxmdW5jdGlvbihlKXtlLkxhbmRpbmdQYWdlPVwibGFuZGluZ1BhZ2VcIixlLkFwcEdyaWQ9XCJhcHBHcmlkXCJ9KHJ8fChyPXt9KSl9LDE4NDooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse1NNOigpPT5vLGNlOigpPT5uLGluOigpPT5pLG5wOigpPT5yfSk7Y29uc3Qgbj17Q29udGFpbmVyOlwiQ29udGFpbmVyXCIsQnV0dG9uOlwiQnV0dG9uXCIsU3BsaXRCdXR0b246XCJTcGxpdEJ1dHRvblwifSxyPXtUZXh0OlwiVGV4dFwiLEltYWdlOlwiSW1hZ2VcIixMaXN0OlwiTGlzdFwifSxvPXsuLi5uLC4uLnJ9O3ZhciBpOyFmdW5jdGlvbihlKXtlLlByaW1hcnk9XCJwcmltYXJ5XCIsZS5TZWNvbmRhcnk9XCJzZWNvbmRhcnlcIixlLlRleHRPbmx5PVwidGV4dE9ubHlcIn0oaXx8KGk9e30pKX0sNTk4OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLnIodCksYS5kKHQse0FwcE1hbmlmZXN0VHlwZTooKT0+by52LFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+by56LGRlcmVnaXN0ZXI6KCk9PnksaGlkZTooKT0+dixyZWdpc3RlcjooKT0+dyxzaG93OigpPT5rfSk7dmFyIG49YSgyNzcpLHI9YSg2OTUpLG89YSg3MTApLGk9YSg3MjMpLHM9YSg3ODYpLGM9YSg3MCksZD1hKDc5KSxsPWEoNTc1KTtsZXQgdT0hMTthc3luYyBmdW5jdGlvbiBwKGUsdCxhKXtjb25zdCBuPWF3YWl0KDAsci5wNCkoKTt0cnl7cmV0dXJuIGF3YWl0IG4uZGlzcGF0Y2goZS5hY3Rpb24sZS5wYXlsb2FkKX1jYXRjaChyKXtpZihyIGluc3RhbmNlb2YgRXJyb3ImJi0xIT09ci50b1N0cmluZygpLmluZGV4T2YoZS5hY3Rpb24pKXJldHVybiB1fHxjb25zb2xlLndhcm4oXCJZb3UgYXJlIHVzaW5nIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgV29ya3NwYWNlIGNsaWVudCBsaWJyYXJ5IHRoYXQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudGx5IHJ1bm5pbmcgd29ya3NwYWNlIHByb3ZpZGVyLiBQbGVhc2UgdXBncmFkZSB0aGUgV29ya3NwYWNlIHRvIHZlcnNpb24gOS4wIG9yIGxhdGVyLlwiKSx1PSEwLGF3YWl0IG4uZGlzcGF0Y2godC5hY3Rpb24sdC5wYXlsb2FkKSxhO3Rocm93IHJ9fWNvbnN0IGg9bmV3IGwueE0oXCJzdG9yZWZyb250XCIpLGY9YXN5bmMgZT0+e2F3YWl0KDAsZC5LWikoZmluLm1lLmlkZW50aXR5KTtjb25zdCB0PWF3YWl0KDAsci5ONykoKTtyZXR1cm4gaC5hc3NlcnROb3RBbHJlYWR5UmVnaXN0ZXJlZChlLmlkKSxoLnNldFByb3ZpZGVyKGUpLChlPT57ZS5zdG9yZWZyb250Q2hhbm5lbEFjdGlvbnNSZWdpc3RlcmVkfHwoZS5zdG9yZWZyb250Q2hhbm5lbEFjdGlvbnNSZWdpc3RlcmVkPSEwLGUucmVnaXN0ZXIoXCJnZXQtc3RvcmVmcm9udC1wcm92aWRlci1hcHBzXCIsKGU9PmguZ2V0UHJvdmlkZXJPckZhaWwoZSkuZ2V0QXBwcygpKSksZS5yZWdpc3RlcihcImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWZvb3RlclwiLChlPT5oLmdldFByb3ZpZGVyT3JGYWlsKGUpLmdldEZvb3RlcigpKSksZS5yZWdpc3RlcihcImdldC1zdG9yZWZyb250LXByb3ZpZGVyLWxhbmRpbmctcGFnZVwiLChlPT5oLmdldFByb3ZpZGVyT3JGYWlsKGUpLmdldExhbmRpbmdQYWdlKCkpKSxlLnJlZ2lzdGVyKFwiZ2V0LXN0b3JlZnJvbnQtcHJvdmlkZXItbmF2aWdhdGlvblwiLChlPT5oLmdldFByb3ZpZGVyT3JGYWlsKGUpLmdldE5hdmlnYXRpb24oKSkpLGUucmVnaXN0ZXIoXCJsYXVuY2gtc3RvcmVmcm9udC1wcm92aWRlci1hcHBcIiwoKHtpZDplLGFwcDp0fSk9PmguZ2V0UHJvdmlkZXJPckZhaWwoZSkubGF1bmNoQXBwKHQpKSkpfSkodCksZS5jbGllbnRBUElWZXJzaW9uPWkuZXQscCh7YWN0aW9uOlwicmVnaXN0ZXItcHJvdmlkZXJcIixwYXlsb2FkOntwcm92aWRlclR5cGU6XCJzdG9yZWZyb250XCIsaW5mbzplfX0se2FjdGlvbjpcInJlZ2lzdGVyLXN0b3JlZnJvbnQtcHJvdmlkZXJcIixwYXlsb2FkOmV9LHt3b3Jrc3BhY2VWZXJzaW9uOlwidW5rbm93blwifSl9O3ZhciBnPWEoMjQ4KTtsZXQgbTtjb25zdCB3PWFzeW5jIGU9PnsoMCxnLkgpKFwic3RvcmVcIixjLmdRKTtjb25zdCB0PWF3YWl0IGYoZSk7cmV0dXJuIG09bmV3IFByb21pc2UoKChhLG8pPT57dHJ5eygwLG4ueHQpKHthbGxvd2VkOiEwLGNvbXBvbmVudFZlcnNpb246dD8ud29ya3NwYWNlVmVyc2lvbn0pLGkuZXQsYSh7Y2xpZW50QVBJVmVyc2lvbjppLmV0LHdvcmtzcGFjZVZlcnNpb246dD8ud29ya3NwYWNlVmVyc2lvbj8/XCJcIix1cGRhdGVBcHBDYXJkQnV0dG9uczphc3luYyB0PT57Y29uc3QgYT1hd2FpdCgwLHIubVEpKCk7YXdhaXQgYS5kaXNwYXRjaChcInVwZGF0ZS1hcHAtY2FyZC1idXR0b24tY29uZmlnXCIsey4uLnQsaWQ6ZS5pZCx0aXRsZTplLnRpdGxlLGljb246ZS5pY29uLHBsYXRmb3JtSWRlbnRpdHk6ZmluLm1lLmlkZW50aXR5fSl9fSl9Y2F0Y2goZSl7KDAsbi54dCkoe2FsbG93ZWQ6ITEscmVqZWN0aW9uQ29kZTplIGluc3RhbmNlb2YgRXJyb3I/ZS5tZXNzYWdlOlwidW5rbm93blwifSksbyhlKX1maW5hbGx5e3MuQS5tYXJrRW5kQW5kTWVhc3VyZShcInN0b3JlLXJlZ2lzdHJhdGlvblwiKX19KSksbX0seT1hc3luYyBlPT4oYXdhaXQgbSxoLmFzc2VydFJlZ2lzdGVyZWQoZSksaC5kZWxldGVQcm92aWRlcihlKSxhd2FpdCgwLHIubkEpKCkscCh7YWN0aW9uOlwiZGVyZWdpc3Rlci1wcm92aWRlclwiLHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTpcInN0b3JlZnJvbnRcIixpZDplfX0se2FjdGlvbjpcImRlcmVnaXN0ZXItc3RvcmVmcm9udC1wcm92aWRlclwiLHBheWxvYWQ6ZX0pKSx2PWFzeW5jKCk9Pihhd2FpdCBtLGF3YWl0KDAsci5uQSkoKSxwKHthY3Rpb246XCJoaWRlLXByb3ZpZGVyLXdpbmRvd1wiLHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTpcInN0b3JlZnJvbnRcIn19LHthY3Rpb246XCJoaWRlLXN0b3JlZnJvbnRcIn0pKSxrPWFzeW5jKCk9PihzLkEubWFya1N0YXJ0KFwic3RvcmUtc2hvd1wiKSxhd2FpdCBtLGF3YWl0KDAsci5uQSkoKSxwKHthY3Rpb246XCJzaG93LXByb3ZpZGVyLXdpbmRvd1wiLHBheWxvYWQ6e3Byb3ZpZGVyVHlwZTpcInN0b3JlZnJvbnRcIn19LHthY3Rpb246XCJzaG93LXN0b3JlZnJvbnRcIn0pKX0sMjUwOihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjt2YXIgbjshZnVuY3Rpb24oZSl7ZS5MZWZ0PVwiTGVmdFwiLGUuUmlnaHQ9XCJSaWdodFwiLGUuVG9wPVwiVG9wXCIsZS5Cb3R0b209XCJCb3R0b21cIn0obnx8KG49e30pKX0sNzk6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO3ZhciBuO2EuZCh0LHtLWjooKT0+byxOOigpPT5pLE9GOigpPT5uLGJXOigpPT5zfSksZnVuY3Rpb24oZSl7ZS5MYXVuY2hBcHA9XCJsYXVuY2hBcHBcIixlLlNhdmVQYWdlPVwic2F2ZVBhZ2VcIixlLkdldFNhdmVkUGFnZT1cImdldFNhdmVkUGFnZVwiLGUuQ3JlYXRlU2F2ZWRQYWdlPVwiY3JlYXRlU2F2ZWRQYWdlXCIsZS5VcGRhdGVTYXZlZFBhZ2U9XCJ1cGRhdGVTYXZlZFBhZ2VcIixlLkRlbGV0ZVNhdmVkUGFnZT1cImRlbGV0ZVNhdmVkUGFnZVwiLGUuR2V0U2F2ZWRQYWdlcz1cImdldFNhdmVkUGFnZXNcIixlLkNyZWF0ZVNhdmVkUGFnZUludGVybmFsPVwiY3JlYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlVwZGF0ZVNhdmVkUGFnZUludGVybmFsPVwidXBkYXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLkRlbGV0ZVNhdmVkUGFnZUludGVybmFsPVwiZGVsZXRlU2F2ZWRQYWdlSW50ZXJuYWxcIixlLlVwZGF0ZVBhZ2VGb3JXaW5kb3c9XCJ1cGRhdGVQYWdlRm9yV2luZG93XCIsZS5BdHRhY2hQYWdlc1RvV2luZG93PVwiYXR0YWNoUGFnZXNUb1dpbmRvd1wiLGUuRGV0YWNoUGFnZXNGcm9tV2luZG93PVwiZGV0YWNoUGFnZXNGcm9tV2luZG93XCIsZS5SZW9yZGVyUGFnZXNGb3JXaW5kb3c9XCJyZW9yZGVyUGFnZXNGb3JXaW5kb3dcIixlLlNldEFjdGl2ZVBhZ2U9XCJzZXRBY3RpdmVQYWdlXCIsZS5BZGRQYWdlPVwiYWRkUGFnZVwiLGUuQWRkRGVmYXVsdFBhZ2U9XCJhZGREZWZhdWx0UGFnZVwiLGUuR2V0QWxsQXR0YWNoZWRQYWdlcz1cImdldEFsbEF0dGFjaGVkUGFnZXNcIixlLkdldEFjdGl2ZVBhZ2VJZEZvcldpbmRvdz1cImdldEFjdGl2ZVBhZ2VJZEZvcldpbmRvd1wiLGUuR2V0UGFnZXNGb3JXaW5kb3c9XCJnZXRQYWdlc0ZvcldpbmRvd1wiLGUuR2V0UGFnZUZvcldpbmRvdz1cImdldFBhZ2VGb3JXaW5kb3dcIixlLkdldFNhdmVkUGFnZU1ldGFkYXRhPVwiZ2V0U2F2ZWRQYWdlTWV0YWRhdGFcIixlLkdldFVuaXF1ZVBhZ2VUaXRsZT1cImdldFVuaXF1ZVBhZ2VUaXRsZVwiLGUuR2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93PVwiZ2V0TGFzdEZvY3VzZWRCcm93c2VyV2luZG93XCIsZS5HZXRQYWdlQnlWaWV3SWRlbnRpdHk9XCJnZXRQYWdlQnlWaWV3SWRlbnRpdHlcIixlLkdldFRoZW1lcz1cImdldFRoZW1lc1wiLGUuR2V0U2VsZWN0ZWRTY2hlbWU9XCJnZXRTZWxlY3RlZFNjaGVtZVwiLGUuU2V0U2VsZWN0ZWRTY2hlbWU9XCJzZXRTZWxlY3RlZFNjaGVtZVwiLGUuT3Blbkdsb2JhbENvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuR2xvYmFsQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuT3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsPVwib3BlblZpZXdUYWJDb250ZXh0TWVudUludGVybmFsXCIsZS5PcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWw9XCJvcGVuUGFnZVRhYkNvbnRleHRNZW51SW50ZXJuYWxcIixlLk9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbD1cIm9wZW5TYXZlQnV0dG9uQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSW52b2tlQ3VzdG9tQWN0aW9uSW50ZXJuYWw9XCJpbnZva2VDdXN0b21BY3Rpb25JbnRlcm5hbFwiLGUuUmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsPVwicmVxdWVzdFF1aXRQbGF0Zm9ybURpYWxvZ0ludGVybmFsXCIsZS5HZXRTYXZlZFdvcmtzcGFjZT1cImdldFNhdmVkV29ya3NwYWNlXCIsZS5DcmVhdGVTYXZlZFdvcmtzcGFjZT1cImNyZWF0ZVNhdmVkV29ya3NwYWNlXCIsZS5VcGRhdGVTYXZlZFdvcmtzcGFjZT1cInVwZGF0ZVNhdmVkV29ya3NwYWNlXCIsZS5EZWxldGVTYXZlZFdvcmtzcGFjZT1cImRlbGV0ZVNhdmVkV29ya3NwYWNlXCIsZS5HZXRTYXZlZFdvcmtzcGFjZXM9XCJnZXRTYXZlZFdvcmtzcGFjZXNcIixlLlNhdmVXb3Jrc3BhY2U9XCJzYXZlV29ya3NwYWNlXCIsZS5HZXRDdXJyZW50V29ya3NwYWNlPVwiZ2V0Q3VycmVudFdvcmtzcGFjZVwiLGUuQXBwbHlXb3Jrc3BhY2U9XCJhcHBseVdvcmtzcGFjZVwiLGUuUmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZUludGVybmFsPVwicmVzdG9yZUxhc3RTYXZlZFdvcmtzcGFjZUludGVybmFsXCIsZS5TZXRBY3RpdmVXb3Jrc3BhY2U9XCJzZXRBY3RpdmVXb3Jrc3BhY2VcIixlLklzQnJvd3NlckluaXRpYWxpemVkPVwiaXNCcm93c2VySW5pdGlhbGl6ZWRcIixlLkFuYWx5dGljcz1cImFuYWx5dGljc0ludGVybmFsXCIsZS5HZXRMYW5ndWFnZT1cImdldExhbmd1YWdlXCIsZS5HZXRMYW5ndWFnZVJlc291cmNlc0ludGVybmFsPVwiZ2V0TGFuZ3VhZ2VSZXNvdXJjZXNJbnRlcm5hbFwiLGUuU2V0TGFuZ3VhZ2U9XCJzZXRMYW5ndWFnZVwiLGUuR2V0RG9ja1Byb3ZpZGVyQ29uZmlnPVwiZ2V0RG9ja1Byb3ZpZGVyQ29uZmlnXCIsZS5TYXZlRG9ja1Byb3ZpZGVyQ29uZmlnPVwic2F2ZURvY2tQcm92aWRlckNvbmZpZ1wiLGUuSGFuZGxlU2F2ZU1vZGFsT25QYWdlQ2xvc2U9XCJoYW5kbGVTYXZlTW9kYWxPblBhZ2VDbG9zZVwiLGUuU2hvdWxkUGFnZUNsb3NlPVwic2hvdWxkUGFnZUNsb3NlXCIsZS5TaG91bGRXaW5kb3dDbG9zZT1cInNob3VsZFdpbmRvd0Nsb3NlXCIsZS5Db3B5UGFnZT1cImNvcHlQYWdlXCIsZS5IYW5kbGVQYWdlQ2hhbmdlcz1cImhhbmRsZVBhZ2VDaGFuZ2VzXCIsZS5NYXJrVW5zYXZlZFBhZ2VzQXNTYXZlZEludGVybmFsPVwibWFya1Vuc2F2ZWRQYWdlc0FzU2F2ZWRJbnRlcm5hbFwiLGUuVHJhY2tSZW1vdmVkVGFiSW50ZXJuYWw9XCJ0cmFja1JlbW92ZWRUYWJJbnRlcm5hbFwiLGUuUmVzdG9yZVJlbW92ZWRUYWJJbnRlcm5hbD1cInJlc3RvcmVSZW1vdmVkVGFiSW50ZXJuYWxcIixlLlRyYWNrVmlzaXRlZFNpdGVJbnRlcm5hbD1cInRyYWNrVmlzaXRlZFNpdGVJbnRlcm5hbFwiLGUuR2V0UmVjZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbD1cImdldFJlY2VudGx5VmlzaXRlZFNpdGVzSW50ZXJuYWxcIixlLkdldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbD1cImdldEZyZXF1ZW50bHlWaXNpdGVkU2l0ZXNJbnRlcm5hbFwiLGUuU2VhcmNoU2l0ZXNJbnRlcm5hbD1cInNlYXJjaFNpdGVzSW50ZXJuYWxcIixlLkdldFNlYXJjaFByb3ZpZGVyc0ludGVybmFsPVwiZ2V0U2VhcmNoUHJvdmlkZXJzSW50ZXJuYWxcIixlLkdldEN1cmF0ZWRDb250ZW50SW50ZXJuYWw9XCJnZXRDdXJhdGVkQ29udGVudEludGVybmFsXCIsZS5IYW5kbGVSZXF1ZXN0TmF2aWdhdGlvbkludGVybmFsPVwiaGFuZGxlUmVxdWVzdE5hdmlnYXRpb25JbnRlcm5hbFwiLGUuUmVmcmVzaEJvb2ttYXJrc0ludGVybmFsPVwicmVmcmVzaEJvb2ttYXJrc0ludGVybmFsXCIsZS5MYXVuY2hCb29rbWFya0ludGVybmFsPVwibGF1bmNoQm9va21hcmtJbnRlcm5hbFwiLGUuR2V0Tm90aWZpY2F0aW9uc0NvbmZpZz1cImdldE5vdGlmaWNhdGlvbnNDb25maWdcIixlLlVwZGF0ZURvY2tGYXZvcml0ZXNJbnRlcm5hbD1cInVwZGF0ZURvY2tGYXZvcml0ZXNJbnRlcm5hbFwiLGUuVXBkYXRlQ29udGVudE1lbnVJbnRlcm5hbD1cInVwZGF0ZUNvbnRlbnRNZW51SW50ZXJuYWxcIixlLkxhdW5jaERvY2tFbnRyeUludGVybmFsPVwibGF1bmNoRG9ja0VudHJ5SW50ZXJuYWxcIixlLlNldERvY2tGYXZvcml0ZXNPcmRlckludGVybmFsPVwic2V0RG9ja0Zhdm9yaXRlc09yZGVySW50ZXJuYWxcIixlLk5hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbD1cIm5hdmlnYXRlQ29udGVudE1lbnVJbnRlcm5hbFwiLGUuU2V0RGVmYXVsdERvY2tCdXR0b25zT3JkZXJJbnRlcm5hbD1cInNldERlZmF1bHREb2NrQnV0dG9uc09yZGVySW50ZXJuYWxcIixlLkdldERvY2tXb3Jrc3BhY2VzQ29udGV4dE1lbnVJbnRlcm5hbD1cImdldERvY2tXb3Jrc3BhY2VzQ29udGV4dE1lbnVJbnRlcm5hbFwiLGUuSGFuZGxlRG9ja1dvcmtzcGFjZXNNZW51UmVzcG9uc2VJbnRlcm5hbD1cImhhbmRsZURvY2tXb3Jrc3BhY2VzTWVudVJlc3BvbnNlSW50ZXJuYWxcIixlLlJlbW92ZURvY2tGYXZvcml0ZUludGVybmFsPVwicmVtb3ZlRG9ja0Zhdm9yaXRlSW50ZXJuYWxcIixlLkFkZERvY2tGYXZvcml0ZUludGVybmFsPVwiYWRkRG9ja0Zhdm9yaXRlSW50ZXJuYWxcIixlLkZvY3VzQW5kRXhwYW5kU2VhcmNoSW50ZXJuYWw9XCJmb2N1c0FuZEV4cGFuZFNlYXJjaEludGVybmFsXCJ9KG58fChuPXt9KSk7Y29uc3Qgcj1hc3luYyBlPT5maW4uUGxhdGZvcm0ud3JhcFN5bmMoZSkuZ2V0Q2xpZW50KCksbz1hc3luYyBlPT57Y29uc3QgdD1hd2FpdCByKGUpLGE9XCJUYXJnZXQgaXMgbm90IGEgV29ya3NwYWNlIFBsYXRmb3JtLiBUYXJnZXQgbXVzdCBjYWxsIFdvcmtzcGFjZVBsYXRmb3JtLmluaXRcIjtsZXQgbjt0cnl7bj1hd2FpdCB0LmRpc3BhdGNoKFwiaXNXb3Jrc3BhY2VQbGF0Zm9ybVwiKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoYSl9aWYoXCJib29sZWFuXCI9PXR5cGVvZiBuJiZuKXJldHVybiBjb25zb2xlLndhcm4oXCJZb3UgYXJlIHVzaW5nIGFuIG9sZGVyIHZlcnNpb24gb2YgdGhlIHdvcmtzcGFjZSBwbGF0Zm9ybS4gUGxlYXNlIHVwZGF0ZSB5b3VyIHdvcmtzcGFjZSBwbGF0Zm9ybS5cIiksbjtpZihcIm9iamVjdFwiPT10eXBlb2YgbiYmbi5pc1dvcmtzcGFjZVBsYXRmb3JtKXJldHVybiBuO3Rocm93IG5ldyBFcnJvcihhKX0saT1hc3luYyBlPT4oYXdhaXQgbyhlKSxyKGUpKSxzPWFzeW5jIGU9Pntjb25zdCB0PWF3YWl0IG8oZSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJiEwIT09dD8uaXNCcm93c2VySW5pdGlhbGl6ZWQpdGhyb3cgbmV3IEVycm9yKFwiVGFyZ2V0IGlzIG5vdCBhIEJyb3dzZXItZW5hYmxlZCBXb3Jrc3BhY2UgUGxhdGZvcm0uXCIpO3JldHVybiByKGUpfX0sNjk1OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7Tjc6KCk9PmYsZ2o6KCk9PmwsbVE6KCk9PmgsbkE6KCk9PnAscDQ6KCk9PmN9KTt2YXIgbj1hKDEwMikscj1hKDcyMyksbz1hKDcwKSxpPWEoOTA1KTtjb25zdCBzPSgwLG4uQSkoXCJfX29mX3dvcmtzcGFjZV9wcm90b2NvbF9fXCIpLGM9cyxkPXMsbD0oMCxuLkEpKGkuQlQpLHU9ZT0+e2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4gdC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwiaXNMYXVuY2hlZFZpYUxpYlwiLFwidHJ1ZVwiKSx0LnRvU3RyaW5nKCl9LHA9YXN5bmMoKT0+e2lmKCFhd2FpdCgwLG8uQykoby54dCkpe2lmKHIuand8fC0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luXCIpKXJldHVybiB2b2lkIGF3YWl0IGZpbi5BcHBsaWNhdGlvbi5zdGFydEZyb21NYW5pZmVzdCh1KHIubTcpKTthd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcih1KHIudDgpKX19LGg9YXN5bmMoKT0+KGF3YWl0IHAoKSxjKCkpLGY9YXN5bmMoKT0+KGF3YWl0IHAoKSxkKCkpfSw5MDU6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtCVDooKT0+bixabzooKT0+b30pO2NvbnN0IG49XCJfX3NlYXJjaC1vcGVuZmluLWJyb3dzZXItaG9tZS10b3BpY19fXCI7dmFyIHIsbzshZnVuY3Rpb24oZSl7ZS5GZXRjaGluZz1cImZldGNoaW5nXCIsZS5GZXRjaGVkPVwiZmV0Y2hlZFwiLGUuQ29tcGxldGU9XCJjb21wbGV0ZVwifShyfHwocj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Jbml0aWFsPTBdPVwiSW5pdGlhbFwiLGVbZS5PcGVuPTFdPVwiT3BlblwiLGVbZS5DbG9zZT0yXT1cIkNsb3NlXCJ9KG98fChvPXt9KSl9LDk1NzooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG49YSg4NDcpLHI9KGEoNzApLGEoOTc4KSxhKDY3NSksYSg4NzcpKSxvPWEubihyKSxpPWEoNjcpLHM9YS5uKGkpO3MoKSxvKCk7YSg2OTUpLGEoNzkpO2NvbnN0IGM9e1tuLlBhbGV0dGUuYnJhbmRQcmltYXJ5XTpcIiMwQTc2RDNcIixbbi5QYWxldHRlLnN0YXR1c1N1Y2Nlc3NdOm4uQ29sb3IuZnVuY3Rpb25hbDEsW24uUGFsZXR0ZS5zdGF0dXNXYXJuaW5nXTpuLkNvbG9yLmZ1bmN0aW9uYWwxMCxbbi5QYWxldHRlLnN0YXR1c0NyaXRpY2FsXTpuLkNvbG9yLmZ1bmN0aW9uYWw3LFtuLlBhbGV0dGUuc3RhdHVzQWN0aXZlXTpuLkNvbG9yLmZ1bmN0aW9uYWwzLFtuLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQxXTpcIiMwQTc2RDNcIixbbi5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kMl06XCIjMDAwMDAwXCIsW24uUGFsZXR0ZS5jb250ZW50QmFja2dyb3VuZDNdOlwiIzAwMDAwMFwiLFtuLlBhbGV0dGUuY29udGVudEJhY2tncm91bmQ0XTpcIiMwMDAwMDBcIixbbi5QYWxldHRlLmNvbnRlbnRCYWNrZ3JvdW5kNV06XCIjMDAwMDAwXCJ9LGQ9ey4uLmMsW24uUGFsZXR0ZS5iYWNrZ3JvdW5kMV06bi5Db2xvci53aGl0ZSxbbi5QYWxldHRlLmJhY2tncm91bmQyXTpuLkNvbG9yLmxpZ2h0R3JheTEsW24uUGFsZXR0ZS5iYWNrZ3JvdW5kM106bi5Db2xvci5saWdodEdyYXkyLFtuLlBhbGV0dGUuYmFja2dyb3VuZDRdOm4uQ29sb3IubGlnaHRHcmF5Myxbbi5QYWxldHRlLmJhY2tncm91bmQ1XTpuLkNvbG9yLmxpZ2h0R3JheTQsW24uUGFsZXR0ZS5iYWNrZ3JvdW5kNl06bi5Db2xvci5saWdodEdyYXk1LFtuLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnldOm4uQ29sb3IubGlnaHRHcmF5NCxbbi5QYWxldHRlLmlucHV0QmFja2dyb3VuZF06bi5Db2xvci5saWdodEdyYXkzLFtuLlBhbGV0dGUuaW5wdXRDb2xvcl06bi5Db2xvci5kYXJrR3JheTUsW24uUGFsZXR0ZS5pbnB1dFBsYWNlaG9sZGVyXTpuLkNvbG9yLmRhcmtHcmF5Mixbbi5QYWxldHRlLmlucHV0RGlzYWJsZWRdOm4uQ29sb3IubmV1dHJhbEdyYXksW24uUGFsZXR0ZS5pbnB1dEZvY3VzZWRdOm4uQ29sb3IubGlnaHRHcmF5NSxbbi5QYWxldHRlLmlucHV0Qm9yZGVyXTpuLkNvbG9yLm5ldXRyYWxHcmF5LFtuLlBhbGV0dGUudGV4dERlZmF1bHRdOm4uQ29sb3IuZGFya0dyYXk1LFtuLlBhbGV0dGUudGV4dEhlbHBdOm4uQ29sb3IuZGFya0dyYXkzLFtuLlBhbGV0dGUudGV4dEluYWN0aXZlXTpuLkNvbG9yLm5ldXRyYWxHcmF5fSxsPXsuLi5jLFtuLlBhbGV0dGUuYmFja2dyb3VuZDFdOm4uQ29sb3IuZGFya0dyYXk2LFtuLlBhbGV0dGUuYmFja2dyb3VuZDJdOm4uQ29sb3IuZGFya0dyYXk1LFtuLlBhbGV0dGUuYmFja2dyb3VuZDNdOm4uQ29sb3IuZGFya0dyYXk0LFtuLlBhbGV0dGUuYmFja2dyb3VuZDRdOm4uQ29sb3IuZGFya0dyYXkzLFtuLlBhbGV0dGUuYmFja2dyb3VuZDVdOm4uQ29sb3IuZGFya0dyYXkyLFtuLlBhbGV0dGUuYmFja2dyb3VuZDZdOm4uQ29sb3IuZGFya0dyYXkxLFtuLlBhbGV0dGUuYnJhbmRTZWNvbmRhcnldOm4uQ29sb3IuZGFya0dyYXkyLFtuLlBhbGV0dGUuaW5wdXRCYWNrZ3JvdW5kXTpuLkNvbG9yLmRhcmtHcmF5MSxbbi5QYWxldHRlLmlucHV0Q29sb3JdOm4uQ29sb3Iud2hpdGUsW24uUGFsZXR0ZS5pbnB1dFBsYWNlaG9sZGVyXTpuLkNvbG9yLmxpZ2h0R3JheTUsW24uUGFsZXR0ZS5pbnB1dERpc2FibGVkXTpuLkNvbG9yLm5ldXRyYWxHcmF5LFtuLlBhbGV0dGUuaW5wdXRGb2N1c2VkXTpuLkNvbG9yLmxpZ2h0R3JheTUsW24uUGFsZXR0ZS5pbnB1dEJvcmRlcl06bi5Db2xvci5uZXV0cmFsR3JheSxbbi5QYWxldHRlLnRleHREZWZhdWx0XTpuLkNvbG9yLndoaXRlLFtuLlBhbGV0dGUudGV4dEhlbHBdOm4uQ29sb3IubGlnaHRHcmF5NSxbbi5QYWxldHRlLnRleHRJbmFjdGl2ZV06bi5Db2xvci5uZXV0cmFsR3JheX07bi5Db2xvci5saWdodEdyYXk0LG4uQ29sb3IuZGFya0dyYXk1LG4uQ29sb3IuZGFya0dyYXkyLG4uQ29sb3IuZGFya0dyYXk1fSw0Mzg6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtCWTooKT0+bCxNVzooKT0+bix2MTooKT0+ZH0pO3ZhciBuLHIsbz1hKDcyMyk7IWZ1bmN0aW9uKGUpe2UuV29ya3NwYWNlPVwib3BlbmZpbi13b3Jrc3BhY2VcIixlLk9sZFdvcmtzcGFjZT1cIm9wZW5maW4tYnJvd3NlclwifShufHwobj17fSkpLGZ1bmN0aW9uKGUpe2UuRmluUHJvdG9jb2w9XCJmaW4tcHJvdG9jb2xcIn0ocnx8KHI9e30pKTtjb25zdCBpPXt1dWlkOm8uJGh9LHM9e3V1aWQ6bi5Xb3Jrc3BhY2V9LGM9ZT0+e2lmKCFvLmNJKXRocm93IG5ldyBFcnJvcihcImdldEFwcGxpY2F0aW9uIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uIE9wZW5GaW4gZW52LiBBdm9pZCB1c2luZyB0aGlzIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLkFwcGxpY2F0aW9uLndyYXBTeW5jKGUpfSxkPSgpPT5jKGkpLGw9KCk9PmMocyl9LDEwMjooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse0E6KCk9Pm99KTt2YXIgbj1hKDcyMyk7Y29uc3Qgcj1uLllZJiZcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZuZXcgUHJvbWlzZSgoZT0+ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwoKCk9PntcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZlKCl9KSkpKTtmdW5jdGlvbiBvKGUpe2xldCB0O2NvbnN0IGE9bmV3IFNldDtyZXR1cm4oKT0+e2lmKCFuLmNJKXRocm93IG5ldyBFcnJvcihcImdldENoYW5uZWxDbGllbnQgY2Fubm90IGJlIHVzZWQgb3V0c2lkZSBhbiBPcGVuRmluIGVudi4gQXZvaWQgdXNpbmcgdGhpcyBtZXRob2QgZHVyaW5nIHByZS1yZW5kZXJpbmcuXCIpO3JldHVybiB0fHwodD0oYXN5bmMoKT0+e2F3YWl0IHI7Y29uc3Qgbz17Y2xpZW50QVBJVmVyc2lvbjpuLmV0fSxpPWF3YWl0IGZpbi5JbnRlckFwcGxpY2F0aW9uQnVzLkNoYW5uZWwuY29ubmVjdChlLHtwYXlsb2FkOm99KTtyZXR1cm4gaS5vbkRpc2Nvbm5lY3Rpb24oKGFzeW5jKCk9PnthLmZvckVhY2goKGU9PmUoKSkpLGEuY2xlYXIoKSxjb25zb2xlLndhcm4oYGRpc2Nvbm5lY3RlZCBmcm9tIGNoYW5uZWwgcHJvdmlkZXIgJHtlfWApLHQ9dm9pZCAwfSkpLGl9KSgpLnRoZW4oKGU9PihlLmFkZERpc2Nvbm5lY3Rpb25MaXN0ZW5lcj1lPT57YS5hZGQoZSl9LGUpKSkuY2F0Y2goKGE9Pnt0aHJvdyB0PXZvaWQgMCxuZXcgRXJyb3IoYGZhaWxlZCB0byBjb25uZWN0IHRvIGNoYW5uZWwgcHJvdmlkZXIgJHtlfTogJHthfWApfSkpKSx0fX19LDcyMzooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIG47YS5kKHQseyRoOigpPT5jLEFUOigpPT5pLFlZOigpPT5vLGNJOigpPT5yLGV0OigpPT5nLGZUOigpPT5sLGp3OigpPT51LG03OigpPT5oLHQ4OigpPT5wLHZMOigpPT5kfSksZnVuY3Rpb24oZSl7ZS5Mb2NhbD1cImxvY2FsXCIsZS5EZXY9XCJkZXZcIixlLlN0YWdpbmc9XCJzdGFnaW5nXCIsZS5Qcm9kPVwicHJvZFwifShufHwobj17fSkpO2NvbnN0IHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGZpbixvPShcInVuZGVmaW5lZFwiPT10eXBlb2YgcHJvY2Vzc3x8cHJvY2Vzcy5lbnYsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyksaT1vJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW5kZXhlZERCLHM9bz93aW5kb3cub3JpZ2luOm4uTG9jYWwsYz1yJiZmaW4ubWUudXVpZCxkPXImJmZpbi5tZS5uYW1lLGw9ciYmZmluLm1lLmVudGl0eVR5cGUsdT1cInByb2RcIj09PW4uTG9jYWwscD0obi5EZXYsbi5TdGFnaW5nLG4uUHJvZCxcImZpbnM6Ly9zeXN0ZW0tYXBwcy93b3Jrc3BhY2VcIiksaD1cImh0dHBzOi8vd29ya3NwYWNlLm9wZW5maW4uY28vd29ya3NwYWNlLzIxLjAuMTgvYXBwLmpzb25cIixmPWU9PmUuc3RhcnRzV2l0aChcImh0dHA6Ly9cIil8fGUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpP2U6cytlLGc9KGYoXCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMS4wLjE4XCIpLGYoXCJodHRwczovL3dvcmtzcGFjZS5vcGVuZmluLmNvL3dvcmtzcGFjZS8yMS4wLjE4XCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBXT1JLU1BBQ0VfRE9DU19QTEFURk9STV9VUkwmJmYoV09SS1NQQUNFX0RPQ1NfUExBVEZPUk1fVVJMKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgV09SS1NQQUNFX0RPQ1NfQ0xJRU5UX1VSTCYmZihXT1JLU1BBQ0VfRE9DU19DTElFTlRfVVJMKSxcIjIxLjAuMThcIik7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdPUktTUEFDRV9CVUlMRF9TSEEmJldPUktTUEFDRV9CVUlMRF9TSEF9LDc4NjooZSx0LGEpPT57XCJ1c2Ugc3RyaWN0XCI7YS5kKHQse0E6KCk9PnJ9KTtjb25zdCBuPVwib2Ytd29ya3NwYWNlLVwiO2NvbnN0IHI9bmV3IGNsYXNze21hcmsoZSl7cGVyZm9ybWFuY2UubWFyayhgJHtufSR7ZX1gKX1tYXJrU3RhcnQoZSl7cGVyZm9ybWFuY2UubWFyayhgJHtufSR7ZX0tc3RhcnRgKX1tYXJrRW5kKGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7bn0ke2V9LWVuZGApfW1hcmtFbmRBbmRNZWFzdXJlKGUpe3BlcmZvcm1hbmNlLm1hcmsoYCR7bn0ke2V9LWVuZGApO3RyeXtyZXR1cm4gcGVyZm9ybWFuY2UubWVhc3VyZShgJHtufSR7ZX1gLGAke259JHtlfS1zdGFydGAsYCR7bn0ke2V9LWVuZGApfWNhdGNoKGUpezB9fW1hcmtBbmRNZWFzdXJlKGUsdCl7cGVyZm9ybWFuY2UubWFyayhgJHtufSR7ZX1gKTt0cnl7cmV0dXJuIHBlcmZvcm1hbmNlLm1lYXN1cmUoYCR7bn0ke2V9LW1lYXN1cmVgLGAke259JHt0fS1zdGFydGAsYCR7bn0ke2V9YCl9Y2F0Y2goZSl7MH19cmVwb3J0V29ya3NwYWNlUGVyZm9ybWFuY2VFbnRyaWVzKCl7cmV0dXJuIHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJtZWFzdXJlXCIpLmZpbHRlcigoZT0+ZS5uYW1lLnN0YXJ0c1dpdGgobikpKX1yZXBvcnRXb3Jrc3BhY2VQZXJmb3JtYW5jZSgpe3JldHVybiB0aGlzLnJlcG9ydFdvcmtzcGFjZVBlcmZvcm1hbmNlRW50cmllcygpLm1hcCgoZT0+KHtuYW1lOmUubmFtZS5yZXBsYWNlKGAke259YCxcIlwiKS5yZXBsYWNlKFwiLW1lYXN1cmVcIixcIlwiKSxkdXJhdGlvbjplLmR1cmF0aW9ufSkpKX19fSwxODE6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO3ZhciBuLHI7YS5kKHQse3NQOigpPT5pfSksZnVuY3Rpb24oZSl7ZS5Ib21lPVwiL2hvbWUvXCIsZS5Ib21lU2VhcmNoPVwiL2hvbWUvP2RlZXBsaW5rPXNlYXJjaFwiLGUuSG9tZVBhZ2VzUmVuYW1lPVwiL2hvbWUvcGFnZXMvcmVuYW1lL1wiLGUuRG9jaz1cIi9kb2NrL1wiLGUuRG9jcz1cIi9wcm92aWRlci9kb2NzL1wiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250L1wiLGUuRGVwcmVjYXRlZEFsZXJ0PVwiL3Byb3ZpZGVyL2RlcHJlY2F0ZWQtYWxlcnQvXCIsZS5BbmFseXRpY3M9XCIvcHJvdmlkZXIvYW5hbHl0aWNzL1wiLGUuUHJvdmlkZXI9XCIvcHJvdmlkZXIvXCJ9KG58fChuPXt9KSksZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiL2Jyb3dzZXIvXCIsZS5Ccm93c2VyUG9wdXBNZW51PVwiL3BvcHVwLW1lbnUvXCIsZS5Ccm93c2VyUG9wdXBNZW51U2F2ZU1vZGFsPVwiL3BvcHVwLW1lbnUvc2F2ZS1tb2RhbC9cIixlLkJyb3dzZXJQb3B1cE1lbnVMYXlvdXRzPVwiL3BvcHVwLW1lbnUvbGF5b3V0cy9sYXlvdXRzL1wiLGUuQnJvd3NlclBvcHVwTWVudUNvbG9yTGlua2luZz1cIi9wb3B1cC1tZW51L2NvbG9yLWxpbmtpbmcvY29sb3ItbGlua2luZy9cIixlLkJyb3dzZXJJbmRpY2F0b3I9XCIvaW5kaWNhdG9yL1wiLGUuQnJvd3NlclBvcHVwTWVudUFkZHJlc3NTZWFyY2hSZXN1bHRzVmlldz1cIi9wb3B1cC1tZW51L2FkZHJlc3Mtc2VhcmNoLXJlc3VsdHMtdmlldy9cIixlLlJlc3BvbnNlTW9kYWw9XCIvcG9wdXAtbWVudS9yZXNwb25zZS1tb2RhbC9cIixlLkNsb3NlQ29uZmlybWF0aW9uTW9kYWw9XCIvcG9wdXAtbWVudS9jbG9zZS1jb25maXJtYXRpb24tbW9kYWwvXCIsZS5FbnRlcnByaXNlQnJvd3Nlcj1cIi9lbnRlcnByaXNlL1wiLGUuRW50ZXJwcmlzZUNvbnRleHRNZW51PVwiL2NvbnRleHQtbWVudS9cIixlLkVudGVycHJpc2VCb29rbWFya0RpYWxvZz1cIi9ib29rbWFyay1kaWFsb2cvXCIsZS5FbnRlcnByaXNlU3RvcmFnZVByb3h5PVwiL2VudGVycHJpc2Uvc3RvcmFnZS1wcm94eVwiLGUuRHJvcGRvd25NZW51PVwiL2Ryb3Bkb3duLW1lbnUvXCIsZS5FbnRlcnByaXNlRG9jaz1cIi9kb2NrL1wifShyfHwocj17fSkpO2NvbnN0IG89XCIvbWljcm9zb2Z0LTM2NS1pbnRlZ3JhdGlvbi1hc3NldHMvXCIsaT17SWNvbk9wZW5GaW5Mb2dvOlwiL2ljb25zL29wZW5maW5sb2dvLnN2Z1wiLEljb25GaWx0ZXI6XCIvaWNvbnMvZmlsdGVyLnN2Z1wiLExpZ2h0U3RvcmVmcm9udDpcIi9pY29ucy9zdG9yZS1pY29uLWxpZ2h0LnBuZ1wiLERhcmtTdG9yZWZyb250OlwiL2ljb25zL3N0b3JlLWljb24tZGFyay5wbmdcIixDYWxsSWNvbkxpZ2h0OlwiL2ljb25zL2NhbGwtaWNvbi1saWdodC5zdmdcIixDYWxsSWNvbkRhcms6XCIvaWNvbnMvY2FsbC1pY29uLWRhcmsuc3ZnXCIsQ2hhdEljb25MaWdodDpcIi9pY29ucy9jaGF0LWljb24tbGlnaHQuc3ZnXCIsQ2hhdEljb25EYXJrOlwiL2ljb25zL2NoYXQtaWNvbi1kYXJrLnN2Z1wiLE1lc3NhZ2VJY29uTGlnaHQ6XCIvaWNvbnMvbWVzc2FnZS1pY29uLWxpZ2h0LnN2Z1wiLE1lc3NhZ2VJY29uRGFyazpcIi9pY29ucy9tZXNzYWdlLWljb24tZGFyay5zdmdcIixNaWNyb3NvZnQzNjVBc3NldHM6e01pY3Jvc29mdDM2NURvY3VtZW50SWNvbjpgJHtvfW1pY3Jvc29mdC0zNjUtZG9jdW1lbnQtaWNvbi5zdmdgLE1pY3Jvc29mdDM2NUV4Y2VsSWNvbjpgJHtvfW1pY3Jvc29mdC0zNjUtZXhjZWwtaWNvbi5zdmdgLE1pY3Jvc29mdDM2NVBvd2VycG9pbnRJY29uOmAke299bWljcm9zb2Z0LTM2NS1wb3dlcnBvaW50LWljb24uc3ZnYCxNaWNyb3NvZnQzNjVPdXRsb29rSWNvbjpgJHtvfW1pY3Jvc29mdC0zNjUtb3V0bG9vay1pY29uLnN2Z2AsTWljcm9zb2Z0MzY1VGVhbXNJY29uOmAke299bWljcm9zb2Z0LTM2NS10ZWFtcy1pY29uLnN2Z2AsTWljcm9zb2Z0MzY1SWNvbjpgJHtvfW1pY3Jvc29mdC0zNjUtaWNvbi5zdmdgLFBERkZpbGVJY29uOmAke299cGRmLWZpbGUtaWNvbi5zdmdgfSxEb2NrSWNvbkxpZ2h0OlwiL2ljb25zL2RvY2staWNvbi1saWdodC5wbmdcIixEb2NrSWNvbkRhcms6XCIvaWNvbnMvZG9jay1pY29uLWRhcmsucG5nXCJ9O3ZhciBzOyFmdW5jdGlvbihlKXtlLlNlYXJjaD1cInNlYXJjaFwifShzfHwocz17fSkpfSw1MjM6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHtPWDooKT0+b30pO3ZhciBuO2EoNzIzKTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwiL2hvbWVcIixlLkJyb3dzZXI9XCIvYnJvd3NlclwiLGUuRW50ZXJwcmlzZT1cIi9lbnRlcnByaXNlXCIsZS5Qcm92aWRlcj1cIi9wcm92aWRlclwiLGUuU3RvcmVmcm9udD1cIi9zdG9yZWZyb250XCIsZS5Eb2NrPVwiL2RvY2tcIn0obnx8KG49e30pKTtjb25zdCByPVwiL3dvcmtzcGFjZS8yMS4wLjE4XCI7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gcitlfX0sMjc3OihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjthLmQodCx7R1I6KCk9PnMsa2k6KCk9PmQseHQ6KCk9PmN9KTt2YXIgbixyPWEoNzIzKSxvPWEoNzApO2EoOTc4KTshZnVuY3Rpb24oZSl7ZS5Ccm93c2VyPVwiQnJvd3NlclwiLGUuRG9jaz1cIkRvY2tcIixlLkVudGVycHJpc2VEb2NrPVwiRW50ZXJwcmlzZURvY2tcIixlLkhvbWU9XCJIb21lXCIsZS5Ob3RpZmljYXRpb249XCJOb3RpZmljYXRpb25cIixlLlN0b3JlZnJvbnQ9XCJTdG9yZWZyb250XCIsZS5QbGF0Zm9ybT1cIlBsYXRmb3JtXCIsZS5UaGVtaW5nPVwiVGhlbWluZ1wiLGUuTWljcm9mbG93PVwiTWljcm9mbG93XCJ9KG58fChuPXt9KSk7Y29uc3QgaT1hc3luYyhlLHQsYT1cIndvcmtzcGFjZS1saWNlbnNpbmdcIik9Pntjb25zdCBuPXthcGlWZXJzaW9uOnQuYXBpVmVyc2lvbnx8ci5ldCxjb21wb25lbnROYW1lOmUsY29tcG9uZW50VmVyc2lvbjp0LmNvbXBvbmVudFZlcnNpb258fHIuZXQsYWxsb3dlZDp0LmFsbG93ZWQscmVqZWN0aW9uQ29kZTp0LnJlamVjdGlvbkNvZGV9O2Zpbi5TeXN0ZW0ucmVnaXN0ZXJVc2FnZSh7dHlwZTphLGRhdGE6bn0pfTtjb25zdCBzPWU9PntvLkYyLnV1aWQ9PT1vLiRwLnV1aWQmJm8uRjIubmFtZT09PW8uJHAubmFtZXx8aShuLkhvbWUsZSl9LGM9ZT0+e2kobi5TdG9yZWZyb250LGUpfSxkPWU9PntpKG4uRG9jayxlKX07bmV3IE1hcH0sMzMzOihlLHQsYSk9PntcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7cmV0dXJuIHZvaWQgMCE9PXR5cGVvZiBjcnlwdG8mJlwicmFuZG9tVVVJRFwiaW4gY3J5cHRvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjcnlwdG8ucmFuZG9tVVVJRD9jcnlwdG8ucmFuZG9tVVVJRCgpOlwiMTAwMDAwMDAtMTAwMC00MDAwLTgwMDAtMTAwMDAwMDAwMDAwXCIucmVwbGFjZSgvWzAxOF0vZywoZT0+KGVeY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0mMTU+PmUvNCkudG9TdHJpbmcoMTYpKSl9YS5kKHQse046KCk9Pm59KX0sNzA6KGUsdCxhKT0+e1widXNlIHN0cmljdFwiO2EuZCh0LHskcDooKT0+YyxDOigpPT5tLEYyOigpPT5sLElvOigpPT5nLElxOigpPT5zLFE6KCk9Pm4sVDc6KCk9PnUsVHY6KCk9PmQsVjE6KCk9PmksZ1E6KCk9PnAsaGI6KCk9PmYsdXI6KCk9PncseHQ6KCk9Pmh9KTt2YXIgbixyPWEoNDM4KSxvPWEoNzIzKTshZnVuY3Rpb24oZSl7ZS5Ib21lPVwib3BlbmZpbi1ob21lXCIsZS5Eb2NrPVwib3BlbmZpbi1kb2NrXCIsZS5TdG9yZWZyb250PVwib3BlbmZpbi1zdG9yZWZyb250XCIsZS5Ib21lSW50ZXJuYWw9XCJvcGVuZmluLWhvbWUtaW50ZXJuYWxcIixlLkJyb3dzZXJNZW51PVwib3BlbmZpbi1icm93c2VyLW1lbnVcIixlLkJyb3dzZXJTYXZlTWVudT1cIm9wZW5maW4tYnJvd3Nlci1zYXZlLW1lbnVcIixlLkJyb3dzZXJJbmRpY2F0b3I9XCJvcGVuZmluLWJyb3dzZXItaW5kaWNhdG9yXCIsZS5Ccm93c2VyV2luZG93PVwiaW50ZXJuYWwtZ2VuZXJhdGVkLXdpbmRvd1wiLGUuQ2xhc3NpY1dpbmRvdz1cImludGVybmFsLWdlbmVyYXRlZC1jbGFzc2ljLXdpbmRvd1wiLGUuRW50ZXJwcmlzZUNvbnRleHRNZW51PVwib3BlbmZpbi1lbnRlcnByaXNlLWNvbnRleHQtbWVudVwiLGUuQnJvd3NlckFkZHJlc3NTZWFyY2hQcmVmaXg9XCJvcGVuZmluLWJyb3dzZXItbWVudS1hZGRyZXNzLXNlYXJjaC1cIixlLkVudGVycHJpc2VCb29rbWFya0RpYWxvZ1dpbmRvdz1cIm9wZW5maW4tZW50ZXJwcmlzZS1ib29rbWFyay1kaWFsb2dcIixlLkRyb3Bkb3duTWVudT1cIm9wZW5maW4tZW50ZXJwcmlzZS1kcm9wZG93bi1tZW51XCIsZS5Eb2NrQ29tcGFuaW9uPVwib3BlbmZpbi1kb2NrLWNvbXBhbmlvblwifShufHwobj17fSkpO2NvbnN0IGk9ZT0+KHtsZWZ0OihlLmxlZnQrKGUucmlnaHQ/P2UubGVmdCtlLndpZHRoKSkvMix0b3A6KGUudG9wKyhlLmJvdHRvbT8/ZS50b3ArZS5oZWlnaHQpKS8yfSk7ZnVuY3Rpb24gcyhlKXtpZighby5jSSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRPRldpbmRvdyBjYW4gb25seSBiZSB1c2VkIGluIGFuIE9wZW5GaW4gZW52LiBBdm9pZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1cmluZyBwcmUtcmVuZGVyaW5nLlwiKTtyZXR1cm4gZmluLldpbmRvdy53cmFwU3luYyhlKX1jb25zdCBjPXtuYW1lOm8udkwsdXVpZDpvLiRofTtmdW5jdGlvbiBkKCl7cmV0dXJuIHMoYyl9Y29uc3QgbD17bmFtZTpuLkhvbWUsdXVpZDpyLk1XLldvcmtzcGFjZX0sdT17bmFtZTpuLkRvY2ssdXVpZDpyLk1XLldvcmtzcGFjZX0scD17bmFtZTpuLlN0b3JlZnJvbnQsdXVpZDpyLk1XLldvcmtzcGFjZX0saD17bmFtZTpyLk1XLldvcmtzcGFjZSx1dWlkOnIuTVcuV29ya3NwYWNlfTtjb25zdCBmPWFzeW5jIGU9Pnt0cnl7Y29uc3QgdD1hd2FpdCBmaW4uV2luZG93LndyYXBTeW5jKHtuYW1lOmUubmFtZSx1dWlkOmUudXVpZD8/ZmluLm1lLnV1aWR9KS5nZXRPcHRpb25zKCk7cmV0dXJuKFwiYnJvd3NlclwiPT09dC53b3Jrc3BhY2VQbGF0Zm9ybT8ud2luZG93VHlwZXx8XCJlbnRlcnByaXNlXCI9PT10LndvcmtzcGFjZVBsYXRmb3JtPy53aW5kb3dUeXBlKSYmdC53b3Jrc3BhY2VQbGF0Zm9ybT8ucGFnZXN9Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybihcImlzQnJvd3NlcldpbmRvdyBlcnJvcjogXCIsZSksITF9fTthc3luYyBmdW5jdGlvbiBnKCl7Y29uc3QgZT1hd2FpdCBmaW4uQXBwbGljYXRpb24uZ2V0Q3VycmVudFN5bmMoKS5nZXRDaGlsZFdpbmRvd3MoKSx0PWF3YWl0IFByb21pc2UuYWxsKGUubWFwKChhc3luYyBlPT5mKGUuaWRlbnRpdHkpKSkpO3JldHVybiBlLmZpbHRlcigoKGUsYSk9PnRbYV0pKX1jb25zdCBtPWU9PnMoZSkuZ2V0T3B0aW9ucygpLnRoZW4oKCgpPT4hMCkpLmNhdGNoKCgoKT0+ITEpKTthc3luYyBmdW5jdGlvbiB3KGUpe2NvbnN0IHQ9YXdhaXQgZmluLlN5c3RlbS5nZXRNb25pdG9ySW5mbygpO3JldHVyblt0LnByaW1hcnlNb25pdG9yLC4uLnQubm9uUHJpbWFyeU1vbml0b3JzXS5yZWR1Y2UoKCh0LGEpPT57Y29uc3Qgbj1mdW5jdGlvbihlLHQpe2NvbnN0IGE9ZS50b3Asbj1lLmxlZnQscj1lLnRvcCtlLmhlaWdodCxvPWUubGVmdCtlLndpZHRoLGk9dC5tb25pdG9yUmVjdC50b3Ascz10Lm1vbml0b3JSZWN0LmxlZnQsYz10Lm1vbml0b3JSZWN0LmJvdHRvbSxkPXQubW9uaXRvclJlY3QucmlnaHQ7aWYoYT5jfHxyPGl8fG4+ZHx8bzxzKXJldHVybiAwO2NvbnN0IGw9TWF0aC5tYXgoYSxpKSx1PU1hdGgubWF4KG4scyk7cmV0dXJuKE1hdGgubWluKHIsYyktbCkqKE1hdGgubWluKG8sZCktdSkvKGUuaGVpZ2h0KmUud2lkdGgpfShlLGEpO3JldHVybiBuPnQucGVyY2VudGFnZT97cGVyY2VudGFnZTpuLG1vbml0b3I6YX06dH0pLHtwZXJjZW50YWdlOjAsbW9uaXRvcjp0LnByaW1hcnlNb25pdG9yfSkubW9uaXRvcn19fSx0PXt9O2Z1bmN0aW9uIGEobil7dmFyIHI9dFtuXTtpZih2b2lkIDAhPT1yKXJldHVybiByLmV4cG9ydHM7dmFyIG89dFtuXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbbl0obyxvLmV4cG9ydHMsYSksby5leHBvcnRzfWEubj1lPT57dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlPygpPT5lLmRlZmF1bHQ6KCk9PmU7cmV0dXJuIGEuZCh0LHthOnR9KSx0fSxhLmQ9KGUsdCk9Pntmb3IodmFyIG4gaW4gdClhLm8odCxuKSYmIWEubyhlLG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiEwLGdldDp0W25dfSl9LGEubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCksYS5yPWU9PntcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfTt2YXIgbj17fTsoKCk9PntcInVzZSBzdHJpY3RcIjthLnIobiksYS5kKG4se0FjdGlvblRyaWdnZXI6KCk9PlJlLlAsQXBwTWFuaWZlc3RUeXBlOigpPT5OZS52LEJ1dHRvblN0eWxlOigpPT5CZS5pbixDTElBY3Rpb246KCk9PiQuUEssQ0xJRmlsdGVyT3B0aW9uVHlwZTooKT0+JC5vbyxDTElUZW1wbGF0ZTooKT0+JC5mQyxDb250YWluZXJUZW1wbGF0ZUZyYWdtZW50TmFtZXM6KCk9PkJlLmNlLERvY2s6KCk9PmUsRG9ja0J1dHRvbk5hbWVzOigpPT51LmEsSG9tZTooKT0+UyxJbnRlZ3JhdGlvbnM6KCk9PnQsUHJlc2VudGF0aW9uVGVtcGxhdGVGcmFnbWVudE5hbWVzOigpPT5CZS5ucCxTZWFyY2hUYWdCYWNrZ3JvdW5kOigpPT5SZS5SLFN0b3JlZnJvbnQ6KCk9PkVlLFN0b3JlZnJvbnRUZW1wbGF0ZTooKT0+TmUueixUZW1wbGF0ZUZyYWdtZW50VHlwZXM6KCk9PkJlLlNNfSk7dmFyIGU9e307YS5yKGUpLGEuZChlLHtEb2NrQnV0dG9uTmFtZXM6KCk9PnUuYSxkZXJlZ2lzdGVyOigpPT5tLG1pbmltaXplOigpPT53LHJlZ2lzdGVyOigpPT5nLHNob3c6KCk9Pnl9KTt2YXIgdD17fTthLnIodCksYS5kKHQse01pY3Jvc29mdDM2NVdvcmtmbG93SW50ZWdyYXRpb246KCk9PkRlfSk7dmFyIHI9YSg3MjMpLG89YSg3ODYpLGk9YSgyNzcpLHM9YSg3MCksYz1hKDY5NSksZD1hKDc5KTt2YXIgbD1hKDI0OCksdT1hKDYwMCk7bGV0IHAsaDtjb25zdCBmPShlPVtdKT0+e2NvbnN0IHQ9ZS5maWx0ZXIoKGU9PiEhZS5pZCkpLm1hcCgoZT0+ZS5pZCkpO2lmKG5ldyBTZXQodCkuc2l6ZSE9PXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkRvY2sgcHJvdmlkZXIgYnV0dG9ucyBtdXN0IGhhdmUgdW5pcXVlIGlkZW50aWZpZXJzIGlmIHNwZWNpZmllZC5cIil9LGc9YXN5bmMgZT0+eygwLGwuSCkoXCJkb2NrXCIscy5UNyk7Y29uc3QgdD1hd2FpdChhc3luYyBlPT57YXdhaXQoMCxkLktaKShmaW4ubWUuaWRlbnRpdHkpO2NvbnN0IHQ9YXdhaXQoMCxjLk43KSgpO2lmKGgpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgdXNpbmcgYERvY2sucmVnaXN0ZXJgLiBBIERvY2sgcHJvdmlkZXIgZm9yIHRoaXMgV29ya3NwYWNlIFBsYXRmb3JtIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4gQ2FsbCBgRG9jay5kZXJlZ2lzdGVyYCBiZWZvcmUgY2FsbGluZyBgRG9jay5yZWdpc3RlcmAgYWdhaW4uXCIpO3JldHVybiBoPWUsZS5jbGllbnRBUElWZXJzaW9uPXIuZXQsdC5kaXNwYXRjaChcInJlZ2lzdGVyLXByb3ZpZGVyXCIse3Byb3ZpZGVyVHlwZTpcImRvY2tcIixpbmZvOmV9KX0pKGUpO3JldHVybiBwPW5ldyBQcm9taXNlKCgoYSxuKT0+e3RyeXsoZT0+e2Uud29ya3NwYWNlQ29tcG9uZW50cyYmIUFycmF5LmlzQXJyYXkoZS53b3Jrc3BhY2VDb21wb25lbnRzKSYmY29uc29sZS53YXJuKFwiVXNpbmcgdGhlIGBXb3Jrc3BhY2VDb21wb25lbnRCdXR0b25PcHRpb25zYCB0eXBlIHRvIGNvbmZpZ3VyZSB0aGUgV29ya3NwYWNlIENvbXBvbmVudHMgQnV0dG9ucyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGBXb3Jrc3BhY2VCdXR0b25zQ29uZmlnYCBpbnN0ZWFkLlwiKX0pKGUpLGYoZS5idXR0b25zKSwoMCxpLmtpKSh7YWxsb3dlZDohMCxjb21wb25lbnRWZXJzaW9uOnQ/LndvcmtzcGFjZVZlcnNpb259KSxyLmV0LGEoe2NsaWVudEFQSVZlcnNpb246ci5ldCx3b3Jrc3BhY2VWZXJzaW9uOnQ/LndvcmtzcGFjZVZlcnNpb24/P1wiXCIsdXBkYXRlRG9ja1Byb3ZpZGVyQ29uZmlnOmFzeW5jIHQ9PntpZighaCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB1c2luZyBgRG9jay51cGRhdGVEb2NrUHJvdmlkZXJDb25maWdgLiBEb2NrIHByb3ZpZGVyIGlzIG5vdCByZWdpc3RlcmVkLiBNYWtlIHN1cmUgdG8gY2FsbCBgRG9jay5yZWdpc3RlcmAgZmlyc3QuXCIpO2YodC5idXR0b25zKTtjb25zdCBhPWF3YWl0KDAsYy5ONykoKTthd2FpdCBhLmRpc3BhdGNoKFwidXBkYXRlLXByb3ZpZGVyXCIse3Byb3ZpZGVyVHlwZTpcImRvY2tcIixwcm92aWRlcjp7Li4uZSx3b3Jrc3BhY2VDb21wb25lbnRzOnQud29ya3NwYWNlQ29tcG9uZW50cyxidXR0b25zOnQuYnV0dG9ucyx0aXRsZTp0LnRpdGxlLGljb246dC5pY29uLGRpc2FibGVVc2VyUmVhcnJhbmdlbWVudDp0LmRpc2FibGVVc2VyUmVhcnJhbmdlbWVudCxpZDplLmlkfX0pfX0pfWNhdGNoKGUpeygwLGkua2kpKHthbGxvd2VkOiExLHJlamVjdGlvbkNvZGU6ZSBpbnN0YW5jZW9mIEVycm9yP2UubWVzc2FnZTpcInVua25vd25cIn0pLG4oZSkscD12b2lkIDB9ZmluYWxseXtvLkEubWFya0VuZEFuZE1lYXN1cmUoXCJkb2NrLXJlZ2lzdHJhdGlvblwiKX19KSkscH0sbT1hc3luYygpPT57aWYoYXdhaXQgcCwhaCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB1c2luZyBgRG9jay5kZXJlZ2lzdGVyYC4gRG9jayBwcm92aWRlciBpcyBub3QgcmVnaXN0ZXJlZC4gQ2FsbCBgRG9jay5yZWdpc3RlcmAgYmVmb3JlIGNhbGxpbmcgYERvY2suZGVyZWdpc3RlcmAuXCIpO2NvbnN0IGU9YXdhaXQoMCxjLk43KSgpO2F3YWl0IGUuZGlzcGF0Y2goXCJkZXJlZ2lzdGVyLXByb3ZpZGVyXCIse3Byb3ZpZGVyVHlwZTpcImRvY2tcIixpZDpoLmlkfSksaD12b2lkIDAscD12b2lkIDB9LHc9YXN5bmMoKT0+e2F3YWl0IHAsYXdhaXQoMCxjLm5BKSgpLGF3YWl0KGFzeW5jIGU9Pihhd2FpdCgwLGMucDQpKCkpLmRpc3BhdGNoKFwiaGlkZS1wcm92aWRlci13aW5kb3dcIix7cHJvdmlkZXJUeXBlOmV9KSkoXCJkb2NrXCIpfSx5PWFzeW5jKCk9PntvLkEubWFya1N0YXJ0KFwiZG9jay1zaG93XCIpLGF3YWl0IHAsYXdhaXQoMCxjLm5BKSgpLGF3YWl0KGFzeW5jIGU9Pihhd2FpdCgwLGMucDQpKCkpLmRpc3BhdGNoKFwic2hvdy1wcm92aWRlci13aW5kb3dcIix7cHJvdmlkZXJUeXBlOmV9KSkoXCJkb2NrXCIpfTt2YXIgdixrLGIsUz1hKDgzNCksUD1mdW5jdGlvbihlLHQsYSxuLHIpe2lmKFwibVwiPT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO2lmKFwiYVwiPT09biYmIXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2UhPT10fHwhcjohdC5oYXMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwiYVwiPT09bj9yLmNhbGwoZSxhKTpyP3IudmFsdWU9YTp0LnNldChlLGEpLGF9LEM9ZnVuY3Rpb24oZSx0LGEsbil7aWYoXCJhXCI9PT1hJiYhbil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFuOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwibVwiPT09YT9uOlwiYVwiPT09YT9uLmNhbGwoZSk6bj9uLnZhbHVlOnQuZ2V0KGUpfTt2PW5ldyBXZWFrTWFwLGs9bmV3IFdlYWtNYXAsYj1uZXcgV2Vha01hcDtjb25zdCB4PWNsYXNze2NvbnN0cnVjdG9yKGUpe3Yuc2V0KHRoaXMsdm9pZCAwKSxrLnNldCh0aGlzLHZvaWQgMCksYi5zZXQodGhpcyx2b2lkIDApLFAodGhpcyx2LGUsXCJmXCIpLFAodGhpcyxrLG5ldyBNYXAsXCJmXCIpLFAodGhpcyxiLFtdLFwiZlwiKX1nZXQoZSl7aWYoQyh0aGlzLGssXCJmXCIpLmhhcyhlKSlyZXR1cm4gdGhpcy51cGRhdGVRdWV1ZShlKSxDKHRoaXMsayxcImZcIikuZ2V0KGUpfWhhcyhlKXtyZXR1cm4gQyh0aGlzLGssXCJmXCIpLmhhcyhlKX1wdXQoZSx0KXtpZihDKHRoaXMsayxcImZcIikuaGFzKGUpKUModGhpcyxrLFwiZlwiKS5zZXQoZSx0KSx0aGlzLnVwZGF0ZVF1ZXVlKGUpO2Vsc2V7aWYoQyh0aGlzLGIsXCJmXCIpLmxlbmd0aD09PUModGhpcyx2LFwiZlwiKSl7Y29uc3QgZT1DKHRoaXMsYixcImZcIikuc2hpZnQoKTtlJiZDKHRoaXMsayxcImZcIikuZGVsZXRlKGUpfUModGhpcyxrLFwiZlwiKS5zZXQoZSx0KSxDKHRoaXMsYixcImZcIikucHVzaChlKX19dXBkYXRlUXVldWUoZSl7Y29uc3QgdD1DKHRoaXMsYixcImZcIikuaW5kZXhPZihlKTstMSE9PXQmJihDKHRoaXMsYixcImZcIikuc3BsaWNlKHQsMSksQyh0aGlzLGIsXCJmXCIpLnB1c2goZSkpfX07ZnVuY3Rpb24gQShlKXtyZXR1cm4gZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpfWZ1bmN0aW9uIE0oZSwuLi50KXtpZighdC5sZW5ndGgpcmV0dXJuIGU7Y29uc3QgYT10LnNoaWZ0KCk7cmV0dXJuIEEoZSkmJkEoYSkmJk9iamVjdC5lbnRyaWVzKGEpLmZvckVhY2goKChbdCxhXSk9PntpZihBKGEpKXJldHVybiBlW3RdfHwoZVt0XT17fSksTShlW3RdLGEpO2VbdF09YX0pKSxNKGUsLi4udCl9dmFyIEksRixXLFQsXyxPPWEoMTgxKSxEPWEoNTIzKSxFPWZ1bmN0aW9uKGUsdCxhLG4scil7aWYoXCJtXCI9PT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT1uJiYhcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFyOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT1uP3IuY2FsbChlLGEpOnI/ci52YWx1ZT1hOnQuc2V0KGUsYSksYX0sUj1mdW5jdGlvbihlLHQsYSxuKXtpZihcImFcIj09PWEmJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IW46IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1hP246XCJhXCI9PT1hP24uY2FsbChlKTpuP24udmFsdWU6dC5nZXQoZSl9O0Y9bmV3IFdlYWtNYXAsVz1uZXcgV2Vha01hcCxUPW5ldyBXZWFrTWFwLEk9bmV3IFdlYWtTZXQsXz1mdW5jdGlvbigpe2NvbnN0IGU9QXJyYXkuZnJvbShSKHRoaXMsRixcImZcIikuZW50cmllcygpKS5yZWR1Y2UoKChlLHQpPT4hZXx8dFsxXS50aW1lc3RhbXA8ZVsxXS50aW1lc3RhbXA/dDplKSxudWxsKTtyZXR1cm4gZT9lWzBdOm51bGx9O2NvbnN0IEI9Y2xhc3N7Y29uc3RydWN0b3IoZT0zZTUsdD0xMDApe0kuYWRkKHRoaXMpLEYuc2V0KHRoaXMsdm9pZCAwKSxXLnNldCh0aGlzLHZvaWQgMCksVC5zZXQodGhpcyx2b2lkIDApLEUodGhpcyxGLG5ldyBNYXAsXCJmXCIpLEUodGhpcyxXLGUsXCJmXCIpLEUodGhpcyxULHQsXCJmXCIpfWdldChlKXtjb25zdCB0PVIodGhpcyxGLFwiZlwiKS5nZXQoZSk7aWYoIXQpcmV0dXJuIG51bGw7cmV0dXJuIERhdGUubm93KCktdC50aW1lc3RhbXA8Uih0aGlzLFcsXCJmXCIpP3QudmFsdWU6KFIodGhpcyxGLFwiZlwiKS5kZWxldGUoZSksbnVsbCl9cHV0KGUsdCl7aWYoUih0aGlzLEYsXCJmXCIpLnNpemU+PVIodGhpcyxULFwiZlwiKSl7Y29uc3QgZT1SKHRoaXMsSSxcIm1cIixfKS5jYWxsKHRoaXMpO251bGwhPWUmJlIodGhpcyxGLFwiZlwiKS5kZWxldGUoZSl9Uih0aGlzLEYsXCJmXCIpLnNldChlLHt2YWx1ZTp0LHRpbWVzdGFtcDpEYXRlLm5vdygpfSl9cmVtb3ZlKGUpe1IodGhpcyxGLFwiZlwiKS5kZWxldGUoZSl9Y2xlYXIoKXtSKHRoaXMsRixcImZcIikuY2xlYXIoKX19O3ZhciBOLEw9YSgzMzMpLCQ9YSg4NzIpLEc9ZnVuY3Rpb24oZSx0LGEsbil7aWYoXCJhXCI9PT1hJiYhbil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFuOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwibVwiPT09YT9uOlwiYVwiPT09YT9uLmNhbGwoZSk6bj9uLnZhbHVlOnQuZ2V0KGUpfTtjb25zdCBVPXt9O2NsYXNzIFZ7Y29uc3RydWN0b3IoZSl7Ti5zZXQodGhpcyxuZXcgU2V0KSx0aGlzLl9pbml0aWFsaXplV29ya2Zsb3dzPWFzeW5jKGU9dGhpcy5jb25maWcpPT57Y29uc3R7d29ya2Zsb3dzOnR9PWU7Zm9yKGNvbnN0IGUgaW4gdCl7aWYoIXRbZV0uZGlzYWJsZUF1dG9Jbml0aWFsaXplKXRyeXtHKHRoaXMsTixcImZcIikuaGFzKGUpP2NvbnNvbGUud2FybihgV29ya2Zsb3cgJHtlfSBhbHJlYWR5IGluaXRpYWxpemVkLmApOihHKHRoaXMsTixcImZcIikuYWRkKGUpLGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVdvcmtmbG93KGUpKX1jYXRjaCh0KXtHKHRoaXMsTixcImZcIikuZGVsZXRlKGUpLGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlZ2lzdGVyaW5nICR7ZX06YCx0KX19fTtjb25zdCB0PU0oe30sVSxlKTt0aGlzLmNvbmZpZz10fWFzeW5jIGluaXRpYWxpemVXb3JrZmxvdyhlKXtHKHRoaXMsTixcImZcIikuYWRkKGUpfX1OPW5ldyBXZWFrTWFwO2NvbnN0IHo9cmVxdWlyZShcIkBvcGVuZmluL21pY3Jvc29mdDM2NVwiKTtsZXQgSD0wO2NvbnN0IHE9e2NoYXRNZXNzYWdlOlwiQ2hhdCBNZXNzYWdlXCIsZXZlbnQ6XCJFdmVudFwiLG1lc3NhZ2U6XCJFbWFpbFwiLGRyaXZlOlwiRG9jdW1lbnRcIixjb250YWN0OlwiQ29udGFjdFwiLHVzZXI6XCJVc2VyXCIsbGlzdDpcIkxpc3RcIn0saj17cGRmOlwiUERGXCIsZG9jeDpcIldvcmRcIixwcHR4OlwiUG93ZXJQb2ludFwiLHhsc3g6XCJFeGNlbFwiLG9uZW5vdGU6XCJPbmVOb3RlXCJ9LFg9e2NoYXRNZXNzYWdlOltcIkNoYXQuUmVhZFwiLFwiQ2hhbm5lbE1lc3NhZ2UuUmVhZC5BbGxcIl0sbGlzdDpbXCJTaXRlcy5SZWFkLkFsbFwiXSxldmVudDpbXCJDYWxlbmRhcnMuUmVhZFwiXSxtZXNzYWdlOltcIk1haWwuUmVhZFdyaXRlLlNoYXJlZFwiXSxjb250YWN0OltcIkNvbnRhY3RzLlJlYWQuU2hhcmVkXCIsXCJNYWlsLlJlYWRXcml0ZS5TaGFyZWRcIl0sdXNlcjpbXCJVc2VyLlJlYWQuQWxsXCIsXCJQcmVzZW5jZS5SZWFkLkFsbFwiXX0sSz1cIk1JQ1JPU09GVF8zNjVfU0VBUkNIX1RZUEVfRklMVEVSXCIsUT1cIk1JQ1JPU09GVF8zNjVfU0VBUkNIX0ZJTEVfVFlQRV9GSUxURVJcIixaPVwiTUlDUk9TT0ZUXzM2NV9TRUFSQ0hfREVQQVJUTUVOVF9GSUxURVJcIixZPVwiTUlDUk9TT0ZUXzM2NV9TRUFSQ0hfSk9CX1RJVExFX0ZJTFRFUlwiLEo9XCJUZWFtcyBDYWxsXCIsZWU9XCJUZWFtcyBDaGF0XCIsdGU9XCJFbWFpbFwiLGFlPShlLHQpPT57Y29uc3QgYT1bXSxuPXtpdGVtOmUuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1LKSksZG9jdW1lbnRUeXBlOmUuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1RKSl9LHI9W3t2YWx1ZTpcIkRvY3VtZW50XCIsaXNTZWxlY3RlZDohIW4uaXRlbT8ub3B0aW9ucz8uZmluZCgoKHt2YWx1ZTplfSk9PlwiRmlsZVwiPT09ZSkpPy5pc1NlbGVjdGVkfSx7dmFsdWU6XCJDb250YWN0XCIsaXNTZWxlY3RlZDohIW4uaXRlbT8ub3B0aW9ucz8uZmluZCgoKHt2YWx1ZTplfSk9PlwiQ29udGFjdFwiPT09ZSkpPy5pc1NlbGVjdGVkfSx7dmFsdWU6XCJDaGF0IE1lc3NhZ2VcIixpc1NlbGVjdGVkOiEhbi5pdGVtPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJDaGF0IE1lc3NhZ2VcIj09PWUpKT8uaXNTZWxlY3RlZH0se3ZhbHVlOlwiRW1haWxcIixpc1NlbGVjdGVkOiEhbi5pdGVtPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJFbWFpbFwiPT09ZSkpPy5pc1NlbGVjdGVkfSx7dmFsdWU6XCJFdmVudFwiLGlzU2VsZWN0ZWQ6ISFuLml0ZW0/Lm9wdGlvbnM/LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkV2ZW50XCI9PT1lKSk/LmlzU2VsZWN0ZWR9LHt2YWx1ZTpcIkxpc3RcIixpc1NlbGVjdGVkOiEhbi5pdGVtPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJMaXN0XCI9PT1lKSk/LmlzU2VsZWN0ZWR9XTtyZXR1cm4gYS5wdXNoKHtpZDpLLHRpdGxlOlwiVHlwZVwiLHR5cGU6JC5vby5NdWx0aVNlbGVjdCxvcHRpb25zOnIuZmlsdGVyKChlPT50LmhhcyhlLnZhbHVlKSkpfSksXCJEb2N1bWVudFwiPT09bi5pdGVtPy5vcHRpb25zPy5maWx0ZXIoKGU9PmUuaXNTZWxlY3RlZCkpPy5bMF0udmFsdWUmJmEucHVzaCh7aWQ6USx0aXRsZTpcIkZpbGUgVHlwZVwiLHR5cGU6JC5vby5NdWx0aVNlbGVjdCxvcHRpb25zOk9iamVjdC5lbnRyaWVzKGopLm1hcCgoKFssZV0pPT4oe3ZhbHVlOmUsaXNTZWxlY3RlZDohIW4uZG9jdW1lbnRUeXBlPy5vcHRpb25zPy5maWx0ZXIoKGU9PmUuaXNTZWxlY3RlZCkpPy5maW5kKCgoe3ZhbHVlOmV9KT0+XCJGaWxlXCI9PT1lKSk/LmlzU2VsZWN0ZWR9KSkpfSksYX0sbmU9KGUsdCk9Pntjb25zdCBhPXQuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1LKSk/Lm9wdGlvbnM7aWYoIUFycmF5LmlzQXJyYXkoYSl8fCFhLmZpbmQoKGU9PlwiQ29udGFjdFwiPT09ZS52YWx1ZXx8XCJVc2VyXCI9PT1lLnZhbHVlKSk/LmlzU2VsZWN0ZWQpcmV0dXJuW107Y29uc3R7ZGVwYXJ0bWVudDpuLGpvYlRpdGxlOnJ9PWUucmVkdWNlKCgoZSx0KT0+KHQuZGVwYXJ0bWVudCYmZS5kZXBhcnRtZW50LmFkZCh0LmRlcGFydG1lbnQpLHQuam9iVGl0bGUmJmUuam9iVGl0bGUuYWRkKHQuam9iVGl0bGUpLGUpKSx7ZGVwYXJ0bWVudDpuZXcgU2V0LGpvYlRpdGxlOm5ldyBTZXR9KSxvPXQuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1aKSksaT1BcnJheS5mcm9tKG4pLm1hcCgoZT0+KHt2YWx1ZTplLGlzU2VsZWN0ZWQ6ISFvPy5vcHRpb25zPy5maW5kKCgoe3ZhbHVlOnR9KT0+dD09PWUpKT8uaXNTZWxlY3RlZH0pKSkscz10LmNvbnRleHQuc2VsZWN0ZWRGaWx0ZXJzPy5maW5kKChlPT5lLmlkPT09WikpLGM9QXJyYXkuZnJvbShyKS5tYXAoKGU9Pih7dmFsdWU6ZSxpc1NlbGVjdGVkOiEhcz8ub3B0aW9ucz8uZmluZCgoKHt2YWx1ZTp0fSk9PnQ9PT1lKSk/LmlzU2VsZWN0ZWR9KSkpO3JldHVyblt7aWQ6Wix0aXRsZTpcIkRlcGFydG1lbnRcIix0eXBlOiQub28uTXVsdGlTZWxlY3Qsb3B0aW9uczppfSx7aWQ6WSx0aXRsZTpcIkpvYiBUaXRsZVwiLHR5cGU6JC5vby5NdWx0aVNlbGVjdCxvcHRpb25zOmN9XX0scmU9ZT0+e2NvbnN0IHQ9ZS5jb250ZXh0LnNlbGVjdGVkRmlsdGVycz8uZmluZCgoZT0+ZS5pZD09PVopKSxhPUFycmF5LmlzQXJyYXkodD8ub3B0aW9ucyk/dC5vcHRpb25zLmZpbHRlcigoZT0+ZS5pc1NlbGVjdGVkKSkubWFwKChlPT5lLnZhbHVlKSk6W10sbj1lLmNvbnRleHQuc2VsZWN0ZWRGaWx0ZXJzPy5maW5kKChlPT5lLmlkPT09WSkpO3JldHVybntkZXBhcnRtZW50OmEsam9iVGl0bGU6QXJyYXkuaXNBcnJheShuPy5vcHRpb25zKT9uLm9wdGlvbnMuZmlsdGVyKChlPT5lLmlzU2VsZWN0ZWQpKS5tYXAoKGU9PmUudmFsdWUpKTpbXX19LG9lPShlLHQpPT57Y29uc3R7ZGVwYXJ0bWVudDphLGpvYlRpdGxlOm59PXQ7cmV0dXJuIGUuZmlsdGVyKChlPT4oIWEubGVuZ3RofHxhLmluY2x1ZGVzKGUuZGVwYXJ0bWVudCkpJiYoIW4ubGVuZ3RofHxuLmluY2x1ZGVzKGUuam9iVGl0bGUpKSkpfSxpZT1lPT57Y29uc3QgdD1BcnJheS5pc0FycmF5KGUuY29udGV4dC5zZWxlY3RlZEZpbHRlcnM/LmZpbmQoKGU9PmUuaWQ9PT1RKSk/Lm9wdGlvbnMpP2UuY29udGV4dC5zZWxlY3RlZEZpbHRlcnMuZmluZCgoZT0+ZS5pZD09PVEpKT8ub3B0aW9uczpbXTtyZXR1cm57ZmlsdGVyRmlsZXM6dCYmdC5zb21lKCgoe2lzU2VsZWN0ZWQ6ZX0pPT5lKSksc2hvd1dvcmQ6dC5maW5kKCgoe3ZhbHVlOmV9KT0+XCJXb3JkXCI9PT1lKSk/LmlzU2VsZWN0ZWQsc2hvd0V4Y2VsOnQuZmluZCgoKHt2YWx1ZTplfSk9PlwiRXhjZWxcIj09PWUpKT8uaXNTZWxlY3RlZCxzaG93UG93ZXJQb2ludDp0LmZpbmQoKCh7dmFsdWU6ZX0pPT5cIlBvd2VyUG9pbnRcIj09PWUpKT8uaXNTZWxlY3RlZCxzaG93UERGOnQuZmluZCgoKHt2YWx1ZTplfSk9PlwiUERGXCI9PT1lKSk/LmlzU2VsZWN0ZWQsc2hvd09uZU5vdGU6dC5maW5kKCgoe3ZhbHVlOmV9KT0+XCJPbmVOb3RlXCI9PT1lKSk/LmlzU2VsZWN0ZWR9fSxzZT0oZSx0KT0+e2NvbnN0IGE9W107cmV0dXJuIHQuc2hvd1dvcmQmJmEucHVzaChcIi5kb2N4XCIpLHQuc2hvd0V4Y2VsJiZhLnB1c2goXCIueGxzeFwiKSx0LnNob3dQb3dlclBvaW50JiZhLnB1c2goXCIucHB0eFwiKSx0LnNob3dQREYmJmEucHVzaChcIi5wZGZcIiksdC5zaG93T25lTm90ZSYmYS5wdXNoKFwiLm9uZVwiKSxlLmZpbHRlcigoZT0+e2lmKGUuZmlsZSl7Y29uc3QgdD1lLm5hbWUuc3Vic3RyaW5nKGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO3JldHVybiBhLmluY2x1ZGVzKHQpfXJldHVybiExfSkpfSxjZT0oZT1cIlwiKT0+e3N3aXRjaChlLnNwbGl0KFwiLlwiKS5wb3AoKT8udG9Mb3dlckNhc2UoKT8/XCJcIil7Y2FzZVwiZG9jeFwiOmNhc2VcImRvY1wiOnJldHVyblwiTWljcm9zb2Z0IFdvcmRcIjtjYXNlXCJ4bHN4XCI6Y2FzZVwieGxzXCI6cmV0dXJuXCJNaWNyb3NvZnQgRXhjZWxcIjtjYXNlXCJwcHR4XCI6Y2FzZVwicHB0XCI6cmV0dXJuXCJNaWNyb3NvZnQgUG93ZXJQb2ludFwiO2Nhc2VcInBkZlwiOnJldHVyblwiUERGXCI7Y2FzZVwicG5nXCI6Y2FzZVwianBnXCI6Y2FzZVwianBlZ1wiOmNhc2VcImdpZlwiOnJldHVyblwiSW1hZ2VcIjtjYXNlXCJ0eHRcIjpyZXR1cm5cIlRleHRcIjtkZWZhdWx0OnJldHVyblwiRmlsZVwifX0sZGU9KGU9XCJcIik9Pntzd2l0Y2goZS5zcGxpdChcIi5cIikucG9wKCk/LnRvTG93ZXJDYXNlKCk/P1wiXCIpe2Nhc2VcImRvY3hcIjpjYXNlXCJkb2NcIjpyZXR1cm4oMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVEb2N1bWVudEljb24pO2Nhc2VcInhsc3hcIjpjYXNlXCJ4bHNcIjpyZXR1cm4oMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVFeGNlbEljb24pO2Nhc2VcInBwdHhcIjpjYXNlXCJwcHRcIjpyZXR1cm4oMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVQb3dlcnBvaW50SWNvbik7Y2FzZVwicGRmXCI6cmV0dXJuKDAsRC5PWCkoTy5zUC5NaWNyb3NvZnQzNjVBc3NldHMuUERGRmlsZUljb24pO2RlZmF1bHQ6cmV0dXJufX0sbGU9ZT0+ZS5yZXBsYWNlKC9cXCsvZyxcIl9cIikucmVwbGFjZSgvXFwvL2csXCItXCIpO3ZhciB1ZSxwZSxoZSxmZSxnZSxtZSx3ZSx5ZSx2ZSxrZSxiZSxTZSxQZSxDZSx4ZSxBZSxNZSxJZSxGZSxXZSxUZSxfZT1mdW5jdGlvbihlLHQsYSxuKXtpZihcImFcIj09PWEmJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lIT09dHx8IW46IXQuaGFzKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1hP246XCJhXCI9PT1hP24uY2FsbChlKTpuP24udmFsdWU6dC5nZXQoZSl9LE9lPWZ1bmN0aW9uKGUsdCxhLG4scil7aWYoXCJtXCI9PT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT1uJiYhcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZSE9PXR8fCFyOiF0LmhhcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT1uP3IuY2FsbChlLGEpOnI/ci52YWx1ZT1hOnQuc2V0KGUsYSksYX07Y2xhc3MgRGUgZXh0ZW5kcyBWe2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9TSh7fSx7d29ya2Zsb3dzOntzZWFyY2g6KEgrPTEse2hvbWVQcm92aWRlcjp7ZGVzY3JpcHRpb246XCJNaWNyb3NvZnQgMzY1IHNlYXJjaCByZXN1bHRzIHByb3ZpZGVyXCIsaWQ6YE1TMzY1LSR7ZmluLm1lLmlkZW50aXR5LnV1aWR9LSR7SH1gLGxvZ29Vcmw6KDAsRC5PWCkoTy5zUC5NaWNyb3NvZnQzNjVBc3NldHMuTWljcm9zb2Z0MzY1SWNvbiksaWNvbjooMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVJY29uKSx0aXRsZTpcIk1pY3Jvc29mdCAzNjUgU2VhcmNoXCIsaW5wdXRQbGFjZWhvbGRlcjpcIldoYXQgd291bGQgeW91IGxpa2UgdG8gc2VhcmNoIGluIE1pY3Jvc29mdCAzNjUgdG9kYXk/XCIsZGlzcGF0Y2hGb2N1c0V2ZW50czohMH0sbWljcm9zb2Z0RW50aXR5VHlwZUNvbmZpZzp7bWVzc2FnZTohMCxjaGF0TWVzc2FnZTohMCxkcml2ZTohMCxldmVudDohMCx1c2VyOiEwLGNvbnRhY3Q6ITAsbGlzdDohMH0sdXNlVGVhbXNEZWVwTGluazohMH0pfX0sZSk7c3VwZXIodCksdWUuYWRkKHRoaXMpLHBlLnNldCh0aGlzLHZvaWQgMCksdGhpcy53b3JrZmxvd0ludGVncmF0aW9uTmFtZT1cIk1pY3Jvc29mdCAzNjVcIixoZS5zZXQodGhpcyx2b2lkIDApLGZlLnNldCh0aGlzLHZvaWQgMCksZ2Uuc2V0KHRoaXMsMSksbWUuc2V0KHRoaXMsbmV3IFNldCksd2Uuc2V0KHRoaXMsbmV3IHgoMTAwKSkseWUuc2V0KHRoaXMsbmV3IEIoNmU0KSksdGhpcy5jb25uZWN0PWFzeW5jKGU9dGhpcy5jb25maWcuY29ubmVjdCk9Pntjb25zdHtjbGllbnRJZDp0LHRlbmFudElkOmEscmVkaXJlY3RVcmk6bn09ZSxyPXRoaXMuY29uZmlnLndvcmtmbG93cz8uc2VhcmNoP09iamVjdC5lbnRyaWVzKHRoaXMuY29uZmlnLndvcmtmbG93cz8uc2VhcmNoPy5taWNyb3NvZnRFbnRpdHlUeXBlQ29uZmlnPz97fSkuZmlsdGVyKCgoW2UsdF0pPT50KSkubWFwKCgoW2VdKT0+WFtlXSkpLmZpbHRlcigoZT0+dm9pZCAwIT09ZSkpLmZsYXQoKTpbXTt0aGlzLmNvbmZpZy5jb25uZWN0PWUsT2UodGhpcyxwZSxhd2FpdCgwLHouY29ubmVjdCkodCxhLG4sWy4uLm5ldyBTZXQocildKSxcImZcIil9LHZlLnNldCh0aGlzLCgoKT0+e2lmKCFfZSh0aGlzLHBlLFwiZlwiKSl0aHJvdyBuZXcgRXJyb3IoXCJNaWNyb3NvZnQzNjVXb3JrZmxvd0ludGVncmF0aW9uIG5vdCBjb25uZWN0ZWRcIik7cmV0dXJuIF9lKHRoaXMscGUsXCJmXCIpfSkpLENlLnNldCh0aGlzLChhc3luYyBlPT57aWYoT2UodGhpcyxmZSxlLFwiZlwiKSxlLmRhdGE/Lml0ZW0/LmlkKXtjb25zdCB0PV9lKHRoaXMseWUsXCJmXCIpLmdldChlLmRhdGEuaXRlbS5pZCk7aWYodClyZXR1cm4gdm9pZCBfZSh0aGlzLGhlLFwiZlwiKS5yZXNwb25kKFt0XSl9aWYoXCJ1c2VyXCI9PT1lLmRhdGE/LnR5cGUpX2UodGhpcyxGZSxcImZcIikuY2FsbCh0aGlzLGUpfSkpLHhlLnNldCh0aGlzLChhc3luYyBlPT57YXdhaXQgZmluLlBsYXRmb3JtLmdldEN1cnJlbnRTeW5jKCkuY3JlYXRlV2luZG93KHtsYXlvdXQ6e2NvbnRlbnQ6W3t0eXBlOlwic3RhY2tcIixjb250ZW50Olt7dHlwZTpcImNvbXBvbmVudFwiLGNvbXBvbmVudE5hbWU6XCJ2aWV3XCIsY29tcG9uZW50U3RhdGU6e3VybDplfX1dfV19LHdvcmtzcGFjZVBsYXRmb3JtOnZvaWQgMH0pfSkpLEFlLnNldCh0aGlzLChhc3luYyBlPT57aWYoZS5kYXRhLml0ZW0uY2hhbm5lbElkZW50aXR5LnRlYW1JZCl7Y29uc3QgdD1uZXcgVVJMKGBtc3RlYW1zOi9sL2NoYW5uZWwvJHtlLmRhdGEuaXRlbS5jaGFubmVsSWRlbnRpdHkuY2hhbm5lbElkfS8ke2UuZGF0YS5pdGVtLmlkfWApO3JldHVybiExPT09dGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/LnVzZVRlYW1zRGVlcExpbmsmJih0LnByb3RvY29sPVwiaHR0cHM6XCIpLHQuc2VhcmNoUGFyYW1zLmFwcGVuZChcImNvbnRleHRcIixKU09OLnN0cmluZ2lmeSh7Y29udGV4dFR5cGU6XCJjaGFubmVsXCJ9KSksdm9pZCBhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcih0LnRvU3RyaW5nKCkpfWNvbnN0IHQ9bmV3IFVSTChgbXN0ZWFtczovbC9tZXNzYWdlLyR7ZS5kYXRhLml0ZW0uY2hhdElkfS8ke2UuZGF0YS5pdGVtLmlkfWApOyExPT09dGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/LnVzZVRlYW1zRGVlcExpbmsmJih0LnByb3RvY29sPVwiaHR0cHM6XCIpLHQuc2VhcmNoUGFyYW1zLmFwcGVuZChcImNvbnRleHRcIixKU09OLnN0cmluZ2lmeSh7Y29udGV4dFR5cGU6XCJjaGF0XCJ9KSksYXdhaXQgZmluLlN5c3RlbS5vcGVuVXJsV2l0aEJyb3dzZXIodC50b1N0cmluZygpKX0pKSxNZS5zZXQodGhpcywoYXN5bmMgZT0+e3N3aXRjaChlLmFjdGlvbi5uYW1lKXtjYXNlIEo6e2NvbnN0IHQ9bmV3IHouVGVhbXNDb25uZWN0aW9uKF9lKHRoaXMsdmUsXCJmXCIpLmNhbGwodGhpcyksdGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/LnVzZVRlYW1zRGVlcExpbmspO19lKHRoaXMsdWUsXCJtXCIsa2UpLmNhbGwodGhpcywoKCk9PnQuc3RhcnRDYWxsKFtlLmRhdGEuaXRlbS5tYWlsXSkpKTticmVha31jYXNlIHRlOntjb25zdCB0PWF3YWl0IHRoaXMuZXhlY3V0ZUFwaVJlcXVlc3QoXCIvdjEuMC9tZS9tZXNzYWdlc1wiLFwiUE9TVFwiLHt0b1JlY2lwaWVudHM6W3tlbWFpbEFkZHJlc3M6e2FkZHJlc3M6ZS5kYXRhLml0ZW0ubWFpbH19XX0pO2xldCBhPXQuZGF0YS53ZWJMaW5rO2NvbnN0IG49bmV3IFVSTCh0LmRhdGEud2ViTGluayk7aWYoXCIvb3dhL1wiPT09bi5wYXRobmFtZSl7Y29uc3QgZT1uLnNlYXJjaC5zbGljZSgxKS5zcGxpdChcIiZcIikucmVkdWNlKCgoZSx0KT0+e2NvbnN0W2Esbl09dC5zcGxpdChcIj1cIik7cmV0dXJuIGVbYV09bixlfSkse30pO2lmKGUuSXRlbUlEKXtjb25zdCB0PWUuSXRlbUlEO2E9YCR7bi5vcmlnaW59L21haWwvZGVlcGxpbmsvY29tcG9zZS8ke3R9P0l0ZW1JRD0ke3R9JmV4dnN1cmw9MWB9fWF3YWl0IGZpbi5QbGF0Zm9ybS5nZXRDdXJyZW50U3luYygpLmNyZWF0ZVZpZXcoe3VybDphfSk7YnJlYWt9Y2FzZSBlZTp7Y29uc3QgdD1fZSh0aGlzLHZlLFwiZlwiKS5jYWxsKHRoaXMpLGE9bmV3IHouVGVhbXNDb25uZWN0aW9uKHQsdGhpcy5jb25maWcud29ya2Zsb3dzPy5zZWFyY2g/LnVzZVRlYW1zRGVlcExpbmspO19lKHRoaXMsdWUsXCJtXCIsa2UpLmNhbGwodGhpcywoKCk9PmEuc3RhcnRDaGF0KHtlbWFpbEFkZHJlc3NlczpbdC5jdXJyZW50VXNlci5tYWlsLGUuZGF0YS5pdGVtLm1haWxdfSkpKTticmVha31kZWZhdWx0OmNvbnNvbGUud2FybihcIlVuaGFuZGxlZCB1c2VyIGFjdGlvbiBmb3IgcmVzdWx0OlwiLGUsYFVua25vd24gYWN0aW9uIFwiJHtlLmFjdGlvbi5uYW1lfVwiYCl9fSkpLEllLnNldCh0aGlzLChhc3luYyBlPT57c3dpdGNoKGUuZGF0YS50eXBlKXtjYXNlXCJkcml2ZUl0ZW1cIjpfZSh0aGlzLHhlLFwiZlwiKS5jYWxsKHRoaXMsZS5kYXRhLml0ZW0ud2ViVXJsKTticmVhaztjYXNlXCJldmVudFwiOntjb25zdCB0PWUuZGF0YS5pdGVtLGE9YXdhaXQgdGhpcy5leGVjdXRlQXBpUmVxdWVzdChgL3YxLjAvbWUvZXZlbnRzLyR7dC5pZH1gKTtfZSh0aGlzLHhlLFwiZlwiKS5jYWxsKHRoaXMsYS5kYXRhLndlYkxpbmspO2JyZWFrfWNhc2VcImNoYXRNZXNzYWdlXCI6X2UodGhpcyxBZSxcImZcIikuY2FsbCh0aGlzLGUpO2JyZWFrO2Nhc2VcIm1lc3NhZ2VcIjpfZSh0aGlzLHhlLFwiZlwiKS5jYWxsKHRoaXMsZS5kYXRhLml0ZW0ud2ViTGluayk7YnJlYWs7Y2FzZVwibGlzdFwiOntjb25zdCB0PWUuZGF0YS5pdGVtLGE9YXdhaXQgdGhpcy5leGVjdXRlQXBpUmVxdWVzdChgL3YxLjAvc2l0ZXMvJHt0LnBhcmVudFJlZmVyZW5jZT8uc2l0ZUlkfS9saXN0cy8ke3QuaWR9YCk7X2UodGhpcyx4ZSxcImZcIikuY2FsbCh0aGlzLGEuZGF0YS53ZWJVcmwpO2JyZWFrfWNhc2VcInVzZXJcIjpfZSh0aGlzLE1lLFwiZlwiKS5jYWxsKHRoaXMsZSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oXCJVbmhhbmRsZWQgdXNlciBhY3Rpb24gZm9yIHJlc3VsdDpcIixlLGBVbmtub3duIHJlc3VsdCB0eXBlIFwiJHtlLmRhdGEudHlwZX1cImApfX0pKSxGZS5zZXQodGhpcywoYXN5bmMgZT0+e2xldCB0LGE7Y29uc3Qgbj1bXSxyPWUuZGF0YS5pdGVtO19lKHRoaXMsd2UsXCJmXCIpLmhhcyhyLmlkKT90PV9lKHRoaXMsd2UsXCJmXCIpLmdldChyLmlkKTpuLnB1c2goe2lkOlwiY29udGFjdFBob3RvXCIsbWV0aG9kOlwiR0VUXCIsdXJsOmAvdXNlcnMvJHtlLmRhdGEuaXRlbS5pZH0vcGhvdG8vJHZhbHVlYCxoZWFkZXJzOntDb25zaXN0ZW5jeUxldmVsOlwiZXZlbnR1YWxcIn19KSxuLnB1c2goe2lkOlwicHJlc2VuY2VcIixtZXRob2Q6XCJHRVRcIix1cmw6YC91c2Vycy8ke2UuZGF0YS5pdGVtLmlkfS9wcmVzZW5jZWB9KTt0cnl7Y29uc3QgZT1hd2FpdCBfZSh0aGlzLHVlLFwibVwiLGJlKS5jYWxsKHRoaXMsbiksaT1lLmRhdGE/LnJlc3BvbnNlcy5maW5kKChlPT5cImNvbnRhY3RQaG90b1wiPT09ZS5pZCkpO2kmJjIwMCE9PWkuc3RhdHVzJiZjb25zb2xlLndhcm4oXCJFcnJvciBmZXRjaGluZyB1c2VyIHBob3RvXCIsaSksaT8uYm9keSYmMjAwPT09aT8uc3RhdHVzJiYodD1gZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2kuYm9keX1gLF9lKHRoaXMsd2UsXCJmXCIpLnB1dChyLmlkLHQpKTtjb25zdCBzPWUuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKGU9PlwicHJlc2VuY2VcIj09PWUuaWQpKTsyMDAhPT1zLnN0YXR1cyYmY29uc29sZS53YXJuKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBwcmVzZW5jZVwiLHMpLHM/LmJvZHkmJjIwMD09PXMuc3RhdHVzJiYobz1zLmJvZHksYT17YXZhaWxhYmxlOlwiYXZhaWxhYmxlXCIsYXZhaWxhYmxlaWRsZTpcImF2YWlsYWJsZVwiLGF3YXk6XCJhd2F5XCIsYmVyaWdodGJhY2s6XCJhd2F5XCIsYnVzeTpcImJ1c3lcIixidXN5aWRsZTpcImJ1c3lcIixkb25vdGRpc3R1cmI6XCJkby1ub3QtZGlzdHVyYlwiLG9mZmxpbmU6XCJvZmZsaW5lXCIscHJlc2VuY2V1bmtub3duOlwib2ZmbGluZVwifVtvLmF2YWlsYWJpbGl0eT8udG9Mb3dlckNhc2UoKV0pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1c2VyIGRhdGFcIixlKX12YXIgbztjb25zdCBpPVtbXCJEZXBhcnRtZW50XCIsci5kZXBhcnRtZW50fHxcIk4vQVwiXSxbXCJFbWFpbFwiLHIubWFpbHx8XCJOL0FcIl0sW1wiV29yayBQaG9uZVwiLHIuYnVzaW5lc3NQaG9uZXM/LlswXXx8XCJOL0FcIl0sW1wiTW9iaWxlXCIsci5tb2JpbGVQaG9uZXx8XCJOL0FcIl0sW1wiTG9jYXRpb25cIixyLm9mZmljZUxvY2F0aW9ufHxcIk4vQVwiXV0scz17Li4uZSx0ZW1wbGF0ZTokLmZDLkNvbnRhY3QsdGVtcGxhdGVDb250ZW50OntuYW1lOmUuZGF0YS5pdGVtLmRpc3BsYXlOYW1lLHRpdGxlOmUuZGF0YS5pdGVtLmpvYlRpdGxlLGRldGFpbHM6W2ldLHBob3RvVXJsOnQsb25saW5lU3RhdHVzOmEsYnV0dG9uczpbe3R5cGU6XCJidXR0b25cIixpY29uOntsaWdodDooMCxELk9YKShPLnNQLkNhbGxJY29uTGlnaHQpLGRhcms6KDAsRC5PWCkoTy5zUC5DYWxsSWNvbkRhcmspfSx0b29sdGlwOlwiVGVhbXMgQ2FsbFwiLGFjdGlvbjpKfSx7dHlwZTpcImJ1dHRvblwiLGljb246e2xpZ2h0OigwLEQuT1gpKE8uc1AuQ2hhdEljb25MaWdodCksZGFyazooMCxELk9YKShPLnNQLkNoYXRJY29uRGFyayl9LHRvb2x0aXA6XCJDaGF0XCIsYWN0aW9uOmVlfSx7dHlwZTpcImJ1dHRvblwiLGljb246e2xpZ2h0OigwLEQuT1gpKE8uc1AuTWVzc2FnZUljb25MaWdodCksZGFyazooMCxELk9YKShPLnNQLk1lc3NhZ2VJY29uRGFyayl9LHRvb2x0aXA6XCJFLW1haWxcIixhY3Rpb246dGV9XX19O19lKHRoaXMseWUsXCJmXCIpLnB1dChlLmRhdGEuaXRlbS5pZCxzKSxfZSh0aGlzLGhlLFwiZlwiKS5yZXNwb25kKFtzXSl9KSksV2Uuc2V0KHRoaXMsKGFzeW5jKGUsdCk9PntpZihfZSh0aGlzLGhlLFwiZlwiKSYmX2UodGhpcyxoZSxcImZcIikuY2xvc2UoKSxPZSh0aGlzLGhlLHQsXCJmXCIpLF9lKHRoaXMsaGUsXCJmXCIpLm9wZW4oKSxlLnF1ZXJ5Lmxlbmd0aDxfZSh0aGlzLGdlLFwiZlwiKSlyZXR1cm57cmVzdWx0czpbXX07Y29uc3QgYT1lbmNvZGVVUklDb21wb25lbnQoZS5xdWVyeSksbj1bXSxyPSgoZSx0KT0+e2NvbnN0IGE9QXJyYXkuaXNBcnJheShlLmNvbnRleHQuc2VsZWN0ZWRGaWx0ZXJzPy5maW5kKChlPT5lLmlkPT09SykpPy5vcHRpb25zKT9lLmNvbnRleHQuc2VsZWN0ZWRGaWx0ZXJzLmZpbmQoKGU9PmUuaWQ9PT1LKSk/Lm9wdGlvbnM6W10sbj1hLmV2ZXJ5KCgoe2lzU2VsZWN0ZWQ6ZX0pPT4hZSkpO3JldHVybntzaG93RG9jdW1lbnRzOnQuaGFzKFwiRG9jdW1lbnRcIikmJihufHwhIWEuZmluZCgoKHt2YWx1ZTplfSk9PlwiRG9jdW1lbnRcIj09PWUpKT8uaXNTZWxlY3RlZCksc2hvd0NvbnRhY3RzOnQuaGFzKFwiQ29udGFjdFwiKSYmKG58fCEhYS5maW5kKCgoe3ZhbHVlOmV9KT0+XCJDb250YWN0XCI9PT1lKSk/LmlzU2VsZWN0ZWQpLHNob3dDaGF0TWVzc2FnZXM6dC5oYXMoXCJDaGF0IE1lc3NhZ2VcIikmJihufHwhIWEuZmluZCgoKHt2YWx1ZTplfSk9PlwiQ2hhdCBNZXNzYWdlXCI9PT1lKSk/LmlzU2VsZWN0ZWQpLHNob3dNZXNzYWdlczp0LmhhcyhcIkVtYWlsXCIpJiYobnx8ISFhLmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkVtYWlsXCI9PT1lKSk/LmlzU2VsZWN0ZWQpLHNob3dFdmVudHM6dC5oYXMoXCJFdmVudFwiKSYmKG58fCEhYS5maW5kKCgoe3ZhbHVlOmV9KT0+XCJFdmVudFwiPT09ZSkpPy5pc1NlbGVjdGVkKSxzaG93TGlzdHM6dC5oYXMoXCJMaXN0XCIpJiYobnx8ISFhLmZpbmQoKCh7dmFsdWU6ZX0pPT5cIkxpc3RcIj09PWUpKT8uaXNTZWxlY3RlZCl9fSkoZSxfZSh0aGlzLG1lLFwiZlwiKSk7aWYoci5zaG93RG9jdW1lbnRzKXtjb25zdCBlPWAnJHthfSdgO24ucHVzaCh7aWQ6XCJkcml2ZUl0ZW1cIixtZXRob2Q6XCJHRVRcIix1cmw6YC9tZS9kcml2ZS9yb290L3NlYXJjaChxPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGUpfSlgLGhlYWRlcnM6e0NvbnNpc3RlbmN5TGV2ZWw6XCJldmVudHVhbFwifX0pfWlmKHIuc2hvd0V2ZW50cyYmbi5wdXNoKHtpZDpcImV2ZW50XCIsdXJsOlwiL3NlYXJjaC9xdWVyeVwiLG1ldGhvZDpcIlBPU1RcIixib2R5OntyZXF1ZXN0czpbe2VudGl0eVR5cGVzOltcImV2ZW50XCJdLHF1ZXJ5OntxdWVyeVN0cmluZzplLnF1ZXJ5fSxmcm9tOjAsc2l6ZToxMH1dfSxoZWFkZXJzOntcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifX0pLHIuc2hvd0NvbnRhY3RzKXtjb25zdCB0PWBcIiR7ZS5xdWVyeX1cImA7bi5wdXNoKHtpZDpcImNvbnRhY3RcIixtZXRob2Q6XCJHRVRcIix1cmw6YC9tZS9jb250YWN0cz8kc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQpfSYkdG9wPTEwYH0pO2NvbnN0IGE9W1wiZGlzcGxheU5hbWVcIixcImdpdmVuTmFtZVwiLFwic3VybmFtZVwiXS5tYXAoKHQ9PmBcIiR7dH06JHtlLnF1ZXJ5fVwiYCkpLmpvaW4oXCIgT1IgXCIpO24ucHVzaCh7aWQ6XCJ1c2VyXCIsbWV0aG9kOlwiR0VUXCIsdXJsOmAvdXNlcnM/JHNlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChhKX0mJHRvcD0xMCYkc2VsZWN0PWlkLGRpc3BsYXlOYW1lLGRlcGFydG1lbnQsbWFpbCxidXNpbmVzc1Bob25lcyxtb2JpbGVQaG9uZSxvZmZpY2VMb2NhdGlvbixqb2JUaXRsZWAsaGVhZGVyczp7Q29uc2lzdGVuY3lMZXZlbDpcImV2ZW50dWFsXCJ9fSl9aWYoci5zaG93TWVzc2FnZXMmJm4ucHVzaCh7aWQ6XCJtZXNzYWdlXCIsbWV0aG9kOlwiR0VUXCIsdXJsOmAvbWUvbWVzc2FnZXM/JHNlbGVjdD1zZW5kZXIsc3ViamVjdCxib2R5UHJldmlldyxyZWNlaXZlZERhdGVUaW1lLHdlYkxpbmsmJHNlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChgXCIke2UucXVlcnl9XCJgKX0mJHRvcD0xMGB9KSxyLnNob3dDaGF0TWVzc2FnZXMmJm4ucHVzaCh7aWQ6XCJjaGF0TWVzc2FnZVwiLHVybDpcIi9zZWFyY2gvcXVlcnlcIixtZXRob2Q6XCJQT1NUXCIsYm9keTp7cmVxdWVzdHM6W3tlbnRpdHlUeXBlczpbXCJjaGF0TWVzc2FnZVwiXSxxdWVyeTp7cXVlcnlTdHJpbmc6ZS5xdWVyeX0sZnJvbTowLHNpemU6MTB9XX0saGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSxyLnNob3dMaXN0cyYmbi5wdXNoKHtpZDpcImxpc3RcIix1cmw6XCIvc2VhcmNoL3F1ZXJ5XCIsbWV0aG9kOlwiUE9TVFwiLGJvZHk6e3JlcXVlc3RzOlt7ZW50aXR5VHlwZXM6W1wibGlzdFwiXSxxdWVyeTp7cXVlcnlTdHJpbmc6ZS5xdWVyeX0sZnJvbTowLHNpemU6MTB9XX0saGVhZGVyczp7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSwwPT09bi5sZW5ndGgpcmV0dXJue3Jlc3VsdHM6W119O2NvbnN0e3Jlc3VsdHM6byxmaWx0ZXJzOml9PWF3YWl0IF9lKHRoaXMsdWUsXCJtXCIsU2UpLmNhbGwodGhpcyxuLGUpO3JldHVybiBvLmZpbmQoKGU9PmUua2V5PT09X2UodGhpcyxmZSxcImZcIik/LmtleSkpPy50ZW1wbGF0ZT09PSQuZkMuTG9hZGluZyYmX2UodGhpcyxDZSxcImZcIikuY2FsbCh0aGlzLF9lKHRoaXMsZmUsXCJmXCIpKSx7cmVzdWx0czpvLGNvbnRleHQ6e2ZpbHRlcnM6aX19fSkpLFRlLnNldCh0aGlzLChhc3luYyBlPT57c3dpdGNoKGUuYWN0aW9uLnRyaWdnZXIpe2Nhc2UgUmUuUC5Gb2N1c0NoYW5nZTpfZSh0aGlzLENlLFwiZlwiKS5jYWxsKHRoaXMsZSk7YnJlYWs7Y2FzZSBSZS5QLlVzZXJBY3Rpb246X2UodGhpcyxJZSxcImZcIikuY2FsbCh0aGlzLGUpO2JyZWFrO2Nhc2UgUmUuUC5SZWxvYWQ6YnJlYWs7ZGVmYXVsdDpjb25zb2xlLndhcm4oYFVua25vd24gYWN0aW9uIHRyaWdnZXI6ICR7ZS5hY3Rpb24udHJpZ2dlcn1gKX19KSksdGhpcy5pbml0aWFsaXplV29ya2Zsb3c9YXN5bmMgZT0+e2lmKFwic2VhcmNoXCIhPT1lKXRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGluaXRpYWxpemUgdW5rbm93biB3b3JrZmxvdzogJHtlfWApO2F3YWl0IFMucmVnaXN0ZXIoey4uLnRoaXMuY29uZmlnLndvcmtmbG93cy5zZWFyY2guaG9tZVByb3ZpZGVyLG9uVXNlcklucHV0Ol9lKHRoaXMsV2UsXCJmXCIpLG9uUmVzdWx0RGlzcGF0Y2g6X2UodGhpcyxUZSxcImZcIil9KSwoMCx6LmVuYWJsZUxvZ2dpbmcpKCksYXdhaXQgdGhpcy5jb25uZWN0KCksc3VwZXIuaW5pdGlhbGl6ZVdvcmtmbG93KGUpfSxPYmplY3QuZW50cmllcyh0LndvcmtmbG93cz8uc2VhcmNoPy5taWNyb3NvZnRFbnRpdHlUeXBlQ29uZmlnfHx7fSkuZmlsdGVyKCgoW2UsdF0pPT50KSkuZm9yRWFjaCgoKFtlXSk9PntfZSh0aGlzLG1lLFwiZlwiKS5hZGQocVtlXSl9KSl9YXN5bmMgZXhlY3V0ZUFwaVJlcXVlc3QoLi4uZSl7cmV0dXJuIF9lKHRoaXMsdWUsXCJtXCIsa2UpLmNhbGwodGhpcywoKCk9Pl9lKHRoaXMsdmUsXCJmXCIpLmNhbGwodGhpcykuZXhlY3V0ZUFwaVJlcXVlc3QoLi4uZSkpKX19cGU9bmV3IFdlYWtNYXAsaGU9bmV3IFdlYWtNYXAsZmU9bmV3IFdlYWtNYXAsZ2U9bmV3IFdlYWtNYXAsbWU9bmV3IFdlYWtNYXAsd2U9bmV3IFdlYWtNYXAseWU9bmV3IFdlYWtNYXAsdmU9bmV3IFdlYWtNYXAsQ2U9bmV3IFdlYWtNYXAseGU9bmV3IFdlYWtNYXAsQWU9bmV3IFdlYWtNYXAsTWU9bmV3IFdlYWtNYXAsSWU9bmV3IFdlYWtNYXAsRmU9bmV3IFdlYWtNYXAsV2U9bmV3IFdlYWtNYXAsVGU9bmV3IFdlYWtNYXAsdWU9bmV3IFdlYWtTZXQsa2U9YXN5bmMgZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBhd2FpdCBlKCl9Y2F0Y2godCl7aWYodCBpbnN0YW5jZW9mIHouQXV0aFRva2VuRXhwaXJlZEVycm9yKXJldHVybiBhd2FpdCB0aGlzLmNvbm5lY3QoKSxlKCk7dGhyb3cgdH19LGJlPWFzeW5jIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmV4ZWN1dGVBcGlSZXF1ZXN0KFwiL3YxLjAvJGJhdGNoXCIsXCJQT1NUXCIse3JlcXVlc3RzOmV9KX0sU2U9YXN5bmMgZnVuY3Rpb24oZSx0KXt0cnl7Y29uc3QgYT1hd2FpdCBfZSh0aGlzLHVlLFwibVwiLGJlKS5jYWxsKHRoaXMsZSk7cmV0dXJue2ZpbHRlcnM6Wy4uLmFlKHQsX2UodGhpcyxtZSxcImZcIikpLC4uLm5lKGEuZGF0YS5yZXNwb25zZXMuZmluZCgoZT0+XCJ1c2VyXCI9PT1lLmlkKSk/LmJvZHk/LnZhbHVlfHxbXSx0KV0scmVzdWx0czpfZSh0aGlzLHVlLFwibVwiLFBlKS5jYWxsKHRoaXMsYSx0KX19Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBleGVjdXRlIEJhdGNoIEFQSSByZXF1ZXN0OiBcIixlKSx7ZmlsdGVyczpbXSxyZXN1bHRzOlt7a2V5OigwLEwuTikoKSx0aXRsZTpcIkVycm9yIEZldGNoaW5nIFNlYXJjaCBSZXN1bHRzXCIsZGVzY3JpcHRpb246XCJcIixhY3Rpb25zOltdLHRlbXBsYXRlOiQuZkMuRXJyb3IsdGVtcGxhdGVDb250ZW50OmBGYWlsZWQgdG8gZXhlY3V0ZSBCYXRjaCBBUEkgcmVxdWVzdDogJHtKU09OLnN0cmluZ2lmeShlKX1gfV19fX0sUGU9ZnVuY3Rpb24oZSx0KXtsZXQgYT1bXTtmb3IoY29uc3QgbiBvZiBlLmRhdGEucmVzcG9uc2VzKWlmKDIwMD09PW4uc3RhdHVzKXN3aXRjaChuLmlkKXtjYXNlXCJkcml2ZUl0ZW1cIjp7Y29uc3QgZT1pZSh0KSxyPWUuZmlsdGVyRmlsZXM/c2Uobi5ib2R5LnZhbHVlLGUpOm4uYm9keS52YWx1ZTthLnB1c2goLi4uKHJ8fFtdKS5tYXAoKGU9Pih7a2V5OmUuaWQ/PygwLEwuTikoKSx0aXRsZTplLm5hbWU/P1wiXCIsZGVzY3JpcHRpb246ZS5maWxlPy5taW1lVHlwZT8/XCJcIixsYWJlbDpjZShlLm5hbWUpLGljb246ZGUoZS5uYW1lKSxkYXRhOnt0eXBlOlwiZHJpdmVJdGVtXCIsaXRlbTplfSxhY3Rpb25zOlt7bmFtZTpcIkxhdW5jaFwifV0sdGVtcGxhdGU6JC5mQy5QbGFpbix0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfSkpKSk7YnJlYWt9Y2FzZVwiZXZlbnRcIjphLnB1c2goLi4ubi5ib2R5Py52YWx1ZT8uWzBdPy5oaXRzQ29udGFpbmVycz8uWzBdPy5oaXRzPy5maWx0ZXIoKGU9PmUucmVzb3VyY2Uuc3ViamVjdCkpLm1hcCgoZT0+e2NvbnN0IHQ9ZS5yZXNvdXJjZSxhPWxlKGUuaGl0SWQpO3JldHVybntrZXk6YSx0aXRsZTp0LnN1YmplY3Q/P1wiXCIsbGFiZWw6XCJDYWxlbmRhciBFdmVudFwiLGljb246KDAsRC5PWCkoTy5zUC5NaWNyb3NvZnQzNjVBc3NldHMuTWljcm9zb2Z0MzY1T3V0bG9va0ljb24pLGFjdGlvbnM6W3tuYW1lOlwiTGF1bmNoXCJ9XSxkYXRhOnt0eXBlOlwiZXZlbnRcIixpdGVtOnsuLi50LGlkOmF9fSx0ZW1wbGF0ZTokLmZDLlBsYWluLHRlbXBsYXRlQ29udGVudDp2b2lkIDB9fSkpfHxbXSk7YnJlYWs7Y2FzZVwiY29udGFjdFwiOntjb25zdCBlPXJlKHQpLHI9b2Uobi5ib2R5LnZhbHVlfHxbXSxlKTthLnB1c2goLi4uKHJ8fFtdKS5tYXAoKGU9Pih7a2V5OmUuaWQ/PygwLEwuTikoKSx0aXRsZTplLmRpc3BsYXlOYW1lPz9cIlwiLGxhYmVsOlwiT3V0bG9vayBjb250YWN0XCIsaWNvbjooMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVPdXRsb29rSWNvbiksYWN0aW9uczpbXSxkYXRhOnt0eXBlOlwiY29udGFjdFwiLGl0ZW06ZX0sdGVtcGxhdGU6JC5mQy5QbGFpbix0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfSkpKSk7YnJlYWt9Y2FzZVwidXNlclwiOntjb25zdCBlPXJlKHQpLHI9b2Uobi5ib2R5LnZhbHVlfHxbXSxlKTthLnB1c2goLi4uKHJ8fFtdKS5tYXAoKGU9Pih7a2V5OmUuaWQ/PygwLEwuTikoKSx0aXRsZTplLmRpc3BsYXlOYW1lPz9cIlwiLGxhYmVsOlwiVGVhbXMgY29udGFjdFwiLGljb246KDAsRC5PWCkoTy5zUC5NaWNyb3NvZnQzNjVBc3NldHMuTWljcm9zb2Z0MzY1VGVhbXNJY29uKSxhY3Rpb25zOltdLGRhdGE6e3R5cGU6XCJ1c2VyXCIsaXRlbTplfSx0ZW1wbGF0ZTokLmZDLkxvYWRpbmcsdGVtcGxhdGVDb250ZW50OnZvaWQgMH0pKSkpO2JyZWFrfWNhc2VcIm1lc3NhZ2VcIjphLnB1c2goLi4uKG4uYm9keS52YWx1ZXx8W10pLm1hcCgoZT0+KHtrZXk6ZS5pZD8/KDAsTC5OKSgpLHRpdGxlOmAke2Uuc3ViamVjdD8/XCJVbnRpdGxlZCBNZXNzYWdlXCJ9JHtlLmlzRHJhZnQ/XCIgKERyYWZ0KVwiOlwiXCJ9YCxsYWJlbDpcIkVtYWlsXCIsaWNvbjooMCxELk9YKShPLnNQLk1pY3Jvc29mdDM2NUFzc2V0cy5NaWNyb3NvZnQzNjVPdXRsb29rSWNvbiksYWN0aW9uczpbXSxkYXRhOnt0eXBlOlwibWVzc2FnZVwiLGl0ZW06ZX0sdGVtcGxhdGU6JC5mQy5QbGFpbix0ZW1wbGF0ZUNvbnRlbnQ6dm9pZCAwfSkpKSk7YnJlYWs7Y2FzZVwiY2hhdE1lc3NhZ2VcIjphLnB1c2goLi4ubi5ib2R5Py52YWx1ZT8uWzBdPy5oaXRzQ29udGFpbmVycz8uWzBdPy5oaXRzPy5tYXAoKGU9Pntjb25zdCB0PWUucmVzb3VyY2U7cmV0dXJue2tleTp0LmlkPz8oMCxMLk4pKCksdGl0bGU6ZS5zdW1tYXJ5Pz9cIlVudGl0bGVkIE1lc3NhZ2VcIixsYWJlbDpcIkNoYXRcIixpY29uOigwLEQuT1gpKE8uc1AuTWljcm9zb2Z0MzY1QXNzZXRzLk1pY3Jvc29mdDM2NVRlYW1zSWNvbiksYWN0aW9uczpbXSxkYXRhOnt0eXBlOlwiY2hhdE1lc3NhZ2VcIixpdGVtOnR9LHRlbXBsYXRlOiQuZkMuUGxhaW4sdGVtcGxhdGVDb250ZW50OnZvaWQgMH19KSl8fFtdKTticmVhaztjYXNlXCJsaXN0XCI6YS5wdXNoKC4uLm4uYm9keT8udmFsdWU/LlswXT8uaGl0c0NvbnRhaW5lcnM/LlswXT8uaGl0cz8ubWFwKChlPT57Y29uc3QgdD1lLnJlc291cmNlLGE9bGUoZS5oaXRJZCk7cmV0dXJue2tleTphLHRpdGxlOnQuZGlzcGxheU5hbWU/P1wiVW50aXRsZWQgTGlzdFwiLGxhYmVsOlwiTGlzdFwiLGFjdGlvbnM6W3tuYW1lOlwiTGF1bmNoXCJ9XSxkYXRhOnt0eXBlOlwibGlzdFwiLGl0ZW06ey4uLnQsaWQ6YX19LHRlbXBsYXRlOiQuZkMuUGxhaW4sdGVtcGxhdGVDb250ZW50OnZvaWQgMH19KSl8fFtdKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihgVW5rbm93biBiYXRjaCByZXNwb25zZSBpZDogJHtuLmlkfWAsbi5ib2R5KX1lbHNlIGNvbnNvbGUud2FybihcIkJhdGNoIEFQSSByZXF1ZXN0IGZhaWxlZDogXCIsbik7cmV0dXJuIGE9YS5tYXAoKGU9PntpZighZS5kYXRhPy5pdGVtPy5pZClyZXR1cm4gZTtjb25zdCB0PV9lKHRoaXMseWUsXCJmXCIpLmdldChlLmRhdGEuaXRlbS5pZCk7cmV0dXJuIHQ/ey4uLmUsdGVtcGxhdGU6dC50ZW1wbGF0ZSx0ZW1wbGF0ZUNvbnRlbnQ6dC50ZW1wbGF0ZUNvbnRlbnR9OmV9KSksYS5zb3J0KCgoZSx0KT0+ZS50aXRsZT50LnRpdGxlPzE6LTEpKX07dmFyIEVlPWEoNTk4KSxSZT1hKDEyOSksQmU9YSgxODQpLE5lPWEoNzEwKX0pKCksbW9kdWxlLmV4cG9ydHM9bn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCIvKlxuICogRGV4aWUuanMgLSBhIG1pbmltYWxpc3RpYyB3cmFwcGVyIGZvciBJbmRleGVkREJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKlxuICogQnkgRGF2aWQgRmFobGFuZGVyLCBkYXZpZC5mYWhsYW5kZXJAZ21haWwuY29tXG4gKlxuICogVmVyc2lvbiA0LjIuMCwgV2VkIEF1ZyAxMyAyMDI1XG4gKlxuICogaHR0cHM6Ly9kZXhpZS5vcmdcbiAqXG4gKiBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCwgSmFudWFyeSAyMDA0LCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvXG4gKi9cbiBcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkRleGllID0gZmFjdG9yeSgpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxuICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG4gICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG4gICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG4gICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH1cbiAgICB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcbiAgICAgICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbiAgICB9XG5cbiAgICB2YXIgX2dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOlxuICAgICAgICB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDpcbiAgICAgICAgICAgICAgICBnbG9iYWw7XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzO1xuICAgIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICFfZ2xvYmFsLlByb21pc2UpIHtcbiAgICAgICAgX2dsb2JhbC5Qcm9taXNlID0gUHJvbWlzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGtleXMoZXh0ZW5zaW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgdmFyIF9oYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICBmdW5jdGlvbiBoYXNPd24ob2JqLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBfaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcHMocHJvdG8sIGV4dGVuc2lvbikge1xuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbihnZXRQcm90byhwcm90bykpO1xuICAgICAgICAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgPyBrZXlzIDogUmVmbGVjdC5vd25LZXlzKShleHRlbnNpb24pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgc2V0UHJvcChwcm90bywga2V5LCBleHRlbnNpb25ba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gICAgZnVuY3Rpb24gc2V0UHJvcChvYmosIHByb3AsIGZ1bmN0aW9uT3JHZXRTZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBleHRlbmQoZnVuY3Rpb25PckdldFNldCAmJiBoYXNPd24oZnVuY3Rpb25PckdldFNldCwgXCJnZXRcIikgJiYgdHlwZW9mIGZ1bmN0aW9uT3JHZXRTZXQuZ2V0ID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIHsgZ2V0OiBmdW5jdGlvbk9yR2V0U2V0LmdldCwgc2V0OiBmdW5jdGlvbk9yR2V0U2V0LnNldCwgY29uZmlndXJhYmxlOiB0cnVlIH0gOlxuICAgICAgICAgICAgeyB2YWx1ZTogZnVuY3Rpb25PckdldFNldCwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LCBvcHRpb25zKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlcml2ZShDaGlsZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogZnVuY3Rpb24gKFBhcmVudCkge1xuICAgICAgICAgICAgICAgIENoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGFyZW50LnByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgc2V0UHJvcChDaGlsZC5wcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgQ2hpbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZDogcHJvcHMuYmluZChudWxsLCBDaGlsZC5wcm90b3R5cGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG4gICAgZnVuY3Rpb24gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkge1xuICAgICAgICB2YXIgcGQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgdmFyIHByb3RvO1xuICAgICAgICByZXR1cm4gcGQgfHwgKHByb3RvID0gZ2V0UHJvdG8ob2JqKSkgJiYgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKTtcbiAgICB9XG4gICAgdmFyIF9zbGljZSA9IFtdLnNsaWNlO1xuICAgIGZ1bmN0aW9uIHNsaWNlKGFyZ3MsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIF9zbGljZS5jYWxsKGFyZ3MsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvdmVycmlkZShvcmlnRnVuYywgb3ZlcnJpZGVkRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gb3ZlcnJpZGVkRmFjdG9yeShvcmlnRnVuYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzc2VydChiKSB7XG4gICAgICAgIGlmICghYilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBGYWlsZWRcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFzYXAkMShmbikge1xuICAgICAgICBpZiAoX2dsb2JhbC5zZXRJbW1lZGlhdGUpXG4gICAgICAgICAgICBzZXRJbW1lZGlhdGUoZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXJyYXlUb09iamVjdChhcnJheSwgZXh0cmFjdG9yKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgaXRlbSwgaSkge1xuICAgICAgICAgICAgdmFyIG5hbWVBbmRWYWx1ZSA9IGV4dHJhY3RvcihpdGVtLCBpKTtcbiAgICAgICAgICAgIGlmIChuYW1lQW5kVmFsdWUpXG4gICAgICAgICAgICAgICAgcmVzdWx0W25hbWVBbmRWYWx1ZVswXV0gPSBuYW1lQW5kVmFsdWVbMV07XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyAmJiBoYXNPd24ob2JqLCBrZXlQYXRoKSlcbiAgICAgICAgICAgIHJldHVybiBvYmpba2V5UGF0aF07XG4gICAgICAgIGlmICgha2V5UGF0aClcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlQYXRoLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoW2ldKTtcbiAgICAgICAgICAgICAgICBydi5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICBpZiAocGVyaW9kICE9PSAtMSkge1xuICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2tleVBhdGguc3Vic3RyKDAsIHBlcmlvZCldO1xuICAgICAgICAgICAgcmV0dXJuIGlubmVyT2JqID09IG51bGwgPyB1bmRlZmluZWQgOiBnZXRCeUtleVBhdGgoaW5uZXJPYmosIGtleVBhdGguc3Vic3RyKHBlcmlvZCArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIW9iaiB8fCBrZXlQYXRoID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICgnaXNGcm96ZW4nIGluIE9iamVjdCAmJiBPYmplY3QuaXNGcm96ZW4ob2JqKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlQYXRoICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiBrZXlQYXRoKSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiB2YWx1ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleVBhdGgubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aFtpXSwgdmFsdWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICAgICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEtleVBhdGggPSBrZXlQYXRoLnN1YnN0cigwLCBwZXJpb2QpO1xuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIocGVyaW9kICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0tleVBhdGggPT09IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShvYmopICYmICFpc05hTihwYXJzZUludChjdXJyZW50S2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zcGxpY2UoY3VycmVudEtleVBhdGgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbY3VycmVudEtleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtjdXJyZW50S2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2N1cnJlbnRLZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbm5lck9iaiB8fCAhaGFzT3duKG9iaiwgY3VycmVudEtleVBhdGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJPYmogPSAob2JqW2N1cnJlbnRLZXlQYXRoXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGlubmVyT2JqLCByZW1haW5pbmdLZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkob2JqKSAmJiAhaXNOYU4ocGFyc2VJbnQoa2V5UGF0aCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNwbGljZShrZXlQYXRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmpba2V5UGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBkZWxCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB1bmRlZmluZWQpO1xuICAgICAgICBlbHNlIGlmICgnbGVuZ3RoJyBpbiBrZXlQYXRoKVxuICAgICAgICAgICAgW10ubWFwLmNhbGwoa2V5UGF0aCwgZnVuY3Rpb24gKGtwKSB7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga3AsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG9iaikge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24ob2JqLCBtKSlcbiAgICAgICAgICAgICAgICBydlttXSA9IG9ialttXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciBjb25jYXQgPSBbXS5jb25jYXQ7XG4gICAgZnVuY3Rpb24gZmxhdHRlbihhKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQuYXBwbHkoW10sIGEpO1xuICAgIH1cbiAgICB2YXIgaW50cmluc2ljVHlwZU5hbWVzID0gXCJCaWdVaW50NjRBcnJheSxCaWdJbnQ2NEFycmF5LEFycmF5LEJvb2xlYW4sU3RyaW5nLERhdGUsUmVnRXhwLEJsb2IsRmlsZSxGaWxlTGlzdCxGaWxlU3lzdGVtRmlsZUhhbmRsZSxGaWxlU3lzdGVtRGlyZWN0b3J5SGFuZGxlLEFycmF5QnVmZmVyLERhdGFWaWV3LFVpbnQ4Q2xhbXBlZEFycmF5LEltYWdlQml0bWFwLEltYWdlRGF0YSxNYXAsU2V0LENyeXB0b0tleVwiXG4gICAgICAgIC5zcGxpdCgnLCcpLmNvbmNhdChmbGF0dGVuKFs4LCAxNiwgMzIsIDY0XS5tYXAoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gW1wiSW50XCIsIFwiVWludFwiLCBcIkZsb2F0XCJdLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdCArIG51bSArIFwiQXJyYXlcIjsgfSk7IH0pKSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiBfZ2xvYmFsW3RdOyB9KTtcbiAgICB2YXIgaW50cmluc2ljVHlwZXMgPSBuZXcgU2V0KGludHJpbnNpY1R5cGVOYW1lcy5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIF9nbG9iYWxbdF07IH0pKTtcbiAgICBmdW5jdGlvbiBjbG9uZVNpbXBsZU9iamVjdFRyZWUobykge1xuICAgICAgICB2YXIgcnYgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKVxuICAgICAgICAgICAgaWYgKGhhc093bihvLCBrKSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gb1trXTtcbiAgICAgICAgICAgICAgICBydltrXSA9ICF2IHx8IHR5cGVvZiB2ICE9PSAnb2JqZWN0JyB8fCBpbnRyaW5zaWNUeXBlcy5oYXModi5jb25zdHJ1Y3RvcikgPyB2IDogY2xvbmVTaW1wbGVPYmplY3RUcmVlKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9iamVjdElzRW1wdHkobykge1xuICAgICAgICBmb3IgKHZhciBrIGluIG8pXG4gICAgICAgICAgICBpZiAoaGFzT3duKG8sIGspKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBjaXJjdWxhclJlZnMgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGRlZXBDbG9uZShhbnkpIHtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdmFyIHJ2ID0gaW5uZXJEZWVwQ2xvbmUoYW55KTtcbiAgICAgICAgY2lyY3VsYXJSZWZzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbm5lckRlZXBDbG9uZSh4KSB7XG4gICAgICAgIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgdmFyIHJ2ID0gY2lyY3VsYXJSZWZzLmdldCh4KTtcbiAgICAgICAgaWYgKHJ2KVxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICBpZiAoaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgcnYgPSBbXTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB4Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgIHJ2LnB1c2goaW5uZXJEZWVwQ2xvbmUoeFtpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGludHJpbnNpY1R5cGVzLmhhcyh4LmNvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgcnYgPSB4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb3RvID0gZ2V0UHJvdG8oeCk7XG4gICAgICAgICAgICBydiA9IHByb3RvID09PSBPYmplY3QucHJvdG90eXBlID8ge30gOiBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgICAgICAgIGNpcmN1bGFyUmVmcy5zZXQoeCwgcnYpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093bih4LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBydltwcm9wXSA9IGlubmVyRGVlcENsb25lKHhbcHJvcF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuICAgIGZ1bmN0aW9uIHRvU3RyaW5nVGFnKG8pIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICAgIH1cbiAgICB2YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/XG4gICAgICAgIFN5bWJvbC5pdGVyYXRvciA6XG4gICAgICAgICdAQGl0ZXJhdG9yJztcbiAgICB2YXIgZ2V0SXRlcmF0b3JPZiA9IHR5cGVvZiBpdGVyYXRvclN5bWJvbCA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIChpID0geFtpdGVyYXRvclN5bWJvbF0pICYmIGkuYXBwbHkoeCk7XG4gICAgfSA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XG4gICAgZnVuY3Rpb24gZGVsQXJyYXlJdGVtKGEsIHgpIHtcbiAgICAgICAgdmFyIGkgPSBhLmluZGV4T2YoeCk7XG4gICAgICAgIGlmIChpID49IDApXG4gICAgICAgICAgICBhLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIGkgPj0gMDtcbiAgICB9XG4gICAgdmFyIE5PX0NIQVJfQVJSQVkgPSB7fTtcbiAgICBmdW5jdGlvbiBnZXRBcnJheU9mKGFycmF5TGlrZSkge1xuICAgICAgICB2YXIgaSwgYSwgeCwgaXQ7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShhcnJheUxpa2UpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUxpa2Uuc2xpY2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzID09PSBOT19DSEFSX0FSUkFZICYmIHR5cGVvZiBhcnJheUxpa2UgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBbYXJyYXlMaWtlXTtcbiAgICAgICAgICAgIGlmICgoaXQgPSBnZXRJdGVyYXRvck9mKGFycmF5TGlrZSkpKSB7XG4gICAgICAgICAgICAgICAgYSA9IFtdO1xuICAgICAgICAgICAgICAgIHdoaWxlICgoeCA9IGl0Lm5leHQoKSksICF4LmRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCh4LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgICAgICBpID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFbaV0gPSBhcnJheUxpa2VbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgIH1cbiAgICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGEgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICBhW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgdmFyIGlzQXN5bmNGdW5jdGlvbiA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbltTeW1ib2wudG9TdHJpbmdUYWddID09PSAnQXN5bmNGdW5jdGlvbic7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTtcblxuICAgIHZhciBkZXhpZUVycm9yTmFtZXMgPSBbXG4gICAgICAgICdNb2RpZnknLFxuICAgICAgICAnQnVsaycsXG4gICAgICAgICdPcGVuRmFpbGVkJyxcbiAgICAgICAgJ1ZlcnNpb25DaGFuZ2UnLFxuICAgICAgICAnU2NoZW1hJyxcbiAgICAgICAgJ1VwZ3JhZGUnLFxuICAgICAgICAnSW52YWxpZFRhYmxlJyxcbiAgICAgICAgJ01pc3NpbmdBUEknLFxuICAgICAgICAnTm9TdWNoRGF0YWJhc2UnLFxuICAgICAgICAnSW52YWxpZEFyZ3VtZW50JyxcbiAgICAgICAgJ1N1YlRyYW5zYWN0aW9uJyxcbiAgICAgICAgJ1Vuc3VwcG9ydGVkJyxcbiAgICAgICAgJ0ludGVybmFsJyxcbiAgICAgICAgJ0RhdGFiYXNlQ2xvc2VkJyxcbiAgICAgICAgJ1ByZW1hdHVyZUNvbW1pdCcsXG4gICAgICAgICdGb3JlaWduQXdhaXQnXG4gICAgXTtcbiAgICB2YXIgaWRiRG9tRXJyb3JOYW1lcyA9IFtcbiAgICAgICAgJ1Vua25vd24nLFxuICAgICAgICAnQ29uc3RyYWludCcsXG4gICAgICAgICdEYXRhJyxcbiAgICAgICAgJ1RyYW5zYWN0aW9uSW5hY3RpdmUnLFxuICAgICAgICAnUmVhZE9ubHknLFxuICAgICAgICAnVmVyc2lvbicsXG4gICAgICAgICdOb3RGb3VuZCcsXG4gICAgICAgICdJbnZhbGlkU3RhdGUnLFxuICAgICAgICAnSW52YWxpZEFjY2VzcycsXG4gICAgICAgICdBYm9ydCcsXG4gICAgICAgICdUaW1lb3V0JyxcbiAgICAgICAgJ1F1b3RhRXhjZWVkZWQnLFxuICAgICAgICAnU3ludGF4JyxcbiAgICAgICAgJ0RhdGFDbG9uZSdcbiAgICBdO1xuICAgIHZhciBlcnJvckxpc3QgPSBkZXhpZUVycm9yTmFtZXMuY29uY2F0KGlkYkRvbUVycm9yTmFtZXMpO1xuICAgIHZhciBkZWZhdWx0VGV4dHMgPSB7XG4gICAgICAgIFZlcnNpb25DaGFuZ2VkOiBcIkRhdGFiYXNlIHZlcnNpb24gY2hhbmdlZCBieSBvdGhlciBkYXRhYmFzZSBjb25uZWN0aW9uXCIsXG4gICAgICAgIERhdGFiYXNlQ2xvc2VkOiBcIkRhdGFiYXNlIGhhcyBiZWVuIGNsb3NlZFwiLFxuICAgICAgICBBYm9ydDogXCJUcmFuc2FjdGlvbiBhYm9ydGVkXCIsXG4gICAgICAgIFRyYW5zYWN0aW9uSW5hY3RpdmU6IFwiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgY29tcGxldGVkIG9yIGZhaWxlZFwiLFxuICAgICAgICBNaXNzaW5nQVBJOiBcIkluZGV4ZWREQiBBUEkgbWlzc2luZy4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vdGlueXVybC5jb20veTJ1dXZza2JcIlxuICAgIH07XG4gICAgZnVuY3Rpb24gRGV4aWVFcnJvcihuYW1lLCBtc2cpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnO1xuICAgIH1cbiAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShFcnJvcikuZXh0ZW5kKHtcbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTsgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgcmV0dXJuIG1zZyArIFwiLiBFcnJvcnM6IFwiICsgT2JqZWN0LmtleXMoZmFpbHVyZXMpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGZhaWx1cmVzW2tleV0udG9TdHJpbmcoKTsgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHYsIGksIHMpIHsgcmV0dXJuIHMuaW5kZXhPZih2KSA9PT0gaTsgfSlcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gTW9kaWZ5RXJyb3IobXNnLCBmYWlsdXJlcywgc3VjY2Vzc0NvdW50LCBmYWlsZWRLZXlzKSB7XG4gICAgICAgIHRoaXMuZmFpbHVyZXMgPSBmYWlsdXJlcztcbiAgICAgICAgdGhpcy5mYWlsZWRLZXlzID0gZmFpbGVkS2V5cztcbiAgICAgICAgdGhpcy5zdWNjZXNzQ291bnQgPSBzdWNjZXNzQ291bnQ7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGdldE11bHRpRXJyb3JNZXNzYWdlKG1zZywgZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoTW9kaWZ5RXJyb3IpLmZyb20oRGV4aWVFcnJvcik7XG4gICAgZnVuY3Rpb24gQnVsa0Vycm9yKG1zZywgZmFpbHVyZXMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCdWxrRXJyb3JcIjtcbiAgICAgICAgdGhpcy5mYWlsdXJlcyA9IE9iamVjdC5rZXlzKGZhaWx1cmVzKS5tYXAoZnVuY3Rpb24gKHBvcykgeyByZXR1cm4gZmFpbHVyZXNbcG9zXTsgfSk7XG4gICAgICAgIHRoaXMuZmFpbHVyZXNCeVBvcyA9IGZhaWx1cmVzO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIHRoaXMuZmFpbHVyZXMpO1xuICAgIH1cbiAgICBkZXJpdmUoQnVsa0Vycm9yKS5mcm9tKERleGllRXJyb3IpO1xuICAgIHZhciBlcnJuYW1lcyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkgeyByZXR1cm4gKG9ialtuYW1lXSA9IG5hbWUgKyBcIkVycm9yXCIsIG9iaik7IH0sIHt9KTtcbiAgICB2YXIgQmFzZUV4Y2VwdGlvbiA9IERleGllRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbnMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgdmFyIGZ1bGxOYW1lID0gbmFtZSArIFwiRXJyb3JcIjtcbiAgICAgICAgZnVuY3Rpb24gRGV4aWVFcnJvcihtc2dPcklubmVyLCBpbm5lcikge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZnVsbE5hbWU7XG4gICAgICAgICAgICBpZiAoIW1zZ09ySW5uZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBkZWZhdWx0VGV4dHNbbmFtZV0gfHwgZnVsbE5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyKS5jb25jYXQoIWlubmVyID8gJycgOiAnXFxuICcgKyBpbm5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlwiLmNvbmNhdChtc2dPcklubmVyLm5hbWUsIFwiIFwiKS5jb25jYXQobXNnT3JJbm5lci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyID0gbXNnT3JJbm5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShCYXNlRXhjZXB0aW9uKTtcbiAgICAgICAgb2JqW25hbWVdID0gRGV4aWVFcnJvcjtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZXhjZXB0aW9ucy5TeW50YXggPSBTeW50YXhFcnJvcjtcbiAgICBleGNlcHRpb25zLlR5cGUgPSBUeXBlRXJyb3I7XG4gICAgZXhjZXB0aW9ucy5SYW5nZSA9IFJhbmdlRXJyb3I7XG4gICAgdmFyIGV4Y2VwdGlvbk1hcCA9IGlkYkRvbUVycm9yTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAgICAgb2JqW25hbWUgKyBcIkVycm9yXCJdID0gZXhjZXB0aW9uc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gICAgZnVuY3Rpb24gbWFwRXJyb3IoZG9tRXJyb3IsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCFkb21FcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIERleGllRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvciB8fCAhZG9tRXJyb3IubmFtZSB8fCAhZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKVxuICAgICAgICAgICAgcmV0dXJuIGRvbUVycm9yO1xuICAgICAgICB2YXIgcnYgPSBuZXcgZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKG1lc3NhZ2UgfHwgZG9tRXJyb3IubWVzc2FnZSwgZG9tRXJyb3IpO1xuICAgICAgICBpZiAoXCJzdGFja1wiIGluIGRvbUVycm9yKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHJ2LCBcInN0YWNrXCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlubmVyLnN0YWNrO1xuICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgZnVsbE5hbWVFeGNlcHRpb25zID0gZXJyb3JMaXN0LnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgICAgIGlmIChbXCJTeW50YXhcIiwgXCJUeXBlXCIsIFwiUmFuZ2VcIl0uaW5kZXhPZihuYW1lKSA9PT0gLTEpXG4gICAgICAgICAgICBvYmpbbmFtZSArIFwiRXJyb3JcIl0gPSBleGNlcHRpb25zW25hbWVdO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuTW9kaWZ5RXJyb3IgPSBNb2RpZnlFcnJvcjtcbiAgICBmdWxsTmFtZUV4Y2VwdGlvbnMuRGV4aWVFcnJvciA9IERleGllRXJyb3I7XG4gICAgZnVsbE5hbWVFeGNlcHRpb25zLkJ1bGtFcnJvciA9IEJ1bGtFcnJvcjtcblxuICAgIGZ1bmN0aW9uIG5vcCgpIHsgfVxuICAgIGZ1bmN0aW9uIG1pcnJvcih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuICAgIGZ1bmN0aW9uIHB1cmVGdW5jdGlvbkNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT0gbnVsbCB8fCBmMSA9PT0gbWlycm9yKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIGYyKGYxKHZhbCkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYWxsQm90aChvbjEsIG9uMikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb24xLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBvbjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaG9va0NyZWF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgICAgIGlmIChmMSA9PT0gbm9wKVxuICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAocmVzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gcmVzO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlczIgIT09IHVuZGVmaW5lZCA/IHJlczIgOiByZXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tEZWxldGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgb25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MsXG4gICAgICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yO1xuICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChvbnN1Y2Nlc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyA/IGNhbGxCb3RoKG9uc3VjY2VzcywgdGhpcy5vbnN1Y2Nlc3MpIDogb25zdWNjZXNzO1xuICAgICAgICAgICAgaWYgKG9uZXJyb3IpXG4gICAgICAgICAgICAgICAgdGhpcy5vbmVycm9yID0gdGhpcy5vbmVycm9yID8gY2FsbEJvdGgob25lcnJvciwgdGhpcy5vbmVycm9yKSA6IG9uZXJyb3I7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhvb2tVcGRhdGluZ0NoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtb2RpZmljYXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGV4dGVuZChtb2RpZmljYXRpb25zLCByZXMpO1xuICAgICAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjtcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlcyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAocmVzMiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVzMikgOlxuICAgICAgICAgICAgICAgIChleHRlbmQocmVzLCByZXMyKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvbWlzYWJsZUNoYWluKGYxLCBmMikge1xuICAgICAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgICAgIHJldHVybiBmMjtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiB0eXBlb2YgcmVzLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpeiA9IHRoaXMsIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXosIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGRlYnVnID0gdHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvXihodHRwfGh0dHBzKTpcXC9cXC8obG9jYWxob3N0fDEyN1xcLjBcXC4wXFwuMSkvLnRlc3QobG9jYXRpb24uaHJlZik7XG4gICAgZnVuY3Rpb24gc2V0RGVidWcodmFsdWUsIGZpbHRlcikge1xuICAgICAgICBkZWJ1ZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHZhciBJTlRFUk5BTCA9IHt9O1xuICAgIHZhciBaT05FX0VDSE9fTElNSVQgPSAxMDAsIF9hJDEgPSB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcgP1xuICAgICAgICBbXSA6XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsUCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnIHx8ICFjcnlwdG8uc3VidGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBbZ2xvYmFsUCwgZ2V0UHJvdG8oZ2xvYmFsUCksIGdsb2JhbFBdO1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVAgPSBjcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS01MTJcIiwgbmV3IFVpbnQ4QXJyYXkoWzBdKSk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5hdGl2ZVAsXG4gICAgICAgICAgICAgICAgZ2V0UHJvdG8obmF0aXZlUCksXG4gICAgICAgICAgICAgICAgZ2xvYmFsUFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSkoKSwgcmVzb2x2ZWROYXRpdmVQcm9taXNlID0gX2EkMVswXSwgbmF0aXZlUHJvbWlzZVByb3RvID0gX2EkMVsxXSwgcmVzb2x2ZWRHbG9iYWxQcm9taXNlID0gX2EkMVsyXSwgbmF0aXZlUHJvbWlzZVRoZW4gPSBuYXRpdmVQcm9taXNlUHJvdG8gJiYgbmF0aXZlUHJvbWlzZVByb3RvLnRoZW47XG4gICAgdmFyIE5hdGl2ZVByb21pc2UgPSByZXNvbHZlZE5hdGl2ZVByb21pc2UgJiYgcmVzb2x2ZWROYXRpdmVQcm9taXNlLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwYXRjaEdsb2JhbFByb21pc2UgPSAhIXJlc29sdmVkR2xvYmFsUHJvbWlzZTtcbiAgICBmdW5jdGlvbiBzY2hlZHVsZVBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2socGh5c2ljYWxUaWNrKTtcbiAgICB9XG4gICAgdmFyIGFzYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICAgICAgbWljcm90aWNrUXVldWUucHVzaChbY2FsbGJhY2ssIGFyZ3NdKTtcbiAgICAgICAgaWYgKG5lZWRzTmV3UGh5c2ljYWxUaWNrKSB7XG4gICAgICAgICAgICBzY2hlZHVsZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWUsXG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlLFxuICAgIHVuaGFuZGxlZEVycm9ycyA9IFtdLFxuICAgIHJlamVjdGluZ0Vycm9ycyA9IFtdLFxuICAgIHJlamVjdGlvbk1hcHBlciA9IG1pcnJvcjtcbiAgICB2YXIgZ2xvYmFsUFNEID0ge1xuICAgICAgICBpZDogJ2dsb2JhbCcsXG4gICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgcmVmOiAwLFxuICAgICAgICB1bmhhbmRsZWRzOiBbXSxcbiAgICAgICAgb251bmhhbmRsZWQ6IG5vcCxcbiAgICAgICAgcGdwOiBmYWxzZSxcbiAgICAgICAgZW52OiB7fSxcbiAgICAgICAgZmluYWxpemU6IG5vcFxuICAgIH07XG4gICAgdmFyIFBTRCA9IGdsb2JhbFBTRDtcbiAgICB2YXIgbWljcm90aWNrUXVldWUgPSBbXTtcbiAgICB2YXIgbnVtU2NoZWR1bGVkQ2FsbHMgPSAwO1xuICAgIHZhciB0aWNrRmluYWxpemVycyA9IFtdO1xuICAgIGZ1bmN0aW9uIERleGllUHJvbWlzZShmbikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLl9saWIgPSBmYWxzZTtcbiAgICAgICAgdmFyIHBzZCA9ICh0aGlzLl9QU0QgPSBQU0QpO1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAoZm4gIT09IElOVEVSTkFMKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24odGhpcywgdGhpcy5fdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBudWxsO1xuICAgICAgICArK3BzZC5yZWY7XG4gICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayh0aGlzLCBmbik7XG4gICAgfVxuICAgIHZhciB0aGVuUHJvcCA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcHNkID0gUFNELCBtaWNyb1Rhc2tJZCA9IHRvdGFsRWNob2VzO1xuICAgICAgICAgICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlQXdhaXQgPSAhcHNkLmdsb2JhbCAmJiAocHNkICE9PSBQU0QgfHwgbWljcm9UYXNrSWQgIT09IHRvdGFsRWNob2VzKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xlYW51cCA9IHBvc3NpYmxlQXdhaXQgJiYgIWRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIoX3RoaXMsIG5ldyBMaXN0ZW5lcihuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uRnVsZmlsbGVkLCBwc2QsIHBvc3NpYmxlQXdhaXQsIGNsZWFudXApLCBuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uUmVqZWN0ZWQsIHBzZCwgcG9zc2libGVBd2FpdCwgY2xlYW51cCksIHJlc29sdmUsIHJlamVjdCwgcHNkKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnNvbGVUYXNrKVxuICAgICAgICAgICAgICAgICAgICBydi5fY29uc29sZVRhc2sgPSB0aGlzLl9jb25zb2xlVGFzaztcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGVuLnByb3RvdHlwZSA9IElOVEVSTkFMO1xuICAgICAgICAgICAgcmV0dXJuIHRoZW47XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzZXRQcm9wKHRoaXMsICd0aGVuJywgdmFsdWUgJiYgdmFsdWUucHJvdG90eXBlID09PSBJTlRFUk5BTCA/XG4gICAgICAgICAgICAgICAgdGhlblByb3AgOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogdGhlblByb3Auc2V0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb3BzKERleGllUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICAgICAgdGhlbjogdGhlblByb3AsXG4gICAgICAgIF90aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIodGhpcywgbmV3IExpc3RlbmVyKG51bGwsIG51bGwsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBQU0QpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sIGhhbmRsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnIgaW5zdGFuY2VvZiB0eXBlID8gaGFuZGxlcihlcnIpIDogUHJvbWlzZVJlamVjdChlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIgJiYgZXJyLm5hbWUgPT09IHR5cGUgPyBoYW5kbGVyKGVycikgOiBQcm9taXNlUmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbmFsbHk6IGZ1bmN0aW9uIChvbkZpbmFsbHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUob25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJvbWlzZVJlamVjdChlcnIpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiBmdW5jdGlvbiAobXMsIG1zZykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBtcyA8IEluZmluaXR5ID9cbiAgICAgICAgICAgICAgICBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb25zLlRpbWVvdXQobXNnKSk7IH0sIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGhlbihyZXNvbHZlLCByZWplY3QpLmZpbmFsbHkoY2xlYXJUaW1lb3V0LmJpbmQobnVsbCwgaGFuZGxlKSk7XG4gICAgICAgICAgICAgICAgfSkgOiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZylcbiAgICAgICAgc2V0UHJvcChEZXhpZVByb21pc2UucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsICdEZXhpZS5Qcm9taXNlJyk7XG4gICAgZ2xvYmFsUFNELmVudiA9IHNuYXBTaG90KCk7XG4gICAgZnVuY3Rpb24gTGlzdGVuZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdCwgem9uZSkge1xuICAgICAgICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICAgICAgICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgdGhpcy5wc2QgPSB6b25lO1xuICAgIH1cbiAgICBwcm9wcyhEZXhpZVByb21pc2UsIHtcbiAgICAgICAgYWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcmVtYWluaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGV4aWVQcm9taXNlKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBydiA9IG5ldyBEZXhpZVByb21pc2UoSU5URVJOQUwsIHRydWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBQcm9taXNlUmVqZWN0LFxuICAgICAgICByYWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0QXJyYXlPZi5hcHBseShudWxsLCBhcmd1bWVudHMpLm1hcChvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihyZXNvbHZlLCByZWplY3QpOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBQU0Q6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNEOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIFBTRCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsRWNob2VzOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdG90YWxFY2hvZXM7IH0gfSxcbiAgICAgICAgbmV3UFNEOiBuZXdTY29wZSxcbiAgICAgICAgdXNlUFNEOiB1c2VQU0QsXG4gICAgICAgIHNjaGVkdWxlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhc2FwOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgYXNhcCA9IHZhbHVlOyB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdGlvbk1hcHBlcjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3Rpb25NYXBwZXI7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZWplY3Rpb25NYXBwZXIgPSB2YWx1ZTsgfVxuICAgICAgICB9LFxuICAgICAgICBmb2xsb3c6IGZ1bmN0aW9uIChmbiwgem9uZVByb3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBzZCA9IFBTRDtcbiAgICAgICAgICAgICAgICAgICAgcHNkLnVuaGFuZGxlZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcHNkLm9udW5oYW5kbGVkID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICBwc2QuZmluYWxpemUgPSBjYWxsQm90aChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5oYW5kbGVkcy5sZW5ndGggPT09IDAgPyByZXNvbHZlKCkgOiByZWplY3QoX3RoaXMudW5oYW5kbGVkc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcHNkLmZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9LCB6b25lUHJvcHMsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChOYXRpdmVQcm9taXNlKSB7XG4gICAgICAgIGlmIChOYXRpdmVQcm9taXNlLmFsbFNldHRsZWQpXG4gICAgICAgICAgICBzZXRQcm9wKERleGllUHJvbWlzZSwgXCJhbGxTZXR0bGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVQcm9taXNlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHBvc3NpYmxlUHJvbWlzZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShyZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVByb21pc2VzLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHsgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHApLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwiZnVsZmlsbGVkXCIsIHZhbHVlOiB2YWx1ZSB9OyB9LCBmdW5jdGlvbiAocmVhc29uKSB7IHJldHVybiByZXN1bHRzW2ldID0geyBzdGF0dXM6IFwicmVqZWN0ZWRcIiwgcmVhc29uOiByZWFzb24gfTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIC0tcmVtYWluaW5nIHx8IHJlc29sdmUocmVzdWx0cyk7IH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS5hbnkgJiYgdHlwZW9mIEFnZ3JlZ2F0ZUVycm9yICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHNldFByb3AoRGV4aWVQcm9taXNlLCBcImFueVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlUHJvbWlzZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cykubWFwKG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVQcm9taXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSBwb3NzaWJsZVByb21pc2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gbmV3IEFycmF5KHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlUHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbiAocCwgaSkgeyByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUocCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9LCBmdW5jdGlvbiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXNbaV0gPSBmYWlsdXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJlbWFpbmluZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKGZhaWx1cmVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoTmF0aXZlUHJvbWlzZS53aXRoUmVzb2x2ZXJzKVxuICAgICAgICAgICAgRGV4aWVQcm9taXNlLndpdGhSZXNvbHZlcnMgPSBOYXRpdmVQcm9taXNlLndpdGhSZXNvbHZlcnM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBwcm9taXNlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICAgICAgICAgIHZhciBzaG91bGRFeGVjdXRlVGljayA9IHByb21pc2UuX2xpYiAmJiBiZWdpbk1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIERleGllUHJvbWlzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuX3RoZW4ocmVzb2x2ZSwgcmVqZWN0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9LCBoYW5kbGVSZWplY3Rpb24uYmluZChudWxsLCBwcm9taXNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBoYW5kbGVSZWplY3Rpb24ocHJvbWlzZSwgZXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdGlvbihwcm9taXNlLCByZWFzb24pIHtcbiAgICAgICAgcmVqZWN0aW5nRXJyb3JzLnB1c2gocmVhc29uKTtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2hvdWxkRXhlY3V0ZVRpY2sgPSBwcm9taXNlLl9saWIgJiYgYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICByZWFzb24gPSByZWplY3Rpb25NYXBwZXIocmVhc29uKTtcbiAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSByZWFzb247XG4gICAgICAgIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IocHJvbWlzZSk7XG4gICAgICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICAgICAgaWYgKHNob3VsZEV4ZWN1dGVUaWNrKVxuICAgICAgICAgICAgZW5kTWljcm9UaWNrU2NvcGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlQWxsTGlzdGVuZXJzKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHByb21pc2UuX2xpc3RlbmVycztcbiAgICAgICAgcHJvbWlzZS5fbGlzdGVuZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHNkID0gcHJvbWlzZS5fUFNEO1xuICAgICAgICAtLXBzZC5yZWYgfHwgcHNkLmZpbmFsaXplKCk7XG4gICAgICAgIGlmIChudW1TY2hlZHVsZWRDYWxscyA9PT0gMCkge1xuICAgICAgICAgICAgKytudW1TY2hlZHVsZWRDYWxscztcbiAgICAgICAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgfSwgW10pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcm9taXNlLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNiID0gcHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5vbkZ1bGZpbGxlZCA6IGxpc3RlbmVyLm9uUmVqZWN0ZWQ7XG4gICAgICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChwcm9taXNlLl9zdGF0ZSA/IGxpc3RlbmVyLnJlc29sdmUgOiBsaXN0ZW5lci5yZWplY3QpKHByb21pc2UuX3ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpc3RlbmVyLnBzZC5yZWY7XG4gICAgICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgICAgIGFzYXAoY2FsbExpc3RlbmVyLCBbY2IsIHByb21pc2UsIGxpc3RlbmVyXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNhbGxMaXN0ZW5lcihjYiwgcHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXQsIHZhbHVlID0gcHJvbWlzZS5fdmFsdWU7XG4gICAgICAgICAgICBpZiAoIXByb21pc2UuX3N0YXRlICYmIHJlamVjdGluZ0Vycm9ycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVqZWN0aW5nRXJyb3JzID0gW107XG4gICAgICAgICAgICByZXQgPSBkZWJ1ZyAmJiBwcm9taXNlLl9jb25zb2xlVGFzayA/IHByb21pc2UuX2NvbnNvbGVUYXNrLnJ1bihmdW5jdGlvbiAoKSB7IHJldHVybiBjYih2YWx1ZSk7IH0pIDogY2IodmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFwcm9taXNlLl9zdGF0ZSAmJiByZWplY3RpbmdFcnJvcnMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGlzdGVuZXIucmVzb2x2ZShyZXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgLS1saXN0ZW5lci5wc2QucmVmIHx8IGxpc3RlbmVyLnBzZC5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBoeXNpY2FsVGljaygpIHtcbiAgICAgICAgdXNlUFNEKGdsb2JhbFBTRCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmVnaW5NaWNyb1RpY2tTY29wZSgpICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZWdpbk1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBpc091dHNpZGVNaWNyb1RpY2s7XG4gICAgICAgIGlzT3V0c2lkZU1pY3JvVGljayA9IGZhbHNlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gd2FzUm9vdEV4ZWM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuZE1pY3JvVGlja1Njb3BlKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tzLCBpLCBsO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB3aGlsZSAobWljcm90aWNrUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcyA9IG1pY3JvdGlja1F1ZXVlO1xuICAgICAgICAgICAgICAgIG1pY3JvdGlja1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgbCA9IGNhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGNhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVswXS5hcHBseShudWxsLCBpdGVtWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApO1xuICAgICAgICBpc091dHNpZGVNaWNyb1RpY2sgPSB0cnVlO1xuICAgICAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmFsaXplUGh5c2ljYWxUaWNrKCkge1xuICAgICAgICB2YXIgdW5oYW5kbGVkRXJycyA9IHVuaGFuZGxlZEVycm9ycztcbiAgICAgICAgdW5oYW5kbGVkRXJyb3JzID0gW107XG4gICAgICAgIHVuaGFuZGxlZEVycnMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcC5fUFNELm9udW5oYW5kbGVkLmNhbGwobnVsbCwgcC5fdmFsdWUsIHApO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGZpbmFsaXplcnMgPSB0aWNrRmluYWxpemVycy5zbGljZSgwKTtcbiAgICAgICAgdmFyIGkgPSBmaW5hbGl6ZXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGkpXG4gICAgICAgICAgICBmaW5hbGl6ZXJzWy0taV0oKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmbikge1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgdGlja0ZpbmFsaXplcnMuc3BsaWNlKHRpY2tGaW5hbGl6ZXJzLmluZGV4T2YoZmluYWxpemVyKSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGlja0ZpbmFsaXplcnMucHVzaChmaW5hbGl6ZXIpO1xuICAgICAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKVxuICAgICAgICAgICAgICAgIGZpbmFsaXplUGh5c2ljYWxUaWNrKCk7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkUG9zc2libHlVbmhhbmRsZWRFcnJvcihwcm9taXNlKSB7XG4gICAgICAgIGlmICghdW5oYW5kbGVkRXJyb3JzLnNvbWUoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZTsgfSkpXG4gICAgICAgICAgICB1bmhhbmRsZWRFcnJvcnMucHVzaChwcm9taXNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpIHtcbiAgICAgICAgdmFyIGkgPSB1bmhhbmRsZWRFcnJvcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaSlcbiAgICAgICAgICAgIGlmICh1bmhhbmRsZWRFcnJvcnNbLS1pXS5fdmFsdWUgPT09IHByb21pc2UuX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIFByb21pc2VSZWplY3QocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKElOVEVSTkFMLCBmYWxzZSwgcmVhc29uKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JhcChmbiwgZXJyb3JDYXRjaGVyKSB7XG4gICAgICAgIHZhciBwc2QgPSBQU0Q7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2FzUm9vdEV4ZWMgPSBiZWdpbk1pY3JvVGlja1Njb3BlKCksIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN3aXRjaFRvWm9uZShwc2QsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhdGNoZXIgJiYgZXJyb3JDYXRjaGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9ab25lKG91dGVyU2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAod2FzUm9vdEV4ZWMpXG4gICAgICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciB0YXNrID0geyBhd2FpdHM6IDAsIGVjaG9lczogMCwgaWQ6IDAgfTtcbiAgICB2YXIgdGFza0NvdW50ZXIgPSAwO1xuICAgIHZhciB6b25lU3RhY2sgPSBbXTtcbiAgICB2YXIgem9uZUVjaG9lcyA9IDA7XG4gICAgdmFyIHRvdGFsRWNob2VzID0gMDtcbiAgICB2YXIgem9uZV9pZF9jb3VudGVyID0gMDtcbiAgICBmdW5jdGlvbiBuZXdTY29wZShmbiwgcHJvcHMsIGExLCBhMikge1xuICAgICAgICB2YXIgcGFyZW50ID0gUFNELCBwc2QgPSBPYmplY3QuY3JlYXRlKHBhcmVudCk7XG4gICAgICAgIHBzZC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHBzZC5yZWYgPSAwO1xuICAgICAgICBwc2QuZ2xvYmFsID0gZmFsc2U7XG4gICAgICAgIHBzZC5pZCA9ICsrem9uZV9pZF9jb3VudGVyO1xuICAgICAgICBnbG9iYWxQU0QuZW52O1xuICAgICAgICBwc2QuZW52ID0gcGF0Y2hHbG9iYWxQcm9taXNlID8ge1xuICAgICAgICAgICAgUHJvbWlzZTogRGV4aWVQcm9taXNlLFxuICAgICAgICAgICAgUHJvbWlzZVByb3A6IHsgdmFsdWU6IERleGllUHJvbWlzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgYWxsOiBEZXhpZVByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogRGV4aWVQcm9taXNlLnJhY2UsXG4gICAgICAgICAgICBhbGxTZXR0bGVkOiBEZXhpZVByb21pc2UuYWxsU2V0dGxlZCxcbiAgICAgICAgICAgIGFueTogRGV4aWVQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IERleGllUHJvbWlzZS5yZXNvbHZlLFxuICAgICAgICAgICAgcmVqZWN0OiBEZXhpZVByb21pc2UucmVqZWN0LFxuICAgICAgICB9IDoge307XG4gICAgICAgIGlmIChwcm9wcylcbiAgICAgICAgICAgIGV4dGVuZChwc2QsIHByb3BzKTtcbiAgICAgICAgKytwYXJlbnQucmVmO1xuICAgICAgICBwc2QuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAtLXRoaXMucGFyZW50LnJlZiB8fCB0aGlzLnBhcmVudC5maW5hbGl6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcnYgPSB1c2VQU0QocHNkLCBmbiwgYTEsIGEyKTtcbiAgICAgICAgaWYgKHBzZC5yZWYgPT09IDApXG4gICAgICAgICAgICBwc2QuZmluYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpIHtcbiAgICAgICAgaWYgKCF0YXNrLmlkKVxuICAgICAgICAgICAgdGFzay5pZCA9ICsrdGFza0NvdW50ZXI7XG4gICAgICAgICsrdGFzay5hd2FpdHM7XG4gICAgICAgIHRhc2suZWNob2VzICs9IFpPTkVfRUNIT19MSU1JVDtcbiAgICAgICAgcmV0dXJuIHRhc2suaWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKCkge1xuICAgICAgICBpZiAoIXRhc2suYXdhaXRzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoLS10YXNrLmF3YWl0cyA9PT0gMClcbiAgICAgICAgICAgIHRhc2suaWQgPSAwO1xuICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzICogWk9ORV9FQ0hPX0xJTUlUO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCgnJyArIG5hdGl2ZVByb21pc2VUaGVuKS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgPT09IC0xKSB7XG4gICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzID0gZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMgPSBub3A7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uUG9zc2libGVQYXJhbGxlbGxBc3luYyhwb3NzaWJsZVByb21pc2UpIHtcbiAgICAgICAgaWYgKHRhc2suZWNob2VzICYmIHBvc3NpYmxlUHJvbWlzZSAmJiBwb3NzaWJsZVByb21pc2UuY29uc3RydWN0b3IgPT09IE5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zc2libGVQcm9taXNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lRW50ZXJFY2hvKHRhcmdldFpvbmUpIHtcbiAgICAgICAgKyt0b3RhbEVjaG9lcztcbiAgICAgICAgaWYgKCF0YXNrLmVjaG9lcyB8fCAtLXRhc2suZWNob2VzID09PSAwKSB7XG4gICAgICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzID0gdGFzay5pZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgem9uZVN0YWNrLnB1c2goUFNEKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIHRydWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b25lTGVhdmVFY2hvKCkge1xuICAgICAgICB2YXIgem9uZSA9IHpvbmVTdGFja1t6b25lU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHpvbmVTdGFjay5wb3AoKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHpvbmUsIGZhbHNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIGJFbnRlcmluZ1pvbmUpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRab25lID0gUFNEO1xuICAgICAgICBpZiAoYkVudGVyaW5nWm9uZSA/IHRhc2suZWNob2VzICYmICghem9uZUVjaG9lcysrIHx8IHRhcmdldFpvbmUgIT09IFBTRCkgOiB6b25lRWNob2VzICYmICghLS16b25lRWNob2VzIHx8IHRhcmdldFpvbmUgIT09IFBTRCkpIHtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGJFbnRlcmluZ1pvbmUgPyB6b25lRW50ZXJFY2hvLmJpbmQobnVsbCwgdGFyZ2V0Wm9uZSkgOiB6b25lTGVhdmVFY2hvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PT0gUFNEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBQU0QgPSB0YXJnZXRab25lO1xuICAgICAgICBpZiAoY3VycmVudFpvbmUgPT09IGdsb2JhbFBTRClcbiAgICAgICAgICAgIGdsb2JhbFBTRC5lbnYgPSBzbmFwU2hvdCgpO1xuICAgICAgICBpZiAocGF0Y2hHbG9iYWxQcm9taXNlKSB7XG4gICAgICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IGdsb2JhbFBTRC5lbnYuUHJvbWlzZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbnYgPSB0YXJnZXRab25lLmVudjtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Wm9uZS5nbG9iYWwgfHwgdGFyZ2V0Wm9uZS5nbG9iYWwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2dsb2JhbCwgJ1Byb21pc2UnLCB0YXJnZXRFbnYuUHJvbWlzZVByb3ApO1xuICAgICAgICAgICAgICAgIEdsb2JhbFByb21pc2UuYWxsID0gdGFyZ2V0RW52LmFsbDtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJhY2UgPSB0YXJnZXRFbnYucmFjZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlc29sdmUgPSB0YXJnZXRFbnYucmVzb2x2ZTtcbiAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlamVjdCA9IHRhcmdldEVudi5yZWplY3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVudi5hbGxTZXR0bGVkKVxuICAgICAgICAgICAgICAgICAgICBHbG9iYWxQcm9taXNlLmFsbFNldHRsZWQgPSB0YXJnZXRFbnYuYWxsU2V0dGxlZDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RW52LmFueSlcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5hbnkgPSB0YXJnZXRFbnYuYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNuYXBTaG90KCkge1xuICAgICAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IF9nbG9iYWwuUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHBhdGNoR2xvYmFsUHJvbWlzZSA/IHtcbiAgICAgICAgICAgIFByb21pc2U6IEdsb2JhbFByb21pc2UsXG4gICAgICAgICAgICBQcm9taXNlUHJvcDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfZ2xvYmFsLCBcIlByb21pc2VcIiksXG4gICAgICAgICAgICBhbGw6IEdsb2JhbFByb21pc2UuYWxsLFxuICAgICAgICAgICAgcmFjZTogR2xvYmFsUHJvbWlzZS5yYWNlLFxuICAgICAgICAgICAgYWxsU2V0dGxlZDogR2xvYmFsUHJvbWlzZS5hbGxTZXR0bGVkLFxuICAgICAgICAgICAgYW55OiBHbG9iYWxQcm9taXNlLmFueSxcbiAgICAgICAgICAgIHJlc29sdmU6IEdsb2JhbFByb21pc2UucmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdDogR2xvYmFsUHJvbWlzZS5yZWplY3QsXG4gICAgICAgIH0gOiB7fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXNlUFNEKHBzZCwgZm4sIGExLCBhMiwgYTMpIHtcbiAgICAgICAgdmFyIG91dGVyU2NvcGUgPSBQU0Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUocHNkLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBmbihhMSwgYTIsIGEzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZShvdXRlclNjb3BlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcChmbiwgem9uZSwgcG9zc2libGVBd2FpdCwgY2xlYW51cCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nID8gZm4gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0ZXJab25lID0gUFNEO1xuICAgICAgICAgICAgaWYgKHBvc3NpYmxlQXdhaXQpXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZSh6b25lLCB0cnVlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJab25lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXhlY0luR2xvYmFsQ29udGV4dChjYikge1xuICAgICAgICBpZiAoUHJvbWlzZSA9PT0gTmF0aXZlUHJvbWlzZSAmJiB0YXNrLmVjaG9lcyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHpvbmVFY2hvZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5xdWV1ZU5hdGl2ZU1pY3JvVGFzayhjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVqZWN0aW9uID0gRGV4aWVQcm9taXNlLnJlamVjdDtcblxuICAgIGZ1bmN0aW9uIHRlbXBUcmFuc2FjdGlvbihkYiwgbW9kZSwgc3RvcmVOYW1lcywgZm4pIHtcbiAgICAgICAgaWYgKCFkYi5pZGJkYiB8fCAoIWRiLl9zdGF0ZS5vcGVuQ29tcGxldGUgJiYgKCFQU0QubGV0VGhyb3VnaCAmJiAhZGIuX3ZpcCkpKSB7XG4gICAgICAgICAgICBpZiAoZGIuX3N0YXRlLm9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoZGIuX3N0YXRlLmRiT3BlbkVycm9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRiLl9zdGF0ZS5pc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYi5fc3RhdGUuYXV0b09wZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKSk7XG4gICAgICAgICAgICAgICAgZGIub3BlbigpLmNhdGNoKG5vcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGIuX3N0YXRlLmRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBmbik7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRiLl9kYlNjaGVtYSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXgubmFtZSA9PT0gZXJybmFtZXMuSW52YWxpZFN0YXRlICYmIGRiLmlzT3BlbigpICYmIC0tZGIuX3N0YXRlLlBSMTM5OF9tYXhMb29wID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBOZWVkIHRvIHJlb3BlbiBkYicpO1xuICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5vcGVuKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB0ZW1wVHJhbnNhY3Rpb24oZGIsIG1vZGUsIHN0b3JlTmFtZXMsIGZuKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9wcm9taXNlKG1vZGUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBQU0QudHJhbnMgPSB0cmFucztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUnKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMuY29tbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZSA9PT0gJ3JlYWRvbmx5JyA/IHJlc3VsdCA6IHRyYW5zLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIERFWElFX1ZFUlNJT04gPSAnNC4yLjAnO1xuICAgIHZhciBtYXhTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1NTM1KTtcbiAgICB2YXIgbWluS2V5ID0gLUluZmluaXR5O1xuICAgIHZhciBJTlZBTElEX0tFWV9BUkdVTUVOVCA9IFwiSW52YWxpZCBrZXkgcHJvdmlkZWQuIEtleXMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZywgbnVtYmVyLCBEYXRlIG9yIEFycmF5PHN0cmluZyB8IG51bWJlciB8IERhdGU+LlwiO1xuICAgIHZhciBTVFJJTkdfRVhQRUNURUQgPSBcIlN0cmluZyBleHBlY3RlZC5cIjtcbiAgICB2YXIgY29ubmVjdGlvbnMgPSBbXTtcbiAgICB2YXIgREJOQU1FU19EQiA9ICdfX2RibmFtZXMnO1xuICAgIHZhciBSRUFET05MWSA9ICdyZWFkb25seSc7XG4gICAgdmFyIFJFQURXUklURSA9ICdyZWFkd3JpdGUnO1xuXG4gICAgZnVuY3Rpb24gY29tYmluZShmaWx0ZXIxLCBmaWx0ZXIyKSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXIxID9cbiAgICAgICAgICAgIGZpbHRlcjIgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpbHRlcjEuYXBwbHkodGhpcywgYXJndW1lbnRzKSAmJiBmaWx0ZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gOlxuICAgICAgICAgICAgICAgIGZpbHRlcjEgOlxuICAgICAgICAgICAgZmlsdGVyMjtcbiAgICB9XG5cbiAgICB2YXIgQW55UmFuZ2UgPSB7XG4gICAgICAgIHR5cGU6IDMgLFxuICAgICAgICBsb3dlcjogLUluZmluaXR5LFxuICAgICAgICBsb3dlck9wZW46IGZhbHNlLFxuICAgICAgICB1cHBlcjogW1tdXSxcbiAgICAgICAgdXBwZXJPcGVuOiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Yga2V5UGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAhL1xcLi8udGVzdChrZXlQYXRoKVxuICAgICAgICAgICAgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtrZXlQYXRoXSA9PT0gdW5kZWZpbmVkICYmIChrZXlQYXRoIGluIG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gZGVlcENsb25lKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iajsgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBFbnRpdHkoKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbnMuVHlwZShcIkVudGl0eSBpbnN0YW5jZXMgbXVzdCBuZXZlciBiZSBuZXc6ZWQuIEluc3RhbmNlcyBhcmUgZ2VuZXJhdGVkIGJ5IHRoZSBmcmFtZXdvcmsgYnlwYXNzaW5nIHRoZSBjb25zdHJ1Y3Rvci5cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY21wKGEsIGIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0YSA9IHR5cGUoYSk7XG4gICAgICAgICAgICB2YXIgdGIgPSB0eXBlKGIpO1xuICAgICAgICAgICAgaWYgKHRhICE9PSB0Yikge1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ0FycmF5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiID09PSAnQXJyYXknKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRhID09PSAnYmluYXJ5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiID09PSAnYmluYXJ5JylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGlmICh0YSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmICh0YiA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAodGEgPT09ICdEYXRlJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKHRiICE9PSAnRGF0ZScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0YSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JpbmFyeSc6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVVaW50OEFycmF5cyhnZXRVaW50OEFycmF5KGEpLCBnZXRVaW50OEFycmF5KGIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUFycmF5cyhhLCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGEsIGIpIHtcbiAgICAgICAgdmFyIGFsID0gYS5sZW5ndGg7XG4gICAgICAgIHZhciBibCA9IGIubGVuZ3RoO1xuICAgICAgICB2YXIgbCA9IGFsIDwgYmwgPyBhbCA6IGJsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IGNtcChhW2ldLCBiW2ldKTtcbiAgICAgICAgICAgIGlmIChyZXMgIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWwgPT09IGJsID8gMCA6IGFsIDwgYmwgPyAtMSA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBhcmVVaW50OEFycmF5cyhhLCBiKSB7XG4gICAgICAgIHZhciBhbCA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgYmwgPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIGwgPSBhbCA8IGJsID8gYWwgOiBibDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChhW2ldICE9PSBiW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiBhW2ldIDwgYltpXSA/IC0xIDogMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWwgPT09IGJsID8gMCA6IGFsIDwgYmwgPyAtMSA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHR5cGUoeCkge1xuICAgICAgICB2YXIgdCA9IHR5cGVvZiB4O1xuICAgICAgICBpZiAodCAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh4KSlcbiAgICAgICAgICAgIHJldHVybiAnYmluYXJ5JztcbiAgICAgICAgdmFyIHRzVGFnID0gdG9TdHJpbmdUYWcoeCk7XG4gICAgICAgIHJldHVybiB0c1RhZyA9PT0gJ0FycmF5QnVmZmVyJyA/ICdiaW5hcnknIDogdHNUYWc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFVpbnQ4QXJyYXkoYSkge1xuICAgICAgICBpZiAoYSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhhKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShhLmJ1ZmZlciwgYS5ieXRlT2Zmc2V0LCBhLmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcih0YWJsZSwga2V5cywgcmVzKSB7XG4gICAgICAgIHZhciB5UHJvcHMgPSB0YWJsZS5zY2hlbWEueVByb3BzO1xuICAgICAgICBpZiAoIXlQcm9wcylcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIGlmIChrZXlzICYmIHJlcy5udW1GYWlsdXJlcyA+IDApXG4gICAgICAgICAgICBrZXlzID0ga2V5cy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICFyZXMuZmFpbHVyZXNbaV07IH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoeVByb3BzLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVzVGFibGUgPSBfYS51cGRhdGVzVGFibGU7XG4gICAgICAgICAgICByZXR1cm4ga2V5c1xuICAgICAgICAgICAgICAgID8gdGFibGUuZGIudGFibGUodXBkYXRlc1RhYmxlKS53aGVyZSgnaycpLmFueU9mKGtleXMpLmRlbGV0ZSgpXG4gICAgICAgICAgICAgICAgOiB0YWJsZS5kYi50YWJsZSh1cGRhdGVzVGFibGUpLmNsZWFyKCk7XG4gICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlczsgfSk7XG4gICAgfVxuXG4gICAgdmFyIFRhYmxlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRhYmxlKCkge1xuICAgICAgICB9XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5fdHJhbnMgPSBmdW5jdGlvbiAobW9kZSwgZm4sIHdyaXRlTG9ja2VkKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnMgPSB0aGlzLl90eCB8fCBQU0QudHJhbnM7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgdmFyIHRhc2sgPSBkZWJ1ZyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5jcmVhdGVUYXNrICYmIGNvbnNvbGUuY3JlYXRlVGFzayhcIkRleGllOiBcIi5jb25jYXQobW9kZSA9PT0gJ3JlYWRvbmx5JyA/ICdyZWFkJyA6ICd3cml0ZScsIFwiIFwiKS5jb25jYXQodGhpcy5uYW1lKSk7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1RhYmxlSW5UcmFuc2FjdGlvbihyZXNvbHZlLCByZWplY3QsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cmFucy5zY2hlbWFbdGFibGVOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTm90Rm91bmQoXCJUYWJsZSBcIiArIHRhYmxlTmFtZSArIFwiIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbih0cmFucy5pZGJ0cmFucywgdHJhbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRyYW5zICYmIHRyYW5zLmRiLl9ub3ZpcCA9PT0gdGhpcy5kYi5fbm92aXAgP1xuICAgICAgICAgICAgICAgICAgICB0cmFucyA9PT0gUFNELnRyYW5zID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLl9wcm9taXNlKG1vZGUsIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uLCB3cml0ZUxvY2tlZCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJhbnMuX3Byb21pc2UobW9kZSwgY2hlY2tUYWJsZUluVHJhbnNhY3Rpb24sIHdyaXRlTG9ja2VkKTsgfSwgeyB0cmFuczogdHJhbnMsIHRyYW5zbGVzczogUFNELnRyYW5zbGVzcyB8fCBQU0QgfSkgOlxuICAgICAgICAgICAgICAgICAgICB0ZW1wVHJhbnNhY3Rpb24odGhpcy5kYiwgbW9kZSwgW3RoaXMubmFtZV0sIGNoZWNrVGFibGVJblRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgICAgICBwLl9jb25zb2xlVGFzayA9IHRhc2s7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBwLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHdhc1Jvb3RFeGVjKVxuICAgICAgICAgICAgICAgICAgICBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleU9yQ3JpdCwgY2IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoa2V5T3JDcml0ICYmIGtleU9yQ3JpdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKGtleU9yQ3JpdCkuZmlyc3QoY2IpO1xuICAgICAgICAgICAgaWYgKGtleU9yQ3JpdCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuVHlwZShcIkludmFsaWQgYXJndW1lbnQgdG8gVGFibGUuZ2V0KClcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkb25seScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLmdldCh7IHRyYW5zOiB0cmFucywga2V5OiBrZXlPckNyaXQgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gX3RoaXMuaG9vay5yZWFkaW5nLmZpcmUocmVzKTsgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLndoZXJlID0gZnVuY3Rpb24gKGluZGV4T3JDcml0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluZGV4T3JDcml0ID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcywgaW5kZXhPckNyaXQpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoaW5kZXhPckNyaXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5XaGVyZUNsYXVzZSh0aGlzLCBcIltcIi5jb25jYXQoaW5kZXhPckNyaXQuam9pbignKycpLCBcIl1cIikpO1xuICAgICAgICAgICAgdmFyIGtleVBhdGhzID0ga2V5cyhpbmRleE9yQ3JpdCk7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aHMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShrZXlQYXRoc1swXSlcbiAgICAgICAgICAgICAgICAgICAgLmVxdWFscyhpbmRleE9yQ3JpdFtrZXlQYXRoc1swXV0pO1xuICAgICAgICAgICAgdmFyIGNvbXBvdW5kSW5kZXggPSB0aGlzLnNjaGVtYS5pbmRleGVzLmNvbmNhdCh0aGlzLnNjaGVtYS5wcmltS2V5KS5maWx0ZXIoZnVuY3Rpb24gKGl4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl4LmNvbXBvdW5kICYmXG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGhzLmV2ZXJ5KGZ1bmN0aW9uIChrZXlQYXRoKSB7IHJldHVybiBpeC5rZXlQYXRoLmluZGV4T2Yoa2V5UGF0aCkgPj0gMDsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlQYXRocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGhzLmluZGV4T2YoaXgua2V5UGF0aFtpXSkgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5rZXlQYXRoLmxlbmd0aCAtIGIua2V5UGF0aC5sZW5ndGg7IH0pWzBdO1xuICAgICAgICAgICAgaWYgKGNvbXBvdW5kSW5kZXggJiYgdGhpcy5kYi5fbWF4S2V5ICE9PSBtYXhTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5UGF0aHNJblZhbGlkT3JkZXIgPSBjb21wb3VuZEluZGV4LmtleVBhdGguc2xpY2UoMCwga2V5UGF0aHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUoa2V5UGF0aHNJblZhbGlkT3JkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5lcXVhbHMoa2V5UGF0aHNJblZhbGlkT3JkZXIubWFwKGZ1bmN0aW9uIChrcCkgeyByZXR1cm4gaW5kZXhPckNyaXRba3BdOyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbXBvdW5kSW5kZXggJiYgZGVidWcpXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIHF1ZXJ5IFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShpbmRleE9yQ3JpdCksIFwiIG9uIFwiKS5jb25jYXQodGhpcy5uYW1lLCBcIiB3b3VsZCBiZW5lZml0IGZyb20gYSBcIikgK1xuICAgICAgICAgICAgICAgICAgICBcImNvbXBvdW5kIGluZGV4IFtcIi5jb25jYXQoa2V5UGF0aHMuam9pbignKycpLCBcIl1cIikpO1xuICAgICAgICAgICAgdmFyIGlkeEJ5TmFtZSA9IHRoaXMuc2NoZW1hLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcChhLCBiKSA9PT0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IGtleVBhdGhzLnJlZHVjZShmdW5jdGlvbiAoX2EsIGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldkluZGV4ID0gX2FbMF0sIHByZXZGaWx0ZXJGbiA9IF9hWzFdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGlkeEJ5TmFtZVtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbmRleE9yQ3JpdFtrZXlQYXRoXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBwcmV2SW5kZXggfHwgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHByZXZJbmRleCB8fCAhaW5kZXggP1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluZShwcmV2RmlsdGVyRm4sIGluZGV4ICYmIGluZGV4Lm11bHRpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IGdldEJ5S2V5UGF0aCh4LCBrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzQXJyYXkocHJvcCkgJiYgcHJvcC5zb21lKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBlcXVhbHModmFsdWUsIGl0ZW0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGVxdWFscyh2YWx1ZSwgZ2V0QnlLZXlQYXRoKHgsIGtleVBhdGgpKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcHJldkZpbHRlckZuXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0sIFtudWxsLCBudWxsXSksIGlkeCA9IF9hWzBdLCBmaWx0ZXJGdW5jdGlvbiA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGlkeCA/XG4gICAgICAgICAgICAgICAgdGhpcy53aGVyZShpZHgubmFtZSkuZXF1YWxzKGluZGV4T3JDcml0W2lkeC5rZXlQYXRoXSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmaWx0ZXJGdW5jdGlvbikgOlxuICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5kZXggP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcihmaWx0ZXJGdW5jdGlvbikgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLndoZXJlKGtleVBhdGhzKS5lcXVhbHMoJycpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5hbmQoZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAodGhlblNob3J0Y3V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5jb3VudCh0aGVuU2hvcnRjdXQpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkub2Zmc2V0KG9mZnNldCk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uIChudW1Sb3dzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5saW1pdChudW1Sb3dzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmVhY2goY2FsbGJhY2spO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICh0aGVuU2hvcnRjdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLnRvQXJyYXkodGhlblNob3J0Y3V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5Db2xsZWN0aW9uKG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5kYi5Db2xsZWN0aW9uKG5ldyB0aGlzLmRiLldoZXJlQ2xhdXNlKHRoaXMsIGlzQXJyYXkoaW5kZXgpID9cbiAgICAgICAgICAgICAgICBcIltcIi5jb25jYXQoaW5kZXguam9pbignKycpLCBcIl1cIikgOlxuICAgICAgICAgICAgICAgIGluZGV4KSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkucmV2ZXJzZSgpO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUubWFwVG9DbGFzcyA9IGZ1bmN0aW9uIChjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcywgZGIgPSBfYS5kYiwgdGFibGVOYW1lID0gX2EubmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hLm1hcHBlZENsYXNzID0gY29uc3RydWN0b3I7XG4gICAgICAgICAgICBpZiAoY29uc3RydWN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgRW50aXR5KSB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IgPSAgKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzXzEucHJvdG90eXBlLCBcImRiXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGI7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUudGFibGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0YWJsZU5hbWU7IH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc18xO1xuICAgICAgICAgICAgICAgIH0oY29uc3RydWN0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmhlcml0ZWRQcm9wcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3RvID0gY29uc3RydWN0b3IucHJvdG90eXBlOyBwcm90bzsgcHJvdG8gPSBnZXRQcm90byhwcm90bykpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bykuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHsgcmV0dXJuIGluaGVyaXRlZFByb3BzLmFkZChwcm9wTmFtZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlYWRIb29rID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5oZXJpdGVkUHJvcHMuaGFzKG0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNbbV0gPSBvYmpbbV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zY2hlbWEucmVhZEhvb2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvb2sucmVhZGluZy51bnN1YnNjcmliZSh0aGlzLnNjaGVtYS5yZWFkSG9vayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjaGVtYS5yZWFkSG9vayA9IHJlYWRIb29rO1xuICAgICAgICAgICAgdGhpcy5ob29rKFwicmVhZGluZ1wiLCByZWFkSG9vayk7XG4gICAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5kZWZpbmVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsYXNzKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQodGhpcywgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBUb0NsYXNzKENsYXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuc2NoZW1hLnByaW1LZXksIGF1dG8gPSBfYS5hdXRvLCBrZXlQYXRoID0gX2Eua2V5UGF0aDtcbiAgICAgICAgICAgIHZhciBvYmpUb0FkZCA9IG9iajtcbiAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGF1dG8pIHtcbiAgICAgICAgICAgICAgICBvYmpUb0FkZCA9IHdvcmthcm91bmRGb3JVbmRlZmluZWRQcmltS2V5KGtleVBhdGgpKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2FkZCcsIGtleXM6IGtleSAhPSBudWxsID8gW2tleV0gOiBudWxsLCB2YWx1ZXM6IFtvYmpUb0FkZF0gfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6IHJlcy5sYXN0UmVzdWx0OyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsYXN0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGxhc3RSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChrZXlPck9iamVjdCwgbW9kaWZpY2F0aW9ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXlPck9iamVjdCA9PT0gJ29iamVjdCcgJiYgIWlzQXJyYXkoa2V5T3JPYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGdldEJ5S2V5UGF0aChrZXlPck9iamVjdCwgdGhpcy5zY2hlbWEucHJpbUtleS5rZXlQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiR2l2ZW4gb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gaXRzIHByaW1hcnkga2V5XCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZShcIjppZFwiKS5lcXVhbHMoa2V5KS5tb2RpZnkobW9kaWZpY2F0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZShcIjppZFwiKS5lcXVhbHMoa2V5T3JPYmplY3QpLm1vZGlmeShtb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuc2NoZW1hLnByaW1LZXksIGF1dG8gPSBfYS5hdXRvLCBrZXlQYXRoID0gX2Eua2V5UGF0aDtcbiAgICAgICAgICAgIHZhciBvYmpUb0FkZCA9IG9iajtcbiAgICAgICAgICAgIGlmIChrZXlQYXRoICYmIGF1dG8pIHtcbiAgICAgICAgICAgICAgICBvYmpUb0FkZCA9IHdvcmthcm91bmRGb3JVbmRlZmluZWRQcmltS2V5KGtleVBhdGgpKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdwdXQnLCB2YWx1ZXM6IFtvYmpUb0FkZF0sIGtleXM6IGtleSAhPSBudWxsID8gW2tleV0gOiBudWxsIH0pOyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6IHJlcy5sYXN0UmVzdWx0OyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsYXN0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGxhc3RSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gX3RoaXMuY29yZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdkZWxldGUnLCBrZXlzOiBba2V5XSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIGJ1aWx0SW5EZWxldGlvblRyaWdnZXIoX3RoaXMsIFtrZXldLCByZXMpOyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5udW1GYWlsdXJlcyA/IERleGllUHJvbWlzZS5yZWplY3QocmVzLmZhaWx1cmVzWzBdKSA6IHVuZGVmaW5lZDsgfSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIF90aGlzLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlUmFuZ2UnLCByYW5nZTogQW55UmFuZ2UgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBidWlsdEluRGVsZXRpb25UcmlnZ2VyKF90aGlzLCBudWxsLCByZXMpOyB9KTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMubnVtRmFpbHVyZXMgPyBEZXhpZVByb21pc2UucmVqZWN0KHJlcy5mYWlsdXJlc1swXSkgOiB1bmRlZmluZWQ7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBUYWJsZS5wcm90b3R5cGUuYnVsa0dldCA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkb25seScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLmdldE1hbnkoe1xuICAgICAgICAgICAgICAgICAgICBrZXlzOiBrZXlzLFxuICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnNcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdC5tYXAoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gX3RoaXMuaG9vay5yZWFkaW5nLmZpcmUocmVzKTsgfSk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrQWRkID0gZnVuY3Rpb24gKG9iamVjdHMsIGtleXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5cyA9IEFycmF5LmlzQXJyYXkoa2V5c09yT3B0aW9ucykgPyBrZXlzT3JPcHRpb25zIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgKGtleXMgPyB1bmRlZmluZWQgOiBrZXlzT3JPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciB3YW50UmVzdWx0cyA9IG9wdGlvbnMgPyBvcHRpb25zLmFsbEtleXMgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGggJiYga2V5cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa0FkZCgpOiBrZXlzIGFyZ3VtZW50IGludmFsaWQgb24gdGFibGVzIHdpdGggaW5ib3VuZCBrZXlzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoICE9PSBvYmplY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG9iamVjdHMgYW5kIGtleXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtT2JqZWN0cyA9IG9iamVjdHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RzVG9BZGQgPSBrZXlQYXRoICYmIGF1dG8gP1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLm1hcCh3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSkgOlxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2FkZCcsIGtleXM6IGtleXMsIHZhbHVlczogb2JqZWN0c1RvQWRkLCB3YW50UmVzdWx0czogd2FudFJlc3VsdHMgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB3YW50UmVzdWx0cyA/IHJlc3VsdHMgOiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtBZGQoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1PYmplY3RzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrUHV0ID0gZnVuY3Rpb24gKG9iamVjdHMsIGtleXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5cyA9IEFycmF5LmlzQXJyYXkoa2V5c09yT3B0aW9ucykgPyBrZXlzT3JPcHRpb25zIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgKGtleXMgPyB1bmRlZmluZWQgOiBrZXlzT3JPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciB3YW50UmVzdWx0cyA9IG9wdGlvbnMgPyBvcHRpb25zLmFsbEtleXMgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnNjaGVtYS5wcmltS2V5LCBhdXRvID0gX2EuYXV0bywga2V5UGF0aCA9IF9hLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKGtleVBhdGggJiYga2V5cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa1B1dCgpOiBrZXlzIGFyZ3VtZW50IGludmFsaWQgb24gdGFibGVzIHdpdGggaW5ib3VuZCBrZXlzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoICE9PSBvYmplY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG9iamVjdHMgYW5kIGtleXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtT2JqZWN0cyA9IG9iamVjdHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RzVG9QdXQgPSBrZXlQYXRoICYmIGF1dG8gP1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLm1hcCh3b3JrYXJvdW5kRm9yVW5kZWZpbmVkUHJpbUtleShrZXlQYXRoKSkgOlxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ3B1dCcsIGtleXM6IGtleXMsIHZhbHVlczogb2JqZWN0c1RvUHV0LCB3YW50UmVzdWx0czogd2FudFJlc3VsdHMgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCByZXN1bHRzID0gX2EucmVzdWx0cywgbGFzdFJlc3VsdCA9IF9hLmxhc3RSZXN1bHQsIGZhaWx1cmVzID0gX2EuZmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB3YW50UmVzdWx0cyA/IHJlc3VsdHMgOiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQnVsa0Vycm9yKFwiXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiLmJ1bGtQdXQoKTogXCIpLmNvbmNhdChudW1GYWlsdXJlcywgXCIgb2YgXCIpLmNvbmNhdChudW1PYmplY3RzLCBcIiBvcGVyYXRpb25zIGZhaWxlZFwiKSwgZmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFRhYmxlLnByb3RvdHlwZS5idWxrVXBkYXRlID0gZnVuY3Rpb24gKGtleXNBbmRDaGFuZ2VzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IHRoaXMuY29yZTtcbiAgICAgICAgICAgIHZhciBrZXlzID0ga2V5c0FuZENoYW5nZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkgeyByZXR1cm4gZW50cnkua2V5OyB9KTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VTcGVjcyA9IGtleXNBbmRDaGFuZ2VzLm1hcChmdW5jdGlvbiAoZW50cnkpIHsgcmV0dXJuIGVudHJ5LmNoYW5nZXM7IH0pO1xuICAgICAgICAgICAgdmFyIG9mZnNldE1hcCA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKCdyZWFkd3JpdGUnLCBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29yZVRhYmxlLmdldE1hbnkoeyB0cmFuczogdHJhbnMsIGtleXM6IGtleXMsIGNhY2hlOiAnY2xvbmUnIH0pLnRoZW4oZnVuY3Rpb24gKG9ianMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdE9ianMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAga2V5c0FuZENoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoX2EsIGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9hLmtleSwgY2hhbmdlcyA9IF9hLmNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2Jqc1tpZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyhjaGFuZ2VzKTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBfYltfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNoYW5nZXNba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoID09PSBfdGhpcy5zY2hlbWEucHJpbUtleS5rZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21wKHZhbHVlLCBrZXkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuQ29uc3RyYWludChcIkNhbm5vdCB1cGRhdGUgcHJpbWFyeSBrZXkgaW4gYnVsa1VwZGF0ZSgpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldE1hcC5wdXNoKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0S2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0T2Jqcy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRW50cmllcyA9IHJlc3VsdEtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZVRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcmVzdWx0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcmVzdWx0T2JqcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBrZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNwZWNzOiBjaGFuZ2VTcGVjc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSBfYS5udW1GYWlsdXJlcywgZmFpbHVyZXMgPSBfYS5mYWlsdXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1GYWlsdXJlcyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVtRW50cmllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyhmYWlsdXJlcyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IF9iW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGVkT2Zmc2V0ID0gb2Zmc2V0TWFwW051bWJlcihvZmZzZXQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkT2Zmc2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmUgPSBmYWlsdXJlc1tvZmZzZXRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmFpbHVyZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXNbbWFwcGVkT2Zmc2V0XSA9IGZhaWx1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1bGtFcnJvcihcIlwiLmNvbmNhdChfdGhpcy5uYW1lLCBcIi5idWxrVXBkYXRlKCk6IFwiKS5jb25jYXQobnVtRmFpbHVyZXMsIFwiIG9mIFwiKS5jb25jYXQobnVtRW50cmllcywgXCIgb3BlcmF0aW9ucyBmYWlsZWRcIiksIGZhaWx1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGFibGUucHJvdG90eXBlLmJ1bGtEZWxldGUgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBudW1LZXlzID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnMoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICh0cmFucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb3JlLm11dGF0ZSh7IHRyYW5zOiB0cmFucywgdHlwZTogJ2RlbGV0ZScsIGtleXM6IGtleXMgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcihfdGhpcywga2V5cywgcmVzKTsgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHZhciBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCBsYXN0UmVzdWx0ID0gX2EubGFzdFJlc3VsdCwgZmFpbHVyZXMgPSBfYS5mYWlsdXJlcztcbiAgICAgICAgICAgICAgICBpZiAobnVtRmFpbHVyZXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdWxrRXJyb3IoXCJcIi5jb25jYXQoX3RoaXMubmFtZSwgXCIuYnVsa0RlbGV0ZSgpOiBcIikuY29uY2F0KG51bUZhaWx1cmVzLCBcIiBvZiBcIikuY29uY2F0KG51bUtleXMsIFwiIG9wZXJhdGlvbnMgZmFpbGVkXCIpLCBmYWlsdXJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRhYmxlO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBFdmVudHMoY3R4KSB7XG4gICAgICAgIHZhciBldnMgPSB7fTtcbiAgICAgICAgdmFyIHJ2ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoaSAtIDEpO1xuICAgICAgICAgICAgICAgIHdoaWxlICgtLWkpXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGV2c1tldmVudE5hbWVdLnN1YnNjcmliZS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIChldmVudE5hbWUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBldnNbZXZlbnROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcnYuYWRkRXZlbnRUeXBlID0gYWRkO1xuICAgICAgICBmb3IgKHZhciBpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIGFkZChhcmd1bWVudHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICAgICAgZnVuY3Rpb24gYWRkKGV2ZW50TmFtZSwgY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZENvbmZpZ3VyZWRFdmVudHMoZXZlbnROYW1lKTtcbiAgICAgICAgICAgIGlmICghY2hhaW5GdW5jdGlvbilcbiAgICAgICAgICAgICAgICBjaGFpbkZ1bmN0aW9uID0gcmV2ZXJzZVN0b3BwYWJsZUV2ZW50Q2hhaW47XG4gICAgICAgICAgICBpZiAoIWRlZmF1bHRGdW5jdGlvbilcbiAgICAgICAgICAgICAgICBkZWZhdWx0RnVuY3Rpb24gPSBub3A7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyczogW10sXG4gICAgICAgICAgICAgICAgZmlyZTogZGVmYXVsdEZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnN1YnNjcmliZXJzLmluZGV4T2YoY2IpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5wdXNoKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyZSA9IGNoYWluRnVuY3Rpb24oY29udGV4dC5maXJlLCBjYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycyA9IGNvbnRleHQuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNiOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maXJlID0gY29udGV4dC5zdWJzY3JpYmVycy5yZWR1Y2UoY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXZzW2V2ZW50TmFtZV0gPSBydltldmVudE5hbWVdID0gY29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZENvbmZpZ3VyZWRFdmVudHMoY2ZnKSB7XG4gICAgICAgICAgICBrZXlzKGNmZykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBjZmdbZXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGQoZXZlbnROYW1lLCBjZmdbZXZlbnROYW1lXVswXSwgY2ZnW2V2ZW50TmFtZV1bMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzID09PSAnYXNhcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBhZGQoZXZlbnROYW1lLCBtaXJyb3IsIGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNhcCQxKGZ1bmN0aW9uIGZpcmVFdmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBldmVudCBjb25maWdcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VDbGFzc0NvbnN0cnVjdG9yKHByb3RvdHlwZSwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgZGVyaXZlKGNvbnN0cnVjdG9yKS5mcm9tKHsgcHJvdG90eXBlOiBwcm90b3R5cGUgfSk7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZUNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihUYWJsZS5wcm90b3R5cGUsIGZ1bmN0aW9uIFRhYmxlKG5hbWUsIHRhYmxlU2NoZW1hLCB0cmFucykge1xuICAgICAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICAgICAgdGhpcy5fdHggPSB0cmFucztcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLnNjaGVtYSA9IHRhYmxlU2NoZW1hO1xuICAgICAgICAgICAgdGhpcy5ob29rID0gZGIuX2FsbFRhYmxlc1tuYW1lXSA/IGRiLl9hbGxUYWJsZXNbbmFtZV0uaG9vayA6IEV2ZW50cyhudWxsLCB7XG4gICAgICAgICAgICAgICAgXCJjcmVhdGluZ1wiOiBbaG9va0NyZWF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICAgICAgXCJyZWFkaW5nXCI6IFtwdXJlRnVuY3Rpb25DaGFpbiwgbWlycm9yXSxcbiAgICAgICAgICAgICAgICBcInVwZGF0aW5nXCI6IFtob29rVXBkYXRpbmdDaGFpbiwgbm9wXSxcbiAgICAgICAgICAgICAgICBcImRlbGV0aW5nXCI6IFtob29rRGVsZXRpbmdDaGFpbiwgbm9wXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUGxhaW5LZXlSYW5nZShjdHgsIGlnbm9yZUxpbWl0RmlsdGVyKSB7XG4gICAgICAgIHJldHVybiAhKGN0eC5maWx0ZXIgfHwgY3R4LmFsZ29yaXRobSB8fCBjdHgub3IpICYmXG4gICAgICAgICAgICAoaWdub3JlTGltaXRGaWx0ZXIgPyBjdHguanVzdExpbWl0IDogIWN0eC5yZXBsYXlGaWx0ZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRGaWx0ZXIoY3R4LCBmbikge1xuICAgICAgICBjdHguZmlsdGVyID0gY29tYmluZShjdHguZmlsdGVyLCBmbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZFJlcGxheUZpbHRlcihjdHgsIGZhY3RvcnksIGlzTGltaXRGaWx0ZXIpIHtcbiAgICAgICAgdmFyIGN1cnIgPSBjdHgucmVwbGF5RmlsdGVyO1xuICAgICAgICBjdHgucmVwbGF5RmlsdGVyID0gY3VyciA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbWJpbmUoY3VycigpLCBmYWN0b3J5KCkpOyB9IDogZmFjdG9yeTtcbiAgICAgICAgY3R4Lmp1c3RMaW1pdCA9IGlzTGltaXRGaWx0ZXIgJiYgIWN1cnI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZE1hdGNoRmlsdGVyKGN0eCwgZm4pIHtcbiAgICAgICAgY3R4LmlzTWF0Y2ggPSBjb21iaW5lKGN0eC5pc01hdGNoLCBmbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEluZGV4T3JTdG9yZShjdHgsIGNvcmVTY2hlbWEpIHtcbiAgICAgICAgaWYgKGN0eC5pc1ByaW1LZXkpXG4gICAgICAgICAgICByZXR1cm4gY29yZVNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICB2YXIgaW5kZXggPSBjb3JlU2NoZW1hLmdldEluZGV4QnlLZXlQYXRoKGN0eC5pbmRleCk7XG4gICAgICAgIGlmICghaW5kZXgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJLZXlQYXRoIFwiICsgY3R4LmluZGV4ICsgXCIgb24gb2JqZWN0IHN0b3JlIFwiICsgY29yZVNjaGVtYS5uYW1lICsgXCIgaXMgbm90IGluZGV4ZWRcIik7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgdHJhbnMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgY29yZVRhYmxlLnNjaGVtYSk7XG4gICAgICAgIHJldHVybiBjb3JlVGFibGUub3BlbkN1cnNvcih7XG4gICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICB2YWx1ZXM6ICFjdHgua2V5c09ubHksXG4gICAgICAgICAgICByZXZlcnNlOiBjdHguZGlyID09PSAncHJldicsXG4gICAgICAgICAgICB1bmlxdWU6ICEhY3R4LnVuaXF1ZSxcbiAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGl0ZXIoY3R4LCBmbiwgY29yZVRyYW5zLCBjb3JlVGFibGUpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9IGN0eC5yZXBsYXlGaWx0ZXIgPyBjb21iaW5lKGN0eC5maWx0ZXIsIGN0eC5yZXBsYXlGaWx0ZXIoKSkgOiBjdHguZmlsdGVyO1xuICAgICAgICBpZiAoIWN0eC5vcikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGUob3BlbkN1cnNvcihjdHgsIGNvcmVUYWJsZSwgY29yZVRyYW5zKSwgY29tYmluZShjdHguYWxnb3JpdGhtLCBmaWx0ZXIpLCBmbiwgIWN0eC5rZXlzT25seSAmJiBjdHgudmFsdWVNYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNldF8xID0ge307XG4gICAgICAgICAgICB2YXIgdW5pb24gPSBmdW5jdGlvbiAoaXRlbSwgY3Vyc29yLCBhZHZhbmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKGN1cnNvciwgYWR2YW5jZSwgZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gY3Vyc29yLnN0b3AocmVzdWx0KTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gY3Vyc29yLmZhaWwoZXJyKTsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1hcnlLZXkgPSBjdXJzb3IucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnICsgcHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9ICcnICsgbmV3IFVpbnQ4QXJyYXkocHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzT3duKHNldF8xLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfMVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKGl0ZW0sIGN1cnNvciwgYWR2YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICBjdHgub3IuX2l0ZXJhdGUodW5pb24sIGNvcmVUcmFucyksXG4gICAgICAgICAgICAgICAgaXRlcmF0ZShvcGVuQ3Vyc29yKGN0eCwgY29yZVRhYmxlLCBjb3JlVHJhbnMpLCBjdHguYWxnb3JpdGhtLCB1bmlvbiwgIWN0eC5rZXlzT25seSAmJiBjdHgudmFsdWVNYXBwZXIpXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpdGVyYXRlKGN1cnNvclByb21pc2UsIGZpbHRlciwgZm4sIHZhbHVlTWFwcGVyKSB7XG4gICAgICAgIHZhciBtYXBwZWRGbiA9IHZhbHVlTWFwcGVyID8gZnVuY3Rpb24gKHgsIGMsIGEpIHsgcmV0dXJuIGZuKHZhbHVlTWFwcGVyKHgpLCBjLCBhKTsgfSA6IGZuO1xuICAgICAgICB2YXIgd3JhcHBlZEZuID0gd3JhcChtYXBwZWRGbik7XG4gICAgICAgIHJldHVybiBjdXJzb3JQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJzb3Iuc3RhcnQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnNvci5jb250aW51ZSgpOyB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlciB8fCBmaWx0ZXIoY3Vyc29yLCBmdW5jdGlvbiAoYWR2YW5jZXIpIHsgcmV0dXJuIGMgPSBhZHZhbmNlcjsgfSwgZnVuY3Rpb24gKHZhbCkgeyBjdXJzb3Iuc3RvcCh2YWwpOyBjID0gbm9wOyB9LCBmdW5jdGlvbiAoZSkgeyBjdXJzb3IuZmFpbChlKTsgYyA9IG5vcDsgfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVkRm4oY3Vyc29yLnZhbHVlLCBjdXJzb3IsIGZ1bmN0aW9uIChhZHZhbmNlcikgeyByZXR1cm4gYyA9IGFkdmFuY2VyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgUHJvcE1vZGlmaWNhdGlvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQcm9wTW9kaWZpY2F0aW9uKHNwZWMpIHtcbiAgICAgICAgICAgIHRoaXNbXCJAQHByb3Btb2RcIl0gPSBzcGVjO1xuICAgICAgICB9XG4gICAgICAgIFByb3BNb2RpZmljYXRpb24ucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBzcGVjID0gdGhpc1tcIkBAcHJvcG1vZFwiXTtcbiAgICAgICAgICAgIGlmIChzcGVjLmFkZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBzcGVjLmFkZDtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh0ZXJtKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdKSwgdHJ1ZSksIHRlcm0sIHRydWUpLnNvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChOdW1iZXIodmFsdWUpIHx8IDApICsgdGVybTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlcm0gPT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KHZhbHVlKSArIHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KDApICsgdGVybTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0ZXJtIFwiLmNvbmNhdCh0ZXJtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3BlYy5yZW1vdmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJ0cmFoZW5kXzEgPSBzcGVjLnJlbW92ZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShzdWJ0cmFoZW5kXzEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gIXN1YnRyYWhlbmRfMS5pbmNsdWRlcyhpdGVtKTsgfSkuc29ydCgpIDogW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VidHJhaGVuZF8xID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJ0cmFoZW5kXzEgPT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmlnSW50KHZhbHVlKSAtIHN1YnRyYWhlbmRfMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCaWdJbnQoMCkgLSBzdWJ0cmFoZW5kXzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3VidHJhaGVuZCBcIi5jb25jYXQoc3VidHJhaGVuZF8xKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJlZml4VG9SZXBsYWNlID0gKF9hID0gc3BlYy5yZXBsYWNlUHJlZml4KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF07XG4gICAgICAgICAgICBpZiAocHJlZml4VG9SZXBsYWNlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuc3RhcnRzV2l0aChwcmVmaXhUb1JlcGxhY2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwZWMucmVwbGFjZVByZWZpeFsxXSArIHZhbHVlLnN1YnN0cmluZyhwcmVmaXhUb1JlcGxhY2UubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb3BNb2RpZmljYXRpb247XG4gICAgfSgpKTtcblxuICAgIHZhciBDb2xsZWN0aW9uID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAoZm4sIGNiKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5lcnJvciA/XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucyhudWxsLCByZWplY3Rpb24uYmluZChudWxsLCBjdHguZXJyb3IpKSA6XG4gICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucygncmVhZG9ubHknLCBmbikudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiBjdHguZXJyb3IgP1xuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgcmVqZWN0aW9uLmJpbmQobnVsbCwgY3R4LmVycm9yKSkgOlxuICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMoJ3JlYWR3cml0ZScsIGZuLCBcImxvY2tlZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX2FkZEFsZ29yaXRobSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIGN0eC5hbGdvcml0aG0gPSBjb21iaW5lKGN0eC5hbGdvcml0aG0sIGZuKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX2l0ZXJhdGUgPSBmdW5jdGlvbiAoZm4sIGNvcmVUcmFucykge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZXIodGhpcy5fY3R4LCBmbiwgY29yZVRyYW5zLCB0aGlzLl9jdHgudGFibGUuY29yZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICAgICAgICB2YXIgcnYgPSBPYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlKSwgY3R4ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLl9jdHgpO1xuICAgICAgICAgICAgaWYgKHByb3BzKVxuICAgICAgICAgICAgICAgIGV4dGVuZChjdHgsIHByb3BzKTtcbiAgICAgICAgICAgIHJ2Ll9jdHggPSBjdHg7XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC52YWx1ZU1hcHBlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaCA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gaXRlcihjdHgsIGZuLCB0cmFucywgY3R4LnRhYmxlLmNvcmUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gX3RoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICB2YXIgY29yZVRhYmxlID0gY3R4LnRhYmxlLmNvcmU7XG4gICAgICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlVGFibGUuY291bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZ2V0SW5kZXhPclN0b3JlKGN0eCwgY29yZVRhYmxlLnNjaGVtYSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb3VudCkgeyByZXR1cm4gTWF0aC5taW4oY291bnQsIGN0eC5saW1pdCk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7ICsrY291bnQ7IHJldHVybiBmYWxzZTsgfSwgdHJhbnMsIGNvcmVUYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc29ydEJ5ID0gZnVuY3Rpb24gKGtleVBhdGgsIGNiKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBrZXlQYXRoLnNwbGl0KCcuJykucmV2ZXJzZSgpLCBsYXN0UGFydCA9IHBhcnRzWzBdLCBsYXN0SW5kZXggPSBwYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0dmFsKG9iaiwgaSkge1xuICAgICAgICAgICAgICAgIGlmIChpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dmFsKG9ialtwYXJ0c1tpXV0sIGkgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2xhc3RQYXJ0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcmRlciA9IHRoaXMuX2N0eC5kaXIgPT09IFwibmV4dFwiID8gMSA6IC0xO1xuICAgICAgICAgICAgZnVuY3Rpb24gc29ydGVyKGEsIGIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYVZhbCA9IGdldHZhbChhLCBsYXN0SW5kZXgpLCBiVmFsID0gZ2V0dmFsKGIsIGxhc3RJbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNtcChhVmFsLCBiVmFsKSAqIG9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhLnNvcnQoc29ydGVyKTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IF90aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5kaXIgPT09ICduZXh0JyAmJiBpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSAmJiBjdHgubGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZU1hcHBlcl8xID0gY3R4LnZhbHVlTWFwcGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleE9yU3RvcmUoY3R4LCBjdHgudGFibGUuY29yZS5zY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUucXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IGN0eC5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBjdHgucmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVNYXBwZXJfMSA/IHJlc3VsdC5tYXAodmFsdWVNYXBwZXJfMSkgOiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFfMSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlcihjdHgsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBhXzEucHVzaChpdGVtKTsgfSwgdHJhbnMsIGN0eC50YWJsZS5jb3JlKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFfMTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgY3R4Lm9mZnNldCArPSBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoaXNQbGFpbktleVJhbmdlKGN0eCkpIHtcbiAgICAgICAgICAgICAgICBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0TGVmdCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tb2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShvZmZzZXRMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKGN0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuICgtLW9mZnNldExlZnQgPCAwKTsgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uIChudW1Sb3dzKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgubGltaXQgPSBNYXRoLm1pbih0aGlzLl9jdHgubGltaXQsIG51bVJvd3MpO1xuICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzTGVmdCA9IG51bVJvd3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcm93c0xlZnQgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dzTGVmdCA+PSAwO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51bnRpbCA9IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbiwgYkluY2x1ZGVTdG9wRW50cnkpIHtcbiAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyRnVuY3Rpb24oY3Vyc29yLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYkluY2x1ZGVTdG9wRW50cnk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoMSkudG9BcnJheShmdW5jdGlvbiAoYSkgeyByZXR1cm4gYVswXTsgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdChjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGdW5jdGlvbihjdXJzb3IudmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhZGRNYXRjaEZpbHRlcih0aGlzLl9jdHgsIGZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZmlsdGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiAoaW5kZXhOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuZGIuV2hlcmVDbGF1c2UodGhpcy5fY3R4LnRhYmxlLCBpbmRleE5hbWUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmRpciA9ICh0aGlzLl9jdHguZGlyID09PSBcInByZXZcIiA/IFwibmV4dFwiIDogXCJwcmV2XCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29uZGlyZWN0aW9uY2hhbmdlKVxuICAgICAgICAgICAgICAgIHRoaXMuX29uZGlyZWN0aW9uY2hhbmdlKHRoaXMuX2N0eC5kaXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRlc2MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2hLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2YWwsIGN1cnNvcikgeyBjYihjdXJzb3Iua2V5LCBjdXJzb3IpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaFVuaXF1ZUtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdGhpcy5fY3R4LnVuaXF1ZSA9IFwidW5pcXVlXCI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoS2V5KGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZWFjaFByaW1hcnlLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2YWwsIGN1cnNvcikgeyBjYihjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucHJpbWFyeUtleXMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICBpZiAoY3R4LmRpciA9PT0gJ25leHQnICYmIGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpICYmIGN0eC5saW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgY3R4LnRhYmxlLmNvcmUuc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLnF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogY3R4LmxpbWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IGN0eC5yYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX2EucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKGl0ZW0sIGN1cnNvcikge1xuICAgICAgICAgICAgICAgIGEucHVzaChjdXJzb3IucHJpbWFyeUtleSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51bmlxdWVLZXlzID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgudW5pcXVlID0gXCJ1bmlxdWVcIjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleXMoY2IpO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdEtleSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoMSkua2V5cyhmdW5jdGlvbiAoYSkgeyByZXR1cm4gYVswXTsgfSkudGhlbihjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmxhc3RLZXkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdEtleShjYik7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRpc3RpbmN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eCwgaWR4ID0gY3R4LmluZGV4ICYmIGN0eC50YWJsZS5zY2hlbWEuaWR4QnlOYW1lW2N0eC5pbmRleF07XG4gICAgICAgICAgICBpZiAoIWlkeCB8fCAhaWR4Lm11bHRpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgdmFyIHNldCA9IHt9O1xuICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvcikge1xuICAgICAgICAgICAgICAgIHZhciBzdHJLZXkgPSBjdXJzb3IucHJpbWFyeUtleS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGhhc093bihzZXQsIHN0cktleSk7XG4gICAgICAgICAgICAgICAgc2V0W3N0cktleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZm91bmQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tb2RpZnkgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGlmeWVyO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hhbmdlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBtb2RpZnllciA9IGNoYW5nZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aHMgPSBrZXlzKGNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtS2V5cyA9IGtleVBhdGhzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFueXRoaW5nTW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtS2V5czsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBrZXlQYXRoc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gY2hhbmdlc1trZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1ZhbCA9IGdldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgUHJvcE1vZGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCwgdmFsLmV4ZWN1dGUob3JpZ1ZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3JpZ1ZhbCAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW55dGhpbmdNb2RpZmllZDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvcmVUYWJsZSA9IGN0eC50YWJsZS5jb3JlO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IGNvcmVUYWJsZS5zY2hlbWEucHJpbWFyeUtleSwgb3V0Ym91bmQgPSBfYS5vdXRib3VuZCwgZXh0cmFjdEtleSA9IF9hLmV4dHJhY3RLZXk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbWl0ID0gMjAwO1xuICAgICAgICAgICAgICAgIHZhciBtb2RpZnlDaHVua1NpemUgPSBfdGhpcy5kYi5fb3B0aW9ucy5tb2RpZnlDaHVua1NpemU7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmeUNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGlmeUNodW5rU2l6ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQgPSBtb2RpZnlDaHVua1NpemVbY29yZVRhYmxlLm5hbWVdIHx8IG1vZGlmeUNodW5rU2l6ZVsnKiddIHx8IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ID0gbW9kaWZ5Q2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0b3RhbEZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGZhaWxlZEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXBwbHlNdXRhdGVSZXN1bHQgPSBmdW5jdGlvbiAoZXhwZWN0ZWRDb3VudCwgcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IHJlcy5mYWlsdXJlcywgbnVtRmFpbHVyZXMgPSByZXMubnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCArPSBleHBlY3RlZENvdW50IC0gbnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBrZXlzKGZhaWx1cmVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEZhaWx1cmVzLnB1c2goZmFpbHVyZXNbcG9zXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBpc1VuY29uZGl0aW9uYWxEZWxldGUgPSBjaGFuZ2VzID09PSBkZWxldGVDYWxsYmFjaztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvbmUoKS5wcmltYXJ5S2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNyaXRlcmlhID0gaXNQbGFpbktleVJhbmdlKGN0eCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW1pdCA9PT0gSW5maW5pdHkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgY2hhbmdlcyAhPT0gJ2Z1bmN0aW9uJyB8fCBpc1VuY29uZGl0aW9uYWxEZWxldGUpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBjdHguaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogY3R4LnJhbmdlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Q2h1bmsgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBNYXRoLm1pbihsaW1pdCwga2V5cy5sZW5ndGggLSBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXNJbkNodW5rID0ga2V5cy5zbGljZShvZmZzZXQsIG9mZnNldCArIGNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaXNVbmNvbmRpdGlvbmFsRGVsZXRlID8gUHJvbWlzZS5yZXNvbHZlKFtdKSA6IGNvcmVUYWJsZS5nZXRNYW55KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czoga2V5c0luQ2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IFwiaW1tdXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkVmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB1dFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwdXRLZXlzID0gb3V0Ym91bmQgPyBbXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGV0ZUtleXMgPSBpc1VuY29uZGl0aW9uYWxEZWxldGUgPyBrZXlzSW5DaHVuayA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNVbmNvbmRpdGlvbmFsRGVsZXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnVmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4XzEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZXBDbG9uZShvcmlnVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1LZXk6IGtleXNbb2Zmc2V0ICsgaV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZ5ZXIuY2FsbChjdHhfMSwgY3R4XzEudmFsdWUsIGN0eF8xKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4XzEudmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVLZXlzLnB1c2goa2V5c1tvZmZzZXQgKyBpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvdXRib3VuZCAmJiBjbXAoZXh0cmFjdEtleShvcmlnVmFsdWUpLCBleHRyYWN0S2V5KGN0eF8xLnZhbHVlKSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlS2V5cy5wdXNoKGtleXNbb2Zmc2V0ICsgaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRWYWx1ZXMucHVzaChjdHhfMS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXRWYWx1ZXMucHVzaChjdHhfMS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRib3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dEtleXMucHVzaChrZXlzW29mZnNldCArIGldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFkZFZhbHVlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcmVUYWJsZS5tdXRhdGUoeyB0cmFuczogdHJhbnMsIHR5cGU6ICdhZGQnLCB2YWx1ZXM6IGFkZFZhbHVlcyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcG9zIGluIHJlcy5mYWlsdXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUtleXMuc3BsaWNlKHBhcnNlSW50KHBvcyksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlNdXRhdGVSZXN1bHQoYWRkVmFsdWVzLmxlbmd0aCwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHB1dFZhbHVlcy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiB0eXBlb2YgY2hhbmdlcyA9PT0gJ29iamVjdCcpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogcHV0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcHV0VmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWE6IGNyaXRlcmlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3BlYzogdHlwZW9mIGNoYW5nZXMgIT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBjaGFuZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGRpdGlvbmFsQ2h1bms6IG9mZnNldCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChwdXRWYWx1ZXMubGVuZ3RoLCByZXMpOyB9KTsgfSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiAoZGVsZXRlS2V5cy5sZW5ndGggPiAwIHx8IChjcml0ZXJpYSAmJiBpc1VuY29uZGl0aW9uYWxEZWxldGUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlVGFibGUubXV0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zOiB0cmFucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZGVsZXRlS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBjcml0ZXJpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkaXRpb25hbENodW5rOiBvZmZzZXQgPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gYnVpbHRJbkRlbGV0aW9uVHJpZ2dlcihjdHgudGFibGUsIGRlbGV0ZUtleXMsIHJlcyk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBhcHBseU11dGF0ZVJlc3VsdChkZWxldGVLZXlzLmxlbmd0aCwgcmVzKTsgfSk7IH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiBvZmZzZXQgKyBjb3VudCAmJiBuZXh0Q2h1bmsob2Zmc2V0ICsgbGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0Q2h1bmsoMCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxGYWlsdXJlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RpZnlFcnJvcihcIkVycm9yIG1vZGlmeWluZyBvbmUgb3IgbW9yZSBvYmplY3RzXCIsIHRvdGFsRmFpbHVyZXMsIHN1Y2Nlc3NDb3VudCwgZmFpbGVkS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHgsIHJhbmdlID0gY3R4LnJhbmdlO1xuICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgpICYmXG4gICAgICAgICAgICAgICAgIWN0eC50YWJsZS5zY2hlbWEueVByb3BzICYmXG4gICAgICAgICAgICAgICAgKGN0eC5pc1ByaW1LZXkgfHwgcmFuZ2UudHlwZSA9PT0gMyApKVxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3R4LnRhYmxlLmNvcmUuc2NoZW1hLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3JlUmFuZ2UgPSByYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC50YWJsZS5jb3JlLmNvdW50KHsgdHJhbnM6IHRyYW5zLCBxdWVyeTogeyBpbmRleDogcHJpbWFyeUtleSwgcmFuZ2U6IGNvcmVSYW5nZSB9IH0pLnRoZW4oZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnRhYmxlLmNvcmUubXV0YXRlKHsgdHJhbnM6IHRyYW5zLCB0eXBlOiAnZGVsZXRlUmFuZ2UnLCByYW5nZTogY29yZVJhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gX2EuZmFpbHVyZXMsIG51bUZhaWx1cmVzID0gX2EubnVtRmFpbHVyZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bUZhaWx1cmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kaWZ5RXJyb3IoXCJDb3VsZCBub3QgZGVsZXRlIHNvbWUgdmFsdWVzXCIsIE9iamVjdC5rZXlzKGZhaWx1cmVzKS5tYXAoZnVuY3Rpb24gKHBvcykgeyByZXR1cm4gZmFpbHVyZXNbcG9zXTsgfSksIGNvdW50IC0gbnVtRmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCAtIG51bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kaWZ5KGRlbGV0ZUNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb247XG4gICAgfSgpKTtcbiAgICB2YXIgZGVsZXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodmFsdWUsIGN0eCkgeyByZXR1cm4gY3R4LnZhbHVlID0gbnVsbDsgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbGxlY3Rpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoQ29sbGVjdGlvbi5wcm90b3R5cGUsIGZ1bmN0aW9uIENvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGtleVJhbmdlR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB2YXIga2V5UmFuZ2UgPSBBbnlSYW5nZSwgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGtleVJhbmdlR2VuZXJhdG9yKVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGtleVJhbmdlID0ga2V5UmFuZ2VHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdoZXJlQ3R4ID0gd2hlcmVDbGF1c2UuX2N0eDtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHdoZXJlQ3R4LnRhYmxlO1xuICAgICAgICAgICAgdmFyIHJlYWRpbmdIb29rID0gdGFibGUuaG9vay5yZWFkaW5nLmZpcmU7XG4gICAgICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlLFxuICAgICAgICAgICAgICAgIGluZGV4OiB3aGVyZUN0eC5pbmRleCxcbiAgICAgICAgICAgICAgICBpc1ByaW1LZXk6ICghd2hlcmVDdHguaW5kZXggfHwgKHRhYmxlLnNjaGVtYS5wcmltS2V5LmtleVBhdGggJiYgd2hlcmVDdHguaW5kZXggPT09IHRhYmxlLnNjaGVtYS5wcmltS2V5Lm5hbWUpKSxcbiAgICAgICAgICAgICAgICByYW5nZToga2V5UmFuZ2UsXG4gICAgICAgICAgICAgICAga2V5c09ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRpcjogXCJuZXh0XCIsXG4gICAgICAgICAgICAgICAgdW5pcXVlOiBcIlwiLFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobTogbnVsbCxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVwbGF5RmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGp1c3RMaW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc01hdGNoOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgICAgICBsaW1pdDogSW5maW5pdHksXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIG9yOiB3aGVyZUN0eC5vcixcbiAgICAgICAgICAgICAgICB2YWx1ZU1hcHBlcjogcmVhZGluZ0hvb2sgIT09IG1pcnJvciA/IHJlYWRpbmdIb29rIDogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2ltcGxlQ29tcGFyZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaW1wbGVDb21wYXJlUmV2ZXJzZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZhaWwoY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UsIGVyciwgVCkge1xuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlIGluc3RhbmNlb2YgV2hlcmVDbGF1c2UgP1xuICAgICAgICAgICAgbmV3IGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlLkNvbGxlY3Rpb24oY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UpIDpcbiAgICAgICAgICAgIGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlO1xuICAgICAgICBjb2xsZWN0aW9uLl9jdHguZXJyb3IgPSBUID8gbmV3IFQoZXJyKSA6IG5ldyBUeXBlRXJyb3IoZXJyKTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVtcHR5Q29sbGVjdGlvbih3aGVyZUNsYXVzZSkge1xuICAgICAgICByZXR1cm4gbmV3IHdoZXJlQ2xhdXNlLkNvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJhbmdlRXF1YWwoXCJcIik7IH0pLmxpbWl0KDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cHBlckZhY3RvcnkoZGlyKSB7XG4gICAgICAgIHJldHVybiBkaXIgPT09IFwibmV4dFwiID9cbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvVXBwZXJDYXNlKCk7IH0gOlxuICAgICAgICAgICAgZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTsgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG93ZXJGYWN0b3J5KGRpcikge1xuICAgICAgICByZXR1cm4gZGlyID09PSBcIm5leHRcIiA/XG4gICAgICAgICAgICBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b0xvd2VyQ2FzZSgpOyB9IDpcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvVXBwZXJDYXNlKCk7IH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGUsIGxvd2VyTmVlZGxlLCBjbXAsIGRpcikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oa2V5Lmxlbmd0aCwgbG93ZXJOZWVkbGUubGVuZ3RoKTtcbiAgICAgICAgdmFyIGxscCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbHdyS2V5Q2hhciA9IGxvd2VyS2V5W2ldO1xuICAgICAgICAgICAgaWYgKGx3cktleUNoYXIgIT09IGxvd2VyTmVlZGxlW2ldKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIHVwcGVyTmVlZGxlW2ldKSA8IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGkpICsgdXBwZXJOZWVkbGVbaV0gKyB1cHBlck5lZWRsZS5zdWJzdHIoaSArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCBsb3dlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBpKSArIGxvd2VyTmVlZGxlW2ldICsgdXBwZXJOZWVkbGUuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAobGxwID49IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGxscCkgKyBsb3dlcktleVtsbHBdICsgdXBwZXJOZWVkbGUuc3Vic3RyKGxscCArIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIGx3cktleUNoYXIpIDwgMClcbiAgICAgICAgICAgICAgICBsbHAgPSBpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPCBsb3dlck5lZWRsZS5sZW5ndGggJiYgZGlyID09PSBcIm5leHRcIilcbiAgICAgICAgICAgIHJldHVybiBrZXkgKyB1cHBlck5lZWRsZS5zdWJzdHIoa2V5Lmxlbmd0aCk7XG4gICAgICAgIGlmIChsZW5ndGggPCBrZXkubGVuZ3RoICYmIGRpciA9PT0gXCJwcmV2XCIpXG4gICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCB1cHBlck5lZWRsZS5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gKGxscCA8IDAgPyBudWxsIDoga2V5LnN1YnN0cigwLCBsbHApICsgbG93ZXJOZWVkbGVbbGxwXSArIHVwcGVyTmVlZGxlLnN1YnN0cihsbHAgKyAxKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZElnbm9yZUNhc2VBbGdvcml0aG0od2hlcmVDbGF1c2UsIG1hdGNoLCBuZWVkbGVzLCBzdWZmaXgpIHtcbiAgICAgICAgdmFyIHVwcGVyLCBsb3dlciwgY29tcGFyZSwgdXBwZXJOZWVkbGVzLCBsb3dlck5lZWRsZXMsIGRpcmVjdGlvbiwgbmV4dEtleVN1ZmZpeCwgbmVlZGxlc0xlbiA9IG5lZWRsZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIW5lZWRsZXMuZXZlcnkoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHR5cGVvZiBzID09PSAnc3RyaW5nJzsgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKHdoZXJlQ2xhdXNlLCBTVFJJTkdfRVhQRUNURUQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGluaXREaXJlY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICB1cHBlciA9IHVwcGVyRmFjdG9yeShkaXIpO1xuICAgICAgICAgICAgbG93ZXIgPSBsb3dlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgIGNvbXBhcmUgPSAoZGlyID09PSBcIm5leHRcIiA/IHNpbXBsZUNvbXBhcmUgOiBzaW1wbGVDb21wYXJlUmV2ZXJzZSk7XG4gICAgICAgICAgICB2YXIgbmVlZGxlQm91bmRzID0gbmVlZGxlcy5tYXAoZnVuY3Rpb24gKG5lZWRsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGxvd2VyOiBsb3dlcihuZWVkbGUpLCB1cHBlcjogdXBwZXIobmVlZGxlKSB9O1xuICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlKGEubG93ZXIsIGIubG93ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cHBlck5lZWRsZXMgPSBuZWVkbGVCb3VuZHMubWFwKGZ1bmN0aW9uIChuYikgeyByZXR1cm4gbmIudXBwZXI7IH0pO1xuICAgICAgICAgICAgbG93ZXJOZWVkbGVzID0gbmVlZGxlQm91bmRzLm1hcChmdW5jdGlvbiAobmIpIHsgcmV0dXJuIG5iLmxvd2VyOyB9KTtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcjtcbiAgICAgICAgICAgIG5leHRLZXlTdWZmaXggPSAoZGlyID09PSBcIm5leHRcIiA/IFwiXCIgOiBzdWZmaXgpO1xuICAgICAgICB9XG4gICAgICAgIGluaXREaXJlY3Rpb24oXCJuZXh0XCIpO1xuICAgICAgICB2YXIgYyA9IG5ldyB3aGVyZUNsYXVzZS5Db2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1cHBlck5lZWRsZXNbMF0sIGxvd2VyTmVlZGxlc1tuZWVkbGVzTGVuIC0gMV0gKyBzdWZmaXgpOyB9KTtcbiAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpbml0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmaXJzdFBvc3NpYmxlTmVlZGxlID0gMDtcbiAgICAgICAgYy5fYWRkQWxnb3JpdGhtKGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsb3dlcktleSA9IGxvd2VyKGtleSk7XG4gICAgICAgICAgICBpZiAobWF0Y2gobG93ZXJLZXksIGxvd2VyTmVlZGxlcywgZmlyc3RQb3NzaWJsZU5lZWRsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsb3dlc3RQb3NzaWJsZUNhc2luZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0UG9zc2libGVOZWVkbGU7IGkgPCBuZWVkbGVzTGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhc2luZyA9IG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGVzW2ldLCBsb3dlck5lZWRsZXNbaV0sIGNvbXBhcmUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXNpbmcgPT09IG51bGwgJiYgbG93ZXN0UG9zc2libGVDYXNpbmcgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFBvc3NpYmxlTmVlZGxlID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsIHx8IGNvbXBhcmUobG93ZXN0UG9zc2libGVDYXNpbmcsIGNhc2luZykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlc3RQb3NzaWJsZUNhc2luZyA9IGNhc2luZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG93ZXN0UG9zc2libGVDYXNpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7IGN1cnNvci5jb250aW51ZShsb3dlc3RQb3NzaWJsZUNhc2luZyArIG5leHRLZXlTdWZmaXgpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVSYW5nZShsb3dlciwgdXBwZXIsIGxvd2VyT3BlbiwgdXBwZXJPcGVuKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAyICxcbiAgICAgICAgICAgIGxvd2VyOiBsb3dlcixcbiAgICAgICAgICAgIHVwcGVyOiB1cHBlcixcbiAgICAgICAgICAgIGxvd2VyT3BlbjogbG93ZXJPcGVuLFxuICAgICAgICAgICAgdXBwZXJPcGVuOiB1cHBlck9wZW5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmFuZ2VFcXVhbCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogMSAsXG4gICAgICAgICAgICBsb3dlcjogdmFsdWUsXG4gICAgICAgICAgICB1cHBlcjogdmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgV2hlcmVDbGF1c2UgPSAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gV2hlcmVDbGF1c2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdoZXJlQ2xhdXNlLnByb3RvdHlwZSwgXCJDb2xsZWN0aW9uXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdHgudGFibGUuZGIuQ29sbGVjdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAobG93ZXIsIHVwcGVyLCBpbmNsdWRlTG93ZXIsIGluY2x1ZGVVcHBlcikge1xuICAgICAgICAgICAgaW5jbHVkZUxvd2VyID0gaW5jbHVkZUxvd2VyICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGluY2x1ZGVVcHBlciA9IGluY2x1ZGVVcHBlciA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLl9jbXAobG93ZXIsIHVwcGVyKSA+IDApIHx8XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLl9jbXAobG93ZXIsIHVwcGVyKSA9PT0gMCAmJiAoaW5jbHVkZUxvd2VyIHx8IGluY2x1ZGVVcHBlcikgJiYgIShpbmNsdWRlTG93ZXIgJiYgaW5jbHVkZVVwcGVyKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UobG93ZXIsIHVwcGVyLCAhaW5jbHVkZUxvd2VyLCAhaW5jbHVkZVVwcGVyKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmFuZ2VFcXVhbCh2YWx1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYWJvdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHZhbHVlLCB1bmRlZmluZWQsIHRydWUpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFib3ZlT3JFcXVhbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2UodmFsdWUsIHVuZGVmaW5lZCwgZmFsc2UpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmJlbG93ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1bmRlZmluZWQsIHZhbHVlLCBmYWxzZSwgdHJ1ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYmVsb3dPckVxdWFsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVSYW5nZSh1bmRlZmluZWQsIHZhbHVlKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFNUUklOR19FWFBFQ1RFRCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iZXR3ZWVuKHN0ciwgc3RyICsgbWF4U3RyaW5nLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhJZ25vcmVDYXNlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgaWYgKHN0ciA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydHNXaXRoKHN0cik7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4geC5pbmRleE9mKGFbMF0pID09PSAwOyB9LCBbc3RyXSwgbWF4U3RyaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmVxdWFsc0lnbm9yZUNhc2UgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4geCA9PT0gYVswXTsgfSwgW3N0cl0sIFwiXCIpO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuYW55T2ZJZ25vcmVDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4gYS5pbmRleE9mKHgpICE9PSAtMTsgfSwgc2V0LCBcIlwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhBbnlPZklnbm9yZUNhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHRoaXMsIGZ1bmN0aW9uICh4LCBhKSB7IHJldHVybiBhLnNvbWUoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIHguaW5kZXhPZihuKSA9PT0gMDsgfSk7IH0sIHNldCwgbWF4U3RyaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLmFueU9mID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB2YXIgY29tcGFyZSA9IHRoaXMuX2NtcDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc2V0LnNvcnQoY29tcGFyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB2YXIgYyA9IG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlUmFuZ2Uoc2V0WzBdLCBzZXRbc2V0Lmxlbmd0aCAtIDFdKTsgfSk7XG4gICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb21wYXJlID0gKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIgP1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYXNjZW5kaW5nIDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Rlc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoa2V5LCBzZXRbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBzZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlKGtleSwgc2V0W2ldKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUoc2V0W2ldKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUubm90RXF1YWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2UoW1ttaW5LZXksIHZhbHVlXSwgW3ZhbHVlLCB0aGlzLmRiLl9tYXhLZXldXSwgeyBpbmNsdWRlTG93ZXJzOiBmYWxzZSwgaW5jbHVkZVVwcGVyczogZmFsc2UgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFdoZXJlQ2xhdXNlLnByb3RvdHlwZS5ub25lT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHNldC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNldC5zb3J0KHRoaXMuX2FzY2VuZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByYW5nZXMgPSBzZXQucmVkdWNlKGZ1bmN0aW9uIChyZXMsIHZhbCkgeyByZXR1cm4gcmVzID9cbiAgICAgICAgICAgICAgICByZXMuY29uY2F0KFtbcmVzW3Jlcy5sZW5ndGggLSAxXVsxXSwgdmFsXV0pIDpcbiAgICAgICAgICAgICAgICBbW21pbktleSwgdmFsXV07IH0sIG51bGwpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goW3NldFtzZXQubGVuZ3RoIC0gMV0sIHRoaXMuZGIuX21heEtleV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShyYW5nZXMsIHsgaW5jbHVkZUxvd2VyczogZmFsc2UsIGluY2x1ZGVVcHBlcnM6IGZhbHNlIH0pO1xuICAgICAgICB9O1xuICAgICAgICBXaGVyZUNsYXVzZS5wcm90b3R5cGUuaW5BbnlSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5fY21wLCBhc2NlbmRpbmcgPSB0aGlzLl9hc2NlbmRpbmcsIGRlc2NlbmRpbmcgPSB0aGlzLl9kZXNjZW5kaW5nLCBtaW4gPSB0aGlzLl9taW4sIG1heCA9IHRoaXMuX21heDtcbiAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICBpZiAoIXJhbmdlcy5ldmVyeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VbMF0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIGFzY2VuZGluZyhyYW5nZVswXSwgcmFuZ2VbMV0pIDw9IDA7XG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwiRmlyc3QgYXJndW1lbnQgdG8gaW5BbnlSYW5nZSgpIG11c3QgYmUgYW4gQXJyYXkgb2YgdHdvLXZhbHVlIEFycmF5cyBbbG93ZXIsdXBwZXJdIHdoZXJlIHVwcGVyIG11c3Qgbm90IGJlIGxvd2VyIHRoYW4gbG93ZXJcIiwgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluY2x1ZGVMb3dlcnMgPSAhb3B0aW9ucyB8fCBvcHRpb25zLmluY2x1ZGVMb3dlcnMgIT09IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVVcHBlcnMgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZVVwcGVycyA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFJhbmdlKHJhbmdlcywgbmV3UmFuZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsIGwgPSByYW5nZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcChuZXdSYW5nZVswXSwgcmFuZ2VbMV0pIDwgMCAmJiBjbXAobmV3UmFuZ2VbMV0sIHJhbmdlWzBdKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlWzBdID0gbWluKHJhbmdlWzBdLCBuZXdSYW5nZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSA9IG1heChyYW5nZVsxXSwgbmV3UmFuZ2VbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IGwpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKG5ld1JhbmdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvcnREaXJlY3Rpb24gPSBhc2NlbmRpbmc7XG4gICAgICAgICAgICBmdW5jdGlvbiByYW5nZVNvcnRlcihhLCBiKSB7IHJldHVybiBzb3J0RGlyZWN0aW9uKGFbMF0sIGJbMF0pOyB9XG4gICAgICAgICAgICB2YXIgc2V0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzZXQgPSByYW5nZXMucmVkdWNlKGFkZFJhbmdlLCBbXSk7XG4gICAgICAgICAgICAgICAgc2V0LnNvcnQocmFuZ2VTb3J0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhbmdlUG9zID0gMDtcbiAgICAgICAgICAgIHZhciBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeSA9IGluY2x1ZGVVcHBlcnMgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtyYW5nZVBvc11bMV0pID4gMDsgfSA6XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYXNjZW5kaW5nKGtleSwgc2V0W3JhbmdlUG9zXVsxXSkgPj0gMDsgfTtcbiAgICAgICAgICAgIHZhciBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeSA9IGluY2x1ZGVMb3dlcnMgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRlc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzBdKSA+IDA7IH0gOlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRlc2NlbmRpbmcoa2V5LCBzZXRbcmFuZ2VQb3NdWzBdKSA+PSAwOyB9O1xuICAgICAgICAgICAgZnVuY3Rpb24ga2V5V2l0aGluQ3VycmVudFJhbmdlKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAha2V5SXNCZXlvbmRDdXJyZW50RW50cnkoa2V5KSAmJiAha2V5SXNCZWZvcmVDdXJyZW50RW50cnkoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVja0tleSA9IGtleUlzQmV5b25kQ3VycmVudEVudHJ5O1xuICAgICAgICAgICAgdmFyIGMgPSBuZXcgdGhpcy5Db2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVJhbmdlKHNldFswXVswXSwgc2V0W3NldC5sZW5ndGggLSAxXVsxXSwgIWluY2x1ZGVMb3dlcnMsICFpbmNsdWRlVXBwZXJzKTsgfSk7XG4gICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBcIm5leHRcIikge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0tleSA9IGtleUlzQmV5b25kQ3VycmVudEVudHJ5O1xuICAgICAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IGRlc2NlbmRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjLl9hZGRBbGdvcml0aG0oZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjaGVja0tleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICsrcmFuZ2VQb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZVBvcyA9PT0gc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5V2l0aGluQ3VycmVudFJhbmdlKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLl9jbXAoa2V5LCBzZXRbcmFuZ2VQb3NdWzFdKSA9PT0gMCB8fCBfdGhpcy5fY21wKGtleSwgc2V0W3JhbmdlUG9zXVswXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ydERpcmVjdGlvbiA9PT0gYXNjZW5kaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShzZXRbcmFuZ2VQb3NdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoc2V0W3JhbmdlUG9zXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfTtcbiAgICAgICAgV2hlcmVDbGF1c2UucHJvdG90eXBlLnN0YXJ0c1dpdGhBbnlPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAoIXNldC5ldmVyeShmdW5jdGlvbiAocykgeyByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnOyB9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwic3RhcnRzV2l0aEFueU9mKCkgb25seSB3b3JrcyB3aXRoIHN0cmluZ3NcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShzZXQubWFwKGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIFtzdHIsIHN0ciArIG1heFN0cmluZ107IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFdoZXJlQ2xhdXNlO1xuICAgIH0oKSk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVXaGVyZUNsYXVzZUNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihXaGVyZUNsYXVzZS5wcm90b3R5cGUsIGZ1bmN0aW9uIFdoZXJlQ2xhdXNlKHRhYmxlLCBpbmRleCwgb3JDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCA9PT0gXCI6aWRcIiA/IG51bGwgOiBpbmRleCxcbiAgICAgICAgICAgICAgICBvcjogb3JDb2xsZWN0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fY21wID0gdGhpcy5fYXNjZW5kaW5nID0gY21wO1xuICAgICAgICAgICAgdGhpcy5fZGVzY2VuZGluZyA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjbXAoYiwgYSk7IH07XG4gICAgICAgICAgICB0aGlzLl9tYXggPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY21wKGEsIGIpID4gMCA/IGEgOiBiOyB9O1xuICAgICAgICAgICAgdGhpcy5fbWluID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfTtcbiAgICAgICAgICAgIHRoaXMuX0lEQktleVJhbmdlID0gZGIuX2RlcHMuSURCS2V5UmFuZ2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX0lEQktleVJhbmdlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCkge1xuICAgICAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgICAgIHJlamVjdChldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIHZhciBERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSA9ICdzdG9yYWdlbXV0YXRlZCc7XG4gICAgdmFyIFNUT1JBR0VfTVVUQVRFRF9ET01fRVZFTlRfTkFNRSA9ICd4LXN0b3JhZ2VtdXRhdGVkLTEnO1xuICAgIHZhciBnbG9iYWxFdmVudHMgPSBFdmVudHMobnVsbCwgREVYSUVfU1RPUkFHRV9NVVRBVEVEX0VWRU5UX05BTUUpO1xuXG4gICAgdmFyIFRyYW5zYWN0aW9uID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fbG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7XG4gICAgICAgICAgICArK3RoaXMuX3JlY3Vsb2NrO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlY3Vsb2NrID09PSAxICYmICFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgIFBTRC5sb2NrT3duZXJGb3IgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5fdW5sb2NrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYXNzZXJ0KCFQU0QuZ2xvYmFsKTtcbiAgICAgICAgICAgIGlmICgtLXRoaXMuX3JlY3Vsb2NrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgICAgICBQU0QubG9ja093bmVyRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fYmxvY2tlZEZ1bmNzLmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbkFuZFBTRCA9IHRoaXMuX2Jsb2NrZWRGdW5jcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlUFNEKGZuQW5kUFNEWzFdLCBmbkFuZFBTRFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX2xvY2tlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWN1bG9jayAmJiBQU0QubG9ja093bmVyRm9yICE9PSB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB2YXIgaWRiZGIgPSB0aGlzLmRiLmlkYmRiO1xuICAgICAgICAgICAgdmFyIGRiT3BlbkVycm9yID0gdGhpcy5kYi5fc3RhdGUuZGJPcGVuRXJyb3I7XG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMuaWRidHJhbnMpO1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucyAmJiAhaWRiZGIpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRiT3BlbkVycm9yICYmIGRiT3BlbkVycm9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRhdGFiYXNlQ2xvc2VkRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1pc3NpbmdBUElFcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSShkYk9wZW5FcnJvci5tZXNzYWdlLCBkYk9wZW5FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5PcGVuRmFpbGVkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlRyYW5zYWN0aW9uSW5hY3RpdmUoKTtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9jb21wbGV0aW9uLl9zdGF0ZSA9PT0gbnVsbCk7XG4gICAgICAgICAgICBpZGJ0cmFucyA9IHRoaXMuaWRidHJhbnMgPSBpZGJ0cmFucyB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmRiLmNvcmVcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRiLmNvcmUudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWVzLCB0aGlzLm1vZGUsIHsgZHVyYWJpbGl0eTogdGhpcy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHkgfSlcbiAgICAgICAgICAgICAgICAgICAgOiBpZGJkYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZXMsIHRoaXMubW9kZSwgeyBkdXJhYmlsaXR5OiB0aGlzLmNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSB9KSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmVycm9yID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3JlamVjdChpZGJ0cmFucy5lcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uYWJvcnQgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgJiYgX3RoaXMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydChpZGJ0cmFucy5lcnJvcikpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uKFwiYWJvcnRcIikuZmlyZShldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uY29tcGxldGUgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGlmICgnbXV0YXRlZFBhcnRzJyBpbiBpZGJ0cmFucykge1xuICAgICAgICAgICAgICAgICAgICBnbG9iYWxFdmVudHMuc3RvcmFnZW11dGF0ZWQuZmlyZShpZGJ0cmFuc1tcIm11dGF0ZWRQYXJ0c1wiXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLl9wcm9taXNlID0gZnVuY3Rpb24gKG1vZGUsIGZuLCBiV3JpdGVMb2NrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUnICYmIHRoaXMubW9kZSAhPT0gJ3JlYWR3cml0ZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5SZWFkT25seShcIlRyYW5zYWN0aW9uIGlzIHJlYWRvbmx5XCIpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYmxvY2tlZEZ1bmNzLnB1c2goW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcHJvbWlzZShtb2RlLCBmbiwgYldyaXRlTG9jaykudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgUFNEXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiV3JpdGVMb2NrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9sb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBmbihyZXNvbHZlLCByZWplY3QsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydiAmJiBydi50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ2LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHAuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fdW5sb2NrKCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBwLl9saWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IGZuKHJlc29sdmUsIHJlamVjdCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnYgJiYgcnYudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwLl9saWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuX3Jvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5fcm9vdCgpIDogdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLndhaXRGb3IgPSBmdW5jdGlvbiAocHJvbWlzZUxpa2UpIHtcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5fcm9vdCgpO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZShwcm9taXNlTGlrZSk7XG4gICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0Zvcikge1xuICAgICAgICAgICAgICAgIHJvb3QuX3dhaXRpbmdGb3IgPSByb290Ll93YWl0aW5nRm9yLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvbWlzZTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nUXVldWUgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSByb290LmlkYnRyYW5zLm9iamVjdFN0b3JlKHJvb3Quc3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHNwaW4oKSB7XG4gICAgICAgICAgICAgICAgICAgICsrcm9vdC5fc3BpbkNvdW50O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocm9vdC5fd2FpdGluZ1F1ZXVlLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIChyb290Ll93YWl0aW5nUXVldWUuc2hpZnQoKSkoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuX3dhaXRpbmdGb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5nZXQoLUluZmluaXR5KS5vbnN1Y2Nlc3MgPSBzcGluO1xuICAgICAgICAgICAgICAgIH0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudFdhaXRQcm9taXNlID0gcm9vdC5fd2FpdGluZ0ZvcjtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcm9vdC5fd2FpdGluZ1F1ZXVlLnB1c2god3JhcChyZXNvbHZlLmJpbmQobnVsbCwgcmVzKSkpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByb290Ll93YWl0aW5nUXVldWUucHVzaCh3cmFwKHJlamVjdC5iaW5kKG51bGwsIGVycikpKTsgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290Ll93YWl0aW5nRm9yID09PSBjdXJyZW50V2FpdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuX3dhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pZGJ0cmFucylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGJ0cmFucy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRhYmxlID0gZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIG1lbW9pemVkVGFibGVzID0gKHRoaXMuX21lbW9pemVkVGFibGVzIHx8ICh0aGlzLl9tZW1vaXplZFRhYmxlcyA9IHt9KSk7XG4gICAgICAgICAgICBpZiAoaGFzT3duKG1lbW9pemVkVGFibGVzLCB0YWJsZU5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBtZW1vaXplZFRhYmxlc1t0YWJsZU5hbWVdO1xuICAgICAgICAgICAgdmFyIHRhYmxlU2NoZW1hID0gdGhpcy5zY2hlbWFbdGFibGVOYW1lXTtcbiAgICAgICAgICAgIGlmICghdGFibGVTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5Ob3RGb3VuZChcIlRhYmxlIFwiICsgdGFibGVOYW1lICsgXCIgbm90IHBhcnQgb2YgdHJhbnNhY3Rpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb25Cb3VuZFRhYmxlID0gbmV3IHRoaXMuZGIuVGFibGUodGFibGVOYW1lLCB0YWJsZVNjaGVtYSwgdGhpcyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbkJvdW5kVGFibGUuY29yZSA9IHRoaXMuZGIuY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgbWVtb2l6ZWRUYWJsZXNbdGFibGVOYW1lXSA9IHRyYW5zYWN0aW9uQm91bmRUYWJsZTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkJvdW5kVGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUcmFuc2FjdGlvbjtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVHJhbnNhY3Rpb25Db25zdHJ1Y3RvcihkYikge1xuICAgICAgICByZXR1cm4gbWFrZUNsYXNzQ29uc3RydWN0b3IoVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBmdW5jdGlvbiBUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgY2hyb21lVHJhbnNhY3Rpb25EdXJhYmlsaXR5LCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAobW9kZSAhPT0gJ3JlYWRvbmx5JylcbiAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5UHJvcHMgPSAoX2EgPSBkYnNjaGVtYVtzdG9yZU5hbWVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EueVByb3BzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoeVByb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVOYW1lcyA9IHN0b3JlTmFtZXMuY29uY2F0KHlQcm9wcy5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAudXBkYXRlc1RhYmxlOyB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICAgICAgdGhpcy5zdG9yZU5hbWVzID0gc3RvcmVOYW1lcztcbiAgICAgICAgICAgIHRoaXMuc2NoZW1hID0gZGJzY2hlbWE7XG4gICAgICAgICAgICB0aGlzLmNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eSA9IGNocm9tZVRyYW5zYWN0aW9uRHVyYWJpbGl0eTtcbiAgICAgICAgICAgIHRoaXMuaWRidHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5vbiA9IEV2ZW50cyh0aGlzLCBcImNvbXBsZXRlXCIsIFwiZXJyb3JcIiwgXCJhYm9ydFwiKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9yZWN1bG9jayA9IDA7XG4gICAgICAgICAgICB0aGlzLl9ibG9ja2VkRnVuY3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3dhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fd2FpdGluZ1F1ZXVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NwaW5Db3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0aW9uID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZWplY3QgPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRpb24udGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMub24uY29tcGxldGUuZmlyZSgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2FzQWN0aXZlID0gX3RoaXMuYWN0aXZlO1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uLmVycm9yLmZpcmUoZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50ID9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Ll9yZWplY3QoZSkgOlxuICAgICAgICAgICAgICAgICAgICB3YXNBY3RpdmUgJiYgX3RoaXMuaWRidHJhbnMgJiYgX3RoaXMuaWRidHJhbnMuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluZGV4U3BlYyhuYW1lLCBrZXlQYXRoLCB1bmlxdWUsIG11bHRpLCBhdXRvLCBjb21wb3VuZCwgaXNQcmltS2V5LCB0eXBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAga2V5UGF0aDoga2V5UGF0aCxcbiAgICAgICAgICAgIHVuaXF1ZTogdW5pcXVlLFxuICAgICAgICAgICAgbXVsdGk6IG11bHRpLFxuICAgICAgICAgICAgYXV0bzogYXV0byxcbiAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgIHNyYzogKHVuaXF1ZSAmJiAhaXNQcmltS2V5ID8gJyYnIDogJycpICsgKG11bHRpID8gJyonIDogJycpICsgKGF1dG8gPyBcIisrXCIgOiBcIlwiKSArIG5hbWVGcm9tS2V5UGF0aChrZXlQYXRoKSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbmFtZUZyb21LZXlQYXRoKGtleVBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICBrZXlQYXRoIDpcbiAgICAgICAgICAgIGtleVBhdGggPyAoJ1snICsgW10uam9pbi5jYWxsKGtleVBhdGgsICcrJykgKyAnXScpIDogXCJcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZVNjaGVtYShuYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgcHJpbUtleTogcHJpbUtleSxcbiAgICAgICAgICAgIGluZGV4ZXM6IGluZGV4ZXMsXG4gICAgICAgICAgICBtYXBwZWRDbGFzczogbnVsbCxcbiAgICAgICAgICAgIGlkeEJ5TmFtZTogYXJyYXlUb09iamVjdChpbmRleGVzLCBmdW5jdGlvbiAoaW5kZXgpIHsgcmV0dXJuIFtpbmRleC5uYW1lLCBpbmRleF07IH0pLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhZmFyaU11bHRpU3RvcmVGaXgoc3RvcmVOYW1lcykge1xuICAgICAgICByZXR1cm4gc3RvcmVOYW1lcy5sZW5ndGggPT09IDEgPyBzdG9yZU5hbWVzWzBdIDogc3RvcmVOYW1lcztcbiAgICB9XG4gICAgdmFyIGdldE1heEtleSA9IGZ1bmN0aW9uIChJZGJLZXlSYW5nZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgSWRiS2V5UmFuZ2Uub25seShbW11dKTtcbiAgICAgICAgICAgIGdldE1heEtleSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtbXV07IH07XG4gICAgICAgICAgICByZXR1cm4gW1tdXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2V0TWF4S2V5ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF4U3RyaW5nOyB9O1xuICAgICAgICAgICAgcmV0dXJuIG1heFN0cmluZztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aCkge1xuICAgICAgICBpZiAoa2V5UGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGdldFNpbmdsZVBhdGhLZXlFeHRyYWN0b3Ioa2V5UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCk7IH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2luZ2xlUGF0aEtleUV4dHJhY3RvcihrZXlQYXRoKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGtleVBhdGguc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9ialtrZXlQYXRoXTsgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKTsgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5aWZ5KGFycmF5TGlrZSkge1xuICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChhcnJheUxpa2UpO1xuICAgIH1cbiAgICB2YXIgX2lkX2NvdW50ZXIgPSAwO1xuICAgIGZ1bmN0aW9uIGdldEtleVBhdGhBbGlhcyhrZXlQYXRoKSB7XG4gICAgICAgIHJldHVybiBrZXlQYXRoID09IG51bGwgP1xuICAgICAgICAgICAgXCI6aWRcIiA6XG4gICAgICAgICAgICB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgIGtleVBhdGggOlxuICAgICAgICAgICAgICAgIFwiW1wiLmNvbmNhdChrZXlQYXRoLmpvaW4oJysnKSwgXCJdXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVEQkNvcmUoZGIsIElkYktleVJhbmdlLCB0bXBUcmFucykge1xuICAgICAgICBmdW5jdGlvbiBleHRyYWN0U2NoZW1hKGRiLCB0cmFucykge1xuICAgICAgICAgICAgdmFyIHRhYmxlcyA9IGFycmF5aWZ5KGRiLm9iamVjdFN0b3JlTmFtZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZGIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGFibGVzOiB0YWJsZXMubWFwKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gdHJhbnMub2JqZWN0U3RvcmUodGFibGUpOyB9KS5tYXAoZnVuY3Rpb24gKHN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IHN0b3JlLmtleVBhdGgsIGF1dG9JbmNyZW1lbnQgPSBzdG9yZS5hdXRvSW5jcmVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvdW5kID0gaXNBcnJheShrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdXRib3VuZCA9IGtleVBhdGggPT0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEJ5S2V5UGF0aCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdG9yZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQcmltYXJ5S2V5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZDogb3V0Ym91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5UGF0aDoga2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogYXV0b0luY3JlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0S2V5OiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZXM6IGFycmF5aWZ5KHN0b3JlLmluZGV4TmFtZXMpLm1hcChmdW5jdGlvbiAoaW5kZXhOYW1lKSB7IHJldHVybiBzdG9yZS5pbmRleChpbmRleE5hbWUpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGluZGV4Lm5hbWUsIHVuaXF1ZSA9IGluZGV4LnVuaXF1ZSwgbXVsdGlFbnRyeSA9IGluZGV4Lm11bHRpRW50cnksIGtleVBhdGggPSBpbmRleC5rZXlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG91bmQgPSBpc0FycmF5KGtleVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiBjb21wb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IGtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWU6IHVuaXF1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpRW50cnk6IG11bHRpRW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0S2V5OiBnZXRLZXlFeHRyYWN0b3Ioa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhCeUtleVBhdGhbZ2V0S2V5UGF0aEFsaWFzKGtleVBhdGgpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRJbmRleEJ5S2V5UGF0aDogZnVuY3Rpb24gKGtleVBhdGgpIHsgcmV0dXJuIGluZGV4QnlLZXlQYXRoW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleEJ5S2V5UGF0aFtcIjppZFwiXSA9IHJlc3VsdC5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4QnlLZXlQYXRoW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV0gPSByZXN1bHQucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXNHZXRBbGw6IHRhYmxlcy5sZW5ndGggPiAwICYmICgnZ2V0QWxsJyBpbiB0cmFucy5vYmplY3RTdG9yZSh0YWJsZXNbMF0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAhKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEvKENocm9tZVxcL3xFZGdlXFwvKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgW10uY29uY2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhZmFyaVxcLyhcXGQqKS8pKVsxXSA8IDYwNClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZUlEQktleVJhbmdlKHJhbmdlKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gMyApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gNCApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNvbnZlcnQgbmV2ZXIgdHlwZSB0byBJREJLZXlSYW5nZVwiKTtcbiAgICAgICAgICAgIHZhciBsb3dlciA9IHJhbmdlLmxvd2VyLCB1cHBlciA9IHJhbmdlLnVwcGVyLCBsb3dlck9wZW4gPSByYW5nZS5sb3dlck9wZW4sIHVwcGVyT3BlbiA9IHJhbmdlLnVwcGVyT3BlbjtcbiAgICAgICAgICAgIHZhciBpZGJSYW5nZSA9IGxvd2VyID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgIHVwcGVyID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UudXBwZXJCb3VuZCh1cHBlciwgISF1cHBlck9wZW4pIDpcbiAgICAgICAgICAgICAgICB1cHBlciA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UubG93ZXJCb3VuZChsb3dlciwgISFsb3dlck9wZW4pIDpcbiAgICAgICAgICAgICAgICAgICAgSWRiS2V5UmFuZ2UuYm91bmQobG93ZXIsIHVwcGVyLCAhIWxvd2VyT3BlbiwgISF1cHBlck9wZW4pO1xuICAgICAgICAgICAgcmV0dXJuIGlkYlJhbmdlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURiQ29yZVRhYmxlKHRhYmxlU2NoZW1hKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGFibGVTY2hlbWEubmFtZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG11dGF0ZShfYSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IF9hLnRyYW5zLCB0eXBlID0gX2EudHlwZSwga2V5cyA9IF9hLmtleXMsIHZhbHVlcyA9IF9hLnZhbHVlcywgcmFuZ2UgPSBfYS5yYW5nZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dGJvdW5kID0gc3RvcmUua2V5UGF0aCA9PSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBZGRPclB1dCA9IHR5cGUgPT09IFwicHV0XCIgfHwgdHlwZSA9PT0gXCJhZGRcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0FkZE9yUHV0ICYmIHR5cGUgIT09ICdkZWxldGUnICYmIHR5cGUgIT09ICdkZWxldGVSYW5nZScpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wZXJhdGlvbiB0eXBlOiBcIiArIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gKGtleXMgfHwgdmFsdWVzIHx8IHsgbGVuZ3RoOiAxIH0pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMgJiYgdmFsdWVzICYmIGtleXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHaXZlbiBrZXlzIGFycmF5IG11c3QgaGF2ZSBzYW1lIGxlbmd0aCBhcyBnaXZlbiB2YWx1ZXMgYXJyYXkuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IG51bUZhaWx1cmVzOiAwLCBmYWlsdXJlczoge30sIHJlc3VsdHM6IFtdLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXE7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXFzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsdXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRmFpbHVyZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK251bUZhaWx1cmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RlbGV0ZVJhbmdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLnR5cGUgPT09IDQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLCBmYWlsdXJlczogZmFpbHVyZXMsIHJlc3VsdHM6IFtdLCBsYXN0UmVzdWx0OiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UudHlwZSA9PT0gMyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IHN0b3JlLmNsZWFyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMucHVzaChyZXEgPSBzdG9yZS5kZWxldGUobWFrZUlEQktleVJhbmdlKHJhbmdlKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gaXNBZGRPclB1dCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVzLCBrZXlzXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZXMsIG51bGxdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5cywgbnVsbF0sIGFyZ3MxID0gX2FbMF0sIGFyZ3MyID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGRPclB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IChhcmdzMiAmJiBhcmdzMltpXSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW3R5cGVdKGFyZ3MxW2ldLCBhcmdzMltpXSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVbdHlwZV0oYXJnczFbaV0pKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5wdXNoKHJlcSA9IHN0b3JlW3R5cGVdKGFyZ3MxW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RSZXN1bHQgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxcy5mb3JFYWNoKGZ1bmN0aW9uIChyZXEsIGkpIHsgcmV0dXJuIHJlcS5lcnJvciAhPSBudWxsICYmIChmYWlsdXJlc1tpXSA9IHJlcS5lcnJvcik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRmFpbHVyZXM6IG51bUZhaWx1cmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzOiBmYWlsdXJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiB0eXBlID09PSBcImRlbGV0ZVwiID8ga2V5cyA6IHJlcXMubWFwKGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIHJlcS5yZXN1bHQ7IH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZXN1bHQ6IGxhc3RSZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZG9uZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9wZW5DdXJzb3IoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywgdmFsdWVzID0gX2EudmFsdWVzLCBxdWVyeSA9IF9hLnF1ZXJ5LCByZXZlcnNlID0gX2EucmV2ZXJzZSwgdW5pcXVlID0gX2EudW5pcXVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSB3cmFwKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBxdWVyeS5pbmRleCwgcmFuZ2UgPSBxdWVyeS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGluZGV4LmlzUHJpbWFyeUtleSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5pbmRleChpbmRleC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHJldmVyc2UgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXZ1bmlxdWVcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwcmV2XCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5leHR1bmlxdWVcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuZXh0XCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSB2YWx1ZXMgfHwgISgnb3BlbktleUN1cnNvcicgaW4gc291cmNlKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbkN1cnNvcihtYWtlSURCS2V5UmFuZ2UocmFuZ2UpLCBkaXJlY3Rpb24pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5vcGVuS2V5Q3Vyc29yKG1ha2VJREJLZXlSYW5nZShyYW5nZSksIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLl9fX2lkID0gKytfaWRfY291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2N1cnNvckNvbnRpbnVlID0gY3Vyc29yLmNvbnRpbnVlLmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5ID0gY3Vyc29yLmNvbnRpbnVlUHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jdXJzb3JDb250aW51ZVByaW1hcnlLZXkgPSBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5LmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY3Vyc29yQWR2YW5jZSA9IGN1cnNvci5hZHZhbmNlLmJpbmQoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb1Rocm93Q3Vyc29ySXNOb3RTdGFydGVkID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDdXJzb3Igbm90IHN0YXJ0ZWRcIik7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9UaHJvd0N1cnNvcklzU3RvcHBlZCA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ3Vyc29yIG5vdCBzdG9wcGVkXCIpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCA9IGN1cnNvci5jb250aW51ZSA9IGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkgPSBjdXJzb3IuYWR2YW5jZSA9IGRvVGhyb3dDdXJzb3JJc05vdFN0YXJ0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZmFpbCA9IHdyYXAocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdvdE9uZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZ290T25lLS0gPyBfdGhpcy5jb250aW51ZSgpIDogX3RoaXMuc3RvcCgpOyB9KS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RhcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlSXRlcmF0aW9uLCByZWplY3RJdGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUl0ZXJhdGlvbiA9IHdyYXAocmVzb2x2ZUl0ZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdEl0ZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5mYWlsID0gcmVqZWN0SXRlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0b3AgPSBjdXJzb3IuY29udGludWUgPSBjdXJzb3IuY29udGludWVQcmltYXJ5S2V5ID0gY3Vyc29yLmFkdmFuY2UgPSBkb1Rocm93Q3Vyc29ySXNTdG9wcGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUl0ZXJhdGlvbih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGd1YXJkZWRDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZmFpbChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnN0YXJ0ID0gZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDdXJzb3IgYmVoaW5kIGxhc3QgZW50cnlcIik7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3Iuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGd1YXJkZWRDYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlID0gX2N1cnNvckNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkgPSBfY3Vyc29yQ29udGludWVQcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5hZHZhbmNlID0gX2N1cnNvckFkdmFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGlvblByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnkoaGFzR2V0QWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gd3JhcChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IHJlcXVlc3QudHJhbnMsIHZhbHVlcyA9IHJlcXVlc3QudmFsdWVzLCBsaW1pdCA9IHJlcXVlc3QubGltaXQsIHF1ZXJ5ID0gcmVxdWVzdC5xdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub25JbmZpbml0TGltaXQgPSBsaW1pdCA9PT0gSW5maW5pdHkgPyB1bmRlZmluZWQgOiBsaW1pdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHF1ZXJ5LmluZGV4LCByYW5nZSA9IHF1ZXJ5LnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnMub2JqZWN0U3RvcmUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBpbmRleC5pc1ByaW1hcnlLZXkgPyBzdG9yZSA6IHN0b3JlLmluZGV4KGluZGV4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkYktleVJhbmdlID0gbWFrZUlEQktleVJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW1pdCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzR2V0QWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHZhbHVlcyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRBbGwoaWRiS2V5UmFuZ2UsIG5vbkluZmluaXRMaW1pdCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0QWxsS2V5cyhpZGJLZXlSYW5nZSwgbm9uSW5maW5pdExpbWl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiByZXNvbHZlKHsgcmVzdWx0OiBldmVudC50YXJnZXQucmVzdWx0IH0pOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRfMSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcV8xID0gdmFsdWVzIHx8ICEoJ29wZW5LZXlDdXJzb3InIGluIHNvdXJjZSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbkN1cnNvcihpZGJLZXlSYW5nZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uub3BlbktleUN1cnNvcihpZGJLZXlSYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxXzEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSByZXFfMS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyByZXN1bHQ6IHJlc3VsdF8xIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRfMS5wdXNoKHZhbHVlcyA/IGN1cnNvci52YWx1ZSA6IGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCsrY291bnRfMSA9PT0gbGltaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHJlc3VsdDogcmVzdWx0XzEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxXzEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiB0YWJsZVNjaGVtYSxcbiAgICAgICAgICAgICAgICBtdXRhdGU6IG11dGF0ZSxcbiAgICAgICAgICAgICAgICBnZXRNYW55OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gX2EudHJhbnMsIGtleXMgPSBfYS5rZXlzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVzdWx0W3JlcS5fcG9zXSA9IHJlcS5yZXN1bHQpICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytjYWxsYmFja0NvdW50ID09PSBrZXlDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxID0gc3RvcmUuZ2V0KGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuX3BvcyA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBzdWNjZXNzSGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsra2V5Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleUNvdW50ID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBfYS50cmFucywga2V5ID0gX2Eua2V5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHdyYXAocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmdldChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gcmVzb2x2ZShldmVudC50YXJnZXQucmVzdWx0KTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5KGhhc0dldEFsbCksXG4gICAgICAgICAgICAgICAgb3BlbkN1cnNvcjogb3BlbkN1cnNvcixcbiAgICAgICAgICAgICAgICBjb3VudDogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IF9hLnF1ZXJ5LCB0cmFucyA9IF9hLnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBxdWVyeS5pbmRleCwgcmFuZ2UgPSBxdWVyeS5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaW5kZXguaXNQcmltYXJ5S2V5ID8gc3RvcmUgOiBzdG9yZS5pbmRleChpbmRleC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZGJLZXlSYW5nZSA9IG1ha2VJREJLZXlSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRiS2V5UmFuZ2UgPyBzb3VyY2UuY291bnQoaWRiS2V5UmFuZ2UpIDogc291cmNlLmNvdW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIHJlc29sdmUoZXYudGFyZ2V0LnJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSBleHRyYWN0U2NoZW1hKGRiLCB0bXBUcmFucyksIHNjaGVtYSA9IF9hLnNjaGVtYSwgaGFzR2V0QWxsID0gX2EuaGFzR2V0QWxsO1xuICAgICAgICB2YXIgdGFibGVzID0gc2NoZW1hLnRhYmxlcy5tYXAoZnVuY3Rpb24gKHRhYmxlU2NoZW1hKSB7IHJldHVybiBjcmVhdGVEYkNvcmVUYWJsZSh0YWJsZVNjaGVtYSk7IH0pO1xuICAgICAgICB2YXIgdGFibGVNYXAgPSB7fTtcbiAgICAgICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7IHJldHVybiB0YWJsZU1hcFt0YWJsZS5uYW1lXSA9IHRhYmxlOyB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IGRiLnRyYW5zYWN0aW9uLmJpbmQoZGIpLFxuICAgICAgICAgICAgdGFibGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhYmxlTWFwW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWJsZSAnXCIuY29uY2F0KG5hbWUsIFwiJyBub3QgZm91bmRcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1hcFtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBNSU5fS0VZOiAtSW5maW5pdHksXG4gICAgICAgICAgICBNQVhfS0VZOiBnZXRNYXhLZXkoSWRiS2V5UmFuZ2UpLFxuICAgICAgICAgICAgc2NoZW1hOiBzY2hlbWFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVNaWRkbGV3YXJlU3RhY2soc3RhY2tJbXBsLCBtaWRkbGV3YXJlcykge1xuICAgICAgICByZXR1cm4gbWlkZGxld2FyZXMucmVkdWNlKGZ1bmN0aW9uIChkb3duLCBfYSkge1xuICAgICAgICAgICAgdmFyIGNyZWF0ZSA9IF9hLmNyZWF0ZTtcbiAgICAgICAgICAgIHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd24pLCBjcmVhdGUoZG93bikpKTtcbiAgICAgICAgfSwgc3RhY2tJbXBsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlTWlkZGxld2FyZVN0YWNrcyhtaWRkbGV3YXJlcywgaWRiZGIsIF9hLCB0bXBUcmFucykge1xuICAgICAgICB2YXIgSURCS2V5UmFuZ2UgPSBfYS5JREJLZXlSYW5nZTsgX2EuaW5kZXhlZERCO1xuICAgICAgICB2YXIgZGJjb3JlID0gY3JlYXRlTWlkZGxld2FyZVN0YWNrKGNyZWF0ZURCQ29yZShpZGJkYiwgSURCS2V5UmFuZ2UsIHRtcFRyYW5zKSwgbWlkZGxld2FyZXMuZGJjb3JlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRiY29yZTogZGJjb3JlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWlkZGxld2FyZVN0YWNrcyhkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIGlkYmRiID0gdG1wVHJhbnMuZGI7XG4gICAgICAgIHZhciBzdGFja3MgPSBjcmVhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLl9taWRkbGV3YXJlcywgaWRiZGIsIGRiLl9kZXBzLCB0bXBUcmFucyk7XG4gICAgICAgIGRiLmNvcmUgPSBzdGFja3MuZGJjb3JlO1xuICAgICAgICBkYi50YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZU5hbWUgPSB0YWJsZS5uYW1lO1xuICAgICAgICAgICAgaWYgKGRiLmNvcmUuc2NoZW1hLnRhYmxlcy5zb21lKGZ1bmN0aW9uICh0YmwpIHsgcmV0dXJuIHRibC5uYW1lID09PSB0YWJsZU5hbWU7IH0pKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY29yZSA9IGRiLmNvcmUudGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZGJbdGFibGVOYW1lXSBpbnN0YW5jZW9mIGRiLlRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiW3RhYmxlTmFtZV0uY29yZSA9IHRhYmxlLmNvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBcGlPblBsYWNlKGRiLCBvYmpzLCB0YWJsZU5hbWVzLCBkYnNjaGVtYSkge1xuICAgICAgICB0YWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIHNjaGVtYSA9IGRic2NoZW1hW3RhYmxlTmFtZV07XG4gICAgICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wRGVzYyA9IGdldFByb3BlcnR5RGVzY3JpcHRvcihvYmosIHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wRGVzYyB8fCAoXCJ2YWx1ZVwiIGluIHByb3BEZXNjICYmIHByb3BEZXNjLnZhbHVlID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmogPT09IGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZSB8fCBvYmogaW5zdGFuY2VvZiBkYi5UcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChvYmosIHRhYmxlTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50YWJsZSh0YWJsZU5hbWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KHRoaXMsIHRhYmxlTmFtZSwgeyB2YWx1ZTogdmFsdWUsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbdGFibGVOYW1lXSA9IG5ldyBkYi5UYWJsZSh0YWJsZU5hbWUsIHNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZVRhYmxlc0FwaShkYiwgb2Jqcykge1xuICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmpba2V5XSBpbnN0YW5jZW9mIGRiLlRhYmxlKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb3dlclZlcnNpb25GaXJzdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLl9jZmcudmVyc2lvbiAtIGIuX2NmZy52ZXJzaW9uO1xuICAgIH1cbiAgICBmdW5jdGlvbiBydW5VcGdyYWRlcnMoZGIsIG9sZFZlcnNpb24sIGlkYlVwZ3JhZGVUcmFucywgcmVqZWN0KSB7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWE7XG4gICAgICAgIGlmIChpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSAmJiAhZ2xvYmFsU2NoZW1hLiRtZXRhKSB7XG4gICAgICAgICAgICBnbG9iYWxTY2hlbWEuJG1ldGEgPSBjcmVhdGVUYWJsZVNjaGVtYShcIiRtZXRhXCIsIHBhcnNlSW5kZXhTeW50YXgoXCJcIilbMF0sIFtdKTtcbiAgICAgICAgICAgIGRiLl9zdG9yZU5hbWVzLnB1c2goJyRtZXRhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnLCBkYi5fc3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKTtcbiAgICAgICAgdHJhbnMuY3JlYXRlKGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIHRyYW5zLl9jb21wbGV0aW9uLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIHZhciByZWplY3RUcmFuc2FjdGlvbiA9IHRyYW5zLl9yZWplY3QuYmluZCh0cmFucyk7XG4gICAgICAgIHZhciB0cmFuc2xlc3MgPSBQU0QudHJhbnNsZXNzIHx8IFBTRDtcbiAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICBQU0QudHJhbnNsZXNzID0gdHJhbnNsZXNzO1xuICAgICAgICAgICAgaWYgKG9sZFZlcnNpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICBrZXlzKGdsb2JhbFNjaGVtYSkuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYlVwZ3JhZGVUcmFucywgdGFibGVOYW1lLCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7IHJldHVybiBkYi5vbi5wb3B1bGF0ZS5maXJlKHRyYW5zKTsgfSkuY2F0Y2gocmVqZWN0VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlU3RhY2tzKGRiLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRFeGlzdGluZ1ZlcnNpb24oZGIsIHRyYW5zLCBvbGRWZXJzaW9uKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAob2xkVmVyc2lvbikgeyByZXR1cm4gdXBkYXRlVGFibGVzQW5kSW5kZXhlcyhkYiwgb2xkVmVyc2lvbiwgdHJhbnMsIGlkYlVwZ3JhZGVUcmFucyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3RUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaEN1cnJlbnRWZXJzaW9uKGRiLCBpZGJVcGdyYWRlVHJhbnMpIHtcbiAgICAgICAgY3JlYXRlTWlzc2luZ1RhYmxlcyhkYi5fZGJTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgIGlmIChpZGJVcGdyYWRlVHJhbnMuZGIudmVyc2lvbiAlIDEwID09PSAwICYmICFpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSkge1xuICAgICAgICAgICAgaWRiVXBncmFkZVRyYW5zLmRiLmNyZWF0ZU9iamVjdFN0b3JlKCckbWV0YScpLmFkZChNYXRoLmNlaWwoKGlkYlVwZ3JhZGVUcmFucy5kYi52ZXJzaW9uIC8gMTApIC0gMSksICd2ZXJzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIGRiLl9kYlNjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKGdsb2JhbFNjaGVtYSwgZGIuX2RiU2NoZW1hKTtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAodGFibGVDaGFuZ2UpIHtcbiAgICAgICAgICAgIGlmICh0YWJsZUNoYW5nZS5jaGFuZ2UubGVuZ3RoIHx8IHRhYmxlQ2hhbmdlLnJlY3JlYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIHBhdGNoIGluZGV4ZXMgb2YgdGFibGUgXCIuY29uY2F0KHRhYmxlQ2hhbmdlLm5hbWUsIFwiIGJlY2F1c2UgaXQgaGFzIGNoYW5nZXMgb24gdGhlIHR5cGUgb2YgaW5kZXggb3IgcHJpbWFyeSBrZXkuXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJVcGdyYWRlVHJhbnMub2JqZWN0U3RvcmUodGFibGVDaGFuZ2UubmFtZSk7XG4gICAgICAgICAgICB0YWJsZUNoYW5nZS5hZGQuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiRGV4aWUgdXBncmFkZSBwYXRjaDogQ3JlYXRpbmcgbWlzc2luZyBpbmRleCBcIi5jb25jYXQodGFibGVDaGFuZ2UubmFtZSwgXCIuXCIpLmNvbmNhdChpZHguc3JjKSk7XG4gICAgICAgICAgICAgICAgYWRkSW5kZXgoc3RvcmUsIGlkeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRpZmYuY2hhbmdlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHRhYmxlQ2hhbmdlID0gX2FbX2ldO1xuICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8xKHRhYmxlQ2hhbmdlKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRFeGlzdGluZ1ZlcnNpb24oZGIsIHRyYW5zLCBvbGRWZXJzaW9uKSB7XG4gICAgICAgIGlmICh0cmFucy5zdG9yZU5hbWVzLmluY2x1ZGVzKCckbWV0YScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnMudGFibGUoJyRtZXRhJykuZ2V0KCd2ZXJzaW9uJykudGhlbihmdW5jdGlvbiAobWV0YVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YVZlcnNpb24gIT0gbnVsbCA/IG1ldGFWZXJzaW9uIDogb2xkVmVyc2lvbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKG9sZFZlcnNpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlc0FuZEluZGV4ZXMoZGIsIG9sZFZlcnNpb24sIHRyYW5zLCBpZGJVcGdyYWRlVHJhbnMpIHtcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHZhciB2ZXJzaW9ucyA9IGRiLl92ZXJzaW9ucztcbiAgICAgICAgdmFyIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgdmFyIHZlcnNUb1J1biA9IHZlcnNpb25zLmZpbHRlcihmdW5jdGlvbiAodikgeyByZXR1cm4gdi5fY2ZnLnZlcnNpb24gPj0gb2xkVmVyc2lvbjsgfSk7XG4gICAgICAgIGlmICh2ZXJzVG9SdW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJzVG9SdW4uZm9yRWFjaChmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFNjaGVtYSA9IGdsb2JhbFNjaGVtYTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGRiLCBvbGRTY2hlbWEsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIG5ld1NjaGVtYSwgaWRiVXBncmFkZVRyYW5zKTtcbiAgICAgICAgICAgICAgICBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBuZXdTY2hlbWE7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKG9sZFNjaGVtYSwgbmV3U2NoZW1hKTtcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5mb3JFYWNoKGZ1bmN0aW9uICh0dXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJVcGdyYWRlVHJhbnMsIHR1cGxlWzBdLCB0dXBsZVsxXS5wcmltS2V5LCB0dXBsZVsxXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkaWZmLmNoYW5nZS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5yZWNyZWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVXBncmFkZShcIk5vdCB5ZXQgc3VwcG9ydCBmb3IgY2hhbmdpbmcgcHJpbWFyeSBrZXlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVfMSA9IGlkYlVwZ3JhZGVUcmFucy5vYmplY3RTdG9yZShjaGFuZ2UubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuYWRkLmZvckVhY2goZnVuY3Rpb24gKGlkeCkgeyByZXR1cm4gYWRkSW5kZXgoc3RvcmVfMSwgaWR4KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuY2hhbmdlLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlXzEuZGVsZXRlSW5kZXgoaWR4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEluZGV4KHN0b3JlXzEsIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5kZWwuZm9yRWFjaChmdW5jdGlvbiAoaWR4TmFtZSkgeyByZXR1cm4gc3RvcmVfMS5kZWxldGVJbmRleChpZHhOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudFVwZ3JhZGUgPSB2ZXJzaW9uLl9jZmcuY29udGVudFVwZ3JhZGU7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRVcGdyYWRlICYmIHZlcnNpb24uX2NmZy52ZXJzaW9uID4gb2xkVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIGlkYlVwZ3JhZGVUcmFucyk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLl9tZW1vaXplZFRhYmxlcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBncmFkZVNjaGVtYV8xID0gc2hhbGxvd0Nsb25lKG5ld1NjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYuZGVsLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGdyYWRlU2NoZW1hXzFbdGFibGVdID0gb2xkU2NoZW1hW3RhYmxlXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVRhYmxlc0FwaShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSwga2V5cyh1cGdyYWRlU2NoZW1hXzEpLCB1cGdyYWRlU2NoZW1hXzEpO1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5zY2hlbWEgPSB1cGdyYWRlU2NoZW1hXzE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50VXBncmFkZUlzQXN5bmNfMSA9IGlzQXN5bmNGdW5jdGlvbihjb250ZW50VXBncmFkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50VXBncmFkZUlzQXN5bmNfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWVfMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2VGb2xsb3dlZCA9IERleGllUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWVfMSA9IGNvbnRlbnRVcGdyYWRlKHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZV8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRVcGdyYWRlSXNBc3luY18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNyZW1lbnRvciA9IGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzLmJpbmQobnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlXzEudGhlbihkZWNyZW1lbnRvciwgZGVjcmVtZW50b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocmV0dXJuVmFsdWVfMSAmJiB0eXBlb2YgcmV0dXJuVmFsdWVfMS50aGVuID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlXzEpIDogcHJvbWlzZUZvbGxvd2VkLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV0dXJuVmFsdWVfMTsgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgIGRlbGV0ZVJlbW92ZWRUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucyk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKGRiLCBbZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7XG4gICAgICAgICAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLlRyYW5zYWN0aW9uLnByb3RvdHlwZV0sIGRiLl9zdG9yZU5hbWVzLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICAgICAgICAgIHRyYW5zLnNjaGVtYSA9IGRiLl9kYlNjaGVtYTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGIuaWRiZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucygnJG1ldGEnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5jZWlsKGRiLmlkYmRiLnZlcnNpb24gLyAxMCkgPT09IHZlcnNpb24uX2NmZy52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5pZGJkYi5kZWxldGVPYmplY3RTdG9yZSgnJG1ldGEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYi5fZGJTY2hlbWEuJG1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5fc3RvcmVOYW1lcyA9IGRiLl9zdG9yZU5hbWVzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gbmFtZSAhPT0gJyRtZXRhJzsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5vYmplY3RTdG9yZSgnJG1ldGEnKS5wdXQodmVyc2lvbi5fY2ZnLnZlcnNpb24sICd2ZXJzaW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHJ1blF1ZXVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXVlLmxlbmd0aCA/IERleGllUHJvbWlzZS5yZXNvbHZlKHF1ZXVlLnNoaWZ0KCkodHJhbnMuaWRidHJhbnMpKS50aGVuKHJ1blF1ZXVlKSA6XG4gICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuUXVldWUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNyZWF0ZU1pc3NpbmdUYWJsZXMoZ2xvYmFsU2NoZW1hLCBpZGJVcGdyYWRlVHJhbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0U2NoZW1hRGlmZihvbGRTY2hlbWEsIG5ld1NjaGVtYSkge1xuICAgICAgICB2YXIgZGlmZiA9IHtcbiAgICAgICAgICAgIGRlbDogW10sXG4gICAgICAgICAgICBhZGQ6IFtdLFxuICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdGFibGU7XG4gICAgICAgIGZvciAodGFibGUgaW4gb2xkU2NoZW1hKSB7XG4gICAgICAgICAgICBpZiAoIW5ld1NjaGVtYVt0YWJsZV0pXG4gICAgICAgICAgICAgICAgZGlmZi5kZWwucHVzaCh0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh0YWJsZSBpbiBuZXdTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciBvbGREZWYgPSBvbGRTY2hlbWFbdGFibGVdLCBuZXdEZWYgPSBuZXdTY2hlbWFbdGFibGVdO1xuICAgICAgICAgICAgaWYgKCFvbGREZWYpIHtcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5wdXNoKFt0YWJsZSwgbmV3RGVmXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVmOiBuZXdEZWYsXG4gICAgICAgICAgICAgICAgICAgIHJlY3JlYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGVsOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKChcbiAgICAgICAgICAgICAgICAnJyArIChvbGREZWYucHJpbUtleS5rZXlQYXRoIHx8ICcnKSkgIT09ICgnJyArIChuZXdEZWYucHJpbUtleS5rZXlQYXRoIHx8ICcnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKG9sZERlZi5wcmltS2V5LmF1dG8gIT09IG5ld0RlZi5wcmltS2V5LmF1dG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZS5yZWNyZWF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYuY2hhbmdlLnB1c2goY2hhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRJbmRleGVzID0gb2xkRGVmLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ZXMgPSBuZXdEZWYuaWR4QnlOYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4TmFtZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpZHhOYW1lIGluIG9sZEluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3SW5kZXhlc1tpZHhOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuZGVsLnB1c2goaWR4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpZHhOYW1lIGluIG5ld0luZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRJZHggPSBvbGRJbmRleGVzW2lkeE5hbWVdLCBuZXdJZHggPSBuZXdJbmRleGVzW2lkeE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRJZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmFkZC5wdXNoKG5ld0lkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGRJZHguc3JjICE9PSBuZXdJZHguc3JjKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5jaGFuZ2UucHVzaChuZXdJZHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UuZGVsLmxlbmd0aCA+IDAgfHwgY2hhbmdlLmFkZC5sZW5ndGggPiAwIHx8IGNoYW5nZS5jaGFuZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWZmO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIHZhciBzdG9yZSA9IGlkYnRyYW5zLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHRhYmxlTmFtZSwgcHJpbUtleS5rZXlQYXRoID9cbiAgICAgICAgICAgIHsga2V5UGF0aDogcHJpbUtleS5rZXlQYXRoLCBhdXRvSW5jcmVtZW50OiBwcmltS2V5LmF1dG8gfSA6XG4gICAgICAgICAgICB7IGF1dG9JbmNyZW1lbnQ6IHByaW1LZXkuYXV0byB9KTtcbiAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgcmV0dXJuIGFkZEluZGV4KHN0b3JlLCBpZHgpOyB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVNaXNzaW5nVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpIHtcbiAgICAgICAga2V5cyhuZXdTY2hlbWEpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHRhYmxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0RleGllOiBDcmVhdGluZyBtaXNzaW5nIHRhYmxlJywgdGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBuZXdTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBuZXdTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlbGV0ZVJlbW92ZWRUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICBbXS5zbGljZS5jYWxsKGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXMpLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld1NjaGVtYVtzdG9yZU5hbWVdID09IG51bGwgJiYgaWRidHJhbnMuZGIuZGVsZXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZEluZGV4KHN0b3JlLCBpZHgpIHtcbiAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoaWR4Lm5hbWUsIGlkeC5rZXlQYXRoLCB7IHVuaXF1ZTogaWR4LnVuaXF1ZSwgbXVsdGlFbnRyeTogaWR4Lm11bHRpIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKSB7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSB7fTtcbiAgICAgICAgdmFyIGRiU3RvcmVOYW1lcyA9IHNsaWNlKGlkYmRiLm9iamVjdFN0b3JlTmFtZXMsIDApO1xuICAgICAgICBkYlN0b3JlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0bXBUcmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5rZXlQYXRoO1xuICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBjcmVhdGVJbmRleFNwZWMobmFtZUZyb21LZXlQYXRoKGtleVBhdGgpLCBrZXlQYXRoIHx8IFwiXCIsIHRydWUsIGZhbHNlLCAhIXN0b3JlLmF1dG9JbmNyZW1lbnQsIGtleVBhdGggJiYgdHlwZW9mIGtleVBhdGggIT09IFwic3RyaW5nXCIsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RvcmUuaW5kZXhOYW1lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBpZGJpbmRleCA9IHN0b3JlLmluZGV4KHN0b3JlLmluZGV4TmFtZXNbal0pO1xuICAgICAgICAgICAgICAgIGtleVBhdGggPSBpZGJpbmRleC5rZXlQYXRoO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGNyZWF0ZUluZGV4U3BlYyhpZGJpbmRleC5uYW1lLCBrZXlQYXRoLCAhIWlkYmluZGV4LnVuaXF1ZSwgISFpZGJpbmRleC5tdWx0aUVudHJ5LCBmYWxzZSwga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCAhPT0gXCJzdHJpbmdcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbG9iYWxTY2hlbWFbc3RvcmVOYW1lXSA9IGNyZWF0ZVRhYmxlU2NoZW1hKHN0b3JlTmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZ2xvYmFsU2NoZW1hO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgZGIudmVybm8gPSBpZGJkYi52ZXJzaW9uIC8gMTA7XG4gICAgICAgIHZhciBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBidWlsZEdsb2JhbFNjaGVtYShkYiwgaWRiZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgZGIuX3N0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzLCAwKTtcbiAgICAgICAgc2V0QXBpT25QbGFjZShkYiwgW2RiLl9hbGxUYWJsZXNdLCBrZXlzKGdsb2JhbFNjaGVtYSksIGdsb2JhbFNjaGVtYSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZlcmlmeUluc3RhbGxlZFNjaGVtYShkYiwgdG1wVHJhbnMpIHtcbiAgICAgICAgdmFyIGluc3RhbGxlZFNjaGVtYSA9IGJ1aWxkR2xvYmFsU2NoZW1hKGRiLCBkYi5pZGJkYiwgdG1wVHJhbnMpO1xuICAgICAgICB2YXIgZGlmZiA9IGdldFNjaGVtYURpZmYoaW5zdGFsbGVkU2NoZW1hLCBkYi5fZGJTY2hlbWEpO1xuICAgICAgICByZXR1cm4gIShkaWZmLmFkZC5sZW5ndGggfHwgZGlmZi5jaGFuZ2Uuc29tZShmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIGNoLmFkZC5sZW5ndGggfHwgY2guY2hhbmdlLmxlbmd0aDsgfSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhkYiwgc2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICB2YXIgc3RvcmVOYW1lcyA9IGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcmVOYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHN0b3JlTmFtZXNbaV07XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJ0cmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICAgICAgZGIuX2hhc0dldEFsbCA9ICdnZXRBbGwnIGluIHN0b3JlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdG9yZS5pbmRleE5hbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4TmFtZSA9IHN0b3JlLmluZGV4TmFtZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5pbmRleChpbmRleE5hbWUpLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgdmFyIGRleGllTmFtZSA9IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IGtleVBhdGggOiBcIltcIiArIHNsaWNlKGtleVBhdGgpLmpvaW4oJysnKSArIFwiXVwiO1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWFbc3RvcmVOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhTcGVjID0gc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2RleGllTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleFNwZWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4U3BlYy5uYW1lID0gaW5kZXhOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtzdG9yZU5hbWVdLmlkeEJ5TmFtZVtkZXhpZU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2luZGV4TmFtZV0gPSBpbmRleFNwZWM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAgICAgICAgICEvKENocm9tZVxcL3xFZGdlXFwvKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgX2dsb2JhbC5Xb3JrZXJHbG9iYWxTY29wZSAmJiBfZ2xvYmFsIGluc3RhbmNlb2YgX2dsb2JhbC5Xb3JrZXJHbG9iYWxTY29wZSAmJlxuICAgICAgICAgICAgW10uY29uY2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1NhZmFyaVxcLyhcXGQqKS8pKVsxXSA8IDYwNCkge1xuICAgICAgICAgICAgZGIuX2hhc0dldEFsbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlSW5kZXhTeW50YXgocHJpbUtleUFuZEluZGV4ZXMpIHtcbiAgICAgICAgcmV0dXJuIHByaW1LZXlBbmRJbmRleGVzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChpbmRleCwgaW5kZXhOdW0pIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciB0eXBlU3BsaXQgPSBpbmRleC5zcGxpdCgnOicpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSAoX2EgPSB0eXBlU3BsaXRbMV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCk7XG4gICAgICAgICAgICBpbmRleCA9IHR5cGVTcGxpdFswXS50cmltKCk7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGluZGV4LnJlcGxhY2UoLyhbJipdfFxcK1xcKykvZywgXCJcIik7XG4gICAgICAgICAgICB2YXIga2V5UGF0aCA9IC9eXFxbLy50ZXN0KG5hbWUpID8gbmFtZS5tYXRjaCgvXlxcWyguKilcXF0kLylbMV0uc3BsaXQoJysnKSA6IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW5kZXhTcGVjKG5hbWUsIGtleVBhdGggfHwgbnVsbCwgL1xcJi8udGVzdChpbmRleCksIC9cXCovLnRlc3QoaW5kZXgpLCAvXFwrXFwrLy50ZXN0KGluZGV4KSwgaXNBcnJheShrZXlQYXRoKSwgaW5kZXhOdW0gPT09IDAsIHR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgVmVyc2lvbiA9ICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWZXJzaW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9jcmVhdGVUYWJsZVNjaGVtYSA9IGZ1bmN0aW9uIChuYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVGFibGVTY2hlbWEobmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9wYXJzZUluZGV4U3ludGF4ID0gZnVuY3Rpb24gKHByaW1LZXlBbmRJbmRleGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbmRleFN5bnRheChwcmltS2V5QW5kSW5kZXhlcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLl9wYXJzZVN0b3Jlc1NwZWMgPSBmdW5jdGlvbiAoc3RvcmVzLCBvdXRTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBrZXlzKHN0b3JlcykuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3Jlc1t0YWJsZU5hbWVdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleGVzID0gX3RoaXMuX3BhcnNlSW5kZXhTeW50YXgoc3RvcmVzW3RhYmxlTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IGluZGV4ZXMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmltS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoJ0ludmFsaWQgc2NoZW1hIGZvciB0YWJsZSAnICsgdGFibGVOYW1lICsgJzogJyArIHN0b3Jlc1t0YWJsZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmltS2V5LnVuaXF1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmltS2V5Lm11bHRpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdQcmltYXJ5IGtleSBjYW5ub3QgYmUgbXVsdGlFbnRyeSonKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHguYXV0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoJ09ubHkgcHJpbWFyeSBrZXkgY2FuIGJlIG1hcmtlZCBhcyBhdXRvSW5jcmVtZW50ICgrKyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWR4LmtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKCdJbmRleCBtdXN0IGhhdmUgYSBuYW1lIGFuZCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGJsU2NoZW1hID0gX3RoaXMuX2NyZWF0ZVRhYmxlU2NoZW1hKHRhYmxlTmFtZSwgcHJpbUtleSwgaW5kZXhlcyk7XG4gICAgICAgICAgICAgICAgICAgIG91dFNjaGVtYVt0YWJsZU5hbWVdID0gdGJsU2NoZW1hO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWZXJzaW9uLnByb3RvdHlwZS5zdG9yZXMgPSBmdW5jdGlvbiAoc3RvcmVzKSB7XG4gICAgICAgICAgICB2YXIgZGIgPSB0aGlzLmRiO1xuICAgICAgICAgICAgdGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSA9IHRoaXMuX2NmZy5zdG9yZXNTb3VyY2VcbiAgICAgICAgICAgICAgICA/IGV4dGVuZCh0aGlzLl9jZmcuc3RvcmVzU291cmNlLCBzdG9yZXMpXG4gICAgICAgICAgICAgICAgOiBzdG9yZXM7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbnMgPSBkYi5fdmVyc2lvbnM7XG4gICAgICAgICAgICB2YXIgc3RvcmVzU3BlYyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRic2NoZW1hID0ge307XG4gICAgICAgICAgICB2ZXJzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHN0b3Jlc1NwZWMsIHZlcnNpb24uX2NmZy5zdG9yZXNTb3VyY2UpO1xuICAgICAgICAgICAgICAgIGRic2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hID0ge307XG4gICAgICAgICAgICAgICAgdmVyc2lvbi5fcGFyc2VTdG9yZXNTcGVjKHN0b3Jlc1NwZWMsIGRic2NoZW1hKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGIuX2RiU2NoZW1hID0gZGJzY2hlbWE7XG4gICAgICAgICAgICByZW1vdmVUYWJsZXNBcGkoZGIsIFtkYi5fYWxsVGFibGVzLCBkYiwgZGIuVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7XG4gICAgICAgICAgICBzZXRBcGlPblBsYWNlKGRiLCBbZGIuX2FsbFRhYmxlcywgZGIsIGRiLlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgdGhpcy5fY2ZnLnRhYmxlc10sIGtleXMoZGJzY2hlbWEpLCBkYnNjaGVtYSk7XG4gICAgICAgICAgICBkYi5fc3RvcmVOYW1lcyA9IGtleXMoZGJzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFZlcnNpb24ucHJvdG90eXBlLnVwZ3JhZGUgPSBmdW5jdGlvbiAodXBncmFkZUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9jZmcuY29udGVudFVwZ3JhZGUgPSBwcm9taXNhYmxlQ2hhaW4odGhpcy5fY2ZnLmNvbnRlbnRVcGdyYWRlIHx8IG5vcCwgdXBncmFkZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmVyc2lvbjtcbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVmVyc2lvbkNvbnN0cnVjdG9yKGRiKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2xhc3NDb25zdHJ1Y3RvcihWZXJzaW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgICAgICB0aGlzLl9jZmcgPSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbk51bWJlcixcbiAgICAgICAgICAgICAgICBzdG9yZXNTb3VyY2U6IG51bGwsXG4gICAgICAgICAgICAgICAgZGJzY2hlbWE6IHt9LFxuICAgICAgICAgICAgICAgIHRhYmxlczoge30sXG4gICAgICAgICAgICAgICAgY29udGVudFVwZ3JhZGU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKSB7XG4gICAgICAgIHZhciBkYk5hbWVzREIgPSBpbmRleGVkREJbXCJfZGJOYW1lc0RCXCJdO1xuICAgICAgICBpZiAoIWRiTmFtZXNEQikge1xuICAgICAgICAgICAgZGJOYW1lc0RCID0gaW5kZXhlZERCW1wiX2RiTmFtZXNEQlwiXSA9IG5ldyBEZXhpZSQxKERCTkFNRVNfREIsIHtcbiAgICAgICAgICAgICAgICBhZGRvbnM6IFtdLFxuICAgICAgICAgICAgICAgIGluZGV4ZWREQjogaW5kZXhlZERCLFxuICAgICAgICAgICAgICAgIElEQktleVJhbmdlOiBJREJLZXlSYW5nZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGJOYW1lc0RCLnZlcnNpb24oMSkuc3RvcmVzKHsgZGJuYW1lczogXCJuYW1lXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRiTmFtZXNEQi50YWJsZShcImRibmFtZXNcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhc0RhdGFiYXNlc05hdGl2ZShpbmRleGVkREIpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ZWREQiAmJiB0eXBlb2YgaW5kZXhlZERCLmRhdGFiYXNlcyA9PT0gXCJmdW5jdGlvblwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRhYmFzZU5hbWVzKF9hKSB7XG4gICAgICAgIHZhciBpbmRleGVkREIgPSBfYS5pbmRleGVkREIsIElEQktleVJhbmdlID0gX2EuSURCS2V5UmFuZ2U7XG4gICAgICAgIHJldHVybiBoYXNEYXRhYmFzZXNOYXRpdmUoaW5kZXhlZERCKVxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoaW5kZXhlZERCLmRhdGFiYXNlcygpKS50aGVuKGZ1bmN0aW9uIChpbmZvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmZvc1xuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpbmZvKSB7IHJldHVybiBpbmZvLm5hbWU7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5hbWUgIT09IERCTkFNRVNfREI7IH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogZ2V0RGJOYW1lc1RhYmxlKGluZGV4ZWREQiwgSURCS2V5UmFuZ2UpLnRvQ29sbGVjdGlvbigpLnByaW1hcnlLZXlzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9vbkRhdGFiYXNlQ3JlYXRlZChfYSwgbmFtZSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICAhaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQikgJiZcbiAgICAgICAgICAgIG5hbWUgIT09IERCTkFNRVNfREIgJiZcbiAgICAgICAgICAgIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS5wdXQoeyBuYW1lOiBuYW1lIH0pLmNhdGNoKG5vcCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9vbkRhdGFiYXNlRGVsZXRlZChfYSwgbmFtZSkge1xuICAgICAgICB2YXIgaW5kZXhlZERCID0gX2EuaW5kZXhlZERCLCBJREJLZXlSYW5nZSA9IF9hLklEQktleVJhbmdlO1xuICAgICAgICAhaGFzRGF0YWJhc2VzTmF0aXZlKGluZGV4ZWREQikgJiZcbiAgICAgICAgICAgIG5hbWUgIT09IERCTkFNRVNfREIgJiZcbiAgICAgICAgICAgIGdldERiTmFtZXNUYWJsZShpbmRleGVkREIsIElEQktleVJhbmdlKS5kZWxldGUobmFtZSkuY2F0Y2gobm9wKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2aXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFBTRC5sZXRUaHJvdWdoID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpZGJSZWFkeSgpIHtcbiAgICAgICAgdmFyIGlzU2FmYXJpID0gIW5hdmlnYXRvci51c2VyQWdlbnREYXRhICYmXG4gICAgICAgICAgICAvU2FmYXJpXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICAhL0Nocm9tKGV8aXVtKVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKCFpc1NhZmFyaSB8fCAhaW5kZXhlZERCLmRhdGFiYXNlcylcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgdmFyIGludGVydmFsSWQ7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgdmFyIHRyeUlkYiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4ZWREQi5kYXRhYmFzZXMoKS5maW5hbGx5KHJlc29sdmUpOyB9O1xuICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHRyeUlkYiwgMTAwKTtcbiAgICAgICAgICAgIHRyeUlkYigpO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7IH0pO1xuICAgIH1cblxuICAgIHZhciBfYTtcbiAgICBmdW5jdGlvbiBpc0VtcHR5UmFuZ2Uobm9kZSkge1xuICAgICAgICByZXR1cm4gIShcImZyb21cIiBpbiBub2RlKTtcbiAgICB9XG4gICAgdmFyIFJhbmdlU2V0ID0gZnVuY3Rpb24gKGZyb21PclRyZWUsIHRvKSB7XG4gICAgICAgIGlmICh0aGlzKSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA/IHsgZDogMSwgZnJvbTogZnJvbU9yVHJlZSwgdG86IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gdG8gOiBmcm9tT3JUcmVlIH0gOiB7IGQ6IDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcnYgPSBuZXcgUmFuZ2VTZXQoKTtcbiAgICAgICAgICAgIGlmIChmcm9tT3JUcmVlICYmIChcImRcIiBpbiBmcm9tT3JUcmVlKSkge1xuICAgICAgICAgICAgICAgIGV4dGVuZChydiwgZnJvbU9yVHJlZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHByb3BzKFJhbmdlU2V0LnByb3RvdHlwZSwgKF9hID0ge1xuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAocmFuZ2VTZXQpIHtcbiAgICAgICAgICAgICAgICBtZXJnZVJhbmdlcyh0aGlzLCByYW5nZVNldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkS2V5OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgYWRkUmFuZ2UodGhpcywga2V5LCBrZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEtleXM6IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYWRkUmFuZ2UoX3RoaXMsIGtleSwga2V5KTsgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzS2V5OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHRoaXMpLm5leHQoa2V5KS52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSAmJiBjbXAobm9kZS5mcm9tLCBrZXkpIDw9IDAgJiYgY21wKG5vZGUudG8sIGtleSkgPj0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2FbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFJhbmdlU2V0SXRlcmF0b3IodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIF9hKSk7XG4gICAgZnVuY3Rpb24gYWRkUmFuZ2UodGFyZ2V0LCBmcm9tLCB0bykge1xuICAgICAgICB2YXIgZGlmZiA9IGNtcChmcm9tLCB0byk7XG4gICAgICAgIGlmIChpc05hTihkaWZmKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGRpZmYgPiAwKVxuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcigpO1xuICAgICAgICBpZiAoaXNFbXB0eVJhbmdlKHRhcmdldCkpXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHRhcmdldCwgeyBmcm9tOiBmcm9tLCB0bzogdG8sIGQ6IDEgfSk7XG4gICAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0Lmw7XG4gICAgICAgIHZhciByaWdodCA9IHRhcmdldC5yO1xuICAgICAgICBpZiAoY21wKHRvLCB0YXJnZXQuZnJvbSkgPCAwKSB7XG4gICAgICAgICAgICBsZWZ0XG4gICAgICAgICAgICAgICAgPyBhZGRSYW5nZShsZWZ0LCBmcm9tLCB0bylcbiAgICAgICAgICAgICAgICA6ICh0YXJnZXQubCA9IHsgZnJvbTogZnJvbSwgdG86IHRvLCBkOiAxLCBsOiBudWxsLCByOiBudWxsIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlYmFsYW5jZSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbXAoZnJvbSwgdGFyZ2V0LnRvKSA+IDApIHtcbiAgICAgICAgICAgIHJpZ2h0XG4gICAgICAgICAgICAgICAgPyBhZGRSYW5nZShyaWdodCwgZnJvbSwgdG8pXG4gICAgICAgICAgICAgICAgOiAodGFyZ2V0LnIgPSB7IGZyb206IGZyb20sIHRvOiB0bywgZDogMSwgbDogbnVsbCwgcjogbnVsbCB9KTtcbiAgICAgICAgICAgIHJldHVybiByZWJhbGFuY2UodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY21wKGZyb20sIHRhcmdldC5mcm9tKSA8IDApIHtcbiAgICAgICAgICAgIHRhcmdldC5mcm9tID0gZnJvbTtcbiAgICAgICAgICAgIHRhcmdldC5sID0gbnVsbDtcbiAgICAgICAgICAgIHRhcmdldC5kID0gcmlnaHQgPyByaWdodC5kICsgMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNtcCh0bywgdGFyZ2V0LnRvKSA+IDApIHtcbiAgICAgICAgICAgIHRhcmdldC50byA9IHRvO1xuICAgICAgICAgICAgdGFyZ2V0LnIgPSBudWxsO1xuICAgICAgICAgICAgdGFyZ2V0LmQgPSB0YXJnZXQubCA/IHRhcmdldC5sLmQgKyAxIDogMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmlnaHRXYXNDdXRPZmYgPSAhdGFyZ2V0LnI7XG4gICAgICAgIGlmIChsZWZ0ICYmICF0YXJnZXQubCkge1xuICAgICAgICAgICAgbWVyZ2VSYW5nZXModGFyZ2V0LCBsZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmlnaHQgJiYgcmlnaHRXYXNDdXRPZmYpIHtcbiAgICAgICAgICAgIG1lcmdlUmFuZ2VzKHRhcmdldCwgcmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1lcmdlUmFuZ2VzKHRhcmdldCwgbmV3U2V0KSB7XG4gICAgICAgIGZ1bmN0aW9uIF9hZGRSYW5nZVNldCh0YXJnZXQsIF9hKSB7XG4gICAgICAgICAgICB2YXIgZnJvbSA9IF9hLmZyb20sIHRvID0gX2EudG8sIGwgPSBfYS5sLCByID0gX2EucjtcbiAgICAgICAgICAgIGFkZFJhbmdlKHRhcmdldCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgaWYgKGwpXG4gICAgICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgbCk7XG4gICAgICAgICAgICBpZiAocilcbiAgICAgICAgICAgICAgICBfYWRkUmFuZ2VTZXQodGFyZ2V0LCByKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRW1wdHlSYW5nZShuZXdTZXQpKVxuICAgICAgICAgICAgX2FkZFJhbmdlU2V0KHRhcmdldCwgbmV3U2V0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmFuZ2VzT3ZlcmxhcChyYW5nZVNldDEsIHJhbmdlU2V0Mikge1xuICAgICAgICB2YXIgaTEgPSBnZXRSYW5nZVNldEl0ZXJhdG9yKHJhbmdlU2V0Mik7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0MSA9IGkxLm5leHQoKTtcbiAgICAgICAgaWYgKG5leHRSZXN1bHQxLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBhID0gbmV4dFJlc3VsdDEudmFsdWU7XG4gICAgICAgIHZhciBpMiA9IGdldFJhbmdlU2V0SXRlcmF0b3IocmFuZ2VTZXQxKTtcbiAgICAgICAgdmFyIG5leHRSZXN1bHQyID0gaTIubmV4dChhLmZyb20pO1xuICAgICAgICB2YXIgYiA9IG5leHRSZXN1bHQyLnZhbHVlO1xuICAgICAgICB3aGlsZSAoIW5leHRSZXN1bHQxLmRvbmUgJiYgIW5leHRSZXN1bHQyLmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChjbXAoYi5mcm9tLCBhLnRvKSA8PSAwICYmIGNtcChiLnRvLCBhLmZyb20pID49IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjbXAoYS5mcm9tLCBiLmZyb20pIDwgMFxuICAgICAgICAgICAgICAgID8gKGEgPSAobmV4dFJlc3VsdDEgPSBpMS5uZXh0KGIuZnJvbSkpLnZhbHVlKVxuICAgICAgICAgICAgICAgIDogKGIgPSAobmV4dFJlc3VsdDIgPSBpMi5uZXh0KGEuZnJvbSkpLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJhbmdlU2V0SXRlcmF0b3Iobm9kZSkge1xuICAgICAgICB2YXIgc3RhdGUgPSBpc0VtcHR5UmFuZ2Uobm9kZSkgPyBudWxsIDogeyBzOiAwLCBuOiBub2RlIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleVByb3ZpZGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnMgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQcm92aWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGUubi5sICYmIGNtcChrZXksIHN0YXRlLm4uZnJvbSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5sLCBzOiAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGUubi5sKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5sLCBzOiAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnMgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5UHJvdmlkZWQgfHwgY21wKGtleSwgc3RhdGUubi50bykgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHN0YXRlLm4sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm4ucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB7IHVwOiBzdGF0ZSwgbjogc3RhdGUubi5yLCBzOiAwIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHN0YXRlLnVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYmFsYW5jZSh0YXJnZXQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGRpZmYgPSAoKChfYSA9IHRhcmdldC5yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZCkgfHwgMCkgLSAoKChfYiA9IHRhcmdldC5sKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZCkgfHwgMCk7XG4gICAgICAgIHZhciByID0gZGlmZiA+IDEgPyBcInJcIiA6IGRpZmYgPCAtMSA/IFwibFwiIDogXCJcIjtcbiAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgIHZhciBsID0gciA9PT0gXCJyXCIgPyBcImxcIiA6IFwiclwiO1xuICAgICAgICAgICAgdmFyIHJvb3RDbG9uZSA9IF9fYXNzaWduKHt9LCB0YXJnZXQpO1xuICAgICAgICAgICAgdmFyIG9sZFJvb3RSaWdodCA9IHRhcmdldFtyXTtcbiAgICAgICAgICAgIHRhcmdldC5mcm9tID0gb2xkUm9vdFJpZ2h0LmZyb207XG4gICAgICAgICAgICB0YXJnZXQudG8gPSBvbGRSb290UmlnaHQudG87XG4gICAgICAgICAgICB0YXJnZXRbcl0gPSBvbGRSb290UmlnaHRbcl07XG4gICAgICAgICAgICByb290Q2xvbmVbcl0gPSBvbGRSb290UmlnaHRbbF07XG4gICAgICAgICAgICB0YXJnZXRbbF0gPSByb290Q2xvbmU7XG4gICAgICAgICAgICByb290Q2xvbmUuZCA9IGNvbXB1dGVEZXB0aChyb290Q2xvbmUpO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldC5kID0gY29tcHV0ZURlcHRoKHRhcmdldCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXB1dGVEZXB0aChfYSkge1xuICAgICAgICB2YXIgciA9IF9hLnIsIGwgPSBfYS5sO1xuICAgICAgICByZXR1cm4gKHIgPyAobCA/IE1hdGgubWF4KHIuZCwgbC5kKSA6IHIuZCkgOiBsID8gbC5kIDogMCkgKyAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodGFyZ2V0LCBuZXdTZXQpIHtcbiAgICAgICAga2V5cyhuZXdTZXQpLmZvckVhY2goZnVuY3Rpb24gKHBhcnQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRbcGFydF0pXG4gICAgICAgICAgICAgICAgbWVyZ2VSYW5nZXModGFyZ2V0W3BhcnRdLCBuZXdTZXRbcGFydF0pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRhcmdldFtwYXJ0XSA9IGNsb25lU2ltcGxlT2JqZWN0VHJlZShuZXdTZXRbcGFydF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvYnNTZXRzT3ZlcmxhcChvczEsIG9zMikge1xuICAgICAgICByZXR1cm4gb3MxLmFsbCB8fCBvczIuYWxsIHx8IE9iamVjdC5rZXlzKG9zMSkuc29tZShmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBvczJba2V5XSAmJiByYW5nZXNPdmVybGFwKG9zMltrZXldLCBvczFba2V5XSk7IH0pO1xuICAgIH1cblxuICAgIHZhciBjYWNoZSA9IHt9O1xuXG4gICAgdmFyIHVuc2lnbmFsZWRQYXJ0cyA9IHt9O1xuICAgIHZhciBpc1Rhc2tFbnF1ZXVlZCA9IGZhbHNlO1xuICAgIGZ1bmN0aW9uIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHBhcnQsIG9wdGltaXN0aWMpIHtcbiAgICAgICAgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldCh1bnNpZ25hbGVkUGFydHMsIHBhcnQpO1xuICAgICAgICBpZiAoIWlzVGFza0VucXVldWVkKSB7XG4gICAgICAgICAgICBpc1Rhc2tFbnF1ZXVlZCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpc1Rhc2tFbnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHVuc2lnbmFsZWRQYXJ0cztcbiAgICAgICAgICAgICAgICB1bnNpZ25hbGVkUGFydHMgPSB7fTtcbiAgICAgICAgICAgICAgICBzaWduYWxTdWJzY3JpYmVyc05vdyhwYXJ0cywgZmFsc2UpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2lnbmFsU3Vic2NyaWJlcnNOb3codXBkYXRlZFBhcnRzLCBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICBpZiAoZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMgPT09IHZvaWQgMCkgeyBkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcyA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBxdWVyaWVzVG9TaWduYWwgPSBuZXcgU2V0KCk7XG4gICAgICAgIGlmICh1cGRhdGVkUGFydHMuYWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LnZhbHVlcyhjYWNoZSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNvbGxlY3RUYWJsZVN1YnNjcmliZXJzKHRibENhY2hlLCB1cGRhdGVkUGFydHMsIHF1ZXJpZXNUb1NpZ25hbCwgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHVwZGF0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IC9eaWRiXFw6XFwvXFwvKC4qKVxcLyguKilcXC8vLmV4ZWMoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRiTmFtZSA9IHBhcnRzWzFdLCB0YWJsZU5hbWUgPSBwYXJ0c1syXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGJsQ2FjaGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0VGFibGVTdWJzY3JpYmVycyh0YmxDYWNoZSwgdXBkYXRlZFBhcnRzLCBxdWVyaWVzVG9TaWduYWwsIGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVlcmllc1RvU2lnbmFsLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIHJlcXVlcnkoKTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbGxlY3RUYWJsZVN1YnNjcmliZXJzKHRibENhY2hlLCB1cGRhdGVkUGFydHMsIG91dFF1ZXJpZXNUb1NpZ25hbCwgZGVsZXRlQWZmZWN0ZWRDYWNoZUVudHJpZXMpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRFbnRyeUxpc3RzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyh0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5KTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYiA9IF9hW19pXSwgaW5kZXhOYW1lID0gX2JbMF0sIGVudHJpZXMgPSBfYlsxXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudHJpZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgZW50cmllc18xID0gZW50cmllczsgX2MgPCBlbnRyaWVzXzEubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc18xW19jXTtcbiAgICAgICAgICAgICAgICBpZiAob2JzU2V0c092ZXJsYXAodXBkYXRlZFBhcnRzLCBlbnRyeS5vYnNTZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIG91dFF1ZXJpZXNUb1NpZ25hbC5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWxldGVBZmZlY3RlZENhY2hlRW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKVxuICAgICAgICAgICAgICAgIHVwZGF0ZWRFbnRyeUxpc3RzLnB1c2goW2luZGV4TmFtZSwgZmlsdGVyZWRFbnRyaWVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbGV0ZUFmZmVjdGVkQ2FjaGVFbnRyaWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfZCA9IDAsIHVwZGF0ZWRFbnRyeUxpc3RzXzEgPSB1cGRhdGVkRW50cnlMaXN0czsgX2QgPCB1cGRhdGVkRW50cnlMaXN0c18xLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgIHZhciBfZSA9IHVwZGF0ZWRFbnRyeUxpc3RzXzFbX2RdLCBpbmRleE5hbWUgPSBfZVswXSwgZmlsdGVyZWRFbnRyaWVzID0gX2VbMV07XG4gICAgICAgICAgICAgICAgdGJsQ2FjaGUucXVlcmllcy5xdWVyeVtpbmRleE5hbWVdID0gZmlsdGVyZWRFbnRyaWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV4aWVPcGVuKGRiKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IGRiLl9zdGF0ZTtcbiAgICAgICAgdmFyIGluZGV4ZWREQiA9IGRiLl9kZXBzLmluZGV4ZWREQjtcbiAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQgfHwgZGIuaWRiZGIpXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBzdGF0ZS5kYk9wZW5FcnJvciA/XG4gICAgICAgICAgICAgICAgcmVqZWN0aW9uKHN0YXRlLmRiT3BlbkVycm9yKSA6XG4gICAgICAgICAgICAgICAgZGI7IH0pO1xuICAgICAgICBzdGF0ZS5pc0JlaW5nT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBudWxsO1xuICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdmFyIG9wZW5DYW5jZWxsZXIgPSBzdGF0ZS5vcGVuQ2FuY2VsbGVyO1xuICAgICAgICB2YXIgbmF0aXZlVmVyVG9PcGVuID0gTWF0aC5yb3VuZChkYi52ZXJubyAqIDEwKTtcbiAgICAgICAgdmFyIHNjaGVtYVBhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgICBmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGVkKCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLm9wZW5DYW5jZWxsZXIgIT09IG9wZW5DYW5jZWxsZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoJ2RiLm9wZW4oKSB3YXMgY2FuY2VsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc29sdmVEYlJlYWR5ID0gc3RhdGUuZGJSZWFkeVJlc29sdmUsXG4gICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiA9IG51bGwsIHdhc0NyZWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHRyeU9wZW5EQiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSSgpO1xuICAgICAgICAgICAgdmFyIGRiTmFtZSA9IGRiLm5hbWU7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RhdGUuYXV0b1NjaGVtYSB8fCAhbmF0aXZlVmVyVG9PcGVuID9cbiAgICAgICAgICAgICAgICBpbmRleGVkREIub3BlbihkYk5hbWUpIDpcbiAgICAgICAgICAgICAgICBpbmRleGVkREIub3BlbihkYk5hbWUsIG5hdGl2ZVZlclRvT3Blbik7XG4gICAgICAgICAgICBpZiAoIXJlcSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKCk7XG4gICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgcmVxLm9uYmxvY2tlZCA9IHdyYXAoZGIuX2ZpcmVPbkJsb2NrZWQpO1xuICAgICAgICAgICAgcmVxLm9udXBncmFkZW5lZWRlZCA9IHdyYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSByZXEudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dG9TY2hlbWEgJiYgIWRiLl9vcHRpb25zLmFsbG93RW1wdHlEQikge1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHByZXZlbnREZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24uYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVscmVxID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKGRiTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbHJlcS5vbnN1Y2Nlc3MgPSBkZWxyZXEub25lcnJvciA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLk5vU3VjaERhdGFiYXNlKFwiRGF0YWJhc2UgXCIuY29uY2F0KGRiTmFtZSwgXCIgZG9lc250IGV4aXN0XCIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZlciA9IGUub2xkVmVyc2lvbiA+IE1hdGgucG93KDIsIDYyKSA/IDAgOiBlLm9sZFZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIHdhc0NyZWF0ZWQgPSBvbGRWZXIgPCAxO1xuICAgICAgICAgICAgICAgICAgICBkYi5pZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY2hlbWFQYXRjaE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoQ3VycmVudFZlcnNpb24oZGIsIHVwZ3JhZGVUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcnVuVXBncmFkZXJzKGRiLCBvbGRWZXIgLyAxMCwgdXBncmFkZVRyYW5zYWN0aW9uLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgaWRiZGIgPSBkYi5pZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0U3RvcmVOYW1lcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcFRyYW5zID0gaWRiZGIudHJhbnNhY3Rpb24oc2FmYXJpTXVsdGlTdG9yZUZpeChvYmplY3RTdG9yZU5hbWVzKSwgJ3JlYWRvbmx5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuYXV0b1NjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkR2xvYmFsU2NoZW1hKGRiLCBpZGJkYiwgdG1wVHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoZGIsIGRiLl9kYlNjaGVtYSwgdG1wVHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmVyaWZ5SW5zdGFsbGVkU2NoZW1hKGRiLCB0bXBUcmFucykgJiYgIXNjaGVtYVBhdGNoTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEZXhpZSBTY2hlbWFEaWZmOiBTY2hlbWEgd2FzIGV4dGVuZGVkIHdpdGhvdXQgaW5jcmVhc2luZyB0aGUgbnVtYmVyIHBhc3NlZCB0byBkYi52ZXJzaW9uKCkuIERleGllIHdpbGwgYWRkIG1pc3NpbmcgcGFydHMgYW5kIGluY3JlbWVudCBuYXRpdmUgdmVyc2lvbiBudW1iZXIgdG8gd29ya2Fyb3VuZCB0aGlzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRiZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlVmVyVG9PcGVuID0gaWRiZGIudmVyc2lvbiArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYVBhdGNoTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRyeU9wZW5EQigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVTdGFja3MoZGIsIHRtcFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaChkYik7XG4gICAgICAgICAgICAgICAgaWRiZGIub252ZXJzaW9uY2hhbmdlID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudmNGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRiLm9uKFwidmVyc2lvbmNoYW5nZVwiKS5maXJlKGV2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZGJkYi5vbmNsb3NlID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgZGIub24oXCJjbG9zZVwiKS5maXJlKGV2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAod2FzQ3JlYXRlZClcbiAgICAgICAgICAgICAgICAgICAgX29uRGF0YWJhc2VDcmVhdGVkKGRiLl9kZXBzLCBkYk5hbWUpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiVW5rbm93bkVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5QUjEzOThfbWF4TG9vcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLlBSMTM5OF9tYXhMb29wLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RleGllOiBXb3JrYXJvdW5kIGZvciBDaHJvbWUgVW5rbm93bkVycm9yIG9uIG9wZW4oKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeU9wZW5EQigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJWZXJzaW9uRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdGl2ZVZlclRvT3BlbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZVZlclRvT3BlbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ5T3BlbkRCKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG9wZW5DYW5jZWxsZXIsXG4gICAgICAgICAgICAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgPyBEZXhpZVByb21pc2UucmVzb2x2ZSgpIDogaWRiUmVhZHkoKSkudGhlbih0cnlPcGVuREIpXG4gICAgICAgIF0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZSh2aXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGIub24ucmVhZHkuZmlyZShkYi52aXApOyB9KSkudGhlbihmdW5jdGlvbiBmaXJlUmVtYWluZGVycygpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUub25SZWFkeUJlaW5nRmlyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYWluZGVyc18xID0gc3RhdGUub25SZWFkeUJlaW5nRmlyZWQucmVkdWNlKHByb21pc2FibGVDaGFpbiwgbm9wKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHZpcChmdW5jdGlvbiAoKSB7IHJldHVybiByZW1haW5kZXJzXzEoZGIudmlwKTsgfSkpLnRoZW4oZmlyZVJlbWFpbmRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5vcGVuQ2FuY2VsbGVyID09PSBvcGVuQ2FuY2VsbGVyKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUub25SZWFkeUJlaW5nRmlyZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzQmVpbmdPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiAmJiB1cGdyYWRlVHJhbnNhY3Rpb24uYWJvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgICAgICBpZiAob3BlbkNhbmNlbGxlciA9PT0gc3RhdGUub3BlbkNhbmNlbGxlcikge1xuICAgICAgICAgICAgICAgIGRiLl9jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlcnIpO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN0YXRlLm9wZW5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlRGJSZWFkeSgpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh3YXNDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZXJ5dGhpbmdfMSA9IHt9O1xuICAgICAgICAgICAgICAgIGRiLnRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0YWJsZS5zY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHgubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVyeXRoaW5nXzFbXCJpZGI6Ly9cIi5jb25jYXQoZGIubmFtZSwgXCIvXCIpLmNvbmNhdCh0YWJsZS5uYW1lLCBcIi9cIikuY29uY2F0KGlkeC5uYW1lKV0gPSBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW1tdXV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZXZlcnl0aGluZ18xW1wiaWRiOi8vXCIuY29uY2F0KGRiLm5hbWUsIFwiL1wiKS5jb25jYXQodGFibGUubmFtZSwgXCIvXCIpXSA9IGV2ZXJ5dGhpbmdfMVtcImlkYjovL1wiLmNvbmNhdChkYi5uYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlLm5hbWUsIFwiLzpkZWxzXCIpXSA9IG5ldyBSYW5nZVNldCgtSW5maW5pdHksIFtbW11dXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FKS5maXJlKGV2ZXJ5dGhpbmdfMSk7XG4gICAgICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3coZXZlcnl0aGluZ18xLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXdhaXRJdGVyYXRvcihpdGVyYXRvcikge1xuICAgICAgICB2YXIgY2FsbE5leHQgPSBmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBpdGVyYXRvci5uZXh0KHJlc3VsdCk7IH0sIGRvVGhyb3cgPSBmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIGl0ZXJhdG9yLnRocm93KGVycm9yKTsgfSwgb25TdWNjZXNzID0gc3RlcChjYWxsTmV4dCksIG9uRXJyb3IgPSBzdGVwKGRvVGhyb3cpO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKGdldE5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBnZXROZXh0KHZhbCksIHZhbHVlID0gbmV4dC52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC5kb25lID8gdmFsdWUgOlxuICAgICAgICAgICAgICAgICAgICAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZS50aGVuICE9PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXkodmFsdWUpID8gUHJvbWlzZS5hbGwodmFsdWUpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKSA6IG9uU3VjY2Vzcyh2YWx1ZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ZXAoY2FsbE5leHQpKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0cmFjdFRyYW5zYWN0aW9uQXJncyhtb2RlLCBfdGFibGVBcmdzXywgc2NvcGVGdW5jKSB7XG4gICAgICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGkgPCAyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiVG9vIGZldyBhcmd1bWVudHNcIik7XG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkgLSAxKTtcbiAgICAgICAgd2hpbGUgKC0taSlcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBzY29wZUZ1bmMgPSBhcmdzLnBvcCgpO1xuICAgICAgICB2YXIgdGFibGVzID0gZmxhdHRlbihhcmdzKTtcbiAgICAgICAgcmV0dXJuIFttb2RlLCB0YWJsZXMsIHNjb3BlRnVuY107XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVudGVyVHJhbnNhY3Rpb25TY29wZShkYiwgbW9kZSwgc3RvcmVOYW1lcywgcGFyZW50VHJhbnNhY3Rpb24sIHNjb3BlRnVuYykge1xuICAgICAgICByZXR1cm4gRGV4aWVQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2xlc3MgPSBQU0QudHJhbnNsZXNzIHx8IFBTRDtcbiAgICAgICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYi5fZGJTY2hlbWEsIHBhcmVudFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIHRyYW5zLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB6b25lUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgdHJhbnM6IHRyYW5zLFxuICAgICAgICAgICAgICAgIHRyYW5zbGVzczogdHJhbnNsZXNzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMgPSBwYXJlbnRUcmFuc2FjdGlvbi5pZGJ0cmFucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5pZGJ0cmFucy5fZXhwbGljaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkYi5fc3RhdGUuUFIxMzk4X21heExvb3AgPSAzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09IGVycm5hbWVzLkludmFsaWRTdGF0ZSAmJiBkYi5pc09wZW4oKSAmJiAtLWRiLl9zdGF0ZS5QUjEzOThfbWF4TG9vcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRGV4aWU6IE5lZWQgdG8gcmVvcGVuIGRiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSh7IGRpc2FibGVBdXRvT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGIub3BlbigpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZW50ZXJUcmFuc2FjdGlvblNjb3BlKGRiLCBtb2RlLCBzdG9yZU5hbWVzLCBudWxsLCBzY29wZUZ1bmMpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NvcGVGdW5jSXNBc3luYyA9IGlzQXN5bmNGdW5jdGlvbihzY29wZUZ1bmMpO1xuICAgICAgICAgICAgaWYgKHNjb3BlRnVuY0lzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgdmFyIHByb21pc2VGb2xsb3dlZCA9IERleGllUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gc2NvcGVGdW5jLmNhbGwodHJhbnMsIHRyYW5zKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlRnVuY0lzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNyZW1lbnRvciA9IGRlY3JlbWVudEV4cGVjdGVkQXdhaXRzLmJpbmQobnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS50aGVuKGRlY3JlbWVudG9yLCBkZWNyZW1lbnRvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJldHVyblZhbHVlLm5leHQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHJldHVyblZhbHVlLnRocm93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGF3YWl0SXRlcmF0b3IocmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgem9uZVByb3BzKTtcbiAgICAgICAgICAgIHJldHVybiAocmV0dXJuVmFsdWUgJiYgdHlwZW9mIHJldHVyblZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgIERleGllUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlKS50aGVuKGZ1bmN0aW9uICh4KSB7IHJldHVybiB0cmFucy5hY3RpdmUgP1xuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICAgIDogcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLlByZW1hdHVyZUNvbW1pdChcIlRyYW5zYWN0aW9uIGNvbW1pdHRlZCB0b28gZWFybHkuIFNlZSBodHRwOi8vYml0Lmx5LzJrZGNrTW5cIikpOyB9KVxuICAgICAgICAgICAgICAgIDogcHJvbWlzZUZvbGxvd2VkLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV0dXJuVmFsdWU7IH0pKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB0cmFucy5fcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFucy5fY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHg7IH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0cmFucy5fcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFkKGEsIHZhbHVlLCBjb3VudCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gaXNBcnJheShhKSA/IGEuc2xpY2UoKSA6IFthXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlKGRvd24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkb3duKSwgeyB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGRvd24udGFibGUodGFibGVOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NoZW1hID0gdGFibGUuc2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleExvb2t1cCA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBhbGxWaXJ0dWFsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFZpcnR1YWxJbmRleGVzKGtleVBhdGgsIGtleVRhaWwsIGxvd0xldmVsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGhBbGlhcyA9IGdldEtleVBhdGhBbGlhcyhrZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4TGlzdCA9IChpbmRleExvb2t1cFtrZXlQYXRoQWxpYXNdID0gaW5kZXhMb29rdXBba2V5UGF0aEFsaWFzXSB8fCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlMZW5ndGggPSBrZXlQYXRoID09IG51bGwgPyAwIDogdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnID8gMSA6IGtleVBhdGgubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNWaXJ0dWFsID0ga2V5VGFpbCA+IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2aXJ0dWFsSW5kZXggPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG93TGV2ZWxJbmRleCksIHsgbmFtZTogaXNWaXJ0dWFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiLmNvbmNhdChrZXlQYXRoQWxpYXMsIFwiKHZpcnR1YWwtZnJvbTpcIikuY29uY2F0KGxvd0xldmVsSW5kZXgubmFtZSwgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsb3dMZXZlbEluZGV4Lm5hbWUsIGxvd0xldmVsSW5kZXg6IGxvd0xldmVsSW5kZXgsIGlzVmlydHVhbDogaXNWaXJ0dWFsLCBrZXlUYWlsOiBrZXlUYWlsLCBrZXlMZW5ndGg6IGtleUxlbmd0aCwgZXh0cmFjdEtleTogZ2V0S2V5RXh0cmFjdG9yKGtleVBhdGgpLCB1bmlxdWU6ICFpc1ZpcnR1YWwgJiYgbG93TGV2ZWxJbmRleC51bmlxdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TGlzdC5wdXNoKHZpcnR1YWxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmlydHVhbEluZGV4LmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsVmlydHVhbEluZGV4ZXMucHVzaCh2aXJ0dWFsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEtleVBhdGggPSBrZXlMZW5ndGggPT09IDIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGhbMF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVBhdGguc2xpY2UoMCwga2V5TGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaXJ0dWFsSW5kZXhlcyh2aXJ0dWFsS2V5UGF0aCwga2V5VGFpbCArIDEsIGxvd0xldmVsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmtleVRhaWwgLSBiLmtleVRhaWw7IH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlydHVhbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeUtleSA9IGFkZFZpcnR1YWxJbmRleGVzKHNjaGVtYS5wcmltYXJ5S2V5LmtleVBhdGgsIDAsIHNjaGVtYS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICBpbmRleExvb2t1cFtcIjppZFwiXSA9IFtwcmltYXJ5S2V5XTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2NoZW1hLmluZGV4ZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgYWRkVmlydHVhbEluZGV4ZXMoaW5kZXgua2V5UGF0aCwgMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kQmVzdEluZGV4KGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGluZGV4TG9va3VwW2dldEtleVBhdGhBbGlhcyhrZXlQYXRoKV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgJiYgcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGVSYW5nZShyYW5nZSwga2V5VGFpbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmFuZ2UudHlwZSA9PT0gMSAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXI6IHBhZChyYW5nZS5sb3dlciwgcmFuZ2UubG93ZXJPcGVuID8gZG93bi5NQVhfS0VZIDogZG93bi5NSU5fS0VZLCBrZXlUYWlsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyOiBwYWQocmFuZ2UudXBwZXIsIHJhbmdlLnVwcGVyT3BlbiA/IGRvd24uTUlOX0tFWSA6IGRvd24uTUFYX0tFWSwga2V5VGFpbCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlck9wZW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlUmVxdWVzdChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcmVxLnF1ZXJ5LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXguaXNWaXJ0dWFsID8gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlcSksIHsgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgubG93TGV2ZWxJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogdHJhbnNsYXRlUmFuZ2UocmVxLnF1ZXJ5LnJhbmdlLCBpbmRleC5rZXlUYWlsKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSA6IHJlcTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0YWJsZSksIHsgc2NoZW1hOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc2NoZW1hKSwgeyBwcmltYXJ5S2V5OiBwcmltYXJ5S2V5LCBpbmRleGVzOiBhbGxWaXJ0dWFsSW5kZXhlcywgZ2V0SW5kZXhCeUtleVBhdGg6IGZpbmRCZXN0SW5kZXggfSksIGNvdW50OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUuY291bnQodHJhbnNsYXRlUmVxdWVzdChyZXEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgcXVlcnk6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5xdWVyeSh0cmFuc2xhdGVSZXF1ZXN0KHJlcSkpO1xuICAgICAgICAgICAgICAgICAgICB9LCBvcGVuQ3Vyc29yOiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSByZXEucXVlcnkuaW5kZXgsIGtleVRhaWwgPSBfYS5rZXlUYWlsLCBpc1ZpcnR1YWwgPSBfYS5pc1ZpcnR1YWwsIGtleUxlbmd0aCA9IF9hLmtleUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNWaXJ0dWFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5vcGVuQ3Vyc29yKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsQ3Vyc29yKGN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9jb250aW51ZShrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICE9IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKHBhZChrZXksIHJlcS5yZXZlcnNlID8gZG93bi5NQVhfS0VZIDogZG93bi5NSU5fS0VZLCBrZXlUYWlsKSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnVuaXF1ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKGN1cnNvci5rZXkuc2xpY2UoMCwga2V5TGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHJlcS5yZXZlcnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZG93bi5NSU5fS0VZXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZG93bi5NQVhfS0VZLCBrZXlUYWlsKSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlydHVhbEN1cnNvciA9IE9iamVjdC5jcmVhdGUoY3Vyc29yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiB7IHZhbHVlOiBfY29udGludWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVQcmltYXJ5S2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGtleSwgcHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZVByaW1hcnlLZXkocGFkKGtleSwgZG93bi5NQVhfS0VZLCBrZXlUYWlsKSwgcHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJzb3IucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5TGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5WzBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LnNsaWNlKDAsIGtleUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxDdXJzb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUub3BlbkN1cnNvcih0cmFuc2xhdGVSZXF1ZXN0KHJlcSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGN1cnNvcikgeyByZXR1cm4gY3Vyc29yICYmIGNyZWF0ZVZpcnR1YWxDdXJzb3IoY3Vyc29yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0gfSk7XG4gICAgfVxuICAgIHZhciB2aXJ0dWFsSW5kZXhNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbmFtZTogXCJWaXJ0dWFsSW5kZXhNaWRkbGV3YXJlXCIsXG4gICAgICAgIGxldmVsOiAxLFxuICAgICAgICBjcmVhdGU6IGNyZWF0ZVZpcnR1YWxJbmRleE1pZGRsZXdhcmVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0RGlmZihhLCBiLCBydiwgcHJmeCkge1xuICAgICAgICBydiA9IHJ2IHx8IHt9O1xuICAgICAgICBwcmZ4ID0gcHJmeCB8fCAnJztcbiAgICAgICAga2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093bihiLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhcCA9IGFbcHJvcF0sIGJwID0gYltwcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYnAgPT09ICdvYmplY3QnICYmIGFwICYmIGJwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcFR5cGVOYW1lID0gdG9TdHJpbmdUYWcoYXApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnBUeXBlTmFtZSA9IHRvU3RyaW5nVGFnKGJwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwVHlwZU5hbWUgIT09IGJwVHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXBUeXBlTmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE9iamVjdERpZmYoYXAsIGJwLCBydiwgcHJmeCArIHByb3AgKyAnLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFwICE9PSBicCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcnZbcHJmeCArIHByb3BdID0gYltwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcCAhPT0gYnApXG4gICAgICAgICAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBrZXlzKGIpLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duKGEsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgcnZbcHJmeCArIHByb3BdID0gYltwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSkge1xuICAgICAgICBpZiAocmVxLnR5cGUgPT09ICdkZWxldGUnKVxuICAgICAgICAgICAgcmV0dXJuIHJlcS5rZXlzO1xuICAgICAgICByZXR1cm4gcmVxLmtleXMgfHwgcmVxLnZhbHVlcy5tYXAocHJpbWFyeUtleS5leHRyYWN0S2V5KTtcbiAgICB9XG5cbiAgICB2YXIgaG9va3NNaWRkbGV3YXJlID0ge1xuICAgICAgICBzdGFjazogXCJkYmNvcmVcIixcbiAgICAgICAgbmFtZTogXCJIb29rc01pZGRsZXdhcmVcIixcbiAgICAgICAgbGV2ZWw6IDIsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGRvd25Db3JlKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIGRvd25Db3JlKSwgeyB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBkb3duVGFibGUgPSBkb3duQ29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gZG93blRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZU1pZGRsZXdhcmUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93blRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeFRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gZHhUcmFucy50YWJsZSh0YWJsZU5hbWUpLmhvb2ssIGRlbGV0aW5nID0gX2EuZGVsZXRpbmcsIGNyZWF0aW5nID0gX2EuY3JlYXRpbmcsIHVwZGF0aW5nID0gX2EudXBkYXRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlcS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nLmZpcmUgPT09IG5vcClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHhUcmFucy5fcHJvbWlzZSgncmVhZHdyaXRlJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gYWRkUHV0T3JEZWxldGUocmVxKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHV0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nLmZpcmUgPT09IG5vcCAmJiB1cGRhdGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGluZy5maXJlID09PSBub3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR4VHJhbnMuX3Byb21pc2UoJ3JlYWR3cml0ZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFkZFB1dE9yRGVsZXRlKHJlcSk7IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0aW5nLmZpcmUgPT09IG5vcClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHhUcmFucy5fcHJvbWlzZSgncmVhZHdyaXRlJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVsZXRlUmFuZ2UocmVxKTsgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLm11dGF0ZShyZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkUHV0T3JEZWxldGUocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR4VHJhbnMgPSBQU0QudHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSByZXEua2V5cyB8fCBnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFrZXlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXlzIG1pc3NpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxID0gcmVxLnR5cGUgPT09ICdhZGQnIHx8IHJlcS50eXBlID09PSAncHV0JyA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IGtleXM6IGtleXMgfSkgOiBfX2Fzc2lnbih7fSwgcmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnR5cGUgIT09ICdkZWxldGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzID0gX19zcHJlYWRBcnJheShbXSwgcmVxLnZhbHVlcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5rZXlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEua2V5cyA9IF9fc3ByZWFkQXJyYXkoW10sIHJlcS5rZXlzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXhpc3RpbmdWYWx1ZXMoZG93blRhYmxlLCByZXEsIGtleXMpLnRoZW4oZnVuY3Rpb24gKGV4aXN0aW5nVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0cyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXksIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0gZXhpc3RpbmdWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0geyBvbmVycm9yOiBudWxsLCBvbnN1Y2Nlc3M6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudHlwZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGluZy5maXJlLmNhbGwoY3R4LCBrZXksIGV4aXN0aW5nVmFsdWUsIGR4VHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVxLnR5cGUgPT09ICdhZGQnIHx8IGV4aXN0aW5nVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW5lcmF0ZWRQcmltYXJ5S2V5ID0gY3JlYXRpbmcuZmlyZS5jYWxsKGN0eCwga2V5LCByZXEudmFsdWVzW2ldLCBkeFRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IG51bGwgJiYgZ2VuZXJhdGVkUHJpbWFyeUtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGdlbmVyYXRlZFByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5rZXlzW2ldID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByaW1hcnlLZXkub3V0Ym91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChyZXEudmFsdWVzW2ldLCBwcmltYXJ5S2V5LmtleVBhdGgsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0RGlmZiA9IGdldE9iamVjdERpZmYoZXhpc3RpbmdWYWx1ZSwgcmVxLnZhbHVlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxDaGFuZ2VzXzEgPSB1cGRhdGluZy5maXJlLmNhbGwoY3R4LCBvYmplY3REaWZmLCBrZXksIGV4aXN0aW5nVmFsdWUsIGR4VHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsQ2hhbmdlc18xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ZWRWYWx1ZV8xID0gcmVxLnZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYWRkaXRpb25hbENoYW5nZXNfMSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihyZXF1ZXN0ZWRWYWx1ZV8xLCBrZXlQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFZhbHVlXzFba2V5UGF0aF0gPSBhZGRpdGlvbmFsQ2hhbmdlc18xW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKHJlcXVlc3RlZFZhbHVlXzEsIGtleVBhdGgsIGFkZGl0aW9uYWxDaGFuZ2VzXzFba2V5UGF0aF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gX2EuZmFpbHVyZXMsIHJlc3VsdHMgPSBfYS5yZXN1bHRzLCBudW1GYWlsdXJlcyA9IF9hLm51bUZhaWx1cmVzLCBsYXN0UmVzdWx0ID0gX2EubGFzdFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmltS2V5ID0gcmVzdWx0cyA/IHJlc3VsdHNbaV0gOiBrZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBjb250ZXh0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpbUtleSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5vbmVycm9yICYmIGN0eC5vbmVycm9yKGZhaWx1cmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5vbnN1Y2Nlc3MgJiYgY3R4Lm9uc3VjY2VzcyhyZXEudHlwZSA9PT0gJ3B1dCcgJiYgZXhpc3RpbmdWYWx1ZXNbaV0gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnZhbHVlc1tpXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltS2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZmFpbHVyZXM6IGZhaWx1cmVzLCByZXN1bHRzOiByZXN1bHRzLCBudW1GYWlsdXJlczogbnVtRmFpbHVyZXMsIGxhc3RSZXN1bHQ6IGxhc3RSZXN1bHQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0cy5mb3JFYWNoKGZ1bmN0aW9uIChjdHgpIHsgcmV0dXJuIGN0eC5vbmVycm9yICYmIGN0eC5vbmVycm9yKGVycm9yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVJhbmdlKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVOZXh0Q2h1bmsocmVxLnRyYW5zLCByZXEucmFuZ2UsIDEwMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU5leHRDaHVuayh0cmFucywgcmFuZ2UsIGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5xdWVyeSh7IHRyYW5zOiB0cmFucywgdmFsdWVzOiBmYWxzZSwgcXVlcnk6IHsgaW5kZXg6IHByaW1hcnlLZXksIHJhbmdlOiByYW5nZSB9LCBsaW1pdDogbGltaXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfYS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRQdXRPckRlbGV0ZSh7IHR5cGU6ICdkZWxldGUnLCBrZXlzOiByZXN1bHQsIHRyYW5zOiB0cmFucyB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMubnVtRmFpbHVyZXMgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuZmFpbHVyZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZhaWx1cmVzOiBbXSwgbnVtRmFpbHVyZXM6IDAsIGxhc3RSZXN1bHQ6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZU5leHRDaHVuayh0cmFucywgX19hc3NpZ24oX19hc3NpZ24oe30sIHJhbmdlKSwgeyBsb3dlcjogcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSwgbG93ZXJPcGVuOiB0cnVlIH0pLCBsaW1pdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZU1pZGRsZXdhcmU7XG4gICAgICAgICAgICB9IH0pKTsgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gZ2V0RXhpc3RpbmdWYWx1ZXModGFibGUsIHJlcSwgZWZmZWN0aXZlS2V5cykge1xuICAgICAgICByZXR1cm4gcmVxLnR5cGUgPT09IFwiYWRkXCJcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKFtdKVxuICAgICAgICAgICAgOiB0YWJsZS5nZXRNYW55KHsgdHJhbnM6IHJlcS50cmFucywga2V5czogZWZmZWN0aXZlS2V5cywgY2FjaGU6IFwiaW1tdXRhYmxlXCIgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RnJvbVRyYW5zYWN0aW9uQ2FjaGUoa2V5cywgY2FjaGUsIGNsb25lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmtleXMubGVuZ3RoIDwga2V5cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBjYWNoZS5rZXlzLmxlbmd0aCAmJiBqIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjbXAoY2FjaGUua2V5c1tpXSwga2V5c1tqXSkgIT09IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNsb25lID8gZGVlcENsb25lKGNhY2hlLnZhbHVlc1tpXSkgOiBjYWNoZS52YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICsrajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoID09PSBrZXlzLmxlbmd0aCA/IHJlc3VsdCA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgY2FjaGVFeGlzdGluZ1ZhbHVlc01pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiBcImRiY29yZVwiLFxuICAgICAgICBsZXZlbDogLTEsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGFibGU6IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHRhYmxlKSwgeyBnZXRNYW55OiBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXEuY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlLmdldE1hbnkocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlZFJlc3VsdCA9IGdldEZyb21UcmFuc2FjdGlvbkNhY2hlKHJlcS5rZXlzLCByZXEudHJhbnNbXCJfY2FjaGVcIl0sIHJlcS5jYWNoZSA9PT0gXCJjbG9uZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZXhpZVByb21pc2UucmVzb2x2ZShjYWNoZWRSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUuZ2V0TWFueShyZXEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudHJhbnNbXCJfY2FjaGVcIl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiByZXEua2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogcmVxLmNhY2hlID09PSBcImNsb25lXCIgPyBkZWVwQ2xvbmUocmVzKSA6IHJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG11dGF0ZTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudHlwZSAhPT0gXCJhZGRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnRyYW5zW1wiX2NhY2hlXCJdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpc0NhY2hhYmxlQ29udGV4dChjdHgsIHRhYmxlKSB7XG4gICAgICAgIHJldHVybiAoY3R4LnRyYW5zLm1vZGUgPT09ICdyZWFkb25seScgJiZcbiAgICAgICAgICAgICEhY3R4LnN1YnNjciAmJlxuICAgICAgICAgICAgIWN0eC50cmFucy5leHBsaWNpdCAmJlxuICAgICAgICAgICAgY3R4LnRyYW5zLmRiLl9vcHRpb25zLmNhY2hlICE9PSAnZGlzYWJsZWQnICYmXG4gICAgICAgICAgICAhdGFibGUuc2NoZW1hLnByaW1hcnlLZXkub3V0Ym91bmQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ2FjaGFibGVSZXF1ZXN0KHR5cGUsIHJlcSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxLnZhbHVlcyAmJiAhcmVxLnVuaXF1ZTtcbiAgICAgICAgICAgIGNhc2UgJ2dldCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSAnZ2V0TWFueSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSAnY291bnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgJ29wZW5DdXJzb3InOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBvYnNlcnZhYmlsaXR5TWlkZGxld2FyZSA9IHtcbiAgICAgICAgc3RhY2s6IFwiZGJjb3JlXCIsXG4gICAgICAgIGxldmVsOiAwLFxuICAgICAgICBuYW1lOiBcIk9ic2VydmFiaWxpdHlcIixcbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoY29yZSkge1xuICAgICAgICAgICAgdmFyIGRiTmFtZSA9IGNvcmUuc2NoZW1hLm5hbWU7XG4gICAgICAgICAgICB2YXIgRlVMTF9SQU5HRSA9IG5ldyBSYW5nZVNldChjb3JlLk1JTl9LRVksIGNvcmUuTUFYX0tFWSk7XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvcmUpLCB7IHRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoc3RvcmVzLCBtb2RlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChQU0Quc3Vic2NyICYmIG1vZGUgIT09ICdyZWFkb25seScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlJlYWRPbmx5KFwiUmVhZHdyaXRlIHRyYW5zYWN0aW9uIGluIGxpdmVRdWVyeSBjb250ZXh0LiBRdWVyaWVyIHNvdXJjZTogXCIuY29uY2F0KFBTRC5xdWVyaWVyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmUudHJhbnNhY3Rpb24oc3RvcmVzLCBtb2RlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LCB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBjb3JlLnRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2hlbWEgPSB0YWJsZS5zY2hlbWE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gc2NoZW1hLnByaW1hcnlLZXksIGluZGV4ZXMgPSBzY2hlbWEuaW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RLZXkgPSBwcmltYXJ5S2V5LmV4dHJhY3RLZXksIG91dGJvdW5kID0gcHJpbWFyeUtleS5vdXRib3VuZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ZXNXaXRoQXV0b0luY1BLID0gcHJpbWFyeUtleS5hdXRvSW5jcmVtZW50ICYmIGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uIChpbmRleCkgeyByZXR1cm4gaW5kZXguY29tcG91bmQgJiYgaW5kZXgua2V5UGF0aC5pbmNsdWRlcyhwcmltYXJ5S2V5LmtleVBhdGgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlQ2xvbmUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGFibGUpLCB7IG11dGF0ZTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gcmVxLnRyYW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGVkUGFydHMgPSByZXEubXV0YXRlZFBhcnRzIHx8IChyZXEubXV0YXRlZFBhcnRzID0ge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXRSYW5nZVNldCA9IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lLCBcIi9cIikuY29uY2F0KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobXV0YXRlZFBhcnRzW3BhcnRdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobXV0YXRlZFBhcnRzW3BhcnRdID0gbmV3IFJhbmdlU2V0KCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa1JhbmdlU2V0ID0gZ2V0UmFuZ2VTZXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHNSYW5nZVNldCA9IGdldFJhbmdlU2V0KFwiOmRlbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSByZXEudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2MgPSByZXEudHlwZSA9PT0gXCJkZWxldGVSYW5nZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3JlcS5yYW5nZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXEudHlwZSA9PT0gXCJkZWxldGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbcmVxLmtleXNdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcS52YWx1ZXMubGVuZ3RoIDwgNTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtnZXRFZmZlY3RpdmVLZXlzKHByaW1hcnlLZXksIHJlcSkuZmlsdGVyKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gaWQ7IH0pLCByZXEudmFsdWVzXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10sIGtleXMgPSBfY1swXSwgbmV3T2JqcyA9IF9jWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRDYWNoZSA9IHJlcS50cmFuc1tcIl9jYWNoZVwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShrZXlzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwa1JhbmdlU2V0LmFkZEtleXMoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRPYmpzID0gdHlwZSA9PT0gJ2RlbGV0ZScgfHwga2V5cy5sZW5ndGggPT09IG5ld09ianMubGVuZ3RoID8gZ2V0RnJvbVRyYW5zYWN0aW9uQ2FjaGUoa2V5cywgb2xkQ2FjaGUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRPYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXQuYWRkS2V5cyhrZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkT2JqcyB8fCBuZXdPYmpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0FmZmVjdGVkSW5kZXhlcyhnZXRSYW5nZVNldCwgc2NoZW1hLCBvbGRPYmpzLCBuZXdPYmpzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IChfYSA9IGtleXMubG93ZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvcmUuTUlOX0tFWSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAoX2IgPSBrZXlzLnVwcGVyKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBjb3JlLk1BWF9LRVlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0LmFkZChyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkKHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBrUmFuZ2VTZXQuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxzUmFuZ2VTZXQuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWEuaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgcmV0dXJuIGdldFJhbmdlU2V0KGlkeC5uYW1lKS5hZGQoRlVMTF9SQU5HRSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUubXV0YXRlKHJlcSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlzICYmIChyZXEudHlwZSA9PT0gJ2FkZCcgfHwgcmVxLnR5cGUgPT09ICdwdXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldC5hZGRLZXlzKHJlcy5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleGVzV2l0aEF1dG9JbmNQSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZXNXaXRoQXV0b0luY1BLLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4VmFscyA9IHJlcS52YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBpZHguZXh0cmFjdEtleSh2KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwa1BvcyA9IGlkeC5rZXlQYXRoLmZpbmRJbmRleChmdW5jdGlvbiAocHJvcCkgeyByZXR1cm4gcHJvcCA9PT0gcHJpbWFyeUtleS5rZXlQYXRoOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlcy5yZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhWYWxzW2ldW3BrUG9zXSA9IHJlcy5yZXN1bHRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJhbmdlU2V0KGlkeC5uYW1lKS5hZGRLZXlzKGlkeFZhbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLm11dGF0ZWRQYXJ0cyA9IGV4dGVuZE9ic2VydmFiaWxpdHlTZXQodHJhbnMubXV0YXRlZFBhcnRzIHx8IHt9LCBtdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdldFJhbmdlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9kID0gX2EucXVlcnksIGluZGV4ID0gX2QuaW5kZXgsIHJhbmdlID0gX2QucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSYW5nZVNldCgoX2IgPSByYW5nZS5sb3dlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogY29yZS5NSU5fS0VZLCAoX2MgPSByYW5nZS51cHBlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY29yZS5NQVhfS0VZKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkU3Vic2NyaWJlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChyZXEpIHsgcmV0dXJuIFtwcmltYXJ5S2V5LCBuZXcgUmFuZ2VTZXQocmVxLmtleSldOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFueTogZnVuY3Rpb24gKHJlcSkgeyByZXR1cm4gW3ByaW1hcnlLZXksIG5ldyBSYW5nZVNldCgpLmFkZEtleXMocmVxLmtleXMpXTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBnZXRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5DdXJzb3I6IGdldFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBrZXlzKHJlYWRTdWJzY3JpYmVycykuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUNsb25lW21ldGhvZF0gPSBmdW5jdGlvbiAocmVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjciA9IFBTRC5zdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzTGl2ZVF1ZXJ5ID0gISFzdWJzY3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hhYmxlID0gaXNDYWNoYWJsZUNvbnRleHQoUFNELCB0YWJsZSkgJiYgaXNDYWNoYWJsZVJlcXVlc3QobWV0aG9kLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYnNTZXQgPSBjYWNoYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHJlcS5vYnNTZXQgPSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN1YnNjcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMaXZlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldFJhbmdlU2V0ID0gZnVuY3Rpb24gKGluZGV4TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lLCBcIi9cIikuY29uY2F0KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG9ic1NldFtwYXJ0XSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvYnNTZXRbcGFydF0gPSBuZXcgUmFuZ2VTZXQoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGtSYW5nZVNldF8xID0gZ2V0UmFuZ2VTZXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxzUmFuZ2VTZXRfMSA9IGdldFJhbmdlU2V0KFwiOmRlbHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IHJlYWRTdWJzY3JpYmVyc1ttZXRob2RdKHJlcSksIHF1ZXJpZWRJbmRleCA9IF9hWzBdLCBxdWVyaWVkUmFuZ2VzID0gX2FbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdxdWVyeScgJiYgcXVlcmllZEluZGV4LmlzUHJpbWFyeUtleSAmJiAhcmVxLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkKHF1ZXJpZWRSYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmFuZ2VTZXQocXVlcmllZEluZGV4Lm5hbWUgfHwgXCJcIikuYWRkKHF1ZXJpZWRSYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcXVlcmllZEluZGV4LmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJjb3VudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkKEZVTExfUkFOR0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXNQcm9taXNlXzEgPSBtZXRob2QgPT09IFwicXVlcnlcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5KF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXEpLCB7IHZhbHVlczogZmFsc2UgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwicXVlcnlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dGJvdW5kICYmIHJlcS52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5c1Byb21pc2VfMS50aGVuKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0aW5nS2V5cyA9IF9hLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldF8xLmFkZEtleXMocmVzdWx0aW5nS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcEtleXMgPSByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyByZXMucmVzdWx0Lm1hcChleHRyYWN0S2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGtSYW5nZVNldF8xLmFkZEtleXMocEtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsc1JhbmdlU2V0XzEuYWRkS2V5cyhwS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWV0aG9kID09PSBcIm9wZW5DdXJzb3JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvcl8xID0gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhbnRWYWx1ZXNfMSA9IHJlcS52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnNvcl8xICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmNyZWF0ZShjdXJzb3JfMSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleShjdXJzb3JfMS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yXzEua2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBrZXkgPSBjdXJzb3JfMS5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHNSYW5nZVNldF8xLmFkZEtleShwa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YW50VmFsdWVzXzEgJiYgcGtSYW5nZVNldF8xLmFkZEtleShjdXJzb3JfMS5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZVttZXRob2RdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlQ2xvbmU7XG4gICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHRyYWNrQWZmZWN0ZWRJbmRleGVzKGdldFJhbmdlU2V0LCBzY2hlbWEsIG9sZE9ianMsIG5ld09ianMpIHtcbiAgICAgICAgZnVuY3Rpb24gYWRkQWZmZWN0ZWRJbmRleChpeCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlU2V0ID0gZ2V0UmFuZ2VTZXQoaXgubmFtZSB8fCBcIlwiKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4dHJhY3RLZXkob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsID8gaXguZXh0cmFjdEtleShvYmopIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhZGRLZXlPcktleXMgPSBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBpeC5tdWx0aUVudHJ5ICYmIGlzQXJyYXkoa2V5KVxuICAgICAgICAgICAgICAgID8ga2V5LmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gcmFuZ2VTZXQuYWRkS2V5KGtleSk7IH0pXG4gICAgICAgICAgICAgICAgOiByYW5nZVNldC5hZGRLZXkoa2V5KTsgfTtcbiAgICAgICAgICAgIChvbGRPYmpzIHx8IG5ld09ianMpLmZvckVhY2goZnVuY3Rpb24gKF8sIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkS2V5ID0gb2xkT2JqcyAmJiBleHRyYWN0S2V5KG9sZE9ianNbaV0pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdLZXkgPSBuZXdPYmpzICYmIGV4dHJhY3RLZXkobmV3T2Jqc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNtcChvbGRLZXksIG5ld0tleSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZEtleSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkS2V5T3JLZXlzKG9sZEtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdLZXkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleU9yS2V5cyhuZXdLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5pbmRleGVzLmZvckVhY2goYWRkQWZmZWN0ZWRJbmRleCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRqdXN0T3B0aW1pc3RpY0Zyb21GYWlsdXJlcyh0YmxDYWNoZSwgcmVxLCByZXMpIHtcbiAgICAgICAgaWYgKHJlcy5udW1GYWlsdXJlcyA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXE7XG4gICAgICAgIGlmIChyZXEudHlwZSA9PT0gJ2RlbGV0ZVJhbmdlJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG51bUJ1bGtPcHMgPSByZXEua2V5c1xuICAgICAgICAgICAgPyByZXEua2V5cy5sZW5ndGhcbiAgICAgICAgICAgIDogJ3ZhbHVlcycgaW4gcmVxICYmIHJlcS52YWx1ZXNcbiAgICAgICAgICAgICAgICA/IHJlcS52YWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICAgOiAxO1xuICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID09PSBudW1CdWxrT3BzKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xvbmUgPSBfX2Fzc2lnbih7fSwgcmVxKTtcbiAgICAgICAgaWYgKGlzQXJyYXkoY2xvbmUua2V5cykpIHtcbiAgICAgICAgICAgIGNsb25lLmtleXMgPSBjbG9uZS5rZXlzLmZpbHRlcihmdW5jdGlvbiAoXywgaSkgeyByZXR1cm4gIShpIGluIHJlcy5mYWlsdXJlcyk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgndmFsdWVzJyBpbiBjbG9uZSAmJiBpc0FycmF5KGNsb25lLnZhbHVlcykpIHtcbiAgICAgICAgICAgIGNsb25lLnZhbHVlcyA9IGNsb25lLnZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKF8sIGkpIHsgcmV0dXJuICEoaSBpbiByZXMuZmFpbHVyZXMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBYm92ZUxvd2VyKGtleSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlLmxvd2VyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgOiByYW5nZS5sb3dlck9wZW5cbiAgICAgICAgICAgICAgICA/IGNtcChrZXksIHJhbmdlLmxvd2VyKSA+IDBcbiAgICAgICAgICAgICAgICA6IGNtcChrZXksIHJhbmdlLmxvd2VyKSA+PSAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0JlbG93VXBwZXIoa2V5LCByYW5nZSkge1xuICAgICAgICByZXR1cm4gcmFuZ2UudXBwZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICA6IHJhbmdlLnVwcGVyT3BlblxuICAgICAgICAgICAgICAgID8gY21wKGtleSwgcmFuZ2UudXBwZXIpIDwgMFxuICAgICAgICAgICAgICAgIDogY21wKGtleSwgcmFuZ2UudXBwZXIpIDw9IDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzV2l0aGluUmFuZ2Uoa2V5LCByYW5nZSkge1xuICAgICAgICByZXR1cm4gaXNBYm92ZUxvd2VyKGtleSwgcmFuZ2UpICYmIGlzQmVsb3dVcHBlcihrZXksIHJhbmdlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHBseU9wdGltaXN0aWNPcHMocmVzdWx0LCByZXEsIG9wcywgdGFibGUsIGNhY2hlRW50cnksIGltbXV0YWJsZSkge1xuICAgICAgICBpZiAoIW9wcyB8fCBvcHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gcmVxLnF1ZXJ5LmluZGV4O1xuICAgICAgICB2YXIgbXVsdGlFbnRyeSA9IGluZGV4Lm11bHRpRW50cnk7XG4gICAgICAgIHZhciBxdWVyeVJhbmdlID0gcmVxLnF1ZXJ5LnJhbmdlO1xuICAgICAgICB2YXIgcHJpbWFyeUtleSA9IHRhYmxlLnNjaGVtYS5wcmltYXJ5S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdFByaW1LZXkgPSBwcmltYXJ5S2V5LmV4dHJhY3RLZXk7XG4gICAgICAgIHZhciBleHRyYWN0SW5kZXggPSBpbmRleC5leHRyYWN0S2V5O1xuICAgICAgICB2YXIgZXh0cmFjdExvd0xldmVsSW5kZXggPSAoaW5kZXgubG93TGV2ZWxJbmRleCB8fCBpbmRleCkuZXh0cmFjdEtleTtcbiAgICAgICAgdmFyIGZpbmFsUmVzdWx0ID0gb3BzLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBvcCkge1xuICAgICAgICAgICAgdmFyIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZWRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChvcC50eXBlID09PSAnYWRkJyB8fCBvcC50eXBlID09PSAncHV0Jykge1xuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZFBLcyA9IG5ldyBSYW5nZVNldCgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBvcC52YWx1ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3AudmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGsgPSBleHRyYWN0UHJpbUtleSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlZFBLcy5oYXNLZXkocGspKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBleHRyYWN0SW5kZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobXVsdGlFbnRyeSAmJiBpc0FycmF5KGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8ga2V5LnNvbWUoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGlzV2l0aGluUmFuZ2UoaywgcXVlcnlSYW5nZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGlzV2l0aGluUmFuZ2Uoa2V5LCBxdWVyeVJhbmdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRQS3MuYWRkS2V5KHBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkVmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWRkJzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdLZXlzXzEgPSBuZXcgUmFuZ2VTZXQoKS5hZGRLZXlzKHJlcS52YWx1ZXMgPyByZXN1bHQubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBleHRyYWN0UHJpbUtleSh2KTsgfSkgOiByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBtb2RpZmVkUmVzdWx0ID0gcmVzdWx0LmNvbmNhdChyZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGluY2x1ZGVkVmFsdWVzLmZpbHRlcihmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBleHRyYWN0UHJpbUtleSh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzXzEuaGFzS2V5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0tleXNfMS5hZGRLZXkoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGluY2x1ZGVkVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0tleXNfMS5oYXNLZXkoaykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0tleXNfMS5hZGRLZXkoayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdwdXQnOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlTZXRfMSA9IG5ldyBSYW5nZVNldCgpLmFkZEtleXMob3AudmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFrZXlTZXRfMS5oYXNLZXkocmVxLnZhbHVlcyA/IGV4dHJhY3RQcmltS2V5KGl0ZW0pIDogaXRlbSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICByZXEudmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGluY2x1ZGVkVmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGluY2x1ZGVkVmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gZXh0cmFjdFByaW1LZXkodik7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzVG9EZWxldGVfMSA9IG5ldyBSYW5nZVNldCgpLmFkZEtleXMob3Aua2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmZWRSZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWtleXNUb0RlbGV0ZV8xLmhhc0tleShyZXEudmFsdWVzID8gZXh0cmFjdFByaW1LZXkoaXRlbSkgOiBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlXzEgPSBvcC5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZlZFJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICFpc1dpdGhpblJhbmdlKGV4dHJhY3RQcmltS2V5KGl0ZW0pLCByYW5nZV8xKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZGlmZWRSZXN1bHQ7XG4gICAgICAgIH0sIHJlc3VsdCk7XG4gICAgICAgIGlmIChmaW5hbFJlc3VsdCA9PT0gcmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgZmluYWxSZXN1bHQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGNtcChleHRyYWN0TG93TGV2ZWxJbmRleChhKSwgZXh0cmFjdExvd0xldmVsSW5kZXgoYikpIHx8XG4gICAgICAgICAgICAgICAgY21wKGV4dHJhY3RQcmltS2V5KGEpLCBleHRyYWN0UHJpbUtleShiKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVxLmxpbWl0ICYmIHJlcS5saW1pdCA8IEluZmluaXR5KSB7XG4gICAgICAgICAgICBpZiAoZmluYWxSZXN1bHQubGVuZ3RoID4gcmVxLmxpbWl0KSB7XG4gICAgICAgICAgICAgICAgZmluYWxSZXN1bHQubGVuZ3RoID0gcmVxLmxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gcmVxLmxpbWl0ICYmIGZpbmFsUmVzdWx0Lmxlbmd0aCA8IHJlcS5saW1pdCkge1xuICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbW11dGFibGUgPyBPYmplY3QuZnJlZXplKGZpbmFsUmVzdWx0KSA6IGZpbmFsUmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFyZVJhbmdlc0VxdWFsKHIxLCByMikge1xuICAgICAgICByZXR1cm4gKGNtcChyMS5sb3dlciwgcjIubG93ZXIpID09PSAwICYmXG4gICAgICAgICAgICBjbXAocjEudXBwZXIsIHIyLnVwcGVyKSA9PT0gMCAmJlxuICAgICAgICAgICAgISFyMS5sb3dlck9wZW4gPT09ICEhcjIubG93ZXJPcGVuICYmXG4gICAgICAgICAgICAhIXIxLnVwcGVyT3BlbiA9PT0gISFyMi51cHBlck9wZW4pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBhcmVMb3dlcnMobG93ZXIxLCBsb3dlcjIsIGxvd2VyT3BlbjEsIGxvd2VyT3BlbjIpIHtcbiAgICAgICAgaWYgKGxvd2VyMSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGxvd2VyMiAhPT0gdW5kZWZpbmVkID8gLTEgOiAwO1xuICAgICAgICBpZiAobG93ZXIyID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgdmFyIGMgPSBjbXAobG93ZXIxLCBsb3dlcjIpO1xuICAgICAgICBpZiAoYyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGxvd2VyT3BlbjEgJiYgbG93ZXJPcGVuMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmIChsb3dlck9wZW4xKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKGxvd2VyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlVXBwZXJzKHVwcGVyMSwgdXBwZXIyLCB1cHBlck9wZW4xLCB1cHBlck9wZW4yKSB7XG4gICAgICAgIGlmICh1cHBlcjEgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB1cHBlcjIgIT09IHVuZGVmaW5lZCA/IDEgOiAwO1xuICAgICAgICBpZiAodXBwZXIyID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIHZhciBjID0gY21wKHVwcGVyMSwgdXBwZXIyKTtcbiAgICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgICAgIGlmICh1cHBlck9wZW4xICYmIHVwcGVyT3BlbjIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAodXBwZXJPcGVuMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTdXBlclJhbmdlKHIxLCByMikge1xuICAgICAgICByZXR1cm4gKGNvbXBhcmVMb3dlcnMocjEubG93ZXIsIHIyLmxvd2VyLCByMS5sb3dlck9wZW4sIHIyLmxvd2VyT3BlbikgPD0gMCAmJlxuICAgICAgICAgICAgY29tcGFyZVVwcGVycyhyMS51cHBlciwgcjIudXBwZXIsIHIxLnVwcGVyT3BlbiwgcjIudXBwZXJPcGVuKSA+PSAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaW5kQ29tcGF0aWJsZVF1ZXJ5KGRiTmFtZSwgdGFibGVOYW1lLCB0eXBlLCByZXEpIHtcbiAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICBpZiAoIXRibENhY2hlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgcXVlcmllcyA9IHRibENhY2hlLnF1ZXJpZXNbdHlwZV07XG4gICAgICAgIGlmICghcXVlcmllcylcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgZmFsc2UsIHRibENhY2hlLCBudWxsXTtcbiAgICAgICAgdmFyIGluZGV4TmFtZSA9IHJlcS5xdWVyeSA/IHJlcS5xdWVyeS5pbmRleC5uYW1lIDogbnVsbDtcbiAgICAgICAgdmFyIGVudHJpZXMgPSBxdWVyaWVzW2luZGV4TmFtZSB8fCAnJ107XG4gICAgICAgIGlmICghZW50cmllcylcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgZmFsc2UsIHRibENhY2hlLCBudWxsXTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgICAgICAgICAgdmFyIGVxdWFsRW50cnkgPSBlbnRyaWVzLmZpbmQoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5yZXEubGltaXQgPT09IHJlcS5saW1pdCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucmVxLnZhbHVlcyA9PT0gcmVxLnZhbHVlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJlUmFuZ2VzRXF1YWwoZW50cnkucmVxLnF1ZXJ5LnJhbmdlLCByZXEucXVlcnkucmFuZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChlcXVhbEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgZXF1YWxFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXMsXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIHN1cGVyRW50cnkgPSBlbnRyaWVzLmZpbmQoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW1pdCA9ICdsaW1pdCcgaW4gZW50cnkucmVxID8gZW50cnkucmVxLmxpbWl0IDogSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobGltaXQgPj0gcmVxLmxpbWl0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVxLnZhbHVlcyA/IGVudHJ5LnJlcS52YWx1ZXMgOiB0cnVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdXBlclJhbmdlKGVudHJ5LnJlcS5xdWVyeS5yYW5nZSwgcmVxLnF1ZXJ5LnJhbmdlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtzdXBlckVudHJ5LCBmYWxzZSwgdGJsQ2FjaGUsIGVudHJpZXNdO1xuICAgICAgICAgICAgY2FzZSAnY291bnQnOlxuICAgICAgICAgICAgICAgIHZhciBjb3VudFF1ZXJ5ID0gZW50cmllcy5maW5kKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJlUmFuZ2VzRXF1YWwoZW50cnkucmVxLnF1ZXJ5LnJhbmdlLCByZXEucXVlcnkucmFuZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBbY291bnRRdWVyeSwgISFjb3VudFF1ZXJ5LCB0YmxDYWNoZSwgZW50cmllc107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmVUb0NhY2hlRW50cnkoY2FjaGVFbnRyeSwgY29udGFpbmVyLCByZXF1ZXJ5LCBzaWduYWwpIHtcbiAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5hZGQocmVxdWVyeSk7XG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5kZWxldGUocmVxdWVyeSk7XG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZW5xdWVGb3JEZWxldGlvbihjYWNoZUVudHJ5LCBjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5xdWVGb3JEZWxldGlvbihjYWNoZUVudHJ5LCBjb250YWluZXIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKGNvbnRhaW5lciwgY2FjaGVFbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cblxuICAgIHZhciBjYWNoZU1pZGRsZXdhcmUgPSB7XG4gICAgICAgIHN0YWNrOiAnZGJjb3JlJyxcbiAgICAgICAgbGV2ZWw6IDAsXG4gICAgICAgIG5hbWU6ICdDYWNoZScsXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGNvcmUpIHtcbiAgICAgICAgICAgIHZhciBkYk5hbWUgPSBjb3JlLnNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgdmFyIGNvcmVNVyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb3JlKSwgeyB0cmFuc2FjdGlvbjogZnVuY3Rpb24gKHN0b3JlcywgbW9kZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWRidHJhbnMgPSBjb3JlLnRyYW5zYWN0aW9uKHN0b3JlcywgbW9kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjXzEgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2lnbmFsID0gYWNfMS5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAod2FzQ29tbWl0dGVkKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNfMS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmVhZHdyaXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWZmZWN0ZWRTdWJzY3JpYmVyc18xID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHN0b3Jlc18xID0gc3RvcmVzOyBfaSA8IHN0b3Jlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHN0b3Jlc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YmxDYWNoZSA9IGNhY2hlW1wiaWRiOi8vXCIuY29uY2F0KGRiTmFtZSwgXCIvXCIpLmNvbmNhdChzdG9yZU5hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YmxDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGNvcmUudGFibGUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3BzID0gdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5maWx0ZXIoZnVuY3Rpb24gKG9wKSB7IHJldHVybiBvcC50cmFucyA9PT0gaWRidHJhbnM7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZGJ0cmFucy5fZXhwbGljaXQgJiYgd2FzQ29tbWl0dGVkICYmIGlkYnRyYW5zLm11dGF0ZWRQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gT2JqZWN0LnZhbHVlcyh0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5KTsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyaWVzID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IGVudHJpZXMuc2xpY2UoKTsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBfZFtfY107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ic1NldHNPdmVybGFwKGVudHJ5Lm9ic1NldCwgaWRidHJhbnMubXV0YXRlZFBhcnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1ZXJ5KSB7IHJldHVybiBhZmZlY3RlZFN1YnNjcmliZXJzXzEuYWRkKHJlcXVlcnkpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3BzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcyA9IHRibENhY2hlLm9wdGltaXN0aWNPcHMuZmlsdGVyKGZ1bmN0aW9uIChvcCkgeyByZXR1cm4gb3AudHJhbnMgIT09IGlkYnRyYW5zOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2UgPSAwLCBfZiA9IE9iamVjdC52YWx1ZXModGJsQ2FjaGUucXVlcmllcy5xdWVyeSk7IF9lIDwgX2YubGVuZ3RoOyBfZSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cmllcyA9IF9mW19lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9nID0gMCwgX2ggPSBlbnRyaWVzLnNsaWNlKCk7IF9nIDwgX2gubGVuZ3RoOyBfZysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2hbX2ddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5yZXMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGJ0cmFucy5tdXRhdGVkUGFydHNcbiAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhc0NvbW1pdHRlZCAmJiAhZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemVSZXN1bHRzID0gT2JqZWN0LmlzRnJvemVuKGVudHJ5LnJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kUmVzID0gYXBwbHlPcHRpbWlzdGljT3BzKGVudHJ5LnJlcywgZW50cnkucmVxLCBvcHMsIHRhYmxlLCBlbnRyeSwgZnJlZXplUmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIGFmZmVjdGVkU3Vic2NyaWJlcnNfMS5hZGQocmVxdWVyeSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kUmVzICE9PSBlbnRyeS5yZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5yZXMgPSBtb2RSZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkucHJvbWlzZSA9IERleGllUHJvbWlzZS5yZXNvbHZlKHsgcmVzdWx0OiBtb2RSZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxBcnJheUl0ZW0oZW50cmllcywgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWVyeSkgeyByZXR1cm4gYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmFkZChyZXF1ZXJ5KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRTdWJzY3JpYmVyc18xLmZvckVhY2goZnVuY3Rpb24gKHJlcXVlcnkpIHsgcmV0dXJuIHJlcXVlcnkoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZW5kVHJhbnNhY3Rpb24oZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZW5kVHJhbnNhY3Rpb24oZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkYnRyYW5zLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgZW5kVHJhbnNhY3Rpb24odHJ1ZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IHNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZGJ0cmFucztcbiAgICAgICAgICAgICAgICB9LCB0YWJsZTogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZG93blRhYmxlID0gY29yZS50YWJsZSh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbUtleSA9IGRvd25UYWJsZS5zY2hlbWEucHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlTVcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG93blRhYmxlKSwgeyBtdXRhdGU6IGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnMgPSBQU0QudHJhbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkub3V0Ym91bmQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuZGIuX29wdGlvbnMuY2FjaGUgPT09ICdkaXNhYmxlZCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuZXhwbGljaXQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMubW9kZSAhPT0gJ3JlYWR3cml0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25UYWJsZS5tdXRhdGUocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRibENhY2hlID0gY2FjaGVbXCJpZGI6Ly9cIi5jb25jYXQoZGJOYW1lLCBcIi9cIikuY29uY2F0KHRhYmxlTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGJsQ2FjaGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkb3duVGFibGUubXV0YXRlKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXEudHlwZSA9PT0gJ2FkZCcgfHwgcmVxLnR5cGUgPT09ICdwdXQnKSAmJiAocmVxLnZhbHVlcy5sZW5ndGggPj0gNTAgfHwgZ2V0RWZmZWN0aXZlS2V5cyhwcmltS2V5LCByZXEpLnNvbWUoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5ID09IG51bGw7IH0pKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcVdpdGhSZXNvbHZlZEtleXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVxKSwgeyB2YWx1ZXM6IHJlcS52YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZmFpbHVyZXNbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZVdpdGhLZXkgPSAoKF9hID0gcHJpbUtleS5rZXlQYXRoKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoJy4nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGVlcENsb25lKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfX2Fzc2lnbih7fSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgodmFsdWVXaXRoS2V5LCBwcmltS2V5LmtleVBhdGgsIHJlcy5yZXN1bHRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlV2l0aEtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFJlcSA9IGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcVdpdGhSZXNvbHZlZEtleXMsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLnB1c2goYWRqdXN0ZWRSZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5tdXRhdGVkUGFydHMgJiYgc2lnbmFsU3Vic2NyaWJlcnNMYXppbHkocmVxLm11dGF0ZWRQYXJ0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm51bUZhaWx1cmVzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbSh0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFJlcSA9IGFkanVzdE9wdGltaXN0aWNGcm9tRmFpbHVyZXModGJsQ2FjaGUsIHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRqdXN0ZWRSZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUub3B0aW1pc3RpY09wcy5wdXNoKGFkanVzdGVkUmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm11dGF0ZWRQYXJ0cyAmJiBzaWduYWxTdWJzY3JpYmVyc0xhemlseShyZXEubXV0YXRlZFBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQXJyYXlJdGVtKHRibENhY2hlLm9wdGltaXN0aWNPcHMsIHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEubXV0YXRlZFBhcnRzICYmIHNpZ25hbFN1YnNjcmliZXJzTGF6aWx5KHJlcS5tdXRhdGVkUGFydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBxdWVyeTogZnVuY3Rpb24gKHJlcSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FjaGFibGVDb250ZXh0KFBTRCwgZG93blRhYmxlKSB8fCAhaXNDYWNoYWJsZVJlcXVlc3QoXCJxdWVyeVwiLCByZXEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG93blRhYmxlLnF1ZXJ5KHJlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyZWV6ZVJlc3VsdHMgPSAoKF9hID0gUFNELnRyYW5zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGIuX29wdGlvbnMuY2FjaGUpID09PSAnaW1tdXRhYmxlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2IgPSBQU0QsIHJlcXVlcnkgPSBfYi5yZXF1ZXJ5LCBzaWduYWwgPSBfYi5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gZmluZENvbXBhdGlibGVRdWVyeShkYk5hbWUsIHRhYmxlTmFtZSwgJ3F1ZXJ5JywgcmVxKSwgY2FjaGVFbnRyeSA9IF9jWzBdLCBleGFjdE1hdGNoID0gX2NbMV0sIHRibENhY2hlID0gX2NbMl0sIGNvbnRhaW5lciA9IF9jWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5ICYmIGV4YWN0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5vYnNTZXQgPSByZXEub2JzU2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkb3duVGFibGUucXVlcnkocmVxKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5yZXMgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlZXplUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHJlc3VsdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5yZXN1bHQgPSBkZWVwQ2xvbmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAmJiBjYWNoZUVudHJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbEFycmF5SXRlbShjb250YWluZXIsIGNhY2hlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNTZXQ6IHJlcS5vYnNTZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXE6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnB1c2goY2FjaGVFbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBbY2FjaGVFbnRyeV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRibENhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJsQ2FjaGUgPSBjYWNoZVtcImlkYjovL1wiLmNvbmNhdChkYk5hbWUsIFwiL1wiKS5jb25jYXQodGFibGVOYW1lKV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljT3BzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduYWxlZFBhcnRzOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YmxDYWNoZS5xdWVyaWVzLnF1ZXJ5W3JlcS5xdWVyeS5pbmRleC5uYW1lIHx8ICcnXSA9IGNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVUb0NhY2hlRW50cnkoY2FjaGVFbnRyeSwgY29udGFpbmVyLCByZXF1ZXJ5LCBzaWduYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5LnByb21pc2UudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGFwcGx5T3B0aW1pc3RpY09wcyhyZXMucmVzdWx0LCByZXEsIHRibENhY2hlID09PSBudWxsIHx8IHRibENhY2hlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YmxDYWNoZS5vcHRpbWlzdGljT3BzLCBkb3duVGFibGUsIGNhY2hlRW50cnksIGZyZWV6ZVJlc3VsdHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlTVc7XG4gICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb3JlTVc7XG4gICAgICAgIH0sXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHZpcGlmeSh0YXJnZXQsIHZpcERiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodGFyZ2V0LCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkYicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXBEYjtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBEZXhpZSQxID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERleGllKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLl9taWRkbGV3YXJlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy52ZXJubyA9IDA7XG4gICAgICAgICAgICB2YXIgZGVwcyA9IERleGllLmRlcGVuZGVuY2llcztcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zID0gX19hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGFkZG9uczogRGV4aWUuYWRkb25zLCBhdXRvT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IGRlcHMuaW5kZXhlZERCLCBJREJLZXlSYW5nZTogZGVwcy5JREJLZXlSYW5nZSwgY2FjaGU6ICdjbG9uZWQnIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fZGVwcyA9IHtcbiAgICAgICAgICAgICAgICBpbmRleGVkREI6IG9wdGlvbnMuaW5kZXhlZERCLFxuICAgICAgICAgICAgICAgIElEQktleVJhbmdlOiBvcHRpb25zLklEQktleVJhbmdlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGFkZG9ucyA9IG9wdGlvbnMuYWRkb25zO1xuICAgICAgICAgICAgdGhpcy5fZGJTY2hlbWEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25zID0gW107XG4gICAgICAgICAgICB0aGlzLl9zdG9yZU5hbWVzID0gW107XG4gICAgICAgICAgICB0aGlzLl9hbGxUYWJsZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaWRiZGIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fbm92aXAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGRiT3BlbkVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgIGlzQmVpbmdPcGVuZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG9uUmVhZHlCZWluZ0ZpcmVkOiBudWxsLFxuICAgICAgICAgICAgICAgIG9wZW5Db21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGJSZWFkeVJlc29sdmU6IG5vcCxcbiAgICAgICAgICAgICAgICBkYlJlYWR5UHJvbWlzZTogbnVsbCxcbiAgICAgICAgICAgICAgICBjYW5jZWxPcGVuOiBub3AsXG4gICAgICAgICAgICAgICAgb3BlbkNhbmNlbGxlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBhdXRvU2NoZW1hOiB0cnVlLFxuICAgICAgICAgICAgICAgIFBSMTM5OF9tYXhMb29wOiAzLFxuICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBvcHRpb25zLmF1dG9PcGVuLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlQcm9taXNlID0gbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmRiUmVhZHlSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUub3BlbkNhbmNlbGxlciA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5vbiA9IEV2ZW50cyh0aGlzLCBcInBvcHVsYXRlXCIsIFwiYmxvY2tlZFwiLCBcInZlcnNpb25jaGFuZ2VcIiwgXCJjbG9zZVwiLCB7IHJlYWR5OiBbcHJvbWlzYWJsZUNoYWluLCBub3BdIH0pO1xuICAgICAgICAgICAgdGhpcy5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbihldmVudCkudW5zdWJzY3JpYmUoZm4pO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub24oZXZlbnQsIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uLnJlYWR5LnN1YnNjcmliZSA9IG92ZXJyaWRlKHRoaXMub24ucmVhZHkuc3Vic2NyaWJlLCBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBiU3RpY2t5KSB7XG4gICAgICAgICAgICAgICAgICAgIERleGllLnZpcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBfdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUub3BlbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5kYk9wZW5FcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGV4aWVQcm9taXNlLnJlc29sdmUoKS50aGVuKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiU3RpY2t5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5vblJlYWR5QmVpbmdGaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm9uUmVhZHlCZWluZ0ZpcmVkLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJTdGlja3kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGJfMSA9IF90aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYlN0aWNreSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJfMS5vbi5yZWFkeS51bnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiXzEub24ucmVhZHkudW5zdWJzY3JpYmUodW5zdWJzY3JpYmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5Db2xsZWN0aW9uID0gY3JlYXRlQ29sbGVjdGlvbkNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5UYWJsZSA9IGNyZWF0ZVRhYmxlQ29uc3RydWN0b3IodGhpcyk7XG4gICAgICAgICAgICB0aGlzLlRyYW5zYWN0aW9uID0gY3JlYXRlVHJhbnNhY3Rpb25Db25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuVmVyc2lvbiA9IGNyZWF0ZVZlcnNpb25Db25zdHJ1Y3Rvcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuV2hlcmVDbGF1c2UgPSBjcmVhdGVXaGVyZUNsYXVzZUNvbnN0cnVjdG9yKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbihcInZlcnNpb25jaGFuZ2VcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2Lm5ld1ZlcnNpb24gPiAwKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbm90aGVyIGNvbm5lY3Rpb24gd2FudHMgdG8gdXBncmFkZSBkYXRhYmFzZSAnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJy4gQ2xvc2luZyBkYiBub3cgdG8gcmVzdW1lIHRoZSB1cGdyYWRlLlwiKSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbm90aGVyIGNvbm5lY3Rpb24gd2FudHMgdG8gZGVsZXRlIGRhdGFiYXNlICdcIi5jb25jYXQoX3RoaXMubmFtZSwgXCInLiBDbG9zaW5nIGRiIG5vdyB0byByZXN1bWUgdGhlIGRlbGV0ZSByZXF1ZXN0LlwiKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKFwiYmxvY2tlZFwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2Lm5ld1ZlcnNpb24gfHwgZXYubmV3VmVyc2lvbiA8IGV2Lm9sZFZlcnNpb24pXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkRleGllLmRlbGV0ZSgnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJykgd2FzIGJsb2NrZWRcIikpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVXBncmFkZSAnXCIuY29uY2F0KF90aGlzLm5hbWUsIFwiJyBibG9ja2VkIGJ5IG90aGVyIGNvbm5lY3Rpb24gaG9sZGluZyB2ZXJzaW9uIFwiKS5jb25jYXQoZXYub2xkVmVyc2lvbiAvIDEwKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX21heEtleSA9IGdldE1heEtleShvcHRpb25zLklEQktleVJhbmdlKTtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbikgeyByZXR1cm4gbmV3IF90aGlzLlRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBfdGhpcy5fb3B0aW9ucy5jaHJvbWVUcmFuc2FjdGlvbkR1cmFiaWxpdHksIHBhcmVudFRyYW5zYWN0aW9uKTsgfTtcbiAgICAgICAgICAgIHRoaXMuX2ZpcmVPbkJsb2NrZWQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vbihcImJsb2NrZWRcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5uYW1lID09PSBfdGhpcy5uYW1lICYmIGMgIT09IF90aGlzICYmICFjLl9zdGF0ZS52Y0ZpcmVkOyB9KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLm9uKFwidmVyc2lvbmNoYW5nZVwiKS5maXJlKGV2KTsgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51c2UoY2FjaGVFeGlzdGluZ1ZhbHVlc01pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2UoY2FjaGVNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKG9ic2VydmFiaWxpdHlNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHRoaXMudXNlKHZpcnR1YWxJbmRleE1pZGRsZXdhcmUpO1xuICAgICAgICAgICAgdGhpcy51c2UoaG9va3NNaWRkbGV3YXJlKTtcbiAgICAgICAgICAgIHZhciB2aXBEQiA9IG5ldyBQcm94eSh0aGlzLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdfdmlwJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFibGVOYW1lKSB7IHJldHVybiB2aXBpZnkoX3RoaXMudGFibGUodGFibGVOYW1lKSwgdmlwREIpOyB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBSZWZsZWN0LmdldChfLCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChydiBpbnN0YW5jZW9mIFRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcGlmeShydiwgdmlwREIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3RhYmxlcycpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnYubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB2aXBpZnkodCwgdmlwREIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdfY3JlYXRlVHJhbnNhY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHggPSBydi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aXBpZnkodHgsIHZpcERCKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlwID0gdmlwREI7XG4gICAgICAgICAgICBhZGRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWRkb24pIHsgcmV0dXJuIGFkZG9uKF90aGlzKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbk51bWJlcikge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHZlcnNpb25OdW1iZXIpIHx8IHZlcnNpb25OdW1iZXIgPCAwLjEpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVHlwZShcIkdpdmVuIHZlcnNpb24gaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyXCIpO1xuICAgICAgICAgICAgdmVyc2lvbk51bWJlciA9IE1hdGgucm91bmQodmVyc2lvbk51bWJlciAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgaWYgKHRoaXMuaWRiZGIgfHwgdGhpcy5fc3RhdGUuaXNCZWluZ09wZW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJDYW5ub3QgYWRkIHZlcnNpb24gd2hlbiBkYXRhYmFzZSBpcyBvcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy52ZXJubyA9IE1hdGgubWF4KHRoaXMudmVybm8sIHZlcnNpb25OdW1iZXIpO1xuICAgICAgICAgICAgdmFyIHZlcnNpb25zID0gdGhpcy5fdmVyc2lvbnM7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbkluc3RhbmNlID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Ll9jZmcudmVyc2lvbiA9PT0gdmVyc2lvbk51bWJlcjsgfSlbMF07XG4gICAgICAgICAgICBpZiAodmVyc2lvbkluc3RhbmNlKVxuICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uSW5zdGFuY2U7XG4gICAgICAgICAgICB2ZXJzaW9uSW5zdGFuY2UgPSBuZXcgdGhpcy5WZXJzaW9uKHZlcnNpb25OdW1iZXIpO1xuICAgICAgICAgICAgdmVyc2lvbnMucHVzaCh2ZXJzaW9uSW5zdGFuY2UpO1xuICAgICAgICAgICAgdmVyc2lvbnMuc29ydChsb3dlclZlcnNpb25GaXJzdCk7XG4gICAgICAgICAgICB2ZXJzaW9uSW5zdGFuY2Uuc3RvcmVzKHt9KTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlLmF1dG9TY2hlbWEgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uSW5zdGFuY2U7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fd2hlblJlYWR5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmlkYmRiICYmICh0aGlzLl9zdGF0ZS5vcGVuQ29tcGxldGUgfHwgUFNELmxldFRocm91Z2ggfHwgdGhpcy5fdmlwKSkgPyBmbigpIDogbmV3IERleGllUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9zdGF0ZS5vcGVuQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZChfdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5fc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLl9zdGF0ZS5hdXRvT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oKS5jYXRjaChub3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSkudGhlbihmbik7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IF9hLnN0YWNrLCBjcmVhdGUgPSBfYS5jcmVhdGUsIGxldmVsID0gX2EubGV2ZWwsIG5hbWUgPSBfYS5uYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUpXG4gICAgICAgICAgICAgICAgdGhpcy51bnVzZSh7IHN0YWNrOiBzdGFjaywgbmFtZTogbmFtZSB9KTtcbiAgICAgICAgICAgIHZhciBtaWRkbGV3YXJlcyA9IHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSB8fCAodGhpcy5fbWlkZGxld2FyZXNbc3RhY2tdID0gW10pO1xuICAgICAgICAgICAgbWlkZGxld2FyZXMucHVzaCh7IHN0YWNrOiBzdGFjaywgY3JlYXRlOiBjcmVhdGUsIGxldmVsOiBsZXZlbCA9PSBudWxsID8gMTAgOiBsZXZlbCwgbmFtZTogbmFtZSB9KTtcbiAgICAgICAgICAgIG1pZGRsZXdhcmVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEubGV2ZWwgLSBiLmxldmVsOyB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUudW51c2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IF9hLnN0YWNrLCBuYW1lID0gX2EubmFtZSwgY3JlYXRlID0gX2EuY3JlYXRlO1xuICAgICAgICAgICAgaWYgKHN0YWNrICYmIHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXSA9IHRoaXMuX21pZGRsZXdhcmVzW3N0YWNrXS5maWx0ZXIoZnVuY3Rpb24gKG13KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGUgPyBtdy5jcmVhdGUgIT09IGNyZWF0ZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID8gbXcubmFtZSAhPT0gbmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHVzZVBTRChnbG9iYWxQU0QsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBkZXhpZU9wZW4oX3RoaXMpOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMub24uY2xvc2UuZmlyZShuZXcgQ3VzdG9tRXZlbnQoJ2Nsb3NlJykpO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgICAgICB2YXIgaWR4ID0gY29ubmVjdGlvbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlkYmRiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGJkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgdGhpcy5pZGJkYiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYlJlYWR5UHJvbWlzZSA9IG5ldyBEZXhpZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5DYW5jZWxsZXIgPSBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2FuY2VsT3BlbiA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8geyBkaXNhYmxlQXV0b09wZW46IHRydWUgfSA6IF9hLCBkaXNhYmxlQXV0b09wZW4gPSBfYi5kaXNhYmxlQXV0b09wZW47XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlQXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5jYW5jZWxPcGVuKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHN0YXRlLmF1dG9PcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGJPcGVuRXJyb3IgPSBuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hdXRvT3BlbiA9IHRoaXMuX29wdGlvbnMuYXV0b09wZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNCZWluZ09wZW5lZDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kYk9wZW5FcnJvciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoY2xvc2VPcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGNsb3NlT3B0aW9ucyA9PT0gdm9pZCAwKSB7IGNsb3NlT3B0aW9ucyA9IHsgZGlzYWJsZUF1dG9PcGVuOiB0cnVlIH07IH1cbiAgICAgICAgICAgIHZhciBoYXNJbnZhbGlkQXJndW1lbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ29iamVjdCc7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9EZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKGNsb3NlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBfdGhpcy5fZGVwcy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vbkRhdGFiYXNlRGVsZXRlZChfdGhpcy5fZGVwcywgX3RoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25ibG9ja2VkID0gX3RoaXMuX2ZpcmVPbkJsb2NrZWQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzSW52YWxpZEFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBjbG9zZU9wdGlvbnMgYXJndW1lbnQgdG8gZGIuZGVsZXRlKClcIik7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGJSZWFkeVByb21pc2UudGhlbihkb0RlbGV0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb0RlbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEZXhpZS5wcm90b3R5cGUuYmFja2VuZERCID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRiZGI7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZGJkYiAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLmhhc0JlZW5DbG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJPcGVuRXJyb3IgPSB0aGlzLl9zdGF0ZS5kYk9wZW5FcnJvcjtcbiAgICAgICAgICAgIHJldHVybiBkYk9wZW5FcnJvciAmJiAoZGJPcGVuRXJyb3IubmFtZSA9PT0gJ0RhdGFiYXNlQ2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5oYXNGYWlsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUuZGJPcGVuRXJyb3IgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5keW5hbWljYWxseU9wZW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZS5hdXRvU2NoZW1hO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV4aWUucHJvdG90eXBlLCBcInRhYmxlc1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzKHRoaXMuX2FsbFRhYmxlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5fYWxsVGFibGVzW25hbWVdOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgRGV4aWUucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBleHRyYWN0VHJhbnNhY3Rpb25BcmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS5fdHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgdGFibGVzLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFyZW50VHJhbnNhY3Rpb24gPSBQU0QudHJhbnM7XG4gICAgICAgICAgICBpZiAoIXBhcmVudFRyYW5zYWN0aW9uIHx8IHBhcmVudFRyYW5zYWN0aW9uLmRiICE9PSB0aGlzIHx8IG1vZGUuaW5kZXhPZignIScpICE9PSAtMSlcbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB2YXIgb25seUlmQ29tcGF0aWJsZSA9IG1vZGUuaW5kZXhPZignPycpICE9PSAtMTtcbiAgICAgICAgICAgIG1vZGUgPSBtb2RlLnJlcGxhY2UoJyEnLCAnJykucmVwbGFjZSgnPycsICcnKTtcbiAgICAgICAgICAgIHZhciBpZGJNb2RlLCBzdG9yZU5hbWVzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG9yZU5hbWVzID0gdGFibGVzLm1hcChmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHRhYmxlIGluc3RhbmNlb2YgX3RoaXMuVGFibGUgPyB0YWJsZS5uYW1lIDogdGFibGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVOYW1lICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhYmxlIGFyZ3VtZW50IHRvIERleGllLnRyYW5zYWN0aW9uKCkuIE9ubHkgVGFibGUgb3IgU3RyaW5nIGFyZSBhbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlID09IFwiclwiIHx8IG1vZGUgPT09IFJFQURPTkxZKVxuICAgICAgICAgICAgICAgICAgICBpZGJNb2RlID0gUkVBRE9OTFk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PSBcInJ3XCIgfHwgbW9kZSA9PSBSRUFEV1JJVEUpXG4gICAgICAgICAgICAgICAgICAgIGlkYk1vZGUgPSBSRUFEV1JJVEU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJJbnZhbGlkIHRyYW5zYWN0aW9uIG1vZGU6IFwiICsgbW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbi5tb2RlID09PSBSRUFET05MWSAmJiBpZGJNb2RlID09PSBSRUFEV1JJVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlN1YlRyYW5zYWN0aW9uKFwiQ2Fubm90IGVudGVyIGEgc3ViLXRyYW5zYWN0aW9uIHdpdGggUkVBRFdSSVRFIG1vZGUgd2hlbiBwYXJlbnQgdHJhbnNhY3Rpb24gaXMgUkVBRE9OTFlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbiAmJiBwYXJlbnRUcmFuc2FjdGlvbi5zdG9yZU5hbWVzLmluZGV4T2Yoc3RvcmVOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubHlJZkNvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIlRhYmxlIFwiICsgc3RvcmVOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBub3QgaW5jbHVkZWQgaW4gcGFyZW50IHRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSAmJiBwYXJlbnRUcmFuc2FjdGlvbiAmJiAhcGFyZW50VHJhbnNhY3Rpb24uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnRUcmFuc2FjdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uLl9wcm9taXNlKG51bGwsIGZ1bmN0aW9uIChfLCByZWplY3QpIHsgcmVqZWN0KGUpOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbnRlclRyYW5zYWN0aW9uID0gZW50ZXJUcmFuc2FjdGlvblNjb3BlLmJpbmQobnVsbCwgdGhpcywgaWRiTW9kZSwgc3RvcmVOYW1lcywgcGFyZW50VHJhbnNhY3Rpb24sIHNjb3BlRnVuYyk7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudFRyYW5zYWN0aW9uID9cbiAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbi5fcHJvbWlzZShpZGJNb2RlLCBlbnRlclRyYW5zYWN0aW9uLCBcImxvY2tcIikgOlxuICAgICAgICAgICAgICAgIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgICAgIHVzZVBTRChQU0QudHJhbnNsZXNzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fd2hlblJlYWR5KGVudGVyVHJhbnNhY3Rpb24pOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH07XG4gICAgICAgIERleGllLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duKHRoaXMuX2FsbFRhYmxlcywgdGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRUYWJsZShcIlRhYmxlIFwiLmNvbmNhdCh0YWJsZU5hbWUsIFwiIGRvZXMgbm90IGV4aXN0XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxUYWJsZXNbdGFibGVOYW1lXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERleGllO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgc3ltYm9sT2JzZXJ2YWJsZSA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJvYnNlcnZhYmxlXCIgaW4gU3ltYm9sXG4gICAgICAgID8gU3ltYm9sLm9ic2VydmFibGVcbiAgICAgICAgOiBcIkBAb2JzZXJ2YWJsZVwiO1xuICAgIHZhciBPYnNlcnZhYmxlID0gIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICAgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHgsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSgheCB8fCB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geyBuZXh0OiB4LCBlcnJvcjogZXJyb3IsIGNvbXBsZXRlOiBjb21wbGV0ZSB9IDogeCk7XG4gICAgICAgIH07XG4gICAgICAgIE9ic2VydmFibGUucHJvdG90eXBlW3N5bWJvbE9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBPYnNlcnZhYmxlO1xuICAgIH0oKSk7XG5cbiAgICB2YXIgZG9tRGVwcztcbiAgICB0cnkge1xuICAgICAgICBkb21EZXBzID0ge1xuICAgICAgICAgICAgaW5kZXhlZERCOiBfZ2xvYmFsLmluZGV4ZWREQiB8fCBfZ2xvYmFsLm1vekluZGV4ZWREQiB8fCBfZ2xvYmFsLndlYmtpdEluZGV4ZWREQiB8fCBfZ2xvYmFsLm1zSW5kZXhlZERCLFxuICAgICAgICAgICAgSURCS2V5UmFuZ2U6IF9nbG9iYWwuSURCS2V5UmFuZ2UgfHwgX2dsb2JhbC53ZWJraXRJREJLZXlSYW5nZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBkb21EZXBzID0geyBpbmRleGVkREI6IG51bGwsIElEQktleVJhbmdlOiBudWxsIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGl2ZVF1ZXJ5KHF1ZXJpZXIpIHtcbiAgICAgICAgdmFyIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHZhciBjdXJyZW50VmFsdWU7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICB2YXIgc2NvcGVGdW5jSXNBc3luYyA9IGlzQXN5bmNGdW5jdGlvbihxdWVyaWVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoY3R4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdhc1Jvb3RFeGVjID0gYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IG5ld1Njb3BlKHF1ZXJpZXIsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZUZ1bmNJc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydiA9IHJ2LmZpbmFsbHkoZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHdhc1Jvb3RFeGVjICYmIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsb3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGFib3J0Q29udHJvbGxlcjtcbiAgICAgICAgICAgIHZhciBhY2N1bU11dHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50T2JzID0ge307XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgICAgICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9zZWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydGVkTGlzdGVuaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLnVuc3Vic2NyaWJlKG11dGF0aW9uTGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb2JzZXJ2ZXIuc3RhcnQgJiYgb2JzZXJ2ZXIuc3RhcnQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHZhciBzdGFydGVkTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV4ZWNJbkdsb2JhbENvbnRleHQoX2RvUXVlcnkpOyB9O1xuICAgICAgICAgICAgZnVuY3Rpb24gc2hvdWxkTm90aWZ5KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNTZXRzT3ZlcmxhcChjdXJyZW50T2JzLCBhY2N1bU11dHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG11dGF0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbiAocGFydHMpIHtcbiAgICAgICAgICAgICAgICBleHRlbmRPYnNlcnZhYmlsaXR5U2V0KGFjY3VtTXV0cywgcGFydHMpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGROb3RpZnkoKSkge1xuICAgICAgICAgICAgICAgICAgICBkb1F1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBfZG9RdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICFkb21EZXBzLmluZGV4ZWREQilcbiAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3IgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyOiBzdWJzY3IsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVyeTogZG9RdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcjogcXVlcmllcixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnM6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSBleGVjdXRlKGN0eCk7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJldCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkIHx8IGN0eC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjY3VtTXV0cyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50T2JzID0gc3Vic2NyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9iamVjdElzRW1wdHkoY3VycmVudE9icykgJiYgIXN0YXJ0ZWRMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50cyhERVhJRV9TVE9SQUdFX01VVEFURURfRVZFTlRfTkFNRSwgbXV0YXRpb25MaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleGVjSW5HbG9iYWxDb250ZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuICFjbG9zZWQgJiYgb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFbJ0RhdGFiYXNlQ2xvc2VkRXJyb3InLCAnQWJvcnRFcnJvciddLmluY2x1ZGVzKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0luR2xvYmFsQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGRvUXVlcnksIDApO1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmFibGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBoYXNWYWx1ZTsgfTtcbiAgICAgICAgb2JzZXJ2YWJsZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRWYWx1ZTsgfTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgdmFyIERleGllID0gRGV4aWUkMTtcbiAgICBwcm9wcyhEZXhpZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGZ1bGxOYW1lRXhjZXB0aW9ucyksIHtcbiAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoZGF0YWJhc2VOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGIgPSBuZXcgRGV4aWUoZGF0YWJhc2VOYW1lLCB7IGFkZG9uczogW10gfSk7XG4gICAgICAgICAgICByZXR1cm4gZGIuZGVsZXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4aXN0czogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV4aWUobmFtZSwgeyBhZGRvbnM6IFtdIH0pLm9wZW4oKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KS5jYXRjaCgnTm9TdWNoRGF0YWJhc2VFcnJvcicsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RGF0YWJhc2VOYW1lczogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXREYXRhYmFzZU5hbWVzKERleGllLmRlcGVuZGVuY2llcykudGhlbihjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmluZUNsYXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBDbGFzcyhjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIENsYXNzO1xuICAgICAgICB9LCBpZ25vcmVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKHNjb3BlRnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgdXNlUFNEKFBTRC50cmFuc2xlc3MsIHNjb3BlRnVuYykgOlxuICAgICAgICAgICAgICAgIHNjb3BlRnVuYygpO1xuICAgICAgICB9LCB2aXA6IHZpcCwgYXN5bmM6IGZ1bmN0aW9uIChnZW5lcmF0b3JGbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnYgPSBhd2FpdEl0ZXJhdG9yKGdlbmVyYXRvckZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJ2IHx8IHR5cGVvZiBydi50aGVuICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIHNwYXduOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4sIGFyZ3MsIHRoaXopIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGl6LCBhcmdzIHx8IFtdKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFydiB8fCB0eXBlb2YgcnYudGhlbiAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERleGllUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRUcmFuc2FjdGlvbjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBQU0QudHJhbnMgfHwgbnVsbDsgfVxuICAgICAgICB9LCB3YWl0Rm9yOiBmdW5jdGlvbiAocHJvbWlzZU9yRnVuY3Rpb24sIG9wdGlvbmFsVGltZW91dCkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBEZXhpZVByb21pc2UucmVzb2x2ZSh0eXBlb2YgcHJvbWlzZU9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKHByb21pc2VPckZ1bmN0aW9uKSA6XG4gICAgICAgICAgICAgICAgcHJvbWlzZU9yRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgLnRpbWVvdXQob3B0aW9uYWxUaW1lb3V0IHx8IDYwMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgIFBTRC50cmFucy53YWl0Rm9yKHByb21pc2UpIDpcbiAgICAgICAgICAgICAgICBwcm9taXNlO1xuICAgICAgICB9LFxuICAgICAgICBQcm9taXNlOiBEZXhpZVByb21pc2UsXG4gICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlYnVnOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBzZXREZWJ1Zyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlcml2ZTogZGVyaXZlLCBleHRlbmQ6IGV4dGVuZCwgcHJvcHM6IHByb3BzLCBvdmVycmlkZTogb3ZlcnJpZGUsXG4gICAgICAgIEV2ZW50czogRXZlbnRzLCBvbjogZ2xvYmFsRXZlbnRzLCBsaXZlUXVlcnk6IGxpdmVRdWVyeSwgZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldDogZXh0ZW5kT2JzZXJ2YWJpbGl0eVNldCxcbiAgICAgICAgZ2V0QnlLZXlQYXRoOiBnZXRCeUtleVBhdGgsIHNldEJ5S2V5UGF0aDogc2V0QnlLZXlQYXRoLCBkZWxCeUtleVBhdGg6IGRlbEJ5S2V5UGF0aCwgc2hhbGxvd0Nsb25lOiBzaGFsbG93Q2xvbmUsIGRlZXBDbG9uZTogZGVlcENsb25lLCBnZXRPYmplY3REaWZmOiBnZXRPYmplY3REaWZmLCBjbXA6IGNtcCwgYXNhcDogYXNhcCQxLFxuICAgICAgICBtaW5LZXk6IG1pbktleSxcbiAgICAgICAgYWRkb25zOiBbXSxcbiAgICAgICAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zLFxuICAgICAgICBlcnJuYW1lczogZXJybmFtZXMsXG4gICAgICAgIGRlcGVuZGVuY2llczogZG9tRGVwcywgY2FjaGU6IGNhY2hlLFxuICAgICAgICBzZW1WZXI6IERFWElFX1ZFUlNJT04sIHZlcnNpb246IERFWElFX1ZFUlNJT04uc3BsaXQoJy4nKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobikgeyByZXR1cm4gcGFyc2VJbnQobik7IH0pXG4gICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChwLCBjLCBpKSB7IHJldHVybiBwICsgKGMgLyBNYXRoLnBvdygxMCwgaSAqIDIpKTsgfSkgfSkpO1xuICAgIERleGllLm1heEtleSA9IGdldE1heEtleShEZXhpZS5kZXBlbmRlbmNpZXMuSURCS2V5UmFuZ2UpO1xuXG4gICAgaWYgKHR5cGVvZiBkaXNwYXRjaEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAodXBkYXRlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudF8xO1xuICAgICAgICAgICAgICAgIGV2ZW50XzEgPSBuZXcgQ3VzdG9tRXZlbnQoU1RPUkFHRV9NVVRBVEVEX0RPTV9FVkVOVF9OQU1FLCB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogdXBkYXRlZFBhcnRzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIGRldGFpbCA9IF9hLmRldGFpbDtcbiAgICAgICAgICAgIGlmICghcHJvcGFnYXRpbmdMb2NhbGx5KSB7XG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlTG9jYWxseShkZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGFnYXRlTG9jYWxseSh1cGRhdGVQYXJ0cykge1xuICAgICAgICB2YXIgd2FzTWUgPSBwcm9wYWdhdGluZ0xvY2FsbHk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9wYWdhdGluZ0xvY2FsbHkgPSB0cnVlO1xuICAgICAgICAgICAgZ2xvYmFsRXZlbnRzLnN0b3JhZ2VtdXRhdGVkLmZpcmUodXBkYXRlUGFydHMpO1xuICAgICAgICAgICAgc2lnbmFsU3Vic2NyaWJlcnNOb3codXBkYXRlUGFydHMsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvcGFnYXRpbmdMb2NhbGx5ID0gd2FzTWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHByb3BhZ2F0aW5nTG9jYWxseSA9IGZhbHNlO1xuXG4gICAgdmFyIGJjO1xuICAgIHZhciBjcmVhdGVCQyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBpZiAodHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0ZUJDID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmMgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChTVE9SQUdFX01VVEFURURfRE9NX0VWRU5UX05BTUUpO1xuICAgICAgICAgICAgYmMub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2KSB7IHJldHVybiBldi5kYXRhICYmIHByb3BhZ2F0ZUxvY2FsbHkoZXYuZGF0YSk7IH07XG4gICAgICAgIH07XG4gICAgICAgIGNyZWF0ZUJDKCk7XG4gICAgICAgIGlmICh0eXBlb2YgYmMudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGJjLnVucmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsRXZlbnRzKERFWElFX1NUT1JBR0VfTVVUQVRFRF9FVkVOVF9OQU1FLCBmdW5jdGlvbiAoY2hhbmdlZFBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BhZ2F0aW5nTG9jYWxseSkge1xuICAgICAgICAgICAgICAgIGJjLnBvc3RNZXNzYWdlKGNoYW5nZWRQYXJ0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghRGV4aWUkMS5kaXNhYmxlQmZDYWNoZSAmJiBldmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0RleGllOiBoYW5kbGluZyBwZXJzaXN0ZWQgcGFnZWhpZGUnKTtcbiAgICAgICAgICAgICAgICBiYyA9PT0gbnVsbCB8fCBiYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbm5lY3Rpb25zXzEgPSBjb25uZWN0aW9uczsgX2kgPCBjb25uZWN0aW9uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGIgPSBjb25uZWN0aW9uc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoeyBkaXNhYmxlQXV0b09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIURleGllJDEuZGlzYWJsZUJmQ2FjaGUgJiYgZXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdEZXhpZTogaGFuZGxpbmcgcGVyc2lzdGVkIHBhZ2VzaG93Jyk7XG4gICAgICAgICAgICAgICAgY3JlYXRlQkMoKTtcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVMb2NhbGx5KHsgYWxsOiBuZXcgUmFuZ2VTZXQoLUluZmluaXR5LCBbW11dKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IGFkZDogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlbW92ZTogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZVByZWZpeChhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcE1vZGlmaWNhdGlvbih7IHJlcGxhY2VQcmVmaXg6IFthLCBiXSB9KTtcbiAgICB9XG5cbiAgICBEZXhpZVByb21pc2UucmVqZWN0aW9uTWFwcGVyID0gbWFwRXJyb3I7XG4gICAgc2V0RGVidWcoZGVidWcpO1xuXG4gICAgdmFyIG5hbWVkRXhwb3J0cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgICBEZXhpZTogRGV4aWUkMSxcbiAgICAgICAgbGl2ZVF1ZXJ5OiBsaXZlUXVlcnksXG4gICAgICAgIEVudGl0eTogRW50aXR5LFxuICAgICAgICBjbXA6IGNtcCxcbiAgICAgICAgUHJvcE1vZGlmaWNhdGlvbjogUHJvcE1vZGlmaWNhdGlvbixcbiAgICAgICAgcmVwbGFjZVByZWZpeDogcmVwbGFjZVByZWZpeCxcbiAgICAgICAgYWRkOiBhZGQsXG4gICAgICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgICAgICAnZGVmYXVsdCc6IERleGllJDEsXG4gICAgICAgIFJhbmdlU2V0OiBSYW5nZVNldCxcbiAgICAgICAgbWVyZ2VSYW5nZXM6IG1lcmdlUmFuZ2VzLFxuICAgICAgICByYW5nZXNPdmVybGFwOiByYW5nZXNPdmVybGFwXG4gICAgfSk7XG5cbiAgICBfX2Fzc2lnbihEZXhpZSQxLCBuYW1lZEV4cG9ydHMsIHsgZGVmYXVsdDogRGV4aWUkMSB9KTtcblxuICAgIHJldHVybiBEZXhpZSQxO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXhpZS5qcy5tYXBcbiIsIi8vIE1ha2luZyB0aGUgbW9kdWxlIHZlcnNpb24gY29uc3VtYWJsZSB2aWEgcmVxdWlyZSAtIHRvIHByb2hpYml0XG4vLyBtdWx0aXBsZSBvY2N1cnJhbmNpZXMgb2YgdGhlIHNhbWUgbW9kdWxlIGluIHRoZSBzYW1lIGFwcFxuLy8gKGR1YWwgcGFja2FnZSBoYXphcmQsIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcGFja2FnZXMuaHRtbCNkdWFsLXBhY2thZ2UtaGF6YXJkKVxuaW1wb3J0IF9EZXhpZSBmcm9tIFwiLi9kaXN0L2RleGllLmpzXCI7XG5jb25zdCBEZXhpZVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJEZXhpZVwiKTtcbmNvbnN0IERleGllID0gZ2xvYmFsVGhpc1tEZXhpZVN5bWJvbF0gfHwgKGdsb2JhbFRoaXNbRGV4aWVTeW1ib2xdID0gX0RleGllKTtcbmlmIChfRGV4aWUuc2VtVmVyICE9PSBEZXhpZS5zZW1WZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFR3byBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgRGV4aWUgbG9hZGVkIGluIHRoZSBzYW1lIGFwcDogJHtfRGV4aWUuc2VtVmVyfSBhbmQgJHtEZXhpZS5zZW1WZXJ9YCk7XG59XG5jb25zdCB7IGxpdmVRdWVyeSwgbWVyZ2VSYW5nZXMsIHJhbmdlc092ZXJsYXAsIFJhbmdlU2V0LCBjbXAsIEVudGl0eSxcbiAgICBQcm9wTW9kaWZpY2F0aW9uLCByZXBsYWNlUHJlZml4LCBhZGQsIHJlbW92ZSxcbiAgICBEZXhpZVlQcm92aWRlciB9ID0gRGV4aWU7XG5leHBvcnQgeyBsaXZlUXVlcnksIG1lcmdlUmFuZ2VzLCByYW5nZXNPdmVybGFwLCBSYW5nZVNldCwgY21wLCBEZXhpZSwgRW50aXR5LFxuICAgIFByb3BNb2RpZmljYXRpb24sIHJlcGxhY2VQcmVmaXgsIGFkZCwgcmVtb3ZlLFxuICAgIERleGllWVByb3ZpZGVyfTtcbiAgICBcbmV4cG9ydCBkZWZhdWx0IERleGllO1xuIiwiaW1wb3J0IGUgZnJvbVwidm9pZC1lbGVtZW50c1wiO3ZhciB0PS9cXHMoW14nXCIvXFxzPjxdKz8pW1xccy8+XXwoW15cXHM9XSspPVxccz8oXCIuKj9cInwnLio/JykvZztmdW5jdGlvbiBuKG4pe3ZhciByPXt0eXBlOlwidGFnXCIsbmFtZTpcIlwiLHZvaWRFbGVtZW50OiExLGF0dHJzOnt9LGNoaWxkcmVuOltdfSxpPW4ubWF0Y2goLzxcXC8/KFteXFxzXSs/KVsvXFxzPl0vKTtpZihpJiYoci5uYW1lPWlbMV0sKGVbaVsxXV18fFwiL1wiPT09bi5jaGFyQXQobi5sZW5ndGgtMikpJiYoci52b2lkRWxlbWVudD0hMCksci5uYW1lLnN0YXJ0c1dpdGgoXCIhLS1cIikpKXt2YXIgcz1uLmluZGV4T2YoXCItLVxceDNlXCIpO3JldHVybnt0eXBlOlwiY29tbWVudFwiLGNvbW1lbnQ6LTEhPT1zP24uc2xpY2UoNCxzKTpcIlwifX1mb3IodmFyIGE9bmV3IFJlZ0V4cCh0KSxjPW51bGw7bnVsbCE9PShjPWEuZXhlYyhuKSk7KWlmKGNbMF0udHJpbSgpKWlmKGNbMV0pe3ZhciBvPWNbMV0udHJpbSgpLGw9W28sXCJcIl07by5pbmRleE9mKFwiPVwiKT4tMSYmKGw9by5zcGxpdChcIj1cIikpLHIuYXR0cnNbbFswXV09bFsxXSxhLmxhc3RJbmRleC0tfWVsc2UgY1syXSYmKHIuYXR0cnNbY1syXV09Y1szXS50cmltKCkuc3Vic3RyaW5nKDEsY1szXS5sZW5ndGgtMSkpO3JldHVybiByfXZhciByPS88W2EtekEtWjAtOVxcLVxcIVxcL10oPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPi9nLGk9L15cXHMqJC8scz1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIGEoZSx0KXtzd2l0Y2godC50eXBlKXtjYXNlXCJ0ZXh0XCI6cmV0dXJuIGUrdC5jb250ZW50O2Nhc2VcInRhZ1wiOnJldHVybiBlKz1cIjxcIit0Lm5hbWUrKHQuYXR0cnM/ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKG4rJz1cIicrZVtuXSsnXCInKTtyZXR1cm4gdC5sZW5ndGg/XCIgXCIrdC5qb2luKFwiIFwiKTpcIlwifSh0LmF0dHJzKTpcIlwiKSsodC52b2lkRWxlbWVudD9cIi8+XCI6XCI+XCIpLHQudm9pZEVsZW1lbnQ/ZTplK3QuY2hpbGRyZW4ucmVkdWNlKGEsXCJcIikrXCI8L1wiK3QubmFtZStcIj5cIjtjYXNlXCJjb21tZW50XCI6cmV0dXJuIGUrXCJcXHgzYyEtLVwiK3QuY29tbWVudCtcIi0tXFx4M2VcIn19dmFyIGM9e3BhcnNlOmZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pLHQuY29tcG9uZW50c3x8KHQuY29tcG9uZW50cz1zKTt2YXIgYSxjPVtdLG89W10sbD0tMSxtPSExO2lmKDAhPT1lLmluZGV4T2YoXCI8XCIpKXt2YXIgdT1lLmluZGV4T2YoXCI8XCIpO2MucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50Oi0xPT09dT9lOmUuc3Vic3RyaW5nKDAsdSl9KX1yZXR1cm4gZS5yZXBsYWNlKHIsZnVuY3Rpb24ocixzKXtpZihtKXtpZihyIT09XCI8L1wiK2EubmFtZStcIj5cIilyZXR1cm47bT0hMX12YXIgdSxmPVwiL1wiIT09ci5jaGFyQXQoMSksaD1yLnN0YXJ0c1dpdGgoXCJcXHgzYyEtLVwiKSxwPXMrci5sZW5ndGgsZD1lLmNoYXJBdChwKTtpZihoKXt2YXIgdj1uKHIpO3JldHVybiBsPDA/KGMucHVzaCh2KSxjKTooKHU9b1tsXSkuY2hpbGRyZW4ucHVzaCh2KSxjKX1pZihmJiYobCsrLFwidGFnXCI9PT0oYT1uKHIpKS50eXBlJiZ0LmNvbXBvbmVudHNbYS5uYW1lXSYmKGEudHlwZT1cImNvbXBvbmVudFwiLG09ITApLGEudm9pZEVsZW1lbnR8fG18fCFkfHxcIjxcIj09PWR8fGEuY2hpbGRyZW4ucHVzaCh7dHlwZTpcInRleHRcIixjb250ZW50OmUuc2xpY2UocCxlLmluZGV4T2YoXCI8XCIscCkpfSksMD09PWwmJmMucHVzaChhKSwodT1vW2wtMV0pJiZ1LmNoaWxkcmVuLnB1c2goYSksb1tsXT1hKSwoIWZ8fGEudm9pZEVsZW1lbnQpJiYobD4tMSYmKGEudm9pZEVsZW1lbnR8fGEubmFtZT09PXIuc2xpY2UoMiwtMSkpJiYobC0tLGE9LTE9PT1sP2M6b1tsXSksIW0mJlwiPFwiIT09ZCYmZCkpe3U9LTE9PT1sP2M6b1tsXS5jaGlsZHJlbjt2YXIgeD1lLmluZGV4T2YoXCI8XCIscCksZz1lLnNsaWNlKHAsLTE9PT14P3ZvaWQgMDp4KTtpLnRlc3QoZykmJihnPVwiIFwiKSwoeD4tMSYmbCt1Lmxlbmd0aD49MHx8XCIgXCIhPT1nKSYmdS5wdXNoKHt0eXBlOlwidGV4dFwiLGNvbnRlbnQ6Z30pfX0pLGN9LHN0cmluZ2lmeTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSthKFwiXCIsdCl9LFwiXCIpfX07ZXhwb3J0IGRlZmF1bHQgYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0bWwtcGFyc2Utc3RyaW5naWZ5Lm1vZHVsZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgaXNTdHJpbmcgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG5jb25zdCBkZWZlciA9ICgpID0+IHtcbiAgbGV0IHJlcztcbiAgbGV0IHJlajtcbiAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICByZXMgPSByZXNvbHZlO1xuICAgIHJlaiA9IHJlamVjdDtcbiAgfSk7XG4gIHByb21pc2UucmVzb2x2ZSA9IHJlcztcbiAgcHJvbWlzZS5yZWplY3QgPSByZWo7XG4gIHJldHVybiBwcm9taXNlO1xufTtcbmNvbnN0IG1ha2VTdHJpbmcgPSBvYmplY3QgPT4ge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAnJztcbiAgcmV0dXJuICcnICsgb2JqZWN0O1xufTtcbmNvbnN0IGNvcHkgPSAoYSwgcywgdCkgPT4ge1xuICBhLmZvckVhY2gobSA9PiB7XG4gICAgaWYgKHNbbV0pIHRbbV0gPSBzW21dO1xuICB9KTtcbn07XG5jb25zdCBsYXN0T2ZQYXRoU2VwYXJhdG9yUmVnRXhwID0gLyMjIy9nO1xuY29uc3QgY2xlYW5LZXkgPSBrZXkgPT4ga2V5ICYmIGtleS5pbmRleE9mKCcjIyMnKSA+IC0xID8ga2V5LnJlcGxhY2UobGFzdE9mUGF0aFNlcGFyYXRvclJlZ0V4cCwgJy4nKSA6IGtleTtcbmNvbnN0IGNhbk5vdFRyYXZlcnNlRGVlcGVyID0gb2JqZWN0ID0+ICFvYmplY3QgfHwgaXNTdHJpbmcob2JqZWN0KTtcbmNvbnN0IGdldExhc3RPZlBhdGggPSAob2JqZWN0LCBwYXRoLCBFbXB0eSkgPT4ge1xuICBjb25zdCBzdGFjayA9ICFpc1N0cmluZyhwYXRoKSA/IHBhdGggOiBwYXRoLnNwbGl0KCcuJyk7XG4gIGxldCBzdGFja0luZGV4ID0gMDtcbiAgd2hpbGUgKHN0YWNrSW5kZXggPCBzdGFjay5sZW5ndGggLSAxKSB7XG4gICAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgICBjb25zdCBrZXkgPSBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSk7XG4gICAgaWYgKCFvYmplY3Rba2V5XSAmJiBFbXB0eSkgb2JqZWN0W2tleV0gPSBuZXcgRW1wdHkoKTtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdCA9IHt9O1xuICAgIH1cbiAgICArK3N0YWNrSW5kZXg7XG4gIH1cbiAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBvYmo6IG9iamVjdCxcbiAgICBrOiBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSlcbiAgfTtcbn07XG5jb25zdCBzZXRQYXRoID0gKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkIHx8IHBhdGgubGVuZ3RoID09PSAxKSB7XG4gICAgb2JqW2tdID0gbmV3VmFsdWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBlID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICBsZXQgcCA9IHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgbGV0IGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgd2hpbGUgKGxhc3Qub2JqID09PSB1bmRlZmluZWQgJiYgcC5sZW5ndGgpIHtcbiAgICBlID0gYCR7cFtwLmxlbmd0aCAtIDFdfS4ke2V9YDtcbiAgICBwID0gcC5zbGljZSgwLCBwLmxlbmd0aCAtIDEpO1xuICAgIGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgICBpZiAobGFzdCAmJiBsYXN0Lm9iaiAmJiB0eXBlb2YgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYXN0Lm9iaiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gPSBuZXdWYWx1ZTtcbn07XG5jb25zdCBwdXNoUGF0aCA9IChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlLCBjb25jYXQpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgb2JqW2tdID0gb2JqW2tdIHx8IFtdO1xuICBvYmpba10ucHVzaChuZXdWYWx1ZSk7XG59O1xuY29uc3QgZ2V0UGF0aCA9IChvYmplY3QsIHBhdGgpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCk7XG4gIGlmICghb2JqKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gb2JqW2tdO1xufTtcbmNvbnN0IGdldFBhdGhXaXRoRGVmYXVsdHMgPSAoZGF0YSwgZGVmYXVsdERhdGEsIGtleSkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGdldFBhdGgoZGF0YSwga2V5KTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGdldFBhdGgoZGVmYXVsdERhdGEsIGtleSk7XG59O1xuY29uc3QgZGVlcEV4dGVuZCA9ICh0YXJnZXQsIHNvdXJjZSwgb3ZlcndyaXRlKSA9PiB7XG4gIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCAhPT0gJ19fcHJvdG9fXycgJiYgcHJvcCAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgaWYgKHByb3AgaW4gdGFyZ2V0KSB7XG4gICAgICAgIGlmIChpc1N0cmluZyh0YXJnZXRbcHJvcF0pIHx8IHRhcmdldFtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZyB8fCBpc1N0cmluZyhzb3VyY2VbcHJvcF0pIHx8IHNvdXJjZVtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuY29uc3QgcmVnZXhFc2NhcGUgPSBzdHIgPT4gc3RyLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCAnXFxcXCQmJyk7XG52YXIgX2VudGl0eU1hcCA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7JyxcbiAgJy8nOiAnJiN4MkY7J1xufTtcbmNvbnN0IGVzY2FwZSA9IGRhdGEgPT4ge1xuICBpZiAoaXNTdHJpbmcoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKC9bJjw+XCInXFwvXS9nLCBzID0+IF9lbnRpdHlNYXBbc10pO1xuICB9XG4gIHJldHVybiBkYXRhO1xufTtcbmNsYXNzIFJlZ0V4cENhY2hlIHtcbiAgY29uc3RydWN0b3IoY2FwYWNpdHkpIHtcbiAgICB0aGlzLmNhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5yZWdFeHBNYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdFeHBRdWV1ZSA9IFtdO1xuICB9XG4gIGdldFJlZ0V4cChwYXR0ZXJuKSB7XG4gICAgY29uc3QgcmVnRXhwRnJvbUNhY2hlID0gdGhpcy5yZWdFeHBNYXAuZ2V0KHBhdHRlcm4pO1xuICAgIGlmIChyZWdFeHBGcm9tQ2FjaGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHJlZ0V4cEZyb21DYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcmVnRXhwTmV3ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICBpZiAodGhpcy5yZWdFeHBRdWV1ZS5sZW5ndGggPT09IHRoaXMuY2FwYWNpdHkpIHtcbiAgICAgIHRoaXMucmVnRXhwTWFwLmRlbGV0ZSh0aGlzLnJlZ0V4cFF1ZXVlLnNoaWZ0KCkpO1xuICAgIH1cbiAgICB0aGlzLnJlZ0V4cE1hcC5zZXQocGF0dGVybiwgcmVnRXhwTmV3KTtcbiAgICB0aGlzLnJlZ0V4cFF1ZXVlLnB1c2gocGF0dGVybik7XG4gICAgcmV0dXJuIHJlZ0V4cE5ldztcbiAgfVxufVxuY29uc3QgY2hhcnMgPSBbJyAnLCAnLCcsICc/JywgJyEnLCAnOyddO1xuY29uc3QgbG9va3NMaWtlT2JqZWN0UGF0aFJlZ0V4cENhY2hlID0gbmV3IFJlZ0V4cENhY2hlKDIwKTtcbmNvbnN0IGxvb2tzTGlrZU9iamVjdFBhdGggPSAoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKSA9PiB7XG4gIG5zU2VwYXJhdG9yID0gbnNTZXBhcmF0b3IgfHwgJyc7XG4gIGtleVNlcGFyYXRvciA9IGtleVNlcGFyYXRvciB8fCAnJztcbiAgY29uc3QgcG9zc2libGVDaGFycyA9IGNoYXJzLmZpbHRlcihjID0+IG5zU2VwYXJhdG9yLmluZGV4T2YoYykgPCAwICYmIGtleVNlcGFyYXRvci5pbmRleE9mKGMpIDwgMCk7XG4gIGlmIChwb3NzaWJsZUNoYXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHIgPSBsb29rc0xpa2VPYmplY3RQYXRoUmVnRXhwQ2FjaGUuZ2V0UmVnRXhwKGAoJHtwb3NzaWJsZUNoYXJzLm1hcChjID0+IGMgPT09ICc/JyA/ICdcXFxcPycgOiBjKS5qb2luKCd8Jyl9KWApO1xuICBsZXQgbWF0Y2hlZCA9ICFyLnRlc3Qoa2V5KTtcbiAgaWYgKCFtYXRjaGVkKSB7XG4gICAgY29uc3Qga2kgPSBrZXkuaW5kZXhPZihrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChraSA+IDAgJiYgIXIudGVzdChrZXkuc3Vic3RyaW5nKDAsIGtpKSkpIHtcbiAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5jb25zdCBkZWVwRmluZCA9IGZ1bmN0aW9uIChvYmosIHBhdGgpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJy4nO1xuICBpZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKG9ialtwYXRoXSkgcmV0dXJuIG9ialtwYXRoXTtcbiAgY29uc3QgdG9rZW5zID0gcGF0aC5zcGxpdChrZXlTZXBhcmF0b3IpO1xuICBsZXQgY3VycmVudCA9IG9iajtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOykge1xuICAgIGlmICghY3VycmVudCB8fCB0eXBlb2YgY3VycmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBuZXh0O1xuICAgIGxldCBuZXh0UGF0aCA9ICcnO1xuICAgIGZvciAobGV0IGogPSBpOyBqIDwgdG9rZW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICBpZiAoaiAhPT0gaSkge1xuICAgICAgICBuZXh0UGF0aCArPSBrZXlTZXBhcmF0b3I7XG4gICAgICB9XG4gICAgICBuZXh0UGF0aCArPSB0b2tlbnNbal07XG4gICAgICBuZXh0ID0gY3VycmVudFtuZXh0UGF0aF07XG4gICAgICBpZiAobmV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddLmluZGV4T2YodHlwZW9mIG5leHQpID4gLTEgJiYgaiA8IHRva2Vucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaSArPSBqIC0gaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjdXJyZW50ID0gbmV4dDtcbiAgfVxuICByZXR1cm4gY3VycmVudDtcbn07XG5jb25zdCBnZXRDbGVhbmVkQ29kZSA9IGNvZGUgPT4gY29kZSAmJiBjb2RlLnJlcGxhY2UoJ18nLCAnLScpO1xuXG5jb25zdCBjb25zb2xlTG9nZ2VyID0ge1xuICB0eXBlOiAnbG9nZ2VyJyxcbiAgbG9nKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnbG9nJywgYXJncyk7XG4gIH0sXG4gIHdhcm4oYXJncykge1xuICAgIHRoaXMub3V0cHV0KCd3YXJuJywgYXJncyk7XG4gIH0sXG4gIGVycm9yKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnZXJyb3InLCBhcmdzKTtcbiAgfSxcbiAgb3V0cHV0KHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlW3R5cGVdKSBjb25zb2xlW3R5cGVdLmFwcGx5KGNvbnNvbGUsIGFyZ3MpO1xuICB9XG59O1xuY2xhc3MgTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uY3JldGVMb2dnZXIpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5pbml0KGNvbmNyZXRlTG9nZ2VyLCBvcHRpb25zKTtcbiAgfVxuICBpbml0KGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMucHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgJ2kxOG5leHQ6JztcbiAgICB0aGlzLmxvZ2dlciA9IGNvbmNyZXRlTG9nZ2VyIHx8IGNvbnNvbGVMb2dnZXI7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmRlYnVnID0gb3B0aW9ucy5kZWJ1ZztcbiAgfVxuICBsb2coKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICdsb2cnLCAnJywgdHJ1ZSk7XG4gIH1cbiAgd2FybigpIHtcbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICcnLCB0cnVlKTtcbiAgfVxuICBlcnJvcigpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnZXJyb3InLCAnJyk7XG4gIH1cbiAgZGVwcmVjYXRlKCkge1xuICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgYXJnc1tfa2V5NF0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICd3YXJuJywgJ1dBUk5JTkcgREVQUkVDQVRFRDogJywgdHJ1ZSk7XG4gIH1cbiAgZm9yd2FyZChhcmdzLCBsdmwsIHByZWZpeCwgZGVidWdPbmx5KSB7XG4gICAgaWYgKGRlYnVnT25seSAmJiAhdGhpcy5kZWJ1ZykgcmV0dXJuIG51bGw7XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhcmdzWzBdID0gYCR7cHJlZml4fSR7dGhpcy5wcmVmaXh9ICR7YXJnc1swXX1gO1xuICAgIHJldHVybiB0aGlzLmxvZ2dlcltsdmxdKGFyZ3MpO1xuICB9XG4gIGNyZWF0ZShtb2R1bGVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIHtcbiAgICAgIC4uLntcbiAgICAgICAgcHJlZml4OiBgJHt0aGlzLnByZWZpeH06JHttb2R1bGVOYW1lfTpgXG4gICAgICB9LFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgY2xvbmUob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9ucztcbiAgICBvcHRpb25zLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8IHRoaXMucHJlZml4O1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCBvcHRpb25zKTtcbiAgfVxufVxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gIH1cbiAgb24oZXZlbnRzLCBsaXN0ZW5lcikge1xuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IG51bUxpc3RlbmVycyA9IHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5nZXQobGlzdGVuZXIpIHx8IDA7XG4gICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uc2V0KGxpc3RlbmVyLCBudW1MaXN0ZW5lcnMgKyAxKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHJldHVybjtcbiAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uZGVsZXRlKGxpc3RlbmVyKTtcbiAgfVxuICBlbWl0KGV2ZW50KSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbZXZlbnRdLmVudHJpZXMoKSk7XG4gICAgICBjbG9uZWQuZm9yRWFjaChfcmVmID0+IHtcbiAgICAgICAgbGV0IFtvYnNlcnZlciwgbnVtVGltZXNBZGRlZF0gPSBfcmVmO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbJyonXS5lbnRyaWVzKCkpO1xuICAgICAgY2xvbmVkLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICBsZXQgW29ic2VydmVyLCBudW1UaW1lc0FkZGVkXSA9IF9yZWYyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyLmFwcGx5KG9ic2VydmVyLCBbZXZlbnQsIC4uLmFyZ3NdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFJlc291cmNlU3RvcmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gICAgICBkZWZhdWx0TlM6ICd0cmFuc2xhdGlvbidcbiAgICB9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPSAnLic7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGFkZE5hbWVzcGFjZXMobnMpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpIDwgMCkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnB1c2gobnMpO1xuICAgIH1cbiAgfVxuICByZW1vdmVOYW1lc3BhY2VzKG5zKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihucyk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuICBnZXRSZXNvdXJjZShsbmcsIG5zLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCBpZ25vcmVKU09OU3RydWN0dXJlID0gb3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgOiB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZTtcbiAgICBsZXQgcGF0aDtcbiAgICBpZiAobG5nLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICBwYXRoID0gbG5nLnNwbGl0KCcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGggPSBbbG5nLCBuc107XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5KTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1N0cmluZyhrZXkpICYmIGtleVNlcGFyYXRvcikge1xuICAgICAgICAgIHBhdGgucHVzaCguLi5rZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpO1xuICAgIGlmICghcmVzdWx0ICYmICFucyAmJiAha2V5ICYmIGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgbG5nID0gcGF0aFswXTtcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICAgIGtleSA9IHBhdGguc2xpY2UoMikuam9pbignLicpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0IHx8ICFpZ25vcmVKU09OU3RydWN0dXJlIHx8ICFpc1N0cmluZyhrZXkpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBkZWVwRmluZCh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhW2xuZ10gJiYgdGhpcy5kYXRhW2xuZ11bbnNdLCBrZXksIGtleVNlcGFyYXRvcik7XG4gIH1cbiAgYWRkUmVzb3VyY2UobG5nLCBucywga2V5LCB2YWx1ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChrZXkpIHBhdGggPSBwYXRoLmNvbmNhdChrZXlTZXBhcmF0b3IgPyBrZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSA6IGtleSk7XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgdmFsdWUgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBzZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCwgdmFsdWUpO1xuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCBrZXksIHZhbHVlKTtcbiAgfVxuICBhZGRSZXNvdXJjZXMobG5nLCBucywgcmVzb3VyY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2VcbiAgICB9O1xuICAgIGZvciAoY29uc3QgbSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIGlmIChpc1N0cmluZyhyZXNvdXJjZXNbbV0pIHx8IEFycmF5LmlzQXJyYXkocmVzb3VyY2VzW21dKSkgdGhpcy5hZGRSZXNvdXJjZShsbmcsIG5zLCBtLCByZXNvdXJjZXNbbV0sIHtcbiAgICAgICAgc2lsZW50OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy5lbWl0KCdhZGRlZCcsIGxuZywgbnMsIHJlc291cmNlcyk7XG4gIH1cbiAgYWRkUmVzb3VyY2VCdW5kbGUobG5nLCBucywgcmVzb3VyY2VzLCBkZWVwLCBvdmVyd3JpdGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDoge1xuICAgICAgc2lsZW50OiBmYWxzZSxcbiAgICAgIHNraXBDb3B5OiBmYWxzZVxuICAgIH07XG4gICAgbGV0IHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgZGVlcCA9IHJlc291cmNlcztcbiAgICAgIHJlc291cmNlcyA9IG5zO1xuICAgICAgbnMgPSBwYXRoWzFdO1xuICAgIH1cbiAgICB0aGlzLmFkZE5hbWVzcGFjZXMobnMpO1xuICAgIGxldCBwYWNrID0gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpIHx8IHt9O1xuICAgIGlmICghb3B0aW9ucy5za2lwQ29weSkgcmVzb3VyY2VzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNvdXJjZXMpKTtcbiAgICBpZiAoZGVlcCkge1xuICAgICAgZGVlcEV4dGVuZChwYWNrLCByZXNvdXJjZXMsIG92ZXJ3cml0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhY2sgPSB7XG4gICAgICAgIC4uLnBhY2ssXG4gICAgICAgIC4uLnJlc291cmNlc1xuICAgICAgfTtcbiAgICB9XG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHBhY2spO1xuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9XG4gIHJlbW92ZVJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAodGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgZGVsZXRlIHRoaXMuZGF0YVtsbmddW25zXTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVOYW1lc3BhY2VzKG5zKTtcbiAgICB0aGlzLmVtaXQoJ3JlbW92ZWQnLCBsbmcsIG5zKTtcbiAgfVxuICBoYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucykgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBnZXRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKCFucykgbnMgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgcmV0dXJuIHtcbiAgICAgIC4uLnt9LFxuICAgICAgLi4udGhpcy5nZXRSZXNvdXJjZShsbmcsIG5zKVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucyk7XG4gIH1cbiAgZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVtsbmddO1xuICB9XG4gIGhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyhsbmcpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhQnlMYW5ndWFnZShsbmcpO1xuICAgIGNvbnN0IG4gPSBkYXRhICYmIE9iamVjdC5rZXlzKGRhdGEpIHx8IFtdO1xuICAgIHJldHVybiAhIW4uZmluZCh2ID0+IGRhdGFbdl0gJiYgT2JqZWN0LmtleXMoZGF0YVt2XSkubGVuZ3RoID4gMCk7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cbn1cblxudmFyIHBvc3RQcm9jZXNzb3IgPSB7XG4gIHByb2Nlc3NvcnM6IHt9LFxuICBhZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSkge1xuICAgIHRoaXMucHJvY2Vzc29yc1ttb2R1bGUubmFtZV0gPSBtb2R1bGU7XG4gIH0sXG4gIGhhbmRsZShwcm9jZXNzb3JzLCB2YWx1ZSwga2V5LCBvcHRpb25zLCB0cmFuc2xhdG9yKSB7XG4gICAgcHJvY2Vzc29ycy5mb3JFYWNoKHByb2Nlc3NvciA9PiB7XG4gICAgICBpZiAodGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0pIHZhbHVlID0gdGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0ucHJvY2Vzcyh2YWx1ZSwga2V5LCBvcHRpb25zLCB0cmFuc2xhdG9yKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmNvbnN0IGNoZWNrZWRMb2FkZWRGb3IgPSB7fTtcbmNsYXNzIFRyYW5zbGF0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihzZXJ2aWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBzdXBlcigpO1xuICAgIGNvcHkoWydyZXNvdXJjZVN0b3JlJywgJ2xhbmd1YWdlVXRpbHMnLCAncGx1cmFsUmVzb2x2ZXInLCAnaW50ZXJwb2xhdG9yJywgJ2JhY2tlbmRDb25uZWN0b3InLCAnaTE4bkZvcm1hdCcsICd1dGlscyddLCBzZXJ2aWNlcywgdGhpcyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBpZiAodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID0gJy4nO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCd0cmFuc2xhdG9yJyk7XG4gIH1cbiAgY2hhbmdlTGFuZ3VhZ2UobG5nKSB7XG4gICAgaWYgKGxuZykgdGhpcy5sYW5ndWFnZSA9IGxuZztcbiAgfVxuICBleGlzdHMoa2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIGludGVycG9sYXRpb246IHt9XG4gICAgfTtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc29sdmVkICYmIHJlc29sdmVkLnJlcyAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIGV4dHJhY3RGcm9tS2V5KGtleSwgb3B0aW9ucykge1xuICAgIGxldCBuc1NlcGFyYXRvciA9IG9wdGlvbnMubnNTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgaWYgKG5zU2VwYXJhdG9yID09PSB1bmRlZmluZWQpIG5zU2VwYXJhdG9yID0gJzonO1xuICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleVNlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgbGV0IG5hbWVzcGFjZXMgPSBvcHRpb25zLm5zIHx8IHRoaXMub3B0aW9ucy5kZWZhdWx0TlMgfHwgW107XG4gICAgY29uc3Qgd291bGRDaGVja0Zvck5zSW5LZXkgPSBuc1NlcGFyYXRvciAmJiBrZXkuaW5kZXhPZihuc1NlcGFyYXRvcikgPiAtMTtcbiAgICBjb25zdCBzZWVtc05hdHVyYWxMYW5ndWFnZSA9ICF0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3IgJiYgIW9wdGlvbnMua2V5U2VwYXJhdG9yICYmICF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciAmJiAhb3B0aW9ucy5uc1NlcGFyYXRvciAmJiAhbG9va3NMaWtlT2JqZWN0UGF0aChrZXksIG5zU2VwYXJhdG9yLCBrZXlTZXBhcmF0b3IpO1xuICAgIGlmICh3b3VsZENoZWNrRm9yTnNJbktleSAmJiAhc2VlbXNOYXR1cmFsTGFuZ3VhZ2UpIHtcbiAgICAgIGNvbnN0IG0gPSBrZXkubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7XG4gICAgICBpZiAobSAmJiBtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgbmFtZXNwYWNlczogaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdChuc1NlcGFyYXRvcik7XG4gICAgICBpZiAobnNTZXBhcmF0b3IgIT09IGtleVNlcGFyYXRvciB8fCBuc1NlcGFyYXRvciA9PT0ga2V5U2VwYXJhdG9yICYmIHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKHBhcnRzWzBdKSA+IC0xKSBuYW1lc3BhY2VzID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIGtleSA9IHBhcnRzLmpvaW4oa2V5U2VwYXJhdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIG5hbWVzcGFjZXM6IGlzU3RyaW5nKG5hbWVzcGFjZXMpID8gW25hbWVzcGFjZXNdIDogbmFtZXNwYWNlc1xuICAgIH07XG4gIH1cbiAgdHJhbnNsYXRlKGtleXMsIG9wdGlvbnMsIGxhc3RLZXkpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnICYmIHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcikge1xuICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSBvcHRpb25zID0ge1xuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgaWYgKGtleXMgPT09IHVuZGVmaW5lZCB8fCBrZXlzID09PSBudWxsKSByZXR1cm4gJyc7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSBrZXlzID0gW1N0cmluZyhrZXlzKV07XG4gICAgY29uc3QgcmV0dXJuRGV0YWlscyA9IG9wdGlvbnMucmV0dXJuRGV0YWlscyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZXR1cm5EZXRhaWxzIDogdGhpcy5vcHRpb25zLnJldHVybkRldGFpbHM7XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzXG4gICAgfSA9IHRoaXMuZXh0cmFjdEZyb21LZXkoa2V5c1trZXlzLmxlbmd0aCAtIDFdLCBvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBuYW1lc3BhY2VzW25hbWVzcGFjZXMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbG5nID0gb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZTtcbiAgICBjb25zdCBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSA9IG9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgfHwgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO1xuICAgIGlmIChsbmcgJiYgbG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSB7XG4gICAgICBpZiAoYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUpIHtcbiAgICAgICAgY29uc3QgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzOiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gLFxuICAgICAgICAgICAgdXNlZEtleToga2V5LFxuICAgICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgICB1c2VkTG5nOiBsbmcsXG4gICAgICAgICAgICB1c2VkTlM6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gO1xuICAgICAgfVxuICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXM6IGtleSxcbiAgICAgICAgICB1c2VkS2V5OiBrZXksXG4gICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgdXNlZExuZzogbG5nLFxuICAgICAgICAgIHVzZWROUzogbmFtZXNwYWNlLFxuICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleXMsIG9wdGlvbnMpO1xuICAgIGxldCByZXMgPSByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXM7XG4gICAgY29uc3QgcmVzVXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLnVzZWRLZXkgfHwga2V5O1xuICAgIGNvbnN0IHJlc0V4YWN0VXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLmV4YWN0VXNlZEtleSB8fCBrZXk7XG4gICAgY29uc3QgcmVzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkocmVzKTtcbiAgICBjb25zdCBub09iamVjdCA9IFsnW29iamVjdCBOdW1iZXJdJywgJ1tvYmplY3QgRnVuY3Rpb25dJywgJ1tvYmplY3QgUmVnRXhwXSddO1xuICAgIGNvbnN0IGpvaW5BcnJheXMgPSBvcHRpb25zLmpvaW5BcnJheXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuam9pbkFycmF5cyA6IHRoaXMub3B0aW9ucy5qb2luQXJyYXlzO1xuICAgIGNvbnN0IGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ID0gIXRoaXMuaTE4bkZvcm1hdCB8fCB0aGlzLmkxOG5Gb3JtYXQuaGFuZGxlQXNPYmplY3Q7XG4gICAgY29uc3QgaGFuZGxlQXNPYmplY3QgPSAhaXNTdHJpbmcocmVzKSAmJiB0eXBlb2YgcmVzICE9PSAnYm9vbGVhbicgJiYgdHlwZW9mIHJlcyAhPT0gJ251bWJlcic7XG4gICAgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIHJlcyAmJiBoYW5kbGVBc09iamVjdCAmJiBub09iamVjdC5pbmRleE9mKHJlc1R5cGUpIDwgMCAmJiAhKGlzU3RyaW5nKGpvaW5BcnJheXMpICYmIEFycmF5LmlzQXJyYXkocmVzKSkpIHtcbiAgICAgIGlmICghb3B0aW9ucy5yZXR1cm5PYmplY3RzICYmICF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cykge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA/IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIocmVzVXNlZEtleSwgcmVzLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICB9KSA6IGBrZXkgJyR7a2V5fSAoJHt0aGlzLmxhbmd1YWdlfSknIHJldHVybmVkIGFuIG9iamVjdCBpbnN0ZWFkIG9mIHN0cmluZy5gO1xuICAgICAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgICAgIHJlc29sdmVkLnJlcyA9IHI7XG4gICAgICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfVxuICAgICAgaWYgKGtleVNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCByZXNUeXBlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkocmVzKTtcbiAgICAgICAgY29uc3QgY29weSA9IHJlc1R5cGVJc0FycmF5ID8gW10gOiB7fTtcbiAgICAgICAgY29uc3QgbmV3S2V5VG9Vc2UgPSByZXNUeXBlSXNBcnJheSA/IHJlc0V4YWN0VXNlZEtleSA6IHJlc1VzZWRLZXk7XG4gICAgICAgIGZvciAoY29uc3QgbSBpbiByZXMpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcywgbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZXBLZXkgPSBgJHtuZXdLZXlUb1VzZX0ke2tleVNlcGFyYXRvcn0ke219YDtcbiAgICAgICAgICAgIGNvcHlbbV0gPSB0aGlzLnRyYW5zbGF0ZShkZWVwS2V5LCB7XG4gICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3B5W21dID09PSBkZWVwS2V5KSBjb3B5W21dID0gcmVzW21dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMgPSBjb3B5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlQXNPYmplY3RJbkkxOG5Gb3JtYXQgJiYgaXNTdHJpbmcoam9pbkFycmF5cykgJiYgQXJyYXkuaXNBcnJheShyZXMpKSB7XG4gICAgICByZXMgPSByZXMuam9pbihqb2luQXJyYXlzKTtcbiAgICAgIGlmIChyZXMpIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXlzLCBvcHRpb25zLCBsYXN0S2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHVzZWREZWZhdWx0ID0gZmFsc2U7XG4gICAgICBsZXQgdXNlZEtleSA9IGZhbHNlO1xuICAgICAgY29uc3QgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiAhaXNTdHJpbmcob3B0aW9ucy5jb3VudCk7XG4gICAgICBjb25zdCBoYXNEZWZhdWx0VmFsdWUgPSBUcmFuc2xhdG9yLmhhc0RlZmF1bHRWYWx1ZShvcHRpb25zKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZVN1ZmZpeCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgPyB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChsbmcsIG9wdGlvbnMuY291bnQsIG9wdGlvbnMpIDogJyc7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWVTdWZmaXhPcmRpbmFsRmFsbGJhY2sgPSBvcHRpb25zLm9yZGluYWwgJiYgbmVlZHNQbHVyYWxIYW5kbGluZyA/IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGxuZywgb3B0aW9ucy5jb3VudCwge1xuICAgICAgICBvcmRpbmFsOiBmYWxzZVxuICAgICAgfSkgOiAnJztcbiAgICAgIGNvbnN0IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgJiYgIW9wdGlvbnMub3JkaW5hbCAmJiBvcHRpb25zLmNvdW50ID09PSAwICYmIHRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gbmVlZHNaZXJvU3VmZml4TG9va3VwICYmIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYF0gfHwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtkZWZhdWx0VmFsdWVTdWZmaXh9YF0gfHwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtkZWZhdWx0VmFsdWVTdWZmaXhPcmRpbmFsRmFsbGJhY2t9YF0gfHwgb3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpICYmIGhhc0RlZmF1bHRWYWx1ZSkge1xuICAgICAgICB1c2VkRGVmYXVsdCA9IHRydWU7XG4gICAgICAgIHJlcyA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKHJlcykpIHtcbiAgICAgICAgdXNlZEtleSA9IHRydWU7XG4gICAgICAgIHJlcyA9IGtleTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSA9IG9wdGlvbnMubWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5IHx8IHRoaXMub3B0aW9ucy5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXk7XG4gICAgICBjb25zdCByZXNGb3JNaXNzaW5nID0gbWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5ICYmIHVzZWRLZXkgPyB1bmRlZmluZWQgOiByZXM7XG4gICAgICBjb25zdCB1cGRhdGVNaXNzaW5nID0gaGFzRGVmYXVsdFZhbHVlICYmIGRlZmF1bHRWYWx1ZSAhPT0gcmVzICYmIHRoaXMub3B0aW9ucy51cGRhdGVNaXNzaW5nO1xuICAgICAgaWYgKHVzZWRLZXkgfHwgdXNlZERlZmF1bHQgfHwgdXBkYXRlTWlzc2luZykge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2codXBkYXRlTWlzc2luZyA/ICd1cGRhdGVLZXknIDogJ21pc3NpbmdLZXknLCBsbmcsIG5hbWVzcGFjZSwga2V5LCB1cGRhdGVNaXNzaW5nID8gZGVmYXVsdFZhbHVlIDogcmVzKTtcbiAgICAgICAgaWYgKGtleVNlcGFyYXRvcikge1xuICAgICAgICAgIGNvbnN0IGZrID0gdGhpcy5yZXNvbHZlKGtleSwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGtleVNlcGFyYXRvcjogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZmsgJiYgZmsucmVzKSB0aGlzLmxvZ2dlci53YXJuKCdTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxuZ3MgPSBbXTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tMbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnZmFsbGJhY2snICYmIGZhbGxiYWNrTG5ncyAmJiBmYWxsYmFja0xuZ3NbMF0pIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZhbGxiYWNrTG5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbG5ncy5wdXNoKGZhbGxiYWNrTG5nc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnYWxsJykge1xuICAgICAgICAgIGxuZ3MgPSB0aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxuZ3MucHVzaChvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZW5kID0gKGwsIGssIHNwZWNpZmljRGVmYXVsdFZhbHVlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdEZvck1pc3NpbmcgPSBoYXNEZWZhdWx0VmFsdWUgJiYgc3BlY2lmaWNEZWZhdWx0VmFsdWUgIT09IHJlcyA/IHNwZWNpZmljRGVmYXVsdFZhbHVlIDogcmVzRm9yTWlzc2luZztcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIobCwgbmFtZXNwYWNlLCBrLCBkZWZhdWx0Rm9yTWlzc2luZywgdXBkYXRlTWlzc2luZywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhY2tlbmRDb25uZWN0b3IgJiYgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcobCwgbmFtZXNwYWNlLCBrLCBkZWZhdWx0Rm9yTWlzc2luZywgdXBkYXRlTWlzc2luZywgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZW1pdCgnbWlzc2luZ0tleScsIGwsIG5hbWVzcGFjZSwgaywgcmVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZykge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdQbHVyYWxzICYmIG5lZWRzUGx1cmFsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGxuZ3MuZm9yRWFjaChsYW5ndWFnZSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHN1ZmZpeGVzID0gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXhlcyhsYW5ndWFnZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXAgJiYgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gXSAmJiBzdWZmaXhlcy5pbmRleE9mKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApIDwgMCkge1xuICAgICAgICAgICAgICAgIHN1ZmZpeGVzLnB1c2goYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3VmZml4ZXMuZm9yRWFjaChzdWZmaXggPT4ge1xuICAgICAgICAgICAgICAgIHNlbmQoW2xhbmd1YWdlXSwga2V5ICsgc3VmZml4LCBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3N1ZmZpeH1gXSB8fCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kKGxuZ3MsIGtleSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXlzLCBvcHRpb25zLCByZXNvbHZlZCwgbGFzdEtleSk7XG4gICAgICBpZiAodXNlZEtleSAmJiByZXMgPT09IGtleSAmJiB0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5KSByZXMgPSBgJHtuYW1lc3BhY2V9OiR7a2V5fWA7XG4gICAgICBpZiAoKHVzZWRLZXkgfHwgdXNlZERlZmF1bHQpICYmIHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJykge1xuICAgICAgICAgIHJlcyA9IHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkgPyBgJHtuYW1lc3BhY2V9OiR7a2V5fWAgOiBrZXksIHVzZWREZWZhdWx0ID8gcmVzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcihyZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZXR1cm5EZXRhaWxzKSB7XG4gICAgICByZXNvbHZlZC5yZXMgPSByZXM7XG4gICAgICByZXNvbHZlZC51c2VkUGFyYW1zID0gdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKTtcbiAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICBleHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleSwgb3B0aW9ucywgcmVzb2x2ZWQsIGxhc3RLZXkpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LnBhcnNlKSB7XG4gICAgICByZXMgPSB0aGlzLmkxOG5Gb3JtYXQucGFyc2UocmVzLCB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0sIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZywgcmVzb2x2ZWQudXNlZE5TLCByZXNvbHZlZC51c2VkS2V5LCB7XG4gICAgICAgIHJlc29sdmVkXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFvcHRpb25zLnNraXBJbnRlcnBvbGF0aW9uKSB7XG4gICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5pbml0KHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLi4ue1xuICAgICAgICAgIGludGVycG9sYXRpb246IHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHNraXBPblZhcmlhYmxlcyA9IGlzU3RyaW5nKHJlcykgJiYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgOiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpO1xuICAgICAgbGV0IG5lc3RCZWY7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5iID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBuZXN0QmVmID0gbmIgJiYgbmIubGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgIWlzU3RyaW5nKG9wdGlvbnMucmVwbGFjZSkgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIGRhdGEgPSB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgICByZXMgPSB0aGlzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShyZXMsIGRhdGEsIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZywgb3B0aW9ucyk7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5hID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBjb25zdCBuZXN0QWZ0ID0gbmEgJiYgbmEubGVuZ3RoO1xuICAgICAgICBpZiAobmVzdEJlZiA8IG5lc3RBZnQpIG9wdGlvbnMubmVzdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLmxuZyAmJiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJyAmJiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMpIG9wdGlvbnMubG5nID0gdGhpcy5sYW5ndWFnZSB8fCByZXNvbHZlZC51c2VkTG5nO1xuICAgICAgaWYgKG9wdGlvbnMubmVzdCAhPT0gZmFsc2UpIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLm5lc3QocmVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RLZXkgJiYgbGFzdEtleVswXSA9PT0gYXJnc1swXSAmJiAhb3B0aW9ucy5jb250ZXh0KSB7XG4gICAgICAgICAgX3RoaXMubG9nZ2VyLndhcm4oYEl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICR7YXJnc1swXX0gaW4ga2V5OiAke2tleVswXX1gKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXMudHJhbnNsYXRlKC4uLmFyZ3MsIGtleSk7XG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCk7XG4gICAgfVxuICAgIGNvbnN0IHBvc3RQcm9jZXNzID0gb3B0aW9ucy5wb3N0UHJvY2VzcyB8fCB0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3M7XG4gICAgY29uc3QgcG9zdFByb2Nlc3Nvck5hbWVzID0gaXNTdHJpbmcocG9zdFByb2Nlc3MpID8gW3Bvc3RQcm9jZXNzXSA6IHBvc3RQcm9jZXNzO1xuICAgIGlmIChyZXMgIT09IHVuZGVmaW5lZCAmJiByZXMgIT09IG51bGwgJiYgcG9zdFByb2Nlc3Nvck5hbWVzICYmIHBvc3RQcm9jZXNzb3JOYW1lcy5sZW5ndGggJiYgb3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgIT09IGZhbHNlKSB7XG4gICAgICByZXMgPSBwb3N0UHJvY2Vzc29yLmhhbmRsZShwb3N0UHJvY2Vzc29yTmFtZXMsIHJlcywga2V5LCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkID8ge1xuICAgICAgICBpMThuUmVzb2x2ZWQ6IHtcbiAgICAgICAgICAuLi5yZXNvbHZlZCxcbiAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgIH0sXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0gOiBvcHRpb25zLCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXNvbHZlKGtleXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgbGV0IGZvdW5kO1xuICAgIGxldCB1c2VkS2V5O1xuICAgIGxldCBleGFjdFVzZWRLZXk7XG4gICAgbGV0IHVzZWRMbmc7XG4gICAgbGV0IHVzZWROUztcbiAgICBpZiAoaXNTdHJpbmcoa2V5cykpIGtleXMgPSBba2V5c107XG4gICAga2V5cy5mb3JFYWNoKGsgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcbiAgICAgIGNvbnN0IGV4dHJhY3RlZCA9IHRoaXMuZXh0cmFjdEZyb21LZXkoaywgb3B0aW9ucyk7XG4gICAgICBjb25zdCBrZXkgPSBleHRyYWN0ZWQua2V5O1xuICAgICAgdXNlZEtleSA9IGtleTtcbiAgICAgIGxldCBuYW1lc3BhY2VzID0gZXh0cmFjdGVkLm5hbWVzcGFjZXM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrTlMpIG5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMuZmFsbGJhY2tOUyk7XG4gICAgICBjb25zdCBuZWVkc1BsdXJhbEhhbmRsaW5nID0gb3B0aW9ucy5jb3VudCAhPT0gdW5kZWZpbmVkICYmICFpc1N0cmluZyhvcHRpb25zLmNvdW50KTtcbiAgICAgIGNvbnN0IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCA9IG5lZWRzUGx1cmFsSGFuZGxpbmcgJiYgIW9wdGlvbnMub3JkaW5hbCAmJiBvcHRpb25zLmNvdW50ID09PSAwICYmIHRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpO1xuICAgICAgY29uc3QgbmVlZHNDb250ZXh0SGFuZGxpbmcgPSBvcHRpb25zLmNvbnRleHQgIT09IHVuZGVmaW5lZCAmJiAoaXNTdHJpbmcob3B0aW9ucy5jb250ZXh0KSB8fCB0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnbnVtYmVyJykgJiYgb3B0aW9ucy5jb250ZXh0ICE9PSAnJztcbiAgICAgIGNvbnN0IGNvZGVzID0gb3B0aW9ucy5sbmdzID8gb3B0aW9ucy5sbmdzIDogdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlLCBvcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICAgIHVzZWROUyA9IG5zO1xuICAgICAgICBpZiAoIWNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gJiYgdGhpcy51dGlscyAmJiB0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UodXNlZE5TKSkge1xuICAgICAgICAgIGNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gPSB0cnVlO1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGtleSBcIiR7dXNlZEtleX1cIiBmb3IgbGFuZ3VhZ2VzIFwiJHtjb2Rlcy5qb2luKCcsICcpfVwiIHdvbid0IGdldCByZXNvbHZlZCBhcyBuYW1lc3BhY2UgXCIke3VzZWROU31cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgICAgIHVzZWRMbmcgPSBjb2RlO1xuICAgICAgICAgIGNvbnN0IGZpbmFsS2V5cyA9IFtrZXldO1xuICAgICAgICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMpIHtcbiAgICAgICAgICAgIHRoaXMuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKGZpbmFsS2V5cywga2V5LCBjb2RlLCBucywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwbHVyYWxTdWZmaXg7XG4gICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykgcGx1cmFsU3VmZml4ID0gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoY29kZSwgb3B0aW9ucy5jb3VudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCB6ZXJvU3VmZml4ID0gYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYDtcbiAgICAgICAgICAgIGNvbnN0IG9yZGluYWxQcmVmaXggPSBgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfW9yZGluYWwke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9YDtcbiAgICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHBsdXJhbFN1ZmZpeCk7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG5lZWRzWmVyb1N1ZmZpeExvb2t1cCkge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHplcm9TdWZmaXgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZHNDb250ZXh0SGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGV4dEtleSA9IGAke2tleX0ke3RoaXMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yfSR7b3B0aW9ucy5jb250ZXh0fWA7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyB6ZXJvU3VmZml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHBvc3NpYmxlS2V5O1xuICAgICAgICAgIHdoaWxlIChwb3NzaWJsZUtleSA9IGZpbmFsS2V5cy5wb3AoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSB7XG4gICAgICAgICAgICAgIGV4YWN0VXNlZEtleSA9IHBvc3NpYmxlS2V5O1xuICAgICAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIHBvc3NpYmxlS2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlczogZm91bmQsXG4gICAgICB1c2VkS2V5LFxuICAgICAgZXhhY3RVc2VkS2V5LFxuICAgICAgdXNlZExuZyxcbiAgICAgIHVzZWROU1xuICAgIH07XG4gIH1cbiAgaXNWYWxpZExvb2t1cChyZXMpIHtcbiAgICByZXR1cm4gcmVzICE9PSB1bmRlZmluZWQgJiYgISghdGhpcy5vcHRpb25zLnJldHVybk51bGwgJiYgcmVzID09PSBudWxsKSAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuRW1wdHlTdHJpbmcgJiYgcmVzID09PSAnJyk7XG4gIH1cbiAgZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZSkgcmV0dXJuIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZShjb2RlLCBucywga2V5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICB9XG4gIGdldFVzZWRQYXJhbXNEZXRhaWxzKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjb25zdCBvcHRpb25zS2V5cyA9IFsnZGVmYXVsdFZhbHVlJywgJ29yZGluYWwnLCAnY29udGV4dCcsICdyZXBsYWNlJywgJ2xuZycsICdsbmdzJywgJ2ZhbGxiYWNrTG5nJywgJ25zJywgJ2tleVNlcGFyYXRvcicsICduc1NlcGFyYXRvcicsICdyZXR1cm5PYmplY3RzJywgJ3JldHVybkRldGFpbHMnLCAnam9pbkFycmF5cycsICdwb3N0UHJvY2VzcycsICdpbnRlcnBvbGF0aW9uJ107XG4gICAgY29uc3QgdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID0gb3B0aW9ucy5yZXBsYWNlICYmICFpc1N0cmluZyhvcHRpb25zLnJlcGxhY2UpO1xuICAgIGxldCBkYXRhID0gdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID8gb3B0aW9ucy5yZXBsYWNlIDogb3B0aW9ucztcbiAgICBpZiAodXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhICYmIHR5cGVvZiBvcHRpb25zLmNvdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5jb3VudCA9IG9wdGlvbnMuY291bnQ7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIG9wdGlvbnNLZXlzKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHN0YXRpYyBoYXNEZWZhdWx0VmFsdWUob3B0aW9ucykge1xuICAgIGNvbnN0IHByZWZpeCA9ICdkZWZhdWx0VmFsdWUnO1xuICAgIGZvciAoY29uc3Qgb3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywgb3B0aW9uKSAmJiBwcmVmaXggPT09IG9wdGlvbi5zdWJzdHJpbmcoMCwgcHJlZml4Lmxlbmd0aCkgJiYgdW5kZWZpbmVkICE9PSBvcHRpb25zW29wdGlvbl0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jb25zdCBjYXBpdGFsaXplID0gc3RyaW5nID0+IHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbmNsYXNzIExhbmd1YWdlVXRpbCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3VwcG9ydGVkTG5ncyA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzIHx8IGZhbHNlO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2xhbmd1YWdlVXRpbHMnKTtcbiAgfVxuICBnZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGNvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlKTtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIGlmIChwLmxlbmd0aCA9PT0gMikgcmV0dXJuIG51bGw7XG4gICAgcC5wb3AoKTtcbiAgICBpZiAocFtwLmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHAuam9pbignLScpKTtcbiAgfVxuICBnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgY29kZSA9IGdldENsZWFuZWRDb2RlKGNvZGUpO1xuICAgIGlmICghY29kZSB8fCBjb2RlLmluZGV4T2YoJy0nKSA8IDApIHJldHVybiBjb2RlO1xuICAgIGNvbnN0IHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHBbMF0pO1xuICB9XG4gIGZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSB7XG4gICAgaWYgKGlzU3RyaW5nKGNvZGUpICYmIGNvZGUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIGlmICh0eXBlb2YgSW50bCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEludGwuZ2V0Q2Fub25pY2FsTG9jYWxlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgZm9ybWF0dGVkQ29kZSA9IEludGwuZ2V0Q2Fub25pY2FsTG9jYWxlcyhjb2RlKVswXTtcbiAgICAgICAgICBpZiAoZm9ybWF0dGVkQ29kZSAmJiB0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRDb2RlID0gZm9ybWF0dGVkQ29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm9ybWF0dGVkQ29kZSkgcmV0dXJuIGZvcm1hdHRlZENvZGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgICBjb25zdCBzcGVjaWFsQ2FzZXMgPSBbJ2hhbnMnLCAnaGFudCcsICdsYXRuJywgJ2N5cmwnLCAnY2FucycsICdtb25nJywgJ2FyYWInXTtcbiAgICAgIGxldCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcpIHtcbiAgICAgICAgcCA9IHAubWFwKHBhcnQgPT4gcGFydC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMV0ubGVuZ3RoID09PSAyKSBwWzFdID0gcFsxXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAocFswXSAhPT0gJ3NnbicgJiYgcFsyXS5sZW5ndGggPT09IDIpIHBbMl0gPSBwWzJdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzJdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMl0gPSBjYXBpdGFsaXplKHBbMl0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcC5qb2luKCctJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xlYW5Db2RlIHx8IHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcgPyBjb2RlLnRvTG93ZXJDYXNlKCkgOiBjb2RlO1xuICB9XG4gIGlzU3VwcG9ydGVkQ29kZShjb2RlKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkID09PSAnbGFuZ3VhZ2VPbmx5JyB8fCB0aGlzLm9wdGlvbnMubm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzKSB7XG4gICAgICBjb2RlID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuICF0aGlzLnN1cHBvcnRlZExuZ3MgfHwgIXRoaXMuc3VwcG9ydGVkTG5ncy5sZW5ndGggfHwgdGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoY29kZSkgPiAtMTtcbiAgfVxuICBnZXRCZXN0TWF0Y2hGcm9tQ29kZXMoY29kZXMpIHtcbiAgICBpZiAoIWNvZGVzKSByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm91bmQ7XG4gICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgY29uc3QgY2xlYW5lZExuZyA9IHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyB8fCB0aGlzLmlzU3VwcG9ydGVkQ29kZShjbGVhbmVkTG5nKSkgZm91bmQgPSBjbGVhbmVkTG5nO1xuICAgIH0pO1xuICAgIGlmICghZm91bmQgJiYgdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MpIHtcbiAgICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdPbmx5ID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGxuZ09ubHkpKSByZXR1cm4gZm91bmQgPSBsbmdPbmx5O1xuICAgICAgICBmb3VuZCA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmZpbmQoc3VwcG9ydGVkTG5nID0+IHtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nID09PSBsbmdPbmx5KSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZignLScpIDwgMCAmJiBsbmdPbmx5LmluZGV4T2YoJy0nKSA8IDApIHJldHVybjtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSA+IDAgJiYgbG5nT25seS5pbmRleE9mKCctJykgPCAwICYmIHN1cHBvcnRlZExuZy5zdWJzdHJpbmcoMCwgc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSkgPT09IGxuZ09ubHkpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKGxuZ09ubHkpID09PSAwICYmIGxuZ09ubHkubGVuZ3RoID4gMSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXTtcbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgZ2V0RmFsbGJhY2tDb2RlcyhmYWxsYmFja3MsIGNvZGUpIHtcbiAgICBpZiAoIWZhbGxiYWNrcykgcmV0dXJuIFtdO1xuICAgIGlmICh0eXBlb2YgZmFsbGJhY2tzID09PSAnZnVuY3Rpb24nKSBmYWxsYmFja3MgPSBmYWxsYmFja3MoY29kZSk7XG4gICAgaWYgKGlzU3RyaW5nKGZhbGxiYWNrcykpIGZhbGxiYWNrcyA9IFtmYWxsYmFja3NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZhbGxiYWNrcykpIHJldHVybiBmYWxsYmFja3M7XG4gICAgaWYgKCFjb2RlKSByZXR1cm4gZmFsbGJhY2tzLmRlZmF1bHQgfHwgW107XG4gICAgbGV0IGZvdW5kID0gZmFsbGJhY2tzW2NvZGVdO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3MuZGVmYXVsdDtcbiAgICByZXR1cm4gZm91bmQgfHwgW107XG4gIH1cbiAgdG9SZXNvbHZlSGllcmFyY2h5KGNvZGUsIGZhbGxiYWNrQ29kZSkge1xuICAgIGNvbnN0IGZhbGxiYWNrQ29kZXMgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tDb2RlIHx8IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyB8fCBbXSwgY29kZSk7XG4gICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICBjb25zdCBhZGRDb2RlID0gYyA9PiB7XG4gICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQ29kZShjKSkge1xuICAgICAgICBjb2Rlcy5wdXNoKGMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgcmVqZWN0aW5nIGxhbmd1YWdlIGNvZGUgbm90IGZvdW5kIGluIHN1cHBvcnRlZExuZ3M6ICR7Y31gKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChpc1N0cmluZyhjb2RlKSAmJiAoY29kZS5pbmRleE9mKCctJykgPiAtMSB8fCBjb2RlLmluZGV4T2YoJ18nKSA+IC0xKSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JykgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdsYW5ndWFnZU9ubHknICYmIHRoaXMub3B0aW9ucy5sb2FkICE9PSAnY3VycmVudE9ubHknKSBhZGRDb2RlKHRoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKGNvZGUpKSB7XG4gICAgICBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICB9XG4gICAgZmFsbGJhY2tDb2Rlcy5mb3JFYWNoKGZjID0+IHtcbiAgICAgIGlmIChjb2Rlcy5pbmRleE9mKGZjKSA8IDApIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZmMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29kZXM7XG4gIH1cbn1cblxubGV0IHNldHMgPSBbe1xuICBsbmdzOiBbJ2FjaCcsICdhaycsICdhbScsICdhcm4nLCAnYnInLCAnZmlsJywgJ2d1bicsICdsbicsICdtZmUnLCAnbWcnLCAnbWknLCAnb2MnLCAncHQnLCAncHQtQlInLCAndGcnLCAndGwnLCAndGknLCAndHInLCAndXonLCAnd2EnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDFcbn0sIHtcbiAgbG5nczogWydhZicsICdhbicsICdhc3QnLCAnYXonLCAnYmcnLCAnYm4nLCAnY2EnLCAnZGEnLCAnZGUnLCAnZGV2JywgJ2VsJywgJ2VuJywgJ2VvJywgJ2VzJywgJ2V0JywgJ2V1JywgJ2ZpJywgJ2ZvJywgJ2Z1cicsICdmeScsICdnbCcsICdndScsICdoYScsICdoaScsICdodScsICdoeScsICdpYScsICdpdCcsICdraycsICdrbicsICdrdScsICdsYicsICdtYWknLCAnbWwnLCAnbW4nLCAnbXInLCAnbmFoJywgJ25hcCcsICduYicsICduZScsICdubCcsICdubicsICdubycsICduc28nLCAncGEnLCAncGFwJywgJ3BtcycsICdwcycsICdwdC1QVCcsICdybScsICdzY28nLCAnc2UnLCAnc2knLCAnc28nLCAnc29uJywgJ3NxJywgJ3N2JywgJ3N3JywgJ3RhJywgJ3RlJywgJ3RrJywgJ3VyJywgJ3lvJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsnYXknLCAnYm8nLCAnY2dnJywgJ2ZhJywgJ2h0JywgJ2lkJywgJ2phJywgJ2pibycsICdrYScsICdrbScsICdrbycsICdreScsICdsbycsICdtcycsICdzYWgnLCAnc3UnLCAndGgnLCAndHQnLCAndWcnLCAndmknLCAnd28nLCAnemgnXSxcbiAgbnI6IFsxXSxcbiAgZmM6IDNcbn0sIHtcbiAgbG5nczogWydiZScsICdicycsICdjbnInLCAnZHonLCAnaHInLCAncnUnLCAnc3InLCAndWsnXSxcbiAgbnI6IFsxLCAyLCA1XSxcbiAgZmM6IDRcbn0sIHtcbiAgbG5nczogWydhciddLFxuICBucjogWzAsIDEsIDIsIDMsIDExLCAxMDBdLFxuICBmYzogNVxufSwge1xuICBsbmdzOiBbJ2NzJywgJ3NrJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA2XG59LCB7XG4gIGxuZ3M6IFsnY3NiJywgJ3BsJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA3XG59LCB7XG4gIGxuZ3M6IFsnY3knXSxcbiAgbnI6IFsxLCAyLCAzLCA4XSxcbiAgZmM6IDhcbn0sIHtcbiAgbG5nczogWydmciddLFxuICBucjogWzEsIDJdLFxuICBmYzogOVxufSwge1xuICBsbmdzOiBbJ2dhJ10sXG4gIG5yOiBbMSwgMiwgMywgNywgMTFdLFxuICBmYzogMTBcbn0sIHtcbiAgbG5nczogWydnZCddLFxuICBucjogWzEsIDIsIDMsIDIwXSxcbiAgZmM6IDExXG59LCB7XG4gIGxuZ3M6IFsnaXMnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDEyXG59LCB7XG4gIGxuZ3M6IFsnanYnXSxcbiAgbnI6IFswLCAxXSxcbiAgZmM6IDEzXG59LCB7XG4gIGxuZ3M6IFsna3cnXSxcbiAgbnI6IFsxLCAyLCAzLCA0XSxcbiAgZmM6IDE0XG59LCB7XG4gIGxuZ3M6IFsnbHQnXSxcbiAgbnI6IFsxLCAyLCAxMF0sXG4gIGZjOiAxNVxufSwge1xuICBsbmdzOiBbJ2x2J10sXG4gIG5yOiBbMSwgMiwgMF0sXG4gIGZjOiAxNlxufSwge1xuICBsbmdzOiBbJ21rJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxN1xufSwge1xuICBsbmdzOiBbJ21uayddLFxuICBucjogWzAsIDEsIDJdLFxuICBmYzogMThcbn0sIHtcbiAgbG5nczogWydtdCddLFxuICBucjogWzEsIDIsIDExLCAyMF0sXG4gIGZjOiAxOVxufSwge1xuICBsbmdzOiBbJ29yJ10sXG4gIG5yOiBbMiwgMV0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsncm8nXSxcbiAgbnI6IFsxLCAyLCAyMF0sXG4gIGZjOiAyMFxufSwge1xuICBsbmdzOiBbJ3NsJ10sXG4gIG5yOiBbNSwgMSwgMiwgM10sXG4gIGZjOiAyMVxufSwge1xuICBsbmdzOiBbJ2hlJywgJ2l3J10sXG4gIG5yOiBbMSwgMiwgMjAsIDIxXSxcbiAgZmM6IDIyXG59XTtcbmxldCBfcnVsZXNQbHVyYWxzVHlwZXMgPSB7XG4gIDE6IG4gPT4gTnVtYmVyKG4gPiAxKSxcbiAgMjogbiA9PiBOdW1iZXIobiAhPSAxKSxcbiAgMzogbiA9PiAwLFxuICA0OiBuID0+IE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDU6IG4gPT4gTnVtYmVyKG4gPT0gMCA/IDAgOiBuID09IDEgPyAxIDogbiA9PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNSksXG4gIDY6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID49IDIgJiYgbiA8PSA0ID8gMSA6IDIpLFxuICA3OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgODogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuICE9IDggJiYgbiAhPSAxMSA/IDIgOiAzKSxcbiAgOTogbiA9PiBOdW1iZXIobiA+PSAyKSxcbiAgMTA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA8IDcgPyAyIDogbiA8IDExID8gMyA6IDQpLFxuICAxMTogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gPT0gMTEgPyAwIDogbiA9PSAyIHx8IG4gPT0gMTIgPyAxIDogbiA+IDIgJiYgbiA8IDIwID8gMiA6IDMpLFxuICAxMjogbiA9PiBOdW1iZXIobiAlIDEwICE9IDEgfHwgbiAlIDEwMCA9PSAxMSksXG4gIDEzOiBuID0+IE51bWJlcihuICE9PSAwKSxcbiAgMTQ6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA9PSAzID8gMiA6IDMpLFxuICAxNTogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICAxNjogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICE9PSAwID8gMSA6IDIpLFxuICAxNzogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogMSksXG4gIDE4OiBuID0+IE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IDIpLFxuICAxOTogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMCB8fCBuICUgMTAwID4gMSAmJiBuICUgMTAwIDwgMTEgPyAxIDogbiAlIDEwMCA+IDEwICYmIG4gJSAxMDAgPCAyMCA/IDIgOiAzKSxcbiAgMjA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDAgfHwgbiAlIDEwMCA+IDAgJiYgbiAlIDEwMCA8IDIwID8gMSA6IDIpLFxuICAyMTogbiA9PiBOdW1iZXIobiAlIDEwMCA9PSAxID8gMSA6IG4gJSAxMDAgPT0gMiA/IDIgOiBuICUgMTAwID09IDMgfHwgbiAlIDEwMCA9PSA0ID8gMyA6IDApLFxuICAyMjogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiAobiA8IDAgfHwgbiA+IDEwKSAmJiBuICUgMTAgPT0gMCA/IDIgOiAzKVxufTtcbmNvbnN0IG5vbkludGxWZXJzaW9ucyA9IFsndjEnLCAndjInLCAndjMnXTtcbmNvbnN0IGludGxWZXJzaW9ucyA9IFsndjQnXTtcbmNvbnN0IHN1ZmZpeGVzT3JkZXIgPSB7XG4gIHplcm86IDAsXG4gIG9uZTogMSxcbiAgdHdvOiAyLFxuICBmZXc6IDMsXG4gIG1hbnk6IDQsXG4gIG90aGVyOiA1XG59O1xuY29uc3QgY3JlYXRlUnVsZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHJ1bGVzID0ge307XG4gIHNldHMuZm9yRWFjaChzZXQgPT4ge1xuICAgIHNldC5sbmdzLmZvckVhY2gobCA9PiB7XG4gICAgICBydWxlc1tsXSA9IHtcbiAgICAgICAgbnVtYmVyczogc2V0Lm5yLFxuICAgICAgICBwbHVyYWxzOiBfcnVsZXNQbHVyYWxzVHlwZXNbc2V0LmZjXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBydWxlcztcbn07XG5jbGFzcyBQbHVyYWxSZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKGxhbmd1YWdlVXRpbHMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5sYW5ndWFnZVV0aWxzID0gbGFuZ3VhZ2VVdGlscztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3BsdXJhbFJlc29sdmVyJyk7XG4gICAgaWYgKCghdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OIHx8IGludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pKSAmJiAodHlwZW9mIEludGwgPT09ICd1bmRlZmluZWQnIHx8ICFJbnRsLlBsdXJhbFJ1bGVzKSkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID0gJ3YzJztcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdZb3VyIGVudmlyb25tZW50IHNlZW1zIG5vdCB0byBiZSBJbnRsIEFQSSBjb21wYXRpYmxlLCB1c2UgYW4gSW50bC5QbHVyYWxSdWxlcyBwb2x5ZmlsbC4gV2lsbCBmYWxsYmFjayB0byB0aGUgY29tcGF0aWJpbGl0eUpTT04gdjMgZm9ybWF0IGhhbmRsaW5nLicpO1xuICAgIH1cbiAgICB0aGlzLnJ1bGVzID0gY3JlYXRlUnVsZXMoKTtcbiAgICB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUgPSB7fTtcbiAgfVxuICBhZGRSdWxlKGxuZywgb2JqKSB7XG4gICAgdGhpcy5ydWxlc1tsbmddID0gb2JqO1xuICB9XG4gIGNsZWFyQ2FjaGUoKSB7XG4gICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlID0ge307XG4gIH1cbiAgZ2V0UnVsZShjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgY29uc3QgY2xlYW5lZENvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlID09PSAnZGV2JyA/ICdlbicgOiBjb2RlKTtcbiAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLm9yZGluYWwgPyAnb3JkaW5hbCcgOiAnY2FyZGluYWwnO1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNsZWFuZWRDb2RlLFxuICAgICAgICB0eXBlXG4gICAgICB9KTtcbiAgICAgIGlmIChjYWNoZUtleSBpbiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtjYWNoZUtleV07XG4gICAgICB9XG4gICAgICBsZXQgcnVsZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJ1bGUgPSBuZXcgSW50bC5QbHVyYWxSdWxlcyhjbGVhbmVkQ29kZSwge1xuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCFjb2RlLm1hdGNoKC8tfF8vKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdQYXJ0ID0gdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpO1xuICAgICAgICBydWxlID0gdGhpcy5nZXRSdWxlKGxuZ1BhcnQsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlW2NhY2hlS2V5XSA9IHJ1bGU7XG4gICAgICByZXR1cm4gcnVsZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucnVsZXNbY29kZV0gfHwgdGhpcy5ydWxlc1t0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSldO1xuICB9XG4gIG5lZWRzUGx1cmFsKGNvZGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuZ2V0UnVsZShjb2RlLCBvcHRpb25zKTtcbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIHJldHVybiBydWxlICYmIHJ1bGUucmVzb2x2ZWRPcHRpb25zKCkucGx1cmFsQ2F0ZWdvcmllcy5sZW5ndGggPiAxO1xuICAgIH1cbiAgICByZXR1cm4gcnVsZSAmJiBydWxlLm51bWJlcnMubGVuZ3RoID4gMTtcbiAgfVxuICBnZXRQbHVyYWxGb3Jtc09mS2V5KGNvZGUsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICByZXR1cm4gdGhpcy5nZXRTdWZmaXhlcyhjb2RlLCBvcHRpb25zKS5tYXAoc3VmZml4ID0+IGAke2tleX0ke3N1ZmZpeH1gKTtcbiAgfVxuICBnZXRTdWZmaXhlcyhjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKCFydWxlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgcmV0dXJuIHJ1bGUucmVzb2x2ZWRPcHRpb25zKCkucGx1cmFsQ2F0ZWdvcmllcy5zb3J0KChwbHVyYWxDYXRlZ29yeTEsIHBsdXJhbENhdGVnb3J5MikgPT4gc3VmZml4ZXNPcmRlcltwbHVyYWxDYXRlZ29yeTFdIC0gc3VmZml4ZXNPcmRlcltwbHVyYWxDYXRlZ29yeTJdKS5tYXAocGx1cmFsQ2F0ZWdvcnkgPT4gYCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHtvcHRpb25zLm9yZGluYWwgPyBgb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YCA6ICcnfSR7cGx1cmFsQ2F0ZWdvcnl9YCk7XG4gICAgfVxuICAgIHJldHVybiBydWxlLm51bWJlcnMubWFwKG51bWJlciA9PiB0aGlzLmdldFN1ZmZpeChjb2RlLCBudW1iZXIsIG9wdGlvbnMpKTtcbiAgfVxuICBnZXRTdWZmaXgoY29kZSwgY291bnQpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuZ2V0UnVsZShjb2RlLCBvcHRpb25zKTtcbiAgICBpZiAocnVsZSkge1xuICAgICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm9wdGlvbnMucHJlcGVuZH0ke29wdGlvbnMub3JkaW5hbCA/IGBvcmRpbmFsJHt0aGlzLm9wdGlvbnMucHJlcGVuZH1gIDogJyd9JHtydWxlLnNlbGVjdChjb3VudCl9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShydWxlLCBjb3VudCk7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyLndhcm4oYG5vIHBsdXJhbCBydWxlIGZvdW5kIGZvcjogJHtjb2RlfWApO1xuICAgIHJldHVybiAnJztcbiAgfVxuICBnZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUocnVsZSwgY291bnQpIHtcbiAgICBjb25zdCBpZHggPSBydWxlLm5vQWJzID8gcnVsZS5wbHVyYWxzKGNvdW50KSA6IHJ1bGUucGx1cmFscyhNYXRoLmFicyhjb3VudCkpO1xuICAgIGxldCBzdWZmaXggPSBydWxlLm51bWJlcnNbaWR4XTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4ICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICBpZiAoc3VmZml4ID09PSAyKSB7XG4gICAgICAgIHN1ZmZpeCA9ICdwbHVyYWwnO1xuICAgICAgfSBlbHNlIGlmIChzdWZmaXggPT09IDEpIHtcbiAgICAgICAgc3VmZml4ID0gJyc7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJldHVyblN1ZmZpeCA9ICgpID0+IHRoaXMub3B0aW9ucy5wcmVwZW5kICYmIHN1ZmZpeC50b1N0cmluZygpID8gdGhpcy5vcHRpb25zLnByZXBlbmQgKyBzdWZmaXgudG9TdHJpbmcoKSA6IHN1ZmZpeC50b1N0cmluZygpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MScpIHtcbiAgICAgIGlmIChzdWZmaXggPT09IDEpIHJldHVybiAnJztcbiAgICAgIGlmICh0eXBlb2Ygc3VmZml4ID09PSAnbnVtYmVyJykgcmV0dXJuIGBfcGx1cmFsXyR7c3VmZml4LnRvU3RyaW5nKCl9YDtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9PT0gJ3YyJykge1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4ICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBpZHgudG9TdHJpbmcoKSA/IHRoaXMub3B0aW9ucy5wcmVwZW5kICsgaWR4LnRvU3RyaW5nKCkgOiBpZHgudG9TdHJpbmcoKTtcbiAgfVxuICBzaG91bGRVc2VJbnRsQXBpKCkge1xuICAgIHJldHVybiAhbm9uSW50bFZlcnNpb25zLmluY2x1ZGVzKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTik7XG4gIH1cbn1cblxuY29uc3QgZGVlcEZpbmRXaXRoRGVmYXVsdHMgPSBmdW5jdGlvbiAoZGF0YSwgZGVmYXVsdERhdGEsIGtleSkge1xuICBsZXQga2V5U2VwYXJhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAnLic7XG4gIGxldCBpZ25vcmVKU09OU3RydWN0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0cnVlO1xuICBsZXQgcGF0aCA9IGdldFBhdGhXaXRoRGVmYXVsdHMoZGF0YSwgZGVmYXVsdERhdGEsIGtleSk7XG4gIGlmICghcGF0aCAmJiBpZ25vcmVKU09OU3RydWN0dXJlICYmIGlzU3RyaW5nKGtleSkpIHtcbiAgICBwYXRoID0gZGVlcEZpbmQoZGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChwYXRoID09PSB1bmRlZmluZWQpIHBhdGggPSBkZWVwRmluZChkZWZhdWx0RGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIHJldHVybiBwYXRoO1xufTtcbmNvbnN0IHJlZ2V4U2FmZSA9IHZhbCA9PiB2YWwucmVwbGFjZSgvXFwkL2csICckJCQkJyk7XG5jbGFzcyBJbnRlcnBvbGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnaW50ZXJwb2xhdG9yJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8ICh2YWx1ZSA9PiB2YWx1ZSk7XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGlmICghb3B0aW9ucy5pbnRlcnBvbGF0aW9uKSBvcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgICBlc2NhcGVWYWx1ZTogdHJ1ZVxuICAgIH07XG4gICAgY29uc3Qge1xuICAgICAgZXNjYXBlOiBlc2NhcGUkMSxcbiAgICAgIGVzY2FwZVZhbHVlLFxuICAgICAgdXNlUmF3VmFsdWVUb0VzY2FwZSxcbiAgICAgIHByZWZpeCxcbiAgICAgIHByZWZpeEVzY2FwZWQsXG4gICAgICBzdWZmaXgsXG4gICAgICBzdWZmaXhFc2NhcGVkLFxuICAgICAgZm9ybWF0U2VwYXJhdG9yLFxuICAgICAgdW5lc2NhcGVTdWZmaXgsXG4gICAgICB1bmVzY2FwZVByZWZpeCxcbiAgICAgIG5lc3RpbmdQcmVmaXgsXG4gICAgICBuZXN0aW5nUHJlZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdTdWZmaXgsXG4gICAgICBuZXN0aW5nU3VmZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yLFxuICAgICAgbWF4UmVwbGFjZXMsXG4gICAgICBhbHdheXNGb3JtYXRcbiAgICB9ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uO1xuICAgIHRoaXMuZXNjYXBlID0gZXNjYXBlJDEgIT09IHVuZGVmaW5lZCA/IGVzY2FwZSQxIDogZXNjYXBlO1xuICAgIHRoaXMuZXNjYXBlVmFsdWUgPSBlc2NhcGVWYWx1ZSAhPT0gdW5kZWZpbmVkID8gZXNjYXBlVmFsdWUgOiB0cnVlO1xuICAgIHRoaXMudXNlUmF3VmFsdWVUb0VzY2FwZSA9IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgIT09IHVuZGVmaW5lZCA/IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgOiBmYWxzZTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCA/IHJlZ2V4RXNjYXBlKHByZWZpeCkgOiBwcmVmaXhFc2NhcGVkIHx8ICd7eyc7XG4gICAgdGhpcy5zdWZmaXggPSBzdWZmaXggPyByZWdleEVzY2FwZShzdWZmaXgpIDogc3VmZml4RXNjYXBlZCB8fCAnfX0nO1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLnVuZXNjYXBlUHJlZml4ID0gdW5lc2NhcGVTdWZmaXggPyAnJyA6IHVuZXNjYXBlUHJlZml4IHx8ICctJztcbiAgICB0aGlzLnVuZXNjYXBlU3VmZml4ID0gdGhpcy51bmVzY2FwZVByZWZpeCA/ICcnIDogdW5lc2NhcGVTdWZmaXggfHwgJyc7XG4gICAgdGhpcy5uZXN0aW5nUHJlZml4ID0gbmVzdGluZ1ByZWZpeCA/IHJlZ2V4RXNjYXBlKG5lc3RpbmdQcmVmaXgpIDogbmVzdGluZ1ByZWZpeEVzY2FwZWQgfHwgcmVnZXhFc2NhcGUoJyR0KCcpO1xuICAgIHRoaXMubmVzdGluZ1N1ZmZpeCA9IG5lc3RpbmdTdWZmaXggPyByZWdleEVzY2FwZShuZXN0aW5nU3VmZml4KSA6IG5lc3RpbmdTdWZmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCcpJyk7XG4gICAgdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvciA9IG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLm1heFJlcGxhY2VzID0gbWF4UmVwbGFjZXMgfHwgMTAwMDtcbiAgICB0aGlzLmFsd2F5c0Zvcm1hdCA9IGFsd2F5c0Zvcm1hdCAhPT0gdW5kZWZpbmVkID8gYWx3YXlzRm9ybWF0IDogZmFsc2U7XG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuICB9XG4gIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMuaW5pdCh0aGlzLm9wdGlvbnMpO1xuICB9XG4gIHJlc2V0UmVnRXhwKCkge1xuICAgIGNvbnN0IGdldE9yUmVzZXRSZWdFeHAgPSAoZXhpc3RpbmdSZWdFeHAsIHBhdHRlcm4pID0+IHtcbiAgICAgIGlmIChleGlzdGluZ1JlZ0V4cCAmJiBleGlzdGluZ1JlZ0V4cC5zb3VyY2UgPT09IHBhdHRlcm4pIHtcbiAgICAgICAgZXhpc3RpbmdSZWdFeHAubGFzdEluZGV4ID0gMDtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVnRXhwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgJ2cnKTtcbiAgICB9O1xuICAgIHRoaXMucmVnZXhwID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLnJlZ2V4cCwgYCR7dGhpcy5wcmVmaXh9KC4rPykke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMucmVnZXhwVW5lc2NhcGUgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMucmVnZXhwVW5lc2NhcGUsIGAke3RoaXMucHJlZml4fSR7dGhpcy51bmVzY2FwZVByZWZpeH0oLis/KSR7dGhpcy51bmVzY2FwZVN1ZmZpeH0ke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMubmVzdGluZ1JlZ2V4cCA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5uZXN0aW5nUmVnZXhwLCBgJHt0aGlzLm5lc3RpbmdQcmVmaXh9KC4rPykke3RoaXMubmVzdGluZ1N1ZmZpeH1gKTtcbiAgfVxuICBpbnRlcnBvbGF0ZShzdHIsIGRhdGEsIGxuZywgb3B0aW9ucykge1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IHJlcGxhY2VzO1xuICAgIGNvbnN0IGRlZmF1bHREYXRhID0gdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMgfHwge307XG4gICAgY29uc3QgaGFuZGxlRm9ybWF0ID0ga2V5ID0+IHtcbiAgICAgIGlmIChrZXkuaW5kZXhPZih0aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBkZWVwRmluZFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwga2V5LCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmFsd2F5c0Zvcm1hdCA/IHRoaXMuZm9ybWF0KHBhdGgsIHVuZGVmaW5lZCwgbG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgIGludGVycG9sYXRpb25rZXk6IGtleVxuICAgICAgICB9KSA6IHBhdGg7XG4gICAgICB9XG4gICAgICBjb25zdCBwID0ga2V5LnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICAgIGNvbnN0IGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgY29uc3QgZiA9IHAuam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZXBGaW5kV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrLCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSksIGYsIGxuZywge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBrXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgICBjb25zdCBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIgPSBvcHRpb25zICYmIG9wdGlvbnMubWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyIHx8IHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI7XG4gICAgY29uc3Qgc2tpcE9uVmFyaWFibGVzID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyA6IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcztcbiAgICBjb25zdCB0b2RvcyA9IFt7XG4gICAgICByZWdleDogdGhpcy5yZWdleHBVbmVzY2FwZSxcbiAgICAgIHNhZmVWYWx1ZTogdmFsID0+IHJlZ2V4U2FmZSh2YWwpXG4gICAgfSwge1xuICAgICAgcmVnZXg6IHRoaXMucmVnZXhwLFxuICAgICAgc2FmZVZhbHVlOiB2YWwgPT4gdGhpcy5lc2NhcGVWYWx1ZSA/IHJlZ2V4U2FmZSh0aGlzLmVzY2FwZSh2YWwpKSA6IHJlZ2V4U2FmZSh2YWwpXG4gICAgfV07XG4gICAgdG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgIHJlcGxhY2VzID0gMDtcbiAgICAgIHdoaWxlIChtYXRjaCA9IHRvZG8ucmVnZXguZXhlYyhzdHIpKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRWYXIgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoZWRWYXIpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyKHN0ciwgbWF0Y2gsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdmFsdWUgPSBpc1N0cmluZyh0ZW1wKSA/IHRlbXAgOiAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG1hdGNoZWRWYXIpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byBwYXNzIGluIHZhcmlhYmxlICR7bWF0Y2hlZFZhcn0gZm9yIGludGVycG9sYXRpbmcgJHtzdHJ9YCk7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaXNTdHJpbmcodmFsdWUpICYmICF0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGUpIHtcbiAgICAgICAgICB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhZmVWYWx1ZSA9IHRvZG8uc2FmZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHNhZmVWYWx1ZSk7XG4gICAgICAgIGlmIChza2lwT25WYXJpYWJsZXMpIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlcysrO1xuICAgICAgICBpZiAocmVwbGFjZXMgPj0gdGhpcy5tYXhSZXBsYWNlcykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBuZXN0KHN0ciwgZmMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCB2YWx1ZTtcbiAgICBsZXQgY2xvbmVkT3B0aW9ucztcbiAgICBjb25zdCBoYW5kbGVIYXNPcHRpb25zID0gKGtleSwgaW5oZXJpdGVkT3B0aW9ucykgPT4ge1xuICAgICAgY29uc3Qgc2VwID0gdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjtcbiAgICAgIGlmIChrZXkuaW5kZXhPZihzZXApIDwgMCkgcmV0dXJuIGtleTtcbiAgICAgIGNvbnN0IGMgPSBrZXkuc3BsaXQobmV3IFJlZ0V4cChgJHtzZXB9WyBdKntgKSk7XG4gICAgICBsZXQgb3B0aW9uc1N0cmluZyA9IGB7JHtjWzFdfWA7XG4gICAgICBrZXkgPSBjWzBdO1xuICAgICAgb3B0aW9uc1N0cmluZyA9IHRoaXMuaW50ZXJwb2xhdGUob3B0aW9uc1N0cmluZywgY2xvbmVkT3B0aW9ucyk7XG4gICAgICBjb25zdCBtYXRjaGVkU2luZ2xlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvJy9nKTtcbiAgICAgIGNvbnN0IG1hdGNoZWREb3VibGVRdW90ZXMgPSBvcHRpb25zU3RyaW5nLm1hdGNoKC9cIi9nKTtcbiAgICAgIGlmIChtYXRjaGVkU2luZ2xlUXVvdGVzICYmIG1hdGNoZWRTaW5nbGVRdW90ZXMubGVuZ3RoICUgMiA9PT0gMCAmJiAhbWF0Y2hlZERvdWJsZVF1b3RlcyB8fCBtYXRjaGVkRG91YmxlUXVvdGVzLmxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgICAgb3B0aW9uc1N0cmluZyA9IG9wdGlvbnNTdHJpbmcucmVwbGFjZSgvJy9nLCAnXCInKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNsb25lZE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmcpO1xuICAgICAgICBpZiAoaW5oZXJpdGVkT3B0aW9ucykgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgICAuLi5pbmhlcml0ZWRPcHRpb25zLFxuICAgICAgICAgIC4uLmNsb25lZE9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICR7a2V5fWAsIGUpO1xuICAgICAgICByZXR1cm4gYCR7a2V5fSR7c2VwfSR7b3B0aW9uc1N0cmluZ31gO1xuICAgICAgfVxuICAgICAgaWYgKGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlICYmIGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlLmluZGV4T2YodGhpcy5wcmVmaXgpID4gLTEpIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhzdHIpKSB7XG4gICAgICBsZXQgZm9ybWF0dGVycyA9IFtdO1xuICAgICAgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSBjbG9uZWRPcHRpb25zLnJlcGxhY2UgJiYgIWlzU3RyaW5nKGNsb25lZE9wdGlvbnMucmVwbGFjZSkgPyBjbG9uZWRPcHRpb25zLnJlcGxhY2UgOiBjbG9uZWRPcHRpb25zO1xuICAgICAgY2xvbmVkT3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgPSBmYWxzZTtcbiAgICAgIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIGxldCBkb1JlZHVjZSA9IGZhbHNlO1xuICAgICAgaWYgKG1hdGNoWzBdLmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpICE9PSAtMSAmJiAhL3suKn0vLnRlc3QobWF0Y2hbMV0pKSB7XG4gICAgICAgIGNvbnN0IHIgPSBtYXRjaFsxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGVsZW0gPT4gZWxlbS50cmltKCkpO1xuICAgICAgICBtYXRjaFsxXSA9IHIuc2hpZnQoKTtcbiAgICAgICAgZm9ybWF0dGVycyA9IHI7XG4gICAgICAgIGRvUmVkdWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZmMoaGFuZGxlSGFzT3B0aW9ucy5jYWxsKHRoaXMsIG1hdGNoWzFdLnRyaW0oKSwgY2xvbmVkT3B0aW9ucyksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgaWYgKHZhbHVlICYmIG1hdGNoWzBdID09PSBzdHIgJiYgIWlzU3RyaW5nKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgaWYgKCFpc1N0cmluZyh2YWx1ZSkpIHZhbHVlID0gbWFrZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byByZXNvbHZlICR7bWF0Y2hbMV19IGZvciBuZXN0aW5nICR7c3RyfWApO1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKGRvUmVkdWNlKSB7XG4gICAgICAgIHZhbHVlID0gZm9ybWF0dGVycy5yZWR1Y2UoKHYsIGYpID0+IHRoaXMuZm9ybWF0KHYsIGYsIG9wdGlvbnMubG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBtYXRjaFsxXS50cmltKClcbiAgICAgICAgfSksIHZhbHVlLnRyaW0oKSk7XG4gICAgICB9XG4gICAgICBzdHIgPSBzdHIucmVwbGFjZShtYXRjaFswXSwgdmFsdWUpO1xuICAgICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5jb25zdCBwYXJzZUZvcm1hdFN0ciA9IGZvcm1hdFN0ciA9PiB7XG4gIGxldCBmb3JtYXROYW1lID0gZm9ybWF0U3RyLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBjb25zdCBmb3JtYXRPcHRpb25zID0ge307XG4gIGlmIChmb3JtYXRTdHIuaW5kZXhPZignKCcpID4gLTEpIHtcbiAgICBjb25zdCBwID0gZm9ybWF0U3RyLnNwbGl0KCcoJyk7XG4gICAgZm9ybWF0TmFtZSA9IHBbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgY29uc3Qgb3B0U3RyID0gcFsxXS5zdWJzdHJpbmcoMCwgcFsxXS5sZW5ndGggLSAxKTtcbiAgICBpZiAoZm9ybWF0TmFtZSA9PT0gJ2N1cnJlbmN5JyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLmN1cnJlbmN5KSBmb3JtYXRPcHRpb25zLmN1cnJlbmN5ID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2UgaWYgKGZvcm1hdE5hbWUgPT09ICdyZWxhdGl2ZXRpbWUnICYmIG9wdFN0ci5pbmRleE9mKCc6JykgPCAwKSB7XG4gICAgICBpZiAoIWZvcm1hdE9wdGlvbnMucmFuZ2UpIGZvcm1hdE9wdGlvbnMucmFuZ2UgPSBvcHRTdHIudHJpbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvcHRzID0gb3B0U3RyLnNwbGl0KCc7Jyk7XG4gICAgICBvcHRzLmZvckVhY2gob3B0ID0+IHtcbiAgICAgICAgaWYgKG9wdCkge1xuICAgICAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gb3B0LnNwbGl0KCc6Jyk7XG4gICAgICAgICAgY29uc3QgdmFsID0gcmVzdC5qb2luKCc6JykudHJpbSgpLnJlcGxhY2UoL14nK3wnKyQvZywgJycpO1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWRLZXkgPSBrZXkudHJpbSgpO1xuICAgICAgICAgIGlmICghZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSkgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHZhbDtcbiAgICAgICAgICBpZiAodmFsID09PSAnZmFsc2UnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ3RydWUnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSBwYXJzZUludCh2YWwsIDEwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgZm9ybWF0TmFtZSxcbiAgICBmb3JtYXRPcHRpb25zXG4gIH07XG59O1xuY29uc3QgY3JlYXRlQ2FjaGVkRm9ybWF0dGVyID0gZm4gPT4ge1xuICBjb25zdCBjYWNoZSA9IHt9O1xuICByZXR1cm4gKHZhbCwgbG5nLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IG9wdEZvckNhY2hlID0gb3B0aW9ucztcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb25rZXkgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXMgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXNbb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5XSAmJiBvcHRpb25zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0pIHtcbiAgICAgIG9wdEZvckNhY2hlID0ge1xuICAgICAgICAuLi5vcHRGb3JDYWNoZSxcbiAgICAgICAgW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV06IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gbG5nICsgSlNPTi5zdHJpbmdpZnkob3B0Rm9yQ2FjaGUpO1xuICAgIGxldCBmb3JtYXR0ZXIgPSBjYWNoZVtrZXldO1xuICAgIGlmICghZm9ybWF0dGVyKSB7XG4gICAgICBmb3JtYXR0ZXIgPSBmbihnZXRDbGVhbmVkQ29kZShsbmcpLCBvcHRpb25zKTtcbiAgICAgIGNhY2hlW2tleV0gPSBmb3JtYXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZXIodmFsKTtcbiAgfTtcbn07XG5jbGFzcyBGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnZm9ybWF0dGVyJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdHMgPSB7XG4gICAgICBudW1iZXI6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KSxcbiAgICAgIGN1cnJlbmN5OiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHQsXG4gICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBkYXRldGltZTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICByZWxhdGl2ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCwgb3B0LnJhbmdlIHx8ICdkYXknKTtcbiAgICAgIH0pLFxuICAgICAgbGlzdDogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KVxuICAgIH07XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgaW50ZXJwb2xhdGlvbjoge31cbiAgICB9O1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG4gIH1cbiAgYWRkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gZmM7XG4gIH1cbiAgYWRkQ2FjaGVkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKGZjKTtcbiAgfVxuICBmb3JtYXQodmFsdWUsIGZvcm1hdCwgbG5nKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNvbnN0IGZvcm1hdHMgPSBmb3JtYXQuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgIGlmIChmb3JtYXRzLmxlbmd0aCA+IDEgJiYgZm9ybWF0c1swXS5pbmRleE9mKCcoJykgPiAxICYmIGZvcm1hdHNbMF0uaW5kZXhPZignKScpIDwgMCAmJiBmb3JtYXRzLmZpbmQoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKSkge1xuICAgICAgY29uc3QgbGFzdEluZGV4ID0gZm9ybWF0cy5maW5kSW5kZXgoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKTtcbiAgICAgIGZvcm1hdHNbMF0gPSBbZm9ybWF0c1swXSwgLi4uZm9ybWF0cy5zcGxpY2UoMSwgbGFzdEluZGV4KV0uam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdHMucmVkdWNlKChtZW0sIGYpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybWF0TmFtZSxcbiAgICAgICAgZm9ybWF0T3B0aW9uc1xuICAgICAgfSA9IHBhcnNlRm9ybWF0U3RyKGYpO1xuICAgICAgaWYgKHRoaXMuZm9ybWF0c1tmb3JtYXROYW1lXSkge1xuICAgICAgICBsZXQgZm9ybWF0dGVkID0gbWVtO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHZhbE9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gfHwge307XG4gICAgICAgICAgY29uc3QgbCA9IHZhbE9wdGlvbnMubG9jYWxlIHx8IHZhbE9wdGlvbnMubG5nIHx8IG9wdGlvbnMubG9jYWxlIHx8IG9wdGlvbnMubG5nIHx8IGxuZztcbiAgICAgICAgICBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdHNbZm9ybWF0TmFtZV0obWVtLCBsLCB7XG4gICAgICAgICAgICAuLi5mb3JtYXRPcHRpb25zLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnZhbE9wdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgdGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgJHtmb3JtYXROYW1lfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbTtcbiAgICB9LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jb25zdCByZW1vdmVQZW5kaW5nID0gKHEsIG5hbWUpID0+IHtcbiAgaWYgKHEucGVuZGluZ1tuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVsZXRlIHEucGVuZGluZ1tuYW1lXTtcbiAgICBxLnBlbmRpbmdDb3VudC0tO1xuICB9XG59O1xuY2xhc3MgQ29ubmVjdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoYmFja2VuZCwgc3RvcmUsIHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IHNlcnZpY2VzLmxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdiYWNrZW5kQ29ubmVjdG9yJyk7XG4gICAgdGhpcy53YWl0aW5nUmVhZHMgPSBbXTtcbiAgICB0aGlzLm1heFBhcmFsbGVsUmVhZHMgPSBvcHRpb25zLm1heFBhcmFsbGVsUmVhZHMgfHwgMTA7XG4gICAgdGhpcy5yZWFkaW5nQ2FsbHMgPSAwO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA+PSAwID8gb3B0aW9ucy5tYXhSZXRyaWVzIDogNTtcbiAgICB0aGlzLnJldHJ5VGltZW91dCA9IG9wdGlvbnMucmV0cnlUaW1lb3V0ID49IDEgPyBvcHRpb25zLnJldHJ5VGltZW91dCA6IDM1MDtcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmluaXQpIHtcbiAgICAgIHRoaXMuYmFja2VuZC5pbml0KHNlcnZpY2VzLCBvcHRpb25zLmJhY2tlbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBxdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHRvTG9hZCA9IHt9O1xuICAgIGNvbnN0IHBlbmRpbmcgPSB7fTtcbiAgICBjb25zdCB0b0xvYWRMYW5ndWFnZXMgPSB7fTtcbiAgICBjb25zdCB0b0xvYWROYW1lc3BhY2VzID0ge307XG4gICAgbGFuZ3VhZ2VzLmZvckVhY2gobG5nID0+IHtcbiAgICAgIGxldCBoYXNBbGxOYW1lc3BhY2VzID0gdHJ1ZTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBgJHtsbmd9fCR7bnN9YDtcbiAgICAgICAgaWYgKCFvcHRpb25zLnJlbG9hZCAmJiB0aGlzLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZVtuYW1lXSA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA8IDApIDsgZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA9PT0gMSkge1xuICAgICAgICAgIGlmIChwZW5kaW5nW25hbWVdID09PSB1bmRlZmluZWQpIHBlbmRpbmdbbmFtZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdGVbbmFtZV0gPSAxO1xuICAgICAgICAgIGhhc0FsbE5hbWVzcGFjZXMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocGVuZGluZ1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwZW5kaW5nW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodG9Mb2FkW25hbWVdID09PSB1bmRlZmluZWQpIHRvTG9hZFtuYW1lXSA9IHRydWU7XG4gICAgICAgICAgaWYgKHRvTG9hZE5hbWVzcGFjZXNbbnNdID09PSB1bmRlZmluZWQpIHRvTG9hZE5hbWVzcGFjZXNbbnNdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIWhhc0FsbE5hbWVzcGFjZXMpIHRvTG9hZExhbmd1YWdlc1tsbmddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAoT2JqZWN0LmtleXModG9Mb2FkKS5sZW5ndGggfHwgT2JqZWN0LmtleXMocGVuZGluZykubGVuZ3RoKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goe1xuICAgICAgICBwZW5kaW5nLFxuICAgICAgICBwZW5kaW5nQ291bnQ6IE9iamVjdC5rZXlzKHBlbmRpbmcpLmxlbmd0aCxcbiAgICAgICAgbG9hZGVkOiB7fSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdG9Mb2FkOiBPYmplY3Qua2V5cyh0b0xvYWQpLFxuICAgICAgcGVuZGluZzogT2JqZWN0LmtleXMocGVuZGluZyksXG4gICAgICB0b0xvYWRMYW5ndWFnZXM6IE9iamVjdC5rZXlzKHRvTG9hZExhbmd1YWdlcyksXG4gICAgICB0b0xvYWROYW1lc3BhY2VzOiBPYmplY3Qua2V5cyh0b0xvYWROYW1lc3BhY2VzKVxuICAgIH07XG4gIH1cbiAgbG9hZGVkKG5hbWUsIGVyciwgZGF0YSkge1xuICAgIGNvbnN0IHMgPSBuYW1lLnNwbGl0KCd8Jyk7XG4gICAgY29uc3QgbG5nID0gc1swXTtcbiAgICBjb25zdCBucyA9IHNbMV07XG4gICAgaWYgKGVycikgdGhpcy5lbWl0KCdmYWlsZWRMb2FkaW5nJywgbG5nLCBucywgZXJyKTtcbiAgICBpZiAoIWVyciAmJiBkYXRhKSB7XG4gICAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIGRhdGEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgIHNraXBDb3B5OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZVtuYW1lXSA9IGVyciA/IC0xIDogMjtcbiAgICBpZiAoZXJyICYmIGRhdGEpIHRoaXMuc3RhdGVbbmFtZV0gPSAwO1xuICAgIGNvbnN0IGxvYWRlZCA9IHt9O1xuICAgIHRoaXMucXVldWUuZm9yRWFjaChxID0+IHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlUGVuZGluZyhxLCBuYW1lKTtcbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgIGlmIChxLnBlbmRpbmdDb3VudCA9PT0gMCAmJiAhcS5kb25lKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHEubG9hZGVkKS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmICghbG9hZGVkW2xdKSBsb2FkZWRbbF0gPSB7fTtcbiAgICAgICAgICBjb25zdCBsb2FkZWRLZXlzID0gcS5sb2FkZWRbbF07XG4gICAgICAgICAgaWYgKGxvYWRlZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb2FkZWRLZXlzLmZvckVhY2gobiA9PiB7XG4gICAgICAgICAgICAgIGlmIChsb2FkZWRbbF1bbl0gPT09IHVuZGVmaW5lZCkgbG9hZGVkW2xdW25dID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHEuZG9uZSA9IHRydWU7XG4gICAgICAgIGlmIChxLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKHEuZXJyb3JzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoJ2xvYWRlZCcsIGxvYWRlZCk7XG4gICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuZmlsdGVyKHEgPT4gIXEuZG9uZSk7XG4gIH1cbiAgcmVhZChsbmcsIG5zLCBmY05hbWUpIHtcbiAgICBsZXQgdHJpZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG4gICAgbGV0IHdhaXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHRoaXMucmV0cnlUaW1lb3V0O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ID8gYXJndW1lbnRzWzVdIDogdW5kZWZpbmVkO1xuICAgIGlmICghbG5nLmxlbmd0aCkgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHt9KTtcbiAgICBpZiAodGhpcy5yZWFkaW5nQ2FsbHMgPj0gdGhpcy5tYXhQYXJhbGxlbFJlYWRzKSB7XG4gICAgICB0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtcbiAgICAgICAgbG5nLFxuICAgICAgICBucyxcbiAgICAgICAgZmNOYW1lLFxuICAgICAgICB0cmllZCxcbiAgICAgICAgd2FpdCxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlYWRpbmdDYWxscysrO1xuICAgIGNvbnN0IHJlc29sdmVyID0gKGVyciwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5yZWFkaW5nQ2FsbHMtLTtcbiAgICAgIGlmICh0aGlzLndhaXRpbmdSZWFkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLndhaXRpbmdSZWFkcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLnJlYWQobmV4dC5sbmcsIG5leHQubnMsIG5leHQuZmNOYW1lLCBuZXh0LnRyaWVkLCBuZXh0LndhaXQsIG5leHQuY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgaWYgKGVyciAmJiBkYXRhICYmIHRyaWVkIDwgdGhpcy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVhZC5jYWxsKHRoaXMsIGxuZywgbnMsIGZjTmFtZSwgdHJpZWQgKyAxLCB3YWl0ICogMiwgY2FsbGJhY2spO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9O1xuICAgIGNvbnN0IGZjID0gdGhpcy5iYWNrZW5kW2ZjTmFtZV0uYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgIGlmIChmYy5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHIgPSBmYyhsbmcsIG5zKTtcbiAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHIudGhlbihkYXRhID0+IHJlc29sdmVyKG51bGwsIGRhdGEpKS5jYXRjaChyZXNvbHZlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZXIobnVsbCwgcik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXNvbHZlcihlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZmMobG5nLCBucywgcmVzb2x2ZXIpO1xuICB9XG4gIHByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIXRoaXMuYmFja2VuZCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignTm8gYmFja2VuZCB3YXMgYWRkZWQgdmlhIGkxOG5leHQudXNlLiBXaWxsIG5vdCBsb2FkIHJlc291cmNlcy4nKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcobGFuZ3VhZ2VzKSkgbGFuZ3VhZ2VzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmIChpc1N0cmluZyhuYW1lc3BhY2VzKSkgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcbiAgICBjb25zdCB0b0xvYWQgPSB0aGlzLnF1ZXVlTG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBpZiAoIXRvTG9hZC50b0xvYWQubGVuZ3RoKSB7XG4gICAgICBpZiAoIXRvTG9hZC5wZW5kaW5nLmxlbmd0aCkgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICB0aGlzLmxvYWRPbmUobmFtZSk7XG4gICAgfSk7XG4gIH1cbiAgbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIHt9LCBjYWxsYmFjayk7XG4gIH1cbiAgcmVsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICB0aGlzLnByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcywge1xuICAgICAgcmVsb2FkOiB0cnVlXG4gICAgfSwgY2FsbGJhY2spO1xuICB9XG4gIGxvYWRPbmUobmFtZSkge1xuICAgIGxldCBwcmVmaXggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICAgIGNvbnN0IHMgPSBuYW1lLnNwbGl0KCd8Jyk7XG4gICAgY29uc3QgbG5nID0gc1swXTtcbiAgICBjb25zdCBucyA9IHNbMV07XG4gICAgdGhpcy5yZWFkKGxuZywgbnMsICdyZWFkJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIChlcnIsIGRhdGEpID0+IHtcbiAgICAgIGlmIChlcnIpIHRoaXMubG9nZ2VyLndhcm4oYCR7cHJlZml4fWxvYWRpbmcgbmFtZXNwYWNlICR7bnN9IGZvciBsYW5ndWFnZSAke2xuZ30gZmFpbGVkYCwgZXJyKTtcbiAgICAgIGlmICghZXJyICYmIGRhdGEpIHRoaXMubG9nZ2VyLmxvZyhgJHtwcmVmaXh9bG9hZGVkIG5hbWVzcGFjZSAke25zfSBmb3IgbGFuZ3VhZ2UgJHtsbmd9YCwgZGF0YSk7XG4gICAgICB0aGlzLmxvYWRlZChuYW1lLCBlcnIsIGRhdGEpO1xuICAgIH0pO1xuICB9XG4gIHNhdmVNaXNzaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUsIGlzVXBkYXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHt9O1xuICAgIGxldCBjbGIgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6ICgpID0+IHt9O1xuICAgIGlmICh0aGlzLnNlcnZpY2VzLnV0aWxzICYmIHRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlICYmICF0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShuYW1lc3BhY2UpKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKGBkaWQgbm90IHNhdmUga2V5IFwiJHtrZXl9XCIgYXMgdGhlIG5hbWVzcGFjZSBcIiR7bmFtZXNwYWNlfVwiIHdhcyBub3QgeWV0IGxvYWRlZGAsICdUaGlzIG1lYW5zIHNvbWV0aGluZyBJUyBXUk9ORyBpbiB5b3VyIHNldHVwLiBZb3UgYWNjZXNzIHRoZSB0IGZ1bmN0aW9uIGJlZm9yZSBpMThuZXh0LmluaXQgLyBpMThuZXh0LmxvYWROYW1lc3BhY2UgLyBpMThuZXh0LmNoYW5nZUxhbmd1YWdlIHdhcyBkb25lLiBXYWl0IGZvciB0aGUgY2FsbGJhY2sgb3IgUHJvbWlzZSB0byByZXNvbHZlIGJlZm9yZSBhY2Nlc3NpbmcgaXQhISEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkIHx8IGtleSA9PT0gbnVsbCB8fCBrZXkgPT09ICcnKSByZXR1cm47XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuY3JlYXRlKSB7XG4gICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBpc1VwZGF0ZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGZjID0gdGhpcy5iYWNrZW5kLmNyZWF0ZS5iaW5kKHRoaXMuYmFja2VuZCk7XG4gICAgICBpZiAoZmMubGVuZ3RoIDwgNikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCByO1xuICAgICAgICAgIGlmIChmYy5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICAgIHIgPSBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBvcHRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgciA9IGZjKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAociAmJiB0eXBlb2Ygci50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByLnRoZW4oZGF0YSA9PiBjbGIobnVsbCwgZGF0YSkpLmNhdGNoKGNsYik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsYihudWxsLCByKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNsYihlcnIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBjbGIsIG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWxhbmd1YWdlcyB8fCAhbGFuZ3VhZ2VzWzBdKSByZXR1cm47XG4gICAgdGhpcy5zdG9yZS5hZGRSZXNvdXJjZShsYW5ndWFnZXNbMF0sIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKTtcbiAgfVxufVxuXG5jb25zdCBnZXQgPSAoKSA9PiAoe1xuICBkZWJ1ZzogZmFsc2UsXG4gIGluaXRJbW1lZGlhdGU6IHRydWUsXG4gIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gIGRlZmF1bHROUzogWyd0cmFuc2xhdGlvbiddLFxuICBmYWxsYmFja0xuZzogWydkZXYnXSxcbiAgZmFsbGJhY2tOUzogZmFsc2UsXG4gIHN1cHBvcnRlZExuZ3M6IGZhbHNlLFxuICBub25FeHBsaWNpdFN1cHBvcnRlZExuZ3M6IGZhbHNlLFxuICBsb2FkOiAnYWxsJyxcbiAgcHJlbG9hZDogZmFsc2UsXG4gIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0cnVlLFxuICBrZXlTZXBhcmF0b3I6ICcuJyxcbiAgbnNTZXBhcmF0b3I6ICc6JyxcbiAgcGx1cmFsU2VwYXJhdG9yOiAnXycsXG4gIGNvbnRleHRTZXBhcmF0b3I6ICdfJyxcbiAgcGFydGlhbEJ1bmRsZWRMYW5ndWFnZXM6IGZhbHNlLFxuICBzYXZlTWlzc2luZzogZmFsc2UsXG4gIHVwZGF0ZU1pc3Npbmc6IGZhbHNlLFxuICBzYXZlTWlzc2luZ1RvOiAnZmFsbGJhY2snLFxuICBzYXZlTWlzc2luZ1BsdXJhbHM6IHRydWUsXG4gIG1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSxcbiAgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyOiBmYWxzZSxcbiAgcG9zdFByb2Nlc3M6IGZhbHNlLFxuICBwb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZDogZmFsc2UsXG4gIHJldHVybk51bGw6IGZhbHNlLFxuICByZXR1cm5FbXB0eVN0cmluZzogdHJ1ZSxcbiAgcmV0dXJuT2JqZWN0czogZmFsc2UsXG4gIGpvaW5BcnJheXM6IGZhbHNlLFxuICByZXR1cm5lZE9iamVjdEhhbmRsZXI6IGZhbHNlLFxuICBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSxcbiAgYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiBmYWxzZSxcbiAgYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU6IGZhbHNlLFxuICBvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcjogYXJncyA9PiB7XG4gICAgbGV0IHJldCA9IHt9O1xuICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ29iamVjdCcpIHJldCA9IGFyZ3NbMV07XG4gICAgaWYgKGlzU3RyaW5nKGFyZ3NbMV0pKSByZXQuZGVmYXVsdFZhbHVlID0gYXJnc1sxXTtcbiAgICBpZiAoaXNTdHJpbmcoYXJnc1syXSkpIHJldC50RGVzY3JpcHRpb24gPSBhcmdzWzJdO1xuICAgIGlmICh0eXBlb2YgYXJnc1syXSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGFyZ3NbM10gPT09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gYXJnc1szXSB8fCBhcmdzWzJdO1xuICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICByZXRba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgZm9ybWF0OiB2YWx1ZSA9PiB2YWx1ZSxcbiAgICBwcmVmaXg6ICd7eycsXG4gICAgc3VmZml4OiAnfX0nLFxuICAgIGZvcm1hdFNlcGFyYXRvcjogJywnLFxuICAgIHVuZXNjYXBlUHJlZml4OiAnLScsXG4gICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgbmVzdGluZ1N1ZmZpeDogJyknLFxuICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yOiAnLCcsXG4gICAgbWF4UmVwbGFjZXM6IDEwMDAsXG4gICAgc2tpcE9uVmFyaWFibGVzOiB0cnVlXG4gIH1cbn0pO1xuY29uc3QgdHJhbnNmb3JtT3B0aW9ucyA9IG9wdGlvbnMgPT4ge1xuICBpZiAoaXNTdHJpbmcob3B0aW9ucy5ucykpIG9wdGlvbnMubnMgPSBbb3B0aW9ucy5uc107XG4gIGlmIChpc1N0cmluZyhvcHRpb25zLmZhbGxiYWNrTG5nKSkgb3B0aW9ucy5mYWxsYmFja0xuZyA9IFtvcHRpb25zLmZhbGxiYWNrTG5nXTtcbiAgaWYgKGlzU3RyaW5nKG9wdGlvbnMuZmFsbGJhY2tOUykpIG9wdGlvbnMuZmFsbGJhY2tOUyA9IFtvcHRpb25zLmZhbGxiYWNrTlNdO1xuICBpZiAob3B0aW9ucy5zdXBwb3J0ZWRMbmdzICYmIG9wdGlvbnMuc3VwcG9ydGVkTG5ncy5pbmRleE9mKCdjaW1vZGUnKSA8IDApIHtcbiAgICBvcHRpb25zLnN1cHBvcnRlZExuZ3MgPSBvcHRpb25zLnN1cHBvcnRlZExuZ3MuY29uY2F0KFsnY2ltb2RlJ10pO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufTtcblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuY29uc3QgYmluZE1lbWJlckZ1bmN0aW9ucyA9IGluc3QgPT4ge1xuICBjb25zdCBtZW1zID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGluc3QpKTtcbiAgbWVtcy5mb3JFYWNoKG1lbSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpbnN0W21lbV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGluc3RbbWVtXSA9IGluc3RbbWVtXS5iaW5kKGluc3QpO1xuICAgIH1cbiAgfSk7XG59O1xuY2xhc3MgSTE4biBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICB0aGlzLm1vZHVsZXMgPSB7XG4gICAgICBleHRlcm5hbDogW11cbiAgICB9O1xuICAgIGJpbmRNZW1iZXJGdW5jdGlvbnModGhpcyk7XG4gICAgaWYgKGNhbGxiYWNrICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIW9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG4gIGluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5kZWZhdWx0TlMgJiYgb3B0aW9ucy5kZWZhdWx0TlMgIT09IGZhbHNlICYmIG9wdGlvbnMubnMpIHtcbiAgICAgIGlmIChpc1N0cmluZyhvcHRpb25zLm5zKSkge1xuICAgICAgICBvcHRpb25zLmRlZmF1bHROUyA9IG9wdGlvbnMubnM7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubnMuaW5kZXhPZigndHJhbnNsYXRpb24nKSA8IDApIHtcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWZPcHRzID0gZ2V0KCk7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgLi4uZGVmT3B0cyxcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIC4uLnRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucylcbiAgICB9O1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJykge1xuICAgICAgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgICAgIC4uLmRlZk9wdHMuaW50ZXJwb2xhdGlvbixcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb25cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubnNTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIH1cbiAgICBjb25zdCBjcmVhdGVDbGFzc09uRGVtYW5kID0gQ2xhc3NPck9iamVjdCA9PiB7XG4gICAgICBpZiAoIUNsYXNzT3JPYmplY3QpIHJldHVybiBudWxsO1xuICAgICAgaWYgKHR5cGVvZiBDbGFzc09yT2JqZWN0ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gbmV3IENsYXNzT3JPYmplY3QoKTtcbiAgICAgIHJldHVybiBDbGFzc09yT2JqZWN0O1xuICAgIH07XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sb2dnZXIpIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxvZ2dlciksIHRoaXMub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQobnVsbCwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGxldCBmb3JtYXR0ZXI7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmZvcm1hdHRlcikge1xuICAgICAgICBmb3JtYXR0ZXIgPSB0aGlzLm1vZHVsZXMuZm9ybWF0dGVyO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgSW50bCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gRm9ybWF0dGVyO1xuICAgICAgfVxuICAgICAgY29uc3QgbHUgPSBuZXcgTGFuZ3VhZ2VVdGlsKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnN0b3JlID0gbmV3IFJlc291cmNlU3RvcmUodGhpcy5vcHRpb25zLnJlc291cmNlcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIGNvbnN0IHMgPSB0aGlzLnNlcnZpY2VzO1xuICAgICAgcy5sb2dnZXIgPSBiYXNlTG9nZ2VyO1xuICAgICAgcy5yZXNvdXJjZVN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgIHMubGFuZ3VhZ2VVdGlscyA9IGx1O1xuICAgICAgcy5wbHVyYWxSZXNvbHZlciA9IG5ldyBQbHVyYWxSZXNvbHZlcihsdSwge1xuICAgICAgICBwcmVwZW5kOiB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLFxuICAgICAgICBjb21wYXRpYmlsaXR5SlNPTjogdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OLFxuICAgICAgICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4XG4gICAgICB9KTtcbiAgICAgIGlmIChmb3JtYXR0ZXIgJiYgKCF0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgfHwgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0ID09PSBkZWZPcHRzLmludGVycG9sYXRpb24uZm9ybWF0KSkge1xuICAgICAgICBzLmZvcm1hdHRlciA9IGNyZWF0ZUNsYXNzT25EZW1hbmQoZm9ybWF0dGVyKTtcbiAgICAgICAgcy5mb3JtYXR0ZXIuaW5pdChzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgPSBzLmZvcm1hdHRlci5mb3JtYXQuYmluZChzLmZvcm1hdHRlcik7XG4gICAgICB9XG4gICAgICBzLmludGVycG9sYXRvciA9IG5ldyBJbnRlcnBvbGF0b3IodGhpcy5vcHRpb25zKTtcbiAgICAgIHMudXRpbHMgPSB7XG4gICAgICAgIGhhc0xvYWRlZE5hbWVzcGFjZTogdGhpcy5oYXNMb2FkZWROYW1lc3BhY2UuYmluZCh0aGlzKVxuICAgICAgfTtcbiAgICAgIHMuYmFja2VuZENvbm5lY3RvciA9IG5ldyBDb25uZWN0b3IoY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMuYmFja2VuZCksIHMucmVzb3VyY2VTdG9yZSwgcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcikge1xuICAgICAgICBzLmxhbmd1YWdlRGV0ZWN0b3IgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKTtcbiAgICAgICAgaWYgKHMubGFuZ3VhZ2VEZXRlY3Rvci5pbml0KSBzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdChzLCB0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KSB7XG4gICAgICAgIHMuaTE4bkZvcm1hdCA9IGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpO1xuICAgICAgICBpZiAocy5pMThuRm9ybWF0LmluaXQpIHMuaTE4bkZvcm1hdC5pbml0KHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IodGhpcy5zZXJ2aWNlcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubW9kdWxlcy5leHRlcm5hbC5mb3JFYWNoKG0gPT4ge1xuICAgICAgICBpZiAobS5pbml0KSBtLmluaXQodGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5mb3JtYXQgPSB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ7XG4gICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSBub29wO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgJiYgIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5vcHRpb25zLmxuZykge1xuICAgICAgY29uc3QgY29kZXMgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO1xuICAgICAgaWYgKGNvZGVzLmxlbmd0aCA+IDAgJiYgY29kZXNbMF0gIT09ICdkZXYnKSB0aGlzLm9wdGlvbnMubG5nID0gY29kZXNbMF07XG4gICAgfVxuICAgIGlmICghdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLm9wdGlvbnMubG5nKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdpbml0OiBubyBsYW5ndWFnZURldGVjdG9yIGlzIHVzZWQgYW5kIG5vIGxuZyBpcyBkZWZpbmVkJyk7XG4gICAgfVxuICAgIGNvbnN0IHN0b3JlQXBpID0gWydnZXRSZXNvdXJjZScsICdoYXNSZXNvdXJjZUJ1bmRsZScsICdnZXRSZXNvdXJjZUJ1bmRsZScsICdnZXREYXRhQnlMYW5ndWFnZSddO1xuICAgIHN0b3JlQXBpLmZvckVhY2goZmNOYW1lID0+IHtcbiAgICAgIHRoaXNbZmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnN0b3JlW2ZjTmFtZV0oLi4uYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3Qgc3RvcmVBcGlDaGFpbmVkID0gWydhZGRSZXNvdXJjZScsICdhZGRSZXNvdXJjZXMnLCAnYWRkUmVzb3VyY2VCdW5kbGUnLCAncmVtb3ZlUmVzb3VyY2VCdW5kbGUnXTtcbiAgICBzdG9yZUFwaUNoYWluZWQuZm9yRWFjaChmY05hbWUgPT4ge1xuICAgICAgdGhpc1tmY05hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zdG9yZVtmY05hbWVdKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBmaW5pc2ggPSAoZXJyLCB0KSA9PiB7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCAmJiAhdGhpcy5pbml0aWFsaXplZFN0b3JlT25jZSkgdGhpcy5sb2dnZXIud2FybignaW5pdDogaTE4bmV4dCBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiBZb3Ugc2hvdWxkIGNhbGwgaW5pdCBqdXN0IG9uY2UhJyk7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlzQ2xvbmUpIHRoaXMubG9nZ2VyLmxvZygnaW5pdGlhbGl6ZWQnLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmVtaXQoJ2luaXRpYWxpemVkJywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0KTtcbiAgICAgICAgY2FsbGJhY2soZXJyLCB0KTtcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScgJiYgIXRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuIGZpbmlzaChudWxsLCB0aGlzLnQuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmNoYW5nZUxhbmd1YWdlKHRoaXMub3B0aW9ucy5sbmcsIGZpbmlzaCk7XG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJlc291cmNlcyB8fCAhdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgIGxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dChsb2FkLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIGxvYWRSZXNvdXJjZXMobGFuZ3VhZ2UpIHtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gICAgbGV0IHVzZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIGNvbnN0IHVzZWRMbmcgPSBpc1N0cmluZyhsYW5ndWFnZSkgPyBsYW5ndWFnZSA6IHRoaXMubGFuZ3VhZ2U7XG4gICAgaWYgKHR5cGVvZiBsYW5ndWFnZSA9PT0gJ2Z1bmN0aW9uJykgdXNlZENhbGxiYWNrID0gbGFuZ3VhZ2U7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucmVzb3VyY2VzIHx8IHRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcykge1xuICAgICAgaWYgKHVzZWRMbmcgJiYgdXNlZExuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJyAmJiAoIXRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IHRoaXMub3B0aW9ucy5wcmVsb2FkLmxlbmd0aCA9PT0gMCkpIHJldHVybiB1c2VkQ2FsbGJhY2soKTtcbiAgICAgIGNvbnN0IHRvTG9hZCA9IFtdO1xuICAgICAgY29uc3QgYXBwZW5kID0gbG5nID0+IHtcbiAgICAgICAgaWYgKCFsbmcpIHJldHVybjtcbiAgICAgICAgaWYgKGxuZyA9PT0gJ2NpbW9kZScpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5ncyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobG5nKTtcbiAgICAgICAgbG5ncy5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmIChsID09PSAnY2ltb2RlJykgcmV0dXJuO1xuICAgICAgICAgIGlmICh0b0xvYWQuaW5kZXhPZihsKSA8IDApIHRvTG9hZC5wdXNoKGwpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBpZiAoIXVzZWRMbmcpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgICAgZmFsbGJhY2tzLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwZW5kKHVzZWRMbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmVsb2FkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmxvYWQodG9Mb2FkLCB0aGlzLm9wdGlvbnMubnMsIGUgPT4ge1xuICAgICAgICBpZiAoIWUgJiYgIXRoaXMucmVzb2x2ZWRMYW5ndWFnZSAmJiB0aGlzLmxhbmd1YWdlKSB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UodGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIHVzZWRDYWxsYmFjayhlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VkQ2FsbGJhY2sobnVsbCk7XG4gICAgfVxuICB9XG4gIHJlbG9hZFJlc291cmNlcyhsbmdzLCBucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKHR5cGVvZiBsbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGxuZ3M7XG4gICAgICBsbmdzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG5zO1xuICAgICAgbnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghbG5ncykgbG5ncyA9IHRoaXMubGFuZ3VhZ2VzO1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLm5zO1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGxuZ3MsIG5zLCBlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgdXNlKG1vZHVsZSkge1xuICAgIGlmICghbW9kdWxlKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmICghbW9kdWxlLnR5cGUpIHRocm93IG5ldyBFcnJvcignWW91IGFyZSBwYXNzaW5nIGEgd3JvbmcgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2JhY2tlbmQnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuYmFja2VuZCA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbG9nZ2VyJyB8fCBtb2R1bGUubG9nICYmIG1vZHVsZS53YXJuICYmIG1vZHVsZS5lcnJvcikge1xuICAgICAgdGhpcy5tb2R1bGVzLmxvZ2dlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbGFuZ3VhZ2VEZXRlY3RvcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdpMThuRm9ybWF0Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ3Bvc3RQcm9jZXNzb3InKSB7XG4gICAgICBwb3N0UHJvY2Vzc29yLmFkZFBvc3RQcm9jZXNzb3IobW9kdWxlKTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnZm9ybWF0dGVyJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmZvcm1hdHRlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnM3JkUGFydHknKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwucHVzaChtb2R1bGUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRSZXNvbHZlZExhbmd1YWdlKGwpIHtcbiAgICBpZiAoIWwgfHwgIXRoaXMubGFuZ3VhZ2VzKSByZXR1cm47XG4gICAgaWYgKFsnY2ltb2RlJywgJ2RldiddLmluZGV4T2YobCkgPiAtMSkgcmV0dXJuO1xuICAgIGZvciAobGV0IGxpID0gMDsgbGkgPCB0aGlzLmxhbmd1YWdlcy5sZW5ndGg7IGxpKyspIHtcbiAgICAgIGNvbnN0IGxuZ0luTG5ncyA9IHRoaXMubGFuZ3VhZ2VzW2xpXTtcbiAgICAgIGlmIChbJ2NpbW9kZScsICdkZXYnXS5pbmRleE9mKGxuZ0luTG5ncykgPiAtMSkgY29udGludWU7XG4gICAgICBpZiAodGhpcy5zdG9yZS5oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nSW5MbmdzKSkge1xuICAgICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSBsbmdJbkxuZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjaGFuZ2VMYW5ndWFnZShsbmcsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IGxuZztcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5naW5nJywgbG5nKTtcbiAgICBjb25zdCBzZXRMbmdQcm9wcyA9IGwgPT4ge1xuICAgICAgdGhpcy5sYW5ndWFnZSA9IGw7XG4gICAgICB0aGlzLmxhbmd1YWdlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobCk7XG4gICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UobCk7XG4gICAgfTtcbiAgICBjb25zdCBkb25lID0gKGVyciwgbCkgPT4ge1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi50KC4uLmFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMbmcgPSBsbmdzID0+IHtcbiAgICAgIGlmICghbG5nICYmICFsbmdzICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgbG5ncyA9IFtdO1xuICAgICAgY29uc3QgbCA9IGlzU3RyaW5nKGxuZ3MpID8gbG5ncyA6IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMobG5ncyk7XG4gICAgICBpZiAobCkge1xuICAgICAgICBpZiAoIXRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBzZXRMbmdQcm9wcyhsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudHJhbnNsYXRvci5sYW5ndWFnZSkgdGhpcy50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKGwpO1xuICAgICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZSkgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKGwpO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2FkUmVzb3VyY2VzKGwsIGVyciA9PiB7XG4gICAgICAgIGRvbmUoZXJyLCBsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmMpIHtcbiAgICAgIHNldExuZyh0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KCkpO1xuICAgIH0gZWxzZSBpZiAoIWxuZyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpLnRoZW4oc2V0TG5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qoc2V0TG5nKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG5nKGxuZyk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBnZXRGaXhlZFQobG5nLCBucywga2V5UHJlZml4KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgY29uc3QgZml4ZWRUID0gZnVuY3Rpb24gKGtleSwgb3B0cykge1xuICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdCA9IG5ldyBBcnJheShfbGVuMyA+IDIgPyBfbGVuMyAtIDIgOiAwKSwgX2tleTMgPSAyOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgICAgcmVzdFtfa2V5MyAtIDJdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gX3RoaXMzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2tleSwgb3B0c10uY29uY2F0KHJlc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5sbmcgPSBvcHRpb25zLmxuZyB8fCBmaXhlZFQubG5nO1xuICAgICAgb3B0aW9ucy5sbmdzID0gb3B0aW9ucy5sbmdzIHx8IGZpeGVkVC5sbmdzO1xuICAgICAgb3B0aW9ucy5ucyA9IG9wdGlvbnMubnMgfHwgZml4ZWRULm5zO1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICE9PSAnJykgb3B0aW9ucy5rZXlQcmVmaXggPSBvcHRpb25zLmtleVByZWZpeCB8fCBrZXlQcmVmaXggfHwgZml4ZWRULmtleVByZWZpeDtcbiAgICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IF90aGlzMy5vcHRpb25zLmtleVNlcGFyYXRvciB8fCAnLic7XG4gICAgICBsZXQgcmVzdWx0S2V5O1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICYmIEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICByZXN1bHRLZXkgPSBrZXkubWFwKGsgPT4gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0S2V5ID0gb3B0aW9ucy5rZXlQcmVmaXggPyBgJHtvcHRpb25zLmtleVByZWZpeH0ke2tleVNlcGFyYXRvcn0ke2tleX1gIDoga2V5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzMy50KHJlc3VsdEtleSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBpZiAoaXNTdHJpbmcobG5nKSkge1xuICAgICAgZml4ZWRULmxuZyA9IGxuZztcbiAgICB9IGVsc2Uge1xuICAgICAgZml4ZWRULmxuZ3MgPSBsbmc7XG4gICAgfVxuICAgIGZpeGVkVC5ucyA9IG5zO1xuICAgIGZpeGVkVC5rZXlQcmVmaXggPSBrZXlQcmVmaXg7XG4gICAgcmV0dXJuIGZpeGVkVDtcbiAgfVxuICB0KCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0b3IgJiYgdGhpcy50cmFuc2xhdG9yLnRyYW5zbGF0ZSguLi5hcmd1bWVudHMpO1xuICB9XG4gIGV4aXN0cygpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci5leGlzdHMoLi4uYXJndW1lbnRzKTtcbiAgfVxuICBzZXREZWZhdWx0TmFtZXNwYWNlKG5zKSB7XG4gICAgdGhpcy5vcHRpb25zLmRlZmF1bHROUyA9IG5zO1xuICB9XG4gIGhhc0xvYWRlZE5hbWVzcGFjZShucykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuZXh0IHdhcyBub3QgaW5pdGlhbGl6ZWQnLCB0aGlzLmxhbmd1YWdlcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5sYW5ndWFnZXMgfHwgIXRoaXMubGFuZ3VhZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuLmxhbmd1YWdlcyB3ZXJlIHVuZGVmaW5lZCBvciBlbXB0eScsIHRoaXMubGFuZ3VhZ2VzKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbG5nID0gb3B0aW9ucy5sbmcgfHwgdGhpcy5yZXNvbHZlZExhbmd1YWdlIHx8IHRoaXMubGFuZ3VhZ2VzWzBdO1xuICAgIGNvbnN0IGZhbGxiYWNrTG5nID0gdGhpcy5vcHRpb25zID8gdGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nIDogZmFsc2U7XG4gICAgY29uc3QgbGFzdExuZyA9IHRoaXMubGFuZ3VhZ2VzW3RoaXMubGFuZ3VhZ2VzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IGxvYWROb3RQZW5kaW5nID0gKGwsIG4pID0+IHtcbiAgICAgIGNvbnN0IGxvYWRTdGF0ZSA9IHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtsfXwke259YF07XG4gICAgICByZXR1cm4gbG9hZFN0YXRlID09PSAtMSB8fCBsb2FkU3RhdGUgPT09IDAgfHwgbG9hZFN0YXRlID09PSAyO1xuICAgIH07XG4gICAgaWYgKG9wdGlvbnMucHJlY2hlY2spIHtcbiAgICAgIGNvbnN0IHByZVJlc3VsdCA9IG9wdGlvbnMucHJlY2hlY2sodGhpcywgbG9hZE5vdFBlbmRpbmcpO1xuICAgICAgaWYgKHByZVJlc3VsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gcHJlUmVzdWx0O1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKCF0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZCB8fCB0aGlzLm9wdGlvbnMucmVzb3VyY2VzICYmICF0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHJldHVybiB0cnVlO1xuICAgIGlmIChsb2FkTm90UGVuZGluZyhsbmcsIG5zKSAmJiAoIWZhbGxiYWNrTG5nIHx8IGxvYWROb3RQZW5kaW5nKGxhc3RMbmcsIG5zKSkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsb2FkTmFtZXNwYWNlcyhucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMubnMpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKG5zKSkgbnMgPSBbbnNdO1xuICAgIG5zLmZvckVhY2gobiA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSB0aGlzLm9wdGlvbnMubnMucHVzaChuKTtcbiAgICB9KTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgbG9hZExhbmd1YWdlcyhsbmdzLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBpZiAoaXNTdHJpbmcobG5ncykpIGxuZ3MgPSBbbG5nc107XG4gICAgY29uc3QgcHJlbG9hZGVkID0gdGhpcy5vcHRpb25zLnByZWxvYWQgfHwgW107XG4gICAgY29uc3QgbmV3TG5ncyA9IGxuZ3MuZmlsdGVyKGxuZyA9PiBwcmVsb2FkZWQuaW5kZXhPZihsbmcpIDwgMCAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRDb2RlKGxuZykpO1xuICAgIGlmICghbmV3TG5ncy5sZW5ndGgpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zLnByZWxvYWQgPSBwcmVsb2FkZWQuY29uY2F0KG5ld0xuZ3MpO1xuICAgIHRoaXMubG9hZFJlc291cmNlcyhlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBkaXIobG5nKSB7XG4gICAgaWYgKCFsbmcpIGxuZyA9IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCAodGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5sYW5ndWFnZXMubGVuZ3RoID4gMCA/IHRoaXMubGFuZ3VhZ2VzWzBdIDogdGhpcy5sYW5ndWFnZSk7XG4gICAgaWYgKCFsbmcpIHJldHVybiAncnRsJztcbiAgICBjb25zdCBydGxMbmdzID0gWydhcicsICdzaHUnLCAnc3FyJywgJ3NzaCcsICd4YWEnLCAneWhkJywgJ3l1ZCcsICdhYW8nLCAnYWJoJywgJ2FidicsICdhY20nLCAnYWNxJywgJ2FjdycsICdhY3gnLCAnYWN5JywgJ2FkZicsICdhZHMnLCAnYWViJywgJ2FlYycsICdhZmInLCAnYWpwJywgJ2FwYycsICdhcGQnLCAnYXJiJywgJ2FycScsICdhcnMnLCAnYXJ5JywgJ2FyeicsICdhdXonLCAnYXZsJywgJ2F5aCcsICdheWwnLCAnYXluJywgJ2F5cCcsICdiYnonLCAncGdhJywgJ2hlJywgJ2l3JywgJ3BzJywgJ3BidCcsICdwYnUnLCAncHN0JywgJ3BycCcsICdwcmQnLCAndWcnLCAndXInLCAneWRkJywgJ3lkcycsICd5aWgnLCAnamknLCAneWknLCAnaGJvJywgJ21lbicsICd4bW4nLCAnZmEnLCAnanByJywgJ3BlbycsICdwZXMnLCAncHJzJywgJ2R2JywgJ3NhbScsICdja2InXTtcbiAgICBjb25zdCBsYW5ndWFnZVV0aWxzID0gdGhpcy5zZXJ2aWNlcyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMgfHwgbmV3IExhbmd1YWdlVXRpbChnZXQoKSk7XG4gICAgcmV0dXJuIHJ0bExuZ3MuaW5kZXhPZihsYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGxuZykpID4gLTEgfHwgbG5nLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignLWFyYWInKSA+IDEgPyAncnRsJyA6ICdsdHInO1xuICB9XG4gIHN0YXRpYyBjcmVhdGVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5ldyBJMThuKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuICBjbG9uZUluc3RhbmNlKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gICAgY29uc3QgZm9ya1Jlc291cmNlU3RvcmUgPSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkgZGVsZXRlIG9wdGlvbnMuZm9ya1Jlc291cmNlU3RvcmU7XG4gICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAuLi57XG4gICAgICAgIGlzQ2xvbmU6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsb25lID0gbmV3IEkxOG4obWVyZ2VkT3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuZGVidWcgIT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnByZWZpeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbG9uZS5sb2dnZXIgPSBjbG9uZS5sb2dnZXIuY2xvbmUob3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbnN0IG1lbWJlcnNUb0NvcHkgPSBbJ3N0b3JlJywgJ3NlcnZpY2VzJywgJ2xhbmd1YWdlJ107XG4gICAgbWVtYmVyc1RvQ29weS5mb3JFYWNoKG0gPT4ge1xuICAgICAgY2xvbmVbbV0gPSB0aGlzW21dO1xuICAgIH0pO1xuICAgIGNsb25lLnNlcnZpY2VzID0ge1xuICAgICAgLi4udGhpcy5zZXJ2aWNlc1xuICAgIH07XG4gICAgY2xvbmUuc2VydmljZXMudXRpbHMgPSB7XG4gICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IGNsb25lLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKGNsb25lKVxuICAgIH07XG4gICAgaWYgKGZvcmtSZXNvdXJjZVN0b3JlKSB7XG4gICAgICBjbG9uZS5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMuc3RvcmUuZGF0YSwgbWVyZ2VkT3B0aW9ucyk7XG4gICAgICBjbG9uZS5zZXJ2aWNlcy5yZXNvdXJjZVN0b3JlID0gY2xvbmUuc3RvcmU7XG4gICAgfVxuICAgIGNsb25lLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcihjbG9uZS5zZXJ2aWNlcywgbWVyZ2VkT3B0aW9ucyk7XG4gICAgY2xvbmUudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW40ID4gMSA/IF9sZW40IC0gMSA6IDApLCBfa2V5NCA9IDE7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgIH1cbiAgICAgIGNsb25lLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIGNsb25lLmluaXQobWVyZ2VkT3B0aW9ucywgY2FsbGJhY2spO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub3B0aW9ucyA9IG1lcmdlZE9wdGlvbnM7XG4gICAgY2xvbmUudHJhbnNsYXRvci5iYWNrZW5kQ29ubmVjdG9yLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIHN0b3JlOiB0aGlzLnN0b3JlLFxuICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UsXG4gICAgICBsYW5ndWFnZXM6IHRoaXMubGFuZ3VhZ2VzLFxuICAgICAgcmVzb2x2ZWRMYW5ndWFnZTogdGhpcy5yZXNvbHZlZExhbmd1YWdlXG4gICAgfTtcbiAgfVxufVxuY29uc3QgaW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlKCk7XG5pbnN0YW5jZS5jcmVhdGVJbnN0YW5jZSA9IEkxOG4uY3JlYXRlSW5zdGFuY2U7XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFuY2U7XG4iLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSTE4bkNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEkxOG5leHRQcm92aWRlcihfcmVmKSB7XG4gIGxldCB7XG4gICAgaTE4bixcbiAgICBkZWZhdWx0TlMsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHZhbHVlID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIGkxOG4sXG4gICAgZGVmYXVsdE5TXG4gIH0pLCBbaTE4biwgZGVmYXVsdE5TXSk7XG4gIHJldHVybiBjcmVhdGVFbGVtZW50KEkxOG5Db250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWVcbiAgfSwgY2hpbGRyZW4pO1xufSIsImltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBub2Rlc1RvU3RyaW5nLCBUcmFucyBhcyBUcmFuc1dpdGhvdXRDb250ZXh0IH0gZnJvbSAnLi9UcmFuc1dpdGhvdXRDb250ZXh0LmpzJztcbmltcG9ydCB7IGdldEkxOG4sIEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmV4cG9ydCB7IG5vZGVzVG9TdHJpbmcgfTtcbmV4cG9ydCBmdW5jdGlvbiBUcmFucyhfcmVmKSB7XG4gIGxldCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY291bnQsXG4gICAgcGFyZW50LFxuICAgIGkxOG5LZXksXG4gICAgY29udGV4dCxcbiAgICB0T3B0aW9ucyA9IHt9LFxuICAgIHZhbHVlcyxcbiAgICBkZWZhdWx0cyxcbiAgICBjb21wb25lbnRzLFxuICAgIG5zLFxuICAgIGkxOG46IGkxOG5Gcm9tUHJvcHMsXG4gICAgdDogdEZyb21Qcm9wcyxcbiAgICBzaG91bGRVbmVzY2FwZSxcbiAgICAuLi5hZGRpdGlvbmFsUHJvcHNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHQsXG4gICAgZGVmYXVsdE5TOiBkZWZhdWx0TlNGcm9tQ29udGV4dFxuICB9ID0gdXNlQ29udGV4dChJMThuQ29udGV4dCkgfHwge307XG4gIGNvbnN0IGkxOG4gPSBpMThuRnJvbVByb3BzIHx8IGkxOG5Gcm9tQ29udGV4dCB8fCBnZXRJMThuKCk7XG4gIGNvbnN0IHQgPSB0RnJvbVByb3BzIHx8IGkxOG4gJiYgaTE4bi50LmJpbmQoaTE4bik7XG4gIHJldHVybiBUcmFuc1dpdGhvdXRDb250ZXh0KHtcbiAgICBjaGlsZHJlbixcbiAgICBjb3VudCxcbiAgICBwYXJlbnQsXG4gICAgaTE4bktleSxcbiAgICBjb250ZXh0LFxuICAgIHRPcHRpb25zLFxuICAgIHZhbHVlcyxcbiAgICBkZWZhdWx0cyxcbiAgICBjb21wb25lbnRzLFxuICAgIG5zOiBucyB8fCB0ICYmIHQubnMgfHwgZGVmYXVsdE5TRnJvbUNvbnRleHQgfHwgaTE4biAmJiBpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmRlZmF1bHROUyxcbiAgICBpMThuLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0pO1xufSIsImltcG9ydCB7IEZyYWdtZW50LCBpc1ZhbGlkRWxlbWVudCwgY2xvbmVFbGVtZW50LCBjcmVhdGVFbGVtZW50LCBDaGlsZHJlbiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBIVE1MIGZyb20gJ2h0bWwtcGFyc2Utc3RyaW5naWZ5JztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc1N0cmluZywgd2Fybiwgd2Fybk9uY2UgfSBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IGdldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBnZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuY29uc3QgaGFzQ2hpbGRyZW4gPSAobm9kZSwgY2hlY2tMZW5ndGgpID0+IHtcbiAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGJhc2UgPSBub2RlLnByb3BzID8gbm9kZS5wcm9wcy5jaGlsZHJlbiA6IG5vZGUuY2hpbGRyZW47XG4gIGlmIChjaGVja0xlbmd0aCkgcmV0dXJuIGJhc2UubGVuZ3RoID4gMDtcbiAgcmV0dXJuICEhYmFzZTtcbn07XG5jb25zdCBnZXRDaGlsZHJlbiA9IG5vZGUgPT4ge1xuICBpZiAoIW5vZGUpIHJldHVybiBbXTtcbiAgY29uc3QgY2hpbGRyZW4gPSBub2RlLnByb3BzID8gbm9kZS5wcm9wcy5jaGlsZHJlbiA6IG5vZGUuY2hpbGRyZW47XG4gIHJldHVybiBub2RlLnByb3BzICYmIG5vZGUucHJvcHMuaTE4bklzRHluYW1pY0xpc3QgPyBnZXRBc0FycmF5KGNoaWxkcmVuKSA6IGNoaWxkcmVuO1xufTtcbmNvbnN0IGhhc1ZhbGlkUmVhY3RDaGlsZHJlbiA9IGNoaWxkcmVuID0+IEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmIGNoaWxkcmVuLmV2ZXJ5KGlzVmFsaWRFbGVtZW50KTtcbmNvbnN0IGdldEFzQXJyYXkgPSBkYXRhID0+IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuY29uc3QgbWVyZ2VQcm9wcyA9IChzb3VyY2UsIHRhcmdldCkgPT4ge1xuICBjb25zdCBuZXdUYXJnZXQgPSB7XG4gICAgLi4udGFyZ2V0XG4gIH07XG4gIG5ld1RhcmdldC5wcm9wcyA9IE9iamVjdC5hc3NpZ24oc291cmNlLnByb3BzLCB0YXJnZXQucHJvcHMpO1xuICByZXR1cm4gbmV3VGFyZ2V0O1xufTtcbmV4cG9ydCBjb25zdCBub2Rlc1RvU3RyaW5nID0gKGNoaWxkcmVuLCBpMThuT3B0aW9ucykgPT4ge1xuICBpZiAoIWNoaWxkcmVuKSByZXR1cm4gJyc7XG4gIGxldCBzdHJpbmdOb2RlID0gJyc7XG4gIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRBc0FycmF5KGNoaWxkcmVuKTtcbiAgY29uc3Qga2VlcEFycmF5ID0gaTE4bk9wdGlvbnMudHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXMgJiYgaTE4bk9wdGlvbnMudHJhbnNLZWVwQmFzaWNIdG1sTm9kZXNGb3IgPyBpMThuT3B0aW9ucy50cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvciA6IFtdO1xuICBjaGlsZHJlbkFycmF5LmZvckVhY2goKGNoaWxkLCBjaGlsZEluZGV4KSA9PiB7XG4gICAgaWYgKGlzU3RyaW5nKGNoaWxkKSkge1xuICAgICAgc3RyaW5nTm9kZSArPSBgJHtjaGlsZH1gO1xuICAgIH0gZWxzZSBpZiAoaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb3BzLFxuICAgICAgICB0eXBlXG4gICAgICB9ID0gY2hpbGQ7XG4gICAgICBjb25zdCBjaGlsZFByb3BzQ291bnQgPSBPYmplY3Qua2V5cyhwcm9wcykubGVuZ3RoO1xuICAgICAgY29uc3Qgc2hvdWxkS2VlcENoaWxkID0ga2VlcEFycmF5LmluZGV4T2YodHlwZSkgPiAtMTtcbiAgICAgIGNvbnN0IGNoaWxkQ2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmICghY2hpbGRDaGlsZHJlbiAmJiBzaG91bGRLZWVwQ2hpbGQgJiYgIWNoaWxkUHJvcHNDb3VudCkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHt0eXBlfS8+YDtcbiAgICAgIH0gZWxzZSBpZiAoIWNoaWxkQ2hpbGRyZW4gJiYgKCFzaG91bGRLZWVwQ2hpbGQgfHwgY2hpbGRQcm9wc0NvdW50KSB8fCBwcm9wcy5pMThuSXNEeW5hbWljTGlzdCkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHtjaGlsZEluZGV4fT48LyR7Y2hpbGRJbmRleH0+YDtcbiAgICAgIH0gZWxzZSBpZiAoc2hvdWxkS2VlcENoaWxkICYmIGNoaWxkUHJvcHNDb3VudCA9PT0gMSAmJiBpc1N0cmluZyhjaGlsZENoaWxkcmVuKSkge1xuICAgICAgICBzdHJpbmdOb2RlICs9IGA8JHt0eXBlfT4ke2NoaWxkQ2hpbGRyZW59PC8ke3R5cGV9PmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbm9kZXNUb1N0cmluZyhjaGlsZENoaWxkcmVuLCBpMThuT3B0aW9ucyk7XG4gICAgICAgIHN0cmluZ05vZGUgKz0gYDwke2NoaWxkSW5kZXh9PiR7Y29udGVudH08LyR7Y2hpbGRJbmRleH0+YDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoaWxkID09PSBudWxsKSB7XG4gICAgICB3YXJuKGBUcmFuczogdGhlIHBhc3NlZCBpbiB2YWx1ZSBpcyBpbnZhbGlkIC0gc2VlbXMgeW91IHBhc3NlZCBpbiBhIG51bGwgY2hpbGQuYCk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChjaGlsZCkpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybWF0LFxuICAgICAgICAuLi5jbG9uZVxuICAgICAgfSA9IGNoaWxkO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNsb25lKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZvcm1hdCA/IGAke2tleXNbMF19LCAke2Zvcm1hdH1gIDoga2V5c1swXTtcbiAgICAgICAgc3RyaW5nTm9kZSArPSBge3ske3ZhbHVlfX19YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oYHJlYWN0LWkxOG5leHQ6IHRoZSBwYXNzZWQgaW4gb2JqZWN0IGNvbnRhaW5lZCBtb3JlIHRoYW4gb25lIHZhcmlhYmxlIC0gdGhlIG9iamVjdCBzaG91bGQgbG9vayBsaWtlIHt7IHZhbHVlLCBmb3JtYXQgfX0gd2hlcmUgZm9ybWF0IGlzIG9wdGlvbmFsLmAsIGNoaWxkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2FybihgVHJhbnM6IHRoZSBwYXNzZWQgaW4gdmFsdWUgaXMgaW52YWxpZCAtIHNlZW1zIHlvdSBwYXNzZWQgaW4gYSB2YXJpYWJsZSBsaWtlIHtudW1iZXJ9IC0gcGxlYXNlIHBhc3MgaW4gdmFyaWFibGVzIGZvciBpbnRlcnBvbGF0aW9uIGFzIGZ1bGwgb2JqZWN0cyBsaWtlIHt7bnVtYmVyfX0uYCwgY2hpbGQpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzdHJpbmdOb2RlO1xufTtcbmNvbnN0IHJlbmRlck5vZGVzID0gKGNoaWxkcmVuLCB0YXJnZXRTdHJpbmcsIGkxOG4sIGkxOG5PcHRpb25zLCBjb21iaW5lZFRPcHRzLCBzaG91bGRVbmVzY2FwZSkgPT4ge1xuICBpZiAodGFyZ2V0U3RyaW5nID09PSAnJykgcmV0dXJuIFtdO1xuICBjb25zdCBrZWVwQXJyYXkgPSBpMThuT3B0aW9ucy50cmFuc0tlZXBCYXNpY0h0bWxOb2Rlc0ZvciB8fCBbXTtcbiAgY29uc3QgZW1wdHlDaGlsZHJlbkJ1dE5lZWRzSGFuZGxpbmcgPSB0YXJnZXRTdHJpbmcgJiYgbmV3IFJlZ0V4cChrZWVwQXJyYXkubWFwKGtlZXAgPT4gYDwke2tlZXB9YCkuam9pbignfCcpKS50ZXN0KHRhcmdldFN0cmluZyk7XG4gIGlmICghY2hpbGRyZW4gJiYgIWVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nICYmICFzaG91bGRVbmVzY2FwZSkgcmV0dXJuIFt0YXJnZXRTdHJpbmddO1xuICBjb25zdCBkYXRhID0ge307XG4gIGNvbnN0IGdldERhdGEgPSBjaGlsZHMgPT4ge1xuICAgIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBnZXRBc0FycmF5KGNoaWxkcyk7XG4gICAgY2hpbGRyZW5BcnJheS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmIChpc1N0cmluZyhjaGlsZCkpIHJldHVybjtcbiAgICAgIGlmIChoYXNDaGlsZHJlbihjaGlsZCkpIGdldERhdGEoZ2V0Q2hpbGRyZW4oY2hpbGQpKTtlbHNlIGlmIChpc09iamVjdChjaGlsZCkgJiYgIWlzVmFsaWRFbGVtZW50KGNoaWxkKSkgT2JqZWN0LmFzc2lnbihkYXRhLCBjaGlsZCk7XG4gICAgfSk7XG4gIH07XG4gIGdldERhdGEoY2hpbGRyZW4pO1xuICBjb25zdCBhc3QgPSBIVE1MLnBhcnNlKGA8MD4ke3RhcmdldFN0cmluZ308LzA+YCk7XG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgLi4uZGF0YSxcbiAgICAuLi5jb21iaW5lZFRPcHRzXG4gIH07XG4gIGNvbnN0IHJlbmRlcklubmVyID0gKGNoaWxkLCBub2RlLCByb290UmVhY3ROb2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGRzID0gZ2V0Q2hpbGRyZW4oY2hpbGQpO1xuICAgIGNvbnN0IG1hcHBlZENoaWxkcmVuID0gbWFwQVNUKGNoaWxkcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgcmV0dXJuIGhhc1ZhbGlkUmVhY3RDaGlsZHJlbihjaGlsZHMpICYmIG1hcHBlZENoaWxkcmVuLmxlbmd0aCA9PT0gMCB8fCBjaGlsZC5wcm9wcyAmJiBjaGlsZC5wcm9wcy5pMThuSXNEeW5hbWljTGlzdCA/IGNoaWxkcyA6IG1hcHBlZENoaWxkcmVuO1xuICB9O1xuICBjb25zdCBwdXNoVHJhbnNsYXRlZEpTWCA9IChjaGlsZCwgaW5uZXIsIG1lbSwgaSwgaXNWb2lkKSA9PiB7XG4gICAgaWYgKGNoaWxkLmR1bW15KSB7XG4gICAgICBjaGlsZC5jaGlsZHJlbiA9IGlubmVyO1xuICAgICAgbWVtLnB1c2goY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgIGtleTogaVxuICAgICAgfSwgaXNWb2lkID8gdW5kZWZpbmVkIDogaW5uZXIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVtLnB1c2goLi4uQ2hpbGRyZW4ubWFwKFtjaGlsZF0sIGMgPT4ge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgICAuLi5jLnByb3BzXG4gICAgICAgIH07XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5pMThuSXNEeW5hbWljTGlzdDtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoYy50eXBlLCB7XG4gICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAga2V5OiBpLFxuICAgICAgICAgIHJlZjogYy5yZWZcbiAgICAgICAgfSwgaXNWb2lkID8gbnVsbCA6IGlubmVyKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1hcEFTVCA9IChyZWFjdE5vZGUsIGFzdE5vZGUsIHJvb3RSZWFjdE5vZGUpID0+IHtcbiAgICBjb25zdCByZWFjdE5vZGVzID0gZ2V0QXNBcnJheShyZWFjdE5vZGUpO1xuICAgIGNvbnN0IGFzdE5vZGVzID0gZ2V0QXNBcnJheShhc3ROb2RlKTtcbiAgICByZXR1cm4gYXN0Tm9kZXMucmVkdWNlKChtZW0sIG5vZGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uQ29udGVudCA9IG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlblswXSAmJiBub2RlLmNoaWxkcmVuWzBdLmNvbnRlbnQgJiYgaTE4bi5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobm9kZS5jaGlsZHJlblswXS5jb250ZW50LCBvcHRzLCBpMThuLmxhbmd1YWdlKTtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgIGxldCB0bXAgPSByZWFjdE5vZGVzW3BhcnNlSW50KG5vZGUubmFtZSwgMTApXTtcbiAgICAgICAgaWYgKHJvb3RSZWFjdE5vZGUubGVuZ3RoID09PSAxICYmICF0bXApIHRtcCA9IHJvb3RSZWFjdE5vZGVbMF1bbm9kZS5uYW1lXTtcbiAgICAgICAgaWYgKCF0bXApIHRtcCA9IHt9O1xuICAgICAgICBjb25zdCBjaGlsZCA9IE9iamVjdC5rZXlzKG5vZGUuYXR0cnMpLmxlbmd0aCAhPT0gMCA/IG1lcmdlUHJvcHMoe1xuICAgICAgICAgIHByb3BzOiBub2RlLmF0dHJzXG4gICAgICAgIH0sIHRtcCkgOiB0bXA7XG4gICAgICAgIGNvbnN0IGlzRWxlbWVudCA9IGlzVmFsaWRFbGVtZW50KGNoaWxkKTtcbiAgICAgICAgY29uc3QgaXNWYWxpZFRyYW5zbGF0aW9uV2l0aENoaWxkcmVuID0gaXNFbGVtZW50ICYmIGhhc0NoaWxkcmVuKG5vZGUsIHRydWUpICYmICFub2RlLnZvaWRFbGVtZW50O1xuICAgICAgICBjb25zdCBpc0VtcHR5VHJhbnNXaXRoSFRNTCA9IGVtcHR5Q2hpbGRyZW5CdXROZWVkc0hhbmRsaW5nICYmIGlzT2JqZWN0KGNoaWxkKSAmJiBjaGlsZC5kdW1teSAmJiAhaXNFbGVtZW50O1xuICAgICAgICBjb25zdCBpc0tub3duQ29tcG9uZW50ID0gaXNPYmplY3QoY2hpbGRyZW4pICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNoaWxkcmVuLCBub2RlLm5hbWUpO1xuICAgICAgICBpZiAoaXNTdHJpbmcoY2hpbGQpKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShjaGlsZCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICAgICAgbWVtLnB1c2godmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGhhc0NoaWxkcmVuKGNoaWxkKSB8fCBpc1ZhbGlkVHJhbnNsYXRpb25XaXRoQ2hpbGRyZW4pIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlcklubmVyKGNoaWxkLCBub2RlLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbXB0eVRyYW5zV2l0aEhUTUwpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IG1hcEFTVChyZWFjdE5vZGVzLCBub2RlLmNoaWxkcmVuLCByb290UmVhY3ROb2RlKTtcbiAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSk7XG4gICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQobm9kZS5uYW1lKSkpIHtcbiAgICAgICAgICBpZiAoaXNLbm93bkNvbXBvbmVudCkge1xuICAgICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJJbm5lcihjaGlsZCwgbm9kZSwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgICBwdXNoVHJhbnNsYXRlZEpTWChjaGlsZCwgaW5uZXIsIG1lbSwgaSwgbm9kZS52b2lkRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpMThuT3B0aW9ucy50cmFuc1N1cHBvcnRCYXNpY0h0bWxOb2RlcyAmJiBrZWVwQXJyYXkuaW5kZXhPZihub2RlLm5hbWUpID4gLTEpIHtcbiAgICAgICAgICAgIGlmIChub2RlLnZvaWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgIG1lbS5wdXNoKGNyZWF0ZUVsZW1lbnQobm9kZS5uYW1lLCB7XG4gICAgICAgICAgICAgICAga2V5OiBgJHtub2RlLm5hbWV9LSR7aX1gXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gbWFwQVNUKHJlYWN0Tm9kZXMsIG5vZGUuY2hpbGRyZW4sIHJvb3RSZWFjdE5vZGUpO1xuICAgICAgICAgICAgICBtZW0ucHVzaChjcmVhdGVFbGVtZW50KG5vZGUubmFtZSwge1xuICAgICAgICAgICAgICAgIGtleTogYCR7bm9kZS5uYW1lfS0ke2l9YFxuICAgICAgICAgICAgICB9LCBpbm5lcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS52b2lkRWxlbWVudCkge1xuICAgICAgICAgICAgbWVtLnB1c2goYDwke25vZGUubmFtZX0gLz5gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5uZXIgPSBtYXBBU1QocmVhY3ROb2Rlcywgbm9kZS5jaGlsZHJlbiwgcm9vdFJlYWN0Tm9kZSk7XG4gICAgICAgICAgICBtZW0ucHVzaChgPCR7bm9kZS5uYW1lfT4ke2lubmVyfTwvJHtub2RlLm5hbWV9PmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChjaGlsZCkgJiYgIWlzRWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBub2RlLmNoaWxkcmVuWzBdID8gdHJhbnNsYXRpb25Db250ZW50IDogbnVsbDtcbiAgICAgICAgICBpZiAoY29udGVudCkgbWVtLnB1c2goY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHVzaFRyYW5zbGF0ZWRKU1goY2hpbGQsIHRyYW5zbGF0aW9uQ29udGVudCwgbWVtLCBpLCBub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCAhdHJhbnNsYXRpb25Db250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICBjb25zdCB3cmFwVGV4dE5vZGVzID0gaTE4bk9wdGlvbnMudHJhbnNXcmFwVGV4dE5vZGVzO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gc2hvdWxkVW5lc2NhcGUgPyBpMThuT3B0aW9ucy51bmVzY2FwZShpMThuLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShub2RlLmNvbnRlbnQsIG9wdHMsIGkxOG4ubGFuZ3VhZ2UpKSA6IGkxOG4uc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKG5vZGUuY29udGVudCwgb3B0cywgaTE4bi5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh3cmFwVGV4dE5vZGVzKSB7XG4gICAgICAgICAgbWVtLnB1c2goY3JlYXRlRWxlbWVudCh3cmFwVGV4dE5vZGVzLCB7XG4gICAgICAgICAgICBrZXk6IGAke25vZGUubmFtZX0tJHtpfWBcbiAgICAgICAgICB9LCBjb250ZW50KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVtLnB1c2goY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW07XG4gICAgfSwgW10pO1xuICB9O1xuICBjb25zdCByZXN1bHQgPSBtYXBBU1QoW3tcbiAgICBkdW1teTogdHJ1ZSxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4gfHwgW11cbiAgfV0sIGFzdCwgZ2V0QXNBcnJheShjaGlsZHJlbiB8fCBbXSkpO1xuICByZXR1cm4gZ2V0Q2hpbGRyZW4ocmVzdWx0WzBdKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gVHJhbnMoX3JlZikge1xuICBsZXQge1xuICAgIGNoaWxkcmVuLFxuICAgIGNvdW50LFxuICAgIHBhcmVudCxcbiAgICBpMThuS2V5LFxuICAgIGNvbnRleHQsXG4gICAgdE9wdGlvbnMgPSB7fSxcbiAgICB2YWx1ZXMsXG4gICAgZGVmYXVsdHMsXG4gICAgY29tcG9uZW50cyxcbiAgICBucyxcbiAgICBpMThuOiBpMThuRnJvbVByb3BzLFxuICAgIHQ6IHRGcm9tUHJvcHMsXG4gICAgc2hvdWxkVW5lc2NhcGUsXG4gICAgLi4uYWRkaXRpb25hbFByb3BzXG4gIH0gPSBfcmVmO1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBnZXRJMThuKCk7XG4gIGlmICghaTE4bikge1xuICAgIHdhcm5PbmNlKCdZb3Ugd2lsbCBuZWVkIHRvIHBhc3MgaW4gYW4gaTE4bmV4dCBpbnN0YW5jZSBieSB1c2luZyBpMThuZXh0UmVhY3RNb2R1bGUnKTtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgY29uc3QgdCA9IHRGcm9tUHJvcHMgfHwgaTE4bi50LmJpbmQoaTE4bikgfHwgKGsgPT4gayk7XG4gIGNvbnN0IHJlYWN0STE4bmV4dE9wdGlvbnMgPSB7XG4gICAgLi4uZ2V0RGVmYXVsdHMoKSxcbiAgICAuLi4oaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5yZWFjdClcbiAgfTtcbiAgbGV0IG5hbWVzcGFjZXMgPSBucyB8fCB0Lm5zIHx8IGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuZGVmYXVsdE5TO1xuICBuYW1lc3BhY2VzID0gaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzIHx8IFsndHJhbnNsYXRpb24nXTtcbiAgY29uc3Qgbm9kZUFzU3RyaW5nID0gbm9kZXNUb1N0cmluZyhjaGlsZHJlbiwgcmVhY3RJMThuZXh0T3B0aW9ucyk7XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRzIHx8IG5vZGVBc1N0cmluZyB8fCByZWFjdEkxOG5leHRPcHRpb25zLnRyYW5zRW1wdHlOb2RlVmFsdWUgfHwgaTE4bktleTtcbiAgY29uc3Qge1xuICAgIGhhc2hUcmFuc0tleVxuICB9ID0gcmVhY3RJMThuZXh0T3B0aW9ucztcbiAgY29uc3Qga2V5ID0gaTE4bktleSB8fCAoaGFzaFRyYW5zS2V5ID8gaGFzaFRyYW5zS2V5KG5vZGVBc1N0cmluZyB8fCBkZWZhdWx0VmFsdWUpIDogbm9kZUFzU3RyaW5nIHx8IGRlZmF1bHRWYWx1ZSk7XG4gIGlmIChpMThuLm9wdGlvbnMgJiYgaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24gJiYgaTE4bi5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykge1xuICAgIHZhbHVlcyA9IHZhbHVlcyAmJiBPYmplY3Qua2V5cyh2YWx1ZXMpLmxlbmd0aCA+IDAgPyB7XG4gICAgICAuLi52YWx1ZXMsXG4gICAgICAuLi5pMThuLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzXG4gICAgfSA6IHtcbiAgICAgIC4uLmkxOG4ub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXNcbiAgICB9O1xuICB9XG4gIGNvbnN0IGludGVycG9sYXRpb25PdmVycmlkZSA9IHZhbHVlcyB8fCBjb3VudCAhPT0gdW5kZWZpbmVkIHx8ICFjaGlsZHJlbiA/IHRPcHRpb25zLmludGVycG9sYXRpb24gOiB7XG4gICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgLi4udE9wdGlvbnMuaW50ZXJwb2xhdGlvbixcbiAgICAgIHByZWZpeDogJyMkPycsXG4gICAgICBzdWZmaXg6ICc/JCMnXG4gICAgfVxuICB9O1xuICBjb25zdCBjb21iaW5lZFRPcHRzID0ge1xuICAgIC4uLnRPcHRpb25zLFxuICAgIGNvbnRleHQ6IGNvbnRleHQgfHwgdE9wdGlvbnMuY29udGV4dCxcbiAgICBjb3VudCxcbiAgICAuLi52YWx1ZXMsXG4gICAgLi4uaW50ZXJwb2xhdGlvbk92ZXJyaWRlLFxuICAgIGRlZmF1bHRWYWx1ZSxcbiAgICBuczogbmFtZXNwYWNlc1xuICB9O1xuICBjb25zdCB0cmFuc2xhdGlvbiA9IGtleSA/IHQoa2V5LCBjb21iaW5lZFRPcHRzKSA6IGRlZmF1bHRWYWx1ZTtcbiAgaWYgKGNvbXBvbmVudHMpIHtcbiAgICBPYmplY3Qua2V5cyhjb21wb25lbnRzKS5mb3JFYWNoKGMgPT4ge1xuICAgICAgY29uc3QgY29tcCA9IGNvbXBvbmVudHNbY107XG4gICAgICBpZiAodHlwZW9mIGNvbXAudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAhY29tcC5wcm9wcyB8fCAhY29tcC5wcm9wcy5jaGlsZHJlbiB8fCB0cmFuc2xhdGlvbi5pbmRleE9mKGAke2N9Lz5gKSA8IDAgJiYgdHJhbnNsYXRpb24uaW5kZXhPZihgJHtjfSAvPmApIDwgMCkgcmV0dXJuO1xuICAgICAgZnVuY3Rpb24gQ29tcG9uZW50aXplZCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIGNvbXApO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50c1tjXSA9IGNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50aXplZCk7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgY29udGVudCA9IHJlbmRlck5vZGVzKGNvbXBvbmVudHMgfHwgY2hpbGRyZW4sIHRyYW5zbGF0aW9uLCBpMThuLCByZWFjdEkxOG5leHRPcHRpb25zLCBjb21iaW5lZFRPcHRzLCBzaG91bGRVbmVzY2FwZSk7XG4gIGNvbnN0IHVzZUFzUGFyZW50ID0gcGFyZW50ICE9PSB1bmRlZmluZWQgPyBwYXJlbnQgOiByZWFjdEkxOG5leHRPcHRpb25zLmRlZmF1bHRUcmFuc1BhcmVudDtcbiAgcmV0dXJuIHVzZUFzUGFyZW50ID8gY3JlYXRlRWxlbWVudCh1c2VBc1BhcmVudCwgYWRkaXRpb25hbFByb3BzLCBjb250ZW50KSA6IGNvbnRlbnQ7XG59IiwiaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICcuL3VzZVRyYW5zbGF0aW9uLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBUcmFuc2xhdGlvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgbnMsXG4gICAgY2hpbGRyZW4sXG4gICAgLi4ub3B0aW9uc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFt0LCBpMThuLCByZWFkeV0gPSB1c2VUcmFuc2xhdGlvbihucywgb3B0aW9ucyk7XG4gIHJldHVybiBjaGlsZHJlbih0LCB7XG4gICAgaTE4bixcbiAgICBsbmc6IGkxOG4ubGFuZ3VhZ2VcbiAgfSwgcmVhZHkpO1xufSIsImltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXREZWZhdWx0cywgc2V0RGVmYXVsdHMgfSBmcm9tICcuL2RlZmF1bHRzLmpzJztcbmltcG9ydCB7IGdldEkxOG4sIHNldEkxOG4gfSBmcm9tICcuL2kxOG5JbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBpbml0UmVhY3RJMThuZXh0IH0gZnJvbSAnLi9pbml0UmVhY3RJMThuZXh0LmpzJztcbmV4cG9ydCB7IGdldERlZmF1bHRzLCBzZXREZWZhdWx0cywgZ2V0STE4biwgc2V0STE4biwgaW5pdFJlYWN0STE4bmV4dCB9O1xuZXhwb3J0IGNvbnN0IEkxOG5Db250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuZXhwb3J0IGNsYXNzIFJlcG9ydE5hbWVzcGFjZXMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnVzZWROYW1lc3BhY2VzID0ge307XG4gIH1cbiAgYWRkVXNlZE5hbWVzcGFjZXMobmFtZXNwYWNlcykge1xuICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICBpZiAoIXRoaXMudXNlZE5hbWVzcGFjZXNbbnNdKSB0aGlzLnVzZWROYW1lc3BhY2VzW25zXSA9IHRydWU7XG4gICAgfSk7XG4gIH1cbiAgZ2V0VXNlZE5hbWVzcGFjZXMgPSAoKSA9PiBPYmplY3Qua2V5cyh0aGlzLnVzZWROYW1lc3BhY2VzKTtcbn1cbmV4cG9ydCBjb25zdCBjb21wb3NlSW5pdGlhbFByb3BzID0gRm9yQ29tcG9uZW50ID0+IGFzeW5jIGN0eCA9PiB7XG4gIGNvbnN0IGNvbXBvbmVudHNJbml0aWFsUHJvcHMgPSBGb3JDb21wb25lbnQuZ2V0SW5pdGlhbFByb3BzID8gYXdhaXQgRm9yQ29tcG9uZW50LmdldEluaXRpYWxQcm9wcyhjdHgpIDoge307XG4gIGNvbnN0IGkxOG5Jbml0aWFsUHJvcHMgPSBnZXRJbml0aWFsUHJvcHMoKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5jb21wb25lbnRzSW5pdGlhbFByb3BzLFxuICAgIC4uLmkxOG5Jbml0aWFsUHJvcHNcbiAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0SW5pdGlhbFByb3BzID0gKCkgPT4ge1xuICBjb25zdCBpMThuID0gZ2V0STE4bigpO1xuICBjb25zdCBuYW1lc3BhY2VzID0gaTE4bi5yZXBvcnROYW1lc3BhY2VzID8gaTE4bi5yZXBvcnROYW1lc3BhY2VzLmdldFVzZWROYW1lc3BhY2VzKCkgOiBbXTtcbiAgY29uc3QgcmV0ID0ge307XG4gIGNvbnN0IGluaXRpYWxJMThuU3RvcmUgPSB7fTtcbiAgaTE4bi5sYW5ndWFnZXMuZm9yRWFjaChsID0+IHtcbiAgICBpbml0aWFsSTE4blN0b3JlW2xdID0ge307XG4gICAgbmFtZXNwYWNlcy5mb3JFYWNoKG5zID0+IHtcbiAgICAgIGluaXRpYWxJMThuU3RvcmVbbF1bbnNdID0gaTE4bi5nZXRSZXNvdXJjZUJ1bmRsZShsLCBucykgfHwge307XG4gICAgfSk7XG4gIH0pO1xuICByZXQuaW5pdGlhbEkxOG5TdG9yZSA9IGluaXRpYWxJMThuU3RvcmU7XG4gIHJldC5pbml0aWFsTGFuZ3VhZ2UgPSBpMThuLmxhbmd1YWdlO1xuICByZXR1cm4gcmV0O1xufTsiLCJpbXBvcnQgeyB1bmVzY2FwZSB9IGZyb20gJy4vdW5lc2NhcGUuanMnO1xubGV0IGRlZmF1bHRPcHRpb25zID0ge1xuICBiaW5kSTE4bjogJ2xhbmd1YWdlQ2hhbmdlZCcsXG4gIGJpbmRJMThuU3RvcmU6ICcnLFxuICB0cmFuc0VtcHR5Tm9kZVZhbHVlOiAnJyxcbiAgdHJhbnNTdXBwb3J0QmFzaWNIdG1sTm9kZXM6IHRydWUsXG4gIHRyYW5zV3JhcFRleHROb2RlczogJycsXG4gIHRyYW5zS2VlcEJhc2ljSHRtbE5vZGVzRm9yOiBbJ2JyJywgJ3N0cm9uZycsICdpJywgJ3AnXSxcbiAgdXNlU3VzcGVuc2U6IHRydWUsXG4gIHVuZXNjYXBlXG59O1xuZXhwb3J0IGNvbnN0IHNldERlZmF1bHRzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnNcbiAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiBkZWZhdWx0T3B0aW9uczsiLCJsZXQgaTE4bkluc3RhbmNlO1xuZXhwb3J0IGNvbnN0IHNldEkxOG4gPSBpbnN0YW5jZSA9PiB7XG4gIGkxOG5JbnN0YW5jZSA9IGluc3RhbmNlO1xufTtcbmV4cG9ydCBjb25zdCBnZXRJMThuID0gKCkgPT4gaTE4bkluc3RhbmNlOyIsImV4cG9ydCB7IFRyYW5zIH0gZnJvbSAnLi9UcmFucy5qcyc7XG5leHBvcnQgeyBUcmFucyBhcyBUcmFuc1dpdGhvdXRDb250ZXh0IH0gZnJvbSAnLi9UcmFuc1dpdGhvdXRDb250ZXh0LmpzJztcbmV4cG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAnLi91c2VUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICcuL3dpdGhUcmFuc2xhdGlvbi5qcyc7XG5leHBvcnQgeyBUcmFuc2xhdGlvbiB9IGZyb20gJy4vVHJhbnNsYXRpb24uanMnO1xuZXhwb3J0IHsgSTE4bmV4dFByb3ZpZGVyIH0gZnJvbSAnLi9JMThuZXh0UHJvdmlkZXIuanMnO1xuZXhwb3J0IHsgd2l0aFNTUiB9IGZyb20gJy4vd2l0aFNTUi5qcyc7XG5leHBvcnQgeyB1c2VTU1IgfSBmcm9tICcuL3VzZVNTUi5qcyc7XG5leHBvcnQgeyBpbml0UmVhY3RJMThuZXh0IH0gZnJvbSAnLi9pbml0UmVhY3RJMThuZXh0LmpzJztcbmV4cG9ydCB7IHNldERlZmF1bHRzLCBnZXREZWZhdWx0cyB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuZXhwb3J0IHsgc2V0STE4biwgZ2V0STE4biB9IGZyb20gJy4vaTE4bkluc3RhbmNlLmpzJztcbmV4cG9ydCB7IEkxOG5Db250ZXh0LCBjb21wb3NlSW5pdGlhbFByb3BzLCBnZXRJbml0aWFsUHJvcHMgfSBmcm9tICcuL2NvbnRleHQuanMnO1xuZXhwb3J0IGNvbnN0IGRhdGUgPSAoKSA9PiAnJztcbmV4cG9ydCBjb25zdCB0aW1lID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgbnVtYmVyID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3Qgc2VsZWN0ID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3QgcGx1cmFsID0gKCkgPT4gJyc7XG5leHBvcnQgY29uc3Qgc2VsZWN0T3JkaW5hbCA9ICgpID0+ICcnOyIsImltcG9ydCB7IHNldERlZmF1bHRzIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBzZXRJMThuIH0gZnJvbSAnLi9pMThuSW5zdGFuY2UuanMnO1xuZXhwb3J0IGNvbnN0IGluaXRSZWFjdEkxOG5leHQgPSB7XG4gIHR5cGU6ICczcmRQYXJ0eScsXG4gIGluaXQoaW5zdGFuY2UpIHtcbiAgICBzZXREZWZhdWx0cyhpbnN0YW5jZS5vcHRpb25zLnJlYWN0KTtcbiAgICBzZXRJMThuKGluc3RhbmNlKTtcbiAgfVxufTsiLCJjb25zdCBtYXRjaEh0bWxFbnRpdHkgPSAvJig/OmFtcHwjMzh8bHR8IzYwfGd0fCM2MnxhcG9zfCMzOXxxdW90fCMzNHxuYnNwfCMxNjB8Y29weXwjMTY5fHJlZ3wjMTc0fGhlbGxpcHwjODIzMHwjeDJGfCM0Nyk7L2c7XG5jb25zdCBodG1sRW50aXRpZXMgPSB7XG4gICcmYW1wOyc6ICcmJyxcbiAgJyYjMzg7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyYjNjA7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyYjNjI7JzogJz4nLFxuICAnJmFwb3M7JzogXCInXCIsXG4gICcmIzM5Oyc6IFwiJ1wiLFxuICAnJnF1b3Q7JzogJ1wiJyxcbiAgJyYjMzQ7JzogJ1wiJyxcbiAgJyZuYnNwOyc6ICcgJyxcbiAgJyYjMTYwOyc6ICcgJyxcbiAgJyZjb3B5Oyc6ICfCqScsXG4gICcmIzE2OTsnOiAnwqknLFxuICAnJnJlZzsnOiAnwq4nLFxuICAnJiMxNzQ7JzogJ8KuJyxcbiAgJyZoZWxsaXA7JzogJ+KApicsXG4gICcmIzgyMzA7JzogJ+KApicsXG4gICcmI3gyRjsnOiAnLycsXG4gICcmIzQ3Oyc6ICcvJ1xufTtcbmNvbnN0IHVuZXNjYXBlSHRtbEVudGl0eSA9IG0gPT4gaHRtbEVudGl0aWVzW21dO1xuZXhwb3J0IGNvbnN0IHVuZXNjYXBlID0gdGV4dCA9PiB0ZXh0LnJlcGxhY2UobWF0Y2hIdG1sRW50aXR5LCB1bmVzY2FwZUh0bWxFbnRpdHkpOyIsImltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBnZXRJMThuLCBJMThuQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC5qcyc7XG5leHBvcnQgY29uc3QgdXNlU1NSID0gZnVuY3Rpb24gKGluaXRpYWxJMThuU3RvcmUsIGluaXRpYWxMYW5ndWFnZSkge1xuICBsZXQgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Qcm9wc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHRcbiAgfSA9IHVzZUNvbnRleHQoSTE4bkNvbnRleHQpIHx8IHt9O1xuICBjb25zdCBpMThuID0gaTE4bkZyb21Qcm9wcyB8fCBpMThuRnJvbUNvbnRleHQgfHwgZ2V0STE4bigpO1xuICBpZiAoaTE4bi5vcHRpb25zICYmIGkxOG4ub3B0aW9ucy5pc0Nsb25lKSByZXR1cm47XG4gIGlmIChpbml0aWFsSTE4blN0b3JlICYmICFpMThuLmluaXRpYWxpemVkU3RvcmVPbmNlKSB7XG4gICAgaTE4bi5zZXJ2aWNlcy5yZXNvdXJjZVN0b3JlLmRhdGEgPSBpbml0aWFsSTE4blN0b3JlO1xuICAgIGkxOG4ub3B0aW9ucy5ucyA9IE9iamVjdC52YWx1ZXMoaW5pdGlhbEkxOG5TdG9yZSkucmVkdWNlKChtZW0sIGxuZ1Jlc291cmNlcykgPT4ge1xuICAgICAgT2JqZWN0LmtleXMobG5nUmVzb3VyY2VzKS5mb3JFYWNoKG5zID0+IHtcbiAgICAgICAgaWYgKG1lbS5pbmRleE9mKG5zKSA8IDApIG1lbS5wdXNoKG5zKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1lbTtcbiAgICB9LCBpMThuLm9wdGlvbnMubnMpO1xuICAgIGkxOG4uaW5pdGlhbGl6ZWRTdG9yZU9uY2UgPSB0cnVlO1xuICAgIGkxOG4uaXNJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cbiAgaWYgKGluaXRpYWxMYW5ndWFnZSAmJiAhaTE4bi5pbml0aWFsaXplZExhbmd1YWdlT25jZSkge1xuICAgIGkxOG4uY2hhbmdlTGFuZ3VhZ2UoaW5pdGlhbExhbmd1YWdlKTtcbiAgICBpMThuLmluaXRpYWxpemVkTGFuZ3VhZ2VPbmNlID0gdHJ1ZTtcbiAgfVxufTsiLCJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDb250ZXh0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0STE4biwgZ2V0RGVmYXVsdHMsIFJlcG9ydE5hbWVzcGFjZXMsIEkxOG5Db250ZXh0IH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7IHdhcm5PbmNlLCBsb2FkTmFtZXNwYWNlcywgbG9hZExhbmd1YWdlcywgaGFzTG9hZGVkTmFtZXNwYWNlLCBpc1N0cmluZywgaXNPYmplY3QgfSBmcm9tICcuL3V0aWxzLmpzJztcbmNvbnN0IHVzZVByZXZpb3VzID0gKHZhbHVlLCBpZ25vcmUpID0+IHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSBpZ25vcmUgPyByZWYuY3VycmVudCA6IHZhbHVlO1xuICB9LCBbdmFsdWUsIGlnbm9yZV0pO1xuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59O1xuY29uc3QgYWx3YXlzTmV3VCA9IChpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXgpID0+IGkxOG4uZ2V0Rml4ZWRUKGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCk7XG5jb25zdCB1c2VNZW1vaXplZFQgPSAoaTE4biwgbGFuZ3VhZ2UsIG5hbWVzcGFjZSwga2V5UHJlZml4KSA9PiB1c2VDYWxsYmFjayhhbHdheXNOZXdUKGkxOG4sIGxhbmd1YWdlLCBuYW1lc3BhY2UsIGtleVByZWZpeCksIFtpMThuLCBsYW5ndWFnZSwgbmFtZXNwYWNlLCBrZXlQcmVmaXhdKTtcbmV4cG9ydCBjb25zdCB1c2VUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uIChucykge1xuICBsZXQgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICBjb25zdCB7XG4gICAgaTE4bjogaTE4bkZyb21Qcm9wc1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHtcbiAgICBpMThuOiBpMThuRnJvbUNvbnRleHQsXG4gICAgZGVmYXVsdE5TOiBkZWZhdWx0TlNGcm9tQ29udGV4dFxuICB9ID0gdXNlQ29udGV4dChJMThuQ29udGV4dCkgfHwge307XG4gIGNvbnN0IGkxOG4gPSBpMThuRnJvbVByb3BzIHx8IGkxOG5Gcm9tQ29udGV4dCB8fCBnZXRJMThuKCk7XG4gIGlmIChpMThuICYmICFpMThuLnJlcG9ydE5hbWVzcGFjZXMpIGkxOG4ucmVwb3J0TmFtZXNwYWNlcyA9IG5ldyBSZXBvcnROYW1lc3BhY2VzKCk7XG4gIGlmICghaTE4bikge1xuICAgIHdhcm5PbmNlKCdZb3Ugd2lsbCBuZWVkIHRvIHBhc3MgaW4gYW4gaTE4bmV4dCBpbnN0YW5jZSBieSB1c2luZyBpbml0UmVhY3RJMThuZXh0Jyk7XG4gICAgY29uc3Qgbm90UmVhZHlUID0gKGssIG9wdHNPckRlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgaWYgKGlzU3RyaW5nKG9wdHNPckRlZmF1bHRWYWx1ZSkpIHJldHVybiBvcHRzT3JEZWZhdWx0VmFsdWU7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0c09yRGVmYXVsdFZhbHVlKSAmJiBpc1N0cmluZyhvcHRzT3JEZWZhdWx0VmFsdWUuZGVmYXVsdFZhbHVlKSkgcmV0dXJuIG9wdHNPckRlZmF1bHRWYWx1ZS5kZWZhdWx0VmFsdWU7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrKSA/IGtbay5sZW5ndGggLSAxXSA6IGs7XG4gICAgfTtcbiAgICBjb25zdCByZXROb3RSZWFkeSA9IFtub3RSZWFkeVQsIHt9LCBmYWxzZV07XG4gICAgcmV0Tm90UmVhZHkudCA9IG5vdFJlYWR5VDtcbiAgICByZXROb3RSZWFkeS5pMThuID0ge307XG4gICAgcmV0Tm90UmVhZHkucmVhZHkgPSBmYWxzZTtcbiAgICByZXR1cm4gcmV0Tm90UmVhZHk7XG4gIH1cbiAgaWYgKGkxOG4ub3B0aW9ucy5yZWFjdCAmJiBpMThuLm9wdGlvbnMucmVhY3Qud2FpdCAhPT0gdW5kZWZpbmVkKSB3YXJuT25jZSgnSXQgc2VlbXMgeW91IGFyZSBzdGlsbCB1c2luZyB0aGUgb2xkIHdhaXQgb3B0aW9uLCB5b3UgbWF5IG1pZ3JhdGUgdG8gdGhlIG5ldyB1c2VTdXNwZW5zZSBiZWhhdmlvdXIuJyk7XG4gIGNvbnN0IGkxOG5PcHRpb25zID0ge1xuICAgIC4uLmdldERlZmF1bHRzKCksXG4gICAgLi4uaTE4bi5vcHRpb25zLnJlYWN0LFxuICAgIC4uLnByb3BzXG4gIH07XG4gIGNvbnN0IHtcbiAgICB1c2VTdXNwZW5zZSxcbiAgICBrZXlQcmVmaXhcbiAgfSA9IGkxOG5PcHRpb25zO1xuICBsZXQgbmFtZXNwYWNlcyA9IG5zIHx8IGRlZmF1bHROU0Zyb21Db250ZXh0IHx8IGkxOG4ub3B0aW9ucyAmJiBpMThuLm9wdGlvbnMuZGVmYXVsdE5TO1xuICBuYW1lc3BhY2VzID0gaXNTdHJpbmcobmFtZXNwYWNlcykgPyBbbmFtZXNwYWNlc10gOiBuYW1lc3BhY2VzIHx8IFsndHJhbnNsYXRpb24nXTtcbiAgaWYgKGkxOG4ucmVwb3J0TmFtZXNwYWNlcy5hZGRVc2VkTmFtZXNwYWNlcykgaTE4bi5yZXBvcnROYW1lc3BhY2VzLmFkZFVzZWROYW1lc3BhY2VzKG5hbWVzcGFjZXMpO1xuICBjb25zdCByZWFkeSA9IChpMThuLmlzSW5pdGlhbGl6ZWQgfHwgaTE4bi5pbml0aWFsaXplZFN0b3JlT25jZSkgJiYgbmFtZXNwYWNlcy5ldmVyeShuID0+IGhhc0xvYWRlZE5hbWVzcGFjZShuLCBpMThuLCBpMThuT3B0aW9ucykpO1xuICBjb25zdCBtZW1vR2V0VCA9IHVzZU1lbW9pemVkVChpMThuLCBwcm9wcy5sbmcgfHwgbnVsbCwgaTE4bk9wdGlvbnMubnNNb2RlID09PSAnZmFsbGJhY2snID8gbmFtZXNwYWNlcyA6IG5hbWVzcGFjZXNbMF0sIGtleVByZWZpeCk7XG4gIGNvbnN0IGdldFQgPSAoKSA9PiBtZW1vR2V0VDtcbiAgY29uc3QgZ2V0TmV3VCA9ICgpID0+IGFsd2F5c05ld1QoaTE4biwgcHJvcHMubG5nIHx8IG51bGwsIGkxOG5PcHRpb25zLm5zTW9kZSA9PT0gJ2ZhbGxiYWNrJyA/IG5hbWVzcGFjZXMgOiBuYW1lc3BhY2VzWzBdLCBrZXlQcmVmaXgpO1xuICBjb25zdCBbdCwgc2V0VF0gPSB1c2VTdGF0ZShnZXRUKTtcbiAgbGV0IGpvaW5lZE5TID0gbmFtZXNwYWNlcy5qb2luKCk7XG4gIGlmIChwcm9wcy5sbmcpIGpvaW5lZE5TID0gYCR7cHJvcHMubG5nfSR7am9pbmVkTlN9YDtcbiAgY29uc3QgcHJldmlvdXNKb2luZWROUyA9IHVzZVByZXZpb3VzKGpvaW5lZE5TKTtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmKHRydWUpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGJpbmRJMThuLFxuICAgICAgYmluZEkxOG5TdG9yZVxuICAgIH0gPSBpMThuT3B0aW9ucztcbiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7XG4gICAgaWYgKCFyZWFkeSAmJiAhdXNlU3VzcGVuc2UpIHtcbiAgICAgIGlmIChwcm9wcy5sbmcpIHtcbiAgICAgICAgbG9hZExhbmd1YWdlcyhpMThuLCBwcm9wcy5sbmcsIG5hbWVzcGFjZXMsICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNNb3VudGVkLmN1cnJlbnQpIHNldFQoZ2V0TmV3VCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZE5hbWVzcGFjZXMoaTE4biwgbmFtZXNwYWNlcywgKCkgPT4ge1xuICAgICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkgc2V0VChnZXROZXdUKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChyZWFkeSAmJiBwcmV2aW91c0pvaW5lZE5TICYmIHByZXZpb3VzSm9pbmVkTlMgIT09IGpvaW5lZE5TICYmIGlzTW91bnRlZC5jdXJyZW50KSB7XG4gICAgICBzZXRUKGdldE5ld1QpO1xuICAgIH1cbiAgICBjb25zdCBib3VuZFJlc2V0ID0gKCkgPT4ge1xuICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSBzZXRUKGdldE5ld1QpO1xuICAgIH07XG4gICAgaWYgKGJpbmRJMThuICYmIGkxOG4pIGkxOG4ub24oYmluZEkxOG4sIGJvdW5kUmVzZXQpO1xuICAgIGlmIChiaW5kSTE4blN0b3JlICYmIGkxOG4pIGkxOG4uc3RvcmUub24oYmluZEkxOG5TdG9yZSwgYm91bmRSZXNldCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZC5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBpZiAoYmluZEkxOG4gJiYgaTE4bikgYmluZEkxOG4uc3BsaXQoJyAnKS5mb3JFYWNoKGUgPT4gaTE4bi5vZmYoZSwgYm91bmRSZXNldCkpO1xuICAgICAgaWYgKGJpbmRJMThuU3RvcmUgJiYgaTE4bikgYmluZEkxOG5TdG9yZS5zcGxpdCgnICcpLmZvckVhY2goZSA9PiBpMThuLnN0b3JlLm9mZihlLCBib3VuZFJlc2V0KSk7XG4gICAgfTtcbiAgfSwgW2kxOG4sIGpvaW5lZE5TXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzTW91bnRlZC5jdXJyZW50ICYmIHJlYWR5KSB7XG4gICAgICBzZXRUKGdldFQpO1xuICAgIH1cbiAgfSwgW2kxOG4sIGtleVByZWZpeCwgcmVhZHldKTtcbiAgY29uc3QgcmV0ID0gW3QsIGkxOG4sIHJlYWR5XTtcbiAgcmV0LnQgPSB0O1xuICByZXQuaTE4biA9IGkxOG47XG4gIHJldC5yZWFkeSA9IHJlYWR5O1xuICBpZiAocmVhZHkpIHJldHVybiByZXQ7XG4gIGlmICghcmVhZHkgJiYgIXVzZVN1c3BlbnNlKSByZXR1cm4gcmV0O1xuICB0aHJvdyBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBpZiAocHJvcHMubG5nKSB7XG4gICAgICBsb2FkTGFuZ3VhZ2VzKGkxOG4sIHByb3BzLmxuZywgbmFtZXNwYWNlcywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZE5hbWVzcGFjZXMoaTE4biwgbmFtZXNwYWNlcywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9XG4gIH0pO1xufTsiLCJleHBvcnQgZnVuY3Rpb24gd2FybigpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcoYXJnc1swXSkpIGFyZ3NbMF0gPSBgcmVhY3QtaTE4bmV4dDo6ICR7YXJnc1swXX1gO1xuICAgIGNvbnNvbGUud2FybiguLi5hcmdzKTtcbiAgfVxufVxuY29uc3QgYWxyZWFkeVdhcm5lZCA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIHdhcm5PbmNlKCkge1xuICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gIH1cbiAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pICYmIGFscmVhZHlXYXJuZWRbYXJnc1swXV0pIHJldHVybjtcbiAgaWYgKGlzU3RyaW5nKGFyZ3NbMF0pKSBhbHJlYWR5V2FybmVkW2FyZ3NbMF1dID0gbmV3IERhdGUoKTtcbiAgd2FybiguLi5hcmdzKTtcbn1cbmNvbnN0IGxvYWRlZENsYiA9IChpMThuLCBjYikgPT4gKCkgPT4ge1xuICBpZiAoaTE4bi5pc0luaXRpYWxpemVkKSB7XG4gICAgY2IoKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBpbml0aWFsaXplZCA9ICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpMThuLm9mZignaW5pdGlhbGl6ZWQnLCBpbml0aWFsaXplZCk7XG4gICAgICB9LCAwKTtcbiAgICAgIGNiKCk7XG4gICAgfTtcbiAgICBpMThuLm9uKCdpbml0aWFsaXplZCcsIGluaXRpYWxpemVkKTtcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBsb2FkTmFtZXNwYWNlcyA9IChpMThuLCBucywgY2IpID0+IHtcbiAgaTE4bi5sb2FkTmFtZXNwYWNlcyhucywgbG9hZGVkQ2xiKGkxOG4sIGNiKSk7XG59O1xuZXhwb3J0IGNvbnN0IGxvYWRMYW5ndWFnZXMgPSAoaTE4biwgbG5nLCBucywgY2IpID0+IHtcbiAgaWYgKGlzU3RyaW5nKG5zKSkgbnMgPSBbbnNdO1xuICBucy5mb3JFYWNoKG4gPT4ge1xuICAgIGlmIChpMThuLm9wdGlvbnMubnMuaW5kZXhPZihuKSA8IDApIGkxOG4ub3B0aW9ucy5ucy5wdXNoKG4pO1xuICB9KTtcbiAgaTE4bi5sb2FkTGFuZ3VhZ2VzKGxuZywgbG9hZGVkQ2xiKGkxOG4sIGNiKSk7XG59O1xuY29uc3Qgb2xkSTE4bmV4dEhhc0xvYWRlZE5hbWVzcGFjZSA9IGZ1bmN0aW9uIChucywgaTE4bikge1xuICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gIGNvbnN0IGxuZyA9IGkxOG4ubGFuZ3VhZ2VzWzBdO1xuICBjb25zdCBmYWxsYmFja0xuZyA9IGkxOG4ub3B0aW9ucyA/IGkxOG4ub3B0aW9ucy5mYWxsYmFja0xuZyA6IGZhbHNlO1xuICBjb25zdCBsYXN0TG5nID0gaTE4bi5sYW5ndWFnZXNbaTE4bi5sYW5ndWFnZXMubGVuZ3RoIC0gMV07XG4gIGlmIChsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHJldHVybiB0cnVlO1xuICBjb25zdCBsb2FkTm90UGVuZGluZyA9IChsLCBuKSA9PiB7XG4gICAgY29uc3QgbG9hZFN0YXRlID0gaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnN0YXRlW2Ake2x9fCR7bn1gXTtcbiAgICByZXR1cm4gbG9hZFN0YXRlID09PSAtMSB8fCBsb2FkU3RhdGUgPT09IDI7XG4gIH07XG4gIGlmIChvcHRpb25zLmJpbmRJMThuICYmIG9wdGlvbnMuYmluZEkxOG4uaW5kZXhPZignbGFuZ3VhZ2VDaGFuZ2luZycpID4gLTEgJiYgaTE4bi5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgJiYgaTE4bi5pc0xhbmd1YWdlQ2hhbmdpbmdUbyAmJiAhbG9hZE5vdFBlbmRpbmcoaTE4bi5pc0xhbmd1YWdlQ2hhbmdpbmdUbywgbnMpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChpMThuLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKCFpMThuLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZCB8fCBpMThuLm9wdGlvbnMucmVzb3VyY2VzICYmICFpMThuLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpIHJldHVybiB0cnVlO1xuICBpZiAobG9hZE5vdFBlbmRpbmcobG5nLCBucykgJiYgKCFmYWxsYmFja0xuZyB8fCBsb2FkTm90UGVuZGluZyhsYXN0TG5nLCBucykpKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcbmV4cG9ydCBjb25zdCBoYXNMb2FkZWROYW1lc3BhY2UgPSBmdW5jdGlvbiAobnMsIGkxOG4pIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICBpZiAoIWkxOG4ubGFuZ3VhZ2VzIHx8ICFpMThuLmxhbmd1YWdlcy5sZW5ndGgpIHtcbiAgICB3YXJuT25jZSgnaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHknLCBpMThuLmxhbmd1YWdlcyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgaXNOZXdlckkxOG5leHQgPSBpMThuLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSAhPT0gdW5kZWZpbmVkO1xuICBpZiAoIWlzTmV3ZXJJMThuZXh0KSB7XG4gICAgcmV0dXJuIG9sZEkxOG5leHRIYXNMb2FkZWROYW1lc3BhY2UobnMsIGkxOG4sIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBpMThuLmhhc0xvYWRlZE5hbWVzcGFjZShucywge1xuICAgIGxuZzogb3B0aW9ucy5sbmcsXG4gICAgcHJlY2hlY2s6IChpMThuSW5zdGFuY2UsIGxvYWROb3RQZW5kaW5nKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5iaW5kSTE4biAmJiBvcHRpb25zLmJpbmRJMThuLmluZGV4T2YoJ2xhbmd1YWdlQ2hhbmdpbmcnKSA+IC0xICYmIGkxOG5JbnN0YW5jZS5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgJiYgaTE4bkluc3RhbmNlLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvICYmICFsb2FkTm90UGVuZGluZyhpMThuSW5zdGFuY2UuaXNMYW5ndWFnZUNoYW5naW5nVG8sIG5zKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGdldERpc3BsYXlOYW1lID0gQ29tcG9uZW50ID0+IENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAoaXNTdHJpbmcoQ29tcG9uZW50KSAmJiBDb21wb25lbnQubGVuZ3RoID4gMCA/IENvbXBvbmVudCA6ICdVbmtub3duJyk7XG5leHBvcnQgY29uc3QgaXNTdHJpbmcgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG5leHBvcnQgY29uc3QgaXNPYmplY3QgPSBvYmogPT4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsOyIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTU1IgfSBmcm9tICcuL3VzZVNTUi5qcyc7XG5pbXBvcnQgeyBjb21wb3NlSW5pdGlhbFByb3BzIH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7IGdldERpc3BsYXlOYW1lIH0gZnJvbSAnLi91dGlscy5qcyc7XG5leHBvcnQgY29uc3Qgd2l0aFNTUiA9ICgpID0+IGZ1bmN0aW9uIEV4dGVuZChXcmFwcGVkQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIEkxOG5leHRXaXRoU1NSKF9yZWYpIHtcbiAgICBsZXQge1xuICAgICAgaW5pdGlhbEkxOG5TdG9yZSxcbiAgICAgIGluaXRpYWxMYW5ndWFnZSxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gX3JlZjtcbiAgICB1c2VTU1IoaW5pdGlhbEkxOG5TdG9yZSwgaW5pdGlhbExhbmd1YWdlKTtcbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudChXcmFwcGVkQ29tcG9uZW50LCB7XG4gICAgICAuLi5yZXN0XG4gICAgfSk7XG4gIH1cbiAgSTE4bmV4dFdpdGhTU1IuZ2V0SW5pdGlhbFByb3BzID0gY29tcG9zZUluaXRpYWxQcm9wcyhXcmFwcGVkQ29tcG9uZW50KTtcbiAgSTE4bmV4dFdpdGhTU1IuZGlzcGxheU5hbWUgPSBgd2l0aEkxOG5leHRTU1IoJHtnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KX0pYDtcbiAgSTE4bmV4dFdpdGhTU1IuV3JhcHBlZENvbXBvbmVudCA9IFdyYXBwZWRDb21wb25lbnQ7XG4gIHJldHVybiBJMThuZXh0V2l0aFNTUjtcbn07IiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgZm9yd2FyZFJlZiBhcyBmb3J3YXJkUmVmUmVhY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJy4vdXNlVHJhbnNsYXRpb24uanMnO1xuaW1wb3J0IHsgZ2V0RGlzcGxheU5hbWUgfSBmcm9tICcuL3V0aWxzLmpzJztcbmV4cG9ydCBjb25zdCB3aXRoVHJhbnNsYXRpb24gPSBmdW5jdGlvbiAobnMpIHtcbiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gRXh0ZW5kKFdyYXBwZWRDb21wb25lbnQpIHtcbiAgICBmdW5jdGlvbiBJMThuZXh0V2l0aFRyYW5zbGF0aW9uKF9yZWYpIHtcbiAgICAgIGxldCB7XG4gICAgICAgIGZvcndhcmRlZFJlZixcbiAgICAgICAgLi4ucmVzdFxuICAgICAgfSA9IF9yZWY7XG4gICAgICBjb25zdCBbdCwgaTE4biwgcmVhZHldID0gdXNlVHJhbnNsYXRpb24obnMsIHtcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAga2V5UHJlZml4OiBvcHRpb25zLmtleVByZWZpeFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwYXNzRG93blByb3BzID0ge1xuICAgICAgICAuLi5yZXN0LFxuICAgICAgICB0LFxuICAgICAgICBpMThuLFxuICAgICAgICB0UmVhZHk6IHJlYWR5XG4gICAgICB9O1xuICAgICAgaWYgKG9wdGlvbnMud2l0aFJlZiAmJiBmb3J3YXJkZWRSZWYpIHtcbiAgICAgICAgcGFzc0Rvd25Qcm9wcy5yZWYgPSBmb3J3YXJkZWRSZWY7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLndpdGhSZWYgJiYgZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgIHBhc3NEb3duUHJvcHMuZm9yd2FyZGVkUmVmID0gZm9yd2FyZGVkUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoV3JhcHBlZENvbXBvbmVudCwgcGFzc0Rvd25Qcm9wcyk7XG4gICAgfVxuICAgIEkxOG5leHRXaXRoVHJhbnNsYXRpb24uZGlzcGxheU5hbWUgPSBgd2l0aEkxOG5leHRUcmFuc2xhdGlvbigke2dldERpc3BsYXlOYW1lKFdyYXBwZWRDb21wb25lbnQpfSlgO1xuICAgIEkxOG5leHRXaXRoVHJhbnNsYXRpb24uV3JhcHBlZENvbXBvbmVudCA9IFdyYXBwZWRDb21wb25lbnQ7XG4gICAgY29uc3QgZm9yd2FyZFJlZiA9IChwcm9wcywgcmVmKSA9PiBjcmVhdGVFbGVtZW50KEkxOG5leHRXaXRoVHJhbnNsYXRpb24sIE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBmb3J3YXJkZWRSZWY6IHJlZlxuICAgIH0pKTtcbiAgICByZXR1cm4gb3B0aW9ucy53aXRoUmVmID8gZm9yd2FyZFJlZlJlYWN0KGZvcndhcmRSZWYpIDogSTE4bmV4dFdpdGhUcmFuc2xhdGlvbjtcbiAgfTtcbn07IiwiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKG1ldGhvZE5hbWUsIGluZm8pIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiJXMoLi4uKSBpcyBkZXByZWNhdGVkIGluIHBsYWluIEphdmFTY3JpcHQgUmVhY3QgY2xhc3Nlcy4gJXNcIixcbiAgICAgICAgICAgIGluZm9bMF0sXG4gICAgICAgICAgICBpbmZvWzFdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkge1xuICAgICAgaWYgKG51bGwgPT09IG1heWJlSXRlcmFibGUgfHwgXCJvYmplY3RcIiAhPT0gdHlwZW9mIG1heWJlSXRlcmFibGUpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgbWF5YmVJdGVyYWJsZSA9XG4gICAgICAgIChNQVlCRV9JVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtNQVlCRV9JVEVSQVRPUl9TWU1CT0xdKSB8fFxuICAgICAgICBtYXliZUl0ZXJhYmxlW1wiQEBpdGVyYXRvclwiXTtcbiAgICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBtYXliZUl0ZXJhYmxlID8gbWF5YmVJdGVyYWJsZSA6IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gICAgICBwdWJsaWNJbnN0YW5jZSA9XG4gICAgICAgICgocHVibGljSW5zdGFuY2UgPSBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3RvcikgJiZcbiAgICAgICAgICAocHVibGljSW5zdGFuY2UuZGlzcGxheU5hbWUgfHwgcHVibGljSW5zdGFuY2UubmFtZSkpIHx8XG4gICAgICAgIFwiUmVhY3RDbGFzc1wiO1xuICAgICAgdmFyIHdhcm5pbmdLZXkgPSBwdWJsaWNJbnN0YW5jZSArIFwiLlwiICsgY2FsbGVyTmFtZTtcbiAgICAgIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudFt3YXJuaW5nS2V5XSB8fFxuICAgICAgICAoY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkNhbid0IGNhbGwgJXMgb24gYSBjb21wb25lbnQgdGhhdCBpcyBub3QgeWV0IG1vdW50ZWQuIFRoaXMgaXMgYSBuby1vcCwgYnV0IGl0IG1pZ2h0IGluZGljYXRlIGEgYnVnIGluIHlvdXIgYXBwbGljYXRpb24uIEluc3RlYWQsIGFzc2lnbiB0byBgdGhpcy5zdGF0ZWAgZGlyZWN0bHkgb3IgZGVmaW5lIGEgYHN0YXRlID0ge307YCBjbGFzcyBwcm9wZXJ0eSB3aXRoIHRoZSBkZXNpcmVkIHN0YXRlIGluIHRoZSAlcyBjb21wb25lbnQuXCIsXG4gICAgICAgICAgY2FsbGVyTmFtZSxcbiAgICAgICAgICBwdWJsaWNJbnN0YW5jZVxuICAgICAgICApLFxuICAgICAgICAoZGlkV2FyblN0YXRlVXBkYXRlRm9yVW5tb3VudGVkQ29tcG9uZW50W3dhcm5pbmdLZXldID0gITApKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgICB0aGlzLnVwZGF0ZXIgPSB1cGRhdGVyIHx8IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBDb21wb25lbnREdW1teSgpIHt9XG4gICAgZnVuY3Rpb24gUHVyZUNvbXBvbmVudChwcm9wcywgY29udGV4dCwgdXBkYXRlcikge1xuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gITE7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICEwO1xuICAgICAgfVxuICAgICAgaWYgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBjb25zb2xlO1xuICAgICAgICB2YXIgSlNDb21waWxlcl90ZW1wX2NvbnN0ID0gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LmVycm9yO1xuICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwID1cbiAgICAgICAgICAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgU3ltYm9sICYmXG4gICAgICAgICAgICBTeW1ib2wudG9TdHJpbmdUYWcgJiZcbiAgICAgICAgICAgIHZhbHVlW1N5bWJvbC50b1N0cmluZ1RhZ10pIHx8XG4gICAgICAgICAgdmFsdWUuY29uc3RydWN0b3IubmFtZSB8fFxuICAgICAgICAgIFwiT2JqZWN0XCI7XG4gICAgICAgIEpTQ29tcGlsZXJfdGVtcF9jb25zdC5jYWxsKFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCxcbiAgICAgICAgICBcIlRoZSBwcm92aWRlZCBrZXkgaXMgYW4gdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuXCIsXG4gICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSkge1xuICAgICAgaWYgKG51bGwgPT0gdHlwZSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdHlwZSlcbiAgICAgICAgcmV0dXJuIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0VcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IG51bGw7XG4gICAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHR5cGUpIHJldHVybiB0eXBlO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJGcmFnbWVudFwiO1xuICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiUHJvZmlsZXJcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN0cmljdE1vZGVcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN1c3BlbnNlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlN1c3BlbnNlTGlzdFwiO1xuICAgICAgICBjYXNlIFJFQUNUX0FDVElWSVRZX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiQWN0aXZpdHlcIjtcbiAgICAgIH1cbiAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdHlwZSlcbiAgICAgICAgc3dpdGNoIChcbiAgICAgICAgICAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIHR5cGUudGFnICYmXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIlJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgb2JqZWN0IGluIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSgpLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgdHlwZS4kJHR5cGVvZilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiBcIlBvcnRhbFwiO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuICh0eXBlLmRpc3BsYXlOYW1lIHx8IFwiQ29udGV4dFwiKSArIFwiLlByb3ZpZGVyXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuICh0eXBlLl9jb250ZXh0LmRpc3BsYXlOYW1lIHx8IFwiQ29udGV4dFwiKSArIFwiLkNvbnN1bWVyXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICAgICAgdmFyIGlubmVyVHlwZSA9IHR5cGUucmVuZGVyO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUuZGlzcGxheU5hbWU7XG4gICAgICAgICAgICB0eXBlIHx8XG4gICAgICAgICAgICAgICgodHlwZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCBcIlwiKSxcbiAgICAgICAgICAgICAgKHR5cGUgPSBcIlwiICE9PSB0eXBlID8gXCJGb3J3YXJkUmVmKFwiICsgdHlwZSArIFwiKVwiIDogXCJGb3J3YXJkUmVmXCIpKTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgKGlubmVyVHlwZSA9IHR5cGUuZGlzcGxheU5hbWUgfHwgbnVsbCksXG4gICAgICAgICAgICAgIG51bGwgIT09IGlubmVyVHlwZVxuICAgICAgICAgICAgICAgID8gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgOiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZS50eXBlKSB8fCBcIk1lbW9cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRTpcbiAgICAgICAgICAgIGlubmVyVHlwZSA9IHR5cGUuX3BheWxvYWQ7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5faW5pdDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZShpbm5lclR5cGUpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXNrTmFtZSh0eXBlKSB7XG4gICAgICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkgcmV0dXJuIFwiPD5cIjtcbiAgICAgIGlmIChcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHR5cGUgJiZcbiAgICAgICAgbnVsbCAhPT0gdHlwZSAmJlxuICAgICAgICB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEVcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgICByZXR1cm4gbmFtZSA/IFwiPFwiICsgbmFtZSArIFwiPlwiIDogXCI8Li4uPlwiO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICByZXR1cm4gXCI8Li4uPlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHtcbiAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuQTtcbiAgICAgIHJldHVybiBudWxsID09PSBkaXNwYXRjaGVyID8gbnVsbCA6IGRpc3BhdGNoZXIuZ2V0T3duZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVW5rbm93bk93bmVyKCkge1xuICAgICAgcmV0dXJuIEVycm9yKFwicmVhY3Qtc3RhY2stdG9wLWZyYW1lXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgXCJrZXlcIikpIHtcbiAgICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCBcImtleVwiKS5nZXQ7XG4gICAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSByZXR1cm4gITE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb25maWcua2V5O1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHtcbiAgICAgIGZ1bmN0aW9uIHdhcm5BYm91dEFjY2Vzc2luZ0tleSgpIHtcbiAgICAgICAgc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gfHxcbiAgICAgICAgICAoKHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duID0gITApLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIiVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGJlaW5nIHJldHVybmVkLiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgdGhlIHNhbWUgdmFsdWUgd2l0aGluIHRoZSBjaGlsZCBjb21wb25lbnQsIHlvdSBzaG91bGQgcGFzcyBpdCBhcyBhIGRpZmZlcmVudCBwcm9wLiAoaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9zcGVjaWFsLXByb3BzKVwiLFxuICAgICAgICAgICAgZGlzcGxheU5hbWVcbiAgICAgICAgICApKTtcbiAgICAgIH1cbiAgICAgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9ICEwO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCBcImtleVwiLCB7XG4gICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcoKSB7XG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0aGlzLnR5cGUpO1xuICAgICAgZGlkV2FybkFib3V0RWxlbWVudFJlZltjb21wb25lbnROYW1lXSB8fFxuICAgICAgICAoKGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gPSAhMCksXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJBY2Nlc3NpbmcgZWxlbWVudC5yZWYgd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIHJlZiBpcyBub3cgYSByZWd1bGFyIHByb3AuIEl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBKU1ggRWxlbWVudCB0eXBlIGluIGEgZnV0dXJlIHJlbGVhc2UuXCJcbiAgICAgICAgKSk7XG4gICAgICBjb21wb25lbnROYW1lID0gdGhpcy5wcm9wcy5yZWY7XG4gICAgICByZXR1cm4gdm9pZCAwICE9PSBjb21wb25lbnROYW1lID8gY29tcG9uZW50TmFtZSA6IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJlYWN0RWxlbWVudChcbiAgICAgIHR5cGUsXG4gICAgICBrZXksXG4gICAgICBzZWxmLFxuICAgICAgc291cmNlLFxuICAgICAgb3duZXIsXG4gICAgICBwcm9wcyxcbiAgICAgIGRlYnVnU3RhY2ssXG4gICAgICBkZWJ1Z1Rhc2tcbiAgICApIHtcbiAgICAgIHNlbGYgPSBwcm9wcy5yZWY7XG4gICAgICB0eXBlID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICBfb3duZXI6IG93bmVyXG4gICAgICB9O1xuICAgICAgbnVsbCAhPT0gKHZvaWQgMCAhPT0gc2VsZiA/IHNlbGYgOiBudWxsKVxuICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmdcbiAgICAgICAgICB9KVxuICAgICAgICA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogbnVsbCB9KTtcbiAgICAgIHR5cGUuX3N0b3JlID0ge307XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsIFwidmFsaWRhdGVkXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IDBcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnSW5mb1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1N0YWNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnU3RhY2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnVGFza1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1Rhc2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvbmVBbmRSZXBsYWNlS2V5KG9sZEVsZW1lbnQsIG5ld0tleSkge1xuICAgICAgbmV3S2V5ID0gUmVhY3RFbGVtZW50KFxuICAgICAgICBvbGRFbGVtZW50LnR5cGUsXG4gICAgICAgIG5ld0tleSxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIG9sZEVsZW1lbnQuX293bmVyLFxuICAgICAgICBvbGRFbGVtZW50LnByb3BzLFxuICAgICAgICBvbGRFbGVtZW50Ll9kZWJ1Z1N0YWNrLFxuICAgICAgICBvbGRFbGVtZW50Ll9kZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgICBvbGRFbGVtZW50Ll9zdG9yZSAmJlxuICAgICAgICAobmV3S2V5Ll9zdG9yZS52YWxpZGF0ZWQgPSBvbGRFbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQpO1xuICAgICAgcmV0dXJuIG5ld0tleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnQob2JqZWN0KSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2Ygb2JqZWN0ICYmXG4gICAgICAgIG51bGwgIT09IG9iamVjdCAmJlxuICAgICAgICBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRVxuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXNjYXBlKGtleSkge1xuICAgICAgdmFyIGVzY2FwZXJMb29rdXAgPSB7IFwiPVwiOiBcIj0wXCIsIFwiOlwiOiBcIj0yXCIgfTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFwiJFwiICtcbiAgICAgICAga2V5LnJlcGxhY2UoL1s9Ol0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgcmV0dXJuIGVzY2FwZXJMb29rdXBbbWF0Y2hdO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudEtleShlbGVtZW50LCBpbmRleCkge1xuICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT09IHR5cGVvZiBlbGVtZW50ICYmXG4gICAgICAgIG51bGwgIT09IGVsZW1lbnQgJiZcbiAgICAgICAgbnVsbCAhPSBlbGVtZW50LmtleVxuICAgICAgICA/IChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGVsZW1lbnQua2V5KSwgZXNjYXBlKFwiXCIgKyBlbGVtZW50LmtleSkpXG4gICAgICAgIDogaW5kZXgudG9TdHJpbmcoMzYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBub29wJDEoKSB7fVxuICAgIGZ1bmN0aW9uIHJlc29sdmVUaGVuYWJsZSh0aGVuYWJsZSkge1xuICAgICAgc3dpdGNoICh0aGVuYWJsZS5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcImZ1bGZpbGxlZFwiOlxuICAgICAgICAgIHJldHVybiB0aGVuYWJsZS52YWx1ZTtcbiAgICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgICAgdGhyb3cgdGhlbmFibGUucmVhc29uO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAoXG4gICAgICAgICAgICAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHRoZW5hYmxlLnN0YXR1c1xuICAgICAgICAgICAgICA/IHRoZW5hYmxlLnRoZW4obm9vcCQxLCBub29wJDEpXG4gICAgICAgICAgICAgIDogKCh0aGVuYWJsZS5zdGF0dXMgPSBcInBlbmRpbmdcIiksXG4gICAgICAgICAgICAgICAgdGhlbmFibGUudGhlbihcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChmdWxmaWxsZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBcInBlbmRpbmdcIiA9PT0gdGhlbmFibGUuc3RhdHVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgKCh0aGVuYWJsZS5zdGF0dXMgPSBcImZ1bGZpbGxlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAodGhlbmFibGUudmFsdWUgPSBmdWxmaWxsZWRWYWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBcInBlbmRpbmdcIiA9PT0gdGhlbmFibGUuc3RhdHVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgKCh0aGVuYWJsZS5zdGF0dXMgPSBcInJlamVjdGVkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICh0aGVuYWJsZS5yZWFzb24gPSBlcnJvcikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgdGhlbmFibGUuc3RhdHVzKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY2FzZSBcImZ1bGZpbGxlZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gdGhlbmFibGUudmFsdWU7XG4gICAgICAgICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgICAgICAgdGhyb3cgdGhlbmFibGUucmVhc29uO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IHRoZW5hYmxlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYXBJbnRvQXJyYXkoY2hpbGRyZW4sIGFycmF5LCBlc2NhcGVkUHJlZml4LCBuYW1lU29GYXIsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBjaGlsZHJlbjtcbiAgICAgIGlmIChcInVuZGVmaW5lZFwiID09PSB0eXBlIHx8IFwiYm9vbGVhblwiID09PSB0eXBlKSBjaGlsZHJlbiA9IG51bGw7XG4gICAgICB2YXIgaW52b2tlQ2FsbGJhY2sgPSAhMTtcbiAgICAgIGlmIChudWxsID09PSBjaGlsZHJlbikgaW52b2tlQ2FsbGJhY2sgPSAhMDtcbiAgICAgIGVsc2VcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICBpbnZva2VDYWxsYmFjayA9ICEwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgc3dpdGNoIChjaGlsZHJlbi4kJHR5cGVvZikge1xuICAgICAgICAgICAgICBjYXNlIFJFQUNUX0VMRU1FTlRfVFlQRTpcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRTpcbiAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjayA9ICEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgKGludm9rZUNhbGxiYWNrID0gY2hpbGRyZW4uX2luaXQpLFxuICAgICAgICAgICAgICAgICAgbWFwSW50b0FycmF5KFxuICAgICAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjayhjaGlsZHJlbi5fcGF5bG9hZCksXG4gICAgICAgICAgICAgICAgICAgIGFycmF5LFxuICAgICAgICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgICAgICAgICBuYW1lU29GYXIsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgaWYgKGludm9rZUNhbGxiYWNrKSB7XG4gICAgICAgIGludm9rZUNhbGxiYWNrID0gY2hpbGRyZW47XG4gICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2soaW52b2tlQ2FsbGJhY2spO1xuICAgICAgICB2YXIgY2hpbGRLZXkgPVxuICAgICAgICAgIFwiXCIgPT09IG5hbWVTb0ZhciA/IFwiLlwiICsgZ2V0RWxlbWVudEtleShpbnZva2VDYWxsYmFjaywgMCkgOiBuYW1lU29GYXI7XG4gICAgICAgIGlzQXJyYXlJbXBsKGNhbGxiYWNrKVxuICAgICAgICAgID8gKChlc2NhcGVkUHJlZml4ID0gXCJcIiksXG4gICAgICAgICAgICBudWxsICE9IGNoaWxkS2V5ICYmXG4gICAgICAgICAgICAgIChlc2NhcGVkUHJlZml4ID1cbiAgICAgICAgICAgICAgICBjaGlsZEtleS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCBcIiQmL1wiKSArIFwiL1wiKSxcbiAgICAgICAgICAgIG1hcEludG9BcnJheShjYWxsYmFjaywgYXJyYXksIGVzY2FwZWRQcmVmaXgsIFwiXCIsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgOiBudWxsICE9IGNhbGxiYWNrICYmXG4gICAgICAgICAgICAoaXNWYWxpZEVsZW1lbnQoY2FsbGJhY2spICYmXG4gICAgICAgICAgICAgIChudWxsICE9IGNhbGxiYWNrLmtleSAmJlxuICAgICAgICAgICAgICAgICgoaW52b2tlQ2FsbGJhY2sgJiYgaW52b2tlQ2FsbGJhY2sua2V5ID09PSBjYWxsYmFjay5rZXkpIHx8XG4gICAgICAgICAgICAgICAgICBjaGVja0tleVN0cmluZ0NvZXJjaW9uKGNhbGxiYWNrLmtleSkpLFxuICAgICAgICAgICAgICAoZXNjYXBlZFByZWZpeCA9IGNsb25lQW5kUmVwbGFjZUtleShcbiAgICAgICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4ICtcbiAgICAgICAgICAgICAgICAgIChudWxsID09IGNhbGxiYWNrLmtleSB8fFxuICAgICAgICAgICAgICAgICAgKGludm9rZUNhbGxiYWNrICYmIGludm9rZUNhbGxiYWNrLmtleSA9PT0gY2FsbGJhY2sua2V5KVxuICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgOiAoXCJcIiArIGNhbGxiYWNrLmtleSkucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCIkJi9cIlxuICAgICAgICAgICAgICAgICAgICAgICkgKyBcIi9cIikgK1xuICAgICAgICAgICAgICAgICAgY2hpbGRLZXlcbiAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAgIFwiXCIgIT09IG5hbWVTb0ZhciAmJlxuICAgICAgICAgICAgICAgIG51bGwgIT0gaW52b2tlQ2FsbGJhY2sgJiZcbiAgICAgICAgICAgICAgICBpc1ZhbGlkRWxlbWVudChpbnZva2VDYWxsYmFjaykgJiZcbiAgICAgICAgICAgICAgICBudWxsID09IGludm9rZUNhbGxiYWNrLmtleSAmJlxuICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrLl9zdG9yZSAmJlxuICAgICAgICAgICAgICAgICFpbnZva2VDYWxsYmFjay5fc3RvcmUudmFsaWRhdGVkICYmXG4gICAgICAgICAgICAgICAgKGVzY2FwZWRQcmVmaXguX3N0b3JlLnZhbGlkYXRlZCA9IDIpLFxuICAgICAgICAgICAgICAoY2FsbGJhY2sgPSBlc2NhcGVkUHJlZml4KSksXG4gICAgICAgICAgICBhcnJheS5wdXNoKGNhbGxiYWNrKSk7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaW52b2tlQ2FsbGJhY2sgPSAwO1xuICAgICAgY2hpbGRLZXkgPSBcIlwiID09PSBuYW1lU29GYXIgPyBcIi5cIiA6IG5hbWVTb0ZhciArIFwiOlwiO1xuICAgICAgaWYgKGlzQXJyYXlJbXBsKGNoaWxkcmVuKSlcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKylcbiAgICAgICAgICAobmFtZVNvRmFyID0gY2hpbGRyZW5baV0pLFxuICAgICAgICAgICAgKHR5cGUgPSBjaGlsZEtleSArIGdldEVsZW1lbnRLZXkobmFtZVNvRmFyLCBpKSksXG4gICAgICAgICAgICAoaW52b2tlQ2FsbGJhY2sgKz0gbWFwSW50b0FycmF5KFxuICAgICAgICAgICAgICBuYW1lU29GYXIsXG4gICAgICAgICAgICAgIGFycmF5LFxuICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgKSk7XG4gICAgICBlbHNlIGlmICgoKGkgPSBnZXRJdGVyYXRvckZuKGNoaWxkcmVuKSksIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGkpKVxuICAgICAgICBmb3IgKFxuICAgICAgICAgIGkgPT09IGNoaWxkcmVuLmVudHJpZXMgJiZcbiAgICAgICAgICAgIChkaWRXYXJuQWJvdXRNYXBzIHx8XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICBcIlVzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHN1cHBvcnRlZC4gVXNlIGFuIGFycmF5IG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC5cIlxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKGRpZFdhcm5BYm91dE1hcHMgPSAhMCkpLFxuICAgICAgICAgICAgY2hpbGRyZW4gPSBpLmNhbGwoY2hpbGRyZW4pLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgIShuYW1lU29GYXIgPSBjaGlsZHJlbi5uZXh0KCkpLmRvbmU7XG5cbiAgICAgICAgKVxuICAgICAgICAgIChuYW1lU29GYXIgPSBuYW1lU29GYXIudmFsdWUpLFxuICAgICAgICAgICAgKHR5cGUgPSBjaGlsZEtleSArIGdldEVsZW1lbnRLZXkobmFtZVNvRmFyLCBpKyspKSxcbiAgICAgICAgICAgIChpbnZva2VDYWxsYmFjayArPSBtYXBJbnRvQXJyYXkoXG4gICAgICAgICAgICAgIG5hbWVTb0ZhcixcbiAgICAgICAgICAgICAgYXJyYXksXG4gICAgICAgICAgICAgIGVzY2FwZWRQcmVmaXgsXG4gICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICApKTtcbiAgICAgIGVsc2UgaWYgKFwib2JqZWN0XCIgPT09IHR5cGUpIHtcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGNoaWxkcmVuLnRoZW4pXG4gICAgICAgICAgcmV0dXJuIG1hcEludG9BcnJheShcbiAgICAgICAgICAgIHJlc29sdmVUaGVuYWJsZShjaGlsZHJlbiksXG4gICAgICAgICAgICBhcnJheSxcbiAgICAgICAgICAgIGVzY2FwZWRQcmVmaXgsXG4gICAgICAgICAgICBuYW1lU29GYXIsXG4gICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICk7XG4gICAgICAgIGFycmF5ID0gU3RyaW5nKGNoaWxkcmVuKTtcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6IFwiICtcbiAgICAgICAgICAgIChcIltvYmplY3QgT2JqZWN0XVwiID09PSBhcnJheVxuICAgICAgICAgICAgICA/IFwib2JqZWN0IHdpdGgga2V5cyB7XCIgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbihcIiwgXCIpICsgXCJ9XCJcbiAgICAgICAgICAgICAgOiBhcnJheSkgK1xuICAgICAgICAgICAgXCIpLiBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5IGluc3RlYWQuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjaztcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHtcbiAgICAgIGlmIChudWxsID09IGNoaWxkcmVuKSByZXR1cm4gY2hpbGRyZW47XG4gICAgICB2YXIgcmVzdWx0ID0gW10sXG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgIG1hcEludG9BcnJheShjaGlsZHJlbiwgcmVzdWx0LCBcIlwiLCBcIlwiLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgY291bnQrKyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxhenlJbml0aWFsaXplcihwYXlsb2FkKSB7XG4gICAgICBpZiAoLTEgPT09IHBheWxvYWQuX3N0YXR1cykge1xuICAgICAgICB2YXIgY3RvciA9IHBheWxvYWQuX3Jlc3VsdDtcbiAgICAgICAgY3RvciA9IGN0b3IoKTtcbiAgICAgICAgY3Rvci50aGVuKFxuICAgICAgICAgIGZ1bmN0aW9uIChtb2R1bGVPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cylcbiAgICAgICAgICAgICAgKHBheWxvYWQuX3N0YXR1cyA9IDEpLCAocGF5bG9hZC5fcmVzdWx0ID0gbW9kdWxlT2JqZWN0KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKDAgPT09IHBheWxvYWQuX3N0YXR1cyB8fCAtMSA9PT0gcGF5bG9hZC5fc3RhdHVzKVxuICAgICAgICAgICAgICAocGF5bG9hZC5fc3RhdHVzID0gMiksIChwYXlsb2FkLl9yZXN1bHQgPSBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICAtMSA9PT0gcGF5bG9hZC5fc3RhdHVzICYmXG4gICAgICAgICAgKChwYXlsb2FkLl9zdGF0dXMgPSAwKSwgKHBheWxvYWQuX3Jlc3VsdCA9IGN0b3IpKTtcbiAgICAgIH1cbiAgICAgIGlmICgxID09PSBwYXlsb2FkLl9zdGF0dXMpXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgKGN0b3IgPSBwYXlsb2FkLl9yZXN1bHQpLFxuICAgICAgICAgIHZvaWQgMCA9PT0gY3RvciAmJlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJsYXp5OiBFeHBlY3RlZCB0aGUgcmVzdWx0IG9mIGEgZHluYW1pYyBpbXBvcnQoKSBjYWxsLiBJbnN0ZWFkIHJlY2VpdmVkOiAlc1xcblxcbllvdXIgY29kZSBzaG91bGQgbG9vayBsaWtlOiBcXG4gIGNvbnN0IE15Q29tcG9uZW50ID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vTXlDb21wb25lbnQnKSlcXG5cXG5EaWQgeW91IGFjY2lkZW50YWxseSBwdXQgY3VybHkgYnJhY2VzIGFyb3VuZCB0aGUgaW1wb3J0P1wiLFxuICAgICAgICAgICAgICBjdG9yXG4gICAgICAgICAgICApLFxuICAgICAgICAgIFwiZGVmYXVsdFwiIGluIGN0b3IgfHxcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwibGF6eTogRXhwZWN0ZWQgdGhlIHJlc3VsdCBvZiBhIGR5bmFtaWMgaW1wb3J0KCkgY2FsbC4gSW5zdGVhZCByZWNlaXZlZDogJXNcXG5cXG5Zb3VyIGNvZGUgc2hvdWxkIGxvb2sgbGlrZTogXFxuICBjb25zdCBNeUNvbXBvbmVudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL015Q29tcG9uZW50JykpXCIsXG4gICAgICAgICAgICAgIGN0b3JcbiAgICAgICAgICAgICksXG4gICAgICAgICAgY3Rvci5kZWZhdWx0XG4gICAgICAgICk7XG4gICAgICB0aHJvdyBwYXlsb2FkLl9yZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc29sdmVEaXNwYXRjaGVyKCkge1xuICAgICAgdmFyIGRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IO1xuICAgICAgbnVsbCA9PT0gZGlzcGF0Y2hlciAmJlxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiSW52YWxpZCBob29rIGNhbGwuIEhvb2tzIGNhbiBvbmx5IGJlIGNhbGxlZCBpbnNpZGUgb2YgdGhlIGJvZHkgb2YgYSBmdW5jdGlvbiBjb21wb25lbnQuIFRoaXMgY291bGQgaGFwcGVuIGZvciBvbmUgb2YgdGhlIGZvbGxvd2luZyByZWFzb25zOlxcbjEuIFlvdSBtaWdodCBoYXZlIG1pc21hdGNoaW5nIHZlcnNpb25zIG9mIFJlYWN0IGFuZCB0aGUgcmVuZGVyZXIgKHN1Y2ggYXMgUmVhY3QgRE9NKVxcbjIuIFlvdSBtaWdodCBiZSBicmVha2luZyB0aGUgUnVsZXMgb2YgSG9va3NcXG4zLiBZb3UgbWlnaHQgaGF2ZSBtb3JlIHRoYW4gb25lIGNvcHkgb2YgUmVhY3QgaW4gdGhlIHNhbWUgYXBwXFxuU2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvaW52YWxpZC1ob29rLWNhbGwgZm9yIHRpcHMgYWJvdXQgaG93IHRvIGRlYnVnIGFuZCBmaXggdGhpcyBwcm9ibGVtLlwiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hlcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm9vcCgpIHt9XG4gICAgZnVuY3Rpb24gZW5xdWV1ZVRhc2sodGFzaykge1xuICAgICAgaWYgKG51bGwgPT09IGVucXVldWVUYXNrSW1wbClcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgcmVxdWlyZVN0cmluZyA9IChcInJlcXVpcmVcIiArIE1hdGgucmFuZG9tKCkpLnNsaWNlKDAsIDcpO1xuICAgICAgICAgIGVucXVldWVUYXNrSW1wbCA9IChtb2R1bGUgJiYgbW9kdWxlW3JlcXVpcmVTdHJpbmddKS5jYWxsKFxuICAgICAgICAgICAgbW9kdWxlLFxuICAgICAgICAgICAgXCJ0aW1lcnNcIlxuICAgICAgICAgICkuc2V0SW1tZWRpYXRlO1xuICAgICAgICB9IGNhdGNoIChfZXJyKSB7XG4gICAgICAgICAgZW5xdWV1ZVRhc2tJbXBsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAhMSA9PT0gZGlkV2FybkFib3V0TWVzc2FnZUNoYW5uZWwgJiZcbiAgICAgICAgICAgICAgKChkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCA9ICEwKSxcbiAgICAgICAgICAgICAgXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIE1lc3NhZ2VDaGFubmVsICYmXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAgIFwiVGhpcyBicm93c2VyIGRvZXMgbm90IGhhdmUgYSBNZXNzYWdlQ2hhbm5lbCBpbXBsZW1lbnRhdGlvbiwgc28gZW5xdWV1aW5nIHRhc2tzIHZpYSBhd2FpdCBhY3QoYXN5bmMgKCkgPT4gLi4uKSB3aWxsIGZhaWwuIFBsZWFzZSBmaWxlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMgaWYgeW91IGVuY291bnRlciB0aGlzIHdhcm5pbmcuXCJcbiAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSh2b2lkIDApO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIHJldHVybiBlbnF1ZXVlVGFza0ltcGwodGFzayk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFnZ3JlZ2F0ZUVycm9ycyhlcnJvcnMpIHtcbiAgICAgIHJldHVybiAxIDwgZXJyb3JzLmxlbmd0aCAmJiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBBZ2dyZWdhdGVFcnJvclxuICAgICAgICA/IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpXG4gICAgICAgIDogZXJyb3JzWzBdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3BBY3RTY29wZShwcmV2QWN0UXVldWUsIHByZXZBY3RTY29wZURlcHRoKSB7XG4gICAgICBwcmV2QWN0U2NvcGVEZXB0aCAhPT0gYWN0U2NvcGVEZXB0aCAtIDEgJiZcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIllvdSBzZWVtIHRvIGhhdmUgb3ZlcmxhcHBpbmcgYWN0KCkgY2FsbHMsIHRoaXMgaXMgbm90IHN1cHBvcnRlZC4gQmUgc3VyZSB0byBhd2FpdCBwcmV2aW91cyBhY3QoKSBjYWxscyBiZWZvcmUgbWFraW5nIGEgbmV3IG9uZS4gXCJcbiAgICAgICAgKTtcbiAgICAgIGFjdFNjb3BlRGVwdGggPSBwcmV2QWN0U2NvcGVEZXB0aDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhyZXR1cm5WYWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcXVldWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZTtcbiAgICAgIGlmIChudWxsICE9PSBxdWV1ZSlcbiAgICAgICAgaWYgKDAgIT09IHF1ZXVlLmxlbmd0aClcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmx1c2hBY3RRdWV1ZShxdWV1ZSk7XG4gICAgICAgICAgICBlbnF1ZXVlVGFzayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVseUZsdXNoQXN5bmNBY3RXb3JrKHJldHVyblZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIGVsc2UgUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPSBudWxsO1xuICAgICAgMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGhcbiAgICAgICAgPyAoKHF1ZXVlID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycykpLFxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgcmVqZWN0KHF1ZXVlKSlcbiAgICAgICAgOiByZXNvbHZlKHJldHVyblZhbHVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmx1c2hBY3RRdWV1ZShxdWV1ZSkge1xuICAgICAgaWYgKCFpc0ZsdXNoaW5nKSB7XG4gICAgICAgIGlzRmx1c2hpbmcgPSAhMDtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAoOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5kaWRVc2VQcm9taXNlID0gITE7XG4gICAgICAgICAgICAgIHZhciBjb250aW51YXRpb24gPSBjYWxsYmFjayghMSk7XG4gICAgICAgICAgICAgIGlmIChudWxsICE9PSBjb250aW51YXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuZGlkVXNlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgcXVldWVbaV0gPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgIHF1ZXVlLnNwbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjb250aW51YXRpb247XG4gICAgICAgICAgICAgIH0gZWxzZSBicmVhaztcbiAgICAgICAgICAgIH0gd2hpbGUgKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHF1ZXVlLnNwbGljZSgwLCBpICsgMSksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpc0ZsdXNoaW5nID0gITE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJlxuICAgICAgXCJmdW5jdGlvblwiID09PVxuICAgICAgICB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydCAmJlxuICAgICAgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydChFcnJvcigpKTtcbiAgICB2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnRyYW5zaXRpb25hbC5lbGVtZW50XCIpLFxuICAgICAgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QucG9ydGFsXCIpLFxuICAgICAgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKSxcbiAgICAgIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3RyaWN0X21vZGVcIiksXG4gICAgICBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnByb2ZpbGVyXCIpO1xuICAgIFN5bWJvbC5mb3IoXCJyZWFjdC5wcm92aWRlclwiKTtcbiAgICB2YXIgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb25zdW1lclwiKSxcbiAgICAgIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb250ZXh0XCIpLFxuICAgICAgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKSxcbiAgICAgIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VfbGlzdFwiKSxcbiAgICAgIFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpLFxuICAgICAgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmxhenlcIiksXG4gICAgICBSRUFDVF9BQ1RJVklUWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmFjdGl2aXR5XCIpLFxuICAgICAgTUFZQkVfSVRFUkFUT1JfU1lNQk9MID0gU3ltYm9sLml0ZXJhdG9yLFxuICAgICAgZGlkV2FyblN0YXRlVXBkYXRlRm9yVW5tb3VudGVkQ29tcG9uZW50ID0ge30sXG4gICAgICBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHtcbiAgICAgICAgaXNNb3VudGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9LFxuICAgICAgICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgICAgICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBcImZvcmNlVXBkYXRlXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICAgICAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgXCJyZXBsYWNlU3RhdGVcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgICAgICAgd2Fybk5vb3AocHVibGljSW5zdGFuY2UsIFwic2V0U3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3NpZ24gPSBPYmplY3QuYXNzaWduLFxuICAgICAgZW1wdHlPYmplY3QgPSB7fTtcbiAgICBPYmplY3QuZnJlZXplKGVtcHR5T2JqZWN0KTtcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTtcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHBhcnRpYWxTdGF0ZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChcbiAgICAgICAgXCJvYmplY3RcIiAhPT0gdHlwZW9mIHBhcnRpYWxTdGF0ZSAmJlxuICAgICAgICBcImZ1bmN0aW9uXCIgIT09IHR5cGVvZiBwYXJ0aWFsU3RhdGUgJiZcbiAgICAgICAgbnVsbCAhPSBwYXJ0aWFsU3RhdGVcbiAgICAgIClcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJ0YWtlcyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzIHRvIHVwZGF0ZSBvciBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IG9mIHN0YXRlIHZhcmlhYmxlcy5cIlxuICAgICAgICApO1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLCBwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrLCBcInNldFN0YXRlXCIpO1xuICAgIH07XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzLCBjYWxsYmFjaywgXCJmb3JjZVVwZGF0ZVwiKTtcbiAgICB9O1xuICAgIHZhciBkZXByZWNhdGVkQVBJcyA9IHtcbiAgICAgICAgaXNNb3VudGVkOiBbXG4gICAgICAgICAgXCJpc01vdW50ZWRcIixcbiAgICAgICAgICBcIkluc3RlYWQsIG1ha2Ugc3VyZSB0byBjbGVhbiB1cCBzdWJzY3JpcHRpb25zIGFuZCBwZW5kaW5nIHJlcXVlc3RzIGluIGNvbXBvbmVudFdpbGxVbm1vdW50IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLlwiXG4gICAgICAgIF0sXG4gICAgICAgIHJlcGxhY2VTdGF0ZTogW1xuICAgICAgICAgIFwicmVwbGFjZVN0YXRlXCIsXG4gICAgICAgICAgXCJSZWZhY3RvciB5b3VyIGNvZGUgdG8gdXNlIHNldFN0YXRlIGluc3RlYWQgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzMyMzYpLlwiXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBmbk5hbWU7XG4gICAgZm9yIChmbk5hbWUgaW4gZGVwcmVjYXRlZEFQSXMpXG4gICAgICBkZXByZWNhdGVkQVBJcy5oYXNPd25Qcm9wZXJ0eShmbk5hbWUpICYmXG4gICAgICAgIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyhmbk5hbWUsIGRlcHJlY2F0ZWRBUElzW2ZuTmFtZV0pO1xuICAgIENvbXBvbmVudER1bW15LnByb3RvdHlwZSA9IENvbXBvbmVudC5wcm90b3R5cGU7XG4gICAgZGVwcmVjYXRlZEFQSXMgPSBQdXJlQ29tcG9uZW50LnByb3RvdHlwZSA9IG5ldyBDb21wb25lbnREdW1teSgpO1xuICAgIGRlcHJlY2F0ZWRBUElzLmNvbnN0cnVjdG9yID0gUHVyZUNvbXBvbmVudDtcbiAgICBhc3NpZ24oZGVwcmVjYXRlZEFQSXMsIENvbXBvbmVudC5wcm90b3R5cGUpO1xuICAgIGRlcHJlY2F0ZWRBUElzLmlzUHVyZVJlYWN0Q29tcG9uZW50ID0gITA7XG4gICAgdmFyIGlzQXJyYXlJbXBsID0gQXJyYXkuaXNBcnJheSxcbiAgICAgIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKFwicmVhY3QuY2xpZW50LnJlZmVyZW5jZVwiKSxcbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzID0ge1xuICAgICAgICBIOiBudWxsLFxuICAgICAgICBBOiBudWxsLFxuICAgICAgICBUOiBudWxsLFxuICAgICAgICBTOiBudWxsLFxuICAgICAgICBWOiBudWxsLFxuICAgICAgICBhY3RRdWV1ZTogbnVsbCxcbiAgICAgICAgaXNCYXRjaGluZ0xlZ2FjeTogITEsXG4gICAgICAgIGRpZFNjaGVkdWxlTGVnYWN5VXBkYXRlOiAhMSxcbiAgICAgICAgZGlkVXNlUHJvbWlzZTogITEsXG4gICAgICAgIHRocm93bkVycm9yczogW10sXG4gICAgICAgIGdldEN1cnJlbnRTdGFjazogbnVsbCxcbiAgICAgICAgcmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3M6IDBcbiAgICAgIH0sXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICBjcmVhdGVUYXNrID0gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgID8gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICBkZXByZWNhdGVkQVBJcyA9IHtcbiAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24gKGNhbGxTdGFja0ZvckVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsU3RhY2tGb3JFcnJvcigpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duLCBkaWRXYXJuQWJvdXRPbGRKU1hSdW50aW1lO1xuICAgIHZhciBkaWRXYXJuQWJvdXRFbGVtZW50UmVmID0ge307XG4gICAgdmFyIHVua25vd25Pd25lckRlYnVnU3RhY2sgPSBkZXByZWNhdGVkQVBJcy5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZChcbiAgICAgIGRlcHJlY2F0ZWRBUElzLFxuICAgICAgVW5rbm93bk93bmVyXG4gICAgKSgpO1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1Rhc2sgPSBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKFVua25vd25Pd25lcikpO1xuICAgIHZhciBkaWRXYXJuQWJvdXRNYXBzID0gITEsXG4gICAgICB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCA9IC9cXC8rL2csXG4gICAgICByZXBvcnRHbG9iYWxFcnJvciA9XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHJlcG9ydEVycm9yXG4gICAgICAgICAgPyByZXBvcnRFcnJvclxuICAgICAgICAgIDogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2Ygd2luZG93ICYmXG4gICAgICAgICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygd2luZG93LkVycm9yRXZlbnRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IHdpbmRvdy5FcnJvckV2ZW50KFwiZXJyb3JcIiwge1xuICAgICAgICAgICAgICAgICAgYnViYmxlczogITAsXG4gICAgICAgICAgICAgICAgICBjYW5jZWxhYmxlOiAhMCxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiBlcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBlcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiID09PSB0eXBlb2YgZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgID8gU3RyaW5nKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCkpIHJldHVybjtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBcIm9iamVjdFwiID09PSB0eXBlb2YgcHJvY2VzcyAmJlxuICAgICAgICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHByb2Nlc3MuZW1pdFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgIGRpZFdhcm5BYm91dE1lc3NhZ2VDaGFubmVsID0gITEsXG4gICAgICBlbnF1ZXVlVGFza0ltcGwgPSBudWxsLFxuICAgICAgYWN0U2NvcGVEZXB0aCA9IDAsXG4gICAgICBkaWRXYXJuTm9Bd2FpdEFjdCA9ICExLFxuICAgICAgaXNGbHVzaGluZyA9ICExLFxuICAgICAgcXVldWVTZXZlcmFsTWljcm90YXNrcyA9XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHF1ZXVlTWljcm90YXNrXG4gICAgICAgICAgPyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBxdWV1ZU1pY3JvdGFzayhjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIDogZW5xdWV1ZVRhc2s7XG4gICAgZGVwcmVjYXRlZEFQSXMgPSBPYmplY3QuZnJlZXplKHtcbiAgICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAgIGM6IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZU1lbW9DYWNoZShzaXplKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBleHBvcnRzLkNoaWxkcmVuID0ge1xuICAgICAgbWFwOiBtYXBDaGlsZHJlbixcbiAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIChjaGlsZHJlbiwgZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KSB7XG4gICAgICAgIG1hcENoaWxkcmVuKFxuICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvckVhY2hGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JFYWNoQ29udGV4dFxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIGNvdW50OiBmdW5jdGlvbiAoY2hpbGRyZW4pIHtcbiAgICAgICAgdmFyIG4gPSAwO1xuICAgICAgICBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG4rKztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgICAgfSxcbiAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIChjaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICB9KSB8fCBbXVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIG9ubHk6IGZ1bmN0aW9uIChjaGlsZHJlbikge1xuICAgICAgICBpZiAoIWlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSlcbiAgICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICAgIFwiUmVhY3QuQ2hpbGRyZW4ub25seSBleHBlY3RlZCB0byByZWNlaXZlIGEgc2luZ2xlIFJlYWN0IGVsZW1lbnQgY2hpbGQuXCJcbiAgICAgICAgICApO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLlByb2ZpbGVyID0gUkVBQ1RfUFJPRklMRVJfVFlQRTtcbiAgICBleHBvcnRzLlB1cmVDb21wb25lbnQgPSBQdXJlQ29tcG9uZW50O1xuICAgIGV4cG9ydHMuU3RyaWN0TW9kZSA9IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7XG4gICAgZXhwb3J0cy5TdXNwZW5zZSA9IFJFQUNUX1NVU1BFTlNFX1RZUEU7XG4gICAgZXhwb3J0cy5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREUgPVxuICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHM7XG4gICAgZXhwb3J0cy5fX0NPTVBJTEVSX1JVTlRJTUUgPSBkZXByZWNhdGVkQVBJcztcbiAgICBleHBvcnRzLmFjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIHByZXZBY3RRdWV1ZSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlLFxuICAgICAgICBwcmV2QWN0U2NvcGVEZXB0aCA9IGFjdFNjb3BlRGVwdGg7XG4gICAgICBhY3RTY29wZURlcHRoKys7XG4gICAgICB2YXIgcXVldWUgPSAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPVxuICAgICAgICAgIG51bGwgIT09IHByZXZBY3RRdWV1ZSA/IHByZXZBY3RRdWV1ZSA6IFtdKSxcbiAgICAgICAgZGlkQXdhaXRBY3RDYWxsID0gITE7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGlmICgwIDwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aClcbiAgICAgICAgdGhyb3cgKFxuICAgICAgICAgIChwb3BBY3RTY29wZShwcmV2QWN0UXVldWUsIHByZXZBY3RTY29wZURlcHRoKSxcbiAgICAgICAgICAoY2FsbGJhY2sgPSBhZ2dyZWdhdGVFcnJvcnMoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzKSksXG4gICAgICAgICAgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwKSxcbiAgICAgICAgICBjYWxsYmFjaylcbiAgICAgICAgKTtcbiAgICAgIGlmIChcbiAgICAgICAgbnVsbCAhPT0gcmVzdWx0ICYmXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiByZXN1bHQgJiZcbiAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmVzdWx0LnRoZW5cbiAgICAgICkge1xuICAgICAgICB2YXIgdGhlbmFibGUgPSByZXN1bHQ7XG4gICAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCB8fFxuICAgICAgICAgICAgZGlkV2Fybk5vQXdhaXRBY3QgfHxcbiAgICAgICAgICAgICgoZGlkV2Fybk5vQXdhaXRBY3QgPSAhMCksXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIllvdSBjYWxsZWQgYWN0KGFzeW5jICgpID0+IC4uLikgd2l0aG91dCBhd2FpdC4gVGhpcyBjb3VsZCBsZWFkIHRvIHVuZXhwZWN0ZWQgdGVzdGluZyBiZWhhdmlvdXIsIGludGVybGVhdmluZyBtdWx0aXBsZSBhY3QgY2FsbHMgYW5kIG1peGluZyB0aGVpciBzY29wZXMuIFlvdSBzaG91bGQgLSBhd2FpdCBhY3QoYXN5bmMgKCkgPT4gLi4uKTtcIlxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9ICEwO1xuICAgICAgICAgICAgdGhlbmFibGUudGhlbihcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKHJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHByZXZBY3RTY29wZURlcHRoKSB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmbHVzaEFjdFF1ZXVlKHF1ZXVlKSxcbiAgICAgICAgICAgICAgICAgICAgICBlbnF1ZXVlVGFzayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yJDApIHtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLnB1c2goZXJyb3IkMCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aHJvd25FcnJvciA9IGFnZ3JlZ2F0ZUVycm9ycyhcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfdGhyb3duRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAgICAgICAgICAgMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgID8gKChlcnJvciA9IGFnZ3JlZ2F0ZUVycm9ycyhcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcikpXG4gICAgICAgICAgICAgICAgICA6IHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdmFyIHJldHVyblZhbHVlJGpzY29tcCQwID0gcmVzdWx0O1xuICAgICAgcG9wQWN0U2NvcGUocHJldkFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCk7XG4gICAgICAwID09PSBwcmV2QWN0U2NvcGVEZXB0aCAmJlxuICAgICAgICAoZmx1c2hBY3RRdWV1ZShxdWV1ZSksXG4gICAgICAgIDAgIT09IHF1ZXVlLmxlbmd0aCAmJlxuICAgICAgICAgIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlkQXdhaXRBY3RDYWxsIHx8XG4gICAgICAgICAgICAgIGRpZFdhcm5Ob0F3YWl0QWN0IHx8XG4gICAgICAgICAgICAgICgoZGlkV2Fybk5vQXdhaXRBY3QgPSAhMCksXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgXCJBIGNvbXBvbmVudCBzdXNwZW5kZWQgaW5zaWRlIGFuIGBhY3RgIHNjb3BlLCBidXQgdGhlIGBhY3RgIGNhbGwgd2FzIG5vdCBhd2FpdGVkLiBXaGVuIHRlc3RpbmcgUmVhY3QgY29tcG9uZW50cyB0aGF0IGRlcGVuZCBvbiBhc3luY2hyb25vdXMgZGF0YSwgeW91IG11c3QgYXdhaXQgdGhlIHJlc3VsdDpcXG5cXG5hd2FpdCBhY3QoKCkgPT4gLi4uKVwiXG4gICAgICAgICAgICAgICkpO1xuICAgICAgICAgIH0pLFxuICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPSBudWxsKSk7XG4gICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpXG4gICAgICAgIHRocm93IChcbiAgICAgICAgICAoKGNhbGxiYWNrID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycykpLFxuICAgICAgICAgIChSZWFjdFNoYXJlZEludGVybmFscy50aHJvd25FcnJvcnMubGVuZ3RoID0gMCksXG4gICAgICAgICAgY2FsbGJhY2spXG4gICAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aGVuOiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgZGlkQXdhaXRBY3RDYWxsID0gITA7XG4gICAgICAgICAgMCA9PT0gcHJldkFjdFNjb3BlRGVwdGhcbiAgICAgICAgICAgID8gKChSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSA9IHF1ZXVlKSxcbiAgICAgICAgICAgICAgZW5xdWV1ZVRhc2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVseUZsdXNoQXN5bmNBY3RXb3JrKFxuICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUkanNjb21wJDAsXG4gICAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgcmVqZWN0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICA6IHJlc29sdmUocmV0dXJuVmFsdWUkanNjb21wJDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5jYWNoZSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH07XG4gICAgZXhwb3J0cy5jYXB0dXJlT3duZXJTdGFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnZXRDdXJyZW50U3RhY2sgPSBSZWFjdFNoYXJlZEludGVybmFscy5nZXRDdXJyZW50U3RhY2s7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZ2V0Q3VycmVudFN0YWNrID8gbnVsbCA6IGdldEN1cnJlbnRTdGFjaygpO1xuICAgIH07XG4gICAgZXhwb3J0cy5jbG9uZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnLCBjaGlsZHJlbikge1xuICAgICAgaWYgKG51bGwgPT09IGVsZW1lbnQgfHwgdm9pZCAwID09PSBlbGVtZW50KVxuICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICBcIlRoZSBhcmd1bWVudCBtdXN0IGJlIGEgUmVhY3QgZWxlbWVudCwgYnV0IHlvdSBwYXNzZWQgXCIgK1xuICAgICAgICAgICAgZWxlbWVudCArXG4gICAgICAgICAgICBcIi5cIlxuICAgICAgICApO1xuICAgICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzKSxcbiAgICAgICAga2V5ID0gZWxlbWVudC5rZXksXG4gICAgICAgIG93bmVyID0gZWxlbWVudC5fb3duZXI7XG4gICAgICBpZiAobnVsbCAhPSBjb25maWcpIHtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDtcbiAgICAgICAgYToge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcInJlZlwiKSAmJlxuICAgICAgICAgICAgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgXCJyZWZcIlxuICAgICAgICAgICAgKS5nZXQpICYmXG4gICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQuaXNSZWFjdFdhcm5pbmdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgICAgICAgYnJlYWsgYTtcbiAgICAgICAgICB9XG4gICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gdm9pZCAwICE9PSBjb25maWcucmVmO1xuICAgICAgICB9XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCAmJiAob3duZXIgPSBnZXRPd25lcigpKTtcbiAgICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAgIChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGNvbmZpZy5rZXkpLCAoa2V5ID0gXCJcIiArIGNvbmZpZy5rZXkpKTtcbiAgICAgICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpXG4gICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgfHxcbiAgICAgICAgICAgIFwia2V5XCIgPT09IHByb3BOYW1lIHx8XG4gICAgICAgICAgICBcIl9fc2VsZlwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgXCJfX3NvdXJjZVwiID09PSBwcm9wTmFtZSB8fFxuICAgICAgICAgICAgKFwicmVmXCIgPT09IHByb3BOYW1lICYmIHZvaWQgMCA9PT0gY29uZmlnLnJlZikgfHxcbiAgICAgICAgICAgIChwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgICAgaWYgKDEgPT09IHByb3BOYW1lKSBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgZWxzZSBpZiAoMSA8IHByb3BOYW1lKSB7XG4gICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IEFycmF5KHByb3BOYW1lKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTmFtZTsgaSsrKVxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdFtpXSA9IGFyZ3VtZW50c1tpICsgMl07XG4gICAgICAgIHByb3BzLmNoaWxkcmVuID0gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0O1xuICAgICAgfVxuICAgICAgcHJvcHMgPSBSZWFjdEVsZW1lbnQoXG4gICAgICAgIGVsZW1lbnQudHlwZSxcbiAgICAgICAga2V5LFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgb3duZXIsXG4gICAgICAgIHByb3BzLFxuICAgICAgICBlbGVtZW50Ll9kZWJ1Z1N0YWNrLFxuICAgICAgICBlbGVtZW50Ll9kZWJ1Z1Rhc2tcbiAgICAgICk7XG4gICAgICBmb3IgKGtleSA9IDI7IGtleSA8IGFyZ3VtZW50cy5sZW5ndGg7IGtleSsrKVxuICAgICAgICAob3duZXIgPSBhcmd1bWVudHNba2V5XSksXG4gICAgICAgICAgaXNWYWxpZEVsZW1lbnQob3duZXIpICYmIG93bmVyLl9zdG9yZSAmJiAob3duZXIuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG4gICAgZXhwb3J0cy5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24gKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgZGVmYXVsdFZhbHVlID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OVEVYVF9UWVBFLFxuICAgICAgICBfY3VycmVudFZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgIF9jdXJyZW50VmFsdWUyOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgIF90aHJlYWRDb3VudDogMCxcbiAgICAgICAgUHJvdmlkZXI6IG51bGwsXG4gICAgICAgIENvbnN1bWVyOiBudWxsXG4gICAgICB9O1xuICAgICAgZGVmYXVsdFZhbHVlLlByb3ZpZGVyID0gZGVmYXVsdFZhbHVlO1xuICAgICAgZGVmYXVsdFZhbHVlLkNvbnN1bWVyID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OU1VNRVJfVFlQRSxcbiAgICAgICAgX2NvbnRleHQ6IGRlZmF1bHRWYWx1ZVxuICAgICAgfTtcbiAgICAgIGRlZmF1bHRWYWx1ZS5fY3VycmVudFJlbmRlcmVyID0gbnVsbDtcbiAgICAgIGRlZmF1bHRWYWx1ZS5fY3VycmVudFJlbmRlcmVyMiA9IG51bGw7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH07XG4gICAgZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBpc1ZhbGlkRWxlbWVudChub2RlKSAmJiBub2RlLl9zdG9yZSAmJiAobm9kZS5fc3RvcmUudmFsaWRhdGVkID0gMSk7XG4gICAgICB9XG4gICAgICBpID0ge307XG4gICAgICBub2RlID0gbnVsbDtcbiAgICAgIGlmIChudWxsICE9IGNvbmZpZylcbiAgICAgICAgZm9yIChwcm9wTmFtZSBpbiAoZGlkV2FybkFib3V0T2xkSlNYUnVudGltZSB8fFxuICAgICAgICAgICEoXCJfX3NlbGZcIiBpbiBjb25maWcpIHx8XG4gICAgICAgICAgXCJrZXlcIiBpbiBjb25maWcgfHxcbiAgICAgICAgICAoKGRpZFdhcm5BYm91dE9sZEpTWFJ1bnRpbWUgPSAhMCksXG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJZb3VyIGFwcCAob3Igb25lIG9mIGl0cyBkZXBlbmRlbmNpZXMpIGlzIHVzaW5nIGFuIG91dGRhdGVkIEpTWCB0cmFuc2Zvcm0uIFVwZGF0ZSB0byB0aGUgbW9kZXJuIEpTWCB0cmFuc2Zvcm0gZm9yIGZhc3RlciBwZXJmb3JtYW5jZTogaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9uZXctanN4LXRyYW5zZm9ybVwiXG4gICAgICAgICAgKSksXG4gICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiZcbiAgICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKG5vZGUgPSBcIlwiICsgY29uZmlnLmtleSkpLFxuICAgICAgICBjb25maWcpKVxuICAgICAgICAgIGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgJiZcbiAgICAgICAgICAgIFwia2V5XCIgIT09IHByb3BOYW1lICYmXG4gICAgICAgICAgICBcIl9fc2VsZlwiICE9PSBwcm9wTmFtZSAmJlxuICAgICAgICAgICAgXCJfX3NvdXJjZVwiICE9PSBwcm9wTmFtZSAmJlxuICAgICAgICAgICAgKGlbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXSk7XG4gICAgICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgICAgIGlmICgxID09PSBjaGlsZHJlbkxlbmd0aCkgaS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgZWxzZSBpZiAoMSA8IGNoaWxkcmVuTGVuZ3RoKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgdmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCksIF9pID0gMDtcbiAgICAgICAgICBfaSA8IGNoaWxkcmVuTGVuZ3RoO1xuICAgICAgICAgIF9pKytcbiAgICAgICAgKVxuICAgICAgICAgIGNoaWxkQXJyYXlbX2ldID0gYXJndW1lbnRzW19pICsgMl07XG4gICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShjaGlsZEFycmF5KTtcbiAgICAgICAgaS5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSAmJiB0eXBlLmRlZmF1bHRQcm9wcylcbiAgICAgICAgZm9yIChwcm9wTmFtZSBpbiAoKGNoaWxkcmVuTGVuZ3RoID0gdHlwZS5kZWZhdWx0UHJvcHMpLCBjaGlsZHJlbkxlbmd0aCkpXG4gICAgICAgICAgdm9pZCAwID09PSBpW3Byb3BOYW1lXSAmJiAoaVtwcm9wTmFtZV0gPSBjaGlsZHJlbkxlbmd0aFtwcm9wTmFtZV0pO1xuICAgICAgbm9kZSAmJlxuICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihcbiAgICAgICAgICBpLFxuICAgICAgICAgIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGVcbiAgICAgICAgICAgID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgXCJVbmtub3duXCJcbiAgICAgICAgICAgIDogdHlwZVxuICAgICAgICApO1xuICAgICAgdmFyIHByb3BOYW1lID0gMWU0ID4gUmVhY3RTaGFyZWRJbnRlcm5hbHMucmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3MrKztcbiAgICAgIHJldHVybiBSZWFjdEVsZW1lbnQoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIG5vZGUsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBnZXRPd25lcigpLFxuICAgICAgICBpLFxuICAgICAgICBwcm9wTmFtZSA/IEVycm9yKFwicmVhY3Qtc3RhY2stdG9wLWZyYW1lXCIpIDogdW5rbm93bk93bmVyRGVidWdTdGFjayxcbiAgICAgICAgcHJvcE5hbWUgPyBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKHR5cGUpKSA6IHVua25vd25Pd25lckRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9O1xuICAgIGV4cG9ydHMuY3JlYXRlUmVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlZk9iamVjdCA9IHsgY3VycmVudDogbnVsbCB9O1xuICAgICAgT2JqZWN0LnNlYWwocmVmT2JqZWN0KTtcbiAgICAgIHJldHVybiByZWZPYmplY3Q7XG4gICAgfTtcbiAgICBleHBvcnRzLmZvcndhcmRSZWYgPSBmdW5jdGlvbiAocmVuZGVyKSB7XG4gICAgICBudWxsICE9IHJlbmRlciAmJiByZW5kZXIuJCR0eXBlb2YgPT09IFJFQUNUX01FTU9fVFlQRVxuICAgICAgICA/IGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcImZvcndhcmRSZWYgcmVxdWlyZXMgYSByZW5kZXIgZnVuY3Rpb24gYnV0IHJlY2VpdmVkIGEgYG1lbW9gIGNvbXBvbmVudC4gSW5zdGVhZCBvZiBmb3J3YXJkUmVmKG1lbW8oLi4uKSksIHVzZSBtZW1vKGZvcndhcmRSZWYoLi4uKSkuXCJcbiAgICAgICAgICApXG4gICAgICAgIDogXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgcmVuZGVyXG4gICAgICAgICAgPyBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcImZvcndhcmRSZWYgcmVxdWlyZXMgYSByZW5kZXIgZnVuY3Rpb24gYnV0IHdhcyBnaXZlbiAlcy5cIixcbiAgICAgICAgICAgICAgbnVsbCA9PT0gcmVuZGVyID8gXCJudWxsXCIgOiB0eXBlb2YgcmVuZGVyXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiAwICE9PSByZW5kZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAyICE9PSByZW5kZXIubGVuZ3RoICYmXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcImZvcndhcmRSZWYgcmVuZGVyIGZ1bmN0aW9ucyBhY2NlcHQgZXhhY3RseSB0d28gcGFyYW1ldGVyczogcHJvcHMgYW5kIHJlZi4gJXNcIixcbiAgICAgICAgICAgICAgMSA9PT0gcmVuZGVyLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gXCJEaWQgeW91IGZvcmdldCB0byB1c2UgdGhlIHJlZiBwYXJhbWV0ZXI/XCJcbiAgICAgICAgICAgICAgICA6IFwiQW55IGFkZGl0aW9uYWwgcGFyYW1ldGVyIHdpbGwgYmUgdW5kZWZpbmVkLlwiXG4gICAgICAgICAgICApO1xuICAgICAgbnVsbCAhPSByZW5kZXIgJiZcbiAgICAgICAgbnVsbCAhPSByZW5kZXIuZGVmYXVsdFByb3BzICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJmb3J3YXJkUmVmIHJlbmRlciBmdW5jdGlvbnMgZG8gbm90IHN1cHBvcnQgZGVmYXVsdFByb3BzLiBEaWQgeW91IGFjY2lkZW50YWxseSBwYXNzIGEgUmVhY3QgY29tcG9uZW50P1wiXG4gICAgICAgICk7XG4gICAgICB2YXIgZWxlbWVudFR5cGUgPSB7ICQkdHlwZW9mOiBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFLCByZW5kZXI6IHJlbmRlciB9LFxuICAgICAgICBvd25OYW1lO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnRUeXBlLCBcImRpc3BsYXlOYW1lXCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBvd25OYW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgb3duTmFtZSA9IG5hbWU7XG4gICAgICAgICAgcmVuZGVyLm5hbWUgfHxcbiAgICAgICAgICAgIHJlbmRlci5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZW5kZXIsIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pLFxuICAgICAgICAgICAgKHJlbmRlci5kaXNwbGF5TmFtZSA9IG5hbWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZWxlbWVudFR5cGU7XG4gICAgfTtcbiAgICBleHBvcnRzLmlzVmFsaWRFbGVtZW50ID0gaXNWYWxpZEVsZW1lbnQ7XG4gICAgZXhwb3J0cy5sYXp5ID0gZnVuY3Rpb24gKGN0b3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9MQVpZX1RZUEUsXG4gICAgICAgIF9wYXlsb2FkOiB7IF9zdGF0dXM6IC0xLCBfcmVzdWx0OiBjdG9yIH0sXG4gICAgICAgIF9pbml0OiBsYXp5SW5pdGlhbGl6ZXJcbiAgICAgIH07XG4gICAgfTtcbiAgICBleHBvcnRzLm1lbW8gPSBmdW5jdGlvbiAodHlwZSwgY29tcGFyZSkge1xuICAgICAgbnVsbCA9PSB0eXBlICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJtZW1vOiBUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIGNvbXBvbmVudC4gSW5zdGVhZCByZWNlaXZlZDogJXNcIixcbiAgICAgICAgICBudWxsID09PSB0eXBlID8gXCJudWxsXCIgOiB0eXBlb2YgdHlwZVxuICAgICAgICApO1xuICAgICAgY29tcGFyZSA9IHtcbiAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX01FTU9fVFlQRSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgY29tcGFyZTogdm9pZCAwID09PSBjb21wYXJlID8gbnVsbCA6IGNvbXBhcmVcbiAgICAgIH07XG4gICAgICB2YXIgb3duTmFtZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21wYXJlLCBcImRpc3BsYXlOYW1lXCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBvd25OYW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgb3duTmFtZSA9IG5hbWU7XG4gICAgICAgICAgdHlwZS5uYW1lIHx8XG4gICAgICAgICAgICB0eXBlLmRpc3BsYXlOYW1lIHx8XG4gICAgICAgICAgICAoT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pLFxuICAgICAgICAgICAgKHR5cGUuZGlzcGxheU5hbWUgPSBuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbXBhcmU7XG4gICAgfTtcbiAgICBleHBvcnRzLnN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgdmFyIHByZXZUcmFuc2l0aW9uID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCxcbiAgICAgICAgY3VycmVudFRyYW5zaXRpb24gPSB7fTtcbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBjdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzID0gbmV3IFNldCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJldHVyblZhbHVlID0gc2NvcGUoKSxcbiAgICAgICAgICBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaCA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlM7XG4gICAgICAgIG51bGwgIT09IG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoICYmXG4gICAgICAgICAgb25TdGFydFRyYW5zaXRpb25GaW5pc2goY3VycmVudFRyYW5zaXRpb24sIHJldHVyblZhbHVlKTtcbiAgICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIHJldHVyblZhbHVlICYmXG4gICAgICAgICAgbnVsbCAhPT0gcmV0dXJuVmFsdWUgJiZcbiAgICAgICAgICBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZS50aGVuICYmXG4gICAgICAgICAgcmV0dXJuVmFsdWUudGhlbihub29wLCByZXBvcnRHbG9iYWxFcnJvcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXBvcnRHbG9iYWxFcnJvcihlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBudWxsID09PSBwcmV2VHJhbnNpdGlvbiAmJlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzICYmXG4gICAgICAgICAgKChzY29wZSA9IGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLnNpemUpLFxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLmNsZWFyKCksXG4gICAgICAgICAgMTAgPCBzY29wZSAmJlxuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBcIkRldGVjdGVkIGEgbGFyZ2UgbnVtYmVyIG9mIHVwZGF0ZXMgaW5zaWRlIHN0YXJ0VHJhbnNpdGlvbi4gSWYgdGhpcyBpcyBkdWUgdG8gYSBzdWJzY3JpcHRpb24gcGxlYXNlIHJlLXdyaXRlIGl0IHRvIHVzZSBSZWFjdCBwcm92aWRlZCBob29rcy4gT3RoZXJ3aXNlIGNvbmN1cnJlbnQgbW9kZSBndWFyYW50ZWVzIGFyZSBvZmYgdGhlIHRhYmxlLlwiXG4gICAgICAgICAgICApKSxcbiAgICAgICAgICAoUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IHByZXZUcmFuc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGV4cG9ydHMudW5zdGFibGVfdXNlQ2FjaGVSZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQ2FjaGVSZWZyZXNoKCk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZSA9IGZ1bmN0aW9uICh1c2FibGUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZSh1c2FibGUpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VBY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uIChhY3Rpb24sIGluaXRpYWxTdGF0ZSwgcGVybWFsaW5rKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VBY3Rpb25TdGF0ZShcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBpbml0aWFsU3RhdGUsXG4gICAgICAgIHBlcm1hbGlua1xuICAgICAgKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlcHMpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUNhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlQ29udGV4dCA9IGZ1bmN0aW9uIChDb250ZXh0KSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IHJlc29sdmVEaXNwYXRjaGVyKCk7XG4gICAgICBDb250ZXh0LiQkdHlwZW9mID09PSBSRUFDVF9DT05TVU1FUl9UWVBFICYmXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgXCJDYWxsaW5nIHVzZUNvbnRleHQoQ29udGV4dC5Db25zdW1lcikgaXMgbm90IHN1cHBvcnRlZCBhbmQgd2lsbCBjYXVzZSBidWdzLiBEaWQgeW91IG1lYW4gdG8gY2FsbCB1c2VDb250ZXh0KENvbnRleHQpIGluc3RlYWQ/XCJcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiBkaXNwYXRjaGVyLnVzZUNvbnRleHQoQ29udGV4dCk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZURlYnVnVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGZvcm1hdHRlckZuKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VEZWJ1Z1ZhbHVlKHZhbHVlLCBmb3JtYXR0ZXJGbik7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZURlZmVycmVkVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGluaXRpYWxWYWx1ZSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlRGVmZXJyZWRWYWx1ZSh2YWx1ZSwgaW5pdGlhbFZhbHVlKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlRWZmZWN0ID0gZnVuY3Rpb24gKGNyZWF0ZSwgY3JlYXRlRGVwcywgdXBkYXRlKSB7XG4gICAgICBudWxsID09IGNyZWF0ZSAmJlxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJSZWFjdCBIb29rIHVzZUVmZmVjdCByZXF1aXJlcyBhbiBlZmZlY3QgY2FsbGJhY2suIERpZCB5b3UgZm9yZ2V0IHRvIHBhc3MgYSBjYWxsYmFjayB0byB0aGUgaG9vaz9cIlxuICAgICAgICApO1xuICAgICAgdmFyIGRpc3BhdGNoZXIgPSByZXNvbHZlRGlzcGF0Y2hlcigpO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHVwZGF0ZSlcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJ1c2VFZmZlY3QgQ1JVRCBvdmVybG9hZCBpcyBub3QgZW5hYmxlZCBpbiB0aGlzIGJ1aWxkIG9mIFJlYWN0LlwiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hlci51c2VFZmZlY3QoY3JlYXRlLCBjcmVhdGVEZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJZCgpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VJbXBlcmF0aXZlSGFuZGxlID0gZnVuY3Rpb24gKHJlZiwgY3JlYXRlLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgY3JlYXRlLCBkZXBzKTtcbiAgICB9O1xuICAgIGV4cG9ydHMudXNlSW5zZXJ0aW9uRWZmZWN0ID0gZnVuY3Rpb24gKGNyZWF0ZSwgZGVwcykge1xuICAgICAgbnVsbCA9PSBjcmVhdGUgJiZcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVhY3QgSG9vayB1c2VJbnNlcnRpb25FZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/XCJcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUluc2VydGlvbkVmZmVjdChjcmVhdGUsIGRlcHMpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VMYXlvdXRFZmZlY3QgPSBmdW5jdGlvbiAoY3JlYXRlLCBkZXBzKSB7XG4gICAgICBudWxsID09IGNyZWF0ZSAmJlxuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJSZWFjdCBIb29rIHVzZUxheW91dEVmZmVjdCByZXF1aXJlcyBhbiBlZmZlY3QgY2FsbGJhY2suIERpZCB5b3UgZm9yZ2V0IHRvIHBhc3MgYSBjYWxsYmFjayB0byB0aGUgaG9vaz9cIlxuICAgICAgICApO1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlTGF5b3V0RWZmZWN0KGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZU1lbW8gPSBmdW5jdGlvbiAoY3JlYXRlLCBkZXBzKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vKGNyZWF0ZSwgZGVwcyk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZU9wdGltaXN0aWMgPSBmdW5jdGlvbiAocGFzc3Rocm91Z2gsIHJlZHVjZXIpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZU9wdGltaXN0aWMocGFzc3Rocm91Z2gsIHJlZHVjZXIpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VSZWR1Y2VyID0gZnVuY3Rpb24gKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVJlZHVjZXIocmVkdWNlciwgaW5pdGlhbEFyZywgaW5pdCk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZVJlZiA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVJlZihpbml0aWFsVmFsdWUpO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VTdGF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVN0YXRlKGluaXRpYWxTdGF0ZSk7XG4gICAgfTtcbiAgICBleHBvcnRzLnVzZVN5bmNFeHRlcm5hbFN0b3JlID0gZnVuY3Rpb24gKFxuICAgICAgc3Vic2NyaWJlLFxuICAgICAgZ2V0U25hcHNob3QsXG4gICAgICBnZXRTZXJ2ZXJTbmFwc2hvdFxuICAgICkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICAgICAgZ2V0U25hcHNob3QsXG4gICAgICAgIGdldFNlcnZlclNuYXBzaG90XG4gICAgICApO1xuICAgIH07XG4gICAgZXhwb3J0cy51c2VUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlVHJhbnNpdGlvbigpO1xuICAgIH07XG4gICAgZXhwb3J0cy52ZXJzaW9uID0gXCIxOS4xLjFcIjtcbiAgICBcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICYmXG4gICAgICBcImZ1bmN0aW9uXCIgPT09XG4gICAgICAgIHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AgJiZcbiAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcChFcnJvcigpKTtcbiAgfSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC5wcm9kdWN0aW9uLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LmRldmVsb3BtZW50LmpzJyk7XG59XG4iLCJ2YXIgU01BTExfV09SRFMgPSAvXFxiKD86YW4/ZD98YVtzdF18YmVjYXVzZXxidXR8Ynl8ZW58Zm9yfGlbZm5dfG5laXRoZXJ8bm9yfG9bZm5yXXxvbmx5fG92ZXJ8cGVyfHNvfHNvbWV8dGhhW3RuXXx0aGV8dG98dXB8dXBvbnx2cz9cXC4/fHZlcnN1c3x2aWF8d2hlbnx3aXRofHdpdGhvdXR8eWV0KVxcYi9pO1xudmFyIFRPS0VOUyA9IC9bXlxcczrigJPigJQtXSt8Li9nO1xudmFyIFdISVRFU1BBQ0UgPSAvXFxzLztcbnZhciBJU19NQU5VQUxfQ0FTRSA9IC8uKD89W0EtWl18XFwuLikvO1xudmFyIEFMUEhBTlVNRVJJQ19QQVRURVJOID0gL1tBLVphLXowLTlcXHUwMEMwLVxcdTAwRkZdLztcbmV4cG9ydCBmdW5jdGlvbiB0aXRsZUNhc2UoaW5wdXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICB2YXIgbTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB3aGlsZSAoKG0gPSBUT0tFTlMuZXhlYyhpbnB1dCkpICE9PSBudWxsKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IG1bMF0sIGluZGV4ID0gbS5pbmRleDtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBJZ25vcmUgYWxyZWFkeSBjYXBpdGFsaXplZCB3b3Jkcy5cbiAgICAgICAgIUlTX01BTlVBTF9DQVNFLnRlc3QodG9rZW4pICYmXG4gICAgICAgICAgICAvLyBJZ25vcmUgc21hbGwgd29yZHMgZXhjZXB0IGF0IGJlZ2lubmluZyBvciBlbmQuXG4gICAgICAgICAgICAoIVNNQUxMX1dPUkRTLnRlc3QodG9rZW4pIHx8XG4gICAgICAgICAgICAgICAgaW5kZXggPT09IDAgfHxcbiAgICAgICAgICAgICAgICBpbmRleCArIHRva2VuLmxlbmd0aCA9PT0gaW5wdXQubGVuZ3RoKSAmJlxuICAgICAgICAgICAgLy8gSWdub3JlIFVSTHMuXG4gICAgICAgICAgICAoaW5wdXQuY2hhckF0KGluZGV4ICsgdG9rZW4ubGVuZ3RoKSAhPT0gXCI6XCIgfHxcbiAgICAgICAgICAgICAgICBXSElURVNQQUNFLnRlc3QoaW5wdXQuY2hhckF0KGluZGV4ICsgdG9rZW4ubGVuZ3RoICsgMSkpKSkge1xuICAgICAgICAgICAgLy8gRmluZCBhbmQgdXBwZXJjYXNlIGZpcnN0IHdvcmQgY2hhcmFjdGVyLCBza2lwcyBvdmVyICptb2RpZmllcnMqLlxuICAgICAgICAgICAgcmVzdWx0ICs9IHRva2VuLnJlcGxhY2UoQUxQSEFOVU1FUklDX1BBVFRFUk4sIGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLnRvVXBwZXJDYXNlKCk7IH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLyoqXG4gKiBUaGlzIGZpbGUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZnJvbSBgcHJlLXB1Ymxpc2guanNgLlxuICogRG8gbm90IG1hbnVhbGx5IGVkaXQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwiYXJlYVwiOiB0cnVlLFxuICBcImJhc2VcIjogdHJ1ZSxcbiAgXCJiclwiOiB0cnVlLFxuICBcImNvbFwiOiB0cnVlLFxuICBcImVtYmVkXCI6IHRydWUsXG4gIFwiaHJcIjogdHJ1ZSxcbiAgXCJpbWdcIjogdHJ1ZSxcbiAgXCJpbnB1dFwiOiB0cnVlLFxuICBcImxpbmtcIjogdHJ1ZSxcbiAgXCJtZXRhXCI6IHRydWUsXG4gIFwicGFyYW1cIjogdHJ1ZSxcbiAgXCJzb3VyY2VcIjogdHJ1ZSxcbiAgXCJ0cmFja1wiOiB0cnVlLFxuICBcIndiclwiOiB0cnVlXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBDb250YWN0IGFzIEZkYzNDb250YWN0LCBDb250ZXh0IGFzIEZEQzNDb250ZXh0IH0gZnJvbSBcIkBmaW5vcy9mZGMzXCI7XG5pbXBvcnQgdHlwZSB7XG5cdEFhZFVzZXJDb252ZXJzYXRpb25NZW1iZXIsXG5cdENoYW5uZWwsXG5cdENoYXRNZXNzYWdlLFxuXHRDb250YWN0LFxuXHREcml2ZUl0ZW0sXG5cdEVudGl0eSxcblx0RXZlbnQsXG5cdE1lc3NhZ2UsXG5cdFByZXNlbmNlLFxuXHRTZWFyY2hSZXNwb25zZSxcblx0VGVhbSxcblx0VXNlclxufSBmcm9tIFwiQG1pY3Jvc29mdC9taWNyb3NvZnQtZ3JhcGgtdHlwZXNcIjtcbmltcG9ydCB7XG5cdGNvbm5lY3QsXG5cdGVuYWJsZUxvZ2dpbmcsXG5cdFRlYW1zQ29ubmVjdGlvbixcblx0dHlwZSBHcmFwaFJlc3BvbnNlLFxuXHR0eXBlIE1pY3Jvc29mdDM2NUNvbm5lY3Rpb25cbn0gZnJvbSBcIkBvcGVuZmluL21pY3Jvc29mdDM2NVwiO1xuaW1wb3J0IHtcblx0QnV0dG9uU3R5bGUsXG5cdENMSVRlbXBsYXRlLFxuXHR0eXBlIENMSUZpbHRlcixcblx0dHlwZSBIb21lRGlzcGF0Y2hlZFNlYXJjaFJlc3VsdCxcblx0dHlwZSBIb21lU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0dHlwZSBIb21lU2VhcmNoUmVzcG9uc2UsXG5cdHR5cGUgSG9tZVNlYXJjaFJlc3VsdCxcblx0dHlwZSBUZW1wbGF0ZUZyYWdtZW50LFxuXHR0eXBlIENMSVNlYXJjaFJlc3VsdExvYWRpbmcsXG5cdHR5cGUgSG9tZUFjdGlvbixcblx0dHlwZSBDTElTZWFyY2hSZXN1bHRDdXN0b21cbn0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZVwiO1xuaW1wb3J0IHR5cGUgeyBDdXN0b21QYWxldHRlU2V0IH0gZnJvbSBcIkBvcGVuZmluL3dvcmtzcGFjZS1wbGF0Zm9ybVwiO1xuaW1wb3J0IHR5cGUge1xuXHRBY3Rpb25EYXRhLFxuXHRBY3Rpb25Mb2FkaW5nRGF0YSxcblx0R3JhcGhCYXRjaFJlcXVlc3QsXG5cdEdyYXBoQmF0Y2hSZXNwb25zZSxcblx0R3JhcGhCYXRjaFJlc3BvbnNlSXRlbSxcblx0R3JhcGhMaXN0UmVzcG9uc2UsXG5cdEludGVncmF0aW9uSGVscGVycyxcblx0TG9nZ2VyLFxuXHRNaWNyb3NvZnQzNjVPYmplY3RUeXBlcyxcblx0TWljcm9zb2Z0MzY1U2V0dGluZ3MsXG5cdFRlbXBsYXRlSGVscGVyc1xufSBmcm9tIFwiLi9zaGFwZXNcIjtcblxuLyoqXG4gKiBJbXBsZW1lbnQgdGhlIGludGVncmF0aW9uIHByb3ZpZGVyIGZvciBtaWNyb3NvZnQgMzY1IHJlc3VsdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbiB7XG5cdC8qKlxuXHQgKiBUaGUgZGVmYXVsdCBiYXNlIHNjb3JlIGZvciBvcmRlcmluZy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfREVGQVVMVF9CQVNFX1NDT1JFID0gNTAwMDAwO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBjYWxsIGtleSBhY3Rpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9URUFNU19DQUxMID0gXCJUZWFtcyBDYWxsXCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIG91dGxvb2sgZW1haWwga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX09VVExPT0tfRU1BSUwgPSBcIk91dGxvb2sgRW1haWxcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgdGVhbXMgbWVldGluZyBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fVEVBTVNfTUVFVElORyA9IFwiVGVhbXMgTWVldGluZ1wiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBvdXRsb29rIGV2ZW50IGtleSBhY3Rpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9PVVRMT09LX0VWRU5UID0gXCJPdXRsb29rIEV2ZW50XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgdG8gdXNlIGZvciBhIGNoYXQga2V5IGFjdGlvbi5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX1RFQU1TX0NIQVQgPSBcIlRlYW1zIENoYXRcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgY2FsbCBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fUEhPTkVfQ0FMTCA9IFwiQ2FsbFwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYW4gb3BlbiBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fT1BFTiA9IFwiT3BlblwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYW4gc2hhcmUgY29udGFjdC5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfQUNUSU9OX1NIQVJFX0NPTlRBQ1QgPSBcIlNoYXJlIENvbnRhY3RcIjtcblxuXHQvKipcblx0ICogVGhlIGtleSB0byB1c2UgZm9yIGEgY29weSBrZXkgYWN0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9BQ1RJT05fQ09QWSA9IFwiQ29weSBKU09OIHRvIENsaXBib2FyZFwiO1xuXG5cdC8qKlxuXHQgKiBUaGUga2V5IHRvIHVzZSBmb3IgYSBjb25uZWN0IGtleSBhY3Rpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX0FDVElPTl9DT05ORUNUID0gXCJDb25uZWN0XCI7XG5cblx0LyoqXG5cdCAqIFRoZSBrZXkgZm9yIHRoZSBtcyAzNjUgZmlsdGVycy5cblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBfTVMzNjVfRklMVEVSUyA9IFwiTVMzNjVcIjtcblxuXHQvKipcblx0ICogVGhlIHVybCBmb3IgdGVhbXMuXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX1RFQU1TX1VSTCA9IFwiaHR0cHM6Ly90ZWFtcy5taWNyb3NvZnQuY29tL1wiO1xuXG5cdC8qKlxuXHQgKiBUaGUgcHJvdG9jb2wgZm9yIHRlYW1zLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9URUFNU19QUk9UT0NPTCA9IFwibXN0ZWFtczpcIjtcblxuXHQvKipcblx0ICogVGhlIHNldHRpbmdzIGZvciB0aGUgaW50ZWdyYXRpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBfbG9nZ2VyOiBMb2dnZXIgfCB1bmRlZmluZWQ7XG5cblx0LyoqXG5cdCAqIFRoZSBpbnRlZ3JhdGlvbiBoZWxwZXJzLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX2ludGVncmF0aW9uSGVscGVyczogSW50ZWdyYXRpb25IZWxwZXJzIHwgdW5kZWZpbmVkO1xuXG5cdC8qKlxuXHQgKiBUaGUgbW9kdWxlIGRlZmluaXRpb24uXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0cHJpdmF0ZSBfZGVmaW5pdGlvbjpcblx0XHR8IHsgaWQ6IHN0cmluZzsgdGl0bGU6IHN0cmluZzsgYmFzZVNjb3JlPzogbnVtYmVyOyBkYXRhOiBNaWNyb3NvZnQzNjVTZXR0aW5ncyB9XG5cdFx0fCB1bmRlZmluZWQ7XG5cblx0LyoqXG5cdCAqIFRoZSBzZXR0aW5ncyBmb3IgdGhlIGludGVncmF0aW9uLlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHByaXZhdGUgX3NldHRpbmdzOiBNaWNyb3NvZnQzNjVTZXR0aW5ncyB8IHVuZGVmaW5lZDtcblxuXHQvKipcblx0ICogVGhlIE1pY3Jvc29mdCAzNjUgY29ubmVjdGlvbi5cblx0ICovXG5cdHByaXZhdGUgX21zMzY1Q29ubmVjdGlvbj86IE1pY3Jvc29mdDM2NUNvbm5lY3Rpb247XG5cblx0LyoqXG5cdCAqIEFueSBlcnJvcnMgZHVyaW5nIGNvbm5lY3Rpb24uXG5cdCAqL1xuXHRwcml2YXRlIF9jb25uZWN0aW9uRXJyb3I/OiBzdHJpbmc7XG5cblx0LyoqXG5cdCAqIFRoZSBob21lIHJlc3BvbnNlIHdoZW4gdGhlIGNvbm5lY3QgZmFpbHVyZSBlbnRyeSB3YXMgY3JlYXRlZC5cblx0ICovXG5cdHByaXZhdGUgX2Nvbm5lY3RMYXN0UmVzcG9uc2U/OiBIb21lU2VhcmNoTGlzdGVuZXJSZXNwb25zZTtcblxuXHQvKipcblx0ICogTWFpbnRhaW4gYSBjYWNoZSBvZiB0aGUgcHJvZmlsZSBpbWFnZXMuXG5cdCAqL1xuXHRwcml2YXRlIHJlYWRvbmx5IF9wcm9maWxlSW1hZ2VDYWNoZToge1xuXHRcdFtpZDogc3RyaW5nXToge1xuXHRcdFx0YWRkZWQ6IG51bWJlcjtcblx0XHRcdGRhdGE6IHN0cmluZztcblx0XHR9O1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBNYWludGFpbiBhIGNhY2hlIG9mIHRoZSB1c2VycyB0ZWFtcyBhbmQgY2hhbm5lbHMuXG5cdCAqL1xuXHRwcml2YXRlIF90ZWFtc0FuZENoYW5uZWxzQ2FjaGU6IHsgdGVhbTogVGVhbTsgY2hhbm5lbHM6IENoYW5uZWxbXSB9W107XG5cblx0LyoqXG5cdCAqIFRoZSBjYWNoZSBjbGVhbnVwIHRpbWVyIGlkLlxuXHQgKi9cblx0cHJpdmF0ZSBfY2FjaGVJbnRlcnZhbElkPzogbnVtYmVyO1xuXG5cdC8qKlxuXHQgKiBUaGUgY2FjaGUgY291bnRlci5cblx0ICovXG5cdHByaXZhdGUgX2NhY2hlQ291bnRlcjogbnVtYmVyO1xuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgTWljcm9zb2Z0MzY1UHJvdmlkZXIuXG5cdCAqL1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZSA9IHt9O1xuXHRcdHRoaXMuX3RlYW1zQW5kQ2hhbm5lbHNDYWNoZSA9IFtdO1xuXHRcdHRoaXMuX2NhY2hlQ291bnRlciA9IDA7XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSB0aGUgbW9kdWxlLlxuXHQgKiBAcGFyYW0gZGVmaW5pdGlvbiBUaGUgZGVmaW5pdGlvbiBvZiB0aGUgbW9kdWxlIGZyb20gY29uZmlndXJhdGlvbiBpbmNsdWRlIGN1c3RvbSBvcHRpb25zLlxuXHQgKiBAcGFyYW0gZGVmaW5pdGlvbi5pZCBUaGUgaWQgdG8gdXNlIHdoZW4gdGhlIGludGVncmF0aW9uIGlzIHVzZWQgYXMgYSBtb2R1bGUuXG5cdCAqIEBwYXJhbSBkZWZpbml0aW9uLnRpdGxlIFRoZSB0aXRsZSB0byB1c2Ugd2hlbiB0aGUgaW50ZWdyYXRpb24gaXMgdXNlZCBhcyBhIG1vZHVsZS5cblx0ICogQHBhcmFtIGRlZmluaXRpb24uZGF0YSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBtb2R1bGUuXG5cdCAqIEBwYXJhbSBsb2dnZXJDcmVhdG9yIEZvciBsb2dnaW5nIGVudHJpZXMuXG5cdCAqIEBwYXJhbSBoZWxwZXJzIEhlbHBlciBtZXRob2RzIGZvciB0aGUgbW9kdWxlIHRvIGludGVyYWN0IHdpdGggdGhlIGFwcGxpY2F0aW9uIGNvcmUuXG5cdCAqIEByZXR1cm5zIE5vdGhpbmcuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZShcblx0XHRkZWZpbml0aW9uOiB7IGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmc7IGRhdGE6IE1pY3Jvc29mdDM2NVNldHRpbmdzIH0sXG5cdFx0bG9nZ2VyQ3JlYXRvcjogKGdyb3VwOiBzdHJpbmcpID0+IExvZ2dlcixcblx0XHRoZWxwZXJzOiBJbnRlZ3JhdGlvbkhlbHBlcnNcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5fZGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG5cdFx0dGhpcy5fc2V0dGluZ3MgPSBkZWZpbml0aW9uLmRhdGE7XG5cdFx0dGhpcy5faW50ZWdyYXRpb25IZWxwZXJzID0gaGVscGVycztcblxuXHRcdHRoaXMuX2RlZmluaXRpb24udGl0bGUgPz89IFwiTWljcm9zb2Z0IDM2NVwiO1xuXHRcdHRoaXMuX3NldHRpbmdzLmdyYXBoRXhwbG9yZXJQcmVmaXggPz89IFwibXNcIjtcblxuXHRcdHRoaXMuX2xvZ2dlciA9IGxvZ2dlckNyZWF0b3IodGhpcy5fZGVmaW5pdGlvbi50aXRsZSk7XG5cdFx0dGhpcy5fbG9nZ2VyLmluZm8oYEluaXRpYWxpemluZyAke3RoaXMuX2RlZmluaXRpb24udGl0bGV9YCk7XG5cblx0XHRpZiAoIXRoaXMuX3NldHRpbmdzLmNsaWVudElkKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXIuZXJyb3IoXCJDb25maWd1cmF0aW9uIGlzIG1pc3NpbmcgY2xpZW50SWRcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLl9zZXR0aW5ncy50ZW5hbnRJZCkge1xuXHRcdFx0dGhpcy5fbG9nZ2VyLmVycm9yKFwiQ29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIHRlbmFudElkXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMuY29ubmVjdFRvTVMzNjUoKTtcblxuXHRcdC8vIEZvciB0aGVtZWQgaWNvbnMgd2UgZmV0Y2ggdGhlIHN2ZyBjb250ZW50IHNvIHRoYXQgd2UgY2FuIHJlcGxhY2UgY29sb3JzXG5cdFx0Ly8gd2hlbiB0aGV5IGFyZSB1c2VkLCBpbnN0ZWFkIG9mIGxpbmtpbmcgZGlyZWN0bHkgdG8gdGhlIHNvdXJjZVxuXHRcdGNvbnN0IHRoZW1lZEljb25zID0gW1xuXHRcdFx0XCJjYWxlbmRhclwiLFxuXHRcdFx0XCJjYWxsXCIsXG5cdFx0XHRcImNoYW5uZWxcIixcblx0XHRcdFwiY2hhdFwiLFxuXHRcdFx0XCJjb250YWN0XCIsXG5cdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcInNoYXJlXCIsXG5cdFx0XHRcInRlYW1cIixcblx0XHRcdFwiZmlsZVwiLFxuXHRcdFx0XCJmb2xkZXJcIlxuXHRcdF07XG5cdFx0Zm9yIChjb25zdCB0aGVtZWRJY29uIG9mIHRoZW1lZEljb25zKSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuX3NldHRpbmdzLmltYWdlc1t0aGVtZWRJY29uXSk7XG5cdFx0XHRjb25zdCBzdmcgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cdFx0XHR0aGlzLl9zZXR0aW5ncy5pbWFnZXNbdGhlbWVkSWNvbl0gPSB0aGlzLnN2Z1RvSW5saW5lKHN2Zyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBtb2R1bGUgaXMgYmVpbmcgZGVyZWdpc3RlcmVkLlxuXHQgKiBAcmV0dXJucyBOb3RoaW5nLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGNsb3NlZG93bigpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJEaXNjb25uZWN0aW5nIGZyb20gTVMgR3JhcGggQVBJXCIpO1xuXHRcdFx0YXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX2NhY2hlSW50ZXJ2YWxJZCkge1xuXHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fY2FjaGVJbnRlcnZhbElkKTtcblx0XHRcdHRoaXMuX2NhY2hlSW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGEgbGlzdCBvZiB0aGUgc3RhdGljIGhlbHAgZW50cmllcy5cblx0ICogQHJldHVybnMgVGhlIGxpc3Qgb2YgaGVscCBlbnRyaWVzLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGdldEhlbHBTZWFyY2hFbnRyaWVzKCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+W10+IHtcblx0XHRpZiAodGhpcy5faW50ZWdyYXRpb25IZWxwZXJzKSB7XG5cdFx0XHRjb25zdCBhZGRpdGlvbmFsRGVzY3JpcHRpb246IHN0cmluZ1tdID0gW107XG5cdFx0XHRjb25zdCBhZGRpdGlvbmFsSGVscDogc3RyaW5nW10gPSBbXTtcblxuXHRcdFx0aWYgKCF0aGlzLl9zZXR0aW5ncz8uZGlzYWJsZUdyYXBoRXhwbG9yZXIpIHtcblx0XHRcdFx0YWRkaXRpb25hbERlc2NyaXB0aW9uLnB1c2goXG5cdFx0XHRcdFx0YFlvdSBjYW4gYWxzbyBzcGVjaWZ5IGEgcXVlcnkgYXMgYSBncmFwaCBleHBsb3JlciBwYXRoIGFuZCBwYXJhbWV0ZXJzLCBieSB1c2luZyB0aGUgLyR7dGhpcy5fc2V0dGluZ3M/LmdyYXBoRXhwbG9yZXJQcmVmaXh9IHByZWZpeGBcblx0XHRcdFx0KTtcblx0XHRcdFx0YWRkaXRpb25hbEhlbHAucHVzaChcblx0XHRcdFx0XHRgLyR7dGhpcy5fc2V0dGluZ3M/LmdyYXBoRXhwbG9yZXJQcmVmaXh9L21lYCxcblx0XHRcdFx0XHRgLyR7dGhpcy5fc2V0dGluZ3M/LmdyYXBoRXhwbG9yZXJQcmVmaXh9L3VzZXJzPyRmaWx0ZXI9c3RhcnRzV2l0aChkaXNwbGF5TmFtZSwnam9obicpYFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0taGVscDFgLFxuXHRcdFx0XHRcdHNjb3JlOiB0aGlzLl9kZWZpbml0aW9uPy5iYXNlU2NvcmUgPz8gTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0RFRkFVTFRfQkFTRV9TQ09SRSxcblx0XHRcdFx0XHR0aXRsZTogdGhpcy5fZGVmaW5pdGlvbj8udGl0bGUgPz8gXCJcIixcblx0XHRcdFx0XHRsYWJlbDogXCJIZWxwXCIsXG5cdFx0XHRcdFx0aWNvbjogdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5taWNyb3NvZnQzNjUsXG5cdFx0XHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5DdXN0b20sXG5cdFx0XHRcdFx0dGVtcGxhdGVDb250ZW50OiBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnM/LnRlbXBsYXRlSGVscGVycy5jcmVhdGVIZWxwKFxuXHRcdFx0XHRcdFx0XCJNaWNyb3NvZnQgMzY1XCIsXG5cdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFwiVGhlIE1pY3Jvc29mdCAzNjUgaW50ZWdyYXRpb24gY2FuIGJlIHVzZWQgdG8gc2VhcmNoIG11bHRpcGxlIGRhdGEgc291cmNlIGluIHlvdXIgcGxhdGZvcm0uXCIsXG5cdFx0XHRcdFx0XHRcdFwiVXNpbmcgYSBmcmVlZm9ybSBxdWVyeSB3aWxsIHNlYXJjaCB0aGUgY29udGVudCBvZiBVc2VycywgQ29udGFjdHMsIEUtbWFpbCwgRXZlbnRzLCBDaGF0IE1lc3NhZ2VzLCBUZWFtcyBhbmQgQ2hhbm5lbHNcIlxuXHRcdFx0XHRcdFx0XS5jb25jYXQoYWRkaXRpb25hbERlc2NyaXB0aW9uKSxcblx0XHRcdFx0XHRcdGFkZGl0aW9uYWxIZWxwXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0taGVscDJgLFxuXHRcdFx0XHRcdHNjb3JlOiB0aGlzLl9kZWZpbml0aW9uPy5iYXNlU2NvcmUgPz8gTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0RFRkFVTFRfQkFTRV9TQ09SRSxcblx0XHRcdFx0XHR0aXRsZTogYCR7dGhpcy5fZGVmaW5pdGlvbj8udGl0bGV9IFJlY2VudGAsXG5cdFx0XHRcdFx0bGFiZWw6IFwiSGVscFwiLFxuXHRcdFx0XHRcdGljb246IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMubWljcm9zb2Z0MzY1LFxuXHRcdFx0XHRcdGFjdGlvbnM6IFtdLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRcdFx0cG9wdWxhdGVRdWVyeTogXCIvcmVjZW50XCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5DdXN0b20sXG5cdFx0XHRcdFx0dGVtcGxhdGVDb250ZW50OiBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnM/LnRlbXBsYXRlSGVscGVycy5jcmVhdGVIZWxwKFxuXHRcdFx0XHRcdFx0XCJNaWNyb3NvZnQgMzY1IFJlY2VudFwiLFxuXHRcdFx0XHRcdFx0W1wiUnVubmluZyB0aGlzIGNvbW1hbmQgd2lsbCByZXRyaWV2ZSB0aGUgbW9zdCByZWNlbnQgZmlsZXMgZnJvbSBNUzM2NVwiXSxcblx0XHRcdFx0XHRcdFtcIi9yZWNlbnRcIl1cblx0XHRcdFx0XHQpXG5cdFx0XHRcdH1cblx0XHRcdF07XG5cdFx0fVxuXHRcdHJldHVybiBbXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgZW50cmllcyB0byBzaG93IHdoaWxlIHRoZSBpbnRlZ3JhdGlvbiBpcyBzZWFyY2hpbmcuXG5cdCAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gc2VhcmNoIGZvci5cblx0ICogQHBhcmFtIGxhc3RSZXNwb25zZSBUaGUgbGFzdCBzZWFyY2ggcmVzcG9uc2UgdXNlZCBmb3IgdXBkYXRpbmcgZXhpc3RpbmcgcmVzdWx0cy5cblx0ICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIHNlYXJjaCBxdWVyeS5cblx0ICogQHBhcmFtIG9wdGlvbnMucXVlcnlNaW5MZW5ndGggVGhlIG1pbmltdW0gbGVuZ3RoIGJlZm9yZSBhIHF1ZXJ5IGlzIGFjdGlvbmVkLlxuXHQgKiBAcGFyYW0gb3B0aW9ucy5xdWVyeUFnYWluc3QgVGhlIGZpZWxkcyBpbiB0aGUgZGF0YSB0byBxdWVyeSBhZ2FpbnN0LlxuXHQgKiBAcGFyYW0gb3B0aW9ucy5pc1N1Z2dlc3Rpb24gSXMgdGhlIHF1ZXJ5IGZyb20gYSBzdWdnZXN0aW9uLlxuXHQgKiBAcmV0dXJucyBUaGUgbGlzdCBvZiByZXN1bHRzIGFuZCBuZXcgZmlsdGVycy5cblx0ICovXG5cdHB1YmxpYyBhc3luYyBnZXRTZWFyY2hSZXN1bHRzUHJvZ3Jlc3M/KFxuXHRcdHF1ZXJ5OiBzdHJpbmcsXG5cdFx0bGFzdFJlc3BvbnNlOiBIb21lU2VhcmNoTGlzdGVuZXJSZXNwb25zZSxcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRxdWVyeU1pbkxlbmd0aD86IG51bWJlcjtcblx0XHRcdHF1ZXJ5QWdhaW5zdD86IHN0cmluZ1tdO1xuXHRcdFx0aXNTdWdnZXN0aW9uPzogYm9vbGVhbjtcblx0XHR9XG5cdCk6IFByb21pc2U8SG9tZVNlYXJjaFJlc3VsdFtdPiB7XG5cdFx0aWYgKCF0aGlzLl9tczM2NUNvbm5lY3Rpb24gJiYgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzKSB7XG5cdFx0XHRjb25zdCB0aGVtZUNsaWVudCA9IGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5nZXRUaGVtZUNsaWVudCgpO1xuXHRcdFx0dGhpcy5fY29ubmVjdExhc3RSZXNwb25zZSA9IGxhc3RSZXNwb25zZTtcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBbXTtcblx0XHRcdGlmICh0aGlzLl9jb25uZWN0aW9uRXJyb3IpIHtcblx0XHRcdFx0Y29uc3QgY29ubmVjdFJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlQ29ubmVjdFJlc3VsdChcblx0XHRcdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdGF3YWl0IHRoZW1lQ2xpZW50LmdldFBhbGV0dGUoKVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAoY29ubmVjdFJlc3VsdCkge1xuXHRcdFx0XHRcdHJlc3VsdHMucHVzaChjb25uZWN0UmVzdWx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbWluTGVuZ3RoID0gb3B0aW9ucz8ucXVlcnlNaW5MZW5ndGggPz8gMztcblx0XHRyZXR1cm4gcXVlcnkubGVuZ3RoID49IG1pbkxlbmd0aCA/IFt0aGlzLmNyZWF0ZVNlYXJjaGluZ1Jlc3VsdCgpXSA6IFtdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBhIGxpc3Qgb2Ygc2VhcmNoIHJlc3VsdHMgYmFzZWQgb24gdGhlIHF1ZXJ5IGFuZCBmaWx0ZXJzLlxuXHQgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIHNlYXJjaCBmb3IuXG5cdCAqIEBwYXJhbSBmaWx0ZXJzIFRoZSBmaWx0ZXJzIHRvIGFwcGx5LlxuXHQgKiBAcGFyYW0gbGFzdFJlc3BvbnNlIFRoZSBsYXN0IHNlYXJjaCByZXNwb25zZSB1c2VkIGZvciB1cGRhdGluZyBleGlzdGluZyByZXN1bHRzLlxuXHQgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgc2VhcmNoIHF1ZXJ5LlxuXHQgKiBAcGFyYW0gb3B0aW9ucy5xdWVyeU1pbkxlbmd0aCBUaGUgbWluaW11bSBsZW5ndGggb2YgdGhlIHF1ZXJ5IGJlZm9yZSBzaG93aW5nIHJlc3VsdHMuXG5cdCAqIEBwYXJhbSBvcHRpb25zLnF1ZXJ5QWdhaW5zdCBUaGUgZmllbGQgdG8gc2VhcmNoIGFnYWluc3QuXG5cdCAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIHJlc3VsdHMgYW5kIG5ldyBmaWx0ZXJzLlxuXHQgKi9cblx0cHVibGljIGFzeW5jIGdldFNlYXJjaFJlc3VsdHMoXG5cdFx0cXVlcnk6IHN0cmluZyxcblx0XHRmaWx0ZXJzOiBDTElGaWx0ZXJbXSxcblx0XHRsYXN0UmVzcG9uc2U6IEhvbWVTZWFyY2hMaXN0ZW5lclJlc3BvbnNlLFxuXHRcdG9wdGlvbnM/OiB7XG5cdFx0XHRxdWVyeU1pbkxlbmd0aD86IG51bWJlcjtcblx0XHRcdHF1ZXJ5QWdhaW5zdD86IHN0cmluZ1tdO1xuXHRcdH1cblx0KTogUHJvbWlzZTxIb21lU2VhcmNoUmVzcG9uc2U+IHtcblx0XHRjb25zdCBpc1JlY2VudCA9IHF1ZXJ5ID09PSBcIi9yZWNlbnRcIjtcblx0XHRjb25zdCBkZWZhdWx0RmlsdGVyczogTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXNbXSA9IGlzUmVjZW50XG5cdFx0XHQ/IFtcIkZpbGVcIl1cblx0XHRcdDogW1wiVXNlclwiLCBcIkNvbnRhY3RcIiwgXCJFdmVudFwiLCBcIk1lc3NhZ2VcIiwgXCJDaGFubmVsXCIsIFwiVGVhbVwiLCBcIkNoYXRNZXNzYWdlXCIsIFwiRmlsZVwiXTtcblxuXHRcdGNvbnN0IG1pbkxlbmd0aCA9IG9wdGlvbnM/LnF1ZXJ5TWluTGVuZ3RoID8/IDM7XG5cblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0Y29uc3QgdGhlbWVDbGllbnQgPSBhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMuZ2V0VGhlbWVDbGllbnQoKTtcblx0XHRcdGNvbnN0IHBhbGV0dGUgPSBhd2FpdCB0aGVtZUNsaWVudC5nZXRQYWxldHRlKCk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIElmIHF1ZXJ5IHN0YXJ0cyB3aXRoIG1zIGp1c3QgZG8gYSBwYXNzdGhyb3VnaCB0byB0aGUgZ3JhcGggQVBJXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQhdGhpcy5fc2V0dGluZ3M/LmRpc2FibGVHcmFwaEV4cGxvcmVyICYmXG5cdFx0XHRcdFx0cXVlcnkuc3RhcnRzV2l0aChgLyR7dGhpcy5fc2V0dGluZ3M/LmdyYXBoRXhwbG9yZXJQcmVmaXh9L2ApXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnN0IHBhdGggPSBxdWVyeS5yZXBsYWNlKGAvJHt0aGlzLl9zZXR0aW5ncz8uZ3JhcGhFeHBsb3JlclByZWZpeH0vYCwgXCJcIik7XG5cdFx0XHRcdFx0aWYgKHBhdGgubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZnVsbFBhdGggPSBgL3YxLjAvJHtwYXRofWA7XG5cblx0XHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIkdyYXBoIEFQSSBSZXF1ZXN0XCIsIGZ1bGxQYXRoKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3QoZnVsbFBhdGgpO1xuXHRcdFx0XHRcdFx0Y29uc3QganNvblJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlR3JhcGhKc29uUmVzdWx0KFxuXHRcdFx0XHRcdFx0XHR0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRwYWxldHRlLFxuXHRcdFx0XHRcdFx0XHRyZXNwb25zZVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGxhc3RSZXNwb25zZS5yZXNwb25kKFtqc29uUmVzdWx0XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGlzUmVjZW50IHx8IChxdWVyeS5sZW5ndGggPj0gbWluTGVuZ3RoICYmICFxdWVyeS5zdGFydHNXaXRoKFwiL1wiKSkpIHtcblx0XHRcdFx0XHRjb25zdCBtczM2NUZpbHRlciA9IGZpbHRlcnM/LmZpbmQoKGYpID0+IGYuaWQgPT09IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9NUzM2NV9GSUxURVJTKTtcblxuXHRcdFx0XHRcdGxldCBpbmNsdWRlT3B0aW9uczogTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXNbXSA9IFsuLi5kZWZhdWx0RmlsdGVyc107XG5cblx0XHRcdFx0XHRpZiAobXMzNjVGaWx0ZXI/Lm9wdGlvbnMgJiYgQXJyYXkuaXNBcnJheShtczM2NUZpbHRlci5vcHRpb25zKSkge1xuXHRcdFx0XHRcdFx0aW5jbHVkZU9wdGlvbnMgPSBtczM2NUZpbHRlci5vcHRpb25zXG5cdFx0XHRcdFx0XHRcdC5maWx0ZXIoKG8pID0+IG8uaXNTZWxlY3RlZClcblx0XHRcdFx0XHRcdFx0Lm1hcCgobykgPT4gby52YWx1ZSBhcyBNaWNyb3NvZnQzNjVPYmplY3RUeXBlcyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3QgYmF0Y2hSZXF1ZXN0czogR3JhcGhCYXRjaFJlcXVlc3RbXSA9IFtdO1xuXG5cdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiVXNlclwiKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgdXNlclNlYXJjaEZpZWxkczogKGtleW9mIFVzZXIpW10gPSBbXG5cdFx0XHRcdFx0XHRcdFwiZGlzcGxheU5hbWVcIixcblx0XHRcdFx0XHRcdFx0XCJnaXZlbk5hbWVcIixcblx0XHRcdFx0XHRcdFx0XCJzdXJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwiZGVwYXJ0bWVudFwiLFxuXHRcdFx0XHRcdFx0XHRcImpvYlRpdGxlXCIsXG5cdFx0XHRcdFx0XHRcdFwibW9iaWxlUGhvbmVcIlxuXHRcdFx0XHRcdFx0XTtcblx0XHRcdFx0XHRcdGNvbnN0IHVzZXJTZWFyY2hRdWVyeSA9IHVzZXJTZWFyY2hGaWVsZHMubWFwKChzKSA9PiBgXCIke3N9OiR7cXVlcnl9XCJgKS5qb2luKFwiIE9SIFwiKTtcblxuXHRcdFx0XHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aWQ6IFwiVXNlclwiLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogYC91c2Vycz8kc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJTZWFyY2hRdWVyeSl9JiR0b3A9MTBgLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcdFx0Q29uc2lzdGVuY3lMZXZlbDogXCJldmVudHVhbFwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJDb250YWN0XCIpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250YWN0U2VhcmNoUXVlcnkgPSBgXCIke3F1ZXJ5fVwiYDtcblx0XHRcdFx0XHRcdGJhdGNoUmVxdWVzdHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdGlkOiBcIkNvbnRhY3RcIixcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IGAvbWUvY29udGFjdHM/JHNlYXJjaD0ke2VuY29kZVVSSUNvbXBvbmVudChjb250YWN0U2VhcmNoUXVlcnkpfSYkdG9wPTEwYFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIk1lc3NhZ2VcIikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2VTZWFyY2hRdWVyeSA9IGBcIiR7cXVlcnl9XCJgO1xuXHRcdFx0XHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aWQ6IFwiTWVzc2FnZVwiLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogYC9tZS9tZXNzYWdlcz8kc2VsZWN0PXNlbmRlcixzdWJqZWN0LGJvZHlQcmV2aWV3LHJlY2VpdmVkRGF0ZVRpbWUsd2ViTGluayYkc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuXHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2VTZWFyY2hRdWVyeVxuXHRcdFx0XHRcdFx0XHQpfSYkdG9wPTEwYFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIkV2ZW50XCIpKSB7XG5cdFx0XHRcdFx0XHRiYXRjaFJlcXVlc3RzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRpZDogXCJFdmVudFwiLFxuXHRcdFx0XHRcdFx0XHR1cmw6IFwiL3NlYXJjaC9xdWVyeVwiLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0XHRib2R5OiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdHM6IFtcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW50aXR5VHlwZXM6IFtcImV2ZW50XCJdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRxdWVyeToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHF1ZXJ5U3RyaW5nOiBxdWVyeVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmcm9tOiAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzaXplOiAxMFxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJDaGF0TWVzc2FnZVwiKSkge1xuXHRcdFx0XHRcdFx0YmF0Y2hSZXF1ZXN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0aWQ6IFwiQ2hhdE1lc3NhZ2VcIixcblx0XHRcdFx0XHRcdFx0dXJsOiBcIi9zZWFyY2gvcXVlcnlcIixcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0XHRcdFx0Ym9keToge1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RzOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVudGl0eVR5cGVzOiBbXCJjaGF0TWVzc2FnZVwiXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0cXVlcnk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRxdWVyeVN0cmluZzogcXVlcnlcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnJvbTogMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogMTBcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJGaWxlXCIpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlU2VhcmNoUXVlcnkgPSBgJyR7cXVlcnl9J2A7XG5cdFx0XHRcdFx0XHRiYXRjaFJlcXVlc3RzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRpZDogXCJGaWxlXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogaXNSZWNlbnRcblx0XHRcdFx0XHRcdFx0XHQ/IFwiL21lL2RyaXZlL3JlY2VudFwiXG5cdFx0XHRcdFx0XHRcdFx0OiBgL21lL2RyaXZlL3Jvb3Qvc2VhcmNoKHE9JHtlbmNvZGVVUklDb21wb25lbnQoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZpbGVTZWFyY2hRdWVyeVxuXHRcdFx0XHRcdFx0XHRcdFx0KX0pPyR0b3A9MTAmJG9yZGVyYnk9bGFzdE1vZGlmaWVkRGF0ZVRpbWUgZGVzYyYkZXhwYW5kPXRodW1ibmFpbHNgLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IGhvbWVSZXN1bHRzOiBIb21lU2VhcmNoUmVzdWx0W10gPSBhd2FpdCB0aGlzLnNlbmRCYXRjaFF1ZXJ5KFxuXHRcdFx0XHRcdFx0cXVlcnksXG5cdFx0XHRcdFx0XHRpbmNsdWRlT3B0aW9ucyxcblx0XHRcdFx0XHRcdGJhdGNoUmVxdWVzdHNcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiVGVhbVwiKSB8fCBpbmNsdWRlT3B0aW9ucy5pbmNsdWRlcyhcIkNoYW5uZWxcIikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHRlYW1BbmRDaGFubmVscyBvZiB0aGlzLl90ZWFtc0FuZENoYW5uZWxzQ2FjaGUpIHtcblx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKFwiVGVhbVwiKSAmJlxuXHRcdFx0XHRcdFx0XHRcdCh0ZWFtQW5kQ2hhbm5lbHMudGVhbS5kaXNwbGF5TmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSA/P1xuXHRcdFx0XHRcdFx0XHRcdFx0dGVhbUFuZENoYW5uZWxzLnRlYW0uZGVzY3JpcHRpb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpXG5cdFx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRcdGhvbWVSZXN1bHRzLnB1c2goXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycy50ZW1wbGF0ZUhlbHBlcnMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhbGV0dGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlYW1BbmRDaGFubmVscy50ZWFtLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcImRpc3BsYXlOYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiVGVhbVwiXG5cdFx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoaW5jbHVkZU9wdGlvbnMuaW5jbHVkZXMoXCJDaGFubmVsXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjaGFubmVsIG9mIHRlYW1BbmRDaGFubmVscy5jaGFubmVscykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFubmVsLmRpc3BsYXlOYW1lPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpID8/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNoYW5uZWwuZGVzY3JpcHRpb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSlcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlTG9hZGluZ1Jlc3VsdChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycy50ZW1wbGF0ZUhlbHBlcnMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYWxldHRlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuLi5jaGFubmVsLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZWFtOiB0ZWFtQW5kQ2hhbm5lbHMudGVhbVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFwiZGlzcGxheU5hbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFwiQ2hhbm5lbFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGxhc3RSZXNwb25zZS5yZXNwb25kKGhvbWVSZXN1bHRzKTtcblxuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdFR5cGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2VhcmNoUmVzdWx0IG9mIGhvbWVSZXN1bHRzKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2VhcmNoUmVzdWx0LmxhYmVsKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdFR5cGVzLmFkZChzZWFyY2hSZXN1bHQubGFiZWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbHRlcnMgPSByZXN1bHRUeXBlcy5lbnRyaWVzKCk7XG5cdFx0XHRcdFx0bGFzdFJlc3BvbnNlLnVwZGF0ZUNvbnRleHQoe1xuXHRcdFx0XHRcdFx0ZmlsdGVyczogW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9NUzM2NV9GSUxURVJTLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcIk1pY3Jvc29mdCAzNjVcIixcblx0XHRcdFx0XHRcdFx0XHRvcHRpb25zOiBbLi4ubmV3RmlsdGVyc10ubWFwKChmKSA9PiAoe1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGZbMF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRpc1NlbGVjdGVkOiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogZXJyO1xuXHRcdFx0XHRsYXN0UmVzcG9uc2UucmVzcG9uZChbXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVHcmFwaEpzb25SZXN1bHQodGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLnRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiA0MDAsXG5cdFx0XHRcdFx0XHRkYXRhOiBtZXNzYWdlXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGxhc3RSZXNwb25zZS5yZXZva2UoYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LXNlYXJjaGluZ2ApO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3VsdHM6IFtdXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBbiBlbnRyeSBoYXMgYmVlbiBzZWxlY3RlZC5cblx0ICogQHBhcmFtIHJlc3VsdCBUaGUgZGlzcGF0Y2hlZCByZXN1bHQuXG5cdCAqIEBwYXJhbSBsYXN0UmVzcG9uc2UgVGhlIGxhc3QgcmVzcG9uc2UuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGl0ZW0gd2FzIGhhbmRsZWQuXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgaXRlbVNlbGVjdGlvbihcblx0XHRyZXN1bHQ6IEhvbWVEaXNwYXRjaGVkU2VhcmNoUmVzdWx0LFxuXHRcdGxhc3RSZXNwb25zZTogSG9tZVNlYXJjaExpc3RlbmVyUmVzcG9uc2Vcblx0KTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0aWYgKHJlc3VsdC5hY3Rpb24udHJpZ2dlciA9PT0gXCJmb2N1cy1jaGFuZ2VcIikge1xuXHRcdFx0aWYgKHJlc3VsdC5kYXRhPy5zdGF0ZSA9PT0gXCJsb2FkaW5nXCIgJiYgdGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0XHRjb25zdCB0aGVtZUNsaWVudCA9IGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5nZXRUaGVtZUNsaWVudCgpO1xuXHRcdFx0XHRjb25zdCBwYWxldHRlID0gYXdhaXQgdGhlbWVDbGllbnQuZ2V0UGFsZXR0ZSgpO1xuXHRcdFx0XHRjb25zdCB0ZW1wbGF0ZUhlbHBlcnMgPSB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMudGVtcGxhdGVIZWxwZXJzO1xuXHRcdFx0XHRjb25zdCBhY3Rpb25EYXRhID0gcmVzdWx0LmRhdGEgYXMgQWN0aW9uTG9hZGluZ0RhdGE7XG5cdFx0XHRcdGNvbnN0IG9ialR5cGUgPSBhY3Rpb25EYXRhLm9ialR5cGUgYXMgTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXM7XG5cblx0XHRcdFx0Y29uc3QgcmVzdWx0SGFuZGxlcnM6IHtcblx0XHRcdFx0XHRba2V5IGluIE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzXT86ICgpID0+IFByb21pc2U8SG9tZVNlYXJjaFJlc3VsdD47XG5cdFx0XHRcdH0gPSB7XG5cdFx0XHRcdFx0VXNlcjogYXN5bmMgKCkgPT4gdGhpcy5jcmVhdGVVc2VyUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgVXNlciksXG5cdFx0XHRcdFx0Q29udGFjdDogYXN5bmMgKCkgPT4gdGhpcy5jcmVhdGVDb250YWN0UmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgQ29udGFjdCksXG5cdFx0XHRcdFx0TWVzc2FnZTogYXN5bmMgKCkgPT4gdGhpcy5jcmVhdGVNZXNzYWdlUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgTWVzc2FnZSksXG5cdFx0XHRcdFx0RXZlbnQ6IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlRXZlbnRSZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBhY3Rpb25EYXRhLm9iaiBhcyBFdmVudCksXG5cdFx0XHRcdFx0Q2hhdE1lc3NhZ2U6IGFzeW5jICgpID0+XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNoYXRNZXNzYWdlUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYWN0aW9uRGF0YS5vYmogYXMgQ2hhdE1lc3NhZ2UpLFxuXHRcdFx0XHRcdENoYW5uZWw6IGFzeW5jICgpID0+XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNoYW5uZWxSZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBhY3Rpb25EYXRhLm9iaiBhcyBDaGFubmVsICYgeyB0ZWFtOiBUZWFtIH0pLFxuXHRcdFx0XHRcdFRlYW06IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlVGVhbVJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIFRlYW0pLFxuXHRcdFx0XHRcdEZpbGU6IGFzeW5jICgpID0+IHRoaXMuY3JlYXRlRmlsZVJlc3VsdCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGFjdGlvbkRhdGEub2JqIGFzIERyaXZlSXRlbSlcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zdCB0eXBlSGFuZGxlciA9IHJlc3VsdEhhbmRsZXJzW29ialR5cGVdO1xuXHRcdFx0XHRpZiAodHlwZUhhbmRsZXIpIHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCB0eXBlSGFuZGxlcigpO1xuXHRcdFx0XHRcdGlmIChyZXMpIHtcblx0XHRcdFx0XHRcdGxhc3RSZXNwb25zZS5yZXNwb25kKFtyZXNdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gZWxzZSBpZiAocmVzdWx0LmFjdGlvbi50cmlnZ2VyID09PSBcInVzZXItYWN0aW9uXCIpIHtcblx0XHRcdHJldHVybiB0aGlzLmhhbmRsZUFjdGlvbihyZXN1bHQuYWN0aW9uLm5hbWUsIHJlc3VsdC5kYXRhIGFzIEFjdGlvbkRhdGEsIGxhc3RSZXNwb25zZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbm5lY3QgdG8gdGhlIGdyYXBoIEFQSS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY29ubmVjdFRvTVMzNjUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICghdGhpcy5fc2V0dGluZ3M/LmNsaWVudElkIHx8ICF0aGlzLl9zZXR0aW5ncz8udGVuYW50SWQgfHwgIXRoaXMuX3NldHRpbmdzPy5yZWRpcmVjdFVyaSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIG1pc3NpbmcgY2xpZW50SWQsIHRlbmFudElkIG9yIHJlZGlyZWN0VXJpXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJDb25uZWN0aW5nIHRvIE1TIEdyYXBoIEFQSVwiLCB7XG5cdFx0XHRcdGNsaWVudElkOiB0aGlzLl9zZXR0aW5ncy5jbGllbnRJZCxcblx0XHRcdFx0dGVuYW50SWQ6IHRoaXMuX3NldHRpbmdzLnRlbmFudElkLFxuXHRcdFx0XHRyZWRpcmVjdFVyaTogdGhpcy5fc2V0dGluZ3MucmVkaXJlY3RVcmlcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAodGhpcy5fc2V0dGluZ3MuZW5hYmxlTGliTG9nZ2luZykge1xuXHRcdFx0XHRlbmFibGVMb2dnaW5nKCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX2Nvbm5lY3Rpb25FcnJvciA9IHVuZGVmaW5lZDtcblx0XHRcdHRoaXMuX21zMzY1Q29ubmVjdGlvbiA9IGF3YWl0IGNvbm5lY3QoXG5cdFx0XHRcdHRoaXMuX3NldHRpbmdzLmNsaWVudElkLFxuXHRcdFx0XHR0aGlzLl9zZXR0aW5ncy50ZW5hbnRJZCxcblx0XHRcdFx0dGhpcy5fc2V0dGluZ3MucmVkaXJlY3RVcmksXG5cdFx0XHRcdHRoaXMuX3NldHRpbmdzLnBlcm1pc3Npb25zXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLl9jYWNoZUludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gdGhpcy51cGRhdGVDYWNoZSgpLCAzMDAwMCk7XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlQ2FjaGUoKTtcblx0XHRcdH0sIDApO1xuXG5cdFx0XHRpZiAodGhpcy5fY29ubmVjdExhc3RSZXNwb25zZSkge1xuXHRcdFx0XHR0aGlzLl9jb25uZWN0TGFzdFJlc3BvbnNlLnJldm9rZShgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tY29ubmVjdGApO1xuXHRcdFx0XHR0aGlzLl9jb25uZWN0TGFzdFJlc3BvbnNlID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5fbXMzNjVDb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuXHRcdFx0dGhpcy5fY29ubmVjdGlvbkVycm9yID0gdGhpcy5mb3JtYXRFcnJvcihlcnIpO1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkNvbm5lY3RpbmcgdG8gTVMgR3JhcGggQVBJIGZhaWxlZFwiLCBlcnIpO1xuXHRcdFx0aWYgKHRoaXMuX2Nvbm5lY3RMYXN0UmVzcG9uc2UgJiYgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzKSB7XG5cdFx0XHRcdGNvbnN0IHRoZW1lQ2xpZW50ID0gYXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLmdldFRoZW1lQ2xpZW50KCk7XG5cdFx0XHRcdHRoaXMuX2Nvbm5lY3RMYXN0UmVzcG9uc2UucmVzcG9uZChbXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVDb25uZWN0UmVzdWx0KFxuXHRcdFx0XHRcdFx0dGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLnRlbXBsYXRlSGVscGVycyxcblx0XHRcdFx0XHRcdGF3YWl0IHRoZW1lQ2xpZW50LmdldFBhbGV0dGUoKVxuXHRcdFx0XHRcdClcblx0XHRcdFx0XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhbiBhY3Rpb24gZnJvbSBhIGhvbWUgdGVtcGxhdGUuXG5cdCAqIEBwYXJhbSBhY3Rpb25OYW1lIFRoZSBuYW1lIG9mIHRoZSBhY3Rpb24uXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gbGFzdFJlc3BvbnNlIFRoZSBsYXN0IHJlc3BvbnNlIGluIGNhc2Ugd2UgbmVlZCB0byB1cGRhdGUgdGhlIHJlc3VsdHMuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGFjdGlvbiB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlQWN0aW9uKFxuXHRcdGFjdGlvbk5hbWU6IHN0cmluZyxcblx0XHRhY3Rpb25EYXRhOiBBY3Rpb25EYXRhLFxuXHRcdGxhc3RSZXNwb25zZTogSG9tZVNlYXJjaExpc3RlbmVyUmVzcG9uc2Vcblx0KTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0c3dpdGNoIChhY3Rpb25OYW1lKSB7XG5cdFx0XHRjYXNlIE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fQ09OTkVDVDpcblx0XHRcdFx0bGFzdFJlc3BvbnNlLnJldm9rZShgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tY29ubmVjdGApO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNvbm5lY3RUb01TMzY1KCk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NBTEw6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZVRlYW1zQ2FsbChhY3Rpb25EYXRhKTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19NRUVUSU5HOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVUZWFtc01lZXRpbmcoYWN0aW9uRGF0YSk7XG5cdFx0XHRjYXNlIE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0hBVDpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlVGVhbXNDaGF0KGFjdGlvbkRhdGEpO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRU1BSUw6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZU91dGxvb2tNYWlsKGFjdGlvbkRhdGEpO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRVZFTlQ6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZU91dGxvb2tFdmVudChhY3Rpb25EYXRhKTtcblx0XHRcdGNhc2UgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9QSE9ORV9DQUxMOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVQaG9uZUNhbGwoYWN0aW9uRGF0YSk7XG5cdFx0XHRjYXNlIE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fU0hBUkVfQ09OVEFDVDpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlU2hhcmVDb250YWN0KGFjdGlvbkRhdGEpO1xuXHRcdFx0Y2FzZSBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX0NPUFk6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZUNvcHkoYWN0aW9uRGF0YSk7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRpZiAoYWN0aW9uTmFtZS5zdGFydHNXaXRoKE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1BFTikpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVPcGVuKGFjdGlvbk5hbWUsIGFjdGlvbkRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIGEgdGVhbXMgY2FsbC5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSBjYWxsLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIGl0IHdhcyBoYW5kbGVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVUZWFtc0NhbGwoYWN0aW9uRGF0YTogQWN0aW9uRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24pIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIlRlYW1zIENhbGxcIiwgYWN0aW9uRGF0YS5lbWFpbHMpO1xuXHRcdFx0Y29uc3QgdGVhbXNDb25uZWN0aW9uID0gbmV3IFRlYW1zQ29ubmVjdGlvbih0aGlzLl9tczM2NUNvbm5lY3Rpb24pO1xuXHRcdFx0YXdhaXQgdGVhbXNDb25uZWN0aW9uLnN0YXJ0Q2FsbChhY3Rpb25EYXRhLmVtYWlscyk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIGNvbm5lY3Rpb25cIik7XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIGEgdGVhbXMgbWVldGluZy5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSBtZWV0aW5nLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIGl0IHdhcyBoYW5kbGVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVUZWFtc01lZXRpbmcoYWN0aW9uRGF0YTogQWN0aW9uRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24gJiYgYWN0aW9uRGF0YS5lbWFpbHMpIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIlRlYW1zIE1lZXRpbmdcIiwgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmN1cnJlbnRVc2VyLm1haWwsIGFjdGlvbkRhdGEuZW1haWxzKTtcblx0XHRcdGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKFxuXHRcdFx0XHRgJHtNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fVEVBTVNfUFJPVE9DT0x9L2wvbWVldGluZy9uZXc/YXR0ZW5kZWVzPSR7XG5cdFx0XHRcdFx0dGhpcy5fbXMzNjVDb25uZWN0aW9uLmN1cnJlbnRVc2VyLm1haWxcblx0XHRcdFx0fSwke2FjdGlvbkRhdGEuZW1haWxzLmpvaW4oXCIsXCIpfWBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIGNvbm5lY3Rpb24sIG9yIGFjdGlvbiBlbWFpbHNcIiwgYWN0aW9uRGF0YS5lbWFpbHMpO1xuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhIHRlYW1zIGNoYXQuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciB0aGUgY2hhdC5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlVGVhbXNDaGF0KGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uPy5jdXJyZW50VXNlcj8ubWFpbCkge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFxuXHRcdFx0XHRcIlRlYW1zIENoYXRcIixcblx0XHRcdFx0dGhpcy5fbXMzNjVDb25uZWN0aW9uLmN1cnJlbnRVc2VyLm1haWwsXG5cdFx0XHRcdGFjdGlvbkRhdGEudGVhbUlkLFxuXHRcdFx0XHRhY3Rpb25EYXRhLmNoYW5uZWxJZCxcblx0XHRcdFx0YWN0aW9uRGF0YS5lbWFpbHNcblx0XHRcdCk7XG5cdFx0XHRjb25zdCB0ZWFtc0Nvbm5lY3Rpb24gPSBuZXcgVGVhbXNDb25uZWN0aW9uKHRoaXMuX21zMzY1Q29ubmVjdGlvbik7XG5cblx0XHRcdGlmIChhY3Rpb25EYXRhLmNoYXRJZCAmJiBhY3Rpb25EYXRhLm1lc3NhZ2VJZCkge1xuXHRcdFx0XHRhd2FpdCBmaW4uU3lzdGVtLm9wZW5VcmxXaXRoQnJvd3Nlcihcblx0XHRcdFx0XHRgJHtNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fVEVBTVNfUFJPVE9DT0x9L2wvbWVzc2FnZS8ke2FjdGlvbkRhdGEuY2hhdElkfS8ke2FjdGlvbkRhdGEubWVzc2FnZUlkfWBcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSBpZiAoYWN0aW9uRGF0YS50ZWFtSWQpIHtcblx0XHRcdFx0YXdhaXQgdGVhbXNDb25uZWN0aW9uLnN0YXJ0Q2hhdCh7IHRlYW1JZDogYWN0aW9uRGF0YS50ZWFtSWQsIGNoYW5uZWxJZDogYWN0aW9uRGF0YS5jaGFubmVsSWQgfSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGlvbkRhdGEuZW1haWxzKSB7XG5cdFx0XHRcdGF3YWl0IHRlYW1zQ29ubmVjdGlvbi5zdGFydENoYXQoe1xuXHRcdFx0XHRcdGVtYWlsQWRkcmVzc2VzOiBbdGhpcy5fbXMzNjVDb25uZWN0aW9uLmN1cnJlbnRVc2VyLm1haWwsIC4uLmFjdGlvbkRhdGEuZW1haWxzXVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFxuXHRcdFx0XCJObyBjb25uZWN0aW9uIHVzZXIgbWFpbCwgb3IgYWN0aW9uIGVtYWlsc1wiLFxuXHRcdFx0dGhpcy5fbXMzNjVDb25uZWN0aW9uPy5jdXJyZW50VXNlcj8ubWFpbCxcblx0XHRcdGFjdGlvbkRhdGEuZW1haWxzXG5cdFx0KTtcblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgYW4gb3V0bG9vayBlbWFpbC5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIHRoZSBlbWFpbC5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlT3V0bG9va01haWwoYWN0aW9uRGF0YTogQWN0aW9uRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICh0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMgJiYgdGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIGFjdGlvbkRhdGEuZW1haWxzKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJPcGVuIE91dGxvb2sgTWFpbFwiLCBhY3Rpb25EYXRhLmVtYWlscyk7XG5cblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fbXMzNjVDb25uZWN0aW9uLmV4ZWN1dGVBcGlSZXF1ZXN0PE1lc3NhZ2U+KFwiL3YxLjAvbWUvbWVzc2FnZXNcIiwgXCJQT1NUXCIsIHtcblx0XHRcdFx0dG9SZWNpcGllbnRzOiBhY3Rpb25EYXRhLmVtYWlscy5tYXAoKGUpID0+ICh7XG5cdFx0XHRcdFx0ZW1haWxBZGRyZXNzOiB7XG5cdFx0XHRcdFx0XHRhZGRyZXNzOiBlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSlcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAocmVzcG9uc2U/LmRhdGE/LndlYkxpbmspIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLmxhdW5jaFZpZXcoeyB1cmw6IHJlc3BvbnNlLmRhdGEud2ViTGluayB9KTtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIHdlYkxpbmsgaW4gcmVzcG9uc2UgZGF0YVwiLCByZXNwb25zZS5kYXRhKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhbiBvdXRsb29rIGV2ZW50LlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBmb3IgdGhlIGV2ZW50LlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIGl0IHdhcyBoYW5kbGVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVPdXRsb29rRXZlbnQoYWN0aW9uRGF0YTogQWN0aW9uRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICh0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMgJiYgdGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIGFjdGlvbkRhdGEuZW1haWxzKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJPcGVuIE91dGxvb2sgRXZlbnRcIiwgYWN0aW9uRGF0YS5lbWFpbHMpO1xuXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX21zMzY1Q29ubmVjdGlvbi5leGVjdXRlQXBpUmVxdWVzdDxFdmVudD4oXCIvdjEuMC9tZS9ldmVudHNcIiwgXCJQT1NUXCIsIHtcblx0XHRcdFx0YXR0ZW5kZWVzOiBhY3Rpb25EYXRhLmVtYWlscy5tYXAoKGUpID0+ICh7XG5cdFx0XHRcdFx0ZW1haWxBZGRyZXNzOiB7XG5cdFx0XHRcdFx0XHRhZGRyZXNzOiBlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSlcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAocmVzcG9uc2U/LmRhdGE/LndlYkxpbmspIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzLmxhdW5jaFZpZXcoeyB1cmw6IHJlc3BvbnNlLmRhdGEud2ViTGluayB9KTtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIHdlYkxpbmsgaW4gcmVzcG9uc2UgZGF0YVwiLCByZXNwb25zZS5kYXRhKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBhIHBob25lIGNhbGwuXG5cdCAqIEBwYXJhbSBhY3Rpb25EYXRhIFRoZSBkYXRhIGZvciB0aGUgY2FsbC5cblx0ICogQHJldHVybnMgVHJ1ZSBpZiBpdCB3YXMgaGFuZGxlZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlUGhvbmVDYWxsKGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJQaG9uZSBDYWxsXCIsIGFjdGlvbkRhdGEucGhvbmUpO1xuXHRcdGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKGB0ZWw6JHthY3Rpb25EYXRhLnBob25lfWApO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBvcGVuIG9mIGEgdXJsLlxuXHQgKiBAcGFyYW0gYWN0aW9uTmFtZSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBmb3IgdGhlIHVybCBvcGVuaW5nLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1cmwgd2FzIG9wZW5lZC5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlT3BlbihhY3Rpb25OYW1lOiBzdHJpbmcsIGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRjb25zdCBsaW5rSW5kZXggPSBhY3Rpb25OYW1lLmluZGV4T2YoXCJfXCIpO1xuXHRcdGNvbnN0IHUgPSBsaW5rSW5kZXggPCAwID8gYWN0aW9uRGF0YS51cmwgOiBhY3Rpb25EYXRhLnVybHM/LlthY3Rpb25OYW1lLnNsaWNlKGxpbmtJbmRleCArIDEpXTtcblxuXHRcdGlmICh1KSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJPcGVuXCIsIHUpO1xuXG5cdFx0XHRpZiAodS5zdGFydHNXaXRoKE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9URUFNU19VUkwpKSB7XG5cdFx0XHRcdGF3YWl0IGZpbi5TeXN0ZW0ub3BlblVybFdpdGhCcm93c2VyKFxuXHRcdFx0XHRcdHUucmVwbGFjZShNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fVEVBTVNfVVJMLCBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fVEVBTVNfUFJPVE9DT0wpXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuX2ludGVncmF0aW9uSGVscGVycykge1xuXHRcdFx0XHRhd2FpdCB0aGlzLl9pbnRlZ3JhdGlvbkhlbHBlcnMubGF1bmNoVmlldyh7IHVybDogdSB9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKGBVcmwgbm90IGZvdW5kIGluIGFjdGlvbkRhdGEsIGxpbmtJbmRleCAke2xpbmtJbmRleH1gKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIHNoYXJpbmcgYSBjb250YWN0LlxuXHQgKiBAcGFyYW0gYWN0aW9uRGF0YSBUaGUgZGF0YSBmb3IgdGhlIHNoYXJpbmcuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVybCB3YXMgb3BlbmVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVTaGFyZUNvbnRhY3QoYWN0aW9uRGF0YTogQWN0aW9uRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmIChhY3Rpb25EYXRhPy5lbWFpbHM/LlswXSkge1xuXHRcdFx0Y29uc3QgZmRjM0NvbnRhY3Q6IEZkYzNDb250YWN0ID0ge1xuXHRcdFx0XHR0eXBlOiBcImZkYzMuY29udGFjdFwiLFxuXHRcdFx0XHRuYW1lOiBhY3Rpb25EYXRhLm5hbWUsXG5cdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0ZW1haWw6IGFjdGlvbkRhdGEuZW1haWxzWzBdXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRpZiAod2luZG93LmZkYzMpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiU2hhcmUgQ29udGFjdFwiLCBmZGMzQ29udGFjdCk7XG5cdFx0XHRcdGF3YWl0IHdpbmRvdz8uZmRjMy5yYWlzZUludGVudChcIlZpZXdDb250YWN0XCIsIGZkYzNDb250YWN0IGFzIEZEQzNDb250ZXh0KTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRkRDMyBBUEkgaXMgbm90IGF2YWlsYWJsZSBzbyBWaWV3Q29udGFjdCBjYW5ub3QgYmUgcmFpc2VkLlwiLCBmZGMzQ29udGFjdCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIk5vIGNvbnRhY3QgaW5mb3JtYXRpb24gdG8gc2hhcmVcIiwgYWN0aW9uRGF0YS5lbWFpbHMpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgY29weSB0byBjbGlwYm9hcmQgZm9yIEpTT04gZGF0YS5cblx0ICogQHBhcmFtIGFjdGlvbkRhdGEgVGhlIGRhdGEgZm9yIGNvcHlpbmcuXG5cdCAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVybCB3YXMgb3BlbmVkLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVDb3B5KGFjdGlvbkRhdGE6IEFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJDb3B5IEpTT05cIiwgYWN0aW9uRGF0YS5qc29uKTtcblx0XHRhd2FpdCBmaW4uQ2xpcGJvYXJkLndyaXRlVGV4dCh7IGRhdGE6IEpTT04uc3RyaW5naWZ5KGFjdGlvbkRhdGEuanNvbiwgdW5kZWZpbmVkLCBcIlxcdFwiKSB9KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZW5kIGEgYmF0Y2ggcXVlcnkgdG8gdGhlIE1TMzY1IGdyYXBoLlxuXHQgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIHNlbmQuXG5cdCAqIEBwYXJhbSBpbmNsdWRlT3B0aW9ucyBUaGUgb2JqZWN0IHR5cGVzIHRvIGluY2x1ZGUuXG5cdCAqIEBwYXJhbSBiYXRjaFJlcXVlc3RzIFRoZSBiYXRjaCByZXF1ZXN0cyB0byBzZW5kLlxuXHQgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyB0byBkaXNwbGF5IGluIGhvbWUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIHNlbmRCYXRjaFF1ZXJ5KFxuXHRcdHF1ZXJ5OiBzdHJpbmcsXG5cdFx0aW5jbHVkZU9wdGlvbnM6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzW10sXG5cdFx0YmF0Y2hSZXF1ZXN0czogR3JhcGhCYXRjaFJlcXVlc3RbXVxuXHQpOiBQcm9taXNlPEhvbWVTZWFyY2hSZXN1bHRbXT4ge1xuXHRcdGNvbnN0IGhvbWVSZXN1bHRzOiBIb21lU2VhcmNoUmVzdWx0W10gPSBbXTtcblxuXHRcdGlmICh0aGlzLl9tczM2NUNvbm5lY3Rpb24gJiYgdGhpcy5faW50ZWdyYXRpb25IZWxwZXJzKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHcmFwaCBBUEkgQmF0Y2ggUmVxdWVzdFwiLCBiYXRjaFJlcXVlc3RzKTtcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgYmF0Y2hSZXNwb25zZXMgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPihcblx0XHRcdFx0XHRcIi92MS4wLyRiYXRjaFwiLFxuXHRcdFx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlcXVlc3RzOiBiYXRjaFJlcXVlc3RzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmIChiYXRjaFJlc3BvbnNlcy5kYXRhPy5yZXNwb25zZXMgJiYgQXJyYXkuaXNBcnJheShiYXRjaFJlc3BvbnNlcy5kYXRhLnJlc3BvbnNlcykpIHtcblx0XHRcdFx0XHRjb25zdCB0aGVtZUNsaWVudCA9IGF3YWl0IHRoaXMuX2ludGVncmF0aW9uSGVscGVycy5nZXRUaGVtZUNsaWVudCgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhbGV0dGUgPSBhd2FpdCB0aGVtZUNsaWVudC5nZXRQYWxldHRlKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiYXRjaFJlc3BvbnNlIG9mIGJhdGNoUmVzcG9uc2VzLmRhdGEucmVzcG9uc2VzKSB7XG5cdFx0XHRcdFx0XHRpZiAoYmF0Y2hSZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oYCR7YmF0Y2hSZXNwb25zZS5pZH0gUmVzcG9uc2VgLCBiYXRjaFJlc3BvbnNlLmJvZHkpO1xuXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuaGFuZGxlQmF0Y2hRdWVyeVJlc3BvbnNlKFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2ludGVncmF0aW9uSGVscGVycy50ZW1wbGF0ZUhlbHBlcnMsXG5cdFx0XHRcdFx0XHRcdFx0cGFsZXR0ZSxcblx0XHRcdFx0XHRcdFx0XHRpbmNsdWRlT3B0aW9ucyxcblx0XHRcdFx0XHRcdFx0XHRiYXRjaFJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0XHRcdGhvbWVSZXN1bHRzXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFxuXHRcdFx0XHRcdFx0XHRcdGAke2JhdGNoUmVzcG9uc2UuaWR9IFJlc3BvbnNlIEZhaWxlZGAsXG5cdFx0XHRcdFx0XHRcdFx0YmF0Y2hSZXNwb25zZS5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0YmF0Y2hSZXNwb25zZS5ib2R5XG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkJhdGNoIFJlc3BvbnNlIEZhaWxlZFwiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiTm8gY29ubmVjdGlvbiBmb3Igc2VuZGluZyBiYXRjaCByZXF1ZXN0XCIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBob21lUmVzdWx0cztcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgdGhlIHJlc3BvbnNlIGZyb20gYSBiYXRjaCBxdWVyeS5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gaW5jbHVkZU9wdGlvbnMgVGhlIG9iamVjdCB0eXBlcyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhlIGJhdGNoIHJlcXVlc3QuXG5cdCAqIEBwYXJhbSBiYXRjaFJlc3BvbnNlIFRoZSByZXNwb25zZSBmcm9tIHRoZSBxdWVyeS5cblx0ICogQHBhcmFtIGhvbWVSZXN1bHRzIFRoZSByZXN1bHRzIGZvciB0aGUgcmVzcG9uc2VzLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVCYXRjaFF1ZXJ5UmVzcG9uc2UoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHRpbmNsdWRlT3B0aW9uczogTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXNbXSxcblx0XHRiYXRjaFJlc3BvbnNlOiBHcmFwaEJhdGNoUmVzcG9uc2VJdGVtLFxuXHRcdGhvbWVSZXN1bHRzOiBIb21lU2VhcmNoUmVzdWx0W11cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdHlwZSA9IGJhdGNoUmVzcG9uc2UuaWQuc3BsaXQoXCItXCIpWzBdIGFzIE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzO1xuXG5cdFx0aWYgKGluY2x1ZGVPcHRpb25zLmluY2x1ZGVzKHR5cGUpKSB7XG5cdFx0XHRpZiAodHlwZSA9PT0gXCJVc2VyXCIpIHtcblx0XHRcdFx0Y29uc3QgdXNlcnMgPSAoYmF0Y2hSZXNwb25zZS5ib2R5IGFzIEdyYXBoTGlzdFJlc3BvbnNlPFVzZXI+KS52YWx1ZTtcblxuXHRcdFx0XHRpZiAodXNlcnM/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgdSBvZiB1c2Vycykge1xuXHRcdFx0XHRcdFx0aG9tZVJlc3VsdHMucHVzaChcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgdSwgXCJkaXNwbGF5TmFtZVwiLCBcIlVzZXJcIilcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiQ29udGFjdFwiKSB7XG5cdFx0XHRcdGNvbnN0IGNvbnRhY3RzID0gKGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxDb250YWN0PikudmFsdWU7XG5cdFx0XHRcdGlmIChjb250YWN0cz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjIG9mIGNvbnRhY3RzKSB7XG5cdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBjLCBcImRpc3BsYXlOYW1lXCIsIFwiQ29udGFjdFwiKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJNZXNzYWdlXCIpIHtcblx0XHRcdFx0Y29uc3QgbWVzc2FnZXMgPSAoYmF0Y2hSZXNwb25zZS5ib2R5IGFzIEdyYXBoTGlzdFJlc3BvbnNlPE1lc3NhZ2U+KS52YWx1ZTtcblx0XHRcdFx0aWYgKG1lc3NhZ2VzPy5sZW5ndGgpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcy5maWx0ZXIoXG5cdFx0XHRcdFx0XHQobSkgPT4gbS5zdWJqZWN0ICYmICFtLnN1YmplY3Quc3RhcnRzV2l0aChcIkNhbmNlbGVkXCIpICYmICFtLnN1YmplY3Quc3RhcnRzV2l0aChcIlVuZGVsaXZlcmFibGVcIilcblx0XHRcdFx0XHQpKSB7XG5cdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBtc2csIFwic3ViamVjdFwiLCBcIk1lc3NhZ2VcIilcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiRXZlbnRcIikge1xuXHRcdFx0XHRjb25zdCBncmFwaFJlc3BvbnNlID0gYmF0Y2hSZXNwb25zZS5ib2R5IGFzIEdyYXBoTGlzdFJlc3BvbnNlPFNlYXJjaFJlc3BvbnNlPjtcblx0XHRcdFx0Y29uc3Qgc2VhcmNoUmVzcG9uc2UgPSBncmFwaFJlc3BvbnNlPy52YWx1ZT8uWzBdO1xuXHRcdFx0XHRjb25zdCBldmVudHMgPSBzZWFyY2hSZXNwb25zZT8uaGl0c0NvbnRhaW5lcnM/LlswXT8uaGl0cztcblx0XHRcdFx0aWYgKGV2ZW50cz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBldnQgb2YgZXZlbnRzLmZpbHRlcigoZSkgPT4gKGUucmVzb3VyY2UgYXMgRXZlbnQpLnN1YmplY3QpKSB7XG5cdFx0XHRcdFx0XHRob21lUmVzdWx0cy5wdXNoKFxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUxvYWRpbmdSZXN1bHQoXG5cdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVIZWxwZXJzLFxuXHRcdFx0XHRcdFx0XHRcdHBhbGV0dGUsXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IHRoaXMuYmFzZTY0SWRUb1VybChldnQuaGl0SWQpLFxuXHRcdFx0XHRcdFx0XHRcdFx0Li4uZXZ0LnJlc291cmNlXG5cdFx0XHRcdFx0XHRcdFx0fSBhcyBFdmVudCxcblx0XHRcdFx0XHRcdFx0XHRcInN1YmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcIkV2ZW50XCJcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJDaGF0TWVzc2FnZVwiKSB7XG5cdFx0XHRcdGNvbnN0IGdyYXBoUmVzcG9uc2UgPSBiYXRjaFJlc3BvbnNlLmJvZHkgYXMgR3JhcGhMaXN0UmVzcG9uc2U8U2VhcmNoUmVzcG9uc2U+O1xuXHRcdFx0XHRjb25zdCBzZWFyY2hSZXNwb25zZSA9IGdyYXBoUmVzcG9uc2U/LnZhbHVlPy5bMF07XG5cdFx0XHRcdGNvbnN0IGNoYXRNZXNzYWdlcyA9IHNlYXJjaFJlc3BvbnNlPy5oaXRzQ29udGFpbmVycz8uWzBdPy5oaXRzO1xuXHRcdFx0XHRpZiAoY2hhdE1lc3NhZ2VzPy5sZW5ndGgpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNodCBvZiBjaGF0TWVzc2FnZXMpIHtcblx0XHRcdFx0XHRcdGhvbWVSZXN1bHRzLnB1c2goXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlTG9hZGluZ1Jlc3VsdChcblx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUhlbHBlcnMsXG5cdFx0XHRcdFx0XHRcdFx0cGFsZXR0ZSxcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogdGhpcy5iYXNlNjRJZFRvVXJsKGNodC5oaXRJZCksXG5cdFx0XHRcdFx0XHRcdFx0XHQuLi5jaHQucmVzb3VyY2UsXG5cdFx0XHRcdFx0XHRcdFx0XHRzdW1tYXJ5OiBjaHQuc3VtbWFyeVxuXHRcdFx0XHRcdFx0XHRcdH0gYXMgQ2hhdE1lc3NhZ2UsXG5cdFx0XHRcdFx0XHRcdFx0XCJzdW1tYXJ5XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJDaGF0TWVzc2FnZVwiXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiRmlsZVwiKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVzID0gKGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxEcml2ZUl0ZW0+KS52YWx1ZTtcblx0XHRcdFx0aWYgKGZpbGVzPy5sZW5ndGgpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGYgb2YgZmlsZXMpIHtcblx0XHRcdFx0XHRcdGhvbWVSZXN1bHRzLnB1c2goYXdhaXQgdGhpcy5jcmVhdGVMb2FkaW5nUmVzdWx0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgZiwgXCJuYW1lXCIsIFwiRmlsZVwiKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCBmb3IgaG9tZSB0byBhbGxvdyByZWNvbm5lY3Rpb24uXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHJldHVybnMgVGhlIGNvbm5lY3QgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUNvbm5lY3RSZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldFxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IGxheW91dCA9IGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0W1xuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFwicm93XCIsXG5cdFx0XHRcdFx0W2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUZXh0KFwidGl0bGVcIiwgMTIsIHsgZm9udFdlaWdodDogXCJib2xkXCIgfSldLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGJvcmRlckJvdHRvbTogYDFweCBzb2xpZCAke3BhbGV0dGUuYmFja2dyb3VuZDZ9YCxcblx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRnYXA6IFwiNXB4XCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCksXG5cdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUZXh0KFwiZGVzY3JpcHRpb25cIiwgMTIpLFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChcImVycm9yXCIsIDEyLCB7XG5cdFx0XHRcdFx0Zm9udEZhbWlseTogXCJtb25vc3BhY2VcIixcblx0XHRcdFx0XHRmbGV4OiAxXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQnV0dG9uKFxuXHRcdFx0XHRcdEJ1dHRvblN0eWxlLlByaW1hcnksXG5cdFx0XHRcdFx0XCJjb25uZWN0XCIsXG5cdFx0XHRcdFx0TWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9DT05ORUNUXG5cdFx0XHRcdClcblx0XHRcdF0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRnYXA6IFwiMTVweFwiLFxuXHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tY29ubmVjdGAsXG5cdFx0XHRzY29yZTogdGhpcy5fZGVmaW5pdGlvbj8uYmFzZVNjb3JlID8/IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9ERUZBVUxUX0JBU0VfU0NPUkUsXG5cdFx0XHR0aXRsZTogdGhpcy5fZGVmaW5pdGlvbj8udGl0bGUgPz8gXCJcIixcblx0XHRcdGxhYmVsOiBcIkNvbm5lY3RcIixcblx0XHRcdGljb246IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMubWljcm9zb2Z0MzY1LFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9DT05ORUNULFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dCxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHRpdGxlOiBgJHt0aGlzLl9kZWZpbml0aW9uPy50aXRsZX0gQ29ubmVjdGlvbmAsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGAke3RoaXMuX2RlZmluaXRpb24/LnRpdGxlfSBmYWlsZWQgdG8gY29ubmVjdCBkdWUgdG8gdGhlIGZvbGxvd2luZyBlcnJvcmAsXG5cdFx0XHRcdFx0ZXJyb3I6IHRoaXMuX2Nvbm5lY3Rpb25FcnJvciA/PyBcIlVua25vd24gY29ubmVjdGlvbiBlcnJvclwiLFxuXHRcdFx0XHRcdGNvbm5lY3Q6IFwiQ29ubmVjdFwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0byBzaG93IHdlIGFyZSBzZWFyY2hpbmcuXG5cdCAqIEByZXR1cm5zIEhvbWUgdGVtcGxhdGUgZm9yIHNlYXJjaGluZy5cblx0ICovXG5cdHByaXZhdGUgY3JlYXRlU2VhcmNoaW5nUmVzdWx0KCk6IENMSVNlYXJjaFJlc3VsdExvYWRpbmc8SG9tZUFjdGlvbj4ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS1zZWFyY2hpbmdgLFxuXHRcdFx0c2NvcmU6IHRoaXMuX2RlZmluaXRpb24/LmJhc2VTY29yZSA/PyBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fREVGQVVMVF9CQVNFX1NDT1JFLFxuXHRcdFx0dGl0bGU6IFwiU2VhcmNoaW5nIC4uLlwiLFxuXHRcdFx0aWNvbjogdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5taWNyb3NvZnQzNjUsXG5cdFx0XHRhY3Rpb25zOiBbXSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWRcblx0XHRcdH0gYXMgQWN0aW9uRGF0YSxcblx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5Mb2FkaW5nLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiBcIlwiXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBob21lIHNlYXJjaCByZXN1bHQgd2hpY2ggZGlzcGxheSBKU09OLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSByZXNwb25zZSBUaGUgcmVzcG9uc2UgdG8gY29udmVydCB0byB0aGUgaG9tZSB0ZW1wbGF0ZS5cblx0ICogQHJldHVybnMgVGhlIGhvbWUgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUdyYXBoSnNvblJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdHJlc3BvbnNlOiBHcmFwaFJlc3BvbnNlXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LXJlc3RgLFxuXHRcdFx0c2NvcmU6IHRoaXMuX2RlZmluaXRpb24/LmJhc2VTY29yZSA/PyBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fREVGQVVMVF9CQVNFX1NDT1JFLFxuXHRcdFx0dGl0bGU6IFwiR3JhcGggUmVzdWx0XCIsXG5cdFx0XHRsYWJlbDogcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgPyBcIkpTT05cIiA6IFwiRXJyb3JcIixcblx0XHRcdGljb246IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMubWljcm9zb2Z0MzY1LFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9DT1BZLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRqc29uOiByZXNwb25zZS5kYXRhXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRleHQoXCJqc29uXCIsIDEyLCB7XG5cdFx0XHRcdFx0Zm9udFNpemU6IFwiMTJweFwiLFxuXHRcdFx0XHRcdGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlXCIsXG5cdFx0XHRcdFx0Y29sb3I6IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwID8gcGFsZXR0ZS50ZXh0RGVmYXVsdCA6IFwicmVkXCIsXG5cdFx0XHRcdFx0d2hpdGVTcGFjZTogXCJwcmVcIixcblx0XHRcdFx0XHRvdmVyZmxvdzogXCJhdXRvXCIsXG5cdFx0XHRcdFx0ZmxleDogMVxuXHRcdFx0XHR9KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGpzb246IEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEsIHVuZGVmaW5lZCwgXCIgIFwiKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByZXN1bHQgd2hpY2ggc2hvdyBhIGxvYWRpbmcgdGVtcGxhdGUuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIG9iaiBUaGUgb2JqZWN0IHRvIGRpc3BsYXkgbG9hZGluZyBmb3IuXG5cdCAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgb2YgdGhlIGl0ZW0uXG5cdCAqIEBwYXJhbSBvYmpUeXBlIFRoZSB0eXBlIG9mIHRoZSBpdGVtLlxuXHQgKiBAcmV0dXJucyBUaGUgaG9tZSBzZWFyY2ggcmVzdWx0LlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVMb2FkaW5nUmVzdWx0PFQgZXh0ZW5kcyBFbnRpdHk+KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0b2JqOiBULFxuXHRcdHRpdGxlOiBrZXlvZiBULFxuXHRcdG9ialR5cGU6IE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0TG9hZGluZzxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IGljb25zID0ge1xuXHRcdFx0VXNlcjogXCJ0ZWFtc1wiLFxuXHRcdFx0Q29udGFjdDogXCJjb250YWN0XCIsXG5cdFx0XHRNZXNzYWdlOiBcImVtYWlsXCIsXG5cdFx0XHRFdmVudDogXCJjYWxlbmRhclwiLFxuXHRcdFx0Q2hhbm5lbDogXCJjaGFubmVsXCIsXG5cdFx0XHRUZWFtOiBcInRlYW1cIixcblx0XHRcdENoYXRNZXNzYWdlOiBcImNoYXRcIixcblx0XHRcdEZpbGU6IFwiZmlsZVwiXG5cdFx0fTtcblxuXHRcdGxldCBsYWJlbCA9IG9ialR5cGUuc3BsaXQoLyg/PVtBLVpdKS8pLmpvaW4oXCIgXCIpO1xuXHRcdGxldCBtaW1lSWNvbjtcblx0XHRpZiAob2JqVHlwZSA9PT0gXCJGaWxlXCIpIHtcblx0XHRcdG1pbWVJY29uID0gdGhpcy5nZXRNaW1lSWNvbihvYmogYXMgRHJpdmVJdGVtLCBwYWxldHRlKTtcblx0XHRcdGlmICh0aGlzLmRyaXZlSXRlbUlzRm9sZGVyKG9iaikpIHtcblx0XHRcdFx0bGFiZWwgPSBcIkZvbGRlclwiO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmRyaXZlSXRlbUlzSW1hZ2Uob2JqKSkge1xuXHRcdFx0XHRsYWJlbCA9IFwiSW1hZ2VcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHtvYmouaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKG9ialR5cGUpLFxuXHRcdFx0dGl0bGU6IChvYmpbdGl0bGVdIGFzIHVua25vd24gYXMgc3RyaW5nKSA/PyBgVW50aXRsZWQgJHtvYmpUeXBlfWAsXG5cdFx0XHRsYWJlbCxcblx0XHRcdGljb246IG1pbWVJY29uID8/IHRoaXMuZ2V0VGhlbWVkSWNvbihpY29uc1tvYmpUeXBlXSwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGUsXG5cdFx0XHRcdG9iaixcblx0XHRcdFx0c3RhdGU6IFwibG9hZGluZ1wiXG5cdFx0XHR9IGFzIEFjdGlvbkxvYWRpbmdEYXRhLFxuXHRcdFx0dGVtcGxhdGU6IENMSVRlbXBsYXRlLkxvYWRpbmcsXG5cdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IFwiXCJcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJlc3VsdCB0byBkaXNwbGF5IGEgdXNlci5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gdXNlciBUaGUgdXNlciB0byBkaXNwbGF5LlxuXHQgKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB0ZW1wbGF0ZS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlVXNlclJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdHVzZXI6IFVzZXJcblx0KTogUHJvbWlzZTxDTElTZWFyY2hSZXN1bHRDdXN0b208SG9tZUFjdGlvbj4+IHtcblx0XHRsZXQgcGljRGF0YTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXHRcdGxldCBwcmVzZW5jZTogUHJlc2VuY2UgfCB1bmRlZmluZWQ7XG5cdFx0bGV0IGF2YWlsYWJsZUNvbG9yOiBcInJlZFwiIHwgXCJncmVlblwiIHwgXCJvcmFuZ2VcIiA9IFwicmVkXCI7XG5cdFx0bGV0IGF2YWlsYWJsZUljb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuX3NldHRpbmdzPy5pbWFnZXMuY3Jvc3M7XG5cdFx0bGV0IGF2YWlsYWJpbGl0eTogc3RyaW5nID0gXCJVbmtub3duXCI7XG5cdFx0Y29uc3QgdGVhbXM6IHN0cmluZ1tdID0gW107XG5cblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uKSB7XG5cdFx0XHRjb25zdCBiYXRjaFJlcXVlc3RzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0XHRiYXRjaFJlcXVlc3RzLnB1c2goYC91c2Vycy8ke3VzZXIuaWR9L3ByZXNlbmNlYCwgYC91c2Vycy8ke3VzZXIuaWR9L21lbWJlck9mYCk7XG5cblx0XHRcdGlmICh1c2VyLmlkKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVt1c2VyLmlkXSkge1xuXHRcdFx0XHRcdHBpY0RhdGEgPSB0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVt1c2VyLmlkXS5kYXRhO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJhdGNoUmVxdWVzdHMucHVzaChgL3VzZXJzLyR7dXNlci5pZH0vcGhvdG8vJHZhbHVlYCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR3JhcGggQVBJIEJhdGNoIFJlcXVlc3RcIiwgYmF0Y2hSZXF1ZXN0cyk7XG5cblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPihcblx0XHRcdFx0XHRcIi92MS4wLyRiYXRjaFwiLFxuXHRcdFx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlcXVlc3RzOiBiYXRjaFJlcXVlc3RzLm1hcCgociwgaWR4KSA9PiAoe1xuXHRcdFx0XHRcdFx0XHRpZDogKGlkeCArIDEpLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0dXJsOiByXG5cdFx0XHRcdFx0XHR9KSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Y29uc3QgcHJlc2VuY2VSZXNwb25zZSA9IHJlc3BvbnNlLmRhdGE/LnJlc3BvbnNlcy5maW5kKChyKSA9PiByLmlkID09PSBcIjFcIik7XG5cdFx0XHRcdGlmIChwcmVzZW5jZVJlc3BvbnNlPy5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdHByZXNlbmNlID0gcHJlc2VuY2VSZXNwb25zZS5ib2R5IGFzIFByZXNlbmNlO1xuXG5cdFx0XHRcdFx0Ly8gQXZhaWxhYmlsaXR5IGlzIGluIFBhc2NhbCBjYXNlLCBzbyBzcGxpdCBvbiBjYXBpdGFscyBhbmQgam9pbiB3aXRoIHNwYWNlXG5cdFx0XHRcdFx0YXZhaWxhYmlsaXR5ID0gcHJlc2VuY2U/LmF2YWlsYWJpbGl0eT8uc3BsaXQoLyg/PVtBLVpdKS8pLmpvaW4oXCIgXCIpID8/IGF2YWlsYWJpbGl0eTtcblxuXHRcdFx0XHRcdGlmIChwcmVzZW5jZT8uYXZhaWxhYmlsaXR5ID09PSBcIkF2YWlsYWJsZVwiKSB7XG5cdFx0XHRcdFx0XHRhdmFpbGFibGVDb2xvciA9IFwiZ3JlZW5cIjtcblx0XHRcdFx0XHRcdGF2YWlsYWJsZUljb24gPSB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLmNoZWNrO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAocHJlc2VuY2U/LmF2YWlsYWJpbGl0eSA9PT0gXCJBd2F5XCIgfHwgcHJlc2VuY2U/LmF2YWlsYWJpbGl0eSA9PT0gXCJCZVJpZ2h0QmFja1wiKSB7XG5cdFx0XHRcdFx0XHRhdmFpbGFibGVDb2xvciA9IFwib3JhbmdlXCI7XG5cdFx0XHRcdFx0XHRhdmFpbGFibGVJY29uID0gdGhpcy5fc2V0dGluZ3M/LmltYWdlcy5jbG9jaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFwiRmFpbGVkIGdldHRpbmcgdXNlciBwcmVzZW5jZVwiLFxuXHRcdFx0XHRcdFx0cHJlc2VuY2VSZXNwb25zZT8uc3RhdHVzLFxuXHRcdFx0XHRcdFx0cHJlc2VuY2VSZXNwb25zZT8uYm9keVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB0ZWFtc1Jlc3BvbnNlID0gcmVzcG9uc2UuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IFwiMlwiKTtcblx0XHRcdFx0aWYgKHRlYW1zUmVzcG9uc2U/LnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWVtYmVyT2YgPSAoXG5cdFx0XHRcdFx0XHR0ZWFtc1Jlc3BvbnNlLmJvZHkgYXMgR3JhcGhMaXN0UmVzcG9uc2U8XG5cdFx0XHRcdFx0XHRcdFRlYW0gJiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJAb2RhdGEudHlwZVwiOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdD5cblx0XHRcdFx0XHQpLnZhbHVlO1xuXHRcdFx0XHRcdGlmIChtZW1iZXJPZikge1xuXHRcdFx0XHRcdFx0Y29uc3QgZXhjbHVkZUdyb3VwcyA9IFtcIkFsbCBVc2Vyc1wiXTtcblx0XHRcdFx0XHRcdGNvbnN0IHRlYW1zTWVtYmVyID0gbWVtYmVyT2YuZmlsdGVyKFxuXHRcdFx0XHRcdFx0XHQobSkgPT5cblx0XHRcdFx0XHRcdFx0XHRtW1wiQG9kYXRhLnR5cGVcIl0gPT09IFwiI21pY3Jvc29mdC5ncmFwaC5ncm91cFwiICYmICFleGNsdWRlR3JvdXBzLmluY2x1ZGVzKG0uZGlzcGxheU5hbWUgPz8gXCJcIilcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG1lbWJlciBvZiB0ZWFtc01lbWJlcikge1xuXHRcdFx0XHRcdFx0XHRpZiAobWVtYmVyLmRpc3BsYXlOYW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGVhbXMucHVzaChtZW1iZXIuZGlzcGxheU5hbWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJGYWlsZWQgZ2V0dGluZyB1c2VyIHRlYW1zXCIsIHRlYW1zUmVzcG9uc2U/LnN0YXR1cywgdGVhbXNSZXNwb25zZT8uYm9keSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBwcm9maWxlUmVzcG9uc2UgPSByZXNwb25zZS5kYXRhPy5yZXNwb25zZXMuZmluZCgocikgPT4gci5pZCA9PT0gXCIzXCIpO1xuXHRcdFx0XHRpZiAocHJvZmlsZVJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0aWYgKHByb2ZpbGVSZXNwb25zZT8uc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRcdHBpY0RhdGEgPSBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke3Byb2ZpbGVSZXNwb25zZS5ib2R5IGFzIHN0cmluZ31gO1xuXHRcdFx0XHRcdFx0dGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbdXNlci5pZCA/PyBcIlwiXSA9IHtcblx0XHRcdFx0XHRcdFx0ZGF0YTogcGljRGF0YSxcblx0XHRcdFx0XHRcdFx0YWRkZWQ6IERhdGUubm93KClcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIElmIHRoZSByZXF1ZXN0IGZhaWxlZCB0aGUgSlNPTiBlcnJvciBpcyBzdGlsbCBiYXNlNjQgZW5jb2RlZFxuXHRcdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFx0XCJGYWlsZWQgZ2V0dGluZyB1c2VyIHByb2ZpbGUgcGljXCIsXG5cdFx0XHRcdFx0XHRcdHByb2ZpbGVSZXNwb25zZS5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdGF0b2IocHJvZmlsZVJlc3BvbnNlLmJvZHkgYXMgc3RyaW5nKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIHBlcmZvcm1pbmcgQVBJIGJhdGNoIHJlcXVlc3RcIiwgZXJyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBwYWlyczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuXG5cdFx0aWYgKHVzZXIuam9iVGl0bGUpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJUaXRsZVwiLCB2YWx1ZTogdXNlci5qb2JUaXRsZSB9KTtcblx0XHR9XG5cblx0XHRpZiAodXNlci5kZXBhcnRtZW50KSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiRGVwYXJ0bWVudFwiLCB2YWx1ZTogdXNlci5kZXBhcnRtZW50IH0pO1xuXHRcdH1cblxuXHRcdGlmICh1c2VyLm1haWwpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJFLW1haWxcIiwgdmFsdWU6IHVzZXIubWFpbCB9KTtcblx0XHR9XG5cblx0XHRsZXQgcGhvbmU7XG5cdFx0aWYgKHVzZXIubW9iaWxlUGhvbmUpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJDZWxsXCIsIHZhbHVlOiB1c2VyLm1vYmlsZVBob25lIH0pO1xuXHRcdFx0cGhvbmUgPSB1c2VyLm1vYmlsZVBob25lO1xuXHRcdH1cblxuXHRcdGlmICh1c2VyLmJ1c2luZXNzUGhvbmVzPy5sZW5ndGgpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJCdXNpbmVzc1wiLCB2YWx1ZTogdXNlci5idXNpbmVzc1Bob25lc1swXSB9KTtcblx0XHRcdHBob25lID0gcGhvbmUgPz8gdXNlci5idXNpbmVzc1Bob25lc1swXTtcblx0XHR9XG5cdFx0aWYgKHRlYW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJUZWFtc1wiLCB2YWx1ZTogdGVhbXMuam9pbihcIiwgXCIpIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImNhbGxUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0FMTCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwiY2FsbEltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJUZWFtcyBDYWxsXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImVtYWlsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRU1BSUwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImVtYWlsSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkUtbWFpbFwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJtZWV0aW5nVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX01FRVRJTkcsXG5cdFx0XHRcdGltYWdlS2V5OiBcIm1lZXRpbmdJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiTWVldGluZ1wiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZUtleTogXCJjaGF0VGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NIQVQsXG5cdFx0XHRcdGltYWdlS2V5OiBcImNoYXRJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiQ2hhdFwiXG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS0ke3VzZXIuaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKFwiVXNlclwiKSxcblx0XHRcdHRpdGxlOiB1c2VyLmRpc3BsYXlOYW1lID8/IFwiXCIsXG5cdFx0XHRsYWJlbDogXCJVc2VyXCIsXG5cdFx0XHRpY29uOiB0aGlzLmdldFRoZW1lZEljb24oXCJ0ZWFtc1wiLCBwYWxldHRlKSxcblx0XHRcdGFjdGlvbnM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fVEVBTVNfQ0FMTCxcblx0XHRcdFx0XHRob3RrZXk6IFwiRW50ZXJcIlxuXHRcdFx0XHR9XG5cdFx0XHRdLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRwcm92aWRlcklkOiB0aGlzLl9kZWZpbml0aW9uPy5pZCxcblx0XHRcdFx0b2JqVHlwZTogXCJVc2VyXCIsXG5cdFx0XHRcdG9iajogdXNlcixcblx0XHRcdFx0ZW1haWxzOiBbdXNlci5tYWlsXSxcblx0XHRcdFx0cGhvbmUsXG5cdFx0XHRcdG5hbWU6IHVzZXIuZGlzcGxheU5hbWVcblx0XHRcdH0gYXMgQWN0aW9uRGF0YSxcblx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5DdXN0b20sXG5cdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IHtcblx0XHRcdFx0bGF5b3V0OiBhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFwiY29sdW1uXCIsXG5cdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcdFx0XCJyb3dcIixcblx0XHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVJbWFnZShcInBpY0RhdGFcIiwgdXNlci5kaXNwbGF5TmFtZSA/PyBcIlwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogXCI0NHB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiNDRweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0Rml0OiBcImNvdmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRib3JkZXJSYWRpdXM6IFwiNTAlXCJcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlSW1hZ2UoXCJzdGF0dXNcIiwgYXZhaWxhYmlsaXR5LCB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogXCIxNnB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiBhdmFpbGFibGVDb2xvcixcblx0XHRcdFx0XHRcdFx0XHRcdGJvcmRlclJhZGl1czogXCI1MCVcIixcblx0XHRcdFx0XHRcdFx0XHRcdGJvcmRlcjogXCIycHggc29saWQgd2hpdGVcIixcblx0XHRcdFx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMnB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bGVmdDogXCItMTRweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0dG9wOiBcIjI4cHhcIlxuXHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGl0bGUoXCJkaXNwbGF5TmFtZVwiKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRleHQoXCJhdmFpbGFiaWxpdHlcIiwgMTAsIHt9KVxuXHRcdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0XHRnYXA6IFwiNXB4XCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlUGFpcnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBwYWlycyksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUJ1dHRvbnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBidXR0b25zKVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cGFkZGluZzogXCIxMHB4XCIsXG5cdFx0XHRcdFx0XHRnYXA6IFwiMTVweFwiLFxuXHRcdFx0XHRcdFx0ZmxleDogXCIxXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCksXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRwaWNEYXRhOiBwaWNEYXRhID8/IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNvbnRhY3RcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0c3RhdHVzOiBhdmFpbGFibGVJY29uID8/IFwiXCIsXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUgPz8gXCJcIixcblx0XHRcdFx0XHRhdmFpbGFiaWxpdHksXG5cdFx0XHRcdFx0Li4udGhpcy5tYXBQYWlyc1RvRGF0YShwYWlycyksXG5cdFx0XHRcdFx0Y2FsbFRpdGxlOiBcIlRlYW1zIENhbGxcIixcblx0XHRcdFx0XHRjYWxsSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcInRlYW1zXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGVtYWlsVGl0bGU6IFwiT3V0bG9vayBFLW1haWxcIixcblx0XHRcdFx0XHRlbWFpbEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJlbWFpbFwiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRtZWV0aW5nVGl0bGU6IFwiVGVhbXMgTWVldGluZ1wiLFxuXHRcdFx0XHRcdG1lZXRpbmdJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2FsZW5kYXJcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0Y2hhdFRpdGxlOiBcIlRlYW1zIENoYXRcIixcblx0XHRcdFx0XHRjaGF0SW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNoYXRcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IHRvIHNob3cgYSBjb250YWN0LlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBjb250YWN0IFRoZSBjb250YWN0IGRldGFpbHMuXG5cdCAqIEByZXR1cm5zIFRoZSBjb250YWN0IHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVDb250YWN0UmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0Y29udGFjdDogQ29udGFjdFxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGxldCBwaWNEYXRhOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbiAmJiBjb250YWN0LmlkKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVtjb250YWN0LmlkXSkge1xuXHRcdFx0XHRcdHBpY0RhdGEgPSB0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVtjb250YWN0LmlkXS5kYXRhO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGJhdGNoUmVxdWVzdHM6IHN0cmluZ1tdID0gW2AvbWUvY29udGFjdHMvJHtjb250YWN0LmlkfS9waG90by8kdmFsdWVgXTtcblxuXHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIkdyYXBoIEFQSSBCYXRjaCBSZXF1ZXN0XCIsIHtcblx0XHRcdFx0XHRcdHBob3RvOiBiYXRjaFJlcXVlc3RzWzBdXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX21zMzY1Q29ubmVjdGlvbi5leGVjdXRlQXBpUmVxdWVzdDxHcmFwaEJhdGNoUmVzcG9uc2U+KFxuXHRcdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0czogYmF0Y2hSZXF1ZXN0cy5tYXAoKHIsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0XHRpZDogKGlkeCArIDEpLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHRcdHVybDogclxuXHRcdFx0XHRcdFx0XHR9KSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Y29uc3QgcHJvZmlsZVJlc3BvbnNlID0gcmVzcG9uc2UuZGF0YT8ucmVzcG9uc2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IFwiMVwiKTtcblx0XHRcdFx0XHRpZiAocHJvZmlsZVJlc3BvbnNlPy5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdFx0cGljRGF0YSA9IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7cHJvZmlsZVJlc3BvbnNlLmJvZHkgYXMgc3RyaW5nfWA7XG5cdFx0XHRcdFx0XHR0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVtjb250YWN0LmlkXSA9IHtcblx0XHRcdFx0XHRcdFx0ZGF0YTogcGljRGF0YSxcblx0XHRcdFx0XHRcdFx0YWRkZWQ6IERhdGUubm93KClcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIElmIHRoZSByZXF1ZXN0IGZhaWxlZCB0aGUgSlNPTiBlcnJvciBpcyBzdGlsbCBiYXNlNjQgZW5jb2RlZFxuXHRcdFx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcblx0XHRcdFx0XHRcdFx0XCJGYWlsZWQgZ2V0dGluZyBjb250YWN0IHByb2ZpbGUgcGljXCIsXG5cdFx0XHRcdFx0XHRcdHByb2ZpbGVSZXNwb25zZT8uc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRhdG9iKHByb2ZpbGVSZXNwb25zZT8uYm9keSBhcyBzdHJpbmcpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBwZXJmb3JtaW5nIEFQSSBiYXRjaCByZXF1ZXN0XCIsIGVycik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9W10gPSBbXTtcblxuXHRcdGlmIChjb250YWN0LmNvbXBhbnlOYW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiQ29tcGFueVwiLCB2YWx1ZTogY29udGFjdC5jb21wYW55TmFtZSB9KTtcblx0XHR9XG5cblx0XHRpZiAoY29udGFjdC5qb2JUaXRsZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIlRpdGxlXCIsIHZhbHVlOiBjb250YWN0LmpvYlRpdGxlIH0pO1xuXHRcdH1cblxuXHRcdGlmIChjb250YWN0LmRlcGFydG1lbnQpIHtcblx0XHRcdHBhaXJzLnB1c2goeyBsYWJlbDogXCJEZXBhcnRtZW50XCIsIHZhbHVlOiBjb250YWN0LmRlcGFydG1lbnQgfSk7XG5cdFx0fVxuXG5cdFx0bGV0IHBob25lO1xuXHRcdGxldCBlbWFpbDtcblxuXHRcdGlmIChjb250YWN0Lm1vYmlsZVBob25lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiQ2VsbFwiLCB2YWx1ZTogY29udGFjdC5tb2JpbGVQaG9uZSB9KTtcblx0XHRcdHBob25lID0gY29udGFjdC5tb2JpbGVQaG9uZTtcblx0XHR9XG5cblx0XHRpZiAoY29udGFjdC5idXNpbmVzc1Bob25lcz8ubGVuZ3RoKSB7XG5cdFx0XHRwYWlycy5wdXNoKHsgbGFiZWw6IFwiQnVzaW5lc3NcIiwgdmFsdWU6IGNvbnRhY3QuYnVzaW5lc3NQaG9uZXNbMF0gfSk7XG5cdFx0XHRwaG9uZSA9IHBob25lID8/IGNvbnRhY3QuYnVzaW5lc3NQaG9uZXNbMF07XG5cdFx0fVxuXG5cdFx0aWYgKGNvbnRhY3QuZW1haWxBZGRyZXNzZXM/Lmxlbmd0aCkge1xuXHRcdFx0Zm9yIChjb25zdCBlIG9mIGNvbnRhY3QuZW1haWxBZGRyZXNzZXMpIHtcblx0XHRcdFx0aWYgKGUuYWRkcmVzcz8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0cGFpcnMucHVzaCh7IGxhYmVsOiBcIkUtbWFpbFwiLCB2YWx1ZTogZS5hZGRyZXNzIH0pO1xuXHRcdFx0XHRcdGVtYWlsID0gZW1haWwgPz8gZS5hZGRyZXNzO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXSA9IFtdO1xuXG5cdFx0aWYgKHBob25lKSB7XG5cdFx0XHRidXR0b25zLnB1c2goe1xuXHRcdFx0XHR0aXRsZUtleTogXCJjYWxsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1BIT05FX0NBTEwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImNhbGxJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiQ2FsbFwiXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoZW1haWwpIHtcblx0XHRcdGJ1dHRvbnMucHVzaCh7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImVtYWlsVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRU1BSUwsXG5cdFx0XHRcdGltYWdlS2V5OiBcImVtYWlsSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkUtbWFpbFwiXG5cdFx0XHR9KTtcblx0XHRcdGJ1dHRvbnMucHVzaCh7XG5cdFx0XHRcdHRpdGxlS2V5OiBcImNhbGVuZGFyVGl0bGVcIixcblx0XHRcdFx0YWN0aW9uOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09VVExPT0tfRVZFTlQsXG5cdFx0XHRcdGltYWdlS2V5OiBcImNhbGVuZGFySW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkNhbGVuZGFyXCJcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS0ke2NvbnRhY3QuaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKFwiQ29udGFjdFwiKSxcblx0XHRcdHRpdGxlOiBjb250YWN0LmRpc3BsYXlOYW1lID8/IFwiXCIsXG5cdFx0XHRsYWJlbDogXCJDb250YWN0XCIsXG5cdFx0XHRpY29uOiB0aGlzLmdldFRoZW1lZEljb24oXCJjb250YWN0XCIsIHBhbGV0dGUpLFxuXHRcdFx0YWN0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9QSE9ORV9DQUxMLFxuXHRcdFx0XHRcdGhvdGtleTogXCJFbnRlclwiXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHRoaXMuX2RlZmluaXRpb24/LmlkLFxuXHRcdFx0XHRvYmpUeXBlOiBcIkNvbnRhY3RcIixcblx0XHRcdFx0b2JqOiBjb250YWN0LFxuXHRcdFx0XHRlbWFpbHM6IFtlbWFpbF0sXG5cdFx0XHRcdHBob25lLFxuXHRcdFx0XHRuYW1lOiBjb250YWN0LmRpc3BsYXlOYW1lXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XHRcdFwicm93XCIsXG5cdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlSW1hZ2UoXCJwaWNEYXRhXCIsIGNvbnRhY3QuZGlzcGxheU5hbWUgPz8gXCJcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiNDRweFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjQ0cHhcIixcblx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdEZpdDogXCJjb3ZlclwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiBcIjUwJVwiXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcdFx0XHRcdFwiY29sdW1uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcImRpc3BsYXlOYW1lXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChcImNvbXBhbnlcIiwgMTAsIHt9KVxuXHRcdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0XHRnYXA6IFwiNXB4XCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlUGFpcnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBwYWlycyksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZUJ1dHRvbnNMYXlvdXQodGVtcGxhdGVIZWxwZXJzLCBwYWxldHRlLCBidXR0b25zKVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cGFkZGluZzogXCIxMHB4XCIsXG5cdFx0XHRcdFx0XHRnYXA6IFwiMTVweFwiLFxuXHRcdFx0XHRcdFx0ZmxleDogXCIxXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCksXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRwaWNEYXRhOiBwaWNEYXRhID8/IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNvbnRhY3RcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IGNvbnRhY3QuZGlzcGxheU5hbWUgPz8gXCJcIixcblx0XHRcdFx0XHQuLi50aGlzLm1hcFBhaXJzVG9EYXRhKHBhaXJzKSxcblx0XHRcdFx0XHRjYWxsVGl0bGU6IFwiQ2FsbFwiLFxuXHRcdFx0XHRcdGNhbGxJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2FsbFwiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRlbWFpbFRpdGxlOiBcIk91dGxvb2sgRS1tYWlsXCIsXG5cdFx0XHRcdFx0ZW1haWxJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiZW1haWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0Y2FsZW5kYXJUaXRsZTogXCJPdXRsb29rIENhbGVuZGFyXCIsXG5cdFx0XHRcdFx0Y2FsZW5kYXJJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2FsZW5kYXJcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IHRvIGRpc3BsYXkgYSBtZXNzYWdlLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIGRhdGEuXG5cdCAqIEByZXR1cm5zIFRoZSBtZXNzYWdlIHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVNZXNzYWdlUmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0bWVzc2FnZTogTWVzc2FnZVxuXHQpOiBQcm9taXNlPENMSVNlYXJjaFJlc3VsdEN1c3RvbTxIb21lQWN0aW9uPj4ge1xuXHRcdGNvbnN0IHBhaXJzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IHdpZGU/OiBib29sZWFuIH1bXSA9IFtdO1xuXG5cdFx0aWYgKG1lc3NhZ2Uuc2VuZGVyPy5lbWFpbEFkZHJlc3M/Lm5hbWUgPz8gbWVzc2FnZS5zZW5kZXI/LmVtYWlsQWRkcmVzcz8uYWRkcmVzcykge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIkZyb21cIixcblx0XHRcdFx0dmFsdWU6IG1lc3NhZ2Uuc2VuZGVyLmVtYWlsQWRkcmVzcz8ubmFtZSA/PyBtZXNzYWdlLnNlbmRlci5lbWFpbEFkZHJlc3M/LmFkZHJlc3MgPz8gXCJcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKG1lc3NhZ2UucmVjZWl2ZWREYXRlVGltZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlJlY2VpdmVkXCIsXG5cdFx0XHRcdHZhbHVlOiBuZXcgRGF0ZShtZXNzYWdlLnJlY2VpdmVkRGF0ZVRpbWUpLnRvTG9jYWxlU3RyaW5nKClcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChtZXNzYWdlLmJvZHlQcmV2aWV3KSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiUHJldmlld1wiLFxuXHRcdFx0XHR2YWx1ZTogdGhpcy5zYW5pdGl6ZVN0cmluZyhtZXNzYWdlLmJvZHlQcmV2aWV3KSxcblx0XHRcdFx0d2lkZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXSA9IFtcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwib3BlblRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PUEVOLFxuXHRcdFx0XHRpbWFnZUtleTogXCJvcGVuSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk9wZW5cIlxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHttZXNzYWdlLmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIk1lc3NhZ2VcIiksXG5cdFx0XHR0aXRsZTogbWVzc2FnZS5zdWJqZWN0ID8/IFwiVW50aXRsZWQgTWVzc2FnZVwiLFxuXHRcdFx0bGFiZWw6IFwiTWVzc2FnZVwiLFxuXHRcdFx0aWNvbjogdGhpcy5nZXRUaGVtZWRJY29uKFwiZW1haWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4sXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiTWVzc2FnZVwiLFxuXHRcdFx0XHRvYmo6IG1lc3NhZ2UsXG5cdFx0XHRcdHVybDogbWVzc2FnZS53ZWJMaW5rXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcInN1YmplY3RcIildLCB7XG5cdFx0XHRcdFx0XHRcdGJvcmRlckJvdHRvbTogYDFweCBzb2xpZCAke3BhbGV0dGUuYmFja2dyb3VuZDZ9YCxcblx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0c3ViamVjdDogbWVzc2FnZS5zdWJqZWN0ID8/IFwiTm8gU3ViamVjdFwiLFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdG9wZW5UaXRsZTogXCJPcGVuIE91dGxvb2tcIixcblx0XHRcdFx0XHRvcGVuSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcIm91dGxvb2tcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IHRlbXBsYXRlIGZvciBldmVudC5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IGRhdGEuXG5cdCAqIEByZXR1cm5zIFRoZSBldmVudCB0ZW1wbGF0ZS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlRXZlbnRSZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHRldmVudDogRXZlbnRcblx0KTogUHJvbWlzZTxDTElTZWFyY2hSZXN1bHRDdXN0b208SG9tZUFjdGlvbj4+IHtcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uKSB7XG5cdFx0XHRjb25zdCBiYXRjaFJlcXVlc3RzOiBzdHJpbmdbXSA9IFtgL21lL2V2ZW50cy8ke2V2ZW50LmlkfWBdO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHcmFwaCBBUEkgQmF0Y2ggUmVxdWVzdFwiLCB7XG5cdFx0XHRcdFx0cGhvdG86IGJhdGNoUmVxdWVzdHNbMF1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPEV2ZW50Pj4oXG5cdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0czogYmF0Y2hSZXF1ZXN0cy5tYXAoKHIsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0aWQ6IChpZHggKyAxKS50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogclxuXHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IGV2ZW50UmVzcG9uc2UgPSByZXNwb25zZS5kYXRhPy5yZXNwb25zZXMuZmluZCgocikgPT4gci5pZCA9PT0gXCIxXCIpO1xuXHRcdFx0XHRpZiAoZXZlbnRSZXNwb25zZT8uc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRldmVudCA9IHtcblx0XHRcdFx0XHRcdC4uLmV2ZW50LFxuXHRcdFx0XHRcdFx0Li4uZXZlbnRSZXNwb25zZS5ib2R5XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIGdldHRpbmcgZXZlbnRcIiwgZXZlbnRSZXNwb25zZT8uc3RhdHVzLCBldmVudFJlc3BvbnNlPy5ib2R5IGFzIHN0cmluZyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIHBlcmZvcm1pbmcgQVBJIGJhdGNoIHJlcXVlc3RcIiwgZXJyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBwYWlyczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyB3aWRlPzogYm9vbGVhbiB9W10gPSBbXTtcblxuXHRcdGlmIChldmVudC5zdGFydD8uZGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJTdGFydFwiLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUoZXZlbnQuc3RhcnQ/LmRhdGVUaW1lKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoZXZlbnQuZW5kPy5kYXRlVGltZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIkVuZFwiLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUoZXZlbnQuZW5kPy5kYXRlVGltZSkudG9Mb2NhbGVTdHJpbmcoKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50LmJvZHlQcmV2aWV3KSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiUHJldmlld1wiLFxuXHRcdFx0XHR2YWx1ZTogdGhpcy5zYW5pdGl6ZVN0cmluZyhldmVudC5ib2R5UHJldmlldyksXG5cdFx0XHRcdHdpZGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1BFTixcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGtleTogYCR7dGhpcy5fZGVmaW5pdGlvbj8uaWR9LSR7ZXZlbnQuaWR9YCxcblx0XHRcdHNjb3JlOiB0aGlzLm9iamVjdFR5cGVUb09yZGVyKFwiRXZlbnRcIiksXG5cdFx0XHR0aXRsZTogZXZlbnQuc3ViamVjdCA/PyBcIlVudGl0bGVkIEV2ZW50XCIsXG5cdFx0XHRsYWJlbDogXCJFdmVudFwiLFxuXHRcdFx0aWNvbjogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2FsZW5kYXJcIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4sXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiRXZlbnRcIixcblx0XHRcdFx0b2JqOiBldmVudCxcblx0XHRcdFx0dXJsOiBldmVudC53ZWJMaW5rXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcInN1YmplY3RcIildLCB7XG5cdFx0XHRcdFx0XHRcdGJvcmRlckJvdHRvbTogYDFweCBzb2xpZCAke3BhbGV0dGUuYmFja2dyb3VuZDZ9YCxcblx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0c3ViamVjdDogZXZlbnQuc3ViamVjdCA/PyBcIlVudGl0bGVkIEV2ZW50XCIsXG5cdFx0XHRcdFx0Li4udGhpcy5tYXBQYWlyc1RvRGF0YShwYWlycyksXG5cdFx0XHRcdFx0b3BlblRpdGxlOiBcIk9wZW4gT3V0bG9va1wiLFxuXHRcdFx0XHRcdG9wZW5JbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwib3V0bG9va1wiLCBwYWxldHRlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByZXN1bHQgZm9yIGEgY2hhdCBtZXNzYWdlLlxuXHQgKiBAcGFyYW0gdGVtcGxhdGVIZWxwZXJzIFRvIGhlbHAgd2l0aCBjcmVhdGluZyB0ZW1wbGF0ZXMuXG5cdCAqIEBwYXJhbSBwYWxldHRlIFRoZSBjdXJyZW50IHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBjaGF0TWVzc2FnZSBUaGUgY2hhdCBtZXNzYWdlIGRhdGEuXG5cdCAqIEByZXR1cm5zIFRoZSBjaGF0IG1lc3NhZ2UgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUNoYXRNZXNzYWdlUmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0Y2hhdE1lc3NhZ2U6IENoYXRNZXNzYWdlXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgYmF0Y2hSZXF1ZXN0czogc3RyaW5nW10gPSBbYC9jaGF0cy8ke2NoYXRNZXNzYWdlLmNoYXRJZH0vbWVzc2FnZXMvJHtjaGF0TWVzc2FnZS5ldGFnfWBdO1xuXG5cdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhcIkdyYXBoIEFQSSBCYXRjaCBSZXF1ZXN0XCIsIHtcblx0XHRcdFx0XHRwaG90bzogYmF0Y2hSZXF1ZXN0c1swXVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX21zMzY1Q29ubmVjdGlvbi5leGVjdXRlQXBpUmVxdWVzdDxHcmFwaEJhdGNoUmVzcG9uc2U8Q2hhdE1lc3NhZ2U+Pihcblx0XHRcdFx0XHRcIi92MS4wLyRiYXRjaFwiLFxuXHRcdFx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJlcXVlc3RzOiBiYXRjaFJlcXVlc3RzLm1hcCgociwgaWR4KSA9PiAoe1xuXHRcdFx0XHRcdFx0XHRpZDogKGlkeCArIDEpLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0dXJsOiByXG5cdFx0XHRcdFx0XHR9KSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Y29uc3QgY2hhdE1lc3NhZ2VSZXNwb25zZSA9IHJlc3BvbnNlLmRhdGE/LnJlc3BvbnNlcy5maW5kKChyKSA9PiByLmlkID09PSBcIjFcIik7XG5cdFx0XHRcdGlmIChjaGF0TWVzc2FnZVJlc3BvbnNlPy5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdGNoYXRNZXNzYWdlID0ge1xuXHRcdFx0XHRcdFx0Li4uY2hhdE1lc3NhZ2UsXG5cdFx0XHRcdFx0XHQuLi5jaGF0TWVzc2FnZVJlc3BvbnNlLmJvZHksXG5cdFx0XHRcdFx0XHRzdW1tYXJ5OiBjaGF0TWVzc2FnZVJlc3BvbnNlLmJvZHkuc3VtbWFyeSA/PyBjaGF0TWVzc2FnZS5zdW1tYXJ5XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFxuXHRcdFx0XHRcdFx0XCJGYWlsZWQgZ2V0dGluZyBldmVudFwiLFxuXHRcdFx0XHRcdFx0Y2hhdE1lc3NhZ2VSZXNwb25zZT8uc3RhdHVzLFxuXHRcdFx0XHRcdFx0Y2hhdE1lc3NhZ2VSZXNwb25zZT8uYm9keSBhcyBzdHJpbmdcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBwZXJmb3JtaW5nIEFQSSBiYXRjaCByZXF1ZXN0XCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgd2lkZT86IGJvb2xlYW4gfVtdID0gW107XG5cblx0XHRpZiAoY2hhdE1lc3NhZ2UubGFzdE1vZGlmaWVkRGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJEYXRlL1RpbWVcIixcblx0XHRcdFx0dmFsdWU6IG5ldyBEYXRlKGNoYXRNZXNzYWdlLmxhc3RNb2RpZmllZERhdGVUaW1lKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoY2hhdE1lc3NhZ2UuZnJvbT8udXNlcj8uZGlzcGxheU5hbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJGcm9tXCIsXG5cdFx0XHRcdHZhbHVlOiBjaGF0TWVzc2FnZS5mcm9tLnVzZXIuZGlzcGxheU5hbWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChjaGF0TWVzc2FnZS5ib2R5Py5jb250ZW50KSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiUHJldmlld1wiLFxuXHRcdFx0XHR2YWx1ZTogdGhpcy5zYW5pdGl6ZVN0cmluZyhjaGF0TWVzc2FnZS5ib2R5Py5jb250ZW50KSxcblx0XHRcdFx0d2lkZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXSA9IFtcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwib3BlblRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DSEFULFxuXHRcdFx0XHRpbWFnZUtleTogXCJvcGVuSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk9wZW5cIlxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHtjaGF0TWVzc2FnZS5pZH1gLFxuXHRcdFx0c2NvcmU6IHRoaXMub2JqZWN0VHlwZVRvT3JkZXIoXCJDaGF0TWVzc2FnZVwiKSxcblx0XHRcdHRpdGxlOiBjaGF0TWVzc2FnZS5zdW1tYXJ5ID8/IFwiVW50aXRsZWQgQ2hhdCBNZXNzYWdlXCIsXG5cdFx0XHRsYWJlbDogXCJDaGF0IE1lc3NhZ2VcIixcblx0XHRcdGljb246IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNoYXRcIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NIQVQsXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiQ2hhdE1lc3NhZ2VcIixcblx0XHRcdFx0b2JqOiBjaGF0TWVzc2FnZSxcblx0XHRcdFx0dXJsOiBjaGF0TWVzc2FnZS53ZWJVcmwsXG5cdFx0XHRcdGNoYXRJZDogY2hhdE1lc3NhZ2UuY2hhdElkLFxuXHRcdFx0XHRtZXNzYWdlSWQ6IGNoYXRNZXNzYWdlLmlkXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcInN1bW1hcnlcIildLCB7XG5cdFx0XHRcdFx0XHRcdGJvcmRlckJvdHRvbTogYDFweCBzb2xpZCAke3BhbGV0dGUuYmFja2dyb3VuZDZ9YCxcblx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0c3VtbWFyeTogY2hhdE1lc3NhZ2Uuc3VtbWFyeSA/PyBcIlVudGl0bGVkIENoYXQgTWVzc2FnZVwiLFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdG9wZW5UaXRsZTogXCJPcGVuIENoYXQgTWVzc2FnZVwiLFxuXHRcdFx0XHRcdG9wZW5JbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwidGVhbXNcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIHRoZSByZXN1bHQgZm9yIGEgdGVhbS5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gdGVhbSBUaGUgdGVhbSBkYXRhLlxuXHQgKiBAcmV0dXJucyBUaGUgdGVhbSByZXN1bHQgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZVRlYW1SZXN1bHQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHR0ZWFtOiBUZWFtXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0Y29uc3QgdGVhbU1lbWJlcnMgPSB0ZWFtLmlkID8gYXdhaXQgdGhpcy5nZXRUZWFtTWVtYmVycyh0ZWFtLmlkKSA6IFtdO1xuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU/OiBzdHJpbmc7IGxpbmtzPzogc3RyaW5nW107IHNyY3M/OiBzdHJpbmdbXTsgd2lkZT86IGJvb2xlYW4gfVtdID0gW107XG5cdFx0Y29uc3QgdXJsczogeyBbaWQ6IHN0cmluZ106IHN0cmluZyB9ID0ge307XG5cblx0XHRpZiAodGVhbS5jaGFubmVscz8ubGVuZ3RoKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiQ2hhbm5lbCBMaXN0XCIsXG5cdFx0XHRcdGxpbmtzOiB0ZWFtLmNoYW5uZWxzPy5tYXAoKGMpID0+IGMuZGlzcGxheU5hbWUgPz8gXCJcIilcblx0XHRcdH0pO1xuXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRlYW0uY2hhbm5lbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dXJsc1tgQ2hhbm5lbCBMaXN0X2xpbmtfJHtpfWBdID0gdGVhbS5jaGFubmVsc1tpXS53ZWJVcmwgPz8gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGVhbU1lbWJlcnMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCB1c2VyUGhvdG9zID0gYXdhaXQgdGhpcy5nZXRVc2VyUGhvdG9zKHRlYW1NZW1iZXJzLCAxNik7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiTWVtYmVyIExpc3RcIixcblx0XHRcdFx0c3JjczogdXNlclBob3Rvc1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRlYW0uZGVzY3JpcHRpb24pIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJEZXNjcmlwdGlvblwiLFxuXHRcdFx0XHR2YWx1ZTogdGVhbS5kZXNjcmlwdGlvbixcblx0XHRcdFx0d2lkZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXSA9IFtcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwib3BlblRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DQUxMLFxuXHRcdFx0XHRpbWFnZUtleTogXCJvcGVuSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk9wZW5cIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiZW1haWxUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1VUTE9PS19FTUFJTCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwiZW1haWxJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiRW1haWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwibWVldGluZ1RpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19NRUVUSU5HLFxuXHRcdFx0XHRpbWFnZUtleTogXCJtZWV0aW5nSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk1lZXRpbmdcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiY2hhdFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DSEFULFxuXHRcdFx0XHRpbWFnZUtleTogXCJjaGF0SW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkNoYXRcIlxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHt0ZWFtLmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIlRlYW1cIiksXG5cdFx0XHR0aXRsZTogdGVhbS5kaXNwbGF5TmFtZSA/PyBcIlVudGl0bGVkIFRlYW1cIixcblx0XHRcdGxhYmVsOiBcIlRlYW1cIixcblx0XHRcdGljb246IHRoaXMuZ2V0VGhlbWVkSWNvbihcInRlYW1cIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NBTEwsXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiVGVhbVwiLFxuXHRcdFx0XHRvYmo6IHRlYW0sXG5cdFx0XHRcdHVybDogdGVhbS53ZWJVcmwsXG5cdFx0XHRcdHVybHMsXG5cdFx0XHRcdGVtYWlsczogdGVhbU1lbWJlcnMuZmlsdGVyKCh0KSA9PiB0LmVtYWlsKS5tYXAoKHQpID0+IHQuZW1haWwpLFxuXHRcdFx0XHR0ZWFtSWQ6IHRlYW0uaWRcblx0XHRcdH0gYXMgQWN0aW9uRGF0YSxcblx0XHRcdHRlbXBsYXRlOiBDTElUZW1wbGF0ZS5DdXN0b20sXG5cdFx0XHR0ZW1wbGF0ZUNvbnRlbnQ6IHtcblx0XHRcdFx0bGF5b3V0OiBhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFwiY29sdW1uXCIsXG5cdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcInJvd1wiLCBbYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZVRpdGxlKFwiZGlzcGxheU5hbWVcIildLCB7XG5cdFx0XHRcdFx0XHRcdGJvcmRlckJvdHRvbTogYDFweCBzb2xpZCAke3BhbGV0dGUuYmFja2dyb3VuZDZ9YCxcblx0XHRcdFx0XHRcdFx0cGFkZGluZ0JvdHRvbTogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0Z2FwOiBcIjVweFwiLFxuXHRcdFx0XHRcdFx0XHRvdmVyZmxvdzogXCJoaWRkZW5cIlxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBhaXJzTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcGFpcnMpLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVCdXR0b25zTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgYnV0dG9ucylcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFx0Z2FwOiBcIjE1cHhcIixcblx0XHRcdFx0XHRcdGZsZXg6IFwiMVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IHRlYW0uZGlzcGxheU5hbWUgPz8gXCJVbnRpdGxlZCBUZWFtXCIsXG5cdFx0XHRcdFx0Li4udGhpcy5tYXBQYWlyc1RvRGF0YShwYWlycyksXG5cdFx0XHRcdFx0b3BlblRpdGxlOiBcIk9wZW4gVGVhbXNcIixcblx0XHRcdFx0XHRvcGVuSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcInRlYW1zXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGVtYWlsVGl0bGU6IFwiT3V0bG9vayBFLW1haWxcIixcblx0XHRcdFx0XHRlbWFpbEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJlbWFpbFwiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRtZWV0aW5nVGl0bGU6IFwiVGVhbXMgTWVldGluZ1wiLFxuXHRcdFx0XHRcdG1lZXRpbmdJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiY2FsZW5kYXJcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0Y2hhdFRpdGxlOiBcIlRlYW1zIENoYXRcIixcblx0XHRcdFx0XHRjaGF0SW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNoYXRcIiwgcGFsZXR0ZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmVzdWx0IHRlbXBsYXRlIGZvciBhIGNoYW5uZWwuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIGNoYW5uZWwgVGhlIGNoYW5uZWwgZGF0YS5cblx0ICogQHJldHVybnMgVGhlIGNoYW5uZWwgcmVzdWx0IHRlbXBsYXRlLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVDaGFubmVsUmVzdWx0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0Y2hhbm5lbDogQ2hhbm5lbCAmIHsgdGVhbTogVGVhbSB9XG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0Y29uc3QgY2hhbm5lbE1lbWJlcnMgPVxuXHRcdFx0Y2hhbm5lbC50ZWFtPy5pZCAmJiBjaGFubmVsPy5pZCA/IGF3YWl0IHRoaXMuZ2V0Q2hhbm5lbE1lbWJlcnMoY2hhbm5lbC50ZWFtLmlkLCBjaGFubmVsLmlkKSA6IFtdO1xuXG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU/OiBzdHJpbmc7IGxpbmtzPzogc3RyaW5nW107IHNyY3M/OiBzdHJpbmdbXTsgd2lkZT86IGJvb2xlYW4gfVtdID0gW107XG5cblx0XHRpZiAoY2hhbm5lbC50ZWFtLmRpc3BsYXlOYW1lKSB7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiVGVhbVwiLFxuXHRcdFx0XHR2YWx1ZTogY2hhbm5lbC50ZWFtLmRpc3BsYXlOYW1lXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoY2hhbm5lbE1lbWJlcnMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCB1c2VyUGhvdG9zID0gYXdhaXQgdGhpcy5nZXRVc2VyUGhvdG9zKGNoYW5uZWxNZW1iZXJzLCAxNik7XG5cdFx0XHRwYWlycy5wdXNoKHtcblx0XHRcdFx0bGFiZWw6IFwiTWVtYmVyIExpc3RcIixcblx0XHRcdFx0c3JjczogdXNlclBob3Rvc1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGNoYW5uZWwuZGVzY3JpcHRpb24pIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJEZXNjcmlwdGlvblwiLFxuXHRcdFx0XHR2YWx1ZTogY2hhbm5lbC5kZXNjcmlwdGlvbixcblx0XHRcdFx0d2lkZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uczoge1xuXHRcdFx0dGl0bGVLZXk6IHN0cmluZztcblx0XHRcdGFjdGlvbjogc3RyaW5nO1xuXHRcdFx0aW1hZ2VLZXk6IHN0cmluZztcblx0XHRcdGltYWdlQWx0VGV4dDogc3RyaW5nO1xuXHRcdH1bXSA9IFtcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwib3BlblRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DQUxMLFxuXHRcdFx0XHRpbWFnZUtleTogXCJvcGVuSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk9wZW5cIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiZW1haWxUaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1VUTE9PS19FTUFJTCxcblx0XHRcdFx0aW1hZ2VLZXk6IFwiZW1haWxJbWFnZVwiLFxuXHRcdFx0XHRpbWFnZUFsdFRleHQ6IFwiRW1haWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwibWVldGluZ1RpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19NRUVUSU5HLFxuXHRcdFx0XHRpbWFnZUtleTogXCJtZWV0aW5nSW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIk1lZXRpbmdcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0dGl0bGVLZXk6IFwiY2hhdFRpdGxlXCIsXG5cdFx0XHRcdGFjdGlvbjogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9URUFNU19DSEFULFxuXHRcdFx0XHRpbWFnZUtleTogXCJjaGF0SW1hZ2VcIixcblx0XHRcdFx0aW1hZ2VBbHRUZXh0OiBcIkNoYXRcIlxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0a2V5OiBgJHt0aGlzLl9kZWZpbml0aW9uPy5pZH0tJHtjaGFubmVsLmlkfWAsXG5cdFx0XHRzY29yZTogdGhpcy5vYmplY3RUeXBlVG9PcmRlcihcIkNoYW5uZWxcIiksXG5cdFx0XHR0aXRsZTogY2hhbm5lbC5kaXNwbGF5TmFtZSA/PyBcIlVudGl0bGVkIENoYW5uZWxcIixcblx0XHRcdGxhYmVsOiBcIkNoYW5uZWxcIixcblx0XHRcdGljb246IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNoYW5uZWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX1RFQU1TX0NBTEwsXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiQ2hhbm5lbFwiLFxuXHRcdFx0XHRvYmo6IGNoYW5uZWwsXG5cdFx0XHRcdHVybDogY2hhbm5lbC53ZWJVcmwsXG5cdFx0XHRcdGVtYWlsczogY2hhbm5lbE1lbWJlcnMuZmlsdGVyKChtKSA9PiBtLmVtYWlsKS5tYXAoKG0pID0+IG0uZW1haWwpLFxuXHRcdFx0XHR0ZWFtSWQ6IGNoYW5uZWwudGVhbS5pZCxcblx0XHRcdFx0Y2hhbm5lbElkOiBjaGFubmVsLmlkXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcImRpc3BsYXlOYW1lXCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBjaGFubmVsLmRpc3BsYXlOYW1lID8/IFwiVW50aXRsZWQgQ2hhbm5lbFwiLFxuXHRcdFx0XHRcdC4uLnRoaXMubWFwUGFpcnNUb0RhdGEocGFpcnMpLFxuXHRcdFx0XHRcdG9wZW5UaXRsZTogXCJPcGVuIFRlYW1zXCIsXG5cdFx0XHRcdFx0b3BlbkltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJ0ZWFtc1wiLCBwYWxldHRlKSxcblx0XHRcdFx0XHRlbWFpbFRpdGxlOiBcIk91dGxvb2sgRS1tYWlsXCIsXG5cdFx0XHRcdFx0ZW1haWxJbWFnZTogdGhpcy5nZXRUaGVtZWRJY29uKFwiZW1haWxcIiwgcGFsZXR0ZSksXG5cdFx0XHRcdFx0bWVldGluZ1RpdGxlOiBcIlRlYW1zIE1lZXRpbmdcIixcblx0XHRcdFx0XHRtZWV0aW5nSW1hZ2U6IHRoaXMuZ2V0VGhlbWVkSWNvbihcImNhbGVuZGFyXCIsIHBhbGV0dGUpLFxuXHRcdFx0XHRcdGNoYXRUaXRsZTogXCJUZWFtcyBDaGF0XCIsXG5cdFx0XHRcdFx0Y2hhdEltYWdlOiB0aGlzLmdldFRoZW1lZEljb24oXCJjaGF0XCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgcmVzdWx0IHRlbXBsYXRlIGZvciBhIGRyaXZlIGl0ZW0uXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVG8gaGVscCB3aXRoIGNyZWF0aW5nIHRlbXBsYXRlcy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIGN1cnJlbnQgcGFsZXR0ZS5cblx0ICogQHBhcmFtIGRyaXZlSXRlbSBUaGUgZHJpdmUgaXRlbSBkYXRhLlxuXHQgKiBAcmV0dXJucyBUaGUgcmVzdWx0IHRlbXBsYXRlIGZvciB0aGUgZHJpdmUgaXRlbS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlRmlsZVJlc3VsdChcblx0XHR0ZW1wbGF0ZUhlbHBlcnM6IFRlbXBsYXRlSGVscGVycyxcblx0XHRwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0LFxuXHRcdGRyaXZlSXRlbTogRHJpdmVJdGVtXG5cdCk6IFByb21pc2U8Q0xJU2VhcmNoUmVzdWx0Q3VzdG9tPEhvbWVBY3Rpb24+PiB7XG5cdFx0Y29uc3QgcGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU/OiBzdHJpbmc7IGxpbmtzPzogc3RyaW5nW107IHNyY3M/OiBzdHJpbmdbXTsgd2lkZT86IGJvb2xlYW4gfVtdID0gW107XG5cdFx0Y29uc3QgdXJscyA9IHt9O1xuXG5cdFx0Y29uc3QgbWltZUljb24gPSB0aGlzLmdldE1pbWVJY29uKGRyaXZlSXRlbSwgcGFsZXR0ZSk7XG5cblx0XHRpZiAoZHJpdmVJdGVtLmNyZWF0ZWRCeT8udXNlcj8uZGlzcGxheU5hbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJDcmVhdGVkIEJ5XCIsXG5cdFx0XHRcdHZhbHVlOiBkcml2ZUl0ZW0uY3JlYXRlZEJ5Py51c2VyPy5kaXNwbGF5TmFtZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGRyaXZlSXRlbS5jcmVhdGVkRGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJDcmVhdGVkIE9uXCIsXG5cdFx0XHRcdHZhbHVlOiBuZXcgRGF0ZShkcml2ZUl0ZW0uY3JlYXRlZERhdGVUaW1lKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoZHJpdmVJdGVtLmxhc3RNb2RpZmllZEJ5Py51c2VyPy5kaXNwbGF5TmFtZSkge1xuXHRcdFx0cGFpcnMucHVzaCh7XG5cdFx0XHRcdGxhYmVsOiBcIlVwZGF0ZWQgQnlcIixcblx0XHRcdFx0dmFsdWU6IGRyaXZlSXRlbS5sYXN0TW9kaWZpZWRCeT8udXNlcj8uZGlzcGxheU5hbWVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChkcml2ZUl0ZW0ubGFzdE1vZGlmaWVkRGF0ZVRpbWUpIHtcblx0XHRcdHBhaXJzLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogXCJVcGRhdGVkIE9uXCIsXG5cdFx0XHRcdHZhbHVlOiBuZXcgRGF0ZShkcml2ZUl0ZW0ubGFzdE1vZGlmaWVkRGF0ZVRpbWUpLnRvTG9jYWxlU3RyaW5nKClcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbnM6IHtcblx0XHRcdHRpdGxlS2V5OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb246IHN0cmluZztcblx0XHRcdGltYWdlS2V5OiBzdHJpbmc7XG5cdFx0XHRpbWFnZUFsdFRleHQ6IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlS2V5OiBcIm9wZW5UaXRsZVwiLFxuXHRcdFx0XHRhY3Rpb246IE1pY3Jvc29mdDM2NUludGVncmF0aW9uLl9BQ1RJT05fT1BFTixcblx0XHRcdFx0aW1hZ2VLZXk6IFwib3BlbkltYWdlXCIsXG5cdFx0XHRcdGltYWdlQWx0VGV4dDogXCJPcGVuXCJcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0Y29uc3QgaXNGb2xkZXIgPSB0aGlzLmRyaXZlSXRlbUlzRm9sZGVyKGRyaXZlSXRlbSk7XG5cdFx0Y29uc3QgdHlwZU5hbWUgPSBpc0ZvbGRlciA/IFwiRm9sZGVyXCIgOiBcIkZpbGVcIjtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRrZXk6IGAke3RoaXMuX2RlZmluaXRpb24/LmlkfS0ke2RyaXZlSXRlbS5pZH1gLFxuXHRcdFx0c2NvcmU6IHRoaXMub2JqZWN0VHlwZVRvT3JkZXIoXCJGaWxlXCIpLFxuXHRcdFx0dGl0bGU6IGRyaXZlSXRlbS5uYW1lID8/IGBVbnRpdGxlZCAke3R5cGVOYW1lfWAsXG5cdFx0XHRsYWJlbDogdHlwZU5hbWUsXG5cdFx0XHRpY29uOiBtaW1lSWNvbiA/PyB0aGlzLmdldFRoZW1lZEljb24odHlwZU5hbWUudG9Mb3dlckNhc2UoKSwgcGFsZXR0ZSksXG5cdFx0XHRhY3Rpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbi5fQUNUSU9OX09QRU4sXG5cdFx0XHRcdFx0aG90a2V5OiBcIkVudGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0cHJvdmlkZXJJZDogdGhpcy5fZGVmaW5pdGlvbj8uaWQsXG5cdFx0XHRcdG9ialR5cGU6IFwiRmlsZVwiLFxuXHRcdFx0XHRvYmo6IGRyaXZlSXRlbSxcblx0XHRcdFx0dXJsOiBkcml2ZUl0ZW0ud2ViVXJsLFxuXHRcdFx0XHR1cmxzXG5cdFx0XHR9IGFzIEFjdGlvbkRhdGEsXG5cdFx0XHR0ZW1wbGF0ZTogQ0xJVGVtcGxhdGUuQ3VzdG9tLFxuXHRcdFx0dGVtcGxhdGVDb250ZW50OiB7XG5cdFx0XHRcdGxheW91dDogYXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihcblx0XHRcdFx0XHRcImNvbHVtblwiLFxuXHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXCJyb3dcIiwgW2F3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUaXRsZShcImRpc3BsYXlOYW1lXCIpXSwge1xuXHRcdFx0XHRcdFx0XHRib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtwYWxldHRlLmJhY2tncm91bmQ2fWAsXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmdCb3R0b206IFwiNXB4XCIsXG5cdFx0XHRcdFx0XHRcdGdhcDogXCI1cHhcIixcblx0XHRcdFx0XHRcdFx0b3ZlcmZsb3c6IFwiaGlkZGVuXCJcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVQYWlyc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIHBhaXJzKSxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlQnV0dG9uc0xheW91dCh0ZW1wbGF0ZUhlbHBlcnMsIHBhbGV0dGUsIGJ1dHRvbnMpXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBcIjEwcHhcIixcblx0XHRcdFx0XHRcdGdhcDogXCIxNXB4XCIsXG5cdFx0XHRcdFx0XHRmbGV4OiBcIjFcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KSxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBkcml2ZUl0ZW0ubmFtZSA/PyBcIlVudGl0bGVkIEZpbGVcIixcblx0XHRcdFx0XHQuLi50aGlzLm1hcFBhaXJzVG9EYXRhKHBhaXJzKSxcblx0XHRcdFx0XHRvcGVuVGl0bGU6IFwiT3BlbiBGaWxlXCIsXG5cdFx0XHRcdFx0b3BlbkltYWdlOiBtaW1lSWNvbiA/PyB0aGlzLmdldFRoZW1lZEljb24oXCJmaWxlXCIsIHBhbGV0dGUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0ZWFtIG1lbWJlcnMgZm9yIGEgdGVhbS5cblx0ICogQHBhcmFtIHRlYW1JZCBUaGUgaWQgb2YgdGhlIHRlYW0gdG8gZ2V0IHRoZSBtZW1iZXJzLlxuXHQgKiBAcmV0dXJucyBUaGUgQWN0aXZlRGlyZWN0b3J5IGRhdGEgZm9yIHRoZSB0ZWFtIG1lbWJlcnMuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGdldFRlYW1NZW1iZXJzKHRlYW1JZDogc3RyaW5nKTogUHJvbWlzZTxBYWRVc2VyQ29udmVyc2F0aW9uTWVtYmVyW10+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHZXQgVGVhbSBNZW1iZXJzIFJlcXVlc3RcIik7XG5cblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8XG5cdFx0XHRcdFx0R3JhcGhMaXN0UmVzcG9uc2U8QWFkVXNlckNvbnZlcnNhdGlvbk1lbWJlcj5cblx0XHRcdFx0PihgL3YxLjAvdGVhbXMvJHt0ZWFtSWR9L21lbWJlcnNgLCBcIkdFVFwiKTtcblxuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHZXQgVGVhbSBNZW1iZXJzIFJlc3BvbnNlXCIsIHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YT8udmFsdWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YS52YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkZhaWxlZCBnZXR0aW5nIHRlYW0gbWVtYmVyc1wiLCBlcnIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBbXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIG1lbWJlcnMgb2YgYSB0ZWFtcyBjaGFubmVsLlxuXHQgKiBAcGFyYW0gdGVhbUlkIFRoZSB0ZWFtIGlkLlxuXHQgKiBAcGFyYW0gY2hhbm5lbElkIFRoZSBjaGFubmVsIGlkLlxuXHQgKiBAcmV0dXJucyBUaGUgQWN0aXZlRGlyZWN0b3J5IGRhdGEgZm9yIHRoZSB0ZWFtIGNoYW5uZWwgbWVtYmVycy5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgZ2V0Q2hhbm5lbE1lbWJlcnModGVhbUlkOiBzdHJpbmcsIGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxBYWRVc2VyQ29udmVyc2F0aW9uTWVtYmVyW10+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0XHR0aGlzLl9sb2dnZXI/LmluZm8oXCJHZXQgQ2hhbm5lbCBNZW1iZXJzIFJlcXVlc3RcIik7XG5cblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8XG5cdFx0XHRcdFx0R3JhcGhMaXN0UmVzcG9uc2U8QWFkVXNlckNvbnZlcnNhdGlvbk1lbWJlcj5cblx0XHRcdFx0PihgL3YxLjAvdGVhbXMvJHt0ZWFtSWR9L2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZW1iZXJzYCwgXCJHRVRcIik7XG5cblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5pbmZvKFwiR2V0IENoYW5uZWwgTWVtYmVycyBSZXNwb25zZVwiLCByZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGE/LnZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGEudmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMuX2xvZ2dlcj8uZXJyb3IoXCJGYWlsZWQgZ2V0dGluZyBjaGFubmVsIG1lbWJlcnNcIiwgZXJyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHVzZXJzIHBob3Rvcy5cblx0ICogQHBhcmFtIHVzZXJzIFRoZSB1c2VycyB0byBnZXQgdGhlIHBob3RvcyBmb3IuXG5cdCAqIEBwYXJhbSBzaXplIFRoZSBzaXplIG9mIHRoZSBwaG90b3MuXG5cdCAqIEByZXR1cm5zIExpc3Qgb2YgdXJscyB0byB0aGUgcGhvdG9zLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBnZXRVc2VyUGhvdG9zKHVzZXJzOiBBYWRVc2VyQ29udmVyc2F0aW9uTWVtYmVyW10sIHNpemU6IG51bWJlcik6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMuX21zMzY1Q29ubmVjdGlvbikge1xuXHRcdFx0XHRjb25zdCBsb29rdXBVc2VycyA9IHVzZXJzLmZpbHRlcigodSkgPT4gIXRoaXMuX3Byb2ZpbGVJbWFnZUNhY2hlW3UuaWQgPz8gXCJcIl0pO1xuXG5cdFx0XHRcdGlmIChsb29rdXBVc2Vycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2h1bmtDb3VudCA9IE1hdGguY2VpbChsb29rdXBVc2Vycy5sZW5ndGggLyAyMCk7XG5cblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNodW5rQ291bnQ7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPihcblx0XHRcdFx0XHRcdFx0XCIvdjEuMC8kYmF0Y2hcIixcblx0XHRcdFx0XHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0czogbG9va3VwVXNlcnMuc2xpY2UoaSAqIDIwLCAoaSArIDEpICogMjApLm1hcCgodSwgaWR4KSA9PiAoe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IGBwaG90b3Mke2lkeCArIDF9YCxcblx0XHRcdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0XHRcdFx0XHRcdHVybDogYC91c2Vycy8ke3UudXNlcklkfS9waG90by8kdmFsdWVgXG5cdFx0XHRcdFx0XHRcdFx0fSkpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhPy5yZXNwb25zZXMpIHtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCByIG9mIHJlc3BvbnNlLmRhdGEucmVzcG9uc2VzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbG9va3VwSWR4ID0gTnVtYmVyLnBhcnNlSW50KHIuaWQucmVwbGFjZShcInBob3Rvc1wiLCBcIlwiKSwgMTApO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHVzZXIgPSBsb29rdXBVc2Vyc1tsb29rdXBJZHggLSAxXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodXNlci5pZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHBpY0RhdGE7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoci5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwaWNEYXRhID0gYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtyLmJvZHkgYXMgc3RyaW5nfWA7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwaWNEYXRhID0gdGhpcy5zdmdUb0lubGluZSh0aGlzLmltYWdlUHJvZmlsZU5vbmUoc2l6ZSwgdXNlci5kaXNwbGF5TmFtZSA/PyBcIj9cIikpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbdXNlci5pZF0gPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGE6IHBpY0RhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZGVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cblx0XHRcdFx0cmV0dXJuIHVzZXJzLm1hcCgodSkgPT4gdS5pZCAmJiB0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVt1LmlkXS5kYXRhKS5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW107XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFwiRmFpbGVkIGdldHRpbmcgdXNlciBwaG90b3NcIiwgZXJyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gW107XG5cdH1cblxuXHQvKipcblx0ICogTWFwIGRhdGEgdG8gdGVtcGxhdGUgbGF5b3V0LlxuXHQgKiBAcGFyYW0gcGFpcnMgVGhlIGRhdGEgcGFpcnMgdG8gbWFwLlxuXHQgKiBAcmV0dXJucyBUaGUgbWFwcGVkIGRhdGEuXG5cdCAqL1xuXHRwcml2YXRlIG1hcFBhaXJzVG9EYXRhKFxuXHRcdHBhaXJzOiB7XG5cdFx0XHRsYWJlbDogc3RyaW5nO1xuXHRcdFx0dmFsdWU/OiBzdHJpbmc7XG5cdFx0XHRsaW5rcz86IHN0cmluZ1tdO1xuXHRcdFx0c3Jjcz86IHN0cmluZ1tdO1xuXHRcdFx0d2lkZT86IGJvb2xlYW47XG5cdFx0fVtdXG5cdCk6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfSB7XG5cdFx0Y29uc3QgcGFpckRhdGE6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXHRcdGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuXHRcdFx0cGFpckRhdGFbYCR7cGFpci5sYWJlbH1UaXRsZWBdID0gcGFpci5sYWJlbDtcblx0XHRcdGlmIChwYWlyLnZhbHVlKSB7XG5cdFx0XHRcdHBhaXJEYXRhW3BhaXIubGFiZWxdID0gdGhpcy5zYW5pdGl6ZVN0cmluZyhwYWlyLnZhbHVlKTtcblx0XHRcdH1cblx0XHRcdGlmIChwYWlyLmxpbmtzKSB7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcGFpci5saW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHBhaXJEYXRhW2Ake3BhaXIubGFiZWx9X2xpbmtfJHtpfWBdID0gcGFpci5saW5rc1tpXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKHBhaXIuc3Jjcykge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhaXIuc3Jjcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHBhaXJEYXRhW2Ake3BhaXIubGFiZWx9X3NyY18ke2l9YF0gPSBwYWlyLnNyY3NbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHBhaXJEYXRhO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgdGVtcGxhdGUgbGF5b3V0IGZvciBhIHBhaXIuXG5cdCAqIEBwYXJhbSB0ZW1wbGF0ZUhlbHBlcnMgVGVtcGxhdGUgaGVscGVycy5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIHBhbGV0dGUuXG5cdCAqIEBwYXJhbSBwYWlycyBUaGUgcGFpciB0byBjcmVhdGUgdGhlIGVudHJ5IGZvci5cblx0ICogQHJldHVybnMgVGhlIHBhaXIgdGVtcGxhdGUuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZVBhaXJzTGF5b3V0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0cGFpcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU/OiBzdHJpbmc7IGxpbmtzPzogc3RyaW5nW107IHNyY3M/OiBzdHJpbmdbXTsgd2lkZT86IGJvb2xlYW4gfVtdXG5cdCk6IFByb21pc2U8VGVtcGxhdGVGcmFnbWVudD4ge1xuXHRcdHJldHVybiB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XCJjb2x1bW5cIixcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKHBhaXJzLm1hcChhc3luYyAocCkgPT4gdGhpcy5jcmVhdGVQYWlyTGF5b3V0KHRlbXBsYXRlSGVscGVycywgcGFsZXR0ZSwgcCkpKSxcblx0XHRcdHsgZ2FwOiBcIjVweFwiLCBmbGV4OiBcIjFcIiB9XG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgdGhlIHBhaXJzIGxheW91dC5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gcGFpciBUaGUgcGFpciBkYXRhLlxuXHQgKiBAcGFyYW0gcGFpci5sYWJlbCBMYWJlbCBmb3IgdGhlIHBhaXIuXG5cdCAqIEBwYXJhbSBwYWlyLnZhbHVlIFRoZSB2YWx1ZSBmb3IgdGhlIHBhaXIuXG5cdCAqIEBwYXJhbSBwYWlyLmxpbmtzIEFueSBsaW5rcyB0byBkaXNwbGF5IGluIHRoZSBwYWlyLlxuXHQgKiBAcGFyYW0gcGFpci5zcmNzIEFueSBpbWFnZSBzb3VyY2VzIGZvciB0aGUgcGFpci5cblx0ICogQHBhcmFtIHBhaXIud2lkZSBEaXNwbGF5IHRoZSBwYWlyIGluIHdpZGUgZm9ybWF0LlxuXHQgKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIHBhaXJzLlxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVQYWlyTGF5b3V0KFxuXHRcdHRlbXBsYXRlSGVscGVyczogVGVtcGxhdGVIZWxwZXJzLFxuXHRcdHBhbGV0dGU6IEN1c3RvbVBhbGV0dGVTZXQsXG5cdFx0cGFpcjogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZT86IHN0cmluZzsgbGlua3M/OiBzdHJpbmdbXTsgc3Jjcz86IHN0cmluZ1tdOyB3aWRlPzogYm9vbGVhbiB9XG5cdCk6IFByb21pc2U8VGVtcGxhdGVGcmFnbWVudD4ge1xuXHRcdGNvbnN0IGVsZW1lbnRzOiBUZW1wbGF0ZUZyYWdtZW50W10gPSBbXG5cdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlVGV4dChgJHtwYWlyLmxhYmVsfVRpdGxlYCwgMTAsIHtcblx0XHRcdFx0Y29sb3I6IHBhbGV0dGUuaW5wdXRQbGFjZWhvbGRlcixcblx0XHRcdFx0ZmxleDogMVxuXHRcdFx0fSlcblx0XHRdO1xuXG5cdFx0aWYgKHBhaXIudmFsdWUpIHtcblx0XHRcdGVsZW1lbnRzLnB1c2goXG5cdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVUZXh0KGAke3BhaXIubGFiZWx9YCwgMTAsIHtcblx0XHRcdFx0XHRmbGV4OiBwYWlyLndpZGUgPyAxIDogMyxcblx0XHRcdFx0XHRkaXNwbGF5OiBcImZsZXhcIixcblx0XHRcdFx0XHRmbGV4V3JhcDogXCJ3cmFwXCIsXG5cdFx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6IHBhaXIud2lkZSA/IFwiZmxleC1zdGFydFwiIDogXCJmbGV4LWVuZFwiLFxuXHRcdFx0XHRcdHdvcmRCcmVhazogXCJicmVhay1hbGxcIlxuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAocGFpci5saW5rcz8ubGVuZ3RoKSB7XG5cdFx0XHRlbGVtZW50cy5wdXNoKFxuXHRcdFx0XHRhd2FpdCB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XHRcdFwicm93XCIsXG5cdFx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0XHRwYWlyLmxpbmtzLm1hcChhc3luYyAobCwgaWR4KSA9PlxuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlTGluayhcblx0XHRcdFx0XHRcdFx0XHRgJHtwYWlyLmxhYmVsfV9saW5rXyR7aWR4fWAsXG5cdFx0XHRcdFx0XHRcdFx0YCR7TWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0FDVElPTl9PUEVOfV8ke3BhaXIubGFiZWx9X2xpbmtfJHtpZHh9YCxcblx0XHRcdFx0XHRcdFx0XHQxMFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XHR7IGdhcDogXCI1cHhcIiwgZmxleDogMywganVzdGlmeUNvbnRlbnQ6IFwiZmxleC1lbmRcIiwgZmxleFdyYXA6IFwid3JhcFwiIH1cblx0XHRcdFx0KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAocGFpci5zcmNzPy5sZW5ndGgpIHtcblx0XHRcdGVsZW1lbnRzLnB1c2goXG5cdFx0XHRcdGF3YWl0IHRlbXBsYXRlSGVscGVycy5jcmVhdGVDb250YWluZXIoXG5cdFx0XHRcdFx0XCJyb3dcIixcblx0XHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0XHRcdHBhaXIuc3Jjcy5tYXAoYXN5bmMgKHMsIGlkeCkgPT5cblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUltYWdlKGAke3BhaXIubGFiZWx9X3NyY18ke2lkeH1gLCBcIk1lbWJlclwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XHRcdGhlaWdodDogXCIxNnB4XCIsXG5cdFx0XHRcdFx0XHRcdFx0b2JqZWN0Rml0OiBcImNvdmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiBcIjUwJVwiXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XHR7IGdhcDogXCI1cHhcIiwgZmxleDogMywganVzdGlmeUNvbnRlbnQ6IFwiZmxleC1lbmRcIiwgZmxleFdyYXA6IFwid3JhcFwiIH1cblx0XHRcdFx0KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUNvbnRhaW5lcihwYWlyLndpZGUgPyBcImNvbHVtblwiIDogXCJyb3dcIiwgZWxlbWVudHMsIHtcblx0XHRcdGp1c3RpZnlDb250ZW50OiBcInNwYWNlLWJldHdlZW5cIixcblx0XHRcdGdhcDogcGFpci53aWRlID8gXCI1cHhcIiA6IFwiMTBweFwiXG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgbGF5b3V0IHdpdGggYnV0dG9ucy5cblx0ICogQHBhcmFtIHRlbXBsYXRlSGVscGVycyBUbyBoZWxwIHdpdGggY3JlYXRpbmcgdGVtcGxhdGVzLlxuXHQgKiBAcGFyYW0gcGFsZXR0ZSBUaGUgY3VycmVudCBwYWxldHRlLlxuXHQgKiBAcGFyYW0gYnV0dG9ucyBUaGUgYnV0dG9ucyB0byBkaXNwbGF5LlxuXHQgKiBAcmV0dXJucyBUaGUgYnV0dG9ucyBsYXlvdXQuXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUJ1dHRvbnNMYXlvdXQoXG5cdFx0dGVtcGxhdGVIZWxwZXJzOiBUZW1wbGF0ZUhlbHBlcnMsXG5cdFx0cGFsZXR0ZTogQ3VzdG9tUGFsZXR0ZVNldCxcblx0XHRidXR0b25zOiB7XG5cdFx0XHR0aXRsZUtleTogc3RyaW5nO1xuXHRcdFx0YWN0aW9uOiBzdHJpbmc7XG5cdFx0XHRpbWFnZUtleTogc3RyaW5nO1xuXHRcdFx0aW1hZ2VBbHRUZXh0OiBzdHJpbmc7XG5cdFx0fVtdXG5cdCk6IFByb21pc2U8VGVtcGxhdGVGcmFnbWVudD4ge1xuXHRcdHJldHVybiB0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQ29udGFpbmVyKFxuXHRcdFx0XCJyb3dcIixcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRidXR0b25zLm1hcChhc3luYyAoYikgPT5cblx0XHRcdFx0XHR0ZW1wbGF0ZUhlbHBlcnMuY3JlYXRlQnV0dG9uKFxuXHRcdFx0XHRcdFx0QnV0dG9uU3R5bGUuU2Vjb25kYXJ5LFxuXHRcdFx0XHRcdFx0Yi50aXRsZUtleSxcblx0XHRcdFx0XHRcdGIuYWN0aW9uLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRib3JkZXI6IFwibm9uZVwiLFxuXHRcdFx0XHRcdFx0XHRib3JkZXJSYWRpdXM6IFwiNTAlXCIsXG5cdFx0XHRcdFx0XHRcdHdpZHRoOiBcIjQwcHhcIixcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBcIjQwcHhcIixcblx0XHRcdFx0XHRcdFx0cGFkZGluZzogXCIwcHhcIixcblx0XHRcdFx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG5cdFx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogcGFsZXR0ZS5iYWNrZ3JvdW5kMlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGVtcGxhdGVIZWxwZXJzLmNyZWF0ZUltYWdlKGIuaW1hZ2VLZXksIGIuaW1hZ2VBbHRUZXh0LCB7XG5cdFx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiMTZweFwiLFxuXHRcdFx0XHRcdFx0XHRcdGhlaWdodDogXCIxNnB4XCJcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdCksXG5cdFx0XHR7XG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiBcInNwYWNlLWFyb3VuZFwiLFxuXHRcdFx0XHRnYXA6IFwiMTBweFwiXG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBwcm9maWxlIGltYWdlIHVzaW5nIGluaXRpYWxzLlxuXHQgKiBAcGFyYW0gc2l6ZSBUaGUgc2l6ZSBvZiB0aGUgaW1hZ2UgdG8gY3JlYXRlLlxuXHQgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdXNlci5cblx0ICogQHJldHVybnMgU1ZHIGltYWdlLlxuXHQgKi9cblx0cHJpdmF0ZSBpbWFnZVByb2ZpbGVOb25lKHNpemU6IG51bWJlciwgbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gYDxzdmcgZmlsbD1cIiNERERERERcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIiBoZWlnaHQ9XCIke3NpemV9cHhcIiB3aWR0aD1cIiR7c2l6ZX1weFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cblx0XHQ8c3R5bGU+dGV4dHtmb250OiBib2xkIDM1MHB4IHNhbnMtc2VyaWY7ZmlsbDogYmxhY2s7fTwvc3R5bGU+XG5cdFx0PHJlY3Qgd2lkdGg9XCI1MTJcIiBoZWlnaHQ9XCI1MTJcIiAvPlxuXHRcdDx0ZXh0IHg9XCI1MCVcIiB5PVwiNTAlXCIgZG9taW5hbnQtYmFzZWxpbmU9XCJtaWRkbGVcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiPiR7bmFtZVswXX08L3RleHQ+XG5cdFx0PC9zdmc+YDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuZCBzdmcgaW50byBpbmxpbmUgZm9ybWF0LlxuXHQgKiBAcGFyYW0gc3ZnIFRoZSBTVkcgdG8gY29udmVydC5cblx0ICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBpbWFnZS5cblx0ICovXG5cdHByaXZhdGUgc3ZnVG9JbmxpbmUoc3ZnOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJHtzdmcucmVwbGFjZSgvIy9nLCBcIiUyM1wiKX1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnQgYSBiYXNlNjQgSUQgaW4gdG8gdXJsIGZvcm1hdC5cblx0ICogQHBhcmFtIGI2NElkIFRoZSBiYXNlNjQgaWQgdG8gY29udmVydC5cblx0ICogQHJldHVybnMgVGhlIHVybCBmb3JtIG9mIHRoZSBpZC5cblx0ICovXG5cdHByaXZhdGUgYmFzZTY0SWRUb1VybChiNjRJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiBiNjRJZCA/IGI2NElkLnJlcGxhY2UoL1xcKy9nLCBcIl9cIikucmVwbGFjZSgvXFwvL2csIFwiLVwiKSA6IGI2NElkO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgYmFzaWMgc3RyaW5nIHNhbml0aXplIGZ1bmN0aW9uIHRoYXQgcmVtb3ZlcyBhbmdsZSBicmFja2V0cyA8PiBmcm9tIGEgc3RyaW5nLlxuXHQgKiBAcGFyYW0gY29udGVudCB0aGUgY29udGVudCB0byBzYW5pdGl6ZVxuXHQgKiBAcmV0dXJucyBhIHN0cmluZyB3aXRob3V0IGFuZ2xlIGJyYWNrZXRzIDw+XG5cdCAqL1xuXHRwcml2YXRlIHNhbml0aXplU3RyaW5nKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50ICE9PSBudWxsICYmIHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRyZXR1cm4gY29udGVudFxuXHRcdFx0XHQucmVwbGFjZSgvPFtePl0qPj8vZ20sIFwiXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC8mZ3Q7L2csIFwiPlwiKVxuXHRcdFx0XHQucmVwbGFjZSgvJmx0Oy9nLCBcIjxcIilcblx0XHRcdFx0LnJlcGxhY2UoLyZhbXA7L2csIFwiJlwiKVxuXHRcdFx0XHQucmVwbGFjZSgvJm5ic3A7L2csIFwiIFwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxuXFxzKlxcbi9nLCBcIlxcblwiKTtcblx0XHR9XG5cdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydCB0aGUgb2JqZWN0IHR5cGUgdG8gYSB2YWx1ZSBmb3Igb3JkZXJpbmcuXG5cdCAqIEBwYXJhbSBvYmpUeXBlIFRoZSBvYmplY3QgdHlwZS5cblx0ICogQHJldHVybnMgVGhlIG9yZGVyaW5nIG51bWJlci5cblx0ICovXG5cdHByaXZhdGUgb2JqZWN0VHlwZVRvT3JkZXIob2JqVHlwZTogTWljcm9zb2Z0MzY1T2JqZWN0VHlwZXMpOiBudW1iZXIge1xuXHRcdGNvbnN0IG9ialR5cGVPcmRlcjogeyBba2V5IGluIE1pY3Jvc29mdDM2NU9iamVjdFR5cGVzXTogbnVtYmVyIH0gPSB7XG5cdFx0XHRVc2VyOiAxMDAsXG5cdFx0XHRDb250YWN0OiAyMDAsXG5cdFx0XHRNZXNzYWdlOiAzMDAsXG5cdFx0XHRDaGF0TWVzc2FnZTogNDAwLFxuXHRcdFx0RXZlbnQ6IDUwMCxcblx0XHRcdFRlYW06IDYwMCxcblx0XHRcdENoYW5uZWw6IDcwMCxcblx0XHRcdEZpbGU6IDgwMFxuXHRcdH07XG5cdFx0cmV0dXJuIChcblx0XHRcdCh0aGlzLl9kZWZpbml0aW9uPy5iYXNlU2NvcmUgPz8gTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24uX0RFRkFVTFRfQkFTRV9TQ09SRSkgKyBvYmpUeXBlT3JkZXJbb2JqVHlwZV1cblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgY2FjaGUgYW5kIHJlbW92ZSBhbnkgc3RhbGUgZGF0YS5cblx0ICovXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlQ2FjaGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gQ2xlYW51cCBhbnkgb2xkIGNhY2hlZCBwcm9maWxlIGltYWdlc1xuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZSk7XG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCB0dGwgPSBrZXlzLmxlbmd0aCA+IDUwID8gMzAwMDAgOiAzMDAwMDA7XG5cdFx0Zm9yIChjb25zdCBpZCBvZiBrZXlzKSB7XG5cdFx0XHRpZiAobm93IC0gdGhpcy5fcHJvZmlsZUltYWdlQ2FjaGVbaWRdLmFkZGVkID4gdHRsKSB7XG5cdFx0XHRcdGRlbGV0ZSB0aGlzLl9wcm9maWxlSW1hZ2VDYWNoZVtpZF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHRoZSB0ZWFtcyBhbmQgY2hhbm5lbHNcblx0XHRpZiAodGhpcy5fbXMzNjVDb25uZWN0aW9uICYmIHRoaXMuX2NhY2hlQ291bnRlciAlIDYgPT09IDApIHtcblx0XHRcdC8vIFVwZGF0ZSBldmVyeSAzIG1pbnV0ZXNcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID1cblx0XHRcdFx0XHRhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhMaXN0UmVzcG9uc2U8VGVhbT4+KFwiL3YxLjAvbWUvam9pbmVkVGVhbXNcIik7XG5cblx0XHRcdFx0Y29uc3Qgam9pbmVkVGVhbXMgPSByZXNwb25zZS5kYXRhPy52YWx1ZSA/PyBbXTtcblx0XHRcdFx0Y29uc3QgY2hhbm5lbHNGb3JUZWFtOiB7IFtpZDogc3RyaW5nXTogQ2hhbm5lbFtdIH0gPSB7fTtcblxuXHRcdFx0XHRpZiAoam9pbmVkVGVhbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmF0Y2hDaGFubmVsczogc3RyaW5nW10gPSBqb2luZWRUZWFtcy5tYXAoKHQpID0+IGAvdGVhbXMvJHt0LmlkfS9jaGFubmVsc2ApO1xuXG5cdFx0XHRcdFx0Y29uc3QgYmF0Y2hSZXNwb25zZXMgPSBhd2FpdCB0aGlzLl9tczM2NUNvbm5lY3Rpb24uZXhlY3V0ZUFwaVJlcXVlc3Q8R3JhcGhCYXRjaFJlc3BvbnNlPihcblx0XHRcdFx0XHRcdFwiL3YxLjAvJGJhdGNoXCIsXG5cdFx0XHRcdFx0XHRcIlBPU1RcIixcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdHM6IGJhdGNoQ2hhbm5lbHMubWFwKCh1cmwsIGlkeCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0XHRpZDogYFRlYW1DaGFubmVscy0keyhpZHggKyAxKS50b1N0cmluZygpfWAsXG5cdFx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHRcdHVybFxuXHRcdFx0XHRcdFx0XHR9KSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0aWYgKGJhdGNoUmVzcG9uc2VzLmRhdGE/LnJlc3BvbnNlcyAmJiBBcnJheS5pc0FycmF5KGJhdGNoUmVzcG9uc2VzLmRhdGE/LnJlc3BvbnNlcykpIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgYmF0Y2hSZXNwb25zZSBvZiBiYXRjaFJlc3BvbnNlcy5kYXRhLnJlc3BvbnNlcykge1xuXHRcdFx0XHRcdFx0XHRpZiAoYmF0Y2hSZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2xvZ2dlcj8uaW5mbyhgJHtiYXRjaFJlc3BvbnNlLmlkfSBSZXNwb25zZWAsIGJhdGNoUmVzcG9uc2UuYm9keSk7XG5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjaGFubmVscyA9IGJhdGNoUmVzcG9uc2UuYm9keSBhcyBHcmFwaExpc3RSZXNwb25zZTxDaGFubmVsPjtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChjaGFubmVscy52YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjaGFubmVsIG9mIGNoYW5uZWxzLnZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZSB3ZWJVcmwgZm9yIHRoZSB0ZWFtcyBtYW5hZ2VtZW50IHBhZ2UgbmVlZHMgY29uc3RydWN0aW5nIGZyb20gdGhlIGZpcnN0IGNoYW5uZWwgaW4gZWFjaCB0ZWFtXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHdlIGFsc28gY29ubmVjdCB0aGUgdGVhbSB0byB0aGUgY2hhbm5lbHMgYW5kIHZpY2UgdmVyc2Fcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoYW5uZWwud2ViVXJsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgd2ViVXJsID0gbmV3IFVSTChjaGFubmVsLndlYlVybCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHdlYlVybC5zZWFyY2hQYXJhbXMuaGFzKFwiZ3JvdXBJZFwiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZ3JvdXBJZCA9IHdlYlVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiZ3JvdXBJZFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRlYW0gPSBqb2luZWRUZWFtcy5maW5kKCh0KSA9PiB0LmlkID09PSBncm91cElkKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0ZWFtPy5pZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZWFtLndlYlVybCA9IGNoYW5uZWwud2ViVXJsO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGFubmVsc0ZvclRlYW1bdGVhbS5pZF0gPSBjaGFubmVsc0ZvclRlYW1bdGVhbS5pZF0gPz8gW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNoYW5uZWxzRm9yVGVhbVt0ZWFtLmlkXS5wdXNoKGNoYW5uZWwpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9sb2dnZXI/LmVycm9yKFxuXHRcdFx0XHRcdFx0XHRcdFx0YCR7YmF0Y2hSZXNwb25zZS5pZH0gUmVzcG9uc2UgRmFpbGVkYCxcblx0XHRcdFx0XHRcdFx0XHRcdGJhdGNoUmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0YmF0Y2hSZXNwb25zZS5ib2R5XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuX3RlYW1zQW5kQ2hhbm5lbHNDYWNoZSA9IGpvaW5lZFRlYW1zLm1hcCgodCkgPT4gKHtcblx0XHRcdFx0XHR0ZWFtOiB0LFxuXHRcdFx0XHRcdGNoYW5uZWxzOiBjaGFubmVsc0ZvclRlYW1bdC5pZCA/PyBcIlwiXSA/PyBbXVxuXHRcdFx0XHR9KSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fbG9nZ2VyPy5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgam9pbmVkIHRlYW1zXCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5fY2FjaGVDb3VudGVyKys7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBpY29uIGJhc2VkIG9uIHRoZSBNSU1FIHR5cGUgZm9yIGEgZHJpdmUgaXRlbS5cblx0ICogQHBhcmFtIGRyaXZlSXRlbSBUaGUgZHJpdmUgaXRlbS5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIHBhbGV0dGUgZm9yIHRoZW1pbmcuXG5cdCAqIEByZXR1cm5zIFRoZSBpY29ucyBmb3IgdGhlIGRyaXZlIGl0ZW0uXG5cdCAqL1xuXHRwcml2YXRlIGdldE1pbWVJY29uKGRyaXZlSXRlbTogRHJpdmVJdGVtLCBwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0KTogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCB7XG5cdFx0Y29uc3QgbWltZVR5cGUgPSBkcml2ZUl0ZW0uZmlsZT8ubWltZVR5cGUgPz8gXCJcIjtcblx0XHRjb25zdCBmaWxlbmFtZSA9IGRyaXZlSXRlbS5uYW1lID8/IFwiXCI7XG5cdFx0Y29uc3QgcGFja2FnZVR5cGUgPSBkcml2ZUl0ZW0ucGFja2FnZT8udHlwZSA/PyBcIlwiO1xuXHRcdGlmIChcblx0XHRcdG1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCIgfHxcblx0XHRcdG1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL21zd29yZFwiIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi5kb2N4XCIpIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi5kb2NcIilcblx0XHQpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLndvcmQ7XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdG1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0XCIgfHxcblx0XHRcdG1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbFwiIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi54bHN4XCIpIHx8XG5cdFx0XHRmaWxlbmFtZS5lbmRzV2l0aChcIi54bHNcIilcblx0XHQpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLmV4Y2VsO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQucHJlc2VudGF0aW9ubWwucHJlc2VudGF0aW9uXCIgfHxcblx0XHRcdG1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50XCIgfHxcblx0XHRcdGZpbGVuYW1lLmVuZHNXaXRoKFwiLnBwdHhcIikgfHxcblx0XHRcdGZpbGVuYW1lLmVuZHNXaXRoKFwiLnBwdFwiKVxuXHRcdCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3NldHRpbmdzPy5pbWFnZXMucG93ZXJwb2ludDtcblx0XHR9IGVsc2UgaWYgKHRoaXMuZHJpdmVJdGVtSXNJbWFnZShkcml2ZUl0ZW0pKSB7XG5cdFx0XHRpZiAoZHJpdmVJdGVtLnRodW1ibmFpbHMgJiYgQXJyYXkuaXNBcnJheShkcml2ZUl0ZW0udGh1bWJuYWlscykgJiYgZHJpdmVJdGVtLnRodW1ibmFpbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCB0aHVtYm5haWxTZXQgPSBkcml2ZUl0ZW0udGh1bWJuYWlsc1swXTtcblx0XHRcdFx0aWYgKHRodW1ibmFpbFNldD8uc21hbGwgPz8gdGh1bWJuYWlsU2V0Lm1lZGl1bSkge1xuXHRcdFx0XHRcdHJldHVybiB0aHVtYm5haWxTZXQuc21hbGw/LnVybCA/PyB0aHVtYm5haWxTZXQubWVkaXVtPy51cmw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHBhY2thZ2VUeXBlID09PSBcIm9uZU5vdGVcIiB8fCBmaWxlbmFtZS5lbmRzV2l0aChcIm9uZXRvYzJcIikgfHwgZmlsZW5hbWUuZW5kc1dpdGgoXCJvbmVcIikpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zZXR0aW5ncz8uaW1hZ2VzLm9uZW5vdGU7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmRyaXZlSXRlbUlzRm9sZGVyKGRyaXZlSXRlbSkpIHtcblx0XHRcdHJldHVybiB0aGlzLmdldFRoZW1lZEljb24oXCJmb2xkZXJcIiwgcGFsZXR0ZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBhIHRoZW1lIHZlcnNpb24gb2YgYW4gaWNvbi5cblx0ICogQHBhcmFtIHRoZW1lZEljb24gVGhlIHRoZW1lIGljb24gdG8gdGhlbS5cblx0ICogQHBhcmFtIHBhbGV0dGUgVGhlIHBhbGV0dGUgdG8gdXNlIGZvciB0aGVtaW5nLlxuXHQgKiBAcmV0dXJucyBUaGUgdGhlbWVkIGljb24uXG5cdCAqL1xuXHRwcml2YXRlIGdldFRoZW1lZEljb24odGhlbWVkSWNvbjogc3RyaW5nLCBwYWxldHRlOiBDdXN0b21QYWxldHRlU2V0KTogc3RyaW5nIHtcblx0XHRpZiAoIXRoaXMuX3NldHRpbmdzPy5pbWFnZXNbdGhlbWVkSWNvbl0pIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRjb25zdCBpY29uID0gdGhpcy5fc2V0dGluZ3MuaW1hZ2VzW3RoZW1lZEljb25dO1xuXHRcdGlmIChpY29uLnN0YXJ0c1dpdGgoXCJkYXRhOmltYWdlL3N2Zyt4bWxcIikpIHtcblx0XHRcdHJldHVybiBpY29uLnJlcGxhY2UoL3JnYlxcKDAsMCwwXFwpL2csIHBhbGV0dGUudGV4dERlZmF1bHQ/LnJlcGxhY2UoLyMvZywgXCIlMjNcIikgPz8gXCIwLDAsMFwiKTtcblx0XHR9XG5cdFx0cmV0dXJuIGljb247XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgdG8gc2VlIGlmIGEgZHJpdmUgaXRlbSBpcyBmb2xkZXIuXG5cdCAqIEBwYXJhbSBkcml2ZUl0ZW0gVGhlIGRyaXZlciBpdGVtIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBpdGVtIGlzIGEgZm9sZGVyLlxuXHQgKi9cblx0cHJpdmF0ZSBkcml2ZUl0ZW1Jc0ZvbGRlcihkcml2ZUl0ZW06IERyaXZlSXRlbSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBkcml2ZUl0ZW0uZmlsZSA9PT0gdW5kZWZpbmVkICYmIGRyaXZlSXRlbS5mb2xkZXIgIT09IHVuZGVmaW5lZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayB0byBzZWUgaWYgYSBkcml2ZSBpdGVtIGlzIGFuIGltYWdlLlxuXHQgKiBAcGFyYW0gZHJpdmVJdGVtIFRoZSBkcml2ZSBpdGVtIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBpdGVtIGlzIGFuXG5cdCAqL1xuXHRwcml2YXRlIGRyaXZlSXRlbUlzSW1hZ2UoZHJpdmVJdGVtOiBEcml2ZUl0ZW0pOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0ZHJpdmVJdGVtLmZpbGU/Lm1pbWVUeXBlPy5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpID8/XG5cdFx0XHRkcml2ZUl0ZW0ubmFtZT8uZW5kc1dpdGgoXCIuanBlZ1wiKSA/P1xuXHRcdFx0ZHJpdmVJdGVtLm5hbWU/LmVuZHNXaXRoKFwiLmpwZ1wiKSA/P1xuXHRcdFx0ZHJpdmVJdGVtLm5hbWU/LmVuZHNXaXRoKFwiLmdpZlwiKSA/P1xuXHRcdFx0ZHJpdmVJdGVtLm5hbWU/LmVuZHNXaXRoKFwiLndlYnBcIikgPz9cblx0XHRcdGRyaXZlSXRlbS5uYW1lPy5lbmRzV2l0aChcIi5wbmdcIikgPz9cblx0XHRcdGZhbHNlXG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGb3JtYXQgYW4gZXJyb3IgdG8gYSByZWFkYWJsZSBzdHJpbmcuXG5cdCAqIEBwYXJhbSBlcnIgVGhlIGVycm9yIHRvIGZvcm1hdC5cblx0ICogQHJldHVybnMgVGhlIGZvcm1hdHRlZCBlcnJvci5cblx0ICovXG5cdHByaXZhdGUgZm9ybWF0RXJyb3IoZXJyOiB1bmtub3duKTogc3RyaW5nIHtcblx0XHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiBlcnIubWVzc2FnZTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBlcnIgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdHJldHVybiBlcnI7XG5cdFx0fVxuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShlcnIpO1xuXHR9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUucGF0aHMgPSBbXTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJpbXBvcnQgeyBNaWNyb3NvZnQzNjVJbnRlZ3JhdGlvbiB9IGZyb20gXCIuL21zMzY1LWludGVncmF0aW9uXCI7XG5cbi8qKlxuICogVGhpcyBlbnRyeSBwb2ludCBpcyB1c2VkIGJ5IHdlYnBhY2sgdG8gY3JlYXRlIGEgbW9kdWxlIGZpbGUgd2hpY2ggY2FuIGJlIGNvbnN1bWVkXG4gKiBieSB0aGUgd29ya3NwYWNlLXBsYXRmb3JtLXN0YXJ0ZXIgZXhhbXBsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGVudHJ5UG9pbnRzOiB7IFtpZDogc3RyaW5nXTogTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24gfSA9IHtcblx0aW50ZWdyYXRpb25zOiBuZXcgTWljcm9zb2Z0MzY1SW50ZWdyYXRpb24oKVxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==