var e;function t(e){return null==e}!function(e){e.CustomButton="CustomButton",e.StoreCustomButton="StoreCustomButton",e.CustomDropdownItem="CustomDropdownItem",e.GlobalContextMenu="GlobalContextMenu",e.ViewTabContextMenu="ViewTabContextMenu",e.PageTabContextMenu="PageTabContextMenu",e.SaveButtonContextMenu="SaveButtonContextMenu",e.API="API"}(e||(e={}));const n={actions:new class{async initialize(e,t,n){this._logger=t("PageActions"),this._helpers=n}async get(n){const a={};return a["page-open"]=async n=>{if(n.callerType!==e.API){const e=n?.customData?.pageId,a=n?.customData?.windowIdentity;t(e)||(this._helpers?.launchPage?await this._helpers.launchPage(e,{targetWindowIdentity:a},this._logger):this._logger?.error("We are unable to launch a page as this module has not been passed the launchPage function."))}},a["page-delete"]=async a=>{if(a.callerType!==e.API){const e=a?.customData?.pageId;t(e)||(this._logger?.info(`Deleting page with id: ${e}`),await n.Storage.deletePage(e))}},a}},menus:new class{async initialize(e,t,n){this._logger=t("PageMenus"),this._settings=e.data}async get(e,n,a){if("global"===e&&!t(a?.windowIdentity)){const e=await n.Storage.getPages();e.sort(((e,t)=>e.title.localeCompare(t.title)));const o=this._settings?.deletePage?.include??!0,s=this._settings?.showPage?.include??!0,i=[],l={label:this._settings?.showPage?.menuLabel??"Show Page",icon:this._settings?.showPage?.menuIcon,enabled:e.length>0,submenu:[],position:{type:"SavePageAs",operation:"after",customId:"ShowPage",...this._settings?.showPage?.menuPosition}},g={label:this._settings?.deletePage?.menuLabel??"Delete Page",icon:this._settings?.deletePage?.menuIcon,enabled:e.length>0,submenu:[],position:{type:"SavePageAs",operation:"after",customId:"ShowDelete",...this._settings?.deletePage?.menuPosition}},r=[];let u=a?.windowIdentity;if(u){const e=n.Browser.wrapSync(u);!0===(await e.openfinWindow.getOptions()).workspacePlatform.disableMultiplePages&&(u=void 0)}const h=await n.Browser.getAllAttachedPages();if(e.length>0){for(const n of e){const e=h.find((e=>n.pageId===e.pageId)),a=!t(e?.parentIdentity)&&e?.parentIdentity.name===u?.name&&e?.isActive;i.push({label:n.title,type:"normal",enabled:!a,data:{type:"Custom",action:{id:"page-open",customData:{pageId:n.pageId,windowIdentity:u}}}}),r.push({label:n.title,type:"normal",enabled:t(e),data:{type:"Custom",action:{id:"page-delete",customData:{pageId:n.pageId}}}})}l.submenu&&l.submenu.push(...i),g.submenu&&g.submenu.push(...r)}const d=[];return o&&d.push(g),s&&d.push(l),d}}},initOptions:new class{async initialize(e,t,n){this._logger=t("InitOptionsShowPageHandler"),this._helpers=n,this._definition=e,this._logger.info("The handler has been loaded")}async action(e,n,a){if(t(n))this._logger?.warn(`Actions passed to the module require a payload to be passed. Requested action: ${e} can not be fulfilled.`);else try{if("show-page"===e){const e=n?.pageId;if(this._logger?.info(`The following pageId was passed and requested to show: ${e}`),!(function(e){return null!=e&&"string"==typeof e}(o=e)&&o.trim().length>0))return void this._logger?.error("The init handler received an pageId in the wrong format and is unable to show it");if(t(this._helpers?.launchPage))return void this._logger?.warn(`Unable to show page with pageId: ${e} as a launchPage function was not passed to this module via the module helpers.`);t(await(this._helpers?.launchPage(e)))&&this._logger?.error(`We have been unable to find and show the provided pageId: ${e}`)}}catch(t){this._logger?.error(`Error trying to perform action ${e}.`,t)}var o}}};export{n as entryPoints};
//# sourceMappingURL=pages.bundle.js.map